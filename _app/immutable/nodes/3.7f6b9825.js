import{g as yn,a as e0,S as a5,m as yd,b as u3,c as o5,d as oa,e as c3}from"../chunks/Section.489dc1b6.js";import{S as Jo,i as Qo,s as $o,L as Gy,k as M,l as L,m as R,h as T,n as S,p as ie,E as Ei,b as Pe,N as Ky,O as Hy,P as Xy,g as it,d as ht,a as be,c as xe,C as w,H as Et,D as nn,J as tc,T as Dk,w as pf,q as ee,r as te,U as h3,u as dt,e as Cn,V as $c,W as Wo,X as Yo,v as $u,f as ec,Q as Mk,o as Lk,F as e_,R as Yt,Y as Br,Z as Ma,_ as La,y as Nt,z as Ut,A as jt,B as qt,M as s5,$ as l5,a0 as D2,a1 as M2,a2 as u5,a3 as t0,a4 as X_,a5 as W_,a6 as Y_}from"../chunks/index.e39d7899.js";import{b as yp}from"../chunks/paths.9ab06fd9.js";import{h as c5,w as Or,j as Un}from"../chunks/singletons.73808077.js";/* empty css                                                              */var p3={},y2={},g2=34,Xg=10,_2=13;function Rk(u){return new Function("d","return {"+u.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function h5(u,h){var f=Rk(u);return function(v,_){return h(f(v),_,u)}}function f3(u){var h=Object.create(null),f=[];return u.forEach(function(v){for(var _ in v)_ in h||f.push(h[_]=_)}),f}function hl(u,h){var f=u+"",v=f.length;return v<h?new Array(h-v+1).join(0)+f:f}function p5(u){return u<0?"-"+hl(-u,6):u>9999?"+"+hl(u,6):hl(u,4)}function f5(u){var h=u.getUTCHours(),f=u.getUTCMinutes(),v=u.getUTCSeconds(),_=u.getUTCMilliseconds();return isNaN(u)?"Invalid Date":p5(u.getUTCFullYear())+"-"+hl(u.getUTCMonth()+1,2)+"-"+hl(u.getUTCDate(),2)+(_?"T"+hl(h,2)+":"+hl(f,2)+":"+hl(v,2)+"."+hl(_,3)+"Z":v?"T"+hl(h,2)+":"+hl(f,2)+":"+hl(v,2)+"Z":f||h?"T"+hl(h,2)+":"+hl(f,2)+"Z":"")}function d5(u){var h=new RegExp('["'+u+`
\r]`),f=u.charCodeAt(0);function v(Z,j){var fe,he,Ae=_(Z,function(Ee,Ve){if(fe)return fe(Ee,Ve-1);he=Ee,fe=j?h5(Ee,j):Rk(Ee)});return Ae.columns=he||[],Ae}function _(Z,j){var fe=[],he=Z.length,Ae=0,Ee=0,Ve,je=he<=0,Bt=!1;Z.charCodeAt(he-1)===Xg&&--he,Z.charCodeAt(he-1)===_2&&--he;function Mt(){if(je)return y2;if(Bt)return Bt=!1,p3;var et,Ar=Ae,Sr;if(Z.charCodeAt(Ar)===g2){for(;Ae++<he&&Z.charCodeAt(Ae)!==g2||Z.charCodeAt(++Ae)===g2;);return(et=Ae)>=he?je=!0:(Sr=Z.charCodeAt(Ae++))===Xg?Bt=!0:Sr===_2&&(Bt=!0,Z.charCodeAt(Ae)===Xg&&++Ae),Z.slice(Ar+1,et-1).replace(/""/g,'"')}for(;Ae<he;){if((Sr=Z.charCodeAt(et=Ae++))===Xg)Bt=!0;else if(Sr===_2)Bt=!0,Z.charCodeAt(Ae)===Xg&&++Ae;else if(Sr!==f)continue;return Z.slice(Ar,et)}return je=!0,Z.slice(Ar,he)}for(;(Ve=Mt())!==y2;){for(var mt=[];Ve!==p3&&Ve!==y2;)mt.push(Ve),Ve=Mt();j&&(mt=j(mt,Ee++))==null||fe.push(mt)}return fe}function x(Z,j){return Z.map(function(fe){return j.map(function(he){return N(fe[he])}).join(u)})}function a(Z,j){return j==null&&(j=f3(Z)),[j.map(N).join(u)].concat(x(Z,j)).join(`
`)}function z(Z,j){return j==null&&(j=f3(Z)),x(Z,j).join(`
`)}function A(Z){return Z.map(O).join(`
`)}function O(Z){return Z.map(N).join(u)}function N(Z){return Z==null?"":Z instanceof Date?f5(Z):h.test(Z+="")?'"'+Z.replace(/"/g,'""')+'"':Z}return{parse:v,parseRows:_,format:a,formatBody:z,formatRows:A,formatRow:O,formatValue:N}}var m5=d5(","),v5=m5.parse;function y5(u){for(var h in u){var f=u[h].trim(),v,_;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(v=+f))f=v;else if(_=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))g5&&_[4]&&!_[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;u[h]=f}return u}const g5=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function _5(u,h=window.fetch){let v=await(await h(u)).text();return await v5(v,y5)}function gd(u){let h=Math.round(u)%10;return u==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function r0(u){return u>0?"increase":u<0?"decrease":"nochange"}function _d(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"No change"}function i0(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"<1%"}async function d3(u,h){return await(await h(e0.app_json_data+u+".json")).json()}async function b5({params:u,fetch:h}){let f=u.code,v=await _5(e0.search_data,h),_={};v.forEach(A=>_[A.code]=A.name),v.forEach(A=>{A.typepl=yn[A.type].pl,A.typenm=yn[A.type].name,A.typestr=_[A.parent]?`${yn[A.type].name} within ${_[A.parent]}`:""});let x=v.sort((A,O)=>A.name.localeCompare(O.name)),a=await d3("N92000002",h),z=await d3(f,h);return{search_data:x,place:z,ni:a}}const fz=Object.freeze(Object.defineProperty({__proto__:null,load:b5},Symbol.toStringTag,{value:"Module"})),m3=c5("goto");var x5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bk(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var w5={rgb2hsl:t_,rgb2hsv:c0,rgb2hwb:r_,rgb2cmyk:i_,rgb2keyword:n_,rgb2xyz:L2,rgb2lab:R2,rgb2lch:E5,hsl2rgb:h0,hsl2hsv:S5,hsl2hwb:k5,hsl2cmyk:I5,hsl2keyword:T5,hsv2rgb:p0,hsv2hsl:A5,hsv2hwb:z5,hsv2cmyk:P5,hsv2keyword:C5,hwb2rgb:a_,hwb2hsl:D5,hwb2hsv:M5,hwb2cmyk:L5,hwb2keyword:R5,cmyk2rgb:o_,cmyk2hsl:B5,cmyk2hsv:O5,cmyk2hwb:V5,cmyk2keyword:F5,keyword2rgb:dv,keyword2hsl:q5,keyword2hsv:Z5,keyword2hwb:G5,keyword2cmyk:K5,keyword2lab:H5,keyword2xyz:X5,xyz2rgb:Ok,xyz2lab:Vk,xyz2lch:N5,lab2xyz:B2,lab2rgb:Fk,lab2lch:O2,lch2lab:V2,lch2xyz:U5,lch2rgb:j5};function t_(u){var h=u[0]/255,f=u[1]/255,v=u[2]/255,_=Math.min(h,f,v),x=Math.max(h,f,v),a=x-_,z,A,O;return x==_?z=0:h==x?z=(f-v)/a:f==x?z=2+(v-h)/a:v==x&&(z=4+(h-f)/a),z=Math.min(z*60,360),z<0&&(z+=360),O=(_+x)/2,x==_?A=0:O<=.5?A=a/(x+_):A=a/(2-x-_),[z,A*100,O*100]}function c0(u){var h=u[0],f=u[1],v=u[2],_=Math.min(h,f,v),x=Math.max(h,f,v),a=x-_,z,A,O;return x==0?A=0:A=a/x*1e3/10,x==_?z=0:h==x?z=(f-v)/a:f==x?z=2+(v-h)/a:v==x&&(z=4+(h-f)/a),z=Math.min(z*60,360),z<0&&(z+=360),O=x/255*1e3/10,[z,A,O]}function r_(u){var h=u[0],f=u[1],x=u[2],v=t_(u)[0],_=1/255*Math.min(h,Math.min(f,x)),x=1-1/255*Math.max(h,Math.max(f,x));return[v,_*100,x*100]}function i_(u){var h=u[0]/255,f=u[1]/255,v=u[2]/255,_,x,a,z;return z=Math.min(1-h,1-f,1-v),_=(1-h-z)/(1-z)||0,x=(1-f-z)/(1-z)||0,a=(1-v-z)/(1-z)||0,[_*100,x*100,a*100,z*100]}function n_(u){return Nk[JSON.stringify(u)]}function L2(u){var h=u[0]/255,f=u[1]/255,v=u[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,v=v>.04045?Math.pow((v+.055)/1.055,2.4):v/12.92;var _=h*.4124+f*.3576+v*.1805,x=h*.2126+f*.7152+v*.0722,a=h*.0193+f*.1192+v*.9505;return[_*100,x*100,a*100]}function R2(u){var h=L2(u),f=h[0],v=h[1],_=h[2],x,a,z;return f/=95.047,v/=100,_/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,v=v>.008856?Math.pow(v,1/3):7.787*v+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,x=116*v-16,a=500*(f-v),z=200*(v-_),[x,a,z]}function E5(u){return O2(R2(u))}function h0(u){var h=u[0]/360,f=u[1]/100,v=u[2]/100,_,x,a,z,A;if(f==0)return A=v*255,[A,A,A];v<.5?x=v*(1+f):x=v+f-v*f,_=2*v-x,z=[0,0,0];for(var O=0;O<3;O++)a=h+1/3*-(O-1),a<0&&a++,a>1&&a--,6*a<1?A=_+(x-_)*6*a:2*a<1?A=x:3*a<2?A=_+(x-_)*(2/3-a)*6:A=_,z[O]=A*255;return z}function S5(u){var h=u[0],f=u[1]/100,v=u[2]/100,_,x;return v===0?[0,0,0]:(v*=2,f*=v<=1?v:2-v,x=(v+f)/2,_=2*f/(v+f),[h,_*100,x*100])}function k5(u){return r_(h0(u))}function I5(u){return i_(h0(u))}function T5(u){return n_(h0(u))}function p0(u){var h=u[0]/60,f=u[1]/100,A=u[2]/100,v=Math.floor(h)%6,_=h-Math.floor(h),x=255*A*(1-f),a=255*A*(1-f*_),z=255*A*(1-f*(1-_)),A=255*A;switch(v){case 0:return[A,z,x];case 1:return[a,A,x];case 2:return[x,A,z];case 3:return[x,a,A];case 4:return[z,x,A];case 5:return[A,x,a]}}function A5(u){var h=u[0],f=u[1]/100,v=u[2]/100,_,x;return x=(2-f)*v,_=f*v,_/=x<=1?x:2-x,_=_||0,x/=2,[h,_*100,x*100]}function z5(u){return r_(p0(u))}function P5(u){return i_(p0(u))}function C5(u){return n_(p0(u))}function a_(u){var h=u[0]/360,f=u[1]/100,v=u[2]/100,_=f+v,x,a,z,A;switch(_>1&&(f/=_,v/=_),x=Math.floor(6*h),a=1-v,z=6*h-x,x&1&&(z=1-z),A=f+z*(a-f),x){default:case 6:case 0:r=a,g=A,b=f;break;case 1:r=A,g=a,b=f;break;case 2:r=f,g=a,b=A;break;case 3:r=f,g=A,b=a;break;case 4:r=A,g=f,b=a;break;case 5:r=a,g=f,b=A;break}return[r*255,g*255,b*255]}function D5(u){return t_(a_(u))}function M5(u){return c0(a_(u))}function L5(u){return i_(a_(u))}function R5(u){return n_(a_(u))}function o_(u){var h=u[0]/100,f=u[1]/100,v=u[2]/100,_=u[3]/100,x,a,z;return x=1-Math.min(1,h*(1-_)+_),a=1-Math.min(1,f*(1-_)+_),z=1-Math.min(1,v*(1-_)+_),[x*255,a*255,z*255]}function B5(u){return t_(o_(u))}function O5(u){return c0(o_(u))}function V5(u){return r_(o_(u))}function F5(u){return n_(o_(u))}function Ok(u){var h=u[0]/100,f=u[1]/100,v=u[2]/100,_,x,a;return _=h*3.2406+f*-1.5372+v*-.4986,x=h*-.9689+f*1.8758+v*.0415,a=h*.0557+f*-.204+v*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x=x*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,_=Math.min(Math.max(0,_),1),x=Math.min(Math.max(0,x),1),a=Math.min(Math.max(0,a),1),[_*255,x*255,a*255]}function Vk(u){var h=u[0],f=u[1],v=u[2],_,x,a;return h/=95.047,f/=100,v/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,v=v>.008856?Math.pow(v,1/3):7.787*v+16/116,_=116*f-16,x=500*(h-f),a=200*(f-v),[_,x,a]}function N5(u){return O2(Vk(u))}function B2(u){var h=u[0],f=u[1],v=u[2],_,x,a,z;return h<=8?(x=h*100/903.3,z=7.787*(x/100)+16/116):(x=100*Math.pow((h+16)/116,3),z=Math.pow(x/100,1/3)),_=_/95.047<=.008856?_=95.047*(f/500+z-16/116)/7.787:95.047*Math.pow(f/500+z,3),a=a/108.883<=.008859?a=108.883*(z-v/200-16/116)/7.787:108.883*Math.pow(z-v/200,3),[_,x,a]}function O2(u){var h=u[0],f=u[1],v=u[2],_,x,a;return _=Math.atan2(v,f),x=_*360/2/Math.PI,x<0&&(x+=360),a=Math.sqrt(f*f+v*v),[h,a,x]}function Fk(u){return Ok(B2(u))}function V2(u){var h=u[0],f=u[1],v=u[2],_,x,a;return a=v/360*2*Math.PI,_=f*Math.cos(a),x=f*Math.sin(a),[h,_,x]}function U5(u){return B2(V2(u))}function j5(u){return Fk(V2(u))}function dv(u){return T2[u]}function q5(u){return t_(dv(u))}function Z5(u){return c0(dv(u))}function G5(u){return r_(dv(u))}function K5(u){return i_(dv(u))}function H5(u){return R2(dv(u))}function X5(u){return L2(dv(u))}var T2={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Nk={};for(var v3 in T2)Nk[JSON.stringify(T2[v3])]=v3;var b2=w5,hv=function(){return new s_};for(var Wg in b2){hv[Wg+"Raw"]=function(u){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),b2[u](h)}}(Wg);var y3=/(\w+)2(\w+)/.exec(Wg),x2=y3[1],W5=y3[2];hv[x2]=hv[x2]||{},hv[x2][W5]=hv[Wg]=function(u){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=b2[u](h);if(typeof f=="string"||f===void 0)return f;for(var v=0;v<f.length;v++)f[v]=Math.round(f[v]);return f}}(Wg)}var s_=function(){this.convs={}};s_.prototype.routeSpace=function(u,h){var f=h[0];return f===void 0?this.getValues(u):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(u,f))};s_.prototype.setValues=function(u,h){return this.space=u,this.convs={},this.convs[u]=h,this};s_.prototype.getValues=function(u){var h=this.convs[u];if(!h){var f=this.space,v=this.convs[f];h=hv[f][u](v),this.convs[u]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(u){s_.prototype[u]=function(h){return this.routeSpace(u,arguments)}});var Y5=hv,w2=Y5,J5=function(u){var h,f,v,_;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(u)){var x=h[1],a=x.replace(/a$/,""),z=a==="cmyk"?4:3;f=w2[a],v=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(O,N){return/%$/.test(O)&&N===z?parseFloat(O)/100:(/%$/.test(O),parseFloat(O))}),x===a&&v.push(1),_=v[z]===void 0?1:v[z],v=v.slice(0,z),f[a]=function(){return v}}else if(/^#[A-Fa-f0-9]+$/.test(u)){var a=u.replace(/^#/,""),z=a.length;f=w2.rgb,v=a.split(z===3?/(.)/:/(..)/),v=v.filter(Boolean).map(function(Z){return parseInt(z===3?Z+Z:Z,16)}),_=1,f.rgb=function(){return v},v[0]||(v[0]=0),v[1]||(v[1]=0),v[2]||(v[2]=0)}else f=w2.keyword,f.keyword=function(){return u},v=u,_=1;var A={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{A.rgb=f.rgb(v)}catch{}try{A.hsl=f.hsl(v)}catch{}try{A.hsv=f.hsv(v)}catch{}try{A.cmyk=f.cmyk(v)}catch{}try{A.keyword=f.keyword(v)}catch{}return A.rgb&&(A.hex="#"+A.rgb.map(function(O){var N=O.toString(16);return N.length===1?"0"+N:N}).join("")),A.rgb&&(A.rgba=A.rgb.concat(_)),A.hsl&&(A.hsla=A.hsl.concat(_)),A.hsv&&(A.hsva=A.hsv.concat(_)),A.cmyk&&(A.cmyka=A.cmyk.concat(_)),A};const Q5=Bk(J5);function $5(u){let h,f;const v=u[5].default,_=Gy(v,u,u[4],null);return{c(){h=M("span"),_&&_.c(),this.h()},l(x){h=L(x,"SPAN",{class:!0,style:!0,role:!0});var a=R(h);_&&_.l(a),a.forEach(T),this.h()},h(){S(h,"class","em svelte-s1t2y4"),ie(h,"background-color",u[0]),ie(h,"color",u[2]),S(h,"role","presentation"),Ei(h,"nowrap",u[1])},m(x,a){Pe(x,h,a),_&&_.m(h,null),f=!0},p(x,[a]){_&&_.p&&(!f||a&16)&&Ky(_,v,x,x[4],f?Xy(v,x[4],a,null):Hy(x[4]),null),(!f||a&1)&&ie(h,"background-color",x[0]),(!f||a&4)&&ie(h,"color",x[2]),(!f||a&2)&&Ei(h,"nowrap",x[1])},i(x){f||(it(_,x),f=!0)},o(x){ht(_,x),f=!1},d(x){x&&T(h),_&&_.d(x)}}}function eT(u,h,f){let v,{$$slots:_={},$$scope:x}=h,{color:a="lightgrey"}=h,{nowrap:z=!0}=h;function A(N){return(N[0]*299+N[1]*587+N[2]*114)/1e3>125?"black":"white"}let O="black";return u.$$set=N=>{"color"in N&&f(0,a=N.color),"nowrap"in N&&f(1,z=N.nowrap),"$$scope"in N&&f(4,x=N.$$scope)},u.$$.update=()=>{u.$$.dirty&1&&f(3,v=Q5(a).rgb),u.$$.dirty&8&&v&&f(2,O=A(v))},[a,z,O,v,x,_]}class f0 extends Jo{constructor(h){super(),Qo(this,h,eT,$5,$o,{color:0,nowrap:1})}}function g3(u,h,f){const v=u.slice();return v[34]=h[f],v[37]=h,v[36]=f,v}function _3(u,h,f){const v=u.slice();return v[34]=h[f],v[35]=h,v[36]=f,v}function tT(u){let h,f,v,_,x,a,z;return{c(){h=M("a"),f=M("input"),v=be(),_=M("span"),x=ee(" "),this.h()},l(A){h=L(A,"A",{id:!0,class:!0});var O=R(h);f=L(O,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),v=xe(O),_=L(O,"SPAN",{class:!0});var N=R(_);x=te(N," "),N.forEach(T),O.forEach(T),this.h()},h(){S(f,"type","text"),S(f,"placeholder",u[0]),S(f,"autocomplete","false"),f.autofocus="autofocus",S(f,"onfocus","this.select()"),S(f,"class","svelte-1jrr0c2"),S(_,"class","button svelte-1jrr0c2"),Ei(_,"search",u[3]),Ei(_,"down",!u[3]),S(h,"id","toggle"),S(h,"class","svelte-1jrr0c2")},m(A,O){Pe(A,h,O),w(h,f),h3(f,u[4]),u[25](f),w(h,v),w(h,_),w(_,x),f.focus(),a||(z=[Et(f,"keydown",u[15]),Et(f,"input",u[24]),Et(f,"keyup",u[17]),Et(h,"click",u[12]),Et(h,"focus",u[12])],a=!0)},p(A,O){O[0]&1&&S(f,"placeholder",A[0]),O[0]&16&&f.value!==A[4]&&h3(f,A[4]),O[0]&8&&Ei(_,"search",A[3]),O[0]&8&&Ei(_,"down",!A[3])},d(A){A&&T(h),u[25](null),a=!1,tc(z)}}}function rT(u){let h,f,v=u[5][u[1]]+"",_,x,a,z,A,O,N,Z=u[2]&&b3(u);return{c(){h=M("a"),f=M("span"),_=ee(v),x=be(),Z&&Z.c(),a=be(),z=M("span"),A=ee(" "),this.h()},l(j){h=L(j,"A",{id:!0,class:!0});var fe=R(h);f=L(fe,"SPAN",{class:!0});var he=R(f);_=te(he,v),x=xe(he),Z&&Z.l(he),he.forEach(T),a=xe(fe),z=L(fe,"SPAN",{class:!0});var Ae=R(z);A=te(Ae," "),Ae.forEach(T),fe.forEach(T),this.h()},h(){S(f,"class","selection svelte-1jrr0c2"),S(z,"class","button close svelte-1jrr0c2"),S(h,"id","toggle"),S(h,"class","selected svelte-1jrr0c2")},m(j,fe){Pe(j,h,fe),w(h,f),w(f,_),w(f,x),Z&&Z.m(f,null),w(h,a),w(h,z),w(z,A),O||(N=[Et(z,"click",u[14]),Et(h,"click",u[12])],O=!0)},p(j,fe){fe[0]&34&&v!==(v=j[5][j[1]]+"")&&dt(_,v),j[2]?Z?Z.p(j,fe):(Z=b3(j),Z.c(),Z.m(f,null)):Z&&(Z.d(1),Z=null)},d(j){j&&T(h),Z&&Z.d(),O=!1,tc(N)}}}function b3(u){let h,f=u[5][u[2]]+"",v;return{c(){h=M("small"),v=ee(f),this.h()},l(_){h=L(_,"SMALL",{class:!0});var x=R(h);v=te(x,f),x.forEach(T),this.h()},h(){S(h,"class","svelte-1jrr0c2")},m(_,x){Pe(_,h,x),w(h,v)},p(_,x){x[0]&36&&f!==(f=_[5][_[2]]+"")&&dt(v,f)},d(_){_&&T(h)}}}function x3(u){let h,f;function v(a,z){return a[4].length<3?oT:a[8][0]&&a[2]?aT:a[8][0]?nT:iT}let _=v(u),x=_(u);return{c(){h=M("div"),f=M("ul"),x.c(),this.h()},l(a){h=L(a,"DIV",{id:!0,style:!0,class:!0});var z=R(h);f=L(z,"UL",{class:!0});var A=R(f);x.l(A),A.forEach(T),z.forEach(T),this.h()},h(){S(f,"class","svelte-1jrr0c2"),S(h,"id","dropdown"),ie(h,"top","0"),ie(h,"margin-top","50px"),S(h,"class","svelte-1jrr0c2")},m(a,z){Pe(a,h,z),w(h,f),x.m(f,null),u[32](h)},p(a,z){_===(_=v(a))&&x?x.p(a,z):(x.d(1),x=_(a),x&&(x.c(),x.m(f,null)))},d(a){a&&T(h),x.d(),u[32](null)}}}function iT(u){let h,f;return{c(){h=M("li"),f=ee("No results"),this.h()},l(v){h=L(v,"LI",{class:!0});var _=R(h);f=te(_,"No results"),_.forEach(T),this.h()},h(){S(h,"class","svelte-1jrr0c2")},m(v,_){Pe(v,h,_),w(h,f)},p:nn,d(v){v&&T(h)}}}function nT(u){let h,f=u[8],v=[];for(let _=0;_<f.length;_+=1)v[_]=w3(g3(u,f,_));return{c(){for(let _=0;_<v.length;_+=1)v[_].c();h=Cn()},l(_){for(let x=0;x<v.length;x+=1)v[x].l(_);h=Cn()},m(_,x){for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(_,x);Pe(_,h,x)},p(_,x){if(x[0]&10626){f=_[8];let a;for(a=0;a<f.length;a+=1){const z=g3(_,f,a);v[a]?v[a].p(z,x):(v[a]=w3(z),v[a].c(),v[a].m(h.parentNode,h))}for(;a<v.length;a+=1)v[a].d(1);v.length=f.length}},d(_){$c(v,_),_&&T(h)}}}function aT(u){let h,f=u[8],v=[];for(let _=0;_<f.length;_+=1)v[_]=E3(_3(u,f,_));return{c(){for(let _=0;_<v.length;_+=1)v[_].c();h=Cn()},l(_){for(let x=0;x<v.length;x+=1)v[x].l(_);h=Cn()},m(_,x){for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(_,x);Pe(_,h,x)},p(_,x){if(x[0]&10630){f=_[8];let a;for(a=0;a<f.length;a+=1){const z=_3(_,f,a);v[a]?v[a].p(z,x):(v[a]=E3(z),v[a].c(),v[a].m(h.parentNode,h))}for(;a<v.length;a+=1)v[a].d(1);v.length=f.length}},d(_){$c(v,_),_&&T(h)}}}function oT(u){let h,f;return{c(){h=M("li"),f=ee("Type a name..."),this.h()},l(v){h=L(v,"LI",{class:!0});var _=R(h);f=te(_,"Type a name..."),_.forEach(T),this.h()},h(){S(h,"class","svelte-1jrr0c2")},m(v,_){Pe(v,h,_),w(h,f)},p:nn,d(v){v&&T(h)}}}function w3(u){let h,f=u[34][u[1]]+"",v,_,x=u[36],a,z;function A(){return u[29](u[34])}function O(){return u[30](u[36])}const N=()=>u[31](h,x),Z=()=>u[31](null,x);return{c(){h=M("li"),v=ee(f),_=be(),this.h()},l(j){h=L(j,"LI",{class:!0});var fe=R(h);v=te(fe,f),_=xe(fe),fe.forEach(T),this.h()},h(){S(h,"class","svelte-1jrr0c2"),Ei(h,"highlight",u[7]==u[36])},m(j,fe){Pe(j,h,fe),w(h,v),w(h,_),N(),a||(z=[Et(h,"click",A),Et(h,"mouseover",O)],a=!0)},p(j,fe){u=j,fe[0]&258&&f!==(f=u[34][u[1]]+"")&&dt(v,f),x!==u[36]&&(Z(),x=u[36],N()),fe[0]&128&&Ei(h,"highlight",u[7]==u[36])},d(j){j&&T(h),Z(),a=!1,tc(z)}}}function E3(u){let h,f=u[34][u[1]]+"",v,_,x,a=u[34][u[2]]+"",z,A,O=u[36],N,Z;function j(){return u[26](u[34])}function fe(){return u[27](u[36])}const he=()=>u[28](h,O),Ae=()=>u[28](null,O);return{c(){h=M("li"),v=ee(f),_=be(),x=M("small"),z=ee(a),A=be(),this.h()},l(Ee){h=L(Ee,"LI",{class:!0});var Ve=R(h);v=te(Ve,f),_=xe(Ve),x=L(Ve,"SMALL",{class:!0});var je=R(x);z=te(je,a),je.forEach(T),A=xe(Ve),Ve.forEach(T),this.h()},h(){S(x,"class","svelte-1jrr0c2"),S(h,"class","svelte-1jrr0c2"),Ei(h,"highlight",u[7]==u[36])},m(Ee,Ve){Pe(Ee,h,Ve),w(h,v),w(h,_),w(h,x),w(x,z),w(h,A),he(),N||(Z=[Et(h,"click",j),Et(h,"mouseover",fe)],N=!0)},p(Ee,Ve){u=Ee,Ve[0]&258&&f!==(f=u[34][u[1]]+"")&&dt(v,f),Ve[0]&260&&a!==(a=u[34][u[2]]+"")&&dt(z,a),O!==u[36]&&(Ae(),O=u[36],he()),Ve[0]&128&&Ei(h,"highlight",u[7]==u[36])},d(Ee){Ee&&T(h),Ae(),N=!1,tc(Z)}}}function sT(u){let h,f,v,_;function x(O,N){return O[5]&&!O[3]?rT:tT}let a=x(u),z=a(u),A=u[6]&&x3(u);return{c(){h=M("div"),z.c(),f=be(),A&&A.c(),this.h()},l(O){h=L(O,"DIV",{id:!0,class:!0});var N=R(h);z.l(N),f=xe(N),A&&A.l(N),N.forEach(T),this.h()},h(){S(h,"id","select"),S(h,"class","svelte-1jrr0c2"),Ei(h,"active",u[6])},m(O,N){Pe(O,h,N),z.m(h,null),w(h,f),A&&A.m(h,null),v||(_=[Et(window,"click",u[18]),Et(h,"keydown",u[16])],v=!0)},p(O,N){a===(a=x(O))&&z?z.p(O,N):(z.d(1),z=a(O),z&&(z.c(),z.m(h,f))),O[6]?A?A.p(O,N):(A=x3(O),A.c(),A.m(h,null)):A&&(A.d(1),A=null),N[0]&64&&Ei(h,"active",O[6])},i:nn,o:nn,d(O){O&&T(h),z.d(),A&&A.d(),v=!1,tc(_)}}}function lT(u){return new Promise(h=>setTimeout(h,u))}function uT(u,h,f){let v;const _=Dk();let{search_data:x}=h,{selected:a=null}=h,{placeholder:z="Enter a town or area name"}=h,{value:A="code"}=h,{label:O="name"}=h,{group:N=null}=h,{search:Z=!1}=h,j=a,fe=a?x.find(Fe=>{Fe[A]==a[A]}):null,he=!1,Ae="",Ee=null,Ve,je,Bt,Mt=[];function mt(Fe){Fe.stopPropagation(),f(4,Ae=""),f(6,he=!he),lT(10).then(()=>{Bt&&he&&Bt.focus()})}function et(Fe){f(19,a=Fe),f(6,he=!1),_("select",{selected:Fe,value:Fe[A]})}function Ar(Fe){Fe.stopPropagation(),f(19,a=null),f(22,j=null),f(5,fe=null),_("select",{selected:null,value:null})}function Sr(Fe){f(6,he=!0)}function or(Fe){he&&Ve[0]&&Number.isInteger(Ee)&&(Fe.keyCode===38?(f(7,Ee-=Ee>0?1:0),Mt[Ee].scrollIntoView({block:"nearest",inline:"start"})):Fe.keyCode===40&&(f(7,Ee+=Ee<Ve.length-1?1:0),Mt[Ee].scrollIntoView({block:"nearest",inline:"end"})))}function kt(Fe){Ve[0]&&Number.isInteger(Ee)&&Fe.keyCode===13&&et(Ve[Ee])}function Tt(Fe){Fe.target!==je&&(f(6,he=!1),f(7,Ee=0))}function Pr(){Ae=this.value,f(4,Ae)}function Ot(Fe){pf[Fe?"unshift":"push"](()=>{Bt=Fe,f(10,Bt)})}const zr=Fe=>et(Fe),at=Fe=>f(7,Ee=Fe);function cr(Fe,sr){pf[Fe?"unshift":"push"](()=>{Mt[sr]=Fe,f(11,Mt)})}const Jr=Fe=>et(Fe),hi=Fe=>f(7,Ee=Fe);function Tr(Fe,sr){pf[Fe?"unshift":"push"](()=>{Mt[sr]=Fe,f(11,Mt)})}function gn(Fe){pf[Fe?"unshift":"push"](()=>{je=Fe,f(9,je)})}return u.$$set=Fe=>{"search_data"in Fe&&f(20,x=Fe.search_data),"selected"in Fe&&f(19,a=Fe.selected),"placeholder"in Fe&&f(0,z=Fe.placeholder),"value"in Fe&&f(21,A=Fe.value),"label"in Fe&&f(1,O=Fe.label),"group"in Fe&&f(2,N=Fe.group),"search"in Fe&&f(3,Z=Fe.search)},u.$$.update=()=>{u.$$.dirty[0]&16&&f(23,v=Ae?new RegExp(Ae,"i"):null),u.$$.dirty[0]&9437186&&(f(8,Ve=v?x.filter(Fe=>v.test(Fe[O])):x),f(7,Ee=0)),u.$$.dirty[0]&7864320&&j!=a&&(f(5,fe=x.find(Fe=>Fe[A]==a[A])),f(22,j=a))},[z,O,N,Z,Ae,fe,he,Ee,Ve,je,Bt,Mt,mt,et,Ar,Sr,or,kt,Tt,a,x,A,j,v,Pr,Ot,zr,at,cr,Jr,hi,Tr,gn]}class cT extends Jo{constructor(h){super(),Qo(this,h,uT,sT,$o,{search_data:20,selected:19,placeholder:0,value:21,label:1,group:2,search:3},null,[-1,-1])}}var Uk={exports:{}};(function(u,h){(function(f,v){u.exports=v()})(x5,function(){var f,v,_;function x(a,z){if(!f)f=z;else if(!v)v=z;else{var A="var sharedChunk = {}; ("+f+")(sharedChunk); ("+v+")(sharedChunk);",O={};f(O),_=z(O),typeof window<"u"&&(_.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}return x(["exports"],function(a){function z(e,t){return e(t={exports:{}},t.exports),t.exports}var A=O;function O(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}O.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},O.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},O.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},O.prototype.solveCurveX=function(e,t){var i,l,p,d,y;for(t===void 0&&(t=1e-6),p=e,y=0;y<8;y++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var I=this.sampleCurveDerivativeX(p);if(Math.abs(I)<1e-6)break;p-=d/I}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},O.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var N=Z;function Z(e,t){this.x=e,this.y=t}Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Z.convert=function(e){return e instanceof Z?e:Array.isArray(e)?new Z(e[0],e[1]):e};var j=typeof self<"u"?self:{},fe=Math.pow(2,53)-1;function he(e,t,i,l){var p=new A(e,t,i,l);return function(d){return p.solve(d)}}var Ae=he(.25,.1,.25,1);function Ee(e,t,i){return Math.min(i,Math.max(t,e))}function Ve(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function je(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var y in d)e[y]=d[y]}return e}var Bt=1;function Mt(){return Bt++}function mt(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function et(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Ar(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function Sr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function or(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function kt(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function Tt(e){return Array.isArray(e)?e.map(Tt):typeof e=="object"&&e?or(e,Tt):e}var Pr={};function Ot(e){Pr[e]||(typeof console<"u"&&console.warn(e),Pr[e]=!0)}function zr(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function at(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,y=void 0;i<l;p=i++)t+=((y=e[p]).x-(d=e[i]).x)*(d.y+y.y);return t}function cr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Jr(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,y){var I=d||y;return t[p]=!I||I.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var hi=null;function Tr(e){if(hi==null){var t=e.navigator?e.navigator.userAgent:null;hi=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return hi}function gn(e){try{var t=j[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Fe,sr,jn,sa,Ti=j.performance&&j.performance.now?j.performance.now.bind(j.performance):Date.now.bind(Date),_n=j.requestAnimationFrame||j.mozRequestAnimationFrame||j.webkitRequestAnimationFrame||j.msRequestAnimationFrame,ri=j.cancelAnimationFrame||j.mozCancelAnimationFrame||j.webkitCancelAnimationFrame||j.msCancelAnimationFrame,Ia={now:Ti,frame:function(e){var t=_n(e);return{cancel:function(){return ri(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=j.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Fe||(Fe=j.document.createElement("a")),Fe.href=e,Fe.href},hardwareConcurrency:j.navigator&&j.navigator.hardwareConcurrency||4,get devicePixelRatio(){return j.devicePixelRatio},get prefersReducedMotion(){return!!j.matchMedia&&(sr==null&&(sr=j.matchMedia("(prefers-reduced-motion: reduce)")),sr.matches)}},br={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},qn={supported:!1,testSupport:function(e){!Ja&&sa&&(Vr?Lt(e):jn=e)}},Ja=!1,Vr=!1;function Lt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,sa),e.isContextLost())return;qn.supported=!0}catch{}e.deleteTexture(t),Ja=!0}j.document&&((sa=j.document.createElement("img")).onload=function(){jn&&Lt(jn),jn=null,Vr=!0},sa.onerror=function(){Ja=!0,jn=null},sa.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Bi="01",Oi=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function ur(e){return e.indexOf("mapbox:")===0}Oi.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Bi,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Oi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Oi.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Oi.prototype.normalizeStyleURL=function(e,t){if(!ur(e))return e;var i=Fr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Oi.prototype.normalizeGlyphsURL=function(e,t){if(!ur(e))return e;var i=Fr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Oi.prototype.normalizeSourceURL=function(e,t){if(!ur(e))return e;var i=Fr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Oi.prototype.normalizeSpriteURL=function(e,t,i,l){var p=Fr(e);return ur(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,pi(p))},Oi.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ur(e))return e;var i=Fr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ia.devicePixelRatio>=2||t===512?"@2x":"")+(qn.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,y=p;d<y.length;d+=1){var I=y[d].match(/^access_token=(.*)$/);if(I)return I[1]}return null}(i.params)||br.ACCESS_TOKEN;return br.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Oi.prototype.canonicalizeTileURL=function(e,t){var i=Fr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Oi.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&ur(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var y=d[p];gi(y)?l.push(this.canonicalizeTileURL(y,i)):l.push(y)}return l},Oi.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=Fr(br.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!br.REQUIRE_ACCESS_TOKEN)return pi(e);if(!(t=t||br.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),pi(e)};var Jn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function gi(e){return Jn.test(e)}var ii=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fr(e){var t=e.match(ii);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function pi(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Ai(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(j.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var ni=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ni.prototype.getStorageKey=function(e){var t,i=Ai(br.ACCESS_TOKEN);return t=i&&i.u?j.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(+("0x"+p))})):br.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},ni.prototype.fetchEventData=function(){var e=gn("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=j.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=j.localStorage.getItem(i);p&&(this.anonId=p)}catch{Ot("Unable to read from LocalStorage")}},ni.prototype.saveEventData=function(){var e=gn("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{j.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&j.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ot("Unable to write to LocalStorage")}},ni.prototype.processRequests=function(e){},ni.prototype.postEvent=function(e,t,i,l){var p=this;if(br.EVENTS_URL){var d=Fr(br.EVENTS_URL);d.params.push("access_token="+(l||br.ACCESS_TOKEN||""));var y={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Bi,userId:this.anonId},I=t?je(y,t):y,C={url:pi(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([I])};this.pendingRequest=Nr(C,function(D){p.pendingRequest=null,i(D),p.saveEventData(),p.processRequests(l)})}},ni.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var fi,hr,ar=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p;var y=!(!d&&!br.ACCESS_TOKEN),I=Array.isArray(i)&&i.some(function(C){return ur(C)||gi(C)});br.EVENTS_URL&&y&&I&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,y=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),et(this.anonId)||(this.anonId=mt()),this.postEvent(y,{skuToken:this.skuToken},function(I){I||d&&(l.success[d]=!0)},i))}},t}(ni),bn=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){br.EVENTS_URL&&br.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return ur(p)||gi(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=Ai(br.ACCESS_TOKEN),d=p?p.u:br.ACCESS_TOKEN,y=d!==this.eventData.tokenU;et(this.anonId)||(this.anonId=mt(),y=!0);var I=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),D=new Date(I),V=(I-this.eventData.lastSuccess)/864e5;y=y||V>=1||V<-1||C.getDate()!==D.getDate()}else y=!0;if(!y)return this.processRequests();this.postEvent(I,{"enabled.telemetry":!1},function(F){F||(l.eventData.lastSuccess=I,l.eventData.tokenU=d)},i)}},t}(ni)),Zn=bn.postTurnstileEvent.bind(bn),po=new ar,fo=po.postMapLoadEvent.bind(po),Ra=500,es=50;function di(){j.caches&&!fi&&(fi=j.caches.open("mapbox-tiles"))}function an(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var on,mo=1/0;function la(){return on==null&&(on=j.OffscreenCanvas&&new j.OffscreenCanvas(1,1).getContext("2d")&&typeof j.createImageBitmap=="function"),on}var fl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(fl);var ts=function(e){function t(i,l,p){l===401&&gi(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Gn=cr()?function(){return self.worker&&self.worker.referrer}:function(){return(j.location.protocol==="blob:"?j.parent:j).location.href},xn,ua,Qn=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Gn())&&!/^\w+:/.test(i))){if(j.fetch&&j.Request&&j.AbortController&&j.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,y=new j.AbortController,I=new j.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Gn(),signal:y.signal}),C=!1,D=!1,V=(d=I.url).indexOf("sku=")>0&&gi(d);l.type==="json"&&I.headers.set("Accept","application/json");var F=function(W,oe,ue){if(!D){if(W&&W.message!=="SecurityError"&&Ot(W),oe&&ue)return K(oe);var ve=Date.now();j.fetch(I).then(function(pe){if(pe.ok){var we=V?pe.clone():null;return K(pe,we,ve)}return p(new ts(pe.statusText,pe.status,l.url))}).catch(function(pe){pe.code!==20&&p(new Error(pe.message))})}},K=function(W,oe,ue){(l.type==="arrayBuffer"?W.arrayBuffer():l.type==="json"?W.json():W.text()).then(function(ve){D||(oe&&ue&&function(pe,we,Te){if(di(),fi){var De={status:we.status,statusText:we.statusText,headers:new j.Headers};we.headers.forEach(function(Ne,He){return De.headers.set(He,Ne)});var Le=Jr(we.headers.get("Cache-Control")||"");Le["no-store"]||(Le["max-age"]&&De.headers.set("Expires",new Date(Te+1e3*Le["max-age"]).toUTCString()),new Date(De.headers.get("Expires")).getTime()-Te<42e4||function(Ne,He){if(hr===void 0)try{new Response(new ReadableStream),hr=!0}catch{hr=!1}hr?He(Ne.body):Ne.blob().then(He)}(we,function(Ne){var He=new j.Response(Ne,De);di(),fi&&fi.then(function(Qe){return Qe.put(an(pe.url),He)}).catch(function(Qe){return Ot(Qe.message)})}))}}(I,oe,ue),C=!0,p(null,ve,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(function(ve){D||p(new Error(ve.message))})};return V?function(W,oe){if(di(),!fi)return oe(null);var ue=an(W.url);fi.then(function(ve){ve.match(ue).then(function(pe){var we=function(Te){if(!Te)return!1;var De=new Date(Te.headers.get("Expires")||0),Le=Jr(Te.headers.get("Cache-Control")||"");return De>Date.now()&&!Le["no-cache"]}(pe);ve.delete(ue),we&&ve.put(ue,pe.clone()),oe(null,pe,we)}).catch(oe)}).catch(oe)}(I,F):F(null,null),{cancel:function(){D=!0,C||y.abort()}}}(e,t);if(cr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new j.XMLHttpRequest;for(var y in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(y,l.headers[y]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var I=d.response;if(l.type==="json")try{I=JSON.parse(d.response)}catch(C){return p(C)}p(null,I,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new ts(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},ca=function(e,t){return Qn(je(e,{type:"arrayBuffer"}),t)},Nr=function(e,t){return Qn(je(e,{method:"POST"}),t)},U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";xn=[],ua=0;var G=function(e,t){if(qn.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ua>=br.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return xn.push(i),i}ua++;var l=!1,p=function(){if(!l)for(l=!0,ua--;xn.length&&ua<br.MAX_PARALLEL_IMAGE_REQUESTS;){var y=xn.shift();y.cancelled||(y.cancel=G(y.requestParameters,y.callback).cancel)}},d=ca(e,function(y,I,C,D){p(),y?t(y):I&&(la()?function(V,F){var K=new j.Blob([new Uint8Array(V)],{type:"image/png"});j.createImageBitmap(K).then(function(W){F(null,W)}).catch(function(W){F(new Error("Could not load image because of "+W.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(I,t):function(V,F,K,W){var oe=new j.Image,ue=j.URL;oe.onload=function(){F(null,oe),ue.revokeObjectURL(oe.src),oe.onload=null,j.requestAnimationFrame(function(){oe.src=U})},oe.onerror=function(){return F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ve=new j.Blob([new Uint8Array(V)],{type:"image/png"});oe.cacheControl=K,oe.expires=W,oe.src=V.byteLength?ue.createObjectURL(ve):U}(I,t,C,D))});return{cancel:function(){d.cancel(),p()}}};function X(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function re(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var le=function(e,t){t===void 0&&(t={}),je(this,t),this.type=e},ye=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",je({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(le),_e=function(){};_e.prototype.on=function(e,t){return this._listeners=this._listeners||{},X(e,t,this._listeners),this},_e.prototype.off=function(e,t){return re(e,t,this._listeners),re(e,t,this._oneTimeListeners),this},_e.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},X(e,t,this._oneTimeListeners),this},_e.prototype.fire=function(e,t){typeof e=="string"&&(e=new le(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,y=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<y.length;d+=1){var I=y[d];re(i,I,this._oneTimeListeners),I.call(this,e)}var C=this._eventedParent;C&&(je(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(e))}else e instanceof ye&&console.error(e.error);return this},_e.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},_e.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var H={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ae=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function Se(e){var t=e.value;return t?[new ae(e.key,t,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var y in d)e[y]=d[y]}return e}function Ke(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Me(e){if(Array.isArray(e))return e.map(Me);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Me(e[i]);return t}return Ke(e)}var qe=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),ct=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};ct.prototype.concat=function(e){return new ct(this,e)},ct.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},ct.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var st={kind:"null"},Re={kind:"number"},nt={kind:"string"},Ye={kind:"boolean"},tt={kind:"color"},Ft={kind:"object"},Ge={kind:"value"},Zt={kind:"collator"},lr={kind:"formatted"},Ct={kind:"resolvedImage"};function Qt(e,t){return{kind:"array",itemType:e,N:t}}function Jt(e){if(e.kind==="array"){var t=Jt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var zi=[st,Re,nt,Ye,tt,lr,Ft,Qt(Ge),Ct];function $t(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!$t(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=zi;i<l.length;i+=1)if(!$t(l[i],t))return null}}return"Expected "+Jt(e)+" but found "+Jt(t)+" instead."}function mr(e,t){return t.some(function(i){return i.kind===e.kind})}function dr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Kt=z(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(I){return(I=Math.round(I))<0?0:I>255?255:I}function p(I){return l(I[I.length-1]==="%"?parseFloat(I)/100*255:parseInt(I))}function d(I){return(C=I[I.length-1]==="%"?parseFloat(I)/100:parseFloat(I))<0?0:C>1?1:C;var C}function y(I,C,D){return D<0?D+=1:D>1&&(D-=1),6*D<1?I+(C-I)*D*6:2*D<1?C:3*D<2?I+(C-I)*(2/3-D)*6:I}try{t.parseCSSColor=function(I){var C,D=I.replace(/ /g,"").toLowerCase();if(D in i)return i[D].slice();if(D[0]==="#")return D.length===4?(C=parseInt(D.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:D.length===7&&(C=parseInt(D.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var V=D.indexOf("("),F=D.indexOf(")");if(V!==-1&&F+1===D.length){var K=D.substr(0,V),W=D.substr(V+1,F-(V+1)).split(","),oe=1;switch(K){case"rgba":if(W.length!==4)return null;oe=d(W.pop());case"rgb":return W.length!==3?null:[p(W[0]),p(W[1]),p(W[2]),oe];case"hsla":if(W.length!==4)return null;oe=d(W.pop());case"hsl":if(W.length!==3)return null;var ue=(parseFloat(W[0])%360+360)%360/360,ve=d(W[1]),pe=d(W[2]),we=pe<=.5?pe*(ve+1):pe+ve-pe*ve,Te=2*pe-we;return[l(255*y(Te,we,ue+1/3)),l(255*y(Te,we,ue)),l(255*y(Te,we,ue-1/3)),oe];default:return null}}return null}}catch{}}).parseCSSColor,tr=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};tr.parse=function(e){if(e){if(e instanceof tr)return e;if(typeof e=="string"){var t=Kt(e);if(t)return new tr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},tr.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},tr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},tr.black=new tr(0,0,0,1),tr.white=new tr(1,1,1,1),tr.transparent=new tr(0,0,0,0),tr.red=new tr(1,0,0,1);var Vi=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Vi.prototype.compare=function(e,t){return this.collator.compare(e,t)},Vi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ha=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},_i=function(e){this.sections=e};_i.fromString=function(e){return new _i([new ha(e,null,null,null,null)])},_i.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},_i.factory=function(e){return e instanceof _i?e:_i.fromString(e)},_i.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},_i.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var Hi=function(e){this.name=e.name,this.available=e.available};function wn(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Xi(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof tr||e instanceof Vi||e instanceof _i||e instanceof Hi)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!Xi(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!Xi(e[l]))return!1;return!0}return!1}function vr(e){if(e===null)return st;if(typeof e=="string")return nt;if(typeof e=="boolean")return Ye;if(typeof e=="number")return Re;if(e instanceof tr)return tt;if(e instanceof Vi)return Zt;if(e instanceof _i)return lr;if(e instanceof Hi)return Ct;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=vr(p[l]);if(t){if(t===d)continue;t=Ge;break}t=d}return Qt(t||Ge,i)}return Ft}function Dn(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof tr||e instanceof _i||e instanceof Hi?e.toString():JSON.stringify(e)}Hi.prototype.toString=function(){return this.name},Hi.fromString=function(e){return e?new Hi({name:e,available:!1}):null},Hi.prototype.serialize=function(){return["image",this.name]};var Fi=function(e,t){this.type=e,this.value=t};Fi.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Xi(e[1]))return t.error("invalid value");var i=e[1],l=vr(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new Fi(l,i)},Fi.prototype.evaluate=function(){return this.value},Fi.prototype.eachChild=function(){},Fi.prototype.outputDefined=function(){return!0},Fi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof tr?["rgba"].concat(this.value.toArray()):this.value instanceof _i?this.value.serialize():this.value};var Gr=function(e){this.name="ExpressionEvaluationError",this.message=e};Gr.prototype.toJSON=function(){return this.message};var $n={string:nt,number:Re,boolean:Ye,object:Ft},Cr=function(e,t){this.type=e,this.args=t};Cr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,y;if(e.length>2){var I=e[1];if(typeof I!="string"||!(I in $n)||I==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=$n[I],l++}else d=Ge;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);y=e[2],l++}i=Qt(d,y)}else i=$n[p];for(var C=[];l<e.length;l++){var D=t.parse(e[l],l,Ge);if(!D)return null;C.push(D)}return new Cr(i,C)},Cr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!$t(this.type,vr(i)))return i;if(t===this.args.length-1)throw new Gr("Expected value to be of type "+Jt(this.type)+", but found "+Jt(vr(i))+" instead.")}return null},Cr.prototype.eachChild=function(e){this.args.forEach(e)},Cr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Cr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var En=function(e){this.type=lr,this.sections=e};En.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var y=e[d];if(p&&typeof y=="object"&&!Array.isArray(y)){p=!1;var I=null;if(y["font-scale"]&&!(I=t.parse(y["font-scale"],1,Re)))return null;var C=null;if(y["text-font"]&&!(C=t.parse(y["text-font"],1,Qt(nt))))return null;var D=null;if(y["text-color"]&&!(D=t.parse(y["text-color"],1,tt)))return null;var V=l[l.length-1];V.scale=I,V.font=C,V.textColor=D}else{var F=t.parse(e[d],1,Ge);if(!F)return null;var K=F.type.kind;if(K!=="string"&&K!=="value"&&K!=="null"&&K!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:F,scale:null,font:null,textColor:null})}}return new En(l)},En.prototype.evaluate=function(e){return new _i(this.sections.map(function(t){var i=t.content.evaluate(e);return vr(i)===Ct?new ha("",i,null,null,null):new ha(Dn(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},En.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},En.prototype.outputDefined=function(){return!1},En.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var sn=function(e){this.type=Ct,this.input=e};sn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,nt);return i?new sn(i):t.error("No image name provided.")},sn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=Hi.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},sn.prototype.eachChild=function(e){e(this.input)},sn.prototype.outputDefined=function(){return!1},sn.prototype.serialize=function(){return["image",this.input.serialize()]};var rc={"to-boolean":Ye,"to-color":tt,"to-number":Re,"to-string":nt},Ni=function(e,t){this.type=e,this.args=t};Ni.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=rc[i],p=[],d=1;d<e.length;d++){var y=t.parse(e[d],d,Ge);if(!y)return null;p.push(y)}return new Ni(l,p)},Ni.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof tr)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":wn(t[0],t[1],t[2],t[3])))return new tr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Gr(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var y=null,I=0,C=this.args;I<C.length;I+=1){if((y=C[I].evaluate(e))===null)return 0;var D=Number(y);if(!isNaN(D))return D}throw new Gr("Could not convert "+JSON.stringify(y)+" to number.")}return this.type.kind==="formatted"?_i.fromString(Dn(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Hi.fromString(Dn(this.args[0].evaluate(e))):Dn(this.args[0].evaluate(e))},Ni.prototype.eachChild=function(e){this.args.forEach(e)},Ni.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ni.prototype.serialize=function(){if(this.type.kind==="formatted")return new En([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new sn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var vo=["Unknown","Point","LineString","Polygon"],ln=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ln.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ln.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?vo[this.feature.type]:this.feature.type:null},ln.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ln.prototype.canonicalID=function(){return this.canonical},ln.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ln.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=tr.parse(e)),t};var Kr=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};Kr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Kr.prototype.eachChild=function(e){this.args.forEach(e)},Kr.prototype.outputDefined=function(){return!1},Kr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Kr.parse=function(e,t){var i,l=e[0],p=Kr.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,I=y.filter(function(vt){var rt=vt[0];return!Array.isArray(rt)||rt.length===e.length-1}),C=null,D=0,V=I;D<V.length;D+=1){var F=V[D],K=F[0],W=F[1];C=new Hr(t.registry,t.path,null,t.scope);for(var oe=[],ue=!1,ve=1;ve<e.length;ve++){var pe=e[ve],we=Array.isArray(K)?K[ve-1]:K.type,Te=C.parse(pe,1+oe.length,we);if(!Te){ue=!0;break}oe.push(Te)}if(!ue)if(Array.isArray(K)&&K.length!==oe.length)C.error("Expected "+K.length+" arguments, but found "+oe.length+" instead.");else{for(var De=0;De<oe.length;De++){var Le=Array.isArray(K)?K[De]:K.type,Ne=oe[De];C.concat(De+1).checkSubtype(Le,Ne.type)}if(C.errors.length===0)return new Kr(l,d,W,oe)}}if(I.length===1)(i=t.errors).push.apply(i,C.errors);else{for(var He=(I.length?I:y).map(function(vt){var rt;return rt=vt[0],Array.isArray(rt)?"("+rt.map(Jt).join(", ")+")":"("+Jt(rt.type)+"...)"}).join(" | "),Qe=[],gt=1;gt<e.length;gt++){var $e=t.parse(e[gt],1+Qe.length);if(!$e)return null;Qe.push(Jt($e.type))}t.error("Expected arguments of type "+He+", but found ("+Qe.join(", ")+") instead.")}return null},Kr.register=function(e,t){for(var i in Kr.definitions=t,t)e[i]=Kr};var Pi=function(e,t,i){this.type=Zt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function ai(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function yo(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function rs(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function bd(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function dl(e,t){for(var i,l,p,d,y,I,C,D=!1,V=0,F=t.length;V<F;V++)for(var K=t[V],W=0,oe=K.length;W<oe-1;W++){if((d=(i=e)[0]-(l=K[W])[0])*(C=i[1]-(p=K[W+1])[1])-(I=i[0]-p[0])*(y=i[1]-l[1])==0&&d*I<=0&&y*C<=0)return!1;bd(e,K[W],K[W+1])&&(D=!D)}return D}function ml(e,t){for(var i=0;i<t.length;i++)if(dl(e,t[i]))return!0;return!1}function is(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],y=(e[0]-i[0])*d-p*(e[1]-i[1]),I=(t[0]-i[0])*d-p*(t[1]-i[1]);return y>0&&I<0||y<0&&I>0}function gp(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],y=0;y<d.length-1;++y)if((F=[(V=d[y+1])[0]-(D=d[y])[0],V[1]-D[1]])[0]*(K=[(C=t)[0]-(I=e)[0],C[1]-I[1]])[1]-F[1]*K[0]!=0&&is(I,C,D,V)&&is(D,V,I,C))return!0;var I,C,D,V,F,K;return!1}function ru(e,t){for(var i=0;i<e.length;++i)if(!dl(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(gp(e[l],e[l+1],t))return!1;return!0}function ns(e,t){for(var i=0;i<t.length;i++)if(ru(e,t[i]))return!0;return!1}function go(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],y=0;y<e[p].length;y++){var I=rs(e[p][y],i);ai(t,I),d.push(I)}l.push(d)}return l}function iu(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=go(e[p],t,i);l.push(d)}return l}function vl(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}ai(t,e)}function eh(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],y=[],I=0,C=e;I<C.length;I+=1)for(var D=0,V=C[I];D<V.length;D+=1){var F=V[D],K=[F.x+d[0],F.y+d[1]];vl(K,t,i,p),y.push(K)}return y}function Sn(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),y=[8192*l.x,8192*l.y],I=[],C=0,D=e;C<D.length;C+=1){for(var V=[],F=0,K=D[C];F<K.length;F+=1){var W=K[F],oe=[W.x+y[0],W.y+y[1]];ai(t,oe),V.push(oe)}I.push(V)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var ue=0,ve=I;ue<ve.length;ue+=1)for(var pe=0,we=ve[ue];pe<we.length;pe+=1)vl(we[pe],t,i,d)}return I}Pi.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Ye);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Ye);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,nt))?null:new Pi(l,p,d)},Pi.prototype.evaluate=function(e){return new Vi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Pi.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Pi.prototype.outputDefined=function(){return!1},Pi.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Si=function(e,t){this.type=Ye,this.geojson=e,this.geometries=t};function Mn(e){if(e instanceof Kr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Si)return!1;var t=!0;return e.eachChild(function(i){t&&!Mn(i)&&(t=!1)}),t}function ke(e){if(e instanceof Kr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!ke(i)&&(t=!1)}),t}function Ui(e,t){if(e instanceof Kr&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!Ui(l,t)&&(i=!1)}),i}Si.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Xi(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Si(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Si(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Si(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Si.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var y=go(i.coordinates,p,d),I=eh(t.geometry(),l,p,d);if(!yo(l,p))return!1;for(var C=0,D=I;C<D.length;C+=1)if(!dl(D[C],y))return!1}if(i.type==="MultiPolygon"){var V=iu(i.coordinates,p,d),F=eh(t.geometry(),l,p,d);if(!yo(l,p))return!1;for(var K=0,W=F;K<W.length;K+=1)if(!ml(W[K],V))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var y=go(i.coordinates,p,d),I=Sn(t.geometry(),l,p,d);if(!yo(l,p))return!1;for(var C=0,D=I;C<D.length;C+=1)if(!ru(D[C],y))return!1}if(i.type==="MultiPolygon"){var V=iu(i.coordinates,p,d),F=Sn(t.geometry(),l,p,d);if(!yo(l,p))return!1;for(var K=0,W=F;K<W.length;K+=1)if(!ns(W[K],V))return!1}return!0}(e,this.geometries)}return!1},Si.prototype.eachChild=function(){},Si.prototype.outputDefined=function(){return!0},Si.prototype.serialize=function(){return["within",this.geojson]};var Ln=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Ln.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Ln(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Ln.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Ln.prototype.eachChild=function(){},Ln.prototype.outputDefined=function(){return!1},Ln.prototype.serialize=function(){return["var",this.name]};var Hr=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new ct),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function pa(e,t){for(var i,l=e.length-1,p=0,d=l,y=0;p<=d;)if((i=e[y=Math.floor((p+d)/2)])<=t){if(y===l||t<e[y+1])return y;p=y+1}else{if(!(i>t))throw new Gr("Input is not a number.");d=y-1}return 0}Hr.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},Hr.prototype._parse=function(e,t){function i(D,V,F){return F==="assert"?new Cr(V,[D]):F==="coerce"?new Ni(V,[D]):D}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var y=this.expectedType,I=d.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||I.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(y,I))return null}else d=i(d,y,t.typeAnnotation||"coerce");else d=i(d,y,t.typeAnnotation||"assert")}if(!(d instanceof Fi)&&d.type.kind!=="resolvedImage"&&function D(V){if(V instanceof Ln)return D(V.boundExpression);if(V instanceof Kr&&V.name==="error"||V instanceof Pi||V instanceof Si)return!1;var F=V instanceof Ni||V instanceof Cr,K=!0;return V.eachChild(function(W){K=F?K&&D(W):K&&W instanceof Fi}),!!K&&Mn(V)&&Ui(V,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var C=new ln;try{d=new Fi(d.type,d.evaluate(C))}catch(D){return this.error(D.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Hr.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Hr(this.registry,l,t||null,p,this.errors)},Hr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new qe(l,e))},Hr.prototype.checkSubtype=function(e,t){var i=$t(e,t);return i&&this.error(i),i};var Rn=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],y=d[1];this.labels.push(d[0]),this.outputs.push(y)}};function Ci(e,t,i){return e*(1-i)+t*i}Rn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Re);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var y=d===1?-1/0:e[d],I=e[d+1],C=d,D=d+1;if(typeof y!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(l.length&&l[l.length-1][0]>=y)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var V=t.parse(I,D,p);if(!V)return null;p=p||V.type,l.push([y,V])}return new Rn(p,i,l)},Rn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[pa(t,l)].evaluate(e)},Rn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Rn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Rn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var nu=Object.freeze({__proto__:null,number:Ci,color:function(e,t,i){return new tr(Ci(e.r,t.r,i),Ci(e.g,t.g,i),Ci(e.b,t.b,i),Ci(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return Ci(l,t[p],i)})}}),au=6/29*3*(6/29),_p=Math.PI/180,ff=180/Math.PI;function bp(e){return e>.008856451679035631?Math.pow(e,1/3):e/au+4/29}function df(e){return e>6/29?e*e*e:au*(e-4/29)}function xp(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ou(e){var t=Bs(e.r),i=Bs(e.g),l=Bs(e.b),p=bp((.4124564*t+.3575761*i+.1804375*l)/.95047),d=bp((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-bp((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function _o(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*df(t),i=.95047*df(i),l=1.08883*df(l),new tr(xp(3.2404542*i-1.5371385*t-.4985314*l),xp(-.969266*i+1.8760108*t+.041556*l),xp(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function th(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var ic={forward:ou,reverse:_o,interpolate:function(e,t,i){return{l:Ci(e.l,t.l,i),a:Ci(e.a,t.a,i),b:Ci(e.b,t.b,i),alpha:Ci(e.alpha,t.alpha,i)}}},nc={forward:function(e){var t=ou(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*ff;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*_p,i=e.c;return _o({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:th(e.h,t.h,i),c:Ci(e.c,t.c,i),l:Ci(e.l,t.l,i),alpha:Ci(e.alpha,t.alpha,i)}}},yl=Object.freeze({__proto__:null,lab:ic,hcl:nc}),oi=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,y=p;d<y.length;d+=1){var I=y[d],C=I[1];this.labels.push(I[0]),this.outputs.push(C)}};function wp(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}oi.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=wp(t,e.base,i,l);else if(e.name==="linear")p=wp(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new A(d[0],d[1],d[2],d[3]).solve(wp(t,1,i,l))}return p},oi.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var y=l[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:y}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var I=l.slice(1);if(I.length!==4||I.some(function(ve){return typeof ve!="number"||ve<0||ve>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:I}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Re)))return null;var C=[],D=null;i==="interpolate-hcl"||i==="interpolate-lab"?D=tt:t.expectedType&&t.expectedType.kind!=="value"&&(D=t.expectedType);for(var V=0;V<d.length;V+=2){var F=d[V],K=d[V+1],W=V+3,oe=V+4;if(typeof F!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(C.length&&C[C.length-1][0]>=F)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);var ue=t.parse(K,oe,D);if(!ue)return null;D=D||ue.type,C.push([F,ue])}return D.kind==="number"||D.kind==="color"||D.kind==="array"&&D.itemType.kind==="number"&&typeof D.N=="number"?new oi(D,i,l,p,C):t.error("Type "+Jt(D)+" is not interpolatable.")},oi.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=pa(t,l),y=oi.interpolationFactor(this.interpolation,l,t[d],t[d+1]),I=i[d].evaluate(e),C=i[d+1].evaluate(e);return this.operator==="interpolate"?nu[this.type.kind.toLowerCase()](I,C,y):this.operator==="interpolate-hcl"?nc.reverse(nc.interpolate(nc.forward(I),nc.forward(C),y)):ic.reverse(ic.interpolate(ic.forward(I),ic.forward(C),y))},oi.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},oi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},oi.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var bo=function(e,t){this.type=e,this.args=t};bo.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,y=e.slice(1);d<y.length;d+=1){var I=t.parse(y[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!I)return null;i=i||I.type,p.push(I)}var C=l&&p.some(function(D){return $t(l,D.type)});return new bo(C?Ge:i,p)},bo.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof Hi&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},bo.prototype.eachChild=function(e){this.args.forEach(e)},bo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},bo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var as=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};as.prototype.evaluate=function(e){return this.result.evaluate(e)},as.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},as.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var y=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return y?new as(i,y):null},as.prototype.outputDefined=function(){return this.result.outputDefined()},as.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var gl=function(e,t,i){this.type=e,this.index=t,this.input=i};gl.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Re),l=t.parse(e[2],2,Qt(t.expectedType||Ge));return i&&l?new gl(l.type.itemType,i,l):null},gl.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Gr("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new Gr("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new Gr("Array index must be an integer, but found "+t+" instead.");return i[t]},gl.prototype.eachChild=function(e){e(this.index),e(this.input)},gl.prototype.outputDefined=function(){return!1},gl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xo=function(e,t){this.type=Ye,this.needle=e,this.haystack=t};xo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ge),l=t.parse(e[2],2,Ge);return i&&l?mr(i.type,[Ye,nt,Re,st,Ge])?new xo(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(i.type)+" instead"):null},xo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!dr(t,["boolean","string","number","null"]))throw new Gr("Expected first argument to be of type boolean, string, number or null, but found "+Jt(vr(t))+" instead.");if(!dr(i,["string","array"]))throw new Gr("Expected second argument to be of type array or string, but found "+Jt(vr(i))+" instead.");return i.indexOf(t)>=0},xo.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},xo.prototype.outputDefined=function(){return!0},xo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Os=function(e,t,i){this.type=Re,this.needle=e,this.haystack=t,this.fromIndex=i};Os.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ge),l=t.parse(e[2],2,Ge);if(!i||!l)return null;if(!mr(i.type,[Ye,nt,Re,st,Ge]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Re);return p?new Os(i,l,p):null}return new Os(i,l)},Os.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!dr(t,["boolean","string","number","null"]))throw new Gr("Expected first argument to be of type boolean, string, number or null, but found "+Jt(vr(t))+" instead.");if(!dr(i,["string","array"]))throw new Gr("Expected second argument to be of type array or string, but found "+Jt(vr(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},Os.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Os.prototype.outputDefined=function(){return!1},Os.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var _l=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};_l.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],y=2;y<e.length-1;y+=2){var I=e[y],C=e[y+1];Array.isArray(I)||(I=[I]);var D=t.concat(y);if(I.length===0)return D.error("Expected at least one branch label.");for(var V=0,F=I;V<F.length;V+=1){var K=F[V];if(typeof K!="number"&&typeof K!="string")return D.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return D.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof K=="number"&&Math.floor(K)!==K)return D.error("Numeric branch labels must be integer values.");if(i){if(D.checkSubtype(i,vr(K)))return null}else i=vr(K);if(p[String(K)]!==void 0)return D.error("Branch labels must be unique.");p[String(K)]=d.length}var W=t.parse(C,y,l);if(!W)return null;l=l||W.type,d.push(W)}var oe=t.parse(e[1],1,Ge);if(!oe)return null;var ue=t.parse(e[e.length-1],e.length-1,l);return ue?oe.type.kind!=="value"&&t.concat(1).checkSubtype(i,oe.type)?null:new _l(i,l,oe,p,d,ue):null},_l.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(vr(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},_l.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},_l.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},_l.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var y=d[p];(F=l[this.cases[y]])===void 0?(l[this.cases[y]]=i.length,i.push([this.cases[y],[y]])):i[F][1].push(y)}for(var I=function(W){return e.inputType.kind==="number"?Number(W):W},C=0,D=i;C<D.length;C+=1){var V=D[C],F=V[0],K=V[1];t.push(K.length===1?I(K[0]):K.map(I)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Bn=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};Bn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,Ye);if(!d)return null;var y=t.parse(e[p+1],p+1,i);if(!y)return null;l.push([d,y]),i=i||y.type}var I=t.parse(e[e.length-1],e.length-1,i);return I?new Bn(i,l,I):null},Bn.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},Bn.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},Bn.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Bn.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Wi=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function Qa(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function os(e,t,i,l){return l.compare(t,i)===0}function Lr(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,y,I){this.type=Ye,this.lhs=d,this.rhs=y,this.collator=I,this.hasUntypedArgument=d.type.kind==="value"||y.type.kind==="value"}return p.parse=function(d,y){if(d.length!==3&&d.length!==4)return y.error("Expected two or three arguments.");var I=d[0],C=y.parse(d[1],1,Ge);if(!C)return null;if(!Qa(I,C.type))return y.concat(1).error('"'+I+`" comparisons are not supported for type '`+Jt(C.type)+"'.");var D=y.parse(d[2],2,Ge);if(!D)return null;if(!Qa(I,D.type))return y.concat(2).error('"'+I+`" comparisons are not supported for type '`+Jt(D.type)+"'.");if(C.type.kind!==D.type.kind&&C.type.kind!=="value"&&D.type.kind!=="value")return y.error("Cannot compare types '"+Jt(C.type)+"' and '"+Jt(D.type)+"'.");l&&(C.type.kind==="value"&&D.type.kind!=="value"?C=new Cr(D.type,[C]):C.type.kind!=="value"&&D.type.kind==="value"&&(D=new Cr(C.type,[D])));var V=null;if(d.length===4){if(C.type.kind!=="string"&&D.type.kind!=="string"&&C.type.kind!=="value"&&D.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(!(V=y.parse(d[3],3,Zt)))return null}return new p(C,D,V)},p.prototype.evaluate=function(d){var y=this.lhs.evaluate(d),I=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var C=vr(y),D=vr(I);if(C.kind!==D.kind||C.kind!=="string"&&C.kind!=="number")throw new Gr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+C.kind+", "+D.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var V=vr(y),F=vr(I);if(V.kind!=="string"||F.kind!=="string")return t(d,y,I)}return this.collator?i(d,y,I,this.collator.evaluate(d)):t(d,y,I)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(y){d.push(y.serialize())}),d},p}()}Wi.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ge),l=t.parse(e[2],2,Re);if(!i||!l)return null;if(!mr(i.type,[Qt(Ge),nt,Ge]))return t.error("Expected first argument to be of type array or string, but found "+Jt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Re);return p?new Wi(i.type,i,l,p):null}return new Wi(i.type,i,l)},Wi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!dr(t,["string","array"]))throw new Gr("Expected first argument to be of type array or string, but found "+Jt(vr(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},Wi.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Wi.prototype.outputDefined=function(){return!1},Wi.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ac=Lr("==",function(e,t,i){return t===i},os),mf=Lr("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!os(0,t,i,l)}),vf=Lr("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),su=Lr(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),lu=Lr("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),yf=Lr(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),$a=function(e,t,i,l,p){this.type=nt,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};$a.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Re);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,nt)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,nt)))return null;var y=null;if(l["min-fraction-digits"]&&!(y=t.parse(l["min-fraction-digits"],1,Re)))return null;var I=null;return l["max-fraction-digits"]&&!(I=t.parse(l["max-fraction-digits"],1,Re))?null:new $a(i,p,d,y,I)},$a.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},$a.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},$a.prototype.outputDefined=function(){return!1},$a.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var wo=function(e){this.type=Re,this.input=e};wo.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Jt(i.type)+" instead."):new wo(i):null},wo.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Gr("Expected value to be of type string or array, but found "+Jt(vr(t))+" instead.")},wo.prototype.eachChild=function(e){e(this.input)},wo.prototype.outputDefined=function(){return!1},wo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var bl={"==":ac,"!=":mf,">":su,"<":vf,">=":yf,"<=":lu,array:Cr,at:gl,boolean:Cr,case:Bn,coalesce:bo,collator:Pi,format:En,image:sn,in:xo,"index-of":Os,interpolate:oi,"interpolate-hcl":oi,"interpolate-lab":oi,length:wo,let:as,literal:Fi,match:_l,number:Cr,"number-format":$a,object:Cr,slice:Wi,step:Rn,string:Cr,"to-boolean":Ni,"to-color":Ni,"to-number":Ni,"to-string":Ni,var:Ln,within:Si};function gf(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var y=d?d.evaluate(e):1,I=wn(i,l,p,y);if(I)throw new Gr(I);return new tr(i/255*y,l/255*y,p/255*y,y)}function xl(e,t){return e in t}function Vs(e,t){var i=t[e];return i===void 0?null:i}function wl(e){return{type:e}}function Ep(e){return{result:"success",value:e}}function ss(e){return{result:"error",value:e}}function Ba(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function _f(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Eo(e){return!!e.expression&&e.expression.interpolated}function kr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function rh(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function xd(e){return e}function eo(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function bf(e,t,i,l,p){return eo(typeof i===p?l[i]:void 0,e.default,t.default)}function Fs(e,t,i){if(kr(i)!=="number")return eo(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=pa(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function to(e,t,i){var l=e.base!==void 0?e.base:1;if(kr(i)!=="number")return eo(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=pa(e.stops.map(function(F){return F[0]}),i),y=function(F,K,W,oe){var ue=oe-W,ve=F-W;return ue===0?0:K===1?ve/ue:(Math.pow(K,ve)-1)/(Math.pow(K,ue)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),I=e.stops[d][1],C=e.stops[d+1][1],D=nu[t.type]||xd;if(e.colorSpace&&e.colorSpace!=="rgb"){var V=yl[e.colorSpace];D=function(F,K){return V.reverse(V.interpolate(V.forward(F),V.forward(K),y))}}return typeof I.evaluate=="function"?{evaluate:function(){for(var F=[],K=arguments.length;K--;)F[K]=arguments[K];var W=I.evaluate.apply(void 0,F),oe=C.evaluate.apply(void 0,F);if(W!==void 0&&oe!==void 0)return D(W,oe,y)}}:D(I,C,y)}function ro(e,t,i){return t.type==="color"?i=tr.parse(i):t.type==="formatted"?i=_i.fromString(i.toString()):t.type==="resolvedImage"?i=Hi.fromString(i.toString()):kr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),eo(i,e.default,t.default)}Kr.register(bl,{error:[{kind:"error"},[nt],function(e,t){throw new Gr(t[0].evaluate(e))}],typeof:[nt,[Ge],function(e,t){return Jt(vr(t[0].evaluate(e)))}],"to-rgba":[Qt(Re,4),[tt],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[tt,[Re,Re,Re],gf],rgba:[tt,[Re,Re,Re,Re],gf],has:{type:Ye,overloads:[[[nt],function(e,t){return xl(t[0].evaluate(e),e.properties())}],[[nt,Ft],function(e,t){var i=t[1];return xl(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:Ge,overloads:[[[nt],function(e,t){return Vs(t[0].evaluate(e),e.properties())}],[[nt,Ft],function(e,t){var i=t[1];return Vs(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[Ge,[nt],function(e,t){return Vs(t[0].evaluate(e),e.featureState||{})}],properties:[Ft,[],function(e){return e.properties()}],"geometry-type":[nt,[],function(e){return e.geometryType()}],id:[Ge,[],function(e){return e.id()}],zoom:[Re,[],function(e){return e.globals.zoom}],"heatmap-density":[Re,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Re,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ge,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Re,wl(Re),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Re,wl(Re),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Re,overloads:[[[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Re],function(e,t){return-t[0].evaluate(e)}]]},"/":[Re,[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Re,[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Re,[],function(){return Math.LN2}],pi:[Re,[],function(){return Math.PI}],e:[Re,[],function(){return Math.E}],"^":[Re,[Re,Re],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Re,[Re],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Re,[Re],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Re,[Re],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Re,[Re],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Re,[Re],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Re,[Re],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Re,[Re],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Re,wl(Re),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Re,wl(Re),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Re,[Re],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Re,[Re],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Re,[Re],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Re,[Re],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ye,[nt,Ge],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[Ye,[Ge],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Ye,[nt],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Ye,[nt,Ge],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[Ye,[Ge],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[Ye,[nt,Ge],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[Ye,[Ge],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[Ye,[nt,Ge],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[Ye,[Ge],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[Ye,[nt,Ge],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[Ye,[Ge],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[Ye,[Ge],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ye,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Ye,[Qt(nt)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ye,[Qt(Ge)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ye,[nt,Qt(Ge)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Ye,[nt,Qt(Ge)],function(e,t){var i=t[0],l=t[1];return function(p,d,y,I){for(;y<=I;){var C=y+I>>1;if(d[C]===p)return!0;d[C]>p?I=C-1:y=C+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:Ye,overloads:[[[Ye,Ye],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[wl(Ye),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:Ye,overloads:[[[Ye,Ye],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[wl(Ye),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[Ye,[Ye],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ye,[nt],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[nt,[nt],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[nt,[nt],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[nt,wl(Ge),function(e,t){return t.map(function(i){return Dn(i.evaluate(e))}).join("")}],"resolved-locale":[nt,[Zt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var uu=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new ln,this._defaultValue=t?function(i){return i.type==="color"&&rh(i.default)?new tr(0,0,0,0):i.type==="color"?tr.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function ls(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in bl}function xf(e,t){var i=new Hr(bl,[],t?function(p){var d={color:tt,string:nt,number:Re,enum:nt,boolean:Ye,formatted:lr,resolvedImage:Ct};return p.type==="array"?Qt(d[p.value]||Ge,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Ep(new uu(l,t)):ss(i.errors)}uu.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},uu.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new Gr("Expected value to be one of "+Object.keys(this._enumValues).map(function(I){return JSON.stringify(I)}).join(", ")+", but found "+JSON.stringify(y)+" instead.");return y}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}};var oc=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!ke(t.expression)};oc.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},oc.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var So=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!ke(t.expression),this.interpolationType=l};function cu(e,t){if((e=xf(e,t)).result==="error")return e;var i=e.value.expression,l=Mn(i);if(!l&&!Ba(t))return ss([new qe("","data expressions not supported")]);var p=Ui(i,["zoom"]);if(!p&&!_f(t))return ss([new qe("","zoom expressions not supported")]);var d=function y(I){var C=null;if(I instanceof as)C=y(I.result);else if(I instanceof bo)for(var D=0,V=I.args;D<V.length&&!(C=y(V[D]));D+=1);else(I instanceof Rn||I instanceof oi)&&I.input instanceof Kr&&I.input.name==="zoom"&&(C=I);return C instanceof qe||I.eachChild(function(F){var K=y(F);K instanceof qe?C=K:!C&&K?C=new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&K&&C!==K&&(C=new qe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(i);return d||p?d instanceof qe?ss([d]):d instanceof oi&&!Eo(t)?ss([new qe("",'"interpolate" expressions cannot be used with this property')]):Ep(d?new So(l?"camera":"composite",e.value,d.labels,d instanceof oi?d.interpolation:void 0):new oc(l?"constant":"source",e.value)):ss([new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}So.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},So.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},So.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?oi.interpolationFactor(this.interpolationType,e,t,i):0};var hu=function(e,t){this._parameters=e,this._specification=t,Ue(this,function i(l,p){var d,y,I,C=p.type==="color",D=l.stops&&typeof l.stops[0][0]=="object",V=D||!(D||l.property!==void 0),F=l.type||(Eo(p)?"exponential":"interval");if(C&&((l=Ue({},l)).stops&&(l.stops=l.stops.map(function($e){return[$e[0],tr.parse($e[1])]})),l.default=tr.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!yl[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(F==="exponential")d=to;else if(F==="interval")d=Fs;else if(F==="categorical"){d=bf,y=Object.create(null);for(var K=0,W=l.stops;K<W.length;K+=1){var oe=W[K];y[oe[0]]=oe[1]}I=typeof l.stops[0][0]}else{if(F!=="identity")throw new Error('Unknown function type "'+F+'"');d=ro}if(D){for(var ue={},ve=[],pe=0;pe<l.stops.length;pe++){var we=l.stops[pe],Te=we[0].zoom;ue[Te]===void 0&&(ue[Te]={zoom:Te,type:l.type,property:l.property,default:l.default,stops:[]},ve.push(Te)),ue[Te].stops.push([we[0].value,we[1]])}for(var De=[],Le=0,Ne=ve;Le<Ne.length;Le+=1){var He=Ne[Le];De.push([ue[He].zoom,i(ue[He],p)])}var Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:oi.interpolationFactor.bind(void 0,Qe),zoomStops:De.map(function($e){return $e[0]}),evaluate:function($e,vt){var rt=$e.zoom;return to({stops:De,base:l.base},p,rt).evaluate(rt,vt)}}}if(V){var gt=F==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:gt,interpolationFactor:oi.interpolationFactor.bind(void 0,gt),zoomStops:l.stops.map(function($e){return $e[0]}),evaluate:function($e){return d(l,p,$e.zoom,y,I)}}}return{kind:"source",evaluate:function($e,vt){var rt=vt&&vt.properties?vt.properties[l.property]:void 0;return rt===void 0?eo(l.default,p.default):d(l,p,rt,y,I)}}}(this._parameters,this._specification))};function ea(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,y=e.styleSpec,I=[],C=kr(i);if(C!=="object")return[new ae(t,i,"object expected, "+C+" found")];for(var D in i){var V=D.split(".")[0],F=l[V]||l["*"],K=void 0;if(p[V])K=p[V];else if(l[V])K=Xt;else if(p["*"])K=p["*"];else{if(!l["*"]){I.push(new ae(t,i[D],'unknown property "'+D+'"'));continue}K=Xt}I=I.concat(K({key:(t&&t+".")+D,value:i[D],valueSpec:F,style:d,styleSpec:y,object:i,objectKey:D},i))}for(var W in l)p[W]||l[W].required&&l[W].default===void 0&&i[W]===void 0&&I.push(new ae(t,i,'missing required property "'+W+'"'));return I}function ih(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,y=e.arrayElementValidator||Xt;if(kr(t)!=="array")return[new ae(d,t,"array expected, "+kr(t)+" found")];if(i.length&&t.length!==i.length)return[new ae(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new ae(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var I={type:i.value,values:i.values};p.$version<7&&(I.function=i.function),kr(i.value)==="object"&&(I=i.value);for(var C=[],D=0;D<t.length;D++)C=C.concat(y({array:t,arrayIndex:D,value:t[D],valueSpec:I,style:l,styleSpec:p,key:d+"["+D+"]"}));return C}function wf(e){var t=e.key,i=e.value,l=e.valueSpec,p=kr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new ae(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new ae(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new ae(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function Ef(e){var t,i,l,p=e.valueSpec,d=Ke(e.value.type),y={},I=d!=="categorical"&&e.value.property===void 0,C=!I,D=kr(e.value.stops)==="array"&&kr(e.value.stops[0])==="array"&&kr(e.value.stops[0][0])==="object",V=ea({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(W){if(d==="identity")return[new ae(W.key,W.value,'identity function may not have a "stops" property')];var oe=[],ue=W.value;return oe=oe.concat(ih({key:W.key,value:ue,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:F})),kr(ue)==="array"&&ue.length===0&&oe.push(new ae(W.key,ue,"array must have at least one stop")),oe},default:function(W){return Xt({key:W.key,value:W.value,valueSpec:p,style:W.style,styleSpec:W.styleSpec})}}});return d==="identity"&&I&&V.push(new ae(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||V.push(new ae(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Eo(e.valueSpec)&&V.push(new ae(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(C&&!Ba(e.valueSpec)?V.push(new ae(e.key,e.value,"property functions not supported")):I&&!_f(e.valueSpec)&&V.push(new ae(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!D||e.value.property!==void 0||V.push(new ae(e.key,e.value,'"property" property is required')),V;function F(W){var oe=[],ue=W.value,ve=W.key;if(kr(ue)!=="array")return[new ae(ve,ue,"array expected, "+kr(ue)+" found")];if(ue.length!==2)return[new ae(ve,ue,"array length 2 expected, length "+ue.length+" found")];if(D){if(kr(ue[0])!=="object")return[new ae(ve,ue,"object expected, "+kr(ue[0])+" found")];if(ue[0].zoom===void 0)return[new ae(ve,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new ae(ve,ue,"object stop key must have value")];if(l&&l>Ke(ue[0].zoom))return[new ae(ve,ue[0].zoom,"stop zoom values must appear in ascending order")];Ke(ue[0].zoom)!==l&&(l=Ke(ue[0].zoom),i=void 0,y={}),oe=oe.concat(ea({key:ve+"[0]",value:ue[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:wf,value:K}}))}else oe=oe.concat(K({key:ve+"[0]",value:ue[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},ue));return ls(Me(ue[1]))?oe.concat([new ae(ve+"[1]",ue[1],"expressions are not allowed in function stops.")]):oe.concat(Xt({key:ve+"[1]",value:ue[1],valueSpec:p,style:W.style,styleSpec:W.styleSpec}))}function K(W,oe){var ue=kr(W.value),ve=Ke(W.value),pe=W.value!==null?W.value:oe;if(t){if(ue!==t)return[new ae(W.key,pe,ue+" stop domain type must match previous stop domain type "+t)]}else t=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new ae(W.key,pe,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&d!=="categorical"){var we="number expected, "+ue+" found";return Ba(p)&&d===void 0&&(we+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ae(W.key,pe,we)]}return d!=="categorical"||ue!=="number"||isFinite(ve)&&Math.floor(ve)===ve?d!=="categorical"&&ue==="number"&&i!==void 0&&ve<i?[new ae(W.key,pe,"stop domain values must appear in ascending order")]:(i=ve,d==="categorical"&&ve in y?[new ae(W.key,pe,"stop domain values must be unique")]:(y[ve]=!0,[])):[new ae(W.key,pe,"integer expected, found "+ve)]}}function Oa(e){var t=(e.expressionContext==="property"?cu:xf)(Me(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new ae(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new ae(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!ke(i))return[new ae(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!ke(i))return[new ae(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Ui(i,["zoom","feature-state"]))return[new ae(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Mn(i))return[new ae(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nh(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(Ke(i))===-1&&p.push(new ae(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(Ke(i))===-1&&p.push(new ae(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function ah(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!ah(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}hu.deserialize=function(e){return new hu(e._parameters,e._specification)},hu.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Ns={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Us(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};ah(e)||(e=El(e));var t=xf(e,Ns);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function us(e,t){return e<t?-1:e>t?1:0}function El(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?Sp(e[1],e[2],"=="):i==="!="?Va(Sp(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Sp(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(El))):i==="all"?["all"].concat(e.slice(1).map(El)):i==="none"?["all"].concat(e.slice(1).map(El).map(Va)):i==="in"?Sf(e[1],e.slice(2)):i==="!in"?Va(Sf(e[1],e.slice(2))):i==="has"?Sl(e[1]):i==="!has"?Va(Sl(e[1])):i!=="within"||e}function Sp(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function Sf(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(us)]]:["filter-in-small",e,["literal",t]]}}function Sl(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Va(e){return["!",e]}function kp(e){return ah(Me(e.value))?Oa(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(kr(l)!=="array")return[new ae(p,l,"array expected, "+kr(l)+" found")];var d,y=i.styleSpec,I=[];if(l.length<1)return[new ae(p,l,"filter array must have at least 1 element")];switch(I=I.concat(nh({key:p+"[0]",value:l[0],valueSpec:y.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ke(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ke(l[1])==="$type"&&I.push(new ae(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&I.push(new ae(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=kr(l[1]))!=="string"&&I.push(new ae(p+"[1]",l[1],"string expected, "+d+" found"));for(var C=2;C<l.length;C++)d=kr(l[C]),Ke(l[1])==="$type"?I=I.concat(nh({key:p+"["+C+"]",value:l[C],valueSpec:y.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&I.push(new ae(p+"["+C+"]",l[C],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var D=1;D<l.length;D++)I=I.concat(t({key:p+"["+D+"]",value:l[D],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=kr(l[1]),l.length!==2?I.push(new ae(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&I.push(new ae(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=kr(l[1]),l.length!==2?I.push(new ae(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&I.push(new ae(p+"[1]",l[1],"object expected, "+d+" found"))}return I}(e)}function sc(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,y=e.objectKey,I=p[t+"_"+e.layerType];if(!I)return[];var C=y.match(/^(.*)-transition$/);if(t==="paint"&&C&&I[C[1]]&&I[C[1]].transition)return Xt({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var D,V=e.valueSpec||I[y];if(!V)return[new ae(i,d,'unknown property "'+y+'"')];if(kr(d)==="string"&&Ba(V)&&!V.tokens&&(D=/^{([^}]+)}$/.exec(d)))return[new ae(i,d,'"'+y+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(D[1])+" }`.")];var F=[];return e.layerType==="symbol"&&(y==="text-field"&&l&&!l.glyphs&&F.push(new ae(i,d,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&rh(Me(d))&&Ke(d.type)==="identity"&&F.push(new ae(i,d,'"text-font" does not support identity functions'))),F.concat(Xt({key:e.key,value:d,valueSpec:V,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:y}))}function oh(e){return sc(e,"paint")}function lc(e){return sc(e,"layout")}function uc(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new ae(l,i,'either "type" or "ref" is required'));var y,I=Ke(i.type),C=Ke(i.ref);if(i.id)for(var D=Ke(i.id),V=0;V<e.arrayIndex;V++){var F=p.layers[V];Ke(F.id)===D&&t.push(new ae(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+F.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(oe){oe in i&&t.push(new ae(l,i[oe],'"'+oe+'" is prohibited for ref layers'))}),p.layers.forEach(function(oe){Ke(oe.id)===C&&(y=oe)}),y?y.ref?t.push(new ae(l,i.ref,"ref cannot reference another ref layer")):I=Ke(y.type):t.push(new ae(l,i.ref,'ref layer "'+C+'" not found'));else if(I!=="background")if(i.source){var K=p.sources&&p.sources[i.source],W=K&&Ke(K.type);K?W==="vector"&&I==="raster"?t.push(new ae(l,i.source,'layer "'+i.id+'" requires a raster source')):W==="raster"&&I!=="raster"?t.push(new ae(l,i.source,'layer "'+i.id+'" requires a vector source')):W!=="vector"||i["source-layer"]?W==="raster-dem"&&I!=="hillshade"?t.push(new ae(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!i.paint||!i.paint["line-gradient"]||W==="geojson"&&K.lineMetrics||t.push(new ae(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ae(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new ae(l,i.source,'source "'+i.source+'" not found'))}else t.push(new ae(l,i,'missing required property "source"'));return t=t.concat(ea({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Xt({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:kp,layout:function(oe){return ea({layer:i,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":function(ue){return lc(Ue({layerType:I},ue))}}})},paint:function(oe){return ea({layer:i,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":function(ue){return oh(Ue({layerType:I},ue))}}})}}}))}function kl(e){var t=e.value,i=e.key,l=kr(t);return l!=="string"?[new ae(i,t,"string expected, "+l+" found")]:[]}var Qr={promoteId:function(e){var t=e.key,i=e.value;if(kr(i)==="string")return kl({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,kl({key:t+"."+p,value:i[p]}));return l}};function fa(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new ae(i,t,'"type" is required')];var d,y=Ke(t.type);switch(y){case"vector":case"raster":case"raster-dem":return ea({key:i,value:t,valueSpec:l["source_"+y.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:Qr});case"geojson":if(d=ea({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:Qr}),t.cluster)for(var I in t.clusterProperties){var C=t.clusterProperties[I],D=C[0],V=typeof D=="string"?[D,["accumulated"],["get",I]]:D;d.push.apply(d,Oa({key:i+"."+I+".map",value:C[1],expressionContext:"cluster-map"})),d.push.apply(d,Oa({key:i+"."+I+".reduce",value:V,expressionContext:"cluster-reduce"}))}return d;case"video":return ea({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return ea({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new ae(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nh({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function da(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],y=kr(t);if(t===void 0)return d;if(y!=="object")return d.concat([new ae("light",t,"object expected, "+y+" found")]);for(var I in t){var C=I.match(/^(.*)-transition$/);d=d.concat(C&&l[C[1]]&&l[C[1]].transition?Xt({key:I,value:t[I],valueSpec:i.transition,style:p,styleSpec:i}):l[I]?Xt({key:I,value:t[I],valueSpec:l[I],style:p,styleSpec:i}):[new ae(I,t[I],'unknown property "'+I+'"')])}return d}var On={"*":function(){return[]},array:ih,boolean:function(e){var t=e.value,i=e.key,l=kr(t);return l!=="boolean"?[new ae(i,t,"boolean expected, "+l+" found")]:[]},number:wf,color:function(e){var t=e.key,i=e.value,l=kr(i);return l!=="string"?[new ae(t,i,"color expected, "+l+" found")]:Kt(i)===null?[new ae(t,i,'color expected, "'+i+'" found')]:[]},constants:Se,enum:nh,filter:kp,function:Ef,layer:uc,object:ea,source:fa,light:da,string:kl,formatted:function(e){return kl(e).length===0?[]:Oa(e)},resolvedImage:function(e){return kl(e).length===0?[]:Oa(e)}};function Xt(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&rh(Ke(t))?Ef(e):i.expression&&ls(Me(t))?Oa(e):i.type&&On[i.type]?On[i.type](e):ea(Ue({},e,{valueSpec:i.type?l[i.type]:i}))}function jr(e){var t=e.value,i=e.key,l=kl(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new ae(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new ae(i,t,'"glyphs" url must include a "{range}" token'))),l}function Vn(e,t){t===void 0&&(t=H);var i=[];return i=i.concat(Xt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:jr,"*":function(){return[]}}})),e.constants&&(i=i.concat(Se({key:"constants",value:e.constants,style:e,styleSpec:t}))),Ip(i)}function Ip(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function pu(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Ip(e.apply(this,t))}}Vn.source=pu(fa),Vn.light=pu(da),Vn.layer=pu(uc),Vn.filter=pu(kp),Vn.paintProperty=pu(oh),Vn.layoutProperty=pu(lc);var cs=Vn,cc=cs.light,wd=cs.paintProperty,hs=cs.layoutProperty;function Il(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new ye(new Error(p[l].message))),i=!0;return i}var ps=ji;function ji(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var y=p[3+d],I=p[3+d+1];l.push(y===I?null:p.subarray(y,I))}var C=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],C),this.bboxes=p.subarray(C),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var D=0;D<this.d*this.d;D++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var V=i/t*e;this.min=-V,this.max=e+V}ji.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},ji.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ji.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},ji.prototype.query=function(e,t,i,l,p){var d=this.min,y=this.max;if(e<=d&&t<=d&&y<=i&&y<=l&&!p)return Array.prototype.slice.call(this.keys);var I=[];return this._forEachCell(e,t,i,l,this._queryCell,I,{},p),I},ji.prototype._queryCell=function(e,t,i,l,p,d,y,I){var C=this.cells[p];if(C!==null)for(var D=this.keys,V=this.bboxes,F=0;F<C.length;F++){var K=C[F];if(y[K]===void 0){var W=4*K;(I?I(V[W+0],V[W+1],V[W+2],V[W+3]):e<=V[W+2]&&t<=V[W+3]&&i>=V[W+0]&&l>=V[W+1])?(y[K]=!0,d.push(D[K])):y[K]=!1}}},ji.prototype._forEachCell=function(e,t,i,l,p,d,y,I){for(var C=this._convertToCellCoord(e),D=this._convertToCellCoord(t),V=this._convertToCellCoord(i),F=this._convertToCellCoord(l),K=C;K<=V;K++)for(var W=D;W<=F;W++){var oe=this.d*W+K;if((!I||I(this._convertFromCellCoord(K),this._convertFromCellCoord(W),this._convertFromCellCoord(K+1),this._convertFromCellCoord(W+1)))&&p.call(this,e,t,i,l,oe,d,y,I))return}},ji.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ji.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ji.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,y=0;y<e.length;y++){var I=e[y];p[3+y]=d,p.set(I,d),d+=I.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var ko=j.ImageData,kf=j.ImageBitmap,qr={};function ot(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),qr[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var qi in ot("Object",Object),ps.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},ps.deserialize=function(e){return new ps(e.buffer)},ot("Grid",ps),ot("Color",tr),ot("Error",Error),ot("ResolvedImage",Hi),ot("StylePropertyFunction",hu),ot("StyleExpression",uu,{omit:["_evaluator"]}),ot("ZoomDependentExpression",So),ot("ZoomConstantExpression",oc),ot("CompoundExpression",Kr,{omit:["_evaluate"]}),bl)bl[qi]._classRegistryKey||ot("Expression_"+qi,bl[qi]);function sh(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Io(e){return kf&&e instanceof kf}function fs(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(sh(e)||Io(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof ko)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(fs(d[p],t));return l}if(typeof e=="object"){var y=e.constructor,I=y._classRegistryKey;if(!I)throw new Error("can't serialize object of unregistered class");var C=y.serialize?y.serialize(e,t):{};if(!y.serialize){for(var D in e)if(e.hasOwnProperty(D)&&!(qr[I].omit.indexOf(D)>=0)){var V=e[D];C[D]=qr[I].shallow.indexOf(D)>=0?V:fs(V,t)}e instanceof Error&&(C.message=e.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return I!=="Object"&&(C.$name=I),C}throw new Error("can't serialize object of type "+typeof e)}function ma(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||sh(e)||Io(e)||ArrayBuffer.isView(e)||e instanceof ko)return e;if(Array.isArray(e))return e.map(ma);if(typeof e=="object"){var t=e.$name||"Object",i=qr[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var y=d[p];if(y!=="$name"){var I=e[y];l[y]=qr[t].shallow.indexOf(y)>=0?I:ma(I)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var Tl=function(){this.first=!0};Tl.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var Je={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Tp(e){for(var t=0,i=e;t<i.length;t+=1)if(js(i[t].charCodeAt(0)))return!0;return!1}function js(e){return!(e!==746&&e!==747&&(e<4352||!(Je["Bopomofo Extended"](e)||Je.Bopomofo(e)||Je["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Je["CJK Compatibility Ideographs"](e)||Je["CJK Compatibility"](e)||Je["CJK Radicals Supplement"](e)||Je["CJK Strokes"](e)||!(!Je["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||Je["CJK Unified Ideographs Extension A"](e)||Je["CJK Unified Ideographs"](e)||Je["Enclosed CJK Letters and Months"](e)||Je["Hangul Compatibility Jamo"](e)||Je["Hangul Jamo Extended-A"](e)||Je["Hangul Jamo Extended-B"](e)||Je["Hangul Jamo"](e)||Je["Hangul Syllables"](e)||Je.Hiragana(e)||Je["Ideographic Description Characters"](e)||Je.Kanbun(e)||Je["Kangxi Radicals"](e)||Je["Katakana Phonetic Extensions"](e)||Je.Katakana(e)&&e!==12540||!(!Je["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!Je["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Je["Unified Canadian Aboriginal Syllabics"](e)||Je["Unified Canadian Aboriginal Syllabics Extended"](e)||Je["Vertical Forms"](e)||Je["Yijing Hexagram Symbols"](e)||Je["Yi Syllables"](e)||Je["Yi Radicals"](e))))}function hc(e){return!(js(e)||function(t){return!!(Je["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Je["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Je["Letterlike Symbols"](t)||Je["Number Forms"](t)||Je["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Je["Control Pictures"](t)&&t!==9251||Je["Optical Character Recognition"](t)||Je["Enclosed Alphanumerics"](t)||Je["Geometric Shapes"](t)||Je["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Je["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Je["CJK Symbols and Punctuation"](t)||Je.Katakana(t)||Je["Private Use Area"](t)||Je["CJK Compatibility Forms"](t)||Je["Small Form Variants"](t)||Je["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Fa(e){return e>=1424&&e<=2303||Je["Arabic Presentation Forms-A"](e)||Je["Arabic Presentation Forms-B"](e)}function va(e,t){return!(!t&&Fa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Je.Khmer(e))}function ds(e){for(var t=0,i=e;t<i.length;t+=1)if(Fa(i[t].charCodeAt(0)))return!0;return!1}var lh=null,Zi="unavailable",kn=null,To=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Zi="error"),lh&&lh(e)};function pc(){Al.fire(new le("pluginStateChange",{pluginStatus:Zi,pluginURL:kn}))}var Al=new _e,Ed=function(){return Zi},io=function(){if(Zi!=="deferred"||!kn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Zi="loading",pc(),kn&&ca({url:kn},function(e){e?To(e):(Zi="loaded",pc())})},Fn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Zi==="loaded"||Fn.applyArabicShaping!=null},isLoading:function(){return Zi==="loading"},setState:function(e){Zi=e.pluginStatus,kn=e.pluginURL},isParsed:function(){return Fn.applyArabicShaping!=null&&Fn.processBidirectionalText!=null&&Fn.processStyledBidirectionalText!=null},getPluginURL:function(){return kn}},Wt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Tl,this.transition={})};Wt.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!va(p[l].charCodeAt(0),i))return!1;return!0}(e,Fn.isLoaded())},Wt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Wt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var Ao=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(rh(i))return new hu(i,l);if(ls(i)){var p=cu(i,l);if(p.result==="error")throw new Error(p.value.map(function(y){return y.key+": "+y.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=tr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};Ao.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ao.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var Kn=function(e){this.property=e,this.value=new Ao(e,void 0)};Kn.prototype.transitioned=function(e,t){return new zl(this.property,this.value,t,je({},e.transition,this.transition),e.now)},Kn.prototype.untransitioned=function(){return new zl(this.property,this.value,null,{},0)};var Yi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Yi.prototype.getValue=function(e){return Tt(this._values[e].value.value)},Yi.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Kn(this._values[e].property)),this._values[e].value=new Ao(this._values[e].property,t===null?void 0:Tt(t))},Yi.prototype.getTransition=function(e){return Tt(this._values[e].transition)},Yi.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Kn(this._values[e].property)),this._values[e].transition=Tt(t)||void 0},Yi.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},Yi.prototype.transitioned=function(e,t){for(var i=new qs(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},Yi.prototype.untransitioned=function(){for(var e=new qs(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var zl=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};zl.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var y=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(I){if(I<=0)return 0;if(I>=1)return 1;var C=I*I,D=C*I;return 4*(I<.5?D:3*(I-C)+D-.75)}(y))}return p};var qs=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};qs.prototype.possiblyEvaluate=function(e,t,i){for(var l=new fc(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var y=d[p];l._values[y]=this._values[y].possiblyEvaluate(e,t,i)}return l},qs.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var Hn=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Hn.prototype.getValue=function(e){return Tt(this._values[e].value)},Hn.prototype.setValue=function(e,t){this._values[e]=new Ao(this._values[e].property,t===null?void 0:Tt(t))},Hn.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},Hn.prototype.possiblyEvaluate=function(e,t,i){for(var l=new fc(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var y=d[p];l._values[y]=this._values[y].possiblyEvaluate(e,t,i)}return l};var ta=function(e,t,i){this.property=e,this.value=t,this.parameters=i};ta.prototype.isConstant=function(){return this.value.kind==="constant"},ta.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},ta.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var fc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};fc.prototype.get=function(e){return this._values[e]};var yt=function(e){this.specification=e};yt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},yt.prototype.interpolate=function(e,t,i){var l=nu[this.specification.type];return l?l(e,t,i):e};var pt=function(e,t){this.specification=e,this.overrides=t};pt.prototype.possiblyEvaluate=function(e,t,i,l){return new ta(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},pt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new ta(this,{kind:"constant",value:void 0},e.parameters);var l=nu[this.specification.type];return l?new ta(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},pt.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var Na=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new ta(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var y=i.expression.evaluate(l,null,{},p,d),I=i.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,C=this._calculate(I,I,I,l);return new ta(this,{kind:"constant",value:C},l)}if(i.expression.kind==="camera"){var D=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new ta(this,{kind:"constant",value:D},l)}return new ta(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,y,I){if(i.kind==="source"){var C=i.evaluate(l,p,d,y,I);return this._calculate(C,C,C,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(pt),un=function(e){this.specification=e};un.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new Wt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Wt(Math.floor(t.zoom),t)),e.expression.evaluate(new Wt(Math.floor(t.zoom+1),t)),t)}},un.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},un.prototype.interpolate=function(e){return e};var no=function(e){this.specification=e};no.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},no.prototype.interpolate=function(){return!1};var In=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Ao(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new Kn(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};ot("DataDrivenProperty",pt),ot("DataConstantProperty",yt),ot("CrossFadedDataDrivenProperty",Na),ot("CrossFadedProperty",un),ot("ColorRampProperty",no);var ra=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new Hn(l.layout)),l.paint)){for(var p in this._transitionablePaint=new Yi(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fc(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(hs,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return Sr(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(wd,"layers."+this.id+".paint."+i,i,l,p))return!1;if(Sr(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],y=d.property.specification["property-type"]==="cross-faded-data-driven",I=d.value.isDataDriven(),C=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var D=this._transitionablePaint._values[i].value;return D.isDataDriven()||I||y||this._handleOverridablePaintPropertyUpdate(i,C,D)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),kt(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,y){return y===void 0&&(y={}),(!y||y.validate!==!1)&&Il(this,i.call(cs,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:H,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof ta&&Ba(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(_e),ao={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},uh=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},xr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ji(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=ao[p.type].BYTES_PER_ELEMENT,y=i=If(i,Math.max(t,d)),I=p.components||1;return l=Math.max(l,d),i+=d*I,{name:p.name,type:p.type,components:I,offset:y}}),size:If(i,Math.max(l,t)),alignment:t}}function If(e,t){return Math.ceil(e/t)*t}xr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},xr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},xr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},xr.prototype.clear=function(){this.length=0},xr.prototype.resize=function(e){this.reserve(e),this.length=e},xr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},xr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var zo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(xr);zo.prototype.bytesPerElement=4,ot("StructArrayLayout2i4",zo);var Ap=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var y=this.length;return this.resize(y+1),this.emplace(y,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,y){var I=4*i;return this.int16[I+0]=l,this.int16[I+1]=p,this.int16[I+2]=d,this.int16[I+3]=y,i},t}(xr);Ap.prototype.bytesPerElement=8,ot("StructArrayLayout4i8",Ap);var ms=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,y,I)},t.prototype.emplace=function(i,l,p,d,y,I,C){var D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=d,this.int16[D+3]=y,this.int16[D+4]=I,this.int16[D+5]=C,i},t}(xr);ms.prototype.bytesPerElement=12,ot("StructArrayLayout2i4i12",ms);var bi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,y,I)},t.prototype.emplace=function(i,l,p,d,y,I,C){var D=4*i,V=8*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.uint8[V+4]=d,this.uint8[V+5]=y,this.uint8[V+6]=I,this.uint8[V+7]=C,i},t}(xr);bi.prototype.bytesPerElement=8,ot("StructArrayLayout2i4ub8",bi);var Ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(xr);Ta.prototype.bytesPerElement=8,ot("StructArrayLayout2f8",Ta);var cn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I,C,D,V,F){var K=this.length;return this.resize(K+1),this.emplace(K,i,l,p,d,y,I,C,D,V,F)},t.prototype.emplace=function(i,l,p,d,y,I,C,D,V,F,K){var W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=p,this.uint16[W+2]=d,this.uint16[W+3]=y,this.uint16[W+4]=I,this.uint16[W+5]=C,this.uint16[W+6]=D,this.uint16[W+7]=V,this.uint16[W+8]=F,this.uint16[W+9]=K,i},t}(xr);cn.prototype.bytesPerElement=20,ot("StructArrayLayout10ui20",cn);var oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I,C,D,V,F,K,W){var oe=this.length;return this.resize(oe+1),this.emplace(oe,i,l,p,d,y,I,C,D,V,F,K,W)},t.prototype.emplace=function(i,l,p,d,y,I,C,D,V,F,K,W,oe){var ue=12*i;return this.int16[ue+0]=l,this.int16[ue+1]=p,this.int16[ue+2]=d,this.int16[ue+3]=y,this.uint16[ue+4]=I,this.uint16[ue+5]=C,this.uint16[ue+6]=D,this.uint16[ue+7]=V,this.int16[ue+8]=F,this.int16[ue+9]=K,this.int16[ue+10]=W,this.int16[ue+11]=oe,i},t}(xr);oo.prototype.bytesPerElement=24,ot("StructArrayLayout4i4ui4i24",oo);var fu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var y=3*i;return this.float32[y+0]=l,this.float32[y+1]=p,this.float32[y+2]=d,i},t}(xr);fu.prototype.bytesPerElement=12,ot("StructArrayLayout3f12",fu);var vs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(xr);vs.prototype.bytesPerElement=4,ot("StructArrayLayout1ul4",vs);var Sd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I,C,D,V){var F=this.length;return this.resize(F+1),this.emplace(F,i,l,p,d,y,I,C,D,V)},t.prototype.emplace=function(i,l,p,d,y,I,C,D,V,F){var K=10*i,W=5*i;return this.int16[K+0]=l,this.int16[K+1]=p,this.int16[K+2]=d,this.int16[K+3]=y,this.int16[K+4]=I,this.int16[K+5]=C,this.uint32[W+3]=D,this.uint16[K+8]=V,this.uint16[K+9]=F,i},t}(xr);Sd.prototype.bytesPerElement=20,ot("StructArrayLayout6i1ul2ui20",Sd);var du=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,y,I)},t.prototype.emplace=function(i,l,p,d,y,I,C){var D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=d,this.int16[D+3]=y,this.int16[D+4]=I,this.int16[D+5]=C,i},t}(xr);du.prototype.bytesPerElement=12,ot("StructArrayLayout2i2i2i12",du);var so=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y){var I=this.length;return this.resize(I+1),this.emplace(I,i,l,p,d,y)},t.prototype.emplace=function(i,l,p,d,y,I){var C=4*i,D=8*i;return this.float32[C+0]=l,this.float32[C+1]=p,this.float32[C+2]=d,this.int16[D+6]=y,this.int16[D+7]=I,i},t}(xr);so.prototype.bytesPerElement=16,ot("StructArrayLayout2f1f2i16",so);var Pl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var y=this.length;return this.resize(y+1),this.emplace(y,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,y){var I=12*i,C=3*i;return this.uint8[I+0]=l,this.uint8[I+1]=p,this.float32[C+1]=d,this.float32[C+2]=y,i},t}(xr);Pl.prototype.bytesPerElement=12,ot("StructArrayLayout2ub2f12",Pl);var Zs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var y=3*i;return this.uint16[y+0]=l,this.uint16[y+1]=p,this.uint16[y+2]=d,i},t}(xr);Zs.prototype.bytesPerElement=6,ot("StructArrayLayout3ui6",Zs);var Ua=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I,C,D,V,F,K,W,oe,ue,ve,pe,we){var Te=this.length;return this.resize(Te+1),this.emplace(Te,i,l,p,d,y,I,C,D,V,F,K,W,oe,ue,ve,pe,we)},t.prototype.emplace=function(i,l,p,d,y,I,C,D,V,F,K,W,oe,ue,ve,pe,we,Te){var De=24*i,Le=12*i,Ne=48*i;return this.int16[De+0]=l,this.int16[De+1]=p,this.uint16[De+2]=d,this.uint16[De+3]=y,this.uint32[Le+2]=I,this.uint32[Le+3]=C,this.uint32[Le+4]=D,this.uint16[De+10]=V,this.uint16[De+11]=F,this.uint16[De+12]=K,this.float32[Le+7]=W,this.float32[Le+8]=oe,this.uint8[Ne+36]=ue,this.uint8[Ne+37]=ve,this.uint8[Ne+38]=pe,this.uint32[Le+10]=we,this.int16[De+22]=Te,i},t}(xr);Ua.prototype.bytesPerElement=48,ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ua);var mu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,y,I,C,D,V,F,K,W,oe,ue,ve,pe,we,Te,De,Le,Ne,He,Qe,gt,$e,vt,rt,Vt){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,i,l,p,d,y,I,C,D,V,F,K,W,oe,ue,ve,pe,we,Te,De,Le,Ne,He,Qe,gt,$e,vt,rt,Vt)},t.prototype.emplace=function(i,l,p,d,y,I,C,D,V,F,K,W,oe,ue,ve,pe,we,Te,De,Le,Ne,He,Qe,gt,$e,vt,rt,Vt,Pt){var ft=34*i,ir=17*i;return this.int16[ft+0]=l,this.int16[ft+1]=p,this.int16[ft+2]=d,this.int16[ft+3]=y,this.int16[ft+4]=I,this.int16[ft+5]=C,this.int16[ft+6]=D,this.int16[ft+7]=V,this.uint16[ft+8]=F,this.uint16[ft+9]=K,this.uint16[ft+10]=W,this.uint16[ft+11]=oe,this.uint16[ft+12]=ue,this.uint16[ft+13]=ve,this.uint16[ft+14]=pe,this.uint16[ft+15]=we,this.uint16[ft+16]=Te,this.uint16[ft+17]=De,this.uint16[ft+18]=Le,this.uint16[ft+19]=Ne,this.uint16[ft+20]=He,this.uint16[ft+21]=Qe,this.uint16[ft+22]=gt,this.uint32[ir+12]=$e,this.float32[ir+13]=vt,this.float32[ir+14]=rt,this.float32[ir+15]=Vt,this.float32[ir+16]=Pt,i},t}(xr);mu.prototype.bytesPerElement=68,ot("StructArrayLayout8i15ui1ul4f68",mu);var Gs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(xr);Gs.prototype.bytesPerElement=4,ot("StructArrayLayout1f4",Gs);var ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var y=3*i;return this.int16[y+0]=l,this.int16[y+1]=p,this.int16[y+2]=d,i},t}(xr);ja.prototype.bytesPerElement=6,ot("StructArrayLayout3i6",ja);var Ks=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var y=4*i;return this.uint32[2*i+0]=l,this.uint16[y+2]=p,this.uint16[y+3]=d,i},t}(xr);Ks.prototype.bytesPerElement=8,ot("StructArrayLayout1ul2ui8",Ks);var dc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(xr);dc.prototype.bytesPerElement=4,ot("StructArrayLayout2ui4",dc);var Po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(xr);Po.prototype.bytesPerElement=2,ot("StructArrayLayout1ui2",Po);var Aa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var y=this.length;return this.resize(y+1),this.emplace(y,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,y){var I=4*i;return this.float32[I+0]=l,this.float32[I+1]=p,this.float32[I+2]=d,this.float32[I+3]=y,i},t}(xr);Aa.prototype.bytesPerElement=16,ot("StructArrayLayout4f16",Aa);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new N(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(uh);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(Sd);ot("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(uh);o.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Ua);ot("PlacedSymbolArray",c);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(uh);m.prototype.size=68;var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(mu);ot("SymbolInstanceArray",E);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Gs);ot("GlyphOffsetArray",k);var P=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(ja);ot("SymbolLineVertexArray",P);var B=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(uh);B.prototype.size=8;var q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new B(this,i)},t}(Ks);ot("FeatureIndexArray",q);var Y=Ji([{name:"a_pos",components:2,type:"Int16"}],4).members,Q=function(e){e===void 0&&(e=[]),this.segments=e};function $(e,t){return 256*(e=Ee(Math.floor(e),0,255))+Ee(Math.floor(t),0,255)}Q.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>Q.MAX_VERTEX_ARRAY_LENGTH&&Ot("Max vertices per segment is "+Q.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>Q.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},Q.prototype.get=function(){return this.segments},Q.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},Q.simpleSegment=function(e,t,i,l){return new Q([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},Q.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ot("SegmentVector",Q);var ce=Ji([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),se=z(function(e){e.exports=function(t,i){var l,p,d,y,I,C,D,V;for(p=t.length-(l=3&t.length),d=i,I=3432918353,C=461845907,V=0;V<p;)D=255&t.charCodeAt(V)|(255&t.charCodeAt(++V))<<8|(255&t.charCodeAt(++V))<<16|(255&t.charCodeAt(++V))<<24,++V,d=27492+(65535&(y=5*(65535&(d=(d^=D=(65535&(D=(D=(65535&D)*I+(((D>>>16)*I&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(D=0,l){case 3:D^=(255&t.charCodeAt(V+2))<<16;case 2:D^=(255&t.charCodeAt(V+1))<<8;case 1:d^=D=(65535&(D=(D=(65535&(D^=255&t.charCodeAt(V)))*I+(((D>>>16)*I&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),de=z(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,y=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(y)|(255&t.charCodeAt(++y))<<8|(255&t.charCodeAt(++y))<<16|(255&t.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++y;switch(p){case 3:d^=(255&t.charCodeAt(y+2))<<16;case 2:d^=(255&t.charCodeAt(y+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(y)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),ne=se,me=de;ne.murmur3=se,ne.murmur2=me;var ge=function(){this.ids=[],this.positions=[],this.indexed=!1};ge.prototype.add=function(e,t,i,l){this.ids.push(Be(e)),this.positions.push(t,i,l)},ge.prototype.getPositions=function(e){for(var t=Be(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},ge.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,y,I,C){for(;I<C;){for(var D=d[I+C>>1],V=I-1,F=C+1;;){do V++;while(d[V]<D);do F--;while(d[F]>D);if(V>=F)break;Ce(d,V,F),Ce(y,3*V,3*F),Ce(y,3*V+1,3*F+1),Ce(y,3*V+2,3*F+2)}F-I<C-F?(p(d,y,I,F),I=F+1):(p(d,y,F+1,C),C=F)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},ge.deserialize=function(e){var t=new ge;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Ie=Math.pow(2,53)-1;function Be(e){var t=+e;return!isNaN(t)&&t<=Ie?t:ne(String(e))}function Ce(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}ot("FeaturePositionMap",ge);var Oe=function(e,t){this.gl=e.gl,this.location=t},Ze=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Oe),Xe=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Oe),We=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Oe),ut=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Oe),wt=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Oe),bt=function(e){function t(i,l){e.call(this,i,l),this.current=tr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Oe),St=new Float32Array(16),pr=function(e){function t(i,l){e.call(this,i,l),this.current=St}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Oe);function lt(e){return[$(255*e.r,255*e.g),$(255*e.b,255*e.a)]}var At=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};At.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},At.prototype.getBinding=function(e,t,i){return this.type==="color"?new bt(e,t):new Xe(e,t)};var Rt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Rt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Rt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Rt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new wt(e,t):new Xe(e,t)};var zt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};zt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,y=this.expression.evaluate(new Wt(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,y)},zt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},zt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=lt(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},zt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Dt=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(y){return"u_"+y+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(y){return{name:"a_"+y,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Dt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new Wt(this.zoom),t,{},l,[],p),y=this.expression.evaluate(new Wt(this.zoom+1),t,{},l,[],p),I=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(I,e,d,y)},Dt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},Dt.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=lt(i),d=lt(l),y=e;y<t;y++)this.paintVertexArray.emplace(y,p[0],p[1],d[0],d[1]);else{for(var I=e;I<t;I++)this.paintVertexArray.emplace(I,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},Dt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Dt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Dt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=Ee(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},Dt.prototype.getBinding=function(e,t,i){return new Xe(e,t)};var Ht=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Ht.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Ht.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Ht.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],y=l[i.max];if(p&&d&&y)for(var I=e;I<t;I++)this.zoomInPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],d.pixelRatio,y.pixelRatio)}},Ht.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ce.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ce.members,this.expression.isStateDependent))},Ht.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var It=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof ta&&Ba(d.property.specification)){var y=Qi(p,e.type),I=d.value,C=d.property.specification.type,D=d.property.useIntegerZoom,V=d.property.specification["property-type"],F=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[p]=F?new Rt(I.value,y):new At(I.value,y,C),l.push("/u_"+p);else if(I.kind==="source"||F){var K=si(p,C,"source");this.binders[p]=F?new Ht(I,C,D,t,K,e.id):new zt(I,y,C,K),l.push("/a_"+p)}else{var W=si(p,C,"composite");this.binders[p]=new Dt(I,y,C,D,t,W),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};It.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof zt||t instanceof Dt?t.maxValue:0},It.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var y=this.binders[d];(y instanceof zt||y instanceof Dt||y instanceof Ht)&&y.populatePaintArray(e,t,i,l,p)}},It.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Rt&&l.setConstantPatternPositions(e,t)}},It.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var y in e)for(var I=0,C=t.getPositions(y);I<C.length;I+=1){var D=C[I],V=i.feature(D.index);for(var F in this.binders){var K=this.binders[F];if((K instanceof zt||K instanceof Dt||K instanceof Ht)&&K.expression.isStateDependent===!0){var W=l.paint.get(F);K.expression=W.value,K.updatePaintArray(D.start,D.end,V,e[y],p),d=!0}}}return d},It.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof At||i instanceof Rt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},It.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof zt||i instanceof Dt)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Ht)for(var p=0;p<ce.members.length;p++)e.push(ce.members[p].name)}return e},It.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof At||i instanceof Rt||i instanceof Dt)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},It.prototype.getPaintVertexBuffers=function(){return this._buffers},It.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof At||p instanceof Rt||p instanceof Dt)for(var d=0,y=p.uniformNames;d<y.length;d+=1){var I=y[d];if(t[I]){var C=p.getBinding(e,t[I],I);i.push({name:I,property:l,binding:C})}}}return i},It.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var y=d[p],I=y.name,C=y.property;this.binders[C].setUniform(y.binding,l,i.get(C),I)}},It.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Ht){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof zt||i instanceof Dt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},It.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof zt||i instanceof Dt||i instanceof Ht)&&i.upload(e)}this.updatePaintBuffers()},It.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof zt||t instanceof Dt||t instanceof Ht)&&t.destroy()}};var xt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new It(d,t,i)}this.needsUpload=!1,this._featureMap=new ge,this._bufferOffset=0};function Qi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function si(e,t,i){var l={color:{source:Ta,composite:Aa},number:{source:Gs,composite:Ta}},p=function(d){return{"line-pattern":{source:cn,composite:cn},"fill-pattern":{source:cn,composite:cn},"fill-extrusion-pattern":{source:cn,composite:cn}}[d]}(e);return p&&p[i]||l[t][i]}xt.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},xt.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var y=d[p];this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(e,this._featureMap,t,y,l)||this.needsUpload}},xt.prototype.get=function(e){return this.programConfigurations[e]},xt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},xt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ot("ConstantBinder",At),ot("CrossFadedConstantBinder",Rt),ot("SourceExpressionBinder",zt),ot("CrossFadedCompositeBinder",Ht),ot("CompositeExpressionBinder",Dt),ot("ProgramConfiguration",It,{omit:["_buffers"]}),ot("ProgramConfigurationSet",xt);var Tn=Math.pow(2,14)-1,hn=-Tn-1;function Xr(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var y=p[d],I=Math.round(y.x*t),C=Math.round(y.y*t);y.x=Ee(I,hn,Tn),y.y=Ee(C,hn,Tn),(I<y.x||I>y.x+1||C<y.y||C>y.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function ki(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Xr(e):[]}}function ya(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var li=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new zo,this.indexArray=new Zs,this.segments=new Q,this.programConfigurations=new xt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ia(e,t){for(var i=0;i<e.length;i++)if(Do(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(Do(e,t[l]))return!0;return!!ys(e,t)}function xi(e,t,i){return!!Do(e,t)||!!Hs(t,e,i)}function An(e,t){if(e.length===1)return gs(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(Do(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(gs(t,e[d]))return!0;for(var y=0;y<t.length;y++)if(ys(e,t[y]))return!0;return!1}function qa(e,t,i){if(e.length>1){if(ys(e,t))return!0;for(var l=0;l<t.length;l++)if(Hs(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Hs(e[p],t,i))return!0;return!1}function ys(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(ch(l,p,t[d],t[d+1]))return!0;return!1}function ch(e,t,i,l){return zr(e,i,l)!==zr(t,i,l)&&zr(e,t,i)!==zr(e,t,l)}function Hs(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Co(e,t[p-1],t[p])<l)return!0;return!1}function Co(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function gs(e,t){for(var i,l,p,d=!1,y=0;y<e.length;y++)for(var I=0,C=(i=e[y]).length-1;I<i.length;C=I++)(l=i[I]).y>t.y!=(p=i[C]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function Do(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],y=e[p];d.y>t.y!=y.y>t.y&&t.x<(y.x-d.x)*(t.y-d.y)/(y.y-d.y)+d.x&&(i=!i)}return i}function _s(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=zr(e,t,i[0]);return d!==zr(e,t,i[1])||d!==zr(e,t,i[2])||d!==zr(e,t,i[3])}function Za(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function $i(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function bs(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=N.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var y=[],I=0;I<e.length;I++)y.push(e[I].sub(d));return y}li.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var y=0,I=e;y<I.length;y+=1){var C=I[y],D=C.feature,V=C.id,F=C.index,K=C.sourceLayerIndex,W=this.layers[0]._featureFilter.needGeometry,oe=ki(D,W);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),oe,i)){var ue=d?d.evaluate(oe,{},i):void 0,ve={id:V,properties:D.properties,type:D.type,sourceLayerIndex:K,index:F,geometry:W?oe.geometry:Xr(D),patterns:{},sortKey:ue};p.push(ve)}}d&&p.sort(function(Qe,gt){return Qe.sortKey-gt.sortKey});for(var pe=0,we=p;pe<we.length;pe+=1){var Te=we[pe],De=Te.geometry,Le=Te.index,Ne=Te.sourceLayerIndex,He=e[Le].feature;this.addFeature(Te,De,Le,i),t.featureIndex.insert(He,De,Le,Ne,this.index)}},li.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},li.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},li.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},li.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Y),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},li.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},li.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var y=0,I=d[p];y<I.length;y+=1){var C=I[y],D=C.x,V=C.y;if(!(D<0||D>=8192||V<0||V>=8192)){var F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),K=F.vertexLength;ya(this.layoutVertexArray,D,V,-1,-1),ya(this.layoutVertexArray,D,V,1,-1),ya(this.layoutVertexArray,D,V,1,1),ya(this.layoutVertexArray,D,V,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+3,K+2),F.vertexLength+=4,F.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},ot("CircleBucket",li,{omit:["layers"]});var za=new In({"circle-sort-key":new pt(H.layout_circle["circle-sort-key"])}),Cl={paint:new In({"circle-radius":new pt(H.paint_circle["circle-radius"]),"circle-color":new pt(H.paint_circle["circle-color"]),"circle-blur":new pt(H.paint_circle["circle-blur"]),"circle-opacity":new pt(H.paint_circle["circle-opacity"]),"circle-translate":new yt(H.paint_circle["circle-translate"]),"circle-translate-anchor":new yt(H.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yt(H.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yt(H.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pt(H.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pt(H.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pt(H.paint_circle["circle-stroke-opacity"])}),layout:za},rr=typeof Float32Array<"u"?Float32Array:Array;function Di(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mi(e,t,i){var l=t[0],p=t[1],d=t[2],y=t[3],I=t[4],C=t[5],D=t[6],V=t[7],F=t[8],K=t[9],W=t[10],oe=t[11],ue=t[12],ve=t[13],pe=t[14],we=t[15],Te=i[0],De=i[1],Le=i[2],Ne=i[3];return e[0]=Te*l+De*I+Le*F+Ne*ue,e[1]=Te*p+De*C+Le*K+Ne*ve,e[2]=Te*d+De*D+Le*W+Ne*pe,e[3]=Te*y+De*V+Le*oe+Ne*we,e[4]=(Te=i[4])*l+(De=i[5])*I+(Le=i[6])*F+(Ne=i[7])*ue,e[5]=Te*p+De*C+Le*K+Ne*ve,e[6]=Te*d+De*D+Le*W+Ne*pe,e[7]=Te*y+De*V+Le*oe+Ne*we,e[8]=(Te=i[8])*l+(De=i[9])*I+(Le=i[10])*F+(Ne=i[11])*ue,e[9]=Te*p+De*C+Le*K+Ne*ve,e[10]=Te*d+De*D+Le*W+Ne*pe,e[11]=Te*y+De*V+Le*oe+Ne*we,e[12]=(Te=i[12])*l+(De=i[13])*I+(Le=i[14])*F+(Ne=i[15])*ue,e[13]=Te*p+De*C+Le*K+Ne*ve,e[14]=Te*d+De*D+Le*W+Ne*pe,e[15]=Te*y+De*V+Le*oe+Ne*we,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var Dl,mc=Mi;function Tf(e,t,i){var l=t[0],p=t[1],d=t[2],y=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*y,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*y,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*y,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*y,e}Dl=new rr(3),rr!=Float32Array&&(Dl[0]=0,Dl[1]=0,Dl[2]=0),function(){var e=new rr(4);rr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var kd=(function(){var e=new rr(2);rr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Cl)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new li(i)},t.prototype.queryRadius=function(i){var l=i;return Za("circle-radius",this,l)+Za("circle-stroke-width",this,l)+$i(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,y,I,C,D){for(var V=bs(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),F=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),K=this.paint.get("circle-pitch-alignment")==="map",W=K?V:function(He,Qe){return He.map(function(gt){return xs(gt,Qe)})}(V,D),oe=K?F*C:F,ue=0,ve=d;ue<ve.length;ue+=1)for(var pe=0,we=ve[ue];pe<we.length;pe+=1){var Te=we[pe],De=K?Te:xs(Te,D),Le=oe,Ne=Tf([],[Te.x,Te.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Le*=Ne[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Le*=I.cameraToCenterDistance/Ne[3]),xi(W,De,Le))return!0}return!1},t}(ra));function xs(e,t){var i=Tf([],[e.x,e.y,0,1],t);return new N(i[0]/i[3],i[1]/i[3])}var vu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(li);function yu(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function Xs(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=yu({},{width:l,height:p},i);zp(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function zp(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var y=e.data,I=t.data,C=0;C<p.height;C++)for(var D=((i.y+C)*e.width+i.x)*d,V=((l.y+C)*t.width+l.x)*d,F=0;F<p.width*d;F++)I[V+F]=y[D+F];return t}ot("HeatmapBucket",vu,{omit:["layers"]});var vc=function(e,t){yu(this,e,1,t)};vc.prototype.resize=function(e){Xs(this,e,1)},vc.prototype.clone=function(){return new vc({width:this.width,height:this.height},new Uint8Array(this.data))},vc.copy=function(e,t,i,l,p){zp(e,t,i,l,p,1)};var ga=function(e,t){yu(this,e,4,t)};ga.prototype.resize=function(e){Xs(this,e,4)},ga.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},ga.prototype.clone=function(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))},ga.copy=function(e,t,i,l,p){zp(e,t,i,l,p,4)},ot("AlphaImage",vc),ot("RGBAImage",ga);var hh={paint:new In({"heatmap-radius":new pt(H.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pt(H.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yt(H.paint_heatmap["heatmap-intensity"]),"heatmap-color":new no(H.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yt(H.paint_heatmap["heatmap-opacity"])})};function mv(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new ga({width:i,height:l}),d=function(oe,ue,ve){t[e.evaluationKey]=ve;var pe=e.expression.evaluate(t);p.data[oe+ue+0]=Math.floor(255*pe.r/pe.a),p.data[oe+ue+1]=Math.floor(255*pe.g/pe.a),p.data[oe+ue+2]=Math.floor(255*pe.b/pe.a),p.data[oe+ue+3]=Math.floor(255*pe.a)};if(e.clips)for(var y=0,I=0;y<l;++y,I+=4*i)for(var C=0,D=0;C<i;C++,D+=4){var V=C/(i-1),F=e.clips[y];d(I,D,F.start*(1-V)+F.end*V)}else for(var K=0,W=0;K<i;K++,W+=4)d(0,W,K/(i-1));return p}var gu=function(e){function t(i){e.call(this,i,hh),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new vu(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=mv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(ra),Ws={paint:new In({"hillshade-illumination-direction":new yt(H.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yt(H.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yt(H.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yt(H.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yt(H.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yt(H.paint_hillshade["hillshade-accent-color"])})},_u=function(e){function t(i){e.call(this,i,Ws)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(ra),Yy=Ji([{name:"a_pos",components:2,type:"Int16"}],4).members,yc=Af,m0=Af;function Af(e,t,i){i=i||2;var l,p,d,y,I,C,D,V=t&&t.length,F=V?t[0]*i:e.length,K=ph(e,0,F,i,!0),W=[];if(!K||K.next===K.prev)return W;if(V&&(K=function(ue,ve,pe,we){var Te,De,Le,Ne=[];for(Te=0,De=ve.length;Te<De;Te++)(Le=ph(ue,ve[Te]*we,Te<De-1?ve[Te+1]*we:ue.length,we,!1))===Le.next&&(Le.steiner=!0),Ne.push(Dp(Le));for(Ne.sort(fh),Te=0;Te<Ne.length;Te++)u_(Ne[Te],pe),pe=Mo(pe,pe.next);return pe}(e,t,K,i)),e.length>80*i){l=d=e[0],p=y=e[1];for(var oe=i;oe<F;oe+=i)(I=e[oe])<l&&(l=I),(C=e[oe+1])<p&&(p=C),I>d&&(d=I),C>y&&(y=C);D=(D=Math.max(d-l,y-p))!==0?1/D:0}return Pp(K,W,i,l,p,D),W}function ph(e,t,i,l,p){var d,y;if(p===zd(e,t,i,l)>0)for(d=t;d<i;d+=l)y=vv(d,e[d],e[d+1],y);else for(d=i-l;d>=t;d-=l)y=vv(d,e[d],e[d+1],y);return y&&Pf(y,y.next)&&(xu(y),y=y.next),y}function Mo(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!Pf(l,l.next)&&Gi(l.prev,l,l.next)!==0)l=l.next;else{if(xu(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function Pp(e,t,i,l,p,d,y){if(e){!y&&d&&function(V,F,K,W){var oe=V;do oe.z===null&&(oe.z=bu(oe.x,oe.y,F,K,W)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==V);oe.prevZ.nextZ=null,oe.prevZ=null,function(ue){var ve,pe,we,Te,De,Le,Ne,He,Qe=1;do{for(pe=ue,ue=null,De=null,Le=0;pe;){for(Le++,we=pe,Ne=0,ve=0;ve<Qe&&(Ne++,we=we.nextZ);ve++);for(He=Qe;Ne>0||He>0&&we;)Ne!==0&&(He===0||!we||pe.z<=we.z)?(Te=pe,pe=pe.nextZ,Ne--):(Te=we,we=we.nextZ,He--),De?De.nextZ=Te:ue=Te,Te.prevZ=De,De=Te;pe=we}De.nextZ=null,Qe*=2}while(Le>1)}(oe)}(e,l,p,d);for(var I,C,D=e;e.prev!==e.next;)if(I=e.prev,C=e.next,d?Id(e,l,p,d):Cp(e))t.push(I.i/i),t.push(e.i/i),t.push(C.i/i),xu(e),e=C.next,D=C.next;else if((e=C)===D){y?y===1?Pp(e=Jy(Mo(e),t,i),t,i,l,p,d,2):y===2&&Qy(e,t,i,l,p,d):Pp(Mo(e),t,i,l,p,d,1);break}}}function Cp(e){var t=e.prev,i=e,l=e.next;if(Gi(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(Ga(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&Gi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Id(e,t,i,l){var p=e.prev,d=e,y=e.next;if(Gi(p,d,y)>=0)return!1;for(var I=p.x>d.x?p.x>y.x?p.x:y.x:d.x>y.x?d.x:y.x,C=p.y>d.y?p.y>y.y?p.y:y.y:d.y>y.y?d.y:y.y,D=bu(p.x<d.x?p.x<y.x?p.x:y.x:d.x<y.x?d.x:y.x,p.y<d.y?p.y<y.y?p.y:y.y:d.y<y.y?d.y:y.y,t,i,l),V=bu(I,C,t,i,l),F=e.prevZ,K=e.nextZ;F&&F.z>=D&&K&&K.z<=V;){if(F!==e.prev&&F!==e.next&&Ga(p.x,p.y,d.x,d.y,y.x,y.y,F.x,F.y)&&Gi(F.prev,F,F.next)>=0||(F=F.prevZ,K!==e.prev&&K!==e.next&&Ga(p.x,p.y,d.x,d.y,y.x,y.y,K.x,K.y)&&Gi(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;F&&F.z>=D;){if(F!==e.prev&&F!==e.next&&Ga(p.x,p.y,d.x,d.y,y.x,y.y,F.x,F.y)&&Gi(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;K&&K.z<=V;){if(K!==e.prev&&K!==e.next&&Ga(p.x,p.y,d.x,d.y,y.x,y.y,K.x,K.y)&&Gi(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function Jy(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!Pf(p,d)&&gc(p,l,l.next,d)&&_c(p,d)&&_c(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),xu(l),xu(l.next),l=e=d),l=l.next}while(l!==e);return Mo(l)}function Qy(e,t,i,l,p,d){var y=e;do{for(var I=y.next.next;I!==y.prev;){if(y.i!==I.i&&zf(y,I)){var C=Td(y,I);return y=Mo(y,y.next),C=Mo(C,C.next),Pp(y,t,i,l,p,d),void Pp(C,t,i,l,p,d)}I=I.next}y=y.next}while(y!==e)}function fh(e,t){return e.x-t.x}function u_(e,t){if(t=function(l,p){var d,y=p,I=l.x,C=l.y,D=-1/0;do{if(C<=y.y&&C>=y.next.y&&y.next.y!==y.y){var V=y.x+(C-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(V<=I&&V>D){if(D=V,V===I){if(C===y.y)return y;if(C===y.next.y)return y.next}d=y.x<y.next.x?y:y.next}}y=y.next}while(y!==p);if(!d)return null;if(I===D)return d;var F,K=d,W=d.x,oe=d.y,ue=1/0;y=d;do I>=y.x&&y.x>=W&&I!==y.x&&Ga(C<oe?I:D,C,W,oe,C<oe?D:I,C,y.x,y.y)&&(F=Math.abs(C-y.y)/(I-y.x),_c(y,l)&&(F<ue||F===ue&&(y.x>d.x||y.x===d.x&&$y(d,y)))&&(d=y,ue=F)),y=y.next;while(y!==K);return d}(e,t)){var i=Td(t,e);Mo(t,t.next),Mo(i,i.next)}}function $y(e,t){return Gi(e.prev,e,t.prev)<0&&Gi(t.next,e,e.next)<0}function bu(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Dp(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Ga(e,t,i,l,p,d,y,I){return(p-y)*(t-I)-(e-y)*(d-I)>=0&&(e-y)*(l-I)-(i-y)*(t-I)>=0&&(i-y)*(d-I)-(p-y)*(l-I)>=0}function zf(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&gc(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(_c(e,t)&&_c(t,e)&&function(i,l){var p=i,d=!1,y=(i.x+l.x)/2,I=(i.y+l.y)/2;do p.y>I!=p.next.y>I&&p.next.y!==p.y&&y<(p.next.x-p.x)*(I-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(Gi(e.prev,e,t.prev)||Gi(e,t.prev,t))||Pf(e,t)&&Gi(e.prev,e,e.next)>0&&Gi(t.prev,t,t.next)>0)}function Gi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Pf(e,t){return e.x===t.x&&e.y===t.y}function gc(e,t,i,l){var p=Cf(Gi(e,t,i)),d=Cf(Gi(e,t,l)),y=Cf(Gi(i,l,e)),I=Cf(Gi(i,l,t));return p!==d&&y!==I||!(p!==0||!Lo(e,i,t))||!(d!==0||!Lo(e,l,t))||!(y!==0||!Lo(i,e,l))||!(I!==0||!Lo(i,t,l))}function Lo(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Cf(e){return e>0?1:e<0?-1:0}function _c(e,t){return Gi(e.prev,e,e.next)<0?Gi(e,t,e.next)>=0&&Gi(e,e.prev,t)>=0:Gi(e,t,e.prev)<0||Gi(e,e.next,t)<0}function Td(e,t){var i=new Ad(e.i,e.x,e.y),l=new Ad(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function vv(e,t,i,l){var p=new Ad(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function xu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ad(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zd(e,t,i,l){for(var p=0,d=t,y=i-l;d<i;d+=l)p+=(e[y]-e[d])*(e[d+1]+e[y+1]),y=d;return p}function lo(e,t,i,l,p){(function d(y,I,C,D,V){for(;D>C;){if(D-C>600){var F=D-C+1,K=I-C+1,W=Math.log(F),oe=.5*Math.exp(2*W/3),ue=.5*Math.sqrt(W*oe*(F-oe)/F)*(K-F/2<0?-1:1);d(y,I,Math.max(C,Math.floor(I-K*oe/F+ue)),Math.min(D,Math.floor(I+(F-K)*oe/F+ue)),V)}var ve=y[I],pe=C,we=D;for(Ro(y,C,I),V(y[D],ve)>0&&Ro(y,C,D);pe<we;){for(Ro(y,pe,we),pe++,we--;V(y[pe],ve)<0;)pe++;for(;V(y[we],ve)>0;)we--}V(y[C],ve)===0?Ro(y,C,we):Ro(y,++we,D),we<=I&&(C=we+1),I<=we&&(D=we-1)}})(e,t,i||0,l||e.length-1,p||Ys)}function Ro(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function Ys(e,t){return e<t?-1:e>t?1:0}function ws(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],y=0;y<i;y++){var I=at(e[y]);I!==0&&(e[y].area=Math.abs(I),p===void 0&&(p=I<0),p===I<0?(l&&d.push(l),l=[e[y]]):l.push(e[y]))}if(l&&d.push(l),t>1)for(var C=0;C<d.length;C++)d[C].length<=t||(lo(d[C],t,1,d[C].length-1,eg),d[C]=d[C].slice(0,t));return d}function eg(e,t){return t.area-e.area}function bc(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,y=t;d<y.length;d+=1){var I=y[d].paint.get(e+"-pattern");I.isConstant()||(p=!0);var C=I.constantOr(null);C&&(p=!0,l[C.to]=!0,l[C.from]=!0)}return p}function tg(e,t,i,l,p){for(var d=p.patternDependencies,y=0,I=t;y<I.length;y+=1){var C=I[y],D=C.paint.get(e+"-pattern").value;if(D.kind!=="constant"){var V=D.evaluate({zoom:l-1},i,{},p.availableImages),F=D.evaluate({zoom:l},i,{},p.availableImages),K=D.evaluate({zoom:l+1},i,{},p.availableImages);F=F&&F.name?F.name:F,K=K&&K.name?K.name:K,d[V=V&&V.name?V.name:V]=!0,d[F]=!0,d[K]=!0,i.patterns[C.id]={min:V,mid:F,max:K}}}return i}Af.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(zd(e,0,p?t[0]*i:e.length,i));if(p)for(var y=0,I=t.length;y<I;y++)d-=Math.abs(zd(e,t[y]*i,y<I-1?t[y+1]*i:e.length,i));var C=0;for(y=0;y<l.length;y+=3){var D=l[y]*i,V=l[y+1]*i,F=l[y+2]*i;C+=Math.abs((e[D]-e[F])*(e[V+1]-e[D+1])-(e[D]-e[V])*(e[F+1]-e[D+1]))}return d===0&&C===0?0:Math.abs((C-d)/d)},Af.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var y=0;y<t;y++)i.vertices.push(e[p][d][y]);p>0&&i.holes.push(l+=e[p-1].length)}return i},yc.default=m0;var Es=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zo,this.indexArray=new Zs,this.indexArray2=new dc,this.programConfigurations=new xt(e.layers,e.zoom),this.segments=new Q,this.segments2=new Q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Es.prototype.populate=function(e,t,i){this.hasPattern=bc("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,y=e;d<y.length;d+=1){var I=y[d],C=I.feature,D=I.id,V=I.index,F=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=ki(C,K);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),W,i)){var oe=l?l.evaluate(W,{},i,t.availableImages):void 0,ue={id:D,properties:C.properties,type:C.type,sourceLayerIndex:F,index:V,geometry:K?W.geometry:Xr(C),patterns:{},sortKey:oe};p.push(ue)}}l&&p.sort(function(He,Qe){return He.sortKey-Qe.sortKey});for(var ve=0,pe=p;ve<pe.length;ve+=1){var we=pe[ve],Te=we.geometry,De=we.index,Le=we.sourceLayerIndex;if(this.hasPattern){var Ne=tg("fill",this.layers,we,this.zoom,t);this.patternFeatures.push(Ne)}else this.addFeature(we,Te,De,i,{});t.featureIndex.insert(e[De].feature,Te,De,Le,this.index)}},Es.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Es.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Es.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Es.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Es.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yy),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Es.prototype.addFeature=function(e,t,i,l,p){for(var d=0,y=ws(t,500);d<y.length;d+=1){for(var I=y[d],C=0,D=0,V=I;D<V.length;D+=1)C+=V[D].length;for(var F=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),K=F.vertexLength,W=[],oe=[],ue=0,ve=I;ue<ve.length;ue+=1){var pe=ve[ue];if(pe.length!==0){pe!==I[0]&&oe.push(W.length/2);var we=this.segments2.prepareSegment(pe.length,this.layoutVertexArray,this.indexArray2),Te=we.vertexLength;this.layoutVertexArray.emplaceBack(pe[0].x,pe[0].y),this.indexArray2.emplaceBack(Te+pe.length-1,Te),W.push(pe[0].x),W.push(pe[0].y);for(var De=1;De<pe.length;De++)this.layoutVertexArray.emplaceBack(pe[De].x,pe[De].y),this.indexArray2.emplaceBack(Te+De-1,Te+De),W.push(pe[De].x),W.push(pe[De].y);we.vertexLength+=pe.length,we.primitiveLength+=pe.length}}for(var Le=yc(W,oe),Ne=0;Ne<Le.length;Ne+=3)this.indexArray.emplaceBack(K+Le[Ne],K+Le[Ne+1],K+Le[Ne+2]);F.vertexLength+=C,F.primitiveLength+=Le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ot("FillBucket",Es,{omit:["layers","patternFeatures"]});var rg=new In({"fill-sort-key":new pt(H.layout_fill["fill-sort-key"])}),Mp={paint:new In({"fill-antialias":new yt(H.paint_fill["fill-antialias"]),"fill-opacity":new pt(H.paint_fill["fill-opacity"]),"fill-color":new pt(H.paint_fill["fill-color"]),"fill-outline-color":new pt(H.paint_fill["fill-outline-color"]),"fill-translate":new yt(H.paint_fill["fill-translate"]),"fill-translate-anchor":new yt(H.paint_fill["fill-translate-anchor"]),"fill-pattern":new Na(H.paint_fill["fill-pattern"])}),layout:rg},Lp=function(e){function t(i){e.call(this,i,Mp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Es(i)},t.prototype.queryRadius=function(){return $i(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,y,I,C){return An(bs(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),d)},t.prototype.isTileClipped=function(){return!0},t}(ra),ig=Ji([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,dh=wu;function wu(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(ng,this,t)}function ng(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var y=p._keys[l.readVarint()],I=p._values[l.readVarint()];p.properties[y]=I}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function ag(e){for(var t,i,l=0,p=0,d=e.length,y=d-1;p<d;y=p++)l+=((i=e[y]).x-(t=e[p]).x)*(t.y+i.y);return l}wu.types=["Unknown","Point","LineString","Polygon"],wu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,y=0,I=[];e.pos<i;){if(p<=0){var C=e.readVarint();l=7&C,p=C>>3}if(p--,l===1||l===2)d+=e.readSVarint(),y+=e.readSVarint(),l===1&&(t&&I.push(t),t=[]),t.push(new N(d,y));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&I.push(t),I},wu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,y=1/0,I=-1/0,C=1/0,D=-1/0;e.pos<t;){if(l<=0){var V=e.readVarint();i=7&V,l=V>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<y&&(y=p),p>I&&(I=p),(d+=e.readSVarint())<C&&(C=d),d>D&&(D=d);else if(i!==7)throw new Error("unknown command "+i)}return[y,C,I,D]},wu.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),y=this.extent*e,I=this.extent*t,C=this.loadGeometry(),D=wu.types[this.type];function V(W){for(var oe=0;oe<W.length;oe++){var ue=W[oe];W[oe]=[360*(ue.x+y)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+I)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(l=0;l<C.length;l++)F[l]=C[l][0];V(C=F);break;case 2:for(l=0;l<C.length;l++)V(C[l]);break;case 3:for(C=function(W){var oe=W.length;if(oe<=1)return[W];for(var ue,ve,pe=[],we=0;we<oe;we++){var Te=ag(W[we]);Te!==0&&(ve===void 0&&(ve=Te<0),ve===Te<0?(ue&&pe.push(ue),ue=[W[we]]):ue.push(W[we]))}return ue&&pe.push(ue),pe}(C),l=0;l<C.length;l++)for(p=0;p<C[l].length;p++)V(C[l][p])}C.length===1?C=C[0]:D="Multi"+D;var K={type:"Feature",geometry:{type:D,coordinates:C},properties:this.properties};return"id"in this&&(K.id=this.id),K};var xc=yv;function yv(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Eu,this,t),this.length=this._features.length}function Eu(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var y=l.readVarint()>>3;p=y===1?l.readString():y===2?l.readFloat():y===3?l.readDouble():y===4?l.readVarint64():y===5?l.readVarint():y===6?l.readSVarint():y===7?l.readBoolean():null}return p}(i))}function Js(e,t,i){if(e===3){var l=new xc(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}yv.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new dh(this._pbf,t,this.extent,this._keys,this._values)};var Ka={VectorTile:function(e,t){this.layers=e.readFields(Js,{},t)},VectorTileFeature:dh,VectorTileLayer:xc},og=Ka.VectorTileFeature.types,wc=Math.pow(2,13);function Pd(e,t,i,l,p,d,y,I){e.emplaceBack(t,i,2*Math.floor(l*wc)+y,p*wc*2,d*wc*2,Math.round(I))}var Ss=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ms,this.indexArray=new Zs,this.programConfigurations=new xt(e.layers,e.zoom),this.segments=new Q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Rp(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Ss.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=bc("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],y=d.feature,I=d.id,C=d.index,D=d.sourceLayerIndex,V=this.layers[0]._featureFilter.needGeometry,F=ki(y,V);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),F,i)){var K={id:I,sourceLayerIndex:D,index:C,geometry:V?F.geometry:Xr(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(tg("fill-extrusion",this.layers,K,this.zoom,t)):this.addFeature(K,K.geometry,C,i,{}),t.featureIndex.insert(y,K.geometry,C,D,this.index,!0)}}},Ss.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Ss.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ss.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ss.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ig),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ss.prototype.addFeature=function(e,t,i,l,p){for(var d=0,y=ws(t,500);d<y.length;d+=1){for(var I=y[d],C=0,D=0,V=I;D<V.length;D+=1)C+=V[D].length;for(var F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),K=0,W=I;K<W.length;K+=1){var oe=W[K];if(oe.length!==0&&!((ir=oe).every(function(Gt){return Gt.x<0})||ir.every(function(Gt){return Gt.x>8192})||ir.every(function(Gt){return Gt.y<0})||ir.every(function(Gt){return Gt.y>8192})))for(var ue=0,ve=0;ve<oe.length;ve++){var pe=oe[ve];if(ve>=1){var we=oe[ve-1];if(!Rp(pe,we)){F.vertexLength+4>Q.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Te=pe.sub(we)._perp()._unit(),De=we.dist(pe);ue+De>32768&&(ue=0),Pd(this.layoutVertexArray,pe.x,pe.y,Te.x,Te.y,0,0,ue),Pd(this.layoutVertexArray,pe.x,pe.y,Te.x,Te.y,0,1,ue),Pd(this.layoutVertexArray,we.x,we.y,Te.x,Te.y,0,0,ue+=De),Pd(this.layoutVertexArray,we.x,we.y,Te.x,Te.y,0,1,ue);var Le=F.vertexLength;this.indexArray.emplaceBack(Le,Le+2,Le+1),this.indexArray.emplaceBack(Le+1,Le+2,Le+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+C>Q.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),og[e.type]==="Polygon"){for(var Ne=[],He=[],Qe=F.vertexLength,gt=0,$e=I;gt<$e.length;gt+=1){var vt=$e[gt];if(vt.length!==0){vt!==I[0]&&He.push(Ne.length/2);for(var rt=0;rt<vt.length;rt++){var Vt=vt[rt];Pd(this.layoutVertexArray,Vt.x,Vt.y,0,0,1,1,0),Ne.push(Vt.x),Ne.push(Vt.y)}}}for(var Pt=yc(Ne,He),ft=0;ft<Pt.length;ft+=3)this.indexArray.emplaceBack(Qe+Pt[ft],Qe+Pt[ft+2],Qe+Pt[ft+1]);F.primitiveLength+=Pt.length/3,F.vertexLength+=C}}var ir;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ot("FillExtrusionBucket",Ss,{omit:["layers","features"]});var Bp={paint:new In({"fill-extrusion-opacity":new yt(H["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pt(H["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yt(H["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yt(H["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Na(H["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pt(H["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pt(H["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yt(H["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},sg=function(e){function t(i){e.call(this,i,Bp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Ss(i)},t.prototype.queryRadius=function(){return $i(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,y,I,C,D){var V=bs(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),F=this.paint.get("fill-extrusion-height").evaluate(l,p),K=this.paint.get("fill-extrusion-base").evaluate(l,p),W=function(ue,ve,pe,we){for(var Te=[],De=0,Le=ue;De<Le.length;De+=1){var Ne=Le[De],He=[Ne.x,Ne.y,0,1];Tf(He,He,ve),Te.push(new N(He[0]/He[3],He[1]/He[3]))}return Te}(V,D),oe=function(ue,ve,pe,we){for(var Te=[],De=[],Le=we[8]*ve,Ne=we[9]*ve,He=we[10]*ve,Qe=we[11]*ve,gt=we[8]*pe,$e=we[9]*pe,vt=we[10]*pe,rt=we[11]*pe,Vt=0,Pt=ue;Vt<Pt.length;Vt+=1){for(var ft=[],ir=[],Gt=0,er=Pt[Vt];Gt<er.length;Gt+=1){var _t=er[Gt],yr=_t.x,Rr=_t.y,ui=we[0]*yr+we[4]*Rr+we[12],vi=we[1]*yr+we[5]*Rr+we[13],$r=we[2]*yr+we[6]*Rr+we[14],Zr=we[3]*yr+we[7]*Rr+we[15],tn=$r+He,ei=Zr+Qe,yi=ui+gt,ci=vi+$e,Wn=$r+vt,ti=Zr+rt,Nn=new N((ui+Le)/ei,(vi+Ne)/ei);Nn.z=tn/ei,ft.push(Nn);var nr=new N(yi/ti,ci/ti);nr.z=Wn/ti,ir.push(nr)}Te.push(ft),De.push(ir)}return[Te,De]}(d,K,F,D);return function(ue,ve,pe){var we=1/0;An(pe,ve)&&(we=Df(pe,ve[0]));for(var Te=0;Te<ve.length;Te++)for(var De=ve[Te],Le=ue[Te],Ne=0;Ne<De.length-1;Ne++){var He=De[Ne],Qe=[He,De[Ne+1],Le[Ne+1],Le[Ne],He];ia(pe,Qe)&&(we=Math.min(we,Df(pe,Qe)))}return we!==1/0&&we}(oe[0],oe[1],W)},t}(ra);function Ml(e,t){return e.x*t.x+e.y*t.y}function Df(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],y=e[0],I=i.sub(p),C=d.sub(p),D=y.sub(p),V=Ml(I,I),F=Ml(I,C),K=Ml(C,C),W=Ml(D,I),oe=Ml(D,C),ue=V*K-F*F,ve=(K*W-F*oe)/ue,pe=(V*oe-F*W)/ue,we=p.z*(1-ve-pe)+i.z*ve+d.z*pe;if(isFinite(we))return we}return 1/0}for(var Te=1/0,De=0,Le=t;De<Le.length;De+=1)Te=Math.min(Te,Le[De].z);return Te}var lg=Ji([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ug=Ji([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,mh=Ka.VectorTileFeature.types,cg=Math.cos(Math.PI/180*37.5),Ll=Math.pow(2,14)/.5,wi=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new bi,this.layoutVertexArray2=new Ta,this.indexArray=new Zs,this.programConfigurations=new xt(e.layers,e.zoom),this.segments=new Q,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};wi.prototype.populate=function(e,t,i){this.hasPattern=bc("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,y=e;d<y.length;d+=1){var I=y[d],C=I.feature,D=I.id,V=I.index,F=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=ki(C,K);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),W,i)){var oe=l?l.evaluate(W,{},i):void 0,ue={id:D,properties:C.properties,type:C.type,sourceLayerIndex:F,index:V,geometry:K?W.geometry:Xr(C),patterns:{},sortKey:oe};p.push(ue)}}l&&p.sort(function(He,Qe){return He.sortKey-Qe.sortKey});for(var ve=0,pe=p;ve<pe.length;ve+=1){var we=pe[ve],Te=we.geometry,De=we.index,Le=we.sourceLayerIndex;if(this.hasPattern){var Ne=tg("line",this.layers,we,this.zoom,t);this.patternFeatures.push(Ne)}else this.addFeature(we,Te,De,i,{});t.featureIndex.insert(e[De].feature,Te,De,Le,this.index)}},wi.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},wi.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},wi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wi.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ug)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,lg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wi.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},wi.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,y=d.get("line-join").evaluate(e,{}),I=d.get("line-cap"),C=d.get("line-miter-limit"),D=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var V=0,F=t;V<F.length;V+=1)this.addLine(F[V],e,y,I,C,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},wi.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var y=0;y<e.length-1;y++)this.totalDistance+=e[y].dist(e[y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var I=mh[t.type]==="Polygon",C=e.length;C>=2&&e[C-1].equals(e[C-2]);)C--;for(var D=0;D<C-1&&e[D].equals(e[D+1]);)D++;if(!(C<(I?3:2))){i==="bevel"&&(p=1.05);var V,F=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),W=void 0,oe=void 0,ue=void 0,ve=void 0;this.e1=this.e2=-1,I&&(ve=e[D].sub(V=e[C-2])._unit()._perp());for(var pe=D;pe<C;pe++)if(!(oe=pe===C-1?I?e[D+1]:void 0:e[pe+1])||!e[pe].equals(oe)){ve&&(ue=ve),V&&(W=V),V=e[pe],ve=oe?oe.sub(V)._unit()._perp():ue;var we=(ue=ue||ve).add(ve);we.x===0&&we.y===0||we._unit();var Te=ue.x*ve.x+ue.y*ve.y,De=we.x*ve.x+we.y*ve.y,Le=De!==0?1/De:1/0,Ne=2*Math.sqrt(2-2*De),He=De<cg&&W&&oe,Qe=ue.x*ve.y-ue.y*ve.x>0;if(He&&pe>D){var gt=V.dist(W);if(gt>2*F){var $e=V.sub(V.sub(W)._mult(F/gt)._round());this.updateDistance(W,$e),this.addCurrentVertex($e,ue,0,0,K),W=$e}}var vt=W&&oe,rt=vt?i:I?"butt":l;if(vt&&rt==="round"&&(Le<d?rt="miter":Le<=2&&(rt="fakeround")),rt==="miter"&&Le>p&&(rt="bevel"),rt==="bevel"&&(Le>2&&(rt="flipbevel"),Le<p&&(rt="miter")),W&&this.updateDistance(W,V),rt==="miter")we._mult(Le),this.addCurrentVertex(V,we,0,0,K);else if(rt==="flipbevel"){if(Le>100)we=ve.mult(-1);else{var Vt=Le*ue.add(ve).mag()/ue.sub(ve).mag();we._perp()._mult(Vt*(Qe?-1:1))}this.addCurrentVertex(V,we,0,0,K),this.addCurrentVertex(V,we.mult(-1),0,0,K)}else if(rt==="bevel"||rt==="fakeround"){var Pt=-Math.sqrt(Le*Le-1),ft=Qe?Pt:0,ir=Qe?0:Pt;if(W&&this.addCurrentVertex(V,ue,ft,ir,K),rt==="fakeround")for(var Gt=Math.round(180*Ne/Math.PI/20),er=1;er<Gt;er++){var _t=er/Gt;if(_t!==.5){var yr=_t-.5;_t+=_t*yr*(_t-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*yr*yr+(.848013+Te*(.215638*Te-1.06021)))}var Rr=ve.sub(ue)._mult(_t)._add(ue)._unit()._mult(Qe?-1:1);this.addHalfVertex(V,Rr.x,Rr.y,!1,Qe,0,K)}oe&&this.addCurrentVertex(V,ve,-ft,-ir,K)}else if(rt==="butt")this.addCurrentVertex(V,we,0,0,K);else if(rt==="square"){var ui=W?1:-1;this.addCurrentVertex(V,we,ui,ui,K)}else rt==="round"&&(W&&(this.addCurrentVertex(V,ue,0,0,K),this.addCurrentVertex(V,ue,1,1,K,!0)),oe&&(this.addCurrentVertex(V,ve,-1,-1,K,!0),this.addCurrentVertex(V,ve,0,0,K)));if(He&&pe<C-1){var vi=V.dist(oe);if(vi>2*F){var $r=V.add(oe.sub(V)._mult(F/vi)._round());this.updateDistance(V,$r),this.addCurrentVertex($r,ve,0,0,K),V=$r}}}}},wi.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var y=t.y*l-t.x,I=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,y,I,d,!0,-l,p),this.distance>Ll/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},wi.prototype.addHalfVertex=function(e,t,i,l,p,d,y){var I=.5*(this.lineClips?this.scaledDistance*(Ll-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),y.primitiveLength++),p?this.e2=C:this.e1=C},wi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},wi.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ot("LineBucket",wi,{omit:["layers","patternFeatures"]});var Qs=new In({"line-cap":new yt(H.layout_line["line-cap"]),"line-join":new pt(H.layout_line["line-join"]),"line-miter-limit":new yt(H.layout_line["line-miter-limit"]),"line-round-limit":new yt(H.layout_line["line-round-limit"]),"line-sort-key":new pt(H.layout_line["line-sort-key"])}),gv={paint:new In({"line-opacity":new pt(H.paint_line["line-opacity"]),"line-color":new pt(H.paint_line["line-color"]),"line-translate":new yt(H.paint_line["line-translate"]),"line-translate-anchor":new yt(H.paint_line["line-translate-anchor"]),"line-width":new pt(H.paint_line["line-width"]),"line-gap-width":new pt(H.paint_line["line-gap-width"]),"line-offset":new pt(H.paint_line["line-offset"]),"line-blur":new pt(H.paint_line["line-blur"]),"line-dasharray":new un(H.paint_line["line-dasharray"]),"line-pattern":new Na(H.paint_line["line-pattern"]),"line-gradient":new no(H.paint_line["line-gradient"])}),layout:Qs},vh=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new Wt(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=je({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(pt))(gv.paint.properties["line-width"].specification);vh.useIntegerZoom=!0;var v0=function(e){function t(i){e.call(this,i,gv),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Rn,this.gradientVersion=(this.gradientVersion+1)%fe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=vh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new wi(i)},t.prototype.queryRadius=function(i){var l=i,p=_v(Za("line-width",this,l),Za("line-gap-width",this,l)),d=Za("line-offset",this,l);return p/2+Math.abs(d)+$i(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,y,I,C){var D=bs(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),V=C/2*_v(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),F=this.paint.get("line-offset").evaluate(l,p);return F&&(d=function(K,W){for(var oe=[],ue=new N(0,0),ve=0;ve<K.length;ve++){for(var pe=K[ve],we=[],Te=0;Te<pe.length;Te++){var De=pe[Te],Le=pe[Te+1],Ne=Te===0?ue:De.sub(pe[Te-1])._unit()._perp(),He=Te===pe.length-1?ue:Le.sub(De)._unit()._perp(),Qe=Ne._add(He)._unit();Qe._mult(1/(Qe.x*He.x+Qe.y*He.y)),we.push(Qe._mult(W)._add(De))}oe.push(we)}return oe}(d,F*C)),function(K,W,oe){for(var ue=0;ue<W.length;ue++){var ve=W[ue];if(K.length>=3){for(var pe=0;pe<ve.length;pe++)if(Do(K,ve[pe]))return!0}if(qa(K,ve,oe))return!0}return!1}(D,d,V)},t.prototype.isTileClipped=function(){return!0},t}(ra);function _v(e,t){return t>0?t+2*e:e}var hg=Ji([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Op=Ji([{name:"a_projected_pos",components:3,type:"Float32"}],4),Vp=(Ji([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ji([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),bv=(Ji([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ji([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Fp=Ji([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Cd(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,y){var I=d.layout.get("text-transform").evaluate(y,{});return I==="uppercase"?p=p.toLocaleUpperCase():I==="lowercase"&&(p=p.toLocaleLowerCase()),Fn.applyArabicShaping&&(p=Fn.applyArabicShaping(p)),p}(l.text,t,i)}),e}Ji([{name:"triangle",components:3,type:"Uint16"}]),Ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ji([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ji([{type:"Float32",name:"offsetX"}]),Ji([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Np={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},xv=function(e,t,i,l,p){var d,y,I=8*p-l-1,C=(1<<I)-1,D=C>>1,V=-7,F=i?p-1:0,K=i?-1:1,W=e[t+F];for(F+=K,d=W&(1<<-V)-1,W>>=-V,V+=I;V>0;d=256*d+e[t+F],F+=K,V-=8);for(y=d&(1<<-V)-1,d>>=-V,V+=l;V>0;y=256*y+e[t+F],F+=K,V-=8);if(d===0)d=1-D;else{if(d===C)return y?NaN:1/0*(W?-1:1);y+=Math.pow(2,l),d-=D}return(W?-1:1)*y*Math.pow(2,d-l)},Ec=function(e,t,i,l,p,d){var y,I,C,D=8*d-p-1,V=(1<<D)-1,F=V>>1,K=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=l?0:d-1,oe=l?1:-1,ue=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(I=isNaN(t)?1:0,y=V):(y=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-y))<1&&(y--,C*=2),(t+=y+F>=1?K/C:K*Math.pow(2,1-F))*C>=2&&(y++,C/=2),y+F>=V?(I=0,y=V):y+F>=1?(I=(t*C-1)*Math.pow(2,p),y+=F):(I=t*Math.pow(2,F-1)*Math.pow(2,p),y=0));p>=8;e[i+W]=255&I,W+=oe,I/=256,p-=8);for(y=y<<p|I,D+=p;D>0;e[i+W]=255&y,W+=oe,y/=256,D-=8);e[i+W-oe]|=128*ue},Mf=wr;function wr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}wr.Varint=0,wr.Fixed64=1,wr.Bytes=2,wr.Fixed32=5;var ks=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function na(e){return e.type===wr.Bytes?e.readVarint()+e.pos:e.pos+1}function yh(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function gh(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function y0(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function pg(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Up(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function jp(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function fg(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function qp(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Dd(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function dg(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function mg(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Rl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Zp(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function wv(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function _h(e,t,i){e===1&&i.readMessage(Gp,t)}function Gp(e,t,i){if(e===3){var l=i.readMessage(Bl,{}),p=l.width,d=l.height,y=l.left,I=l.top,C=l.advance;t.push({id:l.id,bitmap:new vc({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:y,top:I,advance:C}})}}function Bl(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function Kp(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(ue,ve){return ve.h-ue.h});for(var y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],I=0,C=0,D=0,V=e;D<V.length;D+=1)for(var F=V[D],K=y.length-1;K>=0;K--){var W=y[K];if(!(F.w>W.w||F.h>W.h)){if(F.x=W.x,F.y=W.y,C=Math.max(C,F.y+F.h),I=Math.max(I,F.x+F.w),F.w===W.w&&F.h===W.h){var oe=y.pop();K<y.length&&(y[K]=oe)}else F.h===W.h?(W.x+=F.w,W.w-=F.w):F.w===W.w?(W.y+=F.h,W.h-=F.h):(y.push({x:W.x+F.w,y:W.y,w:W.w-F.w,h:F.h}),W.y+=F.h,W.h-=F.h);break}}return{w:I,h:C,fill:t/(I*C)||0}}wr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Rl(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=wv(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Rl(this.buf,this.pos)+4294967296*Rl(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Rl(this.buf,this.pos)+4294967296*wv(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=xv(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=xv(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,y){var I,C,D=y.buf;if(I=(112&(C=D[y.pos++]))>>4,C<128||(I|=(127&(C=D[y.pos++]))<<3,C<128)||(I|=(127&(C=D[y.pos++]))<<10,C<128)||(I|=(127&(C=D[y.pos++]))<<17,C<128)||(I|=(127&(C=D[y.pos++]))<<24,C<128)||(I|=(1&(C=D[y.pos++]))<<31,C<128))return yh(p,I,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ks?function(i,l,p){return ks.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",y=l;y<p;){var I,C,D,V=i[y],F=null,K=V>239?4:V>223?3:V>191?2:1;if(y+K>p)break;K===1?V<128&&(F=V):K===2?(192&(I=i[y+1]))==128&&(F=(31&V)<<6|63&I)<=127&&(F=null):K===3?(C=i[y+2],(192&(I=i[y+1]))==128&&(192&C)==128&&((F=(15&V)<<12|(63&I)<<6|63&C)<=2047||F>=55296&&F<=57343)&&(F=null)):K===4&&(C=i[y+2],D=i[y+3],(192&(I=i[y+1]))==128&&(192&C)==128&&(192&D)==128&&((F=(15&V)<<18|(63&I)<<12|(63&C)<<6|63&D)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,K=1):F>65535&&(F-=65536,d+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),d+=String.fromCharCode(F),y+=K}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==wr.Bytes)return e.push(this.readVarint(t));var i=na(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==wr.Bytes)return e.push(this.readSVarint());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==wr.Bytes)return e.push(this.readBoolean());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==wr.Bytes)return e.push(this.readFloat());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==wr.Bytes)return e.push(this.readDouble());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==wr.Bytes)return e.push(this.readFixed32());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==wr.Bytes)return e.push(this.readSFixed32());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==wr.Bytes)return e.push(this.readFixed64());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==wr.Bytes)return e.push(this.readSFixed64());var t=na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===wr.Varint)for(;this.buf[this.pos++]>127;);else if(t===wr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===wr.Fixed32)this.pos+=4;else{if(t!==wr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Zp(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Zp(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Zp(this.buf,-1&e,this.pos),Zp(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Zp(this.buf,-1&e,this.pos),Zp(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,y,I){I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,I.buf[I.pos]=127&(d>>>=7)}(l,0,i),function(d,y){var I=(7&d)<<4;y.buf[y.pos++]|=I|((d>>>=3)?128:0),d&&(y.buf[y.pos++]=127&d|((d>>>=7)?128:0),d&&(y.buf[y.pos++]=127&d|((d>>>=7)?128:0),d&&(y.buf[y.pos++]=127&d|((d>>>=7)?128:0),d&&(y.buf[y.pos++]=127&d|((d>>>=7)?128:0),d&&(y.buf[y.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var y,I,C=0;C<p.length;C++){if((y=p.charCodeAt(C))>55295&&y<57344){if(!I){y>56319||C+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):I=y;continue}if(y<56320){l[d++]=239,l[d++]=191,l[d++]=189,I=y;continue}y=I-55296<<10|y-56320|65536,I=null}else I&&(l[d++]=239,l[d++]=191,l[d++]=189,I=null);y<128?l[d++]=y:(y<2048?l[d++]=y>>6|192:(y<65536?l[d++]=y>>12|224:(l[d++]=y>>18|240,l[d++]=y>>12&63|128),l[d++]=y>>6&63|128),l[d++]=63&y|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&gh(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Ec(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ec(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&gh(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,wr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,y0,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,pg,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,fg,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Up,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,jp,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,qp,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Dd,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,dg,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,mg,t)},writeBytesField:function(e,t){this.writeTag(e,wr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,wr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,wr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,wr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,wr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,wr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,wr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,wr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,wr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,wr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Lf=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,y=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=y,this.version=l},Hp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Hp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Hp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Hp.tlbr.get=function(){return this.tl.concat(this.br)},Hp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Lf.prototype,Hp);var $s=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=Kp(p),y=new ga({width:d.w||1,height:d.h||1});for(var I in e){var C=e[I],D=i[I].paddedRect;ga.copy(C.data,y,{x:0,y:0},{x:D.x+1,y:D.y+1},C.data)}for(var V in t){var F=t[V],K=l[V].paddedRect,W=K.x+1,oe=K.y+1,ue=F.data.width,ve=F.data.height;ga.copy(F.data,y,{x:0,y:0},{x:W,y:oe},F.data),ga.copy(F.data,y,{x:0,y:ve-1},{x:W,y:oe-1},{width:ue,height:1}),ga.copy(F.data,y,{x:0,y:0},{x:W,y:oe+ve},{width:ue,height:1}),ga.copy(F.data,y,{x:ue-1,y:0},{x:W-1,y:oe},{width:1,height:ve}),ga.copy(F.data,y,{x:0,y:0},{x:W+ue,y:oe},{width:1,height:ve})}this.image=y,this.iconPositions=i,this.patternPositions=l};$s.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new Lf(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},$s.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},$s.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},ot("ImagePosition",Lf),ot("ImageAtlas",$s);var en={horizontal:1,vertical:2,horizontalOnly:3},bh=function(){this.scale=1,this.fontStack="",this.imageName=null};bh.forText=function(e,t){var i=new bh;return i.scale=e||1,i.fontStack=t,i},bh.forImage=function(e){var t=new bh;return t.imageName=e,t};var zn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Xp(e,t,i,l,p,d,y,I,C,D,V,F,K,W,oe,ue){var ve,pe=zn.fromFeature(e,p);F===en.vertical&&pe.verticalizePunctuation();var we=Fn.processBidirectionalText,Te=Fn.processStyledBidirectionalText;if(we&&pe.sections.length===1){ve=[];for(var De=0,Le=we(pe.toString(),Bo(pe,D,d,t,l,W,oe));De<Le.length;De+=1){var Ne=Le[De],He=new zn;He.text=Ne,He.sections=pe.sections;for(var Qe=0;Qe<Ne.length;Qe++)He.sectionIndex.push(0);ve.push(He)}}else if(Te){ve=[];for(var gt=0,$e=Te(pe.text,pe.sectionIndex,Bo(pe,D,d,t,l,W,oe));gt<$e.length;gt+=1){var vt=$e[gt],rt=new zn;rt.text=vt[0],rt.sectionIndex=vt[1],rt.sections=pe.sections,ve.push(rt)}}else ve=function(ft,ir){for(var Gt=[],er=ft.text,_t=0,yr=0,Rr=ir;yr<Rr.length;yr+=1){var ui=Rr[yr];Gt.push(ft.substring(_t,ui)),_t=ui}return _t<er.length&&Gt.push(ft.substring(_t,er.length)),Gt}(pe,Bo(pe,D,d,t,l,W,oe));var Vt=[],Pt={positionedLines:Vt,text:pe.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(ft,ir,Gt,er,_t,yr,Rr,ui,vi,$r,Zr,tn){for(var ei=0,yi=-17,ci=0,Wn=0,ti=ui==="right"?1:ui==="left"?0:.5,Nn=0,nr=0,Ir=_t;nr<Ir.length;nr+=1){var gr=Ir[nr];gr.trim();var fr=gr.getMaxScale(),fn=24*(fr-1),dn={positionedGlyphs:[],lineOffset:0};ft.positionedLines[Nn]=dn;var Wr=dn.positionedGlyphs,Li=0;if(gr.length()){for(var Ri=0;Ri<gr.length();Ri++){var _r=gr.getSection(Ri),Vo=gr.getSectionIndex(Ri),co=gr.getCharCode(Ri),al=0,Yr=null,Ha=null,Pn=null,Gl=24,Ac=!(vi===en.horizontal||!Zr&&!js(co)||Zr&&(Rf[co]||(Kl=co,Je.Arabic(Kl)||Je["Arabic Supplement"](Kl)||Je["Arabic Extended-A"](Kl)||Je["Arabic Presentation Forms-A"](Kl)||Je["Arabic Presentation Forms-B"](Kl))));if(_r.imageName){var Dh=er[_r.imageName];if(!Dh)continue;Pn=_r.imageName,ft.iconsInText=ft.iconsInText||!0,Ha=Dh.paddedRect;var Xa=Dh.displaySize;_r.scale=24*_r.scale/tn,al=fn+(24-Xa[1]*_r.scale),Gl=(Yr={width:Xa[0],height:Xa[1],left:1,top:-3,advance:Ac?Xa[1]:Xa[0]}).advance;var Wa=Ac?Xa[0]*_r.scale-24*fr:Xa[1]*_r.scale-24*fr;Wa>0&&Wa>Li&&(Li=Wa)}else{var Nf=Gt[_r.fontStack],Lu=Nf&&Nf[co];if(Lu&&Lu.rect)Ha=Lu.rect,Yr=Lu.metrics;else{var Mh=ir[_r.fontStack],Uf=Mh&&Mh[co];if(!Uf)continue;Yr=Uf.metrics}al=24*(fr-_r.scale)}Ac?(ft.verticalizable=!0,Wr.push({glyph:co,imageName:Pn,x:ei,y:yi+al,vertical:Ac,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:Vo,metrics:Yr,rect:Ha}),ei+=Gl*_r.scale+$r):(Wr.push({glyph:co,imageName:Pn,x:ei,y:yi+al,vertical:Ac,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:Vo,metrics:Yr,rect:Ha}),ei+=Yr.advance*_r.scale+$r)}Wr.length!==0&&(ci=Math.max(ei-$r,ci),vg(Wr,0,Wr.length-1,ti,Li)),ei=0;var zc=yr*fr+Li;dn.lineOffset=Math.max(Li,fn),yi+=zc,Wn=Math.max(zc,Wn),++Nn}else yi+=yr,++Nn}var Kl,tf=yi- -17,_a=el(Rr),Pa=_a.horizontalAlign,Ca=_a.verticalAlign;(function(Fo,jf,Hl,Bd,qf,Xl,Wl,rf,Ru){var Bu,Zf=(jf-Hl)*qf;Bu=Xl!==Wl?-rf*Bd- -17:(-Bd*Ru+.5)*Wl;for(var Lh=0,ol=Fo;Lh<ol.length;Lh+=1)for(var Pc=0,Cc=ol[Lh].positionedGlyphs;Pc<Cc.length;Pc+=1){var Rh=Cc[Pc];Rh.x+=Zf,Rh.y+=Bu}})(ft.positionedLines,ti,Pa,Ca,ci,Wn,yr,tf,_t.length),ft.top+=-Ca*tf,ft.bottom=ft.top+tf,ft.left+=-Pa*ci,ft.right=ft.left+ci}(Pt,t,i,l,ve,y,I,C,F,D,K,ue),!function(ft){for(var ir=0,Gt=ft;ir<Gt.length;ir+=1)if(Gt[ir].positionedGlyphs.length!==0)return!1;return!0}(Vt)&&Pt}zn.fromFeature=function(e,t){for(var i=new zn,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},zn.prototype.length=function(){return this.text.length},zn.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},zn.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},zn.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},zn.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&hc(l)&&!Np[e[i+1]]||p&&hc(p)&&!Np[e[i-1]]||!Np[e[i]]?e[i]:Np[e[i]]}return t}(this.text)},zn.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Rf[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&Rf[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},zn.prototype.substring=function(e,t){var i=new zn;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},zn.prototype.toString=function(){return this.text},zn.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},zn.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(bh.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},zn.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(bh.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}else Ot("Can't add FormattedSection with an empty image.")},zn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Rf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Xn={};function Ev(e,t,i,l,p,d){if(t.imageName){var y=l[t.imageName];return y?y.displaySize[0]*t.scale*24/d+p:0}var I=i[t.fontStack],C=I&&I[e];return C?C.metrics.advance*t.scale+p:0}function Sv(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function aa(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function Ol(e,t,i,l,p,d){for(var y=null,I=Sv(t,i,p,d),C=0,D=l;C<D.length;C+=1){var V=D[C],F=Sv(t-V.x,i,p,d)+V.badness;F<=I&&(y=V,I=F)}return{index:e,x:t,priorBreak:y,badness:I}}function Bo(e,t,i,l,p,d,y){if(d!=="point")return[];if(!e)return[];for(var I,C=[],D=function(ve,pe,we,Te,De,Le){for(var Ne=0,He=0;He<ve.length();He++){var Qe=ve.getSection(He);Ne+=Ev(ve.getCharCode(He),Qe,Te,De,pe,Le)}return Ne/Math.max(1,Math.ceil(Ne/we))}(e,t,i,l,p,y),V=e.text.indexOf("​")>=0,F=0,K=0;K<e.length();K++){var W=e.getSection(K),oe=e.getCharCode(K);if(Rf[oe]||(F+=Ev(oe,W,l,p,t,y)),K<e.length()-1){var ue=!((I=oe)<11904||!(Je["Bopomofo Extended"](I)||Je.Bopomofo(I)||Je["CJK Compatibility Forms"](I)||Je["CJK Compatibility Ideographs"](I)||Je["CJK Compatibility"](I)||Je["CJK Radicals Supplement"](I)||Je["CJK Strokes"](I)||Je["CJK Symbols and Punctuation"](I)||Je["CJK Unified Ideographs Extension A"](I)||Je["CJK Unified Ideographs"](I)||Je["Enclosed CJK Letters and Months"](I)||Je["Halfwidth and Fullwidth Forms"](I)||Je.Hiragana(I)||Je["Ideographic Description Characters"](I)||Je["Kangxi Radicals"](I)||Je["Katakana Phonetic Extensions"](I)||Je.Katakana(I)||Je["Vertical Forms"](I)||Je["Yi Radicals"](I)||Je["Yi Syllables"](I)));(Xn[oe]||ue||W.imageName)&&C.push(Ol(K+1,F,D,C,aa(oe,e.getCharCode(K+1),ue&&V),!1))}}return function ve(pe){return pe?ve(pe.priorBreak).concat(pe.index):[]}(Ol(e.length(),F,D,C,0,!0))}function el(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function vg(e,t,i,l,p){if(l||p)for(var d=e[i],y=(e[i].x+d.metrics.advance*d.scale)*l,I=t;I<=i;I++)e[I].x-=y,e[I].y+=p}function xh(e,t,i,l,p,d){var y,I=e.image;if(I.content){var C=I.content,D=I.pixelRatio||1;y=[C[0]/D,C[1]/D,I.displaySize[0]-C[2]/D,I.displaySize[1]-C[3]/D]}var V,F,K,W,oe=t.left*d,ue=t.right*d;i==="width"||i==="both"?(W=p[0]+oe-l[3],F=p[0]+ue+l[1]):F=(W=p[0]+(oe+ue-I.displaySize[0])/2)+I.displaySize[0];var ve=t.top*d,pe=t.bottom*d;return i==="height"||i==="both"?(V=p[1]+ve-l[0],K=p[1]+pe+l[2]):K=(V=p[1]+(ve+pe-I.displaySize[1])/2)+I.displaySize[1],{image:I,top:V,right:F,bottom:K,left:W,collisionPadding:y}}Xn[10]=!0,Xn[32]=!0,Xn[38]=!0,Xn[40]=!0,Xn[41]=!0,Xn[43]=!0,Xn[45]=!0,Xn[47]=!0,Xn[173]=!0,Xn[183]=!0,Xn[8203]=!0,Xn[8208]=!0,Xn[8211]=!0,Xn[8231]=!0;var Bf=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(N);function Md(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Wt(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var y=d=Math.max(0,d-1);y<l.length&&l[y]<e+1;)y++;y=Math.min(l.length-1,y);var I=l[d],C=l[y];return i.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:C,interpolationType:p}:{kind:"camera",minZoom:I,maxZoom:C,minSize:i.evaluate(new Wt(I)),maxSize:i.evaluate(new Wt(C)),interpolationType:p}}function wh(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?Ci(p/128,i.upperSize/128,t.uSizeT):l}function Eh(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?Ee(oi.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=Ci(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}ot("Anchor",Bf);var yg=Object.freeze({__proto__:null,getSizeData:Md,evaluateSizeForFeature:wh,evaluateSizeForZoom:Eh,SIZE_PACK_FACTOR:128});function Sh(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,y=t.segment+1,I=0;I>-i/2;){if(--y<0)return!1;I-=e[y].dist(d),d=e[y]}I+=e[y].dist(e[y+1]),y++;for(var C=[],D=0;I<i/2;){var V=e[y],F=e[y+1];if(!F)return!1;var K=e[y-1].angleTo(V)-V.angleTo(F);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:I,angleDelta:K}),D+=K;I-C[0].distance>l;)D-=C.shift().angleDelta;if(D>p)return!1;y++,I+=V.dist(F)}return!0}function Of(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function kv(e,t,i){return e?.6*t*i:0}function Iv(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function kh(e,t,i,l,p,d){for(var y=kv(i,p,d),I=Iv(i,l)*d,C=0,D=Of(e)/2,V=0;V<e.length-1;V++){var F=e[V],K=e[V+1],W=F.dist(K);if(C+W>D){var oe=(D-C)/W,ue=Ci(F.x,K.x,oe),ve=Ci(F.y,K.y,oe),pe=new Bf(ue,ve,K.angleTo(F),V);return pe._round(),!y||Sh(e,pe,I,y,t)?pe:void 0}C+=W}}function gg(e,t,i,l,p,d,y,I,C){var D=kv(l,d,y),V=Iv(l,p),F=V*y,K=e[0].x===0||e[0].x===C||e[0].y===0||e[0].y===C;return t-F<t/4&&(t=F+t/4),function W(oe,ue,ve,pe,we,Te,De,Le,Ne){for(var He=Te/2,Qe=Of(oe),gt=0,$e=ue-ve,vt=[],rt=0;rt<oe.length-1;rt++){for(var Vt=oe[rt],Pt=oe[rt+1],ft=Vt.dist(Pt),ir=Pt.angleTo(Vt);$e+ve<gt+ft;){var Gt=(($e+=ve)-gt)/ft,er=Ci(Vt.x,Pt.x,Gt),_t=Ci(Vt.y,Pt.y,Gt);if(er>=0&&er<Ne&&_t>=0&&_t<Ne&&$e-He>=0&&$e+He<=Qe){var yr=new Bf(er,_t,ir,rt);yr._round(),pe&&!Sh(oe,yr,Te,pe,we)||vt.push(yr)}}gt+=ft}return Le||vt.length||De||(vt=W(oe,gt/2,ve,pe,we,Te,De,!0,Ne)),vt}(e,K?t/2*I%t:(V/2+2*d)*y*I%t,t,D,i,F,K,!1,C)}function Vl(e,t,i,l,p){for(var d=[],y=0;y<e.length;y++)for(var I=e[y],C=void 0,D=0;D<I.length-1;D++){var V=I[D],F=I[D+1];V.x<t&&F.x<t||(V.x<t?V=new N(t,V.y+(t-V.x)/(F.x-V.x)*(F.y-V.y))._round():F.x<t&&(F=new N(t,V.y+(t-V.x)/(F.x-V.x)*(F.y-V.y))._round()),V.y<i&&F.y<i||(V.y<i?V=new N(V.x+(i-V.y)/(F.y-V.y)*(F.x-V.x),i)._round():F.y<i&&(F=new N(V.x+(i-V.y)/(F.y-V.y)*(F.x-V.x),i)._round()),V.x>=l&&F.x>=l||(V.x>=l?V=new N(l,V.y+(l-V.x)/(F.x-V.x)*(F.y-V.y))._round():F.x>=l&&(F=new N(l,V.y+(l-V.x)/(F.x-V.x)*(F.y-V.y))._round()),V.y>=p&&F.y>=p||(V.y>=p?V=new N(V.x+(p-V.y)/(F.y-V.y)*(F.x-V.x),p)._round():F.y>=p&&(F=new N(V.x+(p-V.y)/(F.y-V.y)*(F.x-V.x),p)._round()),C&&V.equals(C[C.length-1])||d.push(C=[V]),C.push(F)))))}return d}function Is(e,t,i,l){var p=[],d=e.image,y=d.pixelRatio,I=d.paddedRect.w-2,C=d.paddedRect.h-2,D=e.right-e.left,V=e.bottom-e.top,F=d.stretchX||[[0,I]],K=d.stretchY||[[0,C]],W=function(er,_t){return er+_t[1]-_t[0]},oe=F.reduce(W,0),ue=K.reduce(W,0),ve=I-oe,pe=C-ue,we=0,Te=oe,De=0,Le=ue,Ne=0,He=ve,Qe=0,gt=pe;if(d.content&&l){var $e=d.content;we=Ts(F,0,$e[0]),De=Ts(K,0,$e[1]),Te=Ts(F,$e[0],$e[2]),Le=Ts(K,$e[1],$e[3]),Ne=$e[0]-we,Qe=$e[1]-De,He=$e[2]-$e[0]-Te,gt=$e[3]-$e[1]-Le}var vt=function(er,_t,yr,Rr){var ui=Su(er.stretch-we,Te,D,e.left),vi=Av(er.fixed-Ne,He,er.stretch,oe),$r=Su(_t.stretch-De,Le,V,e.top),Zr=Av(_t.fixed-Qe,gt,_t.stretch,ue),tn=Su(yr.stretch-we,Te,D,e.left),ei=Av(yr.fixed-Ne,He,yr.stretch,oe),yi=Su(Rr.stretch-De,Le,V,e.top),ci=Av(Rr.fixed-Qe,gt,Rr.stretch,ue),Wn=new N(ui,$r),ti=new N(tn,$r),Nn=new N(tn,yi),nr=new N(ui,yi),Ir=new N(vi/y,Zr/y),gr=new N(ei/y,ci/y),fr=t*Math.PI/180;if(fr){var fn=Math.sin(fr),dn=Math.cos(fr),Wr=[dn,-fn,fn,dn];Wn._matMult(Wr),ti._matMult(Wr),nr._matMult(Wr),Nn._matMult(Wr)}var Li=er.stretch+er.fixed,Ri=_t.stretch+_t.fixed;return{tl:Wn,tr:ti,bl:nr,br:Nn,tex:{x:d.paddedRect.x+1+Li,y:d.paddedRect.y+1+Ri,w:yr.stretch+yr.fixed-Li,h:Rr.stretch+Rr.fixed-Ri},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ir,pixelOffsetBR:gr,minFontScaleX:He/y/D,minFontScaleY:gt/y/V,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var rt=Tv(F,ve,oe),Vt=Tv(K,pe,ue),Pt=0;Pt<rt.length-1;Pt++)for(var ft=rt[Pt],ir=rt[Pt+1],Gt=0;Gt<Vt.length-1;Gt++)p.push(vt(ft,Vt[Gt],ir,Vt[Gt+1]));else p.push(vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:C+1}));return p}function Ts(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var y=d[p];l+=Math.max(t,Math.min(i,y[1]))-Math.max(t,Math.min(i,y[0]))}return l}function Tv(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var y=d[p],I=y[0],C=y[1],D=l[l.length-1];l.push({fixed:I-D.stretch,stretch:D.stretch}),l.push({fixed:I-D.stretch,stretch:D.stretch+(C-I)})}return l.push({fixed:t+1,stretch:i}),l}function Su(e,t,i,l){return e/t*i+l}function Av(e,t,i,l){return e-t*i/l}var Vf=function(e,t,i,l,p,d,y,I,C,D){if(this.boxStartIndex=e.length,C){var V=d.top,F=d.bottom,K=d.collisionPadding;K&&(V-=K[1],F+=K[3]);var W=F-V;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{var oe=d.top*y-I,ue=d.bottom*y+I,ve=d.left*y-I,pe=d.right*y+I,we=d.collisionPadding;if(we&&(ve-=we[0]*y,oe-=we[1]*y,pe+=we[2]*y,ue+=we[3]*y),D){var Te=new N(ve,oe),De=new N(pe,oe),Le=new N(ve,ue),Ne=new N(pe,ue),He=D*Math.PI/180;Te._rotate(He),De._rotate(He),Le._rotate(He),Ne._rotate(He),ve=Math.min(Te.x,De.x,Le.x,Ne.x),pe=Math.max(Te.x,De.x,Le.x,Ne.x),oe=Math.min(Te.y,De.y,Le.y,Ne.y),ue=Math.max(Te.y,De.y,Le.y,Ne.y)}e.emplaceBack(t.x,t.y,ve,oe,pe,ue,i,l,p)}this.boxEndIndex=e.length},tl=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Wp),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Wp(e,t){return e<t?-1:e>t?1:0}function _g(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,y=-1/0,I=e[0],C=0;C<I.length;C++){var D=I[C];(!C||D.x<l)&&(l=D.x),(!C||D.y<p)&&(p=D.y),(!C||D.x>d)&&(d=D.x),(!C||D.y>y)&&(y=D.y)}var V=Math.min(d-l,y-p),F=V/2,K=new tl([],Yp);if(V===0)return new N(l,p);for(var W=l;W<d;W+=V)for(var oe=p;oe<y;oe+=V)K.push(new ku(W+F,oe+F,F,e));for(var ue=function(we){for(var Te=0,De=0,Le=0,Ne=we[0],He=0,Qe=Ne.length,gt=Qe-1;He<Qe;gt=He++){var $e=Ne[He],vt=Ne[gt],rt=$e.x*vt.y-vt.x*$e.y;De+=($e.x+vt.x)*rt,Le+=($e.y+vt.y)*rt,Te+=3*rt}return new ku(De/Te,Le/Te,0,we)}(e),ve=K.length;K.length;){var pe=K.pop();(pe.d>ue.d||!ue.d)&&(ue=pe,i&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,ve)),pe.max-ue.d<=t||(K.push(new ku(pe.p.x-(F=pe.h/2),pe.p.y-F,F,e)),K.push(new ku(pe.p.x+F,pe.p.y-F,F,e)),K.push(new ku(pe.p.x-F,pe.p.y+F,F,e)),K.push(new ku(pe.p.x+F,pe.p.y+F,F,e)),ve+=4)}return i&&(console.log("num probes: "+ve),console.log("best distance: "+ue.d)),ue.p}function Yp(e,t){return t.max-e.max}function ku(e,t,i,l){this.p=new N(e,t),this.h=i,this.d=function(p,d){for(var y=!1,I=1/0,C=0;C<d.length;C++)for(var D=d[C],V=0,F=D.length,K=F-1;V<F;K=V++){var W=D[V],oe=D[K];W.y>p.y!=oe.y>p.y&&p.x<(oe.x-W.x)*(p.y-W.y)/(oe.y-W.y)+W.x&&(y=!y),I=Math.min(I,Co(p,W,oe))}return(y?1:-1)*Math.sqrt(I)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}tl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},tl.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},tl.prototype.peek=function(){return this.data[0]},tl.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},tl.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),y=t[d],I=d+1;if(I<this.length&&i(t[I],y)<0&&(d=I,y=t[I]),i(y,p)>=0)break;t[e]=y,e=d}t[e]=p};var Ld=Number.POSITIVE_INFINITY;function zv(e,t){return t[1]!==Ld?function(i,l,p){var d=0,y=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":y=p-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,y]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var y=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=y-7;break;case"bottom-right":case"bottom-left":d=7-y;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-y;break;case"top-left":case"bottom-left":p=y;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function Iu(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Pv(e,t,i,l,p,d,y,I,C,D,V,F,K,W,oe){var ue=function(De,Le,Ne,He,Qe,gt,$e,vt){for(var rt=He.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Vt=[],Pt=0,ft=Le.positionedLines;Pt<ft.length;Pt+=1)for(var ir=ft[Pt],Gt=0,er=ir.positionedGlyphs;Gt<er.length;Gt+=1){var _t=er[Gt];if(_t.rect){var yr=_t.rect||{},Rr=4,ui=!0,vi=1,$r=0,Zr=(Qe||vt)&&_t.vertical,tn=_t.metrics.advance*_t.scale/2;if(vt&&Le.verticalizable&&($r=ir.lineOffset/2-(_t.imageName?-(24-_t.metrics.width*_t.scale)/2:24*(_t.scale-1))),_t.imageName){var ei=$e[_t.imageName];ui=ei.sdf,Rr=1/(vi=ei.pixelRatio)}var yi=Qe?[_t.x+tn,_t.y]:[0,0],ci=Qe?[0,0]:[_t.x+tn+Ne[0],_t.y+Ne[1]-$r],Wn=[0,0];Zr&&(Wn=ci,ci=[0,0]);var ti=(_t.metrics.left-Rr)*_t.scale-tn+ci[0],Nn=(-_t.metrics.top-Rr)*_t.scale+ci[1],nr=ti+yr.w*_t.scale/vi,Ir=Nn+yr.h*_t.scale/vi,gr=new N(ti,Nn),fr=new N(nr,Nn),fn=new N(ti,Ir),dn=new N(nr,Ir);if(Zr){var Wr=new N(-tn,tn- -17),Li=-Math.PI/2,Ri=12-tn,_r=new N(22-Ri,-(_t.imageName?Ri:0)),Vo=new(Function.prototype.bind.apply(N,[null].concat(Wn)));gr._rotateAround(Li,Wr)._add(_r)._add(Vo),fr._rotateAround(Li,Wr)._add(_r)._add(Vo),fn._rotateAround(Li,Wr)._add(_r)._add(Vo),dn._rotateAround(Li,Wr)._add(_r)._add(Vo)}if(rt){var co=Math.sin(rt),al=Math.cos(rt),Yr=[al,-co,co,al];gr._matMult(Yr),fr._matMult(Yr),fn._matMult(Yr),dn._matMult(Yr)}var Ha=new N(0,0),Pn=new N(0,0);Vt.push({tl:gr,tr:fr,bl:fn,br:dn,tex:yr,writingMode:Le.writingMode,glyphOffset:yi,sectionIndex:_t.sectionIndex,isSDF:ui,pixelOffsetTL:Ha,pixelOffsetBR:Pn,minFontScaleX:0,minFontScaleY:0})}}return Vt}(0,i,I,p,d,y,l,e.allowVerticalPlacement),ve=e.textSizeData,pe=null;ve.kind==="source"?(pe=[128*p.layout.get("text-size").evaluate(y,{})])[0]>32640&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ve.kind==="composite"&&((pe=[128*W.compositeTextSizes[0].evaluate(y,{},oe),128*W.compositeTextSizes[1].evaluate(y,{},oe)])[0]>32640||pe[1]>32640)&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,ue,pe,I,d,y,D,t,C.lineStartIndex,C.lineLength,K,oe);for(var we=0,Te=V;we<Te.length;we+=1)F[Te[we]]=e.text.placedSymbolArray.length-1;return 4*ue.length}function Fl(e){for(var t in e)return e[t];return null}function rl(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],y=d.length-1;y>=0;y--)if(l.dist(d[y])<i)return!0}else p[t]=[];return p[t].push(l),!1}var Tu=Ka.VectorTileFeature.types,bg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Au(e,t,i,l,p,d,y,I,C,D,V,F,K){var W=I?Math.min(32640,Math.round(I[0])):0,oe=I?Math.min(32640,Math.round(I[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,y,(W<<1)+(C?1:0),oe,16*D,16*V,256*F,256*K)}function xg(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function wg(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(ds(i[t].text))return!0;return!1}var il=function(e){this.layoutVertexArray=new oo,this.indexArray=new Zs,this.programConfigurations=e,this.segments=new Q,this.dynamicLayoutVertexArray=new fu,this.opacityVertexArray=new vs,this.placedSymbolArray=new c};il.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},il.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hg.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Op.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,bg,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},il.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ot("SymbolBuffers",il);var Nl=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new Q,this.collisionVertexArray=new Pl};Nl.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Vp.members,!0)},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ot("CollisionBuffers",Nl);var Dr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Di([]),this.placementViewportMatrix=Di([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Md(this.zoom,t["text-size"]),this.iconSizeData=Md(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return en[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Dr.prototype.createArrays=function(){this.text=new il(new xt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new il(new xt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new k,this.lineVertexArray=new P,this.symbolInstances=new E},Dr.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var y=Np[e.charAt(d)];y&&(t[y.charCodeAt(0)]=!0)}},Dr.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),y=p.get("text-field"),I=p.get("icon-image"),C=(y.value.kind!=="constant"||y.value.value instanceof _i&&!y.value.value.isEmpty()||y.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),D=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=p.get("symbol-sort-key");if(this.features=[],C||D){for(var F=t.iconDependencies,K=t.glyphDependencies,W=t.availableImages,oe=new Wt(this.zoom),ue=0,ve=e;ue<ve.length;ue+=1){var pe=ve[ue],we=pe.feature,Te=pe.id,De=pe.index,Le=pe.sourceLayerIndex,Ne=l._featureFilter.needGeometry,He=ki(we,Ne);if(l._featureFilter.filter(oe,He,i)){Ne||(He.geometry=Xr(we));var Qe=void 0;if(C){var gt=l.getValueAndResolveTokens("text-field",He,i,W),$e=_i.factory(gt);wg($e)&&(this.hasRTLText=!0),(!this.hasRTLText||Ed()==="unavailable"||this.hasRTLText&&Fn.isParsed())&&(Qe=Cd($e,l,He))}var vt=void 0;if(D){var rt=l.getValueAndResolveTokens("icon-image",He,i,W);vt=rt instanceof Hi?rt:Hi.fromString(rt)}if(Qe||vt){var Vt=this.sortFeaturesByKey?V.evaluate(He,{},i):void 0;if(this.features.push({id:Te,text:Qe,icon:vt,index:De,sourceLayerIndex:Le,geometry:He.geometry,properties:we.properties,type:Tu[we.type],sortKey:Vt}),vt&&(F[vt.name]=!0),Qe){var Pt=d.evaluate(He,{},i).join(","),ft=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(en.vertical)>=0;for(var ir=0,Gt=Qe.sections;ir<Gt.length;ir+=1){var er=Gt[ir];if(er.image)F[er.image.name]=!0;else{var _t=Tp(Qe.toString()),yr=er.fontStack||Pt,Rr=K[yr]=K[yr]||{};this.calculateGlyphDependencies(er.text,Rr,ft,this.allowVerticalPlacement,_t)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(ui){var vi={},$r={},Zr=[],tn=0;function ei(Wr){Zr.push(ui[Wr]),tn++}function yi(Wr,Li,Ri){var _r=$r[Wr];return delete $r[Wr],$r[Li]=_r,Zr[_r].geometry[0].pop(),Zr[_r].geometry[0]=Zr[_r].geometry[0].concat(Ri[0]),_r}function ci(Wr,Li,Ri){var _r=vi[Li];return delete vi[Li],vi[Wr]=_r,Zr[_r].geometry[0].shift(),Zr[_r].geometry[0]=Ri[0].concat(Zr[_r].geometry[0]),_r}function Wn(Wr,Li,Ri){var _r=Ri?Li[0][Li[0].length-1]:Li[0][0];return Wr+":"+_r.x+":"+_r.y}for(var ti=0;ti<ui.length;ti++){var Nn=ui[ti],nr=Nn.geometry,Ir=Nn.text?Nn.text.toString():null;if(Ir){var gr=Wn(Ir,nr),fr=Wn(Ir,nr,!0);if(gr in $r&&fr in vi&&$r[gr]!==vi[fr]){var fn=ci(gr,fr,nr),dn=yi(gr,fr,Zr[fn].geometry);delete vi[gr],delete $r[fr],$r[Wn(Ir,Zr[dn].geometry,!0)]=dn,Zr[fn].geometry=null}else gr in $r?yi(gr,fr,nr):fr in vi?ci(gr,fr,nr):(ei(ti),vi[gr]=tn-1,$r[fr]=tn-1)}else ei(ti)}return Zr.filter(function(Wr){return Wr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ui,vi){return ui.sortKey-vi.sortKey})}},Dr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Dr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Dr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Dr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Dr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Dr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Dr.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},y=e.segment+1;y<t.length;y++)d[y]={x:t[y].x,y:t[y].y,tileUnitDistanceFromAnchor:l},y<t.length-1&&(l+=t[y+1].dist(t[y]));for(var I=e.segment||0;I>=0;I--)d[I]={x:t[I].x,y:t[I].y,tileUnitDistanceFromAnchor:p},I>0&&(p+=t[I-1].dist(t[I]));for(var C=0;C<t.length;C++){var D=d[C];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Dr.prototype.addSymbols=function(e,t,i,l,p,d,y,I,C,D,V,F){for(var K=e.indexArray,W=e.layoutVertexArray,oe=e.segments.prepareSegment(4*t.length,W,K,this.canOverlap?d.sortKey:void 0),ue=this.glyphOffsetArray.length,ve=oe.vertexLength,pe=this.allowVerticalPlacement&&y===en.vertical?Math.PI/2:0,we=d.text&&d.text.sections,Te=0;Te<t.length;Te++){var De=t[Te],Le=De.tl,Ne=De.tr,He=De.bl,Qe=De.br,gt=De.tex,$e=De.pixelOffsetTL,vt=De.pixelOffsetBR,rt=De.minFontScaleX,Vt=De.minFontScaleY,Pt=De.glyphOffset,ft=De.isSDF,ir=De.sectionIndex,Gt=oe.vertexLength,er=Pt[1];Au(W,I.x,I.y,Le.x,er+Le.y,gt.x,gt.y,i,ft,$e.x,$e.y,rt,Vt),Au(W,I.x,I.y,Ne.x,er+Ne.y,gt.x+gt.w,gt.y,i,ft,vt.x,$e.y,rt,Vt),Au(W,I.x,I.y,He.x,er+He.y,gt.x,gt.y+gt.h,i,ft,$e.x,vt.y,rt,Vt),Au(W,I.x,I.y,Qe.x,er+Qe.y,gt.x+gt.w,gt.y+gt.h,i,ft,vt.x,vt.y,rt,Vt),xg(e.dynamicLayoutVertexArray,I,pe),K.emplaceBack(Gt,Gt+1,Gt+2),K.emplaceBack(Gt+1,Gt+2,Gt+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),Te!==t.length-1&&ir===t[Te+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,d,d.index,{},F,we&&we[ir])}e.placedSymbolArray.emplaceBack(I.x,I.y,ue,this.glyphOffsetArray.length-ue,ve,C,D,I.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],y,0,!1,0,V)},Dr.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},Dr.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,y){var I=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),C=I.vertexLength,D=p.layoutVertexArray,V=p.collisionVertexArray,F=y.anchorX,K=y.anchorY;this._addCollisionDebugVertex(D,V,d,F,K,new N(e,t)),this._addCollisionDebugVertex(D,V,d,F,K,new N(i,t)),this._addCollisionDebugVertex(D,V,d,F,K,new N(i,l)),this._addCollisionDebugVertex(D,V,d,F,K,new N(e,l)),I.vertexLength+=4;var W=p.indexArray;W.emplaceBack(C,C+1),W.emplaceBack(C+1,C+2),W.emplaceBack(C+2,C+3),W.emplaceBack(C+3,C),I.primitiveLength+=4},Dr.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Dr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nl(du,bv.members,dc),this.iconCollisionBox=new Nl(du,bv.members,dc);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Dr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,y,I,C){for(var D={},V=t;V<i;V++){var F=e.get(V);D.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},D.textFeatureIndex=F.featureIndex;break}for(var K=l;K<p;K++){var W=e.get(K);D.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},D.verticalTextFeatureIndex=W.featureIndex;break}for(var oe=d;oe<y;oe++){var ue=e.get(oe);D.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},D.iconFeatureIndex=ue.featureIndex;break}for(var ve=I;ve<C;ve++){var pe=e.get(ve);D.verticalIconBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},D.verticalIconFeatureIndex=pe.featureIndex;break}return D},Dr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Dr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Dr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Dr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Dr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Dr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Dr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},Dr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],y=0;y<this.symbolInstances.length;++y){d.push(y);var I=this.symbolInstances.get(y);l.push(0|Math.round(t*I.anchorX+i*I.anchorY)),p.push(I.featureIndex)}return d.sort(function(C,D){return l[C]-l[D]||p[D]-p[C]}),d},Dr.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Dr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,y,I){d>=0&&I.indexOf(d)===y&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ot("SymbolBucket",Dr,{omit:["layers","collisionBoxArray","features","compareText"]}),Dr.MAX_GLYPHS=65535,Dr.addDynamicAttributes=xg;var Jp=new In({"symbol-placement":new yt(H.layout_symbol["symbol-placement"]),"symbol-spacing":new yt(H.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yt(H.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pt(H.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yt(H.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yt(H.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yt(H.layout_symbol["icon-ignore-placement"]),"icon-optional":new yt(H.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yt(H.layout_symbol["icon-rotation-alignment"]),"icon-size":new pt(H.layout_symbol["icon-size"]),"icon-text-fit":new yt(H.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yt(H.layout_symbol["icon-text-fit-padding"]),"icon-image":new pt(H.layout_symbol["icon-image"]),"icon-rotate":new pt(H.layout_symbol["icon-rotate"]),"icon-padding":new yt(H.layout_symbol["icon-padding"]),"icon-keep-upright":new yt(H.layout_symbol["icon-keep-upright"]),"icon-offset":new pt(H.layout_symbol["icon-offset"]),"icon-anchor":new pt(H.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yt(H.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yt(H.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yt(H.layout_symbol["text-rotation-alignment"]),"text-field":new pt(H.layout_symbol["text-field"]),"text-font":new pt(H.layout_symbol["text-font"]),"text-size":new pt(H.layout_symbol["text-size"]),"text-max-width":new pt(H.layout_symbol["text-max-width"]),"text-line-height":new yt(H.layout_symbol["text-line-height"]),"text-letter-spacing":new pt(H.layout_symbol["text-letter-spacing"]),"text-justify":new pt(H.layout_symbol["text-justify"]),"text-radial-offset":new pt(H.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yt(H.layout_symbol["text-variable-anchor"]),"text-anchor":new pt(H.layout_symbol["text-anchor"]),"text-max-angle":new yt(H.layout_symbol["text-max-angle"]),"text-writing-mode":new yt(H.layout_symbol["text-writing-mode"]),"text-rotate":new pt(H.layout_symbol["text-rotate"]),"text-padding":new yt(H.layout_symbol["text-padding"]),"text-keep-upright":new yt(H.layout_symbol["text-keep-upright"]),"text-transform":new pt(H.layout_symbol["text-transform"]),"text-offset":new pt(H.layout_symbol["text-offset"]),"text-allow-overlap":new yt(H.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yt(H.layout_symbol["text-ignore-placement"]),"text-optional":new yt(H.layout_symbol["text-optional"])}),Qp={paint:new In({"icon-opacity":new pt(H.paint_symbol["icon-opacity"]),"icon-color":new pt(H.paint_symbol["icon-color"]),"icon-halo-color":new pt(H.paint_symbol["icon-halo-color"]),"icon-halo-width":new pt(H.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pt(H.paint_symbol["icon-halo-blur"]),"icon-translate":new yt(H.paint_symbol["icon-translate"]),"icon-translate-anchor":new yt(H.paint_symbol["icon-translate-anchor"]),"text-opacity":new pt(H.paint_symbol["text-opacity"]),"text-color":new pt(H.paint_symbol["text-color"],{runtimeType:tt,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new pt(H.paint_symbol["text-halo-color"]),"text-halo-width":new pt(H.paint_symbol["text-halo-width"]),"text-halo-blur":new pt(H.paint_symbol["text-halo-blur"]),"text-translate":new yt(H.paint_symbol["text-translate"]),"text-translate-anchor":new yt(H.paint_symbol["text-translate-anchor"])}),layout:Jp},Ih=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:st,this.defaultValue=e};Ih.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Ih.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Ih.prototype.outputDefined=function(){return!1},Ih.prototype.serialize=function(){return null},ot("FormatSectionOverride",Ih,{omit:["defaultValue"]});var Eg=function(e){function t(i){e.call(this,i,Qp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],y=0,I=p;y<I.length;y+=1){var C=I[y];d.indexOf(C)<0&&d.push(C)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var y=this.layout.get(i).evaluate(l,{},p,d),I=this._unevaluatedLayout._values[i];return I.isDataDriven()||ls(I.value)||!y?y:function(C,D){return D.replace(/{([^{}]+)}/g,function(V,F){return F in C?String(C[F]):""})}(l.properties,y)},t.prototype.createBucket=function(i){return new Dr(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=Qp.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,y=this.paint.get(p),I=new Ih(y),C=new uu(I,y.property.specification);d=y.value.kind==="constant"||y.value.kind==="source"?new oc("source",C):new So("composite",C,y.value.zoomStops,y.value._interpolationType),this.paint._values[p]=new ta(y.property,d,y.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=Qp.paint.properties[l],y=!1,I=function(V){for(var F=0,K=V;F<K.length;F+=1)if(d.overrides&&d.overrides.hasOverride(K[F]))return void(y=!0)};if(p.value.kind==="constant"&&p.value.value instanceof _i)I(p.value.value.sections);else if(p.value.kind==="source"){var C=function(V){y||(V instanceof Fi&&vr(V.value)===lr?I(V.value.sections):V instanceof En?I(V.sections):V.eachChild(C))},D=p.value;D._styleExpression&&C(D._styleExpression.expression)}return y},t}(ra),Th={paint:new In({"background-color":new yt(H.paint_background["background-color"]),"background-pattern":new un(H.paint_background["background-pattern"]),"background-opacity":new yt(H.paint_background["background-opacity"])})},Sg=function(e){function t(i){e.call(this,i,Th)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ra),zu={paint:new In({"raster-opacity":new yt(H.paint_raster["raster-opacity"]),"raster-hue-rotate":new yt(H.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yt(H.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yt(H.paint_raster["raster-brightness-max"]),"raster-saturation":new yt(H.paint_raster["raster-saturation"]),"raster-contrast":new yt(H.paint_raster["raster-contrast"]),"raster-resampling":new yt(H.paint_raster["raster-resampling"]),"raster-fade-duration":new yt(H.paint_raster["raster-fade-duration"])})},nl=function(e){function t(i){e.call(this,i,zu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ra),Pu=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(ra),kg={circle:kd,heatmap:gu,hillshade:_u,fill:Lp,"fill-extrusion":sg,line:v0,symbol:Eg,background:Sg,raster:nl},Ah=j.HTMLImageElement,c_=j.HTMLCanvasElement,Cv=j.HTMLVideoElement,zh=j.ImageData,Cu=j.ImageBitmap,Sc=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};Sc.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),y=this.context,I=y.gl;if(this.useMipmap=!!(t&&t.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof Ah||e instanceof c_||e instanceof Cv||e instanceof zh||Cu&&e instanceof Cu?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,e):I.texImage2D(I.TEXTURE_2D,0,this.format,l,p,0,this.format,I.UNSIGNED_BYTE,e.data);else{var C=i||{x:0,y:0},D=C.x,V=C.y;e instanceof Ah||e instanceof c_||e instanceof Cv||e instanceof zh||Cu&&e instanceof Cu?I.texSubImage2D(I.TEXTURE_2D,0,D,V,I.RGBA,I.UNSIGNED_BYTE,e):I.texSubImage2D(I.TEXTURE_2D,0,D,V,l,p,I.RGBA,I.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)},Sc.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},Sc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var kc=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};kc.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},kc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Du=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ar(["receive","process"],this),this.invoker=new kc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=cr()?e:j};function Dv(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}Du.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var y=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[y]=i);var I=Tr(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:fs(t,I)},I),{cancel:function(){i&&delete d.callbacks[y],d.target.postMessage({id:y,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},Du.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else cr()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},Du.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Du.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(ma(t.error)):l(null,ma(t.data)))}else{var p=!1,d=Tr(this.globalScope)?void 0:[],y=t.hasCallback?function(V,F){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:V?fs(V):null,data:fs(F,d)},d)}:function(V){p=!0},I=null,C=ma(t.data);if(this.parent[t.type])I=this.parent[t.type](t.sourceMapId,C,y);else if(this.parent.getWorkerSource){var D=t.type.split(".");I=this.parent.getWorkerSource(t.sourceMapId,D[0],C.source)[D[1]](C,y)}else y(new Error("Could not find function "+t.type));!p&&I&&I.cancel&&(this.cancelCallbacks[e]=I.cancel)}},Du.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ki=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Ki.prototype.setNorthEast=function(e){return this._ne=e instanceof Mr?new Mr(e.lng,e.lat):Mr.convert(e),this},Ki.prototype.setSouthWest=function(e){return this._sw=e instanceof Mr?new Mr(e.lng,e.lat):Mr.convert(e),this},Ki.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof Mr)t=e,i=e;else{if(!(e instanceof Ki))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ki.convert(e)):this.extend(Mr.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new Mr(t.lng,t.lat),this._ne=new Mr(i.lng,i.lat)),this},Ki.prototype.getCenter=function(){return new Mr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ki.prototype.getSouthWest=function(){return this._sw},Ki.prototype.getNorthEast=function(){return this._ne},Ki.prototype.getNorthWest=function(){return new Mr(this.getWest(),this.getNorth())},Ki.prototype.getSouthEast=function(){return new Mr(this.getEast(),this.getSouth())},Ki.prototype.getWest=function(){return this._sw.lng},Ki.prototype.getSouth=function(){return this._sw.lat},Ki.prototype.getEast=function(){return this._ne.lng},Ki.prototype.getNorth=function(){return this._ne.lat},Ki.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ki.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ki.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ki.prototype.contains=function(e){var t=Mr.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},Ki.convert=function(e){return!e||e instanceof Ki?e:new Ki(e)};var Mr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Mr.prototype.wrap=function(){return new Mr(Ve(this.lng,-180,180),this.lat)},Mr.prototype.toArray=function(){return[this.lng,this.lat]},Mr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Mr.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},Mr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Ki(new Mr(this.lng-i,this.lat-t),new Mr(this.lng+i,this.lat+t))},Mr.convert=function(e){if(e instanceof Mr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Mr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Mr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Mv=2*Math.PI*63710088e-1;function Ul(e){return Mv*Math.cos(e*Math.PI/180)}function As(e){return(180+e)/360}function jl(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Lv(e,t){return e/Ul(t)}function Ic(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var $p=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};$p.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Mr.convert(e);return new $p(As(i.lng),jl(i.lat),Lv(t,i.lat))},$p.prototype.toLngLat=function(){return new Mr(360*this.x-180,Ic(this.y))},$p.prototype.toAltitude=function(){return this.z*Ul(Ic(this.y))},$p.prototype.meterInMercatorCoordinateUnits=function(){return 1/Mv*(e=Ic(this.y),1/Math.cos(e*Math.PI/180));var e};var Tc=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=ef(0,e,e,t,i)};Tc.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Tc.prototype.url=function(e,t){var i,l,p,d,y,I=(l=this.y,p=this.z,d=Dv(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),y=Dv(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+y[0]+","+y[1]),C=function(D,V,F){for(var K,W="",oe=D;oe>0;oe--)W+=(V&(K=1<<oe-1)?1:0)+(F&K?2:0);return W}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",I)},Tc.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new N(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Tc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ph=function(e,t){this.wrap=e,this.canonical=t,this.key=ef(e,t.z,t.z,t.x,t.y)},mi=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new Tc(i,+l,+p),this.key=ef(t,e,i,l,p)};function ef(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}mi.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},mi.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new mi(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new mi(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},mi.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?ef(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):ef(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},mi.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},mi.prototype.children=function(e){if(this.overscaledZ>=e)return[new mi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new mi(t,this.wrap,t,i,l),new mi(t,this.wrap,t,i+1,l),new mi(t,this.wrap,t,i,l+1),new mi(t,this.wrap,t,i+1,l+1)]},mi.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},mi.prototype.wrapped=function(){return new mi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},mi.prototype.unwrapTo=function(e){return new mi(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},mi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},mi.prototype.toUnwrapped=function(){return new Ph(this.wrap,this.canonical)},mi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},mi.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new $p(e.x-this.wrap,e.y))},ot("CanonicalTileID",Tc),ot("OverscaledTileID",mi,{omit:["posMatrix"]});var uo=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Ot('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};uo.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},uo.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},uo.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},uo.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},uo.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},uo.prototype.getPixels=function(){return new ga({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},uo.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,y=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=y-1;break;case 1:y=d+1}for(var I=-t*this.dim,C=-i*this.dim,D=d;D<y;D++)for(var V=l;V<p;V++)this.data[this._idx(V,D)]=e.data[this._idx(V+I,D+C)]},ot("DEMData",uo);var Ch=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Ch.prototype.encode=function(e){return this._stringToNumber[e]},Ch.prototype.decode=function(e){return this._numberToString[e]};var Ff=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Rd={geometry:{configurable:!0}};Rd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Rd.geometry.set=function(e){this._geometry=e},Ff.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Ff.prototype,Rd);var zs=function(){this.state={},this.stateChanges={},this.deletedStates={}};zs.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},je(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var y in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][y]===null&&delete this.deletedStates[e][l][y]},zs.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},zs.prototype.getState=function(e,t){var i=String(t),l=je({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},zs.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},zs.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),je(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var y in this.deletedStates){this.state[y]=this.state[y]||{};var I={};if(this.deletedStates[y]===null)for(var C in this.state[y])I[C]={},this.state[y][C]={};else for(var D in this.deletedStates[y]){if(this.deletedStates[y][D]===null)this.state[y][D]={};else for(var V=0,F=Object.keys(this.deletedStates[y][D]);V<F.length;V+=1)delete this.state[y][D][F[V]];I[D]=this.state[y][D]}i[y]=i[y]||{},je(i[y],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var K in e)e[K].setFeatureState(i,t)};var ql=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ps(8192,16,0),this.grid3D=new ps(8192,16,0),this.featureIndexArray=new q,this.promoteId=t};function Zl(e,t,i,l,p){return or(e,function(d,y){var I=t instanceof fc?t.get(y):null;return I&&I.evaluate?I.evaluate(i,l,p):I})}function Ps(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,y=e;d<y.length;d+=1){var I=y[d];t=Math.min(t,I.x),i=Math.min(i,I.y),l=Math.max(l,I.x),p=Math.max(p,I.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Mu(e,t){return t-e}ql.prototype.insert=function(e,t,i,l,p,d){var y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var I=d?this.grid3D:this.grid,C=0;C<t.length;C++){for(var D=t[C],V=[1/0,1/0,-1/0,-1/0],F=0;F<D.length;F++){var K=D[F];V[0]=Math.min(V[0],K.x),V[1]=Math.min(V[1],K.y),V[2]=Math.max(V[2],K.x),V[3]=Math.max(V[3],K.y)}V[0]<8192&&V[1]<8192&&V[2]>=0&&V[3]>=0&&I.insert(y,V[0],V[1],V[2],V[3])}},ql.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ka.VectorTile(new Mf(this.rawTileData)).layers,this.sourceLayerCoder=new Ch(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ql.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},y=8192/e.tileSize/e.scale,I=Us(d.filter),C=e.queryGeometry,D=e.queryPadding*y,V=Ps(C),F=this.grid.query(V.minX-D,V.minY-D,V.maxX+D,V.maxY+D),K=Ps(e.cameraQueryGeometry),W=this.grid3D.query(K.minX-D,K.minY-D,K.maxX+D,K.maxY+D,function(De,Le,Ne,He){return function(Qe,gt,$e,vt,rt){for(var Vt=0,Pt=Qe;Vt<Pt.length;Vt+=1){var ft=Pt[Vt];if(gt<=ft.x&&$e<=ft.y&&vt>=ft.x&&rt>=ft.y)return!0}var ir=[new N(gt,$e),new N(gt,rt),new N(vt,rt),new N(vt,$e)];if(Qe.length>2){for(var Gt=0,er=ir;Gt<er.length;Gt+=1)if(Do(Qe,er[Gt]))return!0}for(var _t=0;_t<Qe.length-1;_t++)if(_s(Qe[_t],Qe[_t+1],ir))return!0;return!1}(e.cameraQueryGeometry,De-D,Le-D,Ne+D,He+D)}),oe=0,ue=W;oe<ue.length;oe+=1)F.push(ue[oe]);F.sort(Mu);for(var ve,pe={},we=function(De){var Le=F[De];if(Le!==ve){ve=Le;var Ne=p.featureIndexArray.get(Le),He=null;p.loadMatchingFeature(pe,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,I,d.layers,d.availableImages,t,i,l,function(Qe,gt,$e){return He||(He=Xr(Qe)),gt.queryIntersectsFeature(C,Qe,$e,He,p.z,e.transform,y,e.pixelPosMatrix)})}},Te=0;Te<F.length;Te++)we(Te);return pe},ql.prototype.loadMatchingFeature=function(e,t,i,l,p,d,y,I,C,D,V){var F=this.bucketLayerIDs[t];if(!d||function(Qe,gt){for(var $e=0;$e<Qe.length;$e++)if(gt.indexOf(Qe[$e])>=0)return!0;return!1}(d,F)){var K=this.sourceLayerCoder.decode(i),W=this.vtLayers[K].feature(l);if(p.needGeometry){var oe=ki(W,!0);if(!p.filter(new Wt(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!p.filter(new Wt(this.tileID.overscaledZ),W))return;for(var ue=this.getId(W,K),ve=0;ve<F.length;ve++){var pe=F[ve];if(!(d&&d.indexOf(pe)<0)){var we=I[pe];if(we){var Te={};ue!==void 0&&D&&(Te=D.getState(we.sourceLayer||"_geojsonTileLayer",ue));var De=je({},C[pe]);De.paint=Zl(De.paint,we.paint,W,Te,y),De.layout=Zl(De.layout,we.layout,W,Te,y);var Le=!V||V(W,we,Te);if(Le){var Ne=new Ff(W,this.z,this.x,this.y,ue);Ne.layer=De;var He=e[pe];He===void 0&&(He=e[pe]=[]),He.push({featureIndex:l,feature:Ne,intersectionZ:Le})}}}}}},ql.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,y,I){var C={};this.loadVTLayers();for(var D=Us(p),V=0,F=e;V<F.length;V+=1)this.loadMatchingFeature(C,i,l,F[V],D,d,y,I,t);return C},ql.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},ql.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},ot("FeatureIndex",ql,{omit:["rawTileData","sourceLayerCoder"]});var pn=function(e,t){this.tileID=e,this.uid=Mt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};pn.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Ia.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},pn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},pn.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(D,V){var F={};if(!V)return F;for(var K=function(){var ue=oe[W],ve=ue.layerIds.map(function(Te){return V.getLayer(Te)}).filter(Boolean);if(ve.length!==0){ue.layers=ve,ue.stateDependentLayerIds&&(ue.stateDependentLayers=ue.stateDependentLayerIds.map(function(Te){return ve.filter(function(De){return De.id===Te})[0]}));for(var pe=0,we=ve;pe<we.length;pe+=1)F[we[pe].id]=ue}},W=0,oe=D;W<oe.length;W+=1)K();return F}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof Dr){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var y=this.buckets[d];if(y instanceof Dr&&y.hasRTLText){this.hasRTLText=!0,Fn.isLoading()||Fn.isLoaded()||Ed()!=="deferred"||io();break}}for(var I in this.queryPadding=0,this.buckets){var C=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(I).queryRadius(C))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},pn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},pn.prototype.getBucket=function(e){return this.buckets[e.id]},pn.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sc(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sc(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},pn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},pn.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,y,I,C,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:D,transform:I,params:y,queryPadding:this.queryPadding*C},e,t,i):{}},pn.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var y=Us(t&&t.filter),I=this.tileID.canonical,C=I.z,D=I.x,V=I.y,F={z:C,x:D,y:V},K=0;K<d.length;K++){var W=d.feature(K);if(y.needGeometry){var oe=ki(W,!0);if(!y.filter(new Wt(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!y.filter(new Wt(this.tileID.overscaledZ),W))continue;var ue=i.getId(W,p),ve=new Ff(W,C,D,V,ue);ve.tile=F,e.push(ve)}}},pn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},pn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},pn.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=Jr(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},pn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},pn.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",y=i[d],I=e[d];if(y&&I&&Object.keys(I).length!==0){p.update(I,y,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=t&&t.style&&t.style.getLayer(l);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(p)))}}}},pn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},pn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ia.now()},pn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},pn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Ia.now()+e},pn.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},pn.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,y=t;d<y.length;d+=1)if(p[y[d]])return!0}}return!1};var Oo=j.performance,h_=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Oo.mark(this._marks.start)};h_.prototype.finish=function(){Oo.mark(this._marks.end);var e=Oo.getEntriesByName(this._marks.measure);return e.length===0&&(Oo.measure(this._marks.measure,this._marks.start,this._marks.end),e=Oo.getEntriesByName(this._marks.measure),Oo.clearMarks(this._marks.start),Oo.clearMarks(this._marks.end),Oo.clearMeasures(this._marks.measure)),e},a.Actor=Du,a.AlphaImage=vc,a.CanonicalTileID=Tc,a.CollisionBoxArray=s,a.Color=tr,a.DEMData=uo,a.DataConstantProperty=yt,a.DictionaryCoder=Ch,a.EXTENT=8192,a.ErrorEvent=ye,a.EvaluationParameters=Wt,a.Event=le,a.Evented=_e,a.FeatureIndex=ql,a.FillBucket=Es,a.FillExtrusionBucket=Ss,a.ImageAtlas=$s,a.ImagePosition=Lf,a.LineBucket=wi,a.LngLat=Mr,a.LngLatBounds=Ki,a.MercatorCoordinate=$p,a.ONE_EM=24,a.OverscaledTileID=mi,a.Point=N,a.Point$1=N,a.Properties=In,a.Protobuf=Mf,a.RGBAImage=ga,a.RequestManager=Oi,a.RequestPerformance=h_,a.ResourceType=fl,a.SegmentVector=Q,a.SourceFeatureState=zs,a.StructArrayLayout1ui2=Po,a.StructArrayLayout2f1f2i16=so,a.StructArrayLayout2i4=zo,a.StructArrayLayout3ui6=Zs,a.StructArrayLayout4i8=Ap,a.SymbolBucket=Dr,a.Texture=Sc,a.Tile=pn,a.Transitionable=Yi,a.Uniform1f=Xe,a.Uniform1i=Ze,a.Uniform2f=We,a.Uniform3f=ut,a.Uniform4f=wt,a.UniformColor=bt,a.UniformMatrix4f=pr,a.UnwrappedTileID=Ph,a.ValidationError=ae,a.WritingMode=en,a.ZoomHistory=Tl,a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},a.addDynamicAttributes=xg,a.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(y,I){t(y,function(C,D){C&&(d=C),p[I]=D,--l==0&&i(d,p)})})},a.bezier=he,a.bindAll=Ar,a.browser=Ia,a.cacheEntryPossiblyAdded=function(e){++mo>es&&(e.getActor().send("enforceCacheSizeLimit",Ra),mo=0)},a.clamp=Ee,a.clearTileCache=function(e){var t=j.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},a.clipLine=Vl,a.clone=function(e){var t=new rr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.clone$1=Tt,a.clone$2=function(e){var t=new rr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.collisionCircleLayout=Fp,a.config=br,a.create=function(){var e=new rr(16);return rr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},a.create$1=function(){var e=new rr(9);return rr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},a.create$2=function(){var e=new rr(4);return rr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},a.createCommonjsModule=z,a.createExpression=xf,a.createLayout=Ji,a.createStyleLayer=function(e){return e.type==="custom"?new Pu(e):new kg[e.type](e)},a.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],y=i[0],I=i[1],C=i[2];return e[0]=p*C-d*I,e[1]=d*y-l*C,e[2]=l*I-p*y,e},a.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.ease=Ae,a.emitValidationErrors=Il,a.endsWith=Sr,a.enforceCacheSizeLimit=function(e){di(),fi&&fi.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},a.evaluateSizeForFeature=wh,a.evaluateSizeForZoom=Eh,a.evaluateVariableOffset=zv,a.evented=Al,a.extend=je,a.featureFilter=Us,a.filterObject=kt,a.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.getAnchorAlignment=el,a.getAnchorJustification=Iu,a.getArrayBuffer=ca,a.getImage=G,a.getJSON=function(e,t){return Qn(je(e,{type:"json"}),t)},a.getRTLTextPluginStatus=Ed,a.getReferrer=Gn,a.getVideo=function(e,t){var i,l,p=j.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var y=j.document.createElement("source");i=e[d],l=void 0,(l=j.document.createElement("a")).href=i,(l.protocol!==j.document.location.protocol||l.host!==j.document.location.host)&&(p.crossOrigin="Anonymous"),y.src=e[d],p.appendChild(y)}return{cancel:function(){}}},a.identity=Di,a.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],y=t[4],I=t[5],C=t[6],D=t[7],V=t[8],F=t[9],K=t[10],W=t[11],oe=t[12],ue=t[13],ve=t[14],pe=t[15],we=i*I-l*y,Te=i*C-p*y,De=i*D-d*y,Le=l*C-p*I,Ne=l*D-d*I,He=p*D-d*C,Qe=V*ue-F*oe,gt=V*ve-K*oe,$e=V*pe-W*oe,vt=F*ve-K*ue,rt=F*pe-W*ue,Vt=K*pe-W*ve,Pt=we*Vt-Te*rt+De*vt+Le*$e-Ne*gt+He*Qe;return Pt?(e[0]=(I*Vt-C*rt+D*vt)*(Pt=1/Pt),e[1]=(p*rt-l*Vt-d*vt)*Pt,e[2]=(ue*He-ve*Ne+pe*Le)*Pt,e[3]=(K*Ne-F*He-W*Le)*Pt,e[4]=(C*$e-y*Vt-D*gt)*Pt,e[5]=(i*Vt-p*$e+d*gt)*Pt,e[6]=(ve*De-oe*He-pe*Te)*Pt,e[7]=(V*He-K*De+W*Te)*Pt,e[8]=(y*rt-I*$e+D*Qe)*Pt,e[9]=(l*$e-i*rt-d*Qe)*Pt,e[10]=(oe*Ne-ue*De+pe*we)*Pt,e[11]=(F*De-V*Ne-W*we)*Pt,e[12]=(I*gt-y*vt-C*Qe)*Pt,e[13]=(i*vt-l*gt+p*Qe)*Pt,e[14]=(ue*Te-oe*Le-ve*we)*Pt,e[15]=(V*Le-F*Te+K*we)*Pt,e):null},a.isChar=Je,a.isMapboxURL=ur,a.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},a.makeRequest=Qn,a.mapObject=or,a.mercatorXfromLng=As,a.mercatorYfromLat=jl,a.mercatorZfromAltitude=Lv,a.mul=mc,a.multiply=Mi,a.mvt=Ka,a.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},a.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},a.number=Ci,a.offscreenCanvasSupported=la,a.ortho=function(e,t,i,l,p,d,y){var I=1/(t-i),C=1/(l-p),D=1/(d-y);return e[0]=-2*I,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*C,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*D,e[11]=0,e[12]=(t+i)*I,e[13]=(p+l)*C,e[14]=(y+d)*D,e[15]=1,e},a.parseGlyphPBF=function(e){return new Mf(e).readFields(_h,[])},a.pbf=Mf,a.performSymbolLayout=function(e,t,i,l,p,d,y){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var I=e.layers[0].layout,C=e.layers[0]._unevaluatedLayout._values,D={};if(e.textSizeData.kind==="composite"){var V=e.textSizeData,F=V.maxZoom;D.compositeTextSizes=[C["text-size"].possiblyEvaluate(new Wt(V.minZoom),y),C["text-size"].possiblyEvaluate(new Wt(F),y)]}if(e.iconSizeData.kind==="composite"){var K=e.iconSizeData,W=K.maxZoom;D.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new Wt(K.minZoom),y),C["icon-size"].possiblyEvaluate(new Wt(W),y)]}D.layoutTextSize=C["text-size"].possiblyEvaluate(new Wt(e.zoom+1),y),D.layoutIconSize=C["icon-size"].possiblyEvaluate(new Wt(e.zoom+1),y),D.textMaxSize=C["text-size"].possiblyEvaluate(new Wt(18));for(var oe=24*I.get("text-line-height"),ue=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",ve=I.get("text-keep-upright"),pe=I.get("text-size"),we=function(){var Le=De[Te],Ne=I.get("text-font").evaluate(Le,{},y).join(","),He=pe.evaluate(Le,{},y),Qe=D.layoutTextSize.evaluate(Le,{},y),gt=D.layoutIconSize.evaluate(Le,{},y),$e={horizontal:{},vertical:void 0},vt=Le.text,rt=[0,0];if(vt){var Vt=vt.toString(),Pt=24*I.get("text-letter-spacing").evaluate(Le,{},y),ft=function(nr){for(var Ir=0,gr=nr;Ir<gr.length;Ir+=1)if(fr=gr[Ir].charCodeAt(0),Je.Arabic(fr)||Je["Arabic Supplement"](fr)||Je["Arabic Extended-A"](fr)||Je["Arabic Presentation Forms-A"](fr)||Je["Arabic Presentation Forms-B"](fr))return!1;var fr;return!0}(Vt)?Pt:0,ir=I.get("text-anchor").evaluate(Le,{},y),Gt=I.get("text-variable-anchor");if(!Gt){var er=I.get("text-radial-offset").evaluate(Le,{},y);rt=er?zv(ir,[24*er,Ld]):I.get("text-offset").evaluate(Le,{},y).map(function(nr){return 24*nr})}var _t=ue?"center":I.get("text-justify").evaluate(Le,{},y),yr=I.get("symbol-placement"),Rr=yr==="point"?24*I.get("text-max-width").evaluate(Le,{},y):0,ui=function(){e.allowVerticalPlacement&&Tp(Vt)&&($e.vertical=Xp(vt,t,i,p,Ne,Rr,oe,ir,"left",ft,rt,en.vertical,!0,yr,Qe,He))};if(!ue&&Gt){for(var vi=_t==="auto"?Gt.map(function(nr){return Iu(nr)}):[_t],$r=!1,Zr=0;Zr<vi.length;Zr++){var tn=vi[Zr];if(!$e.horizontal[tn])if($r)$e.horizontal[tn]=$e.horizontal[0];else{var ei=Xp(vt,t,i,p,Ne,Rr,oe,"center",tn,ft,rt,en.horizontal,!1,yr,Qe,He);ei&&($e.horizontal[tn]=ei,$r=ei.positionedLines.length===1)}}ui()}else{_t==="auto"&&(_t=Iu(ir));var yi=Xp(vt,t,i,p,Ne,Rr,oe,ir,_t,ft,rt,en.horizontal,!1,yr,Qe,He);yi&&($e.horizontal[_t]=yi),ui(),Tp(Vt)&&ue&&ve&&($e.vertical=Xp(vt,t,i,p,Ne,Rr,oe,ir,_t,ft,rt,en.vertical,!1,yr,Qe,He))}}var ci=void 0,Wn=!1;if(Le.icon&&Le.icon.name){var ti=l[Le.icon.name];ti&&(ci=function(nr,Ir,gr){var fr=el(gr),fn=Ir[0]-nr.displaySize[0]*fr.horizontalAlign,dn=Ir[1]-nr.displaySize[1]*fr.verticalAlign;return{image:nr,top:dn,bottom:dn+nr.displaySize[1],left:fn,right:fn+nr.displaySize[0]}}(p[Le.icon.name],I.get("icon-offset").evaluate(Le,{},y),I.get("icon-anchor").evaluate(Le,{},y)),Wn=ti.sdf,e.sdfIcons===void 0?e.sdfIcons=ti.sdf:e.sdfIcons!==ti.sdf&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ti.pixelRatio!==e.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Nn=Fl($e.horizontal)||$e.vertical;e.iconsInText=!!Nn&&Nn.iconsInText,(Nn||ci)&&function(nr,Ir,gr,fr,fn,dn,Wr,Li,Ri,_r,Vo){var co=dn.textMaxSize.evaluate(Ir,{});co===void 0&&(co=Wr);var al,Yr=nr.layers[0].layout,Ha=Yr.get("icon-offset").evaluate(Ir,{},Vo),Pn=Fl(gr.horizontal),Gl=Wr/24,Ac=nr.tilePixelRatio*Gl,Dh=nr.tilePixelRatio*co/24,Xa=nr.tilePixelRatio*Li,Wa=nr.tilePixelRatio*Yr.get("symbol-spacing"),Nf=Yr.get("text-padding")*nr.tilePixelRatio,Lu=Yr.get("icon-padding")*nr.tilePixelRatio,Mh=Yr.get("text-max-angle")/180*Math.PI,Uf=Yr.get("text-rotation-alignment")==="map"&&Yr.get("symbol-placement")!=="point",zc=Yr.get("icon-rotation-alignment")==="map"&&Yr.get("symbol-placement")!=="point",Kl=Yr.get("symbol-placement"),tf=Wa/2,_a=Yr.get("icon-text-fit");fr&&_a!=="none"&&(nr.allowVerticalPlacement&&gr.vertical&&(al=xh(fr,gr.vertical,_a,Yr.get("icon-text-fit-padding"),Ha,Gl)),Pn&&(fr=xh(fr,Pn,_a,Yr.get("icon-text-fit-padding"),Ha,Gl)));var Pa=function(Yl,Ou){Ou.x<0||Ou.x>=8192||Ou.y<0||Ou.y>=8192||function(Ii,Cs,Bh,ba,Vd,Gf,af,sl,Lc,of,Kf,Ya,ll,Ds,No,Rv,Oh,p_,Bv,Vh,Yn,Hf,Fh,Uo,Tg){var Ov,jo,Nh,Vu,Uh,Fu=Ii.addToLineVertexArray(Cs,Bh),Ag=0,Vv=0,Rc=0,jh=0,Ms=-1,qh=-1,Jl={},Fv=ne(""),Nu=0,Ls=0;if(sl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Nu=(Ov=sl.layout.get("text-offset").evaluate(Yn,{},Uo).map(function(hf){return 24*hf}))[0],Ls=Ov[1]):(Nu=24*sl.layout.get("text-radial-offset").evaluate(Yn,{},Uo),Ls=Ld),Ii.allowVerticalPlacement&&ba.vertical){var Nv=sl.layout.get("text-rotate").evaluate(Yn,{},Uo)+90;Vu=new Vf(Lc,Cs,of,Kf,Ya,ba.vertical,ll,Ds,No,Nv),af&&(Uh=new Vf(Lc,Cs,of,Kf,Ya,af,Oh,p_,No,Nv))}if(Vd){var sf=sl.layout.get("icon-rotate").evaluate(Yn,{}),Fd=sl.layout.get("icon-text-fit")!=="none",Uv=Is(Vd,sf,Fh,Fd),Zh=af?Is(af,sf,Fh,Fd):void 0;Nh=new Vf(Lc,Cs,of,Kf,Ya,Vd,Oh,p_,!1,sf),Ag=4*Uv.length;var jv=Ii.iconSizeData,lf=null;jv.kind==="source"?(lf=[128*sl.layout.get("icon-size").evaluate(Yn,{})])[0]>32640&&Ot(Ii.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):jv.kind==="composite"&&((lf=[128*Hf.compositeIconSizes[0].evaluate(Yn,{},Uo),128*Hf.compositeIconSizes[1].evaluate(Yn,{},Uo)])[0]>32640||lf[1]>32640)&&Ot(Ii.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Ii.addSymbols(Ii.icon,Uv,lf,Vh,Bv,Yn,!1,Cs,Fu.lineStartIndex,Fu.lineLength,-1,Uo),Ms=Ii.icon.placedSymbolArray.length-1,Zh&&(Vv=4*Zh.length,Ii.addSymbols(Ii.icon,Zh,lf,Vh,Bv,Yn,en.vertical,Cs,Fu.lineStartIndex,Fu.lineLength,-1,Uo),qh=Ii.icon.placedSymbolArray.length-1)}for(var xa in ba.horizontal){var Rs=ba.horizontal[xa];if(!jo){Fv=ne(Rs.text);var ul=sl.layout.get("text-rotate").evaluate(Yn,{},Uo);jo=new Vf(Lc,Cs,of,Kf,Ya,Rs,ll,Ds,No,ul)}var Ql=Rs.positionedLines.length===1;if(Rc+=Pv(Ii,Cs,Rs,Gf,sl,No,Yn,Rv,Fu,ba.vertical?en.horizontal:en.horizontalOnly,Ql?Object.keys(ba.horizontal):[xa],Jl,Ms,Hf,Uo),Ql)break}ba.vertical&&(jh+=Pv(Ii,Cs,ba.vertical,Gf,sl,No,Yn,Rv,Fu,en.vertical,["vertical"],Jl,qh,Hf,Uo));var zg=jo?jo.boxStartIndex:Ii.collisionBoxArray.length,uf=jo?jo.boxEndIndex:Ii.collisionBoxArray.length,g0=Vu?Vu.boxStartIndex:Ii.collisionBoxArray.length,Pg=Vu?Vu.boxEndIndex:Ii.collisionBoxArray.length,cf=Nh?Nh.boxStartIndex:Ii.collisionBoxArray.length,mn=Nh?Nh.boxEndIndex:Ii.collisionBoxArray.length,Cg=Uh?Uh.boxStartIndex:Ii.collisionBoxArray.length,Dg=Uh?Uh.boxEndIndex:Ii.collisionBoxArray.length,cl=-1,Xf=function(hf,Zv){return hf&&hf.circleDiameter?Math.max(hf.circleDiameter,Zv):Zv};cl=Xf(jo,cl),cl=Xf(Vu,cl),cl=Xf(Nh,cl);var qv=(cl=Xf(Uh,cl))>-1?1:0;qv&&(cl*=Tg/24),Ii.glyphOffsetArray.length>=Dr.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Yn.sortKey!==void 0&&Ii.addToSortKeyRanges(Ii.symbolInstances.length,Yn.sortKey),Ii.symbolInstances.emplaceBack(Cs.x,Cs.y,Jl.right>=0?Jl.right:-1,Jl.center>=0?Jl.center:-1,Jl.left>=0?Jl.left:-1,Jl.vertical||-1,Ms,qh,Fv,zg,uf,g0,Pg,cf,mn,Cg,Dg,of,Rc,jh,Ag,Vv,qv,0,ll,Nu,Ls,cl)}(nr,Ou,Yl,gr,fr,fn,al,nr.layers[0],nr.collisionBoxArray,Ir.index,Ir.sourceLayerIndex,nr.index,Ac,Nf,Uf,Ri,Xa,Lu,zc,Ha,Ir,dn,_r,Vo,Wr)};if(Kl==="line")for(var Ca=0,Fo=Vl(Ir.geometry,0,0,8192,8192);Ca<Fo.length;Ca+=1)for(var jf=Fo[Ca],Hl=0,Bd=gg(jf,Wa,Mh,gr.vertical||Pn,fr,24,Dh,nr.overscaling,8192);Hl<Bd.length;Hl+=1){var qf=Bd[Hl];Pn&&rl(nr,Pn.text,tf,qf)||Pa(jf,qf)}else if(Kl==="line-center")for(var Xl=0,Wl=Ir.geometry;Xl<Wl.length;Xl+=1){var rf=Wl[Xl];if(rf.length>1){var Ru=kh(rf,Mh,gr.vertical||Pn,fr,24,Dh);Ru&&Pa(rf,Ru)}}else if(Ir.type==="Polygon")for(var Bu=0,Zf=ws(Ir.geometry,0);Bu<Zf.length;Bu+=1){var Lh=Zf[Bu],ol=_g(Lh,16);Pa(Lh[0],new Bf(ol.x,ol.y,0))}else if(Ir.type==="LineString")for(var Pc=0,Cc=Ir.geometry;Pc<Cc.length;Pc+=1){var Rh=Cc[Pc];Pa(Rh,new Bf(Rh[0].x,Rh[0].y,0))}else if(Ir.type==="Point")for(var nf=0,Ig=Ir.geometry;nf<Ig.length;nf+=1)for(var Od=0,Dc=Ig[nf];Od<Dc.length;Od+=1){var Mc=Dc[Od];Pa([Mc],new Bf(Mc.x,Mc.y,0))}}(e,Le,$e,ci,l,D,Qe,gt,rt,Wn,y)},Te=0,De=e.features;Te<De.length;Te+=1)we();d&&e.generateCollisionDebugBuffers()},a.perspective=function(e,t,i,l,p){var d,y=1/Math.tan(t/2);return e[0]=y/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},a.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},a.plugin=Fn,a.polygonIntersectsPolygon=ia,a.postMapLoadEvent=fo,a.postTurnstileEvent=Zn,a.potpack=Kp,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=ot,a.registerForPluginStateChange=function(e){return e({pluginStatus:Zi,pluginURL:kn}),Al.on("pluginStateChange",e),e},a.renderColorRamp=mv,a.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],y=t[3],I=Math.sin(i),C=Math.cos(i);return e[0]=l*C+d*I,e[1]=p*C+y*I,e[2]=l*-I+d*C,e[3]=p*-I+y*C,e},a.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],y=t[5],I=t[6],C=t[7],D=t[8],V=t[9],F=t[10],K=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+D*l,e[5]=y*p+V*l,e[6]=I*p+F*l,e[7]=C*p+K*l,e[8]=D*p-d*l,e[9]=V*p-y*l,e[10]=F*p-I*l,e[11]=K*p-C*l,e},a.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],y=t[1],I=t[2],C=t[3],D=t[4],V=t[5],F=t[6],K=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+D*l,e[1]=y*p+V*l,e[2]=I*p+F*l,e[3]=C*p+K*l,e[4]=D*p-d*l,e[5]=V*p-y*l,e[6]=F*p-I*l,e[7]=K*p-C*l,e},a.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},a.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},a.setCacheLimits=function(e,t){Ra=e,es=t},a.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),Zi==="deferred"||Zi==="loading"||Zi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");kn=Ia.resolveURL(e),Zi="deferred",lh=t,pc(),i||io()},a.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},a.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},a.styleSpec=H,a.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},a.symbolSize=yg,a.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},a.transformMat4=Tf,a.translate=function(e,t,i){var l,p,d,y,I,C,D,V,F,K,W,oe,ue=i[0],ve=i[1],pe=i[2];return t===e?(e[12]=t[0]*ue+t[4]*ve+t[8]*pe+t[12],e[13]=t[1]*ue+t[5]*ve+t[9]*pe+t[13],e[14]=t[2]*ue+t[6]*ve+t[10]*pe+t[14],e[15]=t[3]*ue+t[7]*ve+t[11]*pe+t[15]):(p=t[1],d=t[2],y=t[3],I=t[4],C=t[5],D=t[6],V=t[7],F=t[8],K=t[9],W=t[10],oe=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=y,e[4]=I,e[5]=C,e[6]=D,e[7]=V,e[8]=F,e[9]=K,e[10]=W,e[11]=oe,e[12]=l*ue+I*ve+F*pe+t[12],e[13]=p*ue+C*ve+K*pe+t[13],e[14]=d*ue+D*ve+W*pe+t[14],e[15]=y*ue+V*ve+oe*pe+t[15]),e},a.triggerPluginCompletionEvent=To,a.uniqueId=Mt,a.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},a.validateLight=cc,a.validateStyle=cs,a.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},a.vectorTile=Ka,a.version="1.13.3",a.warnOnce=Ot,a.webpSupported=qn,a.window=j,a.wrap=Ve}),x(["./shared"],function(a){function z(U){var G=typeof U;if(G==="number"||G==="boolean"||G==="string"||U==null)return JSON.stringify(U);if(Array.isArray(U)){for(var X="[",re=0,le=U;re<le.length;re+=1)X+=z(le[re])+",";return X+"]"}for(var ye=Object.keys(U).sort(),_e="{",H=0;H<ye.length;H++)_e+=JSON.stringify(ye[H])+":"+z(U[ye[H]])+",";return _e+"}"}function A(U){for(var G="",X=0,re=a.refProperties;X<re.length;X+=1)G+="/"+z(U[re[X]]);return G}var O=function(U){this.keyCache={},U&&this.replace(U)};O.prototype.replace=function(U){this._layerConfigs={},this._layers={},this.update(U,[])},O.prototype.update=function(U,G){for(var X=this,re=0,le=U;re<le.length;re+=1){var ye=le[re];this._layerConfigs[ye.id]=ye;var _e=this._layers[ye.id]=a.createStyleLayer(ye);_e._featureFilter=a.featureFilter(_e.filter),this.keyCache[ye.id]&&delete this.keyCache[ye.id]}for(var H=0,ae=G;H<ae.length;H+=1){var Se=ae[H];delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se]}this.familiesBySource={};for(var Ue=0,Ke=function(Ye,tt){for(var Ft={},Ge=0;Ge<Ye.length;Ge++){var Zt=tt&&tt[Ye[Ge].id]||A(Ye[Ge]);tt&&(tt[Ye[Ge].id]=Zt);var lr=Ft[Zt];lr||(lr=Ft[Zt]=[]),lr.push(Ye[Ge])}var Ct=[];for(var Qt in Ft)Ct.push(Ft[Qt]);return Ct}(a.values(this._layerConfigs),this.keyCache);Ue<Ke.length;Ue+=1){var Me=Ke[Ue].map(function(Ye){return X._layers[Ye.id]}),qe=Me[0];if(qe.visibility!=="none"){var ct=qe.source||"",st=this.familiesBySource[ct];st||(st=this.familiesBySource[ct]={});var Re=qe.sourceLayer||"_geojsonTileLayer",nt=st[Re];nt||(nt=st[Re]=[]),nt.push(Me)}}};var N=function(U){var G={},X=[];for(var re in U){var le=U[re],ye=G[re]={};for(var _e in le){var H=le[+_e];if(H&&H.bitmap.width!==0&&H.bitmap.height!==0){var ae={x:0,y:0,w:H.bitmap.width+2,h:H.bitmap.height+2};X.push(ae),ye[_e]={rect:ae,metrics:H.metrics}}}}var Se=a.potpack(X),Ue=new a.AlphaImage({width:Se.w||1,height:Se.h||1});for(var Ke in U){var Me=U[Ke];for(var qe in Me){var ct=Me[+qe];if(ct&&ct.bitmap.width!==0&&ct.bitmap.height!==0){var st=G[Ke][qe].rect;a.AlphaImage.copy(ct.bitmap,Ue,{x:0,y:0},{x:st.x+1,y:st.y+1},ct.bitmap)}}}this.image=Ue,this.positions=G};a.register("GlyphAtlas",N);var Z=function(U){this.tileID=new a.OverscaledTileID(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId};function j(U,G,X){for(var re=new a.EvaluationParameters(G),le=0,ye=U;le<ye.length;le+=1)ye[le].recalculate(re,X)}function fe(U,G){var X=a.getArrayBuffer(U.request,function(re,le,ye,_e){re?G(re):le&&G(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(le)),rawData:le,cacheControl:ye,expires:_e})});return function(){X.cancel(),G()}}Z.prototype.parse=function(U,G,X,re,le){var ye=this;this.status="parsing",this.data=U,this.collisionBoxArray=new a.CollisionBoxArray;var _e=new a.DictionaryCoder(Object.keys(U.layers).sort()),H=new a.FeatureIndex(this.tileID,this.promoteId);H.bucketLayerIDs=[];var ae,Se,Ue,Ke,Me={},qe={featureIndex:H,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},ct=G.familiesBySource[this.source];for(var st in ct){var Re=U.layers[st];if(Re){Re.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+st+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var nt=_e.encode(st),Ye=[],tt=0;tt<Re.length;tt++){var Ft=Re.feature(tt),Ge=H.getId(Ft,st);Ye.push({feature:Ft,id:Ge,index:tt,sourceLayerIndex:nt})}for(var Zt=0,lr=ct[st];Zt<lr.length;Zt+=1){var Ct=lr[Zt],Qt=Ct[0];Qt.minzoom&&this.zoom<Math.floor(Qt.minzoom)||Qt.maxzoom&&this.zoom>=Qt.maxzoom||Qt.visibility!=="none"&&(j(Ct,this.zoom,X),(Me[Qt.id]=Qt.createBucket({index:H.bucketLayerIDs.length,layers:Ct,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nt,sourceID:this.source})).populate(Ye,qe,this.tileID.canonical),H.bucketLayerIDs.push(Ct.map(function(dr){return dr.id})))}}}var Jt=a.mapObject(qe.glyphDependencies,function(dr){return Object.keys(dr).map(Number)});Object.keys(Jt).length?re.send("getGlyphs",{uid:this.uid,stacks:Jt},function(dr,Kt){ae||(ae=dr,Se=Kt,mr.call(ye))}):Se={};var zi=Object.keys(qe.iconDependencies);zi.length?re.send("getImages",{icons:zi,source:this.source,tileID:this.tileID,type:"icons"},function(dr,Kt){ae||(ae=dr,Ue=Kt,mr.call(ye))}):Ue={};var $t=Object.keys(qe.patternDependencies);function mr(){if(ae)return le(ae);if(Se&&Ue&&Ke){var dr=new N(Se),Kt=new a.ImageAtlas(Ue,Ke);for(var tr in Me){var Vi=Me[tr];Vi instanceof a.SymbolBucket?(j(Vi.layers,this.zoom,X),a.performSymbolLayout(Vi,Se,dr.positions,Ue,Kt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Vi.hasPattern&&(Vi instanceof a.LineBucket||Vi instanceof a.FillBucket||Vi instanceof a.FillExtrusionBucket)&&(j(Vi.layers,this.zoom,X),Vi.addFeatures(qe,this.tileID.canonical,Kt.patternPositions))}this.status="done",le(null,{buckets:a.values(Me).filter(function(ha){return!ha.isEmpty()}),featureIndex:H,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dr.image,imageAtlas:Kt,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?dr.positions:null})}}$t.length?re.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},function(dr,Kt){ae||(ae=dr,Ke=Kt,mr.call(ye))}):Ke={},mr.call(this)};var he=function(U,G,X,re){this.actor=U,this.layerIndex=G,this.availableImages=X,this.loadVectorData=re||fe,this.loading={},this.loaded={}};he.prototype.loadTile=function(U,G){var X=this,re=U.uid;this.loading||(this.loading={});var le=!!(U&&U.request&&U.request.collectResourceTiming)&&new a.RequestPerformance(U.request),ye=this.loading[re]=new Z(U);ye.abort=this.loadVectorData(U,function(_e,H){if(delete X.loading[re],_e||!H)return ye.status="done",X.loaded[re]=ye,G(_e);var ae=H.rawData,Se={};H.expires&&(Se.expires=H.expires),H.cacheControl&&(Se.cacheControl=H.cacheControl);var Ue={};if(le){var Ke=le.finish();Ke&&(Ue.resourceTiming=JSON.parse(JSON.stringify(Ke)))}ye.vectorTile=H.vectorTile,ye.parse(H.vectorTile,X.layerIndex,X.availableImages,X.actor,function(Me,qe){if(Me||!qe)return G(Me);G(null,a.extend({rawTileData:ae.slice(0)},qe,Se,Ue))}),X.loaded=X.loaded||{},X.loaded[re]=ye})},he.prototype.reloadTile=function(U,G){var X=this,re=this.loaded,le=U.uid,ye=this;if(re&&re[le]){var _e=re[le];_e.showCollisionBoxes=U.showCollisionBoxes;var H=function(ae,Se){var Ue=_e.reloadCallback;Ue&&(delete _e.reloadCallback,_e.parse(_e.vectorTile,ye.layerIndex,X.availableImages,ye.actor,Ue)),G(ae,Se)};_e.status==="parsing"?_e.reloadCallback=H:_e.status==="done"&&(_e.vectorTile?_e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,H):H())}},he.prototype.abortTile=function(U,G){var X=this.loading,re=U.uid;X&&X[re]&&X[re].abort&&(X[re].abort(),delete X[re]),G()},he.prototype.removeTile=function(U,G){var X=this.loaded,re=U.uid;X&&X[re]&&delete X[re],G()};var Ae=a.window.ImageBitmap,Ee=function(){this.loaded={}};function Ve(U,G){if(U.length!==0){je(U[0],G);for(var X=1;X<U.length;X++)je(U[X],!G)}}function je(U,G){for(var X=0,re=0,le=0,ye=U.length,_e=ye-1;le<ye;_e=le++){var H=(U[le][0]-U[_e][0])*(U[_e][1]+U[le][1]),ae=X+H;re+=Math.abs(X)>=Math.abs(H)?X-ae+H:H-ae+X,X=ae}X+re>=0!=!!G&&U.reverse()}Ee.prototype.loadTile=function(U,G){var X=U.uid,re=U.encoding,le=U.rawImageData,ye=Ae&&le instanceof Ae?this.getImageData(le):le,_e=new a.DEMData(X,ye,re);this.loaded=this.loaded||{},this.loaded[X]=_e,G(null,_e)},Ee.prototype.getImageData=function(U){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);var G=this.offscreenCanvasContext.getImageData(-1,-1,U.width+2,U.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:G.width,height:G.height},G.data)},Ee.prototype.removeTile=function(U){var G=this.loaded,X=U.uid;G&&G[X]&&delete G[X]};var Bt=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Mt=function(U){this._feature=U,this.extent=a.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))};Mt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var U=[],G=0,X=this._feature.geometry;G<X.length;G+=1){var re=X[G];U.push([new a.Point$1(re[0],re[1])])}return U}for(var le=[],ye=0,_e=this._feature.geometry;ye<_e.length;ye+=1){for(var H=[],ae=0,Se=_e[ye];ae<Se.length;ae+=1){var Ue=Se[ae];H.push(new a.Point$1(Ue[0],Ue[1]))}le.push(H)}return le},Mt.prototype.toGeoJSON=function(U,G,X){return Bt.call(this,U,G,X)};var mt=function(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=U.length,this._features=U};mt.prototype.feature=function(U){return new Mt(this._features[U])};var et=a.vectorTile.VectorTileFeature,Ar=Sr;function Sr(U,G){this.options=G||{},this.features=U,this.length=U.length}function or(U,G){this.id=typeof U.id=="number"?U.id:void 0,this.type=U.type,this.rawGeometry=U.type===1?[U.geometry]:U.geometry,this.properties=U.tags,this.extent=G||4096}Sr.prototype.feature=function(U){return new or(this.features[U],this.options.extent)},or.prototype.loadGeometry=function(){var U=this.rawGeometry;this.geometry=[];for(var G=0;G<U.length;G++){for(var X=U[G],re=[],le=0;le<X.length;le++)re.push(new a.Point$1(X[le][0],X[le][1]));this.geometry.push(re)}return this.geometry},or.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var U=this.geometry,G=1/0,X=-1/0,re=1/0,le=-1/0,ye=0;ye<U.length;ye++)for(var _e=U[ye],H=0;H<_e.length;H++){var ae=_e[H];G=Math.min(G,ae.x),X=Math.max(X,ae.x),re=Math.min(re,ae.y),le=Math.max(le,ae.y)}return[G,re,X,le]},or.prototype.toGeoJSON=et.prototype.toGeoJSON;var kt=Pr,Tt=Ar;function Pr(U){var G=new a.pbf;return function(X,re){for(var le in X.layers)re.writeMessage(3,Ot,X.layers[le])}(U,G),G.finish()}function Ot(U,G){var X;G.writeVarintField(15,U.version||1),G.writeStringField(1,U.name||""),G.writeVarintField(5,U.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(X=0;X<U.length;X++)re.feature=U.feature(X),G.writeMessage(2,zr,re);var le=re.keys;for(X=0;X<le.length;X++)G.writeStringField(3,le[X]);var ye=re.values;for(X=0;X<ye.length;X++)G.writeMessage(4,Tr,ye[X])}function zr(U,G){var X=U.feature;X.id!==void 0&&G.writeVarintField(1,X.id),G.writeMessage(2,at,U),G.writeVarintField(3,X.type),G.writeMessage(4,hi,X)}function at(U,G){var X=U.feature,re=U.keys,le=U.values,ye=U.keycache,_e=U.valuecache;for(var H in X.properties){var ae=ye[H];ae===void 0&&(re.push(H),ye[H]=ae=re.length-1),G.writeVarint(ae);var Se=X.properties[H],Ue=typeof Se;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(Se=JSON.stringify(Se));var Ke=Ue+":"+Se,Me=_e[Ke];Me===void 0&&(le.push(Se),_e[Ke]=Me=le.length-1),G.writeVarint(Me)}}function cr(U,G){return(G<<3)+(7&U)}function Jr(U){return U<<1^U>>31}function hi(U,G){for(var X=U.loadGeometry(),re=U.type,le=0,ye=0,_e=X.length,H=0;H<_e;H++){var ae=X[H],Se=1;re===1&&(Se=ae.length),G.writeVarint(cr(1,Se));for(var Ue=re===3?ae.length-1:ae.length,Ke=0;Ke<Ue;Ke++){Ke===1&&re!==1&&G.writeVarint(cr(2,Ue-1));var Me=ae[Ke].x-le,qe=ae[Ke].y-ye;G.writeVarint(Jr(Me)),G.writeVarint(Jr(qe)),le+=Me,ye+=qe}re===3&&G.writeVarint(cr(7,1))}}function Tr(U,G){var X=typeof U;X==="string"?G.writeStringField(1,U):X==="boolean"?G.writeBooleanField(7,U):X==="number"&&(U%1!=0?G.writeDoubleField(3,U):U<0?G.writeSVarintField(6,U):G.writeVarintField(5,U))}function gn(U,G,X,re){Fe(U,X,re),Fe(G,2*X,2*re),Fe(G,2*X+1,2*re+1)}function Fe(U,G,X){var re=U[G];U[G]=U[X],U[X]=re}function sr(U,G,X,re){var le=U-X,ye=G-re;return le*le+ye*ye}kt.fromVectorTileJs=Pr,kt.fromGeojsonVt=function(U,G){G=G||{};var X={};for(var re in U)X[re]=new Ar(U[re].features,G),X[re].name=re,X[re].version=G.version,X[re].extent=G.extent;return Pr({layers:X})},kt.GeoJSONWrapper=Tt;var jn=function(U){return U[0]},sa=function(U){return U[1]},Ti=function(U,G,X,re,le){G===void 0&&(G=jn),X===void 0&&(X=sa),re===void 0&&(re=64),le===void 0&&(le=Float64Array),this.nodeSize=re,this.points=U;for(var ye=U.length<65536?Uint16Array:Uint32Array,_e=this.ids=new ye(U.length),H=this.coords=new le(2*U.length),ae=0;ae<U.length;ae++)_e[ae]=ae,H[2*ae]=G(U[ae]),H[2*ae+1]=X(U[ae]);(function Se(Ue,Ke,Me,qe,ct,st){if(!(ct-qe<=Me)){var Re=qe+ct>>1;(function nt(Ye,tt,Ft,Ge,Zt,lr){for(;Zt>Ge;){if(Zt-Ge>600){var Ct=Zt-Ge+1,Qt=Ft-Ge+1,Jt=Math.log(Ct),zi=.5*Math.exp(2*Jt/3),$t=.5*Math.sqrt(Jt*zi*(Ct-zi)/Ct)*(Qt-Ct/2<0?-1:1);nt(Ye,tt,Ft,Math.max(Ge,Math.floor(Ft-Qt*zi/Ct+$t)),Math.min(Zt,Math.floor(Ft+(Ct-Qt)*zi/Ct+$t)),lr)}var mr=tt[2*Ft+lr],dr=Ge,Kt=Zt;for(gn(Ye,tt,Ge,Ft),tt[2*Zt+lr]>mr&&gn(Ye,tt,Ge,Zt);dr<Kt;){for(gn(Ye,tt,dr,Kt),dr++,Kt--;tt[2*dr+lr]<mr;)dr++;for(;tt[2*Kt+lr]>mr;)Kt--}tt[2*Ge+lr]===mr?gn(Ye,tt,Ge,Kt):gn(Ye,tt,++Kt,Zt),Kt<=Ft&&(Ge=Kt+1),Ft<=Kt&&(Zt=Kt-1)}})(Ue,Ke,Re,qe,ct,st%2),Se(Ue,Ke,Me,qe,Re-1,st+1),Se(Ue,Ke,Me,Re+1,ct,st+1)}})(_e,H,re,0,_e.length-1,0)};Ti.prototype.range=function(U,G,X,re){return function(le,ye,_e,H,ae,Se,Ue){for(var Ke,Me,qe=[0,le.length-1,0],ct=[];qe.length;){var st=qe.pop(),Re=qe.pop(),nt=qe.pop();if(Re-nt<=Ue)for(var Ye=nt;Ye<=Re;Ye++)Me=ye[2*Ye+1],(Ke=ye[2*Ye])>=_e&&Ke<=ae&&Me>=H&&Me<=Se&&ct.push(le[Ye]);else{var tt=Math.floor((nt+Re)/2);Me=ye[2*tt+1],(Ke=ye[2*tt])>=_e&&Ke<=ae&&Me>=H&&Me<=Se&&ct.push(le[tt]);var Ft=(st+1)%2;(st===0?_e<=Ke:H<=Me)&&(qe.push(nt),qe.push(tt-1),qe.push(Ft)),(st===0?ae>=Ke:Se>=Me)&&(qe.push(tt+1),qe.push(Re),qe.push(Ft))}}return ct}(this.ids,this.coords,U,G,X,re,this.nodeSize)},Ti.prototype.within=function(U,G,X){return function(re,le,ye,_e,H,ae){for(var Se=[0,re.length-1,0],Ue=[],Ke=H*H;Se.length;){var Me=Se.pop(),qe=Se.pop(),ct=Se.pop();if(qe-ct<=ae)for(var st=ct;st<=qe;st++)sr(le[2*st],le[2*st+1],ye,_e)<=Ke&&Ue.push(re[st]);else{var Re=Math.floor((ct+qe)/2),nt=le[2*Re],Ye=le[2*Re+1];sr(nt,Ye,ye,_e)<=Ke&&Ue.push(re[Re]);var tt=(Me+1)%2;(Me===0?ye-H<=nt:_e-H<=Ye)&&(Se.push(ct),Se.push(Re-1),Se.push(tt)),(Me===0?ye+H>=nt:_e+H>=Ye)&&(Se.push(Re+1),Se.push(qe),Se.push(tt))}}return Ue}(this.ids,this.coords,U,G,X,this.nodeSize)};var _n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(U){return U}},ri=function(U){this.options=Bi(Object.create(_n),U),this.trees=new Array(this.options.maxZoom+1)};function Ia(U,G,X,re,le){return{x:U,y:G,zoom:1/0,id:X,parentId:-1,numPoints:re,properties:le}}function br(U,G){var X=U.geometry.coordinates,re=X[1];return{x:Vr(X[0]),y:Lt(re),zoom:1/0,index:G,parentId:-1}}function qn(U){return{type:"Feature",id:U.id,properties:Ja(U),geometry:{type:"Point",coordinates:[(re=U.x,360*(re-.5)),(G=U.y,X=(180-360*G)*Math.PI/180,360*Math.atan(Math.exp(X))/Math.PI-90)]}};var G,X,re}function Ja(U){var G=U.numPoints,X=G>=1e4?Math.round(G/1e3)+"k":G>=1e3?Math.round(G/100)/10+"k":G;return Bi(Bi({},U.properties),{cluster:!0,cluster_id:U.id,point_count:G,point_count_abbreviated:X})}function Vr(U){return U/360+.5}function Lt(U){var G=Math.sin(U*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function Bi(U,G){for(var X in G)U[X]=G[X];return U}function Oi(U){return U.x}function ur(U){return U.y}function Jn(U,G,X,re,le,ye){var _e=le-X,H=ye-re;if(_e!==0||H!==0){var ae=((U-X)*_e+(G-re)*H)/(_e*_e+H*H);ae>1?(X=le,re=ye):ae>0&&(X+=_e*ae,re+=H*ae)}return(_e=U-X)*_e+(H=G-re)*H}function gi(U,G,X,re){var le={id:U===void 0?null:U,type:G,geometry:X,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ye){var _e=ye.geometry,H=ye.type;if(H==="Point"||H==="MultiPoint"||H==="LineString")ii(ye,_e);else if(H==="Polygon"||H==="MultiLineString")for(var ae=0;ae<_e.length;ae++)ii(ye,_e[ae]);else if(H==="MultiPolygon")for(ae=0;ae<_e.length;ae++)for(var Se=0;Se<_e[ae].length;Se++)ii(ye,_e[ae][Se])}(le),le}function ii(U,G){for(var X=0;X<G.length;X+=3)U.minX=Math.min(U.minX,G[X]),U.minY=Math.min(U.minY,G[X+1]),U.maxX=Math.max(U.maxX,G[X]),U.maxY=Math.max(U.maxY,G[X+1])}function Fr(U,G,X,re){if(G.geometry){var le=G.geometry.coordinates,ye=G.geometry.type,_e=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),H=[],ae=G.id;if(X.promoteId?ae=G.properties[X.promoteId]:X.generateId&&(ae=re||0),ye==="Point")pi(le,H);else if(ye==="MultiPoint")for(var Se=0;Se<le.length;Se++)pi(le[Se],H);else if(ye==="LineString")Ai(le,H,_e,!1);else if(ye==="MultiLineString"){if(X.lineMetrics){for(Se=0;Se<le.length;Se++)Ai(le[Se],H=[],_e,!1),U.push(gi(ae,"LineString",H,G.properties));return}ni(le,H,_e,!1)}else if(ye==="Polygon")ni(le,H,_e,!0);else{if(ye!=="MultiPolygon"){if(ye==="GeometryCollection"){for(Se=0;Se<G.geometry.geometries.length;Se++)Fr(U,{id:ae,geometry:G.geometry.geometries[Se],properties:G.properties},X,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Se=0;Se<le.length;Se++){var Ue=[];ni(le[Se],Ue,_e,!0),H.push(Ue)}}U.push(gi(ae,ye,H,G.properties))}}function pi(U,G){G.push(fi(U[0])),G.push(hr(U[1])),G.push(0)}function Ai(U,G,X,re){for(var le,ye,_e=0,H=0;H<U.length;H++){var ae=fi(U[H][0]),Se=hr(U[H][1]);G.push(ae),G.push(Se),G.push(0),H>0&&(_e+=re?(le*Se-ae*ye)/2:Math.sqrt(Math.pow(ae-le,2)+Math.pow(Se-ye,2))),le=ae,ye=Se}var Ue=G.length-3;G[2]=1,function Ke(Me,qe,ct,st){for(var Re,nt=st,Ye=ct-qe>>1,tt=ct-qe,Ft=Me[qe],Ge=Me[qe+1],Zt=Me[ct],lr=Me[ct+1],Ct=qe+3;Ct<ct;Ct+=3){var Qt=Jn(Me[Ct],Me[Ct+1],Ft,Ge,Zt,lr);if(Qt>nt)Re=Ct,nt=Qt;else if(Qt===nt){var Jt=Math.abs(Ct-Ye);Jt<tt&&(Re=Ct,tt=Jt)}}nt>st&&(Re-qe>3&&Ke(Me,qe,Re,st),Me[Re+2]=nt,ct-Re>3&&Ke(Me,Re,ct,st))}(G,0,Ue,X),G[Ue+2]=1,G.size=Math.abs(_e),G.start=0,G.end=G.size}function ni(U,G,X,re){for(var le=0;le<U.length;le++){var ye=[];Ai(U[le],ye,X,re),G.push(ye)}}function fi(U){return U/360+.5}function hr(U){var G=Math.sin(U*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function ar(U,G,X,re,le,ye,_e,H){if(re/=G,ye>=(X/=G)&&_e<re)return U;if(_e<X||ye>=re)return null;for(var ae=[],Se=0;Se<U.length;Se++){var Ue=U[Se],Ke=Ue.geometry,Me=Ue.type,qe=le===0?Ue.minX:Ue.minY,ct=le===0?Ue.maxX:Ue.maxY;if(qe>=X&&ct<re)ae.push(Ue);else if(!(ct<X||qe>=re)){var st=[];if(Me==="Point"||Me==="MultiPoint")bn(Ke,st,X,re,le);else if(Me==="LineString")Zn(Ke,st,X,re,le,!1,H.lineMetrics);else if(Me==="MultiLineString")fo(Ke,st,X,re,le,!1);else if(Me==="Polygon")fo(Ke,st,X,re,le,!0);else if(Me==="MultiPolygon")for(var Re=0;Re<Ke.length;Re++){var nt=[];fo(Ke[Re],nt,X,re,le,!0),nt.length&&st.push(nt)}if(st.length){if(H.lineMetrics&&Me==="LineString"){for(Re=0;Re<st.length;Re++)ae.push(gi(Ue.id,Me,st[Re],Ue.tags));continue}Me!=="LineString"&&Me!=="MultiLineString"||(st.length===1?(Me="LineString",st=st[0]):Me="MultiLineString"),Me!=="Point"&&Me!=="MultiPoint"||(Me=st.length===3?"Point":"MultiPoint"),ae.push(gi(Ue.id,Me,st,Ue.tags))}}}return ae.length?ae:null}function bn(U,G,X,re,le){for(var ye=0;ye<U.length;ye+=3){var _e=U[ye+le];_e>=X&&_e<=re&&(G.push(U[ye]),G.push(U[ye+1]),G.push(U[ye+2]))}}function Zn(U,G,X,re,le,ye,_e){for(var H,ae,Se=po(U),Ue=le===0?es:di,Ke=U.start,Me=0;Me<U.length-3;Me+=3){var qe=U[Me],ct=U[Me+1],st=U[Me+2],Re=U[Me+3],nt=U[Me+4],Ye=le===0?qe:ct,tt=le===0?Re:nt,Ft=!1;_e&&(H=Math.sqrt(Math.pow(qe-Re,2)+Math.pow(ct-nt,2))),Ye<X?tt>X&&(ae=Ue(Se,qe,ct,Re,nt,X),_e&&(Se.start=Ke+H*ae)):Ye>re?tt<re&&(ae=Ue(Se,qe,ct,Re,nt,re),_e&&(Se.start=Ke+H*ae)):Ra(Se,qe,ct,st),tt<X&&Ye>=X&&(ae=Ue(Se,qe,ct,Re,nt,X),Ft=!0),tt>re&&Ye<=re&&(ae=Ue(Se,qe,ct,Re,nt,re),Ft=!0),!ye&&Ft&&(_e&&(Se.end=Ke+H*ae),G.push(Se),Se=po(U)),_e&&(Ke+=H)}var Ge=U.length-3;qe=U[Ge],ct=U[Ge+1],st=U[Ge+2],(Ye=le===0?qe:ct)>=X&&Ye<=re&&Ra(Se,qe,ct,st),Ge=Se.length-3,ye&&Ge>=3&&(Se[Ge]!==Se[0]||Se[Ge+1]!==Se[1])&&Ra(Se,Se[0],Se[1],Se[2]),Se.length&&G.push(Se)}function po(U){var G=[];return G.size=U.size,G.start=U.start,G.end=U.end,G}function fo(U,G,X,re,le,ye){for(var _e=0;_e<U.length;_e++)Zn(U[_e],G,X,re,le,ye,!1)}function Ra(U,G,X,re){U.push(G),U.push(X),U.push(re)}function es(U,G,X,re,le,ye){var _e=(ye-G)/(re-G);return U.push(ye),U.push(X+(le-X)*_e),U.push(1),_e}function di(U,G,X,re,le,ye){var _e=(ye-X)/(le-X);return U.push(G+(re-G)*_e),U.push(ye),U.push(1),_e}function an(U,G){for(var X=[],re=0;re<U.length;re++){var le,ye=U[re],_e=ye.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")le=on(ye.geometry,G);else if(_e==="MultiLineString"||_e==="Polygon"){le=[];for(var H=0;H<ye.geometry.length;H++)le.push(on(ye.geometry[H],G))}else if(_e==="MultiPolygon")for(le=[],H=0;H<ye.geometry.length;H++){for(var ae=[],Se=0;Se<ye.geometry[H].length;Se++)ae.push(on(ye.geometry[H][Se],G));le.push(ae)}X.push(gi(ye.id,_e,le,ye.tags))}return X}function on(U,G){var X=[];X.size=U.size,U.start!==void 0&&(X.start=U.start,X.end=U.end);for(var re=0;re<U.length;re+=3)X.push(U[re]+G,U[re+1],U[re+2]);return X}function mo(U,G){if(U.transformed)return U;var X,re,le,ye=1<<U.z,_e=U.x,H=U.y;for(X=0;X<U.features.length;X++){var ae=U.features[X],Se=ae.geometry,Ue=ae.type;if(ae.geometry=[],Ue===1)for(re=0;re<Se.length;re+=2)ae.geometry.push(la(Se[re],Se[re+1],G,ye,_e,H));else for(re=0;re<Se.length;re++){var Ke=[];for(le=0;le<Se[re].length;le+=2)Ke.push(la(Se[re][le],Se[re][le+1],G,ye,_e,H));ae.geometry.push(Ke)}}return U.transformed=!0,U}function la(U,G,X,re,le,ye){return[Math.round(X*(U*re-le)),Math.round(X*(G*re-ye))]}function fl(U,G,X,re,le){for(var ye=G===le.maxZoom?0:le.tolerance/((1<<G)*le.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:X,y:re,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},H=0;H<U.length;H++){_e.numFeatures++,ts(_e,U[H],ye,le);var ae=U[H].minX,Se=U[H].minY,Ue=U[H].maxX,Ke=U[H].maxY;ae<_e.minX&&(_e.minX=ae),Se<_e.minY&&(_e.minY=Se),Ue>_e.maxX&&(_e.maxX=Ue),Ke>_e.maxY&&(_e.maxY=Ke)}return _e}function ts(U,G,X,re){var le=G.geometry,ye=G.type,_e=[];if(ye==="Point"||ye==="MultiPoint")for(var H=0;H<le.length;H+=3)_e.push(le[H]),_e.push(le[H+1]),U.numPoints++,U.numSimplified++;else if(ye==="LineString")Gn(_e,le,U,X,!1,!1);else if(ye==="MultiLineString"||ye==="Polygon")for(H=0;H<le.length;H++)Gn(_e,le[H],U,X,ye==="Polygon",H===0);else if(ye==="MultiPolygon")for(var ae=0;ae<le.length;ae++){var Se=le[ae];for(H=0;H<Se.length;H++)Gn(_e,Se[H],U,X,!0,H===0)}if(_e.length){var Ue=G.tags||null;if(ye==="LineString"&&re.lineMetrics){for(var Ke in Ue={},G.tags)Ue[Ke]=G.tags[Ke];Ue.mapbox_clip_start=le.start/le.size,Ue.mapbox_clip_end=le.end/le.size}var Me={geometry:_e,type:ye==="Polygon"||ye==="MultiPolygon"?3:ye==="LineString"||ye==="MultiLineString"?2:1,tags:Ue};G.id!==null&&(Me.id=G.id),U.features.push(Me)}}function Gn(U,G,X,re,le,ye){var _e=re*re;if(re>0&&G.size<(le?_e:re))X.numPoints+=G.length/3;else{for(var H=[],ae=0;ae<G.length;ae+=3)(re===0||G[ae+2]>_e)&&(X.numSimplified++,H.push(G[ae]),H.push(G[ae+1])),X.numPoints++;le&&function(Se,Ue){for(var Ke=0,Me=0,qe=Se.length,ct=qe-2;Me<qe;ct=Me,Me+=2)Ke+=(Se[Me]-Se[ct])*(Se[Me+1]+Se[ct+1]);if(Ke>0===Ue)for(Me=0,qe=Se.length;Me<qe/2;Me+=2){var st=Se[Me],Re=Se[Me+1];Se[Me]=Se[qe-2-Me],Se[Me+1]=Se[qe-1-Me],Se[qe-2-Me]=st,Se[qe-1-Me]=Re}}(H,ye),U.push(H)}}function xn(U,G){var X=(G=this.options=function(le,ye){for(var _e in ye)le[_e]=ye[_e];return le}(Object.create(this.options),G)).debug;if(X&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var re=function(le,ye){var _e=[];if(le.type==="FeatureCollection")for(var H=0;H<le.features.length;H++)Fr(_e,le.features[H],ye,H);else Fr(_e,le.type==="Feature"?le:{geometry:le},ye);return _e}(U,G);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(re=function(le,ye){var _e=ye.buffer/ye.extent,H=le,ae=ar(le,1,-1-_e,_e,0,-1,2,ye),Se=ar(le,1,1-_e,2+_e,0,-1,2,ye);return(ae||Se)&&(H=ar(le,1,-_e,1+_e,0,-1,2,ye)||[],ae&&(H=an(ae,1).concat(H)),Se&&(H=H.concat(an(Se,-1)))),H}(re,G)).length&&this.splitTile(re,0,0,0),X&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ua(U,G,X){return 32*((1<<U)*X+G)+U}function Qn(U,G){var X=U.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);var re=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!re)return G(null,null);var le=new mt(re.features),ye=kt(le);ye.byteOffset===0&&ye.byteLength===ye.buffer.byteLength||(ye=new Uint8Array(ye)),G(null,{vectorTile:le,rawData:ye.buffer})}ri.prototype.load=function(U){var G=this.options,X=G.log,re=G.minZoom,le=G.maxZoom,ye=G.nodeSize;X&&console.time("total time");var _e="prepare "+U.length+" points";X&&console.time(_e),this.points=U;for(var H=[],ae=0;ae<U.length;ae++)U[ae].geometry&&H.push(br(U[ae],ae));this.trees[le+1]=new Ti(H,Oi,ur,ye,Float32Array),X&&console.timeEnd(_e);for(var Se=le;Se>=re;Se--){var Ue=+Date.now();H=this._cluster(H,Se),this.trees[Se]=new Ti(H,Oi,ur,ye,Float32Array),X&&console.log("z%d: %d clusters in %dms",Se,H.length,+Date.now()-Ue)}return X&&console.timeEnd("total time"),this},ri.prototype.getClusters=function(U,G){var X=((U[0]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,U[1])),le=U[2]===180?180:((U[2]+180)%360+360)%360-180,ye=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)X=-180,le=180;else if(X>le){var _e=this.getClusters([X,re,180,ye],G),H=this.getClusters([-180,re,le,ye],G);return _e.concat(H)}for(var ae=this.trees[this._limitZoom(G)],Se=[],Ue=0,Ke=ae.range(Vr(X),Lt(ye),Vr(le),Lt(re));Ue<Ke.length;Ue+=1){var Me=ae.points[Ke[Ue]];Se.push(Me.numPoints?qn(Me):this.points[Me.index])}return Se},ri.prototype.getChildren=function(U){var G=this._getOriginId(U),X=this._getOriginZoom(U),re="No cluster with the specified id.",le=this.trees[X];if(!le)throw new Error(re);var ye=le.points[G];if(!ye)throw new Error(re);for(var _e=this.options.radius/(this.options.extent*Math.pow(2,X-1)),H=[],ae=0,Se=le.within(ye.x,ye.y,_e);ae<Se.length;ae+=1){var Ue=le.points[Se[ae]];Ue.parentId===U&&H.push(Ue.numPoints?qn(Ue):this.points[Ue.index])}if(H.length===0)throw new Error(re);return H},ri.prototype.getLeaves=function(U,G,X){var re=[];return this._appendLeaves(re,U,G=G||10,X=X||0,0),re},ri.prototype.getTile=function(U,G,X){var re=this.trees[this._limitZoom(U)],le=Math.pow(2,U),ye=this.options,_e=ye.radius/ye.extent,H=(X-_e)/le,ae=(X+1+_e)/le,Se={features:[]};return this._addTileFeatures(re.range((G-_e)/le,H,(G+1+_e)/le,ae),re.points,G,X,le,Se),G===0&&this._addTileFeatures(re.range(1-_e/le,H,1,ae),re.points,le,X,le,Se),G===le-1&&this._addTileFeatures(re.range(0,H,_e/le,ae),re.points,-1,X,le,Se),Se.features.length?Se:null},ri.prototype.getClusterExpansionZoom=function(U){for(var G=this._getOriginZoom(U)-1;G<=this.options.maxZoom;){var X=this.getChildren(U);if(G++,X.length!==1)break;U=X[0].properties.cluster_id}return G},ri.prototype._appendLeaves=function(U,G,X,re,le){for(var ye=0,_e=this.getChildren(G);ye<_e.length;ye+=1){var H=_e[ye],ae=H.properties;if(ae&&ae.cluster?le+ae.point_count<=re?le+=ae.point_count:le=this._appendLeaves(U,ae.cluster_id,X,re,le):le<re?le++:U.push(H),U.length===X)break}return le},ri.prototype._addTileFeatures=function(U,G,X,re,le,ye){for(var _e=0,H=U;_e<H.length;_e+=1){var ae=G[H[_e]],Se=ae.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(ae.x*le-X)),Math.round(this.options.extent*(ae.y*le-re))]],tags:Se?Ja(ae):this.points[ae.index].properties},Ke=void 0;Se?Ke=ae.id:this.options.generateId?Ke=ae.index:this.points[ae.index].id&&(Ke=this.points[ae.index].id),Ke!==void 0&&(Ue.id=Ke),ye.features.push(Ue)}},ri.prototype._limitZoom=function(U){return Math.max(this.options.minZoom,Math.min(+U,this.options.maxZoom+1))},ri.prototype._cluster=function(U,G){for(var X=[],re=this.options,le=re.reduce,ye=re.minPoints,_e=re.radius/(re.extent*Math.pow(2,G)),H=0;H<U.length;H++){var ae=U[H];if(!(ae.zoom<=G)){ae.zoom=G;for(var Se=this.trees[G+1],Ue=Se.within(ae.x,ae.y,_e),Ke=ae.numPoints||1,Me=Ke,qe=0,ct=Ue;qe<ct.length;qe+=1){var st=Se.points[ct[qe]];st.zoom>G&&(Me+=st.numPoints||1)}if(Me>=ye){for(var Re=ae.x*Ke,nt=ae.y*Ke,Ye=le&&Ke>1?this._map(ae,!0):null,tt=(H<<5)+(G+1)+this.points.length,Ft=0,Ge=Ue;Ft<Ge.length;Ft+=1){var Zt=Se.points[Ge[Ft]];if(!(Zt.zoom<=G)){Zt.zoom=G;var lr=Zt.numPoints||1;Re+=Zt.x*lr,nt+=Zt.y*lr,Zt.parentId=tt,le&&(Ye||(Ye=this._map(ae,!0)),le(Ye,this._map(Zt)))}}ae.parentId=tt,X.push(Ia(Re/Me,nt/Me,tt,Me,Ye))}else if(X.push(ae),Me>1)for(var Ct=0,Qt=Ue;Ct<Qt.length;Ct+=1){var Jt=Se.points[Qt[Ct]];Jt.zoom<=G||(Jt.zoom=G,X.push(Jt))}}}return X},ri.prototype._getOriginId=function(U){return U-this.points.length>>5},ri.prototype._getOriginZoom=function(U){return(U-this.points.length)%32},ri.prototype._map=function(U,G){if(U.numPoints)return G?Bi({},U.properties):U.properties;var X=this.points[U.index].properties,re=this.options.map(X);return G&&re===X?Bi({},re):re},xn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xn.prototype.splitTile=function(U,G,X,re,le,ye,_e){for(var H=[U,G,X,re],ae=this.options,Se=ae.debug;H.length;){re=H.pop(),X=H.pop(),G=H.pop(),U=H.pop();var Ue=1<<G,Ke=ua(G,X,re),Me=this.tiles[Ke];if(!Me&&(Se>1&&console.time("creation"),Me=this.tiles[Ke]=fl(U,G,X,re,ae),this.tileCoords.push({z:G,x:X,y:re}),Se)){Se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,X,re,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));var qe="z"+G;this.stats[qe]=(this.stats[qe]||0)+1,this.total++}if(Me.source=U,le){if(G===ae.maxZoom||G===le)continue;var ct=1<<le-G;if(X!==Math.floor(ye/ct)||re!==Math.floor(_e/ct))continue}else if(G===ae.indexMaxZoom||Me.numPoints<=ae.indexMaxPoints)continue;if(Me.source=null,U.length!==0){Se>1&&console.time("clipping");var st,Re,nt,Ye,tt,Ft,Ge=.5*ae.buffer/ae.extent,Zt=.5-Ge,lr=.5+Ge,Ct=1+Ge;st=Re=nt=Ye=null,tt=ar(U,Ue,X-Ge,X+lr,0,Me.minX,Me.maxX,ae),Ft=ar(U,Ue,X+Zt,X+Ct,0,Me.minX,Me.maxX,ae),U=null,tt&&(st=ar(tt,Ue,re-Ge,re+lr,1,Me.minY,Me.maxY,ae),Re=ar(tt,Ue,re+Zt,re+Ct,1,Me.minY,Me.maxY,ae),tt=null),Ft&&(nt=ar(Ft,Ue,re-Ge,re+lr,1,Me.minY,Me.maxY,ae),Ye=ar(Ft,Ue,re+Zt,re+Ct,1,Me.minY,Me.maxY,ae),Ft=null),Se>1&&console.timeEnd("clipping"),H.push(st||[],G+1,2*X,2*re),H.push(Re||[],G+1,2*X,2*re+1),H.push(nt||[],G+1,2*X+1,2*re),H.push(Ye||[],G+1,2*X+1,2*re+1)}}},xn.prototype.getTile=function(U,G,X){var re=this.options,le=re.extent,ye=re.debug;if(U<0||U>24)return null;var _e=1<<U,H=ua(U,G=(G%_e+_e)%_e,X);if(this.tiles[H])return mo(this.tiles[H],le);ye>1&&console.log("drilling down to z%d-%d-%d",U,G,X);for(var ae,Se=U,Ue=G,Ke=X;!ae&&Se>0;)Se--,Ue=Math.floor(Ue/2),Ke=Math.floor(Ke/2),ae=this.tiles[ua(Se,Ue,Ke)];return ae&&ae.source?(ye>1&&console.log("found parent tile z%d-%d-%d",Se,Ue,Ke),ye>1&&console.time("drilling down"),this.splitTile(ae.source,Se,Ue,Ke,U,G,X),ye>1&&console.timeEnd("drilling down"),this.tiles[H]?mo(this.tiles[H],le):null):null};var ca=function(U){function G(X,re,le,ye){U.call(this,X,re,le,Qn),ye&&(this.loadGeoJSON=ye)}return U&&(G.__proto__=U),(G.prototype=Object.create(U&&U.prototype)).constructor=G,G.prototype.loadData=function(X,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=re,this._pendingLoadDataParams=X,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},G.prototype._loadData=function(){var X=this;if(this._pendingCallback&&this._pendingLoadDataParams){var re=this._pendingCallback,le=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ye=!!(le&&le.request&&le.request.collectResourceTiming)&&new a.RequestPerformance(le.request);this.loadGeoJSON(le,function(_e,H){if(_e||!H)return re(_e);if(typeof H!="object")return re(new Error("Input data given to '"+le.source+"' is not a valid GeoJSON object."));(function Me(qe,ct){var st,Re=qe&&qe.type;if(Re==="FeatureCollection")for(st=0;st<qe.features.length;st++)Me(qe.features[st],ct);else if(Re==="GeometryCollection")for(st=0;st<qe.geometries.length;st++)Me(qe.geometries[st],ct);else if(Re==="Feature")Me(qe.geometry,ct);else if(Re==="Polygon")Ve(qe.coordinates,ct);else if(Re==="MultiPolygon")for(st=0;st<qe.coordinates.length;st++)Ve(qe.coordinates[st],ct);return qe})(H,!0);try{if(le.filter){var ae=a.createExpression(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map(function(Me){return Me.key+": "+Me.message}).join(", "));var Se=H.features.filter(function(Me){return ae.value.evaluate({zoom:0},Me)});H={type:"FeatureCollection",features:Se}}X._geoJSONIndex=le.cluster?new ri(function(Me){var qe=Me.superclusterOptions,ct=Me.clusterProperties;if(!ct||!qe)return qe;for(var st={},Re={},nt={accumulated:null,zoom:0},Ye={properties:null},tt=Object.keys(ct),Ft=0,Ge=tt;Ft<Ge.length;Ft+=1){var Zt=Ge[Ft],lr=ct[Zt],Ct=lr[0],Qt=a.createExpression(lr[1]),Jt=a.createExpression(typeof Ct=="string"?[Ct,["accumulated"],["get",Zt]]:Ct);st[Zt]=Qt.value,Re[Zt]=Jt.value}return qe.map=function(zi){Ye.properties=zi;for(var $t={},mr=0,dr=tt;mr<dr.length;mr+=1){var Kt=dr[mr];$t[Kt]=st[Kt].evaluate(nt,Ye)}return $t},qe.reduce=function(zi,$t){Ye.properties=$t;for(var mr=0,dr=tt;mr<dr.length;mr+=1){var Kt=dr[mr];nt.accumulated=zi[Kt],zi[Kt]=Re[Kt].evaluate(nt,Ye)}},qe}(le)).load(H.features):function(Me,qe){return new xn(Me,qe)}(H,le.geojsonVtOptions)}catch(Me){return re(Me)}X.loaded={};var Ue={};if(ye){var Ke=ye.finish();Ke&&(Ue.resourceTiming={},Ue.resourceTiming[le.source]=JSON.parse(JSON.stringify(Ke)))}re(null,Ue)})}},G.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},G.prototype.reloadTile=function(X,re){var le=this.loaded;return le&&le[X.uid]?U.prototype.reloadTile.call(this,X,re):this.loadTile(X,re)},G.prototype.loadGeoJSON=function(X,re){if(X.request)a.getJSON(X.request,re);else{if(typeof X.data!="string")return re(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."));try{return re(null,JSON.parse(X.data))}catch{return re(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."))}}},G.prototype.removeSource=function(X,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),re()},G.prototype.getClusterExpansionZoom=function(X,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(le){re(le)}},G.prototype.getClusterChildren=function(X,re){try{re(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(le){re(le)}},G.prototype.getClusterLeaves=function(X,re){try{re(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(le){re(le)}},G}(he),Nr=function(U){var G=this;this.self=U,this.actor=new a.Actor(U,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:he,geojson:ca},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(X,re){if(G.workerSourceTypes[X])throw new Error('Worker source with name "'+X+'" already registered.');G.workerSourceTypes[X]=re},this.self.registerRTLTextPlugin=function(X){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=X.applyArabicShaping,a.plugin.processBidirectionalText=X.processBidirectionalText,a.plugin.processStyledBidirectionalText=X.processStyledBidirectionalText}};return Nr.prototype.setReferrer=function(U,G){this.referrer=G},Nr.prototype.setImages=function(U,G,X){for(var re in this.availableImages[U]=G,this.workerSources[U]){var le=this.workerSources[U][re];for(var ye in le)le[ye].availableImages=G}X()},Nr.prototype.setLayers=function(U,G,X){this.getLayerIndex(U).replace(G),X()},Nr.prototype.updateLayers=function(U,G,X){this.getLayerIndex(U).update(G.layers,G.removedIds),X()},Nr.prototype.loadTile=function(U,G,X){this.getWorkerSource(U,G.type,G.source).loadTile(G,X)},Nr.prototype.loadDEMTile=function(U,G,X){this.getDEMWorkerSource(U,G.source).loadTile(G,X)},Nr.prototype.reloadTile=function(U,G,X){this.getWorkerSource(U,G.type,G.source).reloadTile(G,X)},Nr.prototype.abortTile=function(U,G,X){this.getWorkerSource(U,G.type,G.source).abortTile(G,X)},Nr.prototype.removeTile=function(U,G,X){this.getWorkerSource(U,G.type,G.source).removeTile(G,X)},Nr.prototype.removeDEMTile=function(U,G){this.getDEMWorkerSource(U,G.source).removeTile(G)},Nr.prototype.removeSource=function(U,G,X){if(this.workerSources[U]&&this.workerSources[U][G.type]&&this.workerSources[U][G.type][G.source]){var re=this.workerSources[U][G.type][G.source];delete this.workerSources[U][G.type][G.source],re.removeSource!==void 0?re.removeSource(G,X):X()}},Nr.prototype.loadWorkerSource=function(U,G,X){try{this.self.importScripts(G.url),X()}catch(re){X(re.toString())}},Nr.prototype.syncRTLPluginState=function(U,G,X){try{a.plugin.setState(G);var re=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&re!=null){this.self.importScripts(re);var le=a.plugin.isParsed();X(le?void 0:new Error("RTL Text Plugin failed to import scripts from "+re),le)}}catch(ye){X(ye.toString())}},Nr.prototype.getAvailableImages=function(U){var G=this.availableImages[U];return G||(G=[]),G},Nr.prototype.getLayerIndex=function(U){var G=this.layerIndexes[U];return G||(G=this.layerIndexes[U]=new O),G},Nr.prototype.getWorkerSource=function(U,G,X){var re=this;return this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][G]||(this.workerSources[U][G]={}),this.workerSources[U][G][X]||(this.workerSources[U][G][X]=new this.workerSourceTypes[G]({send:function(le,ye,_e){re.actor.send(le,ye,_e,U)}},this.getLayerIndex(U),this.getAvailableImages(U))),this.workerSources[U][G][X]},Nr.prototype.getDEMWorkerSource=function(U,G){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][G]||(this.demWorkerSources[U][G]=new Ee),this.demWorkerSources[U][G]},Nr.prototype.enforceCacheSizeLimit=function(U,G){a.enforceCacheSizeLimit(G)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Nr(self)),Nr}),x(["./shared"],function(a){var z=a.createCommonjsModule(function(n){function s(m){return!o(m)}function o(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,P,B=new Blob([""],{type:"text/javascript"}),q=URL.createObjectURL(B);try{P=new Worker(q),k=!0}catch{k=!1}return P&&P.terminate(),URL.revokeObjectURL(q),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var P=k.getContext("2d");if(!P)return!1;var B=P.getImageData(0,0,1,1);return B&&B.width===k.width}()?(c[E=m&&m.failIfMajorPerformanceCaveat]===void 0&&(c[E]=function(k){var P=function(q){var Y=document.createElement("canvas"),Q=Object.create(s.webGLContextAttributes);return Q.failIfMajorPerformanceCaveat=q,Y.probablySupportsContext?Y.probablySupportsContext("webgl",Q)||Y.probablySupportsContext("experimental-webgl",Q):Y.supportsContext?Y.supportsContext("webgl",Q)||Y.supportsContext("experimental-webgl",Q):Y.getContext("webgl",Q)||Y.getContext("experimental-webgl",Q)}(k);if(!P)return!1;var B=P.createShader(P.VERTEX_SHADER);return!(!B||P.isContextLost())&&(P.shaderSource(B,"void main() {}"),P.compileShader(B),P.getShaderParameter(B,P.COMPILE_STATUS)===!0)}(E)),c[E]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var E}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),A={create:function(n,s,o){var c=a.window.document.createElement(n);return s!==void 0&&(c.className=s),o&&o.appendChild(c),c},createNS:function(n,s){return a.window.document.createElementNS(n,s)}},O=a.window.document&&a.window.document.documentElement.style;function N(n){if(!O)return n[0];for(var s=0;s<n.length;s++)if(n[s]in O)return n[s];return n[0]}var Z,j=N(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);A.disableDrag=function(){O&&j&&(Z=O[j],O[j]="none")},A.enableDrag=function(){O&&j&&(O[j]=Z)};var fe=N(["transform","WebkitTransform"]);A.setTransform=function(n,s){n.style[fe]=s};var he=!1;try{var Ae=Object.defineProperty({},"passive",{get:function(){he=!0}});a.window.addEventListener("test",Ae,Ae),a.window.removeEventListener("test",Ae,Ae)}catch{he=!1}A.addEventListener=function(n,s,o,c){c===void 0&&(c={}),n.addEventListener(s,o,"passive"in c&&he?c:c.capture)},A.removeEventListener=function(n,s,o,c){c===void 0&&(c={}),n.removeEventListener(s,o,"passive"in c&&he?c:c.capture)};var Ee=function(n){n.preventDefault(),n.stopPropagation(),a.window.removeEventListener("click",Ee,!0)};function Ve(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}A.suppressClick=function(){a.window.addEventListener("click",Ee,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",Ee,!0)},0)},A.mousePos=function(n,s){var o=n.getBoundingClientRect();return new a.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},A.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),c=[],m=0;m<s.length;m++)c.push(new a.Point(s[m].clientX-o.left-n.clientLeft,s[m].clientY-o.top-n.clientTop));return c},A.mouseButton=function(n){return a.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},A.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var je=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var c=0,m=this.requestors;c<m.length;c+=1){var E=m[c];this._notify(E.ids,E.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,c){this._validate(o,c)&&(this.images[o]=c)},s.prototype._validate=function(o,c){var m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),m=!1),this._validateContent(c.content,c)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(o,c){if(!o)return!0;for(var m=0,E=0,k=o;E<k.length;E+=1){var P=k[E];if(P[0]<m||P[1]<P[0]||c<P[1])return!1;m=P[1]}return!0},s.prototype._validateContent=function(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,c){var m=!0;if(!this.isLoaded())for(var E=0,k=o;E<k.length;E+=1)this.images[k[E]]||(m=!1);this.isLoaded()||m?this._notify(o,c):this.requestors.push({ids:o,callback:c})},s.prototype._notify=function(o,c){for(var m={},E=0,k=o;E<k.length;E+=1){var P=k[E];this.images[P]||this.fire(new a.Event("styleimagemissing",{id:P}));var B=this.images[P];B?m[P]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:a.warnOnce('Image "'+P+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,m)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var c=this.patterns[o],m=this.getImage(o);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{var E={w:m.data.width+2,h:m.data.height+2,x:0,y:0},k=new a.ImagePosition(E,m);this.patterns[o]={bin:E,position:k}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var c in this.patterns)o.push(this.patterns[c].bin);var m=a.potpack(o),E=m.w,k=m.h,P=this.atlasImage;for(var B in P.resize({width:E||1,height:k||1}),this.patterns){var q=this.patterns[B].bin,Y=q.x+1,Q=q.y+1,$=this.images[B].data,ce=$.width,se=$.height;a.RGBAImage.copy($,P,{x:0,y:0},{x:Y,y:Q},{width:ce,height:se}),a.RGBAImage.copy($,P,{x:0,y:se-1},{x:Y,y:Q-1},{width:ce,height:1}),a.RGBAImage.copy($,P,{x:0,y:0},{x:Y,y:Q+se},{width:ce,height:1}),a.RGBAImage.copy($,P,{x:ce-1,y:0},{x:Y-1,y:Q},{width:1,height:se}),a.RGBAImage.copy($,P,{x:0,y:0},{x:Y+ce,y:Q},{width:1,height:se})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var c=0,m=o;c<m.length;c+=1){var E=m[c];if(!this.callbackDispatchedThisFrame[E]){this.callbackDispatchedThisFrame[E]=!0;var k=this.images[E];Ve(k)&&this.updateImage(E,k)}}},s}(a.Evented),Bt=et,Mt=et,mt=1e20;function et(n,s,o,c,m,E){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=m||"sans-serif",this.fontWeight=E||"normal",this.radius=o||8;var k=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=k,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.d=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Int16Array(k),this.middle=Math.round(k/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ar(n,s,o,c,m,E,k){for(var P=0;P<s;P++){for(var B=0;B<o;B++)c[B]=n[B*s+P];for(Sr(c,m,E,k,o),B=0;B<o;B++)n[B*s+P]=m[B]}for(B=0;B<o;B++){for(P=0;P<s;P++)c[P]=n[B*s+P];for(Sr(c,m,E,k,s),P=0;P<s;P++)n[B*s+P]=Math.sqrt(m[P])}}function Sr(n,s,o,c,m){o[0]=0,c[0]=-mt,c[1]=+mt;for(var E=1,k=0;E<m;E++){for(var P=(n[E]+E*E-(n[o[k]]+o[k]*o[k]))/(2*E-2*o[k]);P<=c[k];)k--,P=(n[E]+E*E-(n[o[k]]+o[k]*o[k]))/(2*E-2*o[k]);o[++k]=E,c[k]=P,c[k+1]=+mt}for(E=0,k=0;E<m;E++){for(;c[k+1]<E;)k++;s[E]=(E-o[k])*(E-o[k])+n[o[k]]}}et.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var m=s.data[4*c+3]/255;this.gridOuter[c]=m===1?0:m===0?mt:Math.pow(Math.max(0,.5-m),2),this.gridInner[c]=m===1?mt:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(Ar(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ar(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)o[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return o},Bt.default=Mt;var or=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};or.prototype.setURL=function(n){this.url=n},or.prototype.getGlyphs=function(n,s){var o=this,c=[];for(var m in n)for(var E=0,k=n[m];E<k.length;E+=1)c.push({stack:m,id:k[E]});a.asyncAll(c,function(P,B){var q=P.stack,Y=P.id,Q=o.entries[q];Q||(Q=o.entries[q]={glyphs:{},requests:{},ranges:{}});var $=Q.glyphs[Y];if($===void 0){if($=o._tinySDF(Q,q,Y))return Q.glyphs[Y]=$,void B(null,{stack:q,id:Y,glyph:$});var ce=Math.floor(Y/256);if(256*ce>65535)B(new Error("glyphs > 65535 not supported"));else if(Q.ranges[ce])B(null,{stack:q,id:Y,glyph:$});else{var se=Q.requests[ce];se||(se=Q.requests[ce]=[],or.loadGlyphRange(q,ce,o.url,o.requestManager,function(de,ne){if(ne){for(var me in ne)o._doesCharSupportLocalGlyph(+me)||(Q.glyphs[+me]=ne[+me]);Q.ranges[ce]=!0}for(var ge=0,Ie=se;ge<Ie.length;ge+=1)(0,Ie[ge])(de,ne);delete Q.requests[ce]})),se.push(function(de,ne){de?B(de):ne&&B(null,{stack:q,id:Y,glyph:ne[Y]||null})})}}else B(null,{stack:q,id:Y,glyph:$})},function(P,B){if(P)s(P);else if(B){for(var q={},Y=0,Q=B;Y<Q.length;Y+=1){var $=Q[Y],ce=$.stack,se=$.id,de=$.glyph;(q[ce]||(q[ce]={}))[se]=de&&{id:de.id,bitmap:de.bitmap.clone(),metrics:de.metrics}}s(null,q)}})},or.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](n)||a.isChar["Hangul Syllables"](n)||a.isChar.Hiragana(n)||a.isChar.Katakana(n))},or.prototype._tinySDF=function(n,s,o){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(o)){var m=n.tinySDF;if(!m){var E="400";/bold/i.test(s)?E="900":/medium/i.test(s)?E="500":/light/i.test(s)&&(E="200"),m=n.tinySDF=new or.TinySDF(24,3,8,.25,c,E)}return{id:o,bitmap:new a.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},or.loadGlyphRange=function(n,s,o,c,m){var E=256*s,k=E+255,P=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",E+"-"+k),a.ResourceType.Glyphs);a.getArrayBuffer(P,function(B,q){if(B)m(B);else if(q){for(var Y={},Q=0,$=a.parseGlyphPBF(q);Q<$.length;Q+=1){var ce=$[Q];Y[ce.id]=ce}m(null,Y)}})},or.TinySDF=Bt;var kt=function(){this.specification=a.styleSpec.light.position};kt.prototype.possiblyEvaluate=function(n,s){return a.sphericalToCartesian(n.expression.evaluate(s))},kt.prototype.interpolate=function(n,s,o){return{x:a.number(n.x,s.x,o),y:a.number(n.y,s.y,o),z:a.number(n.z,s.z,o)}};var Tt=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new kt,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Pr=function(n){function s(o){n.call(this),this._transitionable=new a.Transitionable(Tt),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,c){if(c===void 0&&(c={}),!this._validate(a.validateLight,o,c))for(var m in o){var E=o[m];a.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),E):this._transitionable.setValue(m,E)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,c,m){return(!m||m.validate!==!1)&&a.emitValidationErrors(this,o.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},s}(a.Evented),Ot=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ot.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},Ot.prototype.getDashRanges=function(n,s,o){var c=[],m=n.length%2==1?-n[n.length-1]*o:0,E=n[0]*o,k=!0;c.push({left:m,right:E,isDash:k,zeroLength:n[0]===0});for(var P=n[0],B=1;B<n.length;B++){var q=n[B];c.push({left:m=P*o,right:E=(P+=q)*o,isDash:k=!k,zeroLength:q===0})}return c},Ot.prototype.addRoundDash=function(n,s,o){for(var c=s/2,m=-o;m<=o;m++)for(var E=this.width*(this.nextRow+o+m),k=0,P=n[k],B=0;B<this.width;B++){B/P.right>1&&(P=n[++k]);var q=Math.abs(B-P.left),Y=Math.abs(B-P.right),Q=Math.min(q,Y),$=void 0,ce=m/o*(c+1);if(P.isDash){var se=c-Math.abs(ce);$=Math.sqrt(Q*Q+se*se)}else $=c-Math.sqrt(Q*Q+ce*ce);this.data[E+B]=Math.max(0,Math.min(255,$+128))}},Ot.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],c=n[s+1];o.zeroLength?n.splice(s,1):c&&c.isDash===o.isDash&&(c.left=o.left,n.splice(s,1))}var m=n[0],E=n[n.length-1];m.isDash===E.isDash&&(m.left=E.left-this.width,E.right=m.right+this.width);for(var k=this.width*this.nextRow,P=0,B=n[P],q=0;q<this.width;q++){q/B.right>1&&(B=n[++P]);var Y=Math.abs(q-B.left),Q=Math.abs(q-B.right),$=Math.min(Y,Q);this.data[k+q]=Math.max(0,Math.min(255,(B.isDash?$:-$)+128))}},Ot.prototype.addDash=function(n,s){var o=s?7:0,c=2*o+1;if(this.nextRow+c>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var m=0,E=0;E<n.length;E++)m+=n[E];if(m!==0){var k=this.width/m,P=this.getDashRanges(n,this.width,k);s?this.addRoundDash(P,k,o):this.addRegularDash(P)}var B={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:m};return this.nextRow+=c,this.dirty=!0,B},Ot.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var zr=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var c=this.workerPool.acquire(this.id),m=0;m<c.length;m++){var E=new n.Actor(c[m],o,this.id);E.name="Worker "+m,this.actors.push(E)}};function at(n,s,o){var c=function(m,E){if(m)return o(m);if(E){var k=a.pick(a.extend(E,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(k.vectorLayers=E.vector_layers,k.vectorLayerIds=k.vectorLayers.map(function(P){return P.id})),k.tiles=s.canonicalizeTileset(k,n.url),o(null,k)}};return n.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),a.ResourceType.Source),c):a.browser.frame(function(){return c(null,n)})}zr.prototype.broadcast=function(n,s,o){a.asyncAll(this.actors,function(c,m){c.send(n,s,m)},o=o||function(){})},zr.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},zr.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},zr.Actor=a.Actor;var cr=function(n,s,o){this.bounds=a.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};cr.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},cr.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),E=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<m&&n.y>=c&&n.y<E};var Jr=function(n){function s(o,c,m,E){if(n.call(this),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(c,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=at(this._options,this.map._requestManager,function(c,m){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):m&&(a.extend(o,m),m.bounds&&(o.tileBounds=new cr(m.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(m.tiles,o.map._requestManager._customAccessToken),a.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var c=this;return this.setSourceProperty(function(){c._options.tiles=o}),this},s.prototype.setUrl=function(o){var c=this;return this.setSourceProperty(function(){c.url=o,c._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.loadTile=function(o,c){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(m,a.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function k(P,B){return delete o.request,o.aborted?c(null):P&&P.status!==404?c(P):(B&&B.resourceTiming&&(o.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&o.setExpiryData(B),o.loadVectorData(B,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",E,k.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",E,k.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(a.Evented),hi=function(n){function s(o,c,m,E){n.call(this),this.id=o,this.dispatcher=m,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},c),a.extend(this,a.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=at(this._options,this.map._requestManager,function(c,m){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):m&&(a.extend(o,m),m.bounds&&(o.tileBounds=new cr(m.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(m.tiles),a.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,c){var m=this,E=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=a.getImage(this.map._requestManager.transformRequest(E,a.ResourceType.Tile),function(k,P){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(k)o.state="errored",c(k);else if(P){m.map._refreshExpiredTiles&&o.setExpiryData(P),delete P.cacheControl,delete P.expires;var B=m.map.painter.context,q=B.gl;o.texture=m.map.painter.getTileTexture(P.width),o.texture?o.texture.update(P,{useMipmap:!0}):(o.texture=new a.Texture(B,P,q.RGBA,{useMipmap:!0}),o.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&q.texParameterf(q.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),o.state="loaded",a.cacheEntryPossiblyAdded(m.dispatcher),c(null)}})},s.prototype.abortTile=function(o,c){o.request&&(o.request.cancel(),delete o.request),c()},s.prototype.unloadTile=function(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Tr=function(n){function s(o,c,m,E){n.call(this,o,c,m,E),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,c){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function E(k,P){k&&(o.state="errored",c(k)),P&&(o.dem=P,o.needsHillshadePrepare=!0,o.state="loaded",c(null))}o.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),(function(k,P){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(k)o.state="errored",c(k);else if(P){this.map._refreshExpiredTiles&&o.setExpiryData(P),delete P.cacheControl,delete P.expires;var B=a.window.ImageBitmap&&P instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?P:a.browser.getImageData(P,1),q={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:B,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",q,E.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var c=o.canonical,m=Math.pow(2,c.z),E=(c.x-1+m)%m,k=c.x===0?o.wrap-1:o.wrap,P=(c.x+1+m)%m,B=c.x+1===m?o.wrap+1:o.wrap,q={};return q[new a.OverscaledTileID(o.overscaledZ,k,c.z,E,c.y).key]={backfilled:!1},q[new a.OverscaledTileID(o.overscaledZ,B,c.z,P,c.y).key]={backfilled:!1},c.y>0&&(q[new a.OverscaledTileID(o.overscaledZ,k,c.z,E,c.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(o.overscaledZ,B,c.z,P,c.y-1).key]={backfilled:!1}),c.y+1<m&&(q[new a.OverscaledTileID(o.overscaledZ,k,c.z,E,c.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(o.overscaledZ,B,c.z,P,c.y+1).key]={backfilled:!1}),q},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(hi),gn=function(n){function s(o,c,m,E){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(E),this._data=c.data,this._options=a.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var k=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*k,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*k,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.EXTENT,radius:(c.clusterRadius||50)*k,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)o.fire(new a.ErrorEvent(c));else{var m={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(m.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new a.Event("data",m))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var c=this;return this._data=o,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new a.ErrorEvent(m));else{var E={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(E.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new a.Event("data",E))}}),this},s.prototype.getClusterExpansionZoom=function(o,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},c),this},s.prototype.getClusterChildren=function(o,c){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},c),this},s.prototype.getClusterLeaves=function(o,c,m,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:c,offset:m},E),this},s.prototype._updateWorkerData=function(o){var c=this;this._loaded=!1;var m=a.extend({},this.workerOptions),E=this._data;typeof E=="string"?(m.request=this.map._requestManager.transformRequest(a.browser.resolveURL(E),a.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(E),this.actor.send(this.type+".loadData",m,function(k,P){c._removed||P&&P.abandoned||(c._loaded=!0,P&&P.resourceTiming&&P.resourceTiming[c.id]&&(c._resourceTiming=P.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:m.source},null),o(k))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,c){var m=this,E=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(E,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(k,P){return delete o.request,o.unloadVectorData(),o.aborted?c(null):k?c(k):(o.loadVectorData(P,m.map.painter,E==="reloadTile"),c(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Fe=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),sr=function(n){function s(o,c,m,E){n.call(this),this.id=o,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,c){var m=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(E,k){m._loaded=!0,E?m.fire(new a.ErrorEvent(E)):k&&(m.image=k,o&&(m.coordinates=o),c&&c(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var c=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var c=this;this.coordinates=o;var m=o.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(k){for(var P=1/0,B=1/0,q=-1/0,Y=-1/0,Q=0,$=k;Q<$.length;Q+=1){var ce=$[Q];P=Math.min(P,ce.x),B=Math.min(B,ce.y),q=Math.max(q,ce.x),Y=Math.max(Y,ce.y)}var se=Math.max(q-P,Y-B),de=Math.max(0,Math.floor(-Math.log(se)/Math.LN2)),ne=Math.pow(2,de);return new a.CanonicalTileID(de,Math.floor((P+q)/2*ne),Math.floor((B+Y)/2*ne))}(m),this.minzoom=this.maxzoom=this.tileID.z;var E=m.map(function(k){return c.tileID.getTilePoint(k)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(E[0].x,E[0].y,0,0),this._boundsArray.emplaceBack(E[1].x,E[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(E[3].x,E[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(E[2].x,E[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,c=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.loadTile=function(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(a.Evented),jn=function(n){function s(o,c,m,E){n.call(this,o,c,m,E),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var c=this.options;this.urls=[];for(var m=0,E=c.urls;m<E.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(E[m],a.ResourceType.Source).url);a.getVideo(this.urls,function(k,P){o._loaded=!0,k?o.fire(new a.ErrorEvent(k)):P&&(o.video=P,o.video.loop=!0,o.video.setAttribute("playsinline",""),o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,c=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(sr),sa=function(n){function s(o,c,m,E){n.call(this,o,c,m,E),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(k){return!Array.isArray(k)||k.length!==2||k.some(function(P){return typeof P!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,m=c.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(c,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var k=this.tiles[E];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,c=[this.canvas.width,this.canvas.height];o<c.length;o+=1){var m=c[o];if(isNaN(m)||m<=0)return!0}return!1},s}(sr),Ti={vector:Jr,raster:hi,"raster-dem":Tr,geojson:gn,video:jn,image:sr,canvas:sa};function _n(n,s){var o=a.identity([]);return a.translate(o,o,[1,1,0]),a.scale(o,o,[.5*n.width,.5*n.height,1]),a.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function ri(n,s,o,c,m,E){var k=function(de,ne,me){if(de)for(var ge=0,Ie=de;ge<Ie.length;ge+=1){var Be=ne[Ie[ge]];if(Be&&Be.source===me&&Be.type==="fill-extrusion")return!0}else for(var Ce in ne){var Oe=ne[Ce];if(Oe.source===me&&Oe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),P=E.maxPitchScaleFactor(),B=n.tilesIn(c,P,k);B.sort(Ia);for(var q=[],Y=0,Q=B;Y<Q.length;Y+=1){var $=Q[Y];q.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(s,o,n._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,m,E,P,_n(n.transform,$.tileID))})}var ce=function(de){for(var ne={},me={},ge=0,Ie=de;ge<Ie.length;ge+=1){var Be=Ie[ge],Ce=Be.queryResults,Oe=Be.wrappedTileID,Ze=me[Oe]=me[Oe]||{};for(var Xe in Ce)for(var We=Ce[Xe],ut=Ze[Xe]=Ze[Xe]||{},wt=ne[Xe]=ne[Xe]||[],bt=0,St=We;bt<St.length;bt+=1){var pr=St[bt];ut[pr.featureIndex]||(ut[pr.featureIndex]=!0,wt.push(pr))}}return ne}(q);for(var se in ce)ce[se].forEach(function(de){var ne=de.feature,me=n.getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=me});return ce}function Ia(n,s){var o=n.tileID,c=s.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}var br=function(n,s){this.max=n,this.onRemove=s,this.reset()};br.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var c=o[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},br.prototype.add=function(n,s,o){var c=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var E={value:s,timeout:void 0};if(o!==void 0&&(E.timeout=setTimeout(function(){c.remove(n,E)},o)),this.data[m].push(E),this.order.push(m),this.order.length>this.max){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},br.prototype.has=function(n){return n.wrapped().key in this.data},br.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},br.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},br.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},br.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},br.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,c=s===void 0?0:this.data[o].indexOf(s),m=this.data[o][c];return this.data[o].splice(c,1),m.timeout&&clearTimeout(m.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(m.value),this.order.splice(this.order.indexOf(o),1),this},br.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},br.prototype.filter=function(n){var s=[];for(var o in this.data)for(var c=0,m=this.data[o];c<m.length;c+=1){var E=m[c];n(E.value)||s.push(E)}for(var k=0,P=s;k<P.length;k+=1){var B=P[k];this.remove(B.value.tileID,B)}};var qn=function(n,s,o){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!o,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};qn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},qn.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},qn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ja={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Vr=function(n,s,o,c){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Vr.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Vr.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},Vr.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var c=s.attributes[this.attributes[o].name];c!==void 0&&n.enableVertexAttribArray(c)}},Vr.prototype.setVertexAttribPointers=function(n,s,o){for(var c=0;c<this.attributes.length;c++){var m=this.attributes[c],E=s.attributes[m.name];E!==void 0&&n.vertexAttribPointer(E,m.components,n[Ja[m.type]],!1,this.itemSize,m.offset+this.itemSize*(o||0))}},Vr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Lt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Lt.prototype.get=function(){return this.current},Lt.prototype.set=function(n){},Lt.prototype.getDefault=function(){return this.default},Lt.prototype.setDefault=function(){this.set(this.default)};var Bi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Lt),Oi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(Lt),ur=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(Lt),Jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Lt),gi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(Lt),ii=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(Lt),Fr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(Lt),pi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(Lt),Ai=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(Lt),ni=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Lt),fi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(Lt),hr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(Lt),ar=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}},s}(Lt),bn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Lt),Zn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Lt),po=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(Lt),fo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}},s}(Lt),Ra=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(Lt),es=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(Lt),di=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(Lt),an=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(Lt),on=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Lt),mo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(Lt),la=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Lt),fl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(Lt),ts=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(Lt),Gn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(Lt),xn=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(Lt),ua=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(Lt),Qn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(Lt),ca=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(Lt),Nr=function(n){function s(o,c){n.call(this,o),this.context=o,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Lt),U=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(Nr),G=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Nr),X=function(n,s,o,c){this.context=n,this.width=s,this.height=o;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new U(n,m),c&&(this.depthAttachment=new G(n,m))};X.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var re=function(n,s,o){this.func=n,this.mask=s,this.range=o};re.ReadOnly=!1,re.ReadWrite=!0,re.disabled=new re(519,re.ReadOnly,[0,1]);var le=function(n,s,o,c,m,E){this.test=n,this.ref=s,this.mask=o,this.fail=c,this.depthFail=m,this.pass=E};le.disabled=new le({func:519,mask:0},0,0,7680,7680,7680);var ye=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};ye.disabled=new ye(ye.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),ye.unblended=new ye(ye.Replace,a.Color.transparent,[!0,!0,!0,!0]),ye.alphaBlended=new ye([1,771],a.Color.transparent,[!0,!0,!0,!0]);var _e=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};_e.disabled=new _e(!1,1029,2305),_e.backCCW=new _e(!0,1029,2305);var H=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Bi(this),this.clearDepth=new Oi(this),this.clearStencil=new ur(this),this.colorMask=new Jn(this),this.depthMask=new gi(this),this.stencilMask=new ii(this),this.stencilFunc=new Fr(this),this.stencilOp=new pi(this),this.stencilTest=new Ai(this),this.depthRange=new ni(this),this.depthTest=new fi(this),this.depthFunc=new hr(this),this.blend=new ar(this),this.blendFunc=new bn(this),this.blendColor=new Zn(this),this.blendEquation=new po(this),this.cullFace=new fo(this),this.cullFaceSide=new Ra(this),this.frontFace=new es(this),this.program=new di(this),this.activeTexture=new an(this),this.viewport=new on(this),this.bindFramebuffer=new mo(this),this.bindRenderbuffer=new la(this),this.bindTexture=new fl(this),this.bindVertexBuffer=new ts(this),this.bindElementBuffer=new Gn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new xn(this),this.pixelStoreUnpack=new ua(this),this.pixelStoreUnpackPremultiplyAlpha=new Qn(this),this.pixelStoreUnpackFlipY=new ca(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};H.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},H.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},H.prototype.createIndexBuffer=function(n,s){return new qn(this,n,s)},H.prototype.createVertexBuffer=function(n,s,o){return new Vr(this,n,s,o)},H.prototype.createRenderbuffer=function(n,s,o){var c=this.gl,m=c.createRenderbuffer();return this.bindRenderbuffer.set(m),c.renderbufferStorage(c.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),m},H.prototype.createFramebuffer=function(n,s,o){return new X(this,n,s,o)},H.prototype.clear=function(n){var s=n.color,o=n.depth,c=this.gl,m=0;s&&(m|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(m|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c.clear(m)},H.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},H.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},H.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},H.prototype.setColorMode=function(n){a.deepEqual(n.blendFunction,ye.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},H.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ae=function(n){function s(o,c,m){var E=this;n.call(this),this.id=o,this.dispatcher=m,this.on("data",function(k){k.dataType==="source"&&k.sourceDataType==="metadata"&&(E._sourceLoaded=!0),E._sourceLoaded&&!E._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(E.reload(),E.transform&&E.update(E.transform))}),this.on("error",function(){E._sourceErrored=!0}),this._source=function(k,P,B,q){var Y=new Ti[P.type](k,P,B,q);if(Y.id!==k)throw new Error("Expected Source id to be "+k+" instead of "+Y.id);return a.bindAll(["load","abort","unload","serialize","prepare"],Y),Y}(o,c,m,this),this._tiles={},this._cache=new br(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,c){return this._source.loadTile(o,c)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[c];m.upload(o),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return a.values(this._tiles).map(function(o){return o.tileID}).sort(Se).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var c=this,m=[];for(var E in this._tiles)this._isIdRenderable(E,o)&&m.push(this._tiles[E]);return o?m.sort(function(k,P){var B=k.tileID,q=P.tileID,Y=new a.Point(B.canonical.x,B.canonical.y)._rotate(c.transform.angle),Q=new a.Point(q.canonical.x,q.canonical.y)._rotate(c.transform.angle);return B.overscaledZ-q.overscaledZ||Q.y-Y.y||Q.x-Y.x}).map(function(k){return k.tileID.key}):m.map(function(k){return k.tileID}).sort(Se).map(function(k){return k.key})},s.prototype.hasRenderableParent=function(o){var c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,c){var m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,o,c)))},s.prototype._tileLoaded=function(o,c,m,E){if(E)return o.state="errored",void(E.status!==404?this._source.fire(new a.ErrorEvent(E,{tile:o})):this.update(this.transform));o.timeAdded=a.browser.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var c=this.getRenderableIds(),m=0;m<c.length;m++){var E=c[m];if(o.neighboringTiles&&o.neighboringTiles[E]){var k=this.getTileByID(E);P(o,k),P(k,o)}}function P(B,q){B.needsHillshadePrepare=!0;var Y=q.tileID.canonical.x-B.tileID.canonical.x,Q=q.tileID.canonical.y-B.tileID.canonical.y,$=Math.pow(2,B.tileID.canonical.z),ce=q.tileID.key;Y===0&&Q===0||Math.abs(Q)>1||(Math.abs(Y)>1&&(Math.abs(Y+$)===1?Y+=$:Math.abs(Y-$)===1&&(Y-=$)),q.dem&&B.dem&&(B.dem.backfillBorder(q.dem,Y,Q),B.neighboringTiles&&B.neighboringTiles[ce]&&(B.neighboringTiles[ce].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,c,m,E){for(var k in this._tiles){var P=this._tiles[k];if(!(E[k]||!P.hasData()||P.tileID.overscaledZ<=c||P.tileID.overscaledZ>m)){for(var B=P.tileID;P&&P.tileID.overscaledZ>c+1;){var q=P.tileID.scaledTo(P.tileID.overscaledZ-1);(P=this._tiles[q.key])&&P.hasData()&&(B=q)}for(var Y=B;Y.overscaledZ>c;)if(o[(Y=Y.scaledTo(Y.overscaledZ-1)).key]){E[B.key]=B;break}}}},s.prototype.findLoadedParent=function(o,c){if(o.key in this._loadedParentTiles){var m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=c?m:null}for(var E=o.overscaledZ-1;E>=c;E--){var k=o.scaledTo(E),P=this._getLoadedTile(k);if(P)return P}},s.prototype._getLoadedTile=function(o){var c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var c=Math.ceil(o.width/this._source.tileSize)+1,m=Math.ceil(o.height/this._source.tileSize)+1,E=Math.floor(c*m*5),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(k)},s.prototype.handleWrapJump=function(o){var c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){var m={};for(var E in this._tiles){var k=this._tiles[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),m[k.tileID.key]=k}for(var P in this._tiles=m,this._timers)clearTimeout(this._timers[P]),delete this._timers[P];for(var B in this._tiles)this._setTileReloadTimer(B,this._tiles[B])}},s.prototype.update=function(o){var c=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ze){return new a.OverscaledTileID(Ze.canonical.z,Ze.wrap,Ze.canonical.z,Ze.canonical.x,Ze.canonical.y)}):(m=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ze){return c._source.hasTile(Ze)}))):m=[];var E=o.coveringZoomLevel(this._source),k=Math.max(E-s.maxOverzooming,this._source.minzoom),P=Math.max(E+s.maxUnderzooming,this._source.minzoom),B=this._updateRetainedTiles(m,E);if(Ue(this._source.type)){for(var q={},Y={},Q=0,$=Object.keys(B);Q<$.length;Q+=1){var ce=$[Q],se=B[ce],de=this._tiles[ce];if(de&&!(de.fadeEndTime&&de.fadeEndTime<=a.browser.now())){var ne=this.findLoadedParent(se,k);ne&&(this._addTile(ne.tileID),q[ne.tileID.key]=ne.tileID),Y[ce]=se}}for(var me in this._retainLoadedChildren(Y,E,P,B),q)B[me]||(this._coveredTiles[me]=!0,B[me]=q[me])}for(var ge in B)this._tiles[ge].clearFadeHold();for(var Ie=0,Be=a.keysDifference(this._tiles,B);Ie<Be.length;Ie+=1){var Ce=Be[Ie],Oe=this._tiles[Ce];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(Ce)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,c){for(var m={},E={},k=Math.max(c-s.maxOverzooming,this._source.minzoom),P=Math.max(c+s.maxUnderzooming,this._source.minzoom),B={},q=0,Y=o;q<Y.length;q+=1){var Q=Y[q],$=this._addTile(Q);m[Q.key]=Q,$.hasData()||c<this._source.maxzoom&&(B[Q.key]=Q)}this._retainLoadedChildren(B,c,P,m);for(var ce=0,se=o;ce<se.length;ce+=1){var de=se[ce],ne=this._tiles[de.key];if(!ne.hasData()){if(c+1>this._source.maxzoom){var me=de.children(this._source.maxzoom)[0],ge=this.getTile(me);if(ge&&ge.hasData()){m[me.key]=me;continue}}else{var Ie=de.children(this._source.maxzoom);if(m[Ie[0].key]&&m[Ie[1].key]&&m[Ie[2].key]&&m[Ie[3].key])continue}for(var Be=ne.wasRequested(),Ce=de.overscaledZ-1;Ce>=k;--Ce){var Oe=de.scaledTo(Ce);if(E[Oe.key]||(E[Oe.key]=!0,!(ne=this.getTile(Oe))&&Be&&(ne=this._addTile(Oe)),ne&&(m[Oe.key]=Oe,Be=ne.wasRequested(),ne.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var c=[],m=void 0,E=this._tiles[o].tileID;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){m=this._loadedParentTiles[E.key];break}c.push(E.key);var k=E.scaledTo(E.overscaledZ-1);if(m=this._getLoadedTile(k))break;E=k}for(var P=0,B=c;P<B.length;P+=1)this._loadedParentTiles[B[P]]=m}},s.prototype._addTile=function(o){var c=this._tiles[o.key];if(c)return c;(c=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));var m=!!c;return m||(c=new a.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))),c?(c.uses++,this._tiles[o.key]=c,m||this._source.fire(new a.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(o,c){var m=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var E=c.getExpiryTimeout();E&&(this._timers[o]=setTimeout(function(){m._reloadTile(o,"expired"),delete m._timers[o]},E))},s.prototype._removeTile=function(o){var c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,c,m){var E=this,k=[],P=this.transform;if(!P)return k;for(var B=m?P.getCameraQueryGeometry(o):o,q=o.map(function(Ce){return P.pointCoordinate(Ce)}),Y=B.map(function(Ce){return P.pointCoordinate(Ce)}),Q=this.getIds(),$=1/0,ce=1/0,se=-1/0,de=-1/0,ne=0,me=Y;ne<me.length;ne+=1){var ge=me[ne];$=Math.min($,ge.x),ce=Math.min(ce,ge.y),se=Math.max(se,ge.x),de=Math.max(de,ge.y)}for(var Ie=function(Ce){var Oe=E._tiles[Q[Ce]];if(!Oe.holdingForFade()){var Ze=Oe.tileID,Xe=Math.pow(2,P.zoom-Oe.tileID.overscaledZ),We=c*Oe.queryPadding*a.EXTENT/Oe.tileSize/Xe,ut=[Ze.getTilePoint(new a.MercatorCoordinate($,ce)),Ze.getTilePoint(new a.MercatorCoordinate(se,de))];if(ut[0].x-We<a.EXTENT&&ut[0].y-We<a.EXTENT&&ut[1].x+We>=0&&ut[1].y+We>=0){var wt=q.map(function(St){return Ze.getTilePoint(St)}),bt=Y.map(function(St){return Ze.getTilePoint(St)});k.push({tile:Oe,tileID:Ze,queryGeometry:wt,cameraQueryGeometry:bt,scale:Xe})}}},Be=0;Be<Q.length;Be++)Ie(Be);return k},s.prototype.getVisibleCoordinates=function(o){for(var c=this,m=this.getRenderableIds(o).map(function(B){return c._tiles[B].tileID}),E=0,k=m;E<k.length;E+=1){var P=k[E];P.posMatrix=this.transform.calculatePosMatrix(P.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var o in this._tiles){var c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=a.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,c,m){this._state.updateState(o=o||"_geojsonTileLayer",c,m)},s.prototype.removeFeatureState=function(o,c,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,m)},s.prototype.getFeatureState=function(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(o,c,m){var E=this._tiles[o];E&&E.setDependencies(c,m)},s.prototype.reloadTilesForDependencies=function(o,c){for(var m in this._tiles)this._tiles[m].hasDependency(o,c)&&this._reloadTile(m,"reloading");this._cache.filter(function(E){return!E.hasDependency(o,c)})},s}(a.Evented);function Se(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ue(n){return n==="raster"||n==="image"||n==="video"}function Ke(){return new a.window.Worker(Aa.workerUrl)}ae.maxOverzooming=10,ae.maxUnderzooming=3;var Me="mapboxgl_preloaded_worker_pool",qe=function(){this.active={}};qe.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new Ke);return this.active[n]=!0,this.workers.slice()},qe.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},qe.prototype.isPreloaded=function(){return!!this.active[Me]},qe.prototype.numActive=function(){return Object.keys(this.active).length};var ct,st=Math.floor(a.browser.hardwareConcurrency/2);function Re(){return ct||(ct=new qe),ct}function nt(n,s){var o={};for(var c in n)c!=="ref"&&(o[c]=n[c]);return a.refProperties.forEach(function(m){m in s&&(o[m]=s[m])}),o}function Ye(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=nt(n[c],s[n[c].ref]));return n}qe.workerCount=Math.max(Math.min(st,6),1);var tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ft(n,s,o){o.push({command:tt.addSource,args:[n,s[n]]})}function Ge(n,s,o){s.push({command:tt.removeSource,args:[n]}),o[n]=!0}function Zt(n,s,o,c){Ge(n,o,c),Ft(n,s,o)}function lr(n,s,o){var c;for(c in n[o])if(n[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;for(c in s[o])if(s[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;return!0}function Ct(n,s,o,c,m,E){var k;for(k in s=s||{},n=n||{})n.hasOwnProperty(k)&&(a.deepEqual(n[k],s[k])||o.push({command:E,args:[c,k,s[k],m]}));for(k in s)s.hasOwnProperty(k)&&!n.hasOwnProperty(k)&&(a.deepEqual(n[k],s[k])||o.push({command:E,args:[c,k,s[k],m]}))}function Qt(n){return n.id}function Jt(n,s){return n[s.id]=s,n}var zi=function(n,s){this.reset(n,s)};zi.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},zi.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=a.clamp(n,0,1);for(var s=1,o=this._distances[s],c=n*this.paddedLength+this.padding;o<c&&s<this._distances.length;)o=this._distances[++s];var m=s-1,E=this._distances[m],k=o-E,P=k>0?(c-E)/k:0;return this.points[m].mult(1-P).add(this.points[s].mult(P))};var $t=function(n,s,o){var c=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var E=0;E<this.xCellCount*this.yCellCount;E++)c.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function mr(n,s,o,c,m){var E=a.create();return s?(a.scale(E,E,[1/m,1/m,1]),o||a.rotateZ(E,E,c.angle)):a.multiply(E,c.labelPlaneMatrix,n),E}function dr(n,s,o,c,m){if(s){var E=a.clone(n);return a.scale(E,E,[m,m,1]),o||a.rotateZ(E,E,-c.angle),E}return c.glCoordMatrix}function Kt(n,s){var o=[n.x,n.y,0,1];Gr(o,o,s);var c=o[3];return{point:new a.Point(o[0]/c,o[1]/c),signedDistanceFromCamera:c}}function tr(n,s){return .5+n/s*.5}function Vi(n,s){var o=n[0]/n[3],c=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&c>=-s[1]&&c<=s[1]}function ha(n,s,o,c,m,E,k,P){var B=c?n.textSizeData:n.iconSizeData,q=a.evaluateSizeForZoom(B,o.transform.zoom),Y=[256/o.width*2+1,256/o.height*2+1],Q=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;Q.clear();for(var $=n.lineVertexArray,ce=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,se=o.transform.width/o.transform.height,de=!1,ne=0;ne<ce.length;ne++){var me=ce.get(ne);if(me.hidden||me.writingMode===a.WritingMode.vertical&&!de)Fi(me.numGlyphs,Q);else{de=!1;var ge=[me.anchorX,me.anchorY,0,1];if(a.transformMat4(ge,ge,s),Vi(ge,Y)){var Ie=tr(o.transform.cameraToCenterDistance,ge[3]),Be=a.evaluateSizeForFeature(B,q,me),Ce=k?Be/Ie:Be*Ie,Oe=new a.Point(me.anchorX,me.anchorY),Ze=Kt(Oe,m).point,Xe={},We=wn(me,Ce,!1,P,s,m,E,n.glyphOffsetArray,$,Q,Ze,Oe,Xe,se);de=We.useVertical,(We.notEnoughRoom||de||We.needsFlipping&&wn(me,Ce,!0,P,s,m,E,n.glyphOffsetArray,$,Q,Ze,Oe,Xe,se).notEnoughRoom)&&Fi(me.numGlyphs,Q)}else Fi(me.numGlyphs,Q)}}c?n.text.dynamicLayoutVertexBuffer.updateData(Q):n.icon.dynamicLayoutVertexBuffer.updateData(Q)}function _i(n,s,o,c,m,E,k,P,B,q,Y){var Q=P.glyphStartIndex+P.numGlyphs,$=P.lineStartIndex,ce=P.lineStartIndex+P.lineLength,se=s.getoffsetX(P.glyphStartIndex),de=s.getoffsetX(Q-1),ne=vr(n*se,o,c,m,E,k,P.segment,$,ce,B,q,Y);if(!ne)return null;var me=vr(n*de,o,c,m,E,k,P.segment,$,ce,B,q,Y);return me?{first:ne,last:me}:null}function Hi(n,s,o,c){return n===a.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*c?{useVertical:!0}:(n===a.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function wn(n,s,o,c,m,E,k,P,B,q,Y,Q,$,ce){var se,de=s/24,ne=n.lineOffsetX*de,me=n.lineOffsetY*de;if(n.numGlyphs>1){var ge=n.glyphStartIndex+n.numGlyphs,Ie=n.lineStartIndex,Be=n.lineStartIndex+n.lineLength,Ce=_i(de,P,ne,me,o,Y,Q,n,B,E,$);if(!Ce)return{notEnoughRoom:!0};var Oe=Kt(Ce.first.point,k).point,Ze=Kt(Ce.last.point,k).point;if(c&&!o){var Xe=Hi(n.writingMode,Oe,Ze,ce);if(Xe)return Xe}se=[Ce.first];for(var We=n.glyphStartIndex+1;We<ge-1;We++)se.push(vr(de*P.getoffsetX(We),ne,me,o,Y,Q,n.segment,Ie,Be,B,E,$));se.push(Ce.last)}else{if(c&&!o){var ut=Kt(Q,m).point,wt=n.lineStartIndex+n.segment+1,bt=new a.Point(B.getx(wt),B.gety(wt)),St=Kt(bt,m),pr=St.signedDistanceFromCamera>0?St.point:Xi(Q,bt,ut,1,m),lt=Hi(n.writingMode,ut,pr,ce);if(lt)return lt}var At=vr(de*P.getoffsetX(n.glyphStartIndex),ne,me,o,Y,Q,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,B,E,$);if(!At)return{notEnoughRoom:!0};se=[At]}for(var Rt=0,zt=se;Rt<zt.length;Rt+=1){var Dt=zt[Rt];a.addDynamicAttributes(q,Dt.point,Dt.angle)}return{}}function Xi(n,s,o,c,m){var E=Kt(n.add(n.sub(s)._unit()),m).point,k=o.sub(E);return o.add(k._mult(c/k.mag()))}function vr(n,s,o,c,m,E,k,P,B,q,Y,Q){var $=c?n-s:n+s,ce=$>0?1:-1,se=0;c&&(ce*=-1,se=Math.PI),ce<0&&(se+=Math.PI);for(var de=ce>0?P+k:P+k+1,ne=m,me=m,ge=0,Ie=0,Be=Math.abs($),Ce=[];ge+Ie<=Be;){if((de+=ce)<P||de>=B)return null;if(me=ne,Ce.push(ne),(ne=Q[de])===void 0){var Oe=new a.Point(q.getx(de),q.gety(de)),Ze=Kt(Oe,Y);if(Ze.signedDistanceFromCamera>0)ne=Q[de]=Ze.point;else{var Xe=de-ce;ne=Xi(ge===0?E:new a.Point(q.getx(Xe),q.gety(Xe)),Oe,me,Be-ge+1,Y)}}ge+=Ie,Ie=me.dist(ne)}var We=(Be-ge)/Ie,ut=ne.sub(me),wt=ut.mult(We)._add(me);wt._add(ut._unit()._perp()._mult(o*ce));var bt=se+Math.atan2(ne.y-me.y,ne.x-me.x);return Ce.push(wt),{point:wt,angle:bt,path:Ce}}$t.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},$t.prototype.insert=function(n,s,o,c,m){this._forEachCell(s,o,c,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(m)},$t.prototype.insertCircle=function(n,s,o,c){this._forEachCell(s-c,o-c,s+c,o+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(c)},$t.prototype._insertBoxCell=function(n,s,o,c,m,E){this.boxCells[m].push(E)},$t.prototype._insertCircleCell=function(n,s,o,c,m,E){this.circleCells[m].push(E)},$t.prototype._query=function(n,s,o,c,m,E){if(o<0||n>this.width||c<0||s>this.height)return!m&&[];var k=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=c){if(m)return!0;for(var P=0;P<this.boxKeys.length;P++)k.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(var B=0;B<this.circleKeys.length;B++){var q=this.circles[3*B],Y=this.circles[3*B+1],Q=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:q-Q,y1:Y-Q,x2:q+Q,y2:Y+Q})}return E?k.filter(E):k}return this._forEachCell(n,s,o,c,this._queryCell,k,{hitTest:m,seenUids:{box:{},circle:{}}},E),m?k.length>0:k},$t.prototype._queryCircle=function(n,s,o,c,m){var E=n-o,k=n+o,P=s-o,B=s+o;if(k<0||E>this.width||B<0||P>this.height)return!c&&[];var q=[];return this._forEachCell(E,P,k,B,this._queryCellCircle,q,{hitTest:c,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},m),c?q.length>0:q},$t.prototype.query=function(n,s,o,c,m){return this._query(n,s,o,c,!1,m)},$t.prototype.hitTest=function(n,s,o,c,m){return this._query(n,s,o,c,!0,m)},$t.prototype.hitTestCircle=function(n,s,o,c){return this._queryCircle(n,s,o,!0,c)},$t.prototype._queryCell=function(n,s,o,c,m,E,k,P){var B=k.seenUids,q=this.boxCells[m];if(q!==null)for(var Y=this.bboxes,Q=0,$=q;Q<$.length;Q+=1){var ce=$[Q];if(!B.box[ce]){B.box[ce]=!0;var se=4*ce;if(n<=Y[se+2]&&s<=Y[se+3]&&o>=Y[se+0]&&c>=Y[se+1]&&(!P||P(this.boxKeys[ce]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ce],x1:Y[se],y1:Y[se+1],x2:Y[se+2],y2:Y[se+3]})}}}var de=this.circleCells[m];if(de!==null)for(var ne=this.circles,me=0,ge=de;me<ge.length;me+=1){var Ie=ge[me];if(!B.circle[Ie]){B.circle[Ie]=!0;var Be=3*Ie;if(this._circleAndRectCollide(ne[Be],ne[Be+1],ne[Be+2],n,s,o,c)&&(!P||P(this.circleKeys[Ie]))){if(k.hitTest)return E.push(!0),!0;var Ce=ne[Be],Oe=ne[Be+1],Ze=ne[Be+2];E.push({key:this.circleKeys[Ie],x1:Ce-Ze,y1:Oe-Ze,x2:Ce+Ze,y2:Oe+Ze})}}}},$t.prototype._queryCellCircle=function(n,s,o,c,m,E,k,P){var B=k.circle,q=k.seenUids,Y=this.boxCells[m];if(Y!==null)for(var Q=this.bboxes,$=0,ce=Y;$<ce.length;$+=1){var se=ce[$];if(!q.box[se]){q.box[se]=!0;var de=4*se;if(this._circleAndRectCollide(B.x,B.y,B.radius,Q[de+0],Q[de+1],Q[de+2],Q[de+3])&&(!P||P(this.boxKeys[se])))return E.push(!0),!0}}var ne=this.circleCells[m];if(ne!==null)for(var me=this.circles,ge=0,Ie=ne;ge<Ie.length;ge+=1){var Be=Ie[ge];if(!q.circle[Be]){q.circle[Be]=!0;var Ce=3*Be;if(this._circlesCollide(me[Ce],me[Ce+1],me[Ce+2],B.x,B.y,B.radius)&&(!P||P(this.circleKeys[Be])))return E.push(!0),!0}}},$t.prototype._forEachCell=function(n,s,o,c,m,E,k,P){for(var B=this._convertToXCellCoord(n),q=this._convertToYCellCoord(s),Y=this._convertToXCellCoord(o),Q=this._convertToYCellCoord(c),$=B;$<=Y;$++)for(var ce=q;ce<=Q;ce++)if(m.call(this,n,s,o,c,this.xCellCount*ce+$,E,k,P))return},$t.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},$t.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},$t.prototype._circlesCollide=function(n,s,o,c,m,E){var k=c-n,P=m-s,B=o+E;return B*B>k*k+P*P},$t.prototype._circleAndRectCollide=function(n,s,o,c,m,E,k){var P=(E-c)/2,B=Math.abs(n-(c+P));if(B>P+o)return!1;var q=(k-m)/2,Y=Math.abs(s-(m+q));if(Y>q+o)return!1;if(B<=P||Y<=q)return!0;var Q=B-P,$=Y-q;return Q*Q+$*$<=o*o};var Dn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Fi(n,s){for(var o=0;o<n;o++){var c=s.length;s.resize(c+4),s.float32.set(Dn,3*c)}}function Gr(n,s,o){var c=s[0],m=s[1];return n[0]=o[0]*c+o[4]*m+o[12],n[1]=o[1]*c+o[5]*m+o[13],n[3]=o[3]*c+o[7]*m+o[15],n}var $n=function(n,s,o){s===void 0&&(s=new $t(n.width+200,n.height+200,25)),o===void 0&&(o=new $t(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function Cr(n,s,o){return s*(a.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}$n.prototype.placeCollisionBox=function(n,s,o,c,m){var E=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),k=o*E.perspectiveRatio,P=n.x1*k+E.point.x,B=n.y1*k+E.point.y,q=n.x2*k+E.point.x,Y=n.y2*k+E.point.y;return!this.isInsideGrid(P,B,q,Y)||!s&&this.grid.hitTest(P,B,q,Y,m)?{box:[],offscreen:!1}:{box:[P,B,q,Y],offscreen:this.isOffscreen(P,B,q,Y)}},$n.prototype.placeCollisionCircles=function(n,s,o,c,m,E,k,P,B,q,Y,Q,$){var ce=[],se=new a.Point(s.anchorX,s.anchorY),de=Kt(se,E),ne=tr(this.transform.cameraToCenterDistance,de.signedDistanceFromCamera),me=(q?m/ne:m*ne)/a.ONE_EM,ge=Kt(se,k).point,Ie=_i(me,c,s.lineOffsetX*me,s.lineOffsetY*me,!1,ge,se,s,o,k,{}),Be=!1,Ce=!1,Oe=!0;if(Ie){for(var Ze=.5*Q*ne+$,Xe=new a.Point(-100,-100),We=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new zi,wt=Ie.first,bt=Ie.last,St=[],pr=wt.path.length-1;pr>=1;pr--)St.push(wt.path[pr]);for(var lt=1;lt<bt.path.length;lt++)St.push(bt.path[lt]);var At=2.5*Ze;if(P){var Rt=St.map(function(qa){return Kt(qa,P)});St=Rt.some(function(qa){return qa.signedDistanceFromCamera<=0})?[]:Rt.map(function(qa){return qa.point})}var zt=[];if(St.length>0){for(var Dt=St[0].clone(),Ht=St[0].clone(),It=1;It<St.length;It++)Dt.x=Math.min(Dt.x,St[It].x),Dt.y=Math.min(Dt.y,St[It].y),Ht.x=Math.max(Ht.x,St[It].x),Ht.y=Math.max(Ht.y,St[It].y);zt=Dt.x>=Xe.x&&Ht.x<=We.x&&Dt.y>=Xe.y&&Ht.y<=We.y?[St]:Ht.x<Xe.x||Dt.x>We.x||Ht.y<Xe.y||Dt.y>We.y?[]:a.clipLine([St],Xe.x,Xe.y,We.x,We.y)}for(var xt=0,Qi=zt;xt<Qi.length;xt+=1){var si;ut.reset(Qi[xt],.25*Ze),si=ut.length<=.5*Ze?1:Math.ceil(ut.paddedLength/At)+1;for(var Tn=0;Tn<si;Tn++){var hn=Tn/Math.max(si-1,1),Xr=ut.lerp(hn),ki=Xr.x+100,ya=Xr.y+100;ce.push(ki,ya,Ze,0);var li=ki-Ze,ia=ya-Ze,xi=ki+Ze,An=ya+Ze;if(Oe=Oe&&this.isOffscreen(li,ia,xi,An),Ce=Ce||this.isInsideGrid(li,ia,xi,An),!n&&this.grid.hitTestCircle(ki,ya,Ze,Y)&&(Be=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Be}}}}return{circles:!B&&Be||!Ce?[]:ce,offscreen:Oe,collisionDetected:Be}},$n.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,c=1/0,m=-1/0,E=-1/0,k=0,P=n;k<P.length;k+=1){var B=P[k],q=new a.Point(B.x+100,B.y+100);o=Math.min(o,q.x),c=Math.min(c,q.y),m=Math.max(m,q.x),E=Math.max(E,q.y),s.push(q)}for(var Y={},Q={},$=0,ce=this.grid.query(o,c,m,E).concat(this.ignoredGrid.query(o,c,m,E));$<ce.length;$+=1){var se=ce[$],de=se.key;if(Y[de.bucketInstanceId]===void 0&&(Y[de.bucketInstanceId]={}),!Y[de.bucketInstanceId][de.featureIndex]){var ne=[new a.Point(se.x1,se.y1),new a.Point(se.x2,se.y1),new a.Point(se.x2,se.y2),new a.Point(se.x1,se.y2)];a.polygonIntersectsPolygon(s,ne)&&(Y[de.bucketInstanceId][de.featureIndex]=!0,Q[de.bucketInstanceId]===void 0&&(Q[de.bucketInstanceId]=[]),Q[de.bucketInstanceId].push(de.featureIndex))}}return Q},$n.prototype.insertCollisionBox=function(n,s,o,c,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:c,collisionGroupID:m},n[0],n[1],n[2],n[3])},$n.prototype.insertCollisionCircles=function(n,s,o,c,m){for(var E=s?this.ignoredGrid:this.grid,k={bucketInstanceId:o,featureIndex:c,collisionGroupID:m},P=0;P<n.length;P+=4)E.insertCircle(k,n[P],n[P+1],n[P+2])},$n.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var c=[s,o,0,1];return Gr(c,c,n),{point:new a.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},$n.prototype.isOffscreen=function(n,s,o,c){return o<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},$n.prototype.isInsideGrid=function(n,s,o,c){return o>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},$n.prototype.getViewportMatrix=function(){var n=a.identity([]);return a.translate(n,n,[-100,-100,0]),n};var En=function(n,s,o,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&o?1:0,this.placed=o};En.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var sn=function(n,s,o,c,m){this.text=new En(n?n.text:null,s,o,m),this.icon=new En(n?n.icon:null,s,c,m)};sn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var rc=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Ni=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},vo=function(n,s,o,c,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=c,this.tileID=m},ln=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Kr(n,s,o,c,m){var E=a.getAnchorAlignment(n),k=-(E.horizontalAlign-.5)*s,P=-(E.verticalAlign-.5)*o,B=a.evaluateVariableOffset(n,c);return new a.Point(k+B[0]*m,P+B[1]*m)}function Pi(n,s,o,c,m,E){var k=n.x1,P=n.x2,B=n.y1,q=n.y2,Y=n.anchorPointX,Q=n.anchorPointY,$=new a.Point(s,o);return c&&$._rotate(m?E:-E),{x1:k+$.x,y1:B+$.y,x2:P+$.x,y2:q+$.y,anchorPointX:Y,anchorPointY:Q}}ln.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var ai=function(n,s,o,c){this.transform=n.clone(),this.collisionIndex=new $n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new ln(o),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function yo(n,s,o,c,m){n.emplaceBack(s?1:0,o?1:0,c||0,m||0),n.emplaceBack(s?1:0,o?1:0,c||0,m||0),n.emplaceBack(s?1:0,o?1:0,c||0,m||0),n.emplaceBack(s?1:0,o?1:0,c||0,m||0)}ai.prototype.getBucketParts=function(n,s,o,c){var m=o.getBucket(s),E=o.latestFeatureIndex;if(m&&E&&s.id===m.layerIds[0]){var k=o.collisionBoxArray,P=m.layers[0].layout,B=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),q=o.tileSize/a.EXTENT,Y=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),Q=P.get("text-pitch-alignment")==="map",$=P.get("text-rotation-alignment")==="map",ce=Cr(o,1,this.transform.zoom),se=mr(Y,Q,$,this.transform,ce),de=null;if(Q){var ne=dr(Y,Q,$,this.transform,ce);de=a.multiply([],this.transform.labelPlaneMatrix,ne)}this.retainedQueryData[m.bucketInstanceId]=new vo(m.bucketInstanceId,E,m.sourceLayerIndex,m.index,o.tileID);var me={bucket:m,layout:P,posMatrix:Y,textLabelPlaneMatrix:se,labelToScreenMatrix:de,scale:B,textPixelRatio:q,holdingForFade:o.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(c)for(var ge=0,Ie=m.sortKeyRanges;ge<Ie.length;ge+=1){var Be=Ie[ge];n.push({sortKey:Be.sortKey,symbolInstanceStart:Be.symbolInstanceStart,symbolInstanceEnd:Be.symbolInstanceEnd,parameters:me})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:me})}},ai.prototype.attemptAnchorPlacement=function(n,s,o,c,m,E,k,P,B,q,Y,Q,$,ce,se){var de,ne=[Q.textOffset0,Q.textOffset1],me=Kr(n,o,c,ne,m),ge=this.collisionIndex.placeCollisionBox(Pi(s,me.x,me.y,E,k,this.transform.angle),Y,P,B,q.predicate);if(!se||this.collisionIndex.placeCollisionBox(Pi(se,me.x,me.y,E,k,this.transform.angle),Y,P,B,q.predicate).box.length!==0)return ge.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(de=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),this.variableOffsets[Q.crossTileID]={textOffset:ne,width:o,height:c,anchor:n,textBoxScale:m,prevAnchor:de},this.markUsedJustification($,n,Q,ce),$.allowVerticalPlacement&&(this.markUsedOrientation($,ce,Q),this.placedOrientations[Q.crossTileID]=ce),{shift:me,placedGlyphBoxes:ge}):void 0},ai.prototype.placeLayerBucketPart=function(n,s,o){var c=this,m=n.parameters,E=m.bucket,k=m.layout,P=m.posMatrix,B=m.textLabelPlaneMatrix,q=m.labelToScreenMatrix,Y=m.textPixelRatio,Q=m.holdingForFade,$=m.collisionBoxArray,ce=m.partiallyEvaluatedTextSize,se=m.collisionGroup,de=k.get("text-optional"),ne=k.get("icon-optional"),me=k.get("text-allow-overlap"),ge=k.get("icon-allow-overlap"),Ie=k.get("text-rotation-alignment")==="map",Be=k.get("text-pitch-alignment")==="map",Ce=k.get("icon-text-fit")!=="none",Oe=k.get("symbol-z-order")==="viewport-y",Ze=me&&(ge||!E.hasIconData()||ne),Xe=ge&&(me||!E.hasTextData()||de);!E.collisionArrays&&$&&E.deserializeCollisionBoxes($);var We=function(lt,At){if(!s[lt.crossTileID])if(Q)c.placements[lt.crossTileID]=new rc(!1,!1,!1);else{var Rt,zt=!1,Dt=!1,Ht=!0,It=null,xt={box:null,offscreen:null},Qi={box:null,offscreen:null},si=null,Tn=null,hn=0,Xr=0,ki=0;At.textFeatureIndex?hn=At.textFeatureIndex:lt.useRuntimeCollisionCircles&&(hn=lt.featureIndex),At.verticalTextFeatureIndex&&(Xr=At.verticalTextFeatureIndex);var ya=At.textBox;if(ya){var li=function(rr){var Di=a.WritingMode.horizontal;if(E.allowVerticalPlacement&&!rr&&c.prevPlacement){var Mi=c.prevPlacement.placedOrientations[lt.crossTileID];Mi&&(c.placedOrientations[lt.crossTileID]=Mi,c.markUsedOrientation(E,Di=Mi,lt))}return Di},ia=function(rr,Di){if(E.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&At.verticalTextBox)for(var Mi=0,Dl=E.writingModes;Mi<Dl.length&&(Dl[Mi]===a.WritingMode.vertical?(xt=Di(),Qi=xt):xt=rr(),!(xt&&xt.box&&xt.box.length));Mi+=1);else xt=rr()};if(k.get("text-variable-anchor")){var xi=k.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[lt.crossTileID]){var An=c.prevPlacement.variableOffsets[lt.crossTileID];xi.indexOf(An.anchor)>0&&(xi=xi.filter(function(rr){return rr!==An.anchor})).unshift(An.anchor)}var qa=function(rr,Di,Mi){for(var Dl=rr.x2-rr.x1,mc=rr.y2-rr.y1,Tf=lt.textBoxScale,kd=Ce&&!ge?Di:null,xs={box:[],offscreen:!1},vu=me?2*xi.length:xi.length,yu=0;yu<vu;++yu){var Xs=c.attemptAnchorPlacement(xi[yu%xi.length],rr,Dl,mc,Tf,Ie,Be,Y,P,se,yu>=xi.length,lt,E,Mi,kd);if(Xs&&(xs=Xs.placedGlyphBoxes)&&xs.box&&xs.box.length){zt=!0,It=Xs.shift;break}}return xs};ia(function(){return qa(ya,At.iconBox,a.WritingMode.horizontal)},function(){var rr=At.verticalTextBox;return E.allowVerticalPlacement&&!(xt&&xt.box&&xt.box.length)&&lt.numVerticalGlyphVertices>0&&rr?qa(rr,At.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),xt&&(zt=xt.box,Ht=xt.offscreen);var ys=li(xt&&xt.box);if(!zt&&c.prevPlacement){var ch=c.prevPlacement.variableOffsets[lt.crossTileID];ch&&(c.variableOffsets[lt.crossTileID]=ch,c.markUsedJustification(E,ch.anchor,lt,ys))}}else{var Hs=function(rr,Di){var Mi=c.collisionIndex.placeCollisionBox(rr,me,Y,P,se.predicate);return Mi&&Mi.box&&Mi.box.length&&(c.markUsedOrientation(E,Di,lt),c.placedOrientations[lt.crossTileID]=Di),Mi};ia(function(){return Hs(ya,a.WritingMode.horizontal)},function(){var rr=At.verticalTextBox;return E.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&rr?Hs(rr,a.WritingMode.vertical):{box:null,offscreen:null}}),li(xt&&xt.box&&xt.box.length)}}if(zt=(Rt=xt)&&Rt.box&&Rt.box.length>0,Ht=Rt&&Rt.offscreen,lt.useRuntimeCollisionCircles){var Co=E.text.placedSymbolArray.get(lt.centerJustifiedTextSymbolIndex),gs=a.evaluateSizeForFeature(E.textSizeData,ce,Co),Do=k.get("text-padding");si=c.collisionIndex.placeCollisionCircles(me,Co,E.lineVertexArray,E.glyphOffsetArray,gs,P,B,q,o,Be,se.predicate,lt.collisionCircleDiameter,Do),zt=me||si.circles.length>0&&!si.collisionDetected,Ht=Ht&&si.offscreen}if(At.iconFeatureIndex&&(ki=At.iconFeatureIndex),At.iconBox){var _s=function(rr){var Di=Ce&&It?Pi(rr,It.x,It.y,Ie,Be,c.transform.angle):rr;return c.collisionIndex.placeCollisionBox(Di,ge,Y,P,se.predicate)};Dt=Qi&&Qi.box&&Qi.box.length&&At.verticalIconBox?(Tn=_s(At.verticalIconBox)).box.length>0:(Tn=_s(At.iconBox)).box.length>0,Ht=Ht&&Tn.offscreen}var Za=de||lt.numHorizontalGlyphVertices===0&&lt.numVerticalGlyphVertices===0,$i=ne||lt.numIconVertices===0;if(Za||$i?$i?Za||(Dt=Dt&&zt):zt=Dt&&zt:Dt=zt=Dt&&zt,zt&&Rt&&Rt.box&&c.collisionIndex.insertCollisionBox(Rt.box,k.get("text-ignore-placement"),E.bucketInstanceId,Qi&&Qi.box&&Xr?Xr:hn,se.ID),Dt&&Tn&&c.collisionIndex.insertCollisionBox(Tn.box,k.get("icon-ignore-placement"),E.bucketInstanceId,ki,se.ID),si&&(zt&&c.collisionIndex.insertCollisionCircles(si.circles,k.get("text-ignore-placement"),E.bucketInstanceId,hn,se.ID),o)){var bs=E.bucketInstanceId,za=c.collisionCircleArrays[bs];za===void 0&&(za=c.collisionCircleArrays[bs]=new Ni);for(var Cl=0;Cl<si.circles.length;Cl+=4)za.circles.push(si.circles[Cl+0]),za.circles.push(si.circles[Cl+1]),za.circles.push(si.circles[Cl+2]),za.circles.push(si.collisionDetected?1:0)}c.placements[lt.crossTileID]=new rc(zt||Ze,Dt||Xe,Ht||E.justReloaded),s[lt.crossTileID]=!0}};if(Oe)for(var ut=E.getSortedSymbolIndexes(this.transform.angle),wt=ut.length-1;wt>=0;--wt){var bt=ut[wt];We(E.symbolInstances.get(bt),E.collisionArrays[bt])}else for(var St=n.symbolInstanceStart;St<n.symbolInstanceEnd;St++)We(E.symbolInstances.get(St),E.collisionArrays[St]);if(o&&E.bucketInstanceId in this.collisionCircleArrays){var pr=this.collisionCircleArrays[E.bucketInstanceId];a.invert(pr.invProjMatrix,P),pr.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1},ai.prototype.markUsedJustification=function(n,s,o,c){var m;m=c===a.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];for(var E=0,k=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];E<k.length;E+=1){var P=k[E];P>=0&&(n.text.placedSymbolArray.get(P).crossTileID=m>=0&&P!==m?0:o.crossTileID)}},ai.prototype.markUsedOrientation=function(n,s,o){for(var c=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,m=s===a.WritingMode.vertical?s:0,E=0,k=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];E<k.length;E+=1)n.text.placedSymbolArray.get(k[E]).placedOrientation=c;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=m)},ai.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},E=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(var P in this.placements){var B=this.placements[P],q=m[P];q?(this.opacities[P]=new sn(q,c,B.text,B.icon),o=o||B.text!==q.text.placed||B.icon!==q.icon.placed):(this.opacities[P]=new sn(null,c,B.text,B.icon,B.skipFade),o=o||B.text||B.icon)}for(var Y in m){var Q=m[Y];if(!this.opacities[Y]){var $=new sn(Q,c,!1,!1);$.isHidden()||(this.opacities[Y]=$,o=o||Q.text.placed||Q.icon.placed)}}for(var ce in E)this.variableOffsets[ce]||!this.opacities[ce]||this.opacities[ce].isHidden()||(this.variableOffsets[ce]=E[ce]);for(var se in k)this.placedOrientations[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.placedOrientations[se]=k[se]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},ai.prototype.updateLayerOpacities=function(n,s){for(var o={},c=0,m=s;c<m.length;c+=1){var E=m[c],k=E.getBucket(n);k&&E.latestFeatureIndex&&n.id===k.layerIds[0]&&this.updateBucketOpacities(k,o,E.collisionBoxArray)}},ai.prototype.updateBucketOpacities=function(n,s,o){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,E=new sn(null,0,!1,!1,!0),k=m.get("text-allow-overlap"),P=m.get("icon-allow-overlap"),B=m.get("text-variable-anchor"),q=m.get("text-rotation-alignment")==="map",Y=m.get("text-pitch-alignment")==="map",Q=m.get("icon-text-fit")!=="none",$=new sn(null,0,k&&(P||!n.hasIconData()||m.get("icon-optional")),P&&(k||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var ce=function(me,ge,Ie){for(var Be=0;Be<ge/4;Be++)me.opacityVertexArray.emplaceBack(Ie)},se=function(me){var ge=n.symbolInstances.get(me),Ie=ge.numHorizontalGlyphVertices,Be=ge.numVerticalGlyphVertices,Ce=ge.crossTileID,Oe=c.opacities[Ce];s[Ce]?Oe=E:Oe||(c.opacities[Ce]=Oe=$),s[Ce]=!0;var Ze=ge.numIconVertices>0,Xe=c.placedOrientations[ge.crossTileID],We=Xe===a.WritingMode.vertical,ut=Xe===a.WritingMode.horizontal||Xe===a.WritingMode.horizontalOnly;if(Ie>0||Be>0){var wt=ns(Oe.text);ce(n.text,Ie,We?go:wt),ce(n.text,Be,ut?go:wt);var bt=Oe.text.isHidden();[ge.rightJustifiedTextSymbolIndex,ge.centerJustifiedTextSymbolIndex,ge.leftJustifiedTextSymbolIndex].forEach(function(xt){xt>=0&&(n.text.placedSymbolArray.get(xt).hidden=bt||We?1:0)}),ge.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ge.verticalPlacedTextSymbolIndex).hidden=bt||ut?1:0);var St=c.variableOffsets[ge.crossTileID];St&&c.markUsedJustification(n,St.anchor,ge,Xe);var pr=c.placedOrientations[ge.crossTileID];pr&&(c.markUsedJustification(n,"left",ge,pr),c.markUsedOrientation(n,pr,ge))}if(Ze){var lt=ns(Oe.icon),At=!(Q&&ge.verticalPlacedIconSymbolIndex&&We);ge.placedIconSymbolIndex>=0&&(ce(n.icon,ge.numIconVertices,At?lt:go),n.icon.placedSymbolArray.get(ge.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),ge.verticalPlacedIconSymbolIndex>=0&&(ce(n.icon,ge.numVerticalIconVertices,At?go:lt),n.icon.placedSymbolArray.get(ge.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Rt=n.collisionArrays[me];if(Rt){var zt=new a.Point(0,0);if(Rt.textBox||Rt.verticalTextBox){var Dt=!0;if(B){var Ht=c.variableOffsets[Ce];Ht?(zt=Kr(Ht.anchor,Ht.width,Ht.height,Ht.textOffset,Ht.textBoxScale),q&&zt._rotate(Y?c.transform.angle:-c.transform.angle)):Dt=!1}Rt.textBox&&yo(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Dt||We,zt.x,zt.y),Rt.verticalTextBox&&yo(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Dt||ut,zt.x,zt.y)}var It=!!(!ut&&Rt.verticalIconBox);Rt.iconBox&&yo(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,It,Q?zt.x:0,Q?zt.y:0),Rt.verticalIconBox&&yo(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!It,Q?zt.x:0,Q?zt.y:0)}}},de=0;de<n.symbolInstances.length;de++)se(de);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var ne=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ne.invProjMatrix,n.placementViewportMatrix=ne.viewportMatrix,n.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},ai.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ai.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},ai.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},ai.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},ai.prototype.setStale=function(){this.stale=!0};var rs=Math.pow(2,25),bd=Math.pow(2,24),dl=Math.pow(2,17),ml=Math.pow(2,16),is=Math.pow(2,9),gp=Math.pow(2,8),ru=Math.pow(2,1);function ns(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*rs+s*bd+o*dl+s*ml+o*is+s*gp+o*ru+s}var go=0,iu=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};iu.prototype.continuePlacement=function(n,s,o,c,m){for(var E=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(E,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(function(k,P){return k.sortKey-P.sortKey}));this._currentPartIndex<E.length;)if(s.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,m())return!0;return!1};var vl=function(n,s,o,c,m,E,k){this.placement=new ai(n,m,E,k),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=c,this._done=!1};vl.prototype.isDone=function(){return this._done},vl.prototype.continuePlacement=function(n,s,o){for(var c=this,m=a.browser.now(),E=function(){var B=a.browser.now()-m;return!c._forceFullPlacement&&B>2};this._currentPlacementIndex>=0;){var k=s[n[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=P)&&(!k.maxzoom||k.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new iu(k)),this._inProgressLayer.continuePlacement(o[k.source],this.placement,this._showCollisionBoxes,k,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},vl.prototype.commit=function(n){return this.placement.commit(n),this.placement};var eh=512/a.EXTENT/2,Sn=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var c=0;c<s.length;c++){var m=s.get(c),E=m.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};Sn.prototype.getScaledCoordinates=function(n,s){var o=eh/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*a.EXTENT+n.anchorY)*o)}},Sn.prototype.findMatches=function(n,s,o){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var E=n.get(m);if(!E.crossTileID){var k=this.indexedSymbolInstances[E.key];if(k)for(var P=this.getScaledCoordinates(E,s),B=0,q=k;B<q.length;B+=1){var Y=q[B];if(Math.abs(Y.coord.x-P.x)<=c&&Math.abs(Y.coord.y-P.y)<=c&&!o[Y.crossTileID]){o[Y.crossTileID]=!0,E.crossTileID=Y.crossTileID;break}}}}};var Si=function(){this.maxCrossTileID=0};Si.prototype.generate=function(){return++this.maxCrossTileID};var Mn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Mn.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var c=this.indexes[o],m={};for(var E in c){var k=c[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),m[k.tileID.key]=k}this.indexes[o]=m}this.lng=n},Mn.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var E in this.indexes){var k=this.indexes[E];if(Number(E)>n.overscaledZ)for(var P in k){var B=k[P];B.tileID.isChildOf(n)&&B.findMatches(s.symbolInstances,n,m)}else{var q=k[n.scaledTo(Number(E)).key];q&&q.findMatches(s.symbolInstances,n,m)}}for(var Y=0;Y<s.symbolInstances.length;Y++){var Q=s.symbolInstances.get(Y);Q.crossTileID||(Q.crossTileID=o.generate(),m[Q.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Sn(n,s.symbolInstances,s.bucketInstanceId),!0},Mn.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var c=0,m=s.indexedSymbolInstances[o];c<m.length;c+=1)delete this.usedCrossTileIDs[n][m[c].crossTileID]},Mn.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var c=this.indexes[o];for(var m in c)n[c[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,c[m]),delete c[m],s=!0)}return s};var ke=function(){this.layerIndexes={},this.crossTileIDs=new Si,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ke.prototype.addLayer=function(n,s,o){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new Mn);var m=!1,E={};c.handleWrapJump(o);for(var k=0,P=s;k<P.length;k+=1){var B=P[k],q=B.getBucket(n);q&&n.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(B.tileID,q,this.crossTileIDs)&&(m=!0),E[q.bucketInstanceId]=!0)}return c.removeStaleBuckets(E)&&(m=!0),m},ke.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var Ui=function(n,s){return a.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},Ln=a.pick(tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hr=a.pick(tt,["setCenter","setZoom","setBearing","setPitch"]),pa=function(){var n={},s=a.styleSpec.$version;for(var o in a.styleSpec.$root){var c,m=a.styleSpec.$root[o];m.required&&(c=o==="version"?s:m.type==="array"?[]:{})!=null&&(n[o]=c)}return n}(),Rn=function(n){function s(o,c){var m=this;c===void 0&&(c={}),n.call(this),this.map=o,this.dispatcher=new zr(Re(),this),this.imageManager=new je,this.imageManager.setEventedParent(this),this.glyphManager=new or(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ot(256,512),this.crossTileSymbolIndex=new ke,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var E=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(k){E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},function(P,B){if(a.triggerPluginCompletionEvent(P),B&&B.every(function(Y){return Y}))for(var q in E.sourceCaches)E.sourceCaches[q].reload()})}),this.on("data",function(k){if(k.dataType==="source"&&k.sourceDataType==="metadata"){var P=m.sourceCaches[k.sourceId];if(P){var B=P.getSource();if(B&&B.vectorLayerIds)for(var q in m._layers){var Y=m._layers[q];Y.source===B.id&&m._validateLayer(Y)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,c){var m=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var E=typeof c.validate=="boolean"?c.validate:!a.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);var k=this.map._requestManager.transformRequest(o,a.ResourceType.Style);this._request=a.getJSON(k,function(P,B){m._request=null,P?m.fire(new a.ErrorEvent(P)):B&&m._load(B,E)})},s.prototype.loadJSON=function(o,c){var m=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){m._request=null,m._load(o,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(pa,!1)},s.prototype._load=function(o,c){if(!c||!Ui(this,a.validateStyle(o))){for(var m in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(m,o.sources[m],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var E=Ye(this.stylesheet.layers);this._order=E.map(function(q){return q.id}),this._layers={},this._serializedLayers={};for(var k=0,P=E;k<P.length;k+=1){var B=P[k];(B=a.createStyleLayer(B)).setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Pr(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},s.prototype._loadSprite=function(o){var c=this;this._spriteRequest=function(m,E,k){var P,B,q,Y=a.browser.devicePixelRatio>1?"@2x":"",Q=a.getJSON(E.transformRequest(E.normalizeSpriteURL(m,Y,".json"),a.ResourceType.SpriteJSON),function(se,de){Q=null,q||(q=se,P=de,ce())}),$=a.getImage(E.transformRequest(E.normalizeSpriteURL(m,Y,".png"),a.ResourceType.SpriteImage),function(se,de){$=null,q||(q=se,B=de,ce())});function ce(){if(q)k(q);else if(P&&B){var se=a.browser.getImageData(B),de={};for(var ne in P){var me=P[ne],ge=me.width,Ie=me.height,Be=me.x,Ce=me.y,Oe=me.sdf,Ze=me.pixelRatio,Xe=me.stretchX,We=me.stretchY,ut=me.content,wt=new a.RGBAImage({width:ge,height:Ie});a.RGBAImage.copy(se,wt,{x:Be,y:Ce},{x:0,y:0},{width:ge,height:Ie}),de[ne]={data:wt,pixelRatio:Ze,sdf:Oe,stretchX:Xe,stretchY:We,content:ut}}k(null,de)}}return{cancel:function(){Q&&(Q.cancel(),Q=null),$&&($.cancel(),$=null)}}}(o,this.map._requestManager,function(m,E){if(c._spriteRequest=null,m)c.fire(new a.ErrorEvent(m));else if(E)for(var k in E)c.imageManager.addImage(k,E[k]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new a.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var c=this.sourceCaches[o.source];if(c){var m=o.sourceLayer;if(m){var E=c.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+E.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var c=[],m=0,E=o;m<E.length;m+=1){var k=this._layers[E[m]];k.type!=="custom"&&c.push(k.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var c=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);for(var k in(m.length||E.length)&&this._updateWorkerLayers(m,E),this._updatedSources){var P=this._updatedSources[k];P==="reload"?this._reloadSource(k):P==="clear"&&this._clearSource(k)}for(var B in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[B].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var q={};for(var Y in this.sourceCaches){var Q=this.sourceCaches[Y];q[Y]=Q.used,Q.used=!1}for(var $=0,ce=this._order;$<ce.length;$+=1){var se=this._layers[ce[$]];se.recalculate(o,this._availableImages),!se.isHidden(o.zoom)&&se.source&&(this.sourceCaches[se.source].used=!0)}for(var de in q){var ne=this.sourceCaches[de];q[de]!==ne.used&&ne.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:de}))}this.light.recalculate(o),this.z=o.zoom,c&&this.fire(new a.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var c=this;if(this._checkLoaded(),Ui(this,a.validateStyle(o)))return!1;(o=a.clone$1(o)).layers=Ye(o.layers);var m=function(k,P){if(!k)return[{command:tt.setStyle,args:[P]}];var B=[];try{if(!a.deepEqual(k.version,P.version))return[{command:tt.setStyle,args:[P]}];a.deepEqual(k.center,P.center)||B.push({command:tt.setCenter,args:[P.center]}),a.deepEqual(k.zoom,P.zoom)||B.push({command:tt.setZoom,args:[P.zoom]}),a.deepEqual(k.bearing,P.bearing)||B.push({command:tt.setBearing,args:[P.bearing]}),a.deepEqual(k.pitch,P.pitch)||B.push({command:tt.setPitch,args:[P.pitch]}),a.deepEqual(k.sprite,P.sprite)||B.push({command:tt.setSprite,args:[P.sprite]}),a.deepEqual(k.glyphs,P.glyphs)||B.push({command:tt.setGlyphs,args:[P.glyphs]}),a.deepEqual(k.transition,P.transition)||B.push({command:tt.setTransition,args:[P.transition]}),a.deepEqual(k.light,P.light)||B.push({command:tt.setLight,args:[P.light]});var q={},Y=[];(function($,ce,se,de){var ne;for(ne in ce=ce||{},$=$||{})$.hasOwnProperty(ne)&&(ce.hasOwnProperty(ne)||Ge(ne,se,de));for(ne in ce)ce.hasOwnProperty(ne)&&($.hasOwnProperty(ne)?a.deepEqual($[ne],ce[ne])||($[ne].type==="geojson"&&ce[ne].type==="geojson"&&lr($,ce,ne)?se.push({command:tt.setGeoJSONSourceData,args:[ne,ce[ne].data]}):Zt(ne,ce,se,de)):Ft(ne,ce,se))})(k.sources,P.sources,Y,q);var Q=[];k.layers&&k.layers.forEach(function($){q[$.source]?B.push({command:tt.removeLayer,args:[$.id]}):Q.push($)}),B=B.concat(Y),function($,ce,se){ce=ce||[];var de,ne,me,ge,Ie,Be,Ce,Oe=($=$||[]).map(Qt),Ze=ce.map(Qt),Xe=$.reduce(Jt,{}),We=ce.reduce(Jt,{}),ut=Oe.slice(),wt=Object.create(null);for(de=0,ne=0;de<Oe.length;de++)We.hasOwnProperty(me=Oe[de])?ne++:(se.push({command:tt.removeLayer,args:[me]}),ut.splice(ut.indexOf(me,ne),1));for(de=0,ne=0;de<Ze.length;de++)ut[ut.length-1-de]!==(me=Ze[Ze.length-1-de])&&(Xe.hasOwnProperty(me)?(se.push({command:tt.removeLayer,args:[me]}),ut.splice(ut.lastIndexOf(me,ut.length-ne),1)):ne++,se.push({command:tt.addLayer,args:[We[me],Be=ut[ut.length-de]]}),ut.splice(ut.length-de,0,me),wt[me]=!0);for(de=0;de<Ze.length;de++)if(ge=Xe[me=Ze[de]],Ie=We[me],!wt[me]&&!a.deepEqual(ge,Ie))if(a.deepEqual(ge.source,Ie.source)&&a.deepEqual(ge["source-layer"],Ie["source-layer"])&&a.deepEqual(ge.type,Ie.type)){for(Ce in Ct(ge.layout,Ie.layout,se,me,null,tt.setLayoutProperty),Ct(ge.paint,Ie.paint,se,me,null,tt.setPaintProperty),a.deepEqual(ge.filter,Ie.filter)||se.push({command:tt.setFilter,args:[me,Ie.filter]}),a.deepEqual(ge.minzoom,Ie.minzoom)&&a.deepEqual(ge.maxzoom,Ie.maxzoom)||se.push({command:tt.setLayerZoomRange,args:[me,Ie.minzoom,Ie.maxzoom]}),ge)ge.hasOwnProperty(Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?Ct(ge[Ce],Ie[Ce],se,me,Ce.slice(6),tt.setPaintProperty):a.deepEqual(ge[Ce],Ie[Ce])||se.push({command:tt.setLayerProperty,args:[me,Ce,Ie[Ce]]}));for(Ce in Ie)Ie.hasOwnProperty(Ce)&&!ge.hasOwnProperty(Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?Ct(ge[Ce],Ie[Ce],se,me,Ce.slice(6),tt.setPaintProperty):a.deepEqual(ge[Ce],Ie[Ce])||se.push({command:tt.setLayerProperty,args:[me,Ce,Ie[Ce]]}))}else se.push({command:tt.removeLayer,args:[me]}),Be=ut[ut.lastIndexOf(me)+1],se.push({command:tt.addLayer,args:[Ie,Be]})}(Q,P.layers,B)}catch($){console.warn("Unable to compute style diff:",$),B=[{command:tt.setStyle,args:[P]}]}return B}(this.serialize(),o).filter(function(k){return!(k.command in Hr)});if(m.length===0)return!1;var E=m.filter(function(k){return!(k.command in Ln)});if(E.length>0)throw new Error("Unimplemented: "+E.map(function(k){return k.command}).join(", ")+".");return m.forEach(function(k){k.command!=="setTransition"&&c[k.command].apply(c,k.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,c){if(this.getImage(o))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,c),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,c){this.imageManager.updateImage(o,c)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,c,m){var E=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.validateStyle.source,"sources."+o,c,null,m))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var k=this.sourceCaches[o]=new ae(o,c,this.dispatcher);k.style=this,k.setEventedParent(this,function(){return{isSourceLoaded:E.loaded(),source:k.serialize(),sourceId:o}}),k.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===o)return this.fire(new a.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+c+'" is using it.')));var m=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],m.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,c){this._checkLoaded(),this.sourceCaches[o].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,c,m){m===void 0&&(m={}),this._checkLoaded();var E=o.id;if(this.getLayer(E))this.fire(new a.ErrorEvent(new Error('Layer with id "'+E+'" already exists on this map')));else{var k;if(o.type==="custom"){if(Ui(this,a.validateCustomStyleLayer(o)))return;k=a.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(E,o.source),o=a.clone$1(o),o=a.extend(o,{source:E})),this._validate(a.validateStyle.layer,"layers."+E,o,{arrayIndex:-1},m))return;k=a.createStyleLayer(o),this._validateLayer(k),k.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[k.id]=k.serialize()}var P=c?this._order.indexOf(c):this._order.length;if(c&&P===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(P,0,E),this._layerOrderChanged=!0,this._layers[E]=k,this._removedLayers[E]&&k.source&&k.type!=="custom"){var B=this._removedLayers[E];delete this._removedLayers[E],B.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}},s.prototype.moveLayer=function(o,c){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==c){var m=this._order.indexOf(o);this._order.splice(m,1);var E=c?this._order.indexOf(c):this._order.length;c&&E===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(E,0,o),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var c=this._layers[o];if(c){c.setEventedParent(null);var m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,c,m){this._checkLoaded();var E=this.getLayer(o);E?E.minzoom===c&&E.maxzoom===m||(c!=null&&(E.minzoom=c),m!=null&&(E.maxzoom=m),this._updateLayer(E)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,c,m){m===void 0&&(m={}),this._checkLoaded();var E=this.getLayer(o);if(E){if(!a.deepEqual(E.filter,c))return c==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(a.validateStyle.filter,"layers."+E.id+".filter",c,null,m)||(E.filter=a.clone$1(c),this._updateLayer(E)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return a.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(o);k?a.deepEqual(k.getLayoutProperty(c),m)||(k.setLayoutProperty(c,m,E),this._updateLayer(k)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,c){var m=this.getLayer(o);if(m)return m.getLayoutProperty(c);this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(o);k?a.deepEqual(k.getPaintProperty(c),m)||(k.setPaintProperty(c,m,E)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,c){return this.getLayer(o).getPaintProperty(c)},s.prototype.setFeatureState=function(o,c){this._checkLoaded();var m=o.source,E=o.sourceLayer,k=this.sourceCaches[m];if(k!==void 0){var P=k.getSource().type;P==="geojson"&&E?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||E?(o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),k.setFeatureState(E,o.id,c)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,c){this._checkLoaded();var m=o.source,E=this.sourceCaches[m];if(E!==void 0){var k=E.getSource().type,P=k==="vector"?o.sourceLayer:void 0;k!=="vector"||P?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(P,o.id,c):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var c=o.source,m=o.sourceLayer,E=this.sourceCaches[c];if(E!==void 0){if(E.getSource().type!=="vector"||m)return o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),E.getFeatureState(m,o.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var c=this,m=function(Xe){return c._layers[Xe].type==="fill-extrusion"},E={},k=[],P=this._order.length-1;P>=0;P--){var B=this._order[P];if(m(B)){E[B]=P;for(var q=0,Y=o;q<Y.length;q+=1){var Q=Y[q][B];if(Q)for(var $=0,ce=Q;$<ce.length;$+=1)k.push(ce[$])}}}k.sort(function(Xe,We){return We.intersectionZ-Xe.intersectionZ});for(var se=[],de=this._order.length-1;de>=0;de--){var ne=this._order[de];if(m(ne))for(var me=k.length-1;me>=0;me--){var ge=k[me].feature;if(E[ge.layer.id]<de)break;se.push(ge),k.pop()}else for(var Ie=0,Be=o;Ie<Be.length;Ie+=1){var Ce=Be[Ie][ne];if(Ce)for(var Oe=0,Ze=Ce;Oe<Ze.length;Oe+=1)se.push(Ze[Oe].feature)}}return se},s.prototype.queryRenderedFeatures=function(o,c,m){c&&c.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var E={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var k=0,P=c.layers;k<P.length;k+=1){var B=P[k],q=this._layers[B];if(!q)return this.fire(new a.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be queried for features."))),[];E[q.source]=!0}}var Y=[];for(var Q in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!E[Q]||Y.push(ri(this.sourceCaches[Q],this._layers,this._serializedLayers,o,c,m));return this.placement&&Y.push(function($,ce,se,de,ne,me,ge){for(var Ie={},Be=me.queryRenderedSymbols(de),Ce=[],Oe=0,Ze=Object.keys(Be).map(Number);Oe<Ze.length;Oe+=1)Ce.push(ge[Ze[Oe]]);Ce.sort(Ia);for(var Xe=function(){var St=ut[We],pr=St.featureIndex.lookupSymbolFeatures(Be[St.bucketInstanceId],ce,St.bucketIndex,St.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,$);for(var lt in pr){var At=Ie[lt]=Ie[lt]||[],Rt=pr[lt];Rt.sort(function(Ht,It){var xt=St.featureSortOrder;if(xt){var Qi=xt.indexOf(Ht.featureIndex);return xt.indexOf(It.featureIndex)-Qi}return It.featureIndex-Ht.featureIndex});for(var zt=0,Dt=Rt;zt<Dt.length;zt+=1)At.push(Dt[zt])}},We=0,ut=Ce;We<ut.length;We+=1)Xe();var wt=function(St){Ie[St].forEach(function(pr){var lt=pr.feature,At=se[$[St].source].getFeatureState(lt.layer["source-layer"],lt.id);lt.source=lt.layer.source,lt.layer["source-layer"]&&(lt.sourceLayer=lt.layer["source-layer"]),lt.state=At})};for(var bt in Ie)wt(bt);return Ie}(this._layers,this._serializedLayers,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Y)},s.prototype.querySourceFeatures=function(o,c){c&&c.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var m=this.sourceCaches[o];return m?function(E,k){for(var P=E.getRenderableIds().map(function(ce){return E.getTileByID(ce)}),B=[],q={},Y=0;Y<P.length;Y++){var Q=P[Y],$=Q.tileID.canonical.key;q[$]||(q[$]=!0,Q.querySourceFeatures(B,k))}return B}(m,c):[]},s.prototype.addSourceType=function(o,c,m){return s.getSourceType(o)?m(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,c){c===void 0&&(c={}),this._checkLoaded();var m=this.light.getLight(),E=!1;for(var k in o)if(!a.deepEqual(o[k],m[k])){E=!0;break}if(E){var P={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(P)}},s.prototype._validate=function(o,c,m,E,k){return k===void 0&&(k={}),(!k||k.validate!==!1)&&Ui(this,o.call(a.validateStyle,a.extend({key:c,style:this.serialize(),value:m,styleSpec:a.styleSpec},E)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var c in this.sourceCaches)this.sourceCaches[c].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,c,m,E,k){k===void 0&&(k=!1);for(var P=!1,B=!1,q={},Y=0,Q=this._order;Y<Q.length;Y+=1){var $=this._layers[Q[Y]];if($.type==="symbol"){if(!q[$.source]){var ce=this.sourceCaches[$.source];q[$.source]=ce.getRenderableIds(!0).map(function(ge){return ce.getTileByID(ge)}).sort(function(ge,Ie){return Ie.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(Ie.tileID)?-1:1)})}var se=this.crossTileSymbolIndex.addLayer($,q[$.source],o.center.lng);P=P||se}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),o.zoom))&&(this.pauseablePlacement=new vl(o,this._order,k,c,m,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),B=!0),P&&this.pauseablePlacement.placement.setStale()),B||P)for(var de=0,ne=this._order;de<ne.length;de+=1){var me=this._layers[ne[de]];me.type==="symbol"&&this.placement.updateLayerOpacities(me,q[me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();var E=this.sourceCaches[c.source];E&&E.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(o,c,m){this.glyphManager.getGlyphs(c.stacks,m)},s.prototype.getResource=function(o,c,m){return a.makeRequest(c,m)},s}(a.Evented);Rn.getSourceType=function(n){return Ti[n]},Rn.setSourceType=function(n,s){Ti[n]=s},Rn.registerForPluginStateChange=a.registerForPluginStateChange;var Ci=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),nu=Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),au=Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),_p=Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ff=Lr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),bp=Lr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),df=Lr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),xp=Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Bs=Lr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ou=Lr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),_o=Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),th=Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),ic=Lr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),nc=Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),yl=Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),oi=Lr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),wp=Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),bo=Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),as=Lr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),gl=Lr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),xo=Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Os=Lr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),_l=Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Bn=Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Wi=Lr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Qa=Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),os=Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Lr(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=E?E.concat(m):m,P={};return{fragmentSource:n=n.replace(o,function(B,q,Y,Q,$){return P[$]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
varying `+Y+" "+Q+" "+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`}),vertexSource:s=s.replace(o,function(B,q,Y,Q,$){var ce=Q==="float"?"vec2":"vec4",se=$.match(/color/)?"color":ce;return P[$]?q==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+Y+" "+ce+" a_"+$+`;
varying `+Y+" "+Q+" "+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = a_"+$+`;
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = unpack_mix_"+se+"(a_"+$+", u_"+$+`_t);
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+Y+" "+ce+" a_"+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = a_"+$+`;
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = unpack_mix_"+se+"(a_"+$+", u_"+$+`_t);
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`}),staticAttributes:c,staticUniforms:k}}var ac=Object.freeze({__proto__:null,prelude:nu,background:au,backgroundPattern:_p,circle:ff,clippingMask:bp,heatmap:df,heatmapTexture:xp,collisionBox:Bs,collisionCircle:ou,debug:_o,fill:th,fillOutline:ic,fillOutlinePattern:nc,fillPattern:yl,fillExtrusion:oi,fillExtrusionPattern:wp,hillshadePrepare:bo,hillshade:as,line:gl,lineGradient:xo,linePattern:Os,lineSDF:_l,raster:Bn,symbolIcon:Wi,symbolSDF:Qa,symbolTextAndIcon:os}),mf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function vf(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var c=n[o].split(" ");s.push(c.pop())}return s}mf.prototype.bind=function(n,s,o,c,m,E,k,P){this.context=n;for(var B=this.boundPaintVertexBuffers.length!==c.length,q=0;!B&&q<c.length;q++)this.boundPaintVertexBuffers[q]!==c[q]&&(B=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!B&&this.boundIndexBuffer===m&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===P?(n.bindVertexArrayOES.set(this.vao),k&&k.bind(),m&&m.dynamicDraw&&m.bind(),P&&P.bind()):this.freshBind(s,o,c,m,E,k,P)},mf.prototype.freshBind=function(n,s,o,c,m,E,k){var P,B=n.numAttributes,q=this.context,Y=q.gl;if(q.extVertexArrayObject)this.vao&&this.destroy(),this.vao=q.extVertexArrayObject.createVertexArrayOES(),q.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=c,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=k;else{P=q.currentNumAttributes||0;for(var Q=B;Q<P;Q++)Y.disableVertexAttribArray(Q)}s.enableAttributes(Y,n);for(var $=0,ce=o;$<ce.length;$+=1)ce[$].enableAttributes(Y,n);E&&E.enableAttributes(Y,n),k&&k.enableAttributes(Y,n),s.bind(),s.setVertexAttribPointers(Y,n,m);for(var se=0,de=o;se<de.length;se+=1){var ne=de[se];ne.bind(),ne.setVertexAttribPointers(Y,n,m)}E&&(E.bind(),E.setVertexAttribPointers(Y,n,m)),c&&c.bind(),k&&(k.bind(),k.setVertexAttribPointers(Y,n,m)),q.currentNumAttributes=B},mf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var su=function(n,s,o,c,m,E){var k=n.gl;this.program=k.createProgram();for(var P=vf(o.staticAttributes),B=c?c.getBinderAttributes():[],q=P.concat(B),Y=o.staticUniforms?vf(o.staticUniforms):[],Q=c?c.getBinderUniforms():[],$=[],ce=0,se=Y.concat(Q);ce<se.length;ce+=1){var de=se[ce];$.indexOf(de)<0&&$.push(de)}var ne=c?c.defines():[];E&&ne.push("#define OVERDRAW_INSPECTOR;");var me=ne.concat(nu.fragmentSource,o.fragmentSource).join(`
`),ge=ne.concat(nu.vertexSource,o.vertexSource).join(`
`),Ie=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Ie,me),k.compileShader(Ie),k.attachShader(this.program,Ie);var Be=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Be,ge),k.compileShader(Be),k.attachShader(this.program,Be),this.attributes={};var Ce={};this.numAttributes=q.length;for(var Oe=0;Oe<this.numAttributes;Oe++)q[Oe]&&(k.bindAttribLocation(this.program,Oe,q[Oe]),this.attributes[q[Oe]]=Oe);k.linkProgram(this.program),k.deleteShader(Be),k.deleteShader(Ie);for(var Ze=0;Ze<$.length;Ze++){var Xe=$[Ze];if(Xe&&!Ce[Xe]){var We=k.getUniformLocation(this.program,Xe);We&&(Ce[Xe]=We)}}this.fixedUniforms=m(n,Ce),this.binderUniforms=c?c.getUniforms(n,Ce):[]}}};function lu(n,s,o){var c=1/Cr(o,1,s.transform.tileZoom),m=Math.pow(2,o.tileID.overscaledZ),E=o.tileSize*Math.pow(2,s.transform.tileZoom)/m,k=E*(o.tileID.canonical.x+o.tileID.wrap*m),P=E*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[k>>16,P>>16],u_pixel_coord_lower:[65535&k,65535&P]}}su.prototype.draw=function(n,s,o,c,m,E,k,P,B,q,Y,Q,$,ce,se,de){var ne,me=n.gl;if(!this.failedToCreate){for(var ge in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(c),n.setColorMode(m),n.setCullFace(E),this.fixedUniforms)this.fixedUniforms[ge].set(k[ge]);ce&&ce.setUniforms(n,this.binderUniforms,Q,{zoom:$});for(var Ie=(ne={},ne[me.LINES]=2,ne[me.TRIANGLES]=3,ne[me.LINE_STRIP]=1,ne)[s],Be=0,Ce=Y.get();Be<Ce.length;Be+=1){var Oe=Ce[Be],Ze=Oe.vaos||(Oe.vaos={});(Ze[P]||(Ze[P]=new mf)).bind(n,this,B,ce?ce.getPaintVertexBuffers():[],q,Oe.vertexOffset,se,de),me.drawElements(s,Oe.primitiveLength*Ie,me.UNSIGNED_SHORT,Oe.primitiveOffset*Ie*2)}}};var yf=function(n,s,o,c){var m=s.style.light,E=m.properties.get("position"),k=[E.x,E.y,E.z],P=a.create$1();m.properties.get("anchor")==="viewport"&&a.fromRotation(P,-s.transform.angle),a.transformMat3(k,k,P);var B=m.properties.get("color");return{u_matrix:n,u_lightpos:k,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+o,u_opacity:c}},$a=function(n,s,o,c,m,E,k){return a.extend(yf(n,s,o,c),lu(E,s,k),{u_height_factor:-Math.pow(2,m.overscaledZ)/k.tileSize/8})},wo=function(n){return{u_matrix:n}},bl=function(n,s,o,c){return a.extend(wo(n),lu(o,s,c))},gf=function(n,s){return{u_matrix:n,u_world:s}},xl=function(n,s,o,c,m){return a.extend(bl(n,s,o,c),{u_world:m})},Vs=function(n,s,o,c){var m,E,k=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var P=Cr(o,1,k.zoom);m=!0,E=[P,P]}else m=!1,E=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:E}},wl=function(n,s,o){var c=Cr(o,1,s.zoom),m=Math.pow(2,s.zoom-o.tileID.overscaledZ),E=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*m),s.pixelsToGLUnits[1]/(c*m)],u_overscale_factor:E}},Ep=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},ss=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},Ba=function(n){return{u_matrix:n}},_f=function(n,s,o,c){return{u_matrix:n,u_extrude_scale:Cr(s,1,o),u_intensity:c}},Eo=function(n,s,o){var c=n.transform;return{u_matrix:bf(n,s,o),u_ratio:1/Cr(s,1,c.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},kr=function(n,s,o,c){return a.extend(Eo(n,s,o),{u_image:0,u_image_height:c})},rh=function(n,s,o,c){var m=n.transform,E=eo(s,m);return{u_matrix:bf(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Cr(s,1,m.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[E,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},xd=function(n,s,o,c,m){var E=n.lineAtlas,k=eo(s,n.transform),P=o.layout.get("line-cap")==="round",B=E.getDash(c.from,P),q=E.getDash(c.to,P),Y=B.width*m.fromScale,Q=q.width*m.toScale;return a.extend(Eo(n,s,o),{u_patternscale_a:[k/Y,-B.height/2],u_patternscale_b:[k/Q,-q.height/2],u_sdfgamma:E.width/(256*Math.min(Y,Q)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:q.y,u_mix:m.t})};function eo(n,s){return 1/Cr(n,1,s.tileZoom)}function bf(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Fs=function(n,s,o,c,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=m.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:to(m.paint.get("raster-hue-rotate"))};var E,k};function to(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var ro,uu=function(n,s,o,c,m,E,k,P,B,q){var Y=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Y.width/Y.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:k,u_coord_matrix:P,u_is_text:+B,u_pitch_with_map:+c,u_texsize:q,u_texture:0}},ls=function(n,s,o,c,m,E,k,P,B,q,Y){var Q=m.transform;return a.extend(uu(n,s,o,c,m,E,k,P,B,q),{u_gamma_scale:c?Math.cos(Q._pitch)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+Y})},xf=function(n,s,o,c,m,E,k,P,B,q){return a.extend(ls(n,s,o,c,m,E,k,P,!0,B,!0),{u_texsize_icon:q,u_texture_icon:1})},oc=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},So=function(n,s,o,c,m,E){return a.extend(function(k,P,B,q){var Y=B.imageManager.getPattern(k.from.toString()),Q=B.imageManager.getPattern(k.to.toString()),$=B.imageManager.getPixelSize(),ce=$.width,se=$.height,de=Math.pow(2,q.tileID.overscaledZ),ne=q.tileSize*Math.pow(2,B.transform.tileZoom)/de,me=ne*(q.tileID.canonical.x+q.tileID.wrap*de),ge=ne*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[ce,se],u_mix:P.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/Cr(q,1,B.transform.tileZoom),u_pixel_coord_upper:[me>>16,ge>>16],u_pixel_coord_lower:[65535&me,65535&ge]}}(c,E,o,m),{u_matrix:n,u_opacity:s})},cu={fillExtrusion:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new a.Uniform1f(n,s.u_height_factor),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new a.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new a.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new a.UniformColor(n,s.u_color),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_overlay:new a.Uniform1i(n,s.u_overlay),u_overlay_scale:new a.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new a.Uniform1f(n,s.u_extrude_scale),u_intensity:new a.Uniform1f(n,s.u_intensity),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_color_ramp:new a.Uniform1i(n,s.u_color_ramp),u_opacity:new a.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_latrange:new a.Uniform2f(n,s.u_latrange),u_light:new a.Uniform2f(n,s.u_light),u_shadow:new a.UniformColor(n,s.u_shadow),u_highlight:new a.UniformColor(n,s.u_highlight),u_accent:new a.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_dimension:new a.Uniform2f(n,s.u_dimension),u_zoom:new a.Uniform1f(n,s.u_zoom),u_unpack:new a.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_image:new a.Uniform1i(n,s.u_image),u_image_height:new a.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_texsize:new a.Uniform2f(n,s.u_texsize),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_image:new a.Uniform1i(n,s.u_image),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new a.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new a.Uniform1f(n,s.u_sdfgamma),u_image:new a.Uniform1i(n,s.u_image),u_tex_y_a:new a.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new a.Uniform1f(n,s.u_tex_y_b),u_mix:new a.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new a.Uniform2f(n,s.u_tl_parent),u_scale_parent:new a.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new a.Uniform1f(n,s.u_buffer_scale),u_fade_t:new a.Uniform1f(n,s.u_fade_t),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image0:new a.Uniform1i(n,s.u_image0),u_image1:new a.Uniform1i(n,s.u_image1),u_brightness_low:new a.Uniform1f(n,s.u_brightness_low),u_brightness_high:new a.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new a.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new a.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new a.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texsize_icon:new a.Uniform2f(n,s.u_texsize_icon),u_texture:new a.Uniform1i(n,s.u_texture),u_texture_icon:new a.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_color:new a.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image:new a.Uniform1i(n,s.u_image),u_pattern_tl_a:new a.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(n,s.u_pattern_br_b),u_texsize:new a.Uniform2f(n,s.u_texsize),u_mix:new a.Uniform1f(n,s.u_mix),u_pattern_size_a:new a.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new a.Uniform1f(n,s.u_scale_a),u_scale_b:new a.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(n,s.u_tile_units_to_pixels)}}};function hu(n,s,o,c,m,E,k){for(var P=n.context,B=P.gl,q=n.useProgram("collisionBox"),Y=[],Q=0,$=0,ce=0;ce<c.length;ce++){var se=c[ce],de=s.getTile(se),ne=de.getBucket(o);if(ne){var me=se.posMatrix;m[0]===0&&m[1]===0||(me=n.translatePosMatrix(se.posMatrix,de,m,E));var ge=k?ne.textCollisionBox:ne.iconCollisionBox,Ie=ne.collisionCircleArray;if(Ie.length>0){var Be=a.create(),Ce=me;a.mul(Be,ne.placementInvProjMatrix,n.transform.glCoordMatrix),a.mul(Be,Be,ne.placementViewportMatrix),Y.push({circleArray:Ie,circleOffset:$,transform:Ce,invTransform:Be}),$=Q+=Ie.length/4}ge&&q.draw(P,B.LINES,re.disabled,le.disabled,n.colorModeForRenderPass(),_e.disabled,wl(me,n.transform,de),o.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,null,n.transform.zoom,null,null,ge.collisionVertexBuffer)}}if(k&&Y.length){var Oe=n.useProgram("collisionCircle"),Ze=new a.StructArrayLayout2f1f2i16;Ze.resize(4*Q),Ze._trim();for(var Xe=0,We=0,ut=Y;We<ut.length;We+=1)for(var wt=ut[We],bt=0;bt<wt.circleArray.length/4;bt++){var St=4*bt,pr=wt.circleArray[St+0],lt=wt.circleArray[St+1],At=wt.circleArray[St+2],Rt=wt.circleArray[St+3];Ze.emplace(Xe++,pr,lt,At,Rt,0),Ze.emplace(Xe++,pr,lt,At,Rt,1),Ze.emplace(Xe++,pr,lt,At,Rt,2),Ze.emplace(Xe++,pr,lt,At,Rt,3)}(!ro||ro.length<2*Q)&&(ro=function(si){var Tn=2*si,hn=new a.StructArrayLayout3ui6;hn.resize(Tn),hn._trim();for(var Xr=0;Xr<Tn;Xr++){var ki=6*Xr;hn.uint16[ki+0]=4*Xr+0,hn.uint16[ki+1]=4*Xr+1,hn.uint16[ki+2]=4*Xr+2,hn.uint16[ki+3]=4*Xr+2,hn.uint16[ki+4]=4*Xr+3,hn.uint16[ki+5]=4*Xr+0}return hn}(Q));for(var zt=P.createIndexBuffer(ro,!0),Dt=P.createVertexBuffer(Ze,a.collisionCircleLayout.members,!0),Ht=0,It=Y;Ht<It.length;Ht+=1){var xt=It[Ht],Qi=Ep(xt.transform,xt.invTransform,n.transform);Oe.draw(P,B.TRIANGLES,re.disabled,le.disabled,n.colorModeForRenderPass(),_e.disabled,Qi,o.id,Dt,zt,a.SegmentVector.simpleSegment(0,2*xt.circleOffset,xt.circleArray.length,xt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Dt.destroy(),zt.destroy()}}var ea=a.identity(new Float32Array(16));function ih(n,s,o,c,m,E){var k=a.getAnchorAlignment(n),P=-(k.horizontalAlign-.5)*s,B=-(k.verticalAlign-.5)*o,q=a.evaluateVariableOffset(n,c);return new a.Point((P/m+q[0])*E,(B/m+q[1])*E)}function wf(n,s,o,c,m,E,k,P,B,q,Y){var Q=n.text.placedSymbolArray,$=n.text.dynamicLayoutVertexArray,ce=n.icon.dynamicLayoutVertexArray,se={};$.clear();for(var de=0;de<Q.length;de++){var ne=Q.get(de),me=ne.hidden||!ne.crossTileID||n.allowVerticalPlacement&&!ne.placedOrientation?null:c[ne.crossTileID];if(me){var ge=new a.Point(ne.anchorX,ne.anchorY),Ie=Kt(ge,o?P:k),Be=tr(E.cameraToCenterDistance,Ie.signedDistanceFromCamera),Ce=m.evaluateSizeForFeature(n.textSizeData,q,ne)*Be/a.ONE_EM;o&&(Ce*=n.tilePixelRatio/B);for(var Oe=ih(me.anchor,me.width,me.height,me.textOffset,me.textBoxScale,Ce),Ze=o?Kt(ge.add(Oe),k).point:Ie.point.add(s?Oe.rotate(-E.angle):Oe),Xe=n.allowVerticalPlacement&&ne.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,We=0;We<ne.numGlyphs;We++)a.addDynamicAttributes($,Ze,Xe);Y&&ne.associatedIconIndex>=0&&(se[ne.associatedIconIndex]={shiftedAnchor:Ze,angle:Xe})}else Fi(ne.numGlyphs,$)}if(Y){ce.clear();for(var ut=n.icon.placedSymbolArray,wt=0;wt<ut.length;wt++){var bt=ut.get(wt);if(bt.hidden)Fi(bt.numGlyphs,ce);else{var St=se[wt];if(St)for(var pr=0;pr<bt.numGlyphs;pr++)a.addDynamicAttributes(ce,St.shiftedAnchor,St.angle);else Fi(bt.numGlyphs,ce)}}n.icon.dynamicLayoutVertexBuffer.updateData(ce)}n.text.dynamicLayoutVertexBuffer.updateData($)}function Ef(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Oa(n,s,o,c,m,E,k,P,B,q,Y,Q){for(var $=n.context,ce=$.gl,se=n.transform,de=P==="map",ne=B==="map",me=de&&o.layout.get("symbol-placement")!=="point",ge=de&&!ne&&!me,Ie=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Be=!1,Ce=n.depthModeForSublayer(0,re.ReadOnly),Oe=o.layout.get("text-variable-anchor"),Ze=[],Xe=0,We=c;Xe<We.length;Xe+=1){var ut=We[Xe],wt=s.getTile(ut),bt=wt.getBucket(o);if(bt){var St=m?bt.text:bt.icon;if(St&&St.segments.get().length){var pr=St.programConfigurations.get(o.id),lt=m||bt.sdfIcons,At=m?bt.textSizeData:bt.iconSizeData,Rt=ne||se.pitch!==0,zt=n.useProgram(Ef(lt,m,bt),pr),Dt=a.evaluateSizeForZoom(At,se.zoom),Ht=void 0,It=[0,0],xt=void 0,Qi=void 0,si=null,Tn=void 0;if(m)xt=wt.glyphAtlasTexture,Qi=ce.LINEAR,Ht=wt.glyphAtlasTexture.size,bt.iconsInText&&(It=wt.imageAtlasTexture.size,si=wt.imageAtlasTexture,Tn=Rt||n.options.rotating||n.options.zooming||At.kind==="composite"||At.kind==="camera"?ce.LINEAR:ce.NEAREST);else{var hn=o.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;xt=wt.imageAtlasTexture,Qi=lt||n.options.rotating||n.options.zooming||hn||Rt?ce.LINEAR:ce.NEAREST,Ht=wt.imageAtlasTexture.size}var Xr=Cr(wt,1,n.transform.zoom),ki=mr(ut.posMatrix,ne,de,n.transform,Xr),ya=dr(ut.posMatrix,ne,de,n.transform,Xr),li=Oe&&bt.hasTextData(),ia=o.layout.get("icon-text-fit")!=="none"&&li&&bt.hasIconData();me&&ha(bt,ut.posMatrix,n,m,ki,ya,ne,q);var xi=n.translatePosMatrix(ut.posMatrix,wt,E,k),An=me||m&&Oe||ia?ea:ki,qa=n.translatePosMatrix(ya,wt,E,k,!0),ys=lt&&o.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ch={program:zt,buffers:St,uniformValues:lt?bt.iconsInText?xf(At.kind,Dt,ge,ne,n,xi,An,qa,Ht,It):ls(At.kind,Dt,ge,ne,n,xi,An,qa,m,Ht,!0):uu(At.kind,Dt,ge,ne,n,xi,An,qa,m,Ht),atlasTexture:xt,atlasTextureIcon:si,atlasInterpolation:Qi,atlasInterpolationIcon:Tn,isSDF:lt,hasHalo:ys};if(Ie&&bt.canOverlap){Be=!0;for(var Hs=0,Co=St.segments.get();Hs<Co.length;Hs+=1){var gs=Co[Hs];Ze.push({segments:new a.SegmentVector([gs]),sortKey:gs.sortKey,state:ch})}}else Ze.push({segments:St.segments,sortKey:0,state:ch})}}}Be&&Ze.sort(function(za,Cl){return za.sortKey-Cl.sortKey});for(var Do=0,_s=Ze;Do<_s.length;Do+=1){var Za=_s[Do],$i=Za.state;if($.activeTexture.set(ce.TEXTURE0),$i.atlasTexture.bind($i.atlasInterpolation,ce.CLAMP_TO_EDGE),$i.atlasTextureIcon&&($.activeTexture.set(ce.TEXTURE1),$i.atlasTextureIcon&&$i.atlasTextureIcon.bind($i.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),$i.isSDF){var bs=$i.uniformValues;$i.hasHalo&&(bs.u_is_halo=1,nh($i.buffers,Za.segments,o,n,$i.program,Ce,Y,Q,bs)),bs.u_is_halo=0}nh($i.buffers,Za.segments,o,n,$i.program,Ce,Y,Q,$i.uniformValues)}}function nh(n,s,o,c,m,E,k,P,B){var q=c.context;m.draw(q,q.gl.TRIANGLES,E,k,P,_e.disabled,B,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,c.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function ah(n,s,o,c,m,E,k){var P,B,q,Y,Q,$=n.context.gl,ce=o.paint.get("fill-pattern"),se=ce&&ce.constantOr(1),de=o.getCrossfadeParameters();k?(B=se&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",P=$.LINES):(B=se?"fillPattern":"fill",P=$.TRIANGLES);for(var ne=0,me=c;ne<me.length;ne+=1){var ge=me[ne],Ie=s.getTile(ge);if(!se||Ie.patternsLoaded()){var Be=Ie.getBucket(o);if(Be){var Ce=Be.programConfigurations.get(o.id),Oe=n.useProgram(B,Ce);se&&(n.context.activeTexture.set($.TEXTURE0),Ie.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Ce.updatePaintBuffers(de));var Ze=ce.constantOr(null);if(Ze&&Ie.imageAtlas){var Xe=Ie.imageAtlas,We=Xe.patternPositions[Ze.to.toString()],ut=Xe.patternPositions[Ze.from.toString()];We&&ut&&Ce.setConstantPatternPositions(We,ut)}var wt=n.translatePosMatrix(ge.posMatrix,Ie,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(k){Y=Be.indexBuffer2,Q=Be.segments2;var bt=[$.drawingBufferWidth,$.drawingBufferHeight];q=B==="fillOutlinePattern"&&se?xl(wt,n,de,Ie,bt):gf(wt,bt)}else Y=Be.indexBuffer,Q=Be.segments,q=se?bl(wt,n,de,Ie):wo(wt);Oe.draw(n.context,P,m,n.stencilModeForClipping(ge),E,_e.disabled,q,o.id,Be.layoutVertexBuffer,Y,Q,o.paint,n.transform.zoom,Ce)}}}}function Ns(n,s,o,c,m,E,k){for(var P=n.context,B=P.gl,q=o.paint.get("fill-extrusion-pattern"),Y=q.constantOr(1),Q=o.getCrossfadeParameters(),$=o.paint.get("fill-extrusion-opacity"),ce=0,se=c;ce<se.length;ce+=1){var de=se[ce],ne=s.getTile(de),me=ne.getBucket(o);if(me){var ge=me.programConfigurations.get(o.id),Ie=n.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",ge);Y&&(n.context.activeTexture.set(B.TEXTURE0),ne.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),ge.updatePaintBuffers(Q));var Be=q.constantOr(null);if(Be&&ne.imageAtlas){var Ce=ne.imageAtlas,Oe=Ce.patternPositions[Be.to.toString()],Ze=Ce.patternPositions[Be.from.toString()];Oe&&Ze&&ge.setConstantPatternPositions(Oe,Ze)}var Xe=n.translatePosMatrix(de.posMatrix,ne,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),We=o.paint.get("fill-extrusion-vertical-gradient"),ut=Y?$a(Xe,n,We,$,de,Q,ne):yf(Xe,n,We,$);Ie.draw(P,P.gl.TRIANGLES,m,E,k,_e.backCCW,ut,o.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,o.paint,n.transform.zoom,ge)}}}function Us(n,s,o,c,m,E){var k=n.context,P=k.gl,B=s.fbo;if(B){var q=n.useProgram("hillshade");k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,B.colorAttachment.get());var Y=function(Q,$,ce){var se=ce.paint.get("hillshade-shadow-color"),de=ce.paint.get("hillshade-highlight-color"),ne=ce.paint.get("hillshade-accent-color"),me=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=Q.transform.angle);var ge,Ie,Be,Ce=!Q.options.moving;return{u_matrix:Q.transform.calculatePosMatrix($.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:(ge=$.tileID,Ie=Math.pow(2,ge.canonical.z),Be=ge.canonical.y,[new a.MercatorCoordinate(0,Be/Ie).toLngLat().lat,new a.MercatorCoordinate(0,(Be+1)/Ie).toLngLat().lat]),u_light:[ce.paint.get("hillshade-exaggeration"),me],u_shadow:se,u_highlight:de,u_accent:ne}}(n,s,o);q.draw(k,P.TRIANGLES,c,m,E,_e.disabled,Y,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function us(n,s,o,c,m,E){var k=n.context,P=k.gl,B=s.dem;if(B&&B.data){var q=B.dim,Y=B.stride,Q=B.getPixels();if(k.activeTexture.set(P.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(Y),s.demTexture){var $=s.demTexture;$.update(Q,{premultiply:!1}),$.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else s.demTexture=new a.Texture(k,Q,P.RGBA,{premultiply:!1}),s.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);k.activeTexture.set(P.TEXTURE0);var ce=s.fbo;if(!ce){var se=new a.Texture(k,{width:q,height:q,data:null},P.RGBA);se.bind(P.LINEAR,P.CLAMP_TO_EDGE),(ce=s.fbo=k.createFramebuffer(q,q,!0)).colorAttachment.set(se.texture)}k.bindFramebuffer.set(ce.framebuffer),k.viewport.set([0,0,q,q]),n.useProgram("hillshadePrepare").draw(k,P.TRIANGLES,c,m,E,_e.disabled,function(de,ne){var me=ne.stride,ge=a.create();return a.ortho(ge,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(ge,ge,[0,-a.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[me,me],u_zoom:de.overscaledZ,u_unpack:ne.getUnpackVector()}}(s.tileID,B),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function El(n,s,o,c,m){var E=c.paint.get("raster-fade-duration");if(E>0){var k=a.browser.now(),P=(k-n.timeAdded)/E,B=s?(k-s.timeAdded)/E:-1,q=o.getSource(),Y=m.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),Q=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(n.tileID.overscaledZ-Y),$=Q&&n.refreshedUponExpiration?1:a.clamp(Q?P:1-B,0,1);return n.refreshedUponExpiration&&P>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-$}:{opacity:$,mix:0}}return{opacity:1,mix:0}}var Sp=new a.Color(1,0,0,1),Sf=new a.Color(0,1,0,1),Sl=new a.Color(0,0,1,1),Va=new a.Color(1,0,1,1),kp=new a.Color(0,1,1,1);function sc(n,s,o,c){lc(n,0,s+o/2,n.transform.width,o,c)}function oh(n,s,o,c){lc(n,s-o/2,0,o,n.transform.height,c)}function lc(n,s,o,c,m,E){var k=n.context,P=k.gl;P.enable(P.SCISSOR_TEST),P.scissor(s*a.browser.devicePixelRatio,o*a.browser.devicePixelRatio,c*a.browser.devicePixelRatio,m*a.browser.devicePixelRatio),k.clear({color:E}),P.disable(P.SCISSOR_TEST)}function uc(n,s,o){var c=n.context,m=c.gl,E=o.posMatrix,k=n.useProgram("debug"),P=re.disabled,B=le.disabled,q=n.colorModeForRenderPass();c.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),k.draw(c,m.LINE_STRIP,P,B,q,_e.disabled,ss(E,a.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var Y=s.getTileByID(o.key).latestRawTileData,Q=Math.floor((Y&&Y.byteLength||0)/1024),$=s.getTile(o).tileSize,ce=512/Math.min($,512)*(o.overscaledZ/n.transform.zoom)*.5,se=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(se+=" => "+o.overscaledZ),function(de,ne){de.initDebugOverlayCanvas();var me=de.debugOverlayCanvas,ge=de.context.gl,Ie=de.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,me.width,me.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(ne,5,5),Ie.strokeText(ne,5,5),de.debugOverlayTexture.update(me),de.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}(n,se+" "+Q+"kb"),k.draw(c,m.TRIANGLES,P,B,ye.alphaBlended,_e.disabled,ss(E,a.Color.transparent,ce),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var kl={symbol:function(n,s,o,c,m){if(n.renderPass==="translucent"){var E=le.disabled,k=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(P,B,q,Y,Q,$,ce){for(var se=B.transform,de=Q==="map",ne=$==="map",me=0,ge=P;me<ge.length;me+=1){var Ie=ge[me],Be=Y.getTile(Ie),Ce=Be.getBucket(q);if(Ce&&Ce.text&&Ce.text.segments.get().length){var Oe=a.evaluateSizeForZoom(Ce.textSizeData,se.zoom),Ze=Cr(Be,1,B.transform.zoom),Xe=mr(Ie.posMatrix,ne,de,B.transform,Ze),We=q.layout.get("icon-text-fit")!=="none"&&Ce.hasIconData();if(Oe){var ut=Math.pow(2,se.zoom-Be.tileID.overscaledZ);wf(Ce,de,ne,ce,a.symbolSize,se,Xe,Ie.posMatrix,ut,Oe,We)}}}}(c,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),m),o.paint.get("icon-opacity").constantOr(1)!==0&&Oa(n,s,o,c,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),E,k),o.paint.get("text-opacity").constantOr(1)!==0&&Oa(n,s,o,c,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),E,k),s.map.showCollisionBoxes&&(hu(n,s,o,c,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),hu(n,s,o,c,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,c){if(n.renderPass==="translucent"){var m=o.paint.get("circle-opacity"),E=o.paint.get("circle-stroke-width"),k=o.paint.get("circle-stroke-opacity"),P=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||E.constantOr(1)!==0&&k.constantOr(1)!==0){for(var B=n.context,q=B.gl,Y=n.depthModeForSublayer(0,re.ReadOnly),Q=le.disabled,$=n.colorModeForRenderPass(),ce=[],se=0;se<c.length;se++){var de=c[se],ne=s.getTile(de),me=ne.getBucket(o);if(me){var ge=me.programConfigurations.get(o.id),Ie={programConfiguration:ge,program:n.useProgram("circle",ge),layoutVertexBuffer:me.layoutVertexBuffer,indexBuffer:me.indexBuffer,uniformValues:Vs(n,de,ne,o)};if(P)for(var Be=0,Ce=me.segments.get();Be<Ce.length;Be+=1){var Oe=Ce[Be];ce.push({segments:new a.SegmentVector([Oe]),sortKey:Oe.sortKey,state:Ie})}else ce.push({segments:me.segments,sortKey:0,state:Ie})}}P&&ce.sort(function(wt,bt){return wt.sortKey-bt.sortKey});for(var Ze=0,Xe=ce;Ze<Xe.length;Ze+=1){var We=Xe[Ze],ut=We.state;ut.program.draw(B,q.TRIANGLES,Y,Q,$,_e.disabled,ut.uniformValues,o.id,ut.layoutVertexBuffer,ut.indexBuffer,We.segments,o.paint,n.transform.zoom,ut.programConfiguration)}}}},heatmap:function(n,s,o,c){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,E=m.gl,k=le.disabled,P=new ye([E.ONE,E.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ce,se,de){var ne=ce.gl;ce.activeTexture.set(ne.TEXTURE1),ce.viewport.set([0,0,se.width/4,se.height/4]);var me=de.heatmapFbo;if(me)ne.bindTexture(ne.TEXTURE_2D,me.colorAttachment.get()),ce.bindFramebuffer.set(me.framebuffer);else{var ge=ne.createTexture();ne.bindTexture(ne.TEXTURE_2D,ge),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),me=de.heatmapFbo=ce.createFramebuffer(se.width/4,se.height/4,!1),function(Ie,Be,Ce,Oe){var Ze=Ie.gl;Ze.texImage2D(Ze.TEXTURE_2D,0,Ze.RGBA,Be.width/4,Be.height/4,0,Ze.RGBA,Ie.extRenderToTextureHalfFloat?Ie.extTextureHalfFloat.HALF_FLOAT_OES:Ze.UNSIGNED_BYTE,null),Oe.colorAttachment.set(Ce)}(ce,se,ge,me)}})(m,n,o),m.clear({color:a.Color.transparent});for(var B=0;B<c.length;B++){var q=c[B];if(!s.hasRenderableParent(q)){var Y=s.getTile(q),Q=Y.getBucket(o);if(Q){var $=Q.programConfigurations.get(o.id);n.useProgram("heatmap",$).draw(m,E.TRIANGLES,re.disabled,k,P,_e.disabled,_f(q.posMatrix,Y,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,o.paint,n.transform.zoom,$)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(ce,se){var de=ce.context,ne=de.gl,me=se.heatmapFbo;if(me){de.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,me.colorAttachment.get()),de.activeTexture.set(ne.TEXTURE1);var ge=se.colorRampTexture;ge||(ge=se.colorRampTexture=new a.Texture(de,se.colorRamp,ne.RGBA)),ge.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(de,ne.TRIANGLES,re.disabled,le.disabled,ce.colorModeForRenderPass(),_e.disabled,function(Ie,Be,Ce,Oe){var Ze=a.create();a.ortho(Ze,0,Ie.width,Ie.height,0,0,1);var Xe=Ie.context.gl;return{u_matrix:Ze,u_world:[Xe.drawingBufferWidth,Xe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Be.paint.get("heatmap-opacity")}}(ce,se),se.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,se.paint,ce.transform.zoom)}}(n,o))},line:function(n,s,o,c){if(n.renderPass==="translucent"){var m=o.paint.get("line-opacity"),E=o.paint.get("line-width");if(m.constantOr(1)!==0&&E.constantOr(1)!==0)for(var k=n.depthModeForSublayer(0,re.ReadOnly),P=n.colorModeForRenderPass(),B=o.paint.get("line-dasharray"),q=o.paint.get("line-pattern"),Y=q.constantOr(1),Q=o.paint.get("line-gradient"),$=o.getCrossfadeParameters(),ce=Y?"linePattern":B?"lineSDF":Q?"lineGradient":"line",se=n.context,de=se.gl,ne=!0,me=0,ge=c;me<ge.length;me+=1){var Ie=ge[me],Be=s.getTile(Ie);if(!Y||Be.patternsLoaded()){var Ce=Be.getBucket(o);if(Ce){var Oe=Ce.programConfigurations.get(o.id),Ze=n.context.program.get(),Xe=n.useProgram(ce,Oe),We=ne||Xe.program!==Ze,ut=q.constantOr(null);if(ut&&Be.imageAtlas){var wt=Be.imageAtlas,bt=wt.patternPositions[ut.to.toString()],St=wt.patternPositions[ut.from.toString()];bt&&St&&Oe.setConstantPatternPositions(bt,St)}var pr=Y?rh(n,Be,o,$):B?xd(n,Be,o,B,$):Q?kr(n,Be,o,Ce.lineClipsArray.length):Eo(n,Be,o);if(Y)se.activeTexture.set(de.TEXTURE0),Be.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Oe.updatePaintBuffers($);else if(B&&(We||n.lineAtlas.dirty))se.activeTexture.set(de.TEXTURE0),n.lineAtlas.bind(se);else if(Q){var lt=Ce.gradients[o.id],At=lt.texture;if(o.gradientVersion!==lt.version){var Rt=256;if(o.stepInterpolant){var zt=s.getSource().maxzoom,Dt=Ie.canonical.z===zt?Math.ceil(1<<n.transform.maxZoom-Ie.canonical.z):1;Rt=a.clamp(a.nextPowerOfTwo(Ce.maxLineLength/a.EXTENT*1024*Dt),256,se.maxTextureSize)}lt.gradient=a.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Rt,image:lt.gradient||void 0,clips:Ce.lineClipsArray}),lt.texture?lt.texture.update(lt.gradient):lt.texture=new a.Texture(se,lt.gradient,de.RGBA),lt.version=o.gradientVersion,At=lt.texture}se.activeTexture.set(de.TEXTURE0),At.bind(o.stepInterpolant?de.NEAREST:de.LINEAR,de.CLAMP_TO_EDGE)}Xe.draw(se,de.TRIANGLES,k,n.stencilModeForClipping(Ie),P,_e.disabled,pr,o.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,o.paint,n.transform.zoom,Oe,Ce.layoutVertexBuffer2),ne=!1}}}}},fill:function(n,s,o,c){var m=o.paint.get("fill-color"),E=o.paint.get("fill-opacity");if(E.constantOr(1)!==0){var k=n.colorModeForRenderPass(),P=o.paint.get("fill-pattern"),B=n.opaquePassEnabledForLayer()&&!P.constantOr(1)&&m.constantOr(a.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===B){var q=n.depthModeForSublayer(1,n.renderPass==="opaque"?re.ReadWrite:re.ReadOnly);ah(n,s,o,c,q,k,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var Y=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,re.ReadOnly);ah(n,s,o,c,Y,k,!0)}}},"fill-extrusion":function(n,s,o,c){var m=o.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var E=new re(n.context.gl.LEQUAL,re.ReadWrite,n.depthRangeFor3D);if(m!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Ns(n,s,o,c,E,le.disabled,ye.disabled),Ns(n,s,o,c,E,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var k=n.colorModeForRenderPass();Ns(n,s,o,c,E,le.disabled,k)}}},hillshade:function(n,s,o,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,E=n.depthModeForSublayer(0,re.ReadOnly),k=n.colorModeForRenderPass(),P=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],B=P[0],q=0,Y=P[1];q<Y.length;q+=1){var Q=Y[q],$=s.getTile(Q);$.needsHillshadePrepare&&n.renderPass==="offscreen"?us(n,$,o,E,le.disabled,k):n.renderPass==="translucent"&&Us(n,$,o,E,B[Q.overscaledZ],k)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,c){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&c.length)for(var m=n.context,E=m.gl,k=s.getSource(),P=n.useProgram("raster"),B=n.colorModeForRenderPass(),q=k instanceof sr?[{},c]:n.stencilConfigForOverlap(c),Y=q[0],Q=q[1],$=Q[Q.length-1].overscaledZ,ce=!n.options.moving,se=0,de=Q;se<de.length;se+=1){var ne=de[se],me=n.depthModeForSublayer(ne.overscaledZ-$,o.paint.get("raster-opacity")===1?re.ReadWrite:re.ReadOnly,E.LESS),ge=s.getTile(ne),Ie=n.transform.calculatePosMatrix(ne.toUnwrapped(),ce);ge.registerFadeDuration(o.paint.get("raster-fade-duration"));var Be=s.findLoadedParent(ne,0),Ce=El(ge,Be,s,o,n.transform),Oe=void 0,Ze=void 0,Xe=o.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;m.activeTexture.set(E.TEXTURE0),ge.texture.bind(Xe,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(E.TEXTURE1),Be?(Be.texture.bind(Xe,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,Be.tileID.overscaledZ-ge.tileID.overscaledZ),Ze=[ge.tileID.canonical.x*Oe%1,ge.tileID.canonical.y*Oe%1]):ge.texture.bind(Xe,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);var We=Fs(Ie,Ze||[0,0],Oe||1,Ce,o);k instanceof sr?P.draw(m,E.TRIANGLES,me,le.disabled,B,_e.disabled,We,o.id,k.boundsBuffer,n.quadTriangleIndexBuffer,k.boundsSegments):P.draw(m,E.TRIANGLES,me,Y[ne.overscaledZ],B,_e.disabled,We,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var c=o.paint.get("background-color"),m=o.paint.get("background-opacity");if(m!==0){var E=n.context,k=E.gl,P=n.transform,B=P.tileSize,q=o.paint.get("background-pattern");if(!n.isPatternMissing(q)){var Y=!q&&c.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===Y){var Q=le.disabled,$=n.depthModeForSublayer(0,Y==="opaque"?re.ReadWrite:re.ReadOnly),ce=n.colorModeForRenderPass(),se=n.useProgram(q?"backgroundPattern":"background"),de=P.coveringTiles({tileSize:B});q&&(E.activeTexture.set(k.TEXTURE0),n.imageManager.bind(n.context));for(var ne=o.getCrossfadeParameters(),me=0,ge=de;me<ge.length;me+=1){var Ie=ge[me],Be=n.transform.calculatePosMatrix(Ie.toUnwrapped()),Ce=q?So(Be,m,n,q,{tileID:Ie,tileSize:B},ne):oc(Be,m,c);se.draw(E,k.TRIANGLES,$,Q,ce,_e.disabled,Ce,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var c=0;c<o.length;c++)uc(n,s,o[c])},custom:function(n,s,o){var c=n.context,m=o.implementation;if(n.renderPass==="offscreen"){var E=m.prerender;E&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),E.call(m,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(le.disabled);var k=m.renderingMode==="3d"?new re(n.context.gl.LEQUAL,re.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,re.ReadOnly);c.setDepthMode(k),m.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},Qr=function(n,s){this.context=new H(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=ae.maxUnderzooming+ae.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ke,this.gpuTimers={}};Qr.prototype.resize=function(n,s){if(this.width=n*a.browser.devicePixelRatio,this.height=s*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,c=this.style._order;o<c.length;o+=1)this.style._layers[c[o]].resize()},Qr.prototype.setup=function(){var n=this.context,s=new a.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Ci.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var o=new a.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(a.EXTENT,0),o.emplaceBack(0,a.EXTENT),o.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=n.createVertexBuffer(o,Ci.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var c=new a.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(a.EXTENT,0,a.EXTENT,0),c.emplaceBack(0,a.EXTENT,0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,Fe.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var m=new a.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,Ci.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var E=new a.StructArrayLayout1ui2;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(E);var k=new a.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k),this.emptyTexture=new a.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var P=this.context.gl;this.stencilClearMode=new le({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)},Qr.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=a.create();a.ortho(o,0,this.width,this.height,0,0,1),a.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,re.disabled,this.stencilClearMode,ye.disabled,_e.disabled,Ba(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Qr.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,c=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(ye.disabled),o.setDepthMode(re.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var E=0,k=s;E<k.length;E+=1){var P=k[E],B=this._tileClippingMaskIDs[P.key]=this.nextStencilID++;m.draw(o,c.TRIANGLES,re.disabled,new le({func:c.ALWAYS,mask:0},B,255,c.KEEP,c.KEEP,c.REPLACE),ye.disabled,_e.disabled,Ba(P.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Qr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new le({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Qr.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new le({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Qr.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,c=n.sort(function(B,q){return q.overscaledZ-B.overscaledZ}),m=c[c.length-1].overscaledZ,E=c[0].overscaledZ-m+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();for(var k={},P=0;P<E;P++)k[P+m]=new le({func:o.GEQUAL,mask:255},P+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=E,[k,c]}return[(s={},s[m]=le.disabled,s),c]},Qr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ye([n.CONSTANT_COLOR,n.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ye.unblended:ye.alphaBlended},Qr.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return re.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new re(o||this.context.gl.LEQUAL,s,[c,c])},Qr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Qr.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var c=this.style._order,m=this.style.sourceCaches;for(var E in m){var k=m[E];k.used&&k.prepare(this.context)}var P,B,q={},Y={},Q={};for(var $ in m){var ce=m[$];q[$]=ce.getVisibleCoordinates(),Y[$]=q[$].slice().reverse(),Q[$]=ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var se=0;se<c.length;se++)if(this.style._layers[c[se]].is3D()){this.opaquePassCutoff=se;break}this.renderPass="offscreen";for(var de=0,ne=c;de<ne.length;de+=1){var me=this.style._layers[ne[de]];if(me.hasOffscreenPass()&&!me.isHidden(this.transform.zoom)){var ge=Y[me.source];(me.type==="custom"||ge.length)&&this.renderLayer(this,m[me.source],me,ge)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var Ie=this.style._layers[c[this.currentLayer]],Be=m[Ie.source],Ce=q[Ie.source];this._renderTileClippingMasks(Ie,Ce),this.renderLayer(this,Be,Ie,Ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Oe=this.style._layers[c[this.currentLayer]],Ze=m[Oe.source],Xe=(Oe.type==="symbol"?Q:Y)[Oe.source];this._renderTileClippingMasks(Oe,q[Oe.source]),this.renderLayer(this,Ze,Oe,Xe)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(We){We.source&&!We.isHidden(o.transform.zoom)&&(We.source!==(B&&B.id)&&(B=o.style.sourceCaches[We.source]),(!P||P.getSource().maxzoom<B.getSource().maxzoom)&&(P=B))}),P&&kl.debug(this,P,P.getVisibleCoordinates())),this.options.showPadding&&function(We){var ut=We.transform.padding;sc(We,We.transform.height-(ut.top||0),3,Sp),sc(We,ut.bottom||0,3,Sf),oh(We,ut.left||0,3,Sl),oh(We,We.transform.width-(ut.right||0),3,Va);var wt=We.transform.centerPoint;(function(bt,St,pr,lt){lc(bt,St-1,pr-10,2,20,lt),lc(bt,St-10,pr-1,20,2,lt)})(We,wt.x,We.transform.height-wt.y,kp)}(this),this.context.setDefault()},Qr.prototype.renderLayer=function(n,s,o,c){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||c.length)&&(this.id=o.id,this.gpuTimingStart(o),kl[o.type](n,s,o,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Qr.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Qr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Qr.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Qr.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var c=n[o],m=this.context.extTimerQuery,E=m.getQueryObjectEXT(c.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(c.query),s[o]=E}return s},Qr.prototype.translatePosMatrix=function(n,s,o,c,m){if(!o[0]&&!o[1])return n;var E=m?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(E){var k=Math.sin(E),P=Math.cos(E);o=[o[0]*P-o[1]*k,o[0]*k+o[1]*P]}var B=[m?o[0]:Cr(s,o[0],this.transform.zoom),m?o[1]:Cr(s,o[1],this.transform.zoom),0],q=new Float32Array(16);return a.translate(q,n,B),q},Qr.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Qr.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Qr.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Qr.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new su(this.context,n,ac[n],s,cu[n],this._showOverdrawInspector)),this.cache[o]},Qr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Qr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Qr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Qr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var fa=function(n,s){this.points=n,this.planes=s};fa.fromInvProjectionMatrix=function(n,s,o){var c=Math.pow(2,o),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(k){return a.transformMat4([],k,n)}).map(function(k){return a.scale$1([],k,1/k[3]/s*c)}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(k){var P=a.sub([],m[k[0]],m[k[1]]),B=a.sub([],m[k[2]],m[k[1]]),q=a.normalize([],a.cross([],P,B)),Y=-a.dot(q,m[k[1]]);return q.concat(Y)});return new fa(m,E)};var da=function(n,s){this.min=n,this.max=s,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};da.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=a.clone$2(this.min),c=a.clone$2(this.max),m=0;m<s.length;m++)o[m]=s[m]?this.min[m]:this.center[m],c[m]=s[m]?this.center[m]:this.max[m];return c[2]=this.max[2],new da(o,c)},da.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},da.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},da.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,c=0;c<n.planes.length;c++){for(var m=n.planes[c],E=0,k=0;k<s.length;k++)E+=a.dot$1(m,s[k])>=0;if(E===0)return 0;E!==s.length&&(o=!1)}if(o)return 2;for(var P=0;P<3;P++){for(var B=Number.MAX_VALUE,q=-Number.MAX_VALUE,Y=0;Y<n.points.length;Y++){var Q=n.points[Y][P]-this.min[P];B=Math.min(B,Q),q=Math.max(q,Q)}if(q<0||B>this.max[P]-this.min[P])return 0}return 1};var On=function(n,s,o,c){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=c};On.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=a.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=a.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=a.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=a.number(n.right,s.right,o)),this},On.prototype.getCenter=function(n,s){var o=a.clamp((this.left+n-this.right)/2,0,n),c=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.Point(o,c)},On.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},On.prototype.clone=function(){return new On(this.top,this.bottom,this.left,this.right)},On.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Xt=function(n,s,o,c,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new On,this._posMatrixCache={},this._alignedPosMatrixCache={}},jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Xt.prototype.clone=function(){var n=new Xt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},jr.minZoom.get=function(){return this._minZoom},jr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},jr.maxZoom.get=function(){return this._maxZoom},jr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},jr.minPitch.get=function(){return this._minPitch},jr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},jr.maxPitch.get=function(){return this._maxPitch},jr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},jr.renderWorldCopies.get=function(){return this._renderWorldCopies},jr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},jr.worldSize.get=function(){return this.tileSize*this.scale},jr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},jr.size.get=function(){return new a.Point(this.width,this.height)},jr.bearing.get=function(){return-this.angle/Math.PI*180},jr.bearing.set=function(n){var s=-a.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},jr.pitch.get=function(){return this._pitch/Math.PI*180},jr.pitch.set=function(n){var s=a.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},jr.fov.get=function(){return this._fov/Math.PI*180},jr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},jr.zoom.get=function(){return this._zoom},jr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},jr.center.get=function(){return this._center},jr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},jr.padding.get=function(){return this._edgeInsets.toJSON()},jr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},jr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Xt.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},Xt.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},Xt.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},Xt.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new a.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new a.Point(0,0)),c=this.pointCoordinate(new a.Point(this.width,0)),m=this.pointCoordinate(new a.Point(this.width,this.height)),E=this.pointCoordinate(new a.Point(0,this.height)),k=Math.floor(Math.min(o.x,c.x,m.x,E.x)),P=Math.floor(Math.max(o.x,c.x,m.x,E.x)),B=k-1;B<=P+1;B++)B!==0&&s.push(new a.UnwrappedTileID(B,n));return s},Xt.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=a.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),E=[m*c.x,m*c.y,0],k=fa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),P=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(P=s);var B=function(We){return{aabb:new da([We*m,0,0],[(We+1)*m,m,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}},q=[],Y=[],Q=s,$=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var ce=1;ce<=3;ce++)q.push(B(-ce)),q.push(B(ce));for(q.push(B(0));q.length>0;){var se=q.pop(),de=se.x,ne=se.y,me=se.fullyVisible;if(!me){var ge=se.aabb.intersects(k);if(ge===0)continue;me=ge===2}var Ie=se.aabb.distanceX(E),Be=se.aabb.distanceY(E),Ce=Math.max(Math.abs(Ie),Math.abs(Be));if(se.zoom===Q||Ce>3+(1<<Q-se.zoom)-2&&se.zoom>=P)Y.push({tileID:new a.OverscaledTileID(se.zoom===Q?$:se.zoom,se.wrap,se.zoom,de,ne),distanceSq:a.sqrLen([E[0]-.5-de,E[1]-.5-ne])});else for(var Oe=0;Oe<4;Oe++){var Ze=(de<<1)+Oe%2,Xe=(ne<<1)+(Oe>>1);q.push({aabb:se.aabb.quadrant(Oe),zoom:se.zoom+1,x:Ze,y:Xe,wrap:se.wrap,fullyVisible:me})}}return Y.sort(function(We,ut){return We.distanceSq-ut.distanceSq}).map(function(We){return We.tileID})},Xt.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},jr.unmodified.get=function(){return this._unmodified},Xt.prototype.zoomScale=function(n){return Math.pow(2,n)},Xt.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},Xt.prototype.project=function(n){var s=a.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(n.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)},Xt.prototype.unproject=function(n){return new a.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},jr.point.get=function(){return this.project(this.center)},Xt.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),E=new a.MercatorCoordinate(m.x-(o.x-c.x),m.y-(o.y-c.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())},Xt.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},Xt.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},Xt.prototype.locationCoordinate=function(n){return a.MercatorCoordinate.fromLngLat(n)},Xt.prototype.coordinateLocation=function(n){return n.toLngLat()},Xt.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(o,o,this.pixelMatrixInverse);var c=s[3],m=o[3],E=s[1]/c,k=o[1]/m,P=s[2]/c,B=o[2]/m,q=P===B?0:(0-P)/(B-P);return new a.MercatorCoordinate(a.number(s[0]/c,o[0]/m,q)/this.worldSize,a.number(E,k,q)/this.worldSize)},Xt.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.Point(s[0]/s[3],s[1]/s[3])},Xt.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},Xt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Xt.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Xt.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[o])return c[o];var m=n.canonical,E=this.worldSize/this.zoomScale(m.z),k=m.x+Math.pow(2,m.z)*n.wrap,P=a.identity(new Float64Array(16));return a.translate(P,P,[k*E,m.y*E,0]),a.scale(P,P,[E/a.EXTENT,E/a.EXTENT,1]),a.multiply(P,s?this.alignedProjMatrix:this.projMatrix,P),c[o]=new Float32Array(P),c[o]},Xt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Xt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,c,m=-90,E=90,k=-180,P=180,B=this.size,q=this._unmodified;if(this.latRange){var Y=this.latRange;m=a.mercatorYfromLat(Y[1])*this.worldSize,n=(E=a.mercatorYfromLat(Y[0])*this.worldSize)-m<B.y?B.y/(E-m):0}if(this.lngRange){var Q=this.lngRange;k=a.mercatorXfromLng(Q[0])*this.worldSize,s=(P=a.mercatorXfromLng(Q[1])*this.worldSize)-k<B.x?B.x/(P-k):0}var $=this.point,ce=Math.max(s||0,n||0);if(ce)return this.center=this.unproject(new a.Point(s?(P+k)/2:$.x,n?(E+m)/2:$.y)),this.zoom+=this.scaleZoom(ce),this._unmodified=q,void(this._constraining=!1);if(this.latRange){var se=$.y,de=B.y/2;se-de<m&&(c=m+de),se+de>E&&(c=E-de)}if(this.lngRange){var ne=$.x,me=B.x/2;ne-me<k&&(o=k+me),ne+me>P&&(o=P-me)}o===void 0&&c===void 0||(this.center=this.unproject(new a.Point(o!==void 0?o:$.x,c!==void 0?c:$.y))),this._unmodified=q,this._constraining=!1}},Xt.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),c=Math.sin(o)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-o,.01,Math.PI-.01)),m=this.point,E=m.x,k=m.y,P=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),B=this.height/50,q=new Float64Array(16);a.perspective(q,this._fov,this.width/this.height,B,P),q[8]=2*-n.x/this.width,q[9]=2*n.y/this.height,a.scale(q,q,[1,-1,1]),a.translate(q,q,[0,0,-this.cameraToCenterDistance]),a.rotateX(q,q,this._pitch),a.rotateZ(q,q,this.angle),a.translate(q,q,[-E,-k,0]),this.mercatorMatrix=a.scale([],q,[this.worldSize,this.worldSize,this.worldSize]),a.scale(q,q,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=q,this.invProjMatrix=a.invert([],this.projMatrix);var Y=this.width%2/2,Q=this.height%2/2,$=Math.cos(this.angle),ce=Math.sin(this.angle),se=E-Math.round(E)+$*Y+ce*Q,de=k-Math.round(k)+$*Q+ce*Y,ne=new Float64Array(q);if(a.translate(ne,ne,[se>.5?se-1:se,de>.5?de-1:de,0]),this.alignedProjMatrix=ne,q=a.create(),a.scale(q,q,[this.width/2,-this.height/2,1]),a.translate(q,q,[1,-1,0]),this.labelPlaneMatrix=q,q=a.create(),a.scale(q,q,[1,-1,1]),a.translate(q,q,[-1,-1,0]),a.scale(q,q,[2/this.width,2/this.height,1]),this.glCoordMatrix=q,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(q=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=q,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Xt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new a.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Xt.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,n))},Xt.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,c=s.y,m=s.x,E=s.y,k=0,P=n;k<P.length;k+=1){var B=P[k];o=Math.min(o,B.x),c=Math.min(c,B.y),m=Math.max(m,B.x),E=Math.max(E,B.y)}return[new a.Point(o,c),new a.Point(m,c),new a.Point(m,E),new a.Point(o,E),new a.Point(o,c)]},Object.defineProperties(Xt.prototype,jr);var Vn=function(n){var s,o,c,m;this._hashName=n&&encodeURIComponent(n),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,c=null,m=function(){c=null,o&&(s(),c=setTimeout(m,300),o=!1)},function(){return o=!0,c||m(),c})};Vn.prototype.addTo=function(n){return this._map=n,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Vn.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Vn.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,c=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,c),E=Math.round(s.lng*m)/m,k=Math.round(s.lat*m)/m,P=this._map.getBearing(),B=this._map.getPitch(),q="";if(q+=n?"/"+E+"/"+k+"/"+o:o+"/"+k+"/"+E,(P||B)&&(q+="/"+Math.round(10*P)/10),B&&(q+="/"+Math.round(B)),this._hashName){var Y=this._hashName,Q=!1,$=a.window.location.hash.slice(1).split("&").map(function(ce){var se=ce.split("=")[0];return se===Y?(Q=!0,se+"="+q):ce}).filter(function(ce){return ce});return Q||$.push(Y+"="+q),"#"+$.join("&")}return"#"+q},Vn.prototype._getCurrentHash=function(){var n,s=this,o=a.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):o.split("/")},Vn.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},Vn.prototype._updateHashUnthrottled=function(){var n=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,n)}catch{}};var Ip={linearity:.3,easing:a.bezier(0,0,.3,1)},pu=a.extend({deceleration:2500,maxSpeed:1400},Ip),cs=a.extend({deceleration:20,maxSpeed:1400},Ip),cc=a.extend({deceleration:1e3,maxSpeed:360},Ip),wd=a.extend({deceleration:1e3,maxSpeed:90},Ip),hs=function(n){this._map=n,this.clear()};function Il(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function ps(n,s,o){var c=o.maxSpeed,m=o.linearity,E=o.deceleration,k=a.clamp(n*m/(s/1e3),-c,c),P=Math.abs(k)/(E*m);return{easing:o.easing,duration:1e3*P,amount:k*(P/2)}}hs.prototype.clear=function(){this._inertiaBuffer=[]},hs.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:n})},hs.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=a.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},hs.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},o=0,c=this._inertiaBuffer;o<c.length;o+=1){var m=c[o].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(s.pan.mag()){var P=ps(s.pan.mag(),E,a.extend({},pu,n||{}));k.offset=s.pan.mult(P.amount/s.pan.mag()),k.center=this._map.transform.center,Il(k,P)}if(s.zoom){var B=ps(s.zoom,E,cs);k.zoom=this._map.transform.zoom+B.amount,Il(k,B)}if(s.bearing){var q=ps(s.bearing,E,cc);k.bearing=this._map.transform.bearing+a.clamp(q.amount,-179,179),Il(k,q)}if(s.pitch){var Y=ps(s.pitch,E,wd);k.pitch=this._map.transform.pitch+Y.amount,Il(k,Y)}if(k.zoom||k.bearing){var Q=s.pinchAround===void 0?s.around:s.pinchAround;k.around=Q?this._map.unproject(Q):this._map.getCenter()}return this.clear(),a.extend(k,{noMoveStart:!0})}};var ji=function(n){function s(c,m,E,k){k===void 0&&(k={});var P=A.mousePos(m.getCanvasContainer(),E),B=m.unproject(P);n.call(this,c,a.extend({point:P,lngLat:B,originalEvent:E},k)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),ko=function(n){function s(c,m,E){var k=c==="touchend"?E.changedTouches:E.touches,P=A.touchPos(m.getCanvasContainer(),k),B=P.map(function(Q){return m.unproject(Q)}),q=P.reduce(function(Q,$,ce,se){return Q.add($.div(se.length))},new a.Point(0,0)),Y=m.unproject(q);n.call(this,c,{points:P,point:q,lngLats:B,lngLat:Y,originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),kf=function(n){function s(c,m,E){n.call(this,c,{originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),qr=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};qr.prototype.reset=function(){delete this._mousedownPos},qr.prototype.wheel=function(n){return this._firePreventable(new kf(n.type,this._map,n))},qr.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new ji(n.type,this._map,n))},qr.prototype.mouseup=function(n){this._map.fire(new ji(n.type,this._map,n))},qr.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new ji(n.type,this._map,n))},qr.prototype.dblclick=function(n){return this._firePreventable(new ji(n.type,this._map,n))},qr.prototype.mouseover=function(n){this._map.fire(new ji(n.type,this._map,n))},qr.prototype.mouseout=function(n){this._map.fire(new ji(n.type,this._map,n))},qr.prototype.touchstart=function(n){return this._firePreventable(new ko(n.type,this._map,n))},qr.prototype.touchmove=function(n){this._map.fire(new ko(n.type,this._map,n))},qr.prototype.touchend=function(n){this._map.fire(new ko(n.type,this._map,n))},qr.prototype.touchcancel=function(n){this._map.fire(new ko(n.type,this._map,n))},qr.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},qr.prototype.isEnabled=function(){return!0},qr.prototype.isActive=function(){return!1},qr.prototype.enable=function(){},qr.prototype.disable=function(){};var ot=function(n){this._map=n};ot.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ot.prototype.mousemove=function(n){this._map.fire(new ji(n.type,this._map,n))},ot.prototype.mousedown=function(){this._delayContextMenu=!0},ot.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ji("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ot.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new ji(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},ot.prototype.isEnabled=function(){return!0},ot.prototype.isActive=function(){return!1},ot.prototype.enable=function(){},ot.prototype.disable=function(){};var qi=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function sh(n,s){for(var o={},c=0;c<n.length;c++)o[n[c].identifier]=s[c];return o}qi.prototype.isEnabled=function(){return!!this._enabled},qi.prototype.isActive=function(){return!!this._active},qi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},qi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},qi.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(A.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},qi.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=o,this._box||(this._box=A.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(c.x,o.x),E=Math.max(c.x,o.x),k=Math.min(c.y,o.y),P=Math.max(c.y,o.y);A.setTransform(this._box,"translate("+m+"px,"+k+"px)"),this._box.style.width=E-m+"px",this._box.style.height=P-k+"px"}}},qi.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var c=this._startPos,m=s;if(this.reset(),A.suppressClick(),c.x!==m.x||c.y!==m.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(E){return E.fitScreenCoordinates(c,m,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},qi.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},qi.prototype.blur=function(){this.reset()},qi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos},qi.prototype._fireEvent=function(n,s){return this._map.fire(new a.Event(n,{originalEvent:s}))};var Io=function(n){this.reset(),this.numTouches=n.numTouches};Io.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Io.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(c){for(var m=new a.Point(0,0),E=0,k=c;E<k.length;E+=1)m._add(k[E]);return m.div(c.length)}(s),this.touches=sh(o,s)))},Io.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var c=sh(o,s);for(var m in this.touches){var E=c[m];(!E||E.dist(this.touches[m])>30)&&(this.aborted=!0)}}},Io.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var fs=function(n){this.singleTap=new Io(n),this.numTaps=n.numTaps,this.reset()};fs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fs.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},fs.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},fs.prototype.touchend=function(n,s,o){var c=this.singleTap.touchend(n,s,o);if(c){var m=n.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(c)<30;if(m&&E||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var ma=function(){this._zoomIn=new fs({numTouches:1,numTaps:2}),this._zoomOut=new fs({numTouches:2,numTaps:1}),this.reset()};ma.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ma.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},ma.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},ma.prototype.touchend=function(n,s,o){var c=this,m=this._zoomIn.touchend(n,s,o),E=this._zoomOut.touchend(n,s,o);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(m)},{originalEvent:n})}}):E?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(E)},{originalEvent:n})}}):void 0},ma.prototype.touchcancel=function(){this.reset()},ma.prototype.enable=function(){this._enabled=!0},ma.prototype.disable=function(){this._enabled=!1,this.reset()},ma.prototype.isEnabled=function(){return this._enabled},ma.prototype.isActive=function(){return this._active};var Tl={0:1,2:2},Je=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};Je.prototype.blur=function(){this.reset()},Je.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Je.prototype._correctButton=function(n,s){return!1},Je.prototype._move=function(n,s){return{}},Je.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=A.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},Je.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(c,m){var E=Tl[m];return c.buttons===void 0||(c.buttons&E)!==E}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},Je.prototype.mouseupWindow=function(n){this._lastPoint&&A.mouseButton(n)===this._eventButton&&(this._moved&&A.suppressClick(),this.reset())},Je.prototype.enable=function(){this._enabled=!0},Je.prototype.disable=function(){this._enabled=!1,this.reset()},Je.prototype.isEnabled=function(){return this._enabled},Je.prototype.isActive=function(){return this._active};var Tp=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,c){n.prototype.mousedown.call(this,o,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,c){return c===0&&!o.ctrlKey},s.prototype._move=function(o,c){return{around:c,panDelta:c.sub(o)}},s}(Je),js=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var m=.8*(c.x-o.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(Je),hc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var m=-.5*(c.y-o.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(Je),Fa=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};Fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Fa.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},Fa.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},Fa.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},Fa.prototype.touchcancel=function(){this.reset()},Fa.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var c=sh(o,s),m=new a.Point(0,0),E=new a.Point(0,0),k=0;for(var P in c){var B=c[P],q=this._touches[P];q&&(m._add(B),E._add(B.sub(q)),k++,c[P]=B)}if(this._touches=c,!(k<this._minTouches)&&E.mag()){var Y=E.div(k);if(this._sum._add(Y),!(this._sum.mag()<this._clickTolerance))return{around:m.div(k),panDelta:Y}}},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active};var va=function(){this.reset()};function ds(n,s,o){for(var c=0;c<n.length;c++)if(n[c].identifier===o)return s[c]}function lh(n,s){return Math.log(n/s)/Math.LN2}va.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},va.prototype._start=function(n){},va.prototype._move=function(n,s,o){return{}},va.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},va.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,m=c[1],E=ds(o,s,c[0]),k=ds(o,s,m);if(E&&k){var P=this._aroundCenter?null:E.add(k).div(2);return this._move([E,k],P,n)}}},va.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var c=this._firstTwoTouches,m=c[1],E=ds(o,s,c[0]),k=ds(o,s,m);E&&k||(this._active&&A.suppressClick(),this.reset())}},va.prototype.touchcancel=function(){this.reset()},va.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},va.prototype.disable=function(){this._enabled=!1,this.reset()},va.prototype.isEnabled=function(){return this._enabled},va.prototype.isActive=function(){return this._active};var Zi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,c){var m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(lh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:lh(this._distance,m),pinchAround:c}},s}(va);function kn(n,s){return 180*n.angleWith(s)/Math.PI}var To=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,c){var m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:kn(this._vector,m),pinchAround:c}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var c=25/(Math.PI*this._minDiameter)*360,m=kn(o,this._startVector);return Math.abs(m)<c},s}(va);function pc(n){return Math.abs(n.y)>Math.abs(n.x)}var Al=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,pc(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,c,m){var E=o[0].sub(this._lastPoints[0]),k=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(E,k,m.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(E.y+k.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,c,m){if(this._valid!==void 0)return this._valid;var E=o.mag()>=2,k=c.mag()>=2;if(E||k){if(!E||!k)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var P=o.y>0==c.y>0;return pc(o)&&pc(c)&&P}},s}(va),Ed={panStep:100,bearingStep:15,pitchStep:10},io=function(){var n=Ed;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function Fn(n){return n*(2-n)}io.prototype.blur=function(){this.reset()},io.prototype.reset=function(){this._active=!1},io.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,c=0,m=0,E=0,k=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),E=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),E=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),k=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(c=0,m=0),{cameraAnimation:function(P){var B=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:Fn,zoom:o?Math.round(B)+o*(n.shiftKey?2:1):B,bearing:P.getBearing()+c*s._bearingStep,pitch:P.getPitch()+m*s._pitchStep,offset:[-E*s._panStep,-k*s._panStep],center:P.getCenter()},{originalEvent:n})}}}},io.prototype.enable=function(){this._enabled=!0},io.prototype.disable=function(){this._enabled=!1,this.reset()},io.prototype.isEnabled=function(){return this._enabled},io.prototype.isActive=function(){return this._active},io.prototype.disableRotation=function(){this._rotationDisabled=!0},io.prototype.enableRotation=function(){this._rotationDisabled=!1};var Wt=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};Wt.prototype.setZoomRate=function(n){this._defaultZoomRate=n},Wt.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},Wt.prototype.isEnabled=function(){return!!this._enabled},Wt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Wt.prototype.isZooming=function(){return!!this._zooming},Wt.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},Wt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Wt.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=a.browser.now(),c=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},Wt.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},Wt.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=A.mousePos(this._el,n);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Wt.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&c!==0&&(c=1/c);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var E,k=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,P=this._startZoom,B=this._easing,q=!1;if(this._type==="wheel"&&P&&B){var Y=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Q=B(Y);E=a.number(P,k,Q),Y<1?this._frameId||(this._frameId=!0):q=!0}else E=k,q=!0;return this._active=!0,q&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!q,zoomDelta:E-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Wt.prototype._smoothOutEasing=function(n){var s=a.ease;if(this._prevEase){var o=this._prevEase,c=(a.browser.now()-o.start)/o.duration,m=o.easing(c+.01)-o.easing(c),E=.27/Math.sqrt(m*m+1e-4)*.01,k=Math.sqrt(.0729-E*E);s=a.bezier(E,k,.25,1)}return this._prevEase={start:a.browser.now(),duration:n,easing:s},s},Wt.prototype.blur=function(){this.reset()},Wt.prototype.reset=function(){this._active=!1};var Ao=function(n,s){this._clickZoom=n,this._tapZoom=s};Ao.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ao.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ao.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ao.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Kn=function(){this.reset()};Kn.prototype.reset=function(){this._active=!1},Kn.prototype.blur=function(){this.reset()},Kn.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},Kn.prototype.enable=function(){this._enabled=!0},Kn.prototype.disable=function(){this._enabled=!1,this.reset()},Kn.prototype.isEnabled=function(){return this._enabled},Kn.prototype.isActive=function(){return this._active};var Yi=function(){this._tap=new fs({numTouches:1,numTaps:1}),this.reset()};Yi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Yi.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},Yi.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var c=s[0],m=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,o)},Yi.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},Yi.prototype.touchcancel=function(){this.reset()},Yi.prototype.enable=function(){this._enabled=!0},Yi.prototype.disable=function(){this._enabled=!1,this.reset()},Yi.prototype.isEnabled=function(){return this._enabled},Yi.prototype.isActive=function(){return this._active};var zl=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};zl.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},zl.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},zl.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},zl.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var qs=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};qs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},qs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},qs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},qs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Hn=function(n,s,o,c){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};Hn.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Hn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Hn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Hn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Hn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Hn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ta=function(n){return n.zoom||n.drag||n.pitch||n.rotate},fc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(a.Event);function yt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var pt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hs(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[a.window,"blur",void 0]];for(var c=0,m=this._listeners;c<m.length;c+=1){var E=m[c],k=E[0];A.addEventListener(k,E[1],k===a.window.document?this.handleWindowEvent:this.handleEvent,E[2])}};pt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],c=o[0];A.removeEventListener(c,o[1],c===a.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},pt.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new qr(s,n));var c=s.boxZoom=new qi(s,n);this._add("boxZoom",c);var m=new ma,E=new Kn;s.doubleClickZoom=new Ao(E,m),this._add("tapZoom",m),this._add("clickZoom",E);var k=new Yi;this._add("tapDragZoom",k);var P=s.touchPitch=new Al;this._add("touchPitch",P);var B=new js(n),q=new hc(n);s.dragRotate=new qs(n,B,q),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]);var Y=new Tp(n),Q=new Fa(n);s.dragPan=new zl(o,Y,Q),this._add("mousePan",Y),this._add("touchPan",Q,["touchZoom","touchRotate"]);var $=new To,ce=new Zi;s.touchZoomRotate=new Hn(o,ce,$,k),this._add("touchRotate",$,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]);var se=s.scrollZoom=new Wt(s,this);this._add("scrollZoom",se,["mousePan"]);var de=s.keyboard=new io;this._add("keyboard",de),this._add("blockableMapEvent",new ot(s));for(var ne=0,me=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ne<me.length;ne+=1){var ge=me[ne];n.interactive&&n[ge]&&s[ge].enable(n[ge])}},pt.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},pt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},pt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},pt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},pt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},pt.prototype.isMoving=function(){return!!ta(this._eventsInProgress)||this.isZooming()},pt.prototype._blockedByActive=function(n,s,o){for(var c in n)if(c!==o&&(!s||s.indexOf(c)<0))return!0;return!1},pt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},pt.prototype._getMapTouches=function(n){for(var s=[],o=0,c=n;o<c.length;o+=1){var m=c[o];this._el.contains(m.target)&&s.push(m)}return s},pt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},m={},E={},k=n.touches?this._getMapTouches(n.touches):void 0,P=k?A.touchPos(this._el,k):A.mousePos(this._el,n),B=0,q=this._handlers;B<q.length;B+=1){var Y=q[B],Q=Y.handlerName,$=Y.handler,ce=Y.allowed;if($.isEnabled()){var se=void 0;this._blockedByActive(E,ce,Q)?$.reset():$[s||n.type]&&(se=$[s||n.type](n,P,k),this.mergeHandlerResult(c,m,se,Q,o),se&&se.needsRenderFrame&&this._triggerRenderFrame()),(se||$.isActive())&&(E[Q]=$)}}var de={};for(var ne in this._previousActiveHandlers)E[ne]||(de[ne]=o);this._previousActiveHandlers=E,(Object.keys(de).length||yt(c))&&(this._changes.push([c,m,de]),this._triggerRenderFrame()),(Object.keys(E).length||yt(c))&&this._map._stop(!0),this._updatingCamera=!1;var me=c.cameraAnimation;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},pt.prototype.mergeHandlerResult=function(n,s,o,c,m){if(o){a.extend(n,o);var E={handlerName:c,originalEvent:o.originalEvent||m};o.zoomDelta!==void 0&&(s.zoom=E),o.panDelta!==void 0&&(s.drag=E),o.pitchDelta!==void 0&&(s.pitch=E),o.bearingDelta!==void 0&&(s.rotate=E)}},pt.prototype._applyChanges=function(){for(var n={},s={},o={},c=0,m=this._changes;c<m.length;c+=1){var E=m[c],k=E[0],P=E[1],B=E[2];k.panDelta&&(n.panDelta=(n.panDelta||new a.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(n.around=k.around),k.pinchAround!==void 0&&(n.pinchAround=k.pinchAround),k.noInertia&&(n.noInertia=k.noInertia),a.extend(s,P),a.extend(o,B)}this._updateMapTransform(n,s,o),this._changes=[]},pt.prototype._updateMapTransform=function(n,s,o){var c=this._map,m=c.transform;if(!yt(n))return this._fireEvents(s,o,!0);var E=n.panDelta,k=n.zoomDelta,P=n.bearingDelta,B=n.pitchDelta,q=n.around,Y=n.pinchAround;Y!==void 0&&(q=Y),c._stop(!0),q=q||c.transform.centerPoint;var Q=m.pointLocation(E?q.sub(E):q);P&&(m.bearing+=P),B&&(m.pitch+=B),k&&(m.zoom+=k),m.setLocationAtPoint(Q,q),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},pt.prototype._fireEvents=function(n,s,o){var c=this,m=ta(this._eventsInProgress),E=ta(n),k={};for(var P in n)this._eventsInProgress[P]||(k[P+"start"]=n[P].originalEvent),this._eventsInProgress[P]=n[P];for(var B in!m&&E&&this._fireEvent("movestart",E.originalEvent),k)this._fireEvent(B,k[B]);for(var q in E&&this._fireEvent("move",E.originalEvent),n)this._fireEvent(q,n[q].originalEvent);var Y,Q={};for(var $ in this._eventsInProgress){var ce=this._eventsInProgress[$],se=ce.handlerName,de=ce.originalEvent;this._handlersById[se].isActive()||(delete this._eventsInProgress[$],Q[$+"end"]=Y=s[se]||de)}for(var ne in Q)this._fireEvent(ne,Q[ne]);var me=ta(this._eventsInProgress);if(o&&(m||E)&&!me){this._updatingCamera=!0;var ge=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ie=function(Be){return Be!==0&&-c._bearingSnap<Be&&Be<c._bearingSnap};ge?(Ie(ge.bearing||this._map.getBearing())&&(ge.bearing=0),this._map.easeTo(ge,{originalEvent:Y})):(this._map.fire(new a.Event("moveend",{originalEvent:Y})),Ie(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},pt.prototype._fireEvent=function(n,s){this._map.fire(new a.Event(n,s?{originalEvent:s}:{}))},pt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new fc("renderFrame",{timeStamp:s})),n._applyChanges()})},pt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Na=function(n){function s(o,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,c){return this.jumpTo({center:o},c)},s.prototype.panBy=function(o,c,m){return o=a.Point.convert(o).mult(-1),this.panTo(this.transform.center,a.extend({offset:o},c),m)},s.prototype.panTo=function(o,c,m){return this.easeTo(a.extend({center:o},c),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,c){return this.jumpTo({zoom:o},c),this},s.prototype.zoomTo=function(o,c,m){return this.easeTo(a.extend({zoom:o},c),m)},s.prototype.zoomIn=function(o,c){return this.zoomTo(this.getZoom()+1,o,c),this},s.prototype.zoomOut=function(o,c){return this.zoomTo(this.getZoom()-1,o,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,c){return this.jumpTo({bearing:o},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,c){return this.jumpTo({padding:o},c),this},s.prototype.rotateTo=function(o,c,m){return this.easeTo(a.extend({bearing:o},c),m)},s.prototype.resetNorth=function(o,c){return this.rotateTo(0,a.extend({duration:1e3},o),c),this},s.prototype.resetNorthPitch=function(o,c){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},o),c),this},s.prototype.snapToNorth=function(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,c){return this.jumpTo({pitch:o},c),this},s.prototype.cameraForBounds=function(o,c){o=a.LngLatBounds.convert(o);var m=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),m,c)},s.prototype._cameraForBoxAndBearing=function(o,c,m,E){var k={top:0,bottom:0,right:0,left:0};if(typeof(E=a.extend({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){var P=E.padding;E.padding={top:P,bottom:P,right:P,left:P}}E.padding=a.extend(k,E.padding);var B=this.transform,q=B.padding,Y=B.project(a.LngLat.convert(o)),Q=B.project(a.LngLat.convert(c)),$=Y.rotate(-m*Math.PI/180),ce=Q.rotate(-m*Math.PI/180),se=new a.Point(Math.max($.x,ce.x),Math.max($.y,ce.y)),de=new a.Point(Math.min($.x,ce.x),Math.min($.y,ce.y)),ne=se.sub(de),me=(B.width-(q.left+q.right+E.padding.left+E.padding.right))/ne.x,ge=(B.height-(q.top+q.bottom+E.padding.top+E.padding.bottom))/ne.y;if(!(ge<0||me<0)){var Ie=Math.min(B.scaleZoom(B.scale*Math.min(me,ge)),E.maxZoom),Be=typeof E.offset.x=="number"?new a.Point(E.offset.x,E.offset.y):a.Point.convert(E.offset),Ce=new a.Point((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(m*Math.PI/180),Oe=Be.add(Ce).mult(B.scale/B.zoomScale(Ie));return{center:B.unproject(Y.add(Q).div(2).sub(Oe)),zoom:Ie,bearing:m}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,c,m){return this._fitInternal(this.cameraForBounds(o,c),c,m)},s.prototype.fitScreenCoordinates=function(o,c,m,E,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(o)),this.transform.pointLocation(a.Point.convert(c)),m,E),E,k)},s.prototype._fitInternal=function(o,c,m){return o?(delete(c=a.extend(o,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this},s.prototype.jumpTo=function(o,c){this.stop();var m=this.transform,E=!1,k=!1,P=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(E=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=a.LngLat.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(k=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(P=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),E&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",c)).fire(new a.Event("zoomend",c)),k&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),P&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))},s.prototype.easeTo=function(o,c){var m=this;this._stop(!1,o.easeId),((o=a.extend({offset:[0,0],duration:500,easing:a.ease},o)).animate===!1||!o.essential&&a.browser.prefersReducedMotion)&&(o.duration=0);var E=this.transform,k=this.getZoom(),P=this.getBearing(),B=this.getPitch(),q=this.getPadding(),Y="zoom"in o?+o.zoom:k,Q="bearing"in o?this._normalizeBearing(o.bearing,P):P,$="pitch"in o?+o.pitch:B,ce="padding"in o?o.padding:E.padding,se=a.Point.convert(o.offset),de=E.centerPoint.add(se),ne=E.pointLocation(de),me=a.LngLat.convert(o.center||ne);this._normalizeCenter(me);var ge,Ie,Be=E.project(ne),Ce=E.project(me).sub(Be),Oe=E.zoomScale(Y-k);o.around&&(ge=a.LngLat.convert(o.around),Ie=E.locationPoint(ge));var Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Y!==k,this._rotating=this._rotating||P!==Q,this._pitching=this._pitching||$!==B,this._padding=!E.isPaddingEqual(ce),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,Ze),this._ease(function(Xe){if(m._zooming&&(E.zoom=a.number(k,Y,Xe)),m._rotating&&(E.bearing=a.number(P,Q,Xe)),m._pitching&&(E.pitch=a.number(B,$,Xe)),m._padding&&(E.interpolatePadding(q,ce,Xe),de=E.centerPoint.add(se)),ge)E.setLocationAtPoint(ge,Ie);else{var We=E.zoomScale(E.zoom-k),ut=Y>k?Math.min(2,Oe):Math.max(.5,Oe),wt=Math.pow(ut,1-Xe),bt=E.unproject(Be.add(Ce.mult(Xe*wt)).mult(We));E.setLocationAtPoint(E.renderWorldCopies?bt.wrap():bt,de)}m._fireMoveEvents(c)},function(Xe){m._afterEase(c,Xe)},o),this},s.prototype._prepareEase=function(o,c,m){m===void 0&&(m={}),this._moving=!0,c||m.moving||this.fire(new a.Event("movestart",o)),this._zooming&&!m.zooming&&this.fire(new a.Event("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new a.Event("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new a.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new a.Event("move",o)),this._zooming&&this.fire(new a.Event("zoom",o)),this._rotating&&this.fire(new a.Event("rotate",o)),this._pitching&&this.fire(new a.Event("pitch",o))},s.prototype._afterEase=function(o,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var m=this._zooming,E=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new a.Event("zoomend",o)),E&&this.fire(new a.Event("rotateend",o)),k&&this.fire(new a.Event("pitchend",o)),this.fire(new a.Event("moveend",o))}},s.prototype.flyTo=function(o,c){var m=this;if(!o.essential&&a.browser.prefersReducedMotion){var E=a.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(E,c)}this.stop(),o=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},o);var k=this.transform,P=this.getZoom(),B=this.getBearing(),q=this.getPitch(),Y=this.getPadding(),Q="zoom"in o?a.clamp(+o.zoom,k.minZoom,k.maxZoom):P,$="bearing"in o?this._normalizeBearing(o.bearing,B):B,ce="pitch"in o?+o.pitch:q,se="padding"in o?o.padding:k.padding,de=k.zoomScale(Q-P),ne=a.Point.convert(o.offset),me=k.centerPoint.add(ne),ge=k.pointLocation(me),Ie=a.LngLat.convert(o.center||ge);this._normalizeCenter(Ie);var Be=k.project(ge),Ce=k.project(Ie).sub(Be),Oe=o.curve,Ze=Math.max(k.width,k.height),Xe=Ze/de,We=Ce.mag();if("minZoom"in o){var ut=a.clamp(Math.min(o.minZoom,P,Q),k.minZoom,k.maxZoom),wt=Ze/k.zoomScale(ut-P);Oe=Math.sqrt(wt/We*2)}var bt=Oe*Oe;function St(It){var xt=(Xe*Xe-Ze*Ze+(It?-1:1)*bt*bt*We*We)/(2*(It?Xe:Ze)*bt*We);return Math.log(Math.sqrt(xt*xt+1)-xt)}function pr(It){return(Math.exp(It)-Math.exp(-It))/2}function lt(It){return(Math.exp(It)+Math.exp(-It))/2}var At=St(0),Rt=function(It){return lt(At)/lt(At+Oe*It)},zt=function(It){return Ze*((lt(At)*(pr(xt=At+Oe*It)/lt(xt))-pr(At))/bt)/We;var xt},Dt=(St(1)-At)/Oe;if(Math.abs(We)<1e-6||!isFinite(Dt)){if(Math.abs(Ze-Xe)<1e-6)return this.easeTo(o,c);var Ht=Xe<Ze?-1:1;Dt=Math.abs(Math.log(Xe/Ze))/Oe,zt=function(){return 0},Rt=function(It){return Math.exp(Ht*Oe*It)}}return o.duration="duration"in o?+o.duration:1e3*Dt/("screenSpeed"in o?+o.screenSpeed/Oe:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=B!==$,this._pitching=ce!==q,this._padding=!k.isPaddingEqual(se),this._prepareEase(c,!1),this._ease(function(It){var xt=It*Dt,Qi=1/Rt(xt);k.zoom=It===1?Q:P+k.scaleZoom(Qi),m._rotating&&(k.bearing=a.number(B,$,It)),m._pitching&&(k.pitch=a.number(q,ce,It)),m._padding&&(k.interpolatePadding(Y,se,It),me=k.centerPoint.add(ne));var si=It===1?Ie:k.unproject(Be.add(Ce.mult(zt(xt))).mult(Qi));k.setLocationAtPoint(k.renderWorldCopies?si.wrap():si,me),m._fireMoveEvents(c)},function(){return m._afterEase(c)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!o){var E=this.handlers;E&&E.stop(!1)}return this},s.prototype._ease=function(o,c,m){m.animate===!1||m.duration===0?(o(1),c()):(this._easeStart=a.browser.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,c){o=a.wrap(o,-180,180);var m=Math.abs(o-c);return Math.abs(o-360-c)<m&&(o-=360),Math.abs(o+360-c)<m&&(o+=360),o},s.prototype._normalizeCenter=function(o){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var m=o.lng-c.center.lng;o.lng+=m>180?-360:m<-180?360:0}},s}(a.Evented),un=function(n){n===void 0&&(n={}),this.options=n,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};un.prototype.getDefaultPosition=function(){return"bottom-right"},un.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=A.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},un.prototype.onRemove=function(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},un.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},un.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},un.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(c,m,E){return m.value&&(c+=m.key+"="+m.value+(E<s.length-1?"&":"")),c},"?");n.href=a.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},un.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},un.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(P){return typeof P!="string"?"":P})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var c in o){var m=o[c];if(m.used){var E=m.getSource();E.attribution&&n.indexOf(E.attribution)<0&&n.push(E.attribution)}}n.sort(function(P,B){return P.length-B.length});var k=(n=n.filter(function(P,B){for(var q=B+1;q<n.length;q++)if(n[q].indexOf(P)>=0)return!1;return!0})).join(" | ");k!==this._attribHTML&&(this._attribHTML=k,n.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},un.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var no=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};no.prototype.onAdd=function(n){this._map=n,this._container=A.create("div","mapboxgl-ctrl");var s=A.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},no.prototype.onRemove=function(){A.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},no.prototype.getDefaultPosition=function(){return"bottom-left"},no.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},no.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},no.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var In=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};In.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},In.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,c=s?this._queue.concat(s):this._queue;o<c.length;o+=1){var m=c[o];if(m.id===n)return void(m.cancelled=!0)}},In.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,c=s;o<c.length;o+=1){var m=c[o];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},In.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ra={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ao=a.window.HTMLImageElement,uh=a.window.HTMLElement,xr=a.window.ImageBitmap,Ji={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},If=function(n){function s(c){var m=this;if((c=a.extend({},Ji,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var E=new Xt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,E,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new In,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},ra,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new a.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=a.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof uh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new pt(this,c),this._hash=c.hash&&new Vn(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,a.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new un({customAttribution:c.customAttribution})),this.addControl(new no,c.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(k){m._update(k.dataType==="style"),m.fire(new a.Event(k.dataType+"data",k))}),this.on("dataloading",function(k){m.fire(new a.Event(k.dataType+"dataloading",k))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,m){if(m===void 0&&(m=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var E=c.onAdd(this);this._controls.push(c);var k=this._controlPositions[m];return m.indexOf("bottom")!==-1?k.insertBefore(E,k.firstChild):k.appendChild(E),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(c);return m>-1&&this._controls.splice(m,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var m=this._containerDimensions(),E=m[0],k=m[1];if(E===this.transform.width&&k===this.transform.height)return this;this._resizeCanvas(E,k),this.transform.resize(E,k),this.painter.resize(E,k);var P=!this._moving;return P&&this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),this.fire(new a.Event("resize",c)),P&&this.fire(new a.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(a.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(a.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(a.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,m,E){var k,P=this;if(c==="mouseenter"||c==="mouseover"){var B=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){var Q=P.getLayer(m)?P.queryRenderedFeatures(Y.point,{layers:[m]}):[];Q.length?B||(B=!0,E.call(P,new ji(c,P,Y.originalEvent,{features:Q}))):B=!1},mouseout:function(){B=!1}}}}if(c==="mouseleave"||c==="mouseout"){var q=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){(P.getLayer(m)?P.queryRenderedFeatures(Y.point,{layers:[m]}):[]).length?q=!0:q&&(q=!1,E.call(P,new ji(c,P,Y.originalEvent)))},mouseout:function(Y){q&&(q=!1,E.call(P,new ji(c,P,Y.originalEvent)))}}}}return{layer:m,listener:E,delegates:(k={},k[c]=function(Y){var Q=P.getLayer(m)?P.queryRenderedFeatures(Y.point,{layers:[m]}):[];Q.length&&(Y.features=Q,E.call(P,Y),delete Y.features)},k)}},s.prototype.on=function(c,m,E){if(E===void 0)return n.prototype.on.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var P in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(k),k.delegates)this.on(P,k.delegates[P]);return this},s.prototype.once=function(c,m,E){if(E===void 0)return n.prototype.once.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var P in k.delegates)this.once(P,k.delegates[P]);return this},s.prototype.off=function(c,m,E){var k=this;return E===void 0?n.prototype.off.call(this,c,m):(this._delegatedListeners&&this._delegatedListeners[c]&&function(P){for(var B=P[c],q=0;q<B.length;q++){var Y=B[q];if(Y.layer===m&&Y.listener===E){for(var Q in Y.delegates)k.off(Q,Y.delegates[Q]);return B.splice(q,1),k}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,m){if(!this.style)return[];var E;if(m!==void 0||c===void 0||c instanceof a.Point||Array.isArray(c)||(m=c,c=void 0),m=m||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof c[0]=="number")E=[a.Point.convert(c)];else{var k=a.Point.convert(c[0]),P=a.Point.convert(c[1]);E=[k,new a.Point(P.x,k.y),P,new a.Point(k.x,P.y),k]}return this.style.queryRenderedFeatures(E,m,this.transform)},s.prototype.querySourceFeatures=function(c,m){return this.style.querySourceFeatures(c,m)},s.prototype.setStyle=function(c,m){return(m=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(c,m))},s.prototype._getUIString=function(c){var m=this._locale[c];if(m==null)throw new Error("Missing UI string '"+c+"'");return m},s.prototype._updateStyle=function(c,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Rn(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Rn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,m){var E=this;if(typeof c=="string"){var k=this._requestManager.normalizeStyleURL(c),P=this._requestManager.transformRequest(k,a.ResourceType.Style);a.getJSON(P,function(B,q){B?E.fire(new a.ErrorEvent(B)):q&&E._updateDiff(q,m)})}else typeof c=="object"&&this._updateDiff(c,m)},s.prototype._updateDiff=function(c,m){try{this.style.setState(c)&&this._update(!0)}catch(E){a.warnOnce("Unable to perform style diff: "+(E.message||E.error||E)+".  Rebuilding the style from scratch."),this._updateStyle(c,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,m){return this._lazyInitEmptyStyle(),this.style.addSource(c,m),this._update(!0)},s.prototype.isSourceLoaded=function(c){var m=this.style&&this.style.sourceCaches[c];if(m!==void 0)return m.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var m in c){var E=c[m]._tiles;for(var k in E){var P=E[k];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,m,E){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,m,E)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,m,E){E===void 0&&(E={});var k=E.pixelRatio;k===void 0&&(k=1);var P=E.sdf;P===void 0&&(P=!1);var B=E.stretchX,q=E.stretchY,Y=E.content;if(this._lazyInitEmptyStyle(),m instanceof ao||xr&&m instanceof xr){var Q=a.browser.getImageData(m);this.style.addImage(c,{data:new a.RGBAImage({width:Q.width,height:Q.height},Q.data),pixelRatio:k,stretchX:B,stretchY:q,content:Y,sdf:P,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $=m;this.style.addImage(c,{data:new a.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:k,stretchX:B,stretchY:q,content:Y,sdf:P,version:0,userImage:$}),$.onAdd&&$.onAdd(this,c)}},s.prototype.updateImage=function(c,m){var E=this.style.getImage(c);if(!E)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var k=m instanceof ao||xr&&m instanceof xr?a.browser.getImageData(m):m,P=k.width,B=k.height,q=k.data;return P===void 0||B===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):P!==E.data.width||B!==E.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(E.data.replace(q,!(m instanceof ao||xr&&m instanceof xr)),void this.style.updateImage(c,E))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,m){a.getImage(this._requestManager.transformRequest(c,a.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,m){return this._lazyInitEmptyStyle(),this.style.addLayer(c,m),this._update(!0)},s.prototype.moveLayer=function(c,m){return this.style.moveLayer(c,m),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,m,E){return this.style.setLayerZoomRange(c,m,E),this._update(!0)},s.prototype.setFilter=function(c,m,E){return E===void 0&&(E={}),this.style.setFilter(c,m,E),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setPaintProperty(c,m,E,k),this._update(!0)},s.prototype.getPaintProperty=function(c,m){return this.style.getPaintProperty(c,m)},s.prototype.setLayoutProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setLayoutProperty(c,m,E,k),this._update(!0)},s.prototype.getLayoutProperty=function(c,m){return this.style.getLayoutProperty(c,m)},s.prototype.setLight=function(c,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(c,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,m){return this.style.setFeatureState(c,m),this._update()},s.prototype.removeFeatureState=function(c,m){return this.style.removeFeatureState(c,m),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,m=0;return this._container&&(c=this._container.clientWidth||400,m=this._container.clientHeight||300),[c,m]},s.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=A.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=A.create("div","mapboxgl-canvas-container",c);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=A.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var E=this._containerDimensions();this._resizeCanvas(E[0],E[1]);var k=this._controlContainer=A.create("div","mapboxgl-control-container",c),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(B){P[B]=A.create("div","mapboxgl-ctrl-"+B,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,m){var E=a.browser.devicePixelRatio||1;this._canvas.width=E*c,this._canvas.height=E*m,this._canvas.style.width=c+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var c=a.extend({},z.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);m?(this.painter=new Qr(m,this.transform),a.webpSupported.testSupport(m)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var m,E=this,k=0,P=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=P.createQueryEXT(),P.beginQueryEXT(P.TIME_ELAPSED_EXT,m),k=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var q=this.transform.zoom,Y=a.browser.now();this.style.zoomHistory.update(q,Y);var Q=new a.EvaluationParameters(q,{now:Y,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$=Q.crossFadingFactor();$===1&&$===this._crossFadingFactor||(B=!0,this._crossFadingFactor=$),this.style.update(Q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ce=a.browser.now()-k;P.endQueryEXT(P.TIME_ELAPSED_EXT,m),setTimeout(function(){var ne=P.getQueryObjectEXT(m,P.QUERY_RESULT_EXT)/1e6;P.deleteQueryEXT(m),E.fire(new a.Event("gpu-timing-frame",{cpuTime:ce,gpuTime:ne}))},50)}if(this.listens("gpu-timing-layer")){var se=this.painter.collectGpuTimers();setTimeout(function(){var ne=E.painter.queryGpuTimers(se);E.fire(new a.Event("gpu-timing-layer",{layerTimes:ne}))},50)}var de=this._sourcesDirty||this._styleDirty||this._placementDirty;return de||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||de||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,m=this._controls;c<m.length;c+=1)m[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),zo(this._canvasContainer),zo(this._controlContainer),zo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(m){c._frame=null,c._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,m){a.setCacheLimits(c,m)},o.version.get=function(){return a.version},Object.defineProperties(s.prototype,o),s}(Na);function zo(n){n.parentNode&&n.parentNode.removeChild(n)}var Ap={showCompass:!0,showZoom:!0,visualizePitch:!1},ms=function(n){var s=this;this.options=a.extend({},Ap,n),this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),A.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),A.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=A.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ms.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},ms.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},ms.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bi(this._map,this._compass,this.options.visualizePitch)),this._container},ms.prototype.onRemove=function(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ms.prototype._createButton=function(n,s){var o=A.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},ms.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var bi=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new js({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new hc({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),A.addEventListener(s,"mousedown",this.mousedown),A.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(s,"touchmove",this.touchmove),A.addEventListener(s,"touchend",this.touchend),A.addEventListener(s,"touchcancel",this.reset)};function Ta(n,s,o){if(n=new a.LngLat(n.lng,n.lat),s){var c=new a.LngLat(n.lng-360,n.lat),m=new a.LngLat(n.lng+360,n.lat),E=o.locationPoint(n).distSqr(s);o.locationPoint(c).distSqr(s)<E?n=c:o.locationPoint(m).distSqr(s)<E&&(n=m)}for(;Math.abs(n.lng-o.center.lng)>180;){var k=o.locationPoint(n);if(k.x>=0&&k.y>=0&&k.x<=o.width&&k.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}bi.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),A.disableDrag()},bi.prototype.move=function(n,s){var o=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&o.setBearing(o.getBearing()+c.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&o.setPitch(o.getPitch()+m.pitchDelta)}},bi.prototype.off=function(){var n=this.element;A.removeEventListener(n,"mousedown",this.mousedown),A.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(n,"touchmove",this.touchmove),A.removeEventListener(n,"touchend",this.touchend),A.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},bi.prototype.offTemp=function(){A.enableDrag(),A.removeEventListener(a.window,"mousemove",this.mousemove),A.removeEventListener(a.window,"mouseup",this.mouseup)},bi.prototype.mousedown=function(n){this.down(a.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),A.mousePos(this.element,n)),A.addEventListener(a.window,"mousemove",this.mousemove),A.addEventListener(a.window,"mouseup",this.mouseup)},bi.prototype.mousemove=function(n){this.move(n,A.mousePos(this.element,n))},bi.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},bi.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},bi.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},bi.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},bi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var cn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function oo(n,s,o){var c=n.classList;for(var m in cn)c.remove("mapboxgl-"+o+"-anchor-"+m);c.add("mapboxgl-"+o+"-anchor-"+s)}var fu,vs=function(n){function s(o,c){if(n.call(this),(o instanceof a.window.HTMLElement||c)&&(o=a.extend({element:o},c)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=a.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div"),this._element.setAttribute("aria-label","Map marker");var m=A.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var E=A.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");var k=A.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");var P=A.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");for(var B=0,q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];B<q.length;B+=1){var Y=q[B],Q=A.createNS("http://www.w3.org/2000/svg","ellipse");Q.setAttributeNS(null,"opacity","0.04"),Q.setAttributeNS(null,"cx","10.5"),Q.setAttributeNS(null,"cy","5.80029008"),Q.setAttributeNS(null,"rx",Y.rx),Q.setAttributeNS(null,"ry",Y.ry),P.appendChild(Q)}var $=A.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);var ce=A.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(ce);var se=A.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"fill","#000000");var de=A.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),se.appendChild(de);var ne=A.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");var me=A.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ge=A.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");var Ie=A.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#FFFFFF"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962"),me.appendChild(ge),me.appendChild(Ie),k.appendChild(P),k.appendChild($),k.appendChild(se),k.appendChild(ne),k.appendChild(me),m.appendChild(k),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=a.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Be){Be.preventDefault()}),this._element.addEventListener("mousedown",function(Be){Be.preventDefault()}),oo(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var c=o.code,m=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var c=o.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ta(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,cn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=a.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(a.Evented),Sd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},du=0,so=!1,Pl=function(n){function s(o){n.call(this),this.options=a.extend({},Sd,o),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var c;return this._map=o,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,fu!==void 0?c(fu):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(m){c(fu=m.state!=="denied")}):c(fu=!!a.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,du=0,so=!1},s.prototype._isOutOfMapMaxBounds=function(o){var c=this._map.getMaxBounds(),m=o.coords;return c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude),m=o.coords.accuracy,E=this._map.getBearing(),k=a.extend({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(m),k,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,c=this._map.unproject([0,o]),m=this._map.unproject([1,o]),E=c.distanceTo(m),k=Math.ceil(2*this._accuracy/E);this._circleElement.style.width=k+"px",this._circleElement.style.height=k+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&so)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var c=this;if(this._container.addEventListener("contextmenu",function(k){return k.preventDefault()}),this._geolocateButton=A.create("button","mapboxgl-ctrl-geolocate",this._container),A.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var E=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new vs(this._dotElement),this._circleElement=A.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(k){k.geolocateSource||c._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new a.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":du--,so=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++du>1?(o={maximumAge:6e5,timeout:0},so=!0):(o=this.options.positionOptions,so=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(a.Evented),Zs={maxWidth:100,unit:"metric"},Ua=function(n){this.options=a.extend({},Zs,n),a.bindAll(["_onMove","setUnit"],this)};function mu(n,s,o){var c=o&&o.maxWidth||100,m=n._container.clientHeight/2,E=n.unproject([0,m]),k=n.unproject([c,m]),P=E.distanceTo(k);if(o&&o.unit==="imperial"){var B=3.2808*P;B>5280?Gs(s,c,B/5280,n._getUIString("ScaleControl.Miles")):Gs(s,c,B,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Gs(s,c,P/1852,n._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Gs(s,c,P/1e3,n._getUIString("ScaleControl.Kilometers")):Gs(s,c,P,n._getUIString("ScaleControl.Meters"))}function Gs(n,s,o,c){var m,E,k,P=(m=o,(E=Math.pow(10,(""+Math.floor(m)).length-1))*(k=(k=m/E)>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(B){var q=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*q)/q}(k)));n.style.width=s*(P/o)+"px",n.innerHTML=P+"&nbsp;"+c}Ua.prototype.getDefaultPosition=function(){return"bottom-left"},Ua.prototype._onMove=function(){mu(this._map,this._container,this.options)},Ua.prototype.onAdd=function(n){return this._map=n,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ua.prototype.onRemove=function(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ua.prototype.setUnit=function(n){this.options.unit=n,mu(this._map,this._container,this.options)};var ja=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof a.window.HTMLElement?this._container=n.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};ja.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ja.prototype.onRemove=function(){A.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ja.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},ja.prototype._setupUI=function(){var n=this._fullscreenButton=A.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);A.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ja.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},ja.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ja.prototype._isFullscreen=function(){return this._fullscreen},ja.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ja.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ks={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},dc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Po=function(n){function s(o){n.call(this),this.options=a.extend(Object.create(Ks),o),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(a.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var c,m=a.window.document.createDocumentFragment(),E=a.window.document.createElement("body");for(E.innerHTML=o;c=E.firstChild;)m.appendChild(c);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=A.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=A.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=A.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Q){return c._container.classList.add(Q)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ta(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var m=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),E=this.options.anchor,k=function Q($){if($){if(typeof $=="number"){var ce=Math.round(Math.sqrt(.5*Math.pow($,2)));return{center:new a.Point(0,0),top:new a.Point(0,$),"top-left":new a.Point(ce,ce),"top-right":new a.Point(-ce,ce),bottom:new a.Point(0,-$),"bottom-left":new a.Point(ce,-ce),"bottom-right":new a.Point(-ce,-ce),left:new a.Point($,0),right:new a.Point(-$,0)}}if($ instanceof a.Point||Array.isArray($)){var se=a.Point.convert($);return{center:se,top:se,"top-left":se,"top-right":se,bottom:se,"bottom-left":se,"bottom-right":se,left:se,right:se}}return{center:a.Point.convert($.center||[0,0]),top:a.Point.convert($.top||[0,0]),"top-left":a.Point.convert($["top-left"]||[0,0]),"top-right":a.Point.convert($["top-right"]||[0,0]),bottom:a.Point.convert($.bottom||[0,0]),"bottom-left":a.Point.convert($["bottom-left"]||[0,0]),"bottom-right":a.Point.convert($["bottom-right"]||[0,0]),left:a.Point.convert($.left||[0,0]),right:a.Point.convert($.right||[0,0])}}return Q(new a.Point(0,0))}(this.options.offset);if(!E){var P,B=this._container.offsetWidth,q=this._container.offsetHeight;P=m.y+k.bottom.y<q?["top"]:m.y>this._map.transform.height-q?["bottom"]:[],m.x<B/2?P.push("left"):m.x>this._map.transform.width-B/2&&P.push("right"),E=P.length===0?"bottom":P.join("-")}var Y=m.add(k[E]).round();A.setTransform(this._container,cn[E]+" translate("+Y.x+"px,"+Y.y+"px)"),oo(this._container,E,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(dc);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(a.Evented),Aa={version:a.version,supported:z,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:If,NavigationControl:ms,GeolocateControl:Pl,AttributionControl:un,ScaleControl:Ua,FullscreenControl:ja,Popup:Po,Marker:vs,Style:Rn,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){Re().acquire(Me)},clearPrewarmedResources:function(){var n=ct;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Me),ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(n){a.config.ACCESS_TOKEN=n},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(n){a.config.API_URL=n},get workerCount(){return qe.workerCount},set workerCount(n){qe.workerCount=n},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){a.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){a.clearTileCache(n)},workerUrl:""};return Aa}),_})})(Uk);var J_=Uk.exports;const hT=Bk(J_);function S3(u){let h;const f=u[15].default,v=Gy(f,u,u[14],null);return{c(){v&&v.c()},l(_){v&&v.l(_)},m(_,x){v&&v.m(_,x),h=!0},p(_,x){v&&v.p&&(!h||x&16384)&&Ky(v,f,_,_[14],h?Xy(f,_[14],x,null):Hy(_[14]),null)},i(_){h||(it(v,_),h=!0)},o(_){ht(v,_),h=!1},d(_){v&&v.d(_)}}}function pT(u){let h,f,v,_=u[0]&&S3(u);return{c(){h=M("div"),_&&_.c(),this.h()},l(x){h=L(x,"DIV",{class:!0,id:!0});var a=R(h);_&&_.l(a),a.forEach(T),this.h()},h(){S(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),S(h,"id",u[1]),Wo(()=>u[16].call(h))},m(x,a){Pe(x,h,a),_&&_.m(h,null),f=Yo(h,u[16].bind(h)),u[17](h),v=!0},p(x,[a]){x[0]?_?(_.p(x,a),a&1&&it(_,1)):(_=S3(x),_.c(),it(_,1),_.m(h,null)):_&&($u(),ht(_,1,1,()=>{_=null}),ec()),(!v||a&2)&&S(h,"id",x[1])},i(x){v||(it(_),v=!0)},o(x){ht(_),v=!1},d(x){x&&T(h),_&&_.d(),f(),u[17](null)}}}function fT(u,h,f){let{$$slots:v={},$$scope:_}=h,{map:x}=h,{id:a="map"}=h,{location:z={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:A="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:O=!0}=h,{minzoom:N=0}=h,{maxzoom:Z=14}=h,{zoom:j=null}=h,{scrollzoom:fe=!0}=h,{geolocate:he=!0}=h,{zoomcontrol:Ae=!0}=h,{options:Ee={}}=h,Ve,je;Mk("map",{getMap:()=>x}),z.bounds?Ee={...Ee,bounds:z.bounds}:z.lon&&z.lat&&(Ee={...Ee,center:[z.lon,z.lat]},z.zoom&&(Ee.zoom=z.zoom)),Lk(()=>{const et=document.createElement("link");return et.rel="stylesheet",et.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",et.onload=()=>{f(0,x=new J_.Map({container:Ve,style:A,minZoom:N,maxZoom:Z,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:O,...Ee})),Ae&&x.addControl(new J_.NavigationControl({showCompass:!1})),fe||x.scrollZoom.disable(),he&&x.addControl(new J_.GeolocateControl),x.on("load",()=>{f(4,j=x.getZoom())}),x.on("zoom",()=>{f(4,j=x.getZoom())})},document.head.appendChild(et),()=>{x.remove(),et.parentNode.removeChild(et)}});function Bt(){let et=document.getElementsByClassName("mapboxgl-canvas");et[0]&&(et[0].style.width="100%",x.resize())}function Mt(){je=this.clientWidth,f(2,je)}function mt(et){pf[et?"unshift":"push"](()=>{Ve=et,f(3,Ve)})}return u.$$set=et=>{"map"in et&&f(0,x=et.map),"id"in et&&f(1,a=et.id),"location"in et&&f(6,z=et.location),"style"in et&&f(7,A=et.style),"interactive"in et&&f(8,O=et.interactive),"minzoom"in et&&f(9,N=et.minzoom),"maxzoom"in et&&f(10,Z=et.maxzoom),"zoom"in et&&f(4,j=et.zoom),"scrollzoom"in et&&f(11,fe=et.scrollzoom),"geolocate"in et&&f(12,he=et.geolocate),"zoomcontrol"in et&&f(13,Ae=et.zoomcontrol),"options"in et&&f(5,Ee=et.options),"$$scope"in et&&f(14,_=et.$$scope)},u.$$.update=()=>{u.$$.dirty&4&&je&&Bt()},[x,a,je,Ve,j,Ee,z,A,O,N,Z,fe,he,Ae,_,v,Mt,mt]}class dT extends Jo{constructor(h){super(),Qo(this,h,fT,pT,$o,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function k3(u){let h;const f=u[11].default,v=Gy(f,u,u[10],null);return{c(){v&&v.c()},l(_){v&&v.l(_)},m(_,x){v&&v.m(_,x),h=!0},p(_,x){v&&v.p&&(!h||x&1024)&&Ky(v,f,_,_[10],h?Xy(f,_[10],x,null):Hy(_[10]),null)},i(_){h||(it(v,_),h=!0)},o(_){ht(v,_),h=!1},d(_){v&&v.d(_)}}}function mT(u){let h,f,v=u[0]&&k3(u);return{c(){v&&v.c(),h=Cn()},l(_){v&&v.l(_),h=Cn()},m(_,x){v&&v.m(_,x),Pe(_,h,x),f=!0},p(_,[x]){_[0]?v?(v.p(_,x),x&1&&it(v,1)):(v=k3(_),v.c(),it(v,1),v.m(h.parentNode,h)):v&&($u(),ht(v,1,1,()=>{v=null}),ec())},i(_){f||(it(v),f=!0)},o(_){ht(v),f=!1},d(_){v&&v.d(_),_&&T(h)}}}function vT(u,h,f){let{$$slots:v={},$$scope:_}=h,{id:x}=h,{type:a}=h,{url:z=null}=h,{props:A={}}=h,{data:O=null}=h,{layer:N=null}=h,{promoteId:Z=null}=h,{minzoom:j=null}=h,{maxzoom:fe=null}=h,he=!1;const{getMap:Ae}=e_("map"),Ee=Ae();Ee.getSource(x)&&Ee.removeSource(x);function Ve(){Ee.isSourceLoaded(x)?(f(0,he=!0),console.log(x+" loaded!")):setTimeout(()=>{console.log("..."),Ve()},500)}function je(){Ee.isStyleLoaded(x)?(Bt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),je()},500)}j&&(A.minzoom=j),fe&&(A.maxzoom=fe),N&&Z?(A.promoteId={},A.promoteId[N]=Z):Z&&(A.promoteId=Z);function Bt(){console.log(x+" map source loading..."),a=="geojson"?O?(Ee.addSource(x,{type:a,data:O,...A}),Ve()):z&&(Ee.addSource(x,{type:a,data:z,...A}),Ve()):a=="vector"&&(Ee.addSource(x,{type:a,tiles:[z],...A}),Ve())}je();function Mt(){Ee.getSource(x).setData(O)}return u.$$set=mt=>{"id"in mt&&f(2,x=mt.id),"type"in mt&&f(3,a=mt.type),"url"in mt&&f(4,z=mt.url),"props"in mt&&f(1,A=mt.props),"data"in mt&&f(5,O=mt.data),"layer"in mt&&f(6,N=mt.layer),"promoteId"in mt&&f(7,Z=mt.promoteId),"minzoom"in mt&&f(8,j=mt.minzoom),"maxzoom"in mt&&f(9,fe=mt.maxzoom),"$$scope"in mt&&f(10,_=mt.$$scope)},u.$$.update=()=>{u.$$.dirty&33&&he&&O&&Mt()},[he,A,x,a,z,O,N,Z,j,fe,_,v]}class yT extends Jo{constructor(h){super(),Qo(this,h,vT,mT,$o,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function gT(u,h,f){const{Popup:v}=hT,_=Dk(),x=new v({closeButton:!1,closeOnClick:!1});let{id:a}=h,{source:z}=h,{sourceLayer:A=null}=h,{type:O}=h,{filter:N=null}=h,{layout:Z={}}=h,{paint:j={}}=h,{data:fe=null}=h,{code:he=null}=h,{name:Ae="name"}=h,{colorCode:Ee=null}=h,{click:Ve=!1}=h,{ignoreClick:je=!1}=h,{clickCenter:Bt=!1}=h,{selected:Mt=null}=h,{hover:mt=!1}=h,{hovered:et=null}=h,{highlight:Ar=!1}=h,{highlightKey:Sr="highlighted"}=h,{highlighted:or=[]}=h,{order:kt=null}=h,{maxzoom:Tt=null}=h,{minzoom:Pr=null}=h,{isChild:Ot=!1}=h;const{getMap:zr}=e_("map"),at=zr();let cr=null,Jr=null,hi=[];at.getLayer(a)&&at.removeLayer(a);let Tr={id:a,type:O,source:z,paint:j,layout:Z};N&&(Tr.filter=N),A&&(Tr["source-layer"]=A),Tt&&(Tr.maxzoom=Tt),Pr&&(Tr.minzoom=Pr),at.addLayer(Tr,kt);function gn(){console.log("updating colors..."),fe.forEach(Fe=>{at.setFeatureState({source:z,sourceLayer:A,id:Fe[he]},{color:Fe[Ee]})})}return Ve&&at.on("click",a,Fe=>{if(Fe.features.length>0&&!je){let sr=Fe.features[0].id;if(Ot&&or.includes(sr)||!Ot&&Mt!=sr){if(f(0,Mt=sr),_("select",{code:Mt}),cr&&at.setFeatureState({source:z,sourceLayer:A,id:cr},{selected:!1}),at.setFeatureState({source:z,sourceLayer:A,id:Mt},{selected:!0}),Bt){let jn=centroid(Fe.features[0].toJSON().geometry);at.flyTo({center:jn.geometry.coordinates})}f(24,cr=Mt)}}}),mt&&(at.on("mousemove",a,Fe=>{if(Fe.features.length>0){let sr=Fe.features[0].id;et&&at.setFeatureState({source:z,sourceLayer:A,id:et},{hovered:!1}),Ot&&or.includes(sr)||!Ot&&Mt!=sr?(f(1,et=f(25,Jr=sr)),at.setFeatureState({source:z,sourceLayer:A,id:et},{hovered:!0}),at.getCanvas().style.cursor="pointer",x.setLngLat(Fe.lngLat).setHTML(`<strong>${Fe.features[0].properties[Ae]?Fe.features[0].properties[Ae]:Fe.features[0].properties[he]}</strong>`).addTo(at)):x.remove()}}),at.on("mouseleave",a,Fe=>{et&&at.setFeatureState({source:z,sourceLayer:A,id:et},{hovered:!1}),f(1,et=f(25,Jr=null)),at.getCanvas().style.cursor="",x.remove()})),u.$$set=Fe=>{"id"in Fe&&f(2,a=Fe.id),"source"in Fe&&f(3,z=Fe.source),"sourceLayer"in Fe&&f(4,A=Fe.sourceLayer),"type"in Fe&&f(5,O=Fe.type),"filter"in Fe&&f(6,N=Fe.filter),"layout"in Fe&&f(7,Z=Fe.layout),"paint"in Fe&&f(8,j=Fe.paint),"data"in Fe&&f(9,fe=Fe.data),"code"in Fe&&f(10,he=Fe.code),"name"in Fe&&f(11,Ae=Fe.name),"colorCode"in Fe&&f(12,Ee=Fe.colorCode),"click"in Fe&&f(13,Ve=Fe.click),"ignoreClick"in Fe&&f(14,je=Fe.ignoreClick),"clickCenter"in Fe&&f(15,Bt=Fe.clickCenter),"selected"in Fe&&f(0,Mt=Fe.selected),"hover"in Fe&&f(16,mt=Fe.hover),"hovered"in Fe&&f(1,et=Fe.hovered),"highlight"in Fe&&f(17,Ar=Fe.highlight),"highlightKey"in Fe&&f(18,Sr=Fe.highlightKey),"highlighted"in Fe&&f(19,or=Fe.highlighted),"order"in Fe&&f(20,kt=Fe.order),"maxzoom"in Fe&&f(21,Tt=Fe.maxzoom),"minzoom"in Fe&&f(22,Pr=Fe.minzoom),"isChild"in Fe&&f(23,Ot=Fe.isChild)},u.$$.update=()=>{u.$$.dirty[0]&4096&&Ee&&gn(),u.$$.dirty[0]&68026392&&Ar&&or!=hi&&(hi[0]&&hi.forEach(Fe=>{let sr={};sr[Sr]=!1,at.setFeatureState({source:z,sourceLayer:A,id:Fe},sr)}),f(26,hi=or),or[0]&&or.forEach(Fe=>{let sr={};sr[Sr]=!0,at.setFeatureState({source:z,sourceLayer:A,id:Fe},sr)})),u.$$.dirty[0]&16777241&&Mt!=cr&&(cr&&at.setFeatureState({source:z,sourceLayer:A,id:cr},{selected:!1}),Mt&&at.setFeatureState({source:z,sourceLayer:A,id:Mt},{selected:!0}),f(24,cr=Mt)),u.$$.dirty[0]&33619994&&mt&&et!=Jr&&(Jr&&at.setFeatureState({source:z,sourceLayer:A,id:Jr},{hovered:!1}),et&&at.setFeatureState({source:z,sourceLayer:A,id:et},{hovered:!0}),f(25,Jr=et))},[Mt,et,a,z,A,O,N,Z,j,fe,he,Ae,Ee,Ve,je,Bt,mt,Ar,Sr,or,kt,Tt,Pr,Ot,cr,Jr,hi]}class E2 extends Jo{constructor(h){super(),Qo(this,h,gT,null,$o,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function _T(u){return u===0?!0:u}function vd(u){return _T(u)?Array.isArray(u)?h=>u.map(f=>typeof f!="function"?h[f]:f(h)):typeof u!="function"?h=>h[u]:u:null}function bT(u){const h={};for(const f of u){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":v,"1":_}=f;Object.defineProperty(h,v,{configurable:!0,enumerable:!0,writable:!0,value:_})}return h}function S2(u,h={}){return bT(Object.entries(u).filter(([f,v])=>v!==void 0&&h[f]===void 0))}function xT(u,h){if(!Array.isArray(u))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof u}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},v=Object.keys(h),_=v.length;let x,a,z,A,O,N,Z,j;const fe=u.length;for(x=0;x<_;x+=1){for(A=v[x],Z=h[A],O=null,N=null,a=0;a<fe;a+=1)if(j=Z(u[a]),Array.isArray(j)){const he=j.length;for(z=0;z<he;z+=1)j[z]!==void 0&&j[z]!==null&&Number.isNaN(j[z])===!1&&((O===null||j[z]<O)&&(O=j[z]),(N===null||j[z]>N)&&(N=j[z]))}else j!=null&&Number.isNaN(j)===!1&&((O===null||j<O)&&(O=j),(N===null||j>N)&&(N=j));f[A]=[O,N]}return f}function jk(u=[],h){return Array.isArray(h)===!0?h.map((f,v)=>f===null?u[v]:f):u}function F_(u){return function([f,v]){return f?jk(f[u],v):v}}function Q_(u,h){return u==null||h==null?NaN:u<h?-1:u>h?1:u>=h?0:NaN}function wT(u,h){return u==null||h==null?NaN:h<u?-1:h>u?1:h>=u?0:NaN}function qk(u){let h,f,v;u.length!==2?(h=Q_,f=(z,A)=>Q_(u(z),A),v=(z,A)=>u(z)-A):(h=u===Q_||u===wT?u:ET,f=u,v=u);function _(z,A,O=0,N=z.length){if(O<N){if(h(A,A)!==0)return N;do{const Z=O+N>>>1;f(z[Z],A)<0?O=Z+1:N=Z}while(O<N)}return O}function x(z,A,O=0,N=z.length){if(O<N){if(h(A,A)!==0)return N;do{const Z=O+N>>>1;f(z[Z],A)<=0?O=Z+1:N=Z}while(O<N)}return O}function a(z,A,O=0,N=z.length){const Z=_(z,A,O,N-1);return Z>O&&v(z[Z-1],A)>-v(z[Z],A)?Z-1:Z}return{left:_,center:a,right:x}}function ET(){return 0}function ST(u){return u===null?NaN:+u}const kT=qk(Q_),IT=kT.right;qk(ST).center;const TT=IT;class I3 extends Map{constructor(h,f=PT){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[v,_]of h)this.set(v,_)}get(h){return super.get(T3(this,h))}has(h){return super.has(T3(this,h))}set(h,f){return super.set(AT(this,h),f)}delete(h){return super.delete(zT(this,h))}}function T3({_intern:u,_key:h},f){const v=h(f);return u.has(v)?u.get(v):f}function AT({_intern:u,_key:h},f){const v=h(f);return u.has(v)?u.get(v):(u.set(v,f),f)}function zT({_intern:u,_key:h},f){const v=h(f);return u.has(v)&&(f=u.get(v),u.delete(v)),f}function PT(u){return u!==null&&typeof u=="object"?u.valueOf():u}const CT=Math.sqrt(50),DT=Math.sqrt(10),MT=Math.sqrt(2);function n0(u,h,f){const v=(h-u)/Math.max(0,f),_=Math.floor(Math.log10(v)),x=v/Math.pow(10,_),a=x>=CT?10:x>=DT?5:x>=MT?2:1;let z,A,O;return _<0?(O=Math.pow(10,-_)/a,z=Math.round(u*O),A=Math.round(h*O),z/O<u&&++z,A/O>h&&--A,O=-O):(O=Math.pow(10,_)*a,z=Math.round(u/O),A=Math.round(h/O),z*O<u&&++z,A*O>h&&--A),A<z&&.5<=f&&f<2?n0(u,h,f*2):[z,A,O]}function LT(u,h,f){if(h=+h,u=+u,f=+f,!(f>0))return[];if(u===h)return[u];const v=h<u,[_,x,a]=v?n0(h,u,f):n0(u,h,f);if(!(x>=_))return[];const z=x-_+1,A=new Array(z);if(v)if(a<0)for(let O=0;O<z;++O)A[O]=(x-O)/-a;else for(let O=0;O<z;++O)A[O]=(x-O)*a;else if(a<0)for(let O=0;O<z;++O)A[O]=(_+O)/-a;else for(let O=0;O<z;++O)A[O]=(_+O)*a;return A}function A2(u,h,f){return h=+h,u=+u,f=+f,n0(u,h,f)[2]}function RT(u,h,f){h=+h,u=+u,f=+f;const v=h<u,_=v?A2(h,u,f):A2(u,h,f);return(v?-1:1)*(_<0?1/-_:_)}function BT(u,h,f){u=+u,h=+h,f=(_=arguments.length)<2?(h=u,u=0,1):_<3?1:+f;for(var v=-1,_=Math.max(0,Math.ceil((h-u)/f))|0,x=new Array(_);++v<_;)x[v]=u+v*f;return x}function d0(u,h){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(h).domain(u);break}return this}const A3=Symbol("implicit");function Zk(){var u=new I3,h=[],f=[],v=A3;function _(x){let a=u.get(x);if(a===void 0){if(v!==A3)return v;u.set(x,a=h.push(x)-1)}return f[a%f.length]}return _.domain=function(x){if(!arguments.length)return h.slice();h=[],u=new I3;for(const a of x)u.has(a)||u.set(a,h.push(a)-1);return _},_.range=function(x){return arguments.length?(f=Array.from(x),_):f.slice()},_.unknown=function(x){return arguments.length?(v=x,_):v},_.copy=function(){return Zk(h,f).unknown(v)},d0.apply(_,arguments),_}function Gk(){var u=Zk().unknown(void 0),h=u.domain,f=u.range,v=0,_=1,x,a,z=!1,A=0,O=0,N=.5;delete u.unknown;function Z(){var j=h().length,fe=_<v,he=fe?_:v,Ae=fe?v:_;x=(Ae-he)/Math.max(1,j-A+O*2),z&&(x=Math.floor(x)),he+=(Ae-he-x*(j-A))*N,a=x*(1-A),z&&(he=Math.round(he),a=Math.round(a));var Ee=BT(j).map(function(Ve){return he+x*Ve});return f(fe?Ee.reverse():Ee)}return u.domain=function(j){return arguments.length?(h(j),Z()):h()},u.range=function(j){return arguments.length?([v,_]=j,v=+v,_=+_,Z()):[v,_]},u.rangeRound=function(j){return[v,_]=j,v=+v,_=+_,z=!0,Z()},u.bandwidth=function(){return a},u.step=function(){return x},u.round=function(j){return arguments.length?(z=!!j,Z()):z},u.padding=function(j){return arguments.length?(A=Math.min(1,O=+j),Z()):A},u.paddingInner=function(j){return arguments.length?(A=Math.min(1,j),Z()):A},u.paddingOuter=function(j){return arguments.length?(O=+j,Z()):O},u.align=function(j){return arguments.length?(N=Math.max(0,Math.min(1,j)),Z()):N},u.copy=function(){return Gk(h(),[v,_]).round(z).paddingInner(A).paddingOuter(O).align(N)},d0.apply(Z(),arguments)}function F2(u,h,f){u.prototype=h.prototype=f,f.constructor=u}function Kk(u,h){var f=Object.create(u.prototype);for(var v in h)f[v]=h[v];return f}function l_(){}var Jg=.7,a0=1/Jg,Zy="\\s*([+-]?\\d+)\\s*",Qg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OT=/^#([0-9a-f]{3,8})$/,VT=new RegExp(`^rgb\\(${Zy},${Zy},${Zy}\\)$`),FT=new RegExp(`^rgb\\(${vp},${vp},${vp}\\)$`),NT=new RegExp(`^rgba\\(${Zy},${Zy},${Zy},${Qg}\\)$`),UT=new RegExp(`^rgba\\(${vp},${vp},${vp},${Qg}\\)$`),jT=new RegExp(`^hsl\\(${Qg},${vp},${vp}\\)$`),qT=new RegExp(`^hsla\\(${Qg},${vp},${vp},${Qg}\\)$`),z3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};F2(l_,$g,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:P3,formatHex:P3,formatHex8:ZT,formatHsl:GT,formatRgb:C3,toString:C3});function P3(){return this.rgb().formatHex()}function ZT(){return this.rgb().formatHex8()}function GT(){return Hk(this).formatHsl()}function C3(){return this.rgb().formatRgb()}function $g(u){var h,f;return u=(u+"").trim().toLowerCase(),(h=OT.exec(u))?(f=h[1].length,h=parseInt(h[1],16),f===6?D3(h):f===3?new pl(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?N_(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?N_(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=VT.exec(u))?new pl(h[1],h[2],h[3],1):(h=FT.exec(u))?new pl(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=NT.exec(u))?N_(h[1],h[2],h[3],h[4]):(h=UT.exec(u))?N_(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=jT.exec(u))?R3(h[1],h[2]/100,h[3]/100,1):(h=qT.exec(u))?R3(h[1],h[2]/100,h[3]/100,h[4]):z3.hasOwnProperty(u)?D3(z3[u]):u==="transparent"?new pl(NaN,NaN,NaN,0):null}function D3(u){return new pl(u>>16&255,u>>8&255,u&255,1)}function N_(u,h,f,v){return v<=0&&(u=h=f=NaN),new pl(u,h,f,v)}function KT(u){return u instanceof l_||(u=$g(u)),u?(u=u.rgb(),new pl(u.r,u.g,u.b,u.opacity)):new pl}function z2(u,h,f,v){return arguments.length===1?KT(u):new pl(u,h,f,v??1)}function pl(u,h,f,v){this.r=+u,this.g=+h,this.b=+f,this.opacity=+v}F2(pl,z2,Kk(l_,{brighter(u){return u=u==null?a0:Math.pow(a0,u),new pl(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=u==null?Jg:Math.pow(Jg,u),new pl(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new pl(fv(this.r),fv(this.g),fv(this.b),o0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M3,formatHex:M3,formatHex8:HT,formatRgb:L3,toString:L3}));function M3(){return`#${pv(this.r)}${pv(this.g)}${pv(this.b)}`}function HT(){return`#${pv(this.r)}${pv(this.g)}${pv(this.b)}${pv((isNaN(this.opacity)?1:this.opacity)*255)}`}function L3(){const u=o0(this.opacity);return`${u===1?"rgb(":"rgba("}${fv(this.r)}, ${fv(this.g)}, ${fv(this.b)}${u===1?")":`, ${u})`}`}function o0(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function fv(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function pv(u){return u=fv(u),(u<16?"0":"")+u.toString(16)}function R3(u,h,f,v){return v<=0?u=h=f=NaN:f<=0||f>=1?u=h=NaN:h<=0&&(u=NaN),new Qc(u,h,f,v)}function Hk(u){if(u instanceof Qc)return new Qc(u.h,u.s,u.l,u.opacity);if(u instanceof l_||(u=$g(u)),!u)return new Qc;if(u instanceof Qc)return u;u=u.rgb();var h=u.r/255,f=u.g/255,v=u.b/255,_=Math.min(h,f,v),x=Math.max(h,f,v),a=NaN,z=x-_,A=(x+_)/2;return z?(h===x?a=(f-v)/z+(f<v)*6:f===x?a=(v-h)/z+2:a=(h-f)/z+4,z/=A<.5?x+_:2-x-_,a*=60):z=A>0&&A<1?0:a,new Qc(a,z,A,u.opacity)}function XT(u,h,f,v){return arguments.length===1?Hk(u):new Qc(u,h,f,v??1)}function Qc(u,h,f,v){this.h=+u,this.s=+h,this.l=+f,this.opacity=+v}F2(Qc,XT,Kk(l_,{brighter(u){return u=u==null?a0:Math.pow(a0,u),new Qc(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=u==null?Jg:Math.pow(Jg,u),new Qc(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+(this.h<0)*360,h=isNaN(u)||isNaN(this.s)?0:this.s,f=this.l,v=f+(f<.5?f:1-f)*h,_=2*f-v;return new pl(k2(u>=240?u-240:u+120,_,v),k2(u,_,v),k2(u<120?u+240:u-120,_,v),this.opacity)},clamp(){return new Qc(B3(this.h),U_(this.s),U_(this.l),o0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=o0(this.opacity);return`${u===1?"hsl(":"hsla("}${B3(this.h)}, ${U_(this.s)*100}%, ${U_(this.l)*100}%${u===1?")":`, ${u})`}`}}));function B3(u){return u=(u||0)%360,u<0?u+360:u}function U_(u){return Math.max(0,Math.min(1,u||0))}function k2(u,h,f){return(u<60?h+(f-h)*u/60:u<180?f:u<240?h+(f-h)*(240-u)/60:h)*255}const N2=u=>()=>u;function WT(u,h){return function(f){return u+f*h}}function YT(u,h,f){return u=Math.pow(u,f),h=Math.pow(h,f)-u,f=1/f,function(v){return Math.pow(u+v*h,f)}}function JT(u){return(u=+u)==1?Xk:function(h,f){return f-h?YT(h,f,u):N2(isNaN(h)?f:h)}}function Xk(u,h){var f=h-u;return f?WT(u,f):N2(isNaN(u)?h:u)}const O3=function u(h){var f=JT(h);function v(_,x){var a=f((_=z2(_)).r,(x=z2(x)).r),z=f(_.g,x.g),A=f(_.b,x.b),O=Xk(_.opacity,x.opacity);return function(N){return _.r=a(N),_.g=z(N),_.b=A(N),_.opacity=O(N),_+""}}return v.gamma=u,v}(1);function QT(u,h){h||(h=[]);var f=u?Math.min(h.length,u.length):0,v=h.slice(),_;return function(x){for(_=0;_<f;++_)v[_]=u[_]*(1-x)+h[_]*x;return v}}function $T(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function e4(u,h){var f=h?h.length:0,v=u?Math.min(f,u.length):0,_=new Array(v),x=new Array(f),a;for(a=0;a<v;++a)_[a]=U2(u[a],h[a]);for(;a<f;++a)x[a]=h[a];return function(z){for(a=0;a<v;++a)x[a]=_[a](z);return x}}function t4(u,h){var f=new Date;return u=+u,h=+h,function(v){return f.setTime(u*(1-v)+h*v),f}}function s0(u,h){return u=+u,h=+h,function(f){return u*(1-f)+h*f}}function r4(u,h){var f={},v={},_;(u===null||typeof u!="object")&&(u={}),(h===null||typeof h!="object")&&(h={});for(_ in h)_ in u?f[_]=U2(u[_],h[_]):v[_]=h[_];return function(x){for(_ in f)v[_]=f[_](x);return v}}var P2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I2=new RegExp(P2.source,"g");function i4(u){return function(){return u}}function n4(u){return function(h){return u(h)+""}}function a4(u,h){var f=P2.lastIndex=I2.lastIndex=0,v,_,x,a=-1,z=[],A=[];for(u=u+"",h=h+"";(v=P2.exec(u))&&(_=I2.exec(h));)(x=_.index)>f&&(x=h.slice(f,x),z[a]?z[a]+=x:z[++a]=x),(v=v[0])===(_=_[0])?z[a]?z[a]+=_:z[++a]=_:(z[++a]=null,A.push({i:a,x:s0(v,_)})),f=I2.lastIndex;return f<h.length&&(x=h.slice(f),z[a]?z[a]+=x:z[++a]=x),z.length<2?A[0]?n4(A[0].x):i4(h):(h=A.length,function(O){for(var N=0,Z;N<h;++N)z[(Z=A[N]).i]=Z.x(O);return z.join("")})}function U2(u,h){var f=typeof h,v;return h==null||f==="boolean"?N2(h):(f==="number"?s0:f==="string"?(v=$g(h))?(h=v,O3):a4:h instanceof $g?O3:h instanceof Date?t4:$T(h)?QT:Array.isArray(h)?e4:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?r4:s0)(u,h)}function o4(u,h){return u=+u,h=+h,function(f){return Math.round(u*(1-f)+h*f)}}function s4(u){return function(){return u}}function l4(u){return+u}var V3=[0,1];function mp(u){return u}function C2(u,h){return(h-=u=+u)?function(f){return(f-u)/h}:s4(isNaN(h)?NaN:.5)}function u4(u,h){var f;return u>h&&(f=u,u=h,h=f),function(v){return Math.max(u,Math.min(h,v))}}function c4(u,h,f){var v=u[0],_=u[1],x=h[0],a=h[1];return _<v?(v=C2(_,v),x=f(a,x)):(v=C2(v,_),x=f(x,a)),function(z){return x(v(z))}}function h4(u,h,f){var v=Math.min(u.length,h.length)-1,_=new Array(v),x=new Array(v),a=-1;for(u[v]<u[0]&&(u=u.slice().reverse(),h=h.slice().reverse());++a<v;)_[a]=C2(u[a],u[a+1]),x[a]=f(h[a],h[a+1]);return function(z){var A=TT(u,z,1,v)-1;return x[A](_[A](z))}}function Wk(u,h){return h.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function Yk(){var u=V3,h=V3,f=U2,v,_,x,a=mp,z,A,O;function N(){var j=Math.min(u.length,h.length);return a!==mp&&(a=u4(u[0],u[j-1])),z=j>2?h4:c4,A=O=null,Z}function Z(j){return j==null||isNaN(j=+j)?x:(A||(A=z(u.map(v),h,f)))(v(a(j)))}return Z.invert=function(j){return a(_((O||(O=z(h,u.map(v),s0)))(j)))},Z.domain=function(j){return arguments.length?(u=Array.from(j,l4),N()):u.slice()},Z.range=function(j){return arguments.length?(h=Array.from(j),N()):h.slice()},Z.rangeRound=function(j){return h=Array.from(j),f=o4,N()},Z.clamp=function(j){return arguments.length?(a=j?!0:mp,N()):a!==mp},Z.interpolate=function(j){return arguments.length?(f=j,N()):f},Z.unknown=function(j){return arguments.length?(x=j,Z):x},function(j,fe){return v=j,_=fe,N()}}function p4(){return Yk()(mp,mp)}function f4(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)}function l0(u,h){if((f=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var f,v=u.slice(0,f);return[v.length>1?v[0]+v.slice(2):v,+u.slice(f+1)]}function Wy(u){return u=l0(Math.abs(u)),u?u[1]:NaN}function d4(u,h){return function(f,v){for(var _=f.length,x=[],a=0,z=u[0],A=0;_>0&&z>0&&(A+z+1>v&&(z=Math.max(1,v-A)),x.push(f.substring(_-=z,_+z)),!((A+=z+1)>v));)z=u[a=(a+1)%u.length];return x.reverse().join(h)}}function m4(u){return function(h){return h.replace(/[0-9]/g,function(f){return u[+f]})}}var v4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u0(u){if(!(h=v4.exec(u)))throw new Error("invalid format: "+u);var h;return new j2({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}u0.prototype=j2.prototype;function j2(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}j2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y4(u){e:for(var h=u.length,f=1,v=-1,_;f<h;++f)switch(u[f]){case".":v=_=f;break;case"0":v===0&&(v=f),_=f;break;default:if(!+u[f])break e;v>0&&(v=0);break}return v>0?u.slice(0,v)+u.slice(_+1):u}var Jk;function g4(u,h){var f=l0(u,h);if(!f)return u+"";var v=f[0],_=f[1],x=_-(Jk=Math.max(-8,Math.min(8,Math.floor(_/3)))*3)+1,a=v.length;return x===a?v:x>a?v+new Array(x-a+1).join("0"):x>0?v.slice(0,x)+"."+v.slice(x):"0."+new Array(1-x).join("0")+l0(u,Math.max(0,h+x-1))[0]}function F3(u,h){var f=l0(u,h);if(!f)return u+"";var v=f[0],_=f[1];return _<0?"0."+new Array(-_).join("0")+v:v.length>_+1?v.slice(0,_+1)+"."+v.slice(_+1):v+new Array(_-v.length+2).join("0")}const N3={"%":(u,h)=>(u*100).toFixed(h),b:u=>Math.round(u).toString(2),c:u=>u+"",d:f4,e:(u,h)=>u.toExponential(h),f:(u,h)=>u.toFixed(h),g:(u,h)=>u.toPrecision(h),o:u=>Math.round(u).toString(8),p:(u,h)=>F3(u*100,h),r:F3,s:g4,X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function U3(u){return u}var j3=Array.prototype.map,q3=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function _4(u){var h=u.grouping===void 0||u.thousands===void 0?U3:d4(j3.call(u.grouping,Number),u.thousands+""),f=u.currency===void 0?"":u.currency[0]+"",v=u.currency===void 0?"":u.currency[1]+"",_=u.decimal===void 0?".":u.decimal+"",x=u.numerals===void 0?U3:m4(j3.call(u.numerals,String)),a=u.percent===void 0?"%":u.percent+"",z=u.minus===void 0?"−":u.minus+"",A=u.nan===void 0?"NaN":u.nan+"";function O(Z){Z=u0(Z);var j=Z.fill,fe=Z.align,he=Z.sign,Ae=Z.symbol,Ee=Z.zero,Ve=Z.width,je=Z.comma,Bt=Z.precision,Mt=Z.trim,mt=Z.type;mt==="n"?(je=!0,mt="g"):N3[mt]||(Bt===void 0&&(Bt=12),Mt=!0,mt="g"),(Ee||j==="0"&&fe==="=")&&(Ee=!0,j="0",fe="=");var et=Ae==="$"?f:Ae==="#"&&/[boxX]/.test(mt)?"0"+mt.toLowerCase():"",Ar=Ae==="$"?v:/[%p]/.test(mt)?a:"",Sr=N3[mt],or=/[defgprs%]/.test(mt);Bt=Bt===void 0?6:/[gprs]/.test(mt)?Math.max(1,Math.min(21,Bt)):Math.max(0,Math.min(20,Bt));function kt(Tt){var Pr=et,Ot=Ar,zr,at,cr;if(mt==="c")Ot=Sr(Tt)+Ot,Tt="";else{Tt=+Tt;var Jr=Tt<0||1/Tt<0;if(Tt=isNaN(Tt)?A:Sr(Math.abs(Tt),Bt),Mt&&(Tt=y4(Tt)),Jr&&+Tt==0&&he!=="+"&&(Jr=!1),Pr=(Jr?he==="("?he:z:he==="-"||he==="("?"":he)+Pr,Ot=(mt==="s"?q3[8+Jk/3]:"")+Ot+(Jr&&he==="("?")":""),or){for(zr=-1,at=Tt.length;++zr<at;)if(cr=Tt.charCodeAt(zr),48>cr||cr>57){Ot=(cr===46?_+Tt.slice(zr+1):Tt.slice(zr))+Ot,Tt=Tt.slice(0,zr);break}}}je&&!Ee&&(Tt=h(Tt,1/0));var hi=Pr.length+Tt.length+Ot.length,Tr=hi<Ve?new Array(Ve-hi+1).join(j):"";switch(je&&Ee&&(Tt=h(Tr+Tt,Tr.length?Ve-Ot.length:1/0),Tr=""),fe){case"<":Tt=Pr+Tt+Ot+Tr;break;case"=":Tt=Pr+Tr+Tt+Ot;break;case"^":Tt=Tr.slice(0,hi=Tr.length>>1)+Pr+Tt+Ot+Tr.slice(hi);break;default:Tt=Tr+Pr+Tt+Ot;break}return x(Tt)}return kt.toString=function(){return Z+""},kt}function N(Z,j){var fe=O((Z=u0(Z),Z.type="f",Z)),he=Math.max(-8,Math.min(8,Math.floor(Wy(j)/3)))*3,Ae=Math.pow(10,-he),Ee=q3[8+he/3];return function(Ve){return fe(Ae*Ve)+Ee}}return{format:O,formatPrefix:N}}var j_,Qk,$k;b4({thousands:",",grouping:[3],currency:["$",""]});function b4(u){return j_=_4(u),Qk=j_.format,$k=j_.formatPrefix,j_}function x4(u){return Math.max(0,-Wy(Math.abs(u)))}function w4(u,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wy(h)/3)))*3-Wy(Math.abs(u)))}function E4(u,h){return u=Math.abs(u),h=Math.abs(h)-u,Math.max(0,Wy(h)-Wy(u))+1}function S4(u,h,f,v){var _=RT(u,h,f),x;switch(v=u0(v??",f"),v.type){case"s":{var a=Math.max(Math.abs(u),Math.abs(h));return v.precision==null&&!isNaN(x=w4(_,a))&&(v.precision=x),$k(v,a)}case"":case"e":case"g":case"p":case"r":{v.precision==null&&!isNaN(x=E4(_,Math.max(Math.abs(u),Math.abs(h))))&&(v.precision=x-(v.type==="e"));break}case"f":case"%":{v.precision==null&&!isNaN(x=x4(_))&&(v.precision=x-(v.type==="%")*2);break}}return Qk(v)}function eI(u){var h=u.domain;return u.ticks=function(f){var v=h();return LT(v[0],v[v.length-1],f??10)},u.tickFormat=function(f,v){var _=h();return S4(_[0],_[_.length-1],f??10,v)},u.nice=function(f){f==null&&(f=10);var v=h(),_=0,x=v.length-1,a=v[_],z=v[x],A,O,N=10;for(z<a&&(O=a,a=z,z=O,O=_,_=x,x=O);N-- >0;){if(O=A2(a,z,f),O===A)return v[_]=a,v[x]=z,h(v);if(O>0)a=Math.floor(a/O)*O,z=Math.ceil(z/O)*O;else if(O<0)a=Math.ceil(a*O)/O,z=Math.floor(z*O)/O;else break;A=O}return u},u}function $_(){var u=p4();return u.copy=function(){return Wk(u,$_())},d0.apply(u,arguments),eI(u)}function Z3(u){return function(h){return h<0?-Math.pow(-h,u):Math.pow(h,u)}}function k4(u){return u<0?-Math.sqrt(-u):Math.sqrt(u)}function I4(u){return u<0?-u*u:u*u}function T4(u){var h=u(mp,mp),f=1;function v(){return f===1?u(mp,mp):f===.5?u(k4,I4):u(Z3(f),Z3(1/f))}return h.exponent=function(_){return arguments.length?(f=+_,v()):f},eI(h)}function tI(){var u=T4(Yk());return u.copy=function(){return Wk(u,tI()).exponent(u.exponent())},d0.apply(u,arguments),u}function A4(){return tI.apply(null,arguments).exponent(.5)}const Yg={x:$_,y:$_,z:$_,r:A4};function z4(u){return u.constant?"symlog":u.base?"log":u.exponent?u.exponent()===.5?"sqrt":"pow":"other"}function G3(u){return u}function P4(u){return h=>Math.log(u*h)}function C4(u){return h=>u*Math.exp(h)}function D4(u){return h=>Math.sign(h)*Math.log1p(Math.abs(h/u))}function M4(u){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*u}function q_(u){return function(f){return f<0?-Math.pow(-f,u):Math.pow(f,u)}}function L4(u){const h=z4(u);if(h==="log"){const f=Math.sign(u.domain()[0]);return{lift:P4(f),ground:C4(f),scaleType:h}}return h==="pow"?{lift:q_(1),ground:q_(1/1),scaleType:h}:h==="sqrt"?{lift:q_(.5),ground:q_(1/.5),scaleType:h}:h==="symlog"?{lift:D4(1),ground:M4(1),scaleType:h}:{lift:G3,ground:G3,scaleType:h}}function R4(u,h){if(typeof u.range!="function")throw new Error("Scale method `range` must be a function");if(typeof u.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return u.domain();u.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",u.domain()),u.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",u.range());const{lift:f,ground:v}=L4(u),_=u.domain()[0],x=Object.prototype.toString.call(_)==="[object Date]",[a,z]=u.domain().map(fe=>f(x?fe.getTime():fe)),[A,O]=u.range(),N=h[0]||0,Z=h[1]||0,j=(z-a)/(Math.abs(O-A)-N-Z);return[a-N*j,Z*j+z].map(fe=>v(x?new Date(fe):fe))}function B4(u,h,f,v,_){let x,a;return _===!0?(x=0,a=100):(x=u==="r"?1:0,a=u==="y"?f:u==="r"?25:h),v===!0?[a,x]:[x,a]}function O4(u,h,f,v,_,x){return _?typeof _=="function"?_({width:h,height:f}):_:B4(u,h,f,v,x)}function Z_(u){return function([f,v,_,x,a,z,A,O,N,Z]){if(v===null)return null;const j=O4(u,A,O,z,N,Z),fe=f===Yg[u]?f():f.copy();return fe.domain(jk(v[u],_)).range(j),x&&fe.domain(R4(fe,x)),a===!0&&(typeof fe.nice=="function"?fe.nice():console.error(`[Layer Cake] You set \`${u}Nice: true\` but the ${u}Scale does not have a \`.nice\` method. Ignoring...`)),fe}}function G_([u,h]){return f=>{const v=u(f);return Array.isArray(v)?v.map(_=>h(_)):h(v)}}function K_([u]){if(typeof u=="function"){if(typeof u.range=="function")return u.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const H_={x:!1,y:!0,z:!1,r:!1};const V4=u=>({element:u[0]&4,width:u[0]&256,height:u[0]&512,aspectRatio:u[0]&1024,containerWidth:u[0]&128,containerHeight:u[0]&64}),K3=u=>({element:u[2],width:u[8],height:u[9],aspectRatio:u[10],containerWidth:u[7],containerHeight:u[6]});function H3(u){let h,f,v;const _=u[90].default,x=Gy(_,u,u[89],K3);return{c(){h=M("div"),x&&x.c(),this.h()},l(a){h=L(a,"DIV",{class:!0});var z=R(h);x&&x.l(z),z.forEach(T),this.h()},h(){S(h,"class","layercake-container svelte-vhzpsp"),Wo(()=>u[92].call(h)),ie(h,"position",u[5]),ie(h,"top",u[5]==="absolute"?"0":null),ie(h,"right",u[5]==="absolute"?"0":null),ie(h,"bottom",u[5]==="absolute"?"0":null),ie(h,"left",u[5]==="absolute"?"0":null),ie(h,"pointer-events",u[4]===!1?"none":null)},m(a,z){Pe(a,h,z),x&&x.m(h,null),u[91](h),f=Yo(h,u[92].bind(h)),v=!0},p(a,z){x&&x.p&&(!v||z[0]&1988|z[2]&134217728)&&Ky(x,_,a,a[89],v?Xy(_,a[89],z,V4):Hy(a[89]),K3),z[0]&32&&ie(h,"position",a[5]),z[0]&32&&ie(h,"top",a[5]==="absolute"?"0":null),z[0]&32&&ie(h,"right",a[5]==="absolute"?"0":null),z[0]&32&&ie(h,"bottom",a[5]==="absolute"?"0":null),z[0]&32&&ie(h,"left",a[5]==="absolute"?"0":null),z[0]&16&&ie(h,"pointer-events",a[4]===!1?"none":null)},i(a){v||(it(x,a),v=!0)},o(a){ht(x,a),v=!1},d(a){a&&T(h),x&&x.d(a),u[91](null),f()}}}function F4(u){let h,f,v=(u[3]===!0||typeof window<"u")&&H3(u);return{c(){v&&v.c(),h=Cn()},l(_){v&&v.l(_),h=Cn()},m(_,x){v&&v.m(_,x),Pe(_,h,x),f=!0},p(_,x){_[3]===!0||typeof window<"u"?v?(v.p(_,x),x[0]&8&&it(v,1)):(v=H3(_),v.c(),it(v,1),v.m(h.parentNode,h)):v&&($u(),ht(v,1,1,()=>{v=null}),ec())},i(_){f||(it(v),f=!0)},o(_){ht(v),f=!1},d(_){v&&v.d(_),_&&T(h)}}}function N4(u,h,f){let v,_,x,a,z,A,O,N,Z,j,fe,he,Ae,Ee,Ve,je,Bt,Mt,mt,et,Ar,Sr,or,kt,Tt,Pr,Ot,zr,at,cr,Jr,hi,Tr,gn,Fe,sr,jn,sa,Ti,_n,ri,{$$slots:Ia={},$$scope:br}=h,{ssr:qn=!1}=h,{pointerEvents:Ja=!0}=h,{position:Vr="relative"}=h,{percentRange:Lt=!1}=h,{width:Bi=void 0}=h,{height:Oi=void 0}=h,{containerWidth:ur=Bi||100}=h,{containerHeight:Jn=Oi||100}=h,{element:gi=void 0}=h,{x:ii=void 0}=h,{y:Fr=void 0}=h,{z:pi=void 0}=h,{r:Ai=void 0}=h,{data:ni=[]}=h,{xDomain:fi=void 0}=h,{yDomain:hr=void 0}=h,{zDomain:ar=void 0}=h,{rDomain:bn=void 0}=h,{xNice:Zn=!1}=h,{yNice:po=!1}=h,{zNice:fo=!1}=h,{rNice:Ra=!1}=h,{xReverse:es=H_.x}=h,{yReverse:di=H_.y}=h,{zReverse:an=H_.z}=h,{rReverse:on=H_.r}=h,{xPadding:mo=void 0}=h,{yPadding:la=void 0}=h,{zPadding:fl=void 0}=h,{rPadding:ts=void 0}=h,{xScale:Gn=Yg.x}=h,{yScale:xn=Yg.y}=h,{zScale:ua=Yg.z}=h,{rScale:Qn=Yg.r}=h,{xRange:ca=void 0}=h,{yRange:Nr=void 0}=h,{zRange:U=void 0}=h,{rRange:G=void 0}=h,{padding:X={}}=h,{extents:re={}}=h,{flatData:le=void 0}=h,{custom:ye={}}=h,_e=!1;Lk(()=>{_e=!0});const H={},ae=Or(Lt);Yt(u,ae,ke=>f(128,sa=ke));const Se=Or(ur);Yt(u,Se,ke=>f(7,jn=ke));const Ue=Or(Jn);Yt(u,Ue,ke=>f(6,sr=ke));const Ke=Or(S2(re));Yt(u,Ke,ke=>f(127,Fe=ke));const Me=Or(ni);Yt(u,Me,ke=>f(126,gn=ke));const qe=Or(le||ni);Yt(u,qe,ke=>f(125,Tr=ke));const ct=Or(X);Yt(u,ct,ke=>f(124,hi=ke));const st=Or(vd(ii));Yt(u,st,ke=>f(123,Jr=ke));const Re=Or(vd(Fr));Yt(u,Re,ke=>f(122,cr=ke));const nt=Or(vd(pi));Yt(u,nt,ke=>f(121,at=ke));const Ye=Or(vd(Ai));Yt(u,Ye,ke=>f(120,zr=ke));const tt=Or(fi);Yt(u,tt,ke=>f(119,Ot=ke));const Ft=Or(hr);Yt(u,Ft,ke=>f(118,Pr=ke));const Ge=Or(ar);Yt(u,Ge,ke=>f(117,Tt=ke));const Zt=Or(bn);Yt(u,Zt,ke=>f(116,kt=ke));const lr=Or(Zn);Yt(u,lr,ke=>f(115,or=ke));const Ct=Or(po);Yt(u,Ct,ke=>f(114,Sr=ke));const Qt=Or(fo);Yt(u,Qt,ke=>f(113,Ar=ke));const Jt=Or(Ra);Yt(u,Jt,ke=>f(112,et=ke));const zi=Or(es);Yt(u,zi,ke=>f(111,mt=ke));const $t=Or(di);Yt(u,$t,ke=>f(110,Mt=ke));const mr=Or(an);Yt(u,mr,ke=>f(109,Bt=ke));const dr=Or(on);Yt(u,dr,ke=>f(108,je=ke));const Kt=Or(mo);Yt(u,Kt,ke=>f(107,Ve=ke));const tr=Or(la);Yt(u,tr,ke=>f(106,Ee=ke));const Vi=Or(fl);Yt(u,Vi,ke=>f(105,Ae=ke));const ha=Or(ts);Yt(u,ha,ke=>f(104,he=ke));const _i=Or(ca);Yt(u,_i,ke=>f(103,fe=ke));const Hi=Or(Nr);Yt(u,Hi,ke=>f(102,j=ke));const wn=Or(U);Yt(u,wn,ke=>f(101,Z=ke));const Xi=Or(G);Yt(u,Xi,ke=>f(100,N=ke));const vr=Or(Gn);Yt(u,vr,ke=>f(99,O=ke));const Dn=Or(xn);Yt(u,Dn,ke=>f(98,A=ke));const Fi=Or(ua);Yt(u,Fi,ke=>f(97,z=ke));const Gr=Or(Qn);Yt(u,Gr,ke=>f(96,a=ke));const $n=Or(H);Yt(u,$n,ke=>f(94,_=ke));const Cr=Or(ye);Yt(u,Cr,ke=>f(95,x=ke));const En=Un([st,Re,nt,Ye],([ke,Ui,Ln,Hr])=>{const pa={};return ke&&(pa.x=ke),Ui&&(pa.y=Ui),Ln&&(pa.z=Ln),Hr&&(pa.r=Hr),pa}),sn=Un([ct,Se,Ue],([ke])=>Object.assign({top:0,right:0,bottom:0,left:0},ke)),rc=Un([Se,Ue,sn],([ke,Ui,Ln])=>{const Hr={};return Hr.top=Ln.top,Hr.right=ke-Ln.right,Hr.bottom=Ui-Ln.bottom,Hr.left=Ln.left,Hr.width=Hr.right-Hr.left,Hr.height=Hr.bottom-Hr.top,Hr.width<=0&&_e===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Hr.height<=0&&_e===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Hr}),Ni=Un([rc],([ke])=>ke.width);Yt(u,Ni,ke=>f(8,Ti=ke));const vo=Un([rc],([ke])=>ke.height);Yt(u,vo,ke=>f(9,_n=ke));const ln=Un([qe,En,Ke],([ke,Ui,Ln])=>{const Hr=S2(Ui,Ln);return Object.keys(Hr).length>0?{...xT(ke,Hr),...Ln}:{}}),Kr=Un([ln,tt],F_("x")),Pi=Un([ln,Ft],F_("y")),ai=Un([ln,Ge],F_("z")),yo=Un([ln,Zt],F_("r")),rs=Un([vr,ln,Kr,Kt,lr,zi,Ni,vo,_i,ae],Z_("x")),bd=Un([st,rs],G_),dl=Un([Dn,ln,Pi,tr,Ct,$t,Ni,vo,Hi,ae],Z_("y")),ml=Un([Re,dl],G_),is=Un([Fi,ln,ai,Vi,Qt,mr,Ni,vo,wn,ae],Z_("z")),gp=Un([nt,is],G_),ru=Un([Gr,ln,yo,ha,Jt,dr,Ni,vo,Xi,ae],Z_("r")),ns=Un([Ye,ru],G_),go=Un([rs],K_),iu=Un([dl],K_),vl=Un([is],K_),eh=Un([ru],K_),Sn=Un([Ni,vo],([ke,Ui])=>ke/Ui);Yt(u,Sn,ke=>f(10,ri=ke));function Si(ke){pf[ke?"unshift":"push"](()=>{gi=ke,f(2,gi)})}function Mn(){ur=this.clientWidth,Jn=this.clientHeight,f(0,ur),f(1,Jn)}return u.$$set=ke=>{"ssr"in ke&&f(3,qn=ke.ssr),"pointerEvents"in ke&&f(4,Ja=ke.pointerEvents),"position"in ke&&f(5,Vr=ke.position),"percentRange"in ke&&f(51,Lt=ke.percentRange),"width"in ke&&f(52,Bi=ke.width),"height"in ke&&f(53,Oi=ke.height),"containerWidth"in ke&&f(0,ur=ke.containerWidth),"containerHeight"in ke&&f(1,Jn=ke.containerHeight),"element"in ke&&f(2,gi=ke.element),"x"in ke&&f(54,ii=ke.x),"y"in ke&&f(55,Fr=ke.y),"z"in ke&&f(56,pi=ke.z),"r"in ke&&f(57,Ai=ke.r),"data"in ke&&f(58,ni=ke.data),"xDomain"in ke&&f(59,fi=ke.xDomain),"yDomain"in ke&&f(60,hr=ke.yDomain),"zDomain"in ke&&f(61,ar=ke.zDomain),"rDomain"in ke&&f(62,bn=ke.rDomain),"xNice"in ke&&f(63,Zn=ke.xNice),"yNice"in ke&&f(64,po=ke.yNice),"zNice"in ke&&f(65,fo=ke.zNice),"rNice"in ke&&f(66,Ra=ke.rNice),"xReverse"in ke&&f(67,es=ke.xReverse),"yReverse"in ke&&f(68,di=ke.yReverse),"zReverse"in ke&&f(69,an=ke.zReverse),"rReverse"in ke&&f(70,on=ke.rReverse),"xPadding"in ke&&f(71,mo=ke.xPadding),"yPadding"in ke&&f(72,la=ke.yPadding),"zPadding"in ke&&f(73,fl=ke.zPadding),"rPadding"in ke&&f(74,ts=ke.rPadding),"xScale"in ke&&f(75,Gn=ke.xScale),"yScale"in ke&&f(76,xn=ke.yScale),"zScale"in ke&&f(77,ua=ke.zScale),"rScale"in ke&&f(78,Qn=ke.rScale),"xRange"in ke&&f(79,ca=ke.xRange),"yRange"in ke&&f(80,Nr=ke.yRange),"zRange"in ke&&f(81,U=ke.zRange),"rRange"in ke&&f(82,G=ke.rRange),"padding"in ke&&f(83,X=ke.padding),"extents"in ke&&f(84,re=ke.extents),"flatData"in ke&&f(85,le=ke.flatData),"custom"in ke&&f(86,ye=ke.custom),"$$scope"in ke&&f(89,br=ke.$$scope)},u.$$.update=()=>{u.$$.dirty[1]&8388608&&ii&&f(87,H.x=ii,H),u.$$.dirty[1]&16777216&&Fr&&f(87,H.y=Fr,H),u.$$.dirty[1]&33554432&&pi&&f(87,H.z=pi,H),u.$$.dirty[1]&67108864&&Ai&&f(87,H.r=Ai,H),u.$$.dirty[1]&268435456&&fi&&f(87,H.xDomain=fi,H),u.$$.dirty[1]&536870912&&hr&&f(87,H.yDomain=hr,H),u.$$.dirty[1]&1073741824&&ar&&f(87,H.zDomain=ar,H),u.$$.dirty[2]&1&&bn&&f(87,H.rDomain=bn,H),u.$$.dirty[2]&131072&&ca&&f(87,H.xRange=ca,H),u.$$.dirty[2]&262144&&Nr&&f(87,H.yRange=Nr,H),u.$$.dirty[2]&524288&&U&&f(87,H.zRange=U,H),u.$$.dirty[2]&1048576&&G&&f(87,H.rRange=G,H),u.$$.dirty[1]&1048576&&Br(ae,sa=Lt,sa),u.$$.dirty[0]&1&&Br(Se,jn=ur,jn),u.$$.dirty[0]&2&&Br(Ue,sr=Jn,sr),u.$$.dirty[2]&4194304&&Br(Ke,Fe=S2(re),Fe),u.$$.dirty[1]&134217728&&Br(Me,gn=ni,gn),u.$$.dirty[1]&134217728|u.$$.dirty[2]&8388608&&Br(qe,Tr=le||ni,Tr),u.$$.dirty[2]&2097152&&Br(ct,hi=X,hi),u.$$.dirty[1]&8388608&&Br(st,Jr=vd(ii),Jr),u.$$.dirty[1]&16777216&&Br(Re,cr=vd(Fr),cr),u.$$.dirty[1]&33554432&&Br(nt,at=vd(pi),at),u.$$.dirty[1]&67108864&&Br(Ye,zr=vd(Ai),zr),u.$$.dirty[1]&268435456&&Br(tt,Ot=fi,Ot),u.$$.dirty[1]&536870912&&Br(Ft,Pr=hr,Pr),u.$$.dirty[1]&1073741824&&Br(Ge,Tt=ar,Tt),u.$$.dirty[2]&1&&Br(Zt,kt=bn,kt),u.$$.dirty[2]&2&&Br(lr,or=Zn,or),u.$$.dirty[2]&4&&Br(Ct,Sr=po,Sr),u.$$.dirty[2]&8&&Br(Qt,Ar=fo,Ar),u.$$.dirty[2]&16&&Br(Jt,et=Ra,et),u.$$.dirty[2]&32&&Br(zi,mt=es,mt),u.$$.dirty[2]&64&&Br($t,Mt=di,Mt),u.$$.dirty[2]&128&&Br(mr,Bt=an,Bt),u.$$.dirty[2]&256&&Br(dr,je=on,je),u.$$.dirty[2]&512&&Br(Kt,Ve=mo,Ve),u.$$.dirty[2]&1024&&Br(tr,Ee=la,Ee),u.$$.dirty[2]&2048&&Br(Vi,Ae=fl,Ae),u.$$.dirty[2]&4096&&Br(ha,he=ts,he),u.$$.dirty[2]&131072&&Br(_i,fe=ca,fe),u.$$.dirty[2]&262144&&Br(Hi,j=Nr,j),u.$$.dirty[2]&524288&&Br(wn,Z=U,Z),u.$$.dirty[2]&1048576&&Br(Xi,N=G,N),u.$$.dirty[2]&8192&&Br(vr,O=Gn,O),u.$$.dirty[2]&16384&&Br(Dn,A=xn,A),u.$$.dirty[2]&32768&&Br(Fi,z=ua,z),u.$$.dirty[2]&65536&&Br(Gr,a=Qn,a),u.$$.dirty[2]&16777216&&Br(Cr,x=ye,x),u.$$.dirty[2]&33554432&&Br($n,_=H,_),u.$$.dirty[2]&67108864&&Mk("LayerCake",v)},f(88,v={activeGetters:En,width:Ni,height:vo,percentRange:ae,aspectRatio:Sn,containerWidth:Se,containerHeight:Ue,x:st,y:Re,z:nt,r:Ye,custom:Cr,data:Me,xNice:lr,yNice:Ct,zNice:Qt,rNice:Jt,xReverse:zi,yReverse:$t,zReverse:mr,rReverse:dr,xPadding:Kt,yPadding:tr,zPadding:Vi,rPadding:ha,padding:sn,flatData:qe,extents:ln,xDomain:Kr,yDomain:Pi,zDomain:ai,rDomain:yo,xRange:go,yRange:iu,zRange:vl,rRange:eh,config:$n,xScale:rs,xGet:bd,yScale:dl,yGet:ml,zScale:is,zGet:gp,rScale:ru,rGet:ns}),[ur,Jn,gi,qn,Ja,Vr,sr,jn,Ti,_n,ri,ae,Se,Ue,Ke,Me,qe,ct,st,Re,nt,Ye,tt,Ft,Ge,Zt,lr,Ct,Qt,Jt,zi,$t,mr,dr,Kt,tr,Vi,ha,_i,Hi,wn,Xi,vr,Dn,Fi,Gr,$n,Cr,Ni,vo,Sn,Lt,Bi,Oi,ii,Fr,pi,Ai,ni,fi,hr,ar,bn,Zn,po,fo,Ra,es,di,an,on,mo,la,fl,ts,Gn,xn,ua,Qn,ca,Nr,U,G,X,re,le,ye,H,v,br,Ia,Si,Mn]}class U4 extends Jo{constructor(h){super(),Qo(this,h,N4,F4,$o,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const j4=u=>({element:u&1}),X3=u=>({element:u[0]}),q4=u=>({element:u&1}),W3=u=>({element:u[0]});function Z4(u){let h,f,v,_,x;const a=u[12].defs,z=Gy(a,u,u[11],W3),A=u[12].default,O=Gy(A,u,u[11],X3);return{c(){h=Ma("svg"),f=Ma("defs"),z&&z.c(),v=Ma("g"),O&&O.c(),this.h()},l(N){h=La(N,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var Z=R(h);f=La(Z,"defs",{});var j=R(f);z&&z.l(j),j.forEach(T),v=La(Z,"g",{class:!0,transform:!0});var fe=R(v);O&&O.l(fe),fe.forEach(T),Z.forEach(T),this.h()},h(){S(v,"class","layercake-layout-svg_g"),S(v,"transform",_="translate("+u[7].left+", "+u[7].top+")"),S(h,"class","layercake-layout-svg svelte-u84d8d"),S(h,"viewBox",u[4]),S(h,"width",u[5]),S(h,"height",u[6]),ie(h,"z-index",u[2]),ie(h,"pointer-events",u[3]===!1?"none":null)},m(N,Z){Pe(N,h,Z),w(h,f),z&&z.m(f,null),w(h,v),O&&O.m(v,null),u[13](v),u[14](h),x=!0},p(N,[Z]){z&&z.p&&(!x||Z&2049)&&Ky(z,a,N,N[11],x?Xy(a,N[11],Z,q4):Hy(N[11]),W3),O&&O.p&&(!x||Z&2049)&&Ky(O,A,N,N[11],x?Xy(A,N[11],Z,j4):Hy(N[11]),X3),(!x||Z&128&&_!==(_="translate("+N[7].left+", "+N[7].top+")"))&&S(v,"transform",_),(!x||Z&16)&&S(h,"viewBox",N[4]),(!x||Z&32)&&S(h,"width",N[5]),(!x||Z&64)&&S(h,"height",N[6]),Z&4&&ie(h,"z-index",N[2]),Z&8&&ie(h,"pointer-events",N[3]===!1?"none":null)},i(N){x||(it(z,N),it(O,N),x=!0)},o(N){ht(z,N),ht(O,N),x=!1},d(N){N&&T(h),z&&z.d(N),O&&O.d(N),u[13](null),u[14](null)}}}function G4(u,h,f){let v,_,x,{$$slots:a={},$$scope:z}=h,{element:A=void 0}=h,{innerElement:O=void 0}=h,{zIndex:N=void 0}=h,{pointerEvents:Z=void 0}=h,{viewBox:j=void 0}=h;const{containerWidth:fe,containerHeight:he,padding:Ae}=e_("LayerCake");Yt(u,fe,je=>f(5,v=je)),Yt(u,he,je=>f(6,_=je)),Yt(u,Ae,je=>f(7,x=je));function Ee(je){pf[je?"unshift":"push"](()=>{O=je,f(1,O)})}function Ve(je){pf[je?"unshift":"push"](()=>{A=je,f(0,A)})}return u.$$set=je=>{"element"in je&&f(0,A=je.element),"innerElement"in je&&f(1,O=je.innerElement),"zIndex"in je&&f(2,N=je.zIndex),"pointerEvents"in je&&f(3,Z=je.pointerEvents),"viewBox"in je&&f(4,j=je.viewBox),"$$scope"in je&&f(11,z=je.$$scope)},[A,O,N,Z,j,v,_,x,fe,he,Ae,z,a,Ee,Ve]}class K4 extends Jo{constructor(h){super(),Qo(this,h,G4,Z4,$o,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Y3(u,h,f){const v=u.slice();return v[23]=h[f],v[25]=f,v}function J3(u){let h,f,v,_;return{c(){h=Ma("rect"),this.h()},l(x){h=La(x,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",v=u[13](u[12](u[23]))-1),S(h,"width",_=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height","3"),S(h,"fill","#CEDC20"),S(h,"stroke",u[0]),S(h,"stroke-width",u[1])},m(x,a){Pe(x,h,a)},p(x,a){a&3200&&f!==(f=x[11].bandwidth?x[7](x[23]):x[7](x[23])[0])&&S(h,"x",f),a&13312&&v!==(v=x[13](x[12](x[23]))-1)&&S(h,"y",v),a&3584&&_!==(_=x[11].bandwidth?x[11].bandwidth():x[9](x[23]))&&S(h,"width",_),a&1&&S(h,"stroke",x[0]),a&2&&S(h,"stroke-width",x[1])},d(x){x&&T(h)}}}function Q3(u){let h,f,v,_,x,a,z,A,O=u[12]&&J3(u);return{c(){h=Ma("rect"),O&&O.c(),a=Ma("text"),this.h()},l(N){h=La(N,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),O&&O.l(N),a=La(N,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),R(a).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",v=u[6](u[23])),S(h,"width",_=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height",x=u[8](u[23])),S(h,"fill",u[4]),S(h,"stroke",u[0]),S(h,"stroke-width",u[1]),S(a,"x",z=u[11].bandwidth?u[7](u[23])+u[11].bandwidth()/2:u[7](u[23])[0]),S(a,"y",A=u[6](u[23])-4),S(a,"dx",u[2]),S(a,"dy",u[3]),S(a,"text-anchor",u[5])},m(N,Z){Pe(N,h,Z),O&&O.m(N,Z),Pe(N,a,Z)},p(N,Z){Z&3200&&f!==(f=N[11].bandwidth?N[7](N[23]):N[7](N[23])[0])&&S(h,"x",f),Z&1088&&v!==(v=N[6](N[23]))&&S(h,"y",v),Z&3584&&_!==(_=N[11].bandwidth?N[11].bandwidth():N[9](N[23]))&&S(h,"width",_),Z&1280&&x!==(x=N[8](N[23]))&&S(h,"height",x),Z&16&&S(h,"fill",N[4]),Z&1&&S(h,"stroke",N[0]),Z&2&&S(h,"stroke-width",N[1]),N[12]?O?O.p(N,Z):(O=J3(N),O.c(),O.m(a.parentNode,a)):O&&(O.d(1),O=null),Z&3200&&z!==(z=N[11].bandwidth?N[7](N[23])+N[11].bandwidth()/2:N[7](N[23])[0])&&S(a,"x",z),Z&1088&&A!==(A=N[6](N[23])-4)&&S(a,"y",A),Z&4&&S(a,"dx",N[2]),Z&8&&S(a,"dy",N[3]),Z&32&&S(a,"text-anchor",N[5])},d(N){N&&T(h),O&&O.d(N),N&&T(a)}}}function H4(u){let h,f=u[10],v=[];for(let _=0;_<f.length;_+=1)v[_]=Q3(Y3(u,f,_));return{c(){h=Ma("g");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){h=La(_,"g",{class:!0});var x=R(h);for(let a=0;a<v.length;a+=1)v[a].l(x);x.forEach(T),this.h()},h(){S(h,"class","column-group svelte-wgzwsk")},m(_,x){Pe(_,h,x);for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(h,null)},p(_,[x]){if(x&16383){f=_[10];let a;for(a=0;a<f.length;a+=1){const z=Y3(_,f,a);v[a]?v[a].p(z,x):(v[a]=Q3(z),v[a].c(),v[a].m(h,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=f.length}},i:nn,o:nn,d(_){_&&T(h),$c(v,_)}}}function X4(u,h,f){let v,_,x,a,z,A,O,N,Z;const{data:j,xGet:fe,yGet:he,yRange:Ae,xScale:Ee,yScale:Ve,y:je,z:Bt}=e_("LayerCake");Yt(u,j,kt=>f(10,A=kt)),Yt(u,fe,kt=>f(7,z=kt)),Yt(u,he,kt=>f(6,x=kt)),Yt(u,Ae,kt=>f(21,a=kt)),Yt(u,Ee,kt=>f(11,O=kt)),Yt(u,Ve,kt=>f(13,Z=kt)),Yt(u,Bt,kt=>f(12,N=kt));let{stroke:Mt=""}=h,{strokeWidth:mt=0}=h,{dxTick:et=0}=h,{dyTick:Ar=0}=h,{fill:Sr="#00205b"}=h,{textAnchor:or="middle"}=h;return u.$$set=kt=>{"stroke"in kt&&f(0,Mt=kt.stroke),"strokeWidth"in kt&&f(1,mt=kt.strokeWidth),"dxTick"in kt&&f(2,et=kt.dxTick),"dyTick"in kt&&f(3,Ar=kt.dyTick),"fill"in kt&&f(4,Sr=kt.fill),"textAnchor"in kt&&f(5,or=kt.textAnchor)},u.$$.update=()=>{u.$$.dirty&128&&f(9,v=kt=>{const Tt=z(kt);return Math.max(0,Tt[1]-Tt[0])}),u.$$.dirty&2097216&&f(8,_=kt=>a[0]-x(kt))},[Mt,mt,et,Ar,Sr,or,x,z,_,v,A,O,N,Z,j,fe,he,Ae,Ee,Ve,Bt,a]}class W4 extends Jo{constructor(h){super(),Qo(this,h,X4,H4,$o,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function $3(u,h,f){const v=u.slice();return v[28]=h[f],v[30]=f,v}function ek(u){let h,f,v,_;return{c(){h=Ma("line"),this.h()},l(x){h=La(x,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),R(h).forEach(T),this.h()},h(){S(h,"y1",f=u[20]*-1),S(h,"y2",v=u[14]&&u[30]%2==0?u[10]+u[8]+2:u[10]+u[8]-13),S(h,"x1","0"),S(h,"x2","0"),S(h,"stroke",u[11]),S(h,"stroke-width",_=u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)?2:1),S(h,"class","svelte-fwjh80"),Ei(h,"baseline",u[13])},m(x,a){Pe(x,h,a)},p(x,a){a&1048576&&f!==(f=x[20]*-1)&&S(h,"y1",f),a&17664&&v!==(v=x[14]&&x[30]%2==0?x[10]+x[8]+2:x[10]+x[8]-13)&&S(h,"y2",v),a&2048&&S(h,"stroke",x[11]),a&32784&&_!==(_=x[15]&&Array.isArray(x[4])&&x[30]==Math.floor(x[4].length/2)?2:1)&&S(h,"stroke-width",_),a&8192&&Ei(h,"baseline",x[13])},d(x){x&&T(h)}}}function Y4(u){let h=u[1](u[28])+"",f;return{c(){f=ee(h)},l(v){f=te(v,h)},m(v,_){Pe(v,f,_)},p(v,_){_&262146&&h!==(h=v[1](v[28])+"")&&dt(f,h)},d(v){v&&T(f)}}}function J4(u){let h,f=u[1](u[28])+"",v,_;return{c(){h=ee(u[5]),v=ee(f),_=ee(u[6])},l(x){h=te(x,u[5]),v=te(x,f),_=te(x,u[6])},m(x,a){Pe(x,h,a),Pe(x,v,a),Pe(x,_,a)},p(x,a){a&32&&dt(h,x[5]),a&262146&&f!==(f=x[1](x[28])+"")&&dt(v,f),a&64&&dt(_,x[6])},d(x){x&&T(h),x&&T(v),x&&T(_)}}}function tk(u){let h,f,v,_,x,a,z,A=u[0]!==!1&&ek(u);function O(j,fe){return j[30]==j[18].length-1?J4:Y4}let N=O(u),Z=N(u);return{c(){h=Ma("g"),A&&A.c(),f=Ma("text"),Z.c(),this.h()},l(j){h=La(j,"g",{class:!0,transform:!0});var fe=R(h);A&&A.l(fe),f=La(fe,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var he=R(f);Z.l(he),he.forEach(T),fe.forEach(T),this.h()},h(){S(f,"x",v=u[7]||u[16]?u[17].bandwidth()/2:0),S(f,"y",_=u[3]?u[20]*-1-6:u[14]&&u[30]%2==0?u[8]+15:u[8]),S(f,"dx",x=u[24](u[30])=="start"?u[9]-2:u[24](u[30])=="end"?u[9]+2:u[9]),S(f,"dy",u[10]),S(f,"text-anchor",u[24](u[30])),S(f,"fill",u[12]),S(f,"class","svelte-fwjh80"),Ei(f,"bold",u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)),S(h,"class",a="tick tick-"+u[28]+" svelte-fwjh80"),S(h,"transform",z="translate("+u[17](u[28])+","+u[19][0]+")")},m(j,fe){Pe(j,h,fe),A&&A.m(h,null),w(h,f),Z.m(f,null)},p(j,fe){j[0]!==!1?A?A.p(j,fe):(A=ek(j),A.c(),A.m(h,f)):A&&(A.d(1),A=null),N===(N=O(j))&&Z?Z.p(j,fe):(Z.d(1),Z=N(j),Z&&(Z.c(),Z.m(f,null))),fe&196736&&v!==(v=j[7]||j[16]?j[17].bandwidth()/2:0)&&S(f,"x",v),fe&1065224&&_!==(_=j[3]?j[20]*-1-6:j[14]&&j[30]%2==0?j[8]+15:j[8])&&S(f,"y",_),fe&512&&x!==(x=j[24](j[30])=="start"?j[9]-2:j[24](j[30])=="end"?j[9]+2:j[9])&&S(f,"dx",x),fe&1024&&S(f,"dy",j[10]),fe&4096&&S(f,"fill",j[12]),fe&32784&&Ei(f,"bold",j[15]&&Array.isArray(j[4])&&j[30]==Math.floor(j[4].length/2)),fe&262144&&a!==(a="tick tick-"+j[28]+" svelte-fwjh80")&&S(h,"class",a),fe&917504&&z!==(z="translate("+j[17](j[28])+","+j[19][0]+")")&&S(h,"transform",z)},d(j){j&&T(h),A&&A.d(),Z.d()}}}function rk(u){let h,f,v;return{c(){h=Ma("line"),this.h()},l(_){h=La(_,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","baseline svelte-fwjh80"),S(h,"y1",u[20]),S(h,"y2","0"),S(h,"x1",f=u[17](0)),S(h,"x2",v=u[17](0)),S(h,"stroke",u[11])},m(_,x){Pe(_,h,x)},p(_,x){x&1048576&&S(h,"y1",_[20]),x&131072&&f!==(f=_[17](0))&&S(h,"x1",f),x&131072&&v!==(v=_[17](0))&&S(h,"x2",v),x&2048&&S(h,"stroke",_[11])},d(_){_&&T(h)}}}function Q4(u){let h,f,v=u[18],_=[];for(let a=0;a<v.length;a+=1)_[a]=tk($3(u,v,a));let x=u[2]===!0&&rk(u);return{c(){h=Ma("g");for(let a=0;a<_.length;a+=1)_[a].c();f=Cn(),x&&x.c(),this.h()},l(a){h=La(a,"g",{class:!0});var z=R(h);for(let A=0;A<_.length;A+=1)_[A].l(z);f=Cn(),x&&x.l(z),z.forEach(T),this.h()},h(){S(h,"class","axis x-axis")},m(a,z){Pe(a,h,z);for(let A=0;A<_.length;A+=1)_[A]&&_[A].m(h,null);w(h,f),x&&x.m(h,null)},p(a,[z]){if(z&18874363){v=a[18];let A;for(A=0;A<v.length;A+=1){const O=$3(a,v,A);_[A]?_[A].p(O,z):(_[A]=tk(O),_[A].c(),_[A].m(h,f))}for(;A<_.length;A+=1)_[A].d(1);_.length=v.length}a[2]===!0?x?x.p(a,z):(x=rk(a),x.c(),x.m(h,null)):x&&(x.d(1),x=null)},i:nn,o:nn,d(a){a&&T(h),$c(_,a),x&&x.d()}}}function $4(u,h,f){let v,_,x,a,z;const{width:A,height:O,xScale:N,yScale:Z,yRange:j}=e_("LayerCake");Yt(u,O,at=>f(20,z=at)),Yt(u,N,at=>f(17,x=at)),Yt(u,j,at=>f(19,a=at));let{gridlines:fe=!0}=h,{formatTick:he=at=>at}=h,{baseline:Ae=!1}=h,{flipped:Ee=!1}=h,{snapTicks:Ve=!1}=h,{ticks:je=void 0}=h,{prefix:Bt=""}=h,{suffix:Mt=""}=h,{xTick:mt=void 0}=h,{yTick:et=15}=h,{dxTick:Ar=0}=h,{dyTick:Sr=0}=h,{lineColor:or="#999"}=h,{textColor:kt="#555"}=h,{solid:Tt=!1}=h,{stagger:Pr=!1}=h,{median:Ot=!0}=h;function zr(at){if(Ve===!0){if(at===0)return"start";if(at===_.length-1)return"end"}return"middle"}return u.$$set=at=>{"gridlines"in at&&f(0,fe=at.gridlines),"formatTick"in at&&f(1,he=at.formatTick),"baseline"in at&&f(2,Ae=at.baseline),"flipped"in at&&f(3,Ee=at.flipped),"snapTicks"in at&&f(25,Ve=at.snapTicks),"ticks"in at&&f(4,je=at.ticks),"prefix"in at&&f(5,Bt=at.prefix),"suffix"in at&&f(6,Mt=at.suffix),"xTick"in at&&f(7,mt=at.xTick),"yTick"in at&&f(8,et=at.yTick),"dxTick"in at&&f(9,Ar=at.dxTick),"dyTick"in at&&f(10,Sr=at.dyTick),"lineColor"in at&&f(11,or=at.lineColor),"textColor"in at&&f(12,kt=at.textColor),"solid"in at&&f(13,Tt=at.solid),"stagger"in at&&f(14,Pr=at.stagger),"median"in at&&f(15,Ot=at.median)},u.$$.update=()=>{u.$$.dirty&131072&&f(16,v=typeof x.bandwidth=="function"),u.$$.dirty&196624&&f(18,_=Array.isArray(je)?je:v?x.domain():x.ticks(je))},[fe,he,Ae,Ee,je,Bt,Mt,mt,et,Ar,Sr,or,kt,Tt,Pr,Ot,v,x,_,a,z,O,N,j,zr,Ve]}class eA extends Jo{constructor(h){super(),Qo(this,h,$4,Q4,$o,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function tA(u){let h,f,v,_;return h=new W4({props:{fill:u[1],formatVal:u[5]}}),v=new eA({props:{gridlines:!1}}),{c(){Nt(h.$$.fragment),f=be(),Nt(v.$$.fragment)},l(x){Ut(h.$$.fragment,x),f=xe(x),Ut(v.$$.fragment,x)},m(x,a){jt(h,x,a),Pe(x,f,a),jt(v,x,a),_=!0},p(x,a){const z={};a&2&&(z.fill=x[1]),a&32&&(z.formatVal=x[5]),h.$set(z)},i(x){_||(it(h.$$.fragment,x),it(v.$$.fragment,x),_=!0)},o(x){ht(h.$$.fragment,x),ht(v.$$.fragment,x),_=!1},d(x){qt(h,x),x&&T(f),qt(v,x)}}}function rA(u){let h,f;return h=new K4({props:{$$slots:{default:[tA]},$$scope:{ctx:u}}}),{c(){Nt(h.$$.fragment)},l(v){Ut(h.$$.fragment,v)},m(v,_){jt(h,v,_),f=!0},p(v,_){const x={};_&2082&&(x.$$scope={dirty:_,ctx:v}),h.$set(x)},i(v){f||(it(h.$$.fragment,v),f=!0)},o(v){ht(h.$$.fragment,v),f=!1},d(v){qt(h,v)}}}function iA(u){let h,f,v;return f=new U4({props:{padding:{top:15,right:0,bottom:20,left:0},x:u[2],y:u[3],z:u[4],xScale:Gk().paddingInner([.02]).round(!0),xDomain:u[7],yDomain:u[6],zDomain:u[6],data:u[0],$$slots:{default:[rA]},$$scope:{ctx:u}}}),{c(){h=M("div"),Nt(f.$$.fragment),this.h()},l(_){h=L(_,"DIV",{class:!0});var x=R(h);Ut(f.$$.fragment,x),x.forEach(T),this.h()},h(){S(h,"class","chart-container svelte-1i1qsul")},m(_,x){Pe(_,h,x),jt(f,h,null),v=!0},p(_,[x]){const a={};x&4&&(a.x=_[2]),x&8&&(a.y=_[3]),x&16&&(a.z=_[4]),x&128&&(a.xDomain=_[7]),x&64&&(a.yDomain=_[6]),x&64&&(a.zDomain=_[6]),x&1&&(a.data=_[0]),x&2082&&(a.$$scope={dirty:x,ctx:_}),f.$set(a)},i(_){v||(it(f.$$.fragment,_),v=!0)},o(_){ht(f.$$.fragment,_),v=!1},d(_){_&&T(h),qt(f)}}}function nA(u,h,f){let v,_,x,{data:a}=h,{suffix:z="%"}=h,{decimals:A=null}=h,{fill:O="#00205B"}=h,{xKey:N="x"}=h,{yKey:Z="y"}=h,{zKey:j=null}=h,{colors:fe=["#00205B","#00205B","#00205B","#00205B"]}=h;return u.$$set=he=>{"data"in he&&f(0,a=he.data),"suffix"in he&&f(8,z=he.suffix),"decimals"in he&&f(9,A=he.decimals),"fill"in he&&f(1,O=he.fill),"xKey"in he&&f(2,N=he.xKey),"yKey"in he&&f(3,Z=he.yKey),"zKey"in he&&f(4,j=he.zKey),"colors"in he&&f(10,fe=he.colors)},u.$$.update=()=>{u.$$.dirty&5&&f(7,v=a.map(he=>he[N])),u.$$.dirty&9&&f(6,_=[0,Math.max(...a.map(he=>he[Z]))]),u.$$.dirty&768&&f(5,x=he=>he.toFixed(A)+z)},[a,O,N,Z,j,x,_,v,z,A,fe]}class aA extends Jo{constructor(h){super(),Qo(this,h,nA,iA,$o,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function ik(u,h,f){const v=u.slice();return v[13]=h[f],v[15]=f,v}function oA(u){let h,f,v=u[5](u[13][u[3]])+"",_,x;return{c(){h=M("span"),f=ee("(NI "),_=ee(v),x=ee(")"),this.h()},l(a){h=L(a,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(NI "),_=te(z,v),x=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(a,z){Pe(a,h,z),w(h,f),w(h,_),w(h,x)},p(a,z){z&9&&v!==(v=a[5](a[13][a[3]])+"")&&dt(_,v)},d(a){a&&T(h)}}}function sA(u){let h;return{c(){h=M("span"),this.h()},l(f){h=L(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(f,v){Pe(f,h,v)},p:nn,d(f){f&&T(h)}}}function lA(u){let h,f,v=i0(Math.round(u[13][u[3]]),"%")+"",_,x;return{c(){h=M("span"),f=ee("(2011 "),_=ee(v),x=ee(")"),this.h()},l(a){h=L(a,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(2011 "),_=te(z,v),x=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(a,z){Pe(a,h,z),w(h,f),w(h,_),w(h,x)},p(a,z){z&9&&v!==(v=i0(Math.round(a[13][a[3]]),"%")+"")&&dt(_,v)},d(a){a&&T(h)}}}function nk(u){let h,f,v,_,x=u[13][u[1]]+"",a,z,A,O=u[5](u[13][u[2]])+"",N,Z,j;function fe(Ee,Ve){if(Ee[3]=="prev"&&Ee[4])return lA;if(Ee[3]=="prev"&&!Ee[4])return sA;if(Ee[3]=="ni")return oA}let he=fe(u),Ae=he&&he(u);return{c(){h=M("tr"),f=M("td"),v=Ma("svg"),_=be(),a=ee(x),z=be(),A=M("td"),N=ee(O),Z=be(),Ae&&Ae.c(),j=be(),this.h()},l(Ee){h=L(Ee,"TR",{});var Ve=R(h);f=L(Ve,"TD",{class:!0});var je=R(f);v=La(je,"svg",{width:!0,height:!0,class:!0});var Bt=R(v);Bt.forEach(T),_=xe(je),a=te(je,x),je.forEach(T),z=xe(Ve),A=L(Ve,"TD",{class:!0,style:!0});var Mt=R(A);N=te(Mt,O),Z=xe(Mt),Ae&&Ae.l(Mt),Mt.forEach(T),j=xe(Ve),Ve.forEach(T),this.h()},h(){S(v,"width","20"),S(v,"height","30"),S(v,"class","bullet svelte-1mqxdxj"),S(f,"class","svelte-1mqxdxj"),S(A,"class","cell-right svelte-1mqxdxj"),ie(A,"vertical-align","top")},m(Ee,Ve){Pe(Ee,h,Ve),w(h,f),w(f,v),w(f,_),w(f,a),w(h,z),w(h,A),w(A,N),w(A,Z),Ae&&Ae.m(A,null),w(h,j)},p(Ee,Ve){Ve&3&&x!==(x=Ee[13][Ee[1]]+"")&&dt(a,x),Ve&5&&O!==(O=Ee[5](Ee[13][Ee[2]])+"")&&dt(N,O),he===(he=fe(Ee))&&Ae?Ae.p(Ee,Ve):(Ae&&Ae.d(1),Ae=he&&he(Ee),Ae&&(Ae.c(),Ae.m(A,null)))},d(Ee){Ee&&T(h),Ae&&Ae.d()}}}function uA(u){let h,f,v=u[0],_=[];for(let x=0;x<v.length;x+=1)_[x]=nk(ik(u,v,x));return{c(){h=M("table"),f=M("tbody");for(let x=0;x<_.length;x+=1)_[x].c();this.h()},l(x){h=L(x,"TABLE",{class:!0});var a=R(h);f=L(a,"TBODY",{});var z=R(f);for(let A=0;A<_.length;A+=1)_[A].l(z);z.forEach(T),a.forEach(T),this.h()},h(){S(h,"class","legend svelte-1mqxdxj")},m(x,a){Pe(x,h,a),w(h,f);for(let z=0;z<_.length;z+=1)_[z]&&_[z].m(f,null)},p(x,[a]){if(a&63){v=x[0];let z;for(z=0;z<v.length;z+=1){const A=ik(x,v,z);_[z]?_[z].p(A,a):(_[z]=nk(A),_[z].c(),_[z].m(f,null))}for(;z<_.length;z+=1)_[z].d(1);_.length=v.length}},i:nn,o:nn,d(x){x&&T(h),$c(_,x)}}}function cA(u,h,f){let v,{data:_}=h,{xKey:x="x"}=h,{yKey:a="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:A=!0}=h,{colors:O=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:N="#555"}=h,{mutedColor:Z="#999"}=h,{decimals:j=null}=h,{round:fe=!1}=h;function he(Ae){let Ee;return j?Ee=(Ae/v*100).toFixed(j)+"%":Ae/v*100<1?Ee="<1%":Ee=(Ae/v*100).toFixed(0)+"%",Ee}return u.$$set=Ae=>{"data"in Ae&&f(0,_=Ae.data),"xKey"in Ae&&f(1,x=Ae.xKey),"yKey"in Ae&&f(2,a=Ae.yKey),"zKey"in Ae&&f(3,z=Ae.zKey),"topic_prev_available"in Ae&&f(4,A=Ae.topic_prev_available),"colors"in Ae&&f(6,O=Ae.colors),"textColor"in Ae&&f(7,N=Ae.textColor),"mutedColor"in Ae&&f(8,Z=Ae.mutedColor),"decimals"in Ae&&f(9,j=Ae.decimals),"round"in Ae&&f(10,fe=Ae.round)},u.$$.update=()=>{u.$$.dirty&5&&(v=_.map(Ae=>Ae[a]).reduce((Ae,Ee)=>Ae+Ee,0)),u.$$.dirty&9&&_.map(Ae=>Ae[z]).reduce((Ae,Ee)=>Ae+Ee,0)},[_,x,a,z,A,he,O,N,Z,j,fe]}class hA extends Jo{constructor(h){super(),Qo(this,h,cA,uA,$o,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:6,textColor:7,mutedColor:8,decimals:9,round:10})}}function ak(u,h,f){const v=u.slice();return v[6]=h[f],v[8]=f,v}function ok(u){let h,f=u[0],v=[];for(let _=0;_<f.length;_+=1)v[_]=sk(ak(u,f,_));return{c(){h=Ma("svg");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){h=La(_,"svg",{class:!0});var x=R(h);for(let a=0;a<v.length;a+=1)v[a].l(x);x.forEach(T),this.h()},h(){S(h,"class","stack svelte-pzvhwz")},m(_,x){Pe(_,h,x);for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(h,null)},p(_,x){if(x&31){f=_[0];let a;for(a=0;a<f.length;a+=1){const z=ak(_,f,a);v[a]?v[a].p(z,x):(v[a]=sk(z),v[a].c(),v[a].m(h,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=f.length}},d(_){_&&T(h),$c(v,_)}}}function sk(u){let h,f;return{c(){h=Ma("rect"),this.h()},l(v){h=La(v,"rect",{class:!0,x:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","cell svelte-pzvhwz"),S(h,"x",f=u[4][u[8]]/u[3]*100+"%"),ie(h,"width",u[6][u[1]]/u[3]*100+"%"),ie(h,"fill",u[2][u[8]])},m(v,_){Pe(v,h,_)},p(v,_){_&24&&f!==(f=v[4][v[8]]/v[3]*100+"%")&&S(h,"x",f),_&11&&ie(h,"width",v[6][v[1]]/v[3]*100+"%"),_&4&&ie(h,"fill",v[2][v[8]])},d(v){v&&T(h)}}}function pA(u){let h,f=u[3]&&u[4]&&ok(u);return{c(){f&&f.c(),h=Cn()},l(v){f&&f.l(v),h=Cn()},m(v,_){f&&f.m(v,_),Pe(v,h,_)},p(v,[_]){v[3]&&v[4]?f?f.p(v,_):(f=ok(v),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:nn,o:nn,d(v){f&&f.d(v),v&&T(h)}}}function fA(u,h,f){let{data:v}=h,{yKey:_="y"}=h,{colors:x=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,a,z;function A(){f(3,a=v.map(N=>N[_]).reduce((N,Z)=>N+Z,0));let O=[0];v.forEach(N=>O.push(O[O.length-1]+N[_])),f(4,z=O)}return u.$$set=O=>{"data"in O&&f(0,v=O.data),"yKey"in O&&f(1,_=O.yKey),"colors"in O&&f(2,x=O.colors)},u.$$.update=()=>{u.$$.dirty&3&&(v||_)&&A()},[v,_,x,a,z]}class q2 extends Jo{constructor(h){super(),Qo(this,h,fA,pA,$o,{data:0,yKey:1,colors:2})}}function lk(u,h,f){const v=u.slice();return v[10]=h[f],v[12]=f,v}function dA(u){let h,f,v=u[6](u[10][u[3]])+"",_,x;return{c(){h=M("span"),f=ee("(NI "),_=ee(v),x=ee(")"),this.h()},l(a){h=L(a,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(NI "),_=te(z,v),x=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(a,z){Pe(a,h,z),w(h,f),w(h,_),w(h,x)},p(a,z){z&9&&v!==(v=a[6](a[10][a[3]])+"")&&dt(_,v)},d(a){a&&T(h)}}}function mA(u){let h;return{c(){h=M("span"),this.h()},l(f){h=L(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(f,v){Pe(f,h,v)},p:nn,d(f){f&&T(h)}}}function vA(u){let h,f,v=i0(Math.round(u[10][u[3]]),"%")+"",_,x;return{c(){h=M("span"),f=ee("(2011 "),_=ee(v),x=ee(")"),this.h()},l(a){h=L(a,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(2011 "),_=te(z,v),x=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(a,z){Pe(a,h,z),w(h,f),w(h,_),w(h,x)},p(a,z){z&9&&v!==(v=i0(Math.round(a[10][a[3]]),"%")+"")&&dt(_,v)},d(a){a&&T(h)}}}function uk(u){let h,f,v,_,x,a=u[10][u[1]]+"",z,A,O,N=u[6](u[10][u[2]])+"",Z,j,fe;function he(Ve,je){if(Ve[3]=="prev"&&Ve[4])return vA;if(Ve[3]=="prev"&&!Ve[4])return mA;if(Ve[3]=="ni")return dA}let Ae=he(u),Ee=Ae&&Ae(u);return{c(){h=M("tr"),f=M("td"),v=Ma("svg"),_=Ma("rect"),x=be(),z=ee(a),A=be(),O=M("td"),Z=ee(N),j=be(),Ee&&Ee.c(),fe=be(),this.h()},l(Ve){h=L(Ve,"TR",{});var je=R(h);f=L(je,"TD",{class:!0});var Bt=R(f);v=La(Bt,"svg",{width:!0,height:!0,class:!0});var Mt=R(v);_=La(Mt,"rect",{width:!0,height:!0,style:!0}),R(_).forEach(T),Mt.forEach(T),x=xe(Bt),z=te(Bt,a),Bt.forEach(T),A=xe(je),O=L(je,"TD",{class:!0,style:!0});var mt=R(O);Z=te(mt,N),j=xe(mt),Ee&&Ee.l(mt),mt.forEach(T),fe=xe(je),je.forEach(T),this.h()},h(){S(_,"width","20"),S(_,"height","30"),ie(_,"fill",u[5][u[12]]),S(v,"width","20"),S(v,"height","30"),S(v,"class","bullet svelte-1gvovsq"),S(f,"class","svelte-1gvovsq"),S(O,"class","cell-right svelte-1gvovsq"),ie(O,"vertical-align","top")},m(Ve,je){Pe(Ve,h,je),w(h,f),w(f,v),w(v,_),w(f,x),w(f,z),w(h,A),w(h,O),w(O,Z),w(O,j),Ee&&Ee.m(O,null),w(h,fe)},p(Ve,je){je&32&&ie(_,"fill",Ve[5][Ve[12]]),je&3&&a!==(a=Ve[10][Ve[1]]+"")&&dt(z,a),je&5&&N!==(N=Ve[6](Ve[10][Ve[2]])+"")&&dt(Z,N),Ae===(Ae=he(Ve))&&Ee?Ee.p(Ve,je):(Ee&&Ee.d(1),Ee=Ae&&Ae(Ve),Ee&&(Ee.c(),Ee.m(O,null)))},d(Ve){Ve&&T(h),Ee&&Ee.d()}}}function yA(u){let h,f,v=u[0],_=[];for(let x=0;x<v.length;x+=1)_[x]=uk(lk(u,v,x));return{c(){h=M("table"),f=M("tbody");for(let x=0;x<_.length;x+=1)_[x].c();this.h()},l(x){h=L(x,"TABLE",{class:!0});var a=R(h);f=L(a,"TBODY",{});var z=R(f);for(let A=0;A<_.length;A+=1)_[A].l(z);z.forEach(T),a.forEach(T),this.h()},h(){S(h,"class","legend svelte-1gvovsq")},m(x,a){Pe(x,h,a),w(h,f);for(let z=0;z<_.length;z+=1)_[z]&&_[z].m(f,null)},p(x,[a]){if(a&127){v=x[0];let z;for(z=0;z<v.length;z+=1){const A=lk(x,v,z);_[z]?_[z].p(A,a):(_[z]=uk(A),_[z].c(),_[z].m(f,null))}for(;z<_.length;z+=1)_[z].d(1);_.length=v.length}},i:nn,o:nn,d(x){x&&T(h),$c(_,x)}}}function gA(u,h,f){let v,{data:_}=h,{xKey:x="x"}=h,{yKey:a="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:A=!0}=h,{colors:O=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:N=null}=h;function Z(j){let fe;return N?fe=(j/v*100).toFixed(N)+"%":j/v*100<1?fe="<1%":fe=(j/v*100).toFixed(0)+"%",fe}return u.$$set=j=>{"data"in j&&f(0,_=j.data),"xKey"in j&&f(1,x=j.xKey),"yKey"in j&&f(2,a=j.yKey),"zKey"in j&&f(3,z=j.zKey),"topic_prev_available"in j&&f(4,A=j.topic_prev_available),"colors"in j&&f(5,O=j.colors),"decimals"in j&&f(7,N=j.decimals)},u.$$.update=()=>{u.$$.dirty&5&&(v=_.map(j=>j[a]).reduce((j,fe)=>j+fe,0)),u.$$.dirty&9&&_.map(j=>j[z]).reduce((j,fe)=>j+fe,0)},[_,x,a,z,A,O,Z,N]}class _A extends Jo{constructor(h){super(),Qo(this,h,gA,yA,$o,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function ck(u){let h,f,v,_;f=new q2({props:{data:u[0],yKey:u[4],colors:u[6]}});let x=u[8]&&hk(u);return{c(){h=M("div"),Nt(f.$$.fragment),v=be(),x&&x.c(),this.h()},l(a){h=L(a,"DIV",{class:!0,style:!0});var z=R(h);Ut(f.$$.fragment,z),v=xe(z),x&&x.l(z),z.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ie(h,"height",u[1]*.28+"px")},m(a,z){Pe(a,h,z),jt(f,h,null),w(h,v),x&&x.m(h,null),_=!0},p(a,z){const A={};z&1&&(A.data=a[0]),z&16&&(A.yKey=a[4]),z&64&&(A.colors=a[6]),f.$set(A),a[8]?x?x.p(a,z):(x=hk(a),x.c(),x.m(h,null)):x&&(x.d(1),x=null),(!_||z&2)&&ie(h,"height",a[1]*.28+"px")},i(a){_||(it(f.$$.fragment,a),_=!0)},o(a){ht(f.$$.fragment,a),_=!1},d(a){a&&T(h),qt(f),x&&x.d()}}}function hk(u){let h,f;return{c(){h=M("div"),f=ee(u[8]),this.h()},l(v){h=L(v,"DIV",{class:!0});var _=R(h);f=te(_,u[8]),_.forEach(T),this.h()},h(){S(h,"class","label svelte-1tebgpk")},m(v,_){Pe(v,h,_),w(h,f)},p(v,_){_&256&&dt(f,v[8])},d(v){v&&T(h)}}}function pk(u){let h,f,v,_,x,a;return f=new q2({props:{data:u[0],yKey:u[4],colors:u[6]}}),{c(){h=M("div"),Nt(f.$$.fragment),v=be(),_=M("div"),x=ee("2011 comparison not available"),this.h()},l(z){h=L(z,"DIV",{class:!0,style:!0});var A=R(h);Ut(f.$$.fragment,A),v=xe(A),_=L(A,"DIV",{class:!0,style:!0});var O=R(_);x=te(O,"2011 comparison not available"),O.forEach(T),A.forEach(T),this.h()},h(){S(_,"class","label svelte-1tebgpk"),ie(_,"background-color","#d8d8d8 "),ie(_,"color","#000000"),S(h,"class","chart svelte-1tebgpk"),ie(h,"height",u[1]*.28+"px")},m(z,A){Pe(z,h,A),jt(f,h,null),w(h,v),w(h,_),w(_,x),a=!0},p(z,A){const O={};A&1&&(O.data=z[0]),A&16&&(O.yKey=z[4]),A&64&&(O.colors=z[6]),f.$set(O),(!a||A&2)&&ie(h,"height",z[1]*.28+"px")},i(z){a||(it(f.$$.fragment,z),a=!0)},o(z){ht(f.$$.fragment,z),a=!1},d(z){z&&T(h),qt(f)}}}function bA(u){let h,f,v,_,x,a,z,A;f=new q2({props:{data:u[0],yKey:u[3],colors:u[6]}});let O=(u[4]&&u[5]||u[4]=="ni")&&ck(u),N=u[4]=="prev"&&!u[5]&&pk(u);return z=new _A({props:{data:u[0],xKey:u[2],yKey:u[3],zKey:u[4],topic_prev_available:u[5],decimals:u[7],colors:u[6]}}),{c(){h=M("div"),Nt(f.$$.fragment),v=be(),O&&O.c(),_=be(),N&&N.c(),x=be(),a=M("div"),Nt(z.$$.fragment),this.h()},l(Z){h=L(Z,"DIV",{class:!0,style:!0});var j=R(h);Ut(f.$$.fragment,j),j.forEach(T),v=xe(Z),O&&O.l(Z),_=xe(Z),N&&N.l(Z),x=xe(Z),a=L(Z,"DIV",{class:!0});var fe=R(a);Ut(z.$$.fragment,fe),fe.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ie(h,"padding-top","3px"),ie(h,"height",(u[4]?u[1]*.72:u[1])+"px"),S(a,"class","legend svelte-1tebgpk")},m(Z,j){Pe(Z,h,j),jt(f,h,null),Pe(Z,v,j),O&&O.m(Z,j),Pe(Z,_,j),N&&N.m(Z,j),Pe(Z,x,j),Pe(Z,a,j),jt(z,a,null),A=!0},p(Z,[j]){const fe={};j&1&&(fe.data=Z[0]),j&8&&(fe.yKey=Z[3]),j&64&&(fe.colors=Z[6]),f.$set(fe),(!A||j&18)&&ie(h,"height",(Z[4]?Z[1]*.72:Z[1])+"px"),Z[4]&&Z[5]||Z[4]=="ni"?O?(O.p(Z,j),j&48&&it(O,1)):(O=ck(Z),O.c(),it(O,1),O.m(_.parentNode,_)):O&&($u(),ht(O,1,1,()=>{O=null}),ec()),Z[4]=="prev"&&!Z[5]?N?(N.p(Z,j),j&48&&it(N,1)):(N=pk(Z),N.c(),it(N,1),N.m(x.parentNode,x)):N&&($u(),ht(N,1,1,()=>{N=null}),ec());const he={};j&1&&(he.data=Z[0]),j&4&&(he.xKey=Z[2]),j&8&&(he.yKey=Z[3]),j&16&&(he.zKey=Z[4]),j&32&&(he.topic_prev_available=Z[5]),j&128&&(he.decimals=Z[7]),j&64&&(he.colors=Z[6]),z.$set(he)},i(Z){A||(it(f.$$.fragment,Z),it(O),it(N),it(z.$$.fragment,Z),A=!0)},o(Z){ht(f.$$.fragment,Z),ht(O),ht(N),ht(z.$$.fragment,Z),A=!1},d(Z){Z&&T(h),qt(f),Z&&T(v),O&&O.d(Z),Z&&T(_),N&&N.d(Z),Z&&T(x),Z&&T(a),qt(z)}}}function xA(u,h,f){let{data:v}=h,{height:_=80}=h,{xKey:x="x"}=h,{yKey:a="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:A=!0}=h,{colors:O=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","#00695c"]}=h,{decimals:N=null}=h,{label:Z=null}=h;return u.$$set=j=>{"data"in j&&f(0,v=j.data),"height"in j&&f(1,_=j.height),"xKey"in j&&f(2,x=j.xKey),"yKey"in j&&f(3,a=j.yKey),"zKey"in j&&f(4,z=j.zKey),"topic_prev_available"in j&&f(5,A=j.topic_prev_available),"colors"in j&&f(6,O=j.colors),"decimals"in j&&f(7,N=j.decimals),"label"in j&&f(8,Z=j.label)},[v,_,x,a,z,A,O,N,Z]}class Ur extends Jo{constructor(h){super(),Qo(this,h,xA,bA,$o,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function wA(u){let h,f,v,_;return{c(){h=M("div"),f=ee("Back to top"),this.h()},l(x){h=L(x,"DIV",{class:!0});var a=R(h);f=te(a,"Back to top"),a.forEach(T),this.h()},h(){S(h,"class","back_to_start svelte-gazxb6"),Ei(h,"hidden",u[0])},m(x,a){Pe(x,h,a),w(h,f),v||(_=[Et(window,"scroll",u[2]),Et(h,"click",u[1])],v=!0)},p(x,[a]){a&1&&Ei(h,"hidden",x[0])},i:nn,o:nn,d(x){x&&T(h),v=!1,tc(_)}}}function EA(u,h,f){let{buttonVisibleOnPX:v=200}=h,_=!0;const x=()=>{document.body.scrollIntoView()},a=()=>document.documentElement||document.body,z=()=>{a().scrollTop>v?f(0,_=!1):f(0,_=!0)};return u.$$set=A=>{"buttonVisibleOnPX"in A&&f(3,v=A.buttonVisibleOnPX)},[_,x,z,v]}class SA extends Jo{constructor(h){super(),Qo(this,h,EA,wA,$o,{buttonVisibleOnPX:3})}}function fk(u,h,f){const v=u.slice();return v[51]=h[f],v[53]=f,v}function dk(u,h,f){const v=u.slice();return v[54]=h[f],v[53]=f,v}function mk(u,h,f){const v=u.slice();return v[56]=h[f],v}function vk(u,h,f){const v=u.slice();return v[54]=h[f],v[53]=f,v}function yk(u){let h,f,v,_,x,a,z=" &gt; ",A,O,N,Z,j,fe=u[0].place.name+"",he,Ae,Ee,Ve,je,Bt,Mt,mt,et,Ar,Sr,or,kt,Tt,Pr,Ot,zr,at,cr,Jr,hi,Tr,gn,Fe,sr,jn,sa,Ti,_n,ri,Ia,br,qn,Ja,Vr,Lt,Bi,Oi,ur,Jn=" &#x24D8; ",gi,ii,Fr,pi,Ai,ni,fi,hr,ar,bn=u[0].place.data.population.value[2021].all.toLocaleString()+"",Zn,po,fo,Ra,es,di,an,on,mo,la,fl=" &#x24D8; ",ts,Gn,xn,ua,Qn,ca,Nr,U,G,X=u[0].place.data.households.value[2021].all_households.toLocaleString()+"",re,le,ye,_e,H,ae,Se,Ue,Ke,Me,qe,ct,st,Re,nt,Ye,tt,Ft,Ge,Zt,lr,Ct,Qt,Jt,zi,$t,mr,dr,Kt=u[0].place.name+"",tr,Vi,ha,_i,Hi,wn,Xi,vr,Dn,Fi,Gr,$n=" &#x24D8; ",Cr,En,sn,rc,Ni,vo,ln,Kr,Pi,ai,yo,rs,bd=" &#x24D8; ",dl,ml,is,gp,ru,ns,go=(u[0].place.hectares>=.1?u[0].place.hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",iu,vl,eh,Sn,Si,Mn,ke,Ui,Ln=" &#x24D8; ",Hr,pa,Rn,Ci,nu,au,_p=(u[0].place.data.population.value[2021].all/u[0].place.hectares>=.1?(u[0].place.data.population.value[2021].all/u[0].place.hectares).toFixed(1):"<0.1")+"",ff,bp,df,xp,Bs,ou,_o,th,ic,nc,yl,oi,wp,bo=u[0].place.name+"",as,gl,xo,Os,_l,Bn,Wi,Qa,os,Lr,ac,mf=" &#x24D8; ",vf,su,lu,yf,$a,wo,bl,gf,xl,Vs,wl,Ep,ss,Ba,_f,Eo,kr,rh,xd,eo,bf,Fs,to,ro,uu,ls,xf=" &#x24D8; ",oc,So,cu,hu,ea,ih,wf,Ef,Oa,nh,ah,Ns,Us,us,El,Sp,Sf,Sl,Va,kp,sc=u[0].place.name+"",oh,lc,uc,kl,Qr,fa,da,On,Xt,jr,Vn,Ip=" &#x24D8; ",pu,cs,cc,wd,hs,Il,ps,ji,ko,kf,qr,ot,qi,sh,Io,fs=" &#x24D8; ",ma,Tl,Je,Tp,js,hc,Fa,va,ds,lh,Zi,kn,To,pc,Al,Ed=" &#x24D8; ",io,Fn,Wt,Ao,Kn,Yi,zl,qs,Hn,ta,fc,yt,pt,Na,un,no,In,ra,ao,uh,xr=u[0].place.name+"",Ji,If,zo,Ap,ms,bi,Ta,cn,oo,fu,vs,Sd=" &#x24D8; ",du,so,Pl,Zs,Ua,mu,Gs,ja,Ks,dc,Po,Aa,n,s,o,c=" &#x24D8; ",m,E,k,P,B,q,Y,Q,$,ce,se,de,ne,me,ge,Ie=" &#x24D8; ",Be,Ce,Oe,Ze,Xe,We,ut,wt,bt,St,pr,lt,At,Rt,zt,Dt,Ht,It,xt,Qi,si=u[0].place.name+"",Tn,hn,Xr,ki,ya,li,ia,xi,An,qa,ys,ch=" &#x24D8; ",Hs,Co,gs,Do,_s,Za,$i,bs,za,Cl,rr,Di,Mi,Dl,mc,Tf=" &#x24D8; ",kd,xs,vu,yu,Xs,zp,vc,ga,hh,mv,gu,Ws,_u,Yy,yc,m0=" &#x24D8; ",Af,ph,Mo,Pp,Cp,Id,Jy,Qy,fh,u_,$y,bu,Dp,Ga,zf,Gi,Pf,gc,Lo,Cf,_c=u[0].place.name+"",Td,vv,xu,Ad,zd,lo,Ro,Ys,ws,eg,bc,tg=" &#x24D8; ",Es,rg,Mp,Lp,ig,dh,wu,ng,ag,xc,yv,Eu,Js,Ka,og,wc,Pd=" &#x24D8; ",Ss,Rp,Bp,sg,Ml,Df,lg,ug,mh,cg,Ll,wi,Qs,gv,vh,v0=" &#x24D8; ",_v,hg,Op,Vp,bv,Fp,Cd,Np,xv,Ec,Mf,wr,ks,na,yh,gh,y0=" &#x24D8; ",pg,Up,jp,fg,qp,Dd,dg,mg,Rl,Zp,wv,_h,Gp,Bl,Kp,Lf,Hp,$s,en,bh,zn=u[0].place.name+"",Xp,Rf,Xn,Ev,Sv,aa,Ol,Bo,el,vg,xh,Bf=" &#x24D8; ",Md,wh,Eh,yg,Sh,Of,kv,Iv,kh,gg,Vl,Is,Ts,Tv,Su,Av=" &#x24D8; ",Vf,tl,Wp,_g,Yp,ku,Ld,zv,Iu,Pv,Fl,rl,Tu,bg,Au,xg=" &#x24D8; ",wg,il,Nl,Dr,Jp,Qp,Ih,Eg,Th,Sg,zu,nl,Pu,kg,Ah,c_=" &#x24D8; ",Cv,zh,Cu,Sc,kc,Du,Dv,Ki,Mr,Mv,Ul,As,jl,Lv,Ic,$p=" &#x24D8; ",Tc,Ph,mi,ef,uo,Ch,Ff,Rd,zs,ql,Zl,Ps,Mu,pn,Oo,h_=" &#x24D8; ",e,t,i,l,p,d,y,I,C,D,V,F,K,W,oe,ue,ve,pe,we,Te,De=u[0].place.name+"",Le,Ne,He,Qe,gt,$e,vt,rt,Vt,Pt,ft,ir=" &#x24D8; ",Gt,er,_t,yr,Rr,ui,vi,$r,Zr,tn,ei,yi,ci,Wn,ti,Nn=" &#x24D8; ",nr,Ir,gr,fr,fn,dn,Wr,Li,Ri,_r,Vo,co,al,Yr,Ha,Pn,Gl,Ac,Dh,Xa,Wa,Nf,Lu=u[0].place.name+"",Mh,Uf,zc,Kl,tf,_a,Pa,Ca,Fo,jf,Hl,Bd=" &#x24D8; ",qf,Xl,Wl,rf,Ru,Bu,Zf,Lh,ol,Pc,Cc,Rh,nf,Ig,Od,Dc,Mc,Yl,Ou,Ii,Cs,Bh,ba,Vd,Gf=u[0].place.name+"",af,sl,Lc,of,Kf,Ya,ll,Ds,No,Rv,Oh,p_=" &#x24D8; ",Bv,Vh,Yn,Hf,Fh,Uo,Tg,Ov,jo,Nh,Vu,Uh,Fu,Ag,Vv,Rc,jh,Ms,qh,Jl,Fv,Nu,Ls,Nv,sf=u[0].place.name+"",Fd,Uv,Zh,jv,lf,xa,Rs,ul,Ql,zg,uf,g0=" &#x24D8; ",Pg,cf,mn,Cg,Dg,cl,Xf,qv,hf,Zv,_0,b0,x0,w0,E0,S0,k0,I0,T0,A0,Nd,Mg,z0,P0,Wf,C0,Gh,Uu,Kh,D0,Ud,rI=" &#x24D8; ",M0,jd,qd,L0,Zd,Lg,R0,B0,Yf,O0,Hh,ju,Xh,V0,Gd,iI=" &#x24D8; ",F0,Kd,Hd,N0,Xd,Rg,U0,j0,Jf,q0,Wh,qu,Yh,Z0,Wd,nI=" &#x24D8; ",G0,Yd,Jd,K0,Qd,Bg,H0,X0,Qf,W0,Jh,Zu,Qh,Y0,$d,aI=" &#x24D8; ",J0,em,tm,Q0,rm,Og,$0,e1,$f,Z2,t1,ed,im,Bc,Gv,r1,i1,td,Oc,n1,Vg=u[0].place.name+"",f_,a1,Kv,o1,s1,ho,$h,Gu,ep,l1,nm,oI=" &#x24D8; ",u1,am,om,c1,sm,Fg,h1,p1,rd,f1,tp,Ku,rp,d1,lm,sI=" &#x24D8; ",m1,um,cm,v1,hm,Ng,y1,g1,id,_1,Ug,b1,ip,Hu,np,x1,pm,lI=" &#x24D8; ",w1,fm,dm,E1,mm,jg,S1,k1,nd,I1,ap,Xu,op,T1,vm,uI=" &#x24D8; ",A1,ym,gm,z1,_m,qg,P1,C1,ad,G2,D1,od,bm,Vc,Hv,M1,L1,sd,Fc,R1,Zg=u[0].place.name+"",d_,B1,Xv,O1,V1,$l,sp,Wu,lp,F1,xm,cI=" &#x24D8; ",N1,wm,Em,U1,Sm,Gg,j1,q1,ld,Z1,up,Yu,cp,G1,km,hI=" &#x24D8; ",K1,Im,Tm,H1,Am,Kg,X1,W1,ud,Y1,Hg,K2,vn,J1,H2;function X2(J,ze){return J[0].place.parents[0]?IA:kA}let m_=X2(u),Nc=m_(u);function W2(J,ze){return J[0].place.type=="ni"?AA:TA}let v_=W2(u),Uc=v_(u),qo=u[0].place.type!="ni"&&_k(u);function Y2(J,ze){return J[4]?PA:zA}let y_=Y2(u),jc=y_(u);kt=new cT({props:{search_data:u[0].search_data,group:"typestr",search:!0}}),kt.$on("select",u[14]);function J2(J,ze){return J[0].place.type=="ni"||J[0].place.type=="ctry"?DA:CA}let g_=J2(u),qc=g_(u),Zo=u[4]&&bk(u),wa=u[0].place.type!="ni"&&xk(u),Ea=u[4]&&u[2]&&Sk(u),Sa=u[0].place.type!="ni"&u[9]&&kk(u),ka=u[4]&&u[2]&&Ik(u);function Q2(J,ze){return J[0].place.type!="ni"?WA:XA}let __=Q2(u),Zc=__(u);function pI(J){u[30](J)}let $2={location:{bounds:u[0].place.bounds},options:{fitBoundsOptions:{padding:20}},style:o5,$$slots:{default:[JA]},$$scope:{ctx:u}};u[6]!==void 0&&($2.map=u[6]),qe=new dT({props:$2}),pf.push(()=>l5(qe,"map",pI));function ex(J,ze){return J[0].place.parents[0]?$A:QA}let b_=ex(u),Gc=b_(u);function tx(J,ze){return J[0].place.children[0]?tz:ez}let x_=tx(u),Kc=x_(u);function rx(J,ze){return J[0].place.type!="ni"&J[0].place.type!="lgd"?nz:J[0].place.type!="ni"&J[0].place.type=="lgd"?iz:rz}let w_=rx(u),Hc=w_(u),Go=u[0].place.type!="ni"&&u[9]&&Pk(u);Vs=new aA({props:{data:u[0].place&&u[12](["age"]),zKey:u[10]}});let Ko=(u[9]&&u[11]||u[2]&&u[11]&&u[4])&&Ck(u);return Ba=new hA({props:{data:u[0].place&&u[12](["age"]),zKey:u[10]}}),eo=new Ur({props:{data:u[0].place&&u[12](["sex"]),zKey:u[10],label:u[11]}}),Oa=new Ur({props:{data:u[0].place&&u[12](["hh_size"]),zKey:u[10],label:u[11]}}),ko=new Ur({props:{data:u[0].place&&u[12](["cob"]),zKey:u[10],label:u[11]}}),ds=new Ur({props:{data:u[0].place&&u[12](["passport"]),zKey:u[10],label:u[11]}}),Hn=new Ur({props:{data:u[0].place&&u[12](["natid"]),zKey:u[10],label:u[11]}}),Ks=new Ur({props:{data:u[0].place&&u[12](["mainlang"]),zKey:u[10],label:u[11]}}),$=new Ur({props:{data:u[0].place&&u[12](["irish"]),zKey:u[10],label:u[11]}}),bt=new Ur({props:{data:u[0].place&&u[12](["ulster"]),zKey:u[10],label:u[11]}}),za=new Ur({props:{data:u[0].place&&u[12](["religion"]),zKey:u[10],label:u[11]}}),hh=new Ur({props:{data:u[0].place&&u[12](["religion_or_religion_brought_up_in"]),zKey:u[10],label:u[11]}}),fh=new Ur({props:{data:u[0].place&&u[12](["ethnic"]),zKey:u[10],label:u[11]}}),xc=new Ur({props:{data:u[0].place&&u[12](["general_health"]),zKey:u[10],label:u[11]}}),mh=new Ur({props:{data:u[0].place&&u[12](["long_term_disability"]),zKey:u[10],label:u[11]}}),Ec=new Ur({props:{data:u[0].place&&u[12](["number_of_long_term_health"]),zKey:u[10],label:u[11]}}),Rl=new Ur({props:{data:u[0].place&&u[12](["provision_care"]),zKey:u[10],label:u[11]}}),kh=new Ur({props:{data:u[0].place&&u[12](["accommodation_type"]),zKey:u[10],label:u[11]}}),Iu=new Ur({props:{data:u[0].place&&u[12](["number_of_adaptations"]),zKey:u[10],label:u[11]}}),Th=new Ur({props:{data:u[0].place&&u[12](["central_heating"]),zKey:u[10],label:u[11]}}),Mr=new Ur({props:{data:u[0].place&&u[12](["renewable_energy"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),zs=new Ur({props:{data:u[0].place&&u[12](["hh_tenure"]),zKey:u[10],label:u[11]}}),C=new Ur({props:{data:u[0].place&&u[12](["car_or_van"]),zKey:u[10],label:u[11]}}),Zr=new Ur({props:{data:u[0].place&&u[12](["number_of_dependent_children_households"]),zKey:u[10],label:u[11]}}),Ri=new Ur({props:{data:u[0].place&&u[12](["household_composition_households"]),zKey:u[10],label:u[11]}}),ol=new Ur({props:{data:u[0].place&&u[12](["marital_and_civil_partnership_status"]),zKey:u[10],label:u[11]}}),jo=new Ur({props:{data:u[0].place&&u[12](["sexual_orientation_by_broad_age_band"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),Wf=new Ur({props:{data:u[0].place&&u[12](["highest_level_of_qualifications"]),zKey:u[10],label:u[11]}}),Yf=new Ur({props:{data:u[0].place&&u[12](["economic_activity"]),zKey:u[10],label:u[11]}}),Jf=new Ur({props:{data:u[0].place&&u[12](["hours_worked"]),zKey:u[10],label:u[11]}}),Qf=new Ur({props:{data:u[0].place&&u[12](["industry_of_employment"]),zKey:u[10],label:u[11]}}),$f=new Ur({props:{data:u[0].place&&u[12](["occupation_1_digit"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),rd=new Ur({props:{data:u[0].place&&u[12](["method_of_travel_to_work"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),id=new Ur({props:{data:u[0].place&&u[12](["method_of_travel_to_study"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),nd=new Ur({props:{data:u[0].place&&u[12](["distance_travelled_to_work"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),ad=new Ur({props:{data:u[0].place&&u[12](["distance_travelled_to_study"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),ld=new Ur({props:{data:u[0].place&&u[12](["address_one_year_ago"]),zKey:u[10],label:u[11]}}),ud=new Ur({props:{data:u[0].place&&u[12](["year_of_arrival"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),{c(){h=M("div"),f=M("div"),v=M("span"),_=M("a"),x=ee("Home"),a=new D2(!1),A=be(),Nc.c(),O=be(),N=M("br"),Z=be(),j=M("span"),he=ee(fe),Ae=be(),Ee=M("div"),Ve=ee(`Click for: \r
		\r
					`),Uc.c(),je=be(),qo&&qo.c(),Bt=be(),jc.c(),Mt=be(),mt=M("div"),et=M("div"),Ar=M("b"),Sr=ee("Search for your area:"),or=be(),Nt(kt.$$.fragment),Tt=be(),Pr=M("script"),Ot=ee(`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),zr=be(),at=M("div"),cr=M("button"),Jr=ee("Print / PDF"),hi=be(),Tr=M("button"),gn=ee("Menu"),Fe=be(),sr=M("button"),jn=ee("Share"),sa=be(),Ti=M("div"),_n=M("div"),ri=M("h3"),Ia=ee("Overview"),br=be(),qc.c(),qn=be(),Zo&&Zo.c(),Ja=be(),Vr=M("div"),Lt=M("div"),Bi=M("div"),Oi=ee("Population "),ur=M("span"),gi=be(),ii=M("div"),Fr=M("div"),pi=ee(`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),Ai=M("a"),ni=M("strong"),fi=ee("Statistical bulletins"),hr=be(),ar=M("span"),Zn=ee(bn),po=M("br"),fo=be(),wa&&wa.c(),Ra=be(),Ea&&Ea.c(),es=be(),di=M("div"),an=M("div"),on=M("div"),mo=ee("Households"),la=M("span"),ts=be(),Gn=M("div"),xn=M("div"),ua=ee(`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),Qn=M("a"),ca=M("strong"),Nr=ee("Statistical bulletins"),U=be(),G=M("span"),re=ee(X),le=M("br"),ye=be(),Sa&&Sa.c(),_e=be(),ka&&ka.c(),H=be(),ae=M("div"),Se=M("div"),Ue=M("h3"),Zc.c(),Ke=be(),Me=M("div"),Nt(qe.$$.fragment),st=be(),Re=M("div"),Gc.c(),nt=be(),Ye=M("div"),Kc.c(),Ft=be(),Ge=M("div"),Zt=M("div"),lr=M("h2"),Ct=M("button"),Qt=M("span"),Jt=ee("Area Information"),zi=be(),$t=M("div"),mr=M("div"),dr=ee("Census 2021 - "),tr=ee(Kt),Vi=ee(" - "),ha=M("span"),_i=ee("Location, Area and Population density"),Hi=be(),wn=M("div"),Xi=M("div"),vr=M("div"),Dn=M("div"),Fi=ee("Location"),Gr=M("span"),Cr=be(),En=M("div"),sn=M("div"),rc=ee("Information about the area including its geographical hierarchy."),Ni=be(),vo=M("br"),Hc.c(),ln=be(),Kr=M("div"),Pi=M("div"),ai=M("div"),yo=ee("Area "),rs=M("span"),dl=be(),ml=M("div"),is=M("div"),gp=ee("Area is measured in hectares (ha), it is rounded to the nearest whole number."),ru=be(),ns=M("span"),iu=ee(go),vl=ee(" ha"),eh=be(),Sn=M("div"),Si=M("div"),Mn=M("div"),ke=ee("Population density"),Ui=M("span"),Hr=be(),pa=M("div"),Rn=M("div"),Ci=ee("Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),nu=be(),au=M("span"),ff=ee(_p),bp=be(),Go&&Go.c(),xp=be(),Bs=M("div"),ou=M("h2"),_o=M("button"),th=M("span"),ic=ee("Demography"),nc=be(),yl=M("div"),oi=M("div"),wp=ee("Census 2021 - "),as=ee(bo),gl=ee(" - "),xo=M("span"),Os=ee("Broad age bands (years), Sex, Household size"),_l=be(),Bn=M("div"),Wi=M("div"),Qa=M("div"),os=M("div"),Lr=ee("Broad age bands (years) "),ac=M("span"),vf=be(),su=M("div"),lu=M("div"),yf=ee(`A grouping of ages where a person’s age is their age\r
									at their last birthday on or prior to census day. `),$a=M("a"),wo=M("strong"),bl=ee("Statistical bulletins"),gf=be(),xl=M("div"),Nt(Vs.$$.fragment),wl=be(),Ko&&Ko.c(),Ep=be(),ss=M("div"),Nt(Ba.$$.fragment),_f=be(),Eo=M("div"),kr=M("div"),rh=ee("Sex"),xd=be(),Nt(eo.$$.fragment),bf=be(),Fs=M("div"),to=M("div"),ro=M("div"),uu=ee("Household size"),ls=M("span"),oc=be(),So=M("div"),cu=M("div"),hu=ee("The number of usual residents in the household.      "),ea=M("a"),ih=M("strong"),wf=ee("Statistical bulletins"),Ef=be(),Nt(Oa.$$.fragment),ah=be(),Ns=M("div"),Us=M("h2"),us=M("button"),El=M("span"),Sp=ee("Country of Birth & Nationality"),Sf=be(),Sl=M("div"),Va=M("div"),kp=ee("Census 2021 - "),oh=ee(sc),lc=ee(" - "),uc=M("span"),kl=ee("Country of birth, Passport(s) held, National identity (person based)"),Qr=be(),fa=M("div"),da=M("div"),On=M("div"),Xt=M("div"),jr=ee("Country of birth"),Vn=M("span"),pu=be(),cs=M("div"),cc=M("div"),wd=ee("The country in which a person was born. "),hs=M("a"),Il=M("strong"),ps=ee("Statistical bulletins"),ji=be(),Nt(ko.$$.fragment),kf=be(),qr=M("div"),ot=M("div"),qi=M("div"),sh=ee("Passport(s) held"),Io=M("span"),ma=be(),Tl=M("div"),Je=M("div"),Tp=ee("Passport or passports that an individual holds. "),js=M("a"),hc=M("strong"),Fa=ee("Statistical bulletins"),va=be(),Nt(ds.$$.fragment),lh=be(),Zi=M("div"),kn=M("div"),To=M("div"),pc=ee("National identity (person based)"),Al=M("span"),io=be(),Fn=M("div"),Wt=M("div"),Ao=ee(`The nationality or nationalities that the person\r
									identifies with. `),Kn=M("a"),Yi=M("strong"),zl=ee("Statistical bulletins"),qs=be(),Nt(Hn.$$.fragment),fc=be(),yt=M("div"),pt=M("h2"),Na=M("button"),un=M("span"),no=ee("Language"),In=be(),ra=M("div"),ao=M("div"),uh=ee("Census 2021 - "),Ji=ee(xr),If=ee(" - "),zo=M("span"),Ap=ee("Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),ms=be(),bi=M("div"),Ta=M("div"),cn=M("div"),oo=M("div"),fu=ee("Main language"),vs=M("span"),du=be(),so=M("div"),Pl=M("div"),Zs=ee(`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Ua=M("a"),mu=M("strong"),Gs=ee("Statistical bulletins"),ja=be(),Nt(Ks.$$.fragment),dc=be(),Po=M("div"),Aa=M("div"),n=M("div"),s=ee("Knowledge of Irish"),o=M("span"),m=be(),E=M("div"),k=M("div"),P=ee(`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),B=M("a"),q=M("strong"),Y=ee("Statistical bulletins"),Q=be(),Nt($.$$.fragment),ce=be(),se=M("div"),de=M("div"),ne=M("div"),me=ee("Knowledge of Ulster-Scots"),ge=M("span"),Be=be(),Ce=M("div"),Oe=M("div"),Ze=ee(`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Xe=M("a"),We=M("strong"),ut=ee("Statistical bulletins"),wt=be(),Nt(bt.$$.fragment),pr=be(),lt=M("div"),At=M("h2"),Rt=M("button"),zt=M("span"),Dt=ee("Religion & Ethnicity"),Ht=be(),It=M("div"),xt=M("div"),Qi=ee("Census 2021 - "),Tn=ee(si),hn=ee(" - "),Xr=M("span"),ki=ee("Religion, Religion or religion brought up in, Ethnic group"),ya=be(),li=M("div"),ia=M("div"),xi=M("div"),An=M("div"),qa=ee("Religion"),ys=M("span"),Hs=be(),Co=M("div"),gs=M("div"),Do=ee(`Religion, religious denomination or body the person\r
									indicated they belong to. `),_s=M("a"),Za=M("strong"),$i=ee("Statistical bulletins"),bs=be(),Nt(za.$$.fragment),Cl=be(),rr=M("div"),Di=M("div"),Mi=M("div"),Dl=ee("Religion or religion brought up in"),mc=M("span"),kd=be(),xs=M("div"),vu=M("div"),yu=ee("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Xs=M("a"),zp=M("strong"),vc=ee("Statistical bulletins"),ga=be(),Nt(hh.$$.fragment),mv=be(),gu=M("div"),Ws=M("div"),_u=M("div"),Yy=ee("Ethnic group"),yc=M("span"),Af=be(),ph=M("div"),Mo=M("div"),Pp=ee("Person’s ethnic group as declared in the Census. "),Cp=M("a"),Id=M("strong"),Jy=ee("Statistical bulletins"),Qy=be(),Nt(fh.$$.fragment),$y=be(),bu=M("div"),Dp=M("h2"),Ga=M("button"),zf=M("span"),Gi=ee("Health & Care"),Pf=be(),gc=M("div"),Lo=M("div"),Cf=ee("Census 2021 - "),Td=ee(_c),vv=ee(" - "),xu=M("span"),Ad=ee("General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),zd=be(),lo=M("div"),Ro=M("div"),Ys=M("div"),ws=M("div"),eg=ee("General health"),bc=M("span"),Es=M("br"),rg=be(),Mp=M("div"),Lp=M("div"),ig=ee(`General health is a self-assessment of a\r
											person’s general state of health. It is not\r
											based over any specified period of time.\r
											`),dh=M("a"),wu=M("strong"),ng=ee("Statistical bulletins"),ag=be(),Nt(xc.$$.fragment),yv=be(),Eu=M("div"),Js=M("div"),Ka=M("div"),og=ee("Long-term health problem or disability"),wc=M("span"),Ss=be(),Rp=M("div"),Bp=M("div"),sg=ee("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Ml=M("a"),Df=M("strong"),lg=ee("Statistical bulletins"),ug=be(),Nt(mh.$$.fragment),cg=be(),Ll=M("div"),wi=M("div"),Qs=M("div"),gv=ee("Long-term health conditions"),vh=M("span"),_v=M("br"),hg=be(),Op=M("div"),Vp=M("div"),bv=ee(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),Fp=M("a"),Cd=M("strong"),Np=ee("Statistical bulletins"),xv=be(),Nt(Ec.$$.fragment),Mf=be(),wr=M("div"),ks=M("div"),na=M("div"),yh=ee("Unpaid care"),gh=M("span"),pg=be(),Up=M("div"),jp=M("div"),fg=ee(`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),qp=M("a"),Dd=M("strong"),dg=ee("Statistical bulletins"),mg=be(),Nt(Rl.$$.fragment),wv=be(),_h=M("div"),Gp=M("h2"),Bl=M("button"),Kp=M("span"),Lf=ee("Housing & Accommodation"),Hp=be(),$s=M("div"),en=M("div"),bh=ee("Census 2021 - "),Xp=ee(zn),Rf=ee(" - "),Xn=M("span"),Ev=ee("Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),Sv=be(),aa=M("div"),Ol=M("div"),Bo=M("div"),el=M("div"),vg=ee("Accommodation type"),xh=M("span"),Md=be(),wh=M("div"),Eh=M("div"),yg=ee("The type of accommodation occupied by a household. "),Sh=M("a"),Of=M("strong"),kv=ee("Statistical bulletins"),Iv=be(),Nt(kh.$$.fragment),gg=be(),Vl=M("div"),Is=M("div"),Ts=M("div"),Tv=ee("Household adaptations"),Su=M("span"),Vf=be(),tl=M("div"),Wp=M("div"),_g=ee(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Yp=M("a"),ku=M("strong"),Ld=ee("Statistical bulletins"),zv=be(),Nt(Iu.$$.fragment),Pv=be(),Fl=M("div"),rl=M("div"),Tu=M("div"),bg=ee("Central heating"),Au=M("span"),wg=be(),il=M("div"),Nl=M("div"),Dr=ee(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),Jp=M("a"),Qp=M("strong"),Ih=ee("Statistical bulletins"),Eg=be(),Nt(Th.$$.fragment),Sg=be(),zu=M("div"),nl=M("div"),Pu=M("div"),kg=ee("Renewable energy systems"),Ah=M("span"),Cv=be(),zh=M("div"),Cu=M("div"),Sc=ee(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),kc=M("a"),Du=M("strong"),Dv=ee("Statistical bulletins"),Ki=be(),Nt(Mr.$$.fragment),Mv=be(),Ul=M("div"),As=M("div"),jl=M("div"),Lv=ee("Household tenure"),Ic=M("span"),Tc=be(),Ph=M("div"),mi=M("div"),ef=ee(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),uo=M("a"),Ch=M("strong"),Ff=ee("Statistical bulletins"),Rd=be(),Nt(zs.$$.fragment),ql=be(),Zl=M("div"),Ps=M("div"),Mu=M("div"),pn=ee("Car or van availability"),Oo=M("span"),e=be(),t=M("div"),i=M("div"),l=ee(`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),p=M("a"),d=M("strong"),y=ee("Statistical bulletins"),I=be(),Nt(C.$$.fragment),V=be(),F=M("div"),K=M("h2"),W=M("button"),oe=M("span"),ue=ee("Household Structure"),ve=be(),pe=M("div"),we=M("div"),Te=ee("Census 2021 - "),Le=ee(De),Ne=ee(" - "),He=M("span"),Qe=ee("Number of dependent children, Household composition"),gt=be(),$e=M("div"),vt=M("div"),rt=M("div"),Vt=M("div"),Pt=ee("Number of dependent children"),ft=M("span"),Gt=be(),er=M("div"),_t=M("div"),yr=ee("Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),Rr=M("a"),ui=M("strong"),vi=ee("Statistical bulletins"),$r=be(),Nt(Zr.$$.fragment),tn=be(),ei=M("div"),yi=M("div"),ci=M("div"),Wn=ee("Household composition"),ti=M("span"),nr=be(),Ir=M("div"),gr=M("div"),fr=ee(`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),fn=M("a"),dn=M("strong"),Wr=ee("Statistical bulletins"),Li=be(),Nt(Ri.$$.fragment),_r=be(),Vo=M("div"),al=be(),Yr=M("div"),Ha=M("h2"),Pn=M("button"),Gl=M("span"),Ac=ee("Marital & Civil Partnership Status"),Dh=be(),Xa=M("div"),Wa=M("div"),Nf=ee("Census 2021 - "),Mh=ee(Lu),Uf=ee(" - "),zc=M("span"),Kl=ee("Marital and civil partnership status"),tf=be(),_a=M("div"),Pa=M("div"),Ca=M("div"),Fo=M("div"),jf=ee("Marital and civil partnership status"),Hl=M("span"),qf=be(),Xl=M("div"),Wl=M("div"),rf=ee("Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),Ru=M("a"),Bu=M("strong"),Zf=ee("Statistical bulletins"),Lh=be(),Nt(ol.$$.fragment),Pc=be(),Cc=M("div"),Rh=be(),nf=M("div"),Od=be(),Dc=M("div"),Mc=M("h2"),Yl=M("button"),Ou=M("span"),Ii=ee("Sexual Orientation"),Cs=be(),Bh=M("div"),ba=M("div"),Vd=ee("Census 2021 - "),af=ee(Gf),sl=ee(" - "),Lc=M("span"),of=ee("Sexual orientation"),Kf=be(),Ya=M("div"),ll=M("div"),Ds=M("div"),No=M("div"),Rv=ee("Sexual orientation"),Oh=M("span"),Bv=be(),Vh=M("div"),Yn=M("div"),Hf=ee("Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),Fh=M("a"),Uo=M("strong"),Tg=ee("Statistical bulletins"),Ov=be(),Nt(jo.$$.fragment),Nh=be(),Vu=M("div"),Uh=be(),Fu=M("div"),Vv=be(),Rc=M("div"),jh=M("h2"),Ms=M("button"),qh=M("span"),Jl=ee("Labour Market & Qualifications"),Fv=be(),Nu=M("div"),Ls=M("div"),Nv=ee("Census 2021 - "),Fd=ee(sf),Uv=ee(" - "),Zh=M("span"),jv=ee("Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),lf=be(),xa=M("div"),Rs=M("div"),ul=M("div"),Ql=M("div"),zg=ee("Highest level of qualifications"),uf=M("span"),Pg=be(),cf=M("div"),mn=M("div"),Cg=ee(`The highest level of qualification categories are as follows:\r
										`),Dg=M("br"),cl=ee(`\r
                                        • No qualifications;\r
										`),Xf=M("br"),qv=ee(`\r
                                        • Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),hf=M("br"),Zv=ee(`\r
                                        • Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),_0=M("br"),b0=ee(`\r
                                        • Apprenticeship;\r
										`),x0=M("br"),w0=ee(`\r
                                        • Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),E0=M("br"),S0=ee(`\r
                                        • Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),k0=M("br"),I0=ee(`\r
                                        • Other: Other qualifications, equivalent unknown.\r
                                        `),T0=M("br"),A0=ee(`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Nd=M("a"),Mg=M("strong"),z0=ee("Statistical bulletins"),P0=be(),Nt(Wf.$$.fragment),C0=be(),Gh=M("div"),Uu=M("div"),Kh=M("div"),D0=ee("Economic activity"),Ud=M("span"),M0=be(),jd=M("div"),qd=M("div"),L0=ee("Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),Zd=M("a"),Lg=M("strong"),R0=ee("Statistical bulletins"),B0=be(),Nt(Yf.$$.fragment),O0=be(),Hh=M("div"),ju=M("div"),Xh=M("div"),V0=ee("Hours worked per week"),Gd=M("span"),F0=be(),Kd=M("div"),Hd=M("div"),N0=ee("The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),Xd=M("a"),Rg=M("strong"),U0=ee("Statistical bulletins"),j0=be(),Nt(Jf.$$.fragment),q0=be(),Wh=M("div"),qu=M("div"),Yh=M("div"),Z0=ee("Industry of employment"),Wd=M("span"),G0=be(),Yd=M("div"),Jd=M("div"),K0=ee("The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),Qd=M("a"),Bg=M("strong"),H0=ee("Statistical bulletins"),X0=be(),Nt(Qf.$$.fragment),W0=be(),Jh=M("div"),Zu=M("div"),Qh=M("div"),Y0=ee("Occupation"),$d=M("span"),J0=be(),em=M("div"),tm=M("div"),Q0=ee("The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),rm=M("a"),Og=M("strong"),$0=ee("Statistical bulletins"),e1=be(),Nt($f.$$.fragment),t1=be(),ed=M("div"),im=M("h2"),Bc=M("button"),Gv=M("span"),r1=ee("Travel to Work or Study"),i1=be(),td=M("div"),Oc=M("div"),n1=ee("Census 2021 - "),f_=ee(Vg),a1=ee(" - "),Kv=M("span"),o1=ee("Method of travel to work or study, Distance to place of work or study"),s1=be(),ho=M("div"),$h=M("div"),Gu=M("div"),ep=M("div"),l1=ee("Method of travel to work"),nm=M("span"),u1=be(),am=M("div"),om=M("div"),c1=ee(`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),sm=M("a"),Fg=M("strong"),h1=ee("Statistical bulletins"),p1=be(),Nt(rd.$$.fragment),f1=be(),tp=M("div"),Ku=M("div"),rp=M("div"),d1=ee("Method of travel to study"),lm=M("span"),m1=be(),um=M("div"),cm=M("div"),v1=ee(`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),hm=M("a"),Ng=M("strong"),y1=ee("Statistical bulletins"),g1=be(),Nt(id.$$.fragment),_1=be(),Ug=M("div"),b1=be(),ip=M("div"),Hu=M("div"),np=M("div"),x1=ee("Distance to place of work"),pm=M("span"),w1=be(),fm=M("div"),dm=M("div"),E1=ee("The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),mm=M("a"),jg=M("strong"),S1=ee("Statistical bulletins"),k1=be(),Nt(nd.$$.fragment),I1=be(),ap=M("div"),Xu=M("div"),op=M("div"),T1=ee("Distance to place of study"),vm=M("span"),A1=be(),ym=M("div"),gm=M("div"),z1=ee("The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),_m=M("a"),qg=M("strong"),P1=ee("Statistical bulletins"),C1=be(),Nt(ad.$$.fragment),D1=be(),od=M("div"),bm=M("h2"),Vc=M("button"),Hv=M("span"),M1=ee("Migration"),L1=be(),sd=M("div"),Fc=M("div"),R1=ee("Census 2021 - "),d_=ee(Zg),B1=ee(" - "),Xv=M("span"),O1=ee("Address one year ago, Year of arrival to live in NI"),V1=be(),$l=M("div"),sp=M("div"),Wu=M("div"),lp=M("div"),F1=ee("Address one year ago"),xm=M("span"),N1=be(),wm=M("div"),Em=M("div"),U1=ee("Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),Sm=M("a"),Gg=M("strong"),j1=ee("Statistical bulletins"),q1=be(),Nt(ld.$$.fragment),Z1=be(),up=M("div"),Yu=M("div"),cp=M("div"),G1=ee("Year of arrival to live in NI"),km=M("span"),K1=be(),Im=M("div"),Tm=M("div"),H1=ee("The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Am=M("a"),Kg=M("strong"),X1=ee("Statistical bulletins"),W1=be(),Nt(ud.$$.fragment),Y1=be(),Hg=M("div"),this.h()},l(J){h=L(J,"DIV",{class:!0});var ze=R(h);f=L(ze,"DIV",{});var hp=R(f);v=L(hp,"SPAN",{class:!0});var Xc=R(v);_=L(Xc,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var Wv=R(_);x=te(Wv,"Home"),Wv.forEach(T),a=M2(Xc,!1),A=xe(Xc),Nc.l(Xc),O=xe(Xc),Xc.forEach(T),N=L(hp,"BR",{}),Z=xe(hp),j=L(hp,"SPAN",{class:!0});var Yv=R(j);he=te(Yv,fe),Yv.forEach(T),Ae=xe(hp),Ee=L(hp,"DIV",{class:!0,style:!0});var Ju=R(Ee);Ve=te(Ju,`Click for: \r
		\r
					`),Uc.l(Ju),je=xe(Ju),qo&&qo.l(Ju),Bt=xe(Ju),jc.l(Ju),Ju.forEach(T),hp.forEach(T),Mt=xe(ze),mt=L(ze,"DIV",{});var zm=R(mt);et=L(zm,"DIV",{style:!0,class:!0});var eu=R(et);Ar=L(eu,"B",{});var Pm=R(Ar);Sr=te(Pm,"Search for your area:"),Pm.forEach(T),or=xe(eu),Ut(kt.$$.fragment,eu),Tt=xe(eu),Pr=L(eu,"SCRIPT",{});var Cm=R(Pr);Ot=te(Cm,`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Cm.forEach(T),zr=xe(eu),at=L(eu,"DIV",{width:!0});var Wc=R(at);cr=L(Wc,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var Dm=R(cr);Jr=te(Dm,"Print / PDF"),Dm.forEach(T),hi=xe(Wc),Tr=L(Wc,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var Mm=R(Tr);gn=te(Mm,"Menu"),Mm.forEach(T),Fe=xe(Wc),sr=L(Wc,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var Lm=R(sr);jn=te(Lm,"Share"),Lm.forEach(T),Wc.forEach(T),eu.forEach(T),zm.forEach(T),ze.forEach(T),sa=xe(J),Ti=L(J,"DIV",{id:!0,class:!0});var Yc=R(Ti);_n=L(Yc,"DIV",{class:!0,style:!0});var Jc=R(_n);ri=L(Jc,"H3",{style:!0,class:!0});var Rm=R(ri);Ia=te(Rm,"Overview"),Rm.forEach(T),br=xe(Jc),qc.l(Jc),qn=xe(Jc),Zo&&Zo.l(Jc),Jc.forEach(T),Ja=xe(Yc),Vr=L(Yc,"DIV",{class:!0});var Ho=R(Vr);Lt=L(Ho,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Bm=R(Lt);Bi=L(Bm,"DIV",{class:!0,style:!0});var cd=R(Bi);Oi=te(cd,"Population "),ur=L(cd,"SPAN",{style:!0});var Jv=R(ur);Jv.forEach(T),cd.forEach(T),Bm.forEach(T),gi=xe(Ho),ii=L(Ho,"DIV",{class:!0,id:!0});var Om=R(ii);Fr=L(Om,"DIV",{class:!0});var hd=R(Fr);pi=te(hd,`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),Ai=L(hd,"A",{href:!0,class:!0});var Vm=R(Ai);ni=L(Vm,"STRONG",{});var Fm=R(ni);fi=te(Fm,"Statistical bulletins"),Fm.forEach(T),Vm.forEach(T),hd.forEach(T),Om.forEach(T),hr=xe(Ho),ar=L(Ho,"SPAN",{class:!0,style:!0});var Nm=R(ar);Zn=te(Nm,bn),Nm.forEach(T),po=L(Ho,"BR",{}),fo=xe(Ho),wa&&wa.l(Ho),Ra=xe(Ho),Ea&&Ea.l(Ho),Ho.forEach(T),es=xe(Yc),di=L(Yc,"DIV",{class:!0});var Xo=R(di);an=L(Xo,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Um=R(an);on=L(Um,"DIV",{class:!0,style:!0});var pd=R(on);mo=te(pd,"Households"),la=L(pd,"SPAN",{style:!0});var Qv=R(la);Qv.forEach(T),pd.forEach(T),Um.forEach(T),ts=xe(Xo),Gn=L(Xo,"DIV",{class:!0,id:!0});var jm=R(Gn);xn=L(jm,"DIV",{class:!0});var fd=R(xn);ua=te(fd,`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),Qn=L(fd,"A",{href:!0,class:!0});var qm=R(Qn);ca=L(qm,"STRONG",{});var Zm=R(ca);Nr=te(Zm,"Statistical bulletins"),Zm.forEach(T),qm.forEach(T),fd.forEach(T),jm.forEach(T),U=xe(Xo),G=L(Xo,"SPAN",{class:!0,style:!0});var Gm=R(G);re=te(Gm,X),Gm.forEach(T),le=L(Xo,"BR",{}),ye=xe(Xo),Sa&&Sa.l(Xo),_e=xe(Xo),ka&&ka.l(Xo),Xo.forEach(T),Yc.forEach(T),H=xe(J),ae=L(J,"DIV",{class:!0});var tu=R(ae);Se=L(tu,"DIV",{style:!0});var Km=R(Se);Ue=L(Km,"H3",{class:!0});var Hm=R(Ue);Zc.l(Hm),Hm.forEach(T),Km.forEach(T),Ke=xe(tu),Me=L(tu,"DIV",{id:!0,style:!0,class:!0});var Xm=R(Me);Ut(qe.$$.fragment,Xm),Xm.forEach(T),st=xe(tu),Re=L(tu,"DIV",{});var Wm=R(Re);Gc.l(Wm),Wm.forEach(T),nt=xe(tu),Ye=L(tu,"DIV",{});var Ym=R(Ye);Kc.l(Ym),Ym.forEach(T),tu.forEach(T),Ft=xe(J),Ge=L(J,"DIV",{class:!0,id:!0});var rn=R(Ge);Zt=L(rn,"DIV",{class:!0});var E_=R(Zt);lr=L(E_,"H2",{class:!0,id:!0});var ix=R(lr);Ct=L(ix,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var nx=R(Ct);Qt=L(nx,"SPAN",{class:!0});var ax=R(Qt);Jt=te(ax,"Area Information"),ax.forEach(T),nx.forEach(T),ix.forEach(T),zi=xe(E_),$t=L(E_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var ox=R($t);mr=L(ox,"DIV",{class:!0});var Jm=R(mr);dr=te(Jm,"Census 2021 - "),tr=te(Jm,Kt),Vi=te(Jm," - "),ha=L(Jm,"SPAN",{class:!0});var sx=R(ha);_i=te(sx,"Location, Area and Population density"),sx.forEach(T),Hi=xe(Jm),wn=L(Jm,"DIV",{class:!0});var $v=R(wn);Xi=L($v,"DIV",{class:!0,style:!0});var Qm=R(Xi);vr=L(Qm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var lx=R(vr);Dn=L(lx,"DIV",{class:!0,style:!0});var Q1=R(Dn);Fi=te(Q1,"Location"),Gr=L(Q1,"SPAN",{style:!0});var fI=R(Gr);fI.forEach(T),Q1.forEach(T),lx.forEach(T),Cr=xe(Qm),En=L(Qm,"DIV",{class:!0,id:!0});var ux=R(En);sn=L(ux,"DIV",{class:!0});var cx=R(sn);rc=te(cx,"Information about the area including its geographical hierarchy."),cx.forEach(T),ux.forEach(T),Ni=xe(Qm),vo=L(Qm,"BR",{}),Hc.l(Qm),Qm.forEach(T),ln=xe($v),Kr=L($v,"DIV",{class:!0});var ey=R(Kr);Pi=L(ey,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var hx=R(Pi);ai=L(hx,"DIV",{class:!0,style:!0});var $1=R(ai);yo=te($1,"Area "),rs=L($1,"SPAN",{style:!0});var dI=R(rs);dI.forEach(T),$1.forEach(T),hx.forEach(T),dl=xe(ey),ml=L(ey,"DIV",{class:!0,id:!0});var px=R(ml);is=L(px,"DIV",{class:!0});var fx=R(is);gp=te(fx,"Area is measured in hectares (ha), it is rounded to the nearest whole number."),fx.forEach(T),px.forEach(T),ru=xe(ey),ns=L(ey,"SPAN",{class:!0,style:!0});var eb=R(ns);iu=te(eb,go),vl=te(eb," ha"),eb.forEach(T),ey.forEach(T),eh=xe($v),Sn=L($v,"DIV",{class:!0});var dd=R(Sn);Si=L(dd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var dx=R(Si);Mn=L(dx,"DIV",{class:!0,style:!0});var tb=R(Mn);ke=te(tb,"Population density"),Ui=L(tb,"SPAN",{style:!0});var mI=R(Ui);mI.forEach(T),tb.forEach(T),dx.forEach(T),Hr=xe(dd),pa=L(dd,"DIV",{class:!0,id:!0});var mx=R(pa);Rn=L(mx,"DIV",{class:!0});var vx=R(Rn);Ci=te(vx,"Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),vx.forEach(T),mx.forEach(T),nu=xe(dd),au=L(dd,"SPAN",{class:!0,style:!0});var yx=R(au);ff=te(yx,_p),yx.forEach(T),bp=xe(dd),Go&&Go.l(dd),dd.forEach(T),$v.forEach(T),Jm.forEach(T),ox.forEach(T),E_.forEach(T),xp=xe(rn),Bs=L(rn,"DIV",{class:!0});var S_=R(Bs);ou=L(S_,"H2",{class:!0,id:!0});var gx=R(ou);_o=L(gx,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _x=R(_o);th=L(_x,"SPAN",{class:!0});var bx=R(th);ic=te(bx,"Demography"),bx.forEach(T),_x.forEach(T),gx.forEach(T),nc=xe(S_),yl=L(S_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var xx=R(yl);oi=L(xx,"DIV",{class:!0});var $m=R(oi);wp=te($m,"Census 2021 - "),as=te($m,bo),gl=te($m," - "),xo=L($m,"SPAN",{class:!0});var wx=R(xo);Os=te(wx,"Broad age bands (years), Sex, Household size"),wx.forEach(T),_l=xe($m),Bn=L($m,"DIV",{class:!0});var ty=R(Bn);Wi=L(ty,"DIV",{class:!0});var pp=R(Wi);Qa=L(pp,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ex=R(Qa);os=L(Ex,"DIV",{class:!0,style:!0});var rb=R(os);Lr=te(rb,"Broad age bands (years) "),ac=L(rb,"SPAN",{style:!0});var vI=R(ac);vI.forEach(T),rb.forEach(T),Ex.forEach(T),vf=xe(pp),su=L(pp,"DIV",{class:!0,id:!0});var Sx=R(su);lu=L(Sx,"DIV",{class:!0});var ib=R(lu);yf=te(ib,`A grouping of ages where a person’s age is their age\r
									at their last birthday on or prior to census day. `),$a=L(ib,"A",{href:!0,class:!0});var kx=R($a);wo=L(kx,"STRONG",{});var Ix=R(wo);bl=te(Ix,"Statistical bulletins"),Ix.forEach(T),kx.forEach(T),ib.forEach(T),Sx.forEach(T),gf=xe(pp),xl=L(pp,"DIV",{class:!0,style:!0});var Tx=R(xl);Ut(Vs.$$.fragment,Tx),Tx.forEach(T),wl=xe(pp),Ko&&Ko.l(pp),Ep=xe(pp),ss=L(pp,"DIV",{});var Ax=R(ss);Ut(Ba.$$.fragment,Ax),Ax.forEach(T),pp.forEach(T),_f=xe(ty),Eo=L(ty,"DIV",{class:!0});var k_=R(Eo);kr=L(k_,"DIV",{class:!0,style:!0});var zx=R(kr);rh=te(zx,"Sex"),zx.forEach(T),xd=xe(k_),Ut(eo.$$.fragment,k_),k_.forEach(T),bf=xe(ty),Fs=L(ty,"DIV",{class:!0});var ry=R(Fs);to=L(ry,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Px=R(to);ro=L(Px,"DIV",{class:!0,style:!0});var nb=R(ro);uu=te(nb,"Household size"),ls=L(nb,"SPAN",{style:!0});var yI=R(ls);yI.forEach(T),nb.forEach(T),Px.forEach(T),oc=xe(ry),So=L(ry,"DIV",{class:!0,id:!0});var Cx=R(So);cu=L(Cx,"DIV",{class:!0});var ab=R(cu);hu=te(ab,"The number of usual residents in the household.      "),ea=L(ab,"A",{href:!0,class:!0});var Dx=R(ea);ih=L(Dx,"STRONG",{});var Mx=R(ih);wf=te(Mx,"Statistical bulletins"),Mx.forEach(T),Dx.forEach(T),ab.forEach(T),Cx.forEach(T),Ef=xe(ry),Ut(Oa.$$.fragment,ry),ry.forEach(T),ty.forEach(T),$m.forEach(T),xx.forEach(T),S_.forEach(T),ah=xe(rn),Ns=L(rn,"DIV",{class:!0});var I_=R(Ns);Us=L(I_,"H2",{class:!0,id:!0});var Lx=R(Us);us=L(Lx,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Rx=R(us);El=L(Rx,"SPAN",{class:!0});var Bx=R(El);Sp=te(Bx,"Country of Birth & Nationality"),Bx.forEach(T),Rx.forEach(T),Lx.forEach(T),Sf=xe(I_),Sl=L(I_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Ox=R(Sl);Va=L(Ox,"DIV",{class:!0});var ev=R(Va);kp=te(ev,"Census 2021 - "),oh=te(ev,sc),lc=te(ev," - "),uc=L(ev,"SPAN",{class:!0});var Vx=R(uc);kl=te(Vx,"Country of birth, Passport(s) held, National identity (person based)"),Vx.forEach(T),Qr=xe(ev),fa=L(ev,"DIV",{class:!0});var iy=R(fa);da=L(iy,"DIV",{class:!0});var ny=R(da);On=L(ny,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Fx=R(On);Xt=L(Fx,"DIV",{class:!0,style:!0});var ob=R(Xt);jr=te(ob,"Country of birth"),Vn=L(ob,"SPAN",{style:!0});var gI=R(Vn);gI.forEach(T),ob.forEach(T),Fx.forEach(T),pu=xe(ny),cs=L(ny,"DIV",{class:!0,id:!0});var Nx=R(cs);cc=L(Nx,"DIV",{class:!0});var sb=R(cc);wd=te(sb,"The country in which a person was born. "),hs=L(sb,"A",{href:!0,class:!0});var Ux=R(hs);Il=L(Ux,"STRONG",{});var jx=R(Il);ps=te(jx,"Statistical bulletins"),jx.forEach(T),Ux.forEach(T),sb.forEach(T),Nx.forEach(T),ji=xe(ny),Ut(ko.$$.fragment,ny),ny.forEach(T),kf=xe(iy),qr=L(iy,"DIV",{class:!0});var ay=R(qr);ot=L(ay,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var qx=R(ot);qi=L(qx,"DIV",{class:!0,style:!0});var lb=R(qi);sh=te(lb,"Passport(s) held"),Io=L(lb,"SPAN",{style:!0});var _I=R(Io);_I.forEach(T),lb.forEach(T),qx.forEach(T),ma=xe(ay),Tl=L(ay,"DIV",{class:!0,id:!0});var Zx=R(Tl);Je=L(Zx,"DIV",{class:!0});var ub=R(Je);Tp=te(ub,"Passport or passports that an individual holds. "),js=L(ub,"A",{href:!0,class:!0});var Gx=R(js);hc=L(Gx,"STRONG",{});var Kx=R(hc);Fa=te(Kx,"Statistical bulletins"),Kx.forEach(T),Gx.forEach(T),ub.forEach(T),Zx.forEach(T),va=xe(ay),Ut(ds.$$.fragment,ay),ay.forEach(T),lh=xe(iy),Zi=L(iy,"DIV",{class:!0});var oy=R(Zi);kn=L(oy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Hx=R(kn);To=L(Hx,"DIV",{class:!0,style:!0});var cb=R(To);pc=te(cb,"National identity (person based)"),Al=L(cb,"SPAN",{style:!0});var bI=R(Al);bI.forEach(T),cb.forEach(T),Hx.forEach(T),io=xe(oy),Fn=L(oy,"DIV",{class:!0,id:!0});var Xx=R(Fn);Wt=L(Xx,"DIV",{class:!0});var hb=R(Wt);Ao=te(hb,`The nationality or nationalities that the person\r
									identifies with. `),Kn=L(hb,"A",{href:!0,class:!0});var Wx=R(Kn);Yi=L(Wx,"STRONG",{});var Yx=R(Yi);zl=te(Yx,"Statistical bulletins"),Yx.forEach(T),Wx.forEach(T),hb.forEach(T),Xx.forEach(T),qs=xe(oy),Ut(Hn.$$.fragment,oy),oy.forEach(T),iy.forEach(T),ev.forEach(T),Ox.forEach(T),I_.forEach(T),fc=xe(rn),yt=L(rn,"DIV",{class:!0});var T_=R(yt);pt=L(T_,"H2",{class:!0,id:!0});var Jx=R(pt);Na=L(Jx,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Qx=R(Na);un=L(Qx,"SPAN",{class:!0});var $x=R(un);no=te($x,"Language"),$x.forEach(T),Qx.forEach(T),Jx.forEach(T),In=xe(T_),ra=L(T_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var ew=R(ra);ao=L(ew,"DIV",{class:!0});var tv=R(ao);uh=te(tv,"Census 2021 - "),Ji=te(tv,xr),If=te(tv," - "),zo=L(tv,"SPAN",{class:!0});var tw=R(zo);Ap=te(tw,"Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),tw.forEach(T),ms=xe(tv),bi=L(tv,"DIV",{class:!0});var sy=R(bi);Ta=L(sy,"DIV",{class:!0});var ly=R(Ta);cn=L(ly,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var rw=R(cn);oo=L(rw,"DIV",{class:!0,style:!0});var pb=R(oo);fu=te(pb,"Main language"),vs=L(pb,"SPAN",{style:!0});var xI=R(vs);xI.forEach(T),pb.forEach(T),rw.forEach(T),du=xe(ly),so=L(ly,"DIV",{class:!0,id:!0});var iw=R(so);Pl=L(iw,"DIV",{class:!0});var fb=R(Pl);Zs=te(fb,`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Ua=L(fb,"A",{href:!0,class:!0});var nw=R(Ua);mu=L(nw,"STRONG",{});var aw=R(mu);Gs=te(aw,"Statistical bulletins"),aw.forEach(T),nw.forEach(T),fb.forEach(T),iw.forEach(T),ja=xe(ly),Ut(Ks.$$.fragment,ly),ly.forEach(T),dc=xe(sy),Po=L(sy,"DIV",{class:!0});var uy=R(Po);Aa=L(uy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ow=R(Aa);n=L(ow,"DIV",{class:!0,style:!0});var db=R(n);s=te(db,"Knowledge of Irish"),o=L(db,"SPAN",{style:!0});var wI=R(o);wI.forEach(T),db.forEach(T),ow.forEach(T),m=xe(uy),E=L(uy,"DIV",{class:!0,id:!0});var sw=R(E);k=L(sw,"DIV",{class:!0});var mb=R(k);P=te(mb,`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),B=L(mb,"A",{href:!0,class:!0});var lw=R(B);q=L(lw,"STRONG",{});var uw=R(q);Y=te(uw,"Statistical bulletins"),uw.forEach(T),lw.forEach(T),mb.forEach(T),sw.forEach(T),Q=xe(uy),Ut($.$$.fragment,uy),uy.forEach(T),ce=xe(sy),se=L(sy,"DIV",{class:!0});var cy=R(se);de=L(cy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var cw=R(de);ne=L(cw,"DIV",{class:!0,style:!0});var vb=R(ne);me=te(vb,"Knowledge of Ulster-Scots"),ge=L(vb,"SPAN",{style:!0});var EI=R(ge);EI.forEach(T),vb.forEach(T),cw.forEach(T),Be=xe(cy),Ce=L(cy,"DIV",{class:!0,id:!0});var hw=R(Ce);Oe=L(hw,"DIV",{class:!0});var yb=R(Oe);Ze=te(yb,`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Xe=L(yb,"A",{href:!0,class:!0});var pw=R(Xe);We=L(pw,"STRONG",{});var fw=R(We);ut=te(fw,"Statistical bulletins"),fw.forEach(T),pw.forEach(T),yb.forEach(T),hw.forEach(T),wt=xe(cy),Ut(bt.$$.fragment,cy),cy.forEach(T),sy.forEach(T),tv.forEach(T),ew.forEach(T),T_.forEach(T),pr=xe(rn),lt=L(rn,"DIV",{class:!0});var A_=R(lt);At=L(A_,"H2",{class:!0,id:!0});var dw=R(At);Rt=L(dw,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var mw=R(Rt);zt=L(mw,"SPAN",{class:!0});var vw=R(zt);Dt=te(vw,"Religion & Ethnicity"),vw.forEach(T),mw.forEach(T),dw.forEach(T),Ht=xe(A_),It=L(A_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var yw=R(It);xt=L(yw,"DIV",{class:!0});var rv=R(xt);Qi=te(rv,"Census 2021 - "),Tn=te(rv,si),hn=te(rv," - "),Xr=L(rv,"SPAN",{class:!0});var gw=R(Xr);ki=te(gw,"Religion, Religion or religion brought up in, Ethnic group"),gw.forEach(T),ya=xe(rv),li=L(rv,"DIV",{class:!0});var hy=R(li);ia=L(hy,"DIV",{class:!0});var py=R(ia);xi=L(py,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _w=R(xi);An=L(_w,"DIV",{class:!0,style:!0});var gb=R(An);qa=te(gb,"Religion"),ys=L(gb,"SPAN",{style:!0});var SI=R(ys);SI.forEach(T),gb.forEach(T),_w.forEach(T),Hs=xe(py),Co=L(py,"DIV",{class:!0,id:!0});var bw=R(Co);gs=L(bw,"DIV",{class:!0});var _b=R(gs);Do=te(_b,`Religion, religious denomination or body the person\r
									indicated they belong to. `),_s=L(_b,"A",{href:!0,class:!0});var xw=R(_s);Za=L(xw,"STRONG",{});var ww=R(Za);$i=te(ww,"Statistical bulletins"),ww.forEach(T),xw.forEach(T),_b.forEach(T),bw.forEach(T),bs=xe(py),Ut(za.$$.fragment,py),py.forEach(T),Cl=xe(hy),rr=L(hy,"DIV",{class:!0});var fy=R(rr);Di=L(fy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ew=R(Di);Mi=L(Ew,"DIV",{class:!0,style:!0});var bb=R(Mi);Dl=te(bb,"Religion or religion brought up in"),mc=L(bb,"SPAN",{style:!0});var kI=R(mc);kI.forEach(T),bb.forEach(T),Ew.forEach(T),kd=xe(fy),xs=L(fy,"DIV",{class:!0,id:!0});var Sw=R(xs);vu=L(Sw,"DIV",{class:!0});var xb=R(vu);yu=te(xb,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Xs=L(xb,"A",{href:!0,class:!0});var kw=R(Xs);zp=L(kw,"STRONG",{});var Iw=R(zp);vc=te(Iw,"Statistical bulletins"),Iw.forEach(T),kw.forEach(T),xb.forEach(T),Sw.forEach(T),ga=xe(fy),Ut(hh.$$.fragment,fy),fy.forEach(T),mv=xe(hy),gu=L(hy,"DIV",{class:!0});var dy=R(gu);Ws=L(dy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Tw=R(Ws);_u=L(Tw,"DIV",{class:!0,style:!0});var wb=R(_u);Yy=te(wb,"Ethnic group"),yc=L(wb,"SPAN",{style:!0});var II=R(yc);II.forEach(T),wb.forEach(T),Tw.forEach(T),Af=xe(dy),ph=L(dy,"DIV",{class:!0,id:!0});var Aw=R(ph);Mo=L(Aw,"DIV",{class:!0});var Eb=R(Mo);Pp=te(Eb,"Person’s ethnic group as declared in the Census. "),Cp=L(Eb,"A",{href:!0,class:!0});var zw=R(Cp);Id=L(zw,"STRONG",{});var Pw=R(Id);Jy=te(Pw,"Statistical bulletins"),Pw.forEach(T),zw.forEach(T),Eb.forEach(T),Aw.forEach(T),Qy=xe(dy),Ut(fh.$$.fragment,dy),dy.forEach(T),hy.forEach(T),rv.forEach(T),yw.forEach(T),A_.forEach(T),$y=xe(rn),bu=L(rn,"DIV",{class:!0});var z_=R(bu);Dp=L(z_,"H2",{class:!0,id:!0});var Cw=R(Dp);Ga=L(Cw,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Dw=R(Ga);zf=L(Dw,"SPAN",{class:!0});var Mw=R(zf);Gi=te(Mw,"Health & Care"),Mw.forEach(T),Dw.forEach(T),Cw.forEach(T),Pf=xe(z_),gc=L(z_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Lw=R(gc);Lo=L(Lw,"DIV",{class:!0});var iv=R(Lo);Cf=te(iv,"Census 2021 - "),Td=te(iv,_c),vv=te(iv," - "),xu=L(iv,"SPAN",{class:!0});var Rw=R(xu);Ad=te(Rw,"General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Rw.forEach(T),zd=xe(iv),lo=L(iv,"DIV",{class:!0});var md=R(lo);Ro=L(md,"DIV",{class:!0});var my=R(Ro);Ys=L(my,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Bw=R(Ys);ws=L(Bw,"DIV",{class:!0,style:!0});var P_=R(ws);eg=te(P_,"General health"),bc=L(P_,"SPAN",{style:!0});var TI=R(bc);TI.forEach(T),Es=L(P_,"BR",{}),P_.forEach(T),Bw.forEach(T),rg=xe(my),Mp=L(my,"DIV",{class:!0,id:!0});var Ow=R(Mp);Lp=L(Ow,"DIV",{class:!0});var Sb=R(Lp);ig=te(Sb,`General health is a self-assessment of a\r
											person’s general state of health. It is not\r
											based over any specified period of time.\r
											`),dh=L(Sb,"A",{href:!0,class:!0});var Vw=R(dh);wu=L(Vw,"STRONG",{});var Fw=R(wu);ng=te(Fw,"Statistical bulletins"),Fw.forEach(T),Vw.forEach(T),Sb.forEach(T),Ow.forEach(T),ag=xe(my),Ut(xc.$$.fragment,my),my.forEach(T),yv=xe(md),Eu=L(md,"DIV",{class:!0});var vy=R(Eu);Js=L(vy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Nw=R(Js);Ka=L(Nw,"DIV",{class:!0,style:!0});var kb=R(Ka);og=te(kb,"Long-term health problem or disability"),wc=L(kb,"SPAN",{style:!0});var AI=R(wc);AI.forEach(T),kb.forEach(T),Nw.forEach(T),Ss=xe(vy),Rp=L(vy,"DIV",{class:!0,id:!0});var Uw=R(Rp);Bp=L(Uw,"DIV",{class:!0});var Ib=R(Bp);sg=te(Ib,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Ml=L(Ib,"A",{href:!0,class:!0});var jw=R(Ml);Df=L(jw,"STRONG",{});var qw=R(Df);lg=te(qw,"Statistical bulletins"),qw.forEach(T),jw.forEach(T),Ib.forEach(T),Uw.forEach(T),ug=xe(vy),Ut(mh.$$.fragment,vy),vy.forEach(T),cg=xe(md),Ll=L(md,"DIV",{class:!0});var yy=R(Ll);wi=L(yy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Zw=R(wi);Qs=L(Zw,"DIV",{class:!0,style:!0});var C_=R(Qs);gv=te(C_,"Long-term health conditions"),vh=L(C_,"SPAN",{style:!0});var zI=R(vh);zI.forEach(T),_v=L(C_,"BR",{}),C_.forEach(T),Zw.forEach(T),hg=xe(yy),Op=L(yy,"DIV",{class:!0,id:!0});var Gw=R(Op);Vp=L(Gw,"DIV",{class:!0});var Tb=R(Vp);bv=te(Tb,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),Fp=L(Tb,"A",{href:!0,class:!0});var Kw=R(Fp);Cd=L(Kw,"STRONG",{});var Hw=R(Cd);Np=te(Hw,"Statistical bulletins"),Hw.forEach(T),Kw.forEach(T),Tb.forEach(T),Gw.forEach(T),xv=xe(yy),Ut(Ec.$$.fragment,yy),yy.forEach(T),Mf=xe(md),wr=L(md,"DIV",{class:!0});var gy=R(wr);ks=L(gy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Xw=R(ks);na=L(Xw,"DIV",{class:!0,style:!0});var Ab=R(na);yh=te(Ab,"Unpaid care"),gh=L(Ab,"SPAN",{style:!0});var PI=R(gh);PI.forEach(T),Ab.forEach(T),Xw.forEach(T),pg=xe(gy),Up=L(gy,"DIV",{class:!0,id:!0});var Ww=R(Up);jp=L(Ww,"DIV",{class:!0});var zb=R(jp);fg=te(zb,`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),qp=L(zb,"A",{href:!0,class:!0});var Yw=R(qp);Dd=L(Yw,"STRONG",{});var Jw=R(Dd);dg=te(Jw,"Statistical bulletins"),Jw.forEach(T),Yw.forEach(T),zb.forEach(T),Ww.forEach(T),mg=xe(gy),Ut(Rl.$$.fragment,gy),gy.forEach(T),md.forEach(T),iv.forEach(T),Lw.forEach(T),z_.forEach(T),wv=xe(rn),_h=L(rn,"DIV",{class:!0});var D_=R(_h);Gp=L(D_,"H2",{class:!0,id:!0});var Qw=R(Gp);Bl=L(Qw,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var $w=R(Bl);Kp=L($w,"SPAN",{class:!0});var eE=R(Kp);Lf=te(eE,"Housing & Accommodation"),eE.forEach(T),$w.forEach(T),Qw.forEach(T),Hp=xe(D_),$s=L(D_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var tE=R($s);en=L(tE,"DIV",{class:!0});var nv=R(en);bh=te(nv,"Census 2021 - "),Xp=te(nv,zn),Rf=te(nv," - "),Xn=L(nv,"SPAN",{class:!0});var rE=R(Xn);Ev=te(rE,"Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),rE.forEach(T),Sv=xe(nv),aa=L(nv,"DIV",{class:!0});var Qu=R(aa);Ol=L(Qu,"DIV",{class:!0});var _y=R(Ol);Bo=L(_y,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var iE=R(Bo);el=L(iE,"DIV",{class:!0,style:!0});var Pb=R(el);vg=te(Pb,"Accommodation type"),xh=L(Pb,"SPAN",{style:!0});var CI=R(xh);CI.forEach(T),Pb.forEach(T),iE.forEach(T),Md=xe(_y),wh=L(_y,"DIV",{class:!0,id:!0});var nE=R(wh);Eh=L(nE,"DIV",{class:!0});var Cb=R(Eh);yg=te(Cb,"The type of accommodation occupied by a household. "),Sh=L(Cb,"A",{href:!0,class:!0});var aE=R(Sh);Of=L(aE,"STRONG",{});var oE=R(Of);kv=te(oE,"Statistical bulletins"),oE.forEach(T),aE.forEach(T),Cb.forEach(T),nE.forEach(T),Iv=xe(_y),Ut(kh.$$.fragment,_y),_y.forEach(T),gg=xe(Qu),Vl=L(Qu,"DIV",{class:!0});var by=R(Vl);Is=L(by,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var sE=R(Is);Ts=L(sE,"DIV",{class:!0,style:!0});var Db=R(Ts);Tv=te(Db,"Household adaptations"),Su=L(Db,"SPAN",{style:!0});var DI=R(Su);DI.forEach(T),Db.forEach(T),sE.forEach(T),Vf=xe(by),tl=L(by,"DIV",{class:!0,id:!0});var lE=R(tl);Wp=L(lE,"DIV",{class:!0});var Mb=R(Wp);_g=te(Mb,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Yp=L(Mb,"A",{href:!0,class:!0});var uE=R(Yp);ku=L(uE,"STRONG",{});var cE=R(ku);Ld=te(cE,"Statistical bulletins"),cE.forEach(T),uE.forEach(T),Mb.forEach(T),lE.forEach(T),zv=xe(by),Ut(Iu.$$.fragment,by),by.forEach(T),Pv=xe(Qu),Fl=L(Qu,"DIV",{class:!0});var xy=R(Fl);rl=L(xy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var hE=R(rl);Tu=L(hE,"DIV",{class:!0,style:!0});var Lb=R(Tu);bg=te(Lb,"Central heating"),Au=L(Lb,"SPAN",{style:!0});var MI=R(Au);MI.forEach(T),Lb.forEach(T),hE.forEach(T),wg=xe(xy),il=L(xy,"DIV",{class:!0,id:!0});var pE=R(il);Nl=L(pE,"DIV",{class:!0});var Rb=R(Nl);Dr=te(Rb,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),Jp=L(Rb,"A",{href:!0,class:!0});var fE=R(Jp);Qp=L(fE,"STRONG",{});var dE=R(Qp);Ih=te(dE,"Statistical bulletins"),dE.forEach(T),fE.forEach(T),Rb.forEach(T),pE.forEach(T),Eg=xe(xy),Ut(Th.$$.fragment,xy),xy.forEach(T),Sg=xe(Qu),zu=L(Qu,"DIV",{class:!0});var wy=R(zu);nl=L(wy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var mE=R(nl);Pu=L(mE,"DIV",{class:!0,style:!0});var Bb=R(Pu);kg=te(Bb,"Renewable energy systems"),Ah=L(Bb,"SPAN",{style:!0});var LI=R(Ah);LI.forEach(T),Bb.forEach(T),mE.forEach(T),Cv=xe(wy),zh=L(wy,"DIV",{class:!0,id:!0});var vE=R(zh);Cu=L(vE,"DIV",{class:!0});var Ob=R(Cu);Sc=te(Ob,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),kc=L(Ob,"A",{href:!0,class:!0});var yE=R(kc);Du=L(yE,"STRONG",{});var gE=R(Du);Dv=te(gE,"Statistical bulletins"),gE.forEach(T),yE.forEach(T),Ob.forEach(T),vE.forEach(T),Ki=xe(wy),Ut(Mr.$$.fragment,wy),wy.forEach(T),Mv=xe(Qu),Ul=L(Qu,"DIV",{class:!0});var Ey=R(Ul);As=L(Ey,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _E=R(As);jl=L(_E,"DIV",{class:!0,style:!0});var Vb=R(jl);Lv=te(Vb,"Household tenure"),Ic=L(Vb,"SPAN",{style:!0});var RI=R(Ic);RI.forEach(T),Vb.forEach(T),_E.forEach(T),Tc=xe(Ey),Ph=L(Ey,"DIV",{class:!0,id:!0});var bE=R(Ph);mi=L(bE,"DIV",{class:!0});var Fb=R(mi);ef=te(Fb,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),uo=L(Fb,"A",{href:!0,class:!0});var xE=R(uo);Ch=L(xE,"STRONG",{});var wE=R(Ch);Ff=te(wE,"Statistical bulletins"),wE.forEach(T),xE.forEach(T),Fb.forEach(T),bE.forEach(T),Rd=xe(Ey),Ut(zs.$$.fragment,Ey),Ey.forEach(T),ql=xe(Qu),Zl=L(Qu,"DIV",{class:!0});var Sy=R(Zl);Ps=L(Sy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var EE=R(Ps);Mu=L(EE,"DIV",{class:!0,style:!0});var Nb=R(Mu);pn=te(Nb,"Car or van availability"),Oo=L(Nb,"SPAN",{style:!0});var BI=R(Oo);BI.forEach(T),Nb.forEach(T),EE.forEach(T),e=xe(Sy),t=L(Sy,"DIV",{class:!0,id:!0});var SE=R(t);i=L(SE,"DIV",{class:!0});var Ub=R(i);l=te(Ub,`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),p=L(Ub,"A",{href:!0,class:!0});var kE=R(p);d=L(kE,"STRONG",{});var IE=R(d);y=te(IE,"Statistical bulletins"),IE.forEach(T),kE.forEach(T),Ub.forEach(T),SE.forEach(T),I=xe(Sy),Ut(C.$$.fragment,Sy),Sy.forEach(T),Qu.forEach(T),nv.forEach(T),tE.forEach(T),D_.forEach(T),V=xe(rn),F=L(rn,"DIV",{class:!0});var M_=R(F);K=L(M_,"H2",{class:!0,id:!0});var TE=R(K);W=L(TE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var AE=R(W);oe=L(AE,"SPAN",{class:!0});var zE=R(oe);ue=te(zE,"Household Structure"),zE.forEach(T),AE.forEach(T),TE.forEach(T),ve=xe(M_),pe=L(M_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var PE=R(pe);we=L(PE,"DIV",{class:!0});var av=R(we);Te=te(av,"Census 2021 - "),Le=te(av,De),Ne=te(av," - "),He=L(av,"SPAN",{class:!0});var CE=R(He);Qe=te(CE,"Number of dependent children, Household composition"),CE.forEach(T),gt=xe(av),$e=L(av,"DIV",{class:!0});var ky=R($e);vt=L(ky,"DIV",{class:!0});var Iy=R(vt);rt=L(Iy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var DE=R(rt);Vt=L(DE,"DIV",{class:!0,style:!0});var jb=R(Vt);Pt=te(jb,"Number of dependent children"),ft=L(jb,"SPAN",{style:!0});var OI=R(ft);OI.forEach(T),jb.forEach(T),DE.forEach(T),Gt=xe(Iy),er=L(Iy,"DIV",{class:!0,id:!0});var ME=R(er);_t=L(ME,"DIV",{class:!0});var qb=R(_t);yr=te(qb,"Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),Rr=L(qb,"A",{href:!0,class:!0});var LE=R(Rr);ui=L(LE,"STRONG",{});var RE=R(ui);vi=te(RE,"Statistical bulletins"),RE.forEach(T),LE.forEach(T),qb.forEach(T),ME.forEach(T),$r=xe(Iy),Ut(Zr.$$.fragment,Iy),Iy.forEach(T),tn=xe(ky),ei=L(ky,"DIV",{class:!0});var Ty=R(ei);yi=L(Ty,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var BE=R(yi);ci=L(BE,"DIV",{class:!0,style:!0});var Zb=R(ci);Wn=te(Zb,"Household composition"),ti=L(Zb,"SPAN",{style:!0});var VI=R(ti);VI.forEach(T),Zb.forEach(T),BE.forEach(T),nr=xe(Ty),Ir=L(Ty,"DIV",{class:!0,id:!0});var OE=R(Ir);gr=L(OE,"DIV",{class:!0});var Gb=R(gr);fr=te(Gb,`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),fn=L(Gb,"A",{href:!0,class:!0});var VE=R(fn);dn=L(VE,"STRONG",{});var FE=R(dn);Wr=te(FE,"Statistical bulletins"),FE.forEach(T),VE.forEach(T),Gb.forEach(T),OE.forEach(T),Li=xe(Ty),Ut(Ri.$$.fragment,Ty),Ty.forEach(T),_r=xe(ky),Vo=L(ky,"DIV",{class:!0});var FI=R(Vo);FI.forEach(T),ky.forEach(T),av.forEach(T),PE.forEach(T),M_.forEach(T),al=xe(rn),Yr=L(rn,"DIV",{class:!0});var L_=R(Yr);Ha=L(L_,"H2",{class:!0,id:!0});var NE=R(Ha);Pn=L(NE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var UE=R(Pn);Gl=L(UE,"SPAN",{class:!0});var jE=R(Gl);Ac=te(jE,"Marital & Civil Partnership Status"),jE.forEach(T),UE.forEach(T),NE.forEach(T),Dh=xe(L_),Xa=L(L_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var qE=R(Xa);Wa=L(qE,"DIV",{class:!0});var ov=R(Wa);Nf=te(ov,"Census 2021 - "),Mh=te(ov,Lu),Uf=te(ov," - "),zc=L(ov,"SPAN",{class:!0});var ZE=R(zc);Kl=te(ZE,"Marital and civil partnership status"),ZE.forEach(T),tf=xe(ov),_a=L(ov,"DIV",{class:!0});var Ay=R(_a);Pa=L(Ay,"DIV",{class:!0});var zy=R(Pa);Ca=L(zy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var GE=R(Ca);Fo=L(GE,"DIV",{class:!0,style:!0});var Kb=R(Fo);jf=te(Kb,"Marital and civil partnership status"),Hl=L(Kb,"SPAN",{style:!0});var NI=R(Hl);NI.forEach(T),Kb.forEach(T),GE.forEach(T),qf=xe(zy),Xl=L(zy,"DIV",{class:!0,id:!0});var KE=R(Xl);Wl=L(KE,"DIV",{class:!0});var Hb=R(Wl);rf=te(Hb,"Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),Ru=L(Hb,"A",{href:!0,class:!0});var HE=R(Ru);Bu=L(HE,"STRONG",{});var XE=R(Bu);Zf=te(XE,"Statistical bulletins"),XE.forEach(T),HE.forEach(T),Hb.forEach(T),KE.forEach(T),Lh=xe(zy),Ut(ol.$$.fragment,zy),zy.forEach(T),Pc=xe(Ay),Cc=L(Ay,"DIV",{class:!0});var UI=R(Cc);UI.forEach(T),Rh=xe(Ay),nf=L(Ay,"DIV",{class:!0});var jI=R(nf);jI.forEach(T),Ay.forEach(T),ov.forEach(T),qE.forEach(T),L_.forEach(T),Od=xe(rn),Dc=L(rn,"DIV",{class:!0});var R_=R(Dc);Mc=L(R_,"H2",{class:!0,id:!0});var WE=R(Mc);Yl=L(WE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var YE=R(Yl);Ou=L(YE,"SPAN",{class:!0});var JE=R(Ou);Ii=te(JE,"Sexual Orientation"),JE.forEach(T),YE.forEach(T),WE.forEach(T),Cs=xe(R_),Bh=L(R_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var QE=R(Bh);ba=L(QE,"DIV",{class:!0});var sv=R(ba);Vd=te(sv,"Census 2021 - "),af=te(sv,Gf),sl=te(sv," - "),Lc=L(sv,"SPAN",{class:!0});var $E=R(Lc);of=te($E,"Sexual orientation"),$E.forEach(T),Kf=xe(sv),Ya=L(sv,"DIV",{class:!0});var Py=R(Ya);ll=L(Py,"DIV",{class:!0});var Cy=R(ll);Ds=L(Cy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var eS=R(Ds);No=L(eS,"DIV",{class:!0,style:!0});var Xb=R(No);Rv=te(Xb,"Sexual orientation"),Oh=L(Xb,"SPAN",{style:!0});var qI=R(Oh);qI.forEach(T),Xb.forEach(T),eS.forEach(T),Bv=xe(Cy),Vh=L(Cy,"DIV",{class:!0,id:!0});var tS=R(Vh);Yn=L(tS,"DIV",{class:!0});var Wb=R(Yn);Hf=te(Wb,"Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),Fh=L(Wb,"A",{href:!0,class:!0});var rS=R(Fh);Uo=L(rS,"STRONG",{});var iS=R(Uo);Tg=te(iS,"Statistical bulletins"),iS.forEach(T),rS.forEach(T),Wb.forEach(T),tS.forEach(T),Ov=xe(Cy),Ut(jo.$$.fragment,Cy),Cy.forEach(T),Nh=xe(Py),Vu=L(Py,"DIV",{class:!0});var ZI=R(Vu);ZI.forEach(T),Uh=xe(Py),Fu=L(Py,"DIV",{class:!0});var GI=R(Fu);GI.forEach(T),Py.forEach(T),sv.forEach(T),QE.forEach(T),R_.forEach(T),Vv=xe(rn),Rc=L(rn,"DIV",{class:!0});var B_=R(Rc);jh=L(B_,"H2",{class:!0,id:!0});var nS=R(jh);Ms=L(nS,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var aS=R(Ms);qh=L(aS,"SPAN",{class:!0});var oS=R(qh);Jl=te(oS,"Labour Market & Qualifications"),oS.forEach(T),aS.forEach(T),nS.forEach(T),Fv=xe(B_),Nu=L(B_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var sS=R(Nu);Ls=L(sS,"DIV",{class:!0});var lv=R(Ls);Nv=te(lv,"Census 2021 - "),Fd=te(lv,sf),Uv=te(lv," - "),Zh=L(lv,"SPAN",{class:!0});var lS=R(Zh);jv=te(lS,"Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),lS.forEach(T),lf=xe(lv),xa=L(lv,"DIV",{class:!0});var fp=R(xa);Rs=L(fp,"DIV",{class:!0});var Dy=R(Rs);ul=L(Dy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var uS=R(ul);Ql=L(uS,"DIV",{class:!0,style:!0});var Yb=R(Ql);zg=te(Yb,"Highest level of qualifications"),uf=L(Yb,"SPAN",{style:!0});var KI=R(uf);KI.forEach(T),Yb.forEach(T),uS.forEach(T),Pg=xe(Dy),cf=L(Dy,"DIV",{class:!0,id:!0});var cS=R(cf);mn=L(cS,"DIV",{class:!0});var Da=R(mn);Cg=te(Da,`The highest level of qualification categories are as follows:\r
										`),Dg=L(Da,"BR",{}),cl=te(Da,`\r
                                        • No qualifications;\r
										`),Xf=L(Da,"BR",{}),qv=te(Da,`\r
                                        • Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),hf=L(Da,"BR",{}),Zv=te(Da,`\r
                                        • Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),_0=L(Da,"BR",{}),b0=te(Da,`\r
                                        • Apprenticeship;\r
										`),x0=L(Da,"BR",{}),w0=te(Da,`\r
                                        • Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),E0=L(Da,"BR",{}),S0=te(Da,`\r
                                        • Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),k0=L(Da,"BR",{}),I0=te(Da,`\r
                                        • Other: Other qualifications, equivalent unknown.\r
                                        `),T0=L(Da,"BR",{}),A0=te(Da,`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Nd=L(Da,"A",{href:!0,class:!0});var hS=R(Nd);Mg=L(hS,"STRONG",{});var pS=R(Mg);z0=te(pS,"Statistical bulletins"),pS.forEach(T),hS.forEach(T),Da.forEach(T),cS.forEach(T),P0=xe(Dy),Ut(Wf.$$.fragment,Dy),Dy.forEach(T),C0=xe(fp),Gh=L(fp,"DIV",{class:!0});var My=R(Gh);Uu=L(My,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var fS=R(Uu);Kh=L(fS,"DIV",{class:!0,style:!0});var Jb=R(Kh);D0=te(Jb,"Economic activity"),Ud=L(Jb,"SPAN",{style:!0});var HI=R(Ud);HI.forEach(T),Jb.forEach(T),fS.forEach(T),M0=xe(My),jd=L(My,"DIV",{class:!0,id:!0});var dS=R(jd);qd=L(dS,"DIV",{class:!0});var Qb=R(qd);L0=te(Qb,"Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),Zd=L(Qb,"A",{href:!0,class:!0});var mS=R(Zd);Lg=L(mS,"STRONG",{});var vS=R(Lg);R0=te(vS,"Statistical bulletins"),vS.forEach(T),mS.forEach(T),Qb.forEach(T),dS.forEach(T),B0=xe(My),Ut(Yf.$$.fragment,My),My.forEach(T),O0=xe(fp),Hh=L(fp,"DIV",{class:!0});var Ly=R(Hh);ju=L(Ly,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var yS=R(ju);Xh=L(yS,"DIV",{class:!0,style:!0});var $b=R(Xh);V0=te($b,"Hours worked per week"),Gd=L($b,"SPAN",{style:!0});var XI=R(Gd);XI.forEach(T),$b.forEach(T),yS.forEach(T),F0=xe(Ly),Kd=L(Ly,"DIV",{class:!0,id:!0});var gS=R(Kd);Hd=L(gS,"DIV",{class:!0});var e2=R(Hd);N0=te(e2,"The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),Xd=L(e2,"A",{href:!0,class:!0});var _S=R(Xd);Rg=L(_S,"STRONG",{});var bS=R(Rg);U0=te(bS,"Statistical bulletins"),bS.forEach(T),_S.forEach(T),e2.forEach(T),gS.forEach(T),j0=xe(Ly),Ut(Jf.$$.fragment,Ly),Ly.forEach(T),q0=xe(fp),Wh=L(fp,"DIV",{class:!0});var Ry=R(Wh);qu=L(Ry,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xS=R(qu);Yh=L(xS,"DIV",{class:!0,style:!0});var t2=R(Yh);Z0=te(t2,"Industry of employment"),Wd=L(t2,"SPAN",{style:!0});var WI=R(Wd);WI.forEach(T),t2.forEach(T),xS.forEach(T),G0=xe(Ry),Yd=L(Ry,"DIV",{class:!0,id:!0});var wS=R(Yd);Jd=L(wS,"DIV",{class:!0});var r2=R(Jd);K0=te(r2,"The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),Qd=L(r2,"A",{href:!0,class:!0});var ES=R(Qd);Bg=L(ES,"STRONG",{});var SS=R(Bg);H0=te(SS,"Statistical bulletins"),SS.forEach(T),ES.forEach(T),r2.forEach(T),wS.forEach(T),X0=xe(Ry),Ut(Qf.$$.fragment,Ry),Ry.forEach(T),W0=xe(fp),Jh=L(fp,"DIV",{class:!0});var By=R(Jh);Zu=L(By,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var kS=R(Zu);Qh=L(kS,"DIV",{class:!0,style:!0});var i2=R(Qh);Y0=te(i2,"Occupation"),$d=L(i2,"SPAN",{style:!0});var YI=R($d);YI.forEach(T),i2.forEach(T),kS.forEach(T),J0=xe(By),em=L(By,"DIV",{class:!0,id:!0});var IS=R(em);tm=L(IS,"DIV",{class:!0});var n2=R(tm);Q0=te(n2,"The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),rm=L(n2,"A",{href:!0,class:!0});var TS=R(rm);Og=L(TS,"STRONG",{});var AS=R(Og);$0=te(AS,"Statistical bulletins"),AS.forEach(T),TS.forEach(T),n2.forEach(T),IS.forEach(T),e1=xe(By),Ut($f.$$.fragment,By),By.forEach(T),fp.forEach(T),lv.forEach(T),sS.forEach(T),B_.forEach(T),t1=xe(rn),ed=L(rn,"DIV",{class:!0});var O_=R(ed);im=L(O_,"H2",{class:!0,id:!0});var zS=R(im);Bc=L(zS,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var PS=R(Bc);Gv=L(PS,"SPAN",{class:!0});var CS=R(Gv);r1=te(CS,"Travel to Work or Study"),CS.forEach(T),PS.forEach(T),zS.forEach(T),i1=xe(O_),td=L(O_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var DS=R(td);Oc=L(DS,"DIV",{class:!0});var uv=R(Oc);n1=te(uv,"Census 2021 - "),f_=te(uv,Vg),a1=te(uv," - "),Kv=L(uv,"SPAN",{class:!0});var MS=R(Kv);o1=te(MS,"Method of travel to work or study, Distance to place of work or study"),MS.forEach(T),s1=xe(uv),ho=L(uv,"DIV",{class:!0});var dp=R(ho);$h=L(dp,"DIV",{class:!0});var Oy=R($h);Gu=L(Oy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var LS=R(Gu);ep=L(LS,"DIV",{class:!0,style:!0});var a2=R(ep);l1=te(a2,"Method of travel to work"),nm=L(a2,"SPAN",{style:!0});var JI=R(nm);JI.forEach(T),a2.forEach(T),LS.forEach(T),u1=xe(Oy),am=L(Oy,"DIV",{class:!0,id:!0});var RS=R(am);om=L(RS,"DIV",{class:!0});var o2=R(om);c1=te(o2,`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),sm=L(o2,"A",{href:!0,class:!0});var BS=R(sm);Fg=L(BS,"STRONG",{});var OS=R(Fg);h1=te(OS,"Statistical bulletins"),OS.forEach(T),BS.forEach(T),o2.forEach(T),RS.forEach(T),p1=xe(Oy),Ut(rd.$$.fragment,Oy),Oy.forEach(T),f1=xe(dp),tp=L(dp,"DIV",{class:!0});var Vy=R(tp);Ku=L(Vy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var VS=R(Ku);rp=L(VS,"DIV",{class:!0,style:!0});var s2=R(rp);d1=te(s2,"Method of travel to study"),lm=L(s2,"SPAN",{style:!0});var QI=R(lm);QI.forEach(T),s2.forEach(T),VS.forEach(T),m1=xe(Vy),um=L(Vy,"DIV",{class:!0,id:!0});var FS=R(um);cm=L(FS,"DIV",{class:!0});var l2=R(cm);v1=te(l2,`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),hm=L(l2,"A",{href:!0,class:!0});var NS=R(hm);Ng=L(NS,"STRONG",{});var US=R(Ng);y1=te(US,"Statistical bulletins"),US.forEach(T),NS.forEach(T),l2.forEach(T),FS.forEach(T),g1=xe(Vy),Ut(id.$$.fragment,Vy),Vy.forEach(T),_1=xe(dp),Ug=L(dp,"DIV",{class:!0});var $I=R(Ug);$I.forEach(T),b1=xe(dp),ip=L(dp,"DIV",{class:!0});var Fy=R(ip);Hu=L(Fy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var jS=R(Hu);np=L(jS,"DIV",{class:!0,style:!0});var u2=R(np);x1=te(u2,"Distance to place of work"),pm=L(u2,"SPAN",{style:!0});var e5=R(pm);e5.forEach(T),u2.forEach(T),jS.forEach(T),w1=xe(Fy),fm=L(Fy,"DIV",{class:!0,id:!0});var qS=R(fm);dm=L(qS,"DIV",{class:!0});var c2=R(dm);E1=te(c2,"The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),mm=L(c2,"A",{href:!0,class:!0});var ZS=R(mm);jg=L(ZS,"STRONG",{});var GS=R(jg);S1=te(GS,"Statistical bulletins"),GS.forEach(T),ZS.forEach(T),c2.forEach(T),qS.forEach(T),k1=xe(Fy),Ut(nd.$$.fragment,Fy),Fy.forEach(T),I1=xe(dp),ap=L(dp,"DIV",{class:!0});var Ny=R(ap);Xu=L(Ny,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var KS=R(Xu);op=L(KS,"DIV",{class:!0,style:!0});var h2=R(op);T1=te(h2,"Distance to place of study"),vm=L(h2,"SPAN",{style:!0});var t5=R(vm);t5.forEach(T),h2.forEach(T),KS.forEach(T),A1=xe(Ny),ym=L(Ny,"DIV",{class:!0,id:!0});var HS=R(ym);gm=L(HS,"DIV",{class:!0});var p2=R(gm);z1=te(p2,"The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),_m=L(p2,"A",{href:!0,class:!0});var XS=R(_m);qg=L(XS,"STRONG",{});var WS=R(qg);P1=te(WS,"Statistical bulletins"),WS.forEach(T),XS.forEach(T),p2.forEach(T),HS.forEach(T),C1=xe(Ny),Ut(ad.$$.fragment,Ny),Ny.forEach(T),dp.forEach(T),uv.forEach(T),DS.forEach(T),O_.forEach(T),D1=xe(rn),od=L(rn,"DIV",{class:!0});var V_=R(od);bm=L(V_,"H2",{class:!0,id:!0});var YS=R(bm);Vc=L(YS,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var JS=R(Vc);Hv=L(JS,"SPAN",{class:!0});var QS=R(Hv);M1=te(QS,"Migration"),QS.forEach(T),JS.forEach(T),YS.forEach(T),L1=xe(V_),sd=L(V_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var $S=R(sd);Fc=L($S,"DIV",{class:!0});var cv=R(Fc);R1=te(cv,"Census 2021 - "),d_=te(cv,Zg),B1=te(cv," - "),Xv=L(cv,"SPAN",{class:!0});var e3=R(Xv);O1=te(e3,"Address one year ago, Year of arrival to live in NI"),e3.forEach(T),V1=xe(cv),$l=L(cv,"DIV",{class:!0});var Uy=R($l);sp=L(Uy,"DIV",{class:!0});var jy=R(sp);Wu=L(jy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var t3=R(Wu);lp=L(t3,"DIV",{class:!0,style:!0});var f2=R(lp);F1=te(f2,"Address one year ago"),xm=L(f2,"SPAN",{style:!0});var r5=R(xm);r5.forEach(T),f2.forEach(T),t3.forEach(T),N1=xe(jy),wm=L(jy,"DIV",{class:!0,id:!0});var r3=R(wm);Em=L(r3,"DIV",{class:!0});var d2=R(Em);U1=te(d2,"Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),Sm=L(d2,"A",{href:!0,class:!0});var i3=R(Sm);Gg=L(i3,"STRONG",{});var n3=R(Gg);j1=te(n3,"Statistical bulletins"),n3.forEach(T),i3.forEach(T),d2.forEach(T),r3.forEach(T),q1=xe(jy),Ut(ld.$$.fragment,jy),jy.forEach(T),Z1=xe(Uy),up=L(Uy,"DIV",{class:!0});var qy=R(up);Yu=L(qy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var a3=R(Yu);cp=L(a3,"DIV",{class:!0,style:!0});var m2=R(cp);G1=te(m2,"Year of arrival to live in NI"),km=L(m2,"SPAN",{style:!0});var i5=R(km);i5.forEach(T),m2.forEach(T),a3.forEach(T),K1=xe(qy),Im=L(qy,"DIV",{class:!0,id:!0});var o3=R(Im);Tm=L(o3,"DIV",{class:!0});var v2=R(Tm);H1=te(v2,"The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Am=L(v2,"A",{href:!0,class:!0});var s3=R(Am);Kg=L(s3,"STRONG",{});var l3=R(Kg);X1=te(l3,"Statistical bulletins"),l3.forEach(T),s3.forEach(T),v2.forEach(T),o3.forEach(T),W1=xe(qy),Ut(ud.$$.fragment,qy),qy.forEach(T),Y1=xe(Uy),Hg=L(Uy,"DIV",{class:!0});var n5=R(Hg);n5.forEach(T),Uy.forEach(T),cv.forEach(T),$S.forEach(T),V_.forEach(T),rn.forEach(T),this.h()},h(){S(_,"href",yp+"/"),S(_,"data-sveltekit-noscroll",""),S(_,"data-sveltekit-keepfocus",""),S(_,"class","svelte-17c2th3"),a.a=A,S(v,"class","text-small"),S(j,"class","text-big title svelte-17c2th3"),S(Ee,"class","text-bold"),ie(Ee,"font-size","0.85em"),S(cr,"class","btn svelte-17c2th3"),ie(cr,"width","33%"),S(cr,"title","Click to print this page to pdf or printer"),S(cr,"onclick","window.print();return false;"),S(Tr,"class","btn svelte-17c2th3"),ie(Tr,"width","33%"),S(Tr,"alt","Return to the landing page"),S(Tr,"onclick","window.location.href='"+yp+"/';"),S(sr,"class","btn svelte-17c2th3"),ie(sr,"width","30%"),S(sr,"type","share"),S(sr,"alt","Share this page"),S(at,"width","100%"),ie(et,"width","350px"),ie(et,"padding-top","5px"),S(et,"class","svelte-17c2th3"),Ei(et,"float-right",u[5]>1),S(h,"class","grid mtl svelte-17c2th3"),ie(ri,"margin","0 0 10px 0"),ie(ri,"line-height","1.78"),S(ri,"class","svelte-17c2th3"),S(_n,"class","div-grey-box svelte-17c2th3"),ie(_n,"line-height","1.3"),ie(ur,"color","#6E6E6E"),ie(ur,"font-size","14pt"),S(Bi,"class","blocktitle"),ie(Bi,"margin","0"),ie(Bi,"width","100%"),S(Lt,"class","row"),ie(Lt,"display","flex"),ie(Lt,"cursor","pointer"),S(Lt,"data-bs-toggle","collapse"),S(Lt,"data-bs-target","#pop-info"),S(Lt,"aria-expanded","false"),S(Lt,"aria-controls","pop-info"),S(Ai,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ai,"class","svelte-17c2th3"),S(Fr,"class","card card-body svelte-17c2th3"),S(ii,"class","collapse svelte-17c2th3"),S(ii,"id","pop-info"),S(ar,"class","text-big"),ie(ar,"font-size","2.8em"),S(Vr,"class","div-grey-box svelte-17c2th3"),ie(la,"color","#6E6E6E"),ie(la,"font-size","14pt"),S(on,"class","blocktitle"),ie(on,"margin","0"),ie(on,"width","100%"),S(an,"class","row"),ie(an,"display","flex"),ie(an,"cursor","pointer"),S(an,"data-bs-toggle","collapse"),S(an,"data-bs-target","#households-info"),S(an,"aria-expanded","false"),S(an,"aria-controls","households-info"),S(Qn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Qn,"class","svelte-17c2th3"),S(xn,"class","card card-body svelte-17c2th3"),S(Gn,"class","collapse svelte-17c2th3"),S(Gn,"id","households-info"),S(G,"class","text-big"),ie(G,"font-size","2.8em"),S(di,"class","div-grey-box svelte-17c2th3"),S(Ti,"id","grid"),S(Ti,"class","grid mt svelte-17c2th3"),S(Ue,"class","svelte-17c2th3"),ie(Se,"grid-column","span "+u[5]),S(Me,"id","map"),ie(Me,"padding-right","45px"),ie(Me,"grid-column","span "+(u[5]==2?2:u[5]&&u[5]>2?u[5]-1:1)),S(Me,"class","svelte-17c2th3"),S(ae,"class","grid mt svelte-17c2th3"),Wo(()=>u[31].call(ae)),S(Qt,"class","accordion-button-title"),S(Ct,"class","accordion-button collapsed"),S(Ct,"type","button"),S(Ct,"data-bs-toggle","collapse"),S(Ct,"data-bs-target","#panelsStayOpen-collapseZero"),S(Ct,"aria-expanded","false"),S(Ct,"aria-controls","panelsStayOpen-collapseZero"),S(lr,"class","accordion-header svelte-17c2th3"),S(lr,"id","panelsStayOpen-headingZero"),S(ha,"class","accordion-button-title-sub"),ie(Gr,"color","#6E6E6E"),ie(Gr,"font-size","14pt"),S(Dn,"class","blocktitle"),ie(Dn,"margin","0"),ie(Dn,"width","100%"),S(vr,"class","row"),ie(vr,"display","flex"),ie(vr,"cursor","pointer"),S(vr,"data-bs-toggle","collapse"),S(vr,"data-bs-target","#location-info"),S(vr,"aria-expanded","false"),S(vr,"aria-controls","location-info"),S(sn,"class","card card-body svelte-17c2th3"),S(En,"class","collapse svelte-17c2th3"),S(En,"id","location-info"),S(Xi,"class","div-grey-box svelte-17c2th3"),ie(Xi,"line-height","1.3"),ie(rs,"color","#6E6E6E"),ie(rs,"font-size","14pt"),S(ai,"class","blocktitle"),ie(ai,"margin","0"),ie(ai,"width","100%"),S(Pi,"class","row"),ie(Pi,"display","flex"),ie(Pi,"cursor","pointer"),S(Pi,"data-bs-toggle","collapse"),S(Pi,"data-bs-target","#Area-info"),S(Pi,"aria-expanded","false"),S(Pi,"aria-controls","Area-info"),S(is,"class","card card-body svelte-17c2th3"),S(ml,"class","collapse svelte-17c2th3"),S(ml,"id","Area-info"),S(ns,"class","text-big"),ie(ns,"font-size","2.8em"),S(Kr,"class","div-grey-box svelte-17c2th3"),ie(Ui,"color","#6E6E6E"),ie(Ui,"font-size","14pt"),S(Mn,"class","blocktitle"),ie(Mn,"margin","0"),ie(Mn,"width","100%"),S(Si,"class","row"),ie(Si,"display","flex"),ie(Si,"cursor","pointer"),S(Si,"data-bs-toggle","collapse"),S(Si,"data-bs-target","#popden-info"),S(Si,"aria-expanded","false"),S(Si,"aria-controls","popden-info"),S(Rn,"class","card card-body svelte-17c2th3"),S(pa,"class","collapse svelte-17c2th3"),S(pa,"id","popden-info"),S(au,"class","text-big"),ie(au,"font-size","2.8em"),S(Sn,"class","div-grey-box svelte-17c2th3"),S(wn,"class","grid mt svelte-17c2th3"),Wo(()=>u[32].call(wn)),S(mr,"class","accordion-body"),S($t,"id","panelsStayOpen-collapseZero"),S($t,"class","accordion-collapse collapse svelte-17c2th3"),S($t,"aria-labelledby","panelsStayOpen-headingZero"),S(Zt,"class","accordion-item"),S(th,"class","accordion-button-title"),S(_o,"class","accordion-button collapsed"),S(_o,"type","button"),S(_o,"data-bs-toggle","collapse"),S(_o,"data-bs-target","#panelsStayOpen-collapseOne"),S(_o,"aria-expanded","false"),S(_o,"aria-controls","panelsStayOpen-collapseOne"),S(ou,"class","accordion-header svelte-17c2th3"),S(ou,"id","panelsStayOpen-headingOne"),S(xo,"class","accordion-button-title-sub"),ie(ac,"color","#6E6E6E"),ie(ac,"font-size","14pt"),S(os,"class","blocktitle"),ie(os,"margin","0"),ie(os,"width","100%"),S(Qa,"class","row"),ie(Qa,"display","flex"),ie(Qa,"cursor","pointer"),S(Qa,"data-bs-toggle","collapse"),S(Qa,"data-bs-target","#broadagebands-info"),S(Qa,"aria-expanded","false"),S(Qa,"aria-controls","broadagebands-info"),S($a,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S($a,"class","svelte-17c2th3"),S(lu,"class","card card-body svelte-17c2th3"),S(su,"class","collapse svelte-17c2th3"),S(su,"id","broadagebands-info"),S(xl,"class","chart svelte-17c2th3"),ie(xl,"height","100px"),ie(xl,"padding-bottom","5px"),S(Wi,"class","div-grey-box svelte-17c2th3"),S(kr,"class","blocktitle"),ie(kr,"margin","0"),ie(kr,"width","100%"),S(Eo,"class","div-grey-box svelte-17c2th3"),ie(ls,"color","#6E6E6E"),ie(ls,"font-size","14pt"),S(ro,"class","blocktitle"),ie(ro,"margin","0"),ie(ro,"width","100%"),S(to,"class","row"),ie(to,"display","flex"),ie(to,"cursor","pointer"),S(to,"data-bs-toggle","collapse"),S(to,"data-bs-target","#hhsize-info"),S(to,"aria-expanded","false"),S(to,"aria-controls","hhsize-info"),S(ea,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ea,"class","svelte-17c2th3"),S(cu,"class","card card-body svelte-17c2th3"),S(So,"class","collapse svelte-17c2th3"),S(So,"id","hhsize-info"),S(Fs,"class","div-grey-box svelte-17c2th3"),S(Bn,"class","grid mt svelte-17c2th3"),Wo(()=>u[33].call(Bn)),S(oi,"class","accordion-body"),S(yl,"id","panelsStayOpen-collapseOne"),S(yl,"class","accordion-collapse collapse svelte-17c2th3"),S(yl,"aria-labelledby","panelsStayOpen-headingOne"),S(Bs,"class","accordion-item"),S(El,"class","accordion-button-title"),S(us,"class","accordion-button collapsed"),S(us,"type","button"),S(us,"data-bs-toggle","collapse"),S(us,"data-bs-target","#panelsStayOpen-collapseTwo"),S(us,"aria-expanded","false"),S(us,"aria-controls","panelsStayOpen-collapseTwo"),S(Us,"class","accordion-header svelte-17c2th3"),S(Us,"id","panelsStayOpen-headingTwo"),S(uc,"class","accordion-button-title-sub"),ie(Vn,"color","#6E6E6E"),ie(Vn,"font-size","14pt"),S(Xt,"class","blocktitle"),ie(Xt,"margin","0"),ie(Xt,"width","100%"),S(On,"class","row"),ie(On,"display","flex"),ie(On,"cursor","pointer"),S(On,"data-bs-toggle","collapse"),S(On,"data-bs-target","#cob-info"),S(On,"aria-expanded","false"),S(On,"aria-controls","cob-info"),S(hs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(hs,"class","svelte-17c2th3"),S(cc,"class","card card-body svelte-17c2th3"),S(cs,"class","collapse svelte-17c2th3"),S(cs,"id","cob-info"),S(da,"class","div-grey-box svelte-17c2th3"),ie(Io,"color","#6E6E6E"),ie(Io,"font-size","14pt"),S(qi,"class","blocktitle"),ie(qi,"margin","0"),ie(qi,"width","100%"),S(ot,"class","row"),ie(ot,"display","flex"),ie(ot,"cursor","pointer"),S(ot,"data-bs-toggle","collapse"),S(ot,"data-bs-target","#passport-info"),S(ot,"aria-expanded","false"),S(ot,"aria-controls","passport-info"),S(js,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(js,"class","svelte-17c2th3"),S(Je,"class","card card-body svelte-17c2th3"),S(Tl,"class","collapse svelte-17c2th3"),S(Tl,"id","passport-info"),S(qr,"class","div-grey-box svelte-17c2th3"),ie(Al,"color","#6E6E6E"),ie(Al,"font-size","14pt"),S(To,"class","blocktitle"),ie(To,"font-size","1.02em"),ie(To,"margin","0"),ie(To,"width","100%"),S(kn,"class","row"),ie(kn,"display","flex"),ie(kn,"cursor","pointer"),S(kn,"data-bs-toggle","collapse"),S(kn,"data-bs-target","#natid-info"),S(kn,"aria-expanded","false"),S(kn,"aria-controls","natid-info"),S(Kn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Kn,"class","svelte-17c2th3"),S(Wt,"class","card card-body svelte-17c2th3"),S(Fn,"class","collapse svelte-17c2th3"),S(Fn,"id","natid-info"),S(Zi,"class","div-grey-box svelte-17c2th3"),S(fa,"class","grid mt svelte-17c2th3"),Wo(()=>u[34].call(fa)),S(Va,"class","accordion-body"),S(Sl,"id","panelsStayOpen-collapseTwo"),S(Sl,"class","accordion-collapse collapse svelte-17c2th3"),S(Sl,"aria-labelledby","panelsStayOpen-headingTwo"),S(Ns,"class","accordion-item"),S(un,"class","accordion-button-title"),S(Na,"class","accordion-button collapsed"),S(Na,"type","button"),S(Na,"data-bs-toggle","collapse"),S(Na,"data-bs-target","#panelsStayOpen-collapseThree"),S(Na,"aria-expanded","false"),S(Na,"aria-controls","panelsStayOpen-collapseThree"),S(pt,"class","accordion-header svelte-17c2th3"),S(pt,"id","panelsStayOpen-headingThree"),S(zo,"class","accordion-button-title-sub"),ie(vs,"color","#6E6E6E"),ie(vs,"font-size","14pt"),S(oo,"class","blocktitle"),ie(oo,"margin","0"),ie(oo,"width","100%"),S(cn,"class","row"),ie(cn,"display","flex"),ie(cn,"cursor","pointer"),S(cn,"data-bs-toggle","collapse"),S(cn,"data-bs-target","#mainlang-info"),S(cn,"aria-expanded","false"),S(cn,"aria-controls","mainlang-info"),S(Ua,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ua,"class","svelte-17c2th3"),S(Pl,"class","card card-body svelte-17c2th3"),S(so,"class","collapse svelte-17c2th3"),S(so,"id","mainlang-info"),S(Ta,"class","div-grey-box svelte-17c2th3"),ie(o,"color","#6E6E6E"),ie(o,"font-size","14pt"),S(n,"class","blocktitle"),ie(n,"margin","0"),ie(n,"width","100%"),S(Aa,"class","row"),ie(Aa,"display","flex"),ie(Aa,"cursor","pointer"),S(Aa,"data-bs-toggle","collapse"),S(Aa,"data-bs-target","#irish-info"),S(Aa,"aria-expanded","false"),S(Aa,"aria-controls","irish-info"),S(B,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(B,"class","svelte-17c2th3"),S(k,"class","card card-body svelte-17c2th3"),S(E,"class","collapse svelte-17c2th3"),S(E,"id","irish-info"),S(Po,"class","div-grey-box svelte-17c2th3"),ie(ge,"color","#6E6E6E"),ie(ge,"font-size","14pt"),S(ne,"class","blocktitle"),ie(ne,"margin","0"),ie(ne,"width","100%"),S(de,"class","row"),ie(de,"display","flex"),ie(de,"cursor","pointer"),S(de,"data-bs-toggle","collapse"),S(de,"data-bs-target","#ulster-info"),S(de,"aria-expanded","false"),S(de,"aria-controls","ulster-info"),S(Xe,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Xe,"class","svelte-17c2th3"),S(Oe,"class","card card-body svelte-17c2th3"),S(Ce,"class","collapse svelte-17c2th3"),S(Ce,"id","ulster-info"),S(se,"class","div-grey-box svelte-17c2th3"),S(bi,"class","grid mt svelte-17c2th3"),Wo(()=>u[35].call(bi)),S(ao,"class","accordion-body"),S(ra,"id","panelsStayOpen-collapseThree"),S(ra,"class","accordion-collapse collapse svelte-17c2th3"),S(ra,"aria-labelledby","panelsStayOpen-headingThree"),S(yt,"class","accordion-item"),S(zt,"class","accordion-button-title"),S(Rt,"class","accordion-button collapsed"),S(Rt,"type","button"),S(Rt,"data-bs-toggle","collapse"),S(Rt,"data-bs-target","#panelsStayOpen-collapseFour"),S(Rt,"aria-expanded","false"),S(Rt,"aria-controls","panelsStayOpen-collapseFour"),S(At,"class","accordion-header svelte-17c2th3"),S(At,"id","panelsStayOpen-headingFour"),S(Xr,"class","accordion-button-title-sub"),ie(ys,"color","#6E6E6E"),ie(ys,"font-size","14pt"),S(An,"class","blocktitle"),ie(An,"margin","0"),ie(An,"width","100%"),S(xi,"class","row"),ie(xi,"display","flex"),ie(xi,"cursor","pointer"),S(xi,"data-bs-toggle","collapse"),S(xi,"data-bs-target","#rel-info"),S(xi,"aria-expanded","false"),S(xi,"aria-controls","rel-info"),S(_s,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(_s,"class","svelte-17c2th3"),S(gs,"class","card card-body svelte-17c2th3"),S(Co,"class","collapse svelte-17c2th3"),S(Co,"id","rel-info"),S(ia,"class","div-grey-box svelte-17c2th3"),ie(mc,"color","#6E6E6E"),ie(mc,"font-size","14pt"),S(Mi,"class","blocktitle"),ie(Mi,"margin","0"),ie(Mi,"width","100%"),S(Di,"class","row"),ie(Di,"display","flex"),ie(Di,"cursor","pointer"),S(Di,"data-bs-toggle","collapse"),S(Di,"data-bs-target","#relbup-info"),S(Di,"aria-expanded","false"),S(Di,"aria-controls","relbup-info"),S(Xs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Xs,"class","svelte-17c2th3"),S(vu,"class","card card-body svelte-17c2th3"),S(xs,"class","collapse svelte-17c2th3"),S(xs,"id","relbup-info"),S(rr,"class","div-grey-box svelte-17c2th3"),ie(yc,"color","#6E6E6E"),ie(yc,"font-size","14pt"),S(_u,"class","blocktitle"),ie(_u,"margin","0"),ie(_u,"width","100%"),S(Ws,"class","row"),ie(Ws,"display","flex"),ie(Ws,"cursor","pointer"),S(Ws,"data-bs-toggle","collapse"),S(Ws,"data-bs-target","#ethnic-info"),S(Ws,"aria-expanded","false"),S(Ws,"aria-controls","ethnic-info"),S(Cp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Cp,"class","svelte-17c2th3"),S(Mo,"class","card card-body svelte-17c2th3"),S(ph,"class","collapse svelte-17c2th3"),S(ph,"id","ethnic-info"),S(gu,"class","div-grey-box svelte-17c2th3"),S(li,"class","grid mt svelte-17c2th3"),Wo(()=>u[36].call(li)),S(xt,"class","accordion-body"),S(It,"id","panelsStayOpen-collapseFour"),S(It,"class","accordion-collapse collapse svelte-17c2th3"),S(It,"aria-labelledby","panelsStayOpen-headingFour"),S(lt,"class","accordion-item"),S(zf,"class","accordion-button-title"),S(Ga,"class","accordion-button collapsed"),S(Ga,"type","button"),S(Ga,"data-bs-toggle","collapse"),S(Ga,"data-bs-target","#panelsStayOpen-collapseFive"),S(Ga,"aria-expanded","false"),S(Ga,"aria-controls","panelsStayOpen-collapseFive"),S(Dp,"class","accordion-header svelte-17c2th3"),S(Dp,"id","panelsStayOpen-headingFive"),S(xu,"class","accordion-button-title-sub"),ie(bc,"color","#6E6E6E"),ie(bc,"font-size","14pt"),S(ws,"class","blocktitle"),ie(ws,"margin","0"),ie(ws,"width","100%"),S(Ys,"class","row"),ie(Ys,"display","flex"),ie(Ys,"cursor","pointer"),S(Ys,"data-bs-toggle","collapse"),S(Ys,"data-bs-target","#gen-health-info"),S(Ys,"aria-expanded","false"),S(Ys,"aria-controls","gen-health"),S(dh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(dh,"class","svelte-17c2th3"),S(Lp,"class","card card-body svelte-17c2th3"),S(Mp,"class","collapse svelte-17c2th3"),S(Mp,"id","gen-health-info"),S(Ro,"class","div-grey-box svelte-17c2th3"),ie(wc,"color","#6E6E6E"),ie(wc,"font-size","14pt"),S(Ka,"class","blocktitle"),ie(Ka,"font-size","0.87em"),ie(Ka,"margin","0"),ie(Ka,"width","100%"),S(Js,"class","row"),ie(Js,"display","flex"),ie(Js,"cursor","pointer"),S(Js,"data-bs-toggle","collapse"),S(Js,"data-bs-target","#lti-info"),S(Js,"aria-expanded","false"),S(Js,"aria-controls","lti-info"),S(Ml,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ml,"class","svelte-17c2th3"),S(Bp,"class","card card-body svelte-17c2th3"),S(Rp,"class","collapse svelte-17c2th3"),S(Rp,"id","lti-info"),S(Eu,"class","div-grey-box svelte-17c2th3"),ie(vh,"color","#6E6E6E"),ie(vh,"font-size","14pt"),S(Qs,"class","blocktitle"),ie(Qs,"font-size","1.02em"),ie(Qs,"margin","0"),ie(Qs,"width","100%"),S(wi,"class","row"),ie(wi,"display","flex"),ie(wi,"cursor","pointer"),S(wi,"data-bs-toggle","collapse"),S(wi,"data-bs-target","#lt-cond-info"),S(wi,"aria-expanded","false"),S(wi,"aria-controls","lt-cond-info"),S(Fp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Fp,"class","svelte-17c2th3"),S(Vp,"class","card card-body svelte-17c2th3"),S(Op,"class","collapse svelte-17c2th3"),S(Op,"id","lt-cond-info"),S(Ll,"class","div-grey-box svelte-17c2th3"),ie(gh,"color","#6E6E6E"),ie(gh,"font-size","14pt"),S(na,"class","blocktitle"),ie(na,"font-size","1.02em"),ie(na,"margin","0"),ie(na,"width","100%"),S(ks,"class","row"),ie(ks,"display","flex"),ie(ks,"cursor","pointer"),S(ks,"data-bs-toggle","collapse"),S(ks,"data-bs-target","#unpaid-info"),S(ks,"aria-expanded","false"),S(ks,"aria-controls","unpaid-info"),S(qp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(qp,"class","svelte-17c2th3"),S(jp,"class","card card-body svelte-17c2th3"),S(Up,"class","collapse svelte-17c2th3"),S(Up,"id","unpaid-info"),S(wr,"class","div-grey-box svelte-17c2th3"),S(lo,"class","grid mt svelte-17c2th3"),Wo(()=>u[37].call(lo)),S(Lo,"class","accordion-body"),S(gc,"id","panelsStayOpen-collapseFive"),S(gc,"class","accordion-collapse collapse svelte-17c2th3"),S(gc,"aria-labelledby","panelsStayOpen-headingFive"),S(bu,"class","accordion-item"),S(Kp,"class","accordion-button-title"),S(Bl,"class","accordion-button collapsed"),S(Bl,"type","button"),S(Bl,"data-bs-toggle","collapse"),S(Bl,"data-bs-target","#panelsStayOpen-collapseSix"),S(Bl,"aria-expanded","false"),S(Bl,"aria-controls","panelsStayOpen-collapseSix"),S(Gp,"class","accordion-header svelte-17c2th3"),S(Gp,"id","panelsStayOpen-headingSix"),S(Xn,"class","accordion-button-title-sub"),ie(xh,"color","#6E6E6E"),ie(xh,"font-size","14pt"),S(el,"class","blocktitle"),ie(el,"margin","0"),ie(el,"width","100%"),S(Bo,"class","row"),ie(Bo,"display","flex"),ie(Bo,"cursor","pointer"),S(Bo,"data-bs-toggle","collapse"),S(Bo,"data-bs-target","#acc-type-info"),S(Bo,"aria-expanded","false"),S(Bo,"aria-controls","acc-type-info"),S(Sh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Sh,"class","svelte-17c2th3"),S(Eh,"class","card card-body svelte-17c2th3"),S(wh,"class","collapse svelte-17c2th3"),S(wh,"id","acc-type-info"),S(Ol,"class","div-grey-box svelte-17c2th3"),ie(Su,"color","#6E6E6E"),ie(Su,"font-size","14pt"),S(Ts,"class","blocktitle"),ie(Ts,"margin","0"),ie(Ts,"width","100%"),S(Is,"class","row"),ie(Is,"display","flex"),ie(Is,"cursor","pointer"),S(Is,"data-bs-toggle","collapse"),S(Is,"data-bs-target","#adapt-info"),S(Is,"aria-expanded","false"),S(Is,"aria-controls","adapt-info"),S(Yp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Yp,"class","svelte-17c2th3"),S(Wp,"class","card card-body svelte-17c2th3"),S(tl,"class","collapse svelte-17c2th3"),S(tl,"id","adapt-info"),S(Vl,"class","div-grey-box svelte-17c2th3"),ie(Au,"color","#6E6E6E"),ie(Au,"font-size","14pt"),S(Tu,"class","blocktitle"),ie(Tu,"margin","0"),ie(Tu,"width","100%"),S(rl,"class","row"),ie(rl,"display","flex"),ie(rl,"cursor","pointer"),S(rl,"data-bs-toggle","collapse"),S(rl,"data-bs-target","#heat-info"),S(rl,"aria-expanded","false"),S(rl,"aria-controls","heat-info"),S(Jp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Jp,"class","svelte-17c2th3"),S(Nl,"class","card card-body svelte-17c2th3"),S(il,"class","collapse svelte-17c2th3"),S(il,"id","heat-info"),S(Fl,"class","div-grey-box svelte-17c2th3"),ie(Ah,"color","#6E6E6E"),ie(Ah,"font-size","14pt"),S(Pu,"class","blocktitle"),ie(Pu,"margin","0"),ie(Pu,"width","100%"),S(nl,"class","row"),ie(nl,"display","flex"),ie(nl,"cursor","pointer"),S(nl,"data-bs-toggle","collapse"),S(nl,"data-bs-target","#renew-info"),S(nl,"aria-expanded","false"),S(nl,"aria-controls","renew-info"),S(kc,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(kc,"class","svelte-17c2th3"),S(Cu,"class","card card-body svelte-17c2th3"),S(zh,"class","collapse svelte-17c2th3"),S(zh,"id","renew-info"),S(zu,"class","div-grey-box svelte-17c2th3"),ie(Ic,"color","#6E6E6E"),ie(Ic,"font-size","14pt"),S(jl,"class","blocktitle"),ie(jl,"margin","0"),ie(jl,"width","100%"),S(As,"class","row"),ie(As,"display","flex"),ie(As,"cursor","pointer"),S(As,"data-bs-toggle","collapse"),S(As,"data-bs-target","#tenure-info"),S(As,"aria-expanded","false"),S(As,"aria-controls","tenure-info"),S(uo,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(uo,"class","svelte-17c2th3"),S(mi,"class","card card-body svelte-17c2th3"),S(Ph,"class","collapse svelte-17c2th3"),S(Ph,"id","tenure-info"),S(Ul,"class","div-grey-box svelte-17c2th3"),ie(Oo,"color","#6E6E6E"),ie(Oo,"font-size","14pt"),S(Mu,"class","blocktitle"),ie(Mu,"margin","0"),ie(Mu,"width","100%"),S(Ps,"class","row"),ie(Ps,"display","flex"),ie(Ps,"cursor","pointer"),S(Ps,"data-bs-toggle","collapse"),S(Ps,"data-bs-target","#car-info"),S(Ps,"aria-expanded","false"),S(Ps,"aria-controls","car-info"),S(p,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(p,"class","svelte-17c2th3"),S(i,"class","card card-body svelte-17c2th3"),S(t,"class","collapse svelte-17c2th3"),S(t,"id","car-info"),S(Zl,"class","div-grey-box svelte-17c2th3"),S(aa,"class","grid mt svelte-17c2th3"),Wo(()=>u[38].call(aa)),S(en,"class","accordion-body"),S($s,"id","panelsStayOpen-collapseSix"),S($s,"class","accordion-collapse collapse svelte-17c2th3"),S($s,"aria-labelledby","panelsStayOpen-headingSix"),S(_h,"class","accordion-item"),S(oe,"class","accordion-button-title"),S(W,"class","accordion-button collapsed"),S(W,"type","button"),S(W,"data-bs-toggle","collapse"),S(W,"data-bs-target","#panelsStayOpen-collapseSeven"),S(W,"aria-expanded","false"),S(W,"aria-controls","panelsStayOpen-collapseSeven"),S(K,"class","accordion-header svelte-17c2th3"),S(K,"id","panelsStayOpen-headingSeven"),S(He,"class","accordion-button-title-sub"),ie(ft,"color","#6E6E6E"),ie(ft,"font-size","14pt"),S(Vt,"class","blocktitle"),ie(Vt,"margin","0"),ie(Vt,"width","100%"),S(rt,"class","row"),ie(rt,"display","flex"),ie(rt,"cursor","pointer"),S(rt,"data-bs-toggle","collapse"),S(rt,"data-bs-target","#dep-child-info"),S(rt,"aria-expanded","false"),S(rt,"aria-controls","dep-child-info"),S(Rr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Rr,"class","svelte-17c2th3"),S(_t,"class","card card-body svelte-17c2th3"),S(er,"class","collapse svelte-17c2th3"),S(er,"id","dep-child-info"),S(vt,"class","div-grey-box svelte-17c2th3"),ie(ti,"color","#6E6E6E"),ie(ti,"font-size","14pt"),S(ci,"class","blocktitle"),ie(ci,"margin","0"),ie(ci,"width","100%"),S(yi,"class","row"),ie(yi,"display","flex"),ie(yi,"cursor","pointer"),S(yi,"data-bs-toggle","collapse"),S(yi,"data-bs-target","#hh-comp-info"),S(yi,"aria-expanded","false"),S(yi,"aria-controls","hh-comp-info"),S(fn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(fn,"class","svelte-17c2th3"),S(gr,"class","card card-body svelte-17c2th3"),S(Ir,"class","collapse svelte-17c2th3"),S(Ir,"id","hh-comp-info"),S(ei,"class","div-grey-box svelte-17c2th3"),S(Vo,"class","div-white-box"),S($e,"class","grid mt svelte-17c2th3"),Wo(()=>u[39].call($e)),S(we,"class","accordion-body"),S(pe,"id","panelsStayOpen-collapseSeven"),S(pe,"class","accordion-collapse collapse svelte-17c2th3"),S(pe,"aria-labelledby","panelsStayOpen-headingSeven"),S(F,"class","accordion-item"),S(Gl,"class","accordion-button-title"),S(Pn,"class","accordion-button collapsed"),S(Pn,"type","button"),S(Pn,"data-bs-toggle","collapse"),S(Pn,"data-bs-target","#panelsStayOpen-collapseEight"),S(Pn,"aria-expanded","false"),S(Pn,"aria-controls","panelsStayOpen-collapseEight"),S(Ha,"class","accordion-header svelte-17c2th3"),S(Ha,"id","panelsStayOpen-headingEight"),S(zc,"class","accordion-button-title-sub"),ie(Hl,"color","#6E6E6E"),ie(Hl,"font-size","14pt"),S(Fo,"class","blocktitle"),ie(Fo,"font-size","0.95em"),ie(Fo,"margin","0"),ie(Fo,"width","100%"),S(Ca,"class","row"),ie(Ca,"display","flex"),ie(Ca,"cursor","pointer"),S(Ca,"data-bs-toggle","collapse"),S(Ca,"data-bs-target","#marital-info"),S(Ca,"aria-expanded","false"),S(Ca,"aria-controls","marital-info"),S(Ru,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ru,"class","svelte-17c2th3"),S(Wl,"class","card card-body svelte-17c2th3"),S(Xl,"class","collapse svelte-17c2th3"),S(Xl,"id","marital-info"),S(Pa,"class","div-grey-box svelte-17c2th3"),S(Cc,"class","div-white-box"),S(nf,"class","div-white-box"),S(_a,"class","grid mt svelte-17c2th3"),Wo(()=>u[40].call(_a)),S(Wa,"class","accordion-body"),S(Xa,"id","panelsStayOpen-collapseEight"),S(Xa,"class","accordion-collapse collapse svelte-17c2th3"),S(Xa,"aria-labelledby","panelsStayOpen-headingEight"),S(Yr,"class","accordion-item"),S(Ou,"class","accordion-button-title"),S(Yl,"class","accordion-button collapsed"),S(Yl,"type","button"),S(Yl,"data-bs-toggle","collapse"),S(Yl,"data-bs-target","#panelsStayOpen-collapseNine"),S(Yl,"aria-expanded","false"),S(Yl,"aria-controls","panelsStayOpen-collapseNine"),S(Mc,"class","accordion-header svelte-17c2th3"),S(Mc,"id","panelsStayOpen-headingNine"),S(Lc,"class","accordion-button-title-sub"),ie(Oh,"color","#6E6E6E"),ie(Oh,"font-size","14pt"),S(No,"class","blocktitle"),ie(No,"margin","0"),ie(No,"width","100%"),S(Ds,"class","row"),ie(Ds,"display","flex"),ie(Ds,"cursor","pointer"),S(Ds,"data-bs-toggle","collapse"),S(Ds,"data-bs-target","#sexual-orientation-info"),S(Ds,"aria-expanded","false"),S(Ds,"aria-controls","sexual-orientation-info"),S(Fh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Fh,"class","svelte-17c2th3"),S(Yn,"class","card card-body svelte-17c2th3"),S(Vh,"class","collapse svelte-17c2th3"),S(Vh,"id","sexual-orientation-info"),S(ll,"class","div-grey-box svelte-17c2th3"),S(Vu,"class","div-white-box"),S(Fu,"class","div-white-box"),S(Ya,"class","grid mt svelte-17c2th3"),Wo(()=>u[41].call(Ya)),S(ba,"class","accordion-body"),S(Bh,"id","panelsStayOpen-collapseNine"),S(Bh,"class","accordion-collapse collapse svelte-17c2th3"),S(Bh,"aria-labelledby","panelsStayOpen-headingNine"),S(Dc,"class","accordion-item"),S(qh,"class","accordion-button-title"),S(Ms,"class","accordion-button collapsed"),S(Ms,"type","button"),S(Ms,"data-bs-toggle","collapse"),S(Ms,"data-bs-target","#panelsStayOpen-collapseTen"),S(Ms,"aria-expanded","false"),S(Ms,"aria-controls","panelsStayOpen-collapseTen"),S(jh,"class","accordion-header svelte-17c2th3"),S(jh,"id","panelsStayOpen-headingTen"),S(Zh,"class","accordion-button-title-sub"),ie(uf,"color","#6E6E6E"),ie(uf,"font-size","14pt"),S(Ql,"class","blocktitle"),ie(Ql,"margin","0"),ie(Ql,"width","100%"),S(ul,"class","row"),ie(ul,"display","flex"),ie(ul,"cursor","pointer"),S(ul,"data-bs-toggle","collapse"),S(ul,"data-bs-target","#quals-info"),S(ul,"aria-expanded","false"),S(ul,"aria-controls","quals-info"),S(Nd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Nd,"class","svelte-17c2th3"),S(mn,"class","card card-body svelte-17c2th3"),S(cf,"class","collapse svelte-17c2th3"),S(cf,"id","quals-info"),S(Rs,"class","div-grey-box svelte-17c2th3"),ie(Ud,"color","#6E6E6E"),ie(Ud,"font-size","14pt"),S(Kh,"class","blocktitle"),ie(Kh,"margin","0"),ie(Kh,"width","100%"),S(Uu,"class","row"),ie(Uu,"display","flex"),ie(Uu,"cursor","pointer"),S(Uu,"data-bs-toggle","collapse"),S(Uu,"data-bs-target","#econ-act-info"),S(Uu,"aria-expanded","false"),S(Uu,"aria-controls","econ-act-info"),S(Zd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Zd,"class","svelte-17c2th3"),S(qd,"class","card card-body svelte-17c2th3"),S(jd,"class","collapse svelte-17c2th3"),S(jd,"id","econ-act-info"),S(Gh,"class","div-grey-box svelte-17c2th3"),ie(Gd,"color","#6E6E6E"),ie(Gd,"font-size","14pt"),S(Xh,"class","blocktitle"),ie(Xh,"margin","0"),ie(Xh,"width","100%"),S(ju,"class","row"),ie(ju,"display","flex"),ie(ju,"cursor","pointer"),S(ju,"data-bs-toggle","collapse"),S(ju,"data-bs-target","#hours-info"),S(ju,"aria-expanded","false"),S(ju,"aria-controls","hours-info"),S(Xd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Xd,"class","svelte-17c2th3"),S(Hd,"class","card card-body svelte-17c2th3"),S(Kd,"class","collapse svelte-17c2th3"),S(Kd,"id","hours-info"),S(Hh,"class","div-grey-box svelte-17c2th3"),ie(Wd,"color","#6E6E6E"),ie(Wd,"font-size","14pt"),S(Yh,"class","blocktitle"),ie(Yh,"margin","0"),ie(Yh,"width","100%"),S(qu,"class","row"),ie(qu,"display","flex"),ie(qu,"cursor","pointer"),S(qu,"data-bs-toggle","collapse"),S(qu,"data-bs-target","#industry-info"),S(qu,"aria-expanded","false"),S(qu,"aria-controls","industry-info"),S(Qd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Qd,"class","svelte-17c2th3"),S(Jd,"class","card card-body svelte-17c2th3"),S(Yd,"class","collapse svelte-17c2th3"),S(Yd,"id","industry-info"),S(Wh,"class","div-grey-box svelte-17c2th3"),ie($d,"color","#6E6E6E"),ie($d,"font-size","14pt"),S(Qh,"class","blocktitle"),ie(Qh,"margin","0"),ie(Qh,"width","100%"),S(Zu,"class","row"),ie(Zu,"display","flex"),ie(Zu,"cursor","pointer"),S(Zu,"data-bs-toggle","collapse"),S(Zu,"data-bs-target","#occupation-info"),S(Zu,"aria-expanded","false"),S(Zu,"aria-controls","occupation-info"),S(rm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(rm,"class","svelte-17c2th3"),S(tm,"class","card card-body svelte-17c2th3"),S(em,"class","collapse svelte-17c2th3"),S(em,"id","occupation-info"),S(Jh,"class","div-grey-box svelte-17c2th3"),S(xa,"class","grid mt svelte-17c2th3"),Wo(()=>u[42].call(xa)),S(Ls,"class","accordion-body"),S(Nu,"id","panelsStayOpen-collapseTen"),S(Nu,"class","accordion-collapse collapse svelte-17c2th3"),S(Nu,"aria-labelledby","panelsStayOpen-headingTen"),S(Rc,"class","accordion-item"),S(Gv,"class","accordion-button-title"),S(Bc,"class","accordion-button collapsed"),S(Bc,"type","button"),S(Bc,"data-bs-toggle","collapse"),S(Bc,"data-bs-target","#panelsStayOpen-collapseEleven"),S(Bc,"aria-expanded","false"),S(Bc,"aria-controls","panelsStayOpen-collapseEleven"),S(im,"class","accordion-header svelte-17c2th3"),S(im,"id","panelsStayOpen-headingEleven"),S(Kv,"class","accordion-button-title-sub"),ie(nm,"color","#6E6E6E"),ie(nm,"font-size","14pt"),S(ep,"class","blocktitle"),ie(ep,"margin","0"),ie(ep,"width","100%"),S(Gu,"class","row"),ie(Gu,"display","flex"),ie(Gu,"cursor","pointer"),S(Gu,"data-bs-toggle","collapse"),S(Gu,"data-bs-target","#method-travel-work-info"),S(Gu,"aria-expanded","false"),S(Gu,"aria-controls","method-travel-work-info"),S(sm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(sm,"class","svelte-17c2th3"),S(om,"class","card card-body svelte-17c2th3"),S(am,"class","collapse svelte-17c2th3"),S(am,"id","method-travel-work-info"),S($h,"class","div-grey-box svelte-17c2th3"),ie(lm,"color","#6E6E6E"),ie(lm,"font-size","14pt"),S(rp,"class","blocktitle"),ie(rp,"margin","0"),ie(rp,"width","100%"),S(Ku,"class","row"),ie(Ku,"display","flex"),ie(Ku,"cursor","pointer"),S(Ku,"data-bs-toggle","collapse"),S(Ku,"data-bs-target","#method-travel-study-info"),S(Ku,"aria-expanded","false"),S(Ku,"aria-controls","method-travel-study-info"),S(hm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(hm,"class","svelte-17c2th3"),S(cm,"class","card card-body svelte-17c2th3"),S(um,"class","collapse svelte-17c2th3"),S(um,"id","method-travel-study-info"),S(tp,"class","div-grey-box svelte-17c2th3"),S(Ug,"class","div-white-box"),ie(pm,"color","#6E6E6E"),ie(pm,"font-size","14pt"),S(np,"class","blocktitle"),ie(np,"margin","0"),ie(np,"width","100%"),S(Hu,"class","row"),ie(Hu,"display","flex"),ie(Hu,"cursor","pointer"),S(Hu,"data-bs-toggle","collapse"),S(Hu,"data-bs-target","#distance-travel-work-info"),S(Hu,"aria-expanded","false"),S(Hu,"aria-controls","distance-travel-work-info"),S(mm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(mm,"class","svelte-17c2th3"),S(dm,"class","card card-body svelte-17c2th3"),S(fm,"class","collapse svelte-17c2th3"),S(fm,"id","distance-travel-work-info"),S(ip,"class","div-grey-box svelte-17c2th3"),ie(vm,"color","#6E6E6E"),ie(vm,"font-size","14pt"),S(op,"class","blocktitle"),ie(op,"margin","0"),ie(op,"width","100%"),S(Xu,"class","row"),ie(Xu,"display","flex"),ie(Xu,"cursor","pointer"),S(Xu,"data-bs-toggle","collapse"),S(Xu,"data-bs-target","#distance-travel-study-info"),S(Xu,"aria-expanded","false"),S(Xu,"aria-controls","distance-travel-study-info"),S(_m,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(_m,"class","svelte-17c2th3"),S(gm,"class","card card-body svelte-17c2th3"),S(ym,"class","collapse svelte-17c2th3"),S(ym,"id","distance-travel-study-info"),S(ap,"class","div-grey-box svelte-17c2th3"),S(ho,"class","grid mt svelte-17c2th3"),Wo(()=>u[43].call(ho)),S(Oc,"class","accordion-body"),S(td,"id","panelsStayOpen-collapseEleven"),S(td,"class","accordion-collapse collapse svelte-17c2th3"),S(td,"aria-labelledby","panelsStayOpen-headingEleven"),S(ed,"class","accordion-item"),S(Hv,"class","accordion-button-title"),S(Vc,"class","accordion-button collapsed"),S(Vc,"type","button"),S(Vc,"data-bs-toggle","collapse"),S(Vc,"data-bs-target","#panelsStayOpen-collapseTwelve"),S(Vc,"aria-expanded","false"),S(Vc,"aria-controls","panelsStayOpen-collapseTwelveTwelve"),S(bm,"class","accordion-header svelte-17c2th3"),S(bm,"id","panelsStayOpen-headingTwelve"),S(Xv,"class","accordion-button-title-sub"),ie(xm,"color","#6E6E6E"),ie(xm,"font-size","14pt"),S(lp,"class","blocktitle"),ie(lp,"margin","0"),ie(lp,"width","100%"),S(Wu,"class","row"),ie(Wu,"display","flex"),ie(Wu,"cursor","pointer"),S(Wu,"data-bs-toggle","collapse"),S(Wu,"data-bs-target","#address-1yr-info"),S(Wu,"aria-expanded","false"),S(Wu,"aria-controls","address-1yr-info"),S(Sm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Sm,"class","svelte-17c2th3"),S(Em,"class","card card-body svelte-17c2th3"),S(wm,"class","collapse svelte-17c2th3"),S(wm,"id","address-1yr-info"),S(sp,"class","div-grey-box svelte-17c2th3"),ie(km,"color","#6E6E6E"),ie(km,"font-size","14pt"),S(cp,"class","blocktitle"),ie(cp,"margin","0"),ie(cp,"width","100%"),S(Yu,"class","row"),ie(Yu,"display","flex"),ie(Yu,"cursor","pointer"),S(Yu,"data-bs-toggle","collapse"),S(Yu,"data-bs-target","#year-arr-info"),S(Yu,"aria-expanded","false"),S(Yu,"aria-controls","year-arr-info"),S(Am,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Am,"class","svelte-17c2th3"),S(Tm,"class","card card-body svelte-17c2th3"),S(Im,"class","collapse svelte-17c2th3"),S(Im,"id","year-arr-info"),S(up,"class","div-grey-box svelte-17c2th3"),S(Hg,"class","div-white-box"),S($l,"class","grid mt svelte-17c2th3"),Wo(()=>u[44].call($l)),S(Fc,"class","accordion-body"),S(sd,"id","panelsStayOpen-collapseTwelve"),S(sd,"class","accordion-collapse collapse svelte-17c2th3"),S(sd,"aria-labelledby","panelsStayOpen-headingTwelve"),S(od,"class","accordion-item"),S(Ge,"class","accordion"),S(Ge,"id","accordionPanelsStayOpenExample")},m(J,ze){Pe(J,h,ze),w(h,f),w(f,v),w(v,_),w(_,x),a.m(z,v),w(v,A),Nc.m(v,null),w(v,O),w(f,N),w(f,Z),w(f,j),w(j,he),w(f,Ae),w(f,Ee),w(Ee,Ve),Uc.m(Ee,null),w(Ee,je),qo&&qo.m(Ee,null),w(Ee,Bt),jc.m(Ee,null),w(h,Mt),w(h,mt),w(mt,et),w(et,Ar),w(Ar,Sr),w(et,or),jt(kt,et,null),w(et,Tt),w(et,Pr),w(Pr,Ot),w(et,zr),w(et,at),w(at,cr),w(cr,Jr),w(at,hi),w(at,Tr),w(Tr,gn),w(at,Fe),w(at,sr),w(sr,jn),Pe(J,sa,ze),Pe(J,Ti,ze),w(Ti,_n),w(_n,ri),w(ri,Ia),w(_n,br),qc.m(_n,null),w(_n,qn),Zo&&Zo.m(_n,null),w(Ti,Ja),w(Ti,Vr),w(Vr,Lt),w(Lt,Bi),w(Bi,Oi),w(Bi,ur),ur.innerHTML=Jn,w(Vr,gi),w(Vr,ii),w(ii,Fr),w(Fr,pi),w(Fr,Ai),w(Ai,ni),w(ni,fi),w(Vr,hr),w(Vr,ar),w(ar,Zn),w(Vr,po),w(Vr,fo),wa&&wa.m(Vr,null),w(Vr,Ra),Ea&&Ea.m(Vr,null),w(Ti,es),w(Ti,di),w(di,an),w(an,on),w(on,mo),w(on,la),la.innerHTML=fl,w(di,ts),w(di,Gn),w(Gn,xn),w(xn,ua),w(xn,Qn),w(Qn,ca),w(ca,Nr),w(di,U),w(di,G),w(G,re),w(di,le),w(di,ye),Sa&&Sa.m(di,null),w(di,_e),ka&&ka.m(di,null),Pe(J,H,ze),Pe(J,ae,ze),w(ae,Se),w(Se,Ue),Zc.m(Ue,null),w(ae,Ke),w(ae,Me),jt(qe,Me,null),w(ae,st),w(ae,Re),Gc.m(Re,null),w(ae,nt),w(ae,Ye),Kc.m(Ye,null),tt=Yo(ae,u[31].bind(ae)),Pe(J,Ft,ze),Pe(J,Ge,ze),w(Ge,Zt),w(Zt,lr),w(lr,Ct),w(Ct,Qt),w(Qt,Jt),w(Zt,zi),w(Zt,$t),w($t,mr),w(mr,dr),w(mr,tr),w(mr,Vi),w(mr,ha),w(ha,_i),w(mr,Hi),w(mr,wn),w(wn,Xi),w(Xi,vr),w(vr,Dn),w(Dn,Fi),w(Dn,Gr),Gr.innerHTML=$n,w(Xi,Cr),w(Xi,En),w(En,sn),w(sn,rc),w(Xi,Ni),w(Xi,vo),Hc.m(Xi,null),w(wn,ln),w(wn,Kr),w(Kr,Pi),w(Pi,ai),w(ai,yo),w(ai,rs),rs.innerHTML=bd,w(Kr,dl),w(Kr,ml),w(ml,is),w(is,gp),w(Kr,ru),w(Kr,ns),w(ns,iu),w(ns,vl),w(wn,eh),w(wn,Sn),w(Sn,Si),w(Si,Mn),w(Mn,ke),w(Mn,Ui),Ui.innerHTML=Ln,w(Sn,Hr),w(Sn,pa),w(pa,Rn),w(Rn,Ci),w(Sn,nu),w(Sn,au),w(au,ff),w(Sn,bp),Go&&Go.m(Sn,null),df=Yo(wn,u[32].bind(wn)),w(Ge,xp),w(Ge,Bs),w(Bs,ou),w(ou,_o),w(_o,th),w(th,ic),w(Bs,nc),w(Bs,yl),w(yl,oi),w(oi,wp),w(oi,as),w(oi,gl),w(oi,xo),w(xo,Os),w(oi,_l),w(oi,Bn),w(Bn,Wi),w(Wi,Qa),w(Qa,os),w(os,Lr),w(os,ac),ac.innerHTML=mf,w(Wi,vf),w(Wi,su),w(su,lu),w(lu,yf),w(lu,$a),w($a,wo),w(wo,bl),w(Wi,gf),w(Wi,xl),jt(Vs,xl,null),w(Wi,wl),Ko&&Ko.m(Wi,null),w(Wi,Ep),w(Wi,ss),jt(Ba,ss,null),w(Bn,_f),w(Bn,Eo),w(Eo,kr),w(kr,rh),w(Eo,xd),jt(eo,Eo,null),w(Bn,bf),w(Bn,Fs),w(Fs,to),w(to,ro),w(ro,uu),w(ro,ls),ls.innerHTML=xf,w(Fs,oc),w(Fs,So),w(So,cu),w(cu,hu),w(cu,ea),w(ea,ih),w(ih,wf),w(Fs,Ef),jt(Oa,Fs,null),nh=Yo(Bn,u[33].bind(Bn)),w(Ge,ah),w(Ge,Ns),w(Ns,Us),w(Us,us),w(us,El),w(El,Sp),w(Ns,Sf),w(Ns,Sl),w(Sl,Va),w(Va,kp),w(Va,oh),w(Va,lc),w(Va,uc),w(uc,kl),w(Va,Qr),w(Va,fa),w(fa,da),w(da,On),w(On,Xt),w(Xt,jr),w(Xt,Vn),Vn.innerHTML=Ip,w(da,pu),w(da,cs),w(cs,cc),w(cc,wd),w(cc,hs),w(hs,Il),w(Il,ps),w(da,ji),jt(ko,da,null),w(fa,kf),w(fa,qr),w(qr,ot),w(ot,qi),w(qi,sh),w(qi,Io),Io.innerHTML=fs,w(qr,ma),w(qr,Tl),w(Tl,Je),w(Je,Tp),w(Je,js),w(js,hc),w(hc,Fa),w(qr,va),jt(ds,qr,null),w(fa,lh),w(fa,Zi),w(Zi,kn),w(kn,To),w(To,pc),w(To,Al),Al.innerHTML=Ed,w(Zi,io),w(Zi,Fn),w(Fn,Wt),w(Wt,Ao),w(Wt,Kn),w(Kn,Yi),w(Yi,zl),w(Zi,qs),jt(Hn,Zi,null),ta=Yo(fa,u[34].bind(fa)),w(Ge,fc),w(Ge,yt),w(yt,pt),w(pt,Na),w(Na,un),w(un,no),w(yt,In),w(yt,ra),w(ra,ao),w(ao,uh),w(ao,Ji),w(ao,If),w(ao,zo),w(zo,Ap),w(ao,ms),w(ao,bi),w(bi,Ta),w(Ta,cn),w(cn,oo),w(oo,fu),w(oo,vs),vs.innerHTML=Sd,w(Ta,du),w(Ta,so),w(so,Pl),w(Pl,Zs),w(Pl,Ua),w(Ua,mu),w(mu,Gs),w(Ta,ja),jt(Ks,Ta,null),w(bi,dc),w(bi,Po),w(Po,Aa),w(Aa,n),w(n,s),w(n,o),o.innerHTML=c,w(Po,m),w(Po,E),w(E,k),w(k,P),w(k,B),w(B,q),w(q,Y),w(Po,Q),jt($,Po,null),w(bi,ce),w(bi,se),w(se,de),w(de,ne),w(ne,me),w(ne,ge),ge.innerHTML=Ie,w(se,Be),w(se,Ce),w(Ce,Oe),w(Oe,Ze),w(Oe,Xe),w(Xe,We),w(We,ut),w(se,wt),jt(bt,se,null),St=Yo(bi,u[35].bind(bi)),w(Ge,pr),w(Ge,lt),w(lt,At),w(At,Rt),w(Rt,zt),w(zt,Dt),w(lt,Ht),w(lt,It),w(It,xt),w(xt,Qi),w(xt,Tn),w(xt,hn),w(xt,Xr),w(Xr,ki),w(xt,ya),w(xt,li),w(li,ia),w(ia,xi),w(xi,An),w(An,qa),w(An,ys),ys.innerHTML=ch,w(ia,Hs),w(ia,Co),w(Co,gs),w(gs,Do),w(gs,_s),w(_s,Za),w(Za,$i),w(ia,bs),jt(za,ia,null),w(li,Cl),w(li,rr),w(rr,Di),w(Di,Mi),w(Mi,Dl),w(Mi,mc),mc.innerHTML=Tf,w(rr,kd),w(rr,xs),w(xs,vu),w(vu,yu),w(vu,Xs),w(Xs,zp),w(zp,vc),w(rr,ga),jt(hh,rr,null),w(li,mv),w(li,gu),w(gu,Ws),w(Ws,_u),w(_u,Yy),w(_u,yc),yc.innerHTML=m0,w(gu,Af),w(gu,ph),w(ph,Mo),w(Mo,Pp),w(Mo,Cp),w(Cp,Id),w(Id,Jy),w(gu,Qy),jt(fh,gu,null),u_=Yo(li,u[36].bind(li)),w(Ge,$y),w(Ge,bu),w(bu,Dp),w(Dp,Ga),w(Ga,zf),w(zf,Gi),w(bu,Pf),w(bu,gc),w(gc,Lo),w(Lo,Cf),w(Lo,Td),w(Lo,vv),w(Lo,xu),w(xu,Ad),w(Lo,zd),w(Lo,lo),w(lo,Ro),w(Ro,Ys),w(Ys,ws),w(ws,eg),w(ws,bc),bc.innerHTML=tg,w(ws,Es),w(Ro,rg),w(Ro,Mp),w(Mp,Lp),w(Lp,ig),w(Lp,dh),w(dh,wu),w(wu,ng),w(Ro,ag),jt(xc,Ro,null),w(lo,yv),w(lo,Eu),w(Eu,Js),w(Js,Ka),w(Ka,og),w(Ka,wc),wc.innerHTML=Pd,w(Eu,Ss),w(Eu,Rp),w(Rp,Bp),w(Bp,sg),w(Bp,Ml),w(Ml,Df),w(Df,lg),w(Eu,ug),jt(mh,Eu,null),w(lo,cg),w(lo,Ll),w(Ll,wi),w(wi,Qs),w(Qs,gv),w(Qs,vh),vh.innerHTML=v0,w(Qs,_v),w(Ll,hg),w(Ll,Op),w(Op,Vp),w(Vp,bv),w(Vp,Fp),w(Fp,Cd),w(Cd,Np),w(Ll,xv),jt(Ec,Ll,null),w(lo,Mf),w(lo,wr),w(wr,ks),w(ks,na),w(na,yh),w(na,gh),gh.innerHTML=y0,w(wr,pg),w(wr,Up),w(Up,jp),w(jp,fg),w(jp,qp),w(qp,Dd),w(Dd,dg),w(wr,mg),jt(Rl,wr,null),Zp=Yo(lo,u[37].bind(lo)),w(Ge,wv),w(Ge,_h),w(_h,Gp),w(Gp,Bl),w(Bl,Kp),w(Kp,Lf),w(_h,Hp),w(_h,$s),w($s,en),w(en,bh),w(en,Xp),w(en,Rf),w(en,Xn),w(Xn,Ev),w(en,Sv),w(en,aa),w(aa,Ol),w(Ol,Bo),w(Bo,el),w(el,vg),w(el,xh),xh.innerHTML=Bf,w(Ol,Md),w(Ol,wh),w(wh,Eh),w(Eh,yg),w(Eh,Sh),w(Sh,Of),w(Of,kv),w(Ol,Iv),jt(kh,Ol,null),w(aa,gg),w(aa,Vl),w(Vl,Is),w(Is,Ts),w(Ts,Tv),w(Ts,Su),Su.innerHTML=Av,w(Vl,Vf),w(Vl,tl),w(tl,Wp),w(Wp,_g),w(Wp,Yp),w(Yp,ku),w(ku,Ld),w(Vl,zv),jt(Iu,Vl,null),w(aa,Pv),w(aa,Fl),w(Fl,rl),w(rl,Tu),w(Tu,bg),w(Tu,Au),Au.innerHTML=xg,w(Fl,wg),w(Fl,il),w(il,Nl),w(Nl,Dr),w(Nl,Jp),w(Jp,Qp),w(Qp,Ih),w(Fl,Eg),jt(Th,Fl,null),w(aa,Sg),w(aa,zu),w(zu,nl),w(nl,Pu),w(Pu,kg),w(Pu,Ah),Ah.innerHTML=c_,w(zu,Cv),w(zu,zh),w(zh,Cu),w(Cu,Sc),w(Cu,kc),w(kc,Du),w(Du,Dv),w(zu,Ki),jt(Mr,zu,null),w(aa,Mv),w(aa,Ul),w(Ul,As),w(As,jl),w(jl,Lv),w(jl,Ic),Ic.innerHTML=$p,w(Ul,Tc),w(Ul,Ph),w(Ph,mi),w(mi,ef),w(mi,uo),w(uo,Ch),w(Ch,Ff),w(Ul,Rd),jt(zs,Ul,null),w(aa,ql),w(aa,Zl),w(Zl,Ps),w(Ps,Mu),w(Mu,pn),w(Mu,Oo),Oo.innerHTML=h_,w(Zl,e),w(Zl,t),w(t,i),w(i,l),w(i,p),w(p,d),w(d,y),w(Zl,I),jt(C,Zl,null),D=Yo(aa,u[38].bind(aa)),w(Ge,V),w(Ge,F),w(F,K),w(K,W),w(W,oe),w(oe,ue),w(F,ve),w(F,pe),w(pe,we),w(we,Te),w(we,Le),w(we,Ne),w(we,He),w(He,Qe),w(we,gt),w(we,$e),w($e,vt),w(vt,rt),w(rt,Vt),w(Vt,Pt),w(Vt,ft),ft.innerHTML=ir,w(vt,Gt),w(vt,er),w(er,_t),w(_t,yr),w(_t,Rr),w(Rr,ui),w(ui,vi),w(vt,$r),jt(Zr,vt,null),w($e,tn),w($e,ei),w(ei,yi),w(yi,ci),w(ci,Wn),w(ci,ti),ti.innerHTML=Nn,w(ei,nr),w(ei,Ir),w(Ir,gr),w(gr,fr),w(gr,fn),w(fn,dn),w(dn,Wr),w(ei,Li),jt(Ri,ei,null),w($e,_r),w($e,Vo),co=Yo($e,u[39].bind($e)),w(Ge,al),w(Ge,Yr),w(Yr,Ha),w(Ha,Pn),w(Pn,Gl),w(Gl,Ac),w(Yr,Dh),w(Yr,Xa),w(Xa,Wa),w(Wa,Nf),w(Wa,Mh),w(Wa,Uf),w(Wa,zc),w(zc,Kl),w(Wa,tf),w(Wa,_a),w(_a,Pa),w(Pa,Ca),w(Ca,Fo),w(Fo,jf),w(Fo,Hl),Hl.innerHTML=Bd,w(Pa,qf),w(Pa,Xl),w(Xl,Wl),w(Wl,rf),w(Wl,Ru),w(Ru,Bu),w(Bu,Zf),w(Pa,Lh),jt(ol,Pa,null),w(_a,Pc),w(_a,Cc),w(_a,Rh),w(_a,nf),Ig=Yo(_a,u[40].bind(_a)),w(Ge,Od),w(Ge,Dc),w(Dc,Mc),w(Mc,Yl),w(Yl,Ou),w(Ou,Ii),w(Dc,Cs),w(Dc,Bh),w(Bh,ba),w(ba,Vd),w(ba,af),w(ba,sl),w(ba,Lc),w(Lc,of),w(ba,Kf),w(ba,Ya),w(Ya,ll),w(ll,Ds),w(Ds,No),w(No,Rv),w(No,Oh),Oh.innerHTML=p_,w(ll,Bv),w(ll,Vh),w(Vh,Yn),w(Yn,Hf),w(Yn,Fh),w(Fh,Uo),w(Uo,Tg),w(ll,Ov),jt(jo,ll,null),w(Ya,Nh),w(Ya,Vu),w(Ya,Uh),w(Ya,Fu),Ag=Yo(Ya,u[41].bind(Ya)),w(Ge,Vv),w(Ge,Rc),w(Rc,jh),w(jh,Ms),w(Ms,qh),w(qh,Jl),w(Rc,Fv),w(Rc,Nu),w(Nu,Ls),w(Ls,Nv),w(Ls,Fd),w(Ls,Uv),w(Ls,Zh),w(Zh,jv),w(Ls,lf),w(Ls,xa),w(xa,Rs),w(Rs,ul),w(ul,Ql),w(Ql,zg),w(Ql,uf),uf.innerHTML=g0,w(Rs,Pg),w(Rs,cf),w(cf,mn),w(mn,Cg),w(mn,Dg),w(mn,cl),w(mn,Xf),w(mn,qv),w(mn,hf),w(mn,Zv),w(mn,_0),w(mn,b0),w(mn,x0),w(mn,w0),w(mn,E0),w(mn,S0),w(mn,k0),w(mn,I0),w(mn,T0),w(mn,A0),w(mn,Nd),w(Nd,Mg),w(Mg,z0),w(Rs,P0),jt(Wf,Rs,null),w(xa,C0),w(xa,Gh),w(Gh,Uu),w(Uu,Kh),w(Kh,D0),w(Kh,Ud),Ud.innerHTML=rI,w(Gh,M0),w(Gh,jd),w(jd,qd),w(qd,L0),w(qd,Zd),w(Zd,Lg),w(Lg,R0),w(Gh,B0),jt(Yf,Gh,null),w(xa,O0),w(xa,Hh),w(Hh,ju),w(ju,Xh),w(Xh,V0),w(Xh,Gd),Gd.innerHTML=iI,w(Hh,F0),w(Hh,Kd),w(Kd,Hd),w(Hd,N0),w(Hd,Xd),w(Xd,Rg),w(Rg,U0),w(Hh,j0),jt(Jf,Hh,null),w(xa,q0),w(xa,Wh),w(Wh,qu),w(qu,Yh),w(Yh,Z0),w(Yh,Wd),Wd.innerHTML=nI,w(Wh,G0),w(Wh,Yd),w(Yd,Jd),w(Jd,K0),w(Jd,Qd),w(Qd,Bg),w(Bg,H0),w(Wh,X0),jt(Qf,Wh,null),w(xa,W0),w(xa,Jh),w(Jh,Zu),w(Zu,Qh),w(Qh,Y0),w(Qh,$d),$d.innerHTML=aI,w(Jh,J0),w(Jh,em),w(em,tm),w(tm,Q0),w(tm,rm),w(rm,Og),w(Og,$0),w(Jh,e1),jt($f,Jh,null),Z2=Yo(xa,u[42].bind(xa)),w(Ge,t1),w(Ge,ed),w(ed,im),w(im,Bc),w(Bc,Gv),w(Gv,r1),w(ed,i1),w(ed,td),w(td,Oc),w(Oc,n1),w(Oc,f_),w(Oc,a1),w(Oc,Kv),w(Kv,o1),w(Oc,s1),w(Oc,ho),w(ho,$h),w($h,Gu),w(Gu,ep),w(ep,l1),w(ep,nm),nm.innerHTML=oI,w($h,u1),w($h,am),w(am,om),w(om,c1),w(om,sm),w(sm,Fg),w(Fg,h1),w($h,p1),jt(rd,$h,null),w(ho,f1),w(ho,tp),w(tp,Ku),w(Ku,rp),w(rp,d1),w(rp,lm),lm.innerHTML=sI,w(tp,m1),w(tp,um),w(um,cm),w(cm,v1),w(cm,hm),w(hm,Ng),w(Ng,y1),w(tp,g1),jt(id,tp,null),w(ho,_1),w(ho,Ug),w(ho,b1),w(ho,ip),w(ip,Hu),w(Hu,np),w(np,x1),w(np,pm),pm.innerHTML=lI,w(ip,w1),w(ip,fm),w(fm,dm),w(dm,E1),w(dm,mm),w(mm,jg),w(jg,S1),w(ip,k1),jt(nd,ip,null),w(ho,I1),w(ho,ap),w(ap,Xu),w(Xu,op),w(op,T1),w(op,vm),vm.innerHTML=uI,w(ap,A1),w(ap,ym),w(ym,gm),w(gm,z1),w(gm,_m),w(_m,qg),w(qg,P1),w(ap,C1),jt(ad,ap,null),G2=Yo(ho,u[43].bind(ho)),w(Ge,D1),w(Ge,od),w(od,bm),w(bm,Vc),w(Vc,Hv),w(Hv,M1),w(od,L1),w(od,sd),w(sd,Fc),w(Fc,R1),w(Fc,d_),w(Fc,B1),w(Fc,Xv),w(Xv,O1),w(Fc,V1),w(Fc,$l),w($l,sp),w(sp,Wu),w(Wu,lp),w(lp,F1),w(lp,xm),xm.innerHTML=cI,w(sp,N1),w(sp,wm),w(wm,Em),w(Em,U1),w(Em,Sm),w(Sm,Gg),w(Gg,j1),w(sp,q1),jt(ld,sp,null),w($l,Z1),w($l,up),w(up,Yu),w(Yu,cp),w(cp,G1),w(cp,km),km.innerHTML=hI,w(up,K1),w(up,Im),w(Im,Tm),w(Tm,H1),w(Tm,Am),w(Am,Kg),w(Kg,X1),w(up,W1),jt(ud,up,null),w($l,Y1),w($l,Hg),K2=Yo($l,u[44].bind($l)),vn=!0,J1||(H2=[Et(Bi,"click",Er),Et(on,"click",Er),Et(Dn,"click",Er),Et(ai,"click",Er),Et(Mn,"click",Er),Et(os,"click",Er),Et(kr,"click",Er),Et(ro,"click",Er),Et(Xt,"click",Er),Et(qi,"click",Er),Et(To,"click",Er),Et(oo,"click",Er),Et(n,"click",Er),Et(ne,"click",Er),Et(An,"click",Er),Et(Mi,"click",Er),Et(_u,"click",Er),Et(ws,"click",Er),Et(Ka,"click",Er),Et(Qs,"click",Er),Et(na,"click",Er),Et(el,"click",Er),Et(Ts,"click",Er),Et(Tu,"click",Er),Et(Pu,"click",Er),Et(jl,"click",Er),Et(Mu,"click",Er),Et(Vt,"click",Er),Et(ci,"click",Er),Et(Fo,"click",Er),Et(No,"click",Er),Et(Ql,"click",Er),Et(Kh,"click",Er),Et(Xh,"click",Er),Et(Yh,"click",Er),Et(Qh,"click",Er),Et(ep,"click",Er),Et(rp,"click",Er),Et(np,"click",Er),Et(op,"click",Er),Et(lp,"click",Er),Et(cp,"click",Er)],J1=!0)},p(J,ze){m_===(m_=X2(J))&&Nc?Nc.p(J,ze):(Nc.d(1),Nc=m_(J),Nc&&(Nc.c(),Nc.m(v,O))),(!vn||ze[0]&1)&&fe!==(fe=J[0].place.name+"")&&dt(he,fe),v_===(v_=W2(J))&&Uc?Uc.p(J,ze):(Uc.d(1),Uc=v_(J),Uc&&(Uc.c(),Uc.m(Ee,je))),J[0].place.type!="ni"?qo?qo.p(J,ze):(qo=_k(J),qo.c(),qo.m(Ee,Bt)):qo&&(qo.d(1),qo=null),y_===(y_=Y2(J))&&jc?jc.p(J,ze):(jc.d(1),jc=y_(J),jc&&(jc.c(),jc.m(Ee,null)));const hp={};ze[0]&1&&(hp.search_data=J[0].search_data),kt.$set(hp),(!vn||ze[0]&32)&&Ei(et,"float-right",J[5]>1),g_===(g_=J2(J))&&qc?qc.p(J,ze):(qc.d(1),qc=g_(J),qc&&(qc.c(),qc.m(_n,qn))),J[4]?Zo?Zo.p(J,ze):(Zo=bk(J),Zo.c(),Zo.m(_n,null)):Zo&&(Zo.d(1),Zo=null),(!vn||ze[0]&1)&&bn!==(bn=J[0].place.data.population.value[2021].all.toLocaleString()+"")&&dt(Zn,bn),J[0].place.type!="ni"?wa?(wa.p(J,ze),ze[0]&1&&it(wa,1)):(wa=xk(J),wa.c(),it(wa,1),wa.m(Vr,Ra)):wa&&($u(),ht(wa,1,1,()=>{wa=null}),ec()),J[4]&&J[2]?Ea?(Ea.p(J,ze),ze[0]&20&&it(Ea,1)):(Ea=Sk(J),Ea.c(),it(Ea,1),Ea.m(Vr,null)):Ea&&($u(),ht(Ea,1,1,()=>{Ea=null}),ec()),(!vn||ze[0]&1)&&X!==(X=J[0].place.data.households.value[2021].all_households.toLocaleString()+"")&&dt(re,X),J[0].place.type!="ni"&J[9]?Sa?(Sa.p(J,ze),ze[0]&513&&it(Sa,1)):(Sa=kk(J),Sa.c(),it(Sa,1),Sa.m(di,_e)):Sa&&($u(),ht(Sa,1,1,()=>{Sa=null}),ec()),J[4]&&J[2]?ka?(ka.p(J,ze),ze[0]&20&&it(ka,1)):(ka=Ik(J),ka.c(),it(ka,1),ka.m(di,null)):ka&&($u(),ht(ka,1,1,()=>{ka=null}),ec()),__===(__=Q2(J))&&Zc?Zc.p(J,ze):(Zc.d(1),Zc=__(J),Zc&&(Zc.c(),Zc.m(Ue,null))),(!vn||ze[0]&32)&&ie(Se,"grid-column","span "+J[5]);const Xc={};ze[0]&1&&(Xc.location={bounds:J[0].place.bounds}),ze[0]&384|ze[1]&536870912&&(Xc.$$scope={dirty:ze,ctx:J}),!ct&&ze[0]&64&&(ct=!0,Xc.map=J[6],u5(()=>ct=!1)),qe.$set(Xc),(!vn||ze[0]&32)&&ie(Me,"grid-column","span "+(J[5]==2?2:J[5]&&J[5]>2?J[5]-1:1)),b_===(b_=ex(J))&&Gc?Gc.p(J,ze):(Gc.d(1),Gc=b_(J),Gc&&(Gc.c(),Gc.m(Re,null))),x_===(x_=tx(J))&&Kc?Kc.p(J,ze):(Kc.d(1),Kc=x_(J),Kc&&(Kc.c(),Kc.m(Ye,null))),(!vn||ze[0]&1)&&Kt!==(Kt=J[0].place.name+"")&&dt(tr,Kt),w_===(w_=rx(J))&&Hc?Hc.p(J,ze):(Hc.d(1),Hc=w_(J),Hc&&(Hc.c(),Hc.m(Xi,null))),(!vn||ze[0]&1)&&go!==(go=(J[0].place.hectares>=.1?J[0].place.hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&dt(iu,go),(!vn||ze[0]&1)&&_p!==(_p=(J[0].place.data.population.value[2021].all/J[0].place.hectares>=.1?(J[0].place.data.population.value[2021].all/J[0].place.hectares).toFixed(1):"<0.1")+"")&&dt(ff,_p),J[0].place.type!="ni"&&J[9]?Go?Go.p(J,ze):(Go=Pk(J),Go.c(),Go.m(Sn,null)):Go&&(Go.d(1),Go=null),(!vn||ze[0]&1)&&bo!==(bo=J[0].place.name+"")&&dt(as,bo);const Wv={};ze[0]&1&&(Wv.data=J[0].place&&J[12](["age"])),ze[0]&1024&&(Wv.zKey=J[10]),Vs.$set(Wv),J[9]&&J[11]||J[2]&&J[11]&&J[4]?Ko?Ko.p(J,ze):(Ko=Ck(J),Ko.c(),Ko.m(Wi,Ep)):Ko&&(Ko.d(1),Ko=null);const Yv={};ze[0]&1&&(Yv.data=J[0].place&&J[12](["age"])),ze[0]&1024&&(Yv.zKey=J[10]),Ba.$set(Yv);const Ju={};ze[0]&1&&(Ju.data=J[0].place&&J[12](["sex"])),ze[0]&1024&&(Ju.zKey=J[10]),ze[0]&2048&&(Ju.label=J[11]),eo.$set(Ju);const zm={};ze[0]&1&&(zm.data=J[0].place&&J[12](["hh_size"])),ze[0]&1024&&(zm.zKey=J[10]),ze[0]&2048&&(zm.label=J[11]),Oa.$set(zm),(!vn||ze[0]&1)&&sc!==(sc=J[0].place.name+"")&&dt(oh,sc);const eu={};ze[0]&1&&(eu.data=J[0].place&&J[12](["cob"])),ze[0]&1024&&(eu.zKey=J[10]),ze[0]&2048&&(eu.label=J[11]),ko.$set(eu);const Pm={};ze[0]&1&&(Pm.data=J[0].place&&J[12](["passport"])),ze[0]&1024&&(Pm.zKey=J[10]),ze[0]&2048&&(Pm.label=J[11]),ds.$set(Pm);const Cm={};ze[0]&1&&(Cm.data=J[0].place&&J[12](["natid"])),ze[0]&1024&&(Cm.zKey=J[10]),ze[0]&2048&&(Cm.label=J[11]),Hn.$set(Cm),(!vn||ze[0]&1)&&xr!==(xr=J[0].place.name+"")&&dt(Ji,xr);const Wc={};ze[0]&1&&(Wc.data=J[0].place&&J[12](["mainlang"])),ze[0]&1024&&(Wc.zKey=J[10]),ze[0]&2048&&(Wc.label=J[11]),Ks.$set(Wc);const Dm={};ze[0]&1&&(Dm.data=J[0].place&&J[12](["irish"])),ze[0]&1024&&(Dm.zKey=J[10]),ze[0]&2048&&(Dm.label=J[11]),$.$set(Dm);const Mm={};ze[0]&1&&(Mm.data=J[0].place&&J[12](["ulster"])),ze[0]&1024&&(Mm.zKey=J[10]),ze[0]&2048&&(Mm.label=J[11]),bt.$set(Mm),(!vn||ze[0]&1)&&si!==(si=J[0].place.name+"")&&dt(Tn,si);const Lm={};ze[0]&1&&(Lm.data=J[0].place&&J[12](["religion"])),ze[0]&1024&&(Lm.zKey=J[10]),ze[0]&2048&&(Lm.label=J[11]),za.$set(Lm);const Yc={};ze[0]&1&&(Yc.data=J[0].place&&J[12](["religion_or_religion_brought_up_in"])),ze[0]&1024&&(Yc.zKey=J[10]),ze[0]&2048&&(Yc.label=J[11]),hh.$set(Yc);const Jc={};ze[0]&1&&(Jc.data=J[0].place&&J[12](["ethnic"])),ze[0]&1024&&(Jc.zKey=J[10]),ze[0]&2048&&(Jc.label=J[11]),fh.$set(Jc),(!vn||ze[0]&1)&&_c!==(_c=J[0].place.name+"")&&dt(Td,_c);const Rm={};ze[0]&1&&(Rm.data=J[0].place&&J[12](["general_health"])),ze[0]&1024&&(Rm.zKey=J[10]),ze[0]&2048&&(Rm.label=J[11]),xc.$set(Rm);const Ho={};ze[0]&1&&(Ho.data=J[0].place&&J[12](["long_term_disability"])),ze[0]&1024&&(Ho.zKey=J[10]),ze[0]&2048&&(Ho.label=J[11]),mh.$set(Ho);const Bm={};ze[0]&1&&(Bm.data=J[0].place&&J[12](["number_of_long_term_health"])),ze[0]&1024&&(Bm.zKey=J[10]),ze[0]&2048&&(Bm.label=J[11]),Ec.$set(Bm);const cd={};ze[0]&1&&(cd.data=J[0].place&&J[12](["provision_care"])),ze[0]&1024&&(cd.zKey=J[10]),ze[0]&2048&&(cd.label=J[11]),Rl.$set(cd),(!vn||ze[0]&1)&&zn!==(zn=J[0].place.name+"")&&dt(Xp,zn);const Jv={};ze[0]&1&&(Jv.data=J[0].place&&J[12](["accommodation_type"])),ze[0]&1024&&(Jv.zKey=J[10]),ze[0]&2048&&(Jv.label=J[11]),kh.$set(Jv);const Om={};ze[0]&1&&(Om.data=J[0].place&&J[12](["number_of_adaptations"])),ze[0]&1024&&(Om.zKey=J[10]),ze[0]&2048&&(Om.label=J[11]),Iu.$set(Om);const hd={};ze[0]&1&&(hd.data=J[0].place&&J[12](["central_heating"])),ze[0]&1024&&(hd.zKey=J[10]),ze[0]&2048&&(hd.label=J[11]),Th.$set(hd);const Vm={};ze[0]&1&&(Vm.data=J[0].place&&J[12](["renewable_energy"])),ze[0]&1024&&(Vm.zKey=J[10]),ze[0]&2048&&(Vm.label=J[11]),Mr.$set(Vm);const Fm={};ze[0]&1&&(Fm.data=J[0].place&&J[12](["hh_tenure"])),ze[0]&1024&&(Fm.zKey=J[10]),ze[0]&2048&&(Fm.label=J[11]),zs.$set(Fm);const Nm={};ze[0]&1&&(Nm.data=J[0].place&&J[12](["car_or_van"])),ze[0]&1024&&(Nm.zKey=J[10]),ze[0]&2048&&(Nm.label=J[11]),C.$set(Nm),(!vn||ze[0]&1)&&De!==(De=J[0].place.name+"")&&dt(Le,De);const Xo={};ze[0]&1&&(Xo.data=J[0].place&&J[12](["number_of_dependent_children_households"])),ze[0]&1024&&(Xo.zKey=J[10]),ze[0]&2048&&(Xo.label=J[11]),Zr.$set(Xo);const Um={};ze[0]&1&&(Um.data=J[0].place&&J[12](["household_composition_households"])),ze[0]&1024&&(Um.zKey=J[10]),ze[0]&2048&&(Um.label=J[11]),Ri.$set(Um),(!vn||ze[0]&1)&&Lu!==(Lu=J[0].place.name+"")&&dt(Mh,Lu);const pd={};ze[0]&1&&(pd.data=J[0].place&&J[12](["marital_and_civil_partnership_status"])),ze[0]&1024&&(pd.zKey=J[10]),ze[0]&2048&&(pd.label=J[11]),ol.$set(pd),(!vn||ze[0]&1)&&Gf!==(Gf=J[0].place.name+"")&&dt(af,Gf);const Qv={};ze[0]&1&&(Qv.data=J[0].place&&J[12](["sexual_orientation_by_broad_age_band"])),ze[0]&1024&&(Qv.zKey=J[10]),ze[0]&2048&&(Qv.label=J[11]),jo.$set(Qv),(!vn||ze[0]&1)&&sf!==(sf=J[0].place.name+"")&&dt(Fd,sf);const jm={};ze[0]&1&&(jm.data=J[0].place&&J[12](["highest_level_of_qualifications"])),ze[0]&1024&&(jm.zKey=J[10]),ze[0]&2048&&(jm.label=J[11]),Wf.$set(jm);const fd={};ze[0]&1&&(fd.data=J[0].place&&J[12](["economic_activity"])),ze[0]&1024&&(fd.zKey=J[10]),ze[0]&2048&&(fd.label=J[11]),Yf.$set(fd);const qm={};ze[0]&1&&(qm.data=J[0].place&&J[12](["hours_worked"])),ze[0]&1024&&(qm.zKey=J[10]),ze[0]&2048&&(qm.label=J[11]),Jf.$set(qm);const Zm={};ze[0]&1&&(Zm.data=J[0].place&&J[12](["industry_of_employment"])),ze[0]&1024&&(Zm.zKey=J[10]),ze[0]&2048&&(Zm.label=J[11]),Qf.$set(Zm);const Gm={};ze[0]&1&&(Gm.data=J[0].place&&J[12](["occupation_1_digit"])),ze[0]&1024&&(Gm.zKey=J[10]),ze[0]&2048&&(Gm.label=J[11]),$f.$set(Gm),(!vn||ze[0]&1)&&Vg!==(Vg=J[0].place.name+"")&&dt(f_,Vg);const tu={};ze[0]&1&&(tu.data=J[0].place&&J[12](["method_of_travel_to_work"])),ze[0]&1024&&(tu.zKey=J[10]),ze[0]&2048&&(tu.label=J[11]),rd.$set(tu);const Km={};ze[0]&1&&(Km.data=J[0].place&&J[12](["method_of_travel_to_study"])),ze[0]&1024&&(Km.zKey=J[10]),ze[0]&2048&&(Km.label=J[11]),id.$set(Km);const Hm={};ze[0]&1&&(Hm.data=J[0].place&&J[12](["distance_travelled_to_work"])),ze[0]&1024&&(Hm.zKey=J[10]),ze[0]&2048&&(Hm.label=J[11]),nd.$set(Hm);const Xm={};ze[0]&1&&(Xm.data=J[0].place&&J[12](["distance_travelled_to_study"])),ze[0]&1024&&(Xm.zKey=J[10]),ze[0]&2048&&(Xm.label=J[11]),ad.$set(Xm),(!vn||ze[0]&1)&&Zg!==(Zg=J[0].place.name+"")&&dt(d_,Zg);const Wm={};ze[0]&1&&(Wm.data=J[0].place&&J[12](["address_one_year_ago"])),ze[0]&1024&&(Wm.zKey=J[10]),ze[0]&2048&&(Wm.label=J[11]),ld.$set(Wm);const Ym={};ze[0]&1&&(Ym.data=J[0].place&&J[12](["year_of_arrival"])),ze[0]&1024&&(Ym.zKey=J[10]),ze[0]&2048&&(Ym.label=J[11]),ud.$set(Ym)},i(J){vn||(it(kt.$$.fragment,J),it(wa),it(Ea),it(Sa),it(ka),it(qe.$$.fragment,J),it(Vs.$$.fragment,J),it(Ba.$$.fragment,J),it(eo.$$.fragment,J),it(Oa.$$.fragment,J),it(ko.$$.fragment,J),it(ds.$$.fragment,J),it(Hn.$$.fragment,J),it(Ks.$$.fragment,J),it($.$$.fragment,J),it(bt.$$.fragment,J),it(za.$$.fragment,J),it(hh.$$.fragment,J),it(fh.$$.fragment,J),it(xc.$$.fragment,J),it(mh.$$.fragment,J),it(Ec.$$.fragment,J),it(Rl.$$.fragment,J),it(kh.$$.fragment,J),it(Iu.$$.fragment,J),it(Th.$$.fragment,J),it(Mr.$$.fragment,J),it(zs.$$.fragment,J),it(C.$$.fragment,J),it(Zr.$$.fragment,J),it(Ri.$$.fragment,J),it(ol.$$.fragment,J),it(jo.$$.fragment,J),it(Wf.$$.fragment,J),it(Yf.$$.fragment,J),it(Jf.$$.fragment,J),it(Qf.$$.fragment,J),it($f.$$.fragment,J),it(rd.$$.fragment,J),it(id.$$.fragment,J),it(nd.$$.fragment,J),it(ad.$$.fragment,J),it(ld.$$.fragment,J),it(ud.$$.fragment,J),vn=!0)},o(J){ht(kt.$$.fragment,J),ht(wa),ht(Ea),ht(Sa),ht(ka),ht(qe.$$.fragment,J),ht(Vs.$$.fragment,J),ht(Ba.$$.fragment,J),ht(eo.$$.fragment,J),ht(Oa.$$.fragment,J),ht(ko.$$.fragment,J),ht(ds.$$.fragment,J),ht(Hn.$$.fragment,J),ht(Ks.$$.fragment,J),ht($.$$.fragment,J),ht(bt.$$.fragment,J),ht(za.$$.fragment,J),ht(hh.$$.fragment,J),ht(fh.$$.fragment,J),ht(xc.$$.fragment,J),ht(mh.$$.fragment,J),ht(Ec.$$.fragment,J),ht(Rl.$$.fragment,J),ht(kh.$$.fragment,J),ht(Iu.$$.fragment,J),ht(Th.$$.fragment,J),ht(Mr.$$.fragment,J),ht(zs.$$.fragment,J),ht(C.$$.fragment,J),ht(Zr.$$.fragment,J),ht(Ri.$$.fragment,J),ht(ol.$$.fragment,J),ht(jo.$$.fragment,J),ht(Wf.$$.fragment,J),ht(Yf.$$.fragment,J),ht(Jf.$$.fragment,J),ht(Qf.$$.fragment,J),ht($f.$$.fragment,J),ht(rd.$$.fragment,J),ht(id.$$.fragment,J),ht(nd.$$.fragment,J),ht(ad.$$.fragment,J),ht(ld.$$.fragment,J),ht(ud.$$.fragment,J),vn=!1},d(J){J&&T(h),Nc.d(),Uc.d(),qo&&qo.d(),jc.d(),qt(kt),J&&T(sa),J&&T(Ti),qc.d(),Zo&&Zo.d(),wa&&wa.d(),Ea&&Ea.d(),Sa&&Sa.d(),ka&&ka.d(),J&&T(H),J&&T(ae),Zc.d(),qt(qe),Gc.d(),Kc.d(),tt(),J&&T(Ft),J&&T(Ge),Hc.d(),Go&&Go.d(),df(),qt(Vs),Ko&&Ko.d(),qt(Ba),qt(eo),qt(Oa),nh(),qt(ko),qt(ds),qt(Hn),ta(),qt(Ks),qt($),qt(bt),St(),qt(za),qt(hh),qt(fh),u_(),qt(xc),qt(mh),qt(Ec),qt(Rl),Zp(),qt(kh),qt(Iu),qt(Th),qt(Mr),qt(zs),qt(C),D(),qt(Zr),qt(Ri),co(),qt(ol),Ig(),qt(jo),Ag(),qt(Wf),qt(Yf),qt(Jf),qt(Qf),qt($f),Z2(),qt(rd),qt(id),qt(nd),qt(ad),G2(),qt(ld),qt(ud),K2(),J1=!1,tc(H2)}}}function kA(u){let h=u[0].place.name+"",f;return{c(){f=ee(h)},l(v){f=te(v,h)},m(v,_){Pe(v,f,_)},p(v,_){_[0]&1&&h!==(h=v[0].place.name+"")&&dt(f,h)},d(v){v&&T(f)}}}function IA(u){let h,f=u[0].place.name+"",v,_=[...u[0].place.parents].reverse(),x=[];for(let a=0;a<_.length;a+=1)x[a]=gk(vk(u,_,a));return{c(){for(let a=0;a<x.length;a+=1)x[a].c();h=be(),v=ee(f)},l(a){for(let z=0;z<x.length;z+=1)x[z].l(a);h=xe(a),v=te(a,f)},m(a,z){for(let A=0;A<x.length;A+=1)x[A]&&x[A].m(a,z);Pe(a,h,z),Pe(a,v,z)},p(a,z){if(z[0]&1){_=[...a[0].place.parents].reverse();let A;for(A=0;A<_.length;A+=1){const O=vk(a,_,A);x[A]?x[A].p(O,z):(x[A]=gk(O),x[A].c(),x[A].m(h.parentNode,h))}for(;A<x.length;A+=1)x[A].d(1);x.length=_.length}z[0]&1&&f!==(f=a[0].place.name+"")&&dt(v,f)},d(a){$c(x,a),a&&T(h),a&&T(v)}}}function gk(u){let h,f=u[54].name+"",v,_,x,a=" &gt; ",z;return{c(){h=M("a"),v=ee(f),x=new D2(!1),z=Cn(),this.h()},l(A){h=L(A,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var O=R(h);v=te(O,f),O.forEach(T),x=M2(A,!1),z=Cn(),this.h()},h(){S(h,"href",_=yp+"/"+u[54].code+"/"),S(h,"data-sveltekit-noscroll",""),S(h,"data-sveltekit-keepfocus",""),S(h,"class","svelte-17c2th3"),x.a=z},m(A,O){Pe(A,h,O),w(h,v),x.m(a,A,O),Pe(A,z,O)},p(A,O){O[0]&1&&f!==(f=A[54].name+"")&&dt(v,f),O[0]&1&&_!==(_=yp+"/"+A[54].code+"/")&&S(h,"href",_)},d(A){A&&T(h),A&&T(z),A&&x.d()}}}function TA(u){let h,f,v,_;return{c(){h=M("button"),f=ee("No comparison"),this.h()},l(x){h=L(x,"BUTTON",{class:!0});var a=R(h);f=te(a,"No comparison"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ei(h,"btn-active",u[3])},m(x,a){Pe(x,h,a),w(h,f),v||(_=[Et(h,"click",u[18]),Et(h,"click",u[19]),Et(h,"click",u[20])],v=!0)},p(x,a){a[0]&8&&Ei(h,"btn-active",x[3])},d(x){x&&T(h),v=!1,tc(_)}}}function AA(u){let h,f,v,_;return{c(){h=M("button"),f=ee("No comparison"),this.h()},l(x){h=L(x,"BUTTON",{class:!0});var a=R(h);f=te(a,"No comparison"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ei(h,"btn-active",!u[2])},m(x,a){Pe(x,h,a),w(h,f),v||(_=[Et(h,"click",u[15]),Et(h,"click",u[16]),Et(h,"click",u[17])],v=!0)},p(x,a){a[0]&4&&Ei(h,"btn-active",!x[2])},d(x){x&&T(h),v=!1,tc(_)}}}function _k(u){let h,f,v,_;return{c(){h=M("button"),f=ee("NI 2021"),this.h()},l(x){h=L(x,"BUTTON",{class:!0});var a=R(h);f=te(a,"NI 2021"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ei(h,"btn-active",u[9]&!u[3]&!u[2])},m(x,a){Pe(x,h,a),w(h,f),v||(_=[Et(h,"click",u[21]),Et(h,"click",u[22]),Et(h,"click",u[23])],v=!0)},p(x,a){a[0]&524&&Ei(h,"btn-active",x[9]&!x[3]&!x[2])},d(x){x&&T(h),v=!1,tc(_)}}}function zA(u){let h,f,v,_;return{c(){h=M("button"),f=ee("2011 data not available"),this.h()},l(x){h=L(x,"BUTTON",{class:!0});var a=R(h);f=te(a,"2011 data not available"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ei(h,"btn-active",u[2]&!u[3]&!u[9])},m(x,a){Pe(x,h,a),w(h,f),v||(_=[Et(h,"click",u[27]),Et(h,"click",u[28]),Et(h,"click",u[29])],v=!0)},p(x,a){a[0]&524&&Ei(h,"btn-active",x[2]&!x[3]&!x[9])},d(x){x&&T(h),v=!1,tc(_)}}}function PA(u){let h,f,v,_;return{c(){h=M("button"),f=ee("Same area 2011"),this.h()},l(x){h=L(x,"BUTTON",{class:!0});var a=R(h);f=te(a,"Same area 2011"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ei(h,"btn-active",u[2]&!u[3]&!u[9])},m(x,a){Pe(x,h,a),w(h,f),v||(_=[Et(h,"click",u[24]),Et(h,"click",u[25]),Et(h,"click",u[26])],v=!0)},p(x,a){a[0]&524&&Ei(h,"btn-active",x[2]&!x[3]&!x[9])},d(x){x&&T(h),v=!1,tc(_)}}}function CA(u){let h,f=u[0].place.name+"",v,_,x=u[0].place.data.population.value[2021].all.toLocaleString()+"",a,z,A;function O(j,fe){return j[0].place.data.population.value_rank[2021].all==1?BA:j[0].place.data.population.value_rank[2021].all==j[0].place.count?RA:j[0].place.data.population.value_rank[2021].all<=(j[0].place.count+1)/2&&j[0].place.data.population.value_rank[2021].all!=1?LA:MA}let N=O(u),Z=N(u);return{c(){h=ee("The population of "),v=ee(f),_=ee(" was "),a=ee(x),z=ee(` at the time of the 2021 Census, which\r
					made it the\r
					`),Z.c(),A=Cn()},l(j){h=te(j,"The population of "),v=te(j,f),_=te(j," was "),a=te(j,x),z=te(j,` at the time of the 2021 Census, which\r
					made it the\r
					`),Z.l(j),A=Cn()},m(j,fe){Pe(j,h,fe),Pe(j,v,fe),Pe(j,_,fe),Pe(j,a,fe),Pe(j,z,fe),Z.m(j,fe),Pe(j,A,fe)},p(j,fe){fe[0]&1&&f!==(f=j[0].place.name+"")&&dt(v,f),fe[0]&1&&x!==(x=j[0].place.data.population.value[2021].all.toLocaleString()+"")&&dt(a,x),N===(N=O(j))&&Z?Z.p(j,fe):(Z.d(1),Z=N(j),Z&&(Z.c(),Z.m(A.parentNode,A)))},d(j){j&&T(h),j&&T(v),j&&T(_),j&&T(a),j&&T(z),Z.d(j),j&&T(A)}}}function DA(u){let h,f=u[0].place.name+"",v,_,x=u[0].place.data.population.value[2021].all.toLocaleString()+"",a,z;return{c(){h=ee("The population of "),v=ee(f),_=ee(" was "),a=ee(x),z=ee(" at the time of the 2021 Census.")},l(A){h=te(A,"The population of "),v=te(A,f),_=te(A," was "),a=te(A,x),z=te(A," at the time of the 2021 Census.")},m(A,O){Pe(A,h,O),Pe(A,v,O),Pe(A,_,O),Pe(A,a,O),Pe(A,z,O)},p(A,O){O[0]&1&&f!==(f=A[0].place.name+"")&&dt(v,f),O[0]&1&&x!==(x=A[0].place.data.population.value[2021].all.toLocaleString()+"")&&dt(a,x)},d(A){A&&T(h),A&&T(v),A&&T(_),A&&T(a),A&&T(z)}}}function MA(u){let h=(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all).toLocaleString()+"",f,v=gd(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all)+"",_,x,a=yn[u[0].place.type].name+"",z,A;return{c(){f=ee(h),_=ee(v),x=ee(" smallest "),z=ee(a),A=ee(".")},l(O){f=te(O,h),_=te(O,v),x=te(O," smallest "),z=te(O,a),A=te(O,".")},m(O,N){Pe(O,f,N),Pe(O,_,N),Pe(O,x,N),Pe(O,z,N),Pe(O,A,N)},p(O,N){N[0]&1&&h!==(h=(O[0].place.count+1-O[0].place.data.population.value_rank[2021].all).toLocaleString()+"")&&dt(f,h),N[0]&1&&v!==(v=gd(O[0].place.count+1-O[0].place.data.population.value_rank[2021].all)+"")&&dt(_,v),N[0]&1&&a!==(a=yn[O[0].place.type].name+"")&&dt(z,a)},d(O){O&&T(f),O&&T(_),O&&T(x),O&&T(z),O&&T(A)}}}function LA(u){let h=u[0].place.data.population.value_rank[2021].all.toLocaleString()+"",f,v=gd(u[0].place.data.population.value_rank[2021].all)+"",_,x,a=yn[u[0].place.type].name+"",z,A;return{c(){f=ee(h),_=ee(v),x=ee(" largest "),z=ee(a),A=ee(".")},l(O){f=te(O,h),_=te(O,v),x=te(O," largest "),z=te(O,a),A=te(O,".")},m(O,N){Pe(O,f,N),Pe(O,_,N),Pe(O,x,N),Pe(O,z,N),Pe(O,A,N)},p(O,N){N[0]&1&&h!==(h=O[0].place.data.population.value_rank[2021].all.toLocaleString()+"")&&dt(f,h),N[0]&1&&v!==(v=gd(O[0].place.data.population.value_rank[2021].all)+"")&&dt(_,v),N[0]&1&&a!==(a=yn[O[0].place.type].name+"")&&dt(z,a)},d(O){O&&T(f),O&&T(_),O&&T(x),O&&T(z),O&&T(A)}}}function RA(u){let h,f=yn[u[0].place.type].name+"",v,_;return{c(){h=ee("smallest "),v=ee(f),_=ee(".")},l(x){h=te(x,"smallest "),v=te(x,f),_=te(x,".")},m(x,a){Pe(x,h,a),Pe(x,v,a),Pe(x,_,a)},p(x,a){a[0]&1&&f!==(f=yn[x[0].place.type].name+"")&&dt(v,f)},d(x){x&&T(h),x&&T(v),x&&T(_)}}}function BA(u){let h,f=yn[u[0].place.type].name+"",v,_;return{c(){h=ee("largest "),v=ee(f),_=ee(".")},l(x){h=te(x,"largest "),v=te(x,f),_=te(x,".")},m(x,a){Pe(x,h,a),Pe(x,v,a),Pe(x,_,a)},p(x,a){a[0]&1&&f!==(f=yn[x[0].place.type].name+"")&&dt(v,f)},d(x){x&&T(h),x&&T(v),x&&T(_)}}}function bk(u){let h;function f(x,a){return x[0].place.data.population.value.change.all==0?FA:x[0].place.data.population.value.change.all>0?VA:OA}let v=f(u),_=v(u);return{c(){_.c(),h=Cn()},l(x){_.l(x),h=Cn()},m(x,a){_.m(x,a),Pe(x,h,a)},p(x,a){v===(v=f(x))&&_?_.p(x,a):(_.d(1),_=v(x),_&&(_.c(),_.m(h.parentNode,h)))},d(x){_.d(x),x&&T(h)}}}function OA(u){let h,f=_d(u[0].place.data.population.value.change.all,"%",1)+"",v,_;return{c(){h=ee("A decrease of "),v=ee(f),_=ee(" since the 2011 Census.")},l(x){h=te(x,"A decrease of "),v=te(x,f),_=te(x," since the 2011 Census.")},m(x,a){Pe(x,h,a),Pe(x,v,a),Pe(x,_,a)},p(x,a){a[0]&1&&f!==(f=_d(x[0].place.data.population.value.change.all,"%",1)+"")&&dt(v,f)},d(x){x&&T(h),x&&T(v),x&&T(_)}}}function VA(u){let h,f=_d(u[0].place.data.population.value.change.all,"%",1)+"",v,_;return{c(){h=ee("An increase of "),v=ee(f),_=ee(" since the 2011 Census.")},l(x){h=te(x,"An increase of "),v=te(x,f),_=te(x," since the 2011 Census.")},m(x,a){Pe(x,h,a),Pe(x,v,a),Pe(x,_,a)},p(x,a){a[0]&1&&f!==(f=_d(x[0].place.data.population.value.change.all,"%",1)+"")&&dt(v,f)},d(x){x&&T(h),x&&T(v),x&&T(_)}}}function FA(u){let h;return{c(){h=ee("No change in population since the 2011 Census.")},l(f){h=te(f,"No change in population since the 2011 Census.")},m(f,v){Pe(f,h,v)},p:nn,d(f){f&&T(h)}}}function xk(u){let h,f,v=u[0].place.type!="ctry"&u[9]&!u[2]&&wk(u);return{c(){v&&v.c(),h=Cn()},l(_){v&&v.l(_),h=Cn()},m(_,x){v&&v.m(_,x),Pe(_,h,x),f=!0},p(_,x){_[0].place.type!="ctry"&_[9]&!_[2]?v?(v.p(_,x),x[0]&517&&it(v,1)):(v=wk(_),v.c(),it(v,1),v.m(h.parentNode,h)):v&&($u(),ht(v,1,1,()=>{v=null}),ec())},i(_){f||(it(v),f=!0)},o(_){ht(v),f=!1},d(_){v&&v.d(_),_&&T(h)}}}function wk(u){let h,f,v,_,x,a;f=new f0({props:{$$slots:{default:[NA]},$$scope:{ctx:u}}});let z=u[0].place.type=="lgd"&&Ek(u);return{c(){h=M("span"),Nt(f.$$.fragment),v=ee(" of Northern Ireland population"),_=be(),x=M("div"),z&&z.c(),this.h()},l(A){h=L(A,"SPAN",{class:!0});var O=R(h);Ut(f.$$.fragment,O),v=te(O," of Northern Ireland population"),O.forEach(T),_=xe(A),x=L(A,"DIV",{class:!0});var N=R(x);z&&z.l(N),N.forEach(T),this.h()},h(){S(h,"class","text-small "),S(x,"class","text-small ")},m(A,O){Pe(A,h,O),jt(f,h,null),w(h,v),Pe(A,_,O),Pe(A,x,O),z&&z.m(x,null),a=!0},p(A,O){const N={};O[0]&1|O[1]&536870912&&(N.$$scope={dirty:O,ctx:A}),f.$set(N),A[0].place.type=="lgd"?z?z.p(A,O):(z=Ek(A),z.c(),z.m(x,null)):z&&(z.d(1),z=null)},i(A){a||(it(f.$$.fragment,A),a=!0)},o(A){ht(f.$$.fragment,A),a=!1},d(A){A&&T(h),qt(f),A&&T(_),A&&T(x),z&&z.d()}}}function NA(u){let h=(u[0].place.data.population.value[2021].all/u[0].ni.data.population.value[2021].all>=.001?(u[0].place.data.population.value[2021].all/u[0].ni.data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,v;return{c(){f=ee(h),v=ee("%")},l(_){f=te(_,h),v=te(_,"%")},m(_,x){Pe(_,f,x),Pe(_,v,x)},p(_,x){x[0]&1&&h!==(h=(_[0].place.data.population.value[2021].all/_[0].ni.data.population.value[2021].all>=.001?(_[0].place.data.population.value[2021].all/_[0].ni.data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&dt(f,h)},d(_){_&&T(f),_&&T(v)}}}function Ek(u){let h,f=u[0].place.count.toLocaleString()+"",v,_,x=yn[u[0].place.type].pl+"",a;function z(N,Z){return N[0].place.data.population.value_rank[2021].all==1?ZA:N[0].place.data.population.value_rank[2021].all==N[0].place.count?qA:N[0].place.data.population.value_rank[2021].all<=(N[0].place.count+1)/2&&N[0].place.data.population.value_rank[2021].all!=1?jA:UA}let A=z(u),O=A(u);return{c(){O.c(),h=ee(`\r
							population of `),v=ee(f),_=be(),a=ee(x)},l(N){O.l(N),h=te(N,`\r
							population of `),v=te(N,f),_=xe(N),a=te(N,x)},m(N,Z){O.m(N,Z),Pe(N,h,Z),Pe(N,v,Z),Pe(N,_,Z),Pe(N,a,Z)},p(N,Z){A===(A=z(N))&&O?O.p(N,Z):(O.d(1),O=A(N),O&&(O.c(),O.m(h.parentNode,h))),Z[0]&1&&f!==(f=N[0].place.count.toLocaleString()+"")&&dt(v,f),Z[0]&1&&x!==(x=yn[N[0].place.type].pl+"")&&dt(a,x)},d(N){O.d(N),N&&T(h),N&&T(v),N&&T(_),N&&T(a)}}}function UA(u){let h=(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all).toLocaleString()+"",f,v=gd(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all)+"",_,x;return{c(){f=ee(h),_=ee(v),x=ee(" smallest")},l(a){f=te(a,h),_=te(a,v),x=te(a," smallest")},m(a,z){Pe(a,f,z),Pe(a,_,z),Pe(a,x,z)},p(a,z){z[0]&1&&h!==(h=(a[0].place.count+1-a[0].place.data.population.value_rank[2021].all).toLocaleString()+"")&&dt(f,h),z[0]&1&&v!==(v=gd(a[0].place.count+1-a[0].place.data.population.value_rank[2021].all)+"")&&dt(_,v)},d(a){a&&T(f),a&&T(_),a&&T(x)}}}function jA(u){let h=u[0].place.data.population.value_rank[2021].all.toLocaleString()+"",f,v=gd(u[0].place.data.population.value_rank[2021].all)+"",_,x;return{c(){f=ee(h),_=ee(v),x=ee(" largest")},l(a){f=te(a,h),_=te(a,v),x=te(a," largest")},m(a,z){Pe(a,f,z),Pe(a,_,z),Pe(a,x,z)},p(a,z){z[0]&1&&h!==(h=a[0].place.data.population.value_rank[2021].all.toLocaleString()+"")&&dt(f,h),z[0]&1&&v!==(v=gd(a[0].place.data.population.value_rank[2021].all)+"")&&dt(_,v)},d(a){a&&T(f),a&&T(_),a&&T(x)}}}function qA(u){let h;return{c(){h=ee("The smallest")},l(f){h=te(f,"The smallest")},m(f,v){Pe(f,h,v)},p:nn,d(f){f&&T(h)}}}function ZA(u){let h;return{c(){h=ee("The largest")},l(f){h=te(f,"The largest")},m(f,v){Pe(f,h,v)},p:nn,d(f){f&&T(h)}}}function Sk(u){let h,f,v,_;return f=new f0({props:{$$slots:{default:[GA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Nt(f.$$.fragment),v=ee(" since 2011 Census"),this.h()},l(x){h=L(x,"SPAN",{class:!0});var a=R(h);Ut(f.$$.fragment,a),v=te(a," since 2011 Census"),a.forEach(T),this.h()},h(){S(h,"class","text-small ")},m(x,a){Pe(x,h,a),jt(f,h,null),w(h,v),_=!0},p(x,a){const z={};a[0]&1|a[1]&536870912&&(z.$$scope={dirty:a,ctx:x}),f.$set(z)},i(x){_||(it(f.$$.fragment,x),_=!0)},o(x){ht(f.$$.fragment,x),_=!1},d(x){x&&T(h),qt(f)}}}function GA(u){let h,f=_d(u[0].place.data.population.value.change.all,"%",1)+"",v,_;return{c(){h=M("span"),v=ee(f),this.h()},l(x){h=L(x,"SPAN",{class:!0});var a=R(h);v=te(a,f),a.forEach(T),this.h()},h(){S(h,"class",_=t0(r0(u[0].place.data.population.value.change.all))+" svelte-17c2th3")},m(x,a){Pe(x,h,a),w(h,v)},p(x,a){a[0]&1&&f!==(f=_d(x[0].place.data.population.value.change.all,"%",1)+"")&&dt(v,f),a[0]&1&&_!==(_=t0(r0(x[0].place.data.population.value.change.all))+" svelte-17c2th3")&&S(h,"class",_)},d(x){x&&T(h)}}}function kk(u){let h,f,v,_;return f=new f0({props:{$$slots:{default:[KA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Nt(f.$$.fragment),v=ee(" of Northern Ireland households"),this.h()},l(x){h=L(x,"SPAN",{class:!0});var a=R(h);Ut(f.$$.fragment,a),v=te(a," of Northern Ireland households"),a.forEach(T),this.h()},h(){S(h,"class","text-small")},m(x,a){Pe(x,h,a),jt(f,h,null),w(h,v),_=!0},p(x,a){const z={};a[0]&1|a[1]&536870912&&(z.$$scope={dirty:a,ctx:x}),f.$set(z)},i(x){_||(it(f.$$.fragment,x),_=!0)},o(x){ht(f.$$.fragment,x),_=!1},d(x){x&&T(h),qt(f)}}}function KA(u){let h=(u[0].place.data.households.value[2021].all_households/u[0].ni.data.households.value[2021].all_households>=.001?(u[0].place.data.households.value[2021].all_households/u[0].ni.data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,v;return{c(){f=ee(h),v=ee("%")},l(_){f=te(_,h),v=te(_,"%")},m(_,x){Pe(_,f,x),Pe(_,v,x)},p(_,x){x[0]&1&&h!==(h=(_[0].place.data.households.value[2021].all_households/_[0].ni.data.households.value[2021].all_households>=.001?(_[0].place.data.households.value[2021].all_households/_[0].ni.data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&dt(f,h)},d(_){_&&T(f),_&&T(v)}}}function Ik(u){let h,f,v,_;return f=new f0({props:{$$slots:{default:[HA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Nt(f.$$.fragment),v=ee(" since 2011 Census"),this.h()},l(x){h=L(x,"SPAN",{class:!0});var a=R(h);Ut(f.$$.fragment,a),v=te(a," since 2011 Census"),a.forEach(T),this.h()},h(){S(h,"class","text-small")},m(x,a){Pe(x,h,a),jt(f,h,null),w(h,v),_=!0},p(x,a){const z={};a[0]&1|a[1]&536870912&&(z.$$scope={dirty:a,ctx:x}),f.$set(z)},i(x){_||(it(f.$$.fragment,x),_=!0)},o(x){ht(f.$$.fragment,x),_=!1},d(x){x&&T(h),qt(f)}}}function HA(u){let h,f=_d(u[0].place.data.households.value.change.all_households,"%",1)+"",v,_;return{c(){h=M("span"),v=ee(f),this.h()},l(x){h=L(x,"SPAN",{class:!0});var a=R(h);v=te(a,f),a.forEach(T),this.h()},h(){S(h,"class",_=t0(r0(u[0].place.data.households.value.change.all_households))+" svelte-17c2th3")},m(x,a){Pe(x,h,a),w(h,v)},p(x,a){a[0]&1&&f!==(f=_d(x[0].place.data.households.value.change.all_households,"%",1)+"")&&dt(v,f),a[0]&1&&_!==(_=t0(r0(x[0].place.data.households.value.change.all_households))+" svelte-17c2th3")&&S(h,"class",_)},d(x){x&&T(h)}}}function XA(u){let h,f,v=u[0].place.name+"",_;return{c(){h=ee("Explore "),f=M("span"),_=ee(v),this.h()},l(x){h=te(x,"Explore "),f=L(x,"SPAN",{style:!0});var a=R(f);_=te(a,v),a.forEach(T),this.h()},h(){ie(f,"color","#93328E")},m(x,a){Pe(x,h,a),Pe(x,f,a),w(f,_)},p(x,a){a[0]&1&&v!==(v=x[0].place.name+"")&&dt(_,v)},d(x){x&&T(h),x&&T(f)}}}function WA(u){let h,f,v=u[0].place.name+"",_,x,a,z,A=yn[u[0].place.type].name+"",O;return{c(){h=ee("Explore "),f=M("span"),_=ee(v),x=be(),a=M("span"),z=ee("- "),O=ee(A),this.h()},l(N){h=te(N,"Explore "),f=L(N,"SPAN",{style:!0});var Z=R(f);_=te(Z,v),Z.forEach(T),x=xe(N),a=L(N,"SPAN",{style:!0});var j=R(a);z=te(j,"- "),O=te(j,A),j.forEach(T),this.h()},h(){ie(f,"color","#93328E"),ie(a,"color","#6E6E6E")},m(N,Z){Pe(N,h,Z),Pe(N,f,Z),w(f,_),Pe(N,x,Z),Pe(N,a,Z),w(a,z),w(a,O)},p(N,Z){Z[0]&1&&v!==(v=N[0].place.name+"")&&dt(_,v),Z[0]&1&&A!==(A=yn[N[0].place.type].name+"")&&dt(O,A)},d(N){N&&T(h),N&&T(f),N&&T(x),N&&T(a)}}}function YA(u){let h,f,v,_,x,a,z;const A=[yd[u[56]],{id:u[56]+"-fill"},{type:"fill"},{isChild:u[8][u[56]]},{click:!0},{selected:u[7].selected},{highlight:!0},{highlighted:u[7].highlighted},{hover:!0},{hovered:u[7].hovered},{layout:{visibility:u[7].type==u[56]||u[7].childType==u[56]?"visible":"none"}},{paint:u[7].type==u[56]?oa["fill-self"]:u[7].childType==u[56]?oa["fill-child"]:oa.fill}];let O={};for(let he=0;he<A.length;he+=1)O=X_(O,A[he]);h=new E2({props:O}),h.$on("select",u[13]);const N=[yd[u[56]],{id:u[56]+"-bounds"},{type:"line"},{selected:u[7].selected},{highlight:!0},{highlighted:u[7].highlighted},{layout:{visibility:u[7].type==u[56]||u[7].childType==u[56]?"visible":"none"}},{paint:u[7].type==u[56]?oa["line-active"]:u[7].childType==u[56]?oa["line-child"]:oa.line}];let Z={};for(let he=0;he<N.length;he+=1)Z=X_(Z,N[he]);v=new E2({props:Z});const j=[yd[u[56]],{id:u[56]+"-self"},{type:"line"},{selected:u[7].selected},{layout:{visibility:u[7].type==u[56]?"visible":"none"}},{paint:u[7].type==u[56]?oa["line-self"]:oa.line}];let fe={};for(let he=0;he<j.length;he+=1)fe=X_(fe,j[he]);return x=new E2({props:fe}),{c(){Nt(h.$$.fragment),f=be(),Nt(v.$$.fragment),_=be(),Nt(x.$$.fragment),a=be()},l(he){Ut(h.$$.fragment,he),f=xe(he),Ut(v.$$.fragment,he),_=xe(he),Ut(x.$$.fragment,he),a=xe(he)},m(he,Ae){jt(h,he,Ae),Pe(he,f,Ae),jt(v,he,Ae),Pe(he,_,Ae),jt(x,he,Ae),Pe(he,a,Ae),z=!0},p(he,Ae){const Ee=Ae[0]&384?W_(A,[Ae&0&&Y_(yd[he[56]]),A[1],A[2],Ae[0]&256&&{isChild:he[8][he[56]]},A[4],Ae[0]&128&&{selected:he[7].selected},A[6],Ae[0]&128&&{highlighted:he[7].highlighted},A[8],Ae[0]&128&&{hovered:he[7].hovered},Ae[0]&128&&{layout:{visibility:he[7].type==he[56]||he[7].childType==he[56]?"visible":"none"}},Ae[0]&128&&{paint:he[7].type==he[56]?oa["fill-self"]:he[7].childType==he[56]?oa["fill-child"]:oa.fill}]):{};h.$set(Ee);const Ve=Ae[0]&128?W_(N,[Ae&0&&Y_(yd[he[56]]),N[1],N[2],Ae[0]&128&&{selected:he[7].selected},N[4],Ae[0]&128&&{highlighted:he[7].highlighted},Ae[0]&128&&{layout:{visibility:he[7].type==he[56]||he[7].childType==he[56]?"visible":"none"}},Ae[0]&128&&{paint:he[7].type==he[56]?oa["line-active"]:he[7].childType==he[56]?oa["line-child"]:oa.line}]):{};v.$set(Ve);const je=Ae[0]&128?W_(j,[Ae&0&&Y_(yd[he[56]]),j[1],j[2],Ae[0]&128&&{selected:he[7].selected},Ae[0]&128&&{layout:{visibility:he[7].type==he[56]?"visible":"none"}},Ae[0]&128&&{paint:he[7].type==he[56]?oa["line-self"]:oa.line}]):{};x.$set(je)},i(he){z||(it(h.$$.fragment,he),it(v.$$.fragment,he),it(x.$$.fragment,he),z=!0)},o(he){ht(h.$$.fragment,he),ht(v.$$.fragment,he),ht(x.$$.fragment,he),z=!1},d(he){qt(h,he),he&&T(f),qt(v,he),he&&T(_),qt(x,he),he&&T(a)}}}function Tk(u){let h,f;const v=[c3[u[56]]];let _={$$slots:{default:[YA]},$$scope:{ctx:u}};for(let x=0;x<v.length;x+=1)_=X_(_,v[x]);return h=new yT({props:_}),{c(){Nt(h.$$.fragment)},l(x){Ut(h.$$.fragment,x)},m(x,a){jt(h,x,a),f=!0},p(x,a){const z=a&0?W_(v,[Y_(c3[x[56]])]):{};a[0]&384|a[1]&536870912&&(z.$$scope={dirty:a,ctx:x}),h.$set(z)},i(x){f||(it(h.$$.fragment,x),f=!0)},o(x){ht(h.$$.fragment,x),f=!1},d(x){qt(h,x)}}}function JA(u){let h,f,v=["dz","sdz","ward","dea","lgd"],_=[];for(let a=0;a<5;a+=1)_[a]=Tk(mk(u,v,a));const x=a=>ht(_[a],1,1,()=>{_[a]=null});return{c(){for(let a=0;a<5;a+=1)_[a].c();h=Cn()},l(a){for(let z=0;z<5;z+=1)_[z].l(a);h=Cn()},m(a,z){for(let A=0;A<5;A+=1)_[A]&&_[A].m(a,z);Pe(a,h,z),f=!0},p(a,z){if(z[0]&8576){v=["dz","sdz","ward","dea","lgd"];let A;for(A=0;A<5;A+=1){const O=mk(a,v,A);_[A]?(_[A].p(O,z),it(_[A],1)):(_[A]=Tk(O),_[A].c(),it(_[A],1),_[A].m(h.parentNode,h))}for($u(),A=5;A<5;A+=1)x(A);ec()}},i(a){if(!f){for(let z=0;z<5;z+=1)it(_[z]);f=!0}},o(a){_=_.filter(Boolean);for(let z=0;z<5;z+=1)ht(_[z]);f=!1},d(a){$c(_,a),a&&T(h)}}}function QA(u){return{c:nn,l:nn,m:nn,p:nn,d:nn}}function $A(u){let h,f,v=u[0].place.name+"",_,x,a,z,A,O=[...u[0].place.parents].reverse(),N=[];for(let Z=0;Z<O.length;Z+=1)N[Z]=Ak(dk(u,O,Z));return{c(){h=M("span"),f=ee("Parents of "),_=ee(v),x=be(),a=M("br"),z=be(),A=M("span");for(let Z=0;Z<N.length;Z+=1)N[Z].c();this.h()},l(Z){h=L(Z,"SPAN",{class:!0});var j=R(h);f=te(j,"Parents of "),_=te(j,v),x=xe(j),j.forEach(T),a=L(Z,"BR",{}),z=xe(Z),A=L(Z,"SPAN",{class:!0});var fe=R(A);for(let he=0;he<N.length;he+=1)N[he].l(fe);fe.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(A,"class","text-small")},m(Z,j){Pe(Z,h,j),w(h,f),w(h,_),w(h,x),Pe(Z,a,j),Pe(Z,z,j),Pe(Z,A,j);for(let fe=0;fe<N.length;fe+=1)N[fe]&&N[fe].m(A,null)},p(Z,j){if(j[0]&1&&v!==(v=Z[0].place.name+"")&&dt(_,v),j[0]&1){O=[...Z[0].place.parents].reverse();let fe;for(fe=0;fe<O.length;fe+=1){const he=dk(Z,O,fe);N[fe]?N[fe].p(he,j):(N[fe]=Ak(he),N[fe].c(),N[fe].m(A,null))}for(;fe<N.length;fe+=1)N[fe].d(1);N.length=O.length}},d(Z){Z&&T(h),Z&&T(a),Z&&T(z),Z&&T(A),$c(N,Z)}}}function Ak(u){let h,f,v=u[53]>0?"↳ ":"",_,x=u[54].name+"",a,z;return{c(){h=M("span"),f=new D2(!1),_=M("a"),a=ee(x),this.h()},l(A){h=L(A,"SPAN",{style:!0});var O=R(h);f=M2(O,!1),_=L(O,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var N=R(_);a=te(N,x),N.forEach(T),O.forEach(T),this.h()},h(){f.a=_,S(_,"href",z=yp+"/"+u[54].code),S(_,"data-sveltekit-noscroll",""),S(_,"data-sveltekit-keepfocus",""),S(_,"class","svelte-17c2th3"),ie(h,"display","block"),ie(h,"margin-left",(u[53]>0?(u[53]-1)*15:0)+"px")},m(A,O){Pe(A,h,O),f.m(v,h),w(h,_),w(_,a)},p(A,O){O[0]&1&&x!==(x=A[54].name+"")&&dt(a,x),O[0]&1&&z!==(z=yp+"/"+A[54].code)&&S(_,"href",z)},d(A){A&&T(h)}}}function ez(u){let h,f,v=u[0].place.name+"",_,x,a=yn[u[0].place.type].name+"",z;return{c(){h=M("span"),f=ee("No areas below "),_=ee(v),x=be(),z=ee(a),this.h()},l(A){h=L(A,"SPAN",{class:!0});var O=R(h);f=te(O,"No areas below "),_=te(O,v),x=xe(O),z=te(O,a),O.forEach(T),this.h()},h(){S(h,"class","muted")},m(A,O){Pe(A,h,O),w(h,f),w(h,_),w(h,x),w(h,z)},p(A,O){O[0]&1&&v!==(v=A[0].place.name+"")&&dt(_,v),O[0]&1&&a!==(a=yn[A[0].place.type].name+"")&&dt(z,a)},d(A){A&&T(h)}}}function tz(u){let h,f=(u[0].place.children[0]?yn[u[0].place.children[0].type].pl:"Areas")+"",v,_,x=u[0].place.name+"",a,z,A,O,N=u[0].place.children,Z=[];for(let j=0;j<N.length;j+=1)Z[j]=zk(fk(u,N,j));return{c(){h=M("span"),v=ee(f),_=ee(" within "),a=ee(x),z=M("br"),A=be(),O=M("span");for(let j=0;j<Z.length;j+=1)Z[j].c();this.h()},l(j){h=L(j,"SPAN",{class:!0});var fe=R(h);v=te(fe,f),_=te(fe," within "),a=te(fe,x),fe.forEach(T),z=L(j,"BR",{}),A=xe(j),O=L(j,"SPAN",{class:!0});var he=R(O);for(let Ae=0;Ae<Z.length;Ae+=1)Z[Ae].l(he);he.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(O,"class","text-small")},m(j,fe){Pe(j,h,fe),w(h,v),w(h,_),w(h,a),Pe(j,z,fe),Pe(j,A,fe),Pe(j,O,fe);for(let he=0;he<Z.length;he+=1)Z[he]&&Z[he].m(O,null)},p(j,fe){if(fe[0]&1&&f!==(f=(j[0].place.children[0]?yn[j[0].place.children[0].type].pl:"Areas")+"")&&dt(v,f),fe[0]&1&&x!==(x=j[0].place.name+"")&&dt(a,x),fe[0]&1){N=j[0].place.children;let he;for(he=0;he<N.length;he+=1){const Ae=fk(j,N,he);Z[he]?Z[he].p(Ae,fe):(Z[he]=zk(Ae),Z[he].c(),Z[he].m(O,null))}for(;he<Z.length;he+=1)Z[he].d(1);Z.length=N.length}},d(j){j&&T(h),j&&T(z),j&&T(A),j&&T(O),$c(Z,j)}}}function zk(u){let h,f=u[51].name+"",v,_,x=u[53]<u[0].place.children.length-1?", ":"",a;return{c(){h=M("a"),v=ee(f),a=ee(x),this.h()},l(z){h=L(z,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var A=R(h);v=te(A,f),A.forEach(T),a=te(z,x),this.h()},h(){S(h,"href",_=yp+"/"+u[51].code),S(h,"data-sveltekit-noscroll",""),S(h,"data-sveltekit-keepfocus",""),S(h,"class","svelte-17c2th3")},m(z,A){Pe(z,h,A),w(h,v),Pe(z,a,A)},p(z,A){A[0]&1&&f!==(f=z[51].name+"")&&dt(v,f),A[0]&1&&_!==(_=yp+"/"+z[51].code)&&S(h,"href",_),A[0]&1&&x!==(x=z[53]<z[0].place.children.length-1?", ":"")&&dt(a,x)},d(z){z&&T(h),z&&T(a)}}}function rz(u){let h=u[0].place.name+"",f,v;return{c(){f=ee(h),v=ee(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(_){f=te(_,h),v=te(_," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(_,x){Pe(_,f,x),Pe(_,v,x)},p(_,x){x[0]&1&&h!==(h=_[0].place.name+"")&&dt(f,h)},d(_){_&&T(f),_&&T(v)}}}function iz(u){let h=u[0].place.name+"",f,v,_=u[0].place.count.toLocaleString()+"",x,a,z=yn[u[0].place.type].pl+"",A,O,N=u[0].place.parents[0].name+"",Z,j;return{c(){f=ee(h),v=ee(" is one of "),x=ee(_),a=be(),A=ee(z),O=ee(`.\r
								 It is located within `),Z=ee(N),j=ee(".")},l(fe){f=te(fe,h),v=te(fe," is one of "),x=te(fe,_),a=xe(fe),A=te(fe,z),O=te(fe,`.\r
								 It is located within `),Z=te(fe,N),j=te(fe,".")},m(fe,he){Pe(fe,f,he),Pe(fe,v,he),Pe(fe,x,he),Pe(fe,a,he),Pe(fe,A,he),Pe(fe,O,he),Pe(fe,Z,he),Pe(fe,j,he)},p(fe,he){he[0]&1&&h!==(h=fe[0].place.name+"")&&dt(f,h),he[0]&1&&_!==(_=fe[0].place.count.toLocaleString()+"")&&dt(x,_),he[0]&1&&z!==(z=yn[fe[0].place.type].pl+"")&&dt(A,z),he[0]&1&&N!==(N=fe[0].place.parents[0].name+"")&&dt(Z,N)},d(fe){fe&&T(f),fe&&T(v),fe&&T(x),fe&&T(a),fe&&T(A),fe&&T(O),fe&&T(Z),fe&&T(j)}}}function nz(u){let h=u[0].place.name+"",f,v,_=u[0].place.count.toLocaleString()+"",x,a,z=yn[u[0].place.type].pl+"",A,O,N=u[0].place.parents[0].name+"",Z,j,fe=yn[u[0].place.parents[0].type].name+"",he,Ae;return{c(){f=ee(h),v=ee(" is one of "),x=ee(_),a=be(),A=ee(z),O=ee(`.  \r
									It is located within `),Z=ee(N),j=be(),he=ee(fe),Ae=ee(".")},l(Ee){f=te(Ee,h),v=te(Ee," is one of "),x=te(Ee,_),a=xe(Ee),A=te(Ee,z),O=te(Ee,`.  \r
									It is located within `),Z=te(Ee,N),j=xe(Ee),he=te(Ee,fe),Ae=te(Ee,".")},m(Ee,Ve){Pe(Ee,f,Ve),Pe(Ee,v,Ve),Pe(Ee,x,Ve),Pe(Ee,a,Ve),Pe(Ee,A,Ve),Pe(Ee,O,Ve),Pe(Ee,Z,Ve),Pe(Ee,j,Ve),Pe(Ee,he,Ve),Pe(Ee,Ae,Ve)},p(Ee,Ve){Ve[0]&1&&h!==(h=Ee[0].place.name+"")&&dt(f,h),Ve[0]&1&&_!==(_=Ee[0].place.count.toLocaleString()+"")&&dt(x,_),Ve[0]&1&&z!==(z=yn[Ee[0].place.type].pl+"")&&dt(A,z),Ve[0]&1&&N!==(N=Ee[0].place.parents[0].name+"")&&dt(Z,N),Ve[0]&1&&fe!==(fe=yn[Ee[0].place.parents[0].type].name+"")&&dt(he,fe)},d(Ee){Ee&&T(f),Ee&&T(v),Ee&&T(x),Ee&&T(a),Ee&&T(A),Ee&&T(O),Ee&&T(Z),Ee&&T(j),Ee&&T(he),Ee&&T(Ae)}}}function Pk(u){let h,f,v,_=u[0].place.data.population.value[2021].all/u[0].place.hectares>u[0].ni.data.population.value[2021].all/u[0].ni.hectares*1.1?"Higher than Northern Ireland value of ":u[0].place.data.population.value[2021].all/u[0].place.hectares<u[0].ni.data.population.value[2021].all/u[0].ni.hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",x,a,z=(u[0].ni.data.population.value[2021].all/u[0].ni.hectares).toFixed(1)+"",A,O;return{c(){h=M("br"),f=be(),v=M("span"),x=ee(_),a=be(),A=ee(z),O=ee(" persons per hectare"),this.h()},l(N){h=L(N,"BR",{}),f=xe(N),v=L(N,"SPAN",{class:!0});var Z=R(v);x=te(Z,_),a=xe(Z),A=te(Z,z),O=te(Z," persons per hectare"),Z.forEach(T),this.h()},h(){S(v,"class","text-small")},m(N,Z){Pe(N,h,Z),Pe(N,f,Z),Pe(N,v,Z),w(v,x),w(v,a),w(v,A),w(v,O)},p(N,Z){Z[0]&1&&_!==(_=N[0].place.data.population.value[2021].all/N[0].place.hectares>N[0].ni.data.population.value[2021].all/N[0].ni.hectares*1.1?"Higher than Northern Ireland value of ":N[0].place.data.population.value[2021].all/N[0].place.hectares<N[0].ni.data.population.value[2021].all/N[0].ni.hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&dt(x,_),Z[0]&1&&z!==(z=(N[0].ni.data.population.value[2021].all/N[0].ni.hectares).toFixed(1)+"")&&dt(A,z)},d(N){N&&T(h),N&&T(f),N&&T(v)}}}function Ck(u){let h,f,v,_,x;return{c(){h=M("div"),f=Ma("svg"),v=Ma("rect"),_=be(),x=ee(u[11]),this.h()},l(a){h=L(a,"DIV",{class:!0});var z=R(h);f=La(z,"svg",{width:!0,height:!0,style:!0});var A=R(f);v=La(A,"rect",{width:!0,height:!0,style:!0}),R(v).forEach(T),A.forEach(T),_=xe(z),x=te(z,u[11]),z.forEach(T),this.h()},h(){S(v,"width","25"),S(v,"height","4"),ie(v,"fill","#CEDC20"),S(f,"width","25"),S(f,"height","4"),ie(f,"display","inline-block"),ie(f,"margin-bottom","3px"),S(h,"class","text-small muted; ")},m(a,z){Pe(a,h,z),w(h,f),w(f,v),w(h,_),w(h,x)},p(a,z){z[0]&2048&&dt(x,a[11])},d(a){a&&T(h)}}}function az(u){let h,f,v=u[0].place&&u[0].ni&&yk(u);return{c(){v&&v.c(),h=Cn()},l(_){v&&v.l(_),h=Cn()},m(_,x){v&&v.m(_,x),Pe(_,h,x),f=!0},p(_,x){_[0].place&&_[0].ni?v?(v.p(_,x),x[0]&1&&it(v,1)):(v=yk(_),v.c(),it(v,1),v.m(h.parentNode,h)):v&&($u(),ht(v,1,1,()=>{v=null}),ec())},i(_){f||(it(v),f=!0)},o(_){ht(v),f=!1},d(_){v&&v.d(_),_&&T(h)}}}function oz(u){let h,f,v,_,x,a,z,A,O,N,Z,j,fe,he,Ae,Ee;return document.title=h=u[0].place.name+" Census Data",fe=new SA({}),Ae=new a5({props:{column:"wide",$$slots:{default:[az]},$$scope:{ctx:u}}}),{c(){f=M("meta"),v=M("meta"),x=M("meta"),a=M("meta"),A=M("meta"),N=M("meta"),j=be(),Nt(fe.$$.fragment),he=be(),Nt(Ae.$$.fragment),this.h()},l(Ve){const je=s5("svelte-2xtnib",document.head);f=L(je,"META",{name:!0,content:!0}),v=L(je,"META",{property:!0,content:!0}),x=L(je,"META",{property:!0,content:!0}),a=L(je,"META",{property:!0,content:!0}),A=L(je,"META",{property:!0,content:!0}),N=L(je,"META",{name:!0,content:!0}),je.forEach(T),j=xe(Ve),Ut(fe.$$.fragment,Ve),he=xe(Ve),Ut(Ae.$$.fragment,Ve),this.h()},h(){S(f,"name","description"),S(f,"content",""),S(v,"property","og:title"),S(v,"content",_=u[0].place.name+" Census Data"),S(x,"property","og:type"),S(x,"content","website"),S(a,"property","og:url"),S(a,"content",z=e0.base+"/"+u[0].place.code+"/"),S(A,"property","og:description"),S(A,"content",O="Explore census data for "+u[0].place.name+"."),S(N,"name","description"),S(N,"content",Z="Explore census data for "+u[0].place.name+".")},m(Ve,je){w(document.head,f),w(document.head,v),w(document.head,x),w(document.head,a),w(document.head,A),w(document.head,N),Pe(Ve,j,je),jt(fe,Ve,je),Pe(Ve,he,je),jt(Ae,Ve,je),Ee=!0},p(Ve,je){(!Ee||je[0]&1)&&h!==(h=Ve[0].place.name+" Census Data")&&(document.title=h),(!Ee||je[0]&1&&_!==(_=Ve[0].place.name+" Census Data"))&&S(v,"content",_),(!Ee||je[0]&1&&z!==(z=e0.base+"/"+Ve[0].place.code+"/"))&&S(a,"content",z),(!Ee||je[0]&1&&O!==(O="Explore census data for "+Ve[0].place.name+"."))&&S(A,"content",O),(!Ee||je[0]&1&&Z!==(Z="Explore census data for "+Ve[0].place.name+"."))&&S(N,"content",Z);const Bt={};je[0]&4095|je[1]&536870912&&(Bt.$$scope={dirty:je,ctx:Ve}),Ae.$set(Bt)},i(Ve){Ee||(it(fe.$$.fragment,Ve),it(Ae.$$.fragment,Ve),Ee=!0)},o(Ve){ht(fe.$$.fragment,Ve),ht(Ae.$$.fragment,Ve),Ee=!1},d(Ve){T(f),T(v),T(x),T(a),T(A),T(N),Ve&&T(j),qt(fe,Ve),Ve&&T(he),qt(Ae,Ve)}}}function Er(){card.ariaHidden=!row.ariaExpanded}function sz(u,h,f){let v,_,x,a,z,{data:A}=h,O,N,Z=null,j=!1,fe={selected:null,type:null,childType:null,highlighted:[],hovered:null},he={};Object.keys(yd).forEach(ur=>f(8,he[ur]=!1,he));function Ae(ur){const Jn=(ar,bn)=>ar+bn;let gi=ur[0],ii="perc",Fr=A.place.data[gi][ii][2021],pi=A.place.data[gi][ii][2011],Ai=A.ni.data[gi][ii][2021],ni=u3[gi].map(ar=>ar.category),fi=u3[gi].map(ar=>ar.label?ar.label:ar.category);return ni.map((ar,bn)=>Array.isArray(ar)?{x:fi[bn],y:ar.map(Zn=>Fr[Zn]).reduce(Jn,0),ni:ar.map(Zn=>Ai[Zn]).reduce(Jn,0),prev:ar.map(Zn=>pi[Zn]).reduce(Jn,0)}:{x:fi[bn],y:Fr[ar],ni:Ai[ar],prev:pi[ar]})}function Ee(ur){Z&&Z.fitBounds(ur,{padding:20})}function Ve(ur){let Jn=JSON.parse(JSON.stringify(fe)),gi=A.place.code,ii=A.place.type,Fr=A.place.children[0]?A.place.children.map(hr=>hr.code):[],pi=A.place.type=="rgn"?"cty":Fr[0]?A.place.children[0].type:null;f(7,fe.selected=gi,fe),f(7,fe.type=ii,fe),f(7,fe.childType=pi,fe),f(7,fe.highlighted=Fr,fe);let Ai=Object.keys(yd),ni=["fill-color","fill-opacity"],fi=["line-color","line-width","line-opacity"];Z&&(fe.type!=Jn.type||fe.childType!=Jn.childType)&&(Ai.forEach(hr=>{let ar=hr==ii||pi&&hr==pi?"visible":"none";Z.setLayoutProperty(hr+"-fill","visibility",ar),Z.setLayoutProperty(hr+"-bounds","visibility",ar),A.place.parents[0]&&Z.setLayoutProperty(hr+"-self","visibility",ar),f(8,he[hr]=hr==pi,he)}),A.place.parents[0]&&(ni.forEach(hr=>Z.setPaintProperty(ii+"-fill",hr,oa[Fr[0]?"fill-active":"fill-self"][hr])),fi.forEach(hr=>{Z.setPaintProperty(ii+"-bounds",hr,oa["line-active"][hr]),Z.setPaintProperty(ii+"-self",hr,oa["line-self"][hr])})),pi&&(ni.forEach(hr=>Z.setPaintProperty(pi+"-fill",hr,oa["fill-child"][hr])),fi.forEach(hr=>Z.setPaintProperty(pi+"-bounds",hr,oa["line-child"][hr]))))}function je(ur){Ve(),Ee(A.place.bounds)}function Bt(ur){m3(`${yp}/${ur.detail.code}/`,{noScroll:!0,keepFocus:!0})}function Mt(ur){m3(`${yp}/${ur.detail.value}/`,{noScroll:!0,keepFocus:!0})}function mt(){f(5,N=O<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const et=()=>f(3,z=!0),Ar=()=>f(2,j=!1),Sr=()=>f(9,a=!1),or=()=>f(3,z=!0),kt=()=>f(2,j=!1),Tt=()=>f(9,a=!1),Pr=()=>f(9,a=!0),Ot=()=>f(3,z=!1),zr=()=>f(2,j=!1),at=()=>f(2,j=!0),cr=()=>f(3,z=!1),Jr=()=>f(9,a=!1),hi=()=>f(2,j=!1),Tr=()=>f(3,z=!0),gn=()=>f(9,a=!1);function Fe(ur){Z=ur,f(6,Z)}function sr(){O=this.clientWidth,f(1,O)}function jn(){O=this.clientWidth,f(1,O)}function sa(){O=this.clientWidth,f(1,O)}function Ti(){O=this.clientWidth,f(1,O)}function _n(){O=this.clientWidth,f(1,O)}function ri(){O=this.clientWidth,f(1,O)}function Ia(){O=this.clientWidth,f(1,O)}function br(){O=this.clientWidth,f(1,O)}function qn(){O=this.clientWidth,f(1,O)}function Ja(){O=this.clientWidth,f(1,O)}function Vr(){O=this.clientWidth,f(1,O)}function Lt(){O=this.clientWidth,f(1,O)}function Bi(){O=this.clientWidth,f(1,O)}function Oi(){O=this.clientWidth,f(1,O)}return u.$$set=ur=>{"data"in ur&&f(0,A=ur.data)},u.$$.update=()=>{u.$$.dirty[0]&2&&O&&mt(),u.$$.dirty[0]&5&&f(11,v=j?"Same area 2011":A.place&&A.place.parents[0]?"NI 2021":null),u.$$.dirty[0]&1&&f(4,_=!(A.place.type!="ni"&&A.place.type!="lgd")),u.$$.dirty[0]&29&&f(10,x=z?null:j&&_?"prev":!j&&A.place.type!="ni"?"ni":null),u.$$.dirty[0]&1&&A.place&&je(A.place)},f(3,z=!0),f(9,a=!1),[A,O,j,z,_,N,Z,fe,he,a,x,v,Ae,Bt,Mt,et,Ar,Sr,or,kt,Tt,Pr,Ot,zr,at,cr,Jr,hi,Tr,gn,Fe,sr,jn,sa,Ti,_n,ri,Ia,br,qn,Ja,Vr,Lt,Bi,Oi]}class dz extends Jo{constructor(h){super(),Qo(this,h,sz,oz,$o,{data:0},null,[-1,-1])}}export{dz as component,fz as universal};
