import{g as ln,a as dv,S as t2,m as rg,b as ab,c as r2,d as na,e as i2}from"../chunks/Section.519143fb.js";import{s as ts,D as yy,f as Z,g as H,h as re,d as R,j as S,k as ee,v as Ii,i as Ce,F as gy,G as vy,H as _y,a as ve,c as _e,w as z,z as kt,u as Qi,B as Hu,K as Tx,p as Op,r as ut,L as ob,l as xe,m as we,n as ft,e as gn,M as Gc,N as $o,O as es,I as zx,o as Cx,x as og,J as er,P as qr,Q as Ha,R as Ga,E as n2,S as vr,T as _r,U as a2,V as mv,W as cv}from"../chunks/scheduler.5192e747.js";import{S as rs,i as is,a as et,t as pt,g as qu,c as Zu,b as jt,d as qt,m as Zt,e as Ht,f as o2}from"../chunks/index.8cd7b7a8.js";import{b as qh}from"../chunks/paths.251b6b96.js";import{h as s2,w as Zr,j as An}from"../chunks/singletons.aab1906b.js";/* empty css                                                              */function Gn(u){return(u==null?void 0:u.length)!==void 0?u:Array.from(u)}function R_(u,h){const f={},y={},_={$$scope:1};let x=u.length;for(;x--;){const o=u[x],T=h[x];if(T){for(const I in o)I in T||(y[I]=1);for(const I in T)_[I]||(f[I]=T[I],_[I]=1);u[x]=T}else for(const I in o)_[I]=1}for(const o in y)o in f||(f[o]=void 0);return f}var sb={},B_={},O_=34,$y=10,F_=13;function Ax(u){return new Function("d","return {"+u.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function l2(u,h){var f=Ax(u);return function(y,_){return h(f(y),_,u)}}function lb(u){var h=Object.create(null),f=[];return u.forEach(function(y){for(var _ in y)_ in h||f.push(h[_]=_)}),f}function yl(u,h){var f=u+"",y=f.length;return y<h?new Array(h-y+1).join(0)+f:f}function u2(u){return u<0?"-"+yl(-u,6):u>9999?"+"+yl(u,6):yl(u,4)}function c2(u){var h=u.getUTCHours(),f=u.getUTCMinutes(),y=u.getUTCSeconds(),_=u.getUTCMilliseconds();return isNaN(u)?"Invalid Date":u2(u.getUTCFullYear())+"-"+yl(u.getUTCMonth()+1,2)+"-"+yl(u.getUTCDate(),2)+(_?"T"+yl(h,2)+":"+yl(f,2)+":"+yl(y,2)+"."+yl(_,3)+"Z":y?"T"+yl(h,2)+":"+yl(f,2)+":"+yl(y,2)+"Z":f||h?"T"+yl(h,2)+":"+yl(f,2)+"Z":"")}function h2(u){var h=new RegExp('["'+u+`
\r]`),f=u.charCodeAt(0);function y(j,F){var pe,ue,De=_(j,function(Se,Oe){if(pe)return pe(Se,Oe-1);ue=Se,pe=F?l2(Se,F):Ax(Se)});return De.columns=ue||[],De}function _(j,F){var pe=[],ue=j.length,De=0,Se=0,Oe,je=ue<=0,Lt=!1;j.charCodeAt(ue-1)===$y&&--ue,j.charCodeAt(ue-1)===F_&&--ue;function Mt(){if(je)return B_;if(Lt)return Lt=!1,sb;var Qe,zr=De,Cr;if(j.charCodeAt(zr)===O_){for(;De++<ue&&j.charCodeAt(De)!==O_||j.charCodeAt(++De)===O_;);return(Qe=De)>=ue?je=!0:(Cr=j.charCodeAt(De++))===$y?Lt=!0:Cr===F_&&(Lt=!0,j.charCodeAt(De)===$y&&++De),j.slice(zr+1,Qe-1).replace(/""/g,'"')}for(;De<ue;){if((Cr=j.charCodeAt(Qe=De++))===$y)Lt=!0;else if(Cr===F_)Lt=!0,j.charCodeAt(De)===$y&&++De;else if(Cr!==f)continue;return j.slice(zr,Qe)}return je=!0,j.slice(zr,ue)}for(;(Oe=Mt())!==B_;){for(var yt=[];Oe!==sb&&Oe!==B_;)yt.push(Oe),Oe=Mt();F&&(yt=F(yt,Se++))==null||pe.push(yt)}return pe}function x(j,F){return j.map(function(pe){return F.map(function(ue){return V(pe[ue])}).join(u)})}function o(j,F){return F==null&&(F=lb(j)),[F.map(V).join(u)].concat(x(j,F)).join(`
`)}function T(j,F){return F==null&&(F=lb(j)),x(j,F).join(`
`)}function I(j){return j.map(D).join(`
`)}function D(j){return j.map(V).join(u)}function V(j){return j==null?"":j instanceof Date?c2(j):h.test(j+="")?'"'+j.replace(/"/g,'""')+'"':j}return{parse:y,parseRows:_,format:o,formatBody:T,formatRows:I,formatRow:D,formatValue:V}}var p2=h2(","),f2=p2.parse;function d2(u){for(var h in u){var f=u[h].trim(),y,_;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(y=+f))f=y;else if(_=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))m2&&_[4]&&!_[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;u[h]=f}return u}const m2=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function y2(u,h=window.fetch){let y=await(await h(u)).text();return await f2(y,d2)}function Tf(u){let h=Math.round(u)%10;return u==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function yv(u){return u>0?"increase":u<0?"decrease":"nochange"}function zf(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"No change"}function gv(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"<1%"}async function ub(u,h){return await(await h(dv.app_json_data+u+".json")).json()}async function g2({params:u,fetch:h}){let f=u.code,y=await y2(dv.search_data,h),_={};y.forEach(I=>_[I.code]=I.name),y.forEach(I=>{I.typepl=ln[I.type].pl,I.typenm=ln[I.type].name,I.typestr=_[I.parent]?`${ln[I.type].name} within ${_[I.parent]}`:""});let x=y.sort((I,D)=>I.name.localeCompare(D.name)),o=await ub("N92000002",h),T=await ub(f,h);return{search_data:x,place:T,ni:o}}const hS=Object.freeze(Object.defineProperty({__proto__:null,load:g2},Symbol.toStringTag,{value:"Module"})),cb=s2("goto");var v2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Px(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var _2={rgb2hsl:sg,rgb2hsv:kv,rgb2hwb:lg,rgb2cmyk:ug,rgb2keyword:cg,rgb2xyz:Y_,rgb2lab:Q_,rgb2lch:b2,hsl2rgb:Sv,hsl2hsv:x2,hsl2hwb:w2,hsl2cmyk:E2,hsl2keyword:k2,hsv2rgb:Iv,hsv2hsl:S2,hsv2hwb:I2,hsv2cmyk:T2,hsv2keyword:z2,hwb2rgb:hg,hwb2hsl:C2,hwb2hsv:A2,hwb2cmyk:P2,hwb2keyword:M2,cmyk2rgb:pg,cmyk2hsl:D2,cmyk2hsv:L2,cmyk2hwb:R2,cmyk2keyword:B2,keyword2rgb:Ud,keyword2hsl:N2,keyword2hsv:U2,keyword2hwb:j2,keyword2cmyk:q2,keyword2lab:Z2,keyword2xyz:H2,xyz2rgb:Mx,xyz2lab:Dx,xyz2lch:O2,lab2xyz:$_,lab2rgb:Lx,lab2lch:e0,lch2lab:t0,lch2xyz:F2,lch2rgb:V2};function sg(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,_=Math.min(h,f,y),x=Math.max(h,f,y),o=x-_,T,I,D;return x==_?T=0:h==x?T=(f-y)/o:f==x?T=2+(y-h)/o:y==x&&(T=4+(h-f)/o),T=Math.min(T*60,360),T<0&&(T+=360),D=(_+x)/2,x==_?I=0:D<=.5?I=o/(x+_):I=o/(2-x-_),[T,I*100,D*100]}function kv(u){var h=u[0],f=u[1],y=u[2],_=Math.min(h,f,y),x=Math.max(h,f,y),o=x-_,T,I,D;return x==0?I=0:I=o/x*1e3/10,x==_?T=0:h==x?T=(f-y)/o:f==x?T=2+(y-h)/o:y==x&&(T=4+(h-f)/o),T=Math.min(T*60,360),T<0&&(T+=360),D=x/255*1e3/10,[T,I,D]}function lg(u){var h=u[0],f=u[1],x=u[2],y=sg(u)[0],_=1/255*Math.min(h,Math.min(f,x)),x=1-1/255*Math.max(h,Math.max(f,x));return[y,_*100,x*100]}function ug(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,_,x,o,T;return T=Math.min(1-h,1-f,1-y),_=(1-h-T)/(1-T)||0,x=(1-f-T)/(1-T)||0,o=(1-y-T)/(1-T)||0,[_*100,x*100,o*100,T*100]}function cg(u){return Rx[JSON.stringify(u)]}function Y_(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var _=h*.4124+f*.3576+y*.1805,x=h*.2126+f*.7152+y*.0722,o=h*.0193+f*.1192+y*.9505;return[_*100,x*100,o*100]}function Q_(u){var h=Y_(u),f=h[0],y=h[1],_=h[2],x,o,T;return f/=95.047,y/=100,_/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,x=116*y-16,o=500*(f-y),T=200*(y-_),[x,o,T]}function b2(u){return e0(Q_(u))}function Sv(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,_,x,o,T,I;if(f==0)return I=y*255,[I,I,I];y<.5?x=y*(1+f):x=y+f-y*f,_=2*y-x,T=[0,0,0];for(var D=0;D<3;D++)o=h+1/3*-(D-1),o<0&&o++,o>1&&o--,6*o<1?I=_+(x-_)*6*o:2*o<1?I=x:3*o<2?I=_+(x-_)*(2/3-o)*6:I=_,T[D]=I*255;return T}function x2(u){var h=u[0],f=u[1]/100,y=u[2]/100,_,x;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,x=(y+f)/2,_=2*f/(y+f),[h,_*100,x*100])}function w2(u){return lg(Sv(u))}function E2(u){return ug(Sv(u))}function k2(u){return cg(Sv(u))}function Iv(u){var h=u[0]/60,f=u[1]/100,I=u[2]/100,y=Math.floor(h)%6,_=h-Math.floor(h),x=255*I*(1-f),o=255*I*(1-f*_),T=255*I*(1-f*(1-_)),I=255*I;switch(y){case 0:return[I,T,x];case 1:return[o,I,x];case 2:return[x,I,T];case 3:return[x,o,I];case 4:return[T,x,I];case 5:return[I,x,o]}}function S2(u){var h=u[0],f=u[1]/100,y=u[2]/100,_,x;return x=(2-f)*y,_=f*y,_/=x<=1?x:2-x,_=_||0,x/=2,[h,_*100,x*100]}function I2(u){return lg(Iv(u))}function T2(u){return ug(Iv(u))}function z2(u){return cg(Iv(u))}function hg(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,_=f+y,x,o,T,I;switch(_>1&&(f/=_,y/=_),x=Math.floor(6*h),o=1-y,T=6*h-x,x&1&&(T=1-T),I=f+T*(o-f),x){default:case 6:case 0:r=o,g=I,b=f;break;case 1:r=I,g=o,b=f;break;case 2:r=f,g=o,b=I;break;case 3:r=f,g=I,b=o;break;case 4:r=I,g=f,b=o;break;case 5:r=o,g=f,b=I;break}return[r*255,g*255,b*255]}function C2(u){return sg(hg(u))}function A2(u){return kv(hg(u))}function P2(u){return ug(hg(u))}function M2(u){return cg(hg(u))}function pg(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,_=u[3]/100,x,o,T;return x=1-Math.min(1,h*(1-_)+_),o=1-Math.min(1,f*(1-_)+_),T=1-Math.min(1,y*(1-_)+_),[x*255,o*255,T*255]}function D2(u){return sg(pg(u))}function L2(u){return kv(pg(u))}function R2(u){return lg(pg(u))}function B2(u){return cg(pg(u))}function Mx(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,_,x,o;return _=h*3.2406+f*-1.5372+y*-.4986,x=h*-.9689+f*1.8758+y*.0415,o=h*.0557+f*-.204+y*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x=x*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,_=Math.min(Math.max(0,_),1),x=Math.min(Math.max(0,x),1),o=Math.min(Math.max(0,o),1),[_*255,x*255,o*255]}function Dx(u){var h=u[0],f=u[1],y=u[2],_,x,o;return h/=95.047,f/=100,y/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,_=116*f-16,x=500*(h-f),o=200*(f-y),[_,x,o]}function O2(u){return e0(Dx(u))}function $_(u){var h=u[0],f=u[1],y=u[2],_,x,o,T;return h<=8?(x=h*100/903.3,T=7.787*(x/100)+16/116):(x=100*Math.pow((h+16)/116,3),T=Math.pow(x/100,1/3)),_=_/95.047<=.008856?_=95.047*(f/500+T-16/116)/7.787:95.047*Math.pow(f/500+T,3),o=o/108.883<=.008859?o=108.883*(T-y/200-16/116)/7.787:108.883*Math.pow(T-y/200,3),[_,x,o]}function e0(u){var h=u[0],f=u[1],y=u[2],_,x,o;return _=Math.atan2(y,f),x=_*360/2/Math.PI,x<0&&(x+=360),o=Math.sqrt(f*f+y*y),[h,o,x]}function Lx(u){return Mx($_(u))}function t0(u){var h=u[0],f=u[1],y=u[2],_,x,o;return o=y/360*2*Math.PI,_=f*Math.cos(o),x=f*Math.sin(o),[h,_,x]}function F2(u){return $_(t0(u))}function V2(u){return Lx(t0(u))}function Ud(u){return G_[u]}function N2(u){return sg(Ud(u))}function U2(u){return kv(Ud(u))}function j2(u){return lg(Ud(u))}function q2(u){return ug(Ud(u))}function Z2(u){return Q_(Ud(u))}function H2(u){return Y_(Ud(u))}var G_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Rx={};for(var hb in G_)Rx[JSON.stringify(G_[hb])]=hb;var V_=_2,Fd=function(){return new fg};for(var eg in V_){Fd[eg+"Raw"]=function(u){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),V_[u](h)}}(eg);var pb=/(\w+)2(\w+)/.exec(eg),N_=pb[1],G2=pb[2];Fd[N_]=Fd[N_]||{},Fd[N_][G2]=Fd[eg]=function(u){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=V_[u](h);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(eg)}var fg=function(){this.convs={}};fg.prototype.routeSpace=function(u,h){var f=h[0];return f===void 0?this.getValues(u):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(u,f))};fg.prototype.setValues=function(u,h){return this.space=u,this.convs={},this.convs[u]=h,this};fg.prototype.getValues=function(u){var h=this.convs[u];if(!h){var f=this.space,y=this.convs[f];h=Fd[f][u](y),this.convs[u]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(u){fg.prototype[u]=function(h){return this.routeSpace(u,arguments)}});var K2=Fd,U_=K2,X2=function(u){var h,f,y,_;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(u)){var x=h[1],o=x.replace(/a$/,""),T=o==="cmyk"?4:3;f=U_[o],y=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(D,V){return/%$/.test(D)&&V===T?parseFloat(D)/100:(/%$/.test(D),parseFloat(D))}),x===o&&y.push(1),_=y[T]===void 0?1:y[T],y=y.slice(0,T),f[o]=function(){return y}}else if(/^#[A-Fa-f0-9]+$/.test(u)){var o=u.replace(/^#/,""),T=o.length;f=U_.rgb,y=o.split(T===3?/(.)/:/(..)/),y=y.filter(Boolean).map(function(j){return parseInt(T===3?j+j:j,16)}),_=1,f.rgb=function(){return y},y[0]||(y[0]=0),y[1]||(y[1]=0),y[2]||(y[2]=0)}else f=U_.keyword,f.keyword=function(){return u},y=u,_=1;var I={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{I.rgb=f.rgb(y)}catch{}try{I.hsl=f.hsl(y)}catch{}try{I.hsv=f.hsv(y)}catch{}try{I.cmyk=f.cmyk(y)}catch{}try{I.keyword=f.keyword(y)}catch{}return I.rgb&&(I.hex="#"+I.rgb.map(function(D){var V=D.toString(16);return V.length===1?"0"+V:V}).join("")),I.rgb&&(I.rgba=I.rgb.concat(_)),I.hsl&&(I.hsla=I.hsl.concat(_)),I.hsv&&(I.hsva=I.hsv.concat(_)),I.cmyk&&(I.cmyka=I.cmyk.concat(_)),I};const W2=Px(X2);function J2(u){let h,f;const y=u[5].default,_=yy(y,u,u[4],null);return{c(){h=Z("span"),_&&_.c(),this.h()},l(x){h=H(x,"SPAN",{class:!0,style:!0,role:!0});var o=re(h);_&&_.l(o),o.forEach(R),this.h()},h(){S(h,"class","em svelte-s1t2y4"),ee(h,"background-color",u[0]),ee(h,"color",u[2]),S(h,"role","presentation"),Ii(h,"nowrap",u[1])},m(x,o){Ce(x,h,o),_&&_.m(h,null),f=!0},p(x,[o]){_&&_.p&&(!f||o&16)&&gy(_,y,x,x[4],f?_y(y,x[4],o,null):vy(x[4]),null),(!f||o&1)&&ee(h,"background-color",x[0]),(!f||o&4)&&ee(h,"color",x[2]),(!f||o&2)&&Ii(h,"nowrap",x[1])},i(x){f||(et(_,x),f=!0)},o(x){pt(_,x),f=!1},d(x){x&&R(h),_&&_.d(x)}}}function Y2(u,h,f){let y,{$$slots:_={},$$scope:x}=h,{color:o="lightgrey"}=h,{nowrap:T=!0}=h;function I(V){return(V[0]*299+V[1]*587+V[2]*114)/1e3>125?"black":"white"}let D="black";return u.$$set=V=>{"color"in V&&f(0,o=V.color),"nowrap"in V&&f(1,T=V.nowrap),"$$scope"in V&&f(4,x=V.$$scope)},u.$$.update=()=>{u.$$.dirty&1&&f(3,y=W2(o).rgb),u.$$.dirty&8&&y&&f(2,D=I(y))},[o,T,D,y,x,_]}class Tv extends rs{constructor(h){super(),is(this,h,Y2,J2,ts,{color:0,nowrap:1})}}function fb(u,h,f){const y=u.slice();return y[34]=h[f],y[37]=h,y[36]=f,y}function db(u,h,f){const y=u.slice();return y[34]=h[f],y[35]=h,y[36]=f,y}function Q2(u){let h,f,y,_,x=" ",o,T;return{c(){h=Z("a"),f=Z("input"),y=ve(),_=Z("span"),_.textContent=x,this.h()},l(I){h=H(I,"A",{id:!0,class:!0});var D=re(h);f=H(D,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),y=_e(D),_=H(D,"SPAN",{class:!0,"data-svelte-h":!0}),ut(_)!=="svelte-1vorc3h"&&(_.textContent=x),D.forEach(R),this.h()},h(){S(f,"type","text"),S(f,"placeholder",u[0]),S(f,"autocomplete","false"),f.autofocus="autofocus",S(f,"onfocus","this.select()"),S(f,"class","svelte-1jrr0c2"),S(_,"class","button svelte-1jrr0c2"),Ii(_,"search",u[3]),Ii(_,"down",!u[3]),S(h,"id","toggle"),S(h,"class","svelte-1jrr0c2")},m(I,D){Ce(I,h,D),z(h,f),ob(f,u[4]),u[25](f),z(h,y),z(h,_),f.focus(),o||(T=[kt(f,"keydown",u[15]),kt(f,"input",u[24]),kt(f,"keyup",u[17]),kt(h,"click",u[12]),kt(h,"focus",u[12])],o=!0)},p(I,D){D[0]&1&&S(f,"placeholder",I[0]),D[0]&16&&f.value!==I[4]&&ob(f,I[4]),D[0]&8&&Ii(_,"search",I[3]),D[0]&8&&Ii(_,"down",!I[3])},d(I){I&&R(h),u[25](null),o=!1,Hu(T)}}}function $2(u){let h,f,y=u[5][u[1]]+"",_,x,o,T,I=" ",D,V,j=u[2]&&mb(u);return{c(){h=Z("a"),f=Z("span"),_=xe(y),x=ve(),j&&j.c(),o=ve(),T=Z("span"),T.textContent=I,this.h()},l(F){h=H(F,"A",{id:!0,class:!0});var pe=re(h);f=H(pe,"SPAN",{class:!0});var ue=re(f);_=we(ue,y),x=_e(ue),j&&j.l(ue),ue.forEach(R),o=_e(pe),T=H(pe,"SPAN",{class:!0,"data-svelte-h":!0}),ut(T)!=="svelte-1slqsik"&&(T.textContent=I),pe.forEach(R),this.h()},h(){S(f,"class","selection svelte-1jrr0c2"),S(T,"class","button close svelte-1jrr0c2"),S(h,"id","toggle"),S(h,"class","selected svelte-1jrr0c2")},m(F,pe){Ce(F,h,pe),z(h,f),z(f,_),z(f,x),j&&j.m(f,null),z(h,o),z(h,T),D||(V=[kt(T,"click",u[14]),kt(h,"click",u[12])],D=!0)},p(F,pe){pe[0]&34&&y!==(y=F[5][F[1]]+"")&&ft(_,y),F[2]?j?j.p(F,pe):(j=mb(F),j.c(),j.m(f,null)):j&&(j.d(1),j=null)},d(F){F&&R(h),j&&j.d(),D=!1,Hu(V)}}}function mb(u){let h,f=u[5][u[2]]+"",y;return{c(){h=Z("small"),y=xe(f),this.h()},l(_){h=H(_,"SMALL",{class:!0});var x=re(h);y=we(x,f),x.forEach(R),this.h()},h(){S(h,"class","svelte-1jrr0c2")},m(_,x){Ce(_,h,x),z(h,y)},p(_,x){x[0]&36&&f!==(f=_[5][_[2]]+"")&&ft(y,f)},d(_){_&&R(h)}}}function yb(u){let h,f;function y(o,T){return o[4].length<3?iw:o[8][0]&&o[2]?rw:o[8][0]?tw:ew}let _=y(u),x=_(u);return{c(){h=Z("div"),f=Z("ul"),x.c(),this.h()},l(o){h=H(o,"DIV",{id:!0,style:!0,class:!0});var T=re(h);f=H(T,"UL",{class:!0});var I=re(f);x.l(I),I.forEach(R),T.forEach(R),this.h()},h(){S(f,"class","svelte-1jrr0c2"),S(h,"id","dropdown"),ee(h,"top","0"),ee(h,"margin-top","50px"),S(h,"class","svelte-1jrr0c2")},m(o,T){Ce(o,h,T),z(h,f),x.m(f,null),u[32](h)},p(o,T){_===(_=y(o))&&x?x.p(o,T):(x.d(1),x=_(o),x&&(x.c(),x.m(f,null)))},d(o){o&&R(h),x.d(),u[32](null)}}}function ew(u){let h,f="No results";return{c(){h=Z("li"),h.textContent=f,this.h()},l(y){h=H(y,"LI",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-1fqxcyt"&&(h.textContent=f),this.h()},h(){S(h,"class","svelte-1jrr0c2")},m(y,_){Ce(y,h,_)},p:Qi,d(y){y&&R(h)}}}function tw(u){let h,f=Gn(u[8]),y=[];for(let _=0;_<f.length;_+=1)y[_]=gb(fb(u,f,_));return{c(){for(let _=0;_<y.length;_+=1)y[_].c();h=gn()},l(_){for(let x=0;x<y.length;x+=1)y[x].l(_);h=gn()},m(_,x){for(let o=0;o<y.length;o+=1)y[o]&&y[o].m(_,x);Ce(_,h,x)},p(_,x){if(x[0]&10626){f=Gn(_[8]);let o;for(o=0;o<f.length;o+=1){const T=fb(_,f,o);y[o]?y[o].p(T,x):(y[o]=gb(T),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(_){_&&R(h),Gc(y,_)}}}function rw(u){let h,f=Gn(u[8]),y=[];for(let _=0;_<f.length;_+=1)y[_]=vb(db(u,f,_));return{c(){for(let _=0;_<y.length;_+=1)y[_].c();h=gn()},l(_){for(let x=0;x<y.length;x+=1)y[x].l(_);h=gn()},m(_,x){for(let o=0;o<y.length;o+=1)y[o]&&y[o].m(_,x);Ce(_,h,x)},p(_,x){if(x[0]&10630){f=Gn(_[8]);let o;for(o=0;o<f.length;o+=1){const T=db(_,f,o);y[o]?y[o].p(T,x):(y[o]=vb(T),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(_){_&&R(h),Gc(y,_)}}}function iw(u){let h,f="Type a name...";return{c(){h=Z("li"),h.textContent=f,this.h()},l(y){h=H(y,"LI",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-gxv8e8"&&(h.textContent=f),this.h()},h(){S(h,"class","svelte-1jrr0c2")},m(y,_){Ce(y,h,_)},p:Qi,d(y){y&&R(h)}}}function gb(u){let h,f=u[34][u[1]]+"",y,_,x=u[36],o,T;function I(){return u[29](u[34])}function D(){return u[30](u[36])}const V=()=>u[31](h,x),j=()=>u[31](null,x);return{c(){h=Z("li"),y=xe(f),_=ve(),this.h()},l(F){h=H(F,"LI",{class:!0});var pe=re(h);y=we(pe,f),_=_e(pe),pe.forEach(R),this.h()},h(){S(h,"class","svelte-1jrr0c2"),Ii(h,"highlight",u[7]==u[36])},m(F,pe){Ce(F,h,pe),z(h,y),z(h,_),V(),o||(T=[kt(h,"click",I),kt(h,"mouseover",D)],o=!0)},p(F,pe){u=F,pe[0]&258&&f!==(f=u[34][u[1]]+"")&&ft(y,f),x!==u[36]&&(j(),x=u[36],V()),pe[0]&128&&Ii(h,"highlight",u[7]==u[36])},d(F){F&&R(h),j(),o=!1,Hu(T)}}}function vb(u){let h,f=u[34][u[1]]+"",y,_,x,o=u[34][u[2]]+"",T,I,D=u[36],V,j;function F(){return u[26](u[34])}function pe(){return u[27](u[36])}const ue=()=>u[28](h,D),De=()=>u[28](null,D);return{c(){h=Z("li"),y=xe(f),_=ve(),x=Z("small"),T=xe(o),I=ve(),this.h()},l(Se){h=H(Se,"LI",{class:!0});var Oe=re(h);y=we(Oe,f),_=_e(Oe),x=H(Oe,"SMALL",{class:!0});var je=re(x);T=we(je,o),je.forEach(R),I=_e(Oe),Oe.forEach(R),this.h()},h(){S(x,"class","svelte-1jrr0c2"),S(h,"class","svelte-1jrr0c2"),Ii(h,"highlight",u[7]==u[36])},m(Se,Oe){Ce(Se,h,Oe),z(h,y),z(h,_),z(h,x),z(x,T),z(h,I),ue(),V||(j=[kt(h,"click",F),kt(h,"mouseover",pe)],V=!0)},p(Se,Oe){u=Se,Oe[0]&258&&f!==(f=u[34][u[1]]+"")&&ft(y,f),Oe[0]&260&&o!==(o=u[34][u[2]]+"")&&ft(T,o),D!==u[36]&&(De(),D=u[36],ue()),Oe[0]&128&&Ii(h,"highlight",u[7]==u[36])},d(Se){Se&&R(h),De(),V=!1,Hu(j)}}}function nw(u){let h,f,y,_;function x(D,V){return D[5]&&!D[3]?$2:Q2}let o=x(u),T=o(u),I=u[6]&&yb(u);return{c(){h=Z("div"),T.c(),f=ve(),I&&I.c(),this.h()},l(D){h=H(D,"DIV",{id:!0,class:!0});var V=re(h);T.l(V),f=_e(V),I&&I.l(V),V.forEach(R),this.h()},h(){S(h,"id","select"),S(h,"class","svelte-1jrr0c2"),Ii(h,"active",u[6])},m(D,V){Ce(D,h,V),T.m(h,null),z(h,f),I&&I.m(h,null),y||(_=[kt(window,"click",u[18]),kt(h,"keydown",u[16])],y=!0)},p(D,V){o===(o=x(D))&&T?T.p(D,V):(T.d(1),T=o(D),T&&(T.c(),T.m(h,f))),D[6]?I?I.p(D,V):(I=yb(D),I.c(),I.m(h,null)):I&&(I.d(1),I=null),V[0]&64&&Ii(h,"active",D[6])},i:Qi,o:Qi,d(D){D&&R(h),T.d(),I&&I.d(),y=!1,Hu(_)}}}function aw(u){return new Promise(h=>setTimeout(h,u))}function ow(u,h,f){let y;const _=Tx();let{search_data:x}=h,{selected:o=null}=h,{placeholder:T="Enter a town or area name"}=h,{value:I="code"}=h,{label:D="name"}=h,{group:V=null}=h,{search:j=!1}=h,F=o,pe=o?x.find(Ve=>{Ve[I]==o[I]}):null,ue=!1,De="",Se=null,Oe,je,Lt,Mt=[];function yt(Ve){Ve.stopPropagation(),f(4,De=""),f(6,ue=!ue),aw(10).then(()=>{Lt&&ue&&Lt.focus()})}function Qe(Ve){f(19,o=Ve),f(6,ue=!1),_("select",{selected:Ve,value:Ve[I]})}function zr(Ve){Ve.stopPropagation(),f(19,o=null),f(22,F=null),f(5,pe=null),_("select",{selected:null,value:null})}function Cr(Ve){f(6,ue=!0)}function sr(Ve){ue&&Oe[0]&&Number.isInteger(Se)&&(Ve.keyCode===38?(f(7,Se-=Se>0?1:0),Mt[Se].scrollIntoView({block:"nearest",inline:"start"})):Ve.keyCode===40&&(f(7,Se+=Se<Oe.length-1?1:0),Mt[Se].scrollIntoView({block:"nearest",inline:"end"})))}function St(Ve){Oe[0]&&Number.isInteger(Se)&&Ve.keyCode===13&&Qe(Oe[Se])}function Tt(Ve){Ve.target!==je&&(f(6,ue=!1),f(7,Se=0))}function Lr(){De=this.value,f(4,De)}function Ot(Ve){Op[Ve?"unshift":"push"](()=>{Lt=Ve,f(10,Lt)})}const Rr=Ve=>Qe(Ve),ot=Ve=>f(7,Se=Ve);function Fr(Ve,Tr){Op[Ve?"unshift":"push"](()=>{Mt[Tr]=Ve,f(11,Mt)})}const Qr=Ve=>Qe(Ve),Ar=Ve=>f(7,Se=Ve);function dr(Ve,Tr){Op[Ve?"unshift":"push"](()=>{Mt[Tr]=Ve,f(11,Mt)})}function wi(Ve){Op[Ve?"unshift":"push"](()=>{je=Ve,f(9,je)})}return u.$$set=Ve=>{"search_data"in Ve&&f(20,x=Ve.search_data),"selected"in Ve&&f(19,o=Ve.selected),"placeholder"in Ve&&f(0,T=Ve.placeholder),"value"in Ve&&f(21,I=Ve.value),"label"in Ve&&f(1,D=Ve.label),"group"in Ve&&f(2,V=Ve.group),"search"in Ve&&f(3,j=Ve.search)},u.$$.update=()=>{u.$$.dirty[0]&16&&f(23,y=De?new RegExp(De,"i"):null),u.$$.dirty[0]&9437186&&(f(8,Oe=y?x.filter(Ve=>y.test(Ve[D])):x),f(7,Se=0)),u.$$.dirty[0]&7864320&&F!=o&&(f(5,pe=x.find(Ve=>Ve[I]==o[I])),f(22,F=o))},[T,D,V,j,De,pe,ue,Se,Oe,je,Lt,Mt,yt,Qe,zr,Cr,sr,St,Tt,o,x,I,F,y,Lr,Ot,Rr,ot,Fr,Qr,Ar,dr,wi]}class sw extends rs{constructor(h){super(),is(this,h,ow,nw,ts,{search_data:20,selected:19,placeholder:0,value:21,label:1,group:2,search:3},null,[-1,-1])}}var Bx={exports:{}};(function(u,h){(function(f,y){u.exports=y()})(v2,function(){var f,y,_;function x(o,T){if(!f)f=T;else if(!y)y=T;else{var I="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",D={};f(D),_=T(D),typeof window<"u"&&(_.workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"})))}}return x(["exports"],function(o){function T(e,t){return e(t={exports:{}},t.exports),t.exports}var I=D;function D(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}D.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},D.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},D.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},D.prototype.solveCurveX=function(e,t){var i,l,p,d,v;for(t===void 0&&(t=1e-6),p=e,v=0;v<8;v++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var k=this.sampleCurveDerivativeX(p);if(Math.abs(k)<1e-6)break;p-=d/k}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},D.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var V=j;function j(e,t){this.x=e,this.y=t}j.prototype={clone:function(){return new j(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},j.convert=function(e){return e instanceof j?e:Array.isArray(e)?new j(e[0],e[1]):e};var F=typeof self<"u"?self:{},pe=Math.pow(2,53)-1;function ue(e,t,i,l){var p=new I(e,t,i,l);return function(d){return p.solve(d)}}var De=ue(.25,.1,.25,1);function Se(e,t,i){return Math.min(i,Math.max(t,e))}function Oe(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function je(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}var Lt=1;function Mt(){return Lt++}function yt(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Qe(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function zr(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function Cr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function sr(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function St(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function Tt(e){return Array.isArray(e)?e.map(Tt):typeof e=="object"&&e?sr(e,Tt):e}var Lr={};function Ot(e){Lr[e]||(typeof console<"u"&&console.warn(e),Lr[e]=!0)}function Rr(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function ot(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,v=void 0;i<l;p=i++)t+=((v=e[p]).x-(d=e[i]).x)*(d.y+v.y);return t}function Fr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Qr(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,v){var k=d||v;return t[p]=!k||k.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Ar=null;function dr(e){if(Ar==null){var t=e.navigator?e.navigator.userAgent:null;Ar=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ar}function wi(e){try{var t=F[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ve,Tr,vn,Ta,ni=F.performance&&F.performance.now?F.performance.now.bind(F.performance):Date.now.bind(Date),_n=F.requestAnimationFrame||F.mozRequestAnimationFrame||F.webkitRequestAnimationFrame||F.msRequestAnimationFrame,$r=F.cancelAnimationFrame||F.mozCancelAnimationFrame||F.webkitCancelAnimationFrame||F.msCancelAnimationFrame,za={now:ni,frame:function(e){var t=_n(e);return{cancel:function(){return $r(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=F.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Ve||(Ve=F.document.createElement("a")),Ve.href=e,Ve.href},hardwareConcurrency:F.navigator&&F.navigator.hardwareConcurrency||4,get devicePixelRatio(){return F.devicePixelRatio},get prefersReducedMotion(){return!!F.matchMedia&&(Tr==null&&(Tr=F.matchMedia("(prefers-reduced-motion: reduce)")),Tr.matches)}},hr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Pn={supported:!1,testSupport:function(e){!ns&&Ta&&(Mn?Vt(e):vn=e)}},ns=!1,Mn=!1;function Vt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Ta),e.isContextLost())return;Pn.supported=!0}catch{}e.deleteTexture(t),ns=!0}F.document&&((Ta=F.document.createElement("img")).onload=function(){vn&&Vt(vn),vn=null,Mn=!0},Ta.onerror=function(){ns=!0,vn=null},Ta.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ca="01",Ni=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function pr(e){return e.indexOf("mapbox:")===0}Ni.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ca,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Ni.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ni.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Ni.prototype.normalizeStyleURL=function(e,t){if(!pr(e))return e;var i=pi(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Ni.prototype.normalizeGlyphsURL=function(e,t){if(!pr(e))return e;var i=pi(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Ni.prototype.normalizeSourceURL=function(e,t){if(!pr(e))return e;var i=pi(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Ni.prototype.normalizeSpriteURL=function(e,t,i,l){var p=pi(e);return pr(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,fi(p))},Ni.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!pr(e))return e;var i=pi(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(za.devicePixelRatio>=2||t===512?"@2x":"")+(Pn.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,v=p;d<v.length;d+=1){var k=v[d].match(/^access_token=(.*)$/);if(k)return k[1]}return null}(i.params)||hr.ACCESS_TOKEN;return hr.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Ni.prototype.canonicalizeTileURL=function(e,t){var i=pi(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Ni.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&pr(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var v=d[p];yi(v)?l.push(this.canonicalizeTileURL(v,i)):l.push(v)}return l},Ni.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=pi(hr.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!hr.REQUIRE_ACCESS_TOKEN)return fi(e);if(!(t=t||hr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),fi(e)};var $i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function yi(e){return $i.test(e)}var Mi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pi(e){var t=e.match(Mi);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function fi(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function un(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(F.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var mr=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};mr.prototype.getStorageKey=function(e){var t,i=un(hr.ACCESS_TOKEN);return t=i&&i.u?F.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(+("0x"+p))})):hr.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},mr.prototype.fetchEventData=function(){var e=wi("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=F.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=F.localStorage.getItem(i);p&&(this.anonId=p)}catch{Ot("Unable to read from LocalStorage")}},mr.prototype.saveEventData=function(){var e=wi("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{F.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&F.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ot("Unable to write to LocalStorage")}},mr.prototype.processRequests=function(e){},mr.prototype.postEvent=function(e,t,i,l){var p=this;if(hr.EVENTS_URL){var d=pi(hr.EVENTS_URL);d.params.push("access_token="+(l||hr.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Ca,userId:this.anonId},k=t?je(v,t):v,A={url:fi(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=br(A,function(P){p.pendingRequest=null,i(P),p.saveEventData(),p.processRequests(l)})}},mr.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var Pr,tr,yr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p;var v=!(!d&&!hr.ACCESS_TOKEN),k=Array.isArray(i)&&i.some(function(A){return pr(A)||yi(A)});hr.EVENTS_URL&&v&&k&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,v=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),Qe(this.anonId)||(this.anonId=yt()),this.postEvent(v,{skuToken:this.skuToken},function(k){k||d&&(l.success[d]=!0)},i))}},t}(mr),Ki=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){hr.EVENTS_URL&&hr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return pr(p)||yi(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=un(hr.ACCESS_TOKEN),d=p?p.u:hr.ACCESS_TOKEN,v=d!==this.eventData.tokenU;Qe(this.anonId)||(this.anonId=yt(),v=!0);var k=this.queue.shift();if(this.eventData.lastSuccess){var A=new Date(this.eventData.lastSuccess),P=new Date(k),L=(k-this.eventData.lastSuccess)/864e5;v=v||L>=1||L<-1||A.getDate()!==P.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(k,{"enabled.telemetry":!1},function(O){O||(l.eventData.lastSuccess=k,l.eventData.tokenU=d)},i)}},t}(mr)),Dn=Ki.postTurnstileEvent.bind(Ki),Bs=new yr,To=Bs.postMapLoadEvent.bind(Bs),Ln=500,Os=50;function lo(){F.caches&&!Pr&&(Pr=F.caches.open("mapbox-tiles"))}function aa(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var oa,uo=1/0;function zo(){return oa==null&&(oa=F.OffscreenCanvas&&new F.OffscreenCanvas(1,1).getContext("2d")&&typeof F.createImageBitmap=="function"),oa}var as={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(as);var Co=function(e){function t(i,l,p){l===401&&yi(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Aa=Fr()?function(){return self.worker&&self.worker.referrer}:function(){return(F.location.protocol==="blob:"?F.parent:F).location.href},ai,cn,Kn=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Aa())&&!/^\w+:/.test(i))){if(F.fetch&&F.Request&&F.AbortController&&F.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,v=new F.AbortController,k=new F.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Aa(),signal:v.signal}),A=!1,P=!1,L=(d=k.url).indexOf("sku=")>0&&yi(d);l.type==="json"&&k.headers.set("Accept","application/json");var O=function(X,ie,oe){if(!P){if(X&&X.message!=="SecurityError"&&Ot(X),ie&&oe)return U(ie);var de=Date.now();F.fetch(k).then(function(ce){if(ce.ok){var be=L?ce.clone():null;return U(ce,be,de)}return p(new Co(ce.statusText,ce.status,l.url))}).catch(function(ce){ce.code!==20&&p(new Error(ce.message))})}},U=function(X,ie,oe){(l.type==="arrayBuffer"?X.arrayBuffer():l.type==="json"?X.json():X.text()).then(function(de){P||(ie&&oe&&function(ce,be,Te){if(lo(),Pr){var Pe={status:be.status,statusText:be.statusText,headers:new F.Headers};be.headers.forEach(function(Ne,Ge){return Pe.headers.set(Ge,Ne)});var Me=Qr(be.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&Pe.headers.set("Expires",new Date(Te+1e3*Me["max-age"]).toUTCString()),new Date(Pe.headers.get("Expires")).getTime()-Te<42e4||function(Ne,Ge){if(tr===void 0)try{new Response(new ReadableStream),tr=!0}catch{tr=!1}tr?Ge(Ne.body):Ne.blob().then(Ge)}(be,function(Ne){var Ge=new F.Response(Ne,Pe);lo(),Pr&&Pr.then(function(We){return We.put(aa(ce.url),Ge)}).catch(function(We){return Ot(We.message)})}))}}(k,ie,oe),A=!0,p(null,de,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(function(de){P||p(new Error(de.message))})};return L?function(X,ie){if(lo(),!Pr)return ie(null);var oe=aa(X.url);Pr.then(function(de){de.match(oe).then(function(ce){var be=function(Te){if(!Te)return!1;var Pe=new Date(Te.headers.get("Expires")||0),Me=Qr(Te.headers.get("Cache-Control")||"");return Pe>Date.now()&&!Me["no-cache"]}(ce);de.delete(oe),be&&de.put(oe,ce.clone()),ie(null,ce,be)}).catch(ie)}).catch(ie)}(k,O):O(null,null),{cancel:function(){P=!0,A||v.abort()}}}(e,t);if(Fr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new F.XMLHttpRequest;for(var v in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(v,l.headers[v]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var k=d.response;if(l.type==="json")try{k=JSON.parse(d.response)}catch(A){return p(A)}p(null,k,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new Co(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},Ka=function(e,t){return Kn(je(e,{type:"arrayBuffer"}),t)},br=function(e,t){return Kn(je(e,{method:"POST"}),t)},B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ai=[],cn=0;var q=function(e,t){if(Pn.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),cn>=hr.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return ai.push(i),i}cn++;var l=!1,p=function(){if(!l)for(l=!0,cn--;ai.length&&cn<hr.MAX_PARALLEL_IMAGE_REQUESTS;){var v=ai.shift();v.cancelled||(v.cancel=q(v.requestParameters,v.callback).cancel)}},d=Ka(e,function(v,k,A,P){p(),v?t(v):k&&(zo()?function(L,O){var U=new F.Blob([new Uint8Array(L)],{type:"image/png"});F.createImageBitmap(U).then(function(X){O(null,X)}).catch(function(X){O(new Error("Could not load image because of "+X.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(k,t):function(L,O,U,X){var ie=new F.Image,oe=F.URL;ie.onload=function(){O(null,ie),oe.revokeObjectURL(ie.src),ie.onload=null,F.requestAnimationFrame(function(){ie.src=B})},ie.onerror=function(){return O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var de=new F.Blob([new Uint8Array(L)],{type:"image/png"});ie.cacheControl=U,ie.expires=X,ie.src=L.byteLength?oe.createObjectURL(de):B}(k,t,A,P))});return{cancel:function(){d.cancel(),p()}}};function K(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function $(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var le=function(e,t){t===void 0&&(t={}),je(this,t),this.type=e},me=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",je({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(le),ye=function(){};ye.prototype.on=function(e,t){return this._listeners=this._listeners||{},K(e,t,this._listeners),this},ye.prototype.off=function(e,t){return $(e,t,this._listeners),$(e,t,this._oneTimeListeners),this},ye.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},K(e,t,this._oneTimeListeners),this},ye.prototype.fire=function(e,t){typeof e=="string"&&(e=new le(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var k=v[d];$(i,k,this._oneTimeListeners),k.call(this,e)}var A=this._eventedParent;A&&(je(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(e))}else e instanceof me&&console.error(e.error);return this},ye.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ye.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var G={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},te=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function ke(e){var t=e.value;return t?[new te(e.key,t,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}function He(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Re(e){if(Array.isArray(e))return e.map(Re);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Re(e[i]);return t}return He(e)}var qe=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),at=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};at.prototype.concat=function(e){return new at(this,e)},at.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},at.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var st={kind:"null"},Le={kind:"number"},tt={kind:"string"},Je={kind:"boolean"},Ye={kind:"color"},Gt={kind:"object"},rt={kind:"value"},Rt={kind:"collator"},$t={kind:"formatted"},At={kind:"resolvedImage"};function Jt(e,t){return{kind:"array",itemType:e,N:t}}function rr(e){if(e.kind==="array"){var t=rr(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var di=[st,Le,tt,Je,Ye,$t,Gt,Jt(rt),At];function lr(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!lr(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=di;i<l.length;i+=1)if(!lr(l[i],t))return null}}return"Expected "+rr(e)+" but found "+rr(t)+" instead."}function oi(e,t){return t.some(function(i){return i.kind===e.kind})}function gr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Nt=T(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(k){return(k=Math.round(k))<0?0:k>255?255:k}function p(k){return l(k[k.length-1]==="%"?parseFloat(k)/100*255:parseInt(k))}function d(k){return(A=k[k.length-1]==="%"?parseFloat(k)/100:parseFloat(k))<0?0:A>1?1:A;var A}function v(k,A,P){return P<0?P+=1:P>1&&(P-=1),6*P<1?k+(A-k)*P*6:2*P<1?A:3*P<2?k+(A-k)*(2/3-P)*6:k}try{t.parseCSSColor=function(k){var A,P=k.replace(/ /g,"").toLowerCase();if(P in i)return i[P].slice();if(P[0]==="#")return P.length===4?(A=parseInt(P.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:P.length===7&&(A=parseInt(P.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var L=P.indexOf("("),O=P.indexOf(")");if(L!==-1&&O+1===P.length){var U=P.substr(0,L),X=P.substr(L+1,O-(L+1)).split(","),ie=1;switch(U){case"rgba":if(X.length!==4)return null;ie=d(X.pop());case"rgb":return X.length!==3?null:[p(X[0]),p(X[1]),p(X[2]),ie];case"hsla":if(X.length!==4)return null;ie=d(X.pop());case"hsl":if(X.length!==3)return null;var oe=(parseFloat(X[0])%360+360)%360/360,de=d(X[1]),ce=d(X[2]),be=ce<=.5?ce*(de+1):ce+de-ce*de,Te=2*ce-be;return[l(255*v(Te,be,oe+1/3)),l(255*v(Te,be,oe)),l(255*v(Te,be,oe-1/3)),ie];default:return null}}return null}}catch{}}).parseCSSColor,ur=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};ur.parse=function(e){if(e){if(e instanceof ur)return e;if(typeof e=="string"){var t=Nt(e);if(t)return new ur(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},ur.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},ur.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},ur.black=new ur(0,0,0,1),ur.white=new ur(1,1,1,1),ur.transparent=new ur(0,0,0,0),ur.red=new ur(1,0,0,1);var Ui=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ui.prototype.compare=function(e,t){return this.collator.compare(e,t)},Ui.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var co=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},Ei=function(e){this.sections=e};Ei.fromString=function(e){return new Ei([new co(e,null,null,null,null)])},Ei.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Ei.factory=function(e){return e instanceof Ei?e:Ei.fromString(e)},Ei.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Ei.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var si=function(e){this.name=e.name,this.available=e.available};function bn(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function xn(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof ur||e instanceof Ui||e instanceof Ei||e instanceof si)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!xn(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!xn(e[l]))return!1;return!0}return!1}function ei(e){if(e===null)return st;if(typeof e=="string")return tt;if(typeof e=="boolean")return Je;if(typeof e=="number")return Le;if(e instanceof ur)return Ye;if(e instanceof Ui)return Rt;if(e instanceof Ei)return $t;if(e instanceof si)return At;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=ei(p[l]);if(t){if(t===d)continue;t=rt;break}t=d}return Jt(t||rt,i)}return Gt}function sa(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof ur||e instanceof Ei||e instanceof si?e.toString():JSON.stringify(e)}si.prototype.toString=function(){return this.name},si.fromString=function(e){return e?new si({name:e,available:!1}):null},si.prototype.serialize=function(){return["image",this.name]};var Di=function(e,t){this.type=e,this.value=t};Di.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!xn(e[1]))return t.error("invalid value");var i=e[1],l=ei(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new Di(l,i)},Di.prototype.evaluate=function(){return this.value},Di.prototype.eachChild=function(){},Di.prototype.outputDefined=function(){return!0},Di.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ur?["rgba"].concat(this.value.toArray()):this.value instanceof Ei?this.value.serialize():this.value};var Li=function(e){this.name="ExpressionEvaluationError",this.message=e};Li.prototype.toJSON=function(){return this.message};var wn={string:tt,number:Le,boolean:Je,object:Gt},xr=function(e,t){this.type=e,this.args=t};xr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,v;if(e.length>2){var k=e[1];if(typeof k!="string"||!(k in wn)||k==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=wn[k],l++}else d=rt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);v=e[2],l++}i=Jt(d,v)}else i=wn[p];for(var A=[];l<e.length;l++){var P=t.parse(e[l],l,rt);if(!P)return null;A.push(P)}return new xr(i,A)},xr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!lr(this.type,ei(i)))return i;if(t===this.args.length-1)throw new Li("Expected value to be of type "+rr(this.type)+", but found "+rr(ei(i))+" instead.")}return null},xr.prototype.eachChild=function(e){this.args.forEach(e)},xr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},xr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var Pa=function(e){this.type=$t,this.sections=e};Pa.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var v=e[d];if(p&&typeof v=="object"&&!Array.isArray(v)){p=!1;var k=null;if(v["font-scale"]&&!(k=t.parse(v["font-scale"],1,Le)))return null;var A=null;if(v["text-font"]&&!(A=t.parse(v["text-font"],1,Jt(tt))))return null;var P=null;if(v["text-color"]&&!(P=t.parse(v["text-color"],1,Ye)))return null;var L=l[l.length-1];L.scale=k,L.font=A,L.textColor=P}else{var O=t.parse(e[d],1,rt);if(!O)return null;var U=O.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:O,scale:null,font:null,textColor:null})}}return new Pa(l)},Pa.prototype.evaluate=function(e){return new Ei(this.sections.map(function(t){var i=t.content.evaluate(e);return ei(i)===At?new co("",i,null,null,null):new co(sa(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Pa.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},Pa.prototype.outputDefined=function(){return!1},Pa.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var Rn=function(e){this.type=At,this.input=e};Rn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,tt);return i?new Rn(i):t.error("No image name provided.")},Rn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=si.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},Rn.prototype.eachChild=function(e){e(this.input)},Rn.prototype.outputDefined=function(){return!1},Rn.prototype.serialize=function(){return["image",this.input.serialize()]};var Ao={"to-boolean":Je,"to-color":Ye,"to-number":Le,"to-string":tt},Ti=function(e,t){this.type=e,this.args=t};Ti.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=Ao[i],p=[],d=1;d<e.length;d++){var v=t.parse(e[d],d,rt);if(!v)return null;p.push(v)}return new Ti(l,p)},Ti.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof ur)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":bn(t[0],t[1],t[2],t[3])))return new ur(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Li(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var v=null,k=0,A=this.args;k<A.length;k+=1){if((v=A[k].evaluate(e))===null)return 0;var P=Number(v);if(!isNaN(P))return P}throw new Li("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?Ei.fromString(sa(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?si.fromString(sa(this.args[0].evaluate(e))):sa(this.args[0].evaluate(e))},Ti.prototype.eachChild=function(e){this.args.forEach(e)},Ti.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ti.prototype.serialize=function(){if(this.type.kind==="formatted")return new Pa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Rn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var ho=["Unknown","Point","LineString","Polygon"],en=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};en.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},en.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ho[this.feature.type]:this.feature.type:null},en.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},en.prototype.canonicalID=function(){return this.canonical},en.prototype.properties=function(){return this.feature&&this.feature.properties||{}},en.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ur.parse(e)),t};var ji=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};ji.prototype.evaluate=function(e){return this._evaluate(e,this.args)},ji.prototype.eachChild=function(e){this.args.forEach(e)},ji.prototype.outputDefined=function(){return!1},ji.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},ji.parse=function(e,t){var i,l=e[0],p=ji.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,k=v.filter(function(xt){var lt=xt[0];return!Array.isArray(lt)||lt.length===e.length-1}),A=null,P=0,L=k;P<L.length;P+=1){var O=L[P],U=O[0],X=O[1];A=new Br(t.registry,t.path,null,t.scope);for(var ie=[],oe=!1,de=1;de<e.length;de++){var ce=e[de],be=Array.isArray(U)?U[de-1]:U.type,Te=A.parse(ce,1+ie.length,be);if(!Te){oe=!0;break}ie.push(Te)}if(!oe)if(Array.isArray(U)&&U.length!==ie.length)A.error("Expected "+U.length+" arguments, but found "+ie.length+" instead.");else{for(var Pe=0;Pe<ie.length;Pe++){var Me=Array.isArray(U)?U[Pe]:U.type,Ne=ie[Pe];A.concat(Pe+1).checkSubtype(Me,Ne.type)}if(A.errors.length===0)return new ji(l,d,X,ie)}}if(k.length===1)(i=t.errors).push.apply(i,A.errors);else{for(var Ge=(k.length?k:v).map(function(xt){var lt;return lt=xt[0],Array.isArray(lt)?"("+lt.map(rr).join(", ")+")":"("+rr(lt.type)+"...)"}).join(" | "),We=[],_t=1;_t<e.length;_t++){var nt=t.parse(e[_t],1+We.length);if(!nt)return null;We.push(rr(nt.type))}t.error("Expected arguments of type "+Ge+", but found ("+We.join(", ")+") instead.")}return null},ji.register=function(e,t){for(var i in ji.definitions=t,t)e[i]=ji};var zi=function(e,t,i){this.type=Rt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function ti(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function En(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Gu(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function vl(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function Fs(e,t){for(var i,l,p,d,v,k,A,P=!1,L=0,O=t.length;L<O;L++)for(var U=t[L],X=0,ie=U.length;X<ie-1;X++){if((d=(i=e)[0]-(l=U[X])[0])*(A=i[1]-(p=U[X+1])[1])-(k=i[0]-p[0])*(v=i[1]-l[1])==0&&d*k<=0&&v*A<=0)return!1;vl(e,U[X],U[X+1])&&(P=!P)}return P}function Cf(e,t){for(var i=0;i<t.length;i++)if(Fs(e,t[i]))return!0;return!1}function eu(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],v=(e[0]-i[0])*d-p*(e[1]-i[1]),k=(t[0]-i[0])*d-p*(t[1]-i[1]);return v>0&&k<0||v<0&&k>0}function Vs(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],v=0;v<d.length-1;++v)if((O=[(L=d[v+1])[0]-(P=d[v])[0],L[1]-P[1]])[0]*(U=[(A=t)[0]-(k=e)[0],A[1]-k[1]])[1]-O[1]*U[0]!=0&&eu(k,A,P,L)&&eu(P,L,k,A))return!0;var k,A,P,L,O,U;return!1}function Ku(e,t){for(var i=0;i<e.length;++i)if(!Fs(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(Vs(e[l],e[l+1],t))return!1;return!0}function Kc(e,t){for(var i=0;i<t.length;i++)if(Ku(e,t[i]))return!0;return!1}function Xa(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],v=0;v<e[p].length;v++){var k=Gu(e[p][v],i);ti(t,k),d.push(k)}l.push(d)}return l}function _l(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=Xa(e[p],t,i);l.push(d)}return l}function Ns(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}ti(t,e)}function Xc(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],v=[],k=0,A=e;k<A.length;k+=1)for(var P=0,L=A[k];P<L.length;P+=1){var O=L[P],U=[O.x+d[0],O.y+d[1]];Ns(U,t,i,p),v.push(U)}return v}function bl(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),v=[8192*l.x,8192*l.y],k=[],A=0,P=e;A<P.length;A+=1){for(var L=[],O=0,U=P[A];O<U.length;O+=1){var X=U[O],ie=[X.x+v[0],X.y+v[1]];ti(t,ie),L.push(ie)}k.push(L)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var oe=0,de=k;oe<de.length;oe+=1)for(var ce=0,be=de[oe];ce<be.length;ce+=1)Ns(be[ce],t,i,d)}return k}zi.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Je);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Je);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,tt))?null:new zi(l,p,d)},zi.prototype.evaluate=function(e){return new Ui(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},zi.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},zi.prototype.outputDefined=function(){return!1},zi.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var la=function(e,t){this.type=Je,this.geojson=e,this.geometries=t};function Xn(e){if(e instanceof ji&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof la)return!1;var t=!0;return e.eachChild(function(i){t&&!Xn(i)&&(t=!1)}),t}function Ee(e){if(e instanceof ji&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!Ee(i)&&(t=!1)}),t}function Bn(e,t){if(e instanceof ji&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!Bn(l,t)&&(i=!1)}),i}la.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(xn(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new la(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new la(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new la(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},la.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=Xa(i.coordinates,p,d),k=Xc(t.geometry(),l,p,d);if(!En(l,p))return!1;for(var A=0,P=k;A<P.length;A+=1)if(!Fs(P[A],v))return!1}if(i.type==="MultiPolygon"){var L=_l(i.coordinates,p,d),O=Xc(t.geometry(),l,p,d);if(!En(l,p))return!1;for(var U=0,X=O;U<X.length;U+=1)if(!Cf(X[U],L))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=Xa(i.coordinates,p,d),k=bl(t.geometry(),l,p,d);if(!En(l,p))return!1;for(var A=0,P=k;A<P.length;A+=1)if(!Ku(P[A],v))return!1}if(i.type==="MultiPolygon"){var L=_l(i.coordinates,p,d),O=bl(t.geometry(),l,p,d);if(!En(l,p))return!1;for(var U=0,X=O;U<X.length;U+=1)if(!Kc(X[U],L))return!1}return!0}(e,this.geometries)}return!1},la.prototype.eachChild=function(){},la.prototype.outputDefined=function(){return!0},la.prototype.serialize=function(){return["within",this.geojson]};var tn=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};tn.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new tn(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},tn.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},tn.prototype.eachChild=function(){},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){return["var",this.name]};var Br=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new at),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function hn(e,t){for(var i,l=e.length-1,p=0,d=l,v=0;p<=d;)if((i=e[v=Math.floor((p+d)/2)])<=t){if(v===l||t<e[v+1])return v;p=v+1}else{if(!(i>t))throw new Li("Input is not a number.");d=v-1}return 0}Br.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},Br.prototype._parse=function(e,t){function i(P,L,O){return O==="assert"?new xr(L,[P]):O==="coerce"?new Ti(L,[P]):P}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,k=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||k.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string"){if(this.checkSubtype(v,k))return null}else d=i(d,v,t.typeAnnotation||"coerce");else d=i(d,v,t.typeAnnotation||"assert")}if(!(d instanceof Di)&&d.type.kind!=="resolvedImage"&&function P(L){if(L instanceof tn)return P(L.boundExpression);if(L instanceof ji&&L.name==="error"||L instanceof zi||L instanceof la)return!1;var O=L instanceof Ti||L instanceof xr,U=!0;return L.eachChild(function(X){U=O?U&&P(X):U&&X instanceof Di}),!!U&&Xn(L)&&Bn(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var A=new en;try{d=new Di(d.type,d.evaluate(A))}catch(P){return this.error(P.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Br.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Br(this.registry,l,t||null,p,this.errors)},Br.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new qe(l,e))},Br.prototype.checkSubtype=function(e,t){var i=lr(e,t);return i&&this.error(i),i};var ua=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function ki(e,t,i){return e*(1-i)+t*i}ua.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Le);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],k=e[d+1],A=d,P=d+1;if(typeof v!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(l.length&&l[l.length-1][0]>=v)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);var L=t.parse(k,P,p);if(!L)return null;p=p||L.type,l.push([v,L])}return new ua(p,i,l)},ua.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[hn(t,l)].evaluate(e)},ua.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},ua.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},ua.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var xl=Object.freeze({__proto__:null,number:ki,color:function(e,t,i){return new ur(ki(e.r,t.r,i),ki(e.g,t.g,i),ki(e.b,t.b,i),ki(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return ki(l,t[p],i)})}}),Fp=6/29*3*(6/29),Xu=Math.PI/180,jd=180/Math.PI;function Zh(e){return e>.008856451679035631?Math.pow(e,1/3):e/Fp+4/29}function Ma(e){return e>6/29?e*e*e:Fp*(e-4/29)}function Wn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Wa(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function os(e){var t=Wa(e.r),i=Wa(e.g),l=Wa(e.b),p=Zh((.4124564*t+.3575761*i+.1804375*l)/.95047),d=Zh((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-Zh((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function Vp(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*Ma(t),i=.95047*Ma(i),l=1.08883*Ma(l),new ur(Wn(3.2404542*i-1.5371385*t-.4985314*l),Wn(-.969266*i+1.8760108*t+.041556*l),Wn(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function Wu(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var tu={forward:os,reverse:Vp,interpolate:function(e,t,i){return{l:ki(e.l,t.l,i),a:ki(e.a,t.a,i),b:ki(e.b,t.b,i),alpha:ki(e.alpha,t.alpha,i)}}},Hh={forward:function(e){var t=os(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*jd;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Xu,i=e.c;return Vp({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Wu(e.h,t.h,i),c:ki(e.c,t.c,i),l:ki(e.l,t.l,i),alpha:ki(e.alpha,t.alpha,i)}}},Np=Object.freeze({__proto__:null,lab:tu,hcl:Hh}),Ci=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,v=p;d<v.length;d+=1){var k=v[d],A=k[1];this.labels.push(k[0]),this.outputs.push(A)}};function Up(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}Ci.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=Up(t,e.base,i,l);else if(e.name==="linear")p=Up(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new I(d[0],d[1],d[2],d[3]).solve(Up(t,1,i,l))}return p},Ci.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var v=l[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:v}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var k=l.slice(1);if(k.length!==4||k.some(function(de){return typeof de!="number"||de<0||de>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:k}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Le)))return null;var A=[],P=null;i==="interpolate-hcl"||i==="interpolate-lab"?P=Ye:t.expectedType&&t.expectedType.kind!=="value"&&(P=t.expectedType);for(var L=0;L<d.length;L+=2){var O=d[L],U=d[L+1],X=L+3,ie=L+4;if(typeof O!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(A.length&&A[A.length-1][0]>=O)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);var oe=t.parse(U,ie,P);if(!oe)return null;P=P||oe.type,A.push([O,oe])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new Ci(P,i,l,p,A):t.error("Type "+rr(P)+" is not interpolatable.")},Ci.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=hn(t,l),v=Ci.interpolationFactor(this.interpolation,l,t[d],t[d+1]),k=i[d].evaluate(e),A=i[d+1].evaluate(e);return this.operator==="interpolate"?xl[this.type.kind.toLowerCase()](k,A,v):this.operator==="interpolate-hcl"?Hh.reverse(Hh.interpolate(Hh.forward(k),Hh.forward(A),v)):tu.reverse(tu.interpolate(tu.forward(k),tu.forward(A),v))},Ci.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Ci.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Ci.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var Us=function(e,t){this.type=e,this.args=t};Us.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,v=e.slice(1);d<v.length;d+=1){var k=t.parse(v[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!k)return null;i=i||k.type,p.push(k)}var A=l&&p.some(function(P){return lr(l,P.type)});return new Us(A?rt:i,p)},Us.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof si&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},Us.prototype.eachChild=function(e){this.args.forEach(e)},Us.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Us.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Da=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Da.prototype.evaluate=function(e){return this.result.evaluate(e)},Da.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},Da.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var v=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return v?new Da(i,v):null},Da.prototype.outputDefined=function(){return this.result.outputDefined()},Da.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var Ja=function(e,t,i){this.type=e,this.index=t,this.input=i};Ja.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Le),l=t.parse(e[2],2,Jt(t.expectedType||rt));return i&&l?new Ja(l.type.itemType,i,l):null},Ja.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Li("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new Li("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new Li("Array index must be an integer, but found "+t+" instead.");return i[t]},Ja.prototype.eachChild=function(e){e(this.index),e(this.input)},Ja.prototype.outputDefined=function(){return!1},Ja.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var wl=function(e,t){this.type=Je,this.needle=e,this.haystack=t};wl.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,rt),l=t.parse(e[2],2,rt);return i&&l?oi(i.type,[Je,tt,Le,st,rt])?new wl(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+rr(i.type)+" instead"):null},wl.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!gr(t,["boolean","string","number","null"]))throw new Li("Expected first argument to be of type boolean, string, number or null, but found "+rr(ei(t))+" instead.");if(!gr(i,["string","array"]))throw new Li("Expected second argument to be of type array or string, but found "+rr(ei(i))+" instead.");return i.indexOf(t)>=0},wl.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},wl.prototype.outputDefined=function(){return!0},wl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ss=function(e,t,i){this.type=Le,this.needle=e,this.haystack=t,this.fromIndex=i};ss.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,rt),l=t.parse(e[2],2,rt);if(!i||!l)return null;if(!oi(i.type,[Je,tt,Le,st,rt]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+rr(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Le);return p?new ss(i,l,p):null}return new ss(i,l)},ss.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!gr(t,["boolean","string","number","null"]))throw new Li("Expected first argument to be of type boolean, string, number or null, but found "+rr(ei(t))+" instead.");if(!gr(i,["string","array"]))throw new Li("Expected second argument to be of type array or string, but found "+rr(ei(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},ss.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},ss.prototype.outputDefined=function(){return!1},ss.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ls=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};ls.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],v=2;v<e.length-1;v+=2){var k=e[v],A=e[v+1];Array.isArray(k)||(k=[k]);var P=t.concat(v);if(k.length===0)return P.error("Expected at least one branch label.");for(var L=0,O=k;L<O.length;L+=1){var U=O[L];if(typeof U!="number"&&typeof U!="string")return P.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return P.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof U=="number"&&Math.floor(U)!==U)return P.error("Numeric branch labels must be integer values.");if(i){if(P.checkSubtype(i,ei(U)))return null}else i=ei(U);if(p[String(U)]!==void 0)return P.error("Branch labels must be unique.");p[String(U)]=d.length}var X=t.parse(A,v,l);if(!X)return null;l=l||X.type,d.push(X)}var ie=t.parse(e[1],1,rt);if(!ie)return null;var oe=t.parse(e[e.length-1],e.length-1,l);return oe?ie.type.kind!=="value"&&t.concat(1).checkSubtype(i,ie.type)?null:new ls(i,l,ie,p,d,oe):null},ls.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(ei(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},ls.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},ls.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},ls.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var v=d[p];(O=l[this.cases[v]])===void 0?(l[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[O][1].push(v)}for(var k=function(X){return e.inputType.kind==="number"?Number(X):X},A=0,P=i;A<P.length;A+=1){var L=P[A],O=L[0],U=L[1];t.push(U.length===1?k(U[0]):U.map(k)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Ya=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};Ya.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,Je);if(!d)return null;var v=t.parse(e[p+1],p+1,i);if(!v)return null;l.push([d,v]),i=i||v.type}var k=t.parse(e[e.length-1],e.length-1,i);return k?new Ya(i,l,k):null},Ya.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},Ya.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},Ya.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Ya.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var js=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function El(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function us(e,t,i,l){return l.compare(t,i)===0}function Hr(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,v,k){this.type=Je,this.lhs=d,this.rhs=v,this.collator=k,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return p.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var k=d[0],A=v.parse(d[1],1,rt);if(!A)return null;if(!El(k,A.type))return v.concat(1).error('"'+k+`" comparisons are not supported for type '`+rr(A.type)+"'.");var P=v.parse(d[2],2,rt);if(!P)return null;if(!El(k,P.type))return v.concat(2).error('"'+k+`" comparisons are not supported for type '`+rr(P.type)+"'.");if(A.type.kind!==P.type.kind&&A.type.kind!=="value"&&P.type.kind!=="value")return v.error("Cannot compare types '"+rr(A.type)+"' and '"+rr(P.type)+"'.");l&&(A.type.kind==="value"&&P.type.kind!=="value"?A=new xr(P.type,[A]):A.type.kind!=="value"&&P.type.kind==="value"&&(P=new xr(A.type,[P])));var L=null;if(d.length===4){if(A.type.kind!=="string"&&P.type.kind!=="string"&&A.type.kind!=="value"&&P.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(L=v.parse(d[3],3,Rt)))return null}return new p(A,P,L)},p.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),k=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var A=ei(v),P=ei(k);if(A.kind!==P.kind||A.kind!=="string"&&A.kind!=="number")throw new Li('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+A.kind+", "+P.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var L=ei(v),O=ei(k);if(L.kind!=="string"||O.kind!=="string")return t(d,v,k)}return this.collator?i(d,v,k,this.collator.evaluate(d)):t(d,v,k)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},p}()}js.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,rt),l=t.parse(e[2],2,Le);if(!i||!l)return null;if(!oi(i.type,[Jt(rt),tt,rt]))return t.error("Expected first argument to be of type array or string, but found "+rr(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Le);return p?new js(i.type,i,l,p):null}return new js(i.type,i,l)},js.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!gr(t,["string","array"]))throw new Li("Expected first argument to be of type array or string, but found "+rr(ei(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},js.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},js.prototype.outputDefined=function(){return!1},js.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Af=Hr("==",function(e,t,i){return t===i},us),cs=Hr("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!us(0,t,i,l)}),jp=Hr("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),hs=Hr(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),po=Hr("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),ps=Hr(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),kl=function(e,t,i,l,p){this.type=tt,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};kl.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Le);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,tt)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,tt)))return null;var v=null;if(l["min-fraction-digits"]&&!(v=t.parse(l["min-fraction-digits"],1,Le)))return null;var k=null;return l["max-fraction-digits"]&&!(k=t.parse(l["max-fraction-digits"],1,Le))?null:new kl(i,p,d,v,k)},kl.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},kl.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},kl.prototype.outputDefined=function(){return!1},kl.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Qa=function(e){this.type=Le,this.input=e};Qa.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+rr(i.type)+" instead."):new Qa(i):null},Qa.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Li("Expected value to be of type string or array, but found "+rr(ei(t))+" instead.")},Qa.prototype.eachChild=function(e){e(this.input)},Qa.prototype.outputDefined=function(){return!1},Qa.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var qs={"==":Af,"!=":cs,">":hs,"<":jp,">=":ps,"<=":po,array:xr,at:Ja,boolean:xr,case:Ya,coalesce:Us,collator:zi,format:Pa,image:Rn,in:wl,"index-of":ss,interpolate:Ci,"interpolate-hcl":Ci,"interpolate-lab":Ci,length:Qa,let:Da,literal:Di,match:ls,number:xr,"number-format":kl,object:xr,slice:js,step:ua,string:xr,"to-boolean":Ti,"to-color":Ti,"to-number":Ti,"to-string":Ti,var:tn,within:la};function qd(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var v=d?d.evaluate(e):1,k=bn(i,l,p,v);if(k)throw new Li(k);return new ur(i/255*v,l/255*v,p/255*v,v)}function qp(e,t){return e in t}function Zs(e,t){var i=t[e];return i===void 0?null:i}function ru(e){return{type:e}}function Zp(e){return{result:"success",value:e}}function $a(e){return{result:"error",value:e}}function iu(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Hp(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Po(e){return!!e.expression&&e.expression.interpolated}function Mr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Gh(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Pf(e){return e}function fo(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function Mo(e,t,i,l,p){return fo(typeof i===p?l[i]:void 0,e.default,t.default)}function Mf(e,t,i){if(Mr(i)!=="number")return fo(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=hn(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function Wc(e,t,i){var l=e.base!==void 0?e.base:1;if(Mr(i)!=="number")return fo(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=hn(e.stops.map(function(O){return O[0]}),i),v=function(O,U,X,ie){var oe=ie-X,de=O-X;return oe===0?0:U===1?de/oe:(Math.pow(U,de)-1)/(Math.pow(U,oe)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),k=e.stops[d][1],A=e.stops[d+1][1],P=xl[t.type]||Pf;if(e.colorSpace&&e.colorSpace!=="rgb"){var L=Np[e.colorSpace];P=function(O,U){return L.reverse(L.interpolate(L.forward(O),L.forward(U),v))}}return typeof k.evaluate=="function"?{evaluate:function(){for(var O=[],U=arguments.length;U--;)O[U]=arguments[U];var X=k.evaluate.apply(void 0,O),ie=A.evaluate.apply(void 0,O);if(X!==void 0&&ie!==void 0)return P(X,ie,v)}}:P(k,A,v)}function Ju(e,t,i){return t.type==="color"?i=ur.parse(i):t.type==="formatted"?i=Ei.fromString(i.toString()):t.type==="resolvedImage"?i=si.fromString(i.toString()):Mr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),fo(i,e.default,t.default)}ji.register(qs,{error:[{kind:"error"},[tt],function(e,t){throw new Li(t[0].evaluate(e))}],typeof:[tt,[rt],function(e,t){return rr(ei(t[0].evaluate(e)))}],"to-rgba":[Jt(Le,4),[Ye],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ye,[Le,Le,Le],qd],rgba:[Ye,[Le,Le,Le,Le],qd],has:{type:Je,overloads:[[[tt],function(e,t){return qp(t[0].evaluate(e),e.properties())}],[[tt,Gt],function(e,t){var i=t[1];return qp(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:rt,overloads:[[[tt],function(e,t){return Zs(t[0].evaluate(e),e.properties())}],[[tt,Gt],function(e,t){var i=t[1];return Zs(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[rt,[tt],function(e,t){return Zs(t[0].evaluate(e),e.featureState||{})}],properties:[Gt,[],function(e){return e.properties()}],"geometry-type":[tt,[],function(e){return e.geometryType()}],id:[rt,[],function(e){return e.id()}],zoom:[Le,[],function(e){return e.globals.zoom}],"heatmap-density":[Le,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Le,[],function(e){return e.globals.lineProgress||0}],accumulated:[rt,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Le,ru(Le),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Le,ru(Le),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Le,overloads:[[[Le,Le],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Le],function(e,t){return-t[0].evaluate(e)}]]},"/":[Le,[Le,Le],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Le,[Le,Le],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Le,[],function(){return Math.LN2}],pi:[Le,[],function(){return Math.PI}],e:[Le,[],function(){return Math.E}],"^":[Le,[Le,Le],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Le,[Le],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Le,[Le],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Le,[Le],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Le,[Le],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Le,[Le],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Le,[Le],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Le,[Le],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Le,[Le],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Le,[Le],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Le,[Le],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Le,ru(Le),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Le,ru(Le),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Le,[Le],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Le,[Le],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Le,[Le],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Le,[Le],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Je,[tt,rt],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[Je,[rt],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Je,[tt],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Je,[tt,rt],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[Je,[rt],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[Je,[tt,rt],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[Je,[rt],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[Je,[tt,rt],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[Je,[rt],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[Je,[tt,rt],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[Je,[rt],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[Je,[rt],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Je,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Je,[Jt(tt)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Je,[Jt(rt)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Je,[tt,Jt(rt)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Je,[tt,Jt(rt)],function(e,t){var i=t[0],l=t[1];return function(p,d,v,k){for(;v<=k;){var A=v+k>>1;if(d[A]===p)return!0;d[A]>p?k=A-1:v=A+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:Je,overloads:[[[Je,Je],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[ru(Je),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:Je,overloads:[[[Je,Je],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[ru(Je),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[Je,[Je],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Je,[tt],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[tt,ru(rt),function(e,t){return t.map(function(i){return sa(i.evaluate(e))}).join("")}],"resolved-locale":[tt,[Rt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var nu=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new en,this._defaultValue=t?function(i){return i.type==="color"&&Gh(i.default)?new ur(0,0,0,0):i.type==="color"?ur.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function fs(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in qs}function Kh(e,t){var i=new Br(qs,[],t?function(p){var d={color:Ye,string:tt,number:Le,enum:tt,boolean:Je,formatted:$t,resolvedImage:At};return p.type==="array"?Jt(d[p.value]||rt,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Zp(new nu(l,t)):$a(i.errors)}nu.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},nu.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new Li("Expected value to be one of "+Object.keys(this._enumValues).map(function(k){return JSON.stringify(k)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}};var Yu=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!Ee(t.expression)};Yu.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},Yu.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var On=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!Ee(t.expression),this.interpolationType=l};function ds(e,t){if((e=Kh(e,t)).result==="error")return e;var i=e.value.expression,l=Xn(i);if(!l&&!iu(t))return $a([new qe("","data expressions not supported")]);var p=Bn(i,["zoom"]);if(!p&&!Hp(t))return $a([new qe("","zoom expressions not supported")]);var d=function v(k){var A=null;if(k instanceof Da)A=v(k.result);else if(k instanceof Us)for(var P=0,L=k.args;P<L.length&&!(A=v(L[P]));P+=1);else(k instanceof ua||k instanceof Ci)&&k.input instanceof ji&&k.input.name==="zoom"&&(A=k);return A instanceof qe||k.eachChild(function(O){var U=v(O);U instanceof qe?A=U:!A&&U?A=new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&U&&A!==U&&(A=new qe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}(i);return d||p?d instanceof qe?$a([d]):d instanceof Ci&&!Po(t)?$a([new qe("",'"interpolate" expressions cannot be used with this property')]):Zp(d?new On(l?"camera":"composite",e.value,d.labels,d instanceof Ci?d.interpolation:void 0):new Yu(l?"constant":"source",e.value)):$a([new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}On.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},On.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},On.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?Ci.interpolationFactor(this.interpolationType,e,t,i):0};var Jn=function(e,t){this._parameters=e,this._specification=t,Ue(this,function i(l,p){var d,v,k,A=p.type==="color",P=l.stops&&typeof l.stops[0][0]=="object",L=P||!(P||l.property!==void 0),O=l.type||(Po(p)?"exponential":"interval");if(A&&((l=Ue({},l)).stops&&(l.stops=l.stops.map(function(nt){return[nt[0],ur.parse(nt[1])]})),l.default=ur.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!Np[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(O==="exponential")d=Wc;else if(O==="interval")d=Mf;else if(O==="categorical"){d=Mo,v=Object.create(null);for(var U=0,X=l.stops;U<X.length;U+=1){var ie=X[U];v[ie[0]]=ie[1]}k=typeof l.stops[0][0]}else{if(O!=="identity")throw new Error('Unknown function type "'+O+'"');d=Ju}if(P){for(var oe={},de=[],ce=0;ce<l.stops.length;ce++){var be=l.stops[ce],Te=be[0].zoom;oe[Te]===void 0&&(oe[Te]={zoom:Te,type:l.type,property:l.property,default:l.default,stops:[]},de.push(Te)),oe[Te].stops.push([be[0].value,be[1]])}for(var Pe=[],Me=0,Ne=de;Me<Ne.length;Me+=1){var Ge=Ne[Me];Pe.push([oe[Ge].zoom,i(oe[Ge],p)])}var We={name:"linear"};return{kind:"composite",interpolationType:We,interpolationFactor:Ci.interpolationFactor.bind(void 0,We),zoomStops:Pe.map(function(nt){return nt[0]}),evaluate:function(nt,xt){var lt=nt.zoom;return Wc({stops:Pe,base:l.base},p,lt).evaluate(lt,xt)}}}if(L){var _t=O==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:_t,interpolationFactor:Ci.interpolationFactor.bind(void 0,_t),zoomStops:l.stops.map(function(nt){return nt[0]}),evaluate:function(nt){return d(l,p,nt.zoom,v,k)}}}return{kind:"source",evaluate:function(nt,xt){var lt=xt&&xt.properties?xt.properties[l.property]:void 0;return lt===void 0?fo(l.default,p.default):d(l,p,lt,v,k)}}}(this._parameters,this._specification))};function pn(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,v=e.styleSpec,k=[],A=Mr(i);if(A!=="object")return[new te(t,i,"object expected, "+A+" found")];for(var P in i){var L=P.split(".")[0],O=l[L]||l["*"],U=void 0;if(p[L])U=p[L];else if(l[L])U=Kt;else if(p["*"])U=p["*"];else{if(!l["*"]){k.push(new te(t,i[P],'unknown property "'+P+'"'));continue}U=Kt}k=k.concat(U({key:(t&&t+".")+P,value:i[P],valueSpec:O,style:d,styleSpec:v,object:i,objectKey:P},i))}for(var X in l)p[X]||l[X].required&&l[X].default===void 0&&i[X]===void 0&&k.push(new te(t,i,'missing required property "'+X+'"'));return k}function Gp(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,v=e.arrayElementValidator||Kt;if(Mr(t)!=="array")return[new te(d,t,"array expected, "+Mr(t)+" found")];if(i.length&&t.length!==i.length)return[new te(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new te(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var k={type:i.value,values:i.values};p.$version<7&&(k.function=i.function),Mr(i.value)==="object"&&(k=i.value);for(var A=[],P=0;P<t.length;P++)A=A.concat(v({array:t,arrayIndex:P,value:t[P],valueSpec:k,style:l,styleSpec:p,key:d+"["+P+"]"}));return A}function au(e){var t=e.key,i=e.value,l=e.valueSpec,p=Mr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new te(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new te(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new te(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function Xh(e){var t,i,l,p=e.valueSpec,d=He(e.value.type),v={},k=d!=="categorical"&&e.value.property===void 0,A=!k,P=Mr(e.value.stops)==="array"&&Mr(e.value.stops[0])==="array"&&Mr(e.value.stops[0][0])==="object",L=pn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(X){if(d==="identity")return[new te(X.key,X.value,'identity function may not have a "stops" property')];var ie=[],oe=X.value;return ie=ie.concat(Gp({key:X.key,value:oe,valueSpec:X.valueSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:O})),Mr(oe)==="array"&&oe.length===0&&ie.push(new te(X.key,oe,"array must have at least one stop")),ie},default:function(X){return Kt({key:X.key,value:X.value,valueSpec:p,style:X.style,styleSpec:X.styleSpec})}}});return d==="identity"&&k&&L.push(new te(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||L.push(new te(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Po(e.valueSpec)&&L.push(new te(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(A&&!iu(e.valueSpec)?L.push(new te(e.key,e.value,"property functions not supported")):k&&!Hp(e.valueSpec)&&L.push(new te(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!P||e.value.property!==void 0||L.push(new te(e.key,e.value,'"property" property is required')),L;function O(X){var ie=[],oe=X.value,de=X.key;if(Mr(oe)!=="array")return[new te(de,oe,"array expected, "+Mr(oe)+" found")];if(oe.length!==2)return[new te(de,oe,"array length 2 expected, length "+oe.length+" found")];if(P){if(Mr(oe[0])!=="object")return[new te(de,oe,"object expected, "+Mr(oe[0])+" found")];if(oe[0].zoom===void 0)return[new te(de,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new te(de,oe,"object stop key must have value")];if(l&&l>He(oe[0].zoom))return[new te(de,oe[0].zoom,"stop zoom values must appear in ascending order")];He(oe[0].zoom)!==l&&(l=He(oe[0].zoom),i=void 0,v={}),ie=ie.concat(pn({key:de+"[0]",value:oe[0],valueSpec:{zoom:{}},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:au,value:U}}))}else ie=ie.concat(U({key:de+"[0]",value:oe[0],valueSpec:{},style:X.style,styleSpec:X.styleSpec},oe));return fs(Re(oe[1]))?ie.concat([new te(de+"[1]",oe[1],"expressions are not allowed in function stops.")]):ie.concat(Kt({key:de+"[1]",value:oe[1],valueSpec:p,style:X.style,styleSpec:X.styleSpec}))}function U(X,ie){var oe=Mr(X.value),de=He(X.value),ce=X.value!==null?X.value:ie;if(t){if(oe!==t)return[new te(X.key,ce,oe+" stop domain type must match previous stop domain type "+t)]}else t=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new te(X.key,ce,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&d!=="categorical"){var be="number expected, "+oe+" found";return iu(p)&&d===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new te(X.key,ce,be)]}return d!=="categorical"||oe!=="number"||isFinite(de)&&Math.floor(de)===de?d!=="categorical"&&oe==="number"&&i!==void 0&&de<i?[new te(X.key,ce,"stop domain values must appear in ascending order")]:(i=de,d==="categorical"&&de in v?[new te(X.key,ce,"stop domain values must be unique")]:(v[de]=!0,[])):[new te(X.key,ce,"integer expected, found "+de)]}}function Qu(e){var t=(e.expressionContext==="property"?ds:Kh)(Re(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new te(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new te(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Ee(i))return[new te(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Ee(i))return[new te(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Bn(i,["zoom","feature-state"]))return[new te(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Xn(i))return[new te(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $u(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(He(i))===-1&&p.push(new te(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(He(i))===-1&&p.push(new te(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function ms(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!ms(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}Jn.deserialize=function(e){return new Jn(e._parameters,e._specification)},Jn.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Kp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Jc(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};ms(e)||(e=Yc(e));var t=Kh(e,Kp);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function ou(e,t){return e<t?-1:e>t?1:0}function Yc(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?Do(e[1],e[2],"=="):i==="!="?Qc(Do(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Do(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(Yc))):i==="all"?["all"].concat(e.slice(1).map(Yc)):i==="none"?["all"].concat(e.slice(1).map(Yc).map(Qc)):i==="in"?mo(e[1],e.slice(2)):i==="!in"?Qc(mo(e[1],e.slice(2))):i==="has"?ys(e[1]):i==="!has"?Qc(ys(e[1])):i!=="within"||e}function Do(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function mo(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(ou)]]:["filter-in-small",e,["literal",t]]}}function ys(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Qc(e){return["!",e]}function Sl(e){return ms(Re(e.value))?Qu(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(Mr(l)!=="array")return[new te(p,l,"array expected, "+Mr(l)+" found")];var d,v=i.styleSpec,k=[];if(l.length<1)return[new te(p,l,"filter array must have at least 1 element")];switch(k=k.concat($u({key:p+"[0]",value:l[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),He(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&He(l[1])==="$type"&&k.push(new te(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&k.push(new te(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=Mr(l[1]))!=="string"&&k.push(new te(p+"[1]",l[1],"string expected, "+d+" found"));for(var A=2;A<l.length;A++)d=Mr(l[A]),He(l[1])==="$type"?k=k.concat($u({key:p+"["+A+"]",value:l[A],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&k.push(new te(p+"["+A+"]",l[A],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var P=1;P<l.length;P++)k=k.concat(t({key:p+"["+P+"]",value:l[P],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Mr(l[1]),l.length!==2?k.push(new te(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&k.push(new te(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=Mr(l[1]),l.length!==2?k.push(new te(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&k.push(new te(p+"[1]",l[1],"object expected, "+d+" found"))}return k}(e)}function $c(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,v=e.objectKey,k=p[t+"_"+e.layerType];if(!k)return[];var A=v.match(/^(.*)-transition$/);if(t==="paint"&&A&&k[A[1]]&&k[A[1]].transition)return Kt({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var P,L=e.valueSpec||k[v];if(!L)return[new te(i,d,'unknown property "'+v+'"')];if(Mr(d)==="string"&&iu(L)&&!L.tokens&&(P=/^{([^}]+)}$/.exec(d)))return[new te(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(P[1])+" }`.")];var O=[];return e.layerType==="symbol"&&(v==="text-field"&&l&&!l.glyphs&&O.push(new te(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Gh(Re(d))&&He(d.type)==="identity"&&O.push(new te(i,d,'"text-font" does not support identity functions'))),O.concat(Kt({key:e.key,value:d,valueSpec:L,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:v}))}function Df(e){return $c(e,"paint")}function ec(e){return $c(e,"layout")}function Il(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new te(l,i,'either "type" or "ref" is required'));var v,k=He(i.type),A=He(i.ref);if(i.id)for(var P=He(i.id),L=0;L<e.arrayIndex;L++){var O=p.layers[L];He(O.id)===P&&t.push(new te(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+O.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(ie){ie in i&&t.push(new te(l,i[ie],'"'+ie+'" is prohibited for ref layers'))}),p.layers.forEach(function(ie){He(ie.id)===A&&(v=ie)}),v?v.ref?t.push(new te(l,i.ref,"ref cannot reference another ref layer")):k=He(v.type):t.push(new te(l,i.ref,'ref layer "'+A+'" not found'));else if(k!=="background")if(i.source){var U=p.sources&&p.sources[i.source],X=U&&He(U.type);U?X==="vector"&&k==="raster"?t.push(new te(l,i.source,'layer "'+i.id+'" requires a raster source')):X==="raster"&&k!=="raster"?t.push(new te(l,i.source,'layer "'+i.id+'" requires a vector source')):X!=="vector"||i["source-layer"]?X==="raster-dem"&&k!=="hillshade"?t.push(new te(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!i.paint||!i.paint["line-gradient"]||X==="geojson"&&U.lineMetrics||t.push(new te(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new te(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new te(l,i.source,'source "'+i.source+'" not found'))}else t.push(new te(l,i,'missing required property "source"'));return t=t.concat(pn({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Kt({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Sl,layout:function(ie){return pn({layer:i,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":function(oe){return ec(Ue({layerType:k},oe))}}})},paint:function(ie){return pn({layer:i,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":function(oe){return Df(Ue({layerType:k},oe))}}})}}}))}function su(e){var t=e.value,i=e.key,l=Mr(t);return l!=="string"?[new te(i,t,"string expected, "+l+" found")]:[]}var li={promoteId:function(e){var t=e.key,i=e.value;if(Mr(i)==="string")return su({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,su({key:t+"."+p,value:i[p]}));return l}};function gs(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new te(i,t,'"type" is required')];var d,v=He(t.type);switch(v){case"vector":case"raster":case"raster-dem":return pn({key:i,value:t,valueSpec:l["source_"+v.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:li});case"geojson":if(d=pn({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:li}),t.cluster)for(var k in t.clusterProperties){var A=t.clusterProperties[k],P=A[0],L=typeof P=="string"?[P,["accumulated"],["get",k]]:P;d.push.apply(d,Qu({key:i+"."+k+".map",value:A[1],expressionContext:"cluster-map"})),d.push.apply(d,Qu({key:i+"."+k+".reduce",value:L,expressionContext:"cluster-reduce"}))}return d;case"video":return pn({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return pn({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new te(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $u({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function Tl(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],v=Mr(t);if(t===void 0)return d;if(v!=="object")return d.concat([new te("light",t,"object expected, "+v+" found")]);for(var k in t){var A=k.match(/^(.*)-transition$/);d=d.concat(A&&l[A[1]]&&l[A[1]].transition?Kt({key:k,value:t[k],valueSpec:i.transition,style:p,styleSpec:i}):l[k]?Kt({key:k,value:t[k],valueSpec:l[k],style:p,styleSpec:i}):[new te(k,t[k],'unknown property "'+k+'"')])}return d}var Yn={"*":function(){return[]},array:Gp,boolean:function(e){var t=e.value,i=e.key,l=Mr(t);return l!=="boolean"?[new te(i,t,"boolean expected, "+l+" found")]:[]},number:au,color:function(e){var t=e.key,i=e.value,l=Mr(i);return l!=="string"?[new te(t,i,"color expected, "+l+" found")]:Nt(i)===null?[new te(t,i,'color expected, "'+i+'" found')]:[]},constants:ke,enum:$u,filter:Sl,function:Xh,layer:Il,object:pn,source:gs,light:Tl,string:su,formatted:function(e){return su(e).length===0?[]:Qu(e)},resolvedImage:function(e){return su(e).length===0?[]:Qu(e)}};function Kt(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&Gh(He(t))?Xh(e):i.expression&&fs(Re(t))?Qu(e):i.type&&Yn[i.type]?Yn[i.type](e):pn(Ue({},e,{valueSpec:i.type?l[i.type]:i}))}function wr(e){var t=e.value,i=e.key,l=su(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new te(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new te(i,t,'"glyphs" url must include a "{range}" token'))),l}function La(e,t){t===void 0&&(t=G);var i=[];return i=i.concat(Kt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:wr,"*":function(){return[]}}})),e.constants&&(i=i.concat(ke({key:"constants",value:e.constants,style:e,styleSpec:t}))),vs(i)}function vs(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function zl(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return vs(e.apply(this,t))}}La.source=zl(gs),La.light=zl(Tl),La.layer=zl(Il),La.filter=zl(Sl),La.paintProperty=zl(Df),La.layoutProperty=zl(ec);var Wh=La,Lf=Wh.light,lu=Wh.paintProperty,eh=Wh.layoutProperty;function tc(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new me(new Error(p[l].message))),i=!0;return i}var ca=Xi;function Xi(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var v=p[3+d],k=p[3+d+1];l.push(v===k?null:p.subarray(v,k))}var A=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],A),this.bboxes=p.subarray(A),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var P=0;P<this.d*this.d;P++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var L=i/t*e;this.min=-L,this.max=e+L}Xi.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},Xi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Xi.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},Xi.prototype.query=function(e,t,i,l,p){var d=this.min,v=this.max;if(e<=d&&t<=d&&v<=i&&v<=l&&!p)return Array.prototype.slice.call(this.keys);var k=[];return this._forEachCell(e,t,i,l,this._queryCell,k,{},p),k},Xi.prototype._queryCell=function(e,t,i,l,p,d,v,k){var A=this.cells[p];if(A!==null)for(var P=this.keys,L=this.bboxes,O=0;O<A.length;O++){var U=A[O];if(v[U]===void 0){var X=4*U;(k?k(L[X+0],L[X+1],L[X+2],L[X+3]):e<=L[X+2]&&t<=L[X+3]&&i>=L[X+0]&&l>=L[X+1])?(v[U]=!0,d.push(P[U])):v[U]=!1}}},Xi.prototype._forEachCell=function(e,t,i,l,p,d,v,k){for(var A=this._convertToCellCoord(e),P=this._convertToCellCoord(t),L=this._convertToCellCoord(i),O=this._convertToCellCoord(l),U=A;U<=L;U++)for(var X=P;X<=O;X++){var ie=this.d*X+U;if((!k||k(this._convertFromCellCoord(U),this._convertFromCellCoord(X),this._convertFromCellCoord(U+1),this._convertFromCellCoord(X+1)))&&p.call(this,e,t,i,l,ie,d,v,k))return}},Xi.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Xi.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Xi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,v=0;v<e.length;v++){var k=e[v];p[3+v]=d,p.set(k,d),d+=k.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var rc=F.ImageData,Cl=F.ImageBitmap,ui={};function dt(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),ui[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var ha in dt("Object",Object),ca.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},ca.deserialize=function(e){return new ca(e.buffer)},dt("Grid",ca),dt("Color",ur),dt("Error",Error),dt("ResolvedImage",si),dt("StylePropertyFunction",Jn),dt("StyleExpression",nu,{omit:["_evaluator"]}),dt("ZoomDependentExpression",On),dt("ZoomConstantExpression",Yu),dt("CompoundExpression",ji,{omit:["_evaluate"]}),qs)qs[ha]._classRegistryKey||dt("Expression_"+ha,qs[ha]);function _s(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function pa(e){return Cl&&e instanceof Cl}function yo(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(_s(e)||pa(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof rc)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(yo(d[p],t));return l}if(typeof e=="object"){var v=e.constructor,k=v._classRegistryKey;if(!k)throw new Error("can't serialize object of unregistered class");var A=v.serialize?v.serialize(e,t):{};if(!v.serialize){for(var P in e)if(e.hasOwnProperty(P)&&!(ui[k].omit.indexOf(P)>=0)){var L=e[P];A[P]=ui[k].shallow.indexOf(P)>=0?L:yo(L,t)}e instanceof Error&&(A.message=e.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return k!=="Object"&&(A.$name=k),A}throw new Error("can't serialize object of type "+typeof e)}function Fn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||_s(e)||pa(e)||ArrayBuffer.isView(e)||e instanceof rc)return e;if(Array.isArray(e))return e.map(Fn);if(typeof e=="object"){var t=e.$name||"Object",i=ui[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var v=d[p];if(v!=="$name"){var k=e[v];l[v]=ui[t].shallow.indexOf(v)>=0?k:Fn(k)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var th=function(){this.first=!0};th.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var $e={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Al(e){for(var t=0,i=e;t<i.length;t+=1)if(Jh(i[t].charCodeAt(0)))return!0;return!1}function Jh(e){return!(e!==746&&e!==747&&(e<4352||!($e["Bopomofo Extended"](e)||$e.Bopomofo(e)||$e["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||$e["CJK Compatibility Ideographs"](e)||$e["CJK Compatibility"](e)||$e["CJK Radicals Supplement"](e)||$e["CJK Strokes"](e)||!(!$e["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||$e["CJK Unified Ideographs Extension A"](e)||$e["CJK Unified Ideographs"](e)||$e["Enclosed CJK Letters and Months"](e)||$e["Hangul Compatibility Jamo"](e)||$e["Hangul Jamo Extended-A"](e)||$e["Hangul Jamo Extended-B"](e)||$e["Hangul Jamo"](e)||$e["Hangul Syllables"](e)||$e.Hiragana(e)||$e["Ideographic Description Characters"](e)||$e.Kanbun(e)||$e["Kangxi Radicals"](e)||$e["Katakana Phonetic Extensions"](e)||$e.Katakana(e)&&e!==12540||!(!$e["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!$e["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||$e["Unified Canadian Aboriginal Syllabics"](e)||$e["Unified Canadian Aboriginal Syllabics Extended"](e)||$e["Vertical Forms"](e)||$e["Yijing Hexagram Symbols"](e)||$e["Yi Syllables"](e)||$e["Yi Radicals"](e))))}function Yh(e){return!(Jh(e)||function(t){return!!($e["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||$e["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||$e["Letterlike Symbols"](t)||$e["Number Forms"](t)||$e["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||$e["Control Pictures"](t)&&t!==9251||$e["Optical Character Recognition"](t)||$e["Enclosed Alphanumerics"](t)||$e["Geometric Shapes"](t)||$e["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||$e["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||$e["CJK Symbols and Punctuation"](t)||$e.Katakana(t)||$e["Private Use Area"](t)||$e["CJK Compatibility Forms"](t)||$e["Small Form Variants"](t)||$e["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Ri(e){return e>=1424&&e<=2303||$e["Arabic Presentation Forms-A"](e)||$e["Arabic Presentation Forms-B"](e)}function qi(e,t){return!(!t&&Ri(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||$e.Khmer(e))}function Ra(e){for(var t=0,i=e;t<i.length;t+=1)if(Ri(i[t].charCodeAt(0)))return!0;return!1}var go=null,fa="unavailable",Ba=null,Qh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(fa="error"),go&&go(e)};function $h(){ep.fire(new le("pluginStateChange",{pluginStatus:fa,pluginURL:Ba}))}var ep=new ye,Hs=function(){return fa},Lo=function(){if(fa!=="deferred"||!Ba)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fa="loading",$h(),Ba&&Ka({url:Ba},function(e){e?Qh(e):(fa="loaded",$h())})},Oa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return fa==="loaded"||Oa.applyArabicShaping!=null},isLoading:function(){return fa==="loading"},setState:function(e){fa=e.pluginStatus,Ba=e.pluginURL},isParsed:function(){return Oa.applyArabicShaping!=null&&Oa.processBidirectionalText!=null&&Oa.processStyledBidirectionalText!=null},getPluginURL:function(){return Ba}},Yt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new th,this.transition={})};Yt.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!qi(p[l].charCodeAt(0),i))return!1;return!0}(e,Oa.isLoaded())},Yt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Yt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var Ro=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(Gh(i))return new Jn(i,l);if(fs(i)){var p=ds(i,l);if(p.result==="error")throw new Error(p.value.map(function(v){return v.key+": "+v.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=ur.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};Ro.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ro.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var rn=function(e){this.property=e,this.value=new Ro(e,void 0)};rn.prototype.transitioned=function(e,t){return new da(this.property,this.value,t,je({},e.transition,this.transition),e.now)},rn.prototype.untransitioned=function(){return new da(this.property,this.value,null,{},0)};var ci=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};ci.prototype.getValue=function(e){return Tt(this._values[e].value.value)},ci.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new rn(this._values[e].property)),this._values[e].value=new Ro(this._values[e].property,t===null?void 0:Tt(t))},ci.prototype.getTransition=function(e){return Tt(this._values[e].transition)},ci.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new rn(this._values[e].property)),this._values[e].transition=Tt(t)||void 0},ci.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},ci.prototype.transitioned=function(e,t){for(var i=new Gs(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},ci.prototype.untransitioned=function(){for(var e=new Gs(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var da=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};da.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var v=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(k){if(k<=0)return 0;if(k>=1)return 1;var A=k*k,P=A*k;return 4*(k<.5?P:3*(k-A)+P-.75)}(v))}return p};var Gs=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Gs.prototype.possiblyEvaluate=function(e,t,i){for(var l=new tp(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l},Gs.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var Qn=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Qn.prototype.getValue=function(e){return Tt(this._values[e].value)},Qn.prototype.setValue=function(e,t){this._values[e]=new Ro(this._values[e].property,t===null?void 0:Tt(t))},Qn.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},Qn.prototype.possiblyEvaluate=function(e,t,i){for(var l=new tp(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l};var kn=function(e,t,i){this.property=e,this.value=t,this.parameters=i};kn.prototype.isConstant=function(){return this.value.kind==="constant"},kn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},kn.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var tp=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};tp.prototype.get=function(e){return this._values[e]};var bt=function(e){this.specification=e};bt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},bt.prototype.interpolate=function(e,t,i){var l=xl[this.specification.type];return l?l(e,t,i):e};var ht=function(e,t){this.specification=e,this.overrides=t};ht.prototype.possiblyEvaluate=function(e,t,i,l){return new kn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},ht.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new kn(this,{kind:"constant",value:void 0},e.parameters);var l=xl[this.specification.type];return l?new kn(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},ht.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var rp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new kn(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var v=i.expression.evaluate(l,null,{},p,d),k=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,A=this._calculate(k,k,k,l);return new kn(this,{kind:"constant",value:A},l)}if(i.expression.kind==="camera"){var P=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new kn(this,{kind:"constant",value:P},l)}return new kn(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,v,k){if(i.kind==="source"){var A=i.evaluate(l,p,d,v,k);return this._calculate(A,A,A,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(ht),Vn=function(e){this.specification=e};Vn.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new Yt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Yt(Math.floor(t.zoom),t)),e.expression.evaluate(new Yt(Math.floor(t.zoom+1),t)),t)}},Vn.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},Vn.prototype.interpolate=function(e){return e};var Nn=function(e){this.specification=e};Nn.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},Nn.prototype.interpolate=function(){return!1};var fn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Ro(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new rn(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};dt("DataDrivenProperty",ht),dt("DataConstantProperty",bt),dt("CrossFadedDataDrivenProperty",rp),dt("CrossFadedProperty",Vn),dt("ColorRampProperty",Nn);var Sn=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new Qn(l.layout)),l.paint)){for(var p in this._transitionablePaint=new ci(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tp(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(eh,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return Cr(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(lu,"layers."+this.id+".paint."+i,i,l,p))return!1;if(Cr(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",k=d.value.isDataDriven(),A=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var P=this._transitionablePaint._values[i].value;return P.isDataDriven()||k||v||this._handleOverridablePaintPropertyUpdate(i,A,P)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),St(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&tc(this,i.call(Wh,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:G,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof kn&&iu(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(ye),eo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},vo=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Dr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ai(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=eo[p.type].BYTES_PER_ELEMENT,v=i=ip(i,Math.max(t,d)),k=p.components||1;return l=Math.max(l,d),i+=d*k,{name:p.name,type:p.type,components:k,offset:v}}),size:ip(i,Math.max(l,t)),alignment:t}}function ip(e,t){return Math.ceil(e/t)*t}Dr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Dr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Dr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Dr.prototype.clear=function(){this.length=0},Dr.prototype.resize=function(e){this.reserve(e),this.length=e},Dr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Dr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ic=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(Dr);ic.prototype.bytesPerElement=4,dt("StructArrayLayout2i4",ic);var np=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var k=4*i;return this.int16[k+0]=l,this.int16[k+1]=p,this.int16[k+2]=d,this.int16[k+3]=v,i},t}(Dr);np.prototype.bytesPerElement=8,dt("StructArrayLayout4i8",np);var ma=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,v,k)},t.prototype.emplace=function(i,l,p,d,v,k,A){var P=6*i;return this.int16[P+0]=l,this.int16[P+1]=p,this.int16[P+2]=d,this.int16[P+3]=v,this.int16[P+4]=k,this.int16[P+5]=A,i},t}(Dr);ma.prototype.bytesPerElement=12,dt("StructArrayLayout2i4i12",ma);var Fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,v,k)},t.prototype.emplace=function(i,l,p,d,v,k,A){var P=4*i,L=8*i;return this.int16[P+0]=l,this.int16[P+1]=p,this.uint8[L+4]=d,this.uint8[L+5]=v,this.uint8[L+6]=k,this.uint8[L+7]=A,i},t}(Dr);Fa.prototype.bytesPerElement=8,dt("StructArrayLayout2i4ub8",Fa);var uu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(Dr);uu.prototype.bytesPerElement=8,dt("StructArrayLayout2f8",uu);var $n=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k,A,P,L,O){var U=this.length;return this.resize(U+1),this.emplace(U,i,l,p,d,v,k,A,P,L,O)},t.prototype.emplace=function(i,l,p,d,v,k,A,P,L,O,U){var X=10*i;return this.uint16[X+0]=l,this.uint16[X+1]=p,this.uint16[X+2]=d,this.uint16[X+3]=v,this.uint16[X+4]=k,this.uint16[X+5]=A,this.uint16[X+6]=P,this.uint16[X+7]=L,this.uint16[X+8]=O,this.uint16[X+9]=U,i},t}(Dr);$n.prototype.bytesPerElement=20,dt("StructArrayLayout10ui20",$n);var ap=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k,A,P,L,O,U,X){var ie=this.length;return this.resize(ie+1),this.emplace(ie,i,l,p,d,v,k,A,P,L,O,U,X)},t.prototype.emplace=function(i,l,p,d,v,k,A,P,L,O,U,X,ie){var oe=12*i;return this.int16[oe+0]=l,this.int16[oe+1]=p,this.int16[oe+2]=d,this.int16[oe+3]=v,this.uint16[oe+4]=k,this.uint16[oe+5]=A,this.uint16[oe+6]=P,this.uint16[oe+7]=L,this.int16[oe+8]=O,this.int16[oe+9]=U,this.int16[oe+10]=X,this.int16[oe+11]=ie,i},t}(Dr);ap.prototype.bytesPerElement=24,dt("StructArrayLayout4i4ui4i24",ap);var cu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.float32[v+0]=l,this.float32[v+1]=p,this.float32[v+2]=d,i},t}(Dr);cu.prototype.bytesPerElement=12,dt("StructArrayLayout3f12",cu);var Bo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(Dr);Bo.prototype.bytesPerElement=4,dt("StructArrayLayout1ul4",Bo);var Ks=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k,A,P,L){var O=this.length;return this.resize(O+1),this.emplace(O,i,l,p,d,v,k,A,P,L)},t.prototype.emplace=function(i,l,p,d,v,k,A,P,L,O){var U=10*i,X=5*i;return this.int16[U+0]=l,this.int16[U+1]=p,this.int16[U+2]=d,this.int16[U+3]=v,this.int16[U+4]=k,this.int16[U+5]=A,this.uint32[X+3]=P,this.uint16[U+8]=L,this.uint16[U+9]=O,i},t}(Dr);Ks.prototype.bytesPerElement=20,dt("StructArrayLayout6i1ul2ui20",Ks);var nc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,v,k)},t.prototype.emplace=function(i,l,p,d,v,k,A){var P=6*i;return this.int16[P+0]=l,this.int16[P+1]=p,this.int16[P+2]=d,this.int16[P+3]=v,this.int16[P+4]=k,this.int16[P+5]=A,i},t}(Dr);nc.prototype.bytesPerElement=12,dt("StructArrayLayout2i2i2i12",nc);var Pl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v){var k=this.length;return this.resize(k+1),this.emplace(k,i,l,p,d,v)},t.prototype.emplace=function(i,l,p,d,v,k){var A=4*i,P=8*i;return this.float32[A+0]=l,this.float32[A+1]=p,this.float32[A+2]=d,this.int16[P+6]=v,this.int16[P+7]=k,i},t}(Dr);Pl.prototype.bytesPerElement=16,dt("StructArrayLayout2f1f2i16",Pl);var Xs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var k=12*i,A=3*i;return this.uint8[k+0]=l,this.uint8[k+1]=p,this.float32[A+1]=d,this.float32[A+2]=v,i},t}(Dr);Xs.prototype.bytesPerElement=12,dt("StructArrayLayout2ub2f12",Xs);var Un=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.uint16[v+0]=l,this.uint16[v+1]=p,this.uint16[v+2]=d,i},t}(Dr);Un.prototype.bytesPerElement=6,dt("StructArrayLayout3ui6",Un);var Ws=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k,A,P,L,O,U,X,ie,oe,de,ce,be){var Te=this.length;return this.resize(Te+1),this.emplace(Te,i,l,p,d,v,k,A,P,L,O,U,X,ie,oe,de,ce,be)},t.prototype.emplace=function(i,l,p,d,v,k,A,P,L,O,U,X,ie,oe,de,ce,be,Te){var Pe=24*i,Me=12*i,Ne=48*i;return this.int16[Pe+0]=l,this.int16[Pe+1]=p,this.uint16[Pe+2]=d,this.uint16[Pe+3]=v,this.uint32[Me+2]=k,this.uint32[Me+3]=A,this.uint32[Me+4]=P,this.uint16[Pe+10]=L,this.uint16[Pe+11]=O,this.uint16[Pe+12]=U,this.float32[Me+7]=X,this.float32[Me+8]=ie,this.uint8[Ne+36]=oe,this.uint8[Ne+37]=de,this.uint8[Ne+38]=ce,this.uint32[Me+10]=be,this.int16[Pe+22]=Te,i},t}(Dr);Ws.prototype.bytesPerElement=48,dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ws);var hu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,k,A,P,L,O,U,X,ie,oe,de,ce,be,Te,Pe,Me,Ne,Ge,We,_t,nt,xt,lt,Ut){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,i,l,p,d,v,k,A,P,L,O,U,X,ie,oe,de,ce,be,Te,Pe,Me,Ne,Ge,We,_t,nt,xt,lt,Ut)},t.prototype.emplace=function(i,l,p,d,v,k,A,P,L,O,U,X,ie,oe,de,ce,be,Te,Pe,Me,Ne,Ge,We,_t,nt,xt,lt,Ut,Pt){var gt=34*i,ir=17*i;return this.int16[gt+0]=l,this.int16[gt+1]=p,this.int16[gt+2]=d,this.int16[gt+3]=v,this.int16[gt+4]=k,this.int16[gt+5]=A,this.int16[gt+6]=P,this.int16[gt+7]=L,this.uint16[gt+8]=O,this.uint16[gt+9]=U,this.uint16[gt+10]=X,this.uint16[gt+11]=ie,this.uint16[gt+12]=oe,this.uint16[gt+13]=de,this.uint16[gt+14]=ce,this.uint16[gt+15]=be,this.uint16[gt+16]=Te,this.uint16[gt+17]=Pe,this.uint16[gt+18]=Me,this.uint16[gt+19]=Ne,this.uint16[gt+20]=Ge,this.uint16[gt+21]=We,this.uint16[gt+22]=_t,this.uint32[ir+12]=nt,this.float32[ir+13]=xt,this.float32[ir+14]=lt,this.float32[ir+15]=Ut,this.float32[ir+16]=Pt,i},t}(Dr);hu.prototype.bytesPerElement=68,dt("StructArrayLayout8i15ui1ul4f68",hu);var bs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(Dr);bs.prototype.bytesPerElement=4,dt("StructArrayLayout1f4",bs);var to=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.int16[v+0]=l,this.int16[v+1]=p,this.int16[v+2]=d,i},t}(Dr);to.prototype.bytesPerElement=6,dt("StructArrayLayout3i6",to);var Ml=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=4*i;return this.uint32[2*i+0]=l,this.uint16[v+2]=p,this.uint16[v+3]=d,i},t}(Dr);Ml.prototype.bytesPerElement=8,dt("StructArrayLayout1ul2ui8",Ml);var rh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(Dr);rh.prototype.bytesPerElement=4,dt("StructArrayLayout2ui4",rh);var op=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(Dr);op.prototype.bytesPerElement=2,dt("StructArrayLayout1ui2",op);var ya=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var k=4*i;return this.float32[k+0]=l,this.float32[k+1]=p,this.float32[k+2]=d,this.float32[k+3]=v,i},t}(Dr);ya.prototype.bytesPerElement=16,dt("StructArrayLayout4f16",ya);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new V(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(vo);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(Ks);dt("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(vo);a.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new a(this,i)},t}(Ws);dt("PlacedSymbolArray",c);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(vo);m.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(hu);dt("SymbolInstanceArray",w);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(bs);dt("GlyphOffsetArray",E);var C=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(to);dt("SymbolLineVertexArray",C);var M=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(vo);M.prototype.size=8;var N=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new M(this,i)},t}(Ml);dt("FeatureIndexArray",N);var W=Ai([{name:"a_pos",components:2,type:"Int16"}],4).members,J=function(e){e===void 0&&(e=[]),this.segments=e};function Q(e,t){return 256*(e=Se(Math.floor(e),0,255))+Se(Math.floor(t),0,255)}J.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>J.MAX_VERTEX_ARRAY_LENGTH&&Ot("Max vertices per segment is "+J.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>J.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},J.prototype.get=function(){return this.segments},J.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},J.simpleSegment=function(e,t,i,l){return new J([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},J.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dt("SegmentVector",J);var se=Ai([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ne=T(function(e){e.exports=function(t,i){var l,p,d,v,k,A,P,L;for(p=t.length-(l=3&t.length),d=i,k=3432918353,A=461845907,L=0;L<p;)P=255&t.charCodeAt(L)|(255&t.charCodeAt(++L))<<8|(255&t.charCodeAt(++L))<<16|(255&t.charCodeAt(++L))<<24,++L,d=27492+(65535&(v=5*(65535&(d=(d^=P=(65535&(P=(P=(65535&P)*k+(((P>>>16)*k&65535)<<16)&4294967295)<<15|P>>>17))*A+(((P>>>16)*A&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,l){case 3:P^=(255&t.charCodeAt(L+2))<<16;case 2:P^=(255&t.charCodeAt(L+1))<<8;case 1:d^=P=(65535&(P=(P=(65535&(P^=255&t.charCodeAt(L)))*k+(((P>>>16)*k&65535)<<16)&4294967295)<<15|P>>>17))*A+(((P>>>16)*A&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),he=T(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,v=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(v)|(255&t.charCodeAt(++v))<<8|(255&t.charCodeAt(++v))<<16|(255&t.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++v;switch(p){case 3:d^=(255&t.charCodeAt(v+2))<<16;case 2:d^=(255&t.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),ae=ne,fe=he;ae.murmur3=ne,ae.murmur2=fe;var ge=function(){this.ids=[],this.positions=[],this.indexed=!1};ge.prototype.add=function(e,t,i,l){this.ids.push(Be(e)),this.positions.push(t,i,l)},ge.prototype.getPositions=function(e){for(var t=Be(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},ge.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,v,k,A){for(;k<A;){for(var P=d[k+A>>1],L=k-1,O=A+1;;){do L++;while(d[L]<P);do O--;while(d[O]>P);if(L>=O)break;Ae(d,L,O),Ae(v,3*L,3*O),Ae(v,3*L+1,3*O+1),Ae(v,3*L+2,3*O+2)}O-k<A-O?(p(d,v,k,O),k=O+1):(p(d,v,O+1,A),A=O)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},ge.deserialize=function(e){var t=new ge;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Ie=Math.pow(2,53)-1;function Be(e){var t=+e;return!isNaN(t)&&t<=Ie?t:ae(String(e))}function Ae(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}dt("FeaturePositionMap",ge);var Fe=function(e,t){this.gl=e.gl,this.location=t},Ze=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Fe),Ke=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Fe),Xe=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Fe),it=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Fe),mt=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Fe),vt=function(e){function t(i,l){e.call(this,i,l),this.current=ur.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Fe),wt=new Float32Array(16),ar=function(e){function t(i,l){e.call(this,i,l),this.current=wt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Fe);function ct(e){return[Q(255*e.r,255*e.g),Q(255*e.b,255*e.a)]}var Ft=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};Ft.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Ft.prototype.getBinding=function(e,t,i){return this.type==="color"?new vt(e,t):new Ke(e,t)};var Qt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Qt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Qt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Qt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new mt(e,t):new Ke(e,t)};var zt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};zt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,v=this.expression.evaluate(new Yt(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},zt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},zt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=ct(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},zt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Dt=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Dt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new Yt(this.zoom),t,{},l,[],p),v=this.expression.evaluate(new Yt(this.zoom+1),t,{},l,[],p),k=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(k,e,d,v)},Dt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},Dt.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=ct(i),d=ct(l),v=e;v<t;v++)this.paintVertexArray.emplace(v,p[0],p[1],d[0],d[1]);else{for(var k=e;k<t;k++)this.paintVertexArray.emplace(k,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},Dt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Dt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Dt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=Se(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},Dt.prototype.getBinding=function(e,t,i){return new Ke(e,t)};var Xt=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Xt.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Xt.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Xt.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],v=l[i.max];if(p&&d&&v)for(var k=e;k<t;k++)this.zoomInPaintVertexArray.emplace(k,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(k,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Xt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,se.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,se.members,this.expression.isStateDependent))},Xt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var It=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof kn&&iu(d.property.specification)){var v=Wi(p,e.type),k=d.value,A=d.property.specification.type,P=d.property.useIntegerZoom,L=d.property.specification["property-type"],O=L==="cross-faded"||L==="cross-faded-data-driven";if(k.kind==="constant")this.binders[p]=O?new Qt(k.value,v):new Ft(k.value,v,A),l.push("/u_"+p);else if(k.kind==="source"||O){var U=Jr(p,A,"source");this.binders[p]=O?new Xt(k,A,P,t,U,e.id):new zt(k,v,A,U),l.push("/a_"+p)}else{var X=Jr(p,A,"composite");this.binders[p]=new Dt(k,v,A,P,t,X),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};It.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof zt||t instanceof Dt?t.maxValue:0},It.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var v=this.binders[d];(v instanceof zt||v instanceof Dt||v instanceof Xt)&&v.populatePaintArray(e,t,i,l,p)}},It.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Qt&&l.setConstantPatternPositions(e,t)}},It.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var v in e)for(var k=0,A=t.getPositions(v);k<A.length;k+=1){var P=A[k],L=i.feature(P.index);for(var O in this.binders){var U=this.binders[O];if((U instanceof zt||U instanceof Dt||U instanceof Xt)&&U.expression.isStateDependent===!0){var X=l.paint.get(O);U.expression=X.value,U.updatePaintArray(P.start,P.end,L,e[v],p),d=!0}}}return d},It.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Ft||i instanceof Qt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},It.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof zt||i instanceof Dt)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Xt)for(var p=0;p<se.members.length;p++)e.push(se.members[p].name)}return e},It.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ft||i instanceof Qt||i instanceof Dt)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},It.prototype.getPaintVertexBuffers=function(){return this._buffers},It.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof Ft||p instanceof Qt||p instanceof Dt)for(var d=0,v=p.uniformNames;d<v.length;d+=1){var k=v[d];if(t[k]){var A=p.getBinding(e,t[k],k);i.push({name:k,property:l,binding:A})}}}return i},It.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var v=d[p],k=v.name,A=v.property;this.binders[A].setUniform(v.binding,l,i.get(A),k)}},It.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Xt){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof zt||i instanceof Dt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},It.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof zt||i instanceof Dt||i instanceof Xt)&&i.upload(e)}this.updatePaintBuffers()},It.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof zt||t instanceof Dt||t instanceof Xt)&&t.destroy()}};var Ct=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new It(d,t,i)}this.needsUpload=!1,this._featureMap=new ge,this._bufferOffset=0};function Wi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Jr(e,t,i){var l={color:{source:uu,composite:ya},number:{source:bs,composite:uu}},p=function(d){return{"line-pattern":{source:$n,composite:$n},"fill-pattern":{source:$n,composite:$n},"fill-extrusion-pattern":{source:$n,composite:$n}}[d]}(e);return p&&p[i]||l[t][i]}Ct.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Ct.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var v=d[p];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,t,v,l)||this.needsUpload}},Ct.prototype.get=function(e){return this.programConfigurations[e]},Ct.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Ct.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},dt("ConstantBinder",Ft),dt("CrossFadedConstantBinder",Qt),dt("SourceExpressionBinder",zt),dt("CrossFadedCompositeBinder",Xt),dt("CompositeExpressionBinder",Dt),dt("ProgramConfiguration",It,{omit:["_buffers"]}),dt("ProgramConfigurationSet",Ct);var Bi=Math.pow(2,14)-1,dn=-Bi-1;function gi(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var v=p[d],k=Math.round(v.x*t),A=Math.round(v.y*t);v.x=Se(k,dn,Bi),v.y=Se(A,dn,Bi),(k<v.x||k>v.x+1||A<v.y||A>v.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function ri(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?gi(e):[]}}function Oi(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var jn=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ic,this.indexArray=new Un,this.segments=new J,this.programConfigurations=new Ct(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Oo(e,t){for(var i=0;i<e.length;i++)if(mn(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(mn(e,t[l]))return!0;return!!ih(e,t)}function qn(e,t,i){return!!mn(e,t)||!!Ji(t,e,i)}function _o(e,t){if(e.length===1)return ga(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(mn(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(ga(t,e[d]))return!0;for(var v=0;v<t.length;v++)if(ih(e,t[v]))return!0;return!1}function Zn(e,t,i){if(e.length>1){if(ih(e,t))return!0;for(var l=0;l<t.length;l++)if(Ji(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Ji(e[p],t,i))return!0;return!1}function ih(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(pu(l,p,t[d],t[d+1]))return!0;return!1}function pu(e,t,i,l){return Rr(e,i,l)!==Rr(t,i,l)&&Rr(e,t,i)!==Rr(e,t,l)}function Ji(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Va(e,t[p-1],t[p])<l)return!0;return!1}function Va(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function ga(e,t){for(var i,l,p,d=!1,v=0;v<e.length;v++)for(var k=0,A=(i=e[v]).length-1;k<i.length;A=k++)(l=i[k]).y>t.y!=(p=i[A]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function mn(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],v=e[p];d.y>t.y!=v.y>t.y&&t.x<(v.x-d.x)*(t.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function ac(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=Rr(e,t,i[0]);return d!==Rr(e,t,i[1])||d!==Rr(e,t,i[2])||d!==Rr(e,t,i[3])}function va(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Zi(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Dl(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=V.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var v=[],k=0;k<e.length;k++)v.push(e[k].sub(d));return v}jn.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var v=0,k=e;v<k.length;v+=1){var A=k[v],P=A.feature,L=A.id,O=A.index,U=A.sourceLayerIndex,X=this.layers[0]._featureFilter.needGeometry,ie=ri(P,X);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),ie,i)){var oe=d?d.evaluate(ie,{},i):void 0,de={id:L,properties:P.properties,type:P.type,sourceLayerIndex:U,index:O,geometry:X?ie.geometry:gi(P),patterns:{},sortKey:oe};p.push(de)}}d&&p.sort(function(We,_t){return We.sortKey-_t.sortKey});for(var ce=0,be=p;ce<be.length;ce+=1){var Te=be[ce],Pe=Te.geometry,Me=Te.index,Ne=Te.sourceLayerIndex,Ge=e[Me].feature;this.addFeature(Te,Pe,Me,i),t.featureIndex.insert(Ge,Pe,Me,Ne,this.index)}},jn.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},jn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jn.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,W),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},jn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jn.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var v=0,k=d[p];v<k.length;v+=1){var A=k[v],P=A.x,L=A.y;if(!(P<0||P>=8192||L<0||L>=8192)){var O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),U=O.vertexLength;Oi(this.layoutVertexArray,P,L,-1,-1),Oi(this.layoutVertexArray,P,L,1,-1),Oi(this.layoutVertexArray,P,L,1,1),Oi(this.layoutVertexArray,P,L,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),O.vertexLength+=4,O.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},dt("CircleBucket",jn,{omit:["layers"]});var Js=new fn({"circle-sort-key":new ht(G.layout_circle["circle-sort-key"])}),Ll={paint:new fn({"circle-radius":new ht(G.paint_circle["circle-radius"]),"circle-color":new ht(G.paint_circle["circle-color"]),"circle-blur":new ht(G.paint_circle["circle-blur"]),"circle-opacity":new ht(G.paint_circle["circle-opacity"]),"circle-translate":new bt(G.paint_circle["circle-translate"]),"circle-translate-anchor":new bt(G.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bt(G.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bt(G.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ht(G.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ht(G.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ht(G.paint_circle["circle-stroke-opacity"])}),layout:Js},cr=typeof Float32Array<"u"?Float32Array:Array;function ro(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ea(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],k=t[4],A=t[5],P=t[6],L=t[7],O=t[8],U=t[9],X=t[10],ie=t[11],oe=t[12],de=t[13],ce=t[14],be=t[15],Te=i[0],Pe=i[1],Me=i[2],Ne=i[3];return e[0]=Te*l+Pe*k+Me*O+Ne*oe,e[1]=Te*p+Pe*A+Me*U+Ne*de,e[2]=Te*d+Pe*P+Me*X+Ne*ce,e[3]=Te*v+Pe*L+Me*ie+Ne*be,e[4]=(Te=i[4])*l+(Pe=i[5])*k+(Me=i[6])*O+(Ne=i[7])*oe,e[5]=Te*p+Pe*A+Me*U+Ne*de,e[6]=Te*d+Pe*P+Me*X+Ne*ce,e[7]=Te*v+Pe*L+Me*ie+Ne*be,e[8]=(Te=i[8])*l+(Pe=i[9])*k+(Me=i[10])*O+(Ne=i[11])*oe,e[9]=Te*p+Pe*A+Me*U+Ne*de,e[10]=Te*d+Pe*P+Me*X+Ne*ce,e[11]=Te*v+Pe*L+Me*ie+Ne*be,e[12]=(Te=i[12])*l+(Pe=i[13])*k+(Me=i[14])*O+(Ne=i[15])*oe,e[13]=Te*p+Pe*A+Me*U+Ne*de,e[14]=Te*d+Pe*P+Me*X+Ne*ce,e[15]=Te*v+Pe*L+Me*ie+Ne*be,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var io,Rf=ea;function bo(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*v,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*v,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*v,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*v,e}io=new cr(3),cr!=Float32Array&&(io[0]=0,io[1]=0,io[2]=0),function(){var e=new cr(4);cr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Fo=(function(){var e=new cr(2);cr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Ll)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new jn(i)},t.prototype.queryRadius=function(i){var l=i;return va("circle-radius",this,l)+va("circle-stroke-width",this,l)+Zi(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,k,A,P){for(var L=Dl(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,A),O=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),U=this.paint.get("circle-pitch-alignment")==="map",X=U?L:function(Ge,We){return Ge.map(function(_t){return Na(_t,We)})}(L,P),ie=U?O*A:O,oe=0,de=d;oe<de.length;oe+=1)for(var ce=0,be=de[oe];ce<be.length;ce+=1){var Te=be[ce],Pe=U?Te:Na(Te,P),Me=ie,Ne=bo([],[Te.x,Te.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Me*=Ne[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Me*=k.cameraToCenterDistance/Ne[3]),qn(X,Pe,Me))return!0}return!1},t}(Sn));function Na(e,t){var i=bo([],[e.x,e.y,0,1],t);return new V(i[0]/i[3],i[1]/i[3])}var Xp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(jn);function Vo(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function oc(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=Vo({},{width:l,height:p},i);xy(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function xy(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,k=t.data,A=0;A<p.height;A++)for(var P=((i.y+A)*e.width+i.x)*d,L=((l.y+A)*t.width+l.x)*d,O=0;O<p.width*d;O++)k[L+O]=v[P+O];return t}dt("HeatmapBucket",Xp,{omit:["layers"]});var sc=function(e,t){Vo(this,e,1,t)};sc.prototype.resize=function(e){oc(this,e,1)},sc.prototype.clone=function(){return new sc({width:this.width,height:this.height},new Uint8Array(this.data))},sc.copy=function(e,t,i,l,p){xy(e,t,i,l,p,1)};var nn=function(e,t){Vo(this,e,4,t)};nn.prototype.resize=function(e){oc(this,e,4)},nn.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},nn.prototype.clone=function(){return new nn({width:this.width,height:this.height},new Uint8Array(this.data))},nn.copy=function(e,t,i,l,p){xy(e,t,i,l,p,4)},dt("AlphaImage",sc),dt("RGBAImage",nn);var mg={paint:new fn({"heatmap-radius":new ht(G.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ht(G.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bt(G.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Nn(G.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bt(G.paint_heatmap["heatmap-opacity"])})};function Zd(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new nn({width:i,height:l}),d=function(ie,oe,de){t[e.evaluationKey]=de;var ce=e.expression.evaluate(t);p.data[ie+oe+0]=Math.floor(255*ce.r/ce.a),p.data[ie+oe+1]=Math.floor(255*ce.g/ce.a),p.data[ie+oe+2]=Math.floor(255*ce.b/ce.a),p.data[ie+oe+3]=Math.floor(255*ce.a)};if(e.clips)for(var v=0,k=0;v<l;++v,k+=4*i)for(var A=0,P=0;A<i;A++,P+=4){var L=A/(i-1),O=e.clips[v];d(k,P,O.start*(1-L)+O.end*L)}else for(var U=0,X=0;U<i;U++,X+=4)d(0,X,U/(i-1));return p}var nh=function(e){function t(i){e.call(this,i,mg),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Xp(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Zd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(Sn),wy={paint:new fn({"hillshade-illumination-direction":new bt(G.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bt(G.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bt(G.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bt(G.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bt(G.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bt(G.paint_hillshade["hillshade-accent-color"])})},fu=function(e){function t(i){e.call(this,i,wy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(Sn),Ys=Ai([{name:"a_pos",components:2,type:"Int16"}],4).members,No=du,Ey=du;function du(e,t,i){i=i||2;var l,p,d,v,k,A,P,L=t&&t.length,O=L?t[0]*i:e.length,U=Bf(e,0,O,i,!0),X=[];if(!U||U.next===U.prev)return X;if(L&&(U=function(oe,de,ce,be){var Te,Pe,Me,Ne=[];for(Te=0,Pe=de.length;Te<Pe;Te++)(Me=Bf(oe,de[Te]*be,Te<Pe-1?de[Te+1]*be:oe.length,be,!1))===Me.next&&(Me.steiner=!0),Ne.push(Rl(Me));for(Ne.sort(sh),Te=0;Te<Ne.length;Te++)Iy(Ne[Te],ce),ce=ah(ce,ce.next);return ce}(e,t,U,i)),e.length>80*i){l=d=e[0],p=v=e[1];for(var ie=i;ie<O;ie+=i)(k=e[ie])<l&&(l=k),(A=e[ie+1])<p&&(p=A),k>d&&(d=k),A>v&&(v=A);P=(P=Math.max(d-l,v-p))!==0?1/P:0}return sp(U,X,i,l,p,P),X}function Bf(e,t,i,l,p){var d,v;if(p===gu(e,t,i,l)>0)for(d=t;d<i;d+=l)v=Ty(d,e[d],e[d+1],v);else for(d=i-l;d>=t;d-=l)v=Ty(d,e[d],e[d+1],v);return v&&Hd(v,v.next)&&(cp(v),v=v.next),v}function ah(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!Hd(l,l.next)&&Fi(l.prev,l,l.next)!==0)l=l.next;else{if(cp(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function sp(e,t,i,l,p,d,v){if(e){!v&&d&&function(L,O,U,X){var ie=L;do ie.z===null&&(ie.z=Uo(ie.x,ie.y,O,U,X)),ie.prevZ=ie.prev,ie.nextZ=ie.next,ie=ie.next;while(ie!==L);ie.prevZ.nextZ=null,ie.prevZ=null,function(oe){var de,ce,be,Te,Pe,Me,Ne,Ge,We=1;do{for(ce=oe,oe=null,Pe=null,Me=0;ce;){for(Me++,be=ce,Ne=0,de=0;de<We&&(Ne++,be=be.nextZ);de++);for(Ge=We;Ne>0||Ge>0&&be;)Ne!==0&&(Ge===0||!be||ce.z<=be.z)?(Te=ce,ce=ce.nextZ,Ne--):(Te=be,be=be.nextZ,Ge--),Pe?Pe.nextZ=Te:oe=Te,Te.prevZ=Pe,Pe=Te;ce=be}Pe.nextZ=null,We*=2}while(Me>1)}(ie)}(e,l,p,d);for(var k,A,P=e;e.prev!==e.next;)if(k=e.prev,A=e.next,d?oh(e,l,p,d):ky(e))t.push(k.i/i),t.push(e.i/i),t.push(A.i/i),cp(e),e=A.next,P=A.next;else if((e=A)===P){v?v===1?sp(e=yg(ah(e),t,i),t,i,l,p,d,2):v===2&&Sy(e,t,i,l,p,d):sp(ah(e),t,i,l,p,d,1);break}}}function ky(e){var t=e.prev,i=e,l=e.next;if(Fi(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(lh(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&Fi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function oh(e,t,i,l){var p=e.prev,d=e,v=e.next;if(Fi(p,d,v)>=0)return!1;for(var k=p.x>d.x?p.x>v.x?p.x:v.x:d.x>v.x?d.x:v.x,A=p.y>d.y?p.y>v.y?p.y:v.y:d.y>v.y?d.y:v.y,P=Uo(p.x<d.x?p.x<v.x?p.x:v.x:d.x<v.x?d.x:v.x,p.y<d.y?p.y<v.y?p.y:v.y:d.y<v.y?d.y:v.y,t,i,l),L=Uo(k,A,t,i,l),O=e.prevZ,U=e.nextZ;O&&O.z>=P&&U&&U.z<=L;){if(O!==e.prev&&O!==e.next&&lh(p.x,p.y,d.x,d.y,v.x,v.y,O.x,O.y)&&Fi(O.prev,O,O.next)>=0||(O=O.prevZ,U!==e.prev&&U!==e.next&&lh(p.x,p.y,d.x,d.y,v.x,v.y,U.x,U.y)&&Fi(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;O&&O.z>=P;){if(O!==e.prev&&O!==e.next&&lh(p.x,p.y,d.x,d.y,v.x,v.y,O.x,O.y)&&Fi(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;U&&U.z<=L;){if(U!==e.prev&&U!==e.next&&lh(p.x,p.y,d.x,d.y,v.x,v.y,U.x,U.y)&&Fi(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function yg(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!Hd(p,d)&&Gd(p,l,l.next,d)&&up(p,d)&&up(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),cp(l),cp(l.next),l=e=d),l=l.next}while(l!==e);return ah(l)}function Sy(e,t,i,l,p,d){var v=e;do{for(var k=v.next.next;k!==v.prev;){if(v.i!==k.i&&lp(v,k)){var A=lc(v,k);return v=ah(v,v.next),A=ah(A,A.next),sp(v,t,i,l,p,d),void sp(A,t,i,l,p,d)}k=k.next}v=v.next}while(v!==e)}function sh(e,t){return e.x-t.x}function Iy(e,t){if(t=function(l,p){var d,v=p,k=l.x,A=l.y,P=-1/0;do{if(A<=v.y&&A>=v.next.y&&v.next.y!==v.y){var L=v.x+(A-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(L<=k&&L>P){if(P=L,L===k){if(A===v.y)return v;if(A===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==p);if(!d)return null;if(k===P)return d;var O,U=d,X=d.x,ie=d.y,oe=1/0;v=d;do k>=v.x&&v.x>=X&&k!==v.x&&lh(A<ie?k:P,A,X,ie,A<ie?P:k,A,v.x,v.y)&&(O=Math.abs(A-v.y)/(k-v.x),up(v,l)&&(O<oe||O===oe&&(v.x>d.x||v.x===d.x&&mu(d,v)))&&(d=v,oe=O)),v=v.next;while(v!==U);return d}(e,t)){var i=lc(t,e);ah(t,t.next),ah(i,i.next)}}function mu(e,t){return Fi(e.prev,e,t.prev)<0&&Fi(t.next,e,e.next)<0}function Uo(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Rl(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function lh(e,t,i,l,p,d,v,k){return(p-v)*(t-k)-(e-v)*(d-k)>=0&&(e-v)*(l-k)-(i-v)*(t-k)>=0&&(i-v)*(d-k)-(p-v)*(l-k)>=0}function lp(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&Gd(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(up(e,t)&&up(t,e)&&function(i,l){var p=i,d=!1,v=(i.x+l.x)/2,k=(i.y+l.y)/2;do p.y>k!=p.next.y>k&&p.next.y!==p.y&&v<(p.next.x-p.x)*(k-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(Fi(e.prev,e,t.prev)||Fi(e,t.prev,t))||Hd(e,t)&&Fi(e.prev,e,e.next)>0&&Fi(t.prev,t,t.next)>0)}function Fi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Hd(e,t){return e.x===t.x&&e.y===t.y}function Gd(e,t,i,l){var p=Of(Fi(e,t,i)),d=Of(Fi(e,t,l)),v=Of(Fi(i,l,e)),k=Of(Fi(i,l,t));return p!==d&&v!==k||!(p!==0||!Bl(e,i,t))||!(d!==0||!Bl(e,l,t))||!(v!==0||!Bl(i,e,l))||!(k!==0||!Bl(i,t,l))}function Bl(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Of(e){return e>0?1:e<0?-1:0}function up(e,t){return Fi(e.prev,e,e.next)<0?Fi(e,t,e.next)>=0&&Fi(e,e.prev,t)>=0:Fi(e,t,e.prev)<0||Fi(e,e.next,t)<0}function lc(e,t){var i=new yu(e.i,e.x,e.y),l=new yu(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function Ty(e,t,i,l){var p=new yu(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function cp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function yu(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gu(e,t,i,l){for(var p=0,d=t,v=i-l;d<i;d+=l)p+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return p}function gg(e,t,i,l,p){(function d(v,k,A,P,L){for(;P>A;){if(P-A>600){var O=P-A+1,U=k-A+1,X=Math.log(O),ie=.5*Math.exp(2*X/3),oe=.5*Math.sqrt(X*ie*(O-ie)/O)*(U-O/2<0?-1:1);d(v,k,Math.max(A,Math.floor(k-U*ie/O+oe)),Math.min(P,Math.floor(k+(O-U)*ie/O+oe)),L)}var de=v[k],ce=A,be=P;for(hp(v,A,k),L(v[P],de)>0&&hp(v,A,P);ce<be;){for(hp(v,ce,be),ce++,be--;L(v[ce],de)<0;)ce++;for(;L(v[be],de)>0;)be--}L(v[A],de)===0?hp(v,A,be):hp(v,++be,P),be<=k&&(A=be+1),k<=be&&(P=be-1)}})(e,t,i||0,l||e.length-1,p||uh)}function hp(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function uh(e,t){return e<t?-1:e>t?1:0}function xs(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],v=0;v<i;v++){var k=ot(e[v]);k!==0&&(e[v].area=Math.abs(k),p===void 0&&(p=k<0),p===k<0?(l&&d.push(l),l=[e[v]]):l.push(e[v]))}if(l&&d.push(l),t>1)for(var A=0;A<d.length;A++)d[A].length<=t||(gg(d[A],t,1,d[A].length-1,zy),d[A]=d[A].slice(0,t));return d}function zy(e,t){return t.area-e.area}function pp(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,v=t;d<v.length;d+=1){var k=v[d].paint.get(e+"-pattern");k.isConstant()||(p=!0);var A=k.constantOr(null);A&&(p=!0,l[A.to]=!0,l[A.from]=!0)}return p}function Wp(e,t,i,l,p){for(var d=p.patternDependencies,v=0,k=t;v<k.length;v+=1){var A=k[v],P=A.paint.get(e+"-pattern").value;if(P.kind!=="constant"){var L=P.evaluate({zoom:l-1},i,{},p.availableImages),O=P.evaluate({zoom:l},i,{},p.availableImages),U=P.evaluate({zoom:l+1},i,{},p.availableImages);O=O&&O.name?O.name:O,U=U&&U.name?U.name:U,d[L=L&&L.name?L.name:L]=!0,d[O]=!0,d[U]=!0,i.patterns[A.id]={min:L,mid:O,max:U}}}return i}du.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(gu(e,0,p?t[0]*i:e.length,i));if(p)for(var v=0,k=t.length;v<k;v++)d-=Math.abs(gu(e,t[v]*i,v<k-1?t[v+1]*i:e.length,i));var A=0;for(v=0;v<l.length;v+=3){var P=l[v]*i,L=l[v+1]*i,O=l[v+2]*i;A+=Math.abs((e[P]-e[O])*(e[L+1]-e[P+1])-(e[P]-e[L])*(e[O+1]-e[P+1]))}return d===0&&A===0?0:Math.abs((A-d)/d)},du.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var v=0;v<t;v++)i.vertices.push(e[p][d][v]);p>0&&i.holes.push(l+=e[p-1].length)}return i},No.default=Ey;var ws=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ic,this.indexArray=new Un,this.indexArray2=new rh,this.programConfigurations=new Ct(e.layers,e.zoom),this.segments=new J,this.segments2=new J,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};ws.prototype.populate=function(e,t,i){this.hasPattern=pp("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var k=v[d],A=k.feature,P=k.id,L=k.index,O=k.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,X=ri(A,U);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),X,i)){var ie=l?l.evaluate(X,{},i,t.availableImages):void 0,oe={id:P,properties:A.properties,type:A.type,sourceLayerIndex:O,index:L,geometry:U?X.geometry:gi(A),patterns:{},sortKey:ie};p.push(oe)}}l&&p.sort(function(Ge,We){return Ge.sortKey-We.sortKey});for(var de=0,ce=p;de<ce.length;de+=1){var be=ce[de],Te=be.geometry,Pe=be.index,Me=be.sourceLayerIndex;if(this.hasPattern){var Ne=Wp("fill",this.layers,be,this.zoom,t);this.patternFeatures.push(Ne)}else this.addFeature(be,Te,Pe,i,{});t.featureIndex.insert(e[Pe].feature,Te,Pe,Me,this.index)}},ws.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ws.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},ws.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ys),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ws.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=xs(t,500);d<v.length;d+=1){for(var k=v[d],A=0,P=0,L=k;P<L.length;P+=1)A+=L[P].length;for(var O=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),U=O.vertexLength,X=[],ie=[],oe=0,de=k;oe<de.length;oe+=1){var ce=de[oe];if(ce.length!==0){ce!==k[0]&&ie.push(X.length/2);var be=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),Te=be.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(Te+ce.length-1,Te),X.push(ce[0].x),X.push(ce[0].y);for(var Pe=1;Pe<ce.length;Pe++)this.layoutVertexArray.emplaceBack(ce[Pe].x,ce[Pe].y),this.indexArray2.emplaceBack(Te+Pe-1,Te+Pe),X.push(ce[Pe].x),X.push(ce[Pe].y);be.vertexLength+=ce.length,be.primitiveLength+=ce.length}}for(var Me=No(X,ie),Ne=0;Ne<Me.length;Ne+=3)this.indexArray.emplaceBack(U+Me[Ne],U+Me[Ne+1],U+Me[Ne+2]);O.vertexLength+=A,O.primitiveLength+=Me.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},dt("FillBucket",ws,{omit:["layers","patternFeatures"]});var fp=new fn({"fill-sort-key":new ht(G.layout_fill["fill-sort-key"])}),vg={paint:new fn({"fill-antialias":new bt(G.paint_fill["fill-antialias"]),"fill-opacity":new ht(G.paint_fill["fill-opacity"]),"fill-color":new ht(G.paint_fill["fill-color"]),"fill-outline-color":new ht(G.paint_fill["fill-outline-color"]),"fill-translate":new bt(G.paint_fill["fill-translate"]),"fill-translate-anchor":new bt(G.paint_fill["fill-translate-anchor"]),"fill-pattern":new rp(G.paint_fill["fill-pattern"])}),layout:fp},Cy=function(e){function t(i){e.call(this,i,vg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new ws(i)},t.prototype.queryRadius=function(){return Zi(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,k,A){return _o(Dl(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,A),d)},t.prototype.isTileClipped=function(){return!0},t}(Sn),ta=Ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ol=Ua;function Ua(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(vu,this,t)}function vu(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var v=p._keys[l.readVarint()],k=p._values[l.readVarint()];p.properties[v]=k}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function Ay(e){for(var t,i,l=0,p=0,d=e.length,v=d-1;p<d;v=p++)l+=((i=e[v]).x-(t=e[p]).x)*(t.y+i.y);return l}Ua.types=["Unknown","Point","LineString","Polygon"],Ua.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,v=0,k=[];e.pos<i;){if(p<=0){var A=e.readVarint();l=7&A,p=A>>3}if(p--,l===1||l===2)d+=e.readSVarint(),v+=e.readSVarint(),l===1&&(t&&k.push(t),t=[]),t.push(new V(d,v));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&k.push(t),k},Ua.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,v=1/0,k=-1/0,A=1/0,P=-1/0;e.pos<t;){if(l<=0){var L=e.readVarint();i=7&L,l=L>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<v&&(v=p),p>k&&(k=p),(d+=e.readSVarint())<A&&(A=d),d>P&&(P=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,A,k,P]},Ua.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),v=this.extent*e,k=this.extent*t,A=this.loadGeometry(),P=Ua.types[this.type];function L(X){for(var ie=0;ie<X.length;ie++){var oe=X[ie];X[ie]=[360*(oe.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+k)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(l=0;l<A.length;l++)O[l]=A[l][0];L(A=O);break;case 2:for(l=0;l<A.length;l++)L(A[l]);break;case 3:for(A=function(X){var ie=X.length;if(ie<=1)return[X];for(var oe,de,ce=[],be=0;be<ie;be++){var Te=Ay(X[be]);Te!==0&&(de===void 0&&(de=Te<0),de===Te<0?(oe&&ce.push(oe),oe=[X[be]]):oe.push(X[be]))}return oe&&ce.push(oe),ce}(A),l=0;l<A.length;l++)for(p=0;p<A[l].length;p++)L(A[l][p])}A.length===1?A=A[0]:P="Multi"+P;var U={type:"Feature",geometry:{type:P,coordinates:A},properties:this.properties};return"id"in this&&(U.id=this.id),U};var ch=Ff;function Ff(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Cv,this,t),this.length=this._features.length}function Cv(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var v=l.readVarint()>>3;p=v===1?l.readString():v===2?l.readFloat():v===3?l.readDouble():v===4?l.readVarint64():v===5?l.readVarint():v===6?l.readSVarint():v===7?l.readBoolean():null}return p}(i))}function Py(e,t,i){if(e===3){var l=new ch(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}Ff.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Ol(this._pbf,t,this.extent,this._keys,this._values)};var Es={VectorTile:function(e,t){this.layers=e.readFields(Py,{},t)},VectorTileFeature:Ol,VectorTileLayer:ch},_g=Es.VectorTileFeature.types,Vf=Math.pow(2,13);function Qs(e,t,i,l,p,d,v,k){e.emplaceBack(t,i,2*Math.floor(l*Vf)+v,p*Vf*2,d*Vf*2,Math.round(k))}var ks=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ma,this.indexArray=new Un,this.programConfigurations=new Ct(e.layers,e.zoom),this.segments=new J,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function _u(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}ks.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=pp("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],v=d.feature,k=d.id,A=d.index,P=d.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,O=ri(v,L);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),O,i)){var U={id:k,sourceLayerIndex:P,index:A,geometry:L?O.geometry:gi(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Wp("fill-extrusion",this.layers,U,this.zoom,t)):this.addFeature(U,U.geometry,A,i,{}),t.featureIndex.insert(v,U.geometry,A,P,this.index,!0)}}},ks.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},ks.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ks.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ks.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ks.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ta),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ks.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=xs(t,500);d<v.length;d+=1){for(var k=v[d],A=0,P=0,L=k;P<L.length;P+=1)A+=L[P].length;for(var O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),U=0,X=k;U<X.length;U+=1){var ie=X[U];if(ie.length!==0&&!((ir=ie).every(function(Bt){return Bt.x<0})||ir.every(function(Bt){return Bt.x>8192})||ir.every(function(Bt){return Bt.y<0})||ir.every(function(Bt){return Bt.y>8192})))for(var oe=0,de=0;de<ie.length;de++){var ce=ie[de];if(de>=1){var be=ie[de-1];if(!_u(ce,be)){O.vertexLength+4>J.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Te=ce.sub(be)._perp()._unit(),Pe=be.dist(ce);oe+Pe>32768&&(oe=0),Qs(this.layoutVertexArray,ce.x,ce.y,Te.x,Te.y,0,0,oe),Qs(this.layoutVertexArray,ce.x,ce.y,Te.x,Te.y,0,1,oe),Qs(this.layoutVertexArray,be.x,be.y,Te.x,Te.y,0,0,oe+=Pe),Qs(this.layoutVertexArray,be.x,be.y,Te.x,Te.y,0,1,oe);var Me=O.vertexLength;this.indexArray.emplaceBack(Me,Me+2,Me+1),this.indexArray.emplaceBack(Me+1,Me+2,Me+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+A>J.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),_g[e.type]==="Polygon"){for(var Ne=[],Ge=[],We=O.vertexLength,_t=0,nt=k;_t<nt.length;_t+=1){var xt=nt[_t];if(xt.length!==0){xt!==k[0]&&Ge.push(Ne.length/2);for(var lt=0;lt<xt.length;lt++){var Ut=xt[lt];Qs(this.layoutVertexArray,Ut.x,Ut.y,0,0,1,1,0),Ne.push(Ut.x),Ne.push(Ut.y)}}}for(var Pt=No(Ne,Ge),gt=0;gt<Pt.length;gt+=3)this.indexArray.emplaceBack(We+Pt[gt],We+Pt[gt+2],We+Pt[gt+1]);O.primitiveLength+=Pt.length/3,O.vertexLength+=A}}var ir;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},dt("FillExtrusionBucket",ks,{omit:["layers","features"]});var $s={paint:new fn({"fill-extrusion-opacity":new bt(G["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ht(G["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bt(G["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bt(G["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rp(G["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ht(G["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ht(G["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bt(G["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},bu=function(e){function t(i){e.call(this,i,$s)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new ks(i)},t.prototype.queryRadius=function(){return Zi(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,k,A,P){var L=Dl(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,A),O=this.paint.get("fill-extrusion-height").evaluate(l,p),U=this.paint.get("fill-extrusion-base").evaluate(l,p),X=function(oe,de,ce,be){for(var Te=[],Pe=0,Me=oe;Pe<Me.length;Pe+=1){var Ne=Me[Pe],Ge=[Ne.x,Ne.y,0,1];bo(Ge,Ge,de),Te.push(new V(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return Te}(L,P),ie=function(oe,de,ce,be){for(var Te=[],Pe=[],Me=be[8]*de,Ne=be[9]*de,Ge=be[10]*de,We=be[11]*de,_t=be[8]*ce,nt=be[9]*ce,xt=be[10]*ce,lt=be[11]*ce,Ut=0,Pt=oe;Ut<Pt.length;Ut+=1){for(var gt=[],ir=[],Bt=0,nr=Pt[Ut];Bt<nr.length;Bt+=1){var Et=nr[Bt],Er=Et.x,Nr=Et.y,Ur=be[0]*Er+be[4]*Nr+be[12],_i=be[1]*Er+be[5]*Nr+be[13],Yr=be[2]*Er+be[6]*Nr+be[14],bi=be[3]*Er+be[7]*Nr+be[15],Yi=Yr+Ge,Si=bi+We,ia=Ur+_t,an=_i+nt,Gr=Yr+xt,Kr=bi+lt,ii=new V((Ur+Me)/Si,(_i+Ne)/Si);ii.z=Yi/Si,gt.push(ii);var Wt=new V(ia/Kr,an/Kr);Wt.z=Gr/Kr,ir.push(Wt)}Te.push(gt),Pe.push(ir)}return[Te,Pe]}(d,U,O,P);return function(oe,de,ce){var be=1/0;_o(ce,de)&&(be=hh(ce,de[0]));for(var Te=0;Te<de.length;Te++)for(var Pe=de[Te],Me=oe[Te],Ne=0;Ne<Pe.length-1;Ne++){var Ge=Pe[Ne],We=[Ge,Pe[Ne+1],Me[Ne+1],Me[Ne],Ge];Oo(ce,We)&&(be=Math.min(be,hh(ce,We)))}return be!==1/0&&be}(ie[0],ie[1],X)},t}(Sn);function dp(e,t){return e.x*t.x+e.y*t.y}function hh(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],v=e[0],k=i.sub(p),A=d.sub(p),P=v.sub(p),L=dp(k,k),O=dp(k,A),U=dp(A,A),X=dp(P,k),ie=dp(P,A),oe=L*U-O*O,de=(U*X-O*ie)/oe,ce=(L*ie-O*X)/oe,be=p.z*(1-de-ce)+i.z*de+d.z*ce;if(isFinite(be))return be}return 1/0}for(var Te=1/0,Pe=0,Me=t;Pe<Me.length;Pe+=1)Te=Math.min(Te,Me[Pe].z);return Te}var Kd=Ai([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Av=Ai([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,My=Es.VectorTileFeature.types,ph=Math.cos(Math.PI/180*37.5),Dy=Math.pow(2,14)/.5,ra=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new Fa,this.layoutVertexArray2=new uu,this.indexArray=new Un,this.programConfigurations=new Ct(e.layers,e.zoom),this.segments=new J,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};ra.prototype.populate=function(e,t,i){this.hasPattern=pp("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var k=v[d],A=k.feature,P=k.id,L=k.index,O=k.sourceLayerIndex,U=this.layers[0]._featureFilter.needGeometry,X=ri(A,U);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),X,i)){var ie=l?l.evaluate(X,{},i):void 0,oe={id:P,properties:A.properties,type:A.type,sourceLayerIndex:O,index:L,geometry:U?X.geometry:gi(A),patterns:{},sortKey:ie};p.push(oe)}}l&&p.sort(function(Ge,We){return Ge.sortKey-We.sortKey});for(var de=0,ce=p;de<ce.length;de+=1){var be=ce[de],Te=be.geometry,Pe=be.index,Me=be.sourceLayerIndex;if(this.hasPattern){var Ne=Wp("line",this.layers,be,this.zoom,t);this.patternFeatures.push(Ne)}else this.addFeature(be,Te,Pe,i,{});t.featureIndex.insert(e[Pe].feature,Te,Pe,Me,this.index)}},ra.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ra.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},ra.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ra.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ra.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Av)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ra.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ra.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},ra.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),k=d.get("line-cap"),A=d.get("line-miter-limit"),P=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var L=0,O=t;L<O.length;L+=1)this.addLine(O[L],e,v,k,A,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ra.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var k=My[t.type]==="Polygon",A=e.length;A>=2&&e[A-1].equals(e[A-2]);)A--;for(var P=0;P<A-1&&e[P].equals(e[P+1]);)P++;if(!(A<(k?3:2))){i==="bevel"&&(p=1.05);var L,O=this.overscaling<=16?122880/(512*this.overscaling):0,U=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),X=void 0,ie=void 0,oe=void 0,de=void 0;this.e1=this.e2=-1,k&&(de=e[P].sub(L=e[A-2])._unit()._perp());for(var ce=P;ce<A;ce++)if(!(ie=ce===A-1?k?e[P+1]:void 0:e[ce+1])||!e[ce].equals(ie)){de&&(oe=de),L&&(X=L),L=e[ce],de=ie?ie.sub(L)._unit()._perp():oe;var be=(oe=oe||de).add(de);be.x===0&&be.y===0||be._unit();var Te=oe.x*de.x+oe.y*de.y,Pe=be.x*de.x+be.y*de.y,Me=Pe!==0?1/Pe:1/0,Ne=2*Math.sqrt(2-2*Pe),Ge=Pe<ph&&X&&ie,We=oe.x*de.y-oe.y*de.x>0;if(Ge&&ce>P){var _t=L.dist(X);if(_t>2*O){var nt=L.sub(L.sub(X)._mult(O/_t)._round());this.updateDistance(X,nt),this.addCurrentVertex(nt,oe,0,0,U),X=nt}}var xt=X&&ie,lt=xt?i:k?"butt":l;if(xt&&lt==="round"&&(Me<d?lt="miter":Me<=2&&(lt="fakeround")),lt==="miter"&&Me>p&&(lt="bevel"),lt==="bevel"&&(Me>2&&(lt="flipbevel"),Me<p&&(lt="miter")),X&&this.updateDistance(X,L),lt==="miter")be._mult(Me),this.addCurrentVertex(L,be,0,0,U);else if(lt==="flipbevel"){if(Me>100)be=de.mult(-1);else{var Ut=Me*oe.add(de).mag()/oe.sub(de).mag();be._perp()._mult(Ut*(We?-1:1))}this.addCurrentVertex(L,be,0,0,U),this.addCurrentVertex(L,be.mult(-1),0,0,U)}else if(lt==="bevel"||lt==="fakeround"){var Pt=-Math.sqrt(Me*Me-1),gt=We?Pt:0,ir=We?0:Pt;if(X&&this.addCurrentVertex(L,oe,gt,ir,U),lt==="fakeround")for(var Bt=Math.round(180*Ne/Math.PI/20),nr=1;nr<Bt;nr++){var Et=nr/Bt;if(Et!==.5){var Er=Et-.5;Et+=Et*Er*(Et-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*Er*Er+(.848013+Te*(.215638*Te-1.06021)))}var Nr=de.sub(oe)._mult(Et)._add(oe)._unit()._mult(We?-1:1);this.addHalfVertex(L,Nr.x,Nr.y,!1,We,0,U)}ie&&this.addCurrentVertex(L,de,-gt,-ir,U)}else if(lt==="butt")this.addCurrentVertex(L,be,0,0,U);else if(lt==="square"){var Ur=X?1:-1;this.addCurrentVertex(L,be,Ur,Ur,U)}else lt==="round"&&(X&&(this.addCurrentVertex(L,oe,0,0,U),this.addCurrentVertex(L,oe,1,1,U,!0)),ie&&(this.addCurrentVertex(L,de,-1,-1,U,!0),this.addCurrentVertex(L,de,0,0,U)));if(Ge&&ce<A-1){var _i=L.dist(ie);if(_i>2*O){var Yr=L.add(ie.sub(L)._mult(O/_i)._round());this.updateDistance(L,Yr),this.addCurrentVertex(Yr,de,0,0,U),L=Yr}}}}},ra.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var v=t.y*l-t.x,k=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,v,k,d,!0,-l,p),this.distance>Dy/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},ra.prototype.addHalfVertex=function(e,t,i,l,p,d,v){var k=.5*(this.lineClips?this.scaledDistance*(Dy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var A=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),v.primitiveLength++),p?this.e2=A:this.e1=A},ra.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ra.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},dt("LineBucket",ra,{omit:["layers","patternFeatures"]});var fh=new fn({"line-cap":new bt(G.layout_line["line-cap"]),"line-join":new ht(G.layout_line["line-join"]),"line-miter-limit":new bt(G.layout_line["line-miter-limit"]),"line-round-limit":new bt(G.layout_line["line-round-limit"]),"line-sort-key":new ht(G.layout_line["line-sort-key"])}),Xd={paint:new fn({"line-opacity":new ht(G.paint_line["line-opacity"]),"line-color":new ht(G.paint_line["line-color"]),"line-translate":new bt(G.paint_line["line-translate"]),"line-translate-anchor":new bt(G.paint_line["line-translate-anchor"]),"line-width":new ht(G.paint_line["line-width"]),"line-gap-width":new ht(G.paint_line["line-gap-width"]),"line-offset":new ht(G.paint_line["line-offset"]),"line-blur":new ht(G.paint_line["line-blur"]),"line-dasharray":new Vn(G.paint_line["line-dasharray"]),"line-pattern":new rp(G.paint_line["line-pattern"]),"line-gradient":new Nn(G.paint_line["line-gradient"])}),layout:fh},Fl=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new Yt(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=je({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(ht))(Xd.paint.properties["line-width"].specification);Fl.useIntegerZoom=!0;var el=function(e){function t(i){e.call(this,i,Xd),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ua,this.gradientVersion=(this.gradientVersion+1)%pe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=Fl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new ra(i)},t.prototype.queryRadius=function(i){var l=i,p=Vl(va("line-width",this,l),va("line-gap-width",this,l)),d=va("line-offset",this,l);return p/2+Math.abs(d)+Zi(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,k,A){var P=Dl(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,A),L=A/2*Vl(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),O=this.paint.get("line-offset").evaluate(l,p);return O&&(d=function(U,X){for(var ie=[],oe=new V(0,0),de=0;de<U.length;de++){for(var ce=U[de],be=[],Te=0;Te<ce.length;Te++){var Pe=ce[Te],Me=ce[Te+1],Ne=Te===0?oe:Pe.sub(ce[Te-1])._unit()._perp(),Ge=Te===ce.length-1?oe:Me.sub(Pe)._unit()._perp(),We=Ne._add(Ge)._unit();We._mult(1/(We.x*Ge.x+We.y*Ge.y)),be.push(We._mult(X)._add(Pe))}ie.push(be)}return ie}(d,O*A)),function(U,X,ie){for(var oe=0;oe<X.length;oe++){var de=X[oe];if(U.length>=3){for(var ce=0;ce<de.length;ce++)if(mn(U,de[ce]))return!0}if(Zn(U,de,ie))return!0}return!1}(P,d,L)},t.prototype.isTileClipped=function(){return!0},t}(Sn);function Vl(e,t){return t>0?t+2*e:e}var Ly=Ai([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mp=Ai([{name:"a_projected_pos",components:3,type:"Float32"}],4),Wd=(Ai([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ai([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),bg=(Ai([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ry=Ai([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dh(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,v){var k=d.layout.get("text-transform").evaluate(v,{});return k==="uppercase"?p=p.toLocaleUpperCase():k==="lowercase"&&(p=p.toLocaleLowerCase()),Oa.applyArabicShaping&&(p=Oa.applyArabicShaping(p)),p}(l.text,t,i)}),e}Ai([{name:"triangle",components:3,type:"Uint16"}]),Ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ai([{type:"Float32",name:"offsetX"}]),Ai([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Jp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Jd=function(e,t,i,l,p){var d,v,k=8*p-l-1,A=(1<<k)-1,P=A>>1,L=-7,O=i?p-1:0,U=i?-1:1,X=e[t+O];for(O+=U,d=X&(1<<-L)-1,X>>=-L,L+=k;L>0;d=256*d+e[t+O],O+=U,L-=8);for(v=d&(1<<-L)-1,d>>=-L,L+=l;L>0;v=256*v+e[t+O],O+=U,L-=8);if(d===0)d=1-P;else{if(d===A)return v?NaN:1/0*(X?-1:1);v+=Math.pow(2,l),d-=P}return(X?-1:1)*v*Math.pow(2,d-l)},uc=function(e,t,i,l,p,d){var v,k,A,P=8*d-p-1,L=(1<<P)-1,O=L>>1,U=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=l?0:d-1,ie=l?1:-1,oe=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(k=isNaN(t)?1:0,v=L):(v=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-v))<1&&(v--,A*=2),(t+=v+O>=1?U/A:U*Math.pow(2,1-O))*A>=2&&(v++,A/=2),v+O>=L?(k=0,v=L):v+O>=1?(k=(t*A-1)*Math.pow(2,p),v+=O):(k=t*Math.pow(2,O-1)*Math.pow(2,p),v=0));p>=8;e[i+X]=255&k,X+=ie,k/=256,p-=8);for(v=v<<p|k,P+=p;P>0;e[i+X]=255&v,X+=ie,v/=256,P-=8);e[i+X-ie]|=128*oe},Yp=Sr;function Sr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Sr.Varint=0,Sr.Fixed64=1,Sr.Bytes=2,Sr.Fixed32=5;var Ss=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _a(e){return e.type===Sr.Bytes?e.readVarint()+e.pos:e.pos+1}function mh(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function yh(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function Yd(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Pv(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function By(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function gh(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function xg(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function Oy(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function vh(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Fy(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xu(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function xo(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function wo(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Qd(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function yp(e,t,i){e===1&&i.readMessage($d,t)}function $d(e,t,i){if(e===3){var l=i.readMessage(Mv,{}),p=l.width,d=l.height,v=l.left,k=l.top,A=l.advance;t.push({id:l.id,bitmap:new sc({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:v,top:k,advance:A}})}}function Mv(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function em(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(oe,de){return de.h-oe.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],k=0,A=0,P=0,L=e;P<L.length;P+=1)for(var O=L[P],U=v.length-1;U>=0;U--){var X=v[U];if(!(O.w>X.w||O.h>X.h)){if(O.x=X.x,O.y=X.y,A=Math.max(A,O.y+O.h),k=Math.max(k,O.x+O.w),O.w===X.w&&O.h===X.h){var ie=v.pop();U<v.length&&(v[U]=ie)}else O.h===X.h?(X.x+=O.w,X.w-=O.w):O.w===X.w?(X.y+=O.h,X.h-=O.h):(v.push({x:X.x+O.w,y:X.y,w:X.w-O.w,h:O.h}),X.y+=O.h,X.h-=O.h);break}}return{w:k,h:A,fill:t/(k*A)||0}}Sr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=xo(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Qd(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=xo(this.buf,this.pos)+4294967296*xo(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=xo(this.buf,this.pos)+4294967296*Qd(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Jd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Jd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,v){var k,A,P=v.buf;if(k=(112&(A=P[v.pos++]))>>4,A<128||(k|=(127&(A=P[v.pos++]))<<3,A<128)||(k|=(127&(A=P[v.pos++]))<<10,A<128)||(k|=(127&(A=P[v.pos++]))<<17,A<128)||(k|=(127&(A=P[v.pos++]))<<24,A<128)||(k|=(1&(A=P[v.pos++]))<<31,A<128))return mh(p,k,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Ss?function(i,l,p){return Ss.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",v=l;v<p;){var k,A,P,L=i[v],O=null,U=L>239?4:L>223?3:L>191?2:1;if(v+U>p)break;U===1?L<128&&(O=L):U===2?(192&(k=i[v+1]))==128&&(O=(31&L)<<6|63&k)<=127&&(O=null):U===3?(A=i[v+2],(192&(k=i[v+1]))==128&&(192&A)==128&&((O=(15&L)<<12|(63&k)<<6|63&A)<=2047||O>=55296&&O<=57343)&&(O=null)):U===4&&(A=i[v+2],P=i[v+3],(192&(k=i[v+1]))==128&&(192&A)==128&&(192&P)==128&&((O=(15&L)<<18|(63&k)<<12|(63&A)<<6|63&P)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,U=1):O>65535&&(O-=65536,d+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),d+=String.fromCharCode(O),v+=U}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Sr.Bytes)return e.push(this.readVarint(t));var i=_a(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Sr.Bytes)return e.push(this.readSVarint());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Sr.Bytes)return e.push(this.readBoolean());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Sr.Bytes)return e.push(this.readFloat());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Sr.Bytes)return e.push(this.readDouble());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Sr.Bytes)return e.push(this.readFixed32());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Sr.Bytes)return e.push(this.readSFixed32());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Sr.Bytes)return e.push(this.readFixed64());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Sr.Bytes)return e.push(this.readSFixed64());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Sr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Sr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Sr.Fixed32)this.pos+=4;else{if(t!==Sr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),wo(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),wo(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),wo(this.buf,-1&e,this.pos),wo(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),wo(this.buf,-1&e,this.pos),wo(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,k){k.buf[k.pos++]=127&d|128,d>>>=7,k.buf[k.pos++]=127&d|128,d>>>=7,k.buf[k.pos++]=127&d|128,d>>>=7,k.buf[k.pos++]=127&d|128,k.buf[k.pos]=127&(d>>>=7)}(l,0,i),function(d,v){var k=(7&d)<<4;v.buf[v.pos++]|=k|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var v,k,A=0;A<p.length;A++){if((v=p.charCodeAt(A))>55295&&v<57344){if(!k){v>56319||A+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):k=v;continue}if(v<56320){l[d++]=239,l[d++]=191,l[d++]=189,k=v;continue}v=k-55296<<10|v-56320|65536,k=null}else k&&(l[d++]=239,l[d++]=191,l[d++]=189,k=null);v<128?l[d++]=v:(v<2048?l[d++]=v>>6|192:(v<65536?l[d++]=v>>12|224:(l[d++]=v>>18|240,l[d++]=v>>12&63|128),l[d++]=v>>6&63|128),l[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&yh(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),uc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),uc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&yh(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,Sr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Yd,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Pv,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,xg,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,By,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,gh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Oy,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,vh,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Fy,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xu,t)},writeBytesField:function(e,t){this.writeTag(e,Sr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Sr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Sr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Sr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Sr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Sr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Sr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Sr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Sr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Sr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Nl=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,v=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=v,this.version=l},Qp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Qp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Qp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Qp.tlbr.get=function(){return this.tl.concat(this.br)},Qp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Nl.prototype,Qp);var gp=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=em(p),v=new nn({width:d.w||1,height:d.h||1});for(var k in e){var A=e[k],P=i[k].paddedRect;nn.copy(A.data,v,{x:0,y:0},{x:P.x+1,y:P.y+1},A.data)}for(var L in t){var O=t[L],U=l[L].paddedRect,X=U.x+1,ie=U.y+1,oe=O.data.width,de=O.data.height;nn.copy(O.data,v,{x:0,y:0},{x:X,y:ie},O.data),nn.copy(O.data,v,{x:0,y:de-1},{x:X,y:ie-1},{width:oe,height:1}),nn.copy(O.data,v,{x:0,y:0},{x:X,y:ie+de},{width:oe,height:1}),nn.copy(O.data,v,{x:oe-1,y:0},{x:X-1,y:ie},{width:1,height:de}),nn.copy(O.data,v,{x:0,y:0},{x:X+oe,y:ie},{width:1,height:de})}this.image=v,this.iconPositions=i,this.patternPositions=l};gp.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new Nl(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},gp.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},gp.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},dt("ImagePosition",Nl),dt("ImageAtlas",gp);var In={horizontal:1,vertical:2,horizontalOnly:3},_h=function(){this.scale=1,this.fontStack="",this.imageName=null};_h.forText=function(e,t){var i=new _h;return i.scale=e||1,i.fontStack=t,i},_h.forImage=function(e){var t=new _h;return t.imageName=e,t};var Pi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Eo(e,t,i,l,p,d,v,k,A,P,L,O,U,X,ie,oe){var de,ce=Pi.fromFeature(e,p);O===In.vertical&&ce.verticalizePunctuation();var be=Oa.processBidirectionalText,Te=Oa.processStyledBidirectionalText;if(be&&ce.sections.length===1){de=[];for(var Pe=0,Me=be(ce.toString(),wu(ce,P,d,t,l,X,ie));Pe<Me.length;Pe+=1){var Ne=Me[Pe],Ge=new Pi;Ge.text=Ne,Ge.sections=ce.sections;for(var We=0;We<Ne.length;We++)Ge.sectionIndex.push(0);de.push(Ge)}}else if(Te){de=[];for(var _t=0,nt=Te(ce.text,ce.sectionIndex,wu(ce,P,d,t,l,X,ie));_t<nt.length;_t+=1){var xt=nt[_t],lt=new Pi;lt.text=xt[0],lt.sectionIndex=xt[1],lt.sections=ce.sections,de.push(lt)}}else de=function(gt,ir){for(var Bt=[],nr=gt.text,Et=0,Er=0,Nr=ir;Er<Nr.length;Er+=1){var Ur=Nr[Er];Bt.push(gt.substring(Et,Ur)),Et=Ur}return Et<nr.length&&Bt.push(gt.substring(Et,nr.length)),Bt}(ce,wu(ce,P,d,t,l,X,ie));var Ut=[],Pt={positionedLines:Ut,text:ce.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(gt,ir,Bt,nr,Et,Er,Nr,Ur,_i,Yr,bi,Yi){for(var Si=0,ia=-17,an=0,Gr=0,Kr=Ur==="right"?1:Ur==="left"?0:.5,ii=0,Wt=0,jr=Et;Wt<jr.length;Wt+=1){var kr=jr[Wt];kr.trim();var fr=kr.getMaxScale(),qa=24*(fr-1),Tn={positionedGlyphs:[],lineOffset:0};gt.positionedLines[ii]=Tn;var Or=Tn.positionedGlyphs,Gi=0;if(kr.length()){for(var zn=0;zn<kr.length();zn++){var or=kr.getSection(zn),ol=kr.getSectionIndex(zn),on=kr.getCharCode(zn),Cn=0,Xr=null,sl=null,ba=null,wc=24,Ep=!(_i===In.horizontal||!bi&&!Jh(on)||bi&&(Is[on]||(xa=on,$e.Arabic(xa)||$e["Arabic Supplement"](xa)||$e["Arabic Extended-A"](xa)||$e["Arabic Presentation Forms-A"](xa)||$e["Arabic Presentation Forms-B"](xa))));if(or.imageName){var Th=nr[or.imageName];if(!Th)continue;ba=or.imageName,gt.iconsInText=gt.iconsInText||!0,sl=Th.paddedRect;var ao=Th.displaySize;or.scale=24*or.scale/Yi,Cn=qa+(24-ao[1]*or.scale),wc=(Xr={width:ao[0],height:ao[1],left:1,top:-3,advance:Ep?ao[1]:ao[0]}).advance;var kp=Ep?ao[0]*or.scale-24*fr:ao[1]*or.scale-24*fr;kp>0&&kp>Gi&&(Gi=kp)}else{var tf=Bt[or.fontStack],Ps=tf&&tf[on];if(Ps&&Ps.rect)sl=Ps.rect,Xr=Ps.metrics;else{var Sp=ir[or.fontStack],Ms=Sp&&Sp[on];if(!Ms)continue;Xr=Ms.metrics}Cn=24*(fr-or.scale)}Ep?(gt.verticalizable=!0,Or.push({glyph:on,imageName:ba,x:Si,y:ia+Cn,vertical:Ep,scale:or.scale,fontStack:or.fontStack,sectionIndex:ol,metrics:Xr,rect:sl}),Si+=wc*or.scale+Yr):(Or.push({glyph:on,imageName:ba,x:Si,y:ia+Cn,vertical:Ep,scale:or.scale,fontStack:or.fontStack,sectionIndex:ol,metrics:Xr,rect:sl}),Si+=Xr.advance*or.scale+Yr)}Or.length!==0&&(an=Math.max(Si-Yr,an),Vy(Or,0,Or.length-1,Kr,Gi)),Si=0;var Io=Er*fr+Gi;Tn.lineOffset=Math.max(Gi,qa),ia+=Io,Gr=Math.max(Io,Gr),++ii}else ia+=Er,++ii}var xa,Ip=ia- -17,ll=rm(Nr),ql=ll.horizontalAlign,rf=ll.verticalAlign;(function(nf,Zl,af,Tp,Hl,zp,Zo,oo,Ds){var zh,zu=(Zl-af)*Hl;zh=zp!==Zo?-oo*Tp- -17:(-Tp*Ds+.5)*Zo;for(var Ec=0,Wf=nf;Ec<Wf.length;Ec+=1)for(var kc=0,ul=Wf[Ec].positionedGlyphs;kc<ul.length;kc+=1){var Cp=ul[kc];Cp.x+=zu,Cp.y+=zh}})(gt.positionedLines,Kr,ql,rf,an,Gr,Er,Ip,Et.length),gt.top+=-rf*Ip,gt.bottom=gt.top+Ip,gt.left+=-ql*an,gt.right=gt.left+an}(Pt,t,i,l,de,v,k,A,O,P,U,oe),!function(gt){for(var ir=0,Bt=gt;ir<Bt.length;ir+=1)if(Bt[ir].positionedGlyphs.length!==0)return!1;return!0}(Ut)&&Pt}Pi.fromFeature=function(e,t){for(var i=new Pi,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},Pi.prototype.length=function(){return this.text.length},Pi.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Pi.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Pi.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Pi.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&Yh(l)&&!Jp[e[i+1]]||p&&Yh(p)&&!Jp[e[i-1]]||!Jp[e[i]]?e[i]:Jp[e[i]]}return t}(this.text)},Pi.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Is[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&Is[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},Pi.prototype.substring=function(e,t){var i=new Pi;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},Pi.prototype.toString=function(){return this.text},Pi.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},Pi.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(_h.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},Pi.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(_h.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}else Ot("Can't add FormattedSection with an empty image.")},Pi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Is={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ja={};function bh(e,t,i,l,p,d){if(t.imageName){var v=l[t.imageName];return v?v.displaySize[0]*t.scale*24/d+p:0}var k=i[t.fontStack],A=k&&k[e];return A?A.metrics.advance*t.scale+p:0}function Nf(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function Dv(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function tm(e,t,i,l,p,d){for(var v=null,k=Nf(t,i,p,d),A=0,P=l;A<P.length;A+=1){var L=P[A],O=Nf(t-L.x,i,p,d)+L.badness;O<=k&&(v=L,k=O)}return{index:e,x:t,priorBreak:v,badness:k}}function wu(e,t,i,l,p,d,v){if(d!=="point")return[];if(!e)return[];for(var k,A=[],P=function(de,ce,be,Te,Pe,Me){for(var Ne=0,Ge=0;Ge<de.length();Ge++){var We=de.getSection(Ge);Ne+=bh(de.getCharCode(Ge),We,Te,Pe,ce,Me)}return Ne/Math.max(1,Math.ceil(Ne/be))}(e,t,i,l,p,v),L=e.text.indexOf("​")>=0,O=0,U=0;U<e.length();U++){var X=e.getSection(U),ie=e.getCharCode(U);if(Is[ie]||(O+=bh(ie,X,l,p,t,v)),U<e.length()-1){var oe=!((k=ie)<11904||!($e["Bopomofo Extended"](k)||$e.Bopomofo(k)||$e["CJK Compatibility Forms"](k)||$e["CJK Compatibility Ideographs"](k)||$e["CJK Compatibility"](k)||$e["CJK Radicals Supplement"](k)||$e["CJK Strokes"](k)||$e["CJK Symbols and Punctuation"](k)||$e["CJK Unified Ideographs Extension A"](k)||$e["CJK Unified Ideographs"](k)||$e["Enclosed CJK Letters and Months"](k)||$e["Halfwidth and Fullwidth Forms"](k)||$e.Hiragana(k)||$e["Ideographic Description Characters"](k)||$e["Kangxi Radicals"](k)||$e["Katakana Phonetic Extensions"](k)||$e.Katakana(k)||$e["Vertical Forms"](k)||$e["Yi Radicals"](k)||$e["Yi Syllables"](k)));(ja[ie]||oe||X.imageName)&&A.push(tm(U+1,O,P,A,Dv(ie,e.getCharCode(U+1),oe&&L),!1))}}return function de(ce){return ce?de(ce.priorBreak).concat(ce.index):[]}(tm(e.length(),O,P,A,0,!0))}function rm(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Vy(e,t,i,l,p){if(l||p)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*l,k=t;k<=i;k++)e[k].x-=v,e[k].y+=p}function cc(e,t,i,l,p,d){var v,k=e.image;if(k.content){var A=k.content,P=k.pixelRatio||1;v=[A[0]/P,A[1]/P,k.displaySize[0]-A[2]/P,k.displaySize[1]-A[3]/P]}var L,O,U,X,ie=t.left*d,oe=t.right*d;i==="width"||i==="both"?(X=p[0]+ie-l[3],O=p[0]+oe+l[1]):O=(X=p[0]+(ie+oe-k.displaySize[0])/2)+k.displaySize[0];var de=t.top*d,ce=t.bottom*d;return i==="height"||i==="both"?(L=p[1]+de-l[0],U=p[1]+ce+l[2]):U=(L=p[1]+(de+ce-k.displaySize[1])/2)+k.displaySize[1],{image:k,top:L,right:O,bottom:U,left:X,collisionPadding:v}}ja[10]=!0,ja[32]=!0,ja[38]=!0,ja[40]=!0,ja[41]=!0,ja[43]=!0,ja[45]=!0,ja[47]=!0,ja[173]=!0,ja[183]=!0,ja[8203]=!0,ja[8208]=!0,ja[8211]=!0,ja[8231]=!0;var vp=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(V);function Uf(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Yt(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<l.length&&l[v]<e+1;)v++;v=Math.min(l.length-1,v);var k=l[d],A=l[v];return i.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:k,maxZoom:A,minSize:i.evaluate(new Yt(k)),maxSize:i.evaluate(new Yt(A)),interpolationType:p}}function hc(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?ki(p/128,i.upperSize/128,t.uSizeT):l}function pc(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?Se(Ci.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=ki(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}dt("Anchor",vp);var wg=Object.freeze({__proto__:null,getSizeData:Uf,evaluateSizeForFeature:hc,evaluateSizeForZoom:pc,SIZE_PACK_FACTOR:128});function im(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,v=t.segment+1,k=0;k>-i/2;){if(--v<0)return!1;k-=e[v].dist(d),d=e[v]}k+=e[v].dist(e[v+1]),v++;for(var A=[],P=0;k<i/2;){var L=e[v],O=e[v+1];if(!O)return!1;var U=e[v-1].angleTo(L)-L.angleTo(O);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:k,angleDelta:U}),P+=U;k-A[0].distance>l;)P-=A.shift().angleDelta;if(P>p)return!1;v++,k+=L.dist(O)}return!0}function fc(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function tl(e,t,i){return e?.6*t*i:0}function nm(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function jf(e,t,i,l,p,d){for(var v=tl(i,p,d),k=nm(i,l)*d,A=0,P=fc(e)/2,L=0;L<e.length-1;L++){var O=e[L],U=e[L+1],X=O.dist(U);if(A+X>P){var ie=(P-A)/X,oe=ki(O.x,U.x,ie),de=ki(O.y,U.y,ie),ce=new vp(oe,de,U.angleTo(O),L);return ce._round(),!v||im(e,ce,k,v,t)?ce:void 0}A+=X}}function am(e,t,i,l,p,d,v,k,A){var P=tl(l,d,v),L=nm(l,p),O=L*v,U=e[0].x===0||e[0].x===A||e[0].y===0||e[0].y===A;return t-O<t/4&&(t=O+t/4),function X(ie,oe,de,ce,be,Te,Pe,Me,Ne){for(var Ge=Te/2,We=fc(ie),_t=0,nt=oe-de,xt=[],lt=0;lt<ie.length-1;lt++){for(var Ut=ie[lt],Pt=ie[lt+1],gt=Ut.dist(Pt),ir=Pt.angleTo(Ut);nt+de<_t+gt;){var Bt=((nt+=de)-_t)/gt,nr=ki(Ut.x,Pt.x,Bt),Et=ki(Ut.y,Pt.y,Bt);if(nr>=0&&nr<Ne&&Et>=0&&Et<Ne&&nt-Ge>=0&&nt+Ge<=We){var Er=new vp(nr,Et,ir,lt);Er._round(),ce&&!im(ie,Er,Te,ce,be)||xt.push(Er)}}_t+=gt}return Me||xt.length||Pe||(xt=X(ie,_t/2,de,ce,be,Te,Pe,!0,Ne)),xt}(e,U?t/2*k%t:(L/2+2*d)*v*k%t,t,P,i,O,U,!1,A)}function om(e,t,i,l,p){for(var d=[],v=0;v<e.length;v++)for(var k=e[v],A=void 0,P=0;P<k.length-1;P++){var L=k[P],O=k[P+1];L.x<t&&O.x<t||(L.x<t?L=new V(t,L.y+(t-L.x)/(O.x-L.x)*(O.y-L.y))._round():O.x<t&&(O=new V(t,L.y+(t-L.x)/(O.x-L.x)*(O.y-L.y))._round()),L.y<i&&O.y<i||(L.y<i?L=new V(L.x+(i-L.y)/(O.y-L.y)*(O.x-L.x),i)._round():O.y<i&&(O=new V(L.x+(i-L.y)/(O.y-L.y)*(O.x-L.x),i)._round()),L.x>=l&&O.x>=l||(L.x>=l?L=new V(l,L.y+(l-L.x)/(O.x-L.x)*(O.y-L.y))._round():O.x>=l&&(O=new V(l,L.y+(l-L.x)/(O.x-L.x)*(O.y-L.y))._round()),L.y>=p&&O.y>=p||(L.y>=p?L=new V(L.x+(p-L.y)/(O.y-L.y)*(O.x-L.x),p)._round():O.y>=p&&(O=new V(L.x+(p-L.y)/(O.y-L.y)*(O.x-L.x),p)._round()),A&&L.equals(A[A.length-1])||d.push(A=[L]),A.push(O)))))}return d}function xh(e,t,i,l){var p=[],d=e.image,v=d.pixelRatio,k=d.paddedRect.w-2,A=d.paddedRect.h-2,P=e.right-e.left,L=e.bottom-e.top,O=d.stretchX||[[0,k]],U=d.stretchY||[[0,A]],X=function(nr,Et){return nr+Et[1]-Et[0]},ie=O.reduce(X,0),oe=U.reduce(X,0),de=k-ie,ce=A-oe,be=0,Te=ie,Pe=0,Me=oe,Ne=0,Ge=de,We=0,_t=ce;if(d.content&&l){var nt=d.content;be=qf(O,0,nt[0]),Pe=qf(U,0,nt[1]),Te=qf(O,nt[0],nt[2]),Me=qf(U,nt[1],nt[3]),Ne=nt[0]-be,We=nt[1]-Pe,Ge=nt[2]-nt[0]-Te,_t=nt[3]-nt[1]-Me}var xt=function(nr,Et,Er,Nr){var Ur=no(nr.stretch-be,Te,P,e.left),_i=Ts(nr.fixed-Ne,Ge,nr.stretch,ie),Yr=no(Et.stretch-Pe,Me,L,e.top),bi=Ts(Et.fixed-We,_t,Et.stretch,oe),Yi=no(Er.stretch-be,Te,P,e.left),Si=Ts(Er.fixed-Ne,Ge,Er.stretch,ie),ia=no(Nr.stretch-Pe,Me,L,e.top),an=Ts(Nr.fixed-We,_t,Nr.stretch,oe),Gr=new V(Ur,Yr),Kr=new V(Yi,Yr),ii=new V(Yi,ia),Wt=new V(Ur,ia),jr=new V(_i/v,bi/v),kr=new V(Si/v,an/v),fr=t*Math.PI/180;if(fr){var qa=Math.sin(fr),Tn=Math.cos(fr),Or=[Tn,-qa,qa,Tn];Gr._matMult(Or),Kr._matMult(Or),Wt._matMult(Or),ii._matMult(Or)}var Gi=nr.stretch+nr.fixed,zn=Et.stretch+Et.fixed;return{tl:Gr,tr:Kr,bl:Wt,br:ii,tex:{x:d.paddedRect.x+1+Gi,y:d.paddedRect.y+1+zn,w:Er.stretch+Er.fixed-Gi,h:Nr.stretch+Nr.fixed-zn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:jr,pixelOffsetBR:kr,minFontScaleX:Ge/v/P,minFontScaleY:_t/v/L,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var lt=sm(O,de,ie),Ut=sm(U,ce,oe),Pt=0;Pt<lt.length-1;Pt++)for(var gt=lt[Pt],ir=lt[Pt+1],Bt=0;Bt<Ut.length-1;Bt++)p.push(xt(gt,Ut[Bt],ir,Ut[Bt+1]));else p.push(xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:A+1}));return p}function qf(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var v=d[p];l+=Math.max(t,Math.min(i,v[1]))-Math.max(t,Math.min(i,v[0]))}return l}function sm(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var v=d[p],k=v[0],A=v[1],P=l[l.length-1];l.push({fixed:k-P.stretch,stretch:P.stretch}),l.push({fixed:k-P.stretch,stretch:P.stretch+(A-k)})}return l.push({fixed:t+1,stretch:i}),l}function no(e,t,i,l){return e/t*i+l}function Ts(e,t,i,l){return e-t*i/l}var ko=function(e,t,i,l,p,d,v,k,A,P){if(this.boxStartIndex=e.length,A){var L=d.top,O=d.bottom,U=d.collisionPadding;U&&(L-=U[1],O+=U[3]);var X=O-L;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{var ie=d.top*v-k,oe=d.bottom*v+k,de=d.left*v-k,ce=d.right*v+k,be=d.collisionPadding;if(be&&(de-=be[0]*v,ie-=be[1]*v,ce+=be[2]*v,oe+=be[3]*v),P){var Te=new V(de,ie),Pe=new V(ce,ie),Me=new V(de,oe),Ne=new V(ce,oe),Ge=P*Math.PI/180;Te._rotate(Ge),Pe._rotate(Ge),Me._rotate(Ge),Ne._rotate(Ge),de=Math.min(Te.x,Pe.x,Me.x,Ne.x),ce=Math.max(Te.x,Pe.x,Me.x,Ne.x),ie=Math.min(Te.y,Pe.y,Me.y,Ne.y),oe=Math.max(Te.y,Pe.y,Me.y,Ne.y)}e.emplaceBack(t.x,t.y,de,ie,ce,oe,i,l,p)}this.boxEndIndex=e.length},So=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Ny),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Ny(e,t){return e<t?-1:e>t?1:0}function _p(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,v=-1/0,k=e[0],A=0;A<k.length;A++){var P=k[A];(!A||P.x<l)&&(l=P.x),(!A||P.y<p)&&(p=P.y),(!A||P.x>d)&&(d=P.x),(!A||P.y>v)&&(v=P.y)}var L=Math.min(d-l,v-p),O=L/2,U=new So([],lm);if(L===0)return new V(l,p);for(var X=l;X<d;X+=L)for(var ie=p;ie<v;ie+=L)U.push(new $p(X+O,ie+O,O,e));for(var oe=function(be){for(var Te=0,Pe=0,Me=0,Ne=be[0],Ge=0,We=Ne.length,_t=We-1;Ge<We;_t=Ge++){var nt=Ne[Ge],xt=Ne[_t],lt=nt.x*xt.y-xt.x*nt.y;Pe+=(nt.x+xt.x)*lt,Me+=(nt.y+xt.y)*lt,Te+=3*lt}return new $p(Pe/Te,Me/Te,0,be)}(e),de=U.length;U.length;){var ce=U.pop();(ce.d>oe.d||!oe.d)&&(oe=ce,i&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,de)),ce.max-oe.d<=t||(U.push(new $p(ce.p.x-(O=ce.h/2),ce.p.y-O,O,e)),U.push(new $p(ce.p.x+O,ce.p.y-O,O,e)),U.push(new $p(ce.p.x-O,ce.p.y+O,O,e)),U.push(new $p(ce.p.x+O,ce.p.y+O,O,e)),de+=4)}return i&&(console.log("num probes: "+de),console.log("best distance: "+oe.d)),oe.p}function lm(e,t){return t.max-e.max}function $p(e,t,i,l){this.p=new V(e,t),this.h=i,this.d=function(p,d){for(var v=!1,k=1/0,A=0;A<d.length;A++)for(var P=d[A],L=0,O=P.length,U=O-1;L<O;U=L++){var X=P[L],ie=P[U];X.y>p.y!=ie.y>p.y&&p.x<(ie.x-X.x)*(p.y-X.y)/(ie.y-X.y)+X.x&&(v=!v),k=Math.min(k,Va(p,X,ie))}return(v?1:-1)*Math.sqrt(k)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}So.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},So.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},So.prototype.peek=function(){return this.data[0]},So.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},So.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),v=t[d],k=d+1;if(k<this.length&&i(t[k],v)<0&&(d=k,v=t[k]),i(v,p)>=0)break;t[e]=v,e=d}t[e]=p};var Zf=Number.POSITIVE_INFINITY;function dc(e,t){return t[1]!==Zf?function(i,l,p){var d=0,v=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":v=p-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,v]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var v=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-v;break;case"top-left":case"bottom-left":p=v;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function um(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cm(e,t,i,l,p,d,v,k,A,P,L,O,U,X,ie){var oe=function(Pe,Me,Ne,Ge,We,_t,nt,xt){for(var lt=Ge.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,Ut=[],Pt=0,gt=Me.positionedLines;Pt<gt.length;Pt+=1)for(var ir=gt[Pt],Bt=0,nr=ir.positionedGlyphs;Bt<nr.length;Bt+=1){var Et=nr[Bt];if(Et.rect){var Er=Et.rect||{},Nr=4,Ur=!0,_i=1,Yr=0,bi=(We||xt)&&Et.vertical,Yi=Et.metrics.advance*Et.scale/2;if(xt&&Me.verticalizable&&(Yr=ir.lineOffset/2-(Et.imageName?-(24-Et.metrics.width*Et.scale)/2:24*(Et.scale-1))),Et.imageName){var Si=nt[Et.imageName];Ur=Si.sdf,Nr=1/(_i=Si.pixelRatio)}var ia=We?[Et.x+Yi,Et.y]:[0,0],an=We?[0,0]:[Et.x+Yi+Ne[0],Et.y+Ne[1]-Yr],Gr=[0,0];bi&&(Gr=an,an=[0,0]);var Kr=(Et.metrics.left-Nr)*Et.scale-Yi+an[0],ii=(-Et.metrics.top-Nr)*Et.scale+an[1],Wt=Kr+Er.w*Et.scale/_i,jr=ii+Er.h*Et.scale/_i,kr=new V(Kr,ii),fr=new V(Wt,ii),qa=new V(Kr,jr),Tn=new V(Wt,jr);if(bi){var Or=new V(-Yi,Yi- -17),Gi=-Math.PI/2,zn=12-Yi,or=new V(22-zn,-(Et.imageName?zn:0)),ol=new(Function.prototype.bind.apply(V,[null].concat(Gr)));kr._rotateAround(Gi,Or)._add(or)._add(ol),fr._rotateAround(Gi,Or)._add(or)._add(ol),qa._rotateAround(Gi,Or)._add(or)._add(ol),Tn._rotateAround(Gi,Or)._add(or)._add(ol)}if(lt){var on=Math.sin(lt),Cn=Math.cos(lt),Xr=[Cn,-on,on,Cn];kr._matMult(Xr),fr._matMult(Xr),qa._matMult(Xr),Tn._matMult(Xr)}var sl=new V(0,0),ba=new V(0,0);Ut.push({tl:kr,tr:fr,bl:qa,br:Tn,tex:Er,writingMode:Me.writingMode,glyphOffset:ia,sectionIndex:Et.sectionIndex,isSDF:Ur,pixelOffsetTL:sl,pixelOffsetBR:ba,minFontScaleX:0,minFontScaleY:0})}}return Ut}(0,i,k,p,d,v,l,e.allowVerticalPlacement),de=e.textSizeData,ce=null;de.kind==="source"?(ce=[128*p.layout.get("text-size").evaluate(v,{})])[0]>32640&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):de.kind==="composite"&&((ce=[128*X.compositeTextSizes[0].evaluate(v,{},ie),128*X.compositeTextSizes[1].evaluate(v,{},ie)])[0]>32640||ce[1]>32640)&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,oe,ce,k,d,v,P,t,A.lineStartIndex,A.lineLength,U,ie);for(var be=0,Te=L;be<Te.length;be+=1)O[Te[be]]=e.text.placedSymbolArray.length-1;return 4*oe.length}function mc(e){for(var t in e)return e[t];return null}function Uy(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],v=d.length-1;v>=0;v--)if(l.dist(d[v])<i)return!0}else p[t]=[];return p[t].push(l),!1}var Eu=Es.VectorTileFeature.types,rl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zs(e,t,i,l,p,d,v,k,A,P,L,O,U){var X=k?Math.min(32640,Math.round(k[0])):0,ie=k?Math.min(32640,Math.round(k[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,v,(X<<1)+(A?1:0),ie,16*P,16*L,256*O,256*U)}function Hf(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function bp(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Ra(i[t].text))return!0;return!1}var yc=function(e){this.layoutVertexArray=new ap,this.indexArray=new Un,this.programConfigurations=e,this.segments=new J,this.dynamicLayoutVertexArray=new cu,this.opacityVertexArray=new Bo,this.placedSymbolArray=new c};yc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},yc.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ly.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,mp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,rl,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},dt("SymbolBuffers",yc);var Gf=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new J,this.collisionVertexArray=new Xs};Gf.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Wd.members,!0)},Gf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},dt("CollisionBuffers",Gf);var Vr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ro([]),this.placementViewportMatrix=ro([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Uf(this.zoom,t["text-size"]),this.iconSizeData=Uf(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return In[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Vr.prototype.createArrays=function(){this.text=new yc(new Ct(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new yc(new Ct(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new E,this.lineVertexArray=new C,this.symbolInstances=new w},Vr.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var v=Jp[e.charAt(d)];v&&(t[v.charCodeAt(0)]=!0)}},Vr.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),v=p.get("text-field"),k=p.get("icon-image"),A=(v.value.kind!=="constant"||v.value.value instanceof Ei&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),P=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,L=p.get("symbol-sort-key");if(this.features=[],A||P){for(var O=t.iconDependencies,U=t.glyphDependencies,X=t.availableImages,ie=new Yt(this.zoom),oe=0,de=e;oe<de.length;oe+=1){var ce=de[oe],be=ce.feature,Te=ce.id,Pe=ce.index,Me=ce.sourceLayerIndex,Ne=l._featureFilter.needGeometry,Ge=ri(be,Ne);if(l._featureFilter.filter(ie,Ge,i)){Ne||(Ge.geometry=gi(be));var We=void 0;if(A){var _t=l.getValueAndResolveTokens("text-field",Ge,i,X),nt=Ei.factory(_t);bp(nt)&&(this.hasRTLText=!0),(!this.hasRTLText||Hs()==="unavailable"||this.hasRTLText&&Oa.isParsed())&&(We=dh(nt,l,Ge))}var xt=void 0;if(P){var lt=l.getValueAndResolveTokens("icon-image",Ge,i,X);xt=lt instanceof si?lt:si.fromString(lt)}if(We||xt){var Ut=this.sortFeaturesByKey?L.evaluate(Ge,{},i):void 0;if(this.features.push({id:Te,text:We,icon:xt,index:Pe,sourceLayerIndex:Me,geometry:Ge.geometry,properties:be.properties,type:Eu[be.type],sortKey:Ut}),xt&&(O[xt.name]=!0),We){var Pt=d.evaluate(Ge,{},i).join(","),gt=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(In.vertical)>=0;for(var ir=0,Bt=We.sections;ir<Bt.length;ir+=1){var nr=Bt[ir];if(nr.image)O[nr.image.name]=!0;else{var Et=Al(We.toString()),Er=nr.fontStack||Pt,Nr=U[Er]=U[Er]||{};this.calculateGlyphDependencies(nr.text,Nr,gt,this.allowVerticalPlacement,Et)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(Ur){var _i={},Yr={},bi=[],Yi=0;function Si(Or){bi.push(Ur[Or]),Yi++}function ia(Or,Gi,zn){var or=Yr[Or];return delete Yr[Or],Yr[Gi]=or,bi[or].geometry[0].pop(),bi[or].geometry[0]=bi[or].geometry[0].concat(zn[0]),or}function an(Or,Gi,zn){var or=_i[Gi];return delete _i[Gi],_i[Or]=or,bi[or].geometry[0].shift(),bi[or].geometry[0]=zn[0].concat(bi[or].geometry[0]),or}function Gr(Or,Gi,zn){var or=zn?Gi[0][Gi[0].length-1]:Gi[0][0];return Or+":"+or.x+":"+or.y}for(var Kr=0;Kr<Ur.length;Kr++){var ii=Ur[Kr],Wt=ii.geometry,jr=ii.text?ii.text.toString():null;if(jr){var kr=Gr(jr,Wt),fr=Gr(jr,Wt,!0);if(kr in Yr&&fr in _i&&Yr[kr]!==_i[fr]){var qa=an(kr,fr,Wt),Tn=ia(kr,fr,bi[qa].geometry);delete _i[kr],delete Yr[fr],Yr[Gr(jr,bi[Tn].geometry,!0)]=Tn,bi[qa].geometry=null}else kr in Yr?ia(kr,fr,Wt):fr in _i?an(kr,fr,Wt):(Si(Kr),_i[kr]=Yi-1,Yr[fr]=Yi-1)}else Si(Kr)}return bi.filter(function(Or){return Or.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ur,_i){return Ur.sortKey-_i.sortKey})}},Vr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Vr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Vr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Vr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Vr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Vr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Vr.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},v=e.segment+1;v<t.length;v++)d[v]={x:t[v].x,y:t[v].y,tileUnitDistanceFromAnchor:l},v<t.length-1&&(l+=t[v+1].dist(t[v]));for(var k=e.segment||0;k>=0;k--)d[k]={x:t[k].x,y:t[k].y,tileUnitDistanceFromAnchor:p},k>0&&(p+=t[k-1].dist(t[k]));for(var A=0;A<t.length;A++){var P=d[A];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Vr.prototype.addSymbols=function(e,t,i,l,p,d,v,k,A,P,L,O){for(var U=e.indexArray,X=e.layoutVertexArray,ie=e.segments.prepareSegment(4*t.length,X,U,this.canOverlap?d.sortKey:void 0),oe=this.glyphOffsetArray.length,de=ie.vertexLength,ce=this.allowVerticalPlacement&&v===In.vertical?Math.PI/2:0,be=d.text&&d.text.sections,Te=0;Te<t.length;Te++){var Pe=t[Te],Me=Pe.tl,Ne=Pe.tr,Ge=Pe.bl,We=Pe.br,_t=Pe.tex,nt=Pe.pixelOffsetTL,xt=Pe.pixelOffsetBR,lt=Pe.minFontScaleX,Ut=Pe.minFontScaleY,Pt=Pe.glyphOffset,gt=Pe.isSDF,ir=Pe.sectionIndex,Bt=ie.vertexLength,nr=Pt[1];zs(X,k.x,k.y,Me.x,nr+Me.y,_t.x,_t.y,i,gt,nt.x,nt.y,lt,Ut),zs(X,k.x,k.y,Ne.x,nr+Ne.y,_t.x+_t.w,_t.y,i,gt,xt.x,nt.y,lt,Ut),zs(X,k.x,k.y,Ge.x,nr+Ge.y,_t.x,_t.y+_t.h,i,gt,nt.x,xt.y,lt,Ut),zs(X,k.x,k.y,We.x,nr+We.y,_t.x+_t.w,_t.y+_t.h,i,gt,xt.x,xt.y,lt,Ut),Hf(e.dynamicLayoutVertexArray,k,ce),U.emplaceBack(Bt,Bt+1,Bt+2),U.emplaceBack(Bt+1,Bt+2,Bt+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),Te!==t.length-1&&ir===t[Te+1].sectionIndex||e.programConfigurations.populatePaintArrays(X.length,d,d.index,{},O,be&&be[ir])}e.placedSymbolArray.emplaceBack(k.x,k.y,oe,this.glyphOffsetArray.length-oe,de,A,P,k.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],v,0,!1,0,L)},Vr.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},Vr.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,v){var k=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),A=k.vertexLength,P=p.layoutVertexArray,L=p.collisionVertexArray,O=v.anchorX,U=v.anchorY;this._addCollisionDebugVertex(P,L,d,O,U,new V(e,t)),this._addCollisionDebugVertex(P,L,d,O,U,new V(i,t)),this._addCollisionDebugVertex(P,L,d,O,U,new V(i,l)),this._addCollisionDebugVertex(P,L,d,O,U,new V(e,l)),k.vertexLength+=4;var X=p.indexArray;X.emplaceBack(A,A+1),X.emplaceBack(A+1,A+2),X.emplaceBack(A+2,A+3),X.emplaceBack(A+3,A),k.primitiveLength+=4},Vr.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Vr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Gf(nc,bg.members,rh),this.iconCollisionBox=new Gf(nc,bg.members,rh);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Vr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,v,k,A){for(var P={},L=t;L<i;L++){var O=e.get(L);P.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},P.textFeatureIndex=O.featureIndex;break}for(var U=l;U<p;U++){var X=e.get(U);P.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},P.verticalTextFeatureIndex=X.featureIndex;break}for(var ie=d;ie<v;ie++){var oe=e.get(ie);P.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},P.iconFeatureIndex=oe.featureIndex;break}for(var de=k;de<A;de++){var ce=e.get(de);P.verticalIconBox={x1:ce.x1,y1:ce.y1,x2:ce.x2,y2:ce.y2,anchorPointX:ce.anchorPointX,anchorPointY:ce.anchorPointY},P.verticalIconFeatureIndex=ce.featureIndex;break}return P},Vr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Vr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Vr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Vr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Vr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Vr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Vr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},Vr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var k=this.symbolInstances.get(v);l.push(0|Math.round(t*k.anchorX+i*k.anchorY)),p.push(k.featureIndex)}return d.sort(function(A,P){return l[A]-l[P]||p[P]-p[A]}),d},Vr.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Vr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,v,k){d>=0&&k.indexOf(d)===v&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},dt("SymbolBucket",Vr,{omit:["layers","collisionBoxArray","features","compareText"]}),Vr.MAX_GLYPHS=65535,Vr.addDynamicAttributes=Hf;var wh=new fn({"symbol-placement":new bt(G.layout_symbol["symbol-placement"]),"symbol-spacing":new bt(G.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bt(G.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ht(G.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bt(G.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bt(G.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bt(G.layout_symbol["icon-ignore-placement"]),"icon-optional":new bt(G.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bt(G.layout_symbol["icon-rotation-alignment"]),"icon-size":new ht(G.layout_symbol["icon-size"]),"icon-text-fit":new bt(G.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bt(G.layout_symbol["icon-text-fit-padding"]),"icon-image":new ht(G.layout_symbol["icon-image"]),"icon-rotate":new ht(G.layout_symbol["icon-rotate"]),"icon-padding":new bt(G.layout_symbol["icon-padding"]),"icon-keep-upright":new bt(G.layout_symbol["icon-keep-upright"]),"icon-offset":new ht(G.layout_symbol["icon-offset"]),"icon-anchor":new ht(G.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bt(G.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bt(G.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bt(G.layout_symbol["text-rotation-alignment"]),"text-field":new ht(G.layout_symbol["text-field"]),"text-font":new ht(G.layout_symbol["text-font"]),"text-size":new ht(G.layout_symbol["text-size"]),"text-max-width":new ht(G.layout_symbol["text-max-width"]),"text-line-height":new bt(G.layout_symbol["text-line-height"]),"text-letter-spacing":new ht(G.layout_symbol["text-letter-spacing"]),"text-justify":new ht(G.layout_symbol["text-justify"]),"text-radial-offset":new ht(G.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bt(G.layout_symbol["text-variable-anchor"]),"text-anchor":new ht(G.layout_symbol["text-anchor"]),"text-max-angle":new bt(G.layout_symbol["text-max-angle"]),"text-writing-mode":new bt(G.layout_symbol["text-writing-mode"]),"text-rotate":new ht(G.layout_symbol["text-rotate"]),"text-padding":new bt(G.layout_symbol["text-padding"]),"text-keep-upright":new bt(G.layout_symbol["text-keep-upright"]),"text-transform":new ht(G.layout_symbol["text-transform"]),"text-offset":new ht(G.layout_symbol["text-offset"]),"text-allow-overlap":new bt(G.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bt(G.layout_symbol["text-ignore-placement"]),"text-optional":new bt(G.layout_symbol["text-optional"])}),hm={paint:new fn({"icon-opacity":new ht(G.paint_symbol["icon-opacity"]),"icon-color":new ht(G.paint_symbol["icon-color"]),"icon-halo-color":new ht(G.paint_symbol["icon-halo-color"]),"icon-halo-width":new ht(G.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ht(G.paint_symbol["icon-halo-blur"]),"icon-translate":new bt(G.paint_symbol["icon-translate"]),"icon-translate-anchor":new bt(G.paint_symbol["icon-translate-anchor"]),"text-opacity":new ht(G.paint_symbol["text-opacity"]),"text-color":new ht(G.paint_symbol["text-color"],{runtimeType:Ye,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ht(G.paint_symbol["text-halo-color"]),"text-halo-width":new ht(G.paint_symbol["text-halo-width"]),"text-halo-blur":new ht(G.paint_symbol["text-halo-blur"]),"text-translate":new bt(G.paint_symbol["text-translate"]),"text-translate-anchor":new bt(G.paint_symbol["text-translate-anchor"])}),layout:wh},Eh=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:st,this.defaultValue=e};Eh.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Eh.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Eh.prototype.outputDefined=function(){return!1},Eh.prototype.serialize=function(){return null},dt("FormatSectionOverride",Eh,{omit:["defaultValue"]});var kh=function(e){function t(i){e.call(this,i,hm)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],v=0,k=p;v<k.length;v+=1){var A=k[v];d.indexOf(A)<0&&d.push(A)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var v=this.layout.get(i).evaluate(l,{},p,d),k=this._unevaluatedLayout._values[i];return k.isDataDriven()||fs(k.value)||!v?v:function(A,P){return P.replace(/{([^{}]+)}/g,function(L,O){return O in A?String(A[O]):""})}(l.properties,v)},t.prototype.createBucket=function(i){return new Vr(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=hm.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,v=this.paint.get(p),k=new Eh(v),A=new nu(k,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new Yu("source",A):new On("composite",A,v.value.zoomStops,v.value._interpolationType),this.paint._values[p]=new kn(v.property,d,v.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=hm.paint.properties[l],v=!1,k=function(L){for(var O=0,U=L;O<U.length;O+=1)if(d.overrides&&d.overrides.hasOverride(U[O]))return void(v=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Ei)k(p.value.value.sections);else if(p.value.kind==="source"){var A=function(L){v||(L instanceof Di&&ei(L.value)===$t?k(L.value.sections):L instanceof Pa?k(L.sections):L.eachChild(A))},P=p.value;P._styleExpression&&A(P._styleExpression.expression)}return v},t}(Sn),jy={paint:new fn({"background-color":new bt(G.paint_background["background-color"]),"background-pattern":new Vn(G.paint_background["background-pattern"]),"background-opacity":new bt(G.paint_background["background-opacity"])})},xp=function(e){function t(i){e.call(this,i,jy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Sn),Eg={paint:new fn({"raster-opacity":new bt(G.paint_raster["raster-opacity"]),"raster-hue-rotate":new bt(G.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bt(G.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bt(G.paint_raster["raster-brightness-max"]),"raster-saturation":new bt(G.paint_raster["raster-saturation"]),"raster-contrast":new bt(G.paint_raster["raster-contrast"]),"raster-resampling":new bt(G.paint_raster["raster-resampling"]),"raster-fade-duration":new bt(G.paint_raster["raster-fade-duration"])})},kg=function(e){function t(i){e.call(this,i,Eg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Sn),qy=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(Sn),Sh={circle:Fo,heatmap:nh,hillshade:fu,fill:Cy,"fill-extrusion":bu,line:el,symbol:kh,background:xp,raster:kg},gc=F.HTMLImageElement,Zy=F.HTMLCanvasElement,pm=F.HTMLVideoElement,vc=F.ImageData,jo=F.ImageBitmap,_c=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};_c.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),v=this.context,k=v.gl;if(this.useMipmap=!!(t&&t.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof gc||e instanceof Zy||e instanceof pm||e instanceof vc||jo&&e instanceof jo?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,e):k.texImage2D(k.TEXTURE_2D,0,this.format,l,p,0,this.format,k.UNSIGNED_BYTE,e.data);else{var A=i||{x:0,y:0},P=A.x,L=A.y;e instanceof gc||e instanceof Zy||e instanceof pm||e instanceof vc||jo&&e instanceof jo?k.texSubImage2D(k.TEXTURE_2D,0,P,L,k.RGBA,k.UNSIGNED_BYTE,e):k.texSubImage2D(k.TEXTURE_2D,0,P,L,l,p,k.RGBA,k.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)},_c.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},_c.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},_c.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var wp=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};wp.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},wp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var bc=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},zr(["receive","process"],this),this.invoker=new wp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Fr()?e:F};function fm(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}bc.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var k=dr(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:yo(t,k)},k),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},bc.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else Fr()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},bc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},bc.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(Fn(t.error)):l(null,Fn(t.data)))}else{var p=!1,d=dr(this.globalScope)?void 0:[],v=t.hasCallback?function(L,O){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:L?yo(L):null,data:yo(O,d)},d)}:function(L){p=!0},k=null,A=Fn(t.data);if(this.parent[t.type])k=this.parent[t.type](t.sourceMapId,A,v);else if(this.parent.getWorkerSource){var P=t.type.split(".");k=this.parent.getWorkerSource(t.sourceMapId,P[0],A.source)[P[1]](A,v)}else v(new Error("Could not find function "+t.type));!p&&k&&k.cancel&&(this.cancelCallbacks[e]=k.cancel)}},bc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var vi=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};vi.prototype.setNorthEast=function(e){return this._ne=e instanceof mi?new mi(e.lng,e.lat):mi.convert(e),this},vi.prototype.setSouthWest=function(e){return this._sw=e instanceof mi?new mi(e.lng,e.lat):mi.convert(e),this},vi.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof mi)t=e,i=e;else{if(!(e instanceof vi))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(vi.convert(e)):this.extend(mi.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new mi(t.lng,t.lat),this._ne=new mi(i.lng,i.lat)),this},vi.prototype.getCenter=function(){return new mi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},vi.prototype.getSouthWest=function(){return this._sw},vi.prototype.getNorthEast=function(){return this._ne},vi.prototype.getNorthWest=function(){return new mi(this.getWest(),this.getNorth())},vi.prototype.getSouthEast=function(){return new mi(this.getEast(),this.getSouth())},vi.prototype.getWest=function(){return this._sw.lng},vi.prototype.getSouth=function(){return this._sw.lat},vi.prototype.getEast=function(){return this._ne.lng},vi.prototype.getNorth=function(){return this._ne.lat},vi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},vi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},vi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},vi.prototype.contains=function(e){var t=mi.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},vi.convert=function(e){return!e||e instanceof vi?e:new vi(e)};var mi=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};mi.prototype.wrap=function(){return new mi(Oe(this.lng,-180,180),this.lat)},mi.prototype.toArray=function(){return[this.lng,this.lat]},mi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},mi.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},mi.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new vi(new mi(this.lng-i,this.lat-t),new mi(this.lng+i,this.lat+t))},mi.convert=function(e){if(e instanceof mi)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new mi(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new mi(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var dm=2*Math.PI*63710088e-1;function qo(e){return dm*Math.cos(e*Math.PI/180)}function Ul(e){return(180+e)/360}function Cs(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function il(e,t){return e/qo(t)}function Kf(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var As=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};As.fromLngLat=function(e,t){t===void 0&&(t=0);var i=mi.convert(e);return new As(Ul(i.lng),Cs(i.lat),il(t,i.lat))},As.prototype.toLngLat=function(){return new mi(360*this.x-180,Kf(this.y))},As.prototype.toAltitude=function(){return this.z*qo(Kf(this.y))},As.prototype.meterInMercatorCoordinateUnits=function(){return 1/dm*(e=Kf(this.y),1/Math.cos(e*Math.PI/180));var e};var ku=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=nl(0,e,e,t,i)};ku.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},ku.prototype.url=function(e,t){var i,l,p,d,v,k=(l=this.y,p=this.z,d=fm(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),v=fm(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+v[0]+","+v[1]),A=function(P,L,O){for(var U,X="",ie=P;ie>0;ie--)X+=(L&(U=1<<ie-1)?1:0)+(O&U?2:0);return X}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",A).replace("{bbox-epsg-3857}",k)},ku.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new V(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},ku.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Sg=function(e,t){this.wrap=e,this.canonical=t,this.key=nl(e,t.z,t.z,t.x,t.y)},Hi=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new ku(i,+l,+p),this.key=nl(t,e,i,l,p)};function nl(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}Hi.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Hi.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Hi(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hi(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Hi.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?nl(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):nl(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Hi.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Hi.prototype.children=function(e){if(this.overscaledZ>=e)return[new Hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new Hi(t,this.wrap,t,i,l),new Hi(t,this.wrap,t,i+1,l),new Hi(t,this.wrap,t,i,l+1),new Hi(t,this.wrap,t,i+1,l+1)]},Hi.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Hi.prototype.wrapped=function(){return new Hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Hi.prototype.unwrapTo=function(e){return new Hi(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Hi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Hi.prototype.toUnwrapped=function(){return new Sg(this.wrap,this.canonical)},Hi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Hi.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new As(e.x-this.wrap,e.y))},dt("CanonicalTileID",ku),dt("OverscaledTileID",Hi,{omit:["posMatrix"]});var Su=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Ot('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};Su.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},Su.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Su.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Su.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Su.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Su.prototype.getPixels=function(){return new nn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Su.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var k=-t*this.dim,A=-i*this.dim,P=d;P<v;P++)for(var L=l;L<p;L++)this.data[this._idx(L,P)]=e.data[this._idx(L+k,P+A)]},dt("DEMData",Su);var ef=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};ef.prototype.encode=function(e){return this._stringToNumber[e]},ef.prototype.decode=function(e){return this._numberToString[e]};var jl=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Xf={geometry:{configurable:!0}};Xf.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xf.geometry.set=function(e){this._geometry=e},jl.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(jl.prototype,Xf);var al=function(){this.state={},this.stateChanges={},this.deletedStates={}};al.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},je(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][v]===null&&delete this.deletedStates[e][l][v]},al.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},al.prototype.getState=function(e,t){var i=String(t),l=je({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},al.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},al.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),je(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var k={};if(this.deletedStates[v]===null)for(var A in this.state[v])k[A]={},this.state[v][A]={};else for(var P in this.deletedStates[v]){if(this.deletedStates[v][P]===null)this.state[v][P]={};else for(var L=0,O=Object.keys(this.deletedStates[v][P]);L<O.length;L+=1)delete this.state[v][P][O[L]];k[P]=this.state[v][P]}i[v]=i[v]||{},je(i[v],k)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var U in e)e[U].setFeatureState(i,t)};var Iu=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ca(8192,16,0),this.grid3D=new ca(8192,16,0),this.featureIndexArray=new N,this.promoteId=t};function mm(e,t,i,l,p){return sr(e,function(d,v){var k=t instanceof tp?t.get(v):null;return k&&k.evaluate?k.evaluate(i,l,p):k})}function Ih(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,v=e;d<v.length;d+=1){var k=v[d];t=Math.min(t,k.x),i=Math.min(i,k.y),l=Math.max(l,k.x),p=Math.max(p,k.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Ig(e,t){return t-e}Iu.prototype.insert=function(e,t,i,l,p,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var k=d?this.grid3D:this.grid,A=0;A<t.length;A++){for(var P=t[A],L=[1/0,1/0,-1/0,-1/0],O=0;O<P.length;O++){var U=P[O];L[0]=Math.min(L[0],U.x),L[1]=Math.min(L[1],U.y),L[2]=Math.max(L[2],U.x),L[3]=Math.max(L[3],U.y)}L[0]<8192&&L[1]<8192&&L[2]>=0&&L[3]>=0&&k.insert(v,L[0],L[1],L[2],L[3])}},Iu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Es.VectorTile(new Yp(this.rawTileData)).layers,this.sourceLayerCoder=new ef(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Iu.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,k=Jc(d.filter),A=e.queryGeometry,P=e.queryPadding*v,L=Ih(A),O=this.grid.query(L.minX-P,L.minY-P,L.maxX+P,L.maxY+P),U=Ih(e.cameraQueryGeometry),X=this.grid3D.query(U.minX-P,U.minY-P,U.maxX+P,U.maxY+P,function(Pe,Me,Ne,Ge){return function(We,_t,nt,xt,lt){for(var Ut=0,Pt=We;Ut<Pt.length;Ut+=1){var gt=Pt[Ut];if(_t<=gt.x&&nt<=gt.y&&xt>=gt.x&&lt>=gt.y)return!0}var ir=[new V(_t,nt),new V(_t,lt),new V(xt,lt),new V(xt,nt)];if(We.length>2){for(var Bt=0,nr=ir;Bt<nr.length;Bt+=1)if(mn(We,nr[Bt]))return!0}for(var Et=0;Et<We.length-1;Et++)if(ac(We[Et],We[Et+1],ir))return!0;return!1}(e.cameraQueryGeometry,Pe-P,Me-P,Ne+P,Ge+P)}),ie=0,oe=X;ie<oe.length;ie+=1)O.push(oe[ie]);O.sort(Ig);for(var de,ce={},be=function(Pe){var Me=O[Pe];if(Me!==de){de=Me;var Ne=p.featureIndexArray.get(Me),Ge=null;p.loadMatchingFeature(ce,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,k,d.layers,d.availableImages,t,i,l,function(We,_t,nt){return Ge||(Ge=gi(We)),_t.queryIntersectsFeature(A,We,nt,Ge,p.z,e.transform,v,e.pixelPosMatrix)})}},Te=0;Te<O.length;Te++)be(Te);return ce},Iu.prototype.loadMatchingFeature=function(e,t,i,l,p,d,v,k,A,P,L){var O=this.bucketLayerIDs[t];if(!d||function(We,_t){for(var nt=0;nt<We.length;nt++)if(_t.indexOf(We[nt])>=0)return!0;return!1}(d,O)){var U=this.sourceLayerCoder.decode(i),X=this.vtLayers[U].feature(l);if(p.needGeometry){var ie=ri(X,!0);if(!p.filter(new Yt(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!p.filter(new Yt(this.tileID.overscaledZ),X))return;for(var oe=this.getId(X,U),de=0;de<O.length;de++){var ce=O[de];if(!(d&&d.indexOf(ce)<0)){var be=k[ce];if(be){var Te={};oe!==void 0&&P&&(Te=P.getState(be.sourceLayer||"_geojsonTileLayer",oe));var Pe=je({},A[ce]);Pe.paint=mm(Pe.paint,be.paint,X,Te,v),Pe.layout=mm(Pe.layout,be.layout,X,Te,v);var Me=!L||L(X,be,Te);if(Me){var Ne=new jl(X,this.z,this.x,this.y,oe);Ne.layer=Pe;var Ge=e[ce];Ge===void 0&&(Ge=e[ce]=[]),Ge.push({featureIndex:l,feature:Ne,intersectionZ:Me})}}}}}},Iu.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,v,k){var A={};this.loadVTLayers();for(var P=Jc(p),L=0,O=e;L<O.length;L+=1)this.loadMatchingFeature(A,i,l,O[L],P,d,v,k,t);return A},Iu.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},Iu.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},dt("FeatureIndex",Iu,{omit:["rawTileData","sourceLayerCoder"]});var yn=function(e,t){this.tileID=e,this.uid=Mt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};yn.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<za.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},yn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},yn.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(P,L){var O={};if(!L)return O;for(var U=function(){var oe=ie[X],de=oe.layerIds.map(function(Te){return L.getLayer(Te)}).filter(Boolean);if(de.length!==0){oe.layers=de,oe.stateDependentLayerIds&&(oe.stateDependentLayers=oe.stateDependentLayerIds.map(function(Te){return de.filter(function(Pe){return Pe.id===Te})[0]}));for(var ce=0,be=de;ce<be.length;ce+=1)O[be[ce].id]=oe}},X=0,ie=P;X<ie.length;X+=1)U();return O}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof Vr){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof Vr&&v.hasRTLText){this.hasRTLText=!0,Oa.isLoading()||Oa.isLoaded()||Hs()!=="deferred"||Lo();break}}for(var k in this.queryPadding=0,this.buckets){var A=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(k).queryRadius(A))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},yn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},yn.prototype.getBucket=function(e){return this.buckets[e.id]},yn.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _c(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _c(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},yn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},yn.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,v,k,A,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:P,transform:k,params:v,queryPadding:this.queryPadding*A},e,t,i):{}},yn.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var v=Jc(t&&t.filter),k=this.tileID.canonical,A=k.z,P=k.x,L=k.y,O={z:A,x:P,y:L},U=0;U<d.length;U++){var X=d.feature(U);if(v.needGeometry){var ie=ri(X,!0);if(!v.filter(new Yt(this.tileID.overscaledZ),ie,this.tileID.canonical))continue}else if(!v.filter(new Yt(this.tileID.overscaledZ),X))continue;var oe=i.getId(X,p),de=new jl(X,A,P,L,oe);de.tile=O,e.push(de)}}},yn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},yn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},yn.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=Qr(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},yn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},yn.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],k=e[d];if(v&&k&&Object.keys(k).length!==0){p.update(k,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var A=t&&t.style&&t.style.getLayer(l);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(p)))}}}},yn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},yn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<za.now()},yn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},yn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=za.now()+e},yn.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},yn.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,v=t;d<v.length;d+=1)if(p[v[d]])return!0}}return!1};var Tu=F.performance,xc=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Tu.mark(this._marks.start)};xc.prototype.finish=function(){Tu.mark(this._marks.end);var e=Tu.getEntriesByName(this._marks.measure);return e.length===0&&(Tu.measure(this._marks.measure,this._marks.start,this._marks.end),e=Tu.getEntriesByName(this._marks.measure),Tu.clearMarks(this._marks.start),Tu.clearMarks(this._marks.end),Tu.clearMeasures(this._marks.measure)),e},o.Actor=bc,o.AlphaImage=sc,o.CanonicalTileID=ku,o.CollisionBoxArray=s,o.Color=ur,o.DEMData=Su,o.DataConstantProperty=bt,o.DictionaryCoder=ef,o.EXTENT=8192,o.ErrorEvent=me,o.EvaluationParameters=Yt,o.Event=le,o.Evented=ye,o.FeatureIndex=Iu,o.FillBucket=ws,o.FillExtrusionBucket=ks,o.ImageAtlas=gp,o.ImagePosition=Nl,o.LineBucket=ra,o.LngLat=mi,o.LngLatBounds=vi,o.MercatorCoordinate=As,o.ONE_EM=24,o.OverscaledTileID=Hi,o.Point=V,o.Point$1=V,o.Properties=fn,o.Protobuf=Yp,o.RGBAImage=nn,o.RequestManager=Ni,o.RequestPerformance=xc,o.ResourceType=as,o.SegmentVector=J,o.SourceFeatureState=al,o.StructArrayLayout1ui2=op,o.StructArrayLayout2f1f2i16=Pl,o.StructArrayLayout2i4=ic,o.StructArrayLayout3ui6=Un,o.StructArrayLayout4i8=np,o.SymbolBucket=Vr,o.Texture=_c,o.Tile=yn,o.Transitionable=ci,o.Uniform1f=Ke,o.Uniform1i=Ze,o.Uniform2f=Xe,o.Uniform3f=it,o.Uniform4f=mt,o.UniformColor=vt,o.UniformMatrix4f=ar,o.UnwrappedTileID=Sg,o.ValidationError=te,o.WritingMode=In,o.ZoomHistory=th,o.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},o.addDynamicAttributes=Hf,o.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(v,k){t(v,function(A,P){A&&(d=A),p[k]=P,--l==0&&i(d,p)})})},o.bezier=ue,o.bindAll=zr,o.browser=za,o.cacheEntryPossiblyAdded=function(e){++uo>Os&&(e.getActor().send("enforceCacheSizeLimit",Ln),uo=0)},o.clamp=Se,o.clearTileCache=function(e){var t=F.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},o.clipLine=om,o.clone=function(e){var t=new cr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.clone$1=Tt,o.clone$2=function(e){var t=new cr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.collisionCircleLayout=Ry,o.config=hr,o.create=function(){var e=new cr(16);return cr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},o.create$1=function(){var e=new cr(9);return cr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},o.create$2=function(){var e=new cr(4);return cr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},o.createCommonjsModule=T,o.createExpression=Kh,o.createLayout=Ai,o.createStyleLayer=function(e){return e.type==="custom"?new qy(e):new Sh[e.type](e)},o.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=i[0],k=i[1],A=i[2];return e[0]=p*A-d*k,e[1]=d*v-l*A,e[2]=l*k-p*v,e},o.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.ease=De,o.emitValidationErrors=tc,o.endsWith=Cr,o.enforceCacheSizeLimit=function(e){lo(),Pr&&Pr.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},o.evaluateSizeForFeature=hc,o.evaluateSizeForZoom=pc,o.evaluateVariableOffset=dc,o.evented=ep,o.extend=je,o.featureFilter=Jc,o.filterObject=St,o.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.getAnchorAlignment=rm,o.getAnchorJustification=um,o.getArrayBuffer=Ka,o.getImage=q,o.getJSON=function(e,t){return Kn(je(e,{type:"json"}),t)},o.getRTLTextPluginStatus=Hs,o.getReferrer=Aa,o.getVideo=function(e,t){var i,l,p=F.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var v=F.document.createElement("source");i=e[d],l=void 0,(l=F.document.createElement("a")).href=i,(l.protocol!==F.document.location.protocol||l.host!==F.document.location.host)&&(p.crossOrigin="Anonymous"),v.src=e[d],p.appendChild(v)}return{cancel:function(){}}},o.identity=ro,o.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],v=t[4],k=t[5],A=t[6],P=t[7],L=t[8],O=t[9],U=t[10],X=t[11],ie=t[12],oe=t[13],de=t[14],ce=t[15],be=i*k-l*v,Te=i*A-p*v,Pe=i*P-d*v,Me=l*A-p*k,Ne=l*P-d*k,Ge=p*P-d*A,We=L*oe-O*ie,_t=L*de-U*ie,nt=L*ce-X*ie,xt=O*de-U*oe,lt=O*ce-X*oe,Ut=U*ce-X*de,Pt=be*Ut-Te*lt+Pe*xt+Me*nt-Ne*_t+Ge*We;return Pt?(e[0]=(k*Ut-A*lt+P*xt)*(Pt=1/Pt),e[1]=(p*lt-l*Ut-d*xt)*Pt,e[2]=(oe*Ge-de*Ne+ce*Me)*Pt,e[3]=(U*Ne-O*Ge-X*Me)*Pt,e[4]=(A*nt-v*Ut-P*_t)*Pt,e[5]=(i*Ut-p*nt+d*_t)*Pt,e[6]=(de*Pe-ie*Ge-ce*Te)*Pt,e[7]=(L*Ge-U*Pe+X*Te)*Pt,e[8]=(v*lt-k*nt+P*We)*Pt,e[9]=(l*nt-i*lt-d*We)*Pt,e[10]=(ie*Ne-oe*Pe+ce*be)*Pt,e[11]=(O*Pe-L*Ne-X*be)*Pt,e[12]=(k*_t-v*xt-A*We)*Pt,e[13]=(i*xt-l*_t+p*We)*Pt,e[14]=(oe*Te-ie*Me-de*be)*Pt,e[15]=(L*Me-O*Te+U*be)*Pt,e):null},o.isChar=$e,o.isMapboxURL=pr,o.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},o.makeRequest=Kn,o.mapObject=sr,o.mercatorXfromLng=Ul,o.mercatorYfromLat=Cs,o.mercatorZfromAltitude=il,o.mul=Rf,o.multiply=ea,o.mvt=Es,o.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},o.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},o.number=ki,o.offscreenCanvasSupported=zo,o.ortho=function(e,t,i,l,p,d,v){var k=1/(t-i),A=1/(l-p),P=1/(d-v);return e[0]=-2*k,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*P,e[11]=0,e[12]=(t+i)*k,e[13]=(p+l)*A,e[14]=(v+d)*P,e[15]=1,e},o.parseGlyphPBF=function(e){return new Yp(e).readFields(yp,[])},o.pbf=Yp,o.performSymbolLayout=function(e,t,i,l,p,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var k=e.layers[0].layout,A=e.layers[0]._unevaluatedLayout._values,P={};if(e.textSizeData.kind==="composite"){var L=e.textSizeData,O=L.maxZoom;P.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Yt(L.minZoom),v),A["text-size"].possiblyEvaluate(new Yt(O),v)]}if(e.iconSizeData.kind==="composite"){var U=e.iconSizeData,X=U.maxZoom;P.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Yt(U.minZoom),v),A["icon-size"].possiblyEvaluate(new Yt(X),v)]}P.layoutTextSize=A["text-size"].possiblyEvaluate(new Yt(e.zoom+1),v),P.layoutIconSize=A["icon-size"].possiblyEvaluate(new Yt(e.zoom+1),v),P.textMaxSize=A["text-size"].possiblyEvaluate(new Yt(18));for(var ie=24*k.get("text-line-height"),oe=k.get("text-rotation-alignment")==="map"&&k.get("symbol-placement")!=="point",de=k.get("text-keep-upright"),ce=k.get("text-size"),be=function(){var Me=Pe[Te],Ne=k.get("text-font").evaluate(Me,{},v).join(","),Ge=ce.evaluate(Me,{},v),We=P.layoutTextSize.evaluate(Me,{},v),_t=P.layoutIconSize.evaluate(Me,{},v),nt={horizontal:{},vertical:void 0},xt=Me.text,lt=[0,0];if(xt){var Ut=xt.toString(),Pt=24*k.get("text-letter-spacing").evaluate(Me,{},v),gt=function(Wt){for(var jr=0,kr=Wt;jr<kr.length;jr+=1)if(fr=kr[jr].charCodeAt(0),$e.Arabic(fr)||$e["Arabic Supplement"](fr)||$e["Arabic Extended-A"](fr)||$e["Arabic Presentation Forms-A"](fr)||$e["Arabic Presentation Forms-B"](fr))return!1;var fr;return!0}(Ut)?Pt:0,ir=k.get("text-anchor").evaluate(Me,{},v),Bt=k.get("text-variable-anchor");if(!Bt){var nr=k.get("text-radial-offset").evaluate(Me,{},v);lt=nr?dc(ir,[24*nr,Zf]):k.get("text-offset").evaluate(Me,{},v).map(function(Wt){return 24*Wt})}var Et=oe?"center":k.get("text-justify").evaluate(Me,{},v),Er=k.get("symbol-placement"),Nr=Er==="point"?24*k.get("text-max-width").evaluate(Me,{},v):0,Ur=function(){e.allowVerticalPlacement&&Al(Ut)&&(nt.vertical=Eo(xt,t,i,p,Ne,Nr,ie,ir,"left",gt,lt,In.vertical,!0,Er,We,Ge))};if(!oe&&Bt){for(var _i=Et==="auto"?Bt.map(function(Wt){return um(Wt)}):[Et],Yr=!1,bi=0;bi<_i.length;bi++){var Yi=_i[bi];if(!nt.horizontal[Yi])if(Yr)nt.horizontal[Yi]=nt.horizontal[0];else{var Si=Eo(xt,t,i,p,Ne,Nr,ie,"center",Yi,gt,lt,In.horizontal,!1,Er,We,Ge);Si&&(nt.horizontal[Yi]=Si,Yr=Si.positionedLines.length===1)}}Ur()}else{Et==="auto"&&(Et=um(ir));var ia=Eo(xt,t,i,p,Ne,Nr,ie,ir,Et,gt,lt,In.horizontal,!1,Er,We,Ge);ia&&(nt.horizontal[Et]=ia),Ur(),Al(Ut)&&oe&&de&&(nt.vertical=Eo(xt,t,i,p,Ne,Nr,ie,ir,Et,gt,lt,In.vertical,!1,Er,We,Ge))}}var an=void 0,Gr=!1;if(Me.icon&&Me.icon.name){var Kr=l[Me.icon.name];Kr&&(an=function(Wt,jr,kr){var fr=rm(kr),qa=jr[0]-Wt.displaySize[0]*fr.horizontalAlign,Tn=jr[1]-Wt.displaySize[1]*fr.verticalAlign;return{image:Wt,top:Tn,bottom:Tn+Wt.displaySize[1],left:qa,right:qa+Wt.displaySize[0]}}(p[Me.icon.name],k.get("icon-offset").evaluate(Me,{},v),k.get("icon-anchor").evaluate(Me,{},v)),Gr=Kr.sdf,e.sdfIcons===void 0?e.sdfIcons=Kr.sdf:e.sdfIcons!==Kr.sdf&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Kr.pixelRatio!==e.pixelRatio||k.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var ii=mc(nt.horizontal)||nt.vertical;e.iconsInText=!!ii&&ii.iconsInText,(ii||an)&&function(Wt,jr,kr,fr,qa,Tn,Or,Gi,zn,or,ol){var on=Tn.textMaxSize.evaluate(jr,{});on===void 0&&(on=Or);var Cn,Xr=Wt.layers[0].layout,sl=Xr.get("icon-offset").evaluate(jr,{},ol),ba=mc(kr.horizontal),wc=Or/24,Ep=Wt.tilePixelRatio*wc,Th=Wt.tilePixelRatio*on/24,ao=Wt.tilePixelRatio*Gi,kp=Wt.tilePixelRatio*Xr.get("symbol-spacing"),tf=Xr.get("text-padding")*Wt.tilePixelRatio,Ps=Xr.get("icon-padding")*Wt.tilePixelRatio,Sp=Xr.get("text-max-angle")/180*Math.PI,Ms=Xr.get("text-rotation-alignment")==="map"&&Xr.get("symbol-placement")!=="point",Io=Xr.get("icon-rotation-alignment")==="map"&&Xr.get("symbol-placement")!=="point",xa=Xr.get("symbol-placement"),Ip=kp/2,ll=Xr.get("icon-text-fit");fr&&ll!=="none"&&(Wt.allowVerticalPlacement&&kr.vertical&&(Cn=cc(fr,kr.vertical,ll,Xr.get("icon-text-fit-padding"),sl,wc)),ba&&(fr=cc(fr,ba,ll,Xr.get("icon-text-fit-padding"),sl,wc)));var ql=function(Cu,Ap){Ap.x<0||Ap.x>=8192||Ap.y<0||Ap.y>=8192||function(hi,Go,Lv,Au,Pu,Hy,of,Za,Qf,Pp,Kl,Xl,ym,gm,cl,hl,vm,sf,$f,_m,Hn,ed,bm,Vi,Mu){var Ls,so,Ch,pl,Ic,lf=hi.addToLineVertexArray(Go,Lv),xm=0,Tc=0,Gy=0,wm=0,Du=-1,td=-1,wa={},Rs=ae(""),fl=0,rd=0;if(Za._unevaluatedLayout.getValue("text-radial-offset")===void 0?(fl=(Ls=Za.layout.get("text-offset").evaluate(Hn,{},Vi).map(function(Rp){return 24*Rp}))[0],rd=Ls[1]):(fl=24*Za.layout.get("text-radial-offset").evaluate(Hn,{},Vi),rd=Zf),hi.allowVerticalPlacement&&Au.vertical){var Ah=Za.layout.get("text-rotate").evaluate(Hn,{},Vi)+90;pl=new ko(Qf,Go,Pp,Kl,Xl,Au.vertical,ym,gm,cl,Ah),of&&(Ic=new ko(Qf,Go,Pp,Kl,Xl,of,vm,sf,cl,Ah))}if(Pu){var uf=Za.layout.get("icon-rotate").evaluate(Hn,{}),Tg=Za.layout.get("icon-text-fit")!=="none",Em=xh(Pu,uf,bm,Tg),Lu=of?xh(of,uf,bm,Tg):void 0;Ch=new ko(Qf,Go,Pp,Kl,Xl,Pu,vm,sf,!1,uf),xm=4*Em.length;var Ky=hi.iconSizeData,Mp=null;Ky.kind==="source"?(Mp=[128*Za.layout.get("icon-size").evaluate(Hn,{})])[0]>32640&&Ot(hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Ky.kind==="composite"&&((Mp=[128*ed.compositeIconSizes[0].evaluate(Hn,{},Vi),128*ed.compositeIconSizes[1].evaluate(Hn,{},Vi)])[0]>32640||Mp[1]>32640)&&Ot(hi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),hi.addSymbols(hi.icon,Em,Mp,_m,$f,Hn,!1,Go,lf.lineStartIndex,lf.lineLength,-1,Vi),Du=hi.icon.placedSymbolArray.length-1,Lu&&(Tc=4*Lu.length,hi.addSymbols(hi.icon,Lu,Mp,_m,$f,Hn,In.vertical,Go,lf.lineStartIndex,lf.lineLength,-1,Vi),td=hi.icon.placedSymbolArray.length-1)}for(var zc in Au.horizontal){var cf=Au.horizontal[zc];if(!so){Rs=ae(cf.text);var Dp=Za.layout.get("text-rotate").evaluate(Hn,{},Vi);so=new ko(Qf,Go,Pp,Kl,Xl,cf,ym,gm,cl,Dp)}var Xy=cf.positionedLines.length===1;if(Gy+=cm(hi,Go,cf,Hy,Za,cl,Hn,hl,lf,Au.vertical?In.horizontal:In.horizontalOnly,Xy?Object.keys(Au.horizontal):[zc],wa,Du,ed,Vi),Xy)break}Au.vertical&&(wm+=cm(hi,Go,Au.vertical,Hy,Za,cl,Hn,hl,lf,In.vertical,["vertical"],wa,td,ed,Vi));var Wy=so?so.boxStartIndex:hi.collisionBoxArray.length,Ru=so?so.boxEndIndex:hi.collisionBoxArray.length,dl=pl?pl.boxStartIndex:hi.collisionBoxArray.length,Bu=pl?pl.boxEndIndex:hi.collisionBoxArray.length,Jy=Ch?Ch.boxStartIndex:hi.collisionBoxArray.length,Lp=Ch?Ch.boxEndIndex:hi.collisionBoxArray.length,km=Ic?Ic.boxStartIndex:hi.collisionBoxArray.length,Rv=Ic?Ic.boxEndIndex:hi.collisionBoxArray.length,ml=-1,Wl=function(Rp,Cc){return Rp&&Rp.circleDiameter?Math.max(Rp.circleDiameter,Cc):Cc};ml=Wl(so,ml),ml=Wl(pl,ml),ml=Wl(Ch,ml);var Yy=(ml=Wl(Ic,ml))>-1?1:0;Yy&&(ml*=Mu/24),hi.glyphOffsetArray.length>=Vr.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Hn.sortKey!==void 0&&hi.addToSortKeyRanges(hi.symbolInstances.length,Hn.sortKey),hi.symbolInstances.emplaceBack(Go.x,Go.y,wa.right>=0?wa.right:-1,wa.center>=0?wa.center:-1,wa.left>=0?wa.left:-1,wa.vertical||-1,Du,td,Rs,Wy,Ru,dl,Bu,Jy,Lp,km,Rv,Pp,Gy,wm,xm,Tc,Yy,0,ym,fl,rd,ml)}(Wt,Ap,Cu,kr,fr,qa,Cn,Wt.layers[0],Wt.collisionBoxArray,jr.index,jr.sourceLayerIndex,Wt.index,Ep,tf,Ms,zn,ao,Ps,Io,sl,jr,Tn,or,ol,Or)};if(xa==="line")for(var rf=0,nf=om(jr.geometry,0,0,8192,8192);rf<nf.length;rf+=1)for(var Zl=nf[rf],af=0,Tp=am(Zl,kp,Sp,kr.vertical||ba,fr,24,Th,Wt.overscaling,8192);af<Tp.length;af+=1){var Hl=Tp[af];ba&&Uy(Wt,ba.text,Ip,Hl)||ql(Zl,Hl)}else if(xa==="line-center")for(var zp=0,Zo=jr.geometry;zp<Zo.length;zp+=1){var oo=Zo[zp];if(oo.length>1){var Ds=jf(oo,Sp,kr.vertical||ba,fr,24,Th);Ds&&ql(oo,Ds)}}else if(jr.type==="Polygon")for(var zh=0,zu=xs(jr.geometry,0);zh<zu.length;zh+=1){var Ec=zu[zh],Wf=_p(Ec,16);ql(Ec[0],new vp(Wf.x,Wf.y,0))}else if(jr.type==="LineString")for(var kc=0,ul=jr.geometry;kc<ul.length;kc+=1){var Cp=ul[kc];ql(Cp,new vp(Cp[0].x,Cp[0].y,0))}else if(jr.type==="Point")for(var Jf=0,Sc=jr.geometry;Jf<Sc.length;Jf+=1)for(var Yf=0,Gl=Sc[Jf];Yf<Gl.length;Yf+=1){var Ho=Gl[Yf];ql([Ho],new vp(Ho.x,Ho.y,0))}}(e,Me,nt,an,l,P,We,_t,lt,Gr,v)},Te=0,Pe=e.features;Te<Pe.length;Te+=1)be();d&&e.generateCollisionDebugBuffers()},o.perspective=function(e,t,i,l,p){var d,v=1/Math.tan(t/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},o.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},o.plugin=Oa,o.polygonIntersectsPolygon=Oo,o.postMapLoadEvent=To,o.postTurnstileEvent=Dn,o.potpack=em,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=dt,o.registerForPluginStateChange=function(e){return e({pluginStatus:fa,pluginURL:Ba}),ep.on("pluginStateChange",e),e},o.renderColorRamp=Zd,o.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],k=Math.sin(i),A=Math.cos(i);return e[0]=l*A+d*k,e[1]=p*A+v*k,e[2]=l*-k+d*A,e[3]=p*-k+v*A,e},o.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],v=t[5],k=t[6],A=t[7],P=t[8],L=t[9],O=t[10],U=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+P*l,e[5]=v*p+L*l,e[6]=k*p+O*l,e[7]=A*p+U*l,e[8]=P*p-d*l,e[9]=L*p-v*l,e[10]=O*p-k*l,e[11]=U*p-A*l,e},o.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],v=t[1],k=t[2],A=t[3],P=t[4],L=t[5],O=t[6],U=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+P*l,e[1]=v*p+L*l,e[2]=k*p+O*l,e[3]=A*p+U*l,e[4]=P*p-d*l,e[5]=L*p-v*l,e[6]=O*p-k*l,e[7]=U*p-A*l,e},o.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},o.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},o.setCacheLimits=function(e,t){Ln=e,Os=t},o.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),fa==="deferred"||fa==="loading"||fa==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ba=za.resolveURL(e),fa="deferred",go=t,$h(),i||Lo()},o.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},o.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},o.styleSpec=G,o.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},o.symbolSize=wg,o.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},o.transformMat4=bo,o.translate=function(e,t,i){var l,p,d,v,k,A,P,L,O,U,X,ie,oe=i[0],de=i[1],ce=i[2];return t===e?(e[12]=t[0]*oe+t[4]*de+t[8]*ce+t[12],e[13]=t[1]*oe+t[5]*de+t[9]*ce+t[13],e[14]=t[2]*oe+t[6]*de+t[10]*ce+t[14],e[15]=t[3]*oe+t[7]*de+t[11]*ce+t[15]):(p=t[1],d=t[2],v=t[3],k=t[4],A=t[5],P=t[6],L=t[7],O=t[8],U=t[9],X=t[10],ie=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=v,e[4]=k,e[5]=A,e[6]=P,e[7]=L,e[8]=O,e[9]=U,e[10]=X,e[11]=ie,e[12]=l*oe+k*de+O*ce+t[12],e[13]=p*oe+A*de+U*ce+t[13],e[14]=d*oe+P*de+X*ce+t[14],e[15]=v*oe+L*de+ie*ce+t[15]),e},o.triggerPluginCompletionEvent=Qh,o.uniqueId=Mt,o.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},o.validateLight=Lf,o.validateStyle=Wh,o.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},o.vectorTile=Es,o.version="1.13.3",o.warnOnce=Ot,o.webpSupported=Pn,o.window=F,o.wrap=Oe}),x(["./shared"],function(o){function T(B){var q=typeof B;if(q==="number"||q==="boolean"||q==="string"||B==null)return JSON.stringify(B);if(Array.isArray(B)){for(var K="[",$=0,le=B;$<le.length;$+=1)K+=T(le[$])+",";return K+"]"}for(var me=Object.keys(B).sort(),ye="{",G=0;G<me.length;G++)ye+=JSON.stringify(me[G])+":"+T(B[me[G]])+",";return ye+"}"}function I(B){for(var q="",K=0,$=o.refProperties;K<$.length;K+=1)q+="/"+T(B[$[K]]);return q}var D=function(B){this.keyCache={},B&&this.replace(B)};D.prototype.replace=function(B){this._layerConfigs={},this._layers={},this.update(B,[])},D.prototype.update=function(B,q){for(var K=this,$=0,le=B;$<le.length;$+=1){var me=le[$];this._layerConfigs[me.id]=me;var ye=this._layers[me.id]=o.createStyleLayer(me);ye._featureFilter=o.featureFilter(ye.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(var G=0,te=q;G<te.length;G+=1){var ke=te[G];delete this.keyCache[ke],delete this._layerConfigs[ke],delete this._layers[ke]}this.familiesBySource={};for(var Ue=0,He=function(Je,Ye){for(var Gt={},rt=0;rt<Je.length;rt++){var Rt=Ye&&Ye[Je[rt].id]||I(Je[rt]);Ye&&(Ye[Je[rt].id]=Rt);var $t=Gt[Rt];$t||($t=Gt[Rt]=[]),$t.push(Je[rt])}var At=[];for(var Jt in Gt)At.push(Gt[Jt]);return At}(o.values(this._layerConfigs),this.keyCache);Ue<He.length;Ue+=1){var Re=He[Ue].map(function(Je){return K._layers[Je.id]}),qe=Re[0];if(qe.visibility!=="none"){var at=qe.source||"",st=this.familiesBySource[at];st||(st=this.familiesBySource[at]={});var Le=qe.sourceLayer||"_geojsonTileLayer",tt=st[Le];tt||(tt=st[Le]=[]),tt.push(Re)}}};var V=function(B){var q={},K=[];for(var $ in B){var le=B[$],me=q[$]={};for(var ye in le){var G=le[+ye];if(G&&G.bitmap.width!==0&&G.bitmap.height!==0){var te={x:0,y:0,w:G.bitmap.width+2,h:G.bitmap.height+2};K.push(te),me[ye]={rect:te,metrics:G.metrics}}}}var ke=o.potpack(K),Ue=new o.AlphaImage({width:ke.w||1,height:ke.h||1});for(var He in B){var Re=B[He];for(var qe in Re){var at=Re[+qe];if(at&&at.bitmap.width!==0&&at.bitmap.height!==0){var st=q[He][qe].rect;o.AlphaImage.copy(at.bitmap,Ue,{x:0,y:0},{x:st.x+1,y:st.y+1},at.bitmap)}}}this.image=Ue,this.positions=q};o.register("GlyphAtlas",V);var j=function(B){this.tileID=new o.OverscaledTileID(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId};function F(B,q,K){for(var $=new o.EvaluationParameters(q),le=0,me=B;le<me.length;le+=1)me[le].recalculate($,K)}function pe(B,q){var K=o.getArrayBuffer(B.request,function($,le,me,ye){$?q($):le&&q(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(le)),rawData:le,cacheControl:me,expires:ye})});return function(){K.cancel(),q()}}j.prototype.parse=function(B,q,K,$,le){var me=this;this.status="parsing",this.data=B,this.collisionBoxArray=new o.CollisionBoxArray;var ye=new o.DictionaryCoder(Object.keys(B.layers).sort()),G=new o.FeatureIndex(this.tileID,this.promoteId);G.bucketLayerIDs=[];var te,ke,Ue,He,Re={},qe={featureIndex:G,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},at=q.familiesBySource[this.source];for(var st in at){var Le=B.layers[st];if(Le){Le.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+st+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var tt=ye.encode(st),Je=[],Ye=0;Ye<Le.length;Ye++){var Gt=Le.feature(Ye),rt=G.getId(Gt,st);Je.push({feature:Gt,id:rt,index:Ye,sourceLayerIndex:tt})}for(var Rt=0,$t=at[st];Rt<$t.length;Rt+=1){var At=$t[Rt],Jt=At[0];Jt.minzoom&&this.zoom<Math.floor(Jt.minzoom)||Jt.maxzoom&&this.zoom>=Jt.maxzoom||Jt.visibility!=="none"&&(F(At,this.zoom,K),(Re[Jt.id]=Jt.createBucket({index:G.bucketLayerIDs.length,layers:At,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:tt,sourceID:this.source})).populate(Je,qe,this.tileID.canonical),G.bucketLayerIDs.push(At.map(function(gr){return gr.id})))}}}var rr=o.mapObject(qe.glyphDependencies,function(gr){return Object.keys(gr).map(Number)});Object.keys(rr).length?$.send("getGlyphs",{uid:this.uid,stacks:rr},function(gr,Nt){te||(te=gr,ke=Nt,oi.call(me))}):ke={};var di=Object.keys(qe.iconDependencies);di.length?$.send("getImages",{icons:di,source:this.source,tileID:this.tileID,type:"icons"},function(gr,Nt){te||(te=gr,Ue=Nt,oi.call(me))}):Ue={};var lr=Object.keys(qe.patternDependencies);function oi(){if(te)return le(te);if(ke&&Ue&&He){var gr=new V(ke),Nt=new o.ImageAtlas(Ue,He);for(var ur in Re){var Ui=Re[ur];Ui instanceof o.SymbolBucket?(F(Ui.layers,this.zoom,K),o.performSymbolLayout(Ui,ke,gr.positions,Ue,Nt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ui.hasPattern&&(Ui instanceof o.LineBucket||Ui instanceof o.FillBucket||Ui instanceof o.FillExtrusionBucket)&&(F(Ui.layers,this.zoom,K),Ui.addFeatures(qe,this.tileID.canonical,Nt.patternPositions))}this.status="done",le(null,{buckets:o.values(Re).filter(function(co){return!co.isEmpty()}),featureIndex:G,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:gr.image,imageAtlas:Nt,glyphMap:this.returnDependencies?ke:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?gr.positions:null})}}lr.length?$.send("getImages",{icons:lr,source:this.source,tileID:this.tileID,type:"patterns"},function(gr,Nt){te||(te=gr,He=Nt,oi.call(me))}):He={},oi.call(this)};var ue=function(B,q,K,$){this.actor=B,this.layerIndex=q,this.availableImages=K,this.loadVectorData=$||pe,this.loading={},this.loaded={}};ue.prototype.loadTile=function(B,q){var K=this,$=B.uid;this.loading||(this.loading={});var le=!!(B&&B.request&&B.request.collectResourceTiming)&&new o.RequestPerformance(B.request),me=this.loading[$]=new j(B);me.abort=this.loadVectorData(B,function(ye,G){if(delete K.loading[$],ye||!G)return me.status="done",K.loaded[$]=me,q(ye);var te=G.rawData,ke={};G.expires&&(ke.expires=G.expires),G.cacheControl&&(ke.cacheControl=G.cacheControl);var Ue={};if(le){var He=le.finish();He&&(Ue.resourceTiming=JSON.parse(JSON.stringify(He)))}me.vectorTile=G.vectorTile,me.parse(G.vectorTile,K.layerIndex,K.availableImages,K.actor,function(Re,qe){if(Re||!qe)return q(Re);q(null,o.extend({rawTileData:te.slice(0)},qe,ke,Ue))}),K.loaded=K.loaded||{},K.loaded[$]=me})},ue.prototype.reloadTile=function(B,q){var K=this,$=this.loaded,le=B.uid,me=this;if($&&$[le]){var ye=$[le];ye.showCollisionBoxes=B.showCollisionBoxes;var G=function(te,ke){var Ue=ye.reloadCallback;Ue&&(delete ye.reloadCallback,ye.parse(ye.vectorTile,me.layerIndex,K.availableImages,me.actor,Ue)),q(te,ke)};ye.status==="parsing"?ye.reloadCallback=G:ye.status==="done"&&(ye.vectorTile?ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}},ue.prototype.abortTile=function(B,q){var K=this.loading,$=B.uid;K&&K[$]&&K[$].abort&&(K[$].abort(),delete K[$]),q()},ue.prototype.removeTile=function(B,q){var K=this.loaded,$=B.uid;K&&K[$]&&delete K[$],q()};var De=o.window.ImageBitmap,Se=function(){this.loaded={}};function Oe(B,q){if(B.length!==0){je(B[0],q);for(var K=1;K<B.length;K++)je(B[K],!q)}}function je(B,q){for(var K=0,$=0,le=0,me=B.length,ye=me-1;le<me;ye=le++){var G=(B[le][0]-B[ye][0])*(B[ye][1]+B[le][1]),te=K+G;$+=Math.abs(K)>=Math.abs(G)?K-te+G:G-te+K,K=te}K+$>=0!=!!q&&B.reverse()}Se.prototype.loadTile=function(B,q){var K=B.uid,$=B.encoding,le=B.rawImageData,me=De&&le instanceof De?this.getImageData(le):le,ye=new o.DEMData(K,me,$);this.loaded=this.loaded||{},this.loaded[K]=ye,q(null,ye)},Se.prototype.getImageData=function(B){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(B.width,B.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=B.width,this.offscreenCanvas.height=B.height,this.offscreenCanvasContext.drawImage(B,0,0,B.width,B.height);var q=this.offscreenCanvasContext.getImageData(-1,-1,B.width+2,B.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:q.width,height:q.height},q.data)},Se.prototype.removeTile=function(B){var q=this.loaded,K=B.uid;q&&q[K]&&delete q[K]};var Lt=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,Mt=function(B){this._feature=B,this.extent=o.EXTENT,this.type=B.type,this.properties=B.tags,"id"in B&&!isNaN(B.id)&&(this.id=parseInt(B.id,10))};Mt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var B=[],q=0,K=this._feature.geometry;q<K.length;q+=1){var $=K[q];B.push([new o.Point$1($[0],$[1])])}return B}for(var le=[],me=0,ye=this._feature.geometry;me<ye.length;me+=1){for(var G=[],te=0,ke=ye[me];te<ke.length;te+=1){var Ue=ke[te];G.push(new o.Point$1(Ue[0],Ue[1]))}le.push(G)}return le},Mt.prototype.toGeoJSON=function(B,q,K){return Lt.call(this,B,q,K)};var yt=function(B){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=B.length,this._features=B};yt.prototype.feature=function(B){return new Mt(this._features[B])};var Qe=o.vectorTile.VectorTileFeature,zr=Cr;function Cr(B,q){this.options=q||{},this.features=B,this.length=B.length}function sr(B,q){this.id=typeof B.id=="number"?B.id:void 0,this.type=B.type,this.rawGeometry=B.type===1?[B.geometry]:B.geometry,this.properties=B.tags,this.extent=q||4096}Cr.prototype.feature=function(B){return new sr(this.features[B],this.options.extent)},sr.prototype.loadGeometry=function(){var B=this.rawGeometry;this.geometry=[];for(var q=0;q<B.length;q++){for(var K=B[q],$=[],le=0;le<K.length;le++)$.push(new o.Point$1(K[le][0],K[le][1]));this.geometry.push($)}return this.geometry},sr.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var B=this.geometry,q=1/0,K=-1/0,$=1/0,le=-1/0,me=0;me<B.length;me++)for(var ye=B[me],G=0;G<ye.length;G++){var te=ye[G];q=Math.min(q,te.x),K=Math.max(K,te.x),$=Math.min($,te.y),le=Math.max(le,te.y)}return[q,$,K,le]},sr.prototype.toGeoJSON=Qe.prototype.toGeoJSON;var St=Lr,Tt=zr;function Lr(B){var q=new o.pbf;return function(K,$){for(var le in K.layers)$.writeMessage(3,Ot,K.layers[le])}(B,q),q.finish()}function Ot(B,q){var K;q.writeVarintField(15,B.version||1),q.writeStringField(1,B.name||""),q.writeVarintField(5,B.extent||4096);var $={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<B.length;K++)$.feature=B.feature(K),q.writeMessage(2,Rr,$);var le=$.keys;for(K=0;K<le.length;K++)q.writeStringField(3,le[K]);var me=$.values;for(K=0;K<me.length;K++)q.writeMessage(4,dr,me[K])}function Rr(B,q){var K=B.feature;K.id!==void 0&&q.writeVarintField(1,K.id),q.writeMessage(2,ot,B),q.writeVarintField(3,K.type),q.writeMessage(4,Ar,K)}function ot(B,q){var K=B.feature,$=B.keys,le=B.values,me=B.keycache,ye=B.valuecache;for(var G in K.properties){var te=me[G];te===void 0&&($.push(G),me[G]=te=$.length-1),q.writeVarint(te);var ke=K.properties[G],Ue=typeof ke;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(ke=JSON.stringify(ke));var He=Ue+":"+ke,Re=ye[He];Re===void 0&&(le.push(ke),ye[He]=Re=le.length-1),q.writeVarint(Re)}}function Fr(B,q){return(q<<3)+(7&B)}function Qr(B){return B<<1^B>>31}function Ar(B,q){for(var K=B.loadGeometry(),$=B.type,le=0,me=0,ye=K.length,G=0;G<ye;G++){var te=K[G],ke=1;$===1&&(ke=te.length),q.writeVarint(Fr(1,ke));for(var Ue=$===3?te.length-1:te.length,He=0;He<Ue;He++){He===1&&$!==1&&q.writeVarint(Fr(2,Ue-1));var Re=te[He].x-le,qe=te[He].y-me;q.writeVarint(Qr(Re)),q.writeVarint(Qr(qe)),le+=Re,me+=qe}$===3&&q.writeVarint(Fr(7,1))}}function dr(B,q){var K=typeof B;K==="string"?q.writeStringField(1,B):K==="boolean"?q.writeBooleanField(7,B):K==="number"&&(B%1!=0?q.writeDoubleField(3,B):B<0?q.writeSVarintField(6,B):q.writeVarintField(5,B))}function wi(B,q,K,$){Ve(B,K,$),Ve(q,2*K,2*$),Ve(q,2*K+1,2*$+1)}function Ve(B,q,K){var $=B[q];B[q]=B[K],B[K]=$}function Tr(B,q,K,$){var le=B-K,me=q-$;return le*le+me*me}St.fromVectorTileJs=Lr,St.fromGeojsonVt=function(B,q){q=q||{};var K={};for(var $ in B)K[$]=new zr(B[$].features,q),K[$].name=$,K[$].version=q.version,K[$].extent=q.extent;return Lr({layers:K})},St.GeoJSONWrapper=Tt;var vn=function(B){return B[0]},Ta=function(B){return B[1]},ni=function(B,q,K,$,le){q===void 0&&(q=vn),K===void 0&&(K=Ta),$===void 0&&($=64),le===void 0&&(le=Float64Array),this.nodeSize=$,this.points=B;for(var me=B.length<65536?Uint16Array:Uint32Array,ye=this.ids=new me(B.length),G=this.coords=new le(2*B.length),te=0;te<B.length;te++)ye[te]=te,G[2*te]=q(B[te]),G[2*te+1]=K(B[te]);(function ke(Ue,He,Re,qe,at,st){if(!(at-qe<=Re)){var Le=qe+at>>1;(function tt(Je,Ye,Gt,rt,Rt,$t){for(;Rt>rt;){if(Rt-rt>600){var At=Rt-rt+1,Jt=Gt-rt+1,rr=Math.log(At),di=.5*Math.exp(2*rr/3),lr=.5*Math.sqrt(rr*di*(At-di)/At)*(Jt-At/2<0?-1:1);tt(Je,Ye,Gt,Math.max(rt,Math.floor(Gt-Jt*di/At+lr)),Math.min(Rt,Math.floor(Gt+(At-Jt)*di/At+lr)),$t)}var oi=Ye[2*Gt+$t],gr=rt,Nt=Rt;for(wi(Je,Ye,rt,Gt),Ye[2*Rt+$t]>oi&&wi(Je,Ye,rt,Rt);gr<Nt;){for(wi(Je,Ye,gr,Nt),gr++,Nt--;Ye[2*gr+$t]<oi;)gr++;for(;Ye[2*Nt+$t]>oi;)Nt--}Ye[2*rt+$t]===oi?wi(Je,Ye,rt,Nt):wi(Je,Ye,++Nt,Rt),Nt<=Gt&&(rt=Nt+1),Gt<=Nt&&(Rt=Nt-1)}})(Ue,He,Le,qe,at,st%2),ke(Ue,He,Re,qe,Le-1,st+1),ke(Ue,He,Re,Le+1,at,st+1)}})(ye,G,$,0,ye.length-1,0)};ni.prototype.range=function(B,q,K,$){return function(le,me,ye,G,te,ke,Ue){for(var He,Re,qe=[0,le.length-1,0],at=[];qe.length;){var st=qe.pop(),Le=qe.pop(),tt=qe.pop();if(Le-tt<=Ue)for(var Je=tt;Je<=Le;Je++)Re=me[2*Je+1],(He=me[2*Je])>=ye&&He<=te&&Re>=G&&Re<=ke&&at.push(le[Je]);else{var Ye=Math.floor((tt+Le)/2);Re=me[2*Ye+1],(He=me[2*Ye])>=ye&&He<=te&&Re>=G&&Re<=ke&&at.push(le[Ye]);var Gt=(st+1)%2;(st===0?ye<=He:G<=Re)&&(qe.push(tt),qe.push(Ye-1),qe.push(Gt)),(st===0?te>=He:ke>=Re)&&(qe.push(Ye+1),qe.push(Le),qe.push(Gt))}}return at}(this.ids,this.coords,B,q,K,$,this.nodeSize)},ni.prototype.within=function(B,q,K){return function($,le,me,ye,G,te){for(var ke=[0,$.length-1,0],Ue=[],He=G*G;ke.length;){var Re=ke.pop(),qe=ke.pop(),at=ke.pop();if(qe-at<=te)for(var st=at;st<=qe;st++)Tr(le[2*st],le[2*st+1],me,ye)<=He&&Ue.push($[st]);else{var Le=Math.floor((at+qe)/2),tt=le[2*Le],Je=le[2*Le+1];Tr(tt,Je,me,ye)<=He&&Ue.push($[Le]);var Ye=(Re+1)%2;(Re===0?me-G<=tt:ye-G<=Je)&&(ke.push(at),ke.push(Le-1),ke.push(Ye)),(Re===0?me+G>=tt:ye+G>=Je)&&(ke.push(Le+1),ke.push(qe),ke.push(Ye))}}return Ue}(this.ids,this.coords,B,q,K,this.nodeSize)};var _n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(B){return B}},$r=function(B){this.options=Ca(Object.create(_n),B),this.trees=new Array(this.options.maxZoom+1)};function za(B,q,K,$,le){return{x:B,y:q,zoom:1/0,id:K,parentId:-1,numPoints:$,properties:le}}function hr(B,q){var K=B.geometry.coordinates,$=K[1];return{x:Mn(K[0]),y:Vt($),zoom:1/0,index:q,parentId:-1}}function Pn(B){return{type:"Feature",id:B.id,properties:ns(B),geometry:{type:"Point",coordinates:[($=B.x,360*($-.5)),(q=B.y,K=(180-360*q)*Math.PI/180,360*Math.atan(Math.exp(K))/Math.PI-90)]}};var q,K,$}function ns(B){var q=B.numPoints,K=q>=1e4?Math.round(q/1e3)+"k":q>=1e3?Math.round(q/100)/10+"k":q;return Ca(Ca({},B.properties),{cluster:!0,cluster_id:B.id,point_count:q,point_count_abbreviated:K})}function Mn(B){return B/360+.5}function Vt(B){var q=Math.sin(B*Math.PI/180),K=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return K<0?0:K>1?1:K}function Ca(B,q){for(var K in q)B[K]=q[K];return B}function Ni(B){return B.x}function pr(B){return B.y}function $i(B,q,K,$,le,me){var ye=le-K,G=me-$;if(ye!==0||G!==0){var te=((B-K)*ye+(q-$)*G)/(ye*ye+G*G);te>1?(K=le,$=me):te>0&&(K+=ye*te,$+=G*te)}return(ye=B-K)*ye+(G=q-$)*G}function yi(B,q,K,$){var le={id:B===void 0?null:B,type:q,geometry:K,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(me){var ye=me.geometry,G=me.type;if(G==="Point"||G==="MultiPoint"||G==="LineString")Mi(me,ye);else if(G==="Polygon"||G==="MultiLineString")for(var te=0;te<ye.length;te++)Mi(me,ye[te]);else if(G==="MultiPolygon")for(te=0;te<ye.length;te++)for(var ke=0;ke<ye[te].length;ke++)Mi(me,ye[te][ke])}(le),le}function Mi(B,q){for(var K=0;K<q.length;K+=3)B.minX=Math.min(B.minX,q[K]),B.minY=Math.min(B.minY,q[K+1]),B.maxX=Math.max(B.maxX,q[K]),B.maxY=Math.max(B.maxY,q[K+1])}function pi(B,q,K,$){if(q.geometry){var le=q.geometry.coordinates,me=q.geometry.type,ye=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),G=[],te=q.id;if(K.promoteId?te=q.properties[K.promoteId]:K.generateId&&(te=$||0),me==="Point")fi(le,G);else if(me==="MultiPoint")for(var ke=0;ke<le.length;ke++)fi(le[ke],G);else if(me==="LineString")un(le,G,ye,!1);else if(me==="MultiLineString"){if(K.lineMetrics){for(ke=0;ke<le.length;ke++)un(le[ke],G=[],ye,!1),B.push(yi(te,"LineString",G,q.properties));return}mr(le,G,ye,!1)}else if(me==="Polygon")mr(le,G,ye,!0);else{if(me!=="MultiPolygon"){if(me==="GeometryCollection"){for(ke=0;ke<q.geometry.geometries.length;ke++)pi(B,{id:te,geometry:q.geometry.geometries[ke],properties:q.properties},K,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ke=0;ke<le.length;ke++){var Ue=[];mr(le[ke],Ue,ye,!0),G.push(Ue)}}B.push(yi(te,me,G,q.properties))}}function fi(B,q){q.push(Pr(B[0])),q.push(tr(B[1])),q.push(0)}function un(B,q,K,$){for(var le,me,ye=0,G=0;G<B.length;G++){var te=Pr(B[G][0]),ke=tr(B[G][1]);q.push(te),q.push(ke),q.push(0),G>0&&(ye+=$?(le*ke-te*me)/2:Math.sqrt(Math.pow(te-le,2)+Math.pow(ke-me,2))),le=te,me=ke}var Ue=q.length-3;q[2]=1,function He(Re,qe,at,st){for(var Le,tt=st,Je=at-qe>>1,Ye=at-qe,Gt=Re[qe],rt=Re[qe+1],Rt=Re[at],$t=Re[at+1],At=qe+3;At<at;At+=3){var Jt=$i(Re[At],Re[At+1],Gt,rt,Rt,$t);if(Jt>tt)Le=At,tt=Jt;else if(Jt===tt){var rr=Math.abs(At-Je);rr<Ye&&(Le=At,Ye=rr)}}tt>st&&(Le-qe>3&&He(Re,qe,Le,st),Re[Le+2]=tt,at-Le>3&&He(Re,Le,at,st))}(q,0,Ue,K),q[Ue+2]=1,q.size=Math.abs(ye),q.start=0,q.end=q.size}function mr(B,q,K,$){for(var le=0;le<B.length;le++){var me=[];un(B[le],me,K,$),q.push(me)}}function Pr(B){return B/360+.5}function tr(B){var q=Math.sin(B*Math.PI/180),K=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return K<0?0:K>1?1:K}function yr(B,q,K,$,le,me,ye,G){if($/=q,me>=(K/=q)&&ye<$)return B;if(ye<K||me>=$)return null;for(var te=[],ke=0;ke<B.length;ke++){var Ue=B[ke],He=Ue.geometry,Re=Ue.type,qe=le===0?Ue.minX:Ue.minY,at=le===0?Ue.maxX:Ue.maxY;if(qe>=K&&at<$)te.push(Ue);else if(!(at<K||qe>=$)){var st=[];if(Re==="Point"||Re==="MultiPoint")Ki(He,st,K,$,le);else if(Re==="LineString")Dn(He,st,K,$,le,!1,G.lineMetrics);else if(Re==="MultiLineString")To(He,st,K,$,le,!1);else if(Re==="Polygon")To(He,st,K,$,le,!0);else if(Re==="MultiPolygon")for(var Le=0;Le<He.length;Le++){var tt=[];To(He[Le],tt,K,$,le,!0),tt.length&&st.push(tt)}if(st.length){if(G.lineMetrics&&Re==="LineString"){for(Le=0;Le<st.length;Le++)te.push(yi(Ue.id,Re,st[Le],Ue.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(st.length===1?(Re="LineString",st=st[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=st.length===3?"Point":"MultiPoint"),te.push(yi(Ue.id,Re,st,Ue.tags))}}}return te.length?te:null}function Ki(B,q,K,$,le){for(var me=0;me<B.length;me+=3){var ye=B[me+le];ye>=K&&ye<=$&&(q.push(B[me]),q.push(B[me+1]),q.push(B[me+2]))}}function Dn(B,q,K,$,le,me,ye){for(var G,te,ke=Bs(B),Ue=le===0?Os:lo,He=B.start,Re=0;Re<B.length-3;Re+=3){var qe=B[Re],at=B[Re+1],st=B[Re+2],Le=B[Re+3],tt=B[Re+4],Je=le===0?qe:at,Ye=le===0?Le:tt,Gt=!1;ye&&(G=Math.sqrt(Math.pow(qe-Le,2)+Math.pow(at-tt,2))),Je<K?Ye>K&&(te=Ue(ke,qe,at,Le,tt,K),ye&&(ke.start=He+G*te)):Je>$?Ye<$&&(te=Ue(ke,qe,at,Le,tt,$),ye&&(ke.start=He+G*te)):Ln(ke,qe,at,st),Ye<K&&Je>=K&&(te=Ue(ke,qe,at,Le,tt,K),Gt=!0),Ye>$&&Je<=$&&(te=Ue(ke,qe,at,Le,tt,$),Gt=!0),!me&&Gt&&(ye&&(ke.end=He+G*te),q.push(ke),ke=Bs(B)),ye&&(He+=G)}var rt=B.length-3;qe=B[rt],at=B[rt+1],st=B[rt+2],(Je=le===0?qe:at)>=K&&Je<=$&&Ln(ke,qe,at,st),rt=ke.length-3,me&&rt>=3&&(ke[rt]!==ke[0]||ke[rt+1]!==ke[1])&&Ln(ke,ke[0],ke[1],ke[2]),ke.length&&q.push(ke)}function Bs(B){var q=[];return q.size=B.size,q.start=B.start,q.end=B.end,q}function To(B,q,K,$,le,me){for(var ye=0;ye<B.length;ye++)Dn(B[ye],q,K,$,le,me,!1)}function Ln(B,q,K,$){B.push(q),B.push(K),B.push($)}function Os(B,q,K,$,le,me){var ye=(me-q)/($-q);return B.push(me),B.push(K+(le-K)*ye),B.push(1),ye}function lo(B,q,K,$,le,me){var ye=(me-K)/(le-K);return B.push(q+($-q)*ye),B.push(me),B.push(1),ye}function aa(B,q){for(var K=[],$=0;$<B.length;$++){var le,me=B[$],ye=me.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")le=oa(me.geometry,q);else if(ye==="MultiLineString"||ye==="Polygon"){le=[];for(var G=0;G<me.geometry.length;G++)le.push(oa(me.geometry[G],q))}else if(ye==="MultiPolygon")for(le=[],G=0;G<me.geometry.length;G++){for(var te=[],ke=0;ke<me.geometry[G].length;ke++)te.push(oa(me.geometry[G][ke],q));le.push(te)}K.push(yi(me.id,ye,le,me.tags))}return K}function oa(B,q){var K=[];K.size=B.size,B.start!==void 0&&(K.start=B.start,K.end=B.end);for(var $=0;$<B.length;$+=3)K.push(B[$]+q,B[$+1],B[$+2]);return K}function uo(B,q){if(B.transformed)return B;var K,$,le,me=1<<B.z,ye=B.x,G=B.y;for(K=0;K<B.features.length;K++){var te=B.features[K],ke=te.geometry,Ue=te.type;if(te.geometry=[],Ue===1)for($=0;$<ke.length;$+=2)te.geometry.push(zo(ke[$],ke[$+1],q,me,ye,G));else for($=0;$<ke.length;$++){var He=[];for(le=0;le<ke[$].length;le+=2)He.push(zo(ke[$][le],ke[$][le+1],q,me,ye,G));te.geometry.push(He)}}return B.transformed=!0,B}function zo(B,q,K,$,le,me){return[Math.round(K*(B*$-le)),Math.round(K*(q*$-me))]}function as(B,q,K,$,le){for(var me=q===le.maxZoom?0:le.tolerance/((1<<q)*le.extent),ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:$,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},G=0;G<B.length;G++){ye.numFeatures++,Co(ye,B[G],me,le);var te=B[G].minX,ke=B[G].minY,Ue=B[G].maxX,He=B[G].maxY;te<ye.minX&&(ye.minX=te),ke<ye.minY&&(ye.minY=ke),Ue>ye.maxX&&(ye.maxX=Ue),He>ye.maxY&&(ye.maxY=He)}return ye}function Co(B,q,K,$){var le=q.geometry,me=q.type,ye=[];if(me==="Point"||me==="MultiPoint")for(var G=0;G<le.length;G+=3)ye.push(le[G]),ye.push(le[G+1]),B.numPoints++,B.numSimplified++;else if(me==="LineString")Aa(ye,le,B,K,!1,!1);else if(me==="MultiLineString"||me==="Polygon")for(G=0;G<le.length;G++)Aa(ye,le[G],B,K,me==="Polygon",G===0);else if(me==="MultiPolygon")for(var te=0;te<le.length;te++){var ke=le[te];for(G=0;G<ke.length;G++)Aa(ye,ke[G],B,K,!0,G===0)}if(ye.length){var Ue=q.tags||null;if(me==="LineString"&&$.lineMetrics){for(var He in Ue={},q.tags)Ue[He]=q.tags[He];Ue.mapbox_clip_start=le.start/le.size,Ue.mapbox_clip_end=le.end/le.size}var Re={geometry:ye,type:me==="Polygon"||me==="MultiPolygon"?3:me==="LineString"||me==="MultiLineString"?2:1,tags:Ue};q.id!==null&&(Re.id=q.id),B.features.push(Re)}}function Aa(B,q,K,$,le,me){var ye=$*$;if($>0&&q.size<(le?ye:$))K.numPoints+=q.length/3;else{for(var G=[],te=0;te<q.length;te+=3)($===0||q[te+2]>ye)&&(K.numSimplified++,G.push(q[te]),G.push(q[te+1])),K.numPoints++;le&&function(ke,Ue){for(var He=0,Re=0,qe=ke.length,at=qe-2;Re<qe;at=Re,Re+=2)He+=(ke[Re]-ke[at])*(ke[Re+1]+ke[at+1]);if(He>0===Ue)for(Re=0,qe=ke.length;Re<qe/2;Re+=2){var st=ke[Re],Le=ke[Re+1];ke[Re]=ke[qe-2-Re],ke[Re+1]=ke[qe-1-Re],ke[qe-2-Re]=st,ke[qe-1-Re]=Le}}(G,me),B.push(G)}}function ai(B,q){var K=(q=this.options=function(le,me){for(var ye in me)le[ye]=me[ye];return le}(Object.create(this.options),q)).debug;if(K&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");var $=function(le,me){var ye=[];if(le.type==="FeatureCollection")for(var G=0;G<le.features.length;G++)pi(ye,le.features[G],me,G);else pi(ye,le.type==="Feature"?le:{geometry:le},me);return ye}(B,q);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),($=function(le,me){var ye=me.buffer/me.extent,G=le,te=yr(le,1,-1-ye,ye,0,-1,2,me),ke=yr(le,1,1-ye,2+ye,0,-1,2,me);return(te||ke)&&(G=yr(le,1,-ye,1+ye,0,-1,2,me)||[],te&&(G=aa(te,1).concat(G)),ke&&(G=G.concat(aa(ke,-1)))),G}($,q)).length&&this.splitTile($,0,0,0),K&&($.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function cn(B,q,K){return 32*((1<<B)*K+q)+B}function Kn(B,q){var K=B.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);var $=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!$)return q(null,null);var le=new yt($.features),me=St(le);me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),q(null,{vectorTile:le,rawData:me.buffer})}$r.prototype.load=function(B){var q=this.options,K=q.log,$=q.minZoom,le=q.maxZoom,me=q.nodeSize;K&&console.time("total time");var ye="prepare "+B.length+" points";K&&console.time(ye),this.points=B;for(var G=[],te=0;te<B.length;te++)B[te].geometry&&G.push(hr(B[te],te));this.trees[le+1]=new ni(G,Ni,pr,me,Float32Array),K&&console.timeEnd(ye);for(var ke=le;ke>=$;ke--){var Ue=+Date.now();G=this._cluster(G,ke),this.trees[ke]=new ni(G,Ni,pr,me,Float32Array),K&&console.log("z%d: %d clusters in %dms",ke,G.length,+Date.now()-Ue)}return K&&console.timeEnd("total time"),this},$r.prototype.getClusters=function(B,q){var K=((B[0]+180)%360+360)%360-180,$=Math.max(-90,Math.min(90,B[1])),le=B[2]===180?180:((B[2]+180)%360+360)%360-180,me=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)K=-180,le=180;else if(K>le){var ye=this.getClusters([K,$,180,me],q),G=this.getClusters([-180,$,le,me],q);return ye.concat(G)}for(var te=this.trees[this._limitZoom(q)],ke=[],Ue=0,He=te.range(Mn(K),Vt(me),Mn(le),Vt($));Ue<He.length;Ue+=1){var Re=te.points[He[Ue]];ke.push(Re.numPoints?Pn(Re):this.points[Re.index])}return ke},$r.prototype.getChildren=function(B){var q=this._getOriginId(B),K=this._getOriginZoom(B),$="No cluster with the specified id.",le=this.trees[K];if(!le)throw new Error($);var me=le.points[q];if(!me)throw new Error($);for(var ye=this.options.radius/(this.options.extent*Math.pow(2,K-1)),G=[],te=0,ke=le.within(me.x,me.y,ye);te<ke.length;te+=1){var Ue=le.points[ke[te]];Ue.parentId===B&&G.push(Ue.numPoints?Pn(Ue):this.points[Ue.index])}if(G.length===0)throw new Error($);return G},$r.prototype.getLeaves=function(B,q,K){var $=[];return this._appendLeaves($,B,q=q||10,K=K||0,0),$},$r.prototype.getTile=function(B,q,K){var $=this.trees[this._limitZoom(B)],le=Math.pow(2,B),me=this.options,ye=me.radius/me.extent,G=(K-ye)/le,te=(K+1+ye)/le,ke={features:[]};return this._addTileFeatures($.range((q-ye)/le,G,(q+1+ye)/le,te),$.points,q,K,le,ke),q===0&&this._addTileFeatures($.range(1-ye/le,G,1,te),$.points,le,K,le,ke),q===le-1&&this._addTileFeatures($.range(0,G,ye/le,te),$.points,-1,K,le,ke),ke.features.length?ke:null},$r.prototype.getClusterExpansionZoom=function(B){for(var q=this._getOriginZoom(B)-1;q<=this.options.maxZoom;){var K=this.getChildren(B);if(q++,K.length!==1)break;B=K[0].properties.cluster_id}return q},$r.prototype._appendLeaves=function(B,q,K,$,le){for(var me=0,ye=this.getChildren(q);me<ye.length;me+=1){var G=ye[me],te=G.properties;if(te&&te.cluster?le+te.point_count<=$?le+=te.point_count:le=this._appendLeaves(B,te.cluster_id,K,$,le):le<$?le++:B.push(G),B.length===K)break}return le},$r.prototype._addTileFeatures=function(B,q,K,$,le,me){for(var ye=0,G=B;ye<G.length;ye+=1){var te=q[G[ye]],ke=te.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(te.x*le-K)),Math.round(this.options.extent*(te.y*le-$))]],tags:ke?ns(te):this.points[te.index].properties},He=void 0;ke?He=te.id:this.options.generateId?He=te.index:this.points[te.index].id&&(He=this.points[te.index].id),He!==void 0&&(Ue.id=He),me.features.push(Ue)}},$r.prototype._limitZoom=function(B){return Math.max(this.options.minZoom,Math.min(+B,this.options.maxZoom+1))},$r.prototype._cluster=function(B,q){for(var K=[],$=this.options,le=$.reduce,me=$.minPoints,ye=$.radius/($.extent*Math.pow(2,q)),G=0;G<B.length;G++){var te=B[G];if(!(te.zoom<=q)){te.zoom=q;for(var ke=this.trees[q+1],Ue=ke.within(te.x,te.y,ye),He=te.numPoints||1,Re=He,qe=0,at=Ue;qe<at.length;qe+=1){var st=ke.points[at[qe]];st.zoom>q&&(Re+=st.numPoints||1)}if(Re>=me){for(var Le=te.x*He,tt=te.y*He,Je=le&&He>1?this._map(te,!0):null,Ye=(G<<5)+(q+1)+this.points.length,Gt=0,rt=Ue;Gt<rt.length;Gt+=1){var Rt=ke.points[rt[Gt]];if(!(Rt.zoom<=q)){Rt.zoom=q;var $t=Rt.numPoints||1;Le+=Rt.x*$t,tt+=Rt.y*$t,Rt.parentId=Ye,le&&(Je||(Je=this._map(te,!0)),le(Je,this._map(Rt)))}}te.parentId=Ye,K.push(za(Le/Re,tt/Re,Ye,Re,Je))}else if(K.push(te),Re>1)for(var At=0,Jt=Ue;At<Jt.length;At+=1){var rr=ke.points[Jt[At]];rr.zoom<=q||(rr.zoom=q,K.push(rr))}}}return K},$r.prototype._getOriginId=function(B){return B-this.points.length>>5},$r.prototype._getOriginZoom=function(B){return(B-this.points.length)%32},$r.prototype._map=function(B,q){if(B.numPoints)return q?Ca({},B.properties):B.properties;var K=this.points[B.index].properties,$=this.options.map(K);return q&&$===K?Ca({},$):$},ai.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ai.prototype.splitTile=function(B,q,K,$,le,me,ye){for(var G=[B,q,K,$],te=this.options,ke=te.debug;G.length;){$=G.pop(),K=G.pop(),q=G.pop(),B=G.pop();var Ue=1<<q,He=cn(q,K,$),Re=this.tiles[He];if(!Re&&(ke>1&&console.time("creation"),Re=this.tiles[He]=as(B,q,K,$,te),this.tileCoords.push({z:q,x:K,y:$}),ke)){ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,K,$,Re.numFeatures,Re.numPoints,Re.numSimplified),console.timeEnd("creation"));var qe="z"+q;this.stats[qe]=(this.stats[qe]||0)+1,this.total++}if(Re.source=B,le){if(q===te.maxZoom||q===le)continue;var at=1<<le-q;if(K!==Math.floor(me/at)||$!==Math.floor(ye/at))continue}else if(q===te.indexMaxZoom||Re.numPoints<=te.indexMaxPoints)continue;if(Re.source=null,B.length!==0){ke>1&&console.time("clipping");var st,Le,tt,Je,Ye,Gt,rt=.5*te.buffer/te.extent,Rt=.5-rt,$t=.5+rt,At=1+rt;st=Le=tt=Je=null,Ye=yr(B,Ue,K-rt,K+$t,0,Re.minX,Re.maxX,te),Gt=yr(B,Ue,K+Rt,K+At,0,Re.minX,Re.maxX,te),B=null,Ye&&(st=yr(Ye,Ue,$-rt,$+$t,1,Re.minY,Re.maxY,te),Le=yr(Ye,Ue,$+Rt,$+At,1,Re.minY,Re.maxY,te),Ye=null),Gt&&(tt=yr(Gt,Ue,$-rt,$+$t,1,Re.minY,Re.maxY,te),Je=yr(Gt,Ue,$+Rt,$+At,1,Re.minY,Re.maxY,te),Gt=null),ke>1&&console.timeEnd("clipping"),G.push(st||[],q+1,2*K,2*$),G.push(Le||[],q+1,2*K,2*$+1),G.push(tt||[],q+1,2*K+1,2*$),G.push(Je||[],q+1,2*K+1,2*$+1)}}},ai.prototype.getTile=function(B,q,K){var $=this.options,le=$.extent,me=$.debug;if(B<0||B>24)return null;var ye=1<<B,G=cn(B,q=(q%ye+ye)%ye,K);if(this.tiles[G])return uo(this.tiles[G],le);me>1&&console.log("drilling down to z%d-%d-%d",B,q,K);for(var te,ke=B,Ue=q,He=K;!te&&ke>0;)ke--,Ue=Math.floor(Ue/2),He=Math.floor(He/2),te=this.tiles[cn(ke,Ue,He)];return te&&te.source?(me>1&&console.log("found parent tile z%d-%d-%d",ke,Ue,He),me>1&&console.time("drilling down"),this.splitTile(te.source,ke,Ue,He,B,q,K),me>1&&console.timeEnd("drilling down"),this.tiles[G]?uo(this.tiles[G],le):null):null};var Ka=function(B){function q(K,$,le,me){B.call(this,K,$,le,Kn),me&&(this.loadGeoJSON=me)}return B&&(q.__proto__=B),(q.prototype=Object.create(B&&B.prototype)).constructor=q,q.prototype.loadData=function(K,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=$,this._pendingLoadDataParams=K,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},q.prototype._loadData=function(){var K=this;if(this._pendingCallback&&this._pendingLoadDataParams){var $=this._pendingCallback,le=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var me=!!(le&&le.request&&le.request.collectResourceTiming)&&new o.RequestPerformance(le.request);this.loadGeoJSON(le,function(ye,G){if(ye||!G)return $(ye);if(typeof G!="object")return $(new Error("Input data given to '"+le.source+"' is not a valid GeoJSON object."));(function Re(qe,at){var st,Le=qe&&qe.type;if(Le==="FeatureCollection")for(st=0;st<qe.features.length;st++)Re(qe.features[st],at);else if(Le==="GeometryCollection")for(st=0;st<qe.geometries.length;st++)Re(qe.geometries[st],at);else if(Le==="Feature")Re(qe.geometry,at);else if(Le==="Polygon")Oe(qe.coordinates,at);else if(Le==="MultiPolygon")for(st=0;st<qe.coordinates.length;st++)Oe(qe.coordinates[st],at);return qe})(G,!0);try{if(le.filter){var te=o.createExpression(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(function(Re){return Re.key+": "+Re.message}).join(", "));var ke=G.features.filter(function(Re){return te.value.evaluate({zoom:0},Re)});G={type:"FeatureCollection",features:ke}}K._geoJSONIndex=le.cluster?new $r(function(Re){var qe=Re.superclusterOptions,at=Re.clusterProperties;if(!at||!qe)return qe;for(var st={},Le={},tt={accumulated:null,zoom:0},Je={properties:null},Ye=Object.keys(at),Gt=0,rt=Ye;Gt<rt.length;Gt+=1){var Rt=rt[Gt],$t=at[Rt],At=$t[0],Jt=o.createExpression($t[1]),rr=o.createExpression(typeof At=="string"?[At,["accumulated"],["get",Rt]]:At);st[Rt]=Jt.value,Le[Rt]=rr.value}return qe.map=function(di){Je.properties=di;for(var lr={},oi=0,gr=Ye;oi<gr.length;oi+=1){var Nt=gr[oi];lr[Nt]=st[Nt].evaluate(tt,Je)}return lr},qe.reduce=function(di,lr){Je.properties=lr;for(var oi=0,gr=Ye;oi<gr.length;oi+=1){var Nt=gr[oi];tt.accumulated=di[Nt],di[Nt]=Le[Nt].evaluate(tt,Je)}},qe}(le)).load(G.features):function(Re,qe){return new ai(Re,qe)}(G,le.geojsonVtOptions)}catch(Re){return $(Re)}K.loaded={};var Ue={};if(me){var He=me.finish();He&&(Ue.resourceTiming={},Ue.resourceTiming[le.source]=JSON.parse(JSON.stringify(He)))}$(null,Ue)})}},q.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},q.prototype.reloadTile=function(K,$){var le=this.loaded;return le&&le[K.uid]?B.prototype.reloadTile.call(this,K,$):this.loadTile(K,$)},q.prototype.loadGeoJSON=function(K,$){if(K.request)o.getJSON(K.request,$);else{if(typeof K.data!="string")return $(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));try{return $(null,JSON.parse(K.data))}catch{return $(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."))}}},q.prototype.removeSource=function(K,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()},q.prototype.getClusterExpansionZoom=function(K,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(K.clusterId))}catch(le){$(le)}},q.prototype.getClusterChildren=function(K,$){try{$(null,this._geoJSONIndex.getChildren(K.clusterId))}catch(le){$(le)}},q.prototype.getClusterLeaves=function(K,$){try{$(null,this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset))}catch(le){$(le)}},q}(ue),br=function(B){var q=this;this.self=B,this.actor=new o.Actor(B,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ue,geojson:Ka},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(K,$){if(q.workerSourceTypes[K])throw new Error('Worker source with name "'+K+'" already registered.');q.workerSourceTypes[K]=$},this.self.registerRTLTextPlugin=function(K){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=K.applyArabicShaping,o.plugin.processBidirectionalText=K.processBidirectionalText,o.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}};return br.prototype.setReferrer=function(B,q){this.referrer=q},br.prototype.setImages=function(B,q,K){for(var $ in this.availableImages[B]=q,this.workerSources[B]){var le=this.workerSources[B][$];for(var me in le)le[me].availableImages=q}K()},br.prototype.setLayers=function(B,q,K){this.getLayerIndex(B).replace(q),K()},br.prototype.updateLayers=function(B,q,K){this.getLayerIndex(B).update(q.layers,q.removedIds),K()},br.prototype.loadTile=function(B,q,K){this.getWorkerSource(B,q.type,q.source).loadTile(q,K)},br.prototype.loadDEMTile=function(B,q,K){this.getDEMWorkerSource(B,q.source).loadTile(q,K)},br.prototype.reloadTile=function(B,q,K){this.getWorkerSource(B,q.type,q.source).reloadTile(q,K)},br.prototype.abortTile=function(B,q,K){this.getWorkerSource(B,q.type,q.source).abortTile(q,K)},br.prototype.removeTile=function(B,q,K){this.getWorkerSource(B,q.type,q.source).removeTile(q,K)},br.prototype.removeDEMTile=function(B,q){this.getDEMWorkerSource(B,q.source).removeTile(q)},br.prototype.removeSource=function(B,q,K){if(this.workerSources[B]&&this.workerSources[B][q.type]&&this.workerSources[B][q.type][q.source]){var $=this.workerSources[B][q.type][q.source];delete this.workerSources[B][q.type][q.source],$.removeSource!==void 0?$.removeSource(q,K):K()}},br.prototype.loadWorkerSource=function(B,q,K){try{this.self.importScripts(q.url),K()}catch($){K($.toString())}},br.prototype.syncRTLPluginState=function(B,q,K){try{o.plugin.setState(q);var $=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&$!=null){this.self.importScripts($);var le=o.plugin.isParsed();K(le?void 0:new Error("RTL Text Plugin failed to import scripts from "+$),le)}}catch(me){K(me.toString())}},br.prototype.getAvailableImages=function(B){var q=this.availableImages[B];return q||(q=[]),q},br.prototype.getLayerIndex=function(B){var q=this.layerIndexes[B];return q||(q=this.layerIndexes[B]=new D),q},br.prototype.getWorkerSource=function(B,q,K){var $=this;return this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][q]||(this.workerSources[B][q]={}),this.workerSources[B][q][K]||(this.workerSources[B][q][K]=new this.workerSourceTypes[q]({send:function(le,me,ye){$.actor.send(le,me,ye,B)}},this.getLayerIndex(B),this.getAvailableImages(B))),this.workerSources[B][q][K]},br.prototype.getDEMWorkerSource=function(B,q){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][q]||(this.demWorkerSources[B][q]=new Se),this.demWorkerSources[B][q]},br.prototype.enforceCacheSizeLimit=function(B,q){o.enforceCacheSizeLimit(q)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new br(self)),br}),x(["./shared"],function(o){var T=o.createCommonjsModule(function(n){function s(m){return!a(m)}function a(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,C,M=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(M);try{C=new Worker(N),E=!0}catch{E=!1}return C&&C.terminate(),URL.revokeObjectURL(N),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var C=E.getContext("2d");if(!C)return!1;var M=C.getImageData(0,0,1,1);return M&&M.width===E.width}()?(c[w=m&&m.failIfMajorPerformanceCaveat]===void 0&&(c[w]=function(E){var C=function(N){var W=document.createElement("canvas"),J=Object.create(s.webGLContextAttributes);return J.failIfMajorPerformanceCaveat=N,W.probablySupportsContext?W.probablySupportsContext("webgl",J)||W.probablySupportsContext("experimental-webgl",J):W.supportsContext?W.supportsContext("webgl",J)||W.supportsContext("experimental-webgl",J):W.getContext("webgl",J)||W.getContext("experimental-webgl",J)}(E);if(!C)return!1;var M=C.createShader(C.VERTEX_SHADER);return!(!M||C.isContextLost())&&(C.shaderSource(M,"void main() {}"),C.compileShader(M),C.getShaderParameter(M,C.COMPILE_STATUS)===!0)}(w)),c[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),I={create:function(n,s,a){var c=o.window.document.createElement(n);return s!==void 0&&(c.className=s),a&&a.appendChild(c),c},createNS:function(n,s){return o.window.document.createElementNS(n,s)}},D=o.window.document&&o.window.document.documentElement.style;function V(n){if(!D)return n[0];for(var s=0;s<n.length;s++)if(n[s]in D)return n[s];return n[0]}var j,F=V(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);I.disableDrag=function(){D&&F&&(j=D[F],D[F]="none")},I.enableDrag=function(){D&&F&&(D[F]=j)};var pe=V(["transform","WebkitTransform"]);I.setTransform=function(n,s){n.style[pe]=s};var ue=!1;try{var De=Object.defineProperty({},"passive",{get:function(){ue=!0}});o.window.addEventListener("test",De,De),o.window.removeEventListener("test",De,De)}catch{ue=!1}I.addEventListener=function(n,s,a,c){c===void 0&&(c={}),n.addEventListener(s,a,"passive"in c&&ue?c:c.capture)},I.removeEventListener=function(n,s,a,c){c===void 0&&(c={}),n.removeEventListener(s,a,"passive"in c&&ue?c:c.capture)};var Se=function(n){n.preventDefault(),n.stopPropagation(),o.window.removeEventListener("click",Se,!0)};function Oe(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}I.suppressClick=function(){o.window.addEventListener("click",Se,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",Se,!0)},0)},I.mousePos=function(n,s){var a=n.getBoundingClientRect();return new o.Point(s.clientX-a.left-n.clientLeft,s.clientY-a.top-n.clientTop)},I.touchPos=function(n,s){for(var a=n.getBoundingClientRect(),c=[],m=0;m<s.length;m++)c.push(new o.Point(s[m].clientX-a.left-n.clientLeft,s[m].clientY-a.top-n.clientTop));return c},I.mouseButton=function(n){return o.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},I.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var je=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var c=0,m=this.requestors;c<m.length;c+=1){var w=m[c];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,c){this._validate(a,c)&&(this.images[a]=c)},s.prototype._validate=function(a,c){var m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(c.content,c)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(a,c){if(!a)return!0;for(var m=0,w=0,E=a;w<E.length;w+=1){var C=E[w];if(C[0]<m||C[1]<C[0]||c<C[1])return!1;m=C[1]}return!0},s.prototype._validateContent=function(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,c){c.version=this.images[a].version+1,this.images[a]=c,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,c){var m=!0;if(!this.isLoaded())for(var w=0,E=a;w<E.length;w+=1)this.images[E[w]]||(m=!1);this.isLoaded()||m?this._notify(a,c):this.requestors.push({ids:a,callback:c})},s.prototype._notify=function(a,c){for(var m={},w=0,E=a;w<E.length;w+=1){var C=E[w];this.images[C]||this.fire(new o.Event("styleimagemissing",{id:C}));var M=this.images[C];M?m[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.warnOnce('Image "'+C+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,m)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var c=this.patterns[a],m=this.getImage(a);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{var w={w:m.data.width+2,h:m.data.height+2,x:0,y:0},E=new o.ImagePosition(w,m);this.patterns[a]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var c in this.patterns)a.push(this.patterns[c].bin);var m=o.potpack(a),w=m.w,E=m.h,C=this.atlasImage;for(var M in C.resize({width:w||1,height:E||1}),this.patterns){var N=this.patterns[M].bin,W=N.x+1,J=N.y+1,Q=this.images[M].data,se=Q.width,ne=Q.height;o.RGBAImage.copy(Q,C,{x:0,y:0},{x:W,y:J},{width:se,height:ne}),o.RGBAImage.copy(Q,C,{x:0,y:ne-1},{x:W,y:J-1},{width:se,height:1}),o.RGBAImage.copy(Q,C,{x:0,y:0},{x:W,y:J+ne},{width:se,height:1}),o.RGBAImage.copy(Q,C,{x:se-1,y:0},{x:W-1,y:J},{width:1,height:ne}),o.RGBAImage.copy(Q,C,{x:0,y:0},{x:W+se,y:J},{width:1,height:ne})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var c=0,m=a;c<m.length;c+=1){var w=m[c];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];Oe(E)&&this.updateImage(w,E)}}},s}(o.Evented),Lt=Qe,Mt=Qe,yt=1e20;function Qe(n,s,a,c,m,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=m||"sans-serif",this.fontWeight=w||"normal",this.radius=a||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function zr(n,s,a,c,m,w,E){for(var C=0;C<s;C++){for(var M=0;M<a;M++)c[M]=n[M*s+C];for(Cr(c,m,w,E,a),M=0;M<a;M++)n[M*s+C]=m[M]}for(M=0;M<a;M++){for(C=0;C<s;C++)c[C]=n[M*s+C];for(Cr(c,m,w,E,s),C=0;C<s;C++)n[M*s+C]=Math.sqrt(m[C])}}function Cr(n,s,a,c,m){a[0]=0,c[0]=-yt,c[1]=+yt;for(var w=1,E=0;w<m;w++){for(var C=(n[w]+w*w-(n[a[E]]+a[E]*a[E]))/(2*w-2*a[E]);C<=c[E];)E--,C=(n[w]+w*w-(n[a[E]]+a[E]*a[E]))/(2*w-2*a[E]);a[++E]=w,c[E]=C,c[E+1]=+yt}for(w=0,E=0;w<m;w++){for(;c[E+1]<w;)E++;s[w]=(w-a[E])*(w-a[E])+n[a[E]]}}Qe.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var m=s.data[4*c+3]/255;this.gridOuter[c]=m===1?0:m===0?yt:Math.pow(Math.max(0,.5-m),2),this.gridInner[c]=m===1?yt:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(zr(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),zr(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a},Lt.default=Mt;var sr=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};sr.prototype.setURL=function(n){this.url=n},sr.prototype.getGlyphs=function(n,s){var a=this,c=[];for(var m in n)for(var w=0,E=n[m];w<E.length;w+=1)c.push({stack:m,id:E[w]});o.asyncAll(c,function(C,M){var N=C.stack,W=C.id,J=a.entries[N];J||(J=a.entries[N]={glyphs:{},requests:{},ranges:{}});var Q=J.glyphs[W];if(Q===void 0){if(Q=a._tinySDF(J,N,W))return J.glyphs[W]=Q,void M(null,{stack:N,id:W,glyph:Q});var se=Math.floor(W/256);if(256*se>65535)M(new Error("glyphs > 65535 not supported"));else if(J.ranges[se])M(null,{stack:N,id:W,glyph:Q});else{var ne=J.requests[se];ne||(ne=J.requests[se]=[],sr.loadGlyphRange(N,se,a.url,a.requestManager,function(he,ae){if(ae){for(var fe in ae)a._doesCharSupportLocalGlyph(+fe)||(J.glyphs[+fe]=ae[+fe]);J.ranges[se]=!0}for(var ge=0,Ie=ne;ge<Ie.length;ge+=1)(0,Ie[ge])(he,ae);delete J.requests[se]})),ne.push(function(he,ae){he?M(he):ae&&M(null,{stack:N,id:W,glyph:ae[W]||null})})}}else M(null,{stack:N,id:W,glyph:Q})},function(C,M){if(C)s(C);else if(M){for(var N={},W=0,J=M;W<J.length;W+=1){var Q=J[W],se=Q.stack,ne=Q.id,he=Q.glyph;(N[se]||(N[se]={}))[ne]=he&&{id:he.id,bitmap:he.bitmap.clone(),metrics:he.metrics}}s(null,N)}})},sr.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](n)||o.isChar["Hangul Syllables"](n)||o.isChar.Hiragana(n)||o.isChar.Katakana(n))},sr.prototype._tinySDF=function(n,s,a){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(a)){var m=n.tinySDF;if(!m){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),m=n.tinySDF=new sr.TinySDF(24,3,8,.25,c,w)}return{id:a,bitmap:new o.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},sr.loadGlyphRange=function(n,s,a,c,m){var w=256*s,E=w+255,C=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",n).replace("{range}",w+"-"+E),o.ResourceType.Glyphs);o.getArrayBuffer(C,function(M,N){if(M)m(M);else if(N){for(var W={},J=0,Q=o.parseGlyphPBF(N);J<Q.length;J+=1){var se=Q[J];W[se.id]=se}m(null,W)}})},sr.TinySDF=Lt;var St=function(){this.specification=o.styleSpec.light.position};St.prototype.possiblyEvaluate=function(n,s){return o.sphericalToCartesian(n.expression.evaluate(s))},St.prototype.interpolate=function(n,s,a){return{x:o.number(n.x,s.x,a),y:o.number(n.y,s.y,a),z:o.number(n.z,s.z,a)}};var Tt=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new St,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Lr=function(n){function s(a){n.call(this),this._transitionable=new o.Transitionable(Tt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,c){if(c===void 0&&(c={}),!this._validate(o.validateLight,a,c))for(var m in a){var w=a[m];o.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),w):this._transitionable.setValue(m,w)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,c,m){return(!m||m.validate!==!1)&&o.emitValidationErrors(this,a.call(o.validateStyle,o.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},s}(o.Evented),Ot=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ot.prototype.getDash=function(n,s){var a=n.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(n,s)),this.dashEntry[a]},Ot.prototype.getDashRanges=function(n,s,a){var c=[],m=n.length%2==1?-n[n.length-1]*a:0,w=n[0]*a,E=!0;c.push({left:m,right:w,isDash:E,zeroLength:n[0]===0});for(var C=n[0],M=1;M<n.length;M++){var N=n[M];c.push({left:m=C*a,right:w=(C+=N)*a,isDash:E=!E,zeroLength:N===0})}return c},Ot.prototype.addRoundDash=function(n,s,a){for(var c=s/2,m=-a;m<=a;m++)for(var w=this.width*(this.nextRow+a+m),E=0,C=n[E],M=0;M<this.width;M++){M/C.right>1&&(C=n[++E]);var N=Math.abs(M-C.left),W=Math.abs(M-C.right),J=Math.min(N,W),Q=void 0,se=m/a*(c+1);if(C.isDash){var ne=c-Math.abs(se);Q=Math.sqrt(J*J+ne*ne)}else Q=c-Math.sqrt(J*J+se*se);this.data[w+M]=Math.max(0,Math.min(255,Q+128))}},Ot.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var a=n[s],c=n[s+1];a.zeroLength?n.splice(s,1):c&&c.isDash===a.isDash&&(c.left=a.left,n.splice(s,1))}var m=n[0],w=n[n.length-1];m.isDash===w.isDash&&(m.left=w.left-this.width,w.right=m.right+this.width);for(var E=this.width*this.nextRow,C=0,M=n[C],N=0;N<this.width;N++){N/M.right>1&&(M=n[++C]);var W=Math.abs(N-M.left),J=Math.abs(N-M.right),Q=Math.min(W,J);this.data[E+N]=Math.max(0,Math.min(255,(M.isDash?Q:-Q)+128))}},Ot.prototype.addDash=function(n,s){var a=s?7:0,c=2*a+1;if(this.nextRow+c>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var m=0,w=0;w<n.length;w++)m+=n[w];if(m!==0){var E=this.width/m,C=this.getDashRanges(n,this.width,E);s?this.addRoundDash(C,E,a):this.addRegularDash(C)}var M={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=c,this.dirty=!0,M},Ot.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var Rr=function n(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var c=this.workerPool.acquire(this.id),m=0;m<c.length;m++){var w=new n.Actor(c[m],a,this.id);w.name="Worker "+m,this.actors.push(w)}};function ot(n,s,a){var c=function(m,w){if(m)return a(m);if(w){var E=o.pick(o.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(C){return C.id})),E.tiles=s.canonicalizeTileset(E,n.url),a(null,E)}};return n.url?o.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),o.ResourceType.Source),c):o.browser.frame(function(){return c(null,n)})}Rr.prototype.broadcast=function(n,s,a){o.asyncAll(this.actors,function(c,m){c.send(n,s,m)},a=a||function(){})},Rr.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Rr.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},Rr.Actor=o.Actor;var Fr=function(n,s,a){this.bounds=o.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=a||24};Fr.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},Fr.prototype.contains=function(n){var s=Math.pow(2,n.z),a=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=a&&n.x<m&&n.y>=c&&n.y<w};var Qr=function(n){function s(a,c,m,w){if(n.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(c,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ot(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new Fr(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var c=this;return this.setSourceProperty(function(){c._options.tiles=a}),this},s.prototype.setUrl=function(a){var c=this;return this.setSourceProperty(function(){c.url=a,c._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(m,o.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(C,M){return delete a.request,a.aborted?c(null):C&&C.status!==404?c(C):(M&&M.resourceTiming&&(a.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&a.setExpiryData(M),a.loadVectorData(M,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",w,E.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",w,E.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(o.Evented),Ar=function(n){function s(a,c,m,w){n.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},c),o.extend(this,o.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ot(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new Fr(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,c){var m=this,w=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=o.getImage(this.map._requestManager.transformRequest(w,o.ResourceType.Tile),function(E,C){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(E)a.state="errored",c(E);else if(C){m.map._refreshExpiredTiles&&a.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=m.map.painter.context,N=M.gl;a.texture=m.map.painter.getTileTexture(C.width),a.texture?a.texture.update(C,{useMipmap:!0}):(a.texture=new o.Texture(M,C,N.RGBA,{useMipmap:!0}),a.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),M.extTextureFilterAnisotropic&&N.texParameterf(N.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),a.state="loaded",o.cacheEntryPossiblyAdded(m.dispatcher),c(null)}})},s.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request),c()},s.prototype.unloadTile=function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture),c()},s.prototype.hasTransition=function(){return!1},s}(o.Evented),dr=function(n){function s(a,c,m,w){n.call(this,a,c,m,w),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,C){E&&(a.state="errored",c(E)),C&&(a.dem=C,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}a.request=o.getImage(this.map._requestManager.transformRequest(m,o.ResourceType.Tile),(function(E,C){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(E)a.state="errored",c(E);else if(C){this.map._refreshExpiredTiles&&a.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=o.window.ImageBitmap&&C instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?C:o.browser.getImageData(C,1),N={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:M,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",N,w.bind(this)))}}).bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var c=a.canonical,m=Math.pow(2,c.z),w=(c.x-1+m)%m,E=c.x===0?a.wrap-1:a.wrap,C=(c.x+1+m)%m,M=c.x+1===m?a.wrap+1:a.wrap,N={};return N[new o.OverscaledTileID(a.overscaledZ,E,c.z,w,c.y).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,M,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(N[new o.OverscaledTileID(a.overscaledZ,E,c.z,w,c.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,M,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<m&&(N[new o.OverscaledTileID(a.overscaledZ,E,c.z,w,c.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,M,c.z,C,c.y+1).key]={backfilled:!1}),N},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(Ar),wi=function(n){function s(a,c,m,w){n.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(w),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*E,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius||50)*E,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)a.fire(new o.ErrorEvent(c));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new o.Event("data",m))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new o.ErrorEvent(m));else{var w={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(w.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new o.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(a,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c),this},s.prototype.getClusterChildren=function(a,c){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},c),this},s.prototype.getClusterLeaves=function(a,c,m,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:m},w),this},s.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var m=o.extend({},this.workerOptions),w=this._data;typeof w=="string"?(m.request=this.map._requestManager.transformRequest(o.browser.resolveURL(w),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(w),this.actor.send(this.type+".loadData",m,function(E,C){c._removed||C&&C.abandoned||(c._loaded=!0,C&&C.resourceTiming&&C.resourceTiming[c.id]&&(c._resourceTiming=C.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:m.source},null),a(E))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,c){var m=this,w=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(w,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,C){return delete a.request,a.unloadVectorData(),a.aborted?c(null):E?c(E):(a.loadVectorData(C,m.map.painter,w==="reloadTile"),c(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(o.Evented),Ve=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Tr=function(n){function s(a,c,m,w){n.call(this),this.id=a,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(a,c){var m=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(w,E){m._loaded=!0,w?m.fire(new o.ErrorEvent(w)):E&&(m.image=E,a&&(m.coordinates=a),c&&c(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;var m=a.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var C=1/0,M=1/0,N=-1/0,W=-1/0,J=0,Q=E;J<Q.length;J+=1){var se=Q[J];C=Math.min(C,se.x),M=Math.min(M,se.y),N=Math.max(N,se.x),W=Math.max(W,se.y)}var ne=Math.max(N-C,W-M),he=Math.max(0,Math.floor(-Math.log(ne)/Math.LN2)),ae=Math.pow(2,he);return new o.CanonicalTileID(he,Math.floor((C+N)/2*ae),Math.floor((M+W)/2*ae))}(m),this.minzoom=this.maxzoom=this.tileID.z;var w=m.map(function(E){return c.tileID.getTilePoint(E)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ve.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(o.Evented),vn=function(n){function s(a,c,m,w){n.call(this,a,c,m,w),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];for(var m=0,w=c.urls;m<w.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(w[m],o.ResourceType.Source).url);o.getVideo(this.urls,function(E,C){a._loaded=!0,E?a.fire(new o.ErrorEvent(E)):C&&(a.video=C,a.video.loop=!0,a.video.setAttribute("playsinline",""),a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Ve.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(Tr),Ta=function(n){function s(a,c,m,w){n.call(this,a,c,m,w),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(C){return typeof C!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,m=c.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Ve.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var m=c[a];if(isNaN(m)||m<=0)return!0}return!1},s}(Tr),ni={vector:Qr,raster:Ar,"raster-dem":dr,geojson:wi,video:vn,image:Tr,canvas:Ta};function _n(n,s){var a=o.identity([]);return o.translate(a,a,[1,1,0]),o.scale(a,a,[.5*n.width,.5*n.height,1]),o.multiply(a,a,n.calculatePosMatrix(s.toUnwrapped()))}function $r(n,s,a,c,m,w){var E=function(he,ae,fe){if(he)for(var ge=0,Ie=he;ge<Ie.length;ge+=1){var Be=ae[Ie[ge]];if(Be&&Be.source===fe&&Be.type==="fill-extrusion")return!0}else for(var Ae in ae){var Fe=ae[Ae];if(Fe.source===fe&&Fe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),C=w.maxPitchScaleFactor(),M=n.tilesIn(c,C,E);M.sort(za);for(var N=[],W=0,J=M;W<J.length;W+=1){var Q=J[W];N.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(s,a,n._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,m,w,C,_n(n.transform,Q.tileID))})}var se=function(he){for(var ae={},fe={},ge=0,Ie=he;ge<Ie.length;ge+=1){var Be=Ie[ge],Ae=Be.queryResults,Fe=Be.wrappedTileID,Ze=fe[Fe]=fe[Fe]||{};for(var Ke in Ae)for(var Xe=Ae[Ke],it=Ze[Ke]=Ze[Ke]||{},mt=ae[Ke]=ae[Ke]||[],vt=0,wt=Xe;vt<wt.length;vt+=1){var ar=wt[vt];it[ar.featureIndex]||(it[ar.featureIndex]=!0,mt.push(ar))}}return ae}(N);for(var ne in se)se[ne].forEach(function(he){var ae=he.feature,fe=n.getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=fe});return se}function za(n,s){var a=n.tileID,c=s.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}var hr=function(n,s){this.max=n,this.onRemove=s,this.reset()};hr.prototype.reset=function(){for(var n in this.data)for(var s=0,a=this.data[n];s<a.length;s+=1){var c=a[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},hr.prototype.add=function(n,s,a){var c=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var w={value:s,timeout:void 0};if(a!==void 0&&(w.timeout=setTimeout(function(){c.remove(n,w)},a)),this.data[m].push(w),this.order.push(m),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},hr.prototype.has=function(n){return n.wrapped().key in this.data},hr.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},hr.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},hr.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},hr.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},hr.prototype.remove=function(n,s){if(!this.has(n))return this;var a=n.wrapped().key,c=s===void 0?0:this.data[a].indexOf(s),m=this.data[a][c];return this.data[a].splice(c,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},hr.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},hr.prototype.filter=function(n){var s=[];for(var a in this.data)for(var c=0,m=this.data[a];c<m.length;c+=1){var w=m[c];n(w.value)||s.push(w)}for(var E=0,C=s;E<C.length;E+=1){var M=C[E];this.remove(M.value.tileID,M)}};var Pn=function(n,s,a){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Pn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Pn.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Pn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ns={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Mn=function(n,s,a,c){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Mn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Mn.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},Mn.prototype.enableAttributes=function(n,s){for(var a=0;a<this.attributes.length;a++){var c=s.attributes[this.attributes[a].name];c!==void 0&&n.enableVertexAttribArray(c)}},Mn.prototype.setVertexAttribPointers=function(n,s,a){for(var c=0;c<this.attributes.length;c++){var m=this.attributes[c],w=s.attributes[m.name];w!==void 0&&n.vertexAttribPointer(w,m.components,n[ns[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},Mn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Vt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Vt.prototype.get=function(){return this.current},Vt.prototype.set=function(n){},Vt.prototype.getDefault=function(){return this.default},Vt.prototype.setDefault=function(){this.set(this.default)};var Ca=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Vt),Ni=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(Vt),pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(Vt),$i=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Vt),yi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(Vt),Mi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(Vt),pi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(Vt),fi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(Vt),un=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(Vt),mr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Vt),Pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(Vt),tr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(Vt),yr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}},s}(Vt),Ki=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Vt),Dn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Vt),Bs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(Vt),To=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}},s}(Vt),Ln=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(Vt),Os=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(Vt),lo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(Vt),aa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(Vt),oa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Vt),uo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(Vt),zo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Vt),as=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(Vt),Co=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(Vt),Aa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(Vt),ai=function(n){function s(a){n.call(this,a),this.vao=a.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(Vt),cn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(Vt),Kn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(Vt),Ka=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(Vt),br=function(n){function s(a,c){n.call(this,a),this.context=a,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Vt),B=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(br),q=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(br),K=function(n,s,a,c){this.context=n,this.width=s,this.height=a;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new B(n,m),c&&(this.depthAttachment=new q(n,m))};K.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&n.deleteRenderbuffer(a)}n.deleteFramebuffer(this.framebuffer)};var $=function(n,s,a){this.func=n,this.mask=s,this.range=a};$.ReadOnly=!1,$.ReadWrite=!0,$.disabled=new $(519,$.ReadOnly,[0,1]);var le=function(n,s,a,c,m,w){this.test=n,this.ref=s,this.mask=a,this.fail=c,this.depthFail=m,this.pass=w};le.disabled=new le({func:519,mask:0},0,0,7680,7680,7680);var me=function(n,s,a){this.blendFunction=n,this.blendColor=s,this.mask=a};me.disabled=new me(me.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),me.unblended=new me(me.Replace,o.Color.transparent,[!0,!0,!0,!0]),me.alphaBlended=new me([1,771],o.Color.transparent,[!0,!0,!0,!0]);var ye=function(n,s,a){this.enable=n,this.mode=s,this.frontFace=a};ye.disabled=new ye(!1,1029,2305),ye.backCCW=new ye(!0,1029,2305);var G=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ca(this),this.clearDepth=new Ni(this),this.clearStencil=new pr(this),this.colorMask=new $i(this),this.depthMask=new yi(this),this.stencilMask=new Mi(this),this.stencilFunc=new pi(this),this.stencilOp=new fi(this),this.stencilTest=new un(this),this.depthRange=new mr(this),this.depthTest=new Pr(this),this.depthFunc=new tr(this),this.blend=new yr(this),this.blendFunc=new Ki(this),this.blendColor=new Dn(this),this.blendEquation=new Bs(this),this.cullFace=new To(this),this.cullFaceSide=new Ln(this),this.frontFace=new Os(this),this.program=new lo(this),this.activeTexture=new aa(this),this.viewport=new oa(this),this.bindFramebuffer=new uo(this),this.bindRenderbuffer=new zo(this),this.bindTexture=new as(this),this.bindVertexBuffer=new Co(this),this.bindElementBuffer=new Aa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ai(this),this.pixelStoreUnpack=new cn(this),this.pixelStoreUnpackPremultiplyAlpha=new Kn(this),this.pixelStoreUnpackFlipY=new Ka(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};G.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},G.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},G.prototype.createIndexBuffer=function(n,s){return new Pn(this,n,s)},G.prototype.createVertexBuffer=function(n,s,a){return new Mn(this,n,s,a)},G.prototype.createRenderbuffer=function(n,s,a){var c=this.gl,m=c.createRenderbuffer();return this.bindRenderbuffer.set(m),c.renderbufferStorage(c.RENDERBUFFER,n,s,a),this.bindRenderbuffer.set(null),m},G.prototype.createFramebuffer=function(n,s,a){return new K(this,n,s,a)},G.prototype.clear=function(n){var s=n.color,a=n.depth,c=this.gl,m=0;s&&(m|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c.clear(m)},G.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},G.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},G.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},G.prototype.setColorMode=function(n){o.deepEqual(n.blendFunction,me.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},G.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var te=function(n){function s(a,c,m){var w=this;n.call(this),this.id=a,this.dispatcher=m,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,C,M,N){var W=new ni[C.type](E,C,M,N);if(W.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+W.id);return o.bindAll(["load","abort","unload","serialize","prepare"],W),W}(a,c,m,this),this._tiles={},this._cache=new hr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[c];m.upload(a),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return o.values(this._tiles).map(function(a){return a.tileID}).sort(ke).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var c=this,m=[];for(var w in this._tiles)this._isIdRenderable(w,a)&&m.push(this._tiles[w]);return a?m.sort(function(E,C){var M=E.tileID,N=C.tileID,W=new o.Point(M.canonical.x,M.canonical.y)._rotate(c.transform.angle),J=new o.Point(N.canonical.x,N.canonical.y)._rotate(c.transform.angle);return M.overscaledZ-N.overscaledZ||J.y-W.y||J.x-W.x}).map(function(E){return E.tileID.key}):m.map(function(E){return E.tileID}).sort(ke).map(function(E){return E.key})},s.prototype.hasRenderableParent=function(a){var c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,c){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,a,c)))},s.prototype._tileLoaded=function(a,c,m,w){if(w)return a.state="errored",void(w.status!==404?this._source.fire(new o.ErrorEvent(w,{tile:a})):this.update(this.transform));a.timeAdded=o.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var c=this.getRenderableIds(),m=0;m<c.length;m++){var w=c[m];if(a.neighboringTiles&&a.neighboringTiles[w]){var E=this.getTileByID(w);C(a,E),C(E,a)}}function C(M,N){M.needsHillshadePrepare=!0;var W=N.tileID.canonical.x-M.tileID.canonical.x,J=N.tileID.canonical.y-M.tileID.canonical.y,Q=Math.pow(2,M.tileID.canonical.z),se=N.tileID.key;W===0&&J===0||Math.abs(J)>1||(Math.abs(W)>1&&(Math.abs(W+Q)===1?W+=Q:Math.abs(W-Q)===1&&(W-=Q)),N.dem&&M.dem&&(M.dem.backfillBorder(N.dem,W,J),M.neighboringTiles&&M.neighboringTiles[se]&&(M.neighboringTiles[se].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,c,m,w){for(var E in this._tiles){var C=this._tiles[E];if(!(w[E]||!C.hasData()||C.tileID.overscaledZ<=c||C.tileID.overscaledZ>m)){for(var M=C.tileID;C&&C.tileID.overscaledZ>c+1;){var N=C.tileID.scaledTo(C.tileID.overscaledZ-1);(C=this._tiles[N.key])&&C.hasData()&&(M=N)}for(var W=M;W.overscaledZ>c;)if(a[(W=W.scaledTo(W.overscaledZ-1)).key]){w[M.key]=M;break}}}},s.prototype.findLoadedParent=function(a,c){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=c?m:null}for(var w=a.overscaledZ-1;w>=c;w--){var E=a.scaledTo(w),C=this._getLoadedTile(E);if(C)return C}},s.prototype._getLoadedTile=function(a){var c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var c=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,w=Math.floor(c*m*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},s.prototype.handleWrapJump=function(a){var c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){var m={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),m[E.tileID.key]=E}for(var C in this._tiles=m,this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(var M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}},s.prototype.update=function(a){var c=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ze){return new o.OverscaledTileID(Ze.canonical.z,Ze.wrap,Ze.canonical.z,Ze.canonical.x,Ze.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ze){return c._source.hasTile(Ze)}))):m=[];var w=a.coveringZoomLevel(this._source),E=Math.max(w-s.maxOverzooming,this._source.minzoom),C=Math.max(w+s.maxUnderzooming,this._source.minzoom),M=this._updateRetainedTiles(m,w);if(Ue(this._source.type)){for(var N={},W={},J=0,Q=Object.keys(M);J<Q.length;J+=1){var se=Q[J],ne=M[se],he=this._tiles[se];if(he&&!(he.fadeEndTime&&he.fadeEndTime<=o.browser.now())){var ae=this.findLoadedParent(ne,E);ae&&(this._addTile(ae.tileID),N[ae.tileID.key]=ae.tileID),W[se]=ne}}for(var fe in this._retainLoadedChildren(W,w,C,M),N)M[fe]||(this._coveredTiles[fe]=!0,M[fe]=N[fe])}for(var ge in M)this._tiles[ge].clearFadeHold();for(var Ie=0,Be=o.keysDifference(this._tiles,M);Ie<Be.length;Ie+=1){var Ae=Be[Ie],Fe=this._tiles[Ae];Fe.hasSymbolBuckets&&!Fe.holdingForFade()?Fe.setHoldDuration(this.map._fadeDuration):Fe.hasSymbolBuckets&&!Fe.symbolFadeFinished()||this._removeTile(Ae)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,c){for(var m={},w={},E=Math.max(c-s.maxOverzooming,this._source.minzoom),C=Math.max(c+s.maxUnderzooming,this._source.minzoom),M={},N=0,W=a;N<W.length;N+=1){var J=W[N],Q=this._addTile(J);m[J.key]=J,Q.hasData()||c<this._source.maxzoom&&(M[J.key]=J)}this._retainLoadedChildren(M,c,C,m);for(var se=0,ne=a;se<ne.length;se+=1){var he=ne[se],ae=this._tiles[he.key];if(!ae.hasData()){if(c+1>this._source.maxzoom){var fe=he.children(this._source.maxzoom)[0],ge=this.getTile(fe);if(ge&&ge.hasData()){m[fe.key]=fe;continue}}else{var Ie=he.children(this._source.maxzoom);if(m[Ie[0].key]&&m[Ie[1].key]&&m[Ie[2].key]&&m[Ie[3].key])continue}for(var Be=ae.wasRequested(),Ae=he.overscaledZ-1;Ae>=E;--Ae){var Fe=he.scaledTo(Ae);if(w[Fe.key]||(w[Fe.key]=!0,!(ae=this.getTile(Fe))&&Be&&(ae=this._addTile(Fe)),ae&&(m[Fe.key]=Fe,Be=ae.wasRequested(),ae.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var c=[],m=void 0,w=this._tiles[a].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){m=this._loadedParentTiles[w.key];break}c.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(m=this._getLoadedTile(E))break;w=E}for(var C=0,M=c;C<M.length;C+=1)this._loadedParentTiles[M[C]]=m}},s.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var m=!!c;return m||(c=new o.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,m||this._source.fire(new o.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(a,c){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var w=c.getExpiryTimeout();w&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},w))},s.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,c,m){var w=this,E=[],C=this.transform;if(!C)return E;for(var M=m?C.getCameraQueryGeometry(a):a,N=a.map(function(Ae){return C.pointCoordinate(Ae)}),W=M.map(function(Ae){return C.pointCoordinate(Ae)}),J=this.getIds(),Q=1/0,se=1/0,ne=-1/0,he=-1/0,ae=0,fe=W;ae<fe.length;ae+=1){var ge=fe[ae];Q=Math.min(Q,ge.x),se=Math.min(se,ge.y),ne=Math.max(ne,ge.x),he=Math.max(he,ge.y)}for(var Ie=function(Ae){var Fe=w._tiles[J[Ae]];if(!Fe.holdingForFade()){var Ze=Fe.tileID,Ke=Math.pow(2,C.zoom-Fe.tileID.overscaledZ),Xe=c*Fe.queryPadding*o.EXTENT/Fe.tileSize/Ke,it=[Ze.getTilePoint(new o.MercatorCoordinate(Q,se)),Ze.getTilePoint(new o.MercatorCoordinate(ne,he))];if(it[0].x-Xe<o.EXTENT&&it[0].y-Xe<o.EXTENT&&it[1].x+Xe>=0&&it[1].y+Xe>=0){var mt=N.map(function(wt){return Ze.getTilePoint(wt)}),vt=W.map(function(wt){return Ze.getTilePoint(wt)});E.push({tile:Fe,tileID:Ze,queryGeometry:mt,cameraQueryGeometry:vt,scale:Ke})}}},Be=0;Be<J.length;Be++)Ie(Be);return E},s.prototype.getVisibleCoordinates=function(a){for(var c=this,m=this.getRenderableIds(a).map(function(M){return c._tiles[M].tileID}),w=0,E=m;w<E.length;w+=1){var C=E[w];C.posMatrix=this.transform.calculatePosMatrix(C.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=o.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,c,m){this._state.updateState(a=a||"_geojsonTileLayer",c,m)},s.prototype.removeFeatureState=function(a,c,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,m)},s.prototype.getFeatureState=function(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(a,c,m){var w=this._tiles[a];w&&w.setDependencies(c,m)},s.prototype.reloadTilesForDependencies=function(a,c){for(var m in this._tiles)this._tiles[m].hasDependency(a,c)&&this._reloadTile(m,"reloading");this._cache.filter(function(w){return!w.hasDependency(a,c)})},s}(o.Evented);function ke(n,s){var a=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-a||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ue(n){return n==="raster"||n==="image"||n==="video"}function He(){return new o.window.Worker(ya.workerUrl)}te.maxOverzooming=10,te.maxUnderzooming=3;var Re="mapboxgl_preloaded_worker_pool",qe=function(){this.active={}};qe.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new He);return this.active[n]=!0,this.workers.slice()},qe.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},qe.prototype.isPreloaded=function(){return!!this.active[Re]},qe.prototype.numActive=function(){return Object.keys(this.active).length};var at,st=Math.floor(o.browser.hardwareConcurrency/2);function Le(){return at||(at=new qe),at}function tt(n,s){var a={};for(var c in n)c!=="ref"&&(a[c]=n[c]);return o.refProperties.forEach(function(m){m in s&&(a[m]=s[m])}),a}function Je(n){n=n.slice();for(var s=Object.create(null),a=0;a<n.length;a++)s[n[a].id]=n[a];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=tt(n[c],s[n[c].ref]));return n}qe.workerCount=Math.max(Math.min(st,6),1);var Ye={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Gt(n,s,a){a.push({command:Ye.addSource,args:[n,s[n]]})}function rt(n,s,a){s.push({command:Ye.removeSource,args:[n]}),a[n]=!0}function Rt(n,s,a,c){rt(n,a,c),Gt(n,s,a)}function $t(n,s,a){var c;for(c in n[a])if(n[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;for(c in s[a])if(s[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;return!0}function At(n,s,a,c,m,w){var E;for(E in s=s||{},n=n||{})n.hasOwnProperty(E)&&(o.deepEqual(n[E],s[E])||a.push({command:w,args:[c,E,s[E],m]}));for(E in s)s.hasOwnProperty(E)&&!n.hasOwnProperty(E)&&(o.deepEqual(n[E],s[E])||a.push({command:w,args:[c,E,s[E],m]}))}function Jt(n){return n.id}function rr(n,s){return n[s.id]=s,n}var di=function(n,s){this.reset(n,s)};di.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},di.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=o.clamp(n,0,1);for(var s=1,a=this._distances[s],c=n*this.paddedLength+this.padding;a<c&&s<this._distances.length;)a=this._distances[++s];var m=s-1,w=this._distances[m],E=a-w,C=E>0?(c-w)/E:0;return this.points[m].mult(1-C).add(this.points[s].mult(C))};var lr=function(n,s,a){var c=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/a),this.yCellCount=Math.ceil(s/a);for(var w=0;w<this.xCellCount*this.yCellCount;w++)c.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function oi(n,s,a,c,m){var w=o.create();return s?(o.scale(w,w,[1/m,1/m,1]),a||o.rotateZ(w,w,c.angle)):o.multiply(w,c.labelPlaneMatrix,n),w}function gr(n,s,a,c,m){if(s){var w=o.clone(n);return o.scale(w,w,[m,m,1]),a||o.rotateZ(w,w,-c.angle),w}return c.glCoordMatrix}function Nt(n,s){var a=[n.x,n.y,0,1];Li(a,a,s);var c=a[3];return{point:new o.Point(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function ur(n,s){return .5+n/s*.5}function Ui(n,s){var a=n[0]/n[3],c=n[1]/n[3];return a>=-s[0]&&a<=s[0]&&c>=-s[1]&&c<=s[1]}function co(n,s,a,c,m,w,E,C){var M=c?n.textSizeData:n.iconSizeData,N=o.evaluateSizeForZoom(M,a.transform.zoom),W=[256/a.width*2+1,256/a.height*2+1],J=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;J.clear();for(var Q=n.lineVertexArray,se=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,ne=a.transform.width/a.transform.height,he=!1,ae=0;ae<se.length;ae++){var fe=se.get(ae);if(fe.hidden||fe.writingMode===o.WritingMode.vertical&&!he)Di(fe.numGlyphs,J);else{he=!1;var ge=[fe.anchorX,fe.anchorY,0,1];if(o.transformMat4(ge,ge,s),Ui(ge,W)){var Ie=ur(a.transform.cameraToCenterDistance,ge[3]),Be=o.evaluateSizeForFeature(M,N,fe),Ae=E?Be/Ie:Be*Ie,Fe=new o.Point(fe.anchorX,fe.anchorY),Ze=Nt(Fe,m).point,Ke={},Xe=bn(fe,Ae,!1,C,s,m,w,n.glyphOffsetArray,Q,J,Ze,Fe,Ke,ne);he=Xe.useVertical,(Xe.notEnoughRoom||he||Xe.needsFlipping&&bn(fe,Ae,!0,C,s,m,w,n.glyphOffsetArray,Q,J,Ze,Fe,Ke,ne).notEnoughRoom)&&Di(fe.numGlyphs,J)}else Di(fe.numGlyphs,J)}}c?n.text.dynamicLayoutVertexBuffer.updateData(J):n.icon.dynamicLayoutVertexBuffer.updateData(J)}function Ei(n,s,a,c,m,w,E,C,M,N,W){var J=C.glyphStartIndex+C.numGlyphs,Q=C.lineStartIndex,se=C.lineStartIndex+C.lineLength,ne=s.getoffsetX(C.glyphStartIndex),he=s.getoffsetX(J-1),ae=ei(n*ne,a,c,m,w,E,C.segment,Q,se,M,N,W);if(!ae)return null;var fe=ei(n*he,a,c,m,w,E,C.segment,Q,se,M,N,W);return fe?{first:ae,last:fe}:null}function si(n,s,a,c){return n===o.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*c?{useVertical:!0}:(n===o.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function bn(n,s,a,c,m,w,E,C,M,N,W,J,Q,se){var ne,he=s/24,ae=n.lineOffsetX*he,fe=n.lineOffsetY*he;if(n.numGlyphs>1){var ge=n.glyphStartIndex+n.numGlyphs,Ie=n.lineStartIndex,Be=n.lineStartIndex+n.lineLength,Ae=Ei(he,C,ae,fe,a,W,J,n,M,w,Q);if(!Ae)return{notEnoughRoom:!0};var Fe=Nt(Ae.first.point,E).point,Ze=Nt(Ae.last.point,E).point;if(c&&!a){var Ke=si(n.writingMode,Fe,Ze,se);if(Ke)return Ke}ne=[Ae.first];for(var Xe=n.glyphStartIndex+1;Xe<ge-1;Xe++)ne.push(ei(he*C.getoffsetX(Xe),ae,fe,a,W,J,n.segment,Ie,Be,M,w,Q));ne.push(Ae.last)}else{if(c&&!a){var it=Nt(J,m).point,mt=n.lineStartIndex+n.segment+1,vt=new o.Point(M.getx(mt),M.gety(mt)),wt=Nt(vt,m),ar=wt.signedDistanceFromCamera>0?wt.point:xn(J,vt,it,1,m),ct=si(n.writingMode,it,ar,se);if(ct)return ct}var Ft=ei(he*C.getoffsetX(n.glyphStartIndex),ae,fe,a,W,J,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,M,w,Q);if(!Ft)return{notEnoughRoom:!0};ne=[Ft]}for(var Qt=0,zt=ne;Qt<zt.length;Qt+=1){var Dt=zt[Qt];o.addDynamicAttributes(N,Dt.point,Dt.angle)}return{}}function xn(n,s,a,c,m){var w=Nt(n.add(n.sub(s)._unit()),m).point,E=a.sub(w);return a.add(E._mult(c/E.mag()))}function ei(n,s,a,c,m,w,E,C,M,N,W,J){var Q=c?n-s:n+s,se=Q>0?1:-1,ne=0;c&&(se*=-1,ne=Math.PI),se<0&&(ne+=Math.PI);for(var he=se>0?C+E:C+E+1,ae=m,fe=m,ge=0,Ie=0,Be=Math.abs(Q),Ae=[];ge+Ie<=Be;){if((he+=se)<C||he>=M)return null;if(fe=ae,Ae.push(ae),(ae=J[he])===void 0){var Fe=new o.Point(N.getx(he),N.gety(he)),Ze=Nt(Fe,W);if(Ze.signedDistanceFromCamera>0)ae=J[he]=Ze.point;else{var Ke=he-se;ae=xn(ge===0?w:new o.Point(N.getx(Ke),N.gety(Ke)),Fe,fe,Be-ge+1,W)}}ge+=Ie,Ie=fe.dist(ae)}var Xe=(Be-ge)/Ie,it=ae.sub(fe),mt=it.mult(Xe)._add(fe);mt._add(it._unit()._perp()._mult(a*se));var vt=ne+Math.atan2(ae.y-fe.y,ae.x-fe.x);return Ae.push(mt),{point:mt,angle:vt,path:Ae}}lr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},lr.prototype.insert=function(n,s,a,c,m){this._forEachCell(s,a,c,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(m)},lr.prototype.insertCircle=function(n,s,a,c){this._forEachCell(s-c,a-c,s+c,a+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(a),this.circles.push(c)},lr.prototype._insertBoxCell=function(n,s,a,c,m,w){this.boxCells[m].push(w)},lr.prototype._insertCircleCell=function(n,s,a,c,m,w){this.circleCells[m].push(w)},lr.prototype._query=function(n,s,a,c,m,w){if(a<0||n>this.width||c<0||s>this.height)return!m&&[];var E=[];if(n<=0&&s<=0&&this.width<=a&&this.height<=c){if(m)return!0;for(var C=0;C<this.boxKeys.length;C++)E.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(var M=0;M<this.circleKeys.length;M++){var N=this.circles[3*M],W=this.circles[3*M+1],J=this.circles[3*M+2];E.push({key:this.circleKeys[M],x1:N-J,y1:W-J,x2:N+J,y2:W+J})}return w?E.filter(w):E}return this._forEachCell(n,s,a,c,this._queryCell,E,{hitTest:m,seenUids:{box:{},circle:{}}},w),m?E.length>0:E},lr.prototype._queryCircle=function(n,s,a,c,m){var w=n-a,E=n+a,C=s-a,M=s+a;if(E<0||w>this.width||M<0||C>this.height)return!c&&[];var N=[];return this._forEachCell(w,C,E,M,this._queryCellCircle,N,{hitTest:c,circle:{x:n,y:s,radius:a},seenUids:{box:{},circle:{}}},m),c?N.length>0:N},lr.prototype.query=function(n,s,a,c,m){return this._query(n,s,a,c,!1,m)},lr.prototype.hitTest=function(n,s,a,c,m){return this._query(n,s,a,c,!0,m)},lr.prototype.hitTestCircle=function(n,s,a,c){return this._queryCircle(n,s,a,!0,c)},lr.prototype._queryCell=function(n,s,a,c,m,w,E,C){var M=E.seenUids,N=this.boxCells[m];if(N!==null)for(var W=this.bboxes,J=0,Q=N;J<Q.length;J+=1){var se=Q[J];if(!M.box[se]){M.box[se]=!0;var ne=4*se;if(n<=W[ne+2]&&s<=W[ne+3]&&a>=W[ne+0]&&c>=W[ne+1]&&(!C||C(this.boxKeys[se]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[se],x1:W[ne],y1:W[ne+1],x2:W[ne+2],y2:W[ne+3]})}}}var he=this.circleCells[m];if(he!==null)for(var ae=this.circles,fe=0,ge=he;fe<ge.length;fe+=1){var Ie=ge[fe];if(!M.circle[Ie]){M.circle[Ie]=!0;var Be=3*Ie;if(this._circleAndRectCollide(ae[Be],ae[Be+1],ae[Be+2],n,s,a,c)&&(!C||C(this.circleKeys[Ie]))){if(E.hitTest)return w.push(!0),!0;var Ae=ae[Be],Fe=ae[Be+1],Ze=ae[Be+2];w.push({key:this.circleKeys[Ie],x1:Ae-Ze,y1:Fe-Ze,x2:Ae+Ze,y2:Fe+Ze})}}}},lr.prototype._queryCellCircle=function(n,s,a,c,m,w,E,C){var M=E.circle,N=E.seenUids,W=this.boxCells[m];if(W!==null)for(var J=this.bboxes,Q=0,se=W;Q<se.length;Q+=1){var ne=se[Q];if(!N.box[ne]){N.box[ne]=!0;var he=4*ne;if(this._circleAndRectCollide(M.x,M.y,M.radius,J[he+0],J[he+1],J[he+2],J[he+3])&&(!C||C(this.boxKeys[ne])))return w.push(!0),!0}}var ae=this.circleCells[m];if(ae!==null)for(var fe=this.circles,ge=0,Ie=ae;ge<Ie.length;ge+=1){var Be=Ie[ge];if(!N.circle[Be]){N.circle[Be]=!0;var Ae=3*Be;if(this._circlesCollide(fe[Ae],fe[Ae+1],fe[Ae+2],M.x,M.y,M.radius)&&(!C||C(this.circleKeys[Be])))return w.push(!0),!0}}},lr.prototype._forEachCell=function(n,s,a,c,m,w,E,C){for(var M=this._convertToXCellCoord(n),N=this._convertToYCellCoord(s),W=this._convertToXCellCoord(a),J=this._convertToYCellCoord(c),Q=M;Q<=W;Q++)for(var se=N;se<=J;se++)if(m.call(this,n,s,a,c,this.xCellCount*se+Q,w,E,C))return},lr.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},lr.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},lr.prototype._circlesCollide=function(n,s,a,c,m,w){var E=c-n,C=m-s,M=a+w;return M*M>E*E+C*C},lr.prototype._circleAndRectCollide=function(n,s,a,c,m,w,E){var C=(w-c)/2,M=Math.abs(n-(c+C));if(M>C+a)return!1;var N=(E-m)/2,W=Math.abs(s-(m+N));if(W>N+a)return!1;if(M<=C||W<=N)return!0;var J=M-C,Q=W-N;return J*J+Q*Q<=a*a};var sa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Di(n,s){for(var a=0;a<n;a++){var c=s.length;s.resize(c+4),s.float32.set(sa,3*c)}}function Li(n,s,a){var c=s[0],m=s[1];return n[0]=a[0]*c+a[4]*m+a[12],n[1]=a[1]*c+a[5]*m+a[13],n[3]=a[3]*c+a[7]*m+a[15],n}var wn=function(n,s,a){s===void 0&&(s=new lr(n.width+200,n.height+200,25)),a===void 0&&(a=new lr(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function xr(n,s,a){return s*(o.EXTENT/(n.tileSize*Math.pow(2,a-n.tileID.overscaledZ)))}wn.prototype.placeCollisionBox=function(n,s,a,c,m){var w=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),E=a*w.perspectiveRatio,C=n.x1*E+w.point.x,M=n.y1*E+w.point.y,N=n.x2*E+w.point.x,W=n.y2*E+w.point.y;return!this.isInsideGrid(C,M,N,W)||!s&&this.grid.hitTest(C,M,N,W,m)?{box:[],offscreen:!1}:{box:[C,M,N,W],offscreen:this.isOffscreen(C,M,N,W)}},wn.prototype.placeCollisionCircles=function(n,s,a,c,m,w,E,C,M,N,W,J,Q){var se=[],ne=new o.Point(s.anchorX,s.anchorY),he=Nt(ne,w),ae=ur(this.transform.cameraToCenterDistance,he.signedDistanceFromCamera),fe=(N?m/ae:m*ae)/o.ONE_EM,ge=Nt(ne,E).point,Ie=Ei(fe,c,s.lineOffsetX*fe,s.lineOffsetY*fe,!1,ge,ne,s,a,E,{}),Be=!1,Ae=!1,Fe=!0;if(Ie){for(var Ze=.5*J*ae+Q,Ke=new o.Point(-100,-100),Xe=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),it=new di,mt=Ie.first,vt=Ie.last,wt=[],ar=mt.path.length-1;ar>=1;ar--)wt.push(mt.path[ar]);for(var ct=1;ct<vt.path.length;ct++)wt.push(vt.path[ct]);var Ft=2.5*Ze;if(C){var Qt=wt.map(function(Zn){return Nt(Zn,C)});wt=Qt.some(function(Zn){return Zn.signedDistanceFromCamera<=0})?[]:Qt.map(function(Zn){return Zn.point})}var zt=[];if(wt.length>0){for(var Dt=wt[0].clone(),Xt=wt[0].clone(),It=1;It<wt.length;It++)Dt.x=Math.min(Dt.x,wt[It].x),Dt.y=Math.min(Dt.y,wt[It].y),Xt.x=Math.max(Xt.x,wt[It].x),Xt.y=Math.max(Xt.y,wt[It].y);zt=Dt.x>=Ke.x&&Xt.x<=Xe.x&&Dt.y>=Ke.y&&Xt.y<=Xe.y?[wt]:Xt.x<Ke.x||Dt.x>Xe.x||Xt.y<Ke.y||Dt.y>Xe.y?[]:o.clipLine([wt],Ke.x,Ke.y,Xe.x,Xe.y)}for(var Ct=0,Wi=zt;Ct<Wi.length;Ct+=1){var Jr;it.reset(Wi[Ct],.25*Ze),Jr=it.length<=.5*Ze?1:Math.ceil(it.paddedLength/Ft)+1;for(var Bi=0;Bi<Jr;Bi++){var dn=Bi/Math.max(Jr-1,1),gi=it.lerp(dn),ri=gi.x+100,Oi=gi.y+100;se.push(ri,Oi,Ze,0);var jn=ri-Ze,Oo=Oi-Ze,qn=ri+Ze,_o=Oi+Ze;if(Fe=Fe&&this.isOffscreen(jn,Oo,qn,_o),Ae=Ae||this.isInsideGrid(jn,Oo,qn,_o),!n&&this.grid.hitTestCircle(ri,Oi,Ze,W)&&(Be=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Be}}}}return{circles:!M&&Be||!Ae?[]:se,offscreen:Fe,collisionDetected:Be}},wn.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,c=1/0,m=-1/0,w=-1/0,E=0,C=n;E<C.length;E+=1){var M=C[E],N=new o.Point(M.x+100,M.y+100);a=Math.min(a,N.x),c=Math.min(c,N.y),m=Math.max(m,N.x),w=Math.max(w,N.y),s.push(N)}for(var W={},J={},Q=0,se=this.grid.query(a,c,m,w).concat(this.ignoredGrid.query(a,c,m,w));Q<se.length;Q+=1){var ne=se[Q],he=ne.key;if(W[he.bucketInstanceId]===void 0&&(W[he.bucketInstanceId]={}),!W[he.bucketInstanceId][he.featureIndex]){var ae=[new o.Point(ne.x1,ne.y1),new o.Point(ne.x2,ne.y1),new o.Point(ne.x2,ne.y2),new o.Point(ne.x1,ne.y2)];o.polygonIntersectsPolygon(s,ae)&&(W[he.bucketInstanceId][he.featureIndex]=!0,J[he.bucketInstanceId]===void 0&&(J[he.bucketInstanceId]=[]),J[he.bucketInstanceId].push(he.featureIndex))}}return J},wn.prototype.insertCollisionBox=function(n,s,a,c,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:c,collisionGroupID:m},n[0],n[1],n[2],n[3])},wn.prototype.insertCollisionCircles=function(n,s,a,c,m){for(var w=s?this.ignoredGrid:this.grid,E={bucketInstanceId:a,featureIndex:c,collisionGroupID:m},C=0;C<n.length;C+=4)w.insertCircle(E,n[C],n[C+1],n[C+2])},wn.prototype.projectAndGetPerspectiveRatio=function(n,s,a){var c=[s,a,0,1];return Li(c,c,n),{point:new o.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},wn.prototype.isOffscreen=function(n,s,a,c){return a<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},wn.prototype.isInsideGrid=function(n,s,a,c){return a>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},wn.prototype.getViewportMatrix=function(){var n=o.identity([]);return o.translate(n,n,[-100,-100,0]),n};var Pa=function(n,s,a,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&a?1:0,this.placed=a};Pa.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Rn=function(n,s,a,c,m){this.text=new Pa(n?n.text:null,s,a,m),this.icon=new Pa(n?n.icon:null,s,c,m)};Rn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ao=function(n,s,a){this.text=n,this.icon=s,this.skipFade=a},Ti=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},ho=function(n,s,a,c,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=c,this.tileID=m},en=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function ji(n,s,a,c,m){var w=o.getAnchorAlignment(n),E=-(w.horizontalAlign-.5)*s,C=-(w.verticalAlign-.5)*a,M=o.evaluateVariableOffset(n,c);return new o.Point(E+M[0]*m,C+M[1]*m)}function zi(n,s,a,c,m,w){var E=n.x1,C=n.x2,M=n.y1,N=n.y2,W=n.anchorPointX,J=n.anchorPointY,Q=new o.Point(s,a);return c&&Q._rotate(m?w:-w),{x1:E+Q.x,y1:M+Q.y,x2:C+Q.x,y2:N+Q.y,anchorPointX:W,anchorPointY:J}}en.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[n]};var ti=function(n,s,a,c){this.transform=n.clone(),this.collisionIndex=new wn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new en(a),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function En(n,s,a,c,m){n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0)}ti.prototype.getBucketParts=function(n,s,a,c){var m=a.getBucket(s),w=a.latestFeatureIndex;if(m&&w&&s.id===m.layerIds[0]){var E=a.collisionBoxArray,C=m.layers[0].layout,M=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),N=a.tileSize/o.EXTENT,W=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),J=C.get("text-pitch-alignment")==="map",Q=C.get("text-rotation-alignment")==="map",se=xr(a,1,this.transform.zoom),ne=oi(W,J,Q,this.transform,se),he=null;if(J){var ae=gr(W,J,Q,this.transform,se);he=o.multiply([],this.transform.labelPlaneMatrix,ae)}this.retainedQueryData[m.bucketInstanceId]=new ho(m.bucketInstanceId,w,m.sourceLayerIndex,m.index,a.tileID);var fe={bucket:m,layout:C,posMatrix:W,textLabelPlaneMatrix:ne,labelToScreenMatrix:he,scale:M,textPixelRatio:N,holdingForFade:a.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(c)for(var ge=0,Ie=m.sortKeyRanges;ge<Ie.length;ge+=1){var Be=Ie[ge];n.push({sortKey:Be.sortKey,symbolInstanceStart:Be.symbolInstanceStart,symbolInstanceEnd:Be.symbolInstanceEnd,parameters:fe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:fe})}},ti.prototype.attemptAnchorPlacement=function(n,s,a,c,m,w,E,C,M,N,W,J,Q,se,ne){var he,ae=[J.textOffset0,J.textOffset1],fe=ji(n,a,c,ae,m),ge=this.collisionIndex.placeCollisionBox(zi(s,fe.x,fe.y,w,E,this.transform.angle),W,C,M,N.predicate);if(!ne||this.collisionIndex.placeCollisionBox(zi(ne,fe.x,fe.y,w,E,this.transform.angle),W,C,M,N.predicate).box.length!==0)return ge.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(he=this.prevPlacement.variableOffsets[J.crossTileID].anchor),this.variableOffsets[J.crossTileID]={textOffset:ae,width:a,height:c,anchor:n,textBoxScale:m,prevAnchor:he},this.markUsedJustification(Q,n,J,se),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,se,J),this.placedOrientations[J.crossTileID]=se),{shift:fe,placedGlyphBoxes:ge}):void 0},ti.prototype.placeLayerBucketPart=function(n,s,a){var c=this,m=n.parameters,w=m.bucket,E=m.layout,C=m.posMatrix,M=m.textLabelPlaneMatrix,N=m.labelToScreenMatrix,W=m.textPixelRatio,J=m.holdingForFade,Q=m.collisionBoxArray,se=m.partiallyEvaluatedTextSize,ne=m.collisionGroup,he=E.get("text-optional"),ae=E.get("icon-optional"),fe=E.get("text-allow-overlap"),ge=E.get("icon-allow-overlap"),Ie=E.get("text-rotation-alignment")==="map",Be=E.get("text-pitch-alignment")==="map",Ae=E.get("icon-text-fit")!=="none",Fe=E.get("symbol-z-order")==="viewport-y",Ze=fe&&(ge||!w.hasIconData()||ae),Ke=ge&&(fe||!w.hasTextData()||he);!w.collisionArrays&&Q&&w.deserializeCollisionBoxes(Q);var Xe=function(ct,Ft){if(!s[ct.crossTileID])if(J)c.placements[ct.crossTileID]=new Ao(!1,!1,!1);else{var Qt,zt=!1,Dt=!1,Xt=!0,It=null,Ct={box:null,offscreen:null},Wi={box:null,offscreen:null},Jr=null,Bi=null,dn=0,gi=0,ri=0;Ft.textFeatureIndex?dn=Ft.textFeatureIndex:ct.useRuntimeCollisionCircles&&(dn=ct.featureIndex),Ft.verticalTextFeatureIndex&&(gi=Ft.verticalTextFeatureIndex);var Oi=Ft.textBox;if(Oi){var jn=function(cr){var ro=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!cr&&c.prevPlacement){var ea=c.prevPlacement.placedOrientations[ct.crossTileID];ea&&(c.placedOrientations[ct.crossTileID]=ea,c.markUsedOrientation(w,ro=ea,ct))}return ro},Oo=function(cr,ro){if(w.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&Ft.verticalTextBox)for(var ea=0,io=w.writingModes;ea<io.length&&(io[ea]===o.WritingMode.vertical?(Ct=ro(),Wi=Ct):Ct=cr(),!(Ct&&Ct.box&&Ct.box.length));ea+=1);else Ct=cr()};if(E.get("text-variable-anchor")){var qn=E.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[ct.crossTileID]){var _o=c.prevPlacement.variableOffsets[ct.crossTileID];qn.indexOf(_o.anchor)>0&&(qn=qn.filter(function(cr){return cr!==_o.anchor})).unshift(_o.anchor)}var Zn=function(cr,ro,ea){for(var io=cr.x2-cr.x1,Rf=cr.y2-cr.y1,bo=ct.textBoxScale,Fo=Ae&&!ge?ro:null,Na={box:[],offscreen:!1},Xp=fe?2*qn.length:qn.length,Vo=0;Vo<Xp;++Vo){var oc=c.attemptAnchorPlacement(qn[Vo%qn.length],cr,io,Rf,bo,Ie,Be,W,C,ne,Vo>=qn.length,ct,w,ea,Fo);if(oc&&(Na=oc.placedGlyphBoxes)&&Na.box&&Na.box.length){zt=!0,It=oc.shift;break}}return Na};Oo(function(){return Zn(Oi,Ft.iconBox,o.WritingMode.horizontal)},function(){var cr=Ft.verticalTextBox;return w.allowVerticalPlacement&&!(Ct&&Ct.box&&Ct.box.length)&&ct.numVerticalGlyphVertices>0&&cr?Zn(cr,Ft.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Ct&&(zt=Ct.box,Xt=Ct.offscreen);var ih=jn(Ct&&Ct.box);if(!zt&&c.prevPlacement){var pu=c.prevPlacement.variableOffsets[ct.crossTileID];pu&&(c.variableOffsets[ct.crossTileID]=pu,c.markUsedJustification(w,pu.anchor,ct,ih))}}else{var Ji=function(cr,ro){var ea=c.collisionIndex.placeCollisionBox(cr,fe,W,C,ne.predicate);return ea&&ea.box&&ea.box.length&&(c.markUsedOrientation(w,ro,ct),c.placedOrientations[ct.crossTileID]=ro),ea};Oo(function(){return Ji(Oi,o.WritingMode.horizontal)},function(){var cr=Ft.verticalTextBox;return w.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&cr?Ji(cr,o.WritingMode.vertical):{box:null,offscreen:null}}),jn(Ct&&Ct.box&&Ct.box.length)}}if(zt=(Qt=Ct)&&Qt.box&&Qt.box.length>0,Xt=Qt&&Qt.offscreen,ct.useRuntimeCollisionCircles){var Va=w.text.placedSymbolArray.get(ct.centerJustifiedTextSymbolIndex),ga=o.evaluateSizeForFeature(w.textSizeData,se,Va),mn=E.get("text-padding");Jr=c.collisionIndex.placeCollisionCircles(fe,Va,w.lineVertexArray,w.glyphOffsetArray,ga,C,M,N,a,Be,ne.predicate,ct.collisionCircleDiameter,mn),zt=fe||Jr.circles.length>0&&!Jr.collisionDetected,Xt=Xt&&Jr.offscreen}if(Ft.iconFeatureIndex&&(ri=Ft.iconFeatureIndex),Ft.iconBox){var ac=function(cr){var ro=Ae&&It?zi(cr,It.x,It.y,Ie,Be,c.transform.angle):cr;return c.collisionIndex.placeCollisionBox(ro,ge,W,C,ne.predicate)};Dt=Wi&&Wi.box&&Wi.box.length&&Ft.verticalIconBox?(Bi=ac(Ft.verticalIconBox)).box.length>0:(Bi=ac(Ft.iconBox)).box.length>0,Xt=Xt&&Bi.offscreen}var va=he||ct.numHorizontalGlyphVertices===0&&ct.numVerticalGlyphVertices===0,Zi=ae||ct.numIconVertices===0;if(va||Zi?Zi?va||(Dt=Dt&&zt):zt=Dt&&zt:Dt=zt=Dt&&zt,zt&&Qt&&Qt.box&&c.collisionIndex.insertCollisionBox(Qt.box,E.get("text-ignore-placement"),w.bucketInstanceId,Wi&&Wi.box&&gi?gi:dn,ne.ID),Dt&&Bi&&c.collisionIndex.insertCollisionBox(Bi.box,E.get("icon-ignore-placement"),w.bucketInstanceId,ri,ne.ID),Jr&&(zt&&c.collisionIndex.insertCollisionCircles(Jr.circles,E.get("text-ignore-placement"),w.bucketInstanceId,dn,ne.ID),a)){var Dl=w.bucketInstanceId,Js=c.collisionCircleArrays[Dl];Js===void 0&&(Js=c.collisionCircleArrays[Dl]=new Ti);for(var Ll=0;Ll<Jr.circles.length;Ll+=4)Js.circles.push(Jr.circles[Ll+0]),Js.circles.push(Jr.circles[Ll+1]),Js.circles.push(Jr.circles[Ll+2]),Js.circles.push(Jr.collisionDetected?1:0)}c.placements[ct.crossTileID]=new Ao(zt||Ze,Dt||Ke,Xt||w.justReloaded),s[ct.crossTileID]=!0}};if(Fe)for(var it=w.getSortedSymbolIndexes(this.transform.angle),mt=it.length-1;mt>=0;--mt){var vt=it[mt];Xe(w.symbolInstances.get(vt),w.collisionArrays[vt])}else for(var wt=n.symbolInstanceStart;wt<n.symbolInstanceEnd;wt++)Xe(w.symbolInstances.get(wt),w.collisionArrays[wt]);if(a&&w.bucketInstanceId in this.collisionCircleArrays){var ar=this.collisionCircleArrays[w.bucketInstanceId];o.invert(ar.invProjMatrix,C),ar.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},ti.prototype.markUsedJustification=function(n,s,a,c){var m;m=c===o.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(s)];for(var w=0,E=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var C=E[w];C>=0&&(n.text.placedSymbolArray.get(C).crossTileID=m>=0&&C!==m?0:a.crossTileID)}},ti.prototype.markUsedOrientation=function(n,s,a){for(var c=s===o.WritingMode.horizontal||s===o.WritingMode.horizontalOnly?s:0,m=s===o.WritingMode.vertical?s:0,w=0,E=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];w<E.length;w+=1)n.text.placedSymbolArray.get(E[w]).placedOrientation=c;a.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},ti.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},w=s?s.variableOffsets:{},E=s?s.placedOrientations:{};for(var C in this.placements){var M=this.placements[C],N=m[C];N?(this.opacities[C]=new Rn(N,c,M.text,M.icon),a=a||M.text!==N.text.placed||M.icon!==N.icon.placed):(this.opacities[C]=new Rn(null,c,M.text,M.icon,M.skipFade),a=a||M.text||M.icon)}for(var W in m){var J=m[W];if(!this.opacities[W]){var Q=new Rn(J,c,!1,!1);Q.isHidden()||(this.opacities[W]=Q,a=a||J.text.placed||J.icon.placed)}}for(var se in w)this.variableOffsets[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.variableOffsets[se]=w[se]);for(var ne in E)this.placedOrientations[ne]||!this.opacities[ne]||this.opacities[ne].isHidden()||(this.placedOrientations[ne]=E[ne]);a?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},ti.prototype.updateLayerOpacities=function(n,s){for(var a={},c=0,m=s;c<m.length;c+=1){var w=m[c],E=w.getBucket(n);E&&w.latestFeatureIndex&&n.id===E.layerIds[0]&&this.updateBucketOpacities(E,a,w.collisionBoxArray)}},ti.prototype.updateBucketOpacities=function(n,s,a){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,w=new Rn(null,0,!1,!1,!0),E=m.get("text-allow-overlap"),C=m.get("icon-allow-overlap"),M=m.get("text-variable-anchor"),N=m.get("text-rotation-alignment")==="map",W=m.get("text-pitch-alignment")==="map",J=m.get("icon-text-fit")!=="none",Q=new Rn(null,0,E&&(C||!n.hasIconData()||m.get("icon-optional")),C&&(E||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&a&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(a);for(var se=function(fe,ge,Ie){for(var Be=0;Be<ge/4;Be++)fe.opacityVertexArray.emplaceBack(Ie)},ne=function(fe){var ge=n.symbolInstances.get(fe),Ie=ge.numHorizontalGlyphVertices,Be=ge.numVerticalGlyphVertices,Ae=ge.crossTileID,Fe=c.opacities[Ae];s[Ae]?Fe=w:Fe||(c.opacities[Ae]=Fe=Q),s[Ae]=!0;var Ze=ge.numIconVertices>0,Ke=c.placedOrientations[ge.crossTileID],Xe=Ke===o.WritingMode.vertical,it=Ke===o.WritingMode.horizontal||Ke===o.WritingMode.horizontalOnly;if(Ie>0||Be>0){var mt=Kc(Fe.text);se(n.text,Ie,Xe?Xa:mt),se(n.text,Be,it?Xa:mt);var vt=Fe.text.isHidden();[ge.rightJustifiedTextSymbolIndex,ge.centerJustifiedTextSymbolIndex,ge.leftJustifiedTextSymbolIndex].forEach(function(Ct){Ct>=0&&(n.text.placedSymbolArray.get(Ct).hidden=vt||Xe?1:0)}),ge.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ge.verticalPlacedTextSymbolIndex).hidden=vt||it?1:0);var wt=c.variableOffsets[ge.crossTileID];wt&&c.markUsedJustification(n,wt.anchor,ge,Ke);var ar=c.placedOrientations[ge.crossTileID];ar&&(c.markUsedJustification(n,"left",ge,ar),c.markUsedOrientation(n,ar,ge))}if(Ze){var ct=Kc(Fe.icon),Ft=!(J&&ge.verticalPlacedIconSymbolIndex&&Xe);ge.placedIconSymbolIndex>=0&&(se(n.icon,ge.numIconVertices,Ft?ct:Xa),n.icon.placedSymbolArray.get(ge.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),ge.verticalPlacedIconSymbolIndex>=0&&(se(n.icon,ge.numVerticalIconVertices,Ft?Xa:ct),n.icon.placedSymbolArray.get(ge.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Qt=n.collisionArrays[fe];if(Qt){var zt=new o.Point(0,0);if(Qt.textBox||Qt.verticalTextBox){var Dt=!0;if(M){var Xt=c.variableOffsets[Ae];Xt?(zt=ji(Xt.anchor,Xt.width,Xt.height,Xt.textOffset,Xt.textBoxScale),N&&zt._rotate(W?c.transform.angle:-c.transform.angle)):Dt=!1}Qt.textBox&&En(n.textCollisionBox.collisionVertexArray,Fe.text.placed,!Dt||Xe,zt.x,zt.y),Qt.verticalTextBox&&En(n.textCollisionBox.collisionVertexArray,Fe.text.placed,!Dt||it,zt.x,zt.y)}var It=!!(!it&&Qt.verticalIconBox);Qt.iconBox&&En(n.iconCollisionBox.collisionVertexArray,Fe.icon.placed,It,J?zt.x:0,J?zt.y:0),Qt.verticalIconBox&&En(n.iconCollisionBox.collisionVertexArray,Fe.icon.placed,!It,J?zt.x:0,J?zt.y:0)}}},he=0;he<n.symbolInstances.length;he++)ne(he);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var ae=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ae.invProjMatrix,n.placementViewportMatrix=ae.viewportMatrix,n.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},ti.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ti.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},ti.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},ti.prototype.stillRecent=function(n,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>n},ti.prototype.setStale=function(){this.stale=!0};var Gu=Math.pow(2,25),vl=Math.pow(2,24),Fs=Math.pow(2,17),Cf=Math.pow(2,16),eu=Math.pow(2,9),Vs=Math.pow(2,8),Ku=Math.pow(2,1);function Kc(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,a=Math.floor(127*n.opacity);return a*Gu+s*vl+a*Fs+s*Cf+a*eu+s*Vs+a*Ku+s}var Xa=0,_l=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};_l.prototype.continuePlacement=function(n,s,a,c,m){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,C){return E.sortKey-C.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var Ns=function(n,s,a,c,m,w,E){this.placement=new ti(n,m,w,E),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=c,this._done=!1};Ns.prototype.isDone=function(){return this._done},Ns.prototype.continuePlacement=function(n,s,a){for(var c=this,m=o.browser.now(),w=function(){var M=o.browser.now()-m;return!c._forceFullPlacement&&M>2};this._currentPlacementIndex>=0;){var E=s[n[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=C)&&(!E.maxzoom||E.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new _l(E)),this._inProgressLayer.continuePlacement(a[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ns.prototype.commit=function(n){return this.placement.commit(n),this.placement};var Xc=512/o.EXTENT/2,bl=function(n,s,a){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var c=0;c<s.length;c++){var m=s.get(c),w=m.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};bl.prototype.getScaledCoordinates=function(n,s){var a=Xc/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*o.EXTENT+n.anchorX)*a),y:Math.floor((s.canonical.y*o.EXTENT+n.anchorY)*a)}},bl.prototype.findMatches=function(n,s,a){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var w=n.get(m);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var C=this.getScaledCoordinates(w,s),M=0,N=E;M<N.length;M+=1){var W=N[M];if(Math.abs(W.coord.x-C.x)<=c&&Math.abs(W.coord.y-C.y)<=c&&!a[W.crossTileID]){a[W.crossTileID]=!0,w.crossTileID=W.crossTileID;break}}}}};var la=function(){this.maxCrossTileID=0};la.prototype.generate=function(){return++this.maxCrossTileID};var Xn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Xn.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var a in this.indexes){var c=this.indexes[a],m={};for(var w in c){var E=c[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+s),m[E.tileID.key]=E}this.indexes[a]=m}this.lng=n},Xn.prototype.addBucket=function(n,s,a){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>n.overscaledZ)for(var C in E){var M=E[C];M.tileID.isChildOf(n)&&M.findMatches(s.symbolInstances,n,m)}else{var N=E[n.scaledTo(Number(w)).key];N&&N.findMatches(s.symbolInstances,n,m)}}for(var W=0;W<s.symbolInstances.length;W++){var J=s.symbolInstances.get(W);J.crossTileID||(J.crossTileID=a.generate(),m[J.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new bl(n,s.symbolInstances,s.bucketInstanceId),!0},Xn.prototype.removeBucketCrossTileIDs=function(n,s){for(var a in s.indexedSymbolInstances)for(var c=0,m=s.indexedSymbolInstances[a];c<m.length;c+=1)delete this.usedCrossTileIDs[n][m[c].crossTileID]},Xn.prototype.removeStaleBuckets=function(n){var s=!1;for(var a in this.indexes){var c=this.indexes[a];for(var m in c)n[c[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,c[m]),delete c[m],s=!0)}return s};var Ee=function(){this.layerIndexes={},this.crossTileIDs=new la,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ee.prototype.addLayer=function(n,s,a){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new Xn);var m=!1,w={};c.handleWrapJump(a);for(var E=0,C=s;E<C.length;E+=1){var M=C[E],N=M.getBucket(n);N&&n.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(M.tileID,N,this.crossTileIDs)&&(m=!0),w[N.bucketInstanceId]=!0)}return c.removeStaleBuckets(w)&&(m=!0),m},Ee.prototype.pruneUnusedLayers=function(n){var s={};for(var a in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var Bn=function(n,s){return o.emitValidationErrors(n,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},tn=o.pick(Ye,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Br=o.pick(Ye,["setCenter","setZoom","setBearing","setPitch"]),hn=function(){var n={},s=o.styleSpec.$version;for(var a in o.styleSpec.$root){var c,m=o.styleSpec.$root[a];m.required&&(c=a==="version"?s:m.type==="array"?[]:{})!=null&&(n[a]=c)}return n}(),ua=function(n){function s(a,c){var m=this;c===void 0&&(c={}),n.call(this),this.map=a,this.dispatcher=new Rr(Le(),this),this.imageManager=new je,this.imageManager.setEventedParent(this),this.glyphManager=new sr(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ot(256,512),this.crossTileSymbolIndex=new Ee,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(C,M){if(o.triggerPluginCompletionEvent(C),M&&M.every(function(W){return W}))for(var N in w.sourceCaches)w.sourceCaches[N].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var C=m.sourceCaches[E.sourceId];if(C){var M=C.getSource();if(M&&M.vectorLayerIds)for(var N in m._layers){var W=m._layers[N];W.source===M.id&&m._validateLayer(W)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var w=typeof c.validate=="boolean"?c.validate:!o.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);var E=this.map._requestManager.transformRequest(a,o.ResourceType.Style);this._request=o.getJSON(E,function(C,M){m._request=null,C?m.fire(new o.ErrorEvent(C)):M&&m._load(M,w)})},s.prototype.loadJSON=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){m._request=null,m._load(a,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(hn,!1)},s.prototype._load=function(a,c){if(!c||!Bn(this,o.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var w=Je(this.stylesheet.layers);this._order=w.map(function(N){return N.id}),this._layers={},this._serializedLayers={};for(var E=0,C=w;E<C.length;E+=1){var M=C[E];(M=o.createStyleLayer(M)).setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Lr(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},s.prototype._loadSprite=function(a){var c=this;this._spriteRequest=function(m,w,E){var C,M,N,W=o.browser.devicePixelRatio>1?"@2x":"",J=o.getJSON(w.transformRequest(w.normalizeSpriteURL(m,W,".json"),o.ResourceType.SpriteJSON),function(ne,he){J=null,N||(N=ne,C=he,se())}),Q=o.getImage(w.transformRequest(w.normalizeSpriteURL(m,W,".png"),o.ResourceType.SpriteImage),function(ne,he){Q=null,N||(N=ne,M=he,se())});function se(){if(N)E(N);else if(C&&M){var ne=o.browser.getImageData(M),he={};for(var ae in C){var fe=C[ae],ge=fe.width,Ie=fe.height,Be=fe.x,Ae=fe.y,Fe=fe.sdf,Ze=fe.pixelRatio,Ke=fe.stretchX,Xe=fe.stretchY,it=fe.content,mt=new o.RGBAImage({width:ge,height:Ie});o.RGBAImage.copy(ne,mt,{x:Be,y:Ae},{x:0,y:0},{width:ge,height:Ie}),he[ae]={data:mt,pixelRatio:Ze,sdf:Fe,stretchX:Ke,stretchY:Xe,content:it}}E(null,he)}}return{cancel:function(){J&&(J.cancel(),J=null),Q&&(Q.cancel(),Q=null)}}}(a,this.map._requestManager,function(m,w){if(c._spriteRequest=null,m)c.fire(new o.ErrorEvent(m));else if(w)for(var E in w)c.imageManager.addImage(E,w[E]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new o.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var m=a.sourceLayer;if(m){var w=c.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+w.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var c=[],m=0,w=a;m<w.length;m+=1){var E=this._layers[w[m]];E.type!=="custom"&&c.push(E.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(m.length||w.length)&&this._updateWorkerLayers(m,w),this._updatedSources){var C=this._updatedSources[E];C==="reload"?this._reloadSource(E):C==="clear"&&this._clearSource(E)}for(var M in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[M].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var N={};for(var W in this.sourceCaches){var J=this.sourceCaches[W];N[W]=J.used,J.used=!1}for(var Q=0,se=this._order;Q<se.length;Q+=1){var ne=this._layers[se[Q]];ne.recalculate(a,this._availableImages),!ne.isHidden(a.zoom)&&ne.source&&(this.sourceCaches[ne.source].used=!0)}for(var he in N){var ae=this.sourceCaches[he];N[he]!==ae.used&&ae.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:he}))}this.light.recalculate(a),this.z=a.zoom,c&&this.fire(new o.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var c=this;if(this._checkLoaded(),Bn(this,o.validateStyle(a)))return!1;(a=o.clone$1(a)).layers=Je(a.layers);var m=function(E,C){if(!E)return[{command:Ye.setStyle,args:[C]}];var M=[];try{if(!o.deepEqual(E.version,C.version))return[{command:Ye.setStyle,args:[C]}];o.deepEqual(E.center,C.center)||M.push({command:Ye.setCenter,args:[C.center]}),o.deepEqual(E.zoom,C.zoom)||M.push({command:Ye.setZoom,args:[C.zoom]}),o.deepEqual(E.bearing,C.bearing)||M.push({command:Ye.setBearing,args:[C.bearing]}),o.deepEqual(E.pitch,C.pitch)||M.push({command:Ye.setPitch,args:[C.pitch]}),o.deepEqual(E.sprite,C.sprite)||M.push({command:Ye.setSprite,args:[C.sprite]}),o.deepEqual(E.glyphs,C.glyphs)||M.push({command:Ye.setGlyphs,args:[C.glyphs]}),o.deepEqual(E.transition,C.transition)||M.push({command:Ye.setTransition,args:[C.transition]}),o.deepEqual(E.light,C.light)||M.push({command:Ye.setLight,args:[C.light]});var N={},W=[];(function(Q,se,ne,he){var ae;for(ae in se=se||{},Q=Q||{})Q.hasOwnProperty(ae)&&(se.hasOwnProperty(ae)||rt(ae,ne,he));for(ae in se)se.hasOwnProperty(ae)&&(Q.hasOwnProperty(ae)?o.deepEqual(Q[ae],se[ae])||(Q[ae].type==="geojson"&&se[ae].type==="geojson"&&$t(Q,se,ae)?ne.push({command:Ye.setGeoJSONSourceData,args:[ae,se[ae].data]}):Rt(ae,se,ne,he)):Gt(ae,se,ne))})(E.sources,C.sources,W,N);var J=[];E.layers&&E.layers.forEach(function(Q){N[Q.source]?M.push({command:Ye.removeLayer,args:[Q.id]}):J.push(Q)}),M=M.concat(W),function(Q,se,ne){se=se||[];var he,ae,fe,ge,Ie,Be,Ae,Fe=(Q=Q||[]).map(Jt),Ze=se.map(Jt),Ke=Q.reduce(rr,{}),Xe=se.reduce(rr,{}),it=Fe.slice(),mt=Object.create(null);for(he=0,ae=0;he<Fe.length;he++)Xe.hasOwnProperty(fe=Fe[he])?ae++:(ne.push({command:Ye.removeLayer,args:[fe]}),it.splice(it.indexOf(fe,ae),1));for(he=0,ae=0;he<Ze.length;he++)it[it.length-1-he]!==(fe=Ze[Ze.length-1-he])&&(Ke.hasOwnProperty(fe)?(ne.push({command:Ye.removeLayer,args:[fe]}),it.splice(it.lastIndexOf(fe,it.length-ae),1)):ae++,ne.push({command:Ye.addLayer,args:[Xe[fe],Be=it[it.length-he]]}),it.splice(it.length-he,0,fe),mt[fe]=!0);for(he=0;he<Ze.length;he++)if(ge=Ke[fe=Ze[he]],Ie=Xe[fe],!mt[fe]&&!o.deepEqual(ge,Ie))if(o.deepEqual(ge.source,Ie.source)&&o.deepEqual(ge["source-layer"],Ie["source-layer"])&&o.deepEqual(ge.type,Ie.type)){for(Ae in At(ge.layout,Ie.layout,ne,fe,null,Ye.setLayoutProperty),At(ge.paint,Ie.paint,ne,fe,null,Ye.setPaintProperty),o.deepEqual(ge.filter,Ie.filter)||ne.push({command:Ye.setFilter,args:[fe,Ie.filter]}),o.deepEqual(ge.minzoom,Ie.minzoom)&&o.deepEqual(ge.maxzoom,Ie.maxzoom)||ne.push({command:Ye.setLayerZoomRange,args:[fe,Ie.minzoom,Ie.maxzoom]}),ge)ge.hasOwnProperty(Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?At(ge[Ae],Ie[Ae],ne,fe,Ae.slice(6),Ye.setPaintProperty):o.deepEqual(ge[Ae],Ie[Ae])||ne.push({command:Ye.setLayerProperty,args:[fe,Ae,Ie[Ae]]}));for(Ae in Ie)Ie.hasOwnProperty(Ae)&&!ge.hasOwnProperty(Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?At(ge[Ae],Ie[Ae],ne,fe,Ae.slice(6),Ye.setPaintProperty):o.deepEqual(ge[Ae],Ie[Ae])||ne.push({command:Ye.setLayerProperty,args:[fe,Ae,Ie[Ae]]}))}else ne.push({command:Ye.removeLayer,args:[fe]}),Be=it[it.lastIndexOf(fe)+1],ne.push({command:Ye.addLayer,args:[Ie,Be]})}(J,C.layers,M)}catch(Q){console.warn("Unable to compute style diff:",Q),M=[{command:Ye.setStyle,args:[C]}]}return M}(this.serialize(),a).filter(function(E){return!(E.command in Br)});if(m.length===0)return!1;var w=m.filter(function(E){return!(E.command in tn)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return m.forEach(function(E){E.command!=="setTransition"&&c[E.command].apply(c,E.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,c),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,c){this.imageManager.updateImage(a,c)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,c,m){var w=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.validateStyle.source,"sources."+a,c,null,m))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var E=this.sourceCaches[a]=new te(a,c,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:a}}),E.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new o.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded(),this.sourceCaches[a].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var w=a.id;if(this.getLayer(w))this.fire(new o.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(a.type==="custom"){if(Bn(this,o.validateCustomStyleLayer(a)))return;E=o.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(w,a.source),a=o.clone$1(a),a=o.extend(a,{source:w})),this._validate(o.validateStyle.layer,"layers."+w,a,{arrayIndex:-1},m))return;E=o.createStyleLayer(a),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var C=c?this._order.indexOf(c):this._order.length;if(c&&C===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(C,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var M=this._removedLayers[w];delete this._removedLayers[w],M.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},s.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var m=this._order.indexOf(a);this._order.splice(m,1);var w=c?this._order.indexOf(c):this._order.length;c&&w===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(w,0,a),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,c,m){this._checkLoaded();var w=this.getLayer(a);w?w.minzoom===c&&w.maxzoom===m||(c!=null&&(w.minzoom=c),m!=null&&(w.maxzoom=m),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var w=this.getLayer(a);if(w){if(!o.deepEqual(w.filter,c))return c==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.validateStyle.filter,"layers."+w.id+".filter",c,null,m)||(w.filter=o.clone$1(c),this._updateLayer(w)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return o.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,c,m,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(a);E?o.deepEqual(E.getLayoutProperty(c),m)||(E.setLayoutProperty(c,m,w),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,c){var m=this.getLayer(a);if(m)return m.getLayoutProperty(c);this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,c,m,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(a);E?o.deepEqual(E.getPaintProperty(c),m)||(E.setPaintProperty(c,m,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},s.prototype.setFeatureState=function(a,c){this._checkLoaded();var m=a.source,w=a.sourceLayer,E=this.sourceCaches[m];if(E!==void 0){var C=E.getSource().type;C==="geojson"&&w?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||w?(a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,a.id,c)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,c){this._checkLoaded();var m=a.source,w=this.sourceCaches[m];if(w!==void 0){var E=w.getSource().type,C=E==="vector"?a.sourceLayer:void 0;E!=="vector"||C?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(C,a.id,c):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,m=a.sourceLayer,w=this.sourceCaches[c];if(w!==void 0){if(w.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(m,a.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var c=this,m=function(Ke){return c._layers[Ke].type==="fill-extrusion"},w={},E=[],C=this._order.length-1;C>=0;C--){var M=this._order[C];if(m(M)){w[M]=C;for(var N=0,W=a;N<W.length;N+=1){var J=W[N][M];if(J)for(var Q=0,se=J;Q<se.length;Q+=1)E.push(se[Q])}}}E.sort(function(Ke,Xe){return Xe.intersectionZ-Ke.intersectionZ});for(var ne=[],he=this._order.length-1;he>=0;he--){var ae=this._order[he];if(m(ae))for(var fe=E.length-1;fe>=0;fe--){var ge=E[fe].feature;if(w[ge.layer.id]<he)break;ne.push(ge),E.pop()}else for(var Ie=0,Be=a;Ie<Be.length;Ie+=1){var Ae=Be[Ie][ae];if(Ae)for(var Fe=0,Ze=Ae;Fe<Ze.length;Fe+=1)ne.push(Ze[Fe].feature)}}return ne},s.prototype.queryRenderedFeatures=function(a,c,m){c&&c.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var w={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,C=c.layers;E<C.length;E+=1){var M=C[E],N=this._layers[M];if(!N)return this.fire(new o.ErrorEvent(new Error("The layer '"+M+"' does not exist in the map's style and cannot be queried for features."))),[];w[N.source]=!0}}var W=[];for(var J in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!w[J]||W.push($r(this.sourceCaches[J],this._layers,this._serializedLayers,a,c,m));return this.placement&&W.push(function(Q,se,ne,he,ae,fe,ge){for(var Ie={},Be=fe.queryRenderedSymbols(he),Ae=[],Fe=0,Ze=Object.keys(Be).map(Number);Fe<Ze.length;Fe+=1)Ae.push(ge[Ze[Fe]]);Ae.sort(za);for(var Ke=function(){var wt=it[Xe],ar=wt.featureIndex.lookupSymbolFeatures(Be[wt.bucketInstanceId],se,wt.bucketIndex,wt.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,Q);for(var ct in ar){var Ft=Ie[ct]=Ie[ct]||[],Qt=ar[ct];Qt.sort(function(Xt,It){var Ct=wt.featureSortOrder;if(Ct){var Wi=Ct.indexOf(Xt.featureIndex);return Ct.indexOf(It.featureIndex)-Wi}return It.featureIndex-Xt.featureIndex});for(var zt=0,Dt=Qt;zt<Dt.length;zt+=1)Ft.push(Dt[zt])}},Xe=0,it=Ae;Xe<it.length;Xe+=1)Ke();var mt=function(wt){Ie[wt].forEach(function(ar){var ct=ar.feature,Ft=ne[Q[wt].source].getFeatureState(ct.layer["source-layer"],ct.id);ct.source=ct.layer.source,ct.layer["source-layer"]&&(ct.sourceLayer=ct.layer["source-layer"]),ct.state=Ft})};for(var vt in Ie)mt(vt);return Ie}(this._layers,this._serializedLayers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(W)},s.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var m=this.sourceCaches[a];return m?function(w,E){for(var C=w.getRenderableIds().map(function(se){return w.getTileByID(se)}),M=[],N={},W=0;W<C.length;W++){var J=C[W],Q=J.tileID.canonical.key;N[Q]||(N[Q]=!0,J.querySourceFeatures(M,E))}return M}(m,c):[]},s.prototype.addSourceType=function(a,c,m){return s.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,c){c===void 0&&(c={}),this._checkLoaded();var m=this.light.getLight(),w=!1;for(var E in a)if(!o.deepEqual(a[E],m[E])){w=!0;break}if(w){var C={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(C)}},s.prototype._validate=function(a,c,m,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&Bn(this,a.call(o.validateStyle,o.extend({key:c,style:this.serialize(),value:m,styleSpec:o.styleSpec},w)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,c,m,w,E){E===void 0&&(E=!1);for(var C=!1,M=!1,N={},W=0,J=this._order;W<J.length;W+=1){var Q=this._layers[J[W]];if(Q.type==="symbol"){if(!N[Q.source]){var se=this.sourceCaches[Q.source];N[Q.source]=se.getRenderableIds(!0).map(function(ge){return se.getTileByID(ge)}).sort(function(ge,Ie){return Ie.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(Ie.tileID)?-1:1)})}var ne=this.crossTileSymbolIndex.addLayer(Q,N[Q.source],a.center.lng);C=C||ne}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),a.zoom))&&(this.pauseablePlacement=new Ns(a,this._order,E,c,m,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),M=!0),C&&this.pauseablePlacement.placement.setStale()),M||C)for(var he=0,ae=this._order;he<ae.length;he+=1){var fe=this._layers[ae[he]];fe.type==="symbol"&&this.placement.updateLayerOpacities(fe,N[fe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();var w=this.sourceCaches[c.source];w&&w.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(a,c,m){this.glyphManager.getGlyphs(c.stacks,m)},s.prototype.getResource=function(a,c,m){return o.makeRequest(c,m)},s}(o.Evented);ua.getSourceType=function(n){return ni[n]},ua.setSourceType=function(n,s){ni[n]=s},ua.registerForPluginStateChange=o.registerForPluginStateChange;var ki=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),xl=Hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Fp=Hr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xu=Hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),jd=Hr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Zh=Hr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ma=Hr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Wn=Hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Wa=Hr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),os=Hr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Vp=Hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Wu=Hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),tu=Hr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Hh=Hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Np=Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ci=Hr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Up=Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Us=Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Da=Hr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ja=Hr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),wl=Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ss=Hr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ls=Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ya=Hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),js=Hr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),El=Hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),us=Hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Hr(n,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(m):m,C={};return{fragmentSource:n=n.replace(a,function(M,N,W,J,Q){return C[Q]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
varying `+W+" "+J+" "+Q+`;
#else
uniform `+W+" "+J+" u_"+Q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Q+`
    `+W+" "+J+" "+Q+" = u_"+Q+`;
#endif
`}),vertexSource:s=s.replace(a,function(M,N,W,J,Q){var se=J==="float"?"vec2":"vec4",ne=Q.match(/color/)?"color":se;return C[Q]?N==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+W+" "+se+" a_"+Q+`;
varying `+W+" "+J+" "+Q+`;
#else
uniform `+W+" "+J+" u_"+Q+`;
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = a_"+Q+`;
#else
    `+W+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = unpack_mix_"+ne+"(a_"+Q+", u_"+Q+`_t);
#else
    `+W+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+W+" "+se+" a_"+Q+`;
#else
uniform `+W+" "+J+" u_"+Q+`;
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+W+" "+J+" "+Q+" = a_"+Q+`;
#else
    `+W+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+W+" "+J+" "+Q+" = unpack_mix_"+ne+"(a_"+Q+", u_"+Q+`_t);
#else
    `+W+" "+J+" "+Q+" = u_"+Q+`;
#endif
`}),staticAttributes:c,staticUniforms:E}}var Af=Object.freeze({__proto__:null,prelude:xl,background:Fp,backgroundPattern:Xu,circle:jd,clippingMask:Zh,heatmap:Ma,heatmapTexture:Wn,collisionBox:Wa,collisionCircle:os,debug:Vp,fill:Wu,fillOutline:tu,fillOutlinePattern:Hh,fillPattern:Np,fillExtrusion:Ci,fillExtrusionPattern:Up,hillshadePrepare:Us,hillshade:Da,line:Ja,lineGradient:wl,linePattern:ss,lineSDF:ls,raster:Ya,symbolIcon:js,symbolSDF:El,symbolTextAndIcon:us}),cs=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function jp(n){for(var s=[],a=0;a<n.length;a++)if(n[a]!==null){var c=n[a].split(" ");s.push(c.pop())}return s}cs.prototype.bind=function(n,s,a,c,m,w,E,C){this.context=n;for(var M=this.boundPaintVertexBuffers.length!==c.length,N=0;!M&&N<c.length;N++)this.boundPaintVertexBuffers[N]!==c[N]&&(M=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!M&&this.boundIndexBuffer===m&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===C?(n.bindVertexArrayOES.set(this.vao),E&&E.bind(),m&&m.dynamicDraw&&m.bind(),C&&C.bind()):this.freshBind(s,a,c,m,w,E,C)},cs.prototype.freshBind=function(n,s,a,c,m,w,E){var C,M=n.numAttributes,N=this.context,W=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=c,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{C=N.currentNumAttributes||0;for(var J=M;J<C;J++)W.disableVertexAttribArray(J)}s.enableAttributes(W,n);for(var Q=0,se=a;Q<se.length;Q+=1)se[Q].enableAttributes(W,n);w&&w.enableAttributes(W,n),E&&E.enableAttributes(W,n),s.bind(),s.setVertexAttribPointers(W,n,m);for(var ne=0,he=a;ne<he.length;ne+=1){var ae=he[ne];ae.bind(),ae.setVertexAttribPointers(W,n,m)}w&&(w.bind(),w.setVertexAttribPointers(W,n,m)),c&&c.bind(),E&&(E.bind(),E.setVertexAttribPointers(W,n,m)),N.currentNumAttributes=M},cs.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var hs=function(n,s,a,c,m,w){var E=n.gl;this.program=E.createProgram();for(var C=jp(a.staticAttributes),M=c?c.getBinderAttributes():[],N=C.concat(M),W=a.staticUniforms?jp(a.staticUniforms):[],J=c?c.getBinderUniforms():[],Q=[],se=0,ne=W.concat(J);se<ne.length;se+=1){var he=ne[se];Q.indexOf(he)<0&&Q.push(he)}var ae=c?c.defines():[];w&&ae.push("#define OVERDRAW_INSPECTOR;");var fe=ae.concat(xl.fragmentSource,a.fragmentSource).join(`
`),ge=ae.concat(xl.vertexSource,a.vertexSource).join(`
`),Ie=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ie,fe),E.compileShader(Ie),E.attachShader(this.program,Ie);var Be=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Be,ge),E.compileShader(Be),E.attachShader(this.program,Be),this.attributes={};var Ae={};this.numAttributes=N.length;for(var Fe=0;Fe<this.numAttributes;Fe++)N[Fe]&&(E.bindAttribLocation(this.program,Fe,N[Fe]),this.attributes[N[Fe]]=Fe);E.linkProgram(this.program),E.deleteShader(Be),E.deleteShader(Ie);for(var Ze=0;Ze<Q.length;Ze++){var Ke=Q[Ze];if(Ke&&!Ae[Ke]){var Xe=E.getUniformLocation(this.program,Ke);Xe&&(Ae[Ke]=Xe)}}this.fixedUniforms=m(n,Ae),this.binderUniforms=c?c.getUniforms(n,Ae):[]}}};function po(n,s,a){var c=1/xr(a,1,s.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),w=a.tileSize*Math.pow(2,s.transform.tileZoom)/m,E=w*(a.tileID.canonical.x+a.tileID.wrap*m),C=w*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[E>>16,C>>16],u_pixel_coord_lower:[65535&E,65535&C]}}hs.prototype.draw=function(n,s,a,c,m,w,E,C,M,N,W,J,Q,se,ne,he){var ae,fe=n.gl;if(!this.failedToCreate){for(var ge in n.program.set(this.program),n.setDepthMode(a),n.setStencilMode(c),n.setColorMode(m),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[ge].set(E[ge]);se&&se.setUniforms(n,this.binderUniforms,J,{zoom:Q});for(var Ie=(ae={},ae[fe.LINES]=2,ae[fe.TRIANGLES]=3,ae[fe.LINE_STRIP]=1,ae)[s],Be=0,Ae=W.get();Be<Ae.length;Be+=1){var Fe=Ae[Be],Ze=Fe.vaos||(Fe.vaos={});(Ze[C]||(Ze[C]=new cs)).bind(n,this,M,se?se.getPaintVertexBuffers():[],N,Fe.vertexOffset,ne,he),fe.drawElements(s,Fe.primitiveLength*Ie,fe.UNSIGNED_SHORT,Fe.primitiveOffset*Ie*2)}}};var ps=function(n,s,a,c){var m=s.style.light,w=m.properties.get("position"),E=[w.x,w.y,w.z],C=o.create$1();m.properties.get("anchor")==="viewport"&&o.fromRotation(C,-s.transform.angle),o.transformMat3(E,E,C);var M=m.properties.get("color");return{u_matrix:n,u_lightpos:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+a,u_opacity:c}},kl=function(n,s,a,c,m,w,E){return o.extend(ps(n,s,a,c),po(w,s,E),{u_height_factor:-Math.pow(2,m.overscaledZ)/E.tileSize/8})},Qa=function(n){return{u_matrix:n}},qs=function(n,s,a,c){return o.extend(Qa(n),po(a,s,c))},qd=function(n,s){return{u_matrix:n,u_world:s}},qp=function(n,s,a,c,m){return o.extend(qs(n,s,a,c),{u_world:m})},Zs=function(n,s,a,c){var m,w,E=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var C=xr(a,1,E.zoom);m=!0,w=[C,C]}else m=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:w}},ru=function(n,s,a){var c=xr(a,1,s.zoom),m=Math.pow(2,s.zoom-a.tileID.overscaledZ),w=a.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*m),s.pixelsToGLUnits[1]/(c*m)],u_overscale_factor:w}},Zp=function(n,s,a){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},$a=function(n,s,a){return a===void 0&&(a=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:a}},iu=function(n){return{u_matrix:n}},Hp=function(n,s,a,c){return{u_matrix:n,u_extrude_scale:xr(s,1,a),u_intensity:c}},Po=function(n,s,a){var c=n.transform;return{u_matrix:Mo(n,s,a),u_ratio:1/xr(s,1,c.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Mr=function(n,s,a,c){return o.extend(Po(n,s,a),{u_image:0,u_image_height:c})},Gh=function(n,s,a,c){var m=n.transform,w=fo(s,m);return{u_matrix:Mo(n,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/xr(s,1,m.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Pf=function(n,s,a,c,m){var w=n.lineAtlas,E=fo(s,n.transform),C=a.layout.get("line-cap")==="round",M=w.getDash(c.from,C),N=w.getDash(c.to,C),W=M.width*m.fromScale,J=N.width*m.toScale;return o.extend(Po(n,s,a),{u_patternscale_a:[E/W,-M.height/2],u_patternscale_b:[E/J,-N.height/2],u_sdfgamma:w.width/(256*Math.min(W,J)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:N.y,u_mix:m.t})};function fo(n,s){return 1/xr(n,1,s.tileZoom)}function Mo(n,s,a){return n.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var Mf=function(n,s,a,c,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(E=m.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=m.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Wc(m.paint.get("raster-hue-rotate"))};var w,E};function Wc(n){n*=Math.PI/180;var s=Math.sin(n),a=Math.cos(n);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var Ju,nu=function(n,s,a,c,m,w,E,C,M,N){var W=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:W.width/W.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:C,u_is_text:+M,u_pitch_with_map:+c,u_texsize:N,u_texture:0}},fs=function(n,s,a,c,m,w,E,C,M,N,W){var J=m.transform;return o.extend(nu(n,s,a,c,m,w,E,C,M,N),{u_gamma_scale:c?Math.cos(J._pitch)*J.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+W})},Kh=function(n,s,a,c,m,w,E,C,M,N){return o.extend(fs(n,s,a,c,m,w,E,C,!0,M,!0),{u_texsize_icon:N,u_texture_icon:1})},Yu=function(n,s,a){return{u_matrix:n,u_opacity:s,u_color:a}},On=function(n,s,a,c,m,w){return o.extend(function(E,C,M,N){var W=M.imageManager.getPattern(E.from.toString()),J=M.imageManager.getPattern(E.to.toString()),Q=M.imageManager.getPixelSize(),se=Q.width,ne=Q.height,he=Math.pow(2,N.tileID.overscaledZ),ae=N.tileSize*Math.pow(2,M.transform.tileZoom)/he,fe=ae*(N.tileID.canonical.x+N.tileID.wrap*he),ge=ae*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[se,ne],u_mix:C.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/xr(N,1,M.transform.tileZoom),u_pixel_coord_upper:[fe>>16,ge>>16],u_pixel_coord_lower:[65535&fe,65535&ge]}}(c,w,a,m),{u_matrix:n,u_opacity:s})},ds={fillExtrusion:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new o.Uniform1f(n,s.u_height_factor),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new o.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new o.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new o.UniformColor(n,s.u_color),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_overlay:new o.Uniform1i(n,s.u_overlay),u_overlay_scale:new o.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new o.Uniform1f(n,s.u_extrude_scale),u_intensity:new o.Uniform1f(n,s.u_intensity),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_color_ramp:new o.Uniform1i(n,s.u_color_ramp),u_opacity:new o.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_latrange:new o.Uniform2f(n,s.u_latrange),u_light:new o.Uniform2f(n,s.u_light),u_shadow:new o.UniformColor(n,s.u_shadow),u_highlight:new o.UniformColor(n,s.u_highlight),u_accent:new o.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_dimension:new o.Uniform2f(n,s.u_dimension),u_zoom:new o.Uniform1f(n,s.u_zoom),u_unpack:new o.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_image:new o.Uniform1i(n,s.u_image),u_image_height:new o.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_texsize:new o.Uniform2f(n,s.u_texsize),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_image:new o.Uniform1i(n,s.u_image),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new o.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new o.Uniform1f(n,s.u_sdfgamma),u_image:new o.Uniform1i(n,s.u_image),u_tex_y_a:new o.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new o.Uniform1f(n,s.u_tex_y_b),u_mix:new o.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new o.Uniform2f(n,s.u_tl_parent),u_scale_parent:new o.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new o.Uniform1f(n,s.u_buffer_scale),u_fade_t:new o.Uniform1f(n,s.u_fade_t),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image0:new o.Uniform1i(n,s.u_image0),u_image1:new o.Uniform1i(n,s.u_image1),u_brightness_low:new o.Uniform1f(n,s.u_brightness_low),u_brightness_high:new o.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new o.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new o.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new o.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texsize_icon:new o.Uniform2f(n,s.u_texsize_icon),u_texture:new o.Uniform1i(n,s.u_texture),u_texture_icon:new o.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_color:new o.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image:new o.Uniform1i(n,s.u_image),u_pattern_tl_a:new o.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(n,s.u_pattern_br_b),u_texsize:new o.Uniform2f(n,s.u_texsize),u_mix:new o.Uniform1f(n,s.u_mix),u_pattern_size_a:new o.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new o.Uniform1f(n,s.u_scale_a),u_scale_b:new o.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(n,s.u_tile_units_to_pixels)}}};function Jn(n,s,a,c,m,w,E){for(var C=n.context,M=C.gl,N=n.useProgram("collisionBox"),W=[],J=0,Q=0,se=0;se<c.length;se++){var ne=c[se],he=s.getTile(ne),ae=he.getBucket(a);if(ae){var fe=ne.posMatrix;m[0]===0&&m[1]===0||(fe=n.translatePosMatrix(ne.posMatrix,he,m,w));var ge=E?ae.textCollisionBox:ae.iconCollisionBox,Ie=ae.collisionCircleArray;if(Ie.length>0){var Be=o.create(),Ae=fe;o.mul(Be,ae.placementInvProjMatrix,n.transform.glCoordMatrix),o.mul(Be,Be,ae.placementViewportMatrix),W.push({circleArray:Ie,circleOffset:Q,transform:Ae,invTransform:Be}),Q=J+=Ie.length/4}ge&&N.draw(C,M.LINES,$.disabled,le.disabled,n.colorModeForRenderPass(),ye.disabled,ru(fe,n.transform,he),a.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,null,n.transform.zoom,null,null,ge.collisionVertexBuffer)}}if(E&&W.length){var Fe=n.useProgram("collisionCircle"),Ze=new o.StructArrayLayout2f1f2i16;Ze.resize(4*J),Ze._trim();for(var Ke=0,Xe=0,it=W;Xe<it.length;Xe+=1)for(var mt=it[Xe],vt=0;vt<mt.circleArray.length/4;vt++){var wt=4*vt,ar=mt.circleArray[wt+0],ct=mt.circleArray[wt+1],Ft=mt.circleArray[wt+2],Qt=mt.circleArray[wt+3];Ze.emplace(Ke++,ar,ct,Ft,Qt,0),Ze.emplace(Ke++,ar,ct,Ft,Qt,1),Ze.emplace(Ke++,ar,ct,Ft,Qt,2),Ze.emplace(Ke++,ar,ct,Ft,Qt,3)}(!Ju||Ju.length<2*J)&&(Ju=function(Jr){var Bi=2*Jr,dn=new o.StructArrayLayout3ui6;dn.resize(Bi),dn._trim();for(var gi=0;gi<Bi;gi++){var ri=6*gi;dn.uint16[ri+0]=4*gi+0,dn.uint16[ri+1]=4*gi+1,dn.uint16[ri+2]=4*gi+2,dn.uint16[ri+3]=4*gi+2,dn.uint16[ri+4]=4*gi+3,dn.uint16[ri+5]=4*gi+0}return dn}(J));for(var zt=C.createIndexBuffer(Ju,!0),Dt=C.createVertexBuffer(Ze,o.collisionCircleLayout.members,!0),Xt=0,It=W;Xt<It.length;Xt+=1){var Ct=It[Xt],Wi=Zp(Ct.transform,Ct.invTransform,n.transform);Fe.draw(C,M.TRIANGLES,$.disabled,le.disabled,n.colorModeForRenderPass(),ye.disabled,Wi,a.id,Dt,zt,o.SegmentVector.simpleSegment(0,2*Ct.circleOffset,Ct.circleArray.length,Ct.circleArray.length/2),null,n.transform.zoom,null,null,null)}Dt.destroy(),zt.destroy()}}var pn=o.identity(new Float32Array(16));function Gp(n,s,a,c,m,w){var E=o.getAnchorAlignment(n),C=-(E.horizontalAlign-.5)*s,M=-(E.verticalAlign-.5)*a,N=o.evaluateVariableOffset(n,c);return new o.Point((C/m+N[0])*w,(M/m+N[1])*w)}function au(n,s,a,c,m,w,E,C,M,N,W){var J=n.text.placedSymbolArray,Q=n.text.dynamicLayoutVertexArray,se=n.icon.dynamicLayoutVertexArray,ne={};Q.clear();for(var he=0;he<J.length;he++){var ae=J.get(he),fe=ae.hidden||!ae.crossTileID||n.allowVerticalPlacement&&!ae.placedOrientation?null:c[ae.crossTileID];if(fe){var ge=new o.Point(ae.anchorX,ae.anchorY),Ie=Nt(ge,a?C:E),Be=ur(w.cameraToCenterDistance,Ie.signedDistanceFromCamera),Ae=m.evaluateSizeForFeature(n.textSizeData,N,ae)*Be/o.ONE_EM;a&&(Ae*=n.tilePixelRatio/M);for(var Fe=Gp(fe.anchor,fe.width,fe.height,fe.textOffset,fe.textBoxScale,Ae),Ze=a?Nt(ge.add(Fe),E).point:Ie.point.add(s?Fe.rotate(-w.angle):Fe),Ke=n.allowVerticalPlacement&&ae.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Xe=0;Xe<ae.numGlyphs;Xe++)o.addDynamicAttributes(Q,Ze,Ke);W&&ae.associatedIconIndex>=0&&(ne[ae.associatedIconIndex]={shiftedAnchor:Ze,angle:Ke})}else Di(ae.numGlyphs,Q)}if(W){se.clear();for(var it=n.icon.placedSymbolArray,mt=0;mt<it.length;mt++){var vt=it.get(mt);if(vt.hidden)Di(vt.numGlyphs,se);else{var wt=ne[mt];if(wt)for(var ar=0;ar<vt.numGlyphs;ar++)o.addDynamicAttributes(se,wt.shiftedAnchor,wt.angle);else Di(vt.numGlyphs,se)}}n.icon.dynamicLayoutVertexBuffer.updateData(se)}n.text.dynamicLayoutVertexBuffer.updateData(Q)}function Xh(n,s,a){return a.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Qu(n,s,a,c,m,w,E,C,M,N,W,J){for(var Q=n.context,se=Q.gl,ne=n.transform,he=C==="map",ae=M==="map",fe=he&&a.layout.get("symbol-placement")!=="point",ge=he&&!ae&&!fe,Ie=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Be=!1,Ae=n.depthModeForSublayer(0,$.ReadOnly),Fe=a.layout.get("text-variable-anchor"),Ze=[],Ke=0,Xe=c;Ke<Xe.length;Ke+=1){var it=Xe[Ke],mt=s.getTile(it),vt=mt.getBucket(a);if(vt){var wt=m?vt.text:vt.icon;if(wt&&wt.segments.get().length){var ar=wt.programConfigurations.get(a.id),ct=m||vt.sdfIcons,Ft=m?vt.textSizeData:vt.iconSizeData,Qt=ae||ne.pitch!==0,zt=n.useProgram(Xh(ct,m,vt),ar),Dt=o.evaluateSizeForZoom(Ft,ne.zoom),Xt=void 0,It=[0,0],Ct=void 0,Wi=void 0,Jr=null,Bi=void 0;if(m)Ct=mt.glyphAtlasTexture,Wi=se.LINEAR,Xt=mt.glyphAtlasTexture.size,vt.iconsInText&&(It=mt.imageAtlasTexture.size,Jr=mt.imageAtlasTexture,Bi=Qt||n.options.rotating||n.options.zooming||Ft.kind==="composite"||Ft.kind==="camera"?se.LINEAR:se.NEAREST);else{var dn=a.layout.get("icon-size").constantOr(0)!==1||vt.iconsNeedLinear;Ct=mt.imageAtlasTexture,Wi=ct||n.options.rotating||n.options.zooming||dn||Qt?se.LINEAR:se.NEAREST,Xt=mt.imageAtlasTexture.size}var gi=xr(mt,1,n.transform.zoom),ri=oi(it.posMatrix,ae,he,n.transform,gi),Oi=gr(it.posMatrix,ae,he,n.transform,gi),jn=Fe&&vt.hasTextData(),Oo=a.layout.get("icon-text-fit")!=="none"&&jn&&vt.hasIconData();fe&&co(vt,it.posMatrix,n,m,ri,Oi,ae,N);var qn=n.translatePosMatrix(it.posMatrix,mt,w,E),_o=fe||m&&Fe||Oo?pn:ri,Zn=n.translatePosMatrix(Oi,mt,w,E,!0),ih=ct&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,pu={program:zt,buffers:wt,uniformValues:ct?vt.iconsInText?Kh(Ft.kind,Dt,ge,ae,n,qn,_o,Zn,Xt,It):fs(Ft.kind,Dt,ge,ae,n,qn,_o,Zn,m,Xt,!0):nu(Ft.kind,Dt,ge,ae,n,qn,_o,Zn,m,Xt),atlasTexture:Ct,atlasTextureIcon:Jr,atlasInterpolation:Wi,atlasInterpolationIcon:Bi,isSDF:ct,hasHalo:ih};if(Ie&&vt.canOverlap){Be=!0;for(var Ji=0,Va=wt.segments.get();Ji<Va.length;Ji+=1){var ga=Va[Ji];Ze.push({segments:new o.SegmentVector([ga]),sortKey:ga.sortKey,state:pu})}}else Ze.push({segments:wt.segments,sortKey:0,state:pu})}}}Be&&Ze.sort(function(Js,Ll){return Js.sortKey-Ll.sortKey});for(var mn=0,ac=Ze;mn<ac.length;mn+=1){var va=ac[mn],Zi=va.state;if(Q.activeTexture.set(se.TEXTURE0),Zi.atlasTexture.bind(Zi.atlasInterpolation,se.CLAMP_TO_EDGE),Zi.atlasTextureIcon&&(Q.activeTexture.set(se.TEXTURE1),Zi.atlasTextureIcon&&Zi.atlasTextureIcon.bind(Zi.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),Zi.isSDF){var Dl=Zi.uniformValues;Zi.hasHalo&&(Dl.u_is_halo=1,$u(Zi.buffers,va.segments,a,n,Zi.program,Ae,W,J,Dl)),Dl.u_is_halo=0}$u(Zi.buffers,va.segments,a,n,Zi.program,Ae,W,J,Zi.uniformValues)}}function $u(n,s,a,c,m,w,E,C,M){var N=c.context;m.draw(N,N.gl.TRIANGLES,w,E,C,ye.disabled,M,a.id,n.layoutVertexBuffer,n.indexBuffer,s,a.paint,c.transform.zoom,n.programConfigurations.get(a.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function ms(n,s,a,c,m,w,E){var C,M,N,W,J,Q=n.context.gl,se=a.paint.get("fill-pattern"),ne=se&&se.constantOr(1),he=a.getCrossfadeParameters();E?(M=ne&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",C=Q.LINES):(M=ne?"fillPattern":"fill",C=Q.TRIANGLES);for(var ae=0,fe=c;ae<fe.length;ae+=1){var ge=fe[ae],Ie=s.getTile(ge);if(!ne||Ie.patternsLoaded()){var Be=Ie.getBucket(a);if(Be){var Ae=Be.programConfigurations.get(a.id),Fe=n.useProgram(M,Ae);ne&&(n.context.activeTexture.set(Q.TEXTURE0),Ie.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Ae.updatePaintBuffers(he));var Ze=se.constantOr(null);if(Ze&&Ie.imageAtlas){var Ke=Ie.imageAtlas,Xe=Ke.patternPositions[Ze.to.toString()],it=Ke.patternPositions[Ze.from.toString()];Xe&&it&&Ae.setConstantPatternPositions(Xe,it)}var mt=n.translatePosMatrix(ge.posMatrix,Ie,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(E){W=Be.indexBuffer2,J=Be.segments2;var vt=[Q.drawingBufferWidth,Q.drawingBufferHeight];N=M==="fillOutlinePattern"&&ne?qp(mt,n,he,Ie,vt):qd(mt,vt)}else W=Be.indexBuffer,J=Be.segments,N=ne?qs(mt,n,he,Ie):Qa(mt);Fe.draw(n.context,C,m,n.stencilModeForClipping(ge),w,ye.disabled,N,a.id,Be.layoutVertexBuffer,W,J,a.paint,n.transform.zoom,Ae)}}}}function Kp(n,s,a,c,m,w,E){for(var C=n.context,M=C.gl,N=a.paint.get("fill-extrusion-pattern"),W=N.constantOr(1),J=a.getCrossfadeParameters(),Q=a.paint.get("fill-extrusion-opacity"),se=0,ne=c;se<ne.length;se+=1){var he=ne[se],ae=s.getTile(he),fe=ae.getBucket(a);if(fe){var ge=fe.programConfigurations.get(a.id),Ie=n.useProgram(W?"fillExtrusionPattern":"fillExtrusion",ge);W&&(n.context.activeTexture.set(M.TEXTURE0),ae.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ge.updatePaintBuffers(J));var Be=N.constantOr(null);if(Be&&ae.imageAtlas){var Ae=ae.imageAtlas,Fe=Ae.patternPositions[Be.to.toString()],Ze=Ae.patternPositions[Be.from.toString()];Fe&&Ze&&ge.setConstantPatternPositions(Fe,Ze)}var Ke=n.translatePosMatrix(he.posMatrix,ae,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Xe=a.paint.get("fill-extrusion-vertical-gradient"),it=W?kl(Ke,n,Xe,Q,he,J,ae):ps(Ke,n,Xe,Q);Ie.draw(C,C.gl.TRIANGLES,m,w,E,ye.backCCW,it,a.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,a.paint,n.transform.zoom,ge)}}}function Jc(n,s,a,c,m,w){var E=n.context,C=E.gl,M=s.fbo;if(M){var N=n.useProgram("hillshade");E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,M.colorAttachment.get());var W=function(J,Q,se){var ne=se.paint.get("hillshade-shadow-color"),he=se.paint.get("hillshade-highlight-color"),ae=se.paint.get("hillshade-accent-color"),fe=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=J.transform.angle);var ge,Ie,Be,Ae=!J.options.moving;return{u_matrix:J.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),Ae),u_image:0,u_latrange:(ge=Q.tileID,Ie=Math.pow(2,ge.canonical.z),Be=ge.canonical.y,[new o.MercatorCoordinate(0,Be/Ie).toLngLat().lat,new o.MercatorCoordinate(0,(Be+1)/Ie).toLngLat().lat]),u_light:[se.paint.get("hillshade-exaggeration"),fe],u_shadow:ne,u_highlight:he,u_accent:ae}}(n,s,a);N.draw(E,C.TRIANGLES,c,m,w,ye.disabled,W,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function ou(n,s,a,c,m,w){var E=n.context,C=E.gl,M=s.dem;if(M&&M.data){var N=M.dim,W=M.stride,J=M.getPixels();if(E.activeTexture.set(C.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(W),s.demTexture){var Q=s.demTexture;Q.update(J,{premultiply:!1}),Q.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else s.demTexture=new o.Texture(E,J,C.RGBA,{premultiply:!1}),s.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);E.activeTexture.set(C.TEXTURE0);var se=s.fbo;if(!se){var ne=new o.Texture(E,{width:N,height:N,data:null},C.RGBA);ne.bind(C.LINEAR,C.CLAMP_TO_EDGE),(se=s.fbo=E.createFramebuffer(N,N,!0)).colorAttachment.set(ne.texture)}E.bindFramebuffer.set(se.framebuffer),E.viewport.set([0,0,N,N]),n.useProgram("hillshadePrepare").draw(E,C.TRIANGLES,c,m,w,ye.disabled,function(he,ae){var fe=ae.stride,ge=o.create();return o.ortho(ge,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(ge,ge,[0,-o.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[fe,fe],u_zoom:he.overscaledZ,u_unpack:ae.getUnpackVector()}}(s.tileID,M),a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Yc(n,s,a,c,m){var w=c.paint.get("raster-fade-duration");if(w>0){var E=o.browser.now(),C=(E-n.timeAdded)/w,M=s?(E-s.timeAdded)/w:-1,N=a.getSource(),W=m.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),J=!s||Math.abs(s.tileID.overscaledZ-W)>Math.abs(n.tileID.overscaledZ-W),Q=J&&n.refreshedUponExpiration?1:o.clamp(J?C:1-M,0,1);return n.refreshedUponExpiration&&C>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}var Do=new o.Color(1,0,0,1),mo=new o.Color(0,1,0,1),ys=new o.Color(0,0,1,1),Qc=new o.Color(1,0,1,1),Sl=new o.Color(0,1,1,1);function $c(n,s,a,c){ec(n,0,s+a/2,n.transform.width,a,c)}function Df(n,s,a,c){ec(n,s-a/2,0,a,n.transform.height,c)}function ec(n,s,a,c,m,w){var E=n.context,C=E.gl;C.enable(C.SCISSOR_TEST),C.scissor(s*o.browser.devicePixelRatio,a*o.browser.devicePixelRatio,c*o.browser.devicePixelRatio,m*o.browser.devicePixelRatio),E.clear({color:w}),C.disable(C.SCISSOR_TEST)}function Il(n,s,a){var c=n.context,m=c.gl,w=a.posMatrix,E=n.useProgram("debug"),C=$.disabled,M=le.disabled,N=n.colorModeForRenderPass();c.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.draw(c,m.LINE_STRIP,C,M,N,ye.disabled,$a(w,o.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var W=s.getTileByID(a.key).latestRawTileData,J=Math.floor((W&&W.byteLength||0)/1024),Q=s.getTile(a).tileSize,se=512/Math.min(Q,512)*(a.overscaledZ/n.transform.zoom)*.5,ne=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(ne+=" => "+a.overscaledZ),function(he,ae){he.initDebugOverlayCanvas();var fe=he.debugOverlayCanvas,ge=he.context.gl,Ie=he.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,fe.width,fe.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(ae,5,5),Ie.strokeText(ae,5,5),he.debugOverlayTexture.update(fe),he.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}(n,ne+" "+J+"kb"),E.draw(c,m.TRIANGLES,C,M,me.alphaBlended,ye.disabled,$a(w,o.Color.transparent,se),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var su={symbol:function(n,s,a,c,m){if(n.renderPass==="translucent"){var w=le.disabled,E=n.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(C,M,N,W,J,Q,se){for(var ne=M.transform,he=J==="map",ae=Q==="map",fe=0,ge=C;fe<ge.length;fe+=1){var Ie=ge[fe],Be=W.getTile(Ie),Ae=Be.getBucket(N);if(Ae&&Ae.text&&Ae.text.segments.get().length){var Fe=o.evaluateSizeForZoom(Ae.textSizeData,ne.zoom),Ze=xr(Be,1,M.transform.zoom),Ke=oi(Ie.posMatrix,ae,he,M.transform,Ze),Xe=N.layout.get("icon-text-fit")!=="none"&&Ae.hasIconData();if(Fe){var it=Math.pow(2,ne.zoom-Be.tileID.overscaledZ);au(Ae,he,ae,se,o.symbolSize,ne,Ke,Ie.posMatrix,it,Fe,Xe)}}}}(c,n,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&Qu(n,s,a,c,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),w,E),a.paint.get("text-opacity").constantOr(1)!==0&&Qu(n,s,a,c,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),w,E),s.map.showCollisionBoxes&&(Jn(n,s,a,c,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),Jn(n,s,a,c,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),w=a.paint.get("circle-stroke-width"),E=a.paint.get("circle-stroke-opacity"),C=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var M=n.context,N=M.gl,W=n.depthModeForSublayer(0,$.ReadOnly),J=le.disabled,Q=n.colorModeForRenderPass(),se=[],ne=0;ne<c.length;ne++){var he=c[ne],ae=s.getTile(he),fe=ae.getBucket(a);if(fe){var ge=fe.programConfigurations.get(a.id),Ie={programConfiguration:ge,program:n.useProgram("circle",ge),layoutVertexBuffer:fe.layoutVertexBuffer,indexBuffer:fe.indexBuffer,uniformValues:Zs(n,he,ae,a)};if(C)for(var Be=0,Ae=fe.segments.get();Be<Ae.length;Be+=1){var Fe=Ae[Be];se.push({segments:new o.SegmentVector([Fe]),sortKey:Fe.sortKey,state:Ie})}else se.push({segments:fe.segments,sortKey:0,state:Ie})}}C&&se.sort(function(mt,vt){return mt.sortKey-vt.sortKey});for(var Ze=0,Ke=se;Ze<Ke.length;Ze+=1){var Xe=Ke[Ze],it=Xe.state;it.program.draw(M,N.TRIANGLES,W,J,Q,ye.disabled,it.uniformValues,a.id,it.layoutVertexBuffer,it.indexBuffer,Xe.segments,a.paint,n.transform.zoom,it.programConfiguration)}}}},heatmap:function(n,s,a,c){if(a.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,w=m.gl,E=le.disabled,C=new me([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(se,ne,he){var ae=se.gl;se.activeTexture.set(ae.TEXTURE1),se.viewport.set([0,0,ne.width/4,ne.height/4]);var fe=he.heatmapFbo;if(fe)ae.bindTexture(ae.TEXTURE_2D,fe.colorAttachment.get()),se.bindFramebuffer.set(fe.framebuffer);else{var ge=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,ge),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),fe=he.heatmapFbo=se.createFramebuffer(ne.width/4,ne.height/4,!1),function(Ie,Be,Ae,Fe){var Ze=Ie.gl;Ze.texImage2D(Ze.TEXTURE_2D,0,Ze.RGBA,Be.width/4,Be.height/4,0,Ze.RGBA,Ie.extRenderToTextureHalfFloat?Ie.extTextureHalfFloat.HALF_FLOAT_OES:Ze.UNSIGNED_BYTE,null),Fe.colorAttachment.set(Ae)}(se,ne,ge,fe)}})(m,n,a),m.clear({color:o.Color.transparent});for(var M=0;M<c.length;M++){var N=c[M];if(!s.hasRenderableParent(N)){var W=s.getTile(N),J=W.getBucket(a);if(J){var Q=J.programConfigurations.get(a.id);n.useProgram("heatmap",Q).draw(m,w.TRIANGLES,$.disabled,E,C,ye.disabled,Hp(N.posMatrix,W,n.transform.zoom,a.paint.get("heatmap-intensity")),a.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,a.paint,n.transform.zoom,Q)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(se,ne){var he=se.context,ae=he.gl,fe=ne.heatmapFbo;if(fe){he.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,fe.colorAttachment.get()),he.activeTexture.set(ae.TEXTURE1);var ge=ne.colorRampTexture;ge||(ge=ne.colorRampTexture=new o.Texture(he,ne.colorRamp,ae.RGBA)),ge.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),se.useProgram("heatmapTexture").draw(he,ae.TRIANGLES,$.disabled,le.disabled,se.colorModeForRenderPass(),ye.disabled,function(Ie,Be,Ae,Fe){var Ze=o.create();o.ortho(Ze,0,Ie.width,Ie.height,0,0,1);var Ke=Ie.context.gl;return{u_matrix:Ze,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Be.paint.get("heatmap-opacity")}}(se,ne),ne.id,se.viewportBuffer,se.quadTriangleIndexBuffer,se.viewportSegments,ne.paint,se.transform.zoom)}}(n,a))},line:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("line-opacity"),w=a.paint.get("line-width");if(m.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=n.depthModeForSublayer(0,$.ReadOnly),C=n.colorModeForRenderPass(),M=a.paint.get("line-dasharray"),N=a.paint.get("line-pattern"),W=N.constantOr(1),J=a.paint.get("line-gradient"),Q=a.getCrossfadeParameters(),se=W?"linePattern":M?"lineSDF":J?"lineGradient":"line",ne=n.context,he=ne.gl,ae=!0,fe=0,ge=c;fe<ge.length;fe+=1){var Ie=ge[fe],Be=s.getTile(Ie);if(!W||Be.patternsLoaded()){var Ae=Be.getBucket(a);if(Ae){var Fe=Ae.programConfigurations.get(a.id),Ze=n.context.program.get(),Ke=n.useProgram(se,Fe),Xe=ae||Ke.program!==Ze,it=N.constantOr(null);if(it&&Be.imageAtlas){var mt=Be.imageAtlas,vt=mt.patternPositions[it.to.toString()],wt=mt.patternPositions[it.from.toString()];vt&&wt&&Fe.setConstantPatternPositions(vt,wt)}var ar=W?Gh(n,Be,a,Q):M?Pf(n,Be,a,M,Q):J?Mr(n,Be,a,Ae.lineClipsArray.length):Po(n,Be,a);if(W)ne.activeTexture.set(he.TEXTURE0),Be.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Fe.updatePaintBuffers(Q);else if(M&&(Xe||n.lineAtlas.dirty))ne.activeTexture.set(he.TEXTURE0),n.lineAtlas.bind(ne);else if(J){var ct=Ae.gradients[a.id],Ft=ct.texture;if(a.gradientVersion!==ct.version){var Qt=256;if(a.stepInterpolant){var zt=s.getSource().maxzoom,Dt=Ie.canonical.z===zt?Math.ceil(1<<n.transform.maxZoom-Ie.canonical.z):1;Qt=o.clamp(o.nextPowerOfTwo(Ae.maxLineLength/o.EXTENT*1024*Dt),256,ne.maxTextureSize)}ct.gradient=o.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Qt,image:ct.gradient||void 0,clips:Ae.lineClipsArray}),ct.texture?ct.texture.update(ct.gradient):ct.texture=new o.Texture(ne,ct.gradient,he.RGBA),ct.version=a.gradientVersion,Ft=ct.texture}ne.activeTexture.set(he.TEXTURE0),Ft.bind(a.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}Ke.draw(ne,he.TRIANGLES,E,n.stencilModeForClipping(Ie),C,ye.disabled,ar,a.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,a.paint,n.transform.zoom,Fe,Ae.layoutVertexBuffer2),ae=!1}}}}},fill:function(n,s,a,c){var m=a.paint.get("fill-color"),w=a.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=n.colorModeForRenderPass(),C=a.paint.get("fill-pattern"),M=n.opaquePassEnabledForLayer()&&!C.constantOr(1)&&m.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===M){var N=n.depthModeForSublayer(1,n.renderPass==="opaque"?$.ReadWrite:$.ReadOnly);ms(n,s,a,c,N,E,!1)}if(n.renderPass==="translucent"&&a.paint.get("fill-antialias")){var W=n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,$.ReadOnly);ms(n,s,a,c,W,E,!0)}}},"fill-extrusion":function(n,s,a,c){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var w=new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Kp(n,s,a,c,w,le.disabled,me.disabled),Kp(n,s,a,c,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var E=n.colorModeForRenderPass();Kp(n,s,a,c,w,le.disabled,E)}}},hillshade:function(n,s,a,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,w=n.depthModeForSublayer(0,$.ReadOnly),E=n.colorModeForRenderPass(),C=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],M=C[0],N=0,W=C[1];N<W.length;N+=1){var J=W[N],Q=s.getTile(J);Q.needsHillshadePrepare&&n.renderPass==="offscreen"?ou(n,Q,a,w,le.disabled,E):n.renderPass==="translucent"&&Jc(n,Q,a,w,M[J.overscaledZ],E)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,a,c){if(n.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&c.length)for(var m=n.context,w=m.gl,E=s.getSource(),C=n.useProgram("raster"),M=n.colorModeForRenderPass(),N=E instanceof Tr?[{},c]:n.stencilConfigForOverlap(c),W=N[0],J=N[1],Q=J[J.length-1].overscaledZ,se=!n.options.moving,ne=0,he=J;ne<he.length;ne+=1){var ae=he[ne],fe=n.depthModeForSublayer(ae.overscaledZ-Q,a.paint.get("raster-opacity")===1?$.ReadWrite:$.ReadOnly,w.LESS),ge=s.getTile(ae),Ie=n.transform.calculatePosMatrix(ae.toUnwrapped(),se);ge.registerFadeDuration(a.paint.get("raster-fade-duration"));var Be=s.findLoadedParent(ae,0),Ae=Yc(ge,Be,s,a,n.transform),Fe=void 0,Ze=void 0,Ke=a.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;m.activeTexture.set(w.TEXTURE0),ge.texture.bind(Ke,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(w.TEXTURE1),Be?(Be.texture.bind(Ke,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,Be.tileID.overscaledZ-ge.tileID.overscaledZ),Ze=[ge.tileID.canonical.x*Fe%1,ge.tileID.canonical.y*Fe%1]):ge.texture.bind(Ke,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var Xe=Mf(Ie,Ze||[0,0],Fe||1,Ae,a);E instanceof Tr?C.draw(m,w.TRIANGLES,fe,le.disabled,M,ye.disabled,Xe,a.id,E.boundsBuffer,n.quadTriangleIndexBuffer,E.boundsSegments):C.draw(m,w.TRIANGLES,fe,W[ae.overscaledZ],M,ye.disabled,Xe,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,a){var c=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var w=n.context,E=w.gl,C=n.transform,M=C.tileSize,N=a.paint.get("background-pattern");if(!n.isPatternMissing(N)){var W=!N&&c.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===W){var J=le.disabled,Q=n.depthModeForSublayer(0,W==="opaque"?$.ReadWrite:$.ReadOnly),se=n.colorModeForRenderPass(),ne=n.useProgram(N?"backgroundPattern":"background"),he=C.coveringTiles({tileSize:M});N&&(w.activeTexture.set(E.TEXTURE0),n.imageManager.bind(n.context));for(var ae=a.getCrossfadeParameters(),fe=0,ge=he;fe<ge.length;fe+=1){var Ie=ge[fe],Be=n.transform.calculatePosMatrix(Ie.toUnwrapped()),Ae=N?On(Be,m,n,N,{tileID:Ie,tileSize:M},ae):Yu(Be,m,c);ne.draw(w,E.TRIANGLES,Q,J,se,ye.disabled,Ae,a.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,a){for(var c=0;c<a.length;c++)Il(n,s,a[c])},custom:function(n,s,a){var c=n.context,m=a.implementation;if(n.renderPass==="offscreen"){var w=m.prerender;w&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),w.call(m,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(le.disabled);var E=m.renderingMode==="3d"?new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,$.ReadOnly);c.setDepthMode(E),m.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},li=function(n,s){this.context=new G(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=te.maxUnderzooming+te.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ee,this.gpuTimers={}};li.prototype.resize=function(n,s){if(this.width=n*o.browser.devicePixelRatio,this.height=s*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize()},li.prototype.setup=function(){var n=this.context,s=new o.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(o.EXTENT,0),s.emplaceBack(0,o.EXTENT),s.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,ki.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var a=new o.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(o.EXTENT,0),a.emplaceBack(0,o.EXTENT),a.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=n.createVertexBuffer(a,ki.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var c=new o.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(o.EXTENT,0,o.EXTENT,0),c.emplaceBack(0,o.EXTENT,0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,Ve.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var m=new o.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,ki.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var w=new o.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var E=new o.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(E),this.emptyTexture=new o.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var C=this.context.gl;this.stencilClearMode=new le({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)},li.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=o.create();o.ortho(a,0,this.width,this.height,0,0,1),o.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,$.disabled,this.stencilClearMode,me.disabled,ye.disabled,iu(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},li.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var a=this.context,c=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(me.disabled),a.setDepthMode($.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=s;w<E.length;w+=1){var C=E[w],M=this._tileClippingMaskIDs[C.key]=this.nextStencilID++;m.draw(a,c.TRIANGLES,$.disabled,new le({func:c.ALWAYS,mask:0},M,255,c.KEEP,c.KEEP,c.REPLACE),me.disabled,ye.disabled,iu(C.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},li.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new le({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},li.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new le({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},li.prototype.stencilConfigForOverlap=function(n){var s,a=this.context.gl,c=n.sort(function(M,N){return N.overscaledZ-M.overscaledZ}),m=c[c.length-1].overscaledZ,w=c[0].overscaledZ-m+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},C=0;C<w;C++)E[C+m]=new le({func:a.GEQUAL,mask:255},C+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=w,[E,c]}return[(s={},s[m]=le.disabled,s),c]},li.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new me([n.CONSTANT_COLOR,n.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?me.unblended:me.alphaBlended},li.prototype.depthModeForSublayer=function(n,s,a){if(!this.opaquePassEnabledForLayer())return $.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $(a||this.context.gl.LEQUAL,s,[c,c])},li.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},li.prototype.render=function(n,s){var a=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var c=this.style._order,m=this.style.sourceCaches;for(var w in m){var E=m[w];E.used&&E.prepare(this.context)}var C,M,N={},W={},J={};for(var Q in m){var se=m[Q];N[Q]=se.getVisibleCoordinates(),W[Q]=N[Q].slice().reverse(),J[Q]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ne=0;ne<c.length;ne++)if(this.style._layers[c[ne]].is3D()){this.opaquePassCutoff=ne;break}this.renderPass="offscreen";for(var he=0,ae=c;he<ae.length;he+=1){var fe=this.style._layers[ae[he]];if(fe.hasOffscreenPass()&&!fe.isHidden(this.transform.zoom)){var ge=W[fe.source];(fe.type==="custom"||ge.length)&&this.renderLayer(this,m[fe.source],fe,ge)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var Ie=this.style._layers[c[this.currentLayer]],Be=m[Ie.source],Ae=N[Ie.source];this._renderTileClippingMasks(Ie,Ae),this.renderLayer(this,Be,Ie,Ae)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Fe=this.style._layers[c[this.currentLayer]],Ze=m[Fe.source],Ke=(Fe.type==="symbol"?J:W)[Fe.source];this._renderTileClippingMasks(Fe,N[Fe.source]),this.renderLayer(this,Ze,Fe,Ke)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Xe){Xe.source&&!Xe.isHidden(a.transform.zoom)&&(Xe.source!==(M&&M.id)&&(M=a.style.sourceCaches[Xe.source]),(!C||C.getSource().maxzoom<M.getSource().maxzoom)&&(C=M))}),C&&su.debug(this,C,C.getVisibleCoordinates())),this.options.showPadding&&function(Xe){var it=Xe.transform.padding;$c(Xe,Xe.transform.height-(it.top||0),3,Do),$c(Xe,it.bottom||0,3,mo),Df(Xe,it.left||0,3,ys),Df(Xe,Xe.transform.width-(it.right||0),3,Qc);var mt=Xe.transform.centerPoint;(function(vt,wt,ar,ct){ec(vt,wt-1,ar-10,2,20,ct),ec(vt,wt-10,ar-1,20,2,ct)})(Xe,mt.x,Xe.transform.height-mt.y,Sl)}(this),this.context.setDefault()},li.prototype.renderLayer=function(n,s,a,c){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||c.length)&&(this.id=a.id,this.gpuTimingStart(a),su[a.type](n,s,a,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},li.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[n.id];a||(a=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},li.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},li.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},li.prototype.queryGpuTimers=function(n){var s={};for(var a in n){var c=n[a],m=this.context.extTimerQuery,w=m.getQueryObjectEXT(c.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(c.query),s[a]=w}return s},li.prototype.translatePosMatrix=function(n,s,a,c,m){if(!a[0]&&!a[1])return n;var w=m?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),C=Math.cos(w);a=[a[0]*C-a[1]*E,a[0]*E+a[1]*C]}var M=[m?a[0]:xr(s,a[0],this.transform.zoom),m?a[1]:xr(s,a[1],this.transform.zoom),0],N=new Float32Array(16);return o.translate(N,n,M),N},li.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},li.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},li.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),a=this.imageManager.getPattern(n.to.toString());return!s||!a},li.prototype.useProgram=function(n,s){this.cache=this.cache||{};var a=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new hs(this.context,n,Af[n],s,ds[n],this._showOverdrawInspector)),this.cache[a]},li.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},li.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},li.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},li.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var gs=function(n,s){this.points=n,this.planes=s};gs.fromInvProjectionMatrix=function(n,s,a){var c=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return o.transformMat4([],E,n)}).map(function(E){return o.scale$1([],E,1/E[3]/s*c)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var C=o.sub([],m[E[0]],m[E[1]]),M=o.sub([],m[E[2]],m[E[1]]),N=o.normalize([],o.cross([],C,M)),W=-o.dot(N,m[E[1]]);return N.concat(W)});return new gs(m,w)};var Tl=function(n,s){this.min=n,this.max=s,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};Tl.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],a=o.clone$2(this.min),c=o.clone$2(this.max),m=0;m<s.length;m++)a[m]=s[m]?this.min[m]:this.center[m],c[m]=s[m]?this.center[m]:this.max[m];return c[2]=this.max[2],new Tl(a,c)},Tl.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},Tl.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},Tl.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,c=0;c<n.planes.length;c++){for(var m=n.planes[c],w=0,E=0;E<s.length;E++)w+=o.dot$1(m,s[E])>=0;if(w===0)return 0;w!==s.length&&(a=!1)}if(a)return 2;for(var C=0;C<3;C++){for(var M=Number.MAX_VALUE,N=-Number.MAX_VALUE,W=0;W<n.points.length;W++){var J=n.points[W][C]-this.min[C];M=Math.min(M,J),N=Math.max(N,J)}if(N<0||M>this.max[C]-this.min[C])return 0}return 1};var Yn=function(n,s,a,c){if(n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=a,this.right=c};Yn.prototype.interpolate=function(n,s,a){return s.top!=null&&n.top!=null&&(this.top=o.number(n.top,s.top,a)),s.bottom!=null&&n.bottom!=null&&(this.bottom=o.number(n.bottom,s.bottom,a)),s.left!=null&&n.left!=null&&(this.left=o.number(n.left,s.left,a)),s.right!=null&&n.right!=null&&(this.right=o.number(n.right,s.right,a)),this},Yn.prototype.getCenter=function(n,s){var a=o.clamp((this.left+n-this.right)/2,0,n),c=o.clamp((this.top+s-this.bottom)/2,0,s);return new o.Point(a,c)},Yn.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Yn.prototype.clone=function(){return new Yn(this.top,this.bottom,this.left,this.right)},Yn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Kt=function(n,s,a,c,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=a??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Yn,this._posMatrixCache={},this._alignedPosMatrixCache={}},wr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Kt.prototype.clone=function(){var n=new Kt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},wr.minZoom.get=function(){return this._minZoom},wr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},wr.maxZoom.get=function(){return this._maxZoom},wr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},wr.minPitch.get=function(){return this._minPitch},wr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},wr.maxPitch.get=function(){return this._maxPitch},wr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},wr.renderWorldCopies.get=function(){return this._renderWorldCopies},wr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},wr.worldSize.get=function(){return this.tileSize*this.scale},wr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},wr.size.get=function(){return new o.Point(this.width,this.height)},wr.bearing.get=function(){return-this.angle/Math.PI*180},wr.bearing.set=function(n){var s=-o.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},wr.pitch.get=function(){return this._pitch/Math.PI*180},wr.pitch.set=function(n){var s=o.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},wr.fov.get=function(){return this._fov/Math.PI*180},wr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},wr.zoom.get=function(){return this._zoom},wr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},wr.center.get=function(){return this._center},wr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},wr.padding.get=function(){return this._edgeInsets.toJSON()},wr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},wr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Kt.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},Kt.prototype.interpolatePadding=function(n,s,a){this._unmodified=!1,this._edgeInsets.interpolate(n,s,a),this._constrain(),this._calcMatrices()},Kt.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},Kt.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new o.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new o.Point(0,0)),c=this.pointCoordinate(new o.Point(this.width,0)),m=this.pointCoordinate(new o.Point(this.width,this.height)),w=this.pointCoordinate(new o.Point(0,this.height)),E=Math.floor(Math.min(a.x,c.x,m.x,w.x)),C=Math.floor(Math.max(a.x,c.x,m.x,w.x)),M=E-1;M<=C+1;M++)M!==0&&s.push(new o.UnwrappedTileID(M,n));return s},Kt.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),a=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=o.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),w=[m*c.x,m*c.y,0],E=gs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),C=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(C=s);var M=function(Xe){return{aabb:new Tl([Xe*m,0,0],[(Xe+1)*m,m,0]),zoom:0,x:0,y:0,wrap:Xe,fullyVisible:!1}},N=[],W=[],J=s,Q=n.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var se=1;se<=3;se++)N.push(M(-se)),N.push(M(se));for(N.push(M(0));N.length>0;){var ne=N.pop(),he=ne.x,ae=ne.y,fe=ne.fullyVisible;if(!fe){var ge=ne.aabb.intersects(E);if(ge===0)continue;fe=ge===2}var Ie=ne.aabb.distanceX(w),Be=ne.aabb.distanceY(w),Ae=Math.max(Math.abs(Ie),Math.abs(Be));if(ne.zoom===J||Ae>3+(1<<J-ne.zoom)-2&&ne.zoom>=C)W.push({tileID:new o.OverscaledTileID(ne.zoom===J?Q:ne.zoom,ne.wrap,ne.zoom,he,ae),distanceSq:o.sqrLen([w[0]-.5-he,w[1]-.5-ae])});else for(var Fe=0;Fe<4;Fe++){var Ze=(he<<1)+Fe%2,Ke=(ae<<1)+(Fe>>1);N.push({aabb:ne.aabb.quadrant(Fe),zoom:ne.zoom+1,x:Ze,y:Ke,wrap:ne.wrap,fullyVisible:fe})}}return W.sort(function(Xe,it){return Xe.distanceSq-it.distanceSq}).map(function(Xe){return Xe.tileID})},Kt.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},wr.unmodified.get=function(){return this._unmodified},Kt.prototype.zoomScale=function(n){return Math.pow(2,n)},Kt.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},Kt.prototype.project=function(n){var s=o.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(n.lng)*this.worldSize,o.mercatorYfromLat(s)*this.worldSize)},Kt.prototype.unproject=function(n){return new o.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},wr.point.get=function(){return this.project(this.center)},Kt.prototype.setLocationAtPoint=function(n,s){var a=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),w=new o.MercatorCoordinate(m.x-(a.x-c.x),m.y-(a.y-c.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},Kt.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},Kt.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},Kt.prototype.locationCoordinate=function(n){return o.MercatorCoordinate.fromLngLat(n)},Kt.prototype.coordinateLocation=function(n){return n.toLngLat()},Kt.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],a=[n.x,n.y,1,1];o.transformMat4(s,s,this.pixelMatrixInverse),o.transformMat4(a,a,this.pixelMatrixInverse);var c=s[3],m=a[3],w=s[1]/c,E=a[1]/m,C=s[2]/c,M=a[2]/m,N=C===M?0:(0-C)/(M-C);return new o.MercatorCoordinate(o.number(s[0]/c,a[0]/m,N)/this.worldSize,o.number(w,E,N)/this.worldSize)},Kt.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix),new o.Point(s[0]/s[3],s[1]/s[3])},Kt.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Kt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Kt.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Kt.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var a=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[a])return c[a];var m=n.canonical,w=this.worldSize/this.zoomScale(m.z),E=m.x+Math.pow(2,m.z)*n.wrap,C=o.identity(new Float64Array(16));return o.translate(C,C,[E*w,m.y*w,0]),o.scale(C,C,[w/o.EXTENT,w/o.EXTENT,1]),o.multiply(C,s?this.alignedProjMatrix:this.projMatrix,C),c[a]=new Float32Array(C),c[a]},Kt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Kt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,a,c,m=-90,w=90,E=-180,C=180,M=this.size,N=this._unmodified;if(this.latRange){var W=this.latRange;m=o.mercatorYfromLat(W[1])*this.worldSize,n=(w=o.mercatorYfromLat(W[0])*this.worldSize)-m<M.y?M.y/(w-m):0}if(this.lngRange){var J=this.lngRange;E=o.mercatorXfromLng(J[0])*this.worldSize,s=(C=o.mercatorXfromLng(J[1])*this.worldSize)-E<M.x?M.x/(C-E):0}var Q=this.point,se=Math.max(s||0,n||0);if(se)return this.center=this.unproject(new o.Point(s?(C+E)/2:Q.x,n?(w+m)/2:Q.y)),this.zoom+=this.scaleZoom(se),this._unmodified=N,void(this._constraining=!1);if(this.latRange){var ne=Q.y,he=M.y/2;ne-he<m&&(c=m+he),ne+he>w&&(c=w-he)}if(this.lngRange){var ae=Q.x,fe=M.x/2;ae-fe<E&&(a=E+fe),ae+fe>C&&(a=C-fe)}a===void 0&&c===void 0||(this.center=this.unproject(new o.Point(a!==void 0?a:Q.x,c!==void 0?c:Q.y))),this._unmodified=N,this._constraining=!1}},Kt.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+n.y/this.height),c=Math.sin(a)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-s-a,.01,Math.PI-.01)),m=this.point,w=m.x,E=m.y,C=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),M=this.height/50,N=new Float64Array(16);o.perspective(N,this._fov,this.width/this.height,M,C),N[8]=2*-n.x/this.width,N[9]=2*n.y/this.height,o.scale(N,N,[1,-1,1]),o.translate(N,N,[0,0,-this.cameraToCenterDistance]),o.rotateX(N,N,this._pitch),o.rotateZ(N,N,this.angle),o.translate(N,N,[-w,-E,0]),this.mercatorMatrix=o.scale([],N,[this.worldSize,this.worldSize,this.worldSize]),o.scale(N,N,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=N,this.invProjMatrix=o.invert([],this.projMatrix);var W=this.width%2/2,J=this.height%2/2,Q=Math.cos(this.angle),se=Math.sin(this.angle),ne=w-Math.round(w)+Q*W+se*J,he=E-Math.round(E)+Q*J+se*W,ae=new Float64Array(N);if(o.translate(ae,ae,[ne>.5?ne-1:ne,he>.5?he-1:he,0]),this.alignedProjMatrix=ae,N=o.create(),o.scale(N,N,[this.width/2,-this.height/2,1]),o.translate(N,N,[1,-1,0]),this.labelPlaneMatrix=N,N=o.create(),o.scale(N,N,[1,-1,1]),o.translate(N,N,[-1,-1,0]),o.scale(N,N,[2/this.width,2/this.height,1]),this.glCoordMatrix=N,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(N=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=N,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Kt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new o.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Kt.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,n))},Kt.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var a=s.x,c=s.y,m=s.x,w=s.y,E=0,C=n;E<C.length;E+=1){var M=C[E];a=Math.min(a,M.x),c=Math.min(c,M.y),m=Math.max(m,M.x),w=Math.max(w,M.y)}return[new o.Point(a,c),new o.Point(m,c),new o.Point(m,w),new o.Point(a,w),new o.Point(a,c)]},Object.defineProperties(Kt.prototype,wr);var La=function(n){var s,a,c,m;this._hashName=n&&encodeURIComponent(n),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,c=null,m=function(){c=null,a&&(s(),c=setTimeout(m,300),a=!1)},function(){return a=!0,c||m(),c})};La.prototype.addTo=function(n){return this._map=n,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},La.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},La.prototype.getHashString=function(n){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,c=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,c),w=Math.round(s.lng*m)/m,E=Math.round(s.lat*m)/m,C=this._map.getBearing(),M=this._map.getPitch(),N="";if(N+=n?"/"+w+"/"+E+"/"+a:a+"/"+E+"/"+w,(C||M)&&(N+="/"+Math.round(10*C)/10),M&&(N+="/"+Math.round(M)),this._hashName){var W=this._hashName,J=!1,Q=o.window.location.hash.slice(1).split("&").map(function(se){var ne=se.split("=")[0];return ne===W?(J=!0,ne+"="+N):se}).filter(function(se){return se});return J||Q.push(W+"="+N),"#"+Q.join("&")}return"#"+N},La.prototype._getCurrentHash=function(){var n,s=this,a=o.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):a.split("/")},La.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},La.prototype._updateHashUnthrottled=function(){var n=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,n)}catch{}};var vs={linearity:.3,easing:o.bezier(0,0,.3,1)},zl=o.extend({deceleration:2500,maxSpeed:1400},vs),Wh=o.extend({deceleration:20,maxSpeed:1400},vs),Lf=o.extend({deceleration:1e3,maxSpeed:360},vs),lu=o.extend({deceleration:1e3,maxSpeed:90},vs),eh=function(n){this._map=n,this.clear()};function tc(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function ca(n,s,a){var c=a.maxSpeed,m=a.linearity,w=a.deceleration,E=o.clamp(n*m/(s/1e3),-c,c),C=Math.abs(E)/(w*m);return{easing:a.easing,duration:1e3*C,amount:E*(C/2)}}eh.prototype.clear=function(){this._inertiaBuffer=[]},eh.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:n})},eh.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=o.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},eh.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},a=0,c=this._inertiaBuffer;a<c.length;a+=1){var m=c[a].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(s.pan.mag()){var C=ca(s.pan.mag(),w,o.extend({},zl,n||{}));E.offset=s.pan.mult(C.amount/s.pan.mag()),E.center=this._map.transform.center,tc(E,C)}if(s.zoom){var M=ca(s.zoom,w,Wh);E.zoom=this._map.transform.zoom+M.amount,tc(E,M)}if(s.bearing){var N=ca(s.bearing,w,Lf);E.bearing=this._map.transform.bearing+o.clamp(N.amount,-179,179),tc(E,N)}if(s.pitch){var W=ca(s.pitch,w,lu);E.pitch=this._map.transform.pitch+W.amount,tc(E,W)}if(E.zoom||E.bearing){var J=s.pinchAround===void 0?s.around:s.pinchAround;E.around=J?this._map.unproject(J):this._map.getCenter()}return this.clear(),o.extend(E,{noMoveStart:!0})}};var Xi=function(n){function s(c,m,w,E){E===void 0&&(E={});var C=I.mousePos(m.getCanvasContainer(),w),M=m.unproject(C);n.call(this,c,o.extend({point:C,lngLat:M,originalEvent:w},E)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),rc=function(n){function s(c,m,w){var E=c==="touchend"?w.changedTouches:w.touches,C=I.touchPos(m.getCanvasContainer(),E),M=C.map(function(J){return m.unproject(J)}),N=C.reduce(function(J,Q,se,ne){return J.add(Q.div(ne.length))},new o.Point(0,0)),W=m.unproject(N);n.call(this,c,{points:C,point:N,lngLats:M,lngLat:W,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),Cl=function(n){function s(c,m,w){n.call(this,c,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),ui=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};ui.prototype.reset=function(){delete this._mousedownPos},ui.prototype.wheel=function(n){return this._firePreventable(new Cl(n.type,this._map,n))},ui.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new Xi(n.type,this._map,n))},ui.prototype.mouseup=function(n){this._map.fire(new Xi(n.type,this._map,n))},ui.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Xi(n.type,this._map,n))},ui.prototype.dblclick=function(n){return this._firePreventable(new Xi(n.type,this._map,n))},ui.prototype.mouseover=function(n){this._map.fire(new Xi(n.type,this._map,n))},ui.prototype.mouseout=function(n){this._map.fire(new Xi(n.type,this._map,n))},ui.prototype.touchstart=function(n){return this._firePreventable(new rc(n.type,this._map,n))},ui.prototype.touchmove=function(n){this._map.fire(new rc(n.type,this._map,n))},ui.prototype.touchend=function(n){this._map.fire(new rc(n.type,this._map,n))},ui.prototype.touchcancel=function(n){this._map.fire(new rc(n.type,this._map,n))},ui.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},ui.prototype.isEnabled=function(){return!0},ui.prototype.isActive=function(){return!1},ui.prototype.enable=function(){},ui.prototype.disable=function(){};var dt=function(n){this._map=n};dt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},dt.prototype.mousemove=function(n){this._map.fire(new Xi(n.type,this._map,n))},dt.prototype.mousedown=function(){this._delayContextMenu=!0},dt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},dt.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Xi(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},dt.prototype.isEnabled=function(){return!0},dt.prototype.isActive=function(){return!1},dt.prototype.enable=function(){},dt.prototype.disable=function(){};var ha=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function _s(n,s){for(var a={},c=0;c<n.length;c++)a[n[c].identifier]=s[c];return a}ha.prototype.isEnabled=function(){return!!this._enabled},ha.prototype.isActive=function(){return!!this._active},ha.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ha.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ha.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(I.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},ha.prototype.mousemoveWindow=function(n,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a,this._box||(this._box=I.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(c.x,a.x),w=Math.max(c.x,a.x),E=Math.min(c.y,a.y),C=Math.max(c.y,a.y);I.setTransform(this._box,"translate("+m+"px,"+E+"px)"),this._box.style.width=w-m+"px",this._box.style.height=C-E+"px"}}},ha.prototype.mouseupWindow=function(n,s){var a=this;if(this._active&&n.button===0){var c=this._startPos,m=s;if(this.reset(),I.suppressClick(),c.x!==m.x||c.y!==m.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(c,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},ha.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},ha.prototype.blur=function(){this.reset()},ha.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos},ha.prototype._fireEvent=function(n,s){return this._map.fire(new o.Event(n,{originalEvent:s}))};var pa=function(n){this.reset(),this.numTouches=n.numTouches};pa.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},pa.prototype.touchstart=function(n,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),a.length===this.numTouches&&(this.centroid=function(c){for(var m=new o.Point(0,0),w=0,E=c;w<E.length;w+=1)m._add(E[w]);return m.div(c.length)}(s),this.touches=_s(a,s)))},pa.prototype.touchmove=function(n,s,a){if(!this.aborted&&this.centroid){var c=_s(a,s);for(var m in this.touches){var w=c[m];(!w||w.dist(this.touches[m])>30)&&(this.aborted=!0)}}},pa.prototype.touchend=function(n,s,a){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var yo=function(n){this.singleTap=new pa(n),this.numTaps=n.numTaps,this.reset()};yo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},yo.prototype.touchstart=function(n,s,a){this.singleTap.touchstart(n,s,a)},yo.prototype.touchmove=function(n,s,a){this.singleTap.touchmove(n,s,a)},yo.prototype.touchend=function(n,s,a){var c=this.singleTap.touchend(n,s,a);if(c){var m=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(c)<30;if(m&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var Fn=function(){this._zoomIn=new yo({numTouches:1,numTaps:2}),this._zoomOut=new yo({numTouches:2,numTaps:1}),this.reset()};Fn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Fn.prototype.touchstart=function(n,s,a){this._zoomIn.touchstart(n,s,a),this._zoomOut.touchstart(n,s,a)},Fn.prototype.touchmove=function(n,s,a){this._zoomIn.touchmove(n,s,a),this._zoomOut.touchmove(n,s,a)},Fn.prototype.touchend=function(n,s,a){var c=this,m=this._zoomIn.touchend(n,s,a),w=this._zoomOut.touchend(n,s,a);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(m)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:n})}}):void 0},Fn.prototype.touchcancel=function(){this.reset()},Fn.prototype.enable=function(){this._enabled=!0},Fn.prototype.disable=function(){this._enabled=!1,this.reset()},Fn.prototype.isEnabled=function(){return this._enabled},Fn.prototype.isActive=function(){return this._active};var th={0:1,2:2},$e=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};$e.prototype.blur=function(){this.reset()},$e.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},$e.prototype._correctButton=function(n,s){return!1},$e.prototype._move=function(n,s){return{}},$e.prototype.mousedown=function(n,s){if(!this._lastPoint){var a=I.mouseButton(n);this._correctButton(n,a)&&(this._lastPoint=s,this._eventButton=a)}},$e.prototype.mousemoveWindow=function(n,s){var a=this._lastPoint;if(a){if(n.preventDefault(),function(c,m){var w=th[m];return c.buttons===void 0||(c.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},$e.prototype.mouseupWindow=function(n){this._lastPoint&&I.mouseButton(n)===this._eventButton&&(this._moved&&I.suppressClick(),this.reset())},$e.prototype.enable=function(){this._enabled=!0},$e.prototype.disable=function(){this._enabled=!1,this.reset()},$e.prototype.isEnabled=function(){return this._enabled},$e.prototype.isActive=function(){return this._active};var Al=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(a,c){n.prototype.mousedown.call(this,a,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,c){return c===0&&!a.ctrlKey},s.prototype._move=function(a,c){return{around:c,panDelta:c.sub(a)}},s}($e),Jh=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=.8*(c.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}($e),Yh=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=-.5*(c.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}($e),Ri=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};Ri.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Ri.prototype.touchstart=function(n,s,a){return this._calculateTransform(n,s,a)},Ri.prototype.touchmove=function(n,s,a){if(this._active&&!(a.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,a)},Ri.prototype.touchend=function(n,s,a){this._calculateTransform(n,s,a),this._active&&a.length<this._minTouches&&this.reset()},Ri.prototype.touchcancel=function(){this.reset()},Ri.prototype._calculateTransform=function(n,s,a){a.length>0&&(this._active=!0);var c=_s(a,s),m=new o.Point(0,0),w=new o.Point(0,0),E=0;for(var C in c){var M=c[C],N=this._touches[C];N&&(m._add(M),w._add(M.sub(N)),E++,c[C]=M)}if(this._touches=c,!(E<this._minTouches)&&w.mag()){var W=w.div(E);if(this._sum._add(W),!(this._sum.mag()<this._clickTolerance))return{around:m.div(E),panDelta:W}}},Ri.prototype.enable=function(){this._enabled=!0},Ri.prototype.disable=function(){this._enabled=!1,this.reset()},Ri.prototype.isEnabled=function(){return this._enabled},Ri.prototype.isActive=function(){return this._active};var qi=function(){this.reset()};function Ra(n,s,a){for(var c=0;c<n.length;c++)if(n[c].identifier===a)return s[c]}function go(n,s){return Math.log(n/s)/Math.LN2}qi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qi.prototype._start=function(n){},qi.prototype._move=function(n,s,a){return{}},qi.prototype.touchstart=function(n,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},qi.prototype.touchmove=function(n,s,a){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,m=c[1],w=Ra(a,s,c[0]),E=Ra(a,s,m);if(w&&E){var C=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],C,n)}}},qi.prototype.touchend=function(n,s,a){if(this._firstTwoTouches){var c=this._firstTwoTouches,m=c[1],w=Ra(a,s,c[0]),E=Ra(a,s,m);w&&E||(this._active&&I.suppressClick(),this.reset())}},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var fa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(go(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:go(this._distance,m),pinchAround:c}},s}(qi);function Ba(n,s){return 180*n.angleWith(s)/Math.PI}var Qh=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ba(this._vector,m),pinchAround:c}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var c=25/(Math.PI*this._minDiameter)*360,m=Ba(a,this._startVector);return Math.abs(m)<c},s}(qi);function $h(n){return Math.abs(n.y)>Math.abs(n.x)}var ep=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,$h(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,c,m){var w=a[0].sub(this._lastPoints[0]),E=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,c,m){if(this._valid!==void 0)return this._valid;var w=a.mag()>=2,E=c.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var C=a.y>0==c.y>0;return $h(a)&&$h(c)&&C}},s}(qi),Hs={panStep:100,bearingStep:15,pitchStep:10},Lo=function(){var n=Hs;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function Oa(n){return n*(2-n)}Lo.prototype.blur=function(){this.reset()},Lo.prototype.reset=function(){this._active=!1},Lo.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=0,c=0,m=0,w=0,E=0;switch(n.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),E=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(c=0,m=0),{cameraAnimation:function(C){var M=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:Oa,zoom:a?Math.round(M)+a*(n.shiftKey?2:1):M,bearing:C.getBearing()+c*s._bearingStep,pitch:C.getPitch()+m*s._pitchStep,offset:[-w*s._panStep,-E*s._panStep],center:C.getCenter()},{originalEvent:n})}}}},Lo.prototype.enable=function(){this._enabled=!0},Lo.prototype.disable=function(){this._enabled=!1,this.reset()},Lo.prototype.isEnabled=function(){return this._enabled},Lo.prototype.isActive=function(){return this._active},Lo.prototype.disableRotation=function(){this._rotationDisabled=!0},Lo.prototype.enableRotation=function(){this._rotationDisabled=!1};var Yt=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};Yt.prototype.setZoomRate=function(n){this._defaultZoomRate=n},Yt.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},Yt.prototype.isEnabled=function(){return!!this._enabled},Yt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Yt.prototype.isZooming=function(){return!!this._zooming},Yt.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},Yt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Yt.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,a=o.browser.now(),c=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},Yt.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},Yt.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=I.mousePos(this._el,n);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Yt.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&c!==0&&(c=1/c);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,C=this._startZoom,M=this._easing,N=!1;if(this._type==="wheel"&&C&&M){var W=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),J=M(W);w=o.number(C,E,J),W<1?this._frameId||(this._frameId=!0):N=!0}else w=E,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!N,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Yt.prototype._smoothOutEasing=function(n){var s=o.ease;if(this._prevEase){var a=this._prevEase,c=(o.browser.now()-a.start)/a.duration,m=a.easing(c+.01)-a.easing(c),w=.27/Math.sqrt(m*m+1e-4)*.01,E=Math.sqrt(.0729-w*w);s=o.bezier(w,E,.25,1)}return this._prevEase={start:o.browser.now(),duration:n,easing:s},s},Yt.prototype.blur=function(){this.reset()},Yt.prototype.reset=function(){this._active=!1};var Ro=function(n,s){this._clickZoom=n,this._tapZoom=s};Ro.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ro.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ro.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ro.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var rn=function(){this.reset()};rn.prototype.reset=function(){this._active=!1},rn.prototype.blur=function(){this.reset()},rn.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(n.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:n})}}},rn.prototype.enable=function(){this._enabled=!0},rn.prototype.disable=function(){this._enabled=!1,this.reset()},rn.prototype.isEnabled=function(){return this._enabled},rn.prototype.isActive=function(){return this._active};var ci=function(){this._tap=new yo({numTouches:1,numTaps:1}),this.reset()};ci.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ci.prototype.touchstart=function(n,s,a){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(n,s,a))},ci.prototype.touchmove=function(n,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var c=s[0],m=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,a)},ci.prototype.touchend=function(n,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(n,s,a)&&(this._tapTime=n.timeStamp)},ci.prototype.touchcancel=function(){this.reset()},ci.prototype.enable=function(){this._enabled=!0},ci.prototype.disable=function(){this._enabled=!1,this.reset()},ci.prototype.isEnabled=function(){return this._enabled},ci.prototype.isActive=function(){return this._active};var da=function(n,s,a){this._el=n,this._mousePan=s,this._touchPan=a};da.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},da.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},da.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},da.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Gs=function(n,s,a){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};Gs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Gs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Gs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Gs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Qn=function(n,s,a,c){this._el=n,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};Qn.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Qn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Qn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Qn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Qn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Qn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var kn=function(n){return n.zoom||n.drag||n.pitch||n.rotate},tp=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(o.Event);function bt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var ht=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new eh(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),o.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[o.window,"blur",void 0]];for(var c=0,m=this._listeners;c<m.length;c+=1){var w=m[c],E=w[0];I.addEventListener(E,w[1],E===o.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};ht.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var a=s[n],c=a[0];I.removeEventListener(c,a[1],c===o.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},ht.prototype._addDefaultHandlers=function(n){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new ui(s,n));var c=s.boxZoom=new ha(s,n);this._add("boxZoom",c);var m=new Fn,w=new rn;s.doubleClickZoom=new Ro(w,m),this._add("tapZoom",m),this._add("clickZoom",w);var E=new ci;this._add("tapDragZoom",E);var C=s.touchPitch=new ep;this._add("touchPitch",C);var M=new Jh(n),N=new Yh(n);s.dragRotate=new Gs(n,M,N),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);var W=new Al(n),J=new Ri(n);s.dragPan=new da(a,W,J),this._add("mousePan",W),this._add("touchPan",J,["touchZoom","touchRotate"]);var Q=new Qh,se=new fa;s.touchZoomRotate=new Qn(a,se,Q,E),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]);var ne=s.scrollZoom=new Yt(s,this);this._add("scrollZoom",ne,["mousePan"]);var he=s.keyboard=new Lo;this._add("keyboard",he),this._add("blockableMapEvent",new dt(s));for(var ae=0,fe=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ae<fe.length;ae+=1){var ge=fe[ae];n.interactive&&n[ge]&&s[ge].enable(n[ge])}},ht.prototype._add=function(n,s,a){this._handlers.push({handlerName:n,handler:s,allowed:a}),this._handlersById[n]=s},ht.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},ht.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},ht.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ht.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ht.prototype.isMoving=function(){return!!kn(this._eventsInProgress)||this.isZooming()},ht.prototype._blockedByActive=function(n,s,a){for(var c in n)if(c!==a&&(!s||s.indexOf(c)<0))return!0;return!1},ht.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},ht.prototype._getMapTouches=function(n){for(var s=[],a=0,c=n;a<c.length;a+=1){var m=c[a];this._el.contains(m.target)&&s.push(m)}return s},ht.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var a=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},m={},w={},E=n.touches?this._getMapTouches(n.touches):void 0,C=E?I.touchPos(this._el,E):I.mousePos(this._el,n),M=0,N=this._handlers;M<N.length;M+=1){var W=N[M],J=W.handlerName,Q=W.handler,se=W.allowed;if(Q.isEnabled()){var ne=void 0;this._blockedByActive(w,se,J)?Q.reset():Q[s||n.type]&&(ne=Q[s||n.type](n,C,E),this.mergeHandlerResult(c,m,ne,J,a),ne&&ne.needsRenderFrame&&this._triggerRenderFrame()),(ne||Q.isActive())&&(w[J]=Q)}}var he={};for(var ae in this._previousActiveHandlers)w[ae]||(he[ae]=a);this._previousActiveHandlers=w,(Object.keys(he).length||bt(c))&&(this._changes.push([c,m,he]),this._triggerRenderFrame()),(Object.keys(w).length||bt(c))&&this._map._stop(!0),this._updatingCamera=!1;var fe=c.cameraAnimation;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))},ht.prototype.mergeHandlerResult=function(n,s,a,c,m){if(a){o.extend(n,a);var w={handlerName:c,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(s.zoom=w),a.panDelta!==void 0&&(s.drag=w),a.pitchDelta!==void 0&&(s.pitch=w),a.bearingDelta!==void 0&&(s.rotate=w)}},ht.prototype._applyChanges=function(){for(var n={},s={},a={},c=0,m=this._changes;c<m.length;c+=1){var w=m[c],E=w[0],C=w[1],M=w[2];E.panDelta&&(n.panDelta=(n.panDelta||new o.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(n.around=E.around),E.pinchAround!==void 0&&(n.pinchAround=E.pinchAround),E.noInertia&&(n.noInertia=E.noInertia),o.extend(s,C),o.extend(a,M)}this._updateMapTransform(n,s,a),this._changes=[]},ht.prototype._updateMapTransform=function(n,s,a){var c=this._map,m=c.transform;if(!bt(n))return this._fireEvents(s,a,!0);var w=n.panDelta,E=n.zoomDelta,C=n.bearingDelta,M=n.pitchDelta,N=n.around,W=n.pinchAround;W!==void 0&&(N=W),c._stop(!0),N=N||c.transform.centerPoint;var J=m.pointLocation(w?N.sub(w):N);C&&(m.bearing+=C),M&&(m.pitch+=M),E&&(m.zoom+=E),m.setLocationAtPoint(J,N),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,a,!0)},ht.prototype._fireEvents=function(n,s,a){var c=this,m=kn(this._eventsInProgress),w=kn(n),E={};for(var C in n)this._eventsInProgress[C]||(E[C+"start"]=n[C].originalEvent),this._eventsInProgress[C]=n[C];for(var M in!m&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(M,E[M]);for(var N in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(N,n[N].originalEvent);var W,J={};for(var Q in this._eventsInProgress){var se=this._eventsInProgress[Q],ne=se.handlerName,he=se.originalEvent;this._handlersById[ne].isActive()||(delete this._eventsInProgress[Q],J[Q+"end"]=W=s[ne]||he)}for(var ae in J)this._fireEvent(ae,J[ae]);var fe=kn(this._eventsInProgress);if(a&&(m||w)&&!fe){this._updatingCamera=!0;var ge=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ie=function(Be){return Be!==0&&-c._bearingSnap<Be&&Be<c._bearingSnap};ge?(Ie(ge.bearing||this._map.getBearing())&&(ge.bearing=0),this._map.easeTo(ge,{originalEvent:W})):(this._map.fire(new o.Event("moveend",{originalEvent:W})),Ie(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ht.prototype._fireEvent=function(n,s){this._map.fire(new o.Event(n,s?{originalEvent:s}:{}))},ht.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new tp("renderFrame",{timeStamp:s})),n._applyChanges()})},ht.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var rp=function(n){function s(a,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},s.prototype.panBy=function(a,c,m){return a=o.Point.convert(a).mult(-1),this.panTo(this.transform.center,o.extend({offset:a},c),m)},s.prototype.panTo=function(a,c,m){return this.easeTo(o.extend({center:a},c),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},s.prototype.zoomTo=function(a,c,m){return this.easeTo(o.extend({zoom:a},c),m)},s.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},s.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,c){return this.jumpTo({padding:a},c),this},s.prototype.rotateTo=function(a,c,m){return this.easeTo(o.extend({bearing:a},c),m)},s.prototype.resetNorth=function(a,c){return this.rotateTo(0,o.extend({duration:1e3},a),c),this},s.prototype.resetNorthPitch=function(a,c){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},a),c),this},s.prototype.snapToNorth=function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},s.prototype.cameraForBounds=function(a,c){a=o.LngLatBounds.convert(a);var m=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,c)},s.prototype._cameraForBoxAndBearing=function(a,c,m,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=o.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var C=w.padding;w.padding={top:C,bottom:C,right:C,left:C}}w.padding=o.extend(E,w.padding);var M=this.transform,N=M.padding,W=M.project(o.LngLat.convert(a)),J=M.project(o.LngLat.convert(c)),Q=W.rotate(-m*Math.PI/180),se=J.rotate(-m*Math.PI/180),ne=new o.Point(Math.max(Q.x,se.x),Math.max(Q.y,se.y)),he=new o.Point(Math.min(Q.x,se.x),Math.min(Q.y,se.y)),ae=ne.sub(he),fe=(M.width-(N.left+N.right+w.padding.left+w.padding.right))/ae.x,ge=(M.height-(N.top+N.bottom+w.padding.top+w.padding.bottom))/ae.y;if(!(ge<0||fe<0)){var Ie=Math.min(M.scaleZoom(M.scale*Math.min(fe,ge)),w.maxZoom),Be=typeof w.offset.x=="number"?new o.Point(w.offset.x,w.offset.y):o.Point.convert(w.offset),Ae=new o.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(m*Math.PI/180),Fe=Be.add(Ae).mult(M.scale/M.zoomScale(Ie));return{center:M.unproject(W.add(J).div(2).sub(Fe)),zoom:Ie,bearing:m}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,c,m){return this._fitInternal(this.cameraForBounds(a,c),c,m)},s.prototype.fitScreenCoordinates=function(a,c,m,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(a)),this.transform.pointLocation(o.Point.convert(c)),m,w),w,E)},s.prototype._fitInternal=function(a,c,m){return a?(delete(c=o.extend(a,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this},s.prototype.jumpTo=function(a,c){this.stop();var m=this.transform,w=!1,E=!1,C=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(w=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=o.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(E=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(C=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),w&&this.fire(new o.Event("zoomstart",c)).fire(new o.Event("zoom",c)).fire(new o.Event("zoomend",c)),E&&this.fire(new o.Event("rotatestart",c)).fire(new o.Event("rotate",c)).fire(new o.Event("rotateend",c)),C&&this.fire(new o.Event("pitchstart",c)).fire(new o.Event("pitch",c)).fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))},s.prototype.easeTo=function(a,c){var m=this;this._stop(!1,a.easeId),((a=o.extend({offset:[0,0],duration:500,easing:o.ease},a)).animate===!1||!a.essential&&o.browser.prefersReducedMotion)&&(a.duration=0);var w=this.transform,E=this.getZoom(),C=this.getBearing(),M=this.getPitch(),N=this.getPadding(),W="zoom"in a?+a.zoom:E,J="bearing"in a?this._normalizeBearing(a.bearing,C):C,Q="pitch"in a?+a.pitch:M,se="padding"in a?a.padding:w.padding,ne=o.Point.convert(a.offset),he=w.centerPoint.add(ne),ae=w.pointLocation(he),fe=o.LngLat.convert(a.center||ae);this._normalizeCenter(fe);var ge,Ie,Be=w.project(ae),Ae=w.project(fe).sub(Be),Fe=w.zoomScale(W-E);a.around&&(ge=o.LngLat.convert(a.around),Ie=w.locationPoint(ge));var Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||W!==E,this._rotating=this._rotating||C!==J,this._pitching=this._pitching||Q!==M,this._padding=!w.isPaddingEqual(se),this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,Ze),this._ease(function(Ke){if(m._zooming&&(w.zoom=o.number(E,W,Ke)),m._rotating&&(w.bearing=o.number(C,J,Ke)),m._pitching&&(w.pitch=o.number(M,Q,Ke)),m._padding&&(w.interpolatePadding(N,se,Ke),he=w.centerPoint.add(ne)),ge)w.setLocationAtPoint(ge,Ie);else{var Xe=w.zoomScale(w.zoom-E),it=W>E?Math.min(2,Fe):Math.max(.5,Fe),mt=Math.pow(it,1-Ke),vt=w.unproject(Be.add(Ae.mult(Ke*mt)).mult(Xe));w.setLocationAtPoint(w.renderWorldCopies?vt.wrap():vt,he)}m._fireMoveEvents(c)},function(Ke){m._afterEase(c,Ke)},a),this},s.prototype._prepareEase=function(a,c,m){m===void 0&&(m={}),this._moving=!0,c||m.moving||this.fire(new o.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new o.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new o.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new o.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new o.Event("move",a)),this._zooming&&this.fire(new o.Event("zoom",a)),this._rotating&&this.fire(new o.Event("rotate",a)),this._pitching&&this.fire(new o.Event("pitch",a))},s.prototype._afterEase=function(a,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var m=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new o.Event("zoomend",a)),w&&this.fire(new o.Event("rotateend",a)),E&&this.fire(new o.Event("pitchend",a)),this.fire(new o.Event("moveend",a))}},s.prototype.flyTo=function(a,c){var m=this;if(!a.essential&&o.browser.prefersReducedMotion){var w=o.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,c)}this.stop(),a=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},a);var E=this.transform,C=this.getZoom(),M=this.getBearing(),N=this.getPitch(),W=this.getPadding(),J="zoom"in a?o.clamp(+a.zoom,E.minZoom,E.maxZoom):C,Q="bearing"in a?this._normalizeBearing(a.bearing,M):M,se="pitch"in a?+a.pitch:N,ne="padding"in a?a.padding:E.padding,he=E.zoomScale(J-C),ae=o.Point.convert(a.offset),fe=E.centerPoint.add(ae),ge=E.pointLocation(fe),Ie=o.LngLat.convert(a.center||ge);this._normalizeCenter(Ie);var Be=E.project(ge),Ae=E.project(Ie).sub(Be),Fe=a.curve,Ze=Math.max(E.width,E.height),Ke=Ze/he,Xe=Ae.mag();if("minZoom"in a){var it=o.clamp(Math.min(a.minZoom,C,J),E.minZoom,E.maxZoom),mt=Ze/E.zoomScale(it-C);Fe=Math.sqrt(mt/Xe*2)}var vt=Fe*Fe;function wt(It){var Ct=(Ke*Ke-Ze*Ze+(It?-1:1)*vt*vt*Xe*Xe)/(2*(It?Ke:Ze)*vt*Xe);return Math.log(Math.sqrt(Ct*Ct+1)-Ct)}function ar(It){return(Math.exp(It)-Math.exp(-It))/2}function ct(It){return(Math.exp(It)+Math.exp(-It))/2}var Ft=wt(0),Qt=function(It){return ct(Ft)/ct(Ft+Fe*It)},zt=function(It){return Ze*((ct(Ft)*(ar(Ct=Ft+Fe*It)/ct(Ct))-ar(Ft))/vt)/Xe;var Ct},Dt=(wt(1)-Ft)/Fe;if(Math.abs(Xe)<1e-6||!isFinite(Dt)){if(Math.abs(Ze-Ke)<1e-6)return this.easeTo(a,c);var Xt=Ke<Ze?-1:1;Dt=Math.abs(Math.log(Ke/Ze))/Fe,zt=function(){return 0},Qt=function(It){return Math.exp(Xt*Fe*It)}}return a.duration="duration"in a?+a.duration:1e3*Dt/("screenSpeed"in a?+a.screenSpeed/Fe:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=M!==Q,this._pitching=se!==N,this._padding=!E.isPaddingEqual(ne),this._prepareEase(c,!1),this._ease(function(It){var Ct=It*Dt,Wi=1/Qt(Ct);E.zoom=It===1?J:C+E.scaleZoom(Wi),m._rotating&&(E.bearing=o.number(M,Q,It)),m._pitching&&(E.pitch=o.number(N,se,It)),m._padding&&(E.interpolatePadding(W,ne,It),fe=E.centerPoint.add(ae));var Jr=It===1?Ie:E.unproject(Be.add(Ae.mult(zt(Ct))).mult(Wi));E.setLocationAtPoint(E.renderWorldCopies?Jr.wrap():Jr,fe),m._fireMoveEvents(c)},function(){return m._afterEase(c)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!a){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(a,c,m){m.animate===!1||m.duration===0?(a(1),c()):(this._easeStart=o.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,c){a=o.wrap(a,-180,180);var m=Math.abs(a-c);return Math.abs(a-360-c)<m&&(a-=360),Math.abs(a+360-c)<m&&(a+=360),a},s.prototype._normalizeCenter=function(a){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var m=a.lng-c.center.lng;a.lng+=m>180?-360:m<-180?360:0}},s}(o.Evented),Vn=function(n){n===void 0&&(n={}),this.options=n,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Vn.prototype.getDefaultPosition=function(){return"bottom-right"},Vn.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=I.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Vn.prototype.onRemove=function(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Vn.prototype._setElementTitle=function(n,s){var a=this._map._getUIString("AttributionControl."+s);n.title=a,n.setAttribute("aria-label",a)},Vn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Vn.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(n){var a=s.reduce(function(c,m,w){return m.value&&(c+=m.key+"="+m.value+(w<s.length-1?"&":"")),c},"?");n.href=o.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},Vn.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Vn.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(C){return typeof C!="string"?"":C})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var c in a){var m=a[c];if(m.used){var w=m.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(C,M){return C.length-M.length});var E=(n=n.filter(function(C,M){for(var N=M+1;N<n.length;N++)if(n[N].indexOf(C)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,n.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Vn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Nn=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};Nn.prototype.onAdd=function(n){this._map=n,this._container=I.create("div","mapboxgl-ctrl");var s=I.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Nn.prototype.onRemove=function(){I.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Nn.prototype.getDefaultPosition=function(){return"bottom-left"},Nn.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Nn.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},Nn.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var fn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};fn.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},fn.prototype.remove=function(n){for(var s=this._currentlyRunning,a=0,c=s?this._queue.concat(s):this._queue;a<c.length;a+=1){var m=c[a];if(m.id===n)return void(m.cancelled=!0)}},fn.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,c=s;a<c.length;a+=1){var m=c[a];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},fn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Sn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},eo=o.window.HTMLImageElement,vo=o.window.HTMLElement,Dr=o.window.ImageBitmap,Ai={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ip=function(n){function s(c){var m=this;if((c=o.extend({},Ai,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new Kt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,w,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new fn,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Sn,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new o.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=o.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof vo))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ht(this,c),this._hash=c.hash&&new La(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,o.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Vn({customAttribution:c.customAttribution})),this.addControl(new Nn,c.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(E){m._update(E.dataType==="style"),m.fire(new o.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){m.fire(new o.Event(E.dataType+"dataloading",E))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,m){if(m===void 0&&(m=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=c.onAdd(this);this._controls.push(c);var E=this._controlPositions[m];return m.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(c);return m>-1&&this._controls.splice(m,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var m=this._containerDimensions(),w=m[0],E=m[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var C=!this._moving;return C&&this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),this.fire(new o.Event("resize",c)),C&&this.fire(new o.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(o.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(o.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(o.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,m,w){var E,C=this;if(c==="mouseenter"||c==="mouseover"){var M=!1;return{layer:m,listener:w,delegates:{mousemove:function(W){var J=C.getLayer(m)?C.queryRenderedFeatures(W.point,{layers:[m]}):[];J.length?M||(M=!0,w.call(C,new Xi(c,C,W.originalEvent,{features:J}))):M=!1},mouseout:function(){M=!1}}}}if(c==="mouseleave"||c==="mouseout"){var N=!1;return{layer:m,listener:w,delegates:{mousemove:function(W){(C.getLayer(m)?C.queryRenderedFeatures(W.point,{layers:[m]}):[]).length?N=!0:N&&(N=!1,w.call(C,new Xi(c,C,W.originalEvent)))},mouseout:function(W){N&&(N=!1,w.call(C,new Xi(c,C,W.originalEvent)))}}}}return{layer:m,listener:w,delegates:(E={},E[c]=function(W){var J=C.getLayer(m)?C.queryRenderedFeatures(W.point,{layers:[m]}):[];J.length&&(W.features=J,w.call(C,W),delete W.features)},E)}},s.prototype.on=function(c,m,w){if(w===void 0)return n.prototype.on.call(this,c,m);var E=this._createDelegatedListener(c,m,w);for(var C in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(E),E.delegates)this.on(C,E.delegates[C]);return this},s.prototype.once=function(c,m,w){if(w===void 0)return n.prototype.once.call(this,c,m);var E=this._createDelegatedListener(c,m,w);for(var C in E.delegates)this.once(C,E.delegates[C]);return this},s.prototype.off=function(c,m,w){var E=this;return w===void 0?n.prototype.off.call(this,c,m):(this._delegatedListeners&&this._delegatedListeners[c]&&function(C){for(var M=C[c],N=0;N<M.length;N++){var W=M[N];if(W.layer===m&&W.listener===w){for(var J in W.delegates)E.off(J,W.delegates[J]);return M.splice(N,1),E}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,m){if(!this.style)return[];var w;if(m!==void 0||c===void 0||c instanceof o.Point||Array.isArray(c)||(m=c,c=void 0),m=m||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof c[0]=="number")w=[o.Point.convert(c)];else{var E=o.Point.convert(c[0]),C=o.Point.convert(c[1]);w=[E,new o.Point(C.x,E.y),C,new o.Point(E.x,C.y),E]}return this.style.queryRenderedFeatures(w,m,this.transform)},s.prototype.querySourceFeatures=function(c,m){return this.style.querySourceFeatures(c,m)},s.prototype.setStyle=function(c,m){return(m=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(c,m))},s.prototype._getUIString=function(c){var m=this._locale[c];if(m==null)throw new Error("Missing UI string '"+c+"'");return m},s.prototype._updateStyle=function(c,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new ua(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ua(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,m){var w=this;if(typeof c=="string"){var E=this._requestManager.normalizeStyleURL(c),C=this._requestManager.transformRequest(E,o.ResourceType.Style);o.getJSON(C,function(M,N){M?w.fire(new o.ErrorEvent(M)):N&&w._updateDiff(N,m)})}else typeof c=="object"&&this._updateDiff(c,m)},s.prototype._updateDiff=function(c,m){try{this.style.setState(c)&&this._update(!0)}catch(w){o.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(c,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,m){return this._lazyInitEmptyStyle(),this.style.addSource(c,m),this._update(!0)},s.prototype.isSourceLoaded=function(c){var m=this.style&&this.style.sourceCaches[c];if(m!==void 0)return m.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var m in c){var w=c[m]._tiles;for(var E in w){var C=w[E];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,m,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,m,w)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,m,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var C=w.sdf;C===void 0&&(C=!1);var M=w.stretchX,N=w.stretchY,W=w.content;if(this._lazyInitEmptyStyle(),m instanceof eo||Dr&&m instanceof Dr){var J=o.browser.getImageData(m);this.style.addImage(c,{data:new o.RGBAImage({width:J.width,height:J.height},J.data),pixelRatio:E,stretchX:M,stretchY:N,content:W,sdf:C,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Q=m;this.style.addImage(c,{data:new o.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:E,stretchX:M,stretchY:N,content:W,sdf:C,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,c)}},s.prototype.updateImage=function(c,m){var w=this.style.getImage(c);if(!w)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=m instanceof eo||Dr&&m instanceof Dr?o.browser.getImageData(m):m,C=E.width,M=E.height,N=E.data;return C===void 0||M===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):C!==w.data.width||M!==w.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(N,!(m instanceof eo||Dr&&m instanceof Dr)),void this.style.updateImage(c,w))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,m){o.getImage(this._requestManager.transformRequest(c,o.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,m){return this._lazyInitEmptyStyle(),this.style.addLayer(c,m),this._update(!0)},s.prototype.moveLayer=function(c,m){return this.style.moveLayer(c,m),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,m,w){return this.style.setLayerZoomRange(c,m,w),this._update(!0)},s.prototype.setFilter=function(c,m,w){return w===void 0&&(w={}),this.style.setFilter(c,m,w),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,m,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(c,m,w,E),this._update(!0)},s.prototype.getPaintProperty=function(c,m){return this.style.getPaintProperty(c,m)},s.prototype.setLayoutProperty=function(c,m,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(c,m,w,E),this._update(!0)},s.prototype.getLayoutProperty=function(c,m){return this.style.getLayoutProperty(c,m)},s.prototype.setLight=function(c,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(c,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,m){return this.style.setFeatureState(c,m),this._update()},s.prototype.removeFeatureState=function(c,m){return this.style.removeFeatureState(c,m),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,m=0;return this._container&&(c=this._container.clientWidth||400,m=this._container.clientHeight||300),[c,m]},s.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=I.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=I.create("div","mapboxgl-canvas-container",c);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=I.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=I.create("div","mapboxgl-control-container",c),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(M){C[M]=I.create("div","mapboxgl-ctrl-"+M,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,m){var w=o.browser.devicePixelRatio||1;this._canvas.width=w*c,this._canvas.height=w*m,this._canvas.style.width=c+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var c=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);m?(this.painter=new li(m,this.transform),o.webpSupported.testSupport(m)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var m,w=this,E=0,C=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=C.createQueryEXT(),C.beginQueryEXT(C.TIME_ELAPSED_EXT,m),E=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var N=this.transform.zoom,W=o.browser.now();this.style.zoomHistory.update(N,W);var J=new o.EvaluationParameters(N,{now:W,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=J.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(M=!0,this._crossFadingFactor=Q),this.style.update(J)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var se=o.browser.now()-E;C.endQueryEXT(C.TIME_ELAPSED_EXT,m),setTimeout(function(){var ae=C.getQueryObjectEXT(m,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(m),w.fire(new o.Event("gpu-timing-frame",{cpuTime:se,gpuTime:ae}))},50)}if(this.listens("gpu-timing-layer")){var ne=this.painter.collectGpuTimers();setTimeout(function(){var ae=w.painter.queryGpuTimers(ne);w.fire(new o.Event("gpu-timing-layer",{layerTimes:ae}))},50)}var he=this._sourcesDirty||this._styleDirty||this._placementDirty;return he||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||he||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,m=this._controls;c<m.length;c+=1)m[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),ic(this._canvasContainer),ic(this._controlContainer),ic(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(m){c._frame=null,c._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,m){o.setCacheLimits(c,m)},a.version.get=function(){return o.version},Object.defineProperties(s.prototype,a),s}(rp);function ic(n){n.parentNode&&n.parentNode.removeChild(n)}var np={showCompass:!0,showZoom:!0,visualizePitch:!1},ma=function(n){var s=this;this.options=o.extend({},np,n),this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),I.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),I.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=I.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ma.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),a=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},ma.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},ma.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fa(this._map,this._compass,this.options.visualizePitch)),this._container},ma.prototype.onRemove=function(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ma.prototype._createButton=function(n,s){var a=I.create("button",n,this._container);return a.type="button",a.addEventListener("click",s),a},ma.prototype._setButtonTitle=function(n,s){var a=this._map._getUIString("NavigationControl."+s);n.title=a,n.setAttribute("aria-label",a)};var Fa=function(n,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Jh({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,a&&(this.mousePitch=new Yh({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),I.addEventListener(s,"mousedown",this.mousedown),I.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(s,"touchmove",this.touchmove),I.addEventListener(s,"touchend",this.touchend),I.addEventListener(s,"touchcancel",this.reset)};function uu(n,s,a){if(n=new o.LngLat(n.lng,n.lat),s){var c=new o.LngLat(n.lng-360,n.lat),m=new o.LngLat(n.lng+360,n.lat),w=a.locationPoint(n).distSqr(s);a.locationPoint(c).distSqr(s)<w?n=c:a.locationPoint(m).distSqr(s)<w&&(n=m)}for(;Math.abs(n.lng-a.center.lng)>180;){var E=a.locationPoint(n);if(E.x>=0&&E.y>=0&&E.x<=a.width&&E.y<=a.height)break;n.lng>a.center.lng?n.lng-=360:n.lng+=360}return n}Fa.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),I.disableDrag()},Fa.prototype.move=function(n,s){var a=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&a.setBearing(a.getBearing()+c.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},Fa.prototype.off=function(){var n=this.element;I.removeEventListener(n,"mousedown",this.mousedown),I.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(n,"touchmove",this.touchmove),I.removeEventListener(n,"touchend",this.touchend),I.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},Fa.prototype.offTemp=function(){I.enableDrag(),I.removeEventListener(o.window,"mousemove",this.mousemove),I.removeEventListener(o.window,"mouseup",this.mouseup)},Fa.prototype.mousedown=function(n){this.down(o.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),I.mousePos(this.element,n)),I.addEventListener(o.window,"mousemove",this.mousemove),I.addEventListener(o.window,"mouseup",this.mouseup)},Fa.prototype.mousemove=function(n){this.move(n,I.mousePos(this.element,n))},Fa.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},Fa.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},Fa.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},Fa.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Fa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var $n={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ap(n,s,a){var c=n.classList;for(var m in $n)c.remove("mapboxgl-"+a+"-anchor-"+m);c.add("mapboxgl-"+a+"-anchor-"+s)}var cu,Bo=function(n){function s(a,c){if(n.call(this),(a instanceof o.window.HTMLElement||c)&&(a=o.extend({element:a},c)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=o.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");var m=I.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var w=I.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=I.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var C=I.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");for(var M=0,N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];M<N.length;M+=1){var W=N[M],J=I.createNS("http://www.w3.org/2000/svg","ellipse");J.setAttributeNS(null,"opacity","0.04"),J.setAttributeNS(null,"cx","10.5"),J.setAttributeNS(null,"cy","5.80029008"),J.setAttributeNS(null,"rx",W.rx),J.setAttributeNS(null,"ry",W.ry),C.appendChild(J)}var Q=I.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);var se=I.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(se);var ne=I.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");var he=I.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(he);var ae=I.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ae.setAttributeNS(null,"fill","#FFFFFF");var fe=I.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ge=I.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");var Ie=I.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#FFFFFF"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962"),fe.appendChild(ge),fe.appendChild(Ie),E.appendChild(C),E.appendChild(Q),E.appendChild(ne),E.appendChild(ae),E.appendChild(fe),m.appendChild(E),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=o.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Be){Be.preventDefault()}),this._element.addEventListener("mousedown",function(Be){Be.preventDefault()}),ap(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var c=a.code,m=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var c=a.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=uu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,$n[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=o.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(o.Evented),Ks={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},nc=0,Pl=!1,Xs=function(n){function s(a){n.call(this),this.options=o.extend({},Ks,a),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){var c;return this._map=a,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,cu!==void 0?c(cu):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(m){c(cu=m.state!=="denied")}):c(cu=!!o.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,nc=0,Pl=!1},s.prototype._isOutOfMapMaxBounds=function(a){var c=this._map.getMaxBounds(),m=a.coords;return c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,w=this._map.getBearing(),E=o.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(m),E,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,c=this._map.unproject([0,a]),m=this._map.unproject([1,a]),w=c.distanceTo(m),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Pl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var c=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=I.create("button","mapboxgl-ctrl-geolocate",this._container),I.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Bo(this._dotElement),this._circleElement=I.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||c._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new o.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":nc--,Pl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++nc>1?(a={maximumAge:6e5,timeout:0},Pl=!0):(a=this.options.positionOptions,Pl=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(o.Evented),Un={maxWidth:100,unit:"metric"},Ws=function(n){this.options=o.extend({},Un,n),o.bindAll(["_onMove","setUnit"],this)};function hu(n,s,a){var c=a&&a.maxWidth||100,m=n._container.clientHeight/2,w=n.unproject([0,m]),E=n.unproject([c,m]),C=w.distanceTo(E);if(a&&a.unit==="imperial"){var M=3.2808*C;M>5280?bs(s,c,M/5280,n._getUIString("ScaleControl.Miles")):bs(s,c,M,n._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?bs(s,c,C/1852,n._getUIString("ScaleControl.NauticalMiles")):C>=1e3?bs(s,c,C/1e3,n._getUIString("ScaleControl.Kilometers")):bs(s,c,C,n._getUIString("ScaleControl.Meters"))}function bs(n,s,a,c){var m,w,E,C=(m=a,(w=Math.pow(10,(""+Math.floor(m)).length-1))*(E=(E=m/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(M){var N=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*N)/N}(E)));n.style.width=s*(C/a)+"px",n.innerHTML=C+"&nbsp;"+c}Ws.prototype.getDefaultPosition=function(){return"bottom-left"},Ws.prototype._onMove=function(){hu(this._map,this._container,this.options)},Ws.prototype.onAdd=function(n){return this._map=n,this._container=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ws.prototype.onRemove=function(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ws.prototype.setUnit=function(n){this.options.unit=n,hu(this._map,this._container,this.options)};var to=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof o.window.HTMLElement?this._container=n.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};to.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},to.prototype.onRemove=function(){I.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},to.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},to.prototype._setupUI=function(){var n=this._fullscreenButton=I.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);I.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},to.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},to.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},to.prototype._isFullscreen=function(){return this._fullscreen},to.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},to.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ml={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),op=function(n){function s(a){n.call(this),this.options=o.extend(Object.create(Ml),a),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(o.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var c,m=o.window.document.createDocumentFragment(),w=o.window.document.createElement("body");for(w.innerHTML=a;c=w.firstChild;)m.appendChild(c);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=I.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=I.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=I.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(J){return c._container.classList.add(J)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=uu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),w=this.options.anchor,E=function J(Q){if(Q){if(typeof Q=="number"){var se=Math.round(Math.sqrt(.5*Math.pow(Q,2)));return{center:new o.Point(0,0),top:new o.Point(0,Q),"top-left":new o.Point(se,se),"top-right":new o.Point(-se,se),bottom:new o.Point(0,-Q),"bottom-left":new o.Point(se,-se),"bottom-right":new o.Point(-se,-se),left:new o.Point(Q,0),right:new o.Point(-Q,0)}}if(Q instanceof o.Point||Array.isArray(Q)){var ne=o.Point.convert(Q);return{center:ne,top:ne,"top-left":ne,"top-right":ne,bottom:ne,"bottom-left":ne,"bottom-right":ne,left:ne,right:ne}}return{center:o.Point.convert(Q.center||[0,0]),top:o.Point.convert(Q.top||[0,0]),"top-left":o.Point.convert(Q["top-left"]||[0,0]),"top-right":o.Point.convert(Q["top-right"]||[0,0]),bottom:o.Point.convert(Q.bottom||[0,0]),"bottom-left":o.Point.convert(Q["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(Q["bottom-right"]||[0,0]),left:o.Point.convert(Q.left||[0,0]),right:o.Point.convert(Q.right||[0,0])}}return J(new o.Point(0,0))}(this.options.offset);if(!w){var C,M=this._container.offsetWidth,N=this._container.offsetHeight;C=m.y+E.bottom.y<N?["top"]:m.y>this._map.transform.height-N?["bottom"]:[],m.x<M/2?C.push("left"):m.x>this._map.transform.width-M/2&&C.push("right"),w=C.length===0?"bottom":C.join("-")}var W=m.add(E[w]).round();I.setTransform(this._container,$n[w]+" translate("+W.x+"px,"+W.y+"px)"),ap(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(rh);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(o.Evented),ya={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:ip,NavigationControl:ma,GeolocateControl:Xs,AttributionControl:Vn,ScaleControl:Ws,FullscreenControl:to,Popup:op,Marker:Bo,Style:ua,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Le().acquire(Re)},clearPrewarmedResources:function(){var n=at;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Re),at=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(n){o.config.ACCESS_TOKEN=n},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(n){o.config.API_URL=n},get workerCount(){return qe.workerCount},set workerCount(n){qe.workerCount=n},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){o.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){o.clearTileCache(n)},workerUrl:""};return ya}),_})})(Bx);var hv=Bx.exports;const lw=Px(hv);function _b(u){let h;const f=u[15].default,y=yy(f,u,u[14],null);return{c(){y&&y.c()},l(_){y&&y.l(_)},m(_,x){y&&y.m(_,x),h=!0},p(_,x){y&&y.p&&(!h||x&16384)&&gy(y,f,_,_[14],h?_y(f,_[14],x,null):vy(_[14]),null)},i(_){h||(et(y,_),h=!0)},o(_){pt(y,_),h=!1},d(_){y&&y.d(_)}}}function uw(u){let h,f,y,_=u[0]&&_b(u);return{c(){h=Z("div"),_&&_.c(),this.h()},l(x){h=H(x,"DIV",{class:!0,id:!0});var o=re(h);_&&_.l(o),o.forEach(R),this.h()},h(){S(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),S(h,"id",u[1]),$o(()=>u[16].call(h))},m(x,o){Ce(x,h,o),_&&_.m(h,null),f=es(h,u[16].bind(h)),u[17](h),y=!0},p(x,[o]){x[0]?_?(_.p(x,o),o&1&&et(_,1)):(_=_b(x),_.c(),et(_,1),_.m(h,null)):_&&(qu(),pt(_,1,1,()=>{_=null}),Zu()),(!y||o&2)&&S(h,"id",x[1])},i(x){y||(et(_),y=!0)},o(x){pt(_),y=!1},d(x){x&&R(h),_&&_.d(),f(),u[17](null)}}}function cw(u,h,f){let{$$slots:y={},$$scope:_}=h,{map:x}=h,{id:o="map"}=h,{location:T={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:I="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:D=!0}=h,{minzoom:V=0}=h,{maxzoom:j=14}=h,{zoom:F=null}=h,{scrollzoom:pe=!0}=h,{geolocate:ue=!0}=h,{zoomcontrol:De=!0}=h,{options:Se={}}=h,Oe,je;zx("map",{getMap:()=>x}),T.bounds?Se={...Se,bounds:T.bounds}:T.lon&&T.lat&&(Se={...Se,center:[T.lon,T.lat]},T.zoom&&(Se.zoom=T.zoom)),Cx(()=>{const Qe=document.createElement("link");return Qe.rel="stylesheet",Qe.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",Qe.onload=()=>{f(0,x=new hv.Map({container:Oe,style:I,minZoom:V,maxZoom:j,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:D,...Se})),De&&x.addControl(new hv.NavigationControl({showCompass:!1})),pe||x.scrollZoom.disable(),ue&&x.addControl(new hv.GeolocateControl),x.on("load",()=>{f(4,F=x.getZoom())}),x.on("zoom",()=>{f(4,F=x.getZoom())})},document.head.appendChild(Qe),()=>{x.remove(),Qe.parentNode.removeChild(Qe)}});function Lt(){let Qe=document.getElementsByClassName("mapboxgl-canvas");Qe[0]&&(Qe[0].style.width="100%",x.resize())}function Mt(){je=this.clientWidth,f(2,je)}function yt(Qe){Op[Qe?"unshift":"push"](()=>{Oe=Qe,f(3,Oe)})}return u.$$set=Qe=>{"map"in Qe&&f(0,x=Qe.map),"id"in Qe&&f(1,o=Qe.id),"location"in Qe&&f(6,T=Qe.location),"style"in Qe&&f(7,I=Qe.style),"interactive"in Qe&&f(8,D=Qe.interactive),"minzoom"in Qe&&f(9,V=Qe.minzoom),"maxzoom"in Qe&&f(10,j=Qe.maxzoom),"zoom"in Qe&&f(4,F=Qe.zoom),"scrollzoom"in Qe&&f(11,pe=Qe.scrollzoom),"geolocate"in Qe&&f(12,ue=Qe.geolocate),"zoomcontrol"in Qe&&f(13,De=Qe.zoomcontrol),"options"in Qe&&f(5,Se=Qe.options),"$$scope"in Qe&&f(14,_=Qe.$$scope)},u.$$.update=()=>{u.$$.dirty&4&&je&&Lt()},[x,o,je,Oe,F,Se,T,I,D,V,j,pe,ue,De,_,y,Mt,yt]}class hw extends rs{constructor(h){super(),is(this,h,cw,uw,ts,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function bb(u){let h;const f=u[11].default,y=yy(f,u,u[10],null);return{c(){y&&y.c()},l(_){y&&y.l(_)},m(_,x){y&&y.m(_,x),h=!0},p(_,x){y&&y.p&&(!h||x&1024)&&gy(y,f,_,_[10],h?_y(f,_[10],x,null):vy(_[10]),null)},i(_){h||(et(y,_),h=!0)},o(_){pt(y,_),h=!1},d(_){y&&y.d(_)}}}function pw(u){let h,f,y=u[0]&&bb(u);return{c(){y&&y.c(),h=gn()},l(_){y&&y.l(_),h=gn()},m(_,x){y&&y.m(_,x),Ce(_,h,x),f=!0},p(_,[x]){_[0]?y?(y.p(_,x),x&1&&et(y,1)):(y=bb(_),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(qu(),pt(y,1,1,()=>{y=null}),Zu())},i(_){f||(et(y),f=!0)},o(_){pt(y),f=!1},d(_){_&&R(h),y&&y.d(_)}}}function fw(u,h,f){let{$$slots:y={},$$scope:_}=h,{id:x}=h,{type:o}=h,{url:T=null}=h,{props:I={}}=h,{data:D=null}=h,{layer:V=null}=h,{promoteId:j=null}=h,{minzoom:F=null}=h,{maxzoom:pe=null}=h,ue=!1;const{getMap:De}=og("map"),Se=De();Se.getSource(x)&&Se.removeSource(x);function Oe(){Se.isSourceLoaded(x)?(f(0,ue=!0),console.log(x+" loaded!")):setTimeout(()=>{console.log("..."),Oe()},500)}function je(){Se.isStyleLoaded(x)?(Lt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),je()},500)}F&&(I.minzoom=F),pe&&(I.maxzoom=pe),V&&j?(I.promoteId={},I.promoteId[V]=j):j&&(I.promoteId=j);function Lt(){console.log(x+" map source loading..."),o=="geojson"?D?(Se.addSource(x,{type:o,data:D,...I}),Oe()):T&&(Se.addSource(x,{type:o,data:T,...I}),Oe()):o=="vector"&&(Se.addSource(x,{type:o,tiles:[T],...I}),Oe())}je();function Mt(){Se.getSource(x).setData(D)}return u.$$set=yt=>{"id"in yt&&f(2,x=yt.id),"type"in yt&&f(3,o=yt.type),"url"in yt&&f(4,T=yt.url),"props"in yt&&f(1,I=yt.props),"data"in yt&&f(5,D=yt.data),"layer"in yt&&f(6,V=yt.layer),"promoteId"in yt&&f(7,j=yt.promoteId),"minzoom"in yt&&f(8,F=yt.minzoom),"maxzoom"in yt&&f(9,pe=yt.maxzoom),"$$scope"in yt&&f(10,_=yt.$$scope)},u.$$.update=()=>{u.$$.dirty&33&&ue&&D&&Mt()},[ue,I,x,o,T,D,V,j,F,pe,_,y]}class dw extends rs{constructor(h){super(),is(this,h,fw,pw,ts,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function mw(u,h,f){const{Popup:y}=lw,_=Tx(),x=new y({closeButton:!1,closeOnClick:!1});let{id:o}=h,{source:T}=h,{sourceLayer:I=null}=h,{type:D}=h,{filter:V=null}=h,{layout:j={}}=h,{paint:F={}}=h,{data:pe=null}=h,{code:ue=null}=h,{name:De="name"}=h,{colorCode:Se=null}=h,{click:Oe=!1}=h,{ignoreClick:je=!1}=h,{clickCenter:Lt=!1}=h,{selected:Mt=null}=h,{hover:yt=!1}=h,{hovered:Qe=null}=h,{highlight:zr=!1}=h,{highlightKey:Cr="highlighted"}=h,{highlighted:sr=[]}=h,{order:St=null}=h,{maxzoom:Tt=null}=h,{minzoom:Lr=null}=h,{isChild:Ot=!1}=h;const{getMap:Rr}=og("map"),ot=Rr();let Fr=null,Qr=null,Ar=[];ot.getLayer(o)&&ot.removeLayer(o);let dr={id:o,type:D,source:T,paint:F,layout:j};V&&(dr.filter=V),I&&(dr["source-layer"]=I),Tt&&(dr.maxzoom=Tt),Lr&&(dr.minzoom=Lr),ot.addLayer(dr,St);function wi(){console.log("updating colors..."),pe.forEach(Ve=>{ot.setFeatureState({source:T,sourceLayer:I,id:Ve[ue]},{color:Ve[Se]})})}return Oe&&ot.on("click",o,Ve=>{if(Ve.features.length>0&&!je){let Tr=Ve.features[0].id;if(Ot&&sr.includes(Tr)||!Ot&&Mt!=Tr){if(f(0,Mt=Tr),_("select",{code:Mt}),Fr&&ot.setFeatureState({source:T,sourceLayer:I,id:Fr},{selected:!1}),ot.setFeatureState({source:T,sourceLayer:I,id:Mt},{selected:!0}),Lt){let vn=centroid(Ve.features[0].toJSON().geometry);ot.flyTo({center:vn.geometry.coordinates})}f(24,Fr=Mt)}}}),yt&&(ot.on("mousemove",o,Ve=>{if(Ve.features.length>0){let Tr=Ve.features[0].id;Qe&&ot.setFeatureState({source:T,sourceLayer:I,id:Qe},{hovered:!1}),Ot&&sr.includes(Tr)||!Ot&&Mt!=Tr?(f(1,Qe=f(25,Qr=Tr)),ot.setFeatureState({source:T,sourceLayer:I,id:Qe},{hovered:!0}),ot.getCanvas().style.cursor="pointer",x.setLngLat(Ve.lngLat).setHTML(`<strong>${Ve.features[0].properties[De]?Ve.features[0].properties[De]:Ve.features[0].properties[ue]}</strong>`).addTo(ot)):x.remove()}}),ot.on("mouseleave",o,Ve=>{Qe&&ot.setFeatureState({source:T,sourceLayer:I,id:Qe},{hovered:!1}),f(1,Qe=f(25,Qr=null)),ot.getCanvas().style.cursor="",x.remove()})),u.$$set=Ve=>{"id"in Ve&&f(2,o=Ve.id),"source"in Ve&&f(3,T=Ve.source),"sourceLayer"in Ve&&f(4,I=Ve.sourceLayer),"type"in Ve&&f(5,D=Ve.type),"filter"in Ve&&f(6,V=Ve.filter),"layout"in Ve&&f(7,j=Ve.layout),"paint"in Ve&&f(8,F=Ve.paint),"data"in Ve&&f(9,pe=Ve.data),"code"in Ve&&f(10,ue=Ve.code),"name"in Ve&&f(11,De=Ve.name),"colorCode"in Ve&&f(12,Se=Ve.colorCode),"click"in Ve&&f(13,Oe=Ve.click),"ignoreClick"in Ve&&f(14,je=Ve.ignoreClick),"clickCenter"in Ve&&f(15,Lt=Ve.clickCenter),"selected"in Ve&&f(0,Mt=Ve.selected),"hover"in Ve&&f(16,yt=Ve.hover),"hovered"in Ve&&f(1,Qe=Ve.hovered),"highlight"in Ve&&f(17,zr=Ve.highlight),"highlightKey"in Ve&&f(18,Cr=Ve.highlightKey),"highlighted"in Ve&&f(19,sr=Ve.highlighted),"order"in Ve&&f(20,St=Ve.order),"maxzoom"in Ve&&f(21,Tt=Ve.maxzoom),"minzoom"in Ve&&f(22,Lr=Ve.minzoom),"isChild"in Ve&&f(23,Ot=Ve.isChild)},u.$$.update=()=>{u.$$.dirty[0]&4096&&Se&&wi(),u.$$.dirty[0]&68026392&&zr&&sr!=Ar&&(Ar[0]&&Ar.forEach(Ve=>{let Tr={};Tr[Cr]=!1,ot.setFeatureState({source:T,sourceLayer:I,id:Ve},Tr)}),f(26,Ar=sr),sr[0]&&sr.forEach(Ve=>{let Tr={};Tr[Cr]=!0,ot.setFeatureState({source:T,sourceLayer:I,id:Ve},Tr)})),u.$$.dirty[0]&16777241&&Mt!=Fr&&(Fr&&ot.setFeatureState({source:T,sourceLayer:I,id:Fr},{selected:!1}),Mt&&ot.setFeatureState({source:T,sourceLayer:I,id:Mt},{selected:!0}),f(24,Fr=Mt)),u.$$.dirty[0]&33619994&&yt&&Qe!=Qr&&(Qr&&ot.setFeatureState({source:T,sourceLayer:I,id:Qr},{hovered:!1}),Qe&&ot.setFeatureState({source:T,sourceLayer:I,id:Qe},{hovered:!0}),f(25,Qr=Qe))},[Mt,Qe,o,T,I,D,V,j,F,pe,ue,De,Se,Oe,je,Lt,yt,zr,Cr,sr,St,Tt,Lr,Ot,Fr,Qr,Ar]}class j_ extends rs{constructor(h){super(),is(this,h,mw,null,ts,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function yw(u){return u===0?!0:u}function If(u){return yw(u)?Array.isArray(u)?h=>u.map(f=>typeof f!="function"?h[f]:f(h)):typeof u!="function"?h=>h[u]:u:null}function gw(u){const h={};for(const f of u){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":y,"1":_}=f;Object.defineProperty(h,y,{configurable:!0,enumerable:!0,writable:!0,value:_})}return h}function q_(u,h={}){return gw(Object.entries(u).filter(([f,y])=>y!==void 0&&h[f]===void 0))}function vw(u,h){if(!Array.isArray(u))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof u}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},y=Object.keys(h),_=y.length;let x,o,T,I,D,V,j,F;const pe=u.length;for(x=0;x<_;x+=1){for(I=y[x],j=h[I],D=null,V=null,o=0;o<pe;o+=1)if(F=j(u[o]),Array.isArray(F)){const ue=F.length;for(T=0;T<ue;T+=1)F[T]!==void 0&&F[T]!==null&&Number.isNaN(F[T])===!1&&((D===null||F[T]<D)&&(D=F[T]),(V===null||F[T]>V)&&(V=F[T]))}else F!=null&&Number.isNaN(F)===!1&&((D===null||F<D)&&(D=F),(V===null||F>V)&&(V=F));f[I]=[D,V]}return f}function Ox(u=[],h){return Array.isArray(h)===!0?h.map((f,y)=>f===null?u[y]:f):u}function tv(u){return function([f,y]){return f?Ox(f[u],y):y}}function pv(u,h){return u==null||h==null?NaN:u<h?-1:u>h?1:u>=h?0:NaN}function _w(u,h){return u==null||h==null?NaN:h<u?-1:h>u?1:h>=u?0:NaN}function Fx(u){let h,f,y;u.length!==2?(h=pv,f=(T,I)=>pv(u(T),I),y=(T,I)=>u(T)-I):(h=u===pv||u===_w?u:bw,f=u,y=u);function _(T,I,D=0,V=T.length){if(D<V){if(h(I,I)!==0)return V;do{const j=D+V>>>1;f(T[j],I)<0?D=j+1:V=j}while(D<V)}return D}function x(T,I,D=0,V=T.length){if(D<V){if(h(I,I)!==0)return V;do{const j=D+V>>>1;f(T[j],I)<=0?D=j+1:V=j}while(D<V)}return D}function o(T,I,D=0,V=T.length){const j=_(T,I,D,V-1);return j>D&&y(T[j-1],I)>-y(T[j],I)?j-1:j}return{left:_,center:o,right:x}}function bw(){return 0}function xw(u){return u===null?NaN:+u}const ww=Fx(pv),Ew=ww.right;Fx(xw).center;const kw=Ew;class xb extends Map{constructor(h,f=Tw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[y,_]of h)this.set(y,_)}get(h){return super.get(wb(this,h))}has(h){return super.has(wb(this,h))}set(h,f){return super.set(Sw(this,h),f)}delete(h){return super.delete(Iw(this,h))}}function wb({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):f}function Sw({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):(u.set(y,f),f)}function Iw({_intern:u,_key:h},f){const y=h(f);return u.has(y)&&(f=u.get(y),u.delete(y)),f}function Tw(u){return u!==null&&typeof u=="object"?u.valueOf():u}const zw=Math.sqrt(50),Cw=Math.sqrt(10),Aw=Math.sqrt(2);function vv(u,h,f){const y=(h-u)/Math.max(0,f),_=Math.floor(Math.log10(y)),x=y/Math.pow(10,_),o=x>=zw?10:x>=Cw?5:x>=Aw?2:1;let T,I,D;return _<0?(D=Math.pow(10,-_)/o,T=Math.round(u*D),I=Math.round(h*D),T/D<u&&++T,I/D>h&&--I,D=-D):(D=Math.pow(10,_)*o,T=Math.round(u/D),I=Math.round(h/D),T*D<u&&++T,I*D>h&&--I),I<T&&.5<=f&&f<2?vv(u,h,f*2):[T,I,D]}function Pw(u,h,f){if(h=+h,u=+u,f=+f,!(f>0))return[];if(u===h)return[u];const y=h<u,[_,x,o]=y?vv(h,u,f):vv(u,h,f);if(!(x>=_))return[];const T=x-_+1,I=new Array(T);if(y)if(o<0)for(let D=0;D<T;++D)I[D]=(x-D)/-o;else for(let D=0;D<T;++D)I[D]=(x-D)*o;else if(o<0)for(let D=0;D<T;++D)I[D]=(_+D)/-o;else for(let D=0;D<T;++D)I[D]=(_+D)*o;return I}function K_(u,h,f){return h=+h,u=+u,f=+f,vv(u,h,f)[2]}function Mw(u,h,f){h=+h,u=+u,f=+f;const y=h<u,_=y?K_(h,u,f):K_(u,h,f);return(y?-1:1)*(_<0?1/-_:_)}function Dw(u,h,f){u=+u,h=+h,f=(_=arguments.length)<2?(h=u,u=0,1):_<3?1:+f;for(var y=-1,_=Math.max(0,Math.ceil((h-u)/f))|0,x=new Array(_);++y<_;)x[y]=u+y*f;return x}function zv(u,h){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(h).domain(u);break}return this}const Eb=Symbol("implicit");function Vx(){var u=new xb,h=[],f=[],y=Eb;function _(x){let o=u.get(x);if(o===void 0){if(y!==Eb)return y;u.set(x,o=h.push(x)-1)}return f[o%f.length]}return _.domain=function(x){if(!arguments.length)return h.slice();h=[],u=new xb;for(const o of x)u.has(o)||u.set(o,h.push(o)-1);return _},_.range=function(x){return arguments.length?(f=Array.from(x),_):f.slice()},_.unknown=function(x){return arguments.length?(y=x,_):y},_.copy=function(){return Vx(h,f).unknown(y)},zv.apply(_,arguments),_}function Nx(){var u=Vx().unknown(void 0),h=u.domain,f=u.range,y=0,_=1,x,o,T=!1,I=0,D=0,V=.5;delete u.unknown;function j(){var F=h().length,pe=_<y,ue=pe?_:y,De=pe?y:_;x=(De-ue)/Math.max(1,F-I+D*2),T&&(x=Math.floor(x)),ue+=(De-ue-x*(F-I))*V,o=x*(1-I),T&&(ue=Math.round(ue),o=Math.round(o));var Se=Dw(F).map(function(Oe){return ue+x*Oe});return f(pe?Se.reverse():Se)}return u.domain=function(F){return arguments.length?(h(F),j()):h()},u.range=function(F){return arguments.length?([y,_]=F,y=+y,_=+_,j()):[y,_]},u.rangeRound=function(F){return[y,_]=F,y=+y,_=+_,T=!0,j()},u.bandwidth=function(){return o},u.step=function(){return x},u.round=function(F){return arguments.length?(T=!!F,j()):T},u.padding=function(F){return arguments.length?(I=Math.min(1,D=+F),j()):I},u.paddingInner=function(F){return arguments.length?(I=Math.min(1,F),j()):I},u.paddingOuter=function(F){return arguments.length?(D=+F,j()):D},u.align=function(F){return arguments.length?(V=Math.max(0,Math.min(1,F)),j()):V},u.copy=function(){return Nx(h(),[y,_]).round(T).paddingInner(I).paddingOuter(D).align(V)},zv.apply(j(),arguments)}function r0(u,h,f){u.prototype=h.prototype=f,f.constructor=u}function Ux(u,h){var f=Object.create(u.prototype);for(var y in h)f[y]=h[y];return f}function dg(){}var ig=.7,_v=1/ig,my="\\s*([+-]?\\d+)\\s*",ng="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lw=/^#([0-9a-f]{3,8})$/,Rw=new RegExp(`^rgb\\(${my},${my},${my}\\)$`),Bw=new RegExp(`^rgb\\(${jh},${jh},${jh}\\)$`),Ow=new RegExp(`^rgba\\(${my},${my},${my},${ng}\\)$`),Fw=new RegExp(`^rgba\\(${jh},${jh},${jh},${ng}\\)$`),Vw=new RegExp(`^hsl\\(${ng},${jh},${jh}\\)$`),Nw=new RegExp(`^hsla\\(${ng},${jh},${jh},${ng}\\)$`),kb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};r0(dg,ag,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:Sb,formatHex:Sb,formatHex8:Uw,formatHsl:jw,formatRgb:Ib,toString:Ib});function Sb(){return this.rgb().formatHex()}function Uw(){return this.rgb().formatHex8()}function jw(){return jx(this).formatHsl()}function Ib(){return this.rgb().formatRgb()}function ag(u){var h,f;return u=(u+"").trim().toLowerCase(),(h=Lw.exec(u))?(f=h[1].length,h=parseInt(h[1],16),f===6?Tb(h):f===3?new gl(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?rv(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?rv(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=Rw.exec(u))?new gl(h[1],h[2],h[3],1):(h=Bw.exec(u))?new gl(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=Ow.exec(u))?rv(h[1],h[2],h[3],h[4]):(h=Fw.exec(u))?rv(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=Vw.exec(u))?Ab(h[1],h[2]/100,h[3]/100,1):(h=Nw.exec(u))?Ab(h[1],h[2]/100,h[3]/100,h[4]):kb.hasOwnProperty(u)?Tb(kb[u]):u==="transparent"?new gl(NaN,NaN,NaN,0):null}function Tb(u){return new gl(u>>16&255,u>>8&255,u&255,1)}function rv(u,h,f,y){return y<=0&&(u=h=f=NaN),new gl(u,h,f,y)}function qw(u){return u instanceof dg||(u=ag(u)),u?(u=u.rgb(),new gl(u.r,u.g,u.b,u.opacity)):new gl}function X_(u,h,f,y){return arguments.length===1?qw(u):new gl(u,h,f,y??1)}function gl(u,h,f,y){this.r=+u,this.g=+h,this.b=+f,this.opacity=+y}r0(gl,X_,Ux(dg,{brighter(u){return u=u==null?_v:Math.pow(_v,u),new gl(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=u==null?ig:Math.pow(ig,u),new gl(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new gl(Nd(this.r),Nd(this.g),Nd(this.b),bv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zb,formatHex:zb,formatHex8:Zw,formatRgb:Cb,toString:Cb}));function zb(){return`#${Vd(this.r)}${Vd(this.g)}${Vd(this.b)}`}function Zw(){return`#${Vd(this.r)}${Vd(this.g)}${Vd(this.b)}${Vd((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cb(){const u=bv(this.opacity);return`${u===1?"rgb(":"rgba("}${Nd(this.r)}, ${Nd(this.g)}, ${Nd(this.b)}${u===1?")":`, ${u})`}`}function bv(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function Nd(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function Vd(u){return u=Nd(u),(u<16?"0":"")+u.toString(16)}function Ab(u,h,f,y){return y<=0?u=h=f=NaN:f<=0||f>=1?u=h=NaN:h<=0&&(u=NaN),new Hc(u,h,f,y)}function jx(u){if(u instanceof Hc)return new Hc(u.h,u.s,u.l,u.opacity);if(u instanceof dg||(u=ag(u)),!u)return new Hc;if(u instanceof Hc)return u;u=u.rgb();var h=u.r/255,f=u.g/255,y=u.b/255,_=Math.min(h,f,y),x=Math.max(h,f,y),o=NaN,T=x-_,I=(x+_)/2;return T?(h===x?o=(f-y)/T+(f<y)*6:f===x?o=(y-h)/T+2:o=(h-f)/T+4,T/=I<.5?x+_:2-x-_,o*=60):T=I>0&&I<1?0:o,new Hc(o,T,I,u.opacity)}function Hw(u,h,f,y){return arguments.length===1?jx(u):new Hc(u,h,f,y??1)}function Hc(u,h,f,y){this.h=+u,this.s=+h,this.l=+f,this.opacity=+y}r0(Hc,Hw,Ux(dg,{brighter(u){return u=u==null?_v:Math.pow(_v,u),new Hc(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=u==null?ig:Math.pow(ig,u),new Hc(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+(this.h<0)*360,h=isNaN(u)||isNaN(this.s)?0:this.s,f=this.l,y=f+(f<.5?f:1-f)*h,_=2*f-y;return new gl(Z_(u>=240?u-240:u+120,_,y),Z_(u,_,y),Z_(u<120?u+240:u-120,_,y),this.opacity)},clamp(){return new Hc(Pb(this.h),iv(this.s),iv(this.l),bv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=bv(this.opacity);return`${u===1?"hsl(":"hsla("}${Pb(this.h)}, ${iv(this.s)*100}%, ${iv(this.l)*100}%${u===1?")":`, ${u})`}`}}));function Pb(u){return u=(u||0)%360,u<0?u+360:u}function iv(u){return Math.max(0,Math.min(1,u||0))}function Z_(u,h,f){return(u<60?h+(f-h)*u/60:u<180?f:u<240?h+(f-h)*(240-u)/60:h)*255}const i0=u=>()=>u;function Gw(u,h){return function(f){return u+f*h}}function Kw(u,h,f){return u=Math.pow(u,f),h=Math.pow(h,f)-u,f=1/f,function(y){return Math.pow(u+y*h,f)}}function Xw(u){return(u=+u)==1?qx:function(h,f){return f-h?Kw(h,f,u):i0(isNaN(h)?f:h)}}function qx(u,h){var f=h-u;return f?Gw(u,f):i0(isNaN(u)?h:u)}const Mb=function u(h){var f=Xw(h);function y(_,x){var o=f((_=X_(_)).r,(x=X_(x)).r),T=f(_.g,x.g),I=f(_.b,x.b),D=qx(_.opacity,x.opacity);return function(V){return _.r=o(V),_.g=T(V),_.b=I(V),_.opacity=D(V),_+""}}return y.gamma=u,y}(1);function Ww(u,h){h||(h=[]);var f=u?Math.min(h.length,u.length):0,y=h.slice(),_;return function(x){for(_=0;_<f;++_)y[_]=u[_]*(1-x)+h[_]*x;return y}}function Jw(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function Yw(u,h){var f=h?h.length:0,y=u?Math.min(f,u.length):0,_=new Array(y),x=new Array(f),o;for(o=0;o<y;++o)_[o]=n0(u[o],h[o]);for(;o<f;++o)x[o]=h[o];return function(T){for(o=0;o<y;++o)x[o]=_[o](T);return x}}function Qw(u,h){var f=new Date;return u=+u,h=+h,function(y){return f.setTime(u*(1-y)+h*y),f}}function xv(u,h){return u=+u,h=+h,function(f){return u*(1-f)+h*f}}function $w(u,h){var f={},y={},_;(u===null||typeof u!="object")&&(u={}),(h===null||typeof h!="object")&&(h={});for(_ in h)_ in u?f[_]=n0(u[_],h[_]):y[_]=h[_];return function(x){for(_ in f)y[_]=f[_](x);return y}}var W_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H_=new RegExp(W_.source,"g");function eE(u){return function(){return u}}function tE(u){return function(h){return u(h)+""}}function rE(u,h){var f=W_.lastIndex=H_.lastIndex=0,y,_,x,o=-1,T=[],I=[];for(u=u+"",h=h+"";(y=W_.exec(u))&&(_=H_.exec(h));)(x=_.index)>f&&(x=h.slice(f,x),T[o]?T[o]+=x:T[++o]=x),(y=y[0])===(_=_[0])?T[o]?T[o]+=_:T[++o]=_:(T[++o]=null,I.push({i:o,x:xv(y,_)})),f=H_.lastIndex;return f<h.length&&(x=h.slice(f),T[o]?T[o]+=x:T[++o]=x),T.length<2?I[0]?tE(I[0].x):eE(h):(h=I.length,function(D){for(var V=0,j;V<h;++V)T[(j=I[V]).i]=j.x(D);return T.join("")})}function n0(u,h){var f=typeof h,y;return h==null||f==="boolean"?i0(h):(f==="number"?xv:f==="string"?(y=ag(h))?(h=y,Mb):rE:h instanceof ag?Mb:h instanceof Date?Qw:Jw(h)?Ww:Array.isArray(h)?Yw:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?$w:xv)(u,h)}function iE(u,h){return u=+u,h=+h,function(f){return Math.round(u*(1-f)+h*f)}}function nE(u){return function(){return u}}function aE(u){return+u}var Db=[0,1];function Uh(u){return u}function J_(u,h){return(h-=u=+u)?function(f){return(f-u)/h}:nE(isNaN(h)?NaN:.5)}function oE(u,h){var f;return u>h&&(f=u,u=h,h=f),function(y){return Math.max(u,Math.min(h,y))}}function sE(u,h,f){var y=u[0],_=u[1],x=h[0],o=h[1];return _<y?(y=J_(_,y),x=f(o,x)):(y=J_(y,_),x=f(x,o)),function(T){return x(y(T))}}function lE(u,h,f){var y=Math.min(u.length,h.length)-1,_=new Array(y),x=new Array(y),o=-1;for(u[y]<u[0]&&(u=u.slice().reverse(),h=h.slice().reverse());++o<y;)_[o]=J_(u[o],u[o+1]),x[o]=f(h[o],h[o+1]);return function(T){var I=kw(u,T,1,y)-1;return x[I](_[I](T))}}function Zx(u,h){return h.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function Hx(){var u=Db,h=Db,f=n0,y,_,x,o=Uh,T,I,D;function V(){var F=Math.min(u.length,h.length);return o!==Uh&&(o=oE(u[0],u[F-1])),T=F>2?lE:sE,I=D=null,j}function j(F){return F==null||isNaN(F=+F)?x:(I||(I=T(u.map(y),h,f)))(y(o(F)))}return j.invert=function(F){return o(_((D||(D=T(h,u.map(y),xv)))(F)))},j.domain=function(F){return arguments.length?(u=Array.from(F,aE),V()):u.slice()},j.range=function(F){return arguments.length?(h=Array.from(F),V()):h.slice()},j.rangeRound=function(F){return h=Array.from(F),f=iE,V()},j.clamp=function(F){return arguments.length?(o=F?!0:Uh,V()):o!==Uh},j.interpolate=function(F){return arguments.length?(f=F,V()):f},j.unknown=function(F){return arguments.length?(x=F,j):x},function(F,pe){return y=F,_=pe,V()}}function uE(){return Hx()(Uh,Uh)}function cE(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)}function wv(u,h){if((f=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var f,y=u.slice(0,f);return[y.length>1?y[0]+y.slice(2):y,+u.slice(f+1)]}function by(u){return u=wv(Math.abs(u)),u?u[1]:NaN}function hE(u,h){return function(f,y){for(var _=f.length,x=[],o=0,T=u[0],I=0;_>0&&T>0&&(I+T+1>y&&(T=Math.max(1,y-I)),x.push(f.substring(_-=T,_+T)),!((I+=T+1)>y));)T=u[o=(o+1)%u.length];return x.reverse().join(h)}}function pE(u){return function(h){return h.replace(/[0-9]/g,function(f){return u[+f]})}}var fE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ev(u){if(!(h=fE.exec(u)))throw new Error("invalid format: "+u);var h;return new a0({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}Ev.prototype=a0.prototype;function a0(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}a0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dE(u){e:for(var h=u.length,f=1,y=-1,_;f<h;++f)switch(u[f]){case".":y=_=f;break;case"0":y===0&&(y=f),_=f;break;default:if(!+u[f])break e;y>0&&(y=0);break}return y>0?u.slice(0,y)+u.slice(_+1):u}var Gx;function mE(u,h){var f=wv(u,h);if(!f)return u+"";var y=f[0],_=f[1],x=_-(Gx=Math.max(-8,Math.min(8,Math.floor(_/3)))*3)+1,o=y.length;return x===o?y:x>o?y+new Array(x-o+1).join("0"):x>0?y.slice(0,x)+"."+y.slice(x):"0."+new Array(1-x).join("0")+wv(u,Math.max(0,h+x-1))[0]}function Lb(u,h){var f=wv(u,h);if(!f)return u+"";var y=f[0],_=f[1];return _<0?"0."+new Array(-_).join("0")+y:y.length>_+1?y.slice(0,_+1)+"."+y.slice(_+1):y+new Array(_-y.length+2).join("0")}const Rb={"%":(u,h)=>(u*100).toFixed(h),b:u=>Math.round(u).toString(2),c:u=>u+"",d:cE,e:(u,h)=>u.toExponential(h),f:(u,h)=>u.toFixed(h),g:(u,h)=>u.toPrecision(h),o:u=>Math.round(u).toString(8),p:(u,h)=>Lb(u*100,h),r:Lb,s:mE,X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function Bb(u){return u}var Ob=Array.prototype.map,Fb=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function yE(u){var h=u.grouping===void 0||u.thousands===void 0?Bb:hE(Ob.call(u.grouping,Number),u.thousands+""),f=u.currency===void 0?"":u.currency[0]+"",y=u.currency===void 0?"":u.currency[1]+"",_=u.decimal===void 0?".":u.decimal+"",x=u.numerals===void 0?Bb:pE(Ob.call(u.numerals,String)),o=u.percent===void 0?"%":u.percent+"",T=u.minus===void 0?"−":u.minus+"",I=u.nan===void 0?"NaN":u.nan+"";function D(j){j=Ev(j);var F=j.fill,pe=j.align,ue=j.sign,De=j.symbol,Se=j.zero,Oe=j.width,je=j.comma,Lt=j.precision,Mt=j.trim,yt=j.type;yt==="n"?(je=!0,yt="g"):Rb[yt]||(Lt===void 0&&(Lt=12),Mt=!0,yt="g"),(Se||F==="0"&&pe==="=")&&(Se=!0,F="0",pe="=");var Qe=De==="$"?f:De==="#"&&/[boxX]/.test(yt)?"0"+yt.toLowerCase():"",zr=De==="$"?y:/[%p]/.test(yt)?o:"",Cr=Rb[yt],sr=/[defgprs%]/.test(yt);Lt=Lt===void 0?6:/[gprs]/.test(yt)?Math.max(1,Math.min(21,Lt)):Math.max(0,Math.min(20,Lt));function St(Tt){var Lr=Qe,Ot=zr,Rr,ot,Fr;if(yt==="c")Ot=Cr(Tt)+Ot,Tt="";else{Tt=+Tt;var Qr=Tt<0||1/Tt<0;if(Tt=isNaN(Tt)?I:Cr(Math.abs(Tt),Lt),Mt&&(Tt=dE(Tt)),Qr&&+Tt==0&&ue!=="+"&&(Qr=!1),Lr=(Qr?ue==="("?ue:T:ue==="-"||ue==="("?"":ue)+Lr,Ot=(yt==="s"?Fb[8+Gx/3]:"")+Ot+(Qr&&ue==="("?")":""),sr){for(Rr=-1,ot=Tt.length;++Rr<ot;)if(Fr=Tt.charCodeAt(Rr),48>Fr||Fr>57){Ot=(Fr===46?_+Tt.slice(Rr+1):Tt.slice(Rr))+Ot,Tt=Tt.slice(0,Rr);break}}}je&&!Se&&(Tt=h(Tt,1/0));var Ar=Lr.length+Tt.length+Ot.length,dr=Ar<Oe?new Array(Oe-Ar+1).join(F):"";switch(je&&Se&&(Tt=h(dr+Tt,dr.length?Oe-Ot.length:1/0),dr=""),pe){case"<":Tt=Lr+Tt+Ot+dr;break;case"=":Tt=Lr+dr+Tt+Ot;break;case"^":Tt=dr.slice(0,Ar=dr.length>>1)+Lr+Tt+Ot+dr.slice(Ar);break;default:Tt=dr+Lr+Tt+Ot;break}return x(Tt)}return St.toString=function(){return j+""},St}function V(j,F){var pe=D((j=Ev(j),j.type="f",j)),ue=Math.max(-8,Math.min(8,Math.floor(by(F)/3)))*3,De=Math.pow(10,-ue),Se=Fb[8+ue/3];return function(Oe){return pe(De*Oe)+Se}}return{format:D,formatPrefix:V}}var nv,Kx,Xx;gE({thousands:",",grouping:[3],currency:["$",""]});function gE(u){return nv=yE(u),Kx=nv.format,Xx=nv.formatPrefix,nv}function vE(u){return Math.max(0,-by(Math.abs(u)))}function _E(u,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(by(h)/3)))*3-by(Math.abs(u)))}function bE(u,h){return u=Math.abs(u),h=Math.abs(h)-u,Math.max(0,by(h)-by(u))+1}function xE(u,h,f,y){var _=Mw(u,h,f),x;switch(y=Ev(y??",f"),y.type){case"s":{var o=Math.max(Math.abs(u),Math.abs(h));return y.precision==null&&!isNaN(x=_E(_,o))&&(y.precision=x),Xx(y,o)}case"":case"e":case"g":case"p":case"r":{y.precision==null&&!isNaN(x=bE(_,Math.max(Math.abs(u),Math.abs(h))))&&(y.precision=x-(y.type==="e"));break}case"f":case"%":{y.precision==null&&!isNaN(x=vE(_))&&(y.precision=x-(y.type==="%")*2);break}}return Kx(y)}function Wx(u){var h=u.domain;return u.ticks=function(f){var y=h();return Pw(y[0],y[y.length-1],f??10)},u.tickFormat=function(f,y){var _=h();return xE(_[0],_[_.length-1],f??10,y)},u.nice=function(f){f==null&&(f=10);var y=h(),_=0,x=y.length-1,o=y[_],T=y[x],I,D,V=10;for(T<o&&(D=o,o=T,T=D,D=_,_=x,x=D);V-- >0;){if(D=K_(o,T,f),D===I)return y[_]=o,y[x]=T,h(y);if(D>0)o=Math.floor(o/D)*D,T=Math.ceil(T/D)*D;else if(D<0)o=Math.ceil(o*D)/D,T=Math.floor(T*D)/D;else break;I=D}return u},u}function fv(){var u=uE();return u.copy=function(){return Zx(u,fv())},zv.apply(u,arguments),Wx(u)}function Vb(u){return function(h){return h<0?-Math.pow(-h,u):Math.pow(h,u)}}function wE(u){return u<0?-Math.sqrt(-u):Math.sqrt(u)}function EE(u){return u<0?-u*u:u*u}function kE(u){var h=u(Uh,Uh),f=1;function y(){return f===1?u(Uh,Uh):f===.5?u(wE,EE):u(Vb(f),Vb(1/f))}return h.exponent=function(_){return arguments.length?(f=+_,y()):f},Wx(h)}function Jx(){var u=kE(Hx());return u.copy=function(){return Zx(u,Jx()).exponent(u.exponent())},zv.apply(u,arguments),u}function SE(){return Jx.apply(null,arguments).exponent(.5)}const tg={x:fv,y:fv,z:fv,r:SE};function IE(u){return u.constant?"symlog":u.base?"log":u.exponent?u.exponent()===.5?"sqrt":"pow":"other"}function Nb(u){return u}function TE(u){return h=>Math.log(u*h)}function zE(u){return h=>u*Math.exp(h)}function CE(u){return h=>Math.sign(h)*Math.log1p(Math.abs(h/u))}function AE(u){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*u}function av(u){return function(f){return f<0?-Math.pow(-f,u):Math.pow(f,u)}}function PE(u){const h=IE(u);if(h==="log"){const f=Math.sign(u.domain()[0]);return{lift:TE(f),ground:zE(f),scaleType:h}}return h==="pow"?{lift:av(1),ground:av(1/1),scaleType:h}:h==="sqrt"?{lift:av(.5),ground:av(1/.5),scaleType:h}:h==="symlog"?{lift:CE(1),ground:AE(1),scaleType:h}:{lift:Nb,ground:Nb,scaleType:h}}function ME(u,h){if(typeof u.range!="function")throw new Error("Scale method `range` must be a function");if(typeof u.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return u.domain();u.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",u.domain()),u.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",u.range());const{lift:f,ground:y}=PE(u),_=u.domain()[0],x=Object.prototype.toString.call(_)==="[object Date]",[o,T]=u.domain().map(pe=>f(x?pe.getTime():pe)),[I,D]=u.range(),V=h[0]||0,j=h[1]||0,F=(T-o)/(Math.abs(D-I)-V-j);return[o-V*F,j*F+T].map(pe=>y(x?new Date(pe):pe))}function DE(u,h,f,y,_){let x,o;return _===!0?(x=0,o=100):(x=u==="r"?1:0,o=u==="y"?f:u==="r"?25:h),y===!0?[o,x]:[x,o]}function LE(u,h,f,y,_,x){return _?typeof _=="function"?_({width:h,height:f}):_:DE(u,h,f,y,x)}function ov(u){return function([f,y,_,x,o,T,I,D,V,j]){if(y===null)return null;const F=LE(u,I,D,T,V,j),pe=f===tg[u]?f():f.copy();return pe.domain(Ox(y[u],_)).range(F),x&&pe.domain(ME(pe,x)),o===!0&&(typeof pe.nice=="function"?pe.nice():console.error(`[Layer Cake] You set \`${u}Nice: true\` but the ${u}Scale does not have a \`.nice\` method. Ignoring...`)),pe}}function sv([u,h]){return f=>{const y=u(f);return Array.isArray(y)?y.map(_=>h(_)):h(y)}}function lv([u]){if(typeof u=="function"){if(typeof u.range=="function")return u.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const uv={x:!1,y:!0,z:!1,r:!1};const RE=u=>({element:u[0]&4,width:u[0]&256,height:u[0]&512,aspectRatio:u[0]&1024,containerWidth:u[0]&128,containerHeight:u[0]&64}),Ub=u=>({element:u[2],width:u[8],height:u[9],aspectRatio:u[10],containerWidth:u[7],containerHeight:u[6]});function jb(u){let h,f,y;const _=u[90].default,x=yy(_,u,u[89],Ub);return{c(){h=Z("div"),x&&x.c(),this.h()},l(o){h=H(o,"DIV",{class:!0});var T=re(h);x&&x.l(T),T.forEach(R),this.h()},h(){S(h,"class","layercake-container svelte-vhzpsp"),$o(()=>u[92].call(h)),ee(h,"position",u[5]),ee(h,"top",u[5]==="absolute"?"0":null),ee(h,"right",u[5]==="absolute"?"0":null),ee(h,"bottom",u[5]==="absolute"?"0":null),ee(h,"left",u[5]==="absolute"?"0":null),ee(h,"pointer-events",u[4]===!1?"none":null)},m(o,T){Ce(o,h,T),x&&x.m(h,null),u[91](h),f=es(h,u[92].bind(h)),y=!0},p(o,T){x&&x.p&&(!y||T[0]&1988|T[2]&134217728)&&gy(x,_,o,o[89],y?_y(_,o[89],T,RE):vy(o[89]),Ub),T[0]&32&&ee(h,"position",o[5]),T[0]&32&&ee(h,"top",o[5]==="absolute"?"0":null),T[0]&32&&ee(h,"right",o[5]==="absolute"?"0":null),T[0]&32&&ee(h,"bottom",o[5]==="absolute"?"0":null),T[0]&32&&ee(h,"left",o[5]==="absolute"?"0":null),T[0]&16&&ee(h,"pointer-events",o[4]===!1?"none":null)},i(o){y||(et(x,o),y=!0)},o(o){pt(x,o),y=!1},d(o){o&&R(h),x&&x.d(o),u[91](null),f()}}}function BE(u){let h,f,y=(u[3]===!0||typeof window<"u")&&jb(u);return{c(){y&&y.c(),h=gn()},l(_){y&&y.l(_),h=gn()},m(_,x){y&&y.m(_,x),Ce(_,h,x),f=!0},p(_,x){_[3]===!0||typeof window<"u"?y?(y.p(_,x),x[0]&8&&et(y,1)):(y=jb(_),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(qu(),pt(y,1,1,()=>{y=null}),Zu())},i(_){f||(et(y),f=!0)},o(_){pt(y),f=!1},d(_){_&&R(h),y&&y.d(_)}}}function OE(u,h,f){let y,_,x,o,T,I,D,V,j,F,pe,ue,De,Se,Oe,je,Lt,Mt,yt,Qe,zr,Cr,sr,St,Tt,Lr,Ot,Rr,ot,Fr,Qr,Ar,dr,wi,Ve,Tr,vn,Ta,ni,_n,$r,{$$slots:za={},$$scope:hr}=h,{ssr:Pn=!1}=h,{pointerEvents:ns=!0}=h,{position:Mn="relative"}=h,{percentRange:Vt=!1}=h,{width:Ca=void 0}=h,{height:Ni=void 0}=h,{containerWidth:pr=Ca||100}=h,{containerHeight:$i=Ni||100}=h,{element:yi=void 0}=h,{x:Mi=void 0}=h,{y:pi=void 0}=h,{z:fi=void 0}=h,{r:un=void 0}=h,{data:mr=[]}=h,{xDomain:Pr=void 0}=h,{yDomain:tr=void 0}=h,{zDomain:yr=void 0}=h,{rDomain:Ki=void 0}=h,{xNice:Dn=!1}=h,{yNice:Bs=!1}=h,{zNice:To=!1}=h,{rNice:Ln=!1}=h,{xReverse:Os=uv.x}=h,{yReverse:lo=uv.y}=h,{zReverse:aa=uv.z}=h,{rReverse:oa=uv.r}=h,{xPadding:uo=void 0}=h,{yPadding:zo=void 0}=h,{zPadding:as=void 0}=h,{rPadding:Co=void 0}=h,{xScale:Aa=tg.x}=h,{yScale:ai=tg.y}=h,{zScale:cn=tg.z}=h,{rScale:Kn=tg.r}=h,{xRange:Ka=void 0}=h,{yRange:br=void 0}=h,{zRange:B=void 0}=h,{rRange:q=void 0}=h,{padding:K={}}=h,{extents:$={}}=h,{flatData:le=void 0}=h,{custom:me={}}=h,ye=!1;Cx(()=>{ye=!0});const G={},te=Zr(Vt);er(u,te,Ee=>f(128,Ta=Ee));const ke=Zr(pr);er(u,ke,Ee=>f(7,vn=Ee));const Ue=Zr($i);er(u,Ue,Ee=>f(6,Tr=Ee));const He=Zr(q_($));er(u,He,Ee=>f(127,Ve=Ee));const Re=Zr(mr);er(u,Re,Ee=>f(126,wi=Ee));const qe=Zr(le||mr);er(u,qe,Ee=>f(125,dr=Ee));const at=Zr(K);er(u,at,Ee=>f(124,Ar=Ee));const st=Zr(If(Mi));er(u,st,Ee=>f(123,Qr=Ee));const Le=Zr(If(pi));er(u,Le,Ee=>f(122,Fr=Ee));const tt=Zr(If(fi));er(u,tt,Ee=>f(121,ot=Ee));const Je=Zr(If(un));er(u,Je,Ee=>f(120,Rr=Ee));const Ye=Zr(Pr);er(u,Ye,Ee=>f(119,Ot=Ee));const Gt=Zr(tr);er(u,Gt,Ee=>f(118,Lr=Ee));const rt=Zr(yr);er(u,rt,Ee=>f(117,Tt=Ee));const Rt=Zr(Ki);er(u,Rt,Ee=>f(116,St=Ee));const $t=Zr(Dn);er(u,$t,Ee=>f(115,sr=Ee));const At=Zr(Bs);er(u,At,Ee=>f(114,Cr=Ee));const Jt=Zr(To);er(u,Jt,Ee=>f(113,zr=Ee));const rr=Zr(Ln);er(u,rr,Ee=>f(112,Qe=Ee));const di=Zr(Os);er(u,di,Ee=>f(111,yt=Ee));const lr=Zr(lo);er(u,lr,Ee=>f(110,Mt=Ee));const oi=Zr(aa);er(u,oi,Ee=>f(109,Lt=Ee));const gr=Zr(oa);er(u,gr,Ee=>f(108,je=Ee));const Nt=Zr(uo);er(u,Nt,Ee=>f(107,Oe=Ee));const ur=Zr(zo);er(u,ur,Ee=>f(106,Se=Ee));const Ui=Zr(as);er(u,Ui,Ee=>f(105,De=Ee));const co=Zr(Co);er(u,co,Ee=>f(104,ue=Ee));const Ei=Zr(Ka);er(u,Ei,Ee=>f(103,pe=Ee));const si=Zr(br);er(u,si,Ee=>f(102,F=Ee));const bn=Zr(B);er(u,bn,Ee=>f(101,j=Ee));const xn=Zr(q);er(u,xn,Ee=>f(100,V=Ee));const ei=Zr(Aa);er(u,ei,Ee=>f(99,D=Ee));const sa=Zr(ai);er(u,sa,Ee=>f(98,I=Ee));const Di=Zr(cn);er(u,Di,Ee=>f(97,T=Ee));const Li=Zr(Kn);er(u,Li,Ee=>f(96,o=Ee));const wn=Zr(G);er(u,wn,Ee=>f(94,_=Ee));const xr=Zr(me);er(u,xr,Ee=>f(95,x=Ee));const Pa=An([st,Le,tt,Je],([Ee,Bn,tn,Br])=>{const hn={};return Ee&&(hn.x=Ee),Bn&&(hn.y=Bn),tn&&(hn.z=tn),Br&&(hn.r=Br),hn}),Rn=An([at,ke,Ue],([Ee])=>Object.assign({top:0,right:0,bottom:0,left:0},Ee)),Ao=An([ke,Ue,Rn],([Ee,Bn,tn])=>{const Br={};return Br.top=tn.top,Br.right=Ee-tn.right,Br.bottom=Bn-tn.bottom,Br.left=tn.left,Br.width=Br.right-Br.left,Br.height=Br.bottom-Br.top,Br.width<=0&&ye===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Br.height<=0&&ye===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Br}),Ti=An([Ao],([Ee])=>Ee.width);er(u,Ti,Ee=>f(8,ni=Ee));const ho=An([Ao],([Ee])=>Ee.height);er(u,ho,Ee=>f(9,_n=Ee));const en=An([qe,Pa,He],([Ee,Bn,tn])=>{const Br=q_(Bn,tn);return Object.keys(Br).length>0?{...vw(Ee,Br),...tn}:{}}),ji=An([en,Ye],tv("x")),zi=An([en,Gt],tv("y")),ti=An([en,rt],tv("z")),En=An([en,Rt],tv("r")),Gu=An([ei,en,ji,Nt,$t,di,Ti,ho,Ei,te],ov("x")),vl=An([st,Gu],sv),Fs=An([sa,en,zi,ur,At,lr,Ti,ho,si,te],ov("y")),Cf=An([Le,Fs],sv),eu=An([Di,en,ti,Ui,Jt,oi,Ti,ho,bn,te],ov("z")),Vs=An([tt,eu],sv),Ku=An([Li,en,En,co,rr,gr,Ti,ho,xn,te],ov("r")),Kc=An([Je,Ku],sv),Xa=An([Gu],lv),_l=An([Fs],lv),Ns=An([eu],lv),Xc=An([Ku],lv),bl=An([Ti,ho],([Ee,Bn])=>Ee/Bn);er(u,bl,Ee=>f(10,$r=Ee));function la(Ee){Op[Ee?"unshift":"push"](()=>{yi=Ee,f(2,yi)})}function Xn(){pr=this.clientWidth,$i=this.clientHeight,f(0,pr),f(1,$i)}return u.$$set=Ee=>{"ssr"in Ee&&f(3,Pn=Ee.ssr),"pointerEvents"in Ee&&f(4,ns=Ee.pointerEvents),"position"in Ee&&f(5,Mn=Ee.position),"percentRange"in Ee&&f(51,Vt=Ee.percentRange),"width"in Ee&&f(52,Ca=Ee.width),"height"in Ee&&f(53,Ni=Ee.height),"containerWidth"in Ee&&f(0,pr=Ee.containerWidth),"containerHeight"in Ee&&f(1,$i=Ee.containerHeight),"element"in Ee&&f(2,yi=Ee.element),"x"in Ee&&f(54,Mi=Ee.x),"y"in Ee&&f(55,pi=Ee.y),"z"in Ee&&f(56,fi=Ee.z),"r"in Ee&&f(57,un=Ee.r),"data"in Ee&&f(58,mr=Ee.data),"xDomain"in Ee&&f(59,Pr=Ee.xDomain),"yDomain"in Ee&&f(60,tr=Ee.yDomain),"zDomain"in Ee&&f(61,yr=Ee.zDomain),"rDomain"in Ee&&f(62,Ki=Ee.rDomain),"xNice"in Ee&&f(63,Dn=Ee.xNice),"yNice"in Ee&&f(64,Bs=Ee.yNice),"zNice"in Ee&&f(65,To=Ee.zNice),"rNice"in Ee&&f(66,Ln=Ee.rNice),"xReverse"in Ee&&f(67,Os=Ee.xReverse),"yReverse"in Ee&&f(68,lo=Ee.yReverse),"zReverse"in Ee&&f(69,aa=Ee.zReverse),"rReverse"in Ee&&f(70,oa=Ee.rReverse),"xPadding"in Ee&&f(71,uo=Ee.xPadding),"yPadding"in Ee&&f(72,zo=Ee.yPadding),"zPadding"in Ee&&f(73,as=Ee.zPadding),"rPadding"in Ee&&f(74,Co=Ee.rPadding),"xScale"in Ee&&f(75,Aa=Ee.xScale),"yScale"in Ee&&f(76,ai=Ee.yScale),"zScale"in Ee&&f(77,cn=Ee.zScale),"rScale"in Ee&&f(78,Kn=Ee.rScale),"xRange"in Ee&&f(79,Ka=Ee.xRange),"yRange"in Ee&&f(80,br=Ee.yRange),"zRange"in Ee&&f(81,B=Ee.zRange),"rRange"in Ee&&f(82,q=Ee.rRange),"padding"in Ee&&f(83,K=Ee.padding),"extents"in Ee&&f(84,$=Ee.extents),"flatData"in Ee&&f(85,le=Ee.flatData),"custom"in Ee&&f(86,me=Ee.custom),"$$scope"in Ee&&f(89,hr=Ee.$$scope)},u.$$.update=()=>{u.$$.dirty[1]&8388608&&Mi&&f(87,G.x=Mi,G),u.$$.dirty[1]&16777216&&pi&&f(87,G.y=pi,G),u.$$.dirty[1]&33554432&&fi&&f(87,G.z=fi,G),u.$$.dirty[1]&67108864&&un&&f(87,G.r=un,G),u.$$.dirty[1]&268435456&&Pr&&f(87,G.xDomain=Pr,G),u.$$.dirty[1]&536870912&&tr&&f(87,G.yDomain=tr,G),u.$$.dirty[1]&1073741824&&yr&&f(87,G.zDomain=yr,G),u.$$.dirty[2]&1&&Ki&&f(87,G.rDomain=Ki,G),u.$$.dirty[2]&131072&&Ka&&f(87,G.xRange=Ka,G),u.$$.dirty[2]&262144&&br&&f(87,G.yRange=br,G),u.$$.dirty[2]&524288&&B&&f(87,G.zRange=B,G),u.$$.dirty[2]&1048576&&q&&f(87,G.rRange=q,G),u.$$.dirty[1]&1048576&&qr(te,Ta=Vt,Ta),u.$$.dirty[0]&1&&qr(ke,vn=pr,vn),u.$$.dirty[0]&2&&qr(Ue,Tr=$i,Tr),u.$$.dirty[2]&4194304&&qr(He,Ve=q_($),Ve),u.$$.dirty[1]&134217728&&qr(Re,wi=mr,wi),u.$$.dirty[1]&134217728|u.$$.dirty[2]&8388608&&qr(qe,dr=le||mr,dr),u.$$.dirty[2]&2097152&&qr(at,Ar=K,Ar),u.$$.dirty[1]&8388608&&qr(st,Qr=If(Mi),Qr),u.$$.dirty[1]&16777216&&qr(Le,Fr=If(pi),Fr),u.$$.dirty[1]&33554432&&qr(tt,ot=If(fi),ot),u.$$.dirty[1]&67108864&&qr(Je,Rr=If(un),Rr),u.$$.dirty[1]&268435456&&qr(Ye,Ot=Pr,Ot),u.$$.dirty[1]&536870912&&qr(Gt,Lr=tr,Lr),u.$$.dirty[1]&1073741824&&qr(rt,Tt=yr,Tt),u.$$.dirty[2]&1&&qr(Rt,St=Ki,St),u.$$.dirty[2]&2&&qr($t,sr=Dn,sr),u.$$.dirty[2]&4&&qr(At,Cr=Bs,Cr),u.$$.dirty[2]&8&&qr(Jt,zr=To,zr),u.$$.dirty[2]&16&&qr(rr,Qe=Ln,Qe),u.$$.dirty[2]&32&&qr(di,yt=Os,yt),u.$$.dirty[2]&64&&qr(lr,Mt=lo,Mt),u.$$.dirty[2]&128&&qr(oi,Lt=aa,Lt),u.$$.dirty[2]&256&&qr(gr,je=oa,je),u.$$.dirty[2]&512&&qr(Nt,Oe=uo,Oe),u.$$.dirty[2]&1024&&qr(ur,Se=zo,Se),u.$$.dirty[2]&2048&&qr(Ui,De=as,De),u.$$.dirty[2]&4096&&qr(co,ue=Co,ue),u.$$.dirty[2]&131072&&qr(Ei,pe=Ka,pe),u.$$.dirty[2]&262144&&qr(si,F=br,F),u.$$.dirty[2]&524288&&qr(bn,j=B,j),u.$$.dirty[2]&1048576&&qr(xn,V=q,V),u.$$.dirty[2]&8192&&qr(ei,D=Aa,D),u.$$.dirty[2]&16384&&qr(sa,I=ai,I),u.$$.dirty[2]&32768&&qr(Di,T=cn,T),u.$$.dirty[2]&65536&&qr(Li,o=Kn,o),u.$$.dirty[2]&16777216&&qr(xr,x=me,x),u.$$.dirty[2]&33554432&&qr(wn,_=G,_),u.$$.dirty[2]&67108864&&zx("LayerCake",y)},f(88,y={activeGetters:Pa,width:Ti,height:ho,percentRange:te,aspectRatio:bl,containerWidth:ke,containerHeight:Ue,x:st,y:Le,z:tt,r:Je,custom:xr,data:Re,xNice:$t,yNice:At,zNice:Jt,rNice:rr,xReverse:di,yReverse:lr,zReverse:oi,rReverse:gr,xPadding:Nt,yPadding:ur,zPadding:Ui,rPadding:co,padding:Rn,flatData:qe,extents:en,xDomain:ji,yDomain:zi,zDomain:ti,rDomain:En,xRange:Xa,yRange:_l,zRange:Ns,rRange:Xc,config:wn,xScale:Gu,xGet:vl,yScale:Fs,yGet:Cf,zScale:eu,zGet:Vs,rScale:Ku,rGet:Kc}),[pr,$i,yi,Pn,ns,Mn,Tr,vn,ni,_n,$r,te,ke,Ue,He,Re,qe,at,st,Le,tt,Je,Ye,Gt,rt,Rt,$t,At,Jt,rr,di,lr,oi,gr,Nt,ur,Ui,co,Ei,si,bn,xn,ei,sa,Di,Li,wn,xr,Ti,ho,bl,Vt,Ca,Ni,Mi,pi,fi,un,mr,Pr,tr,yr,Ki,Dn,Bs,To,Ln,Os,lo,aa,oa,uo,zo,as,Co,Aa,ai,cn,Kn,Ka,br,B,q,K,$,le,me,G,y,hr,za,la,Xn]}class FE extends rs{constructor(h){super(),is(this,h,OE,BE,ts,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const VE=u=>({element:u&1}),qb=u=>({element:u[0]}),NE=u=>({}),Zb=u=>({});function UE(u){let h,f,y,_,x;const o=u[12].defs,T=yy(o,u,u[11],Zb),I=u[12].default,D=yy(I,u,u[11],qb);return{c(){h=Ha("svg"),f=Ha("defs"),T&&T.c(),y=Ha("g"),D&&D.c(),this.h()},l(V){h=Ga(V,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var j=re(h);f=Ga(j,"defs",{});var F=re(f);T&&T.l(F),F.forEach(R),y=Ga(j,"g",{class:!0,transform:!0});var pe=re(y);D&&D.l(pe),pe.forEach(R),j.forEach(R),this.h()},h(){S(y,"class","layercake-layout-svg_g"),S(y,"transform",_="translate("+u[7].left+", "+u[7].top+")"),S(h,"class","layercake-layout-svg svelte-u84d8d"),S(h,"viewBox",u[4]),S(h,"width",u[5]),S(h,"height",u[6]),ee(h,"z-index",u[2]),ee(h,"pointer-events",u[3]===!1?"none":null)},m(V,j){Ce(V,h,j),z(h,f),T&&T.m(f,null),z(h,y),D&&D.m(y,null),u[13](y),u[14](h),x=!0},p(V,[j]){T&&T.p&&(!x||j&2048)&&gy(T,o,V,V[11],x?_y(o,V[11],j,NE):vy(V[11]),Zb),D&&D.p&&(!x||j&2049)&&gy(D,I,V,V[11],x?_y(I,V[11],j,VE):vy(V[11]),qb),(!x||j&128&&_!==(_="translate("+V[7].left+", "+V[7].top+")"))&&S(y,"transform",_),(!x||j&16)&&S(h,"viewBox",V[4]),(!x||j&32)&&S(h,"width",V[5]),(!x||j&64)&&S(h,"height",V[6]),j&4&&ee(h,"z-index",V[2]),j&8&&ee(h,"pointer-events",V[3]===!1?"none":null)},i(V){x||(et(T,V),et(D,V),x=!0)},o(V){pt(T,V),pt(D,V),x=!1},d(V){V&&R(h),T&&T.d(V),D&&D.d(V),u[13](null),u[14](null)}}}function jE(u,h,f){let y,_,x,{$$slots:o={},$$scope:T}=h,{element:I=void 0}=h,{innerElement:D=void 0}=h,{zIndex:V=void 0}=h,{pointerEvents:j=void 0}=h,{viewBox:F=void 0}=h;const{containerWidth:pe,containerHeight:ue,padding:De}=og("LayerCake");er(u,pe,je=>f(5,y=je)),er(u,ue,je=>f(6,_=je)),er(u,De,je=>f(7,x=je));function Se(je){Op[je?"unshift":"push"](()=>{D=je,f(1,D)})}function Oe(je){Op[je?"unshift":"push"](()=>{I=je,f(0,I)})}return u.$$set=je=>{"element"in je&&f(0,I=je.element),"innerElement"in je&&f(1,D=je.innerElement),"zIndex"in je&&f(2,V=je.zIndex),"pointerEvents"in je&&f(3,j=je.pointerEvents),"viewBox"in je&&f(4,F=je.viewBox),"$$scope"in je&&f(11,T=je.$$scope)},[I,D,V,j,F,y,_,x,pe,ue,De,T,o,Se,Oe]}class qE extends rs{constructor(h){super(),is(this,h,jE,UE,ts,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Hb(u,h,f){const y=u.slice();return y[23]=h[f],y[25]=f,y}function Gb(u){let h,f,y,_;return{c(){h=Ha("rect"),this.h()},l(x){h=Ga(x,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),re(h).forEach(R),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[13](u[12](u[23]))-1),S(h,"width",_=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height","3"),S(h,"fill","#CEDC20"),S(h,"stroke",u[0]),S(h,"stroke-width",u[1])},m(x,o){Ce(x,h,o)},p(x,o){o&3200&&f!==(f=x[11].bandwidth?x[7](x[23]):x[7](x[23])[0])&&S(h,"x",f),o&13312&&y!==(y=x[13](x[12](x[23]))-1)&&S(h,"y",y),o&3584&&_!==(_=x[11].bandwidth?x[11].bandwidth():x[9](x[23]))&&S(h,"width",_),o&1&&S(h,"stroke",x[0]),o&2&&S(h,"stroke-width",x[1])},d(x){x&&R(h)}}}function Kb(u){let h,f,y,_,x,o,T,I,D=u[12]&&Gb(u);return{c(){h=Ha("rect"),D&&D.c(),o=Ha("text"),this.h()},l(V){h=Ga(V,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),re(h).forEach(R),D&&D.l(V),o=Ga(V,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),re(o).forEach(R),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[6](u[23])),S(h,"width",_=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height",x=u[8](u[23])),S(h,"fill",u[4]),S(h,"stroke",u[0]),S(h,"stroke-width",u[1]),S(o,"x",T=u[11].bandwidth?u[7](u[23])+u[11].bandwidth()/2:u[7](u[23])[0]),S(o,"y",I=u[6](u[23])-4),S(o,"dx",u[2]),S(o,"dy",u[3]),S(o,"text-anchor",u[5])},m(V,j){Ce(V,h,j),D&&D.m(V,j),Ce(V,o,j)},p(V,j){j&3200&&f!==(f=V[11].bandwidth?V[7](V[23]):V[7](V[23])[0])&&S(h,"x",f),j&1088&&y!==(y=V[6](V[23]))&&S(h,"y",y),j&3584&&_!==(_=V[11].bandwidth?V[11].bandwidth():V[9](V[23]))&&S(h,"width",_),j&1280&&x!==(x=V[8](V[23]))&&S(h,"height",x),j&16&&S(h,"fill",V[4]),j&1&&S(h,"stroke",V[0]),j&2&&S(h,"stroke-width",V[1]),V[12]?D?D.p(V,j):(D=Gb(V),D.c(),D.m(o.parentNode,o)):D&&(D.d(1),D=null),j&3200&&T!==(T=V[11].bandwidth?V[7](V[23])+V[11].bandwidth()/2:V[7](V[23])[0])&&S(o,"x",T),j&1088&&I!==(I=V[6](V[23])-4)&&S(o,"y",I),j&4&&S(o,"dx",V[2]),j&8&&S(o,"dy",V[3]),j&32&&S(o,"text-anchor",V[5])},d(V){V&&(R(h),R(o)),D&&D.d(V)}}}function ZE(u){let h,f=Gn(u[10]),y=[];for(let _=0;_<f.length;_+=1)y[_]=Kb(Hb(u,f,_));return{c(){h=Ha("g");for(let _=0;_<y.length;_+=1)y[_].c();this.h()},l(_){h=Ga(_,"g",{class:!0});var x=re(h);for(let o=0;o<y.length;o+=1)y[o].l(x);x.forEach(R),this.h()},h(){S(h,"class","column-group svelte-wgzwsk")},m(_,x){Ce(_,h,x);for(let o=0;o<y.length;o+=1)y[o]&&y[o].m(h,null)},p(_,[x]){if(x&16383){f=Gn(_[10]);let o;for(o=0;o<f.length;o+=1){const T=Hb(_,f,o);y[o]?y[o].p(T,x):(y[o]=Kb(T),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},i:Qi,o:Qi,d(_){_&&R(h),Gc(y,_)}}}function HE(u,h,f){let y,_,x,o,T,I,D,V,j;const{data:F,xGet:pe,yGet:ue,yRange:De,xScale:Se,yScale:Oe,y:je,z:Lt}=og("LayerCake");er(u,F,St=>f(10,I=St)),er(u,pe,St=>f(7,T=St)),er(u,ue,St=>f(6,x=St)),er(u,De,St=>f(21,o=St)),er(u,Se,St=>f(11,D=St)),er(u,Oe,St=>f(13,j=St)),er(u,Lt,St=>f(12,V=St));let{stroke:Mt=""}=h,{strokeWidth:yt=0}=h,{dxTick:Qe=0}=h,{dyTick:zr=0}=h,{fill:Cr="#00205b"}=h,{textAnchor:sr="middle"}=h;return u.$$set=St=>{"stroke"in St&&f(0,Mt=St.stroke),"strokeWidth"in St&&f(1,yt=St.strokeWidth),"dxTick"in St&&f(2,Qe=St.dxTick),"dyTick"in St&&f(3,zr=St.dyTick),"fill"in St&&f(4,Cr=St.fill),"textAnchor"in St&&f(5,sr=St.textAnchor)},u.$$.update=()=>{u.$$.dirty&128&&f(9,y=St=>{const Tt=T(St);return Math.max(0,Tt[1]-Tt[0])}),u.$$.dirty&2097216&&f(8,_=St=>o[0]-x(St))},[Mt,yt,Qe,zr,Cr,sr,x,T,_,y,I,D,V,j,F,pe,ue,De,Se,Oe,Lt,o]}class GE extends rs{constructor(h){super(),is(this,h,HE,ZE,ts,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function Xb(u,h,f){const y=u.slice();return y[28]=h[f],y[30]=f,y}function Wb(u){let h,f,y,_;return{c(){h=Ha("line"),this.h()},l(x){h=Ga(x,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),re(h).forEach(R),this.h()},h(){S(h,"y1",f=u[20]*-1),S(h,"y2",y=u[14]&&u[30]%2==0?u[10]+u[8]+2:u[10]+u[8]-13),S(h,"x1","0"),S(h,"x2","0"),S(h,"stroke",u[11]),S(h,"stroke-width",_=u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)?2:1),S(h,"class","svelte-fwjh80"),Ii(h,"baseline",u[13])},m(x,o){Ce(x,h,o)},p(x,o){o&1048576&&f!==(f=x[20]*-1)&&S(h,"y1",f),o&17664&&y!==(y=x[14]&&x[30]%2==0?x[10]+x[8]+2:x[10]+x[8]-13)&&S(h,"y2",y),o&2048&&S(h,"stroke",x[11]),o&32784&&_!==(_=x[15]&&Array.isArray(x[4])&&x[30]==Math.floor(x[4].length/2)?2:1)&&S(h,"stroke-width",_),o&8192&&Ii(h,"baseline",x[13])},d(x){x&&R(h)}}}function KE(u){let h=u[1](u[28])+"",f;return{c(){f=xe(h)},l(y){f=we(y,h)},m(y,_){Ce(y,f,_)},p(y,_){_&262146&&h!==(h=y[1](y[28])+"")&&ft(f,h)},d(y){y&&R(f)}}}function XE(u){let h,f=u[1](u[28])+"",y,_;return{c(){h=xe(u[5]),y=xe(f),_=xe(u[6])},l(x){h=we(x,u[5]),y=we(x,f),_=we(x,u[6])},m(x,o){Ce(x,h,o),Ce(x,y,o),Ce(x,_,o)},p(x,o){o&32&&ft(h,x[5]),o&262146&&f!==(f=x[1](x[28])+"")&&ft(y,f),o&64&&ft(_,x[6])},d(x){x&&(R(h),R(y),R(_))}}}function Jb(u){let h,f,y,_,x,o,T,I=u[0]!==!1&&Wb(u);function D(F,pe){return F[30]==F[18].length-1?XE:KE}let V=D(u),j=V(u);return{c(){h=Ha("g"),I&&I.c(),f=Ha("text"),j.c(),this.h()},l(F){h=Ga(F,"g",{class:!0,transform:!0});var pe=re(h);I&&I.l(pe),f=Ga(pe,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var ue=re(f);j.l(ue),ue.forEach(R),pe.forEach(R),this.h()},h(){S(f,"x",y=u[7]||u[16]?u[17].bandwidth()/2:0),S(f,"y",_=u[3]?u[20]*-1-6:u[14]&&u[30]%2==0?u[8]+15:u[8]),S(f,"dx",x=u[24](u[30])=="start"?u[9]-2:u[24](u[30])=="end"?u[9]+2:u[9]),S(f,"dy",u[10]),S(f,"text-anchor",u[24](u[30])),S(f,"fill",u[12]),S(f,"class","svelte-fwjh80"),Ii(f,"bold",u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)),S(h,"class",o="tick tick-"+u[28]+" svelte-fwjh80"),S(h,"transform",T="translate("+u[17](u[28])+","+u[19][0]+")")},m(F,pe){Ce(F,h,pe),I&&I.m(h,null),z(h,f),j.m(f,null)},p(F,pe){F[0]!==!1?I?I.p(F,pe):(I=Wb(F),I.c(),I.m(h,f)):I&&(I.d(1),I=null),V===(V=D(F))&&j?j.p(F,pe):(j.d(1),j=V(F),j&&(j.c(),j.m(f,null))),pe&196736&&y!==(y=F[7]||F[16]?F[17].bandwidth()/2:0)&&S(f,"x",y),pe&1065224&&_!==(_=F[3]?F[20]*-1-6:F[14]&&F[30]%2==0?F[8]+15:F[8])&&S(f,"y",_),pe&512&&x!==(x=F[24](F[30])=="start"?F[9]-2:F[24](F[30])=="end"?F[9]+2:F[9])&&S(f,"dx",x),pe&1024&&S(f,"dy",F[10]),pe&4096&&S(f,"fill",F[12]),pe&32784&&Ii(f,"bold",F[15]&&Array.isArray(F[4])&&F[30]==Math.floor(F[4].length/2)),pe&262144&&o!==(o="tick tick-"+F[28]+" svelte-fwjh80")&&S(h,"class",o),pe&917504&&T!==(T="translate("+F[17](F[28])+","+F[19][0]+")")&&S(h,"transform",T)},d(F){F&&R(h),I&&I.d(),j.d()}}}function Yb(u){let h,f,y;return{c(){h=Ha("line"),this.h()},l(_){h=Ga(_,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),re(h).forEach(R),this.h()},h(){S(h,"class","baseline svelte-fwjh80"),S(h,"y1",u[20]),S(h,"y2","0"),S(h,"x1",f=u[17](0)),S(h,"x2",y=u[17](0)),S(h,"stroke",u[11])},m(_,x){Ce(_,h,x)},p(_,x){x&1048576&&S(h,"y1",_[20]),x&131072&&f!==(f=_[17](0))&&S(h,"x1",f),x&131072&&y!==(y=_[17](0))&&S(h,"x2",y),x&2048&&S(h,"stroke",_[11])},d(_){_&&R(h)}}}function WE(u){let h,f,y=Gn(u[18]),_=[];for(let o=0;o<y.length;o+=1)_[o]=Jb(Xb(u,y,o));let x=u[2]===!0&&Yb(u);return{c(){h=Ha("g");for(let o=0;o<_.length;o+=1)_[o].c();f=gn(),x&&x.c(),this.h()},l(o){h=Ga(o,"g",{class:!0});var T=re(h);for(let I=0;I<_.length;I+=1)_[I].l(T);f=gn(),x&&x.l(T),T.forEach(R),this.h()},h(){S(h,"class","axis x-axis")},m(o,T){Ce(o,h,T);for(let I=0;I<_.length;I+=1)_[I]&&_[I].m(h,null);z(h,f),x&&x.m(h,null)},p(o,[T]){if(T&18874363){y=Gn(o[18]);let I;for(I=0;I<y.length;I+=1){const D=Xb(o,y,I);_[I]?_[I].p(D,T):(_[I]=Jb(D),_[I].c(),_[I].m(h,f))}for(;I<_.length;I+=1)_[I].d(1);_.length=y.length}o[2]===!0?x?x.p(o,T):(x=Yb(o),x.c(),x.m(h,null)):x&&(x.d(1),x=null)},i:Qi,o:Qi,d(o){o&&R(h),Gc(_,o),x&&x.d()}}}function JE(u,h,f){let y,_,x,o,T;const{width:I,height:D,xScale:V,yScale:j,yRange:F}=og("LayerCake");er(u,D,ot=>f(20,T=ot)),er(u,V,ot=>f(17,x=ot)),er(u,F,ot=>f(19,o=ot));let{gridlines:pe=!0}=h,{formatTick:ue=ot=>ot}=h,{baseline:De=!1}=h,{flipped:Se=!1}=h,{snapTicks:Oe=!1}=h,{ticks:je=void 0}=h,{prefix:Lt=""}=h,{suffix:Mt=""}=h,{xTick:yt=void 0}=h,{yTick:Qe=15}=h,{dxTick:zr=0}=h,{dyTick:Cr=0}=h,{lineColor:sr="#999"}=h,{textColor:St="#555"}=h,{solid:Tt=!1}=h,{stagger:Lr=!1}=h,{median:Ot=!0}=h;function Rr(ot){if(Oe===!0){if(ot===0)return"start";if(ot===_.length-1)return"end"}return"middle"}return u.$$set=ot=>{"gridlines"in ot&&f(0,pe=ot.gridlines),"formatTick"in ot&&f(1,ue=ot.formatTick),"baseline"in ot&&f(2,De=ot.baseline),"flipped"in ot&&f(3,Se=ot.flipped),"snapTicks"in ot&&f(25,Oe=ot.snapTicks),"ticks"in ot&&f(4,je=ot.ticks),"prefix"in ot&&f(5,Lt=ot.prefix),"suffix"in ot&&f(6,Mt=ot.suffix),"xTick"in ot&&f(7,yt=ot.xTick),"yTick"in ot&&f(8,Qe=ot.yTick),"dxTick"in ot&&f(9,zr=ot.dxTick),"dyTick"in ot&&f(10,Cr=ot.dyTick),"lineColor"in ot&&f(11,sr=ot.lineColor),"textColor"in ot&&f(12,St=ot.textColor),"solid"in ot&&f(13,Tt=ot.solid),"stagger"in ot&&f(14,Lr=ot.stagger),"median"in ot&&f(15,Ot=ot.median)},u.$$.update=()=>{u.$$.dirty&131072&&f(16,y=typeof x.bandwidth=="function"),u.$$.dirty&196624&&f(18,_=Array.isArray(je)?je:y?x.domain():x.ticks(je))},[pe,ue,De,Se,je,Lt,Mt,yt,Qe,zr,Cr,sr,St,Tt,Lr,Ot,y,x,_,o,T,D,V,F,Rr,Oe]}class YE extends rs{constructor(h){super(),is(this,h,JE,WE,ts,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function QE(u){let h,f,y,_;return h=new GE({props:{fill:u[1],formatVal:u[5]}}),y=new YE({props:{gridlines:!1}}),{c(){jt(h.$$.fragment),f=ve(),jt(y.$$.fragment)},l(x){qt(h.$$.fragment,x),f=_e(x),qt(y.$$.fragment,x)},m(x,o){Zt(h,x,o),Ce(x,f,o),Zt(y,x,o),_=!0},p(x,o){const T={};o&2&&(T.fill=x[1]),o&32&&(T.formatVal=x[5]),h.$set(T)},i(x){_||(et(h.$$.fragment,x),et(y.$$.fragment,x),_=!0)},o(x){pt(h.$$.fragment,x),pt(y.$$.fragment,x),_=!1},d(x){x&&R(f),Ht(h,x),Ht(y,x)}}}function $E(u){let h,f;return h=new qE({props:{$$slots:{default:[QE]},$$scope:{ctx:u}}}),{c(){jt(h.$$.fragment)},l(y){qt(h.$$.fragment,y)},m(y,_){Zt(h,y,_),f=!0},p(y,_){const x={};_&2082&&(x.$$scope={dirty:_,ctx:y}),h.$set(x)},i(y){f||(et(h.$$.fragment,y),f=!0)},o(y){pt(h.$$.fragment,y),f=!1},d(y){Ht(h,y)}}}function ek(u){let h,f,y;return f=new FE({props:{padding:{top:15,right:0,bottom:20,left:0},x:u[2],y:u[3],z:u[4],xScale:Nx().paddingInner([.02]).round(!0),xDomain:u[7],yDomain:u[6],zDomain:u[6],data:u[0],$$slots:{default:[$E]},$$scope:{ctx:u}}}),{c(){h=Z("div"),jt(f.$$.fragment),this.h()},l(_){h=H(_,"DIV",{class:!0});var x=re(h);qt(f.$$.fragment,x),x.forEach(R),this.h()},h(){S(h,"class","chart-container svelte-1i1qsul")},m(_,x){Ce(_,h,x),Zt(f,h,null),y=!0},p(_,[x]){const o={};x&4&&(o.x=_[2]),x&8&&(o.y=_[3]),x&16&&(o.z=_[4]),x&128&&(o.xDomain=_[7]),x&64&&(o.yDomain=_[6]),x&64&&(o.zDomain=_[6]),x&1&&(o.data=_[0]),x&2082&&(o.$$scope={dirty:x,ctx:_}),f.$set(o)},i(_){y||(et(f.$$.fragment,_),y=!0)},o(_){pt(f.$$.fragment,_),y=!1},d(_){_&&R(h),Ht(f)}}}function tk(u,h,f){let y,_,x,{data:o}=h,{suffix:T="%"}=h,{decimals:I=null}=h,{fill:D="#00205B"}=h,{xKey:V="x"}=h,{yKey:j="y"}=h,{zKey:F=null}=h,{colors:pe=["#00205B","#00205B","#00205B","#00205B"]}=h;return u.$$set=ue=>{"data"in ue&&f(0,o=ue.data),"suffix"in ue&&f(8,T=ue.suffix),"decimals"in ue&&f(9,I=ue.decimals),"fill"in ue&&f(1,D=ue.fill),"xKey"in ue&&f(2,V=ue.xKey),"yKey"in ue&&f(3,j=ue.yKey),"zKey"in ue&&f(4,F=ue.zKey),"colors"in ue&&f(10,pe=ue.colors)},u.$$.update=()=>{u.$$.dirty&5&&f(7,y=o.map(ue=>ue[V])),u.$$.dirty&9&&f(6,_=[0,Math.max(...o.map(ue=>ue[j]))]),u.$$.dirty&768&&f(5,x=ue=>ue.toFixed(I)+T)},[o,D,V,j,F,x,_,y,T,I,pe]}class rk extends rs{constructor(h){super(),is(this,h,tk,ek,ts,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function Qb(u,h,f){const y=u.slice();return y[13]=h[f],y[15]=f,y}function ik(u){let h,f,y=u[5](u[13][u[3]])+"",_,x;return{c(){h=Z("span"),f=xe("(NI "),_=xe(y),x=xe(")"),this.h()},l(o){h=H(o,"SPAN",{class:!0,style:!0});var T=re(h);f=we(T,"(NI "),_=we(T,y),x=we(T,")"),T.forEach(R),this.h()},h(){S(h,"class",""),ee(h,"color","#1460aa")},m(o,T){Ce(o,h,T),z(h,f),z(h,_),z(h,x)},p(o,T){T&9&&y!==(y=o[5](o[13][o[3]])+"")&&ft(_,y)},d(o){o&&R(h)}}}function nk(u){let h;return{c(){h=Z("span"),this.h()},l(f){h=H(f,"SPAN",{class:!0,style:!0}),re(h).forEach(R),this.h()},h(){S(h,"class",""),ee(h,"color","#1460aa")},m(f,y){Ce(f,h,y)},p:Qi,d(f){f&&R(h)}}}function ak(u){let h,f,y=gv(Math.round(u[13][u[3]]),"%")+"",_,x;return{c(){h=Z("span"),f=xe("(2011 "),_=xe(y),x=xe(")"),this.h()},l(o){h=H(o,"SPAN",{class:!0,style:!0});var T=re(h);f=we(T,"(2011 "),_=we(T,y),x=we(T,")"),T.forEach(R),this.h()},h(){S(h,"class",""),ee(h,"color","#1460aa")},m(o,T){Ce(o,h,T),z(h,f),z(h,_),z(h,x)},p(o,T){T&9&&y!==(y=gv(Math.round(o[13][o[3]]),"%")+"")&&ft(_,y)},d(o){o&&R(h)}}}function $b(u){let h,f,y,_,x=u[13][u[1]]+"",o,T,I,D=u[5](u[13][u[2]])+"",V,j,F;function pe(Se,Oe){if(Se[3]=="prev"&&Se[4])return ak;if(Se[3]=="prev"&&!Se[4])return nk;if(Se[3]=="ni")return ik}let ue=pe(u),De=ue&&ue(u);return{c(){h=Z("tr"),f=Z("td"),y=Ha("svg"),_=ve(),o=xe(x),T=ve(),I=Z("td"),V=xe(D),j=ve(),De&&De.c(),F=ve(),this.h()},l(Se){h=H(Se,"TR",{});var Oe=re(h);f=H(Oe,"TD",{class:!0});var je=re(f);y=Ga(je,"svg",{width:!0,height:!0,class:!0});var Lt=re(y);Lt.forEach(R),_=_e(je),o=we(je,x),je.forEach(R),T=_e(Oe),I=H(Oe,"TD",{class:!0,style:!0});var Mt=re(I);V=we(Mt,D),j=_e(Mt),De&&De.l(Mt),Mt.forEach(R),F=_e(Oe),Oe.forEach(R),this.h()},h(){S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1mqxdxj"),S(f,"class","svelte-1mqxdxj"),S(I,"class","cell-right svelte-1mqxdxj"),ee(I,"vertical-align","top")},m(Se,Oe){Ce(Se,h,Oe),z(h,f),z(f,y),z(f,_),z(f,o),z(h,T),z(h,I),z(I,V),z(I,j),De&&De.m(I,null),z(h,F)},p(Se,Oe){Oe&3&&x!==(x=Se[13][Se[1]]+"")&&ft(o,x),Oe&5&&D!==(D=Se[5](Se[13][Se[2]])+"")&&ft(V,D),ue===(ue=pe(Se))&&De?De.p(Se,Oe):(De&&De.d(1),De=ue&&ue(Se),De&&(De.c(),De.m(I,null)))},d(Se){Se&&R(h),De&&De.d()}}}function ok(u){let h,f,y=Gn(u[0]),_=[];for(let x=0;x<y.length;x+=1)_[x]=$b(Qb(u,y,x));return{c(){h=Z("table"),f=Z("tbody");for(let x=0;x<_.length;x+=1)_[x].c();this.h()},l(x){h=H(x,"TABLE",{class:!0});var o=re(h);f=H(o,"TBODY",{});var T=re(f);for(let I=0;I<_.length;I+=1)_[I].l(T);T.forEach(R),o.forEach(R),this.h()},h(){S(h,"class","legend svelte-1mqxdxj")},m(x,o){Ce(x,h,o),z(h,f);for(let T=0;T<_.length;T+=1)_[T]&&_[T].m(f,null)},p(x,[o]){if(o&63){y=Gn(x[0]);let T;for(T=0;T<y.length;T+=1){const I=Qb(x,y,T);_[T]?_[T].p(I,o):(_[T]=$b(I),_[T].c(),_[T].m(f,null))}for(;T<_.length;T+=1)_[T].d(1);_.length=y.length}},i:Qi,o:Qi,d(x){x&&R(h),Gc(_,x)}}}function sk(u,h,f){let y,{data:_}=h,{xKey:x="x"}=h,{yKey:o="y"}=h,{zKey:T="ni"}=h,{topic_prev_available:I=!0}=h,{colors:D=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:V="#555"}=h,{mutedColor:j="#999"}=h,{decimals:F=null}=h,{round:pe=!1}=h;function ue(De){let Se;return F?Se=(De/y*100).toFixed(F)+"%":De/y*100<1?Se="<1%":Se=(De/y*100).toFixed(0)+"%",Se}return u.$$set=De=>{"data"in De&&f(0,_=De.data),"xKey"in De&&f(1,x=De.xKey),"yKey"in De&&f(2,o=De.yKey),"zKey"in De&&f(3,T=De.zKey),"topic_prev_available"in De&&f(4,I=De.topic_prev_available),"colors"in De&&f(6,D=De.colors),"textColor"in De&&f(7,V=De.textColor),"mutedColor"in De&&f(8,j=De.mutedColor),"decimals"in De&&f(9,F=De.decimals),"round"in De&&f(10,pe=De.round)},u.$$.update=()=>{u.$$.dirty&5&&(y=_.map(De=>De[o]).reduce((De,Se)=>De+Se,0)),u.$$.dirty&9&&_.map(De=>De[T]).reduce((De,Se)=>De+Se,0)},[_,x,o,T,I,ue,D,V,j,F,pe]}class lk extends rs{constructor(h){super(),is(this,h,sk,ok,ts,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:6,textColor:7,mutedColor:8,decimals:9,round:10})}}function ex(u,h,f){const y=u.slice();return y[6]=h[f],y[8]=f,y}function tx(u){let h,f=Gn(u[0]),y=[];for(let _=0;_<f.length;_+=1)y[_]=rx(ex(u,f,_));return{c(){h=Ha("svg");for(let _=0;_<y.length;_+=1)y[_].c();this.h()},l(_){h=Ga(_,"svg",{class:!0});var x=re(h);for(let o=0;o<y.length;o+=1)y[o].l(x);x.forEach(R),this.h()},h(){S(h,"class","stack svelte-pzvhwz")},m(_,x){Ce(_,h,x);for(let o=0;o<y.length;o+=1)y[o]&&y[o].m(h,null)},p(_,x){if(x&31){f=Gn(_[0]);let o;for(o=0;o<f.length;o+=1){const T=ex(_,f,o);y[o]?y[o].p(T,x):(y[o]=rx(T),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(_){_&&R(h),Gc(y,_)}}}function rx(u){let h,f;return{c(){h=Ha("rect"),this.h()},l(y){h=Ga(y,"rect",{class:!0,x:!0,style:!0}),re(h).forEach(R),this.h()},h(){S(h,"class","cell svelte-pzvhwz"),S(h,"x",f=u[4][u[8]]/u[3]*100+"%"),ee(h,"width",u[6][u[1]]/u[3]*100+"%"),ee(h,"fill",u[2][u[8]])},m(y,_){Ce(y,h,_)},p(y,_){_&24&&f!==(f=y[4][y[8]]/y[3]*100+"%")&&S(h,"x",f),_&11&&ee(h,"width",y[6][y[1]]/y[3]*100+"%"),_&4&&ee(h,"fill",y[2][y[8]])},d(y){y&&R(h)}}}function uk(u){let h,f=u[3]&&u[4]&&tx(u);return{c(){f&&f.c(),h=gn()},l(y){f&&f.l(y),h=gn()},m(y,_){f&&f.m(y,_),Ce(y,h,_)},p(y,[_]){y[3]&&y[4]?f?f.p(y,_):(f=tx(y),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:Qi,o:Qi,d(y){y&&R(h),f&&f.d(y)}}}function ck(u,h,f){let{data:y}=h,{yKey:_="y"}=h,{colors:x=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,o,T;function I(){f(3,o=y.map(V=>V[_]).reduce((V,j)=>V+j,0));let D=[0];y.forEach(V=>D.push(D[D.length-1]+V[_])),f(4,T=D)}return u.$$set=D=>{"data"in D&&f(0,y=D.data),"yKey"in D&&f(1,_=D.yKey),"colors"in D&&f(2,x=D.colors)},u.$$.update=()=>{u.$$.dirty&3&&(y||_)&&I()},[y,_,x,o,T]}class o0 extends rs{constructor(h){super(),is(this,h,ck,uk,ts,{data:0,yKey:1,colors:2})}}function ix(u,h,f){const y=u.slice();return y[10]=h[f],y[12]=f,y}function hk(u){let h,f,y=u[6](u[10][u[3]])+"",_,x;return{c(){h=Z("span"),f=xe("(NI "),_=xe(y),x=xe(")"),this.h()},l(o){h=H(o,"SPAN",{class:!0,style:!0});var T=re(h);f=we(T,"(NI "),_=we(T,y),x=we(T,")"),T.forEach(R),this.h()},h(){S(h,"class",""),ee(h,"color","#1460aa")},m(o,T){Ce(o,h,T),z(h,f),z(h,_),z(h,x)},p(o,T){T&9&&y!==(y=o[6](o[10][o[3]])+"")&&ft(_,y)},d(o){o&&R(h)}}}function pk(u){let h;return{c(){h=Z("span"),this.h()},l(f){h=H(f,"SPAN",{class:!0,style:!0}),re(h).forEach(R),this.h()},h(){S(h,"class",""),ee(h,"color","#1460aa")},m(f,y){Ce(f,h,y)},p:Qi,d(f){f&&R(h)}}}function fk(u){let h,f,y=gv(Math.round(u[10][u[3]]),"%")+"",_,x;return{c(){h=Z("span"),f=xe("(2011 "),_=xe(y),x=xe(")"),this.h()},l(o){h=H(o,"SPAN",{class:!0,style:!0});var T=re(h);f=we(T,"(2011 "),_=we(T,y),x=we(T,")"),T.forEach(R),this.h()},h(){S(h,"class",""),ee(h,"color","#1460aa")},m(o,T){Ce(o,h,T),z(h,f),z(h,_),z(h,x)},p(o,T){T&9&&y!==(y=gv(Math.round(o[10][o[3]]),"%")+"")&&ft(_,y)},d(o){o&&R(h)}}}function nx(u){let h,f,y,_,x,o=u[10][u[1]]+"",T,I,D,V=u[6](u[10][u[2]])+"",j,F,pe;function ue(Oe,je){if(Oe[3]=="prev"&&Oe[4])return fk;if(Oe[3]=="prev"&&!Oe[4])return pk;if(Oe[3]=="ni")return hk}let De=ue(u),Se=De&&De(u);return{c(){h=Z("tr"),f=Z("td"),y=Ha("svg"),_=Ha("rect"),x=ve(),T=xe(o),I=ve(),D=Z("td"),j=xe(V),F=ve(),Se&&Se.c(),pe=ve(),this.h()},l(Oe){h=H(Oe,"TR",{});var je=re(h);f=H(je,"TD",{class:!0});var Lt=re(f);y=Ga(Lt,"svg",{width:!0,height:!0,class:!0});var Mt=re(y);_=Ga(Mt,"rect",{width:!0,height:!0,style:!0}),re(_).forEach(R),Mt.forEach(R),x=_e(Lt),T=we(Lt,o),Lt.forEach(R),I=_e(je),D=H(je,"TD",{class:!0,style:!0});var yt=re(D);j=we(yt,V),F=_e(yt),Se&&Se.l(yt),yt.forEach(R),pe=_e(je),je.forEach(R),this.h()},h(){S(_,"width","20"),S(_,"height","30"),ee(_,"fill",u[5][u[12]]),S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1gvovsq"),S(f,"class","svelte-1gvovsq"),S(D,"class","cell-right svelte-1gvovsq"),ee(D,"vertical-align","top")},m(Oe,je){Ce(Oe,h,je),z(h,f),z(f,y),z(y,_),z(f,x),z(f,T),z(h,I),z(h,D),z(D,j),z(D,F),Se&&Se.m(D,null),z(h,pe)},p(Oe,je){je&32&&ee(_,"fill",Oe[5][Oe[12]]),je&3&&o!==(o=Oe[10][Oe[1]]+"")&&ft(T,o),je&5&&V!==(V=Oe[6](Oe[10][Oe[2]])+"")&&ft(j,V),De===(De=ue(Oe))&&Se?Se.p(Oe,je):(Se&&Se.d(1),Se=De&&De(Oe),Se&&(Se.c(),Se.m(D,null)))},d(Oe){Oe&&R(h),Se&&Se.d()}}}function dk(u){let h,f,y=Gn(u[0]),_=[];for(let x=0;x<y.length;x+=1)_[x]=nx(ix(u,y,x));return{c(){h=Z("table"),f=Z("tbody");for(let x=0;x<_.length;x+=1)_[x].c();this.h()},l(x){h=H(x,"TABLE",{class:!0});var o=re(h);f=H(o,"TBODY",{});var T=re(f);for(let I=0;I<_.length;I+=1)_[I].l(T);T.forEach(R),o.forEach(R),this.h()},h(){S(h,"class","legend svelte-1gvovsq")},m(x,o){Ce(x,h,o),z(h,f);for(let T=0;T<_.length;T+=1)_[T]&&_[T].m(f,null)},p(x,[o]){if(o&127){y=Gn(x[0]);let T;for(T=0;T<y.length;T+=1){const I=ix(x,y,T);_[T]?_[T].p(I,o):(_[T]=nx(I),_[T].c(),_[T].m(f,null))}for(;T<_.length;T+=1)_[T].d(1);_.length=y.length}},i:Qi,o:Qi,d(x){x&&R(h),Gc(_,x)}}}function mk(u,h,f){let y,{data:_}=h,{xKey:x="x"}=h,{yKey:o="y"}=h,{zKey:T="ni"}=h,{topic_prev_available:I=!0}=h,{colors:D=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:V=null}=h;function j(F){let pe;return V?pe=(F/y*100).toFixed(V)+"%":F/y*100<1?pe="<1%":pe=(F/y*100).toFixed(0)+"%",pe}return u.$$set=F=>{"data"in F&&f(0,_=F.data),"xKey"in F&&f(1,x=F.xKey),"yKey"in F&&f(2,o=F.yKey),"zKey"in F&&f(3,T=F.zKey),"topic_prev_available"in F&&f(4,I=F.topic_prev_available),"colors"in F&&f(5,D=F.colors),"decimals"in F&&f(7,V=F.decimals)},u.$$.update=()=>{u.$$.dirty&5&&(y=_.map(F=>F[o]).reduce((F,pe)=>F+pe,0)),u.$$.dirty&9&&_.map(F=>F[T]).reduce((F,pe)=>F+pe,0)},[_,x,o,T,I,D,j,V]}class yk extends rs{constructor(h){super(),is(this,h,mk,dk,ts,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function ax(u){let h,f,y,_;f=new o0({props:{data:u[0],yKey:u[4],colors:u[6]}});let x=u[8]&&ox(u);return{c(){h=Z("div"),jt(f.$$.fragment),y=ve(),x&&x.c(),this.h()},l(o){h=H(o,"DIV",{class:!0,style:!0});var T=re(h);qt(f.$$.fragment,T),y=_e(T),x&&x.l(T),T.forEach(R),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ee(h,"height",u[1]*.28+"px")},m(o,T){Ce(o,h,T),Zt(f,h,null),z(h,y),x&&x.m(h,null),_=!0},p(o,T){const I={};T&1&&(I.data=o[0]),T&16&&(I.yKey=o[4]),T&64&&(I.colors=o[6]),f.$set(I),o[8]?x?x.p(o,T):(x=ox(o),x.c(),x.m(h,null)):x&&(x.d(1),x=null),(!_||T&2)&&ee(h,"height",o[1]*.28+"px")},i(o){_||(et(f.$$.fragment,o),_=!0)},o(o){pt(f.$$.fragment,o),_=!1},d(o){o&&R(h),Ht(f),x&&x.d()}}}function ox(u){let h,f;return{c(){h=Z("div"),f=xe(u[8]),this.h()},l(y){h=H(y,"DIV",{class:!0});var _=re(h);f=we(_,u[8]),_.forEach(R),this.h()},h(){S(h,"class","label svelte-1tebgpk")},m(y,_){Ce(y,h,_),z(h,f)},p(y,_){_&256&&ft(f,y[8])},d(y){y&&R(h)}}}function sx(u){let h,f,y,_,x="2011 comparison not available",o;return f=new o0({props:{data:u[0],yKey:u[4],colors:u[6]}}),{c(){h=Z("div"),jt(f.$$.fragment),y=ve(),_=Z("div"),_.textContent=x,this.h()},l(T){h=H(T,"DIV",{class:!0,style:!0});var I=re(h);qt(f.$$.fragment,I),y=_e(I),_=H(I,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),ut(_)!=="svelte-sfzs3m"&&(_.textContent=x),I.forEach(R),this.h()},h(){S(_,"class","label svelte-1tebgpk"),ee(_,"background-color","#d8d8d8 "),ee(_,"color","#000000"),S(h,"class","chart svelte-1tebgpk"),ee(h,"height",u[1]*.28+"px")},m(T,I){Ce(T,h,I),Zt(f,h,null),z(h,y),z(h,_),o=!0},p(T,I){const D={};I&1&&(D.data=T[0]),I&16&&(D.yKey=T[4]),I&64&&(D.colors=T[6]),f.$set(D),(!o||I&2)&&ee(h,"height",T[1]*.28+"px")},i(T){o||(et(f.$$.fragment,T),o=!0)},o(T){pt(f.$$.fragment,T),o=!1},d(T){T&&R(h),Ht(f)}}}function gk(u){let h,f,y,_,x,o,T,I;f=new o0({props:{data:u[0],yKey:u[3],colors:u[6]}});let D=(u[4]&&u[5]||u[4]=="ni")&&ax(u),V=u[4]=="prev"&&!u[5]&&sx(u);return T=new yk({props:{data:u[0],xKey:u[2],yKey:u[3],zKey:u[4],topic_prev_available:u[5],decimals:u[7],colors:u[6]}}),{c(){h=Z("div"),jt(f.$$.fragment),y=ve(),D&&D.c(),_=ve(),V&&V.c(),x=ve(),o=Z("div"),jt(T.$$.fragment),this.h()},l(j){h=H(j,"DIV",{class:!0,style:!0});var F=re(h);qt(f.$$.fragment,F),F.forEach(R),y=_e(j),D&&D.l(j),_=_e(j),V&&V.l(j),x=_e(j),o=H(j,"DIV",{class:!0});var pe=re(o);qt(T.$$.fragment,pe),pe.forEach(R),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ee(h,"padding-top","3px"),ee(h,"height",(u[4]?u[1]*.72:u[1])+"px"),S(o,"class","legend svelte-1tebgpk")},m(j,F){Ce(j,h,F),Zt(f,h,null),Ce(j,y,F),D&&D.m(j,F),Ce(j,_,F),V&&V.m(j,F),Ce(j,x,F),Ce(j,o,F),Zt(T,o,null),I=!0},p(j,[F]){const pe={};F&1&&(pe.data=j[0]),F&8&&(pe.yKey=j[3]),F&64&&(pe.colors=j[6]),f.$set(pe),(!I||F&18)&&ee(h,"height",(j[4]?j[1]*.72:j[1])+"px"),j[4]&&j[5]||j[4]=="ni"?D?(D.p(j,F),F&48&&et(D,1)):(D=ax(j),D.c(),et(D,1),D.m(_.parentNode,_)):D&&(qu(),pt(D,1,1,()=>{D=null}),Zu()),j[4]=="prev"&&!j[5]?V?(V.p(j,F),F&48&&et(V,1)):(V=sx(j),V.c(),et(V,1),V.m(x.parentNode,x)):V&&(qu(),pt(V,1,1,()=>{V=null}),Zu());const ue={};F&1&&(ue.data=j[0]),F&4&&(ue.xKey=j[2]),F&8&&(ue.yKey=j[3]),F&16&&(ue.zKey=j[4]),F&32&&(ue.topic_prev_available=j[5]),F&128&&(ue.decimals=j[7]),F&64&&(ue.colors=j[6]),T.$set(ue)},i(j){I||(et(f.$$.fragment,j),et(D),et(V),et(T.$$.fragment,j),I=!0)},o(j){pt(f.$$.fragment,j),pt(D),pt(V),pt(T.$$.fragment,j),I=!1},d(j){j&&(R(h),R(y),R(_),R(x),R(o)),Ht(f),D&&D.d(j),V&&V.d(j),Ht(T)}}}function vk(u,h,f){let{data:y}=h,{height:_=80}=h,{xKey:x="x"}=h,{yKey:o="y"}=h,{zKey:T="ni"}=h,{topic_prev_available:I=!0}=h,{colors:D=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","#00695c"]}=h,{decimals:V=null}=h,{label:j=null}=h;return u.$$set=F=>{"data"in F&&f(0,y=F.data),"height"in F&&f(1,_=F.height),"xKey"in F&&f(2,x=F.xKey),"yKey"in F&&f(3,o=F.yKey),"zKey"in F&&f(4,T=F.zKey),"topic_prev_available"in F&&f(5,I=F.topic_prev_available),"colors"in F&&f(6,D=F.colors),"decimals"in F&&f(7,V=F.decimals),"label"in F&&f(8,j=F.label)},[y,_,x,o,T,I,D,V,j]}class Wr extends rs{constructor(h){super(),is(this,h,vk,gk,ts,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function _k(u){let h,f="Back to top",y,_;return{c(){h=Z("div"),h.textContent=f,this.h()},l(x){h=H(x,"DIV",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-yjbmhq"&&(h.textContent=f),this.h()},h(){S(h,"class","back_to_start svelte-gazxb6"),Ii(h,"hidden",u[0])},m(x,o){Ce(x,h,o),y||(_=[kt(window,"scroll",u[2]),kt(h,"click",u[1])],y=!0)},p(x,[o]){o&1&&Ii(h,"hidden",x[0])},i:Qi,o:Qi,d(x){x&&R(h),y=!1,Hu(_)}}}function bk(u,h,f){let{buttonVisibleOnPX:y=200}=h,_=!0;const x=()=>{document.body.scrollIntoView()},o=()=>document.documentElement||document.body,T=()=>{o().scrollTop>y?f(0,_=!1):f(0,_=!0)};return u.$$set=I=>{"buttonVisibleOnPX"in I&&f(3,y=I.buttonVisibleOnPX)},[_,x,T,y]}class xk extends rs{constructor(h){super(),is(this,h,bk,_k,ts,{buttonVisibleOnPX:3})}}function lx(u,h,f){const y=u.slice();return y[51]=h[f],y[53]=f,y}function ux(u,h,f){const y=u.slice();return y[54]=h[f],y[53]=f,y}function cx(u,h,f){const y=u.slice();return y[56]=h[f],y}function hx(u,h,f){const y=u.slice();return y[54]=h[f],y[53]=f,y}function px(u){let h,f,y,_,x="Home",o,T=" &gt; ",I,D,V,j,F,pe=u[0].place.name+"",ue,De,Se,Oe,je,Lt,Mt,yt,Qe,zr,Cr="Search for your area:",sr,St,Tt,Lr,Ot=`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`,Rr,ot,Fr=`<button class="btn svelte-17c2th3" style="width: 33%" title="Click to print this page to pdf or printer" onclick="window.print();return false;">Print / PDF</button> <button class="btn svelte-17c2th3" style="width: 33%" alt="Return to the landing page" onclick="window.location.href=&#39;${qh}/&#39;;">Menu</button> <button class="btn svelte-17c2th3" style="width: 30%" type="share" alt="Share this page">Share</button>`,Qr,Ar,dr,wi,Ve="Overview",Tr,vn,Ta,ni,_n,$r,za,hr,Pn,ns=" &#x24D8; ",Mn,Vt,Ca=`<div class="card card-body svelte-17c2th3">Population is based on the number of usual residents. A
						usual resident is anyone who, on 21 March 2021 is in the
						UK, and staying in the UK for a period of 3 months or
						more; or has a permanent UK address and is outside the
						UK and is staying outside the UK for less than 12
						months. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Ni,pr,$i=u[0].place.data.population.value[2021].all.toLocaleString()+"",yi,Mi,pi,fi,un,mr,Pr,tr,yr,Ki,Dn,Bs=" &#x24D8; ",To,Ln,Os=`<div class="card card-body svelte-17c2th3">A household is either one person living alone or a group
						of people living at the same address who share cooking
						facilities and share a living room, sitting room or
						dining area. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,lo,aa,oa=u[0].place.data.households.value[2021].all_households.toLocaleString()+"",uo,zo,as,Co,Aa,ai,cn,Kn,Ka,br,B,q,K,$,le,me,ye,G,te,ke,Ue,He='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseZero" aria-expanded="false" aria-controls="panelsStayOpen-collapseZero"><span class="accordion-button-title">Area Information</span></button>',Re,qe,at,st,Le=u[0].place.name+"",tt,Je,Ye,Gt="Location, Area and Population density",rt,Rt,$t,At,Jt,rr,di,lr,oi=" &#x24D8; ",gr,Nt,ur='<div class="card card-body svelte-17c2th3">Information about the area including its geographical hierarchy.</div>',Ui,co,Ei,si,bn,xn,ei,sa,Di,Li=" &#x24D8; ",wn,xr,Pa='<div class="card card-body svelte-17c2th3">Area is measured in hectares (ha), it is rounded to the nearest whole number.</div>',Rn,Ao,Ti=(u[0].place.hectares>=.1?u[0].place.hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",ho,en,ji,zi,ti,En,Gu,vl,Fs,Cf=" &#x24D8; ",eu,Vs,Ku='<div class="card card-body svelte-17c2th3">Population density is the number of usual residents per hectare. It is rounded to 1 d.p.</div>',Kc,Xa,_l=(u[0].place.data.population.value[2021].all/u[0].place.hectares>=.1?(u[0].place.data.population.value[2021].all/u[0].place.hectares).toFixed(1):"<0.1")+"",Ns,Xc,bl,la,Xn,Ee,Bn='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="false" aria-controls="panelsStayOpen-collapseOne"><span class="accordion-button-title">Demography</span></button>',tn,Br,hn,ua,ki=u[0].place.name+"",xl,Fp,Xu,jd="Broad age bands (years), Sex, Household size",Zh,Ma,Wn,Wa,os,Vp,Wu,tu,Hh=" &#x24D8; ",Np,Ci,Up=`<div class="card card-body svelte-17c2th3">A grouping of ages where a person’s age is their age
									at their last birthday on or prior to census day. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Us,Da,Ja,wl,ss,ls,Ya,js,El,us,Hr="Sex",Af,cs,jp,hs,po,ps,kl,Qa,qs,qd=" &#x24D8; ",qp,Zs,ru='<div class="card card-body svelte-17c2th3">The number of usual residents in the household.      <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Zp,$a,iu,Hp,Po,Mr,Gh='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo"><span class="accordion-button-title">Country of Birth &amp; Nationality</span></button>',Pf,fo,Mo,Mf,Wc=u[0].place.name+"",Ju,nu,fs,Kh="Country of birth, Passport(s) held, National identity (person based)",Yu,On,ds,Jn,pn,Gp,au,Xh,Qu=" &#x24D8; ",$u,ms,Kp='<div class="card card-body svelte-17c2th3">The country in which a person was born. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Jc,ou,Yc,Do,mo,ys,Qc,Sl,$c,Df=" &#x24D8; ",ec,Il,su='<div class="card card-body svelte-17c2th3">Passport or passports that an individual holds. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',li,gs,Tl,Yn,Kt,wr,La,vs,zl,Wh=" &#x24D8; ",Lf,lu,eh=`<div class="card card-body svelte-17c2th3">The nationality or nationalities that the person
									identifies with. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,tc,ca,Xi,rc,Cl,ui,dt='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree"><span class="accordion-button-title">Language</span></button>',ha,_s,pa,yo,Fn=u[0].place.name+"",th,$e,Al,Jh="Main language, Knowledge of Irish, Knowledge of Ulster-Scots",Yh,Ri,qi,Ra,go,fa,Ba,Qh,$h=" &#x24D8; ",ep,Hs,Lo=`<div class="card card-body svelte-17c2th3">Person&#39;s main language as declared in the Census.
									Statistics for all language questions are restricted
									to persons aged 3 and over. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Oa,Yt,Ro,rn,ci,da,Gs,Qn,kn,tp=" &#x24D8; ",bt,ht,rp=`<div class="card card-body svelte-17c2th3">A person has some ability in Irish if they can
									understand, speak, read or write Irish. Statistics
									for all language questions are restricted to persons
									aged 3 and over. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Vn,Nn,fn,Sn,eo,vo,Dr,Ai,ip,ic=" &#x24D8; ",np,ma,Fa=`<div class="card card-body svelte-17c2th3">A person has some ability in Ulster-Scots if they
									can understand, speak, read or write Ulster-Scots.
									Statistics for all language questions are restricted
									to persons aged 3 and over. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,uu,$n,ap,cu,Bo,Ks,nc='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="false" aria-controls="panelsStayOpen-collapseFour"><span class="accordion-button-title">Religion &amp; Ethnicity</span></button>',Pl,Xs,Un,Ws,hu=u[0].place.name+"",bs,to,Ml,rh="Religion, Religion or religion brought up in, Ethnic group",op,ya,n,s,a,c,m,w,E=" &#x24D8; ",C,M,N=`<div class="card card-body svelte-17c2th3">Religion, religious denomination or body the person
									indicated they belong to. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,W,J,Q,se,ne,he,ae,fe,ge,Ie=" &#x24D8; ",Be,Ae,Fe='<div class="card card-body svelte-17c2th3">The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled &#39;None&#39;.    <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Ze,Ke,Xe,it,mt,vt,wt,ar,ct,Ft=" &#x24D8; ",Qt,zt,Dt='<div class="card card-body svelte-17c2th3">Person’s ethnic group as declared in the Census. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Xt,It,Ct,Wi,Jr,Bi,dn='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseFive" aria-expanded="false" aria-controls="panelsStayOpen-collapseFive"><span class="accordion-button-title">Health &amp; Care</span></button>',gi,ri,Oi,jn,Oo=u[0].place.name+"",qn,_o,Zn,ih="General health, Long-term health problem or disability, Long-term health conditions, Unpaid care",pu,Ji,Va,ga,mn,ac,va,Zi,Dl=" &#x24D8; ",Js,Ll,cr,ro=`<div class="card card-body svelte-17c2th3">General health is a self-assessment of a
											person’s general state of health. It is not
											based over any specified period of time.
											<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,ea,io,Rf,bo,Fo,Na,Xp,Vo,oc,xy=" &#x24D8; ",sc,nn,mg='<div class="card card-body svelte-17c2th3">A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Zd,nh,wy,fu,Ys,No,Ey,du,Bf,ah=" &#x24D8; ",sp,ky,oh,yg=`<div class="card card-body svelte-17c2th3">A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.
									<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Sy,sh,Iy,mu,Uo,Rl,lh,lp,Fi,Hd=" &#x24D8; ",Gd,Bl,Of=`<div class="card card-body svelte-17c2th3">&#39;Unpaid care&#39; covers looking after, giving help
											or support to anyone because they have long-term
											physical or mental health conditions or
											illnesses, or problems related to old age. It
											does not include any activities as part of paid
											employment. All unpaid care statistics are restricted 
											to persons aged 5 and over.
											<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,up,lc,Ty,cp,yu,gu,gg='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseSix" aria-expanded="false" aria-controls="panelsStayOpen-collapseSix"><span class="accordion-button-title">Housing &amp; Accommodation</span></button>',hp,uh,xs,zy,pp=u[0].place.name+"",Wp,ws,fp,vg="Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability",Cy,ta,Ol,Ua,vu,Ay,ch,Ff,Cv=" &#x24D8; ",Py,Es,_g='<div class="card card-body svelte-17c2th3">The type of accommodation occupied by a household. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Vf,Qs,ks,_u,$s,bu,dp,hh,Kd,Av=" &#x24D8; ",My,ph,Dy=`<div class="card card-body svelte-17c2th3">Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.
									<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,ra,fh,Xd,Fl,el,Vl,Ly,mp,Wd,bg=" &#x24D8; ",Ry,dh,Jp=`<div class="card card-body svelte-17c2th3">Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.
									<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Jd,uc,Yp,Sr,Ss,_a,mh,yh,Yd,Pv=" &#x24D8; ",By,gh,xg=`<div class="card card-body svelte-17c2th3">Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.
									<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Oy,vh,Fy,xu,xo,wo,Qd,yp,$d,Mv=" &#x24D8; ",em,Nl,Qp=`<div class="card card-body svelte-17c2th3">Whether a household owns or rents its accommodation and, if rented, who the landlord is. 
									<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,gp,In,_h,Pi,Eo,Is,ja,bh,Nf,Dv=" &#x24D8; ",tm,wu,rm=`<div class="card card-body svelte-17c2th3">The number of cars or vans that are owned, or
									available for use, by members of a household. It
									includes company cars and vans that are available
									for private use.
									<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Vy,cc,vp,Uf,hc,pc,wg='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseSeven" aria-expanded="false" aria-controls="panelsStayOpen-collapseSeven"><span class="accordion-button-title">Household Structure</span></button>',im,fc,tl,nm,jf=u[0].place.name+"",am,om,xh,qf="Number of dependent children, Household composition",sm,no,Ts,ko,So,Ny,_p,lm,$p=" &#x24D8; ",Zf,dc,um='<div class="card card-body svelte-17c2th3">Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). &#39;No dependent children&#39; includes households with no children and households where all children are non-dependent. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',cm,mc,Uy,Eu,rl,zs,Hf,bp,yc,Gf=" &#x24D8; ",Vr,wh,hm=`<div class="card card-body svelte-17c2th3">Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. 
										&#39;Other household types&#39; includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Eh,kh,jy,xp,Eg="",kg,qy,Sh,gc,Zy='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseEight" aria-expanded="false" aria-controls="panelsStayOpen-collapseEight"><span class="accordion-button-title">Marital &amp; Civil Partnership Status</span></button>',pm,vc,jo,_c,wp=u[0].place.name+"",bc,fm,vi,mi="Marital and civil partnership status",dm,qo,Ul,Cs,il,Kf,As,ku,Sg=" &#x24D8; ",Hi,nl,Su='<div class="card card-body svelte-17c2th3">Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, &#39;in a civil partnership&#39; was &#39;in a registered same-sex civil partnership&#39;.  <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',ef,jl,Xf,al,Iu="",mm,Ih,Ig="",yn,Tu,xc,e,t='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseNine" aria-expanded="false" aria-controls="panelsStayOpen-collapseNine"><span class="accordion-button-title">Sexual Orientation</span></button>',i,l,p,d,v=u[0].place.name+"",k,A,P,L="Sexual orientation",O,U,X,ie,oe,de,ce,be,Te=" &#x24D8; ",Pe,Me,Ne='<div class="card card-body svelte-17c2th3">Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Ge,We,_t,nt,xt="",lt,Ut,Pt="",gt,ir,Bt,nr,Et='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTen" aria-expanded="false" aria-controls="panelsStayOpen-collapseTen"><span class="accordion-button-title">Labour Market &amp; Qualifications</span></button>',Er,Nr,Ur,_i,Yr=u[0].place.name+"",bi,Yi,Si,ia="Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation",an,Gr,Kr,ii,Wt,jr,kr,fr,qa=" &#x24D8; ",Tn,Or,Gi=`<div class="card card-body svelte-17c2th3">The highest level of qualification categories are as follows:
										<br/>
                                        • No qualifications;
										<br/>
                                        • Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;
										<br/>
                                        • Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;
										<br/>
                                        • Apprenticeship;
										<br/>
                                        • Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;
										<br/>
                                        • Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and
										<br/>
                                        • Other: Other qualifications, equivalent unknown.
                                        <br/>
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,zn,or,ol,on,Cn,Xr,sl,ba,wc,Ep=" &#x24D8; ",Th,ao,kp='<div class="card card-body svelte-17c2th3">Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',tf,Ps,Sp,Ms,Io,xa,Ip,ll,ql,rf=" &#x24D8; ",nf,Zl,af='<div class="card card-body svelte-17c2th3">The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Tp,Hl,zp,Zo,oo,Ds,zh,zu,Ec,Wf=" &#x24D8; ",kc,ul,Cp='<div class="card card-body svelte-17c2th3">The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person&#39;s employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Jf,Sc,Yf,Gl,Ho,Cu,Ap,hi,Go,Lv=" &#x24D8; ",Au,Pu,Hy='<div class="card card-body svelte-17c2th3">The classification of people aged 16 and over in employment by the occupation they work in. A person&#39;s occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',of,Za,Qf,Pp,Kl,Xl,ym='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseEleven" aria-expanded="false" aria-controls="panelsStayOpen-collapseEleven"><span class="accordion-button-title">Travel to Work or Study</span></button>',gm,cl,hl,vm,sf=u[0].place.name+"",$f,_m,Hn,ed="Method of travel to work or study, Distance to place of work or study",bm,Vi,Mu,Ls,so,Ch,pl,Ic,lf=" &#x24D8; ",xm,Tc,Gy=`<div class="card card-body svelte-17c2th3">The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.
                                        &#39;Other&#39; includes car or van pool; taxi; motorcycle, scooter or moped; and other method. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,wm,Du,td,wa,Rs,fl,rd,Ah,uf,Tg=" &#x24D8; ",Em,Lu,Ky=`<div class="card card-body svelte-17c2th3">The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. 
                                        &#39;Other&#39; includes car or van pool; taxi; motorcycle, scooter or moped; and other method. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>`,Mp,zc,cf,Dp,Xy="",Wy,Ru,dl,Bu,Jy,Lp,km,Rv=" &#x24D8; ",ml,Wl,Yy='<div class="card card-body svelte-17c2th3">The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.<a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Rp,Cc,Bv,Ph,Ou,Mh,Ov,id,zg,Yx=" &#x24D8; ",Fv,hf,s0='<div class="card card-body svelte-17c2th3">The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Vv,pf,l0,Nv,ff,df,u0='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwelve" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwelveTwelve"><span class="accordion-button-title">Migration</span></button>',Uv,mf,Ac,jv,Qy=u[0].place.name+"",Cg,qv,nd,c0="Address one year ago, Year of arrival to live in NI",Zv,Jl,Dh,Fu,Lh,Hv,ad,Ag,Qx=" &#x24D8; ",Gv,yf,h0='<div class="card card-body svelte-17c2th3">Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Kv,gf,Xv,Rh,Vu,Bh,Wv,od,Pg,$x=" &#x24D8; ",Jv,vf,p0='<div class="card card-body svelte-17c2th3">The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. <a href="https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins" class="svelte-17c2th3"><strong>Statistical bulletins</strong></a></div>',Yv,_f,Qv,sd,f0="",d0,sn,$v,m0;function y0(Y,ze){return Y[0].place.parents[0]?Ek:wk}let Mg=y0(u),Pc=Mg(u);function g0(Y,ze){return Y[0].place.type=="ni"?Sk:kk}let Dg=g0(u),Mc=Dg(u),Ko=u[0].place.type!="ni"&&dx(u);function v0(Y,ze){return Y[4]?Tk:Ik}let Lg=v0(u),Dc=Lg(u);St=new sw({props:{search_data:u[0].search_data,group:"typestr",search:!0}}),St.$on("select",u[14]);function _0(Y,ze){return Y[0].place.type=="ni"||Y[0].place.type=="ctry"?Ck:zk}let Rg=_0(u),Lc=Rg(u),Xo=u[4]&&mx(u),Ea=u[0].place.type!="ni"&&yx(u),ka=u[4]&&u[2]&&_x(u),Sa=u[0].place.type!="ni"&u[9]&&bx(u),Ia=u[4]&&u[2]&&xx(u);function b0(Y,ze){return Y[0].place.type!="ni"?Gk:Hk}let Bg=b0(u),Rc=Bg(u);function e2(Y){u[30](Y)}let x0={location:{bounds:u[0].place.bounds},options:{fitBoundsOptions:{padding:20}},style:r2,$$slots:{default:[Xk]},$$scope:{ctx:u}};u[6]!==void 0&&(x0.map=u[6]),B=new hw({props:x0}),Op.push(()=>o2(B,"map",e2));function w0(Y,ze){return Y[0].place.parents[0]?Jk:Wk}let Og=w0(u),Bc=Og(u);function E0(Y,ze){return Y[0].place.children[0]?Qk:Yk}let Fg=E0(u),Oc=Fg(u);function k0(Y,ze){return Y[0].place.type!="ni"&Y[0].place.type!="lgd"?tS:Y[0].place.type!="ni"&Y[0].place.type=="lgd"?eS:$k}let Vg=k0(u),Fc=Vg(u),Wo=u[0].place.type!="ni"&&u[9]&&Sx(u);Ja=new rk({props:{data:u[0].place&&u[12](["age"]),zKey:u[10]}});let Jo=(u[9]&&u[11]||u[2]&&u[11]&&u[4])&&Ix(u);return Ya=new lk({props:{data:u[0].place&&u[12](["age"]),zKey:u[10]}}),cs=new Wr({props:{data:u[0].place&&u[12](["sex"]),zKey:u[10],label:u[11]}}),$a=new Wr({props:{data:u[0].place&&u[12](["hh_size"]),zKey:u[10],label:u[11]}}),ou=new Wr({props:{data:u[0].place&&u[12](["cob"]),zKey:u[10],label:u[11]}}),gs=new Wr({props:{data:u[0].place&&u[12](["passport"]),zKey:u[10],label:u[11]}}),ca=new Wr({props:{data:u[0].place&&u[12](["natid"]),zKey:u[10],label:u[11]}}),Yt=new Wr({props:{data:u[0].place&&u[12](["mainlang"]),zKey:u[10],label:u[11]}}),Nn=new Wr({props:{data:u[0].place&&u[12](["irish"]),zKey:u[10],label:u[11]}}),$n=new Wr({props:{data:u[0].place&&u[12](["ulster"]),zKey:u[10],label:u[11]}}),J=new Wr({props:{data:u[0].place&&u[12](["religion"]),zKey:u[10],label:u[11]}}),Ke=new Wr({props:{data:u[0].place&&u[12](["religion_or_religion_brought_up_in"]),zKey:u[10],label:u[11]}}),It=new Wr({props:{data:u[0].place&&u[12](["ethnic"]),zKey:u[10],label:u[11]}}),io=new Wr({props:{data:u[0].place&&u[12](["general_health"]),zKey:u[10],label:u[11]}}),nh=new Wr({props:{data:u[0].place&&u[12](["long_term_disability"]),zKey:u[10],label:u[11]}}),sh=new Wr({props:{data:u[0].place&&u[12](["number_of_long_term_health"]),zKey:u[10],label:u[11]}}),lc=new Wr({props:{data:u[0].place&&u[12](["provision_care"]),zKey:u[10],label:u[11]}}),Qs=new Wr({props:{data:u[0].place&&u[12](["accommodation_type"]),zKey:u[10],label:u[11]}}),fh=new Wr({props:{data:u[0].place&&u[12](["number_of_adaptations"]),zKey:u[10],label:u[11]}}),uc=new Wr({props:{data:u[0].place&&u[12](["central_heating"]),zKey:u[10],label:u[11]}}),vh=new Wr({props:{data:u[0].place&&u[12](["renewable_energy"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),In=new Wr({props:{data:u[0].place&&u[12](["hh_tenure"]),zKey:u[10],label:u[11]}}),cc=new Wr({props:{data:u[0].place&&u[12](["car_or_van"]),zKey:u[10],label:u[11]}}),mc=new Wr({props:{data:u[0].place&&u[12](["number_of_dependent_children_households"]),zKey:u[10],label:u[11]}}),kh=new Wr({props:{data:u[0].place&&u[12](["household_composition_households"]),zKey:u[10],label:u[11]}}),jl=new Wr({props:{data:u[0].place&&u[12](["marital_and_civil_partnership_status"]),zKey:u[10],label:u[11]}}),We=new Wr({props:{data:u[0].place&&u[12](["sexual_orientation_by_broad_age_band"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),or=new Wr({props:{data:u[0].place&&u[12](["highest_level_of_qualifications"]),zKey:u[10],label:u[11]}}),Ps=new Wr({props:{data:u[0].place&&u[12](["economic_activity"]),zKey:u[10],label:u[11]}}),Hl=new Wr({props:{data:u[0].place&&u[12](["hours_worked"]),zKey:u[10],label:u[11]}}),Sc=new Wr({props:{data:u[0].place&&u[12](["industry_of_employment"]),zKey:u[10],label:u[11]}}),Za=new Wr({props:{data:u[0].place&&u[12](["occupation_1_digit"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),Du=new Wr({props:{data:u[0].place&&u[12](["method_of_travel_to_work"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),zc=new Wr({props:{data:u[0].place&&u[12](["method_of_travel_to_study"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),Cc=new Wr({props:{data:u[0].place&&u[12](["distance_travelled_to_work"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),pf=new Wr({props:{data:u[0].place&&u[12](["distance_travelled_to_study"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),gf=new Wr({props:{data:u[0].place&&u[12](["address_one_year_ago"]),zKey:u[10],label:u[11]}}),_f=new Wr({props:{data:u[0].place&&u[12](["year_of_arrival"]),zKey:u[10],label:u[11],topic_prev_available:!1}}),{c(){h=Z("div"),f=Z("div"),y=Z("span"),_=Z("a"),_.textContent=x,o=new vr(!1),I=ve(),Pc.c(),D=ve(),V=Z("br"),j=ve(),F=Z("span"),ue=xe(pe),De=ve(),Se=Z("div"),Oe=xe(`Click for: \r
		\r
					`),Mc.c(),je=ve(),Ko&&Ko.c(),Lt=ve(),Dc.c(),Mt=ve(),yt=Z("div"),Qe=Z("div"),zr=Z("b"),zr.textContent=Cr,sr=ve(),jt(St.$$.fragment),Tt=ve(),Lr=Z("script"),Lr.textContent=Ot,Rr=ve(),ot=Z("div"),ot.innerHTML=Fr,Qr=ve(),Ar=Z("div"),dr=Z("div"),wi=Z("h3"),wi.textContent=Ve,Tr=ve(),Lc.c(),vn=ve(),Xo&&Xo.c(),Ta=ve(),ni=Z("div"),_n=Z("div"),$r=Z("div"),za=xe("Population "),hr=Z("span"),Pn=new vr(!1),Mn=ve(),Vt=Z("div"),Vt.innerHTML=Ca,Ni=ve(),pr=Z("span"),yi=xe($i),Mi=Z("br"),pi=ve(),Ea&&Ea.c(),fi=ve(),ka&&ka.c(),un=ve(),mr=Z("div"),Pr=Z("div"),tr=Z("div"),yr=xe("Households"),Ki=Z("span"),Dn=new vr(!1),To=ve(),Ln=Z("div"),Ln.innerHTML=Os,lo=ve(),aa=Z("span"),uo=xe(oa),zo=Z("br"),as=ve(),Sa&&Sa.c(),Co=ve(),Ia&&Ia.c(),Aa=ve(),ai=Z("div"),cn=Z("div"),Kn=Z("h3"),Rc.c(),Ka=ve(),br=Z("div"),jt(B.$$.fragment),K=ve(),$=Z("div"),Bc.c(),le=ve(),me=Z("div"),Oc.c(),G=ve(),te=Z("div"),ke=Z("div"),Ue=Z("h2"),Ue.innerHTML=He,Re=ve(),qe=Z("div"),at=Z("div"),st=xe("Census 2021 - "),tt=xe(Le),Je=xe(" - "),Ye=Z("span"),Ye.textContent=Gt,rt=ve(),Rt=Z("div"),$t=Z("div"),At=Z("div"),Jt=Z("div"),rr=xe("Location"),di=Z("span"),lr=new vr(!1),gr=ve(),Nt=Z("div"),Nt.innerHTML=ur,Ui=ve(),co=Z("br"),Fc.c(),Ei=ve(),si=Z("div"),bn=Z("div"),xn=Z("div"),ei=xe("Area "),sa=Z("span"),Di=new vr(!1),wn=ve(),xr=Z("div"),xr.innerHTML=Pa,Rn=ve(),Ao=Z("span"),ho=xe(Ti),en=xe(" ha"),ji=ve(),zi=Z("div"),ti=Z("div"),En=Z("div"),Gu=xe("Population density"),vl=Z("span"),Fs=new vr(!1),eu=ve(),Vs=Z("div"),Vs.innerHTML=Ku,Kc=ve(),Xa=Z("span"),Ns=xe(_l),Xc=ve(),Wo&&Wo.c(),la=ve(),Xn=Z("div"),Ee=Z("h2"),Ee.innerHTML=Bn,tn=ve(),Br=Z("div"),hn=Z("div"),ua=xe("Census 2021 - "),xl=xe(ki),Fp=xe(" - "),Xu=Z("span"),Xu.textContent=jd,Zh=ve(),Ma=Z("div"),Wn=Z("div"),Wa=Z("div"),os=Z("div"),Vp=xe("Broad age bands (years) "),Wu=Z("span"),tu=new vr(!1),Np=ve(),Ci=Z("div"),Ci.innerHTML=Up,Us=ve(),Da=Z("div"),jt(Ja.$$.fragment),wl=ve(),Jo&&Jo.c(),ss=ve(),ls=Z("div"),jt(Ya.$$.fragment),js=ve(),El=Z("div"),us=Z("div"),us.textContent=Hr,Af=ve(),jt(cs.$$.fragment),jp=ve(),hs=Z("div"),po=Z("div"),ps=Z("div"),kl=xe("Household size"),Qa=Z("span"),qs=new vr(!1),qp=ve(),Zs=Z("div"),Zs.innerHTML=ru,Zp=ve(),jt($a.$$.fragment),Hp=ve(),Po=Z("div"),Mr=Z("h2"),Mr.innerHTML=Gh,Pf=ve(),fo=Z("div"),Mo=Z("div"),Mf=xe("Census 2021 - "),Ju=xe(Wc),nu=xe(" - "),fs=Z("span"),fs.textContent=Kh,Yu=ve(),On=Z("div"),ds=Z("div"),Jn=Z("div"),pn=Z("div"),Gp=xe("Country of birth"),au=Z("span"),Xh=new vr(!1),$u=ve(),ms=Z("div"),ms.innerHTML=Kp,Jc=ve(),jt(ou.$$.fragment),Yc=ve(),Do=Z("div"),mo=Z("div"),ys=Z("div"),Qc=xe("Passport(s) held"),Sl=Z("span"),$c=new vr(!1),ec=ve(),Il=Z("div"),Il.innerHTML=su,li=ve(),jt(gs.$$.fragment),Tl=ve(),Yn=Z("div"),Kt=Z("div"),wr=Z("div"),La=xe("National identity (person based)"),vs=Z("span"),zl=new vr(!1),Lf=ve(),lu=Z("div"),lu.innerHTML=eh,tc=ve(),jt(ca.$$.fragment),rc=ve(),Cl=Z("div"),ui=Z("h2"),ui.innerHTML=dt,ha=ve(),_s=Z("div"),pa=Z("div"),yo=xe("Census 2021 - "),th=xe(Fn),$e=xe(" - "),Al=Z("span"),Al.textContent=Jh,Yh=ve(),Ri=Z("div"),qi=Z("div"),Ra=Z("div"),go=Z("div"),fa=xe("Main language"),Ba=Z("span"),Qh=new vr(!1),ep=ve(),Hs=Z("div"),Hs.innerHTML=Lo,Oa=ve(),jt(Yt.$$.fragment),Ro=ve(),rn=Z("div"),ci=Z("div"),da=Z("div"),Gs=xe("Knowledge of Irish"),Qn=Z("span"),kn=new vr(!1),bt=ve(),ht=Z("div"),ht.innerHTML=rp,Vn=ve(),jt(Nn.$$.fragment),fn=ve(),Sn=Z("div"),eo=Z("div"),vo=Z("div"),Dr=xe("Knowledge of Ulster-Scots"),Ai=Z("span"),ip=new vr(!1),np=ve(),ma=Z("div"),ma.innerHTML=Fa,uu=ve(),jt($n.$$.fragment),cu=ve(),Bo=Z("div"),Ks=Z("h2"),Ks.innerHTML=nc,Pl=ve(),Xs=Z("div"),Un=Z("div"),Ws=xe("Census 2021 - "),bs=xe(hu),to=xe(" - "),Ml=Z("span"),Ml.textContent=rh,op=ve(),ya=Z("div"),n=Z("div"),s=Z("div"),a=Z("div"),c=xe("Religion"),m=Z("span"),w=new vr(!1),C=ve(),M=Z("div"),M.innerHTML=N,W=ve(),jt(J.$$.fragment),Q=ve(),se=Z("div"),ne=Z("div"),he=Z("div"),ae=xe("Religion or religion brought up in"),fe=Z("span"),ge=new vr(!1),Be=ve(),Ae=Z("div"),Ae.innerHTML=Fe,Ze=ve(),jt(Ke.$$.fragment),Xe=ve(),it=Z("div"),mt=Z("div"),vt=Z("div"),wt=xe("Ethnic group"),ar=Z("span"),ct=new vr(!1),Qt=ve(),zt=Z("div"),zt.innerHTML=Dt,Xt=ve(),jt(It.$$.fragment),Wi=ve(),Jr=Z("div"),Bi=Z("h2"),Bi.innerHTML=dn,gi=ve(),ri=Z("div"),Oi=Z("div"),jn=xe("Census 2021 - "),qn=xe(Oo),_o=xe(" - "),Zn=Z("span"),Zn.textContent=ih,pu=ve(),Ji=Z("div"),Va=Z("div"),ga=Z("div"),mn=Z("div"),ac=xe("General health"),va=Z("span"),Zi=new vr(!1),Js=Z("br"),Ll=ve(),cr=Z("div"),cr.innerHTML=ro,ea=ve(),jt(io.$$.fragment),Rf=ve(),bo=Z("div"),Fo=Z("div"),Na=Z("div"),Xp=xe("Long-term health problem or disability"),Vo=Z("span"),oc=new vr(!1),sc=ve(),nn=Z("div"),nn.innerHTML=mg,Zd=ve(),jt(nh.$$.fragment),wy=ve(),fu=Z("div"),Ys=Z("div"),No=Z("div"),Ey=xe("Long-term health conditions"),du=Z("span"),Bf=new vr(!1),sp=Z("br"),ky=ve(),oh=Z("div"),oh.innerHTML=yg,Sy=ve(),jt(sh.$$.fragment),Iy=ve(),mu=Z("div"),Uo=Z("div"),Rl=Z("div"),lh=xe("Unpaid care"),lp=Z("span"),Fi=new vr(!1),Gd=ve(),Bl=Z("div"),Bl.innerHTML=Of,up=ve(),jt(lc.$$.fragment),cp=ve(),yu=Z("div"),gu=Z("h2"),gu.innerHTML=gg,hp=ve(),uh=Z("div"),xs=Z("div"),zy=xe("Census 2021 - "),Wp=xe(pp),ws=xe(" - "),fp=Z("span"),fp.textContent=vg,Cy=ve(),ta=Z("div"),Ol=Z("div"),Ua=Z("div"),vu=Z("div"),Ay=xe("Accommodation type"),ch=Z("span"),Ff=new vr(!1),Py=ve(),Es=Z("div"),Es.innerHTML=_g,Vf=ve(),jt(Qs.$$.fragment),ks=ve(),_u=Z("div"),$s=Z("div"),bu=Z("div"),dp=xe("Household adaptations"),hh=Z("span"),Kd=new vr(!1),My=ve(),ph=Z("div"),ph.innerHTML=Dy,ra=ve(),jt(fh.$$.fragment),Xd=ve(),Fl=Z("div"),el=Z("div"),Vl=Z("div"),Ly=xe("Central heating"),mp=Z("span"),Wd=new vr(!1),Ry=ve(),dh=Z("div"),dh.innerHTML=Jp,Jd=ve(),jt(uc.$$.fragment),Yp=ve(),Sr=Z("div"),Ss=Z("div"),_a=Z("div"),mh=xe("Renewable energy systems"),yh=Z("span"),Yd=new vr(!1),By=ve(),gh=Z("div"),gh.innerHTML=xg,Oy=ve(),jt(vh.$$.fragment),Fy=ve(),xu=Z("div"),xo=Z("div"),wo=Z("div"),Qd=xe("Household tenure"),yp=Z("span"),$d=new vr(!1),em=ve(),Nl=Z("div"),Nl.innerHTML=Qp,gp=ve(),jt(In.$$.fragment),_h=ve(),Pi=Z("div"),Eo=Z("div"),Is=Z("div"),ja=xe("Car or van availability"),bh=Z("span"),Nf=new vr(!1),tm=ve(),wu=Z("div"),wu.innerHTML=rm,Vy=ve(),jt(cc.$$.fragment),Uf=ve(),hc=Z("div"),pc=Z("h2"),pc.innerHTML=wg,im=ve(),fc=Z("div"),tl=Z("div"),nm=xe("Census 2021 - "),am=xe(jf),om=xe(" - "),xh=Z("span"),xh.textContent=qf,sm=ve(),no=Z("div"),Ts=Z("div"),ko=Z("div"),So=Z("div"),Ny=xe("Number of dependent children"),_p=Z("span"),lm=new vr(!1),Zf=ve(),dc=Z("div"),dc.innerHTML=um,cm=ve(),jt(mc.$$.fragment),Uy=ve(),Eu=Z("div"),rl=Z("div"),zs=Z("div"),Hf=xe("Household composition"),bp=Z("span"),yc=new vr(!1),Vr=ve(),wh=Z("div"),wh.innerHTML=hm,Eh=ve(),jt(kh.$$.fragment),jy=ve(),xp=Z("div"),xp.innerHTML=Eg,qy=ve(),Sh=Z("div"),gc=Z("h2"),gc.innerHTML=Zy,pm=ve(),vc=Z("div"),jo=Z("div"),_c=xe("Census 2021 - "),bc=xe(wp),fm=xe(" - "),vi=Z("span"),vi.textContent=mi,dm=ve(),qo=Z("div"),Ul=Z("div"),Cs=Z("div"),il=Z("div"),Kf=xe("Marital and civil partnership status"),As=Z("span"),ku=new vr(!1),Hi=ve(),nl=Z("div"),nl.innerHTML=Su,ef=ve(),jt(jl.$$.fragment),Xf=ve(),al=Z("div"),al.innerHTML=Iu,mm=ve(),Ih=Z("div"),Ih.innerHTML=Ig,Tu=ve(),xc=Z("div"),e=Z("h2"),e.innerHTML=t,i=ve(),l=Z("div"),p=Z("div"),d=xe("Census 2021 - "),k=xe(v),A=xe(" - "),P=Z("span"),P.textContent=L,O=ve(),U=Z("div"),X=Z("div"),ie=Z("div"),oe=Z("div"),de=xe("Sexual orientation"),ce=Z("span"),be=new vr(!1),Pe=ve(),Me=Z("div"),Me.innerHTML=Ne,Ge=ve(),jt(We.$$.fragment),_t=ve(),nt=Z("div"),nt.innerHTML=xt,lt=ve(),Ut=Z("div"),Ut.innerHTML=Pt,ir=ve(),Bt=Z("div"),nr=Z("h2"),nr.innerHTML=Et,Er=ve(),Nr=Z("div"),Ur=Z("div"),_i=xe("Census 2021 - "),bi=xe(Yr),Yi=xe(" - "),Si=Z("span"),Si.textContent=ia,an=ve(),Gr=Z("div"),Kr=Z("div"),ii=Z("div"),Wt=Z("div"),jr=xe("Highest level of qualifications"),kr=Z("span"),fr=new vr(!1),Tn=ve(),Or=Z("div"),Or.innerHTML=Gi,zn=ve(),jt(or.$$.fragment),ol=ve(),on=Z("div"),Cn=Z("div"),Xr=Z("div"),sl=xe("Economic activity"),ba=Z("span"),wc=new vr(!1),Th=ve(),ao=Z("div"),ao.innerHTML=kp,tf=ve(),jt(Ps.$$.fragment),Sp=ve(),Ms=Z("div"),Io=Z("div"),xa=Z("div"),Ip=xe("Hours worked per week"),ll=Z("span"),ql=new vr(!1),nf=ve(),Zl=Z("div"),Zl.innerHTML=af,Tp=ve(),jt(Hl.$$.fragment),zp=ve(),Zo=Z("div"),oo=Z("div"),Ds=Z("div"),zh=xe("Industry of employment"),zu=Z("span"),Ec=new vr(!1),kc=ve(),ul=Z("div"),ul.innerHTML=Cp,Jf=ve(),jt(Sc.$$.fragment),Yf=ve(),Gl=Z("div"),Ho=Z("div"),Cu=Z("div"),Ap=xe("Occupation"),hi=Z("span"),Go=new vr(!1),Au=ve(),Pu=Z("div"),Pu.innerHTML=Hy,of=ve(),jt(Za.$$.fragment),Pp=ve(),Kl=Z("div"),Xl=Z("h2"),Xl.innerHTML=ym,gm=ve(),cl=Z("div"),hl=Z("div"),vm=xe("Census 2021 - "),$f=xe(sf),_m=xe(" - "),Hn=Z("span"),Hn.textContent=ed,bm=ve(),Vi=Z("div"),Mu=Z("div"),Ls=Z("div"),so=Z("div"),Ch=xe("Method of travel to work"),pl=Z("span"),Ic=new vr(!1),xm=ve(),Tc=Z("div"),Tc.innerHTML=Gy,wm=ve(),jt(Du.$$.fragment),td=ve(),wa=Z("div"),Rs=Z("div"),fl=Z("div"),rd=xe("Method of travel to study"),Ah=Z("span"),uf=new vr(!1),Em=ve(),Lu=Z("div"),Lu.innerHTML=Ky,Mp=ve(),jt(zc.$$.fragment),cf=ve(),Dp=Z("div"),Dp.innerHTML=Xy,Wy=ve(),Ru=Z("div"),dl=Z("div"),Bu=Z("div"),Jy=xe("Distance to place of work"),Lp=Z("span"),km=new vr(!1),ml=ve(),Wl=Z("div"),Wl.innerHTML=Yy,Rp=ve(),jt(Cc.$$.fragment),Bv=ve(),Ph=Z("div"),Ou=Z("div"),Mh=Z("div"),Ov=xe("Distance to place of study"),id=Z("span"),zg=new vr(!1),Fv=ve(),hf=Z("div"),hf.innerHTML=s0,Vv=ve(),jt(pf.$$.fragment),Nv=ve(),ff=Z("div"),df=Z("h2"),df.innerHTML=u0,Uv=ve(),mf=Z("div"),Ac=Z("div"),jv=xe("Census 2021 - "),Cg=xe(Qy),qv=xe(" - "),nd=Z("span"),nd.textContent=c0,Zv=ve(),Jl=Z("div"),Dh=Z("div"),Fu=Z("div"),Lh=Z("div"),Hv=xe("Address one year ago"),ad=Z("span"),Ag=new vr(!1),Gv=ve(),yf=Z("div"),yf.innerHTML=h0,Kv=ve(),jt(gf.$$.fragment),Xv=ve(),Rh=Z("div"),Vu=Z("div"),Bh=Z("div"),Wv=xe("Year of arrival to live in NI"),od=Z("span"),Pg=new vr(!1),Jv=ve(),vf=Z("div"),vf.innerHTML=p0,Yv=ve(),jt(_f.$$.fragment),Qv=ve(),sd=Z("div"),sd.innerHTML=f0,this.h()},l(Y){h=H(Y,"DIV",{class:!0});var ze=re(h);f=H(ze,"DIV",{});var Oh=re(f);y=H(Oh,"SPAN",{class:!0});var Vc=re(y);_=H(Vc,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0,"data-svelte-h":!0}),ut(_)!=="svelte-7bn769"&&(_.textContent=x),o=_r(Vc,!1),I=_e(Vc),Pc.l(Vc),D=_e(Vc),Vc.forEach(R),V=H(Oh,"BR",{}),j=_e(Oh),F=H(Oh,"SPAN",{class:!0});var Sm=re(F);ue=we(Sm,pe),Sm.forEach(R),De=_e(Oh),Se=H(Oh,"DIV",{class:!0,style:!0});var Nc=re(Se);Oe=we(Nc,`Click for: \r
		\r
					`),Mc.l(Nc),je=_e(Nc),Ko&&Ko.l(Nc),Lt=_e(Nc),Dc.l(Nc),Nc.forEach(R),Oh.forEach(R),Mt=_e(ze),yt=H(ze,"DIV",{});var ld=re(yt);Qe=H(ld,"DIV",{style:!0,class:!0});var Yl=re(Qe);zr=H(Yl,"B",{"data-svelte-h":!0}),ut(zr)!=="svelte-1qrfbgv"&&(zr.textContent=Cr),sr=_e(Yl),qt(St.$$.fragment,Yl),Tt=_e(Yl),Lr=H(Yl,"SCRIPT",{"data-svelte-h":!0}),ut(Lr)!=="svelte-ewkrln"&&(Lr.textContent=Ot),Rr=_e(Yl),ot=H(Yl,"DIV",{width:!0,"data-svelte-h":!0}),ut(ot)!=="svelte-hwjcup"&&(ot.innerHTML=Fr),Yl.forEach(R),ld.forEach(R),ze.forEach(R),Qr=_e(Y),Ar=H(Y,"DIV",{id:!0,class:!0});var Uc=re(Ar);dr=H(Uc,"DIV",{class:!0,style:!0});var jc=re(dr);wi=H(jc,"H3",{style:!0,class:!0,"data-svelte-h":!0}),ut(wi)!=="svelte-1rlmcqm"&&(wi.textContent=Ve),Tr=_e(jc),Lc.l(jc),vn=_e(jc),Xo&&Xo.l(jc),jc.forEach(R),Ta=_e(Uc),ni=H(Uc,"DIV",{class:!0});var Yo=re(ni);_n=H(Yo,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ud=re(_n);$r=H(ud,"DIV",{class:!0,style:!0});var bf=re($r);za=we(bf,"Population "),hr=H(bf,"SPAN",{style:!0});var cd=re(hr);Pn=_r(cd,!1),cd.forEach(R),bf.forEach(R),ud.forEach(R),Mn=_e(Yo),Vt=H(Yo,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Vt)!=="svelte-2knpo5"&&(Vt.innerHTML=Ca),Ni=_e(Yo),pr=H(Yo,"SPAN",{class:!0,style:!0});var hd=re(pr);yi=we(hd,$i),hd.forEach(R),Mi=H(Yo,"BR",{}),pi=_e(Yo),Ea&&Ea.l(Yo),fi=_e(Yo),ka&&ka.l(Yo),Yo.forEach(R),un=_e(Uc),mr=H(Uc,"DIV",{class:!0});var Qo=re(mr);Pr=H(Qo,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var pd=re(Pr);tr=H(pd,"DIV",{class:!0,style:!0});var xf=re(tr);yr=we(xf,"Households"),Ki=H(xf,"SPAN",{style:!0});var fd=re(Ki);Dn=_r(fd,!1),fd.forEach(R),xf.forEach(R),pd.forEach(R),To=_e(Qo),Ln=H(Qo,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Ln)!=="svelte-187qozc"&&(Ln.innerHTML=Os),lo=_e(Qo),aa=H(Qo,"SPAN",{class:!0,style:!0});var dd=re(aa);uo=we(dd,oa),dd.forEach(R),zo=H(Qo,"BR",{}),as=_e(Qo),Sa&&Sa.l(Qo),Co=_e(Qo),Ia&&Ia.l(Qo),Qo.forEach(R),Uc.forEach(R),Aa=_e(Y),ai=H(Y,"DIV",{class:!0});var Ql=re(ai);cn=H(Ql,"DIV",{style:!0});var md=re(cn);Kn=H(md,"H3",{class:!0});var yd=re(Kn);Rc.l(yd),yd.forEach(R),md.forEach(R),Ka=_e(Ql),br=H(Ql,"DIV",{id:!0,style:!0,class:!0});var gd=re(br);qt(B.$$.fragment,gd),gd.forEach(R),K=_e(Ql),$=H(Ql,"DIV",{});var vd=re($);Bc.l(vd),vd.forEach(R),le=_e(Ql),me=H(Ql,"DIV",{});var _d=re(me);Oc.l(_d),_d.forEach(R),Ql.forEach(R),G=_e(Y),te=H(Y,"DIV",{class:!0,id:!0});var xi=re(te);ke=H(xi,"DIV",{class:!0});var Bp=re(ke);Ue=H(Bp,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(Ue)!=="svelte-1vymzwr"&&(Ue.innerHTML=He),Re=_e(Bp),qe=H(Bp,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var bd=re(qe);at=H(bd,"DIV",{class:!0});var Nu=re(at);st=we(Nu,"Census 2021 - "),tt=we(Nu,Le),Je=we(Nu," - "),Ye=H(Nu,"SPAN",{class:!0,"data-svelte-h":!0}),ut(Ye)!=="svelte-1lgcbvk"&&(Ye.textContent=Gt),rt=_e(Nu),Rt=H(Nu,"DIV",{class:!0});var qc=re(Rt);$t=H(qc,"DIV",{class:!0,style:!0});var Uu=re($t);At=H(Uu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xd=re(At);Jt=H(xd,"DIV",{class:!0,style:!0});var wf=re(Jt);rr=we(wf,"Location"),di=H(wf,"SPAN",{style:!0});var wd=re(di);lr=_r(wd,!1),wd.forEach(R),wf.forEach(R),xd.forEach(R),gr=_e(Uu),Nt=H(Uu,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Nt)!=="svelte-9ntjco"&&(Nt.innerHTML=ur),Ui=_e(Uu),co=H(Uu,"BR",{}),Fc.l(Uu),Uu.forEach(R),Ei=_e(qc),si=H(qc,"DIV",{class:!0});var Zc=re(si);bn=H(Zc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ed=re(bn);xn=H(Ed,"DIV",{class:!0,style:!0});var Ef=re(xn);ei=we(Ef,"Area "),sa=H(Ef,"SPAN",{style:!0});var kd=re(sa);Di=_r(kd,!1),kd.forEach(R),Ef.forEach(R),Ed.forEach(R),wn=_e(Zc),xr=H(Zc,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(xr)!=="svelte-1dnptkw"&&(xr.innerHTML=Pa),Rn=_e(Zc),Ao=H(Zc,"SPAN",{class:!0,style:!0});var kf=re(Ao);ho=we(kf,Ti),en=we(kf," ha"),kf.forEach(R),Zc.forEach(R),ji=_e(qc),zi=H(qc,"DIV",{class:!0});var $l=re(zi);ti=H($l,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Sd=re(ti);En=H(Sd,"DIV",{class:!0,style:!0});var e_=re(En);Gu=we(e_,"Population density"),vl=H(e_,"SPAN",{style:!0});var S0=re(vl);Fs=_r(S0,!1),S0.forEach(R),e_.forEach(R),Sd.forEach(R),eu=_e($l),Vs=H($l,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Vs)!=="svelte-13oncr4"&&(Vs.innerHTML=Ku),Kc=_e($l),Xa=H($l,"SPAN",{class:!0,style:!0});var I0=re(Xa);Ns=we(I0,_l),I0.forEach(R),Xc=_e($l),Wo&&Wo.l($l),$l.forEach(R),qc.forEach(R),Nu.forEach(R),bd.forEach(R),Bp.forEach(R),la=_e(xi),Xn=H(xi,"DIV",{class:!0});var Ng=re(Xn);Ee=H(Ng,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(Ee)!=="svelte-185zyh8"&&(Ee.innerHTML=Bn),tn=_e(Ng),Br=H(Ng,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var T0=re(Br);hn=H(T0,"DIV",{class:!0});var Id=re(hn);ua=we(Id,"Census 2021 - "),xl=we(Id,ki),Fp=we(Id," - "),Xu=H(Id,"SPAN",{class:!0,"data-svelte-h":!0}),ut(Xu)!=="svelte-1j2ltnu"&&(Xu.textContent=jd),Zh=_e(Id),Ma=H(Id,"DIV",{class:!0});var Im=re(Ma);Wn=H(Im,"DIV",{class:!0});var Fh=re(Wn);Wa=H(Fh,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var z0=re(Wa);os=H(z0,"DIV",{class:!0,style:!0});var t_=re(os);Vp=we(t_,"Broad age bands (years) "),Wu=H(t_,"SPAN",{style:!0});var C0=re(Wu);tu=_r(C0,!1),C0.forEach(R),t_.forEach(R),z0.forEach(R),Np=_e(Fh),Ci=H(Fh,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Ci)!=="svelte-1flgy70"&&(Ci.innerHTML=Up),Us=_e(Fh),Da=H(Fh,"DIV",{class:!0,style:!0});var A0=re(Da);qt(Ja.$$.fragment,A0),A0.forEach(R),wl=_e(Fh),Jo&&Jo.l(Fh),ss=_e(Fh),ls=H(Fh,"DIV",{});var P0=re(ls);qt(Ya.$$.fragment,P0),P0.forEach(R),Fh.forEach(R),js=_e(Im),El=H(Im,"DIV",{class:!0});var Ug=re(El);us=H(Ug,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),ut(us)!=="svelte-39otre"&&(us.textContent=Hr),Af=_e(Ug),qt(cs.$$.fragment,Ug),Ug.forEach(R),jp=_e(Im),hs=H(Im,"DIV",{class:!0});var Tm=re(hs);po=H(Tm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M0=re(po);ps=H(M0,"DIV",{class:!0,style:!0});var r_=re(ps);kl=we(r_,"Household size"),Qa=H(r_,"SPAN",{style:!0});var D0=re(Qa);qs=_r(D0,!1),D0.forEach(R),r_.forEach(R),M0.forEach(R),qp=_e(Tm),Zs=H(Tm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Zs)!=="svelte-182l3cr"&&(Zs.innerHTML=ru),Zp=_e(Tm),qt($a.$$.fragment,Tm),Tm.forEach(R),Im.forEach(R),Id.forEach(R),T0.forEach(R),Ng.forEach(R),Hp=_e(xi),Po=H(xi,"DIV",{class:!0});var jg=re(Po);Mr=H(jg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(Mr)!=="svelte-1ecjtrm"&&(Mr.innerHTML=Gh),Pf=_e(jg),fo=H(jg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var L0=re(fo);Mo=H(L0,"DIV",{class:!0});var Td=re(Mo);Mf=we(Td,"Census 2021 - "),Ju=we(Td,Wc),nu=we(Td," - "),fs=H(Td,"SPAN",{class:!0,"data-svelte-h":!0}),ut(fs)!=="svelte-1c331ag"&&(fs.textContent=Kh),Yu=_e(Td),On=H(Td,"DIV",{class:!0});var zm=re(On);ds=H(zm,"DIV",{class:!0});var Cm=re(ds);Jn=H(Cm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var R0=re(Jn);pn=H(R0,"DIV",{class:!0,style:!0});var i_=re(pn);Gp=we(i_,"Country of birth"),au=H(i_,"SPAN",{style:!0});var B0=re(au);Xh=_r(B0,!1),B0.forEach(R),i_.forEach(R),R0.forEach(R),$u=_e(Cm),ms=H(Cm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(ms)!=="svelte-153y53x"&&(ms.innerHTML=Kp),Jc=_e(Cm),qt(ou.$$.fragment,Cm),Cm.forEach(R),Yc=_e(zm),Do=H(zm,"DIV",{class:!0});var Am=re(Do);mo=H(Am,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var O0=re(mo);ys=H(O0,"DIV",{class:!0,style:!0});var n_=re(ys);Qc=we(n_,"Passport(s) held"),Sl=H(n_,"SPAN",{style:!0});var F0=re(Sl);$c=_r(F0,!1),F0.forEach(R),n_.forEach(R),O0.forEach(R),ec=_e(Am),Il=H(Am,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Il)!=="svelte-ze36uf"&&(Il.innerHTML=su),li=_e(Am),qt(gs.$$.fragment,Am),Am.forEach(R),Tl=_e(zm),Yn=H(zm,"DIV",{class:!0});var Pm=re(Yn);Kt=H(Pm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var V0=re(Kt);wr=H(V0,"DIV",{class:!0,style:!0});var a_=re(wr);La=we(a_,"National identity (person based)"),vs=H(a_,"SPAN",{style:!0});var N0=re(vs);zl=_r(N0,!1),N0.forEach(R),a_.forEach(R),V0.forEach(R),Lf=_e(Pm),lu=H(Pm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(lu)!=="svelte-6dzbka"&&(lu.innerHTML=eh),tc=_e(Pm),qt(ca.$$.fragment,Pm),Pm.forEach(R),zm.forEach(R),Td.forEach(R),L0.forEach(R),jg.forEach(R),rc=_e(xi),Cl=H(xi,"DIV",{class:!0});var qg=re(Cl);ui=H(qg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(ui)!=="svelte-3bm0oo"&&(ui.innerHTML=dt),ha=_e(qg),_s=H(qg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var U0=re(_s);pa=H(U0,"DIV",{class:!0});var zd=re(pa);yo=we(zd,"Census 2021 - "),th=we(zd,Fn),$e=we(zd," - "),Al=H(zd,"SPAN",{class:!0,"data-svelte-h":!0}),ut(Al)!=="svelte-s8u5yo"&&(Al.textContent=Jh),Yh=_e(zd),Ri=H(zd,"DIV",{class:!0});var Mm=re(Ri);qi=H(Mm,"DIV",{class:!0});var Dm=re(qi);Ra=H(Dm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var j0=re(Ra);go=H(j0,"DIV",{class:!0,style:!0});var o_=re(go);fa=we(o_,"Main language"),Ba=H(o_,"SPAN",{style:!0});var q0=re(Ba);Qh=_r(q0,!1),q0.forEach(R),o_.forEach(R),j0.forEach(R),ep=_e(Dm),Hs=H(Dm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Hs)!=="svelte-19aojal"&&(Hs.innerHTML=Lo),Oa=_e(Dm),qt(Yt.$$.fragment,Dm),Dm.forEach(R),Ro=_e(Mm),rn=H(Mm,"DIV",{class:!0});var Lm=re(rn);ci=H(Lm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Z0=re(ci);da=H(Z0,"DIV",{class:!0,style:!0});var s_=re(da);Gs=we(s_,"Knowledge of Irish"),Qn=H(s_,"SPAN",{style:!0});var H0=re(Qn);kn=_r(H0,!1),H0.forEach(R),s_.forEach(R),Z0.forEach(R),bt=_e(Lm),ht=H(Lm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(ht)!=="svelte-18w5na9"&&(ht.innerHTML=rp),Vn=_e(Lm),qt(Nn.$$.fragment,Lm),Lm.forEach(R),fn=_e(Mm),Sn=H(Mm,"DIV",{class:!0});var Rm=re(Sn);eo=H(Rm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var G0=re(eo);vo=H(G0,"DIV",{class:!0,style:!0});var l_=re(vo);Dr=we(l_,"Knowledge of Ulster-Scots"),Ai=H(l_,"SPAN",{style:!0});var K0=re(Ai);ip=_r(K0,!1),K0.forEach(R),l_.forEach(R),G0.forEach(R),np=_e(Rm),ma=H(Rm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(ma)!=="svelte-cxxrz9"&&(ma.innerHTML=Fa),uu=_e(Rm),qt($n.$$.fragment,Rm),Rm.forEach(R),Mm.forEach(R),zd.forEach(R),U0.forEach(R),qg.forEach(R),cu=_e(xi),Bo=H(xi,"DIV",{class:!0});var Zg=re(Bo);Ks=H(Zg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(Ks)!=="svelte-58sbie"&&(Ks.innerHTML=nc),Pl=_e(Zg),Xs=H(Zg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var X0=re(Xs);Un=H(X0,"DIV",{class:!0});var Cd=re(Un);Ws=we(Cd,"Census 2021 - "),bs=we(Cd,hu),to=we(Cd," - "),Ml=H(Cd,"SPAN",{class:!0,"data-svelte-h":!0}),ut(Ml)!=="svelte-1scn1t5"&&(Ml.textContent=rh),op=_e(Cd),ya=H(Cd,"DIV",{class:!0});var Bm=re(ya);n=H(Bm,"DIV",{class:!0});var Om=re(n);s=H(Om,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var W0=re(s);a=H(W0,"DIV",{class:!0,style:!0});var u_=re(a);c=we(u_,"Religion"),m=H(u_,"SPAN",{style:!0});var J0=re(m);w=_r(J0,!1),J0.forEach(R),u_.forEach(R),W0.forEach(R),C=_e(Om),M=H(Om,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(M)!=="svelte-3t9usj"&&(M.innerHTML=N),W=_e(Om),qt(J.$$.fragment,Om),Om.forEach(R),Q=_e(Bm),se=H(Bm,"DIV",{class:!0});var Fm=re(se);ne=H(Fm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Y0=re(ne);he=H(Y0,"DIV",{class:!0,style:!0});var c_=re(he);ae=we(c_,"Religion or religion brought up in"),fe=H(c_,"SPAN",{style:!0});var Q0=re(fe);ge=_r(Q0,!1),Q0.forEach(R),c_.forEach(R),Y0.forEach(R),Be=_e(Fm),Ae=H(Fm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Ae)!=="svelte-5i2s8r"&&(Ae.innerHTML=Fe),Ze=_e(Fm),qt(Ke.$$.fragment,Fm),Fm.forEach(R),Xe=_e(Bm),it=H(Bm,"DIV",{class:!0});var Vm=re(it);mt=H(Vm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var $0=re(mt);vt=H($0,"DIV",{class:!0,style:!0});var h_=re(vt);wt=we(h_,"Ethnic group"),ar=H(h_,"SPAN",{style:!0});var e1=re(ar);ct=_r(e1,!1),e1.forEach(R),h_.forEach(R),$0.forEach(R),Qt=_e(Vm),zt=H(Vm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(zt)!=="svelte-nos8tp"&&(zt.innerHTML=Dt),Xt=_e(Vm),qt(It.$$.fragment,Vm),Vm.forEach(R),Bm.forEach(R),Cd.forEach(R),X0.forEach(R),Zg.forEach(R),Wi=_e(xi),Jr=H(xi,"DIV",{class:!0});var Hg=re(Jr);Bi=H(Hg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(Bi)!=="svelte-14q5fbi"&&(Bi.innerHTML=dn),gi=_e(Hg),ri=H(Hg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var t1=re(ri);Oi=H(t1,"DIV",{class:!0});var Ad=re(Oi);jn=we(Ad,"Census 2021 - "),qn=we(Ad,Oo),_o=we(Ad," - "),Zn=H(Ad,"SPAN",{class:!0,"data-svelte-h":!0}),ut(Zn)!=="svelte-12gvvmu"&&(Zn.textContent=ih),pu=_e(Ad),Ji=H(Ad,"DIV",{class:!0});var Sf=re(Ji);Va=H(Sf,"DIV",{class:!0});var Nm=re(Va);ga=H(Nm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var r1=re(ga);mn=H(r1,"DIV",{class:!0,style:!0});var Gg=re(mn);ac=we(Gg,"General health"),va=H(Gg,"SPAN",{style:!0});var i1=re(va);Zi=_r(i1,!1),i1.forEach(R),Js=H(Gg,"BR",{}),Gg.forEach(R),r1.forEach(R),Ll=_e(Nm),cr=H(Nm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(cr)!=="svelte-pywch"&&(cr.innerHTML=ro),ea=_e(Nm),qt(io.$$.fragment,Nm),Nm.forEach(R),Rf=_e(Sf),bo=H(Sf,"DIV",{class:!0});var Um=re(bo);Fo=H(Um,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var n1=re(Fo);Na=H(n1,"DIV",{class:!0,style:!0});var p_=re(Na);Xp=we(p_,"Long-term health problem or disability"),Vo=H(p_,"SPAN",{style:!0});var a1=re(Vo);oc=_r(a1,!1),a1.forEach(R),p_.forEach(R),n1.forEach(R),sc=_e(Um),nn=H(Um,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(nn)!=="svelte-j5baid"&&(nn.innerHTML=mg),Zd=_e(Um),qt(nh.$$.fragment,Um),Um.forEach(R),wy=_e(Sf),fu=H(Sf,"DIV",{class:!0});var jm=re(fu);Ys=H(jm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var o1=re(Ys);No=H(o1,"DIV",{class:!0,style:!0});var Kg=re(No);Ey=we(Kg,"Long-term health conditions"),du=H(Kg,"SPAN",{style:!0});var s1=re(du);Bf=_r(s1,!1),s1.forEach(R),sp=H(Kg,"BR",{}),Kg.forEach(R),o1.forEach(R),ky=_e(jm),oh=H(jm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(oh)!=="svelte-r1lad7"&&(oh.innerHTML=yg),Sy=_e(jm),qt(sh.$$.fragment,jm),jm.forEach(R),Iy=_e(Sf),mu=H(Sf,"DIV",{class:!0});var qm=re(mu);Uo=H(qm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var l1=re(Uo);Rl=H(l1,"DIV",{class:!0,style:!0});var f_=re(Rl);lh=we(f_,"Unpaid care"),lp=H(f_,"SPAN",{style:!0});var u1=re(lp);Fi=_r(u1,!1),u1.forEach(R),f_.forEach(R),l1.forEach(R),Gd=_e(qm),Bl=H(qm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Bl)!=="svelte-hrlh88"&&(Bl.innerHTML=Of),up=_e(qm),qt(lc.$$.fragment,qm),qm.forEach(R),Sf.forEach(R),Ad.forEach(R),t1.forEach(R),Hg.forEach(R),cp=_e(xi),yu=H(xi,"DIV",{class:!0});var Xg=re(yu);gu=H(Xg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(gu)!=="svelte-11n1qie"&&(gu.innerHTML=gg),hp=_e(Xg),uh=H(Xg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var c1=re(uh);xs=H(c1,"DIV",{class:!0});var Pd=re(xs);zy=we(Pd,"Census 2021 - "),Wp=we(Pd,pp),ws=we(Pd," - "),fp=H(Pd,"SPAN",{class:!0,"data-svelte-h":!0}),ut(fp)!=="svelte-1rmsexa"&&(fp.textContent=vg),Cy=_e(Pd),ta=H(Pd,"DIV",{class:!0});var ju=re(ta);Ol=H(ju,"DIV",{class:!0});var Zm=re(Ol);Ua=H(Zm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var h1=re(Ua);vu=H(h1,"DIV",{class:!0,style:!0});var d_=re(vu);Ay=we(d_,"Accommodation type"),ch=H(d_,"SPAN",{style:!0});var p1=re(ch);Ff=_r(p1,!1),p1.forEach(R),d_.forEach(R),h1.forEach(R),Py=_e(Zm),Es=H(Zm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Es)!=="svelte-129pjzf"&&(Es.innerHTML=_g),Vf=_e(Zm),qt(Qs.$$.fragment,Zm),Zm.forEach(R),ks=_e(ju),_u=H(ju,"DIV",{class:!0});var Hm=re(_u);$s=H(Hm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var f1=re($s);bu=H(f1,"DIV",{class:!0,style:!0});var m_=re(bu);dp=we(m_,"Household adaptations"),hh=H(m_,"SPAN",{style:!0});var d1=re(hh);Kd=_r(d1,!1),d1.forEach(R),m_.forEach(R),f1.forEach(R),My=_e(Hm),ph=H(Hm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(ph)!=="svelte-drn0g1"&&(ph.innerHTML=Dy),ra=_e(Hm),qt(fh.$$.fragment,Hm),Hm.forEach(R),Xd=_e(ju),Fl=H(ju,"DIV",{class:!0});var Gm=re(Fl);el=H(Gm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var m1=re(el);Vl=H(m1,"DIV",{class:!0,style:!0});var y_=re(Vl);Ly=we(y_,"Central heating"),mp=H(y_,"SPAN",{style:!0});var y1=re(mp);Wd=_r(y1,!1),y1.forEach(R),y_.forEach(R),m1.forEach(R),Ry=_e(Gm),dh=H(Gm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(dh)!=="svelte-17857y"&&(dh.innerHTML=Jp),Jd=_e(Gm),qt(uc.$$.fragment,Gm),Gm.forEach(R),Yp=_e(ju),Sr=H(ju,"DIV",{class:!0});var Km=re(Sr);Ss=H(Km,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var g1=re(Ss);_a=H(g1,"DIV",{class:!0,style:!0});var g_=re(_a);mh=we(g_,"Renewable energy systems"),yh=H(g_,"SPAN",{style:!0});var v1=re(yh);Yd=_r(v1,!1),v1.forEach(R),g_.forEach(R),g1.forEach(R),By=_e(Km),gh=H(Km,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(gh)!=="svelte-11s1iyw"&&(gh.innerHTML=xg),Oy=_e(Km),qt(vh.$$.fragment,Km),Km.forEach(R),Fy=_e(ju),xu=H(ju,"DIV",{class:!0});var Xm=re(xu);xo=H(Xm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _1=re(xo);wo=H(_1,"DIV",{class:!0,style:!0});var v_=re(wo);Qd=we(v_,"Household tenure"),yp=H(v_,"SPAN",{style:!0});var b1=re(yp);$d=_r(b1,!1),b1.forEach(R),v_.forEach(R),_1.forEach(R),em=_e(Xm),Nl=H(Xm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Nl)!=="svelte-7umjeq"&&(Nl.innerHTML=Qp),gp=_e(Xm),qt(In.$$.fragment,Xm),Xm.forEach(R),_h=_e(ju),Pi=H(ju,"DIV",{class:!0});var Wm=re(Pi);Eo=H(Wm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var x1=re(Eo);Is=H(x1,"DIV",{class:!0,style:!0});var __=re(Is);ja=we(__,"Car or van availability"),bh=H(__,"SPAN",{style:!0});var w1=re(bh);Nf=_r(w1,!1),w1.forEach(R),__.forEach(R),x1.forEach(R),tm=_e(Wm),wu=H(Wm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(wu)!=="svelte-17z5jii"&&(wu.innerHTML=rm),Vy=_e(Wm),qt(cc.$$.fragment,Wm),Wm.forEach(R),ju.forEach(R),Pd.forEach(R),c1.forEach(R),Xg.forEach(R),Uf=_e(xi),hc=H(xi,"DIV",{class:!0});var Wg=re(hc);pc=H(Wg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(pc)!=="svelte-182n7xg"&&(pc.innerHTML=wg),im=_e(Wg),fc=H(Wg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var E1=re(fc);tl=H(E1,"DIV",{class:!0});var Md=re(tl);nm=we(Md,"Census 2021 - "),am=we(Md,jf),om=we(Md," - "),xh=H(Md,"SPAN",{class:!0,"data-svelte-h":!0}),ut(xh)!=="svelte-9cncz1"&&(xh.textContent=qf),sm=_e(Md),no=H(Md,"DIV",{class:!0});var Jm=re(no);Ts=H(Jm,"DIV",{class:!0});var Ym=re(Ts);ko=H(Ym,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var k1=re(ko);So=H(k1,"DIV",{class:!0,style:!0});var b_=re(So);Ny=we(b_,"Number of dependent children"),_p=H(b_,"SPAN",{style:!0});var S1=re(_p);lm=_r(S1,!1),S1.forEach(R),b_.forEach(R),k1.forEach(R),Zf=_e(Ym),dc=H(Ym,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(dc)!=="svelte-1p8utv2"&&(dc.innerHTML=um),cm=_e(Ym),qt(mc.$$.fragment,Ym),Ym.forEach(R),Uy=_e(Jm),Eu=H(Jm,"DIV",{class:!0});var Qm=re(Eu);rl=H(Qm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var I1=re(rl);zs=H(I1,"DIV",{class:!0,style:!0});var x_=re(zs);Hf=we(x_,"Household composition"),bp=H(x_,"SPAN",{style:!0});var T1=re(bp);yc=_r(T1,!1),T1.forEach(R),x_.forEach(R),I1.forEach(R),Vr=_e(Qm),wh=H(Qm,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(wh)!=="svelte-1hyt8b2"&&(wh.innerHTML=hm),Eh=_e(Qm),qt(kh.$$.fragment,Qm),Qm.forEach(R),jy=_e(Jm),xp=H(Jm,"DIV",{class:!0,"data-svelte-h":!0}),ut(xp)!=="svelte-1dhj1ns"&&(xp.innerHTML=Eg),Jm.forEach(R),Md.forEach(R),E1.forEach(R),Wg.forEach(R),qy=_e(xi),Sh=H(xi,"DIV",{class:!0});var Jg=re(Sh);gc=H(Jg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(gc)!=="svelte-v9w89t"&&(gc.innerHTML=Zy),pm=_e(Jg),vc=H(Jg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var z1=re(vc);jo=H(z1,"DIV",{class:!0});var Dd=re(jo);_c=we(Dd,"Census 2021 - "),bc=we(Dd,wp),fm=we(Dd," - "),vi=H(Dd,"SPAN",{class:!0,"data-svelte-h":!0}),ut(vi)!=="svelte-1ba14d2"&&(vi.textContent=mi),dm=_e(Dd),qo=H(Dd,"DIV",{class:!0});var $m=re(qo);Ul=H($m,"DIV",{class:!0});var ey=re(Ul);Cs=H(ey,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var C1=re(Cs);il=H(C1,"DIV",{class:!0,style:!0});var w_=re(il);Kf=we(w_,"Marital and civil partnership status"),As=H(w_,"SPAN",{style:!0});var A1=re(As);ku=_r(A1,!1),A1.forEach(R),w_.forEach(R),C1.forEach(R),Hi=_e(ey),nl=H(ey,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(nl)!=="svelte-1b2nzgd"&&(nl.innerHTML=Su),ef=_e(ey),qt(jl.$$.fragment,ey),ey.forEach(R),Xf=_e($m),al=H($m,"DIV",{class:!0,"data-svelte-h":!0}),ut(al)!=="svelte-y1srpz"&&(al.innerHTML=Iu),mm=_e($m),Ih=H($m,"DIV",{class:!0,"data-svelte-h":!0}),ut(Ih)!=="svelte-y1srpz"&&(Ih.innerHTML=Ig),$m.forEach(R),Dd.forEach(R),z1.forEach(R),Jg.forEach(R),Tu=_e(xi),xc=H(xi,"DIV",{class:!0});var Yg=re(xc);e=H(Yg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(e)!=="svelte-8tnuul"&&(e.innerHTML=t),i=_e(Yg),l=H(Yg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var P1=re(l);p=H(P1,"DIV",{class:!0});var Ld=re(p);d=we(Ld,"Census 2021 - "),k=we(Ld,v),A=we(Ld," - "),P=H(Ld,"SPAN",{class:!0,"data-svelte-h":!0}),ut(P)!=="svelte-s97k7u"&&(P.textContent=L),O=_e(Ld),U=H(Ld,"DIV",{class:!0});var ty=re(U);X=H(ty,"DIV",{class:!0});var ry=re(X);ie=H(ry,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M1=re(ie);oe=H(M1,"DIV",{class:!0,style:!0});var E_=re(oe);de=we(E_,"Sexual orientation"),ce=H(E_,"SPAN",{style:!0});var D1=re(ce);be=_r(D1,!1),D1.forEach(R),E_.forEach(R),M1.forEach(R),Pe=_e(ry),Me=H(ry,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Me)!=="svelte-1av8x0f"&&(Me.innerHTML=Ne),Ge=_e(ry),qt(We.$$.fragment,ry),ry.forEach(R),_t=_e(ty),nt=H(ty,"DIV",{class:!0,"data-svelte-h":!0}),ut(nt)!=="svelte-3dfjxf"&&(nt.innerHTML=xt),lt=_e(ty),Ut=H(ty,"DIV",{class:!0,"data-svelte-h":!0}),ut(Ut)!=="svelte-3dfjxf"&&(Ut.innerHTML=Pt),ty.forEach(R),Ld.forEach(R),P1.forEach(R),Yg.forEach(R),ir=_e(xi),Bt=H(xi,"DIV",{class:!0});var Qg=re(Bt);nr=H(Qg,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(nr)!=="svelte-k5bl33"&&(nr.innerHTML=Et),Er=_e(Qg),Nr=H(Qg,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var L1=re(Nr);Ur=H(L1,"DIV",{class:!0});var Rd=re(Ur);_i=we(Rd,"Census 2021 - "),bi=we(Rd,Yr),Yi=we(Rd," - "),Si=H(Rd,"SPAN",{class:!0,"data-svelte-h":!0}),ut(Si)!=="svelte-dtxfkp"&&(Si.textContent=ia),an=_e(Rd),Gr=H(Rd,"DIV",{class:!0});var Vh=re(Gr);Kr=H(Vh,"DIV",{class:!0});var iy=re(Kr);ii=H(iy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var R1=re(ii);Wt=H(R1,"DIV",{class:!0,style:!0});var k_=re(Wt);jr=we(k_,"Highest level of qualifications"),kr=H(k_,"SPAN",{style:!0});var B1=re(kr);fr=_r(B1,!1),B1.forEach(R),k_.forEach(R),R1.forEach(R),Tn=_e(iy),Or=H(iy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Or)!=="svelte-8t58la"&&(Or.innerHTML=Gi),zn=_e(iy),qt(or.$$.fragment,iy),iy.forEach(R),ol=_e(Vh),on=H(Vh,"DIV",{class:!0});var ny=re(on);Cn=H(ny,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var O1=re(Cn);Xr=H(O1,"DIV",{class:!0,style:!0});var S_=re(Xr);sl=we(S_,"Economic activity"),ba=H(S_,"SPAN",{style:!0});var F1=re(ba);wc=_r(F1,!1),F1.forEach(R),S_.forEach(R),O1.forEach(R),Th=_e(ny),ao=H(ny,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(ao)!=="svelte-122c13z"&&(ao.innerHTML=kp),tf=_e(ny),qt(Ps.$$.fragment,ny),ny.forEach(R),Sp=_e(Vh),Ms=H(Vh,"DIV",{class:!0});var ay=re(Ms);Io=H(ay,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var V1=re(Io);xa=H(V1,"DIV",{class:!0,style:!0});var I_=re(xa);Ip=we(I_,"Hours worked per week"),ll=H(I_,"SPAN",{style:!0});var N1=re(ll);ql=_r(N1,!1),N1.forEach(R),I_.forEach(R),V1.forEach(R),nf=_e(ay),Zl=H(ay,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Zl)!=="svelte-xafzt1"&&(Zl.innerHTML=af),Tp=_e(ay),qt(Hl.$$.fragment,ay),ay.forEach(R),zp=_e(Vh),Zo=H(Vh,"DIV",{class:!0});var oy=re(Zo);oo=H(oy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var U1=re(oo);Ds=H(U1,"DIV",{class:!0,style:!0});var T_=re(Ds);zh=we(T_,"Industry of employment"),zu=H(T_,"SPAN",{style:!0});var j1=re(zu);Ec=_r(j1,!1),j1.forEach(R),T_.forEach(R),U1.forEach(R),kc=_e(oy),ul=H(oy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(ul)!=="svelte-oyed92"&&(ul.innerHTML=Cp),Jf=_e(oy),qt(Sc.$$.fragment,oy),oy.forEach(R),Yf=_e(Vh),Gl=H(Vh,"DIV",{class:!0});var sy=re(Gl);Ho=H(sy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var q1=re(Ho);Cu=H(q1,"DIV",{class:!0,style:!0});var z_=re(Cu);Ap=we(z_,"Occupation"),hi=H(z_,"SPAN",{style:!0});var Z1=re(hi);Go=_r(Z1,!1),Z1.forEach(R),z_.forEach(R),q1.forEach(R),Au=_e(sy),Pu=H(sy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Pu)!=="svelte-tloqfr"&&(Pu.innerHTML=Hy),of=_e(sy),qt(Za.$$.fragment,sy),sy.forEach(R),Vh.forEach(R),Rd.forEach(R),L1.forEach(R),Qg.forEach(R),Pp=_e(xi),Kl=H(xi,"DIV",{class:!0});var $g=re(Kl);Xl=H($g,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(Xl)!=="svelte-1phtcno"&&(Xl.innerHTML=ym),gm=_e($g),cl=H($g,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var H1=re(cl);hl=H(H1,"DIV",{class:!0});var Bd=re(hl);vm=we(Bd,"Census 2021 - "),$f=we(Bd,sf),_m=we(Bd," - "),Hn=H(Bd,"SPAN",{class:!0,"data-svelte-h":!0}),ut(Hn)!=="svelte-n5hue9"&&(Hn.textContent=ed),bm=_e(Bd),Vi=H(Bd,"DIV",{class:!0});var Nh=re(Vi);Mu=H(Nh,"DIV",{class:!0});var ly=re(Mu);Ls=H(ly,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var G1=re(Ls);so=H(G1,"DIV",{class:!0,style:!0});var C_=re(so);Ch=we(C_,"Method of travel to work"),pl=H(C_,"SPAN",{style:!0});var K1=re(pl);Ic=_r(K1,!1),K1.forEach(R),C_.forEach(R),G1.forEach(R),xm=_e(ly),Tc=H(ly,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Tc)!=="svelte-yykpk7"&&(Tc.innerHTML=Gy),wm=_e(ly),qt(Du.$$.fragment,ly),ly.forEach(R),td=_e(Nh),wa=H(Nh,"DIV",{class:!0});var uy=re(wa);Rs=H(uy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var X1=re(Rs);fl=H(X1,"DIV",{class:!0,style:!0});var A_=re(fl);rd=we(A_,"Method of travel to study"),Ah=H(A_,"SPAN",{style:!0});var W1=re(Ah);uf=_r(W1,!1),W1.forEach(R),A_.forEach(R),X1.forEach(R),Em=_e(uy),Lu=H(uy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Lu)!=="svelte-om3c95"&&(Lu.innerHTML=Ky),Mp=_e(uy),qt(zc.$$.fragment,uy),uy.forEach(R),cf=_e(Nh),Dp=H(Nh,"DIV",{class:!0,"data-svelte-h":!0}),ut(Dp)!=="svelte-1bvgzuw"&&(Dp.innerHTML=Xy),Wy=_e(Nh),Ru=H(Nh,"DIV",{class:!0});var cy=re(Ru);dl=H(cy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var J1=re(dl);Bu=H(J1,"DIV",{class:!0,style:!0});var P_=re(Bu);Jy=we(P_,"Distance to place of work"),Lp=H(P_,"SPAN",{style:!0});var Y1=re(Lp);km=_r(Y1,!1),Y1.forEach(R),P_.forEach(R),J1.forEach(R),ml=_e(cy),Wl=H(cy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(Wl)!=="svelte-1bblmim"&&(Wl.innerHTML=Yy),Rp=_e(cy),qt(Cc.$$.fragment,cy),cy.forEach(R),Bv=_e(Nh),Ph=H(Nh,"DIV",{class:!0});var hy=re(Ph);Ou=H(hy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Q1=re(Ou);Mh=H(Q1,"DIV",{class:!0,style:!0});var M_=re(Mh);Ov=we(M_,"Distance to place of study"),id=H(M_,"SPAN",{style:!0});var $1=re(id);zg=_r($1,!1),$1.forEach(R),M_.forEach(R),Q1.forEach(R),Fv=_e(hy),hf=H(hy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(hf)!=="svelte-1k5l2u"&&(hf.innerHTML=s0),Vv=_e(hy),qt(pf.$$.fragment,hy),hy.forEach(R),Nh.forEach(R),Bd.forEach(R),H1.forEach(R),$g.forEach(R),Nv=_e(xi),ff=H(xi,"DIV",{class:!0});var ev=re(ff);df=H(ev,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ut(df)!=="svelte-s3q4h3"&&(df.innerHTML=u0),Uv=_e(ev),mf=H(ev,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var eb=re(mf);Ac=H(eb,"DIV",{class:!0});var Od=re(Ac);jv=we(Od,"Census 2021 - "),Cg=we(Od,Qy),qv=we(Od," - "),nd=H(Od,"SPAN",{class:!0,"data-svelte-h":!0}),ut(nd)!=="svelte-lbi44"&&(nd.textContent=c0),Zv=_e(Od),Jl=H(Od,"DIV",{class:!0});var py=re(Jl);Dh=H(py,"DIV",{class:!0});var fy=re(Dh);Fu=H(fy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var tb=re(Fu);Lh=H(tb,"DIV",{class:!0,style:!0});var D_=re(Lh);Hv=we(D_,"Address one year ago"),ad=H(D_,"SPAN",{style:!0});var rb=re(ad);Ag=_r(rb,!1),rb.forEach(R),D_.forEach(R),tb.forEach(R),Gv=_e(fy),yf=H(fy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(yf)!=="svelte-1waq3x"&&(yf.innerHTML=h0),Kv=_e(fy),qt(gf.$$.fragment,fy),fy.forEach(R),Xv=_e(py),Rh=H(py,"DIV",{class:!0});var dy=re(Rh);Vu=H(dy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ib=re(Vu);Bh=H(ib,"DIV",{class:!0,style:!0});var L_=re(Bh);Wv=we(L_,"Year of arrival to live in NI"),od=H(L_,"SPAN",{style:!0});var nb=re(od);Pg=_r(nb,!1),nb.forEach(R),L_.forEach(R),ib.forEach(R),Jv=_e(dy),vf=H(dy,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),ut(vf)!=="svelte-twjov2"&&(vf.innerHTML=p0),Yv=_e(dy),qt(_f.$$.fragment,dy),dy.forEach(R),Qv=_e(py),sd=H(py,"DIV",{class:!0,"data-svelte-h":!0}),ut(sd)!=="svelte-3dfjxf"&&(sd.innerHTML=f0),py.forEach(R),Od.forEach(R),eb.forEach(R),ev.forEach(R),xi.forEach(R),this.h()},h(){S(_,"href",qh+"/"),S(_,"data-sveltekit-noscroll",""),S(_,"data-sveltekit-keepfocus",""),S(_,"class","svelte-17c2th3"),o.a=I,S(y,"class","text-small"),S(F,"class","text-big title svelte-17c2th3"),S(Se,"class","text-bold"),ee(Se,"font-size","0.85em"),S(ot,"width","100%"),ee(Qe,"width","350px"),ee(Qe,"padding-top","5px"),S(Qe,"class","svelte-17c2th3"),Ii(Qe,"float-right",u[5]>1),S(h,"class","grid mtl svelte-17c2th3"),ee(wi,"margin","0 0 10px 0"),ee(wi,"line-height","1.78"),S(wi,"class","svelte-17c2th3"),S(dr,"class","div-grey-box svelte-17c2th3"),ee(dr,"line-height","1.3"),Pn.a=null,ee(hr,"color","#6E6E6E"),ee(hr,"font-size","14pt"),S($r,"class","blocktitle"),ee($r,"margin","0"),ee($r,"width","100%"),S(_n,"class","row"),ee(_n,"display","flex"),ee(_n,"cursor","pointer"),S(_n,"data-bs-toggle","collapse"),S(_n,"data-bs-target","#pop-info"),S(_n,"aria-expanded","false"),S(_n,"aria-controls","pop-info"),S(Vt,"class","collapse svelte-17c2th3"),S(Vt,"id","pop-info"),S(pr,"class","text-big"),ee(pr,"font-size","2.8em"),S(ni,"class","div-grey-box svelte-17c2th3"),Dn.a=null,ee(Ki,"color","#6E6E6E"),ee(Ki,"font-size","14pt"),S(tr,"class","blocktitle"),ee(tr,"margin","0"),ee(tr,"width","100%"),S(Pr,"class","row"),ee(Pr,"display","flex"),ee(Pr,"cursor","pointer"),S(Pr,"data-bs-toggle","collapse"),S(Pr,"data-bs-target","#households-info"),S(Pr,"aria-expanded","false"),S(Pr,"aria-controls","households-info"),S(Ln,"class","collapse svelte-17c2th3"),S(Ln,"id","households-info"),S(aa,"class","text-big"),ee(aa,"font-size","2.8em"),S(mr,"class","div-grey-box svelte-17c2th3"),S(Ar,"id","grid"),S(Ar,"class","grid mt svelte-17c2th3"),S(Kn,"class","svelte-17c2th3"),ee(cn,"grid-column","span "+u[5]),S(br,"id","map"),ee(br,"padding-right","45px"),ee(br,"grid-column","span "+(u[5]==2?2:u[5]&&u[5]>2?u[5]-1:1)),S(br,"class","svelte-17c2th3"),S(ai,"class","grid mt svelte-17c2th3"),$o(()=>u[31].call(ai)),S(Ue,"class","accordion-header svelte-17c2th3"),S(Ue,"id","panelsStayOpen-headingZero"),S(Ye,"class","accordion-button-title-sub"),lr.a=null,ee(di,"color","#6E6E6E"),ee(di,"font-size","14pt"),S(Jt,"class","blocktitle"),ee(Jt,"margin","0"),ee(Jt,"width","100%"),S(At,"class","row"),ee(At,"display","flex"),ee(At,"cursor","pointer"),S(At,"data-bs-toggle","collapse"),S(At,"data-bs-target","#location-info"),S(At,"aria-expanded","false"),S(At,"aria-controls","location-info"),S(Nt,"class","collapse svelte-17c2th3"),S(Nt,"id","location-info"),S($t,"class","div-grey-box svelte-17c2th3"),ee($t,"line-height","1.3"),Di.a=null,ee(sa,"color","#6E6E6E"),ee(sa,"font-size","14pt"),S(xn,"class","blocktitle"),ee(xn,"margin","0"),ee(xn,"width","100%"),S(bn,"class","row"),ee(bn,"display","flex"),ee(bn,"cursor","pointer"),S(bn,"data-bs-toggle","collapse"),S(bn,"data-bs-target","#Area-info"),S(bn,"aria-expanded","false"),S(bn,"aria-controls","Area-info"),S(xr,"class","collapse svelte-17c2th3"),S(xr,"id","Area-info"),S(Ao,"class","text-big"),ee(Ao,"font-size","2.8em"),S(si,"class","div-grey-box svelte-17c2th3"),Fs.a=null,ee(vl,"color","#6E6E6E"),ee(vl,"font-size","14pt"),S(En,"class","blocktitle"),ee(En,"margin","0"),ee(En,"width","100%"),S(ti,"class","row"),ee(ti,"display","flex"),ee(ti,"cursor","pointer"),S(ti,"data-bs-toggle","collapse"),S(ti,"data-bs-target","#popden-info"),S(ti,"aria-expanded","false"),S(ti,"aria-controls","popden-info"),S(Vs,"class","collapse svelte-17c2th3"),S(Vs,"id","popden-info"),S(Xa,"class","text-big"),ee(Xa,"font-size","2.8em"),S(zi,"class","div-grey-box svelte-17c2th3"),S(Rt,"class","grid mt svelte-17c2th3"),$o(()=>u[32].call(Rt)),S(at,"class","accordion-body"),S(qe,"id","panelsStayOpen-collapseZero"),S(qe,"class","accordion-collapse collapse svelte-17c2th3"),S(qe,"aria-labelledby","panelsStayOpen-headingZero"),S(ke,"class","accordion-item"),S(Ee,"class","accordion-header svelte-17c2th3"),S(Ee,"id","panelsStayOpen-headingOne"),S(Xu,"class","accordion-button-title-sub"),tu.a=null,ee(Wu,"color","#6E6E6E"),ee(Wu,"font-size","14pt"),S(os,"class","blocktitle"),ee(os,"margin","0"),ee(os,"width","100%"),S(Wa,"class","row"),ee(Wa,"display","flex"),ee(Wa,"cursor","pointer"),S(Wa,"data-bs-toggle","collapse"),S(Wa,"data-bs-target","#broadagebands-info"),S(Wa,"aria-expanded","false"),S(Wa,"aria-controls","broadagebands-info"),S(Ci,"class","collapse svelte-17c2th3"),S(Ci,"id","broadagebands-info"),S(Da,"class","chart svelte-17c2th3"),ee(Da,"height","100px"),ee(Da,"padding-bottom","5px"),S(Wn,"class","div-grey-box svelte-17c2th3"),S(us,"class","blocktitle"),ee(us,"margin","0"),ee(us,"width","100%"),S(El,"class","div-grey-box svelte-17c2th3"),qs.a=null,ee(Qa,"color","#6E6E6E"),ee(Qa,"font-size","14pt"),S(ps,"class","blocktitle"),ee(ps,"margin","0"),ee(ps,"width","100%"),S(po,"class","row"),ee(po,"display","flex"),ee(po,"cursor","pointer"),S(po,"data-bs-toggle","collapse"),S(po,"data-bs-target","#hhsize-info"),S(po,"aria-expanded","false"),S(po,"aria-controls","hhsize-info"),S(Zs,"class","collapse svelte-17c2th3"),S(Zs,"id","hhsize-info"),S(hs,"class","div-grey-box svelte-17c2th3"),S(Ma,"class","grid mt svelte-17c2th3"),$o(()=>u[33].call(Ma)),S(hn,"class","accordion-body"),S(Br,"id","panelsStayOpen-collapseOne"),S(Br,"class","accordion-collapse collapse svelte-17c2th3"),S(Br,"aria-labelledby","panelsStayOpen-headingOne"),S(Xn,"class","accordion-item"),S(Mr,"class","accordion-header svelte-17c2th3"),S(Mr,"id","panelsStayOpen-headingTwo"),S(fs,"class","accordion-button-title-sub"),Xh.a=null,ee(au,"color","#6E6E6E"),ee(au,"font-size","14pt"),S(pn,"class","blocktitle"),ee(pn,"margin","0"),ee(pn,"width","100%"),S(Jn,"class","row"),ee(Jn,"display","flex"),ee(Jn,"cursor","pointer"),S(Jn,"data-bs-toggle","collapse"),S(Jn,"data-bs-target","#cob-info"),S(Jn,"aria-expanded","false"),S(Jn,"aria-controls","cob-info"),S(ms,"class","collapse svelte-17c2th3"),S(ms,"id","cob-info"),S(ds,"class","div-grey-box svelte-17c2th3"),$c.a=null,ee(Sl,"color","#6E6E6E"),ee(Sl,"font-size","14pt"),S(ys,"class","blocktitle"),ee(ys,"margin","0"),ee(ys,"width","100%"),S(mo,"class","row"),ee(mo,"display","flex"),ee(mo,"cursor","pointer"),S(mo,"data-bs-toggle","collapse"),S(mo,"data-bs-target","#passport-info"),S(mo,"aria-expanded","false"),S(mo,"aria-controls","passport-info"),S(Il,"class","collapse svelte-17c2th3"),S(Il,"id","passport-info"),S(Do,"class","div-grey-box svelte-17c2th3"),zl.a=null,ee(vs,"color","#6E6E6E"),ee(vs,"font-size","14pt"),S(wr,"class","blocktitle"),ee(wr,"font-size","1.02em"),ee(wr,"margin","0"),ee(wr,"width","100%"),S(Kt,"class","row"),ee(Kt,"display","flex"),ee(Kt,"cursor","pointer"),S(Kt,"data-bs-toggle","collapse"),S(Kt,"data-bs-target","#natid-info"),S(Kt,"aria-expanded","false"),S(Kt,"aria-controls","natid-info"),S(lu,"class","collapse svelte-17c2th3"),S(lu,"id","natid-info"),S(Yn,"class","div-grey-box svelte-17c2th3"),S(On,"class","grid mt svelte-17c2th3"),$o(()=>u[34].call(On)),S(Mo,"class","accordion-body"),S(fo,"id","panelsStayOpen-collapseTwo"),S(fo,"class","accordion-collapse collapse svelte-17c2th3"),S(fo,"aria-labelledby","panelsStayOpen-headingTwo"),S(Po,"class","accordion-item"),S(ui,"class","accordion-header svelte-17c2th3"),S(ui,"id","panelsStayOpen-headingThree"),S(Al,"class","accordion-button-title-sub"),Qh.a=null,ee(Ba,"color","#6E6E6E"),ee(Ba,"font-size","14pt"),S(go,"class","blocktitle"),ee(go,"margin","0"),ee(go,"width","100%"),S(Ra,"class","row"),ee(Ra,"display","flex"),ee(Ra,"cursor","pointer"),S(Ra,"data-bs-toggle","collapse"),S(Ra,"data-bs-target","#mainlang-info"),S(Ra,"aria-expanded","false"),S(Ra,"aria-controls","mainlang-info"),S(Hs,"class","collapse svelte-17c2th3"),S(Hs,"id","mainlang-info"),S(qi,"class","div-grey-box svelte-17c2th3"),kn.a=null,ee(Qn,"color","#6E6E6E"),ee(Qn,"font-size","14pt"),S(da,"class","blocktitle"),ee(da,"margin","0"),ee(da,"width","100%"),S(ci,"class","row"),ee(ci,"display","flex"),ee(ci,"cursor","pointer"),S(ci,"data-bs-toggle","collapse"),S(ci,"data-bs-target","#irish-info"),S(ci,"aria-expanded","false"),S(ci,"aria-controls","irish-info"),S(ht,"class","collapse svelte-17c2th3"),S(ht,"id","irish-info"),S(rn,"class","div-grey-box svelte-17c2th3"),ip.a=null,ee(Ai,"color","#6E6E6E"),ee(Ai,"font-size","14pt"),S(vo,"class","blocktitle"),ee(vo,"margin","0"),ee(vo,"width","100%"),S(eo,"class","row"),ee(eo,"display","flex"),ee(eo,"cursor","pointer"),S(eo,"data-bs-toggle","collapse"),S(eo,"data-bs-target","#ulster-info"),S(eo,"aria-expanded","false"),S(eo,"aria-controls","ulster-info"),S(ma,"class","collapse svelte-17c2th3"),S(ma,"id","ulster-info"),S(Sn,"class","div-grey-box svelte-17c2th3"),S(Ri,"class","grid mt svelte-17c2th3"),$o(()=>u[35].call(Ri)),S(pa,"class","accordion-body"),S(_s,"id","panelsStayOpen-collapseThree"),S(_s,"class","accordion-collapse collapse svelte-17c2th3"),S(_s,"aria-labelledby","panelsStayOpen-headingThree"),S(Cl,"class","accordion-item"),S(Ks,"class","accordion-header svelte-17c2th3"),S(Ks,"id","panelsStayOpen-headingFour"),S(Ml,"class","accordion-button-title-sub"),w.a=null,ee(m,"color","#6E6E6E"),ee(m,"font-size","14pt"),S(a,"class","blocktitle"),ee(a,"margin","0"),ee(a,"width","100%"),S(s,"class","row"),ee(s,"display","flex"),ee(s,"cursor","pointer"),S(s,"data-bs-toggle","collapse"),S(s,"data-bs-target","#rel-info"),S(s,"aria-expanded","false"),S(s,"aria-controls","rel-info"),S(M,"class","collapse svelte-17c2th3"),S(M,"id","rel-info"),S(n,"class","div-grey-box svelte-17c2th3"),ge.a=null,ee(fe,"color","#6E6E6E"),ee(fe,"font-size","14pt"),S(he,"class","blocktitle"),ee(he,"margin","0"),ee(he,"width","100%"),S(ne,"class","row"),ee(ne,"display","flex"),ee(ne,"cursor","pointer"),S(ne,"data-bs-toggle","collapse"),S(ne,"data-bs-target","#relbup-info"),S(ne,"aria-expanded","false"),S(ne,"aria-controls","relbup-info"),S(Ae,"class","collapse svelte-17c2th3"),S(Ae,"id","relbup-info"),S(se,"class","div-grey-box svelte-17c2th3"),ct.a=null,ee(ar,"color","#6E6E6E"),ee(ar,"font-size","14pt"),S(vt,"class","blocktitle"),ee(vt,"margin","0"),ee(vt,"width","100%"),S(mt,"class","row"),ee(mt,"display","flex"),ee(mt,"cursor","pointer"),S(mt,"data-bs-toggle","collapse"),S(mt,"data-bs-target","#ethnic-info"),S(mt,"aria-expanded","false"),S(mt,"aria-controls","ethnic-info"),S(zt,"class","collapse svelte-17c2th3"),S(zt,"id","ethnic-info"),S(it,"class","div-grey-box svelte-17c2th3"),S(ya,"class","grid mt svelte-17c2th3"),$o(()=>u[36].call(ya)),S(Un,"class","accordion-body"),S(Xs,"id","panelsStayOpen-collapseFour"),S(Xs,"class","accordion-collapse collapse svelte-17c2th3"),S(Xs,"aria-labelledby","panelsStayOpen-headingFour"),S(Bo,"class","accordion-item"),S(Bi,"class","accordion-header svelte-17c2th3"),S(Bi,"id","panelsStayOpen-headingFive"),S(Zn,"class","accordion-button-title-sub"),Zi.a=null,ee(va,"color","#6E6E6E"),ee(va,"font-size","14pt"),S(mn,"class","blocktitle"),ee(mn,"margin","0"),ee(mn,"width","100%"),S(ga,"class","row"),ee(ga,"display","flex"),ee(ga,"cursor","pointer"),S(ga,"data-bs-toggle","collapse"),S(ga,"data-bs-target","#gen-health-info"),S(ga,"aria-expanded","false"),S(ga,"aria-controls","gen-health"),S(cr,"class","collapse svelte-17c2th3"),S(cr,"id","gen-health-info"),S(Va,"class","div-grey-box svelte-17c2th3"),oc.a=null,ee(Vo,"color","#6E6E6E"),ee(Vo,"font-size","14pt"),S(Na,"class","blocktitle"),ee(Na,"font-size","0.87em"),ee(Na,"margin","0"),ee(Na,"width","100%"),S(Fo,"class","row"),ee(Fo,"display","flex"),ee(Fo,"cursor","pointer"),S(Fo,"data-bs-toggle","collapse"),S(Fo,"data-bs-target","#lti-info"),S(Fo,"aria-expanded","false"),S(Fo,"aria-controls","lti-info"),S(nn,"class","collapse svelte-17c2th3"),S(nn,"id","lti-info"),S(bo,"class","div-grey-box svelte-17c2th3"),Bf.a=null,ee(du,"color","#6E6E6E"),ee(du,"font-size","14pt"),S(No,"class","blocktitle"),ee(No,"font-size","1.02em"),ee(No,"margin","0"),ee(No,"width","100%"),S(Ys,"class","row"),ee(Ys,"display","flex"),ee(Ys,"cursor","pointer"),S(Ys,"data-bs-toggle","collapse"),S(Ys,"data-bs-target","#lt-cond-info"),S(Ys,"aria-expanded","false"),S(Ys,"aria-controls","lt-cond-info"),S(oh,"class","collapse svelte-17c2th3"),S(oh,"id","lt-cond-info"),S(fu,"class","div-grey-box svelte-17c2th3"),Fi.a=null,ee(lp,"color","#6E6E6E"),ee(lp,"font-size","14pt"),S(Rl,"class","blocktitle"),ee(Rl,"font-size","1.02em"),ee(Rl,"margin","0"),ee(Rl,"width","100%"),S(Uo,"class","row"),ee(Uo,"display","flex"),ee(Uo,"cursor","pointer"),S(Uo,"data-bs-toggle","collapse"),S(Uo,"data-bs-target","#unpaid-info"),S(Uo,"aria-expanded","false"),S(Uo,"aria-controls","unpaid-info"),S(Bl,"class","collapse svelte-17c2th3"),S(Bl,"id","unpaid-info"),S(mu,"class","div-grey-box svelte-17c2th3"),S(Ji,"class","grid mt svelte-17c2th3"),$o(()=>u[37].call(Ji)),S(Oi,"class","accordion-body"),S(ri,"id","panelsStayOpen-collapseFive"),S(ri,"class","accordion-collapse collapse svelte-17c2th3"),S(ri,"aria-labelledby","panelsStayOpen-headingFive"),S(Jr,"class","accordion-item"),S(gu,"class","accordion-header svelte-17c2th3"),S(gu,"id","panelsStayOpen-headingSix"),S(fp,"class","accordion-button-title-sub"),Ff.a=null,ee(ch,"color","#6E6E6E"),ee(ch,"font-size","14pt"),S(vu,"class","blocktitle"),ee(vu,"margin","0"),ee(vu,"width","100%"),S(Ua,"class","row"),ee(Ua,"display","flex"),ee(Ua,"cursor","pointer"),S(Ua,"data-bs-toggle","collapse"),S(Ua,"data-bs-target","#acc-type-info"),S(Ua,"aria-expanded","false"),S(Ua,"aria-controls","acc-type-info"),S(Es,"class","collapse svelte-17c2th3"),S(Es,"id","acc-type-info"),S(Ol,"class","div-grey-box svelte-17c2th3"),Kd.a=null,ee(hh,"color","#6E6E6E"),ee(hh,"font-size","14pt"),S(bu,"class","blocktitle"),ee(bu,"margin","0"),ee(bu,"width","100%"),S($s,"class","row"),ee($s,"display","flex"),ee($s,"cursor","pointer"),S($s,"data-bs-toggle","collapse"),S($s,"data-bs-target","#adapt-info"),S($s,"aria-expanded","false"),S($s,"aria-controls","adapt-info"),S(ph,"class","collapse svelte-17c2th3"),S(ph,"id","adapt-info"),S(_u,"class","div-grey-box svelte-17c2th3"),Wd.a=null,ee(mp,"color","#6E6E6E"),ee(mp,"font-size","14pt"),S(Vl,"class","blocktitle"),ee(Vl,"margin","0"),ee(Vl,"width","100%"),S(el,"class","row"),ee(el,"display","flex"),ee(el,"cursor","pointer"),S(el,"data-bs-toggle","collapse"),S(el,"data-bs-target","#heat-info"),S(el,"aria-expanded","false"),S(el,"aria-controls","heat-info"),S(dh,"class","collapse svelte-17c2th3"),S(dh,"id","heat-info"),S(Fl,"class","div-grey-box svelte-17c2th3"),Yd.a=null,ee(yh,"color","#6E6E6E"),ee(yh,"font-size","14pt"),S(_a,"class","blocktitle"),ee(_a,"margin","0"),ee(_a,"width","100%"),S(Ss,"class","row"),ee(Ss,"display","flex"),ee(Ss,"cursor","pointer"),S(Ss,"data-bs-toggle","collapse"),S(Ss,"data-bs-target","#renew-info"),S(Ss,"aria-expanded","false"),S(Ss,"aria-controls","renew-info"),S(gh,"class","collapse svelte-17c2th3"),S(gh,"id","renew-info"),S(Sr,"class","div-grey-box svelte-17c2th3"),$d.a=null,ee(yp,"color","#6E6E6E"),ee(yp,"font-size","14pt"),S(wo,"class","blocktitle"),ee(wo,"margin","0"),ee(wo,"width","100%"),S(xo,"class","row"),ee(xo,"display","flex"),ee(xo,"cursor","pointer"),S(xo,"data-bs-toggle","collapse"),S(xo,"data-bs-target","#tenure-info"),S(xo,"aria-expanded","false"),S(xo,"aria-controls","tenure-info"),S(Nl,"class","collapse svelte-17c2th3"),S(Nl,"id","tenure-info"),S(xu,"class","div-grey-box svelte-17c2th3"),Nf.a=null,ee(bh,"color","#6E6E6E"),ee(bh,"font-size","14pt"),S(Is,"class","blocktitle"),ee(Is,"margin","0"),ee(Is,"width","100%"),S(Eo,"class","row"),ee(Eo,"display","flex"),ee(Eo,"cursor","pointer"),S(Eo,"data-bs-toggle","collapse"),S(Eo,"data-bs-target","#car-info"),S(Eo,"aria-expanded","false"),S(Eo,"aria-controls","car-info"),S(wu,"class","collapse svelte-17c2th3"),S(wu,"id","car-info"),S(Pi,"class","div-grey-box svelte-17c2th3"),S(ta,"class","grid mt svelte-17c2th3"),$o(()=>u[38].call(ta)),S(xs,"class","accordion-body"),S(uh,"id","panelsStayOpen-collapseSix"),S(uh,"class","accordion-collapse collapse svelte-17c2th3"),S(uh,"aria-labelledby","panelsStayOpen-headingSix"),S(yu,"class","accordion-item"),S(pc,"class","accordion-header svelte-17c2th3"),S(pc,"id","panelsStayOpen-headingSeven"),S(xh,"class","accordion-button-title-sub"),lm.a=null,ee(_p,"color","#6E6E6E"),ee(_p,"font-size","14pt"),S(So,"class","blocktitle"),ee(So,"margin","0"),ee(So,"width","100%"),S(ko,"class","row"),ee(ko,"display","flex"),ee(ko,"cursor","pointer"),S(ko,"data-bs-toggle","collapse"),S(ko,"data-bs-target","#dep-child-info"),S(ko,"aria-expanded","false"),S(ko,"aria-controls","dep-child-info"),S(dc,"class","collapse svelte-17c2th3"),S(dc,"id","dep-child-info"),S(Ts,"class","div-grey-box svelte-17c2th3"),yc.a=null,ee(bp,"color","#6E6E6E"),ee(bp,"font-size","14pt"),S(zs,"class","blocktitle"),ee(zs,"margin","0"),ee(zs,"width","100%"),S(rl,"class","row"),ee(rl,"display","flex"),ee(rl,"cursor","pointer"),S(rl,"data-bs-toggle","collapse"),S(rl,"data-bs-target","#hh-comp-info"),S(rl,"aria-expanded","false"),S(rl,"aria-controls","hh-comp-info"),S(wh,"class","collapse svelte-17c2th3"),S(wh,"id","hh-comp-info"),S(Eu,"class","div-grey-box svelte-17c2th3"),S(xp,"class","div-white-box"),S(no,"class","grid mt svelte-17c2th3"),$o(()=>u[39].call(no)),S(tl,"class","accordion-body"),S(fc,"id","panelsStayOpen-collapseSeven"),S(fc,"class","accordion-collapse collapse svelte-17c2th3"),S(fc,"aria-labelledby","panelsStayOpen-headingSeven"),S(hc,"class","accordion-item"),S(gc,"class","accordion-header svelte-17c2th3"),S(gc,"id","panelsStayOpen-headingEight"),S(vi,"class","accordion-button-title-sub"),ku.a=null,ee(As,"color","#6E6E6E"),ee(As,"font-size","14pt"),S(il,"class","blocktitle"),ee(il,"font-size","0.95em"),ee(il,"margin","0"),ee(il,"width","100%"),S(Cs,"class","row"),ee(Cs,"display","flex"),ee(Cs,"cursor","pointer"),S(Cs,"data-bs-toggle","collapse"),S(Cs,"data-bs-target","#marital-info"),S(Cs,"aria-expanded","false"),S(Cs,"aria-controls","marital-info"),S(nl,"class","collapse svelte-17c2th3"),S(nl,"id","marital-info"),S(Ul,"class","div-grey-box svelte-17c2th3"),S(al,"class","div-white-box"),S(Ih,"class","div-white-box"),S(qo,"class","grid mt svelte-17c2th3"),$o(()=>u[40].call(qo)),S(jo,"class","accordion-body"),S(vc,"id","panelsStayOpen-collapseEight"),S(vc,"class","accordion-collapse collapse svelte-17c2th3"),S(vc,"aria-labelledby","panelsStayOpen-headingEight"),S(Sh,"class","accordion-item"),S(e,"class","accordion-header svelte-17c2th3"),S(e,"id","panelsStayOpen-headingNine"),S(P,"class","accordion-button-title-sub"),be.a=null,ee(ce,"color","#6E6E6E"),ee(ce,"font-size","14pt"),S(oe,"class","blocktitle"),ee(oe,"margin","0"),ee(oe,"width","100%"),S(ie,"class","row"),ee(ie,"display","flex"),ee(ie,"cursor","pointer"),S(ie,"data-bs-toggle","collapse"),S(ie,"data-bs-target","#sexual-orientation-info"),S(ie,"aria-expanded","false"),S(ie,"aria-controls","sexual-orientation-info"),S(Me,"class","collapse svelte-17c2th3"),S(Me,"id","sexual-orientation-info"),S(X,"class","div-grey-box svelte-17c2th3"),S(nt,"class","div-white-box"),S(Ut,"class","div-white-box"),S(U,"class","grid mt svelte-17c2th3"),$o(()=>u[41].call(U)),S(p,"class","accordion-body"),S(l,"id","panelsStayOpen-collapseNine"),S(l,"class","accordion-collapse collapse svelte-17c2th3"),S(l,"aria-labelledby","panelsStayOpen-headingNine"),S(xc,"class","accordion-item"),S(nr,"class","accordion-header svelte-17c2th3"),S(nr,"id","panelsStayOpen-headingTen"),S(Si,"class","accordion-button-title-sub"),fr.a=null,ee(kr,"color","#6E6E6E"),ee(kr,"font-size","14pt"),S(Wt,"class","blocktitle"),ee(Wt,"margin","0"),ee(Wt,"width","100%"),S(ii,"class","row"),ee(ii,"display","flex"),ee(ii,"cursor","pointer"),S(ii,"data-bs-toggle","collapse"),S(ii,"data-bs-target","#quals-info"),S(ii,"aria-expanded","false"),S(ii,"aria-controls","quals-info"),S(Or,"class","collapse svelte-17c2th3"),S(Or,"id","quals-info"),S(Kr,"class","div-grey-box svelte-17c2th3"),wc.a=null,ee(ba,"color","#6E6E6E"),ee(ba,"font-size","14pt"),S(Xr,"class","blocktitle"),ee(Xr,"margin","0"),ee(Xr,"width","100%"),S(Cn,"class","row"),ee(Cn,"display","flex"),ee(Cn,"cursor","pointer"),S(Cn,"data-bs-toggle","collapse"),S(Cn,"data-bs-target","#econ-act-info"),S(Cn,"aria-expanded","false"),S(Cn,"aria-controls","econ-act-info"),S(ao,"class","collapse svelte-17c2th3"),S(ao,"id","econ-act-info"),S(on,"class","div-grey-box svelte-17c2th3"),ql.a=null,ee(ll,"color","#6E6E6E"),ee(ll,"font-size","14pt"),S(xa,"class","blocktitle"),ee(xa,"margin","0"),ee(xa,"width","100%"),S(Io,"class","row"),ee(Io,"display","flex"),ee(Io,"cursor","pointer"),S(Io,"data-bs-toggle","collapse"),S(Io,"data-bs-target","#hours-info"),S(Io,"aria-expanded","false"),S(Io,"aria-controls","hours-info"),S(Zl,"class","collapse svelte-17c2th3"),S(Zl,"id","hours-info"),S(Ms,"class","div-grey-box svelte-17c2th3"),Ec.a=null,ee(zu,"color","#6E6E6E"),ee(zu,"font-size","14pt"),S(Ds,"class","blocktitle"),ee(Ds,"margin","0"),ee(Ds,"width","100%"),S(oo,"class","row"),ee(oo,"display","flex"),ee(oo,"cursor","pointer"),S(oo,"data-bs-toggle","collapse"),S(oo,"data-bs-target","#industry-info"),S(oo,"aria-expanded","false"),S(oo,"aria-controls","industry-info"),S(ul,"class","collapse svelte-17c2th3"),S(ul,"id","industry-info"),S(Zo,"class","div-grey-box svelte-17c2th3"),Go.a=null,ee(hi,"color","#6E6E6E"),ee(hi,"font-size","14pt"),S(Cu,"class","blocktitle"),ee(Cu,"margin","0"),ee(Cu,"width","100%"),S(Ho,"class","row"),ee(Ho,"display","flex"),ee(Ho,"cursor","pointer"),S(Ho,"data-bs-toggle","collapse"),S(Ho,"data-bs-target","#occupation-info"),S(Ho,"aria-expanded","false"),S(Ho,"aria-controls","occupation-info"),S(Pu,"class","collapse svelte-17c2th3"),S(Pu,"id","occupation-info"),S(Gl,"class","div-grey-box svelte-17c2th3"),S(Gr,"class","grid mt svelte-17c2th3"),$o(()=>u[42].call(Gr)),S(Ur,"class","accordion-body"),S(Nr,"id","panelsStayOpen-collapseTen"),S(Nr,"class","accordion-collapse collapse svelte-17c2th3"),S(Nr,"aria-labelledby","panelsStayOpen-headingTen"),S(Bt,"class","accordion-item"),S(Xl,"class","accordion-header svelte-17c2th3"),S(Xl,"id","panelsStayOpen-headingEleven"),S(Hn,"class","accordion-button-title-sub"),Ic.a=null,ee(pl,"color","#6E6E6E"),ee(pl,"font-size","14pt"),S(so,"class","blocktitle"),ee(so,"margin","0"),ee(so,"width","100%"),S(Ls,"class","row"),ee(Ls,"display","flex"),ee(Ls,"cursor","pointer"),S(Ls,"data-bs-toggle","collapse"),S(Ls,"data-bs-target","#method-travel-work-info"),S(Ls,"aria-expanded","false"),S(Ls,"aria-controls","method-travel-work-info"),S(Tc,"class","collapse svelte-17c2th3"),S(Tc,"id","method-travel-work-info"),S(Mu,"class","div-grey-box svelte-17c2th3"),uf.a=null,ee(Ah,"color","#6E6E6E"),ee(Ah,"font-size","14pt"),S(fl,"class","blocktitle"),ee(fl,"margin","0"),ee(fl,"width","100%"),S(Rs,"class","row"),ee(Rs,"display","flex"),ee(Rs,"cursor","pointer"),S(Rs,"data-bs-toggle","collapse"),S(Rs,"data-bs-target","#method-travel-study-info"),S(Rs,"aria-expanded","false"),S(Rs,"aria-controls","method-travel-study-info"),S(Lu,"class","collapse svelte-17c2th3"),S(Lu,"id","method-travel-study-info"),S(wa,"class","div-grey-box svelte-17c2th3"),S(Dp,"class","div-white-box"),km.a=null,ee(Lp,"color","#6E6E6E"),ee(Lp,"font-size","14pt"),S(Bu,"class","blocktitle"),ee(Bu,"margin","0"),ee(Bu,"width","100%"),S(dl,"class","row"),ee(dl,"display","flex"),ee(dl,"cursor","pointer"),S(dl,"data-bs-toggle","collapse"),S(dl,"data-bs-target","#distance-travel-work-info"),S(dl,"aria-expanded","false"),S(dl,"aria-controls","distance-travel-work-info"),S(Wl,"class","collapse svelte-17c2th3"),S(Wl,"id","distance-travel-work-info"),S(Ru,"class","div-grey-box svelte-17c2th3"),zg.a=null,ee(id,"color","#6E6E6E"),ee(id,"font-size","14pt"),S(Mh,"class","blocktitle"),ee(Mh,"margin","0"),ee(Mh,"width","100%"),S(Ou,"class","row"),ee(Ou,"display","flex"),ee(Ou,"cursor","pointer"),S(Ou,"data-bs-toggle","collapse"),S(Ou,"data-bs-target","#distance-travel-study-info"),S(Ou,"aria-expanded","false"),S(Ou,"aria-controls","distance-travel-study-info"),S(hf,"class","collapse svelte-17c2th3"),S(hf,"id","distance-travel-study-info"),S(Ph,"class","div-grey-box svelte-17c2th3"),S(Vi,"class","grid mt svelte-17c2th3"),$o(()=>u[43].call(Vi)),S(hl,"class","accordion-body"),S(cl,"id","panelsStayOpen-collapseEleven"),S(cl,"class","accordion-collapse collapse svelte-17c2th3"),S(cl,"aria-labelledby","panelsStayOpen-headingEleven"),S(Kl,"class","accordion-item"),S(df,"class","accordion-header svelte-17c2th3"),S(df,"id","panelsStayOpen-headingTwelve"),S(nd,"class","accordion-button-title-sub"),Ag.a=null,ee(ad,"color","#6E6E6E"),ee(ad,"font-size","14pt"),S(Lh,"class","blocktitle"),ee(Lh,"margin","0"),ee(Lh,"width","100%"),S(Fu,"class","row"),ee(Fu,"display","flex"),ee(Fu,"cursor","pointer"),S(Fu,"data-bs-toggle","collapse"),S(Fu,"data-bs-target","#address-1yr-info"),S(Fu,"aria-expanded","false"),S(Fu,"aria-controls","address-1yr-info"),S(yf,"class","collapse svelte-17c2th3"),S(yf,"id","address-1yr-info"),S(Dh,"class","div-grey-box svelte-17c2th3"),Pg.a=null,ee(od,"color","#6E6E6E"),ee(od,"font-size","14pt"),S(Bh,"class","blocktitle"),ee(Bh,"margin","0"),ee(Bh,"width","100%"),S(Vu,"class","row"),ee(Vu,"display","flex"),ee(Vu,"cursor","pointer"),S(Vu,"data-bs-toggle","collapse"),S(Vu,"data-bs-target","#year-arr-info"),S(Vu,"aria-expanded","false"),S(Vu,"aria-controls","year-arr-info"),S(vf,"class","collapse svelte-17c2th3"),S(vf,"id","year-arr-info"),S(Rh,"class","div-grey-box svelte-17c2th3"),S(sd,"class","div-white-box"),S(Jl,"class","grid mt svelte-17c2th3"),$o(()=>u[44].call(Jl)),S(Ac,"class","accordion-body"),S(mf,"id","panelsStayOpen-collapseTwelve"),S(mf,"class","accordion-collapse collapse svelte-17c2th3"),S(mf,"aria-labelledby","panelsStayOpen-headingTwelve"),S(ff,"class","accordion-item"),S(te,"class","accordion"),S(te,"id","accordionPanelsStayOpenExample")},m(Y,ze){Ce(Y,h,ze),z(h,f),z(f,y),z(y,_),o.m(T,y),z(y,I),Pc.m(y,null),z(y,D),z(f,V),z(f,j),z(f,F),z(F,ue),z(f,De),z(f,Se),z(Se,Oe),Mc.m(Se,null),z(Se,je),Ko&&Ko.m(Se,null),z(Se,Lt),Dc.m(Se,null),z(h,Mt),z(h,yt),z(yt,Qe),z(Qe,zr),z(Qe,sr),Zt(St,Qe,null),z(Qe,Tt),z(Qe,Lr),z(Qe,Rr),z(Qe,ot),Ce(Y,Qr,ze),Ce(Y,Ar,ze),z(Ar,dr),z(dr,wi),z(dr,Tr),Lc.m(dr,null),z(dr,vn),Xo&&Xo.m(dr,null),z(Ar,Ta),z(Ar,ni),z(ni,_n),z(_n,$r),z($r,za),z($r,hr),Pn.m(ns,hr),z(ni,Mn),z(ni,Vt),z(ni,Ni),z(ni,pr),z(pr,yi),z(ni,Mi),z(ni,pi),Ea&&Ea.m(ni,null),z(ni,fi),ka&&ka.m(ni,null),z(Ar,un),z(Ar,mr),z(mr,Pr),z(Pr,tr),z(tr,yr),z(tr,Ki),Dn.m(Bs,Ki),z(mr,To),z(mr,Ln),z(mr,lo),z(mr,aa),z(aa,uo),z(mr,zo),z(mr,as),Sa&&Sa.m(mr,null),z(mr,Co),Ia&&Ia.m(mr,null),Ce(Y,Aa,ze),Ce(Y,ai,ze),z(ai,cn),z(cn,Kn),Rc.m(Kn,null),z(ai,Ka),z(ai,br),Zt(B,br,null),z(ai,K),z(ai,$),Bc.m($,null),z(ai,le),z(ai,me),Oc.m(me,null),ye=es(ai,u[31].bind(ai)),Ce(Y,G,ze),Ce(Y,te,ze),z(te,ke),z(ke,Ue),z(ke,Re),z(ke,qe),z(qe,at),z(at,st),z(at,tt),z(at,Je),z(at,Ye),z(at,rt),z(at,Rt),z(Rt,$t),z($t,At),z(At,Jt),z(Jt,rr),z(Jt,di),lr.m(oi,di),z($t,gr),z($t,Nt),z($t,Ui),z($t,co),Fc.m($t,null),z(Rt,Ei),z(Rt,si),z(si,bn),z(bn,xn),z(xn,ei),z(xn,sa),Di.m(Li,sa),z(si,wn),z(si,xr),z(si,Rn),z(si,Ao),z(Ao,ho),z(Ao,en),z(Rt,ji),z(Rt,zi),z(zi,ti),z(ti,En),z(En,Gu),z(En,vl),Fs.m(Cf,vl),z(zi,eu),z(zi,Vs),z(zi,Kc),z(zi,Xa),z(Xa,Ns),z(zi,Xc),Wo&&Wo.m(zi,null),bl=es(Rt,u[32].bind(Rt)),z(te,la),z(te,Xn),z(Xn,Ee),z(Xn,tn),z(Xn,Br),z(Br,hn),z(hn,ua),z(hn,xl),z(hn,Fp),z(hn,Xu),z(hn,Zh),z(hn,Ma),z(Ma,Wn),z(Wn,Wa),z(Wa,os),z(os,Vp),z(os,Wu),tu.m(Hh,Wu),z(Wn,Np),z(Wn,Ci),z(Wn,Us),z(Wn,Da),Zt(Ja,Da,null),z(Wn,wl),Jo&&Jo.m(Wn,null),z(Wn,ss),z(Wn,ls),Zt(Ya,ls,null),z(Ma,js),z(Ma,El),z(El,us),z(El,Af),Zt(cs,El,null),z(Ma,jp),z(Ma,hs),z(hs,po),z(po,ps),z(ps,kl),z(ps,Qa),qs.m(qd,Qa),z(hs,qp),z(hs,Zs),z(hs,Zp),Zt($a,hs,null),iu=es(Ma,u[33].bind(Ma)),z(te,Hp),z(te,Po),z(Po,Mr),z(Po,Pf),z(Po,fo),z(fo,Mo),z(Mo,Mf),z(Mo,Ju),z(Mo,nu),z(Mo,fs),z(Mo,Yu),z(Mo,On),z(On,ds),z(ds,Jn),z(Jn,pn),z(pn,Gp),z(pn,au),Xh.m(Qu,au),z(ds,$u),z(ds,ms),z(ds,Jc),Zt(ou,ds,null),z(On,Yc),z(On,Do),z(Do,mo),z(mo,ys),z(ys,Qc),z(ys,Sl),$c.m(Df,Sl),z(Do,ec),z(Do,Il),z(Do,li),Zt(gs,Do,null),z(On,Tl),z(On,Yn),z(Yn,Kt),z(Kt,wr),z(wr,La),z(wr,vs),zl.m(Wh,vs),z(Yn,Lf),z(Yn,lu),z(Yn,tc),Zt(ca,Yn,null),Xi=es(On,u[34].bind(On)),z(te,rc),z(te,Cl),z(Cl,ui),z(Cl,ha),z(Cl,_s),z(_s,pa),z(pa,yo),z(pa,th),z(pa,$e),z(pa,Al),z(pa,Yh),z(pa,Ri),z(Ri,qi),z(qi,Ra),z(Ra,go),z(go,fa),z(go,Ba),Qh.m($h,Ba),z(qi,ep),z(qi,Hs),z(qi,Oa),Zt(Yt,qi,null),z(Ri,Ro),z(Ri,rn),z(rn,ci),z(ci,da),z(da,Gs),z(da,Qn),kn.m(tp,Qn),z(rn,bt),z(rn,ht),z(rn,Vn),Zt(Nn,rn,null),z(Ri,fn),z(Ri,Sn),z(Sn,eo),z(eo,vo),z(vo,Dr),z(vo,Ai),ip.m(ic,Ai),z(Sn,np),z(Sn,ma),z(Sn,uu),Zt($n,Sn,null),ap=es(Ri,u[35].bind(Ri)),z(te,cu),z(te,Bo),z(Bo,Ks),z(Bo,Pl),z(Bo,Xs),z(Xs,Un),z(Un,Ws),z(Un,bs),z(Un,to),z(Un,Ml),z(Un,op),z(Un,ya),z(ya,n),z(n,s),z(s,a),z(a,c),z(a,m),w.m(E,m),z(n,C),z(n,M),z(n,W),Zt(J,n,null),z(ya,Q),z(ya,se),z(se,ne),z(ne,he),z(he,ae),z(he,fe),ge.m(Ie,fe),z(se,Be),z(se,Ae),z(se,Ze),Zt(Ke,se,null),z(ya,Xe),z(ya,it),z(it,mt),z(mt,vt),z(vt,wt),z(vt,ar),ct.m(Ft,ar),z(it,Qt),z(it,zt),z(it,Xt),Zt(It,it,null),Ct=es(ya,u[36].bind(ya)),z(te,Wi),z(te,Jr),z(Jr,Bi),z(Jr,gi),z(Jr,ri),z(ri,Oi),z(Oi,jn),z(Oi,qn),z(Oi,_o),z(Oi,Zn),z(Oi,pu),z(Oi,Ji),z(Ji,Va),z(Va,ga),z(ga,mn),z(mn,ac),z(mn,va),Zi.m(Dl,va),z(mn,Js),z(Va,Ll),z(Va,cr),z(Va,ea),Zt(io,Va,null),z(Ji,Rf),z(Ji,bo),z(bo,Fo),z(Fo,Na),z(Na,Xp),z(Na,Vo),oc.m(xy,Vo),z(bo,sc),z(bo,nn),z(bo,Zd),Zt(nh,bo,null),z(Ji,wy),z(Ji,fu),z(fu,Ys),z(Ys,No),z(No,Ey),z(No,du),Bf.m(ah,du),z(No,sp),z(fu,ky),z(fu,oh),z(fu,Sy),Zt(sh,fu,null),z(Ji,Iy),z(Ji,mu),z(mu,Uo),z(Uo,Rl),z(Rl,lh),z(Rl,lp),Fi.m(Hd,lp),z(mu,Gd),z(mu,Bl),z(mu,up),Zt(lc,mu,null),Ty=es(Ji,u[37].bind(Ji)),z(te,cp),z(te,yu),z(yu,gu),z(yu,hp),z(yu,uh),z(uh,xs),z(xs,zy),z(xs,Wp),z(xs,ws),z(xs,fp),z(xs,Cy),z(xs,ta),z(ta,Ol),z(Ol,Ua),z(Ua,vu),z(vu,Ay),z(vu,ch),Ff.m(Cv,ch),z(Ol,Py),z(Ol,Es),z(Ol,Vf),Zt(Qs,Ol,null),z(ta,ks),z(ta,_u),z(_u,$s),z($s,bu),z(bu,dp),z(bu,hh),Kd.m(Av,hh),z(_u,My),z(_u,ph),z(_u,ra),Zt(fh,_u,null),z(ta,Xd),z(ta,Fl),z(Fl,el),z(el,Vl),z(Vl,Ly),z(Vl,mp),Wd.m(bg,mp),z(Fl,Ry),z(Fl,dh),z(Fl,Jd),Zt(uc,Fl,null),z(ta,Yp),z(ta,Sr),z(Sr,Ss),z(Ss,_a),z(_a,mh),z(_a,yh),Yd.m(Pv,yh),z(Sr,By),z(Sr,gh),z(Sr,Oy),Zt(vh,Sr,null),z(ta,Fy),z(ta,xu),z(xu,xo),z(xo,wo),z(wo,Qd),z(wo,yp),$d.m(Mv,yp),z(xu,em),z(xu,Nl),z(xu,gp),Zt(In,xu,null),z(ta,_h),z(ta,Pi),z(Pi,Eo),z(Eo,Is),z(Is,ja),z(Is,bh),Nf.m(Dv,bh),z(Pi,tm),z(Pi,wu),z(Pi,Vy),Zt(cc,Pi,null),vp=es(ta,u[38].bind(ta)),z(te,Uf),z(te,hc),z(hc,pc),z(hc,im),z(hc,fc),z(fc,tl),z(tl,nm),z(tl,am),z(tl,om),z(tl,xh),z(tl,sm),z(tl,no),z(no,Ts),z(Ts,ko),z(ko,So),z(So,Ny),z(So,_p),lm.m($p,_p),z(Ts,Zf),z(Ts,dc),z(Ts,cm),Zt(mc,Ts,null),z(no,Uy),z(no,Eu),z(Eu,rl),z(rl,zs),z(zs,Hf),z(zs,bp),yc.m(Gf,bp),z(Eu,Vr),z(Eu,wh),z(Eu,Eh),Zt(kh,Eu,null),z(no,jy),z(no,xp),kg=es(no,u[39].bind(no)),z(te,qy),z(te,Sh),z(Sh,gc),z(Sh,pm),z(Sh,vc),z(vc,jo),z(jo,_c),z(jo,bc),z(jo,fm),z(jo,vi),z(jo,dm),z(jo,qo),z(qo,Ul),z(Ul,Cs),z(Cs,il),z(il,Kf),z(il,As),ku.m(Sg,As),z(Ul,Hi),z(Ul,nl),z(Ul,ef),Zt(jl,Ul,null),z(qo,Xf),z(qo,al),z(qo,mm),z(qo,Ih),yn=es(qo,u[40].bind(qo)),z(te,Tu),z(te,xc),z(xc,e),z(xc,i),z(xc,l),z(l,p),z(p,d),z(p,k),z(p,A),z(p,P),z(p,O),z(p,U),z(U,X),z(X,ie),z(ie,oe),z(oe,de),z(oe,ce),be.m(Te,ce),z(X,Pe),z(X,Me),z(X,Ge),Zt(We,X,null),z(U,_t),z(U,nt),z(U,lt),z(U,Ut),gt=es(U,u[41].bind(U)),z(te,ir),z(te,Bt),z(Bt,nr),z(Bt,Er),z(Bt,Nr),z(Nr,Ur),z(Ur,_i),z(Ur,bi),z(Ur,Yi),z(Ur,Si),z(Ur,an),z(Ur,Gr),z(Gr,Kr),z(Kr,ii),z(ii,Wt),z(Wt,jr),z(Wt,kr),fr.m(qa,kr),z(Kr,Tn),z(Kr,Or),z(Kr,zn),Zt(or,Kr,null),z(Gr,ol),z(Gr,on),z(on,Cn),z(Cn,Xr),z(Xr,sl),z(Xr,ba),wc.m(Ep,ba),z(on,Th),z(on,ao),z(on,tf),Zt(Ps,on,null),z(Gr,Sp),z(Gr,Ms),z(Ms,Io),z(Io,xa),z(xa,Ip),z(xa,ll),ql.m(rf,ll),z(Ms,nf),z(Ms,Zl),z(Ms,Tp),Zt(Hl,Ms,null),z(Gr,zp),z(Gr,Zo),z(Zo,oo),z(oo,Ds),z(Ds,zh),z(Ds,zu),Ec.m(Wf,zu),z(Zo,kc),z(Zo,ul),z(Zo,Jf),Zt(Sc,Zo,null),z(Gr,Yf),z(Gr,Gl),z(Gl,Ho),z(Ho,Cu),z(Cu,Ap),z(Cu,hi),Go.m(Lv,hi),z(Gl,Au),z(Gl,Pu),z(Gl,of),Zt(Za,Gl,null),Qf=es(Gr,u[42].bind(Gr)),z(te,Pp),z(te,Kl),z(Kl,Xl),z(Kl,gm),z(Kl,cl),z(cl,hl),z(hl,vm),z(hl,$f),z(hl,_m),z(hl,Hn),z(hl,bm),z(hl,Vi),z(Vi,Mu),z(Mu,Ls),z(Ls,so),z(so,Ch),z(so,pl),Ic.m(lf,pl),z(Mu,xm),z(Mu,Tc),z(Mu,wm),Zt(Du,Mu,null),z(Vi,td),z(Vi,wa),z(wa,Rs),z(Rs,fl),z(fl,rd),z(fl,Ah),uf.m(Tg,Ah),z(wa,Em),z(wa,Lu),z(wa,Mp),Zt(zc,wa,null),z(Vi,cf),z(Vi,Dp),z(Vi,Wy),z(Vi,Ru),z(Ru,dl),z(dl,Bu),z(Bu,Jy),z(Bu,Lp),km.m(Rv,Lp),z(Ru,ml),z(Ru,Wl),z(Ru,Rp),Zt(Cc,Ru,null),z(Vi,Bv),z(Vi,Ph),z(Ph,Ou),z(Ou,Mh),z(Mh,Ov),z(Mh,id),zg.m(Yx,id),z(Ph,Fv),z(Ph,hf),z(Ph,Vv),Zt(pf,Ph,null),l0=es(Vi,u[43].bind(Vi)),z(te,Nv),z(te,ff),z(ff,df),z(ff,Uv),z(ff,mf),z(mf,Ac),z(Ac,jv),z(Ac,Cg),z(Ac,qv),z(Ac,nd),z(Ac,Zv),z(Ac,Jl),z(Jl,Dh),z(Dh,Fu),z(Fu,Lh),z(Lh,Hv),z(Lh,ad),Ag.m(Qx,ad),z(Dh,Gv),z(Dh,yf),z(Dh,Kv),Zt(gf,Dh,null),z(Jl,Xv),z(Jl,Rh),z(Rh,Vu),z(Vu,Bh),z(Bh,Wv),z(Bh,od),Pg.m($x,od),z(Rh,Jv),z(Rh,vf),z(Rh,Yv),Zt(_f,Rh,null),z(Jl,Qv),z(Jl,sd),d0=es(Jl,u[44].bind(Jl)),sn=!0,$v||(m0=[kt($r,"click",Ir),kt(tr,"click",Ir),kt(Jt,"click",Ir),kt(xn,"click",Ir),kt(En,"click",Ir),kt(os,"click",Ir),kt(us,"click",Ir),kt(ps,"click",Ir),kt(pn,"click",Ir),kt(ys,"click",Ir),kt(wr,"click",Ir),kt(go,"click",Ir),kt(da,"click",Ir),kt(vo,"click",Ir),kt(a,"click",Ir),kt(he,"click",Ir),kt(vt,"click",Ir),kt(mn,"click",Ir),kt(Na,"click",Ir),kt(No,"click",Ir),kt(Rl,"click",Ir),kt(vu,"click",Ir),kt(bu,"click",Ir),kt(Vl,"click",Ir),kt(_a,"click",Ir),kt(wo,"click",Ir),kt(Is,"click",Ir),kt(So,"click",Ir),kt(zs,"click",Ir),kt(il,"click",Ir),kt(oe,"click",Ir),kt(Wt,"click",Ir),kt(Xr,"click",Ir),kt(xa,"click",Ir),kt(Ds,"click",Ir),kt(Cu,"click",Ir),kt(so,"click",Ir),kt(fl,"click",Ir),kt(Bu,"click",Ir),kt(Mh,"click",Ir),kt(Lh,"click",Ir),kt(Bh,"click",Ir)],$v=!0)},p(Y,ze){Mg===(Mg=y0(Y))&&Pc?Pc.p(Y,ze):(Pc.d(1),Pc=Mg(Y),Pc&&(Pc.c(),Pc.m(y,D))),(!sn||ze[0]&1)&&pe!==(pe=Y[0].place.name+"")&&ft(ue,pe),Dg===(Dg=g0(Y))&&Mc?Mc.p(Y,ze):(Mc.d(1),Mc=Dg(Y),Mc&&(Mc.c(),Mc.m(Se,je))),Y[0].place.type!="ni"?Ko?Ko.p(Y,ze):(Ko=dx(Y),Ko.c(),Ko.m(Se,Lt)):Ko&&(Ko.d(1),Ko=null),Lg===(Lg=v0(Y))&&Dc?Dc.p(Y,ze):(Dc.d(1),Dc=Lg(Y),Dc&&(Dc.c(),Dc.m(Se,null)));const Oh={};ze[0]&1&&(Oh.search_data=Y[0].search_data),St.$set(Oh),(!sn||ze[0]&32)&&Ii(Qe,"float-right",Y[5]>1),Rg===(Rg=_0(Y))&&Lc?Lc.p(Y,ze):(Lc.d(1),Lc=Rg(Y),Lc&&(Lc.c(),Lc.m(dr,vn))),Y[4]?Xo?Xo.p(Y,ze):(Xo=mx(Y),Xo.c(),Xo.m(dr,null)):Xo&&(Xo.d(1),Xo=null),(!sn||ze[0]&1)&&$i!==($i=Y[0].place.data.population.value[2021].all.toLocaleString()+"")&&ft(yi,$i),Y[0].place.type!="ni"?Ea?(Ea.p(Y,ze),ze[0]&1&&et(Ea,1)):(Ea=yx(Y),Ea.c(),et(Ea,1),Ea.m(ni,fi)):Ea&&(qu(),pt(Ea,1,1,()=>{Ea=null}),Zu()),Y[4]&&Y[2]?ka?(ka.p(Y,ze),ze[0]&20&&et(ka,1)):(ka=_x(Y),ka.c(),et(ka,1),ka.m(ni,null)):ka&&(qu(),pt(ka,1,1,()=>{ka=null}),Zu()),(!sn||ze[0]&1)&&oa!==(oa=Y[0].place.data.households.value[2021].all_households.toLocaleString()+"")&&ft(uo,oa),Y[0].place.type!="ni"&Y[9]?Sa?(Sa.p(Y,ze),ze[0]&513&&et(Sa,1)):(Sa=bx(Y),Sa.c(),et(Sa,1),Sa.m(mr,Co)):Sa&&(qu(),pt(Sa,1,1,()=>{Sa=null}),Zu()),Y[4]&&Y[2]?Ia?(Ia.p(Y,ze),ze[0]&20&&et(Ia,1)):(Ia=xx(Y),Ia.c(),et(Ia,1),Ia.m(mr,null)):Ia&&(qu(),pt(Ia,1,1,()=>{Ia=null}),Zu()),Bg===(Bg=b0(Y))&&Rc?Rc.p(Y,ze):(Rc.d(1),Rc=Bg(Y),Rc&&(Rc.c(),Rc.m(Kn,null))),(!sn||ze[0]&32)&&ee(cn,"grid-column","span "+Y[5]);const Vc={};ze[0]&1&&(Vc.location={bounds:Y[0].place.bounds}),ze[0]&384|ze[1]&536870912&&(Vc.$$scope={dirty:ze,ctx:Y}),!q&&ze[0]&64&&(q=!0,Vc.map=Y[6],a2(()=>q=!1)),B.$set(Vc),(!sn||ze[0]&32)&&ee(br,"grid-column","span "+(Y[5]==2?2:Y[5]&&Y[5]>2?Y[5]-1:1)),Og===(Og=w0(Y))&&Bc?Bc.p(Y,ze):(Bc.d(1),Bc=Og(Y),Bc&&(Bc.c(),Bc.m($,null))),Fg===(Fg=E0(Y))&&Oc?Oc.p(Y,ze):(Oc.d(1),Oc=Fg(Y),Oc&&(Oc.c(),Oc.m(me,null))),(!sn||ze[0]&1)&&Le!==(Le=Y[0].place.name+"")&&ft(tt,Le),Vg===(Vg=k0(Y))&&Fc?Fc.p(Y,ze):(Fc.d(1),Fc=Vg(Y),Fc&&(Fc.c(),Fc.m($t,null))),(!sn||ze[0]&1)&&Ti!==(Ti=(Y[0].place.hectares>=.1?Y[0].place.hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&ft(ho,Ti),(!sn||ze[0]&1)&&_l!==(_l=(Y[0].place.data.population.value[2021].all/Y[0].place.hectares>=.1?(Y[0].place.data.population.value[2021].all/Y[0].place.hectares).toFixed(1):"<0.1")+"")&&ft(Ns,_l),Y[0].place.type!="ni"&&Y[9]?Wo?Wo.p(Y,ze):(Wo=Sx(Y),Wo.c(),Wo.m(zi,null)):Wo&&(Wo.d(1),Wo=null),(!sn||ze[0]&1)&&ki!==(ki=Y[0].place.name+"")&&ft(xl,ki);const Sm={};ze[0]&1&&(Sm.data=Y[0].place&&Y[12](["age"])),ze[0]&1024&&(Sm.zKey=Y[10]),Ja.$set(Sm),Y[9]&&Y[11]||Y[2]&&Y[11]&&Y[4]?Jo?Jo.p(Y,ze):(Jo=Ix(Y),Jo.c(),Jo.m(Wn,ss)):Jo&&(Jo.d(1),Jo=null);const Nc={};ze[0]&1&&(Nc.data=Y[0].place&&Y[12](["age"])),ze[0]&1024&&(Nc.zKey=Y[10]),Ya.$set(Nc);const ld={};ze[0]&1&&(ld.data=Y[0].place&&Y[12](["sex"])),ze[0]&1024&&(ld.zKey=Y[10]),ze[0]&2048&&(ld.label=Y[11]),cs.$set(ld);const Yl={};ze[0]&1&&(Yl.data=Y[0].place&&Y[12](["hh_size"])),ze[0]&1024&&(Yl.zKey=Y[10]),ze[0]&2048&&(Yl.label=Y[11]),$a.$set(Yl),(!sn||ze[0]&1)&&Wc!==(Wc=Y[0].place.name+"")&&ft(Ju,Wc);const Uc={};ze[0]&1&&(Uc.data=Y[0].place&&Y[12](["cob"])),ze[0]&1024&&(Uc.zKey=Y[10]),ze[0]&2048&&(Uc.label=Y[11]),ou.$set(Uc);const jc={};ze[0]&1&&(jc.data=Y[0].place&&Y[12](["passport"])),ze[0]&1024&&(jc.zKey=Y[10]),ze[0]&2048&&(jc.label=Y[11]),gs.$set(jc);const Yo={};ze[0]&1&&(Yo.data=Y[0].place&&Y[12](["natid"])),ze[0]&1024&&(Yo.zKey=Y[10]),ze[0]&2048&&(Yo.label=Y[11]),ca.$set(Yo),(!sn||ze[0]&1)&&Fn!==(Fn=Y[0].place.name+"")&&ft(th,Fn);const ud={};ze[0]&1&&(ud.data=Y[0].place&&Y[12](["mainlang"])),ze[0]&1024&&(ud.zKey=Y[10]),ze[0]&2048&&(ud.label=Y[11]),Yt.$set(ud);const bf={};ze[0]&1&&(bf.data=Y[0].place&&Y[12](["irish"])),ze[0]&1024&&(bf.zKey=Y[10]),ze[0]&2048&&(bf.label=Y[11]),Nn.$set(bf);const cd={};ze[0]&1&&(cd.data=Y[0].place&&Y[12](["ulster"])),ze[0]&1024&&(cd.zKey=Y[10]),ze[0]&2048&&(cd.label=Y[11]),$n.$set(cd),(!sn||ze[0]&1)&&hu!==(hu=Y[0].place.name+"")&&ft(bs,hu);const hd={};ze[0]&1&&(hd.data=Y[0].place&&Y[12](["religion"])),ze[0]&1024&&(hd.zKey=Y[10]),ze[0]&2048&&(hd.label=Y[11]),J.$set(hd);const Qo={};ze[0]&1&&(Qo.data=Y[0].place&&Y[12](["religion_or_religion_brought_up_in"])),ze[0]&1024&&(Qo.zKey=Y[10]),ze[0]&2048&&(Qo.label=Y[11]),Ke.$set(Qo);const pd={};ze[0]&1&&(pd.data=Y[0].place&&Y[12](["ethnic"])),ze[0]&1024&&(pd.zKey=Y[10]),ze[0]&2048&&(pd.label=Y[11]),It.$set(pd),(!sn||ze[0]&1)&&Oo!==(Oo=Y[0].place.name+"")&&ft(qn,Oo);const xf={};ze[0]&1&&(xf.data=Y[0].place&&Y[12](["general_health"])),ze[0]&1024&&(xf.zKey=Y[10]),ze[0]&2048&&(xf.label=Y[11]),io.$set(xf);const fd={};ze[0]&1&&(fd.data=Y[0].place&&Y[12](["long_term_disability"])),ze[0]&1024&&(fd.zKey=Y[10]),ze[0]&2048&&(fd.label=Y[11]),nh.$set(fd);const dd={};ze[0]&1&&(dd.data=Y[0].place&&Y[12](["number_of_long_term_health"])),ze[0]&1024&&(dd.zKey=Y[10]),ze[0]&2048&&(dd.label=Y[11]),sh.$set(dd);const Ql={};ze[0]&1&&(Ql.data=Y[0].place&&Y[12](["provision_care"])),ze[0]&1024&&(Ql.zKey=Y[10]),ze[0]&2048&&(Ql.label=Y[11]),lc.$set(Ql),(!sn||ze[0]&1)&&pp!==(pp=Y[0].place.name+"")&&ft(Wp,pp);const md={};ze[0]&1&&(md.data=Y[0].place&&Y[12](["accommodation_type"])),ze[0]&1024&&(md.zKey=Y[10]),ze[0]&2048&&(md.label=Y[11]),Qs.$set(md);const yd={};ze[0]&1&&(yd.data=Y[0].place&&Y[12](["number_of_adaptations"])),ze[0]&1024&&(yd.zKey=Y[10]),ze[0]&2048&&(yd.label=Y[11]),fh.$set(yd);const gd={};ze[0]&1&&(gd.data=Y[0].place&&Y[12](["central_heating"])),ze[0]&1024&&(gd.zKey=Y[10]),ze[0]&2048&&(gd.label=Y[11]),uc.$set(gd);const vd={};ze[0]&1&&(vd.data=Y[0].place&&Y[12](["renewable_energy"])),ze[0]&1024&&(vd.zKey=Y[10]),ze[0]&2048&&(vd.label=Y[11]),vh.$set(vd);const _d={};ze[0]&1&&(_d.data=Y[0].place&&Y[12](["hh_tenure"])),ze[0]&1024&&(_d.zKey=Y[10]),ze[0]&2048&&(_d.label=Y[11]),In.$set(_d);const xi={};ze[0]&1&&(xi.data=Y[0].place&&Y[12](["car_or_van"])),ze[0]&1024&&(xi.zKey=Y[10]),ze[0]&2048&&(xi.label=Y[11]),cc.$set(xi),(!sn||ze[0]&1)&&jf!==(jf=Y[0].place.name+"")&&ft(am,jf);const Bp={};ze[0]&1&&(Bp.data=Y[0].place&&Y[12](["number_of_dependent_children_households"])),ze[0]&1024&&(Bp.zKey=Y[10]),ze[0]&2048&&(Bp.label=Y[11]),mc.$set(Bp);const bd={};ze[0]&1&&(bd.data=Y[0].place&&Y[12](["household_composition_households"])),ze[0]&1024&&(bd.zKey=Y[10]),ze[0]&2048&&(bd.label=Y[11]),kh.$set(bd),(!sn||ze[0]&1)&&wp!==(wp=Y[0].place.name+"")&&ft(bc,wp);const Nu={};ze[0]&1&&(Nu.data=Y[0].place&&Y[12](["marital_and_civil_partnership_status"])),ze[0]&1024&&(Nu.zKey=Y[10]),ze[0]&2048&&(Nu.label=Y[11]),jl.$set(Nu),(!sn||ze[0]&1)&&v!==(v=Y[0].place.name+"")&&ft(k,v);const qc={};ze[0]&1&&(qc.data=Y[0].place&&Y[12](["sexual_orientation_by_broad_age_band"])),ze[0]&1024&&(qc.zKey=Y[10]),ze[0]&2048&&(qc.label=Y[11]),We.$set(qc),(!sn||ze[0]&1)&&Yr!==(Yr=Y[0].place.name+"")&&ft(bi,Yr);const Uu={};ze[0]&1&&(Uu.data=Y[0].place&&Y[12](["highest_level_of_qualifications"])),ze[0]&1024&&(Uu.zKey=Y[10]),ze[0]&2048&&(Uu.label=Y[11]),or.$set(Uu);const xd={};ze[0]&1&&(xd.data=Y[0].place&&Y[12](["economic_activity"])),ze[0]&1024&&(xd.zKey=Y[10]),ze[0]&2048&&(xd.label=Y[11]),Ps.$set(xd);const wf={};ze[0]&1&&(wf.data=Y[0].place&&Y[12](["hours_worked"])),ze[0]&1024&&(wf.zKey=Y[10]),ze[0]&2048&&(wf.label=Y[11]),Hl.$set(wf);const wd={};ze[0]&1&&(wd.data=Y[0].place&&Y[12](["industry_of_employment"])),ze[0]&1024&&(wd.zKey=Y[10]),ze[0]&2048&&(wd.label=Y[11]),Sc.$set(wd);const Zc={};ze[0]&1&&(Zc.data=Y[0].place&&Y[12](["occupation_1_digit"])),ze[0]&1024&&(Zc.zKey=Y[10]),ze[0]&2048&&(Zc.label=Y[11]),Za.$set(Zc),(!sn||ze[0]&1)&&sf!==(sf=Y[0].place.name+"")&&ft($f,sf);const Ed={};ze[0]&1&&(Ed.data=Y[0].place&&Y[12](["method_of_travel_to_work"])),ze[0]&1024&&(Ed.zKey=Y[10]),ze[0]&2048&&(Ed.label=Y[11]),Du.$set(Ed);const Ef={};ze[0]&1&&(Ef.data=Y[0].place&&Y[12](["method_of_travel_to_study"])),ze[0]&1024&&(Ef.zKey=Y[10]),ze[0]&2048&&(Ef.label=Y[11]),zc.$set(Ef);const kd={};ze[0]&1&&(kd.data=Y[0].place&&Y[12](["distance_travelled_to_work"])),ze[0]&1024&&(kd.zKey=Y[10]),ze[0]&2048&&(kd.label=Y[11]),Cc.$set(kd);const kf={};ze[0]&1&&(kf.data=Y[0].place&&Y[12](["distance_travelled_to_study"])),ze[0]&1024&&(kf.zKey=Y[10]),ze[0]&2048&&(kf.label=Y[11]),pf.$set(kf),(!sn||ze[0]&1)&&Qy!==(Qy=Y[0].place.name+"")&&ft(Cg,Qy);const $l={};ze[0]&1&&($l.data=Y[0].place&&Y[12](["address_one_year_ago"])),ze[0]&1024&&($l.zKey=Y[10]),ze[0]&2048&&($l.label=Y[11]),gf.$set($l);const Sd={};ze[0]&1&&(Sd.data=Y[0].place&&Y[12](["year_of_arrival"])),ze[0]&1024&&(Sd.zKey=Y[10]),ze[0]&2048&&(Sd.label=Y[11]),_f.$set(Sd)},i(Y){sn||(et(St.$$.fragment,Y),et(Ea),et(ka),et(Sa),et(Ia),et(B.$$.fragment,Y),et(Ja.$$.fragment,Y),et(Ya.$$.fragment,Y),et(cs.$$.fragment,Y),et($a.$$.fragment,Y),et(ou.$$.fragment,Y),et(gs.$$.fragment,Y),et(ca.$$.fragment,Y),et(Yt.$$.fragment,Y),et(Nn.$$.fragment,Y),et($n.$$.fragment,Y),et(J.$$.fragment,Y),et(Ke.$$.fragment,Y),et(It.$$.fragment,Y),et(io.$$.fragment,Y),et(nh.$$.fragment,Y),et(sh.$$.fragment,Y),et(lc.$$.fragment,Y),et(Qs.$$.fragment,Y),et(fh.$$.fragment,Y),et(uc.$$.fragment,Y),et(vh.$$.fragment,Y),et(In.$$.fragment,Y),et(cc.$$.fragment,Y),et(mc.$$.fragment,Y),et(kh.$$.fragment,Y),et(jl.$$.fragment,Y),et(We.$$.fragment,Y),et(or.$$.fragment,Y),et(Ps.$$.fragment,Y),et(Hl.$$.fragment,Y),et(Sc.$$.fragment,Y),et(Za.$$.fragment,Y),et(Du.$$.fragment,Y),et(zc.$$.fragment,Y),et(Cc.$$.fragment,Y),et(pf.$$.fragment,Y),et(gf.$$.fragment,Y),et(_f.$$.fragment,Y),sn=!0)},o(Y){pt(St.$$.fragment,Y),pt(Ea),pt(ka),pt(Sa),pt(Ia),pt(B.$$.fragment,Y),pt(Ja.$$.fragment,Y),pt(Ya.$$.fragment,Y),pt(cs.$$.fragment,Y),pt($a.$$.fragment,Y),pt(ou.$$.fragment,Y),pt(gs.$$.fragment,Y),pt(ca.$$.fragment,Y),pt(Yt.$$.fragment,Y),pt(Nn.$$.fragment,Y),pt($n.$$.fragment,Y),pt(J.$$.fragment,Y),pt(Ke.$$.fragment,Y),pt(It.$$.fragment,Y),pt(io.$$.fragment,Y),pt(nh.$$.fragment,Y),pt(sh.$$.fragment,Y),pt(lc.$$.fragment,Y),pt(Qs.$$.fragment,Y),pt(fh.$$.fragment,Y),pt(uc.$$.fragment,Y),pt(vh.$$.fragment,Y),pt(In.$$.fragment,Y),pt(cc.$$.fragment,Y),pt(mc.$$.fragment,Y),pt(kh.$$.fragment,Y),pt(jl.$$.fragment,Y),pt(We.$$.fragment,Y),pt(or.$$.fragment,Y),pt(Ps.$$.fragment,Y),pt(Hl.$$.fragment,Y),pt(Sc.$$.fragment,Y),pt(Za.$$.fragment,Y),pt(Du.$$.fragment,Y),pt(zc.$$.fragment,Y),pt(Cc.$$.fragment,Y),pt(pf.$$.fragment,Y),pt(gf.$$.fragment,Y),pt(_f.$$.fragment,Y),sn=!1},d(Y){Y&&(R(h),R(Qr),R(Ar),R(Aa),R(ai),R(G),R(te)),Pc.d(),Mc.d(),Ko&&Ko.d(),Dc.d(),Ht(St),Lc.d(),Xo&&Xo.d(),Ea&&Ea.d(),ka&&ka.d(),Sa&&Sa.d(),Ia&&Ia.d(),Rc.d(),Ht(B),Bc.d(),Oc.d(),ye(),Fc.d(),Wo&&Wo.d(),bl(),Ht(Ja),Jo&&Jo.d(),Ht(Ya),Ht(cs),Ht($a),iu(),Ht(ou),Ht(gs),Ht(ca),Xi(),Ht(Yt),Ht(Nn),Ht($n),ap(),Ht(J),Ht(Ke),Ht(It),Ct(),Ht(io),Ht(nh),Ht(sh),Ht(lc),Ty(),Ht(Qs),Ht(fh),Ht(uc),Ht(vh),Ht(In),Ht(cc),vp(),Ht(mc),Ht(kh),kg(),Ht(jl),yn(),Ht(We),gt(),Ht(or),Ht(Ps),Ht(Hl),Ht(Sc),Ht(Za),Qf(),Ht(Du),Ht(zc),Ht(Cc),Ht(pf),l0(),Ht(gf),Ht(_f),d0(),$v=!1,Hu(m0)}}}function wk(u){let h=u[0].place.name+"",f;return{c(){f=xe(h)},l(y){f=we(y,h)},m(y,_){Ce(y,f,_)},p(y,_){_[0]&1&&h!==(h=y[0].place.name+"")&&ft(f,h)},d(y){y&&R(f)}}}function Ek(u){let h,f=u[0].place.name+"",y,_=Gn([...u[0].place.parents].reverse()),x=[];for(let o=0;o<_.length;o+=1)x[o]=fx(hx(u,_,o));return{c(){for(let o=0;o<x.length;o+=1)x[o].c();h=ve(),y=xe(f)},l(o){for(let T=0;T<x.length;T+=1)x[T].l(o);h=_e(o),y=we(o,f)},m(o,T){for(let I=0;I<x.length;I+=1)x[I]&&x[I].m(o,T);Ce(o,h,T),Ce(o,y,T)},p(o,T){if(T[0]&1){_=Gn([...o[0].place.parents].reverse());let I;for(I=0;I<_.length;I+=1){const D=hx(o,_,I);x[I]?x[I].p(D,T):(x[I]=fx(D),x[I].c(),x[I].m(h.parentNode,h))}for(;I<x.length;I+=1)x[I].d(1);x.length=_.length}T[0]&1&&f!==(f=o[0].place.name+"")&&ft(y,f)},d(o){o&&(R(h),R(y)),Gc(x,o)}}}function fx(u){let h,f=u[54].name+"",y,_,x,o=" &gt; ",T;return{c(){h=Z("a"),y=xe(f),x=new vr(!1),T=gn(),this.h()},l(I){h=H(I,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var D=re(h);y=we(D,f),D.forEach(R),x=_r(I,!1),T=gn(),this.h()},h(){S(h,"href",_=qh+"/"+u[54].code+"/"),S(h,"data-sveltekit-noscroll",""),S(h,"data-sveltekit-keepfocus",""),S(h,"class","svelte-17c2th3"),x.a=T},m(I,D){Ce(I,h,D),z(h,y),x.m(o,I,D),Ce(I,T,D)},p(I,D){D[0]&1&&f!==(f=I[54].name+"")&&ft(y,f),D[0]&1&&_!==(_=qh+"/"+I[54].code+"/")&&S(h,"href",_)},d(I){I&&(R(h),R(T),x.d())}}}function kk(u){let h,f="No comparison",y,_;return{c(){h=Z("button"),h.textContent=f,this.h()},l(x){h=H(x,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-19j29a5"&&(h.textContent=f),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ii(h,"btn-active",u[3])},m(x,o){Ce(x,h,o),y||(_=[kt(h,"click",u[18]),kt(h,"click",u[19]),kt(h,"click",u[20])],y=!0)},p(x,o){o[0]&8&&Ii(h,"btn-active",x[3])},d(x){x&&R(h),y=!1,Hu(_)}}}function Sk(u){let h,f="No comparison",y,_;return{c(){h=Z("button"),h.textContent=f,this.h()},l(x){h=H(x,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-am6kc8"&&(h.textContent=f),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ii(h,"btn-active",!u[2])},m(x,o){Ce(x,h,o),y||(_=[kt(h,"click",u[15]),kt(h,"click",u[16]),kt(h,"click",u[17])],y=!0)},p(x,o){o[0]&4&&Ii(h,"btn-active",!x[2])},d(x){x&&R(h),y=!1,Hu(_)}}}function dx(u){let h,f="NI 2021",y,_;return{c(){h=Z("button"),h.textContent=f,this.h()},l(x){h=H(x,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-1kv2ihv"&&(h.textContent=f),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ii(h,"btn-active",u[9]&!u[3]&!u[2])},m(x,o){Ce(x,h,o),y||(_=[kt(h,"click",u[21]),kt(h,"click",u[22]),kt(h,"click",u[23])],y=!0)},p(x,o){o[0]&524&&Ii(h,"btn-active",x[9]&!x[3]&!x[2])},d(x){x&&R(h),y=!1,Hu(_)}}}function Ik(u){let h,f="2011 data not available",y,_;return{c(){h=Z("button"),h.textContent=f,this.h()},l(x){h=H(x,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-pqbg9t"&&(h.textContent=f),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ii(h,"btn-active",u[2]&!u[3]&!u[9])},m(x,o){Ce(x,h,o),y||(_=[kt(h,"click",u[27]),kt(h,"click",u[28]),kt(h,"click",u[29])],y=!0)},p(x,o){o[0]&524&&Ii(h,"btn-active",x[2]&!x[3]&!x[9])},d(x){x&&R(h),y=!1,Hu(_)}}}function Tk(u){let h,f="Same area 2011",y,_;return{c(){h=Z("button"),h.textContent=f,this.h()},l(x){h=H(x,"BUTTON",{class:!0,"data-svelte-h":!0}),ut(h)!=="svelte-1d7mynq"&&(h.textContent=f),this.h()},h(){S(h,"class","btn svelte-17c2th3"),Ii(h,"btn-active",u[2]&!u[3]&!u[9])},m(x,o){Ce(x,h,o),y||(_=[kt(h,"click",u[24]),kt(h,"click",u[25]),kt(h,"click",u[26])],y=!0)},p(x,o){o[0]&524&&Ii(h,"btn-active",x[2]&!x[3]&!x[9])},d(x){x&&R(h),y=!1,Hu(_)}}}function zk(u){let h,f=u[0].place.name+"",y,_,x=u[0].place.data.population.value[2021].all.toLocaleString()+"",o,T,I;function D(F,pe){return F[0].place.data.population.value_rank[2021].all==1?Dk:F[0].place.data.population.value_rank[2021].all==F[0].place.count?Mk:F[0].place.data.population.value_rank[2021].all<=(F[0].place.count+1)/2&&F[0].place.data.population.value_rank[2021].all!=1?Pk:Ak}let V=D(u),j=V(u);return{c(){h=xe("The population of "),y=xe(f),_=xe(" was "),o=xe(x),T=xe(` at the time of the 2021 Census, which\r
					made it the\r
					`),j.c(),I=gn()},l(F){h=we(F,"The population of "),y=we(F,f),_=we(F," was "),o=we(F,x),T=we(F,` at the time of the 2021 Census, which\r
					made it the\r
					`),j.l(F),I=gn()},m(F,pe){Ce(F,h,pe),Ce(F,y,pe),Ce(F,_,pe),Ce(F,o,pe),Ce(F,T,pe),j.m(F,pe),Ce(F,I,pe)},p(F,pe){pe[0]&1&&f!==(f=F[0].place.name+"")&&ft(y,f),pe[0]&1&&x!==(x=F[0].place.data.population.value[2021].all.toLocaleString()+"")&&ft(o,x),V===(V=D(F))&&j?j.p(F,pe):(j.d(1),j=V(F),j&&(j.c(),j.m(I.parentNode,I)))},d(F){F&&(R(h),R(y),R(_),R(o),R(T),R(I)),j.d(F)}}}function Ck(u){let h,f=u[0].place.name+"",y,_,x=u[0].place.data.population.value[2021].all.toLocaleString()+"",o,T;return{c(){h=xe("The population of "),y=xe(f),_=xe(" was "),o=xe(x),T=xe(" at the time of the 2021 Census.")},l(I){h=we(I,"The population of "),y=we(I,f),_=we(I," was "),o=we(I,x),T=we(I," at the time of the 2021 Census.")},m(I,D){Ce(I,h,D),Ce(I,y,D),Ce(I,_,D),Ce(I,o,D),Ce(I,T,D)},p(I,D){D[0]&1&&f!==(f=I[0].place.name+"")&&ft(y,f),D[0]&1&&x!==(x=I[0].place.data.population.value[2021].all.toLocaleString()+"")&&ft(o,x)},d(I){I&&(R(h),R(y),R(_),R(o),R(T))}}}function Ak(u){let h=(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all).toLocaleString()+"",f,y=Tf(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all)+"",_,x,o=ln[u[0].place.type].name+"",T,I;return{c(){f=xe(h),_=xe(y),x=xe(" smallest "),T=xe(o),I=xe(".")},l(D){f=we(D,h),_=we(D,y),x=we(D," smallest "),T=we(D,o),I=we(D,".")},m(D,V){Ce(D,f,V),Ce(D,_,V),Ce(D,x,V),Ce(D,T,V),Ce(D,I,V)},p(D,V){V[0]&1&&h!==(h=(D[0].place.count+1-D[0].place.data.population.value_rank[2021].all).toLocaleString()+"")&&ft(f,h),V[0]&1&&y!==(y=Tf(D[0].place.count+1-D[0].place.data.population.value_rank[2021].all)+"")&&ft(_,y),V[0]&1&&o!==(o=ln[D[0].place.type].name+"")&&ft(T,o)},d(D){D&&(R(f),R(_),R(x),R(T),R(I))}}}function Pk(u){let h=u[0].place.data.population.value_rank[2021].all.toLocaleString()+"",f,y=Tf(u[0].place.data.population.value_rank[2021].all)+"",_,x,o=ln[u[0].place.type].name+"",T,I;return{c(){f=xe(h),_=xe(y),x=xe(" largest "),T=xe(o),I=xe(".")},l(D){f=we(D,h),_=we(D,y),x=we(D," largest "),T=we(D,o),I=we(D,".")},m(D,V){Ce(D,f,V),Ce(D,_,V),Ce(D,x,V),Ce(D,T,V),Ce(D,I,V)},p(D,V){V[0]&1&&h!==(h=D[0].place.data.population.value_rank[2021].all.toLocaleString()+"")&&ft(f,h),V[0]&1&&y!==(y=Tf(D[0].place.data.population.value_rank[2021].all)+"")&&ft(_,y),V[0]&1&&o!==(o=ln[D[0].place.type].name+"")&&ft(T,o)},d(D){D&&(R(f),R(_),R(x),R(T),R(I))}}}function Mk(u){let h,f=ln[u[0].place.type].name+"",y,_;return{c(){h=xe("smallest "),y=xe(f),_=xe(".")},l(x){h=we(x,"smallest "),y=we(x,f),_=we(x,".")},m(x,o){Ce(x,h,o),Ce(x,y,o),Ce(x,_,o)},p(x,o){o[0]&1&&f!==(f=ln[x[0].place.type].name+"")&&ft(y,f)},d(x){x&&(R(h),R(y),R(_))}}}function Dk(u){let h,f=ln[u[0].place.type].name+"",y,_;return{c(){h=xe("largest "),y=xe(f),_=xe(".")},l(x){h=we(x,"largest "),y=we(x,f),_=we(x,".")},m(x,o){Ce(x,h,o),Ce(x,y,o),Ce(x,_,o)},p(x,o){o[0]&1&&f!==(f=ln[x[0].place.type].name+"")&&ft(y,f)},d(x){x&&(R(h),R(y),R(_))}}}function mx(u){let h;function f(x,o){return x[0].place.data.population.value.change.all==0?Bk:x[0].place.data.population.value.change.all>0?Rk:Lk}let y=f(u),_=y(u);return{c(){_.c(),h=gn()},l(x){_.l(x),h=gn()},m(x,o){_.m(x,o),Ce(x,h,o)},p(x,o){y===(y=f(x))&&_?_.p(x,o):(_.d(1),_=y(x),_&&(_.c(),_.m(h.parentNode,h)))},d(x){x&&R(h),_.d(x)}}}function Lk(u){let h,f=zf(u[0].place.data.population.value.change.all,"%",1)+"",y,_;return{c(){h=xe("A decrease of "),y=xe(f),_=xe(" since the 2011 Census.")},l(x){h=we(x,"A decrease of "),y=we(x,f),_=we(x," since the 2011 Census.")},m(x,o){Ce(x,h,o),Ce(x,y,o),Ce(x,_,o)},p(x,o){o[0]&1&&f!==(f=zf(x[0].place.data.population.value.change.all,"%",1)+"")&&ft(y,f)},d(x){x&&(R(h),R(y),R(_))}}}function Rk(u){let h,f=zf(u[0].place.data.population.value.change.all,"%",1)+"",y,_;return{c(){h=xe("An increase of "),y=xe(f),_=xe(" since the 2011 Census.")},l(x){h=we(x,"An increase of "),y=we(x,f),_=we(x," since the 2011 Census.")},m(x,o){Ce(x,h,o),Ce(x,y,o),Ce(x,_,o)},p(x,o){o[0]&1&&f!==(f=zf(x[0].place.data.population.value.change.all,"%",1)+"")&&ft(y,f)},d(x){x&&(R(h),R(y),R(_))}}}function Bk(u){let h;return{c(){h=xe("No change in population since the 2011 Census.")},l(f){h=we(f,"No change in population since the 2011 Census.")},m(f,y){Ce(f,h,y)},p:Qi,d(f){f&&R(h)}}}function yx(u){let h,f,y=u[0].place.type!="ctry"&u[9]&!u[2]&&gx(u);return{c(){y&&y.c(),h=gn()},l(_){y&&y.l(_),h=gn()},m(_,x){y&&y.m(_,x),Ce(_,h,x),f=!0},p(_,x){_[0].place.type!="ctry"&_[9]&!_[2]?y?(y.p(_,x),x[0]&517&&et(y,1)):(y=gx(_),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(qu(),pt(y,1,1,()=>{y=null}),Zu())},i(_){f||(et(y),f=!0)},o(_){pt(y),f=!1},d(_){_&&R(h),y&&y.d(_)}}}function gx(u){let h,f,y,_,x,o;f=new Tv({props:{$$slots:{default:[Ok]},$$scope:{ctx:u}}});let T=u[0].place.type=="lgd"&&vx(u);return{c(){h=Z("span"),jt(f.$$.fragment),y=xe(" of Northern Ireland population"),_=ve(),x=Z("div"),T&&T.c(),this.h()},l(I){h=H(I,"SPAN",{class:!0});var D=re(h);qt(f.$$.fragment,D),y=we(D," of Northern Ireland population"),D.forEach(R),_=_e(I),x=H(I,"DIV",{class:!0});var V=re(x);T&&T.l(V),V.forEach(R),this.h()},h(){S(h,"class","text-small "),S(x,"class","text-small ")},m(I,D){Ce(I,h,D),Zt(f,h,null),z(h,y),Ce(I,_,D),Ce(I,x,D),T&&T.m(x,null),o=!0},p(I,D){const V={};D[0]&1|D[1]&536870912&&(V.$$scope={dirty:D,ctx:I}),f.$set(V),I[0].place.type=="lgd"?T?T.p(I,D):(T=vx(I),T.c(),T.m(x,null)):T&&(T.d(1),T=null)},i(I){o||(et(f.$$.fragment,I),o=!0)},o(I){pt(f.$$.fragment,I),o=!1},d(I){I&&(R(h),R(_),R(x)),Ht(f),T&&T.d()}}}function Ok(u){let h=(u[0].place.data.population.value[2021].all/u[0].ni.data.population.value[2021].all>=.001?(u[0].place.data.population.value[2021].all/u[0].ni.data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=xe(h),y=xe("%")},l(_){f=we(_,h),y=we(_,"%")},m(_,x){Ce(_,f,x),Ce(_,y,x)},p(_,x){x[0]&1&&h!==(h=(_[0].place.data.population.value[2021].all/_[0].ni.data.population.value[2021].all>=.001?(_[0].place.data.population.value[2021].all/_[0].ni.data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&ft(f,h)},d(_){_&&(R(f),R(y))}}}function vx(u){let h,f=u[0].place.count.toLocaleString()+"",y,_,x=ln[u[0].place.type].pl+"",o;function T(V,j){return V[0].place.data.population.value_rank[2021].all==1?Uk:V[0].place.data.population.value_rank[2021].all==V[0].place.count?Nk:V[0].place.data.population.value_rank[2021].all<=(V[0].place.count+1)/2&&V[0].place.data.population.value_rank[2021].all!=1?Vk:Fk}let I=T(u),D=I(u);return{c(){D.c(),h=xe(`\r
							population of `),y=xe(f),_=ve(),o=xe(x)},l(V){D.l(V),h=we(V,`\r
							population of `),y=we(V,f),_=_e(V),o=we(V,x)},m(V,j){D.m(V,j),Ce(V,h,j),Ce(V,y,j),Ce(V,_,j),Ce(V,o,j)},p(V,j){I===(I=T(V))&&D?D.p(V,j):(D.d(1),D=I(V),D&&(D.c(),D.m(h.parentNode,h))),j[0]&1&&f!==(f=V[0].place.count.toLocaleString()+"")&&ft(y,f),j[0]&1&&x!==(x=ln[V[0].place.type].pl+"")&&ft(o,x)},d(V){V&&(R(h),R(y),R(_),R(o)),D.d(V)}}}function Fk(u){let h=(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all).toLocaleString()+"",f,y=Tf(u[0].place.count+1-u[0].place.data.population.value_rank[2021].all)+"",_,x;return{c(){f=xe(h),_=xe(y),x=xe(" smallest")},l(o){f=we(o,h),_=we(o,y),x=we(o," smallest")},m(o,T){Ce(o,f,T),Ce(o,_,T),Ce(o,x,T)},p(o,T){T[0]&1&&h!==(h=(o[0].place.count+1-o[0].place.data.population.value_rank[2021].all).toLocaleString()+"")&&ft(f,h),T[0]&1&&y!==(y=Tf(o[0].place.count+1-o[0].place.data.population.value_rank[2021].all)+"")&&ft(_,y)},d(o){o&&(R(f),R(_),R(x))}}}function Vk(u){let h=u[0].place.data.population.value_rank[2021].all.toLocaleString()+"",f,y=Tf(u[0].place.data.population.value_rank[2021].all)+"",_,x;return{c(){f=xe(h),_=xe(y),x=xe(" largest")},l(o){f=we(o,h),_=we(o,y),x=we(o," largest")},m(o,T){Ce(o,f,T),Ce(o,_,T),Ce(o,x,T)},p(o,T){T[0]&1&&h!==(h=o[0].place.data.population.value_rank[2021].all.toLocaleString()+"")&&ft(f,h),T[0]&1&&y!==(y=Tf(o[0].place.data.population.value_rank[2021].all)+"")&&ft(_,y)},d(o){o&&(R(f),R(_),R(x))}}}function Nk(u){let h;return{c(){h=xe("The smallest")},l(f){h=we(f,"The smallest")},m(f,y){Ce(f,h,y)},p:Qi,d(f){f&&R(h)}}}function Uk(u){let h;return{c(){h=xe("The largest")},l(f){h=we(f,"The largest")},m(f,y){Ce(f,h,y)},p:Qi,d(f){f&&R(h)}}}function _x(u){let h,f,y,_;return f=new Tv({props:{$$slots:{default:[jk]},$$scope:{ctx:u}}}),{c(){h=Z("span"),jt(f.$$.fragment),y=xe(" since 2011 Census"),this.h()},l(x){h=H(x,"SPAN",{class:!0});var o=re(h);qt(f.$$.fragment,o),y=we(o," since 2011 Census"),o.forEach(R),this.h()},h(){S(h,"class","text-small ")},m(x,o){Ce(x,h,o),Zt(f,h,null),z(h,y),_=!0},p(x,o){const T={};o[0]&1|o[1]&536870912&&(T.$$scope={dirty:o,ctx:x}),f.$set(T)},i(x){_||(et(f.$$.fragment,x),_=!0)},o(x){pt(f.$$.fragment,x),_=!1},d(x){x&&R(h),Ht(f)}}}function jk(u){let h,f=zf(u[0].place.data.population.value.change.all,"%",1)+"",y,_;return{c(){h=Z("span"),y=xe(f),this.h()},l(x){h=H(x,"SPAN",{class:!0});var o=re(h);y=we(o,f),o.forEach(R),this.h()},h(){S(h,"class",_=mv(yv(u[0].place.data.population.value.change.all))+" svelte-17c2th3")},m(x,o){Ce(x,h,o),z(h,y)},p(x,o){o[0]&1&&f!==(f=zf(x[0].place.data.population.value.change.all,"%",1)+"")&&ft(y,f),o[0]&1&&_!==(_=mv(yv(x[0].place.data.population.value.change.all))+" svelte-17c2th3")&&S(h,"class",_)},d(x){x&&R(h)}}}function bx(u){let h,f,y,_;return f=new Tv({props:{$$slots:{default:[qk]},$$scope:{ctx:u}}}),{c(){h=Z("span"),jt(f.$$.fragment),y=xe(" of Northern Ireland households"),this.h()},l(x){h=H(x,"SPAN",{class:!0});var o=re(h);qt(f.$$.fragment,o),y=we(o," of Northern Ireland households"),o.forEach(R),this.h()},h(){S(h,"class","text-small")},m(x,o){Ce(x,h,o),Zt(f,h,null),z(h,y),_=!0},p(x,o){const T={};o[0]&1|o[1]&536870912&&(T.$$scope={dirty:o,ctx:x}),f.$set(T)},i(x){_||(et(f.$$.fragment,x),_=!0)},o(x){pt(f.$$.fragment,x),_=!1},d(x){x&&R(h),Ht(f)}}}function qk(u){let h=(u[0].place.data.households.value[2021].all_households/u[0].ni.data.households.value[2021].all_households>=.001?(u[0].place.data.households.value[2021].all_households/u[0].ni.data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=xe(h),y=xe("%")},l(_){f=we(_,h),y=we(_,"%")},m(_,x){Ce(_,f,x),Ce(_,y,x)},p(_,x){x[0]&1&&h!==(h=(_[0].place.data.households.value[2021].all_households/_[0].ni.data.households.value[2021].all_households>=.001?(_[0].place.data.households.value[2021].all_households/_[0].ni.data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&ft(f,h)},d(_){_&&(R(f),R(y))}}}function xx(u){let h,f,y,_;return f=new Tv({props:{$$slots:{default:[Zk]},$$scope:{ctx:u}}}),{c(){h=Z("span"),jt(f.$$.fragment),y=xe(" since 2011 Census"),this.h()},l(x){h=H(x,"SPAN",{class:!0});var o=re(h);qt(f.$$.fragment,o),y=we(o," since 2011 Census"),o.forEach(R),this.h()},h(){S(h,"class","text-small")},m(x,o){Ce(x,h,o),Zt(f,h,null),z(h,y),_=!0},p(x,o){const T={};o[0]&1|o[1]&536870912&&(T.$$scope={dirty:o,ctx:x}),f.$set(T)},i(x){_||(et(f.$$.fragment,x),_=!0)},o(x){pt(f.$$.fragment,x),_=!1},d(x){x&&R(h),Ht(f)}}}function Zk(u){let h,f=zf(u[0].place.data.households.value.change.all_households,"%",1)+"",y,_;return{c(){h=Z("span"),y=xe(f),this.h()},l(x){h=H(x,"SPAN",{class:!0});var o=re(h);y=we(o,f),o.forEach(R),this.h()},h(){S(h,"class",_=mv(yv(u[0].place.data.households.value.change.all_households))+" svelte-17c2th3")},m(x,o){Ce(x,h,o),z(h,y)},p(x,o){o[0]&1&&f!==(f=zf(x[0].place.data.households.value.change.all_households,"%",1)+"")&&ft(y,f),o[0]&1&&_!==(_=mv(yv(x[0].place.data.households.value.change.all_households))+" svelte-17c2th3")&&S(h,"class",_)},d(x){x&&R(h)}}}function Hk(u){let h,f,y=u[0].place.name+"",_;return{c(){h=xe("Explore "),f=Z("span"),_=xe(y),this.h()},l(x){h=we(x,"Explore "),f=H(x,"SPAN",{style:!0});var o=re(f);_=we(o,y),o.forEach(R),this.h()},h(){ee(f,"color","#93328E")},m(x,o){Ce(x,h,o),Ce(x,f,o),z(f,_)},p(x,o){o[0]&1&&y!==(y=x[0].place.name+"")&&ft(_,y)},d(x){x&&(R(h),R(f))}}}function Gk(u){let h,f,y=u[0].place.name+"",_,x,o,T,I=ln[u[0].place.type].name+"",D;return{c(){h=xe("Explore "),f=Z("span"),_=xe(y),x=ve(),o=Z("span"),T=xe("- "),D=xe(I),this.h()},l(V){h=we(V,"Explore "),f=H(V,"SPAN",{style:!0});var j=re(f);_=we(j,y),j.forEach(R),x=_e(V),o=H(V,"SPAN",{style:!0});var F=re(o);T=we(F,"- "),D=we(F,I),F.forEach(R),this.h()},h(){ee(f,"color","#93328E"),ee(o,"color","#6E6E6E")},m(V,j){Ce(V,h,j),Ce(V,f,j),z(f,_),Ce(V,x,j),Ce(V,o,j),z(o,T),z(o,D)},p(V,j){j[0]&1&&y!==(y=V[0].place.name+"")&&ft(_,y),j[0]&1&&I!==(I=ln[V[0].place.type].name+"")&&ft(D,I)},d(V){V&&(R(h),R(f),R(x),R(o))}}}function Kk(u){let h,f,y,_,x,o,T;const I=[rg[u[56]],{id:u[56]+"-fill"},{type:"fill"},{isChild:u[8][u[56]]},{click:!0},{selected:u[7].selected},{highlight:!0},{highlighted:u[7].highlighted},{hover:!0},{hovered:u[7].hovered},{layout:{visibility:u[7].type==u[56]||u[7].childType==u[56]?"visible":"none"}},{paint:u[7].type==u[56]?na["fill-self"]:u[7].childType==u[56]?na["fill-child"]:na.fill}];let D={};for(let ue=0;ue<I.length;ue+=1)D=cv(D,I[ue]);h=new j_({props:D}),h.$on("select",u[13]);const V=[rg[u[56]],{id:u[56]+"-bounds"},{type:"line"},{selected:u[7].selected},{highlight:!0},{highlighted:u[7].highlighted},{layout:{visibility:u[7].type==u[56]||u[7].childType==u[56]?"visible":"none"}},{paint:u[7].type==u[56]?na["line-active"]:u[7].childType==u[56]?na["line-child"]:na.line}];let j={};for(let ue=0;ue<V.length;ue+=1)j=cv(j,V[ue]);y=new j_({props:j});const F=[rg[u[56]],{id:u[56]+"-self"},{type:"line"},{selected:u[7].selected},{layout:{visibility:u[7].type==u[56]?"visible":"none"}},{paint:u[7].type==u[56]?na["line-self"]:na.line}];let pe={};for(let ue=0;ue<F.length;ue+=1)pe=cv(pe,F[ue]);return x=new j_({props:pe}),{c(){jt(h.$$.fragment),f=ve(),jt(y.$$.fragment),_=ve(),jt(x.$$.fragment),o=ve()},l(ue){qt(h.$$.fragment,ue),f=_e(ue),qt(y.$$.fragment,ue),_=_e(ue),qt(x.$$.fragment,ue),o=_e(ue)},m(ue,De){Zt(h,ue,De),Ce(ue,f,De),Zt(y,ue,De),Ce(ue,_,De),Zt(x,ue,De),Ce(ue,o,De),T=!0},p(ue,De){const Se=De[0]&384?R_(I,[I[0],I[1],I[2],De[0]&256&&{isChild:ue[8][ue[56]]},I[4],De[0]&128&&{selected:ue[7].selected},I[6],De[0]&128&&{highlighted:ue[7].highlighted},I[8],De[0]&128&&{hovered:ue[7].hovered},De[0]&128&&{layout:{visibility:ue[7].type==ue[56]||ue[7].childType==ue[56]?"visible":"none"}},De[0]&128&&{paint:ue[7].type==ue[56]?na["fill-self"]:ue[7].childType==ue[56]?na["fill-child"]:na.fill}]):{};h.$set(Se);const Oe=De[0]&128?R_(V,[V[0],V[1],V[2],{selected:ue[7].selected},V[4],{highlighted:ue[7].highlighted},{layout:{visibility:ue[7].type==ue[56]||ue[7].childType==ue[56]?"visible":"none"}},{paint:ue[7].type==ue[56]?na["line-active"]:ue[7].childType==ue[56]?na["line-child"]:na.line}]):{};y.$set(Oe);const je=De[0]&128?R_(F,[F[0],F[1],F[2],{selected:ue[7].selected},{layout:{visibility:ue[7].type==ue[56]?"visible":"none"}},{paint:ue[7].type==ue[56]?na["line-self"]:na.line}]):{};x.$set(je)},i(ue){T||(et(h.$$.fragment,ue),et(y.$$.fragment,ue),et(x.$$.fragment,ue),T=!0)},o(ue){pt(h.$$.fragment,ue),pt(y.$$.fragment,ue),pt(x.$$.fragment,ue),T=!1},d(ue){ue&&(R(f),R(_),R(o)),Ht(h,ue),Ht(y,ue),Ht(x,ue)}}}function wx(u){let h,f;const y=[i2[u[56]]];let _={$$slots:{default:[Kk]},$$scope:{ctx:u}};for(let x=0;x<y.length;x+=1)_=cv(_,y[x]);return h=new dw({props:_}),{c(){jt(h.$$.fragment)},l(x){qt(h.$$.fragment,x)},m(x,o){Zt(h,x,o),f=!0},p(x,o){const T={};o[0]&384|o[1]&536870912&&(T.$$scope={dirty:o,ctx:x}),h.$set(T)},i(x){f||(et(h.$$.fragment,x),f=!0)},o(x){pt(h.$$.fragment,x),f=!1},d(x){Ht(h,x)}}}function Xk(u){let h,f,y=Gn(["dz","sdz","ward","dea","lgd"]),_=[];for(let o=0;o<5;o+=1)_[o]=wx(cx(u,y,o));const x=o=>pt(_[o],1,1,()=>{_[o]=null});return{c(){for(let o=0;o<5;o+=1)_[o].c();h=gn()},l(o){for(let T=0;T<5;T+=1)_[T].l(o);h=gn()},m(o,T){for(let I=0;I<5;I+=1)_[I]&&_[I].m(o,T);Ce(o,h,T),f=!0},p(o,T){if(T[0]&8576){y=Gn(["dz","sdz","ward","dea","lgd"]);let I;for(I=0;I<5;I+=1){const D=cx(o,y,I);_[I]?(_[I].p(D,T),et(_[I],1)):(_[I]=wx(D),_[I].c(),et(_[I],1),_[I].m(h.parentNode,h))}for(qu(),I=5;I<5;I+=1)x(I);Zu()}},i(o){if(!f){for(let T=0;T<5;T+=1)et(_[T]);f=!0}},o(o){_=_.filter(Boolean);for(let T=0;T<5;T+=1)pt(_[T]);f=!1},d(o){o&&R(h),Gc(_,o)}}}function Wk(u){return{c:Qi,l:Qi,m:Qi,p:Qi,d:Qi}}function Jk(u){let h,f,y=u[0].place.name+"",_,x,o,T,I,D=Gn([...u[0].place.parents].reverse()),V=[];for(let j=0;j<D.length;j+=1)V[j]=Ex(ux(u,D,j));return{c(){h=Z("span"),f=xe("Parents of "),_=xe(y),x=ve(),o=Z("br"),T=ve(),I=Z("span");for(let j=0;j<V.length;j+=1)V[j].c();this.h()},l(j){h=H(j,"SPAN",{class:!0});var F=re(h);f=we(F,"Parents of "),_=we(F,y),x=_e(F),F.forEach(R),o=H(j,"BR",{}),T=_e(j),I=H(j,"SPAN",{class:!0});var pe=re(I);for(let ue=0;ue<V.length;ue+=1)V[ue].l(pe);pe.forEach(R),this.h()},h(){S(h,"class","text-bold"),S(I,"class","text-small")},m(j,F){Ce(j,h,F),z(h,f),z(h,_),z(h,x),Ce(j,o,F),Ce(j,T,F),Ce(j,I,F);for(let pe=0;pe<V.length;pe+=1)V[pe]&&V[pe].m(I,null)},p(j,F){if(F[0]&1&&y!==(y=j[0].place.name+"")&&ft(_,y),F[0]&1){D=Gn([...j[0].place.parents].reverse());let pe;for(pe=0;pe<D.length;pe+=1){const ue=ux(j,D,pe);V[pe]?V[pe].p(ue,F):(V[pe]=Ex(ue),V[pe].c(),V[pe].m(I,null))}for(;pe<V.length;pe+=1)V[pe].d(1);V.length=D.length}},d(j){j&&(R(h),R(o),R(T),R(I)),Gc(V,j)}}}function Ex(u){let h,f,y=u[53]>0?"↳ ":"",_,x=u[54].name+"",o,T;return{c(){h=Z("span"),f=new vr(!1),_=Z("a"),o=xe(x),this.h()},l(I){h=H(I,"SPAN",{style:!0});var D=re(h);f=_r(D,!1),_=H(D,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var V=re(_);o=we(V,x),V.forEach(R),D.forEach(R),this.h()},h(){f.a=_,S(_,"href",T=qh+"/"+u[54].code),S(_,"data-sveltekit-noscroll",""),S(_,"data-sveltekit-keepfocus",""),S(_,"class","svelte-17c2th3"),ee(h,"display","block"),ee(h,"margin-left",(u[53]>0?(u[53]-1)*15:0)+"px")},m(I,D){Ce(I,h,D),f.m(y,h),z(h,_),z(_,o)},p(I,D){D[0]&1&&x!==(x=I[54].name+"")&&ft(o,x),D[0]&1&&T!==(T=qh+"/"+I[54].code)&&S(_,"href",T)},d(I){I&&R(h)}}}function Yk(u){let h,f,y=u[0].place.name+"",_,x,o=ln[u[0].place.type].name+"",T;return{c(){h=Z("span"),f=xe("No areas below "),_=xe(y),x=ve(),T=xe(o),this.h()},l(I){h=H(I,"SPAN",{class:!0});var D=re(h);f=we(D,"No areas below "),_=we(D,y),x=_e(D),T=we(D,o),D.forEach(R),this.h()},h(){S(h,"class","muted")},m(I,D){Ce(I,h,D),z(h,f),z(h,_),z(h,x),z(h,T)},p(I,D){D[0]&1&&y!==(y=I[0].place.name+"")&&ft(_,y),D[0]&1&&o!==(o=ln[I[0].place.type].name+"")&&ft(T,o)},d(I){I&&R(h)}}}function Qk(u){let h,f=(u[0].place.children[0]?ln[u[0].place.children[0].type].pl:"Areas")+"",y,_,x=u[0].place.name+"",o,T,I,D,V=Gn(u[0].place.children),j=[];for(let F=0;F<V.length;F+=1)j[F]=kx(lx(u,V,F));return{c(){h=Z("span"),y=xe(f),_=xe(" within "),o=xe(x),T=Z("br"),I=ve(),D=Z("span");for(let F=0;F<j.length;F+=1)j[F].c();this.h()},l(F){h=H(F,"SPAN",{class:!0});var pe=re(h);y=we(pe,f),_=we(pe," within "),o=we(pe,x),pe.forEach(R),T=H(F,"BR",{}),I=_e(F),D=H(F,"SPAN",{class:!0});var ue=re(D);for(let De=0;De<j.length;De+=1)j[De].l(ue);ue.forEach(R),this.h()},h(){S(h,"class","text-bold"),S(D,"class","text-small")},m(F,pe){Ce(F,h,pe),z(h,y),z(h,_),z(h,o),Ce(F,T,pe),Ce(F,I,pe),Ce(F,D,pe);for(let ue=0;ue<j.length;ue+=1)j[ue]&&j[ue].m(D,null)},p(F,pe){if(pe[0]&1&&f!==(f=(F[0].place.children[0]?ln[F[0].place.children[0].type].pl:"Areas")+"")&&ft(y,f),pe[0]&1&&x!==(x=F[0].place.name+"")&&ft(o,x),pe[0]&1){V=Gn(F[0].place.children);let ue;for(ue=0;ue<V.length;ue+=1){const De=lx(F,V,ue);j[ue]?j[ue].p(De,pe):(j[ue]=kx(De),j[ue].c(),j[ue].m(D,null))}for(;ue<j.length;ue+=1)j[ue].d(1);j.length=V.length}},d(F){F&&(R(h),R(T),R(I),R(D)),Gc(j,F)}}}function kx(u){let h,f=u[51].name+"",y,_,x=u[53]<u[0].place.children.length-1?", ":"",o;return{c(){h=Z("a"),y=xe(f),o=xe(x),this.h()},l(T){h=H(T,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var I=re(h);y=we(I,f),I.forEach(R),o=we(T,x),this.h()},h(){S(h,"href",_=qh+"/"+u[51].code),S(h,"data-sveltekit-noscroll",""),S(h,"data-sveltekit-keepfocus",""),S(h,"class","svelte-17c2th3")},m(T,I){Ce(T,h,I),z(h,y),Ce(T,o,I)},p(T,I){I[0]&1&&f!==(f=T[51].name+"")&&ft(y,f),I[0]&1&&_!==(_=qh+"/"+T[51].code)&&S(h,"href",_),I[0]&1&&x!==(x=T[53]<T[0].place.children.length-1?", ":"")&&ft(o,x)},d(T){T&&(R(h),R(o))}}}function $k(u){let h=u[0].place.name+"",f,y;return{c(){f=xe(h),y=xe(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(_){f=we(_,h),y=we(_," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(_,x){Ce(_,f,x),Ce(_,y,x)},p(_,x){x[0]&1&&h!==(h=_[0].place.name+"")&&ft(f,h)},d(_){_&&(R(f),R(y))}}}function eS(u){let h=u[0].place.name+"",f,y,_=u[0].place.count.toLocaleString()+"",x,o,T=ln[u[0].place.type].pl+"",I,D,V=u[0].place.parents[0].name+"",j,F;return{c(){f=xe(h),y=xe(" is one of "),x=xe(_),o=ve(),I=xe(T),D=xe(`.\r
								 It is located within `),j=xe(V),F=xe(".")},l(pe){f=we(pe,h),y=we(pe," is one of "),x=we(pe,_),o=_e(pe),I=we(pe,T),D=we(pe,`.\r
								 It is located within `),j=we(pe,V),F=we(pe,".")},m(pe,ue){Ce(pe,f,ue),Ce(pe,y,ue),Ce(pe,x,ue),Ce(pe,o,ue),Ce(pe,I,ue),Ce(pe,D,ue),Ce(pe,j,ue),Ce(pe,F,ue)},p(pe,ue){ue[0]&1&&h!==(h=pe[0].place.name+"")&&ft(f,h),ue[0]&1&&_!==(_=pe[0].place.count.toLocaleString()+"")&&ft(x,_),ue[0]&1&&T!==(T=ln[pe[0].place.type].pl+"")&&ft(I,T),ue[0]&1&&V!==(V=pe[0].place.parents[0].name+"")&&ft(j,V)},d(pe){pe&&(R(f),R(y),R(x),R(o),R(I),R(D),R(j),R(F))}}}function tS(u){let h=u[0].place.name+"",f,y,_=u[0].place.count.toLocaleString()+"",x,o,T=ln[u[0].place.type].pl+"",I,D,V=u[0].place.parents[0].name+"",j,F,pe=ln[u[0].place.parents[0].type].name+"",ue,De;return{c(){f=xe(h),y=xe(" is one of "),x=xe(_),o=ve(),I=xe(T),D=xe(`.  \r
									It is located within `),j=xe(V),F=ve(),ue=xe(pe),De=xe(".")},l(Se){f=we(Se,h),y=we(Se," is one of "),x=we(Se,_),o=_e(Se),I=we(Se,T),D=we(Se,`.  \r
									It is located within `),j=we(Se,V),F=_e(Se),ue=we(Se,pe),De=we(Se,".")},m(Se,Oe){Ce(Se,f,Oe),Ce(Se,y,Oe),Ce(Se,x,Oe),Ce(Se,o,Oe),Ce(Se,I,Oe),Ce(Se,D,Oe),Ce(Se,j,Oe),Ce(Se,F,Oe),Ce(Se,ue,Oe),Ce(Se,De,Oe)},p(Se,Oe){Oe[0]&1&&h!==(h=Se[0].place.name+"")&&ft(f,h),Oe[0]&1&&_!==(_=Se[0].place.count.toLocaleString()+"")&&ft(x,_),Oe[0]&1&&T!==(T=ln[Se[0].place.type].pl+"")&&ft(I,T),Oe[0]&1&&V!==(V=Se[0].place.parents[0].name+"")&&ft(j,V),Oe[0]&1&&pe!==(pe=ln[Se[0].place.parents[0].type].name+"")&&ft(ue,pe)},d(Se){Se&&(R(f),R(y),R(x),R(o),R(I),R(D),R(j),R(F),R(ue),R(De))}}}function Sx(u){let h,f,y,_=u[0].place.data.population.value[2021].all/u[0].place.hectares>u[0].ni.data.population.value[2021].all/u[0].ni.hectares*1.1?"Higher than Northern Ireland value of ":u[0].place.data.population.value[2021].all/u[0].place.hectares<u[0].ni.data.population.value[2021].all/u[0].ni.hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",x,o,T=(u[0].ni.data.population.value[2021].all/u[0].ni.hectares).toFixed(1)+"",I,D;return{c(){h=Z("br"),f=ve(),y=Z("span"),x=xe(_),o=ve(),I=xe(T),D=xe(" persons per hectare"),this.h()},l(V){h=H(V,"BR",{}),f=_e(V),y=H(V,"SPAN",{class:!0});var j=re(y);x=we(j,_),o=_e(j),I=we(j,T),D=we(j," persons per hectare"),j.forEach(R),this.h()},h(){S(y,"class","text-small")},m(V,j){Ce(V,h,j),Ce(V,f,j),Ce(V,y,j),z(y,x),z(y,o),z(y,I),z(y,D)},p(V,j){j[0]&1&&_!==(_=V[0].place.data.population.value[2021].all/V[0].place.hectares>V[0].ni.data.population.value[2021].all/V[0].ni.hectares*1.1?"Higher than Northern Ireland value of ":V[0].place.data.population.value[2021].all/V[0].place.hectares<V[0].ni.data.population.value[2021].all/V[0].ni.hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&ft(x,_),j[0]&1&&T!==(T=(V[0].ni.data.population.value[2021].all/V[0].ni.hectares).toFixed(1)+"")&&ft(I,T)},d(V){V&&(R(h),R(f),R(y))}}}function Ix(u){let h,f,y,_,x;return{c(){h=Z("div"),f=Ha("svg"),y=Ha("rect"),_=ve(),x=xe(u[11]),this.h()},l(o){h=H(o,"DIV",{class:!0});var T=re(h);f=Ga(T,"svg",{width:!0,height:!0,style:!0});var I=re(f);y=Ga(I,"rect",{width:!0,height:!0,style:!0}),re(y).forEach(R),I.forEach(R),_=_e(T),x=we(T,u[11]),T.forEach(R),this.h()},h(){S(y,"width","25"),S(y,"height","4"),ee(y,"fill","#CEDC20"),S(f,"width","25"),S(f,"height","4"),ee(f,"display","inline-block"),ee(f,"margin-bottom","3px"),S(h,"class","text-small muted; ")},m(o,T){Ce(o,h,T),z(h,f),z(f,y),z(h,_),z(h,x)},p(o,T){T[0]&2048&&ft(x,o[11])},d(o){o&&R(h)}}}function rS(u){let h,f,y=u[0].place&&u[0].ni&&px(u);return{c(){y&&y.c(),h=gn()},l(_){y&&y.l(_),h=gn()},m(_,x){y&&y.m(_,x),Ce(_,h,x),f=!0},p(_,x){_[0].place&&_[0].ni?y?(y.p(_,x),x[0]&1&&et(y,1)):(y=px(_),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(qu(),pt(y,1,1,()=>{y=null}),Zu())},i(_){f||(et(y),f=!0)},o(_){pt(y),f=!1},d(_){_&&R(h),y&&y.d(_)}}}function iS(u){let h,f,y,_,x,o,T,I,D,V,j,F,pe,ue,De,Se;return document.title=h=u[0].place.name+" Census Data",pe=new xk({}),De=new t2({props:{column:"wide",$$slots:{default:[rS]},$$scope:{ctx:u}}}),{c(){f=Z("meta"),y=Z("meta"),x=Z("meta"),o=Z("meta"),I=Z("meta"),V=Z("meta"),F=ve(),jt(pe.$$.fragment),ue=ve(),jt(De.$$.fragment),this.h()},l(Oe){const je=n2("svelte-2xtnib",document.head);f=H(je,"META",{name:!0,content:!0}),y=H(je,"META",{property:!0,content:!0}),x=H(je,"META",{property:!0,content:!0}),o=H(je,"META",{property:!0,content:!0}),I=H(je,"META",{property:!0,content:!0}),V=H(je,"META",{name:!0,content:!0}),je.forEach(R),F=_e(Oe),qt(pe.$$.fragment,Oe),ue=_e(Oe),qt(De.$$.fragment,Oe),this.h()},h(){S(f,"name","description"),S(f,"content",""),S(y,"property","og:title"),S(y,"content",_=u[0].place.name+" Census Data"),S(x,"property","og:type"),S(x,"content","website"),S(o,"property","og:url"),S(o,"content",T=dv.base+"/"+u[0].place.code+"/"),S(I,"property","og:description"),S(I,"content",D="Explore census data for "+u[0].place.name+"."),S(V,"name","description"),S(V,"content",j="Explore census data for "+u[0].place.name+".")},m(Oe,je){z(document.head,f),z(document.head,y),z(document.head,x),z(document.head,o),z(document.head,I),z(document.head,V),Ce(Oe,F,je),Zt(pe,Oe,je),Ce(Oe,ue,je),Zt(De,Oe,je),Se=!0},p(Oe,je){(!Se||je[0]&1)&&h!==(h=Oe[0].place.name+" Census Data")&&(document.title=h),(!Se||je[0]&1&&_!==(_=Oe[0].place.name+" Census Data"))&&S(y,"content",_),(!Se||je[0]&1&&T!==(T=dv.base+"/"+Oe[0].place.code+"/"))&&S(o,"content",T),(!Se||je[0]&1&&D!==(D="Explore census data for "+Oe[0].place.name+"."))&&S(I,"content",D),(!Se||je[0]&1&&j!==(j="Explore census data for "+Oe[0].place.name+"."))&&S(V,"content",j);const Lt={};je[0]&4095|je[1]&536870912&&(Lt.$$scope={dirty:je,ctx:Oe}),De.$set(Lt)},i(Oe){Se||(et(pe.$$.fragment,Oe),et(De.$$.fragment,Oe),Se=!0)},o(Oe){pt(pe.$$.fragment,Oe),pt(De.$$.fragment,Oe),Se=!1},d(Oe){Oe&&(R(F),R(ue)),R(f),R(y),R(x),R(o),R(I),R(V),Ht(pe,Oe),Ht(De,Oe)}}}function Ir(){card.ariaHidden=!row.ariaExpanded}function nS(u,h,f){let y,_,x,o,T,{data:I}=h,D,V,j=null,F=!1,pe={selected:null,type:null,childType:null,highlighted:[],hovered:null},ue={};Object.keys(rg).forEach(pr=>f(8,ue[pr]=!1,ue));function De(pr){const $i=(yr,Ki)=>yr+Ki;let yi=pr[0],Mi="perc",pi=I.place.data[yi][Mi][2021],fi=I.place.data[yi][Mi][2011],un=I.ni.data[yi][Mi][2021],mr=ab[yi].map(yr=>yr.category),Pr=ab[yi].map(yr=>yr.label?yr.label:yr.category);return mr.map((yr,Ki)=>Array.isArray(yr)?{x:Pr[Ki],y:yr.map(Dn=>pi[Dn]).reduce($i,0),ni:yr.map(Dn=>un[Dn]).reduce($i,0),prev:yr.map(Dn=>fi[Dn]).reduce($i,0)}:{x:Pr[Ki],y:pi[yr],ni:un[yr],prev:fi[yr]})}function Se(pr){j&&j.fitBounds(pr,{padding:20})}function Oe(pr){let $i=JSON.parse(JSON.stringify(pe)),yi=I.place.code,Mi=I.place.type,pi=I.place.children[0]?I.place.children.map(tr=>tr.code):[],fi=I.place.type=="rgn"?"cty":pi[0]?I.place.children[0].type:null;f(7,pe.selected=yi,pe),f(7,pe.type=Mi,pe),f(7,pe.childType=fi,pe),f(7,pe.highlighted=pi,pe);let un=Object.keys(rg),mr=["fill-color","fill-opacity"],Pr=["line-color","line-width","line-opacity"];j&&(pe.type!=$i.type||pe.childType!=$i.childType)&&(un.forEach(tr=>{let yr=tr==Mi||fi&&tr==fi?"visible":"none";j.setLayoutProperty(tr+"-fill","visibility",yr),j.setLayoutProperty(tr+"-bounds","visibility",yr),I.place.parents[0]&&j.setLayoutProperty(tr+"-self","visibility",yr),f(8,ue[tr]=tr==fi,ue)}),I.place.parents[0]&&(mr.forEach(tr=>j.setPaintProperty(Mi+"-fill",tr,na[pi[0]?"fill-active":"fill-self"][tr])),Pr.forEach(tr=>{j.setPaintProperty(Mi+"-bounds",tr,na["line-active"][tr]),j.setPaintProperty(Mi+"-self",tr,na["line-self"][tr])})),fi&&(mr.forEach(tr=>j.setPaintProperty(fi+"-fill",tr,na["fill-child"][tr])),Pr.forEach(tr=>j.setPaintProperty(fi+"-bounds",tr,na["line-child"][tr]))))}function je(pr){Oe(),Se(I.place.bounds)}function Lt(pr){cb(`${qh}/${pr.detail.code}/`,{noScroll:!0,keepFocus:!0})}function Mt(pr){cb(`${qh}/${pr.detail.value}/`,{noScroll:!0,keepFocus:!0})}function yt(){f(5,V=D<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const Qe=()=>f(3,T=!0),zr=()=>f(2,F=!1),Cr=()=>f(9,o=!1),sr=()=>f(3,T=!0),St=()=>f(2,F=!1),Tt=()=>f(9,o=!1),Lr=()=>f(9,o=!0),Ot=()=>f(3,T=!1),Rr=()=>f(2,F=!1),ot=()=>f(2,F=!0),Fr=()=>f(3,T=!1),Qr=()=>f(9,o=!1),Ar=()=>f(2,F=!1),dr=()=>f(3,T=!0),wi=()=>f(9,o=!1);function Ve(pr){j=pr,f(6,j)}function Tr(){D=this.clientWidth,f(1,D)}function vn(){D=this.clientWidth,f(1,D)}function Ta(){D=this.clientWidth,f(1,D)}function ni(){D=this.clientWidth,f(1,D)}function _n(){D=this.clientWidth,f(1,D)}function $r(){D=this.clientWidth,f(1,D)}function za(){D=this.clientWidth,f(1,D)}function hr(){D=this.clientWidth,f(1,D)}function Pn(){D=this.clientWidth,f(1,D)}function ns(){D=this.clientWidth,f(1,D)}function Mn(){D=this.clientWidth,f(1,D)}function Vt(){D=this.clientWidth,f(1,D)}function Ca(){D=this.clientWidth,f(1,D)}function Ni(){D=this.clientWidth,f(1,D)}return u.$$set=pr=>{"data"in pr&&f(0,I=pr.data)},u.$$.update=()=>{u.$$.dirty[0]&2&&D&&yt(),u.$$.dirty[0]&5&&f(11,y=F?"Same area 2011":I.place&&I.place.parents[0]?"NI 2021":null),u.$$.dirty[0]&1&&f(4,_=!(I.place.type!="ni"&&I.place.type!="lgd")),u.$$.dirty[0]&29&&f(10,x=T?null:F&&_?"prev":!F&&I.place.type!="ni"?"ni":null),u.$$.dirty[0]&1&&I.place&&je(I.place)},f(3,T=!0),f(9,o=!1),[I,D,F,T,_,V,j,pe,ue,o,x,y,De,Lt,Mt,Qe,zr,Cr,sr,St,Tt,Lr,Ot,Rr,ot,Fr,Qr,Ar,dr,wi,Ve,Tr,vn,Ta,ni,_n,$r,za,hr,Pn,ns,Mn,Vt,Ca,Ni]}class pS extends rs{constructor(h){super(),is(this,h,nS,iS,ts,{data:0},null,[-1,-1])}}export{pS as component,hS as universal};
