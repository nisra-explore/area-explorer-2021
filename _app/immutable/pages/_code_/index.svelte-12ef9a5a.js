import{S as ws,i as Es,s as Ss,O as Jh,l as K,m as H,n as X,h as C,p as z,q as ye,J as on,b as ke,Q as Yh,R as Qh,T as $h,f as mt,t as xt,a as Le,c as Re,I as P,M as kn,E as Sn,G as mu,U as ug,V as Nm,W as Tc,r as ce,u as he,v as gt,e as ha,X as yu,Y as Ku,Z as Hu,g as El,d as Sl,j as cg,o as hg,K as lf,_ as ir,$ as Jr,a0 as xo,a1 as wo,w as Tr,x as Ar,y as zr,B as Pr,P as Zg,a2 as Gg,a3 as nm,a4 as am,a5 as Kg,a6 as hd,C as od,z as sd,A as ld}from"../../chunks/index-06ab0f50.js";import{g as Yn,a as pd,S as Hg,m as Kc,b as Um,c as Xg,d as Ka,e as jm}from"../../chunks/Section-46072ec5.js";import{b as Ju}from"../../chunks/paths-1c47712a.js";import{c as xh,w as Yr,d as xa}from"../../chunks/singletons-e0a6622d.js";/* empty css                                                                 */var qm={},Ud={},jd=34,ef=10,qd=13;function pg(c){return new Function("d","return {"+c.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function Wg(c,h){var f=pg(c);return function(y,v){return h(f(y),v,c)}}function Zm(c){var h=Object.create(null),f=[];return c.forEach(function(y){for(var v in y)v in h||f.push(h[v]=v)}),f}function il(c,h){var f=c+"",y=f.length;return y<h?new Array(h-y+1).join(0)+f:f}function Jg(c){return c<0?"-"+il(-c,6):c>9999?"+"+il(c,6):il(c,4)}function Yg(c){var h=c.getUTCHours(),f=c.getUTCMinutes(),y=c.getUTCSeconds(),v=c.getUTCMilliseconds();return isNaN(c)?"Invalid Date":Jg(c.getUTCFullYear())+"-"+il(c.getUTCMonth()+1,2)+"-"+il(c.getUTCDate(),2)+(v?"T"+il(h,2)+":"+il(f,2)+":"+il(y,2)+"."+il(v,3)+"Z":y?"T"+il(h,2)+":"+il(f,2)+":"+il(y,2)+"Z":f||h?"T"+il(h,2)+":"+il(f,2)+"Z":"")}function Qg(c){var h=new RegExp('["'+c+`
\r]`),f=c.charCodeAt(0);function y(N,F){var le,ee,ze=v(N,function(ve,Te){if(le)return le(ve,Te-1);ee=ve,le=F?Wg(ve,F):pg(ve)});return ze.columns=ee||[],ze}function v(N,F){var le=[],ee=N.length,ze=0,ve=0,Te,Ne=ee<=0,zt=!1;N.charCodeAt(ee-1)===ef&&--ee,N.charCodeAt(ee-1)===qd&&--ee;function Dt(){if(Ne)return Ud;if(zt)return zt=!1,qm;var $e,wr=ze,cr;if(N.charCodeAt(wr)===jd){for(;ze++<ee&&N.charCodeAt(ze)!==jd||N.charCodeAt(++ze)===jd;);return($e=ze)>=ee?Ne=!0:(cr=N.charCodeAt(ze++))===ef?zt=!0:cr===qd&&(zt=!0,N.charCodeAt(ze)===ef&&++ze),N.slice(wr+1,$e-1).replace(/""/g,'"')}for(;ze<ee;){if((cr=N.charCodeAt($e=ze++))===ef)zt=!0;else if(cr===qd)zt=!0,N.charCodeAt(ze)===ef&&++ze;else if(cr!==f)continue;return N.slice(wr,$e)}return Ne=!0,N.slice(wr,ee)}for(;(Te=Dt())!==Ud;){for(var ct=[];Te!==qm&&Te!==Ud;)ct.push(Te),Te=Dt();F&&(ct=F(ct,ve++))==null||le.push(ct)}return le}function _(N,F){return N.map(function(le){return F.map(function(ee){return R(le[ee])}).join(c)})}function a(N,F){return F==null&&(F=Zm(N)),[F.map(R).join(c)].concat(_(N,F)).join(`
`)}function T(N,F){return F==null&&(F=Zm(N)),_(N,F).join(`
`)}function k(N){return N.map(B).join(`
`)}function B(N){return N.map(R).join(c)}function R(N){return N==null?"":N instanceof Date?Yg(N):h.test(N+="")?'"'+N.replace(/"/g,'""')+'"':N}return{parse:y,parseRows:v,format:a,formatBody:T,formatRows:k,formatRow:B,formatValue:R}}var $g=Qg(","),e_=$g.parse;function t_(c){for(var h in c){var f=c[h].trim(),y,v;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(y=+f))f=y;else if(v=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))r_&&!!v[4]&&!v[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;c[h]=f}return c}const r_=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function i_(c,h=window.fetch){let y=await(await h(c)).text();return await e_(y,t_)}function Hc(c){let h=Math.round(c)%10;return c==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function fd(c){return c>0?"increase":c<0?"decrease":"nochange"}function Xc(c,h="",f=0){return c!=0?Math.abs(c).toFixed(f)+h:h=="pp"?"n/c":"No change"}function dd(c,h="",f=0){return c!=0?Math.abs(c).toFixed(f)+h:h=="pp"?"n/c":"<1%)"}xh.disable_scroll_handling;const Gm=xh.goto;xh.invalidate;xh.prefetch;xh.prefetch_routes;xh.before_navigate;xh.after_navigate;var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a_={rgb2hsl:uf,rgb2hsv:bd,rgb2hwb:cf,rgb2cmyk:hf,rgb2keyword:pf,rgb2xyz:om,rgb2lab:sm,rgb2lch:o_,hsl2rgb:xd,hsl2hsv:s_,hsl2hwb:l_,hsl2cmyk:u_,hsl2keyword:c_,hsv2rgb:wd,hsv2hsl:h_,hsv2hwb:p_,hsv2cmyk:f_,hsv2keyword:d_,hwb2rgb:ff,hwb2hsl:m_,hwb2hsv:y_,hwb2cmyk:g_,hwb2keyword:__,cmyk2rgb:df,cmyk2hsl:v_,cmyk2hsv:b_,cmyk2hwb:x_,cmyk2keyword:w_,keyword2rgb:wh,keyword2hsl:I_,keyword2hsv:T_,keyword2hwb:A_,keyword2cmyk:z_,keyword2lab:P_,keyword2xyz:C_,xyz2rgb:fg,xyz2lab:dg,xyz2lch:E_,lab2xyz:lm,lab2rgb:mg,lab2lch:um,lch2lab:cm,lch2xyz:S_,lch2rgb:k_};function uf(c){var h=c[0]/255,f=c[1]/255,y=c[2]/255,v=Math.min(h,f,y),_=Math.max(h,f,y),a=_-v,T,k,B;return _==v?T=0:h==_?T=(f-y)/a:f==_?T=2+(y-h)/a:y==_&&(T=4+(h-f)/a),T=Math.min(T*60,360),T<0&&(T+=360),B=(v+_)/2,_==v?k=0:B<=.5?k=a/(_+v):k=a/(2-_-v),[T,k*100,B*100]}function bd(c){var h=c[0],f=c[1],y=c[2],v=Math.min(h,f,y),_=Math.max(h,f,y),a=_-v,T,k,B;return _==0?k=0:k=a/_*1e3/10,_==v?T=0:h==_?T=(f-y)/a:f==_?T=2+(y-h)/a:y==_&&(T=4+(h-f)/a),T=Math.min(T*60,360),T<0&&(T+=360),B=_/255*1e3/10,[T,k,B]}function cf(c){var h=c[0],f=c[1],_=c[2],y=uf(c)[0],v=1/255*Math.min(h,Math.min(f,_)),_=1-1/255*Math.max(h,Math.max(f,_));return[y,v*100,_*100]}function hf(c){var h=c[0]/255,f=c[1]/255,y=c[2]/255,v,_,a,T;return T=Math.min(1-h,1-f,1-y),v=(1-h-T)/(1-T)||0,_=(1-f-T)/(1-T)||0,a=(1-y-T)/(1-T)||0,[v*100,_*100,a*100,T*100]}function pf(c){return yg[JSON.stringify(c)]}function om(c){var h=c[0]/255,f=c[1]/255,y=c[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var v=h*.4124+f*.3576+y*.1805,_=h*.2126+f*.7152+y*.0722,a=h*.0193+f*.1192+y*.9505;return[v*100,_*100,a*100]}function sm(c){var h=om(c),f=h[0],y=h[1],v=h[2],_,a,T;return f/=95.047,y/=100,v/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,v=v>.008856?Math.pow(v,1/3):7.787*v+16/116,_=116*y-16,a=500*(f-y),T=200*(y-v),[_,a,T]}function o_(c){return um(sm(c))}function xd(c){var h=c[0]/360,f=c[1]/100,y=c[2]/100,v,_,a,T,k;if(f==0)return k=y*255,[k,k,k];y<.5?_=y*(1+f):_=y+f-y*f,v=2*y-_,T=[0,0,0];for(var B=0;B<3;B++)a=h+1/3*-(B-1),a<0&&a++,a>1&&a--,6*a<1?k=v+(_-v)*6*a:2*a<1?k=_:3*a<2?k=v+(_-v)*(2/3-a)*6:k=v,T[B]=k*255;return T}function s_(c){var h=c[0],f=c[1]/100,y=c[2]/100,v,_;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,_=(y+f)/2,v=2*f/(y+f),[h,v*100,_*100])}function l_(c){return cf(xd(c))}function u_(c){return hf(xd(c))}function c_(c){return pf(xd(c))}function wd(c){var h=c[0]/60,f=c[1]/100,k=c[2]/100,y=Math.floor(h)%6,v=h-Math.floor(h),_=255*k*(1-f),a=255*k*(1-f*v),T=255*k*(1-f*(1-v)),k=255*k;switch(y){case 0:return[k,T,_];case 1:return[a,k,_];case 2:return[_,k,T];case 3:return[_,a,k];case 4:return[T,_,k];case 5:return[k,_,a]}}function h_(c){var h=c[0],f=c[1]/100,y=c[2]/100,v,_;return _=(2-f)*y,v=f*y,v/=_<=1?_:2-_,v=v||0,_/=2,[h,v*100,_*100]}function p_(c){return cf(wd(c))}function f_(c){return hf(wd(c))}function d_(c){return pf(wd(c))}function ff(c){var h=c[0]/360,f=c[1]/100,y=c[2]/100,v=f+y,_,a,T,k;switch(v>1&&(f/=v,y/=v),_=Math.floor(6*h),a=1-y,T=6*h-_,(_&1)!=0&&(T=1-T),k=f+T*(a-f),_){default:case 6:case 0:r=a,g=k,b=f;break;case 1:r=k,g=a,b=f;break;case 2:r=f,g=a,b=k;break;case 3:r=f,g=k,b=a;break;case 4:r=k,g=f,b=a;break;case 5:r=a,g=f,b=k;break}return[r*255,g*255,b*255]}function m_(c){return uf(ff(c))}function y_(c){return bd(ff(c))}function g_(c){return hf(ff(c))}function __(c){return pf(ff(c))}function df(c){var h=c[0]/100,f=c[1]/100,y=c[2]/100,v=c[3]/100,_,a,T;return _=1-Math.min(1,h*(1-v)+v),a=1-Math.min(1,f*(1-v)+v),T=1-Math.min(1,y*(1-v)+v),[_*255,a*255,T*255]}function v_(c){return uf(df(c))}function b_(c){return bd(df(c))}function x_(c){return cf(df(c))}function w_(c){return pf(df(c))}function fg(c){var h=c[0]/100,f=c[1]/100,y=c[2]/100,v,_,a;return v=h*3.2406+f*-1.5372+y*-.4986,_=h*-.9689+f*1.8758+y*.0415,a=h*.0557+f*-.204+y*1.057,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v=v*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,v=Math.min(Math.max(0,v),1),_=Math.min(Math.max(0,_),1),a=Math.min(Math.max(0,a),1),[v*255,_*255,a*255]}function dg(c){var h=c[0],f=c[1],y=c[2],v,_,a;return h/=95.047,f/=100,y/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,v=116*f-16,_=500*(h-f),a=200*(f-y),[v,_,a]}function E_(c){return um(dg(c))}function lm(c){var h=c[0],f=c[1],y=c[2],v,_,a,T;return h<=8?(_=h*100/903.3,T=7.787*(_/100)+16/116):(_=100*Math.pow((h+16)/116,3),T=Math.pow(_/100,1/3)),v=v/95.047<=.008856?v=95.047*(f/500+T-16/116)/7.787:95.047*Math.pow(f/500+T,3),a=a/108.883<=.008859?a=108.883*(T-y/200-16/116)/7.787:108.883*Math.pow(T-y/200,3),[v,_,a]}function um(c){var h=c[0],f=c[1],y=c[2],v,_,a;return v=Math.atan2(y,f),_=v*360/2/Math.PI,_<0&&(_+=360),a=Math.sqrt(f*f+y*y),[h,a,_]}function mg(c){return fg(lm(c))}function cm(c){var h=c[0],f=c[1],y=c[2],v,_,a;return a=y/360*2*Math.PI,v=f*Math.cos(a),_=f*Math.sin(a),[h,v,_]}function S_(c){return lm(cm(c))}function k_(c){return mg(cm(c))}function wh(c){return Yd[c]}function I_(c){return uf(wh(c))}function T_(c){return bd(wh(c))}function A_(c){return cf(wh(c))}function z_(c){return hf(wh(c))}function P_(c){return sm(wh(c))}function C_(c){return om(wh(c))}var Yd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},yg={};for(var Km in Yd)yg[JSON.stringify(Yd[Km])]=Km;var Zd=a_,_h=function(){return new mf};for(var tf in Zd){_h[tf+"Raw"]=function(c){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),Zd[c](h)}}(tf);var Hm=/(\w+)2(\w+)/.exec(tf),Gd=Hm[1],M_=Hm[2];_h[Gd]=_h[Gd]||{},_h[Gd][M_]=_h[tf]=function(c){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=Zd[c](h);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(tf)}var mf=function(){this.convs={}};mf.prototype.routeSpace=function(c,h){var f=h[0];return f===void 0?this.getValues(c):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(c,f))};mf.prototype.setValues=function(c,h){return this.space=c,this.convs={},this.convs[c]=h,this};mf.prototype.getValues=function(c){var h=this.convs[c];if(!h){var f=this.space,y=this.convs[f];h=_h[f][c](y),this.convs[c]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(c){mf.prototype[c]=function(h){return this.routeSpace(c,arguments)}});var D_=_h,Kd=D_,L_=function(c){var h,f,y,v;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(c)){var _=h[1],a=_.replace(/a$/,""),T=a==="cmyk"?4:3;f=Kd[a],y=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(B,R){return/%$/.test(B)&&R===T?parseFloat(B)/100:(/%$/.test(B),parseFloat(B))}),_===a&&y.push(1),v=y[T]===void 0?1:y[T],y=y.slice(0,T),f[a]=function(){return y}}else if(/^#[A-Fa-f0-9]+$/.test(c)){var a=c.replace(/^#/,""),T=a.length;f=Kd.rgb,y=a.split(T===3?/(.)/:/(..)/),y=y.filter(Boolean).map(function(N){return parseInt(T===3?N+N:N,16)}),v=1,f.rgb=function(){return y},y[0]||(y[0]=0),y[1]||(y[1]=0),y[2]||(y[2]=0)}else f=Kd.keyword,f.keyword=function(){return c},y=c,v=1;var k={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{k.rgb=f.rgb(y)}catch{}try{k.hsl=f.hsl(y)}catch{}try{k.hsv=f.hsv(y)}catch{}try{k.cmyk=f.cmyk(y)}catch{}try{k.keyword=f.keyword(y)}catch{}return k.rgb&&(k.hex="#"+k.rgb.map(function(B){var R=B.toString(16);return R.length===1?"0"+R:R}).join("")),k.rgb&&(k.rgba=k.rgb.concat(v)),k.hsl&&(k.hsla=k.hsl.concat(v)),k.hsv&&(k.hsva=k.hsv.concat(v)),k.cmyk&&(k.cmyka=k.cmyk.concat(v)),k};function R_(c){let h,f;const y=c[5].default,v=Jh(y,c,c[4],null);return{c(){h=K("span"),v&&v.c(),this.h()},l(_){h=H(_,"SPAN",{class:!0,style:!0,role:!0});var a=X(h);v&&v.l(a),a.forEach(C),this.h()},h(){z(h,"class","em svelte-s1t2y4"),ye(h,"background-color",c[0]),ye(h,"color",c[2]),z(h,"role","presentation"),on(h,"nowrap",c[1])},m(_,a){ke(_,h,a),v&&v.m(h,null),f=!0},p(_,[a]){v&&v.p&&(!f||a&16)&&Yh(v,y,_,_[4],f?$h(y,_[4],a,null):Qh(_[4]),null),(!f||a&1)&&ye(h,"background-color",_[0]),(!f||a&4)&&ye(h,"color",_[2]),a&2&&on(h,"nowrap",_[1])},i(_){f||(mt(v,_),f=!0)},o(_){xt(v,_),f=!1},d(_){_&&C(h),v&&v.d(_)}}}function B_(c,h,f){let y,{$$slots:v={},$$scope:_}=h,{color:a="lightgrey"}=h,{nowrap:T=!0}=h;function k(R){return(R[0]*299+R[1]*587+R[2]*114)/1e3>125?"black":"white"}let B="black";return c.$$set=R=>{"color"in R&&f(0,a=R.color),"nowrap"in R&&f(1,T=R.nowrap),"$$scope"in R&&f(4,_=R.$$scope)},c.$$.update=()=>{c.$$.dirty&1&&f(3,y=L_(a).rgb),c.$$.dirty&8&&y&&f(2,B=k(y))},[a,T,B,y,_,v]}class Ed extends ws{constructor(h){super(),Es(this,h,B_,R_,Ss,{color:0,nowrap:1})}}function Xm(c,h,f){const y=c.slice();return y[33]=h[f],y[36]=h,y[35]=f,y}function Wm(c,h,f){const y=c.slice();return y[33]=h[f],y[34]=h,y[35]=f,y}function O_(c){let h,f,y=(c[0]?c[0]:"Select one")+"",v,_,a,T,k,B;return{c(){h=K("a"),f=K("span"),v=ce(y),_=Le(),a=K("span"),T=ce("\xA0"),this.h()},l(R){h=H(R,"A",{id:!0,class:!0});var N=X(h);f=H(N,"SPAN",{class:!0});var F=X(f);v=he(F,y),F.forEach(C),_=Re(N),a=H(N,"SPAN",{class:!0});var le=X(a);T=he(le,"\xA0"),le.forEach(C),N.forEach(C),this.h()},h(){z(f,"class","svelte-13flvue"),z(a,"class","button svelte-13flvue"),on(a,"search",c[3]),on(a,"down",!c[3]),z(h,"id","toggle"),z(h,"class","svelte-13flvue")},m(R,N){ke(R,h,N),P(h,f),P(f,v),P(h,_),P(h,a),P(a,T),k||(B=kn(h,"click",c[12]),k=!0)},p(R,N){N[0]&1&&y!==(y=(R[0]?R[0]:"Select one")+"")&&gt(v,y),N[0]&8&&on(a,"search",R[3]),N[0]&8&&on(a,"down",!R[3])},d(R){R&&C(h),k=!1,B()}}}function F_(c){let h,f,y=c[5][c[1]]+"",v,_,a,T,k,B,R,N=c[2]&&Jm(c);return{c(){h=K("a"),f=K("span"),v=ce(y),_=Le(),N&&N.c(),a=Le(),T=K("span"),k=ce("\xA0"),this.h()},l(F){h=H(F,"A",{id:!0,class:!0});var le=X(h);f=H(le,"SPAN",{class:!0});var ee=X(f);v=he(ee,y),_=Re(ee),N&&N.l(ee),ee.forEach(C),a=Re(le),T=H(le,"SPAN",{class:!0});var ze=X(T);k=he(ze,"\xA0"),ze.forEach(C),le.forEach(C),this.h()},h(){z(f,"class","selection svelte-13flvue"),z(T,"class","button close svelte-13flvue"),z(h,"id","toggle"),z(h,"class","selected svelte-13flvue")},m(F,le){ke(F,h,le),P(h,f),P(f,v),P(f,_),N&&N.m(f,null),P(h,a),P(h,T),P(T,k),B||(R=[kn(T,"click",c[14]),kn(h,"click",c[12])],B=!0)},p(F,le){le[0]&34&&y!==(y=F[5][F[1]]+"")&&gt(v,y),F[2]?N?N.p(F,le):(N=Jm(F),N.c(),N.m(f,null)):N&&(N.d(1),N=null)},d(F){F&&C(h),N&&N.d(),B=!1,mu(R)}}}function Jm(c){let h,f=c[5][c[2]]+"",y;return{c(){h=K("small"),y=ce(f),this.h()},l(v){h=H(v,"SMALL",{class:!0});var _=X(h);y=he(_,f),_.forEach(C),this.h()},h(){z(h,"class","svelte-13flvue")},m(v,_){ke(v,h,_),P(h,y)},p(v,_){_[0]&36&&f!==(f=v[5][v[2]]+"")&&gt(y,f)},d(v){v&&C(h)}}}function Ym(c){let h,f,y,v,_,a;function T(R,N){return R[4].length<3?j_:R[8][0]&&R[2]?U_:R[8][0]?N_:V_}let k=T(c),B=k(c);return{c(){h=K("div"),f=K("input"),y=Le(),v=K("ul"),B.c(),this.h()},l(R){h=H(R,"DIV",{id:!0,style:!0,class:!0});var N=X(h);f=H(N,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),y=Re(N),v=H(N,"UL",{class:!0});var F=X(v);B.l(F),F.forEach(C),N.forEach(C),this.h()},h(){z(f,"type","text"),z(f,"placeholder",""),z(f,"autocomplete","false"),f.autofocus="autofocus",z(f,"onfocus","this.select()"),z(f,"class","svelte-13flvue"),z(v,"class","svelte-13flvue"),z(h,"id","dropdown"),ye(h,"top","0"),z(h,"class","svelte-13flvue")},m(R,N){ke(R,h,N),P(h,f),Nm(f,c[4]),c[24](f),P(h,y),P(h,v),B.m(v,null),c[31](h),f.focus(),_||(a=[kn(f,"input",c[23]),kn(f,"keyup",c[16])],_=!0)},p(R,N){N[0]&16&&f.value!==R[4]&&Nm(f,R[4]),k===(k=T(R))&&B?B.p(R,N):(B.d(1),B=k(R),B&&(B.c(),B.m(v,null)))},d(R){R&&C(h),c[24](null),B.d(),c[31](null),_=!1,mu(a)}}}function V_(c){let h,f;return{c(){h=K("li"),f=ce("No results"),this.h()},l(y){h=H(y,"LI",{class:!0});var v=X(h);f=he(v,"No results"),v.forEach(C),this.h()},h(){z(h,"class","svelte-13flvue")},m(y,v){ke(y,h,v),P(h,f)},p:Sn,d(y){y&&C(h)}}}function N_(c){let h,f=c[8],y=[];for(let v=0;v<f.length;v+=1)y[v]=Qm(Xm(c,f,v));return{c(){for(let v=0;v<y.length;v+=1)y[v].c();h=ha()},l(v){for(let _=0;_<y.length;_+=1)y[_].l(v);h=ha()},m(v,_){for(let a=0;a<y.length;a+=1)y[a].m(v,_);ke(v,h,_)},p(v,_){if(_[0]&10626){f=v[8];let a;for(a=0;a<f.length;a+=1){const T=Xm(v,f,a);y[a]?y[a].p(T,_):(y[a]=Qm(T),y[a].c(),y[a].m(h.parentNode,h))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},d(v){yu(y,v),v&&C(h)}}}function U_(c){let h,f=c[8],y=[];for(let v=0;v<f.length;v+=1)y[v]=$m(Wm(c,f,v));return{c(){for(let v=0;v<y.length;v+=1)y[v].c();h=ha()},l(v){for(let _=0;_<y.length;_+=1)y[_].l(v);h=ha()},m(v,_){for(let a=0;a<y.length;a+=1)y[a].m(v,_);ke(v,h,_)},p(v,_){if(_[0]&10630){f=v[8];let a;for(a=0;a<f.length;a+=1){const T=Wm(v,f,a);y[a]?y[a].p(T,_):(y[a]=$m(T),y[a].c(),y[a].m(h.parentNode,h))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},d(v){yu(y,v),v&&C(h)}}}function j_(c){let h,f;return{c(){h=K("li"),f=ce("Type a name..."),this.h()},l(y){h=H(y,"LI",{class:!0});var v=X(h);f=he(v,"Type a name..."),v.forEach(C),this.h()},h(){z(h,"class","svelte-13flvue")},m(y,v){ke(y,h,v),P(h,f)},p:Sn,d(y){y&&C(h)}}}function Qm(c){let h,f=c[33][c[1]]+"",y,v,_=c[35],a,T;function k(){return c[28](c[33])}function B(){return c[29](c[35])}const R=()=>c[30](h,_),N=()=>c[30](null,_);return{c(){h=K("li"),y=ce(f),v=Le(),this.h()},l(F){h=H(F,"LI",{class:!0});var le=X(h);y=he(le,f),v=Re(le),le.forEach(C),this.h()},h(){z(h,"class","svelte-13flvue"),on(h,"highlight",c[7]==c[35])},m(F,le){ke(F,h,le),P(h,y),P(h,v),R(),a||(T=[kn(h,"click",k),kn(h,"mouseover",B)],a=!0)},p(F,le){c=F,le[0]&258&&f!==(f=c[33][c[1]]+"")&&gt(y,f),_!==c[35]&&(N(),_=c[35],R()),le[0]&128&&on(h,"highlight",c[7]==c[35])},d(F){F&&C(h),N(),a=!1,mu(T)}}}function $m(c){let h,f=c[33][c[1]]+"",y,v,_,a=c[33][c[2]]+"",T,k,B=c[35],R,N;function F(){return c[25](c[33])}function le(){return c[26](c[35])}const ee=()=>c[27](h,B),ze=()=>c[27](null,B);return{c(){h=K("li"),y=ce(f),v=Le(),_=K("small"),T=ce(a),k=Le(),this.h()},l(ve){h=H(ve,"LI",{class:!0});var Te=X(h);y=he(Te,f),v=Re(Te),_=H(Te,"SMALL",{class:!0});var Ne=X(_);T=he(Ne,a),Ne.forEach(C),k=Re(Te),Te.forEach(C),this.h()},h(){z(_,"class","svelte-13flvue"),z(h,"class","svelte-13flvue"),on(h,"highlight",c[7]==c[35])},m(ve,Te){ke(ve,h,Te),P(h,y),P(h,v),P(h,_),P(_,T),P(h,k),ee(),R||(N=[kn(h,"click",F),kn(h,"mouseover",le)],R=!0)},p(ve,Te){c=ve,Te[0]&258&&f!==(f=c[33][c[1]]+"")&&gt(y,f),Te[0]&260&&a!==(a=c[33][c[2]]+"")&&gt(T,a),B!==c[35]&&(ze(),B=c[35],ee()),Te[0]&128&&on(h,"highlight",c[7]==c[35])},d(ve){ve&&C(h),ze(),R=!1,mu(N)}}}function q_(c){let h,f,y,v;function _(B,R){return B[5]&&!B[3]?F_:O_}let a=_(c),T=a(c),k=c[6]&&Ym(c);return{c(){h=K("div"),T.c(),f=Le(),k&&k.c(),this.h()},l(B){h=H(B,"DIV",{id:!0,class:!0});var R=X(h);T.l(R),f=Re(R),k&&k.l(R),R.forEach(C),this.h()},h(){z(h,"id","select"),z(h,"class","svelte-13flvue"),on(h,"active",c[6])},m(B,R){ke(B,h,R),T.m(h,null),P(h,f),k&&k.m(h,null),y||(v=[kn(window,"click",c[17]),kn(h,"keydown",c[15])],y=!0)},p(B,R){a===(a=_(B))&&T?T.p(B,R):(T.d(1),T=a(B),T&&(T.c(),T.m(h,f))),B[6]?k?k.p(B,R):(k=Ym(B),k.c(),k.m(h,null)):k&&(k.d(1),k=null),R[0]&64&&on(h,"active",B[6])},i:Sn,o:Sn,d(B){B&&C(h),T.d(),k&&k.d(),y=!1,mu(v)}}}function Z_(c){return new Promise(h=>setTimeout(h,c))}function G_(c,h,f){let y;const v=ug();let{search_data:_}=h,{selected:a=null}=h,{placeholder:T="Enter a town or area name"}=h,{value:k="code"}=h,{label:B="name"}=h,{group:R=null}=h,{search:N=!1}=h,F=a,le=a?_.find(pt=>{pt[k]==a[k]}):null,ee=!1,ze="",ve=null,Te,Ne,zt,Dt=[];function ct(pt){pt.stopPropagation(),f(4,ze=""),f(6,ee=!ee),Z_(10).then(()=>{zt&&ee&&zt.focus()})}function $e(pt){f(18,a=pt),f(6,ee=!1),v("select",{selected:pt,value:pt[k]})}function wr(pt){pt.stopPropagation(),f(18,a=null),f(21,F=null),f(5,le=null),v("select",{selected:null,value:null})}function cr(pt){ee&&Te[0]&&Number.isInteger(ve)&&(pt.keyCode===38?(f(7,ve-=ve>0?1:0),Dt[ve].scrollIntoView({block:"nearest",inline:"start"})):pt.keyCode===40&&(f(7,ve+=ve<Te.length-1?1:0),Dt[ve].scrollIntoView({block:"nearest",inline:"end"})))}function Wt(pt){Te[0]&&Number.isInteger(ve)&&pt.keyCode===13&&$e(Te[ve])}function wt(pt){pt.target!==Ne&&(f(6,ee=!1),f(7,ve=0))}function vt(){ze=this.value,f(4,ze)}function vr(pt){Tc[pt?"unshift":"push"](()=>{zt=pt,f(10,zt)})}const Bt=pt=>$e(pt),Er=pt=>f(7,ve=pt);function Je(pt,rt){Tc[pt?"unshift":"push"](()=>{Dt[rt]=pt,f(11,Dt)})}const Qt=pt=>$e(pt),Zr=pt=>f(7,ve=pt);function Qr(pt,rt){Tc[pt?"unshift":"push"](()=>{Dt[rt]=pt,f(11,Dt)})}function yr(pt){Tc[pt?"unshift":"push"](()=>{Ne=pt,f(9,Ne)})}return c.$$set=pt=>{"search_data"in pt&&f(19,_=pt.search_data),"selected"in pt&&f(18,a=pt.selected),"placeholder"in pt&&f(0,T=pt.placeholder),"value"in pt&&f(20,k=pt.value),"label"in pt&&f(1,B=pt.label),"group"in pt&&f(2,R=pt.group),"search"in pt&&f(3,N=pt.search)},c.$$.update=()=>{c.$$.dirty[0]&16&&f(22,y=ze?new RegExp(ze,"i"):null),c.$$.dirty[0]&4718594&&(f(8,Te=y?_.filter(pt=>y.test(pt[B])):_),f(7,ve=0)),c.$$.dirty[0]&3932160&&F!=a&&(f(5,le=_.find(pt=>pt[k]==a[k])),f(21,F=a))},[T,B,R,N,ze,le,ee,ve,Te,Ne,zt,Dt,ct,$e,wr,cr,Wt,wt,a,_,k,F,y,vt,vr,Bt,Er,Je,Qt,Zr,Qr,yr]}class K_ extends ws{constructor(h){super(),Es(this,h,G_,q_,Ss,{search_data:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var nf={exports:{}};(function(c,h){(function(f,y){c.exports=y()})(n_,function(){var f,y,v;function _(a,T){if(!f)f=T;else if(!y)y=T;else{var k="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",B={};f(B),v=T(B),typeof window<"u"&&(v.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}}return _(["exports"],function(a){function T(e,t){return e(t={exports:{}},t.exports),t.exports}var k=B;function B(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}B.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},B.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},B.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},B.prototype.solveCurveX=function(e,t){var i,l,p,d,x;for(t===void 0&&(t=1e-6),p=e,x=0;x<8;x++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var S=this.sampleCurveDerivativeX(p);if(Math.abs(S)<1e-6)break;p-=d/S}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},B.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var R=N;function N(e,t){this.x=e,this.y=t}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},N.convert=function(e){return e instanceof N?e:Array.isArray(e)?new N(e[0],e[1]):e};var F=typeof self<"u"?self:{},le=Math.pow(2,53)-1;function ee(e,t,i,l){var p=new k(e,t,i,l);return function(d){return p.solve(d)}}var ze=ee(.25,.1,.25,1);function ve(e,t,i){return Math.min(i,Math.max(t,e))}function Te(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function Ne(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var x in d)e[x]=d[x]}return e}var zt=1;function Dt(){return zt++}function ct(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function $e(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function wr(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function cr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Wt(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function wt(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function vt(e){return Array.isArray(e)?e.map(vt):typeof e=="object"&&e?Wt(e,vt):e}var vr={};function Bt(e){vr[e]||(typeof console<"u"&&console.warn(e),vr[e]=!0)}function Er(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Je(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,x=void 0;i<l;p=i++)t+=((x=e[p]).x-(d=e[i]).x)*(d.y+x.y);return t}function Qt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Zr(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,x){var S=d||x;return t[p]=!S||S.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Qr=null;function yr(e){if(Qr==null){var t=e.navigator?e.navigator.userAgent:null;Qr=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Qr}function pt(e){try{var t=F[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var rt,nr,Bi,Qn,Ti=F.performance&&F.performance.now?F.performance.now.bind(F.performance):Date.now.bind(Date),xi=F.requestAnimationFrame||F.mozRequestAnimationFrame||F.webkitRequestAnimationFrame||F.msRequestAnimationFrame,$r=F.cancelAnimationFrame||F.mozCancelAnimationFrame||F.webkitCancelAnimationFrame||F.msCancelAnimationFrame,Xi={now:Ti,frame:function(e){var t=xi(e);return{cancel:function(){return $r(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=F.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return rt||(rt=F.document.createElement("a")),rt.href=e,rt.href},hardwareConcurrency:F.navigator&&F.navigator.hardwareConcurrency||4,get devicePixelRatio(){return F.devicePixelRatio},get prefersReducedMotion(){return!!F.matchMedia&&(nr==null&&(nr=F.matchMedia("(prefers-reduced-motion: reduce)")),nr.matches)}},Jt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ai={supported:!1,testSupport:function(e){!Ra&&Qn&&(kt?Ct(e):Bi=e)}},Ra=!1,kt=!1;function Ct(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Qn),e.isContextLost())return;Ai.supported=!0}catch{}e.deleteTexture(t),Ra=!0}F.document&&((Qn=F.document.createElement("img")).onload=function(){Bi&&Ct(Bi),Bi=null,kt=!0},Qn.onerror=function(){Ra=!0,Bi=null},Qn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ei="01",Sr=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function br(e){return e.indexOf("mapbox:")===0}Sr.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ei,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Sr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Sr.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Sr.prototype.normalizeStyleURL=function(e,t){if(!br(e))return e;var i=Or(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Sr.prototype.normalizeGlyphsURL=function(e,t){if(!br(e))return e;var i=Or(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Sr.prototype.normalizeSourceURL=function(e,t){if(!br(e))return e;var i=Or(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Sr.prototype.normalizeSpriteURL=function(e,t,i,l){var p=Or(e);return br(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,hr(p))},Sr.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!br(e))return e;var i=Or(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Xi.devicePixelRatio>=2||t===512?"@2x":"")+(Ai.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,x=p;d<x.length;d+=1){var S=x[d].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(i.params)||Jt.ACCESS_TOKEN;return Jt.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Sr.prototype.canonicalizeTileURL=function(e,t){var i=Or(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Sr.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&br(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var x=d[p];oi(x)?l.push(this.canonicalizeTileURL(x,i)):l.push(x)}return l},Sr.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=Or(Jt.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!Jt.REQUIRE_ACCESS_TOKEN)return hr(e);if(!(t=t||Jt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),hr(e)};var sn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function oi(e){return sn.test(e)}var wi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Or(e){var t=e.match(wi);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function hr(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function ar(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(F.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var si=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};si.prototype.getStorageKey=function(e){var t,i=ar(Jt.ACCESS_TOKEN);return t=i&&i.u?F.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(Number("0x"+p))})):Jt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},si.prototype.fetchEventData=function(){var e=pt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=F.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=F.localStorage.getItem(i);p&&(this.anonId=p)}catch{Bt("Unable to read from LocalStorage")}},si.prototype.saveEventData=function(){var e=pt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{F.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&F.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Bt("Unable to write to LocalStorage")}},si.prototype.processRequests=function(e){},si.prototype.postEvent=function(e,t,i,l){var p=this;if(Jt.EVENTS_URL){var d=Or(Jt.EVENTS_URL);d.params.push("access_token="+(l||Jt.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:ei,userId:this.anonId},S=t?Ne(x,t):x,A={url:hr(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=Vr(A,function(M){p.pendingRequest=null,i(M),p.saveEventData(),p.processRequests(l)})}},si.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var li,ln,ti=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p,(Jt.EVENTS_URL&&d||Jt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(x){return br(x)||oi(x)}))&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,x=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),$e(this.anonId)||(this.anonId=ct()),this.postEvent(x,{skuToken:this.skuToken},function(S){S||d&&(l.success[d]=!0)},i))}},t}(si),Oi=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){Jt.EVENTS_URL&&Jt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return br(p)||oi(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=ar(Jt.ACCESS_TOKEN),d=p?p.u:Jt.ACCESS_TOKEN,x=d!==this.eventData.tokenU;$e(this.anonId)||(this.anonId=ct(),x=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var A=new Date(this.eventData.lastSuccess),M=new Date(S),L=(S-this.eventData.lastSuccess)/864e5;x=x||L>=1||L<-1||A.getDate()!==M.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(V){V||(l.eventData.lastSuccess=S,l.eventData.tokenU=d)},i)}},t}(si)),pa=Oi.postTurnstileEvent.bind(Oi),Ha=new ti,Xa=Ha.postMapLoadEvent.bind(Ha),In=500,On=50;function ui(){F.caches&&!li&&(li=F.caches.open("mapbox-tiles"))}function Fi(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var un,Wa=1/0;function mn(){return un==null&&(un=F.OffscreenCanvas&&new F.OffscreenCanvas(1,1).getContext("2d")&&typeof F.createImageBitmap=="function"),un}var Go={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Go);var cn=function(e){function t(i,l,p){l===401&&oi(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Ei=Qt()?function(){return self.worker&&self.worker.referrer}:function(){return(F.location.protocol==="blob:"?F.parent:F).location.href},Gr,Wi,Fn=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Ei())&&!/^\w+:/.test(i))){if(F.fetch&&F.Request&&F.AbortController&&F.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,x=new F.AbortController,S=new F.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Ei(),signal:x.signal}),A=!1,M=!1,L=(d=S.url).indexOf("sku=")>0&&oi(d);l.type==="json"&&S.headers.set("Accept","application/json");var V=function(W,ne,oe){if(!M){if(W&&W.message!=="SecurityError"&&Bt(W),ne&&oe)return q(ne);var me=Date.now();F.fetch(S).then(function(ue){if(ue.ok){var be=L?ue.clone():null;return q(ue,be,me)}return p(new cn(ue.statusText,ue.status,l.url))}).catch(function(ue){ue.code!==20&&p(new Error(ue.message))})}},q=function(W,ne,oe){(l.type==="arrayBuffer"?W.arrayBuffer():l.type==="json"?W.json():W.text()).then(function(me){M||(ne&&oe&&function(ue,be,Se){if(ui(),li){var Ae={status:be.status,statusText:be.statusText,headers:new F.Headers};be.headers.forEach(function(Fe,Ge){return Ae.headers.set(Ge,Fe)});var De=Zr(be.headers.get("Cache-Control")||"");De["no-store"]||(De["max-age"]&&Ae.headers.set("Expires",new Date(Se+1e3*De["max-age"]).toUTCString()),new Date(Ae.headers.get("Expires")).getTime()-Se<42e4||function(Fe,Ge){if(ln===void 0)try{new Response(new ReadableStream),ln=!0}catch{ln=!1}ln?Ge(Fe.body):Fe.blob().then(Ge)}(be,function(Fe){var Ge=new F.Response(Fe,Ae);ui(),li&&li.then(function(tt){return tt.put(Fi(ue.url),Ge)}).catch(function(tt){return Bt(tt.message)})}))}}(S,ne,oe),A=!0,p(null,me,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(function(me){M||p(new Error(me.message))})};return L?function(W,ne){if(ui(),!li)return ne(null);var oe=Fi(W.url);li.then(function(me){me.match(oe).then(function(ue){var be=function(Se){if(!Se)return!1;var Ae=new Date(Se.headers.get("Expires")||0),De=Zr(Se.headers.get("Cache-Control")||"");return Ae>Date.now()&&!De["no-cache"]}(ue);me.delete(oe),be&&me.put(oe,ue.clone()),ne(null,ue,be)}).catch(ne)}).catch(ne)}(S,V):V(null,null),{cancel:function(){M=!0,A||x.abort()}}}(e,t);if(Qt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new F.XMLHttpRequest;for(var x in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(x,l.headers[x]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var S=d.response;if(l.type==="json")try{S=JSON.parse(d.response)}catch(A){return p(A)}p(null,S,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new cn(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},yn=function(e,t){return Fn(Ne(e,{type:"arrayBuffer"}),t)},Vr=function(e,t){return Fn(Ne(e,{method:"POST"}),t)},O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Gr=[],Wi=0;var j=function(e,t){if(Ai.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Wi>=Jt.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return Gr.push(i),i}Wi++;var l=!1,p=function(){if(!l)for(l=!0,Wi--;Gr.length&&Wi<Jt.MAX_PARALLEL_IMAGE_REQUESTS;){var x=Gr.shift();x.cancelled||(x.cancel=j(x.requestParameters,x.callback).cancel)}},d=yn(e,function(x,S,A,M){p(),x?t(x):S&&(mn()?function(L,V){var q=new F.Blob([new Uint8Array(L)],{type:"image/png"});F.createImageBitmap(q).then(function(W){V(null,W)}).catch(function(W){V(new Error("Could not load image because of "+W.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,t):function(L,V,q,W){var ne=new F.Image,oe=F.URL;ne.onload=function(){V(null,ne),oe.revokeObjectURL(ne.src),ne.onload=null,F.requestAnimationFrame(function(){ne.src=O})},ne.onerror=function(){return V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var me=new F.Blob([new Uint8Array(L)],{type:"image/png"});ne.cacheControl=q,ne.expires=W,ne.src=L.byteLength?oe.createObjectURL(me):O}(S,t,A,M))});return{cancel:function(){d.cancel(),p()}}};function Z(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function $(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var ie=function(e,t){t===void 0&&(t={}),Ne(this,t),this.type=e},de=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",Ne({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ie),ge=function(){};ge.prototype.on=function(e,t){return this._listeners=this._listeners||{},Z(e,t,this._listeners),this},ge.prototype.off=function(e,t){return $(e,t,this._listeners),$(e,t,this._oneTimeListeners),this},ge.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Z(e,t,this._oneTimeListeners),this},ge.prototype.fire=function(e,t){typeof e=="string"&&(e=new ie(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,x=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<x.length;d+=1){var S=x[d];$(i,S,this._oneTimeListeners),S.call(this,e)}var A=this._eventedParent;A&&(Ne(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(e))}else e instanceof de&&console.error(e.error);return this},ge.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ge.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var G={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},te=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function we(e){var t=e.value;return t?[new te(e.key,t,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var x in d)e[x]=d[x]}return e}function qe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ie(e){if(Array.isArray(e))return e.map(Ie);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Ie(e[i]);return t}return qe(e)}var je=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),it=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};it.prototype.concat=function(e){return new it(this,e)},it.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},it.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var nt={kind:"null"},Me={kind:"number"},Ye={kind:"string"},Ke={kind:"boolean"},Qe={kind:"color"},Lt={kind:"object"},Xe={kind:"value"},jt={kind:"collator"},sr={kind:"formatted"},It={kind:"resolvedImage"};function Yt(e,t){return{kind:"array",itemType:e,N:t}}function Vt(e){if(e.kind==="array"){var t=Vt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Dr=[nt,Me,Ye,Ke,Qe,sr,Lt,Yt(Xe),It];function Nt(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Nt(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=Dr;i<l.length;i+=1)if(!Nt(l[i],t))return null}}return"Expected "+Vt(e)+" but found "+Vt(t)+" instead."}function dr(e,t){return t.some(function(i){return i.kind===e.kind})}function or(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Kt=T(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(S){return(S=Math.round(S))<0?0:S>255?255:S}function p(S){return l(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function d(S){return(A=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:A>1?1:A;var A}function x(S,A,M){return M<0?M+=1:M>1&&(M-=1),6*M<1?S+(A-S)*M*6:2*M<1?A:3*M<2?S+(A-S)*(2/3-M)*6:S}try{t.parseCSSColor=function(S){var A,M=S.replace(/ /g,"").toLowerCase();if(M in i)return i[M].slice();if(M[0]==="#")return M.length===4?(A=parseInt(M.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:M.length===7&&(A=parseInt(M.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var L=M.indexOf("("),V=M.indexOf(")");if(L!==-1&&V+1===M.length){var q=M.substr(0,L),W=M.substr(L+1,V-(L+1)).split(","),ne=1;switch(q){case"rgba":if(W.length!==4)return null;ne=d(W.pop());case"rgb":return W.length!==3?null:[p(W[0]),p(W[1]),p(W[2]),ne];case"hsla":if(W.length!==4)return null;ne=d(W.pop());case"hsl":if(W.length!==3)return null;var oe=(parseFloat(W[0])%360+360)%360/360,me=d(W[1]),ue=d(W[2]),be=ue<=.5?ue*(me+1):ue+me-ue*me,Se=2*ue-be;return[l(255*x(Se,be,oe+1/3)),l(255*x(Se,be,oe)),l(255*x(Se,be,oe-1/3)),ne];default:return null}}return null}}catch{}}).parseCSSColor,tr=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};tr.parse=function(e){if(e){if(e instanceof tr)return e;if(typeof e=="string"){var t=Kt(e);if(t)return new tr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},tr.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},tr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},tr.black=new tr(0,0,0,1),tr.white=new tr(1,1,1,1),tr.transparent=new tr(0,0,0,0),tr.red=new tr(1,0,0,1);var ci=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ci.prototype.compare=function(e,t){return this.collator.compare(e,t)},ci.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var gn=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},fi=function(e){this.sections=e};fi.fromString=function(e){return new fi([new gn(e,null,null,null,null)])},fi.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},fi.factory=function(e){return e instanceof fi?e:fi.fromString(e)},fi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},fi.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var di=function(e){this.name=e.name,this.available=e.available};function Ji(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Yi(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof tr||e instanceof ci||e instanceof fi||e instanceof di)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!Yi(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!Yi(e[l]))return!1;return!0}return!1}function mr(e){if(e===null)return nt;if(typeof e=="string")return Ye;if(typeof e=="boolean")return Ke;if(typeof e=="number")return Me;if(e instanceof tr)return Qe;if(e instanceof ci)return jt;if(e instanceof fi)return sr;if(e instanceof di)return It;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=mr(p[l]);if(t){if(t===d)continue;t=Xe;break}t=d}return Yt(t||Xe,i)}return Lt}function Vi(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof tr||e instanceof fi||e instanceof di?e.toString():JSON.stringify(e)}di.prototype.toString=function(){return this.name},di.fromString=function(e){return e?new di({name:e,available:!1}):null},di.prototype.serialize=function(){return["image",this.name]};var Qi=function(e,t){this.type=e,this.value=t};Qi.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Yi(e[1]))return t.error("invalid value");var i=e[1],l=mr(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new Qi(l,i)},Qi.prototype.evaluate=function(){return this.value},Qi.prototype.eachChild=function(){},Qi.prototype.outputDefined=function(){return!0},Qi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof tr?["rgba"].concat(this.value.toArray()):this.value instanceof fi?this.value.serialize():this.value};var Nr=function(e){this.name="ExpressionEvaluationError",this.message=e};Nr.prototype.toJSON=function(){return this.message};var $i={string:Ye,number:Me,boolean:Ke,object:Lt},gr=function(e,t){this.type=e,this.args=t};gr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,x;if(e.length>2){var S=e[1];if(typeof S!="string"||!(S in $i)||S==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=$i[S],l++}else d=Xe;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);x=e[2],l++}i=Yt(d,x)}else i=$i[p];for(var A=[];l<e.length;l++){var M=t.parse(e[l],l,Xe);if(!M)return null;A.push(M)}return new gr(i,A)},gr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!Nt(this.type,mr(i)))return i;if(t===this.args.length-1)throw new Nr("Expected value to be of type "+Vt(this.type)+", but found "+Vt(mr(i))+" instead.")}return null},gr.prototype.eachChild=function(e){this.args.forEach(e)},gr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},gr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var ri=function(e){this.type=sr,this.sections=e};ri.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var x=e[d];if(p&&typeof x=="object"&&!Array.isArray(x)){p=!1;var S=null;if(x["font-scale"]&&!(S=t.parse(x["font-scale"],1,Me)))return null;var A=null;if(x["text-font"]&&!(A=t.parse(x["text-font"],1,Yt(Ye))))return null;var M=null;if(x["text-color"]&&!(M=t.parse(x["text-color"],1,Qe)))return null;var L=l[l.length-1];L.scale=S,L.font=A,L.textColor=M}else{var V=t.parse(e[d],1,Xe);if(!V)return null;var q=V.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:V,scale:null,font:null,textColor:null})}}return new ri(l)},ri.prototype.evaluate=function(e){return new fi(this.sections.map(function(t){var i=t.content.evaluate(e);return mr(i)===It?new gn("",i,null,null,null):new gn(Vi(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},ri.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var zi=function(e){this.type=It,this.input=e};zi.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Ye);return i?new zi(i):t.error("No image name provided.")},zi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=di.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},zi.prototype.eachChild=function(e){e(this.input)},zi.prototype.outputDefined=function(){return!1},zi.prototype.serialize=function(){return["image",this.input.serialize()]};var ks={"to-boolean":Ke,"to-color":Qe,"to-number":Me,"to-string":Ye},Ni=function(e,t){this.type=e,this.args=t};Ni.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=ks[i],p=[],d=1;d<e.length;d++){var x=t.parse(e[d],d,Xe);if(!x)return null;p.push(x)}return new Ni(l,p)},Ni.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof tr)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Ji(t[0],t[1],t[2],t[3])))return new tr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Nr(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var x=null,S=0,A=this.args;S<A.length;S+=1){if((x=A[S].evaluate(e))===null)return 0;var M=Number(x);if(!isNaN(M))return M}throw new Nr("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?fi.fromString(Vi(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?di.fromString(Vi(this.args[0].evaluate(e))):Vi(this.args[0].evaluate(e))},Ni.prototype.eachChild=function(e){this.args.forEach(e)},Ni.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ni.prototype.serialize=function(){if(this.type.kind==="formatted")return new ri([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new zi(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Vn=["Unknown","Point","LineString","Polygon"],Kr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Kr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Kr.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Vn[this.feature.type]:this.feature.type:null},Kr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Kr.prototype.canonicalID=function(){return this.canonical},Kr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Kr.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=tr.parse(e)),t};var Ur=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};Ur.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Ur.prototype.eachChild=function(e){this.args.forEach(e)},Ur.prototype.outputDefined=function(){return!1},Ur.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Ur.parse=function(e,t){var i,l=e[0],p=Ur.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=x.filter(function(At){var st=At[0];return!Array.isArray(st)||st.length===e.length-1}),A=null,M=0,L=S;M<L.length;M+=1){var V=L[M],q=V[0],W=V[1];A=new kr(t.registry,t.path,null,t.scope);for(var ne=[],oe=!1,me=1;me<e.length;me++){var ue=e[me],be=Array.isArray(q)?q[me-1]:q.type,Se=A.parse(ue,1+ne.length,be);if(!Se){oe=!0;break}ne.push(Se)}if(!oe)if(Array.isArray(q)&&q.length!==ne.length)A.error("Expected "+q.length+" arguments, but found "+ne.length+" instead.");else{for(var Ae=0;Ae<ne.length;Ae++){var De=Array.isArray(q)?q[Ae]:q.type,Fe=ne[Ae];A.concat(Ae+1).checkSubtype(De,Fe.type)}if(A.errors.length===0)return new Ur(l,d,W,ne)}}if(S.length===1)(i=t.errors).push.apply(i,A.errors);else{for(var Ge=(S.length?S:x).map(function(At){var st;return st=At[0],Array.isArray(st)?"("+st.map(Vt).join(", ")+")":"("+Vt(st.type)+"...)"}).join(" | "),tt=[],bt=1;bt<e.length;bt++){var lt=t.parse(e[bt],1+tt.length);if(!lt)return null;tt.push(Vt(lt.type))}t.error("Expected arguments of type "+Ge+", but found ("+tt.join(", ")+") instead.")}return null},Ur.register=function(e,t){for(var i in Ur.definitions=t,t)e[i]=Ur};var mi=function(e,t,i){this.type=jt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function ii(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ja(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function wa(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function jl(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function Ko(e,t){for(var i,l,p,d,x,S,A,M=!1,L=0,V=t.length;L<V;L++)for(var q=t[L],W=0,ne=q.length;W<ne-1;W++){if((d=(i=e)[0]-(l=q[W])[0])*(A=i[1]-(p=q[W+1])[1])-(S=i[0]-p[0])*(x=i[1]-l[1])==0&&d*S<=0&&x*A<=0)return!1;jl(e,q[W],q[W+1])&&(M=!M)}return M}function Tn(e,t){for(var i=0;i<t.length;i++)if(Ko(e,t[i]))return!0;return!1}function Mn(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],x=(e[0]-i[0])*d-p*(e[1]-i[1]),S=(t[0]-i[0])*d-p*(t[1]-i[1]);return x>0&&S<0||x<0&&S>0}function Ea(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],x=0;x<d.length-1;++x)if((V=[(L=d[x+1])[0]-(M=d[x])[0],L[1]-M[1]])[0]*(q=[(A=t)[0]-(S=e)[0],A[1]-S[1]])[1]-V[1]*q[0]!=0&&Mn(S,A,M,L)&&Mn(M,L,S,A))return!0;var S,A,M,L,V,q;return!1}function Sa(e,t){for(var i=0;i<e.length;++i)if(!Ko(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(Ea(e[l],e[l+1],t))return!1;return!0}function co(e,t){for(var i=0;i<t.length;i++)if(Sa(e,t[i]))return!0;return!1}function $n(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],x=0;x<e[p].length;x++){var S=wa(e[p][x],i);ii(t,S),d.push(S)}l.push(d)}return l}function js(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=$n(e[p],t,i);l.push(d)}return l}function Ho(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}ii(t,e)}function Eo(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],x=[],S=0,A=e;S<A.length;S+=1)for(var M=0,L=A[S];M<L.length;M+=1){var V=L[M],q=[V.x+d[0],V.y+d[1]];Ho(q,t,i,p),x.push(q)}return x}function Pi(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),x=[8192*l.x,8192*l.y],S=[],A=0,M=e;A<M.length;A+=1){for(var L=[],V=0,q=M[A];V<q.length;V+=1){var W=q[V],ne=[W.x+x[0],W.y+x[1]];ii(t,ne),L.push(ne)}S.push(L)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var oe=0,me=S;oe<me.length;oe+=1)for(var ue=0,be=me[oe];ue<be.length;ue+=1)Ho(be[ue],t,i,d)}return S}mi.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Ke);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Ke);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,Ye))?null:new mi(l,p,d)},mi.prototype.evaluate=function(e){return new ci(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},mi.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},mi.prototype.outputDefined=function(){return!1},mi.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Si=function(e,t){this.type=Ke,this.geojson=e,this.geometries=t};function en(e){if(e instanceof Ur&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Si)return!1;var t=!0;return e.eachChild(function(i){t&&!en(i)&&(t=!1)}),t}function xe(e){if(e instanceof Ur&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!xe(i)&&(t=!1)}),t}function Ui(e,t){if(e instanceof Ur&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!Ui(l,t)&&(i=!1)}),i}Si.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Yi(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Si(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Si(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Si(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Si.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=$n(i.coordinates,p,d),S=Eo(t.geometry(),l,p,d);if(!Ja(l,p))return!1;for(var A=0,M=S;A<M.length;A+=1)if(!Ko(M[A],x))return!1}if(i.type==="MultiPolygon"){var L=js(i.coordinates,p,d),V=Eo(t.geometry(),l,p,d);if(!Ja(l,p))return!1;for(var q=0,W=V;q<W.length;q+=1)if(!Tn(W[q],L))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=$n(i.coordinates,p,d),S=Pi(t.geometry(),l,p,d);if(!Ja(l,p))return!1;for(var A=0,M=S;A<M.length;A+=1)if(!Sa(M[A],x))return!1}if(i.type==="MultiPolygon"){var L=js(i.coordinates,p,d),V=Pi(t.geometry(),l,p,d);if(!Ja(l,p))return!1;for(var q=0,W=V;q<W.length;q+=1)if(!co(W[q],L))return!1}return!0}(e,this.geometries)}return!1},Si.prototype.eachChild=function(){},Si.prototype.outputDefined=function(){return!0},Si.prototype.serialize=function(){return["within",this.geojson]};var An=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};An.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new An(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},An.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},An.prototype.eachChild=function(){},An.prototype.outputDefined=function(){return!1},An.prototype.serialize=function(){return["var",this.name]};var kr=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new it),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function ea(e,t){for(var i,l=e.length-1,p=0,d=l,x=0;p<=d;)if((i=e[x=Math.floor((p+d)/2)])<=t){if(x===l||t<e[x+1])return x;p=x+1}else{if(!(i>t))throw new Nr("Input is not a number.");d=x-1}return 0}kr.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},kr.prototype._parse=function(e,t){function i(M,L,V){return V==="assert"?new gr(L,[M]):V==="coerce"?new Ni(L,[M]):M}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var x=this.expectedType,S=d.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else d=i(d,x,t.typeAnnotation||"coerce");else d=i(d,x,t.typeAnnotation||"assert")}if(!(d instanceof Qi)&&d.type.kind!=="resolvedImage"&&function M(L){if(L instanceof An)return M(L.boundExpression);if(L instanceof Ur&&L.name==="error"||L instanceof mi||L instanceof Si)return!1;var V=L instanceof Ni||L instanceof gr,q=!0;return L.eachChild(function(W){q=V?q&&M(W):q&&W instanceof Qi}),!!q&&en(L)&&Ui(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var A=new Kr;try{d=new Qi(d.type,d.evaluate(A))}catch(M){return this.error(M.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},kr.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new kr(this.registry,l,t||null,p,this.errors)},kr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new je(l,e))},kr.prototype.checkSubtype=function(e,t){var i=Nt(e,t);return i&&this.error(i),i};var yi=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],x=d[1];this.labels.push(d[0]),this.outputs.push(x)}};function Lr(e,t,i){return e*(1-i)+t*i}yi.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Me);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var x=d===1?-1/0:e[d],S=e[d+1],A=d,M=d+1;if(typeof x!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(l.length&&l[l.length-1][0]>=x)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);var L=t.parse(S,M,p);if(!L)return null;p=p||L.type,l.push([x,L])}return new yi(p,i,l)},yi.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[ea(t,l)].evaluate(e)},yi.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},yi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},yi.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var ka=Object.freeze({__proto__:null,number:Lr,color:function(e,t,i){return new tr(Lr(e.r,t.r,i),Lr(e.g,t.g,i),Lr(e.b,t.b,i),Lr(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return Lr(l,t[p],i)})}}),rs=6/29*3*(6/29),Xo=Math.PI/180,gu=180/Math.PI;function al(e){return e>.008856451679035631?Math.pow(e,1/3):e/rs+4/29}function is(e){return e>6/29?e*e*e:rs*(e-4/29)}function Wo(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ia(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nn(e){var t=Ia(e.r),i=Ia(e.g),l=Ia(e.b),p=al((.4124564*t+.3575761*i+.1804375*l)/.95047),d=al((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-al((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function fa(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*is(t),i=.95047*is(i),l=1.08883*is(l),new tr(Wo(3.2404542*i-1.5371385*t-.4985314*l),Wo(-.969266*i+1.8760108*t+.041556*l),Wo(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function _u(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var ns={forward:Nn,reverse:fa,interpolate:function(e,t,i){return{l:Lr(e.l,t.l,i),a:Lr(e.a,t.a,i),b:Lr(e.b,t.b,i),alpha:Lr(e.alpha,t.alpha,i)}}},_n={forward:function(e){var t=Nn(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*gu;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Xo,i=e.c;return fa({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:_u(e.h,t.h,i),c:Lr(e.c,t.c,i),l:Lr(e.l,t.l,i),alpha:Lr(e.alpha,t.alpha,i)}}},ql=Object.freeze({__proto__:null,lab:ns,hcl:_n}),ni=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,x=p;d<x.length;d+=1){var S=x[d],A=S[1];this.labels.push(S[0]),this.outputs.push(A)}};function tn(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}ni.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=tn(t,e.base,i,l);else if(e.name==="linear")p=tn(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new k(d[0],d[1],d[2],d[3]).solve(tn(t,1,i,l))}return p},ni.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var x=l[1];if(typeof x!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:x}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var S=l.slice(1);if(S.length!==4||S.some(function(me){return typeof me!="number"||me<0||me>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:S}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Me)))return null;var A=[],M=null;i==="interpolate-hcl"||i==="interpolate-lab"?M=Qe:t.expectedType&&t.expectedType.kind!=="value"&&(M=t.expectedType);for(var L=0;L<d.length;L+=2){var V=d[L],q=d[L+1],W=L+3,ne=L+4;if(typeof V!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(A.length&&A[A.length-1][0]>=V)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);var oe=t.parse(q,ne,M);if(!oe)return null;M=M||oe.type,A.push([V,oe])}return M.kind==="number"||M.kind==="color"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new ni(M,i,l,p,A):t.error("Type "+Vt(M)+" is not interpolatable.")},ni.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=ea(t,l),x=ni.interpolationFactor(this.interpolation,l,t[d],t[d+1]),S=i[d].evaluate(e),A=i[d+1].evaluate(e);return this.operator==="interpolate"?ka[this.type.kind.toLowerCase()](S,A,x):this.operator==="interpolate-hcl"?_n.reverse(_n.interpolate(_n.forward(S),_n.forward(A),x)):ns.reverse(ns.interpolate(ns.forward(S),ns.forward(A),x))},ni.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},ni.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},ni.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var Hr=function(e,t){this.type=e,this.args=t};Hr.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,x=e.slice(1);d<x.length;d+=1){var S=t.parse(x[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!S)return null;i=i||S.type,p.push(S)}var A=l&&p.some(function(M){return Nt(l,M.type)});return new Hr(A?Xe:i,p)},Hr.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof di&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},Hr.prototype.eachChild=function(e){this.args.forEach(e)},Hr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Hr.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Jo=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Jo.prototype.evaluate=function(e){return this.result.evaluate(e)},Jo.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},Jo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var x=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return x?new Jo(i,x):null},Jo.prototype.outputDefined=function(){return this.result.outputDefined()},Jo.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var Ta=function(e,t,i){this.type=e,this.index=t,this.input=i};Ta.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Me),l=t.parse(e[2],2,Yt(t.expectedType||Xe));return i&&l?new Ta(l.type.itemType,i,l):null},Ta.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Nr("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new Nr("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new Nr("Array index must be an integer, but found "+t+" instead.");return i[t]},Ta.prototype.eachChild=function(e){e(this.index),e(this.input)},Ta.prototype.outputDefined=function(){return!1},Ta.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var da=function(e,t){this.type=Ke,this.needle=e,this.haystack=t};da.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Xe),l=t.parse(e[2],2,Xe);return i&&l?dr(i.type,[Ke,Ye,Me,nt,Xe])?new da(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Vt(i.type)+" instead"):null},da.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!or(t,["boolean","string","number","null"]))throw new Nr("Expected first argument to be of type boolean, string, number or null, but found "+Vt(mr(t))+" instead.");if(!or(i,["string","array"]))throw new Nr("Expected second argument to be of type array or string, but found "+Vt(mr(i))+" instead.");return i.indexOf(t)>=0},da.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},da.prototype.outputDefined=function(){return!0},da.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Yo=function(e,t,i){this.type=Me,this.needle=e,this.haystack=t,this.fromIndex=i};Yo.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Xe),l=t.parse(e[2],2,Xe);if(!i||!l)return null;if(!dr(i.type,[Ke,Ye,Me,nt,Xe]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Vt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Me);return p?new Yo(i,l,p):null}return new Yo(i,l)},Yo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!or(t,["boolean","string","number","null"]))throw new Nr("Expected first argument to be of type boolean, string, number or null, but found "+Vt(mr(t))+" instead.");if(!or(i,["string","array"]))throw new Nr("Expected second argument to be of type array or string, but found "+Vt(mr(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},Yo.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Aa=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};Aa.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],x=2;x<e.length-1;x+=2){var S=e[x],A=e[x+1];Array.isArray(S)||(S=[S]);var M=t.concat(x);if(S.length===0)return M.error("Expected at least one branch label.");for(var L=0,V=S;L<V.length;L+=1){var q=V[L];if(typeof q!="number"&&typeof q!="string")return M.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return M.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof q=="number"&&Math.floor(q)!==q)return M.error("Numeric branch labels must be integer values.");if(i){if(M.checkSubtype(i,mr(q)))return null}else i=mr(q);if(p[String(q)]!==void 0)return M.error("Branch labels must be unique.");p[String(q)]=d.length}var W=t.parse(A,x,l);if(!W)return null;l=l||W.type,d.push(W)}var ne=t.parse(e[1],1,Xe);if(!ne)return null;var oe=t.parse(e[e.length-1],e.length-1,l);return oe?ne.type.kind!=="value"&&t.concat(1).checkSubtype(i,ne.type)?null:new Aa(i,l,ne,p,d,oe):null},Aa.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(mr(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Aa.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Aa.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Aa.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var x=d[p];(V=l[this.cases[x]])===void 0?(l[this.cases[x]]=i.length,i.push([this.cases[x],[x]])):i[V][1].push(x)}for(var S=function(W){return e.inputType.kind==="number"?Number(W):W},A=0,M=i;A<M.length;A+=1){var L=M[A],V=L[0],q=L[1];t.push(q.length===1?S(q[0]):q.map(S)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var hn=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};hn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,Ke);if(!d)return null;var x=t.parse(e[p+1],p+1,i);if(!x)return null;l.push([d,x]),i=i||x.type}var S=t.parse(e[e.length-1],e.length-1,i);return S?new hn(i,l,S):null},hn.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},hn.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},hn.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},hn.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ji=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function ki(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function qi(e,t,i,l){return l.compare(t,i)===0}function Ht(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,x,S){this.type=Ke,this.lhs=d,this.rhs=x,this.collator=S,this.hasUntypedArgument=d.type.kind==="value"||x.type.kind==="value"}return p.parse=function(d,x){if(d.length!==3&&d.length!==4)return x.error("Expected two or three arguments.");var S=d[0],A=x.parse(d[1],1,Xe);if(!A)return null;if(!ki(S,A.type))return x.concat(1).error('"'+S+`" comparisons are not supported for type '`+Vt(A.type)+"'.");var M=x.parse(d[2],2,Xe);if(!M)return null;if(!ki(S,M.type))return x.concat(2).error('"'+S+`" comparisons are not supported for type '`+Vt(M.type)+"'.");if(A.type.kind!==M.type.kind&&A.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot compare types '"+Vt(A.type)+"' and '"+Vt(M.type)+"'.");l&&(A.type.kind==="value"&&M.type.kind!=="value"?A=new gr(M.type,[A]):A.type.kind!=="value"&&M.type.kind==="value"&&(M=new gr(A.type,[M])));var L=null;if(d.length===4){if(A.type.kind!=="string"&&M.type.kind!=="string"&&A.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(L=x.parse(d[3],3,jt)))return null}return new p(A,M,L)},p.prototype.evaluate=function(d){var x=this.lhs.evaluate(d),S=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var A=mr(x),M=mr(S);if(A.kind!==M.kind||A.kind!=="string"&&A.kind!=="number")throw new Nr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+A.kind+", "+M.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var L=mr(x),V=mr(S);if(L.kind!=="string"||V.kind!=="string")return t(d,x,S)}return this.collator?i(d,x,S,this.collator.evaluate(d)):t(d,x,S)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(x){d.push(x.serialize())}),d},p}()}ji.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Xe),l=t.parse(e[2],2,Me);if(!i||!l)return null;if(!dr(i.type,[Yt(Xe),Ye,Xe]))return t.error("Expected first argument to be of type array or string, but found "+Vt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Me);return p?new ji(i.type,i,l,p):null}return new ji(i.type,i,l)},ji.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!or(t,["string","array"]))throw new Nr("Expected first argument to be of type array or string, but found "+Vt(mr(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},ji.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},ji.prototype.outputDefined=function(){return!1},ji.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var vn=Ht("==",function(e,t,i){return t===i},qi),So=Ht("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!qi(0,t,i,l)}),kl=Ht("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),Ya=Ht(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),Is=Ht("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),Ts=Ht(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),ta=function(e,t,i,l,p){this.type=Ye,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};ta.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Me);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,Ye)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,Ye)))return null;var x=null;if(l["min-fraction-digits"]&&!(x=t.parse(l["min-fraction-digits"],1,Me)))return null;var S=null;return l["max-fraction-digits"]&&!(S=t.parse(l["max-fraction-digits"],1,Me))?null:new ta(i,p,d,x,S)},ta.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},ta.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},ta.prototype.outputDefined=function(){return!1},ta.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var za=function(e){this.type=Me,this.input=e};za.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Vt(i.type)+" instead."):new za(i):null},za.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Nr("Expected value to be of type string or array, but found "+Vt(mr(t))+" instead.")},za.prototype.eachChild=function(e){e(this.input)},za.prototype.outputDefined=function(){return!1},za.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Un={"==":vn,"!=":So,">":Ya,"<":kl,">=":Ts,"<=":Is,array:gr,at:Ta,boolean:gr,case:hn,coalesce:Hr,collator:mi,format:ri,image:zi,in:da,"index-of":Yo,interpolate:ni,"interpolate-hcl":ni,"interpolate-lab":ni,length:za,let:Jo,literal:Qi,match:Aa,number:gr,"number-format":ta,object:gr,slice:ji,step:yi,string:gr,"to-boolean":Ni,"to-color":Ni,"to-number":Ni,"to-string":Ni,var:An,within:Si};function Zl(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var x=d?d.evaluate(e):1,S=Ji(i,l,p,x);if(S)throw new Nr(S);return new tr(i/255*x,l/255*x,p/255*x,x)}function ko(e,t){return e in t}function pn(e,t){var i=t[e];return i===void 0?null:i}function as(e){return{type:e}}function As(e){return{result:"success",value:e}}function Dn(e){return{result:"error",value:e}}function rn(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function qs(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Qa(e){return!!e.expression&&e.expression.interpolated}function jr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Ve(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Tt(e){return e}function Ci(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function Ln(e,t,i,l,p){return Ci(typeof i===p?l[i]:void 0,e.default,t.default)}function Zs(e,t,i){if(jr(i)!=="number")return Ci(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=ea(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function zs(e,t,i){var l=e.base!==void 0?e.base:1;if(jr(i)!=="number")return Ci(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=ea(e.stops.map(function(V){return V[0]}),i),x=function(V,q,W,ne){var oe=ne-W,me=V-W;return oe===0?0:q===1?me/oe:(Math.pow(q,me)-1)/(Math.pow(q,oe)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),S=e.stops[d][1],A=e.stops[d+1][1],M=ka[t.type]||Tt;if(e.colorSpace&&e.colorSpace!=="rgb"){var L=ql[e.colorSpace];M=function(V,q){return L.reverse(L.interpolate(L.forward(V),L.forward(q),x))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var V=[],q=arguments.length;q--;)V[q]=arguments[q];var W=S.evaluate.apply(void 0,V),ne=A.evaluate.apply(void 0,V);if(W!==void 0&&ne!==void 0)return M(W,ne,x)}}:M(S,A,x)}function os(e,t,i){return t.type==="color"?i=tr.parse(i):t.type==="formatted"?i=fi.fromString(i.toString()):t.type==="resolvedImage"?i=di.fromString(i.toString()):jr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),Ci(i,e.default,t.default)}Ur.register(Un,{error:[{kind:"error"},[Ye],function(e,t){throw new Nr(t[0].evaluate(e))}],typeof:[Ye,[Xe],function(e,t){return Vt(mr(t[0].evaluate(e)))}],"to-rgba":[Yt(Me,4),[Qe],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Qe,[Me,Me,Me],Zl],rgba:[Qe,[Me,Me,Me,Me],Zl],has:{type:Ke,overloads:[[[Ye],function(e,t){return ko(t[0].evaluate(e),e.properties())}],[[Ye,Lt],function(e,t){var i=t[1];return ko(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:Xe,overloads:[[[Ye],function(e,t){return pn(t[0].evaluate(e),e.properties())}],[[Ye,Lt],function(e,t){var i=t[1];return pn(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[Xe,[Ye],function(e,t){return pn(t[0].evaluate(e),e.featureState||{})}],properties:[Lt,[],function(e){return e.properties()}],"geometry-type":[Ye,[],function(e){return e.geometryType()}],id:[Xe,[],function(e){return e.id()}],zoom:[Me,[],function(e){return e.globals.zoom}],"heatmap-density":[Me,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Me,[],function(e){return e.globals.lineProgress||0}],accumulated:[Xe,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Me,as(Me),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Me,as(Me),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Me,overloads:[[[Me,Me],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Me],function(e,t){return-t[0].evaluate(e)}]]},"/":[Me,[Me,Me],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Me,[Me,Me],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Me,[],function(){return Math.LN2}],pi:[Me,[],function(){return Math.PI}],e:[Me,[],function(){return Math.E}],"^":[Me,[Me,Me],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Me,[Me],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Me,[Me],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Me,[Me],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Me,[Me],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Me,[Me],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Me,[Me],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Me,[Me],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Me,[Me],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Me,[Me],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Me,[Me],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Me,as(Me),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Me,as(Me),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Me,[Me],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Me,[Me],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Me,[Me],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Me,[Me],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ke,[Ye,Xe],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[Ke,[Xe],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Ke,[Ye],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Ke,[Ye,Xe],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[Ke,[Xe],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[Ke,[Ye,Xe],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[Ke,[Xe],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[Ke,[Ye,Xe],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[Ke,[Xe],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[Ke,[Ye,Xe],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[Ke,[Xe],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[Ke,[Xe],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ke,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Ke,[Yt(Ye)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ke,[Yt(Xe)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ke,[Ye,Yt(Xe)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Ke,[Ye,Yt(Xe)],function(e,t){var i=t[0],l=t[1];return function(p,d,x,S){for(;x<=S;){var A=x+S>>1;if(d[A]===p)return!0;d[A]>p?S=A-1:x=A+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:Ke,overloads:[[[Ke,Ke],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[as(Ke),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:Ke,overloads:[[[Ke,Ke],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[as(Ke),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[Ke,[Ke],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ke,[Ye],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[Ye,[Ye],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Ye,[Ye],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Ye,as(Xe),function(e,t){return t.map(function(i){return Vi(i.evaluate(e))}).join("")}],"resolved-locale":[Ye,[jt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Ps=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Kr,this._defaultValue=t?function(i){return i.type==="color"&&Ve(i.default)?new tr(0,0,0,0):i.type==="color"?tr.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function ra(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Un}function Qo(e,t){var i=new kr(Un,[],t?function(p){var d={color:Qe,string:Ye,number:Me,enum:Ye,boolean:Ke,formatted:sr,resolvedImage:It};return p.type==="array"?Yt(d[p.value]||Xe,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?As(new Ps(l,t)):Dn(i.errors)}Ps.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},Ps.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Nr("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Gs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!xe(t.expression)};Gs.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},Gs.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var ma=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!xe(t.expression),this.interpolationType=l};function ol(e,t){if((e=Qo(e,t)).result==="error")return e;var i=e.value.expression,l=en(i);if(!l&&!rn(t))return Dn([new je("","data expressions not supported")]);var p=Ui(i,["zoom"]);if(!p&&!qs(t))return Dn([new je("","zoom expressions not supported")]);var d=function x(S){var A=null;if(S instanceof Jo)A=x(S.result);else if(S instanceof Hr)for(var M=0,L=S.args;M<L.length&&!(A=x(L[M]));M+=1);else(S instanceof yi||S instanceof ni)&&S.input instanceof Ur&&S.input.name==="zoom"&&(A=S);return A instanceof je||S.eachChild(function(V){var q=x(V);q instanceof je?A=q:!A&&q?A=new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&q&&A!==q&&(A=new je("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}(i);return d||p?d instanceof je?Dn([d]):d instanceof ni&&!Qa(t)?Dn([new je("",'"interpolate" expressions cannot be used with this property')]):As(d?new ma(l?"camera":"composite",e.value,d.labels,d instanceof ni?d.interpolation:void 0):new Gs(l?"constant":"source",e.value)):Dn([new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ma.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},ma.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},ma.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?ni.interpolationFactor(this.interpolationType,e,t,i):0};var Cs=function(e,t){this._parameters=e,this._specification=t,Ue(this,function i(l,p){var d,x,S,A=p.type==="color",M=l.stops&&typeof l.stops[0][0]=="object",L=M||!(M||l.property!==void 0),V=l.type||(Qa(p)?"exponential":"interval");if(A&&((l=Ue({},l)).stops&&(l.stops=l.stops.map(function(lt){return[lt[0],tr.parse(lt[1])]})),l.default=tr.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!ql[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(V==="exponential")d=zs;else if(V==="interval")d=Zs;else if(V==="categorical"){d=Ln,x=Object.create(null);for(var q=0,W=l.stops;q<W.length;q+=1){var ne=W[q];x[ne[0]]=ne[1]}S=typeof l.stops[0][0]}else{if(V!=="identity")throw new Error('Unknown function type "'+V+'"');d=os}if(M){for(var oe={},me=[],ue=0;ue<l.stops.length;ue++){var be=l.stops[ue],Se=be[0].zoom;oe[Se]===void 0&&(oe[Se]={zoom:Se,type:l.type,property:l.property,default:l.default,stops:[]},me.push(Se)),oe[Se].stops.push([be[0].value,be[1]])}for(var Ae=[],De=0,Fe=me;De<Fe.length;De+=1){var Ge=Fe[De];Ae.push([oe[Ge].zoom,i(oe[Ge],p)])}var tt={name:"linear"};return{kind:"composite",interpolationType:tt,interpolationFactor:ni.interpolationFactor.bind(void 0,tt),zoomStops:Ae.map(function(lt){return lt[0]}),evaluate:function(lt,At){var st=lt.zoom;return zs({stops:Ae,base:l.base},p,st).evaluate(st,At)}}}if(L){var bt=V==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:bt,interpolationFactor:ni.interpolationFactor.bind(void 0,bt),zoomStops:l.stops.map(function(lt){return lt[0]}),evaluate:function(lt){return d(l,p,lt.zoom,x,S)}}}return{kind:"source",evaluate:function(lt,At){var st=At&&At.properties?At.properties[l.property]:void 0;return st===void 0?Ci(l.default,p.default):d(l,p,st,x,S)}}}(this._parameters,this._specification))};function $a(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,x=e.styleSpec,S=[],A=jr(i);if(A!=="object")return[new te(t,i,"object expected, "+A+" found")];for(var M in i){var L=M.split(".")[0],V=l[L]||l["*"],q=void 0;if(p[L])q=p[L];else if(l[L])q=lr;else if(p["*"])q=p["*"];else{if(!l["*"]){S.push(new te(t,i[M],'unknown property "'+M+'"'));continue}q=lr}S=S.concat(q({key:(t&&t+".")+M,value:i[M],valueSpec:V,style:d,styleSpec:x,object:i,objectKey:M},i))}for(var W in l)p[W]||l[W].required&&l[W].default===void 0&&i[W]===void 0&&S.push(new te(t,i,'missing required property "'+W+'"'));return S}function eo(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,x=e.arrayElementValidator||lr;if(jr(t)!=="array")return[new te(d,t,"array expected, "+jr(t)+" found")];if(i.length&&t.length!==i.length)return[new te(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new te(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var S={type:i.value,values:i.values};p.$version<7&&(S.function=i.function),jr(i.value)==="object"&&(S=i.value);for(var A=[],M=0;M<t.length;M++)A=A.concat(x({array:t,arrayIndex:M,value:t[M],valueSpec:S,style:l,styleSpec:p,key:d+"["+M+"]"}));return A}function Ms(e){var t=e.key,i=e.value,l=e.valueSpec,p=jr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new te(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new te(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new te(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function Io(e){var t,i,l,p=e.valueSpec,d=qe(e.value.type),x={},S=d!=="categorical"&&e.value.property===void 0,A=!S,M=jr(e.value.stops)==="array"&&jr(e.value.stops[0])==="array"&&jr(e.value.stops[0][0])==="object",L=$a({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(W){if(d==="identity")return[new te(W.key,W.value,'identity function may not have a "stops" property')];var ne=[],oe=W.value;return ne=ne.concat(eo({key:W.key,value:oe,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:V})),jr(oe)==="array"&&oe.length===0&&ne.push(new te(W.key,oe,"array must have at least one stop")),ne},default:function(W){return lr({key:W.key,value:W.value,valueSpec:p,style:W.style,styleSpec:W.styleSpec})}}});return d==="identity"&&S&&L.push(new te(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||L.push(new te(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Qa(e.valueSpec)&&L.push(new te(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(A&&!rn(e.valueSpec)?L.push(new te(e.key,e.value,"property functions not supported")):S&&!qs(e.valueSpec)&&L.push(new te(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!M||e.value.property!==void 0||L.push(new te(e.key,e.value,'"property" property is required')),L;function V(W){var ne=[],oe=W.value,me=W.key;if(jr(oe)!=="array")return[new te(me,oe,"array expected, "+jr(oe)+" found")];if(oe.length!==2)return[new te(me,oe,"array length 2 expected, length "+oe.length+" found")];if(M){if(jr(oe[0])!=="object")return[new te(me,oe,"object expected, "+jr(oe[0])+" found")];if(oe[0].zoom===void 0)return[new te(me,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new te(me,oe,"object stop key must have value")];if(l&&l>qe(oe[0].zoom))return[new te(me,oe[0].zoom,"stop zoom values must appear in ascending order")];qe(oe[0].zoom)!==l&&(l=qe(oe[0].zoom),i=void 0,x={}),ne=ne.concat($a({key:me+"[0]",value:oe[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Ms,value:q}}))}else ne=ne.concat(q({key:me+"[0]",value:oe[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},oe));return ra(Ie(oe[1]))?ne.concat([new te(me+"[1]",oe[1],"expressions are not allowed in function stops.")]):ne.concat(lr({key:me+"[1]",value:oe[1],valueSpec:p,style:W.style,styleSpec:W.styleSpec}))}function q(W,ne){var oe=jr(W.value),me=qe(W.value),ue=W.value!==null?W.value:ne;if(t){if(oe!==t)return[new te(W.key,ue,oe+" stop domain type must match previous stop domain type "+t)]}else t=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new te(W.key,ue,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&d!=="categorical"){var be="number expected, "+oe+" found";return rn(p)&&d===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new te(W.key,ue,be)]}return d!=="categorical"||oe!=="number"||isFinite(me)&&Math.floor(me)===me?d!=="categorical"&&oe==="number"&&i!==void 0&&me<i?[new te(W.key,ue,"stop domain values must appear in ascending order")]:(i=me,d==="categorical"&&me in x?[new te(W.key,ue,"stop domain values must be unique")]:(x[me]=!0,[])):[new te(W.key,ue,"integer expected, found "+me)]}}function gi(e){var t=(e.expressionContext==="property"?ol:Qo)(Ie(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new te(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new te(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!xe(i))return[new te(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!xe(i))return[new te(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Ui(i,["zoom","feature-state"]))return[new te(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!en(i))return[new te(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function to(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(qe(i))===-1&&p.push(new te(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(qe(i))===-1&&p.push(new te(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function Ks(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!Ks(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}Cs.deserialize=function(e){return new Cs(e._parameters,e._specification)},Cs.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Ds={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gl(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Ks(e)||(e=$o(e));var t=Qo(e,Ds);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function Kl(e,t){return e<t?-1:e>t?1:0}function $o(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?ss(e[1],e[2],"=="):i==="!="?Ls(ss(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?ss(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map($o))):i==="all"?["all"].concat(e.slice(1).map($o)):i==="none"?["all"].concat(e.slice(1).map($o).map(Ls)):i==="in"?Hl(e[1],e.slice(2)):i==="!in"?Ls(Hl(e[1],e.slice(2))):i==="has"?ia(e[1]):i==="!has"?Ls(ia(e[1])):i!=="within"||e}function ss(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function Hl(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Kl)]]:["filter-in-small",e,["literal",t]]}}function ia(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ls(e){return["!",e]}function sl(e){return Ks(Ie(e.value))?gi(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(jr(l)!=="array")return[new te(p,l,"array expected, "+jr(l)+" found")];var d,x=i.styleSpec,S=[];if(l.length<1)return[new te(p,l,"filter array must have at least 1 element")];switch(S=S.concat(to({key:p+"[0]",value:l[0],valueSpec:x.filter_operator,style:i.style,styleSpec:i.styleSpec})),qe(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&qe(l[1])==="$type"&&S.push(new te(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&S.push(new te(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=jr(l[1]))!=="string"&&S.push(new te(p+"[1]",l[1],"string expected, "+d+" found"));for(var A=2;A<l.length;A++)d=jr(l[A]),qe(l[1])==="$type"?S=S.concat(to({key:p+"["+A+"]",value:l[A],valueSpec:x.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&S.push(new te(p+"["+A+"]",l[A],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var M=1;M<l.length;M++)S=S.concat(t({key:p+"["+M+"]",value:l[M],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=jr(l[1]),l.length!==2?S.push(new te(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&S.push(new te(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=jr(l[1]),l.length!==2?S.push(new te(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&S.push(new te(p+"[1]",l[1],"object expected, "+d+" found"))}return S}(e)}function Xl(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,x=e.objectKey,S=p[t+"_"+e.layerType];if(!S)return[];var A=x.match(/^(.*)-transition$/);if(t==="paint"&&A&&S[A[1]]&&S[A[1]].transition)return lr({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var M,L=e.valueSpec||S[x];if(!L)return[new te(i,d,'unknown property "'+x+'"')];if(jr(d)==="string"&&rn(L)&&!L.tokens&&(M=/^{([^}]+)}$/.exec(d)))return[new te(i,d,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(M[1])+" }`.")];var V=[];return e.layerType==="symbol"&&(x==="text-field"&&l&&!l.glyphs&&V.push(new te(i,d,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Ve(Ie(d))&&qe(d.type)==="identity"&&V.push(new te(i,d,'"text-font" does not support identity functions'))),V.concat(lr({key:e.key,value:d,valueSpec:L,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:x}))}function es(e){return Xl(e,"paint")}function Rs(e){return Xl(e,"layout")}function To(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new te(l,i,'either "type" or "ref" is required'));var x,S=qe(i.type),A=qe(i.ref);if(i.id)for(var M=qe(i.id),L=0;L<e.arrayIndex;L++){var V=p.layers[L];qe(V.id)===M&&t.push(new te(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+V.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(ne){ne in i&&t.push(new te(l,i[ne],'"'+ne+'" is prohibited for ref layers'))}),p.layers.forEach(function(ne){qe(ne.id)===A&&(x=ne)}),x?x.ref?t.push(new te(l,i.ref,"ref cannot reference another ref layer")):S=qe(x.type):t.push(new te(l,i.ref,'ref layer "'+A+'" not found'));else if(S!=="background")if(i.source){var q=p.sources&&p.sources[i.source],W=q&&qe(q.type);q?W==="vector"&&S==="raster"?t.push(new te(l,i.source,'layer "'+i.id+'" requires a raster source')):W==="raster"&&S!=="raster"?t.push(new te(l,i.source,'layer "'+i.id+'" requires a vector source')):W!=="vector"||i["source-layer"]?W==="raster-dem"&&S!=="hillshade"?t.push(new te(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!i.paint||!i.paint["line-gradient"]||W==="geojson"&&q.lineMetrics||t.push(new te(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new te(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new te(l,i.source,'source "'+i.source+'" not found'))}else t.push(new te(l,i,'missing required property "source"'));return t=t.concat($a({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return lr({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:sl,layout:function(ne){return $a({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(oe){return Rs(Ue({layerType:S},oe))}}})},paint:function(ne){return $a({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(oe){return es(Ue({layerType:S},oe))}}})}}}))}function jn(e){var t=e.value,i=e.key,l=jr(t);return l!=="string"?[new te(i,t,"string expected, "+l+" found")]:[]}var Cr={promoteId:function(e){var t=e.key,i=e.value;if(jr(i)==="string")return jn({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,jn({key:t+"."+p,value:i[p]}));return l}};function ho(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new te(i,t,'"type" is required')];var d,x=qe(t.type);switch(x){case"vector":case"raster":case"raster-dem":return $a({key:i,value:t,valueSpec:l["source_"+x.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:Cr});case"geojson":if(d=$a({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:Cr}),t.cluster)for(var S in t.clusterProperties){var A=t.clusterProperties[S],M=A[0],L=typeof M=="string"?[M,["accumulated"],["get",S]]:M;d.push.apply(d,gi({key:i+"."+S+".map",value:A[1],expressionContext:"cluster-map"})),d.push.apply(d,gi({key:i+"."+S+".reduce",value:L,expressionContext:"cluster-reduce"}))}return d;case"video":return $a({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return $a({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new te(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return to({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function ro(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],x=jr(t);if(t===void 0)return d;if(x!=="object")return d.concat([new te("light",t,"object expected, "+x+" found")]);for(var S in t){var A=S.match(/^(.*)-transition$/);d=d.concat(A&&l[A[1]]&&l[A[1]].transition?lr({key:S,value:t[S],valueSpec:i.transition,style:p,styleSpec:i}):l[S]?lr({key:S,value:t[S],valueSpec:l[S],style:p,styleSpec:i}):[new te(S,t[S],'unknown property "'+S+'"')])}return d}var Bs={"*":function(){return[]},array:eo,boolean:function(e){var t=e.value,i=e.key,l=jr(t);return l!=="boolean"?[new te(i,t,"boolean expected, "+l+" found")]:[]},number:Ms,color:function(e){var t=e.key,i=e.value,l=jr(i);return l!=="string"?[new te(t,i,"color expected, "+l+" found")]:Kt(i)===null?[new te(t,i,'color expected, "'+i+'" found')]:[]},constants:we,enum:to,filter:sl,function:Io,layer:To,object:$a,source:ho,light:ro,string:jn,formatted:function(e){return jn(e).length===0?[]:gi(e)},resolvedImage:function(e){return jn(e).length===0?[]:gi(e)}};function lr(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&Ve(qe(t))?Io(e):i.expression&&ra(Ie(t))?gi(e):i.type&&Bs[i.type]?Bs[i.type](e):$a(Ue({},e,{valueSpec:i.type?l[i.type]:i}))}function Mr(e){var t=e.value,i=e.key,l=jn(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new te(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new te(i,t,'"glyphs" url must include a "{range}" token'))),l}function Rn(e,t){t===void 0&&(t=G);var i=[];return i=i.concat(lr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Mr,"*":function(){return[]}}})),e.constants&&(i=i.concat(we({key:"constants",value:e.constants,style:e,styleSpec:t}))),ls(i)}function ls(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function Ba(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return ls(e.apply(this,t))}}Rn.source=Ba(ho),Rn.light=Ba(ro),Rn.layer=Ba(To),Rn.filter=Ba(sl),Rn.paintProperty=Ba(es),Rn.layoutProperty=Ba(Rs);var us=Rn,vu=us.light,bu=us.paintProperty,po=us.layoutProperty;function Ao(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new de(new Error(p[l].message))),i=!0;return i}var zo=Fr;function Fr(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var x=p[3+d],S=p[3+d+1];l.push(x===S?null:p.subarray(x,S))}var A=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],A),this.bboxes=p.subarray(A),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var M=0;M<this.d*this.d;M++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var L=i/t*e;this.min=-L,this.max=e+L}Fr.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},Fr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Fr.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},Fr.prototype.query=function(e,t,i,l,p){var d=this.min,x=this.max;if(e<=d&&t<=d&&x<=i&&x<=l&&!p)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(e,t,i,l,this._queryCell,S,{},p),S},Fr.prototype._queryCell=function(e,t,i,l,p,d,x,S){var A=this.cells[p];if(A!==null)for(var M=this.keys,L=this.bboxes,V=0;V<A.length;V++){var q=A[V];if(x[q]===void 0){var W=4*q;(S?S(L[W+0],L[W+1],L[W+2],L[W+3]):e<=L[W+2]&&t<=L[W+3]&&i>=L[W+0]&&l>=L[W+1])?(x[q]=!0,d.push(M[q])):x[q]=!1}}},Fr.prototype._forEachCell=function(e,t,i,l,p,d,x,S){for(var A=this._convertToCellCoord(e),M=this._convertToCellCoord(t),L=this._convertToCellCoord(i),V=this._convertToCellCoord(l),q=A;q<=L;q++)for(var W=M;W<=V;W++){var ne=this.d*W+q;if((!S||S(this._convertFromCellCoord(q),this._convertFromCellCoord(W),this._convertFromCellCoord(q+1),this._convertFromCellCoord(W+1)))&&p.call(this,e,t,i,l,ne,d,x,S))return}},Fr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Fr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Fr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,x=0;x<e.length;x++){var S=e[x];p[3+x]=d,p.set(S,d),d+=S.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var ya=F.ImageData,fo=F.ImageBitmap,hi={};function ht(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),hi[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var ga in ht("Object",Object),zo.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},zo.deserialize=function(e){return new zo(e.buffer)},ht("Grid",zo),ht("Color",tr),ht("Error",Error),ht("ResolvedImage",di),ht("StylePropertyFunction",Cs),ht("StyleExpression",Ps,{omit:["_evaluator"]}),ht("ZoomDependentExpression",ma),ht("ZoomConstantExpression",Gs),ht("CompoundExpression",Ur,{omit:["_evaluate"]}),Un)Un[ga]._classRegistryKey||ht("Expression_"+ga,Un[ga]);function Po(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function zn(e){return fo&&e instanceof fo}function io(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Po(e)||zn(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof ya)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(io(d[p],t));return l}if(typeof e=="object"){var x=e.constructor,S=x._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var A=x.serialize?x.serialize(e,t):{};if(!x.serialize){for(var M in e)if(e.hasOwnProperty(M)&&!(hi[S].omit.indexOf(M)>=0)){var L=e[M];A[M]=hi[S].shallow.indexOf(M)>=0?L:io(L,t)}e instanceof Error&&(A.message=e.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(A.$name=S),A}throw new Error("can't serialize object of type "+typeof e)}function Bn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Po(e)||zn(e)||ArrayBuffer.isView(e)||e instanceof ya)return e;if(Array.isArray(e))return e.map(Bn);if(typeof e=="object"){var t=e.$name||"Object",i=hi[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var x=d[p];if(x!=="$name"){var S=e[x];l[x]=hi[t].shallow.indexOf(x)>=0?S:Bn(S)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var Il=function(){this.first=!0};Il.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var et={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Os(e){for(var t=0,i=e;t<i.length;t+=1)if(Hs(i[t].charCodeAt(0)))return!0;return!1}function Hs(e){return!(e!==746&&e!==747&&(e<4352||!(et["Bopomofo Extended"](e)||et.Bopomofo(e)||et["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||et["CJK Compatibility Ideographs"](e)||et["CJK Compatibility"](e)||et["CJK Radicals Supplement"](e)||et["CJK Strokes"](e)||!(!et["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||et["CJK Unified Ideographs Extension A"](e)||et["CJK Unified Ideographs"](e)||et["Enclosed CJK Letters and Months"](e)||et["Hangul Compatibility Jamo"](e)||et["Hangul Jamo Extended-A"](e)||et["Hangul Jamo Extended-B"](e)||et["Hangul Jamo"](e)||et["Hangul Syllables"](e)||et.Hiragana(e)||et["Ideographic Description Characters"](e)||et.Kanbun(e)||et["Kangxi Radicals"](e)||et["Katakana Phonetic Extensions"](e)||et.Katakana(e)&&e!==12540||!(!et["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!et["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||et["Unified Canadian Aboriginal Syllabics"](e)||et["Unified Canadian Aboriginal Syllabics Extended"](e)||et["Vertical Forms"](e)||et["Yijing Hexagram Symbols"](e)||et["Yi Syllables"](e)||et["Yi Radicals"](e))))}function Co(e){return!(Hs(e)||function(t){return!!(et["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||et["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||et["Letterlike Symbols"](t)||et["Number Forms"](t)||et["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||et["Control Pictures"](t)&&t!==9251||et["Optical Character Recognition"](t)||et["Enclosed Alphanumerics"](t)||et["Geometric Shapes"](t)||et["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||et["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||et["CJK Symbols and Punctuation"](t)||et.Katakana(t)||et["Private Use Area"](t)||et["CJK Compatibility Forms"](t)||et["Small Form Variants"](t)||et["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Ii(e){return e>=1424&&e<=2303||et["Arabic Presentation Forms-A"](e)||et["Arabic Presentation Forms-B"](e)}function Zi(e,t){return!(!t&&Ii(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||et.Khmer(e))}function Oa(e){for(var t=0,i=e;t<i.length;t+=1)if(Ii(i[t].charCodeAt(0)))return!0;return!1}var no=null,_a="unavailable",Pa=null,Eh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(_a="error"),no&&no(e)};function Wl(){Yu.fire(new ie("pluginStateChange",{pluginStatus:_a,pluginURL:Pa}))}var Yu=new ge,ll=function(){return _a},Fa=function(){if(_a!=="deferred"||!Pa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_a="loading",Wl(),Pa&&yn({url:Pa},function(e){e?Eh(e):(_a="loaded",Wl())})},mo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return _a==="loaded"||mo.applyArabicShaping!=null},isLoading:function(){return _a==="loading"},setState:function(e){_a=e.pluginStatus,Pa=e.pluginURL},isParsed:function(){return mo.applyArabicShaping!=null&&mo.processBidirectionalText!=null&&mo.processStyledBidirectionalText!=null},getPluginURL:function(){return Pa}},$t=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Il,this.transition={})};$t.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!Zi(p[l].charCodeAt(0),i))return!1;return!0}(e,mo.isLoaded())},$t.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},$t.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var Mo=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(Ve(i))return new Cs(i,l);if(ra(i)){var p=ol(i,l);if(p.result==="error")throw new Error(p.value.map(function(x){return x.key+": "+x.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=tr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};Mo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Mo.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var Do=function(e){this.property=e,this.value=new Mo(e,void 0)};Do.prototype.transitioned=function(e,t){return new Lo(this.property,this.value,t,Ne({},e.transition,this.transition),e.now)},Do.prototype.untransitioned=function(){return new Lo(this.property,this.value,null,{},0)};var na=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};na.prototype.getValue=function(e){return vt(this._values[e].value.value)},na.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Do(this._values[e].property)),this._values[e].value=new Mo(this._values[e].property,t===null?void 0:vt(t))},na.prototype.getTransition=function(e){return vt(this._values[e].transition)},na.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Do(this._values[e].property)),this._values[e].transition=vt(t)||void 0},na.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},na.prototype.transitioned=function(e,t){for(var i=new Xs(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},na.prototype.untransitioned=function(){for(var e=new Xs(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var Lo=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};Lo.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var x=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(S){if(S<=0)return 0;if(S>=1)return 1;var A=S*S,M=A*S;return 4*(S<.5?M:3*(S-A)+M-.75)}(x))}return p};var Xs=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Xs.prototype.possiblyEvaluate=function(e,t,i){for(var l=new Ro(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];l._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return l},Xs.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var aa=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};aa.prototype.getValue=function(e){return vt(this._values[e].value)},aa.prototype.setValue=function(e,t){this._values[e]=new Mo(this._values[e].property,t===null?void 0:vt(t))},aa.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},aa.prototype.possiblyEvaluate=function(e,t,i){for(var l=new Ro(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];l._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return l};var Gi=function(e,t,i){this.property=e,this.value=t,this.parameters=i};Gi.prototype.isConstant=function(){return this.value.kind==="constant"},Gi.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Gi.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var Ro=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Ro.prototype.get=function(e){return this._values[e]};var Et=function(e){this.specification=e};Et.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Et.prototype.interpolate=function(e,t,i){var l=ka[this.specification.type];return l?l(e,t,i):e};var ft=function(e,t){this.specification=e,this.overrides=t};ft.prototype.possiblyEvaluate=function(e,t,i,l){return new Gi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},ft.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new Gi(this,{kind:"constant",value:void 0},e.parameters);var l=ka[this.specification.type];return l?new Gi(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},ft.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var Ac=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new Gi(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var x=i.expression.evaluate(l,null,{},p,d),S=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,A=this._calculate(S,S,S,l);return new Gi(this,{kind:"constant",value:A},l)}if(i.expression.kind==="camera"){var M=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Gi(this,{kind:"constant",value:M},l)}return new Gi(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,x,S){if(i.kind==="source"){var A=i.evaluate(l,p,d,x,S);return this._calculate(A,A,A,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(ft),Ca=function(e){this.specification=e};Ca.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new $t(Math.floor(t.zoom-1),t)),e.expression.evaluate(new $t(Math.floor(t.zoom),t)),e.expression.evaluate(new $t(Math.floor(t.zoom+1),t)),t)}},Ca.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},Ca.prototype.interpolate=function(e){return e};var Va=function(e){this.specification=e};Va.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},Va.prototype.interpolate=function(){return!1};var bn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Mo(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new Do(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};ht("DataDrivenProperty",ft),ht("DataConstantProperty",Et),ht("CrossFadedDataDrivenProperty",Ac),ht("CrossFadedProperty",Ca),ht("ColorRampProperty",Va);var cs=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new aa(l.layout)),l.paint)){for(var p in this._transitionablePaint=new na(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ro(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(po,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return cr(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(bu,"layers."+this.id+".paint."+i,i,l,p))return!1;if(cr(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],x=d.property.specification["property-type"]==="cross-faded-data-driven",S=d.value.isDataDriven(),A=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var M=this._transitionablePaint._values[i].value;return M.isDataDriven()||S||x||this._handleOverridablePaintPropertyUpdate(i,A,M)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),wt(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Ao(this,i.call(us,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:G,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof Gi&&rn(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(ge),ul={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Tl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Br=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function qn(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=ul[p.type].BYTES_PER_ELEMENT,x=i=cl(i,Math.max(t,d)),S=p.components||1;return l=Math.max(l,d),i+=d*S,{name:p.name,type:p.type,components:S,offset:x}}),size:cl(i,Math.max(l,t)),alignment:t}}function cl(e,t){return Math.ceil(e/t)*t}Br.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Br.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Br.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Br.prototype.clear=function(){this.length=0},Br.prototype.resize=function(e){this.reserve(e),this.length=e},Br.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Br.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var hl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(Br);hl.prototype.bytesPerElement=4,ht("StructArrayLayout2i4",hl);var hs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var S=4*i;return this.int16[S+0]=l,this.int16[S+1]=p,this.int16[S+2]=d,this.int16[S+3]=x,i},t}(Br);hs.prototype.bytesPerElement=8,ht("StructArrayLayout4i8",hs);var oa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,x,S)},t.prototype.emplace=function(i,l,p,d,x,S,A){var M=6*i;return this.int16[M+0]=l,this.int16[M+1]=p,this.int16[M+2]=d,this.int16[M+3]=x,this.int16[M+4]=S,this.int16[M+5]=A,i},t}(Br);oa.prototype.bytesPerElement=12,ht("StructArrayLayout2i4i12",oa);var xn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,x,S)},t.prototype.emplace=function(i,l,p,d,x,S,A){var M=4*i,L=8*i;return this.int16[M+0]=l,this.int16[M+1]=p,this.uint8[L+4]=d,this.uint8[L+5]=x,this.uint8[L+6]=S,this.uint8[L+7]=A,i},t}(Br);xn.prototype.bytesPerElement=8,ht("StructArrayLayout2i4ub8",xn);var Al=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(Br);Al.prototype.bytesPerElement=8,ht("StructArrayLayout2f8",Al);var ao=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S,A,M,L,V){var q=this.length;return this.resize(q+1),this.emplace(q,i,l,p,d,x,S,A,M,L,V)},t.prototype.emplace=function(i,l,p,d,x,S,A,M,L,V,q){var W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=p,this.uint16[W+2]=d,this.uint16[W+3]=x,this.uint16[W+4]=S,this.uint16[W+5]=A,this.uint16[W+6]=M,this.uint16[W+7]=L,this.uint16[W+8]=V,this.uint16[W+9]=q,i},t}(Br);ao.prototype.bytesPerElement=20,ht("StructArrayLayout10ui20",ao);var zc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S,A,M,L,V,q,W){var ne=this.length;return this.resize(ne+1),this.emplace(ne,i,l,p,d,x,S,A,M,L,V,q,W)},t.prototype.emplace=function(i,l,p,d,x,S,A,M,L,V,q,W,ne){var oe=12*i;return this.int16[oe+0]=l,this.int16[oe+1]=p,this.int16[oe+2]=d,this.int16[oe+3]=x,this.uint16[oe+4]=S,this.uint16[oe+5]=A,this.uint16[oe+6]=M,this.uint16[oe+7]=L,this.int16[oe+8]=V,this.int16[oe+9]=q,this.int16[oe+10]=W,this.int16[oe+11]=ne,i},t}(Br);zc.prototype.bytesPerElement=24,ht("StructArrayLayout4i4ui4i24",zc);var zl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.float32[x+0]=l,this.float32[x+1]=p,this.float32[x+2]=d,i},t}(Br);zl.prototype.bytesPerElement=12,ht("StructArrayLayout3f12",zl);var Jl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(Br);Jl.prototype.bytesPerElement=4,ht("StructArrayLayout1ul4",Jl);var pl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S,A,M,L){var V=this.length;return this.resize(V+1),this.emplace(V,i,l,p,d,x,S,A,M,L)},t.prototype.emplace=function(i,l,p,d,x,S,A,M,L,V){var q=10*i,W=5*i;return this.int16[q+0]=l,this.int16[q+1]=p,this.int16[q+2]=d,this.int16[q+3]=x,this.int16[q+4]=S,this.int16[q+5]=A,this.uint32[W+3]=M,this.uint16[q+8]=L,this.uint16[q+9]=V,i},t}(Br);pl.prototype.bytesPerElement=20,ht("StructArrayLayout6i1ul2ui20",pl);var ps=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,x,S)},t.prototype.emplace=function(i,l,p,d,x,S,A){var M=6*i;return this.int16[M+0]=l,this.int16[M+1]=p,this.int16[M+2]=d,this.int16[M+3]=x,this.int16[M+4]=S,this.int16[M+5]=A,i},t}(Br);ps.prototype.bytesPerElement=12,ht("StructArrayLayout2i2i2i12",ps);var fl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x){var S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,d,x)},t.prototype.emplace=function(i,l,p,d,x,S){var A=4*i,M=8*i;return this.float32[A+0]=l,this.float32[A+1]=p,this.float32[A+2]=d,this.int16[M+6]=x,this.int16[M+7]=S,i},t}(Br);fl.prototype.bytesPerElement=16,ht("StructArrayLayout2f1f2i16",fl);var dl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var S=12*i,A=3*i;return this.uint8[S+0]=l,this.uint8[S+1]=p,this.float32[A+1]=d,this.float32[A+2]=x,i},t}(Br);dl.prototype.bytesPerElement=12,ht("StructArrayLayout2ub2f12",dl);var fs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.uint16[x+0]=l,this.uint16[x+1]=p,this.uint16[x+2]=d,i},t}(Br);fs.prototype.bytesPerElement=6,ht("StructArrayLayout3ui6",fs);var Ws=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S,A,M,L,V,q,W,ne,oe,me,ue,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,i,l,p,d,x,S,A,M,L,V,q,W,ne,oe,me,ue,be)},t.prototype.emplace=function(i,l,p,d,x,S,A,M,L,V,q,W,ne,oe,me,ue,be,Se){var Ae=24*i,De=12*i,Fe=48*i;return this.int16[Ae+0]=l,this.int16[Ae+1]=p,this.uint16[Ae+2]=d,this.uint16[Ae+3]=x,this.uint32[De+2]=S,this.uint32[De+3]=A,this.uint32[De+4]=M,this.uint16[Ae+10]=L,this.uint16[Ae+11]=V,this.uint16[Ae+12]=q,this.float32[De+7]=W,this.float32[De+8]=ne,this.uint8[Fe+36]=oe,this.uint8[Fe+37]=me,this.uint8[Fe+38]=ue,this.uint32[De+10]=be,this.int16[Ae+22]=Se,i},t}(Br);Ws.prototype.bytesPerElement=48,ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ws);var xu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,S,A,M,L,V,q,W,ne,oe,me,ue,be,Se,Ae,De,Fe,Ge,tt,bt,lt,At,st,rr){var Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,i,l,p,d,x,S,A,M,L,V,q,W,ne,oe,me,ue,be,Se,Ae,De,Fe,Ge,tt,bt,lt,At,st,rr)},t.prototype.emplace=function(i,l,p,d,x,S,A,M,L,V,q,W,ne,oe,me,ue,be,Se,Ae,De,Fe,Ge,tt,bt,lt,At,st,rr,Ot){var yt=34*i,ur=17*i;return this.int16[yt+0]=l,this.int16[yt+1]=p,this.int16[yt+2]=d,this.int16[yt+3]=x,this.int16[yt+4]=S,this.int16[yt+5]=A,this.int16[yt+6]=M,this.int16[yt+7]=L,this.uint16[yt+8]=V,this.uint16[yt+9]=q,this.uint16[yt+10]=W,this.uint16[yt+11]=ne,this.uint16[yt+12]=oe,this.uint16[yt+13]=me,this.uint16[yt+14]=ue,this.uint16[yt+15]=be,this.uint16[yt+16]=Se,this.uint16[yt+17]=Ae,this.uint16[yt+18]=De,this.uint16[yt+19]=Fe,this.uint16[yt+20]=Ge,this.uint16[yt+21]=tt,this.uint16[yt+22]=bt,this.uint32[ur+12]=lt,this.float32[ur+13]=At,this.float32[ur+14]=st,this.float32[ur+15]=rr,this.float32[ur+16]=Ot,i},t}(Br);xu.prototype.bytesPerElement=68,ht("StructArrayLayout8i15ui1ul4f68",xu);var yo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(Br);yo.prototype.bytesPerElement=4,ht("StructArrayLayout1f4",yo);var Bo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.int16[x+0]=l,this.int16[x+1]=p,this.int16[x+2]=d,i},t}(Br);Bo.prototype.bytesPerElement=6,ht("StructArrayLayout3i6",Bo);var ds=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=4*i;return this.uint32[2*i+0]=l,this.uint16[x+2]=p,this.uint16[x+3]=d,i},t}(Br);ds.prototype.bytesPerElement=8,ht("StructArrayLayout1ul2ui8",ds);var oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(Br);oo.prototype.bytesPerElement=4,ht("StructArrayLayout2ui4",oo);var ms=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(Br);ms.prototype.bytesPerElement=2,ht("StructArrayLayout1ui2",ms);var wu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var S=4*i;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=d,this.float32[S+3]=x,i},t}(Br);wu.prototype.bytesPerElement=16,ht("StructArrayLayout4f16",wu);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new R(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(Tl);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(pl);ht("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(Tl);o.prototype.size=48;var u=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Ws);ht("PlacedSymbolArray",u);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(Tl);m.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(xu);ht("SymbolInstanceArray",w);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(yo);ht("GlyphOffsetArray",E);var I=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Bo);ht("SymbolLineVertexArray",I);var D=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(Tl);D.prototype.size=8;var U=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new D(this,i)},t}(ds);ht("FeatureIndexArray",U);var J=qn([{name:"a_pos",components:2,type:"Int16"}],4).members,Y=function(e){e===void 0&&(e=[]),this.segments=e};function Q(e,t){return 256*(e=ve(Math.floor(e),0,255))+ve(Math.floor(t),0,255)}Y.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>Y.MAX_VERTEX_ARRAY_LENGTH&&Bt("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>Y.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},Y.simpleSegment=function(e,t,i,l){return new Y([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ht("SegmentVector",Y);var se=qn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ae=T(function(e){e.exports=function(t,i){var l,p,d,x,S,A,M,L;for(p=t.length-(l=3&t.length),d=i,S=3432918353,A=461845907,L=0;L<p;)M=255&t.charCodeAt(L)|(255&t.charCodeAt(++L))<<8|(255&t.charCodeAt(++L))<<16|(255&t.charCodeAt(++L))<<24,++L,d=27492+(65535&(x=5*(65535&(d=(d^=M=(65535&(M=(M=(65535&M)*S+(((M>>>16)*S&65535)<<16)&4294967295)<<15|M>>>17))*A+(((M>>>16)*A&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(M=0,l){case 3:M^=(255&t.charCodeAt(L+2))<<16;case 2:M^=(255&t.charCodeAt(L+1))<<8;case 1:d^=M=(65535&(M=(M=(65535&(M^=255&t.charCodeAt(L)))*S+(((M>>>16)*S&65535)<<16)&4294967295)<<15|M>>>17))*A+(((M>>>16)*A&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),pe=T(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,x=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(x)|(255&t.charCodeAt(++x))<<8|(255&t.charCodeAt(++x))<<16|(255&t.charCodeAt(++x))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++x;switch(p){case 3:d^=(255&t.charCodeAt(x+2))<<16;case 2:d^=(255&t.charCodeAt(x+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(x)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),re=ae,fe=pe;re.murmur3=ae,re.murmur2=fe;var _e=function(){this.ids=[],this.positions=[],this.indexed=!1};_e.prototype.add=function(e,t,i,l){this.ids.push(Pe(e)),this.positions.push(t,i,l)},_e.prototype.getPositions=function(e){for(var t=Pe(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},_e.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,x,S,A){for(;S<A;){for(var M=d[S+A>>1],L=S-1,V=A+1;;){do L++;while(d[L]<M);do V--;while(d[V]>M);if(L>=V)break;Ce(d,L,V),Ce(x,3*L,3*V),Ce(x,3*L+1,3*V+1),Ce(x,3*L+2,3*V+2)}V-S<A-V?(p(d,x,S,V),S=V+1):(p(d,x,V+1,A),A=V)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},_e.deserialize=function(e){var t=new _e;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Ee=Math.pow(2,53)-1;function Pe(e){var t=+e;return!isNaN(t)&&t<=Ee?t:re(String(e))}function Ce(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}ht("FeaturePositionMap",_e);var Oe=function(e,t){this.gl=e.gl,this.location=t},Ze=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Oe),We=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Oe),He=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Oe),ut=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Oe),St=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Oe),dt=function(e){function t(i,l){e.call(this,i,l),this.current=tr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Oe),_t=new Float32Array(16),er=function(e){function t(i,l){e.call(this,i,l),this.current=_t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Oe);function at(e){return[Q(255*e.r,255*e.g),Q(255*e.b,255*e.a)]}var Ut=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};Ut.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Ut.prototype.getBinding=function(e,t,i){return this.type==="color"?new dt(e,t):new We(e,t)};var Gt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Gt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Gt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Gt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new St(e,t):new We(e,t)};var qt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};qt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,x=this.expression.evaluate(new $t(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,x)},qt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},qt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=at(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},qt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ft=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(x){return"u_"+x+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(x){return{name:"a_"+x,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Ft.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new $t(this.zoom),t,{},l,[],p),x=this.expression.evaluate(new $t(this.zoom+1),t,{},l,[],p),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,d,x)},Ft.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},Ft.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=at(i),d=at(l),x=e;x<t;x++)this.paintVertexArray.emplace(x,p[0],p[1],d[0],d[1]);else{for(var S=e;S<t;S++)this.paintVertexArray.emplace(S,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},Ft.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ft.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ft.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=ve(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},Ft.prototype.getBinding=function(e,t,i){return new We(e,t)};var Zt=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Zt.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Zt.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Zt.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],x=l[i.max];if(p&&d&&x)for(var S=e;S<t;S++)this.zoomInPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],d.pixelRatio,x.pixelRatio)}},Zt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,se.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,se.members,this.expression.isStateDependent))},Zt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Mt=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof Gi&&rn(d.property.specification)){var x=nn(p,e.type),S=d.value,A=d.property.specification.type,M=d.property.useIntegerZoom,L=d.property.specification["property-type"],V=L==="cross-faded"||L==="cross-faded-data-driven";if(S.kind==="constant")this.binders[p]=V?new Gt(S.value,x):new Ut(S.value,x,A),l.push("/u_"+p);else if(S.kind==="source"||V){var q=Mi(p,A,"source");this.binders[p]=V?new Zt(S,A,M,t,q,e.id):new qt(S,x,A,q),l.push("/a_"+p)}else{var W=Mi(p,A,"composite");this.binders[p]=new Ft(S,x,A,M,t,W),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};Mt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof qt||t instanceof Ft?t.maxValue:0},Mt.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var x=this.binders[d];(x instanceof qt||x instanceof Ft||x instanceof Zt)&&x.populatePaintArray(e,t,i,l,p)}},Mt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Gt&&l.setConstantPatternPositions(e,t)}},Mt.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var x in e)for(var S=0,A=t.getPositions(x);S<A.length;S+=1){var M=A[S],L=i.feature(M.index);for(var V in this.binders){var q=this.binders[V];if((q instanceof qt||q instanceof Ft||q instanceof Zt)&&q.expression.isStateDependent===!0){var W=l.paint.get(V);q.expression=W.value,q.updatePaintArray(M.start,M.end,L,e[x],p),d=!0}}}return d},Mt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Ut||i instanceof Gt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},Mt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof qt||i instanceof Ft)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Zt)for(var p=0;p<se.members.length;p++)e.push(se.members[p].name)}return e},Mt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ut||i instanceof Gt||i instanceof Ft)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},Mt.prototype.getPaintVertexBuffers=function(){return this._buffers},Mt.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof Ut||p instanceof Gt||p instanceof Ft)for(var d=0,x=p.uniformNames;d<x.length;d+=1){var S=x[d];if(t[S]){var A=p.getBinding(e,t[S],S);i.push({name:S,property:l,binding:A})}}}return i},Mt.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var x=d[p],S=x.name,A=x.property;this.binders[A].setUniform(x.binding,l,i.get(A),S)}},Mt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Zt){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof qt||i instanceof Ft)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Mt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof qt||i instanceof Ft||i instanceof Zt)&&i.upload(e)}this.updatePaintBuffers()},Mt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof qt||t instanceof Ft||t instanceof Zt)&&t.destroy()}};var Rt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new Mt(d,t,i)}this.needsUpload=!1,this._featureMap=new _e,this._bufferOffset=0};function nn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Mi(e,t,i){var l={color:{source:Al,composite:wu},number:{source:yo,composite:Al}},p=function(d){return{"line-pattern":{source:ao,composite:ao},"fill-pattern":{source:ao,composite:ao},"fill-extrusion-pattern":{source:ao,composite:ao}}[d]}(e);return p&&p[i]||l[t][i]}Rt.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Rt.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var x=d[p];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,t,x,l)||this.needsUpload}},Rt.prototype.get=function(e){return this.programConfigurations[e]},Rt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Rt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ht("ConstantBinder",Ut),ht("CrossFadedConstantBinder",Gt),ht("SourceExpressionBinder",qt),ht("CrossFadedCompositeBinder",Zt),ht("CompositeExpressionBinder",Ft),ht("ProgramConfiguration",Mt,{omit:["_buffers"]}),ht("ProgramConfigurationSet",Rt);var va=Math.pow(2,14)-1,Zn=-va-1;function ai(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var x=p[d],S=Math.round(x.x*t),A=Math.round(x.y*t);x.x=ve(S,Zn,va),x.y=ve(A,Zn,va),(S<x.x||S>x.x+1||A<x.y||A>x.y+1)&&Bt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function fn(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ai(e):[]}}function Pn(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var Ki=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new hl,this.indexArray=new fs,this.segments=new Y,this.programConfigurations=new Rt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function so(e,t){for(var i=0;i<e.length;i++)if(Fo(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(Fo(e,t[l]))return!0;return!!Yl(e,t)}function Na(e,t,i){return!!Fo(e,t)||!!Oo(t,e,i)}function Ua(e,t){if(e.length===1)return Fs(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(Fo(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(Fs(t,e[d]))return!0;for(var x=0;x<t.length;x++)if(Yl(e,t[x]))return!0;return!1}function ys(e,t,i){if(e.length>1){if(Yl(e,t))return!0;for(var l=0;l<t.length;l++)if(Oo(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Oo(e[p],t,i))return!0;return!1}function Yl(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(gs(l,p,t[d],t[d+1]))return!0;return!1}function gs(e,t,i,l){return Er(e,i,l)!==Er(t,i,l)&&Er(e,t,i)!==Er(e,t,l)}function Oo(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Pl(e,t[p-1],t[p])<l)return!0;return!1}function Pl(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function Fs(e,t){for(var i,l,p,d=!1,x=0;x<e.length;x++)for(var S=0,A=(i=e[x]).length-1;S<i.length;A=S++)(l=i[S]).y>t.y!=(p=i[A]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function Fo(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],x=e[p];d.y>t.y!=x.y>t.y&&t.x<(x.x-d.x)*(t.y-d.y)/(x.y-d.y)+d.x&&(i=!i)}return i}function Ql(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=Er(e,t,i[0]);return d!==Er(e,t,i[1])||d!==Er(e,t,i[2])||d!==Er(e,t,i[3])}function _s(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Hi(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Vs(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=R.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var x=[],S=0;S<e.length;S++)x.push(e[S].sub(d));return x}Ki.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var x=0,S=e;x<S.length;x+=1){var A=S[x],M=A.feature,L=A.id,V=A.index,q=A.sourceLayerIndex,W=this.layers[0]._featureFilter.needGeometry,ne=fn(M,W);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),ne,i)){var oe=d?d.evaluate(ne,{},i):void 0,me={id:L,properties:M.properties,type:M.type,sourceLayerIndex:q,index:V,geometry:W?ne.geometry:ai(M),patterns:{},sortKey:oe};p.push(me)}}d&&p.sort(function(tt,bt){return tt.sortKey-bt.sortKey});for(var ue=0,be=p;ue<be.length;ue+=1){var Se=be[ue],Ae=Se.geometry,De=Se.index,Fe=Se.sourceLayerIndex,Ge=e[De].feature;this.addFeature(Se,Ae,De,i),t.featureIndex.insert(Ge,Ae,De,Fe,this.index)}},Ki.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ki.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ki.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ki.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,J),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ki.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ki.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var x=0,S=d[p];x<S.length;x+=1){var A=S[x],M=A.x,L=A.y;if(!(M<0||M>=8192||L<0||L>=8192)){var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),q=V.vertexLength;Pn(this.layoutVertexArray,M,L,-1,-1),Pn(this.layoutVertexArray,M,L,1,-1),Pn(this.layoutVertexArray,M,L,1,1),Pn(this.layoutVertexArray,M,L,-1,1),this.indexArray.emplaceBack(q,q+1,q+2),this.indexArray.emplaceBack(q,q+3,q+2),V.vertexLength+=4,V.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},ht("CircleBucket",Ki,{omit:["layers"]});var ja=new bn({"circle-sort-key":new ft(G.layout_circle["circle-sort-key"])}),Ma={paint:new bn({"circle-radius":new ft(G.paint_circle["circle-radius"]),"circle-color":new ft(G.paint_circle["circle-color"]),"circle-blur":new ft(G.paint_circle["circle-blur"]),"circle-opacity":new ft(G.paint_circle["circle-opacity"]),"circle-translate":new Et(G.paint_circle["circle-translate"]),"circle-translate-anchor":new Et(G.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Et(G.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Et(G.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ft(G.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ft(G.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ft(G.paint_circle["circle-stroke-opacity"])}),layout:ja},fr=typeof Float32Array<"u"?Float32Array:Array;function go(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Gn(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3],S=t[4],A=t[5],M=t[6],L=t[7],V=t[8],q=t[9],W=t[10],ne=t[11],oe=t[12],me=t[13],ue=t[14],be=t[15],Se=i[0],Ae=i[1],De=i[2],Fe=i[3];return e[0]=Se*l+Ae*S+De*V+Fe*oe,e[1]=Se*p+Ae*A+De*q+Fe*me,e[2]=Se*d+Ae*M+De*W+Fe*ue,e[3]=Se*x+Ae*L+De*ne+Fe*be,e[4]=(Se=i[4])*l+(Ae=i[5])*S+(De=i[6])*V+(Fe=i[7])*oe,e[5]=Se*p+Ae*A+De*q+Fe*me,e[6]=Se*d+Ae*M+De*W+Fe*ue,e[7]=Se*x+Ae*L+De*ne+Fe*be,e[8]=(Se=i[8])*l+(Ae=i[9])*S+(De=i[10])*V+(Fe=i[11])*oe,e[9]=Se*p+Ae*A+De*q+Fe*me,e[10]=Se*d+Ae*M+De*W+Fe*ue,e[11]=Se*x+Ae*L+De*ne+Fe*be,e[12]=(Se=i[12])*l+(Ae=i[13])*S+(De=i[14])*V+(Fe=i[15])*oe,e[13]=Se*p+Ae*A+De*q+Fe*me,e[14]=Se*d+Ae*M+De*W+Fe*ue,e[15]=Se*x+Ae*L+De*ne+Fe*be,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var $l,Wc=Gn;function Js(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*x,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*x,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*x,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*x,e}$l=new fr(3),fr!=Float32Array&&($l[0]=0,$l[1]=0,$l[2]=0),function(){var e=new fr(4);fr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var eu=(function(){var e=new fr(2);fr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Ma)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Ki(i)},t.prototype.queryRadius=function(i){var l=i;return _s("circle-radius",this,l)+_s("circle-stroke-width",this,l)+Hi(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,S,A,M){for(var L=Vs(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,A),V=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),q=this.paint.get("circle-pitch-alignment")==="map",W=q?L:function(Ge,tt){return Ge.map(function(bt){return tu(bt,tt)})}(L,M),ne=q?V*A:V,oe=0,me=d;oe<me.length;oe+=1)for(var ue=0,be=me[oe];ue<be.length;ue+=1){var Se=be[ue],Ae=q?Se:tu(Se,M),De=ne,Fe=Js([],[Se.x,Se.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?De*=Fe[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(De*=S.cameraToCenterDistance/Fe[3]),Na(W,Ae,De))return!0}return!1},t}(cs));function tu(e,t){var i=Js([],[e.x,e.y,0,1],t);return new R(i[0]/i[3],i[1]/i[3])}var Cl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ki);function Ys(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function Eu(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=Ys({},{width:l,height:p},i);Jc(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function Jc(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=e.data,S=t.data,A=0;A<p.height;A++)for(var M=((i.y+A)*e.width+i.x)*d,L=((l.y+A)*t.width+l.x)*d,V=0;V<p.width*d;V++)S[L+V]=x[M+V];return t}ht("HeatmapBucket",Cl,{omit:["layers"]});var vs=function(e,t){Ys(this,e,1,t)};vs.prototype.resize=function(e){Eu(this,e,1)},vs.prototype.clone=function(){return new vs({width:this.width,height:this.height},new Uint8Array(this.data))},vs.copy=function(e,t,i,l,p){Jc(e,t,i,l,p,1)};var lo=function(e,t){Ys(this,e,4,t)};lo.prototype.resize=function(e){Eu(this,e,4)},lo.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},lo.prototype.clone=function(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))},lo.copy=function(e,t,i,l,p){Jc(e,t,i,l,p,4)},ht("AlphaImage",vs),ht("RGBAImage",lo);var Qs={paint:new bn({"heatmap-radius":new ft(G.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ft(G.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Et(G.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Va(G.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Et(G.paint_heatmap["heatmap-opacity"])})};function Ns(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new lo({width:i,height:l}),d=function(ne,oe,me){t[e.evaluationKey]=me;var ue=e.expression.evaluate(t);p.data[ne+oe+0]=Math.floor(255*ue.r/ue.a),p.data[ne+oe+1]=Math.floor(255*ue.g/ue.a),p.data[ne+oe+2]=Math.floor(255*ue.b/ue.a),p.data[ne+oe+3]=Math.floor(255*ue.a)};if(e.clips)for(var x=0,S=0;x<l;++x,S+=4*i)for(var A=0,M=0;A<i;A++,M+=4){var L=A/(i-1),V=e.clips[x];d(S,M,V.start*(1-L)+V.end*L)}else for(var q=0,W=0;q<i;q++,W+=4)d(0,W,q/(i-1));return p}var ru=function(e){function t(i){e.call(this,i,Qs),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Cl(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Ns({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(cs),tp={paint:new bn({"hillshade-illumination-direction":new Et(G.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Et(G.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Et(G.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Et(G.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Et(G.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Et(G.paint_hillshade["hillshade-accent-color"])})},Qu=function(e){function t(i){e.call(this,i,tp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(cs),kd=qn([{name:"a_pos",components:2,type:"Int16"}],4).members,Yc=Ml,$u=Ml;function Ml(e,t,i){i=i||2;var l,p,d,x,S,A,M,L=t&&t.length,V=L?t[0]*i:e.length,q=Sh(e,0,V,i,!0),W=[];if(!q||q.next===q.prev)return W;if(L&&(q=function(oe,me,ue,be){var Se,Ae,De,Fe=[];for(Se=0,Ae=me.length;Se<Ae;Se++)(De=Sh(oe,me[Se]*be,Se<Ae-1?me[Se+1]*be:oe.length,be,!1))===De.next&&(De.steiner=!0),Fe.push(nu(De));for(Fe.sort(ap),Se=0;Se<Fe.length;Se++)op(Fe[Se],ue),ue=bs(ue,ue.next);return ue}(e,t,q,i)),e.length>80*i){l=d=e[0],p=x=e[1];for(var ne=i;ne<V;ne+=i)(S=e[ne])<l&&(l=S),(A=e[ne+1])<p&&(p=A),S>d&&(d=S),A>x&&(x=A);M=(M=Math.max(d-l,x-p))!==0?1/M:0}return iu(q,W,i,l,p,M),W}function Sh(e,t,i,l,p){var d,x;if(p===Qc(e,t,i,l)>0)for(d=t;d<i;d+=l)x=kh(d,e[d],e[d+1],x);else for(d=i-l;d>=t;d-=l)x=kh(d,e[d],e[d+1],x);return x&&Pc(x,x.next)&&(tc(x),x=x.next),x}function bs(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!Pc(l,l.next)&&Kn(l.prev,l,l.next)!==0)l=l.next;else{if(tc(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function iu(e,t,i,l,p,d,x){if(e){!x&&d&&function(L,V,q,W){var ne=L;do ne.z===null&&(ne.z=xs(ne.x,ne.y,V,q,W)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==L);ne.prevZ.nextZ=null,ne.prevZ=null,function(oe){var me,ue,be,Se,Ae,De,Fe,Ge,tt=1;do{for(ue=oe,oe=null,Ae=null,De=0;ue;){for(De++,be=ue,Fe=0,me=0;me<tt&&(Fe++,be=be.nextZ);me++);for(Ge=tt;Fe>0||Ge>0&&be;)Fe!==0&&(Ge===0||!be||ue.z<=be.z)?(Se=ue,ue=ue.nextZ,Fe--):(Se=be,be=be.nextZ,Ge--),Ae?Ae.nextZ=Se:oe=Se,Se.prevZ=Ae,Ae=Se;ue=be}Ae.nextZ=null,tt*=2}while(De>1)}(ne)}(e,l,p,d);for(var S,A,M=e;e.prev!==e.next;)if(S=e.prev,A=e.next,d?ip(e,l,p,d):rp(e))t.push(S.i/i),t.push(e.i/i),t.push(A.i/i),tc(e),e=A.next,M=A.next;else if((e=A)===M){x?x===1?iu(e=Su(bs(e),t,i),t,i,l,p,d,2):x===2&&np(e,t,i,l,p,d):iu(bs(e),t,i,l,p,d,1);break}}}function rp(e){var t=e.prev,i=e,l=e.next;if(Kn(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(ku(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&Kn(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ip(e,t,i,l){var p=e.prev,d=e,x=e.next;if(Kn(p,d,x)>=0)return!1;for(var S=p.x>d.x?p.x>x.x?p.x:x.x:d.x>x.x?d.x:x.x,A=p.y>d.y?p.y>x.y?p.y:x.y:d.y>x.y?d.y:x.y,M=xs(p.x<d.x?p.x<x.x?p.x:x.x:d.x<x.x?d.x:x.x,p.y<d.y?p.y<x.y?p.y:x.y:d.y<x.y?d.y:x.y,t,i,l),L=xs(S,A,t,i,l),V=e.prevZ,q=e.nextZ;V&&V.z>=M&&q&&q.z<=L;){if(V!==e.prev&&V!==e.next&&ku(p.x,p.y,d.x,d.y,x.x,x.y,V.x,V.y)&&Kn(V.prev,V,V.next)>=0||(V=V.prevZ,q!==e.prev&&q!==e.next&&ku(p.x,p.y,d.x,d.y,x.x,x.y,q.x,q.y)&&Kn(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;V&&V.z>=M;){if(V!==e.prev&&V!==e.next&&ku(p.x,p.y,d.x,d.y,x.x,x.y,V.x,V.y)&&Kn(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;q&&q.z<=L;){if(q!==e.prev&&q!==e.next&&ku(p.x,p.y,d.x,d.y,x.x,x.y,q.x,q.y)&&Kn(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function Su(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!Pc(p,d)&&Iu(p,l,l.next,d)&&ml(p,d)&&ml(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),tc(l),tc(l.next),l=e=d),l=l.next}while(l!==e);return bs(l)}function np(e,t,i,l,p,d){var x=e;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&ec(x,S)){var A=Mc(x,S);return x=bs(x,x.next),A=bs(A,A.next),iu(x,t,i,l,p,d),void iu(A,t,i,l,p,d)}S=S.next}x=x.next}while(x!==e)}function ap(e,t){return e.x-t.x}function op(e,t){if(t=function(l,p){var d,x=p,S=l.x,A=l.y,M=-1/0;do{if(A<=x.y&&A>=x.next.y&&x.next.y!==x.y){var L=x.x+(A-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(L<=S&&L>M){if(M=L,L===S){if(A===x.y)return x;if(A===x.next.y)return x.next}d=x.x<x.next.x?x:x.next}}x=x.next}while(x!==p);if(!d)return null;if(S===M)return d;var V,q=d,W=d.x,ne=d.y,oe=1/0;x=d;do S>=x.x&&x.x>=W&&S!==x.x&&ku(A<ne?S:M,A,W,ne,A<ne?M:S,A,x.x,x.y)&&(V=Math.abs(A-x.y)/(S-x.x),ml(x,l)&&(V<oe||V===oe&&(x.x>d.x||x.x===d.x&&Dl(d,x)))&&(d=x,oe=V)),x=x.next;while(x!==q);return d}(e,t)){var i=Mc(t,e);bs(t,t.next),bs(i,i.next)}}function Dl(e,t){return Kn(e.prev,e,t.prev)<0&&Kn(t.next,e,e.next)<0}function xs(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function nu(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function ku(e,t,i,l,p,d,x,S){return(p-x)*(t-S)-(e-x)*(d-S)>=0&&(e-x)*(l-S)-(i-x)*(t-S)>=0&&(i-x)*(d-S)-(p-x)*(l-S)>=0}function ec(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&Iu(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(ml(e,t)&&ml(t,e)&&function(i,l){var p=i,d=!1,x=(i.x+l.x)/2,S=(i.y+l.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&x<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(Kn(e.prev,e,t.prev)||Kn(e,t.prev,t))||Pc(e,t)&&Kn(e.prev,e,e.next)>0&&Kn(t.prev,t,t.next)>0)}function Kn(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Pc(e,t){return e.x===t.x&&e.y===t.y}function Iu(e,t,i,l){var p=Cc(Kn(e,t,i)),d=Cc(Kn(e,t,l)),x=Cc(Kn(i,l,e)),S=Cc(Kn(i,l,t));return p!==d&&x!==S||!(p!==0||!Ll(e,i,t))||!(d!==0||!Ll(e,l,t))||!(x!==0||!Ll(i,e,l))||!(S!==0||!Ll(i,t,l))}function Ll(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Cc(e){return e>0?1:e<0?-1:0}function ml(e,t){return Kn(e.prev,e,e.next)<0?Kn(e,t,e.next)>=0&&Kn(e,e.prev,t)>=0:Kn(e,t,e.prev)<0||Kn(e,e.next,t)<0}function Mc(e,t){var i=new Rl(e.i,e.x,e.y),l=new Rl(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function kh(e,t,i,l){var p=new Rl(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function tc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Rl(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Qc(e,t,i,l){for(var p=0,d=t,x=i-l;d<i;d+=l)p+=(e[x]-e[d])*(e[d+1]+e[x+1]),x=d;return p}function $s(e,t,i,l,p){(function d(x,S,A,M,L){for(;M>A;){if(M-A>600){var V=M-A+1,q=S-A+1,W=Math.log(V),ne=.5*Math.exp(2*W/3),oe=.5*Math.sqrt(W*ne*(V-ne)/V)*(q-V/2<0?-1:1);d(x,S,Math.max(A,Math.floor(S-q*ne/V+oe)),Math.min(M,Math.floor(S+(V-q)*ne/V+oe)),L)}var me=x[S],ue=A,be=M;for(Vo(x,A,S),L(x[M],me)>0&&Vo(x,A,M);ue<be;){for(Vo(x,ue,be),ue++,be--;L(x[ue],me)<0;)ue++;for(;L(x[be],me)>0;)be--}L(x[A],me)===0?Vo(x,A,be):Vo(x,++be,M),be<=S&&(A=be+1),S<=be&&(M=be-1)}})(e,t,i||0,l||e.length-1,p||au)}function Vo(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function au(e,t){return e<t?-1:e>t?1:0}function $c(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],x=0;x<i;x++){var S=Je(e[x]);S!==0&&(e[x].area=Math.abs(S),p===void 0&&(p=S<0),p===S<0?(l&&d.push(l),l=[e[x]]):l.push(e[x]))}if(l&&d.push(l),t>1)for(var A=0;A<d.length;A++)d[A].length<=t||($s(d[A],t,1,d[A].length-1,rc),d[A]=d[A].slice(0,t));return d}function rc(e,t){return t.area-e.area}function sp(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,x=t;d<x.length;d+=1){var S=x[d].paint.get(e+"-pattern");S.isConstant()||(p=!0);var A=S.constantOr(null);A&&(p=!0,l[A.to]=!0,l[A.from]=!0)}return p}function eh(e,t,i,l,p){for(var d=p.patternDependencies,x=0,S=t;x<S.length;x+=1){var A=S[x],M=A.paint.get(e+"-pattern").value;if(M.kind!=="constant"){var L=M.evaluate({zoom:l-1},i,{},p.availableImages),V=M.evaluate({zoom:l},i,{},p.availableImages),q=M.evaluate({zoom:l+1},i,{},p.availableImages);V=V&&V.name?V.name:V,q=q&&q.name?q.name:q,d[L=L&&L.name?L.name:L]=!0,d[V]=!0,d[q]=!0,i.patterns[A.id]={min:L,mid:V,max:q}}}return i}Ml.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(Qc(e,0,p?t[0]*i:e.length,i));if(p)for(var x=0,S=t.length;x<S;x++)d-=Math.abs(Qc(e,t[x]*i,x<S-1?t[x+1]*i:e.length,i));var A=0;for(x=0;x<l.length;x+=3){var M=l[x]*i,L=l[x+1]*i,V=l[x+2]*i;A+=Math.abs((e[M]-e[V])*(e[L+1]-e[M+1])-(e[M]-e[L])*(e[V+1]-e[M+1]))}return d===0&&A===0?0:Math.abs((A-d)/d)},Ml.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var x=0;x<t;x++)i.vertices.push(e[p][d][x]);p>0&&i.holes.push(l+=e[p-1].length)}return i},Yc.default=$u;var _o=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hl,this.indexArray=new fs,this.indexArray2=new oo,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};_o.prototype.populate=function(e,t,i){this.hasPattern=sp("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var S=x[d],A=S.feature,M=S.id,L=S.index,V=S.sourceLayerIndex,q=this.layers[0]._featureFilter.needGeometry,W=fn(A,q);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),W,i)){var ne=l?l.evaluate(W,{},i,t.availableImages):void 0,oe={id:M,properties:A.properties,type:A.type,sourceLayerIndex:V,index:L,geometry:q?W.geometry:ai(A),patterns:{},sortKey:ne};p.push(oe)}}l&&p.sort(function(Ge,tt){return Ge.sortKey-tt.sortKey});for(var me=0,ue=p;me<ue.length;me+=1){var be=ue[me],Se=be.geometry,Ae=be.index,De=be.sourceLayerIndex;if(this.hasPattern){var Fe=eh("fill",this.layers,be,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(be,Se,Ae,i,{});t.featureIndex.insert(e[Ae].feature,Se,Ae,De,this.index)}},_o.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},_o.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},_o.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_o.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_o.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kd),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},_o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},_o.prototype.addFeature=function(e,t,i,l,p){for(var d=0,x=$c(t,500);d<x.length;d+=1){for(var S=x[d],A=0,M=0,L=S;M<L.length;M+=1)A+=L[M].length;for(var V=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),q=V.vertexLength,W=[],ne=[],oe=0,me=S;oe<me.length;oe+=1){var ue=me[oe];if(ue.length!==0){ue!==S[0]&&ne.push(W.length/2);var be=this.segments2.prepareSegment(ue.length,this.layoutVertexArray,this.indexArray2),Se=be.vertexLength;this.layoutVertexArray.emplaceBack(ue[0].x,ue[0].y),this.indexArray2.emplaceBack(Se+ue.length-1,Se),W.push(ue[0].x),W.push(ue[0].y);for(var Ae=1;Ae<ue.length;Ae++)this.layoutVertexArray.emplaceBack(ue[Ae].x,ue[Ae].y),this.indexArray2.emplaceBack(Se+Ae-1,Se+Ae),W.push(ue[Ae].x),W.push(ue[Ae].y);be.vertexLength+=ue.length,be.primitiveLength+=ue.length}}for(var De=Yc(W,ne),Fe=0;Fe<De.length;Fe+=3)this.indexArray.emplaceBack(q+De[Fe],q+De[Fe+1],q+De[Fe+2]);V.vertexLength+=A,V.primitiveLength+=De.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ht("FillBucket",_o,{omit:["layers","patternFeatures"]});var ic=new bn({"fill-sort-key":new ft(G.layout_fill["fill-sort-key"])}),lp={paint:new bn({"fill-antialias":new Et(G.paint_fill["fill-antialias"]),"fill-opacity":new ft(G.paint_fill["fill-opacity"]),"fill-color":new ft(G.paint_fill["fill-color"]),"fill-outline-color":new ft(G.paint_fill["fill-outline-color"]),"fill-translate":new Et(G.paint_fill["fill-translate"]),"fill-translate-anchor":new Et(G.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ac(G.paint_fill["fill-pattern"])}),layout:ic},nc=function(e){function t(i){e.call(this,i,lp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new _o(i)},t.prototype.queryRadius=function(){return Hi(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,S,A){return Ua(Vs(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,A),d)},t.prototype.isTileClipped=function(){return!0},t}(cs),th=qn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ih=Tu;function Tu(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(Au,this,t)}function Au(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var x=p._keys[l.readVarint()],S=p._values[l.readVarint()];p.properties[x]=S}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function up(e){for(var t,i,l=0,p=0,d=e.length,x=d-1;p<d;x=p++)l+=((i=e[x]).x-(t=e[p]).x)*(t.y+i.y);return l}Tu.types=["Unknown","Point","LineString","Polygon"],Tu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,x=0,S=[];e.pos<i;){if(p<=0){var A=e.readVarint();l=7&A,p=A>>3}if(p--,l===1||l===2)d+=e.readSVarint(),x+=e.readSVarint(),l===1&&(t&&S.push(t),t=[]),t.push(new R(d,x));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&S.push(t),S},Tu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,x=1/0,S=-1/0,A=1/0,M=-1/0;e.pos<t;){if(l<=0){var L=e.readVarint();i=7&L,l=L>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<x&&(x=p),p>S&&(S=p),(d+=e.readSVarint())<A&&(A=d),d>M&&(M=d);else if(i!==7)throw new Error("unknown command "+i)}return[x,A,S,M]},Tu.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),x=this.extent*e,S=this.extent*t,A=this.loadGeometry(),M=Tu.types[this.type];function L(W){for(var ne=0;ne<W.length;ne++){var oe=W[ne];W[ne]=[360*(oe.x+x)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+S)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(l=0;l<A.length;l++)V[l]=A[l][0];L(A=V);break;case 2:for(l=0;l<A.length;l++)L(A[l]);break;case 3:for(A=function(W){var ne=W.length;if(ne<=1)return[W];for(var oe,me,ue=[],be=0;be<ne;be++){var Se=up(W[be]);Se!==0&&(me===void 0&&(me=Se<0),me===Se<0?(oe&&ue.push(oe),oe=[W[be]]):oe.push(W[be]))}return oe&&ue.push(oe),ue}(A),l=0;l<A.length;l++)for(p=0;p<A[l].length;p++)L(A[l][p])}A.length===1?A=A[0]:M="Multi"+M;var q={type:"Feature",geometry:{type:M,coordinates:A},properties:this.properties};return"id"in this&&(q.id=this.id),q};var Th=cp;function cp(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Bl,this,t),this.length=this._features.length}function Bl(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var x=l.readVarint()>>3;p=x===1?l.readString():x===2?l.readFloat():x===3?l.readDouble():x===4?l.readVarint64():x===5?l.readVarint():x===6?l.readSVarint():x===7?l.readBoolean():null}return p}(i))}function No(e,t,i){if(e===3){var l=new Th(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}cp.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Ih(this._pbf,t,this.extent,this._keys,this._values)};var Be={VectorTile:function(e,t){this.layers=e.readFields(No,{},t)},VectorTileFeature:Ih,VectorTileLayer:Th},ot=Be.VectorTileFeature.types,zu=Math.pow(2,13);function Ol(e,t,i,l,p,d,x,S){e.emplaceBack(t,i,2*Math.floor(l*zu)+x,p*zu*2,d*zu*2,Math.round(S))}var vo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new oa,this.indexArray=new fs,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ac(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}vo.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=sp("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],x=d.feature,S=d.id,A=d.index,M=d.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,V=fn(x,L);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),V,i)){var q={id:S,sourceLayerIndex:M,index:A,geometry:L?V.geometry:ai(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(eh("fill-extrusion",this.layers,q,this.zoom,t)):this.addFeature(q,q.geometry,A,i,{}),t.featureIndex.insert(x,q.geometry,A,M,this.index,!0)}}},vo.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},vo.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},vo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,th),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},vo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vo.prototype.addFeature=function(e,t,i,l,p){for(var d=0,x=$c(t,500);d<x.length;d+=1){for(var S=x[d],A=0,M=0,L=S;M<L.length;M+=1)A+=L[M].length;for(var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),q=0,W=S;q<W.length;q+=1){var ne=W[q];if(ne.length!==0&&!((ur=ne).every(function(Xt){return Xt.x<0})||ur.every(function(Xt){return Xt.x>8192})||ur.every(function(Xt){return Xt.y<0})||ur.every(function(Xt){return Xt.y>8192})))for(var oe=0,me=0;me<ne.length;me++){var ue=ne[me];if(me>=1){var be=ne[me-1];if(!ac(ue,be)){V.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Se=ue.sub(be)._perp()._unit(),Ae=be.dist(ue);oe+Ae>32768&&(oe=0),Ol(this.layoutVertexArray,ue.x,ue.y,Se.x,Se.y,0,0,oe),Ol(this.layoutVertexArray,ue.x,ue.y,Se.x,Se.y,0,1,oe),Ol(this.layoutVertexArray,be.x,be.y,Se.x,Se.y,0,0,oe+=Ae),Ol(this.layoutVertexArray,be.x,be.y,Se.x,Se.y,0,1,oe);var De=V.vertexLength;this.indexArray.emplaceBack(De,De+2,De+1),this.indexArray.emplaceBack(De+1,De+2,De+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+A>Y.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),ot[e.type]==="Polygon"){for(var Fe=[],Ge=[],tt=V.vertexLength,bt=0,lt=S;bt<lt.length;bt+=1){var At=lt[bt];if(At.length!==0){At!==S[0]&&Ge.push(Fe.length/2);for(var st=0;st<At.length;st++){var rr=At[st];Ol(this.layoutVertexArray,rr.x,rr.y,0,0,1,1,0),Fe.push(rr.x),Fe.push(rr.y)}}}for(var Ot=Yc(Fe,Ge),yt=0;yt<Ot.length;yt+=3)this.indexArray.emplaceBack(tt+Ot[yt],tt+Ot[yt+2],tt+Ot[yt+1]);V.primitiveLength+=Ot.length/3,V.vertexLength+=A}}var ur;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ht("FillExtrusionBucket",vo,{omit:["layers","features"]});var el={paint:new bn({"fill-extrusion-opacity":new Et(G["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ft(G["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Et(G["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Et(G["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ac(G["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ft(G["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ft(G["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Et(G["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},oc=function(e){function t(i){e.call(this,i,el)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new vo(i)},t.prototype.queryRadius=function(){return Hi(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,S,A,M){var L=Vs(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,A),V=this.paint.get("fill-extrusion-height").evaluate(l,p),q=this.paint.get("fill-extrusion-base").evaluate(l,p),W=function(oe,me,ue,be){for(var Se=[],Ae=0,De=oe;Ae<De.length;Ae+=1){var Fe=De[Ae],Ge=[Fe.x,Fe.y,0,1];Js(Ge,Ge,me),Se.push(new R(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return Se}(L,M),ne=function(oe,me,ue,be){for(var Se=[],Ae=[],De=be[8]*me,Fe=be[9]*me,Ge=be[10]*me,tt=be[11]*me,bt=be[8]*ue,lt=be[9]*ue,At=be[10]*ue,st=be[11]*ue,rr=0,Ot=oe;rr<Ot.length;rr+=1){for(var yt=[],ur=[],Xt=0,xr=Ot[rr];Xt<xr.length;Xt+=1){var Pt=xr[Xt],Ir=Pt.x,Li=Pt.y,dn=be[0]*Ir+be[4]*Li+be[12],vi=be[1]*Ir+be[5]*Li+be[13],Ri=be[2]*Ir+be[6]*Li+be[14],an=be[3]*Ir+be[7]*Li+be[15],la=Ri+Ge,Wn=an+tt,Da=dn+bt,ua=vi+lt,Za=Ri+At,bi=an+st,ca=new R((dn+De)/Wn,(vi+Fe)/Wn);ca.z=la/Wn,yt.push(ca);var pr=new R(Da/bi,ua/bi);pr.z=Za/bi,ur.push(pr)}Se.push(yt),Ae.push(ur)}return[Se,Ae]}(d,q,V,M);return function(oe,me,ue){var be=1/0;Ua(ue,me)&&(be=Uo(ue,me[0]));for(var Se=0;Se<me.length;Se++)for(var Ae=me[Se],De=oe[Se],Fe=0;Fe<Ae.length-1;Fe++){var Ge=Ae[Fe],tt=[Ge,Ae[Fe+1],De[Fe+1],De[Fe],Ge];so(ue,tt)&&(be=Math.min(be,Uo(ue,tt)))}return be!==1/0&&be}(ne[0],ne[1],W)},t}(cs);function ts(e,t){return e.x*t.x+e.y*t.y}function Uo(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],x=e[0],S=i.sub(p),A=d.sub(p),M=x.sub(p),L=ts(S,S),V=ts(S,A),q=ts(A,A),W=ts(M,S),ne=ts(M,A),oe=L*q-V*V,me=(q*W-V*ne)/oe,ue=(L*ne-V*W)/oe,be=p.z*(1-me-ue)+i.z*me+d.z*ue;if(isFinite(be))return be}return 1/0}for(var Se=1/0,Ae=0,De=t;Ae<De.length;Ae+=1)Se=Math.min(Se,De[Ae].z);return Se}var sc=qn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Pu=qn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Dc=Be.VectorTileFeature.types,lc=Math.cos(Math.PI/180*37.5),ou=Math.pow(2,14)/.5,Hn=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new xn,this.layoutVertexArray2=new Al,this.indexArray=new fs,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Y,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Hn.prototype.populate=function(e,t,i){this.hasPattern=sp("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var S=x[d],A=S.feature,M=S.id,L=S.index,V=S.sourceLayerIndex,q=this.layers[0]._featureFilter.needGeometry,W=fn(A,q);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),W,i)){var ne=l?l.evaluate(W,{},i):void 0,oe={id:M,properties:A.properties,type:A.type,sourceLayerIndex:V,index:L,geometry:q?W.geometry:ai(A),patterns:{},sortKey:ne};p.push(oe)}}l&&p.sort(function(Ge,tt){return Ge.sortKey-tt.sortKey});for(var me=0,ue=p;me<ue.length;me+=1){var be=ue[me],Se=be.geometry,Ae=be.index,De=be.sourceLayerIndex;if(this.hasPattern){var Fe=eh("line",this.layers,be,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(be,Se,Ae,i,{});t.featureIndex.insert(e[Ae].feature,Se,Ae,De,this.index)}},Hn.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Hn.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Hn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Hn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Hn.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Pu)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Hn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Hn.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Hn.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,x=d.get("line-join").evaluate(e,{}),S=d.get("line-cap"),A=d.get("line-miter-limit"),M=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var L=0,V=t;L<V.length;L+=1)this.addLine(V[L],e,x,S,A,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},Hn.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<e.length-1;x++)this.totalDistance+=e[x].dist(e[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=Dc[t.type]==="Polygon",A=e.length;A>=2&&e[A-1].equals(e[A-2]);)A--;for(var M=0;M<A-1&&e[M].equals(e[M+1]);)M++;if(!(A<(S?3:2))){i==="bevel"&&(p=1.05);var L,V=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),W=void 0,ne=void 0,oe=void 0,me=void 0;this.e1=this.e2=-1,S&&(me=e[M].sub(L=e[A-2])._unit()._perp());for(var ue=M;ue<A;ue++)if(!(ne=ue===A-1?S?e[M+1]:void 0:e[ue+1])||!e[ue].equals(ne)){me&&(oe=me),L&&(W=L),L=e[ue],me=ne?ne.sub(L)._unit()._perp():oe;var be=(oe=oe||me).add(me);be.x===0&&be.y===0||be._unit();var Se=oe.x*me.x+oe.y*me.y,Ae=be.x*me.x+be.y*me.y,De=Ae!==0?1/Ae:1/0,Fe=2*Math.sqrt(2-2*Ae),Ge=Ae<lc&&W&&ne,tt=oe.x*me.y-oe.y*me.x>0;if(Ge&&ue>M){var bt=L.dist(W);if(bt>2*V){var lt=L.sub(L.sub(W)._mult(V/bt)._round());this.updateDistance(W,lt),this.addCurrentVertex(lt,oe,0,0,q),W=lt}}var At=W&&ne,st=At?i:S?"butt":l;if(At&&st==="round"&&(De<d?st="miter":De<=2&&(st="fakeround")),st==="miter"&&De>p&&(st="bevel"),st==="bevel"&&(De>2&&(st="flipbevel"),De<p&&(st="miter")),W&&this.updateDistance(W,L),st==="miter")be._mult(De),this.addCurrentVertex(L,be,0,0,q);else if(st==="flipbevel"){if(De>100)be=me.mult(-1);else{var rr=De*oe.add(me).mag()/oe.sub(me).mag();be._perp()._mult(rr*(tt?-1:1))}this.addCurrentVertex(L,be,0,0,q),this.addCurrentVertex(L,be.mult(-1),0,0,q)}else if(st==="bevel"||st==="fakeround"){var Ot=-Math.sqrt(De*De-1),yt=tt?Ot:0,ur=tt?0:Ot;if(W&&this.addCurrentVertex(L,oe,yt,ur,q),st==="fakeround")for(var Xt=Math.round(180*Fe/Math.PI/20),xr=1;xr<Xt;xr++){var Pt=xr/Xt;if(Pt!==.5){var Ir=Pt-.5;Pt+=Pt*Ir*(Pt-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*Ir*Ir+(.848013+Se*(.215638*Se-1.06021)))}var Li=me.sub(oe)._mult(Pt)._add(oe)._unit()._mult(tt?-1:1);this.addHalfVertex(L,Li.x,Li.y,!1,tt,0,q)}ne&&this.addCurrentVertex(L,me,-yt,-ur,q)}else if(st==="butt")this.addCurrentVertex(L,be,0,0,q);else if(st==="square"){var dn=W?1:-1;this.addCurrentVertex(L,be,dn,dn,q)}else st==="round"&&(W&&(this.addCurrentVertex(L,oe,0,0,q),this.addCurrentVertex(L,oe,1,1,q,!0)),ne&&(this.addCurrentVertex(L,me,-1,-1,q,!0),this.addCurrentVertex(L,me,0,0,q)));if(Ge&&ue<A-1){var vi=L.dist(ne);if(vi>2*V){var Ri=L.add(ne.sub(L)._mult(V/vi)._round());this.updateDistance(L,Ri),this.addCurrentVertex(Ri,me,0,0,q),L=Ri}}}}},Hn.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var x=t.y*l-t.x,S=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,x,S,d,!0,-l,p),this.distance>ou/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},Hn.prototype.addHalfVertex=function(e,t,i,l,p,d,x){var S=.5*(this.lineClips?this.scaledDistance*(ou-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var A=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),x.primitiveLength++),p?this.e2=A:this.e1=A},Hn.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Hn.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ht("LineBucket",Hn,{omit:["layers","patternFeatures"]});var uc=new bn({"line-cap":new Et(G.layout_line["line-cap"]),"line-join":new ft(G.layout_line["line-join"]),"line-miter-limit":new Et(G.layout_line["line-miter-limit"]),"line-round-limit":new Et(G.layout_line["line-round-limit"]),"line-sort-key":new ft(G.layout_line["line-sort-key"])}),Cu={paint:new bn({"line-opacity":new ft(G.paint_line["line-opacity"]),"line-color":new ft(G.paint_line["line-color"]),"line-translate":new Et(G.paint_line["line-translate"]),"line-translate-anchor":new Et(G.paint_line["line-translate-anchor"]),"line-width":new ft(G.paint_line["line-width"]),"line-gap-width":new ft(G.paint_line["line-gap-width"]),"line-offset":new ft(G.paint_line["line-offset"]),"line-blur":new ft(G.paint_line["line-blur"]),"line-dasharray":new Ca(G.paint_line["line-dasharray"]),"line-pattern":new Ac(G.paint_line["line-pattern"]),"line-gradient":new Va(G.paint_line["line-gradient"])}),layout:uc},Mu=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new $t(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=Ne({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(ft))(Cu.paint.properties["line-width"].specification);Mu.useIntegerZoom=!0;var su=function(e){function t(i){e.call(this,i,Cu),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof yi,this.gradientVersion=(this.gradientVersion+1)%le)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=Mu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new Hn(i)},t.prototype.queryRadius=function(i){var l=i,p=Du(_s("line-width",this,l),_s("line-gap-width",this,l)),d=_s("line-offset",this,l);return p/2+Math.abs(d)+Hi(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,S,A){var M=Vs(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,A),L=A/2*Du(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),V=this.paint.get("line-offset").evaluate(l,p);return V&&(d=function(q,W){for(var ne=[],oe=new R(0,0),me=0;me<q.length;me++){for(var ue=q[me],be=[],Se=0;Se<ue.length;Se++){var Ae=ue[Se],De=ue[Se+1],Fe=Se===0?oe:Ae.sub(ue[Se-1])._unit()._perp(),Ge=Se===ue.length-1?oe:De.sub(Ae)._unit()._perp(),tt=Fe._add(Ge)._unit();tt._mult(1/(tt.x*Ge.x+tt.y*Ge.y)),be.push(tt._mult(W)._add(Ae))}ne.push(be)}return ne}(d,V*A)),function(q,W,ne){for(var oe=0;oe<W.length;oe++){var me=W[oe];if(q.length>=3){for(var ue=0;ue<me.length;ue++)if(Fo(q,me[ue]))return!0}if(ys(q,me,ne))return!0}return!1}(M,d,L)},t.prototype.isTileClipped=function(){return!0},t}(cs);function Du(e,t){return t>0?t+2*e:e}var yl=qn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cc=qn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Lu=(qn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),qn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),hc=(qn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),qn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),gf=qn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hp(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,x){var S=d.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),mo.applyArabicShaping&&(p=mo.applyArabicShaping(p)),p}(l.text,t,i)}),e}qn([{name:"triangle",components:3,type:"Uint16"}]),qn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),qn([{type:"Float32",name:"offsetX"}]),qn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Lc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},pp=function(e,t,i,l,p){var d,x,S=8*p-l-1,A=(1<<S)-1,M=A>>1,L=-7,V=i?p-1:0,q=i?-1:1,W=e[t+V];for(V+=q,d=W&(1<<-L)-1,W>>=-L,L+=S;L>0;d=256*d+e[t+V],V+=q,L-=8);for(x=d&(1<<-L)-1,d>>=-L,L+=l;L>0;x=256*x+e[t+V],V+=q,L-=8);if(d===0)d=1-M;else{if(d===A)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,l),d-=M}return(W?-1:1)*x*Math.pow(2,d-l)},rh=function(e,t,i,l,p,d){var x,S,A,M=8*d-p-1,L=(1<<M)-1,V=L>>1,q=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=l?0:d-1,ne=l?1:-1,oe=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(S=isNaN(t)?1:0,x=L):(x=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-x))<1&&(x--,A*=2),(t+=x+V>=1?q/A:q*Math.pow(2,1-V))*A>=2&&(x++,A/=2),x+V>=L?(S=0,x=L):x+V>=1?(S=(t*A-1)*Math.pow(2,p),x+=V):(S=t*Math.pow(2,V-1)*Math.pow(2,p),x=0));p>=8;e[i+W]=255&S,W+=ne,S/=256,p-=8);for(x=x<<p|S,M+=p;M>0;e[i+W]=255&x,W+=ne,x/=256,M-=8);e[i+W-ne]|=128*oe},ih=_i;function _i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}_i.Varint=0,_i.Fixed64=1,_i.Bytes=2,_i.Fixed32=5;var fp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Fl(e){return e.type===_i.Bytes?e.readVarint()+e.pos:e.pos+1}function Vl(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Ah(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function Rc(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Bc(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function _f(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function dp(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Id(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function vf(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function mp(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function bf(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xf(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function lu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function pc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function zh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Td(e,t,i){e===1&&i.readMessage(wf,t)}function wf(e,t,i){if(e===3){var l=i.readMessage(yp,{}),p=l.width,d=l.height,x=l.left,S=l.top,A=l.advance;t.push({id:l.id,bitmap:new vs({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:x,top:S,advance:A}})}}function yp(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function gp(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(oe,me){return me.h-oe.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],S=0,A=0,M=0,L=e;M<L.length;M+=1)for(var V=L[M],q=x.length-1;q>=0;q--){var W=x[q];if(!(V.w>W.w||V.h>W.h)){if(V.x=W.x,V.y=W.y,A=Math.max(A,V.y+V.h),S=Math.max(S,V.x+V.w),V.w===W.w&&V.h===W.h){var ne=x.pop();q<x.length&&(x[q]=ne)}else V.h===W.h?(W.x+=V.w,W.w-=V.w):V.w===W.w?(W.y+=V.h,W.h-=V.h):(x.push({x:W.x+V.w,y:W.y,w:W.w-V.w,h:V.h}),W.y+=V.h,W.h-=V.h);break}}return{w:S,h:A,fill:t/(S*A)||0}}_i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=zh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*zh(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=pp(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=pp(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,x){var S,A,M=x.buf;if(S=(112&(A=M[x.pos++]))>>4,A<128||(S|=(127&(A=M[x.pos++]))<<3,A<128)||(S|=(127&(A=M[x.pos++]))<<10,A<128)||(S|=(127&(A=M[x.pos++]))<<17,A<128)||(S|=(127&(A=M[x.pos++]))<<24,A<128)||(S|=(1&(A=M[x.pos++]))<<31,A<128))return Vl(p,S,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&fp?function(i,l,p){return fp.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",x=l;x<p;){var S,A,M,L=i[x],V=null,q=L>239?4:L>223?3:L>191?2:1;if(x+q>p)break;q===1?L<128&&(V=L):q===2?(192&(S=i[x+1]))==128&&(V=(31&L)<<6|63&S)<=127&&(V=null):q===3?(A=i[x+2],(192&(S=i[x+1]))==128&&(192&A)==128&&((V=(15&L)<<12|(63&S)<<6|63&A)<=2047||V>=55296&&V<=57343)&&(V=null)):q===4&&(A=i[x+2],M=i[x+3],(192&(S=i[x+1]))==128&&(192&A)==128&&(192&M)==128&&((V=(15&L)<<18|(63&S)<<12|(63&A)<<6|63&M)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,q=1):V>65535&&(V-=65536,d+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),d+=String.fromCharCode(V),x+=q}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==_i.Bytes)return e.push(this.readVarint(t));var i=Fl(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==_i.Bytes)return e.push(this.readSVarint());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==_i.Bytes)return e.push(this.readBoolean());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==_i.Bytes)return e.push(this.readFloat());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==_i.Bytes)return e.push(this.readDouble());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==_i.Bytes)return e.push(this.readFixed32());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==_i.Bytes)return e.push(this.readSFixed32());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==_i.Bytes)return e.push(this.readFixed64());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==_i.Bytes)return e.push(this.readSFixed64());var t=Fl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===_i.Varint)for(;this.buf[this.pos++]>127;);else if(t===_i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===_i.Fixed32)this.pos+=4;else{if(t!==_i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),pc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),pc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),pc(this.buf,-1&e,this.pos),pc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),pc(this.buf,-1&e,this.pos),pc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,x,S){S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,S.buf[S.pos]=127&(d>>>=7)}(l,0,i),function(d,x){var S=(7&d)<<4;x.buf[x.pos++]|=S|((d>>>=3)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var x,S,A=0;A<p.length;A++){if((x=p.charCodeAt(A))>55295&&x<57344){if(!S){x>56319||A+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):S=x;continue}if(x<56320){l[d++]=239,l[d++]=191,l[d++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(l[d++]=239,l[d++]=191,l[d++]=189,S=null);x<128?l[d++]=x:(x<2048?l[d++]=x>>6|192:(x<65536?l[d++]=x>>12|224:(l[d++]=x>>18|240,l[d++]=x>>12&63|128),l[d++]=x>>6&63|128),l[d++]=63&x|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&Ah(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),rh(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),rh(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&Ah(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,_i.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Rc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Bc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Id,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,_f,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,dp,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,vf,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,mp,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,bf,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xf,t)},writeBytesField:function(e,t){this.writeTag(e,_i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,_i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,_i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,_i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,_i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,_i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,_i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,_i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,_i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,_i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var nh=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,x=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=x,this.version=l},Nl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Nl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Nl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Nl.tlbr.get=function(){return this.tl.concat(this.br)},Nl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(nh.prototype,Nl);var Oc=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=gp(p),x=new lo({width:d.w||1,height:d.h||1});for(var S in e){var A=e[S],M=i[S].paddedRect;lo.copy(A.data,x,{x:0,y:0},{x:M.x+1,y:M.y+1},A.data)}for(var L in t){var V=t[L],q=l[L].paddedRect,W=q.x+1,ne=q.y+1,oe=V.data.width,me=V.data.height;lo.copy(V.data,x,{x:0,y:0},{x:W,y:ne},V.data),lo.copy(V.data,x,{x:0,y:me-1},{x:W,y:ne-1},{width:oe,height:1}),lo.copy(V.data,x,{x:0,y:0},{x:W,y:ne+me},{width:oe,height:1}),lo.copy(V.data,x,{x:oe-1,y:0},{x:W-1,y:ne},{width:1,height:me}),lo.copy(V.data,x,{x:0,y:0},{x:W+oe,y:ne},{width:1,height:me})}this.image=x,this.iconPositions=i,this.patternPositions=l};Oc.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new nh(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},Oc.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},Oc.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},ht("ImagePosition",nh),ht("ImageAtlas",Oc);var jo={horizontal:1,vertical:2,horizontalOnly:3},Fc=function(){this.scale=1,this.fontStack="",this.imageName=null};Fc.forText=function(e,t){var i=new Fc;return i.scale=e||1,i.fontStack=t,i},Fc.forImage=function(e){var t=new Fc;return t.imageName=e,t};var qa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Vc(e,t,i,l,p,d,x,S,A,M,L,V,q,W,ne,oe){var me,ue=qa.fromFeature(e,p);V===jo.vertical&&ue.verticalizePunctuation();var be=mo.processBidirectionalText,Se=mo.processStyledBidirectionalText;if(be&&ue.sections.length===1){me=[];for(var Ae=0,De=be(ue.toString(),Ph(ue,M,d,t,l,W,ne));Ae<De.length;Ae+=1){var Fe=De[Ae],Ge=new qa;Ge.text=Fe,Ge.sections=ue.sections;for(var tt=0;tt<Fe.length;tt++)Ge.sectionIndex.push(0);me.push(Ge)}}else if(Se){me=[];for(var bt=0,lt=Se(ue.text,ue.sectionIndex,Ph(ue,M,d,t,l,W,ne));bt<lt.length;bt+=1){var At=lt[bt],st=new qa;st.text=At[0],st.sectionIndex=At[1],st.sections=ue.sections,me.push(st)}}else me=function(yt,ur){for(var Xt=[],xr=yt.text,Pt=0,Ir=0,Li=ur;Ir<Li.length;Ir+=1){var dn=Li[Ir];Xt.push(yt.substring(Pt,dn)),Pt=dn}return Pt<xr.length&&Xt.push(yt.substring(Pt,xr.length)),Xt}(ue,Ph(ue,M,d,t,l,W,ne));var rr=[],Ot={positionedLines:rr,text:ue.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(yt,ur,Xt,xr,Pt,Ir,Li,dn,vi,Ri,an,la){for(var Wn=0,Da=-17,ua=0,Za=0,bi=dn==="right"?1:dn==="left"?0:.5,ca=0,pr=0,pi=Pt;pr<pi.length;pr+=1){var qr=pi[pr];qr.trim();var _r=qr.getMaxScale(),uo=24*(_r-1),La={positionedGlyphs:[],lineOffset:0};yt.positionedLines[ca]=La;var Wr=La.positionedGlyphs,Cn=0;if(qr.length()){for(var ba=0;ba<qr.length();ba++){var Rr=qr.getSection(ba),bl=qr.getSectionIndex(ba),Zo=qr.getCharCode(ba),xl=0,En=null,bo=null,Us=null,ju=24,wc=!(vi===jo.horizontal||!an&&!Hs(Zo)||an&&(ah[Zo]||(kc=Zo,et.Arabic(kc)||et["Arabic Supplement"](kc)||et["Arabic Extended-A"](kc)||et["Arabic Presentation Forms-A"](kc)||et["Arabic Presentation Forms-B"](kc))));if(Rr.imageName){var Ec=xr[Rr.imageName];if(!Ec)continue;Us=Rr.imageName,yt.iconsInText=yt.iconsInText||!0,bo=Ec.paddedRect;var wl=Ec.displaySize;Rr.scale=24*Rr.scale/la,xl=uo+(24-wl[1]*Rr.scale),ju=(En={width:wl[0],height:wl[1],left:1,top:-3,advance:wc?wl[1]:wl[0]}).advance;var Sc=wc?wl[0]*Rr.scale-24*_r:wl[1]*Rr.scale-24*_r;Sc>0&&Sc>Cn&&(Cn=Sc)}else{var mh=Xt[Rr.fontStack],Vh=mh&&mh[Zo];if(Vh&&Vh.rect)bo=Vh.rect,En=Vh.metrics;else{var Np=ur[Rr.fontStack],Of=Np&&Np[Zo];if(!Of)continue;En=Of.metrics}xl=24*(_r-Rr.scale)}wc?(yt.verticalizable=!0,Wr.push({glyph:Zo,imageName:Us,x:Wn,y:Da+xl,vertical:wc,scale:Rr.scale,fontStack:Rr.fontStack,sectionIndex:bl,metrics:En,rect:bo}),Wn+=ju*Rr.scale+Ri):(Wr.push({glyph:Zo,imageName:Us,x:Wn,y:Da+xl,vertical:wc,scale:Rr.scale,fontStack:Rr.fontStack,sectionIndex:bl,metrics:En,rect:bo}),Wn+=En.advance*Rr.scale+Ri)}Wr.length!==0&&(ua=Math.max(Wn-Ri,ua),Sf(Wr,0,Wr.length-1,bi,Cn)),Wn=0;var Ff=Ir*_r+Cn;La.lineOffset=Math.max(Cn,uo),Da+=Ff,Za=Math.max(Ff,Za),++ca}else Da+=Ir,++ca}var kc,Up=Da- -17,Nh=uu(Li),qc=Nh.horizontalAlign,Uh=Nh.verticalAlign;(function(Vf,Nf,jp,qp,Uf,Zp,Gp,Kp,jf){var jh,qf=(Nf-jp)*Uf;jh=Zp!==Gp?-Kp*qp- -17:(-qp*jf+.5)*Gp;for(var qh=0,Hp=Vf;qh<Hp.length;qh+=1)for(var yh=0,Xp=Hp[qh].positionedGlyphs;yh<Xp.length;yh+=1){var Zh=Xp[yh];Zh.x+=qf,Zh.y+=jh}})(yt.positionedLines,bi,qc,Uh,ua,Za,Ir,Up,Pt.length),yt.top+=-Uh*Up,yt.bottom=yt.top+Up,yt.left+=-qc*ua,yt.right=yt.left+ua}(Ot,t,i,l,me,x,S,A,V,M,q,oe),!function(yt){for(var ur=0,Xt=yt;ur<Xt.length;ur+=1)if(Xt[ur].positionedGlyphs.length!==0)return!1;return!0}(rr)&&Ot}qa.fromFeature=function(e,t){for(var i=new qa,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},qa.prototype.length=function(){return this.text.length},qa.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},qa.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},qa.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},qa.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&Co(l)&&!Lc[e[i+1]]||p&&Co(p)&&!Lc[e[i-1]]||!Lc[e[i]]?e[i]:Lc[e[i]]}return t}(this.text)},qa.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&ah[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&ah[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},qa.prototype.substring=function(e,t){var i=new qa;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},qa.prototype.toString=function(){return this.text},qa.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},qa.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(Fc.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},qa.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Fc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Bt("Reached maximum number of images 6401")}else Bt("Can't add FormattedSection with an empty image.")},qa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ah={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},qo={};function oh(e,t,i,l,p,d){if(t.imageName){var x=l[t.imageName];return x?x.displaySize[0]*t.scale*24/d+p:0}var S=i[t.fontStack],A=S&&S[e];return A?A.metrics.advance*t.scale+p:0}function _p(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function Ef(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function vp(e,t,i,l,p,d){for(var x=null,S=_p(t,i,p,d),A=0,M=l;A<M.length;A+=1){var L=M[A],V=_p(t-L.x,i,p,d)+L.badness;V<=S&&(x=L,S=V)}return{index:e,x:t,priorBreak:x,badness:S}}function Ph(e,t,i,l,p,d,x){if(d!=="point")return[];if(!e)return[];for(var S,A=[],M=function(me,ue,be,Se,Ae,De){for(var Fe=0,Ge=0;Ge<me.length();Ge++){var tt=me.getSection(Ge);Fe+=oh(me.getCharCode(Ge),tt,Se,Ae,ue,De)}return Fe/Math.max(1,Math.ceil(Fe/be))}(e,t,i,l,p,x),L=e.text.indexOf("\u200B")>=0,V=0,q=0;q<e.length();q++){var W=e.getSection(q),ne=e.getCharCode(q);if(ah[ne]||(V+=oh(ne,W,l,p,t,x)),q<e.length()-1){var oe=!((S=ne)<11904||!(et["Bopomofo Extended"](S)||et.Bopomofo(S)||et["CJK Compatibility Forms"](S)||et["CJK Compatibility Ideographs"](S)||et["CJK Compatibility"](S)||et["CJK Radicals Supplement"](S)||et["CJK Strokes"](S)||et["CJK Symbols and Punctuation"](S)||et["CJK Unified Ideographs Extension A"](S)||et["CJK Unified Ideographs"](S)||et["Enclosed CJK Letters and Months"](S)||et["Halfwidth and Fullwidth Forms"](S)||et.Hiragana(S)||et["Ideographic Description Characters"](S)||et["Kangxi Radicals"](S)||et["Katakana Phonetic Extensions"](S)||et.Katakana(S)||et["Vertical Forms"](S)||et["Yi Radicals"](S)||et["Yi Syllables"](S)));(qo[ne]||oe||W.imageName)&&A.push(vp(q+1,V,M,A,Ef(ne,e.getCharCode(q+1),oe&&L),!1))}}return function me(ue){return ue?me(ue.priorBreak).concat(ue.index):[]}(vp(e.length(),V,M,A,0,!0))}function uu(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Sf(e,t,i,l,p){if(l||p)for(var d=e[i],x=(e[i].x+d.metrics.advance*d.scale)*l,S=t;S<=i;S++)e[S].x-=x,e[S].y+=p}function fc(e,t,i,l,p,d){var x,S=e.image;if(S.content){var A=S.content,M=S.pixelRatio||1;x=[A[0]/M,A[1]/M,S.displaySize[0]-A[2]/M,S.displaySize[1]-A[3]/M]}var L,V,q,W,ne=t.left*d,oe=t.right*d;i==="width"||i==="both"?(W=p[0]+ne-l[3],V=p[0]+oe+l[1]):V=(W=p[0]+(ne+oe-S.displaySize[0])/2)+S.displaySize[0];var me=t.top*d,ue=t.bottom*d;return i==="height"||i==="both"?(L=p[1]+me-l[0],q=p[1]+ue+l[2]):q=(L=p[1]+(me+ue-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:L,right:V,bottom:q,left:W,collisionPadding:x}}qo[10]=!0,qo[32]=!0,qo[38]=!0,qo[40]=!0,qo[41]=!0,qo[43]=!0,qo[45]=!0,qo[47]=!0,qo[173]=!0,qo[183]=!0,qo[8203]=!0,qo[8208]=!0,qo[8211]=!0,qo[8231]=!0;var gl=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(R);function Ch(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new $t(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var x=d=Math.max(0,d-1);x<l.length&&l[x]<e+1;)x++;x=Math.min(l.length-1,x);var S=l[d],A=l[x];return i.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:A,minSize:i.evaluate(new $t(S)),maxSize:i.evaluate(new $t(A)),interpolationType:p}}function Mh(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?Lr(p/128,i.upperSize/128,t.uSizeT):l}function kf(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?ve(ni.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=Lr(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}ht("Anchor",gl);var If=Object.freeze({__proto__:null,getSizeData:Ch,evaluateSizeForFeature:Mh,evaluateSizeForZoom:kf,SIZE_PACK_FACTOR:128});function Dh(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,x=t.segment+1,S=0;S>-i/2;){if(--x<0)return!1;S-=e[x].dist(d),d=e[x]}S+=e[x].dist(e[x+1]),x++;for(var A=[],M=0;S<i/2;){var L=e[x],V=e[x+1];if(!V)return!1;var q=e[x-1].angleTo(L)-L.angleTo(V);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:S,angleDelta:q}),M+=q;S-A[0].distance>l;)M-=A.shift().angleDelta;if(M>p)return!1;x++,S+=L.dist(V)}return!0}function bp(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function xp(e,t,i){return e?.6*t*i:0}function dc(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Tf(e,t,i,l,p,d){for(var x=xp(i,p,d),S=dc(i,l)*d,A=0,M=bp(e)/2,L=0;L<e.length-1;L++){var V=e[L],q=e[L+1],W=V.dist(q);if(A+W>M){var ne=(M-A)/W,oe=Lr(V.x,q.x,ne),me=Lr(V.y,q.y,ne),ue=new gl(oe,me,q.angleTo(V),L);return ue._round(),!x||Dh(e,ue,S,x,t)?ue:void 0}A+=W}}function wp(e,t,i,l,p,d,x,S,A){var M=xp(l,d,x),L=dc(l,p),V=L*x,q=e[0].x===0||e[0].x===A||e[0].y===0||e[0].y===A;return t-V<t/4&&(t=V+t/4),function W(ne,oe,me,ue,be,Se,Ae,De,Fe){for(var Ge=Se/2,tt=bp(ne),bt=0,lt=oe-me,At=[],st=0;st<ne.length-1;st++){for(var rr=ne[st],Ot=ne[st+1],yt=rr.dist(Ot),ur=Ot.angleTo(rr);lt+me<bt+yt;){var Xt=((lt+=me)-bt)/yt,xr=Lr(rr.x,Ot.x,Xt),Pt=Lr(rr.y,Ot.y,Xt);if(xr>=0&&xr<Fe&&Pt>=0&&Pt<Fe&&lt-Ge>=0&&lt+Ge<=tt){var Ir=new gl(xr,Pt,ur,st);Ir._round(),ue&&!Dh(ne,Ir,Se,ue,be)||At.push(Ir)}}bt+=yt}return De||At.length||Ae||(At=W(ne,bt/2,me,ue,be,Se,Ae,!0,Fe)),At}(e,q?t/2*S%t:(L/2+2*d)*x*S%t,t,M,i,V,q,!1,A)}function Af(e,t,i,l,p){for(var d=[],x=0;x<e.length;x++)for(var S=e[x],A=void 0,M=0;M<S.length-1;M++){var L=S[M],V=S[M+1];L.x<t&&V.x<t||(L.x<t?L=new R(t,L.y+(t-L.x)/(V.x-L.x)*(V.y-L.y))._round():V.x<t&&(V=new R(t,L.y+(t-L.x)/(V.x-L.x)*(V.y-L.y))._round()),L.y<i&&V.y<i||(L.y<i?L=new R(L.x+(i-L.y)/(V.y-L.y)*(V.x-L.x),i)._round():V.y<i&&(V=new R(L.x+(i-L.y)/(V.y-L.y)*(V.x-L.x),i)._round()),L.x>=l&&V.x>=l||(L.x>=l?L=new R(l,L.y+(l-L.x)/(V.x-L.x)*(V.y-L.y))._round():V.x>=l&&(V=new R(l,L.y+(l-L.x)/(V.x-L.x)*(V.y-L.y))._round()),L.y>=p&&V.y>=p||(L.y>=p?L=new R(L.x+(p-L.y)/(V.y-L.y)*(V.x-L.x),p)._round():V.y>=p&&(V=new R(L.x+(p-L.y)/(V.y-L.y)*(V.x-L.x),p)._round()),A&&L.equals(A[A.length-1])||d.push(A=[L]),A.push(V)))))}return d}function Ep(e,t,i,l){var p=[],d=e.image,x=d.pixelRatio,S=d.paddedRect.w-2,A=d.paddedRect.h-2,M=e.right-e.left,L=e.bottom-e.top,V=d.stretchX||[[0,S]],q=d.stretchY||[[0,A]],W=function(xr,Pt){return xr+Pt[1]-Pt[0]},ne=V.reduce(W,0),oe=q.reduce(W,0),me=S-ne,ue=A-oe,be=0,Se=ne,Ae=0,De=oe,Fe=0,Ge=me,tt=0,bt=ue;if(d.content&&l){var lt=d.content;be=Nc(V,0,lt[0]),Ae=Nc(q,0,lt[1]),Se=Nc(V,lt[0],lt[2]),De=Nc(q,lt[1],lt[3]),Fe=lt[0]-be,tt=lt[1]-Ae,Ge=lt[2]-lt[0]-Se,bt=lt[3]-lt[1]-De}var At=function(xr,Pt,Ir,Li){var dn=sh(xr.stretch-be,Se,M,e.left),vi=cu(xr.fixed-Fe,Ge,xr.stretch,ne),Ri=sh(Pt.stretch-Ae,De,L,e.top),an=cu(Pt.fixed-tt,bt,Pt.stretch,oe),la=sh(Ir.stretch-be,Se,M,e.left),Wn=cu(Ir.fixed-Fe,Ge,Ir.stretch,ne),Da=sh(Li.stretch-Ae,De,L,e.top),ua=cu(Li.fixed-tt,bt,Li.stretch,oe),Za=new R(dn,Ri),bi=new R(la,Ri),ca=new R(la,Da),pr=new R(dn,Da),pi=new R(vi/x,an/x),qr=new R(Wn/x,ua/x),_r=t*Math.PI/180;if(_r){var uo=Math.sin(_r),La=Math.cos(_r),Wr=[La,-uo,uo,La];Za._matMult(Wr),bi._matMult(Wr),pr._matMult(Wr),ca._matMult(Wr)}var Cn=xr.stretch+xr.fixed,ba=Pt.stretch+Pt.fixed;return{tl:Za,tr:bi,bl:pr,br:ca,tex:{x:d.paddedRect.x+1+Cn,y:d.paddedRect.y+1+ba,w:Ir.stretch+Ir.fixed-Cn,h:Li.stretch+Li.fixed-ba},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pi,pixelOffsetBR:qr,minFontScaleX:Ge/x/M,minFontScaleY:bt/x/L,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var st=Sp(V,me,ne),rr=Sp(q,ue,oe),Ot=0;Ot<st.length-1;Ot++)for(var yt=st[Ot],ur=st[Ot+1],Xt=0;Xt<rr.length-1;Xt++)p.push(At(yt,rr[Xt],ur,rr[Xt+1]));else p.push(At({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:A+1}));return p}function Nc(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var x=d[p];l+=Math.max(t,Math.min(i,x[1]))-Math.max(t,Math.min(i,x[0]))}return l}function Sp(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var x=d[p],S=x[0],A=x[1],M=l[l.length-1];l.push({fixed:S-M.stretch,stretch:M.stretch}),l.push({fixed:S-M.stretch,stretch:M.stretch+(A-S)})}return l.push({fixed:t+1,stretch:i}),l}function sh(e,t,i,l){return e/t*i+l}function cu(e,t,i,l){return e-t*i/l}var lh=function(e,t,i,l,p,d,x,S,A,M){if(this.boxStartIndex=e.length,A){var L=d.top,V=d.bottom,q=d.collisionPadding;q&&(L-=q[1],V+=q[3]);var W=V-L;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{var ne=d.top*x-S,oe=d.bottom*x+S,me=d.left*x-S,ue=d.right*x+S,be=d.collisionPadding;if(be&&(me-=be[0]*x,ne-=be[1]*x,ue+=be[2]*x,oe+=be[3]*x),M){var Se=new R(me,ne),Ae=new R(ue,ne),De=new R(me,oe),Fe=new R(ue,oe),Ge=M*Math.PI/180;Se._rotate(Ge),Ae._rotate(Ge),De._rotate(Ge),Fe._rotate(Ge),me=Math.min(Se.x,Ae.x,De.x,Fe.x),ue=Math.max(Se.x,Ae.x,De.x,Fe.x),ne=Math.min(Se.y,Ae.y,De.y,Fe.y),oe=Math.max(Se.y,Ae.y,De.y,Fe.y)}e.emplaceBack(t.x,t.y,me,ne,ue,oe,i,l,p)}this.boxEndIndex=e.length},Ru=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Ad),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Ad(e,t){return e<t?-1:e>t?1:0}function zf(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,x=-1/0,S=e[0],A=0;A<S.length;A++){var M=S[A];(!A||M.x<l)&&(l=M.x),(!A||M.y<p)&&(p=M.y),(!A||M.x>d)&&(d=M.x),(!A||M.y>x)&&(x=M.y)}var L=Math.min(d-l,x-p),V=L/2,q=new Ru([],kp);if(L===0)return new R(l,p);for(var W=l;W<d;W+=L)for(var ne=p;ne<x;ne+=L)q.push(new mc(W+V,ne+V,V,e));for(var oe=function(be){for(var Se=0,Ae=0,De=0,Fe=be[0],Ge=0,tt=Fe.length,bt=tt-1;Ge<tt;bt=Ge++){var lt=Fe[Ge],At=Fe[bt],st=lt.x*At.y-At.x*lt.y;Ae+=(lt.x+At.x)*st,De+=(lt.y+At.y)*st,Se+=3*st}return new mc(Ae/Se,De/Se,0,be)}(e),me=q.length;q.length;){var ue=q.pop();(ue.d>oe.d||!oe.d)&&(oe=ue,i&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,me)),ue.max-oe.d<=t||(q.push(new mc(ue.p.x-(V=ue.h/2),ue.p.y-V,V,e)),q.push(new mc(ue.p.x+V,ue.p.y-V,V,e)),q.push(new mc(ue.p.x-V,ue.p.y+V,V,e)),q.push(new mc(ue.p.x+V,ue.p.y+V,V,e)),me+=4)}return i&&(console.log("num probes: "+me),console.log("best distance: "+oe.d)),oe.p}function kp(e,t){return t.max-e.max}function mc(e,t,i,l){this.p=new R(e,t),this.h=i,this.d=function(p,d){for(var x=!1,S=1/0,A=0;A<d.length;A++)for(var M=d[A],L=0,V=M.length,q=V-1;L<V;q=L++){var W=M[L],ne=M[q];W.y>p.y!=ne.y>p.y&&p.x<(ne.x-W.x)*(p.y-W.y)/(ne.y-W.y)+W.x&&(x=!x),S=Math.min(S,Pl(p,W,ne))}return(x?1:-1)*Math.sqrt(S)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}Ru.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Ru.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Ru.prototype.peek=function(){return this.data[0]},Ru.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},Ru.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),x=t[d],S=d+1;if(S<this.length&&i(t[S],x)<0&&(d=S,x=t[S]),i(x,p)>=0)break;t[e]=x,e=d}t[e]=p};var Lh=Number.POSITIVE_INFINITY;function uh(e,t){return t[1]!==Lh?function(i,l,p){var d=0,x=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,x]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var x=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=x-7;break;case"bottom-right":case"bottom-left":d=7-x;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function Rh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ip(e,t,i,l,p,d,x,S,A,M,L,V,q,W,ne){var oe=function(Ae,De,Fe,Ge,tt,bt,lt,At){for(var st=Ge.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,rr=[],Ot=0,yt=De.positionedLines;Ot<yt.length;Ot+=1)for(var ur=yt[Ot],Xt=0,xr=ur.positionedGlyphs;Xt<xr.length;Xt+=1){var Pt=xr[Xt];if(Pt.rect){var Ir=Pt.rect||{},Li=4,dn=!0,vi=1,Ri=0,an=(tt||At)&&Pt.vertical,la=Pt.metrics.advance*Pt.scale/2;if(At&&De.verticalizable&&(Ri=ur.lineOffset/2-(Pt.imageName?-(24-Pt.metrics.width*Pt.scale)/2:24*(Pt.scale-1))),Pt.imageName){var Wn=lt[Pt.imageName];dn=Wn.sdf,Li=1/(vi=Wn.pixelRatio)}var Da=tt?[Pt.x+la,Pt.y]:[0,0],ua=tt?[0,0]:[Pt.x+la+Fe[0],Pt.y+Fe[1]-Ri],Za=[0,0];an&&(Za=ua,ua=[0,0]);var bi=(Pt.metrics.left-Li)*Pt.scale-la+ua[0],ca=(-Pt.metrics.top-Li)*Pt.scale+ua[1],pr=bi+Ir.w*Pt.scale/vi,pi=ca+Ir.h*Pt.scale/vi,qr=new R(bi,ca),_r=new R(pr,ca),uo=new R(bi,pi),La=new R(pr,pi);if(an){var Wr=new R(-la,la- -17),Cn=-Math.PI/2,ba=12-la,Rr=new R(22-ba,-(Pt.imageName?ba:0)),bl=new(Function.prototype.bind.apply(R,[null].concat(Za)));qr._rotateAround(Cn,Wr)._add(Rr)._add(bl),_r._rotateAround(Cn,Wr)._add(Rr)._add(bl),uo._rotateAround(Cn,Wr)._add(Rr)._add(bl),La._rotateAround(Cn,Wr)._add(Rr)._add(bl)}if(st){var Zo=Math.sin(st),xl=Math.cos(st),En=[xl,-Zo,Zo,xl];qr._matMult(En),_r._matMult(En),uo._matMult(En),La._matMult(En)}var bo=new R(0,0),Us=new R(0,0);rr.push({tl:qr,tr:_r,bl:uo,br:La,tex:Ir,writingMode:De.writingMode,glyphOffset:Da,sectionIndex:Pt.sectionIndex,isSDF:dn,pixelOffsetTL:bo,pixelOffsetBR:Us,minFontScaleX:0,minFontScaleY:0})}}return rr}(0,i,S,p,d,x,l,e.allowVerticalPlacement),me=e.textSizeData,ue=null;me.kind==="source"?(ue=[128*p.layout.get("text-size").evaluate(x,{})])[0]>32640&&Bt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):me.kind==="composite"&&((ue=[128*W.compositeTextSizes[0].evaluate(x,{},ne),128*W.compositeTextSizes[1].evaluate(x,{},ne)])[0]>32640||ue[1]>32640)&&Bt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,oe,ue,S,d,x,M,t,A.lineStartIndex,A.lineLength,q,ne);for(var be=0,Se=L;be<Se.length;be+=1)V[Se[be]]=e.text.placedSymbolArray.length-1;return 4*oe.length}function Tp(e){for(var t in e)return e[t];return null}function Pf(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],x=d.length-1;x>=0;x--)if(l.dist(d[x])<i)return!0}else p[t]=[];return p[t].push(l),!1}var yc=Be.VectorTileFeature.types,Cf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hu(e,t,i,l,p,d,x,S,A,M,L,V,q){var W=S?Math.min(32640,Math.round(S[0])):0,ne=S?Math.min(32640,Math.round(S[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,x,(W<<1)+(A?1:0),ne,16*M,16*L,256*V,256*q)}function Bu(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Mf(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Oa(i[t].text))return!0;return!1}var Ou=function(e){this.layoutVertexArray=new zc,this.indexArray=new fs,this.programConfigurations=e,this.segments=new Y,this.dynamicLayoutVertexArray=new zl,this.opacityVertexArray=new Jl,this.placedSymbolArray=new u};Ou.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ou.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,cc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Cf,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},Ou.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ht("SymbolBuffers",Ou);var ch=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new Y,this.collisionVertexArray=new dl};ch.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Lu.members,!0)},ch.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ht("CollisionBuffers",ch);var Xr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=go([]),this.placementViewportMatrix=go([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ch(this.zoom,t["text-size"]),this.iconSizeData=Ch(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return jo[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Xr.prototype.createArrays=function(){this.text=new Ou(new Rt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Ou(new Rt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new E,this.lineVertexArray=new I,this.symbolInstances=new w},Xr.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var x=Lc[e.charAt(d)];x&&(t[x.charCodeAt(0)]=!0)}},Xr.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),x=p.get("text-field"),S=p.get("icon-image"),A=(x.value.kind!=="constant"||x.value.value instanceof fi&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),M=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,L=p.get("symbol-sort-key");if(this.features=[],A||M){for(var V=t.iconDependencies,q=t.glyphDependencies,W=t.availableImages,ne=new $t(this.zoom),oe=0,me=e;oe<me.length;oe+=1){var ue=me[oe],be=ue.feature,Se=ue.id,Ae=ue.index,De=ue.sourceLayerIndex,Fe=l._featureFilter.needGeometry,Ge=fn(be,Fe);if(l._featureFilter.filter(ne,Ge,i)){Fe||(Ge.geometry=ai(be));var tt=void 0;if(A){var bt=l.getValueAndResolveTokens("text-field",Ge,i,W),lt=fi.factory(bt);Mf(lt)&&(this.hasRTLText=!0),(!this.hasRTLText||ll()==="unavailable"||this.hasRTLText&&mo.isParsed())&&(tt=hp(lt,l,Ge))}var At=void 0;if(M){var st=l.getValueAndResolveTokens("icon-image",Ge,i,W);At=st instanceof di?st:di.fromString(st)}if(tt||At){var rr=this.sortFeaturesByKey?L.evaluate(Ge,{},i):void 0;if(this.features.push({id:Se,text:tt,icon:At,index:Ae,sourceLayerIndex:De,geometry:Ge.geometry,properties:be.properties,type:yc[be.type],sortKey:rr}),At&&(V[At.name]=!0),tt){var Ot=d.evaluate(Ge,{},i).join(","),yt=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(jo.vertical)>=0;for(var ur=0,Xt=tt.sections;ur<Xt.length;ur+=1){var xr=Xt[ur];if(xr.image)V[xr.image.name]=!0;else{var Pt=Os(tt.toString()),Ir=xr.fontStack||Ot,Li=q[Ir]=q[Ir]||{};this.calculateGlyphDependencies(xr.text,Li,yt,this.allowVerticalPlacement,Pt)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(dn){var vi={},Ri={},an=[],la=0;function Wn(Wr){an.push(dn[Wr]),la++}function Da(Wr,Cn,ba){var Rr=Ri[Wr];return delete Ri[Wr],Ri[Cn]=Rr,an[Rr].geometry[0].pop(),an[Rr].geometry[0]=an[Rr].geometry[0].concat(ba[0]),Rr}function ua(Wr,Cn,ba){var Rr=vi[Cn];return delete vi[Cn],vi[Wr]=Rr,an[Rr].geometry[0].shift(),an[Rr].geometry[0]=ba[0].concat(an[Rr].geometry[0]),Rr}function Za(Wr,Cn,ba){var Rr=ba?Cn[0][Cn[0].length-1]:Cn[0][0];return Wr+":"+Rr.x+":"+Rr.y}for(var bi=0;bi<dn.length;bi++){var ca=dn[bi],pr=ca.geometry,pi=ca.text?ca.text.toString():null;if(pi){var qr=Za(pi,pr),_r=Za(pi,pr,!0);if(qr in Ri&&_r in vi&&Ri[qr]!==vi[_r]){var uo=ua(qr,_r,pr),La=Da(qr,_r,an[uo].geometry);delete vi[qr],delete Ri[_r],Ri[Za(pi,an[La].geometry,!0)]=La,an[uo].geometry=null}else qr in Ri?Da(qr,_r,pr):_r in vi?ua(qr,_r,pr):(Wn(bi),vi[qr]=la-1,Ri[_r]=la-1)}else Wn(bi)}return an.filter(function(Wr){return Wr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(dn,vi){return dn.sortKey-vi.sortKey})}},Xr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Xr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Xr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Xr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Xr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Xr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Xr.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},x=e.segment+1;x<t.length;x++)d[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:l},x<t.length-1&&(l+=t[x+1].dist(t[x]));for(var S=e.segment||0;S>=0;S--)d[S]={x:t[S].x,y:t[S].y,tileUnitDistanceFromAnchor:p},S>0&&(p+=t[S-1].dist(t[S]));for(var A=0;A<t.length;A++){var M=d[A];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Xr.prototype.addSymbols=function(e,t,i,l,p,d,x,S,A,M,L,V){for(var q=e.indexArray,W=e.layoutVertexArray,ne=e.segments.prepareSegment(4*t.length,W,q,this.canOverlap?d.sortKey:void 0),oe=this.glyphOffsetArray.length,me=ne.vertexLength,ue=this.allowVerticalPlacement&&x===jo.vertical?Math.PI/2:0,be=d.text&&d.text.sections,Se=0;Se<t.length;Se++){var Ae=t[Se],De=Ae.tl,Fe=Ae.tr,Ge=Ae.bl,tt=Ae.br,bt=Ae.tex,lt=Ae.pixelOffsetTL,At=Ae.pixelOffsetBR,st=Ae.minFontScaleX,rr=Ae.minFontScaleY,Ot=Ae.glyphOffset,yt=Ae.isSDF,ur=Ae.sectionIndex,Xt=ne.vertexLength,xr=Ot[1];hu(W,S.x,S.y,De.x,xr+De.y,bt.x,bt.y,i,yt,lt.x,lt.y,st,rr),hu(W,S.x,S.y,Fe.x,xr+Fe.y,bt.x+bt.w,bt.y,i,yt,At.x,lt.y,st,rr),hu(W,S.x,S.y,Ge.x,xr+Ge.y,bt.x,bt.y+bt.h,i,yt,lt.x,At.y,st,rr),hu(W,S.x,S.y,tt.x,xr+tt.y,bt.x+bt.w,bt.y+bt.h,i,yt,At.x,At.y,st,rr),Bu(e.dynamicLayoutVertexArray,S,ue),q.emplaceBack(Xt,Xt+1,Xt+2),q.emplaceBack(Xt+1,Xt+2,Xt+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),Se!==t.length-1&&ur===t[Se+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,d,d.index,{},V,be&&be[ur])}e.placedSymbolArray.emplaceBack(S.x,S.y,oe,this.glyphOffsetArray.length-oe,me,A,M,S.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],x,0,!1,0,L)},Xr.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},Xr.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,x){var S=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),A=S.vertexLength,M=p.layoutVertexArray,L=p.collisionVertexArray,V=x.anchorX,q=x.anchorY;this._addCollisionDebugVertex(M,L,d,V,q,new R(e,t)),this._addCollisionDebugVertex(M,L,d,V,q,new R(i,t)),this._addCollisionDebugVertex(M,L,d,V,q,new R(i,l)),this._addCollisionDebugVertex(M,L,d,V,q,new R(e,l)),S.vertexLength+=4;var W=p.indexArray;W.emplaceBack(A,A+1),W.emplaceBack(A+1,A+2),W.emplaceBack(A+2,A+3),W.emplaceBack(A+3,A),S.primitiveLength+=4},Xr.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Xr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ch(ps,hc.members,oo),this.iconCollisionBox=new ch(ps,hc.members,oo);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Xr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,x,S,A){for(var M={},L=t;L<i;L++){var V=e.get(L);M.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},M.textFeatureIndex=V.featureIndex;break}for(var q=l;q<p;q++){var W=e.get(q);M.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},M.verticalTextFeatureIndex=W.featureIndex;break}for(var ne=d;ne<x;ne++){var oe=e.get(ne);M.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},M.iconFeatureIndex=oe.featureIndex;break}for(var me=S;me<A;me++){var ue=e.get(me);M.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},M.verticalIconFeatureIndex=ue.featureIndex;break}return M},Xr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Xr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Xr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Xr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Xr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Xr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Xr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},Xr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],x=0;x<this.symbolInstances.length;++x){d.push(x);var S=this.symbolInstances.get(x);l.push(0|Math.round(t*S.anchorX+i*S.anchorY)),p.push(S.featureIndex)}return d.sort(function(A,M){return l[A]-l[M]||p[M]-p[A]}),d},Xr.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Xr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,x,S){d>=0&&S.indexOf(d)===x&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ht("SymbolBucket",Xr,{omit:["layers","collisionBoxArray","features","compareText"]}),Xr.MAX_GLYPHS=65535,Xr.addDynamicAttributes=Bu;var Ap=new bn({"symbol-placement":new Et(G.layout_symbol["symbol-placement"]),"symbol-spacing":new Et(G.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Et(G.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ft(G.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Et(G.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Et(G.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Et(G.layout_symbol["icon-ignore-placement"]),"icon-optional":new Et(G.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Et(G.layout_symbol["icon-rotation-alignment"]),"icon-size":new ft(G.layout_symbol["icon-size"]),"icon-text-fit":new Et(G.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Et(G.layout_symbol["icon-text-fit-padding"]),"icon-image":new ft(G.layout_symbol["icon-image"]),"icon-rotate":new ft(G.layout_symbol["icon-rotate"]),"icon-padding":new Et(G.layout_symbol["icon-padding"]),"icon-keep-upright":new Et(G.layout_symbol["icon-keep-upright"]),"icon-offset":new ft(G.layout_symbol["icon-offset"]),"icon-anchor":new ft(G.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Et(G.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Et(G.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Et(G.layout_symbol["text-rotation-alignment"]),"text-field":new ft(G.layout_symbol["text-field"]),"text-font":new ft(G.layout_symbol["text-font"]),"text-size":new ft(G.layout_symbol["text-size"]),"text-max-width":new ft(G.layout_symbol["text-max-width"]),"text-line-height":new Et(G.layout_symbol["text-line-height"]),"text-letter-spacing":new ft(G.layout_symbol["text-letter-spacing"]),"text-justify":new ft(G.layout_symbol["text-justify"]),"text-radial-offset":new ft(G.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Et(G.layout_symbol["text-variable-anchor"]),"text-anchor":new ft(G.layout_symbol["text-anchor"]),"text-max-angle":new Et(G.layout_symbol["text-max-angle"]),"text-writing-mode":new Et(G.layout_symbol["text-writing-mode"]),"text-rotate":new ft(G.layout_symbol["text-rotate"]),"text-padding":new Et(G.layout_symbol["text-padding"]),"text-keep-upright":new Et(G.layout_symbol["text-keep-upright"]),"text-transform":new ft(G.layout_symbol["text-transform"]),"text-offset":new ft(G.layout_symbol["text-offset"]),"text-allow-overlap":new Et(G.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Et(G.layout_symbol["text-ignore-placement"]),"text-optional":new Et(G.layout_symbol["text-optional"])}),Bh={paint:new bn({"icon-opacity":new ft(G.paint_symbol["icon-opacity"]),"icon-color":new ft(G.paint_symbol["icon-color"]),"icon-halo-color":new ft(G.paint_symbol["icon-halo-color"]),"icon-halo-width":new ft(G.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ft(G.paint_symbol["icon-halo-blur"]),"icon-translate":new Et(G.paint_symbol["icon-translate"]),"icon-translate-anchor":new Et(G.paint_symbol["icon-translate-anchor"]),"text-opacity":new ft(G.paint_symbol["text-opacity"]),"text-color":new ft(G.paint_symbol["text-color"],{runtimeType:Qe,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ft(G.paint_symbol["text-halo-color"]),"text-halo-width":new ft(G.paint_symbol["text-halo-width"]),"text-halo-blur":new ft(G.paint_symbol["text-halo-blur"]),"text-translate":new Et(G.paint_symbol["text-translate"]),"text-translate-anchor":new Et(G.paint_symbol["text-translate-anchor"])}),layout:Ap},gc=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:nt,this.defaultValue=e};gc.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},gc.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},gc.prototype.outputDefined=function(){return!1},gc.prototype.serialize=function(){return null},ht("FormatSectionOverride",gc,{omit:["defaultValue"]});var Uc=function(e){function t(i){e.call(this,i,Bh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],x=0,S=p;x<S.length;x+=1){var A=S[x];d.indexOf(A)<0&&d.push(A)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var x=this.layout.get(i).evaluate(l,{},p,d),S=this._unevaluatedLayout._values[i];return S.isDataDriven()||ra(S.value)||!x?x:function(A,M){return M.replace(/{([^{}]+)}/g,function(L,V){return V in A?String(A[V]):""})}(l.properties,x)},t.prototype.createBucket=function(i){return new Xr(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=Bh.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,x=this.paint.get(p),S=new gc(x),A=new Ps(S,x.property.specification);d=x.value.kind==="constant"||x.value.kind==="source"?new Gs("source",A):new ma("composite",A,x.value.zoomStops,x.value._interpolationType),this.paint._values[p]=new Gi(x.property,d,x.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=Bh.paint.properties[l],x=!1,S=function(L){for(var V=0,q=L;V<q.length;V+=1)if(d.overrides&&d.overrides.hasOverride(q[V]))return void(x=!0)};if(p.value.kind==="constant"&&p.value.value instanceof fi)S(p.value.value.sections);else if(p.value.kind==="source"){var A=function(L){x||(L instanceof Qi&&mr(L.value)===sr?S(L.value.sections):L instanceof ri?S(L.sections):L.eachChild(A))},M=p.value;M._styleExpression&&A(M._styleExpression.expression)}return x},t}(cs),Df={paint:new bn({"background-color":new Et(G.paint_background["background-color"]),"background-pattern":new Ca(G.paint_background["background-pattern"]),"background-opacity":new Et(G.paint_background["background-opacity"])})},zp=function(e){function t(i){e.call(this,i,Df)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(cs),zd={paint:new bn({"raster-opacity":new Et(G.paint_raster["raster-opacity"]),"raster-hue-rotate":new Et(G.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Et(G.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Et(G.paint_raster["raster-brightness-max"]),"raster-saturation":new Et(G.paint_raster["raster-saturation"]),"raster-contrast":new Et(G.paint_raster["raster-contrast"]),"raster-resampling":new Et(G.paint_raster["raster-resampling"]),"raster-fade-duration":new Et(G.paint_raster["raster-fade-duration"])})},Lf=function(e){function t(i){e.call(this,i,zd)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(cs),Pp=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(cs),Rf={circle:eu,heatmap:ru,hillshade:Qu,fill:nc,"fill-extrusion":oc,line:su,symbol:Uc,background:zp,raster:Lf},Cp=F.HTMLImageElement,_c=F.HTMLCanvasElement,Mp=F.HTMLVideoElement,Oh=F.ImageData,Fh=F.ImageBitmap,Fu=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};Fu.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),x=this.context,S=x.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof Cp||e instanceof _c||e instanceof Mp||e instanceof Oh||Fh&&e instanceof Fh?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,l,p,0,this.format,S.UNSIGNED_BYTE,e.data);else{var A=i||{x:0,y:0},M=A.x,L=A.y;e instanceof Cp||e instanceof _c||e instanceof Mp||e instanceof Oh||Fh&&e instanceof Fh?S.texSubImage2D(S.TEXTURE_2D,0,M,L,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,M,L,l,p,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Fu.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},Fu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Fu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var hh=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};hh.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},hh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var vc=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},wr(["receive","process"],this),this.invoker=new hh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Qt()?e:F};function Dp(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}vc.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[x]=i);var S=yr(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:io(t,S)},S),{cancel:function(){i&&delete d.callbacks[x],d.target.postMessage({id:x,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},vc.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else Qt()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},vc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},vc.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(Bn(t.error)):l(null,Bn(t.data)))}else{var p=!1,d=yr(this.globalScope)?void 0:[],x=t.hasCallback?function(L,V){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:L?io(L):null,data:io(V,d)},d)}:function(L){p=!0},S=null,A=Bn(t.data);if(this.parent[t.type])S=this.parent[t.type](t.sourceMapId,A,x);else if(this.parent.getWorkerSource){var M=t.type.split(".");S=this.parent.getWorkerSource(t.sourceMapId,M[0],A.source)[M[1]](A,x)}else x(new Error("Could not find function "+t.type));!p&&S&&S.cancel&&(this.cancelCallbacks[e]=S.cancel)}},vc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var wn=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};wn.prototype.setNorthEast=function(e){return this._ne=e instanceof Di?new Di(e.lng,e.lat):Di.convert(e),this},wn.prototype.setSouthWest=function(e){return this._sw=e instanceof Di?new Di(e.lng,e.lat):Di.convert(e),this},wn.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof Di)t=e,i=e;else{if(!(e instanceof wn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(wn.convert(e)):this.extend(Di.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new Di(t.lng,t.lat),this._ne=new Di(i.lng,i.lat)),this},wn.prototype.getCenter=function(){return new Di((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},wn.prototype.getSouthWest=function(){return this._sw},wn.prototype.getNorthEast=function(){return this._ne},wn.prototype.getNorthWest=function(){return new Di(this.getWest(),this.getNorth())},wn.prototype.getSouthEast=function(){return new Di(this.getEast(),this.getSouth())},wn.prototype.getWest=function(){return this._sw.lng},wn.prototype.getSouth=function(){return this._sw.lat},wn.prototype.getEast=function(){return this._ne.lng},wn.prototype.getNorth=function(){return this._ne.lat},wn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},wn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},wn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},wn.prototype.contains=function(e){var t=Di.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},wn.convert=function(e){return!e||e instanceof wn?e:new wn(e)};var Di=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Di.prototype.wrap=function(){return new Di(Te(this.lng,-180,180),this.lat)},Di.prototype.toArray=function(){return[this.lng,this.lat]},Di.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Di.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},Di.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new wn(new Di(this.lng-i,this.lat-t),new Di(this.lng+i,this.lat+t))},Di.convert=function(e){if(e instanceof Di)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Di(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Di(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Lp=2*Math.PI*63710088e-1;function Rp(e){return Lp*Math.cos(e*Math.PI/180)}function Bp(e){return(180+e)/360}function Vu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Op(e,t){return e/Rp(t)}function Ul(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var tl=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};tl.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Di.convert(e);return new tl(Bp(i.lng),Vu(i.lat),Op(t,i.lat))},tl.prototype.toLngLat=function(){return new Di(360*this.x-180,Ul(this.y))},tl.prototype.toAltitude=function(){return this.z*Rp(Ul(this.y))},tl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Lp*(e=Ul(this.y),1/Math.cos(e*Math.PI/180));var e};var Nu=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=jc(0,e,e,t,i)};Nu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Nu.prototype.url=function(e,t){var i,l,p,d,x,S=(l=this.y,p=this.z,d=Dp(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),x=Dp(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+x[0]+","+x[1]),A=function(M,L,V){for(var q,W="",ne=M;ne>0;ne--)W+=(L&(q=1<<ne-1)?1:0)+(V&q?2:0);return W}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",A).replace("{bbox-epsg-3857}",S)},Nu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new R(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Nu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ph=function(e,t){this.wrap=e,this.canonical=t,this.key=jc(e,t.z,t.z,t.x,t.y)},Xn=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new Nu(i,+l,+p),this.key=jc(t,e,i,l,p)};function jc(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}Xn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Xn.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Xn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Xn(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Xn.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?jc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):jc(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Xn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Xn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Xn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new Xn(t,this.wrap,t,i,l),new Xn(t,this.wrap,t,i+1,l),new Xn(t,this.wrap,t,i,l+1),new Xn(t,this.wrap,t,i+1,l+1)]},Xn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Xn.prototype.wrapped=function(){return new Xn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Xn.prototype.unwrapTo=function(e){return new Xn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Xn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Xn.prototype.toUnwrapped=function(){return new ph(this.wrap,this.canonical)},Xn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Xn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new tl(e.x-this.wrap,e.y))},ht("CanonicalTileID",Nu),ht("OverscaledTileID",Xn,{omit:["posMatrix"]});var _l=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Bt('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};_l.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},_l.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},_l.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},_l.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},_l.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},_l.prototype.getPixels=function(){return new lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},_l.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,x=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=x-1;break;case 1:x=d+1}for(var S=-t*this.dim,A=-i*this.dim,M=d;M<x;M++)for(var L=l;L<p;L++)this.data[this._idx(L,M)]=e.data[this._idx(L+S,M+A)]},ht("DEMData",_l);var fh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};fh.prototype.encode=function(e){return this._stringToNumber[e]},fh.prototype.decode=function(e){return this._numberToString[e]};var dh=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Uu={geometry:{configurable:!0}};Uu.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Uu.geometry.set=function(e){this._geometry=e},dh.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(dh.prototype,Uu);var bc=function(){this.state={},this.stateChanges={},this.deletedStates={}};bc.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},Ne(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var x in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][x]===null&&delete this.deletedStates[e][l][x]},bc.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},bc.prototype.getState=function(e,t){var i=String(t),l=Ne({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},bc.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},bc.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),Ne(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var S={};if(this.deletedStates[x]===null)for(var A in this.state[x])S[A]={},this.state[x][A]={};else for(var M in this.deletedStates[x]){if(this.deletedStates[x][M]===null)this.state[x][M]={};else for(var L=0,V=Object.keys(this.deletedStates[x][M]);L<V.length;L+=1)delete this.state[x][M][V[L]];S[M]=this.state[x][M]}i[x]=i[x]||{},Ne(i[x],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var q in e)e[q].setFeatureState(i,t)};var vl=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new zo(8192,16,0),this.grid3D=new zo(8192,16,0),this.featureIndexArray=new U,this.promoteId=t};function Bf(e,t,i,l,p){return Wt(e,function(d,x){var S=t instanceof Ro?t.get(x):null;return S&&S.evaluate?S.evaluate(i,l,p):S})}function Fp(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,x=e;d<x.length;d+=1){var S=x[d];t=Math.min(t,S.x),i=Math.min(i,S.y),l=Math.max(l,S.x),p=Math.max(p,S.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Vp(e,t){return t-e}vl.prototype.insert=function(e,t,i,l,p,d){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var S=d?this.grid3D:this.grid,A=0;A<t.length;A++){for(var M=t[A],L=[1/0,1/0,-1/0,-1/0],V=0;V<M.length;V++){var q=M[V];L[0]=Math.min(L[0],q.x),L[1]=Math.min(L[1],q.y),L[2]=Math.max(L[2],q.x),L[3]=Math.max(L[3],q.y)}L[0]<8192&&L[1]<8192&&L[2]>=0&&L[3]>=0&&S.insert(x,L[0],L[1],L[2],L[3])}},vl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Be.VectorTile(new ih(this.rawTileData)).layers,this.sourceLayerCoder=new fh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},vl.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},x=8192/e.tileSize/e.scale,S=Gl(d.filter),A=e.queryGeometry,M=e.queryPadding*x,L=Fp(A),V=this.grid.query(L.minX-M,L.minY-M,L.maxX+M,L.maxY+M),q=Fp(e.cameraQueryGeometry),W=this.grid3D.query(q.minX-M,q.minY-M,q.maxX+M,q.maxY+M,function(Ae,De,Fe,Ge){return function(tt,bt,lt,At,st){for(var rr=0,Ot=tt;rr<Ot.length;rr+=1){var yt=Ot[rr];if(bt<=yt.x&&lt<=yt.y&&At>=yt.x&&st>=yt.y)return!0}var ur=[new R(bt,lt),new R(bt,st),new R(At,st),new R(At,lt)];if(tt.length>2){for(var Xt=0,xr=ur;Xt<xr.length;Xt+=1)if(Fo(tt,xr[Xt]))return!0}for(var Pt=0;Pt<tt.length-1;Pt++)if(Ql(tt[Pt],tt[Pt+1],ur))return!0;return!1}(e.cameraQueryGeometry,Ae-M,De-M,Fe+M,Ge+M)}),ne=0,oe=W;ne<oe.length;ne+=1)V.push(oe[ne]);V.sort(Vp);for(var me,ue={},be=function(Ae){var De=V[Ae];if(De!==me){me=De;var Fe=p.featureIndexArray.get(De),Ge=null;p.loadMatchingFeature(ue,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,S,d.layers,d.availableImages,t,i,l,function(tt,bt,lt){return Ge||(Ge=ai(tt)),bt.queryIntersectsFeature(A,tt,lt,Ge,p.z,e.transform,x,e.pixelPosMatrix)})}},Se=0;Se<V.length;Se++)be(Se);return ue},vl.prototype.loadMatchingFeature=function(e,t,i,l,p,d,x,S,A,M,L){var V=this.bucketLayerIDs[t];if(!d||function(tt,bt){for(var lt=0;lt<tt.length;lt++)if(bt.indexOf(tt[lt])>=0)return!0;return!1}(d,V)){var q=this.sourceLayerCoder.decode(i),W=this.vtLayers[q].feature(l);if(p.needGeometry){var ne=fn(W,!0);if(!p.filter(new $t(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!p.filter(new $t(this.tileID.overscaledZ),W))return;for(var oe=this.getId(W,q),me=0;me<V.length;me++){var ue=V[me];if(!(d&&d.indexOf(ue)<0)){var be=S[ue];if(be){var Se={};oe!==void 0&&M&&(Se=M.getState(be.sourceLayer||"_geojsonTileLayer",oe));var Ae=Ne({},A[ue]);Ae.paint=Bf(Ae.paint,be.paint,W,Se,x),Ae.layout=Bf(Ae.layout,be.layout,W,Se,x);var De=!L||L(W,be,Se);if(De){var Fe=new dh(W,this.z,this.x,this.y,oe);Fe.layer=Ae;var Ge=e[ue];Ge===void 0&&(Ge=e[ue]=[]),Ge.push({featureIndex:l,feature:Fe,intersectionZ:De})}}}}}},vl.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,x,S){var A={};this.loadVTLayers();for(var M=Gl(p),L=0,V=e;L<V.length;L+=1)this.loadMatchingFeature(A,i,l,V[L],M,d,x,S,t);return A},vl.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},vl.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},ht("FeatureIndex",vl,{omit:["rawTileData","sourceLayerCoder"]});var sa=function(e,t){this.tileID=e,this.uid=Dt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};sa.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Xi.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},sa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},sa.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(M,L){var V={};if(!L)return V;for(var q=function(){var oe=ne[W],me=oe.layerIds.map(function(Se){return L.getLayer(Se)}).filter(Boolean);if(me.length!==0){oe.layers=me,oe.stateDependentLayerIds&&(oe.stateDependentLayers=oe.stateDependentLayerIds.map(function(Se){return me.filter(function(Ae){return Ae.id===Se})[0]}));for(var ue=0,be=me;ue<be.length;ue+=1)V[be[ue].id]=oe}},W=0,ne=M;W<ne.length;W+=1)q();return V}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof Xr){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var x=this.buckets[d];if(x instanceof Xr&&x.hasRTLText){this.hasRTLText=!0,mo.isLoading()||mo.isLoaded()||ll()!=="deferred"||Fa();break}}for(var S in this.queryPadding=0,this.buckets){var A=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(S).queryRadius(A))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},sa.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},sa.prototype.getBucket=function(e){return this.buckets[e.id]},sa.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Fu(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Fu(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},sa.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},sa.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,x,S,A,M){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:M,transform:S,params:x,queryPadding:this.queryPadding*A},e,t,i):{}},sa.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var x=Gl(t&&t.filter),S=this.tileID.canonical,A=S.z,M=S.x,L=S.y,V={z:A,x:M,y:L},q=0;q<d.length;q++){var W=d.feature(q);if(x.needGeometry){var ne=fn(W,!0);if(!x.filter(new $t(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!x.filter(new $t(this.tileID.overscaledZ),W))continue;var oe=i.getId(W,p),me=new dh(W,A,M,L,oe);me.tile=V,e.push(me)}}},sa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},sa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},sa.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=Zr(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},sa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},sa.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",x=i[d],S=e[d];if(x&&S&&Object.keys(S).length!==0){p.update(S,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var A=t&&t.style&&t.style.getLayer(l);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(p)))}}}},sa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},sa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xi.now()},sa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},sa.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Xi.now()+e},sa.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},sa.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,x=t;d<x.length;d+=1)if(p[x[d]])return!0}}return!1};var pu=F.performance,xc=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},pu.mark(this._marks.start)};xc.prototype.finish=function(){pu.mark(this._marks.end);var e=pu.getEntriesByName(this._marks.measure);return e.length===0&&(pu.measure(this._marks.measure,this._marks.start,this._marks.end),e=pu.getEntriesByName(this._marks.measure),pu.clearMarks(this._marks.start),pu.clearMarks(this._marks.end),pu.clearMeasures(this._marks.measure)),e},a.Actor=vc,a.AlphaImage=vs,a.CanonicalTileID=Nu,a.CollisionBoxArray=s,a.Color=tr,a.DEMData=_l,a.DataConstantProperty=Et,a.DictionaryCoder=fh,a.EXTENT=8192,a.ErrorEvent=de,a.EvaluationParameters=$t,a.Event=ie,a.Evented=ge,a.FeatureIndex=vl,a.FillBucket=_o,a.FillExtrusionBucket=vo,a.ImageAtlas=Oc,a.ImagePosition=nh,a.LineBucket=Hn,a.LngLat=Di,a.LngLatBounds=wn,a.MercatorCoordinate=tl,a.ONE_EM=24,a.OverscaledTileID=Xn,a.Point=R,a.Point$1=R,a.Properties=bn,a.Protobuf=ih,a.RGBAImage=lo,a.RequestManager=Sr,a.RequestPerformance=xc,a.ResourceType=Go,a.SegmentVector=Y,a.SourceFeatureState=bc,a.StructArrayLayout1ui2=ms,a.StructArrayLayout2f1f2i16=fl,a.StructArrayLayout2i4=hl,a.StructArrayLayout3ui6=fs,a.StructArrayLayout4i8=hs,a.SymbolBucket=Xr,a.Texture=Fu,a.Tile=sa,a.Transitionable=na,a.Uniform1f=We,a.Uniform1i=Ze,a.Uniform2f=He,a.Uniform3f=ut,a.Uniform4f=St,a.UniformColor=dt,a.UniformMatrix4f=er,a.UnwrappedTileID=ph,a.ValidationError=te,a.WritingMode=jo,a.ZoomHistory=Il,a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},a.addDynamicAttributes=Bu,a.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(x,S){t(x,function(A,M){A&&(d=A),p[S]=M,--l==0&&i(d,p)})})},a.bezier=ee,a.bindAll=wr,a.browser=Xi,a.cacheEntryPossiblyAdded=function(e){++Wa>On&&(e.getActor().send("enforceCacheSizeLimit",In),Wa=0)},a.clamp=ve,a.clearTileCache=function(e){var t=F.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},a.clipLine=Af,a.clone=function(e){var t=new fr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.clone$1=vt,a.clone$2=function(e){var t=new fr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.collisionCircleLayout=gf,a.config=Jt,a.create=function(){var e=new fr(16);return fr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},a.create$1=function(){var e=new fr(9);return fr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},a.create$2=function(){var e=new fr(4);return fr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},a.createCommonjsModule=T,a.createExpression=Qo,a.createLayout=qn,a.createStyleLayer=function(e){return e.type==="custom"?new Pp(e):new Rf[e.type](e)},a.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],x=i[0],S=i[1],A=i[2];return e[0]=p*A-d*S,e[1]=d*x-l*A,e[2]=l*S-p*x,e},a.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.ease=ze,a.emitValidationErrors=Ao,a.endsWith=cr,a.enforceCacheSizeLimit=function(e){ui(),li&&li.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},a.evaluateSizeForFeature=Mh,a.evaluateSizeForZoom=kf,a.evaluateVariableOffset=uh,a.evented=Yu,a.extend=Ne,a.featureFilter=Gl,a.filterObject=wt,a.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.getAnchorAlignment=uu,a.getAnchorJustification=Rh,a.getArrayBuffer=yn,a.getImage=j,a.getJSON=function(e,t){return Fn(Ne(e,{type:"json"}),t)},a.getRTLTextPluginStatus=ll,a.getReferrer=Ei,a.getVideo=function(e,t){var i,l,p=F.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var x=F.document.createElement("source");i=e[d],l=void 0,(l=F.document.createElement("a")).href=i,(l.protocol!==F.document.location.protocol||l.host!==F.document.location.host)&&(p.crossOrigin="Anonymous"),x.src=e[d],p.appendChild(x)}return{cancel:function(){}}},a.identity=go,a.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],x=t[4],S=t[5],A=t[6],M=t[7],L=t[8],V=t[9],q=t[10],W=t[11],ne=t[12],oe=t[13],me=t[14],ue=t[15],be=i*S-l*x,Se=i*A-p*x,Ae=i*M-d*x,De=l*A-p*S,Fe=l*M-d*S,Ge=p*M-d*A,tt=L*oe-V*ne,bt=L*me-q*ne,lt=L*ue-W*ne,At=V*me-q*oe,st=V*ue-W*oe,rr=q*ue-W*me,Ot=be*rr-Se*st+Ae*At+De*lt-Fe*bt+Ge*tt;return Ot?(e[0]=(S*rr-A*st+M*At)*(Ot=1/Ot),e[1]=(p*st-l*rr-d*At)*Ot,e[2]=(oe*Ge-me*Fe+ue*De)*Ot,e[3]=(q*Fe-V*Ge-W*De)*Ot,e[4]=(A*lt-x*rr-M*bt)*Ot,e[5]=(i*rr-p*lt+d*bt)*Ot,e[6]=(me*Ae-ne*Ge-ue*Se)*Ot,e[7]=(L*Ge-q*Ae+W*Se)*Ot,e[8]=(x*st-S*lt+M*tt)*Ot,e[9]=(l*lt-i*st-d*tt)*Ot,e[10]=(ne*Fe-oe*Ae+ue*be)*Ot,e[11]=(V*Ae-L*Fe-W*be)*Ot,e[12]=(S*bt-x*At-A*tt)*Ot,e[13]=(i*At-l*bt+p*tt)*Ot,e[14]=(oe*Se-ne*De-me*be)*Ot,e[15]=(L*De-V*Se+q*be)*Ot,e):null},a.isChar=et,a.isMapboxURL=br,a.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},a.makeRequest=Fn,a.mapObject=Wt,a.mercatorXfromLng=Bp,a.mercatorYfromLat=Vu,a.mercatorZfromAltitude=Op,a.mul=Wc,a.multiply=Gn,a.mvt=Be,a.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},a.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},a.number=Lr,a.offscreenCanvasSupported=mn,a.ortho=function(e,t,i,l,p,d,x){var S=1/(t-i),A=1/(l-p),M=1/(d-x);return e[0]=-2*S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*M,e[11]=0,e[12]=(t+i)*S,e[13]=(p+l)*A,e[14]=(x+d)*M,e[15]=1,e},a.parseGlyphPBF=function(e){return new ih(e).readFields(Td,[])},a.pbf=ih,a.performSymbolLayout=function(e,t,i,l,p,d,x){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var S=e.layers[0].layout,A=e.layers[0]._unevaluatedLayout._values,M={};if(e.textSizeData.kind==="composite"){var L=e.textSizeData,V=L.maxZoom;M.compositeTextSizes=[A["text-size"].possiblyEvaluate(new $t(L.minZoom),x),A["text-size"].possiblyEvaluate(new $t(V),x)]}if(e.iconSizeData.kind==="composite"){var q=e.iconSizeData,W=q.maxZoom;M.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new $t(q.minZoom),x),A["icon-size"].possiblyEvaluate(new $t(W),x)]}M.layoutTextSize=A["text-size"].possiblyEvaluate(new $t(e.zoom+1),x),M.layoutIconSize=A["icon-size"].possiblyEvaluate(new $t(e.zoom+1),x),M.textMaxSize=A["text-size"].possiblyEvaluate(new $t(18));for(var ne=24*S.get("text-line-height"),oe=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",me=S.get("text-keep-upright"),ue=S.get("text-size"),be=function(){var De=Ae[Se],Fe=S.get("text-font").evaluate(De,{},x).join(","),Ge=ue.evaluate(De,{},x),tt=M.layoutTextSize.evaluate(De,{},x),bt=M.layoutIconSize.evaluate(De,{},x),lt={horizontal:{},vertical:void 0},At=De.text,st=[0,0];if(At){var rr=At.toString(),Ot=24*S.get("text-letter-spacing").evaluate(De,{},x),yt=function(pr){for(var pi=0,qr=pr;pi<qr.length;pi+=1)if(_r=qr[pi].charCodeAt(0),et.Arabic(_r)||et["Arabic Supplement"](_r)||et["Arabic Extended-A"](_r)||et["Arabic Presentation Forms-A"](_r)||et["Arabic Presentation Forms-B"](_r))return!1;var _r;return!0}(rr)?Ot:0,ur=S.get("text-anchor").evaluate(De,{},x),Xt=S.get("text-variable-anchor");if(!Xt){var xr=S.get("text-radial-offset").evaluate(De,{},x);st=xr?uh(ur,[24*xr,Lh]):S.get("text-offset").evaluate(De,{},x).map(function(pr){return 24*pr})}var Pt=oe?"center":S.get("text-justify").evaluate(De,{},x),Ir=S.get("symbol-placement"),Li=Ir==="point"?24*S.get("text-max-width").evaluate(De,{},x):0,dn=function(){e.allowVerticalPlacement&&Os(rr)&&(lt.vertical=Vc(At,t,i,p,Fe,Li,ne,ur,"left",yt,st,jo.vertical,!0,Ir,tt,Ge))};if(!oe&&Xt){for(var vi=Pt==="auto"?Xt.map(function(pr){return Rh(pr)}):[Pt],Ri=!1,an=0;an<vi.length;an++){var la=vi[an];if(!lt.horizontal[la])if(Ri)lt.horizontal[la]=lt.horizontal[0];else{var Wn=Vc(At,t,i,p,Fe,Li,ne,"center",la,yt,st,jo.horizontal,!1,Ir,tt,Ge);Wn&&(lt.horizontal[la]=Wn,Ri=Wn.positionedLines.length===1)}}dn()}else{Pt==="auto"&&(Pt=Rh(ur));var Da=Vc(At,t,i,p,Fe,Li,ne,ur,Pt,yt,st,jo.horizontal,!1,Ir,tt,Ge);Da&&(lt.horizontal[Pt]=Da),dn(),Os(rr)&&oe&&me&&(lt.vertical=Vc(At,t,i,p,Fe,Li,ne,ur,Pt,yt,st,jo.vertical,!1,Ir,tt,Ge))}}var ua=void 0,Za=!1;if(De.icon&&De.icon.name){var bi=l[De.icon.name];bi&&(ua=function(pr,pi,qr){var _r=uu(qr),uo=pi[0]-pr.displaySize[0]*_r.horizontalAlign,La=pi[1]-pr.displaySize[1]*_r.verticalAlign;return{image:pr,top:La,bottom:La+pr.displaySize[1],left:uo,right:uo+pr.displaySize[0]}}(p[De.icon.name],S.get("icon-offset").evaluate(De,{},x),S.get("icon-anchor").evaluate(De,{},x)),Za=bi.sdf,e.sdfIcons===void 0?e.sdfIcons=bi.sdf:e.sdfIcons!==bi.sdf&&Bt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(bi.pixelRatio!==e.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var ca=Tp(lt.horizontal)||lt.vertical;e.iconsInText=!!ca&&ca.iconsInText,(ca||ua)&&function(pr,pi,qr,_r,uo,La,Wr,Cn,ba,Rr,bl){var Zo=La.textMaxSize.evaluate(pi,{});Zo===void 0&&(Zo=Wr);var xl,En=pr.layers[0].layout,bo=En.get("icon-offset").evaluate(pi,{},bl),Us=Tp(qr.horizontal),ju=Wr/24,wc=pr.tilePixelRatio*ju,Ec=pr.tilePixelRatio*Zo/24,wl=pr.tilePixelRatio*Cn,Sc=pr.tilePixelRatio*En.get("symbol-spacing"),mh=En.get("text-padding")*pr.tilePixelRatio,Vh=En.get("icon-padding")*pr.tilePixelRatio,Np=En.get("text-max-angle")/180*Math.PI,Of=En.get("text-rotation-alignment")==="map"&&En.get("symbol-placement")!=="point",Ff=En.get("icon-rotation-alignment")==="map"&&En.get("symbol-placement")!=="point",kc=En.get("symbol-placement"),Up=Sc/2,Nh=En.get("icon-text-fit");_r&&Nh!=="none"&&(pr.allowVerticalPlacement&&qr.vertical&&(xl=fc(_r,qr.vertical,Nh,En.get("icon-text-fit-padding"),bo,ju)),Us&&(_r=fc(_r,Us,Nh,En.get("icon-text-fit-padding"),bo,ju)));var qc=function(Mg,Wp){Wp.x<0||Wp.x>=8192||Wp.y<0||Wp.y>=8192||function(Jn,fu,Dg,Zc,Dd,_m,Zf,qu,Gf,Jp,Kf,Hf,Ld,vm,Yp,bm,xm,wm,Em,Sm,rl,Xf,km,Zu,Lg){var Im,gh,Gh,Kh,Hh,Xh=Jn.addToLineVertexArray(fu,Dg),Tm=0,Am=0,zm=0,Pm=0,Rd=-1,Bd=-1,Ic={},Cm=re(""),Od=0,Fd=0;if(qu._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Od=(Im=qu.layout.get("text-offset").evaluate(rl,{},Zu).map(function($p){return 24*$p}))[0],Fd=Im[1]):(Od=24*qu.layout.get("text-radial-offset").evaluate(rl,{},Zu),Fd=Lh),Jn.allowVerticalPlacement&&Zc.vertical){var Mm=qu.layout.get("text-rotate").evaluate(rl,{},Zu)+90;Kh=new lh(Gf,fu,Jp,Kf,Hf,Zc.vertical,Ld,vm,Yp,Mm),Zf&&(Hh=new lh(Gf,fu,Jp,Kf,Hf,Zf,xm,wm,Yp,Mm))}if(Dd){var Vd=qu.layout.get("icon-rotate").evaluate(rl,{}),Dm=qu.layout.get("icon-text-fit")!=="none",Lm=Ep(Dd,Vd,km,Dm),Nd=Zf?Ep(Zf,Vd,km,Dm):void 0;Gh=new lh(Gf,fu,Jp,Kf,Hf,Dd,xm,wm,!1,Vd),Tm=4*Lm.length;var Rm=Jn.iconSizeData,Qp=null;Rm.kind==="source"?(Qp=[128*qu.layout.get("icon-size").evaluate(rl,{})])[0]>32640&&Bt(Jn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Rm.kind==="composite"&&((Qp=[128*Xf.compositeIconSizes[0].evaluate(rl,{},Zu),128*Xf.compositeIconSizes[1].evaluate(rl,{},Zu)])[0]>32640||Qp[1]>32640)&&Bt(Jn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Jn.addSymbols(Jn.icon,Lm,Qp,Sm,Em,rl,!1,fu,Xh.lineStartIndex,Xh.lineLength,-1,Zu),Rd=Jn.icon.placedSymbolArray.length-1,Nd&&(Am=4*Nd.length,Jn.addSymbols(Jn.icon,Nd,Qp,Sm,Em,rl,jo.vertical,fu,Xh.lineStartIndex,Xh.lineLength,-1,Zu),Bd=Jn.icon.placedSymbolArray.length-1)}for(var Bm in Zc.horizontal){var Wf=Zc.horizontal[Bm];if(!gh){Cm=re(Wf.text);var Rg=qu.layout.get("text-rotate").evaluate(rl,{},Zu);gh=new lh(Gf,fu,Jp,Kf,Hf,Wf,Ld,vm,Yp,Rg)}var Om=Wf.positionedLines.length===1;if(zm+=Ip(Jn,fu,Wf,_m,qu,Yp,rl,bm,Xh,Zc.vertical?jo.horizontal:jo.horizontalOnly,Om?Object.keys(Zc.horizontal):[Bm],Ic,Rd,Xf,Zu),Om)break}Zc.vertical&&(Pm+=Ip(Jn,fu,Zc.vertical,_m,qu,Yp,rl,bm,Xh,jo.vertical,["vertical"],Ic,Bd,Xf,Zu));var Bg=gh?gh.boxStartIndex:Jn.collisionBoxArray.length,Og=gh?gh.boxEndIndex:Jn.collisionBoxArray.length,Fg=Kh?Kh.boxStartIndex:Jn.collisionBoxArray.length,Vg=Kh?Kh.boxEndIndex:Jn.collisionBoxArray.length,Ng=Gh?Gh.boxStartIndex:Jn.collisionBoxArray.length,Ug=Gh?Gh.boxEndIndex:Jn.collisionBoxArray.length,jg=Hh?Hh.boxStartIndex:Jn.collisionBoxArray.length,qg=Hh?Hh.boxEndIndex:Jn.collisionBoxArray.length,Gu=-1,Jf=function($p,Vm){return $p&&$p.circleDiameter?Math.max($p.circleDiameter,Vm):Vm};Gu=Jf(gh,Gu),Gu=Jf(Kh,Gu),Gu=Jf(Gh,Gu);var Fm=(Gu=Jf(Hh,Gu))>-1?1:0;Fm&&(Gu*=Lg/24),Jn.glyphOffsetArray.length>=Xr.MAX_GLYPHS&&Bt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),rl.sortKey!==void 0&&Jn.addToSortKeyRanges(Jn.symbolInstances.length,rl.sortKey),Jn.symbolInstances.emplaceBack(fu.x,fu.y,Ic.right>=0?Ic.right:-1,Ic.center>=0?Ic.center:-1,Ic.left>=0?Ic.left:-1,Ic.vertical||-1,Rd,Bd,Cm,Bg,Og,Fg,Vg,Ng,Ug,jg,qg,Jp,zm,Pm,Tm,Am,Fm,0,Ld,Od,Fd,Gu)}(pr,Wp,Mg,qr,_r,uo,xl,pr.layers[0],pr.collisionBoxArray,pi.index,pi.sourceLayerIndex,pr.index,wc,mh,Of,ba,wl,Vh,Ff,bo,pi,La,Rr,bl,Wr)};if(kc==="line")for(var Uh=0,Vf=Af(pi.geometry,0,0,8192,8192);Uh<Vf.length;Uh+=1)for(var Nf=Vf[Uh],jp=0,qp=wp(Nf,Sc,Np,qr.vertical||Us,_r,24,Ec,pr.overscaling,8192);jp<qp.length;jp+=1){var Uf=qp[jp];Us&&Pf(pr,Us.text,Up,Uf)||qc(Nf,Uf)}else if(kc==="line-center")for(var Zp=0,Gp=pi.geometry;Zp<Gp.length;Zp+=1){var Kp=Gp[Zp];if(Kp.length>1){var jf=Tf(Kp,Np,qr.vertical||Us,_r,24,Ec);jf&&qc(Kp,jf)}}else if(pi.type==="Polygon")for(var jh=0,qf=$c(pi.geometry,0);jh<qf.length;jh+=1){var qh=qf[jh],Hp=zf(qh,16);qc(qh[0],new gl(Hp.x,Hp.y,0))}else if(pi.type==="LineString")for(var yh=0,Xp=pi.geometry;yh<Xp.length;yh+=1){var Zh=Xp[yh];qc(Zh,new gl(Zh[0].x,Zh[0].y,0))}else if(pi.type==="Point")for(var Pd=0,ym=pi.geometry;Pd<ym.length;Pd+=1)for(var Cd=0,gm=ym[Pd];Cd<gm.length;Cd+=1){var Md=gm[Cd];qc([Md],new gl(Md.x,Md.y,0))}}(e,De,lt,ua,l,M,tt,bt,st,Za,x)},Se=0,Ae=e.features;Se<Ae.length;Se+=1)be();d&&e.generateCollisionDebugBuffers()},a.perspective=function(e,t,i,l,p){var d,x=1/Math.tan(t/2);return e[0]=x/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},a.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},a.plugin=mo,a.polygonIntersectsPolygon=so,a.postMapLoadEvent=Xa,a.postTurnstileEvent=pa,a.potpack=gp,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=ht,a.registerForPluginStateChange=function(e){return e({pluginStatus:_a,pluginURL:Pa}),Yu.on("pluginStateChange",e),e},a.renderColorRamp=Ns,a.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3],S=Math.sin(i),A=Math.cos(i);return e[0]=l*A+d*S,e[1]=p*A+x*S,e[2]=l*-S+d*A,e[3]=p*-S+x*A,e},a.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],x=t[5],S=t[6],A=t[7],M=t[8],L=t[9],V=t[10],q=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+M*l,e[5]=x*p+L*l,e[6]=S*p+V*l,e[7]=A*p+q*l,e[8]=M*p-d*l,e[9]=L*p-x*l,e[10]=V*p-S*l,e[11]=q*p-A*l,e},a.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],x=t[1],S=t[2],A=t[3],M=t[4],L=t[5],V=t[6],q=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+M*l,e[1]=x*p+L*l,e[2]=S*p+V*l,e[3]=A*p+q*l,e[4]=M*p-d*l,e[5]=L*p-x*l,e[6]=V*p-S*l,e[7]=q*p-A*l,e},a.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},a.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},a.setCacheLimits=function(e,t){In=e,On=t},a.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),_a==="deferred"||_a==="loading"||_a==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Pa=Xi.resolveURL(e),_a="deferred",no=t,Wl(),i||Fa()},a.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},a.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},a.styleSpec=G,a.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},a.symbolSize=If,a.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},a.transformMat4=Js,a.translate=function(e,t,i){var l,p,d,x,S,A,M,L,V,q,W,ne,oe=i[0],me=i[1],ue=i[2];return t===e?(e[12]=t[0]*oe+t[4]*me+t[8]*ue+t[12],e[13]=t[1]*oe+t[5]*me+t[9]*ue+t[13],e[14]=t[2]*oe+t[6]*me+t[10]*ue+t[14],e[15]=t[3]*oe+t[7]*me+t[11]*ue+t[15]):(p=t[1],d=t[2],x=t[3],S=t[4],A=t[5],M=t[6],L=t[7],V=t[8],q=t[9],W=t[10],ne=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=x,e[4]=S,e[5]=A,e[6]=M,e[7]=L,e[8]=V,e[9]=q,e[10]=W,e[11]=ne,e[12]=l*oe+S*me+V*ue+t[12],e[13]=p*oe+A*me+q*ue+t[13],e[14]=d*oe+M*me+W*ue+t[14],e[15]=x*oe+L*me+ne*ue+t[15]),e},a.triggerPluginCompletionEvent=Eh,a.uniqueId=Dt,a.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},a.validateLight=vu,a.validateStyle=us,a.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},a.vectorTile=Be,a.version="1.13.2",a.warnOnce=Bt,a.webpSupported=Ai,a.window=F,a.wrap=Te}),_(["./shared"],function(a){function T(O){var j=typeof O;if(j==="number"||j==="boolean"||j==="string"||O==null)return JSON.stringify(O);if(Array.isArray(O)){for(var Z="[",$=0,ie=O;$<ie.length;$+=1)Z+=T(ie[$])+",";return Z+"]"}for(var de=Object.keys(O).sort(),ge="{",G=0;G<de.length;G++)ge+=JSON.stringify(de[G])+":"+T(O[de[G]])+",";return ge+"}"}function k(O){for(var j="",Z=0,$=a.refProperties;Z<$.length;Z+=1)j+="/"+T(O[$[Z]]);return j}var B=function(O){this.keyCache={},O&&this.replace(O)};B.prototype.replace=function(O){this._layerConfigs={},this._layers={},this.update(O,[])},B.prototype.update=function(O,j){for(var Z=this,$=0,ie=O;$<ie.length;$+=1){var de=ie[$];this._layerConfigs[de.id]=de;var ge=this._layers[de.id]=a.createStyleLayer(de);ge._featureFilter=a.featureFilter(ge.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(var G=0,te=j;G<te.length;G+=1){var we=te[G];delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we]}this.familiesBySource={};for(var Ue=0,qe=function(Ke,Qe){for(var Lt={},Xe=0;Xe<Ke.length;Xe++){var jt=Qe&&Qe[Ke[Xe].id]||k(Ke[Xe]);Qe&&(Qe[Ke[Xe].id]=jt);var sr=Lt[jt];sr||(sr=Lt[jt]=[]),sr.push(Ke[Xe])}var It=[];for(var Yt in Lt)It.push(Lt[Yt]);return It}(a.values(this._layerConfigs),this.keyCache);Ue<qe.length;Ue+=1){var Ie=qe[Ue].map(function(Ke){return Z._layers[Ke.id]}),je=Ie[0];if(je.visibility!=="none"){var it=je.source||"",nt=this.familiesBySource[it];nt||(nt=this.familiesBySource[it]={});var Me=je.sourceLayer||"_geojsonTileLayer",Ye=nt[Me];Ye||(Ye=nt[Me]=[]),Ye.push(Ie)}}};var R=function(O){var j={},Z=[];for(var $ in O){var ie=O[$],de=j[$]={};for(var ge in ie){var G=ie[+ge];if(G&&G.bitmap.width!==0&&G.bitmap.height!==0){var te={x:0,y:0,w:G.bitmap.width+2,h:G.bitmap.height+2};Z.push(te),de[ge]={rect:te,metrics:G.metrics}}}}var we=a.potpack(Z),Ue=new a.AlphaImage({width:we.w||1,height:we.h||1});for(var qe in O){var Ie=O[qe];for(var je in Ie){var it=Ie[+je];if(it&&it.bitmap.width!==0&&it.bitmap.height!==0){var nt=j[qe][je].rect;a.AlphaImage.copy(it.bitmap,Ue,{x:0,y:0},{x:nt.x+1,y:nt.y+1},it.bitmap)}}}this.image=Ue,this.positions=j};a.register("GlyphAtlas",R);var N=function(O){this.tileID=new a.OverscaledTileID(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId};function F(O,j,Z){for(var $=new a.EvaluationParameters(j),ie=0,de=O;ie<de.length;ie+=1)de[ie].recalculate($,Z)}function le(O,j){var Z=a.getArrayBuffer(O.request,function($,ie,de,ge){$?j($):ie&&j(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(ie)),rawData:ie,cacheControl:de,expires:ge})});return function(){Z.cancel(),j()}}N.prototype.parse=function(O,j,Z,$,ie){var de=this;this.status="parsing",this.data=O,this.collisionBoxArray=new a.CollisionBoxArray;var ge=new a.DictionaryCoder(Object.keys(O.layers).sort()),G=new a.FeatureIndex(this.tileID,this.promoteId);G.bucketLayerIDs=[];var te,we,Ue,qe,Ie={},je={featureIndex:G,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z},it=j.familiesBySource[this.source];for(var nt in it){var Me=O.layers[nt];if(Me){Me.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+nt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ye=ge.encode(nt),Ke=[],Qe=0;Qe<Me.length;Qe++){var Lt=Me.feature(Qe),Xe=G.getId(Lt,nt);Ke.push({feature:Lt,id:Xe,index:Qe,sourceLayerIndex:Ye})}for(var jt=0,sr=it[nt];jt<sr.length;jt+=1){var It=sr[jt],Yt=It[0];Yt.minzoom&&this.zoom<Math.floor(Yt.minzoom)||Yt.maxzoom&&this.zoom>=Yt.maxzoom||Yt.visibility!=="none"&&(F(It,this.zoom,Z),(Ie[Yt.id]=Yt.createBucket({index:G.bucketLayerIDs.length,layers:It,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ye,sourceID:this.source})).populate(Ke,je,this.tileID.canonical),G.bucketLayerIDs.push(It.map(function(or){return or.id})))}}}var Vt=a.mapObject(je.glyphDependencies,function(or){return Object.keys(or).map(Number)});Object.keys(Vt).length?$.send("getGlyphs",{uid:this.uid,stacks:Vt},function(or,Kt){te||(te=or,we=Kt,dr.call(de))}):we={};var Dr=Object.keys(je.iconDependencies);Dr.length?$.send("getImages",{icons:Dr,source:this.source,tileID:this.tileID,type:"icons"},function(or,Kt){te||(te=or,Ue=Kt,dr.call(de))}):Ue={};var Nt=Object.keys(je.patternDependencies);function dr(){if(te)return ie(te);if(we&&Ue&&qe){var or=new R(we),Kt=new a.ImageAtlas(Ue,qe);for(var tr in Ie){var ci=Ie[tr];ci instanceof a.SymbolBucket?(F(ci.layers,this.zoom,Z),a.performSymbolLayout(ci,we,or.positions,Ue,Kt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ci.hasPattern&&(ci instanceof a.LineBucket||ci instanceof a.FillBucket||ci instanceof a.FillExtrusionBucket)&&(F(ci.layers,this.zoom,Z),ci.addFeatures(je,this.tileID.canonical,Kt.patternPositions))}this.status="done",ie(null,{buckets:a.values(Ie).filter(function(gn){return!gn.isEmpty()}),featureIndex:G,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:or.image,imageAtlas:Kt,glyphMap:this.returnDependencies?we:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?or.positions:null})}}Nt.length?$.send("getImages",{icons:Nt,source:this.source,tileID:this.tileID,type:"patterns"},function(or,Kt){te||(te=or,qe=Kt,dr.call(de))}):qe={},dr.call(this)};var ee=function(O,j,Z,$){this.actor=O,this.layerIndex=j,this.availableImages=Z,this.loadVectorData=$||le,this.loading={},this.loaded={}};ee.prototype.loadTile=function(O,j){var Z=this,$=O.uid;this.loading||(this.loading={});var ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new a.RequestPerformance(O.request),de=this.loading[$]=new N(O);de.abort=this.loadVectorData(O,function(ge,G){if(delete Z.loading[$],ge||!G)return de.status="done",Z.loaded[$]=de,j(ge);var te=G.rawData,we={};G.expires&&(we.expires=G.expires),G.cacheControl&&(we.cacheControl=G.cacheControl);var Ue={};if(ie){var qe=ie.finish();qe&&(Ue.resourceTiming=JSON.parse(JSON.stringify(qe)))}de.vectorTile=G.vectorTile,de.parse(G.vectorTile,Z.layerIndex,Z.availableImages,Z.actor,function(Ie,je){if(Ie||!je)return j(Ie);j(null,a.extend({rawTileData:te.slice(0)},je,we,Ue))}),Z.loaded=Z.loaded||{},Z.loaded[$]=de})},ee.prototype.reloadTile=function(O,j){var Z=this,$=this.loaded,ie=O.uid,de=this;if($&&$[ie]){var ge=$[ie];ge.showCollisionBoxes=O.showCollisionBoxes;var G=function(te,we){var Ue=ge.reloadCallback;Ue&&(delete ge.reloadCallback,ge.parse(ge.vectorTile,de.layerIndex,Z.availableImages,de.actor,Ue)),j(te,we)};ge.status==="parsing"?ge.reloadCallback=G:ge.status==="done"&&(ge.vectorTile?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}},ee.prototype.abortTile=function(O,j){var Z=this.loading,$=O.uid;Z&&Z[$]&&Z[$].abort&&(Z[$].abort(),delete Z[$]),j()},ee.prototype.removeTile=function(O,j){var Z=this.loaded,$=O.uid;Z&&Z[$]&&delete Z[$],j()};var ze=a.window.ImageBitmap,ve=function(){this.loaded={}};function Te(O,j){if(O.length!==0){Ne(O[0],j);for(var Z=1;Z<O.length;Z++)Ne(O[Z],!j)}}function Ne(O,j){for(var Z=0,$=0,ie=O.length,de=ie-1;$<ie;de=$++)Z+=(O[$][0]-O[de][0])*(O[de][1]+O[$][1]);Z>=0!=!!j&&O.reverse()}ve.prototype.loadTile=function(O,j){var Z=O.uid,$=O.encoding,ie=O.rawImageData,de=ze&&ie instanceof ze?this.getImageData(ie):ie,ge=new a.DEMData(Z,de,$);this.loaded=this.loaded||{},this.loaded[Z]=ge,j(null,ge)},ve.prototype.getImageData=function(O){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(O.width,O.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=O.width,this.offscreenCanvas.height=O.height,this.offscreenCanvasContext.drawImage(O,0,0,O.width,O.height);var j=this.offscreenCanvasContext.getImageData(-1,-1,O.width+2,O.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:j.width,height:j.height},j.data)},ve.prototype.removeTile=function(O){var j=this.loaded,Z=O.uid;j&&j[Z]&&delete j[Z]};var zt=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Dt=function(O){this._feature=O,this.extent=a.EXTENT,this.type=O.type,this.properties=O.tags,"id"in O&&!isNaN(O.id)&&(this.id=parseInt(O.id,10))};Dt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var O=[],j=0,Z=this._feature.geometry;j<Z.length;j+=1){var $=Z[j];O.push([new a.Point$1($[0],$[1])])}return O}for(var ie=[],de=0,ge=this._feature.geometry;de<ge.length;de+=1){for(var G=[],te=0,we=ge[de];te<we.length;te+=1){var Ue=we[te];G.push(new a.Point$1(Ue[0],Ue[1]))}ie.push(G)}return ie},Dt.prototype.toGeoJSON=function(O,j,Z){return zt.call(this,O,j,Z)};var ct=function(O){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=O.length,this._features=O};ct.prototype.feature=function(O){return new Dt(this._features[O])};var $e=a.vectorTile.VectorTileFeature,wr=cr;function cr(O,j){this.options=j||{},this.features=O,this.length=O.length}function Wt(O,j){this.id=typeof O.id=="number"?O.id:void 0,this.type=O.type,this.rawGeometry=O.type===1?[O.geometry]:O.geometry,this.properties=O.tags,this.extent=j||4096}cr.prototype.feature=function(O){return new Wt(this.features[O],this.options.extent)},Wt.prototype.loadGeometry=function(){var O=this.rawGeometry;this.geometry=[];for(var j=0;j<O.length;j++){for(var Z=O[j],$=[],ie=0;ie<Z.length;ie++)$.push(new a.Point$1(Z[ie][0],Z[ie][1]));this.geometry.push($)}return this.geometry},Wt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var O=this.geometry,j=1/0,Z=-1/0,$=1/0,ie=-1/0,de=0;de<O.length;de++)for(var ge=O[de],G=0;G<ge.length;G++){var te=ge[G];j=Math.min(j,te.x),Z=Math.max(Z,te.x),$=Math.min($,te.y),ie=Math.max(ie,te.y)}return[j,$,Z,ie]},Wt.prototype.toGeoJSON=$e.prototype.toGeoJSON;var wt=vr,vt=wr;function vr(O){var j=new a.pbf;return function(Z,$){for(var ie in Z.layers)$.writeMessage(3,Bt,Z.layers[ie])}(O,j),j.finish()}function Bt(O,j){var Z;j.writeVarintField(15,O.version||1),j.writeStringField(1,O.name||""),j.writeVarintField(5,O.extent||4096);var $={keys:[],values:[],keycache:{},valuecache:{}};for(Z=0;Z<O.length;Z++)$.feature=O.feature(Z),j.writeMessage(2,Er,$);var ie=$.keys;for(Z=0;Z<ie.length;Z++)j.writeStringField(3,ie[Z]);var de=$.values;for(Z=0;Z<de.length;Z++)j.writeMessage(4,yr,de[Z])}function Er(O,j){var Z=O.feature;Z.id!==void 0&&j.writeVarintField(1,Z.id),j.writeMessage(2,Je,O),j.writeVarintField(3,Z.type),j.writeMessage(4,Qr,Z)}function Je(O,j){var Z=O.feature,$=O.keys,ie=O.values,de=O.keycache,ge=O.valuecache;for(var G in Z.properties){var te=de[G];te===void 0&&($.push(G),de[G]=te=$.length-1),j.writeVarint(te);var we=Z.properties[G],Ue=typeof we;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(we=JSON.stringify(we));var qe=Ue+":"+we,Ie=ge[qe];Ie===void 0&&(ie.push(we),ge[qe]=Ie=ie.length-1),j.writeVarint(Ie)}}function Qt(O,j){return(j<<3)+(7&O)}function Zr(O){return O<<1^O>>31}function Qr(O,j){for(var Z=O.loadGeometry(),$=O.type,ie=0,de=0,ge=Z.length,G=0;G<ge;G++){var te=Z[G],we=1;$===1&&(we=te.length),j.writeVarint(Qt(1,we));for(var Ue=$===3?te.length-1:te.length,qe=0;qe<Ue;qe++){qe===1&&$!==1&&j.writeVarint(Qt(2,Ue-1));var Ie=te[qe].x-ie,je=te[qe].y-de;j.writeVarint(Zr(Ie)),j.writeVarint(Zr(je)),ie+=Ie,de+=je}$===3&&j.writeVarint(Qt(7,1))}}function yr(O,j){var Z=typeof O;Z==="string"?j.writeStringField(1,O):Z==="boolean"?j.writeBooleanField(7,O):Z==="number"&&(O%1!=0?j.writeDoubleField(3,O):O<0?j.writeSVarintField(6,O):j.writeVarintField(5,O))}function pt(O,j,Z,$){rt(O,Z,$),rt(j,2*Z,2*$),rt(j,2*Z+1,2*$+1)}function rt(O,j,Z){var $=O[j];O[j]=O[Z],O[Z]=$}function nr(O,j,Z,$){var ie=O-Z,de=j-$;return ie*ie+de*de}wt.fromVectorTileJs=vr,wt.fromGeojsonVt=function(O,j){j=j||{};var Z={};for(var $ in O)Z[$]=new wr(O[$].features,j),Z[$].name=$,Z[$].version=j.version,Z[$].extent=j.extent;return vr({layers:Z})},wt.GeoJSONWrapper=vt;var Bi=function(O){return O[0]},Qn=function(O){return O[1]},Ti=function(O,j,Z,$,ie){j===void 0&&(j=Bi),Z===void 0&&(Z=Qn),$===void 0&&($=64),ie===void 0&&(ie=Float64Array),this.nodeSize=$,this.points=O;for(var de=O.length<65536?Uint16Array:Uint32Array,ge=this.ids=new de(O.length),G=this.coords=new ie(2*O.length),te=0;te<O.length;te++)ge[te]=te,G[2*te]=j(O[te]),G[2*te+1]=Z(O[te]);(function we(Ue,qe,Ie,je,it,nt){if(!(it-je<=Ie)){var Me=je+it>>1;(function Ye(Ke,Qe,Lt,Xe,jt,sr){for(;jt>Xe;){if(jt-Xe>600){var It=jt-Xe+1,Yt=Lt-Xe+1,Vt=Math.log(It),Dr=.5*Math.exp(2*Vt/3),Nt=.5*Math.sqrt(Vt*Dr*(It-Dr)/It)*(Yt-It/2<0?-1:1);Ye(Ke,Qe,Lt,Math.max(Xe,Math.floor(Lt-Yt*Dr/It+Nt)),Math.min(jt,Math.floor(Lt+(It-Yt)*Dr/It+Nt)),sr)}var dr=Qe[2*Lt+sr],or=Xe,Kt=jt;for(pt(Ke,Qe,Xe,Lt),Qe[2*jt+sr]>dr&&pt(Ke,Qe,Xe,jt);or<Kt;){for(pt(Ke,Qe,or,Kt),or++,Kt--;Qe[2*or+sr]<dr;)or++;for(;Qe[2*Kt+sr]>dr;)Kt--}Qe[2*Xe+sr]===dr?pt(Ke,Qe,Xe,Kt):pt(Ke,Qe,++Kt,jt),Kt<=Lt&&(Xe=Kt+1),Lt<=Kt&&(jt=Kt-1)}})(Ue,qe,Me,je,it,nt%2),we(Ue,qe,Ie,je,Me-1,nt+1),we(Ue,qe,Ie,Me+1,it,nt+1)}})(ge,G,$,0,ge.length-1,0)};Ti.prototype.range=function(O,j,Z,$){return function(ie,de,ge,G,te,we,Ue){for(var qe,Ie,je=[0,ie.length-1,0],it=[];je.length;){var nt=je.pop(),Me=je.pop(),Ye=je.pop();if(Me-Ye<=Ue)for(var Ke=Ye;Ke<=Me;Ke++)Ie=de[2*Ke+1],(qe=de[2*Ke])>=ge&&qe<=te&&Ie>=G&&Ie<=we&&it.push(ie[Ke]);else{var Qe=Math.floor((Ye+Me)/2);Ie=de[2*Qe+1],(qe=de[2*Qe])>=ge&&qe<=te&&Ie>=G&&Ie<=we&&it.push(ie[Qe]);var Lt=(nt+1)%2;(nt===0?ge<=qe:G<=Ie)&&(je.push(Ye),je.push(Qe-1),je.push(Lt)),(nt===0?te>=qe:we>=Ie)&&(je.push(Qe+1),je.push(Me),je.push(Lt))}}return it}(this.ids,this.coords,O,j,Z,$,this.nodeSize)},Ti.prototype.within=function(O,j,Z){return function($,ie,de,ge,G,te){for(var we=[0,$.length-1,0],Ue=[],qe=G*G;we.length;){var Ie=we.pop(),je=we.pop(),it=we.pop();if(je-it<=te)for(var nt=it;nt<=je;nt++)nr(ie[2*nt],ie[2*nt+1],de,ge)<=qe&&Ue.push($[nt]);else{var Me=Math.floor((it+je)/2),Ye=ie[2*Me],Ke=ie[2*Me+1];nr(Ye,Ke,de,ge)<=qe&&Ue.push($[Me]);var Qe=(Ie+1)%2;(Ie===0?de-G<=Ye:ge-G<=Ke)&&(we.push(it),we.push(Me-1),we.push(Qe)),(Ie===0?de+G>=Ye:ge+G>=Ke)&&(we.push(Me+1),we.push(je),we.push(Qe))}}return Ue}(this.ids,this.coords,O,j,Z,this.nodeSize)};var xi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(O){return O}},$r=function(O){this.options=ei(Object.create(xi),O),this.trees=new Array(this.options.maxZoom+1)};function Xi(O,j,Z,$,ie){return{x:O,y:j,zoom:1/0,id:Z,parentId:-1,numPoints:$,properties:ie}}function Jt(O,j){var Z=O.geometry.coordinates,$=Z[1];return{x:kt(Z[0]),y:Ct($),zoom:1/0,index:j,parentId:-1}}function Ai(O){return{type:"Feature",id:O.id,properties:Ra(O),geometry:{type:"Point",coordinates:[($=O.x,360*($-.5)),(j=O.y,Z=(180-360*j)*Math.PI/180,360*Math.atan(Math.exp(Z))/Math.PI-90)]}};var j,Z,$}function Ra(O){var j=O.numPoints,Z=j>=1e4?Math.round(j/1e3)+"k":j>=1e3?Math.round(j/100)/10+"k":j;return ei(ei({},O.properties),{cluster:!0,cluster_id:O.id,point_count:j,point_count_abbreviated:Z})}function kt(O){return O/360+.5}function Ct(O){var j=Math.sin(O*Math.PI/180),Z=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return Z<0?0:Z>1?1:Z}function ei(O,j){for(var Z in j)O[Z]=j[Z];return O}function Sr(O){return O.x}function br(O){return O.y}function sn(O,j,Z,$,ie,de){var ge=ie-Z,G=de-$;if(ge!==0||G!==0){var te=((O-Z)*ge+(j-$)*G)/(ge*ge+G*G);te>1?(Z=ie,$=de):te>0&&(Z+=ge*te,$+=G*te)}return(ge=O-Z)*ge+(G=j-$)*G}function oi(O,j,Z,$){var ie={id:O===void 0?null:O,type:j,geometry:Z,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(de){var ge=de.geometry,G=de.type;if(G==="Point"||G==="MultiPoint"||G==="LineString")wi(de,ge);else if(G==="Polygon"||G==="MultiLineString")for(var te=0;te<ge.length;te++)wi(de,ge[te]);else if(G==="MultiPolygon")for(te=0;te<ge.length;te++)for(var we=0;we<ge[te].length;we++)wi(de,ge[te][we])}(ie),ie}function wi(O,j){for(var Z=0;Z<j.length;Z+=3)O.minX=Math.min(O.minX,j[Z]),O.minY=Math.min(O.minY,j[Z+1]),O.maxX=Math.max(O.maxX,j[Z]),O.maxY=Math.max(O.maxY,j[Z+1])}function Or(O,j,Z,$){if(j.geometry){var ie=j.geometry.coordinates,de=j.geometry.type,ge=Math.pow(Z.tolerance/((1<<Z.maxZoom)*Z.extent),2),G=[],te=j.id;if(Z.promoteId?te=j.properties[Z.promoteId]:Z.generateId&&(te=$||0),de==="Point")hr(ie,G);else if(de==="MultiPoint")for(var we=0;we<ie.length;we++)hr(ie[we],G);else if(de==="LineString")ar(ie,G,ge,!1);else if(de==="MultiLineString"){if(Z.lineMetrics){for(we=0;we<ie.length;we++)ar(ie[we],G=[],ge,!1),O.push(oi(te,"LineString",G,j.properties));return}si(ie,G,ge,!1)}else if(de==="Polygon")si(ie,G,ge,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(we=0;we<j.geometry.geometries.length;we++)Or(O,{id:te,geometry:j.geometry.geometries[we],properties:j.properties},Z,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<ie.length;we++){var Ue=[];si(ie[we],Ue,ge,!0),G.push(Ue)}}O.push(oi(te,de,G,j.properties))}}function hr(O,j){j.push(li(O[0])),j.push(ln(O[1])),j.push(0)}function ar(O,j,Z,$){for(var ie,de,ge=0,G=0;G<O.length;G++){var te=li(O[G][0]),we=ln(O[G][1]);j.push(te),j.push(we),j.push(0),G>0&&(ge+=$?(ie*we-te*de)/2:Math.sqrt(Math.pow(te-ie,2)+Math.pow(we-de,2))),ie=te,de=we}var Ue=j.length-3;j[2]=1,function qe(Ie,je,it,nt){for(var Me,Ye=nt,Ke=it-je>>1,Qe=it-je,Lt=Ie[je],Xe=Ie[je+1],jt=Ie[it],sr=Ie[it+1],It=je+3;It<it;It+=3){var Yt=sn(Ie[It],Ie[It+1],Lt,Xe,jt,sr);if(Yt>Ye)Me=It,Ye=Yt;else if(Yt===Ye){var Vt=Math.abs(It-Ke);Vt<Qe&&(Me=It,Qe=Vt)}}Ye>nt&&(Me-je>3&&qe(Ie,je,Me,nt),Ie[Me+2]=Ye,it-Me>3&&qe(Ie,Me,it,nt))}(j,0,Ue,Z),j[Ue+2]=1,j.size=Math.abs(ge),j.start=0,j.end=j.size}function si(O,j,Z,$){for(var ie=0;ie<O.length;ie++){var de=[];ar(O[ie],de,Z,$),j.push(de)}}function li(O){return O/360+.5}function ln(O){var j=Math.sin(O*Math.PI/180),Z=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return Z<0?0:Z>1?1:Z}function ti(O,j,Z,$,ie,de,ge,G){if($/=j,de>=(Z/=j)&&ge<$)return O;if(ge<Z||de>=$)return null;for(var te=[],we=0;we<O.length;we++){var Ue=O[we],qe=Ue.geometry,Ie=Ue.type,je=ie===0?Ue.minX:Ue.minY,it=ie===0?Ue.maxX:Ue.maxY;if(je>=Z&&it<$)te.push(Ue);else if(!(it<Z||je>=$)){var nt=[];if(Ie==="Point"||Ie==="MultiPoint")Oi(qe,nt,Z,$,ie);else if(Ie==="LineString")pa(qe,nt,Z,$,ie,!1,G.lineMetrics);else if(Ie==="MultiLineString")Xa(qe,nt,Z,$,ie,!1);else if(Ie==="Polygon")Xa(qe,nt,Z,$,ie,!0);else if(Ie==="MultiPolygon")for(var Me=0;Me<qe.length;Me++){var Ye=[];Xa(qe[Me],Ye,Z,$,ie,!0),Ye.length&&nt.push(Ye)}if(nt.length){if(G.lineMetrics&&Ie==="LineString"){for(Me=0;Me<nt.length;Me++)te.push(oi(Ue.id,Ie,nt[Me],Ue.tags));continue}Ie!=="LineString"&&Ie!=="MultiLineString"||(nt.length===1?(Ie="LineString",nt=nt[0]):Ie="MultiLineString"),Ie!=="Point"&&Ie!=="MultiPoint"||(Ie=nt.length===3?"Point":"MultiPoint"),te.push(oi(Ue.id,Ie,nt,Ue.tags))}}}return te.length?te:null}function Oi(O,j,Z,$,ie){for(var de=0;de<O.length;de+=3){var ge=O[de+ie];ge>=Z&&ge<=$&&(j.push(O[de]),j.push(O[de+1]),j.push(O[de+2]))}}function pa(O,j,Z,$,ie,de,ge){for(var G,te,we=Ha(O),Ue=ie===0?On:ui,qe=O.start,Ie=0;Ie<O.length-3;Ie+=3){var je=O[Ie],it=O[Ie+1],nt=O[Ie+2],Me=O[Ie+3],Ye=O[Ie+4],Ke=ie===0?je:it,Qe=ie===0?Me:Ye,Lt=!1;ge&&(G=Math.sqrt(Math.pow(je-Me,2)+Math.pow(it-Ye,2))),Ke<Z?Qe>Z&&(te=Ue(we,je,it,Me,Ye,Z),ge&&(we.start=qe+G*te)):Ke>$?Qe<$&&(te=Ue(we,je,it,Me,Ye,$),ge&&(we.start=qe+G*te)):In(we,je,it,nt),Qe<Z&&Ke>=Z&&(te=Ue(we,je,it,Me,Ye,Z),Lt=!0),Qe>$&&Ke<=$&&(te=Ue(we,je,it,Me,Ye,$),Lt=!0),!de&&Lt&&(ge&&(we.end=qe+G*te),j.push(we),we=Ha(O)),ge&&(qe+=G)}var Xe=O.length-3;je=O[Xe],it=O[Xe+1],nt=O[Xe+2],(Ke=ie===0?je:it)>=Z&&Ke<=$&&In(we,je,it,nt),Xe=we.length-3,de&&Xe>=3&&(we[Xe]!==we[0]||we[Xe+1]!==we[1])&&In(we,we[0],we[1],we[2]),we.length&&j.push(we)}function Ha(O){var j=[];return j.size=O.size,j.start=O.start,j.end=O.end,j}function Xa(O,j,Z,$,ie,de){for(var ge=0;ge<O.length;ge++)pa(O[ge],j,Z,$,ie,de,!1)}function In(O,j,Z,$){O.push(j),O.push(Z),O.push($)}function On(O,j,Z,$,ie,de){var ge=(de-j)/($-j);return O.push(de),O.push(Z+(ie-Z)*ge),O.push(1),ge}function ui(O,j,Z,$,ie,de){var ge=(de-Z)/(ie-Z);return O.push(j+($-j)*ge),O.push(de),O.push(1),ge}function Fi(O,j){for(var Z=[],$=0;$<O.length;$++){var ie,de=O[$],ge=de.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")ie=un(de.geometry,j);else if(ge==="MultiLineString"||ge==="Polygon"){ie=[];for(var G=0;G<de.geometry.length;G++)ie.push(un(de.geometry[G],j))}else if(ge==="MultiPolygon")for(ie=[],G=0;G<de.geometry.length;G++){for(var te=[],we=0;we<de.geometry[G].length;we++)te.push(un(de.geometry[G][we],j));ie.push(te)}Z.push(oi(de.id,ge,ie,de.tags))}return Z}function un(O,j){var Z=[];Z.size=O.size,O.start!==void 0&&(Z.start=O.start,Z.end=O.end);for(var $=0;$<O.length;$+=3)Z.push(O[$]+j,O[$+1],O[$+2]);return Z}function Wa(O,j){if(O.transformed)return O;var Z,$,ie,de=1<<O.z,ge=O.x,G=O.y;for(Z=0;Z<O.features.length;Z++){var te=O.features[Z],we=te.geometry,Ue=te.type;if(te.geometry=[],Ue===1)for($=0;$<we.length;$+=2)te.geometry.push(mn(we[$],we[$+1],j,de,ge,G));else for($=0;$<we.length;$++){var qe=[];for(ie=0;ie<we[$].length;ie+=2)qe.push(mn(we[$][ie],we[$][ie+1],j,de,ge,G));te.geometry.push(qe)}}return O.transformed=!0,O}function mn(O,j,Z,$,ie,de){return[Math.round(Z*(O*$-ie)),Math.round(Z*(j*$-de))]}function Go(O,j,Z,$,ie){for(var de=j===ie.maxZoom?0:ie.tolerance/((1<<j)*ie.extent),ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Z,y:$,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},G=0;G<O.length;G++){ge.numFeatures++,cn(ge,O[G],de,ie);var te=O[G].minX,we=O[G].minY,Ue=O[G].maxX,qe=O[G].maxY;te<ge.minX&&(ge.minX=te),we<ge.minY&&(ge.minY=we),Ue>ge.maxX&&(ge.maxX=Ue),qe>ge.maxY&&(ge.maxY=qe)}return ge}function cn(O,j,Z,$){var ie=j.geometry,de=j.type,ge=[];if(de==="Point"||de==="MultiPoint")for(var G=0;G<ie.length;G+=3)ge.push(ie[G]),ge.push(ie[G+1]),O.numPoints++,O.numSimplified++;else if(de==="LineString")Ei(ge,ie,O,Z,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(G=0;G<ie.length;G++)Ei(ge,ie[G],O,Z,de==="Polygon",G===0);else if(de==="MultiPolygon")for(var te=0;te<ie.length;te++){var we=ie[te];for(G=0;G<we.length;G++)Ei(ge,we[G],O,Z,!0,G===0)}if(ge.length){var Ue=j.tags||null;if(de==="LineString"&&$.lineMetrics){for(var qe in Ue={},j.tags)Ue[qe]=j.tags[qe];Ue.mapbox_clip_start=ie.start/ie.size,Ue.mapbox_clip_end=ie.end/ie.size}var Ie={geometry:ge,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:Ue};j.id!==null&&(Ie.id=j.id),O.features.push(Ie)}}function Ei(O,j,Z,$,ie,de){var ge=$*$;if($>0&&j.size<(ie?ge:$))Z.numPoints+=j.length/3;else{for(var G=[],te=0;te<j.length;te+=3)($===0||j[te+2]>ge)&&(Z.numSimplified++,G.push(j[te]),G.push(j[te+1])),Z.numPoints++;ie&&function(we,Ue){for(var qe=0,Ie=0,je=we.length,it=je-2;Ie<je;it=Ie,Ie+=2)qe+=(we[Ie]-we[it])*(we[Ie+1]+we[it+1]);if(qe>0===Ue)for(Ie=0,je=we.length;Ie<je/2;Ie+=2){var nt=we[Ie],Me=we[Ie+1];we[Ie]=we[je-2-Ie],we[Ie+1]=we[je-1-Ie],we[je-2-Ie]=nt,we[je-1-Ie]=Me}}(G,de),O.push(G)}}function Gr(O,j){var Z=(j=this.options=function(ie,de){for(var ge in de)ie[ge]=de[ge];return ie}(Object.create(this.options),j)).debug;if(Z&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var $=function(ie,de){var ge=[];if(ie.type==="FeatureCollection")for(var G=0;G<ie.features.length;G++)Or(ge,ie.features[G],de,G);else Or(ge,ie.type==="Feature"?ie:{geometry:ie},de);return ge}(O,j);this.tiles={},this.tileCoords=[],Z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),($=function(ie,de){var ge=de.buffer/de.extent,G=ie,te=ti(ie,1,-1-ge,ge,0,-1,2,de),we=ti(ie,1,1-ge,2+ge,0,-1,2,de);return(te||we)&&(G=ti(ie,1,-ge,1+ge,0,-1,2,de)||[],te&&(G=Fi(te,1).concat(G)),we&&(G=G.concat(Fi(we,-1)))),G}($,j)).length&&this.splitTile($,0,0,0),Z&&($.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wi(O,j,Z){return 32*((1<<O)*Z+j)+O}function Fn(O,j){var Z=O.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);var $=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!$)return j(null,null);var ie=new ct($.features),de=wt(ie);de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),j(null,{vectorTile:ie,rawData:de.buffer})}$r.prototype.load=function(O){var j=this.options,Z=j.log,$=j.minZoom,ie=j.maxZoom,de=j.nodeSize;Z&&console.time("total time");var ge="prepare "+O.length+" points";Z&&console.time(ge),this.points=O;for(var G=[],te=0;te<O.length;te++)O[te].geometry&&G.push(Jt(O[te],te));this.trees[ie+1]=new Ti(G,Sr,br,de,Float32Array),Z&&console.timeEnd(ge);for(var we=ie;we>=$;we--){var Ue=+Date.now();G=this._cluster(G,we),this.trees[we]=new Ti(G,Sr,br,de,Float32Array),Z&&console.log("z%d: %d clusters in %dms",we,G.length,+Date.now()-Ue)}return Z&&console.timeEnd("total time"),this},$r.prototype.getClusters=function(O,j){var Z=((O[0]+180)%360+360)%360-180,$=Math.max(-90,Math.min(90,O[1])),ie=O[2]===180?180:((O[2]+180)%360+360)%360-180,de=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)Z=-180,ie=180;else if(Z>ie){var ge=this.getClusters([Z,$,180,de],j),G=this.getClusters([-180,$,ie,de],j);return ge.concat(G)}for(var te=this.trees[this._limitZoom(j)],we=[],Ue=0,qe=te.range(kt(Z),Ct(de),kt(ie),Ct($));Ue<qe.length;Ue+=1){var Ie=te.points[qe[Ue]];we.push(Ie.numPoints?Ai(Ie):this.points[Ie.index])}return we},$r.prototype.getChildren=function(O){var j=this._getOriginId(O),Z=this._getOriginZoom(O),$="No cluster with the specified id.",ie=this.trees[Z];if(!ie)throw new Error($);var de=ie.points[j];if(!de)throw new Error($);for(var ge=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),G=[],te=0,we=ie.within(de.x,de.y,ge);te<we.length;te+=1){var Ue=ie.points[we[te]];Ue.parentId===O&&G.push(Ue.numPoints?Ai(Ue):this.points[Ue.index])}if(G.length===0)throw new Error($);return G},$r.prototype.getLeaves=function(O,j,Z){var $=[];return this._appendLeaves($,O,j=j||10,Z=Z||0,0),$},$r.prototype.getTile=function(O,j,Z){var $=this.trees[this._limitZoom(O)],ie=Math.pow(2,O),de=this.options,ge=de.radius/de.extent,G=(Z-ge)/ie,te=(Z+1+ge)/ie,we={features:[]};return this._addTileFeatures($.range((j-ge)/ie,G,(j+1+ge)/ie,te),$.points,j,Z,ie,we),j===0&&this._addTileFeatures($.range(1-ge/ie,G,1,te),$.points,ie,Z,ie,we),j===ie-1&&this._addTileFeatures($.range(0,G,ge/ie,te),$.points,-1,Z,ie,we),we.features.length?we:null},$r.prototype.getClusterExpansionZoom=function(O){for(var j=this._getOriginZoom(O)-1;j<=this.options.maxZoom;){var Z=this.getChildren(O);if(j++,Z.length!==1)break;O=Z[0].properties.cluster_id}return j},$r.prototype._appendLeaves=function(O,j,Z,$,ie){for(var de=0,ge=this.getChildren(j);de<ge.length;de+=1){var G=ge[de],te=G.properties;if(te&&te.cluster?ie+te.point_count<=$?ie+=te.point_count:ie=this._appendLeaves(O,te.cluster_id,Z,$,ie):ie<$?ie++:O.push(G),O.length===Z)break}return ie},$r.prototype._addTileFeatures=function(O,j,Z,$,ie,de){for(var ge=0,G=O;ge<G.length;ge+=1){var te=j[G[ge]],we=te.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(te.x*ie-Z)),Math.round(this.options.extent*(te.y*ie-$))]],tags:we?Ra(te):this.points[te.index].properties},qe=void 0;we?qe=te.id:this.options.generateId?qe=te.index:this.points[te.index].id&&(qe=this.points[te.index].id),qe!==void 0&&(Ue.id=qe),de.features.push(Ue)}},$r.prototype._limitZoom=function(O){return Math.max(this.options.minZoom,Math.min(+O,this.options.maxZoom+1))},$r.prototype._cluster=function(O,j){for(var Z=[],$=this.options,ie=$.reduce,de=$.minPoints,ge=$.radius/($.extent*Math.pow(2,j)),G=0;G<O.length;G++){var te=O[G];if(!(te.zoom<=j)){te.zoom=j;for(var we=this.trees[j+1],Ue=we.within(te.x,te.y,ge),qe=te.numPoints||1,Ie=qe,je=0,it=Ue;je<it.length;je+=1){var nt=we.points[it[je]];nt.zoom>j&&(Ie+=nt.numPoints||1)}if(Ie>=de){for(var Me=te.x*qe,Ye=te.y*qe,Ke=ie&&qe>1?this._map(te,!0):null,Qe=(G<<5)+(j+1)+this.points.length,Lt=0,Xe=Ue;Lt<Xe.length;Lt+=1){var jt=we.points[Xe[Lt]];if(!(jt.zoom<=j)){jt.zoom=j;var sr=jt.numPoints||1;Me+=jt.x*sr,Ye+=jt.y*sr,jt.parentId=Qe,ie&&(Ke||(Ke=this._map(te,!0)),ie(Ke,this._map(jt)))}}te.parentId=Qe,Z.push(Xi(Me/Ie,Ye/Ie,Qe,Ie,Ke))}else if(Z.push(te),Ie>1)for(var It=0,Yt=Ue;It<Yt.length;It+=1){var Vt=we.points[Yt[It]];Vt.zoom<=j||(Vt.zoom=j,Z.push(Vt))}}}return Z},$r.prototype._getOriginId=function(O){return O-this.points.length>>5},$r.prototype._getOriginZoom=function(O){return(O-this.points.length)%32},$r.prototype._map=function(O,j){if(O.numPoints)return j?ei({},O.properties):O.properties;var Z=this.points[O.index].properties,$=this.options.map(Z);return j&&$===Z?ei({},$):$},Gr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Gr.prototype.splitTile=function(O,j,Z,$,ie,de,ge){for(var G=[O,j,Z,$],te=this.options,we=te.debug;G.length;){$=G.pop(),Z=G.pop(),j=G.pop(),O=G.pop();var Ue=1<<j,qe=Wi(j,Z,$),Ie=this.tiles[qe];if(!Ie&&(we>1&&console.time("creation"),Ie=this.tiles[qe]=Go(O,j,Z,$,te),this.tileCoords.push({z:j,x:Z,y:$}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,Z,$,Ie.numFeatures,Ie.numPoints,Ie.numSimplified),console.timeEnd("creation"));var je="z"+j;this.stats[je]=(this.stats[je]||0)+1,this.total++}if(Ie.source=O,ie){if(j===te.maxZoom||j===ie)continue;var it=1<<ie-j;if(Z!==Math.floor(de/it)||$!==Math.floor(ge/it))continue}else if(j===te.indexMaxZoom||Ie.numPoints<=te.indexMaxPoints)continue;if(Ie.source=null,O.length!==0){we>1&&console.time("clipping");var nt,Me,Ye,Ke,Qe,Lt,Xe=.5*te.buffer/te.extent,jt=.5-Xe,sr=.5+Xe,It=1+Xe;nt=Me=Ye=Ke=null,Qe=ti(O,Ue,Z-Xe,Z+sr,0,Ie.minX,Ie.maxX,te),Lt=ti(O,Ue,Z+jt,Z+It,0,Ie.minX,Ie.maxX,te),O=null,Qe&&(nt=ti(Qe,Ue,$-Xe,$+sr,1,Ie.minY,Ie.maxY,te),Me=ti(Qe,Ue,$+jt,$+It,1,Ie.minY,Ie.maxY,te),Qe=null),Lt&&(Ye=ti(Lt,Ue,$-Xe,$+sr,1,Ie.minY,Ie.maxY,te),Ke=ti(Lt,Ue,$+jt,$+It,1,Ie.minY,Ie.maxY,te),Lt=null),we>1&&console.timeEnd("clipping"),G.push(nt||[],j+1,2*Z,2*$),G.push(Me||[],j+1,2*Z,2*$+1),G.push(Ye||[],j+1,2*Z+1,2*$),G.push(Ke||[],j+1,2*Z+1,2*$+1)}}},Gr.prototype.getTile=function(O,j,Z){var $=this.options,ie=$.extent,de=$.debug;if(O<0||O>24)return null;var ge=1<<O,G=Wi(O,j=(j%ge+ge)%ge,Z);if(this.tiles[G])return Wa(this.tiles[G],ie);de>1&&console.log("drilling down to z%d-%d-%d",O,j,Z);for(var te,we=O,Ue=j,qe=Z;!te&&we>0;)we--,Ue=Math.floor(Ue/2),qe=Math.floor(qe/2),te=this.tiles[Wi(we,Ue,qe)];return te&&te.source?(de>1&&console.log("found parent tile z%d-%d-%d",we,Ue,qe),de>1&&console.time("drilling down"),this.splitTile(te.source,we,Ue,qe,O,j,Z),de>1&&console.timeEnd("drilling down"),this.tiles[G]?Wa(this.tiles[G],ie):null):null};var yn=function(O){function j(Z,$,ie,de){O.call(this,Z,$,ie,Fn),de&&(this.loadGeoJSON=de)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.loadData=function(Z,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=$,this._pendingLoadDataParams=Z,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},j.prototype._loadData=function(){var Z=this;if(this._pendingCallback&&this._pendingLoadDataParams){var $=this._pendingCallback,ie=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var de=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new a.RequestPerformance(ie.request);this.loadGeoJSON(ie,function(ge,G){if(ge||!G)return $(ge);if(typeof G!="object")return $(new Error("Input data given to '"+ie.source+"' is not a valid GeoJSON object."));(function Ie(je,it){var nt,Me=je&&je.type;if(Me==="FeatureCollection")for(nt=0;nt<je.features.length;nt++)Ie(je.features[nt],it);else if(Me==="GeometryCollection")for(nt=0;nt<je.geometries.length;nt++)Ie(je.geometries[nt],it);else if(Me==="Feature")Ie(je.geometry,it);else if(Me==="Polygon")Te(je.coordinates,it);else if(Me==="MultiPolygon")for(nt=0;nt<je.coordinates.length;nt++)Te(je.coordinates[nt],it);return je})(G,!0);try{if(ie.filter){var te=a.createExpression(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(function(Ie){return Ie.key+": "+Ie.message}).join(", "));var we=G.features.filter(function(Ie){return te.value.evaluate({zoom:0},Ie)});G={type:"FeatureCollection",features:we}}Z._geoJSONIndex=ie.cluster?new $r(function(Ie){var je=Ie.superclusterOptions,it=Ie.clusterProperties;if(!it||!je)return je;for(var nt={},Me={},Ye={accumulated:null,zoom:0},Ke={properties:null},Qe=Object.keys(it),Lt=0,Xe=Qe;Lt<Xe.length;Lt+=1){var jt=Xe[Lt],sr=it[jt],It=sr[0],Yt=a.createExpression(sr[1]),Vt=a.createExpression(typeof It=="string"?[It,["accumulated"],["get",jt]]:It);nt[jt]=Yt.value,Me[jt]=Vt.value}return je.map=function(Dr){Ke.properties=Dr;for(var Nt={},dr=0,or=Qe;dr<or.length;dr+=1){var Kt=or[dr];Nt[Kt]=nt[Kt].evaluate(Ye,Ke)}return Nt},je.reduce=function(Dr,Nt){Ke.properties=Nt;for(var dr=0,or=Qe;dr<or.length;dr+=1){var Kt=or[dr];Ye.accumulated=Dr[Kt],Dr[Kt]=Me[Kt].evaluate(Ye,Ke)}},je}(ie)).load(G.features):function(Ie,je){return new Gr(Ie,je)}(G,ie.geojsonVtOptions)}catch(Ie){return $(Ie)}Z.loaded={};var Ue={};if(de){var qe=de.finish();qe&&(Ue.resourceTiming={},Ue.resourceTiming[ie.source]=JSON.parse(JSON.stringify(qe)))}$(null,Ue)})}},j.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},j.prototype.reloadTile=function(Z,$){var ie=this.loaded;return ie&&ie[Z.uid]?O.prototype.reloadTile.call(this,Z,$):this.loadTile(Z,$)},j.prototype.loadGeoJSON=function(Z,$){if(Z.request)a.getJSON(Z.request,$);else{if(typeof Z.data!="string")return $(new Error("Input data given to '"+Z.source+"' is not a valid GeoJSON object."));try{return $(null,JSON.parse(Z.data))}catch{return $(new Error("Input data given to '"+Z.source+"' is not a valid GeoJSON object."))}}},j.prototype.removeSource=function(Z,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()},j.prototype.getClusterExpansionZoom=function(Z,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId))}catch(ie){$(ie)}},j.prototype.getClusterChildren=function(Z,$){try{$(null,this._geoJSONIndex.getChildren(Z.clusterId))}catch(ie){$(ie)}},j.prototype.getClusterLeaves=function(Z,$){try{$(null,this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset))}catch(ie){$(ie)}},j}(ee),Vr=function(O){var j=this;this.self=O,this.actor=new a.Actor(O,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ee,geojson:yn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Z,$){if(j.workerSourceTypes[Z])throw new Error('Worker source with name "'+Z+'" already registered.');j.workerSourceTypes[Z]=$},this.self.registerRTLTextPlugin=function(Z){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Z.applyArabicShaping,a.plugin.processBidirectionalText=Z.processBidirectionalText,a.plugin.processStyledBidirectionalText=Z.processStyledBidirectionalText}};return Vr.prototype.setReferrer=function(O,j){this.referrer=j},Vr.prototype.setImages=function(O,j,Z){for(var $ in this.availableImages[O]=j,this.workerSources[O]){var ie=this.workerSources[O][$];for(var de in ie)ie[de].availableImages=j}Z()},Vr.prototype.setLayers=function(O,j,Z){this.getLayerIndex(O).replace(j),Z()},Vr.prototype.updateLayers=function(O,j,Z){this.getLayerIndex(O).update(j.layers,j.removedIds),Z()},Vr.prototype.loadTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).loadTile(j,Z)},Vr.prototype.loadDEMTile=function(O,j,Z){this.getDEMWorkerSource(O,j.source).loadTile(j,Z)},Vr.prototype.reloadTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).reloadTile(j,Z)},Vr.prototype.abortTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).abortTile(j,Z)},Vr.prototype.removeTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).removeTile(j,Z)},Vr.prototype.removeDEMTile=function(O,j){this.getDEMWorkerSource(O,j.source).removeTile(j)},Vr.prototype.removeSource=function(O,j,Z){if(this.workerSources[O]&&this.workerSources[O][j.type]&&this.workerSources[O][j.type][j.source]){var $=this.workerSources[O][j.type][j.source];delete this.workerSources[O][j.type][j.source],$.removeSource!==void 0?$.removeSource(j,Z):Z()}},Vr.prototype.loadWorkerSource=function(O,j,Z){try{this.self.importScripts(j.url),Z()}catch($){Z($.toString())}},Vr.prototype.syncRTLPluginState=function(O,j,Z){try{a.plugin.setState(j);var $=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&$!=null){this.self.importScripts($);var ie=a.plugin.isParsed();Z(ie?void 0:new Error("RTL Text Plugin failed to import scripts from "+$),ie)}}catch(de){Z(de.toString())}},Vr.prototype.getAvailableImages=function(O){var j=this.availableImages[O];return j||(j=[]),j},Vr.prototype.getLayerIndex=function(O){var j=this.layerIndexes[O];return j||(j=this.layerIndexes[O]=new B),j},Vr.prototype.getWorkerSource=function(O,j,Z){var $=this;return this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][j]||(this.workerSources[O][j]={}),this.workerSources[O][j][Z]||(this.workerSources[O][j][Z]=new this.workerSourceTypes[j]({send:function(ie,de,ge){$.actor.send(ie,de,ge,O)}},this.getLayerIndex(O),this.getAvailableImages(O))),this.workerSources[O][j][Z]},Vr.prototype.getDEMWorkerSource=function(O,j){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][j]||(this.demWorkerSources[O][j]=new ve),this.demWorkerSources[O][j]},Vr.prototype.enforceCacheSizeLimit=function(O,j){a.enforceCacheSizeLimit(j)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Vr(self)),Vr}),_(["./shared"],function(a){var T=a.createCommonjsModule(function(n){function s(m){return!o(m)}function o(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,I,D=new Blob([""],{type:"text/javascript"}),U=URL.createObjectURL(D);try{I=new Worker(U),E=!0}catch{E=!1}return I&&I.terminate(),URL.revokeObjectURL(U),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var I=E.getContext("2d");if(!I)return!1;var D=I.getImageData(0,0,1,1);return D&&D.width===E.width}()?(u[w=m&&m.failIfMajorPerformanceCaveat]===void 0&&(u[w]=function(E){var I=function(U){var J=document.createElement("canvas"),Y=Object.create(s.webGLContextAttributes);return Y.failIfMajorPerformanceCaveat=U,J.probablySupportsContext?J.probablySupportsContext("webgl",Y)||J.probablySupportsContext("experimental-webgl",Y):J.supportsContext?J.supportsContext("webgl",Y)||J.supportsContext("experimental-webgl",Y):J.getContext("webgl",Y)||J.getContext("experimental-webgl",Y)}(E);if(!I)return!1;var D=I.createShader(I.VERTEX_SHADER);return!(!D||I.isContextLost())&&(I.shaderSource(D,"void main() {}"),I.compileShader(D),I.getShaderParameter(D,I.COMPILE_STATUS)===!0)}(w)),u[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var u={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),k={create:function(n,s,o){var u=a.window.document.createElement(n);return s!==void 0&&(u.className=s),o&&o.appendChild(u),u},createNS:function(n,s){return a.window.document.createElementNS(n,s)}},B=a.window.document&&a.window.document.documentElement.style;function R(n){if(!B)return n[0];for(var s=0;s<n.length;s++)if(n[s]in B)return n[s];return n[0]}var N,F=R(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);k.disableDrag=function(){B&&F&&(N=B[F],B[F]="none")},k.enableDrag=function(){B&&F&&(B[F]=N)};var le=R(["transform","WebkitTransform"]);k.setTransform=function(n,s){n.style[le]=s};var ee=!1;try{var ze=Object.defineProperty({},"passive",{get:function(){ee=!0}});a.window.addEventListener("test",ze,ze),a.window.removeEventListener("test",ze,ze)}catch{ee=!1}k.addEventListener=function(n,s,o,u){u===void 0&&(u={}),n.addEventListener(s,o,"passive"in u&&ee?u:u.capture)},k.removeEventListener=function(n,s,o,u){u===void 0&&(u={}),n.removeEventListener(s,o,"passive"in u&&ee?u:u.capture)};var ve=function(n){n.preventDefault(),n.stopPropagation(),a.window.removeEventListener("click",ve,!0)};function Te(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}k.suppressClick=function(){a.window.addEventListener("click",ve,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",ve,!0)},0)},k.mousePos=function(n,s){var o=n.getBoundingClientRect();return new a.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},k.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),u=[],m=0;m<s.length;m++)u.push(new a.Point(s[m].clientX-o.left-n.clientLeft,s[m].clientY-o.top-n.clientTop));return u},k.mouseButton=function(n){return a.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},k.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Ne=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var u=0,m=this.requestors;u<m.length;u+=1){var w=m[u];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,u){this._validate(o,u)&&(this.images[o]=u)},s.prototype._validate=function(o,u){var m=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),m=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(o,u){if(!o)return!0;for(var m=0,w=0,E=o;w<E.length;w+=1){var I=E[w];if(I[0]<m||I[1]<I[0]||u<I[1])return!1;m=I[1]}return!0},s.prototype._validateContent=function(o,u){return!(o&&(o.length!==4||o[0]<0||u.data.width<o[0]||o[1]<0||u.data.height<o[1]||o[2]<0||u.data.width<o[2]||o[3]<0||u.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,u){u.version=this.images[o].version+1,this.images[o]=u,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var u=this.images[o];delete this.images[o],delete this.patterns[o],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,u){var m=!0;if(!this.isLoaded())for(var w=0,E=o;w<E.length;w+=1)this.images[E[w]]||(m=!1);this.isLoaded()||m?this._notify(o,u):this.requestors.push({ids:o,callback:u})},s.prototype._notify=function(o,u){for(var m={},w=0,E=o;w<E.length;w+=1){var I=E[w];this.images[I]||this.fire(new a.Event("styleimagemissing",{id:I}));var D=this.images[I];D?m[I]={data:D.data.clone(),pixelRatio:D.pixelRatio,sdf:D.sdf,version:D.version,stretchX:D.stretchX,stretchY:D.stretchY,content:D.content,hasRenderCallback:Boolean(D.userImage&&D.userImage.render)}:a.warnOnce('Image "'+I+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}u(null,m)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var u=this.patterns[o],m=this.getImage(o);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{var w={w:m.data.width+2,h:m.data.height+2,x:0,y:0},E=new a.ImagePosition(w,m);this.patterns[o]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var u=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(o,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var u in this.patterns)o.push(this.patterns[u].bin);var m=a.potpack(o),w=m.w,E=m.h,I=this.atlasImage;for(var D in I.resize({width:w||1,height:E||1}),this.patterns){var U=this.patterns[D].bin,J=U.x+1,Y=U.y+1,Q=this.images[D].data,se=Q.width,ae=Q.height;a.RGBAImage.copy(Q,I,{x:0,y:0},{x:J,y:Y},{width:se,height:ae}),a.RGBAImage.copy(Q,I,{x:0,y:ae-1},{x:J,y:Y-1},{width:se,height:1}),a.RGBAImage.copy(Q,I,{x:0,y:0},{x:J,y:Y+ae},{width:se,height:1}),a.RGBAImage.copy(Q,I,{x:se-1,y:0},{x:J-1,y:Y},{width:1,height:ae}),a.RGBAImage.copy(Q,I,{x:0,y:0},{x:J+se,y:Y},{width:1,height:ae})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var u=0,m=o;u<m.length;u+=1){var w=m[u];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];Te(E)&&this.updateImage(w,E)}}},s}(a.Evented),zt=$e,Dt=$e,ct=1e20;function $e(n,s,o,u,m,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=u||.25,this.fontFamily=m||"sans-serif",this.fontWeight=w||"normal",this.radius=o||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function wr(n,s,o,u,m,w,E){for(var I=0;I<s;I++){for(var D=0;D<o;D++)u[D]=n[D*s+I];for(cr(u,m,w,E,o),D=0;D<o;D++)n[D*s+I]=m[D]}for(D=0;D<o;D++){for(I=0;I<s;I++)u[I]=n[D*s+I];for(cr(u,m,w,E,s),I=0;I<s;I++)n[D*s+I]=Math.sqrt(m[I])}}function cr(n,s,o,u,m){o[0]=0,u[0]=-ct,u[1]=+ct;for(var w=1,E=0;w<m;w++){for(var I=(n[w]+w*w-(n[o[E]]+o[E]*o[E]))/(2*w-2*o[E]);I<=u[E];)E--,I=(n[w]+w*w-(n[o[E]]+o[E]*o[E]))/(2*w-2*o[E]);o[++E]=w,u[E]=I,u[E+1]=+ct}for(w=0,E=0;w<m;w++){for(;u[E+1]<w;)E++;s[w]=(w-o[E])*(w-o[E])+n[o[E]]}}$e.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),u=0;u<this.size*this.size;u++){var m=s.data[4*u+3]/255;this.gridOuter[u]=m===1?0:m===0?ct:Math.pow(Math.max(0,.5-m),2),this.gridInner[u]=m===1?ct:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(wr(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),wr(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),u=0;u<this.size*this.size;u++)o[u]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[u]-this.gridInner[u])/this.radius+this.cutoff))));return o},zt.default=Dt;var Wt=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};Wt.prototype.setURL=function(n){this.url=n},Wt.prototype.getGlyphs=function(n,s){var o=this,u=[];for(var m in n)for(var w=0,E=n[m];w<E.length;w+=1)u.push({stack:m,id:E[w]});a.asyncAll(u,function(I,D){var U=I.stack,J=I.id,Y=o.entries[U];Y||(Y=o.entries[U]={glyphs:{},requests:{},ranges:{}});var Q=Y.glyphs[J];if(Q===void 0){if(Q=o._tinySDF(Y,U,J))return Y.glyphs[J]=Q,void D(null,{stack:U,id:J,glyph:Q});var se=Math.floor(J/256);if(256*se>65535)D(new Error("glyphs > 65535 not supported"));else if(Y.ranges[se])D(null,{stack:U,id:J,glyph:Q});else{var ae=Y.requests[se];ae||(ae=Y.requests[se]=[],Wt.loadGlyphRange(U,se,o.url,o.requestManager,function(pe,re){if(re){for(var fe in re)o._doesCharSupportLocalGlyph(+fe)||(Y.glyphs[+fe]=re[+fe]);Y.ranges[se]=!0}for(var _e=0,Ee=ae;_e<Ee.length;_e+=1)(0,Ee[_e])(pe,re);delete Y.requests[se]})),ae.push(function(pe,re){pe?D(pe):re&&D(null,{stack:U,id:J,glyph:re[J]||null})})}}else D(null,{stack:U,id:J,glyph:Q})},function(I,D){if(I)s(I);else if(D){for(var U={},J=0,Y=D;J<Y.length;J+=1){var Q=Y[J],se=Q.stack,ae=Q.id,pe=Q.glyph;(U[se]||(U[se]={}))[ae]=pe&&{id:pe.id,bitmap:pe.bitmap.clone(),metrics:pe.metrics}}s(null,U)}})},Wt.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](n)||a.isChar["Hangul Syllables"](n)||a.isChar.Hiragana(n)||a.isChar.Katakana(n))},Wt.prototype._tinySDF=function(n,s,o){var u=this.localIdeographFontFamily;if(u&&this._doesCharSupportLocalGlyph(o)){var m=n.tinySDF;if(!m){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),m=n.tinySDF=new Wt.TinySDF(24,3,8,.25,u,w)}return{id:o,bitmap:new a.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Wt.loadGlyphRange=function(n,s,o,u,m){var w=256*s,E=w+255,I=u.transformRequest(u.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",w+"-"+E),a.ResourceType.Glyphs);a.getArrayBuffer(I,function(D,U){if(D)m(D);else if(U){for(var J={},Y=0,Q=a.parseGlyphPBF(U);Y<Q.length;Y+=1){var se=Q[Y];J[se.id]=se}m(null,J)}})},Wt.TinySDF=zt;var wt=function(){this.specification=a.styleSpec.light.position};wt.prototype.possiblyEvaluate=function(n,s){return a.sphericalToCartesian(n.expression.evaluate(s))},wt.prototype.interpolate=function(n,s,o){return{x:a.number(n.x,s.x,o),y:a.number(n.y,s.y,o),z:a.number(n.z,s.z,o)}};var vt=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new wt,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),vr=function(n){function s(o){n.call(this),this._transitionable=new a.Transitionable(vt),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,u){if(u===void 0&&(u={}),!this._validate(a.validateLight,o,u))for(var m in o){var w=o[m];a.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),w):this._transitionable.setValue(m,w)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,u,m){return(!m||m.validate!==!1)&&a.emitValidationErrors(this,o.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},s}(a.Evented),Bt=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Bt.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},Bt.prototype.getDashRanges=function(n,s,o){var u=[],m=n.length%2==1?-n[n.length-1]*o:0,w=n[0]*o,E=!0;u.push({left:m,right:w,isDash:E,zeroLength:n[0]===0});for(var I=n[0],D=1;D<n.length;D++){var U=n[D];u.push({left:m=I*o,right:w=(I+=U)*o,isDash:E=!E,zeroLength:U===0})}return u},Bt.prototype.addRoundDash=function(n,s,o){for(var u=s/2,m=-o;m<=o;m++)for(var w=this.width*(this.nextRow+o+m),E=0,I=n[E],D=0;D<this.width;D++){D/I.right>1&&(I=n[++E]);var U=Math.abs(D-I.left),J=Math.abs(D-I.right),Y=Math.min(U,J),Q=void 0,se=m/o*(u+1);if(I.isDash){var ae=u-Math.abs(se);Q=Math.sqrt(Y*Y+ae*ae)}else Q=u-Math.sqrt(Y*Y+se*se);this.data[w+D]=Math.max(0,Math.min(255,Q+128))}},Bt.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],u=n[s+1];o.zeroLength?n.splice(s,1):u&&u.isDash===o.isDash&&(u.left=o.left,n.splice(s,1))}var m=n[0],w=n[n.length-1];m.isDash===w.isDash&&(m.left=w.left-this.width,w.right=m.right+this.width);for(var E=this.width*this.nextRow,I=0,D=n[I],U=0;U<this.width;U++){U/D.right>1&&(D=n[++I]);var J=Math.abs(U-D.left),Y=Math.abs(U-D.right),Q=Math.min(J,Y);this.data[E+U]=Math.max(0,Math.min(255,(D.isDash?Q:-Q)+128))}},Bt.prototype.addDash=function(n,s){var o=s?7:0,u=2*o+1;if(this.nextRow+u>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var m=0,w=0;w<n.length;w++)m+=n[w];if(m!==0){var E=this.width/m,I=this.getDashRanges(n,this.width,E);s?this.addRoundDash(I,E,o):this.addRegularDash(I)}var D={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:m};return this.nextRow+=u,this.dirty=!0,D},Bt.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var Er=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var u=this.workerPool.acquire(this.id),m=0;m<u.length;m++){var w=new n.Actor(u[m],o,this.id);w.name="Worker "+m,this.actors.push(w)}};function Je(n,s,o){var u=function(m,w){if(m)return o(m);if(w){var E=a.pick(a.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(I){return I.id})),E.tiles=s.canonicalizeTileset(E,n.url),o(null,E)}};return n.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),a.ResourceType.Source),u):a.browser.frame(function(){return u(null,n)})}Er.prototype.broadcast=function(n,s,o){a.asyncAll(this.actors,function(u,m){u.send(n,s,m)},o=o||function(){})},Er.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Er.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},Er.Actor=a.Actor;var Qt=function(n,s,o){this.bounds=a.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};Qt.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},Qt.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),u=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<m&&n.y>=u&&n.y<w};var Zr=function(n){function s(o,u,m,w){if(n.call(this),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Je(this._options,this.map._requestManager,function(u,m){o._tileJSONRequest=null,o._loaded=!0,u?o.fire(new a.ErrorEvent(u)):m&&(a.extend(o,m),m.bounds&&(o.tileBounds=new Qt(m.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(m.tiles,o.map._requestManager._customAccessToken),a.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var u=this;return this.setSourceProperty(function(){u._options.tiles=o}),this},s.prototype.setUrl=function(o){var u=this;return this.setSourceProperty(function(){u.url=o,u._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.loadTile=function(o,u){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(m,a.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(I,D){return delete o.request,o.aborted?u(null):I&&I.status!==404?u(I):(D&&D.resourceTiming&&(o.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&o.setExpiryData(D),o.loadVectorData(D,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=u:o.request=o.actor.send("reloadTile",w,E.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",w,E.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Qr=function(n){function s(o,u,m,w){n.call(this),this.id=o,this.dispatcher=m,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Je(this._options,this.map._requestManager,function(u,m){o._tileJSONRequest=null,o._loaded=!0,u?o.fire(new a.ErrorEvent(u)):m&&(a.extend(o,m),m.bounds&&(o.tileBounds=new Qt(m.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(m.tiles),a.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,u){var m=this,w=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=a.getImage(this.map._requestManager.transformRequest(w,a.ResourceType.Tile),function(E,I){if(delete o.request,o.aborted)o.state="unloaded",u(null);else if(E)o.state="errored",u(E);else if(I){m.map._refreshExpiredTiles&&o.setExpiryData(I),delete I.cacheControl,delete I.expires;var D=m.map.painter.context,U=D.gl;o.texture=m.map.painter.getTileTexture(I.width),o.texture?o.texture.update(I,{useMipmap:!0}):(o.texture=new a.Texture(D,I,U.RGBA,{useMipmap:!0}),o.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),D.extTextureFilterAnisotropic&&U.texParameterf(U.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax)),o.state="loaded",a.cacheEntryPossiblyAdded(m.dispatcher),u(null)}})},s.prototype.abortTile=function(o,u){o.request&&(o.request.cancel(),delete o.request),u()},s.prototype.unloadTile=function(o,u){o.texture&&this.map.painter.saveTileTexture(o.texture),u()},s.prototype.hasTransition=function(){return!1},s}(a.Evented),yr=function(n){function s(o,u,m,w){n.call(this,o,u,m,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,u){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,I){E&&(o.state="errored",u(E)),I&&(o.dem=I,o.needsHillshadePrepare=!0,o.state="loaded",u(null))}o.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),function(E,I){if(delete o.request,o.aborted)o.state="unloaded",u(null);else if(E)o.state="errored",u(E);else if(I){this.map._refreshExpiredTiles&&o.setExpiryData(I),delete I.cacheControl,delete I.expires;var D=a.window.ImageBitmap&&I instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?I:a.browser.getImageData(I,1),U={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:D,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",U,w.bind(this)))}}.bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var u=o.canonical,m=Math.pow(2,u.z),w=(u.x-1+m)%m,E=u.x===0?o.wrap-1:o.wrap,I=(u.x+1+m)%m,D=u.x+1===m?o.wrap+1:o.wrap,U={};return U[new a.OverscaledTileID(o.overscaledZ,E,u.z,w,u.y).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,D,u.z,I,u.y).key]={backfilled:!1},u.y>0&&(U[new a.OverscaledTileID(o.overscaledZ,E,u.z,w,u.y-1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,o.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,D,u.z,I,u.y-1).key]={backfilled:!1}),u.y+1<m&&(U[new a.OverscaledTileID(o.overscaledZ,E,u.z,w,u.y+1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,o.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,D,u.z,I,u.y+1).key]={backfilled:!1}),U},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(Qr),pt=function(n){function s(o,u,m,w){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(w),this._data=u.data,this._options=a.extend({},u),this._collectResourceTiming=u.collectResourceTiming,this._resourceTiming=[],u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;var E=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*E,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*E,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?Math.min(u.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.EXTENT,radius:(u.clusterRadius||50)*E,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(u){if(u)o.fire(new a.ErrorEvent(u));else{var m={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(m.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new a.Event("data",m))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var u=this;return this._data=o,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)u.fire(new a.ErrorEvent(m));else{var w={dataType:"source",sourceDataType:"content"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(w.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new a.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(o,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},u),this},s.prototype.getClusterChildren=function(o,u){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},u),this},s.prototype.getClusterLeaves=function(o,u,m,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:u,offset:m},w),this},s.prototype._updateWorkerData=function(o){var u=this;this._loaded=!1;var m=a.extend({},this.workerOptions),w=this._data;typeof w=="string"?(m.request=this.map._requestManager.transformRequest(a.browser.resolveURL(w),a.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(w),this.actor.send(this.type+".loadData",m,function(E,I){u._removed||I&&I.abandoned||(u._loaded=!0,I&&I.resourceTiming&&I.resourceTiming[u.id]&&(u._resourceTiming=I.resourceTiming[u.id].slice(0)),u.actor.send(u.type+".coalesce",{source:m.source},null),o(E))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,u){var m=this,w=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(w,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,I){return delete o.request,o.unloadVectorData(),o.aborted?u(null):E?u(E):(o.loadVectorData(I,m.map.painter,w==="reloadTile"),u(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(a.Evented),rt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),nr=function(n){function s(o,u,m,w){n.call(this),this.id=o,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,u){var m=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(w,E){m._loaded=!0,w?m.fire(new a.ErrorEvent(w)):E&&(m.image=E,o&&(m.coordinates=o),u&&u(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var u=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){u.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var u=this;this.coordinates=o;var m=o.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var I=1/0,D=1/0,U=-1/0,J=-1/0,Y=0,Q=E;Y<Q.length;Y+=1){var se=Q[Y];I=Math.min(I,se.x),D=Math.min(D,se.y),U=Math.max(U,se.x),J=Math.max(J,se.y)}var ae=Math.max(U-I,J-D),pe=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),re=Math.pow(2,pe);return new a.CanonicalTileID(pe,Math.floor((I+U)/2*re),Math.floor((D+J)/2*re))}(m),this.minzoom=this.maxzoom=this.tileID.z;var w=m.map(function(E){return u.tileID.getTilePoint(E)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,u=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(o,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(o,u){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},u(null)):(o.state="errored",u(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Bi=function(n){function s(o,u,m,w){n.call(this,o,u,m,w),this.roundZoom=!0,this.type="video",this.options=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var u=this.options;this.urls=[];for(var m=0,w=u.urls;m<w.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(w[m],a.ResourceType.Source).url);a.getVideo(this.urls,function(E,I){o._loaded=!0,E?o.fire(new a.ErrorEvent(E)):I&&(o.video=I,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var u=this.video.seekable;o<u.start(0)||o>u.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+u.start(0)+" and "+u.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,u=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(o,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(nr),Qn=function(n){function s(o,u,m,w){n.call(this,o,u,m,w),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(I){return typeof I!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var u=this.map.painter.context,m=u.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(u,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,u=[this.canvas.width,this.canvas.height];o<u.length;o+=1){var m=u[o];if(isNaN(m)||m<=0)return!0}return!1},s}(nr),Ti={vector:Zr,raster:Qr,"raster-dem":yr,geojson:pt,video:Bi,image:nr,canvas:Qn};function xi(n,s){var o=a.identity([]);return a.translate(o,o,[1,1,0]),a.scale(o,o,[.5*n.width,.5*n.height,1]),a.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function $r(n,s,o,u,m,w){var E=function(pe,re,fe){if(pe)for(var _e=0,Ee=pe;_e<Ee.length;_e+=1){var Pe=re[Ee[_e]];if(Pe&&Pe.source===fe&&Pe.type==="fill-extrusion")return!0}else for(var Ce in re){var Oe=re[Ce];if(Oe.source===fe&&Oe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),I=w.maxPitchScaleFactor(),D=n.tilesIn(u,I,E);D.sort(Xi);for(var U=[],J=0,Y=D;J<Y.length;J+=1){var Q=Y[J];U.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(s,o,n._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,m,w,I,xi(n.transform,Q.tileID))})}var se=function(pe){for(var re={},fe={},_e=0,Ee=pe;_e<Ee.length;_e+=1){var Pe=Ee[_e],Ce=Pe.queryResults,Oe=Pe.wrappedTileID,Ze=fe[Oe]=fe[Oe]||{};for(var We in Ce)for(var He=Ce[We],ut=Ze[We]=Ze[We]||{},St=re[We]=re[We]||[],dt=0,_t=He;dt<_t.length;dt+=1){var er=_t[dt];ut[er.featureIndex]||(ut[er.featureIndex]=!0,St.push(er))}}return re}(U);for(var ae in se)se[ae].forEach(function(pe){var re=pe.feature,fe=n.getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=fe});return se}function Xi(n,s){var o=n.tileID,u=s.tileID;return o.overscaledZ-u.overscaledZ||o.canonical.y-u.canonical.y||o.wrap-u.wrap||o.canonical.x-u.canonical.x}var Jt=function(n,s){this.max=n,this.onRemove=s,this.reset()};Jt.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var u=o[s];u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value)}return this.data={},this.order=[],this},Jt.prototype.add=function(n,s,o){var u=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var w={value:s,timeout:void 0};if(o!==void 0&&(w.timeout=setTimeout(function(){u.remove(n,w)},o)),this.data[m].push(w),this.order.push(m),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},Jt.prototype.has=function(n){return n.wrapped().key in this.data},Jt.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},Jt.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},Jt.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},Jt.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},Jt.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,u=s===void 0?0:this.data[o].indexOf(s),m=this.data[o][u];return this.data[o].splice(u,1),m.timeout&&clearTimeout(m.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(m.value),this.order.splice(this.order.indexOf(o),1),this},Jt.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},Jt.prototype.filter=function(n){var s=[];for(var o in this.data)for(var u=0,m=this.data[o];u<m.length;u+=1){var w=m[u];n(w.value)||s.push(w)}for(var E=0,I=s;E<I.length;E+=1){var D=I[E];this.remove(D.value.tileID,D)}};var Ai=function(n,s,o){this.context=n;var u=n.gl;this.buffer=u.createBuffer(),this.dynamicDraw=Boolean(o),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Ai.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ai.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Ai.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ra={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},kt=function(n,s,o,u){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=u,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};kt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},kt.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},kt.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var u=s.attributes[this.attributes[o].name];u!==void 0&&n.enableVertexAttribArray(u)}},kt.prototype.setVertexAttribPointers=function(n,s,o){for(var u=0;u<this.attributes.length;u++){var m=this.attributes[u],w=s.attributes[m.name];w!==void 0&&n.vertexAttribPointer(w,m.components,n[Ra[m.type]],!1,this.itemSize,m.offset+this.itemSize*(o||0))}},kt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ct=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ct.prototype.get=function(){return this.current},Ct.prototype.set=function(n){},Ct.prototype.getDefault=function(){return this.default},Ct.prototype.setDefault=function(){this.set(this.default)};var ei=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Ct),Sr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(Ct),br=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(Ct),sn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Ct),oi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(Ct),wi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(Ct),Or=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var u=this.current;(o.func!==u.func||o.ref!==u.ref||o.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(Ct),hr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(Ct),ar=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(Ct),si=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Ct),li=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(Ct),ln=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(Ct),ti=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.BLEND):u.disable(u.BLEND),this.current=o,this.dirty=!1}},s}(Ct),Oi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Ct),pa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Ct),Ha=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(Ct),Xa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=o,this.dirty=!1}},s}(Ct),In=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(Ct),On=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(Ct),ui=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(Ct),Fi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(Ct),un=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Ct),Wa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(Ct),mn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Ct),Go=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindTexture(u.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(Ct),cn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(Ct),Ei=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(Ct),Gr=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(Ct),Wi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(Ct),Fn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(Ct),yn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(Ct),Vr=function(n){function s(o,u){n.call(this,o),this.context=o,this.parent=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Ct),O=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(Vr),j=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Vr),Z=function(n,s,o,u){this.context=n,this.width=s,this.height=o;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new O(n,m),u&&(this.depthAttachment=new j(n,m))};Z.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var $=function(n,s,o){this.func=n,this.mask=s,this.range=o};$.ReadOnly=!1,$.ReadWrite=!0,$.disabled=new $(519,$.ReadOnly,[0,1]);var ie=function(n,s,o,u,m,w){this.test=n,this.ref=s,this.mask=o,this.fail=u,this.depthFail=m,this.pass=w};ie.disabled=new ie({func:519,mask:0},0,0,7680,7680,7680);var de=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};de.disabled=new de(de.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),de.unblended=new de(de.Replace,a.Color.transparent,[!0,!0,!0,!0]),de.alphaBlended=new de([1,771],a.Color.transparent,[!0,!0,!0,!0]);var ge=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};ge.disabled=new ge(!1,1029,2305),ge.backCCW=new ge(!0,1029,2305);var G=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ei(this),this.clearDepth=new Sr(this),this.clearStencil=new br(this),this.colorMask=new sn(this),this.depthMask=new oi(this),this.stencilMask=new wi(this),this.stencilFunc=new Or(this),this.stencilOp=new hr(this),this.stencilTest=new ar(this),this.depthRange=new si(this),this.depthTest=new li(this),this.depthFunc=new ln(this),this.blend=new ti(this),this.blendFunc=new Oi(this),this.blendColor=new pa(this),this.blendEquation=new Ha(this),this.cullFace=new Xa(this),this.cullFaceSide=new In(this),this.frontFace=new On(this),this.program=new ui(this),this.activeTexture=new Fi(this),this.viewport=new un(this),this.bindFramebuffer=new Wa(this),this.bindRenderbuffer=new mn(this),this.bindTexture=new Go(this),this.bindVertexBuffer=new cn(this),this.bindElementBuffer=new Ei(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Gr(this),this.pixelStoreUnpack=new Wi(this),this.pixelStoreUnpackPremultiplyAlpha=new Fn(this),this.pixelStoreUnpackFlipY=new yn(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};G.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},G.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},G.prototype.createIndexBuffer=function(n,s){return new Ai(this,n,s)},G.prototype.createVertexBuffer=function(n,s,o){return new kt(this,n,s,o)},G.prototype.createRenderbuffer=function(n,s,o){var u=this.gl,m=u.createRenderbuffer();return this.bindRenderbuffer.set(m),u.renderbufferStorage(u.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),m},G.prototype.createFramebuffer=function(n,s,o){return new Z(this,n,s,o)},G.prototype.clear=function(n){var s=n.color,o=n.depth,u=this.gl,m=0;s&&(m|=u.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(m|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),u.clear(m)},G.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},G.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},G.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},G.prototype.setColorMode=function(n){a.deepEqual(n.blendFunction,de.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},G.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var te=function(n){function s(o,u,m){var w=this;n.call(this),this.id=o,this.dispatcher=m,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,I,D,U){var J=new Ti[I.type](E,I,D,U);if(J.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+J.id);return a.bindAll(["load","abort","unload","serialize","prepare"],J),J}(o,u,m,this),this._tiles={},this._cache=new Jt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var u=this._tiles[o];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,u){return this._source.loadTile(o,u)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var u in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[u];m.upload(o),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return a.values(this._tiles).map(function(o){return o.tileID}).sort(we).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var u=this,m=[];for(var w in this._tiles)this._isIdRenderable(w,o)&&m.push(this._tiles[w]);return o?m.sort(function(E,I){var D=E.tileID,U=I.tileID,J=new a.Point(D.canonical.x,D.canonical.y)._rotate(u.transform.angle),Y=new a.Point(U.canonical.x,U.canonical.y)._rotate(u.transform.angle);return D.overscaledZ-U.overscaledZ||Y.y-J.y||Y.x-J.x}).map(function(E){return E.tileID.key}):m.map(function(E){return E.tileID}).sort(we).map(function(E){return E.key})},s.prototype.hasRenderableParent=function(o){var u=this.findLoadedParent(o,0);return!!u&&this._isIdRenderable(u.tileID.key)},s.prototype._isIdRenderable=function(o,u){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(u||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,u){var m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,o,u)))},s.prototype._tileLoaded=function(o,u,m,w){if(w)return o.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:o})):this.update(this.transform));o.timeAdded=a.browser.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(u,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var u=this.getRenderableIds(),m=0;m<u.length;m++){var w=u[m];if(o.neighboringTiles&&o.neighboringTiles[w]){var E=this.getTileByID(w);I(o,E),I(E,o)}}function I(D,U){D.needsHillshadePrepare=!0;var J=U.tileID.canonical.x-D.tileID.canonical.x,Y=U.tileID.canonical.y-D.tileID.canonical.y,Q=Math.pow(2,D.tileID.canonical.z),se=U.tileID.key;J===0&&Y===0||Math.abs(Y)>1||(Math.abs(J)>1&&(Math.abs(J+Q)===1?J+=Q:Math.abs(J-Q)===1&&(J-=Q)),U.dem&&D.dem&&(D.dem.backfillBorder(U.dem,J,Y),D.neighboringTiles&&D.neighboringTiles[se]&&(D.neighboringTiles[se].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,u,m,w){for(var E in this._tiles){var I=this._tiles[E];if(!(w[E]||!I.hasData()||I.tileID.overscaledZ<=u||I.tileID.overscaledZ>m)){for(var D=I.tileID;I&&I.tileID.overscaledZ>u+1;){var U=I.tileID.scaledTo(I.tileID.overscaledZ-1);(I=this._tiles[U.key])&&I.hasData()&&(D=U)}for(var J=D;J.overscaledZ>u;)if(o[(J=J.scaledTo(J.overscaledZ-1)).key]){w[D.key]=D;break}}}},s.prototype.findLoadedParent=function(o,u){if(o.key in this._loadedParentTiles){var m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=u?m:null}for(var w=o.overscaledZ-1;w>=u;w--){var E=o.scaledTo(w),I=this._getLoadedTile(E);if(I)return I}},s.prototype._getLoadedTile=function(o){var u=this._tiles[o.key];return u&&u.hasData()?u:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var u=Math.ceil(o.width/this._source.tileSize)+1,m=Math.ceil(o.height/this._source.tileSize)+1,w=Math.floor(u*m*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},s.prototype.handleWrapJump=function(o){var u=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,u){var m={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),m[E.tileID.key]=E}for(var I in this._tiles=m,this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(var D in this._tiles)this._setTileReloadTimer(D,this._tiles[D])}},s.prototype.update=function(o){var u=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ze){return new a.OverscaledTileID(Ze.canonical.z,Ze.wrap,Ze.canonical.z,Ze.canonical.x,Ze.canonical.y)}):(m=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ze){return u._source.hasTile(Ze)}))):m=[];var w=o.coveringZoomLevel(this._source),E=Math.max(w-s.maxOverzooming,this._source.minzoom),I=Math.max(w+s.maxUnderzooming,this._source.minzoom),D=this._updateRetainedTiles(m,w);if(Ue(this._source.type)){for(var U={},J={},Y=0,Q=Object.keys(D);Y<Q.length;Y+=1){var se=Q[Y],ae=D[se],pe=this._tiles[se];if(pe&&!(pe.fadeEndTime&&pe.fadeEndTime<=a.browser.now())){var re=this.findLoadedParent(ae,E);re&&(this._addTile(re.tileID),U[re.tileID.key]=re.tileID),J[se]=ae}}for(var fe in this._retainLoadedChildren(J,w,I,D),U)D[fe]||(this._coveredTiles[fe]=!0,D[fe]=U[fe])}for(var _e in D)this._tiles[_e].clearFadeHold();for(var Ee=0,Pe=a.keysDifference(this._tiles,D);Ee<Pe.length;Ee+=1){var Ce=Pe[Ee],Oe=this._tiles[Ce];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(Ce)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,u){for(var m={},w={},E=Math.max(u-s.maxOverzooming,this._source.minzoom),I=Math.max(u+s.maxUnderzooming,this._source.minzoom),D={},U=0,J=o;U<J.length;U+=1){var Y=J[U],Q=this._addTile(Y);m[Y.key]=Y,Q.hasData()||u<this._source.maxzoom&&(D[Y.key]=Y)}this._retainLoadedChildren(D,u,I,m);for(var se=0,ae=o;se<ae.length;se+=1){var pe=ae[se],re=this._tiles[pe.key];if(!re.hasData()){if(u+1>this._source.maxzoom){var fe=pe.children(this._source.maxzoom)[0],_e=this.getTile(fe);if(_e&&_e.hasData()){m[fe.key]=fe;continue}}else{var Ee=pe.children(this._source.maxzoom);if(m[Ee[0].key]&&m[Ee[1].key]&&m[Ee[2].key]&&m[Ee[3].key])continue}for(var Pe=re.wasRequested(),Ce=pe.overscaledZ-1;Ce>=E;--Ce){var Oe=pe.scaledTo(Ce);if(w[Oe.key]||(w[Oe.key]=!0,!(re=this.getTile(Oe))&&Pe&&(re=this._addTile(Oe)),re&&(m[Oe.key]=Oe,Pe=re.wasRequested(),re.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var u=[],m=void 0,w=this._tiles[o].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){m=this._loadedParentTiles[w.key];break}u.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(m=this._getLoadedTile(E))break;w=E}for(var I=0,D=u;I<D.length;I+=1)this._loadedParentTiles[D[I]]=m}},s.prototype._addTile=function(o){var u=this._tiles[o.key];if(u)return u;(u=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,u),u.tileID=o,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,u)));var m=Boolean(u);return m||(u=new a.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,o.key,u.state))),u?(u.uses++,this._tiles[o.key]=u,m||this._source.fire(new a.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null},s.prototype._setTileReloadTimer=function(o,u){var m=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var w=u.getExpiryTimeout();w&&(this._timers[o]=setTimeout(function(){m._reloadTile(o,"expired"),delete m._timers[o]},w))},s.prototype._removeTile=function(o){var u=this._tiles[o];u&&(u.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,u,m){var w=this,E=[],I=this.transform;if(!I)return E;for(var D=m?I.getCameraQueryGeometry(o):o,U=o.map(function(Ce){return I.pointCoordinate(Ce)}),J=D.map(function(Ce){return I.pointCoordinate(Ce)}),Y=this.getIds(),Q=1/0,se=1/0,ae=-1/0,pe=-1/0,re=0,fe=J;re<fe.length;re+=1){var _e=fe[re];Q=Math.min(Q,_e.x),se=Math.min(se,_e.y),ae=Math.max(ae,_e.x),pe=Math.max(pe,_e.y)}for(var Ee=function(Ce){var Oe=w._tiles[Y[Ce]];if(!Oe.holdingForFade()){var Ze=Oe.tileID,We=Math.pow(2,I.zoom-Oe.tileID.overscaledZ),He=u*Oe.queryPadding*a.EXTENT/Oe.tileSize/We,ut=[Ze.getTilePoint(new a.MercatorCoordinate(Q,se)),Ze.getTilePoint(new a.MercatorCoordinate(ae,pe))];if(ut[0].x-He<a.EXTENT&&ut[0].y-He<a.EXTENT&&ut[1].x+He>=0&&ut[1].y+He>=0){var St=U.map(function(_t){return Ze.getTilePoint(_t)}),dt=J.map(function(_t){return Ze.getTilePoint(_t)});E.push({tile:Oe,tileID:Ze,queryGeometry:St,cameraQueryGeometry:dt,scale:We})}}},Pe=0;Pe<Y.length;Pe++)Ee(Pe);return E},s.prototype.getVisibleCoordinates=function(o){for(var u=this,m=this.getRenderableIds(o).map(function(D){return u._tiles[D].tileID}),w=0,E=m;w<E.length;w+=1){var I=E[w];I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var o in this._tiles){var u=this._tiles[o];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=a.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,u,m){this._state.updateState(o=o||"_geojsonTileLayer",u,m)},s.prototype.removeFeatureState=function(o,u,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",u,m)},s.prototype.getFeatureState=function(o,u){return this._state.getState(o=o||"_geojsonTileLayer",u)},s.prototype.setDependencies=function(o,u,m){var w=this._tiles[o];w&&w.setDependencies(u,m)},s.prototype.reloadTilesForDependencies=function(o,u){for(var m in this._tiles)this._tiles[m].hasDependency(o,u)&&this._reloadTile(m,"reloading");this._cache.filter(function(w){return!w.hasDependency(o,u)})},s}(a.Evented);function we(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),u=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||u-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ue(n){return n==="raster"||n==="image"||n==="video"}function qe(){return new a.window.Worker(wu.workerUrl)}te.maxOverzooming=10,te.maxUnderzooming=3;var Ie="mapboxgl_preloaded_worker_pool",je=function(){this.active={}};je.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<je.workerCount;)this.workers.push(new qe);return this.active[n]=!0,this.workers.slice()},je.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},je.prototype.isPreloaded=function(){return!!this.active[Ie]},je.prototype.numActive=function(){return Object.keys(this.active).length};var it,nt=Math.floor(a.browser.hardwareConcurrency/2);function Me(){return it||(it=new je),it}function Ye(n,s){var o={};for(var u in n)u!=="ref"&&(o[u]=n[u]);return a.refProperties.forEach(function(m){m in s&&(o[m]=s[m])}),o}function Ke(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var u=0;u<n.length;u++)"ref"in n[u]&&(n[u]=Ye(n[u],s[n[u].ref]));return n}je.workerCount=Math.max(Math.min(nt,6),1);var Qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Lt(n,s,o){o.push({command:Qe.addSource,args:[n,s[n]]})}function Xe(n,s,o){s.push({command:Qe.removeSource,args:[n]}),o[n]=!0}function jt(n,s,o,u){Xe(n,o,u),Lt(n,s,o)}function sr(n,s,o){var u;for(u in n[o])if(n[o].hasOwnProperty(u)&&u!=="data"&&!a.deepEqual(n[o][u],s[o][u]))return!1;for(u in s[o])if(s[o].hasOwnProperty(u)&&u!=="data"&&!a.deepEqual(n[o][u],s[o][u]))return!1;return!0}function It(n,s,o,u,m,w){var E;for(E in s=s||{},n=n||{})n.hasOwnProperty(E)&&(a.deepEqual(n[E],s[E])||o.push({command:w,args:[u,E,s[E],m]}));for(E in s)s.hasOwnProperty(E)&&!n.hasOwnProperty(E)&&(a.deepEqual(n[E],s[E])||o.push({command:w,args:[u,E,s[E],m]}))}function Yt(n){return n.id}function Vt(n,s){return n[s.id]=s,n}var Dr=function(n,s){this.reset(n,s)};Dr.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Dr.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=a.clamp(n,0,1);for(var s=1,o=this._distances[s],u=n*this.paddedLength+this.padding;o<u&&s<this._distances.length;)o=this._distances[++s];var m=s-1,w=this._distances[m],E=o-w,I=E>0?(u-w)/E:0;return this.points[m].mult(1-I).add(this.points[s].mult(I))};var Nt=function(n,s,o){var u=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var w=0;w<this.xCellCount*this.yCellCount;w++)u.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function dr(n,s,o,u,m){var w=a.create();return s?(a.scale(w,w,[1/m,1/m,1]),o||a.rotateZ(w,w,u.angle)):a.multiply(w,u.labelPlaneMatrix,n),w}function or(n,s,o,u,m){if(s){var w=a.clone(n);return a.scale(w,w,[m,m,1]),o||a.rotateZ(w,w,-u.angle),w}return u.glCoordMatrix}function Kt(n,s){var o=[n.x,n.y,0,1];Nr(o,o,s);var u=o[3];return{point:new a.Point(o[0]/u,o[1]/u),signedDistanceFromCamera:u}}function tr(n,s){return .5+n/s*.5}function ci(n,s){var o=n[0]/n[3],u=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&u>=-s[1]&&u<=s[1]}function gn(n,s,o,u,m,w,E,I){var D=u?n.textSizeData:n.iconSizeData,U=a.evaluateSizeForZoom(D,o.transform.zoom),J=[256/o.width*2+1,256/o.height*2+1],Y=u?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;Y.clear();for(var Q=n.lineVertexArray,se=u?n.text.placedSymbolArray:n.icon.placedSymbolArray,ae=o.transform.width/o.transform.height,pe=!1,re=0;re<se.length;re++){var fe=se.get(re);if(fe.hidden||fe.writingMode===a.WritingMode.vertical&&!pe)Qi(fe.numGlyphs,Y);else{pe=!1;var _e=[fe.anchorX,fe.anchorY,0,1];if(a.transformMat4(_e,_e,s),ci(_e,J)){var Ee=tr(o.transform.cameraToCenterDistance,_e[3]),Pe=a.evaluateSizeForFeature(D,U,fe),Ce=E?Pe/Ee:Pe*Ee,Oe=new a.Point(fe.anchorX,fe.anchorY),Ze=Kt(Oe,m).point,We={},He=Ji(fe,Ce,!1,I,s,m,w,n.glyphOffsetArray,Q,Y,Ze,Oe,We,ae);pe=He.useVertical,(He.notEnoughRoom||pe||He.needsFlipping&&Ji(fe,Ce,!0,I,s,m,w,n.glyphOffsetArray,Q,Y,Ze,Oe,We,ae).notEnoughRoom)&&Qi(fe.numGlyphs,Y)}else Qi(fe.numGlyphs,Y)}}u?n.text.dynamicLayoutVertexBuffer.updateData(Y):n.icon.dynamicLayoutVertexBuffer.updateData(Y)}function fi(n,s,o,u,m,w,E,I,D,U,J){var Y=I.glyphStartIndex+I.numGlyphs,Q=I.lineStartIndex,se=I.lineStartIndex+I.lineLength,ae=s.getoffsetX(I.glyphStartIndex),pe=s.getoffsetX(Y-1),re=mr(n*ae,o,u,m,w,E,I.segment,Q,se,D,U,J);if(!re)return null;var fe=mr(n*pe,o,u,m,w,E,I.segment,Q,se,D,U,J);return fe?{first:re,last:fe}:null}function di(n,s,o,u){return n===a.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*u?{useVertical:!0}:(n===a.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function Ji(n,s,o,u,m,w,E,I,D,U,J,Y,Q,se){var ae,pe=s/24,re=n.lineOffsetX*pe,fe=n.lineOffsetY*pe;if(n.numGlyphs>1){var _e=n.glyphStartIndex+n.numGlyphs,Ee=n.lineStartIndex,Pe=n.lineStartIndex+n.lineLength,Ce=fi(pe,I,re,fe,o,J,Y,n,D,w,Q);if(!Ce)return{notEnoughRoom:!0};var Oe=Kt(Ce.first.point,E).point,Ze=Kt(Ce.last.point,E).point;if(u&&!o){var We=di(n.writingMode,Oe,Ze,se);if(We)return We}ae=[Ce.first];for(var He=n.glyphStartIndex+1;He<_e-1;He++)ae.push(mr(pe*I.getoffsetX(He),re,fe,o,J,Y,n.segment,Ee,Pe,D,w,Q));ae.push(Ce.last)}else{if(u&&!o){var ut=Kt(Y,m).point,St=n.lineStartIndex+n.segment+1,dt=new a.Point(D.getx(St),D.gety(St)),_t=Kt(dt,m),er=_t.signedDistanceFromCamera>0?_t.point:Yi(Y,dt,ut,1,m),at=di(n.writingMode,ut,er,se);if(at)return at}var Ut=mr(pe*I.getoffsetX(n.glyphStartIndex),re,fe,o,J,Y,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,D,w,Q);if(!Ut)return{notEnoughRoom:!0};ae=[Ut]}for(var Gt=0,qt=ae;Gt<qt.length;Gt+=1){var Ft=qt[Gt];a.addDynamicAttributes(U,Ft.point,Ft.angle)}return{}}function Yi(n,s,o,u,m){var w=Kt(n.add(n.sub(s)._unit()),m).point,E=o.sub(w);return o.add(E._mult(u/E.mag()))}function mr(n,s,o,u,m,w,E,I,D,U,J,Y){var Q=u?n-s:n+s,se=Q>0?1:-1,ae=0;u&&(se*=-1,ae=Math.PI),se<0&&(ae+=Math.PI);for(var pe=se>0?I+E:I+E+1,re=m,fe=m,_e=0,Ee=0,Pe=Math.abs(Q),Ce=[];_e+Ee<=Pe;){if((pe+=se)<I||pe>=D)return null;if(fe=re,Ce.push(re),(re=Y[pe])===void 0){var Oe=new a.Point(U.getx(pe),U.gety(pe)),Ze=Kt(Oe,J);if(Ze.signedDistanceFromCamera>0)re=Y[pe]=Ze.point;else{var We=pe-se;re=Yi(_e===0?w:new a.Point(U.getx(We),U.gety(We)),Oe,fe,Pe-_e+1,J)}}_e+=Ee,Ee=fe.dist(re)}var He=(Pe-_e)/Ee,ut=re.sub(fe),St=ut.mult(He)._add(fe);St._add(ut._unit()._perp()._mult(o*se));var dt=ae+Math.atan2(re.y-fe.y,re.x-fe.x);return Ce.push(St),{point:St,angle:dt,path:Ce}}Nt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Nt.prototype.insert=function(n,s,o,u,m){this._forEachCell(s,o,u,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(m)},Nt.prototype.insertCircle=function(n,s,o,u){this._forEachCell(s-u,o-u,s+u,o+u,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(u)},Nt.prototype._insertBoxCell=function(n,s,o,u,m,w){this.boxCells[m].push(w)},Nt.prototype._insertCircleCell=function(n,s,o,u,m,w){this.circleCells[m].push(w)},Nt.prototype._query=function(n,s,o,u,m,w){if(o<0||n>this.width||u<0||s>this.height)return!m&&[];var E=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=u){if(m)return!0;for(var I=0;I<this.boxKeys.length;I++)E.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(var D=0;D<this.circleKeys.length;D++){var U=this.circles[3*D],J=this.circles[3*D+1],Y=this.circles[3*D+2];E.push({key:this.circleKeys[D],x1:U-Y,y1:J-Y,x2:U+Y,y2:J+Y})}return w?E.filter(w):E}return this._forEachCell(n,s,o,u,this._queryCell,E,{hitTest:m,seenUids:{box:{},circle:{}}},w),m?E.length>0:E},Nt.prototype._queryCircle=function(n,s,o,u,m){var w=n-o,E=n+o,I=s-o,D=s+o;if(E<0||w>this.width||D<0||I>this.height)return!u&&[];var U=[];return this._forEachCell(w,I,E,D,this._queryCellCircle,U,{hitTest:u,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},m),u?U.length>0:U},Nt.prototype.query=function(n,s,o,u,m){return this._query(n,s,o,u,!1,m)},Nt.prototype.hitTest=function(n,s,o,u,m){return this._query(n,s,o,u,!0,m)},Nt.prototype.hitTestCircle=function(n,s,o,u){return this._queryCircle(n,s,o,!0,u)},Nt.prototype._queryCell=function(n,s,o,u,m,w,E,I){var D=E.seenUids,U=this.boxCells[m];if(U!==null)for(var J=this.bboxes,Y=0,Q=U;Y<Q.length;Y+=1){var se=Q[Y];if(!D.box[se]){D.box[se]=!0;var ae=4*se;if(n<=J[ae+2]&&s<=J[ae+3]&&o>=J[ae+0]&&u>=J[ae+1]&&(!I||I(this.boxKeys[se]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[se],x1:J[ae],y1:J[ae+1],x2:J[ae+2],y2:J[ae+3]})}}}var pe=this.circleCells[m];if(pe!==null)for(var re=this.circles,fe=0,_e=pe;fe<_e.length;fe+=1){var Ee=_e[fe];if(!D.circle[Ee]){D.circle[Ee]=!0;var Pe=3*Ee;if(this._circleAndRectCollide(re[Pe],re[Pe+1],re[Pe+2],n,s,o,u)&&(!I||I(this.circleKeys[Ee]))){if(E.hitTest)return w.push(!0),!0;var Ce=re[Pe],Oe=re[Pe+1],Ze=re[Pe+2];w.push({key:this.circleKeys[Ee],x1:Ce-Ze,y1:Oe-Ze,x2:Ce+Ze,y2:Oe+Ze})}}}},Nt.prototype._queryCellCircle=function(n,s,o,u,m,w,E,I){var D=E.circle,U=E.seenUids,J=this.boxCells[m];if(J!==null)for(var Y=this.bboxes,Q=0,se=J;Q<se.length;Q+=1){var ae=se[Q];if(!U.box[ae]){U.box[ae]=!0;var pe=4*ae;if(this._circleAndRectCollide(D.x,D.y,D.radius,Y[pe+0],Y[pe+1],Y[pe+2],Y[pe+3])&&(!I||I(this.boxKeys[ae])))return w.push(!0),!0}}var re=this.circleCells[m];if(re!==null)for(var fe=this.circles,_e=0,Ee=re;_e<Ee.length;_e+=1){var Pe=Ee[_e];if(!U.circle[Pe]){U.circle[Pe]=!0;var Ce=3*Pe;if(this._circlesCollide(fe[Ce],fe[Ce+1],fe[Ce+2],D.x,D.y,D.radius)&&(!I||I(this.circleKeys[Pe])))return w.push(!0),!0}}},Nt.prototype._forEachCell=function(n,s,o,u,m,w,E,I){for(var D=this._convertToXCellCoord(n),U=this._convertToYCellCoord(s),J=this._convertToXCellCoord(o),Y=this._convertToYCellCoord(u),Q=D;Q<=J;Q++)for(var se=U;se<=Y;se++)if(m.call(this,n,s,o,u,this.xCellCount*se+Q,w,E,I))return},Nt.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},Nt.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},Nt.prototype._circlesCollide=function(n,s,o,u,m,w){var E=u-n,I=m-s,D=o+w;return D*D>E*E+I*I},Nt.prototype._circleAndRectCollide=function(n,s,o,u,m,w,E){var I=(w-u)/2,D=Math.abs(n-(u+I));if(D>I+o)return!1;var U=(E-m)/2,J=Math.abs(s-(m+U));if(J>U+o)return!1;if(D<=I||J<=U)return!0;var Y=D-I,Q=J-U;return Y*Y+Q*Q<=o*o};var Vi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qi(n,s){for(var o=0;o<n;o++){var u=s.length;s.resize(u+4),s.float32.set(Vi,3*u)}}function Nr(n,s,o){var u=s[0],m=s[1];return n[0]=o[0]*u+o[4]*m+o[12],n[1]=o[1]*u+o[5]*m+o[13],n[3]=o[3]*u+o[7]*m+o[15],n}var $i=function(n,s,o){s===void 0&&(s=new Nt(n.width+200,n.height+200,25)),o===void 0&&(o=new Nt(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function gr(n,s,o){return s*(a.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}$i.prototype.placeCollisionBox=function(n,s,o,u,m){var w=this.projectAndGetPerspectiveRatio(u,n.anchorPointX,n.anchorPointY),E=o*w.perspectiveRatio,I=n.x1*E+w.point.x,D=n.y1*E+w.point.y,U=n.x2*E+w.point.x,J=n.y2*E+w.point.y;return!this.isInsideGrid(I,D,U,J)||!s&&this.grid.hitTest(I,D,U,J,m)?{box:[],offscreen:!1}:{box:[I,D,U,J],offscreen:this.isOffscreen(I,D,U,J)}},$i.prototype.placeCollisionCircles=function(n,s,o,u,m,w,E,I,D,U,J,Y,Q){var se=[],ae=new a.Point(s.anchorX,s.anchorY),pe=Kt(ae,w),re=tr(this.transform.cameraToCenterDistance,pe.signedDistanceFromCamera),fe=(U?m/re:m*re)/a.ONE_EM,_e=Kt(ae,E).point,Ee=fi(fe,u,s.lineOffsetX*fe,s.lineOffsetY*fe,!1,_e,ae,s,o,E,{}),Pe=!1,Ce=!1,Oe=!0;if(Ee){for(var Ze=.5*Y*re+Q,We=new a.Point(-100,-100),He=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new Dr,St=Ee.first,dt=Ee.last,_t=[],er=St.path.length-1;er>=1;er--)_t.push(St.path[er]);for(var at=1;at<dt.path.length;at++)_t.push(dt.path[at]);var Ut=2.5*Ze;if(I){var Gt=_t.map(function(ys){return Kt(ys,I)});_t=Gt.some(function(ys){return ys.signedDistanceFromCamera<=0})?[]:Gt.map(function(ys){return ys.point})}var qt=[];if(_t.length>0){for(var Ft=_t[0].clone(),Zt=_t[0].clone(),Mt=1;Mt<_t.length;Mt++)Ft.x=Math.min(Ft.x,_t[Mt].x),Ft.y=Math.min(Ft.y,_t[Mt].y),Zt.x=Math.max(Zt.x,_t[Mt].x),Zt.y=Math.max(Zt.y,_t[Mt].y);qt=Ft.x>=We.x&&Zt.x<=He.x&&Ft.y>=We.y&&Zt.y<=He.y?[_t]:Zt.x<We.x||Ft.x>He.x||Zt.y<We.y||Ft.y>He.y?[]:a.clipLine([_t],We.x,We.y,He.x,He.y)}for(var Rt=0,nn=qt;Rt<nn.length;Rt+=1){var Mi;ut.reset(nn[Rt],.25*Ze),Mi=ut.length<=.5*Ze?1:Math.ceil(ut.paddedLength/Ut)+1;for(var va=0;va<Mi;va++){var Zn=va/Math.max(Mi-1,1),ai=ut.lerp(Zn),fn=ai.x+100,Pn=ai.y+100;se.push(fn,Pn,Ze,0);var Ki=fn-Ze,so=Pn-Ze,Na=fn+Ze,Ua=Pn+Ze;if(Oe=Oe&&this.isOffscreen(Ki,so,Na,Ua),Ce=Ce||this.isInsideGrid(Ki,so,Na,Ua),!n&&this.grid.hitTestCircle(fn,Pn,Ze,J)&&(Pe=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!D&&Pe||!Ce?[]:se,offscreen:Oe,collisionDetected:Pe}},$i.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,u=1/0,m=-1/0,w=-1/0,E=0,I=n;E<I.length;E+=1){var D=I[E],U=new a.Point(D.x+100,D.y+100);o=Math.min(o,U.x),u=Math.min(u,U.y),m=Math.max(m,U.x),w=Math.max(w,U.y),s.push(U)}for(var J={},Y={},Q=0,se=this.grid.query(o,u,m,w).concat(this.ignoredGrid.query(o,u,m,w));Q<se.length;Q+=1){var ae=se[Q],pe=ae.key;if(J[pe.bucketInstanceId]===void 0&&(J[pe.bucketInstanceId]={}),!J[pe.bucketInstanceId][pe.featureIndex]){var re=[new a.Point(ae.x1,ae.y1),new a.Point(ae.x2,ae.y1),new a.Point(ae.x2,ae.y2),new a.Point(ae.x1,ae.y2)];a.polygonIntersectsPolygon(s,re)&&(J[pe.bucketInstanceId][pe.featureIndex]=!0,Y[pe.bucketInstanceId]===void 0&&(Y[pe.bucketInstanceId]=[]),Y[pe.bucketInstanceId].push(pe.featureIndex))}}return Y},$i.prototype.insertCollisionBox=function(n,s,o,u,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:u,collisionGroupID:m},n[0],n[1],n[2],n[3])},$i.prototype.insertCollisionCircles=function(n,s,o,u,m){for(var w=s?this.ignoredGrid:this.grid,E={bucketInstanceId:o,featureIndex:u,collisionGroupID:m},I=0;I<n.length;I+=4)w.insertCircle(E,n[I],n[I+1],n[I+2])},$i.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var u=[s,o,0,1];return Nr(u,u,n),{point:new a.Point((u[0]/u[3]+1)/2*this.transform.width+100,(-u[1]/u[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/u[3]*.5}},$i.prototype.isOffscreen=function(n,s,o,u){return o<100||n>=this.screenRightBoundary||u<100||s>this.screenBottomBoundary},$i.prototype.isInsideGrid=function(n,s,o,u){return o>=0&&n<this.gridRightBoundary&&u>=0&&s<this.gridBottomBoundary},$i.prototype.getViewportMatrix=function(){var n=a.identity([]);return a.translate(n,n,[-100,-100,0]),n};var ri=function(n,s,o,u){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):u&&o?1:0,this.placed=o};ri.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var zi=function(n,s,o,u,m){this.text=new ri(n?n.text:null,s,o,m),this.icon=new ri(n?n.icon:null,s,u,m)};zi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ks=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Ni=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},Vn=function(n,s,o,u,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=u,this.tileID=m},Kr=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Ur(n,s,o,u,m){var w=a.getAnchorAlignment(n),E=-(w.horizontalAlign-.5)*s,I=-(w.verticalAlign-.5)*o,D=a.evaluateVariableOffset(n,u);return new a.Point(E+D[0]*m,I+D[1]*m)}function mi(n,s,o,u,m,w){var E=n.x1,I=n.x2,D=n.y1,U=n.y2,J=n.anchorPointX,Y=n.anchorPointY,Q=new a.Point(s,o);return u&&Q._rotate(m?w:-w),{x1:E+Q.x,y1:D+Q.y,x2:I+Q.x,y2:U+Q.y,anchorPointX:J,anchorPointY:Y}}Kr.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var ii=function(n,s,o,u){this.transform=n.clone(),this.collisionIndex=new $i(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Kr(o),this.collisionCircleArrays={},this.prevPlacement=u,u&&(u.prevPlacement=void 0),this.placedOrientations={}};function Ja(n,s,o,u,m){n.emplaceBack(s?1:0,o?1:0,u||0,m||0),n.emplaceBack(s?1:0,o?1:0,u||0,m||0),n.emplaceBack(s?1:0,o?1:0,u||0,m||0),n.emplaceBack(s?1:0,o?1:0,u||0,m||0)}ii.prototype.getBucketParts=function(n,s,o,u){var m=o.getBucket(s),w=o.latestFeatureIndex;if(m&&w&&s.id===m.layerIds[0]){var E=o.collisionBoxArray,I=m.layers[0].layout,D=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),U=o.tileSize/a.EXTENT,J=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),Y=I.get("text-pitch-alignment")==="map",Q=I.get("text-rotation-alignment")==="map",se=gr(o,1,this.transform.zoom),ae=dr(J,Y,Q,this.transform,se),pe=null;if(Y){var re=or(J,Y,Q,this.transform,se);pe=a.multiply([],this.transform.labelPlaneMatrix,re)}this.retainedQueryData[m.bucketInstanceId]=new Vn(m.bucketInstanceId,w,m.sourceLayerIndex,m.index,o.tileID);var fe={bucket:m,layout:I,posMatrix:J,textLabelPlaneMatrix:ae,labelToScreenMatrix:pe,scale:D,textPixelRatio:U,holdingForFade:o.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(u)for(var _e=0,Ee=m.sortKeyRanges;_e<Ee.length;_e+=1){var Pe=Ee[_e];n.push({sortKey:Pe.sortKey,symbolInstanceStart:Pe.symbolInstanceStart,symbolInstanceEnd:Pe.symbolInstanceEnd,parameters:fe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:fe})}},ii.prototype.attemptAnchorPlacement=function(n,s,o,u,m,w,E,I,D,U,J,Y,Q,se,ae){var pe,re=[Y.textOffset0,Y.textOffset1],fe=Ur(n,o,u,re,m),_e=this.collisionIndex.placeCollisionBox(mi(s,fe.x,fe.y,w,E,this.transform.angle),J,I,D,U.predicate);if(!ae||this.collisionIndex.placeCollisionBox(mi(ae,fe.x,fe.y,w,E,this.transform.angle),J,I,D,U.predicate).box.length!==0)return _e.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(pe=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),this.variableOffsets[Y.crossTileID]={textOffset:re,width:o,height:u,anchor:n,textBoxScale:m,prevAnchor:pe},this.markUsedJustification(Q,n,Y,se),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,se,Y),this.placedOrientations[Y.crossTileID]=se),{shift:fe,placedGlyphBoxes:_e}):void 0},ii.prototype.placeLayerBucketPart=function(n,s,o){var u=this,m=n.parameters,w=m.bucket,E=m.layout,I=m.posMatrix,D=m.textLabelPlaneMatrix,U=m.labelToScreenMatrix,J=m.textPixelRatio,Y=m.holdingForFade,Q=m.collisionBoxArray,se=m.partiallyEvaluatedTextSize,ae=m.collisionGroup,pe=E.get("text-optional"),re=E.get("icon-optional"),fe=E.get("text-allow-overlap"),_e=E.get("icon-allow-overlap"),Ee=E.get("text-rotation-alignment")==="map",Pe=E.get("text-pitch-alignment")==="map",Ce=E.get("icon-text-fit")!=="none",Oe=E.get("symbol-z-order")==="viewport-y",Ze=fe&&(_e||!w.hasIconData()||re),We=_e&&(fe||!w.hasTextData()||pe);!w.collisionArrays&&Q&&w.deserializeCollisionBoxes(Q);var He=function(at,Ut){if(!s[at.crossTileID])if(Y)u.placements[at.crossTileID]=new ks(!1,!1,!1);else{var Gt,qt=!1,Ft=!1,Zt=!0,Mt=null,Rt={box:null,offscreen:null},nn={box:null,offscreen:null},Mi=null,va=null,Zn=0,ai=0,fn=0;Ut.textFeatureIndex?Zn=Ut.textFeatureIndex:at.useRuntimeCollisionCircles&&(Zn=at.featureIndex),Ut.verticalTextFeatureIndex&&(ai=Ut.verticalTextFeatureIndex);var Pn=Ut.textBox;if(Pn){var Ki=function(fr){var go=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!fr&&u.prevPlacement){var Gn=u.prevPlacement.placedOrientations[at.crossTileID];Gn&&(u.placedOrientations[at.crossTileID]=Gn,u.markUsedOrientation(w,go=Gn,at))}return go},so=function(fr,go){if(w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&Ut.verticalTextBox)for(var Gn=0,$l=w.writingModes;Gn<$l.length&&($l[Gn]===a.WritingMode.vertical?(Rt=go(),nn=Rt):Rt=fr(),!(Rt&&Rt.box&&Rt.box.length));Gn+=1);else Rt=fr()};if(E.get("text-variable-anchor")){var Na=E.get("text-variable-anchor");if(u.prevPlacement&&u.prevPlacement.variableOffsets[at.crossTileID]){var Ua=u.prevPlacement.variableOffsets[at.crossTileID];Na.indexOf(Ua.anchor)>0&&(Na=Na.filter(function(fr){return fr!==Ua.anchor})).unshift(Ua.anchor)}var ys=function(fr,go,Gn){for(var $l=fr.x2-fr.x1,Wc=fr.y2-fr.y1,Js=at.textBoxScale,eu=Ce&&!_e?go:null,tu={box:[],offscreen:!1},Cl=fe?2*Na.length:Na.length,Ys=0;Ys<Cl;++Ys){var Eu=u.attemptAnchorPlacement(Na[Ys%Na.length],fr,$l,Wc,Js,Ee,Pe,J,I,ae,Ys>=Na.length,at,w,Gn,eu);if(Eu&&(tu=Eu.placedGlyphBoxes)&&tu.box&&tu.box.length){qt=!0,Mt=Eu.shift;break}}return tu};so(function(){return ys(Pn,Ut.iconBox,a.WritingMode.horizontal)},function(){var fr=Ut.verticalTextBox;return w.allowVerticalPlacement&&!(Rt&&Rt.box&&Rt.box.length)&&at.numVerticalGlyphVertices>0&&fr?ys(fr,Ut.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Rt&&(qt=Rt.box,Zt=Rt.offscreen);var Yl=Ki(Rt&&Rt.box);if(!qt&&u.prevPlacement){var gs=u.prevPlacement.variableOffsets[at.crossTileID];gs&&(u.variableOffsets[at.crossTileID]=gs,u.markUsedJustification(w,gs.anchor,at,Yl))}}else{var Oo=function(fr,go){var Gn=u.collisionIndex.placeCollisionBox(fr,fe,J,I,ae.predicate);return Gn&&Gn.box&&Gn.box.length&&(u.markUsedOrientation(w,go,at),u.placedOrientations[at.crossTileID]=go),Gn};so(function(){return Oo(Pn,a.WritingMode.horizontal)},function(){var fr=Ut.verticalTextBox;return w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&fr?Oo(fr,a.WritingMode.vertical):{box:null,offscreen:null}}),Ki(Rt&&Rt.box&&Rt.box.length)}}if(qt=(Gt=Rt)&&Gt.box&&Gt.box.length>0,Zt=Gt&&Gt.offscreen,at.useRuntimeCollisionCircles){var Pl=w.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex),Fs=a.evaluateSizeForFeature(w.textSizeData,se,Pl),Fo=E.get("text-padding");Mi=u.collisionIndex.placeCollisionCircles(fe,Pl,w.lineVertexArray,w.glyphOffsetArray,Fs,I,D,U,o,Pe,ae.predicate,at.collisionCircleDiameter,Fo),qt=fe||Mi.circles.length>0&&!Mi.collisionDetected,Zt=Zt&&Mi.offscreen}if(Ut.iconFeatureIndex&&(fn=Ut.iconFeatureIndex),Ut.iconBox){var Ql=function(fr){var go=Ce&&Mt?mi(fr,Mt.x,Mt.y,Ee,Pe,u.transform.angle):fr;return u.collisionIndex.placeCollisionBox(go,_e,J,I,ae.predicate)};Ft=nn&&nn.box&&nn.box.length&&Ut.verticalIconBox?(va=Ql(Ut.verticalIconBox)).box.length>0:(va=Ql(Ut.iconBox)).box.length>0,Zt=Zt&&va.offscreen}var _s=pe||at.numHorizontalGlyphVertices===0&&at.numVerticalGlyphVertices===0,Hi=re||at.numIconVertices===0;if(_s||Hi?Hi?_s||(Ft=Ft&&qt):qt=Ft&&qt:Ft=qt=Ft&&qt,qt&&Gt&&Gt.box&&u.collisionIndex.insertCollisionBox(Gt.box,E.get("text-ignore-placement"),w.bucketInstanceId,nn&&nn.box&&ai?ai:Zn,ae.ID),Ft&&va&&u.collisionIndex.insertCollisionBox(va.box,E.get("icon-ignore-placement"),w.bucketInstanceId,fn,ae.ID),Mi&&(qt&&u.collisionIndex.insertCollisionCircles(Mi.circles,E.get("text-ignore-placement"),w.bucketInstanceId,Zn,ae.ID),o)){var Vs=w.bucketInstanceId,ja=u.collisionCircleArrays[Vs];ja===void 0&&(ja=u.collisionCircleArrays[Vs]=new Ni);for(var Ma=0;Ma<Mi.circles.length;Ma+=4)ja.circles.push(Mi.circles[Ma+0]),ja.circles.push(Mi.circles[Ma+1]),ja.circles.push(Mi.circles[Ma+2]),ja.circles.push(Mi.collisionDetected?1:0)}u.placements[at.crossTileID]=new ks(qt||Ze,Ft||We,Zt||w.justReloaded),s[at.crossTileID]=!0}};if(Oe)for(var ut=w.getSortedSymbolIndexes(this.transform.angle),St=ut.length-1;St>=0;--St){var dt=ut[St];He(w.symbolInstances.get(dt),w.collisionArrays[dt])}else for(var _t=n.symbolInstanceStart;_t<n.symbolInstanceEnd;_t++)He(w.symbolInstances.get(_t),w.collisionArrays[_t]);if(o&&w.bucketInstanceId in this.collisionCircleArrays){var er=this.collisionCircleArrays[w.bucketInstanceId];a.invert(er.invProjMatrix,I),er.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},ii.prototype.markUsedJustification=function(n,s,o,u){var m;m=u===a.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];for(var w=0,E=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var I=E[w];I>=0&&(n.text.placedSymbolArray.get(I).crossTileID=m>=0&&I!==m?0:o.crossTileID)}},ii.prototype.markUsedOrientation=function(n,s,o){for(var u=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,m=s===a.WritingMode.vertical?s:0,w=0,E=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];w<E.length;w+=1)n.text.placedSymbolArray.get(E[w]).placedOrientation=u;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=m)},ii.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var u=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},w=s?s.variableOffsets:{},E=s?s.placedOrientations:{};for(var I in this.placements){var D=this.placements[I],U=m[I];U?(this.opacities[I]=new zi(U,u,D.text,D.icon),o=o||D.text!==U.text.placed||D.icon!==U.icon.placed):(this.opacities[I]=new zi(null,u,D.text,D.icon,D.skipFade),o=o||D.text||D.icon)}for(var J in m){var Y=m[J];if(!this.opacities[J]){var Q=new zi(Y,u,!1,!1);Q.isHidden()||(this.opacities[J]=Q,o=o||Y.text.placed||Y.icon.placed)}}for(var se in w)this.variableOffsets[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.variableOffsets[se]=w[se]);for(var ae in E)this.placedOrientations[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.placedOrientations[ae]=E[ae]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},ii.prototype.updateLayerOpacities=function(n,s){for(var o={},u=0,m=s;u<m.length;u+=1){var w=m[u],E=w.getBucket(n);E&&w.latestFeatureIndex&&n.id===E.layerIds[0]&&this.updateBucketOpacities(E,o,w.collisionBoxArray)}},ii.prototype.updateBucketOpacities=function(n,s,o){var u=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,w=new zi(null,0,!1,!1,!0),E=m.get("text-allow-overlap"),I=m.get("icon-allow-overlap"),D=m.get("text-variable-anchor"),U=m.get("text-rotation-alignment")==="map",J=m.get("text-pitch-alignment")==="map",Y=m.get("icon-text-fit")!=="none",Q=new zi(null,0,E&&(I||!n.hasIconData()||m.get("icon-optional")),I&&(E||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var se=function(fe,_e,Ee){for(var Pe=0;Pe<_e/4;Pe++)fe.opacityVertexArray.emplaceBack(Ee)},ae=function(fe){var _e=n.symbolInstances.get(fe),Ee=_e.numHorizontalGlyphVertices,Pe=_e.numVerticalGlyphVertices,Ce=_e.crossTileID,Oe=u.opacities[Ce];s[Ce]?Oe=w:Oe||(u.opacities[Ce]=Oe=Q),s[Ce]=!0;var Ze=_e.numIconVertices>0,We=u.placedOrientations[_e.crossTileID],He=We===a.WritingMode.vertical,ut=We===a.WritingMode.horizontal||We===a.WritingMode.horizontalOnly;if(Ee>0||Pe>0){var St=co(Oe.text);se(n.text,Ee,He?$n:St),se(n.text,Pe,ut?$n:St);var dt=Oe.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(function(Rt){Rt>=0&&(n.text.placedSymbolArray.get(Rt).hidden=dt||He?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=dt||ut?1:0);var _t=u.variableOffsets[_e.crossTileID];_t&&u.markUsedJustification(n,_t.anchor,_e,We);var er=u.placedOrientations[_e.crossTileID];er&&(u.markUsedJustification(n,"left",_e,er),u.markUsedOrientation(n,er,_e))}if(Ze){var at=co(Oe.icon),Ut=!(Y&&_e.verticalPlacedIconSymbolIndex&&He);_e.placedIconSymbolIndex>=0&&(se(n.icon,_e.numIconVertices,Ut?at:$n),n.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(se(n.icon,_e.numVerticalIconVertices,Ut?$n:at),n.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Gt=n.collisionArrays[fe];if(Gt){var qt=new a.Point(0,0);if(Gt.textBox||Gt.verticalTextBox){var Ft=!0;if(D){var Zt=u.variableOffsets[Ce];Zt?(qt=Ur(Zt.anchor,Zt.width,Zt.height,Zt.textOffset,Zt.textBoxScale),U&&qt._rotate(J?u.transform.angle:-u.transform.angle)):Ft=!1}Gt.textBox&&Ja(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Ft||He,qt.x,qt.y),Gt.verticalTextBox&&Ja(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Ft||ut,qt.x,qt.y)}var Mt=Boolean(!ut&&Gt.verticalIconBox);Gt.iconBox&&Ja(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Mt,Y?qt.x:0,Y?qt.y:0),Gt.verticalIconBox&&Ja(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Mt,Y?qt.x:0,Y?qt.y:0)}}},pe=0;pe<n.symbolInstances.length;pe++)ae(pe);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var re=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=re.invProjMatrix,n.placementViewportMatrix=re.viewportMatrix,n.collisionCircleArray=re.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},ii.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ii.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},ii.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},ii.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},ii.prototype.setStale=function(){this.stale=!0};var wa=Math.pow(2,25),jl=Math.pow(2,24),Ko=Math.pow(2,17),Tn=Math.pow(2,16),Mn=Math.pow(2,9),Ea=Math.pow(2,8),Sa=Math.pow(2,1);function co(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*wa+s*jl+o*Ko+s*Tn+o*Mn+s*Ea+o*Sa+s}var $n=0,js=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};js.prototype.continuePlacement=function(n,s,o,u,m){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,u,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,I){return E.sortKey-I.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,m())return!0;return!1};var Ho=function(n,s,o,u,m,w,E){this.placement=new ii(n,m,w,E),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=u,this._done=!1};Ho.prototype.isDone=function(){return this._done},Ho.prototype.continuePlacement=function(n,s,o){for(var u=this,m=a.browser.now(),w=function(){var D=a.browser.now()-m;return!u._forceFullPlacement&&D>2};this._currentPlacementIndex>=0;){var E=s[n[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=I)&&(!E.maxzoom||E.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new js(E)),this._inProgressLayer.continuePlacement(o[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ho.prototype.commit=function(n){return this.placement.commit(n),this.placement};var Eo=512/a.EXTENT/2,Pi=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var u=0;u<s.length;u++){var m=s.get(u),w=m.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};Pi.prototype.getScaledCoordinates=function(n,s){var o=Eo/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*a.EXTENT+n.anchorY)*o)}},Pi.prototype.findMatches=function(n,s,o){for(var u=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var w=n.get(m);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var I=this.getScaledCoordinates(w,s),D=0,U=E;D<U.length;D+=1){var J=U[D];if(Math.abs(J.coord.x-I.x)<=u&&Math.abs(J.coord.y-I.y)<=u&&!o[J.crossTileID]){o[J.crossTileID]=!0,w.crossTileID=J.crossTileID;break}}}}};var Si=function(){this.maxCrossTileID=0};Si.prototype.generate=function(){return++this.maxCrossTileID};var en=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};en.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var u=this.indexes[o],m={};for(var w in u){var E=u[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+s),m[E.tileID.key]=E}this.indexes[o]=m}this.lng=n},en.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var u=0;u<s.symbolInstances.length;u++)s.symbolInstances.get(u).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>n.overscaledZ)for(var I in E){var D=E[I];D.tileID.isChildOf(n)&&D.findMatches(s.symbolInstances,n,m)}else{var U=E[n.scaledTo(Number(w)).key];U&&U.findMatches(s.symbolInstances,n,m)}}for(var J=0;J<s.symbolInstances.length;J++){var Y=s.symbolInstances.get(J);Y.crossTileID||(Y.crossTileID=o.generate(),m[Y.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Pi(n,s.symbolInstances,s.bucketInstanceId),!0},en.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var u=0,m=s.indexedSymbolInstances[o];u<m.length;u+=1)delete this.usedCrossTileIDs[n][m[u].crossTileID]},en.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var u=this.indexes[o];for(var m in u)n[u[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,u[m]),delete u[m],s=!0)}return s};var xe=function(){this.layerIndexes={},this.crossTileIDs=new Si,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};xe.prototype.addLayer=function(n,s,o){var u=this.layerIndexes[n.id];u===void 0&&(u=this.layerIndexes[n.id]=new en);var m=!1,w={};u.handleWrapJump(o);for(var E=0,I=s;E<I.length;E+=1){var D=I[E],U=D.getBucket(n);U&&n.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(D.tileID,U,this.crossTileIDs)&&(m=!0),w[U.bucketInstanceId]=!0)}return u.removeStaleBuckets(w)&&(m=!0),m},xe.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(u){s[u]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var Ui=function(n,s){return a.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},An=a.pick(Qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),kr=a.pick(Qe,["setCenter","setZoom","setBearing","setPitch"]),ea=function(){var n={},s=a.styleSpec.$version;for(var o in a.styleSpec.$root){var u,m=a.styleSpec.$root[o];m.required&&(u=o==="version"?s:m.type==="array"?[]:{})!=null&&(n[o]=u)}return n}(),yi=function(n){function s(o,u){var m=this;u===void 0&&(u={}),n.call(this),this.map=o,this.dispatcher=new Er(Me(),this),this.imageManager=new Ne,this.imageManager.setEventedParent(this),this.glyphManager=new Wt(o._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Bt(256,512),this.crossTileSymbolIndex=new xe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(I,D){if(a.triggerPluginCompletionEvent(I),D&&D.every(function(J){return J}))for(var U in w.sourceCaches)w.sourceCaches[U].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var I=m.sourceCaches[E.sourceId];if(I){var D=I.getSource();if(D&&D.vectorLayerIds)for(var U in m._layers){var J=m._layers[U];J.source===D.id&&m._validateLayer(J)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,u){var m=this;u===void 0&&(u={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var w=typeof u.validate=="boolean"?u.validate:!a.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,u.accessToken);var E=this.map._requestManager.transformRequest(o,a.ResourceType.Style);this._request=a.getJSON(E,function(I,D){m._request=null,I?m.fire(new a.ErrorEvent(I)):D&&m._load(D,w)})},s.prototype.loadJSON=function(o,u){var m=this;u===void 0&&(u={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){m._request=null,m._load(o,u.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ea,!1)},s.prototype._load=function(o,u){if(!u||!Ui(this,a.validateStyle(o))){for(var m in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(m,o.sources[m],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var w=Ke(this.stylesheet.layers);this._order=w.map(function(U){return U.id}),this._layers={},this._serializedLayers={};for(var E=0,I=w;E<I.length;E+=1){var D=I[E];(D=a.createStyleLayer(D)).setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new vr(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},s.prototype._loadSprite=function(o){var u=this;this._spriteRequest=function(m,w,E){var I,D,U,J=a.browser.devicePixelRatio>1?"@2x":"",Y=a.getJSON(w.transformRequest(w.normalizeSpriteURL(m,J,".json"),a.ResourceType.SpriteJSON),function(ae,pe){Y=null,U||(U=ae,I=pe,se())}),Q=a.getImage(w.transformRequest(w.normalizeSpriteURL(m,J,".png"),a.ResourceType.SpriteImage),function(ae,pe){Q=null,U||(U=ae,D=pe,se())});function se(){if(U)E(U);else if(I&&D){var ae=a.browser.getImageData(D),pe={};for(var re in I){var fe=I[re],_e=fe.width,Ee=fe.height,Pe=fe.x,Ce=fe.y,Oe=fe.sdf,Ze=fe.pixelRatio,We=fe.stretchX,He=fe.stretchY,ut=fe.content,St=new a.RGBAImage({width:_e,height:Ee});a.RGBAImage.copy(ae,St,{x:Pe,y:Ce},{x:0,y:0},{width:_e,height:Ee}),pe[re]={data:St,pixelRatio:Ze,sdf:Oe,stretchX:We,stretchY:He,content:ut}}E(null,pe)}}return{cancel:function(){Y&&(Y.cancel(),Y=null),Q&&(Q.cancel(),Q=null)}}}(o,this.map._requestManager,function(m,w){if(u._spriteRequest=null,m)u.fire(new a.ErrorEvent(m));else if(w)for(var E in w)u.imageManager.addImage(E,w[E]);u.imageManager.setLoaded(!0),u._availableImages=u.imageManager.listImages(),u.dispatcher.broadcast("setImages",u._availableImages),u.fire(new a.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var u=this.sourceCaches[o.source];if(u){var m=o.sourceLayer;if(m){var w=u.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+w.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var u=[],m=0,w=o;m<w.length;m+=1){var E=this._layers[w[m]];E.type!=="custom"&&u.push(E.serialize())}return u},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var u in this._layers)if(this._layers[u].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var u=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(m.length||w.length)&&this._updateWorkerLayers(m,w),this._updatedSources){var I=this._updatedSources[E];I==="reload"?this._reloadSource(E):I==="clear"&&this._clearSource(E)}for(var D in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[D].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var U={};for(var J in this.sourceCaches){var Y=this.sourceCaches[J];U[J]=Y.used,Y.used=!1}for(var Q=0,se=this._order;Q<se.length;Q+=1){var ae=this._layers[se[Q]];ae.recalculate(o,this._availableImages),!ae.isHidden(o.zoom)&&ae.source&&(this.sourceCaches[ae.source].used=!0)}for(var pe in U){var re=this.sourceCaches[pe];U[pe]!==re.used&&re.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:pe}))}this.light.recalculate(o),this.z=o.zoom,u&&this.fire(new a.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:u})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var u=this;if(this._checkLoaded(),Ui(this,a.validateStyle(o)))return!1;(o=a.clone$1(o)).layers=Ke(o.layers);var m=function(E,I){if(!E)return[{command:Qe.setStyle,args:[I]}];var D=[];try{if(!a.deepEqual(E.version,I.version))return[{command:Qe.setStyle,args:[I]}];a.deepEqual(E.center,I.center)||D.push({command:Qe.setCenter,args:[I.center]}),a.deepEqual(E.zoom,I.zoom)||D.push({command:Qe.setZoom,args:[I.zoom]}),a.deepEqual(E.bearing,I.bearing)||D.push({command:Qe.setBearing,args:[I.bearing]}),a.deepEqual(E.pitch,I.pitch)||D.push({command:Qe.setPitch,args:[I.pitch]}),a.deepEqual(E.sprite,I.sprite)||D.push({command:Qe.setSprite,args:[I.sprite]}),a.deepEqual(E.glyphs,I.glyphs)||D.push({command:Qe.setGlyphs,args:[I.glyphs]}),a.deepEqual(E.transition,I.transition)||D.push({command:Qe.setTransition,args:[I.transition]}),a.deepEqual(E.light,I.light)||D.push({command:Qe.setLight,args:[I.light]});var U={},J=[];(function(Q,se,ae,pe){var re;for(re in se=se||{},Q=Q||{})Q.hasOwnProperty(re)&&(se.hasOwnProperty(re)||Xe(re,ae,pe));for(re in se)se.hasOwnProperty(re)&&(Q.hasOwnProperty(re)?a.deepEqual(Q[re],se[re])||(Q[re].type==="geojson"&&se[re].type==="geojson"&&sr(Q,se,re)?ae.push({command:Qe.setGeoJSONSourceData,args:[re,se[re].data]}):jt(re,se,ae,pe)):Lt(re,se,ae))})(E.sources,I.sources,J,U);var Y=[];E.layers&&E.layers.forEach(function(Q){U[Q.source]?D.push({command:Qe.removeLayer,args:[Q.id]}):Y.push(Q)}),D=D.concat(J),function(Q,se,ae){se=se||[];var pe,re,fe,_e,Ee,Pe,Ce,Oe=(Q=Q||[]).map(Yt),Ze=se.map(Yt),We=Q.reduce(Vt,{}),He=se.reduce(Vt,{}),ut=Oe.slice(),St=Object.create(null);for(pe=0,re=0;pe<Oe.length;pe++)He.hasOwnProperty(fe=Oe[pe])?re++:(ae.push({command:Qe.removeLayer,args:[fe]}),ut.splice(ut.indexOf(fe,re),1));for(pe=0,re=0;pe<Ze.length;pe++)ut[ut.length-1-pe]!==(fe=Ze[Ze.length-1-pe])&&(We.hasOwnProperty(fe)?(ae.push({command:Qe.removeLayer,args:[fe]}),ut.splice(ut.lastIndexOf(fe,ut.length-re),1)):re++,ae.push({command:Qe.addLayer,args:[He[fe],Pe=ut[ut.length-pe]]}),ut.splice(ut.length-pe,0,fe),St[fe]=!0);for(pe=0;pe<Ze.length;pe++)if(_e=We[fe=Ze[pe]],Ee=He[fe],!St[fe]&&!a.deepEqual(_e,Ee))if(a.deepEqual(_e.source,Ee.source)&&a.deepEqual(_e["source-layer"],Ee["source-layer"])&&a.deepEqual(_e.type,Ee.type)){for(Ce in It(_e.layout,Ee.layout,ae,fe,null,Qe.setLayoutProperty),It(_e.paint,Ee.paint,ae,fe,null,Qe.setPaintProperty),a.deepEqual(_e.filter,Ee.filter)||ae.push({command:Qe.setFilter,args:[fe,Ee.filter]}),a.deepEqual(_e.minzoom,Ee.minzoom)&&a.deepEqual(_e.maxzoom,Ee.maxzoom)||ae.push({command:Qe.setLayerZoomRange,args:[fe,Ee.minzoom,Ee.maxzoom]}),_e)_e.hasOwnProperty(Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?It(_e[Ce],Ee[Ce],ae,fe,Ce.slice(6),Qe.setPaintProperty):a.deepEqual(_e[Ce],Ee[Ce])||ae.push({command:Qe.setLayerProperty,args:[fe,Ce,Ee[Ce]]}));for(Ce in Ee)Ee.hasOwnProperty(Ce)&&!_e.hasOwnProperty(Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?It(_e[Ce],Ee[Ce],ae,fe,Ce.slice(6),Qe.setPaintProperty):a.deepEqual(_e[Ce],Ee[Ce])||ae.push({command:Qe.setLayerProperty,args:[fe,Ce,Ee[Ce]]}))}else ae.push({command:Qe.removeLayer,args:[fe]}),Pe=ut[ut.lastIndexOf(fe)+1],ae.push({command:Qe.addLayer,args:[Ee,Pe]})}(Y,I.layers,D)}catch(Q){console.warn("Unable to compute style diff:",Q),D=[{command:Qe.setStyle,args:[I]}]}return D}(this.serialize(),o).filter(function(E){return!(E.command in kr)});if(m.length===0)return!1;var w=m.filter(function(E){return!(E.command in An)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return m.forEach(function(E){E.command!=="setTransition"&&u[E.command].apply(u,E.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,u){if(this.getImage(o))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,u),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,u){this.imageManager.updateImage(o,u)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,u,m){var w=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!u.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(u).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateStyle.source,"sources."+o,u,null,m))){this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);var E=this.sourceCaches[o]=new te(o,u,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:o}}),E.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var u in this._layers)if(this._layers[u].source===o)return this.fire(new a.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+u+'" is using it.')));var m=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],m.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,u){this._checkLoaded(),this.sourceCaches[o].getSource().setData(u),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,u,m){m===void 0&&(m={}),this._checkLoaded();var w=o.id;if(this.getLayer(w))this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(o.type==="custom"){if(Ui(this,a.validateCustomStyleLayer(o)))return;E=a.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(w,o.source),o=a.clone$1(o),o=a.extend(o,{source:w})),this._validate(a.validateStyle.layer,"layers."+w,o,{arrayIndex:-1},m))return;E=a.createStyleLayer(o),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var I=u?this._order.indexOf(u):this._order.length;if(u&&I===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.')));else{if(this._order.splice(I,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var D=this._removedLayers[w];delete this._removedLayers[w],D.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},s.prototype.moveLayer=function(o,u){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==u){var m=this._order.indexOf(o);this._order.splice(m,1);var w=u?this._order.indexOf(u):this._order.length;u&&w===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.'))):(this._order.splice(w,0,o),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var u=this._layers[o];if(u){u.setEventedParent(null);var m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=u,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],u.onRemove&&u.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,u,m){this._checkLoaded();var w=this.getLayer(o);w?w.minzoom===u&&w.maxzoom===m||(u!=null&&(w.minzoom=u),m!=null&&(w.maxzoom=m),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,u,m){m===void 0&&(m={}),this._checkLoaded();var w=this.getLayer(o);if(w){if(!a.deepEqual(w.filter,u))return u==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,"layers."+w.id+".filter",u,null,m)||(w.filter=a.clone$1(u),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return a.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,u,m,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(o);E?a.deepEqual(E.getLayoutProperty(u),m)||(E.setLayoutProperty(u,m,w),this._updateLayer(E)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,u){var m=this.getLayer(o);if(m)return m.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,u,m,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(o);E?a.deepEqual(E.getPaintProperty(u),m)||(E.setPaintProperty(u,m,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,u){return this.getLayer(o).getPaintProperty(u)},s.prototype.setFeatureState=function(o,u){this._checkLoaded();var m=o.source,w=o.sourceLayer,E=this.sourceCaches[m];if(E!==void 0){var I=E.getSource().type;I==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||w?(o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,o.id,u)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,u){this._checkLoaded();var m=o.source,w=this.sourceCaches[m];if(w!==void 0){var E=w.getSource().type,I=E==="vector"?o.sourceLayer:void 0;E!=="vector"||I?u&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(I,o.id,u):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var u=o.source,m=o.sourceLayer,w=this.sourceCaches[u];if(w!==void 0){if(w.getSource().type!=="vector"||m)return o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(m,o.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+u+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var u=this,m=function(We){return u._layers[We].type==="fill-extrusion"},w={},E=[],I=this._order.length-1;I>=0;I--){var D=this._order[I];if(m(D)){w[D]=I;for(var U=0,J=o;U<J.length;U+=1){var Y=J[U][D];if(Y)for(var Q=0,se=Y;Q<se.length;Q+=1)E.push(se[Q])}}}E.sort(function(We,He){return He.intersectionZ-We.intersectionZ});for(var ae=[],pe=this._order.length-1;pe>=0;pe--){var re=this._order[pe];if(m(re))for(var fe=E.length-1;fe>=0;fe--){var _e=E[fe].feature;if(w[_e.layer.id]<pe)break;ae.push(_e),E.pop()}else for(var Ee=0,Pe=o;Ee<Pe.length;Ee+=1){var Ce=Pe[Ee][re];if(Ce)for(var Oe=0,Ze=Ce;Oe<Ze.length;Oe+=1)ae.push(Ze[Oe].feature)}}return ae},s.prototype.queryRenderedFeatures=function(o,u,m){u&&u.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);var w={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,I=u.layers;E<I.length;E+=1){var D=I[E],U=this._layers[D];if(!U)return this.fire(new a.ErrorEvent(new Error("The layer '"+D+"' does not exist in the map's style and cannot be queried for features."))),[];w[U.source]=!0}}var J=[];for(var Y in u.availableImages=this._availableImages,this.sourceCaches)u.layers&&!w[Y]||J.push($r(this.sourceCaches[Y],this._layers,this._serializedLayers,o,u,m));return this.placement&&J.push(function(Q,se,ae,pe,re,fe,_e){for(var Ee={},Pe=fe.queryRenderedSymbols(pe),Ce=[],Oe=0,Ze=Object.keys(Pe).map(Number);Oe<Ze.length;Oe+=1)Ce.push(_e[Ze[Oe]]);Ce.sort(Xi);for(var We=function(){var _t=ut[He],er=_t.featureIndex.lookupSymbolFeatures(Pe[_t.bucketInstanceId],se,_t.bucketIndex,_t.sourceLayerIndex,re.filter,re.layers,re.availableImages,Q);for(var at in er){var Ut=Ee[at]=Ee[at]||[],Gt=er[at];Gt.sort(function(Zt,Mt){var Rt=_t.featureSortOrder;if(Rt){var nn=Rt.indexOf(Zt.featureIndex);return Rt.indexOf(Mt.featureIndex)-nn}return Mt.featureIndex-Zt.featureIndex});for(var qt=0,Ft=Gt;qt<Ft.length;qt+=1)Ut.push(Ft[qt])}},He=0,ut=Ce;He<ut.length;He+=1)We();var St=function(_t){Ee[_t].forEach(function(er){var at=er.feature,Ut=ae[Q[_t].source].getFeatureState(at.layer["source-layer"],at.id);at.source=at.layer.source,at.layer["source-layer"]&&(at.sourceLayer=at.layer["source-layer"]),at.state=Ut})};for(var dt in Ee)St(dt);return Ee}(this._layers,this._serializedLayers,this.sourceCaches,o,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(J)},s.prototype.querySourceFeatures=function(o,u){u&&u.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);var m=this.sourceCaches[o];return m?function(w,E){for(var I=w.getRenderableIds().map(function(se){return w.getTileByID(se)}),D=[],U={},J=0;J<I.length;J++){var Y=I[J],Q=Y.tileID.canonical.key;U[Q]||(U[Q]=!0,Y.querySourceFeatures(D,E))}return D}(m,u):[]},s.prototype.addSourceType=function(o,u,m){return s.getSourceType(o)?m(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:u.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,u){u===void 0&&(u={}),this._checkLoaded();var m=this.light.getLight(),w=!1;for(var E in o)if(!a.deepEqual(o[E],m[E])){w=!0;break}if(w){var I={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,u),this.light.updateTransitions(I)}},s.prototype._validate=function(o,u,m,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&Ui(this,o.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:m,styleSpec:a.styleSpec},w)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var u in this.sourceCaches)this.sourceCaches[u].clearTiles(),this.sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var u in this.sourceCaches)this.sourceCaches[u].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,u,m,w,E){E===void 0&&(E=!1);for(var I=!1,D=!1,U={},J=0,Y=this._order;J<Y.length;J+=1){var Q=this._layers[Y[J]];if(Q.type==="symbol"){if(!U[Q.source]){var se=this.sourceCaches[Q.source];U[Q.source]=se.getRenderableIds(!0).map(function(_e){return se.getTileByID(_e)}).sort(function(_e,Ee){return Ee.tileID.overscaledZ-_e.tileID.overscaledZ||(_e.tileID.isLessThan(Ee.tileID)?-1:1)})}var ae=this.crossTileSymbolIndex.addLayer(Q,U[Q.source],o.center.lng);I=I||ae}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),o.zoom))&&(this.pauseablePlacement=new Ho(o,this._order,E,u,m,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),D=!0),I&&this.pauseablePlacement.placement.setStale()),D||I)for(var pe=0,re=this._order;pe<re.length;pe+=1){var fe=this._layers[re[pe]];fe.type==="symbol"&&this.placement.updateLayerOpacities(fe,U[fe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();var w=this.sourceCaches[u.source];w&&w.setDependencies(u.tileID.key,u.type,u.icons)},s.prototype.getGlyphs=function(o,u,m){this.glyphManager.getGlyphs(u.stacks,m)},s.prototype.getResource=function(o,u,m){return a.makeRequest(u,m)},s}(a.Evented);yi.getSourceType=function(n){return Ti[n]},yi.setSourceType=function(n,s){Ti[n]=s},yi.registerForPluginStateChange=a.registerForPluginStateChange;var Lr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),ka=Ht(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),rs=Ht(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xo=Ht(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),gu=Ht(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),al=Ht("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),is=Ht(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Wo=Ht(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ia=Ht("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Nn=Ht("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),fa=Ht("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),_u=Ht(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),ns=Ht(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),_n=Ht(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ql=Ht(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),ni=Ht(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),tn=Ht(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Hr=Ht(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Jo=Ht(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ta=Ht(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),da=Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Yo=Ht(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Aa=Ht(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),hn=Ht(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ji=Ht(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),ki=Ht(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),qi=Ht(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ht(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(m):m,I={};return{fragmentSource:n=n.replace(o,function(D,U,J,Y,Q){return I[Q]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
varying `+J+" "+Y+" "+Q+`;
#else
uniform `+J+" "+Y+" u_"+Q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Q+`
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`}),vertexSource:s=s.replace(o,function(D,U,J,Y,Q){var se=Y==="float"?"vec2":"vec4",ae=Q.match(/color/)?"color":se;return I[Q]?U==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+J+" "+se+" a_"+Q+`;
varying `+J+" "+Y+" "+Q+`;
#else
uniform `+J+" "+Y+" u_"+Q+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = a_"+Q+`;
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = unpack_mix_"+ae+"(a_"+Q+", u_"+Q+`_t);
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+J+" "+se+" a_"+Q+`;
#else
uniform `+J+" "+Y+" u_"+Q+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+J+" "+Y+" "+Q+" = a_"+Q+`;
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+J+" "+Y+" "+Q+" = unpack_mix_"+ae+"(a_"+Q+", u_"+Q+`_t);
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`}),staticAttributes:u,staticUniforms:E}}var vn=Object.freeze({__proto__:null,prelude:ka,background:rs,backgroundPattern:Xo,circle:gu,clippingMask:al,heatmap:is,heatmapTexture:Wo,collisionBox:Ia,collisionCircle:Nn,debug:fa,fill:_u,fillOutline:ns,fillOutlinePattern:_n,fillPattern:ql,fillExtrusion:ni,fillExtrusionPattern:tn,hillshadePrepare:Hr,hillshade:Jo,line:Ta,lineGradient:da,linePattern:Yo,lineSDF:Aa,raster:hn,symbolIcon:ji,symbolSDF:ki,symbolTextAndIcon:qi}),So=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function kl(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var u=n[o].split(" ");s.push(u.pop())}return s}So.prototype.bind=function(n,s,o,u,m,w,E,I){this.context=n;for(var D=this.boundPaintVertexBuffers.length!==u.length,U=0;!D&&U<u.length;U++)this.boundPaintVertexBuffers[U]!==u[U]&&(D=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!D&&this.boundIndexBuffer===m&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===I?(n.bindVertexArrayOES.set(this.vao),E&&E.bind(),m&&m.dynamicDraw&&m.bind(),I&&I.bind()):this.freshBind(s,o,u,m,w,E,I)},So.prototype.freshBind=function(n,s,o,u,m,w,E){var I,D=n.numAttributes,U=this.context,J=U.gl;if(U.extVertexArrayObject)this.vao&&this.destroy(),this.vao=U.extVertexArrayObject.createVertexArrayOES(),U.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=u,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{I=U.currentNumAttributes||0;for(var Y=D;Y<I;Y++)J.disableVertexAttribArray(Y)}s.enableAttributes(J,n);for(var Q=0,se=o;Q<se.length;Q+=1)se[Q].enableAttributes(J,n);w&&w.enableAttributes(J,n),E&&E.enableAttributes(J,n),s.bind(),s.setVertexAttribPointers(J,n,m);for(var ae=0,pe=o;ae<pe.length;ae+=1){var re=pe[ae];re.bind(),re.setVertexAttribPointers(J,n,m)}w&&(w.bind(),w.setVertexAttribPointers(J,n,m)),u&&u.bind(),E&&(E.bind(),E.setVertexAttribPointers(J,n,m)),U.currentNumAttributes=D},So.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ya=function(n,s,o,u,m,w){var E=n.gl;this.program=E.createProgram();for(var I=kl(o.staticAttributes),D=u?u.getBinderAttributes():[],U=I.concat(D),J=o.staticUniforms?kl(o.staticUniforms):[],Y=u?u.getBinderUniforms():[],Q=[],se=0,ae=J.concat(Y);se<ae.length;se+=1){var pe=ae[se];Q.indexOf(pe)<0&&Q.push(pe)}var re=u?u.defines():[];w&&re.push("#define OVERDRAW_INSPECTOR;");var fe=re.concat(ka.fragmentSource,o.fragmentSource).join(`
`),_e=re.concat(ka.vertexSource,o.vertexSource).join(`
`),Ee=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ee,fe),E.compileShader(Ee),E.attachShader(this.program,Ee);var Pe=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Pe,_e),E.compileShader(Pe),E.attachShader(this.program,Pe),this.attributes={};var Ce={};this.numAttributes=U.length;for(var Oe=0;Oe<this.numAttributes;Oe++)U[Oe]&&(E.bindAttribLocation(this.program,Oe,U[Oe]),this.attributes[U[Oe]]=Oe);E.linkProgram(this.program),E.deleteShader(Pe),E.deleteShader(Ee);for(var Ze=0;Ze<Q.length;Ze++){var We=Q[Ze];if(We&&!Ce[We]){var He=E.getUniformLocation(this.program,We);He&&(Ce[We]=He)}}this.fixedUniforms=m(n,Ce),this.binderUniforms=u?u.getUniforms(n,Ce):[]}}};function Is(n,s,o){var u=1/gr(o,1,s.transform.tileZoom),m=Math.pow(2,o.tileID.overscaledZ),w=o.tileSize*Math.pow(2,s.transform.tileZoom)/m,E=w*(o.tileID.canonical.x+o.tileID.wrap*m),I=w*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[u,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[E>>16,I>>16],u_pixel_coord_lower:[65535&E,65535&I]}}Ya.prototype.draw=function(n,s,o,u,m,w,E,I,D,U,J,Y,Q,se,ae,pe){var re,fe=n.gl;if(!this.failedToCreate){for(var _e in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(u),n.setColorMode(m),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[_e].set(E[_e]);se&&se.setUniforms(n,this.binderUniforms,Y,{zoom:Q});for(var Ee=(re={},re[fe.LINES]=2,re[fe.TRIANGLES]=3,re[fe.LINE_STRIP]=1,re)[s],Pe=0,Ce=J.get();Pe<Ce.length;Pe+=1){var Oe=Ce[Pe],Ze=Oe.vaos||(Oe.vaos={});(Ze[I]||(Ze[I]=new So)).bind(n,this,D,se?se.getPaintVertexBuffers():[],U,Oe.vertexOffset,ae,pe),fe.drawElements(s,Oe.primitiveLength*Ee,fe.UNSIGNED_SHORT,Oe.primitiveOffset*Ee*2)}}};var Ts=function(n,s,o,u){var m=s.style.light,w=m.properties.get("position"),E=[w.x,w.y,w.z],I=a.create$1();m.properties.get("anchor")==="viewport"&&a.fromRotation(I,-s.transform.angle),a.transformMat3(E,E,I);var D=m.properties.get("color");return{u_matrix:n,u_lightpos:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+o,u_opacity:u}},ta=function(n,s,o,u,m,w,E){return a.extend(Ts(n,s,o,u),Is(w,s,E),{u_height_factor:-Math.pow(2,m.overscaledZ)/E.tileSize/8})},za=function(n){return{u_matrix:n}},Un=function(n,s,o,u){return a.extend(za(n),Is(o,s,u))},Zl=function(n,s){return{u_matrix:n,u_world:s}},ko=function(n,s,o,u,m){return a.extend(Un(n,s,o,u),{u_world:m})},pn=function(n,s,o,u){var m,w,E=n.transform;if(u.paint.get("circle-pitch-alignment")==="map"){var I=gr(o,1,E.zoom);m=!0,w=[I,I]}else m=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:w}},as=function(n,s,o){var u=gr(o,1,s.zoom),m=Math.pow(2,s.zoom-o.tileID.overscaledZ),w=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:u,u_extrude_scale:[s.pixelsToGLUnits[0]/(u*m),s.pixelsToGLUnits[1]/(u*m)],u_overscale_factor:w}},As=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},Dn=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},rn=function(n){return{u_matrix:n}},qs=function(n,s,o,u){return{u_matrix:n,u_extrude_scale:gr(s,1,o),u_intensity:u}},Qa=function(n,s,o){var u=n.transform;return{u_matrix:Ln(n,s,o),u_ratio:1/gr(s,1,u.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]]}},jr=function(n,s,o,u){return a.extend(Qa(n,s,o),{u_image:0,u_image_height:u})},Ve=function(n,s,o,u){var m=n.transform,w=Ci(s,m);return{u_matrix:Ln(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/gr(s,1,m.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[w,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Tt=function(n,s,o,u,m){var w=n.lineAtlas,E=Ci(s,n.transform),I=o.layout.get("line-cap")==="round",D=w.getDash(u.from,I),U=w.getDash(u.to,I),J=D.width*m.fromScale,Y=U.width*m.toScale;return a.extend(Qa(n,s,o),{u_patternscale_a:[E/J,-D.height/2],u_patternscale_b:[E/Y,-U.height/2],u_sdfgamma:w.width/(256*Math.min(J,Y)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:U.y,u_mix:m.t})};function Ci(n,s){return 1/gr(n,1,s.tileZoom)}function Ln(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Zs=function(n,s,o,u,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(E=m.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=m.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:zs(m.paint.get("raster-hue-rotate"))};var w,E};function zs(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var os,Ps=function(n,s,o,u,m,w,E,I,D,U){var J=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:J.width/J.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:I,u_is_text:+D,u_pitch_with_map:+u,u_texsize:U,u_texture:0}},ra=function(n,s,o,u,m,w,E,I,D,U,J){var Y=m.transform;return a.extend(Ps(n,s,o,u,m,w,E,I,D,U),{u_gamma_scale:u?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+J})},Qo=function(n,s,o,u,m,w,E,I,D,U){return a.extend(ra(n,s,o,u,m,w,E,I,!0,D,!0),{u_texsize_icon:U,u_texture_icon:1})},Gs=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},ma=function(n,s,o,u,m,w){return a.extend(function(E,I,D,U){var J=D.imageManager.getPattern(E.from.toString()),Y=D.imageManager.getPattern(E.to.toString()),Q=D.imageManager.getPixelSize(),se=Q.width,ae=Q.height,pe=Math.pow(2,U.tileID.overscaledZ),re=U.tileSize*Math.pow(2,D.transform.tileZoom)/pe,fe=re*(U.tileID.canonical.x+U.tileID.wrap*pe),_e=re*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[se,ae],u_mix:I.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/gr(U,1,D.transform.tileZoom),u_pixel_coord_upper:[fe>>16,_e>>16],u_pixel_coord_lower:[65535&fe,65535&_e]}}(u,w,o,m),{u_matrix:n,u_opacity:s})},ol={fillExtrusion:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new a.Uniform1f(n,s.u_height_factor),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new a.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new a.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new a.UniformColor(n,s.u_color),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_overlay:new a.Uniform1i(n,s.u_overlay),u_overlay_scale:new a.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new a.Uniform1f(n,s.u_extrude_scale),u_intensity:new a.Uniform1f(n,s.u_intensity),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_color_ramp:new a.Uniform1i(n,s.u_color_ramp),u_opacity:new a.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_latrange:new a.Uniform2f(n,s.u_latrange),u_light:new a.Uniform2f(n,s.u_light),u_shadow:new a.UniformColor(n,s.u_shadow),u_highlight:new a.UniformColor(n,s.u_highlight),u_accent:new a.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_dimension:new a.Uniform2f(n,s.u_dimension),u_zoom:new a.Uniform1f(n,s.u_zoom),u_unpack:new a.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_image:new a.Uniform1i(n,s.u_image),u_image_height:new a.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_texsize:new a.Uniform2f(n,s.u_texsize),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_image:new a.Uniform1i(n,s.u_image),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new a.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new a.Uniform1f(n,s.u_sdfgamma),u_image:new a.Uniform1i(n,s.u_image),u_tex_y_a:new a.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new a.Uniform1f(n,s.u_tex_y_b),u_mix:new a.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new a.Uniform2f(n,s.u_tl_parent),u_scale_parent:new a.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new a.Uniform1f(n,s.u_buffer_scale),u_fade_t:new a.Uniform1f(n,s.u_fade_t),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image0:new a.Uniform1i(n,s.u_image0),u_image1:new a.Uniform1i(n,s.u_image1),u_brightness_low:new a.Uniform1f(n,s.u_brightness_low),u_brightness_high:new a.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new a.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new a.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new a.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texsize_icon:new a.Uniform2f(n,s.u_texsize_icon),u_texture:new a.Uniform1i(n,s.u_texture),u_texture_icon:new a.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_color:new a.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image:new a.Uniform1i(n,s.u_image),u_pattern_tl_a:new a.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(n,s.u_pattern_br_b),u_texsize:new a.Uniform2f(n,s.u_texsize),u_mix:new a.Uniform1f(n,s.u_mix),u_pattern_size_a:new a.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new a.Uniform1f(n,s.u_scale_a),u_scale_b:new a.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(n,s.u_tile_units_to_pixels)}}};function Cs(n,s,o,u,m,w,E){for(var I=n.context,D=I.gl,U=n.useProgram("collisionBox"),J=[],Y=0,Q=0,se=0;se<u.length;se++){var ae=u[se],pe=s.getTile(ae),re=pe.getBucket(o);if(re){var fe=ae.posMatrix;m[0]===0&&m[1]===0||(fe=n.translatePosMatrix(ae.posMatrix,pe,m,w));var _e=E?re.textCollisionBox:re.iconCollisionBox,Ee=re.collisionCircleArray;if(Ee.length>0){var Pe=a.create(),Ce=fe;a.mul(Pe,re.placementInvProjMatrix,n.transform.glCoordMatrix),a.mul(Pe,Pe,re.placementViewportMatrix),J.push({circleArray:Ee,circleOffset:Q,transform:Ce,invTransform:Pe}),Q=Y+=Ee.length/4}_e&&U.draw(I,D.LINES,$.disabled,ie.disabled,n.colorModeForRenderPass(),ge.disabled,as(fe,n.transform,pe),o.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,n.transform.zoom,null,null,_e.collisionVertexBuffer)}}if(E&&J.length){var Oe=n.useProgram("collisionCircle"),Ze=new a.StructArrayLayout2f1f2i16;Ze.resize(4*Y),Ze._trim();for(var We=0,He=0,ut=J;He<ut.length;He+=1)for(var St=ut[He],dt=0;dt<St.circleArray.length/4;dt++){var _t=4*dt,er=St.circleArray[_t+0],at=St.circleArray[_t+1],Ut=St.circleArray[_t+2],Gt=St.circleArray[_t+3];Ze.emplace(We++,er,at,Ut,Gt,0),Ze.emplace(We++,er,at,Ut,Gt,1),Ze.emplace(We++,er,at,Ut,Gt,2),Ze.emplace(We++,er,at,Ut,Gt,3)}(!os||os.length<2*Y)&&(os=function(Mi){var va=2*Mi,Zn=new a.StructArrayLayout3ui6;Zn.resize(va),Zn._trim();for(var ai=0;ai<va;ai++){var fn=6*ai;Zn.uint16[fn+0]=4*ai+0,Zn.uint16[fn+1]=4*ai+1,Zn.uint16[fn+2]=4*ai+2,Zn.uint16[fn+3]=4*ai+2,Zn.uint16[fn+4]=4*ai+3,Zn.uint16[fn+5]=4*ai+0}return Zn}(Y));for(var qt=I.createIndexBuffer(os,!0),Ft=I.createVertexBuffer(Ze,a.collisionCircleLayout.members,!0),Zt=0,Mt=J;Zt<Mt.length;Zt+=1){var Rt=Mt[Zt],nn=As(Rt.transform,Rt.invTransform,n.transform);Oe.draw(I,D.TRIANGLES,$.disabled,ie.disabled,n.colorModeForRenderPass(),ge.disabled,nn,o.id,Ft,qt,a.SegmentVector.simpleSegment(0,2*Rt.circleOffset,Rt.circleArray.length,Rt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Ft.destroy(),qt.destroy()}}var $a=a.identity(new Float32Array(16));function eo(n,s,o,u,m,w){var E=a.getAnchorAlignment(n),I=-(E.horizontalAlign-.5)*s,D=-(E.verticalAlign-.5)*o,U=a.evaluateVariableOffset(n,u);return new a.Point((I/m+U[0])*w,(D/m+U[1])*w)}function Ms(n,s,o,u,m,w,E,I,D,U,J){var Y=n.text.placedSymbolArray,Q=n.text.dynamicLayoutVertexArray,se=n.icon.dynamicLayoutVertexArray,ae={};Q.clear();for(var pe=0;pe<Y.length;pe++){var re=Y.get(pe),fe=re.hidden||!re.crossTileID||n.allowVerticalPlacement&&!re.placedOrientation?null:u[re.crossTileID];if(fe){var _e=new a.Point(re.anchorX,re.anchorY),Ee=Kt(_e,o?I:E),Pe=tr(w.cameraToCenterDistance,Ee.signedDistanceFromCamera),Ce=m.evaluateSizeForFeature(n.textSizeData,U,re)*Pe/a.ONE_EM;o&&(Ce*=n.tilePixelRatio/D);for(var Oe=eo(fe.anchor,fe.width,fe.height,fe.textOffset,fe.textBoxScale,Ce),Ze=o?Kt(_e.add(Oe),E).point:Ee.point.add(s?Oe.rotate(-w.angle):Oe),We=n.allowVerticalPlacement&&re.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,He=0;He<re.numGlyphs;He++)a.addDynamicAttributes(Q,Ze,We);J&&re.associatedIconIndex>=0&&(ae[re.associatedIconIndex]={shiftedAnchor:Ze,angle:We})}else Qi(re.numGlyphs,Q)}if(J){se.clear();for(var ut=n.icon.placedSymbolArray,St=0;St<ut.length;St++){var dt=ut.get(St);if(dt.hidden)Qi(dt.numGlyphs,se);else{var _t=ae[St];if(_t)for(var er=0;er<dt.numGlyphs;er++)a.addDynamicAttributes(se,_t.shiftedAnchor,_t.angle);else Qi(dt.numGlyphs,se)}}n.icon.dynamicLayoutVertexBuffer.updateData(se)}n.text.dynamicLayoutVertexBuffer.updateData(Q)}function Io(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function gi(n,s,o,u,m,w,E,I,D,U,J,Y){for(var Q=n.context,se=Q.gl,ae=n.transform,pe=I==="map",re=D==="map",fe=pe&&o.layout.get("symbol-placement")!=="point",_e=pe&&!re&&!fe,Ee=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Pe=!1,Ce=n.depthModeForSublayer(0,$.ReadOnly),Oe=o.layout.get("text-variable-anchor"),Ze=[],We=0,He=u;We<He.length;We+=1){var ut=He[We],St=s.getTile(ut),dt=St.getBucket(o);if(dt){var _t=m?dt.text:dt.icon;if(_t&&_t.segments.get().length){var er=_t.programConfigurations.get(o.id),at=m||dt.sdfIcons,Ut=m?dt.textSizeData:dt.iconSizeData,Gt=re||ae.pitch!==0,qt=n.useProgram(Io(at,m,dt),er),Ft=a.evaluateSizeForZoom(Ut,ae.zoom),Zt=void 0,Mt=[0,0],Rt=void 0,nn=void 0,Mi=null,va=void 0;if(m)Rt=St.glyphAtlasTexture,nn=se.LINEAR,Zt=St.glyphAtlasTexture.size,dt.iconsInText&&(Mt=St.imageAtlasTexture.size,Mi=St.imageAtlasTexture,va=Gt||n.options.rotating||n.options.zooming||Ut.kind==="composite"||Ut.kind==="camera"?se.LINEAR:se.NEAREST);else{var Zn=o.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Rt=St.imageAtlasTexture,nn=at||n.options.rotating||n.options.zooming||Zn||Gt?se.LINEAR:se.NEAREST,Zt=St.imageAtlasTexture.size}var ai=gr(St,1,n.transform.zoom),fn=dr(ut.posMatrix,re,pe,n.transform,ai),Pn=or(ut.posMatrix,re,pe,n.transform,ai),Ki=Oe&&dt.hasTextData(),so=o.layout.get("icon-text-fit")!=="none"&&Ki&&dt.hasIconData();fe&&gn(dt,ut.posMatrix,n,m,fn,Pn,re,U);var Na=n.translatePosMatrix(ut.posMatrix,St,w,E),Ua=fe||m&&Oe||so?$a:fn,ys=n.translatePosMatrix(Pn,St,w,E,!0),Yl=at&&o.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,gs={program:qt,buffers:_t,uniformValues:at?dt.iconsInText?Qo(Ut.kind,Ft,_e,re,n,Na,Ua,ys,Zt,Mt):ra(Ut.kind,Ft,_e,re,n,Na,Ua,ys,m,Zt,!0):Ps(Ut.kind,Ft,_e,re,n,Na,Ua,ys,m,Zt),atlasTexture:Rt,atlasTextureIcon:Mi,atlasInterpolation:nn,atlasInterpolationIcon:va,isSDF:at,hasHalo:Yl};if(Ee&&dt.canOverlap){Pe=!0;for(var Oo=0,Pl=_t.segments.get();Oo<Pl.length;Oo+=1){var Fs=Pl[Oo];Ze.push({segments:new a.SegmentVector([Fs]),sortKey:Fs.sortKey,state:gs})}}else Ze.push({segments:_t.segments,sortKey:0,state:gs})}}}Pe&&Ze.sort(function(ja,Ma){return ja.sortKey-Ma.sortKey});for(var Fo=0,Ql=Ze;Fo<Ql.length;Fo+=1){var _s=Ql[Fo],Hi=_s.state;if(Q.activeTexture.set(se.TEXTURE0),Hi.atlasTexture.bind(Hi.atlasInterpolation,se.CLAMP_TO_EDGE),Hi.atlasTextureIcon&&(Q.activeTexture.set(se.TEXTURE1),Hi.atlasTextureIcon&&Hi.atlasTextureIcon.bind(Hi.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),Hi.isSDF){var Vs=Hi.uniformValues;Hi.hasHalo&&(Vs.u_is_halo=1,to(Hi.buffers,_s.segments,o,n,Hi.program,Ce,J,Y,Vs)),Vs.u_is_halo=0}to(Hi.buffers,_s.segments,o,n,Hi.program,Ce,J,Y,Hi.uniformValues)}}function to(n,s,o,u,m,w,E,I,D){var U=u.context;m.draw(U,U.gl.TRIANGLES,w,E,I,ge.disabled,D,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,u.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Ks(n,s,o,u,m,w,E){var I,D,U,J,Y,Q=n.context.gl,se=o.paint.get("fill-pattern"),ae=se&&se.constantOr(1),pe=o.getCrossfadeParameters();E?(D=ae&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",I=Q.LINES):(D=ae?"fillPattern":"fill",I=Q.TRIANGLES);for(var re=0,fe=u;re<fe.length;re+=1){var _e=fe[re],Ee=s.getTile(_e);if(!ae||Ee.patternsLoaded()){var Pe=Ee.getBucket(o);if(Pe){var Ce=Pe.programConfigurations.get(o.id),Oe=n.useProgram(D,Ce);ae&&(n.context.activeTexture.set(Q.TEXTURE0),Ee.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Ce.updatePaintBuffers(pe));var Ze=se.constantOr(null);if(Ze&&Ee.imageAtlas){var We=Ee.imageAtlas,He=We.patternPositions[Ze.to.toString()],ut=We.patternPositions[Ze.from.toString()];He&&ut&&Ce.setConstantPatternPositions(He,ut)}var St=n.translatePosMatrix(_e.posMatrix,Ee,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(E){J=Pe.indexBuffer2,Y=Pe.segments2;var dt=[Q.drawingBufferWidth,Q.drawingBufferHeight];U=D==="fillOutlinePattern"&&ae?ko(St,n,pe,Ee,dt):Zl(St,dt)}else J=Pe.indexBuffer,Y=Pe.segments,U=ae?Un(St,n,pe,Ee):za(St);Oe.draw(n.context,I,m,n.stencilModeForClipping(_e),w,ge.disabled,U,o.id,Pe.layoutVertexBuffer,J,Y,o.paint,n.transform.zoom,Ce)}}}}function Ds(n,s,o,u,m,w,E){for(var I=n.context,D=I.gl,U=o.paint.get("fill-extrusion-pattern"),J=U.constantOr(1),Y=o.getCrossfadeParameters(),Q=o.paint.get("fill-extrusion-opacity"),se=0,ae=u;se<ae.length;se+=1){var pe=ae[se],re=s.getTile(pe),fe=re.getBucket(o);if(fe){var _e=fe.programConfigurations.get(o.id),Ee=n.useProgram(J?"fillExtrusionPattern":"fillExtrusion",_e);J&&(n.context.activeTexture.set(D.TEXTURE0),re.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),_e.updatePaintBuffers(Y));var Pe=U.constantOr(null);if(Pe&&re.imageAtlas){var Ce=re.imageAtlas,Oe=Ce.patternPositions[Pe.to.toString()],Ze=Ce.patternPositions[Pe.from.toString()];Oe&&Ze&&_e.setConstantPatternPositions(Oe,Ze)}var We=n.translatePosMatrix(pe.posMatrix,re,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),He=o.paint.get("fill-extrusion-vertical-gradient"),ut=J?ta(We,n,He,Q,pe,Y,re):Ts(We,n,He,Q);Ee.draw(I,I.gl.TRIANGLES,m,w,E,ge.backCCW,ut,o.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,o.paint,n.transform.zoom,_e)}}}function Gl(n,s,o,u,m,w){var E=n.context,I=E.gl,D=s.fbo;if(D){var U=n.useProgram("hillshade");E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,D.colorAttachment.get());var J=function(Y,Q,se){var ae=se.paint.get("hillshade-shadow-color"),pe=se.paint.get("hillshade-highlight-color"),re=se.paint.get("hillshade-accent-color"),fe=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=Y.transform.angle);var _e,Ee,Pe,Ce=!Y.options.moving;return{u_matrix:Y.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:(_e=Q.tileID,Ee=Math.pow(2,_e.canonical.z),Pe=_e.canonical.y,[new a.MercatorCoordinate(0,Pe/Ee).toLngLat().lat,new a.MercatorCoordinate(0,(Pe+1)/Ee).toLngLat().lat]),u_light:[se.paint.get("hillshade-exaggeration"),fe],u_shadow:ae,u_highlight:pe,u_accent:re}}(n,s,o);U.draw(E,I.TRIANGLES,u,m,w,ge.disabled,J,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function Kl(n,s,o,u,m,w){var E=n.context,I=E.gl,D=s.dem;if(D&&D.data){var U=D.dim,J=D.stride,Y=D.getPixels();if(E.activeTexture.set(I.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(J),s.demTexture){var Q=s.demTexture;Q.update(Y,{premultiply:!1}),Q.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else s.demTexture=new a.Texture(E,Y,I.RGBA,{premultiply:!1}),s.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);E.activeTexture.set(I.TEXTURE0);var se=s.fbo;if(!se){var ae=new a.Texture(E,{width:U,height:U,data:null},I.RGBA);ae.bind(I.LINEAR,I.CLAMP_TO_EDGE),(se=s.fbo=E.createFramebuffer(U,U,!0)).colorAttachment.set(ae.texture)}E.bindFramebuffer.set(se.framebuffer),E.viewport.set([0,0,U,U]),n.useProgram("hillshadePrepare").draw(E,I.TRIANGLES,u,m,w,ge.disabled,function(pe,re){var fe=re.stride,_e=a.create();return a.ortho(_e,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(_e,_e,[0,-a.EXTENT,0]),{u_matrix:_e,u_image:1,u_dimension:[fe,fe],u_zoom:pe.overscaledZ,u_unpack:re.getUnpackVector()}}(s.tileID,D),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function $o(n,s,o,u,m){var w=u.paint.get("raster-fade-duration");if(w>0){var E=a.browser.now(),I=(E-n.timeAdded)/w,D=s?(E-s.timeAdded)/w:-1,U=o.getSource(),J=m.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),Y=!s||Math.abs(s.tileID.overscaledZ-J)>Math.abs(n.tileID.overscaledZ-J),Q=Y&&n.refreshedUponExpiration?1:a.clamp(Y?I:1-D,0,1);return n.refreshedUponExpiration&&I>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}var ss=new a.Color(1,0,0,1),Hl=new a.Color(0,1,0,1),ia=new a.Color(0,0,1,1),Ls=new a.Color(1,0,1,1),sl=new a.Color(0,1,1,1);function Xl(n,s,o,u){Rs(n,0,s+o/2,n.transform.width,o,u)}function es(n,s,o,u){Rs(n,s-o/2,0,o,n.transform.height,u)}function Rs(n,s,o,u,m,w){var E=n.context,I=E.gl;I.enable(I.SCISSOR_TEST),I.scissor(s*a.browser.devicePixelRatio,o*a.browser.devicePixelRatio,u*a.browser.devicePixelRatio,m*a.browser.devicePixelRatio),E.clear({color:w}),I.disable(I.SCISSOR_TEST)}function To(n,s,o){var u=n.context,m=u.gl,w=o.posMatrix,E=n.useProgram("debug"),I=$.disabled,D=ie.disabled,U=n.colorModeForRenderPass();u.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.draw(u,m.LINE_STRIP,I,D,U,ge.disabled,Dn(w,a.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var J=s.getTileByID(o.key).latestRawTileData,Y=Math.floor((J&&J.byteLength||0)/1024),Q=s.getTile(o).tileSize,se=512/Math.min(Q,512)*(o.overscaledZ/n.transform.zoom)*.5,ae=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ae+=" => "+o.overscaledZ),function(pe,re){pe.initDebugOverlayCanvas();var fe=pe.debugOverlayCanvas,_e=pe.context.gl,Ee=pe.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,fe.width,fe.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(re,5,5),Ee.strokeText(re,5,5),pe.debugOverlayTexture.update(fe),pe.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(n,ae+" "+Y+"kb"),E.draw(u,m.TRIANGLES,I,D,de.alphaBlended,ge.disabled,Dn(w,a.Color.transparent,se),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var jn={symbol:function(n,s,o,u,m){if(n.renderPass==="translucent"){var w=ie.disabled,E=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(I,D,U,J,Y,Q,se){for(var ae=D.transform,pe=Y==="map",re=Q==="map",fe=0,_e=I;fe<_e.length;fe+=1){var Ee=_e[fe],Pe=J.getTile(Ee),Ce=Pe.getBucket(U);if(Ce&&Ce.text&&Ce.text.segments.get().length){var Oe=a.evaluateSizeForZoom(Ce.textSizeData,ae.zoom),Ze=gr(Pe,1,D.transform.zoom),We=dr(Ee.posMatrix,re,pe,D.transform,Ze),He=U.layout.get("icon-text-fit")!=="none"&&Ce.hasIconData();if(Oe){var ut=Math.pow(2,ae.zoom-Pe.tileID.overscaledZ);Ms(Ce,pe,re,se,a.symbolSize,ae,We,Ee.posMatrix,ut,Oe,He)}}}}(u,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),m),o.paint.get("icon-opacity").constantOr(1)!==0&&gi(n,s,o,u,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),w,E),o.paint.get("text-opacity").constantOr(1)!==0&&gi(n,s,o,u,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),w,E),s.map.showCollisionBoxes&&(Cs(n,s,o,u,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Cs(n,s,o,u,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,u){if(n.renderPass==="translucent"){var m=o.paint.get("circle-opacity"),w=o.paint.get("circle-stroke-width"),E=o.paint.get("circle-stroke-opacity"),I=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var D=n.context,U=D.gl,J=n.depthModeForSublayer(0,$.ReadOnly),Y=ie.disabled,Q=n.colorModeForRenderPass(),se=[],ae=0;ae<u.length;ae++){var pe=u[ae],re=s.getTile(pe),fe=re.getBucket(o);if(fe){var _e=fe.programConfigurations.get(o.id),Ee={programConfiguration:_e,program:n.useProgram("circle",_e),layoutVertexBuffer:fe.layoutVertexBuffer,indexBuffer:fe.indexBuffer,uniformValues:pn(n,pe,re,o)};if(I)for(var Pe=0,Ce=fe.segments.get();Pe<Ce.length;Pe+=1){var Oe=Ce[Pe];se.push({segments:new a.SegmentVector([Oe]),sortKey:Oe.sortKey,state:Ee})}else se.push({segments:fe.segments,sortKey:0,state:Ee})}}I&&se.sort(function(St,dt){return St.sortKey-dt.sortKey});for(var Ze=0,We=se;Ze<We.length;Ze+=1){var He=We[Ze],ut=He.state;ut.program.draw(D,U.TRIANGLES,J,Y,Q,ge.disabled,ut.uniformValues,o.id,ut.layoutVertexBuffer,ut.indexBuffer,He.segments,o.paint,n.transform.zoom,ut.programConfiguration)}}}},heatmap:function(n,s,o,u){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,w=m.gl,E=ie.disabled,I=new de([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(se,ae,pe){var re=se.gl;se.activeTexture.set(re.TEXTURE1),se.viewport.set([0,0,ae.width/4,ae.height/4]);var fe=pe.heatmapFbo;if(fe)re.bindTexture(re.TEXTURE_2D,fe.colorAttachment.get()),se.bindFramebuffer.set(fe.framebuffer);else{var _e=re.createTexture();re.bindTexture(re.TEXTURE_2D,_e),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,re.LINEAR),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,re.LINEAR),fe=pe.heatmapFbo=se.createFramebuffer(ae.width/4,ae.height/4,!1),function(Ee,Pe,Ce,Oe){var Ze=Ee.gl;Ze.texImage2D(Ze.TEXTURE_2D,0,Ze.RGBA,Pe.width/4,Pe.height/4,0,Ze.RGBA,Ee.extRenderToTextureHalfFloat?Ee.extTextureHalfFloat.HALF_FLOAT_OES:Ze.UNSIGNED_BYTE,null),Oe.colorAttachment.set(Ce)}(se,ae,_e,fe)}})(m,n,o),m.clear({color:a.Color.transparent});for(var D=0;D<u.length;D++){var U=u[D];if(!s.hasRenderableParent(U)){var J=s.getTile(U),Y=J.getBucket(o);if(Y){var Q=Y.programConfigurations.get(o.id);n.useProgram("heatmap",Q).draw(m,w.TRIANGLES,$.disabled,E,I,ge.disabled,qs(U.posMatrix,J,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,o.paint,n.transform.zoom,Q)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(se,ae){var pe=se.context,re=pe.gl,fe=ae.heatmapFbo;if(fe){pe.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,fe.colorAttachment.get()),pe.activeTexture.set(re.TEXTURE1);var _e=ae.colorRampTexture;_e||(_e=ae.colorRampTexture=new a.Texture(pe,ae.colorRamp,re.RGBA)),_e.bind(re.LINEAR,re.CLAMP_TO_EDGE),se.useProgram("heatmapTexture").draw(pe,re.TRIANGLES,$.disabled,ie.disabled,se.colorModeForRenderPass(),ge.disabled,function(Ee,Pe,Ce,Oe){var Ze=a.create();a.ortho(Ze,0,Ee.width,Ee.height,0,0,1);var We=Ee.context.gl;return{u_matrix:Ze,u_world:[We.drawingBufferWidth,We.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Pe.paint.get("heatmap-opacity")}}(se,ae),ae.id,se.viewportBuffer,se.quadTriangleIndexBuffer,se.viewportSegments,ae.paint,se.transform.zoom)}}(n,o))},line:function(n,s,o,u){if(n.renderPass==="translucent"){var m=o.paint.get("line-opacity"),w=o.paint.get("line-width");if(m.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=n.depthModeForSublayer(0,$.ReadOnly),I=n.colorModeForRenderPass(),D=o.paint.get("line-dasharray"),U=o.paint.get("line-pattern"),J=U.constantOr(1),Y=o.paint.get("line-gradient"),Q=o.getCrossfadeParameters(),se=J?"linePattern":D?"lineSDF":Y?"lineGradient":"line",ae=n.context,pe=ae.gl,re=!0,fe=0,_e=u;fe<_e.length;fe+=1){var Ee=_e[fe],Pe=s.getTile(Ee);if(!J||Pe.patternsLoaded()){var Ce=Pe.getBucket(o);if(Ce){var Oe=Ce.programConfigurations.get(o.id),Ze=n.context.program.get(),We=n.useProgram(se,Oe),He=re||We.program!==Ze,ut=U.constantOr(null);if(ut&&Pe.imageAtlas){var St=Pe.imageAtlas,dt=St.patternPositions[ut.to.toString()],_t=St.patternPositions[ut.from.toString()];dt&&_t&&Oe.setConstantPatternPositions(dt,_t)}var er=J?Ve(n,Pe,o,Q):D?Tt(n,Pe,o,D,Q):Y?jr(n,Pe,o,Ce.lineClipsArray.length):Qa(n,Pe,o);if(J)ae.activeTexture.set(pe.TEXTURE0),Pe.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Oe.updatePaintBuffers(Q);else if(D&&(He||n.lineAtlas.dirty))ae.activeTexture.set(pe.TEXTURE0),n.lineAtlas.bind(ae);else if(Y){var at=Ce.gradients[o.id],Ut=at.texture;if(o.gradientVersion!==at.version){var Gt=256;if(o.stepInterpolant){var qt=s.getSource().maxzoom,Ft=Ee.canonical.z===qt?Math.ceil(1<<n.transform.maxZoom-Ee.canonical.z):1;Gt=a.clamp(a.nextPowerOfTwo(Ce.maxLineLength/a.EXTENT*1024*Ft),256,ae.maxTextureSize)}at.gradient=a.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Gt,image:at.gradient||void 0,clips:Ce.lineClipsArray}),at.texture?at.texture.update(at.gradient):at.texture=new a.Texture(ae,at.gradient,pe.RGBA),at.version=o.gradientVersion,Ut=at.texture}ae.activeTexture.set(pe.TEXTURE0),Ut.bind(o.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}We.draw(ae,pe.TRIANGLES,E,n.stencilModeForClipping(Ee),I,ge.disabled,er,o.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,o.paint,n.transform.zoom,Oe,Ce.layoutVertexBuffer2),re=!1}}}}},fill:function(n,s,o,u){var m=o.paint.get("fill-color"),w=o.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=n.colorModeForRenderPass(),I=o.paint.get("fill-pattern"),D=n.opaquePassEnabledForLayer()&&!I.constantOr(1)&&m.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===D){var U=n.depthModeForSublayer(1,n.renderPass==="opaque"?$.ReadWrite:$.ReadOnly);Ks(n,s,o,u,U,E,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var J=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,$.ReadOnly);Ks(n,s,o,u,J,E,!0)}}},"fill-extrusion":function(n,s,o,u){var m=o.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var w=new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D);if(m!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Ds(n,s,o,u,w,ie.disabled,de.disabled),Ds(n,s,o,u,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var E=n.colorModeForRenderPass();Ds(n,s,o,u,w,ie.disabled,E)}}},hillshade:function(n,s,o,u){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,w=n.depthModeForSublayer(0,$.ReadOnly),E=n.colorModeForRenderPass(),I=n.renderPass==="translucent"?n.stencilConfigForOverlap(u):[{},u],D=I[0],U=0,J=I[1];U<J.length;U+=1){var Y=J[U],Q=s.getTile(Y);Q.needsHillshadePrepare&&n.renderPass==="offscreen"?Kl(n,Q,o,w,ie.disabled,E):n.renderPass==="translucent"&&Gl(n,Q,o,w,D[Y.overscaledZ],E)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,u){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&u.length)for(var m=n.context,w=m.gl,E=s.getSource(),I=n.useProgram("raster"),D=n.colorModeForRenderPass(),U=E instanceof nr?[{},u]:n.stencilConfigForOverlap(u),J=U[0],Y=U[1],Q=Y[Y.length-1].overscaledZ,se=!n.options.moving,ae=0,pe=Y;ae<pe.length;ae+=1){var re=pe[ae],fe=n.depthModeForSublayer(re.overscaledZ-Q,o.paint.get("raster-opacity")===1?$.ReadWrite:$.ReadOnly,w.LESS),_e=s.getTile(re),Ee=n.transform.calculatePosMatrix(re.toUnwrapped(),se);_e.registerFadeDuration(o.paint.get("raster-fade-duration"));var Pe=s.findLoadedParent(re,0),Ce=$o(_e,Pe,s,o,n.transform),Oe=void 0,Ze=void 0,We=o.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;m.activeTexture.set(w.TEXTURE0),_e.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(w.TEXTURE1),Pe?(Pe.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,Pe.tileID.overscaledZ-_e.tileID.overscaledZ),Ze=[_e.tileID.canonical.x*Oe%1,_e.tileID.canonical.y*Oe%1]):_e.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var He=Zs(Ee,Ze||[0,0],Oe||1,Ce,o);E instanceof nr?I.draw(m,w.TRIANGLES,fe,ie.disabled,D,ge.disabled,He,o.id,E.boundsBuffer,n.quadTriangleIndexBuffer,E.boundsSegments):I.draw(m,w.TRIANGLES,fe,J[re.overscaledZ],D,ge.disabled,He,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var u=o.paint.get("background-color"),m=o.paint.get("background-opacity");if(m!==0){var w=n.context,E=w.gl,I=n.transform,D=I.tileSize,U=o.paint.get("background-pattern");if(!n.isPatternMissing(U)){var J=!U&&u.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===J){var Y=ie.disabled,Q=n.depthModeForSublayer(0,J==="opaque"?$.ReadWrite:$.ReadOnly),se=n.colorModeForRenderPass(),ae=n.useProgram(U?"backgroundPattern":"background"),pe=I.coveringTiles({tileSize:D});U&&(w.activeTexture.set(E.TEXTURE0),n.imageManager.bind(n.context));for(var re=o.getCrossfadeParameters(),fe=0,_e=pe;fe<_e.length;fe+=1){var Ee=_e[fe],Pe=n.transform.calculatePosMatrix(Ee.toUnwrapped()),Ce=U?ma(Pe,m,n,U,{tileID:Ee,tileSize:D},re):Gs(Pe,m,u);ae.draw(w,E.TRIANGLES,Q,Y,se,ge.disabled,Ce,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var u=0;u<o.length;u++)To(n,s,o[u])},custom:function(n,s,o){var u=n.context,m=o.implementation;if(n.renderPass==="offscreen"){var w=m.prerender;w&&(n.setCustomLayerDefaults(),u.setColorMode(n.colorModeForRenderPass()),w.call(m,u.gl,n.transform.customLayerMatrix()),u.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),u.setColorMode(n.colorModeForRenderPass()),u.setStencilMode(ie.disabled);var E=m.renderingMode==="3d"?new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,$.ReadOnly);u.setDepthMode(E),m.render(u.gl,n.transform.customLayerMatrix()),u.setDirty(),n.setBaseState(),u.bindFramebuffer.set(null)}}},Cr=function(n,s){this.context=new G(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=te.maxUnderzooming+te.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xe,this.gpuTimers={}};Cr.prototype.resize=function(n,s){if(this.width=n*a.browser.devicePixelRatio,this.height=s*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,u=this.style._order;o<u.length;o+=1)this.style._layers[u[o]].resize()},Cr.prototype.setup=function(){var n=this.context,s=new a.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Lr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var o=new a.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(a.EXTENT,0),o.emplaceBack(0,a.EXTENT),o.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=n.createVertexBuffer(o,Lr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var u=new a.StructArrayLayout4i8;u.emplaceBack(0,0,0,0),u.emplaceBack(a.EXTENT,0,a.EXTENT,0),u.emplaceBack(0,a.EXTENT,0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(u,rt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var m=new a.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,Lr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var w=new a.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var E=new a.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(E),this.emptyTexture=new a.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var I=this.context.gl;this.stencilClearMode=new ie({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)},Cr.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=a.create();a.ortho(o,0,this.width,this.height,0,0,1),a.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,$.disabled,this.stencilClearMode,de.disabled,ge.disabled,rn(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Cr.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,u=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(de.disabled),o.setDepthMode($.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=s;w<E.length;w+=1){var I=E[w],D=this._tileClippingMaskIDs[I.key]=this.nextStencilID++;m.draw(o,u.TRIANGLES,$.disabled,new ie({func:u.ALWAYS,mask:0},D,255,u.KEEP,u.KEEP,u.REPLACE),de.disabled,ge.disabled,rn(I.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Cr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new ie({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Cr.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new ie({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Cr.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,u=n.sort(function(D,U){return U.overscaledZ-D.overscaledZ}),m=u[u.length-1].overscaledZ,w=u[0].overscaledZ-m+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},I=0;I<w;I++)E[I+m]=new ie({func:o.GEQUAL,mask:255},I+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=w,[E,u]}return[(s={},s[m]=ie.disabled,s),u]},Cr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new de([n.CONSTANT_COLOR,n.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?de.unblended:de.alphaBlended},Cr.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return $.disabled;var u=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $(o||this.context.gl.LEQUAL,s,[u,u])},Cr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Cr.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var u=this.style._order,m=this.style.sourceCaches;for(var w in m){var E=m[w];E.used&&E.prepare(this.context)}var I,D,U={},J={},Y={};for(var Q in m){var se=m[Q];U[Q]=se.getVisibleCoordinates(),J[Q]=U[Q].slice().reverse(),Y[Q]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ae=0;ae<u.length;ae++)if(this.style._layers[u[ae]].is3D()){this.opaquePassCutoff=ae;break}this.renderPass="offscreen";for(var pe=0,re=u;pe<re.length;pe+=1){var fe=this.style._layers[re[pe]];if(fe.hasOffscreenPass()&&!fe.isHidden(this.transform.zoom)){var _e=J[fe.source];(fe.type==="custom"||_e.length)&&this.renderLayer(this,m[fe.source],fe,_e)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){var Ee=this.style._layers[u[this.currentLayer]],Pe=m[Ee.source],Ce=U[Ee.source];this._renderTileClippingMasks(Ee,Ce),this.renderLayer(this,Pe,Ee,Ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){var Oe=this.style._layers[u[this.currentLayer]],Ze=m[Oe.source],We=(Oe.type==="symbol"?Y:J)[Oe.source];this._renderTileClippingMasks(Oe,U[Oe.source]),this.renderLayer(this,Ze,Oe,We)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(He){He.source&&!He.isHidden(o.transform.zoom)&&(He.source!==(D&&D.id)&&(D=o.style.sourceCaches[He.source]),(!I||I.getSource().maxzoom<D.getSource().maxzoom)&&(I=D))}),I&&jn.debug(this,I,I.getVisibleCoordinates())),this.options.showPadding&&function(He){var ut=He.transform.padding;Xl(He,He.transform.height-(ut.top||0),3,ss),Xl(He,ut.bottom||0,3,Hl),es(He,ut.left||0,3,ia),es(He,He.transform.width-(ut.right||0),3,Ls);var St=He.transform.centerPoint;(function(dt,_t,er,at){Rs(dt,_t-1,er-10,2,20,at),Rs(dt,_t-10,er-1,20,2,at)})(He,St.x,He.transform.height-St.y,sl)}(this),this.context.setDefault()},Cr.prototype.renderLayer=function(n,s,o,u){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||u.length)&&(this.id=o.id,this.gpuTimingStart(o),jn[o.type](n,s,o,u,this.style.placement.variableOffsets),this.gpuTimingEnd())},Cr.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Cr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Cr.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Cr.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var u=n[o],m=this.context.extTimerQuery,w=m.getQueryObjectEXT(u.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(u.query),s[o]=w}return s},Cr.prototype.translatePosMatrix=function(n,s,o,u,m){if(!o[0]&&!o[1])return n;var w=m?u==="map"?this.transform.angle:0:u==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),I=Math.cos(w);o=[o[0]*I-o[1]*E,o[0]*E+o[1]*I]}var D=[m?o[0]:gr(s,o[0],this.transform.zoom),m?o[1]:gr(s,o[1],this.transform.zoom),0],U=new Float32Array(16);return a.translate(U,n,D),U},Cr.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Cr.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Cr.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Cr.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new Ya(this.context,n,vn[n],s,ol[n],this._showOverdrawInspector)),this.cache[o]},Cr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Cr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Cr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Cr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ho=function(n,s){this.points=n,this.planes=s};ho.fromInvProjectionMatrix=function(n,s,o){var u=Math.pow(2,o),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return a.transformMat4([],E,n)}).map(function(E){return a.scale$1([],E,1/E[3]/s*u)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var I=a.sub([],m[E[0]],m[E[1]]),D=a.sub([],m[E[2]],m[E[1]]),U=a.normalize([],a.cross([],I,D)),J=-a.dot(U,m[E[1]]);return U.concat(J)});return new ho(m,w)};var ro=function(n,s){this.min=n,this.max=s,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};ro.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=a.clone$2(this.min),u=a.clone$2(this.max),m=0;m<s.length;m++)o[m]=s[m]?this.min[m]:this.center[m],u[m]=s[m]?this.center[m]:this.max[m];return u[2]=this.max[2],new ro(o,u)},ro.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},ro.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},ro.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,u=0;u<n.planes.length;u++){for(var m=n.planes[u],w=0,E=0;E<s.length;E++)w+=a.dot$1(m,s[E])>=0;if(w===0)return 0;w!==s.length&&(o=!1)}if(o)return 2;for(var I=0;I<3;I++){for(var D=Number.MAX_VALUE,U=-Number.MAX_VALUE,J=0;J<n.points.length;J++){var Y=n.points[J][I]-this.min[I];D=Math.min(D,Y),U=Math.max(U,Y)}if(U<0||D>this.max[I]-this.min[I])return 0}return 1};var Bs=function(n,s,o,u){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),u===void 0&&(u=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=u};Bs.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=a.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=a.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=a.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=a.number(n.right,s.right,o)),this},Bs.prototype.getCenter=function(n,s){var o=a.clamp((this.left+n-this.right)/2,0,n),u=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.Point(o,u)},Bs.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Bs.prototype.clone=function(){return new Bs(this.top,this.bottom,this.left,this.right)},Bs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var lr=function(n,s,o,u,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o==null?0:o,this._maxPitch=u==null?60:u,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bs,this._posMatrixCache={},this._alignedPosMatrixCache={}},Mr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};lr.prototype.clone=function(){var n=new lr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Mr.minZoom.get=function(){return this._minZoom},Mr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Mr.maxZoom.get=function(){return this._maxZoom},Mr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Mr.minPitch.get=function(){return this._minPitch},Mr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Mr.maxPitch.get=function(){return this._maxPitch},Mr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Mr.renderWorldCopies.get=function(){return this._renderWorldCopies},Mr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Mr.worldSize.get=function(){return this.tileSize*this.scale},Mr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Mr.size.get=function(){return new a.Point(this.width,this.height)},Mr.bearing.get=function(){return-this.angle/Math.PI*180},Mr.bearing.set=function(n){var s=-a.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Mr.pitch.get=function(){return this._pitch/Math.PI*180},Mr.pitch.set=function(n){var s=a.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Mr.fov.get=function(){return this._fov/Math.PI*180},Mr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Mr.zoom.get=function(){return this._zoom},Mr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Mr.center.get=function(){return this._center},Mr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Mr.padding.get=function(){return this._edgeInsets.toJSON()},Mr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Mr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},lr.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},lr.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},lr.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},lr.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new a.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new a.Point(0,0)),u=this.pointCoordinate(new a.Point(this.width,0)),m=this.pointCoordinate(new a.Point(this.width,this.height)),w=this.pointCoordinate(new a.Point(0,this.height)),E=Math.floor(Math.min(o.x,u.x,m.x,w.x)),I=Math.floor(Math.max(o.x,u.x,m.x,w.x)),D=E-1;D<=I+1;D++)D!==0&&s.push(new a.UnwrappedTileID(D,n));return s},lr.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var u=a.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),w=[m*u.x,m*u.y,0],E=ho.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),I=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=s);var D=function(He){return{aabb:new ro([He*m,0,0],[(He+1)*m,m,0]),zoom:0,x:0,y:0,wrap:He,fullyVisible:!1}},U=[],J=[],Y=s,Q=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var se=1;se<=3;se++)U.push(D(-se)),U.push(D(se));for(U.push(D(0));U.length>0;){var ae=U.pop(),pe=ae.x,re=ae.y,fe=ae.fullyVisible;if(!fe){var _e=ae.aabb.intersects(E);if(_e===0)continue;fe=_e===2}var Ee=ae.aabb.distanceX(w),Pe=ae.aabb.distanceY(w),Ce=Math.max(Math.abs(Ee),Math.abs(Pe));if(ae.zoom===Y||Ce>3+(1<<Y-ae.zoom)-2&&ae.zoom>=I)J.push({tileID:new a.OverscaledTileID(ae.zoom===Y?Q:ae.zoom,ae.wrap,ae.zoom,pe,re),distanceSq:a.sqrLen([w[0]-.5-pe,w[1]-.5-re])});else for(var Oe=0;Oe<4;Oe++){var Ze=(pe<<1)+Oe%2,We=(re<<1)+(Oe>>1);U.push({aabb:ae.aabb.quadrant(Oe),zoom:ae.zoom+1,x:Ze,y:We,wrap:ae.wrap,fullyVisible:fe})}}return J.sort(function(He,ut){return He.distanceSq-ut.distanceSq}).map(function(He){return He.tileID})},lr.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Mr.unmodified.get=function(){return this._unmodified},lr.prototype.zoomScale=function(n){return Math.pow(2,n)},lr.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},lr.prototype.project=function(n){var s=a.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(n.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)},lr.prototype.unproject=function(n){return new a.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Mr.point.get=function(){return this.project(this.center)},lr.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),u=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),w=new a.MercatorCoordinate(m.x-(o.x-u.x),m.y-(o.y-u.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},lr.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},lr.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},lr.prototype.locationCoordinate=function(n){return a.MercatorCoordinate.fromLngLat(n)},lr.prototype.coordinateLocation=function(n){return n.toLngLat()},lr.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(o,o,this.pixelMatrixInverse);var u=s[3],m=o[3],w=s[1]/u,E=o[1]/m,I=s[2]/u,D=o[2]/m,U=I===D?0:(0-I)/(D-I);return new a.MercatorCoordinate(a.number(s[0]/u,o[0]/m,U)/this.worldSize,a.number(w,E,U)/this.worldSize)},lr.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.Point(s[0]/s[3],s[1]/s[3])},lr.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},lr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},lr.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},lr.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,u=s?this._alignedPosMatrixCache:this._posMatrixCache;if(u[o])return u[o];var m=n.canonical,w=this.worldSize/this.zoomScale(m.z),E=m.x+Math.pow(2,m.z)*n.wrap,I=a.identity(new Float64Array(16));return a.translate(I,I,[E*w,m.y*w,0]),a.scale(I,I,[w/a.EXTENT,w/a.EXTENT,1]),a.multiply(I,s?this.alignedProjMatrix:this.projMatrix,I),u[o]=new Float32Array(I),u[o]},lr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},lr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,u,m=-90,w=90,E=-180,I=180,D=this.size,U=this._unmodified;if(this.latRange){var J=this.latRange;m=a.mercatorYfromLat(J[1])*this.worldSize,n=(w=a.mercatorYfromLat(J[0])*this.worldSize)-m<D.y?D.y/(w-m):0}if(this.lngRange){var Y=this.lngRange;E=a.mercatorXfromLng(Y[0])*this.worldSize,s=(I=a.mercatorXfromLng(Y[1])*this.worldSize)-E<D.x?D.x/(I-E):0}var Q=this.point,se=Math.max(s||0,n||0);if(se)return this.center=this.unproject(new a.Point(s?(I+E)/2:Q.x,n?(w+m)/2:Q.y)),this.zoom+=this.scaleZoom(se),this._unmodified=U,void(this._constraining=!1);if(this.latRange){var ae=Q.y,pe=D.y/2;ae-pe<m&&(u=m+pe),ae+pe>w&&(u=w-pe)}if(this.lngRange){var re=Q.x,fe=D.x/2;re-fe<E&&(o=E+fe),re+fe>I&&(o=I-fe)}o===void 0&&u===void 0||(this.center=this.unproject(new a.Point(o!==void 0?o:Q.x,u!==void 0?u:Q.y))),this._unmodified=U,this._constraining=!1}},lr.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),u=Math.sin(o)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-o,.01,Math.PI-.01)),m=this.point,w=m.x,E=m.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*u+this.cameraToCenterDistance),D=this.height/50,U=new Float64Array(16);a.perspective(U,this._fov,this.width/this.height,D,I),U[8]=2*-n.x/this.width,U[9]=2*n.y/this.height,a.scale(U,U,[1,-1,1]),a.translate(U,U,[0,0,-this.cameraToCenterDistance]),a.rotateX(U,U,this._pitch),a.rotateZ(U,U,this.angle),a.translate(U,U,[-w,-E,0]),this.mercatorMatrix=a.scale([],U,[this.worldSize,this.worldSize,this.worldSize]),a.scale(U,U,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=U,this.invProjMatrix=a.invert([],this.projMatrix);var J=this.width%2/2,Y=this.height%2/2,Q=Math.cos(this.angle),se=Math.sin(this.angle),ae=w-Math.round(w)+Q*J+se*Y,pe=E-Math.round(E)+Q*Y+se*J,re=new Float64Array(U);if(a.translate(re,re,[ae>.5?ae-1:ae,pe>.5?pe-1:pe,0]),this.alignedProjMatrix=re,U=a.create(),a.scale(U,U,[this.width/2,-this.height/2,1]),a.translate(U,U,[1,-1,0]),this.labelPlaneMatrix=U,U=a.create(),a.scale(U,U,[1,-1,1]),a.translate(U,U,[-1,-1,0]),a.scale(U,U,[2/this.width,2/this.height,1]),this.glCoordMatrix=U,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(U=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=U,this._posMatrixCache={},this._alignedPosMatrixCache={}}},lr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new a.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},lr.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,n))},lr.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,u=s.y,m=s.x,w=s.y,E=0,I=n;E<I.length;E+=1){var D=I[E];o=Math.min(o,D.x),u=Math.min(u,D.y),m=Math.max(m,D.x),w=Math.max(w,D.y)}return[new a.Point(o,u),new a.Point(m,u),new a.Point(m,w),new a.Point(o,w),new a.Point(o,u)]},Object.defineProperties(lr.prototype,Mr);var Rn=function(n){var s,o,u,m;this._hashName=n&&encodeURIComponent(n),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,u=null,m=function(){u=null,o&&(s(),u=setTimeout(m,300),o=!1)},function(){return o=!0,u||m(),u})};Rn.prototype.addTo=function(n){return this._map=n,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Rn.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Rn.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,u=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,u),w=Math.round(s.lng*m)/m,E=Math.round(s.lat*m)/m,I=this._map.getBearing(),D=this._map.getPitch(),U="";if(U+=n?"/"+w+"/"+E+"/"+o:o+"/"+E+"/"+w,(I||D)&&(U+="/"+Math.round(10*I)/10),D&&(U+="/"+Math.round(D)),this._hashName){var J=this._hashName,Y=!1,Q=a.window.location.hash.slice(1).split("&").map(function(se){var ae=se.split("=")[0];return ae===J?(Y=!0,ae+"="+U):se}).filter(function(se){return se});return Y||Q.push(J+"="+U),"#"+Q.join("&")}return"#"+U},Rn.prototype._getCurrentHash=function(){var n,s=this,o=a.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(u){return u.split("=")}).forEach(function(u){u[0]===s._hashName&&(n=u)}),(n&&n[1]||"").split("/")):o.split("/")},Rn.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},Rn.prototype._updateHashUnthrottled=function(){var n=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,n)}catch{}};var ls={linearity:.3,easing:a.bezier(0,0,.3,1)},Ba=a.extend({deceleration:2500,maxSpeed:1400},ls),us=a.extend({deceleration:20,maxSpeed:1400},ls),vu=a.extend({deceleration:1e3,maxSpeed:360},ls),bu=a.extend({deceleration:1e3,maxSpeed:90},ls),po=function(n){this._map=n,this.clear()};function Ao(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function zo(n,s,o){var u=o.maxSpeed,m=o.linearity,w=o.deceleration,E=a.clamp(n*m/(s/1e3),-u,u),I=Math.abs(E)/(w*m);return{easing:o.easing,duration:1e3*I,amount:E*(I/2)}}po.prototype.clear=function(){this._inertiaBuffer=[]},po.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:n})},po.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=a.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},po.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},o=0,u=this._inertiaBuffer;o<u.length;o+=1){var m=u[o].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(s.pan.mag()){var I=zo(s.pan.mag(),w,a.extend({},Ba,n||{}));E.offset=s.pan.mult(I.amount/s.pan.mag()),E.center=this._map.transform.center,Ao(E,I)}if(s.zoom){var D=zo(s.zoom,w,us);E.zoom=this._map.transform.zoom+D.amount,Ao(E,D)}if(s.bearing){var U=zo(s.bearing,w,vu);E.bearing=this._map.transform.bearing+a.clamp(U.amount,-179,179),Ao(E,U)}if(s.pitch){var J=zo(s.pitch,w,bu);E.pitch=this._map.transform.pitch+J.amount,Ao(E,J)}if(E.zoom||E.bearing){var Y=s.pinchAround===void 0?s.around:s.pinchAround;E.around=Y?this._map.unproject(Y):this._map.getCenter()}return this.clear(),a.extend(E,{noMoveStart:!0})}};var Fr=function(n){function s(u,m,w,E){E===void 0&&(E={});var I=k.mousePos(m.getCanvasContainer(),w),D=m.unproject(I);n.call(this,u,a.extend({point:I,lngLat:D,originalEvent:w},E)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),ya=function(n){function s(u,m,w){var E=u==="touchend"?w.changedTouches:w.touches,I=k.touchPos(m.getCanvasContainer(),E),D=I.map(function(Y){return m.unproject(Y)}),U=I.reduce(function(Y,Q,se,ae){return Y.add(Q.div(ae.length))},new a.Point(0,0)),J=m.unproject(U);n.call(this,u,{points:I,point:U,lngLats:D,lngLat:J,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),fo=function(n){function s(u,m,w){n.call(this,u,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),hi=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};hi.prototype.reset=function(){delete this._mousedownPos},hi.prototype.wheel=function(n){return this._firePreventable(new fo(n.type,this._map,n))},hi.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new Fr(n.type,this._map,n))},hi.prototype.mouseup=function(n){this._map.fire(new Fr(n.type,this._map,n))},hi.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Fr(n.type,this._map,n))},hi.prototype.dblclick=function(n){return this._firePreventable(new Fr(n.type,this._map,n))},hi.prototype.mouseover=function(n){this._map.fire(new Fr(n.type,this._map,n))},hi.prototype.mouseout=function(n){this._map.fire(new Fr(n.type,this._map,n))},hi.prototype.touchstart=function(n){return this._firePreventable(new ya(n.type,this._map,n))},hi.prototype.touchmove=function(n){this._map.fire(new ya(n.type,this._map,n))},hi.prototype.touchend=function(n){this._map.fire(new ya(n.type,this._map,n))},hi.prototype.touchcancel=function(n){this._map.fire(new ya(n.type,this._map,n))},hi.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},hi.prototype.isEnabled=function(){return!0},hi.prototype.isActive=function(){return!1},hi.prototype.enable=function(){},hi.prototype.disable=function(){};var ht=function(n){this._map=n};ht.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ht.prototype.mousemove=function(n){this._map.fire(new Fr(n.type,this._map,n))},ht.prototype.mousedown=function(){this._delayContextMenu=!0},ht.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ht.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Fr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},ht.prototype.isEnabled=function(){return!0},ht.prototype.isActive=function(){return!1},ht.prototype.enable=function(){},ht.prototype.disable=function(){};var ga=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Po(n,s){for(var o={},u=0;u<n.length;u++)o[n[u].identifier]=s[u];return o}ga.prototype.isEnabled=function(){return!!this._enabled},ga.prototype.isActive=function(){return!!this._active},ga.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ga.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ga.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(k.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},ga.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var u=this._startPos;this._lastPos=o,this._box||(this._box=k.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(u.x,o.x),w=Math.max(u.x,o.x),E=Math.min(u.y,o.y),I=Math.max(u.y,o.y);k.setTransform(this._box,"translate("+m+"px,"+E+"px)"),this._box.style.width=w-m+"px",this._box.style.height=I-E+"px"}}},ga.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var u=this._startPos,m=s;if(this.reset(),k.suppressClick(),u.x!==m.x||u.y!==m.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(u,m,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},ga.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},ga.prototype.blur=function(){this.reset()},ga.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos},ga.prototype._fireEvent=function(n,s){return this._map.fire(new a.Event(n,{originalEvent:s}))};var zn=function(n){this.reset(),this.numTouches=n.numTouches};zn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},zn.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(u){for(var m=new a.Point(0,0),w=0,E=u;w<E.length;w+=1)m._add(E[w]);return m.div(u.length)}(s),this.touches=Po(o,s)))},zn.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var u=Po(o,s);for(var m in this.touches){var w=u[m];(!w||w.dist(this.touches[m])>30)&&(this.aborted=!0)}}},zn.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var u=!this.aborted&&this.centroid;if(this.reset(),u)return u}};var io=function(n){this.singleTap=new zn(n),this.numTaps=n.numTaps,this.reset()};io.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},io.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},io.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},io.prototype.touchend=function(n,s,o){var u=this.singleTap.touchend(n,s,o);if(u){var m=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(u)<30;if(m&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=u,this.count===this.numTaps)return this.reset(),u}};var Bn=function(){this._zoomIn=new io({numTouches:1,numTaps:2}),this._zoomOut=new io({numTouches:2,numTaps:1}),this.reset()};Bn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Bn.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},Bn.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},Bn.prototype.touchend=function(n,s,o){var u=this,m=this._zoomIn.touchend(n,s,o),w=this._zoomOut.touchend(n,s,o);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(m)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:n})}}):void 0},Bn.prototype.touchcancel=function(){this.reset()},Bn.prototype.enable=function(){this._enabled=!0},Bn.prototype.disable=function(){this._enabled=!1,this.reset()},Bn.prototype.isEnabled=function(){return this._enabled},Bn.prototype.isActive=function(){return this._active};var Il={0:1,2:2},et=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};et.prototype.blur=function(){this.reset()},et.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},et.prototype._correctButton=function(n,s){return!1},et.prototype._move=function(n,s){return{}},et.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=k.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},et.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(u,m){var w=Il[m];return u.buttons===void 0||(u.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},et.prototype.mouseupWindow=function(n){this._lastPoint&&k.mouseButton(n)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())},et.prototype.enable=function(){this._enabled=!0},et.prototype.disable=function(){this._enabled=!1,this.reset()},et.prototype.isEnabled=function(){return this._enabled},et.prototype.isActive=function(){return this._active};var Os=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,u){n.prototype.mousedown.call(this,o,u),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,u){return u===0&&!o.ctrlKey},s.prototype._move=function(o,u){return{around:u,panDelta:u.sub(o)}},s}(et),Hs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,u){return u===0&&o.ctrlKey||u===2},s.prototype._move=function(o,u){var m=.8*(u.x-o.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(et),Co=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,u){return u===0&&o.ctrlKey||u===2},s.prototype._move=function(o,u){var m=-.5*(u.y-o.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(et),Ii=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};Ii.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Ii.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},Ii.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},Ii.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},Ii.prototype.touchcancel=function(){this.reset()},Ii.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var u=Po(o,s),m=new a.Point(0,0),w=new a.Point(0,0),E=0;for(var I in u){var D=u[I],U=this._touches[I];U&&(m._add(D),w._add(D.sub(U)),E++,u[I]=D)}if(this._touches=u,!(E<this._minTouches)&&w.mag()){var J=w.div(E);if(this._sum._add(J),!(this._sum.mag()<this._clickTolerance))return{around:m.div(E),panDelta:J}}},Ii.prototype.enable=function(){this._enabled=!0},Ii.prototype.disable=function(){this._enabled=!1,this.reset()},Ii.prototype.isEnabled=function(){return this._enabled},Ii.prototype.isActive=function(){return this._active};var Zi=function(){this.reset()};function Oa(n,s,o){for(var u=0;u<n.length;u++)if(n[u].identifier===o)return s[u]}function no(n,s){return Math.log(n/s)/Math.LN2}Zi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Zi.prototype._start=function(n){},Zi.prototype._move=function(n,s,o){return{}},Zi.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},Zi.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var u=this._firstTwoTouches,m=u[1],w=Oa(o,s,u[0]),E=Oa(o,s,m);if(w&&E){var I=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],I,n)}}},Zi.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var u=this._firstTwoTouches,m=u[1],w=Oa(o,s,u[0]),E=Oa(o,s,m);w&&E||(this._active&&k.suppressClick(),this.reset())}},Zi.prototype.touchcancel=function(){this.reset()},Zi.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var _a=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,u){var m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(no(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:no(this._distance,m),pinchAround:u}},s}(Zi);function Pa(n,s){return 180*n.angleWith(s)/Math.PI}var Eh=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,u){var m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Pa(this._vector,m),pinchAround:u}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var u=25/(Math.PI*this._minDiameter)*360,m=Pa(o,this._startVector);return Math.abs(m)<u},s}(Zi);function Wl(n){return Math.abs(n.y)>Math.abs(n.x)}var Yu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,Wl(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,u,m){var w=o[0].sub(this._lastPoints[0]),E=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,m.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,u,m){if(this._valid!==void 0)return this._valid;var w=o.mag()>=2,E=u.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var I=o.y>0==u.y>0;return Wl(o)&&Wl(u)&&I}},s}(Zi),ll={panStep:100,bearingStep:15,pitchStep:10},Fa=function(){var n=ll;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function mo(n){return n*(2-n)}Fa.prototype.blur=function(){this.reset()},Fa.prototype.reset=function(){this._active=!1},Fa.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,u=0,m=0,w=0,E=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?u=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?u=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),E=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(u=0,m=0),{cameraAnimation:function(I){var D=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:mo,zoom:o?Math.round(D)+o*(n.shiftKey?2:1):D,bearing:I.getBearing()+u*s._bearingStep,pitch:I.getPitch()+m*s._pitchStep,offset:[-w*s._panStep,-E*s._panStep],center:I.getCenter()},{originalEvent:n})}}}},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active},Fa.prototype.disableRotation=function(){this._rotationDisabled=!0},Fa.prototype.enableRotation=function(){this._rotationDisabled=!1};var $t=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};$t.prototype.setZoomRate=function(n){this._defaultZoomRate=n},$t.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},$t.prototype.isEnabled=function(){return!!this._enabled},$t.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},$t.prototype.isZooming=function(){return!!this._zooming},$t.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},$t.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$t.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=a.browser.now(),u=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(u*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},$t.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},$t.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=k.mousePos(this._el,n);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},$t.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,u=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&u!==0&&(u=1/u);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*u))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,I=this._startZoom,D=this._easing,U=!1;if(this._type==="wheel"&&I&&D){var J=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Y=D(J);w=a.number(I,E,Y),J<1?this._frameId||(this._frameId=!0):U=!0}else w=E,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!U,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},$t.prototype._smoothOutEasing=function(n){var s=a.ease;if(this._prevEase){var o=this._prevEase,u=(a.browser.now()-o.start)/o.duration,m=o.easing(u+.01)-o.easing(u),w=.27/Math.sqrt(m*m+1e-4)*.01,E=Math.sqrt(.0729-w*w);s=a.bezier(w,E,.25,1)}return this._prevEase={start:a.browser.now(),duration:n,easing:s},s},$t.prototype.blur=function(){this.reset()},$t.prototype.reset=function(){this._active=!1};var Mo=function(n,s){this._clickZoom=n,this._tapZoom=s};Mo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Mo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Mo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Mo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Do=function(){this.reset()};Do.prototype.reset=function(){this._active=!1},Do.prototype.blur=function(){this.reset()},Do.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},Do.prototype.enable=function(){this._enabled=!0},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};var na=function(){this._tap=new io({numTouches:1,numTaps:1}),this.reset()};na.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},na.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},na.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var u=s[0],m=u.y-this._swipePoint.y;return this._swipePoint=u,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,o)},na.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},na.prototype.touchcancel=function(){this.reset()},na.prototype.enable=function(){this._enabled=!0},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active};var Lo=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};Lo.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Lo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Lo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Lo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Xs=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};Xs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Xs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Xs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Xs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var aa=function(n,s,o,u){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=u,this._rotationDisabled=!1,this._enabled=!0};aa.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},aa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},aa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},aa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},aa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},aa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Gi=function(n){return n.zoom||n.drag||n.pitch||n.rotate},Ro=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(a.Event);function Et(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var ft=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new po(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[a.window,"blur",void 0]];for(var u=0,m=this._listeners;u<m.length;u+=1){var w=m[u],E=w[0];k.addEventListener(E,w[1],E===a.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};ft.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],u=o[0];k.removeEventListener(u,o[1],u===a.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},ft.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new hi(s,n));var u=s.boxZoom=new ga(s,n);this._add("boxZoom",u);var m=new Bn,w=new Do;s.doubleClickZoom=new Mo(w,m),this._add("tapZoom",m),this._add("clickZoom",w);var E=new na;this._add("tapDragZoom",E);var I=s.touchPitch=new Yu;this._add("touchPitch",I);var D=new Hs(n),U=new Co(n);s.dragRotate=new Xs(n,D,U),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);var J=new Os(n),Y=new Ii(n);s.dragPan=new Lo(o,J,Y),this._add("mousePan",J),this._add("touchPan",Y,["touchZoom","touchRotate"]);var Q=new Eh,se=new _a;s.touchZoomRotate=new aa(o,se,Q,E),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]);var ae=s.scrollZoom=new $t(s,this);this._add("scrollZoom",ae,["mousePan"]);var pe=s.keyboard=new Fa;this._add("keyboard",pe),this._add("blockableMapEvent",new ht(s));for(var re=0,fe=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];re<fe.length;re+=1){var _e=fe[re];n.interactive&&n[_e]&&s[_e].enable(n[_e])}},ft.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},ft.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},ft.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},ft.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ft.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ft.prototype.isMoving=function(){return Boolean(Gi(this._eventsInProgress))||this.isZooming()},ft.prototype._blockedByActive=function(n,s,o){for(var u in n)if(u!==o&&(!s||s.indexOf(u)<0))return!0;return!1},ft.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},ft.prototype._getMapTouches=function(n){for(var s=[],o=0,u=n;o<u.length;o+=1){var m=u[o];this._el.contains(m.target)&&s.push(m)}return s},ft.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,u={needsRenderFrame:!1},m={},w={},E=n.touches?this._getMapTouches(n.touches):void 0,I=E?k.touchPos(this._el,E):k.mousePos(this._el,n),D=0,U=this._handlers;D<U.length;D+=1){var J=U[D],Y=J.handlerName,Q=J.handler,se=J.allowed;if(Q.isEnabled()){var ae=void 0;this._blockedByActive(w,se,Y)?Q.reset():Q[s||n.type]&&(ae=Q[s||n.type](n,I,E),this.mergeHandlerResult(u,m,ae,Y,o),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||Q.isActive())&&(w[Y]=Q)}}var pe={};for(var re in this._previousActiveHandlers)w[re]||(pe[re]=o);this._previousActiveHandlers=w,(Object.keys(pe).length||Et(u))&&(this._changes.push([u,m,pe]),this._triggerRenderFrame()),(Object.keys(w).length||Et(u))&&this._map._stop(!0),this._updatingCamera=!1;var fe=u.cameraAnimation;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))},ft.prototype.mergeHandlerResult=function(n,s,o,u,m){if(o){a.extend(n,o);var w={handlerName:u,originalEvent:o.originalEvent||m};o.zoomDelta!==void 0&&(s.zoom=w),o.panDelta!==void 0&&(s.drag=w),o.pitchDelta!==void 0&&(s.pitch=w),o.bearingDelta!==void 0&&(s.rotate=w)}},ft.prototype._applyChanges=function(){for(var n={},s={},o={},u=0,m=this._changes;u<m.length;u+=1){var w=m[u],E=w[0],I=w[1],D=w[2];E.panDelta&&(n.panDelta=(n.panDelta||new a.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(n.around=E.around),E.pinchAround!==void 0&&(n.pinchAround=E.pinchAround),E.noInertia&&(n.noInertia=E.noInertia),a.extend(s,I),a.extend(o,D)}this._updateMapTransform(n,s,o),this._changes=[]},ft.prototype._updateMapTransform=function(n,s,o){var u=this._map,m=u.transform;if(!Et(n))return this._fireEvents(s,o,!0);var w=n.panDelta,E=n.zoomDelta,I=n.bearingDelta,D=n.pitchDelta,U=n.around,J=n.pinchAround;J!==void 0&&(U=J),u._stop(!0),U=U||u.transform.centerPoint;var Y=m.pointLocation(w?U.sub(w):U);I&&(m.bearing+=I),D&&(m.pitch+=D),E&&(m.zoom+=E),m.setLocationAtPoint(Y,U),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},ft.prototype._fireEvents=function(n,s,o){var u=this,m=Gi(this._eventsInProgress),w=Gi(n),E={};for(var I in n)this._eventsInProgress[I]||(E[I+"start"]=n[I].originalEvent),this._eventsInProgress[I]=n[I];for(var D in!m&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(D,E[D]);for(var U in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(U,n[U].originalEvent);var J,Y={};for(var Q in this._eventsInProgress){var se=this._eventsInProgress[Q],ae=se.handlerName,pe=se.originalEvent;this._handlersById[ae].isActive()||(delete this._eventsInProgress[Q],Y[Q+"end"]=J=s[ae]||pe)}for(var re in Y)this._fireEvent(re,Y[re]);var fe=Gi(this._eventsInProgress);if(o&&(m||w)&&!fe){this._updatingCamera=!0;var _e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ee=function(Pe){return Pe!==0&&-u._bearingSnap<Pe&&Pe<u._bearingSnap};_e?(Ee(_e.bearing||this._map.getBearing())&&(_e.bearing=0),this._map.easeTo(_e,{originalEvent:J})):(this._map.fire(new a.Event("moveend",{originalEvent:J})),Ee(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ft.prototype._fireEvent=function(n,s){this._map.fire(new a.Event(n,s?{originalEvent:s}:{}))},ft.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new Ro("renderFrame",{timeStamp:s})),n._applyChanges()})},ft.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ac=function(n){function s(o,u){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=u.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,u){return this.jumpTo({center:o},u)},s.prototype.panBy=function(o,u,m){return o=a.Point.convert(o).mult(-1),this.panTo(this.transform.center,a.extend({offset:o},u),m)},s.prototype.panTo=function(o,u,m){return this.easeTo(a.extend({center:o},u),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,u){return this.jumpTo({zoom:o},u),this},s.prototype.zoomTo=function(o,u,m){return this.easeTo(a.extend({zoom:o},u),m)},s.prototype.zoomIn=function(o,u){return this.zoomTo(this.getZoom()+1,o,u),this},s.prototype.zoomOut=function(o,u){return this.zoomTo(this.getZoom()-1,o,u),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,u){return this.jumpTo({bearing:o},u),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,u){return this.jumpTo({padding:o},u),this},s.prototype.rotateTo=function(o,u,m){return this.easeTo(a.extend({bearing:o},u),m)},s.prototype.resetNorth=function(o,u){return this.rotateTo(0,a.extend({duration:1e3},o),u),this},s.prototype.resetNorthPitch=function(o,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},o),u),this},s.prototype.snapToNorth=function(o,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,u):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,u){return this.jumpTo({pitch:o},u),this},s.prototype.cameraForBounds=function(o,u){o=a.LngLatBounds.convert(o);var m=u&&u.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),m,u)},s.prototype._cameraForBoxAndBearing=function(o,u,m,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var I=w.padding;w.padding={top:I,bottom:I,right:I,left:I}}w.padding=a.extend(E,w.padding);var D=this.transform,U=D.padding,J=D.project(a.LngLat.convert(o)),Y=D.project(a.LngLat.convert(u)),Q=J.rotate(-m*Math.PI/180),se=Y.rotate(-m*Math.PI/180),ae=new a.Point(Math.max(Q.x,se.x),Math.max(Q.y,se.y)),pe=new a.Point(Math.min(Q.x,se.x),Math.min(Q.y,se.y)),re=ae.sub(pe),fe=(D.width-(U.left+U.right+w.padding.left+w.padding.right))/re.x,_e=(D.height-(U.top+U.bottom+w.padding.top+w.padding.bottom))/re.y;if(!(_e<0||fe<0)){var Ee=Math.min(D.scaleZoom(D.scale*Math.min(fe,_e)),w.maxZoom),Pe=typeof w.offset.x=="number"?new a.Point(w.offset.x,w.offset.y):a.Point.convert(w.offset),Ce=new a.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(m*Math.PI/180),Oe=Pe.add(Ce).mult(D.scale/D.zoomScale(Ee));return{center:D.unproject(J.add(Y).div(2).sub(Oe)),zoom:Ee,bearing:m}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,u,m){return this._fitInternal(this.cameraForBounds(o,u),u,m)},s.prototype.fitScreenCoordinates=function(o,u,m,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(o)),this.transform.pointLocation(a.Point.convert(u)),m,w),w,E)},s.prototype._fitInternal=function(o,u,m){return o?(delete(u=a.extend(o,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this},s.prototype.jumpTo=function(o,u){this.stop();var m=this.transform,w=!1,E=!1,I=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(w=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=a.LngLat.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(E=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(I=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),w&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),E&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),I&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u))},s.prototype.easeTo=function(o,u){var m=this;this._stop(!1,o.easeId),((o=a.extend({offset:[0,0],duration:500,easing:a.ease},o)).animate===!1||!o.essential&&a.browser.prefersReducedMotion)&&(o.duration=0);var w=this.transform,E=this.getZoom(),I=this.getBearing(),D=this.getPitch(),U=this.getPadding(),J="zoom"in o?+o.zoom:E,Y="bearing"in o?this._normalizeBearing(o.bearing,I):I,Q="pitch"in o?+o.pitch:D,se="padding"in o?o.padding:w.padding,ae=a.Point.convert(o.offset),pe=w.centerPoint.add(ae),re=w.pointLocation(pe),fe=a.LngLat.convert(o.center||re);this._normalizeCenter(fe);var _e,Ee,Pe=w.project(re),Ce=w.project(fe).sub(Pe),Oe=w.zoomScale(J-E);o.around&&(_e=a.LngLat.convert(o.around),Ee=w.locationPoint(_e));var Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==E,this._rotating=this._rotating||I!==Y,this._pitching=this._pitching||Q!==D,this._padding=!w.isPaddingEqual(se),this._easeId=o.easeId,this._prepareEase(u,o.noMoveStart,Ze),this._ease(function(We){if(m._zooming&&(w.zoom=a.number(E,J,We)),m._rotating&&(w.bearing=a.number(I,Y,We)),m._pitching&&(w.pitch=a.number(D,Q,We)),m._padding&&(w.interpolatePadding(U,se,We),pe=w.centerPoint.add(ae)),_e)w.setLocationAtPoint(_e,Ee);else{var He=w.zoomScale(w.zoom-E),ut=J>E?Math.min(2,Oe):Math.max(.5,Oe),St=Math.pow(ut,1-We),dt=w.unproject(Pe.add(Ce.mult(We*St)).mult(He));w.setLocationAtPoint(w.renderWorldCopies?dt.wrap():dt,pe)}m._fireMoveEvents(u)},function(We){m._afterEase(u,We)},o),this},s.prototype._prepareEase=function(o,u,m){m===void 0&&(m={}),this._moving=!0,u||m.moving||this.fire(new a.Event("movestart",o)),this._zooming&&!m.zooming&&this.fire(new a.Event("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new a.Event("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new a.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new a.Event("move",o)),this._zooming&&this.fire(new a.Event("zoom",o)),this._rotating&&this.fire(new a.Event("rotate",o)),this._pitching&&this.fire(new a.Event("pitch",o))},s.prototype._afterEase=function(o,u){if(!this._easeId||!u||this._easeId!==u){delete this._easeId;var m=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new a.Event("zoomend",o)),w&&this.fire(new a.Event("rotateend",o)),E&&this.fire(new a.Event("pitchend",o)),this.fire(new a.Event("moveend",o))}},s.prototype.flyTo=function(o,u){var m=this;if(!o.essential&&a.browser.prefersReducedMotion){var w=a.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,u)}this.stop(),o=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},o);var E=this.transform,I=this.getZoom(),D=this.getBearing(),U=this.getPitch(),J=this.getPadding(),Y="zoom"in o?a.clamp(+o.zoom,E.minZoom,E.maxZoom):I,Q="bearing"in o?this._normalizeBearing(o.bearing,D):D,se="pitch"in o?+o.pitch:U,ae="padding"in o?o.padding:E.padding,pe=E.zoomScale(Y-I),re=a.Point.convert(o.offset),fe=E.centerPoint.add(re),_e=E.pointLocation(fe),Ee=a.LngLat.convert(o.center||_e);this._normalizeCenter(Ee);var Pe=E.project(_e),Ce=E.project(Ee).sub(Pe),Oe=o.curve,Ze=Math.max(E.width,E.height),We=Ze/pe,He=Ce.mag();if("minZoom"in o){var ut=a.clamp(Math.min(o.minZoom,I,Y),E.minZoom,E.maxZoom),St=Ze/E.zoomScale(ut-I);Oe=Math.sqrt(St/He*2)}var dt=Oe*Oe;function _t(Mt){var Rt=(We*We-Ze*Ze+(Mt?-1:1)*dt*dt*He*He)/(2*(Mt?We:Ze)*dt*He);return Math.log(Math.sqrt(Rt*Rt+1)-Rt)}function er(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function at(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}var Ut=_t(0),Gt=function(Mt){return at(Ut)/at(Ut+Oe*Mt)},qt=function(Mt){return Ze*((at(Ut)*(er(Rt=Ut+Oe*Mt)/at(Rt))-er(Ut))/dt)/He;var Rt},Ft=(_t(1)-Ut)/Oe;if(Math.abs(He)<1e-6||!isFinite(Ft)){if(Math.abs(Ze-We)<1e-6)return this.easeTo(o,u);var Zt=We<Ze?-1:1;Ft=Math.abs(Math.log(We/Ze))/Oe,qt=function(){return 0},Gt=function(Mt){return Math.exp(Zt*Oe*Mt)}}return o.duration="duration"in o?+o.duration:1e3*Ft/("screenSpeed"in o?+o.screenSpeed/Oe:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=D!==Q,this._pitching=se!==U,this._padding=!E.isPaddingEqual(ae),this._prepareEase(u,!1),this._ease(function(Mt){var Rt=Mt*Ft,nn=1/Gt(Rt);E.zoom=Mt===1?Y:I+E.scaleZoom(nn),m._rotating&&(E.bearing=a.number(D,Q,Mt)),m._pitching&&(E.pitch=a.number(U,se,Mt)),m._padding&&(E.interpolatePadding(J,ae,Mt),fe=E.centerPoint.add(re));var Mi=Mt===1?Ee:E.unproject(Pe.add(Ce.mult(qt(Rt))).mult(nn));E.setLocationAtPoint(E.renderWorldCopies?Mi.wrap():Mi,fe),m._fireMoveEvents(u)},function(){return m._afterEase(u)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!o){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(o,u,m){m.animate===!1||m.duration===0?(o(1),u()):(this._easeStart=a.browser.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,u){o=a.wrap(o,-180,180);var m=Math.abs(o-u);return Math.abs(o-360-u)<m&&(o-=360),Math.abs(o+360-u)<m&&(o+=360),o},s.prototype._normalizeCenter=function(o){var u=this.transform;if(u.renderWorldCopies&&!u.lngRange){var m=o.lng-u.center.lng;o.lng+=m>180?-360:m<-180?360:0}},s}(a.Evented),Ca=function(n){n===void 0&&(n={}),this.options=n,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ca.prototype.getDefaultPosition=function(){return"bottom-right"},Ca.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ca.prototype.onRemove=function(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ca.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},Ca.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ca.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(u,m,w){return m.value&&(u+=m.key+"="+m.value+(w<s.length-1?"&":"")),u},"?");n.href=a.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},Ca.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ca.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(I){return typeof I!="string"?"":I})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var u in o){var m=o[u];if(m.used){var w=m.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(I,D){return I.length-D.length});var E=(n=n.filter(function(I,D){for(var U=D+1;U<n.length;U++)if(n[U].indexOf(I)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,n.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ca.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Va=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};Va.prototype.onAdd=function(n){this._map=n,this._container=k.create("div","mapboxgl-ctrl");var s=k.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Va.prototype.onRemove=function(){k.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Va.prototype.getDefaultPosition=function(){return"bottom-left"},Va.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Va.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},Va.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var bn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};bn.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},bn.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,u=s?this._queue.concat(s):this._queue;o<u.length;o+=1){var m=u[o];if(m.id===n)return void(m.cancelled=!0)}},bn.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,u=s;o<u.length;o+=1){var m=u[o];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},bn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var cs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ul=a.window.HTMLImageElement,Tl=a.window.HTMLElement,Br=a.window.ImageBitmap,qn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},cl=function(n){function s(u){var m=this;if((u=a.extend({},qn,u)).minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new lr(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies);if(n.call(this,w,u),this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=u.collectResourceTiming,this._renderTaskQueue=new bn,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},cs,u.locale),this._clickTolerance=u.clickTolerance,this._requestManager=new a.RequestManager(u.transformRequest,u.accessToken),typeof u.container=="string"){if(this._container=a.window.document.getElementById(u.container),!this._container)throw new Error("Container '"+u.container+"' not found.")}else{if(!(u.container instanceof Tl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ft(this,u),this._hash=u.hash&&new Rn(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,a.extend({},u.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=u.localIdeographFontFamily,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new Ca({customAttribution:u.customAttribution})),this.addControl(new Va,u.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(E){m._update(E.dataType==="style"),m.fire(new a.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){m.fire(new a.Event(E.dataType+"dataloading",E))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(u,m){if(m===void 0&&(m=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=u.onAdd(this);this._controls.push(u);var E=this._controlPositions[m];return m.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},s.prototype.removeControl=function(u){if(!u||!u.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(u);return m>-1&&this._controls.splice(m,1),u.onRemove(this),this},s.prototype.hasControl=function(u){return this._controls.indexOf(u)>-1},s.prototype.resize=function(u){var m=this._containerDimensions(),w=m[0],E=m[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var I=!this._moving;return I&&this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),this.fire(new a.Event("resize",u)),I&&this.fire(new a.Event("moveend",u)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(u){return this.transform.setMaxBounds(a.LngLatBounds.convert(u)),this._update()},s.prototype.setMinZoom=function(u){if((u=u==null?-2:u)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(u){if((u=u==null?22:u)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(u){if((u=u==null?0:u)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(u){if((u=u==null?60:u)>60)throw new Error("maxPitch must be less than or equal to 60");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(u){return this.transform.renderWorldCopies=u,this._update()},s.prototype.project=function(u){return this.transform.locationPoint(a.LngLat.convert(u))},s.prototype.unproject=function(u){return this.transform.pointLocation(a.Point.convert(u))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(u,m,w){var E,I=this;if(u==="mouseenter"||u==="mouseover"){var D=!1;return{layer:m,listener:w,delegates:{mousemove:function(J){var Y=I.getLayer(m)?I.queryRenderedFeatures(J.point,{layers:[m]}):[];Y.length?D||(D=!0,w.call(I,new Fr(u,I,J.originalEvent,{features:Y}))):D=!1},mouseout:function(){D=!1}}}}if(u==="mouseleave"||u==="mouseout"){var U=!1;return{layer:m,listener:w,delegates:{mousemove:function(J){(I.getLayer(m)?I.queryRenderedFeatures(J.point,{layers:[m]}):[]).length?U=!0:U&&(U=!1,w.call(I,new Fr(u,I,J.originalEvent)))},mouseout:function(J){U&&(U=!1,w.call(I,new Fr(u,I,J.originalEvent)))}}}}return{layer:m,listener:w,delegates:(E={},E[u]=function(J){var Y=I.getLayer(m)?I.queryRenderedFeatures(J.point,{layers:[m]}):[];Y.length&&(J.features=Y,w.call(I,J),delete J.features)},E)}},s.prototype.on=function(u,m,w){if(w===void 0)return n.prototype.on.call(this,u,m);var E=this._createDelegatedListener(u,m,w);for(var I in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(E),E.delegates)this.on(I,E.delegates[I]);return this},s.prototype.once=function(u,m,w){if(w===void 0)return n.prototype.once.call(this,u,m);var E=this._createDelegatedListener(u,m,w);for(var I in E.delegates)this.once(I,E.delegates[I]);return this},s.prototype.off=function(u,m,w){var E=this;return w===void 0?n.prototype.off.call(this,u,m):(this._delegatedListeners&&this._delegatedListeners[u]&&function(I){for(var D=I[u],U=0;U<D.length;U++){var J=D[U];if(J.layer===m&&J.listener===w){for(var Y in J.delegates)E.off(Y,J.delegates[Y]);return D.splice(U,1),E}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(u,m){if(!this.style)return[];var w;if(m!==void 0||u===void 0||u instanceof a.Point||Array.isArray(u)||(m=u,u=void 0),m=m||{},(u=u||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof u[0]=="number")w=[a.Point.convert(u)];else{var E=a.Point.convert(u[0]),I=a.Point.convert(u[1]);w=[E,new a.Point(I.x,E.y),I,new a.Point(E.x,I.y),E]}return this.style.queryRenderedFeatures(w,m,this.transform)},s.prototype.querySourceFeatures=function(u,m){return this.style.querySourceFeatures(u,m)},s.prototype.setStyle=function(u,m){return(m=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&u?(this._diffStyle(u,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(u,m))},s.prototype._getUIString=function(u){var m=this._locale[u];if(m==null)throw new Error("Missing UI string '"+u+"'");return m},s.prototype._updateStyle=function(u,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),u?(this.style=new yi(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof u=="string"?this.style.loadURL(u):this.style.loadJSON(u),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new yi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(u,m){var w=this;if(typeof u=="string"){var E=this._requestManager.normalizeStyleURL(u),I=this._requestManager.transformRequest(E,a.ResourceType.Style);a.getJSON(I,function(D,U){D?w.fire(new a.ErrorEvent(D)):U&&w._updateDiff(U,m)})}else typeof u=="object"&&this._updateDiff(u,m)},s.prototype._updateDiff=function(u,m){try{this.style.setState(u)&&this._update(!0)}catch(w){a.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(u,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(u,m){return this._lazyInitEmptyStyle(),this.style.addSource(u,m),this._update(!0)},s.prototype.isSourceLoaded=function(u){var m=this.style&&this.style.sourceCaches[u];if(m!==void 0)return m.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+u+"'")))},s.prototype.areTilesLoaded=function(){var u=this.style&&this.style.sourceCaches;for(var m in u){var w=u[m]._tiles;for(var E in w){var I=w[E];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(u,m,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(u,m,w)},s.prototype.removeSource=function(u){return this.style.removeSource(u),this._update(!0)},s.prototype.getSource=function(u){return this.style.getSource(u)},s.prototype.addImage=function(u,m,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var I=w.sdf;I===void 0&&(I=!1);var D=w.stretchX,U=w.stretchY,J=w.content;if(this._lazyInitEmptyStyle(),m instanceof ul||Br&&m instanceof Br){var Y=a.browser.getImageData(m);this.style.addImage(u,{data:new a.RGBAImage({width:Y.width,height:Y.height},Y.data),pixelRatio:E,stretchX:D,stretchY:U,content:J,sdf:I,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Q=m;this.style.addImage(u,{data:new a.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:E,stretchX:D,stretchY:U,content:J,sdf:I,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,u)}},s.prototype.updateImage=function(u,m){var w=this.style.getImage(u);if(!w)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=m instanceof ul||Br&&m instanceof Br?a.browser.getImageData(m):m,I=E.width,D=E.height,U=E.data;return I===void 0||D===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):I!==w.data.width||D!==w.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(U,!(m instanceof ul||Br&&m instanceof Br)),void this.style.updateImage(u,w))},s.prototype.hasImage=function(u){return u?!!this.style.getImage(u):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(u){this.style.removeImage(u)},s.prototype.loadImage=function(u,m){a.getImage(this._requestManager.transformRequest(u,a.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(u,m){return this._lazyInitEmptyStyle(),this.style.addLayer(u,m),this._update(!0)},s.prototype.moveLayer=function(u,m){return this.style.moveLayer(u,m),this._update(!0)},s.prototype.removeLayer=function(u){return this.style.removeLayer(u),this._update(!0)},s.prototype.getLayer=function(u){return this.style.getLayer(u)},s.prototype.setLayerZoomRange=function(u,m,w){return this.style.setLayerZoomRange(u,m,w),this._update(!0)},s.prototype.setFilter=function(u,m,w){return w===void 0&&(w={}),this.style.setFilter(u,m,w),this._update(!0)},s.prototype.getFilter=function(u){return this.style.getFilter(u)},s.prototype.setPaintProperty=function(u,m,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(u,m,w,E),this._update(!0)},s.prototype.getPaintProperty=function(u,m){return this.style.getPaintProperty(u,m)},s.prototype.setLayoutProperty=function(u,m,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(u,m,w,E),this._update(!0)},s.prototype.getLayoutProperty=function(u,m){return this.style.getLayoutProperty(u,m)},s.prototype.setLight=function(u,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(u,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(u,m){return this.style.setFeatureState(u,m),this._update()},s.prototype.removeFeatureState=function(u,m){return this.style.removeFeatureState(u,m),this._update()},s.prototype.getFeatureState=function(u){return this.style.getFeatureState(u)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var u=0,m=0;return this._container&&(u=this._container.clientWidth||400,m=this._container.clientHeight||300),[u,m]},s.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=k.create("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=k.create("div","mapboxgl-canvas-container",u);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=k.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=k.create("div","mapboxgl-control-container",u),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(D){I[D]=k.create("div","mapboxgl-ctrl-"+D,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(u,m){var w=a.browser.devicePixelRatio||1;this._canvas.width=w*u,this._canvas.height=w*m,this._canvas.style.width=u+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var u=a.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",u)||this._canvas.getContext("experimental-webgl",u);m?(this.painter=new Cr(m,this.transform),a.webpSupported.testSupport(m)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:u}))},s.prototype._contextRestored=function(u){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:u}))},s.prototype._onMapScroll=function(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(u){return this._update(),this._renderTaskQueue.add(u)},s.prototype._cancelRenderFrame=function(u){this._renderTaskQueue.remove(u)},s.prototype._render=function(u){var m,w=this,E=0,I=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=I.createQueryEXT(),I.beginQueryEXT(I.TIME_ELAPSED_EXT,m),E=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(u),!this._removed){var D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var U=this.transform.zoom,J=a.browser.now();this.style.zoomHistory.update(U,J);var Y=new a.EvaluationParameters(U,{now:J,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=Y.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(D=!0,this._crossFadingFactor=Q),this.style.update(Y)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var se=a.browser.now()-E;I.endQueryEXT(I.TIME_ELAPSED_EXT,m),setTimeout(function(){var re=I.getQueryObjectEXT(m,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(m),w.fire(new a.Event("gpu-timing-frame",{cpuTime:se,gpuTime:re}))},50)}if(this.listens("gpu-timing-layer")){var ae=this.painter.collectGpuTimers();setTimeout(function(){var re=w.painter.queryGpuTimers(ae);w.fire(new a.Event("gpu-timing-layer",{layerTimes:re}))},50)}var pe=this._sourcesDirty||this._styleDirty||this._placementDirty;return pe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||pe||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var u=0,m=this._controls;u<m.length;u+=1)m[u].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),hl(this._canvasContainer),hl(this._controlContainer),hl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},s.prototype.triggerRepaint=function(){var u=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(m){u._frame=null,u._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(u){this._trackResize&&this.resize({originalEvent:u})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(u){this._showPadding!==u&&(this._showPadding=u,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(u){this._vertices=u,this._update()},s.prototype._setCacheLimits=function(u,m){a.setCacheLimits(u,m)},o.version.get=function(){return a.version},Object.defineProperties(s.prototype,o),s}(Ac);function hl(n){n.parentNode&&n.parentNode.removeChild(n)}var hs={showCompass:!0,showZoom:!0,visualizePitch:!1},oa=function(n){var s=this;this.options=a.extend({},hs,n),this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),k.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),k.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=k.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};oa.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},oa.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},oa.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xn(this._map,this._compass,this.options.visualizePitch)),this._container},oa.prototype.onRemove=function(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},oa.prototype._createButton=function(n,s){var o=k.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},oa.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var xn=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Hs({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new Co({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(s,"mousedown",this.mousedown),k.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(s,"touchmove",this.touchmove),k.addEventListener(s,"touchend",this.touchend),k.addEventListener(s,"touchcancel",this.reset)};function Al(n,s,o){if(n=new a.LngLat(n.lng,n.lat),s){var u=new a.LngLat(n.lng-360,n.lat),m=new a.LngLat(n.lng+360,n.lat),w=o.locationPoint(n).distSqr(s);o.locationPoint(u).distSqr(s)<w?n=u:o.locationPoint(m).distSqr(s)<w&&(n=m)}for(;Math.abs(n.lng-o.center.lng)>180;){var E=o.locationPoint(n);if(E.x>=0&&E.y>=0&&E.x<=o.width&&E.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}xn.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),k.disableDrag()},xn.prototype.move=function(n,s){var o=this.map,u=this.mouseRotate.mousemoveWindow(n,s);if(u&&u.bearingDelta&&o.setBearing(o.getBearing()+u.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&o.setPitch(o.getPitch()+m.pitchDelta)}},xn.prototype.off=function(){var n=this.element;k.removeEventListener(n,"mousedown",this.mousedown),k.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(n,"touchmove",this.touchmove),k.removeEventListener(n,"touchend",this.touchend),k.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},xn.prototype.offTemp=function(){k.enableDrag(),k.removeEventListener(a.window,"mousemove",this.mousemove),k.removeEventListener(a.window,"mouseup",this.mouseup)},xn.prototype.mousedown=function(n){this.down(a.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),k.mousePos(this.element,n)),k.addEventListener(a.window,"mousemove",this.mousemove),k.addEventListener(a.window,"mouseup",this.mouseup)},xn.prototype.mousemove=function(n){this.move(n,k.mousePos(this.element,n))},xn.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},xn.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},xn.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},xn.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},xn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ao={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function zc(n,s,o){var u=n.classList;for(var m in ao)u.remove("mapboxgl-"+o+"-anchor-"+m);u.add("mapboxgl-"+o+"-anchor-"+s)}var zl,Jl=function(n){function s(o,u){if(n.call(this),(o instanceof a.window.HTMLElement||u)&&(o=a.extend({element:o},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=a.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");var m=k.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var w=k.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=k.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var I=k.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");for(var D=0,U=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];D<U.length;D+=1){var J=U[D],Y=k.createNS("http://www.w3.org/2000/svg","ellipse");Y.setAttributeNS(null,"opacity","0.04"),Y.setAttributeNS(null,"cx","10.5"),Y.setAttributeNS(null,"cy","5.80029008"),Y.setAttributeNS(null,"rx",J.rx),Y.setAttributeNS(null,"ry",J.ry),I.appendChild(Y)}var Q=k.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);var se=k.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(se);var ae=k.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"fill","#000000");var pe=k.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ae.appendChild(pe);var re=k.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");var fe=k.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _e=k.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");var Ee=k.createNS("http://www.w3.org/2000/svg","circle");Ee.setAttributeNS(null,"fill","#FFFFFF"),Ee.setAttributeNS(null,"cx","5.5"),Ee.setAttributeNS(null,"cy","5.5"),Ee.setAttributeNS(null,"r","5.4999962"),fe.appendChild(_e),fe.appendChild(Ee),E.appendChild(I),E.appendChild(Q),E.appendChild(ae),E.appendChild(re),E.appendChild(fe),m.appendChild(E),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=a.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Pe){Pe.preventDefault()}),this._element.addEventListener("mousedown",function(Pe){Pe.preventDefault()}),zc(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var u=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[u,-1*(24.6+u)],"bottom-right":[-u,-1*(24.6+u)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var u=o.code,m=o.charCode||o.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var u=o.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Al(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(u="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,ao[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+u)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=a.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var u=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(a.Evented),pl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ps=0,fl=!1,dl=function(n){function s(o){n.call(this),this.options=a.extend({},pl,o),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var u;return this._map=o,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,zl!==void 0?u(zl):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(m){u(zl=m.state!=="denied")}):u(zl=!!a.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ps=0,fl=!1},s.prototype._isOutOfMapMaxBounds=function(o){var u=this._map.getMaxBounds(),m=o.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var u=new a.LngLat(o.coords.longitude,o.coords.latitude),m=o.coords.accuracy,w=this._map.getBearing(),E=a.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(m),E,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var u=new a.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,u=this._map.unproject([0,o]),m=this._map.unproject([1,o]),w=u.distanceTo(m),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&fl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var u=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=k.create("button","mapboxgl-ctrl-geolocate",this._container),k.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Jl(this._dotElement),this._circleElement=k.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Jl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||u._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(u._watchState="BACKGROUND",u._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),u._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),u.fire(new a.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ps--,fl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ps>1?(o={maximumAge:6e5,timeout:0},fl=!0):(o=this.options.positionOptions,fl=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(a.Evented),fs={maxWidth:100,unit:"metric"},Ws=function(n){this.options=a.extend({},fs,n),a.bindAll(["_onMove","setUnit"],this)};function xu(n,s,o){var u=o&&o.maxWidth||100,m=n._container.clientHeight/2,w=n.unproject([0,m]),E=n.unproject([u,m]),I=w.distanceTo(E);if(o&&o.unit==="imperial"){var D=3.2808*I;D>5280?yo(s,u,D/5280,n._getUIString("ScaleControl.Miles")):yo(s,u,D,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?yo(s,u,I/1852,n._getUIString("ScaleControl.NauticalMiles")):I>=1e3?yo(s,u,I/1e3,n._getUIString("ScaleControl.Kilometers")):yo(s,u,I,n._getUIString("ScaleControl.Meters"))}function yo(n,s,o,u){var m,w,E,I=(m=o,(w=Math.pow(10,(""+Math.floor(m)).length-1))*(E=(E=m/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(D){var U=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*U)/U}(E)));n.style.width=s*(I/o)+"px",n.innerHTML=I+"&nbsp;"+u}Ws.prototype.getDefaultPosition=function(){return"bottom-left"},Ws.prototype._onMove=function(){xu(this._map,this._container,this.options)},Ws.prototype.onAdd=function(n){return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ws.prototype.onRemove=function(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ws.prototype.setUnit=function(n){this.options.unit=n,xu(this._map,this._container,this.options)};var Bo=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof a.window.HTMLElement?this._container=n.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Bo.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Bo.prototype.onRemove=function(){k.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Bo.prototype._setupUI=function(){var n=this._fullscreenButton=k.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Bo.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},Bo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Bo.prototype._isFullscreen=function(){return this._fullscreen},Bo.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Bo.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ds={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},oo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ms=function(n){function s(o){n.call(this),this.options=a.extend(Object.create(ds),o),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(a.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var u,m=a.window.document.createDocumentFragment(),w=a.window.document.createElement("body");for(w.innerHTML=o;u=w.firstChild;)m.appendChild(u);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=k.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var u=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=k.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Y){return u._container.classList.add(Y)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Al(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var m=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),w=this.options.anchor,E=function Y(Q){if(Q){if(typeof Q=="number"){var se=Math.round(Math.sqrt(.5*Math.pow(Q,2)));return{center:new a.Point(0,0),top:new a.Point(0,Q),"top-left":new a.Point(se,se),"top-right":new a.Point(-se,se),bottom:new a.Point(0,-Q),"bottom-left":new a.Point(se,-se),"bottom-right":new a.Point(-se,-se),left:new a.Point(Q,0),right:new a.Point(-Q,0)}}if(Q instanceof a.Point||Array.isArray(Q)){var ae=a.Point.convert(Q);return{center:ae,top:ae,"top-left":ae,"top-right":ae,bottom:ae,"bottom-left":ae,"bottom-right":ae,left:ae,right:ae}}return{center:a.Point.convert(Q.center||[0,0]),top:a.Point.convert(Q.top||[0,0]),"top-left":a.Point.convert(Q["top-left"]||[0,0]),"top-right":a.Point.convert(Q["top-right"]||[0,0]),bottom:a.Point.convert(Q.bottom||[0,0]),"bottom-left":a.Point.convert(Q["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Q["bottom-right"]||[0,0]),left:a.Point.convert(Q.left||[0,0]),right:a.Point.convert(Q.right||[0,0])}}return Y(new a.Point(0,0))}(this.options.offset);if(!w){var I,D=this._container.offsetWidth,U=this._container.offsetHeight;I=m.y+E.bottom.y<U?["top"]:m.y>this._map.transform.height-U?["bottom"]:[],m.x<D/2?I.push("left"):m.x>this._map.transform.width-D/2&&I.push("right"),w=I.length===0?"bottom":I.join("-")}var J=m.add(E[w]).round();k.setTransform(this._container,ao[w]+" translate("+J.x+"px,"+J.y+"px)"),zc(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(oo);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(a.Evented),wu={version:a.version,supported:T,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:cl,NavigationControl:oa,GeolocateControl:dl,AttributionControl:Ca,ScaleControl:Ws,FullscreenControl:Bo,Popup:ms,Marker:Jl,Style:yi,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){Me().acquire(Ie)},clearPrewarmedResources:function(){var n=it;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Ie),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(n){a.config.ACCESS_TOKEN=n},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(n){a.config.API_URL=n},get workerCount(){return je.workerCount},set workerCount(n){je.workerCount=n},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){a.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){a.clearTileCache(n)},workerUrl:""};return wu}),v})})(nf);const H_=nf.exports;function ey(c){let h;const f=c[15].default,y=Jh(f,c,c[14],null);return{c(){y&&y.c()},l(v){y&&y.l(v)},m(v,_){y&&y.m(v,_),h=!0},p(v,_){y&&y.p&&(!h||_&16384)&&Yh(y,f,v,v[14],h?$h(f,v[14],_,null):Qh(v[14]),null)},i(v){h||(mt(y,v),h=!0)},o(v){xt(y,v),h=!1},d(v){y&&y.d(v)}}}function X_(c){let h,f,y,v=c[0]&&ey(c);return{c(){h=K("div"),v&&v.c(),this.h()},l(_){h=H(_,"DIV",{class:!0,id:!0});var a=X(h);v&&v.l(a),a.forEach(C),this.h()},h(){z(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),z(h,"id",c[1]),Ku(()=>c[16].call(h))},m(_,a){ke(_,h,a),v&&v.m(h,null),f=Hu(h,c[16].bind(h)),c[17](h),y=!0},p(_,[a]){_[0]?v?(v.p(_,a),a&1&&mt(v,1)):(v=ey(_),v.c(),mt(v,1),v.m(h,null)):v&&(El(),xt(v,1,1,()=>{v=null}),Sl()),(!y||a&2)&&z(h,"id",_[1])},i(_){y||(mt(v),y=!0)},o(_){xt(v),y=!1},d(_){_&&C(h),v&&v.d(),f(),c[17](null)}}}function W_(c,h,f){let{$$slots:y={},$$scope:v}=h,{map:_}=h,{id:a="map"}=h,{location:T={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:k="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:B=!0}=h,{minzoom:R=0}=h,{maxzoom:N=14}=h,{zoom:F=null}=h,{scrollzoom:le=!0}=h,{geolocate:ee=!0}=h,{zoomcontrol:ze=!0}=h,{options:ve={}}=h,Te,Ne;cg("map",{getMap:()=>_}),T.bounds?ve={...ve,bounds:T.bounds}:T.lon&&T.lat&&(ve={...ve,center:[T.lon,T.lat]},T.zoom&&(ve.zoom=T.zoom)),hg(()=>{const $e=document.createElement("link");return $e.rel="stylesheet",$e.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",$e.onload=()=>{f(0,_=new nf.exports.Map({container:Te,style:k,minZoom:R,maxZoom:N,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:B,...ve})),ze&&_.addControl(new nf.exports.NavigationControl({showCompass:!1})),le||_.scrollZoom.disable(),ee&&_.addControl(new nf.exports.GeolocateControl),_.on("load",()=>{f(4,F=_.getZoom())}),_.on("zoom",()=>{f(4,F=_.getZoom())})},document.head.appendChild($e),()=>{_.remove(),$e.parentNode.removeChild($e)}});function zt(){let $e=document.getElementsByClassName("mapboxgl-canvas");$e[0]&&($e[0].style.width="100%",_.resize())}function Dt(){Ne=this.clientWidth,f(2,Ne)}function ct($e){Tc[$e?"unshift":"push"](()=>{Te=$e,f(3,Te)})}return c.$$set=$e=>{"map"in $e&&f(0,_=$e.map),"id"in $e&&f(1,a=$e.id),"location"in $e&&f(6,T=$e.location),"style"in $e&&f(7,k=$e.style),"interactive"in $e&&f(8,B=$e.interactive),"minzoom"in $e&&f(9,R=$e.minzoom),"maxzoom"in $e&&f(10,N=$e.maxzoom),"zoom"in $e&&f(4,F=$e.zoom),"scrollzoom"in $e&&f(11,le=$e.scrollzoom),"geolocate"in $e&&f(12,ee=$e.geolocate),"zoomcontrol"in $e&&f(13,ze=$e.zoomcontrol),"options"in $e&&f(5,ve=$e.options),"$$scope"in $e&&f(14,v=$e.$$scope)},c.$$.update=()=>{c.$$.dirty&4&&Ne&&zt()},[_,a,Ne,Te,F,ve,T,k,B,R,N,le,ee,ze,v,y,Dt,ct]}class J_ extends ws{constructor(h){super(),Es(this,h,W_,X_,Ss,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function ty(c){let h;const f=c[11].default,y=Jh(f,c,c[10],null);return{c(){y&&y.c()},l(v){y&&y.l(v)},m(v,_){y&&y.m(v,_),h=!0},p(v,_){y&&y.p&&(!h||_&1024)&&Yh(y,f,v,v[10],h?$h(f,v[10],_,null):Qh(v[10]),null)},i(v){h||(mt(y,v),h=!0)},o(v){xt(y,v),h=!1},d(v){y&&y.d(v)}}}function Y_(c){let h,f,y=c[0]&&ty(c);return{c(){y&&y.c(),h=ha()},l(v){y&&y.l(v),h=ha()},m(v,_){y&&y.m(v,_),ke(v,h,_),f=!0},p(v,[_]){v[0]?y?(y.p(v,_),_&1&&mt(y,1)):(y=ty(v),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(El(),xt(y,1,1,()=>{y=null}),Sl())},i(v){f||(mt(y),f=!0)},o(v){xt(y),f=!1},d(v){y&&y.d(v),v&&C(h)}}}function Q_(c,h,f){let{$$slots:y={},$$scope:v}=h,{id:_}=h,{type:a}=h,{url:T=null}=h,{props:k={}}=h,{data:B=null}=h,{layer:R=null}=h,{promoteId:N=null}=h,{minzoom:F=null}=h,{maxzoom:le=null}=h,ee=!1;const{getMap:ze}=lf("map"),ve=ze();ve.getSource(_)&&ve.removeSource(_);function Te(){ve.isSourceLoaded(_)?(f(0,ee=!0),console.log(_+" loaded!")):setTimeout(()=>{console.log("..."),Te()},500)}function Ne(){ve.isStyleLoaded(_)?(zt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),Ne()},500)}F&&(k.minzoom=F),le&&(k.maxzoom=le),R&&N?(k.promoteId={},k.promoteId[R]=N):N&&(k.promoteId=N);function zt(){console.log(_+" map source loading..."),a=="geojson"?B?(ve.addSource(_,{type:a,data:B,...k}),Te()):T&&(ve.addSource(_,{type:a,data:T,...k}),Te()):a=="vector"&&(ve.addSource(_,{type:a,tiles:[T],...k}),Te())}Ne();function Dt(){ve.getSource(_).setData(B)}return c.$$set=ct=>{"id"in ct&&f(2,_=ct.id),"type"in ct&&f(3,a=ct.type),"url"in ct&&f(4,T=ct.url),"props"in ct&&f(1,k=ct.props),"data"in ct&&f(5,B=ct.data),"layer"in ct&&f(6,R=ct.layer),"promoteId"in ct&&f(7,N=ct.promoteId),"minzoom"in ct&&f(8,F=ct.minzoom),"maxzoom"in ct&&f(9,le=ct.maxzoom),"$$scope"in ct&&f(10,v=ct.$$scope)},c.$$.update=()=>{c.$$.dirty&33&&ee&&B&&Dt()},[ee,k,_,a,T,B,R,N,F,le,v,y]}class $_ extends ws{constructor(h){super(),Es(this,h,Q_,Y_,Ss,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function ev(c,h,f){const{Popup:y}=H_,v=ug(),_=new y({closeButton:!1,closeOnClick:!1});let{id:a}=h,{source:T}=h,{sourceLayer:k=null}=h,{type:B}=h,{filter:R=null}=h,{layout:N={}}=h,{paint:F={}}=h,{data:le=null}=h,{code:ee=null}=h,{name:ze="name"}=h,{colorCode:ve=null}=h,{click:Te=!1}=h,{ignoreClick:Ne=!1}=h,{clickCenter:zt=!1}=h,{selected:Dt=null}=h,{hover:ct=!1}=h,{hovered:$e=null}=h,{highlight:wr=!1}=h,{highlightKey:cr="highlighted"}=h,{highlighted:Wt=[]}=h,{order:wt=null}=h,{maxzoom:vt=null}=h,{minzoom:vr=null}=h,{isChild:Bt=!1}=h;const{getMap:Er}=lf("map"),Je=Er();let Qt=null,Zr=null,Qr=[];Je.getLayer(a)&&Je.removeLayer(a);let yr={id:a,type:B,source:T,paint:F,layout:N};R&&(yr.filter=R),k&&(yr["source-layer"]=k),vt&&(yr.maxzoom=vt),vr&&(yr.minzoom=vr),Je.addLayer(yr,wt);function pt(){console.log("updating colors..."),le.forEach(rt=>{Je.setFeatureState({source:T,sourceLayer:k,id:rt[ee]},{color:rt[ve]})})}return Te&&Je.on("click",a,rt=>{if(rt.features.length>0&&!Ne){let nr=rt.features[0].id;if(Bt&&Wt.includes(nr)||!Bt&&Dt!=nr){if(f(0,Dt=nr),v("select",{code:Dt}),Qt&&Je.setFeatureState({source:T,sourceLayer:k,id:Qt},{selected:!1}),Je.setFeatureState({source:T,sourceLayer:k,id:Dt},{selected:!0}),zt){let Bi=centroid(rt.features[0].toJSON().geometry);Je.flyTo({center:Bi.geometry.coordinates})}f(24,Qt=Dt)}}}),ct&&(Je.on("mousemove",a,rt=>{if(rt.features.length>0){let nr=rt.features[0].id;$e&&Je.setFeatureState({source:T,sourceLayer:k,id:$e},{hovered:!1}),Bt&&Wt.includes(nr)||!Bt&&Dt!=nr?(f(1,$e=f(25,Zr=nr)),Je.setFeatureState({source:T,sourceLayer:k,id:$e},{hovered:!0}),Je.getCanvas().style.cursor="pointer",_.setLngLat(rt.lngLat).setHTML(`<strong>${rt.features[0].properties[ze]?rt.features[0].properties[ze]:rt.features[0].properties[ee]}</strong>`).addTo(Je)):_.remove()}}),Je.on("mouseleave",a,rt=>{$e&&Je.setFeatureState({source:T,sourceLayer:k,id:$e},{hovered:!1}),f(1,$e=f(25,Zr=null)),Je.getCanvas().style.cursor="",_.remove()})),c.$$set=rt=>{"id"in rt&&f(2,a=rt.id),"source"in rt&&f(3,T=rt.source),"sourceLayer"in rt&&f(4,k=rt.sourceLayer),"type"in rt&&f(5,B=rt.type),"filter"in rt&&f(6,R=rt.filter),"layout"in rt&&f(7,N=rt.layout),"paint"in rt&&f(8,F=rt.paint),"data"in rt&&f(9,le=rt.data),"code"in rt&&f(10,ee=rt.code),"name"in rt&&f(11,ze=rt.name),"colorCode"in rt&&f(12,ve=rt.colorCode),"click"in rt&&f(13,Te=rt.click),"ignoreClick"in rt&&f(14,Ne=rt.ignoreClick),"clickCenter"in rt&&f(15,zt=rt.clickCenter),"selected"in rt&&f(0,Dt=rt.selected),"hover"in rt&&f(16,ct=rt.hover),"hovered"in rt&&f(1,$e=rt.hovered),"highlight"in rt&&f(17,wr=rt.highlight),"highlightKey"in rt&&f(18,cr=rt.highlightKey),"highlighted"in rt&&f(19,Wt=rt.highlighted),"order"in rt&&f(20,wt=rt.order),"maxzoom"in rt&&f(21,vt=rt.maxzoom),"minzoom"in rt&&f(22,vr=rt.minzoom),"isChild"in rt&&f(23,Bt=rt.isChild)},c.$$.update=()=>{c.$$.dirty[0]&4096&&ve&&pt(),c.$$.dirty[0]&68026392&&wr&&Wt!=Qr&&(Qr[0]&&Qr.forEach(rt=>{let nr={};nr[cr]=!1,Je.setFeatureState({source:T,sourceLayer:k,id:rt},nr)}),f(26,Qr=Wt),Wt[0]&&Wt.forEach(rt=>{let nr={};nr[cr]=!0,Je.setFeatureState({source:T,sourceLayer:k,id:rt},nr)})),c.$$.dirty[0]&16777241&&Dt!=Qt&&(Qt&&Je.setFeatureState({source:T,sourceLayer:k,id:Qt},{selected:!1}),Dt&&Je.setFeatureState({source:T,sourceLayer:k,id:Dt},{selected:!0}),f(24,Qt=Dt)),c.$$.dirty[0]&33619994&&ct&&$e!=Zr&&(Zr&&Je.setFeatureState({source:T,sourceLayer:k,id:Zr},{hovered:!1}),$e&&Je.setFeatureState({source:T,sourceLayer:k,id:$e},{hovered:!0}),f(25,Zr=$e))},[Dt,$e,a,T,k,B,R,N,F,le,ee,ze,ve,Te,Ne,zt,ct,wr,cr,Wt,wt,vt,vr,Bt,Qt,Zr,Qr]}class Hd extends ws{constructor(h){super(),Es(this,h,ev,null,Ss,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function tv(c){return c===0?!0:c}function Gc(c){return tv(c)?Array.isArray(c)?h=>c.map(f=>typeof f!="function"?h[f]:f(h)):typeof c!="function"?h=>h[c]:c:null}function rv(c){const h={};for(const f of c){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":y,"1":v}=f;Object.defineProperty(h,y,{configurable:!0,enumerable:!0,writable:!0,value:v})}return h}function Xd(c,h={}){return rv(Object.entries(c).filter(([f,y])=>y!==void 0&&h[f]===void 0))}function iv(c,h){if(!Array.isArray(c))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof c}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},y=Object.keys(h),v=y.length;let _,a,T,k,B,R,N,F;const le=c.length;for(_=0;_<v;_+=1){for(k=y[_],N=h[k],B=null,R=null,a=0;a<le;a+=1)if(F=N(c[a]),Array.isArray(F)){const ee=F.length;for(T=0;T<ee;T+=1)F[T]!==void 0&&F[T]!==null&&Number.isNaN(F[T])===!1&&((B===null||F[T]<B)&&(B=F[T]),(R===null||F[T]>R)&&(R=F[T]))}else F!=null&&Number.isNaN(F)===!1&&((B===null||F<B)&&(B=F),(R===null||F>R)&&(R=F));f[k]=[B,R]}return f}function gg(c=[],h){return Array.isArray(h)===!0?h.map((f,y)=>f===null?c[y]:f):c}function Yf(c){return function([f,y]){return f?gg(f[c],y):y}}function ud(c,h){return c==null||h==null?NaN:c<h?-1:c>h?1:c>=h?0:NaN}function nv(c,h){return c==null||h==null?NaN:h<c?-1:h>c?1:h>=c?0:NaN}function _g(c){let h,f,y;c.length!==2?(h=ud,f=(T,k)=>ud(c(T),k),y=(T,k)=>c(T)-k):(h=c===ud||c===nv?c:av,f=c,y=c);function v(T,k,B=0,R=T.length){if(B<R){if(h(k,k)!==0)return R;do{const N=B+R>>>1;f(T[N],k)<0?B=N+1:R=N}while(B<R)}return B}function _(T,k,B=0,R=T.length){if(B<R){if(h(k,k)!==0)return R;do{const N=B+R>>>1;f(T[N],k)<=0?B=N+1:R=N}while(B<R)}return B}function a(T,k,B=0,R=T.length){const N=v(T,k,B,R-1);return N>B&&y(T[N-1],k)>-y(T[N],k)?N-1:N}return{left:v,center:a,right:_}}function av(){return 0}function ov(c){return c===null?NaN:+c}const sv=_g(ud),lv=sv.right;_g(ov).center;const uv=lv;class ry extends Map{constructor(h,f=pv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[y,v]of h)this.set(y,v)}get(h){return super.get(iy(this,h))}has(h){return super.has(iy(this,h))}set(h,f){return super.set(cv(this,h),f)}delete(h){return super.delete(hv(this,h))}}function iy({_intern:c,_key:h},f){const y=h(f);return c.has(y)?c.get(y):f}function cv({_intern:c,_key:h},f){const y=h(f);return c.has(y)?c.get(y):(c.set(y,f),f)}function hv({_intern:c,_key:h},f){const y=h(f);return c.has(y)&&(f=c.get(y),c.delete(y)),f}function pv(c){return c!==null&&typeof c=="object"?c.valueOf():c}var Qd=Math.sqrt(50),$d=Math.sqrt(10),em=Math.sqrt(2);function fv(c,h,f){var y,v=-1,_,a,T;if(h=+h,c=+c,f=+f,c===h&&f>0)return[c];if((y=h<c)&&(_=c,c=h,h=_),(T=vg(c,h,f))===0||!isFinite(T))return[];if(T>0){let k=Math.round(c/T),B=Math.round(h/T);for(k*T<c&&++k,B*T>h&&--B,a=new Array(_=B-k+1);++v<_;)a[v]=(k+v)*T}else{T=-T;let k=Math.round(c*T),B=Math.round(h*T);for(k/T<c&&++k,B/T>h&&--B,a=new Array(_=B-k+1);++v<_;)a[v]=(k+v)/T}return y&&a.reverse(),a}function vg(c,h,f){var y=(h-c)/Math.max(0,f),v=Math.floor(Math.log(y)/Math.LN10),_=y/Math.pow(10,v);return v>=0?(_>=Qd?10:_>=$d?5:_>=em?2:1)*Math.pow(10,v):-Math.pow(10,-v)/(_>=Qd?10:_>=$d?5:_>=em?2:1)}function dv(c,h,f){var y=Math.abs(h-c)/Math.max(0,f),v=Math.pow(10,Math.floor(Math.log(y)/Math.LN10)),_=y/v;return _>=Qd?v*=10:_>=$d?v*=5:_>=em&&(v*=2),h<c?-v:v}function mv(c,h,f){c=+c,h=+h,f=(v=arguments.length)<2?(h=c,c=0,1):v<3?1:+f;for(var y=-1,v=Math.max(0,Math.ceil((h-c)/f))|0,_=new Array(v);++y<v;)_[y]=c+y*f;return _}function Sd(c,h){switch(arguments.length){case 0:break;case 1:this.range(c);break;default:this.range(h).domain(c);break}return this}const ny=Symbol("implicit");function bg(){var c=new ry,h=[],f=[],y=ny;function v(_){let a=c.get(_);if(a===void 0){if(y!==ny)return y;c.set(_,a=h.push(_)-1)}return f[a%f.length]}return v.domain=function(_){if(!arguments.length)return h.slice();h=[],c=new ry;for(const a of _)c.has(a)||c.set(a,h.push(a)-1);return v},v.range=function(_){return arguments.length?(f=Array.from(_),v):f.slice()},v.unknown=function(_){return arguments.length?(y=_,v):y},v.copy=function(){return bg(h,f).unknown(y)},Sd.apply(v,arguments),v}function xg(){var c=bg().unknown(void 0),h=c.domain,f=c.range,y=0,v=1,_,a,T=!1,k=0,B=0,R=.5;delete c.unknown;function N(){var F=h().length,le=v<y,ee=le?v:y,ze=le?y:v;_=(ze-ee)/Math.max(1,F-k+B*2),T&&(_=Math.floor(_)),ee+=(ze-ee-_*(F-k))*R,a=_*(1-k),T&&(ee=Math.round(ee),a=Math.round(a));var ve=mv(F).map(function(Te){return ee+_*Te});return f(le?ve.reverse():ve)}return c.domain=function(F){return arguments.length?(h(F),N()):h()},c.range=function(F){return arguments.length?([y,v]=F,y=+y,v=+v,N()):[y,v]},c.rangeRound=function(F){return[y,v]=F,y=+y,v=+v,T=!0,N()},c.bandwidth=function(){return a},c.step=function(){return _},c.round=function(F){return arguments.length?(T=!!F,N()):T},c.padding=function(F){return arguments.length?(k=Math.min(1,B=+F),N()):k},c.paddingInner=function(F){return arguments.length?(k=Math.min(1,F),N()):k},c.paddingOuter=function(F){return arguments.length?(B=+F,N()):B},c.align=function(F){return arguments.length?(R=Math.max(0,Math.min(1,F)),N()):R},c.copy=function(){return xg(h(),[y,v]).round(T).paddingInner(k).paddingOuter(B).align(R)},Sd.apply(N(),arguments)}function hm(c,h,f){c.prototype=h.prototype=f,f.constructor=c}function wg(c,h){var f=Object.create(c.prototype);for(var y in h)f[y]=h[y];return f}function yf(){}var af=.7,md=1/af,Wh="\\s*([+-]?\\d+)\\s*",of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yv=/^#([0-9a-f]{3,8})$/,gv=new RegExp(`^rgb\\(${Wh},${Wh},${Wh}\\)$`),_v=new RegExp(`^rgb\\(${Wu},${Wu},${Wu}\\)$`),vv=new RegExp(`^rgba\\(${Wh},${Wh},${Wh},${of}\\)$`),bv=new RegExp(`^rgba\\(${Wu},${Wu},${Wu},${of}\\)$`),xv=new RegExp(`^hsl\\(${of},${Wu},${Wu}\\)$`),wv=new RegExp(`^hsla\\(${of},${Wu},${Wu},${of}\\)$`),ay={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hm(yf,sf,{copy(c){return Object.assign(new this.constructor,this,c)},displayable(){return this.rgb().displayable()},hex:oy,formatHex:oy,formatHex8:Ev,formatHsl:Sv,formatRgb:sy,toString:sy});function oy(){return this.rgb().formatHex()}function Ev(){return this.rgb().formatHex8()}function Sv(){return Eg(this).formatHsl()}function sy(){return this.rgb().formatRgb()}function sf(c){var h,f;return c=(c+"").trim().toLowerCase(),(h=yv.exec(c))?(f=h[1].length,h=parseInt(h[1],16),f===6?ly(h):f===3?new nl(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?Qf(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?Qf(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=gv.exec(c))?new nl(h[1],h[2],h[3],1):(h=_v.exec(c))?new nl(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=vv.exec(c))?Qf(h[1],h[2],h[3],h[4]):(h=bv.exec(c))?Qf(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=xv.exec(c))?hy(h[1],h[2]/100,h[3]/100,1):(h=wv.exec(c))?hy(h[1],h[2]/100,h[3]/100,h[4]):ay.hasOwnProperty(c)?ly(ay[c]):c==="transparent"?new nl(NaN,NaN,NaN,0):null}function ly(c){return new nl(c>>16&255,c>>8&255,c&255,1)}function Qf(c,h,f,y){return y<=0&&(c=h=f=NaN),new nl(c,h,f,y)}function kv(c){return c instanceof yf||(c=sf(c)),c?(c=c.rgb(),new nl(c.r,c.g,c.b,c.opacity)):new nl}function tm(c,h,f,y){return arguments.length===1?kv(c):new nl(c,h,f,y==null?1:y)}function nl(c,h,f,y){this.r=+c,this.g=+h,this.b=+f,this.opacity=+y}hm(nl,tm,wg(yf,{brighter(c){return c=c==null?md:Math.pow(md,c),new nl(this.r*c,this.g*c,this.b*c,this.opacity)},darker(c){return c=c==null?af:Math.pow(af,c),new nl(this.r*c,this.g*c,this.b*c,this.opacity)},rgb(){return this},clamp(){return new nl(bh(this.r),bh(this.g),bh(this.b),yd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uy,formatHex:uy,formatHex8:Iv,formatRgb:cy,toString:cy}));function uy(){return`#${vh(this.r)}${vh(this.g)}${vh(this.b)}`}function Iv(){return`#${vh(this.r)}${vh(this.g)}${vh(this.b)}${vh((isNaN(this.opacity)?1:this.opacity)*255)}`}function cy(){const c=yd(this.opacity);return`${c===1?"rgb(":"rgba("}${bh(this.r)}, ${bh(this.g)}, ${bh(this.b)}${c===1?")":`, ${c})`}`}function yd(c){return isNaN(c)?1:Math.max(0,Math.min(1,c))}function bh(c){return Math.max(0,Math.min(255,Math.round(c)||0))}function vh(c){return c=bh(c),(c<16?"0":"")+c.toString(16)}function hy(c,h,f,y){return y<=0?c=h=f=NaN:f<=0||f>=1?c=h=NaN:h<=0&&(c=NaN),new du(c,h,f,y)}function Eg(c){if(c instanceof du)return new du(c.h,c.s,c.l,c.opacity);if(c instanceof yf||(c=sf(c)),!c)return new du;if(c instanceof du)return c;c=c.rgb();var h=c.r/255,f=c.g/255,y=c.b/255,v=Math.min(h,f,y),_=Math.max(h,f,y),a=NaN,T=_-v,k=(_+v)/2;return T?(h===_?a=(f-y)/T+(f<y)*6:f===_?a=(y-h)/T+2:a=(h-f)/T+4,T/=k<.5?_+v:2-_-v,a*=60):T=k>0&&k<1?0:a,new du(a,T,k,c.opacity)}function Tv(c,h,f,y){return arguments.length===1?Eg(c):new du(c,h,f,y==null?1:y)}function du(c,h,f,y){this.h=+c,this.s=+h,this.l=+f,this.opacity=+y}hm(du,Tv,wg(yf,{brighter(c){return c=c==null?md:Math.pow(md,c),new du(this.h,this.s,this.l*c,this.opacity)},darker(c){return c=c==null?af:Math.pow(af,c),new du(this.h,this.s,this.l*c,this.opacity)},rgb(){var c=this.h%360+(this.h<0)*360,h=isNaN(c)||isNaN(this.s)?0:this.s,f=this.l,y=f+(f<.5?f:1-f)*h,v=2*f-y;return new nl(Wd(c>=240?c-240:c+120,v,y),Wd(c,v,y),Wd(c<120?c+240:c-120,v,y),this.opacity)},clamp(){return new du(py(this.h),$f(this.s),$f(this.l),yd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const c=yd(this.opacity);return`${c===1?"hsl(":"hsla("}${py(this.h)}, ${$f(this.s)*100}%, ${$f(this.l)*100}%${c===1?")":`, ${c})`}`}}));function py(c){return c=(c||0)%360,c<0?c+360:c}function $f(c){return Math.max(0,Math.min(1,c||0))}function Wd(c,h,f){return(c<60?h+(f-h)*c/60:c<180?f:c<240?h+(f-h)*(240-c)/60:h)*255}const pm=c=>()=>c;function Av(c,h){return function(f){return c+f*h}}function zv(c,h,f){return c=Math.pow(c,f),h=Math.pow(h,f)-c,f=1/f,function(y){return Math.pow(c+y*h,f)}}function Pv(c){return(c=+c)==1?Sg:function(h,f){return f-h?zv(h,f,c):pm(isNaN(h)?f:h)}}function Sg(c,h){var f=h-c;return f?Av(c,f):pm(isNaN(c)?h:c)}const fy=function c(h){var f=Pv(h);function y(v,_){var a=f((v=tm(v)).r,(_=tm(_)).r),T=f(v.g,_.g),k=f(v.b,_.b),B=Sg(v.opacity,_.opacity);return function(R){return v.r=a(R),v.g=T(R),v.b=k(R),v.opacity=B(R),v+""}}return y.gamma=c,y}(1);function Cv(c,h){h||(h=[]);var f=c?Math.min(h.length,c.length):0,y=h.slice(),v;return function(_){for(v=0;v<f;++v)y[v]=c[v]*(1-_)+h[v]*_;return y}}function Mv(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}function Dv(c,h){var f=h?h.length:0,y=c?Math.min(f,c.length):0,v=new Array(y),_=new Array(f),a;for(a=0;a<y;++a)v[a]=fm(c[a],h[a]);for(;a<f;++a)_[a]=h[a];return function(T){for(a=0;a<y;++a)_[a]=v[a](T);return _}}function Lv(c,h){var f=new Date;return c=+c,h=+h,function(y){return f.setTime(c*(1-y)+h*y),f}}function gd(c,h){return c=+c,h=+h,function(f){return c*(1-f)+h*f}}function Rv(c,h){var f={},y={},v;(c===null||typeof c!="object")&&(c={}),(h===null||typeof h!="object")&&(h={});for(v in h)v in c?f[v]=fm(c[v],h[v]):y[v]=h[v];return function(_){for(v in f)y[v]=f[v](_);return y}}var rm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jd=new RegExp(rm.source,"g");function Bv(c){return function(){return c}}function Ov(c){return function(h){return c(h)+""}}function Fv(c,h){var f=rm.lastIndex=Jd.lastIndex=0,y,v,_,a=-1,T=[],k=[];for(c=c+"",h=h+"";(y=rm.exec(c))&&(v=Jd.exec(h));)(_=v.index)>f&&(_=h.slice(f,_),T[a]?T[a]+=_:T[++a]=_),(y=y[0])===(v=v[0])?T[a]?T[a]+=v:T[++a]=v:(T[++a]=null,k.push({i:a,x:gd(y,v)})),f=Jd.lastIndex;return f<h.length&&(_=h.slice(f),T[a]?T[a]+=_:T[++a]=_),T.length<2?k[0]?Ov(k[0].x):Bv(h):(h=k.length,function(B){for(var R=0,N;R<h;++R)T[(N=k[R]).i]=N.x(B);return T.join("")})}function fm(c,h){var f=typeof h,y;return h==null||f==="boolean"?pm(h):(f==="number"?gd:f==="string"?(y=sf(h))?(h=y,fy):Fv:h instanceof sf?fy:h instanceof Date?Lv:Mv(h)?Cv:Array.isArray(h)?Dv:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?Rv:gd)(c,h)}function Vv(c,h){return c=+c,h=+h,function(f){return Math.round(c*(1-f)+h*f)}}function Nv(c){return function(){return c}}function Uv(c){return+c}var dy=[0,1];function Xu(c){return c}function im(c,h){return(h-=c=+c)?function(f){return(f-c)/h}:Nv(isNaN(h)?NaN:.5)}function jv(c,h){var f;return c>h&&(f=c,c=h,h=f),function(y){return Math.max(c,Math.min(h,y))}}function qv(c,h,f){var y=c[0],v=c[1],_=h[0],a=h[1];return v<y?(y=im(v,y),_=f(a,_)):(y=im(y,v),_=f(_,a)),function(T){return _(y(T))}}function Zv(c,h,f){var y=Math.min(c.length,h.length)-1,v=new Array(y),_=new Array(y),a=-1;for(c[y]<c[0]&&(c=c.slice().reverse(),h=h.slice().reverse());++a<y;)v[a]=im(c[a],c[a+1]),_[a]=f(h[a],h[a+1]);return function(T){var k=uv(c,T,1,y)-1;return _[k](v[k](T))}}function kg(c,h){return h.domain(c.domain()).range(c.range()).interpolate(c.interpolate()).clamp(c.clamp()).unknown(c.unknown())}function Ig(){var c=dy,h=dy,f=fm,y,v,_,a=Xu,T,k,B;function R(){var F=Math.min(c.length,h.length);return a!==Xu&&(a=jv(c[0],c[F-1])),T=F>2?Zv:qv,k=B=null,N}function N(F){return F==null||isNaN(F=+F)?_:(k||(k=T(c.map(y),h,f)))(y(a(F)))}return N.invert=function(F){return a(v((B||(B=T(h,c.map(y),gd)))(F)))},N.domain=function(F){return arguments.length?(c=Array.from(F,Uv),R()):c.slice()},N.range=function(F){return arguments.length?(h=Array.from(F),R()):h.slice()},N.rangeRound=function(F){return h=Array.from(F),f=Vv,R()},N.clamp=function(F){return arguments.length?(a=F?!0:Xu,R()):a!==Xu},N.interpolate=function(F){return arguments.length?(f=F,R()):f},N.unknown=function(F){return arguments.length?(_=F,N):_},function(F,le){return y=F,v=le,R()}}function Gv(){return Ig()(Xu,Xu)}function Kv(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)}function _d(c,h){if((f=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var f,y=c.slice(0,f);return[y.length>1?y[0]+y.slice(2):y,+c.slice(f+1)]}function ep(c){return c=_d(Math.abs(c)),c?c[1]:NaN}function Hv(c,h){return function(f,y){for(var v=f.length,_=[],a=0,T=c[0],k=0;v>0&&T>0&&(k+T+1>y&&(T=Math.max(1,y-k)),_.push(f.substring(v-=T,v+T)),!((k+=T+1)>y));)T=c[a=(a+1)%c.length];return _.reverse().join(h)}}function Xv(c){return function(h){return h.replace(/[0-9]/g,function(f){return c[+f]})}}var Wv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vd(c){if(!(h=Wv.exec(c)))throw new Error("invalid format: "+c);var h;return new dm({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}vd.prototype=dm.prototype;function dm(c){this.fill=c.fill===void 0?" ":c.fill+"",this.align=c.align===void 0?">":c.align+"",this.sign=c.sign===void 0?"-":c.sign+"",this.symbol=c.symbol===void 0?"":c.symbol+"",this.zero=!!c.zero,this.width=c.width===void 0?void 0:+c.width,this.comma=!!c.comma,this.precision=c.precision===void 0?void 0:+c.precision,this.trim=!!c.trim,this.type=c.type===void 0?"":c.type+""}dm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jv(c){e:for(var h=c.length,f=1,y=-1,v;f<h;++f)switch(c[f]){case".":y=v=f;break;case"0":y===0&&(y=f),v=f;break;default:if(!+c[f])break e;y>0&&(y=0);break}return y>0?c.slice(0,y)+c.slice(v+1):c}var Tg;function Yv(c,h){var f=_d(c,h);if(!f)return c+"";var y=f[0],v=f[1],_=v-(Tg=Math.max(-8,Math.min(8,Math.floor(v/3)))*3)+1,a=y.length;return _===a?y:_>a?y+new Array(_-a+1).join("0"):_>0?y.slice(0,_)+"."+y.slice(_):"0."+new Array(1-_).join("0")+_d(c,Math.max(0,h+_-1))[0]}function my(c,h){var f=_d(c,h);if(!f)return c+"";var y=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+y:y.length>v+1?y.slice(0,v+1)+"."+y.slice(v+1):y+new Array(v-y.length+2).join("0")}const yy={"%":(c,h)=>(c*100).toFixed(h),b:c=>Math.round(c).toString(2),c:c=>c+"",d:Kv,e:(c,h)=>c.toExponential(h),f:(c,h)=>c.toFixed(h),g:(c,h)=>c.toPrecision(h),o:c=>Math.round(c).toString(8),p:(c,h)=>my(c*100,h),r:my,s:Yv,X:c=>Math.round(c).toString(16).toUpperCase(),x:c=>Math.round(c).toString(16)};function gy(c){return c}var _y=Array.prototype.map,vy=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Qv(c){var h=c.grouping===void 0||c.thousands===void 0?gy:Hv(_y.call(c.grouping,Number),c.thousands+""),f=c.currency===void 0?"":c.currency[0]+"",y=c.currency===void 0?"":c.currency[1]+"",v=c.decimal===void 0?".":c.decimal+"",_=c.numerals===void 0?gy:Xv(_y.call(c.numerals,String)),a=c.percent===void 0?"%":c.percent+"",T=c.minus===void 0?"\u2212":c.minus+"",k=c.nan===void 0?"NaN":c.nan+"";function B(N){N=vd(N);var F=N.fill,le=N.align,ee=N.sign,ze=N.symbol,ve=N.zero,Te=N.width,Ne=N.comma,zt=N.precision,Dt=N.trim,ct=N.type;ct==="n"?(Ne=!0,ct="g"):yy[ct]||(zt===void 0&&(zt=12),Dt=!0,ct="g"),(ve||F==="0"&&le==="=")&&(ve=!0,F="0",le="=");var $e=ze==="$"?f:ze==="#"&&/[boxX]/.test(ct)?"0"+ct.toLowerCase():"",wr=ze==="$"?y:/[%p]/.test(ct)?a:"",cr=yy[ct],Wt=/[defgprs%]/.test(ct);zt=zt===void 0?6:/[gprs]/.test(ct)?Math.max(1,Math.min(21,zt)):Math.max(0,Math.min(20,zt));function wt(vt){var vr=$e,Bt=wr,Er,Je,Qt;if(ct==="c")Bt=cr(vt)+Bt,vt="";else{vt=+vt;var Zr=vt<0||1/vt<0;if(vt=isNaN(vt)?k:cr(Math.abs(vt),zt),Dt&&(vt=Jv(vt)),Zr&&+vt==0&&ee!=="+"&&(Zr=!1),vr=(Zr?ee==="("?ee:T:ee==="-"||ee==="("?"":ee)+vr,Bt=(ct==="s"?vy[8+Tg/3]:"")+Bt+(Zr&&ee==="("?")":""),Wt){for(Er=-1,Je=vt.length;++Er<Je;)if(Qt=vt.charCodeAt(Er),48>Qt||Qt>57){Bt=(Qt===46?v+vt.slice(Er+1):vt.slice(Er))+Bt,vt=vt.slice(0,Er);break}}}Ne&&!ve&&(vt=h(vt,1/0));var Qr=vr.length+vt.length+Bt.length,yr=Qr<Te?new Array(Te-Qr+1).join(F):"";switch(Ne&&ve&&(vt=h(yr+vt,yr.length?Te-Bt.length:1/0),yr=""),le){case"<":vt=vr+vt+Bt+yr;break;case"=":vt=vr+yr+vt+Bt;break;case"^":vt=yr.slice(0,Qr=yr.length>>1)+vr+vt+Bt+yr.slice(Qr);break;default:vt=yr+vr+vt+Bt;break}return _(vt)}return wt.toString=function(){return N+""},wt}function R(N,F){var le=B((N=vd(N),N.type="f",N)),ee=Math.max(-8,Math.min(8,Math.floor(ep(F)/3)))*3,ze=Math.pow(10,-ee),ve=vy[8+ee/3];return function(Te){return le(ze*Te)+ve}}return{format:B,formatPrefix:R}}var ed,Ag,zg;$v({thousands:",",grouping:[3],currency:["$",""]});function $v(c){return ed=Qv(c),Ag=ed.format,zg=ed.formatPrefix,ed}function e0(c){return Math.max(0,-ep(Math.abs(c)))}function t0(c,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ep(h)/3)))*3-ep(Math.abs(c)))}function r0(c,h){return c=Math.abs(c),h=Math.abs(h)-c,Math.max(0,ep(h)-ep(c))+1}function i0(c,h,f,y){var v=dv(c,h,f),_;switch(y=vd(y==null?",f":y),y.type){case"s":{var a=Math.max(Math.abs(c),Math.abs(h));return y.precision==null&&!isNaN(_=t0(v,a))&&(y.precision=_),zg(y,a)}case"":case"e":case"g":case"p":case"r":{y.precision==null&&!isNaN(_=r0(v,Math.max(Math.abs(c),Math.abs(h))))&&(y.precision=_-(y.type==="e"));break}case"f":case"%":{y.precision==null&&!isNaN(_=e0(v))&&(y.precision=_-(y.type==="%")*2);break}}return Ag(y)}function Pg(c){var h=c.domain;return c.ticks=function(f){var y=h();return fv(y[0],y[y.length-1],f==null?10:f)},c.tickFormat=function(f,y){var v=h();return i0(v[0],v[v.length-1],f==null?10:f,y)},c.nice=function(f){f==null&&(f=10);var y=h(),v=0,_=y.length-1,a=y[v],T=y[_],k,B,R=10;for(T<a&&(B=a,a=T,T=B,B=v,v=_,_=B);R-- >0;){if(B=vg(a,T,f),B===k)return y[v]=a,y[_]=T,h(y);if(B>0)a=Math.floor(a/B)*B,T=Math.ceil(T/B)*B;else if(B<0)a=Math.ceil(a*B)/B,T=Math.floor(T*B)/B;else break;k=B}return c},c}function cd(){var c=Gv();return c.copy=function(){return kg(c,cd())},Sd.apply(c,arguments),Pg(c)}function by(c){return function(h){return h<0?-Math.pow(-h,c):Math.pow(h,c)}}function n0(c){return c<0?-Math.sqrt(-c):Math.sqrt(c)}function a0(c){return c<0?-c*c:c*c}function o0(c){var h=c(Xu,Xu),f=1;function y(){return f===1?c(Xu,Xu):f===.5?c(n0,a0):c(by(f),by(1/f))}return h.exponent=function(v){return arguments.length?(f=+v,y()):f},Pg(h)}function Cg(){var c=o0(Ig());return c.copy=function(){return kg(c,Cg()).exponent(c.exponent())},Sd.apply(c,arguments),c}function s0(){return Cg.apply(null,arguments).exponent(.5)}const rf={x:cd,y:cd,z:cd,r:s0};function l0(c){return c.constant?"symlog":c.base?"log":c.exponent?c.exponent()===.5?"sqrt":"pow":"other"}function xy(c){return c}function u0(c){return h=>Math.log(c*h)}function c0(c){return h=>c*Math.exp(h)}function h0(c){return h=>Math.sign(h)*Math.log1p(Math.abs(h/c))}function p0(c){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*c}function td(c){return function(f){return f<0?-Math.pow(-f,c):Math.pow(f,c)}}function f0(c){const h=l0(c);if(h==="log"){const f=Math.sign(c.domain()[0]);return{lift:u0(f),ground:c0(f),scaleType:h}}return h==="pow"?{lift:td(1),ground:td(1/1),scaleType:h}:h==="sqrt"?{lift:td(.5),ground:td(1/.5),scaleType:h}:h==="symlog"?{lift:h0(1),ground:p0(1),scaleType:h}:{lift:xy,ground:xy,scaleType:h}}function d0(c,h){if(typeof c.range!="function")throw new Error("Scale method `range` must be a function");if(typeof c.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return c.domain();c.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",c.domain()),c.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",c.range());const{lift:f,ground:y}=f0(c),v=c.domain()[0],_=Object.prototype.toString.call(v)==="[object Date]",[a,T]=c.domain().map(le=>f(_?le.getTime():le)),[k,B]=c.range(),R=h[0]||0,N=h[1]||0,F=(T-a)/(Math.abs(B-k)-R-N);return[a-R*F,N*F+T].map(le=>y(_?new Date(le):le))}function m0(c,h,f,y,v){let _,a;return v===!0?(_=0,a=100):(_=c==="r"?1:0,a=c==="y"?f:c==="r"?25:h),y===!0?[a,_]:[_,a]}function y0(c,h,f,y,v,_){return v?typeof v=="function"?v({width:h,height:f}):v:m0(c,h,f,y,_)}function rd(c){return function([f,y,v,_,a,T,k,B,R,N]){if(y===null)return null;const F=y0(c,k,B,T,R,N),le=f===rf[c]?f():f.copy();return le.domain(gg(y[c],v)).range(F),_&&le.domain(d0(le,_)),a===!0&&(typeof le.nice=="function"?le.nice():console.error(`[Layer Cake] You set \`${c}Nice: true\` but the ${c}Scale does not have a \`.nice\` method. Ignoring...`)),le}}function id([c,h]){return f=>{const y=c(f);return Array.isArray(y)?y.map(v=>h(v)):h(y)}}function nd([c]){if(typeof c=="function"){if(typeof c.range=="function")return c.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const ad={x:!1,y:!0,z:!1,r:!1};const g0=c=>({element:c[0]&4,width:c[0]&256,height:c[0]&512,aspectRatio:c[0]&1024,containerWidth:c[0]&128,containerHeight:c[0]&64}),wy=c=>({element:c[2],width:c[8],height:c[9],aspectRatio:c[10],containerWidth:c[7],containerHeight:c[6]});function Ey(c){let h,f,y;const v=c[90].default,_=Jh(v,c,c[89],wy);return{c(){h=K("div"),_&&_.c(),this.h()},l(a){h=H(a,"DIV",{class:!0});var T=X(h);_&&_.l(T),T.forEach(C),this.h()},h(){z(h,"class","layercake-container svelte-vhzpsp"),Ku(()=>c[92].call(h)),ye(h,"position",c[5],!1),ye(h,"top",c[5]==="absolute"?"0":null,!1),ye(h,"right",c[5]==="absolute"?"0":null,!1),ye(h,"bottom",c[5]==="absolute"?"0":null,!1),ye(h,"left",c[5]==="absolute"?"0":null,!1),ye(h,"pointer-events",c[4]===!1?"none":null,!1)},m(a,T){ke(a,h,T),_&&_.m(h,null),c[91](h),f=Hu(h,c[92].bind(h)),y=!0},p(a,T){_&&_.p&&(!y||T[0]&1988|T[2]&134217728)&&Yh(_,v,a,a[89],y?$h(v,a[89],T,g0):Qh(a[89]),wy),T[0]&32&&ye(h,"position",a[5],!1),T[0]&32&&ye(h,"top",a[5]==="absolute"?"0":null,!1),T[0]&32&&ye(h,"right",a[5]==="absolute"?"0":null,!1),T[0]&32&&ye(h,"bottom",a[5]==="absolute"?"0":null,!1),T[0]&32&&ye(h,"left",a[5]==="absolute"?"0":null,!1),T[0]&16&&ye(h,"pointer-events",a[4]===!1?"none":null,!1)},i(a){y||(mt(_,a),y=!0)},o(a){xt(_,a),y=!1},d(a){a&&C(h),_&&_.d(a),c[91](null),f()}}}function _0(c){let h,f,y=(c[3]===!0||typeof window<"u")&&Ey(c);return{c(){y&&y.c(),h=ha()},l(v){y&&y.l(v),h=ha()},m(v,_){y&&y.m(v,_),ke(v,h,_),f=!0},p(v,_){v[3]===!0||typeof window<"u"?y?(y.p(v,_),_[0]&8&&mt(y,1)):(y=Ey(v),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(El(),xt(y,1,1,()=>{y=null}),Sl())},i(v){f||(mt(y),f=!0)},o(v){xt(y),f=!1},d(v){y&&y.d(v),v&&C(h)}}}function v0(c,h,f){let y,v,_,a,T,k,B,R,N,F,le,ee,ze,ve,Te,Ne,zt,Dt,ct,$e,wr,cr,Wt,wt,vt,vr,Bt,Er,Je,Qt,Zr,Qr,yr,pt,rt,nr,Bi,Qn,Ti,xi,$r,{$$slots:Xi={},$$scope:Jt}=h,{ssr:Ai=!1}=h,{pointerEvents:Ra=!0}=h,{position:kt="relative"}=h,{percentRange:Ct=!1}=h,{width:ei=void 0}=h,{height:Sr=void 0}=h,{containerWidth:br=ei||100}=h,{containerHeight:sn=Sr||100}=h,{element:oi=void 0}=h,{x:wi=void 0}=h,{y:Or=void 0}=h,{z:hr=void 0}=h,{r:ar=void 0}=h,{data:si=[]}=h,{xDomain:li=void 0}=h,{yDomain:ln=void 0}=h,{zDomain:ti=void 0}=h,{rDomain:Oi=void 0}=h,{xNice:pa=!1}=h,{yNice:Ha=!1}=h,{zNice:Xa=!1}=h,{rNice:In=!1}=h,{xReverse:On=ad.x}=h,{yReverse:ui=ad.y}=h,{zReverse:Fi=ad.z}=h,{rReverse:un=ad.r}=h,{xPadding:Wa=void 0}=h,{yPadding:mn=void 0}=h,{zPadding:Go=void 0}=h,{rPadding:cn=void 0}=h,{xScale:Ei=rf.x}=h,{yScale:Gr=rf.y}=h,{zScale:Wi=rf.z}=h,{rScale:Fn=rf.r}=h,{xRange:yn=void 0}=h,{yRange:Vr=void 0}=h,{zRange:O=void 0}=h,{rRange:j=void 0}=h,{padding:Z={}}=h,{extents:$={}}=h,{flatData:ie=void 0}=h,{custom:de={}}=h,ge=!1;hg(()=>{ge=!0});const G={},te=Yr(Ct);ir(c,te,xe=>f(128,Qn=xe));const we=Yr(br);ir(c,we,xe=>f(7,Bi=xe));const Ue=Yr(sn);ir(c,Ue,xe=>f(6,nr=xe));const qe=Yr(Xd($));ir(c,qe,xe=>f(127,rt=xe));const Ie=Yr(si);ir(c,Ie,xe=>f(126,pt=xe));const je=Yr(ie||si);ir(c,je,xe=>f(125,yr=xe));const it=Yr(Z);ir(c,it,xe=>f(124,Qr=xe));const nt=Yr(Gc(wi));ir(c,nt,xe=>f(123,Zr=xe));const Me=Yr(Gc(Or));ir(c,Me,xe=>f(122,Qt=xe));const Ye=Yr(Gc(hr));ir(c,Ye,xe=>f(121,Je=xe));const Ke=Yr(Gc(ar));ir(c,Ke,xe=>f(120,Er=xe));const Qe=Yr(li);ir(c,Qe,xe=>f(119,Bt=xe));const Lt=Yr(ln);ir(c,Lt,xe=>f(118,vr=xe));const Xe=Yr(ti);ir(c,Xe,xe=>f(117,vt=xe));const jt=Yr(Oi);ir(c,jt,xe=>f(116,wt=xe));const sr=Yr(pa);ir(c,sr,xe=>f(115,Wt=xe));const It=Yr(Ha);ir(c,It,xe=>f(114,cr=xe));const Yt=Yr(Xa);ir(c,Yt,xe=>f(113,wr=xe));const Vt=Yr(In);ir(c,Vt,xe=>f(112,$e=xe));const Dr=Yr(On);ir(c,Dr,xe=>f(111,ct=xe));const Nt=Yr(ui);ir(c,Nt,xe=>f(110,Dt=xe));const dr=Yr(Fi);ir(c,dr,xe=>f(109,zt=xe));const or=Yr(un);ir(c,or,xe=>f(108,Ne=xe));const Kt=Yr(Wa);ir(c,Kt,xe=>f(107,Te=xe));const tr=Yr(mn);ir(c,tr,xe=>f(106,ve=xe));const ci=Yr(Go);ir(c,ci,xe=>f(105,ze=xe));const gn=Yr(cn);ir(c,gn,xe=>f(104,ee=xe));const fi=Yr(yn);ir(c,fi,xe=>f(103,le=xe));const di=Yr(Vr);ir(c,di,xe=>f(102,F=xe));const Ji=Yr(O);ir(c,Ji,xe=>f(101,N=xe));const Yi=Yr(j);ir(c,Yi,xe=>f(100,R=xe));const mr=Yr(Ei);ir(c,mr,xe=>f(99,B=xe));const Vi=Yr(Gr);ir(c,Vi,xe=>f(98,k=xe));const Qi=Yr(Wi);ir(c,Qi,xe=>f(97,T=xe));const Nr=Yr(Fn);ir(c,Nr,xe=>f(96,a=xe));const $i=Yr(G);ir(c,$i,xe=>f(94,v=xe));const gr=Yr(de);ir(c,gr,xe=>f(95,_=xe));const ri=xa([nt,Me,Ye,Ke],([xe,Ui,An,kr])=>{const ea={};return xe&&(ea.x=xe),Ui&&(ea.y=Ui),An&&(ea.z=An),kr&&(ea.r=kr),ea}),zi=xa([it,we,Ue],([xe])=>Object.assign({top:0,right:0,bottom:0,left:0},xe)),ks=xa([we,Ue,zi],([xe,Ui,An])=>{const kr={};return kr.top=An.top,kr.right=xe-An.right,kr.bottom=Ui-An.bottom,kr.left=An.left,kr.width=kr.right-kr.left,kr.height=kr.bottom-kr.top,kr.width<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),kr.height<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),kr}),Ni=xa([ks],([xe])=>xe.width);ir(c,Ni,xe=>f(8,Ti=xe));const Vn=xa([ks],([xe])=>xe.height);ir(c,Vn,xe=>f(9,xi=xe));const Kr=xa([je,ri,qe],([xe,Ui,An])=>{const kr=Xd(Ui,An);return Object.keys(kr).length>0?{...iv(xe,kr),...An}:{}}),Ur=xa([Kr,Qe],Yf("x")),mi=xa([Kr,Lt],Yf("y")),ii=xa([Kr,Xe],Yf("z")),Ja=xa([Kr,jt],Yf("r")),wa=xa([mr,Kr,Ur,Kt,sr,Dr,Ni,Vn,fi,te],rd("x")),jl=xa([nt,wa],id),Ko=xa([Vi,Kr,mi,tr,It,Nt,Ni,Vn,di,te],rd("y")),Tn=xa([Me,Ko],id),Mn=xa([Qi,Kr,ii,ci,Yt,dr,Ni,Vn,Ji,te],rd("z")),Ea=xa([Ye,Mn],id),Sa=xa([Nr,Kr,Ja,gn,Vt,or,Ni,Vn,Yi,te],rd("r")),co=xa([Ke,Sa],id),$n=xa([wa],nd),js=xa([Ko],nd),Ho=xa([Mn],nd),Eo=xa([Sa],nd),Pi=xa([Ni,Vn],([xe,Ui])=>xe/Ui);ir(c,Pi,xe=>f(10,$r=xe));function Si(xe){Tc[xe?"unshift":"push"](()=>{oi=xe,f(2,oi)})}function en(){br=this.clientWidth,sn=this.clientHeight,f(0,br),f(1,sn)}return c.$$set=xe=>{"ssr"in xe&&f(3,Ai=xe.ssr),"pointerEvents"in xe&&f(4,Ra=xe.pointerEvents),"position"in xe&&f(5,kt=xe.position),"percentRange"in xe&&f(51,Ct=xe.percentRange),"width"in xe&&f(52,ei=xe.width),"height"in xe&&f(53,Sr=xe.height),"containerWidth"in xe&&f(0,br=xe.containerWidth),"containerHeight"in xe&&f(1,sn=xe.containerHeight),"element"in xe&&f(2,oi=xe.element),"x"in xe&&f(54,wi=xe.x),"y"in xe&&f(55,Or=xe.y),"z"in xe&&f(56,hr=xe.z),"r"in xe&&f(57,ar=xe.r),"data"in xe&&f(58,si=xe.data),"xDomain"in xe&&f(59,li=xe.xDomain),"yDomain"in xe&&f(60,ln=xe.yDomain),"zDomain"in xe&&f(61,ti=xe.zDomain),"rDomain"in xe&&f(62,Oi=xe.rDomain),"xNice"in xe&&f(63,pa=xe.xNice),"yNice"in xe&&f(64,Ha=xe.yNice),"zNice"in xe&&f(65,Xa=xe.zNice),"rNice"in xe&&f(66,In=xe.rNice),"xReverse"in xe&&f(67,On=xe.xReverse),"yReverse"in xe&&f(68,ui=xe.yReverse),"zReverse"in xe&&f(69,Fi=xe.zReverse),"rReverse"in xe&&f(70,un=xe.rReverse),"xPadding"in xe&&f(71,Wa=xe.xPadding),"yPadding"in xe&&f(72,mn=xe.yPadding),"zPadding"in xe&&f(73,Go=xe.zPadding),"rPadding"in xe&&f(74,cn=xe.rPadding),"xScale"in xe&&f(75,Ei=xe.xScale),"yScale"in xe&&f(76,Gr=xe.yScale),"zScale"in xe&&f(77,Wi=xe.zScale),"rScale"in xe&&f(78,Fn=xe.rScale),"xRange"in xe&&f(79,yn=xe.xRange),"yRange"in xe&&f(80,Vr=xe.yRange),"zRange"in xe&&f(81,O=xe.zRange),"rRange"in xe&&f(82,j=xe.rRange),"padding"in xe&&f(83,Z=xe.padding),"extents"in xe&&f(84,$=xe.extents),"flatData"in xe&&f(85,ie=xe.flatData),"custom"in xe&&f(86,de=xe.custom),"$$scope"in xe&&f(89,Jt=xe.$$scope)},c.$$.update=()=>{c.$$.dirty[1]&8388608&&wi&&f(87,G.x=wi,G),c.$$.dirty[1]&16777216&&Or&&f(87,G.y=Or,G),c.$$.dirty[1]&33554432&&hr&&f(87,G.z=hr,G),c.$$.dirty[1]&67108864&&ar&&f(87,G.r=ar,G),c.$$.dirty[1]&268435456&&li&&f(87,G.xDomain=li,G),c.$$.dirty[1]&536870912&&ln&&f(87,G.yDomain=ln,G),c.$$.dirty[1]&1073741824&&ti&&f(87,G.zDomain=ti,G),c.$$.dirty[2]&1&&Oi&&f(87,G.rDomain=Oi,G),c.$$.dirty[2]&131072&&yn&&f(87,G.xRange=yn,G),c.$$.dirty[2]&262144&&Vr&&f(87,G.yRange=Vr,G),c.$$.dirty[2]&524288&&O&&f(87,G.zRange=O,G),c.$$.dirty[2]&1048576&&j&&f(87,G.rRange=j,G),c.$$.dirty[1]&1048576&&Jr(te,Qn=Ct,Qn),c.$$.dirty[0]&1&&Jr(we,Bi=br,Bi),c.$$.dirty[0]&2&&Jr(Ue,nr=sn,nr),c.$$.dirty[2]&4194304&&Jr(qe,rt=Xd($),rt),c.$$.dirty[1]&134217728&&Jr(Ie,pt=si,pt),c.$$.dirty[1]&134217728|c.$$.dirty[2]&8388608&&Jr(je,yr=ie||si,yr),c.$$.dirty[2]&2097152&&Jr(it,Qr=Z,Qr),c.$$.dirty[1]&8388608&&Jr(nt,Zr=Gc(wi),Zr),c.$$.dirty[1]&16777216&&Jr(Me,Qt=Gc(Or),Qt),c.$$.dirty[1]&33554432&&Jr(Ye,Je=Gc(hr),Je),c.$$.dirty[1]&67108864&&Jr(Ke,Er=Gc(ar),Er),c.$$.dirty[1]&268435456&&Jr(Qe,Bt=li,Bt),c.$$.dirty[1]&536870912&&Jr(Lt,vr=ln,vr),c.$$.dirty[1]&1073741824&&Jr(Xe,vt=ti,vt),c.$$.dirty[2]&1&&Jr(jt,wt=Oi,wt),c.$$.dirty[2]&2&&Jr(sr,Wt=pa,Wt),c.$$.dirty[2]&4&&Jr(It,cr=Ha,cr),c.$$.dirty[2]&8&&Jr(Yt,wr=Xa,wr),c.$$.dirty[2]&16&&Jr(Vt,$e=In,$e),c.$$.dirty[2]&32&&Jr(Dr,ct=On,ct),c.$$.dirty[2]&64&&Jr(Nt,Dt=ui,Dt),c.$$.dirty[2]&128&&Jr(dr,zt=Fi,zt),c.$$.dirty[2]&256&&Jr(or,Ne=un,Ne),c.$$.dirty[2]&512&&Jr(Kt,Te=Wa,Te),c.$$.dirty[2]&1024&&Jr(tr,ve=mn,ve),c.$$.dirty[2]&2048&&Jr(ci,ze=Go,ze),c.$$.dirty[2]&4096&&Jr(gn,ee=cn,ee),c.$$.dirty[2]&131072&&Jr(fi,le=yn,le),c.$$.dirty[2]&262144&&Jr(di,F=Vr,F),c.$$.dirty[2]&524288&&Jr(Ji,N=O,N),c.$$.dirty[2]&1048576&&Jr(Yi,R=j,R),c.$$.dirty[2]&8192&&Jr(mr,B=Ei,B),c.$$.dirty[2]&16384&&Jr(Vi,k=Gr,k),c.$$.dirty[2]&32768&&Jr(Qi,T=Wi,T),c.$$.dirty[2]&65536&&Jr(Nr,a=Fn,a),c.$$.dirty[2]&16777216&&Jr(gr,_=de,_),c.$$.dirty[2]&33554432&&Jr($i,v=G,v),c.$$.dirty[2]&67108864&&cg("LayerCake",y)},f(88,y={activeGetters:ri,width:Ni,height:Vn,percentRange:te,aspectRatio:Pi,containerWidth:we,containerHeight:Ue,x:nt,y:Me,z:Ye,r:Ke,custom:gr,data:Ie,xNice:sr,yNice:It,zNice:Yt,rNice:Vt,xReverse:Dr,yReverse:Nt,zReverse:dr,rReverse:or,xPadding:Kt,yPadding:tr,zPadding:ci,rPadding:gn,padding:zi,flatData:je,extents:Kr,xDomain:Ur,yDomain:mi,zDomain:ii,rDomain:Ja,xRange:$n,yRange:js,zRange:Ho,rRange:Eo,config:$i,xScale:wa,xGet:jl,yScale:Ko,yGet:Tn,zScale:Mn,zGet:Ea,rScale:Sa,rGet:co}),[br,sn,oi,Ai,Ra,kt,nr,Bi,Ti,xi,$r,te,we,Ue,qe,Ie,je,it,nt,Me,Ye,Ke,Qe,Lt,Xe,jt,sr,It,Yt,Vt,Dr,Nt,dr,or,Kt,tr,ci,gn,fi,di,Ji,Yi,mr,Vi,Qi,Nr,$i,gr,Ni,Vn,Pi,Ct,ei,Sr,wi,Or,hr,ar,si,li,ln,ti,Oi,pa,Ha,Xa,In,On,ui,Fi,un,Wa,mn,Go,cn,Ei,Gr,Wi,Fn,yn,Vr,O,j,Z,$,ie,de,G,y,Jt,Xi,Si,en]}class b0 extends ws{constructor(h){super(),Es(this,h,v0,_0,Ss,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const x0=c=>({element:c&1}),Sy=c=>({element:c[0]}),w0=c=>({element:c&1}),ky=c=>({element:c[0]});function E0(c){let h,f,y,v,_;const a=c[12].defs,T=Jh(a,c,c[11],ky),k=c[12].default,B=Jh(k,c,c[11],Sy);return{c(){h=xo("svg"),f=xo("defs"),T&&T.c(),y=xo("g"),B&&B.c(),this.h()},l(R){h=wo(R,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var N=X(h);f=wo(N,"defs",{});var F=X(f);T&&T.l(F),F.forEach(C),y=wo(N,"g",{class:!0,transform:!0});var le=X(y);B&&B.l(le),le.forEach(C),N.forEach(C),this.h()},h(){z(y,"class","layercake-layout-svg_g"),z(y,"transform",v="translate("+c[7].left+", "+c[7].top+")"),z(h,"class","layercake-layout-svg svelte-u84d8d"),z(h,"viewBox",c[4]),z(h,"width",c[5]),z(h,"height",c[6]),ye(h,"z-index",c[2],!1),ye(h,"pointer-events",c[3]===!1?"none":null,!1)},m(R,N){ke(R,h,N),P(h,f),T&&T.m(f,null),P(h,y),B&&B.m(y,null),c[13](y),c[14](h),_=!0},p(R,[N]){T&&T.p&&(!_||N&2049)&&Yh(T,a,R,R[11],_?$h(a,R[11],N,w0):Qh(R[11]),ky),B&&B.p&&(!_||N&2049)&&Yh(B,k,R,R[11],_?$h(k,R[11],N,x0):Qh(R[11]),Sy),(!_||N&128&&v!==(v="translate("+R[7].left+", "+R[7].top+")"))&&z(y,"transform",v),(!_||N&16)&&z(h,"viewBox",R[4]),(!_||N&32)&&z(h,"width",R[5]),(!_||N&64)&&z(h,"height",R[6]),N&4&&ye(h,"z-index",R[2],!1),N&8&&ye(h,"pointer-events",R[3]===!1?"none":null,!1)},i(R){_||(mt(T,R),mt(B,R),_=!0)},o(R){xt(T,R),xt(B,R),_=!1},d(R){R&&C(h),T&&T.d(R),B&&B.d(R),c[13](null),c[14](null)}}}function S0(c,h,f){let y,v,_,{$$slots:a={},$$scope:T}=h,{element:k=void 0}=h,{innerElement:B=void 0}=h,{zIndex:R=void 0}=h,{pointerEvents:N=void 0}=h,{viewBox:F=void 0}=h;const{containerWidth:le,containerHeight:ee,padding:ze}=lf("LayerCake");ir(c,le,Ne=>f(5,y=Ne)),ir(c,ee,Ne=>f(6,v=Ne)),ir(c,ze,Ne=>f(7,_=Ne));function ve(Ne){Tc[Ne?"unshift":"push"](()=>{B=Ne,f(1,B)})}function Te(Ne){Tc[Ne?"unshift":"push"](()=>{k=Ne,f(0,k)})}return c.$$set=Ne=>{"element"in Ne&&f(0,k=Ne.element),"innerElement"in Ne&&f(1,B=Ne.innerElement),"zIndex"in Ne&&f(2,R=Ne.zIndex),"pointerEvents"in Ne&&f(3,N=Ne.pointerEvents),"viewBox"in Ne&&f(4,F=Ne.viewBox),"$$scope"in Ne&&f(11,T=Ne.$$scope)},[k,B,R,N,F,y,v,_,le,ee,ze,T,a,ve,Te]}class k0 extends ws{constructor(h){super(),Es(this,h,S0,E0,Ss,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Iy(c,h,f){const y=c.slice();return y[23]=h[f],y[25]=f,y}function Ty(c){let h,f,y,v;return{c(){h=xo("rect"),this.h()},l(_){h=wo(_,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),X(h).forEach(C),this.h()},h(){z(h,"class","group-rect"),z(h,"data-id",c[25]),z(h,"x",f=c[11].bandwidth?c[7](c[23]):c[7](c[23])[0]),z(h,"y",y=c[13](c[12](c[23]))-1),z(h,"width",v=c[11].bandwidth?c[11].bandwidth():c[9](c[23])),z(h,"height","3"),z(h,"fill","#CEDC20"),z(h,"stroke",c[0]),z(h,"stroke-width",c[1])},m(_,a){ke(_,h,a)},p(_,a){a&3200&&f!==(f=_[11].bandwidth?_[7](_[23]):_[7](_[23])[0])&&z(h,"x",f),a&13312&&y!==(y=_[13](_[12](_[23]))-1)&&z(h,"y",y),a&3584&&v!==(v=_[11].bandwidth?_[11].bandwidth():_[9](_[23]))&&z(h,"width",v),a&1&&z(h,"stroke",_[0]),a&2&&z(h,"stroke-width",_[1])},d(_){_&&C(h)}}}function Ay(c){let h,f,y,v,_,a,T,k,B=c[12]&&Ty(c);return{c(){h=xo("rect"),B&&B.c(),a=xo("text"),this.h()},l(R){h=wo(R,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),X(h).forEach(C),B&&B.l(R),a=wo(R,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),X(a).forEach(C),this.h()},h(){z(h,"class","group-rect"),z(h,"data-id",c[25]),z(h,"x",f=c[11].bandwidth?c[7](c[23]):c[7](c[23])[0]),z(h,"y",y=c[6](c[23])),z(h,"width",v=c[11].bandwidth?c[11].bandwidth():c[9](c[23])),z(h,"height",_=c[8](c[23])),z(h,"fill",c[4]),z(h,"stroke",c[0]),z(h,"stroke-width",c[1]),z(a,"x",T=c[11].bandwidth?c[7](c[23])+c[11].bandwidth()/2:c[7](c[23])[0]),z(a,"y",k=c[6](c[23])-4),z(a,"dx",c[2]),z(a,"dy",c[3]),z(a,"text-anchor",c[5])},m(R,N){ke(R,h,N),B&&B.m(R,N),ke(R,a,N)},p(R,N){N&3200&&f!==(f=R[11].bandwidth?R[7](R[23]):R[7](R[23])[0])&&z(h,"x",f),N&1088&&y!==(y=R[6](R[23]))&&z(h,"y",y),N&3584&&v!==(v=R[11].bandwidth?R[11].bandwidth():R[9](R[23]))&&z(h,"width",v),N&1280&&_!==(_=R[8](R[23]))&&z(h,"height",_),N&16&&z(h,"fill",R[4]),N&1&&z(h,"stroke",R[0]),N&2&&z(h,"stroke-width",R[1]),R[12]?B?B.p(R,N):(B=Ty(R),B.c(),B.m(a.parentNode,a)):B&&(B.d(1),B=null),N&3200&&T!==(T=R[11].bandwidth?R[7](R[23])+R[11].bandwidth()/2:R[7](R[23])[0])&&z(a,"x",T),N&1088&&k!==(k=R[6](R[23])-4)&&z(a,"y",k),N&4&&z(a,"dx",R[2]),N&8&&z(a,"dy",R[3]),N&32&&z(a,"text-anchor",R[5])},d(R){R&&C(h),B&&B.d(R),R&&C(a)}}}function I0(c){let h,f=c[10],y=[];for(let v=0;v<f.length;v+=1)y[v]=Ay(Iy(c,f,v));return{c(){h=xo("g");for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){h=wo(v,"g",{class:!0});var _=X(h);for(let a=0;a<y.length;a+=1)y[a].l(_);_.forEach(C),this.h()},h(){z(h,"class","column-group svelte-wgzwsk")},m(v,_){ke(v,h,_);for(let a=0;a<y.length;a+=1)y[a].m(h,null)},p(v,[_]){if(_&16383){f=v[10];let a;for(a=0;a<f.length;a+=1){const T=Iy(v,f,a);y[a]?y[a].p(T,_):(y[a]=Ay(T),y[a].c(),y[a].m(h,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},i:Sn,o:Sn,d(v){v&&C(h),yu(y,v)}}}function T0(c,h,f){let y,v,_,a,T,k,B,R,N;const{data:F,xGet:le,yGet:ee,yRange:ze,xScale:ve,yScale:Te,y:Ne,z:zt}=lf("LayerCake");ir(c,F,wt=>f(10,k=wt)),ir(c,le,wt=>f(7,T=wt)),ir(c,ee,wt=>f(6,_=wt)),ir(c,ze,wt=>f(21,a=wt)),ir(c,ve,wt=>f(11,B=wt)),ir(c,Te,wt=>f(13,N=wt)),ir(c,zt,wt=>f(12,R=wt));let{stroke:Dt=""}=h,{strokeWidth:ct=0}=h,{dxTick:$e=0}=h,{dyTick:wr=0}=h,{fill:cr="#00205b"}=h,{textAnchor:Wt="middle"}=h;return c.$$set=wt=>{"stroke"in wt&&f(0,Dt=wt.stroke),"strokeWidth"in wt&&f(1,ct=wt.strokeWidth),"dxTick"in wt&&f(2,$e=wt.dxTick),"dyTick"in wt&&f(3,wr=wt.dyTick),"fill"in wt&&f(4,cr=wt.fill),"textAnchor"in wt&&f(5,Wt=wt.textAnchor)},c.$$.update=()=>{c.$$.dirty&128&&f(9,y=wt=>{const vt=T(wt);return Math.max(0,vt[1]-vt[0])}),c.$$.dirty&2097216&&f(8,v=wt=>a[0]-_(wt))},[Dt,ct,$e,wr,cr,Wt,_,T,v,y,k,B,R,N,F,le,ee,ze,ve,Te,zt,a]}class A0 extends ws{constructor(h){super(),Es(this,h,T0,I0,Ss,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function zy(c,h,f){const y=c.slice();return y[28]=h[f],y[30]=f,y}function Py(c){let h,f,y,v;return{c(){h=xo("line"),this.h()},l(_){h=wo(_,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),X(h).forEach(C),this.h()},h(){z(h,"y1",f=c[20]*-1),z(h,"y2",y=c[14]&&c[30]%2==0?c[10]+c[8]+2:c[10]+c[8]-13),z(h,"x1","0"),z(h,"x2","0"),z(h,"stroke",c[11]),z(h,"stroke-width",v=c[15]&&Array.isArray(c[4])&&c[30]==Math.floor(c[4].length/2)?2:1),z(h,"class","svelte-fwjh80"),on(h,"baseline",c[13])},m(_,a){ke(_,h,a)},p(_,a){a&1048576&&f!==(f=_[20]*-1)&&z(h,"y1",f),a&17664&&y!==(y=_[14]&&_[30]%2==0?_[10]+_[8]+2:_[10]+_[8]-13)&&z(h,"y2",y),a&2048&&z(h,"stroke",_[11]),a&32784&&v!==(v=_[15]&&Array.isArray(_[4])&&_[30]==Math.floor(_[4].length/2)?2:1)&&z(h,"stroke-width",v),a&8192&&on(h,"baseline",_[13])},d(_){_&&C(h)}}}function z0(c){let h=c[1](c[28])+"",f;return{c(){f=ce(h)},l(y){f=he(y,h)},m(y,v){ke(y,f,v)},p(y,v){v&262146&&h!==(h=y[1](y[28])+"")&&gt(f,h)},d(y){y&&C(f)}}}function P0(c){let h,f=c[1](c[28])+"",y,v;return{c(){h=ce(c[5]),y=ce(f),v=ce(c[6])},l(_){h=he(_,c[5]),y=he(_,f),v=he(_,c[6])},m(_,a){ke(_,h,a),ke(_,y,a),ke(_,v,a)},p(_,a){a&32&&gt(h,_[5]),a&262146&&f!==(f=_[1](_[28])+"")&&gt(y,f),a&64&&gt(v,_[6])},d(_){_&&C(h),_&&C(y),_&&C(v)}}}function Cy(c){let h,f,y,v,_,a,T,k=c[0]!==!1&&Py(c);function B(F,le){return F[30]==F[18].length-1?P0:z0}let R=B(c),N=R(c);return{c(){h=xo("g"),k&&k.c(),f=xo("text"),N.c(),this.h()},l(F){h=wo(F,"g",{class:!0,transform:!0});var le=X(h);k&&k.l(le),f=wo(le,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var ee=X(f);N.l(ee),ee.forEach(C),le.forEach(C),this.h()},h(){z(f,"x",y=c[7]||c[16]?c[17].bandwidth()/2:0),z(f,"y",v=c[3]?c[20]*-1-6:c[14]&&c[30]%2==0?c[8]+15:c[8]),z(f,"dx",_=c[24](c[30])=="start"?c[9]-2:c[24](c[30])=="end"?c[9]+2:c[9]),z(f,"dy",c[10]),z(f,"text-anchor",c[24](c[30])),z(f,"fill",c[12]),z(f,"class","svelte-fwjh80"),on(f,"bold",c[15]&&Array.isArray(c[4])&&c[30]==Math.floor(c[4].length/2)),z(h,"class",a="tick tick-"+c[28]+" svelte-fwjh80"),z(h,"transform",T="translate("+c[17](c[28])+","+c[19][0]+")")},m(F,le){ke(F,h,le),k&&k.m(h,null),P(h,f),N.m(f,null)},p(F,le){F[0]!==!1?k?k.p(F,le):(k=Py(F),k.c(),k.m(h,f)):k&&(k.d(1),k=null),R===(R=B(F))&&N?N.p(F,le):(N.d(1),N=R(F),N&&(N.c(),N.m(f,null))),le&196736&&y!==(y=F[7]||F[16]?F[17].bandwidth()/2:0)&&z(f,"x",y),le&1065224&&v!==(v=F[3]?F[20]*-1-6:F[14]&&F[30]%2==0?F[8]+15:F[8])&&z(f,"y",v),le&512&&_!==(_=F[24](F[30])=="start"?F[9]-2:F[24](F[30])=="end"?F[9]+2:F[9])&&z(f,"dx",_),le&1024&&z(f,"dy",F[10]),le&4096&&z(f,"fill",F[12]),le&32784&&on(f,"bold",F[15]&&Array.isArray(F[4])&&F[30]==Math.floor(F[4].length/2)),le&262144&&a!==(a="tick tick-"+F[28]+" svelte-fwjh80")&&z(h,"class",a),le&917504&&T!==(T="translate("+F[17](F[28])+","+F[19][0]+")")&&z(h,"transform",T)},d(F){F&&C(h),k&&k.d(),N.d()}}}function My(c){let h,f,y;return{c(){h=xo("line"),this.h()},l(v){h=wo(v,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),X(h).forEach(C),this.h()},h(){z(h,"class","baseline svelte-fwjh80"),z(h,"y1",c[20]),z(h,"y2","0"),z(h,"x1",f=c[17](0)),z(h,"x2",y=c[17](0)),z(h,"stroke",c[11])},m(v,_){ke(v,h,_)},p(v,_){_&1048576&&z(h,"y1",v[20]),_&131072&&f!==(f=v[17](0))&&z(h,"x1",f),_&131072&&y!==(y=v[17](0))&&z(h,"x2",y),_&2048&&z(h,"stroke",v[11])},d(v){v&&C(h)}}}function C0(c){let h,f,y=c[18],v=[];for(let a=0;a<y.length;a+=1)v[a]=Cy(zy(c,y,a));let _=c[2]===!0&&My(c);return{c(){h=xo("g");for(let a=0;a<v.length;a+=1)v[a].c();f=ha(),_&&_.c(),this.h()},l(a){h=wo(a,"g",{class:!0});var T=X(h);for(let k=0;k<v.length;k+=1)v[k].l(T);f=ha(),_&&_.l(T),T.forEach(C),this.h()},h(){z(h,"class","axis x-axis")},m(a,T){ke(a,h,T);for(let k=0;k<v.length;k+=1)v[k].m(h,null);P(h,f),_&&_.m(h,null)},p(a,[T]){if(T&18874363){y=a[18];let k;for(k=0;k<y.length;k+=1){const B=zy(a,y,k);v[k]?v[k].p(B,T):(v[k]=Cy(B),v[k].c(),v[k].m(h,f))}for(;k<v.length;k+=1)v[k].d(1);v.length=y.length}a[2]===!0?_?_.p(a,T):(_=My(a),_.c(),_.m(h,null)):_&&(_.d(1),_=null)},i:Sn,o:Sn,d(a){a&&C(h),yu(v,a),_&&_.d()}}}function M0(c,h,f){let y,v,_,a,T;const{width:k,height:B,xScale:R,yScale:N,yRange:F}=lf("LayerCake");ir(c,B,Je=>f(20,T=Je)),ir(c,R,Je=>f(17,_=Je)),ir(c,F,Je=>f(19,a=Je));let{gridlines:le=!0}=h,{formatTick:ee=Je=>Je}=h,{baseline:ze=!1}=h,{flipped:ve=!1}=h,{snapTicks:Te=!1}=h,{ticks:Ne=void 0}=h,{prefix:zt=""}=h,{suffix:Dt=""}=h,{xTick:ct=void 0}=h,{yTick:$e=15}=h,{dxTick:wr=0}=h,{dyTick:cr=0}=h,{lineColor:Wt="#999"}=h,{textColor:wt="#555"}=h,{solid:vt=!1}=h,{stagger:vr=!1}=h,{median:Bt=!0}=h;function Er(Je){if(Te===!0){if(Je===0)return"start";if(Je===v.length-1)return"end"}return"middle"}return c.$$set=Je=>{"gridlines"in Je&&f(0,le=Je.gridlines),"formatTick"in Je&&f(1,ee=Je.formatTick),"baseline"in Je&&f(2,ze=Je.baseline),"flipped"in Je&&f(3,ve=Je.flipped),"snapTicks"in Je&&f(25,Te=Je.snapTicks),"ticks"in Je&&f(4,Ne=Je.ticks),"prefix"in Je&&f(5,zt=Je.prefix),"suffix"in Je&&f(6,Dt=Je.suffix),"xTick"in Je&&f(7,ct=Je.xTick),"yTick"in Je&&f(8,$e=Je.yTick),"dxTick"in Je&&f(9,wr=Je.dxTick),"dyTick"in Je&&f(10,cr=Je.dyTick),"lineColor"in Je&&f(11,Wt=Je.lineColor),"textColor"in Je&&f(12,wt=Je.textColor),"solid"in Je&&f(13,vt=Je.solid),"stagger"in Je&&f(14,vr=Je.stagger),"median"in Je&&f(15,Bt=Je.median)},c.$$.update=()=>{c.$$.dirty&131072&&f(16,y=typeof _.bandwidth=="function"),c.$$.dirty&196624&&f(18,v=Array.isArray(Ne)?Ne:y?_.domain():_.ticks(Ne))},[le,ee,ze,ve,Ne,zt,Dt,ct,$e,wr,cr,Wt,wt,vt,vr,Bt,y,_,v,a,T,B,R,F,Er,Te]}class D0 extends ws{constructor(h){super(),Es(this,h,M0,C0,Ss,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function L0(c){let h,f,y,v;return h=new A0({props:{fill:c[1],formatVal:c[5]}}),y=new D0({props:{gridlines:!1}}),{c(){Tr(h.$$.fragment),f=Le(),Tr(y.$$.fragment)},l(_){Ar(h.$$.fragment,_),f=Re(_),Ar(y.$$.fragment,_)},m(_,a){zr(h,_,a),ke(_,f,a),zr(y,_,a),v=!0},p(_,a){const T={};a&2&&(T.fill=_[1]),a&32&&(T.formatVal=_[5]),h.$set(T)},i(_){v||(mt(h.$$.fragment,_),mt(y.$$.fragment,_),v=!0)},o(_){xt(h.$$.fragment,_),xt(y.$$.fragment,_),v=!1},d(_){Pr(h,_),_&&C(f),Pr(y,_)}}}function R0(c){let h,f;return h=new k0({props:{$$slots:{default:[L0]},$$scope:{ctx:c}}}),{c(){Tr(h.$$.fragment)},l(y){Ar(h.$$.fragment,y)},m(y,v){zr(h,y,v),f=!0},p(y,v){const _={};v&2082&&(_.$$scope={dirty:v,ctx:y}),h.$set(_)},i(y){f||(mt(h.$$.fragment,y),f=!0)},o(y){xt(h.$$.fragment,y),f=!1},d(y){Pr(h,y)}}}function B0(c){let h,f,y;return f=new b0({props:{padding:{top:15,right:0,bottom:20,left:0},x:c[2],y:c[3],z:c[4],xScale:xg().paddingInner([.02]).round(!0),xDomain:c[7],yDomain:c[6],zDomain:c[6],data:c[0],$$slots:{default:[R0]},$$scope:{ctx:c}}}),{c(){h=K("div"),Tr(f.$$.fragment),this.h()},l(v){h=H(v,"DIV",{class:!0});var _=X(h);Ar(f.$$.fragment,_),_.forEach(C),this.h()},h(){z(h,"class","chart-container svelte-1i1qsul")},m(v,_){ke(v,h,_),zr(f,h,null),y=!0},p(v,[_]){const a={};_&4&&(a.x=v[2]),_&8&&(a.y=v[3]),_&16&&(a.z=v[4]),_&128&&(a.xDomain=v[7]),_&64&&(a.yDomain=v[6]),_&64&&(a.zDomain=v[6]),_&1&&(a.data=v[0]),_&2082&&(a.$$scope={dirty:_,ctx:v}),f.$set(a)},i(v){y||(mt(f.$$.fragment,v),y=!0)},o(v){xt(f.$$.fragment,v),y=!1},d(v){v&&C(h),Pr(f)}}}function O0(c,h,f){let y,v,_,{data:a}=h,{suffix:T="%"}=h,{decimals:k=null}=h,{fill:B="#00205B"}=h,{xKey:R="x"}=h,{yKey:N="y"}=h,{zKey:F=null}=h,{colors:le=["#00205B","#00205B","#00205B","#00205B"]}=h;return c.$$set=ee=>{"data"in ee&&f(0,a=ee.data),"suffix"in ee&&f(8,T=ee.suffix),"decimals"in ee&&f(9,k=ee.decimals),"fill"in ee&&f(1,B=ee.fill),"xKey"in ee&&f(2,R=ee.xKey),"yKey"in ee&&f(3,N=ee.yKey),"zKey"in ee&&f(4,F=ee.zKey),"colors"in ee&&f(10,le=ee.colors)},c.$$.update=()=>{c.$$.dirty&5&&f(7,y=a.map(ee=>ee[R])),c.$$.dirty&9&&f(6,v=[0,Math.max(...a.map(ee=>ee[N]))]),c.$$.dirty&768&&f(5,_=ee=>ee.toFixed(k)+T)},[a,B,R,N,F,_,v,y,T,k,le]}class F0 extends ws{constructor(h){super(),Es(this,h,O0,B0,Ss,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function Dy(c,h,f){const y=c.slice();return y[12]=h[f],y[14]=f,y}function V0(c){let h,f,y=c[4](c[12][c[3]])+"",v,_;return{c(){h=K("span"),f=ce("(NI "),v=ce(y),_=ce(")"),this.h()},l(a){h=H(a,"SPAN",{class:!0,style:!0});var T=X(h);f=he(T,"(NI "),v=he(T,y),_=he(T,")"),T.forEach(C),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(a,T){ke(a,h,T),P(h,f),P(h,v),P(h,_)},p(a,T){T&9&&y!==(y=a[4](a[12][a[3]])+"")&&gt(v,y)},d(a){a&&C(h)}}}function N0(c){let h,f,y=dd(Math.round(c[12][c[3]]),"%)")+"",v;return{c(){h=K("span"),f=ce("(2011 "),v=ce(y),this.h()},l(_){h=H(_,"SPAN",{class:!0,style:!0});var a=X(h);f=he(a,"(2011 "),v=he(a,y),a.forEach(C),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(_,a){ke(_,h,a),P(h,f),P(h,v)},p(_,a){a&9&&y!==(y=dd(Math.round(_[12][_[3]]),"%)")+"")&&gt(v,y)},d(_){_&&C(h)}}}function Ly(c){let h,f,y,v,_=c[12][c[1]]+"",a,T,k,B=c[4](c[12][c[2]])+"",R,N,F;function le(ve,Te){if(ve[3]=="prev")return N0;if(ve[3])return V0}let ee=le(c),ze=ee&&ee(c);return{c(){h=K("tr"),f=K("td"),y=xo("svg"),v=Le(),a=ce(_),T=Le(),k=K("td"),R=ce(B),N=Le(),ze&&ze.c(),F=Le(),this.h()},l(ve){h=H(ve,"TR",{});var Te=X(h);f=H(Te,"TD",{class:!0});var Ne=X(f);y=wo(Ne,"svg",{width:!0,height:!0,class:!0});var zt=X(y);zt.forEach(C),v=Re(Ne),a=he(Ne,_),Ne.forEach(C),T=Re(Te),k=H(Te,"TD",{class:!0,style:!0});var Dt=X(k);R=he(Dt,B),N=Re(Dt),ze&&ze.l(Dt),Dt.forEach(C),F=Re(Te),Te.forEach(C),this.h()},h(){z(y,"width","20"),z(y,"height","30"),z(y,"class","bullet svelte-1mqxdxj"),z(f,"class","svelte-1mqxdxj"),z(k,"class","cell-right svelte-1mqxdxj"),ye(k,"vertical-align","top")},m(ve,Te){ke(ve,h,Te),P(h,f),P(f,y),P(f,v),P(f,a),P(h,T),P(h,k),P(k,R),P(k,N),ze&&ze.m(k,null),P(h,F)},p(ve,Te){Te&3&&_!==(_=ve[12][ve[1]]+"")&&gt(a,_),Te&5&&B!==(B=ve[4](ve[12][ve[2]])+"")&&gt(R,B),ee===(ee=le(ve))&&ze?ze.p(ve,Te):(ze&&ze.d(1),ze=ee&&ee(ve),ze&&(ze.c(),ze.m(k,null)))},d(ve){ve&&C(h),ze&&ze.d()}}}function U0(c){let h,f,y=c[0],v=[];for(let _=0;_<y.length;_+=1)v[_]=Ly(Dy(c,y,_));return{c(){h=K("table"),f=K("tbody");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){h=H(_,"TABLE",{class:!0});var a=X(h);f=H(a,"TBODY",{});var T=X(f);for(let k=0;k<v.length;k+=1)v[k].l(T);T.forEach(C),a.forEach(C),this.h()},h(){z(h,"class","legend svelte-1mqxdxj")},m(_,a){ke(_,h,a),P(h,f);for(let T=0;T<v.length;T+=1)v[T].m(f,null)},p(_,[a]){if(a&31){y=_[0];let T;for(T=0;T<y.length;T+=1){const k=Dy(_,y,T);v[T]?v[T].p(k,a):(v[T]=Ly(k),v[T].c(),v[T].m(f,null))}for(;T<v.length;T+=1)v[T].d(1);v.length=y.length}},i:Sn,o:Sn,d(_){_&&C(h),yu(v,_)}}}function j0(c,h,f){let y,{data:v}=h,{xKey:_="x"}=h,{yKey:a="y"}=h,{zKey:T="ni"}=h,{colors:k=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:B="#555"}=h,{mutedColor:R="#999"}=h,{decimals:N=null}=h,{round:F=!1}=h;function le(ee){let ze;return N?ze=(ee/y*100).toFixed(N)+"%":ee/y*100<1?ze="<1%":ze=(ee/y*100).toFixed(0)+"%",ze}return c.$$set=ee=>{"data"in ee&&f(0,v=ee.data),"xKey"in ee&&f(1,_=ee.xKey),"yKey"in ee&&f(2,a=ee.yKey),"zKey"in ee&&f(3,T=ee.zKey),"colors"in ee&&f(5,k=ee.colors),"textColor"in ee&&f(6,B=ee.textColor),"mutedColor"in ee&&f(7,R=ee.mutedColor),"decimals"in ee&&f(8,N=ee.decimals),"round"in ee&&f(9,F=ee.round)},c.$$.update=()=>{c.$$.dirty&5&&(y=v.map(ee=>ee[a]).reduce((ee,ze)=>ee+ze,0)),c.$$.dirty&9&&v.map(ee=>ee[T]).reduce((ee,ze)=>ee+ze,0)},[v,_,a,T,le,k,B,R,N,F]}class q0 extends ws{constructor(h){super(),Es(this,h,j0,U0,Ss,{data:0,xKey:1,yKey:2,zKey:3,colors:5,textColor:6,mutedColor:7,decimals:8,round:9})}}function Ry(c,h,f){const y=c.slice();return y[6]=h[f],y[8]=f,y}function By(c){let h,f=c[0],y=[];for(let v=0;v<f.length;v+=1)y[v]=Oy(Ry(c,f,v));return{c(){h=xo("svg");for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){h=wo(v,"svg",{class:!0});var _=X(h);for(let a=0;a<y.length;a+=1)y[a].l(_);_.forEach(C),this.h()},h(){z(h,"class","stack svelte-pzvhwz")},m(v,_){ke(v,h,_);for(let a=0;a<y.length;a+=1)y[a].m(h,null)},p(v,_){if(_&31){f=v[0];let a;for(a=0;a<f.length;a+=1){const T=Ry(v,f,a);y[a]?y[a].p(T,_):(y[a]=Oy(T),y[a].c(),y[a].m(h,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},d(v){v&&C(h),yu(y,v)}}}function Oy(c){let h,f;return{c(){h=xo("rect"),this.h()},l(y){h=wo(y,"rect",{class:!0,x:!0,style:!0}),X(h).forEach(C),this.h()},h(){z(h,"class","cell svelte-pzvhwz"),z(h,"x",f=c[4][c[8]]/c[3]*100+"%"),ye(h,"width",c[6][c[1]]/c[3]*100+"%"),ye(h,"fill",c[2][c[8]])},m(y,v){ke(y,h,v)},p(y,v){v&24&&f!==(f=y[4][y[8]]/y[3]*100+"%")&&z(h,"x",f),v&11&&ye(h,"width",y[6][y[1]]/y[3]*100+"%"),v&4&&ye(h,"fill",y[2][y[8]])},d(y){y&&C(h)}}}function Z0(c){let h,f=c[3]&&c[4]&&By(c);return{c(){f&&f.c(),h=ha()},l(y){f&&f.l(y),h=ha()},m(y,v){f&&f.m(y,v),ke(y,h,v)},p(y,[v]){y[3]&&y[4]?f?f.p(y,v):(f=By(y),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:Sn,o:Sn,d(y){f&&f.d(y),y&&C(h)}}}function G0(c,h,f){let{data:y}=h,{yKey:v="y"}=h,{colors:_=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,a,T;function k(){f(3,a=y.map(R=>R[v]).reduce((R,N)=>R+N,0));let B=[0];y.forEach(R=>B.push(B[B.length-1]+R[v])),f(4,T=B)}return c.$$set=B=>{"data"in B&&f(0,y=B.data),"yKey"in B&&f(1,v=B.yKey),"colors"in B&&f(2,_=B.colors)},c.$$.update=()=>{c.$$.dirty&3&&(y||v)&&k()},[y,v,_,a,T]}class mm extends ws{constructor(h){super(),Es(this,h,G0,Z0,Ss,{data:0,yKey:1,colors:2})}}function Fy(c,h,f){const y=c.slice();return y[10]=h[f],y[12]=f,y}function K0(c){let h,f,y=c[6](c[10][c[3]])+"",v,_;return{c(){h=K("span"),f=ce("(NI "),v=ce(y),_=ce(")"),this.h()},l(a){h=H(a,"SPAN",{class:!0,style:!0});var T=X(h);f=he(T,"(NI "),v=he(T,y),_=he(T,")"),T.forEach(C),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(a,T){ke(a,h,T),P(h,f),P(h,v),P(h,_)},p(a,T){T&9&&y!==(y=a[6](a[10][a[3]])+"")&&gt(v,y)},d(a){a&&C(h)}}}function H0(c){let h;return{c(){h=K("span"),this.h()},l(f){h=H(f,"SPAN",{class:!0,style:!0}),X(h).forEach(C),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(f,y){ke(f,h,y)},p:Sn,d(f){f&&C(h)}}}function X0(c){let h,f,y=dd(Math.round(c[10][c[3]]),"%)")+"",v;return{c(){h=K("span"),f=ce("(2011 "),v=ce(y),this.h()},l(_){h=H(_,"SPAN",{class:!0,style:!0});var a=X(h);f=he(a,"(2011 "),v=he(a,y),a.forEach(C),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(_,a){ke(_,h,a),P(h,f),P(h,v)},p(_,a){a&9&&y!==(y=dd(Math.round(_[10][_[3]]),"%)")+"")&&gt(v,y)},d(_){_&&C(h)}}}function Vy(c){let h,f,y,v,_,a=c[10][c[1]]+"",T,k,B,R=c[6](c[10][c[2]])+"",N,F,le;function ee(Te,Ne){if(Te[3]=="prev"&&Te[4])return X0;if(Te[3]=="prev"&&!Te[4])return H0;if(Te[3])return K0}let ze=ee(c),ve=ze&&ze(c);return{c(){h=K("tr"),f=K("td"),y=xo("svg"),v=xo("rect"),_=Le(),T=ce(a),k=Le(),B=K("td"),N=ce(R),F=Le(),ve&&ve.c(),le=Le(),this.h()},l(Te){h=H(Te,"TR",{});var Ne=X(h);f=H(Ne,"TD",{class:!0});var zt=X(f);y=wo(zt,"svg",{width:!0,height:!0,class:!0});var Dt=X(y);v=wo(Dt,"rect",{width:!0,height:!0,style:!0}),X(v).forEach(C),Dt.forEach(C),_=Re(zt),T=he(zt,a),zt.forEach(C),k=Re(Ne),B=H(Ne,"TD",{class:!0,style:!0});var ct=X(B);N=he(ct,R),F=Re(ct),ve&&ve.l(ct),ct.forEach(C),le=Re(Ne),Ne.forEach(C),this.h()},h(){z(v,"width","20"),z(v,"height","30"),ye(v,"fill",c[5][c[12]]),z(y,"width","20"),z(y,"height","30"),z(y,"class","bullet svelte-1gvovsq"),z(f,"class","svelte-1gvovsq"),z(B,"class","cell-right svelte-1gvovsq"),ye(B,"vertical-align","top")},m(Te,Ne){ke(Te,h,Ne),P(h,f),P(f,y),P(y,v),P(f,_),P(f,T),P(h,k),P(h,B),P(B,N),P(B,F),ve&&ve.m(B,null),P(h,le)},p(Te,Ne){Ne&32&&ye(v,"fill",Te[5][Te[12]]),Ne&3&&a!==(a=Te[10][Te[1]]+"")&&gt(T,a),Ne&5&&R!==(R=Te[6](Te[10][Te[2]])+"")&&gt(N,R),ze===(ze=ee(Te))&&ve?ve.p(Te,Ne):(ve&&ve.d(1),ve=ze&&ze(Te),ve&&(ve.c(),ve.m(B,null)))},d(Te){Te&&C(h),ve&&ve.d()}}}function W0(c){let h,f,y=c[0],v=[];for(let _=0;_<y.length;_+=1)v[_]=Vy(Fy(c,y,_));return{c(){h=K("table"),f=K("tbody");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){h=H(_,"TABLE",{class:!0});var a=X(h);f=H(a,"TBODY",{});var T=X(f);for(let k=0;k<v.length;k+=1)v[k].l(T);T.forEach(C),a.forEach(C),this.h()},h(){z(h,"class","legend svelte-1gvovsq")},m(_,a){ke(_,h,a),P(h,f);for(let T=0;T<v.length;T+=1)v[T].m(f,null)},p(_,[a]){if(a&127){y=_[0];let T;for(T=0;T<y.length;T+=1){const k=Fy(_,y,T);v[T]?v[T].p(k,a):(v[T]=Vy(k),v[T].c(),v[T].m(f,null))}for(;T<v.length;T+=1)v[T].d(1);v.length=y.length}},i:Sn,o:Sn,d(_){_&&C(h),yu(v,_)}}}function J0(c,h,f){let y,{data:v}=h,{xKey:_="x"}=h,{yKey:a="y"}=h,{zKey:T="ni"}=h,{topic_prev_available:k=!0}=h,{colors:B=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:R=null}=h;function N(F){let le;return R?le=(F/y*100).toFixed(R)+"%":F/y*100<1?le="<1%":le=(F/y*100).toFixed(0)+"%",le}return c.$$set=F=>{"data"in F&&f(0,v=F.data),"xKey"in F&&f(1,_=F.xKey),"yKey"in F&&f(2,a=F.yKey),"zKey"in F&&f(3,T=F.zKey),"topic_prev_available"in F&&f(4,k=F.topic_prev_available),"colors"in F&&f(5,B=F.colors),"decimals"in F&&f(7,R=F.decimals)},c.$$.update=()=>{c.$$.dirty&5&&(y=v.map(F=>F[a]).reduce((F,le)=>F+le,0)),c.$$.dirty&9&&v.map(F=>F[T]).reduce((F,le)=>F+le,0)},[v,_,a,T,k,B,N,R]}class Y0 extends ws{constructor(h){super(),Es(this,h,J0,W0,Ss,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function Ny(c){let h,f,y,v;f=new mm({props:{data:c[0],yKey:c[4],colors:c[6]}});let _=c[8]&&Uy(c);return{c(){h=K("div"),Tr(f.$$.fragment),y=Le(),_&&_.c(),this.h()},l(a){h=H(a,"DIV",{class:!0,style:!0});var T=X(h);Ar(f.$$.fragment,T),y=Re(T),_&&_.l(T),T.forEach(C),this.h()},h(){z(h,"class","chart svelte-1tebgpk"),ye(h,"height",c[1]*.28+"px")},m(a,T){ke(a,h,T),zr(f,h,null),P(h,y),_&&_.m(h,null),v=!0},p(a,T){const k={};T&1&&(k.data=a[0]),T&16&&(k.yKey=a[4]),T&64&&(k.colors=a[6]),f.$set(k),a[8]?_?_.p(a,T):(_=Uy(a),_.c(),_.m(h,null)):_&&(_.d(1),_=null),(!v||T&2)&&ye(h,"height",a[1]*.28+"px")},i(a){v||(mt(f.$$.fragment,a),v=!0)},o(a){xt(f.$$.fragment,a),v=!1},d(a){a&&C(h),Pr(f),_&&_.d()}}}function Uy(c){let h,f;return{c(){h=K("div"),f=ce(c[8]),this.h()},l(y){h=H(y,"DIV",{class:!0});var v=X(h);f=he(v,c[8]),v.forEach(C),this.h()},h(){z(h,"class","label svelte-1tebgpk")},m(y,v){ke(y,h,v),P(h,f)},p(y,v){v&256&&gt(f,y[8])},d(y){y&&C(h)}}}function jy(c){let h,f,y,v,_,a;return f=new mm({props:{data:c[0],yKey:c[4],colors:c[6]}}),{c(){h=K("div"),Tr(f.$$.fragment),y=Le(),v=K("div"),_=ce("2011 comparison not available"),this.h()},l(T){h=H(T,"DIV",{class:!0,style:!0});var k=X(h);Ar(f.$$.fragment,k),y=Re(k),v=H(k,"DIV",{class:!0,style:!0});var B=X(v);_=he(B,"2011 comparison not available"),B.forEach(C),k.forEach(C),this.h()},h(){z(v,"class","label svelte-1tebgpk"),ye(v,"background-color","#d8d8d8 "),ye(v,"color","#000000"),z(h,"class","chart svelte-1tebgpk"),ye(h,"height",c[1]*.28+"px")},m(T,k){ke(T,h,k),zr(f,h,null),P(h,y),P(h,v),P(v,_),a=!0},p(T,k){const B={};k&1&&(B.data=T[0]),k&16&&(B.yKey=T[4]),k&64&&(B.colors=T[6]),f.$set(B),(!a||k&2)&&ye(h,"height",T[1]*.28+"px")},i(T){a||(mt(f.$$.fragment,T),a=!0)},o(T){xt(f.$$.fragment,T),a=!1},d(T){T&&C(h),Pr(f)}}}function Q0(c){let h,f,y,v,_,a,T,k;f=new mm({props:{data:c[0],yKey:c[3],colors:c[6]}});let B=(c[4]&&c[5]||c[4]=="ni")&&Ny(c),R=c[4]=="prev"&&!c[5]&&jy(c);return T=new Y0({props:{data:c[0],xKey:c[2],yKey:c[3],zKey:c[4],topic_prev_available:c[5],decimals:c[7],colors:c[6]}}),{c(){h=K("div"),Tr(f.$$.fragment),y=Le(),B&&B.c(),v=Le(),R&&R.c(),_=Le(),a=K("div"),Tr(T.$$.fragment),this.h()},l(N){h=H(N,"DIV",{class:!0,style:!0});var F=X(h);Ar(f.$$.fragment,F),F.forEach(C),y=Re(N),B&&B.l(N),v=Re(N),R&&R.l(N),_=Re(N),a=H(N,"DIV",{class:!0});var le=X(a);Ar(T.$$.fragment,le),le.forEach(C),this.h()},h(){z(h,"class","chart svelte-1tebgpk"),ye(h,"padding-top","3px"),ye(h,"height",(c[4]?c[1]*.72:c[1])+"px"),z(a,"class","legend svelte-1tebgpk")},m(N,F){ke(N,h,F),zr(f,h,null),ke(N,y,F),B&&B.m(N,F),ke(N,v,F),R&&R.m(N,F),ke(N,_,F),ke(N,a,F),zr(T,a,null),k=!0},p(N,[F]){const le={};F&1&&(le.data=N[0]),F&8&&(le.yKey=N[3]),F&64&&(le.colors=N[6]),f.$set(le),(!k||F&18)&&ye(h,"height",(N[4]?N[1]*.72:N[1])+"px"),N[4]&&N[5]||N[4]=="ni"?B?(B.p(N,F),F&48&&mt(B,1)):(B=Ny(N),B.c(),mt(B,1),B.m(v.parentNode,v)):B&&(El(),xt(B,1,1,()=>{B=null}),Sl()),N[4]=="prev"&&!N[5]?R?(R.p(N,F),F&48&&mt(R,1)):(R=jy(N),R.c(),mt(R,1),R.m(_.parentNode,_)):R&&(El(),xt(R,1,1,()=>{R=null}),Sl());const ee={};F&1&&(ee.data=N[0]),F&4&&(ee.xKey=N[2]),F&8&&(ee.yKey=N[3]),F&16&&(ee.zKey=N[4]),F&32&&(ee.topic_prev_available=N[5]),F&128&&(ee.decimals=N[7]),F&64&&(ee.colors=N[6]),T.$set(ee)},i(N){k||(mt(f.$$.fragment,N),mt(B),mt(R),mt(T.$$.fragment,N),k=!0)},o(N){xt(f.$$.fragment,N),xt(B),xt(R),xt(T.$$.fragment,N),k=!1},d(N){N&&C(h),Pr(f),N&&C(y),B&&B.d(N),N&&C(v),R&&R.d(N),N&&C(_),N&&C(a),Pr(T)}}}function $0(c,h,f){let{data:y}=h,{height:v=80}=h,{xKey:_="x"}=h,{yKey:a="y"}=h,{zKey:T="ni"}=h,{topic_prev_available:k=!0}=h,{colors:B=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:R=null}=h,{label:N=null}=h;return c.$$set=F=>{"data"in F&&f(0,y=F.data),"height"in F&&f(1,v=F.height),"xKey"in F&&f(2,_=F.xKey),"yKey"in F&&f(3,a=F.yKey),"zKey"in F&&f(4,T=F.zKey),"topic_prev_available"in F&&f(5,k=F.topic_prev_available),"colors"in F&&f(6,B=F.colors),"decimals"in F&&f(7,R=F.decimals),"label"in F&&f(8,N=F.label)},[y,v,_,a,T,k,B,R,N]}class Ga extends ws{constructor(h){super(),Es(this,h,$0,Q0,Ss,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function e1(c){let h,f,y,v;return{c(){h=K("div"),f=ce("Back to top"),this.h()},l(_){h=H(_,"DIV",{class:!0});var a=X(h);f=he(a,"Back to top"),a.forEach(C),this.h()},h(){z(h,"class","back_to_start svelte-11zibd5"),on(h,"hidden",c[0])},m(_,a){ke(_,h,a),P(h,f),y||(v=[kn(window,"scroll",c[2]),kn(h,"click",c[1])],y=!0)},p(_,[a]){a&1&&on(h,"hidden",_[0])},i:Sn,o:Sn,d(_){_&&C(h),y=!1,mu(v)}}}function t1(c,h,f){let{buttonVisibleOnPX:y=200}=h,v=!0;const _=()=>{document.body.scrollIntoView()},a=()=>document.documentElement||document.body,T=()=>{a().scrollTop>y?f(0,v=!1):f(0,v=!0)};return c.$$set=k=>{"buttonVisibleOnPX"in k&&f(3,y=k.buttonVisibleOnPX)},[v,_,T,y]}class r1 extends ws{constructor(h){super(),Es(this,h,t1,e1,Ss,{buttonVisibleOnPX:3})}}function qy(c,h,f){const y=c.slice();return y[46]=h[f],y[48]=f,y}function Zy(c,h,f){const y=c.slice();return y[49]=h[f],y[48]=f,y}function Gy(c,h,f){const y=c.slice();return y[51]=h[f],y}function Ky(c,h,f){const y=c.slice();return y[49]=h[f],y[48]=f,y}function Hy(c){let h,f,y,v,_,a,T=" &gt; ",k,B,R,N,F,le=c[1].name+"",ee,ze,ve,Te,Ne,zt,Dt,ct,$e,wr,cr,Wt,wt,vt,vr,Bt,Er,Je,Qt,Zr,Qr,yr,pt,rt,nr,Bi,Qn,Ti,xi,$r,Xi,Jt,Ai,Ra,kt,Ct,ei,Sr,br,sn=" &#x24D8; ",oi,wi,Or,hr,ar,si,li,ln,ti,Oi=c[1].data.population.value[2021].all.toLocaleString()+"",pa,Ha,Xa,In,On,ui,Fi,un,Wa,mn,Go=" &#x24D8; ",cn,Ei,Gr,Wi,Fn,yn,Vr,O,j,Z=c[1].data.households.value[2021].all_households.toLocaleString()+"",$,ie,de,ge,G,te,we,Ue,qe,Ie,je,it,nt,Me,Ye,Ke,Qe,Lt,Xe,jt,sr,It,Yt,Vt,Dr,Nt,dr,or,Kt=c[1].name+"",tr,ci,gn,fi,di,Ji,Yi,mr,Vi,Qi,Nr,$i=" &#x24D8; ",gr,ri,zi,ks,Ni,Vn,Kr,Ur,mi,ii,Ja,wa,jl=" &#x24D8; ",Ko,Tn,Mn,Ea,Sa,co,$n=(c[1].hectares>=.1?c[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",js,Ho,Eo,Pi,Si,en,xe,Ui,An=" &#x24D8; ",kr,ea,yi,Lr,ka,rs,Xo=(c[1].data.population.value[2021].all/c[1].hectares>=.1?(c[1].data.population.value[2021].all/c[1].hectares).toFixed(1):"<0.1")+"",gu,al,is,Wo,Ia,Nn,fa;function _u(Ve,Tt){return Ve[1].parents[0]?n1:i1}let ns=_u(c),_n=ns(c);function ql(Ve,Tt){return Ve[1].type=="ni"?o1:a1}let ni=ql(c),tn=ni(c),Hr=c[1].type!="ni"&&Wy(c);function Jo(Ve,Tt){return Ve[10]?l1:s1}let Ta=Jo(c),da=Ta(c);wt=new K_({props:{search_data:c[0],group:"typestr",search:!0}}),wt.$on("select",c[16]);function Yo(Ve,Tt){return Ve[1].type=="ni"||Ve[1].type=="ctry"?c1:u1}let Aa=Yo(c),hn=Aa(c),ji=c[10]&&Jy(c),ki=c[1].type!="ni"&&Yy(c),qi=c[10]&&c[4]&&eg(c),Ht=c[1].type!="ni"&c[11]&&tg(c),vn=c[10]&&c[4]&&rg(c);function So(Ve,Tt){return Ve[1].type!="ni"?T1:I1}let kl=So(c),Ya=kl(c);function Is(Ve){c[32](Ve)}let Ts={location:{bounds:c[1].bounds},options:{fitBoundsOptions:{padding:20}},style:Xg,$$slots:{default:[z1]},$$scope:{ctx:c}};c[7]!==void 0&&(Ts.map=c[7]),je=new J_({props:Ts}),Tc.push(()=>Gg(je,"map",Is));function ta(Ve,Tt){return Ve[1].parents[0]?C1:P1}let za=ta(c),Un=za(c);function Zl(Ve,Tt){return Ve[1].children[0]?D1:M1}let ko=Zl(c),pn=ko(c);function as(Ve,Tt){return Ve[1].type!="ni"&Ve[1].type!="lgd"?B1:Ve[1].type!="ni"&Ve[1].type=="lgd"?R1:L1}let As=as(c),Dn=As(c),rn=c[1].type!="ni"&&c[11]&&og(c);const qs=[F1,O1],Qa=[];function jr(Ve,Tt){return Ve[10]?0:1}return Ia=jr(c),Nn=Qa[Ia]=qs[Ia](c),{c(){h=K("div"),f=K("div"),y=K("span"),v=K("a"),_=ce("Home"),a=new nm(!1),k=Le(),_n.c(),B=Le(),R=K("br"),N=Le(),F=K("span"),ee=ce(le),ze=Le(),ve=K("div"),Te=ce(`Click for: 
		
					`),tn.c(),Ne=Le(),Hr&&Hr.c(),zt=Le(),da.c(),Dt=Le(),ct=K("div"),$e=K("div"),wr=K("b"),cr=ce("Search for your area:"),Wt=Le(),Tr(wt.$$.fragment),vt=Le(),vr=K("script"),Bt=ce(`// Share button
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button

						function copyToClipboard(text) {
							var inputc = document.body.appendChild(
								document.createElement("input")
							);
							inputc.value = window.location.href;
							inputc.select();
							document.execCommand("copy");
							inputc.parentNode.removeChild(inputc);
							alert("URL Copied.");
						}

						(function (win, doc) {
							const testButton = doc.createElement("button");
							testButton.setAttribute("type", "share");
							if (testButton.type != "share") {
								win.addEventListener("click", function (ev) {
									ev = ev || win.event;
									let target = ev.target;
									let button = target.closest(
										'button[type="share"]'
									);
									if (button) {
										const title = "Share URL";
										const url = win.location.href;
										if (navigator.share) {
											navigator.share({
												title: title,
												url: url,
											});
										} else {
											copyToClipboard();
										}
									}
								});
							}
						})(this, this.document);`),Er=Le(),Je=K("div"),Qt=K("button"),Zr=ce("Print / PDF"),Qr=Le(),yr=K("button"),pt=ce("Menu"),rt=Le(),nr=K("button"),Bi=ce("Share"),Qn=Le(),Ti=K("div"),xi=K("div"),$r=K("h3"),Xi=ce("Overview"),Jt=Le(),hn.c(),Ai=Le(),ji&&ji.c(),Ra=Le(),kt=K("div"),Ct=K("div"),ei=K("div"),Sr=ce("Population "),br=K("span"),oi=Le(),wi=K("div"),Or=K("div"),hr=ce(`Population is based on the number of usual residents. A
						usual resident is anyone who, on 21 March 2021 is in the
						UK, and staying in the UK for a period of 3 months or
						more; or has a permanent UK address and is outside the
						UK and is staying outside the UK for less than 12
						months. `),ar=K("a"),si=K("strong"),li=ce("Statistical bulletins"),ln=Le(),ti=K("span"),pa=ce(Oi),Ha=K("br"),Xa=Le(),ki&&ki.c(),In=Le(),qi&&qi.c(),On=Le(),ui=K("div"),Fi=K("div"),un=K("div"),Wa=ce("Households"),mn=K("span"),cn=Le(),Ei=K("div"),Gr=K("div"),Wi=ce(`A household is either one person living alone or a group
						of people living at the same address who share cooking
						facilities and share a living room, sitting room or
						dining area. `),Fn=K("a"),yn=K("strong"),Vr=ce("Statistical bulletins"),O=Le(),j=K("span"),$=ce(Z),ie=K("br"),de=Le(),Ht&&Ht.c(),ge=Le(),vn&&vn.c(),G=Le(),te=K("div"),we=K("div"),Ue=K("h3"),Ya.c(),qe=Le(),Ie=K("div"),Tr(je.$$.fragment),nt=Le(),Me=K("div"),Un.c(),Ye=Le(),Ke=K("div"),pn.c(),Lt=Le(),Xe=K("div"),jt=K("div"),sr=K("h2"),It=K("button"),Yt=K("span"),Vt=ce("Area Information"),Dr=Le(),Nt=K("div"),dr=K("div"),or=ce("Census 2021 - "),tr=ce(Kt),ci=ce(" - "),gn=K("span"),fi=ce("Location, Area and Population density"),di=Le(),Ji=K("div"),Yi=K("div"),mr=K("div"),Vi=K("div"),Qi=ce("Location"),Nr=K("span"),gr=Le(),ri=K("div"),zi=K("div"),ks=ce("Information about the area including its geographical hierarchy."),Ni=Le(),Vn=K("br"),Dn.c(),Kr=Le(),Ur=K("div"),mi=K("div"),ii=K("div"),Ja=ce("Area "),wa=K("span"),Ko=Le(),Tn=K("div"),Mn=K("div"),Ea=ce("Area is measured in hectares (ha), it is rounded to the nearest whole number."),Sa=Le(),co=K("span"),js=ce($n),Ho=ce(" ha"),Eo=Le(),Pi=K("div"),Si=K("div"),en=K("div"),xe=ce("Population density"),Ui=K("span"),kr=Le(),ea=K("div"),yi=K("div"),Lr=ce("Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),ka=Le(),rs=K("span"),gu=ce(Xo),al=Le(),rn&&rn.c(),Wo=Le(),Nn.c(),this.h()},l(Ve){h=H(Ve,"DIV",{class:!0});var Tt=X(h);f=H(Tt,"DIV",{});var Ci=X(f);y=H(Ci,"SPAN",{class:!0});var Ln=X(y);v=H(Ln,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var Zs=X(v);_=he(Zs,"Home"),Zs.forEach(C),a=am(Ln,!1),k=Re(Ln),_n.l(Ln),B=Re(Ln),Ln.forEach(C),R=H(Ci,"BR",{}),N=Re(Ci),F=H(Ci,"SPAN",{class:!0});var zs=X(F);ee=he(zs,le),zs.forEach(C),ze=Re(Ci),ve=H(Ci,"DIV",{class:!0,style:!0});var os=X(ve);Te=he(os,`Click for: 
		
					`),tn.l(os),Ne=Re(os),Hr&&Hr.l(os),zt=Re(os),da.l(os),os.forEach(C),Ci.forEach(C),Dt=Re(Tt),ct=H(Tt,"DIV",{});var Ps=X(ct);$e=H(Ps,"DIV",{style:!0,class:!0});var ra=X($e);wr=H(ra,"B",{});var Qo=X(wr);cr=he(Qo,"Search for your area:"),Qo.forEach(C),Wt=Re(ra),Ar(wt.$$.fragment,ra),vt=Re(ra),vr=H(ra,"SCRIPT",{});var Gs=X(vr);Bt=he(Gs,`// Share button
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button

						function copyToClipboard(text) {
							var inputc = document.body.appendChild(
								document.createElement("input")
							);
							inputc.value = window.location.href;
							inputc.select();
							document.execCommand("copy");
							inputc.parentNode.removeChild(inputc);
							alert("URL Copied.");
						}

						(function (win, doc) {
							const testButton = doc.createElement("button");
							testButton.setAttribute("type", "share");
							if (testButton.type != "share") {
								win.addEventListener("click", function (ev) {
									ev = ev || win.event;
									let target = ev.target;
									let button = target.closest(
										'button[type="share"]'
									);
									if (button) {
										const title = "Share URL";
										const url = win.location.href;
										if (navigator.share) {
											navigator.share({
												title: title,
												url: url,
											});
										} else {
											copyToClipboard();
										}
									}
								});
							}
						})(this, this.document);`),Gs.forEach(C),Er=Re(ra),Je=H(ra,"DIV",{width:!0});var ma=X(Je);Qt=H(ma,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var ol=X(Qt);Zr=he(ol,"Print / PDF"),ol.forEach(C),Qr=Re(ma),yr=H(ma,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var Cs=X(yr);pt=he(Cs,"Menu"),Cs.forEach(C),rt=Re(ma),nr=H(ma,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var $a=X(nr);Bi=he($a,"Share"),$a.forEach(C),ma.forEach(C),ra.forEach(C),Ps.forEach(C),Tt.forEach(C),Qn=Re(Ve),Ti=H(Ve,"DIV",{id:!0,class:!0});var eo=X(Ti);xi=H(eo,"DIV",{class:!0,style:!0});var Ms=X(xi);$r=H(Ms,"H3",{style:!0,class:!0});var Io=X($r);Xi=he(Io,"Overview"),Io.forEach(C),Jt=Re(Ms),hn.l(Ms),Ai=Re(Ms),ji&&ji.l(Ms),Ms.forEach(C),Ra=Re(eo),kt=H(eo,"DIV",{class:!0});var gi=X(kt);Ct=H(gi,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var to=X(Ct);ei=H(to,"DIV",{class:!0,style:!0});var Ks=X(ei);Sr=he(Ks,"Population "),br=H(Ks,"SPAN",{style:!0});var Ds=X(br);Ds.forEach(C),Ks.forEach(C),to.forEach(C),oi=Re(gi),wi=H(gi,"DIV",{class:!0,id:!0});var Gl=X(wi);Or=H(Gl,"DIV",{class:!0});var Kl=X(Or);hr=he(Kl,`Population is based on the number of usual residents. A
						usual resident is anyone who, on 21 March 2021 is in the
						UK, and staying in the UK for a period of 3 months or
						more; or has a permanent UK address and is outside the
						UK and is staying outside the UK for less than 12
						months. `),ar=H(Kl,"A",{href:!0,class:!0});var $o=X(ar);si=H($o,"STRONG",{});var ss=X(si);li=he(ss,"Statistical bulletins"),ss.forEach(C),$o.forEach(C),Kl.forEach(C),Gl.forEach(C),ln=Re(gi),ti=H(gi,"SPAN",{class:!0,style:!0});var Hl=X(ti);pa=he(Hl,Oi),Hl.forEach(C),Ha=H(gi,"BR",{}),Xa=Re(gi),ki&&ki.l(gi),In=Re(gi),qi&&qi.l(gi),gi.forEach(C),On=Re(eo),ui=H(eo,"DIV",{class:!0});var ia=X(ui);Fi=H(ia,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ls=X(Fi);un=H(Ls,"DIV",{class:!0,style:!0});var sl=X(un);Wa=he(sl,"Households"),mn=H(sl,"SPAN",{style:!0});var Xl=X(mn);Xl.forEach(C),sl.forEach(C),Ls.forEach(C),cn=Re(ia),Ei=H(ia,"DIV",{class:!0,id:!0});var es=X(Ei);Gr=H(es,"DIV",{class:!0});var Rs=X(Gr);Wi=he(Rs,`A household is either one person living alone or a group
						of people living at the same address who share cooking
						facilities and share a living room, sitting room or
						dining area. `),Fn=H(Rs,"A",{href:!0,class:!0});var To=X(Fn);yn=H(To,"STRONG",{});var jn=X(yn);Vr=he(jn,"Statistical bulletins"),jn.forEach(C),To.forEach(C),Rs.forEach(C),es.forEach(C),O=Re(ia),j=H(ia,"SPAN",{class:!0,style:!0});var Cr=X(j);$=he(Cr,Z),Cr.forEach(C),ie=H(ia,"BR",{}),de=Re(ia),Ht&&Ht.l(ia),ge=Re(ia),vn&&vn.l(ia),ia.forEach(C),eo.forEach(C),G=Re(Ve),te=H(Ve,"DIV",{class:!0});var ho=X(te);we=H(ho,"DIV",{style:!0});var ro=X(we);Ue=H(ro,"H3",{class:!0});var Bs=X(Ue);Ya.l(Bs),Bs.forEach(C),ro.forEach(C),qe=Re(ho),Ie=H(ho,"DIV",{id:!0,style:!0,class:!0});var lr=X(Ie);Ar(je.$$.fragment,lr),lr.forEach(C),nt=Re(ho),Me=H(ho,"DIV",{});var Mr=X(Me);Un.l(Mr),Mr.forEach(C),Ye=Re(ho),Ke=H(ho,"DIV",{});var Rn=X(Ke);pn.l(Rn),Rn.forEach(C),ho.forEach(C),Lt=Re(Ve),Xe=H(Ve,"DIV",{class:!0,id:!0});var ls=X(Xe);jt=H(ls,"DIV",{class:!0});var Ba=X(jt);sr=H(Ba,"H2",{class:!0,id:!0});var us=X(sr);It=H(us,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var vu=X(It);Yt=H(vu,"SPAN",{class:!0});var bu=X(Yt);Vt=he(bu,"Area Information"),bu.forEach(C),vu.forEach(C),us.forEach(C),Dr=Re(Ba),Nt=H(Ba,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var po=X(Nt);dr=H(po,"DIV",{class:!0});var Ao=X(dr);or=he(Ao,"Census 2021 - "),tr=he(Ao,Kt),ci=he(Ao," - "),gn=H(Ao,"SPAN",{class:!0});var zo=X(gn);fi=he(zo,"Location, Area and Population density"),zo.forEach(C),di=Re(Ao),Ji=H(Ao,"DIV",{class:!0});var Fr=X(Ji);Yi=H(Fr,"DIV",{class:!0,style:!0});var ya=X(Yi);mr=H(ya,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var fo=X(mr);Vi=H(fo,"DIV",{class:!0,style:!0});var hi=X(Vi);Qi=he(hi,"Location"),Nr=H(hi,"SPAN",{style:!0});var ht=X(Nr);ht.forEach(C),hi.forEach(C),fo.forEach(C),gr=Re(ya),ri=H(ya,"DIV",{class:!0,id:!0});var ga=X(ri);zi=H(ga,"DIV",{class:!0});var Po=X(zi);ks=he(Po,"Information about the area including its geographical hierarchy."),Po.forEach(C),ga.forEach(C),Ni=Re(ya),Vn=H(ya,"BR",{}),Dn.l(ya),ya.forEach(C),Kr=Re(Fr),Ur=H(Fr,"DIV",{class:!0});var zn=X(Ur);mi=H(zn,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var io=X(mi);ii=H(io,"DIV",{class:!0,style:!0});var Bn=X(ii);Ja=he(Bn,"Area "),wa=H(Bn,"SPAN",{style:!0});var Il=X(wa);Il.forEach(C),Bn.forEach(C),io.forEach(C),Ko=Re(zn),Tn=H(zn,"DIV",{class:!0,id:!0});var et=X(Tn);Mn=H(et,"DIV",{class:!0});var Os=X(Mn);Ea=he(Os,"Area is measured in hectares (ha), it is rounded to the nearest whole number."),Os.forEach(C),et.forEach(C),Sa=Re(zn),co=H(zn,"SPAN",{class:!0,style:!0});var Hs=X(co);js=he(Hs,$n),Ho=he(Hs," ha"),Hs.forEach(C),zn.forEach(C),Eo=Re(Fr),Pi=H(Fr,"DIV",{class:!0});var Co=X(Pi);Si=H(Co,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ii=X(Si);en=H(Ii,"DIV",{class:!0,style:!0});var Zi=X(en);xe=he(Zi,"Population density"),Ui=H(Zi,"SPAN",{style:!0});var Oa=X(Ui);Oa.forEach(C),Zi.forEach(C),Ii.forEach(C),kr=Re(Co),ea=H(Co,"DIV",{class:!0,id:!0});var no=X(ea);yi=H(no,"DIV",{class:!0});var _a=X(yi);Lr=he(_a,"Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),_a.forEach(C),no.forEach(C),ka=Re(Co),rs=H(Co,"SPAN",{class:!0,style:!0});var Pa=X(rs);gu=he(Pa,Xo),Pa.forEach(C),al=Re(Co),rn&&rn.l(Co),Co.forEach(C),Fr.forEach(C),Ao.forEach(C),po.forEach(C),Ba.forEach(C),Wo=Re(ls),Nn.l(ls),ls.forEach(C),this.h()},h(){z(v,"href",Ju+"/"),z(v,"sveltekit:noscroll",""),z(v,"class","svelte-p0yy5r"),a.a=k,z(y,"class","text-small"),z(F,"class","text-big title svelte-p0yy5r"),z(ve,"class","text-bold"),ye(ve,"font-size","0.85em"),z(Qt,"class","btn svelte-p0yy5r"),ye(Qt,"width","33%"),z(Qt,"title","Click to print this page to pdf or printer"),z(Qt,"onclick","window.print();return false;"),z(yr,"class","btn svelte-p0yy5r"),ye(yr,"width","33%"),z(yr,"alt","Return to the landing page"),z(yr,"onclick","window.location.href='"+Ju+"';"),z(nr,"class","btn svelte-p0yy5r"),ye(nr,"width","30%"),z(nr,"type","share"),z(nr,"alt","Share this page"),z(Je,"width","100%"),ye($e,"width","350px"),ye($e,"padding-top","5px"),z($e,"class","svelte-p0yy5r"),on($e,"float-right",c[6]>1),z(h,"class","grid mtl svelte-p0yy5r"),ye($r,"margin","0 0 10px 0"),ye($r,"line-height","1.78"),z($r,"class","svelte-p0yy5r"),z(xi,"class","div-grey-box svelte-p0yy5r"),ye(xi,"line-height","1.3"),ye(br,"color","gray"),ye(br,"font-size","14pt"),z(ei,"class","blocktitle"),ye(ei,"margin","0"),ye(ei,"width","100%"),z(Ct,"class","row"),ye(Ct,"display","flex"),ye(Ct,"cursor","pointer"),z(Ct,"data-bs-toggle","collapse"),z(Ct,"data-bs-target","#pop-info"),z(Ct,"aria-expanded","false"),z(Ct,"aria-controls","pop-info"),z(ar,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ar,"class","svelte-p0yy5r"),z(Or,"class","card card-body svelte-p0yy5r"),z(wi,"class","collapse svelte-p0yy5r"),z(wi,"id","pop-info"),z(ti,"class","text-big"),ye(ti,"font-size","2.8em"),z(kt,"class","div-grey-box svelte-p0yy5r"),ye(mn,"color","gray"),ye(mn,"font-size","14pt"),z(un,"class","blocktitle"),ye(un,"margin","0"),ye(un,"width","100%"),z(Fi,"class","row"),ye(Fi,"display","flex"),ye(Fi,"cursor","pointer"),z(Fi,"data-bs-toggle","collapse"),z(Fi,"data-bs-target","#households-info"),z(Fi,"aria-expanded","false"),z(Fi,"aria-controls","households-info"),z(Fn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Fn,"class","svelte-p0yy5r"),z(Gr,"class","card card-body svelte-p0yy5r"),z(Ei,"class","collapse svelte-p0yy5r"),z(Ei,"id","households-info"),z(j,"class","text-big"),ye(j,"font-size","2.8em"),z(ui,"class","div-grey-box svelte-p0yy5r"),z(Ti,"id","grid"),z(Ti,"class","grid mt svelte-p0yy5r"),z(Ue,"class","svelte-p0yy5r"),ye(we,"grid-column","span "+c[6]),z(Ie,"id","map"),ye(Ie,"padding-right","45px"),ye(Ie,"grid-column","span "+(c[6]==2?2:c[6]&&c[6]>2?c[6]-1:1)),z(Ie,"class","svelte-p0yy5r"),z(te,"class","grid mt svelte-p0yy5r"),Ku(()=>c[33].call(te)),z(Yt,"class","accordion-button-title"),z(It,"class","accordion-button collapsed"),z(It,"type","button"),z(It,"data-bs-toggle","collapse"),z(It,"data-bs-target","#panelsStayOpen-collapseZero"),z(It,"aria-expanded","false"),z(It,"aria-controls","panelsStayOpen-collapseZero"),z(sr,"class","accordion-header svelte-p0yy5r"),z(sr,"id","panelsStayOpen-headingZero"),z(gn,"class","accordion-button-title-sub"),ye(Nr,"color","gray"),ye(Nr,"font-size","14pt"),z(Vi,"class","blocktitle"),ye(Vi,"margin","0"),ye(Vi,"width","100%"),z(mr,"class","row"),ye(mr,"display","flex"),ye(mr,"cursor","pointer"),z(mr,"data-bs-toggle","collapse"),z(mr,"data-bs-target","#location-info"),z(mr,"aria-expanded","false"),z(mr,"aria-controls","location-info"),z(zi,"class","card card-body svelte-p0yy5r"),z(ri,"class","collapse svelte-p0yy5r"),z(ri,"id","location-info"),z(Yi,"class","div-grey-box svelte-p0yy5r"),ye(Yi,"line-height","1.3"),ye(wa,"color","gray"),ye(wa,"font-size","14pt"),z(ii,"class","blocktitle"),ye(ii,"margin","0"),ye(ii,"width","100%"),z(mi,"class","row"),ye(mi,"display","flex"),ye(mi,"cursor","pointer"),z(mi,"data-bs-toggle","collapse"),z(mi,"data-bs-target","#Area-info"),z(mi,"aria-expanded","false"),z(mi,"aria-controls","Area-info"),z(Mn,"class","card card-body svelte-p0yy5r"),z(Tn,"class","collapse svelte-p0yy5r"),z(Tn,"id","Area-info"),z(co,"class","text-big"),ye(co,"font-size","2.8em"),z(Ur,"class","div-grey-box svelte-p0yy5r"),ye(Ui,"color","gray"),ye(Ui,"font-size","14pt"),z(en,"class","blocktitle"),ye(en,"margin","0"),ye(en,"width","100%"),z(Si,"class","row"),ye(Si,"display","flex"),ye(Si,"cursor","pointer"),z(Si,"data-bs-toggle","collapse"),z(Si,"data-bs-target","#popden-info"),z(Si,"aria-expanded","false"),z(Si,"aria-controls","popden-info"),z(yi,"class","card card-body svelte-p0yy5r"),z(ea,"class","collapse svelte-p0yy5r"),z(ea,"id","popden-info"),z(rs,"class","text-big"),ye(rs,"font-size","2.8em"),z(Pi,"class","div-grey-box svelte-p0yy5r"),z(Ji,"class","grid mt svelte-p0yy5r"),Ku(()=>c[34].call(Ji)),z(dr,"class","accordion-body"),z(Nt,"id","panelsStayOpen-collapseZero"),z(Nt,"class","accordion-collapse collapse svelte-p0yy5r"),z(Nt,"aria-labelledby","panelsStayOpen-headingZero"),z(jt,"class","accordion-item"),z(Xe,"class","accordion"),z(Xe,"id","accordionPanelsStayOpenExample")},m(Ve,Tt){ke(Ve,h,Tt),P(h,f),P(f,y),P(y,v),P(v,_),a.m(T,y),P(y,k),_n.m(y,null),P(y,B),P(f,R),P(f,N),P(f,F),P(F,ee),P(f,ze),P(f,ve),P(ve,Te),tn.m(ve,null),P(ve,Ne),Hr&&Hr.m(ve,null),P(ve,zt),da.m(ve,null),P(h,Dt),P(h,ct),P(ct,$e),P($e,wr),P(wr,cr),P($e,Wt),zr(wt,$e,null),P($e,vt),P($e,vr),P(vr,Bt),P($e,Er),P($e,Je),P(Je,Qt),P(Qt,Zr),P(Je,Qr),P(Je,yr),P(yr,pt),P(Je,rt),P(Je,nr),P(nr,Bi),ke(Ve,Qn,Tt),ke(Ve,Ti,Tt),P(Ti,xi),P(xi,$r),P($r,Xi),P(xi,Jt),hn.m(xi,null),P(xi,Ai),ji&&ji.m(xi,null),P(Ti,Ra),P(Ti,kt),P(kt,Ct),P(Ct,ei),P(ei,Sr),P(ei,br),br.innerHTML=sn,P(kt,oi),P(kt,wi),P(wi,Or),P(Or,hr),P(Or,ar),P(ar,si),P(si,li),P(kt,ln),P(kt,ti),P(ti,pa),P(kt,Ha),P(kt,Xa),ki&&ki.m(kt,null),P(kt,In),qi&&qi.m(kt,null),P(Ti,On),P(Ti,ui),P(ui,Fi),P(Fi,un),P(un,Wa),P(un,mn),mn.innerHTML=Go,P(ui,cn),P(ui,Ei),P(Ei,Gr),P(Gr,Wi),P(Gr,Fn),P(Fn,yn),P(yn,Vr),P(ui,O),P(ui,j),P(j,$),P(ui,ie),P(ui,de),Ht&&Ht.m(ui,null),P(ui,ge),vn&&vn.m(ui,null),ke(Ve,G,Tt),ke(Ve,te,Tt),P(te,we),P(we,Ue),Ya.m(Ue,null),P(te,qe),P(te,Ie),zr(je,Ie,null),P(te,nt),P(te,Me),Un.m(Me,null),P(te,Ye),P(te,Ke),pn.m(Ke,null),Qe=Hu(te,c[33].bind(te)),ke(Ve,Lt,Tt),ke(Ve,Xe,Tt),P(Xe,jt),P(jt,sr),P(sr,It),P(It,Yt),P(Yt,Vt),P(jt,Dr),P(jt,Nt),P(Nt,dr),P(dr,or),P(dr,tr),P(dr,ci),P(dr,gn),P(gn,fi),P(dr,di),P(dr,Ji),P(Ji,Yi),P(Yi,mr),P(mr,Vi),P(Vi,Qi),P(Vi,Nr),Nr.innerHTML=$i,P(Yi,gr),P(Yi,ri),P(ri,zi),P(zi,ks),P(Yi,Ni),P(Yi,Vn),Dn.m(Yi,null),P(Ji,Kr),P(Ji,Ur),P(Ur,mi),P(mi,ii),P(ii,Ja),P(ii,wa),wa.innerHTML=jl,P(Ur,Ko),P(Ur,Tn),P(Tn,Mn),P(Mn,Ea),P(Ur,Sa),P(Ur,co),P(co,js),P(co,Ho),P(Ji,Eo),P(Ji,Pi),P(Pi,Si),P(Si,en),P(en,xe),P(en,Ui),Ui.innerHTML=An,P(Pi,kr),P(Pi,ea),P(ea,yi),P(yi,Lr),P(Pi,ka),P(Pi,rs),P(rs,gu),P(Pi,al),rn&&rn.m(Pi,null),is=Hu(Ji,c[34].bind(Ji)),P(Xe,Wo),Qa[Ia].m(Xe,null),fa=!0},p(Ve,Tt){ns===(ns=_u(Ve))&&_n?_n.p(Ve,Tt):(_n.d(1),_n=ns(Ve),_n&&(_n.c(),_n.m(y,B))),(!fa||Tt[0]&2)&&le!==(le=Ve[1].name+"")&&gt(ee,le),ni===(ni=ql(Ve))&&tn?tn.p(Ve,Tt):(tn.d(1),tn=ni(Ve),tn&&(tn.c(),tn.m(ve,Ne))),Ve[1].type!="ni"?Hr?Hr.p(Ve,Tt):(Hr=Wy(Ve),Hr.c(),Hr.m(ve,zt)):Hr&&(Hr.d(1),Hr=null),Ta===(Ta=Jo(Ve))&&da?da.p(Ve,Tt):(da.d(1),da=Ta(Ve),da&&(da.c(),da.m(ve,null)));const Ci={};Tt[0]&1&&(Ci.search_data=Ve[0]),wt.$set(Ci),Tt[0]&64&&on($e,"float-right",Ve[6]>1),Aa===(Aa=Yo(Ve))&&hn?hn.p(Ve,Tt):(hn.d(1),hn=Aa(Ve),hn&&(hn.c(),hn.m(xi,Ai))),Ve[10]?ji?ji.p(Ve,Tt):(ji=Jy(Ve),ji.c(),ji.m(xi,null)):ji&&(ji.d(1),ji=null),(!fa||Tt[0]&2)&&Oi!==(Oi=Ve[1].data.population.value[2021].all.toLocaleString()+"")&&gt(pa,Oi),Ve[1].type!="ni"?ki?(ki.p(Ve,Tt),Tt[0]&2&&mt(ki,1)):(ki=Yy(Ve),ki.c(),mt(ki,1),ki.m(kt,In)):ki&&(El(),xt(ki,1,1,()=>{ki=null}),Sl()),Ve[10]&&Ve[4]?qi?(qi.p(Ve,Tt),Tt[0]&1040&&mt(qi,1)):(qi=eg(Ve),qi.c(),mt(qi,1),qi.m(kt,null)):qi&&(El(),xt(qi,1,1,()=>{qi=null}),Sl()),(!fa||Tt[0]&2)&&Z!==(Z=Ve[1].data.households.value[2021].all_households.toLocaleString()+"")&&gt($,Z),Ve[1].type!="ni"&Ve[11]?Ht?(Ht.p(Ve,Tt),Tt[0]&2050&&mt(Ht,1)):(Ht=tg(Ve),Ht.c(),mt(Ht,1),Ht.m(ui,ge)):Ht&&(El(),xt(Ht,1,1,()=>{Ht=null}),Sl()),Ve[10]&&Ve[4]?vn?(vn.p(Ve,Tt),Tt[0]&1040&&mt(vn,1)):(vn=rg(Ve),vn.c(),mt(vn,1),vn.m(ui,null)):vn&&(El(),xt(vn,1,1,()=>{vn=null}),Sl()),kl===(kl=So(Ve))&&Ya?Ya.p(Ve,Tt):(Ya.d(1),Ya=kl(Ve),Ya&&(Ya.c(),Ya.m(Ue,null))),(!fa||Tt[0]&64)&&ye(we,"grid-column","span "+Ve[6]);const Ln={};Tt[0]&2&&(Ln.location={bounds:Ve[1].bounds}),Tt[0]&768|Tt[1]&16777216&&(Ln.$$scope={dirty:Tt,ctx:Ve}),!it&&Tt[0]&128&&(it=!0,Ln.map=Ve[7],Kg(()=>it=!1)),je.$set(Ln),(!fa||Tt[0]&64)&&ye(Ie,"grid-column","span "+(Ve[6]==2?2:Ve[6]&&Ve[6]>2?Ve[6]-1:1)),za===(za=ta(Ve))&&Un?Un.p(Ve,Tt):(Un.d(1),Un=za(Ve),Un&&(Un.c(),Un.m(Me,null))),ko===(ko=Zl(Ve))&&pn?pn.p(Ve,Tt):(pn.d(1),pn=ko(Ve),pn&&(pn.c(),pn.m(Ke,null))),(!fa||Tt[0]&2)&&Kt!==(Kt=Ve[1].name+"")&&gt(tr,Kt),As===(As=as(Ve))&&Dn?Dn.p(Ve,Tt):(Dn.d(1),Dn=As(Ve),Dn&&(Dn.c(),Dn.m(Yi,null))),(!fa||Tt[0]&2)&&$n!==($n=(Ve[1].hectares>=.1?Ve[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&gt(js,$n),(!fa||Tt[0]&2)&&Xo!==(Xo=(Ve[1].data.population.value[2021].all/Ve[1].hectares>=.1?(Ve[1].data.population.value[2021].all/Ve[1].hectares).toFixed(1):"<0.1")+"")&&gt(gu,Xo),Ve[1].type!="ni"&&Ve[11]?rn?rn.p(Ve,Tt):(rn=og(Ve),rn.c(),rn.m(Pi,null)):rn&&(rn.d(1),rn=null);let Zs=Ia;Ia=jr(Ve),Ia===Zs?Qa[Ia].p(Ve,Tt):(El(),xt(Qa[Zs],1,1,()=>{Qa[Zs]=null}),Sl(),Nn=Qa[Ia],Nn?Nn.p(Ve,Tt):(Nn=Qa[Ia]=qs[Ia](Ve),Nn.c()),mt(Nn,1),Nn.m(Xe,null))},i(Ve){fa||(mt(wt.$$.fragment,Ve),mt(ki),mt(qi),mt(Ht),mt(vn),mt(je.$$.fragment,Ve),mt(Nn),fa=!0)},o(Ve){xt(wt.$$.fragment,Ve),xt(ki),xt(qi),xt(Ht),xt(vn),xt(je.$$.fragment,Ve),xt(Nn),fa=!1},d(Ve){Ve&&C(h),_n.d(),tn.d(),Hr&&Hr.d(),da.d(),Pr(wt),Ve&&C(Qn),Ve&&C(Ti),hn.d(),ji&&ji.d(),ki&&ki.d(),qi&&qi.d(),Ht&&Ht.d(),vn&&vn.d(),Ve&&C(G),Ve&&C(te),Ya.d(),Pr(je),Un.d(),pn.d(),Qe(),Ve&&C(Lt),Ve&&C(Xe),Dn.d(),rn&&rn.d(),is(),Qa[Ia].d()}}}function i1(c){let h=c[1].name+"",f;return{c(){f=ce(h)},l(y){f=he(y,h)},m(y,v){ke(y,f,v)},p(y,v){v[0]&2&&h!==(h=y[1].name+"")&&gt(f,h)},d(y){y&&C(f)}}}function n1(c){let h,f=c[1].name+"",y,v=[...c[1].parents].reverse(),_=[];for(let a=0;a<v.length;a+=1)_[a]=Xy(Ky(c,v,a));return{c(){for(let a=0;a<_.length;a+=1)_[a].c();h=Le(),y=ce(f)},l(a){for(let T=0;T<_.length;T+=1)_[T].l(a);h=Re(a),y=he(a,f)},m(a,T){for(let k=0;k<_.length;k+=1)_[k].m(a,T);ke(a,h,T),ke(a,y,T)},p(a,T){if(T[0]&2){v=[...a[1].parents].reverse();let k;for(k=0;k<v.length;k+=1){const B=Ky(a,v,k);_[k]?_[k].p(B,T):(_[k]=Xy(B),_[k].c(),_[k].m(h.parentNode,h))}for(;k<_.length;k+=1)_[k].d(1);_.length=v.length}T[0]&2&&f!==(f=a[1].name+"")&&gt(y,f)},d(a){yu(_,a),a&&C(h),a&&C(y)}}}function Xy(c){let h,f=c[49].name+"",y,v,_,a=" &gt; ",T;return{c(){h=K("a"),y=ce(f),_=new nm(!1),T=ha(),this.h()},l(k){h=H(k,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var B=X(h);y=he(B,f),B.forEach(C),_=am(k,!1),T=ha(),this.h()},h(){z(h,"href",v=Ju+"/"+c[49].code+"/"),z(h,"sveltekit:noscroll",""),z(h,"class","svelte-p0yy5r"),_.a=T},m(k,B){ke(k,h,B),P(h,y),_.m(a,k,B),ke(k,T,B)},p(k,B){B[0]&2&&f!==(f=k[49].name+"")&&gt(y,f),B[0]&2&&v!==(v=Ju+"/"+k[49].code+"/")&&z(h,"href",v)},d(k){k&&C(h),k&&C(T),k&&_.d()}}}function a1(c){let h,f,y,v;return{c(){h=K("button"),f=ce("No comparison"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var a=X(h);f=he(a,"No comparison"),a.forEach(C),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),on(h,"btn-active",c[5])},m(_,a){ke(_,h,a),P(h,f),y||(v=[kn(h,"click",c[20]),kn(h,"click",c[21]),kn(h,"click",c[22])],y=!0)},p(_,a){a[0]&32&&on(h,"btn-active",_[5])},d(_){_&&C(h),y=!1,mu(v)}}}function o1(c){let h,f,y,v;return{c(){h=K("button"),f=ce("No comparison"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var a=X(h);f=he(a,"No comparison"),a.forEach(C),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),on(h,"btn-active",!c[4])},m(_,a){ke(_,h,a),P(h,f),y||(v=[kn(h,"click",c[17]),kn(h,"click",c[18]),kn(h,"click",c[19])],y=!0)},p(_,a){a[0]&16&&on(h,"btn-active",!_[4])},d(_){_&&C(h),y=!1,mu(v)}}}function Wy(c){let h,f,y,v;return{c(){h=K("button"),f=ce("NI 2021"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var a=X(h);f=he(a,"NI 2021"),a.forEach(C),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),on(h,"btn-active",c[11]&!c[5]&!c[4])},m(_,a){ke(_,h,a),P(h,f),y||(v=[kn(h,"click",c[23]),kn(h,"click",c[24]),kn(h,"click",c[25])],y=!0)},p(_,a){a[0]&2096&&on(h,"btn-active",_[11]&!_[5]&!_[4])},d(_){_&&C(h),y=!1,mu(v)}}}function s1(c){let h,f,y,v;return{c(){h=K("button"),f=ce("2011 data not available"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var a=X(h);f=he(a,"2011 data not available"),a.forEach(C),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),on(h,"btn-active",c[4]&!c[5]&!c[11])},m(_,a){ke(_,h,a),P(h,f),y||(v=[kn(h,"click",c[29]),kn(h,"click",c[30]),kn(h,"click",c[31])],y=!0)},p(_,a){a[0]&2096&&on(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&C(h),y=!1,mu(v)}}}function l1(c){let h,f,y,v;return{c(){h=K("button"),f=ce("Same area 2011"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var a=X(h);f=he(a,"Same area 2011"),a.forEach(C),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),on(h,"btn-active",c[4]&!c[5]&!c[11])},m(_,a){ke(_,h,a),P(h,f),y||(v=[kn(h,"click",c[26]),kn(h,"click",c[27]),kn(h,"click",c[28])],y=!0)},p(_,a){a[0]&2096&&on(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&C(h),y=!1,mu(v)}}}function u1(c){let h,f=c[1].name+"",y,v,_=c[1].data.population.value[2021].all.toLocaleString()+"",a,T,k;function B(F,le){return F[1].data.population.value_rank[2021].all==1?d1:F[1].data.population.value_rank[2021].all==F[1].count?f1:F[1].data.population.value_rank[2021].all<=(F[1].count+1)/2&&F[1].data.population.value_rank[2021].all!=1?p1:h1}let R=B(c),N=R(c);return{c(){h=ce("The population of "),y=ce(f),v=ce(" was "),a=ce(_),T=ce(` at the time of the 2021 Census, which
					made it the
					`),N.c(),k=ha()},l(F){h=he(F,"The population of "),y=he(F,f),v=he(F," was "),a=he(F,_),T=he(F,` at the time of the 2021 Census, which
					made it the
					`),N.l(F),k=ha()},m(F,le){ke(F,h,le),ke(F,y,le),ke(F,v,le),ke(F,a,le),ke(F,T,le),N.m(F,le),ke(F,k,le)},p(F,le){le[0]&2&&f!==(f=F[1].name+"")&&gt(y,f),le[0]&2&&_!==(_=F[1].data.population.value[2021].all.toLocaleString()+"")&&gt(a,_),R===(R=B(F))&&N?N.p(F,le):(N.d(1),N=R(F),N&&(N.c(),N.m(k.parentNode,k)))},d(F){F&&C(h),F&&C(y),F&&C(v),F&&C(a),F&&C(T),N.d(F),F&&C(k)}}}function c1(c){let h,f=c[1].name+"",y,v,_=c[1].data.population.value[2021].all.toLocaleString()+"",a,T;return{c(){h=ce("The population of "),y=ce(f),v=ce(" was "),a=ce(_),T=ce(" at the time of the 2021 Census.")},l(k){h=he(k,"The population of "),y=he(k,f),v=he(k," was "),a=he(k,_),T=he(k," at the time of the 2021 Census.")},m(k,B){ke(k,h,B),ke(k,y,B),ke(k,v,B),ke(k,a,B),ke(k,T,B)},p(k,B){B[0]&2&&f!==(f=k[1].name+"")&&gt(y,f),B[0]&2&&_!==(_=k[1].data.population.value[2021].all.toLocaleString()+"")&&gt(a,_)},d(k){k&&C(h),k&&C(y),k&&C(v),k&&C(a),k&&C(T)}}}function h1(c){let h=(c[1].count+1-c[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=Hc(c[1].count+1-c[1].data.population.value_rank[2021].all)+"",v,_,a=Yn[c[1].type].name+"",T,k;return{c(){f=ce(h),v=ce(y),_=ce(" smallest "),T=ce(a),k=ce(".")},l(B){f=he(B,h),v=he(B,y),_=he(B," smallest "),T=he(B,a),k=he(B,".")},m(B,R){ke(B,f,R),ke(B,v,R),ke(B,_,R),ke(B,T,R),ke(B,k,R)},p(B,R){R[0]&2&&h!==(h=(B[1].count+1-B[1].data.population.value_rank[2021].all).toLocaleString()+"")&&gt(f,h),R[0]&2&&y!==(y=Hc(B[1].count+1-B[1].data.population.value_rank[2021].all)+"")&&gt(v,y),R[0]&2&&a!==(a=Yn[B[1].type].name+"")&&gt(T,a)},d(B){B&&C(f),B&&C(v),B&&C(_),B&&C(T),B&&C(k)}}}function p1(c){let h=c[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=Hc(c[1].data.population.value_rank[2021].all)+"",v,_,a=Yn[c[1].type].name+"",T,k;return{c(){f=ce(h),v=ce(y),_=ce(" largest "),T=ce(a),k=ce(".")},l(B){f=he(B,h),v=he(B,y),_=he(B," largest "),T=he(B,a),k=he(B,".")},m(B,R){ke(B,f,R),ke(B,v,R),ke(B,_,R),ke(B,T,R),ke(B,k,R)},p(B,R){R[0]&2&&h!==(h=B[1].data.population.value_rank[2021].all.toLocaleString()+"")&&gt(f,h),R[0]&2&&y!==(y=Hc(B[1].data.population.value_rank[2021].all)+"")&&gt(v,y),R[0]&2&&a!==(a=Yn[B[1].type].name+"")&&gt(T,a)},d(B){B&&C(f),B&&C(v),B&&C(_),B&&C(T),B&&C(k)}}}function f1(c){let h,f=Yn[c[1].type].name+"",y,v;return{c(){h=ce("smallest "),y=ce(f),v=ce(".")},l(_){h=he(_,"smallest "),y=he(_,f),v=he(_,".")},m(_,a){ke(_,h,a),ke(_,y,a),ke(_,v,a)},p(_,a){a[0]&2&&f!==(f=Yn[_[1].type].name+"")&&gt(y,f)},d(_){_&&C(h),_&&C(y),_&&C(v)}}}function d1(c){let h,f=Yn[c[1].type].name+"",y,v;return{c(){h=ce("largest "),y=ce(f),v=ce(".")},l(_){h=he(_,"largest "),y=he(_,f),v=he(_,".")},m(_,a){ke(_,h,a),ke(_,y,a),ke(_,v,a)},p(_,a){a[0]&2&&f!==(f=Yn[_[1].type].name+"")&&gt(y,f)},d(_){_&&C(h),_&&C(y),_&&C(v)}}}function Jy(c){let h;function f(_,a){return _[1].data.population.value.change.all==0?g1:_[1].data.population.value.change.all>0?y1:m1}let y=f(c),v=y(c);return{c(){v.c(),h=ha()},l(_){v.l(_),h=ha()},m(_,a){v.m(_,a),ke(_,h,a)},p(_,a){y===(y=f(_))&&v?v.p(_,a):(v.d(1),v=y(_),v&&(v.c(),v.m(h.parentNode,h)))},d(_){v.d(_),_&&C(h)}}}function m1(c){let h,f=Xc(c[1].data.population.value.change.all,"%",1)+"",y,v;return{c(){h=ce("A decrease of "),y=ce(f),v=ce(" since the 2011 Census.")},l(_){h=he(_,"A decrease of "),y=he(_,f),v=he(_," since the 2011 Census.")},m(_,a){ke(_,h,a),ke(_,y,a),ke(_,v,a)},p(_,a){a[0]&2&&f!==(f=Xc(_[1].data.population.value.change.all,"%",1)+"")&&gt(y,f)},d(_){_&&C(h),_&&C(y),_&&C(v)}}}function y1(c){let h,f=Xc(c[1].data.population.value.change.all,"%",1)+"",y,v;return{c(){h=ce("An increase of "),y=ce(f),v=ce(" since the 2011 Census.")},l(_){h=he(_,"An increase of "),y=he(_,f),v=he(_," since the 2011 Census.")},m(_,a){ke(_,h,a),ke(_,y,a),ke(_,v,a)},p(_,a){a[0]&2&&f!==(f=Xc(_[1].data.population.value.change.all,"%",1)+"")&&gt(y,f)},d(_){_&&C(h),_&&C(y),_&&C(v)}}}function g1(c){let h;return{c(){h=ce("No change in population since the 2011 Census.")},l(f){h=he(f,"No change in population since the 2011 Census.")},m(f,y){ke(f,h,y)},p:Sn,d(f){f&&C(h)}}}function Yy(c){let h,f,y=c[1].type!="ctry"&c[11]&!c[4]&&Qy(c);return{c(){y&&y.c(),h=ha()},l(v){y&&y.l(v),h=ha()},m(v,_){y&&y.m(v,_),ke(v,h,_),f=!0},p(v,_){v[1].type!="ctry"&v[11]&!v[4]?y?(y.p(v,_),_[0]&2066&&mt(y,1)):(y=Qy(v),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(El(),xt(y,1,1,()=>{y=null}),Sl())},i(v){f||(mt(y),f=!0)},o(v){xt(y),f=!1},d(v){y&&y.d(v),v&&C(h)}}}function Qy(c){let h,f,y,v,_,a;f=new Ed({props:{$$slots:{default:[_1]},$$scope:{ctx:c}}});let T=c[1].type=="lgd"&&$y(c);return{c(){h=K("span"),Tr(f.$$.fragment),y=ce(" of Northern Ireland population"),v=Le(),_=K("div"),T&&T.c(),this.h()},l(k){h=H(k,"SPAN",{class:!0});var B=X(h);Ar(f.$$.fragment,B),y=he(B," of Northern Ireland population"),B.forEach(C),v=Re(k),_=H(k,"DIV",{class:!0});var R=X(_);T&&T.l(R),R.forEach(C),this.h()},h(){z(h,"class","text-small "),z(_,"class","text-small ")},m(k,B){ke(k,h,B),zr(f,h,null),P(h,y),ke(k,v,B),ke(k,_,B),T&&T.m(_,null),a=!0},p(k,B){const R={};B[0]&6|B[1]&16777216&&(R.$$scope={dirty:B,ctx:k}),f.$set(R),k[1].type=="lgd"?T?T.p(k,B):(T=$y(k),T.c(),T.m(_,null)):T&&(T.d(1),T=null)},i(k){a||(mt(f.$$.fragment,k),a=!0)},o(k){xt(f.$$.fragment,k),a=!1},d(k){k&&C(h),Pr(f),k&&C(v),k&&C(_),T&&T.d()}}}function _1(c){let h=(c[1].data.population.value[2021].all/c[2].data.population.value[2021].all>=.001?(c[1].data.population.value[2021].all/c[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ce(h),y=ce("%")},l(v){f=he(v,h),y=he(v,"%")},m(v,_){ke(v,f,_),ke(v,y,_)},p(v,_){_[0]&6&&h!==(h=(v[1].data.population.value[2021].all/v[2].data.population.value[2021].all>=.001?(v[1].data.population.value[2021].all/v[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&gt(f,h)},d(v){v&&C(f),v&&C(y)}}}function $y(c){let h,f=c[1].count.toLocaleString()+"",y,v,_=Yn[c[1].type].pl+"",a;function T(R,N){return R[1].data.population.value_rank[2021].all==1?w1:R[1].data.population.value_rank[2021].all==R[1].count?x1:R[1].data.population.value_rank[2021].all<=(R[1].count+1)/2&&R[1].data.population.value_rank[2021].all!=1?b1:v1}let k=T(c),B=k(c);return{c(){B.c(),h=ce(`
							population of `),y=ce(f),v=Le(),a=ce(_)},l(R){B.l(R),h=he(R,`
							population of `),y=he(R,f),v=Re(R),a=he(R,_)},m(R,N){B.m(R,N),ke(R,h,N),ke(R,y,N),ke(R,v,N),ke(R,a,N)},p(R,N){k===(k=T(R))&&B?B.p(R,N):(B.d(1),B=k(R),B&&(B.c(),B.m(h.parentNode,h))),N[0]&2&&f!==(f=R[1].count.toLocaleString()+"")&&gt(y,f),N[0]&2&&_!==(_=Yn[R[1].type].pl+"")&&gt(a,_)},d(R){B.d(R),R&&C(h),R&&C(y),R&&C(v),R&&C(a)}}}function v1(c){let h=(c[1].count+1-c[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=Hc(c[1].count+1-c[1].data.population.value_rank[2021].all)+"",v,_;return{c(){f=ce(h),v=ce(y),_=ce(" smallest")},l(a){f=he(a,h),v=he(a,y),_=he(a," smallest")},m(a,T){ke(a,f,T),ke(a,v,T),ke(a,_,T)},p(a,T){T[0]&2&&h!==(h=(a[1].count+1-a[1].data.population.value_rank[2021].all).toLocaleString()+"")&&gt(f,h),T[0]&2&&y!==(y=Hc(a[1].count+1-a[1].data.population.value_rank[2021].all)+"")&&gt(v,y)},d(a){a&&C(f),a&&C(v),a&&C(_)}}}function b1(c){let h=c[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=Hc(c[1].data.population.value_rank[2021].all)+"",v,_;return{c(){f=ce(h),v=ce(y),_=ce(" largest")},l(a){f=he(a,h),v=he(a,y),_=he(a," largest")},m(a,T){ke(a,f,T),ke(a,v,T),ke(a,_,T)},p(a,T){T[0]&2&&h!==(h=a[1].data.population.value_rank[2021].all.toLocaleString()+"")&&gt(f,h),T[0]&2&&y!==(y=Hc(a[1].data.population.value_rank[2021].all)+"")&&gt(v,y)},d(a){a&&C(f),a&&C(v),a&&C(_)}}}function x1(c){let h;return{c(){h=ce("The smallest")},l(f){h=he(f,"The smallest")},m(f,y){ke(f,h,y)},p:Sn,d(f){f&&C(h)}}}function w1(c){let h;return{c(){h=ce("The largest")},l(f){h=he(f,"The largest")},m(f,y){ke(f,h,y)},p:Sn,d(f){f&&C(h)}}}function eg(c){let h,f,y,v;return f=new Ed({props:{$$slots:{default:[E1]},$$scope:{ctx:c}}}),{c(){h=K("span"),Tr(f.$$.fragment),y=ce(" since 2011 Census"),this.h()},l(_){h=H(_,"SPAN",{class:!0});var a=X(h);Ar(f.$$.fragment,a),y=he(a," since 2011 Census"),a.forEach(C),this.h()},h(){z(h,"class","text-small ")},m(_,a){ke(_,h,a),zr(f,h,null),P(h,y),v=!0},p(_,a){const T={};a[0]&2|a[1]&16777216&&(T.$$scope={dirty:a,ctx:_}),f.$set(T)},i(_){v||(mt(f.$$.fragment,_),v=!0)},o(_){xt(f.$$.fragment,_),v=!1},d(_){_&&C(h),Pr(f)}}}function E1(c){let h,f=Xc(c[1].data.population.value.change.all,"%",1)+"",y,v;return{c(){h=K("span"),y=ce(f),this.h()},l(_){h=H(_,"SPAN",{class:!0});var a=X(h);y=he(a,f),a.forEach(C),this.h()},h(){z(h,"class",v=hd(fd(c[1].data.population.value.change.all))+" svelte-p0yy5r")},m(_,a){ke(_,h,a),P(h,y)},p(_,a){a[0]&2&&f!==(f=Xc(_[1].data.population.value.change.all,"%",1)+"")&&gt(y,f),a[0]&2&&v!==(v=hd(fd(_[1].data.population.value.change.all))+" svelte-p0yy5r")&&z(h,"class",v)},d(_){_&&C(h)}}}function tg(c){let h,f,y,v;return f=new Ed({props:{$$slots:{default:[S1]},$$scope:{ctx:c}}}),{c(){h=K("span"),Tr(f.$$.fragment),y=ce(" of Northern Ireland households"),this.h()},l(_){h=H(_,"SPAN",{class:!0});var a=X(h);Ar(f.$$.fragment,a),y=he(a," of Northern Ireland households"),a.forEach(C),this.h()},h(){z(h,"class","text-small")},m(_,a){ke(_,h,a),zr(f,h,null),P(h,y),v=!0},p(_,a){const T={};a[0]&6|a[1]&16777216&&(T.$$scope={dirty:a,ctx:_}),f.$set(T)},i(_){v||(mt(f.$$.fragment,_),v=!0)},o(_){xt(f.$$.fragment,_),v=!1},d(_){_&&C(h),Pr(f)}}}function S1(c){let h=(c[1].data.households.value[2021].all_households/c[2].data.households.value[2021].all_households>=.001?(c[1].data.households.value[2021].all_households/c[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ce(h),y=ce("%")},l(v){f=he(v,h),y=he(v,"%")},m(v,_){ke(v,f,_),ke(v,y,_)},p(v,_){_[0]&6&&h!==(h=(v[1].data.households.value[2021].all_households/v[2].data.households.value[2021].all_households>=.001?(v[1].data.households.value[2021].all_households/v[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&gt(f,h)},d(v){v&&C(f),v&&C(y)}}}function rg(c){let h,f,y,v;return f=new Ed({props:{$$slots:{default:[k1]},$$scope:{ctx:c}}}),{c(){h=K("span"),Tr(f.$$.fragment),y=ce(" since 2011 Census"),this.h()},l(_){h=H(_,"SPAN",{class:!0});var a=X(h);Ar(f.$$.fragment,a),y=he(a," since 2011 Census"),a.forEach(C),this.h()},h(){z(h,"class","text-small")},m(_,a){ke(_,h,a),zr(f,h,null),P(h,y),v=!0},p(_,a){const T={};a[0]&2|a[1]&16777216&&(T.$$scope={dirty:a,ctx:_}),f.$set(T)},i(_){v||(mt(f.$$.fragment,_),v=!0)},o(_){xt(f.$$.fragment,_),v=!1},d(_){_&&C(h),Pr(f)}}}function k1(c){let h,f=Xc(c[1].data.households.value.change.all_households,"%",1)+"",y,v;return{c(){h=K("span"),y=ce(f),this.h()},l(_){h=H(_,"SPAN",{class:!0});var a=X(h);y=he(a,f),a.forEach(C),this.h()},h(){z(h,"class",v=hd(fd(c[1].data.households.value.change.all_households))+" svelte-p0yy5r")},m(_,a){ke(_,h,a),P(h,y)},p(_,a){a[0]&2&&f!==(f=Xc(_[1].data.households.value.change.all_households,"%",1)+"")&&gt(y,f),a[0]&2&&v!==(v=hd(fd(_[1].data.households.value.change.all_households))+" svelte-p0yy5r")&&z(h,"class",v)},d(_){_&&C(h)}}}function I1(c){let h,f,y=c[1].name+"",v;return{c(){h=ce("Explore "),f=K("span"),v=ce(y),this.h()},l(_){h=he(_,"Explore "),f=H(_,"SPAN",{style:!0});var a=X(f);v=he(a,y),a.forEach(C),this.h()},h(){ye(f,"color","#93328E")},m(_,a){ke(_,h,a),ke(_,f,a),P(f,v)},p(_,a){a[0]&2&&y!==(y=_[1].name+"")&&gt(v,y)},d(_){_&&C(h),_&&C(f)}}}function T1(c){let h,f,y=c[1].name+"",v,_,a,T,k=Yn[c[1].type].name+"",B;return{c(){h=ce("Explore "),f=K("span"),v=ce(y),_=Le(),a=K("span"),T=ce("- "),B=ce(k),this.h()},l(R){h=he(R,"Explore "),f=H(R,"SPAN",{style:!0});var N=X(f);v=he(N,y),N.forEach(C),_=Re(R),a=H(R,"SPAN",{style:!0});var F=X(a);T=he(F,"- "),B=he(F,k),F.forEach(C),this.h()},h(){ye(f,"color","#93328E"),ye(a,"color","#a19e9e")},m(R,N){ke(R,h,N),ke(R,f,N),P(f,v),ke(R,_,N),ke(R,a,N),P(a,T),P(a,B)},p(R,N){N[0]&2&&y!==(y=R[1].name+"")&&gt(v,y),N[0]&2&&k!==(k=Yn[R[1].type].name+"")&&gt(B,k)},d(R){R&&C(h),R&&C(f),R&&C(_),R&&C(a)}}}function A1(c){let h,f,y,v,_,a,T;const k=[Kc[c[51]],{id:c[51]+"-fill"},{type:"fill"},{isChild:c[9][c[51]]},{click:!0},{selected:c[8].selected},{highlight:!0},{highlighted:c[8].highlighted},{hover:!0},{hovered:c[8].hovered},{layout:{visibility:c[8].type==c[51]||c[8].childType==c[51]?"visible":"none"}},{paint:c[8].type==c[51]?Ka["fill-self"]:c[8].childType==c[51]?Ka["fill-child"]:Ka.fill}];let B={};for(let ee=0;ee<k.length;ee+=1)B=od(B,k[ee]);h=new Hd({props:B}),h.$on("select",c[15]);const R=[Kc[c[51]],{id:c[51]+"-bounds"},{type:"line"},{selected:c[8].selected},{highlight:!0},{highlighted:c[8].highlighted},{layout:{visibility:c[8].type==c[51]||c[8].childType==c[51]?"visible":"none"}},{paint:c[8].type==c[51]?Ka["line-active"]:c[8].childType==c[51]?Ka["line-child"]:Ka.line}];let N={};for(let ee=0;ee<R.length;ee+=1)N=od(N,R[ee]);y=new Hd({props:N});const F=[Kc[c[51]],{id:c[51]+"-self"},{type:"line"},{selected:c[8].selected},{layout:{visibility:c[8].type==c[51]?"visible":"none"}},{paint:c[8].type==c[51]?Ka["line-self"]:Ka.line}];let le={};for(let ee=0;ee<F.length;ee+=1)le=od(le,F[ee]);return _=new Hd({props:le}),{c(){Tr(h.$$.fragment),f=Le(),Tr(y.$$.fragment),v=Le(),Tr(_.$$.fragment),a=Le()},l(ee){Ar(h.$$.fragment,ee),f=Re(ee),Ar(y.$$.fragment,ee),v=Re(ee),Ar(_.$$.fragment,ee),a=Re(ee)},m(ee,ze){zr(h,ee,ze),ke(ee,f,ze),zr(y,ee,ze),ke(ee,v,ze),zr(_,ee,ze),ke(ee,a,ze),T=!0},p(ee,ze){const ve=ze[0]&768?sd(k,[ze&0&&ld(Kc[ee[51]]),k[1],k[2],ze[0]&512&&{isChild:ee[9][ee[51]]},k[4],ze[0]&256&&{selected:ee[8].selected},k[6],ze[0]&256&&{highlighted:ee[8].highlighted},k[8],ze[0]&256&&{hovered:ee[8].hovered},ze[0]&256&&{layout:{visibility:ee[8].type==ee[51]||ee[8].childType==ee[51]?"visible":"none"}},ze[0]&256&&{paint:ee[8].type==ee[51]?Ka["fill-self"]:ee[8].childType==ee[51]?Ka["fill-child"]:Ka.fill}]):{};h.$set(ve);const Te=ze[0]&256?sd(R,[ze&0&&ld(Kc[ee[51]]),R[1],R[2],ze[0]&256&&{selected:ee[8].selected},R[4],ze[0]&256&&{highlighted:ee[8].highlighted},ze[0]&256&&{layout:{visibility:ee[8].type==ee[51]||ee[8].childType==ee[51]?"visible":"none"}},ze[0]&256&&{paint:ee[8].type==ee[51]?Ka["line-active"]:ee[8].childType==ee[51]?Ka["line-child"]:Ka.line}]):{};y.$set(Te);const Ne=ze[0]&256?sd(F,[ze&0&&ld(Kc[ee[51]]),F[1],F[2],ze[0]&256&&{selected:ee[8].selected},ze[0]&256&&{layout:{visibility:ee[8].type==ee[51]?"visible":"none"}},ze[0]&256&&{paint:ee[8].type==ee[51]?Ka["line-self"]:Ka.line}]):{};_.$set(Ne)},i(ee){T||(mt(h.$$.fragment,ee),mt(y.$$.fragment,ee),mt(_.$$.fragment,ee),T=!0)},o(ee){xt(h.$$.fragment,ee),xt(y.$$.fragment,ee),xt(_.$$.fragment,ee),T=!1},d(ee){Pr(h,ee),ee&&C(f),Pr(y,ee),ee&&C(v),Pr(_,ee),ee&&C(a)}}}function ig(c){let h,f;const y=[jm[c[51]]];let v={$$slots:{default:[A1]},$$scope:{ctx:c}};for(let _=0;_<y.length;_+=1)v=od(v,y[_]);return h=new $_({props:v}),{c(){Tr(h.$$.fragment)},l(_){Ar(h.$$.fragment,_)},m(_,a){zr(h,_,a),f=!0},p(_,a){const T=a&0?sd(y,[ld(jm[_[51]])]):{};a[0]&768|a[1]&16777216&&(T.$$scope={dirty:a,ctx:_}),h.$set(T)},i(_){f||(mt(h.$$.fragment,_),f=!0)},o(_){xt(h.$$.fragment,_),f=!1},d(_){Pr(h,_)}}}function z1(c){let h,f,y=["dz","sdz","ward","dea","lgd"],v=[];for(let a=0;a<5;a+=1)v[a]=ig(Gy(c,y,a));const _=a=>xt(v[a],1,1,()=>{v[a]=null});return{c(){for(let a=0;a<5;a+=1)v[a].c();h=ha()},l(a){for(let T=0;T<5;T+=1)v[T].l(a);h=ha()},m(a,T){for(let k=0;k<5;k+=1)v[k].m(a,T);ke(a,h,T),f=!0},p(a,T){if(T[0]&33536){y=["dz","sdz","ward","dea","lgd"];let k;for(k=0;k<5;k+=1){const B=Gy(a,y,k);v[k]?(v[k].p(B,T),mt(v[k],1)):(v[k]=ig(B),v[k].c(),mt(v[k],1),v[k].m(h.parentNode,h))}for(El(),k=5;k<5;k+=1)_(k);Sl()}},i(a){if(!f){for(let T=0;T<5;T+=1)mt(v[T]);f=!0}},o(a){v=v.filter(Boolean);for(let T=0;T<5;T+=1)xt(v[T]);f=!1},d(a){yu(v,a),a&&C(h)}}}function P1(c){return{c:Sn,l:Sn,m:Sn,p:Sn,d:Sn}}function C1(c){let h,f,y=c[1].name+"",v,_,a,T,k,B=[...c[1].parents].reverse(),R=[];for(let N=0;N<B.length;N+=1)R[N]=ng(Zy(c,B,N));return{c(){h=K("span"),f=ce("Parents of "),v=ce(y),_=Le(),a=K("br"),T=Le(),k=K("span");for(let N=0;N<R.length;N+=1)R[N].c();this.h()},l(N){h=H(N,"SPAN",{class:!0});var F=X(h);f=he(F,"Parents of "),v=he(F,y),_=Re(F),F.forEach(C),a=H(N,"BR",{}),T=Re(N),k=H(N,"SPAN",{class:!0});var le=X(k);for(let ee=0;ee<R.length;ee+=1)R[ee].l(le);le.forEach(C),this.h()},h(){z(h,"class","text-bold"),z(k,"class","text-small")},m(N,F){ke(N,h,F),P(h,f),P(h,v),P(h,_),ke(N,a,F),ke(N,T,F),ke(N,k,F);for(let le=0;le<R.length;le+=1)R[le].m(k,null)},p(N,F){if(F[0]&2&&y!==(y=N[1].name+"")&&gt(v,y),F[0]&2){B=[...N[1].parents].reverse();let le;for(le=0;le<B.length;le+=1){const ee=Zy(N,B,le);R[le]?R[le].p(ee,F):(R[le]=ng(ee),R[le].c(),R[le].m(k,null))}for(;le<R.length;le+=1)R[le].d(1);R.length=B.length}},d(N){N&&C(h),N&&C(a),N&&C(T),N&&C(k),yu(R,N)}}}function ng(c){let h,f,y=c[48]>0?"\u21B3 ":"",v,_=c[49].name+"",a,T;return{c(){h=K("span"),f=new nm(!1),v=K("a"),a=ce(_),this.h()},l(k){h=H(k,"SPAN",{style:!0});var B=X(h);f=am(B,!1),v=H(B,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var R=X(v);a=he(R,_),R.forEach(C),B.forEach(C),this.h()},h(){f.a=v,z(v,"href",T=Ju+"/"+c[49].code),z(v,"sveltekit:noscroll",""),z(v,"class","svelte-p0yy5r"),ye(h,"display","block"),ye(h,"margin-left",(c[48]>0?(c[48]-1)*15:0)+"px")},m(k,B){ke(k,h,B),f.m(y,h),P(h,v),P(v,a)},p(k,B){B[0]&2&&_!==(_=k[49].name+"")&&gt(a,_),B[0]&2&&T!==(T=Ju+"/"+k[49].code)&&z(v,"href",T)},d(k){k&&C(h)}}}function M1(c){let h,f,y=c[1].name+"",v,_,a=Yn[c[1].type].name+"",T;return{c(){h=K("span"),f=ce("No areas below "),v=ce(y),_=Le(),T=ce(a),this.h()},l(k){h=H(k,"SPAN",{class:!0});var B=X(h);f=he(B,"No areas below "),v=he(B,y),_=Re(B),T=he(B,a),B.forEach(C),this.h()},h(){z(h,"class","muted")},m(k,B){ke(k,h,B),P(h,f),P(h,v),P(h,_),P(h,T)},p(k,B){B[0]&2&&y!==(y=k[1].name+"")&&gt(v,y),B[0]&2&&a!==(a=Yn[k[1].type].name+"")&&gt(T,a)},d(k){k&&C(h)}}}function D1(c){let h,f=(c[1].children[0]?Yn[c[1].children[0].type].pl:"Areas")+"",y,v,_=c[1].name+"",a,T,k,B,R=c[1].children,N=[];for(let F=0;F<R.length;F+=1)N[F]=ag(qy(c,R,F));return{c(){h=K("span"),y=ce(f),v=ce(" within "),a=ce(_),T=K("br"),k=Le(),B=K("span");for(let F=0;F<N.length;F+=1)N[F].c();this.h()},l(F){h=H(F,"SPAN",{class:!0});var le=X(h);y=he(le,f),v=he(le," within "),a=he(le,_),le.forEach(C),T=H(F,"BR",{}),k=Re(F),B=H(F,"SPAN",{class:!0});var ee=X(B);for(let ze=0;ze<N.length;ze+=1)N[ze].l(ee);ee.forEach(C),this.h()},h(){z(h,"class","text-bold"),z(B,"class","text-small")},m(F,le){ke(F,h,le),P(h,y),P(h,v),P(h,a),ke(F,T,le),ke(F,k,le),ke(F,B,le);for(let ee=0;ee<N.length;ee+=1)N[ee].m(B,null)},p(F,le){if(le[0]&2&&f!==(f=(F[1].children[0]?Yn[F[1].children[0].type].pl:"Areas")+"")&&gt(y,f),le[0]&2&&_!==(_=F[1].name+"")&&gt(a,_),le[0]&2){R=F[1].children;let ee;for(ee=0;ee<R.length;ee+=1){const ze=qy(F,R,ee);N[ee]?N[ee].p(ze,le):(N[ee]=ag(ze),N[ee].c(),N[ee].m(B,null))}for(;ee<N.length;ee+=1)N[ee].d(1);N.length=R.length}},d(F){F&&C(h),F&&C(T),F&&C(k),F&&C(B),yu(N,F)}}}function ag(c){let h,f=c[46].name+"",y,v,_=c[48]<c[1].children.length-1?", ":"",a;return{c(){h=K("a"),y=ce(f),a=ce(_),this.h()},l(T){h=H(T,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var k=X(h);y=he(k,f),k.forEach(C),a=he(T,_),this.h()},h(){z(h,"href",v=Ju+"/"+c[46].code),z(h,"sveltekit:noscroll",""),z(h,"class","svelte-p0yy5r")},m(T,k){ke(T,h,k),P(h,y),ke(T,a,k)},p(T,k){k[0]&2&&f!==(f=T[46].name+"")&&gt(y,f),k[0]&2&&v!==(v=Ju+"/"+T[46].code)&&z(h,"href",v),k[0]&2&&_!==(_=T[48]<T[1].children.length-1?", ":"")&&gt(a,_)},d(T){T&&C(h),T&&C(a)}}}function L1(c){let h=c[1].name+"",f,y;return{c(){f=ce(h),y=ce(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(v){f=he(v,h),y=he(v," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(v,_){ke(v,f,_),ke(v,y,_)},p(v,_){_[0]&2&&h!==(h=v[1].name+"")&&gt(f,h)},d(v){v&&C(f),v&&C(y)}}}function R1(c){let h=c[1].name+"",f,y,v=c[1].count.toLocaleString()+"",_,a,T=Yn[c[1].type].pl+"",k,B,R=c[1].parents[0].name+"",N,F;return{c(){f=ce(h),y=ce(" is one of "),_=ce(v),a=Le(),k=ce(T),B=ce(`.
								 It is located within `),N=ce(R),F=ce(".")},l(le){f=he(le,h),y=he(le," is one of "),_=he(le,v),a=Re(le),k=he(le,T),B=he(le,`.
								 It is located within `),N=he(le,R),F=he(le,".")},m(le,ee){ke(le,f,ee),ke(le,y,ee),ke(le,_,ee),ke(le,a,ee),ke(le,k,ee),ke(le,B,ee),ke(le,N,ee),ke(le,F,ee)},p(le,ee){ee[0]&2&&h!==(h=le[1].name+"")&&gt(f,h),ee[0]&2&&v!==(v=le[1].count.toLocaleString()+"")&&gt(_,v),ee[0]&2&&T!==(T=Yn[le[1].type].pl+"")&&gt(k,T),ee[0]&2&&R!==(R=le[1].parents[0].name+"")&&gt(N,R)},d(le){le&&C(f),le&&C(y),le&&C(_),le&&C(a),le&&C(k),le&&C(B),le&&C(N),le&&C(F)}}}function B1(c){let h=c[1].name+"",f,y,v=c[1].count.toLocaleString()+"",_,a,T=Yn[c[1].type].pl+"",k,B,R=c[1].parents[0].name+"",N,F,le=Yn[c[1].parents[0].type].name+"",ee,ze;return{c(){f=ce(h),y=ce(" is one of "),_=ce(v),a=Le(),k=ce(T),B=ce(`.  
									It is located within `),N=ce(R),F=Le(),ee=ce(le),ze=ce(".")},l(ve){f=he(ve,h),y=he(ve," is one of "),_=he(ve,v),a=Re(ve),k=he(ve,T),B=he(ve,`.  
									It is located within `),N=he(ve,R),F=Re(ve),ee=he(ve,le),ze=he(ve,".")},m(ve,Te){ke(ve,f,Te),ke(ve,y,Te),ke(ve,_,Te),ke(ve,a,Te),ke(ve,k,Te),ke(ve,B,Te),ke(ve,N,Te),ke(ve,F,Te),ke(ve,ee,Te),ke(ve,ze,Te)},p(ve,Te){Te[0]&2&&h!==(h=ve[1].name+"")&&gt(f,h),Te[0]&2&&v!==(v=ve[1].count.toLocaleString()+"")&&gt(_,v),Te[0]&2&&T!==(T=Yn[ve[1].type].pl+"")&&gt(k,T),Te[0]&2&&R!==(R=ve[1].parents[0].name+"")&&gt(N,R),Te[0]&2&&le!==(le=Yn[ve[1].parents[0].type].name+"")&&gt(ee,le)},d(ve){ve&&C(f),ve&&C(y),ve&&C(_),ve&&C(a),ve&&C(k),ve&&C(B),ve&&C(N),ve&&C(F),ve&&C(ee),ve&&C(ze)}}}function og(c){let h,f,y,v=c[1].data.population.value[2021].all/c[1].hectares>c[2].data.population.value[2021].all/c[2].hectares*1.1?"Higher than Northern Ireland value of ":c[1].data.population.value[2021].all/c[1].hectares<c[2].data.population.value[2021].all/c[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",_,a,T=(c[2].data.population.value[2021].all/c[2].hectares).toFixed(1)+"",k,B;return{c(){h=K("br"),f=Le(),y=K("span"),_=ce(v),a=Le(),k=ce(T),B=ce(" persons per hectare"),this.h()},l(R){h=H(R,"BR",{}),f=Re(R),y=H(R,"SPAN",{class:!0});var N=X(y);_=he(N,v),a=Re(N),k=he(N,T),B=he(N," persons per hectare"),N.forEach(C),this.h()},h(){z(y,"class","text-small")},m(R,N){ke(R,h,N),ke(R,f,N),ke(R,y,N),P(y,_),P(y,a),P(y,k),P(y,B)},p(R,N){N[0]&6&&v!==(v=R[1].data.population.value[2021].all/R[1].hectares>R[2].data.population.value[2021].all/R[2].hectares*1.1?"Higher than Northern Ireland value of ":R[1].data.population.value[2021].all/R[1].hectares<R[2].data.population.value[2021].all/R[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&gt(_,v),N[0]&4&&T!==(T=(R[2].data.population.value[2021].all/R[2].hectares).toFixed(1)+"")&&gt(k,T)},d(R){R&&C(h),R&&C(f),R&&C(y)}}}function O1(c){let h,f,y,v,_,a;return{c(){h=K("br"),f=Le(),y=K("div"),v=K("h3"),_=ce("No other topics are available."),a=ce(`
				 Further data will be added to this app as it is released.`),this.h()},l(T){h=H(T,"BR",{}),f=Re(T),y=H(T,"DIV",{class:!0});var k=X(y);v=H(k,"H3",{style:!0,class:!0});var B=X(v);_=he(B,"No other topics are available."),B.forEach(C),a=he(k,`
				 Further data will be added to this app as it is released.`),k.forEach(C),this.h()},h(){ye(v,"margin","0 0 10px 0"),ye(v,"line-height","1.78"),z(v,"class","svelte-p0yy5r"),z(y,"class","div-grey-box svelte-p0yy5r")},m(T,k){ke(T,h,k),ke(T,f,k),ke(T,y,k),P(y,v),P(v,_),P(y,a)},p:Sn,i:Sn,o:Sn,d(T){T&&C(h),T&&C(f),T&&C(y)}}}function F1(c){let h,f,y,v,_,a,T,k,B,R=c[1].name+"",N,F,le,ee,ze,ve,Te,Ne,zt,Dt,ct,$e=" &#x24D8; ",wr,cr,Wt,wt,vt,vr,Bt,Er,Je,Qt,Zr,Qr,yr,pt,rt,nr,Bi,Qn,Ti,xi,$r,Xi,Jt,Ai,Ra,kt,Ct=" &#x24D8; ",ei,Sr,br,sn,oi,wi,Or,hr,ar,si,li,ln,ti,Oi,pa,Ha,Xa,In,On,ui,Fi=c[1].name+"",un,Wa,mn,Go,cn,Ei,Gr,Wi,Fn,yn,Vr=" &#x24D8; ",O,j,Z,$,ie,de,ge,G,te,we,Ue,qe,Ie,je,it,nt=" &#x24D8; ",Me,Ye,Ke,Qe,Lt,Xe,jt,sr,It,Yt,Vt,Dr,Nt,dr,or,Kt=" &#x24D8; ",tr,ci,gn,fi,di,Ji,Yi,mr,Vi,Qi,Nr,$i,gr,ri,zi,ks,Ni,Vn,Kr,Ur,mi=c[1].name+"",ii,Ja,wa,jl,Ko,Tn,Mn,Ea,Sa,co,$n,js=" &#x24D8; ",Ho,Eo,Pi,Si,en,xe,Ui,An,kr,ea,yi,Lr,ka,rs,Xo,gu=" &#x24D8; ",al,is,Wo,Ia,Nn,fa,_u,ns,_n,ql,ni,tn,Hr,Jo,Ta,da=" &#x24D8; ",Yo,Aa,hn,ji,ki,qi,Ht,vn,So,kl,Ya,Is,Ts,ta,za,Un,Zl,ko,pn,as,As=c[1].name+"",Dn,rn,qs,Qa,jr,Ve,Tt,Ci,Ln,Zs,zs,os=" &#x24D8; ",Ps,ra,Qo,Gs,ma,ol,Cs,$a,eo,Ms,Io,gi,to,Ks,Ds,Gl=" &#x24D8; ",Kl,$o,ss,Hl,ia,Ls,sl,Xl,es,Rs,To,jn,Cr,ho,ro,Bs=" &#x24D8; ",lr,Mr,Rn,ls,Ba,us,vu,bu,po,Ao,zo,Fr,ya,fo,hi,ht,ga,Po,zn,io,Bn=c[1].name+"",Il,et,Os,Hs,Co,Ii,Zi,Oa,no,_a,Pa,Eh=" &#x24D8; ",Wl,Yu,ll,Fa,mo,$t,Mo,Do,na,Lo,Xs,aa,Gi,Ro,Et,ft,Ac=" &#x24D8; ",Ca,Va,bn,cs,ul,Tl,Br,qn,cl,hl,hs,oa,xn,Al,ao,zc=" &#x24D8; ",zl,Jl,pl,ps,fl,dl,fs,Ws,xu,yo,Bo,ds,oo,ms,wu,n,s=" &#x24D8; ",o,u,m,w,E,I,D,U,J,Y,Q,se,ae,pe,re,fe,_e,Ee,Pe,Ce,Oe=c[1].name+"",Ze,We,He,ut,St,dt,_t,er,at,Ut,Gt,qt=" &#x24D8; ",Ft,Zt,Mt,Rt,nn,Mi,va,Zn,ai,fn,Pn,Ki,so,Na,Ua,ys=" &#x24D8; ",Yl,gs,Oo,Pl,Fs,Fo,Ql,_s,Hi,Vs,ja,Ma,fr,go,Gn,$l=" &#x24D8; ",Wc,Js,eu,tu,Cl,Ys,Eu,Jc,vs,lo,Qs,Ns,ru,tp,Qu,kd=" &#x24D8; ",Yc,$u,Ml,Sh,bs,iu,rp,ip,Su,np,ap,op,Dl,xs,nu,ku,ec,Kn=" &#x24D8; ",Pc,Iu,Ll,Cc,ml,Mc,kh,tc,Rl,Qc,$s,Vo,au,$c,rc,sp=" &#x24D8; ",eh,_o,ic,lp,nc,th,Ih,Tu,Au,up,Th,cp,Bl;Qt=new F0({props:{data:c[1]&&c[14](["age"]),zKey:c[12]}});let No=!c[5]&&c[13]&&sg(c);return pt=new q0({props:{data:c[1]&&c[14](["age"]),zkey:c[12]}}),xi=new Ga({props:{data:c[1]&&c[14](["sex"]),zKey:c[12],label:c[13]}}),ar=new Ga({props:{data:c[1]&&c[14](["hh_size"]),zKey:c[12],label:c[13]}}),te=new Ga({props:{data:c[1]&&c[14](["cob"]),zKey:c[12],label:c[13]}}),It=new Ga({props:{data:c[1]&&c[14](["passport"]),zKey:c[12],label:c[13]}}),Vi=new Ga({props:{data:c[1]&&c[14](["natid"]),zKey:c[12],label:c[13]}}),kr=new Ga({props:{data:c[1]&&c[14](["mainlang"]),zKey:c[12],label:c[13]}}),_n=new Ga({props:{data:c[1]&&c[14](["irish"]),zKey:c[12],label:c[13]}}),So=new Ga({props:{data:c[1]&&c[14](["ulster"]),zKey:c[12],label:c[13]}}),eo=new Ga({props:{data:c[1]&&c[14](["religion"]),zKey:c[12],label:c[13]}}),es=new Ga({props:{data:c[1]&&c[14](["religion_or_religion_brought_up_in"]),zKey:c[12],label:c[13]}}),po=new Ga({props:{data:c[1]&&c[14](["ethnic"]),zKey:c[12],label:c[13]}}),Lo=new Ga({props:{data:c[1]&&c[14](["general_health"]),zKey:c[12],label:c[13]}}),cl=new Ga({props:{data:c[1]&&c[14](["long_term_disability"]),zKey:c[12],label:c[13]}}),yo=new Ga({props:{data:c[1]&&c[14](["number_of_long_term_health"]),zKey:c[12],label:c[13]}}),J=new Ga({props:{data:c[1]&&c[14](["provision_care"]),zKey:c[12],label:c[13]}}),ai=new Ga({props:{data:c[1]&&c[14](["accommodation_type"]),zKey:c[12],label:c[13]}}),Hi=new Ga({props:{data:c[1]&&c[14](["number_of_adaptations"]),zKey:c[12],label:c[13]}}),vs=new Ga({props:{data:c[1]&&c[14](["central_heating"]),zKey:c[12],label:c[13]}}),Su=new Ga({props:{data:c[1]&&c[14](["renewable_energy"]),zKey:c[12],label:c[13],topic_prev_available:!1}}),Rl=new Ga({props:{data:c[1]&&c[14](["hh_tenure"]),zKey:c[12],label:c[13]}}),Au=new Ga({props:{data:c[1]&&c[14](["car_or_van"]),zKey:c[12],label:c[13]}}),{c(){h=K("div"),f=K("h2"),y=K("button"),v=K("span"),_=ce("Demography"),a=Le(),T=K("div"),k=K("div"),B=ce("Census 2021 - "),N=ce(R),F=ce(" - "),le=K("span"),ee=ce("Broad age bands (years), Sex, Household size"),ze=Le(),ve=K("div"),Te=K("div"),Ne=K("div"),zt=K("div"),Dt=ce("Broad age bands (years) "),ct=K("span"),wr=Le(),cr=K("div"),Wt=K("div"),wt=ce(`A grouping of ages where a person\u2019s age is their age
									at their last birthday on or prior to census day. `),vt=K("a"),vr=K("strong"),Bt=ce("Statistical bulletins"),Er=Le(),Je=K("div"),Tr(Qt.$$.fragment),Zr=Le(),No&&No.c(),Qr=Le(),yr=K("div"),Tr(pt.$$.fragment),rt=Le(),nr=K("div"),Bi=K("div"),Qn=ce("Sex"),Ti=Le(),Tr(xi.$$.fragment),$r=Le(),Xi=K("div"),Jt=K("div"),Ai=K("div"),Ra=ce("Household size"),kt=K("span"),ei=Le(),Sr=K("div"),br=K("div"),sn=ce("The number of usual residents in the household.      "),oi=K("a"),wi=K("strong"),Or=ce("Statistical bulletins"),hr=Le(),Tr(ar.$$.fragment),li=Le(),ln=K("div"),ti=K("h2"),Oi=K("button"),pa=K("span"),Ha=ce("Country of Birth & Nationality"),Xa=Le(),In=K("div"),On=K("div"),ui=ce("Census 2021 - "),un=ce(Fi),Wa=ce(" - "),mn=K("span"),Go=ce(`Country of birth, Passport(s) held, National identity (person based)

					`),cn=K("div"),Ei=K("div"),Gr=K("div"),Wi=K("div"),Fn=ce("Country of birth"),yn=K("span"),O=Le(),j=K("div"),Z=K("div"),$=ce("The country in which a person was born. "),ie=K("a"),de=K("strong"),ge=ce("Statistical bulletins"),G=Le(),Tr(te.$$.fragment),we=Le(),Ue=K("div"),qe=K("div"),Ie=K("div"),je=ce("Passport(s) held"),it=K("span"),Me=Le(),Ye=K("div"),Ke=K("div"),Qe=ce("Passport or passports that an individual holds. "),Lt=K("a"),Xe=K("strong"),jt=ce("Statistical bulletins"),sr=Le(),Tr(It.$$.fragment),Yt=Le(),Vt=K("div"),Dr=K("div"),Nt=K("div"),dr=ce("National identity (person based)"),or=K("span"),tr=Le(),ci=K("div"),gn=K("div"),fi=ce(`The nationality or nationalities that the person
									identifies with. `),di=K("a"),Ji=K("strong"),Yi=ce("Statistical bulletins"),mr=Le(),Tr(Vi.$$.fragment),Nr=Le(),$i=K("div"),gr=K("h2"),ri=K("button"),zi=K("span"),ks=ce("Language"),Ni=Le(),Vn=K("div"),Kr=K("div"),Ur=ce("Census 2021 - "),ii=ce(mi),Ja=ce(" - "),wa=K("span"),jl=ce("Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),Ko=Le(),Tn=K("div"),Mn=K("div"),Ea=K("div"),Sa=K("div"),co=ce("Main language"),$n=K("span"),Ho=Le(),Eo=K("div"),Pi=K("div"),Si=ce(`Person's main language as declared in the Census.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),en=K("a"),xe=K("strong"),Ui=ce("Statistical bulletins"),An=Le(),Tr(kr.$$.fragment),ea=Le(),yi=K("div"),Lr=K("div"),ka=K("div"),rs=ce("Knowledge of Irish"),Xo=K("span"),al=Le(),is=K("div"),Wo=K("div"),Ia=ce(`A person has some ability in Irish if they can
									understand, speak, read or write Irish. Statistics
									for all language questions are restricted to persons
									aged 3 and over. `),Nn=K("a"),fa=K("strong"),_u=ce("Statistical bulletins"),ns=Le(),Tr(_n.$$.fragment),ql=Le(),ni=K("div"),tn=K("div"),Hr=K("div"),Jo=ce("Knowledge of Ulster-Scots"),Ta=K("span"),Yo=Le(),Aa=K("div"),hn=K("div"),ji=ce(`A person has some ability in Ulster-Scots if they
									can understand, speak, read or write Ulster-Scots.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),ki=K("a"),qi=K("strong"),Ht=ce("Statistical bulletins"),vn=Le(),Tr(So.$$.fragment),Ya=Le(),Is=K("div"),Ts=K("h2"),ta=K("button"),za=K("span"),Un=ce("Religion & Ethnicity"),Zl=Le(),ko=K("div"),pn=K("div"),as=ce("Census 2021 - "),Dn=ce(As),rn=ce(" - "),qs=K("span"),Qa=ce("Religion, Religion or religion brought up in, Ethnic group"),jr=Le(),Ve=K("div"),Tt=K("div"),Ci=K("div"),Ln=K("div"),Zs=ce("Religion"),zs=K("span"),Ps=Le(),ra=K("div"),Qo=K("div"),Gs=ce(`Religion, religious denomination or body the person
									indicated they belong to. `),ma=K("a"),ol=K("strong"),Cs=ce("Statistical bulletins"),$a=Le(),Tr(eo.$$.fragment),Ms=Le(),Io=K("div"),gi=K("div"),to=K("div"),Ks=ce("Religion, Religion brought up"),Ds=K("span"),Kl=Le(),$o=K("div"),ss=K("div"),Hl=ce("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),ia=K("a"),Ls=K("strong"),sl=ce("Statistical bulletins"),Xl=Le(),Tr(es.$$.fragment),Rs=Le(),To=K("div"),jn=K("div"),Cr=K("div"),ho=ce("Ethnic group"),ro=K("span"),lr=Le(),Mr=K("div"),Rn=K("div"),ls=ce("Person\u2019s ethnic group as declared in the Census. "),Ba=K("a"),us=K("strong"),vu=ce("Statistical bulletins"),bu=Le(),Tr(po.$$.fragment),zo=Le(),Fr=K("div"),ya=K("h2"),fo=K("button"),hi=K("span"),ht=ce("Health & Care"),ga=Le(),Po=K("div"),zn=K("div"),io=ce("Census 2021 - "),Il=ce(Bn),et=ce(" - "),Os=K("span"),Hs=ce("General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Co=Le(),Ii=K("div"),Zi=K("div"),Oa=K("div"),no=K("div"),_a=ce("General health"),Pa=K("span"),Wl=K("br"),Yu=Le(),ll=K("div"),Fa=K("div"),mo=ce(`General health is a self-assessment of a
											person\u2019s general state of health. It is not
											based over any specified period of time.
											`),$t=K("a"),Mo=K("strong"),Do=ce("Statistical bulletins"),na=Le(),Tr(Lo.$$.fragment),Xs=Le(),aa=K("div"),Gi=K("div"),Ro=K("div"),Et=ce("Long-term health problem or disability"),ft=K("span"),Ca=Le(),Va=K("div"),bn=K("div"),cs=ce("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),ul=K("a"),Tl=K("strong"),Br=ce("Statistical bulletins"),qn=Le(),Tr(cl.$$.fragment),hl=Le(),hs=K("div"),oa=K("div"),xn=K("div"),Al=ce("Long-term health conditions"),ao=K("span"),zl=K("br"),Jl=Le(),pl=K("div"),ps=K("div"),fl=ce(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.
									`),dl=K("a"),fs=K("strong"),Ws=ce("Statistical bulletins"),xu=Le(),Tr(yo.$$.fragment),Bo=Le(),ds=K("div"),oo=K("div"),ms=K("div"),wu=ce("Unpaid care"),n=K("span"),o=Le(),u=K("div"),m=K("div"),w=ce(`'Unpaid care' covers looking after, giving help
											or support to anyone because they have long-term
											physical or mental health conditions or
											illnesses, or problems related to old age. It
											does not include any activities as part of paid
											employment. All unpaid care statistics are restricted 
											to persons aged 5 and over.
											`),E=K("a"),I=K("strong"),D=ce("Statistical bulletins"),U=Le(),Tr(J.$$.fragment),Q=Le(),se=K("div"),ae=K("h2"),pe=K("button"),re=K("span"),fe=ce("Housing & Accommodation"),_e=Le(),Ee=K("div"),Pe=K("div"),Ce=ce("Census 2021 - "),Ze=ce(Oe),We=ce(" - "),He=K("span"),ut=ce("Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),St=Le(),dt=K("div"),_t=K("div"),er=K("div"),at=K("div"),Ut=ce("Accommodation type"),Gt=K("span"),Ft=Le(),Zt=K("div"),Mt=K("div"),Rt=ce("The type of accommodation occupied by a household. "),nn=K("a"),Mi=K("strong"),va=ce("Statistical bulletins"),Zn=Le(),Tr(ai.$$.fragment),fn=Le(),Pn=K("div"),Ki=K("div"),so=K("div"),Na=ce("Household adaptations"),Ua=K("span"),Yl=Le(),gs=K("div"),Oo=K("div"),Pl=ce(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.
									`),Fs=K("a"),Fo=K("strong"),Ql=ce("Statistical bulletins"),_s=Le(),Tr(Hi.$$.fragment),Vs=Le(),ja=K("div"),Ma=K("div"),fr=K("div"),go=ce("Central heating"),Gn=K("span"),Wc=Le(),Js=K("div"),eu=K("div"),tu=ce(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.
									`),Cl=K("a"),Ys=K("strong"),Eu=ce("Statistical bulletins"),Jc=Le(),Tr(vs.$$.fragment),lo=Le(),Qs=K("div"),Ns=K("div"),ru=K("div"),tp=ce("Renewable energy systems"),Qu=K("span"),Yc=Le(),$u=K("div"),Ml=K("div"),Sh=ce(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.
									`),bs=K("a"),iu=K("strong"),rp=ce("Statistical bulletins"),ip=Le(),Tr(Su.$$.fragment),np=Le(),ap=K("br"),op=Le(),Dl=K("div"),xs=K("div"),nu=K("div"),ku=ce("Household tenure"),ec=K("span"),Pc=Le(),Iu=K("div"),Ll=K("div"),Cc=ce(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. 
									`),ml=K("a"),Mc=K("strong"),kh=ce("Statistical bulletins"),tc=Le(),Tr(Rl.$$.fragment),Qc=Le(),$s=K("div"),Vo=K("div"),au=K("div"),$c=ce("Car or van availability"),rc=K("span"),eh=Le(),_o=K("div"),ic=K("div"),lp=ce(`The number of cars or vans that are owned, or
									available for use, by members of a household. It
									includes company cars and vans that are available
									for private use.
									`),nc=K("a"),th=K("strong"),Ih=ce("Statistical bulletins"),Tu=Le(),Tr(Au.$$.fragment),up=Le(),Th=K("br"),this.h()},l(Be){h=H(Be,"DIV",{class:!0});var ot=X(h);f=H(ot,"H2",{class:!0,id:!0});var zu=X(f);y=H(zu,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ol=X(y);v=H(Ol,"SPAN",{class:!0});var vo=X(v);_=he(vo,"Demography"),vo.forEach(C),Ol.forEach(C),zu.forEach(C),a=Re(ot),T=H(ot,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var ac=X(T);k=H(ac,"DIV",{class:!0});var el=X(k);B=he(el,"Census 2021 - "),N=he(el,R),F=he(el," - "),le=H(el,"SPAN",{class:!0});var oc=X(le);ee=he(oc,"Broad age bands (years), Sex, Household size"),oc.forEach(C),ze=Re(el),ve=H(el,"DIV",{class:!0});var ts=X(ve);Te=H(ts,"DIV",{class:!0});var Uo=X(Te);Ne=H(Uo,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var sc=X(Ne);zt=H(sc,"DIV",{class:!0,style:!0});var Pu=X(zt);Dt=he(Pu,"Broad age bands (years) "),ct=H(Pu,"SPAN",{style:!0});var Dc=X(ct);Dc.forEach(C),Pu.forEach(C),sc.forEach(C),wr=Re(Uo),cr=H(Uo,"DIV",{class:!0,id:!0});var lc=X(cr);Wt=H(lc,"DIV",{class:!0});var ou=X(Wt);wt=he(ou,`A grouping of ages where a person\u2019s age is their age
									at their last birthday on or prior to census day. `),vt=H(ou,"A",{href:!0,class:!0});var Hn=X(vt);vr=H(Hn,"STRONG",{});var uc=X(vr);Bt=he(uc,"Statistical bulletins"),uc.forEach(C),Hn.forEach(C),ou.forEach(C),lc.forEach(C),Er=Re(Uo),Je=H(Uo,"DIV",{class:!0,style:!0});var Cu=X(Je);Ar(Qt.$$.fragment,Cu),Cu.forEach(C),Zr=Re(Uo),No&&No.l(Uo),Qr=Re(Uo),yr=H(Uo,"DIV",{});var Mu=X(yr);Ar(pt.$$.fragment,Mu),Mu.forEach(C),Uo.forEach(C),rt=Re(ts),nr=H(ts,"DIV",{class:!0});var su=X(nr);Bi=H(su,"DIV",{class:!0,style:!0});var Du=X(Bi);Qn=he(Du,"Sex"),Du.forEach(C),Ti=Re(su),Ar(xi.$$.fragment,su),su.forEach(C),$r=Re(ts),Xi=H(ts,"DIV",{class:!0});var yl=X(Xi);Jt=H(yl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var cc=X(Jt);Ai=H(cc,"DIV",{class:!0,style:!0});var Lu=X(Ai);Ra=he(Lu,"Household size"),kt=H(Lu,"SPAN",{style:!0});var hc=X(kt);hc.forEach(C),Lu.forEach(C),cc.forEach(C),ei=Re(yl),Sr=H(yl,"DIV",{class:!0,id:!0});var gf=X(Sr);br=H(gf,"DIV",{class:!0});var hp=X(br);sn=he(hp,"The number of usual residents in the household.      "),oi=H(hp,"A",{href:!0,class:!0});var Lc=X(oi);wi=H(Lc,"STRONG",{});var pp=X(wi);Or=he(pp,"Statistical bulletins"),pp.forEach(C),Lc.forEach(C),hp.forEach(C),gf.forEach(C),hr=Re(yl),Ar(ar.$$.fragment,yl),yl.forEach(C),ts.forEach(C),el.forEach(C),ac.forEach(C),li=Re(ot),ln=H(ot,"DIV",{class:!0});var rh=X(ln);ti=H(rh,"H2",{class:!0,id:!0});var ih=X(ti);Oi=H(ih,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _i=X(Oi);pa=H(_i,"SPAN",{class:!0});var fp=X(pa);Ha=he(fp,"Country of Birth & Nationality"),fp.forEach(C),_i.forEach(C),ih.forEach(C),Xa=Re(rh),In=H(rh,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Fl=X(In);On=H(Fl,"DIV",{class:!0});var Vl=X(On);ui=he(Vl,"Census 2021 - "),un=he(Vl,Fi),Wa=he(Vl," - "),mn=H(Vl,"SPAN",{class:!0});var Ah=X(mn);Go=he(Ah,`Country of birth, Passport(s) held, National identity (person based)

					`),cn=H(Ah,"DIV",{class:!0});var Rc=X(cn);Ei=H(Rc,"DIV",{class:!0});var Bc=X(Ei);Gr=H(Bc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _f=X(Gr);Wi=H(_f,"DIV",{class:!0,style:!0});var dp=X(Wi);Fn=he(dp,"Country of birth"),yn=H(dp,"SPAN",{style:!0});var Id=X(yn);Id.forEach(C),dp.forEach(C),_f.forEach(C),O=Re(Bc),j=H(Bc,"DIV",{class:!0,id:!0});var vf=X(j);Z=H(vf,"DIV",{class:!0});var mp=X(Z);$=he(mp,"The country in which a person was born. "),ie=H(mp,"A",{href:!0,class:!0});var bf=X(ie);de=H(bf,"STRONG",{});var xf=X(de);ge=he(xf,"Statistical bulletins"),xf.forEach(C),bf.forEach(C),mp.forEach(C),vf.forEach(C),G=Re(Bc),Ar(te.$$.fragment,Bc),Bc.forEach(C),we=Re(Rc),Ue=H(Rc,"DIV",{class:!0});var lu=X(Ue);qe=H(lu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var pc=X(qe);Ie=H(pc,"DIV",{class:!0,style:!0});var zh=X(Ie);je=he(zh,"Passport(s) held"),it=H(zh,"SPAN",{style:!0});var Td=X(it);Td.forEach(C),zh.forEach(C),pc.forEach(C),Me=Re(lu),Ye=H(lu,"DIV",{class:!0,id:!0});var wf=X(Ye);Ke=H(wf,"DIV",{class:!0});var yp=X(Ke);Qe=he(yp,"Passport or passports that an individual holds. "),Lt=H(yp,"A",{href:!0,class:!0});var gp=X(Lt);Xe=H(gp,"STRONG",{});var nh=X(Xe);jt=he(nh,"Statistical bulletins"),nh.forEach(C),gp.forEach(C),yp.forEach(C),wf.forEach(C),sr=Re(lu),Ar(It.$$.fragment,lu),lu.forEach(C),Yt=Re(Rc),Vt=H(Rc,"DIV",{class:!0});var Nl=X(Vt);Dr=H(Nl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Oc=X(Dr);Nt=H(Oc,"DIV",{class:!0,style:!0});var jo=X(Nt);dr=he(jo,"National identity (person based)"),or=H(jo,"SPAN",{style:!0});var Fc=X(or);Fc.forEach(C),jo.forEach(C),Oc.forEach(C),tr=Re(Nl),ci=H(Nl,"DIV",{class:!0,id:!0});var qa=X(ci);gn=H(qa,"DIV",{class:!0});var Vc=X(gn);fi=he(Vc,`The nationality or nationalities that the person
									identifies with. `),di=H(Vc,"A",{href:!0,class:!0});var ah=X(di);Ji=H(ah,"STRONG",{});var qo=X(Ji);Yi=he(qo,"Statistical bulletins"),qo.forEach(C),ah.forEach(C),Vc.forEach(C),qa.forEach(C),mr=Re(Nl),Ar(Vi.$$.fragment,Nl),Nl.forEach(C),Rc.forEach(C),Ah.forEach(C),Vl.forEach(C),Fl.forEach(C),rh.forEach(C),Nr=Re(ot),$i=H(ot,"DIV",{class:!0});var oh=X($i);gr=H(oh,"H2",{class:!0,id:!0});var _p=X(gr);ri=H(_p,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ef=X(ri);zi=H(Ef,"SPAN",{class:!0});var vp=X(zi);ks=he(vp,"Language"),vp.forEach(C),Ef.forEach(C),_p.forEach(C),Ni=Re(oh),Vn=H(oh,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Ph=X(Vn);Kr=H(Ph,"DIV",{class:!0});var uu=X(Kr);Ur=he(uu,"Census 2021 - "),ii=he(uu,mi),Ja=he(uu," - "),wa=H(uu,"SPAN",{class:!0});var Sf=X(wa);jl=he(Sf,"Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),Sf.forEach(C),Ko=Re(uu),Tn=H(uu,"DIV",{class:!0});var fc=X(Tn);Mn=H(fc,"DIV",{class:!0});var gl=X(Mn);Ea=H(gl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ch=X(Ea);Sa=H(Ch,"DIV",{class:!0,style:!0});var Mh=X(Sa);co=he(Mh,"Main language"),$n=H(Mh,"SPAN",{style:!0});var kf=X($n);kf.forEach(C),Mh.forEach(C),Ch.forEach(C),Ho=Re(gl),Eo=H(gl,"DIV",{class:!0,id:!0});var If=X(Eo);Pi=H(If,"DIV",{class:!0});var Dh=X(Pi);Si=he(Dh,`Person's main language as declared in the Census.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),en=H(Dh,"A",{href:!0,class:!0});var bp=X(en);xe=H(bp,"STRONG",{});var xp=X(xe);Ui=he(xp,"Statistical bulletins"),xp.forEach(C),bp.forEach(C),Dh.forEach(C),If.forEach(C),An=Re(gl),Ar(kr.$$.fragment,gl),gl.forEach(C),ea=Re(fc),yi=H(fc,"DIV",{class:!0});var dc=X(yi);Lr=H(dc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Tf=X(Lr);ka=H(Tf,"DIV",{class:!0,style:!0});var wp=X(ka);rs=he(wp,"Knowledge of Irish"),Xo=H(wp,"SPAN",{style:!0});var Af=X(Xo);Af.forEach(C),wp.forEach(C),Tf.forEach(C),al=Re(dc),is=H(dc,"DIV",{class:!0,id:!0});var Ep=X(is);Wo=H(Ep,"DIV",{class:!0});var Nc=X(Wo);Ia=he(Nc,`A person has some ability in Irish if they can
									understand, speak, read or write Irish. Statistics
									for all language questions are restricted to persons
									aged 3 and over. `),Nn=H(Nc,"A",{href:!0,class:!0});var Sp=X(Nn);fa=H(Sp,"STRONG",{});var sh=X(fa);_u=he(sh,"Statistical bulletins"),sh.forEach(C),Sp.forEach(C),Nc.forEach(C),Ep.forEach(C),ns=Re(dc),Ar(_n.$$.fragment,dc),dc.forEach(C),ql=Re(fc),ni=H(fc,"DIV",{class:!0});var cu=X(ni);tn=H(cu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var lh=X(tn);Hr=H(lh,"DIV",{class:!0,style:!0});var Ru=X(Hr);Jo=he(Ru,"Knowledge of Ulster-Scots"),Ta=H(Ru,"SPAN",{style:!0});var Ad=X(Ta);Ad.forEach(C),Ru.forEach(C),lh.forEach(C),Yo=Re(cu),Aa=H(cu,"DIV",{class:!0,id:!0});var zf=X(Aa);hn=H(zf,"DIV",{class:!0});var kp=X(hn);ji=he(kp,`A person has some ability in Ulster-Scots if they
									can understand, speak, read or write Ulster-Scots.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),ki=H(kp,"A",{href:!0,class:!0});var mc=X(ki);qi=H(mc,"STRONG",{});var Lh=X(qi);Ht=he(Lh,"Statistical bulletins"),Lh.forEach(C),mc.forEach(C),kp.forEach(C),zf.forEach(C),vn=Re(cu),Ar(So.$$.fragment,cu),cu.forEach(C),fc.forEach(C),uu.forEach(C),Ph.forEach(C),oh.forEach(C),Ya=Re(ot),Is=H(ot,"DIV",{class:!0});var uh=X(Is);Ts=H(uh,"H2",{class:!0,id:!0});var Rh=X(Ts);ta=H(Rh,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ip=X(ta);za=H(Ip,"SPAN",{class:!0});var Tp=X(za);Un=he(Tp,"Religion & Ethnicity"),Tp.forEach(C),Ip.forEach(C),Rh.forEach(C),Zl=Re(uh),ko=H(uh,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Pf=X(ko);pn=H(Pf,"DIV",{class:!0});var yc=X(pn);as=he(yc,"Census 2021 - "),Dn=he(yc,As),rn=he(yc," - "),qs=H(yc,"SPAN",{class:!0});var Cf=X(qs);Qa=he(Cf,"Religion, Religion or religion brought up in, Ethnic group"),Cf.forEach(C),jr=Re(yc),Ve=H(yc,"DIV",{class:!0});var hu=X(Ve);Tt=H(hu,"DIV",{class:!0});var Bu=X(Tt);Ci=H(Bu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Mf=X(Ci);Ln=H(Mf,"DIV",{class:!0,style:!0});var Ou=X(Ln);Zs=he(Ou,"Religion"),zs=H(Ou,"SPAN",{style:!0});var ch=X(zs);ch.forEach(C),Ou.forEach(C),Mf.forEach(C),Ps=Re(Bu),ra=H(Bu,"DIV",{class:!0,id:!0});var Xr=X(ra);Qo=H(Xr,"DIV",{class:!0});var Ap=X(Qo);Gs=he(Ap,`Religion, religious denomination or body the person
									indicated they belong to. `),ma=H(Ap,"A",{href:!0,class:!0});var Bh=X(ma);ol=H(Bh,"STRONG",{});var gc=X(ol);Cs=he(gc,"Statistical bulletins"),gc.forEach(C),Bh.forEach(C),Ap.forEach(C),Xr.forEach(C),$a=Re(Bu),Ar(eo.$$.fragment,Bu),Bu.forEach(C),Ms=Re(hu),Io=H(hu,"DIV",{class:!0});var Uc=X(Io);gi=H(Uc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Df=X(gi);to=H(Df,"DIV",{class:!0,style:!0});var zp=X(to);Ks=he(zp,"Religion, Religion brought up"),Ds=H(zp,"SPAN",{style:!0});var zd=X(Ds);zd.forEach(C),zp.forEach(C),Df.forEach(C),Kl=Re(Uc),$o=H(Uc,"DIV",{class:!0,id:!0});var Lf=X($o);ss=H(Lf,"DIV",{class:!0});var Pp=X(ss);Hl=he(Pp,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),ia=H(Pp,"A",{href:!0,class:!0});var Rf=X(ia);Ls=H(Rf,"STRONG",{});var Cp=X(Ls);sl=he(Cp,"Statistical bulletins"),Cp.forEach(C),Rf.forEach(C),Pp.forEach(C),Lf.forEach(C),Xl=Re(Uc),Ar(es.$$.fragment,Uc),Uc.forEach(C),Rs=Re(hu),To=H(hu,"DIV",{class:!0});var _c=X(To);jn=H(_c,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Mp=X(jn);Cr=H(Mp,"DIV",{class:!0,style:!0});var Oh=X(Cr);ho=he(Oh,"Ethnic group"),ro=H(Oh,"SPAN",{style:!0});var Fh=X(ro);Fh.forEach(C),Oh.forEach(C),Mp.forEach(C),lr=Re(_c),Mr=H(_c,"DIV",{class:!0,id:!0});var Fu=X(Mr);Rn=H(Fu,"DIV",{class:!0});var hh=X(Rn);ls=he(hh,"Person\u2019s ethnic group as declared in the Census. "),Ba=H(hh,"A",{href:!0,class:!0});var vc=X(Ba);us=H(vc,"STRONG",{});var Dp=X(us);vu=he(Dp,"Statistical bulletins"),Dp.forEach(C),vc.forEach(C),hh.forEach(C),Fu.forEach(C),bu=Re(_c),Ar(po.$$.fragment,_c),_c.forEach(C),hu.forEach(C),yc.forEach(C),Pf.forEach(C),uh.forEach(C),zo=Re(ot),Fr=H(ot,"DIV",{class:!0});var wn=X(Fr);ya=H(wn,"H2",{class:!0,id:!0});var Di=X(ya);fo=H(Di,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Lp=X(fo);hi=H(Lp,"SPAN",{class:!0});var Rp=X(hi);ht=he(Rp,"Health & Care"),Rp.forEach(C),Lp.forEach(C),Di.forEach(C),ga=Re(wn),Po=H(wn,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Bp=X(Po);zn=H(Bp,"DIV",{class:!0});var Vu=X(zn);io=he(Vu,"Census 2021 - "),Il=he(Vu,Bn),et=he(Vu," - "),Os=H(Vu,"SPAN",{class:!0});var Op=X(Os);Hs=he(Op,"General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Op.forEach(C),Co=Re(Vu),Ii=H(Vu,"DIV",{class:!0});var Ul=X(Ii);Zi=H(Ul,"DIV",{class:!0});var tl=X(Zi);Oa=H(tl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Nu=X(Oa);no=H(Nu,"DIV",{class:!0,style:!0});var ph=X(no);_a=he(ph,"General health"),Pa=H(ph,"SPAN",{style:!0});var Xn=X(Pa);Xn.forEach(C),Wl=H(ph,"BR",{}),ph.forEach(C),Nu.forEach(C),Yu=Re(tl),ll=H(tl,"DIV",{class:!0,id:!0});var jc=X(ll);Fa=H(jc,"DIV",{class:!0});var _l=X(Fa);mo=he(_l,`General health is a self-assessment of a
											person\u2019s general state of health. It is not
											based over any specified period of time.
											`),$t=H(_l,"A",{href:!0,class:!0});var fh=X($t);Mo=H(fh,"STRONG",{});var dh=X(Mo);Do=he(dh,"Statistical bulletins"),dh.forEach(C),fh.forEach(C),_l.forEach(C),jc.forEach(C),na=Re(tl),Ar(Lo.$$.fragment,tl),tl.forEach(C),Xs=Re(Ul),aa=H(Ul,"DIV",{class:!0});var Uu=X(aa);Gi=H(Uu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var bc=X(Gi);Ro=H(bc,"DIV",{class:!0,style:!0});var vl=X(Ro);Et=he(vl,"Long-term health problem or disability"),ft=H(vl,"SPAN",{style:!0});var Bf=X(ft);Bf.forEach(C),vl.forEach(C),bc.forEach(C),Ca=Re(Uu),Va=H(Uu,"DIV",{class:!0,id:!0});var Fp=X(Va);bn=H(Fp,"DIV",{class:!0});var Vp=X(bn);cs=he(Vp,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),ul=H(Vp,"A",{href:!0,class:!0});var sa=X(ul);Tl=H(sa,"STRONG",{});var pu=X(Tl);Br=he(pu,"Statistical bulletins"),pu.forEach(C),sa.forEach(C),Vp.forEach(C),Fp.forEach(C),qn=Re(Uu),Ar(cl.$$.fragment,Uu),Uu.forEach(C),hl=Re(Ul),hs=H(Ul,"DIV",{class:!0});var xc=X(hs);oa=H(xc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var e=X(oa);xn=H(e,"DIV",{class:!0,style:!0});var t=X(xn);Al=he(t,"Long-term health conditions"),ao=H(t,"SPAN",{style:!0});var i=X(ao);i.forEach(C),zl=H(t,"BR",{}),t.forEach(C),e.forEach(C),Jl=Re(xc),pl=H(xc,"DIV",{class:!0,id:!0});var l=X(pl);ps=H(l,"DIV",{class:!0});var p=X(ps);fl=he(p,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.
									`),dl=H(p,"A",{href:!0,class:!0});var d=X(dl);fs=H(d,"STRONG",{});var x=X(fs);Ws=he(x,"Statistical bulletins"),x.forEach(C),d.forEach(C),p.forEach(C),l.forEach(C),xu=Re(xc),Ar(yo.$$.fragment,xc),xc.forEach(C),Bo=Re(Ul),ds=H(Ul,"DIV",{class:!0});var S=X(ds);oo=H(S,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var A=X(oo);ms=H(A,"DIV",{class:!0,style:!0});var M=X(ms);wu=he(M,"Unpaid care"),n=H(M,"SPAN",{style:!0});var L=X(n);L.forEach(C),M.forEach(C),A.forEach(C),o=Re(S),u=H(S,"DIV",{class:!0,id:!0});var V=X(u);m=H(V,"DIV",{class:!0});var q=X(m);w=he(q,`'Unpaid care' covers looking after, giving help
											or support to anyone because they have long-term
											physical or mental health conditions or
											illnesses, or problems related to old age. It
											does not include any activities as part of paid
											employment. All unpaid care statistics are restricted 
											to persons aged 5 and over.
											`),E=H(q,"A",{href:!0,class:!0});var W=X(E);I=H(W,"STRONG",{});var ne=X(I);D=he(ne,"Statistical bulletins"),ne.forEach(C),W.forEach(C),q.forEach(C),V.forEach(C),U=Re(S),Ar(J.$$.fragment,S),S.forEach(C),Ul.forEach(C),Vu.forEach(C),Bp.forEach(C),wn.forEach(C),Q=Re(ot),se=H(ot,"DIV",{class:!0});var oe=X(se);ae=H(oe,"H2",{class:!0,id:!0});var me=X(ae);pe=H(me,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ue=X(pe);re=H(ue,"SPAN",{class:!0});var be=X(re);fe=he(be,"Housing & Accommodation"),be.forEach(C),ue.forEach(C),me.forEach(C),_e=Re(oe),Ee=H(oe,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Se=X(Ee);Pe=H(Se,"DIV",{class:!0});var Ae=X(Pe);Ce=he(Ae,"Census 2021 - "),Ze=he(Ae,Oe),We=he(Ae," - "),He=H(Ae,"SPAN",{class:!0});var De=X(He);ut=he(De,"Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),De.forEach(C),St=Re(Ae),dt=H(Ae,"DIV",{class:!0});var Fe=X(dt);_t=H(Fe,"DIV",{class:!0});var Ge=X(_t);er=H(Ge,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var tt=X(er);at=H(tt,"DIV",{class:!0,style:!0});var bt=X(at);Ut=he(bt,"Accommodation type"),Gt=H(bt,"SPAN",{style:!0});var lt=X(Gt);lt.forEach(C),bt.forEach(C),tt.forEach(C),Ft=Re(Ge),Zt=H(Ge,"DIV",{class:!0,id:!0});var At=X(Zt);Mt=H(At,"DIV",{class:!0});var st=X(Mt);Rt=he(st,"The type of accommodation occupied by a household. "),nn=H(st,"A",{href:!0,class:!0});var rr=X(nn);Mi=H(rr,"STRONG",{});var Ot=X(Mi);va=he(Ot,"Statistical bulletins"),Ot.forEach(C),rr.forEach(C),st.forEach(C),At.forEach(C),Zn=Re(Ge),Ar(ai.$$.fragment,Ge),Ge.forEach(C),fn=Re(Fe),Pn=H(Fe,"DIV",{class:!0});var yt=X(Pn);Ki=H(yt,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ur=X(Ki);so=H(ur,"DIV",{class:!0,style:!0});var Xt=X(so);Na=he(Xt,"Household adaptations"),Ua=H(Xt,"SPAN",{style:!0});var xr=X(Ua);xr.forEach(C),Xt.forEach(C),ur.forEach(C),Yl=Re(yt),gs=H(yt,"DIV",{class:!0,id:!0});var Pt=X(gs);Oo=H(Pt,"DIV",{class:!0});var Ir=X(Oo);Pl=he(Ir,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.
									`),Fs=H(Ir,"A",{href:!0,class:!0});var Li=X(Fs);Fo=H(Li,"STRONG",{});var dn=X(Fo);Ql=he(dn,"Statistical bulletins"),dn.forEach(C),Li.forEach(C),Ir.forEach(C),Pt.forEach(C),_s=Re(yt),Ar(Hi.$$.fragment,yt),yt.forEach(C),Vs=Re(Fe),ja=H(Fe,"DIV",{class:!0});var vi=X(ja);Ma=H(vi,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ri=X(Ma);fr=H(Ri,"DIV",{class:!0,style:!0});var an=X(fr);go=he(an,"Central heating"),Gn=H(an,"SPAN",{style:!0});var la=X(Gn);la.forEach(C),an.forEach(C),Ri.forEach(C),Wc=Re(vi),Js=H(vi,"DIV",{class:!0,id:!0});var Wn=X(Js);eu=H(Wn,"DIV",{class:!0});var Da=X(eu);tu=he(Da,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.
									`),Cl=H(Da,"A",{href:!0,class:!0});var ua=X(Cl);Ys=H(ua,"STRONG",{});var Za=X(Ys);Eu=he(Za,"Statistical bulletins"),Za.forEach(C),ua.forEach(C),Da.forEach(C),Wn.forEach(C),Jc=Re(vi),Ar(vs.$$.fragment,vi),vi.forEach(C),lo=Re(Fe),Qs=H(Fe,"DIV",{class:!0});var bi=X(Qs);Ns=H(bi,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ca=X(Ns);ru=H(ca,"DIV",{class:!0,style:!0});var pr=X(ru);tp=he(pr,"Renewable energy systems"),Qu=H(pr,"SPAN",{style:!0});var pi=X(Qu);pi.forEach(C),pr.forEach(C),ca.forEach(C),Yc=Re(bi),$u=H(bi,"DIV",{class:!0,id:!0});var qr=X($u);Ml=H(qr,"DIV",{class:!0});var _r=X(Ml);Sh=he(_r,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.
									`),bs=H(_r,"A",{href:!0,class:!0});var uo=X(bs);iu=H(uo,"STRONG",{});var La=X(iu);rp=he(La,"Statistical bulletins"),La.forEach(C),uo.forEach(C),_r.forEach(C),qr.forEach(C),ip=Re(bi),Ar(Su.$$.fragment,bi),np=Re(bi),ap=H(bi,"BR",{}),bi.forEach(C),op=Re(Fe),Dl=H(Fe,"DIV",{class:!0});var Wr=X(Dl);xs=H(Wr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Cn=X(xs);nu=H(Cn,"DIV",{class:!0,style:!0});var ba=X(nu);ku=he(ba,"Household tenure"),ec=H(ba,"SPAN",{style:!0});var Rr=X(ec);Rr.forEach(C),ba.forEach(C),Cn.forEach(C),Pc=Re(Wr),Iu=H(Wr,"DIV",{class:!0,id:!0});var bl=X(Iu);Ll=H(bl,"DIV",{class:!0});var Zo=X(Ll);Cc=he(Zo,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. 
									`),ml=H(Zo,"A",{href:!0,class:!0});var xl=X(ml);Mc=H(xl,"STRONG",{});var En=X(Mc);kh=he(En,"Statistical bulletins"),En.forEach(C),xl.forEach(C),Zo.forEach(C),bl.forEach(C),tc=Re(Wr),Ar(Rl.$$.fragment,Wr),Wr.forEach(C),Qc=Re(Fe),$s=H(Fe,"DIV",{class:!0});var bo=X($s);Vo=H(bo,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Us=X(Vo);au=H(Us,"DIV",{class:!0,style:!0});var ju=X(au);$c=he(ju,"Car or van availability"),rc=H(ju,"SPAN",{style:!0});var wc=X(rc);wc.forEach(C),ju.forEach(C),Us.forEach(C),eh=Re(bo),_o=H(bo,"DIV",{class:!0,id:!0});var Ec=X(_o);ic=H(Ec,"DIV",{class:!0});var wl=X(ic);lp=he(wl,`The number of cars or vans that are owned, or
									available for use, by members of a household. It
									includes company cars and vans that are available
									for private use.
									`),nc=H(wl,"A",{href:!0,class:!0});var Sc=X(nc);th=H(Sc,"STRONG",{});var mh=X(th);Ih=he(mh,"Statistical bulletins"),mh.forEach(C),Sc.forEach(C),wl.forEach(C),Ec.forEach(C),Tu=Re(bo),Ar(Au.$$.fragment,bo),up=Re(bo),Th=H(bo,"BR",{}),bo.forEach(C),Fe.forEach(C),Ae.forEach(C),Se.forEach(C),oe.forEach(C),ot.forEach(C),this.h()},h(){z(v,"class","accordion-button-title"),z(y,"class","accordion-button collapsed"),z(y,"type","button"),z(y,"data-bs-toggle","collapse"),z(y,"data-bs-target","#panelsStayOpen-collapseOne"),z(y,"aria-expanded","false"),z(y,"aria-controls","panelsStayOpen-collapseOne"),z(f,"class","accordion-header svelte-p0yy5r"),z(f,"id","panelsStayOpen-headingOne"),z(le,"class","accordion-button-title-sub"),ye(ct,"color","gray"),ye(ct,"font-size","14pt"),z(zt,"class","blocktitle"),ye(zt,"margin","0"),ye(zt,"width","100%"),z(Ne,"class","row"),ye(Ne,"display","flex"),ye(Ne,"cursor","pointer"),z(Ne,"data-bs-toggle","collapse"),z(Ne,"data-bs-target","#broadagebands-info"),z(Ne,"aria-expanded","false"),z(Ne,"aria-controls","broadagebands-info"),z(vt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(vt,"class","svelte-p0yy5r"),z(Wt,"class","card card-body svelte-p0yy5r"),z(cr,"class","collapse svelte-p0yy5r"),z(cr,"id","broadagebands-info"),z(Je,"class","chart svelte-p0yy5r"),ye(Je,"height","100px"),ye(Je,"padding-bottom","5px"),z(Te,"class","div-grey-box svelte-p0yy5r"),z(Bi,"class","blocktitle"),ye(Bi,"margin","0"),ye(Bi,"width","100%"),z(nr,"class","div-grey-box svelte-p0yy5r"),ye(kt,"color","gray"),ye(kt,"font-size","14pt"),z(Ai,"class","blocktitle"),ye(Ai,"margin","0"),ye(Ai,"width","100%"),z(Jt,"class","row"),ye(Jt,"display","flex"),ye(Jt,"cursor","pointer"),z(Jt,"data-bs-toggle","collapse"),z(Jt,"data-bs-target","#hhsize-info"),z(Jt,"aria-expanded","false"),z(Jt,"aria-controls","hhsize-info"),z(oi,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(oi,"class","svelte-p0yy5r"),z(br,"class","card card-body svelte-p0yy5r"),z(Sr,"class","collapse svelte-p0yy5r"),z(Sr,"id","hhsize-info"),z(Xi,"class","div-grey-box svelte-p0yy5r"),z(ve,"class","grid mt svelte-p0yy5r"),Ku(()=>c[35].call(ve)),z(k,"class","accordion-body"),z(T,"id","panelsStayOpen-collapseOne"),z(T,"class","accordion-collapse collapse svelte-p0yy5r"),z(T,"aria-labelledby","panelsStayOpen-headingOne"),z(pa,"class","accordion-button-title"),z(Oi,"class","accordion-button collapsed"),z(Oi,"type","button"),z(Oi,"data-bs-toggle","collapse"),z(Oi,"data-bs-target","#panelsStayOpen-collapseTwo"),z(Oi,"aria-expanded","false"),z(Oi,"aria-controls","panelsStayOpen-collapseTwo"),z(ti,"class","accordion-header svelte-p0yy5r"),z(ti,"id","panelsStayOpen-headingTwo"),ye(yn,"color","gray"),ye(yn,"font-size","14pt"),z(Wi,"class","blocktitle"),ye(Wi,"margin","0"),ye(Wi,"width","100%"),z(Gr,"class","row"),ye(Gr,"display","flex"),ye(Gr,"cursor","pointer"),z(Gr,"data-bs-toggle","collapse"),z(Gr,"data-bs-target","#cob-info"),z(Gr,"aria-expanded","false"),z(Gr,"aria-controls","cob-info"),z(ie,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ie,"class","svelte-p0yy5r"),z(Z,"class","card card-body svelte-p0yy5r"),z(j,"class","collapse svelte-p0yy5r"),z(j,"id","cob-info"),z(Ei,"class","div-grey-box svelte-p0yy5r"),ye(it,"color","gray"),ye(it,"font-size","14pt"),z(Ie,"class","blocktitle"),ye(Ie,"margin","0"),ye(Ie,"width","100%"),z(qe,"class","row"),ye(qe,"display","flex"),ye(qe,"cursor","pointer"),z(qe,"data-bs-toggle","collapse"),z(qe,"data-bs-target","#passport-info"),z(qe,"aria-expanded","false"),z(qe,"aria-controls","passport-info"),z(Lt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Lt,"class","svelte-p0yy5r"),z(Ke,"class","card card-body svelte-p0yy5r"),z(Ye,"class","collapse svelte-p0yy5r"),z(Ye,"id","passport-info"),z(Ue,"class","div-grey-box svelte-p0yy5r"),ye(or,"color","gray"),ye(or,"font-size","14pt"),z(Nt,"class","blocktitle"),ye(Nt,"font-size","1.02em"),ye(Nt,"margin","0"),ye(Nt,"width","100%"),z(Dr,"class","row"),ye(Dr,"display","flex"),ye(Dr,"cursor","pointer"),z(Dr,"data-bs-toggle","collapse"),z(Dr,"data-bs-target","#natid-info"),z(Dr,"aria-expanded","false"),z(Dr,"aria-controls","natid-info"),z(di,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(di,"class","svelte-p0yy5r"),z(gn,"class","card card-body svelte-p0yy5r"),z(ci,"class","collapse svelte-p0yy5r"),z(ci,"id","natid-info"),z(Vt,"class","div-grey-box svelte-p0yy5r"),z(cn,"class","grid mt svelte-p0yy5r"),Ku(()=>c[36].call(cn)),z(mn,"class","accordion-button-title-sub"),z(On,"class","accordion-body"),z(In,"id","panelsStayOpen-collapseTwo"),z(In,"class","accordion-collapse collapse svelte-p0yy5r"),z(In,"aria-labelledby","panelsStayOpen-headingTwo"),z(ln,"class","accordion-item"),z(zi,"class","accordion-button-title"),z(ri,"class","accordion-button collapsed"),z(ri,"type","button"),z(ri,"data-bs-toggle","collapse"),z(ri,"data-bs-target","#panelsStayOpen-collapseThree"),z(ri,"aria-expanded","false"),z(ri,"aria-controls","panelsStayOpen-collapseThree"),z(gr,"class","accordion-header svelte-p0yy5r"),z(gr,"id","panelsStayOpen-headingThree"),z(wa,"class","accordion-button-title-sub"),ye($n,"color","gray"),ye($n,"font-size","14pt"),z(Sa,"class","blocktitle"),ye(Sa,"margin","0"),ye(Sa,"width","100%"),z(Ea,"class","row"),ye(Ea,"display","flex"),ye(Ea,"cursor","pointer"),z(Ea,"data-bs-toggle","collapse"),z(Ea,"data-bs-target","#mainlang-info"),z(Ea,"aria-expanded","false"),z(Ea,"aria-controls","mainlang-info"),z(en,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(en,"class","svelte-p0yy5r"),z(Pi,"class","card card-body svelte-p0yy5r"),z(Eo,"class","collapse svelte-p0yy5r"),z(Eo,"id","mainlang-info"),z(Mn,"class","div-grey-box svelte-p0yy5r"),ye(Xo,"color","gray"),ye(Xo,"font-size","14pt"),z(ka,"class","blocktitle"),ye(ka,"margin","0"),ye(ka,"width","100%"),z(Lr,"class","row"),ye(Lr,"display","flex"),ye(Lr,"cursor","pointer"),z(Lr,"data-bs-toggle","collapse"),z(Lr,"data-bs-target","#irish-info"),z(Lr,"aria-expanded","false"),z(Lr,"aria-controls","irish-info"),z(Nn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Nn,"class","svelte-p0yy5r"),z(Wo,"class","card card-body svelte-p0yy5r"),z(is,"class","collapse svelte-p0yy5r"),z(is,"id","irish-info"),z(yi,"class","div-grey-box svelte-p0yy5r"),ye(Ta,"color","gray"),ye(Ta,"font-size","14pt"),z(Hr,"class","blocktitle"),ye(Hr,"margin","0"),ye(Hr,"width","100%"),z(tn,"class","row"),ye(tn,"display","flex"),ye(tn,"cursor","pointer"),z(tn,"data-bs-toggle","collapse"),z(tn,"data-bs-target","#ulster-info"),z(tn,"aria-expanded","false"),z(tn,"aria-controls","ulster-info"),z(ki,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ki,"class","svelte-p0yy5r"),z(hn,"class","card card-body svelte-p0yy5r"),z(Aa,"class","collapse svelte-p0yy5r"),z(Aa,"id","ulster-info"),z(ni,"class","div-grey-box svelte-p0yy5r"),z(Tn,"class","grid mt svelte-p0yy5r"),Ku(()=>c[37].call(Tn)),z(Kr,"class","accordion-body"),z(Vn,"id","panelsStayOpen-collapseThree"),z(Vn,"class","accordion-collapse collapse svelte-p0yy5r"),z(Vn,"aria-labelledby","panelsStayOpen-headingThree"),z($i,"class","accordion-item"),z(za,"class","accordion-button-title"),z(ta,"class","accordion-button collapsed"),z(ta,"type","button"),z(ta,"data-bs-toggle","collapse"),z(ta,"data-bs-target","#panelsStayOpen-collapseFour"),z(ta,"aria-expanded","false"),z(ta,"aria-controls","panelsStayOpen-collapseFour"),z(Ts,"class","accordion-header svelte-p0yy5r"),z(Ts,"id","panelsStayOpen-headingFour"),z(qs,"class","accordion-button-title-sub"),ye(zs,"color","gray"),ye(zs,"font-size","14pt"),z(Ln,"class","blocktitle"),ye(Ln,"margin","0"),ye(Ln,"width","100%"),z(Ci,"class","row"),ye(Ci,"display","flex"),ye(Ci,"cursor","pointer"),z(Ci,"data-bs-toggle","collapse"),z(Ci,"data-bs-target","#rel-info"),z(Ci,"aria-expanded","false"),z(Ci,"aria-controls","rel-info"),z(ma,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ma,"class","svelte-p0yy5r"),z(Qo,"class","card card-body svelte-p0yy5r"),z(ra,"class","collapse svelte-p0yy5r"),z(ra,"id","rel-info"),z(Tt,"class","div-grey-box svelte-p0yy5r"),ye(Ds,"color","gray"),ye(Ds,"font-size","14pt"),z(to,"class","blocktitle"),ye(to,"margin","0"),ye(to,"width","100%"),z(gi,"class","row"),ye(gi,"display","flex"),ye(gi,"cursor","pointer"),z(gi,"data-bs-toggle","collapse"),z(gi,"data-bs-target","#relbup-info"),z(gi,"aria-expanded","false"),z(gi,"aria-controls","relbup-info"),z(ia,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ia,"class","svelte-p0yy5r"),z(ss,"class","card card-body svelte-p0yy5r"),z($o,"class","collapse svelte-p0yy5r"),z($o,"id","relbup-info"),z(Io,"class","div-grey-box svelte-p0yy5r"),ye(ro,"color","gray"),ye(ro,"font-size","14pt"),z(Cr,"class","blocktitle"),ye(Cr,"margin","0"),ye(Cr,"width","100%"),z(jn,"class","row"),ye(jn,"display","flex"),ye(jn,"cursor","pointer"),z(jn,"data-bs-toggle","collapse"),z(jn,"data-bs-target","#ethnic-info"),z(jn,"aria-expanded","false"),z(jn,"aria-controls","ethnic-info"),z(Ba,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Ba,"class","svelte-p0yy5r"),z(Rn,"class","card card-body svelte-p0yy5r"),z(Mr,"class","collapse svelte-p0yy5r"),z(Mr,"id","ethnic-info"),z(To,"class","div-grey-box svelte-p0yy5r"),z(Ve,"class","grid mt svelte-p0yy5r"),Ku(()=>c[38].call(Ve)),z(pn,"class","accordion-body"),z(ko,"id","panelsStayOpen-collapseFour"),z(ko,"class","accordion-collapse collapse svelte-p0yy5r"),z(ko,"aria-labelledby","panelsStayOpen-headingFour"),z(Is,"class","accordion-item"),z(hi,"class","accordion-button-title"),z(fo,"class","accordion-button collapsed"),z(fo,"type","button"),z(fo,"data-bs-toggle","collapse"),z(fo,"data-bs-target","#panelsStayOpen-collapseFive"),z(fo,"aria-expanded","false"),z(fo,"aria-controls","panelsStayOpen-collapseFive"),z(ya,"class","accordion-header svelte-p0yy5r"),z(ya,"id","panelsStayOpen-headingFive"),z(Os,"class","accordion-button-title-sub"),ye(Pa,"color","gray"),ye(Pa,"font-size","14pt"),z(no,"class","blocktitle"),ye(no,"margin","0"),ye(no,"width","100%"),z(Oa,"class","row"),ye(Oa,"display","flex"),ye(Oa,"cursor","pointer"),z(Oa,"data-bs-toggle","collapse"),z(Oa,"data-bs-target","#gen-health-info"),z(Oa,"aria-expanded","false"),z(Oa,"aria-controls","gen-health"),z($t,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z($t,"class","svelte-p0yy5r"),z(Fa,"class","card card-body svelte-p0yy5r"),z(ll,"class","collapse svelte-p0yy5r"),z(ll,"id","gen-health-info"),z(Zi,"class","div-grey-box svelte-p0yy5r"),ye(ft,"color","gray"),ye(ft,"font-size","14pt"),z(Ro,"class","blocktitle"),ye(Ro,"font-size","0.85em"),ye(Ro,"margin","0"),ye(Ro,"width","100%"),z(Gi,"class","row"),ye(Gi,"display","flex"),ye(Gi,"cursor","pointer"),z(Gi,"data-bs-toggle","collapse"),z(Gi,"data-bs-target","#lti-info"),z(Gi,"aria-expanded","false"),z(Gi,"aria-controls","lti-info"),z(ul,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ul,"class","svelte-p0yy5r"),z(bn,"class","card card-body svelte-p0yy5r"),z(Va,"class","collapse svelte-p0yy5r"),z(Va,"id","lti-info"),z(aa,"class","div-grey-box svelte-p0yy5r"),ye(ao,"color","gray"),ye(ao,"font-size","14pt"),z(xn,"class","blocktitle"),ye(xn,"font-size","1.02em"),ye(xn,"margin","0"),ye(xn,"width","100%"),z(oa,"class","row"),ye(oa,"display","flex"),ye(oa,"cursor","pointer"),z(oa,"data-bs-toggle","collapse"),z(oa,"data-bs-target","#lt-cond-info"),z(oa,"aria-expanded","false"),z(oa,"aria-controls","lt-cond-info"),z(dl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(dl,"class","svelte-p0yy5r"),z(ps,"class","card card-body svelte-p0yy5r"),z(pl,"class","collapse svelte-p0yy5r"),z(pl,"id","lt-cond-info"),z(hs,"class","div-grey-box svelte-p0yy5r"),ye(n,"color","gray"),ye(n,"font-size","14pt"),z(ms,"class","blocktitle"),ye(ms,"font-size","1.02em"),ye(ms,"margin","0"),ye(ms,"width","100%"),z(oo,"class","row"),ye(oo,"display","flex"),ye(oo,"cursor","pointer"),z(oo,"data-bs-toggle","collapse"),z(oo,"data-bs-target","#unpaid-info"),z(oo,"aria-expanded","false"),z(oo,"aria-controls","unpaid-info"),z(E,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(E,"class","svelte-p0yy5r"),z(m,"class","card card-body svelte-p0yy5r"),z(u,"class","collapse svelte-p0yy5r"),z(u,"id","unpaid-info"),z(ds,"class","div-grey-box svelte-p0yy5r"),z(Ii,"class","grid mt svelte-p0yy5r"),Ku(()=>c[39].call(Ii)),z(zn,"class","accordion-body"),z(Po,"id","panelsStayOpen-collapseFive"),z(Po,"class","accordion-collapse collapse svelte-p0yy5r"),z(Po,"aria-labelledby","panelsStayOpen-headingFive"),z(Fr,"class","accordion-item"),z(re,"class","accordion-button-title"),z(pe,"class","accordion-button collapsed"),z(pe,"type","button"),z(pe,"data-bs-toggle","collapse"),z(pe,"data-bs-target","#panelsStayOpen-collapseSix"),z(pe,"aria-expanded","false"),z(pe,"aria-controls","panelsStayOpen-collapseSix"),z(ae,"class","accordion-header svelte-p0yy5r"),z(ae,"id","panelsStayOpen-headingSix"),z(He,"class","accordion-button-title-sub"),ye(Gt,"color","gray"),ye(Gt,"font-size","14pt"),z(at,"class","blocktitle"),ye(at,"margin","0"),ye(at,"width","100%"),z(er,"class","row"),ye(er,"display","flex"),ye(er,"cursor","pointer"),z(er,"data-bs-toggle","collapse"),z(er,"data-bs-target","#acc-type-info"),z(er,"aria-expanded","false"),z(er,"aria-controls","acc-type-info"),z(nn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(nn,"class","svelte-p0yy5r"),z(Mt,"class","card card-body svelte-p0yy5r"),z(Zt,"class","collapse svelte-p0yy5r"),z(Zt,"id","acc-type-info"),z(_t,"class","div-grey-box svelte-p0yy5r"),ye(Ua,"color","gray"),ye(Ua,"font-size","14pt"),z(so,"class","blocktitle"),ye(so,"margin","0"),ye(so,"width","100%"),z(Ki,"class","row"),ye(Ki,"display","flex"),ye(Ki,"cursor","pointer"),z(Ki,"data-bs-toggle","collapse"),z(Ki,"data-bs-target","#adapt-info"),z(Ki,"aria-expanded","false"),z(Ki,"aria-controls","adapt-info"),z(Fs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Fs,"class","svelte-p0yy5r"),z(Oo,"class","card card-body svelte-p0yy5r"),z(gs,"class","collapse svelte-p0yy5r"),z(gs,"id","adapt-info"),z(Pn,"class","div-grey-box svelte-p0yy5r"),ye(Gn,"color","gray"),ye(Gn,"font-size","14pt"),z(fr,"class","blocktitle"),ye(fr,"margin","0"),ye(fr,"width","100%"),z(Ma,"class","row"),ye(Ma,"display","flex"),ye(Ma,"cursor","pointer"),z(Ma,"data-bs-toggle","collapse"),z(Ma,"data-bs-target","#heat-info"),z(Ma,"aria-expanded","false"),z(Ma,"aria-controls","heat-info"),z(Cl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Cl,"class","svelte-p0yy5r"),z(eu,"class","card card-body svelte-p0yy5r"),z(Js,"class","collapse svelte-p0yy5r"),z(Js,"id","heat-info"),z(ja,"class","div-grey-box svelte-p0yy5r"),ye(Qu,"color","gray"),ye(Qu,"font-size","14pt"),z(ru,"class","blocktitle"),ye(ru,"margin","0"),ye(ru,"width","100%"),z(Ns,"class","row"),ye(Ns,"display","flex"),ye(Ns,"cursor","pointer"),z(Ns,"data-bs-toggle","collapse"),z(Ns,"data-bs-target","#renew-info"),z(Ns,"aria-expanded","false"),z(Ns,"aria-controls","renew-info"),z(bs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(bs,"class","svelte-p0yy5r"),z(Ml,"class","card card-body svelte-p0yy5r"),z($u,"class","collapse svelte-p0yy5r"),z($u,"id","renew-info"),z(Qs,"class","div-grey-box svelte-p0yy5r"),ye(ec,"color","gray"),ye(ec,"font-size","14pt"),z(nu,"class","blocktitle"),ye(nu,"margin","0"),ye(nu,"width","100%"),z(xs,"class","row"),ye(xs,"display","flex"),ye(xs,"cursor","pointer"),z(xs,"data-bs-toggle","collapse"),z(xs,"data-bs-target","#tenure-info"),z(xs,"aria-expanded","false"),z(xs,"aria-controls","tenure-info"),z(ml,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ml,"class","svelte-p0yy5r"),z(Ll,"class","card card-body svelte-p0yy5r"),z(Iu,"class","collapse svelte-p0yy5r"),z(Iu,"id","tenure-info"),z(Dl,"class","div-grey-box svelte-p0yy5r"),ye(rc,"color","gray"),ye(rc,"font-size","14pt"),z(au,"class","blocktitle"),ye(au,"margin","0"),ye(au,"width","100%"),z(Vo,"class","row"),ye(Vo,"display","flex"),ye(Vo,"cursor","pointer"),z(Vo,"data-bs-toggle","collapse"),z(Vo,"data-bs-target","#car-info"),z(Vo,"aria-expanded","false"),z(Vo,"aria-controls","car-info"),z(nc,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(nc,"class","svelte-p0yy5r"),z(ic,"class","card card-body svelte-p0yy5r"),z(_o,"class","collapse svelte-p0yy5r"),z(_o,"id","car-info"),z($s,"class","div-grey-box svelte-p0yy5r"),z(dt,"class","grid mt svelte-p0yy5r"),Ku(()=>c[40].call(dt)),z(Pe,"class","accordion-body"),z(Ee,"id","panelsStayOpen-collapseSix"),z(Ee,"class","accordion-collapse collapse svelte-p0yy5r"),z(Ee,"aria-labelledby","panelsStayOpen-headingSix"),z(se,"class","accordion-item"),z(h,"class","accordion-item")},m(Be,ot){ke(Be,h,ot),P(h,f),P(f,y),P(y,v),P(v,_),P(h,a),P(h,T),P(T,k),P(k,B),P(k,N),P(k,F),P(k,le),P(le,ee),P(k,ze),P(k,ve),P(ve,Te),P(Te,Ne),P(Ne,zt),P(zt,Dt),P(zt,ct),ct.innerHTML=$e,P(Te,wr),P(Te,cr),P(cr,Wt),P(Wt,wt),P(Wt,vt),P(vt,vr),P(vr,Bt),P(Te,Er),P(Te,Je),zr(Qt,Je,null),P(Te,Zr),No&&No.m(Te,null),P(Te,Qr),P(Te,yr),zr(pt,yr,null),P(ve,rt),P(ve,nr),P(nr,Bi),P(Bi,Qn),P(nr,Ti),zr(xi,nr,null),P(ve,$r),P(ve,Xi),P(Xi,Jt),P(Jt,Ai),P(Ai,Ra),P(Ai,kt),kt.innerHTML=Ct,P(Xi,ei),P(Xi,Sr),P(Sr,br),P(br,sn),P(br,oi),P(oi,wi),P(wi,Or),P(Xi,hr),zr(ar,Xi,null),si=Hu(ve,c[35].bind(ve)),P(h,li),P(h,ln),P(ln,ti),P(ti,Oi),P(Oi,pa),P(pa,Ha),P(ln,Xa),P(ln,In),P(In,On),P(On,ui),P(On,un),P(On,Wa),P(On,mn),P(mn,Go),P(mn,cn),P(cn,Ei),P(Ei,Gr),P(Gr,Wi),P(Wi,Fn),P(Wi,yn),yn.innerHTML=Vr,P(Ei,O),P(Ei,j),P(j,Z),P(Z,$),P(Z,ie),P(ie,de),P(de,ge),P(Ei,G),zr(te,Ei,null),P(cn,we),P(cn,Ue),P(Ue,qe),P(qe,Ie),P(Ie,je),P(Ie,it),it.innerHTML=nt,P(Ue,Me),P(Ue,Ye),P(Ye,Ke),P(Ke,Qe),P(Ke,Lt),P(Lt,Xe),P(Xe,jt),P(Ue,sr),zr(It,Ue,null),P(cn,Yt),P(cn,Vt),P(Vt,Dr),P(Dr,Nt),P(Nt,dr),P(Nt,or),or.innerHTML=Kt,P(Vt,tr),P(Vt,ci),P(ci,gn),P(gn,fi),P(gn,di),P(di,Ji),P(Ji,Yi),P(Vt,mr),zr(Vi,Vt,null),Qi=Hu(cn,c[36].bind(cn)),P(h,Nr),P(h,$i),P($i,gr),P(gr,ri),P(ri,zi),P(zi,ks),P($i,Ni),P($i,Vn),P(Vn,Kr),P(Kr,Ur),P(Kr,ii),P(Kr,Ja),P(Kr,wa),P(wa,jl),P(Kr,Ko),P(Kr,Tn),P(Tn,Mn),P(Mn,Ea),P(Ea,Sa),P(Sa,co),P(Sa,$n),$n.innerHTML=js,P(Mn,Ho),P(Mn,Eo),P(Eo,Pi),P(Pi,Si),P(Pi,en),P(en,xe),P(xe,Ui),P(Mn,An),zr(kr,Mn,null),P(Tn,ea),P(Tn,yi),P(yi,Lr),P(Lr,ka),P(ka,rs),P(ka,Xo),Xo.innerHTML=gu,P(yi,al),P(yi,is),P(is,Wo),P(Wo,Ia),P(Wo,Nn),P(Nn,fa),P(fa,_u),P(yi,ns),zr(_n,yi,null),P(Tn,ql),P(Tn,ni),P(ni,tn),P(tn,Hr),P(Hr,Jo),P(Hr,Ta),Ta.innerHTML=da,P(ni,Yo),P(ni,Aa),P(Aa,hn),P(hn,ji),P(hn,ki),P(ki,qi),P(qi,Ht),P(ni,vn),zr(So,ni,null),kl=Hu(Tn,c[37].bind(Tn)),P(h,Ya),P(h,Is),P(Is,Ts),P(Ts,ta),P(ta,za),P(za,Un),P(Is,Zl),P(Is,ko),P(ko,pn),P(pn,as),P(pn,Dn),P(pn,rn),P(pn,qs),P(qs,Qa),P(pn,jr),P(pn,Ve),P(Ve,Tt),P(Tt,Ci),P(Ci,Ln),P(Ln,Zs),P(Ln,zs),zs.innerHTML=os,P(Tt,Ps),P(Tt,ra),P(ra,Qo),P(Qo,Gs),P(Qo,ma),P(ma,ol),P(ol,Cs),P(Tt,$a),zr(eo,Tt,null),P(Ve,Ms),P(Ve,Io),P(Io,gi),P(gi,to),P(to,Ks),P(to,Ds),Ds.innerHTML=Gl,P(Io,Kl),P(Io,$o),P($o,ss),P(ss,Hl),P(ss,ia),P(ia,Ls),P(Ls,sl),P(Io,Xl),zr(es,Io,null),P(Ve,Rs),P(Ve,To),P(To,jn),P(jn,Cr),P(Cr,ho),P(Cr,ro),ro.innerHTML=Bs,P(To,lr),P(To,Mr),P(Mr,Rn),P(Rn,ls),P(Rn,Ba),P(Ba,us),P(us,vu),P(To,bu),zr(po,To,null),Ao=Hu(Ve,c[38].bind(Ve)),P(h,zo),P(h,Fr),P(Fr,ya),P(ya,fo),P(fo,hi),P(hi,ht),P(Fr,ga),P(Fr,Po),P(Po,zn),P(zn,io),P(zn,Il),P(zn,et),P(zn,Os),P(Os,Hs),P(zn,Co),P(zn,Ii),P(Ii,Zi),P(Zi,Oa),P(Oa,no),P(no,_a),P(no,Pa),Pa.innerHTML=Eh,P(no,Wl),P(Zi,Yu),P(Zi,ll),P(ll,Fa),P(Fa,mo),P(Fa,$t),P($t,Mo),P(Mo,Do),P(Zi,na),zr(Lo,Zi,null),P(Ii,Xs),P(Ii,aa),P(aa,Gi),P(Gi,Ro),P(Ro,Et),P(Ro,ft),ft.innerHTML=Ac,P(aa,Ca),P(aa,Va),P(Va,bn),P(bn,cs),P(bn,ul),P(ul,Tl),P(Tl,Br),P(aa,qn),zr(cl,aa,null),P(Ii,hl),P(Ii,hs),P(hs,oa),P(oa,xn),P(xn,Al),P(xn,ao),ao.innerHTML=zc,P(xn,zl),P(hs,Jl),P(hs,pl),P(pl,ps),P(ps,fl),P(ps,dl),P(dl,fs),P(fs,Ws),P(hs,xu),zr(yo,hs,null),P(Ii,Bo),P(Ii,ds),P(ds,oo),P(oo,ms),P(ms,wu),P(ms,n),n.innerHTML=s,P(ds,o),P(ds,u),P(u,m),P(m,w),P(m,E),P(E,I),P(I,D),P(ds,U),zr(J,ds,null),Y=Hu(Ii,c[39].bind(Ii)),P(h,Q),P(h,se),P(se,ae),P(ae,pe),P(pe,re),P(re,fe),P(se,_e),P(se,Ee),P(Ee,Pe),P(Pe,Ce),P(Pe,Ze),P(Pe,We),P(Pe,He),P(He,ut),P(Pe,St),P(Pe,dt),P(dt,_t),P(_t,er),P(er,at),P(at,Ut),P(at,Gt),Gt.innerHTML=qt,P(_t,Ft),P(_t,Zt),P(Zt,Mt),P(Mt,Rt),P(Mt,nn),P(nn,Mi),P(Mi,va),P(_t,Zn),zr(ai,_t,null),P(dt,fn),P(dt,Pn),P(Pn,Ki),P(Ki,so),P(so,Na),P(so,Ua),Ua.innerHTML=ys,P(Pn,Yl),P(Pn,gs),P(gs,Oo),P(Oo,Pl),P(Oo,Fs),P(Fs,Fo),P(Fo,Ql),P(Pn,_s),zr(Hi,Pn,null),P(dt,Vs),P(dt,ja),P(ja,Ma),P(Ma,fr),P(fr,go),P(fr,Gn),Gn.innerHTML=$l,P(ja,Wc),P(ja,Js),P(Js,eu),P(eu,tu),P(eu,Cl),P(Cl,Ys),P(Ys,Eu),P(ja,Jc),zr(vs,ja,null),P(dt,lo),P(dt,Qs),P(Qs,Ns),P(Ns,ru),P(ru,tp),P(ru,Qu),Qu.innerHTML=kd,P(Qs,Yc),P(Qs,$u),P($u,Ml),P(Ml,Sh),P(Ml,bs),P(bs,iu),P(iu,rp),P(Qs,ip),zr(Su,Qs,null),P(Qs,np),P(Qs,ap),P(dt,op),P(dt,Dl),P(Dl,xs),P(xs,nu),P(nu,ku),P(nu,ec),ec.innerHTML=Kn,P(Dl,Pc),P(Dl,Iu),P(Iu,Ll),P(Ll,Cc),P(Ll,ml),P(ml,Mc),P(Mc,kh),P(Dl,tc),zr(Rl,Dl,null),P(dt,Qc),P(dt,$s),P($s,Vo),P(Vo,au),P(au,$c),P(au,rc),rc.innerHTML=sp,P($s,eh),P($s,_o),P(_o,ic),P(ic,lp),P(ic,nc),P(nc,th),P(th,Ih),P($s,Tu),zr(Au,$s,null),P($s,up),P($s,Th),cp=Hu(dt,c[40].bind(dt)),Bl=!0},p(Be,ot){(!Bl||ot[0]&2)&&R!==(R=Be[1].name+"")&&gt(N,R);const zu={};ot[0]&2&&(zu.data=Be[1]&&Be[14](["age"])),ot[0]&4096&&(zu.zKey=Be[12]),Qt.$set(zu),!Be[5]&&Be[13]?No?No.p(Be,ot):(No=sg(Be),No.c(),No.m(Te,Qr)):No&&(No.d(1),No=null);const Ol={};ot[0]&2&&(Ol.data=Be[1]&&Be[14](["age"])),ot[0]&4096&&(Ol.zkey=Be[12]),pt.$set(Ol);const vo={};ot[0]&2&&(vo.data=Be[1]&&Be[14](["sex"])),ot[0]&4096&&(vo.zKey=Be[12]),ot[0]&8192&&(vo.label=Be[13]),xi.$set(vo);const ac={};ot[0]&2&&(ac.data=Be[1]&&Be[14](["hh_size"])),ot[0]&4096&&(ac.zKey=Be[12]),ot[0]&8192&&(ac.label=Be[13]),ar.$set(ac),(!Bl||ot[0]&2)&&Fi!==(Fi=Be[1].name+"")&&gt(un,Fi);const el={};ot[0]&2&&(el.data=Be[1]&&Be[14](["cob"])),ot[0]&4096&&(el.zKey=Be[12]),ot[0]&8192&&(el.label=Be[13]),te.$set(el);const oc={};ot[0]&2&&(oc.data=Be[1]&&Be[14](["passport"])),ot[0]&4096&&(oc.zKey=Be[12]),ot[0]&8192&&(oc.label=Be[13]),It.$set(oc);const ts={};ot[0]&2&&(ts.data=Be[1]&&Be[14](["natid"])),ot[0]&4096&&(ts.zKey=Be[12]),ot[0]&8192&&(ts.label=Be[13]),Vi.$set(ts),(!Bl||ot[0]&2)&&mi!==(mi=Be[1].name+"")&&gt(ii,mi);const Uo={};ot[0]&2&&(Uo.data=Be[1]&&Be[14](["mainlang"])),ot[0]&4096&&(Uo.zKey=Be[12]),ot[0]&8192&&(Uo.label=Be[13]),kr.$set(Uo);const sc={};ot[0]&2&&(sc.data=Be[1]&&Be[14](["irish"])),ot[0]&4096&&(sc.zKey=Be[12]),ot[0]&8192&&(sc.label=Be[13]),_n.$set(sc);const Pu={};ot[0]&2&&(Pu.data=Be[1]&&Be[14](["ulster"])),ot[0]&4096&&(Pu.zKey=Be[12]),ot[0]&8192&&(Pu.label=Be[13]),So.$set(Pu),(!Bl||ot[0]&2)&&As!==(As=Be[1].name+"")&&gt(Dn,As);const Dc={};ot[0]&2&&(Dc.data=Be[1]&&Be[14](["religion"])),ot[0]&4096&&(Dc.zKey=Be[12]),ot[0]&8192&&(Dc.label=Be[13]),eo.$set(Dc);const lc={};ot[0]&2&&(lc.data=Be[1]&&Be[14](["religion_or_religion_brought_up_in"])),ot[0]&4096&&(lc.zKey=Be[12]),ot[0]&8192&&(lc.label=Be[13]),es.$set(lc);const ou={};ot[0]&2&&(ou.data=Be[1]&&Be[14](["ethnic"])),ot[0]&4096&&(ou.zKey=Be[12]),ot[0]&8192&&(ou.label=Be[13]),po.$set(ou),(!Bl||ot[0]&2)&&Bn!==(Bn=Be[1].name+"")&&gt(Il,Bn);const Hn={};ot[0]&2&&(Hn.data=Be[1]&&Be[14](["general_health"])),ot[0]&4096&&(Hn.zKey=Be[12]),ot[0]&8192&&(Hn.label=Be[13]),Lo.$set(Hn);const uc={};ot[0]&2&&(uc.data=Be[1]&&Be[14](["long_term_disability"])),ot[0]&4096&&(uc.zKey=Be[12]),ot[0]&8192&&(uc.label=Be[13]),cl.$set(uc);const Cu={};ot[0]&2&&(Cu.data=Be[1]&&Be[14](["number_of_long_term_health"])),ot[0]&4096&&(Cu.zKey=Be[12]),ot[0]&8192&&(Cu.label=Be[13]),yo.$set(Cu);const Mu={};ot[0]&2&&(Mu.data=Be[1]&&Be[14](["provision_care"])),ot[0]&4096&&(Mu.zKey=Be[12]),ot[0]&8192&&(Mu.label=Be[13]),J.$set(Mu),(!Bl||ot[0]&2)&&Oe!==(Oe=Be[1].name+"")&&gt(Ze,Oe);const su={};ot[0]&2&&(su.data=Be[1]&&Be[14](["accommodation_type"])),ot[0]&4096&&(su.zKey=Be[12]),ot[0]&8192&&(su.label=Be[13]),ai.$set(su);const Du={};ot[0]&2&&(Du.data=Be[1]&&Be[14](["number_of_adaptations"])),ot[0]&4096&&(Du.zKey=Be[12]),ot[0]&8192&&(Du.label=Be[13]),Hi.$set(Du);const yl={};ot[0]&2&&(yl.data=Be[1]&&Be[14](["central_heating"])),ot[0]&4096&&(yl.zKey=Be[12]),ot[0]&8192&&(yl.label=Be[13]),vs.$set(yl);const cc={};ot[0]&2&&(cc.data=Be[1]&&Be[14](["renewable_energy"])),ot[0]&4096&&(cc.zKey=Be[12]),ot[0]&8192&&(cc.label=Be[13]),Su.$set(cc);const Lu={};ot[0]&2&&(Lu.data=Be[1]&&Be[14](["hh_tenure"])),ot[0]&4096&&(Lu.zKey=Be[12]),ot[0]&8192&&(Lu.label=Be[13]),Rl.$set(Lu);const hc={};ot[0]&2&&(hc.data=Be[1]&&Be[14](["car_or_van"])),ot[0]&4096&&(hc.zKey=Be[12]),ot[0]&8192&&(hc.label=Be[13]),Au.$set(hc)},i(Be){Bl||(mt(Qt.$$.fragment,Be),mt(pt.$$.fragment,Be),mt(xi.$$.fragment,Be),mt(ar.$$.fragment,Be),mt(te.$$.fragment,Be),mt(It.$$.fragment,Be),mt(Vi.$$.fragment,Be),mt(kr.$$.fragment,Be),mt(_n.$$.fragment,Be),mt(So.$$.fragment,Be),mt(eo.$$.fragment,Be),mt(es.$$.fragment,Be),mt(po.$$.fragment,Be),mt(Lo.$$.fragment,Be),mt(cl.$$.fragment,Be),mt(yo.$$.fragment,Be),mt(J.$$.fragment,Be),mt(ai.$$.fragment,Be),mt(Hi.$$.fragment,Be),mt(vs.$$.fragment,Be),mt(Su.$$.fragment,Be),mt(Rl.$$.fragment,Be),mt(Au.$$.fragment,Be),Bl=!0)},o(Be){xt(Qt.$$.fragment,Be),xt(pt.$$.fragment,Be),xt(xi.$$.fragment,Be),xt(ar.$$.fragment,Be),xt(te.$$.fragment,Be),xt(It.$$.fragment,Be),xt(Vi.$$.fragment,Be),xt(kr.$$.fragment,Be),xt(_n.$$.fragment,Be),xt(So.$$.fragment,Be),xt(eo.$$.fragment,Be),xt(es.$$.fragment,Be),xt(po.$$.fragment,Be),xt(Lo.$$.fragment,Be),xt(cl.$$.fragment,Be),xt(yo.$$.fragment,Be),xt(J.$$.fragment,Be),xt(ai.$$.fragment,Be),xt(Hi.$$.fragment,Be),xt(vs.$$.fragment,Be),xt(Su.$$.fragment,Be),xt(Rl.$$.fragment,Be),xt(Au.$$.fragment,Be),Bl=!1},d(Be){Be&&C(h),Pr(Qt),No&&No.d(),Pr(pt),Pr(xi),Pr(ar),si(),Pr(te),Pr(It),Pr(Vi),Qi(),Pr(kr),Pr(_n),Pr(So),kl(),Pr(eo),Pr(es),Pr(po),Ao(),Pr(Lo),Pr(cl),Pr(yo),Pr(J),Y(),Pr(ai),Pr(Hi),Pr(vs),Pr(Su),Pr(Rl),Pr(Au),cp()}}}function sg(c){let h,f,y,v,_;return{c(){h=K("div"),f=xo("svg"),y=xo("rect"),v=Le(),_=ce(c[13]),this.h()},l(a){h=H(a,"DIV",{class:!0});var T=X(h);f=wo(T,"svg",{width:!0,height:!0,style:!0});var k=X(f);y=wo(k,"rect",{width:!0,height:!0,style:!0}),X(y).forEach(C),k.forEach(C),v=Re(T),_=he(T,c[13]),T.forEach(C),this.h()},h(){z(y,"width","25"),z(y,"height","4"),ye(y,"fill","#CEDC20"),z(f,"width","25"),z(f,"height","4"),ye(f,"display","inline-block"),ye(f,"margin-bottom","3px"),z(h,"class","text-small muted; ")},m(a,T){ke(a,h,T),P(h,f),P(f,y),P(h,v),P(h,_)},p(a,T){T[0]&8192&&gt(_,a[13])},d(a){a&&C(h)}}}function V1(c){let h,f,y=c[1]&&c[2]&&Hy(c);return{c(){y&&y.c(),h=ha()},l(v){y&&y.l(v),h=ha()},m(v,_){y&&y.m(v,_),ke(v,h,_),f=!0},p(v,_){v[1]&&v[2]?y?(y.p(v,_),_[0]&6&&mt(y,1)):(y=Hy(v),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(El(),xt(y,1,1,()=>{y=null}),Sl())},i(v){f||(mt(y),f=!0)},o(v){xt(y),f=!1},d(v){y&&y.d(v),v&&C(h)}}}function N1(c){let h,f,y,v,_,a,T,k,B,R,N,F,le,ee,ze,ve;return document.title=h=c[1].name+" Census Data",le=new r1({}),ze=new Hg({props:{column:"wide",$$slots:{default:[V1]},$$scope:{ctx:c}}}),{c(){f=K("meta"),y=K("meta"),_=K("meta"),a=K("meta"),k=K("meta"),R=K("meta"),F=Le(),Tr(le.$$.fragment),ee=Le(),Tr(ze.$$.fragment),this.h()},l(Te){const Ne=Zg('[data-svelte="svelte-14ulspn"]',document.head);f=H(Ne,"META",{name:!0,content:!0}),y=H(Ne,"META",{property:!0,content:!0}),_=H(Ne,"META",{property:!0,content:!0}),a=H(Ne,"META",{property:!0,content:!0}),k=H(Ne,"META",{property:!0,content:!0}),R=H(Ne,"META",{name:!0,content:!0}),Ne.forEach(C),F=Re(Te),Ar(le.$$.fragment,Te),ee=Re(Te),Ar(ze.$$.fragment,Te),this.h()},h(){z(f,"name","description"),z(f,"content",""),z(y,"property","og:title"),z(y,"content",v=c[1].name+" Census Data"),z(_,"property","og:type"),z(_,"content","website"),z(a,"property","og:url"),z(a,"content",T=pd.base+"/"+c[1].code+"/"),z(k,"property","og:description"),z(k,"content",B="Explore census data for "+c[1].name+"."),z(R,"name","description"),z(R,"content",N="Explore census data for "+c[1].name+".")},m(Te,Ne){P(document.head,f),P(document.head,y),P(document.head,_),P(document.head,a),P(document.head,k),P(document.head,R),ke(Te,F,Ne),zr(le,Te,Ne),ke(Te,ee,Ne),zr(ze,Te,Ne),ve=!0},p(Te,Ne){(!ve||Ne[0]&2)&&h!==(h=Te[1].name+" Census Data")&&(document.title=h),(!ve||Ne[0]&2&&v!==(v=Te[1].name+" Census Data"))&&z(y,"content",v),(!ve||Ne[0]&2&&T!==(T=pd.base+"/"+Te[1].code+"/"))&&z(a,"content",T),(!ve||Ne[0]&2&&B!==(B="Explore census data for "+Te[1].name+"."))&&z(k,"content",B),(!ve||Ne[0]&2&&N!==(N="Explore census data for "+Te[1].name+"."))&&z(R,"content",N);const zt={};Ne[0]&16383|Ne[1]&16777216&&(zt.$$scope={dirty:Ne,ctx:Te}),ze.$set(zt)},i(Te){ve||(mt(le.$$.fragment,Te),mt(ze.$$.fragment,Te),ve=!0)},o(Te){xt(le.$$.fragment,Te),xt(ze.$$.fragment,Te),ve=!1},d(Te){C(f),C(y),C(_),C(a),C(k),C(R),Te&&C(F),Pr(le,Te),Te&&C(ee),Pr(ze,Te)}}}const H1=!0;async function lg(c,h){return await(await h(pd.app_json_data+c+".json")).json()}async function X1({params:c,fetch:h}){let f=c.code,y=await i_(pd.search_data,h),v={};y.forEach(k=>v[k.code]=k.name),y.forEach(k=>{k.typepl=Yn[k.type].pl,k.typenm=Yn[k.type].name,k.typestr=v[k.parent]?`${Yn[k.type].name} within ${v[k.parent]}`:""});let _=y.sort((k,B)=>k.name.localeCompare(B.name)),a=await lg("N92000002",h),T=await lg(f,h);return{props:{search_data:_,place:T,ni:a}}}function U1(c,h,f){let y,v,_,a,T,{search_data:k,place:B,ni:R}=h,N,F,le=null,ee=!1,ze={selected:null,type:null,childType:null,highlighted:[],hovered:null},ve={};Object.keys(Kc).forEach(kt=>f(9,ve[kt]=!1,ve));function Te(kt){const Ct=(ar,si)=>ar+si;let ei=kt[0],Sr="perc",br=B.data[ei][Sr][2021],sn=B.data[ei][Sr][2011],oi=R.data[ei][Sr][2021],wi=Um[ei].map(ar=>ar.category),Or=Um[ei].map(ar=>ar.label?ar.label:ar.category);return wi.map((ar,si)=>Array.isArray(ar)?{x:Or[si],y:ar.map(li=>br[li]).reduce(Ct,0),ni:ar.map(li=>oi[li]).reduce(Ct,0),prev:ar.map(li=>sn[li]).reduce(Ct,0)}:{x:Or[si],y:br[ar],ni:oi[ar],prev:sn[ar]})}function Ne(kt){le&&le.fitBounds(kt,{padding:20})}function zt(kt){let Ct=JSON.parse(JSON.stringify(ze)),ei=kt.code,Sr=kt.type,br=kt.children[0]?kt.children.map(hr=>hr.code):[],sn=kt.type=="rgn"?"cty":br[0]?kt.children[0].type:null;f(8,ze.selected=ei,ze),f(8,ze.type=Sr,ze),f(8,ze.childType=sn,ze),f(8,ze.highlighted=br,ze);let oi=Object.keys(Kc),wi=["fill-color","fill-opacity"],Or=["line-color","line-width","line-opacity"];le&&(ze.type!=Ct.type||ze.childType!=Ct.childType)&&(oi.forEach(hr=>{let ar=hr==Sr||sn&&hr==sn?"visible":"none";le.setLayoutProperty(hr+"-fill","visibility",ar),le.setLayoutProperty(hr+"-bounds","visibility",ar),kt.parents[0]&&le.setLayoutProperty(hr+"-self","visibility",ar),f(9,ve[hr]=hr==sn,ve)}),kt.parents[0]&&(wi.forEach(hr=>le.setPaintProperty(Sr+"-fill",hr,Ka[br[0]?"fill-active":"fill-self"][hr])),Or.forEach(hr=>{le.setPaintProperty(Sr+"-bounds",hr,Ka["line-active"][hr]),le.setPaintProperty(Sr+"-self",hr,Ka["line-self"][hr])})),sn&&(wi.forEach(hr=>le.setPaintProperty(sn+"-fill",hr,Ka["fill-child"][hr])),Or.forEach(hr=>le.setPaintProperty(sn+"-bounds",hr,Ka["line-child"][hr]))))}function Dt(kt){zt(kt),Ne(kt.bounds)}function ct(kt){Gm(`${Ju}/${kt.detail.code}/`,{noscroll:!0})}function $e(kt){Gm(`${Ju}/${kt.detail.value}/`,{noscroll:!0})}function wr(){f(6,F=N<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const cr=()=>f(5,a=!0),Wt=()=>f(4,ee=!1),wt=()=>f(11,_=!1),vt=()=>f(5,a=!0),vr=()=>f(4,ee=!1),Bt=()=>f(11,_=!1),Er=()=>f(11,_=!0),Je=()=>f(5,a=!1),Qt=()=>f(4,ee=!1),Zr=()=>f(4,ee=!0),Qr=()=>f(5,a=!1),yr=()=>f(11,_=!1),pt=()=>f(4,ee=!1),rt=()=>f(5,a=!0),nr=()=>f(11,_=!1);function Bi(kt){le=kt,f(7,le)}function Qn(){N=this.clientWidth,f(3,N)}function Ti(){N=this.clientWidth,f(3,N)}function xi(){N=this.clientWidth,f(3,N)}function $r(){N=this.clientWidth,f(3,N)}function Xi(){N=this.clientWidth,f(3,N)}function Jt(){N=this.clientWidth,f(3,N)}function Ai(){N=this.clientWidth,f(3,N)}function Ra(){N=this.clientWidth,f(3,N)}return c.$$set=kt=>{"search_data"in kt&&f(0,k=kt.search_data),"place"in kt&&f(1,B=kt.place),"ni"in kt&&f(2,R=kt.ni)},c.$$.update=()=>{c.$$.dirty[0]&8&&N&&wr(),c.$$.dirty[0]&18&&f(13,y=ee?"Same area 2011":B&&B.parents[0]?"NI 2021":null),c.$$.dirty[0]&50&&f(12,v=a?null:ee?"prev":!ee&&B.type!="ni"?"ni":null),c.$$.dirty[0]&2&&B&&Dt(B),c.$$.dirty[0]&2&&f(10,T=!(B.type!="ni"&&B.type!="lgd"))},f(5,a=!0),f(11,_=!1),[k,B,R,N,ee,a,F,le,ze,ve,T,_,v,y,Te,ct,$e,cr,Wt,wt,vt,vr,Bt,Er,Je,Qt,Zr,Qr,yr,pt,rt,nr,Bi,Qn,Ti,xi,$r,Xi,Jt,Ai,Ra]}class W1 extends ws{constructor(h){super(),Es(this,h,U1,N1,Ss,{search_data:0,place:1,ni:2},null,[-1,-1])}}export{W1 as default,X1 as load,H1 as prerender};
