import{S as Na,i as Va,s as Ua,e as Xi,b as xe,f as rt,g as Rn,t as wt,d as Bn,h as M,o as $m,U as Rr,V as bi,j as ey,O as Pu,l as X,m as W,n as Q,p as L,W as zs,q as he,X as Ps,Q as Cu,R as Mu,T as Du,Y as Ts,Z as ca,_ as ha,I as P,K as zc,E as _a,$ as Ro,J as Jr,r as pe,u as fe,v as Ht,w as Fr,x as Nr,y as Vr,B as Ur,a as Re,c as Be,M as Li,G as Ol,a0 as ty,a1 as bd,P as n_,a2 as a_,a3 as ry,a4 as iy,a5 as o_,a6 as Mh,C as Qs,z as $s,A as el}from"../../chunks/index-50f9e43e.js";import{a as Sc,u as Dh,S as s_,m as to,c as xd,b as l_,d as wi,e as Lh}from"../../chunks/Section-3185f5c3.js";import{b as as}from"../../chunks/paths-1c47712a.js";import{c as Fl,w as xi,d as zn}from"../../chunks/singletons-2c3f9d32.js";/* empty css                                                                 */var wd={},Tp={},Ap=34,xc=10,zp=13;function ny(l){return new Function("d","return {"+l.map(function(c,f){return JSON.stringify(c)+": d["+f+'] || ""'}).join(",")+"}")}function u_(l,c){var f=ny(l);return function(m,_){return c(f(m),_,l)}}function Ed(l){var c=Object.create(null),f=[];return l.forEach(function(m){for(var _ in m)_ in c||f.push(c[_]=_)}),f}function eo(l,c){var f=l+"",m=f.length;return m<c?new Array(c-m+1).join(0)+f:f}function c_(l){return l<0?"-"+eo(-l,6):l>9999?"+"+eo(l,6):eo(l,4)}function h_(l){var c=l.getUTCHours(),f=l.getUTCMinutes(),m=l.getUTCSeconds(),_=l.getUTCMilliseconds();return isNaN(l)?"Invalid Date":c_(l.getUTCFullYear())+"-"+eo(l.getUTCMonth()+1,2)+"-"+eo(l.getUTCDate(),2)+(_?"T"+eo(c,2)+":"+eo(f,2)+":"+eo(m,2)+"."+eo(_,3)+"Z":m?"T"+eo(c,2)+":"+eo(f,2)+":"+eo(m,2)+"Z":f||c?"T"+eo(c,2)+":"+eo(f,2)+"Z":"")}function p_(l){var c=new RegExp('["'+l+`
\r]`),f=l.charCodeAt(0);function m(O,D){var q,se,Te=_(O,function(_e,ke){if(q)return q(_e,ke-1);se=_e,q=D?u_(_e,D):ny(_e)});return Te.columns=se||[],Te}function _(O,D){var q=[],se=O.length,Te=0,_e=0,ke,Ce=se<=0,mt=!1;O.charCodeAt(se-1)===xc&&--se,O.charCodeAt(se-1)===zp&&--se;function at(){if(Ce)return Tp;if(mt)return mt=!1,wd;var Ge,Xt=Te,yt;if(O.charCodeAt(Xt)===Ap){for(;Te++<se&&O.charCodeAt(Te)!==Ap||O.charCodeAt(++Te)===Ap;);return(Ge=Te)>=se?Ce=!0:(yt=O.charCodeAt(Te++))===xc?mt=!0:yt===zp&&(mt=!0,O.charCodeAt(Te)===xc&&++Te),O.slice(Xt+1,Ge-1).replace(/""/g,'"')}for(;Te<se;){if((yt=O.charCodeAt(Ge=Te++))===xc)mt=!0;else if(yt===zp)mt=!0,O.charCodeAt(Te)===xc&&++Te;else if(yt!==f)continue;return O.slice(Xt,Ge)}return Ce=!0,O.slice(Xt,se)}for(;(ke=at())!==Tp;){for(var Ye=[];ke!==wd&&ke!==Tp;)Ye.push(ke),ke=at();D&&(Ye=D(Ye,_e++))==null||q.push(Ye)}return q}function v(O,D){return O.map(function(q){return D.map(function(se){return z(q[se])}).join(l)})}function a(O,D){return D==null&&(D=Ed(O)),[D.map(z).join(l)].concat(v(O,D)).join(`
`)}function I(O,D){return D==null&&(D=Ed(O)),v(O,D).join(`
`)}function k(O){return O.map(C).join(`
`)}function C(O){return O.map(z).join(l)}function z(O){return O==null?"":O instanceof Date?h_(O):c.test(O+="")?'"'+O.replace(/"/g,'""')+'"':O}return{parse:m,parseRows:_,format:a,formatBody:I,formatRows:k,formatRow:C,formatValue:z}}var f_=p_(","),d_=f_.parse;function m_(l){for(var c in l){var f=l[c].trim(),m,_;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(m=+f))f=m;else if(_=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))y_&&!!_[4]&&!_[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;l[c]=f}return l}const y_=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function g_(l,c=window.fetch){let m=await(await c(l)).text();return await d_(m,m_)}function tl(l){let c=Math.round(l)%10;return l==11?"th":c==1?"st":c==2?"nd":c==3?"rd":"th"}function Rh(l){return l>0?"increase":l<0?"decrease":"nochange"}function Wr(l,c="",f=0){return l!=0?Math.abs(l).toFixed(f)+c:c=="pp"?"n/c":"No change"}function Bh(l,c="",f=0){return l!=0?Math.abs(l).toFixed(f)+c:c=="pp"?"n/c":"<1%)"}Fl.disable_scroll_handling;const Sd=Fl.goto;Fl.invalidate;Fl.prefetch;Fl.prefetch_routes;Fl.before_navigate;Fl.after_navigate;function __(l){return l===0?!0:l}function Ys(l){return __(l)?Array.isArray(l)?c=>l.map(f=>typeof f!="function"?c[f]:f(c)):typeof l!="function"?c=>c[l]:l:null}function v_(l){const c={};for(const f of l){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":m,"1":_}=f;Object.defineProperty(c,m,{configurable:!0,enumerable:!0,writable:!0,value:_})}return c}function Pp(l,c={}){return v_(Object.entries(l).filter(([f,m])=>m!==void 0&&c[f]===void 0))}function b_(l,c){if(!Array.isArray(l))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof l}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(c)||c===void 0||c===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},m=Object.keys(c),_=m.length;let v,a,I,k,C,z,O,D;const q=l.length;for(v=0;v<_;v+=1){for(k=m[v],O=c[k],C=null,z=null,a=0;a<q;a+=1)if(D=O(l[a]),Array.isArray(D)){const se=D.length;for(I=0;I<se;I+=1)D[I]!==void 0&&D[I]!==null&&Number.isNaN(D[I])===!1&&((C===null||D[I]<C)&&(C=D[I]),(z===null||D[I]>z)&&(z=D[I]))}else D!=null&&Number.isNaN(D)===!1&&((C===null||D<C)&&(C=D),(z===null||D>z)&&(z=D));f[k]=[C,z]}return f}function ay(l=[],c){return Array.isArray(c)===!0?c.map((f,m)=>f===null?l[m]:f):l}function xh(l){return function([f,m]){return f?ay(f[l],m):m}}function Ph(l,c){return l==null||c==null?NaN:l<c?-1:l>c?1:l>=c?0:NaN}function x_(l,c){return l==null||c==null?NaN:c<l?-1:c>l?1:c>=l?0:NaN}function oy(l){let c,f,m;l.length!==2?(c=Ph,f=(I,k)=>Ph(l(I),k),m=(I,k)=>l(I)-k):(c=l===Ph||l===x_?l:w_,f=l,m=l);function _(I,k,C=0,z=I.length){if(C<z){if(c(k,k)!==0)return z;do{const O=C+z>>>1;f(I[O],k)<0?C=O+1:z=O}while(C<z)}return C}function v(I,k,C=0,z=I.length){if(C<z){if(c(k,k)!==0)return z;do{const O=C+z>>>1;f(I[O],k)<=0?C=O+1:z=O}while(C<z)}return C}function a(I,k,C=0,z=I.length){const O=_(I,k,C,z-1);return O>C&&m(I[O-1],k)>-m(I[O],k)?O-1:O}return{left:_,center:a,right:v}}function w_(){return 0}function E_(l){return l===null?NaN:+l}const S_=oy(Ph),k_=S_.right;oy(E_).center;const I_=k_;class kd extends Map{constructor(c,f=z_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),c!=null)for(const[m,_]of c)this.set(m,_)}get(c){return super.get(Id(this,c))}has(c){return super.has(Id(this,c))}set(c,f){return super.set(T_(this,c),f)}delete(c){return super.delete(A_(this,c))}}function Id({_intern:l,_key:c},f){const m=c(f);return l.has(m)?l.get(m):f}function T_({_intern:l,_key:c},f){const m=c(f);return l.has(m)?l.get(m):(l.set(m,f),f)}function A_({_intern:l,_key:c},f){const m=c(f);return l.has(m)&&(f=l.get(m),l.delete(m)),f}function z_(l){return l!==null&&typeof l=="object"?l.valueOf():l}var Bp=Math.sqrt(50),Op=Math.sqrt(10),Fp=Math.sqrt(2);function P_(l,c,f){var m,_=-1,v,a,I;if(c=+c,l=+l,f=+f,l===c&&f>0)return[l];if((m=c<l)&&(v=l,l=c,c=v),(I=sy(l,c,f))===0||!isFinite(I))return[];if(I>0){let k=Math.round(l/I),C=Math.round(c/I);for(k*I<l&&++k,C*I>c&&--C,a=new Array(v=C-k+1);++_<v;)a[_]=(k+_)*I}else{I=-I;let k=Math.round(l*I),C=Math.round(c*I);for(k/I<l&&++k,C/I>c&&--C,a=new Array(v=C-k+1);++_<v;)a[_]=(k+_)/I}return m&&a.reverse(),a}function sy(l,c,f){var m=(c-l)/Math.max(0,f),_=Math.floor(Math.log(m)/Math.LN10),v=m/Math.pow(10,_);return _>=0?(v>=Bp?10:v>=Op?5:v>=Fp?2:1)*Math.pow(10,_):-Math.pow(10,-_)/(v>=Bp?10:v>=Op?5:v>=Fp?2:1)}function C_(l,c,f){var m=Math.abs(c-l)/Math.max(0,f),_=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),v=m/_;return v>=Bp?_*=10:v>=Op?_*=5:v>=Fp&&(_*=2),c<l?-_:_}function M_(l,c,f){l=+l,c=+c,f=(_=arguments.length)<2?(c=l,l=0,1):_<3?1:+f;for(var m=-1,_=Math.max(0,Math.ceil((c-l)/f))|0,v=new Array(_);++m<_;)v[m]=l+m*f;return v}function jh(l,c){switch(arguments.length){case 0:break;case 1:this.range(l);break;default:this.range(c).domain(l);break}return this}const Td=Symbol("implicit");function ly(){var l=new kd,c=[],f=[],m=Td;function _(v){let a=l.get(v);if(a===void 0){if(m!==Td)return m;l.set(v,a=c.push(v)-1)}return f[a%f.length]}return _.domain=function(v){if(!arguments.length)return c.slice();c=[],l=new kd;for(const a of v)l.has(a)||l.set(a,c.push(a)-1);return _},_.range=function(v){return arguments.length?(f=Array.from(v),_):f.slice()},_.unknown=function(v){return arguments.length?(m=v,_):m},_.copy=function(){return ly(c,f).unknown(m)},jh.apply(_,arguments),_}function uy(){var l=ly().unknown(void 0),c=l.domain,f=l.range,m=0,_=1,v,a,I=!1,k=0,C=0,z=.5;delete l.unknown;function O(){var D=c().length,q=_<m,se=q?_:m,Te=q?m:_;v=(Te-se)/Math.max(1,D-k+C*2),I&&(v=Math.floor(v)),se+=(Te-se-v*(D-k))*z,a=v*(1-k),I&&(se=Math.round(se),a=Math.round(a));var _e=M_(D).map(function(ke){return se+v*ke});return f(q?_e.reverse():_e)}return l.domain=function(D){return arguments.length?(c(D),O()):c()},l.range=function(D){return arguments.length?([m,_]=D,m=+m,_=+_,O()):[m,_]},l.rangeRound=function(D){return[m,_]=D,m=+m,_=+_,I=!0,O()},l.bandwidth=function(){return a},l.step=function(){return v},l.round=function(D){return arguments.length?(I=!!D,O()):I},l.padding=function(D){return arguments.length?(k=Math.min(1,C=+D),O()):k},l.paddingInner=function(D){return arguments.length?(k=Math.min(1,D),O()):k},l.paddingOuter=function(D){return arguments.length?(C=+D,O()):C},l.align=function(D){return arguments.length?(z=Math.max(0,Math.min(1,D)),O()):z},l.copy=function(){return uy(c(),[m,_]).round(I).paddingInner(k).paddingOuter(C).align(z)},jh.apply(O(),arguments)}function Zp(l,c,f){l.prototype=c.prototype=f,f.constructor=l}function cy(l,c){var f=Object.create(l.prototype);for(var m in c)f[m]=c[m];return f}function Pc(){}var Ic=.7,Oh=1/Ic,Au="\\s*([+-]?\\d+)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D_=/^#([0-9a-f]{3,8})$/,L_=new RegExp(`^rgb\\(${Au},${Au},${Au}\\)$`),R_=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),B_=new RegExp(`^rgba\\(${Au},${Au},${Au},${Tc}\\)$`),O_=new RegExp(`^rgba\\(${ns},${ns},${ns},${Tc}\\)$`),F_=new RegExp(`^hsl\\(${Tc},${ns},${ns}\\)$`),N_=new RegExp(`^hsla\\(${Tc},${ns},${ns},${Tc}\\)$`),Ad={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zp(Pc,Ac,{copy(l){return Object.assign(new this.constructor,this,l)},displayable(){return this.rgb().displayable()},hex:zd,formatHex:zd,formatHex8:V_,formatHsl:U_,formatRgb:Pd,toString:Pd});function zd(){return this.rgb().formatHex()}function V_(){return this.rgb().formatHex8()}function U_(){return hy(this).formatHsl()}function Pd(){return this.rgb().formatRgb()}function Ac(l){var c,f;return l=(l+"").trim().toLowerCase(),(c=D_.exec(l))?(f=c[1].length,c=parseInt(c[1],16),f===6?Cd(c):f===3?new ro(c>>8&15|c>>4&240,c>>4&15|c&240,(c&15)<<4|c&15,1):f===8?wh(c>>24&255,c>>16&255,c>>8&255,(c&255)/255):f===4?wh(c>>12&15|c>>8&240,c>>8&15|c>>4&240,c>>4&15|c&240,((c&15)<<4|c&15)/255):null):(c=L_.exec(l))?new ro(c[1],c[2],c[3],1):(c=R_.exec(l))?new ro(c[1]*255/100,c[2]*255/100,c[3]*255/100,1):(c=B_.exec(l))?wh(c[1],c[2],c[3],c[4]):(c=O_.exec(l))?wh(c[1]*255/100,c[2]*255/100,c[3]*255/100,c[4]):(c=F_.exec(l))?Ld(c[1],c[2]/100,c[3]/100,1):(c=N_.exec(l))?Ld(c[1],c[2]/100,c[3]/100,c[4]):Ad.hasOwnProperty(l)?Cd(Ad[l]):l==="transparent"?new ro(NaN,NaN,NaN,0):null}function Cd(l){return new ro(l>>16&255,l>>8&255,l&255,1)}function wh(l,c,f,m){return m<=0&&(l=c=f=NaN),new ro(l,c,f,m)}function j_(l){return l instanceof Pc||(l=Ac(l)),l?(l=l.rgb(),new ro(l.r,l.g,l.b,l.opacity)):new ro}function Np(l,c,f,m){return arguments.length===1?j_(l):new ro(l,c,f,m==null?1:m)}function ro(l,c,f,m){this.r=+l,this.g=+c,this.b=+f,this.opacity=+m}Zp(ro,Np,cy(Pc,{brighter(l){return l=l==null?Oh:Math.pow(Oh,l),new ro(this.r*l,this.g*l,this.b*l,this.opacity)},darker(l){return l=l==null?Ic:Math.pow(Ic,l),new ro(this.r*l,this.g*l,this.b*l,this.opacity)},rgb(){return this},clamp(){return new ro(Bl(this.r),Bl(this.g),Bl(this.b),Fh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Md,formatHex:Md,formatHex8:q_,formatRgb:Dd,toString:Dd}));function Md(){return`#${Rl(this.r)}${Rl(this.g)}${Rl(this.b)}`}function q_(){return`#${Rl(this.r)}${Rl(this.g)}${Rl(this.b)}${Rl((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dd(){const l=Fh(this.opacity);return`${l===1?"rgb(":"rgba("}${Bl(this.r)}, ${Bl(this.g)}, ${Bl(this.b)}${l===1?")":`, ${l})`}`}function Fh(l){return isNaN(l)?1:Math.max(0,Math.min(1,l))}function Bl(l){return Math.max(0,Math.min(255,Math.round(l)||0))}function Rl(l){return l=Bl(l),(l<16?"0":"")+l.toString(16)}function Ld(l,c,f,m){return m<=0?l=c=f=NaN:f<=0||f>=1?l=c=NaN:c<=0&&(l=NaN),new Lo(l,c,f,m)}function hy(l){if(l instanceof Lo)return new Lo(l.h,l.s,l.l,l.opacity);if(l instanceof Pc||(l=Ac(l)),!l)return new Lo;if(l instanceof Lo)return l;l=l.rgb();var c=l.r/255,f=l.g/255,m=l.b/255,_=Math.min(c,f,m),v=Math.max(c,f,m),a=NaN,I=v-_,k=(v+_)/2;return I?(c===v?a=(f-m)/I+(f<m)*6:f===v?a=(m-c)/I+2:a=(c-f)/I+4,I/=k<.5?v+_:2-v-_,a*=60):I=k>0&&k<1?0:a,new Lo(a,I,k,l.opacity)}function Z_(l,c,f,m){return arguments.length===1?hy(l):new Lo(l,c,f,m==null?1:m)}function Lo(l,c,f,m){this.h=+l,this.s=+c,this.l=+f,this.opacity=+m}Zp(Lo,Z_,cy(Pc,{brighter(l){return l=l==null?Oh:Math.pow(Oh,l),new Lo(this.h,this.s,this.l*l,this.opacity)},darker(l){return l=l==null?Ic:Math.pow(Ic,l),new Lo(this.h,this.s,this.l*l,this.opacity)},rgb(){var l=this.h%360+(this.h<0)*360,c=isNaN(l)||isNaN(this.s)?0:this.s,f=this.l,m=f+(f<.5?f:1-f)*c,_=2*f-m;return new ro(Cp(l>=240?l-240:l+120,_,m),Cp(l,_,m),Cp(l<120?l+240:l-120,_,m),this.opacity)},clamp(){return new Lo(Rd(this.h),Eh(this.s),Eh(this.l),Fh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const l=Fh(this.opacity);return`${l===1?"hsl(":"hsla("}${Rd(this.h)}, ${Eh(this.s)*100}%, ${Eh(this.l)*100}%${l===1?")":`, ${l})`}`}}));function Rd(l){return l=(l||0)%360,l<0?l+360:l}function Eh(l){return Math.max(0,Math.min(1,l||0))}function Cp(l,c,f){return(l<60?c+(f-c)*l/60:l<180?f:l<240?c+(f-c)*(240-l)/60:c)*255}const Gp=l=>()=>l;function G_(l,c){return function(f){return l+f*c}}function K_(l,c,f){return l=Math.pow(l,f),c=Math.pow(c,f)-l,f=1/f,function(m){return Math.pow(l+m*c,f)}}function H_(l){return(l=+l)==1?py:function(c,f){return f-c?K_(c,f,l):Gp(isNaN(c)?f:c)}}function py(l,c){var f=c-l;return f?G_(l,f):Gp(isNaN(l)?c:l)}const Bd=function l(c){var f=H_(c);function m(_,v){var a=f((_=Np(_)).r,(v=Np(v)).r),I=f(_.g,v.g),k=f(_.b,v.b),C=py(_.opacity,v.opacity);return function(z){return _.r=a(z),_.g=I(z),_.b=k(z),_.opacity=C(z),_+""}}return m.gamma=l,m}(1);function X_(l,c){c||(c=[]);var f=l?Math.min(c.length,l.length):0,m=c.slice(),_;return function(v){for(_=0;_<f;++_)m[_]=l[_]*(1-v)+c[_]*v;return m}}function W_(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function J_(l,c){var f=c?c.length:0,m=l?Math.min(f,l.length):0,_=new Array(m),v=new Array(f),a;for(a=0;a<m;++a)_[a]=Kp(l[a],c[a]);for(;a<f;++a)v[a]=c[a];return function(I){for(a=0;a<m;++a)v[a]=_[a](I);return v}}function Y_(l,c){var f=new Date;return l=+l,c=+c,function(m){return f.setTime(l*(1-m)+c*m),f}}function Nh(l,c){return l=+l,c=+c,function(f){return l*(1-f)+c*f}}function Q_(l,c){var f={},m={},_;(l===null||typeof l!="object")&&(l={}),(c===null||typeof c!="object")&&(c={});for(_ in c)_ in l?f[_]=Kp(l[_],c[_]):m[_]=c[_];return function(v){for(_ in f)m[_]=f[_](v);return m}}var Vp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mp=new RegExp(Vp.source,"g");function $_(l){return function(){return l}}function ev(l){return function(c){return l(c)+""}}function tv(l,c){var f=Vp.lastIndex=Mp.lastIndex=0,m,_,v,a=-1,I=[],k=[];for(l=l+"",c=c+"";(m=Vp.exec(l))&&(_=Mp.exec(c));)(v=_.index)>f&&(v=c.slice(f,v),I[a]?I[a]+=v:I[++a]=v),(m=m[0])===(_=_[0])?I[a]?I[a]+=_:I[++a]=_:(I[++a]=null,k.push({i:a,x:Nh(m,_)})),f=Mp.lastIndex;return f<c.length&&(v=c.slice(f),I[a]?I[a]+=v:I[++a]=v),I.length<2?k[0]?ev(k[0].x):$_(c):(c=k.length,function(C){for(var z=0,O;z<c;++z)I[(O=k[z]).i]=O.x(C);return I.join("")})}function Kp(l,c){var f=typeof c,m;return c==null||f==="boolean"?Gp(c):(f==="number"?Nh:f==="string"?(m=Ac(c))?(c=m,Bd):tv:c instanceof Ac?Bd:c instanceof Date?Y_:W_(c)?X_:Array.isArray(c)?J_:typeof c.valueOf!="function"&&typeof c.toString!="function"||isNaN(c)?Q_:Nh)(l,c)}function rv(l,c){return l=+l,c=+c,function(f){return Math.round(l*(1-f)+c*f)}}function iv(l){return function(){return l}}function nv(l){return+l}var Od=[0,1];function is(l){return l}function Up(l,c){return(c-=l=+l)?function(f){return(f-l)/c}:iv(isNaN(c)?NaN:.5)}function av(l,c){var f;return l>c&&(f=l,l=c,c=f),function(m){return Math.max(l,Math.min(c,m))}}function ov(l,c,f){var m=l[0],_=l[1],v=c[0],a=c[1];return _<m?(m=Up(_,m),v=f(a,v)):(m=Up(m,_),v=f(v,a)),function(I){return v(m(I))}}function sv(l,c,f){var m=Math.min(l.length,c.length)-1,_=new Array(m),v=new Array(m),a=-1;for(l[m]<l[0]&&(l=l.slice().reverse(),c=c.slice().reverse());++a<m;)_[a]=Up(l[a],l[a+1]),v[a]=f(c[a],c[a+1]);return function(I){var k=I_(l,I,1,m)-1;return v[k](_[k](I))}}function fy(l,c){return c.domain(l.domain()).range(l.range()).interpolate(l.interpolate()).clamp(l.clamp()).unknown(l.unknown())}function dy(){var l=Od,c=Od,f=Kp,m,_,v,a=is,I,k,C;function z(){var D=Math.min(l.length,c.length);return a!==is&&(a=av(l[0],l[D-1])),I=D>2?sv:ov,k=C=null,O}function O(D){return D==null||isNaN(D=+D)?v:(k||(k=I(l.map(m),c,f)))(m(a(D)))}return O.invert=function(D){return a(_((C||(C=I(c,l.map(m),Nh)))(D)))},O.domain=function(D){return arguments.length?(l=Array.from(D,nv),z()):l.slice()},O.range=function(D){return arguments.length?(c=Array.from(D),z()):c.slice()},O.rangeRound=function(D){return c=Array.from(D),f=rv,z()},O.clamp=function(D){return arguments.length?(a=D?!0:is,z()):a!==is},O.interpolate=function(D){return arguments.length?(f=D,z()):f},O.unknown=function(D){return arguments.length?(v=D,O):v},function(D,q){return m=D,_=q,z()}}function lv(){return dy()(is,is)}function uv(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)}function Vh(l,c){if((f=(l=c?l.toExponential(c-1):l.toExponential()).indexOf("e"))<0)return null;var f,m=l.slice(0,f);return[m.length>1?m[0]+m.slice(2):m,+l.slice(f+1)]}function Lu(l){return l=Vh(Math.abs(l)),l?l[1]:NaN}function cv(l,c){return function(f,m){for(var _=f.length,v=[],a=0,I=l[0],k=0;_>0&&I>0&&(k+I+1>m&&(I=Math.max(1,m-k)),v.push(f.substring(_-=I,_+I)),!((k+=I+1)>m));)I=l[a=(a+1)%l.length];return v.reverse().join(c)}}function hv(l){return function(c){return c.replace(/[0-9]/g,function(f){return l[+f]})}}var pv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uh(l){if(!(c=pv.exec(l)))throw new Error("invalid format: "+l);var c;return new Hp({fill:c[1],align:c[2],sign:c[3],symbol:c[4],zero:c[5],width:c[6],comma:c[7],precision:c[8]&&c[8].slice(1),trim:c[9],type:c[10]})}Uh.prototype=Hp.prototype;function Hp(l){this.fill=l.fill===void 0?" ":l.fill+"",this.align=l.align===void 0?">":l.align+"",this.sign=l.sign===void 0?"-":l.sign+"",this.symbol=l.symbol===void 0?"":l.symbol+"",this.zero=!!l.zero,this.width=l.width===void 0?void 0:+l.width,this.comma=!!l.comma,this.precision=l.precision===void 0?void 0:+l.precision,this.trim=!!l.trim,this.type=l.type===void 0?"":l.type+""}Hp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fv(l){e:for(var c=l.length,f=1,m=-1,_;f<c;++f)switch(l[f]){case".":m=_=f;break;case"0":m===0&&(m=f),_=f;break;default:if(!+l[f])break e;m>0&&(m=0);break}return m>0?l.slice(0,m)+l.slice(_+1):l}var my;function dv(l,c){var f=Vh(l,c);if(!f)return l+"";var m=f[0],_=f[1],v=_-(my=Math.max(-8,Math.min(8,Math.floor(_/3)))*3)+1,a=m.length;return v===a?m:v>a?m+new Array(v-a+1).join("0"):v>0?m.slice(0,v)+"."+m.slice(v):"0."+new Array(1-v).join("0")+Vh(l,Math.max(0,c+v-1))[0]}function Fd(l,c){var f=Vh(l,c);if(!f)return l+"";var m=f[0],_=f[1];return _<0?"0."+new Array(-_).join("0")+m:m.length>_+1?m.slice(0,_+1)+"."+m.slice(_+1):m+new Array(_-m.length+2).join("0")}const Nd={"%":(l,c)=>(l*100).toFixed(c),b:l=>Math.round(l).toString(2),c:l=>l+"",d:uv,e:(l,c)=>l.toExponential(c),f:(l,c)=>l.toFixed(c),g:(l,c)=>l.toPrecision(c),o:l=>Math.round(l).toString(8),p:(l,c)=>Fd(l*100,c),r:Fd,s:dv,X:l=>Math.round(l).toString(16).toUpperCase(),x:l=>Math.round(l).toString(16)};function Vd(l){return l}var Ud=Array.prototype.map,jd=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function mv(l){var c=l.grouping===void 0||l.thousands===void 0?Vd:cv(Ud.call(l.grouping,Number),l.thousands+""),f=l.currency===void 0?"":l.currency[0]+"",m=l.currency===void 0?"":l.currency[1]+"",_=l.decimal===void 0?".":l.decimal+"",v=l.numerals===void 0?Vd:hv(Ud.call(l.numerals,String)),a=l.percent===void 0?"%":l.percent+"",I=l.minus===void 0?"\u2212":l.minus+"",k=l.nan===void 0?"NaN":l.nan+"";function C(O){O=Uh(O);var D=O.fill,q=O.align,se=O.sign,Te=O.symbol,_e=O.zero,ke=O.width,Ce=O.comma,mt=O.precision,at=O.trim,Ye=O.type;Ye==="n"?(Ce=!0,Ye="g"):Nd[Ye]||(mt===void 0&&(mt=12),at=!0,Ye="g"),(_e||D==="0"&&q==="=")&&(_e=!0,D="0",q="=");var Ge=Te==="$"?f:Te==="#"&&/[boxX]/.test(Ye)?"0"+Ye.toLowerCase():"",Xt=Te==="$"?m:/[%p]/.test(Ye)?a:"",yt=Nd[Ye],pt=/[defgprs%]/.test(Ye);mt=mt===void 0?6:/[gprs]/.test(Ye)?Math.max(1,Math.min(21,mt)):Math.max(0,Math.min(20,mt));function lt(Ie){var it=Ge,nt=Xt,Qe,De,Ve;if(Ye==="c")nt=yt(Ie)+nt,Ie="";else{Ie=+Ie;var st=Ie<0||1/Ie<0;if(Ie=isNaN(Ie)?k:yt(Math.abs(Ie),mt),at&&(Ie=fv(Ie)),st&&+Ie==0&&se!=="+"&&(st=!1),it=(st?se==="("?se:I:se==="-"||se==="("?"":se)+it,nt=(Ye==="s"?jd[8+my/3]:"")+nt+(st&&se==="("?")":""),pt){for(Qe=-1,De=Ie.length;++Qe<De;)if(Ve=Ie.charCodeAt(Qe),48>Ve||Ve>57){nt=(Ve===46?_+Ie.slice(Qe+1):Ie.slice(Qe))+nt,Ie=Ie.slice(0,Qe);break}}}Ce&&!_e&&(Ie=c(Ie,1/0));var Ct=it.length+Ie.length+nt.length,zt=Ct<ke?new Array(ke-Ct+1).join(D):"";switch(Ce&&_e&&(Ie=c(zt+Ie,zt.length?ke-nt.length:1/0),zt=""),q){case"<":Ie=it+Ie+nt+zt;break;case"=":Ie=it+zt+Ie+nt;break;case"^":Ie=zt.slice(0,Ct=zt.length>>1)+it+Ie+nt+zt.slice(Ct);break;default:Ie=zt+it+Ie+nt;break}return v(Ie)}return lt.toString=function(){return O+""},lt}function z(O,D){var q=C((O=Uh(O),O.type="f",O)),se=Math.max(-8,Math.min(8,Math.floor(Lu(D)/3)))*3,Te=Math.pow(10,-se),_e=jd[8+se/3];return function(ke){return q(Te*ke)+_e}}return{format:C,formatPrefix:z}}var Sh,yy,gy;yv({thousands:",",grouping:[3],currency:["$",""]});function yv(l){return Sh=mv(l),yy=Sh.format,gy=Sh.formatPrefix,Sh}function gv(l){return Math.max(0,-Lu(Math.abs(l)))}function _v(l,c){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lu(c)/3)))*3-Lu(Math.abs(l)))}function vv(l,c){return l=Math.abs(l),c=Math.abs(c)-l,Math.max(0,Lu(c)-Lu(l))+1}function bv(l,c,f,m){var _=C_(l,c,f),v;switch(m=Uh(m==null?",f":m),m.type){case"s":{var a=Math.max(Math.abs(l),Math.abs(c));return m.precision==null&&!isNaN(v=_v(_,a))&&(m.precision=v),gy(m,a)}case"":case"e":case"g":case"p":case"r":{m.precision==null&&!isNaN(v=vv(_,Math.max(Math.abs(l),Math.abs(c))))&&(m.precision=v-(m.type==="e"));break}case"f":case"%":{m.precision==null&&!isNaN(v=gv(_))&&(m.precision=v-(m.type==="%")*2);break}}return yy(m)}function _y(l){var c=l.domain;return l.ticks=function(f){var m=c();return P_(m[0],m[m.length-1],f==null?10:f)},l.tickFormat=function(f,m){var _=c();return bv(_[0],_[_.length-1],f==null?10:f,m)},l.nice=function(f){f==null&&(f=10);var m=c(),_=0,v=m.length-1,a=m[_],I=m[v],k,C,z=10;for(I<a&&(C=a,a=I,I=C,C=_,_=v,v=C);z-- >0;){if(C=sy(a,I,f),C===k)return m[_]=a,m[v]=I,c(m);if(C>0)a=Math.floor(a/C)*C,I=Math.ceil(I/C)*C;else if(C<0)a=Math.ceil(a*C)/C,I=Math.floor(I*C)/C;else break;k=C}return l},l}function Ch(){var l=lv();return l.copy=function(){return fy(l,Ch())},jh.apply(l,arguments),_y(l)}function qd(l){return function(c){return c<0?-Math.pow(-c,l):Math.pow(c,l)}}function xv(l){return l<0?-Math.sqrt(-l):Math.sqrt(l)}function wv(l){return l<0?-l*l:l*l}function Ev(l){var c=l(is,is),f=1;function m(){return f===1?l(is,is):f===.5?l(xv,wv):l(qd(f),qd(1/f))}return c.exponent=function(_){return arguments.length?(f=+_,m()):f},_y(c)}function vy(){var l=Ev(dy());return l.copy=function(){return fy(l,vy()).exponent(l.exponent())},jh.apply(l,arguments),l}function Sv(){return vy.apply(null,arguments).exponent(.5)}const Ec={x:Ch,y:Ch,z:Ch,r:Sv};function kv(l){return l.constant?"symlog":l.base?"log":l.exponent?l.exponent()===.5?"sqrt":"pow":"other"}function Zd(l){return l}function Iv(l){return c=>Math.log(l*c)}function Tv(l){return c=>l*Math.exp(c)}function Av(l){return c=>Math.sign(c)*Math.log1p(Math.abs(c/l))}function zv(l){return c=>Math.sign(c)*Math.expm1(Math.abs(c))*l}function kh(l){return function(f){return f<0?-Math.pow(-f,l):Math.pow(f,l)}}function Pv(l){const c=kv(l);if(c==="log"){const f=Math.sign(l.domain()[0]);return{lift:Iv(f),ground:Tv(f),scaleType:c}}return c==="pow"?{lift:kh(1),ground:kh(1/1),scaleType:c}:c==="sqrt"?{lift:kh(.5),ground:kh(1/.5),scaleType:c}:c==="symlog"?{lift:Av(1),ground:zv(1),scaleType:c}:{lift:Zd,ground:Zd,scaleType:c}}function Cv(l,c){if(typeof l.range!="function")throw new Error("Scale method `range` must be a function");if(typeof l.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(c))return l.domain();l.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",l.domain()),l.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",l.range());const{lift:f,ground:m}=Pv(l),_=l.domain()[0],v=Object.prototype.toString.call(_)==="[object Date]",[a,I]=l.domain().map(q=>f(v?q.getTime():q)),[k,C]=l.range(),z=c[0]||0,O=c[1]||0,D=(I-a)/(Math.abs(C-k)-z-O);return[a-z*D,O*D+I].map(q=>m(v?new Date(q):q))}function Mv(l,c,f,m,_){let v,a;return _===!0?(v=0,a=100):(v=l==="r"?1:0,a=l==="y"?f:l==="r"?25:c),m===!0?[a,v]:[v,a]}function Dv(l,c,f,m,_,v){return _?typeof _=="function"?_({width:c,height:f}):_:Mv(l,c,f,m,v)}function Ih(l){return function([f,m,_,v,a,I,k,C,z,O]){if(m===null)return null;const D=Dv(l,k,C,I,z,O),q=f===Ec[l]?f():f.copy();return q.domain(ay(m[l],_)).range(D),v&&q.domain(Cv(q,v)),a===!0&&(typeof q.nice=="function"?q.nice():console.error(`[Layer Cake] You set \`${l}Nice: true\` but the ${l}Scale does not have a \`.nice\` method. Ignoring...`)),q}}function Th([l,c]){return f=>{const m=l(f);return Array.isArray(m)?m.map(_=>c(_)):c(m)}}function Ah([l]){if(typeof l=="function"){if(typeof l.range=="function")return l.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const zh={x:!1,y:!0,z:!1,r:!1};const Lv=l=>({element:l[0]&4,width:l[0]&256,height:l[0]&512,aspectRatio:l[0]&1024,containerWidth:l[0]&128,containerHeight:l[0]&64}),Gd=l=>({element:l[2],width:l[8],height:l[9],aspectRatio:l[10],containerWidth:l[7],containerHeight:l[6]});function Kd(l){let c,f,m;const _=l[90].default,v=Pu(_,l,l[89],Gd);return{c(){c=X("div"),v&&v.c(),this.h()},l(a){c=W(a,"DIV",{class:!0});var I=Q(c);v&&v.l(I),I.forEach(M),this.h()},h(){L(c,"class","layercake-container svelte-vhzpsp"),zs(()=>l[92].call(c)),he(c,"position",l[5],!1),he(c,"top",l[5]==="absolute"?"0":null,!1),he(c,"right",l[5]==="absolute"?"0":null,!1),he(c,"bottom",l[5]==="absolute"?"0":null,!1),he(c,"left",l[5]==="absolute"?"0":null,!1),he(c,"pointer-events",l[4]===!1?"none":null,!1)},m(a,I){xe(a,c,I),v&&v.m(c,null),l[91](c),f=Ps(c,l[92].bind(c)),m=!0},p(a,I){v&&v.p&&(!m||I[0]&1988|I[2]&134217728)&&Cu(v,_,a,a[89],m?Du(_,a[89],I,Lv):Mu(a[89]),Gd),I[0]&32&&he(c,"position",a[5],!1),I[0]&32&&he(c,"top",a[5]==="absolute"?"0":null,!1),I[0]&32&&he(c,"right",a[5]==="absolute"?"0":null,!1),I[0]&32&&he(c,"bottom",a[5]==="absolute"?"0":null,!1),I[0]&32&&he(c,"left",a[5]==="absolute"?"0":null,!1),I[0]&16&&he(c,"pointer-events",a[4]===!1?"none":null,!1)},i(a){m||(rt(v,a),m=!0)},o(a){wt(v,a),m=!1},d(a){a&&M(c),v&&v.d(a),l[91](null),f()}}}function Rv(l){let c,f,m=(l[3]===!0||typeof window<"u")&&Kd(l);return{c(){m&&m.c(),c=Xi()},l(_){m&&m.l(_),c=Xi()},m(_,v){m&&m.m(_,v),xe(_,c,v),f=!0},p(_,v){_[3]===!0||typeof window<"u"?m?(m.p(_,v),v[0]&8&&rt(m,1)):(m=Kd(_),m.c(),rt(m,1),m.m(c.parentNode,c)):m&&(Rn(),wt(m,1,1,()=>{m=null}),Bn())},i(_){f||(rt(m),f=!0)},o(_){wt(m),f=!1},d(_){m&&m.d(_),_&&M(c)}}}function Bv(l,c,f){let m,_,v,a,I,k,C,z,O,D,q,se,Te,_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De,Ve,st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,{$$slots:Ut={},$$scope:At}=c,{ssr:Kt=!1}=c,{pointerEvents:It=!0}=c,{position:Jt="relative"}=c,{percentRange:vt=!1}=c,{width:fr=void 0}=c,{height:yr=void 0}=c,{containerWidth:bt=fr||100}=c,{containerHeight:gr=yr||100}=c,{element:hr=void 0}=c,{x:dr=void 0}=c,{y:$e=void 0}=c,{z:Lt=void 0}=c,{r:Wt=void 0}=c,{data:Se=[]}=c,{xDomain:We=void 0}=c,{yDomain:qt=void 0}=c,{zDomain:Mt=void 0}=c,{rDomain:tr=void 0}=c,{xNice:Dr=!1}=c,{yNice:ri=!1}=c,{zNice:Yt=!1}=c,{rNice:Er=!1}=c,{xReverse:Gr=zh.x}=c,{yReverse:Xr=zh.y}=c,{zReverse:ai=zh.z}=c,{rReverse:si=zh.r}=c,{xPadding:Cr=void 0}=c,{yPadding:qr=void 0}=c,{zPadding:Sr=void 0}=c,{rPadding:ei=void 0}=c,{xScale:Yr=Ec.x}=c,{yScale:kt=Ec.y}=c,{zScale:kr=Ec.z}=c,{rScale:pi=Ec.r}=c,{xRange:Mr=void 0}=c,{yRange:rr=void 0}=c,{zRange:F=void 0}=c,{rRange:j=void 0}=c,{padding:G={}}=c,{extents:Y={}}=c,{flatData:te=void 0}=c,{custom:ue={}}=c,ge=!1;$m(()=>{ge=!0});const K={},re=xi(vt);Rr(l,re,ve=>f(128,cr=ve));const we=xi(bt);Rr(l,we,ve=>f(7,vr=ve));const Ze=xi(gr);Rr(l,Ze,ve=>f(6,lr=ve));const Je=xi(Pp(Y));Rr(l,Je,ve=>f(127,qe=ve));const ze=xi(Se);Rr(l,ze,ve=>f(126,Ke=ve));const He=xi(te||Se);Rr(l,He,ve=>f(125,zt=ve));const St=xi(G);Rr(l,St,ve=>f(124,Ct=ve));const gt=xi(Ys(dr));Rr(l,gt,ve=>f(123,st=ve));const Le=xi(Ys($e));Rr(l,Le,ve=>f(122,Ve=ve));const ft=xi(Ys(Lt));Rr(l,ft,ve=>f(121,De=ve));const ot=xi(Ys(Wt));Rr(l,ot,ve=>f(120,Qe=ve));const ht=xi(We);Rr(l,ht,ve=>f(119,nt=ve));const $t=xi(qt);Rr(l,$t,ve=>f(118,it=ve));const ut=xi(Mt);Rr(l,ut,ve=>f(117,Ie=ve));const mr=xi(tr);Rr(l,mr,ve=>f(116,lt=ve));const Kr=xi(Dr);Rr(l,Kr,ve=>f(115,pt=ve));const er=xi(ri);Rr(l,er,ve=>f(114,yt=ve));const et=xi(Yt);Rr(l,et,ve=>f(113,Xt=ve));const Nt=xi(Er);Rr(l,Nt,ve=>f(112,Ge=ve));const li=xi(Gr);Rr(l,li,ve=>f(111,Ye=ve));const Ir=xi(Xr);Rr(l,Ir,ve=>f(110,at=ve));const xr=xi(ai);Rr(l,xr,ve=>f(109,mt=ve));const Ar=xi(si);Rr(l,Ar,ve=>f(108,Ce=ve));const pr=xi(Cr);Rr(l,pr,ve=>f(107,ke=ve));const Ft=xi(qr);Rr(l,Ft,ve=>f(106,_e=ve));const Wi=xi(Sr);Rr(l,Wi,ve=>f(105,Te=ve));const Gn=xi(ei);Rr(l,Gn,ve=>f(104,se=ve));const gi=xi(Mr);Rr(l,gi,ve=>f(103,q=ve));const Ji=xi(rr);Rr(l,Ji,ve=>f(102,D=ve));const pa=xi(F);Rr(l,pa,ve=>f(101,O=ve));const vn=xi(j);Rr(l,vn,ve=>f(100,z=ve));const _i=xi(Yr);Rr(l,_i,ve=>f(99,C=ve));const On=xi(kt);Rr(l,On,ve=>f(98,k=ve));const Ui=xi(kr);Rr(l,Ui,ve=>f(97,I=ve));const Ti=xi(pi);Rr(l,Ti,ve=>f(96,a=ve));const rn=xi(K);Rr(l,rn,ve=>f(94,_=ve));const ui=xi(ue);Rr(l,ui,ve=>f(95,v=ve));const Sn=zn([gt,Le,ft,ot],([ve,xn,nn,Hr])=>{const ra={};return ve&&(ra.x=ve),xn&&(ra.y=xn),nn&&(ra.z=nn),Hr&&(ra.r=Hr),ra}),Yi=zn([St,we,Ze],([ve])=>Object.assign({top:0,right:0,bottom:0,left:0},ve)),Ca=zn([we,Ze,Yi],([ve,xn,nn])=>{const Hr={};return Hr.top=nn.top,Hr.right=ve-nn.right,Hr.bottom=xn-nn.bottom,Hr.left=nn.left,Hr.width=Hr.right-Hr.left,Hr.height=Hr.bottom-Hr.top,Hr.width<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Hr.height<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Hr}),Ai=zn([Ca],([ve])=>ve.width);Rr(l,Ai,ve=>f(8,Br=ve));const Fn=zn([Ca],([ve])=>ve.height);Rr(l,Fn,ve=>f(9,Bt=ve));const Ri=zn([He,Sn,Je],([ve,xn,nn])=>{const Hr=Pp(xn,nn);return Object.keys(Hr).length>0?{...b_(ve,Hr),...nn}:{}}),zi=zn([Ri,ht],xh("x")),cn=zn([Ri,$t],xh("y")),Bi=zn([Ri,ut],xh("z")),ji=zn([Ri,mr],xh("r")),ja=zn([_i,Ri,zi,pr,Kr,li,Ai,Fn,gi,re],Ih("x")),ho=zn([gt,ja],Th),qa=zn([On,Ri,cn,Ft,er,Ir,Ai,Fn,Ji,re],Ih("y")),io=zn([Le,qa],Th),bn=zn([Ui,Ri,Bi,Wi,et,xr,Ai,Fn,pa,re],Ih("z")),hn=zn([ft,bn],Th),Za=zn([Ti,Ri,ji,Gn,Nt,Ar,Ai,Fn,vn,re],Ih("r")),ta=zn([ot,Za],Th),pn=zn([ja],Ah),Ga=zn([qa],Ah),va=zn([bn],Ah),Nn=zn([Za],Ah),ki=zn([Ai,Fn],([ve,xn])=>ve/xn);Rr(l,ki,ve=>f(10,xt=ve));function fi(ve){Ts[ve?"unshift":"push"](()=>{hr=ve,f(2,hr)})}function Ei(){bt=this.clientWidth,gr=this.clientHeight,f(0,bt),f(1,gr)}return l.$$set=ve=>{"ssr"in ve&&f(3,Kt=ve.ssr),"pointerEvents"in ve&&f(4,It=ve.pointerEvents),"position"in ve&&f(5,Jt=ve.position),"percentRange"in ve&&f(51,vt=ve.percentRange),"width"in ve&&f(52,fr=ve.width),"height"in ve&&f(53,yr=ve.height),"containerWidth"in ve&&f(0,bt=ve.containerWidth),"containerHeight"in ve&&f(1,gr=ve.containerHeight),"element"in ve&&f(2,hr=ve.element),"x"in ve&&f(54,dr=ve.x),"y"in ve&&f(55,$e=ve.y),"z"in ve&&f(56,Lt=ve.z),"r"in ve&&f(57,Wt=ve.r),"data"in ve&&f(58,Se=ve.data),"xDomain"in ve&&f(59,We=ve.xDomain),"yDomain"in ve&&f(60,qt=ve.yDomain),"zDomain"in ve&&f(61,Mt=ve.zDomain),"rDomain"in ve&&f(62,tr=ve.rDomain),"xNice"in ve&&f(63,Dr=ve.xNice),"yNice"in ve&&f(64,ri=ve.yNice),"zNice"in ve&&f(65,Yt=ve.zNice),"rNice"in ve&&f(66,Er=ve.rNice),"xReverse"in ve&&f(67,Gr=ve.xReverse),"yReverse"in ve&&f(68,Xr=ve.yReverse),"zReverse"in ve&&f(69,ai=ve.zReverse),"rReverse"in ve&&f(70,si=ve.rReverse),"xPadding"in ve&&f(71,Cr=ve.xPadding),"yPadding"in ve&&f(72,qr=ve.yPadding),"zPadding"in ve&&f(73,Sr=ve.zPadding),"rPadding"in ve&&f(74,ei=ve.rPadding),"xScale"in ve&&f(75,Yr=ve.xScale),"yScale"in ve&&f(76,kt=ve.yScale),"zScale"in ve&&f(77,kr=ve.zScale),"rScale"in ve&&f(78,pi=ve.rScale),"xRange"in ve&&f(79,Mr=ve.xRange),"yRange"in ve&&f(80,rr=ve.yRange),"zRange"in ve&&f(81,F=ve.zRange),"rRange"in ve&&f(82,j=ve.rRange),"padding"in ve&&f(83,G=ve.padding),"extents"in ve&&f(84,Y=ve.extents),"flatData"in ve&&f(85,te=ve.flatData),"custom"in ve&&f(86,ue=ve.custom),"$$scope"in ve&&f(89,At=ve.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&8388608&&dr&&f(87,K.x=dr,K),l.$$.dirty[1]&16777216&&$e&&f(87,K.y=$e,K),l.$$.dirty[1]&33554432&&Lt&&f(87,K.z=Lt,K),l.$$.dirty[1]&67108864&&Wt&&f(87,K.r=Wt,K),l.$$.dirty[1]&268435456&&We&&f(87,K.xDomain=We,K),l.$$.dirty[1]&536870912&&qt&&f(87,K.yDomain=qt,K),l.$$.dirty[1]&1073741824&&Mt&&f(87,K.zDomain=Mt,K),l.$$.dirty[2]&1&&tr&&f(87,K.rDomain=tr,K),l.$$.dirty[2]&131072&&Mr&&f(87,K.xRange=Mr,K),l.$$.dirty[2]&262144&&rr&&f(87,K.yRange=rr,K),l.$$.dirty[2]&524288&&F&&f(87,K.zRange=F,K),l.$$.dirty[2]&1048576&&j&&f(87,K.rRange=j,K),l.$$.dirty[1]&1048576&&bi(re,cr=vt,cr),l.$$.dirty[0]&1&&bi(we,vr=bt,vr),l.$$.dirty[0]&2&&bi(Ze,lr=gr,lr),l.$$.dirty[2]&4194304&&bi(Je,qe=Pp(Y),qe),l.$$.dirty[1]&134217728&&bi(ze,Ke=Se,Ke),l.$$.dirty[1]&134217728|l.$$.dirty[2]&8388608&&bi(He,zt=te||Se,zt),l.$$.dirty[2]&2097152&&bi(St,Ct=G,Ct),l.$$.dirty[1]&8388608&&bi(gt,st=Ys(dr),st),l.$$.dirty[1]&16777216&&bi(Le,Ve=Ys($e),Ve),l.$$.dirty[1]&33554432&&bi(ft,De=Ys(Lt),De),l.$$.dirty[1]&67108864&&bi(ot,Qe=Ys(Wt),Qe),l.$$.dirty[1]&268435456&&bi(ht,nt=We,nt),l.$$.dirty[1]&536870912&&bi($t,it=qt,it),l.$$.dirty[1]&1073741824&&bi(ut,Ie=Mt,Ie),l.$$.dirty[2]&1&&bi(mr,lt=tr,lt),l.$$.dirty[2]&2&&bi(Kr,pt=Dr,pt),l.$$.dirty[2]&4&&bi(er,yt=ri,yt),l.$$.dirty[2]&8&&bi(et,Xt=Yt,Xt),l.$$.dirty[2]&16&&bi(Nt,Ge=Er,Ge),l.$$.dirty[2]&32&&bi(li,Ye=Gr,Ye),l.$$.dirty[2]&64&&bi(Ir,at=Xr,at),l.$$.dirty[2]&128&&bi(xr,mt=ai,mt),l.$$.dirty[2]&256&&bi(Ar,Ce=si,Ce),l.$$.dirty[2]&512&&bi(pr,ke=Cr,ke),l.$$.dirty[2]&1024&&bi(Ft,_e=qr,_e),l.$$.dirty[2]&2048&&bi(Wi,Te=Sr,Te),l.$$.dirty[2]&4096&&bi(Gn,se=ei,se),l.$$.dirty[2]&131072&&bi(gi,q=Mr,q),l.$$.dirty[2]&262144&&bi(Ji,D=rr,D),l.$$.dirty[2]&524288&&bi(pa,O=F,O),l.$$.dirty[2]&1048576&&bi(vn,z=j,z),l.$$.dirty[2]&8192&&bi(_i,C=Yr,C),l.$$.dirty[2]&16384&&bi(On,k=kt,k),l.$$.dirty[2]&32768&&bi(Ui,I=kr,I),l.$$.dirty[2]&65536&&bi(Ti,a=pi,a),l.$$.dirty[2]&16777216&&bi(ui,v=ue,v),l.$$.dirty[2]&33554432&&bi(rn,_=K,_),l.$$.dirty[2]&67108864&&ey("LayerCake",m)},f(88,m={activeGetters:Sn,width:Ai,height:Fn,percentRange:re,aspectRatio:ki,containerWidth:we,containerHeight:Ze,x:gt,y:Le,z:ft,r:ot,custom:ui,data:ze,xNice:Kr,yNice:er,zNice:et,rNice:Nt,xReverse:li,yReverse:Ir,zReverse:xr,rReverse:Ar,xPadding:pr,yPadding:Ft,zPadding:Wi,rPadding:Gn,padding:Yi,flatData:He,extents:Ri,xDomain:zi,yDomain:cn,zDomain:Bi,rDomain:ji,xRange:pn,yRange:Ga,zRange:va,rRange:Nn,config:rn,xScale:ja,xGet:ho,yScale:qa,yGet:io,zScale:bn,zGet:hn,rScale:Za,rGet:ta}),[bt,gr,hr,Kt,It,Jt,lr,vr,Br,Bt,xt,re,we,Ze,Je,ze,He,St,gt,Le,ft,ot,ht,$t,ut,mr,Kr,er,et,Nt,li,Ir,xr,Ar,pr,Ft,Wi,Gn,gi,Ji,pa,vn,_i,On,Ui,Ti,rn,ui,Ai,Fn,ki,vt,fr,yr,dr,$e,Lt,Wt,Se,We,qt,Mt,tr,Dr,ri,Yt,Er,Gr,Xr,ai,si,Cr,qr,Sr,ei,Yr,kt,kr,pi,Mr,rr,F,j,G,Y,te,ue,K,m,At,Ut,fi,Ei]}class Ov extends Na{constructor(c){super(),Va(this,c,Bv,Rv,Ua,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const Fv=l=>({element:l&1}),Hd=l=>({element:l[0]}),Nv=l=>({element:l&1}),Xd=l=>({element:l[0]});function Vv(l){let c,f,m,_,v;const a=l[12].defs,I=Pu(a,l,l[11],Xd),k=l[12].default,C=Pu(k,l,l[11],Hd);return{c(){c=ca("svg"),f=ca("defs"),I&&I.c(),m=ca("g"),C&&C.c(),this.h()},l(z){c=ha(z,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var O=Q(c);f=ha(O,"defs",{});var D=Q(f);I&&I.l(D),D.forEach(M),m=ha(O,"g",{class:!0,transform:!0});var q=Q(m);C&&C.l(q),q.forEach(M),O.forEach(M),this.h()},h(){L(m,"class","layercake-layout-svg_g"),L(m,"transform",_="translate("+l[7].left+", "+l[7].top+")"),L(c,"class","layercake-layout-svg svelte-u84d8d"),L(c,"viewBox",l[4]),L(c,"width",l[5]),L(c,"height",l[6]),he(c,"z-index",l[2],!1),he(c,"pointer-events",l[3]===!1?"none":null,!1)},m(z,O){xe(z,c,O),P(c,f),I&&I.m(f,null),P(c,m),C&&C.m(m,null),l[13](m),l[14](c),v=!0},p(z,[O]){I&&I.p&&(!v||O&2049)&&Cu(I,a,z,z[11],v?Du(a,z[11],O,Nv):Mu(z[11]),Xd),C&&C.p&&(!v||O&2049)&&Cu(C,k,z,z[11],v?Du(k,z[11],O,Fv):Mu(z[11]),Hd),(!v||O&128&&_!==(_="translate("+z[7].left+", "+z[7].top+")"))&&L(m,"transform",_),(!v||O&16)&&L(c,"viewBox",z[4]),(!v||O&32)&&L(c,"width",z[5]),(!v||O&64)&&L(c,"height",z[6]),O&4&&he(c,"z-index",z[2],!1),O&8&&he(c,"pointer-events",z[3]===!1?"none":null,!1)},i(z){v||(rt(I,z),rt(C,z),v=!0)},o(z){wt(I,z),wt(C,z),v=!1},d(z){z&&M(c),I&&I.d(z),C&&C.d(z),l[13](null),l[14](null)}}}function Uv(l,c,f){let m,_,v,{$$slots:a={},$$scope:I}=c,{element:k=void 0}=c,{innerElement:C=void 0}=c,{zIndex:z=void 0}=c,{pointerEvents:O=void 0}=c,{viewBox:D=void 0}=c;const{containerWidth:q,containerHeight:se,padding:Te}=zc("LayerCake");Rr(l,q,Ce=>f(5,m=Ce)),Rr(l,se,Ce=>f(6,_=Ce)),Rr(l,Te,Ce=>f(7,v=Ce));function _e(Ce){Ts[Ce?"unshift":"push"](()=>{C=Ce,f(1,C)})}function ke(Ce){Ts[Ce?"unshift":"push"](()=>{k=Ce,f(0,k)})}return l.$$set=Ce=>{"element"in Ce&&f(0,k=Ce.element),"innerElement"in Ce&&f(1,C=Ce.innerElement),"zIndex"in Ce&&f(2,z=Ce.zIndex),"pointerEvents"in Ce&&f(3,O=Ce.pointerEvents),"viewBox"in Ce&&f(4,D=Ce.viewBox),"$$scope"in Ce&&f(11,I=Ce.$$scope)},[k,C,z,O,D,m,_,v,q,se,Te,I,a,_e,ke]}class jv extends Na{constructor(c){super(),Va(this,c,Uv,Vv,Ua,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Wd(l,c,f){const m=l.slice();return m[24]=c[f],m[26]=f,m}function Jd(l){let c,f,m,_;return{c(){c=ca("rect"),this.h()},l(v){c=ha(v,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Q(c).forEach(M),this.h()},h(){L(c,"class","group-rect"),L(c,"data-id",l[26]),L(c,"x",f=l[11].bandwidth?l[7](l[24]):l[7](l[24])[0]),L(c,"y",m=l[13](l[12](l[24]))-1),L(c,"width",_=l[11].bandwidth?l[11].bandwidth():l[9](l[24])),L(c,"height","3"),L(c,"fill","#CEDC20"),L(c,"stroke",l[0]),L(c,"stroke-width",l[1])},m(v,a){xe(v,c,a)},p(v,a){a&3200&&f!==(f=v[11].bandwidth?v[7](v[24]):v[7](v[24])[0])&&L(c,"x",f),a&13312&&m!==(m=v[13](v[12](v[24]))-1)&&L(c,"y",m),a&3584&&_!==(_=v[11].bandwidth?v[11].bandwidth():v[9](v[24]))&&L(c,"width",_),a&1&&L(c,"stroke",v[0]),a&2&&L(c,"stroke-width",v[1])},d(v){v&&M(c)}}}function Yd(l){let c,f,m,_,v,a,I,k,C=l[12]&&Jd(l);return{c(){c=ca("rect"),C&&C.c(),a=ca("text"),this.h()},l(z){c=ha(z,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Q(c).forEach(M),C&&C.l(z),a=ha(z,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),Q(a).forEach(M),this.h()},h(){L(c,"class","group-rect"),L(c,"data-id",l[26]),L(c,"x",f=l[11].bandwidth?l[7](l[24]):l[7](l[24])[0]),L(c,"y",m=l[6](l[24])),L(c,"width",_=l[11].bandwidth?l[11].bandwidth():l[9](l[24])),L(c,"height",v=l[8](l[24])),L(c,"fill",l[4]),L(c,"stroke",l[0]),L(c,"stroke-width",l[1]),L(a,"x",I=l[11].bandwidth?l[7](l[24])+l[11].bandwidth()/2:l[7](l[24])[0]),L(a,"y",k=l[6](l[24])-4),L(a,"dx",l[2]),L(a,"dy",l[3]),L(a,"text-anchor",l[5])},m(z,O){xe(z,c,O),C&&C.m(z,O),xe(z,a,O)},p(z,O){O&3200&&f!==(f=z[11].bandwidth?z[7](z[24]):z[7](z[24])[0])&&L(c,"x",f),O&1088&&m!==(m=z[6](z[24]))&&L(c,"y",m),O&3584&&_!==(_=z[11].bandwidth?z[11].bandwidth():z[9](z[24]))&&L(c,"width",_),O&1280&&v!==(v=z[8](z[24]))&&L(c,"height",v),O&16&&L(c,"fill",z[4]),O&1&&L(c,"stroke",z[0]),O&2&&L(c,"stroke-width",z[1]),z[12]?C?C.p(z,O):(C=Jd(z),C.c(),C.m(a.parentNode,a)):C&&(C.d(1),C=null),O&3200&&I!==(I=z[11].bandwidth?z[7](z[24])+z[11].bandwidth()/2:z[7](z[24])[0])&&L(a,"x",I),O&1088&&k!==(k=z[6](z[24])-4)&&L(a,"y",k),O&4&&L(a,"dx",z[2]),O&8&&L(a,"dy",z[3]),O&32&&L(a,"text-anchor",z[5])},d(z){z&&M(c),C&&C.d(z),z&&M(a)}}}function qv(l){let c,f=l[10],m=[];for(let _=0;_<f.length;_+=1)m[_]=Yd(Wd(l,f,_));return{c(){c=ca("g");for(let _=0;_<m.length;_+=1)m[_].c();this.h()},l(_){c=ha(_,"g",{class:!0});var v=Q(c);for(let a=0;a<m.length;a+=1)m[a].l(v);v.forEach(M),this.h()},h(){L(c,"class","column-group svelte-wgzwsk")},m(_,v){xe(_,c,v);for(let a=0;a<m.length;a+=1)m[a].m(c,null)},p(_,[v]){if(v&16383){f=_[10];let a;for(a=0;a<f.length;a+=1){const I=Wd(_,f,a);m[a]?m[a].p(I,v):(m[a]=Yd(I),m[a].c(),m[a].m(c,null))}for(;a<m.length;a+=1)m[a].d(1);m.length=f.length}},i:_a,o:_a,d(_){_&&M(c),Ro(m,_)}}}function Zv(l,c,f){let m,_,v,a,I,k,C,z,O;const{data:D,xGet:q,yGet:se,yRange:Te,xScale:_e,yScale:ke,y:Ce,z:mt}=zc("LayerCake");Rr(l,D,Ie=>f(10,k=Ie)),Rr(l,q,Ie=>f(7,I=Ie)),Rr(l,se,Ie=>f(6,v=Ie)),Rr(l,Te,Ie=>f(22,a=Ie)),Rr(l,_e,Ie=>f(11,C=Ie)),Rr(l,ke,Ie=>f(13,O=Ie)),Rr(l,mt,Ie=>f(12,z=Ie));let{stroke:at=""}=c,{strokeWidth:Ye=0}=c,{dxTick:Ge=0}=c,{dyTick:Xt=0}=c,{formatVal:yt=Ie=>Ie}=c,{fill:pt="#00205b"}=c,{textAnchor:lt="middle"}=c;return l.$$set=Ie=>{"stroke"in Ie&&f(0,at=Ie.stroke),"strokeWidth"in Ie&&f(1,Ye=Ie.strokeWidth),"dxTick"in Ie&&f(2,Ge=Ie.dxTick),"dyTick"in Ie&&f(3,Xt=Ie.dyTick),"formatVal"in Ie&&f(21,yt=Ie.formatVal),"fill"in Ie&&f(4,pt=Ie.fill),"textAnchor"in Ie&&f(5,lt=Ie.textAnchor)},l.$$.update=()=>{l.$$.dirty&128&&f(9,m=Ie=>{const it=I(Ie);return Math.max(0,it[1]-it[0])}),l.$$.dirty&4194368&&f(8,_=Ie=>a[0]-v(Ie))},[at,Ye,Ge,Xt,pt,lt,v,I,_,m,k,C,z,O,D,q,se,Te,_e,ke,mt,yt,a]}class Gv extends Na{constructor(c){super(),Va(this,c,Zv,qv,Ua,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,formatVal:21,fill:4,textAnchor:5})}}function Qd(l,c,f){const m=l.slice();return m[28]=c[f],m[30]=f,m}function $d(l){let c,f,m,_;return{c(){c=ca("line"),this.h()},l(v){c=ha(v,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),Q(c).forEach(M),this.h()},h(){L(c,"y1",f=l[20]*-1),L(c,"y2",m=l[14]&&l[30]%2==0?l[10]+l[8]+2:l[10]+l[8]-13),L(c,"x1","0"),L(c,"x2","0"),L(c,"stroke",l[11]),L(c,"stroke-width",_=l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)?2:1),L(c,"class","svelte-fwjh80"),Jr(c,"baseline",l[13])},m(v,a){xe(v,c,a)},p(v,a){a&1048576&&f!==(f=v[20]*-1)&&L(c,"y1",f),a&17664&&m!==(m=v[14]&&v[30]%2==0?v[10]+v[8]+2:v[10]+v[8]-13)&&L(c,"y2",m),a&2048&&L(c,"stroke",v[11]),a&32784&&_!==(_=v[15]&&Array.isArray(v[4])&&v[30]==Math.floor(v[4].length/2)?2:1)&&L(c,"stroke-width",_),a&8192&&Jr(c,"baseline",v[13])},d(v){v&&M(c)}}}function Kv(l){let c=l[1](l[28])+"",f;return{c(){f=pe(c)},l(m){f=fe(m,c)},m(m,_){xe(m,f,_)},p(m,_){_&262146&&c!==(c=m[1](m[28])+"")&&Ht(f,c)},d(m){m&&M(f)}}}function Hv(l){let c,f=l[1](l[28])+"",m,_;return{c(){c=pe(l[5]),m=pe(f),_=pe(l[6])},l(v){c=fe(v,l[5]),m=fe(v,f),_=fe(v,l[6])},m(v,a){xe(v,c,a),xe(v,m,a),xe(v,_,a)},p(v,a){a&32&&Ht(c,v[5]),a&262146&&f!==(f=v[1](v[28])+"")&&Ht(m,f),a&64&&Ht(_,v[6])},d(v){v&&M(c),v&&M(m),v&&M(_)}}}function em(l){let c,f,m,_,v,a,I,k=l[0]!==!1&&$d(l);function C(D,q){return D[30]==D[18].length-1?Hv:Kv}let z=C(l),O=z(l);return{c(){c=ca("g"),k&&k.c(),f=ca("text"),O.c(),this.h()},l(D){c=ha(D,"g",{class:!0,transform:!0});var q=Q(c);k&&k.l(q),f=ha(q,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var se=Q(f);O.l(se),se.forEach(M),q.forEach(M),this.h()},h(){L(f,"x",m=l[7]||l[16]?l[17].bandwidth()/2:0),L(f,"y",_=l[3]?l[20]*-1-6:l[14]&&l[30]%2==0?l[8]+15:l[8]),L(f,"dx",v=l[24](l[30])=="start"?l[9]-2:l[24](l[30])=="end"?l[9]+2:l[9]),L(f,"dy",l[10]),L(f,"text-anchor",l[24](l[30])),L(f,"fill",l[12]),L(f,"class","svelte-fwjh80"),Jr(f,"bold",l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)),L(c,"class",a="tick tick-"+l[28]+" svelte-fwjh80"),L(c,"transform",I="translate("+l[17](l[28])+","+l[19][0]+")")},m(D,q){xe(D,c,q),k&&k.m(c,null),P(c,f),O.m(f,null)},p(D,q){D[0]!==!1?k?k.p(D,q):(k=$d(D),k.c(),k.m(c,f)):k&&(k.d(1),k=null),z===(z=C(D))&&O?O.p(D,q):(O.d(1),O=z(D),O&&(O.c(),O.m(f,null))),q&196736&&m!==(m=D[7]||D[16]?D[17].bandwidth()/2:0)&&L(f,"x",m),q&1065224&&_!==(_=D[3]?D[20]*-1-6:D[14]&&D[30]%2==0?D[8]+15:D[8])&&L(f,"y",_),q&512&&v!==(v=D[24](D[30])=="start"?D[9]-2:D[24](D[30])=="end"?D[9]+2:D[9])&&L(f,"dx",v),q&1024&&L(f,"dy",D[10]),q&4096&&L(f,"fill",D[12]),q&32784&&Jr(f,"bold",D[15]&&Array.isArray(D[4])&&D[30]==Math.floor(D[4].length/2)),q&262144&&a!==(a="tick tick-"+D[28]+" svelte-fwjh80")&&L(c,"class",a),q&917504&&I!==(I="translate("+D[17](D[28])+","+D[19][0]+")")&&L(c,"transform",I)},d(D){D&&M(c),k&&k.d(),O.d()}}}function tm(l){let c,f,m;return{c(){c=ca("line"),this.h()},l(_){c=ha(_,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),Q(c).forEach(M),this.h()},h(){L(c,"class","baseline svelte-fwjh80"),L(c,"y1",l[20]),L(c,"y2","0"),L(c,"x1",f=l[17](0)),L(c,"x2",m=l[17](0)),L(c,"stroke",l[11])},m(_,v){xe(_,c,v)},p(_,v){v&1048576&&L(c,"y1",_[20]),v&131072&&f!==(f=_[17](0))&&L(c,"x1",f),v&131072&&m!==(m=_[17](0))&&L(c,"x2",m),v&2048&&L(c,"stroke",_[11])},d(_){_&&M(c)}}}function Xv(l){let c,f,m=l[18],_=[];for(let a=0;a<m.length;a+=1)_[a]=em(Qd(l,m,a));let v=l[2]===!0&&tm(l);return{c(){c=ca("g");for(let a=0;a<_.length;a+=1)_[a].c();f=Xi(),v&&v.c(),this.h()},l(a){c=ha(a,"g",{class:!0});var I=Q(c);for(let k=0;k<_.length;k+=1)_[k].l(I);f=Xi(),v&&v.l(I),I.forEach(M),this.h()},h(){L(c,"class","axis x-axis")},m(a,I){xe(a,c,I);for(let k=0;k<_.length;k+=1)_[k].m(c,null);P(c,f),v&&v.m(c,null)},p(a,[I]){if(I&18874363){m=a[18];let k;for(k=0;k<m.length;k+=1){const C=Qd(a,m,k);_[k]?_[k].p(C,I):(_[k]=em(C),_[k].c(),_[k].m(c,f))}for(;k<_.length;k+=1)_[k].d(1);_.length=m.length}a[2]===!0?v?v.p(a,I):(v=tm(a),v.c(),v.m(c,null)):v&&(v.d(1),v=null)},i:_a,o:_a,d(a){a&&M(c),Ro(_,a),v&&v.d()}}}function Wv(l,c,f){let m,_,v,a,I;const{width:k,height:C,xScale:z,yScale:O,yRange:D}=zc("LayerCake");Rr(l,C,De=>f(20,I=De)),Rr(l,z,De=>f(17,v=De)),Rr(l,D,De=>f(19,a=De));let{gridlines:q=!0}=c,{formatTick:se=De=>De}=c,{baseline:Te=!1}=c,{flipped:_e=!1}=c,{snapTicks:ke=!1}=c,{ticks:Ce=void 0}=c,{prefix:mt=""}=c,{suffix:at=""}=c,{xTick:Ye=void 0}=c,{yTick:Ge=15}=c,{dxTick:Xt=0}=c,{dyTick:yt=0}=c,{lineColor:pt="#999"}=c,{textColor:lt="#555"}=c,{solid:Ie=!1}=c,{stagger:it=!1}=c,{median:nt=!0}=c;function Qe(De){if(ke===!0){if(De===0)return"start";if(De===_.length-1)return"end"}return"middle"}return l.$$set=De=>{"gridlines"in De&&f(0,q=De.gridlines),"formatTick"in De&&f(1,se=De.formatTick),"baseline"in De&&f(2,Te=De.baseline),"flipped"in De&&f(3,_e=De.flipped),"snapTicks"in De&&f(25,ke=De.snapTicks),"ticks"in De&&f(4,Ce=De.ticks),"prefix"in De&&f(5,mt=De.prefix),"suffix"in De&&f(6,at=De.suffix),"xTick"in De&&f(7,Ye=De.xTick),"yTick"in De&&f(8,Ge=De.yTick),"dxTick"in De&&f(9,Xt=De.dxTick),"dyTick"in De&&f(10,yt=De.dyTick),"lineColor"in De&&f(11,pt=De.lineColor),"textColor"in De&&f(12,lt=De.textColor),"solid"in De&&f(13,Ie=De.solid),"stagger"in De&&f(14,it=De.stagger),"median"in De&&f(15,nt=De.median)},l.$$.update=()=>{l.$$.dirty&131072&&f(16,m=typeof v.bandwidth=="function"),l.$$.dirty&196624&&f(18,_=Array.isArray(Ce)?Ce:m?v.domain():v.ticks(Ce))},[q,se,Te,_e,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,m,v,_,a,I,C,z,D,Qe,ke]}class Jv extends Na{constructor(c){super(),Va(this,c,Wv,Xv,Ua,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function Yv(l){let c,f,m,_;return c=new Gv({props:{fill:l[1],formatVal:l[5]}}),m=new Jv({props:{gridlines:!1}}),{c(){Fr(c.$$.fragment),f=Re(),Fr(m.$$.fragment)},l(v){Nr(c.$$.fragment,v),f=Be(v),Nr(m.$$.fragment,v)},m(v,a){Vr(c,v,a),xe(v,f,a),Vr(m,v,a),_=!0},p(v,a){const I={};a&2&&(I.fill=v[1]),a&32&&(I.formatVal=v[5]),c.$set(I)},i(v){_||(rt(c.$$.fragment,v),rt(m.$$.fragment,v),_=!0)},o(v){wt(c.$$.fragment,v),wt(m.$$.fragment,v),_=!1},d(v){Ur(c,v),v&&M(f),Ur(m,v)}}}function Qv(l){let c,f;return c=new jv({props:{$$slots:{default:[Yv]},$$scope:{ctx:l}}}),{c(){Fr(c.$$.fragment)},l(m){Nr(c.$$.fragment,m)},m(m,_){Vr(c,m,_),f=!0},p(m,_){const v={};_&1058&&(v.$$scope={dirty:_,ctx:m}),c.$set(v)},i(m){f||(rt(c.$$.fragment,m),f=!0)},o(m){wt(c.$$.fragment,m),f=!1},d(m){Ur(c,m)}}}function $v(l){let c,f,m;return f=new Ov({props:{padding:{top:15,right:0,bottom:20,left:0},x:l[2],y:l[3],z:l[4],xScale:uy().paddingInner([.02]).round(!0),xDomain:l[7],yDomain:l[6],zDomain:l[6],data:l[0],$$slots:{default:[Qv]},$$scope:{ctx:l}}}),{c(){c=X("div"),Fr(f.$$.fragment),this.h()},l(_){c=W(_,"DIV",{class:!0});var v=Q(c);Nr(f.$$.fragment,v),v.forEach(M),this.h()},h(){L(c,"class","chart-container svelte-s9z6lx")},m(_,v){xe(_,c,v),Vr(f,c,null),m=!0},p(_,[v]){const a={};v&4&&(a.x=_[2]),v&8&&(a.y=_[3]),v&16&&(a.z=_[4]),v&128&&(a.xDomain=_[7]),v&64&&(a.yDomain=_[6]),v&64&&(a.zDomain=_[6]),v&1&&(a.data=_[0]),v&1058&&(a.$$scope={dirty:v,ctx:_}),f.$set(a)},i(_){m||(rt(f.$$.fragment,_),m=!0)},o(_){wt(f.$$.fragment,_),m=!1},d(_){_&&M(c),Ur(f)}}}function e1(l,c,f){let m,_,v,{data:a}=c,{suffix:I="%"}=c,{decimals:k=0}=c,{fill:C="#00205B"}=c,{xKey:z="x"}=c,{yKey:O="y"}=c,{zKey:D=null}=c;return l.$$set=q=>{"data"in q&&f(0,a=q.data),"suffix"in q&&f(8,I=q.suffix),"decimals"in q&&f(9,k=q.decimals),"fill"in q&&f(1,C=q.fill),"xKey"in q&&f(2,z=q.xKey),"yKey"in q&&f(3,O=q.yKey),"zKey"in q&&f(4,D=q.zKey)},l.$$.update=()=>{l.$$.dirty&5&&f(7,m=a.map(q=>q[z])),l.$$.dirty&9&&f(6,_=[0,Math.max(...a.map(q=>q[O]))]),l.$$.dirty&768&&f(5,v=q=>q.toFixed(k)+I)},[a,C,z,O,D,v,_,m,I,k]}class t1 extends Na{constructor(c){super(),Va(this,c,e1,$v,Ua,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4})}}function rm(l,c,f){const m=l.slice();return m[7]=c[f],m[9]=f,m}function im(l){let c,f=l[0],m=[];for(let _=0;_<f.length;_+=1)m[_]=nm(rm(l,f,_));return{c(){c=ca("svg");for(let _=0;_<m.length;_+=1)m[_].c();this.h()},l(_){c=ha(_,"svg",{class:!0});var v=Q(c);for(let a=0;a<m.length;a+=1)m[a].l(v);v.forEach(M),this.h()},h(){L(c,"class","stack svelte-q6mgyr")},m(_,v){xe(_,c,v);for(let a=0;a<m.length;a+=1)m[a].m(c,null)},p(_,v){if(v&31){f=_[0];let a;for(a=0;a<f.length;a+=1){const I=rm(_,f,a);m[a]?m[a].p(I,v):(m[a]=nm(I),m[a].c(),m[a].m(c,null))}for(;a<m.length;a+=1)m[a].d(1);m.length=f.length}},d(_){_&&M(c),Ro(m,_)}}}function nm(l){let c,f;return{c(){c=ca("rect"),this.h()},l(m){c=ha(m,"rect",{class:!0,x:!0,style:!0}),Q(c).forEach(M),this.h()},h(){L(c,"class","cell svelte-q6mgyr"),L(c,"x",f=l[4][l[9]]/l[3]*100+"%"),he(c,"width",l[7][l[1]]/l[3]*100+"%"),he(c,"fill",l[2][l[9]])},m(m,_){xe(m,c,_)},p(m,_){_&24&&f!==(f=m[4][m[9]]/m[3]*100+"%")&&L(c,"x",f),_&11&&he(c,"width",m[7][m[1]]/m[3]*100+"%"),_&4&&he(c,"fill",m[2][m[9]])},d(m){m&&M(c)}}}function r1(l){let c,f=l[3]&&l[4]&&im(l);return{c(){f&&f.c(),c=Xi()},l(m){f&&f.l(m),c=Xi()},m(m,_){f&&f.m(m,_),xe(m,c,_)},p(m,[_]){m[3]&&m[4]?f?f.p(m,_):(f=im(m),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},i:_a,o:_a,d(m){f&&f.d(m),m&&M(c)}}}function i1(l,c,f){let{data:m}=c,{xKey:_="x"}=c,{yKey:v="y"}=c,{colors:a=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=c,I,k;function C(){f(3,I=m.map(O=>O[v]).reduce((O,D)=>O+D,0));let z=[0];m.forEach(O=>z.push(z[z.length-1]+O[v])),f(4,k=z)}return l.$$set=z=>{"data"in z&&f(0,m=z.data),"xKey"in z&&f(5,_=z.xKey),"yKey"in z&&f(1,v=z.yKey),"colors"in z&&f(2,a=z.colors)},l.$$.update=()=>{l.$$.dirty&3&&(m||v)&&C()},[m,v,a,I,k,_]}class As extends Na{constructor(c){super(),Va(this,c,i1,r1,Ua,{data:0,xKey:5,yKey:1,colors:2})}}function am(l,c,f){const m=l.slice();return m[12]=c[f],m[14]=f,m}function n1(l){let c,f,m=Bh(Math.round(l[12][l[3]]),"%)")+"",_;return{c(){c=X("span"),f=pe("(NI "),_=pe(m),this.h()},l(v){c=W(v,"SPAN",{class:!0,style:!0});var a=Q(c);f=fe(a,"(NI "),_=fe(a,m),a.forEach(M),this.h()},h(){L(c,"class",""),he(c,"color","#3878C5")},m(v,a){xe(v,c,a),P(c,f),P(c,_)},p(v,a){a&9&&m!==(m=Bh(Math.round(v[12][v[3]]),"%)")+"")&&Ht(_,m)},d(v){v&&M(c)}}}function a1(l){let c,f,m=Bh(Math.round(l[12][l[3]]),"%)")+"",_;return{c(){c=X("span"),f=pe("(2011 "),_=pe(m),this.h()},l(v){c=W(v,"SPAN",{class:!0,style:!0});var a=Q(c);f=fe(a,"(2011 "),_=fe(a,m),a.forEach(M),this.h()},h(){L(c,"class",""),he(c,"color","#3878C5")},m(v,a){xe(v,c,a),P(c,f),P(c,_)},p(v,a){a&9&&m!==(m=Bh(Math.round(v[12][v[3]]),"%)")+"")&&Ht(_,m)},d(v){v&&M(c)}}}function om(l){let c,f,m,_,v=l[12][l[1]]+"",a,I,k=l[6](l[12][l[2]])+"",C,z,O,D;function q(_e,ke){if(_e[3]=="prev")return a1;if(_e[3])return n1}let se=q(l),Te=se&&se(l);return{c(){c=X("li"),f=ca("svg"),m=ca("rect"),_=Re(),a=pe(v),I=Re(),C=pe(k),z=Re(),Te&&Te.c(),O=Re(),D=X("br"),this.h()},l(_e){c=W(_e,"LI",{style:!0,class:!0});var ke=Q(c);f=ha(ke,"svg",{width:!0,height:!0,class:!0});var Ce=Q(f);m=ha(Ce,"rect",{width:!0,height:!0,style:!0});var mt=Q(m);mt.forEach(M),Ce.forEach(M),_=Be(ke),a=fe(ke,v),I=Be(ke),C=fe(ke,k),z=Be(ke),Te&&Te.l(ke),ke.forEach(M),O=Be(_e),D=W(_e,"BR",{}),this.h()},h(){L(m,"width","20"),L(m,"height","30"),he(m,"fill",l[4][l[14]]),L(f,"width","20"),L(f,"height","30"),L(f,"class","bullet svelte-17303hq"),he(c,"color",l[5]),L(c,"class","svelte-17303hq")},m(_e,ke){xe(_e,c,ke),P(c,f),P(f,m),P(c,_),P(c,a),P(c,I),P(c,C),P(c,z),Te&&Te.m(c,null),xe(_e,O,ke),xe(_e,D,ke)},p(_e,ke){ke&16&&he(m,"fill",_e[4][_e[14]]),ke&3&&v!==(v=_e[12][_e[1]]+"")&&Ht(a,v),ke&5&&k!==(k=_e[6](_e[12][_e[2]])+"")&&Ht(C,k),se===(se=q(_e))&&Te?Te.p(_e,ke):(Te&&Te.d(1),Te=se&&se(_e),Te&&(Te.c(),Te.m(c,null))),ke&32&&he(c,"color",_e[5])},d(_e){_e&&M(c),Te&&Te.d(),_e&&M(O),_e&&M(D)}}}function o1(l){let c,f=l[0],m=[];for(let _=0;_<f.length;_+=1)m[_]=om(am(l,f,_));return{c(){c=X("ul");for(let _=0;_<m.length;_+=1)m[_].c();this.h()},l(_){c=W(_,"UL",{class:!0});var v=Q(c);for(let a=0;a<m.length;a+=1)m[a].l(v);v.forEach(M),this.h()},h(){L(c,"class","svelte-17303hq")},m(_,v){xe(_,c,v);for(let a=0;a<m.length;a+=1)m[a].m(c,null)},p(_,[v]){if(v&127){f=_[0];let a;for(a=0;a<f.length;a+=1){const I=am(_,f,a);m[a]?m[a].p(I,v):(m[a]=om(I),m[a].c(),m[a].m(c,null))}for(;a<m.length;a+=1)m[a].d(1);m.length=f.length}},i:_a,o:_a,d(_){_&&M(c),Ro(m,_)}}}function s1(l,c,f){let m,{data:_}=c,{xKey:v="x"}=c,{yKey:a="y"}=c,{zKey:I="ew"}=c,{colors:k=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=c,{textColor:C="#555"}=c,{mutedColor:z="#999"}=c,{decimals:O=null}=c,{round:D=!1}=c;function q(se){let Te;return O?Te=(se/m*100).toFixed(O)+"%":se/m*100<1?Te="<1%":Te=(se/m*100).toFixed(0)+"%",Te}return l.$$set=se=>{"data"in se&&f(0,_=se.data),"xKey"in se&&f(1,v=se.xKey),"yKey"in se&&f(2,a=se.yKey),"zKey"in se&&f(3,I=se.zKey),"colors"in se&&f(4,k=se.colors),"textColor"in se&&f(5,C=se.textColor),"mutedColor"in se&&f(7,z=se.mutedColor),"decimals"in se&&f(8,O=se.decimals),"round"in se&&f(9,D=se.round)},l.$$.update=()=>{l.$$.dirty&5&&(m=_.map(se=>se[a]).reduce((se,Te)=>se+Te,0)),l.$$.dirty&9&&_.map(se=>se[I]).reduce((se,Te)=>se+Te,0)},[_,v,a,I,k,C,q,z,O,D]}class by extends Na{constructor(c){super(),Va(this,c,s1,o1,Ua,{data:0,xKey:1,yKey:2,zKey:3,colors:4,textColor:5,mutedColor:7,decimals:8,round:9})}}function sm(l){let c,f,m,_;f=new As({props:{data:l[0],yKey:l[4],colors:l[5]}});let v=l[7]&&lm(l);return{c(){c=X("div"),Fr(f.$$.fragment),m=Re(),v&&v.c(),this.h()},l(a){c=W(a,"DIV",{class:!0,style:!0});var I=Q(c);Nr(f.$$.fragment,I),m=Be(I),v&&v.l(I),I.forEach(M),this.h()},h(){L(c,"class","chart svelte-1tebgpk"),he(c,"height",l[1]*.28+"px")},m(a,I){xe(a,c,I),Vr(f,c,null),P(c,m),v&&v.m(c,null),_=!0},p(a,I){const k={};I&1&&(k.data=a[0]),I&16&&(k.yKey=a[4]),I&32&&(k.colors=a[5]),f.$set(k),a[7]?v?v.p(a,I):(v=lm(a),v.c(),v.m(c,null)):v&&(v.d(1),v=null),(!_||I&2)&&he(c,"height",a[1]*.28+"px")},i(a){_||(rt(f.$$.fragment,a),_=!0)},o(a){wt(f.$$.fragment,a),_=!1},d(a){a&&M(c),Ur(f),v&&v.d()}}}function lm(l){let c,f;return{c(){c=X("div"),f=pe(l[7]),this.h()},l(m){c=W(m,"DIV",{class:!0});var _=Q(c);f=fe(_,l[7]),_.forEach(M),this.h()},h(){L(c,"class","label svelte-1tebgpk")},m(m,_){xe(m,c,_),P(c,f)},p(m,_){_&128&&Ht(f,m[7])},d(m){m&&M(c)}}}function l1(l){let c,f,m,_,v,a,I;f=new As({props:{data:l[0],yKey:l[3],colors:l[5]}});let k=l[4]&&sm(l);return a=new by({props:{data:l[0],xKey:l[2],yKey:l[3],zKey:l[4],decimals:l[6],colors:l[5]}}),{c(){c=X("div"),Fr(f.$$.fragment),m=Re(),k&&k.c(),_=Re(),v=X("div"),Fr(a.$$.fragment),this.h()},l(C){c=W(C,"DIV",{class:!0,style:!0});var z=Q(c);Nr(f.$$.fragment,z),z.forEach(M),m=Be(C),k&&k.l(C),_=Be(C),v=W(C,"DIV",{class:!0});var O=Q(v);Nr(a.$$.fragment,O),O.forEach(M),this.h()},h(){L(c,"class","chart svelte-1tebgpk"),he(c,"padding-top","3px"),he(c,"height",(l[4]?l[1]*.72:l[1])+"px"),L(v,"class","legend svelte-1tebgpk")},m(C,z){xe(C,c,z),Vr(f,c,null),xe(C,m,z),k&&k.m(C,z),xe(C,_,z),xe(C,v,z),Vr(a,v,null),I=!0},p(C,[z]){const O={};z&1&&(O.data=C[0]),z&8&&(O.yKey=C[3]),z&32&&(O.colors=C[5]),f.$set(O),(!I||z&18)&&he(c,"height",(C[4]?C[1]*.72:C[1])+"px"),C[4]?k?(k.p(C,z),z&16&&rt(k,1)):(k=sm(C),k.c(),rt(k,1),k.m(_.parentNode,_)):k&&(Rn(),wt(k,1,1,()=>{k=null}),Bn());const D={};z&1&&(D.data=C[0]),z&4&&(D.xKey=C[2]),z&8&&(D.yKey=C[3]),z&16&&(D.zKey=C[4]),z&64&&(D.decimals=C[6]),z&32&&(D.colors=C[5]),a.$set(D)},i(C){I||(rt(f.$$.fragment,C),rt(k),rt(a.$$.fragment,C),I=!0)},o(C){wt(f.$$.fragment,C),wt(k),wt(a.$$.fragment,C),I=!1},d(C){C&&M(c),Ur(f),C&&M(m),k&&k.d(C),C&&M(_),C&&M(v),Ur(a)}}}function u1(l,c,f){let{data:m}=c,{height:_=80}=c,{xKey:v="x"}=c,{yKey:a="y"}=c,{zKey:I="ew"}=c,{colors:k=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=c,{decimals:C=null}=c,{label:z=null}=c;return l.$$set=O=>{"data"in O&&f(0,m=O.data),"height"in O&&f(1,_=O.height),"xKey"in O&&f(2,v=O.xKey),"yKey"in O&&f(3,a=O.yKey),"zKey"in O&&f(4,I=O.zKey),"colors"in O&&f(5,k=O.colors),"decimals"in O&&f(6,C=O.decimals),"label"in O&&f(7,z=O.label)},[m,_,v,a,I,k,C,z]}class ua extends Na{constructor(c){super(),Va(this,c,u1,l1,Ua,{data:0,height:1,xKey:2,yKey:3,zKey:4,colors:5,decimals:6,label:7})}}function um(l){let c,f,m;return f=new As({props:{data:l[0],yKey:l[3],colors:l[6]}}),{c(){c=X("div"),Fr(f.$$.fragment),this.h()},l(_){c=W(_,"DIV",{class:!0,style:!0});var v=Q(c);Nr(f.$$.fragment,v),v.forEach(M),this.h()},h(){L(c,"class","chart svelte-1tebgpk"),he(c,"padding-top","3px"),he(c,"height",l[1]+"px")},m(_,v){xe(_,c,v),Vr(f,c,null),m=!0},p(_,v){const a={};v&1&&(a.data=_[0]),v&8&&(a.yKey=_[3]),v&64&&(a.colors=_[6]),f.$set(a),(!m||v&2)&&he(c,"height",_[1]+"px")},i(_){m||(rt(f.$$.fragment,_),m=!0)},o(_){wt(f.$$.fragment,_),m=!1},d(_){_&&M(c),Ur(f)}}}function cm(l){let c,f,m,_,v,a,I,k,C;return f=new As({props:{data:l[0],yKey:l[3],colors:l[6]}}),v=new As({props:{data:l[0],yKey:l[5],colors:l[6]}}),{c(){c=X("div"),Fr(f.$$.fragment),m=Re(),_=X("div"),Fr(v.$$.fragment),a=Re(),I=X("div"),k=pe(l[8]),this.h()},l(z){c=W(z,"DIV",{class:!0,style:!0});var O=Q(c);Nr(f.$$.fragment,O),O.forEach(M),m=Be(z),_=W(z,"DIV",{class:!0,style:!0});var D=Q(_);Nr(v.$$.fragment,D),a=Be(D),I=W(D,"DIV",{class:!0});var q=Q(I);k=fe(q,l[8]),q.forEach(M),D.forEach(M),this.h()},h(){L(c,"class","chart svelte-1tebgpk"),he(c,"padding-top","3px"),he(c,"height",(l[5]?l[1]*.72:l[1])+"px"),L(I,"class","label svelte-1tebgpk"),L(_,"class","chart svelte-1tebgpk"),he(_,"height",l[1]*.28+"px")},m(z,O){xe(z,c,O),Vr(f,c,null),xe(z,m,O),xe(z,_,O),Vr(v,_,null),P(_,a),P(_,I),P(I,k),C=!0},p(z,O){const D={};O&1&&(D.data=z[0]),O&8&&(D.yKey=z[3]),O&64&&(D.colors=z[6]),f.$set(D),(!C||O&34)&&he(c,"height",(z[5]?z[1]*.72:z[1])+"px");const q={};O&1&&(q.data=z[0]),O&32&&(q.yKey=z[5]),O&64&&(q.colors=z[6]),v.$set(q),(!C||O&256)&&Ht(k,z[8]),(!C||O&2)&&he(_,"height",z[1]*.28+"px")},i(z){C||(rt(f.$$.fragment,z),rt(v.$$.fragment,z),C=!0)},o(z){wt(f.$$.fragment,z),wt(v.$$.fragment,z),C=!1},d(z){z&&M(c),Ur(f),z&&M(m),z&&M(_),Ur(v)}}}function hm(l){let c,f,m,_,v,a,I,k,C;return f=new As({props:{data:l[0],yKey:l[3],colors:l[6]}}),v=new As({props:{data:l[0],yKey:l[5],colors:l[6]}}),{c(){c=X("div"),Fr(f.$$.fragment),m=Re(),_=X("div"),Fr(v.$$.fragment),a=Re(),I=X("div"),k=pe(l[8]),this.h()},l(z){c=W(z,"DIV",{class:!0,style:!0});var O=Q(c);Nr(f.$$.fragment,O),O.forEach(M),m=Be(z),_=W(z,"DIV",{class:!0,style:!0});var D=Q(_);Nr(v.$$.fragment,D),a=Be(D),I=W(D,"DIV",{class:!0});var q=Q(I);k=fe(q,l[8]),q.forEach(M),D.forEach(M),this.h()},h(){L(c,"class","chart svelte-1tebgpk"),he(c,"padding-top","3px"),he(c,"height",(l[5]?l[1]*.72:l[1])+"px"),L(I,"class","label svelte-1tebgpk"),L(_,"class","chart svelte-1tebgpk"),he(_,"height",l[1]*.28+"px")},m(z,O){xe(z,c,O),Vr(f,c,null),xe(z,m,O),xe(z,_,O),Vr(v,_,null),P(_,a),P(_,I),P(I,k),C=!0},p(z,O){const D={};O&1&&(D.data=z[0]),O&8&&(D.yKey=z[3]),O&64&&(D.colors=z[6]),f.$set(D),(!C||O&34)&&he(c,"height",(z[5]?z[1]*.72:z[1])+"px");const q={};O&1&&(q.data=z[0]),O&32&&(q.yKey=z[5]),O&64&&(q.colors=z[6]),v.$set(q),(!C||O&256)&&Ht(k,z[8]),(!C||O&2)&&he(_,"height",z[1]*.28+"px")},i(z){C||(rt(f.$$.fragment,z),rt(v.$$.fragment,z),C=!0)},o(z){wt(f.$$.fragment,z),wt(v.$$.fragment,z),C=!1},d(z){z&&M(c),Ur(f),z&&M(m),z&&M(_),Ur(v)}}}function pm(l){let c,f,m,_,v,a,I,k,C;return f=new As({props:{data:l[0],yKey:l[3],colors:l[6]}}),v=new As({props:{data:l[0],yKey:l[5],colors:l[6]}}),{c(){c=X("div"),Fr(f.$$.fragment),m=Re(),_=X("div"),Fr(v.$$.fragment),a=Re(),I=X("div"),k=pe("2011 comparison not available"),this.h()},l(z){c=W(z,"DIV",{class:!0,style:!0});var O=Q(c);Nr(f.$$.fragment,O),O.forEach(M),m=Be(z),_=W(z,"DIV",{class:!0,style:!0});var D=Q(_);Nr(v.$$.fragment,D),a=Be(D),I=W(D,"DIV",{class:!0,style:!0});var q=Q(I);k=fe(q,"2011 comparison not available"),q.forEach(M),D.forEach(M),this.h()},h(){L(c,"class","chart svelte-1tebgpk"),he(c,"padding-top","3px"),he(c,"height",(l[5],l[1]*.72+"px")),L(I,"class","label svelte-1tebgpk"),he(I,"background-color","#d8d8d8 "),he(I,"color","#000000"),L(_,"class","chart svelte-1tebgpk"),he(_,"height",l[1]*.28+"px")},m(z,O){xe(z,c,O),Vr(f,c,null),xe(z,m,O),xe(z,_,O),Vr(v,_,null),P(_,a),P(_,I),P(I,k),C=!0},p(z,O){const D={};O&1&&(D.data=z[0]),O&8&&(D.yKey=z[3]),O&64&&(D.colors=z[6]),f.$set(D),(!C||O&34)&&he(c,"height",(z[5],z[1]*.72+"px"));const q={};O&1&&(q.data=z[0]),O&32&&(q.yKey=z[5]),O&64&&(q.colors=z[6]),v.$set(q),(!C||O&2)&&he(_,"height",z[1]*.28+"px")},i(z){C||(rt(f.$$.fragment,z),rt(v.$$.fragment,z),C=!0)},o(z){wt(f.$$.fragment,z),wt(v.$$.fragment,z),C=!1},d(z){z&&M(c),Ur(f),z&&M(m),z&&M(_),Ur(v)}}}function c1(l){let c,f,m,_,v,a,I,k=!l[5]&&!l[4]&&um(l),C=l[5]=="ew"&&cm(l),z=l[5]&&l[4]&&hm(l),O=!l[5]&&l[4]&&pm(l);return a=new by({props:{data:l[0],xKey:l[2],yKey:l[3],zKey:l[5],decimals:l[7],colors:l[6]}}),{c(){k&&k.c(),c=Re(),C&&C.c(),f=Re(),z&&z.c(),m=Re(),O&&O.c(),_=Re(),v=X("div"),Fr(a.$$.fragment),this.h()},l(D){k&&k.l(D),c=Be(D),C&&C.l(D),f=Be(D),z&&z.l(D),m=Be(D),O&&O.l(D),_=Be(D),v=W(D,"DIV",{class:!0});var q=Q(v);Nr(a.$$.fragment,q),q.forEach(M),this.h()},h(){L(v,"class","legend svelte-1tebgpk")},m(D,q){k&&k.m(D,q),xe(D,c,q),C&&C.m(D,q),xe(D,f,q),z&&z.m(D,q),xe(D,m,q),O&&O.m(D,q),xe(D,_,q),xe(D,v,q),Vr(a,v,null),I=!0},p(D,[q]){!D[5]&&!D[4]?k?(k.p(D,q),q&48&&rt(k,1)):(k=um(D),k.c(),rt(k,1),k.m(c.parentNode,c)):k&&(Rn(),wt(k,1,1,()=>{k=null}),Bn()),D[5]=="ew"?C?(C.p(D,q),q&32&&rt(C,1)):(C=cm(D),C.c(),rt(C,1),C.m(f.parentNode,f)):C&&(Rn(),wt(C,1,1,()=>{C=null}),Bn()),D[5]&&D[4]?z?(z.p(D,q),q&48&&rt(z,1)):(z=hm(D),z.c(),rt(z,1),z.m(m.parentNode,m)):z&&(Rn(),wt(z,1,1,()=>{z=null}),Bn()),!D[5]&&D[4]?O?(O.p(D,q),q&48&&rt(O,1)):(O=pm(D),O.c(),rt(O,1),O.m(_.parentNode,_)):O&&(Rn(),wt(O,1,1,()=>{O=null}),Bn());const se={};q&1&&(se.data=D[0]),q&4&&(se.xKey=D[2]),q&8&&(se.yKey=D[3]),q&32&&(se.zKey=D[5]),q&128&&(se.decimals=D[7]),q&64&&(se.colors=D[6]),a.$set(se)},i(D){I||(rt(k),rt(C),rt(z),rt(O),rt(a.$$.fragment,D),I=!0)},o(D){wt(k),wt(C),wt(z),wt(O),wt(a.$$.fragment,D),I=!1},d(D){k&&k.d(D),D&&M(c),C&&C.d(D),D&&M(f),z&&z.d(D),D&&M(m),O&&O.d(D),D&&M(_),D&&M(v),Ur(a)}}}function h1(l,c,f){let{data:m}=c,{height:_=80}=c,{xKey:v="x"}=c,{yKey:a="y"}=c,{ovrtm:I=null}=c,{zKey:k="ew"}=c,{colors:C=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=c,{decimals:z=null}=c,{label:O=null}=c;return l.$$set=D=>{"data"in D&&f(0,m=D.data),"height"in D&&f(1,_=D.height),"xKey"in D&&f(2,v=D.xKey),"yKey"in D&&f(3,a=D.yKey),"ovrtm"in D&&f(4,I=D.ovrtm),"zKey"in D&&f(5,k=D.zKey),"colors"in D&&f(6,C=D.colors),"decimals"in D&&f(7,z=D.decimals),"label"in D&&f(8,O=D.label)},[m,_,v,a,I,k,C,z,O]}class jp extends Na{constructor(c){super(),Va(this,c,h1,c1,Ua,{data:0,height:1,xKey:2,yKey:3,ovrtm:4,zKey:5,colors:6,decimals:7,label:8})}}var p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f1={rgb2hsl:Cc,rgb2hsv:qh,rgb2hwb:Mc,rgb2cmyk:Dc,rgb2keyword:Lc,rgb2xyz:Xp,rgb2lab:Wp,rgb2lch:d1,hsl2rgb:Zh,hsl2hsv:m1,hsl2hwb:y1,hsl2cmyk:g1,hsl2keyword:_1,hsv2rgb:Gh,hsv2hsl:v1,hsv2hwb:b1,hsv2cmyk:x1,hsv2keyword:w1,hwb2rgb:Rc,hwb2hsl:E1,hwb2hsv:S1,hwb2cmyk:k1,hwb2keyword:I1,cmyk2rgb:Bc,cmyk2hsl:T1,cmyk2hsv:A1,cmyk2hwb:z1,cmyk2keyword:P1,keyword2rgb:Nl,keyword2hsl:L1,keyword2hsv:R1,keyword2hwb:B1,keyword2cmyk:O1,keyword2lab:F1,keyword2xyz:N1,xyz2rgb:xy,xyz2lab:wy,xyz2lch:C1,lab2xyz:Jp,lab2rgb:Ey,lab2lch:Yp,lch2lab:Qp,lch2xyz:M1,lch2rgb:D1};function Cc(l){var c=l[0]/255,f=l[1]/255,m=l[2]/255,_=Math.min(c,f,m),v=Math.max(c,f,m),a=v-_,I,k,C;return v==_?I=0:c==v?I=(f-m)/a:f==v?I=2+(m-c)/a:m==v&&(I=4+(c-f)/a),I=Math.min(I*60,360),I<0&&(I+=360),C=(_+v)/2,v==_?k=0:C<=.5?k=a/(v+_):k=a/(2-v-_),[I,k*100,C*100]}function qh(l){var c=l[0],f=l[1],m=l[2],_=Math.min(c,f,m),v=Math.max(c,f,m),a=v-_,I,k,C;return v==0?k=0:k=a/v*1e3/10,v==_?I=0:c==v?I=(f-m)/a:f==v?I=2+(m-c)/a:m==v&&(I=4+(c-f)/a),I=Math.min(I*60,360),I<0&&(I+=360),C=v/255*1e3/10,[I,k,C]}function Mc(l){var c=l[0],f=l[1],v=l[2],m=Cc(l)[0],_=1/255*Math.min(c,Math.min(f,v)),v=1-1/255*Math.max(c,Math.max(f,v));return[m,_*100,v*100]}function Dc(l){var c=l[0]/255,f=l[1]/255,m=l[2]/255,_,v,a,I;return I=Math.min(1-c,1-f,1-m),_=(1-c-I)/(1-I)||0,v=(1-f-I)/(1-I)||0,a=(1-m-I)/(1-I)||0,[_*100,v*100,a*100,I*100]}function Lc(l){return Sy[JSON.stringify(l)]}function Xp(l){var c=l[0]/255,f=l[1]/255,m=l[2]/255;c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,m=m>.04045?Math.pow((m+.055)/1.055,2.4):m/12.92;var _=c*.4124+f*.3576+m*.1805,v=c*.2126+f*.7152+m*.0722,a=c*.0193+f*.1192+m*.9505;return[_*100,v*100,a*100]}function Wp(l){var c=Xp(l),f=c[0],m=c[1],_=c[2],v,a,I;return f/=95.047,m/=100,_/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,v=116*m-16,a=500*(f-m),I=200*(m-_),[v,a,I]}function d1(l){return Yp(Wp(l))}function Zh(l){var c=l[0]/360,f=l[1]/100,m=l[2]/100,_,v,a,I,k;if(f==0)return k=m*255,[k,k,k];m<.5?v=m*(1+f):v=m+f-m*f,_=2*m-v,I=[0,0,0];for(var C=0;C<3;C++)a=c+1/3*-(C-1),a<0&&a++,a>1&&a--,6*a<1?k=_+(v-_)*6*a:2*a<1?k=v:3*a<2?k=_+(v-_)*(2/3-a)*6:k=_,I[C]=k*255;return I}function m1(l){var c=l[0],f=l[1]/100,m=l[2]/100,_,v;return m===0?[0,0,0]:(m*=2,f*=m<=1?m:2-m,v=(m+f)/2,_=2*f/(m+f),[c,_*100,v*100])}function y1(l){return Mc(Zh(l))}function g1(l){return Dc(Zh(l))}function _1(l){return Lc(Zh(l))}function Gh(l){var c=l[0]/60,f=l[1]/100,k=l[2]/100,m=Math.floor(c)%6,_=c-Math.floor(c),v=255*k*(1-f),a=255*k*(1-f*_),I=255*k*(1-f*(1-_)),k=255*k;switch(m){case 0:return[k,I,v];case 1:return[a,k,v];case 2:return[v,k,I];case 3:return[v,a,k];case 4:return[I,v,k];case 5:return[k,v,a]}}function v1(l){var c=l[0],f=l[1]/100,m=l[2]/100,_,v;return v=(2-f)*m,_=f*m,_/=v<=1?v:2-v,_=_||0,v/=2,[c,_*100,v*100]}function b1(l){return Mc(Gh(l))}function x1(l){return Dc(Gh(l))}function w1(l){return Lc(Gh(l))}function Rc(l){var c=l[0]/360,f=l[1]/100,m=l[2]/100,_=f+m,v,a,I,k;switch(_>1&&(f/=_,m/=_),v=Math.floor(6*c),a=1-m,I=6*c-v,(v&1)!=0&&(I=1-I),k=f+I*(a-f),v){default:case 6:case 0:r=a,g=k,b=f;break;case 1:r=k,g=a,b=f;break;case 2:r=f,g=a,b=k;break;case 3:r=f,g=k,b=a;break;case 4:r=k,g=f,b=a;break;case 5:r=a,g=f,b=k;break}return[r*255,g*255,b*255]}function E1(l){return Cc(Rc(l))}function S1(l){return qh(Rc(l))}function k1(l){return Dc(Rc(l))}function I1(l){return Lc(Rc(l))}function Bc(l){var c=l[0]/100,f=l[1]/100,m=l[2]/100,_=l[3]/100,v,a,I;return v=1-Math.min(1,c*(1-_)+_),a=1-Math.min(1,f*(1-_)+_),I=1-Math.min(1,m*(1-_)+_),[v*255,a*255,I*255]}function T1(l){return Cc(Bc(l))}function A1(l){return qh(Bc(l))}function z1(l){return Mc(Bc(l))}function P1(l){return Lc(Bc(l))}function xy(l){var c=l[0]/100,f=l[1]/100,m=l[2]/100,_,v,a;return _=c*3.2406+f*-1.5372+m*-.4986,v=c*-.9689+f*1.8758+m*.0415,a=c*.0557+f*-.204+m*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v=v*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,_=Math.min(Math.max(0,_),1),v=Math.min(Math.max(0,v),1),a=Math.min(Math.max(0,a),1),[_*255,v*255,a*255]}function wy(l){var c=l[0],f=l[1],m=l[2],_,v,a;return c/=95.047,f/=100,m/=108.883,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,_=116*f-16,v=500*(c-f),a=200*(f-m),[_,v,a]}function C1(l){return Yp(wy(l))}function Jp(l){var c=l[0],f=l[1],m=l[2],_,v,a,I;return c<=8?(v=c*100/903.3,I=7.787*(v/100)+16/116):(v=100*Math.pow((c+16)/116,3),I=Math.pow(v/100,1/3)),_=_/95.047<=.008856?_=95.047*(f/500+I-16/116)/7.787:95.047*Math.pow(f/500+I,3),a=a/108.883<=.008859?a=108.883*(I-m/200-16/116)/7.787:108.883*Math.pow(I-m/200,3),[_,v,a]}function Yp(l){var c=l[0],f=l[1],m=l[2],_,v,a;return _=Math.atan2(m,f),v=_*360/2/Math.PI,v<0&&(v+=360),a=Math.sqrt(f*f+m*m),[c,a,v]}function Ey(l){return xy(Jp(l))}function Qp(l){var c=l[0],f=l[1],m=l[2],_,v,a;return a=m/360*2*Math.PI,_=f*Math.cos(a),v=f*Math.sin(a),[c,_,v]}function M1(l){return Jp(Qp(l))}function D1(l){return Ey(Qp(l))}function Nl(l){return qp[l]}function L1(l){return Cc(Nl(l))}function R1(l){return qh(Nl(l))}function B1(l){return Mc(Nl(l))}function O1(l){return Dc(Nl(l))}function F1(l){return Wp(Nl(l))}function N1(l){return Xp(Nl(l))}var qp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Sy={};for(var fm in qp)Sy[JSON.stringify(qp[fm])]=fm;var Dp=f1,Ll=function(){return new Oc};for(var wc in Dp){Ll[wc+"Raw"]=function(l){return function(c){return typeof c=="number"&&(c=Array.prototype.slice.call(arguments)),Dp[l](c)}}(wc);var dm=/(\w+)2(\w+)/.exec(wc),Lp=dm[1],V1=dm[2];Ll[Lp]=Ll[Lp]||{},Ll[Lp][V1]=Ll[wc]=function(l){return function(c){typeof c=="number"&&(c=Array.prototype.slice.call(arguments));var f=Dp[l](c);if(typeof f=="string"||f===void 0)return f;for(var m=0;m<f.length;m++)f[m]=Math.round(f[m]);return f}}(wc)}var Oc=function(){this.convs={}};Oc.prototype.routeSpace=function(l,c){var f=c[0];return f===void 0?this.getValues(l):(typeof f=="number"&&(f=Array.prototype.slice.call(c)),this.setValues(l,f))};Oc.prototype.setValues=function(l,c){return this.space=l,this.convs={},this.convs[l]=c,this};Oc.prototype.getValues=function(l){var c=this.convs[l];if(!c){var f=this.space,m=this.convs[f];c=Ll[f][l](m),this.convs[l]=c}return c};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(l){Oc.prototype[l]=function(c){return this.routeSpace(l,arguments)}});var U1=Ll,Rp=U1,j1=function(l){var c,f,m,_;if(c=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(l)){var v=c[1],a=v.replace(/a$/,""),I=a==="cmyk"?4:3;f=Rp[a],m=c[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(C,z){return/%$/.test(C)&&z===I?parseFloat(C)/100:(/%$/.test(C),parseFloat(C))}),v===a&&m.push(1),_=m[I]===void 0?1:m[I],m=m.slice(0,I),f[a]=function(){return m}}else if(/^#[A-Fa-f0-9]+$/.test(l)){var a=l.replace(/^#/,""),I=a.length;f=Rp.rgb,m=a.split(I===3?/(.)/:/(..)/),m=m.filter(Boolean).map(function(O){return parseInt(I===3?O+O:O,16)}),_=1,f.rgb=function(){return m},m[0]||(m[0]=0),m[1]||(m[1]=0),m[2]||(m[2]=0)}else f=Rp.keyword,f.keyword=function(){return l},m=l,_=1;var k={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{k.rgb=f.rgb(m)}catch{}try{k.hsl=f.hsl(m)}catch{}try{k.hsv=f.hsv(m)}catch{}try{k.cmyk=f.cmyk(m)}catch{}try{k.keyword=f.keyword(m)}catch{}return k.rgb&&(k.hex="#"+k.rgb.map(function(C){var z=C.toString(16);return z.length===1?"0"+z:z}).join("")),k.rgb&&(k.rgba=k.rgb.concat(_)),k.hsl&&(k.hsla=k.hsl.concat(_)),k.hsv&&(k.hsva=k.hsv.concat(_)),k.cmyk&&(k.cmyka=k.cmyk.concat(_)),k};function q1(l){let c,f;const m=l[5].default,_=Pu(m,l,l[4],null);return{c(){c=X("span"),_&&_.c(),this.h()},l(v){c=W(v,"SPAN",{class:!0,style:!0,role:!0});var a=Q(c);_&&_.l(a),a.forEach(M),this.h()},h(){L(c,"class","em svelte-s1t2y4"),he(c,"background-color",l[0]),he(c,"color",l[2]),L(c,"role","presentation"),Jr(c,"nowrap",l[1])},m(v,a){xe(v,c,a),_&&_.m(c,null),f=!0},p(v,[a]){_&&_.p&&(!f||a&16)&&Cu(_,m,v,v[4],f?Du(m,v[4],a,null):Mu(v[4]),null),(!f||a&1)&&he(c,"background-color",v[0]),(!f||a&4)&&he(c,"color",v[2]),a&2&&Jr(c,"nowrap",v[1])},i(v){f||(rt(_,v),f=!0)},o(v){wt(_,v),f=!1},d(v){v&&M(c),_&&_.d(v)}}}function Z1(l,c,f){let m,{$$slots:_={},$$scope:v}=c,{color:a="lightgrey"}=c,{nowrap:I=!0}=c;function k(z){return(z[0]*299+z[1]*587+z[2]*114)/1e3>125?"black":"white"}let C="black";return l.$$set=z=>{"color"in z&&f(0,a=z.color),"nowrap"in z&&f(1,I=z.nowrap),"$$scope"in z&&f(4,v=z.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&f(3,m=j1(a).rgb),l.$$.dirty&8&&m&&f(2,C=k(m))},[a,I,C,m,v,_]}class Kh extends Na{constructor(c){super(),Va(this,c,Z1,q1,Ua,{color:0,nowrap:1})}}function mm(l,c,f){const m=l.slice();return m[33]=c[f],m[36]=c,m[35]=f,m}function ym(l,c,f){const m=l.slice();return m[33]=c[f],m[34]=c,m[35]=f,m}function G1(l){let c,f,m=(l[0]?l[0]:"Select one")+"",_,v,a,I,k,C;return{c(){c=X("a"),f=X("span"),_=pe(m),v=Re(),a=X("span"),I=pe("\xA0"),this.h()},l(z){c=W(z,"A",{id:!0,class:!0});var O=Q(c);f=W(O,"SPAN",{class:!0});var D=Q(f);_=fe(D,m),D.forEach(M),v=Be(O),a=W(O,"SPAN",{class:!0});var q=Q(a);I=fe(q,"\xA0"),q.forEach(M),O.forEach(M),this.h()},h(){L(f,"class","svelte-13flvue"),L(a,"class","button svelte-13flvue"),Jr(a,"search",l[3]),Jr(a,"down",!l[3]),L(c,"id","toggle"),L(c,"class","svelte-13flvue")},m(z,O){xe(z,c,O),P(c,f),P(f,_),P(c,v),P(c,a),P(a,I),k||(C=Li(c,"click",l[12]),k=!0)},p(z,O){O[0]&1&&m!==(m=(z[0]?z[0]:"Select one")+"")&&Ht(_,m),O[0]&8&&Jr(a,"search",z[3]),O[0]&8&&Jr(a,"down",!z[3])},d(z){z&&M(c),k=!1,C()}}}function K1(l){let c,f,m=l[5][l[1]]+"",_,v,a,I,k,C,z,O=l[2]&&gm(l);return{c(){c=X("a"),f=X("span"),_=pe(m),v=Re(),O&&O.c(),a=Re(),I=X("span"),k=pe("\xA0"),this.h()},l(D){c=W(D,"A",{id:!0,class:!0});var q=Q(c);f=W(q,"SPAN",{class:!0});var se=Q(f);_=fe(se,m),v=Be(se),O&&O.l(se),se.forEach(M),a=Be(q),I=W(q,"SPAN",{class:!0});var Te=Q(I);k=fe(Te,"\xA0"),Te.forEach(M),q.forEach(M),this.h()},h(){L(f,"class","selection svelte-13flvue"),L(I,"class","button close svelte-13flvue"),L(c,"id","toggle"),L(c,"class","selected svelte-13flvue")},m(D,q){xe(D,c,q),P(c,f),P(f,_),P(f,v),O&&O.m(f,null),P(c,a),P(c,I),P(I,k),C||(z=[Li(I,"click",l[14]),Li(c,"click",l[12])],C=!0)},p(D,q){q[0]&34&&m!==(m=D[5][D[1]]+"")&&Ht(_,m),D[2]?O?O.p(D,q):(O=gm(D),O.c(),O.m(f,null)):O&&(O.d(1),O=null)},d(D){D&&M(c),O&&O.d(),C=!1,Ol(z)}}}function gm(l){let c,f=l[5][l[2]]+"",m;return{c(){c=X("small"),m=pe(f),this.h()},l(_){c=W(_,"SMALL",{class:!0});var v=Q(c);m=fe(v,f),v.forEach(M),this.h()},h(){L(c,"class","svelte-13flvue")},m(_,v){xe(_,c,v),P(c,m)},p(_,v){v[0]&36&&f!==(f=_[5][_[2]]+"")&&Ht(m,f)},d(_){_&&M(c)}}}function _m(l){let c,f,m,_,v,a;function I(z,O){return z[4].length<3?J1:z[8][0]&&z[2]?W1:z[8][0]?X1:H1}let k=I(l),C=k(l);return{c(){c=X("div"),f=X("input"),m=Re(),_=X("ul"),C.c(),this.h()},l(z){c=W(z,"DIV",{id:!0,style:!0,class:!0});var O=Q(c);f=W(O,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),m=Be(O),_=W(O,"UL",{class:!0});var D=Q(_);C.l(D),D.forEach(M),O.forEach(M),this.h()},h(){L(f,"type","text"),L(f,"placeholder",""),L(f,"autocomplete","false"),f.autofocus="autofocus",L(f,"onfocus","this.select()"),L(f,"class","svelte-13flvue"),L(_,"class","svelte-13flvue"),L(c,"id","dropdown"),he(c,"top","0"),L(c,"class","svelte-13flvue")},m(z,O){xe(z,c,O),P(c,f),bd(f,l[4]),l[24](f),P(c,m),P(c,_),C.m(_,null),l[31](c),f.focus(),v||(a=[Li(f,"input",l[23]),Li(f,"keyup",l[16])],v=!0)},p(z,O){O[0]&16&&f.value!==z[4]&&bd(f,z[4]),k===(k=I(z))&&C?C.p(z,O):(C.d(1),C=k(z),C&&(C.c(),C.m(_,null)))},d(z){z&&M(c),l[24](null),C.d(),l[31](null),v=!1,Ol(a)}}}function H1(l){let c,f;return{c(){c=X("li"),f=pe("No results"),this.h()},l(m){c=W(m,"LI",{class:!0});var _=Q(c);f=fe(_,"No results"),_.forEach(M),this.h()},h(){L(c,"class","svelte-13flvue")},m(m,_){xe(m,c,_),P(c,f)},p:_a,d(m){m&&M(c)}}}function X1(l){let c,f=l[8],m=[];for(let _=0;_<f.length;_+=1)m[_]=vm(mm(l,f,_));return{c(){for(let _=0;_<m.length;_+=1)m[_].c();c=Xi()},l(_){for(let v=0;v<m.length;v+=1)m[v].l(_);c=Xi()},m(_,v){for(let a=0;a<m.length;a+=1)m[a].m(_,v);xe(_,c,v)},p(_,v){if(v[0]&10626){f=_[8];let a;for(a=0;a<f.length;a+=1){const I=mm(_,f,a);m[a]?m[a].p(I,v):(m[a]=vm(I),m[a].c(),m[a].m(c.parentNode,c))}for(;a<m.length;a+=1)m[a].d(1);m.length=f.length}},d(_){Ro(m,_),_&&M(c)}}}function W1(l){let c,f=l[8],m=[];for(let _=0;_<f.length;_+=1)m[_]=bm(ym(l,f,_));return{c(){for(let _=0;_<m.length;_+=1)m[_].c();c=Xi()},l(_){for(let v=0;v<m.length;v+=1)m[v].l(_);c=Xi()},m(_,v){for(let a=0;a<m.length;a+=1)m[a].m(_,v);xe(_,c,v)},p(_,v){if(v[0]&10630){f=_[8];let a;for(a=0;a<f.length;a+=1){const I=ym(_,f,a);m[a]?m[a].p(I,v):(m[a]=bm(I),m[a].c(),m[a].m(c.parentNode,c))}for(;a<m.length;a+=1)m[a].d(1);m.length=f.length}},d(_){Ro(m,_),_&&M(c)}}}function J1(l){let c,f;return{c(){c=X("li"),f=pe("Type a name..."),this.h()},l(m){c=W(m,"LI",{class:!0});var _=Q(c);f=fe(_,"Type a name..."),_.forEach(M),this.h()},h(){L(c,"class","svelte-13flvue")},m(m,_){xe(m,c,_),P(c,f)},p:_a,d(m){m&&M(c)}}}function vm(l){let c,f=l[33][l[1]]+"",m,_,v=l[35],a,I;function k(){return l[28](l[33])}function C(){return l[29](l[35])}const z=()=>l[30](c,v),O=()=>l[30](null,v);return{c(){c=X("li"),m=pe(f),_=Re(),this.h()},l(D){c=W(D,"LI",{class:!0});var q=Q(c);m=fe(q,f),_=Be(q),q.forEach(M),this.h()},h(){L(c,"class","svelte-13flvue"),Jr(c,"highlight",l[7]==l[35])},m(D,q){xe(D,c,q),P(c,m),P(c,_),z(),a||(I=[Li(c,"click",k),Li(c,"mouseover",C)],a=!0)},p(D,q){l=D,q[0]&258&&f!==(f=l[33][l[1]]+"")&&Ht(m,f),v!==l[35]&&(O(),v=l[35],z()),q[0]&128&&Jr(c,"highlight",l[7]==l[35])},d(D){D&&M(c),O(),a=!1,Ol(I)}}}function bm(l){let c,f=l[33][l[1]]+"",m,_,v,a=l[33][l[2]]+"",I,k,C=l[35],z,O;function D(){return l[25](l[33])}function q(){return l[26](l[35])}const se=()=>l[27](c,C),Te=()=>l[27](null,C);return{c(){c=X("li"),m=pe(f),_=Re(),v=X("small"),I=pe(a),k=Re(),this.h()},l(_e){c=W(_e,"LI",{class:!0});var ke=Q(c);m=fe(ke,f),_=Be(ke),v=W(ke,"SMALL",{class:!0});var Ce=Q(v);I=fe(Ce,a),Ce.forEach(M),k=Be(ke),ke.forEach(M),this.h()},h(){L(v,"class","svelte-13flvue"),L(c,"class","svelte-13flvue"),Jr(c,"highlight",l[7]==l[35])},m(_e,ke){xe(_e,c,ke),P(c,m),P(c,_),P(c,v),P(v,I),P(c,k),se(),z||(O=[Li(c,"click",D),Li(c,"mouseover",q)],z=!0)},p(_e,ke){l=_e,ke[0]&258&&f!==(f=l[33][l[1]]+"")&&Ht(m,f),ke[0]&260&&a!==(a=l[33][l[2]]+"")&&Ht(I,a),C!==l[35]&&(Te(),C=l[35],se()),ke[0]&128&&Jr(c,"highlight",l[7]==l[35])},d(_e){_e&&M(c),Te(),z=!1,Ol(O)}}}function Y1(l){let c,f,m,_;function v(C,z){return C[5]&&!C[3]?K1:G1}let a=v(l),I=a(l),k=l[6]&&_m(l);return{c(){c=X("div"),I.c(),f=Re(),k&&k.c(),this.h()},l(C){c=W(C,"DIV",{id:!0,class:!0});var z=Q(c);I.l(z),f=Be(z),k&&k.l(z),z.forEach(M),this.h()},h(){L(c,"id","select"),L(c,"class","svelte-13flvue"),Jr(c,"active",l[6])},m(C,z){xe(C,c,z),I.m(c,null),P(c,f),k&&k.m(c,null),m||(_=[Li(window,"click",l[17]),Li(c,"keydown",l[15])],m=!0)},p(C,z){a===(a=v(C))&&I?I.p(C,z):(I.d(1),I=a(C),I&&(I.c(),I.m(c,f))),C[6]?k?k.p(C,z):(k=_m(C),k.c(),k.m(c,null)):k&&(k.d(1),k=null),z[0]&64&&Jr(c,"active",C[6])},i:_a,o:_a,d(C){C&&M(c),I.d(),k&&k.d(),m=!1,Ol(_)}}}function Q1(l){return new Promise(c=>setTimeout(c,l))}function $1(l,c,f){let m;const _=ty();let{options:v}=c,{selected:a=null}=c,{placeholder:I="Enter a town or area name"}=c,{value:k="code"}=c,{label:C="name"}=c,{group:z=null}=c,{search:O=!1}=c,D=a,q=a?v.find(Ke=>{Ke[k]==a[k]}):null,se=!1,Te="",_e=null,ke,Ce,mt,at=[];function Ye(Ke){Ke.stopPropagation(),f(4,Te=""),f(6,se=!se),Q1(10).then(()=>{mt&&se&&mt.focus()})}function Ge(Ke){f(18,a=Ke),f(6,se=!1),_("select",{selected:Ke,value:Ke[k]})}function Xt(Ke){Ke.stopPropagation(),f(18,a=null),f(21,D=null),f(5,q=null),_("select",{selected:null,value:null})}function yt(Ke){se&&ke[0]&&Number.isInteger(_e)&&(Ke.keyCode===38?(f(7,_e-=_e>0?1:0),at[_e].scrollIntoView({block:"nearest",inline:"start"})):Ke.keyCode===40&&(f(7,_e+=_e<ke.length-1?1:0),at[_e].scrollIntoView({block:"nearest",inline:"end"})))}function pt(Ke){ke[0]&&Number.isInteger(_e)&&Ke.keyCode===13&&Ge(ke[_e])}function lt(Ke){Ke.target!==Ce&&(f(6,se=!1),f(7,_e=0))}function Ie(){Te=this.value,f(4,Te)}function it(Ke){Ts[Ke?"unshift":"push"](()=>{mt=Ke,f(10,mt)})}const nt=Ke=>Ge(Ke),Qe=Ke=>f(7,_e=Ke);function De(Ke,qe){Ts[Ke?"unshift":"push"](()=>{at[qe]=Ke,f(11,at)})}const Ve=Ke=>Ge(Ke),st=Ke=>f(7,_e=Ke);function Ct(Ke,qe){Ts[Ke?"unshift":"push"](()=>{at[qe]=Ke,f(11,at)})}function zt(Ke){Ts[Ke?"unshift":"push"](()=>{Ce=Ke,f(9,Ce)})}return l.$$set=Ke=>{"options"in Ke&&f(19,v=Ke.options),"selected"in Ke&&f(18,a=Ke.selected),"placeholder"in Ke&&f(0,I=Ke.placeholder),"value"in Ke&&f(20,k=Ke.value),"label"in Ke&&f(1,C=Ke.label),"group"in Ke&&f(2,z=Ke.group),"search"in Ke&&f(3,O=Ke.search)},l.$$.update=()=>{l.$$.dirty[0]&16&&f(22,m=Te?new RegExp(Te,"i"):null),l.$$.dirty[0]&4718594&&(f(8,ke=m?v.filter(Ke=>m.test(Ke[C])):v),f(7,_e=0)),l.$$.dirty[0]&3932160&&D!=a&&(f(5,q=v.find(Ke=>Ke[k]==a[k])),f(21,D=a))},[I,C,z,O,Te,q,se,_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,a,v,k,D,m,Ie,it,nt,Qe,De,Ve,st,Ct,zt]}class e0 extends Na{constructor(c){super(),Va(this,c,$1,Y1,Ua,{options:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var kc={exports:{}};(function(l,c){(function(f,m){l.exports=m()})(p1,function(){var f,m,_;function v(a,I){if(!f)f=I;else if(!m)m=I;else{var k="var sharedChunk = {}; ("+f+")(sharedChunk); ("+m+")(sharedChunk);",C={};f(C),_=I(C),typeof window<"u"&&(_.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}}return v(["exports"],function(a){function I(e,t){return e(t={exports:{}},t.exports),t.exports}var k=C;function C(e,t,i,u){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=i,this.p2y=u}C.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},C.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},C.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},C.prototype.solveCurveX=function(e,t){var i,u,p,d,x;for(t===void 0&&(t=1e-6),p=e,x=0;x<8;x++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var S=this.sampleCurveDerivativeX(p);if(Math.abs(S)<1e-6)break;p-=d/S}if((p=e)<(i=0))return i;if(p>(u=1))return u;for(;i<u;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:u=p,p=.5*(u-i)+i}return p},C.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var z=O;function O(e,t){this.x=e,this.y=t}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),u=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=u,this},_rotateAround:function(e,t){var i=Math.cos(e),u=Math.sin(e),p=t.y+u*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-u*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},O.convert=function(e){return e instanceof O?e:Array.isArray(e)?new O(e[0],e[1]):e};var D=typeof self<"u"?self:{},q=Math.pow(2,53)-1;function se(e,t,i,u){var p=new k(e,t,i,u);return function(d){return p.solve(d)}}var Te=se(.25,.1,.25,1);function _e(e,t,i){return Math.min(i,Math.max(t,e))}function ke(e,t,i){var u=i-t,p=((e-t)%u+u)%u+t;return p===t?i:p}function Ce(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,p=t;u<p.length;u+=1){var d=p[u];for(var x in d)e[x]=d[x]}return e}var mt=1;function at(){return mt++}function Ye(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ge(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Xt(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function yt(e,t){return e.indexOf(t,e.length-t.length)!==-1}function pt(e,t,i){var u={};for(var p in e)u[p]=t.call(i||this,e[p],p,e);return u}function lt(e,t,i){var u={};for(var p in e)t.call(i||this,e[p],p,e)&&(u[p]=e[p]);return u}function Ie(e){return Array.isArray(e)?e.map(Ie):typeof e=="object"&&e?pt(e,Ie):e}var it={};function nt(e){it[e]||(typeof console<"u"&&console.warn(e),it[e]=!0)}function Qe(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function De(e){for(var t=0,i=0,u=e.length,p=u-1,d=void 0,x=void 0;i<u;p=i++)t+=((x=e[p]).x-(d=e[i]).x)*(d.y+x.y);return t}function Ve(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function st(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,p,d,x){var S=d||x;return t[p]=!S||S.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Ct=null;function zt(e){if(Ct==null){var t=e.navigator?e.navigator.userAgent:null;Ct=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ct}function Ke(e){try{var t=D[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var qe,lr,vr,cr,Br=D.performance&&D.performance.now?D.performance.now.bind(D.performance):Date.now.bind(Date),Bt=D.requestAnimationFrame||D.mozRequestAnimationFrame||D.webkitRequestAnimationFrame||D.msRequestAnimationFrame,xt=D.cancelAnimationFrame||D.mozCancelAnimationFrame||D.webkitCancelAnimationFrame||D.msCancelAnimationFrame,Ut={now:Br,frame:function(e){var t=Bt(e);return{cancel:function(){return xt(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=D.document.createElement("canvas"),u=i.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return qe||(qe=D.document.createElement("a")),qe.href=e,qe.href},hardwareConcurrency:D.navigator&&D.navigator.hardwareConcurrency||4,get devicePixelRatio(){return D.devicePixelRatio},get prefersReducedMotion(){return!!D.matchMedia&&(lr==null&&(lr=D.matchMedia("(prefers-reduced-motion: reduce)")),lr.matches)}},At={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Kt={supported:!1,testSupport:function(e){!It&&cr&&(Jt?vt(e):vr=e)}},It=!1,Jt=!1;function vt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,cr),e.isContextLost())return;Kt.supported=!0}catch{}e.deleteTexture(t),It=!0}D.document&&((cr=D.document.createElement("img")).onload=function(){vr&&vt(vr),vr=null,Jt=!0},cr.onerror=function(){It=!0,vr=null},cr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var fr="01",yr=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function bt(e){return e.indexOf("mapbox:")===0}yr.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",fr,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},yr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},yr.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},yr.prototype.normalizeStyleURL=function(e,t){if(!bt(e))return e;var i=$e(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},yr.prototype.normalizeGlyphsURL=function(e,t){if(!bt(e))return e;var i=$e(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},yr.prototype.normalizeSourceURL=function(e,t){if(!bt(e))return e;var i=$e(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},yr.prototype.normalizeSpriteURL=function(e,t,i,u){var p=$e(e);return bt(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||u)):(p.path+=""+t+i,Lt(p))},yr.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!bt(e))return e;var i=$e(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ut.devicePixelRatio>=2||t===512?"@2x":"")+(Kt.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var u=this._customAccessToken||function(p){for(var d=0,x=p;d<x.length;d+=1){var S=x[d].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(i.params)||At.ACCESS_TOKEN;return At.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,u)},yr.prototype.canonicalizeTileURL=function(e,t){var i=$e(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(u+="?"+p.join("&")),u},yr.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&bt(t),u=[],p=0,d=e.tiles||[];p<d.length;p+=1){var x=d[p];hr(x)?u.push(this.canonicalizeTileURL(x,i)):u.push(x)}return u},yr.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=$e(At.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!At.REQUIRE_ACCESS_TOKEN)return Lt(e);if(!(t=t||At.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),Lt(e)};var gr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function hr(e){return gr.test(e)}var dr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function $e(e){var t=e.match(dr);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Lt(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Wt(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(D.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Se=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Se.prototype.getStorageKey=function(e){var t,i=Wt(At.ACCESS_TOKEN);return t=i&&i.u?D.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,p){return String.fromCharCode(Number("0x"+p))})):At.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Se.prototype.fetchEventData=function(){var e=Ke("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var u=D.localStorage.getItem(t);u&&(this.eventData=JSON.parse(u));var p=D.localStorage.getItem(i);p&&(this.anonId=p)}catch{nt("Unable to read from LocalStorage")}},Se.prototype.saveEventData=function(){var e=Ke("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{D.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&D.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{nt("Unable to write to LocalStorage")}},Se.prototype.processRequests=function(e){},Se.prototype.postEvent=function(e,t,i,u){var p=this;if(At.EVENTS_URL){var d=$e(At.EVENTS_URL);d.params.push("access_token="+(u||At.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:fr,userId:this.anonId},S=t?Ce(x,t):x,A={url:Lt(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=rr(A,function(R){p.pendingRequest=null,i(R),p.saveEventData(),p.processRequests(u)})}},Se.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var We,qt,Mt=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,u,p,d){this.skuToken=p,(At.EVENTS_URL&&d||At.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(x){return bt(x)||hr(x)}))&&this.queueRequest({id:u,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,x=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),Ge(this.anonId)||(this.anonId=Ye()),this.postEvent(x,{skuToken:this.skuToken},function(S){S||d&&(u.success[d]=!0)},i))}},t}(Se),tr=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,u){At.EVENTS_URL&&At.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return bt(p)||hr(p)})&&this.queueRequest(Date.now(),u)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=Wt(At.ACCESS_TOKEN),d=p?p.u:At.ACCESS_TOKEN,x=d!==this.eventData.tokenU;Ge(this.anonId)||(this.anonId=Ye(),x=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var A=new Date(this.eventData.lastSuccess),R=new Date(S),N=(S-this.eventData.lastSuccess)/864e5;x=x||N>=1||N<-1||A.getDate()!==R.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(V){V||(u.eventData.lastSuccess=S,u.eventData.tokenU=d)},i)}},t}(Se)),Dr=tr.postTurnstileEvent.bind(tr),ri=new Mt,Yt=ri.postMapLoadEvent.bind(ri),Er=500,Gr=50;function Xr(){D.caches&&!We&&(We=D.caches.open("mapbox-tiles"))}function ai(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var si,Cr=1/0;function qr(){return si==null&&(si=D.OffscreenCanvas&&new D.OffscreenCanvas(1,1).getContext("2d")&&typeof D.createImageBitmap=="function"),si}var Sr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Sr);var ei=function(e){function t(i,u,p){u===401&&hr(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=u,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Yr=Ve()?function(){return self.worker&&self.worker.referrer}:function(){return(D.location.protocol==="blob:"?D.parent:D).location.href},kt,kr,pi=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Yr())&&!/^\w+:/.test(i))){if(D.fetch&&D.Request&&D.AbortController&&D.Request.prototype.hasOwnProperty("signal"))return function(u,p){var d,x=new D.AbortController,S=new D.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Yr(),signal:x.signal}),A=!1,R=!1,N=(d=S.url).indexOf("sku=")>0&&hr(d);u.type==="json"&&S.headers.set("Accept","application/json");var V=function(H,ne,ae){if(!R){if(H&&H.message!=="SecurityError"&&nt(H),ne&&ae)return Z(ne);var ye=Date.now();D.fetch(S).then(function(ce){if(ce.ok){var Ee=N?ce.clone():null;return Z(ce,Ee,ye)}return p(new ei(ce.statusText,ce.status,u.url))}).catch(function(ce){ce.code!==20&&p(new Error(ce.message))})}},Z=function(H,ne,ae){(u.type==="arrayBuffer"?H.arrayBuffer():u.type==="json"?H.json():H.text()).then(function(ye){R||(ne&&ae&&function(ce,Ee,Pe){if(Xr(),We){var Oe={status:Ee.status,statusText:Ee.statusText,headers:new D.Headers};Ee.headers.forEach(function(Xe,ct){return Oe.headers.set(ct,Xe)});var Ne=st(Ee.headers.get("Cache-Control")||"");Ne["no-store"]||(Ne["max-age"]&&Oe.headers.set("Expires",new Date(Pe+1e3*Ne["max-age"]).toUTCString()),new Date(Oe.headers.get("Expires")).getTime()-Pe<42e4||function(Xe,ct){if(qt===void 0)try{new Response(new ReadableStream),qt=!0}catch{qt=!1}qt?ct(Xe.body):Xe.blob().then(ct)}(Ee,function(Xe){var ct=new D.Response(Xe,Oe);Xr(),We&&We.then(function(Et){return Et.put(ai(ce.url),ct)}).catch(function(Et){return nt(Et.message)})}))}}(S,ne,ae),A=!0,p(null,ye,H.headers.get("Cache-Control"),H.headers.get("Expires")))}).catch(function(ye){R||p(new Error(ye.message))})};return N?function(H,ne){if(Xr(),!We)return ne(null);var ae=ai(H.url);We.then(function(ye){ye.match(ae).then(function(ce){var Ee=function(Pe){if(!Pe)return!1;var Oe=new Date(Pe.headers.get("Expires")||0),Ne=st(Pe.headers.get("Cache-Control")||"");return Oe>Date.now()&&!Ne["no-cache"]}(ce);ye.delete(ae),Ee&&ye.put(ae,ce.clone()),ne(null,ce,Ee)}).catch(ne)}).catch(ne)}(S,V):V(null,null),{cancel:function(){R=!0,A||x.abort()}}}(e,t);if(Ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(u,p){var d=new D.XMLHttpRequest;for(var x in d.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(d.responseType="arraybuffer"),u.headers)d.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=u.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var S=d.response;if(u.type==="json")try{S=JSON.parse(d.response)}catch(A){return p(A)}p(null,S,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new ei(d.statusText,d.status,u.url))},d.send(u.body),{cancel:function(){return d.abort()}}}(e,t)},Mr=function(e,t){return pi(Ce(e,{type:"arrayBuffer"}),t)},rr=function(e,t){return pi(Ce(e,{method:"POST"}),t)},F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";kt=[],kr=0;var j=function(e,t){if(Kt.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),kr>=At.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return kt.push(i),i}kr++;var u=!1,p=function(){if(!u)for(u=!0,kr--;kt.length&&kr<At.MAX_PARALLEL_IMAGE_REQUESTS;){var x=kt.shift();x.cancelled||(x.cancel=j(x.requestParameters,x.callback).cancel)}},d=Mr(e,function(x,S,A,R){p(),x?t(x):S&&(qr()?function(N,V){var Z=new D.Blob([new Uint8Array(N)],{type:"image/png"});D.createImageBitmap(Z).then(function(H){V(null,H)}).catch(function(H){V(new Error("Could not load image because of "+H.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,t):function(N,V,Z,H){var ne=new D.Image,ae=D.URL;ne.onload=function(){V(null,ne),ae.revokeObjectURL(ne.src),ne.onload=null,D.requestAnimationFrame(function(){ne.src=F})},ne.onerror=function(){return V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ye=new D.Blob([new Uint8Array(N)],{type:"image/png"});ne.cacheControl=Z,ne.expires=H,ne.src=N.byteLength?ae.createObjectURL(ye):F}(S,t,A,R))});return{cancel:function(){d.cancel(),p()}}};function G(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function Y(e,t,i){if(i&&i[e]){var u=i[e].indexOf(t);u!==-1&&i[e].splice(u,1)}}var te=function(e,t){t===void 0&&(t={}),Ce(this,t),this.type=e},ue=function(e){function t(i,u){u===void 0&&(u={}),e.call(this,"error",Ce({error:i},u))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(te),ge=function(){};ge.prototype.on=function(e,t){return this._listeners=this._listeners||{},G(e,t,this._listeners),this},ge.prototype.off=function(e,t){return Y(e,t,this._listeners),Y(e,t,this._oneTimeListeners),this},ge.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},G(e,t,this._oneTimeListeners),this},ge.prototype.fire=function(e,t){typeof e=="string"&&(e=new te(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var u=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];u<p.length;u+=1)p[u].call(this,e);for(var d=0,x=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<x.length;d+=1){var S=x[d];Y(i,S,this._oneTimeListeners),S.call(this,e)}var A=this._eventedParent;A&&(Ce(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(e))}else e instanceof ue&&console.error(e.error);return this},ge.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ge.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var K={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},re=function(e,t,i,u){this.message=(e?e+": ":"")+i,u&&(this.identifier=u),t!=null&&t.__line__&&(this.line=t.__line__)};function we(e){var t=e.value;return t?[new re(e.key,t,"constants have been deprecated as of v8")]:[]}function Ze(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,p=t;u<p.length;u+=1){var d=p[u];for(var x in d)e[x]=d[x]}return e}function Je(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ze(e){if(Array.isArray(e))return e.map(ze);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=ze(e[i]);return t}return Je(e)}var He=function(e){function t(i,u){e.call(this,u),this.message=u,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),St=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,u=t;i<u.length;i+=1){var p=u[i];this.bindings[p[0]]=p[1]}};St.prototype.concat=function(e){return new St(this,e)},St.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},St.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var gt={kind:"null"},Le={kind:"number"},ft={kind:"string"},ot={kind:"boolean"},ht={kind:"color"},$t={kind:"object"},ut={kind:"value"},mr={kind:"collator"},Kr={kind:"formatted"},er={kind:"resolvedImage"};function et(e,t){return{kind:"array",itemType:e,N:t}}function Nt(e){if(e.kind==="array"){var t=Nt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var li=[gt,Le,ft,ot,ht,Kr,$t,et(ut),er];function Ir(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Ir(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,u=li;i<u.length;i+=1)if(!Ir(u[i],t))return null}}return"Expected "+Nt(e)+" but found "+Nt(t)+" instead."}function xr(e,t){return t.some(function(i){return i.kind===e.kind})}function Ar(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var pr=I(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(S){return(S=Math.round(S))<0?0:S>255?255:S}function p(S){return u(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function d(S){return(A=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:A>1?1:A;var A}function x(S,A,R){return R<0?R+=1:R>1&&(R-=1),6*R<1?S+(A-S)*R*6:2*R<1?A:3*R<2?S+(A-S)*(2/3-R)*6:S}try{t.parseCSSColor=function(S){var A,R=S.replace(/ /g,"").toLowerCase();if(R in i)return i[R].slice();if(R[0]==="#")return R.length===4?(A=parseInt(R.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:R.length===7&&(A=parseInt(R.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var N=R.indexOf("("),V=R.indexOf(")");if(N!==-1&&V+1===R.length){var Z=R.substr(0,N),H=R.substr(N+1,V-(N+1)).split(","),ne=1;switch(Z){case"rgba":if(H.length!==4)return null;ne=d(H.pop());case"rgb":return H.length!==3?null:[p(H[0]),p(H[1]),p(H[2]),ne];case"hsla":if(H.length!==4)return null;ne=d(H.pop());case"hsl":if(H.length!==3)return null;var ae=(parseFloat(H[0])%360+360)%360/360,ye=d(H[1]),ce=d(H[2]),Ee=ce<=.5?ce*(ye+1):ce+ye-ce*ye,Pe=2*ce-Ee;return[u(255*x(Pe,Ee,ae+1/3)),u(255*x(Pe,Ee,ae)),u(255*x(Pe,Ee,ae-1/3)),ne];default:return null}}return null}}catch{}}).parseCSSColor,Ft=function(e,t,i,u){u===void 0&&(u=1),this.r=e,this.g=t,this.b=i,this.a=u};Ft.parse=function(e){if(e){if(e instanceof Ft)return e;if(typeof e=="string"){var t=pr(e);if(t)return new Ft(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Ft.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+u+")"},Ft.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Ft.black=new Ft(0,0,0,1),Ft.white=new Ft(1,1,1,1),Ft.transparent=new Ft(0,0,0,0),Ft.red=new Ft(1,0,0,1);var Wi=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Wi.prototype.compare=function(e,t){return this.collator.compare(e,t)},Wi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Gn=function(e,t,i,u,p){this.text=e,this.image=t,this.scale=i,this.fontStack=u,this.textColor=p},gi=function(e){this.sections=e};gi.fromString=function(e){return new gi([new Gn(e,null,null,null,null)])},gi.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},gi.factory=function(e){return e instanceof gi?e:gi.fromString(e)},gi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},gi.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(p)}}return e};var Ji=function(e){this.name=e.name,this.available=e.available};function pa(e,t,i,u){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,t,i,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,t,i,u]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function vn(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Ft||e instanceof Wi||e instanceof gi||e instanceof Ji)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!vn(i[t]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!vn(e[u]))return!1;return!0}return!1}function _i(e){if(e===null)return gt;if(typeof e=="string")return ft;if(typeof e=="boolean")return ot;if(typeof e=="number")return Le;if(e instanceof Ft)return ht;if(e instanceof Wi)return mr;if(e instanceof gi)return Kr;if(e instanceof Ji)return er;if(Array.isArray(e)){for(var t,i=e.length,u=0,p=e;u<p.length;u+=1){var d=_i(p[u]);if(t){if(t===d)continue;t=ut;break}t=d}return et(t||ut,i)}return $t}function On(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Ft||e instanceof gi||e instanceof Ji?e.toString():JSON.stringify(e)}Ji.prototype.toString=function(){return this.name},Ji.fromString=function(e){return e?new Ji({name:e,available:!1}):null},Ji.prototype.serialize=function(){return["image",this.name]};var Ui=function(e,t){this.type=e,this.value=t};Ui.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!vn(e[1]))return t.error("invalid value");var i=e[1],u=_i(i),p=t.expectedType;return u.kind!=="array"||u.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(u=p),new Ui(u,i)},Ui.prototype.evaluate=function(){return this.value},Ui.prototype.eachChild=function(){},Ui.prototype.outputDefined=function(){return!0},Ui.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ft?["rgba"].concat(this.value.toArray()):this.value instanceof gi?this.value.serialize():this.value};var Ti=function(e){this.name="ExpressionEvaluationError",this.message=e};Ti.prototype.toJSON=function(){return this.message};var rn={string:ft,number:Le,boolean:ot,object:$t},ui=function(e,t){this.type=e,this.args=t};ui.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,u=1,p=e[0];if(p==="array"){var d,x;if(e.length>2){var S=e[1];if(typeof S!="string"||!(S in rn)||S==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=rn[S],u++}else d=ut;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);x=e[2],u++}i=et(d,x)}else i=rn[p];for(var A=[];u<e.length;u++){var R=t.parse(e[u],u,ut);if(!R)return null;A.push(R)}return new ui(i,A)},ui.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!Ir(this.type,_i(i)))return i;if(t===this.args.length-1)throw new Ti("Expected value to be of type "+Nt(this.type)+", but found "+Nt(_i(i))+" instead.")}return null},ui.prototype.eachChild=function(e){this.args.forEach(e)},ui.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ui.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&t.push(u)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var Sn=function(e){this.type=Kr,this.sections=e};Sn.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var u=[],p=!1,d=1;d<=e.length-1;++d){var x=e[d];if(p&&typeof x=="object"&&!Array.isArray(x)){p=!1;var S=null;if(x["font-scale"]&&!(S=t.parse(x["font-scale"],1,Le)))return null;var A=null;if(x["text-font"]&&!(A=t.parse(x["text-font"],1,et(ft))))return null;var R=null;if(x["text-color"]&&!(R=t.parse(x["text-color"],1,ht)))return null;var N=u[u.length-1];N.scale=S,N.font=A,N.textColor=R}else{var V=t.parse(e[d],1,ut);if(!V)return null;var Z=V.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,u.push({content:V,scale:null,font:null,textColor:null})}}return new Sn(u)},Sn.prototype.evaluate=function(e){return new gi(this.sections.map(function(t){var i=t.content.evaluate(e);return _i(i)===er?new Gn("",i,null,null,null):new Gn(On(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Sn.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},Sn.prototype.outputDefined=function(){return!1},Sn.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e.push(u.content.serialize());var p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),e.push(p)}return e};var Yi=function(e){this.type=er,this.input=e};Yi.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,ft);return i?new Yi(i):t.error("No image name provided.")},Yi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=Ji.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},Yi.prototype.eachChild=function(e){e(this.input)},Yi.prototype.outputDefined=function(){return!1},Yi.prototype.serialize=function(){return["image",this.input.serialize()]};var Ca={"to-boolean":ot,"to-color":ht,"to-number":Le,"to-string":ft},Ai=function(e,t){this.type=e,this.args=t};Ai.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var u=Ca[i],p=[],d=1;d<e.length;d++){var x=t.parse(e[d],d,ut);if(!x)return null;p.push(x)}return new Ai(u,p)},Ai.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,u=0,p=this.args;u<p.length;u+=1){if(i=null,(t=p[u].evaluate(e))instanceof Ft)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":pa(t[0],t[1],t[2],t[3])))return new Ft(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Ti(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var x=null,S=0,A=this.args;S<A.length;S+=1){if((x=A[S].evaluate(e))===null)return 0;var R=Number(x);if(!isNaN(R))return R}throw new Ti("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?gi.fromString(On(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ji.fromString(On(this.args[0].evaluate(e))):On(this.args[0].evaluate(e))},Ai.prototype.eachChild=function(e){this.args.forEach(e)},Ai.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ai.prototype.serialize=function(){if(this.type.kind==="formatted")return new Sn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Yi(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Fn=["Unknown","Point","LineString","Polygon"],Ri=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ri.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ri.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Fn[this.feature.type]:this.feature.type:null},Ri.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ri.prototype.canonicalID=function(){return this.canonical},Ri.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ri.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ft.parse(e)),t};var zi=function(e,t,i,u){this.name=e,this.type=t,this._evaluate=i,this.args=u};zi.prototype.evaluate=function(e){return this._evaluate(e,this.args)},zi.prototype.eachChild=function(e){this.args.forEach(e)},zi.prototype.outputDefined=function(){return!1},zi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},zi.parse=function(e,t){var i,u=e[0],p=zi.definitions[u];if(!p)return t.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=x.filter(function(ar){var Dt=ar[0];return!Array.isArray(Dt)||Dt.length===e.length-1}),A=null,R=0,N=S;R<N.length;R+=1){var V=N[R],Z=V[0],H=V[1];A=new Hr(t.registry,t.path,null,t.scope);for(var ne=[],ae=!1,ye=1;ye<e.length;ye++){var ce=e[ye],Ee=Array.isArray(Z)?Z[ye-1]:Z.type,Pe=A.parse(ce,1+ne.length,Ee);if(!Pe){ae=!0;break}ne.push(Pe)}if(!ae)if(Array.isArray(Z)&&Z.length!==ne.length)A.error("Expected "+Z.length+" arguments, but found "+ne.length+" instead.");else{for(var Oe=0;Oe<ne.length;Oe++){var Ne=Array.isArray(Z)?Z[Oe]:Z.type,Xe=ne[Oe];A.concat(Oe+1).checkSubtype(Ne,Xe.type)}if(A.errors.length===0)return new zi(u,d,H,ne)}}if(S.length===1)(i=t.errors).push.apply(i,A.errors);else{for(var ct=(S.length?S:x).map(function(ar){var Dt;return Dt=ar[0],Array.isArray(Dt)?"("+Dt.map(Nt).join(", ")+")":"("+Nt(Dt.type)+"...)"}).join(" | "),Et=[],Qt=1;Qt<e.length;Qt++){var Pt=t.parse(e[Qt],1+Et.length);if(!Pt)return null;Et.push(Nt(Pt.type))}t.error("Expected arguments of type "+ct+", but found ("+Et.join(", ")+") instead.")}return null},zi.register=function(e,t){for(var i in zi.definitions=t,t)e[i]=zi};var cn=function(e,t,i){this.type=mr,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function Bi(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ji(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function ja(e,t){var i=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(u*p*8192)]}function ho(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function qa(e,t){for(var i,u,p,d,x,S,A,R=!1,N=0,V=t.length;N<V;N++)for(var Z=t[N],H=0,ne=Z.length;H<ne-1;H++){if((d=(i=e)[0]-(u=Z[H])[0])*(A=i[1]-(p=Z[H+1])[1])-(S=i[0]-p[0])*(x=i[1]-u[1])==0&&d*S<=0&&x*A<=0)return!1;ho(e,Z[H],Z[H+1])&&(R=!R)}return R}function io(e,t){for(var i=0;i<t.length;i++)if(qa(e,t[i]))return!0;return!1}function bn(e,t,i,u){var p=u[0]-i[0],d=u[1]-i[1],x=(e[0]-i[0])*d-p*(e[1]-i[1]),S=(t[0]-i[0])*d-p*(t[1]-i[1]);return x>0&&S<0||x<0&&S>0}function hn(e,t,i){for(var u=0,p=i;u<p.length;u+=1)for(var d=p[u],x=0;x<d.length-1;++x)if((V=[(N=d[x+1])[0]-(R=d[x])[0],N[1]-R[1]])[0]*(Z=[(A=t)[0]-(S=e)[0],A[1]-S[1]])[1]-V[1]*Z[0]!=0&&bn(S,A,R,N)&&bn(R,N,S,A))return!0;var S,A,R,N,V,Z;return!1}function Za(e,t){for(var i=0;i<e.length;++i)if(!qa(e[i],t))return!1;for(var u=0;u<e.length-1;++u)if(hn(e[u],e[u+1],t))return!1;return!0}function ta(e,t){for(var i=0;i<t.length;i++)if(Za(e,t[i]))return!0;return!1}function pn(e,t,i){for(var u=[],p=0;p<e.length;p++){for(var d=[],x=0;x<e[p].length;x++){var S=ja(e[p][x],i);Bi(t,S),d.push(S)}u.push(d)}return u}function Ga(e,t,i){for(var u=[],p=0;p<e.length;p++){var d=pn(e[p],t,i);u.push(d)}return u}function va(e,t,i,u){if(e[0]<i[0]||e[0]>i[2]){var p=.5*u,d=e[0]-i[0]>p?-u:i[0]-e[0]>p?u:0;d===0&&(d=e[0]-i[2]>p?-u:i[2]-e[0]>p?u:0),e[0]+=d}Bi(t,e)}function Nn(e,t,i,u){for(var p=8192*Math.pow(2,u.z),d=[8192*u.x,8192*u.y],x=[],S=0,A=e;S<A.length;S+=1)for(var R=0,N=A[S];R<N.length;R+=1){var V=N[R],Z=[V.x+d[0],V.y+d[1]];va(Z,t,i,p),x.push(Z)}return x}function ki(e,t,i,u){for(var p,d=8192*Math.pow(2,u.z),x=[8192*u.x,8192*u.y],S=[],A=0,R=e;A<R.length;A+=1){for(var N=[],V=0,Z=R[A];V<Z.length;V+=1){var H=Z[V],ne=[H.x+x[0],H.y+x[1]];Bi(t,ne),N.push(ne)}S.push(N)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var ae=0,ye=S;ae<ye.length;ae+=1)for(var ce=0,Ee=ye[ae];ce<Ee.length;ce+=1)va(Ee[ce],t,i,d)}return S}cn.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var u=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,ot);if(!u)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,ot);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,ft))?null:new cn(u,p,d)},cn.prototype.evaluate=function(e){return new Wi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},cn.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},cn.prototype.outputDefined=function(){return!1},cn.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var fi=function(e,t){this.type=ot,this.geojson=e,this.geometries=t};function Ei(e){if(e instanceof zi&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof fi)return!1;var t=!0;return e.eachChild(function(i){t&&!Ei(i)&&(t=!1)}),t}function ve(e){if(e instanceof zi&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!ve(i)&&(t=!1)}),t}function xn(e,t){if(e instanceof zi&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(u){i&&!xn(u,t)&&(i=!1)}),i}fi.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(vn(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var u=0;u<i.features.length;++u){var p=i.features[u].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new fi(i,i.features[u].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new fi(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new fi(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},fi.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=pn(i.coordinates,p,d),S=Nn(t.geometry(),u,p,d);if(!ji(u,p))return!1;for(var A=0,R=S;A<R.length;A+=1)if(!qa(R[A],x))return!1}if(i.type==="MultiPolygon"){var N=Ga(i.coordinates,p,d),V=Nn(t.geometry(),u,p,d);if(!ji(u,p))return!1;for(var Z=0,H=V;Z<H.length;Z+=1)if(!io(H[Z],N))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=pn(i.coordinates,p,d),S=ki(t.geometry(),u,p,d);if(!ji(u,p))return!1;for(var A=0,R=S;A<R.length;A+=1)if(!Za(R[A],x))return!1}if(i.type==="MultiPolygon"){var N=Ga(i.coordinates,p,d),V=ki(t.geometry(),u,p,d);if(!ji(u,p))return!1;for(var Z=0,H=V;Z<H.length;Z+=1)if(!ta(H[Z],N))return!1}return!0}(e,this.geometries)}return!1},fi.prototype.eachChild=function(){},fi.prototype.outputDefined=function(){return!0},fi.prototype.serialize=function(){return["within",this.geojson]};var nn=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};nn.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new nn(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},nn.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},nn.prototype.eachChild=function(){},nn.prototype.outputDefined=function(){return!1},nn.prototype.serialize=function(){return["var",this.name]};var Hr=function(e,t,i,u,p){t===void 0&&(t=[]),u===void 0&&(u=new St),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=u,this.errors=p,this.expectedType=i};function ra(e,t){for(var i,u=e.length-1,p=0,d=u,x=0;p<=d;)if((i=e[x=Math.floor((p+d)/2)])<=t){if(x===u||t<e[x+1])return x;p=x+1}else{if(!(i>t))throw new Ti("Input is not a number.");d=x-1}return 0}Hr.prototype.parse=function(e,t,i,u,p){return p===void 0&&(p={}),t?this.concat(t,i,u)._parse(e,p):this._parse(e,p)},Hr.prototype._parse=function(e,t){function i(R,N,V){return V==="assert"?new ui(N,[R]):V==="coerce"?new Ai(N,[R]):R}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[u];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var x=this.expectedType,S=d.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else d=i(d,x,t.typeAnnotation||"coerce");else d=i(d,x,t.typeAnnotation||"assert")}if(!(d instanceof Ui)&&d.type.kind!=="resolvedImage"&&function R(N){if(N instanceof nn)return R(N.boundExpression);if(N instanceof zi&&N.name==="error"||N instanceof cn||N instanceof fi)return!1;var V=N instanceof Ai||N instanceof ui,Z=!0;return N.eachChild(function(H){Z=V?Z&&R(H):Z&&H instanceof Ui}),!!Z&&Ei(N)&&xn(N,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var A=new Ri;try{d=new Ui(d.type,d.evaluate(A))}catch(R){return this.error(R.message),null}}return d}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Hr.prototype.concat=function(e,t,i){var u=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Hr(this.registry,u,t||null,p,this.errors)},Hr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var u=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new He(u,e))},Hr.prototype.checkSubtype=function(e,t){var i=Ir(e,t);return i&&this.error(i),i};var fn=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var u=0,p=i;u<p.length;u+=1){var d=p[u],x=d[1];this.labels.push(d[0]),this.outputs.push(x)}};function di(e,t,i){return e*(1-i)+t*i}fn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Le);if(!i)return null;var u=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var x=d===1?-1/0:e[d],S=e[d+1],A=d,R=d+1;if(typeof x!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(u.length&&u[u.length-1][0]>=x)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);var N=t.parse(S,R,p);if(!N)return null;p=p||N.type,u.push([x,N])}return new fn(p,i,u)},fn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var p=t.length;return u>=t[p-1]?i[p-1].evaluate(e):i[ra(t,u)].evaluate(e)},fn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},fn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},fn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Ka=Object.freeze({__proto__:null,number:di,color:function(e,t,i){return new Ft(di(e.r,t.r,i),di(e.g,t.g,i),di(e.b,t.b,i),di(e.a,t.a,i))},array:function(e,t,i){return e.map(function(u,p){return di(u,t[p],i)})}}),os=6/29*3*(6/29),Ma=Math.PI/180,Vl=180/Math.PI;function Bo(e){return e>.008856451679035631?Math.pow(e,1/3):e/os+4/29}function fa(e){return e>6/29?e*e*e:os*(e-4/29)}function Cs(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Oo(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ba(e){var t=Oo(e.r),i=Oo(e.g),u=Oo(e.b),p=Bo((.4124564*t+.3575761*i+.1804375*u)/.95047),d=Bo((.2126729*t+.7151522*i+.072175*u)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-Bo((.0193339*t+.119192*i+.9503041*u)/1.08883)),alpha:e.a}}function rl(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,u=isNaN(e.b)?t:t-e.b/200;return t=1*fa(t),i=.95047*fa(i),u=1.08883*fa(u),new Ft(Cs(3.2404542*i-1.5371385*t-.4985314*u),Cs(-.969266*i+1.8760108*t+.041556*u),Cs(.0556434*i-.2040259*t+1.0572252*u),e.alpha)}function Ms(e,t,i){var u=t-e;return e+i*(u>180||u<-180?u-360*Math.round(u/360):u)}var Wn={forward:ba,reverse:rl,interpolate:function(e,t,i){return{l:di(e.l,t.l,i),a:di(e.a,t.a,i),b:di(e.b,t.b,i),alpha:di(e.alpha,t.alpha,i)}}},Fo={forward:function(e){var t=ba(e),i=t.l,u=t.a,p=t.b,d=Math.atan2(p,u)*Vl;return{h:d<0?d+360:d,c:Math.sqrt(u*u+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Ma,i=e.c;return rl({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Ms(e.h,t.h,i),c:di(e.c,t.c,i),l:di(e.l,t.l,i),alpha:di(e.alpha,t.alpha,i)}}},ss=Object.freeze({__proto__:null,lab:Wn,hcl:Fo}),Di=function(e,t,i,u,p){this.type=e,this.operator=t,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(var d=0,x=p;d<x.length;d+=1){var S=x[d],A=S[1];this.labels.push(S[0]),this.outputs.push(A)}};function Ds(e,t,i,u){var p=u-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}Di.interpolationFactor=function(e,t,i,u){var p=0;if(e.name==="exponential")p=Ds(t,e.base,i,u);else if(e.name==="linear")p=Ds(t,1,i,u);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new k(d[0],d[1],d[2],d[3]).solve(Ds(t,1,i,u))}return p},Di.parse=function(e,t){var i=e[0],u=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(u)||u.length===0)return t.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var x=u[1];if(typeof x!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:x}}else{if(u[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(u[0]),1,0);var S=u.slice(1);if(S.length!==4||S.some(function(ye){return typeof ye!="number"||ye<0||ye>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:S}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Le)))return null;var A=[],R=null;i==="interpolate-hcl"||i==="interpolate-lab"?R=ht:t.expectedType&&t.expectedType.kind!=="value"&&(R=t.expectedType);for(var N=0;N<d.length;N+=2){var V=d[N],Z=d[N+1],H=N+3,ne=N+4;if(typeof V!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(A.length&&A[A.length-1][0]>=V)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);var ae=t.parse(Z,ne,R);if(!ae)return null;R=R||ae.type,A.push([V,ae])}return R.kind==="number"||R.kind==="color"||R.kind==="array"&&R.itemType.kind==="number"&&typeof R.N=="number"?new Di(R,i,u,p,A):t.error("Type "+Nt(R)+" is not interpolatable.")},Di.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var p=t.length;if(u>=t[p-1])return i[p-1].evaluate(e);var d=ra(t,u),x=Di.interpolationFactor(this.interpolation,u,t[d],t[d+1]),S=i[d].evaluate(e),A=i[d+1].evaluate(e);return this.operator==="interpolate"?Ka[this.type.kind.toLowerCase()](S,A,x):this.operator==="interpolate-hcl"?Fo.reverse(Fo.interpolate(Fo.forward(S),Fo.forward(A),x)):Wn.reverse(Wn.interpolate(Wn.forward(S),Wn.forward(A),x))},Di.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Di.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Di.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var Da=function(e,t){this.type=e,this.args=t};Da.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,u=t.expectedType;u&&u.kind!=="value"&&(i=u);for(var p=[],d=0,x=e.slice(1);d<x.length;d+=1){var S=t.parse(x[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!S)return null;i=i||S.type,p.push(S)}var A=u&&p.some(function(R){return Ir(u,R.type)});return new Da(A?ut:i,p)},Da.prototype.evaluate=function(e){for(var t,i=null,u=0,p=0,d=this.args;p<d.length&&(u++,(i=d[p].evaluate(e))&&i instanceof Ji&&!i.available&&(t||(t=i.name),i=null,u===this.args.length&&(i=t)),i===null);p+=1);return i},Da.prototype.eachChild=function(e){this.args.forEach(e)},Da.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Da.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Pn=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Pn.prototype.evaluate=function(e){return this.result.evaluate(e)},Pn.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},Pn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],u=1;u<e.length-1;u+=2){var p=e[u];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",u);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);var d=t.parse(e[u+1],u+1);if(!d)return null;i.push([p,d])}var x=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return x?new Pn(i,x):null},Pn.prototype.outputDefined=function(){return this.result.outputDefined()},Pn.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var u=i[t];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var qi=function(e,t,i){this.type=e,this.index=t,this.input=i};qi.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Le),u=t.parse(e[2],2,et(t.expectedType||ut));return i&&u?new qi(u.type.itemType,i,u):null},qi.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Ti("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new Ti("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new Ti("Array index must be an integer, but found "+t+" instead.");return i[t]},qi.prototype.eachChild=function(e){e(this.index),e(this.input)},qi.prototype.outputDefined=function(){return!1},qi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Zi=function(e,t){this.type=ot,this.needle=e,this.haystack=t};Zi.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ut),u=t.parse(e[2],2,ut);return i&&u?xr(i.type,[ot,ft,Le,gt,ut])?new Zi(i,u):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Nt(i.type)+" instead"):null},Zi.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Ar(t,["boolean","string","number","null"]))throw new Ti("Expected first argument to be of type boolean, string, number or null, but found "+Nt(_i(t))+" instead.");if(!Ar(i,["string","array"]))throw new Ti("Expected second argument to be of type array or string, but found "+Nt(_i(i))+" instead.");return i.indexOf(t)>=0},Zi.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Zi.prototype.outputDefined=function(){return!0},Zi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Oi=function(e,t,i){this.type=Le,this.needle=e,this.haystack=t,this.fromIndex=i};Oi.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ut),u=t.parse(e[2],2,ut);if(!i||!u)return null;if(!xr(i.type,[ot,ft,Le,gt,ut]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Nt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Le);return p?new Oi(i,u,p):null}return new Oi(i,u)},Oi.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Ar(t,["boolean","string","number","null"]))throw new Ti("Expected first argument to be of type boolean, string, number or null, but found "+Nt(_i(t))+" instead.");if(!Ar(i,["string","array"]))throw new Ti("Expected second argument to be of type array or string, but found "+Nt(_i(i))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return i.indexOf(t,u)}return i.indexOf(t)},Oi.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Oi.prototype.outputDefined=function(){return!1},Oi.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Gi=function(e,t,i,u,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=u,this.outputs=p,this.otherwise=d};Gi.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,u;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(var p={},d=[],x=2;x<e.length-1;x+=2){var S=e[x],A=e[x+1];Array.isArray(S)||(S=[S]);var R=t.concat(x);if(S.length===0)return R.error("Expected at least one branch label.");for(var N=0,V=S;N<V.length;N+=1){var Z=V[N];if(typeof Z!="number"&&typeof Z!="string")return R.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return R.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Z=="number"&&Math.floor(Z)!==Z)return R.error("Numeric branch labels must be integer values.");if(i){if(R.checkSubtype(i,_i(Z)))return null}else i=_i(Z);if(p[String(Z)]!==void 0)return R.error("Branch labels must be unique.");p[String(Z)]=d.length}var H=t.parse(A,x,u);if(!H)return null;u=u||H.type,d.push(H)}var ne=t.parse(e[1],1,ut);if(!ne)return null;var ae=t.parse(e[e.length-1],e.length-1,u);return ae?ne.type.kind!=="value"&&t.concat(1).checkSubtype(i,ne.type)?null:new Gi(i,u,ne,p,d,ae):null},Gi.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(_i(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Gi.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Gi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Gi.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],u={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var x=d[p];(V=u[this.cases[x]])===void 0?(u[this.cases[x]]=i.length,i.push([this.cases[x],[x]])):i[V][1].push(x)}for(var S=function(H){return e.inputType.kind==="number"?Number(H):H},A=0,R=i;A<R.length;A+=1){var N=R[A],V=N[0],Z=N[1];t.push(Z.length===1?S(Z[0]):Z.map(S)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Ki=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};Ki.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var u=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,ot);if(!d)return null;var x=t.parse(e[p+1],p+1,i);if(!x)return null;u.push([d,x]),i=i||x.type}var S=t.parse(e[e.length-1],e.length-1,i);return S?new Ki(i,u,S):null},Ki.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],p=u[1];if(u[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},Ki.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],p=u[1];e(u[0]),e(p)}e(this.otherwise)},Ki.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Ki.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Fi=function(e,t,i,u){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=u};function Me(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Rt(e,t,i,u){return u.compare(t,i)===0}function ii(e,t,i){var u=e!=="=="&&e!=="!=";return function(){function p(d,x,S){this.type=ot,this.lhs=d,this.rhs=x,this.collator=S,this.hasUntypedArgument=d.type.kind==="value"||x.type.kind==="value"}return p.parse=function(d,x){if(d.length!==3&&d.length!==4)return x.error("Expected two or three arguments.");var S=d[0],A=x.parse(d[1],1,ut);if(!A)return null;if(!Me(S,A.type))return x.concat(1).error('"'+S+`" comparisons are not supported for type '`+Nt(A.type)+"'.");var R=x.parse(d[2],2,ut);if(!R)return null;if(!Me(S,R.type))return x.concat(2).error('"'+S+`" comparisons are not supported for type '`+Nt(R.type)+"'.");if(A.type.kind!==R.type.kind&&A.type.kind!=="value"&&R.type.kind!=="value")return x.error("Cannot compare types '"+Nt(A.type)+"' and '"+Nt(R.type)+"'.");u&&(A.type.kind==="value"&&R.type.kind!=="value"?A=new ui(R.type,[A]):A.type.kind!=="value"&&R.type.kind==="value"&&(R=new ui(A.type,[R])));var N=null;if(d.length===4){if(A.type.kind!=="string"&&R.type.kind!=="string"&&A.type.kind!=="value"&&R.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(N=x.parse(d[3],3,mr)))return null}return new p(A,R,N)},p.prototype.evaluate=function(d){var x=this.lhs.evaluate(d),S=this.rhs.evaluate(d);if(u&&this.hasUntypedArgument){var A=_i(x),R=_i(S);if(A.kind!==R.kind||A.kind!=="string"&&A.kind!=="number")throw new Ti('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+A.kind+", "+R.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var N=_i(x),V=_i(S);if(N.kind!=="string"||V.kind!=="string")return t(d,x,S)}return this.collator?i(d,x,S,this.collator.evaluate(d)):t(d,x,S)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(x){d.push(x.serialize())}),d},p}()}Fi.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ut),u=t.parse(e[2],2,Le);if(!i||!u)return null;if(!xr(i.type,[et(ut),ft,ut]))return t.error("Expected first argument to be of type array or string, but found "+Nt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Le);return p?new Fi(i.type,i,u,p):null}return new Fi(i.type,i,u)},Fi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Ar(t,["string","array"]))throw new Ti("Expected first argument to be of type array or string, but found "+Nt(_i(t))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return t.slice(i,u)}return t.slice(i)},Fi.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Fi.prototype.outputDefined=function(){return!1},Fi.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var La=ii("==",function(e,t,i){return t===i},Rt),ls=ii("!=",function(e,t,i){return t!==i},function(e,t,i,u){return!Rt(0,t,i,u)}),il=ii("<",function(e,t,i){return t<i},function(e,t,i,u){return u.compare(t,i)<0}),po=ii(">",function(e,t,i){return t>i},function(e,t,i,u){return u.compare(t,i)>0}),nl=ii("<=",function(e,t,i){return t<=i},function(e,t,i,u){return u.compare(t,i)<=0}),al=ii(">=",function(e,t,i){return t>=i},function(e,t,i,u){return u.compare(t,i)>=0}),fo=function(e,t,i,u,p){this.type=ft,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=u,this.maxFractionDigits=p};fo.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Le);if(!i)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return t.error("NumberFormat options argument must be an object.");var p=null;if(u.locale&&!(p=t.parse(u.locale,1,ft)))return null;var d=null;if(u.currency&&!(d=t.parse(u.currency,1,ft)))return null;var x=null;if(u["min-fraction-digits"]&&!(x=t.parse(u["min-fraction-digits"],1,Le)))return null;var S=null;return u["max-fraction-digits"]&&!(S=t.parse(u["max-fraction-digits"],1,Le))?null:new fo(i,p,d,x,S)},fo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},fo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},fo.prototype.outputDefined=function(){return!1},fo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Jn=function(e){this.type=Le,this.input=e};Jn.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Nt(i.type)+" instead."):new Jn(i):null},Jn.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Ti("Expected value to be of type string or array, but found "+Nt(_i(t))+" instead.")},Jn.prototype.eachChild=function(e){e(this.input)},Jn.prototype.outputDefined=function(){return!1},Jn.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var mo={"==":La,"!=":ls,">":po,"<":il,">=":al,"<=":nl,array:ui,at:qi,boolean:ui,case:Ki,coalesce:Da,collator:cn,format:Sn,image:Yi,in:Zi,"index-of":Oi,interpolate:Di,"interpolate-hcl":Di,"interpolate-lab":Di,length:Jn,let:Pn,literal:Ui,match:Gi,number:ui,"number-format":fo,object:ui,slice:Fi,step:fn,string:ui,"to-boolean":Ai,"to-color":Ai,"to-number":Ai,"to-string":Ai,var:nn,within:fi};function ol(e,t){var i=t[0],u=t[1],p=t[2],d=t[3];i=i.evaluate(e),u=u.evaluate(e),p=p.evaluate(e);var x=d?d.evaluate(e):1,S=pa(i,u,p,x);if(S)throw new Ti(S);return new Ft(i/255*x,u/255*x,p/255*x,x)}function Eo(e,t){return e in t}function Ls(e,t){var i=t[e];return i===void 0?null:i}function yo(e){return{type:e}}function sl(e){return{result:"success",value:e}}function xa(e){return{result:"error",value:e}}function wa(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function ll(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Yn(e){return!!e.expression&&e.expression.interpolated}function Pi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function No(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Ru(e){return e}function So(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function Rs(e,t,i,u,p){return So(typeof i===p?u[i]:void 0,e.default,t.default)}function Ul(e,t,i){if(Pi(i)!=="number")return So(e.default,t.default);var u=e.stops.length;if(u===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[u-1][0])return e.stops[u-1][1];var p=ra(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function ul(e,t,i){var u=e.base!==void 0?e.base:1;if(Pi(i)!=="number")return So(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=ra(e.stops.map(function(V){return V[0]}),i),x=function(V,Z,H,ne){var ae=ne-H,ye=V-H;return ae===0?0:Z===1?ye/ae:(Math.pow(Z,ye)-1)/(Math.pow(Z,ae)-1)}(i,u,e.stops[d][0],e.stops[d+1][0]),S=e.stops[d][1],A=e.stops[d+1][1],R=Ka[t.type]||Ru;if(e.colorSpace&&e.colorSpace!=="rgb"){var N=ss[e.colorSpace];R=function(V,Z){return N.reverse(N.interpolate(N.forward(V),N.forward(Z),x))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var V=[],Z=arguments.length;Z--;)V[Z]=arguments[Z];var H=S.evaluate.apply(void 0,V),ne=A.evaluate.apply(void 0,V);if(H!==void 0&&ne!==void 0)return R(H,ne,x)}}:R(S,A,x)}function us(e,t,i){return t.type==="color"?i=Ft.parse(i):t.type==="formatted"?i=gi.fromString(i.toString()):t.type==="resolvedImage"?i=Ji.fromString(i.toString()):Pi(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),So(i,e.default,t.default)}zi.register(mo,{error:[{kind:"error"},[ft],function(e,t){throw new Ti(t[0].evaluate(e))}],typeof:[ft,[ut],function(e,t){return Nt(_i(t[0].evaluate(e)))}],"to-rgba":[et(Le,4),[ht],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[ht,[Le,Le,Le],ol],rgba:[ht,[Le,Le,Le,Le],ol],has:{type:ot,overloads:[[[ft],function(e,t){return Eo(t[0].evaluate(e),e.properties())}],[[ft,$t],function(e,t){var i=t[1];return Eo(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:ut,overloads:[[[ft],function(e,t){return Ls(t[0].evaluate(e),e.properties())}],[[ft,$t],function(e,t){var i=t[1];return Ls(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[ut,[ft],function(e,t){return Ls(t[0].evaluate(e),e.featureState||{})}],properties:[$t,[],function(e){return e.properties()}],"geometry-type":[ft,[],function(e){return e.geometryType()}],id:[ut,[],function(e){return e.id()}],zoom:[Le,[],function(e){return e.globals.zoom}],"heatmap-density":[Le,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Le,[],function(e){return e.globals.lineProgress||0}],accumulated:[ut,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Le,yo(Le),function(e,t){for(var i=0,u=0,p=t;u<p.length;u+=1)i+=p[u].evaluate(e);return i}],"*":[Le,yo(Le),function(e,t){for(var i=1,u=0,p=t;u<p.length;u+=1)i*=p[u].evaluate(e);return i}],"-":{type:Le,overloads:[[[Le,Le],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Le],function(e,t){return-t[0].evaluate(e)}]]},"/":[Le,[Le,Le],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Le,[Le,Le],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Le,[],function(){return Math.LN2}],pi:[Le,[],function(){return Math.PI}],e:[Le,[],function(){return Math.E}],"^":[Le,[Le,Le],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Le,[Le],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Le,[Le],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Le,[Le],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Le,[Le],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Le,[Le],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Le,[Le],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Le,[Le],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Le,[Le],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Le,[Le],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Le,[Le],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Le,yo(Le),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Le,yo(Le),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Le,[Le],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Le,[Le],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Le,[Le],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Le,[Le],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[ot,[ft,ut],function(e,t){var i=t[0],u=t[1];return e.properties()[i.value]===u.value}],"filter-id-==":[ot,[ut],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[ot,[ft],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[ot,[ft,ut],function(e,t){var i=t[0],u=t[1],p=e.properties()[i.value],d=u.value;return typeof p==typeof d&&p<d}],"filter-id-<":[ot,[ut],function(e,t){var i=t[0],u=e.id(),p=i.value;return typeof u==typeof p&&u<p}],"filter->":[ot,[ft,ut],function(e,t){var i=t[0],u=t[1],p=e.properties()[i.value],d=u.value;return typeof p==typeof d&&p>d}],"filter-id->":[ot,[ut],function(e,t){var i=t[0],u=e.id(),p=i.value;return typeof u==typeof p&&u>p}],"filter-<=":[ot,[ft,ut],function(e,t){var i=t[0],u=t[1],p=e.properties()[i.value],d=u.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[ot,[ut],function(e,t){var i=t[0],u=e.id(),p=i.value;return typeof u==typeof p&&u<=p}],"filter->=":[ot,[ft,ut],function(e,t){var i=t[0],u=t[1],p=e.properties()[i.value],d=u.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[ot,[ut],function(e,t){var i=t[0],u=e.id(),p=i.value;return typeof u==typeof p&&u>=p}],"filter-has":[ot,[ut],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[ot,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[ot,[et(ft)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[ot,[et(ut)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[ot,[ft,et(ut)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[ot,[ft,et(ut)],function(e,t){var i=t[0],u=t[1];return function(p,d,x,S){for(;x<=S;){var A=x+S>>1;if(d[A]===p)return!0;d[A]>p?S=A-1:x=A+1}return!1}(e.properties()[i.value],u.value,0,u.value.length-1)}],all:{type:ot,overloads:[[[ot,ot],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[yo(ot),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(!u[i].evaluate(e))return!1;return!0}]]},any:{type:ot,overloads:[[[ot,ot],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[yo(ot),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(u[i].evaluate(e))return!0;return!1}]]},"!":[ot,[ot],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[ot,[ft],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[ft,[ft],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[ft,[ft],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[ft,yo(ut),function(e,t){return t.map(function(i){return On(i.evaluate(e))}).join("")}],"resolved-locale":[ft,[mr],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Kn=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ri,this._defaultValue=t?function(i){return i.type==="color"&&No(i.default)?new Ft(0,0,0,0):i.type==="color"?Ft.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function Vo(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in mo}function Uo(e,t){var i=new Hr(mo,[],t?function(p){var d={color:ht,string:ft,number:Le,enum:ft,boolean:ot,formatted:Kr,resolvedImage:er};return p.type==="array"?et(d[p.value]||ut,p.length):d[p.type]}(t):void 0),u=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?sl(new Kn(u,t)):xa(i.errors)}Kn.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=u,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},Kn.prototype.evaluate=function(e,t,i,u,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Ti("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var cs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!ve(t.expression)};cs.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,p,d)},cs.prototype.evaluate=function(e,t,i,u,p,d){return this._styleExpression.evaluate(e,t,i,u,p,d)};var ko=function(e,t,i,u){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!ve(t.expression),this.interpolationType=u};function Bs(e,t){if((e=Uo(e,t)).result==="error")return e;var i=e.value.expression,u=Ei(i);if(!u&&!wa(t))return xa([new He("","data expressions not supported")]);var p=xn(i,["zoom"]);if(!p&&!ll(t))return xa([new He("","zoom expressions not supported")]);var d=function x(S){var A=null;if(S instanceof Pn)A=x(S.result);else if(S instanceof Da)for(var R=0,N=S.args;R<N.length&&!(A=x(N[R]));R+=1);else(S instanceof fn||S instanceof Di)&&S.input instanceof zi&&S.input.name==="zoom"&&(A=S);return A instanceof He||S.eachChild(function(V){var Z=x(V);Z instanceof He?A=Z:!A&&Z?A=new He("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&Z&&A!==Z&&(A=new He("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}(i);return d||p?d instanceof He?xa([d]):d instanceof Di&&!Yn(t)?xa([new He("",'"interpolate" expressions cannot be used with this property')]):sl(d?new ko(u?"camera":"composite",e.value,d.labels,d instanceof Di?d.interpolation:void 0):new cs(u?"constant":"source",e.value)):xa([new He("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ko.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,p,d)},ko.prototype.evaluate=function(e,t,i,u,p,d){return this._styleExpression.evaluate(e,t,i,u,p,d)},ko.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?Di.interpolationFactor(this.interpolationType,e,t,i):0};var Io=function(e,t){this._parameters=e,this._specification=t,Ze(this,function i(u,p){var d,x,S,A=p.type==="color",R=u.stops&&typeof u.stops[0][0]=="object",N=R||!(R||u.property!==void 0),V=u.type||(Yn(p)?"exponential":"interval");if(A&&((u=Ze({},u)).stops&&(u.stops=u.stops.map(function(Pt){return[Pt[0],Ft.parse(Pt[1])]})),u.default=Ft.parse(u.default?u.default:p.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!ss[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(V==="exponential")d=ul;else if(V==="interval")d=Ul;else if(V==="categorical"){d=Rs,x=Object.create(null);for(var Z=0,H=u.stops;Z<H.length;Z+=1){var ne=H[Z];x[ne[0]]=ne[1]}S=typeof u.stops[0][0]}else{if(V!=="identity")throw new Error('Unknown function type "'+V+'"');d=us}if(R){for(var ae={},ye=[],ce=0;ce<u.stops.length;ce++){var Ee=u.stops[ce],Pe=Ee[0].zoom;ae[Pe]===void 0&&(ae[Pe]={zoom:Pe,type:u.type,property:u.property,default:u.default,stops:[]},ye.push(Pe)),ae[Pe].stops.push([Ee[0].value,Ee[1]])}for(var Oe=[],Ne=0,Xe=ye;Ne<Xe.length;Ne+=1){var ct=Xe[Ne];Oe.push([ae[ct].zoom,i(ae[ct],p)])}var Et={name:"linear"};return{kind:"composite",interpolationType:Et,interpolationFactor:Di.interpolationFactor.bind(void 0,Et),zoomStops:Oe.map(function(Pt){return Pt[0]}),evaluate:function(Pt,ar){var Dt=Pt.zoom;return ul({stops:Oe,base:u.base},p,Dt).evaluate(Dt,ar)}}}if(N){var Qt=V==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:Qt,interpolationFactor:Di.interpolationFactor.bind(void 0,Qt),zoomStops:u.stops.map(function(Pt){return Pt[0]}),evaluate:function(Pt){return d(u,p,Pt.zoom,x,S)}}}return{kind:"source",evaluate:function(Pt,ar){var Dt=ar&&ar.properties?ar.properties[u.property]:void 0;return Dt===void 0?So(u.default,p.default):d(u,p,Dt,x,S)}}}(this._parameters,this._specification))};function Ea(e){var t=e.key,i=e.value,u=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,x=e.styleSpec,S=[],A=Pi(i);if(A!=="object")return[new re(t,i,"object expected, "+A+" found")];for(var R in i){var N=R.split(".")[0],V=u[N]||u["*"],Z=void 0;if(p[N])Z=p[N];else if(u[N])Z=ni;else if(p["*"])Z=p["*"];else{if(!u["*"]){S.push(new re(t,i[R],'unknown property "'+R+'"'));continue}Z=ni}S=S.concat(Z({key:(t&&t+".")+R,value:i[R],valueSpec:V,style:d,styleSpec:x,object:i,objectKey:R},i))}for(var H in u)p[H]||u[H].required&&u[H].default===void 0&&i[H]===void 0&&S.push(new re(t,i,'missing required property "'+H+'"'));return S}function cl(e){var t=e.value,i=e.valueSpec,u=e.style,p=e.styleSpec,d=e.key,x=e.arrayElementValidator||ni;if(Pi(t)!=="array")return[new re(d,t,"array expected, "+Pi(t)+" found")];if(i.length&&t.length!==i.length)return[new re(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new re(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var S={type:i.value,values:i.values};p.$version<7&&(S.function=i.function),Pi(i.value)==="object"&&(S=i.value);for(var A=[],R=0;R<t.length;R++)A=A.concat(x({array:t,arrayIndex:R,value:t[R],valueSpec:S,style:u,styleSpec:p,key:d+"["+R+"]"}));return A}function no(e){var t=e.key,i=e.value,u=e.valueSpec,p=Pi(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new re(t,i,"number expected, "+p+" found")]:"minimum"in u&&i<u.minimum?[new re(t,i,i+" is less than the minimum value "+u.minimum)]:"maximum"in u&&i>u.maximum?[new re(t,i,i+" is greater than the maximum value "+u.maximum)]:[]}function hl(e){var t,i,u,p=e.valueSpec,d=Je(e.value.type),x={},S=d!=="categorical"&&e.value.property===void 0,A=!S,R=Pi(e.value.stops)==="array"&&Pi(e.value.stops[0])==="array"&&Pi(e.value.stops[0][0])==="object",N=Ea({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(H){if(d==="identity")return[new re(H.key,H.value,'identity function may not have a "stops" property')];var ne=[],ae=H.value;return ne=ne.concat(cl({key:H.key,value:ae,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:V})),Pi(ae)==="array"&&ae.length===0&&ne.push(new re(H.key,ae,"array must have at least one stop")),ne},default:function(H){return ni({key:H.key,value:H.value,valueSpec:p,style:H.style,styleSpec:H.styleSpec})}}});return d==="identity"&&S&&N.push(new re(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||N.push(new re(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Yn(e.valueSpec)&&N.push(new re(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(A&&!wa(e.valueSpec)?N.push(new re(e.key,e.value,"property functions not supported")):S&&!ll(e.valueSpec)&&N.push(new re(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!R||e.value.property!==void 0||N.push(new re(e.key,e.value,'"property" property is required')),N;function V(H){var ne=[],ae=H.value,ye=H.key;if(Pi(ae)!=="array")return[new re(ye,ae,"array expected, "+Pi(ae)+" found")];if(ae.length!==2)return[new re(ye,ae,"array length 2 expected, length "+ae.length+" found")];if(R){if(Pi(ae[0])!=="object")return[new re(ye,ae,"object expected, "+Pi(ae[0])+" found")];if(ae[0].zoom===void 0)return[new re(ye,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new re(ye,ae,"object stop key must have value")];if(u&&u>Je(ae[0].zoom))return[new re(ye,ae[0].zoom,"stop zoom values must appear in ascending order")];Je(ae[0].zoom)!==u&&(u=Je(ae[0].zoom),i=void 0,x={}),ne=ne.concat(Ea({key:ye+"[0]",value:ae[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:no,value:Z}}))}else ne=ne.concat(Z({key:ye+"[0]",value:ae[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},ae));return Vo(ze(ae[1]))?ne.concat([new re(ye+"[1]",ae[1],"expressions are not allowed in function stops.")]):ne.concat(ni({key:ye+"[1]",value:ae[1],valueSpec:p,style:H.style,styleSpec:H.styleSpec}))}function Z(H,ne){var ae=Pi(H.value),ye=Je(H.value),ce=H.value!==null?H.value:ne;if(t){if(ae!==t)return[new re(H.key,ce,ae+" stop domain type must match previous stop domain type "+t)]}else t=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new re(H.key,ce,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&d!=="categorical"){var Ee="number expected, "+ae+" found";return wa(p)&&d===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new re(H.key,ce,Ee)]}return d!=="categorical"||ae!=="number"||isFinite(ye)&&Math.floor(ye)===ye?d!=="categorical"&&ae==="number"&&i!==void 0&&ye<i?[new re(H.key,ce,"stop domain values must appear in ascending order")]:(i=ye,d==="categorical"&&ye in x?[new re(H.key,ce,"stop domain values must be unique")]:(x[ye]=!0,[])):[new re(H.key,ce,"integer expected, found "+ye)]}}function ao(e){var t=(e.expressionContext==="property"?Bs:Uo)(ze(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(u){return new re(""+e.key+u.key,e.value,u.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new re(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!ve(i))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!ve(i))return[new re(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!xn(i,["zoom","feature-state"]))return[new re(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Ei(i))return[new re(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function jo(e){var t=e.key,i=e.value,u=e.valueSpec,p=[];return Array.isArray(u.values)?u.values.indexOf(Je(i))===-1&&p.push(new re(t,i,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(u.values).indexOf(Je(i))===-1&&p.push(new re(t,i,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function hs(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var u=i[t];if(!hs(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}Io.deserialize=function(e){return new Io(e._parameters,e._specification)},Io.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Os={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ps(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};hs(e)||(e=fs(e));var t=Uo(e,Os);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,u,p){return t.value.evaluate(i,u,{},p)},needGeometry:function i(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var p=1;p<u.length;p++)if(i(u[p]))return!0;return!1}(e)}}function jl(e,t){return e<t?-1:e>t?1:0}function fs(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?Fs(e[1],e[2],"=="):i==="!="?ql(Fs(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Fs(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(fs))):i==="all"?["all"].concat(e.slice(1).map(fs)):i==="none"?["all"].concat(e.slice(1).map(fs).map(ql)):i==="in"?dn(e[1],e.slice(2)):i==="!in"?ql(dn(e[1],e.slice(2))):i==="has"?pl(e[1]):i==="!has"?ql(pl(e[1])):i!=="within"||e}function Fs(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function dn(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(jl)]]:["filter-in-small",e,["literal",t]]}}function pl(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ql(e){return["!",e]}function Bu(e){return hs(ze(e.value))?ao(Ze({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var u=i.value,p=i.key;if(Pi(u)!=="array")return[new re(p,u,"array expected, "+Pi(u)+" found")];var d,x=i.styleSpec,S=[];if(u.length<1)return[new re(p,u,"filter array must have at least 1 element")];switch(S=S.concat(jo({key:p+"[0]",value:u[0],valueSpec:x.filter_operator,style:i.style,styleSpec:i.styleSpec})),Je(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Je(u[1])==="$type"&&S.push(new re(p,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&S.push(new re(p,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(d=Pi(u[1]))!=="string"&&S.push(new re(p+"[1]",u[1],"string expected, "+d+" found"));for(var A=2;A<u.length;A++)d=Pi(u[A]),Je(u[1])==="$type"?S=S.concat(jo({key:p+"["+A+"]",value:u[A],valueSpec:x.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&S.push(new re(p+"["+A+"]",u[A],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var R=1;R<u.length;R++)S=S.concat(t({key:p+"["+R+"]",value:u[R],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Pi(u[1]),u.length!==2?S.push(new re(p,u,'filter array for "'+u[0]+'" operator must have 2 elements')):d!=="string"&&S.push(new re(p+"[1]",u[1],"string expected, "+d+" found"));break;case"within":d=Pi(u[1]),u.length!==2?S.push(new re(p,u,'filter array for "'+u[0]+'" operator must have 2 elements')):d!=="object"&&S.push(new re(p+"[1]",u[1],"object expected, "+d+" found"))}return S}(e)}function Ou(e,t){var i=e.key,u=e.style,p=e.styleSpec,d=e.value,x=e.objectKey,S=p[t+"_"+e.layerType];if(!S)return[];var A=x.match(/^(.*)-transition$/);if(t==="paint"&&A&&S[A[1]]&&S[A[1]].transition)return ni({key:i,value:d,valueSpec:p.transition,style:u,styleSpec:p});var R,N=e.valueSpec||S[x];if(!N)return[new re(i,d,'unknown property "'+x+'"')];if(Pi(d)==="string"&&wa(N)&&!N.tokens&&(R=/^{([^}]+)}$/.exec(d)))return[new re(i,d,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(R[1])+" }`.")];var V=[];return e.layerType==="symbol"&&(x==="text-field"&&u&&!u.glyphs&&V.push(new re(i,d,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&No(ze(d))&&Je(d.type)==="identity"&&V.push(new re(i,d,'"text-font" does not support identity functions'))),V.concat(ni({key:e.key,value:d,valueSpec:N,style:u,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:x}))}function Fu(e){return Ou(e,"paint")}function fl(e){return Ou(e,"layout")}function Fc(e){var t=[],i=e.value,u=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new re(u,i,'either "type" or "ref" is required'));var x,S=Je(i.type),A=Je(i.ref);if(i.id)for(var R=Je(i.id),N=0;N<e.arrayIndex;N++){var V=p.layers[N];Je(V.id)===R&&t.push(new re(u,i.id,'duplicate layer id "'+i.id+'", previously used at line '+V.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(ne){ne in i&&t.push(new re(u,i[ne],'"'+ne+'" is prohibited for ref layers'))}),p.layers.forEach(function(ne){Je(ne.id)===A&&(x=ne)}),x?x.ref?t.push(new re(u,i.ref,"ref cannot reference another ref layer")):S=Je(x.type):t.push(new re(u,i.ref,'ref layer "'+A+'" not found'));else if(S!=="background")if(i.source){var Z=p.sources&&p.sources[i.source],H=Z&&Je(Z.type);Z?H==="vector"&&S==="raster"?t.push(new re(u,i.source,'layer "'+i.id+'" requires a raster source')):H==="raster"&&S!=="raster"?t.push(new re(u,i.source,'layer "'+i.id+'" requires a vector source')):H!=="vector"||i["source-layer"]?H==="raster-dem"&&S!=="hillshade"?t.push(new re(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!i.paint||!i.paint["line-gradient"]||H==="geojson"&&Z.lineMetrics||t.push(new re(u,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new re(u,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new re(u,i.source,'source "'+i.source+'" not found'))}else t.push(new re(u,i,'missing required property "source"'));return t=t.concat(Ea({key:u,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ni({key:u+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Bu,layout:function(ne){return Ea({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(ae){return fl(Ze({layerType:S},ae))}}})},paint:function(ne){return Ea({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(ae){return Fu(Ze({layerType:S},ae))}}})}}}))}function ds(e){var t=e.value,i=e.key,u=Pi(t);return u!=="string"?[new re(i,t,"string expected, "+u+" found")]:[]}var Qi={promoteId:function(e){var t=e.key,i=e.value;if(Pi(i)==="string")return ds({key:t,value:i});var u=[];for(var p in i)u.push.apply(u,ds({key:t+"."+p,value:i[p]}));return u}};function Zl(e){var t=e.value,i=e.key,u=e.styleSpec,p=e.style;if(!t.type)return[new re(i,t,'"type" is required')];var d,x=Je(t.type);switch(x){case"vector":case"raster":case"raster-dem":return Ea({key:i,value:t,valueSpec:u["source_"+x.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Qi});case"geojson":if(d=Ea({key:i,value:t,valueSpec:u.source_geojson,style:p,styleSpec:u,objectElementValidators:Qi}),t.cluster)for(var S in t.clusterProperties){var A=t.clusterProperties[S],R=A[0],N=typeof R=="string"?[R,["accumulated"],["get",S]]:R;d.push.apply(d,ao({key:i+"."+S+".map",value:A[1],expressionContext:"cluster-map"})),d.push.apply(d,ao({key:i+"."+S+".reduce",value:N,expressionContext:"cluster-reduce"}))}return d;case"video":return Ea({key:i,value:t,valueSpec:u.source_video,style:p,styleSpec:u});case"image":return Ea({key:i,value:t,valueSpec:u.source_image,style:p,styleSpec:u});case"canvas":return[new re(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return jo({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:u})}}function ms(e){var t=e.value,i=e.styleSpec,u=i.light,p=e.style,d=[],x=Pi(t);if(t===void 0)return d;if(x!=="object")return d.concat([new re("light",t,"object expected, "+x+" found")]);for(var S in t){var A=S.match(/^(.*)-transition$/);d=d.concat(A&&u[A[1]]&&u[A[1]].transition?ni({key:S,value:t[S],valueSpec:i.transition,style:p,styleSpec:i}):u[S]?ni({key:S,value:t[S],valueSpec:u[S],style:p,styleSpec:i}):[new re(S,t[S],'unknown property "'+S+'"')])}return d}var qo={"*":function(){return[]},array:cl,boolean:function(e){var t=e.value,i=e.key,u=Pi(t);return u!=="boolean"?[new re(i,t,"boolean expected, "+u+" found")]:[]},number:no,color:function(e){var t=e.key,i=e.value,u=Pi(i);return u!=="string"?[new re(t,i,"color expected, "+u+" found")]:pr(i)===null?[new re(t,i,'color expected, "'+i+'" found')]:[]},constants:we,enum:jo,filter:Bu,function:hl,layer:Fc,object:Ea,source:Zl,light:ms,string:ds,formatted:function(e){return ds(e).length===0?[]:ao(e)},resolvedImage:function(e){return ds(e).length===0?[]:ao(e)}};function ni(e){var t=e.value,i=e.valueSpec,u=e.styleSpec;return i.expression&&No(Je(t))?hl(e):i.expression&&Vo(ze(t))?ao(e):i.type&&qo[i.type]?qo[i.type](e):Ea(Ze({},e,{valueSpec:i.type?u[i.type]:i}))}function Ni(e){var t=e.value,i=e.key,u=ds(e);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new re(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new re(i,t,'"glyphs" url must include a "{range}" token'))),u}function Ra(e,t){t===void 0&&(t=K);var i=[];return i=i.concat(ni({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ni,"*":function(){return[]}}})),e.constants&&(i=i.concat(we({key:"constants",value:e.constants,style:e,styleSpec:t}))),dl(i)}function dl(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function Ns(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return dl(e.apply(this,t))}}Ra.source=Ns(Zl),Ra.light=Ns(ms),Ra.layer=Ns(Fc),Ra.filter=Ns(Bu),Ra.paintProperty=Ns(Fu),Ra.layoutProperty=Ns(fl);var ml=Ra,Hh=ml.light,Xh=ml.paintProperty,yl=ml.layoutProperty;function gl(e,t){var i=!1;if(t&&t.length)for(var u=0,p=t;u<p.length;u+=1)e.fire(new ue(new Error(p[u].message))),i=!0;return i}var To=kn;function kn(e,t,i){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var x=p[3+d],S=p[3+d+1];u.push(x===S?null:p.subarray(x,S))}var A=p[3+u.length+1];this.keys=p.subarray(p[3+u.length],A),this.bboxes=p.subarray(A),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var R=0;R<this.d*this.d;R++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var N=i/t*e;this.min=-N,this.max=e+N}kn.prototype.insert=function(e,t,i,u,p){this._forEachCell(t,i,u,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(p)},kn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},kn.prototype._insertCell=function(e,t,i,u,p,d){this.cells[p].push(d)},kn.prototype.query=function(e,t,i,u,p){var d=this.min,x=this.max;if(e<=d&&t<=d&&x<=i&&x<=u&&!p)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(e,t,i,u,this._queryCell,S,{},p),S},kn.prototype._queryCell=function(e,t,i,u,p,d,x,S){var A=this.cells[p];if(A!==null)for(var R=this.keys,N=this.bboxes,V=0;V<A.length;V++){var Z=A[V];if(x[Z]===void 0){var H=4*Z;(S?S(N[H+0],N[H+1],N[H+2],N[H+3]):e<=N[H+2]&&t<=N[H+3]&&i>=N[H+0]&&u>=N[H+1])?(x[Z]=!0,d.push(R[Z])):x[Z]=!1}}},kn.prototype._forEachCell=function(e,t,i,u,p,d,x,S){for(var A=this._convertToCellCoord(e),R=this._convertToCellCoord(t),N=this._convertToCellCoord(i),V=this._convertToCellCoord(u),Z=A;Z<=N;Z++)for(var H=R;H<=V;H++){var ne=this.d*H+Z;if((!S||S(this._convertFromCellCoord(Z),this._convertFromCellCoord(H),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(H+1)))&&p.call(this,e,t,i,u,ne,d,x,S))return}},kn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},kn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},kn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,u=0;u<this.cells.length;u++)i+=this.cells[u].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,x=0;x<e.length;x++){var S=e[x];p[3+x]=d,p.set(S,d),d+=S.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var _l=D.ImageData,Nc=D.ImageBitmap,wn={};function jt(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),wn[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Sa in jt("Object",Object),To.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},To.deserialize=function(e){return new To(e.buffer)},jt("Grid",To),jt("Color",Ft),jt("Error",Error),jt("ResolvedImage",Ji),jt("StylePropertyFunction",Io),jt("StyleExpression",Kn,{omit:["_evaluator"]}),jt("ZoomDependentExpression",ko),jt("ZoomConstantExpression",cs),jt("CompoundExpression",zi,{omit:["_evaluate"]}),mo)mo[Sa]._classRegistryKey||jt("Expression_"+Sa,mo[Sa]);function Gl(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Vs(e){return Nc&&e instanceof Nc}function oo(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Gl(e)||Vs(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof _l)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],p=0,d=e;p<d.length;p+=1)u.push(oo(d[p],t));return u}if(typeof e=="object"){var x=e.constructor,S=x._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var A=x.serialize?x.serialize(e,t):{};if(!x.serialize){for(var R in e)if(e.hasOwnProperty(R)&&!(wn[S].omit.indexOf(R)>=0)){var N=e[R];A[R]=wn[S].shallow.indexOf(R)>=0?N:oo(N,t)}e instanceof Error&&(A.message=e.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(A.$name=S),A}throw new Error("can't serialize object of type "+typeof e)}function ka(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Gl(e)||Vs(e)||ArrayBuffer.isView(e)||e instanceof _l)return e;if(Array.isArray(e))return e.map(ka);if(typeof e=="object"){var t=e.$name||"Object",i=wn[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var u=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var x=d[p];if(x!=="$name"){var S=e[x];u[x]=wn[t].shallow.indexOf(x)>=0?S:ka(S)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var Nu=function(){this.first=!0};Nu.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var Tt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Vu(e){for(var t=0,i=e;t<i.length;t+=1)if(Kl(i[t].charCodeAt(0)))return!0;return!1}function Kl(e){return!(e!==746&&e!==747&&(e<4352||!(Tt["Bopomofo Extended"](e)||Tt.Bopomofo(e)||Tt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Tt["CJK Compatibility Ideographs"](e)||Tt["CJK Compatibility"](e)||Tt["CJK Radicals Supplement"](e)||Tt["CJK Strokes"](e)||!(!Tt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||Tt["CJK Unified Ideographs Extension A"](e)||Tt["CJK Unified Ideographs"](e)||Tt["Enclosed CJK Letters and Months"](e)||Tt["Hangul Compatibility Jamo"](e)||Tt["Hangul Jamo Extended-A"](e)||Tt["Hangul Jamo Extended-B"](e)||Tt["Hangul Jamo"](e)||Tt["Hangul Syllables"](e)||Tt.Hiragana(e)||Tt["Ideographic Description Characters"](e)||Tt.Kanbun(e)||Tt["Kangxi Radicals"](e)||Tt["Katakana Phonetic Extensions"](e)||Tt.Katakana(e)&&e!==12540||!(!Tt["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!Tt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Tt["Unified Canadian Aboriginal Syllabics"](e)||Tt["Unified Canadian Aboriginal Syllabics Extended"](e)||Tt["Vertical Forms"](e)||Tt["Yijing Hexagram Symbols"](e)||Tt["Yi Syllables"](e)||Tt["Yi Radicals"](e))))}function Uu(e){return!(Kl(e)||function(t){return!!(Tt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Tt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Tt["Letterlike Symbols"](t)||Tt["Number Forms"](t)||Tt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Tt["Control Pictures"](t)&&t!==9251||Tt["Optical Character Recognition"](t)||Tt["Enclosed Alphanumerics"](t)||Tt["Geometric Shapes"](t)||Tt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Tt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Tt["CJK Symbols and Punctuation"](t)||Tt.Katakana(t)||Tt["Private Use Area"](t)||Tt["CJK Compatibility Forms"](t)||Tt["Small Form Variants"](t)||Tt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Ha(e){return e>=1424&&e<=2303||Tt["Arabic Presentation Forms-A"](e)||Tt["Arabic Presentation Forms-B"](e)}function Ia(e,t){return!(!t&&Ha(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Tt.Khmer(e))}function Hl(e){for(var t=0,i=e;t<i.length;t+=1)if(Ha(i[t].charCodeAt(0)))return!0;return!1}var Xl=null,Ta="unavailable",Ao=null,Vc=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Ta="error"),Xl&&Xl(e)};function vl(){ju.fire(new te("pluginStateChange",{pluginStatus:Ta,pluginURL:Ao}))}var ju=new ge,qu=function(){return Ta},so=function(){if(Ta!=="deferred"||!Ao)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ta="loading",vl(),Ao&&Mr({url:Ao},function(e){e?Vc(e):(Ta="loaded",vl())})},Ba={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ta==="loaded"||Ba.applyArabicShaping!=null},isLoading:function(){return Ta==="loading"},setState:function(e){Ta=e.pluginStatus,Ao=e.pluginURL},isParsed:function(){return Ba.applyArabicShaping!=null&&Ba.processBidirectionalText!=null&&Ba.processStyledBidirectionalText!=null},getPluginURL:function(){return Ao}},$r=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Nu,this.transition={})};$r.prototype.isSupportedScript=function(e){return function(t,i){for(var u=0,p=t;u<p.length;u+=1)if(!Ia(p[u].charCodeAt(0),i))return!1;return!0}(e,Ba.isLoaded())},$r.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},$r.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var go=function(e,t){this.property=e,this.value=t,this.expression=function(i,u){if(No(i))return new Io(i,u);if(Vo(i)){var p=Bs(i,u);if(p.result==="error")throw new Error(p.value.map(function(x){return x.key+": "+x.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&u.type==="color"&&(d=Ft.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};go.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},go.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var Xa=function(e){this.property=e,this.value=new go(e,void 0)};Xa.prototype.transitioned=function(e,t){return new ys(this.property,this.value,t,Ce({},e.transition,this.transition),e.now)},Xa.prototype.untransitioned=function(){return new ys(this.property,this.value,null,{},0)};var Hn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Hn.prototype.getValue=function(e){return Ie(this._values[e].value.value)},Hn.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Xa(this._values[e].property)),this._values[e].value=new go(this._values[e].property,t===null?void 0:Ie(t))},Hn.prototype.getTransition=function(e){return Ie(this._values[e].transition)},Hn.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Xa(this._values[e].property)),this._values[e].transition=Ie(t)||void 0},Hn.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],p=this.getValue(u);p!==void 0&&(e[u]=p);var d=this.getTransition(u);d!==void 0&&(e[u+"-transition"]=d)}return e},Hn.prototype.transitioned=function(e,t){for(var i=new Zo(this._properties),u=0,p=Object.keys(this._values);u<p.length;u+=1){var d=p[u];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},Hn.prototype.untransitioned=function(){for(var e=new Zo(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t];e._values[u]=this._values[u].untransitioned()}return e};var ys=function(e,t,i,u,p){this.property=e,this.value=t,this.begin=p+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)};ys.prototype.possiblyEvaluate=function(e,t,i){var u=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(u>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(u<this.begin)return d.possiblyEvaluate(e,t,i);var x=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(S){if(S<=0)return 0;if(S>=1)return 1;var A=S*S,R=A*S;return 4*(S<.5?R:3*(S-A)+R-.75)}(x))}return p};var Zo=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Zo.prototype.possiblyEvaluate=function(e,t,i){for(var u=new bl(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u},Zo.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var lo=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};lo.prototype.getValue=function(e){return Ie(this._values[e].value)},lo.prototype.setValue=function(e,t){this._values[e]=new go(this._values[e].property,t===null?void 0:Ie(t))},lo.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],p=this.getValue(u);p!==void 0&&(e[u]=p)}return e},lo.prototype.possiblyEvaluate=function(e,t,i){for(var u=new bl(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u};var ia=function(e,t,i){this.property=e,this.value=t,this.parameters=i};ia.prototype.isConstant=function(){return this.value.kind==="constant"},ia.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},ia.prototype.evaluate=function(e,t,i,u){return this.property.evaluate(this.value,this.parameters,e,t,i,u)};var bl=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};bl.prototype.get=function(e){return this._values[e]};var ir=function(e){this.specification=e};ir.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},ir.prototype.interpolate=function(e,t,i){var u=Ka[this.specification.type];return u?u(e,t,i):e};var Zt=function(e,t){this.specification=e,this.overrides=t};Zt.prototype.possiblyEvaluate=function(e,t,i,u){return new ia(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,u)}:e.expression,t)},Zt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new ia(this,{kind:"constant",value:void 0},e.parameters);var u=Ka[this.specification.type];return u?new ia(this,{kind:"constant",value:u(e.value.value,t.value.value,i)},e.parameters):e},Zt.prototype.evaluate=function(e,t,i,u,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,u,p,d)};var Wl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u,p,d){if(i.value===void 0)return new ia(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){var x=i.expression.evaluate(u,null,{},p,d),S=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,A=this._calculate(S,S,S,u);return new ia(this,{kind:"constant",value:A},u)}if(i.expression.kind==="camera"){var R=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new ia(this,{kind:"constant",value:R},u)}return new ia(this,i.expression,u)},t.prototype.evaluate=function(i,u,p,d,x,S){if(i.kind==="source"){var A=i.evaluate(u,p,d,x,S);return this._calculate(A,A,A,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},p,d),i.evaluate({zoom:Math.floor(u.zoom)},p,d),i.evaluate({zoom:Math.floor(u.zoom)+1},p,d),u):i.value},t.prototype._calculate=function(i,u,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:p,to:u}},t.prototype.interpolate=function(i){return i},t}(Zt),na=function(e){this.specification=e};na.prototype.possiblyEvaluate=function(e,t,i,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,u);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new $r(Math.floor(t.zoom-1),t)),e.expression.evaluate(new $r(Math.floor(t.zoom),t)),e.expression.evaluate(new $r(Math.floor(t.zoom+1),t)),t)}},na.prototype._calculate=function(e,t,i,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},na.prototype.interpolate=function(e){return e};var uo=function(e){this.specification=e};uo.prototype.possiblyEvaluate=function(e,t,i,u){return!!e.expression.evaluate(t,null,{},i,u)},uo.prototype.interpolate=function(){return!1};var Xn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var u=this.defaultPropertyValues[t]=new go(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new Xa(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=u.possiblyEvaluate({})}};jt("DataDrivenProperty",Zt),jt("DataConstantProperty",ir),jt("CrossFadedDataDrivenProperty",Wl),jt("CrossFadedProperty",na),jt("ColorRampProperty",uo);var _o=function(e){function t(i,u){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new lo(u.layout)),u.paint)){for(var p in this._transitionablePaint=new Hn(u.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new bl(u.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,u,p){p===void 0&&(p={}),u!=null&&this._validate(yl,"layers."+this.id+".layout."+i,i,u,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)},t.prototype.getPaintProperty=function(i){return yt(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,u,p){if(p===void 0&&(p={}),u!=null&&this._validate(Xh,"layers."+this.id+".paint."+i,i,u,p))return!1;if(yt(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;var d=this._transitionablePaint._values[i],x=d.property.specification["property-type"]==="cross-faded-data-driven",S=d.value.isDataDriven(),A=d.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);var R=this._transitionablePaint._values[i].value;return R.isDataDriven()||S||x||this._handleOverridablePaintPropertyUpdate(i,A,R)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),lt(i,function(u,p){return!(u===void 0||p==="layout"&&!Object.keys(u).length||p==="paint"&&!Object.keys(u).length)})},t.prototype._validate=function(i,u,p,d,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&gl(this,i.call(ml,{key:u,layerType:this.type,objectKey:p,value:d,styleSpec:K,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var u=this.paint.get(i);if(u instanceof ia&&wa(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},t}(ge),Zu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Jl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Si=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Vn(e,t){t===void 0&&(t=1);var i=0,u=0;return{members:e.map(function(p){var d=Zu[p.type].BYTES_PER_ELEMENT,x=i=Uc(i,Math.max(t,d)),S=p.components||1;return u=Math.max(u,d),i+=d*S,{name:p.name,type:p.type,components:S,offset:x}}),size:Uc(i,Math.max(u,t)),alignment:t}}function Uc(e,t){return Math.ceil(e/t)*t}Si.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Si.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Si.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Si.prototype.clear=function(){this.length=0},Si.prototype.resize=function(e){this.reserve(e),this.length=e},Si.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Si.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var gs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var p=this.length;return this.resize(p+1),this.emplace(p,i,u)},t.prototype.emplace=function(i,u,p){var d=2*i;return this.int16[d+0]=u,this.int16[d+1]=p,i},t}(Si);gs.prototype.bytesPerElement=4,jt("StructArrayLayout2i4",gs);var Gu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,p,d)},t.prototype.emplace=function(i,u,p,d,x){var S=4*i;return this.int16[S+0]=u,this.int16[S+1]=p,this.int16[S+2]=d,this.int16[S+3]=x,i},t}(Si);Gu.prototype.bytesPerElement=8,jt("StructArrayLayout4i8",Gu);var zo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,u,p,d,x,S)},t.prototype.emplace=function(i,u,p,d,x,S,A){var R=6*i;return this.int16[R+0]=u,this.int16[R+1]=p,this.int16[R+2]=d,this.int16[R+3]=x,this.int16[R+4]=S,this.int16[R+5]=A,i},t}(Si);zo.prototype.bytesPerElement=12,jt("StructArrayLayout2i4i12",zo);var Aa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,u,p,d,x,S)},t.prototype.emplace=function(i,u,p,d,x,S,A){var R=4*i,N=8*i;return this.int16[R+0]=u,this.int16[R+1]=p,this.uint8[N+4]=d,this.uint8[N+5]=x,this.uint8[N+6]=S,this.uint8[N+7]=A,i},t}(Si);Aa.prototype.bytesPerElement=8,jt("StructArrayLayout2i4ub8",Aa);var Us=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var p=this.length;return this.resize(p+1),this.emplace(p,i,u)},t.prototype.emplace=function(i,u,p){var d=2*i;return this.float32[d+0]=u,this.float32[d+1]=p,i},t}(Si);Us.prototype.bytesPerElement=8,jt("StructArrayLayout2f8",Us);var vo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S,A,R,N,V){var Z=this.length;return this.resize(Z+1),this.emplace(Z,i,u,p,d,x,S,A,R,N,V)},t.prototype.emplace=function(i,u,p,d,x,S,A,R,N,V,Z){var H=10*i;return this.uint16[H+0]=u,this.uint16[H+1]=p,this.uint16[H+2]=d,this.uint16[H+3]=x,this.uint16[H+4]=S,this.uint16[H+5]=A,this.uint16[H+6]=R,this.uint16[H+7]=N,this.uint16[H+8]=V,this.uint16[H+9]=Z,i},t}(Si);vo.prototype.bytesPerElement=20,jt("StructArrayLayout10ui20",vo);var Yl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S,A,R,N,V,Z,H){var ne=this.length;return this.resize(ne+1),this.emplace(ne,i,u,p,d,x,S,A,R,N,V,Z,H)},t.prototype.emplace=function(i,u,p,d,x,S,A,R,N,V,Z,H,ne){var ae=12*i;return this.int16[ae+0]=u,this.int16[ae+1]=p,this.int16[ae+2]=d,this.int16[ae+3]=x,this.uint16[ae+4]=S,this.uint16[ae+5]=A,this.uint16[ae+6]=R,this.uint16[ae+7]=N,this.int16[ae+8]=V,this.int16[ae+9]=Z,this.int16[ae+10]=H,this.int16[ae+11]=ne,i},t}(Si);Yl.prototype.bytesPerElement=24,jt("StructArrayLayout4i4ui4i24",Yl);var js=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,p)},t.prototype.emplace=function(i,u,p,d){var x=3*i;return this.float32[x+0]=u,this.float32[x+1]=p,this.float32[x+2]=d,i},t}(Si);js.prototype.bytesPerElement=12,jt("StructArrayLayout3f12",js);var xl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint32[1*i+0]=u,i},t}(Si);xl.prototype.bytesPerElement=4,jt("StructArrayLayout1ul4",xl);var Ku=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S,A,R,N){var V=this.length;return this.resize(V+1),this.emplace(V,i,u,p,d,x,S,A,R,N)},t.prototype.emplace=function(i,u,p,d,x,S,A,R,N,V){var Z=10*i,H=5*i;return this.int16[Z+0]=u,this.int16[Z+1]=p,this.int16[Z+2]=d,this.int16[Z+3]=x,this.int16[Z+4]=S,this.int16[Z+5]=A,this.uint32[H+3]=R,this.uint16[Z+8]=N,this.uint16[Z+9]=V,i},t}(Si);Ku.prototype.bytesPerElement=20,jt("StructArrayLayout6i1ul2ui20",Ku);var qs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,u,p,d,x,S)},t.prototype.emplace=function(i,u,p,d,x,S,A){var R=6*i;return this.int16[R+0]=u,this.int16[R+1]=p,this.int16[R+2]=d,this.int16[R+3]=x,this.int16[R+4]=S,this.int16[R+5]=A,i},t}(Si);qs.prototype.bytesPerElement=12,jt("StructArrayLayout2i2i2i12",qs);var _s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x){var S=this.length;return this.resize(S+1),this.emplace(S,i,u,p,d,x)},t.prototype.emplace=function(i,u,p,d,x,S){var A=4*i,R=8*i;return this.float32[A+0]=u,this.float32[A+1]=p,this.float32[A+2]=d,this.int16[R+6]=x,this.int16[R+7]=S,i},t}(Si);_s.prototype.bytesPerElement=16,jt("StructArrayLayout2f1f2i16",_s);var Hu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,p,d)},t.prototype.emplace=function(i,u,p,d,x){var S=12*i,A=3*i;return this.uint8[S+0]=u,this.uint8[S+1]=p,this.float32[A+1]=d,this.float32[A+2]=x,i},t}(Si);Hu.prototype.bytesPerElement=12,jt("StructArrayLayout2ub2f12",Hu);var Go=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,p)},t.prototype.emplace=function(i,u,p,d){var x=3*i;return this.uint16[x+0]=u,this.uint16[x+1]=p,this.uint16[x+2]=d,i},t}(Si);Go.prototype.bytesPerElement=6,jt("StructArrayLayout3ui6",Go);var Ko=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S,A,R,N,V,Z,H,ne,ae,ye,ce,Ee){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,i,u,p,d,x,S,A,R,N,V,Z,H,ne,ae,ye,ce,Ee)},t.prototype.emplace=function(i,u,p,d,x,S,A,R,N,V,Z,H,ne,ae,ye,ce,Ee,Pe){var Oe=24*i,Ne=12*i,Xe=48*i;return this.int16[Oe+0]=u,this.int16[Oe+1]=p,this.uint16[Oe+2]=d,this.uint16[Oe+3]=x,this.uint32[Ne+2]=S,this.uint32[Ne+3]=A,this.uint32[Ne+4]=R,this.uint16[Oe+10]=N,this.uint16[Oe+11]=V,this.uint16[Oe+12]=Z,this.float32[Ne+7]=H,this.float32[Ne+8]=ne,this.uint8[Xe+36]=ae,this.uint8[Xe+37]=ye,this.uint8[Xe+38]=ce,this.uint32[Ne+10]=Ee,this.int16[Oe+22]=Pe,i},t}(Si);Ko.prototype.bytesPerElement=48,jt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ko);var Ql=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d,x,S,A,R,N,V,Z,H,ne,ae,ye,ce,Ee,Pe,Oe,Ne,Xe,ct,Et,Qt,Pt,ar,Dt,Zr){var br=this.length;return this.resize(br+1),this.emplace(br,i,u,p,d,x,S,A,R,N,V,Z,H,ne,ae,ye,ce,Ee,Pe,Oe,Ne,Xe,ct,Et,Qt,Pt,ar,Dt,Zr)},t.prototype.emplace=function(i,u,p,d,x,S,A,R,N,V,Z,H,ne,ae,ye,ce,Ee,Pe,Oe,Ne,Xe,ct,Et,Qt,Pt,ar,Dt,Zr,br){var Gt=34*i,Qr=17*i;return this.int16[Gt+0]=u,this.int16[Gt+1]=p,this.int16[Gt+2]=d,this.int16[Gt+3]=x,this.int16[Gt+4]=S,this.int16[Gt+5]=A,this.int16[Gt+6]=R,this.int16[Gt+7]=N,this.uint16[Gt+8]=V,this.uint16[Gt+9]=Z,this.uint16[Gt+10]=H,this.uint16[Gt+11]=ne,this.uint16[Gt+12]=ae,this.uint16[Gt+13]=ye,this.uint16[Gt+14]=ce,this.uint16[Gt+15]=Ee,this.uint16[Gt+16]=Pe,this.uint16[Gt+17]=Oe,this.uint16[Gt+18]=Ne,this.uint16[Gt+19]=Xe,this.uint16[Gt+20]=ct,this.uint16[Gt+21]=Et,this.uint16[Gt+22]=Qt,this.uint32[Qr+12]=Pt,this.float32[Qr+13]=ar,this.float32[Qr+14]=Dt,this.float32[Qr+15]=Zr,this.float32[Qr+16]=br,i},t}(Si);Ql.prototype.bytesPerElement=68,jt("StructArrayLayout8i15ui1ul4f68",Ql);var Ho=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.float32[1*i+0]=u,i},t}(Si);Ho.prototype.bytesPerElement=4,jt("StructArrayLayout1f4",Ho);var Wa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,p)},t.prototype.emplace=function(i,u,p,d){var x=3*i;return this.int16[x+0]=u,this.int16[x+1]=p,this.int16[x+2]=d,i},t}(Si);Wa.prototype.bytesPerElement=6,jt("StructArrayLayout3i6",Wa);var Xu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,p)},t.prototype.emplace=function(i,u,p,d){var x=4*i;return this.uint32[2*i+0]=u,this.uint16[x+2]=p,this.uint16[x+3]=d,i},t}(Si);Xu.prototype.bytesPerElement=8,jt("StructArrayLayout1ul2ui8",Xu);var wl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var p=this.length;return this.resize(p+1),this.emplace(p,i,u)},t.prototype.emplace=function(i,u,p){var d=2*i;return this.uint16[d+0]=u,this.uint16[d+1]=p,i},t}(Si);wl.prototype.bytesPerElement=4,jt("StructArrayLayout2ui4",wl);var Wu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint16[1*i+0]=u,i},t}(Si);Wu.prototype.bytesPerElement=2,jt("StructArrayLayout1ui2",Wu);var $l=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,p,d)},t.prototype.emplace=function(i,u,p,d,x){var S=4*i;return this.float32[S+0]=u,this.float32[S+1]=p,this.float32[S+2]=d,this.float32[S+3]=x,i},t}(Si);$l.prototype.bytesPerElement=16,jt("StructArrayLayout4f16",$l);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new z(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(Jl);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(Ku);jt("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(Jl);o.prototype.size=48;var h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Ko);jt("PlacedSymbolArray",h);var y=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(Jl);y.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new y(this,i)},t}(Ql);jt("SymbolInstanceArray",w);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Ho);jt("GlyphOffsetArray",E);var T=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Wa);jt("SymbolLineVertexArray",T);var B=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(Jl);B.prototype.size=8;var U=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new B(this,i)},t}(Xu);jt("FeatureIndexArray",U);var J=Vn([{name:"a_pos",components:2,type:"Int16"}],4).members,$=function(e){e===void 0&&(e=[]),this.segments=e};function ee(e,t){return 256*(e=_e(Math.floor(e),0,255))+_e(Math.floor(t),0,255)}$.prototype.prepareSegment=function(e,t,i,u){var p=this.segments[this.segments.length-1];return e>$.MAX_VERTEX_ARRAY_LENGTH&&nt("Max vertices per segment is "+$.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>$.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==u)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},u!==void 0&&(p.sortKey=u),this.segments.push(p)),p},$.prototype.get=function(){return this.segments},$.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var u in i.vaos)i.vaos[u].destroy()}},$.simpleSegment=function(e,t,i,u){return new $([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])},$.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,jt("SegmentVector",$);var le=Vn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),oe=I(function(e){e.exports=function(t,i){var u,p,d,x,S,A,R,N;for(p=t.length-(u=3&t.length),d=i,S=3432918353,A=461845907,N=0;N<p;)R=255&t.charCodeAt(N)|(255&t.charCodeAt(++N))<<8|(255&t.charCodeAt(++N))<<16|(255&t.charCodeAt(++N))<<24,++N,d=27492+(65535&(x=5*(65535&(d=(d^=R=(65535&(R=(R=(65535&R)*S+(((R>>>16)*S&65535)<<16)&4294967295)<<15|R>>>17))*A+(((R>>>16)*A&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(R=0,u){case 3:R^=(255&t.charCodeAt(N+2))<<16;case 2:R^=(255&t.charCodeAt(N+1))<<8;case 1:d^=R=(65535&(R=(R=(65535&(R^=255&t.charCodeAt(N)))*S+(((R>>>16)*S&65535)<<16)&4294967295)<<15|R>>>17))*A+(((R>>>16)*A&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),me=I(function(e){e.exports=function(t,i){for(var u,p=t.length,d=i^p,x=0;p>=4;)u=1540483477*(65535&(u=255&t.charCodeAt(x)|(255&t.charCodeAt(++x))<<8|(255&t.charCodeAt(++x))<<16|(255&t.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++x;switch(p){case 3:d^=(255&t.charCodeAt(x+2))<<16;case 2:d^=(255&t.charCodeAt(x+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(x)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),ie=oe,de=me;ie.murmur3=oe,ie.murmur2=de;var be=function(){this.ids=[],this.positions=[],this.indexed=!1};be.prototype.add=function(e,t,i,u){this.ids.push(Ue(e)),this.positions.push(t,i,u)},be.prototype.getPositions=function(e){for(var t=Ue(e),i=0,u=this.ids.length-1;i<u;){var p=i+u>>1;this.ids[p]>=t?u=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},be.serialize=function(e,t){var i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function p(d,x,S,A){for(;S<A;){for(var R=d[S+A>>1],N=S-1,V=A+1;;){do N++;while(d[N]<R);do V--;while(d[V]>R);if(N>=V)break;Fe(d,N,V),Fe(x,3*N,3*V),Fe(x,3*N+1,3*V+1),Fe(x,3*N+2,3*V+2)}V-S<A-V?(p(d,x,S,V),S=V+1):(p(d,x,V+1,A),A=V)}}(i,u,0,i.length-1),t&&t.push(i.buffer,u.buffer),{ids:i,positions:u}},be.deserialize=function(e){var t=new be;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Ae=Math.pow(2,53)-1;function Ue(e){var t=+e;return!isNaN(t)&&t<=Ae?t:ie(String(e))}function Fe(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}jt("FeaturePositionMap",be);var je=function(e,t){this.gl=e.gl,this.location=t},tt=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(je),_t=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(je),dt=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(je),Ot=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(je),nr=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(je),ur=function(e){function t(i,u){e.call(this,i,u),this.current=Ft.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(je),sr=new Float32Array(16),ci=function(e){function t(i,u){e.call(this,i,u),this.current=sr}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(je);function Vt(e){return[ee(255*e.r,255*e.g),ee(255*e.b,255*e.a)]}var Pr=function(e,t,i){this.value=e,this.uniformNames=t.map(function(u){return"u_"+u}),this.type=i};Pr.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Pr.prototype.getBinding=function(e,t,i){return this.type==="color"?new ur(e,t):new _t(e,t)};var jr=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};jr.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},jr.prototype.setUniform=function(e,t,i,u){var p=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},jr.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new nr(e,t):new _t(e,t)};var zr=function(e,t,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new u};zr.prototype.populatePaintArray=function(e,t,i,u,p){var d=this.paintVertexArray.length,x=this.expression.evaluate(new $r(0),t,{},u,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,x)},zr.prototype.updatePaintArray=function(e,t,i,u){var p=this.expression.evaluate({zoom:0},i,u);this._setPaintValue(e,t,p)},zr.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var u=Vt(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,u[0],u[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},zr.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Tr=function(e,t,i,u,p,d){this.expression=e,this.uniformNames=t.map(function(x){return"u_"+x+"_t"}),this.type=i,this.useIntegerZoom=u,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(x){return{name:"a_"+x,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Tr.prototype.populatePaintArray=function(e,t,i,u,p){var d=this.expression.evaluate(new $r(this.zoom),t,{},u,[],p),x=this.expression.evaluate(new $r(this.zoom+1),t,{},u,[],p),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,d,x)},Tr.prototype.updatePaintArray=function(e,t,i,u){var p=this.expression.evaluate({zoom:this.zoom},i,u),d=this.expression.evaluate({zoom:this.zoom+1},i,u);this._setPaintValue(e,t,p,d)},Tr.prototype._setPaintValue=function(e,t,i,u){if(this.type==="color")for(var p=Vt(i),d=Vt(u),x=e;x<t;x++)this.paintVertexArray.emplace(x,p[0],p[1],d[0],d[1]);else{for(var S=e;S<t;S++)this.paintVertexArray.emplace(S,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}},Tr.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Tr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Tr.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,u=_e(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(u)},Tr.prototype.getBinding=function(e,t,i){return new _t(e,t)};var Or=function(e,t,i,u,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=u,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Or.prototype.populatePaintArray=function(e,t,i){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,t.patterns&&t.patterns[this.layerId],i)},Or.prototype.updatePaintArray=function(e,t,i,u,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Or.prototype._setPaintValues=function(e,t,i,u){if(u&&i){var p=u[i.min],d=u[i.mid],x=u[i.max];if(p&&d&&x)for(var S=e;S<t;S++)this.zoomInPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],d.pixelRatio,x.pixelRatio)}},Or.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,le.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,le.members,this.expression.isStateDependent))},Or.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var wr=function(e,t,i){this.binders={},this._buffers=[];var u=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof ia&&wa(d.property.specification)){var x=Cn(p,e.type),S=d.value,A=d.property.specification.type,R=d.property.useIntegerZoom,N=d.property.specification["property-type"],V=N==="cross-faded"||N==="cross-faded-data-driven";if(S.kind==="constant")this.binders[p]=V?new jr(S.value,x):new Pr(S.value,x,A),u.push("/u_"+p);else if(S.kind==="source"||V){var Z=sn(p,A,"source");this.binders[p]=V?new Or(S,A,R,t,Z,e.id):new zr(S,x,A,Z),u.push("/a_"+p)}else{var H=sn(p,A,"composite");this.binders[p]=new Tr(S,x,A,R,t,H),u.push("/z_"+p)}}}this.cacheKey=u.sort().join("")};wr.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof zr||t instanceof Tr?t.maxValue:0},wr.prototype.populatePaintArrays=function(e,t,i,u,p){for(var d in this.binders){var x=this.binders[d];(x instanceof zr||x instanceof Tr||x instanceof Or)&&x.populatePaintArray(e,t,i,u,p)}},wr.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var u=this.binders[i];u instanceof jr&&u.setConstantPatternPositions(e,t)}},wr.prototype.updatePaintArrays=function(e,t,i,u,p){var d=!1;for(var x in e)for(var S=0,A=t.getPositions(x);S<A.length;S+=1){var R=A[S],N=i.feature(R.index);for(var V in this.binders){var Z=this.binders[V];if((Z instanceof zr||Z instanceof Tr||Z instanceof Or)&&Z.expression.isStateDependent===!0){var H=u.paint.get(V);Z.expression=H.value,Z.updatePaintArray(R.start,R.end,N,e[x],p),d=!0}}}return d},wr.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Pr||i instanceof jr)&&e.push.apply(e,i.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},wr.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof zr||i instanceof Tr)for(var u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name);else if(i instanceof Or)for(var p=0;p<le.members.length;p++)e.push(le.members[p].name)}return e},wr.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Pr||i instanceof jr||i instanceof Tr)for(var u=0,p=i.uniformNames;u<p.length;u+=1)e.push(p[u])}return e},wr.prototype.getPaintVertexBuffers=function(){return this._buffers},wr.prototype.getUniforms=function(e,t){var i=[];for(var u in this.binders){var p=this.binders[u];if(p instanceof Pr||p instanceof jr||p instanceof Tr)for(var d=0,x=p.uniformNames;d<x.length;d+=1){var S=x[d];if(t[S]){var A=p.getBinding(e,t[S],S);i.push({name:S,property:u,binding:A})}}}return i},wr.prototype.setUniforms=function(e,t,i,u){for(var p=0,d=t;p<d.length;p+=1){var x=d[p],S=x.name,A=x.property;this.binders[A].setUniform(x.binding,u,i.get(A),S)}},wr.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Or){var u=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(i instanceof zr||i instanceof Tr)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},wr.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof zr||i instanceof Tr||i instanceof Or)&&i.upload(e)}this.updatePaintBuffers()},wr.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof zr||t instanceof Tr||t instanceof Or)&&t.destroy()}};var _r=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var u=0,p=e;u<p.length;u+=1){var d=p[u];this.programConfigurations[d.id]=new wr(d,t,i)}this.needsUpload=!1,this._featureMap=new be,this._bufferOffset=0};function Cn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function sn(e,t,i){var u={color:{source:Us,composite:$l},number:{source:Ho,composite:Us}},p=function(d){return{"line-pattern":{source:vo,composite:vo},"fill-pattern":{source:vo,composite:vo},"fill-extrusion-pattern":{source:vo,composite:vo}}[d]}(e);return p&&p[i]||u[t][i]}_r.prototype.populatePaintArrays=function(e,t,i,u,p,d){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,t,u,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},_r.prototype.updatePaintArrays=function(e,t,i,u){for(var p=0,d=i;p<d.length;p+=1){var x=d[p];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,t,x,u)||this.needsUpload}},_r.prototype.get=function(e){return this.programConfigurations[e]},_r.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},_r.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},jt("ConstantBinder",Pr),jt("CrossFadedConstantBinder",jr),jt("SourceExpressionBinder",zr),jt("CrossFadedCompositeBinder",Or),jt("CompositeExpressionBinder",Tr),jt("ProgramConfiguration",wr,{omit:["_buffers"]}),jt("ProgramConfigurationSet",_r);var Qn=Math.pow(2,14)-1,Un=-Qn-1;function an(e){for(var t=8192/e.extent,i=e.loadGeometry(),u=0;u<i.length;u++)for(var p=i[u],d=0;d<p.length;d++){var x=p[d],S=Math.round(x.x*t),A=Math.round(x.y*t);x.x=_e(S,Un,Qn),x.y=_e(A,Un,Qn),(S<x.x||S>x.x+1||A<x.y||A>x.y+1)&&nt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function mn(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?an(e):[]}}function za(e,t,i,u,p){e.emplaceBack(2*t+(u+1)/2,2*i+(p+1)/2)}var aa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new gs,this.indexArray=new Go,this.segments=new $,this.programConfigurations=new _r(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Xo(e,t){for(var i=0;i<e.length;i++)if(bo(t,e[i]))return!0;for(var u=0;u<t.length;u++)if(bo(e,t[u]))return!0;return!!El(e,t)}function da(e,t,i){return!!bo(e,t)||!!Wo(t,e,i)}function co(e,t){if(e.length===1)return Sl(t,e[0]);for(var i=0;i<t.length;i++)for(var u=t[i],p=0;p<u.length;p++)if(bo(e,u[p]))return!0;for(var d=0;d<e.length;d++)if(Sl(t,e[d]))return!0;for(var x=0;x<t.length;x++)if(El(e,t[x]))return!0;return!1}function Ja(e,t,i){if(e.length>1){if(El(e,t))return!0;for(var u=0;u<t.length;u++)if(Wo(t[u],e,i))return!0}for(var p=0;p<e.length;p++)if(Wo(e[p],t,i))return!0;return!1}function El(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var u=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(Zs(u,p,t[d],t[d+1]))return!0;return!1}function Zs(e,t,i,u){return Qe(e,i,u)!==Qe(t,i,u)&&Qe(e,t,i)!==Qe(e,t,u)}function Wo(e,t,i){var u=i*i;if(t.length===1)return e.distSqr(t[0])<u;for(var p=1;p<t.length;p++)if(Gs(e,t[p-1],t[p])<u)return!0;return!1}function Gs(e,t,i){var u=t.distSqr(i);if(u===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/u;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function Sl(e,t){for(var i,u,p,d=!1,x=0;x<e.length;x++)for(var S=0,A=(i=e[x]).length-1;S<i.length;A=S++)(u=i[S]).y>t.y!=(p=i[A]).y>t.y&&t.x<(p.x-u.x)*(t.y-u.y)/(p.y-u.y)+u.x&&(d=!d);return d}function bo(e,t){for(var i=!1,u=0,p=e.length-1;u<e.length;p=u++){var d=e[u],x=e[p];d.y>t.y!=x.y>t.y&&t.x<(x.x-d.x)*(t.y-d.y)/(x.y-d.y)+d.x&&(i=!i)}return i}function kl(e,t,i){var u=i[0],p=i[2];if(e.x<u.x&&t.x<u.x||e.x>p.x&&t.x>p.x||e.y<u.y&&t.y<u.y||e.y>p.y&&t.y>p.y)return!1;var d=Qe(e,t,i[0]);return d!==Qe(e,t,i[1])||d!==Qe(e,t,i[2])||d!==Qe(e,t,i[3])}function xo(e,t,i){var u=t.paint.get(e).value;return u.kind==="constant"?u.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Mn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Po(e,t,i,u,p){if(!t[0]&&!t[1])return e;var d=z.convert(t)._mult(p);i==="viewport"&&d._rotate(-u);for(var x=[],S=0;S<e.length;S++)x.push(e[S].sub(d));return x}aa.prototype.populate=function(e,t,i){var u=this.layers[0],p=[],d=null;u.type==="circle"&&(d=u.layout.get("circle-sort-key"));for(var x=0,S=e;x<S.length;x+=1){var A=S[x],R=A.feature,N=A.id,V=A.index,Z=A.sourceLayerIndex,H=this.layers[0]._featureFilter.needGeometry,ne=mn(R,H);if(this.layers[0]._featureFilter.filter(new $r(this.zoom),ne,i)){var ae=d?d.evaluate(ne,{},i):void 0,ye={id:N,properties:R.properties,type:R.type,sourceLayerIndex:Z,index:V,geometry:H?ne.geometry:an(R),patterns:{},sortKey:ae};p.push(ye)}}d&&p.sort(function(Et,Qt){return Et.sortKey-Qt.sortKey});for(var ce=0,Ee=p;ce<Ee.length;ce+=1){var Pe=Ee[ce],Oe=Pe.geometry,Ne=Pe.index,Xe=Pe.sourceLayerIndex,ct=e[Ne].feature;this.addFeature(Pe,Oe,Ne,i),t.featureIndex.insert(ct,Oe,Ne,Xe,this.index)}},aa.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},aa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},aa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},aa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,J),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},aa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},aa.prototype.addFeature=function(e,t,i,u){for(var p=0,d=t;p<d.length;p+=1)for(var x=0,S=d[p];x<S.length;x+=1){var A=S[x],R=A.x,N=A.y;if(!(R<0||R>=8192||N<0||N>=8192)){var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),Z=V.vertexLength;za(this.layoutVertexArray,R,N,-1,-1),za(this.layoutVertexArray,R,N,1,-1),za(this.layoutVertexArray,R,N,1,1),za(this.layoutVertexArray,R,N,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),V.vertexLength+=4,V.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u)},jt("CircleBucket",aa,{omit:["layers"]});var Jo=new Xn({"circle-sort-key":new Zt(K.layout_circle["circle-sort-key"])}),vs={paint:new Xn({"circle-radius":new Zt(K.paint_circle["circle-radius"]),"circle-color":new Zt(K.paint_circle["circle-color"]),"circle-blur":new Zt(K.paint_circle["circle-blur"]),"circle-opacity":new Zt(K.paint_circle["circle-opacity"]),"circle-translate":new ir(K.paint_circle["circle-translate"]),"circle-translate-anchor":new ir(K.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ir(K.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ir(K.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Zt(K.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Zt(K.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Zt(K.paint_circle["circle-stroke-opacity"])}),layout:Jo},vi=typeof Float32Array<"u"?Float32Array:Array;function Oa(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ma(e,t,i){var u=t[0],p=t[1],d=t[2],x=t[3],S=t[4],A=t[5],R=t[6],N=t[7],V=t[8],Z=t[9],H=t[10],ne=t[11],ae=t[12],ye=t[13],ce=t[14],Ee=t[15],Pe=i[0],Oe=i[1],Ne=i[2],Xe=i[3];return e[0]=Pe*u+Oe*S+Ne*V+Xe*ae,e[1]=Pe*p+Oe*A+Ne*Z+Xe*ye,e[2]=Pe*d+Oe*R+Ne*H+Xe*ce,e[3]=Pe*x+Oe*N+Ne*ne+Xe*Ee,e[4]=(Pe=i[4])*u+(Oe=i[5])*S+(Ne=i[6])*V+(Xe=i[7])*ae,e[5]=Pe*p+Oe*A+Ne*Z+Xe*ye,e[6]=Pe*d+Oe*R+Ne*H+Xe*ce,e[7]=Pe*x+Oe*N+Ne*ne+Xe*Ee,e[8]=(Pe=i[8])*u+(Oe=i[9])*S+(Ne=i[10])*V+(Xe=i[11])*ae,e[9]=Pe*p+Oe*A+Ne*Z+Xe*ye,e[10]=Pe*d+Oe*R+Ne*H+Xe*ce,e[11]=Pe*x+Oe*N+Ne*ne+Xe*Ee,e[12]=(Pe=i[12])*u+(Oe=i[13])*S+(Ne=i[14])*V+(Xe=i[15])*ae,e[13]=Pe*p+Oe*A+Ne*Z+Xe*ye,e[14]=Pe*d+Oe*R+Ne*H+Xe*ce,e[15]=Pe*x+Oe*N+Ne*ne+Xe*Ee,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var bs,Wh=ma;function eu(e,t,i){var u=t[0],p=t[1],d=t[2],x=t[3];return e[0]=i[0]*u+i[4]*p+i[8]*d+i[12]*x,e[1]=i[1]*u+i[5]*p+i[9]*d+i[13]*x,e[2]=i[2]*u+i[6]*p+i[10]*d+i[14]*x,e[3]=i[3]*u+i[7]*p+i[11]*d+i[15]*x,e}bs=new vi(3),vi!=Float32Array&&(bs[0]=0,bs[1]=0,bs[2]=0),function(){var e=new vi(4);vi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Jh=(function(){var e=new vi(2);vi!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,vs)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new aa(i)},t.prototype.queryRadius=function(i){var u=i;return xo("circle-radius",this,u)+xo("circle-stroke-width",this,u)+Mn(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,u,p,d,x,S,A,R){for(var N=Po(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,A),V=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),Z=this.paint.get("circle-pitch-alignment")==="map",H=Z?N:function(ct,Et){return ct.map(function(Qt){return Il(Qt,Et)})}(N,R),ne=Z?V*A:V,ae=0,ye=d;ae<ye.length;ae+=1)for(var ce=0,Ee=ye[ae];ce<Ee.length;ce+=1){var Pe=Ee[ce],Oe=Z?Pe:Il(Pe,R),Ne=ne,Xe=eu([],[Pe.x,Pe.y,0,1],R);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=Xe[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=S.cameraToCenterDistance/Xe[3]),da(H,Oe,Ne))return!0}return!1},t}(_o));function Il(e,t){var i=eu([],[e.x,e.y,0,1],t);return new z(i[0]/i[3],i[1]/i[3])}var jc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(aa);function Ks(e,t,i,u){var p=t.width,d=t.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==p*d*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=u,e}function tu(e,t,i){var u=t.width,p=t.height;if(u!==e.width||p!==e.height){var d=Ks({},{width:u,height:p},i);Yh(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,p)},i),e.width=u,e.height=p,e.data=d.data}}function Yh(e,t,i,u,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||u.x>t.width-p.width||u.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=e.data,S=t.data,A=0;A<p.height;A++)for(var R=((i.y+A)*e.width+i.x)*d,N=((u.y+A)*t.width+u.x)*d,V=0;V<p.width*d;V++)S[N+V]=x[R+V];return t}jt("HeatmapBucket",jc,{omit:["layers"]});var Tl=function(e,t){Ks(this,e,1,t)};Tl.prototype.resize=function(e){tu(this,e,1)},Tl.prototype.clone=function(){return new Tl({width:this.width,height:this.height},new Uint8Array(this.data))},Tl.copy=function(e,t,i,u,p){Yh(e,t,i,u,p,1)};var Pa=function(e,t){Ks(this,e,4,t)};Pa.prototype.resize=function(e){tu(this,e,4)},Pa.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Pa.prototype.clone=function(){return new Pa({width:this.width,height:this.height},new Uint8Array(this.data))},Pa.copy=function(e,t,i,u,p){Yh(e,t,i,u,p,4)},jt("AlphaImage",Tl),jt("RGBAImage",Pa);var Iy={paint:new Xn({"heatmap-radius":new Zt(K.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Zt(K.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ir(K.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uo(K.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ir(K.paint_heatmap["heatmap-opacity"])})};function $p(e){var t={},i=e.resolution||256,u=e.clips?e.clips.length:1,p=e.image||new Pa({width:i,height:u}),d=function(ne,ae,ye){t[e.evaluationKey]=ye;var ce=e.expression.evaluate(t);p.data[ne+ae+0]=Math.floor(255*ce.r/ce.a),p.data[ne+ae+1]=Math.floor(255*ce.g/ce.a),p.data[ne+ae+2]=Math.floor(255*ce.b/ce.a),p.data[ne+ae+3]=Math.floor(255*ce.a)};if(e.clips)for(var x=0,S=0;x<u;++x,S+=4*i)for(var A=0,R=0;A<i;A++,R+=4){var N=A/(i-1),V=e.clips[x];d(S,R,V.start*(1-N)+V.end*N)}else for(var Z=0,H=0;Z<i;Z++,H+=4)d(0,H,Z/(i-1));return p}var Ty=function(e){function t(i){e.call(this,i,Iy),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new jc(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=$p({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(_o),Ay={paint:new Xn({"hillshade-illumination-direction":new ir(K.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ir(K.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ir(K.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ir(K.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ir(K.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ir(K.paint_hillshade["hillshade-accent-color"])})},zy=function(e){function t(i){e.call(this,i,Ay)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(_o),Py=Vn([{name:"a_pos",components:2,type:"Int16"}],4).members,Qh=qc,Cy=qc;function qc(e,t,i){i=i||2;var u,p,d,x,S,A,R,N=t&&t.length,V=N?t[0]*i:e.length,Z=ef(e,0,V,i,!0),H=[];if(!Z||Z.next===Z.prev)return H;if(N&&(Z=function(ae,ye,ce,Ee){var Pe,Oe,Ne,Xe=[];for(Pe=0,Oe=ye.length;Pe<Oe;Pe++)(Ne=ef(ae,ye[Pe]*Ee,Pe<Oe-1?ye[Pe+1]*Ee:ae.length,Ee,!1))===Ne.next&&(Ne.steiner=!0),Xe.push(Ny(Ne));for(Xe.sort(By),Pe=0;Pe<Xe.length;Pe++)Oy(Xe[Pe],ce),ce=Hs(ce,ce.next);return ce}(e,t,Z,i)),e.length>80*i){u=d=e[0],p=x=e[1];for(var ne=i;ne<V;ne+=i)(S=e[ne])<u&&(u=S),(A=e[ne+1])<p&&(p=A),S>d&&(d=S),A>x&&(x=A);R=(R=Math.max(d-u,x-p))!==0?1/R:0}return Ju(Z,H,i,u,p,R),H}function ef(e,t,i,u,p){var d,x;if(p===tp(e,t,i,u)>0)for(d=t;d<i;d+=u)x=nf(d,e[d],e[d+1],x);else for(d=i-u;d>=t;d-=u)x=nf(d,e[d],e[d+1],x);return x&&Zc(x,x.next)&&(Qu(x),x=x.next),x}function Hs(e,t){if(!e)return e;t||(t=e);var i,u=e;do if(i=!1,u.steiner||!Zc(u,u.next)&&In(u.prev,u,u.next)!==0)u=u.next;else{if(Qu(u),(u=t=u.prev)===u.next)break;i=!0}while(i||u!==t);return t}function Ju(e,t,i,u,p,d,x){if(e){!x&&d&&function(N,V,Z,H){var ne=N;do ne.z===null&&(ne.z=$h(ne.x,ne.y,V,Z,H)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==N);ne.prevZ.nextZ=null,ne.prevZ=null,function(ae){var ye,ce,Ee,Pe,Oe,Ne,Xe,ct,Et=1;do{for(ce=ae,ae=null,Oe=null,Ne=0;ce;){for(Ne++,Ee=ce,Xe=0,ye=0;ye<Et&&(Xe++,Ee=Ee.nextZ);ye++);for(ct=Et;Xe>0||ct>0&&Ee;)Xe!==0&&(ct===0||!Ee||ce.z<=Ee.z)?(Pe=ce,ce=ce.nextZ,Xe--):(Pe=Ee,Ee=Ee.nextZ,ct--),Oe?Oe.nextZ=Pe:ae=Pe,Pe.prevZ=Oe,Oe=Pe;ce=Ee}Oe.nextZ=null,Et*=2}while(Ne>1)}(ne)}(e,u,p,d);for(var S,A,R=e;e.prev!==e.next;)if(S=e.prev,A=e.next,d?Dy(e,u,p,d):My(e))t.push(S.i/i),t.push(e.i/i),t.push(A.i/i),Qu(e),e=A.next,R=A.next;else if((e=A)===R){x?x===1?Ju(e=Ly(Hs(e),t,i),t,i,u,p,d,2):x===2&&Ry(e,t,i,u,p,d):Ju(Hs(e),t,i,u,p,d,1);break}}}function My(e){var t=e.prev,i=e,u=e.next;if(In(t,i,u)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(ru(t.x,t.y,i.x,i.y,u.x,u.y,p.x,p.y)&&In(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Dy(e,t,i,u){var p=e.prev,d=e,x=e.next;if(In(p,d,x)>=0)return!1;for(var S=p.x>d.x?p.x>x.x?p.x:x.x:d.x>x.x?d.x:x.x,A=p.y>d.y?p.y>x.y?p.y:x.y:d.y>x.y?d.y:x.y,R=$h(p.x<d.x?p.x<x.x?p.x:x.x:d.x<x.x?d.x:x.x,p.y<d.y?p.y<x.y?p.y:x.y:d.y<x.y?d.y:x.y,t,i,u),N=$h(S,A,t,i,u),V=e.prevZ,Z=e.nextZ;V&&V.z>=R&&Z&&Z.z<=N;){if(V!==e.prev&&V!==e.next&&ru(p.x,p.y,d.x,d.y,x.x,x.y,V.x,V.y)&&In(V.prev,V,V.next)>=0||(V=V.prevZ,Z!==e.prev&&Z!==e.next&&ru(p.x,p.y,d.x,d.y,x.x,x.y,Z.x,Z.y)&&In(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;V&&V.z>=R;){if(V!==e.prev&&V!==e.next&&ru(p.x,p.y,d.x,d.y,x.x,x.y,V.x,V.y)&&In(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;Z&&Z.z<=N;){if(Z!==e.prev&&Z!==e.next&&ru(p.x,p.y,d.x,d.y,x.x,x.y,Z.x,Z.y)&&In(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function Ly(e,t,i){var u=e;do{var p=u.prev,d=u.next.next;!Zc(p,d)&&tf(p,u,u.next,d)&&Yu(p,d)&&Yu(d,p)&&(t.push(p.i/i),t.push(u.i/i),t.push(d.i/i),Qu(u),Qu(u.next),u=e=d),u=u.next}while(u!==e);return Hs(u)}function Ry(e,t,i,u,p,d){var x=e;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&Vy(x,S)){var A=rf(x,S);return x=Hs(x,x.next),A=Hs(A,A.next),Ju(x,t,i,u,p,d),void Ju(A,t,i,u,p,d)}S=S.next}x=x.next}while(x!==e)}function By(e,t){return e.x-t.x}function Oy(e,t){if(t=function(u,p){var d,x=p,S=u.x,A=u.y,R=-1/0;do{if(A<=x.y&&A>=x.next.y&&x.next.y!==x.y){var N=x.x+(A-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(N<=S&&N>R){if(R=N,N===S){if(A===x.y)return x;if(A===x.next.y)return x.next}d=x.x<x.next.x?x:x.next}}x=x.next}while(x!==p);if(!d)return null;if(S===R)return d;var V,Z=d,H=d.x,ne=d.y,ae=1/0;x=d;do S>=x.x&&x.x>=H&&S!==x.x&&ru(A<ne?S:R,A,H,ne,A<ne?R:S,A,x.x,x.y)&&(V=Math.abs(A-x.y)/(S-x.x),Yu(x,u)&&(V<ae||V===ae&&(x.x>d.x||x.x===d.x&&Fy(d,x)))&&(d=x,ae=V)),x=x.next;while(x!==Z);return d}(e,t)){var i=rf(t,e);Hs(t,t.next),Hs(i,i.next)}}function Fy(e,t){return In(e.prev,e,t.prev)<0&&In(t.next,e,e.next)<0}function $h(e,t,i,u,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ny(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function ru(e,t,i,u,p,d,x,S){return(p-x)*(t-S)-(e-x)*(d-S)>=0&&(e-x)*(u-S)-(i-x)*(t-S)>=0&&(i-x)*(d-S)-(p-x)*(u-S)>=0}function Vy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,u){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==u.i&&p.next.i!==u.i&&tf(p,p.next,i,u))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(Yu(e,t)&&Yu(t,e)&&function(i,u){var p=i,d=!1,x=(i.x+u.x)/2,S=(i.y+u.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&x<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(In(e.prev,e,t.prev)||In(e,t.prev,t))||Zc(e,t)&&In(e.prev,e,e.next)>0&&In(t.prev,t,t.next)>0)}function In(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Zc(e,t){return e.x===t.x&&e.y===t.y}function tf(e,t,i,u){var p=Kc(In(e,t,i)),d=Kc(In(e,t,u)),x=Kc(In(i,u,e)),S=Kc(In(i,u,t));return p!==d&&x!==S||!(p!==0||!Gc(e,i,t))||!(d!==0||!Gc(e,u,t))||!(x!==0||!Gc(i,e,u))||!(S!==0||!Gc(i,t,u))}function Gc(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Kc(e){return e>0?1:e<0?-1:0}function Yu(e,t){return In(e.prev,e,e.next)<0?In(e,t,e.next)>=0&&In(e,e.prev,t)>=0:In(e,t,e.prev)<0||In(e,e.next,t)<0}function rf(e,t){var i=new ep(e.i,e.x,e.y),u=new ep(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,u.next=i,i.prev=u,d.next=u,u.prev=d,u}function nf(e,t,i,u){var p=new ep(e,t,i);return u?(p.next=u.next,p.prev=u,u.next.prev=p,u.next=p):(p.prev=p,p.next=p),p}function Qu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ep(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tp(e,t,i,u){for(var p=0,d=t,x=i-u;d<i;d+=u)p+=(e[x]-e[d])*(e[d+1]+e[x+1]),x=d;return p}function Uy(e,t,i,u,p){(function d(x,S,A,R,N){for(;R>A;){if(R-A>600){var V=R-A+1,Z=S-A+1,H=Math.log(V),ne=.5*Math.exp(2*H/3),ae=.5*Math.sqrt(H*ne*(V-ne)/V)*(Z-V/2<0?-1:1);d(x,S,Math.max(A,Math.floor(S-Z*ne/V+ae)),Math.min(R,Math.floor(S+(V-Z)*ne/V+ae)),N)}var ye=x[S],ce=A,Ee=R;for($u(x,A,S),N(x[R],ye)>0&&$u(x,A,R);ce<Ee;){for($u(x,ce,Ee),ce++,Ee--;N(x[ce],ye)<0;)ce++;for(;N(x[Ee],ye)>0;)Ee--}N(x[A],ye)===0?$u(x,A,Ee):$u(x,++Ee,R),Ee<=S&&(A=Ee+1),S<=Ee&&(R=Ee-1)}})(e,t,i||0,u||e.length-1,p||jy)}function $u(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}function jy(e,t){return e<t?-1:e>t?1:0}function rp(e,t){var i=e.length;if(i<=1)return[e];for(var u,p,d=[],x=0;x<i;x++){var S=De(e[x]);S!==0&&(e[x].area=Math.abs(S),p===void 0&&(p=S<0),p===S<0?(u&&d.push(u),u=[e[x]]):u.push(e[x]))}if(u&&d.push(u),t>1)for(var A=0;A<d.length;A++)d[A].length<=t||(Uy(d[A],t,1,d[A].length-1,qy),d[A]=d[A].slice(0,t));return d}function qy(e,t){return t.area-e.area}function ip(e,t,i){for(var u=i.patternDependencies,p=!1,d=0,x=t;d<x.length;d+=1){var S=x[d].paint.get(e+"-pattern");S.isConstant()||(p=!0);var A=S.constantOr(null);A&&(p=!0,u[A.to]=!0,u[A.from]=!0)}return p}function np(e,t,i,u,p){for(var d=p.patternDependencies,x=0,S=t;x<S.length;x+=1){var A=S[x],R=A.paint.get(e+"-pattern").value;if(R.kind!=="constant"){var N=R.evaluate({zoom:u-1},i,{},p.availableImages),V=R.evaluate({zoom:u},i,{},p.availableImages),Z=R.evaluate({zoom:u+1},i,{},p.availableImages);V=V&&V.name?V.name:V,Z=Z&&Z.name?Z.name:Z,d[N=N&&N.name?N.name:N]=!0,d[V]=!0,d[Z]=!0,i.patterns[A.id]={min:N,mid:V,max:Z}}}return i}qc.deviation=function(e,t,i,u){var p=t&&t.length,d=Math.abs(tp(e,0,p?t[0]*i:e.length,i));if(p)for(var x=0,S=t.length;x<S;x++)d-=Math.abs(tp(e,t[x]*i,x<S-1?t[x+1]*i:e.length,i));var A=0;for(x=0;x<u.length;x+=3){var R=u[x]*i,N=u[x+1]*i,V=u[x+2]*i;A+=Math.abs((e[R]-e[V])*(e[N+1]-e[R+1])-(e[R]-e[N])*(e[V+1]-e[R+1]))}return d===0&&A===0?0:Math.abs((A-d)/d)},qc.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},u=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var x=0;x<t;x++)i.vertices.push(e[p][d][x]);p>0&&i.holes.push(u+=e[p-1].length)}return i},Qh.default=Cy;var Co=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gs,this.indexArray=new Go,this.indexArray2=new wl,this.programConfigurations=new _r(e.layers,e.zoom),this.segments=new $,this.segments2=new $,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Co.prototype.populate=function(e,t,i){this.hasPattern=ip("fill",this.layers,t);for(var u=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var S=x[d],A=S.feature,R=S.id,N=S.index,V=S.sourceLayerIndex,Z=this.layers[0]._featureFilter.needGeometry,H=mn(A,Z);if(this.layers[0]._featureFilter.filter(new $r(this.zoom),H,i)){var ne=u?u.evaluate(H,{},i,t.availableImages):void 0,ae={id:R,properties:A.properties,type:A.type,sourceLayerIndex:V,index:N,geometry:Z?H.geometry:an(A),patterns:{},sortKey:ne};p.push(ae)}}u&&p.sort(function(ct,Et){return ct.sortKey-Et.sortKey});for(var ye=0,ce=p;ye<ce.length;ye+=1){var Ee=ce[ye],Pe=Ee.geometry,Oe=Ee.index,Ne=Ee.sourceLayerIndex;if(this.hasPattern){var Xe=np("fill",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Xe)}else this.addFeature(Ee,Pe,Oe,i,{});t.featureIndex.insert(e[Oe].feature,Pe,Oe,Ne,this.index)}},Co.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Co.prototype.addFeatures=function(e,t,i){for(var u=0,p=this.patternFeatures;u<p.length;u+=1){var d=p[u];this.addFeature(d,d.geometry,d.index,t,i)}},Co.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Co.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Co.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Py),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Co.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Co.prototype.addFeature=function(e,t,i,u,p){for(var d=0,x=rp(t,500);d<x.length;d+=1){for(var S=x[d],A=0,R=0,N=S;R<N.length;R+=1)A+=N[R].length;for(var V=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),Z=V.vertexLength,H=[],ne=[],ae=0,ye=S;ae<ye.length;ae+=1){var ce=ye[ae];if(ce.length!==0){ce!==S[0]&&ne.push(H.length/2);var Ee=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),Pe=Ee.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(Pe+ce.length-1,Pe),H.push(ce[0].x),H.push(ce[0].y);for(var Oe=1;Oe<ce.length;Oe++)this.layoutVertexArray.emplaceBack(ce[Oe].x,ce[Oe].y),this.indexArray2.emplaceBack(Pe+Oe-1,Pe+Oe),H.push(ce[Oe].x),H.push(ce[Oe].y);Ee.vertexLength+=ce.length,Ee.primitiveLength+=ce.length}}for(var Ne=Qh(H,ne),Xe=0;Xe<Ne.length;Xe+=3)this.indexArray.emplaceBack(Z+Ne[Xe],Z+Ne[Xe+1],Z+Ne[Xe+2]);V.vertexLength+=A,V.primitiveLength+=Ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,u)},jt("FillBucket",Co,{omit:["layers","patternFeatures"]});var Zy=new Xn({"fill-sort-key":new Zt(K.layout_fill["fill-sort-key"])}),Gy={paint:new Xn({"fill-antialias":new ir(K.paint_fill["fill-antialias"]),"fill-opacity":new Zt(K.paint_fill["fill-opacity"]),"fill-color":new Zt(K.paint_fill["fill-color"]),"fill-outline-color":new Zt(K.paint_fill["fill-outline-color"]),"fill-translate":new ir(K.paint_fill["fill-translate"]),"fill-translate-anchor":new ir(K.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wl(K.paint_fill["fill-pattern"])}),layout:Zy},Ky=function(e){function t(i){e.call(this,i,Gy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Co(i)},t.prototype.queryRadius=function(){return Mn(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,u,p,d,x,S,A){return co(Po(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,A),d)},t.prototype.isTileClipped=function(){return!0},t}(_o),Hy=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,af=iu;function iu(e,t,i,u,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=p,e.readFields(Xy,this,t)}function Xy(e,t,i){e==1?t.id=i.readVarint():e==2?function(u,p){for(var d=u.readVarint()+u.pos;u.pos<d;){var x=p._keys[u.readVarint()],S=p._values[u.readVarint()];p.properties[x]=S}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function Wy(e){for(var t,i,u=0,p=0,d=e.length,x=d-1;p<d;x=p++)u+=((i=e[x]).x-(t=e[p]).x)*(t.y+i.y);return u}iu.types=["Unknown","Point","LineString","Polygon"],iu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,u=1,p=0,d=0,x=0,S=[];e.pos<i;){if(p<=0){var A=e.readVarint();u=7&A,p=A>>3}if(p--,u===1||u===2)d+=e.readSVarint(),x+=e.readSVarint(),u===1&&(t&&S.push(t),t=[]),t.push(new z(d,x));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&S.push(t),S},iu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,u=0,p=0,d=0,x=1/0,S=-1/0,A=1/0,R=-1/0;e.pos<t;){if(u<=0){var N=e.readVarint();i=7&N,u=N>>3}if(u--,i===1||i===2)(p+=e.readSVarint())<x&&(x=p),p>S&&(S=p),(d+=e.readSVarint())<A&&(A=d),d>R&&(R=d);else if(i!==7)throw new Error("unknown command "+i)}return[x,A,S,R]},iu.prototype.toGeoJSON=function(e,t,i){var u,p,d=this.extent*Math.pow(2,i),x=this.extent*e,S=this.extent*t,A=this.loadGeometry(),R=iu.types[this.type];function N(H){for(var ne=0;ne<H.length;ne++){var ae=H[ne];H[ne]=[360*(ae.x+x)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(ae.y+S)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(u=0;u<A.length;u++)V[u]=A[u][0];N(A=V);break;case 2:for(u=0;u<A.length;u++)N(A[u]);break;case 3:for(A=function(H){var ne=H.length;if(ne<=1)return[H];for(var ae,ye,ce=[],Ee=0;Ee<ne;Ee++){var Pe=Wy(H[Ee]);Pe!==0&&(ye===void 0&&(ye=Pe<0),ye===Pe<0?(ae&&ce.push(ae),ae=[H[Ee]]):ae.push(H[Ee]))}return ae&&ce.push(ae),ce}(A),u=0;u<A.length;u++)for(p=0;p<A[u].length;p++)N(A[u][p])}A.length===1?A=A[0]:R="Multi"+R;var Z={type:"Feature",geometry:{type:R,coordinates:A},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var of=sf;function sf(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Jy,this,t),this.length=this._features.length}function Jy(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(u){for(var p=null,d=u.readVarint()+u.pos;u.pos<d;){var x=u.readVarint()>>3;p=x===1?u.readString():x===2?u.readFloat():x===3?u.readDouble():x===4?u.readVarint64():x===5?u.readVarint():x===6?u.readSVarint():x===7?u.readBoolean():null}return p}(i))}function Yy(e,t,i){if(e===3){var u=new of(i,i.readVarint()+i.pos);u.length&&(t[u.name]=u)}}sf.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new af(this._pbf,t,this.extent,this._keys,this._values)};var nu={VectorTile:function(e,t){this.layers=e.readFields(Yy,{},t)},VectorTileFeature:af,VectorTileLayer:of},Qy=nu.VectorTileFeature.types,ap=Math.pow(2,13);function ec(e,t,i,u,p,d,x,S){e.emplaceBack(t,i,2*Math.floor(u*ap)+x,p*ap*2,d*ap*2,Math.round(S))}var Mo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new zo,this.indexArray=new Go,this.programConfigurations=new _r(e.layers,e.zoom),this.segments=new $,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function $y(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Mo.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=ip("fill-extrusion",this.layers,t);for(var u=0,p=e;u<p.length;u+=1){var d=p[u],x=d.feature,S=d.id,A=d.index,R=d.sourceLayerIndex,N=this.layers[0]._featureFilter.needGeometry,V=mn(x,N);if(this.layers[0]._featureFilter.filter(new $r(this.zoom),V,i)){var Z={id:S,sourceLayerIndex:R,index:A,geometry:N?V.geometry:an(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(np("fill-extrusion",this.layers,Z,this.zoom,t)):this.addFeature(Z,Z.geometry,A,i,{}),t.featureIndex.insert(x,Z.geometry,A,R,this.index,!0)}}},Mo.prototype.addFeatures=function(e,t,i){for(var u=0,p=this.features;u<p.length;u+=1){var d=p[u];this.addFeature(d,d.geometry,d.index,t,i)}},Mo.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Mo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Mo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hy),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Mo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mo.prototype.addFeature=function(e,t,i,u,p){for(var d=0,x=rp(t,500);d<x.length;d+=1){for(var S=x[d],A=0,R=0,N=S;R<N.length;R+=1)A+=N[R].length;for(var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Z=0,H=S;Z<H.length;Z+=1){var ne=H[Z];if(ne.length!==0&&!((Qr=ne).every(function(Lr){return Lr.x<0})||Qr.every(function(Lr){return Lr.x>8192})||Qr.every(function(Lr){return Lr.y<0})||Qr.every(function(Lr){return Lr.y>8192})))for(var ae=0,ye=0;ye<ne.length;ye++){var ce=ne[ye];if(ye>=1){var Ee=ne[ye-1];if(!$y(ce,Ee)){V.vertexLength+4>$.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Pe=ce.sub(Ee)._perp()._unit(),Oe=Ee.dist(ce);ae+Oe>32768&&(ae=0),ec(this.layoutVertexArray,ce.x,ce.y,Pe.x,Pe.y,0,0,ae),ec(this.layoutVertexArray,ce.x,ce.y,Pe.x,Pe.y,0,1,ae),ec(this.layoutVertexArray,Ee.x,Ee.y,Pe.x,Pe.y,0,0,ae+=Oe),ec(this.layoutVertexArray,Ee.x,Ee.y,Pe.x,Pe.y,0,1,ae);var Ne=V.vertexLength;this.indexArray.emplaceBack(Ne,Ne+2,Ne+1),this.indexArray.emplaceBack(Ne+1,Ne+2,Ne+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+A>$.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),Qy[e.type]==="Polygon"){for(var Xe=[],ct=[],Et=V.vertexLength,Qt=0,Pt=S;Qt<Pt.length;Qt+=1){var ar=Pt[Qt];if(ar.length!==0){ar!==S[0]&&ct.push(Xe.length/2);for(var Dt=0;Dt<ar.length;Dt++){var Zr=ar[Dt];ec(this.layoutVertexArray,Zr.x,Zr.y,0,0,1,1,0),Xe.push(Zr.x),Xe.push(Zr.y)}}}for(var br=Qh(Xe,ct),Gt=0;Gt<br.length;Gt+=3)this.indexArray.emplaceBack(Et+br[Gt],Et+br[Gt+2],Et+br[Gt+1]);V.primitiveLength+=br.length/3,V.vertexLength+=A}}var Qr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,u)},jt("FillExtrusionBucket",Mo,{omit:["layers","features"]});var eg={paint:new Xn({"fill-extrusion-opacity":new ir(K["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Zt(K["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ir(K["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ir(K["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wl(K["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Zt(K["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Zt(K["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ir(K["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},tg=function(e){function t(i){e.call(this,i,eg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Mo(i)},t.prototype.queryRadius=function(){return Mn(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,u,p,d,x,S,A,R){var N=Po(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,A),V=this.paint.get("fill-extrusion-height").evaluate(u,p),Z=this.paint.get("fill-extrusion-base").evaluate(u,p),H=function(ae,ye,ce,Ee){for(var Pe=[],Oe=0,Ne=ae;Oe<Ne.length;Oe+=1){var Xe=Ne[Oe],ct=[Xe.x,Xe.y,0,1];eu(ct,ct,ye),Pe.push(new z(ct[0]/ct[3],ct[1]/ct[3]))}return Pe}(N,R),ne=function(ae,ye,ce,Ee){for(var Pe=[],Oe=[],Ne=Ee[8]*ye,Xe=Ee[9]*ye,ct=Ee[10]*ye,Et=Ee[11]*ye,Qt=Ee[8]*ce,Pt=Ee[9]*ce,ar=Ee[10]*ce,Dt=Ee[11]*ce,Zr=0,br=ae;Zr<br.length;Zr+=1){for(var Gt=[],Qr=[],Lr=0,oi=br[Zr];Lr<oi.length;Lr+=1){var or=oi[Lr],mi=or.x,en=or.y,ln=Ee[0]*mi+Ee[4]*en+Ee[12],on=Ee[1]*mi+Ee[5]*en+Ee[13],tn=Ee[2]*mi+Ee[6]*en+Ee[14],un=Ee[3]*mi+Ee[7]*en+Ee[15],Dn=tn+ct,Ln=un+Et,sa=ln+Qt,qn=on+Pt,la=tn+ar,yn=un+Dt,Zn=new z((ln+Ne)/Ln,(on+Xe)/Ln);Zn.z=Dn/Ln,Gt.push(Zn);var ti=new z(sa/yn,qn/yn);ti.z=la/yn,Qr.push(ti)}Pe.push(Gt),Oe.push(Qr)}return[Pe,Oe]}(d,Z,V,R);return function(ae,ye,ce){var Ee=1/0;co(ce,ye)&&(Ee=lf(ce,ye[0]));for(var Pe=0;Pe<ye.length;Pe++)for(var Oe=ye[Pe],Ne=ae[Pe],Xe=0;Xe<Oe.length-1;Xe++){var ct=Oe[Xe],Et=[ct,Oe[Xe+1],Ne[Xe+1],Ne[Xe],ct];Xo(ce,Et)&&(Ee=Math.min(Ee,lf(ce,Et)))}return Ee!==1/0&&Ee}(ne[0],ne[1],H)},t}(_o);function tc(e,t){return e.x*t.x+e.y*t.y}function lf(e,t){if(e.length===1){for(var i,u=0,p=t[u++];!i||p.equals(i);)if(!(i=t[u++]))return 1/0;for(;u<t.length;u++){var d=t[u],x=e[0],S=i.sub(p),A=d.sub(p),R=x.sub(p),N=tc(S,S),V=tc(S,A),Z=tc(A,A),H=tc(R,S),ne=tc(R,A),ae=N*Z-V*V,ye=(Z*H-V*ne)/ae,ce=(N*ne-V*H)/ae,Ee=p.z*(1-ye-ce)+i.z*ye+d.z*ce;if(isFinite(Ee))return Ee}return 1/0}for(var Pe=1/0,Oe=0,Ne=t;Oe<Ne.length;Oe+=1)Pe=Math.min(Pe,Ne[Oe].z);return Pe}var rg=Vn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ig=Vn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,ng=nu.VectorTileFeature.types,ag=Math.cos(Math.PI/180*37.5),uf=Math.pow(2,14)/.5,ya=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new Aa,this.layoutVertexArray2=new Us,this.indexArray=new Go,this.programConfigurations=new _r(e.layers,e.zoom),this.segments=new $,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};ya.prototype.populate=function(e,t,i){this.hasPattern=ip("line",this.layers,t);for(var u=this.layers[0].layout.get("line-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var S=x[d],A=S.feature,R=S.id,N=S.index,V=S.sourceLayerIndex,Z=this.layers[0]._featureFilter.needGeometry,H=mn(A,Z);if(this.layers[0]._featureFilter.filter(new $r(this.zoom),H,i)){var ne=u?u.evaluate(H,{},i):void 0,ae={id:R,properties:A.properties,type:A.type,sourceLayerIndex:V,index:N,geometry:Z?H.geometry:an(A),patterns:{},sortKey:ne};p.push(ae)}}u&&p.sort(function(ct,Et){return ct.sortKey-Et.sortKey});for(var ye=0,ce=p;ye<ce.length;ye+=1){var Ee=ce[ye],Pe=Ee.geometry,Oe=Ee.index,Ne=Ee.sourceLayerIndex;if(this.hasPattern){var Xe=np("line",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Xe)}else this.addFeature(Ee,Pe,Oe,i,{});t.featureIndex.insert(e[Oe].feature,Pe,Oe,Ne,this.index)}},ya.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ya.prototype.addFeatures=function(e,t,i){for(var u=0,p=this.patternFeatures;u<p.length;u+=1){var d=p[u];this.addFeature(d,d.geometry,d.index,t,i)}},ya.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ya.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ya.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ig)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ya.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ya.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},ya.prototype.addFeature=function(e,t,i,u,p){var d=this.layers[0].layout,x=d.get("line-join").evaluate(e,{}),S=d.get("line-cap"),A=d.get("line-miter-limit"),R=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var N=0,V=t;N<V.length;N+=1)this.addLine(V[N],e,x,S,A,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,u)},ya.prototype.addLine=function(e,t,i,u,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<e.length-1;x++)this.totalDistance+=e[x].dist(e[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=ng[t.type]==="Polygon",A=e.length;A>=2&&e[A-1].equals(e[A-2]);)A--;for(var R=0;R<A-1&&e[R].equals(e[R+1]);)R++;if(!(A<(S?3:2))){i==="bevel"&&(p=1.05);var N,V=this.overscaling<=16?122880/(512*this.overscaling):0,Z=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),H=void 0,ne=void 0,ae=void 0,ye=void 0;this.e1=this.e2=-1,S&&(ye=e[R].sub(N=e[A-2])._unit()._perp());for(var ce=R;ce<A;ce++)if(!(ne=ce===A-1?S?e[R+1]:void 0:e[ce+1])||!e[ce].equals(ne)){ye&&(ae=ye),N&&(H=N),N=e[ce],ye=ne?ne.sub(N)._unit()._perp():ae;var Ee=(ae=ae||ye).add(ye);Ee.x===0&&Ee.y===0||Ee._unit();var Pe=ae.x*ye.x+ae.y*ye.y,Oe=Ee.x*ye.x+Ee.y*ye.y,Ne=Oe!==0?1/Oe:1/0,Xe=2*Math.sqrt(2-2*Oe),ct=Oe<ag&&H&&ne,Et=ae.x*ye.y-ae.y*ye.x>0;if(ct&&ce>R){var Qt=N.dist(H);if(Qt>2*V){var Pt=N.sub(N.sub(H)._mult(V/Qt)._round());this.updateDistance(H,Pt),this.addCurrentVertex(Pt,ae,0,0,Z),H=Pt}}var ar=H&&ne,Dt=ar?i:S?"butt":u;if(ar&&Dt==="round"&&(Ne<d?Dt="miter":Ne<=2&&(Dt="fakeround")),Dt==="miter"&&Ne>p&&(Dt="bevel"),Dt==="bevel"&&(Ne>2&&(Dt="flipbevel"),Ne<p&&(Dt="miter")),H&&this.updateDistance(H,N),Dt==="miter")Ee._mult(Ne),this.addCurrentVertex(N,Ee,0,0,Z);else if(Dt==="flipbevel"){if(Ne>100)Ee=ye.mult(-1);else{var Zr=Ne*ae.add(ye).mag()/ae.sub(ye).mag();Ee._perp()._mult(Zr*(Et?-1:1))}this.addCurrentVertex(N,Ee,0,0,Z),this.addCurrentVertex(N,Ee.mult(-1),0,0,Z)}else if(Dt==="bevel"||Dt==="fakeround"){var br=-Math.sqrt(Ne*Ne-1),Gt=Et?br:0,Qr=Et?0:br;if(H&&this.addCurrentVertex(N,ae,Gt,Qr,Z),Dt==="fakeround")for(var Lr=Math.round(180*Xe/Math.PI/20),oi=1;oi<Lr;oi++){var or=oi/Lr;if(or!==.5){var mi=or-.5;or+=or*mi*(or-1)*((1.0904+Pe*(Pe*(3.55645-1.43519*Pe)-3.2452))*mi*mi+(.848013+Pe*(.215638*Pe-1.06021)))}var en=ye.sub(ae)._mult(or)._add(ae)._unit()._mult(Et?-1:1);this.addHalfVertex(N,en.x,en.y,!1,Et,0,Z)}ne&&this.addCurrentVertex(N,ye,-Gt,-Qr,Z)}else if(Dt==="butt")this.addCurrentVertex(N,Ee,0,0,Z);else if(Dt==="square"){var ln=H?1:-1;this.addCurrentVertex(N,Ee,ln,ln,Z)}else Dt==="round"&&(H&&(this.addCurrentVertex(N,ae,0,0,Z),this.addCurrentVertex(N,ae,1,1,Z,!0)),ne&&(this.addCurrentVertex(N,ye,-1,-1,Z,!0),this.addCurrentVertex(N,ye,0,0,Z)));if(ct&&ce<A-1){var on=N.dist(ne);if(on>2*V){var tn=N.add(ne.sub(N)._mult(V/on)._round());this.updateDistance(N,tn),this.addCurrentVertex(tn,ye,0,0,Z),N=tn}}}}},ya.prototype.addCurrentVertex=function(e,t,i,u,p,d){d===void 0&&(d=!1);var x=t.y*u-t.x,S=-t.y-t.x*u;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,x,S,d,!0,-u,p),this.distance>uf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,u,p,d))},ya.prototype.addHalfVertex=function(e,t,i,u,p,d,x){var S=.5*(this.lineClips?this.scaledDistance*(uf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var A=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),x.primitiveLength++),p?this.e2=A:this.e1=A},ya.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ya.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},jt("LineBucket",ya,{omit:["layers","patternFeatures"]});var og=new Xn({"line-cap":new ir(K.layout_line["line-cap"]),"line-join":new Zt(K.layout_line["line-join"]),"line-miter-limit":new ir(K.layout_line["line-miter-limit"]),"line-round-limit":new ir(K.layout_line["line-round-limit"]),"line-sort-key":new Zt(K.layout_line["line-sort-key"])}),cf={paint:new Xn({"line-opacity":new Zt(K.paint_line["line-opacity"]),"line-color":new Zt(K.paint_line["line-color"]),"line-translate":new ir(K.paint_line["line-translate"]),"line-translate-anchor":new ir(K.paint_line["line-translate-anchor"]),"line-width":new Zt(K.paint_line["line-width"]),"line-gap-width":new Zt(K.paint_line["line-gap-width"]),"line-offset":new Zt(K.paint_line["line-offset"]),"line-blur":new Zt(K.paint_line["line-blur"]),"line-dasharray":new na(K.paint_line["line-dasharray"]),"line-pattern":new Wl(K.paint_line["line-pattern"]),"line-gradient":new uo(K.paint_line["line-gradient"])}),layout:og},hf=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u){return u=new $r(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,i,u)},t.prototype.evaluate=function(i,u,p,d){return u=Ce({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,i,u,p,d)},t}(Zt))(cf.paint.properties["line-width"].specification);hf.useIntegerZoom=!0;var sg=function(e){function t(i){e.call(this,i,cf),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fn,this.gradientVersion=(this.gradientVersion+1)%q)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u),this.paint._values["line-floorwidth"]=hf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new ya(i)},t.prototype.queryRadius=function(i){var u=i,p=pf(xo("line-width",this,u),xo("line-gap-width",this,u)),d=xo("line-offset",this,u);return p/2+Math.abs(d)+Mn(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,u,p,d,x,S,A){var R=Po(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,A),N=A/2*pf(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),V=this.paint.get("line-offset").evaluate(u,p);return V&&(d=function(Z,H){for(var ne=[],ae=new z(0,0),ye=0;ye<Z.length;ye++){for(var ce=Z[ye],Ee=[],Pe=0;Pe<ce.length;Pe++){var Oe=ce[Pe],Ne=ce[Pe+1],Xe=Pe===0?ae:Oe.sub(ce[Pe-1])._unit()._perp(),ct=Pe===ce.length-1?ae:Ne.sub(Oe)._unit()._perp(),Et=Xe._add(ct)._unit();Et._mult(1/(Et.x*ct.x+Et.y*ct.y)),Ee.push(Et._mult(H)._add(Oe))}ne.push(Ee)}return ne}(d,V*A)),function(Z,H,ne){for(var ae=0;ae<H.length;ae++){var ye=H[ae];if(Z.length>=3){for(var ce=0;ce<ye.length;ce++)if(bo(Z,ye[ce]))return!0}if(Ja(Z,ye,ne))return!0}return!1}(R,d,N)},t.prototype.isTileClipped=function(){return!0},t}(_o);function pf(e,t){return t>0?t+2*e:e}var lg=Vn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ug=Vn([{name:"a_projected_pos",components:3,type:"Float32"}],4),cg=(Vn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Vn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ff=(Vn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),hg=Vn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pg(e,t,i){return e.sections.forEach(function(u){u.text=function(p,d,x){var S=d.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),Ba.applyArabicShaping&&(p=Ba.applyArabicShaping(p)),p}(u.text,t,i)}),e}Vn([{name:"triangle",components:3,type:"Uint16"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Vn([{type:"Float32",name:"offsetX"}]),Vn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var rc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},df=function(e,t,i,u,p){var d,x,S=8*p-u-1,A=(1<<S)-1,R=A>>1,N=-7,V=i?p-1:0,Z=i?-1:1,H=e[t+V];for(V+=Z,d=H&(1<<-N)-1,H>>=-N,N+=S;N>0;d=256*d+e[t+V],V+=Z,N-=8);for(x=d&(1<<-N)-1,d>>=-N,N+=u;N>0;x=256*x+e[t+V],V+=Z,N-=8);if(d===0)d=1-R;else{if(d===A)return x?NaN:1/0*(H?-1:1);x+=Math.pow(2,u),d-=R}return(H?-1:1)*x*Math.pow(2,d-u)},mf=function(e,t,i,u,p,d){var x,S,A,R=8*d-p-1,N=(1<<R)-1,V=N>>1,Z=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=u?0:d-1,ne=u?1:-1,ae=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(S=isNaN(t)?1:0,x=N):(x=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-x))<1&&(x--,A*=2),(t+=x+V>=1?Z/A:Z*Math.pow(2,1-V))*A>=2&&(x++,A/=2),x+V>=N?(S=0,x=N):x+V>=1?(S=(t*A-1)*Math.pow(2,p),x+=V):(S=t*Math.pow(2,V-1)*Math.pow(2,p),x=0));p>=8;e[i+H]=255&S,H+=ne,S/=256,p-=8);for(x=x<<p|S,R+=p;R>0;e[i+H]=255&x,H+=ne,x/=256,R-=8);e[i+H-ne]|=128*ae},Hc=Vi;function Vi(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Vi.Varint=0,Vi.Fixed64=1,Vi.Bytes=2,Vi.Fixed32=5;var yf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function xs(e){return e.type===Vi.Bytes?e.readVarint()+e.pos:e.pos+1}function au(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function gf(e,t,i){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(u);for(var p=i.pos-1;p>=e;p--)i.buf[p+u]=i.buf[p]}function fg(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function dg(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function mg(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function yg(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function gg(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function _g(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function vg(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function bg(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xg(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Xc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function ou(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function _f(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function wg(e,t,i){e===1&&i.readMessage(Eg,t)}function Eg(e,t,i){if(e===3){var u=i.readMessage(Sg,{}),p=u.width,d=u.height,x=u.left,S=u.top,A=u.advance;t.push({id:u.id,bitmap:new Tl({width:p+6,height:d+6},u.bitmap),metrics:{width:p,height:d,left:x,top:S,advance:A}})}}function Sg(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function vf(e){for(var t=0,i=0,u=0,p=e;u<p.length;u+=1){var d=p[u];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(ae,ye){return ye.h-ae.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],S=0,A=0,R=0,N=e;R<N.length;R+=1)for(var V=N[R],Z=x.length-1;Z>=0;Z--){var H=x[Z];if(!(V.w>H.w||V.h>H.h)){if(V.x=H.x,V.y=H.y,A=Math.max(A,V.y+V.h),S=Math.max(S,V.x+V.w),V.w===H.w&&V.h===H.h){var ne=x.pop();Z<x.length&&(x[Z]=ne)}else V.h===H.h?(H.x+=V.w,H.w-=V.w):V.w===H.w?(H.y+=V.h,H.h-=V.h):(x.push({x:H.x+V.w,y:H.y,w:H.w-V.w,h:V.h}),H.y+=V.h,H.h-=V.h);break}}return{w:S,h:A,fill:t/(S*A)||0}}Vi.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),p=u>>3,d=this.pos;this.type=7&u,e(p,t,this),this.pos===d&&this.skip(u)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Xc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=_f(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Xc(this.buf,this.pos)+4294967296*Xc(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Xc(this.buf,this.pos)+4294967296*_f(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=df(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=df(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,u=this.buf;return t=127&(i=u[this.pos++]),i<128?t:(t|=(127&(i=u[this.pos++]))<<7,i<128?t:(t|=(127&(i=u[this.pos++]))<<14,i<128?t:(t|=(127&(i=u[this.pos++]))<<21,i<128?t:function(p,d,x){var S,A,R=x.buf;if(S=(112&(A=R[x.pos++]))>>4,A<128||(S|=(127&(A=R[x.pos++]))<<3,A<128)||(S|=(127&(A=R[x.pos++]))<<10,A<128)||(S|=(127&(A=R[x.pos++]))<<17,A<128)||(S|=(127&(A=R[x.pos++]))<<24,A<128)||(S|=(1&(A=R[x.pos++]))<<31,A<128))return au(p,S,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&yf?function(i,u,p){return yf.decode(i.subarray(u,p))}(this.buf,t,e):function(i,u,p){for(var d="",x=u;x<p;){var S,A,R,N=i[x],V=null,Z=N>239?4:N>223?3:N>191?2:1;if(x+Z>p)break;Z===1?N<128&&(V=N):Z===2?(192&(S=i[x+1]))==128&&(V=(31&N)<<6|63&S)<=127&&(V=null):Z===3?(A=i[x+2],(192&(S=i[x+1]))==128&&(192&A)==128&&((V=(15&N)<<12|(63&S)<<6|63&A)<=2047||V>=55296&&V<=57343)&&(V=null)):Z===4&&(A=i[x+2],R=i[x+3],(192&(S=i[x+1]))==128&&(192&A)==128&&(192&R)==128&&((V=(15&N)<<18|(63&S)<<12|(63&A)<<6|63&R)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,Z=1):V>65535&&(V-=65536,d+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),d+=String.fromCharCode(V),x+=Z}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Vi.Bytes)return e.push(this.readVarint(t));var i=xs(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Vi.Bytes)return e.push(this.readSVarint());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Vi.Bytes)return e.push(this.readBoolean());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Vi.Bytes)return e.push(this.readFloat());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Vi.Bytes)return e.push(this.readDouble());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Vi.Bytes)return e.push(this.readFixed32());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Vi.Bytes)return e.push(this.readSFixed32());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Vi.Bytes)return e.push(this.readFixed64());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Vi.Bytes)return e.push(this.readSFixed64());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Vi.Varint)for(;this.buf[this.pos++]>127;);else if(t===Vi.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Vi.Fixed32)this.pos+=4;else{if(t!==Vi.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),ou(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),ou(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),ou(this.buf,-1&e,this.pos),ou(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),ou(this.buf,-1&e,this.pos),ou(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var u,p;if(t>=0?(u=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,x,S){S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,S.buf[S.pos]=127&(d>>>=7)}(u,0,i),function(d,x){var S=(7&d)<<4;x.buf[x.pos++]|=S|((d>>>=3)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(u,p,d){for(var x,S,A=0;A<p.length;A++){if((x=p.charCodeAt(A))>55295&&x<57344){if(!S){x>56319||A+1===p.length?(u[d++]=239,u[d++]=191,u[d++]=189):S=x;continue}if(x<56320){u[d++]=239,u[d++]=191,u[d++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(u[d++]=239,u[d++]=191,u[d++]=189,S=null);x<128?u[d++]=x:(x<2048?u[d++]=x>>6|192:(x<65536?u[d++]=x>>12|224:(u[d++]=x>>18|240,u[d++]=x>>12&63|128),u[d++]=x>>6&63|128),u[d++]=63&x|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&gf(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),mf(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),mf(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var u=this.pos-i;u>=128&&gf(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,t,i){this.writeTag(e,Vi.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fg,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,dg,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,gg,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,mg,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,yg,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,_g,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,vg,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,bg,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xg,t)},writeBytesField:function(e,t){this.writeTag(e,Vi.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Vi.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Vi.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Vi.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Vi.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Vi.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Vi.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Vi.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Vi.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Vi.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Wc=function(e,t){var i=t.pixelRatio,u=t.version,p=t.stretchX,d=t.stretchY,x=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=x,this.version=u},ic={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ic.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ic.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ic.tlbr.get=function(){return this.tl.concat(this.br)},ic.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Wc.prototype,ic);var nc=function(e,t){var i={},u={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,u,p);var d=vf(p),x=new Pa({width:d.w||1,height:d.h||1});for(var S in e){var A=e[S],R=i[S].paddedRect;Pa.copy(A.data,x,{x:0,y:0},{x:R.x+1,y:R.y+1},A.data)}for(var N in t){var V=t[N],Z=u[N].paddedRect,H=Z.x+1,ne=Z.y+1,ae=V.data.width,ye=V.data.height;Pa.copy(V.data,x,{x:0,y:0},{x:H,y:ne},V.data),Pa.copy(V.data,x,{x:0,y:ye-1},{x:H,y:ne-1},{width:ae,height:1}),Pa.copy(V.data,x,{x:0,y:0},{x:H,y:ne+ye},{width:ae,height:1}),Pa.copy(V.data,x,{x:ae-1,y:0},{x:H-1,y:ne},{width:1,height:ye}),Pa.copy(V.data,x,{x:0,y:0},{x:H+ae,y:ne},{width:1,height:ye})}this.image=x,this.iconPositions=i,this.patternPositions=u};nc.prototype.addImages=function(e,t,i){for(var u in e){var p=e[u],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[u]=new Wc(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},nc.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},nc.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var u=e.tl;i.update(t.data,void 0,{x:u[0],y:u[1]})}},jt("ImagePosition",Wc),jt("ImageAtlas",nc);var Ya={horizontal:1,vertical:2,horizontalOnly:3},su=function(){this.scale=1,this.fontStack="",this.imageName=null};su.forText=function(e,t){var i=new su;return i.scale=e||1,i.fontStack=t,i},su.forImage=function(e){var t=new su;return t.imageName=e,t};var oa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Jc(e,t,i,u,p,d,x,S,A,R,N,V,Z,H,ne,ae){var ye,ce=oa.fromFeature(e,p);V===Ya.vertical&&ce.verticalizePunctuation();var Ee=Ba.processBidirectionalText,Pe=Ba.processStyledBidirectionalText;if(Ee&&ce.sections.length===1){ye=[];for(var Oe=0,Ne=Ee(ce.toString(),op(ce,R,d,t,u,H,ne));Oe<Ne.length;Oe+=1){var Xe=Ne[Oe],ct=new oa;ct.text=Xe,ct.sections=ce.sections;for(var Et=0;Et<Xe.length;Et++)ct.sectionIndex.push(0);ye.push(ct)}}else if(Pe){ye=[];for(var Qt=0,Pt=Pe(ce.text,ce.sectionIndex,op(ce,R,d,t,u,H,ne));Qt<Pt.length;Qt+=1){var ar=Pt[Qt],Dt=new oa;Dt.text=ar[0],Dt.sectionIndex=ar[1],Dt.sections=ce.sections,ye.push(Dt)}}else ye=function(Gt,Qr){for(var Lr=[],oi=Gt.text,or=0,mi=0,en=Qr;mi<en.length;mi+=1){var ln=en[mi];Lr.push(Gt.substring(or,ln)),or=ln}return or<oi.length&&Lr.push(Gt.substring(or,oi.length)),Lr}(ce,op(ce,R,d,t,u,H,ne));var Zr=[],br={positionedLines:Zr,text:ce.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(Gt,Qr,Lr,oi,or,mi,en,ln,on,tn,un,Dn){for(var Ln=0,sa=-17,qn=0,la=0,yn=ln==="right"?1:ln==="left"?0:.5,Zn=0,ti=0,Mi=or;ti<Mi.length;ti+=1){var Ii=Mi[ti];Ii.trim();var hi=Ii.getMaxScale(),ga=24*(hi-1),$n={positionedGlyphs:[],lineOffset:0};Gt.positionedLines[Zn]=$n;var Hi=$n.positionedGlyphs,En=0;if(Ii.length()){for(var ea=0;ea<Ii.length();ea++){var yi=Ii.getSection(ea),Yo=Ii.getSectionIndex(ea),Qa=Ii.getCharCode(ea),Qo=0,gn=null,$o=null,wo=null,mu=24,Cl=!(on===Ya.horizontal||!un&&!Kl(Qa)||un&&(Yc[Qa]||(ks=Qa,Tt.Arabic(ks)||Tt["Arabic Supplement"](ks)||Tt["Arabic Extended-A"](ks)||Tt["Arabic Presentation Forms-A"](ks)||Tt["Arabic Presentation Forms-B"](ks))));if(yi.imageName){var yu=oi[yi.imageName];if(!yu)continue;wo=yi.imageName,Gt.iconsInText=Gt.iconsInText||!0,$o=yu.paddedRect;var Ss=yu.displaySize;yi.scale=24*yi.scale/Dn,Qo=ga+(24-Ss[1]*yi.scale),mu=(gn={width:Ss[0],height:Ss[1],left:1,top:-3,advance:Cl?Ss[1]:Ss[0]}).advance;var gu=Cl?Ss[0]*yi.scale-24*hi:Ss[1]*yi.scale-24*hi;gu>0&&gu>En&&(En=gu)}else{var oh=Lr[yi.fontStack],_u=oh&&oh[Qa];if(_u&&_u.rect)$o=_u.rect,gn=_u.metrics;else{var sc=Qr[yi.fontStack],sh=sc&&sc[Qa];if(!sh)continue;gn=sh.metrics}Qo=24*(hi-yi.scale)}Cl?(Gt.verticalizable=!0,Hi.push({glyph:Qa,imageName:wo,x:Ln,y:sa+Qo,vertical:Cl,scale:yi.scale,fontStack:yi.fontStack,sectionIndex:Yo,metrics:gn,rect:$o}),Ln+=mu*yi.scale+tn):(Hi.push({glyph:Qa,imageName:wo,x:Ln,y:sa+Qo,vertical:Cl,scale:yi.scale,fontStack:yi.fontStack,sectionIndex:Yo,metrics:gn,rect:$o}),Ln+=gn.advance*yi.scale+tn)}Hi.length!==0&&(qn=Math.max(Ln-tn,qn),Ig(Hi,0,Hi.length-1,yn,En)),Ln=0;var lh=mi*hi+En;$n.lineOffset=Math.max(En,ga),sa+=lh,la=Math.max(lh,la),++Zn}else sa+=mi,++Zn}var ks,lc=sa- -17,vu=sp(en),Ws=vu.horizontalAlign,bu=vu.verticalAlign;(function(uh,ch,uc,cc,hh,hc,pc,fc,ph){var xu,fh=(ch-uc)*hh;xu=hc!==pc?-fc*cc- -17:(-cc*ph+.5)*pc;for(var wu=0,dc=uh;wu<dc.length;wu+=1)for(var Ml=0,mc=dc[wu].positionedGlyphs;Ml<mc.length;Ml+=1){var Eu=mc[Ml];Eu.x+=fh,Eu.y+=xu}})(Gt.positionedLines,yn,Ws,bu,qn,la,mi,lc,or.length),Gt.top+=-bu*lc,Gt.bottom=Gt.top+lc,Gt.left+=-Ws*qn,Gt.right=Gt.left+qn}(br,t,i,u,ye,x,S,A,V,R,Z,ae),!function(Gt){for(var Qr=0,Lr=Gt;Qr<Lr.length;Qr+=1)if(Lr[Qr].positionedGlyphs.length!==0)return!1;return!0}(Zr)&&br}oa.fromFeature=function(e,t){for(var i=new oa,u=0;u<e.sections.length;u++){var p=e.sections[u];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},oa.prototype.length=function(){return this.text.length},oa.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},oa.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},oa.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},oa.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var u=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=u&&Uu(u)&&!rc[e[i+1]]||p&&Uu(p)&&!rc[e[i-1]]||!rc[e[i]]?e[i]:rc[e[i]]}return t}(this.text)},oa.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Yc[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,u=this.text.length-1;u>=0&&u>=e&&Yc[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},oa.prototype.substring=function(e,t){var i=new oa;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},oa.prototype.toString=function(){return this.text},oa.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},oa.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(su.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(i)},oa.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(su.forImage(t)),this.sectionIndex.push(this.sections.length-1)):nt("Reached maximum number of images 6401")}else nt("Can't add FormattedSection with an empty image.")},oa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Yc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fa={};function bf(e,t,i,u,p,d){if(t.imageName){var x=u[t.imageName];return x?x.displaySize[0]*t.scale*24/d+p:0}var S=i[t.fontStack],A=S&&S[e];return A?A.metrics.advance*t.scale+p:0}function xf(e,t,i,u){var p=Math.pow(e-t,2);return u?e<t?p/2:2*p:p+Math.abs(i)*i}function kg(e,t,i){var u=0;return e===10&&(u-=1e4),i&&(u+=150),e!==40&&e!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function wf(e,t,i,u,p,d){for(var x=null,S=xf(t,i,p,d),A=0,R=u;A<R.length;A+=1){var N=R[A],V=xf(t-N.x,i,p,d)+N.badness;V<=S&&(x=N,S=V)}return{index:e,x:t,priorBreak:x,badness:S}}function op(e,t,i,u,p,d,x){if(d!=="point")return[];if(!e)return[];for(var S,A=[],R=function(ye,ce,Ee,Pe,Oe,Ne){for(var Xe=0,ct=0;ct<ye.length();ct++){var Et=ye.getSection(ct);Xe+=bf(ye.getCharCode(ct),Et,Pe,Oe,ce,Ne)}return Xe/Math.max(1,Math.ceil(Xe/Ee))}(e,t,i,u,p,x),N=e.text.indexOf("\u200B")>=0,V=0,Z=0;Z<e.length();Z++){var H=e.getSection(Z),ne=e.getCharCode(Z);if(Yc[ne]||(V+=bf(ne,H,u,p,t,x)),Z<e.length()-1){var ae=!((S=ne)<11904||!(Tt["Bopomofo Extended"](S)||Tt.Bopomofo(S)||Tt["CJK Compatibility Forms"](S)||Tt["CJK Compatibility Ideographs"](S)||Tt["CJK Compatibility"](S)||Tt["CJK Radicals Supplement"](S)||Tt["CJK Strokes"](S)||Tt["CJK Symbols and Punctuation"](S)||Tt["CJK Unified Ideographs Extension A"](S)||Tt["CJK Unified Ideographs"](S)||Tt["Enclosed CJK Letters and Months"](S)||Tt["Halfwidth and Fullwidth Forms"](S)||Tt.Hiragana(S)||Tt["Ideographic Description Characters"](S)||Tt["Kangxi Radicals"](S)||Tt["Katakana Phonetic Extensions"](S)||Tt.Katakana(S)||Tt["Vertical Forms"](S)||Tt["Yi Radicals"](S)||Tt["Yi Syllables"](S)));(Fa[ne]||ae||H.imageName)&&A.push(wf(Z+1,V,R,A,kg(ne,e.getCharCode(Z+1),ae&&N),!1))}}return function ye(ce){return ce?ye(ce.priorBreak).concat(ce.index):[]}(wf(e.length(),V,R,A,0,!0))}function sp(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Ig(e,t,i,u,p){if(u||p)for(var d=e[i],x=(e[i].x+d.metrics.advance*d.scale)*u,S=t;S<=i;S++)e[S].x-=x,e[S].y+=p}function Ef(e,t,i,u,p,d){var x,S=e.image;if(S.content){var A=S.content,R=S.pixelRatio||1;x=[A[0]/R,A[1]/R,S.displaySize[0]-A[2]/R,S.displaySize[1]-A[3]/R]}var N,V,Z,H,ne=t.left*d,ae=t.right*d;i==="width"||i==="both"?(H=p[0]+ne-u[3],V=p[0]+ae+u[1]):V=(H=p[0]+(ne+ae-S.displaySize[0])/2)+S.displaySize[0];var ye=t.top*d,ce=t.bottom*d;return i==="height"||i==="both"?(N=p[1]+ye-u[0],Z=p[1]+ce+u[2]):Z=(N=p[1]+(ye+ce-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:N,right:V,bottom:Z,left:H,collisionPadding:x}}Fa[10]=!0,Fa[32]=!0,Fa[38]=!0,Fa[40]=!0,Fa[41]=!0,Fa[43]=!0,Fa[45]=!0,Fa[47]=!0,Fa[173]=!0,Fa[183]=!0,Fa[8203]=!0,Fa[8208]=!0,Fa[8211]=!0,Fa[8231]=!0;var lu=function(e){function t(i,u,p,d){e.call(this,i,u),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(z);function lp(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new $r(e+1))};if(i.kind==="source")return{kind:"source"};for(var u=i.zoomStops,p=i.interpolationType,d=0;d<u.length&&u[d]<=e;)d++;for(var x=d=Math.max(0,d-1);x<u.length&&u[x]<e+1;)x++;x=Math.min(u.length-1,x);var S=u[d],A=u[x];return i.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:A,minSize:i.evaluate(new $r(S)),maxSize:i.evaluate(new $r(A)),interpolationType:p}}function Sf(e,t,i){var u=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?di(p/128,i.upperSize/128,t.uSizeT):u}function kf(e,t){var i=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?_e(Di.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=di(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:u}}jt("Anchor",lu);var Tg=Object.freeze({__proto__:null,getSizeData:lp,evaluateSizeForFeature:Sf,evaluateSizeForZoom:kf,SIZE_PACK_FACTOR:128});function If(e,t,i,u,p){if(t.segment===void 0)return!0;for(var d=t,x=t.segment+1,S=0;S>-i/2;){if(--x<0)return!1;S-=e[x].dist(d),d=e[x]}S+=e[x].dist(e[x+1]),x++;for(var A=[],R=0;S<i/2;){var N=e[x],V=e[x+1];if(!V)return!1;var Z=e[x-1].angleTo(N)-N.angleTo(V);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:S,angleDelta:Z}),R+=Z;S-A[0].distance>u;)R-=A.shift().angleDelta;if(R>p)return!1;x++,S+=N.dist(V)}return!0}function Tf(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function Af(e,t,i){return e?.6*t*i:0}function zf(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Ag(e,t,i,u,p,d){for(var x=Af(i,p,d),S=zf(i,u)*d,A=0,R=Tf(e)/2,N=0;N<e.length-1;N++){var V=e[N],Z=e[N+1],H=V.dist(Z);if(A+H>R){var ne=(R-A)/H,ae=di(V.x,Z.x,ne),ye=di(V.y,Z.y,ne),ce=new lu(ae,ye,Z.angleTo(V),N);return ce._round(),!x||If(e,ce,S,x,t)?ce:void 0}A+=H}}function zg(e,t,i,u,p,d,x,S,A){var R=Af(u,d,x),N=zf(u,p),V=N*x,Z=e[0].x===0||e[0].x===A||e[0].y===0||e[0].y===A;return t-V<t/4&&(t=V+t/4),function H(ne,ae,ye,ce,Ee,Pe,Oe,Ne,Xe){for(var ct=Pe/2,Et=Tf(ne),Qt=0,Pt=ae-ye,ar=[],Dt=0;Dt<ne.length-1;Dt++){for(var Zr=ne[Dt],br=ne[Dt+1],Gt=Zr.dist(br),Qr=br.angleTo(Zr);Pt+ye<Qt+Gt;){var Lr=((Pt+=ye)-Qt)/Gt,oi=di(Zr.x,br.x,Lr),or=di(Zr.y,br.y,Lr);if(oi>=0&&oi<Xe&&or>=0&&or<Xe&&Pt-ct>=0&&Pt+ct<=Et){var mi=new lu(oi,or,Qr,Dt);mi._round(),ce&&!If(ne,mi,Pe,ce,Ee)||ar.push(mi)}}Qt+=Gt}return Ne||ar.length||Oe||(ar=H(ne,Qt/2,ye,ce,Ee,Pe,Oe,!0,Xe)),ar}(e,Z?t/2*S%t:(N/2+2*d)*x*S%t,t,R,i,V,Z,!1,A)}function Pf(e,t,i,u,p){for(var d=[],x=0;x<e.length;x++)for(var S=e[x],A=void 0,R=0;R<S.length-1;R++){var N=S[R],V=S[R+1];N.x<t&&V.x<t||(N.x<t?N=new z(t,N.y+(t-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<t&&(V=new z(t,N.y+(t-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<i&&V.y<i||(N.y<i?N=new z(N.x+(i-N.y)/(V.y-N.y)*(V.x-N.x),i)._round():V.y<i&&(V=new z(N.x+(i-N.y)/(V.y-N.y)*(V.x-N.x),i)._round()),N.x>=u&&V.x>=u||(N.x>=u?N=new z(u,N.y+(u-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=u&&(V=new z(u,N.y+(u-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=p&&V.y>=p||(N.y>=p?N=new z(N.x+(p-N.y)/(V.y-N.y)*(V.x-N.x),p)._round():V.y>=p&&(V=new z(N.x+(p-N.y)/(V.y-N.y)*(V.x-N.x),p)._round()),A&&N.equals(A[A.length-1])||d.push(A=[N]),A.push(V)))))}return d}function Cf(e,t,i,u){var p=[],d=e.image,x=d.pixelRatio,S=d.paddedRect.w-2,A=d.paddedRect.h-2,R=e.right-e.left,N=e.bottom-e.top,V=d.stretchX||[[0,S]],Z=d.stretchY||[[0,A]],H=function(oi,or){return oi+or[1]-or[0]},ne=V.reduce(H,0),ae=Z.reduce(H,0),ye=S-ne,ce=A-ae,Ee=0,Pe=ne,Oe=0,Ne=ae,Xe=0,ct=ye,Et=0,Qt=ce;if(d.content&&u){var Pt=d.content;Ee=Qc(V,0,Pt[0]),Oe=Qc(Z,0,Pt[1]),Pe=Qc(V,Pt[0],Pt[2]),Ne=Qc(Z,Pt[1],Pt[3]),Xe=Pt[0]-Ee,Et=Pt[1]-Oe,ct=Pt[2]-Pt[0]-Pe,Qt=Pt[3]-Pt[1]-Ne}var ar=function(oi,or,mi,en){var ln=$c(oi.stretch-Ee,Pe,R,e.left),on=eh(oi.fixed-Xe,ct,oi.stretch,ne),tn=$c(or.stretch-Oe,Ne,N,e.top),un=eh(or.fixed-Et,Qt,or.stretch,ae),Dn=$c(mi.stretch-Ee,Pe,R,e.left),Ln=eh(mi.fixed-Xe,ct,mi.stretch,ne),sa=$c(en.stretch-Oe,Ne,N,e.top),qn=eh(en.fixed-Et,Qt,en.stretch,ae),la=new z(ln,tn),yn=new z(Dn,tn),Zn=new z(Dn,sa),ti=new z(ln,sa),Mi=new z(on/x,un/x),Ii=new z(Ln/x,qn/x),hi=t*Math.PI/180;if(hi){var ga=Math.sin(hi),$n=Math.cos(hi),Hi=[$n,-ga,ga,$n];la._matMult(Hi),yn._matMult(Hi),ti._matMult(Hi),Zn._matMult(Hi)}var En=oi.stretch+oi.fixed,ea=or.stretch+or.fixed;return{tl:la,tr:yn,bl:ti,br:Zn,tex:{x:d.paddedRect.x+1+En,y:d.paddedRect.y+1+ea,w:mi.stretch+mi.fixed-En,h:en.stretch+en.fixed-ea},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mi,pixelOffsetBR:Ii,minFontScaleX:ct/x/R,minFontScaleY:Qt/x/N,isSDF:i}};if(u&&(d.stretchX||d.stretchY))for(var Dt=Mf(V,ye,ne),Zr=Mf(Z,ce,ae),br=0;br<Dt.length-1;br++)for(var Gt=Dt[br],Qr=Dt[br+1],Lr=0;Lr<Zr.length-1;Lr++)p.push(ar(Gt,Zr[Lr],Qr,Zr[Lr+1]));else p.push(ar({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:A+1}));return p}function Qc(e,t,i){for(var u=0,p=0,d=e;p<d.length;p+=1){var x=d[p];u+=Math.max(t,Math.min(i,x[1]))-Math.max(t,Math.min(i,x[0]))}return u}function Mf(e,t,i){for(var u=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var x=d[p],S=x[0],A=x[1],R=u[u.length-1];u.push({fixed:S-R.stretch,stretch:R.stretch}),u.push({fixed:S-R.stretch,stretch:R.stretch+(A-S)})}return u.push({fixed:t+1,stretch:i}),u}function $c(e,t,i,u){return e/t*i+u}function eh(e,t,i,u){return e-t*i/u}var th=function(e,t,i,u,p,d,x,S,A,R){if(this.boxStartIndex=e.length,A){var N=d.top,V=d.bottom,Z=d.collisionPadding;Z&&(N-=Z[1],V+=Z[3]);var H=V-N;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{var ne=d.top*x-S,ae=d.bottom*x+S,ye=d.left*x-S,ce=d.right*x+S,Ee=d.collisionPadding;if(Ee&&(ye-=Ee[0]*x,ne-=Ee[1]*x,ce+=Ee[2]*x,ae+=Ee[3]*x),R){var Pe=new z(ye,ne),Oe=new z(ce,ne),Ne=new z(ye,ae),Xe=new z(ce,ae),ct=R*Math.PI/180;Pe._rotate(ct),Oe._rotate(ct),Ne._rotate(ct),Xe._rotate(ct),ye=Math.min(Pe.x,Oe.x,Ne.x,Xe.x),ce=Math.max(Pe.x,Oe.x,Ne.x,Xe.x),ne=Math.min(Pe.y,Oe.y,Ne.y,Xe.y),ae=Math.max(Pe.y,Oe.y,Ne.y,Xe.y)}e.emplaceBack(t.x,t.y,ye,ne,ce,ae,i,u,p)}this.boxEndIndex=e.length},uu=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Pg),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Pg(e,t){return e<t?-1:e>t?1:0}function Cg(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var u=1/0,p=1/0,d=-1/0,x=-1/0,S=e[0],A=0;A<S.length;A++){var R=S[A];(!A||R.x<u)&&(u=R.x),(!A||R.y<p)&&(p=R.y),(!A||R.x>d)&&(d=R.x),(!A||R.y>x)&&(x=R.y)}var N=Math.min(d-u,x-p),V=N/2,Z=new uu([],Mg);if(N===0)return new z(u,p);for(var H=u;H<d;H+=N)for(var ne=p;ne<x;ne+=N)Z.push(new cu(H+V,ne+V,V,e));for(var ae=function(Ee){for(var Pe=0,Oe=0,Ne=0,Xe=Ee[0],ct=0,Et=Xe.length,Qt=Et-1;ct<Et;Qt=ct++){var Pt=Xe[ct],ar=Xe[Qt],Dt=Pt.x*ar.y-ar.x*Pt.y;Oe+=(Pt.x+ar.x)*Dt,Ne+=(Pt.y+ar.y)*Dt,Pe+=3*Dt}return new cu(Oe/Pe,Ne/Pe,0,Ee)}(e),ye=Z.length;Z.length;){var ce=Z.pop();(ce.d>ae.d||!ae.d)&&(ae=ce,i&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,ye)),ce.max-ae.d<=t||(Z.push(new cu(ce.p.x-(V=ce.h/2),ce.p.y-V,V,e)),Z.push(new cu(ce.p.x+V,ce.p.y-V,V,e)),Z.push(new cu(ce.p.x-V,ce.p.y+V,V,e)),Z.push(new cu(ce.p.x+V,ce.p.y+V,V,e)),ye+=4)}return i&&(console.log("num probes: "+ye),console.log("best distance: "+ae.d)),ae.p}function Mg(e,t){return t.max-e.max}function cu(e,t,i,u){this.p=new z(e,t),this.h=i,this.d=function(p,d){for(var x=!1,S=1/0,A=0;A<d.length;A++)for(var R=d[A],N=0,V=R.length,Z=V-1;N<V;Z=N++){var H=R[N],ne=R[Z];H.y>p.y!=ne.y>p.y&&p.x<(ne.x-H.x)*(p.y-H.y)/(ne.y-H.y)+H.x&&(x=!x),S=Math.min(S,Gs(p,H,ne))}return(x?1:-1)*Math.sqrt(S)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}uu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},uu.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},uu.prototype.peek=function(){return this.data[0]},uu.prototype._up=function(e){for(var t=this.data,i=this.compare,u=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(u,d)>=0)break;t[e]=d,e=p}t[e]=u},uu.prototype._down=function(e){for(var t=this.data,i=this.compare,u=this.length>>1,p=t[e];e<u;){var d=1+(e<<1),x=t[d],S=d+1;if(S<this.length&&i(t[S],x)<0&&(d=S,x=t[S]),i(x,p)>=0)break;t[e]=x,e=d}t[e]=p};var up=Number.POSITIVE_INFINITY;function Df(e,t){return t[1]!==up?function(i,u,p){var d=0,x=0;switch(u=Math.abs(u),p=Math.abs(p),i){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-u;break;case"top-left":case"bottom-left":case"left":d=u}return[d,x]}(e,t[0],t[1]):function(i,u){var p=0,d=0;u<0&&(u=0);var x=u/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=x-7;break;case"bottom-right":case"bottom-left":d=7-x;break;case"bottom":d=7-u;break;case"top":d=u-7}switch(i){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=u;break;case"right":p=-u}return[p,d]}(e,t[0])}function cp(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lf(e,t,i,u,p,d,x,S,A,R,N,V,Z,H,ne){var ae=function(Oe,Ne,Xe,ct,Et,Qt,Pt,ar){for(var Dt=ct.layout.get("text-rotate").evaluate(Qt,{})*Math.PI/180,Zr=[],br=0,Gt=Ne.positionedLines;br<Gt.length;br+=1)for(var Qr=Gt[br],Lr=0,oi=Qr.positionedGlyphs;Lr<oi.length;Lr+=1){var or=oi[Lr];if(or.rect){var mi=or.rect||{},en=4,ln=!0,on=1,tn=0,un=(Et||ar)&&or.vertical,Dn=or.metrics.advance*or.scale/2;if(ar&&Ne.verticalizable&&(tn=Qr.lineOffset/2-(or.imageName?-(24-or.metrics.width*or.scale)/2:24*(or.scale-1))),or.imageName){var Ln=Pt[or.imageName];ln=Ln.sdf,en=1/(on=Ln.pixelRatio)}var sa=Et?[or.x+Dn,or.y]:[0,0],qn=Et?[0,0]:[or.x+Dn+Xe[0],or.y+Xe[1]-tn],la=[0,0];un&&(la=qn,qn=[0,0]);var yn=(or.metrics.left-en)*or.scale-Dn+qn[0],Zn=(-or.metrics.top-en)*or.scale+qn[1],ti=yn+mi.w*or.scale/on,Mi=Zn+mi.h*or.scale/on,Ii=new z(yn,Zn),hi=new z(ti,Zn),ga=new z(yn,Mi),$n=new z(ti,Mi);if(un){var Hi=new z(-Dn,Dn- -17),En=-Math.PI/2,ea=12-Dn,yi=new z(22-ea,-(or.imageName?ea:0)),Yo=new(Function.prototype.bind.apply(z,[null].concat(la)));Ii._rotateAround(En,Hi)._add(yi)._add(Yo),hi._rotateAround(En,Hi)._add(yi)._add(Yo),ga._rotateAround(En,Hi)._add(yi)._add(Yo),$n._rotateAround(En,Hi)._add(yi)._add(Yo)}if(Dt){var Qa=Math.sin(Dt),Qo=Math.cos(Dt),gn=[Qo,-Qa,Qa,Qo];Ii._matMult(gn),hi._matMult(gn),ga._matMult(gn),$n._matMult(gn)}var $o=new z(0,0),wo=new z(0,0);Zr.push({tl:Ii,tr:hi,bl:ga,br:$n,tex:mi,writingMode:Ne.writingMode,glyphOffset:sa,sectionIndex:or.sectionIndex,isSDF:ln,pixelOffsetTL:$o,pixelOffsetBR:wo,minFontScaleX:0,minFontScaleY:0})}}return Zr}(0,i,S,p,d,x,u,e.allowVerticalPlacement),ye=e.textSizeData,ce=null;ye.kind==="source"?(ce=[128*p.layout.get("text-size").evaluate(x,{})])[0]>32640&&nt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ye.kind==="composite"&&((ce=[128*H.compositeTextSizes[0].evaluate(x,{},ne),128*H.compositeTextSizes[1].evaluate(x,{},ne)])[0]>32640||ce[1]>32640)&&nt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,ae,ce,S,d,x,R,t,A.lineStartIndex,A.lineLength,Z,ne);for(var Ee=0,Pe=N;Ee<Pe.length;Ee+=1)V[Pe[Ee]]=e.text.placedSymbolArray.length-1;return 4*ae.length}function Rf(e){for(var t in e)return e[t];return null}function Dg(e,t,i,u){var p=e.compareText;if(t in p){for(var d=p[t],x=d.length-1;x>=0;x--)if(u.dist(d[x])<i)return!0}else p[t]=[];return p[t].push(u),!1}var Lg=nu.VectorTileFeature.types,Rg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rh(e,t,i,u,p,d,x,S,A,R,N,V,Z){var H=S?Math.min(32640,Math.round(S[0])):0,ne=S?Math.min(32640,Math.round(S[1])):0;e.emplaceBack(t,i,Math.round(32*u),Math.round(32*p),d,x,(H<<1)+(A?1:0),ne,16*R,16*N,256*V,256*Z)}function hp(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Bg(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Hl(i[t].text))return!0;return!1}var hu=function(e){this.layoutVertexArray=new Yl,this.indexArray=new Go,this.programConfigurations=e,this.segments=new $,this.dynamicLayoutVertexArray=new js,this.opacityVertexArray=new xl,this.placedSymbolArray=new h};hu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},hu.prototype.upload=function(e,t,i,u){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,lg.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,ug.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Rg,!0),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))},hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},jt("SymbolBuffers",hu);var ac=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new $,this.collisionVertexArray=new Hu};ac.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,cg.members,!0)},ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},jt("CollisionBuffers",ac);var Ci=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Oa([]),this.placementViewportMatrix=Oa([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lp(this.zoom,t["text-size"]),this.iconSizeData=lp(this.zoom,t["icon-size"]);var i=this.layers[0].layout,u=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Ya[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Ci.prototype.createArrays=function(){this.text=new hu(new _r(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new hu(new _r(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new E,this.lineVertexArray=new T,this.symbolInstances=new w},Ci.prototype.calculateGlyphDependencies=function(e,t,i,u,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||u)&&p){var x=rc[e.charAt(d)];x&&(t[x.charCodeAt(0)]=!0)}},Ci.prototype.populate=function(e,t,i){var u=this.layers[0],p=u.layout,d=p.get("text-font"),x=p.get("text-field"),S=p.get("icon-image"),A=(x.value.kind!=="constant"||x.value.value instanceof gi&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),R=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,N=p.get("symbol-sort-key");if(this.features=[],A||R){for(var V=t.iconDependencies,Z=t.glyphDependencies,H=t.availableImages,ne=new $r(this.zoom),ae=0,ye=e;ae<ye.length;ae+=1){var ce=ye[ae],Ee=ce.feature,Pe=ce.id,Oe=ce.index,Ne=ce.sourceLayerIndex,Xe=u._featureFilter.needGeometry,ct=mn(Ee,Xe);if(u._featureFilter.filter(ne,ct,i)){Xe||(ct.geometry=an(Ee));var Et=void 0;if(A){var Qt=u.getValueAndResolveTokens("text-field",ct,i,H),Pt=gi.factory(Qt);Bg(Pt)&&(this.hasRTLText=!0),(!this.hasRTLText||qu()==="unavailable"||this.hasRTLText&&Ba.isParsed())&&(Et=pg(Pt,u,ct))}var ar=void 0;if(R){var Dt=u.getValueAndResolveTokens("icon-image",ct,i,H);ar=Dt instanceof Ji?Dt:Ji.fromString(Dt)}if(Et||ar){var Zr=this.sortFeaturesByKey?N.evaluate(ct,{},i):void 0;if(this.features.push({id:Pe,text:Et,icon:ar,index:Oe,sourceLayerIndex:Ne,geometry:ct.geometry,properties:Ee.properties,type:Lg[Ee.type],sortKey:Zr}),ar&&(V[ar.name]=!0),Et){var br=d.evaluate(ct,{},i).join(","),Gt=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ya.vertical)>=0;for(var Qr=0,Lr=Et.sections;Qr<Lr.length;Qr+=1){var oi=Lr[Qr];if(oi.image)V[oi.image.name]=!0;else{var or=Vu(Et.toString()),mi=oi.fontStack||br,en=Z[mi]=Z[mi]||{};this.calculateGlyphDependencies(oi.text,en,Gt,this.allowVerticalPlacement,or)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(ln){var on={},tn={},un=[],Dn=0;function Ln(Hi){un.push(ln[Hi]),Dn++}function sa(Hi,En,ea){var yi=tn[Hi];return delete tn[Hi],tn[En]=yi,un[yi].geometry[0].pop(),un[yi].geometry[0]=un[yi].geometry[0].concat(ea[0]),yi}function qn(Hi,En,ea){var yi=on[En];return delete on[En],on[Hi]=yi,un[yi].geometry[0].shift(),un[yi].geometry[0]=ea[0].concat(un[yi].geometry[0]),yi}function la(Hi,En,ea){var yi=ea?En[0][En[0].length-1]:En[0][0];return Hi+":"+yi.x+":"+yi.y}for(var yn=0;yn<ln.length;yn++){var Zn=ln[yn],ti=Zn.geometry,Mi=Zn.text?Zn.text.toString():null;if(Mi){var Ii=la(Mi,ti),hi=la(Mi,ti,!0);if(Ii in tn&&hi in on&&tn[Ii]!==on[hi]){var ga=qn(Ii,hi,ti),$n=sa(Ii,hi,un[ga].geometry);delete on[Ii],delete tn[hi],tn[la(Mi,un[$n].geometry,!0)]=$n,un[ga].geometry=null}else Ii in tn?sa(Ii,hi,ti):hi in on?qn(Ii,hi,ti):(Ln(yn),on[Ii]=Dn-1,tn[hi]=Dn-1)}else Ln(yn)}return un.filter(function(Hi){return Hi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ln,on){return ln.sortKey-on.sortKey})}},Ci.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Ci.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ci.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ci.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ci.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ci.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ci.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},x=e.segment+1;x<t.length;x++)d[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:u},x<t.length-1&&(u+=t[x+1].dist(t[x]));for(var S=e.segment||0;S>=0;S--)d[S]={x:t[S].x,y:t[S].y,tileUnitDistanceFromAnchor:p},S>0&&(p+=t[S-1].dist(t[S]));for(var A=0;A<t.length;A++){var R=d[A];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Ci.prototype.addSymbols=function(e,t,i,u,p,d,x,S,A,R,N,V){for(var Z=e.indexArray,H=e.layoutVertexArray,ne=e.segments.prepareSegment(4*t.length,H,Z,this.canOverlap?d.sortKey:void 0),ae=this.glyphOffsetArray.length,ye=ne.vertexLength,ce=this.allowVerticalPlacement&&x===Ya.vertical?Math.PI/2:0,Ee=d.text&&d.text.sections,Pe=0;Pe<t.length;Pe++){var Oe=t[Pe],Ne=Oe.tl,Xe=Oe.tr,ct=Oe.bl,Et=Oe.br,Qt=Oe.tex,Pt=Oe.pixelOffsetTL,ar=Oe.pixelOffsetBR,Dt=Oe.minFontScaleX,Zr=Oe.minFontScaleY,br=Oe.glyphOffset,Gt=Oe.isSDF,Qr=Oe.sectionIndex,Lr=ne.vertexLength,oi=br[1];rh(H,S.x,S.y,Ne.x,oi+Ne.y,Qt.x,Qt.y,i,Gt,Pt.x,Pt.y,Dt,Zr),rh(H,S.x,S.y,Xe.x,oi+Xe.y,Qt.x+Qt.w,Qt.y,i,Gt,ar.x,Pt.y,Dt,Zr),rh(H,S.x,S.y,ct.x,oi+ct.y,Qt.x,Qt.y+Qt.h,i,Gt,Pt.x,ar.y,Dt,Zr),rh(H,S.x,S.y,Et.x,oi+Et.y,Qt.x+Qt.w,Qt.y+Qt.h,i,Gt,ar.x,ar.y,Dt,Zr),hp(e.dynamicLayoutVertexArray,S,ce),Z.emplaceBack(Lr,Lr+1,Lr+2),Z.emplaceBack(Lr+1,Lr+2,Lr+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(br[0]),Pe!==t.length-1&&Qr===t[Pe+1].sectionIndex||e.programConfigurations.populatePaintArrays(H.length,d,d.index,{},V,Ee&&Ee[Qr])}e.placedSymbolArray.emplaceBack(S.x,S.y,ae,this.glyphOffsetArray.length-ae,ye,A,R,S.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],x,0,!1,0,N)},Ci.prototype._addCollisionDebugVertex=function(e,t,i,u,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,u,p,Math.round(d.x),Math.round(d.y))},Ci.prototype.addCollisionDebugVertices=function(e,t,i,u,p,d,x){var S=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),A=S.vertexLength,R=p.layoutVertexArray,N=p.collisionVertexArray,V=x.anchorX,Z=x.anchorY;this._addCollisionDebugVertex(R,N,d,V,Z,new z(e,t)),this._addCollisionDebugVertex(R,N,d,V,Z,new z(i,t)),this._addCollisionDebugVertex(R,N,d,V,Z,new z(i,u)),this._addCollisionDebugVertex(R,N,d,V,Z,new z(e,u)),S.vertexLength+=4;var H=p.indexArray;H.emplaceBack(A,A+1),H.emplaceBack(A+1,A+2),H.emplaceBack(A+2,A+3),H.emplaceBack(A+3,A),S.primitiveLength+=4},Ci.prototype.addDebugCollisionBoxes=function(e,t,i,u){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,u?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Ci.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ac(qs,ff.members,wl),this.iconCollisionBox=new ac(qs,ff.members,wl);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Ci.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,u,p,d,x,S,A){for(var R={},N=t;N<i;N++){var V=e.get(N);R.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.textFeatureIndex=V.featureIndex;break}for(var Z=u;Z<p;Z++){var H=e.get(Z);R.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},R.verticalTextFeatureIndex=H.featureIndex;break}for(var ne=d;ne<x;ne++){var ae=e.get(ne);R.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},R.iconFeatureIndex=ae.featureIndex;break}for(var ye=S;ye<A;ye++){var ce=e.get(ye);R.verticalIconBox={x1:ce.x1,y1:ce.y1,x2:ce.x2,y2:ce.y2,anchorPointX:ce.anchorPointX,anchorPointY:ce.anchorPointY},R.verticalIconFeatureIndex=ce.featureIndex;break}return R},Ci.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Ci.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ci.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ci.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ci.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ci.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ci.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),u=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<u;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},Ci.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),u=[],p=[],d=[],x=0;x<this.symbolInstances.length;++x){d.push(x);var S=this.symbolInstances.get(x);u.push(0|Math.round(t*S.anchorX+i*S.anchorY)),p.push(S.featureIndex)}return d.sort(function(A,R){return u[A]-u[R]||p[R]-p[A]}),d},Ci.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Ci.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,u=this.symbolInstanceIndexes;i<u.length;i+=1){var p=this.symbolInstances.get(u[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,x,S){d>=0&&S.indexOf(d)===x&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},jt("SymbolBucket",Ci,{omit:["layers","collisionBoxArray","features","compareText"]}),Ci.MAX_GLYPHS=65535,Ci.addDynamicAttributes=hp;var Og=new Xn({"symbol-placement":new ir(K.layout_symbol["symbol-placement"]),"symbol-spacing":new ir(K.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ir(K.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Zt(K.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ir(K.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ir(K.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ir(K.layout_symbol["icon-ignore-placement"]),"icon-optional":new ir(K.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ir(K.layout_symbol["icon-rotation-alignment"]),"icon-size":new Zt(K.layout_symbol["icon-size"]),"icon-text-fit":new ir(K.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ir(K.layout_symbol["icon-text-fit-padding"]),"icon-image":new Zt(K.layout_symbol["icon-image"]),"icon-rotate":new Zt(K.layout_symbol["icon-rotate"]),"icon-padding":new ir(K.layout_symbol["icon-padding"]),"icon-keep-upright":new ir(K.layout_symbol["icon-keep-upright"]),"icon-offset":new Zt(K.layout_symbol["icon-offset"]),"icon-anchor":new Zt(K.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ir(K.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ir(K.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ir(K.layout_symbol["text-rotation-alignment"]),"text-field":new Zt(K.layout_symbol["text-field"]),"text-font":new Zt(K.layout_symbol["text-font"]),"text-size":new Zt(K.layout_symbol["text-size"]),"text-max-width":new Zt(K.layout_symbol["text-max-width"]),"text-line-height":new ir(K.layout_symbol["text-line-height"]),"text-letter-spacing":new Zt(K.layout_symbol["text-letter-spacing"]),"text-justify":new Zt(K.layout_symbol["text-justify"]),"text-radial-offset":new Zt(K.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ir(K.layout_symbol["text-variable-anchor"]),"text-anchor":new Zt(K.layout_symbol["text-anchor"]),"text-max-angle":new ir(K.layout_symbol["text-max-angle"]),"text-writing-mode":new ir(K.layout_symbol["text-writing-mode"]),"text-rotate":new Zt(K.layout_symbol["text-rotate"]),"text-padding":new ir(K.layout_symbol["text-padding"]),"text-keep-upright":new ir(K.layout_symbol["text-keep-upright"]),"text-transform":new Zt(K.layout_symbol["text-transform"]),"text-offset":new Zt(K.layout_symbol["text-offset"]),"text-allow-overlap":new ir(K.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ir(K.layout_symbol["text-ignore-placement"]),"text-optional":new ir(K.layout_symbol["text-optional"])}),pp={paint:new Xn({"icon-opacity":new Zt(K.paint_symbol["icon-opacity"]),"icon-color":new Zt(K.paint_symbol["icon-color"]),"icon-halo-color":new Zt(K.paint_symbol["icon-halo-color"]),"icon-halo-width":new Zt(K.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Zt(K.paint_symbol["icon-halo-blur"]),"icon-translate":new ir(K.paint_symbol["icon-translate"]),"icon-translate-anchor":new ir(K.paint_symbol["icon-translate-anchor"]),"text-opacity":new Zt(K.paint_symbol["text-opacity"]),"text-color":new Zt(K.paint_symbol["text-color"],{runtimeType:ht,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Zt(K.paint_symbol["text-halo-color"]),"text-halo-width":new Zt(K.paint_symbol["text-halo-width"]),"text-halo-blur":new Zt(K.paint_symbol["text-halo-blur"]),"text-translate":new ir(K.paint_symbol["text-translate"]),"text-translate-anchor":new ir(K.paint_symbol["text-translate-anchor"])}),layout:Og},pu=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:gt,this.defaultValue=e};pu.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},pu.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},pu.prototype.outputDefined=function(){return!1},pu.prototype.serialize=function(){return null},jt("FormatSectionOverride",pu,{omit:["defaultValue"]});var Fg=function(e){function t(i){e.call(this,i,pp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){if(e.prototype.recalculate.call(this,i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],x=0,S=p;x<S.length;x+=1){var A=S[x];d.indexOf(A)<0&&d.push(A)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,u,p,d){var x=this.layout.get(i).evaluate(u,{},p,d),S=this._unevaluatedLayout._values[i];return S.isDataDriven()||Vo(S.value)||!x?x:function(A,R){return R.replace(/{([^{}]+)}/g,function(N,V){return V in A?String(A[V]):""})}(u.properties,x)},t.prototype.createBucket=function(i){return new Ci(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,u=pp.paint.overridableProperties;i<u.length;i+=1){var p=u[i];if(t.hasPaintOverride(this.layout,p)){var d,x=this.paint.get(p),S=new pu(x),A=new Kn(S,x.property.specification);d=x.value.kind==="constant"||x.value.kind==="source"?new cs("source",A):new ko("composite",A,x.value.zoomStops,x.value._interpolationType),this.paint._values[p]=new ia(x.property,d,x.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,u){var p=i.get("text-field"),d=pp.paint.properties[u],x=!1,S=function(N){for(var V=0,Z=N;V<Z.length;V+=1)if(d.overrides&&d.overrides.hasOverride(Z[V]))return void(x=!0)};if(p.value.kind==="constant"&&p.value.value instanceof gi)S(p.value.value.sections);else if(p.value.kind==="source"){var A=function(N){x||(N instanceof Ui&&_i(N.value)===Kr?S(N.value.sections):N instanceof Sn?S(N.sections):N.eachChild(A))},R=p.value;R._styleExpression&&A(R._styleExpression.expression)}return x},t}(_o),Ng={paint:new Xn({"background-color":new ir(K.paint_background["background-color"]),"background-pattern":new na(K.paint_background["background-pattern"]),"background-opacity":new ir(K.paint_background["background-opacity"])})},Vg=function(e){function t(i){e.call(this,i,Ng)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(_o),Ug={paint:new Xn({"raster-opacity":new ir(K.paint_raster["raster-opacity"]),"raster-hue-rotate":new ir(K.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ir(K.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ir(K.paint_raster["raster-brightness-max"]),"raster-saturation":new ir(K.paint_raster["raster-saturation"]),"raster-contrast":new ir(K.paint_raster["raster-contrast"]),"raster-resampling":new ir(K.paint_raster["raster-resampling"]),"raster-fade-duration":new ir(K.paint_raster["raster-fade-duration"])})},jg=function(e){function t(i){e.call(this,i,Ug)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(_o),qg=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(_o),Zg={circle:Jh,heatmap:Ty,hillshade:zy,fill:Ky,"fill-extrusion":tg,line:sg,symbol:Fg,background:Vg,raster:jg},Bf=D.HTMLImageElement,Of=D.HTMLCanvasElement,Ff=D.HTMLVideoElement,Nf=D.ImageData,ih=D.ImageBitmap,Al=function(e,t,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,u)};Al.prototype.update=function(e,t,i){var u=e.width,p=e.height,d=!(this.size&&this.size[0]===u&&this.size[1]===p||i),x=this.context,S=x.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[u,p],e instanceof Bf||e instanceof Of||e instanceof Ff||e instanceof Nf||ih&&e instanceof ih?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,u,p,0,this.format,S.UNSIGNED_BYTE,e.data);else{var A=i||{x:0,y:0},R=A.x,N=A.y;e instanceof Bf||e instanceof Of||e instanceof Ff||e instanceof Nf||ih&&e instanceof ih?S.texSubImage2D(S.TEXTURE_2D,0,R,N,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,R,N,u,p,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Al.prototype.bind=function(e,t,i){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),i!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,t),this.wrap=t)},Al.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Al.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var fp=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};fp.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},fp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var fu=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Xt(["receive","process"],this),this.invoker=new fp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ve()?e:D};function Vf(e,t,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[e*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}fu.prototype.send=function(e,t,i,u,p){var d=this;p===void 0&&(p=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[x]=i);var S=zt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:e,hasCallback:!!i,targetMapId:u,mustQueue:p,sourceMapId:this.mapId,data:oo(t,S)},S),{cancel:function(){i&&delete d.callbacks[x],d.target.postMessage({id:x,type:"<cancel>",targetMapId:u,sourceMapId:d.mapId})}}},fu.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u()}else Ve()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},fu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},fu.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(t.error?u(ka(t.error)):u(null,ka(t.data)))}else{var p=!1,d=zt(this.globalScope)?void 0:[],x=t.hasCallback?function(N,V){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:N?oo(N):null,data:oo(V,d)},d)}:function(N){p=!0},S=null,A=ka(t.data);if(this.parent[t.type])S=this.parent[t.type](t.sourceMapId,A,x);else if(this.parent.getWorkerSource){var R=t.type.split(".");S=this.parent.getWorkerSource(t.sourceMapId,R[0],A.source)[R[1]](A,x)}else x(new Error("Could not find function "+t.type));!p&&S&&S.cancel&&(this.cancelCallbacks[e]=S.cancel)}},fu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Tn=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Tn.prototype.setNorthEast=function(e){return this._ne=e instanceof $i?new $i(e.lng,e.lat):$i.convert(e),this},Tn.prototype.setSouthWest=function(e){return this._sw=e instanceof $i?new $i(e.lng,e.lat):$i.convert(e),this},Tn.prototype.extend=function(e){var t,i,u=this._sw,p=this._ne;if(e instanceof $i)t=e,i=e;else{if(!(e instanceof Tn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Tn.convert(e)):this.extend($i.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return u||p?(u.lng=Math.min(t.lng,u.lng),u.lat=Math.min(t.lat,u.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new $i(t.lng,t.lat),this._ne=new $i(i.lng,i.lat)),this},Tn.prototype.getCenter=function(){return new $i((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Tn.prototype.getSouthWest=function(){return this._sw},Tn.prototype.getNorthEast=function(){return this._ne},Tn.prototype.getNorthWest=function(){return new $i(this.getWest(),this.getNorth())},Tn.prototype.getSouthEast=function(){return new $i(this.getEast(),this.getSouth())},Tn.prototype.getWest=function(){return this._sw.lng},Tn.prototype.getSouth=function(){return this._sw.lat},Tn.prototype.getEast=function(){return this._ne.lng},Tn.prototype.getNorth=function(){return this._ne.lat},Tn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Tn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Tn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Tn.prototype.contains=function(e){var t=$i.convert(e),i=t.lng,u=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&p},Tn.convert=function(e){return!e||e instanceof Tn?e:new Tn(e)};var $i=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};$i.prototype.wrap=function(){return new $i(ke(this.lng,-180,180),this.lat)},$i.prototype.toArray=function(){return[this.lng,this.lat]},$i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},$i.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,u=e.lat*t,p=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},$i.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Tn(new $i(this.lng-i,this.lat-t),new $i(this.lng+i,this.lat+t))},$i.convert=function(e){if(e instanceof $i)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new $i(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new $i(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Uf=2*Math.PI*63710088e-1;function jf(e){return Uf*Math.cos(e*Math.PI/180)}function qf(e){return(180+e)/360}function Zf(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Gf(e,t){return e/jf(t)}function dp(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var zl=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};zl.fromLngLat=function(e,t){t===void 0&&(t=0);var i=$i.convert(e);return new zl(qf(i.lng),Zf(i.lat),Gf(t,i.lat))},zl.prototype.toLngLat=function(){return new $i(360*this.x-180,dp(this.y))},zl.prototype.toAltitude=function(){return this.z*jf(dp(this.y))},zl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Uf*(e=dp(this.y),1/Math.cos(e*Math.PI/180));var e};var Pl=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=oc(0,e,e,t,i)};Pl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Pl.prototype.url=function(e,t){var i,u,p,d,x,S=(u=this.y,p=this.z,d=Vf(256*(i=this.x),256*(u=Math.pow(2,p)-u-1),p),x=Vf(256*(i+1),256*(u+1),p),d[0]+","+d[1]+","+x[0]+","+x[1]),A=function(R,N,V){for(var Z,H="",ne=R;ne>0;ne--)H+=(N&(Z=1<<ne-1)?1:0)+(V&Z?2:0);return H}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",A).replace("{bbox-epsg-3857}",S)},Pl.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new z(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Pl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Kf=function(e,t){this.wrap=e,this.canonical=t,this.key=oc(e,t.z,t.z,t.x,t.y)},An=function(e,t,i,u,p){this.overscaledZ=e,this.wrap=t,this.canonical=new Pl(i,+u,+p),this.key=oc(t,e,i,u,p)};function oc(e,t,i,u,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+u).toString(36)+i.toString(36)+t.toString(36)}An.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},An.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new An(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new An(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},An.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?oc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):oc(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},An.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},An.prototype.children=function(e){if(this.overscaledZ>=e)return[new An(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new An(t,this.wrap,t,i,u),new An(t,this.wrap,t,i+1,u),new An(t,this.wrap,t,i,u+1),new An(t,this.wrap,t,i+1,u+1)]},An.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},An.prototype.wrapped=function(){return new An(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},An.prototype.unwrapTo=function(e){return new An(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},An.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},An.prototype.toUnwrapped=function(){return new Kf(this.wrap,this.canonical)},An.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},An.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new zl(e.x-this.wrap,e.y))},jt("CanonicalTileID",Pl),jt("OverscaledTileID",An,{omit:["posMatrix"]});var ws=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return nt('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var u=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<u;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(u,p)]=this.data[this._idx(u-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,u)]=this.data[this._idx(p,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};ws.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),u=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[u],i[u+1],i[u+2])},ws.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ws.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},ws.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},ws.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},ws.prototype.getPixels=function(){return new Pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ws.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,x=i*this.dim+this.dim;switch(t){case-1:u=p-1;break;case 1:p=u+1}switch(i){case-1:d=x-1;break;case 1:x=d+1}for(var S=-t*this.dim,A=-i*this.dim,R=d;R<x;R++)for(var N=u;N<p;N++)this.data[this._idx(N,R)]=e.data[this._idx(N+S,R+A)]},jt("DEMData",ws);var nh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};nh.prototype.encode=function(e){return this._stringToNumber[e]},nh.prototype.decode=function(e){return this._numberToString[e]};var ah=function(e,t,i,u,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=u,this.properties=e.properties,this.id=p},mp={geometry:{configurable:!0}};mp.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},mp.geometry.set=function(e){this._geometry=e},ah.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(ah.prototype,mp);var du=function(){this.state={},this.stateChanges={},this.deletedStates={}};du.prototype.updateState=function(e,t,i){var u=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Ce(this.stateChanges[e][u],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==u&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var d in this.deletedStates[e][u]={},this.state[e][u])i[d]||(this.deletedStates[e][u][d]=null);else for(var x in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][x]===null&&delete this.deletedStates[e][u][x]},du.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var u=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},du.prototype.getState=function(e,t){var i=String(t),u=Ce({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete u[d]}return u},du.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},du.prototype.coalesceChanges=function(e,t){var i={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var p={};for(var d in this.stateChanges[u])this.state[u][d]||(this.state[u][d]={}),Ce(this.state[u][d],this.stateChanges[u][d]),p[d]=this.state[u][d];i[u]=p}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var S={};if(this.deletedStates[x]===null)for(var A in this.state[x])S[A]={},this.state[x][A]={};else for(var R in this.deletedStates[x]){if(this.deletedStates[x][R]===null)this.state[x][R]={};else for(var N=0,V=Object.keys(this.deletedStates[x][R]);N<V.length;N+=1)delete this.state[x][R][V[N]];S[R]=this.state[x][R]}i[x]=i[x]||{},Ce(i[x],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var Z in e)e[Z].setFeatureState(i,t)};var Es=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new To(8192,16,0),this.grid3D=new To(8192,16,0),this.featureIndexArray=new U,this.promoteId=t};function Hf(e,t,i,u,p){return pt(e,function(d,x){var S=t instanceof bl?t.get(x):null;return S&&S.evaluate?S.evaluate(i,u,p):S})}function Xf(e){for(var t=1/0,i=1/0,u=-1/0,p=-1/0,d=0,x=e;d<x.length;d+=1){var S=x[d];t=Math.min(t,S.x),i=Math.min(i,S.y),u=Math.max(u,S.x),p=Math.max(p,S.y)}return{minX:t,minY:i,maxX:u,maxY:p}}function Gg(e,t){return t-e}Es.prototype.insert=function(e,t,i,u,p,d){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,p);for(var S=d?this.grid3D:this.grid,A=0;A<t.length;A++){for(var R=t[A],N=[1/0,1/0,-1/0,-1/0],V=0;V<R.length;V++){var Z=R[V];N[0]=Math.min(N[0],Z.x),N[1]=Math.min(N[1],Z.y),N[2]=Math.max(N[2],Z.x),N[3]=Math.max(N[3],Z.y)}N[0]<8192&&N[1]<8192&&N[2]>=0&&N[3]>=0&&S.insert(x,N[0],N[1],N[2],N[3])}},Es.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new nu.VectorTile(new Hc(this.rawTileData)).layers,this.sourceLayerCoder=new nh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Es.prototype.query=function(e,t,i,u){var p=this;this.loadVTLayers();for(var d=e.params||{},x=8192/e.tileSize/e.scale,S=ps(d.filter),A=e.queryGeometry,R=e.queryPadding*x,N=Xf(A),V=this.grid.query(N.minX-R,N.minY-R,N.maxX+R,N.maxY+R),Z=Xf(e.cameraQueryGeometry),H=this.grid3D.query(Z.minX-R,Z.minY-R,Z.maxX+R,Z.maxY+R,function(Oe,Ne,Xe,ct){return function(Et,Qt,Pt,ar,Dt){for(var Zr=0,br=Et;Zr<br.length;Zr+=1){var Gt=br[Zr];if(Qt<=Gt.x&&Pt<=Gt.y&&ar>=Gt.x&&Dt>=Gt.y)return!0}var Qr=[new z(Qt,Pt),new z(Qt,Dt),new z(ar,Dt),new z(ar,Pt)];if(Et.length>2){for(var Lr=0,oi=Qr;Lr<oi.length;Lr+=1)if(bo(Et,oi[Lr]))return!0}for(var or=0;or<Et.length-1;or++)if(kl(Et[or],Et[or+1],Qr))return!0;return!1}(e.cameraQueryGeometry,Oe-R,Ne-R,Xe+R,ct+R)}),ne=0,ae=H;ne<ae.length;ne+=1)V.push(ae[ne]);V.sort(Gg);for(var ye,ce={},Ee=function(Oe){var Ne=V[Oe];if(Ne!==ye){ye=Ne;var Xe=p.featureIndexArray.get(Ne),ct=null;p.loadMatchingFeature(ce,Xe.bucketIndex,Xe.sourceLayerIndex,Xe.featureIndex,S,d.layers,d.availableImages,t,i,u,function(Et,Qt,Pt){return ct||(ct=an(Et)),Qt.queryIntersectsFeature(A,Et,Pt,ct,p.z,e.transform,x,e.pixelPosMatrix)})}},Pe=0;Pe<V.length;Pe++)Ee(Pe);return ce},Es.prototype.loadMatchingFeature=function(e,t,i,u,p,d,x,S,A,R,N){var V=this.bucketLayerIDs[t];if(!d||function(Et,Qt){for(var Pt=0;Pt<Et.length;Pt++)if(Qt.indexOf(Et[Pt])>=0)return!0;return!1}(d,V)){var Z=this.sourceLayerCoder.decode(i),H=this.vtLayers[Z].feature(u);if(p.needGeometry){var ne=mn(H,!0);if(!p.filter(new $r(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!p.filter(new $r(this.tileID.overscaledZ),H))return;for(var ae=this.getId(H,Z),ye=0;ye<V.length;ye++){var ce=V[ye];if(!(d&&d.indexOf(ce)<0)){var Ee=S[ce];if(Ee){var Pe={};ae!==void 0&&R&&(Pe=R.getState(Ee.sourceLayer||"_geojsonTileLayer",ae));var Oe=Ce({},A[ce]);Oe.paint=Hf(Oe.paint,Ee.paint,H,Pe,x),Oe.layout=Hf(Oe.layout,Ee.layout,H,Pe,x);var Ne=!N||N(H,Ee,Pe);if(Ne){var Xe=new ah(H,this.z,this.x,this.y,ae);Xe.layer=Oe;var ct=e[ce];ct===void 0&&(ct=e[ce]=[]),ct.push({featureIndex:u,feature:Xe,intersectionZ:Ne})}}}}}},Es.prototype.lookupSymbolFeatures=function(e,t,i,u,p,d,x,S){var A={};this.loadVTLayers();for(var R=ps(p),N=0,V=e;N<V.length;N+=1)this.loadMatchingFeature(A,i,u,V[N],R,d,x,S,t);return A},Es.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var u=0,p=i[t];u<p.length;u+=1)if(e===p[u])return!0;return!1},Es.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},jt("FeatureIndex",Es,{omit:["rawTileData","sourceLayerCoder"]});var jn=function(e,t){this.tileID=e,this.uid=at(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};jn.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Ut.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},jn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},jn.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(R,N){var V={};if(!N)return V;for(var Z=function(){var ae=ne[H],ye=ae.layerIds.map(function(Pe){return N.getLayer(Pe)}).filter(Boolean);if(ye.length!==0){ae.layers=ye,ae.stateDependentLayerIds&&(ae.stateDependentLayers=ae.stateDependentLayerIds.map(function(Pe){return ye.filter(function(Oe){return Oe.id===Pe})[0]}));for(var ce=0,Ee=ye;ce<Ee.length;ce+=1)V[Ee[ce].id]=ae}},H=0,ne=R;H<ne.length;H+=1)Z();return V}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[u];if(p instanceof Ci){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var x=this.buckets[d];if(x instanceof Ci&&x.hasRTLText){this.hasRTLText=!0,Ba.isLoading()||Ba.isLoaded()||qu()!=="deferred"||so();break}}for(var S in this.queryPadding=0,this.buckets){var A=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(S).queryRadius(A))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},jn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},jn.prototype.getBucket=function(e){return this.buckets[e.id]},jn.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Al(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Al(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},jn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},jn.prototype.queryRenderedFeatures=function(e,t,i,u,p,d,x,S,A,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:R,transform:S,params:x,queryPadding:this.queryPadding*A},e,t,i):{}},jn.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var u=i.loadVTLayers(),p=t?t.sourceLayer:"",d=u._geojsonTileLayer||u[p];if(d)for(var x=ps(t&&t.filter),S=this.tileID.canonical,A=S.z,R=S.x,N=S.y,V={z:A,x:R,y:N},Z=0;Z<d.length;Z++){var H=d.feature(Z);if(x.needGeometry){var ne=mn(H,!0);if(!x.filter(new $r(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!x.filter(new $r(this.tileID.overscaledZ),H))continue;var ae=i.getId(H,p),ye=new ah(H,A,R,N,ae);ye.tile=V,e.push(ye)}}},jn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},jn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},jn.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=st(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),p=!1;if(this.expirationTime>u)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=u+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},jn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},jn.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(t.style.hasLayer(u)){var p=this.buckets[u],d=p.layers[0].sourceLayer||"_geojsonTileLayer",x=i[d],S=e[d];if(x&&S&&Object.keys(S).length!==0){p.update(S,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var A=t&&t.style&&t.style.getLayer(u);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(p)))}}}},jn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},jn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ut.now()},jn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},jn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Ut.now()+e},jn.prototype.setDependencies=function(e,t){for(var i={},u=0,p=t;u<p.length;u+=1)i[p[u]]=!0;this.dependencies[e]=i},jn.prototype.hasDependency=function(e,t){for(var i=0,u=e;i<u.length;i+=1){var p=this.dependencies[u[i]];if(p){for(var d=0,x=t;d<x.length;d+=1)if(p[x[d]])return!0}}return!1};var Xs=D.performance,Wf=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Xs.mark(this._marks.start)};Wf.prototype.finish=function(){Xs.mark(this._marks.end);var e=Xs.getEntriesByName(this._marks.measure);return e.length===0&&(Xs.measure(this._marks.measure,this._marks.start,this._marks.end),e=Xs.getEntriesByName(this._marks.measure),Xs.clearMarks(this._marks.start),Xs.clearMarks(this._marks.end),Xs.clearMeasures(this._marks.measure)),e},a.Actor=fu,a.AlphaImage=Tl,a.CanonicalTileID=Pl,a.CollisionBoxArray=s,a.Color=Ft,a.DEMData=ws,a.DataConstantProperty=ir,a.DictionaryCoder=nh,a.EXTENT=8192,a.ErrorEvent=ue,a.EvaluationParameters=$r,a.Event=te,a.Evented=ge,a.FeatureIndex=Es,a.FillBucket=Co,a.FillExtrusionBucket=Mo,a.ImageAtlas=nc,a.ImagePosition=Wc,a.LineBucket=ya,a.LngLat=$i,a.LngLatBounds=Tn,a.MercatorCoordinate=zl,a.ONE_EM=24,a.OverscaledTileID=An,a.Point=z,a.Point$1=z,a.Properties=Xn,a.Protobuf=Hc,a.RGBAImage=Pa,a.RequestManager=yr,a.RequestPerformance=Wf,a.ResourceType=Sr,a.SegmentVector=$,a.SourceFeatureState=du,a.StructArrayLayout1ui2=Wu,a.StructArrayLayout2f1f2i16=_s,a.StructArrayLayout2i4=gs,a.StructArrayLayout3ui6=Go,a.StructArrayLayout4i8=Gu,a.SymbolBucket=Ci,a.Texture=Al,a.Tile=jn,a.Transitionable=Hn,a.Uniform1f=_t,a.Uniform1i=tt,a.Uniform2f=dt,a.Uniform3f=Ot,a.Uniform4f=nr,a.UniformColor=ur,a.UniformMatrix4f=ci,a.UnwrappedTileID=Kf,a.ValidationError=re,a.WritingMode=Ya,a.ZoomHistory=Nu,a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},a.addDynamicAttributes=hp,a.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var u=e.length,p=new Array(e.length),d=null;e.forEach(function(x,S){t(x,function(A,R){A&&(d=A),p[S]=R,--u==0&&i(d,p)})})},a.bezier=se,a.bindAll=Xt,a.browser=Ut,a.cacheEntryPossiblyAdded=function(e){++Cr>Gr&&(e.getActor().send("enforceCacheSizeLimit",Er),Cr=0)},a.clamp=_e,a.clearTileCache=function(e){var t=D.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},a.clipLine=Pf,a.clone=function(e){var t=new vi(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.clone$1=Ie,a.clone$2=function(e){var t=new vi(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.collisionCircleLayout=hg,a.config=At,a.create=function(){var e=new vi(16);return vi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},a.create$1=function(){var e=new vi(9);return vi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},a.create$2=function(){var e=new vi(4);return vi!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},a.createCommonjsModule=I,a.createExpression=Uo,a.createLayout=Vn,a.createStyleLayer=function(e){return e.type==="custom"?new qg(e):new Zg[e.type](e)},a.cross=function(e,t,i){var u=t[0],p=t[1],d=t[2],x=i[0],S=i[1],A=i[2];return e[0]=p*A-d*S,e[1]=d*x-u*A,e[2]=u*S-p*x,e},a.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],i[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.ease=Te,a.emitValidationErrors=gl,a.endsWith=yt,a.enforceCacheSizeLimit=function(e){Xr(),We&&We.then(function(t){t.keys().then(function(i){for(var u=0;u<i.length-e;u++)t.delete(i[u])})})},a.evaluateSizeForFeature=Sf,a.evaluateSizeForZoom=kf,a.evaluateVariableOffset=Df,a.evented=ju,a.extend=Ce,a.featureFilter=ps,a.filterObject=lt,a.fromRotation=function(e,t){var i=Math.sin(t),u=Math.cos(t);return e[0]=u,e[1]=i,e[2]=0,e[3]=-i,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.getAnchorAlignment=sp,a.getAnchorJustification=cp,a.getArrayBuffer=Mr,a.getImage=j,a.getJSON=function(e,t){return pi(Ce(e,{type:"json"}),t)},a.getRTLTextPluginStatus=qu,a.getReferrer=Yr,a.getVideo=function(e,t){var i,u,p=D.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var x=D.document.createElement("source");i=e[d],u=void 0,(u=D.document.createElement("a")).href=i,(u.protocol!==D.document.location.protocol||u.host!==D.document.location.host)&&(p.crossOrigin="Anonymous"),x.src=e[d],p.appendChild(x)}return{cancel:function(){}}},a.identity=Oa,a.invert=function(e,t){var i=t[0],u=t[1],p=t[2],d=t[3],x=t[4],S=t[5],A=t[6],R=t[7],N=t[8],V=t[9],Z=t[10],H=t[11],ne=t[12],ae=t[13],ye=t[14],ce=t[15],Ee=i*S-u*x,Pe=i*A-p*x,Oe=i*R-d*x,Ne=u*A-p*S,Xe=u*R-d*S,ct=p*R-d*A,Et=N*ae-V*ne,Qt=N*ye-Z*ne,Pt=N*ce-H*ne,ar=V*ye-Z*ae,Dt=V*ce-H*ae,Zr=Z*ce-H*ye,br=Ee*Zr-Pe*Dt+Oe*ar+Ne*Pt-Xe*Qt+ct*Et;return br?(e[0]=(S*Zr-A*Dt+R*ar)*(br=1/br),e[1]=(p*Dt-u*Zr-d*ar)*br,e[2]=(ae*ct-ye*Xe+ce*Ne)*br,e[3]=(Z*Xe-V*ct-H*Ne)*br,e[4]=(A*Pt-x*Zr-R*Qt)*br,e[5]=(i*Zr-p*Pt+d*Qt)*br,e[6]=(ye*Oe-ne*ct-ce*Pe)*br,e[7]=(N*ct-Z*Oe+H*Pe)*br,e[8]=(x*Dt-S*Pt+R*Et)*br,e[9]=(u*Pt-i*Dt-d*Et)*br,e[10]=(ne*Xe-ae*Oe+ce*Ee)*br,e[11]=(V*Oe-N*Xe-H*Ee)*br,e[12]=(S*Qt-x*ar-A*Et)*br,e[13]=(i*ar-u*Qt+p*Et)*br,e[14]=(ae*Pe-ne*Ne-ye*Ee)*br,e[15]=(N*Ne-V*Pe+Z*Ee)*br,e):null},a.isChar=Tt,a.isMapboxURL=bt,a.keysDifference=function(e,t){var i=[];for(var u in e)u in t||i.push(u);return i},a.makeRequest=pi,a.mapObject=pt,a.mercatorXfromLng=qf,a.mercatorYfromLat=Zf,a.mercatorZfromAltitude=Gf,a.mul=Wh,a.multiply=ma,a.mvt=nu,a.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},a.normalize=function(e,t){var i=t[0],u=t[1],p=t[2],d=i*i+u*u+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},a.number=di,a.offscreenCanvasSupported=qr,a.ortho=function(e,t,i,u,p,d,x){var S=1/(t-i),A=1/(u-p),R=1/(d-x);return e[0]=-2*S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*R,e[11]=0,e[12]=(t+i)*S,e[13]=(p+u)*A,e[14]=(x+d)*R,e[15]=1,e},a.parseGlyphPBF=function(e){return new Hc(e).readFields(wg,[])},a.pbf=Hc,a.performSymbolLayout=function(e,t,i,u,p,d,x){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var S=e.layers[0].layout,A=e.layers[0]._unevaluatedLayout._values,R={};if(e.textSizeData.kind==="composite"){var N=e.textSizeData,V=N.maxZoom;R.compositeTextSizes=[A["text-size"].possiblyEvaluate(new $r(N.minZoom),x),A["text-size"].possiblyEvaluate(new $r(V),x)]}if(e.iconSizeData.kind==="composite"){var Z=e.iconSizeData,H=Z.maxZoom;R.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new $r(Z.minZoom),x),A["icon-size"].possiblyEvaluate(new $r(H),x)]}R.layoutTextSize=A["text-size"].possiblyEvaluate(new $r(e.zoom+1),x),R.layoutIconSize=A["icon-size"].possiblyEvaluate(new $r(e.zoom+1),x),R.textMaxSize=A["text-size"].possiblyEvaluate(new $r(18));for(var ne=24*S.get("text-line-height"),ae=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",ye=S.get("text-keep-upright"),ce=S.get("text-size"),Ee=function(){var Ne=Oe[Pe],Xe=S.get("text-font").evaluate(Ne,{},x).join(","),ct=ce.evaluate(Ne,{},x),Et=R.layoutTextSize.evaluate(Ne,{},x),Qt=R.layoutIconSize.evaluate(Ne,{},x),Pt={horizontal:{},vertical:void 0},ar=Ne.text,Dt=[0,0];if(ar){var Zr=ar.toString(),br=24*S.get("text-letter-spacing").evaluate(Ne,{},x),Gt=function(ti){for(var Mi=0,Ii=ti;Mi<Ii.length;Mi+=1)if(hi=Ii[Mi].charCodeAt(0),Tt.Arabic(hi)||Tt["Arabic Supplement"](hi)||Tt["Arabic Extended-A"](hi)||Tt["Arabic Presentation Forms-A"](hi)||Tt["Arabic Presentation Forms-B"](hi))return!1;var hi;return!0}(Zr)?br:0,Qr=S.get("text-anchor").evaluate(Ne,{},x),Lr=S.get("text-variable-anchor");if(!Lr){var oi=S.get("text-radial-offset").evaluate(Ne,{},x);Dt=oi?Df(Qr,[24*oi,up]):S.get("text-offset").evaluate(Ne,{},x).map(function(ti){return 24*ti})}var or=ae?"center":S.get("text-justify").evaluate(Ne,{},x),mi=S.get("symbol-placement"),en=mi==="point"?24*S.get("text-max-width").evaluate(Ne,{},x):0,ln=function(){e.allowVerticalPlacement&&Vu(Zr)&&(Pt.vertical=Jc(ar,t,i,p,Xe,en,ne,Qr,"left",Gt,Dt,Ya.vertical,!0,mi,Et,ct))};if(!ae&&Lr){for(var on=or==="auto"?Lr.map(function(ti){return cp(ti)}):[or],tn=!1,un=0;un<on.length;un++){var Dn=on[un];if(!Pt.horizontal[Dn])if(tn)Pt.horizontal[Dn]=Pt.horizontal[0];else{var Ln=Jc(ar,t,i,p,Xe,en,ne,"center",Dn,Gt,Dt,Ya.horizontal,!1,mi,Et,ct);Ln&&(Pt.horizontal[Dn]=Ln,tn=Ln.positionedLines.length===1)}}ln()}else{or==="auto"&&(or=cp(Qr));var sa=Jc(ar,t,i,p,Xe,en,ne,Qr,or,Gt,Dt,Ya.horizontal,!1,mi,Et,ct);sa&&(Pt.horizontal[or]=sa),ln(),Vu(Zr)&&ae&&ye&&(Pt.vertical=Jc(ar,t,i,p,Xe,en,ne,Qr,or,Gt,Dt,Ya.vertical,!1,mi,Et,ct))}}var qn=void 0,la=!1;if(Ne.icon&&Ne.icon.name){var yn=u[Ne.icon.name];yn&&(qn=function(ti,Mi,Ii){var hi=sp(Ii),ga=Mi[0]-ti.displaySize[0]*hi.horizontalAlign,$n=Mi[1]-ti.displaySize[1]*hi.verticalAlign;return{image:ti,top:$n,bottom:$n+ti.displaySize[1],left:ga,right:ga+ti.displaySize[0]}}(p[Ne.icon.name],S.get("icon-offset").evaluate(Ne,{},x),S.get("icon-anchor").evaluate(Ne,{},x)),la=yn.sdf,e.sdfIcons===void 0?e.sdfIcons=yn.sdf:e.sdfIcons!==yn.sdf&&nt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(yn.pixelRatio!==e.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Zn=Rf(Pt.horizontal)||Pt.vertical;e.iconsInText=!!Zn&&Zn.iconsInText,(Zn||qn)&&function(ti,Mi,Ii,hi,ga,$n,Hi,En,ea,yi,Yo){var Qa=$n.textMaxSize.evaluate(Mi,{});Qa===void 0&&(Qa=Hi);var Qo,gn=ti.layers[0].layout,$o=gn.get("icon-offset").evaluate(Mi,{},Yo),wo=Rf(Ii.horizontal),mu=Hi/24,Cl=ti.tilePixelRatio*mu,yu=ti.tilePixelRatio*Qa/24,Ss=ti.tilePixelRatio*En,gu=ti.tilePixelRatio*gn.get("symbol-spacing"),oh=gn.get("text-padding")*ti.tilePixelRatio,_u=gn.get("icon-padding")*ti.tilePixelRatio,sc=gn.get("text-max-angle")/180*Math.PI,sh=gn.get("text-rotation-alignment")==="map"&&gn.get("symbol-placement")!=="point",lh=gn.get("icon-rotation-alignment")==="map"&&gn.get("symbol-placement")!=="point",ks=gn.get("symbol-placement"),lc=gu/2,vu=gn.get("icon-text-fit");hi&&vu!=="none"&&(ti.allowVerticalPlacement&&Ii.vertical&&(Qo=Ef(hi,Ii.vertical,vu,gn.get("icon-text-fit-padding"),$o,mu)),wo&&(hi=Ef(hi,wo,vu,gn.get("icon-text-fit-padding"),$o,mu)));var Ws=function(Kg,yc){yc.x<0||yc.x>=8192||yc.y<0||yc.y>=8192||function(_n,Do,Hg,Js,vp,Qf,dh,es,mh,gc,yh,gh,bp,$f,_c,ed,td,rd,id,nd,$a,_h,ad,ts,Xg){var od,Dl,Su,ku,Iu,Tu=_n.addToLineVertexArray(Do,Hg),sd=0,ld=0,ud=0,cd=0,xp=-1,wp=-1,Is={},hd=ie(""),Ep=0,Sp=0;if(es._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ep=(od=es.layout.get("text-offset").evaluate($a,{},ts).map(function(bc){return 24*bc}))[0],Sp=od[1]):(Ep=24*es.layout.get("text-radial-offset").evaluate($a,{},ts),Sp=up),_n.allowVerticalPlacement&&Js.vertical){var pd=es.layout.get("text-rotate").evaluate($a,{},ts)+90;ku=new th(mh,Do,gc,yh,gh,Js.vertical,bp,$f,_c,pd),dh&&(Iu=new th(mh,Do,gc,yh,gh,dh,td,rd,_c,pd))}if(vp){var kp=es.layout.get("icon-rotate").evaluate($a,{}),fd=es.layout.get("icon-text-fit")!=="none",dd=Cf(vp,kp,ad,fd),Ip=dh?Cf(dh,kp,ad,fd):void 0;Su=new th(mh,Do,gc,yh,gh,vp,td,rd,!1,kp),sd=4*dd.length;var md=_n.iconSizeData,vc=null;md.kind==="source"?(vc=[128*es.layout.get("icon-size").evaluate($a,{})])[0]>32640&&nt(_n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):md.kind==="composite"&&((vc=[128*_h.compositeIconSizes[0].evaluate($a,{},ts),128*_h.compositeIconSizes[1].evaluate($a,{},ts)])[0]>32640||vc[1]>32640)&&nt(_n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),_n.addSymbols(_n.icon,dd,vc,nd,id,$a,!1,Do,Tu.lineStartIndex,Tu.lineLength,-1,ts),xp=_n.icon.placedSymbolArray.length-1,Ip&&(ld=4*Ip.length,_n.addSymbols(_n.icon,Ip,vc,nd,id,$a,Ya.vertical,Do,Tu.lineStartIndex,Tu.lineLength,-1,ts),wp=_n.icon.placedSymbolArray.length-1)}for(var yd in Js.horizontal){var vh=Js.horizontal[yd];if(!Dl){hd=ie(vh.text);var Wg=es.layout.get("text-rotate").evaluate($a,{},ts);Dl=new th(mh,Do,gc,yh,gh,vh,bp,$f,_c,Wg)}var gd=vh.positionedLines.length===1;if(ud+=Lf(_n,Do,vh,Qf,es,_c,$a,ed,Tu,Js.vertical?Ya.horizontal:Ya.horizontalOnly,gd?Object.keys(Js.horizontal):[yd],Is,xp,_h,ts),gd)break}Js.vertical&&(cd+=Lf(_n,Do,Js.vertical,Qf,es,_c,$a,ed,Tu,Ya.vertical,["vertical"],Is,wp,_h,ts));var Jg=Dl?Dl.boxStartIndex:_n.collisionBoxArray.length,Yg=Dl?Dl.boxEndIndex:_n.collisionBoxArray.length,Qg=ku?ku.boxStartIndex:_n.collisionBoxArray.length,$g=ku?ku.boxEndIndex:_n.collisionBoxArray.length,e_=Su?Su.boxStartIndex:_n.collisionBoxArray.length,t_=Su?Su.boxEndIndex:_n.collisionBoxArray.length,r_=Iu?Iu.boxStartIndex:_n.collisionBoxArray.length,i_=Iu?Iu.boxEndIndex:_n.collisionBoxArray.length,rs=-1,bh=function(bc,vd){return bc&&bc.circleDiameter?Math.max(bc.circleDiameter,vd):vd};rs=bh(Dl,rs),rs=bh(ku,rs),rs=bh(Su,rs);var _d=(rs=bh(Iu,rs))>-1?1:0;_d&&(rs*=Xg/24),_n.glyphOffsetArray.length>=Ci.MAX_GLYPHS&&nt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$a.sortKey!==void 0&&_n.addToSortKeyRanges(_n.symbolInstances.length,$a.sortKey),_n.symbolInstances.emplaceBack(Do.x,Do.y,Is.right>=0?Is.right:-1,Is.center>=0?Is.center:-1,Is.left>=0?Is.left:-1,Is.vertical||-1,xp,wp,hd,Jg,Yg,Qg,$g,e_,t_,r_,i_,gc,ud,cd,sd,ld,_d,0,bp,Ep,Sp,rs)}(ti,yc,Kg,Ii,hi,ga,Qo,ti.layers[0],ti.collisionBoxArray,Mi.index,Mi.sourceLayerIndex,ti.index,Cl,oh,sh,ea,Ss,_u,lh,$o,Mi,$n,yi,Yo,Hi)};if(ks==="line")for(var bu=0,uh=Pf(Mi.geometry,0,0,8192,8192);bu<uh.length;bu+=1)for(var ch=uh[bu],uc=0,cc=zg(ch,gu,sc,Ii.vertical||wo,hi,24,yu,ti.overscaling,8192);uc<cc.length;uc+=1){var hh=cc[uc];wo&&Dg(ti,wo.text,lc,hh)||Ws(ch,hh)}else if(ks==="line-center")for(var hc=0,pc=Mi.geometry;hc<pc.length;hc+=1){var fc=pc[hc];if(fc.length>1){var ph=Ag(fc,sc,Ii.vertical||wo,hi,24,yu);ph&&Ws(fc,ph)}}else if(Mi.type==="Polygon")for(var xu=0,fh=rp(Mi.geometry,0);xu<fh.length;xu+=1){var wu=fh[xu],dc=Cg(wu,16);Ws(wu[0],new lu(dc.x,dc.y,0))}else if(Mi.type==="LineString")for(var Ml=0,mc=Mi.geometry;Ml<mc.length;Ml+=1){var Eu=mc[Ml];Ws(Eu,new lu(Eu[0].x,Eu[0].y,0))}else if(Mi.type==="Point")for(var yp=0,Jf=Mi.geometry;yp<Jf.length;yp+=1)for(var gp=0,Yf=Jf[yp];gp<Yf.length;gp+=1){var _p=Yf[gp];Ws([_p],new lu(_p.x,_p.y,0))}}(e,Ne,Pt,qn,u,R,Et,Qt,Dt,la,x)},Pe=0,Oe=e.features;Pe<Oe.length;Pe+=1)Ee();d&&e.generateCollisionDebugBuffers()},a.perspective=function(e,t,i,u,p){var d,x=1/Math.tan(t/2);return e[0]=x/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+u)*(d=1/(u-p)),e[14]=2*p*u*d):(e[10]=-1,e[14]=-2*u),e},a.pick=function(e,t){for(var i={},u=0;u<t.length;u++){var p=t[u];p in e&&(i[p]=e[p])}return i},a.plugin=Ba,a.polygonIntersectsPolygon=Xo,a.postMapLoadEvent=Yt,a.postTurnstileEvent=Dr,a.potpack=vf,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=jt,a.registerForPluginStateChange=function(e){return e({pluginStatus:Ta,pluginURL:Ao}),ju.on("pluginStateChange",e),e},a.renderColorRamp=$p,a.rotate=function(e,t,i){var u=t[0],p=t[1],d=t[2],x=t[3],S=Math.sin(i),A=Math.cos(i);return e[0]=u*A+d*S,e[1]=p*A+x*S,e[2]=u*-S+d*A,e[3]=p*-S+x*A,e},a.rotateX=function(e,t,i){var u=Math.sin(i),p=Math.cos(i),d=t[4],x=t[5],S=t[6],A=t[7],R=t[8],N=t[9],V=t[10],Z=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+R*u,e[5]=x*p+N*u,e[6]=S*p+V*u,e[7]=A*p+Z*u,e[8]=R*p-d*u,e[9]=N*p-x*u,e[10]=V*p-S*u,e[11]=Z*p-A*u,e},a.rotateZ=function(e,t,i){var u=Math.sin(i),p=Math.cos(i),d=t[0],x=t[1],S=t[2],A=t[3],R=t[4],N=t[5],V=t[6],Z=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+R*u,e[1]=x*p+N*u,e[2]=S*p+V*u,e[3]=A*p+Z*u,e[4]=R*p-d*u,e[5]=N*p-x*u,e[6]=V*p-S*u,e[7]=Z*p-A*u,e},a.scale=function(e,t,i){var u=i[0],p=i[1],d=i[2];return e[0]=t[0]*u,e[1]=t[1]*u,e[2]=t[2]*u,e[3]=t[3]*u,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},a.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},a.setCacheLimits=function(e,t){Er=e,Gr=t},a.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),Ta==="deferred"||Ta==="loading"||Ta==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ao=Ut.resolveURL(e),Ta="deferred",Xl=t,vl(),i||so()},a.sphericalToCartesian=function(e){var t=e[0],i=e[1],u=e[2];return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(u),y:t*Math.sin(i)*Math.sin(u),z:t*Math.cos(u)}},a.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},a.styleSpec=K,a.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},a.symbolSize=Tg,a.transformMat3=function(e,t,i){var u=t[0],p=t[1],d=t[2];return e[0]=u*i[0]+p*i[3]+d*i[6],e[1]=u*i[1]+p*i[4]+d*i[7],e[2]=u*i[2]+p*i[5]+d*i[8],e},a.transformMat4=eu,a.translate=function(e,t,i){var u,p,d,x,S,A,R,N,V,Z,H,ne,ae=i[0],ye=i[1],ce=i[2];return t===e?(e[12]=t[0]*ae+t[4]*ye+t[8]*ce+t[12],e[13]=t[1]*ae+t[5]*ye+t[9]*ce+t[13],e[14]=t[2]*ae+t[6]*ye+t[10]*ce+t[14],e[15]=t[3]*ae+t[7]*ye+t[11]*ce+t[15]):(p=t[1],d=t[2],x=t[3],S=t[4],A=t[5],R=t[6],N=t[7],V=t[8],Z=t[9],H=t[10],ne=t[11],e[0]=u=t[0],e[1]=p,e[2]=d,e[3]=x,e[4]=S,e[5]=A,e[6]=R,e[7]=N,e[8]=V,e[9]=Z,e[10]=H,e[11]=ne,e[12]=u*ae+S*ye+V*ce+t[12],e[13]=p*ae+A*ye+Z*ce+t[13],e[14]=d*ae+R*ye+H*ce+t[14],e[15]=x*ae+N*ye+ne*ce+t[15]),e},a.triggerPluginCompletionEvent=Vc,a.uniqueId=at,a.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},a.validateLight=Hh,a.validateStyle=ml,a.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},a.vectorTile=nu,a.version="1.13.2",a.warnOnce=nt,a.webpSupported=Kt,a.window=D,a.wrap=ke}),v(["./shared"],function(a){function I(F){var j=typeof F;if(j==="number"||j==="boolean"||j==="string"||F==null)return JSON.stringify(F);if(Array.isArray(F)){for(var G="[",Y=0,te=F;Y<te.length;Y+=1)G+=I(te[Y])+",";return G+"]"}for(var ue=Object.keys(F).sort(),ge="{",K=0;K<ue.length;K++)ge+=JSON.stringify(ue[K])+":"+I(F[ue[K]])+",";return ge+"}"}function k(F){for(var j="",G=0,Y=a.refProperties;G<Y.length;G+=1)j+="/"+I(F[Y[G]]);return j}var C=function(F){this.keyCache={},F&&this.replace(F)};C.prototype.replace=function(F){this._layerConfigs={},this._layers={},this.update(F,[])},C.prototype.update=function(F,j){for(var G=this,Y=0,te=F;Y<te.length;Y+=1){var ue=te[Y];this._layerConfigs[ue.id]=ue;var ge=this._layers[ue.id]=a.createStyleLayer(ue);ge._featureFilter=a.featureFilter(ge.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(var K=0,re=j;K<re.length;K+=1){var we=re[K];delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we]}this.familiesBySource={};for(var Ze=0,Je=function(ot,ht){for(var $t={},ut=0;ut<ot.length;ut++){var mr=ht&&ht[ot[ut].id]||k(ot[ut]);ht&&(ht[ot[ut].id]=mr);var Kr=$t[mr];Kr||(Kr=$t[mr]=[]),Kr.push(ot[ut])}var er=[];for(var et in $t)er.push($t[et]);return er}(a.values(this._layerConfigs),this.keyCache);Ze<Je.length;Ze+=1){var ze=Je[Ze].map(function(ot){return G._layers[ot.id]}),He=ze[0];if(He.visibility!=="none"){var St=He.source||"",gt=this.familiesBySource[St];gt||(gt=this.familiesBySource[St]={});var Le=He.sourceLayer||"_geojsonTileLayer",ft=gt[Le];ft||(ft=gt[Le]=[]),ft.push(ze)}}};var z=function(F){var j={},G=[];for(var Y in F){var te=F[Y],ue=j[Y]={};for(var ge in te){var K=te[+ge];if(K&&K.bitmap.width!==0&&K.bitmap.height!==0){var re={x:0,y:0,w:K.bitmap.width+2,h:K.bitmap.height+2};G.push(re),ue[ge]={rect:re,metrics:K.metrics}}}}var we=a.potpack(G),Ze=new a.AlphaImage({width:we.w||1,height:we.h||1});for(var Je in F){var ze=F[Je];for(var He in ze){var St=ze[+He];if(St&&St.bitmap.width!==0&&St.bitmap.height!==0){var gt=j[Je][He].rect;a.AlphaImage.copy(St.bitmap,Ze,{x:0,y:0},{x:gt.x+1,y:gt.y+1},St.bitmap)}}}this.image=Ze,this.positions=j};a.register("GlyphAtlas",z);var O=function(F){this.tileID=new a.OverscaledTileID(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId};function D(F,j,G){for(var Y=new a.EvaluationParameters(j),te=0,ue=F;te<ue.length;te+=1)ue[te].recalculate(Y,G)}function q(F,j){var G=a.getArrayBuffer(F.request,function(Y,te,ue,ge){Y?j(Y):te&&j(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(te)),rawData:te,cacheControl:ue,expires:ge})});return function(){G.cancel(),j()}}O.prototype.parse=function(F,j,G,Y,te){var ue=this;this.status="parsing",this.data=F,this.collisionBoxArray=new a.CollisionBoxArray;var ge=new a.DictionaryCoder(Object.keys(F.layers).sort()),K=new a.FeatureIndex(this.tileID,this.promoteId);K.bucketLayerIDs=[];var re,we,Ze,Je,ze={},He={featureIndex:K,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:G},St=j.familiesBySource[this.source];for(var gt in St){var Le=F.layers[gt];if(Le){Le.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+gt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ft=ge.encode(gt),ot=[],ht=0;ht<Le.length;ht++){var $t=Le.feature(ht),ut=K.getId($t,gt);ot.push({feature:$t,id:ut,index:ht,sourceLayerIndex:ft})}for(var mr=0,Kr=St[gt];mr<Kr.length;mr+=1){var er=Kr[mr],et=er[0];et.minzoom&&this.zoom<Math.floor(et.minzoom)||et.maxzoom&&this.zoom>=et.maxzoom||et.visibility!=="none"&&(D(er,this.zoom,G),(ze[et.id]=et.createBucket({index:K.bucketLayerIDs.length,layers:er,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ft,sourceID:this.source})).populate(ot,He,this.tileID.canonical),K.bucketLayerIDs.push(er.map(function(Ar){return Ar.id})))}}}var Nt=a.mapObject(He.glyphDependencies,function(Ar){return Object.keys(Ar).map(Number)});Object.keys(Nt).length?Y.send("getGlyphs",{uid:this.uid,stacks:Nt},function(Ar,pr){re||(re=Ar,we=pr,xr.call(ue))}):we={};var li=Object.keys(He.iconDependencies);li.length?Y.send("getImages",{icons:li,source:this.source,tileID:this.tileID,type:"icons"},function(Ar,pr){re||(re=Ar,Ze=pr,xr.call(ue))}):Ze={};var Ir=Object.keys(He.patternDependencies);function xr(){if(re)return te(re);if(we&&Ze&&Je){var Ar=new z(we),pr=new a.ImageAtlas(Ze,Je);for(var Ft in ze){var Wi=ze[Ft];Wi instanceof a.SymbolBucket?(D(Wi.layers,this.zoom,G),a.performSymbolLayout(Wi,we,Ar.positions,Ze,pr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Wi.hasPattern&&(Wi instanceof a.LineBucket||Wi instanceof a.FillBucket||Wi instanceof a.FillExtrusionBucket)&&(D(Wi.layers,this.zoom,G),Wi.addFeatures(He,this.tileID.canonical,pr.patternPositions))}this.status="done",te(null,{buckets:a.values(ze).filter(function(Gn){return!Gn.isEmpty()}),featureIndex:K,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ar.image,imageAtlas:pr,glyphMap:this.returnDependencies?we:null,iconMap:this.returnDependencies?Ze:null,glyphPositions:this.returnDependencies?Ar.positions:null})}}Ir.length?Y.send("getImages",{icons:Ir,source:this.source,tileID:this.tileID,type:"patterns"},function(Ar,pr){re||(re=Ar,Je=pr,xr.call(ue))}):Je={},xr.call(this)};var se=function(F,j,G,Y){this.actor=F,this.layerIndex=j,this.availableImages=G,this.loadVectorData=Y||q,this.loading={},this.loaded={}};se.prototype.loadTile=function(F,j){var G=this,Y=F.uid;this.loading||(this.loading={});var te=!!(F&&F.request&&F.request.collectResourceTiming)&&new a.RequestPerformance(F.request),ue=this.loading[Y]=new O(F);ue.abort=this.loadVectorData(F,function(ge,K){if(delete G.loading[Y],ge||!K)return ue.status="done",G.loaded[Y]=ue,j(ge);var re=K.rawData,we={};K.expires&&(we.expires=K.expires),K.cacheControl&&(we.cacheControl=K.cacheControl);var Ze={};if(te){var Je=te.finish();Je&&(Ze.resourceTiming=JSON.parse(JSON.stringify(Je)))}ue.vectorTile=K.vectorTile,ue.parse(K.vectorTile,G.layerIndex,G.availableImages,G.actor,function(ze,He){if(ze||!He)return j(ze);j(null,a.extend({rawTileData:re.slice(0)},He,we,Ze))}),G.loaded=G.loaded||{},G.loaded[Y]=ue})},se.prototype.reloadTile=function(F,j){var G=this,Y=this.loaded,te=F.uid,ue=this;if(Y&&Y[te]){var ge=Y[te];ge.showCollisionBoxes=F.showCollisionBoxes;var K=function(re,we){var Ze=ge.reloadCallback;Ze&&(delete ge.reloadCallback,ge.parse(ge.vectorTile,ue.layerIndex,G.availableImages,ue.actor,Ze)),j(re,we)};ge.status==="parsing"?ge.reloadCallback=K:ge.status==="done"&&(ge.vectorTile?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,K):K())}},se.prototype.abortTile=function(F,j){var G=this.loading,Y=F.uid;G&&G[Y]&&G[Y].abort&&(G[Y].abort(),delete G[Y]),j()},se.prototype.removeTile=function(F,j){var G=this.loaded,Y=F.uid;G&&G[Y]&&delete G[Y],j()};var Te=a.window.ImageBitmap,_e=function(){this.loaded={}};function ke(F,j){if(F.length!==0){Ce(F[0],j);for(var G=1;G<F.length;G++)Ce(F[G],!j)}}function Ce(F,j){for(var G=0,Y=0,te=F.length,ue=te-1;Y<te;ue=Y++)G+=(F[Y][0]-F[ue][0])*(F[ue][1]+F[Y][1]);G>=0!=!!j&&F.reverse()}_e.prototype.loadTile=function(F,j){var G=F.uid,Y=F.encoding,te=F.rawImageData,ue=Te&&te instanceof Te?this.getImageData(te):te,ge=new a.DEMData(G,ue,Y);this.loaded=this.loaded||{},this.loaded[G]=ge,j(null,ge)},_e.prototype.getImageData=function(F){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(F.width,F.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=F.width,this.offscreenCanvas.height=F.height,this.offscreenCanvasContext.drawImage(F,0,0,F.width,F.height);var j=this.offscreenCanvasContext.getImageData(-1,-1,F.width+2,F.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:j.width,height:j.height},j.data)},_e.prototype.removeTile=function(F){var j=this.loaded,G=F.uid;j&&j[G]&&delete j[G]};var mt=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,at=function(F){this._feature=F,this.extent=a.EXTENT,this.type=F.type,this.properties=F.tags,"id"in F&&!isNaN(F.id)&&(this.id=parseInt(F.id,10))};at.prototype.loadGeometry=function(){if(this._feature.type===1){for(var F=[],j=0,G=this._feature.geometry;j<G.length;j+=1){var Y=G[j];F.push([new a.Point$1(Y[0],Y[1])])}return F}for(var te=[],ue=0,ge=this._feature.geometry;ue<ge.length;ue+=1){for(var K=[],re=0,we=ge[ue];re<we.length;re+=1){var Ze=we[re];K.push(new a.Point$1(Ze[0],Ze[1]))}te.push(K)}return te},at.prototype.toGeoJSON=function(F,j,G){return mt.call(this,F,j,G)};var Ye=function(F){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=F.length,this._features=F};Ye.prototype.feature=function(F){return new at(this._features[F])};var Ge=a.vectorTile.VectorTileFeature,Xt=yt;function yt(F,j){this.options=j||{},this.features=F,this.length=F.length}function pt(F,j){this.id=typeof F.id=="number"?F.id:void 0,this.type=F.type,this.rawGeometry=F.type===1?[F.geometry]:F.geometry,this.properties=F.tags,this.extent=j||4096}yt.prototype.feature=function(F){return new pt(this.features[F],this.options.extent)},pt.prototype.loadGeometry=function(){var F=this.rawGeometry;this.geometry=[];for(var j=0;j<F.length;j++){for(var G=F[j],Y=[],te=0;te<G.length;te++)Y.push(new a.Point$1(G[te][0],G[te][1]));this.geometry.push(Y)}return this.geometry},pt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var F=this.geometry,j=1/0,G=-1/0,Y=1/0,te=-1/0,ue=0;ue<F.length;ue++)for(var ge=F[ue],K=0;K<ge.length;K++){var re=ge[K];j=Math.min(j,re.x),G=Math.max(G,re.x),Y=Math.min(Y,re.y),te=Math.max(te,re.y)}return[j,Y,G,te]},pt.prototype.toGeoJSON=Ge.prototype.toGeoJSON;var lt=it,Ie=Xt;function it(F){var j=new a.pbf;return function(G,Y){for(var te in G.layers)Y.writeMessage(3,nt,G.layers[te])}(F,j),j.finish()}function nt(F,j){var G;j.writeVarintField(15,F.version||1),j.writeStringField(1,F.name||""),j.writeVarintField(5,F.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<F.length;G++)Y.feature=F.feature(G),j.writeMessage(2,Qe,Y);var te=Y.keys;for(G=0;G<te.length;G++)j.writeStringField(3,te[G]);var ue=Y.values;for(G=0;G<ue.length;G++)j.writeMessage(4,zt,ue[G])}function Qe(F,j){var G=F.feature;G.id!==void 0&&j.writeVarintField(1,G.id),j.writeMessage(2,De,F),j.writeVarintField(3,G.type),j.writeMessage(4,Ct,G)}function De(F,j){var G=F.feature,Y=F.keys,te=F.values,ue=F.keycache,ge=F.valuecache;for(var K in G.properties){var re=ue[K];re===void 0&&(Y.push(K),ue[K]=re=Y.length-1),j.writeVarint(re);var we=G.properties[K],Ze=typeof we;Ze!=="string"&&Ze!=="boolean"&&Ze!=="number"&&(we=JSON.stringify(we));var Je=Ze+":"+we,ze=ge[Je];ze===void 0&&(te.push(we),ge[Je]=ze=te.length-1),j.writeVarint(ze)}}function Ve(F,j){return(j<<3)+(7&F)}function st(F){return F<<1^F>>31}function Ct(F,j){for(var G=F.loadGeometry(),Y=F.type,te=0,ue=0,ge=G.length,K=0;K<ge;K++){var re=G[K],we=1;Y===1&&(we=re.length),j.writeVarint(Ve(1,we));for(var Ze=Y===3?re.length-1:re.length,Je=0;Je<Ze;Je++){Je===1&&Y!==1&&j.writeVarint(Ve(2,Ze-1));var ze=re[Je].x-te,He=re[Je].y-ue;j.writeVarint(st(ze)),j.writeVarint(st(He)),te+=ze,ue+=He}Y===3&&j.writeVarint(Ve(7,1))}}function zt(F,j){var G=typeof F;G==="string"?j.writeStringField(1,F):G==="boolean"?j.writeBooleanField(7,F):G==="number"&&(F%1!=0?j.writeDoubleField(3,F):F<0?j.writeSVarintField(6,F):j.writeVarintField(5,F))}function Ke(F,j,G,Y){qe(F,G,Y),qe(j,2*G,2*Y),qe(j,2*G+1,2*Y+1)}function qe(F,j,G){var Y=F[j];F[j]=F[G],F[G]=Y}function lr(F,j,G,Y){var te=F-G,ue=j-Y;return te*te+ue*ue}lt.fromVectorTileJs=it,lt.fromGeojsonVt=function(F,j){j=j||{};var G={};for(var Y in F)G[Y]=new Xt(F[Y].features,j),G[Y].name=Y,G[Y].version=j.version,G[Y].extent=j.extent;return it({layers:G})},lt.GeoJSONWrapper=Ie;var vr=function(F){return F[0]},cr=function(F){return F[1]},Br=function(F,j,G,Y,te){j===void 0&&(j=vr),G===void 0&&(G=cr),Y===void 0&&(Y=64),te===void 0&&(te=Float64Array),this.nodeSize=Y,this.points=F;for(var ue=F.length<65536?Uint16Array:Uint32Array,ge=this.ids=new ue(F.length),K=this.coords=new te(2*F.length),re=0;re<F.length;re++)ge[re]=re,K[2*re]=j(F[re]),K[2*re+1]=G(F[re]);(function we(Ze,Je,ze,He,St,gt){if(!(St-He<=ze)){var Le=He+St>>1;(function ft(ot,ht,$t,ut,mr,Kr){for(;mr>ut;){if(mr-ut>600){var er=mr-ut+1,et=$t-ut+1,Nt=Math.log(er),li=.5*Math.exp(2*Nt/3),Ir=.5*Math.sqrt(Nt*li*(er-li)/er)*(et-er/2<0?-1:1);ft(ot,ht,$t,Math.max(ut,Math.floor($t-et*li/er+Ir)),Math.min(mr,Math.floor($t+(er-et)*li/er+Ir)),Kr)}var xr=ht[2*$t+Kr],Ar=ut,pr=mr;for(Ke(ot,ht,ut,$t),ht[2*mr+Kr]>xr&&Ke(ot,ht,ut,mr);Ar<pr;){for(Ke(ot,ht,Ar,pr),Ar++,pr--;ht[2*Ar+Kr]<xr;)Ar++;for(;ht[2*pr+Kr]>xr;)pr--}ht[2*ut+Kr]===xr?Ke(ot,ht,ut,pr):Ke(ot,ht,++pr,mr),pr<=$t&&(ut=pr+1),$t<=pr&&(mr=pr-1)}})(Ze,Je,Le,He,St,gt%2),we(Ze,Je,ze,He,Le-1,gt+1),we(Ze,Je,ze,Le+1,St,gt+1)}})(ge,K,Y,0,ge.length-1,0)};Br.prototype.range=function(F,j,G,Y){return function(te,ue,ge,K,re,we,Ze){for(var Je,ze,He=[0,te.length-1,0],St=[];He.length;){var gt=He.pop(),Le=He.pop(),ft=He.pop();if(Le-ft<=Ze)for(var ot=ft;ot<=Le;ot++)ze=ue[2*ot+1],(Je=ue[2*ot])>=ge&&Je<=re&&ze>=K&&ze<=we&&St.push(te[ot]);else{var ht=Math.floor((ft+Le)/2);ze=ue[2*ht+1],(Je=ue[2*ht])>=ge&&Je<=re&&ze>=K&&ze<=we&&St.push(te[ht]);var $t=(gt+1)%2;(gt===0?ge<=Je:K<=ze)&&(He.push(ft),He.push(ht-1),He.push($t)),(gt===0?re>=Je:we>=ze)&&(He.push(ht+1),He.push(Le),He.push($t))}}return St}(this.ids,this.coords,F,j,G,Y,this.nodeSize)},Br.prototype.within=function(F,j,G){return function(Y,te,ue,ge,K,re){for(var we=[0,Y.length-1,0],Ze=[],Je=K*K;we.length;){var ze=we.pop(),He=we.pop(),St=we.pop();if(He-St<=re)for(var gt=St;gt<=He;gt++)lr(te[2*gt],te[2*gt+1],ue,ge)<=Je&&Ze.push(Y[gt]);else{var Le=Math.floor((St+He)/2),ft=te[2*Le],ot=te[2*Le+1];lr(ft,ot,ue,ge)<=Je&&Ze.push(Y[Le]);var ht=(ze+1)%2;(ze===0?ue-K<=ft:ge-K<=ot)&&(we.push(St),we.push(Le-1),we.push(ht)),(ze===0?ue+K>=ft:ge+K>=ot)&&(we.push(Le+1),we.push(He),we.push(ht))}}return Ze}(this.ids,this.coords,F,j,G,this.nodeSize)};var Bt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(F){return F}},xt=function(F){this.options=fr(Object.create(Bt),F),this.trees=new Array(this.options.maxZoom+1)};function Ut(F,j,G,Y,te){return{x:F,y:j,zoom:1/0,id:G,parentId:-1,numPoints:Y,properties:te}}function At(F,j){var G=F.geometry.coordinates,Y=G[1];return{x:Jt(G[0]),y:vt(Y),zoom:1/0,index:j,parentId:-1}}function Kt(F){return{type:"Feature",id:F.id,properties:It(F),geometry:{type:"Point",coordinates:[(Y=F.x,360*(Y-.5)),(j=F.y,G=(180-360*j)*Math.PI/180,360*Math.atan(Math.exp(G))/Math.PI-90)]}};var j,G,Y}function It(F){var j=F.numPoints,G=j>=1e4?Math.round(j/1e3)+"k":j>=1e3?Math.round(j/100)/10+"k":j;return fr(fr({},F.properties),{cluster:!0,cluster_id:F.id,point_count:j,point_count_abbreviated:G})}function Jt(F){return F/360+.5}function vt(F){var j=Math.sin(F*Math.PI/180),G=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return G<0?0:G>1?1:G}function fr(F,j){for(var G in j)F[G]=j[G];return F}function yr(F){return F.x}function bt(F){return F.y}function gr(F,j,G,Y,te,ue){var ge=te-G,K=ue-Y;if(ge!==0||K!==0){var re=((F-G)*ge+(j-Y)*K)/(ge*ge+K*K);re>1?(G=te,Y=ue):re>0&&(G+=ge*re,Y+=K*re)}return(ge=F-G)*ge+(K=j-Y)*K}function hr(F,j,G,Y){var te={id:F===void 0?null:F,type:j,geometry:G,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var ge=ue.geometry,K=ue.type;if(K==="Point"||K==="MultiPoint"||K==="LineString")dr(ue,ge);else if(K==="Polygon"||K==="MultiLineString")for(var re=0;re<ge.length;re++)dr(ue,ge[re]);else if(K==="MultiPolygon")for(re=0;re<ge.length;re++)for(var we=0;we<ge[re].length;we++)dr(ue,ge[re][we])}(te),te}function dr(F,j){for(var G=0;G<j.length;G+=3)F.minX=Math.min(F.minX,j[G]),F.minY=Math.min(F.minY,j[G+1]),F.maxX=Math.max(F.maxX,j[G]),F.maxY=Math.max(F.maxY,j[G+1])}function $e(F,j,G,Y){if(j.geometry){var te=j.geometry.coordinates,ue=j.geometry.type,ge=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),K=[],re=j.id;if(G.promoteId?re=j.properties[G.promoteId]:G.generateId&&(re=Y||0),ue==="Point")Lt(te,K);else if(ue==="MultiPoint")for(var we=0;we<te.length;we++)Lt(te[we],K);else if(ue==="LineString")Wt(te,K,ge,!1);else if(ue==="MultiLineString"){if(G.lineMetrics){for(we=0;we<te.length;we++)Wt(te[we],K=[],ge,!1),F.push(hr(re,"LineString",K,j.properties));return}Se(te,K,ge,!1)}else if(ue==="Polygon")Se(te,K,ge,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(we=0;we<j.geometry.geometries.length;we++)$e(F,{id:re,geometry:j.geometry.geometries[we],properties:j.properties},G,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<te.length;we++){var Ze=[];Se(te[we],Ze,ge,!0),K.push(Ze)}}F.push(hr(re,ue,K,j.properties))}}function Lt(F,j){j.push(We(F[0])),j.push(qt(F[1])),j.push(0)}function Wt(F,j,G,Y){for(var te,ue,ge=0,K=0;K<F.length;K++){var re=We(F[K][0]),we=qt(F[K][1]);j.push(re),j.push(we),j.push(0),K>0&&(ge+=Y?(te*we-re*ue)/2:Math.sqrt(Math.pow(re-te,2)+Math.pow(we-ue,2))),te=re,ue=we}var Ze=j.length-3;j[2]=1,function Je(ze,He,St,gt){for(var Le,ft=gt,ot=St-He>>1,ht=St-He,$t=ze[He],ut=ze[He+1],mr=ze[St],Kr=ze[St+1],er=He+3;er<St;er+=3){var et=gr(ze[er],ze[er+1],$t,ut,mr,Kr);if(et>ft)Le=er,ft=et;else if(et===ft){var Nt=Math.abs(er-ot);Nt<ht&&(Le=er,ht=Nt)}}ft>gt&&(Le-He>3&&Je(ze,He,Le,gt),ze[Le+2]=ft,St-Le>3&&Je(ze,Le,St,gt))}(j,0,Ze,G),j[Ze+2]=1,j.size=Math.abs(ge),j.start=0,j.end=j.size}function Se(F,j,G,Y){for(var te=0;te<F.length;te++){var ue=[];Wt(F[te],ue,G,Y),j.push(ue)}}function We(F){return F/360+.5}function qt(F){var j=Math.sin(F*Math.PI/180),G=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return G<0?0:G>1?1:G}function Mt(F,j,G,Y,te,ue,ge,K){if(Y/=j,ue>=(G/=j)&&ge<Y)return F;if(ge<G||ue>=Y)return null;for(var re=[],we=0;we<F.length;we++){var Ze=F[we],Je=Ze.geometry,ze=Ze.type,He=te===0?Ze.minX:Ze.minY,St=te===0?Ze.maxX:Ze.maxY;if(He>=G&&St<Y)re.push(Ze);else if(!(St<G||He>=Y)){var gt=[];if(ze==="Point"||ze==="MultiPoint")tr(Je,gt,G,Y,te);else if(ze==="LineString")Dr(Je,gt,G,Y,te,!1,K.lineMetrics);else if(ze==="MultiLineString")Yt(Je,gt,G,Y,te,!1);else if(ze==="Polygon")Yt(Je,gt,G,Y,te,!0);else if(ze==="MultiPolygon")for(var Le=0;Le<Je.length;Le++){var ft=[];Yt(Je[Le],ft,G,Y,te,!0),ft.length&&gt.push(ft)}if(gt.length){if(K.lineMetrics&&ze==="LineString"){for(Le=0;Le<gt.length;Le++)re.push(hr(Ze.id,ze,gt[Le],Ze.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(gt.length===1?(ze="LineString",gt=gt[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=gt.length===3?"Point":"MultiPoint"),re.push(hr(Ze.id,ze,gt,Ze.tags))}}}return re.length?re:null}function tr(F,j,G,Y,te){for(var ue=0;ue<F.length;ue+=3){var ge=F[ue+te];ge>=G&&ge<=Y&&(j.push(F[ue]),j.push(F[ue+1]),j.push(F[ue+2]))}}function Dr(F,j,G,Y,te,ue,ge){for(var K,re,we=ri(F),Ze=te===0?Gr:Xr,Je=F.start,ze=0;ze<F.length-3;ze+=3){var He=F[ze],St=F[ze+1],gt=F[ze+2],Le=F[ze+3],ft=F[ze+4],ot=te===0?He:St,ht=te===0?Le:ft,$t=!1;ge&&(K=Math.sqrt(Math.pow(He-Le,2)+Math.pow(St-ft,2))),ot<G?ht>G&&(re=Ze(we,He,St,Le,ft,G),ge&&(we.start=Je+K*re)):ot>Y?ht<Y&&(re=Ze(we,He,St,Le,ft,Y),ge&&(we.start=Je+K*re)):Er(we,He,St,gt),ht<G&&ot>=G&&(re=Ze(we,He,St,Le,ft,G),$t=!0),ht>Y&&ot<=Y&&(re=Ze(we,He,St,Le,ft,Y),$t=!0),!ue&&$t&&(ge&&(we.end=Je+K*re),j.push(we),we=ri(F)),ge&&(Je+=K)}var ut=F.length-3;He=F[ut],St=F[ut+1],gt=F[ut+2],(ot=te===0?He:St)>=G&&ot<=Y&&Er(we,He,St,gt),ut=we.length-3,ue&&ut>=3&&(we[ut]!==we[0]||we[ut+1]!==we[1])&&Er(we,we[0],we[1],we[2]),we.length&&j.push(we)}function ri(F){var j=[];return j.size=F.size,j.start=F.start,j.end=F.end,j}function Yt(F,j,G,Y,te,ue){for(var ge=0;ge<F.length;ge++)Dr(F[ge],j,G,Y,te,ue,!1)}function Er(F,j,G,Y){F.push(j),F.push(G),F.push(Y)}function Gr(F,j,G,Y,te,ue){var ge=(ue-j)/(Y-j);return F.push(ue),F.push(G+(te-G)*ge),F.push(1),ge}function Xr(F,j,G,Y,te,ue){var ge=(ue-G)/(te-G);return F.push(j+(Y-j)*ge),F.push(ue),F.push(1),ge}function ai(F,j){for(var G=[],Y=0;Y<F.length;Y++){var te,ue=F[Y],ge=ue.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")te=si(ue.geometry,j);else if(ge==="MultiLineString"||ge==="Polygon"){te=[];for(var K=0;K<ue.geometry.length;K++)te.push(si(ue.geometry[K],j))}else if(ge==="MultiPolygon")for(te=[],K=0;K<ue.geometry.length;K++){for(var re=[],we=0;we<ue.geometry[K].length;we++)re.push(si(ue.geometry[K][we],j));te.push(re)}G.push(hr(ue.id,ge,te,ue.tags))}return G}function si(F,j){var G=[];G.size=F.size,F.start!==void 0&&(G.start=F.start,G.end=F.end);for(var Y=0;Y<F.length;Y+=3)G.push(F[Y]+j,F[Y+1],F[Y+2]);return G}function Cr(F,j){if(F.transformed)return F;var G,Y,te,ue=1<<F.z,ge=F.x,K=F.y;for(G=0;G<F.features.length;G++){var re=F.features[G],we=re.geometry,Ze=re.type;if(re.geometry=[],Ze===1)for(Y=0;Y<we.length;Y+=2)re.geometry.push(qr(we[Y],we[Y+1],j,ue,ge,K));else for(Y=0;Y<we.length;Y++){var Je=[];for(te=0;te<we[Y].length;te+=2)Je.push(qr(we[Y][te],we[Y][te+1],j,ue,ge,K));re.geometry.push(Je)}}return F.transformed=!0,F}function qr(F,j,G,Y,te,ue){return[Math.round(G*(F*Y-te)),Math.round(G*(j*Y-ue))]}function Sr(F,j,G,Y,te){for(var ue=j===te.maxZoom?0:te.tolerance/((1<<j)*te.extent),ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:Y,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},K=0;K<F.length;K++){ge.numFeatures++,ei(ge,F[K],ue,te);var re=F[K].minX,we=F[K].minY,Ze=F[K].maxX,Je=F[K].maxY;re<ge.minX&&(ge.minX=re),we<ge.minY&&(ge.minY=we),Ze>ge.maxX&&(ge.maxX=Ze),Je>ge.maxY&&(ge.maxY=Je)}return ge}function ei(F,j,G,Y){var te=j.geometry,ue=j.type,ge=[];if(ue==="Point"||ue==="MultiPoint")for(var K=0;K<te.length;K+=3)ge.push(te[K]),ge.push(te[K+1]),F.numPoints++,F.numSimplified++;else if(ue==="LineString")Yr(ge,te,F,G,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(K=0;K<te.length;K++)Yr(ge,te[K],F,G,ue==="Polygon",K===0);else if(ue==="MultiPolygon")for(var re=0;re<te.length;re++){var we=te[re];for(K=0;K<we.length;K++)Yr(ge,we[K],F,G,!0,K===0)}if(ge.length){var Ze=j.tags||null;if(ue==="LineString"&&Y.lineMetrics){for(var Je in Ze={},j.tags)Ze[Je]=j.tags[Je];Ze.mapbox_clip_start=te.start/te.size,Ze.mapbox_clip_end=te.end/te.size}var ze={geometry:ge,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:Ze};j.id!==null&&(ze.id=j.id),F.features.push(ze)}}function Yr(F,j,G,Y,te,ue){var ge=Y*Y;if(Y>0&&j.size<(te?ge:Y))G.numPoints+=j.length/3;else{for(var K=[],re=0;re<j.length;re+=3)(Y===0||j[re+2]>ge)&&(G.numSimplified++,K.push(j[re]),K.push(j[re+1])),G.numPoints++;te&&function(we,Ze){for(var Je=0,ze=0,He=we.length,St=He-2;ze<He;St=ze,ze+=2)Je+=(we[ze]-we[St])*(we[ze+1]+we[St+1]);if(Je>0===Ze)for(ze=0,He=we.length;ze<He/2;ze+=2){var gt=we[ze],Le=we[ze+1];we[ze]=we[He-2-ze],we[ze+1]=we[He-1-ze],we[He-2-ze]=gt,we[He-1-ze]=Le}}(K,ue),F.push(K)}}function kt(F,j){var G=(j=this.options=function(te,ue){for(var ge in ue)te[ge]=ue[ge];return te}(Object.create(this.options),j)).debug;if(G&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y=function(te,ue){var ge=[];if(te.type==="FeatureCollection")for(var K=0;K<te.features.length;K++)$e(ge,te.features[K],ue,K);else $e(ge,te.type==="Feature"?te:{geometry:te},ue);return ge}(F,j);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Y=function(te,ue){var ge=ue.buffer/ue.extent,K=te,re=Mt(te,1,-1-ge,ge,0,-1,2,ue),we=Mt(te,1,1-ge,2+ge,0,-1,2,ue);return(re||we)&&(K=Mt(te,1,-ge,1+ge,0,-1,2,ue)||[],re&&(K=ai(re,1).concat(K)),we&&(K=K.concat(ai(we,-1)))),K}(Y,j)).length&&this.splitTile(Y,0,0,0),G&&(Y.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function kr(F,j,G){return 32*((1<<F)*G+j)+F}function pi(F,j){var G=F.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);var Y=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!Y)return j(null,null);var te=new Ye(Y.features),ue=lt(te);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),j(null,{vectorTile:te,rawData:ue.buffer})}xt.prototype.load=function(F){var j=this.options,G=j.log,Y=j.minZoom,te=j.maxZoom,ue=j.nodeSize;G&&console.time("total time");var ge="prepare "+F.length+" points";G&&console.time(ge),this.points=F;for(var K=[],re=0;re<F.length;re++)F[re].geometry&&K.push(At(F[re],re));this.trees[te+1]=new Br(K,yr,bt,ue,Float32Array),G&&console.timeEnd(ge);for(var we=te;we>=Y;we--){var Ze=+Date.now();K=this._cluster(K,we),this.trees[we]=new Br(K,yr,bt,ue,Float32Array),G&&console.log("z%d: %d clusters in %dms",we,K.length,+Date.now()-Ze)}return G&&console.timeEnd("total time"),this},xt.prototype.getClusters=function(F,j){var G=((F[0]+180)%360+360)%360-180,Y=Math.max(-90,Math.min(90,F[1])),te=F[2]===180?180:((F[2]+180)%360+360)%360-180,ue=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)G=-180,te=180;else if(G>te){var ge=this.getClusters([G,Y,180,ue],j),K=this.getClusters([-180,Y,te,ue],j);return ge.concat(K)}for(var re=this.trees[this._limitZoom(j)],we=[],Ze=0,Je=re.range(Jt(G),vt(ue),Jt(te),vt(Y));Ze<Je.length;Ze+=1){var ze=re.points[Je[Ze]];we.push(ze.numPoints?Kt(ze):this.points[ze.index])}return we},xt.prototype.getChildren=function(F){var j=this._getOriginId(F),G=this._getOriginZoom(F),Y="No cluster with the specified id.",te=this.trees[G];if(!te)throw new Error(Y);var ue=te.points[j];if(!ue)throw new Error(Y);for(var ge=this.options.radius/(this.options.extent*Math.pow(2,G-1)),K=[],re=0,we=te.within(ue.x,ue.y,ge);re<we.length;re+=1){var Ze=te.points[we[re]];Ze.parentId===F&&K.push(Ze.numPoints?Kt(Ze):this.points[Ze.index])}if(K.length===0)throw new Error(Y);return K},xt.prototype.getLeaves=function(F,j,G){var Y=[];return this._appendLeaves(Y,F,j=j||10,G=G||0,0),Y},xt.prototype.getTile=function(F,j,G){var Y=this.trees[this._limitZoom(F)],te=Math.pow(2,F),ue=this.options,ge=ue.radius/ue.extent,K=(G-ge)/te,re=(G+1+ge)/te,we={features:[]};return this._addTileFeatures(Y.range((j-ge)/te,K,(j+1+ge)/te,re),Y.points,j,G,te,we),j===0&&this._addTileFeatures(Y.range(1-ge/te,K,1,re),Y.points,te,G,te,we),j===te-1&&this._addTileFeatures(Y.range(0,K,ge/te,re),Y.points,-1,G,te,we),we.features.length?we:null},xt.prototype.getClusterExpansionZoom=function(F){for(var j=this._getOriginZoom(F)-1;j<=this.options.maxZoom;){var G=this.getChildren(F);if(j++,G.length!==1)break;F=G[0].properties.cluster_id}return j},xt.prototype._appendLeaves=function(F,j,G,Y,te){for(var ue=0,ge=this.getChildren(j);ue<ge.length;ue+=1){var K=ge[ue],re=K.properties;if(re&&re.cluster?te+re.point_count<=Y?te+=re.point_count:te=this._appendLeaves(F,re.cluster_id,G,Y,te):te<Y?te++:F.push(K),F.length===G)break}return te},xt.prototype._addTileFeatures=function(F,j,G,Y,te,ue){for(var ge=0,K=F;ge<K.length;ge+=1){var re=j[K[ge]],we=re.numPoints,Ze={type:1,geometry:[[Math.round(this.options.extent*(re.x*te-G)),Math.round(this.options.extent*(re.y*te-Y))]],tags:we?It(re):this.points[re.index].properties},Je=void 0;we?Je=re.id:this.options.generateId?Je=re.index:this.points[re.index].id&&(Je=this.points[re.index].id),Je!==void 0&&(Ze.id=Je),ue.features.push(Ze)}},xt.prototype._limitZoom=function(F){return Math.max(this.options.minZoom,Math.min(+F,this.options.maxZoom+1))},xt.prototype._cluster=function(F,j){for(var G=[],Y=this.options,te=Y.reduce,ue=Y.minPoints,ge=Y.radius/(Y.extent*Math.pow(2,j)),K=0;K<F.length;K++){var re=F[K];if(!(re.zoom<=j)){re.zoom=j;for(var we=this.trees[j+1],Ze=we.within(re.x,re.y,ge),Je=re.numPoints||1,ze=Je,He=0,St=Ze;He<St.length;He+=1){var gt=we.points[St[He]];gt.zoom>j&&(ze+=gt.numPoints||1)}if(ze>=ue){for(var Le=re.x*Je,ft=re.y*Je,ot=te&&Je>1?this._map(re,!0):null,ht=(K<<5)+(j+1)+this.points.length,$t=0,ut=Ze;$t<ut.length;$t+=1){var mr=we.points[ut[$t]];if(!(mr.zoom<=j)){mr.zoom=j;var Kr=mr.numPoints||1;Le+=mr.x*Kr,ft+=mr.y*Kr,mr.parentId=ht,te&&(ot||(ot=this._map(re,!0)),te(ot,this._map(mr)))}}re.parentId=ht,G.push(Ut(Le/ze,ft/ze,ht,ze,ot))}else if(G.push(re),ze>1)for(var er=0,et=Ze;er<et.length;er+=1){var Nt=we.points[et[er]];Nt.zoom<=j||(Nt.zoom=j,G.push(Nt))}}}return G},xt.prototype._getOriginId=function(F){return F-this.points.length>>5},xt.prototype._getOriginZoom=function(F){return(F-this.points.length)%32},xt.prototype._map=function(F,j){if(F.numPoints)return j?fr({},F.properties):F.properties;var G=this.points[F.index].properties,Y=this.options.map(G);return j&&Y===G?fr({},Y):Y},kt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},kt.prototype.splitTile=function(F,j,G,Y,te,ue,ge){for(var K=[F,j,G,Y],re=this.options,we=re.debug;K.length;){Y=K.pop(),G=K.pop(),j=K.pop(),F=K.pop();var Ze=1<<j,Je=kr(j,G,Y),ze=this.tiles[Je];if(!ze&&(we>1&&console.time("creation"),ze=this.tiles[Je]=Sr(F,j,G,Y,re),this.tileCoords.push({z:j,x:G,y:Y}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,G,Y,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var He="z"+j;this.stats[He]=(this.stats[He]||0)+1,this.total++}if(ze.source=F,te){if(j===re.maxZoom||j===te)continue;var St=1<<te-j;if(G!==Math.floor(ue/St)||Y!==Math.floor(ge/St))continue}else if(j===re.indexMaxZoom||ze.numPoints<=re.indexMaxPoints)continue;if(ze.source=null,F.length!==0){we>1&&console.time("clipping");var gt,Le,ft,ot,ht,$t,ut=.5*re.buffer/re.extent,mr=.5-ut,Kr=.5+ut,er=1+ut;gt=Le=ft=ot=null,ht=Mt(F,Ze,G-ut,G+Kr,0,ze.minX,ze.maxX,re),$t=Mt(F,Ze,G+mr,G+er,0,ze.minX,ze.maxX,re),F=null,ht&&(gt=Mt(ht,Ze,Y-ut,Y+Kr,1,ze.minY,ze.maxY,re),Le=Mt(ht,Ze,Y+mr,Y+er,1,ze.minY,ze.maxY,re),ht=null),$t&&(ft=Mt($t,Ze,Y-ut,Y+Kr,1,ze.minY,ze.maxY,re),ot=Mt($t,Ze,Y+mr,Y+er,1,ze.minY,ze.maxY,re),$t=null),we>1&&console.timeEnd("clipping"),K.push(gt||[],j+1,2*G,2*Y),K.push(Le||[],j+1,2*G,2*Y+1),K.push(ft||[],j+1,2*G+1,2*Y),K.push(ot||[],j+1,2*G+1,2*Y+1)}}},kt.prototype.getTile=function(F,j,G){var Y=this.options,te=Y.extent,ue=Y.debug;if(F<0||F>24)return null;var ge=1<<F,K=kr(F,j=(j%ge+ge)%ge,G);if(this.tiles[K])return Cr(this.tiles[K],te);ue>1&&console.log("drilling down to z%d-%d-%d",F,j,G);for(var re,we=F,Ze=j,Je=G;!re&&we>0;)we--,Ze=Math.floor(Ze/2),Je=Math.floor(Je/2),re=this.tiles[kr(we,Ze,Je)];return re&&re.source?(ue>1&&console.log("found parent tile z%d-%d-%d",we,Ze,Je),ue>1&&console.time("drilling down"),this.splitTile(re.source,we,Ze,Je,F,j,G),ue>1&&console.timeEnd("drilling down"),this.tiles[K]?Cr(this.tiles[K],te):null):null};var Mr=function(F){function j(G,Y,te,ue){F.call(this,G,Y,te,pi),ue&&(this.loadGeoJSON=ue)}return F&&(j.__proto__=F),(j.prototype=Object.create(F&&F.prototype)).constructor=j,j.prototype.loadData=function(G,Y){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Y,this._pendingLoadDataParams=G,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},j.prototype._loadData=function(){var G=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Y=this._pendingCallback,te=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ue=!!(te&&te.request&&te.request.collectResourceTiming)&&new a.RequestPerformance(te.request);this.loadGeoJSON(te,function(ge,K){if(ge||!K)return Y(ge);if(typeof K!="object")return Y(new Error("Input data given to '"+te.source+"' is not a valid GeoJSON object."));(function ze(He,St){var gt,Le=He&&He.type;if(Le==="FeatureCollection")for(gt=0;gt<He.features.length;gt++)ze(He.features[gt],St);else if(Le==="GeometryCollection")for(gt=0;gt<He.geometries.length;gt++)ze(He.geometries[gt],St);else if(Le==="Feature")ze(He.geometry,St);else if(Le==="Polygon")ke(He.coordinates,St);else if(Le==="MultiPolygon")for(gt=0;gt<He.coordinates.length;gt++)ke(He.coordinates[gt],St);return He})(K,!0);try{if(te.filter){var re=a.createExpression(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(re.result==="error")throw new Error(re.value.map(function(ze){return ze.key+": "+ze.message}).join(", "));var we=K.features.filter(function(ze){return re.value.evaluate({zoom:0},ze)});K={type:"FeatureCollection",features:we}}G._geoJSONIndex=te.cluster?new xt(function(ze){var He=ze.superclusterOptions,St=ze.clusterProperties;if(!St||!He)return He;for(var gt={},Le={},ft={accumulated:null,zoom:0},ot={properties:null},ht=Object.keys(St),$t=0,ut=ht;$t<ut.length;$t+=1){var mr=ut[$t],Kr=St[mr],er=Kr[0],et=a.createExpression(Kr[1]),Nt=a.createExpression(typeof er=="string"?[er,["accumulated"],["get",mr]]:er);gt[mr]=et.value,Le[mr]=Nt.value}return He.map=function(li){ot.properties=li;for(var Ir={},xr=0,Ar=ht;xr<Ar.length;xr+=1){var pr=Ar[xr];Ir[pr]=gt[pr].evaluate(ft,ot)}return Ir},He.reduce=function(li,Ir){ot.properties=Ir;for(var xr=0,Ar=ht;xr<Ar.length;xr+=1){var pr=Ar[xr];ft.accumulated=li[pr],li[pr]=Le[pr].evaluate(ft,ot)}},He}(te)).load(K.features):function(ze,He){return new kt(ze,He)}(K,te.geojsonVtOptions)}catch(ze){return Y(ze)}G.loaded={};var Ze={};if(ue){var Je=ue.finish();Je&&(Ze.resourceTiming={},Ze.resourceTiming[te.source]=JSON.parse(JSON.stringify(Je)))}Y(null,Ze)})}},j.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},j.prototype.reloadTile=function(G,Y){var te=this.loaded;return te&&te[G.uid]?F.prototype.reloadTile.call(this,G,Y):this.loadTile(G,Y)},j.prototype.loadGeoJSON=function(G,Y){if(G.request)a.getJSON(G.request,Y);else{if(typeof G.data!="string")return Y(new Error("Input data given to '"+G.source+"' is not a valid GeoJSON object."));try{return Y(null,JSON.parse(G.data))}catch{return Y(new Error("Input data given to '"+G.source+"' is not a valid GeoJSON object."))}}},j.prototype.removeSource=function(G,Y){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Y()},j.prototype.getClusterExpansionZoom=function(G,Y){try{Y(null,this._geoJSONIndex.getClusterExpansionZoom(G.clusterId))}catch(te){Y(te)}},j.prototype.getClusterChildren=function(G,Y){try{Y(null,this._geoJSONIndex.getChildren(G.clusterId))}catch(te){Y(te)}},j.prototype.getClusterLeaves=function(G,Y){try{Y(null,this._geoJSONIndex.getLeaves(G.clusterId,G.limit,G.offset))}catch(te){Y(te)}},j}(se),rr=function(F){var j=this;this.self=F,this.actor=new a.Actor(F,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:se,geojson:Mr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(G,Y){if(j.workerSourceTypes[G])throw new Error('Worker source with name "'+G+'" already registered.');j.workerSourceTypes[G]=Y},this.self.registerRTLTextPlugin=function(G){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=G.applyArabicShaping,a.plugin.processBidirectionalText=G.processBidirectionalText,a.plugin.processStyledBidirectionalText=G.processStyledBidirectionalText}};return rr.prototype.setReferrer=function(F,j){this.referrer=j},rr.prototype.setImages=function(F,j,G){for(var Y in this.availableImages[F]=j,this.workerSources[F]){var te=this.workerSources[F][Y];for(var ue in te)te[ue].availableImages=j}G()},rr.prototype.setLayers=function(F,j,G){this.getLayerIndex(F).replace(j),G()},rr.prototype.updateLayers=function(F,j,G){this.getLayerIndex(F).update(j.layers,j.removedIds),G()},rr.prototype.loadTile=function(F,j,G){this.getWorkerSource(F,j.type,j.source).loadTile(j,G)},rr.prototype.loadDEMTile=function(F,j,G){this.getDEMWorkerSource(F,j.source).loadTile(j,G)},rr.prototype.reloadTile=function(F,j,G){this.getWorkerSource(F,j.type,j.source).reloadTile(j,G)},rr.prototype.abortTile=function(F,j,G){this.getWorkerSource(F,j.type,j.source).abortTile(j,G)},rr.prototype.removeTile=function(F,j,G){this.getWorkerSource(F,j.type,j.source).removeTile(j,G)},rr.prototype.removeDEMTile=function(F,j){this.getDEMWorkerSource(F,j.source).removeTile(j)},rr.prototype.removeSource=function(F,j,G){if(this.workerSources[F]&&this.workerSources[F][j.type]&&this.workerSources[F][j.type][j.source]){var Y=this.workerSources[F][j.type][j.source];delete this.workerSources[F][j.type][j.source],Y.removeSource!==void 0?Y.removeSource(j,G):G()}},rr.prototype.loadWorkerSource=function(F,j,G){try{this.self.importScripts(j.url),G()}catch(Y){G(Y.toString())}},rr.prototype.syncRTLPluginState=function(F,j,G){try{a.plugin.setState(j);var Y=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Y!=null){this.self.importScripts(Y);var te=a.plugin.isParsed();G(te?void 0:new Error("RTL Text Plugin failed to import scripts from "+Y),te)}}catch(ue){G(ue.toString())}},rr.prototype.getAvailableImages=function(F){var j=this.availableImages[F];return j||(j=[]),j},rr.prototype.getLayerIndex=function(F){var j=this.layerIndexes[F];return j||(j=this.layerIndexes[F]=new C),j},rr.prototype.getWorkerSource=function(F,j,G){var Y=this;return this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][j]||(this.workerSources[F][j]={}),this.workerSources[F][j][G]||(this.workerSources[F][j][G]=new this.workerSourceTypes[j]({send:function(te,ue,ge){Y.actor.send(te,ue,ge,F)}},this.getLayerIndex(F),this.getAvailableImages(F))),this.workerSources[F][j][G]},rr.prototype.getDEMWorkerSource=function(F,j){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][j]||(this.demWorkerSources[F][j]=new _e),this.demWorkerSources[F][j]},rr.prototype.enforceCacheSizeLimit=function(F,j){a.enforceCacheSizeLimit(j)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new rr(self)),rr}),v(["./shared"],function(a){var I=a.createCommonjsModule(function(n){function s(y){return!o(y)}function o(y){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,T,B=new Blob([""],{type:"text/javascript"}),U=URL.createObjectURL(B);try{T=new Worker(U),E=!0}catch{E=!1}return T&&T.terminate(),URL.revokeObjectURL(U),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var T=E.getContext("2d");if(!T)return!1;var B=T.getImageData(0,0,1,1);return B&&B.width===E.width}()?(h[w=y&&y.failIfMajorPerformanceCaveat]===void 0&&(h[w]=function(E){var T=function(U){var J=document.createElement("canvas"),$=Object.create(s.webGLContextAttributes);return $.failIfMajorPerformanceCaveat=U,J.probablySupportsContext?J.probablySupportsContext("webgl",$)||J.probablySupportsContext("experimental-webgl",$):J.supportsContext?J.supportsContext("webgl",$)||J.supportsContext("experimental-webgl",$):J.getContext("webgl",$)||J.getContext("experimental-webgl",$)}(E);if(!T)return!1;var B=T.createShader(T.VERTEX_SHADER);return!(!B||T.isContextLost())&&(T.shaderSource(B,"void main() {}"),T.compileShader(B),T.getShaderParameter(B,T.COMPILE_STATUS)===!0)}(w)),h[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var h={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),k={create:function(n,s,o){var h=a.window.document.createElement(n);return s!==void 0&&(h.className=s),o&&o.appendChild(h),h},createNS:function(n,s){return a.window.document.createElementNS(n,s)}},C=a.window.document&&a.window.document.documentElement.style;function z(n){if(!C)return n[0];for(var s=0;s<n.length;s++)if(n[s]in C)return n[s];return n[0]}var O,D=z(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);k.disableDrag=function(){C&&D&&(O=C[D],C[D]="none")},k.enableDrag=function(){C&&D&&(C[D]=O)};var q=z(["transform","WebkitTransform"]);k.setTransform=function(n,s){n.style[q]=s};var se=!1;try{var Te=Object.defineProperty({},"passive",{get:function(){se=!0}});a.window.addEventListener("test",Te,Te),a.window.removeEventListener("test",Te,Te)}catch{se=!1}k.addEventListener=function(n,s,o,h){h===void 0&&(h={}),n.addEventListener(s,o,"passive"in h&&se?h:h.capture)},k.removeEventListener=function(n,s,o,h){h===void 0&&(h={}),n.removeEventListener(s,o,"passive"in h&&se?h:h.capture)};var _e=function(n){n.preventDefault(),n.stopPropagation(),a.window.removeEventListener("click",_e,!0)};function ke(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}k.suppressClick=function(){a.window.addEventListener("click",_e,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",_e,!0)},0)},k.mousePos=function(n,s){var o=n.getBoundingClientRect();return new a.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},k.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),h=[],y=0;y<s.length;y++)h.push(new a.Point(s[y].clientX-o.left-n.clientLeft,s[y].clientY-o.top-n.clientTop));return h},k.mouseButton=function(n){return a.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},k.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Ce=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var h=0,y=this.requestors;h<y.length;h+=1){var w=y[h];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,h){this._validate(o,h)&&(this.images[o]=h)},s.prototype._validate=function(o,h){var y=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),y=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),y=!1),this._validateContent(h.content,h)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),y=!1),y},s.prototype._validateStretch=function(o,h){if(!o)return!0;for(var y=0,w=0,E=o;w<E.length;w+=1){var T=E[w];if(T[0]<y||T[1]<T[0]||h<T[1])return!1;y=T[1]}return!0},s.prototype._validateContent=function(o,h){return!(o&&(o.length!==4||o[0]<0||h.data.width<o[0]||o[1]<0||h.data.height<o[1]||o[2]<0||h.data.width<o[2]||o[3]<0||h.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,h){h.version=this.images[o].version+1,this.images[o]=h,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var h=this.images[o];delete this.images[o],delete this.patterns[o],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,h){var y=!0;if(!this.isLoaded())for(var w=0,E=o;w<E.length;w+=1)this.images[E[w]]||(y=!1);this.isLoaded()||y?this._notify(o,h):this.requestors.push({ids:o,callback:h})},s.prototype._notify=function(o,h){for(var y={},w=0,E=o;w<E.length;w+=1){var T=E[w];this.images[T]||this.fire(new a.Event("styleimagemissing",{id:T}));var B=this.images[T];B?y[T]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:a.warnOnce('Image "'+T+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}h(null,y)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var h=this.patterns[o],y=this.getImage(o);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{var w={w:y.data.width+2,h:y.data.height+2,x:0,y:0},E=new a.ImagePosition(w,y);this.patterns[o]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var h=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(o,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var h in this.patterns)o.push(this.patterns[h].bin);var y=a.potpack(o),w=y.w,E=y.h,T=this.atlasImage;for(var B in T.resize({width:w||1,height:E||1}),this.patterns){var U=this.patterns[B].bin,J=U.x+1,$=U.y+1,ee=this.images[B].data,le=ee.width,oe=ee.height;a.RGBAImage.copy(ee,T,{x:0,y:0},{x:J,y:$},{width:le,height:oe}),a.RGBAImage.copy(ee,T,{x:0,y:oe-1},{x:J,y:$-1},{width:le,height:1}),a.RGBAImage.copy(ee,T,{x:0,y:0},{x:J,y:$+oe},{width:le,height:1}),a.RGBAImage.copy(ee,T,{x:le-1,y:0},{x:J-1,y:$},{width:1,height:oe}),a.RGBAImage.copy(ee,T,{x:0,y:0},{x:J+le,y:$},{width:1,height:oe})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var h=0,y=o;h<y.length;h+=1){var w=y[h];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];ke(E)&&this.updateImage(w,E)}}},s}(a.Evented),mt=Ge,at=Ge,Ye=1e20;function Ge(n,s,o,h,y,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=h||.25,this.fontFamily=y||"sans-serif",this.fontWeight=w||"normal",this.radius=o||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Xt(n,s,o,h,y,w,E){for(var T=0;T<s;T++){for(var B=0;B<o;B++)h[B]=n[B*s+T];for(yt(h,y,w,E,o),B=0;B<o;B++)n[B*s+T]=y[B]}for(B=0;B<o;B++){for(T=0;T<s;T++)h[T]=n[B*s+T];for(yt(h,y,w,E,s),T=0;T<s;T++)n[B*s+T]=Math.sqrt(y[T])}}function yt(n,s,o,h,y){o[0]=0,h[0]=-Ye,h[1]=+Ye;for(var w=1,E=0;w<y;w++){for(var T=(n[w]+w*w-(n[o[E]]+o[E]*o[E]))/(2*w-2*o[E]);T<=h[E];)E--,T=(n[w]+w*w-(n[o[E]]+o[E]*o[E]))/(2*w-2*o[E]);o[++E]=w,h[E]=T,h[E+1]=+Ye}for(w=0,E=0;w<y;w++){for(;h[E+1]<w;)E++;s[w]=(w-o[E])*(w-o[E])+n[o[E]]}}Ge.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),h=0;h<this.size*this.size;h++){var y=s.data[4*h+3]/255;this.gridOuter[h]=y===1?0:y===0?Ye:Math.pow(Math.max(0,.5-y),2),this.gridInner[h]=y===1?Ye:y===0?0:Math.pow(Math.max(0,y-.5),2)}for(Xt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Xt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),h=0;h<this.size*this.size;h++)o[h]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[h]-this.gridInner[h])/this.radius+this.cutoff))));return o},mt.default=at;var pt=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};pt.prototype.setURL=function(n){this.url=n},pt.prototype.getGlyphs=function(n,s){var o=this,h=[];for(var y in n)for(var w=0,E=n[y];w<E.length;w+=1)h.push({stack:y,id:E[w]});a.asyncAll(h,function(T,B){var U=T.stack,J=T.id,$=o.entries[U];$||($=o.entries[U]={glyphs:{},requests:{},ranges:{}});var ee=$.glyphs[J];if(ee===void 0){if(ee=o._tinySDF($,U,J))return $.glyphs[J]=ee,void B(null,{stack:U,id:J,glyph:ee});var le=Math.floor(J/256);if(256*le>65535)B(new Error("glyphs > 65535 not supported"));else if($.ranges[le])B(null,{stack:U,id:J,glyph:ee});else{var oe=$.requests[le];oe||(oe=$.requests[le]=[],pt.loadGlyphRange(U,le,o.url,o.requestManager,function(me,ie){if(ie){for(var de in ie)o._doesCharSupportLocalGlyph(+de)||($.glyphs[+de]=ie[+de]);$.ranges[le]=!0}for(var be=0,Ae=oe;be<Ae.length;be+=1)(0,Ae[be])(me,ie);delete $.requests[le]})),oe.push(function(me,ie){me?B(me):ie&&B(null,{stack:U,id:J,glyph:ie[J]||null})})}}else B(null,{stack:U,id:J,glyph:ee})},function(T,B){if(T)s(T);else if(B){for(var U={},J=0,$=B;J<$.length;J+=1){var ee=$[J],le=ee.stack,oe=ee.id,me=ee.glyph;(U[le]||(U[le]={}))[oe]=me&&{id:me.id,bitmap:me.bitmap.clone(),metrics:me.metrics}}s(null,U)}})},pt.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](n)||a.isChar["Hangul Syllables"](n)||a.isChar.Hiragana(n)||a.isChar.Katakana(n))},pt.prototype._tinySDF=function(n,s,o){var h=this.localIdeographFontFamily;if(h&&this._doesCharSupportLocalGlyph(o)){var y=n.tinySDF;if(!y){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),y=n.tinySDF=new pt.TinySDF(24,3,8,.25,h,w)}return{id:o,bitmap:new a.AlphaImage({width:30,height:30},y.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},pt.loadGlyphRange=function(n,s,o,h,y){var w=256*s,E=w+255,T=h.transformRequest(h.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",w+"-"+E),a.ResourceType.Glyphs);a.getArrayBuffer(T,function(B,U){if(B)y(B);else if(U){for(var J={},$=0,ee=a.parseGlyphPBF(U);$<ee.length;$+=1){var le=ee[$];J[le.id]=le}y(null,J)}})},pt.TinySDF=mt;var lt=function(){this.specification=a.styleSpec.light.position};lt.prototype.possiblyEvaluate=function(n,s){return a.sphericalToCartesian(n.expression.evaluate(s))},lt.prototype.interpolate=function(n,s,o){return{x:a.number(n.x,s.x,o),y:a.number(n.y,s.y,o),z:a.number(n.z,s.z,o)}};var Ie=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new lt,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),it=function(n){function s(o){n.call(this),this._transitionable=new a.Transitionable(Ie),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,h){if(h===void 0&&(h={}),!this._validate(a.validateLight,o,h))for(var y in o){var w=o[y];a.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),w):this._transitionable.setValue(y,w)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,h,y){return(!y||y.validate!==!1)&&a.emitValidationErrors(this,o.call(a.validateStyle,a.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},s}(a.Evented),nt=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};nt.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},nt.prototype.getDashRanges=function(n,s,o){var h=[],y=n.length%2==1?-n[n.length-1]*o:0,w=n[0]*o,E=!0;h.push({left:y,right:w,isDash:E,zeroLength:n[0]===0});for(var T=n[0],B=1;B<n.length;B++){var U=n[B];h.push({left:y=T*o,right:w=(T+=U)*o,isDash:E=!E,zeroLength:U===0})}return h},nt.prototype.addRoundDash=function(n,s,o){for(var h=s/2,y=-o;y<=o;y++)for(var w=this.width*(this.nextRow+o+y),E=0,T=n[E],B=0;B<this.width;B++){B/T.right>1&&(T=n[++E]);var U=Math.abs(B-T.left),J=Math.abs(B-T.right),$=Math.min(U,J),ee=void 0,le=y/o*(h+1);if(T.isDash){var oe=h-Math.abs(le);ee=Math.sqrt($*$+oe*oe)}else ee=h-Math.sqrt($*$+le*le);this.data[w+B]=Math.max(0,Math.min(255,ee+128))}},nt.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],h=n[s+1];o.zeroLength?n.splice(s,1):h&&h.isDash===o.isDash&&(h.left=o.left,n.splice(s,1))}var y=n[0],w=n[n.length-1];y.isDash===w.isDash&&(y.left=w.left-this.width,w.right=y.right+this.width);for(var E=this.width*this.nextRow,T=0,B=n[T],U=0;U<this.width;U++){U/B.right>1&&(B=n[++T]);var J=Math.abs(U-B.left),$=Math.abs(U-B.right),ee=Math.min(J,$);this.data[E+U]=Math.max(0,Math.min(255,(B.isDash?ee:-ee)+128))}},nt.prototype.addDash=function(n,s){var o=s?7:0,h=2*o+1;if(this.nextRow+h>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var y=0,w=0;w<n.length;w++)y+=n[w];if(y!==0){var E=this.width/y,T=this.getDashRanges(n,this.width,E);s?this.addRoundDash(T,E,o):this.addRegularDash(T)}var B={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:y};return this.nextRow+=h,this.dirty=!0,B},nt.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var Qe=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var h=this.workerPool.acquire(this.id),y=0;y<h.length;y++){var w=new n.Actor(h[y],o,this.id);w.name="Worker "+y,this.actors.push(w)}};function De(n,s,o){var h=function(y,w){if(y)return o(y);if(w){var E=a.pick(a.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(T){return T.id})),E.tiles=s.canonicalizeTileset(E,n.url),o(null,E)}};return n.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),a.ResourceType.Source),h):a.browser.frame(function(){return h(null,n)})}Qe.prototype.broadcast=function(n,s,o){a.asyncAll(this.actors,function(h,y){h.send(n,s,y)},o=o||function(){})},Qe.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Qe.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},Qe.Actor=a.Actor;var Ve=function(n,s,o){this.bounds=a.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};Ve.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},Ve.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),h=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),y=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<y&&n.y>=h&&n.y<w};var st=function(n){function s(o,h,y,w){if(n.call(this),this.id=o,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(h,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=De(this._options,this.map._requestManager,function(h,y){o._tileJSONRequest=null,o._loaded=!0,h?o.fire(new a.ErrorEvent(h)):y&&(a.extend(o,y),y.bounds&&(o.tileBounds=new Ve(y.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(y.tiles,o.map._requestManager._customAccessToken),a.postMapLoadEvent(y.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var h=this;return this.setSourceProperty(function(){h._options.tiles=o}),this},s.prototype.setUrl=function(o){var h=this;return this.setSourceProperty(function(){h.url=o,h._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.loadTile=function(o,h){var y=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(y,a.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(T,B){return delete o.request,o.aborted?h(null):T&&T.status!==404?h(T):(B&&B.resourceTiming&&(o.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&o.setExpiryData(B),o.loadVectorData(B,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=h:o.request=o.actor.send("reloadTile",w,E.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",w,E.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Ct=function(n){function s(o,h,y,w){n.call(this),this.id=o,this.dispatcher=y,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},h),a.extend(this,a.pick(h,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=De(this._options,this.map._requestManager,function(h,y){o._tileJSONRequest=null,o._loaded=!0,h?o.fire(new a.ErrorEvent(h)):y&&(a.extend(o,y),y.bounds&&(o.tileBounds=new Ve(y.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(y.tiles),a.postMapLoadEvent(y.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,h){var y=this,w=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=a.getImage(this.map._requestManager.transformRequest(w,a.ResourceType.Tile),function(E,T){if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(E)o.state="errored",h(E);else if(T){y.map._refreshExpiredTiles&&o.setExpiryData(T),delete T.cacheControl,delete T.expires;var B=y.map.painter.context,U=B.gl;o.texture=y.map.painter.getTileTexture(T.width),o.texture?o.texture.update(T,{useMipmap:!0}):(o.texture=new a.Texture(B,T,U.RGBA,{useMipmap:!0}),o.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&U.texParameterf(U.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),o.state="loaded",a.cacheEntryPossiblyAdded(y.dispatcher),h(null)}})},s.prototype.abortTile=function(o,h){o.request&&(o.request.cancel(),delete o.request),h()},s.prototype.unloadTile=function(o,h){o.texture&&this.map.painter.saveTileTexture(o.texture),h()},s.prototype.hasTransition=function(){return!1},s}(a.Evented),zt=function(n){function s(o,h,y,w){n.call(this,o,h,y,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,h){var y=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,T){E&&(o.state="errored",h(E)),T&&(o.dem=T,o.needsHillshadePrepare=!0,o.state="loaded",h(null))}o.request=a.getImage(this.map._requestManager.transformRequest(y,a.ResourceType.Tile),function(E,T){if(delete o.request,o.aborted)o.state="unloaded",h(null);else if(E)o.state="errored",h(E);else if(T){this.map._refreshExpiredTiles&&o.setExpiryData(T),delete T.cacheControl,delete T.expires;var B=a.window.ImageBitmap&&T instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?T:a.browser.getImageData(T,1),U={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:B,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",U,w.bind(this)))}}.bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var h=o.canonical,y=Math.pow(2,h.z),w=(h.x-1+y)%y,E=h.x===0?o.wrap-1:o.wrap,T=(h.x+1+y)%y,B=h.x+1===y?o.wrap+1:o.wrap,U={};return U[new a.OverscaledTileID(o.overscaledZ,E,h.z,w,h.y).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,B,h.z,T,h.y).key]={backfilled:!1},h.y>0&&(U[new a.OverscaledTileID(o.overscaledZ,E,h.z,w,h.y-1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,B,h.z,T,h.y-1).key]={backfilled:!1}),h.y+1<y&&(U[new a.OverscaledTileID(o.overscaledZ,E,h.z,w,h.y+1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,o.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},U[new a.OverscaledTileID(o.overscaledZ,B,h.z,T,h.y+1).key]={backfilled:!1}),U},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(Ct),Ke=function(n){function s(o,h,y,w){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=y.getActor(),this.setEventedParent(w),this._data=h.data,this._options=a.extend({},h),this._collectResourceTiming=h.collectResourceTiming,this._resourceTiming=[],h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;var E=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*E,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*E,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?Math.min(h.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:a.EXTENT,radius:(h.clusterRadius||50)*E,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(h){if(h)o.fire(new a.ErrorEvent(h));else{var y={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(y.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new a.Event("data",y))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var h=this;return this._data=o,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(y){if(y)h.fire(new a.ErrorEvent(y));else{var w={dataType:"source",sourceDataType:"content"};h._collectResourceTiming&&h._resourceTiming&&h._resourceTiming.length>0&&(w.resourceTiming=h._resourceTiming,h._resourceTiming=[]),h.fire(new a.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(o,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},h),this},s.prototype.getClusterChildren=function(o,h){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},h),this},s.prototype.getClusterLeaves=function(o,h,y,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:h,offset:y},w),this},s.prototype._updateWorkerData=function(o){var h=this;this._loaded=!1;var y=a.extend({},this.workerOptions),w=this._data;typeof w=="string"?(y.request=this.map._requestManager.transformRequest(a.browser.resolveURL(w),a.ResourceType.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(w),this.actor.send(this.type+".loadData",y,function(E,T){h._removed||T&&T.abandoned||(h._loaded=!0,T&&T.resourceTiming&&T.resourceTiming[h.id]&&(h._resourceTiming=T.resourceTiming[h.id].slice(0)),h.actor.send(h.type+".coalesce",{source:y.source},null),o(E))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,h){var y=this,w=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(w,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,T){return delete o.request,o.unloadVectorData(),o.aborted?h(null):E?h(E):(o.loadVectorData(T,y.map.painter,w==="reloadTile"),h(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(a.Evented),qe=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),lr=function(n){function s(o,h,y,w){n.call(this),this.id=o,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=h}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,h){var y=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(w,E){y._loaded=!0,w?y.fire(new a.ErrorEvent(w)):E&&(y.image=E,o&&(y.coordinates=o),h&&h(),y._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var h=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){h.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var h=this;this.coordinates=o;var y=o.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var T=1/0,B=1/0,U=-1/0,J=-1/0,$=0,ee=E;$<ee.length;$+=1){var le=ee[$];T=Math.min(T,le.x),B=Math.min(B,le.y),U=Math.max(U,le.x),J=Math.max(J,le.y)}var oe=Math.max(U-T,J-B),me=Math.max(0,Math.floor(-Math.log(oe)/Math.LN2)),ie=Math.pow(2,me);return new a.CanonicalTileID(me,Math.floor((T+U)/2*ie),Math.floor((B+J)/2*ie))}(y),this.minzoom=this.maxzoom=this.tileID.z;var w=y.map(function(E){return h.tileID.getTilePoint(E)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,h=o.gl;for(var y in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(o,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(o,h){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},h(null)):(o.state="errored",h(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(a.Evented),vr=function(n){function s(o,h,y,w){n.call(this,o,h,y,w),this.roundZoom=!0,this.type="video",this.options=h}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var h=this.options;this.urls=[];for(var y=0,w=h.urls;y<w.length;y+=1)this.urls.push(this.map._requestManager.transformRequest(w[y],a.ResourceType.Source).url);a.getVideo(this.urls,function(E,T){o._loaded=!0,E?o.fire(new a.ErrorEvent(E)):T&&(o.video=T,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var h=this.video.seekable;o<h.start(0)||o>h.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+h.start(0)+" and "+h.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,h=o.gl;for(var y in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(o,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(lr),cr=function(n){function s(o,h,y,w){n.call(this,o,h,y,w),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(T){return typeof T!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var h=this.map.painter.context,y=h.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(h,this.canvas,y.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,h=[this.canvas.width,this.canvas.height];o<h.length;o+=1){var y=h[o];if(isNaN(y)||y<=0)return!0}return!1},s}(lr),Br={vector:st,raster:Ct,"raster-dem":zt,geojson:Ke,video:vr,image:lr,canvas:cr};function Bt(n,s){var o=a.identity([]);return a.translate(o,o,[1,1,0]),a.scale(o,o,[.5*n.width,.5*n.height,1]),a.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function xt(n,s,o,h,y,w){var E=function(me,ie,de){if(me)for(var be=0,Ae=me;be<Ae.length;be+=1){var Ue=ie[Ae[be]];if(Ue&&Ue.source===de&&Ue.type==="fill-extrusion")return!0}else for(var Fe in ie){var je=ie[Fe];if(je.source===de&&je.type==="fill-extrusion")return!0}return!1}(y&&y.layers,s,n.id),T=w.maxPitchScaleFactor(),B=n.tilesIn(h,T,E);B.sort(Ut);for(var U=[],J=0,$=B;J<$.length;J+=1){var ee=$[J];U.push({wrappedTileID:ee.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(s,o,n._state,ee.queryGeometry,ee.cameraQueryGeometry,ee.scale,y,w,T,Bt(n.transform,ee.tileID))})}var le=function(me){for(var ie={},de={},be=0,Ae=me;be<Ae.length;be+=1){var Ue=Ae[be],Fe=Ue.queryResults,je=Ue.wrappedTileID,tt=de[je]=de[je]||{};for(var _t in Fe)for(var dt=Fe[_t],Ot=tt[_t]=tt[_t]||{},nr=ie[_t]=ie[_t]||[],ur=0,sr=dt;ur<sr.length;ur+=1){var ci=sr[ur];Ot[ci.featureIndex]||(Ot[ci.featureIndex]=!0,nr.push(ci))}}return ie}(U);for(var oe in le)le[oe].forEach(function(me){var ie=me.feature,de=n.getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=de});return le}function Ut(n,s){var o=n.tileID,h=s.tileID;return o.overscaledZ-h.overscaledZ||o.canonical.y-h.canonical.y||o.wrap-h.wrap||o.canonical.x-h.canonical.x}var At=function(n,s){this.max=n,this.onRemove=s,this.reset()};At.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var h=o[s];h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value)}return this.data={},this.order=[],this},At.prototype.add=function(n,s,o){var h=this,y=n.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);var w={value:s,timeout:void 0};if(o!==void 0&&(w.timeout=setTimeout(function(){h.remove(n,w)},o)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},At.prototype.has=function(n){return n.wrapped().key in this.data},At.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},At.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},At.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},At.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},At.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,h=s===void 0?0:this.data[o].indexOf(s),y=this.data[o][h];return this.data[o].splice(h,1),y.timeout&&clearTimeout(y.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(y.value),this.order.splice(this.order.indexOf(o),1),this},At.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},At.prototype.filter=function(n){var s=[];for(var o in this.data)for(var h=0,y=this.data[o];h<y.length;h+=1){var w=y[h];n(w.value)||s.push(w)}for(var E=0,T=s;E<T.length;E+=1){var B=T[E];this.remove(B.value.tileID,B)}};var Kt=function(n,s,o){this.context=n;var h=n.gl;this.buffer=h.createBuffer(),this.dynamicDraw=Boolean(o),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Kt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Kt.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Kt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var It={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Jt=function(n,s,o,h){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=h,this.context=n;var y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Jt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Jt.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},Jt.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var h=s.attributes[this.attributes[o].name];h!==void 0&&n.enableVertexAttribArray(h)}},Jt.prototype.setVertexAttribPointers=function(n,s,o){for(var h=0;h<this.attributes.length;h++){var y=this.attributes[h],w=s.attributes[y.name];w!==void 0&&n.vertexAttribPointer(w,y.components,n[It[y.type]],!1,this.itemSize,y.offset+this.itemSize*(o||0))}},Jt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var vt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};vt.prototype.get=function(){return this.current},vt.prototype.set=function(n){},vt.prototype.getDefault=function(){return this.default},vt.prototype.setDefault=function(){this.set(this.default)};var fr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(vt),yr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(vt),bt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(vt),gr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(vt),hr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(vt),dr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(vt),$e=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var h=this.current;(o.func!==h.func||o.ref!==h.ref||o.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(vt),Lt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(vt),Wt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;o?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(vt),Se=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(vt),We=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;o?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(vt),qt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(vt),Mt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;o?h.enable(h.BLEND):h.disable(h.BLEND),this.current=o,this.dirty=!1}},s}(vt),tr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var h=this.current;(o[0]!==h[0]||o[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(vt),Dr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var h=this.current;(o.r!==h.r||o.g!==h.g||o.b!==h.b||o.a!==h.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(vt),ri=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(vt),Yt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;o?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=o,this.dirty=!1}},s}(vt),Er=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(vt),Gr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(vt),Xr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(vt),ai=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(vt),si=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var h=this.current;(o[0]!==h[0]||o[1]!==h[1]||o[2]!==h[2]||o[3]!==h[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(vt),Cr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(vt),qr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(vt),Sr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;h.bindTexture(h.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(vt),ei=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(vt),Yr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(vt),kt=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(vt),kr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(vt),pi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(vt),Mr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(vt),rr=function(n){function s(o,h){n.call(this,o),this.context=o,this.parent=h}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(vt),F=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(rr),j=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(rr),G=function(n,s,o,h){this.context=n,this.width=s,this.height=o;var y=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new F(n,y),h&&(this.depthAttachment=new j(n,y))};G.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var Y=function(n,s,o){this.func=n,this.mask=s,this.range=o};Y.ReadOnly=!1,Y.ReadWrite=!0,Y.disabled=new Y(519,Y.ReadOnly,[0,1]);var te=function(n,s,o,h,y,w){this.test=n,this.ref=s,this.mask=o,this.fail=h,this.depthFail=y,this.pass=w};te.disabled=new te({func:519,mask:0},0,0,7680,7680,7680);var ue=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};ue.disabled=new ue(ue.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),ue.unblended=new ue(ue.Replace,a.Color.transparent,[!0,!0,!0,!0]),ue.alphaBlended=new ue([1,771],a.Color.transparent,[!0,!0,!0,!0]);var ge=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};ge.disabled=new ge(!1,1029,2305),ge.backCCW=new ge(!0,1029,2305);var K=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new fr(this),this.clearDepth=new yr(this),this.clearStencil=new bt(this),this.colorMask=new gr(this),this.depthMask=new hr(this),this.stencilMask=new dr(this),this.stencilFunc=new $e(this),this.stencilOp=new Lt(this),this.stencilTest=new Wt(this),this.depthRange=new Se(this),this.depthTest=new We(this),this.depthFunc=new qt(this),this.blend=new Mt(this),this.blendFunc=new tr(this),this.blendColor=new Dr(this),this.blendEquation=new ri(this),this.cullFace=new Yt(this),this.cullFaceSide=new Er(this),this.frontFace=new Gr(this),this.program=new Xr(this),this.activeTexture=new ai(this),this.viewport=new si(this),this.bindFramebuffer=new Cr(this),this.bindRenderbuffer=new qr(this),this.bindTexture=new Sr(this),this.bindVertexBuffer=new ei(this),this.bindElementBuffer=new Yr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new kt(this),this.pixelStoreUnpack=new kr(this),this.pixelStoreUnpackPremultiplyAlpha=new pi(this),this.pixelStoreUnpackFlipY=new Mr(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};K.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},K.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},K.prototype.createIndexBuffer=function(n,s){return new Kt(this,n,s)},K.prototype.createVertexBuffer=function(n,s,o){return new Jt(this,n,s,o)},K.prototype.createRenderbuffer=function(n,s,o){var h=this.gl,y=h.createRenderbuffer();return this.bindRenderbuffer.set(y),h.renderbufferStorage(h.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),y},K.prototype.createFramebuffer=function(n,s,o){return new G(this,n,s,o)},K.prototype.clear=function(n){var s=n.color,o=n.depth,h=this.gl,y=0;s&&(y|=h.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(y|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),h.clear(y)},K.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},K.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},K.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},K.prototype.setColorMode=function(n){a.deepEqual(n.blendFunction,ue.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},K.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var re=function(n){function s(o,h,y){var w=this;n.call(this),this.id=o,this.dispatcher=y,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,T,B,U){var J=new Br[T.type](E,T,B,U);if(J.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+J.id);return a.bindAll(["load","abort","unload","serialize","prepare"],J),J}(o,h,y,this),this._tiles={},this._cache=new At(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var h=this._tiles[o];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,h){return this._source.loadTile(o,h)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var h in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var y=this._tiles[h];y.upload(o),y.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return a.values(this._tiles).map(function(o){return o.tileID}).sort(we).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var h=this,y=[];for(var w in this._tiles)this._isIdRenderable(w,o)&&y.push(this._tiles[w]);return o?y.sort(function(E,T){var B=E.tileID,U=T.tileID,J=new a.Point(B.canonical.x,B.canonical.y)._rotate(h.transform.angle),$=new a.Point(U.canonical.x,U.canonical.y)._rotate(h.transform.angle);return B.overscaledZ-U.overscaledZ||$.y-J.y||$.x-J.x}).map(function(E){return E.tileID.key}):y.map(function(E){return E.tileID}).sort(we).map(function(E){return E.key})},s.prototype.hasRenderableParent=function(o){var h=this.findLoadedParent(o,0);return!!h&&this._isIdRenderable(h.tileID.key)},s.prototype._isIdRenderable=function(o,h){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(h||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,h){var y=this._tiles[o];y&&(y.state!=="loading"&&(y.state=h),this._loadTile(y,this._tileLoaded.bind(this,y,o,h)))},s.prototype._tileLoaded=function(o,h,y,w){if(w)return o.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:o})):this.update(this.transform));o.timeAdded=a.browser.now(),y==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(h,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var h=this.getRenderableIds(),y=0;y<h.length;y++){var w=h[y];if(o.neighboringTiles&&o.neighboringTiles[w]){var E=this.getTileByID(w);T(o,E),T(E,o)}}function T(B,U){B.needsHillshadePrepare=!0;var J=U.tileID.canonical.x-B.tileID.canonical.x,$=U.tileID.canonical.y-B.tileID.canonical.y,ee=Math.pow(2,B.tileID.canonical.z),le=U.tileID.key;J===0&&$===0||Math.abs($)>1||(Math.abs(J)>1&&(Math.abs(J+ee)===1?J+=ee:Math.abs(J-ee)===1&&(J-=ee)),U.dem&&B.dem&&(B.dem.backfillBorder(U.dem,J,$),B.neighboringTiles&&B.neighboringTiles[le]&&(B.neighboringTiles[le].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,h,y,w){for(var E in this._tiles){var T=this._tiles[E];if(!(w[E]||!T.hasData()||T.tileID.overscaledZ<=h||T.tileID.overscaledZ>y)){for(var B=T.tileID;T&&T.tileID.overscaledZ>h+1;){var U=T.tileID.scaledTo(T.tileID.overscaledZ-1);(T=this._tiles[U.key])&&T.hasData()&&(B=U)}for(var J=B;J.overscaledZ>h;)if(o[(J=J.scaledTo(J.overscaledZ-1)).key]){w[B.key]=B;break}}}},s.prototype.findLoadedParent=function(o,h){if(o.key in this._loadedParentTiles){var y=this._loadedParentTiles[o.key];return y&&y.tileID.overscaledZ>=h?y:null}for(var w=o.overscaledZ-1;w>=h;w--){var E=o.scaledTo(w),T=this._getLoadedTile(E);if(T)return T}},s.prototype._getLoadedTile=function(o){var h=this._tiles[o.key];return h&&h.hasData()?h:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var h=Math.ceil(o.width/this._source.tileSize)+1,y=Math.ceil(o.height/this._source.tileSize)+1,w=Math.floor(h*y*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},s.prototype.handleWrapJump=function(o){var h=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,h){var y={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),y[E.tileID.key]=E}for(var T in this._tiles=y,this._timers)clearTimeout(this._timers[T]),delete this._timers[T];for(var B in this._tiles)this._setTileReloadTimer(B,this._tiles[B])}},s.prototype.update=function(o){var h=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var y;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?y=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(tt){return new a.OverscaledTileID(tt.canonical.z,tt.wrap,tt.canonical.z,tt.canonical.x,tt.canonical.y)}):(y=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(y=y.filter(function(tt){return h._source.hasTile(tt)}))):y=[];var w=o.coveringZoomLevel(this._source),E=Math.max(w-s.maxOverzooming,this._source.minzoom),T=Math.max(w+s.maxUnderzooming,this._source.minzoom),B=this._updateRetainedTiles(y,w);if(Ze(this._source.type)){for(var U={},J={},$=0,ee=Object.keys(B);$<ee.length;$+=1){var le=ee[$],oe=B[le],me=this._tiles[le];if(me&&!(me.fadeEndTime&&me.fadeEndTime<=a.browser.now())){var ie=this.findLoadedParent(oe,E);ie&&(this._addTile(ie.tileID),U[ie.tileID.key]=ie.tileID),J[le]=oe}}for(var de in this._retainLoadedChildren(J,w,T,B),U)B[de]||(this._coveredTiles[de]=!0,B[de]=U[de])}for(var be in B)this._tiles[be].clearFadeHold();for(var Ae=0,Ue=a.keysDifference(this._tiles,B);Ae<Ue.length;Ae+=1){var Fe=Ue[Ae],je=this._tiles[Fe];je.hasSymbolBuckets&&!je.holdingForFade()?je.setHoldDuration(this.map._fadeDuration):je.hasSymbolBuckets&&!je.symbolFadeFinished()||this._removeTile(Fe)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,h){for(var y={},w={},E=Math.max(h-s.maxOverzooming,this._source.minzoom),T=Math.max(h+s.maxUnderzooming,this._source.minzoom),B={},U=0,J=o;U<J.length;U+=1){var $=J[U],ee=this._addTile($);y[$.key]=$,ee.hasData()||h<this._source.maxzoom&&(B[$.key]=$)}this._retainLoadedChildren(B,h,T,y);for(var le=0,oe=o;le<oe.length;le+=1){var me=oe[le],ie=this._tiles[me.key];if(!ie.hasData()){if(h+1>this._source.maxzoom){var de=me.children(this._source.maxzoom)[0],be=this.getTile(de);if(be&&be.hasData()){y[de.key]=de;continue}}else{var Ae=me.children(this._source.maxzoom);if(y[Ae[0].key]&&y[Ae[1].key]&&y[Ae[2].key]&&y[Ae[3].key])continue}for(var Ue=ie.wasRequested(),Fe=me.overscaledZ-1;Fe>=E;--Fe){var je=me.scaledTo(Fe);if(w[je.key]||(w[je.key]=!0,!(ie=this.getTile(je))&&Ue&&(ie=this._addTile(je)),ie&&(y[je.key]=je,Ue=ie.wasRequested(),ie.hasData())))break}}}return y},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var h=[],y=void 0,w=this._tiles[o].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){y=this._loadedParentTiles[w.key];break}h.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(y=this._getLoadedTile(E))break;w=E}for(var T=0,B=h;T<B.length;T+=1)this._loadedParentTiles[B[T]]=y}},s.prototype._addTile=function(o){var h=this._tiles[o.key];if(h)return h;(h=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,h),h.tileID=o,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,h)));var y=Boolean(h);return y||(h=new a.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,o.key,h.state))),h?(h.uses++,this._tiles[o.key]=h,y||this._source.fire(new a.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h):null},s.prototype._setTileReloadTimer=function(o,h){var y=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var w=h.getExpiryTimeout();w&&(this._timers[o]=setTimeout(function(){y._reloadTile(o,"expired"),delete y._timers[o]},w))},s.prototype._removeTile=function(o){var h=this._tiles[o];h&&(h.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,h,y){var w=this,E=[],T=this.transform;if(!T)return E;for(var B=y?T.getCameraQueryGeometry(o):o,U=o.map(function(Fe){return T.pointCoordinate(Fe)}),J=B.map(function(Fe){return T.pointCoordinate(Fe)}),$=this.getIds(),ee=1/0,le=1/0,oe=-1/0,me=-1/0,ie=0,de=J;ie<de.length;ie+=1){var be=de[ie];ee=Math.min(ee,be.x),le=Math.min(le,be.y),oe=Math.max(oe,be.x),me=Math.max(me,be.y)}for(var Ae=function(Fe){var je=w._tiles[$[Fe]];if(!je.holdingForFade()){var tt=je.tileID,_t=Math.pow(2,T.zoom-je.tileID.overscaledZ),dt=h*je.queryPadding*a.EXTENT/je.tileSize/_t,Ot=[tt.getTilePoint(new a.MercatorCoordinate(ee,le)),tt.getTilePoint(new a.MercatorCoordinate(oe,me))];if(Ot[0].x-dt<a.EXTENT&&Ot[0].y-dt<a.EXTENT&&Ot[1].x+dt>=0&&Ot[1].y+dt>=0){var nr=U.map(function(sr){return tt.getTilePoint(sr)}),ur=J.map(function(sr){return tt.getTilePoint(sr)});E.push({tile:je,tileID:tt,queryGeometry:nr,cameraQueryGeometry:ur,scale:_t})}}},Ue=0;Ue<$.length;Ue++)Ae(Ue);return E},s.prototype.getVisibleCoordinates=function(o){for(var h=this,y=this.getRenderableIds(o).map(function(B){return h._tiles[B].tileID}),w=0,E=y;w<E.length;w+=1){var T=E[w];T.posMatrix=this.transform.calculatePosMatrix(T.toUnwrapped())}return y},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ze(this._source.type))for(var o in this._tiles){var h=this._tiles[o];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=a.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,h,y){this._state.updateState(o=o||"_geojsonTileLayer",h,y)},s.prototype.removeFeatureState=function(o,h,y){this._state.removeFeatureState(o=o||"_geojsonTileLayer",h,y)},s.prototype.getFeatureState=function(o,h){return this._state.getState(o=o||"_geojsonTileLayer",h)},s.prototype.setDependencies=function(o,h,y){var w=this._tiles[o];w&&w.setDependencies(h,y)},s.prototype.reloadTilesForDependencies=function(o,h){for(var y in this._tiles)this._tiles[y].hasDependency(o,h)&&this._reloadTile(y,"reloading");this._cache.filter(function(w){return!w.hasDependency(o,h)})},s}(a.Evented);function we(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),h=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||h-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ze(n){return n==="raster"||n==="image"||n==="video"}function Je(){return new a.window.Worker($l.workerUrl)}re.maxOverzooming=10,re.maxUnderzooming=3;var ze="mapboxgl_preloaded_worker_pool",He=function(){this.active={}};He.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Je);return this.active[n]=!0,this.workers.slice()},He.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},He.prototype.isPreloaded=function(){return!!this.active[ze]},He.prototype.numActive=function(){return Object.keys(this.active).length};var St,gt=Math.floor(a.browser.hardwareConcurrency/2);function Le(){return St||(St=new He),St}function ft(n,s){var o={};for(var h in n)h!=="ref"&&(o[h]=n[h]);return a.refProperties.forEach(function(y){y in s&&(o[y]=s[y])}),o}function ot(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var h=0;h<n.length;h++)"ref"in n[h]&&(n[h]=ft(n[h],s[n[h].ref]));return n}He.workerCount=Math.max(Math.min(gt,6),1);var ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $t(n,s,o){o.push({command:ht.addSource,args:[n,s[n]]})}function ut(n,s,o){s.push({command:ht.removeSource,args:[n]}),o[n]=!0}function mr(n,s,o,h){ut(n,o,h),$t(n,s,o)}function Kr(n,s,o){var h;for(h in n[o])if(n[o].hasOwnProperty(h)&&h!=="data"&&!a.deepEqual(n[o][h],s[o][h]))return!1;for(h in s[o])if(s[o].hasOwnProperty(h)&&h!=="data"&&!a.deepEqual(n[o][h],s[o][h]))return!1;return!0}function er(n,s,o,h,y,w){var E;for(E in s=s||{},n=n||{})n.hasOwnProperty(E)&&(a.deepEqual(n[E],s[E])||o.push({command:w,args:[h,E,s[E],y]}));for(E in s)s.hasOwnProperty(E)&&!n.hasOwnProperty(E)&&(a.deepEqual(n[E],s[E])||o.push({command:w,args:[h,E,s[E],y]}))}function et(n){return n.id}function Nt(n,s){return n[s.id]=s,n}var li=function(n,s){this.reset(n,s)};li.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},li.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=a.clamp(n,0,1);for(var s=1,o=this._distances[s],h=n*this.paddedLength+this.padding;o<h&&s<this._distances.length;)o=this._distances[++s];var y=s-1,w=this._distances[y],E=o-w,T=E>0?(h-w)/E:0;return this.points[y].mult(1-T).add(this.points[s].mult(T))};var Ir=function(n,s,o){var h=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var w=0;w<this.xCellCount*this.yCellCount;w++)h.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function xr(n,s,o,h,y){var w=a.create();return s?(a.scale(w,w,[1/y,1/y,1]),o||a.rotateZ(w,w,h.angle)):a.multiply(w,h.labelPlaneMatrix,n),w}function Ar(n,s,o,h,y){if(s){var w=a.clone(n);return a.scale(w,w,[y,y,1]),o||a.rotateZ(w,w,-h.angle),w}return h.glCoordMatrix}function pr(n,s){var o=[n.x,n.y,0,1];Ti(o,o,s);var h=o[3];return{point:new a.Point(o[0]/h,o[1]/h),signedDistanceFromCamera:h}}function Ft(n,s){return .5+n/s*.5}function Wi(n,s){var o=n[0]/n[3],h=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&h>=-s[1]&&h<=s[1]}function Gn(n,s,o,h,y,w,E,T){var B=h?n.textSizeData:n.iconSizeData,U=a.evaluateSizeForZoom(B,o.transform.zoom),J=[256/o.width*2+1,256/o.height*2+1],$=h?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;$.clear();for(var ee=n.lineVertexArray,le=h?n.text.placedSymbolArray:n.icon.placedSymbolArray,oe=o.transform.width/o.transform.height,me=!1,ie=0;ie<le.length;ie++){var de=le.get(ie);if(de.hidden||de.writingMode===a.WritingMode.vertical&&!me)Ui(de.numGlyphs,$);else{me=!1;var be=[de.anchorX,de.anchorY,0,1];if(a.transformMat4(be,be,s),Wi(be,J)){var Ae=Ft(o.transform.cameraToCenterDistance,be[3]),Ue=a.evaluateSizeForFeature(B,U,de),Fe=E?Ue/Ae:Ue*Ae,je=new a.Point(de.anchorX,de.anchorY),tt=pr(je,y).point,_t={},dt=pa(de,Fe,!1,T,s,y,w,n.glyphOffsetArray,ee,$,tt,je,_t,oe);me=dt.useVertical,(dt.notEnoughRoom||me||dt.needsFlipping&&pa(de,Fe,!0,T,s,y,w,n.glyphOffsetArray,ee,$,tt,je,_t,oe).notEnoughRoom)&&Ui(de.numGlyphs,$)}else Ui(de.numGlyphs,$)}}h?n.text.dynamicLayoutVertexBuffer.updateData($):n.icon.dynamicLayoutVertexBuffer.updateData($)}function gi(n,s,o,h,y,w,E,T,B,U,J){var $=T.glyphStartIndex+T.numGlyphs,ee=T.lineStartIndex,le=T.lineStartIndex+T.lineLength,oe=s.getoffsetX(T.glyphStartIndex),me=s.getoffsetX($-1),ie=_i(n*oe,o,h,y,w,E,T.segment,ee,le,B,U,J);if(!ie)return null;var de=_i(n*me,o,h,y,w,E,T.segment,ee,le,B,U,J);return de?{first:ie,last:de}:null}function Ji(n,s,o,h){return n===a.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*h?{useVertical:!0}:(n===a.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function pa(n,s,o,h,y,w,E,T,B,U,J,$,ee,le){var oe,me=s/24,ie=n.lineOffsetX*me,de=n.lineOffsetY*me;if(n.numGlyphs>1){var be=n.glyphStartIndex+n.numGlyphs,Ae=n.lineStartIndex,Ue=n.lineStartIndex+n.lineLength,Fe=gi(me,T,ie,de,o,J,$,n,B,w,ee);if(!Fe)return{notEnoughRoom:!0};var je=pr(Fe.first.point,E).point,tt=pr(Fe.last.point,E).point;if(h&&!o){var _t=Ji(n.writingMode,je,tt,le);if(_t)return _t}oe=[Fe.first];for(var dt=n.glyphStartIndex+1;dt<be-1;dt++)oe.push(_i(me*T.getoffsetX(dt),ie,de,o,J,$,n.segment,Ae,Ue,B,w,ee));oe.push(Fe.last)}else{if(h&&!o){var Ot=pr($,y).point,nr=n.lineStartIndex+n.segment+1,ur=new a.Point(B.getx(nr),B.gety(nr)),sr=pr(ur,y),ci=sr.signedDistanceFromCamera>0?sr.point:vn($,ur,Ot,1,y),Vt=Ji(n.writingMode,Ot,ci,le);if(Vt)return Vt}var Pr=_i(me*T.getoffsetX(n.glyphStartIndex),ie,de,o,J,$,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,B,w,ee);if(!Pr)return{notEnoughRoom:!0};oe=[Pr]}for(var jr=0,zr=oe;jr<zr.length;jr+=1){var Tr=zr[jr];a.addDynamicAttributes(U,Tr.point,Tr.angle)}return{}}function vn(n,s,o,h,y){var w=pr(n.add(n.sub(s)._unit()),y).point,E=o.sub(w);return o.add(E._mult(h/E.mag()))}function _i(n,s,o,h,y,w,E,T,B,U,J,$){var ee=h?n-s:n+s,le=ee>0?1:-1,oe=0;h&&(le*=-1,oe=Math.PI),le<0&&(oe+=Math.PI);for(var me=le>0?T+E:T+E+1,ie=y,de=y,be=0,Ae=0,Ue=Math.abs(ee),Fe=[];be+Ae<=Ue;){if((me+=le)<T||me>=B)return null;if(de=ie,Fe.push(ie),(ie=$[me])===void 0){var je=new a.Point(U.getx(me),U.gety(me)),tt=pr(je,J);if(tt.signedDistanceFromCamera>0)ie=$[me]=tt.point;else{var _t=me-le;ie=vn(be===0?w:new a.Point(U.getx(_t),U.gety(_t)),je,de,Ue-be+1,J)}}be+=Ae,Ae=de.dist(ie)}var dt=(Ue-be)/Ae,Ot=ie.sub(de),nr=Ot.mult(dt)._add(de);nr._add(Ot._unit()._perp()._mult(o*le));var ur=oe+Math.atan2(ie.y-de.y,ie.x-de.x);return Fe.push(nr),{point:nr,angle:ur,path:Fe}}Ir.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ir.prototype.insert=function(n,s,o,h,y){this._forEachCell(s,o,h,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(y)},Ir.prototype.insertCircle=function(n,s,o,h){this._forEachCell(s-h,o-h,s+h,o+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(h)},Ir.prototype._insertBoxCell=function(n,s,o,h,y,w){this.boxCells[y].push(w)},Ir.prototype._insertCircleCell=function(n,s,o,h,y,w){this.circleCells[y].push(w)},Ir.prototype._query=function(n,s,o,h,y,w){if(o<0||n>this.width||h<0||s>this.height)return!y&&[];var E=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=h){if(y)return!0;for(var T=0;T<this.boxKeys.length;T++)E.push({key:this.boxKeys[T],x1:this.bboxes[4*T],y1:this.bboxes[4*T+1],x2:this.bboxes[4*T+2],y2:this.bboxes[4*T+3]});for(var B=0;B<this.circleKeys.length;B++){var U=this.circles[3*B],J=this.circles[3*B+1],$=this.circles[3*B+2];E.push({key:this.circleKeys[B],x1:U-$,y1:J-$,x2:U+$,y2:J+$})}return w?E.filter(w):E}return this._forEachCell(n,s,o,h,this._queryCell,E,{hitTest:y,seenUids:{box:{},circle:{}}},w),y?E.length>0:E},Ir.prototype._queryCircle=function(n,s,o,h,y){var w=n-o,E=n+o,T=s-o,B=s+o;if(E<0||w>this.width||B<0||T>this.height)return!h&&[];var U=[];return this._forEachCell(w,T,E,B,this._queryCellCircle,U,{hitTest:h,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},y),h?U.length>0:U},Ir.prototype.query=function(n,s,o,h,y){return this._query(n,s,o,h,!1,y)},Ir.prototype.hitTest=function(n,s,o,h,y){return this._query(n,s,o,h,!0,y)},Ir.prototype.hitTestCircle=function(n,s,o,h){return this._queryCircle(n,s,o,!0,h)},Ir.prototype._queryCell=function(n,s,o,h,y,w,E,T){var B=E.seenUids,U=this.boxCells[y];if(U!==null)for(var J=this.bboxes,$=0,ee=U;$<ee.length;$+=1){var le=ee[$];if(!B.box[le]){B.box[le]=!0;var oe=4*le;if(n<=J[oe+2]&&s<=J[oe+3]&&o>=J[oe+0]&&h>=J[oe+1]&&(!T||T(this.boxKeys[le]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[le],x1:J[oe],y1:J[oe+1],x2:J[oe+2],y2:J[oe+3]})}}}var me=this.circleCells[y];if(me!==null)for(var ie=this.circles,de=0,be=me;de<be.length;de+=1){var Ae=be[de];if(!B.circle[Ae]){B.circle[Ae]=!0;var Ue=3*Ae;if(this._circleAndRectCollide(ie[Ue],ie[Ue+1],ie[Ue+2],n,s,o,h)&&(!T||T(this.circleKeys[Ae]))){if(E.hitTest)return w.push(!0),!0;var Fe=ie[Ue],je=ie[Ue+1],tt=ie[Ue+2];w.push({key:this.circleKeys[Ae],x1:Fe-tt,y1:je-tt,x2:Fe+tt,y2:je+tt})}}}},Ir.prototype._queryCellCircle=function(n,s,o,h,y,w,E,T){var B=E.circle,U=E.seenUids,J=this.boxCells[y];if(J!==null)for(var $=this.bboxes,ee=0,le=J;ee<le.length;ee+=1){var oe=le[ee];if(!U.box[oe]){U.box[oe]=!0;var me=4*oe;if(this._circleAndRectCollide(B.x,B.y,B.radius,$[me+0],$[me+1],$[me+2],$[me+3])&&(!T||T(this.boxKeys[oe])))return w.push(!0),!0}}var ie=this.circleCells[y];if(ie!==null)for(var de=this.circles,be=0,Ae=ie;be<Ae.length;be+=1){var Ue=Ae[be];if(!U.circle[Ue]){U.circle[Ue]=!0;var Fe=3*Ue;if(this._circlesCollide(de[Fe],de[Fe+1],de[Fe+2],B.x,B.y,B.radius)&&(!T||T(this.circleKeys[Ue])))return w.push(!0),!0}}},Ir.prototype._forEachCell=function(n,s,o,h,y,w,E,T){for(var B=this._convertToXCellCoord(n),U=this._convertToYCellCoord(s),J=this._convertToXCellCoord(o),$=this._convertToYCellCoord(h),ee=B;ee<=J;ee++)for(var le=U;le<=$;le++)if(y.call(this,n,s,o,h,this.xCellCount*le+ee,w,E,T))return},Ir.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},Ir.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},Ir.prototype._circlesCollide=function(n,s,o,h,y,w){var E=h-n,T=y-s,B=o+w;return B*B>E*E+T*T},Ir.prototype._circleAndRectCollide=function(n,s,o,h,y,w,E){var T=(w-h)/2,B=Math.abs(n-(h+T));if(B>T+o)return!1;var U=(E-y)/2,J=Math.abs(s-(y+U));if(J>U+o)return!1;if(B<=T||J<=U)return!0;var $=B-T,ee=J-U;return $*$+ee*ee<=o*o};var On=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ui(n,s){for(var o=0;o<n;o++){var h=s.length;s.resize(h+4),s.float32.set(On,3*h)}}function Ti(n,s,o){var h=s[0],y=s[1];return n[0]=o[0]*h+o[4]*y+o[12],n[1]=o[1]*h+o[5]*y+o[13],n[3]=o[3]*h+o[7]*y+o[15],n}var rn=function(n,s,o){s===void 0&&(s=new Ir(n.width+200,n.height+200,25)),o===void 0&&(o=new Ir(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function ui(n,s,o){return s*(a.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}rn.prototype.placeCollisionBox=function(n,s,o,h,y){var w=this.projectAndGetPerspectiveRatio(h,n.anchorPointX,n.anchorPointY),E=o*w.perspectiveRatio,T=n.x1*E+w.point.x,B=n.y1*E+w.point.y,U=n.x2*E+w.point.x,J=n.y2*E+w.point.y;return!this.isInsideGrid(T,B,U,J)||!s&&this.grid.hitTest(T,B,U,J,y)?{box:[],offscreen:!1}:{box:[T,B,U,J],offscreen:this.isOffscreen(T,B,U,J)}},rn.prototype.placeCollisionCircles=function(n,s,o,h,y,w,E,T,B,U,J,$,ee){var le=[],oe=new a.Point(s.anchorX,s.anchorY),me=pr(oe,w),ie=Ft(this.transform.cameraToCenterDistance,me.signedDistanceFromCamera),de=(U?y/ie:y*ie)/a.ONE_EM,be=pr(oe,E).point,Ae=gi(de,h,s.lineOffsetX*de,s.lineOffsetY*de,!1,be,oe,s,o,E,{}),Ue=!1,Fe=!1,je=!0;if(Ae){for(var tt=.5*$*ie+ee,_t=new a.Point(-100,-100),dt=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),Ot=new li,nr=Ae.first,ur=Ae.last,sr=[],ci=nr.path.length-1;ci>=1;ci--)sr.push(nr.path[ci]);for(var Vt=1;Vt<ur.path.length;Vt++)sr.push(ur.path[Vt]);var Pr=2.5*tt;if(T){var jr=sr.map(function(Ja){return pr(Ja,T)});sr=jr.some(function(Ja){return Ja.signedDistanceFromCamera<=0})?[]:jr.map(function(Ja){return Ja.point})}var zr=[];if(sr.length>0){for(var Tr=sr[0].clone(),Or=sr[0].clone(),wr=1;wr<sr.length;wr++)Tr.x=Math.min(Tr.x,sr[wr].x),Tr.y=Math.min(Tr.y,sr[wr].y),Or.x=Math.max(Or.x,sr[wr].x),Or.y=Math.max(Or.y,sr[wr].y);zr=Tr.x>=_t.x&&Or.x<=dt.x&&Tr.y>=_t.y&&Or.y<=dt.y?[sr]:Or.x<_t.x||Tr.x>dt.x||Or.y<_t.y||Tr.y>dt.y?[]:a.clipLine([sr],_t.x,_t.y,dt.x,dt.y)}for(var _r=0,Cn=zr;_r<Cn.length;_r+=1){var sn;Ot.reset(Cn[_r],.25*tt),sn=Ot.length<=.5*tt?1:Math.ceil(Ot.paddedLength/Pr)+1;for(var Qn=0;Qn<sn;Qn++){var Un=Qn/Math.max(sn-1,1),an=Ot.lerp(Un),mn=an.x+100,za=an.y+100;le.push(mn,za,tt,0);var aa=mn-tt,Xo=za-tt,da=mn+tt,co=za+tt;if(je=je&&this.isOffscreen(aa,Xo,da,co),Fe=Fe||this.isInsideGrid(aa,Xo,da,co),!n&&this.grid.hitTestCircle(mn,za,tt,J)&&(Ue=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Ue}}}}return{circles:!B&&Ue||!Fe?[]:le,offscreen:je,collisionDetected:Ue}},rn.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,h=1/0,y=-1/0,w=-1/0,E=0,T=n;E<T.length;E+=1){var B=T[E],U=new a.Point(B.x+100,B.y+100);o=Math.min(o,U.x),h=Math.min(h,U.y),y=Math.max(y,U.x),w=Math.max(w,U.y),s.push(U)}for(var J={},$={},ee=0,le=this.grid.query(o,h,y,w).concat(this.ignoredGrid.query(o,h,y,w));ee<le.length;ee+=1){var oe=le[ee],me=oe.key;if(J[me.bucketInstanceId]===void 0&&(J[me.bucketInstanceId]={}),!J[me.bucketInstanceId][me.featureIndex]){var ie=[new a.Point(oe.x1,oe.y1),new a.Point(oe.x2,oe.y1),new a.Point(oe.x2,oe.y2),new a.Point(oe.x1,oe.y2)];a.polygonIntersectsPolygon(s,ie)&&(J[me.bucketInstanceId][me.featureIndex]=!0,$[me.bucketInstanceId]===void 0&&($[me.bucketInstanceId]=[]),$[me.bucketInstanceId].push(me.featureIndex))}}return $},rn.prototype.insertCollisionBox=function(n,s,o,h,y){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:h,collisionGroupID:y},n[0],n[1],n[2],n[3])},rn.prototype.insertCollisionCircles=function(n,s,o,h,y){for(var w=s?this.ignoredGrid:this.grid,E={bucketInstanceId:o,featureIndex:h,collisionGroupID:y},T=0;T<n.length;T+=4)w.insertCircle(E,n[T],n[T+1],n[T+2])},rn.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var h=[s,o,0,1];return Ti(h,h,n),{point:new a.Point((h[0]/h[3]+1)/2*this.transform.width+100,(-h[1]/h[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/h[3]*.5}},rn.prototype.isOffscreen=function(n,s,o,h){return o<100||n>=this.screenRightBoundary||h<100||s>this.screenBottomBoundary},rn.prototype.isInsideGrid=function(n,s,o,h){return o>=0&&n<this.gridRightBoundary&&h>=0&&s<this.gridBottomBoundary},rn.prototype.getViewportMatrix=function(){var n=a.identity([]);return a.translate(n,n,[-100,-100,0]),n};var Sn=function(n,s,o,h){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):h&&o?1:0,this.placed=o};Sn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Yi=function(n,s,o,h,y){this.text=new Sn(n?n.text:null,s,o,y),this.icon=new Sn(n?n.icon:null,s,h,y)};Yi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ca=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Ai=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},Fn=function(n,s,o,h,y){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=h,this.tileID=y},Ri=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function zi(n,s,o,h,y){var w=a.getAnchorAlignment(n),E=-(w.horizontalAlign-.5)*s,T=-(w.verticalAlign-.5)*o,B=a.evaluateVariableOffset(n,h);return new a.Point(E+B[0]*y,T+B[1]*y)}function cn(n,s,o,h,y,w){var E=n.x1,T=n.x2,B=n.y1,U=n.y2,J=n.anchorPointX,$=n.anchorPointY,ee=new a.Point(s,o);return h&&ee._rotate(y?w:-w),{x1:E+ee.x,y1:B+ee.y,x2:T+ee.x,y2:U+ee.y,anchorPointX:J,anchorPointY:$}}Ri.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var Bi=function(n,s,o,h){this.transform=n.clone(),this.collisionIndex=new rn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Ri(o),this.collisionCircleArrays={},this.prevPlacement=h,h&&(h.prevPlacement=void 0),this.placedOrientations={}};function ji(n,s,o,h,y){n.emplaceBack(s?1:0,o?1:0,h||0,y||0),n.emplaceBack(s?1:0,o?1:0,h||0,y||0),n.emplaceBack(s?1:0,o?1:0,h||0,y||0),n.emplaceBack(s?1:0,o?1:0,h||0,y||0)}Bi.prototype.getBucketParts=function(n,s,o,h){var y=o.getBucket(s),w=o.latestFeatureIndex;if(y&&w&&s.id===y.layerIds[0]){var E=o.collisionBoxArray,T=y.layers[0].layout,B=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),U=o.tileSize/a.EXTENT,J=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),$=T.get("text-pitch-alignment")==="map",ee=T.get("text-rotation-alignment")==="map",le=ui(o,1,this.transform.zoom),oe=xr(J,$,ee,this.transform,le),me=null;if($){var ie=Ar(J,$,ee,this.transform,le);me=a.multiply([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[y.bucketInstanceId]=new Fn(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,o.tileID);var de={bucket:y,layout:T,posMatrix:J,textLabelPlaneMatrix:oe,labelToScreenMatrix:me,scale:B,textPixelRatio:U,holdingForFade:o.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(h)for(var be=0,Ae=y.sortKeyRanges;be<Ae.length;be+=1){var Ue=Ae[be];n.push({sortKey:Ue.sortKey,symbolInstanceStart:Ue.symbolInstanceStart,symbolInstanceEnd:Ue.symbolInstanceEnd,parameters:de})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:de})}},Bi.prototype.attemptAnchorPlacement=function(n,s,o,h,y,w,E,T,B,U,J,$,ee,le,oe){var me,ie=[$.textOffset0,$.textOffset1],de=zi(n,o,h,ie,y),be=this.collisionIndex.placeCollisionBox(cn(s,de.x,de.y,w,E,this.transform.angle),J,T,B,U.predicate);if(!oe||this.collisionIndex.placeCollisionBox(cn(oe,de.x,de.y,w,E,this.transform.angle),J,T,B,U.predicate).box.length!==0)return be.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID].text&&(me=this.prevPlacement.variableOffsets[$.crossTileID].anchor),this.variableOffsets[$.crossTileID]={textOffset:ie,width:o,height:h,anchor:n,textBoxScale:y,prevAnchor:me},this.markUsedJustification(ee,n,$,le),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,le,$),this.placedOrientations[$.crossTileID]=le),{shift:de,placedGlyphBoxes:be}):void 0},Bi.prototype.placeLayerBucketPart=function(n,s,o){var h=this,y=n.parameters,w=y.bucket,E=y.layout,T=y.posMatrix,B=y.textLabelPlaneMatrix,U=y.labelToScreenMatrix,J=y.textPixelRatio,$=y.holdingForFade,ee=y.collisionBoxArray,le=y.partiallyEvaluatedTextSize,oe=y.collisionGroup,me=E.get("text-optional"),ie=E.get("icon-optional"),de=E.get("text-allow-overlap"),be=E.get("icon-allow-overlap"),Ae=E.get("text-rotation-alignment")==="map",Ue=E.get("text-pitch-alignment")==="map",Fe=E.get("icon-text-fit")!=="none",je=E.get("symbol-z-order")==="viewport-y",tt=de&&(be||!w.hasIconData()||ie),_t=be&&(de||!w.hasTextData()||me);!w.collisionArrays&&ee&&w.deserializeCollisionBoxes(ee);var dt=function(Vt,Pr){if(!s[Vt.crossTileID])if($)h.placements[Vt.crossTileID]=new Ca(!1,!1,!1);else{var jr,zr=!1,Tr=!1,Or=!0,wr=null,_r={box:null,offscreen:null},Cn={box:null,offscreen:null},sn=null,Qn=null,Un=0,an=0,mn=0;Pr.textFeatureIndex?Un=Pr.textFeatureIndex:Vt.useRuntimeCollisionCircles&&(Un=Vt.featureIndex),Pr.verticalTextFeatureIndex&&(an=Pr.verticalTextFeatureIndex);var za=Pr.textBox;if(za){var aa=function(vi){var Oa=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!vi&&h.prevPlacement){var ma=h.prevPlacement.placedOrientations[Vt.crossTileID];ma&&(h.placedOrientations[Vt.crossTileID]=ma,h.markUsedOrientation(w,Oa=ma,Vt))}return Oa},Xo=function(vi,Oa){if(w.allowVerticalPlacement&&Vt.numVerticalGlyphVertices>0&&Pr.verticalTextBox)for(var ma=0,bs=w.writingModes;ma<bs.length&&(bs[ma]===a.WritingMode.vertical?(_r=Oa(),Cn=_r):_r=vi(),!(_r&&_r.box&&_r.box.length));ma+=1);else _r=vi()};if(E.get("text-variable-anchor")){var da=E.get("text-variable-anchor");if(h.prevPlacement&&h.prevPlacement.variableOffsets[Vt.crossTileID]){var co=h.prevPlacement.variableOffsets[Vt.crossTileID];da.indexOf(co.anchor)>0&&(da=da.filter(function(vi){return vi!==co.anchor})).unshift(co.anchor)}var Ja=function(vi,Oa,ma){for(var bs=vi.x2-vi.x1,Wh=vi.y2-vi.y1,eu=Vt.textBoxScale,Jh=Fe&&!be?Oa:null,Il={box:[],offscreen:!1},jc=de?2*da.length:da.length,Ks=0;Ks<jc;++Ks){var tu=h.attemptAnchorPlacement(da[Ks%da.length],vi,bs,Wh,eu,Ae,Ue,J,T,oe,Ks>=da.length,Vt,w,ma,Jh);if(tu&&(Il=tu.placedGlyphBoxes)&&Il.box&&Il.box.length){zr=!0,wr=tu.shift;break}}return Il};Xo(function(){return Ja(za,Pr.iconBox,a.WritingMode.horizontal)},function(){var vi=Pr.verticalTextBox;return w.allowVerticalPlacement&&!(_r&&_r.box&&_r.box.length)&&Vt.numVerticalGlyphVertices>0&&vi?Ja(vi,Pr.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),_r&&(zr=_r.box,Or=_r.offscreen);var El=aa(_r&&_r.box);if(!zr&&h.prevPlacement){var Zs=h.prevPlacement.variableOffsets[Vt.crossTileID];Zs&&(h.variableOffsets[Vt.crossTileID]=Zs,h.markUsedJustification(w,Zs.anchor,Vt,El))}}else{var Wo=function(vi,Oa){var ma=h.collisionIndex.placeCollisionBox(vi,de,J,T,oe.predicate);return ma&&ma.box&&ma.box.length&&(h.markUsedOrientation(w,Oa,Vt),h.placedOrientations[Vt.crossTileID]=Oa),ma};Xo(function(){return Wo(za,a.WritingMode.horizontal)},function(){var vi=Pr.verticalTextBox;return w.allowVerticalPlacement&&Vt.numVerticalGlyphVertices>0&&vi?Wo(vi,a.WritingMode.vertical):{box:null,offscreen:null}}),aa(_r&&_r.box&&_r.box.length)}}if(zr=(jr=_r)&&jr.box&&jr.box.length>0,Or=jr&&jr.offscreen,Vt.useRuntimeCollisionCircles){var Gs=w.text.placedSymbolArray.get(Vt.centerJustifiedTextSymbolIndex),Sl=a.evaluateSizeForFeature(w.textSizeData,le,Gs),bo=E.get("text-padding");sn=h.collisionIndex.placeCollisionCircles(de,Gs,w.lineVertexArray,w.glyphOffsetArray,Sl,T,B,U,o,Ue,oe.predicate,Vt.collisionCircleDiameter,bo),zr=de||sn.circles.length>0&&!sn.collisionDetected,Or=Or&&sn.offscreen}if(Pr.iconFeatureIndex&&(mn=Pr.iconFeatureIndex),Pr.iconBox){var kl=function(vi){var Oa=Fe&&wr?cn(vi,wr.x,wr.y,Ae,Ue,h.transform.angle):vi;return h.collisionIndex.placeCollisionBox(Oa,be,J,T,oe.predicate)};Tr=Cn&&Cn.box&&Cn.box.length&&Pr.verticalIconBox?(Qn=kl(Pr.verticalIconBox)).box.length>0:(Qn=kl(Pr.iconBox)).box.length>0,Or=Or&&Qn.offscreen}var xo=me||Vt.numHorizontalGlyphVertices===0&&Vt.numVerticalGlyphVertices===0,Mn=ie||Vt.numIconVertices===0;if(xo||Mn?Mn?xo||(Tr=Tr&&zr):zr=Tr&&zr:Tr=zr=Tr&&zr,zr&&jr&&jr.box&&h.collisionIndex.insertCollisionBox(jr.box,E.get("text-ignore-placement"),w.bucketInstanceId,Cn&&Cn.box&&an?an:Un,oe.ID),Tr&&Qn&&h.collisionIndex.insertCollisionBox(Qn.box,E.get("icon-ignore-placement"),w.bucketInstanceId,mn,oe.ID),sn&&(zr&&h.collisionIndex.insertCollisionCircles(sn.circles,E.get("text-ignore-placement"),w.bucketInstanceId,Un,oe.ID),o)){var Po=w.bucketInstanceId,Jo=h.collisionCircleArrays[Po];Jo===void 0&&(Jo=h.collisionCircleArrays[Po]=new Ai);for(var vs=0;vs<sn.circles.length;vs+=4)Jo.circles.push(sn.circles[vs+0]),Jo.circles.push(sn.circles[vs+1]),Jo.circles.push(sn.circles[vs+2]),Jo.circles.push(sn.collisionDetected?1:0)}h.placements[Vt.crossTileID]=new Ca(zr||tt,Tr||_t,Or||w.justReloaded),s[Vt.crossTileID]=!0}};if(je)for(var Ot=w.getSortedSymbolIndexes(this.transform.angle),nr=Ot.length-1;nr>=0;--nr){var ur=Ot[nr];dt(w.symbolInstances.get(ur),w.collisionArrays[ur])}else for(var sr=n.symbolInstanceStart;sr<n.symbolInstanceEnd;sr++)dt(w.symbolInstances.get(sr),w.collisionArrays[sr]);if(o&&w.bucketInstanceId in this.collisionCircleArrays){var ci=this.collisionCircleArrays[w.bucketInstanceId];a.invert(ci.invProjMatrix,T),ci.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Bi.prototype.markUsedJustification=function(n,s,o,h){var y;y=h===a.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];for(var w=0,E=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var T=E[w];T>=0&&(n.text.placedSymbolArray.get(T).crossTileID=y>=0&&T!==y?0:o.crossTileID)}},Bi.prototype.markUsedOrientation=function(n,s,o){for(var h=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,y=s===a.WritingMode.vertical?s:0,w=0,E=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];w<E.length;w+=1)n.text.placedSymbolArray.get(E[w]).placedOrientation=h;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=y)},Bi.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var h=s?s.symbolFadeChange(n):1,y=s?s.opacities:{},w=s?s.variableOffsets:{},E=s?s.placedOrientations:{};for(var T in this.placements){var B=this.placements[T],U=y[T];U?(this.opacities[T]=new Yi(U,h,B.text,B.icon),o=o||B.text!==U.text.placed||B.icon!==U.icon.placed):(this.opacities[T]=new Yi(null,h,B.text,B.icon,B.skipFade),o=o||B.text||B.icon)}for(var J in y){var $=y[J];if(!this.opacities[J]){var ee=new Yi($,h,!1,!1);ee.isHidden()||(this.opacities[J]=ee,o=o||$.text.placed||$.icon.placed)}}for(var le in w)this.variableOffsets[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.variableOffsets[le]=w[le]);for(var oe in E)this.placedOrientations[oe]||!this.opacities[oe]||this.opacities[oe].isHidden()||(this.placedOrientations[oe]=E[oe]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},Bi.prototype.updateLayerOpacities=function(n,s){for(var o={},h=0,y=s;h<y.length;h+=1){var w=y[h],E=w.getBucket(n);E&&w.latestFeatureIndex&&n.id===E.layerIds[0]&&this.updateBucketOpacities(E,o,w.collisionBoxArray)}},Bi.prototype.updateBucketOpacities=function(n,s,o){var h=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var y=n.layers[0].layout,w=new Yi(null,0,!1,!1,!0),E=y.get("text-allow-overlap"),T=y.get("icon-allow-overlap"),B=y.get("text-variable-anchor"),U=y.get("text-rotation-alignment")==="map",J=y.get("text-pitch-alignment")==="map",$=y.get("icon-text-fit")!=="none",ee=new Yi(null,0,E&&(T||!n.hasIconData()||y.get("icon-optional")),T&&(E||!n.hasTextData()||y.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var le=function(de,be,Ae){for(var Ue=0;Ue<be/4;Ue++)de.opacityVertexArray.emplaceBack(Ae)},oe=function(de){var be=n.symbolInstances.get(de),Ae=be.numHorizontalGlyphVertices,Ue=be.numVerticalGlyphVertices,Fe=be.crossTileID,je=h.opacities[Fe];s[Fe]?je=w:je||(h.opacities[Fe]=je=ee),s[Fe]=!0;var tt=be.numIconVertices>0,_t=h.placedOrientations[be.crossTileID],dt=_t===a.WritingMode.vertical,Ot=_t===a.WritingMode.horizontal||_t===a.WritingMode.horizontalOnly;if(Ae>0||Ue>0){var nr=ta(je.text);le(n.text,Ae,dt?pn:nr),le(n.text,Ue,Ot?pn:nr);var ur=je.text.isHidden();[be.rightJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.leftJustifiedTextSymbolIndex].forEach(function(_r){_r>=0&&(n.text.placedSymbolArray.get(_r).hidden=ur||dt?1:0)}),be.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(be.verticalPlacedTextSymbolIndex).hidden=ur||Ot?1:0);var sr=h.variableOffsets[be.crossTileID];sr&&h.markUsedJustification(n,sr.anchor,be,_t);var ci=h.placedOrientations[be.crossTileID];ci&&(h.markUsedJustification(n,"left",be,ci),h.markUsedOrientation(n,ci,be))}if(tt){var Vt=ta(je.icon),Pr=!($&&be.verticalPlacedIconSymbolIndex&&dt);be.placedIconSymbolIndex>=0&&(le(n.icon,be.numIconVertices,Pr?Vt:pn),n.icon.placedSymbolArray.get(be.placedIconSymbolIndex).hidden=je.icon.isHidden()),be.verticalPlacedIconSymbolIndex>=0&&(le(n.icon,be.numVerticalIconVertices,Pr?pn:Vt),n.icon.placedSymbolArray.get(be.verticalPlacedIconSymbolIndex).hidden=je.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var jr=n.collisionArrays[de];if(jr){var zr=new a.Point(0,0);if(jr.textBox||jr.verticalTextBox){var Tr=!0;if(B){var Or=h.variableOffsets[Fe];Or?(zr=zi(Or.anchor,Or.width,Or.height,Or.textOffset,Or.textBoxScale),U&&zr._rotate(J?h.transform.angle:-h.transform.angle)):Tr=!1}jr.textBox&&ji(n.textCollisionBox.collisionVertexArray,je.text.placed,!Tr||dt,zr.x,zr.y),jr.verticalTextBox&&ji(n.textCollisionBox.collisionVertexArray,je.text.placed,!Tr||Ot,zr.x,zr.y)}var wr=Boolean(!Ot&&jr.verticalIconBox);jr.iconBox&&ji(n.iconCollisionBox.collisionVertexArray,je.icon.placed,wr,$?zr.x:0,$?zr.y:0),jr.verticalIconBox&&ji(n.iconCollisionBox.collisionVertexArray,je.icon.placed,!wr,$?zr.x:0,$?zr.y:0)}}},me=0;me<n.symbolInstances.length;me++)oe(me);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var ie=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ie.invProjMatrix,n.placementViewportMatrix=ie.viewportMatrix,n.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},Bi.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Bi.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},Bi.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},Bi.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},Bi.prototype.setStale=function(){this.stale=!0};var ja=Math.pow(2,25),ho=Math.pow(2,24),qa=Math.pow(2,17),io=Math.pow(2,16),bn=Math.pow(2,9),hn=Math.pow(2,8),Za=Math.pow(2,1);function ta(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*ja+s*ho+o*qa+s*io+o*bn+s*hn+o*Za+s}var pn=0,Ga=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ga.prototype.continuePlacement=function(n,s,o,h,y){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,h,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,T){return E.sortKey-T.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,y())return!0;return!1};var va=function(n,s,o,h,y,w,E){this.placement=new Bi(n,y,w,E),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=h,this._done=!1};va.prototype.isDone=function(){return this._done},va.prototype.continuePlacement=function(n,s,o){for(var h=this,y=a.browser.now(),w=function(){var B=a.browser.now()-y;return!h._forceFullPlacement&&B>2};this._currentPlacementIndex>=0;){var E=s[n[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=T)&&(!E.maxzoom||E.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Ga(E)),this._inProgressLayer.continuePlacement(o[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},va.prototype.commit=function(n){return this.placement.commit(n),this.placement};var Nn=512/a.EXTENT/2,ki=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var h=0;h<s.length;h++){var y=s.get(h),w=y.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:y.crossTileID,coord:this.getScaledCoordinates(y,n)})}};ki.prototype.getScaledCoordinates=function(n,s){var o=Nn/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*a.EXTENT+n.anchorY)*o)}},ki.prototype.findMatches=function(n,s,o){for(var h=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),y=0;y<n.length;y++){var w=n.get(y);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var T=this.getScaledCoordinates(w,s),B=0,U=E;B<U.length;B+=1){var J=U[B];if(Math.abs(J.coord.x-T.x)<=h&&Math.abs(J.coord.y-T.y)<=h&&!o[J.crossTileID]){o[J.crossTileID]=!0,w.crossTileID=J.crossTileID;break}}}}};var fi=function(){this.maxCrossTileID=0};fi.prototype.generate=function(){return++this.maxCrossTileID};var Ei=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ei.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var h=this.indexes[o],y={};for(var w in h){var E=h[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+s),y[E.tileID.key]=E}this.indexes[o]=y}this.lng=n},Ei.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var h=0;h<s.symbolInstances.length;h++)s.symbolInstances.get(h).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var y=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>n.overscaledZ)for(var T in E){var B=E[T];B.tileID.isChildOf(n)&&B.findMatches(s.symbolInstances,n,y)}else{var U=E[n.scaledTo(Number(w)).key];U&&U.findMatches(s.symbolInstances,n,y)}}for(var J=0;J<s.symbolInstances.length;J++){var $=s.symbolInstances.get(J);$.crossTileID||($.crossTileID=o.generate(),y[$.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ki(n,s.symbolInstances,s.bucketInstanceId),!0},Ei.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var h=0,y=s.indexedSymbolInstances[o];h<y.length;h+=1)delete this.usedCrossTileIDs[n][y[h].crossTileID]},Ei.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var h=this.indexes[o];for(var y in h)n[h[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,h[y]),delete h[y],s=!0)}return s};var ve=function(){this.layerIndexes={},this.crossTileIDs=new fi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ve.prototype.addLayer=function(n,s,o){var h=this.layerIndexes[n.id];h===void 0&&(h=this.layerIndexes[n.id]=new Ei);var y=!1,w={};h.handleWrapJump(o);for(var E=0,T=s;E<T.length;E+=1){var B=T[E],U=B.getBucket(n);U&&n.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(B.tileID,U,this.crossTileIDs)&&(y=!0),w[U.bucketInstanceId]=!0)}return h.removeStaleBuckets(w)&&(y=!0),y},ve.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(h){s[h]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var xn=function(n,s){return a.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},nn=a.pick(ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hr=a.pick(ht,["setCenter","setZoom","setBearing","setPitch"]),ra=function(){var n={},s=a.styleSpec.$version;for(var o in a.styleSpec.$root){var h,y=a.styleSpec.$root[o];y.required&&(h=o==="version"?s:y.type==="array"?[]:{})!=null&&(n[o]=h)}return n}(),fn=function(n){function s(o,h){var y=this;h===void 0&&(h={}),n.call(this),this.map=o,this.dispatcher=new Qe(Le(),this),this.imageManager=new Ce,this.imageManager.setEventedParent(this),this.glyphManager=new pt(o._requestManager,h.localIdeographFontFamily),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new ve,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(T,B){if(a.triggerPluginCompletionEvent(T),B&&B.every(function(J){return J}))for(var U in w.sourceCaches)w.sourceCaches[U].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var T=y.sourceCaches[E.sourceId];if(T){var B=T.getSource();if(B&&B.vectorLayerIds)for(var U in y._layers){var J=y._layers[U];J.source===B.id&&y._validateLayer(J)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,h){var y=this;h===void 0&&(h={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var w=typeof h.validate=="boolean"?h.validate:!a.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,h.accessToken);var E=this.map._requestManager.transformRequest(o,a.ResourceType.Style);this._request=a.getJSON(E,function(T,B){y._request=null,T?y.fire(new a.ErrorEvent(T)):B&&y._load(B,w)})},s.prototype.loadJSON=function(o,h){var y=this;h===void 0&&(h={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){y._request=null,y._load(o,h.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ra,!1)},s.prototype._load=function(o,h){if(!h||!xn(this,a.validateStyle(o))){for(var y in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(y,o.sources[y],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var w=ot(this.stylesheet.layers);this._order=w.map(function(U){return U.id}),this._layers={},this._serializedLayers={};for(var E=0,T=w;E<T.length;E+=1){var B=T[E];(B=a.createStyleLayer(B)).setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new it(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},s.prototype._loadSprite=function(o){var h=this;this._spriteRequest=function(y,w,E){var T,B,U,J=a.browser.devicePixelRatio>1?"@2x":"",$=a.getJSON(w.transformRequest(w.normalizeSpriteURL(y,J,".json"),a.ResourceType.SpriteJSON),function(oe,me){$=null,U||(U=oe,T=me,le())}),ee=a.getImage(w.transformRequest(w.normalizeSpriteURL(y,J,".png"),a.ResourceType.SpriteImage),function(oe,me){ee=null,U||(U=oe,B=me,le())});function le(){if(U)E(U);else if(T&&B){var oe=a.browser.getImageData(B),me={};for(var ie in T){var de=T[ie],be=de.width,Ae=de.height,Ue=de.x,Fe=de.y,je=de.sdf,tt=de.pixelRatio,_t=de.stretchX,dt=de.stretchY,Ot=de.content,nr=new a.RGBAImage({width:be,height:Ae});a.RGBAImage.copy(oe,nr,{x:Ue,y:Fe},{x:0,y:0},{width:be,height:Ae}),me[ie]={data:nr,pixelRatio:tt,sdf:je,stretchX:_t,stretchY:dt,content:Ot}}E(null,me)}}return{cancel:function(){$&&($.cancel(),$=null),ee&&(ee.cancel(),ee=null)}}}(o,this.map._requestManager,function(y,w){if(h._spriteRequest=null,y)h.fire(new a.ErrorEvent(y));else if(w)for(var E in w)h.imageManager.addImage(E,w[E]);h.imageManager.setLoaded(!0),h._availableImages=h.imageManager.listImages(),h.dispatcher.broadcast("setImages",h._availableImages),h.fire(new a.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var h=this.sourceCaches[o.source];if(h){var y=o.sourceLayer;if(y){var w=h.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+y+'" does not exist on source "'+w.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var h=[],y=0,w=o;y<w.length;y+=1){var E=this._layers[w[y]];E.type!=="custom"&&h.push(E.serialize())}return h},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var h in this._layers)if(this._layers[h].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var h=this._changed;if(this._changed){var y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(y.length||w.length)&&this._updateWorkerLayers(y,w),this._updatedSources){var T=this._updatedSources[E];T==="reload"?this._reloadSource(E):T==="clear"&&this._clearSource(E)}for(var B in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[B].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var U={};for(var J in this.sourceCaches){var $=this.sourceCaches[J];U[J]=$.used,$.used=!1}for(var ee=0,le=this._order;ee<le.length;ee+=1){var oe=this._layers[le[ee]];oe.recalculate(o,this._availableImages),!oe.isHidden(o.zoom)&&oe.source&&(this.sourceCaches[oe.source].used=!0)}for(var me in U){var ie=this.sourceCaches[me];U[me]!==ie.used&&ie.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:me}))}this.light.recalculate(o),this.z=o.zoom,h&&this.fire(new a.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:h})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var h=this;if(this._checkLoaded(),xn(this,a.validateStyle(o)))return!1;(o=a.clone$1(o)).layers=ot(o.layers);var y=function(E,T){if(!E)return[{command:ht.setStyle,args:[T]}];var B=[];try{if(!a.deepEqual(E.version,T.version))return[{command:ht.setStyle,args:[T]}];a.deepEqual(E.center,T.center)||B.push({command:ht.setCenter,args:[T.center]}),a.deepEqual(E.zoom,T.zoom)||B.push({command:ht.setZoom,args:[T.zoom]}),a.deepEqual(E.bearing,T.bearing)||B.push({command:ht.setBearing,args:[T.bearing]}),a.deepEqual(E.pitch,T.pitch)||B.push({command:ht.setPitch,args:[T.pitch]}),a.deepEqual(E.sprite,T.sprite)||B.push({command:ht.setSprite,args:[T.sprite]}),a.deepEqual(E.glyphs,T.glyphs)||B.push({command:ht.setGlyphs,args:[T.glyphs]}),a.deepEqual(E.transition,T.transition)||B.push({command:ht.setTransition,args:[T.transition]}),a.deepEqual(E.light,T.light)||B.push({command:ht.setLight,args:[T.light]});var U={},J=[];(function(ee,le,oe,me){var ie;for(ie in le=le||{},ee=ee||{})ee.hasOwnProperty(ie)&&(le.hasOwnProperty(ie)||ut(ie,oe,me));for(ie in le)le.hasOwnProperty(ie)&&(ee.hasOwnProperty(ie)?a.deepEqual(ee[ie],le[ie])||(ee[ie].type==="geojson"&&le[ie].type==="geojson"&&Kr(ee,le,ie)?oe.push({command:ht.setGeoJSONSourceData,args:[ie,le[ie].data]}):mr(ie,le,oe,me)):$t(ie,le,oe))})(E.sources,T.sources,J,U);var $=[];E.layers&&E.layers.forEach(function(ee){U[ee.source]?B.push({command:ht.removeLayer,args:[ee.id]}):$.push(ee)}),B=B.concat(J),function(ee,le,oe){le=le||[];var me,ie,de,be,Ae,Ue,Fe,je=(ee=ee||[]).map(et),tt=le.map(et),_t=ee.reduce(Nt,{}),dt=le.reduce(Nt,{}),Ot=je.slice(),nr=Object.create(null);for(me=0,ie=0;me<je.length;me++)dt.hasOwnProperty(de=je[me])?ie++:(oe.push({command:ht.removeLayer,args:[de]}),Ot.splice(Ot.indexOf(de,ie),1));for(me=0,ie=0;me<tt.length;me++)Ot[Ot.length-1-me]!==(de=tt[tt.length-1-me])&&(_t.hasOwnProperty(de)?(oe.push({command:ht.removeLayer,args:[de]}),Ot.splice(Ot.lastIndexOf(de,Ot.length-ie),1)):ie++,oe.push({command:ht.addLayer,args:[dt[de],Ue=Ot[Ot.length-me]]}),Ot.splice(Ot.length-me,0,de),nr[de]=!0);for(me=0;me<tt.length;me++)if(be=_t[de=tt[me]],Ae=dt[de],!nr[de]&&!a.deepEqual(be,Ae))if(a.deepEqual(be.source,Ae.source)&&a.deepEqual(be["source-layer"],Ae["source-layer"])&&a.deepEqual(be.type,Ae.type)){for(Fe in er(be.layout,Ae.layout,oe,de,null,ht.setLayoutProperty),er(be.paint,Ae.paint,oe,de,null,ht.setPaintProperty),a.deepEqual(be.filter,Ae.filter)||oe.push({command:ht.setFilter,args:[de,Ae.filter]}),a.deepEqual(be.minzoom,Ae.minzoom)&&a.deepEqual(be.maxzoom,Ae.maxzoom)||oe.push({command:ht.setLayerZoomRange,args:[de,Ae.minzoom,Ae.maxzoom]}),be)be.hasOwnProperty(Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?er(be[Fe],Ae[Fe],oe,de,Fe.slice(6),ht.setPaintProperty):a.deepEqual(be[Fe],Ae[Fe])||oe.push({command:ht.setLayerProperty,args:[de,Fe,Ae[Fe]]}));for(Fe in Ae)Ae.hasOwnProperty(Fe)&&!be.hasOwnProperty(Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?er(be[Fe],Ae[Fe],oe,de,Fe.slice(6),ht.setPaintProperty):a.deepEqual(be[Fe],Ae[Fe])||oe.push({command:ht.setLayerProperty,args:[de,Fe,Ae[Fe]]}))}else oe.push({command:ht.removeLayer,args:[de]}),Ue=Ot[Ot.lastIndexOf(de)+1],oe.push({command:ht.addLayer,args:[Ae,Ue]})}($,T.layers,B)}catch(ee){console.warn("Unable to compute style diff:",ee),B=[{command:ht.setStyle,args:[T]}]}return B}(this.serialize(),o).filter(function(E){return!(E.command in Hr)});if(y.length===0)return!1;var w=y.filter(function(E){return!(E.command in nn)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return y.forEach(function(E){E.command!=="setTransition"&&h[E.command].apply(h,E.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,h){if(this.getImage(o))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,h),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,h){this.imageManager.updateImage(o,h)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,h,y){var w=this;if(y===void 0&&(y={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(h).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.validateStyle.source,"sources."+o,h,null,y))){this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);var E=this.sourceCaches[o]=new re(o,h,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:o}}),E.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var h in this._layers)if(this._layers[h].source===o)return this.fire(new a.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+h+'" is using it.')));var y=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],y.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),y.setEventedParent(null),y.clearTiles(),y.onRemove&&y.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,h){this._checkLoaded(),this.sourceCaches[o].getSource().setData(h),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,h,y){y===void 0&&(y={}),this._checkLoaded();var w=o.id;if(this.getLayer(w))this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(o.type==="custom"){if(xn(this,a.validateCustomStyleLayer(o)))return;E=a.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(w,o.source),o=a.clone$1(o),o=a.extend(o,{source:w})),this._validate(a.validateStyle.layer,"layers."+w,o,{arrayIndex:-1},y))return;E=a.createStyleLayer(o),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var T=h?this._order.indexOf(h):this._order.length;if(h&&T===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+h+'" does not exist on this map.')));else{if(this._order.splice(T,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var B=this._removedLayers[w];delete this._removedLayers[w],B.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},s.prototype.moveLayer=function(o,h){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==h){var y=this._order.indexOf(o);this._order.splice(y,1);var w=h?this._order.indexOf(h):this._order.length;h&&w===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+h+'" does not exist on this map.'))):(this._order.splice(w,0,o),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var h=this._layers[o];if(h){h.setEventedParent(null);var y=this._order.indexOf(o);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=h,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],h.onRemove&&h.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,h,y){this._checkLoaded();var w=this.getLayer(o);w?w.minzoom===h&&w.maxzoom===y||(h!=null&&(w.minzoom=h),y!=null&&(w.maxzoom=y),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,h,y){y===void 0&&(y={}),this._checkLoaded();var w=this.getLayer(o);if(w){if(!a.deepEqual(w.filter,h))return h==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,"layers."+w.id+".filter",h,null,y)||(w.filter=a.clone$1(h),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return a.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,h,y,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(o);E?a.deepEqual(E.getLayoutProperty(h),y)||(E.setLayoutProperty(h,y,w),this._updateLayer(E)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,h){var y=this.getLayer(o);if(y)return y.getLayoutProperty(h);this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,h,y,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(o);E?a.deepEqual(E.getPaintProperty(h),y)||(E.setPaintProperty(h,y,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,h){return this.getLayer(o).getPaintProperty(h)},s.prototype.setFeatureState=function(o,h){this._checkLoaded();var y=o.source,w=o.sourceLayer,E=this.sourceCaches[y];if(E!==void 0){var T=E.getSource().type;T==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||w?(o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,o.id,h)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+y+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,h){this._checkLoaded();var y=o.source,w=this.sourceCaches[y];if(w!==void 0){var E=w.getSource().type,T=E==="vector"?o.sourceLayer:void 0;E!=="vector"||T?h&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(T,o.id,h):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+y+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var h=o.source,y=o.sourceLayer,w=this.sourceCaches[h];if(w!==void 0){if(w.getSource().type!=="vector"||y)return o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(y,o.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+h+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var h=this,y=function(_t){return h._layers[_t].type==="fill-extrusion"},w={},E=[],T=this._order.length-1;T>=0;T--){var B=this._order[T];if(y(B)){w[B]=T;for(var U=0,J=o;U<J.length;U+=1){var $=J[U][B];if($)for(var ee=0,le=$;ee<le.length;ee+=1)E.push(le[ee])}}}E.sort(function(_t,dt){return dt.intersectionZ-_t.intersectionZ});for(var oe=[],me=this._order.length-1;me>=0;me--){var ie=this._order[me];if(y(ie))for(var de=E.length-1;de>=0;de--){var be=E[de].feature;if(w[be.layer.id]<me)break;oe.push(be),E.pop()}else for(var Ae=0,Ue=o;Ae<Ue.length;Ae+=1){var Fe=Ue[Ae][ie];if(Fe)for(var je=0,tt=Fe;je<tt.length;je+=1)oe.push(tt[je].feature)}}return oe},s.prototype.queryRenderedFeatures=function(o,h,y){h&&h.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);var w={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,T=h.layers;E<T.length;E+=1){var B=T[E],U=this._layers[B];if(!U)return this.fire(new a.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be queried for features."))),[];w[U.source]=!0}}var J=[];for(var $ in h.availableImages=this._availableImages,this.sourceCaches)h.layers&&!w[$]||J.push(xt(this.sourceCaches[$],this._layers,this._serializedLayers,o,h,y));return this.placement&&J.push(function(ee,le,oe,me,ie,de,be){for(var Ae={},Ue=de.queryRenderedSymbols(me),Fe=[],je=0,tt=Object.keys(Ue).map(Number);je<tt.length;je+=1)Fe.push(be[tt[je]]);Fe.sort(Ut);for(var _t=function(){var sr=Ot[dt],ci=sr.featureIndex.lookupSymbolFeatures(Ue[sr.bucketInstanceId],le,sr.bucketIndex,sr.sourceLayerIndex,ie.filter,ie.layers,ie.availableImages,ee);for(var Vt in ci){var Pr=Ae[Vt]=Ae[Vt]||[],jr=ci[Vt];jr.sort(function(Or,wr){var _r=sr.featureSortOrder;if(_r){var Cn=_r.indexOf(Or.featureIndex);return _r.indexOf(wr.featureIndex)-Cn}return wr.featureIndex-Or.featureIndex});for(var zr=0,Tr=jr;zr<Tr.length;zr+=1)Pr.push(Tr[zr])}},dt=0,Ot=Fe;dt<Ot.length;dt+=1)_t();var nr=function(sr){Ae[sr].forEach(function(ci){var Vt=ci.feature,Pr=oe[ee[sr].source].getFeatureState(Vt.layer["source-layer"],Vt.id);Vt.source=Vt.layer.source,Vt.layer["source-layer"]&&(Vt.sourceLayer=Vt.layer["source-layer"]),Vt.state=Pr})};for(var ur in Ae)nr(ur);return Ae}(this._layers,this._serializedLayers,this.sourceCaches,o,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(J)},s.prototype.querySourceFeatures=function(o,h){h&&h.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);var y=this.sourceCaches[o];return y?function(w,E){for(var T=w.getRenderableIds().map(function(le){return w.getTileByID(le)}),B=[],U={},J=0;J<T.length;J++){var $=T[J],ee=$.tileID.canonical.key;U[ee]||(U[ee]=!0,$.querySourceFeatures(B,E))}return B}(y,h):[]},s.prototype.addSourceType=function(o,h,y){return s.getSourceType(o)?y(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:h.workerSourceURL},y):y(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,h){h===void 0&&(h={}),this._checkLoaded();var y=this.light.getLight(),w=!1;for(var E in o)if(!a.deepEqual(o[E],y[E])){w=!0;break}if(w){var T={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,h),this.light.updateTransitions(T)}},s.prototype._validate=function(o,h,y,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&xn(this,o.call(a.validateStyle,a.extend({key:h,style:this.serialize(),value:y,styleSpec:a.styleSpec},w)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var h in this.sourceCaches)this.sourceCaches[h].clearTiles(),this.sourceCaches[h].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var h in this.sourceCaches)this.sourceCaches[h].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,h,y,w,E){E===void 0&&(E=!1);for(var T=!1,B=!1,U={},J=0,$=this._order;J<$.length;J+=1){var ee=this._layers[$[J]];if(ee.type==="symbol"){if(!U[ee.source]){var le=this.sourceCaches[ee.source];U[ee.source]=le.getRenderableIds(!0).map(function(be){return le.getTileByID(be)}).sort(function(be,Ae){return Ae.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Ae.tileID)?-1:1)})}var oe=this.crossTileSymbolIndex.addLayer(ee,U[ee.source],o.center.lng);T=T||oe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),o.zoom))&&(this.pauseablePlacement=new va(o,this._order,E,h,y,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),B=!0),T&&this.pauseablePlacement.placement.setStale()),B||T)for(var me=0,ie=this._order;me<ie.length;me+=1){var de=this._layers[ie[me]];de.type==="symbol"&&this.placement.updateLayerOpacities(de,U[de.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,h,y){this.imageManager.getImages(h.icons,y),this._updateTilesForChangedImages();var w=this.sourceCaches[h.source];w&&w.setDependencies(h.tileID.key,h.type,h.icons)},s.prototype.getGlyphs=function(o,h,y){this.glyphManager.getGlyphs(h.stacks,y)},s.prototype.getResource=function(o,h,y){return a.makeRequest(h,y)},s}(a.Evented);fn.getSourceType=function(n){return Br[n]},fn.setSourceType=function(n,s){Br[n]=s},fn.registerForPluginStateChange=a.registerForPluginStateChange;var di=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ka=ii(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),os=ii(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ma=ii(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Vl=ii(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Bo=ii("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),fa=ii(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Cs=ii(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Oo=ii("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ba=ii("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),rl=ii("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ms=ii(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Wn=ii(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Fo=ii(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ss=ii(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Di=ii(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ds=ii(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Da=ii(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Pn=ii(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),qi=ii(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Zi=ii(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Oi=ii(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Gi=ii(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ki=ii(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Fi=ii(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Me=ii(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Rt=ii(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ii(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=s.match(/attribute ([\w]+) ([\w]+)/g),y=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(y):y,T={};return{fragmentSource:n=n.replace(o,function(B,U,J,$,ee){return T[ee]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_`+ee+`
varying `+J+" "+$+" "+ee+`;
#else
uniform `+J+" "+$+" u_"+ee+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ee+`
    `+J+" "+$+" "+ee+" = u_"+ee+`;
#endif
`}),vertexSource:s=s.replace(o,function(B,U,J,$,ee){var le=$==="float"?"vec2":"vec4",oe=ee.match(/color/)?"color":le;return T[ee]?U==="define"?`
#ifndef HAS_UNIFORM_u_`+ee+`
uniform lowp float u_`+ee+`_t;
attribute `+J+" "+le+" a_"+ee+`;
varying `+J+" "+$+" "+ee+`;
#else
uniform `+J+" "+$+" u_"+ee+`;
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ee+`
    `+ee+" = a_"+ee+`;
#else
    `+J+" "+$+" "+ee+" = u_"+ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ee+`
    `+ee+" = unpack_mix_"+oe+"(a_"+ee+", u_"+ee+`_t);
#else
    `+J+" "+$+" "+ee+" = u_"+ee+`;
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_`+ee+`
uniform lowp float u_`+ee+`_t;
attribute `+J+" "+le+" a_"+ee+`;
#else
uniform `+J+" "+$+" u_"+ee+`;
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ee+`
    `+J+" "+$+" "+ee+" = a_"+ee+`;
#else
    `+J+" "+$+" "+ee+" = u_"+ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ee+`
    `+J+" "+$+" "+ee+" = unpack_mix_"+oe+"(a_"+ee+", u_"+ee+`_t);
#else
    `+J+" "+$+" "+ee+" = u_"+ee+`;
#endif
`}),staticAttributes:h,staticUniforms:E}}var La=Object.freeze({__proto__:null,prelude:Ka,background:os,backgroundPattern:Ma,circle:Vl,clippingMask:Bo,heatmap:fa,heatmapTexture:Cs,collisionBox:Oo,collisionCircle:ba,debug:rl,fill:Ms,fillOutline:Wn,fillOutlinePattern:Fo,fillPattern:ss,fillExtrusion:Di,fillExtrusionPattern:Ds,hillshadePrepare:Da,hillshade:Pn,line:qi,lineGradient:Zi,linePattern:Oi,lineSDF:Gi,raster:Ki,symbolIcon:Fi,symbolSDF:Me,symbolTextAndIcon:Rt}),ls=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function il(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var h=n[o].split(" ");s.push(h.pop())}return s}ls.prototype.bind=function(n,s,o,h,y,w,E,T){this.context=n;for(var B=this.boundPaintVertexBuffers.length!==h.length,U=0;!B&&U<h.length;U++)this.boundPaintVertexBuffers[U]!==h[U]&&(B=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!B&&this.boundIndexBuffer===y&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===T?(n.bindVertexArrayOES.set(this.vao),E&&E.bind(),y&&y.dynamicDraw&&y.bind(),T&&T.bind()):this.freshBind(s,o,h,y,w,E,T)},ls.prototype.freshBind=function(n,s,o,h,y,w,E){var T,B=n.numAttributes,U=this.context,J=U.gl;if(U.extVertexArrayObject)this.vao&&this.destroy(),this.vao=U.extVertexArrayObject.createVertexArrayOES(),U.bindVertexArrayOES.set(this.vao),T=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=h,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{T=U.currentNumAttributes||0;for(var $=B;$<T;$++)J.disableVertexAttribArray($)}s.enableAttributes(J,n);for(var ee=0,le=o;ee<le.length;ee+=1)le[ee].enableAttributes(J,n);w&&w.enableAttributes(J,n),E&&E.enableAttributes(J,n),s.bind(),s.setVertexAttribPointers(J,n,y);for(var oe=0,me=o;oe<me.length;oe+=1){var ie=me[oe];ie.bind(),ie.setVertexAttribPointers(J,n,y)}w&&(w.bind(),w.setVertexAttribPointers(J,n,y)),h&&h.bind(),E&&(E.bind(),E.setVertexAttribPointers(J,n,y)),U.currentNumAttributes=B},ls.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var po=function(n,s,o,h,y,w){var E=n.gl;this.program=E.createProgram();for(var T=il(o.staticAttributes),B=h?h.getBinderAttributes():[],U=T.concat(B),J=o.staticUniforms?il(o.staticUniforms):[],$=h?h.getBinderUniforms():[],ee=[],le=0,oe=J.concat($);le<oe.length;le+=1){var me=oe[le];ee.indexOf(me)<0&&ee.push(me)}var ie=h?h.defines():[];w&&ie.push("#define OVERDRAW_INSPECTOR;");var de=ie.concat(Ka.fragmentSource,o.fragmentSource).join(`
`),be=ie.concat(Ka.vertexSource,o.vertexSource).join(`
`),Ae=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ae,de),E.compileShader(Ae),E.attachShader(this.program,Ae);var Ue=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ue,be),E.compileShader(Ue),E.attachShader(this.program,Ue),this.attributes={};var Fe={};this.numAttributes=U.length;for(var je=0;je<this.numAttributes;je++)U[je]&&(E.bindAttribLocation(this.program,je,U[je]),this.attributes[U[je]]=je);E.linkProgram(this.program),E.deleteShader(Ue),E.deleteShader(Ae);for(var tt=0;tt<ee.length;tt++){var _t=ee[tt];if(_t&&!Fe[_t]){var dt=E.getUniformLocation(this.program,_t);dt&&(Fe[_t]=dt)}}this.fixedUniforms=y(n,Fe),this.binderUniforms=h?h.getUniforms(n,Fe):[]}}};function nl(n,s,o){var h=1/ui(o,1,s.transform.tileZoom),y=Math.pow(2,o.tileID.overscaledZ),w=o.tileSize*Math.pow(2,s.transform.tileZoom)/y,E=w*(o.tileID.canonical.x+o.tileID.wrap*y),T=w*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[h,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[E>>16,T>>16],u_pixel_coord_lower:[65535&E,65535&T]}}po.prototype.draw=function(n,s,o,h,y,w,E,T,B,U,J,$,ee,le,oe,me){var ie,de=n.gl;if(!this.failedToCreate){for(var be in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(h),n.setColorMode(y),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[be].set(E[be]);le&&le.setUniforms(n,this.binderUniforms,$,{zoom:ee});for(var Ae=(ie={},ie[de.LINES]=2,ie[de.TRIANGLES]=3,ie[de.LINE_STRIP]=1,ie)[s],Ue=0,Fe=J.get();Ue<Fe.length;Ue+=1){var je=Fe[Ue],tt=je.vaos||(je.vaos={});(tt[T]||(tt[T]=new ls)).bind(n,this,B,le?le.getPaintVertexBuffers():[],U,je.vertexOffset,oe,me),de.drawElements(s,je.primitiveLength*Ae,de.UNSIGNED_SHORT,je.primitiveOffset*Ae*2)}}};var al=function(n,s,o,h){var y=s.style.light,w=y.properties.get("position"),E=[w.x,w.y,w.z],T=a.create$1();y.properties.get("anchor")==="viewport"&&a.fromRotation(T,-s.transform.angle),a.transformMat3(E,E,T);var B=y.properties.get("color");return{u_matrix:n,u_lightpos:E,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+o,u_opacity:h}},fo=function(n,s,o,h,y,w,E){return a.extend(al(n,s,o,h),nl(w,s,E),{u_height_factor:-Math.pow(2,y.overscaledZ)/E.tileSize/8})},Jn=function(n){return{u_matrix:n}},mo=function(n,s,o,h){return a.extend(Jn(n),nl(o,s,h))},ol=function(n,s){return{u_matrix:n,u_world:s}},Eo=function(n,s,o,h,y){return a.extend(mo(n,s,o,h),{u_world:y})},Ls=function(n,s,o,h){var y,w,E=n.transform;if(h.paint.get("circle-pitch-alignment")==="map"){var T=ui(o,1,E.zoom);y=!0,w=[T,T]}else y=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:w}},yo=function(n,s,o){var h=ui(o,1,s.zoom),y=Math.pow(2,s.zoom-o.tileID.overscaledZ),w=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[s.pixelsToGLUnits[0]/(h*y),s.pixelsToGLUnits[1]/(h*y)],u_overscale_factor:w}},sl=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},xa=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},wa=function(n){return{u_matrix:n}},ll=function(n,s,o,h){return{u_matrix:n,u_extrude_scale:ui(s,1,o),u_intensity:h}},Yn=function(n,s,o){var h=n.transform;return{u_matrix:Rs(n,s,o),u_ratio:1/ui(s,1,h.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Pi=function(n,s,o,h){return a.extend(Yn(n,s,o),{u_image:0,u_image_height:h})},No=function(n,s,o,h){var y=n.transform,w=So(s,y);return{u_matrix:Rs(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/ui(s,1,y.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[w,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Ru=function(n,s,o,h,y){var w=n.lineAtlas,E=So(s,n.transform),T=o.layout.get("line-cap")==="round",B=w.getDash(h.from,T),U=w.getDash(h.to,T),J=B.width*y.fromScale,$=U.width*y.toScale;return a.extend(Yn(n,s,o),{u_patternscale_a:[E/J,-B.height/2],u_patternscale_b:[E/$,-U.height/2],u_sdfgamma:w.width/(256*Math.min(J,$)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:U.y,u_mix:y.t})};function So(n,s){return 1/ui(n,1,s.tileZoom)}function Rs(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Ul=function(n,s,o,h,y){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(E=y.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=y.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:ul(y.paint.get("raster-hue-rotate"))};var w,E};function ul(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var us,Kn=function(n,s,o,h,y,w,E,T,B,U){var J=y.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:J.width/J.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:T,u_is_text:+B,u_pitch_with_map:+h,u_texsize:U,u_texture:0}},Vo=function(n,s,o,h,y,w,E,T,B,U,J){var $=y.transform;return a.extend(Kn(n,s,o,h,y,w,E,T,B,U),{u_gamma_scale:h?Math.cos($._pitch)*$.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+J})},Uo=function(n,s,o,h,y,w,E,T,B,U){return a.extend(Vo(n,s,o,h,y,w,E,T,!0,B,!0),{u_texsize_icon:U,u_texture_icon:1})},cs=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},ko=function(n,s,o,h,y,w){return a.extend(function(E,T,B,U){var J=B.imageManager.getPattern(E.from.toString()),$=B.imageManager.getPattern(E.to.toString()),ee=B.imageManager.getPixelSize(),le=ee.width,oe=ee.height,me=Math.pow(2,U.tileID.overscaledZ),ie=U.tileSize*Math.pow(2,B.transform.tileZoom)/me,de=ie*(U.tileID.canonical.x+U.tileID.wrap*me),be=ie*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:$.tl,u_pattern_br_b:$.br,u_texsize:[le,oe],u_mix:T.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:$.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/ui(U,1,B.transform.tileZoom),u_pixel_coord_upper:[de>>16,be>>16],u_pixel_coord_lower:[65535&de,65535&be]}}(h,w,o,y),{u_matrix:n,u_opacity:s})},Bs={fillExtrusion:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new a.Uniform1f(n,s.u_height_factor),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new a.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new a.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new a.UniformColor(n,s.u_color),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_overlay:new a.Uniform1i(n,s.u_overlay),u_overlay_scale:new a.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new a.Uniform1f(n,s.u_extrude_scale),u_intensity:new a.Uniform1f(n,s.u_intensity),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_color_ramp:new a.Uniform1i(n,s.u_color_ramp),u_opacity:new a.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_latrange:new a.Uniform2f(n,s.u_latrange),u_light:new a.Uniform2f(n,s.u_light),u_shadow:new a.UniformColor(n,s.u_shadow),u_highlight:new a.UniformColor(n,s.u_highlight),u_accent:new a.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_dimension:new a.Uniform2f(n,s.u_dimension),u_zoom:new a.Uniform1f(n,s.u_zoom),u_unpack:new a.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_image:new a.Uniform1i(n,s.u_image),u_image_height:new a.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_texsize:new a.Uniform2f(n,s.u_texsize),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_image:new a.Uniform1i(n,s.u_image),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new a.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new a.Uniform1f(n,s.u_sdfgamma),u_image:new a.Uniform1i(n,s.u_image),u_tex_y_a:new a.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new a.Uniform1f(n,s.u_tex_y_b),u_mix:new a.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new a.Uniform2f(n,s.u_tl_parent),u_scale_parent:new a.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new a.Uniform1f(n,s.u_buffer_scale),u_fade_t:new a.Uniform1f(n,s.u_fade_t),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image0:new a.Uniform1i(n,s.u_image0),u_image1:new a.Uniform1i(n,s.u_image1),u_brightness_low:new a.Uniform1f(n,s.u_brightness_low),u_brightness_high:new a.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new a.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new a.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new a.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texsize_icon:new a.Uniform2f(n,s.u_texsize_icon),u_texture:new a.Uniform1i(n,s.u_texture),u_texture_icon:new a.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_color:new a.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image:new a.Uniform1i(n,s.u_image),u_pattern_tl_a:new a.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(n,s.u_pattern_br_b),u_texsize:new a.Uniform2f(n,s.u_texsize),u_mix:new a.Uniform1f(n,s.u_mix),u_pattern_size_a:new a.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new a.Uniform1f(n,s.u_scale_a),u_scale_b:new a.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(n,s.u_tile_units_to_pixels)}}};function Io(n,s,o,h,y,w,E){for(var T=n.context,B=T.gl,U=n.useProgram("collisionBox"),J=[],$=0,ee=0,le=0;le<h.length;le++){var oe=h[le],me=s.getTile(oe),ie=me.getBucket(o);if(ie){var de=oe.posMatrix;y[0]===0&&y[1]===0||(de=n.translatePosMatrix(oe.posMatrix,me,y,w));var be=E?ie.textCollisionBox:ie.iconCollisionBox,Ae=ie.collisionCircleArray;if(Ae.length>0){var Ue=a.create(),Fe=de;a.mul(Ue,ie.placementInvProjMatrix,n.transform.glCoordMatrix),a.mul(Ue,Ue,ie.placementViewportMatrix),J.push({circleArray:Ae,circleOffset:ee,transform:Fe,invTransform:Ue}),ee=$+=Ae.length/4}be&&U.draw(T,B.LINES,Y.disabled,te.disabled,n.colorModeForRenderPass(),ge.disabled,yo(de,n.transform,me),o.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,n.transform.zoom,null,null,be.collisionVertexBuffer)}}if(E&&J.length){var je=n.useProgram("collisionCircle"),tt=new a.StructArrayLayout2f1f2i16;tt.resize(4*$),tt._trim();for(var _t=0,dt=0,Ot=J;dt<Ot.length;dt+=1)for(var nr=Ot[dt],ur=0;ur<nr.circleArray.length/4;ur++){var sr=4*ur,ci=nr.circleArray[sr+0],Vt=nr.circleArray[sr+1],Pr=nr.circleArray[sr+2],jr=nr.circleArray[sr+3];tt.emplace(_t++,ci,Vt,Pr,jr,0),tt.emplace(_t++,ci,Vt,Pr,jr,1),tt.emplace(_t++,ci,Vt,Pr,jr,2),tt.emplace(_t++,ci,Vt,Pr,jr,3)}(!us||us.length<2*$)&&(us=function(sn){var Qn=2*sn,Un=new a.StructArrayLayout3ui6;Un.resize(Qn),Un._trim();for(var an=0;an<Qn;an++){var mn=6*an;Un.uint16[mn+0]=4*an+0,Un.uint16[mn+1]=4*an+1,Un.uint16[mn+2]=4*an+2,Un.uint16[mn+3]=4*an+2,Un.uint16[mn+4]=4*an+3,Un.uint16[mn+5]=4*an+0}return Un}($));for(var zr=T.createIndexBuffer(us,!0),Tr=T.createVertexBuffer(tt,a.collisionCircleLayout.members,!0),Or=0,wr=J;Or<wr.length;Or+=1){var _r=wr[Or],Cn=sl(_r.transform,_r.invTransform,n.transform);je.draw(T,B.TRIANGLES,Y.disabled,te.disabled,n.colorModeForRenderPass(),ge.disabled,Cn,o.id,Tr,zr,a.SegmentVector.simpleSegment(0,2*_r.circleOffset,_r.circleArray.length,_r.circleArray.length/2),null,n.transform.zoom,null,null,null)}Tr.destroy(),zr.destroy()}}var Ea=a.identity(new Float32Array(16));function cl(n,s,o,h,y,w){var E=a.getAnchorAlignment(n),T=-(E.horizontalAlign-.5)*s,B=-(E.verticalAlign-.5)*o,U=a.evaluateVariableOffset(n,h);return new a.Point((T/y+U[0])*w,(B/y+U[1])*w)}function no(n,s,o,h,y,w,E,T,B,U,J){var $=n.text.placedSymbolArray,ee=n.text.dynamicLayoutVertexArray,le=n.icon.dynamicLayoutVertexArray,oe={};ee.clear();for(var me=0;me<$.length;me++){var ie=$.get(me),de=ie.hidden||!ie.crossTileID||n.allowVerticalPlacement&&!ie.placedOrientation?null:h[ie.crossTileID];if(de){var be=new a.Point(ie.anchorX,ie.anchorY),Ae=pr(be,o?T:E),Ue=Ft(w.cameraToCenterDistance,Ae.signedDistanceFromCamera),Fe=y.evaluateSizeForFeature(n.textSizeData,U,ie)*Ue/a.ONE_EM;o&&(Fe*=n.tilePixelRatio/B);for(var je=cl(de.anchor,de.width,de.height,de.textOffset,de.textBoxScale,Fe),tt=o?pr(be.add(je),E).point:Ae.point.add(s?je.rotate(-w.angle):je),_t=n.allowVerticalPlacement&&ie.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,dt=0;dt<ie.numGlyphs;dt++)a.addDynamicAttributes(ee,tt,_t);J&&ie.associatedIconIndex>=0&&(oe[ie.associatedIconIndex]={shiftedAnchor:tt,angle:_t})}else Ui(ie.numGlyphs,ee)}if(J){le.clear();for(var Ot=n.icon.placedSymbolArray,nr=0;nr<Ot.length;nr++){var ur=Ot.get(nr);if(ur.hidden)Ui(ur.numGlyphs,le);else{var sr=oe[nr];if(sr)for(var ci=0;ci<ur.numGlyphs;ci++)a.addDynamicAttributes(le,sr.shiftedAnchor,sr.angle);else Ui(ur.numGlyphs,le)}}n.icon.dynamicLayoutVertexBuffer.updateData(le)}n.text.dynamicLayoutVertexBuffer.updateData(ee)}function hl(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function ao(n,s,o,h,y,w,E,T,B,U,J,$){for(var ee=n.context,le=ee.gl,oe=n.transform,me=T==="map",ie=B==="map",de=me&&o.layout.get("symbol-placement")!=="point",be=me&&!ie&&!de,Ae=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ue=!1,Fe=n.depthModeForSublayer(0,Y.ReadOnly),je=o.layout.get("text-variable-anchor"),tt=[],_t=0,dt=h;_t<dt.length;_t+=1){var Ot=dt[_t],nr=s.getTile(Ot),ur=nr.getBucket(o);if(ur){var sr=y?ur.text:ur.icon;if(sr&&sr.segments.get().length){var ci=sr.programConfigurations.get(o.id),Vt=y||ur.sdfIcons,Pr=y?ur.textSizeData:ur.iconSizeData,jr=ie||oe.pitch!==0,zr=n.useProgram(hl(Vt,y,ur),ci),Tr=a.evaluateSizeForZoom(Pr,oe.zoom),Or=void 0,wr=[0,0],_r=void 0,Cn=void 0,sn=null,Qn=void 0;if(y)_r=nr.glyphAtlasTexture,Cn=le.LINEAR,Or=nr.glyphAtlasTexture.size,ur.iconsInText&&(wr=nr.imageAtlasTexture.size,sn=nr.imageAtlasTexture,Qn=jr||n.options.rotating||n.options.zooming||Pr.kind==="composite"||Pr.kind==="camera"?le.LINEAR:le.NEAREST);else{var Un=o.layout.get("icon-size").constantOr(0)!==1||ur.iconsNeedLinear;_r=nr.imageAtlasTexture,Cn=Vt||n.options.rotating||n.options.zooming||Un||jr?le.LINEAR:le.NEAREST,Or=nr.imageAtlasTexture.size}var an=ui(nr,1,n.transform.zoom),mn=xr(Ot.posMatrix,ie,me,n.transform,an),za=Ar(Ot.posMatrix,ie,me,n.transform,an),aa=je&&ur.hasTextData(),Xo=o.layout.get("icon-text-fit")!=="none"&&aa&&ur.hasIconData();de&&Gn(ur,Ot.posMatrix,n,y,mn,za,ie,U);var da=n.translatePosMatrix(Ot.posMatrix,nr,w,E),co=de||y&&je||Xo?Ea:mn,Ja=n.translatePosMatrix(za,nr,w,E,!0),El=Vt&&o.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Zs={program:zr,buffers:sr,uniformValues:Vt?ur.iconsInText?Uo(Pr.kind,Tr,be,ie,n,da,co,Ja,Or,wr):Vo(Pr.kind,Tr,be,ie,n,da,co,Ja,y,Or,!0):Kn(Pr.kind,Tr,be,ie,n,da,co,Ja,y,Or),atlasTexture:_r,atlasTextureIcon:sn,atlasInterpolation:Cn,atlasInterpolationIcon:Qn,isSDF:Vt,hasHalo:El};if(Ae&&ur.canOverlap){Ue=!0;for(var Wo=0,Gs=sr.segments.get();Wo<Gs.length;Wo+=1){var Sl=Gs[Wo];tt.push({segments:new a.SegmentVector([Sl]),sortKey:Sl.sortKey,state:Zs})}}else tt.push({segments:sr.segments,sortKey:0,state:Zs})}}}Ue&&tt.sort(function(Jo,vs){return Jo.sortKey-vs.sortKey});for(var bo=0,kl=tt;bo<kl.length;bo+=1){var xo=kl[bo],Mn=xo.state;if(ee.activeTexture.set(le.TEXTURE0),Mn.atlasTexture.bind(Mn.atlasInterpolation,le.CLAMP_TO_EDGE),Mn.atlasTextureIcon&&(ee.activeTexture.set(le.TEXTURE1),Mn.atlasTextureIcon&&Mn.atlasTextureIcon.bind(Mn.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),Mn.isSDF){var Po=Mn.uniformValues;Mn.hasHalo&&(Po.u_is_halo=1,jo(Mn.buffers,xo.segments,o,n,Mn.program,Fe,J,$,Po)),Po.u_is_halo=0}jo(Mn.buffers,xo.segments,o,n,Mn.program,Fe,J,$,Mn.uniformValues)}}function jo(n,s,o,h,y,w,E,T,B){var U=h.context;y.draw(U,U.gl.TRIANGLES,w,E,T,ge.disabled,B,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,h.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function hs(n,s,o,h,y,w,E){var T,B,U,J,$,ee=n.context.gl,le=o.paint.get("fill-pattern"),oe=le&&le.constantOr(1),me=o.getCrossfadeParameters();E?(B=oe&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",T=ee.LINES):(B=oe?"fillPattern":"fill",T=ee.TRIANGLES);for(var ie=0,de=h;ie<de.length;ie+=1){var be=de[ie],Ae=s.getTile(be);if(!oe||Ae.patternsLoaded()){var Ue=Ae.getBucket(o);if(Ue){var Fe=Ue.programConfigurations.get(o.id),je=n.useProgram(B,Fe);oe&&(n.context.activeTexture.set(ee.TEXTURE0),Ae.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),Fe.updatePaintBuffers(me));var tt=le.constantOr(null);if(tt&&Ae.imageAtlas){var _t=Ae.imageAtlas,dt=_t.patternPositions[tt.to.toString()],Ot=_t.patternPositions[tt.from.toString()];dt&&Ot&&Fe.setConstantPatternPositions(dt,Ot)}var nr=n.translatePosMatrix(be.posMatrix,Ae,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(E){J=Ue.indexBuffer2,$=Ue.segments2;var ur=[ee.drawingBufferWidth,ee.drawingBufferHeight];U=B==="fillOutlinePattern"&&oe?Eo(nr,n,me,Ae,ur):ol(nr,ur)}else J=Ue.indexBuffer,$=Ue.segments,U=oe?mo(nr,n,me,Ae):Jn(nr);je.draw(n.context,T,y,n.stencilModeForClipping(be),w,ge.disabled,U,o.id,Ue.layoutVertexBuffer,J,$,o.paint,n.transform.zoom,Fe)}}}}function Os(n,s,o,h,y,w,E){for(var T=n.context,B=T.gl,U=o.paint.get("fill-extrusion-pattern"),J=U.constantOr(1),$=o.getCrossfadeParameters(),ee=o.paint.get("fill-extrusion-opacity"),le=0,oe=h;le<oe.length;le+=1){var me=oe[le],ie=s.getTile(me),de=ie.getBucket(o);if(de){var be=de.programConfigurations.get(o.id),Ae=n.useProgram(J?"fillExtrusionPattern":"fillExtrusion",be);J&&(n.context.activeTexture.set(B.TEXTURE0),ie.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),be.updatePaintBuffers($));var Ue=U.constantOr(null);if(Ue&&ie.imageAtlas){var Fe=ie.imageAtlas,je=Fe.patternPositions[Ue.to.toString()],tt=Fe.patternPositions[Ue.from.toString()];je&&tt&&be.setConstantPatternPositions(je,tt)}var _t=n.translatePosMatrix(me.posMatrix,ie,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),dt=o.paint.get("fill-extrusion-vertical-gradient"),Ot=J?fo(_t,n,dt,ee,me,$,ie):al(_t,n,dt,ee);Ae.draw(T,T.gl.TRIANGLES,y,w,E,ge.backCCW,Ot,o.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,o.paint,n.transform.zoom,be)}}}function ps(n,s,o,h,y,w){var E=n.context,T=E.gl,B=s.fbo;if(B){var U=n.useProgram("hillshade");E.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,B.colorAttachment.get());var J=function($,ee,le){var oe=le.paint.get("hillshade-shadow-color"),me=le.paint.get("hillshade-highlight-color"),ie=le.paint.get("hillshade-accent-color"),de=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(de-=$.transform.angle);var be,Ae,Ue,Fe=!$.options.moving;return{u_matrix:$.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),Fe),u_image:0,u_latrange:(be=ee.tileID,Ae=Math.pow(2,be.canonical.z),Ue=be.canonical.y,[new a.MercatorCoordinate(0,Ue/Ae).toLngLat().lat,new a.MercatorCoordinate(0,(Ue+1)/Ae).toLngLat().lat]),u_light:[le.paint.get("hillshade-exaggeration"),de],u_shadow:oe,u_highlight:me,u_accent:ie}}(n,s,o);U.draw(E,T.TRIANGLES,h,y,w,ge.disabled,J,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function jl(n,s,o,h,y,w){var E=n.context,T=E.gl,B=s.dem;if(B&&B.data){var U=B.dim,J=B.stride,$=B.getPixels();if(E.activeTexture.set(T.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(J),s.demTexture){var ee=s.demTexture;ee.update($,{premultiply:!1}),ee.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else s.demTexture=new a.Texture(E,$,T.RGBA,{premultiply:!1}),s.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);E.activeTexture.set(T.TEXTURE0);var le=s.fbo;if(!le){var oe=new a.Texture(E,{width:U,height:U,data:null},T.RGBA);oe.bind(T.LINEAR,T.CLAMP_TO_EDGE),(le=s.fbo=E.createFramebuffer(U,U,!0)).colorAttachment.set(oe.texture)}E.bindFramebuffer.set(le.framebuffer),E.viewport.set([0,0,U,U]),n.useProgram("hillshadePrepare").draw(E,T.TRIANGLES,h,y,w,ge.disabled,function(me,ie){var de=ie.stride,be=a.create();return a.ortho(be,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(be,be,[0,-a.EXTENT,0]),{u_matrix:be,u_image:1,u_dimension:[de,de],u_zoom:me.overscaledZ,u_unpack:ie.getUnpackVector()}}(s.tileID,B),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function fs(n,s,o,h,y){var w=h.paint.get("raster-fade-duration");if(w>0){var E=a.browser.now(),T=(E-n.timeAdded)/w,B=s?(E-s.timeAdded)/w:-1,U=o.getSource(),J=y.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),$=!s||Math.abs(s.tileID.overscaledZ-J)>Math.abs(n.tileID.overscaledZ-J),ee=$&&n.refreshedUponExpiration?1:a.clamp($?T:1-B,0,1);return n.refreshedUponExpiration&&T>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}var Fs=new a.Color(1,0,0,1),dn=new a.Color(0,1,0,1),pl=new a.Color(0,0,1,1),ql=new a.Color(1,0,1,1),Bu=new a.Color(0,1,1,1);function Ou(n,s,o,h){fl(n,0,s+o/2,n.transform.width,o,h)}function Fu(n,s,o,h){fl(n,s-o/2,0,o,n.transform.height,h)}function fl(n,s,o,h,y,w){var E=n.context,T=E.gl;T.enable(T.SCISSOR_TEST),T.scissor(s*a.browser.devicePixelRatio,o*a.browser.devicePixelRatio,h*a.browser.devicePixelRatio,y*a.browser.devicePixelRatio),E.clear({color:w}),T.disable(T.SCISSOR_TEST)}function Fc(n,s,o){var h=n.context,y=h.gl,w=o.posMatrix,E=n.useProgram("debug"),T=Y.disabled,B=te.disabled,U=n.colorModeForRenderPass();h.activeTexture.set(y.TEXTURE0),n.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),E.draw(h,y.LINE_STRIP,T,B,U,ge.disabled,xa(w,a.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var J=s.getTileByID(o.key).latestRawTileData,$=Math.floor((J&&J.byteLength||0)/1024),ee=s.getTile(o).tileSize,le=512/Math.min(ee,512)*(o.overscaledZ/n.transform.zoom)*.5,oe=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(oe+=" => "+o.overscaledZ),function(me,ie){me.initDebugOverlayCanvas();var de=me.debugOverlayCanvas,be=me.context.gl,Ae=me.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,de.width,de.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(ie,5,5),Ae.strokeText(ie,5,5),me.debugOverlayTexture.update(de),me.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(n,oe+" "+$+"kb"),E.draw(h,y.TRIANGLES,T,B,ue.alphaBlended,ge.disabled,xa(w,a.Color.transparent,le),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var ds={symbol:function(n,s,o,h,y){if(n.renderPass==="translucent"){var w=te.disabled,E=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(T,B,U,J,$,ee,le){for(var oe=B.transform,me=$==="map",ie=ee==="map",de=0,be=T;de<be.length;de+=1){var Ae=be[de],Ue=J.getTile(Ae),Fe=Ue.getBucket(U);if(Fe&&Fe.text&&Fe.text.segments.get().length){var je=a.evaluateSizeForZoom(Fe.textSizeData,oe.zoom),tt=ui(Ue,1,B.transform.zoom),_t=xr(Ae.posMatrix,ie,me,B.transform,tt),dt=U.layout.get("icon-text-fit")!=="none"&&Fe.hasIconData();if(je){var Ot=Math.pow(2,oe.zoom-Ue.tileID.overscaledZ);no(Fe,me,ie,le,a.symbolSize,oe,_t,Ae.posMatrix,Ot,je,dt)}}}}(h,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),y),o.paint.get("icon-opacity").constantOr(1)!==0&&ao(n,s,o,h,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),w,E),o.paint.get("text-opacity").constantOr(1)!==0&&ao(n,s,o,h,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),w,E),s.map.showCollisionBoxes&&(Io(n,s,o,h,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Io(n,s,o,h,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,h){if(n.renderPass==="translucent"){var y=o.paint.get("circle-opacity"),w=o.paint.get("circle-stroke-width"),E=o.paint.get("circle-stroke-opacity"),T=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(y.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var B=n.context,U=B.gl,J=n.depthModeForSublayer(0,Y.ReadOnly),$=te.disabled,ee=n.colorModeForRenderPass(),le=[],oe=0;oe<h.length;oe++){var me=h[oe],ie=s.getTile(me),de=ie.getBucket(o);if(de){var be=de.programConfigurations.get(o.id),Ae={programConfiguration:be,program:n.useProgram("circle",be),layoutVertexBuffer:de.layoutVertexBuffer,indexBuffer:de.indexBuffer,uniformValues:Ls(n,me,ie,o)};if(T)for(var Ue=0,Fe=de.segments.get();Ue<Fe.length;Ue+=1){var je=Fe[Ue];le.push({segments:new a.SegmentVector([je]),sortKey:je.sortKey,state:Ae})}else le.push({segments:de.segments,sortKey:0,state:Ae})}}T&&le.sort(function(nr,ur){return nr.sortKey-ur.sortKey});for(var tt=0,_t=le;tt<_t.length;tt+=1){var dt=_t[tt],Ot=dt.state;Ot.program.draw(B,U.TRIANGLES,J,$,ee,ge.disabled,Ot.uniformValues,o.id,Ot.layoutVertexBuffer,Ot.indexBuffer,dt.segments,o.paint,n.transform.zoom,Ot.programConfiguration)}}}},heatmap:function(n,s,o,h){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var y=n.context,w=y.gl,E=te.disabled,T=new ue([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(le,oe,me){var ie=le.gl;le.activeTexture.set(ie.TEXTURE1),le.viewport.set([0,0,oe.width/4,oe.height/4]);var de=me.heatmapFbo;if(de)ie.bindTexture(ie.TEXTURE_2D,de.colorAttachment.get()),le.bindFramebuffer.set(de.framebuffer);else{var be=ie.createTexture();ie.bindTexture(ie.TEXTURE_2D,be),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,ie.LINEAR),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,ie.LINEAR),de=me.heatmapFbo=le.createFramebuffer(oe.width/4,oe.height/4,!1),function(Ae,Ue,Fe,je){var tt=Ae.gl;tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,Ue.width/4,Ue.height/4,0,tt.RGBA,Ae.extRenderToTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:tt.UNSIGNED_BYTE,null),je.colorAttachment.set(Fe)}(le,oe,be,de)}})(y,n,o),y.clear({color:a.Color.transparent});for(var B=0;B<h.length;B++){var U=h[B];if(!s.hasRenderableParent(U)){var J=s.getTile(U),$=J.getBucket(o);if($){var ee=$.programConfigurations.get(o.id);n.useProgram("heatmap",ee).draw(y,w.TRIANGLES,Y.disabled,E,T,ge.disabled,ll(U.posMatrix,J,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,o.paint,n.transform.zoom,ee)}}}y.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(le,oe){var me=le.context,ie=me.gl,de=oe.heatmapFbo;if(de){me.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,de.colorAttachment.get()),me.activeTexture.set(ie.TEXTURE1);var be=oe.colorRampTexture;be||(be=oe.colorRampTexture=new a.Texture(me,oe.colorRamp,ie.RGBA)),be.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(me,ie.TRIANGLES,Y.disabled,te.disabled,le.colorModeForRenderPass(),ge.disabled,function(Ae,Ue,Fe,je){var tt=a.create();a.ortho(tt,0,Ae.width,Ae.height,0,0,1);var _t=Ae.context.gl;return{u_matrix:tt,u_world:[_t.drawingBufferWidth,_t.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ue.paint.get("heatmap-opacity")}}(le,oe),oe.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,oe.paint,le.transform.zoom)}}(n,o))},line:function(n,s,o,h){if(n.renderPass==="translucent"){var y=o.paint.get("line-opacity"),w=o.paint.get("line-width");if(y.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=n.depthModeForSublayer(0,Y.ReadOnly),T=n.colorModeForRenderPass(),B=o.paint.get("line-dasharray"),U=o.paint.get("line-pattern"),J=U.constantOr(1),$=o.paint.get("line-gradient"),ee=o.getCrossfadeParameters(),le=J?"linePattern":B?"lineSDF":$?"lineGradient":"line",oe=n.context,me=oe.gl,ie=!0,de=0,be=h;de<be.length;de+=1){var Ae=be[de],Ue=s.getTile(Ae);if(!J||Ue.patternsLoaded()){var Fe=Ue.getBucket(o);if(Fe){var je=Fe.programConfigurations.get(o.id),tt=n.context.program.get(),_t=n.useProgram(le,je),dt=ie||_t.program!==tt,Ot=U.constantOr(null);if(Ot&&Ue.imageAtlas){var nr=Ue.imageAtlas,ur=nr.patternPositions[Ot.to.toString()],sr=nr.patternPositions[Ot.from.toString()];ur&&sr&&je.setConstantPatternPositions(ur,sr)}var ci=J?No(n,Ue,o,ee):B?Ru(n,Ue,o,B,ee):$?Pi(n,Ue,o,Fe.lineClipsArray.length):Yn(n,Ue,o);if(J)oe.activeTexture.set(me.TEXTURE0),Ue.imageAtlasTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE),je.updatePaintBuffers(ee);else if(B&&(dt||n.lineAtlas.dirty))oe.activeTexture.set(me.TEXTURE0),n.lineAtlas.bind(oe);else if($){var Vt=Fe.gradients[o.id],Pr=Vt.texture;if(o.gradientVersion!==Vt.version){var jr=256;if(o.stepInterpolant){var zr=s.getSource().maxzoom,Tr=Ae.canonical.z===zr?Math.ceil(1<<n.transform.maxZoom-Ae.canonical.z):1;jr=a.clamp(a.nextPowerOfTwo(Fe.maxLineLength/a.EXTENT*1024*Tr),256,oe.maxTextureSize)}Vt.gradient=a.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:jr,image:Vt.gradient||void 0,clips:Fe.lineClipsArray}),Vt.texture?Vt.texture.update(Vt.gradient):Vt.texture=new a.Texture(oe,Vt.gradient,me.RGBA),Vt.version=o.gradientVersion,Pr=Vt.texture}oe.activeTexture.set(me.TEXTURE0),Pr.bind(o.stepInterpolant?me.NEAREST:me.LINEAR,me.CLAMP_TO_EDGE)}_t.draw(oe,me.TRIANGLES,E,n.stencilModeForClipping(Ae),T,ge.disabled,ci,o.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,o.paint,n.transform.zoom,je,Fe.layoutVertexBuffer2),ie=!1}}}}},fill:function(n,s,o,h){var y=o.paint.get("fill-color"),w=o.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=n.colorModeForRenderPass(),T=o.paint.get("fill-pattern"),B=n.opaquePassEnabledForLayer()&&!T.constantOr(1)&&y.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===B){var U=n.depthModeForSublayer(1,n.renderPass==="opaque"?Y.ReadWrite:Y.ReadOnly);hs(n,s,o,h,U,E,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var J=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,Y.ReadOnly);hs(n,s,o,h,J,E,!0)}}},"fill-extrusion":function(n,s,o,h){var y=o.paint.get("fill-extrusion-opacity");if(y!==0&&n.renderPass==="translucent"){var w=new Y(n.context.gl.LEQUAL,Y.ReadWrite,n.depthRangeFor3D);if(y!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Os(n,s,o,h,w,te.disabled,ue.disabled),Os(n,s,o,h,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var E=n.colorModeForRenderPass();Os(n,s,o,h,w,te.disabled,E)}}},hillshade:function(n,s,o,h){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var y=n.context,w=n.depthModeForSublayer(0,Y.ReadOnly),E=n.colorModeForRenderPass(),T=n.renderPass==="translucent"?n.stencilConfigForOverlap(h):[{},h],B=T[0],U=0,J=T[1];U<J.length;U+=1){var $=J[U],ee=s.getTile($);ee.needsHillshadePrepare&&n.renderPass==="offscreen"?jl(n,ee,o,w,te.disabled,E):n.renderPass==="translucent"&&ps(n,ee,o,w,B[$.overscaledZ],E)}y.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,h){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&h.length)for(var y=n.context,w=y.gl,E=s.getSource(),T=n.useProgram("raster"),B=n.colorModeForRenderPass(),U=E instanceof lr?[{},h]:n.stencilConfigForOverlap(h),J=U[0],$=U[1],ee=$[$.length-1].overscaledZ,le=!n.options.moving,oe=0,me=$;oe<me.length;oe+=1){var ie=me[oe],de=n.depthModeForSublayer(ie.overscaledZ-ee,o.paint.get("raster-opacity")===1?Y.ReadWrite:Y.ReadOnly,w.LESS),be=s.getTile(ie),Ae=n.transform.calculatePosMatrix(ie.toUnwrapped(),le);be.registerFadeDuration(o.paint.get("raster-fade-duration"));var Ue=s.findLoadedParent(ie,0),Fe=fs(be,Ue,s,o,n.transform),je=void 0,tt=void 0,_t=o.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;y.activeTexture.set(w.TEXTURE0),be.texture.bind(_t,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(w.TEXTURE1),Ue?(Ue.texture.bind(_t,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),je=Math.pow(2,Ue.tileID.overscaledZ-be.tileID.overscaledZ),tt=[be.tileID.canonical.x*je%1,be.tileID.canonical.y*je%1]):be.texture.bind(_t,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var dt=Ul(Ae,tt||[0,0],je||1,Fe,o);E instanceof lr?T.draw(y,w.TRIANGLES,de,te.disabled,B,ge.disabled,dt,o.id,E.boundsBuffer,n.quadTriangleIndexBuffer,E.boundsSegments):T.draw(y,w.TRIANGLES,de,J[ie.overscaledZ],B,ge.disabled,dt,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var h=o.paint.get("background-color"),y=o.paint.get("background-opacity");if(y!==0){var w=n.context,E=w.gl,T=n.transform,B=T.tileSize,U=o.paint.get("background-pattern");if(!n.isPatternMissing(U)){var J=!U&&h.a===1&&y===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===J){var $=te.disabled,ee=n.depthModeForSublayer(0,J==="opaque"?Y.ReadWrite:Y.ReadOnly),le=n.colorModeForRenderPass(),oe=n.useProgram(U?"backgroundPattern":"background"),me=T.coveringTiles({tileSize:B});U&&(w.activeTexture.set(E.TEXTURE0),n.imageManager.bind(n.context));for(var ie=o.getCrossfadeParameters(),de=0,be=me;de<be.length;de+=1){var Ae=be[de],Ue=n.transform.calculatePosMatrix(Ae.toUnwrapped()),Fe=U?ko(Ue,y,n,U,{tileID:Ae,tileSize:B},ie):cs(Ue,y,h);oe.draw(w,E.TRIANGLES,ee,$,le,ge.disabled,Fe,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var h=0;h<o.length;h++)Fc(n,s,o[h])},custom:function(n,s,o){var h=n.context,y=o.implementation;if(n.renderPass==="offscreen"){var w=y.prerender;w&&(n.setCustomLayerDefaults(),h.setColorMode(n.colorModeForRenderPass()),w.call(y,h.gl,n.transform.customLayerMatrix()),h.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),h.setColorMode(n.colorModeForRenderPass()),h.setStencilMode(te.disabled);var E=y.renderingMode==="3d"?new Y(n.context.gl.LEQUAL,Y.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,Y.ReadOnly);h.setDepthMode(E),y.render(h.gl,n.transform.customLayerMatrix()),h.setDirty(),n.setBaseState(),h.bindFramebuffer.set(null)}}},Qi=function(n,s){this.context=new K(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=re.maxUnderzooming+re.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ve,this.gpuTimers={}};Qi.prototype.resize=function(n,s){if(this.width=n*a.browser.devicePixelRatio,this.height=s*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,h=this.style._order;o<h.length;o+=1)this.style._layers[h[o]].resize()},Qi.prototype.setup=function(){var n=this.context,s=new a.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,di.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var o=new a.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(a.EXTENT,0),o.emplaceBack(0,a.EXTENT),o.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=n.createVertexBuffer(o,di.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var h=new a.StructArrayLayout4i8;h.emplaceBack(0,0,0,0),h.emplaceBack(a.EXTENT,0,a.EXTENT,0),h.emplaceBack(0,a.EXTENT,0,a.EXTENT),h.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(h,qe.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var y=new a.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(y,di.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var w=new a.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var E=new a.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(E),this.emptyTexture=new a.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var T=this.context.gl;this.stencilClearMode=new te({func:T.ALWAYS,mask:0},0,255,T.ZERO,T.ZERO,T.ZERO)},Qi.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=a.create();a.ortho(o,0,this.width,this.height,0,0,1),a.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,Y.disabled,this.stencilClearMode,ue.disabled,ge.disabled,wa(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Qi.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,h=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(ue.disabled),o.setDepthMode(Y.disabled);var y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=s;w<E.length;w+=1){var T=E[w],B=this._tileClippingMaskIDs[T.key]=this.nextStencilID++;y.draw(o,h.TRIANGLES,Y.disabled,new te({func:h.ALWAYS,mask:0},B,255,h.KEEP,h.KEEP,h.REPLACE),ue.disabled,ge.disabled,wa(T.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Qi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new te({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Qi.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new te({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Qi.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,h=n.sort(function(B,U){return U.overscaledZ-B.overscaledZ}),y=h[h.length-1].overscaledZ,w=h[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},T=0;T<w;T++)E[T+y]=new te({func:o.GEQUAL,mask:255},T+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=w,[E,h]}return[(s={},s[y]=te.disabled,s),h]},Qi.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ue([n.CONSTANT_COLOR,n.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ue.unblended:ue.alphaBlended},Qi.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return Y.disabled;var h=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Y(o||this.context.gl.LEQUAL,s,[h,h])},Qi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Qi.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var h=this.style._order,y=this.style.sourceCaches;for(var w in y){var E=y[w];E.used&&E.prepare(this.context)}var T,B,U={},J={},$={};for(var ee in y){var le=y[ee];U[ee]=le.getVisibleCoordinates(),J[ee]=U[ee].slice().reverse(),$[ee]=le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var oe=0;oe<h.length;oe++)if(this.style._layers[h[oe]].is3D()){this.opaquePassCutoff=oe;break}this.renderPass="offscreen";for(var me=0,ie=h;me<ie.length;me+=1){var de=this.style._layers[ie[me]];if(de.hasOffscreenPass()&&!de.isHidden(this.transform.zoom)){var be=J[de.source];(de.type==="custom"||be.length)&&this.renderLayer(this,y[de.source],de,be)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){var Ae=this.style._layers[h[this.currentLayer]],Ue=y[Ae.source],Fe=U[Ae.source];this._renderTileClippingMasks(Ae,Fe),this.renderLayer(this,Ue,Ae,Fe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){var je=this.style._layers[h[this.currentLayer]],tt=y[je.source],_t=(je.type==="symbol"?$:J)[je.source];this._renderTileClippingMasks(je,U[je.source]),this.renderLayer(this,tt,je,_t)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(dt){dt.source&&!dt.isHidden(o.transform.zoom)&&(dt.source!==(B&&B.id)&&(B=o.style.sourceCaches[dt.source]),(!T||T.getSource().maxzoom<B.getSource().maxzoom)&&(T=B))}),T&&ds.debug(this,T,T.getVisibleCoordinates())),this.options.showPadding&&function(dt){var Ot=dt.transform.padding;Ou(dt,dt.transform.height-(Ot.top||0),3,Fs),Ou(dt,Ot.bottom||0,3,dn),Fu(dt,Ot.left||0,3,pl),Fu(dt,dt.transform.width-(Ot.right||0),3,ql);var nr=dt.transform.centerPoint;(function(ur,sr,ci,Vt){fl(ur,sr-1,ci-10,2,20,Vt),fl(ur,sr-10,ci-1,20,2,Vt)})(dt,nr.x,dt.transform.height-nr.y,Bu)}(this),this.context.setDefault()},Qi.prototype.renderLayer=function(n,s,o,h){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||h.length)&&(this.id=o.id,this.gpuTimingStart(o),ds[o.type](n,s,o,h,this.style.placement.variableOffsets),this.gpuTimingEnd())},Qi.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Qi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Qi.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Qi.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var h=n[o],y=this.context.extTimerQuery,w=y.getQueryObjectEXT(h.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(h.query),s[o]=w}return s},Qi.prototype.translatePosMatrix=function(n,s,o,h,y){if(!o[0]&&!o[1])return n;var w=y?h==="map"?this.transform.angle:0:h==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),T=Math.cos(w);o=[o[0]*T-o[1]*E,o[0]*E+o[1]*T]}var B=[y?o[0]:ui(s,o[0],this.transform.zoom),y?o[1]:ui(s,o[1],this.transform.zoom),0],U=new Float32Array(16);return a.translate(U,n,B),U},Qi.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Qi.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Qi.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Qi.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new po(this.context,n,La[n],s,Bs[n],this._showOverdrawInspector)),this.cache[o]},Qi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Qi.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Qi.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Qi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Zl=function(n,s){this.points=n,this.planes=s};Zl.fromInvProjectionMatrix=function(n,s,o){var h=Math.pow(2,o),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return a.transformMat4([],E,n)}).map(function(E){return a.scale$1([],E,1/E[3]/s*h)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var T=a.sub([],y[E[0]],y[E[1]]),B=a.sub([],y[E[2]],y[E[1]]),U=a.normalize([],a.cross([],T,B)),J=-a.dot(U,y[E[1]]);return U.concat(J)});return new Zl(y,w)};var ms=function(n,s){this.min=n,this.max=s,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};ms.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=a.clone$2(this.min),h=a.clone$2(this.max),y=0;y<s.length;y++)o[y]=s[y]?this.min[y]:this.center[y],h[y]=s[y]?this.center[y]:this.max[y];return h[2]=this.max[2],new ms(o,h)},ms.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},ms.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},ms.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,h=0;h<n.planes.length;h++){for(var y=n.planes[h],w=0,E=0;E<s.length;E++)w+=a.dot$1(y,s[E])>=0;if(w===0)return 0;w!==s.length&&(o=!1)}if(o)return 2;for(var T=0;T<3;T++){for(var B=Number.MAX_VALUE,U=-Number.MAX_VALUE,J=0;J<n.points.length;J++){var $=n.points[J][T]-this.min[T];B=Math.min(B,$),U=Math.max(U,$)}if(U<0||B>this.max[T]-this.min[T])return 0}return 1};var qo=function(n,s,o,h){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=h};qo.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=a.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=a.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=a.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=a.number(n.right,s.right,o)),this},qo.prototype.getCenter=function(n,s){var o=a.clamp((this.left+n-this.right)/2,0,n),h=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.Point(o,h)},qo.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},qo.prototype.clone=function(){return new qo(this.top,this.bottom,this.left,this.right)},qo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ni=function(n,s,o,h,y){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=y===void 0||y,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o==null?0:o,this._maxPitch=h==null?60:h,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qo,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ni={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ni.prototype.clone=function(){var n=new ni(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Ni.minZoom.get=function(){return this._minZoom},Ni.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Ni.maxZoom.get=function(){return this._maxZoom},Ni.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Ni.minPitch.get=function(){return this._minPitch},Ni.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Ni.maxPitch.get=function(){return this._maxPitch},Ni.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Ni.renderWorldCopies.get=function(){return this._renderWorldCopies},Ni.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Ni.worldSize.get=function(){return this.tileSize*this.scale},Ni.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ni.size.get=function(){return new a.Point(this.width,this.height)},Ni.bearing.get=function(){return-this.angle/Math.PI*180},Ni.bearing.set=function(n){var s=-a.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ni.pitch.get=function(){return this._pitch/Math.PI*180},Ni.pitch.set=function(n){var s=a.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Ni.fov.get=function(){return this._fov/Math.PI*180},Ni.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Ni.zoom.get=function(){return this._zoom},Ni.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Ni.center.get=function(){return this._center},Ni.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Ni.padding.get=function(){return this._edgeInsets.toJSON()},Ni.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Ni.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ni.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},ni.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},ni.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},ni.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new a.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new a.Point(0,0)),h=this.pointCoordinate(new a.Point(this.width,0)),y=this.pointCoordinate(new a.Point(this.width,this.height)),w=this.pointCoordinate(new a.Point(0,this.height)),E=Math.floor(Math.min(o.x,h.x,y.x,w.x)),T=Math.floor(Math.max(o.x,h.x,y.x,w.x)),B=E-1;B<=T+1;B++)B!==0&&s.push(new a.UnwrappedTileID(B,n));return s},ni.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var h=a.MercatorCoordinate.fromLngLat(this.center),y=Math.pow(2,s),w=[y*h.x,y*h.y,0],E=Zl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),T=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(T=s);var B=function(dt){return{aabb:new ms([dt*y,0,0],[(dt+1)*y,y,0]),zoom:0,x:0,y:0,wrap:dt,fullyVisible:!1}},U=[],J=[],$=s,ee=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var le=1;le<=3;le++)U.push(B(-le)),U.push(B(le));for(U.push(B(0));U.length>0;){var oe=U.pop(),me=oe.x,ie=oe.y,de=oe.fullyVisible;if(!de){var be=oe.aabb.intersects(E);if(be===0)continue;de=be===2}var Ae=oe.aabb.distanceX(w),Ue=oe.aabb.distanceY(w),Fe=Math.max(Math.abs(Ae),Math.abs(Ue));if(oe.zoom===$||Fe>3+(1<<$-oe.zoom)-2&&oe.zoom>=T)J.push({tileID:new a.OverscaledTileID(oe.zoom===$?ee:oe.zoom,oe.wrap,oe.zoom,me,ie),distanceSq:a.sqrLen([w[0]-.5-me,w[1]-.5-ie])});else for(var je=0;je<4;je++){var tt=(me<<1)+je%2,_t=(ie<<1)+(je>>1);U.push({aabb:oe.aabb.quadrant(je),zoom:oe.zoom+1,x:tt,y:_t,wrap:oe.wrap,fullyVisible:de})}}return J.sort(function(dt,Ot){return dt.distanceSq-Ot.distanceSq}).map(function(dt){return dt.tileID})},ni.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Ni.unmodified.get=function(){return this._unmodified},ni.prototype.zoomScale=function(n){return Math.pow(2,n)},ni.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},ni.prototype.project=function(n){var s=a.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(n.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)},ni.prototype.unproject=function(n){return new a.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Ni.point.get=function(){return this.project(this.center)},ni.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),h=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(n),w=new a.MercatorCoordinate(y.x-(o.x-h.x),y.y-(o.y-h.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},ni.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},ni.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},ni.prototype.locationCoordinate=function(n){return a.MercatorCoordinate.fromLngLat(n)},ni.prototype.coordinateLocation=function(n){return n.toLngLat()},ni.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(o,o,this.pixelMatrixInverse);var h=s[3],y=o[3],w=s[1]/h,E=o[1]/y,T=s[2]/h,B=o[2]/y,U=T===B?0:(0-T)/(B-T);return new a.MercatorCoordinate(a.number(s[0]/h,o[0]/y,U)/this.worldSize,a.number(w,E,U)/this.worldSize)},ni.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.Point(s[0]/s[3],s[1]/s[3])},ni.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},ni.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ni.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ni.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,h=s?this._alignedPosMatrixCache:this._posMatrixCache;if(h[o])return h[o];var y=n.canonical,w=this.worldSize/this.zoomScale(y.z),E=y.x+Math.pow(2,y.z)*n.wrap,T=a.identity(new Float64Array(16));return a.translate(T,T,[E*w,y.y*w,0]),a.scale(T,T,[w/a.EXTENT,w/a.EXTENT,1]),a.multiply(T,s?this.alignedProjMatrix:this.projMatrix,T),h[o]=new Float32Array(T),h[o]},ni.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ni.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,h,y=-90,w=90,E=-180,T=180,B=this.size,U=this._unmodified;if(this.latRange){var J=this.latRange;y=a.mercatorYfromLat(J[1])*this.worldSize,n=(w=a.mercatorYfromLat(J[0])*this.worldSize)-y<B.y?B.y/(w-y):0}if(this.lngRange){var $=this.lngRange;E=a.mercatorXfromLng($[0])*this.worldSize,s=(T=a.mercatorXfromLng($[1])*this.worldSize)-E<B.x?B.x/(T-E):0}var ee=this.point,le=Math.max(s||0,n||0);if(le)return this.center=this.unproject(new a.Point(s?(T+E)/2:ee.x,n?(w+y)/2:ee.y)),this.zoom+=this.scaleZoom(le),this._unmodified=U,void(this._constraining=!1);if(this.latRange){var oe=ee.y,me=B.y/2;oe-me<y&&(h=y+me),oe+me>w&&(h=w-me)}if(this.lngRange){var ie=ee.x,de=B.x/2;ie-de<E&&(o=E+de),ie+de>T&&(o=T-de)}o===void 0&&h===void 0||(this.center=this.unproject(new a.Point(o!==void 0?o:ee.x,h!==void 0?h:ee.y))),this._unmodified=U,this._constraining=!1}},ni.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),h=Math.sin(o)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-o,.01,Math.PI-.01)),y=this.point,w=y.x,E=y.y,T=1.01*(Math.cos(Math.PI/2-this._pitch)*h+this.cameraToCenterDistance),B=this.height/50,U=new Float64Array(16);a.perspective(U,this._fov,this.width/this.height,B,T),U[8]=2*-n.x/this.width,U[9]=2*n.y/this.height,a.scale(U,U,[1,-1,1]),a.translate(U,U,[0,0,-this.cameraToCenterDistance]),a.rotateX(U,U,this._pitch),a.rotateZ(U,U,this.angle),a.translate(U,U,[-w,-E,0]),this.mercatorMatrix=a.scale([],U,[this.worldSize,this.worldSize,this.worldSize]),a.scale(U,U,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=U,this.invProjMatrix=a.invert([],this.projMatrix);var J=this.width%2/2,$=this.height%2/2,ee=Math.cos(this.angle),le=Math.sin(this.angle),oe=w-Math.round(w)+ee*J+le*$,me=E-Math.round(E)+ee*$+le*J,ie=new Float64Array(U);if(a.translate(ie,ie,[oe>.5?oe-1:oe,me>.5?me-1:me,0]),this.alignedProjMatrix=ie,U=a.create(),a.scale(U,U,[this.width/2,-this.height/2,1]),a.translate(U,U,[1,-1,0]),this.labelPlaneMatrix=U,U=a.create(),a.scale(U,U,[1,-1,1]),a.translate(U,U,[-1,-1,0]),a.scale(U,U,[2/this.width,2/this.height,1]),this.glCoordMatrix=U,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(U=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=U,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ni.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new a.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},ni.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,n))},ni.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,h=s.y,y=s.x,w=s.y,E=0,T=n;E<T.length;E+=1){var B=T[E];o=Math.min(o,B.x),h=Math.min(h,B.y),y=Math.max(y,B.x),w=Math.max(w,B.y)}return[new a.Point(o,h),new a.Point(y,h),new a.Point(y,w),new a.Point(o,w),new a.Point(o,h)]},Object.defineProperties(ni.prototype,Ni);var Ra=function(n){var s,o,h,y;this._hashName=n&&encodeURIComponent(n),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,h=null,y=function(){h=null,o&&(s(),h=setTimeout(y,300),o=!1)},function(){return o=!0,h||y(),h})};Ra.prototype.addTo=function(n){return this._map=n,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ra.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ra.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,h=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,h),w=Math.round(s.lng*y)/y,E=Math.round(s.lat*y)/y,T=this._map.getBearing(),B=this._map.getPitch(),U="";if(U+=n?"/"+w+"/"+E+"/"+o:o+"/"+E+"/"+w,(T||B)&&(U+="/"+Math.round(10*T)/10),B&&(U+="/"+Math.round(B)),this._hashName){var J=this._hashName,$=!1,ee=a.window.location.hash.slice(1).split("&").map(function(le){var oe=le.split("=")[0];return oe===J?($=!0,oe+"="+U):le}).filter(function(le){return le});return $||ee.push(J+"="+U),"#"+ee.join("&")}return"#"+U},Ra.prototype._getCurrentHash=function(){var n,s=this,o=a.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(h){return h.split("=")}).forEach(function(h){h[0]===s._hashName&&(n=h)}),(n&&n[1]||"").split("/")):o.split("/")},Ra.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},Ra.prototype._updateHashUnthrottled=function(){var n=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,n)}catch{}};var dl={linearity:.3,easing:a.bezier(0,0,.3,1)},Ns=a.extend({deceleration:2500,maxSpeed:1400},dl),ml=a.extend({deceleration:20,maxSpeed:1400},dl),Hh=a.extend({deceleration:1e3,maxSpeed:360},dl),Xh=a.extend({deceleration:1e3,maxSpeed:90},dl),yl=function(n){this._map=n,this.clear()};function gl(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function To(n,s,o){var h=o.maxSpeed,y=o.linearity,w=o.deceleration,E=a.clamp(n*y/(s/1e3),-h,h),T=Math.abs(E)/(w*y);return{easing:o.easing,duration:1e3*T,amount:E*(T/2)}}yl.prototype.clear=function(){this._inertiaBuffer=[]},yl.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:n})},yl.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=a.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},yl.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},o=0,h=this._inertiaBuffer;o<h.length;o+=1){var y=h[o].settings;s.zoom+=y.zoomDelta||0,s.bearing+=y.bearingDelta||0,s.pitch+=y.pitchDelta||0,y.panDelta&&s.pan._add(y.panDelta),y.around&&(s.around=y.around),y.pinchAround&&(s.pinchAround=y.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(s.pan.mag()){var T=To(s.pan.mag(),w,a.extend({},Ns,n||{}));E.offset=s.pan.mult(T.amount/s.pan.mag()),E.center=this._map.transform.center,gl(E,T)}if(s.zoom){var B=To(s.zoom,w,ml);E.zoom=this._map.transform.zoom+B.amount,gl(E,B)}if(s.bearing){var U=To(s.bearing,w,Hh);E.bearing=this._map.transform.bearing+a.clamp(U.amount,-179,179),gl(E,U)}if(s.pitch){var J=To(s.pitch,w,Xh);E.pitch=this._map.transform.pitch+J.amount,gl(E,J)}if(E.zoom||E.bearing){var $=s.pinchAround===void 0?s.around:s.pinchAround;E.around=$?this._map.unproject($):this._map.getCenter()}return this.clear(),a.extend(E,{noMoveStart:!0})}};var kn=function(n){function s(h,y,w,E){E===void 0&&(E={});var T=k.mousePos(y.getCanvasContainer(),w),B=y.unproject(T);n.call(this,h,a.extend({point:T,lngLat:B,originalEvent:w},E)),this._defaultPrevented=!1,this.target=y}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),_l=function(n){function s(h,y,w){var E=h==="touchend"?w.changedTouches:w.touches,T=k.touchPos(y.getCanvasContainer(),E),B=T.map(function($){return y.unproject($)}),U=T.reduce(function($,ee,le,oe){return $.add(ee.div(oe.length))},new a.Point(0,0)),J=y.unproject(U);n.call(this,h,{points:T,point:U,lngLats:B,lngLat:J,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),Nc=function(n){function s(h,y,w){n.call(this,h,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),wn=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};wn.prototype.reset=function(){delete this._mousedownPos},wn.prototype.wheel=function(n){return this._firePreventable(new Nc(n.type,this._map,n))},wn.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new kn(n.type,this._map,n))},wn.prototype.mouseup=function(n){this._map.fire(new kn(n.type,this._map,n))},wn.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new kn(n.type,this._map,n))},wn.prototype.dblclick=function(n){return this._firePreventable(new kn(n.type,this._map,n))},wn.prototype.mouseover=function(n){this._map.fire(new kn(n.type,this._map,n))},wn.prototype.mouseout=function(n){this._map.fire(new kn(n.type,this._map,n))},wn.prototype.touchstart=function(n){return this._firePreventable(new _l(n.type,this._map,n))},wn.prototype.touchmove=function(n){this._map.fire(new _l(n.type,this._map,n))},wn.prototype.touchend=function(n){this._map.fire(new _l(n.type,this._map,n))},wn.prototype.touchcancel=function(n){this._map.fire(new _l(n.type,this._map,n))},wn.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},wn.prototype.isEnabled=function(){return!0},wn.prototype.isActive=function(){return!1},wn.prototype.enable=function(){},wn.prototype.disable=function(){};var jt=function(n){this._map=n};jt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},jt.prototype.mousemove=function(n){this._map.fire(new kn(n.type,this._map,n))},jt.prototype.mousedown=function(){this._delayContextMenu=!0},jt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new kn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},jt.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new kn(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},jt.prototype.isEnabled=function(){return!0},jt.prototype.isActive=function(){return!1},jt.prototype.enable=function(){},jt.prototype.disable=function(){};var Sa=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Gl(n,s){for(var o={},h=0;h<n.length;h++)o[n[h].identifier]=s[h];return o}Sa.prototype.isEnabled=function(){return!!this._enabled},Sa.prototype.isActive=function(){return!!this._active},Sa.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Sa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Sa.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(k.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Sa.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var h=this._startPos;this._lastPos=o,this._box||(this._box=k.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var y=Math.min(h.x,o.x),w=Math.max(h.x,o.x),E=Math.min(h.y,o.y),T=Math.max(h.y,o.y);k.setTransform(this._box,"translate("+y+"px,"+E+"px)"),this._box.style.width=w-y+"px",this._box.style.height=T-E+"px"}}},Sa.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var h=this._startPos,y=s;if(this.reset(),k.suppressClick(),h.x!==y.x||h.y!==y.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(h,y,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},Sa.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},Sa.prototype.blur=function(){this.reset()},Sa.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos},Sa.prototype._fireEvent=function(n,s){return this._map.fire(new a.Event(n,{originalEvent:s}))};var Vs=function(n){this.reset(),this.numTouches=n.numTouches};Vs.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Vs.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(h){for(var y=new a.Point(0,0),w=0,E=h;w<E.length;w+=1)y._add(E[w]);return y.div(h.length)}(s),this.touches=Gl(o,s)))},Vs.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var h=Gl(o,s);for(var y in this.touches){var w=h[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}},Vs.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var h=!this.aborted&&this.centroid;if(this.reset(),h)return h}};var oo=function(n){this.singleTap=new Vs(n),this.numTaps=n.numTaps,this.reset()};oo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},oo.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},oo.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},oo.prototype.touchend=function(n,s,o){var h=this.singleTap.touchend(n,s,o);if(h){var y=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(h)<30;if(y&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}};var ka=function(){this._zoomIn=new oo({numTouches:1,numTaps:2}),this._zoomOut=new oo({numTouches:2,numTaps:1}),this.reset()};ka.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ka.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},ka.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},ka.prototype.touchend=function(n,s,o){var h=this,y=this._zoomIn.touchend(n,s,o),w=this._zoomOut.touchend(n,s,o);return y?(this._active=!0,n.preventDefault(),setTimeout(function(){return h.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(y)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return h.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:n})}}):void 0},ka.prototype.touchcancel=function(){this.reset()},ka.prototype.enable=function(){this._enabled=!0},ka.prototype.disable=function(){this._enabled=!1,this.reset()},ka.prototype.isEnabled=function(){return this._enabled},ka.prototype.isActive=function(){return this._active};var Nu={0:1,2:2},Tt=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};Tt.prototype.blur=function(){this.reset()},Tt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Tt.prototype._correctButton=function(n,s){return!1},Tt.prototype._move=function(n,s){return{}},Tt.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=k.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},Tt.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(h,y){var w=Nu[y];return h.buttons===void 0||(h.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},Tt.prototype.mouseupWindow=function(n){this._lastPoint&&k.mouseButton(n)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())},Tt.prototype.enable=function(){this._enabled=!0},Tt.prototype.disable=function(){this._enabled=!1,this.reset()},Tt.prototype.isEnabled=function(){return this._enabled},Tt.prototype.isActive=function(){return this._active};var Vu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,h){n.prototype.mousedown.call(this,o,h),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,h){return h===0&&!o.ctrlKey},s.prototype._move=function(o,h){return{around:h,panDelta:h.sub(o)}},s}(Tt),Kl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,h){return h===0&&o.ctrlKey||h===2},s.prototype._move=function(o,h){var y=.8*(h.x-o.x);if(y)return this._active=!0,{bearingDelta:y}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(Tt),Uu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,h){return h===0&&o.ctrlKey||h===2},s.prototype._move=function(o,h){var y=-.5*(h.y-o.y);if(y)return this._active=!0,{pitchDelta:y}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(Tt),Ha=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};Ha.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Ha.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},Ha.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},Ha.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},Ha.prototype.touchcancel=function(){this.reset()},Ha.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var h=Gl(o,s),y=new a.Point(0,0),w=new a.Point(0,0),E=0;for(var T in h){var B=h[T],U=this._touches[T];U&&(y._add(B),w._add(B.sub(U)),E++,h[T]=B)}if(this._touches=h,!(E<this._minTouches)&&w.mag()){var J=w.div(E);if(this._sum._add(J),!(this._sum.mag()<this._clickTolerance))return{around:y.div(E),panDelta:J}}},Ha.prototype.enable=function(){this._enabled=!0},Ha.prototype.disable=function(){this._enabled=!1,this.reset()},Ha.prototype.isEnabled=function(){return this._enabled},Ha.prototype.isActive=function(){return this._active};var Ia=function(){this.reset()};function Hl(n,s,o){for(var h=0;h<n.length;h++)if(n[h].identifier===o)return s[h]}function Xl(n,s){return Math.log(n/s)/Math.LN2}Ia.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ia.prototype._start=function(n){},Ia.prototype._move=function(n,s,o){return{}},Ia.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},Ia.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var h=this._firstTwoTouches,y=h[1],w=Hl(o,s,h[0]),E=Hl(o,s,y);if(w&&E){var T=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],T,n)}}},Ia.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var h=this._firstTwoTouches,y=h[1],w=Hl(o,s,h[0]),E=Hl(o,s,y);w&&E||(this._active&&k.suppressClick(),this.reset())}},Ia.prototype.touchcancel=function(){this.reset()},Ia.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},Ia.prototype.disable=function(){this._enabled=!1,this.reset()},Ia.prototype.isEnabled=function(){return this._enabled},Ia.prototype.isActive=function(){return this._active};var Ta=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,h){var y=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Xl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xl(this._distance,y),pinchAround:h}},s}(Ia);function Ao(n,s){return 180*n.angleWith(s)/Math.PI}var Vc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,h){var y=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ao(this._vector,y),pinchAround:h}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var h=25/(Math.PI*this._minDiameter)*360,y=Ao(o,this._startVector);return Math.abs(y)<h},s}(Ia);function vl(n){return Math.abs(n.y)>Math.abs(n.x)}var ju=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,vl(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,h,y){var w=o[0].sub(this._lastPoints[0]),E=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,y.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,h,y){if(this._valid!==void 0)return this._valid;var w=o.mag()>=2,E=h.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;var T=o.y>0==h.y>0;return vl(o)&&vl(h)&&T}},s}(Ia),qu={panStep:100,bearingStep:15,pitchStep:10},so=function(){var n=qu;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function Ba(n){return n*(2-n)}so.prototype.blur=function(){this.reset()},so.prototype.reset=function(){this._active=!1},so.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,h=0,y=0,w=0,E=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?h=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?h=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?y=1:(n.preventDefault(),E=-1);break;case 40:n.shiftKey?y=-1:(n.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(h=0,y=0),{cameraAnimation:function(T){var B=T.getZoom();T.easeTo({duration:300,easeId:"keyboardHandler",easing:Ba,zoom:o?Math.round(B)+o*(n.shiftKey?2:1):B,bearing:T.getBearing()+h*s._bearingStep,pitch:T.getPitch()+y*s._pitchStep,offset:[-w*s._panStep,-E*s._panStep],center:T.getCenter()},{originalEvent:n})}}}},so.prototype.enable=function(){this._enabled=!0},so.prototype.disable=function(){this._enabled=!1,this.reset()},so.prototype.isEnabled=function(){return this._enabled},so.prototype.isActive=function(){return this._active},so.prototype.disableRotation=function(){this._rotationDisabled=!0},so.prototype.enableRotation=function(){this._rotationDisabled=!1};var $r=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};$r.prototype.setZoomRate=function(n){this._defaultZoomRate=n},$r.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},$r.prototype.isEnabled=function(){return!!this._enabled},$r.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},$r.prototype.isZooming=function(){return!!this._zooming},$r.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},$r.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$r.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=a.browser.now(),h=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(h*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},$r.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},$r.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=k.mousePos(this._el,n);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},$r.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,h=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&h!==0&&(h=1/h);var y=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(y*h))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,T=this._startZoom,B=this._easing,U=!1;if(this._type==="wheel"&&T&&B){var J=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),$=B(J);w=a.number(T,E,$),J<1?this._frameId||(this._frameId=!0):U=!0}else w=E,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!U,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},$r.prototype._smoothOutEasing=function(n){var s=a.ease;if(this._prevEase){var o=this._prevEase,h=(a.browser.now()-o.start)/o.duration,y=o.easing(h+.01)-o.easing(h),w=.27/Math.sqrt(y*y+1e-4)*.01,E=Math.sqrt(.0729-w*w);s=a.bezier(w,E,.25,1)}return this._prevEase={start:a.browser.now(),duration:n,easing:s},s},$r.prototype.blur=function(){this.reset()},$r.prototype.reset=function(){this._active=!1};var go=function(n,s){this._clickZoom=n,this._tapZoom=s};go.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},go.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},go.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},go.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Xa=function(){this.reset()};Xa.prototype.reset=function(){this._active=!1},Xa.prototype.blur=function(){this.reset()},Xa.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},Xa.prototype.enable=function(){this._enabled=!0},Xa.prototype.disable=function(){this._enabled=!1,this.reset()},Xa.prototype.isEnabled=function(){return this._enabled},Xa.prototype.isActive=function(){return this._active};var Hn=function(){this._tap=new oo({numTouches:1,numTaps:1}),this.reset()};Hn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Hn.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},Hn.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var h=s[0],y=h.y-this._swipePoint.y;return this._swipePoint=h,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,s,o)},Hn.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},Hn.prototype.touchcancel=function(){this.reset()},Hn.prototype.enable=function(){this._enabled=!0},Hn.prototype.disable=function(){this._enabled=!1,this.reset()},Hn.prototype.isEnabled=function(){return this._enabled},Hn.prototype.isActive=function(){return this._active};var ys=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};ys.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ys.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ys.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ys.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Zo=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};Zo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Zo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Zo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Zo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var lo=function(n,s,o,h){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0};lo.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},lo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},lo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},lo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},lo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},lo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ia=function(n){return n.zoom||n.drag||n.pitch||n.rotate},bl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(a.Event);function ir(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var Zt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yl(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[a.window,"blur",void 0]];for(var h=0,y=this._listeners;h<y.length;h+=1){var w=y[h],E=w[0];k.addEventListener(E,w[1],E===a.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};Zt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],h=o[0];k.removeEventListener(h,o[1],h===a.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},Zt.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new wn(s,n));var h=s.boxZoom=new Sa(s,n);this._add("boxZoom",h);var y=new ka,w=new Xa;s.doubleClickZoom=new go(w,y),this._add("tapZoom",y),this._add("clickZoom",w);var E=new Hn;this._add("tapDragZoom",E);var T=s.touchPitch=new ju;this._add("touchPitch",T);var B=new Kl(n),U=new Uu(n);s.dragRotate=new Zo(n,B,U),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);var J=new Vu(n),$=new Ha(n);s.dragPan=new ys(o,J,$),this._add("mousePan",J),this._add("touchPan",$,["touchZoom","touchRotate"]);var ee=new Vc,le=new Ta;s.touchZoomRotate=new lo(o,le,ee,E),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]);var oe=s.scrollZoom=new $r(s,this);this._add("scrollZoom",oe,["mousePan"]);var me=s.keyboard=new so;this._add("keyboard",me),this._add("blockableMapEvent",new jt(s));for(var ie=0,de=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ie<de.length;ie+=1){var be=de[ie];n.interactive&&n[be]&&s[be].enable(n[be])}},Zt.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},Zt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},Zt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},Zt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Zt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Zt.prototype.isMoving=function(){return Boolean(ia(this._eventsInProgress))||this.isZooming()},Zt.prototype._blockedByActive=function(n,s,o){for(var h in n)if(h!==o&&(!s||s.indexOf(h)<0))return!0;return!1},Zt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},Zt.prototype._getMapTouches=function(n){for(var s=[],o=0,h=n;o<h.length;o+=1){var y=h[o];this._el.contains(y.target)&&s.push(y)}return s},Zt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,h={needsRenderFrame:!1},y={},w={},E=n.touches?this._getMapTouches(n.touches):void 0,T=E?k.touchPos(this._el,E):k.mousePos(this._el,n),B=0,U=this._handlers;B<U.length;B+=1){var J=U[B],$=J.handlerName,ee=J.handler,le=J.allowed;if(ee.isEnabled()){var oe=void 0;this._blockedByActive(w,le,$)?ee.reset():ee[s||n.type]&&(oe=ee[s||n.type](n,T,E),this.mergeHandlerResult(h,y,oe,$,o),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||ee.isActive())&&(w[$]=ee)}}var me={};for(var ie in this._previousActiveHandlers)w[ie]||(me[ie]=o);this._previousActiveHandlers=w,(Object.keys(me).length||ir(h))&&(this._changes.push([h,y,me]),this._triggerRenderFrame()),(Object.keys(w).length||ir(h))&&this._map._stop(!0),this._updatingCamera=!1;var de=h.cameraAnimation;de&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],de(this._map))},Zt.prototype.mergeHandlerResult=function(n,s,o,h,y){if(o){a.extend(n,o);var w={handlerName:h,originalEvent:o.originalEvent||y};o.zoomDelta!==void 0&&(s.zoom=w),o.panDelta!==void 0&&(s.drag=w),o.pitchDelta!==void 0&&(s.pitch=w),o.bearingDelta!==void 0&&(s.rotate=w)}},Zt.prototype._applyChanges=function(){for(var n={},s={},o={},h=0,y=this._changes;h<y.length;h+=1){var w=y[h],E=w[0],T=w[1],B=w[2];E.panDelta&&(n.panDelta=(n.panDelta||new a.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(n.around=E.around),E.pinchAround!==void 0&&(n.pinchAround=E.pinchAround),E.noInertia&&(n.noInertia=E.noInertia),a.extend(s,T),a.extend(o,B)}this._updateMapTransform(n,s,o),this._changes=[]},Zt.prototype._updateMapTransform=function(n,s,o){var h=this._map,y=h.transform;if(!ir(n))return this._fireEvents(s,o,!0);var w=n.panDelta,E=n.zoomDelta,T=n.bearingDelta,B=n.pitchDelta,U=n.around,J=n.pinchAround;J!==void 0&&(U=J),h._stop(!0),U=U||h.transform.centerPoint;var $=y.pointLocation(w?U.sub(w):U);T&&(y.bearing+=T),B&&(y.pitch+=B),E&&(y.zoom+=E),y.setLocationAtPoint($,U),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},Zt.prototype._fireEvents=function(n,s,o){var h=this,y=ia(this._eventsInProgress),w=ia(n),E={};for(var T in n)this._eventsInProgress[T]||(E[T+"start"]=n[T].originalEvent),this._eventsInProgress[T]=n[T];for(var B in!y&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(B,E[B]);for(var U in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(U,n[U].originalEvent);var J,$={};for(var ee in this._eventsInProgress){var le=this._eventsInProgress[ee],oe=le.handlerName,me=le.originalEvent;this._handlersById[oe].isActive()||(delete this._eventsInProgress[ee],$[ee+"end"]=J=s[oe]||me)}for(var ie in $)this._fireEvent(ie,$[ie]);var de=ia(this._eventsInProgress);if(o&&(y||w)&&!de){this._updatingCamera=!0;var be=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ae=function(Ue){return Ue!==0&&-h._bearingSnap<Ue&&Ue<h._bearingSnap};be?(Ae(be.bearing||this._map.getBearing())&&(be.bearing=0),this._map.easeTo(be,{originalEvent:J})):(this._map.fire(new a.Event("moveend",{originalEvent:J})),Ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Zt.prototype._fireEvent=function(n,s){this._map.fire(new a.Event(n,s?{originalEvent:s}:{}))},Zt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new bl("renderFrame",{timeStamp:s})),n._applyChanges()})},Zt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Wl=function(n){function s(o,h){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=h.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,h){return this.jumpTo({center:o},h)},s.prototype.panBy=function(o,h,y){return o=a.Point.convert(o).mult(-1),this.panTo(this.transform.center,a.extend({offset:o},h),y)},s.prototype.panTo=function(o,h,y){return this.easeTo(a.extend({center:o},h),y)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,h){return this.jumpTo({zoom:o},h),this},s.prototype.zoomTo=function(o,h,y){return this.easeTo(a.extend({zoom:o},h),y)},s.prototype.zoomIn=function(o,h){return this.zoomTo(this.getZoom()+1,o,h),this},s.prototype.zoomOut=function(o,h){return this.zoomTo(this.getZoom()-1,o,h),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,h){return this.jumpTo({bearing:o},h),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,h){return this.jumpTo({padding:o},h),this},s.prototype.rotateTo=function(o,h,y){return this.easeTo(a.extend({bearing:o},h),y)},s.prototype.resetNorth=function(o,h){return this.rotateTo(0,a.extend({duration:1e3},o),h),this},s.prototype.resetNorthPitch=function(o,h){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},o),h),this},s.prototype.snapToNorth=function(o,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,h):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,h){return this.jumpTo({pitch:o},h),this},s.prototype.cameraForBounds=function(o,h){o=a.LngLatBounds.convert(o);var y=h&&h.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),y,h)},s.prototype._cameraForBoxAndBearing=function(o,h,y,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var T=w.padding;w.padding={top:T,bottom:T,right:T,left:T}}w.padding=a.extend(E,w.padding);var B=this.transform,U=B.padding,J=B.project(a.LngLat.convert(o)),$=B.project(a.LngLat.convert(h)),ee=J.rotate(-y*Math.PI/180),le=$.rotate(-y*Math.PI/180),oe=new a.Point(Math.max(ee.x,le.x),Math.max(ee.y,le.y)),me=new a.Point(Math.min(ee.x,le.x),Math.min(ee.y,le.y)),ie=oe.sub(me),de=(B.width-(U.left+U.right+w.padding.left+w.padding.right))/ie.x,be=(B.height-(U.top+U.bottom+w.padding.top+w.padding.bottom))/ie.y;if(!(be<0||de<0)){var Ae=Math.min(B.scaleZoom(B.scale*Math.min(de,be)),w.maxZoom),Ue=typeof w.offset.x=="number"?new a.Point(w.offset.x,w.offset.y):a.Point.convert(w.offset),Fe=new a.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(y*Math.PI/180),je=Ue.add(Fe).mult(B.scale/B.zoomScale(Ae));return{center:B.unproject(J.add($).div(2).sub(je)),zoom:Ae,bearing:y}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,h,y){return this._fitInternal(this.cameraForBounds(o,h),h,y)},s.prototype.fitScreenCoordinates=function(o,h,y,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(o)),this.transform.pointLocation(a.Point.convert(h)),y,w),w,E)},s.prototype._fitInternal=function(o,h,y){return o?(delete(h=a.extend(o,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this},s.prototype.jumpTo=function(o,h){this.stop();var y=this.transform,w=!1,E=!1,T=!1;return"zoom"in o&&y.zoom!==+o.zoom&&(w=!0,y.zoom=+o.zoom),o.center!==void 0&&(y.center=a.LngLat.convert(o.center)),"bearing"in o&&y.bearing!==+o.bearing&&(E=!0,y.bearing=+o.bearing),"pitch"in o&&y.pitch!==+o.pitch&&(T=!0,y.pitch=+o.pitch),o.padding==null||y.isPaddingEqual(o.padding)||(y.padding=o.padding),this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h)),w&&this.fire(new a.Event("zoomstart",h)).fire(new a.Event("zoom",h)).fire(new a.Event("zoomend",h)),E&&this.fire(new a.Event("rotatestart",h)).fire(new a.Event("rotate",h)).fire(new a.Event("rotateend",h)),T&&this.fire(new a.Event("pitchstart",h)).fire(new a.Event("pitch",h)).fire(new a.Event("pitchend",h)),this.fire(new a.Event("moveend",h))},s.prototype.easeTo=function(o,h){var y=this;this._stop(!1,o.easeId),((o=a.extend({offset:[0,0],duration:500,easing:a.ease},o)).animate===!1||!o.essential&&a.browser.prefersReducedMotion)&&(o.duration=0);var w=this.transform,E=this.getZoom(),T=this.getBearing(),B=this.getPitch(),U=this.getPadding(),J="zoom"in o?+o.zoom:E,$="bearing"in o?this._normalizeBearing(o.bearing,T):T,ee="pitch"in o?+o.pitch:B,le="padding"in o?o.padding:w.padding,oe=a.Point.convert(o.offset),me=w.centerPoint.add(oe),ie=w.pointLocation(me),de=a.LngLat.convert(o.center||ie);this._normalizeCenter(de);var be,Ae,Ue=w.project(ie),Fe=w.project(de).sub(Ue),je=w.zoomScale(J-E);o.around&&(be=a.LngLat.convert(o.around),Ae=w.locationPoint(be));var tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==E,this._rotating=this._rotating||T!==$,this._pitching=this._pitching||ee!==B,this._padding=!w.isPaddingEqual(le),this._easeId=o.easeId,this._prepareEase(h,o.noMoveStart,tt),this._ease(function(_t){if(y._zooming&&(w.zoom=a.number(E,J,_t)),y._rotating&&(w.bearing=a.number(T,$,_t)),y._pitching&&(w.pitch=a.number(B,ee,_t)),y._padding&&(w.interpolatePadding(U,le,_t),me=w.centerPoint.add(oe)),be)w.setLocationAtPoint(be,Ae);else{var dt=w.zoomScale(w.zoom-E),Ot=J>E?Math.min(2,je):Math.max(.5,je),nr=Math.pow(Ot,1-_t),ur=w.unproject(Ue.add(Fe.mult(_t*nr)).mult(dt));w.setLocationAtPoint(w.renderWorldCopies?ur.wrap():ur,me)}y._fireMoveEvents(h)},function(_t){y._afterEase(h,_t)},o),this},s.prototype._prepareEase=function(o,h,y){y===void 0&&(y={}),this._moving=!0,h||y.moving||this.fire(new a.Event("movestart",o)),this._zooming&&!y.zooming&&this.fire(new a.Event("zoomstart",o)),this._rotating&&!y.rotating&&this.fire(new a.Event("rotatestart",o)),this._pitching&&!y.pitching&&this.fire(new a.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new a.Event("move",o)),this._zooming&&this.fire(new a.Event("zoom",o)),this._rotating&&this.fire(new a.Event("rotate",o)),this._pitching&&this.fire(new a.Event("pitch",o))},s.prototype._afterEase=function(o,h){if(!this._easeId||!h||this._easeId!==h){delete this._easeId;var y=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new a.Event("zoomend",o)),w&&this.fire(new a.Event("rotateend",o)),E&&this.fire(new a.Event("pitchend",o)),this.fire(new a.Event("moveend",o))}},s.prototype.flyTo=function(o,h){var y=this;if(!o.essential&&a.browser.prefersReducedMotion){var w=a.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,h)}this.stop(),o=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},o);var E=this.transform,T=this.getZoom(),B=this.getBearing(),U=this.getPitch(),J=this.getPadding(),$="zoom"in o?a.clamp(+o.zoom,E.minZoom,E.maxZoom):T,ee="bearing"in o?this._normalizeBearing(o.bearing,B):B,le="pitch"in o?+o.pitch:U,oe="padding"in o?o.padding:E.padding,me=E.zoomScale($-T),ie=a.Point.convert(o.offset),de=E.centerPoint.add(ie),be=E.pointLocation(de),Ae=a.LngLat.convert(o.center||be);this._normalizeCenter(Ae);var Ue=E.project(be),Fe=E.project(Ae).sub(Ue),je=o.curve,tt=Math.max(E.width,E.height),_t=tt/me,dt=Fe.mag();if("minZoom"in o){var Ot=a.clamp(Math.min(o.minZoom,T,$),E.minZoom,E.maxZoom),nr=tt/E.zoomScale(Ot-T);je=Math.sqrt(nr/dt*2)}var ur=je*je;function sr(wr){var _r=(_t*_t-tt*tt+(wr?-1:1)*ur*ur*dt*dt)/(2*(wr?_t:tt)*ur*dt);return Math.log(Math.sqrt(_r*_r+1)-_r)}function ci(wr){return(Math.exp(wr)-Math.exp(-wr))/2}function Vt(wr){return(Math.exp(wr)+Math.exp(-wr))/2}var Pr=sr(0),jr=function(wr){return Vt(Pr)/Vt(Pr+je*wr)},zr=function(wr){return tt*((Vt(Pr)*(ci(_r=Pr+je*wr)/Vt(_r))-ci(Pr))/ur)/dt;var _r},Tr=(sr(1)-Pr)/je;if(Math.abs(dt)<1e-6||!isFinite(Tr)){if(Math.abs(tt-_t)<1e-6)return this.easeTo(o,h);var Or=_t<tt?-1:1;Tr=Math.abs(Math.log(_t/tt))/je,zr=function(){return 0},jr=function(wr){return Math.exp(Or*je*wr)}}return o.duration="duration"in o?+o.duration:1e3*Tr/("screenSpeed"in o?+o.screenSpeed/je:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=B!==ee,this._pitching=le!==U,this._padding=!E.isPaddingEqual(oe),this._prepareEase(h,!1),this._ease(function(wr){var _r=wr*Tr,Cn=1/jr(_r);E.zoom=wr===1?$:T+E.scaleZoom(Cn),y._rotating&&(E.bearing=a.number(B,ee,wr)),y._pitching&&(E.pitch=a.number(U,le,wr)),y._padding&&(E.interpolatePadding(J,oe,wr),de=E.centerPoint.add(ie));var sn=wr===1?Ae:E.unproject(Ue.add(Fe.mult(zr(_r))).mult(Cn));E.setLocationAtPoint(E.renderWorldCopies?sn.wrap():sn,de),y._fireMoveEvents(h)},function(){return y._afterEase(h)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,h)}if(!o){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(o,h,y){y.animate===!1||y.duration===0?(o(1),h()):(this._easeStart=a.browser.now(),this._easeOptions=y,this._onEaseFrame=o,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,h){o=a.wrap(o,-180,180);var y=Math.abs(o-h);return Math.abs(o-360-h)<y&&(o-=360),Math.abs(o+360-h)<y&&(o+=360),o},s.prototype._normalizeCenter=function(o){var h=this.transform;if(h.renderWorldCopies&&!h.lngRange){var y=o.lng-h.center.lng;o.lng+=y>180?-360:y<-180?360:0}},s}(a.Evented),na=function(n){n===void 0&&(n={}),this.options=n,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};na.prototype.getDefaultPosition=function(){return"bottom-right"},na.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},na.prototype.onRemove=function(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},na.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},na.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},na.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(h,y,w){return y.value&&(h+=y.key+"="+y.value+(w<s.length-1?"&":"")),h},"?");n.href=a.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},na.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},na.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(T){return typeof T!="string"?"":T})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var h in o){var y=o[h];if(y.used){var w=y.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(T,B){return T.length-B.length});var E=(n=n.filter(function(T,B){for(var U=B+1;U<n.length;U++)if(n[U].indexOf(T)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,n.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},na.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var uo=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};uo.prototype.onAdd=function(n){this._map=n,this._container=k.create("div","mapboxgl-ctrl");var s=k.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},uo.prototype.onRemove=function(){k.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},uo.prototype.getDefaultPosition=function(){return"bottom-left"},uo.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},uo.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},uo.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Xn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Xn.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},Xn.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,h=s?this._queue.concat(s):this._queue;o<h.length;o+=1){var y=h[o];if(y.id===n)return void(y.cancelled=!0)}},Xn.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,h=s;o<h.length;o+=1){var y=h[o];if(!y.cancelled&&(y.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Xn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var _o={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Zu=a.window.HTMLImageElement,Jl=a.window.HTMLElement,Si=a.window.ImageBitmap,Vn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Uc=function(n){function s(h){var y=this;if((h=a.extend({},Vn,h)).minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new ni(h.minZoom,h.maxZoom,h.minPitch,h.maxPitch,h.renderWorldCopies);if(n.call(this,w,h),this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._failIfMajorPerformanceCaveat=h.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=h.preserveDrawingBuffer,this._antialias=h.antialias,this._trackResize=h.trackResize,this._bearingSnap=h.bearingSnap,this._refreshExpiredTiles=h.refreshExpiredTiles,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=h.collectResourceTiming,this._renderTaskQueue=new Xn,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},_o,h.locale),this._clickTolerance=h.clickTolerance,this._requestManager=new a.RequestManager(h.transformRequest,h.accessToken),typeof h.container=="string"){if(this._container=a.window.document.getElementById(h.container),!this._container)throw new Error("Container '"+h.container+"' not found.")}else{if(!(h.container instanceof Jl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return y._update(!1)}),this.on("moveend",function(){return y._update(!1)}),this.on("zoom",function(){return y._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Zt(this,h),this._hash=h.hash&&new Ra(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,a.extend({},h.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=h.localIdeographFontFamily,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new na({customAttribution:h.customAttribution})),this.addControl(new uo,h.logoPosition),this.on("style.load",function(){y.transform.unmodified&&y.jumpTo(y.style.stylesheet)}),this.on("data",function(E){y._update(E.dataType==="style"),y.fire(new a.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){y.fire(new a.Event(E.dataType+"dataloading",E))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(h,y){if(y===void 0&&(y=h.getDefaultPosition?h.getDefaultPosition():"top-right"),!h||!h.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=h.onAdd(this);this._controls.push(h);var E=this._controlPositions[y];return y.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},s.prototype.removeControl=function(h){if(!h||!h.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var y=this._controls.indexOf(h);return y>-1&&this._controls.splice(y,1),h.onRemove(this),this},s.prototype.hasControl=function(h){return this._controls.indexOf(h)>-1},s.prototype.resize=function(h){var y=this._containerDimensions(),w=y[0],E=y[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var T=!this._moving;return T&&this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h)),this.fire(new a.Event("resize",h)),T&&this.fire(new a.Event("moveend",h)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(h){return this.transform.setMaxBounds(a.LngLatBounds.convert(h)),this._update()},s.prototype.setMinZoom=function(h){if((h=h==null?-2:h)>=-2&&h<=this.transform.maxZoom)return this.transform.minZoom=h,this._update(),this.getZoom()<h&&this.setZoom(h),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(h){if((h=h==null?22:h)>=this.transform.minZoom)return this.transform.maxZoom=h,this._update(),this.getZoom()>h&&this.setZoom(h),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(h){if((h=h==null?0:h)<0)throw new Error("minPitch must be greater than or equal to 0");if(h>=0&&h<=this.transform.maxPitch)return this.transform.minPitch=h,this._update(),this.getPitch()<h&&this.setPitch(h),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(h){if((h=h==null?60:h)>60)throw new Error("maxPitch must be less than or equal to 60");if(h>=this.transform.minPitch)return this.transform.maxPitch=h,this._update(),this.getPitch()>h&&this.setPitch(h),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(h){return this.transform.renderWorldCopies=h,this._update()},s.prototype.project=function(h){return this.transform.locationPoint(a.LngLat.convert(h))},s.prototype.unproject=function(h){return this.transform.pointLocation(a.Point.convert(h))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(h,y,w){var E,T=this;if(h==="mouseenter"||h==="mouseover"){var B=!1;return{layer:y,listener:w,delegates:{mousemove:function(J){var $=T.getLayer(y)?T.queryRenderedFeatures(J.point,{layers:[y]}):[];$.length?B||(B=!0,w.call(T,new kn(h,T,J.originalEvent,{features:$}))):B=!1},mouseout:function(){B=!1}}}}if(h==="mouseleave"||h==="mouseout"){var U=!1;return{layer:y,listener:w,delegates:{mousemove:function(J){(T.getLayer(y)?T.queryRenderedFeatures(J.point,{layers:[y]}):[]).length?U=!0:U&&(U=!1,w.call(T,new kn(h,T,J.originalEvent)))},mouseout:function(J){U&&(U=!1,w.call(T,new kn(h,T,J.originalEvent)))}}}}return{layer:y,listener:w,delegates:(E={},E[h]=function(J){var $=T.getLayer(y)?T.queryRenderedFeatures(J.point,{layers:[y]}):[];$.length&&(J.features=$,w.call(T,J),delete J.features)},E)}},s.prototype.on=function(h,y,w){if(w===void 0)return n.prototype.on.call(this,h,y);var E=this._createDelegatedListener(h,y,w);for(var T in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[h]=this._delegatedListeners[h]||[],this._delegatedListeners[h].push(E),E.delegates)this.on(T,E.delegates[T]);return this},s.prototype.once=function(h,y,w){if(w===void 0)return n.prototype.once.call(this,h,y);var E=this._createDelegatedListener(h,y,w);for(var T in E.delegates)this.once(T,E.delegates[T]);return this},s.prototype.off=function(h,y,w){var E=this;return w===void 0?n.prototype.off.call(this,h,y):(this._delegatedListeners&&this._delegatedListeners[h]&&function(T){for(var B=T[h],U=0;U<B.length;U++){var J=B[U];if(J.layer===y&&J.listener===w){for(var $ in J.delegates)E.off($,J.delegates[$]);return B.splice(U,1),E}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(h,y){if(!this.style)return[];var w;if(y!==void 0||h===void 0||h instanceof a.Point||Array.isArray(h)||(y=h,h=void 0),y=y||{},(h=h||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof h[0]=="number")w=[a.Point.convert(h)];else{var E=a.Point.convert(h[0]),T=a.Point.convert(h[1]);w=[E,new a.Point(T.x,E.y),T,new a.Point(E.x,T.y),E]}return this.style.queryRenderedFeatures(w,y,this.transform)},s.prototype.querySourceFeatures=function(h,y){return this.style.querySourceFeatures(h,y)},s.prototype.setStyle=function(h,y){return(y=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},y)).diff!==!1&&y.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&h?(this._diffStyle(h,y),this):(this._localIdeographFontFamily=y.localIdeographFontFamily,this._updateStyle(h,y))},s.prototype._getUIString=function(h){var y=this._locale[h];if(y==null)throw new Error("Missing UI string '"+h+"'");return y},s.prototype._updateStyle=function(h,y){return this.style&&(this.style.setEventedParent(null),this.style._remove()),h?(this.style=new fn(this,y||{}),this.style.setEventedParent(this,{style:this.style}),typeof h=="string"?this.style.loadURL(h):this.style.loadJSON(h),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new fn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(h,y){var w=this;if(typeof h=="string"){var E=this._requestManager.normalizeStyleURL(h),T=this._requestManager.transformRequest(E,a.ResourceType.Style);a.getJSON(T,function(B,U){B?w.fire(new a.ErrorEvent(B)):U&&w._updateDiff(U,y)})}else typeof h=="object"&&this._updateDiff(h,y)},s.prototype._updateDiff=function(h,y){try{this.style.setState(h)&&this._update(!0)}catch(w){a.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(h,y)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(h,y){return this._lazyInitEmptyStyle(),this.style.addSource(h,y),this._update(!0)},s.prototype.isSourceLoaded=function(h){var y=this.style&&this.style.sourceCaches[h];if(y!==void 0)return y.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+h+"'")))},s.prototype.areTilesLoaded=function(){var h=this.style&&this.style.sourceCaches;for(var y in h){var w=h[y]._tiles;for(var E in w){var T=w[E];if(T.state!=="loaded"&&T.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(h,y,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(h,y,w)},s.prototype.removeSource=function(h){return this.style.removeSource(h),this._update(!0)},s.prototype.getSource=function(h){return this.style.getSource(h)},s.prototype.addImage=function(h,y,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var T=w.sdf;T===void 0&&(T=!1);var B=w.stretchX,U=w.stretchY,J=w.content;if(this._lazyInitEmptyStyle(),y instanceof Zu||Si&&y instanceof Si){var $=a.browser.getImageData(y);this.style.addImage(h,{data:new a.RGBAImage({width:$.width,height:$.height},$.data),pixelRatio:E,stretchX:B,stretchY:U,content:J,sdf:T,version:0})}else{if(y.width===void 0||y.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ee=y;this.style.addImage(h,{data:new a.RGBAImage({width:y.width,height:y.height},new Uint8Array(y.data)),pixelRatio:E,stretchX:B,stretchY:U,content:J,sdf:T,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,h)}},s.prototype.updateImage=function(h,y){var w=this.style.getImage(h);if(!w)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=y instanceof Zu||Si&&y instanceof Si?a.browser.getImageData(y):y,T=E.width,B=E.height,U=E.data;return T===void 0||B===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):T!==w.data.width||B!==w.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(U,!(y instanceof Zu||Si&&y instanceof Si)),void this.style.updateImage(h,w))},s.prototype.hasImage=function(h){return h?!!this.style.getImage(h):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(h){this.style.removeImage(h)},s.prototype.loadImage=function(h,y){a.getImage(this._requestManager.transformRequest(h,a.ResourceType.Image),y)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(h,y){return this._lazyInitEmptyStyle(),this.style.addLayer(h,y),this._update(!0)},s.prototype.moveLayer=function(h,y){return this.style.moveLayer(h,y),this._update(!0)},s.prototype.removeLayer=function(h){return this.style.removeLayer(h),this._update(!0)},s.prototype.getLayer=function(h){return this.style.getLayer(h)},s.prototype.setLayerZoomRange=function(h,y,w){return this.style.setLayerZoomRange(h,y,w),this._update(!0)},s.prototype.setFilter=function(h,y,w){return w===void 0&&(w={}),this.style.setFilter(h,y,w),this._update(!0)},s.prototype.getFilter=function(h){return this.style.getFilter(h)},s.prototype.setPaintProperty=function(h,y,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(h,y,w,E),this._update(!0)},s.prototype.getPaintProperty=function(h,y){return this.style.getPaintProperty(h,y)},s.prototype.setLayoutProperty=function(h,y,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(h,y,w,E),this._update(!0)},s.prototype.getLayoutProperty=function(h,y){return this.style.getLayoutProperty(h,y)},s.prototype.setLight=function(h,y){return y===void 0&&(y={}),this._lazyInitEmptyStyle(),this.style.setLight(h,y),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(h,y){return this.style.setFeatureState(h,y),this._update()},s.prototype.removeFeatureState=function(h,y){return this.style.removeFeatureState(h,y),this._update()},s.prototype.getFeatureState=function(h){return this.style.getFeatureState(h)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var h=0,y=0;return this._container&&(h=this._container.clientWidth||400,y=this._container.clientHeight||300),[h,y]},s.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var h=this._container;h.classList.add("mapboxgl-map"),(this._missingCSSCanary=k.create("div","mapboxgl-canary",h)).style.visibility="hidden",this._detectMissingCSS();var y=this._canvasContainer=k.create("div","mapboxgl-canvas-container",h);this._interactive&&y.classList.add("mapboxgl-interactive"),this._canvas=k.create("canvas","mapboxgl-canvas",y),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=k.create("div","mapboxgl-control-container",h),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(B){T[B]=k.create("div","mapboxgl-ctrl-"+B,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(h,y){var w=a.browser.devicePixelRatio||1;this._canvas.width=w*h,this._canvas.height=w*y,this._canvas.style.width=h+"px",this._canvas.style.height=y+"px"},s.prototype._setupPainter=function(){var h=a.extend({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),y=this._canvas.getContext("webgl",h)||this._canvas.getContext("experimental-webgl",h);y?(this.painter=new Qi(y,this.transform),a.webpSupported.testSupport(y)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(h){h.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:h}))},s.prototype._contextRestored=function(h){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:h}))},s.prototype._onMapScroll=function(h){if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(h){return this.style?(this._styleDirty=this._styleDirty||h,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(h){return this._update(),this._renderTaskQueue.add(h)},s.prototype._cancelRenderFrame=function(h){this._renderTaskQueue.remove(h)},s.prototype._render=function(h){var y,w=this,E=0,T=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(y=T.createQueryEXT(),T.beginQueryEXT(T.TIME_ELAPSED_EXT,y),E=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(h),!this._removed){var B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var U=this.transform.zoom,J=a.browser.now();this.style.zoomHistory.update(U,J);var $=new a.EvaluationParameters(U,{now:J,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ee=$.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(B=!0,this._crossFadingFactor=ee),this.style.update($)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var le=a.browser.now()-E;T.endQueryEXT(T.TIME_ELAPSED_EXT,y),setTimeout(function(){var ie=T.getQueryObjectEXT(y,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(y),w.fire(new a.Event("gpu-timing-frame",{cpuTime:le,gpuTime:ie}))},50)}if(this.listens("gpu-timing-layer")){var oe=this.painter.collectGpuTimers();setTimeout(function(){var ie=w.painter.queryGpuTimers(oe);w.fire(new a.Event("gpu-timing-layer",{layerTimes:ie}))},50)}var me=this._sourcesDirty||this._styleDirty||this._placementDirty;return me||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||me||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var h=0,y=this._controls;h<y.length;h+=1)y[h].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),gs(this._canvasContainer),gs(this._controlContainer),gs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},s.prototype.triggerRepaint=function(){var h=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(y){h._frame=null,h._render(y)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(h){this._trackResize&&this.resize({originalEvent:h})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(h){this._showTileBoundaries!==h&&(this._showTileBoundaries=h,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(h){this._showPadding!==h&&(this._showPadding=h,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(h){this._showCollisionBoxes!==h&&(this._showCollisionBoxes=h,h?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(h){this._showOverdrawInspector!==h&&(this._showOverdrawInspector=h,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(h){this._repaint!==h&&(this._repaint=h,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(h){this._vertices=h,this._update()},s.prototype._setCacheLimits=function(h,y){a.setCacheLimits(h,y)},o.version.get=function(){return a.version},Object.defineProperties(s.prototype,o),s}(Wl);function gs(n){n.parentNode&&n.parentNode.removeChild(n)}var Gu={showCompass:!0,showZoom:!0,visualizePitch:!1},zo=function(n){var s=this;this.options=a.extend({},Gu,n),this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),k.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),k.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=k.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};zo.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},zo.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},zo.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Aa(this._map,this._compass,this.options.visualizePitch)),this._container},zo.prototype.onRemove=function(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},zo.prototype._createButton=function(n,s){var o=k.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},zo.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var Aa=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Kl({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new Uu({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(s,"mousedown",this.mousedown),k.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(s,"touchmove",this.touchmove),k.addEventListener(s,"touchend",this.touchend),k.addEventListener(s,"touchcancel",this.reset)};function Us(n,s,o){if(n=new a.LngLat(n.lng,n.lat),s){var h=new a.LngLat(n.lng-360,n.lat),y=new a.LngLat(n.lng+360,n.lat),w=o.locationPoint(n).distSqr(s);o.locationPoint(h).distSqr(s)<w?n=h:o.locationPoint(y).distSqr(s)<w&&(n=y)}for(;Math.abs(n.lng-o.center.lng)>180;){var E=o.locationPoint(n);if(E.x>=0&&E.y>=0&&E.x<=o.width&&E.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}Aa.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),k.disableDrag()},Aa.prototype.move=function(n,s){var o=this.map,h=this.mouseRotate.mousemoveWindow(n,s);if(h&&h.bearingDelta&&o.setBearing(o.getBearing()+h.bearingDelta),this.mousePitch){var y=this.mousePitch.mousemoveWindow(n,s);y&&y.pitchDelta&&o.setPitch(o.getPitch()+y.pitchDelta)}},Aa.prototype.off=function(){var n=this.element;k.removeEventListener(n,"mousedown",this.mousedown),k.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(n,"touchmove",this.touchmove),k.removeEventListener(n,"touchend",this.touchend),k.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},Aa.prototype.offTemp=function(){k.enableDrag(),k.removeEventListener(a.window,"mousemove",this.mousemove),k.removeEventListener(a.window,"mouseup",this.mouseup)},Aa.prototype.mousedown=function(n){this.down(a.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),k.mousePos(this.element,n)),k.addEventListener(a.window,"mousemove",this.mousemove),k.addEventListener(a.window,"mouseup",this.mouseup)},Aa.prototype.mousemove=function(n){this.move(n,k.mousePos(this.element,n))},Aa.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},Aa.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},Aa.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},Aa.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Aa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var vo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yl(n,s,o){var h=n.classList;for(var y in vo)h.remove("mapboxgl-"+o+"-anchor-"+y);h.add("mapboxgl-"+o+"-anchor-"+s)}var js,xl=function(n){function s(o,h){if(n.call(this),(o instanceof a.window.HTMLElement||h)&&(o=a.extend({element:o},h)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=a.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");var y=k.createNS("http://www.w3.org/2000/svg","svg");y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height","41px"),y.setAttributeNS(null,"width","27px"),y.setAttributeNS(null,"viewBox","0 0 27 41");var w=k.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=k.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var T=k.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");for(var B=0,U=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];B<U.length;B+=1){var J=U[B],$=k.createNS("http://www.w3.org/2000/svg","ellipse");$.setAttributeNS(null,"opacity","0.04"),$.setAttributeNS(null,"cx","10.5"),$.setAttributeNS(null,"cy","5.80029008"),$.setAttributeNS(null,"rx",J.rx),$.setAttributeNS(null,"ry",J.ry),T.appendChild($)}var ee=k.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"fill",this._color);var le=k.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ee.appendChild(le);var oe=k.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"opacity","0.25"),oe.setAttributeNS(null,"fill","#000000");var me=k.createNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),oe.appendChild(me);var ie=k.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");var de=k.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(8.0, 8.0)");var be=k.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");var Ae=k.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),de.appendChild(be),de.appendChild(Ae),E.appendChild(T),E.appendChild(ee),E.appendChild(oe),E.appendChild(ie),E.appendChild(de),y.appendChild(E),y.setAttributeNS(null,"height",41*this._scale+"px"),y.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(y),this._offset=a.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ue){Ue.preventDefault()}),this._element.addEventListener("mousedown",function(Ue){Ue.preventDefault()}),Yl(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var h=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(24.6+h)],"bottom-right":[-h,-1*(24.6+h)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var h=o.code,y=o.charCode||o.keyCode;h!=="Space"&&h!=="Enter"&&y!==32&&y!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var h=o.originalEvent.target,y=this._element;this._popup&&(h===y||y.contains(h))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Us(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(h="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,vo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+y+" "+h)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=a.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var h=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(a.Evented),Ku={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},qs=0,_s=!1,Hu=function(n){function s(o){n.call(this),this.options=a.extend({},Ku,o),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var h;return this._map=o,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),h=this._setupUI,js!==void 0?h(js):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(y){h(js=y.state!=="denied")}):h(js=!!a.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,qs=0,_s=!1},s.prototype._isOutOfMapMaxBounds=function(o){var h=this._map.getMaxBounds(),y=o.coords;return h&&(y.longitude<h.getWest()||y.longitude>h.getEast()||y.latitude<h.getSouth()||y.latitude>h.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var h=new a.LngLat(o.coords.longitude,o.coords.latitude),y=o.coords.accuracy,w=this._map.getBearing(),E=a.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(h.toBounds(y),E,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var h=new a.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,h=this._map.unproject([0,o]),y=this._map.unproject([1,o]),w=h.distanceTo(y),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&_s)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var h=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=k.create("button","mapboxgl-ctrl-geolocate",this._container),k.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new xl(this._dotElement),this._circleElement=k.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new xl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||h._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(h._watchState="BACKGROUND",h._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),h._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),h.fire(new a.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qs--,_s=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++qs>1?(o={maximumAge:6e5,timeout:0},_s=!0):(o=this.options.positionOptions,_s=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(a.Evented),Go={maxWidth:100,unit:"metric"},Ko=function(n){this.options=a.extend({},Go,n),a.bindAll(["_onMove","setUnit"],this)};function Ql(n,s,o){var h=o&&o.maxWidth||100,y=n._container.clientHeight/2,w=n.unproject([0,y]),E=n.unproject([h,y]),T=w.distanceTo(E);if(o&&o.unit==="imperial"){var B=3.2808*T;B>5280?Ho(s,h,B/5280,n._getUIString("ScaleControl.Miles")):Ho(s,h,B,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Ho(s,h,T/1852,n._getUIString("ScaleControl.NauticalMiles")):T>=1e3?Ho(s,h,T/1e3,n._getUIString("ScaleControl.Kilometers")):Ho(s,h,T,n._getUIString("ScaleControl.Meters"))}function Ho(n,s,o,h){var y,w,E,T=(y=o,(w=Math.pow(10,(""+Math.floor(y)).length-1))*(E=(E=y/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(B){var U=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*U)/U}(E)));n.style.width=s*(T/o)+"px",n.innerHTML=T+"&nbsp;"+h}Ko.prototype.getDefaultPosition=function(){return"bottom-left"},Ko.prototype._onMove=function(){Ql(this._map,this._container,this.options)},Ko.prototype.onAdd=function(n){return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ko.prototype.onRemove=function(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ko.prototype.setUnit=function(n){this.options.unit=n,Ql(this._map,this._container,this.options)};var Wa=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof a.window.HTMLElement?this._container=n.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Wa.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Wa.prototype.onRemove=function(){k.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Wa.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Wa.prototype._setupUI=function(){var n=this._fullscreenButton=k.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Wa.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},Wa.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Wa.prototype._isFullscreen=function(){return this._fullscreen},Wa.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Wa.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Xu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},wl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Wu=function(n){function s(o){n.call(this),this.options=a.extend(Object.create(Xu),o),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(a.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var h,y=a.window.document.createDocumentFragment(),w=a.window.document.createElement("body");for(w.innerHTML=o;h=w.firstChild;)y.appendChild(h);return this.setDOMContent(y)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=k.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var h=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=k.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function($){return h._container.classList.add($)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Us(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var y=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),w=this.options.anchor,E=function $(ee){if(ee){if(typeof ee=="number"){var le=Math.round(Math.sqrt(.5*Math.pow(ee,2)));return{center:new a.Point(0,0),top:new a.Point(0,ee),"top-left":new a.Point(le,le),"top-right":new a.Point(-le,le),bottom:new a.Point(0,-ee),"bottom-left":new a.Point(le,-le),"bottom-right":new a.Point(-le,-le),left:new a.Point(ee,0),right:new a.Point(-ee,0)}}if(ee instanceof a.Point||Array.isArray(ee)){var oe=a.Point.convert(ee);return{center:oe,top:oe,"top-left":oe,"top-right":oe,bottom:oe,"bottom-left":oe,"bottom-right":oe,left:oe,right:oe}}return{center:a.Point.convert(ee.center||[0,0]),top:a.Point.convert(ee.top||[0,0]),"top-left":a.Point.convert(ee["top-left"]||[0,0]),"top-right":a.Point.convert(ee["top-right"]||[0,0]),bottom:a.Point.convert(ee.bottom||[0,0]),"bottom-left":a.Point.convert(ee["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(ee["bottom-right"]||[0,0]),left:a.Point.convert(ee.left||[0,0]),right:a.Point.convert(ee.right||[0,0])}}return $(new a.Point(0,0))}(this.options.offset);if(!w){var T,B=this._container.offsetWidth,U=this._container.offsetHeight;T=y.y+E.bottom.y<U?["top"]:y.y>this._map.transform.height-U?["bottom"]:[],y.x<B/2?T.push("left"):y.x>this._map.transform.width-B/2&&T.push("right"),w=T.length===0?"bottom":T.join("-")}var J=y.add(E[w]).round();k.setTransform(this._container,vo[w]+" translate("+J.x+"px,"+J.y+"px)"),Yl(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(wl);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(a.Evented),$l={version:a.version,supported:I,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Uc,NavigationControl:zo,GeolocateControl:Hu,AttributionControl:na,ScaleControl:Ko,FullscreenControl:Wa,Popup:Wu,Marker:xl,Style:fn,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){Le().acquire(ze)},clearPrewarmedResources:function(){var n=St;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(ze),St=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(n){a.config.ACCESS_TOKEN=n},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(n){a.config.API_URL=n},get workerCount(){return He.workerCount},set workerCount(n){He.workerCount=n},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){a.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){a.clearTileCache(n)},workerUrl:""};return $l}),_})})(kc);const t0=kc.exports;function xm(l){let c;const f=l[15].default,m=Pu(f,l,l[14],null);return{c(){m&&m.c()},l(_){m&&m.l(_)},m(_,v){m&&m.m(_,v),c=!0},p(_,v){m&&m.p&&(!c||v&16384)&&Cu(m,f,_,_[14],c?Du(f,_[14],v,null):Mu(_[14]),null)},i(_){c||(rt(m,_),c=!0)},o(_){wt(m,_),c=!1},d(_){m&&m.d(_)}}}function r0(l){let c,f,m,_=l[0]&&xm(l);return{c(){c=X("div"),_&&_.c(),this.h()},l(v){c=W(v,"DIV",{class:!0,id:!0});var a=Q(c);_&&_.l(a),a.forEach(M),this.h()},h(){L(c,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),L(c,"id",l[1]),zs(()=>l[16].call(c))},m(v,a){xe(v,c,a),_&&_.m(c,null),f=Ps(c,l[16].bind(c)),l[17](c),m=!0},p(v,[a]){v[0]?_?(_.p(v,a),a&1&&rt(_,1)):(_=xm(v),_.c(),rt(_,1),_.m(c,null)):_&&(Rn(),wt(_,1,1,()=>{_=null}),Bn()),(!m||a&2)&&L(c,"id",v[1])},i(v){m||(rt(_),m=!0)},o(v){wt(_),m=!1},d(v){v&&M(c),_&&_.d(),f(),l[17](null)}}}function i0(l,c,f){let{$$slots:m={},$$scope:_}=c,{map:v}=c,{id:a="map"}=c,{location:I={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=c,{style:k="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=c,{interactive:C=!0}=c,{minzoom:z=0}=c,{maxzoom:O=14}=c,{zoom:D=null}=c,{scrollzoom:q=!0}=c,{geolocate:se=!0}=c,{zoomcontrol:Te=!0}=c,{options:_e={}}=c,ke,Ce;ey("map",{getMap:()=>v}),I.bounds?_e={..._e,bounds:I.bounds}:I.lon&&I.lat&&(_e={..._e,center:[I.lon,I.lat]},I.zoom&&(_e.zoom=I.zoom)),$m(()=>{const Ge=document.createElement("link");return Ge.rel="stylesheet",Ge.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",Ge.onload=()=>{f(0,v=new kc.exports.Map({container:ke,style:k,minZoom:z,maxZoom:O,interactive:C,..._e})),Te&&v.addControl(new kc.exports.NavigationControl({showCompass:!1})),q||v.scrollZoom.disable(),se&&v.addControl(new kc.exports.GeolocateControl),v.on("load",()=>{f(4,D=v.getZoom())}),v.on("zoom",()=>{f(4,D=v.getZoom())})},document.head.appendChild(Ge),()=>{v.remove(),Ge.parentNode.removeChild(Ge)}});function mt(){let Ge=document.getElementsByClassName("mapboxgl-canvas");Ge[0]&&(Ge[0].style.width="100%",v.resize())}function at(){Ce=this.clientWidth,f(2,Ce)}function Ye(Ge){Ts[Ge?"unshift":"push"](()=>{ke=Ge,f(3,ke)})}return l.$$set=Ge=>{"map"in Ge&&f(0,v=Ge.map),"id"in Ge&&f(1,a=Ge.id),"location"in Ge&&f(6,I=Ge.location),"style"in Ge&&f(7,k=Ge.style),"interactive"in Ge&&f(8,C=Ge.interactive),"minzoom"in Ge&&f(9,z=Ge.minzoom),"maxzoom"in Ge&&f(10,O=Ge.maxzoom),"zoom"in Ge&&f(4,D=Ge.zoom),"scrollzoom"in Ge&&f(11,q=Ge.scrollzoom),"geolocate"in Ge&&f(12,se=Ge.geolocate),"zoomcontrol"in Ge&&f(13,Te=Ge.zoomcontrol),"options"in Ge&&f(5,_e=Ge.options),"$$scope"in Ge&&f(14,_=Ge.$$scope)},l.$$.update=()=>{l.$$.dirty&4&&Ce&&mt()},[v,a,Ce,ke,D,_e,I,k,C,z,O,q,se,Te,_,m,at,Ye]}class n0 extends Na{constructor(c){super(),Va(this,c,i0,r0,Ua,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function wm(l){let c;const f=l[11].default,m=Pu(f,l,l[10],null);return{c(){m&&m.c()},l(_){m&&m.l(_)},m(_,v){m&&m.m(_,v),c=!0},p(_,v){m&&m.p&&(!c||v&1024)&&Cu(m,f,_,_[10],c?Du(f,_[10],v,null):Mu(_[10]),null)},i(_){c||(rt(m,_),c=!0)},o(_){wt(m,_),c=!1},d(_){m&&m.d(_)}}}function a0(l){let c,f,m=l[0]&&wm(l);return{c(){m&&m.c(),c=Xi()},l(_){m&&m.l(_),c=Xi()},m(_,v){m&&m.m(_,v),xe(_,c,v),f=!0},p(_,[v]){_[0]?m?(m.p(_,v),v&1&&rt(m,1)):(m=wm(_),m.c(),rt(m,1),m.m(c.parentNode,c)):m&&(Rn(),wt(m,1,1,()=>{m=null}),Bn())},i(_){f||(rt(m),f=!0)},o(_){wt(m),f=!1},d(_){m&&m.d(_),_&&M(c)}}}function o0(l,c,f){let{$$slots:m={},$$scope:_}=c,{id:v}=c,{type:a}=c,{url:I=null}=c,{props:k={}}=c,{data:C=null}=c,{layer:z=null}=c,{promoteId:O=null}=c,{minzoom:D=null}=c,{maxzoom:q=null}=c,se=!1;const{getMap:Te}=zc("map"),_e=Te();_e.getSource(v)&&_e.removeSource(v);function ke(){_e.isSourceLoaded(v)?(f(0,se=!0),console.log(v+" loaded!")):setTimeout(()=>{console.log("..."),ke()},500)}function Ce(){_e.isStyleLoaded(v)?(mt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),Ce()},500)}D&&(k.minzoom=D),q&&(k.maxzoom=q),z&&O?(k.promoteId={},k.promoteId[z]=O):O&&(k.promoteId=O);function mt(){console.log(v+" map source loading..."),a=="geojson"?C?(_e.addSource(v,{type:a,data:C,...k}),ke()):I&&(_e.addSource(v,{type:a,data:I,...k}),ke()):a=="vector"&&(_e.addSource(v,{type:a,tiles:[I],...k}),ke())}Ce();function at(){_e.getSource(v).setData(C)}return l.$$set=Ye=>{"id"in Ye&&f(2,v=Ye.id),"type"in Ye&&f(3,a=Ye.type),"url"in Ye&&f(4,I=Ye.url),"props"in Ye&&f(1,k=Ye.props),"data"in Ye&&f(5,C=Ye.data),"layer"in Ye&&f(6,z=Ye.layer),"promoteId"in Ye&&f(7,O=Ye.promoteId),"minzoom"in Ye&&f(8,D=Ye.minzoom),"maxzoom"in Ye&&f(9,q=Ye.maxzoom),"$$scope"in Ye&&f(10,_=Ye.$$scope)},l.$$.update=()=>{l.$$.dirty&33&&se&&C&&at()},[se,k,v,a,I,C,z,O,D,q,_,m]}class ky extends Na{constructor(c){super(),Va(this,c,o0,a0,Ua,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function s0(l,c,f){const{Popup:m}=t0,_=ty(),v=new m({closeButton:!1,closeOnClick:!1});let{id:a}=c,{source:I}=c,{sourceLayer:k=null}=c,{type:C}=c,{filter:z=null}=c,{layout:O={}}=c,{paint:D={}}=c,{data:q=null}=c,{code:se=null}=c,{name:Te="name"}=c,{colorCode:_e=null}=c,{click:ke=!1}=c,{ignoreClick:Ce=!1}=c,{clickCenter:mt=!1}=c,{selected:at=null}=c,{hover:Ye=!1}=c,{hovered:Ge=null}=c,{highlight:Xt=!1}=c,{highlightKey:yt="highlighted"}=c,{highlighted:pt=[]}=c,{order:lt=null}=c,{maxzoom:Ie=null}=c,{minzoom:it=null}=c,{isChild:nt=!1}=c;const{getMap:Qe}=zc("map"),De=Qe();let Ve=null,st=null,Ct=[];De.getLayer(a)&&De.removeLayer(a);let zt={id:a,type:C,source:I,paint:D,layout:O};z&&(zt.filter=z),k&&(zt["source-layer"]=k),Ie&&(zt.maxzoom=Ie),it&&(zt.minzoom=it),De.addLayer(zt,lt);function Ke(){console.log("updating colors..."),q.forEach(qe=>{De.setFeatureState({source:I,sourceLayer:k,id:qe[se]},{color:qe[_e]})})}return ke&&De.on("click",a,qe=>{if(qe.features.length>0&&!Ce){let lr=qe.features[0].id;if(nt&&pt.includes(lr)||!nt&&at!=lr){if(f(0,at=lr),_("select",{code:at}),Ve&&De.setFeatureState({source:I,sourceLayer:k,id:Ve},{selected:!1}),De.setFeatureState({source:I,sourceLayer:k,id:at},{selected:!0}),mt){let vr=centroid(qe.features[0].toJSON().geometry);De.flyTo({center:vr.geometry.coordinates})}f(24,Ve=at)}}}),Ye&&(De.on("mousemove",a,qe=>{if(qe.features.length>0){let lr=qe.features[0].id;Ge&&De.setFeatureState({source:I,sourceLayer:k,id:Ge},{hovered:!1}),nt&&pt.includes(lr)||!nt&&at!=lr?(f(1,Ge=f(25,st=lr)),De.setFeatureState({source:I,sourceLayer:k,id:Ge},{hovered:!0}),De.getCanvas().style.cursor="pointer",v.setLngLat(qe.lngLat).setHTML(`<strong>${qe.features[0].properties[Te]?qe.features[0].properties[Te]:qe.features[0].properties[se]}</strong>`).addTo(De)):v.remove()}}),De.on("mouseleave",a,qe=>{Ge&&De.setFeatureState({source:I,sourceLayer:k,id:Ge},{hovered:!1}),f(1,Ge=f(25,st=null)),De.getCanvas().style.cursor="",v.remove()})),l.$$set=qe=>{"id"in qe&&f(2,a=qe.id),"source"in qe&&f(3,I=qe.source),"sourceLayer"in qe&&f(4,k=qe.sourceLayer),"type"in qe&&f(5,C=qe.type),"filter"in qe&&f(6,z=qe.filter),"layout"in qe&&f(7,O=qe.layout),"paint"in qe&&f(8,D=qe.paint),"data"in qe&&f(9,q=qe.data),"code"in qe&&f(10,se=qe.code),"name"in qe&&f(11,Te=qe.name),"colorCode"in qe&&f(12,_e=qe.colorCode),"click"in qe&&f(13,ke=qe.click),"ignoreClick"in qe&&f(14,Ce=qe.ignoreClick),"clickCenter"in qe&&f(15,mt=qe.clickCenter),"selected"in qe&&f(0,at=qe.selected),"hover"in qe&&f(16,Ye=qe.hover),"hovered"in qe&&f(1,Ge=qe.hovered),"highlight"in qe&&f(17,Xt=qe.highlight),"highlightKey"in qe&&f(18,yt=qe.highlightKey),"highlighted"in qe&&f(19,pt=qe.highlighted),"order"in qe&&f(20,lt=qe.order),"maxzoom"in qe&&f(21,Ie=qe.maxzoom),"minzoom"in qe&&f(22,it=qe.minzoom),"isChild"in qe&&f(23,nt=qe.isChild)},l.$$.update=()=>{l.$$.dirty[0]&4096&&_e&&Ke(),l.$$.dirty[0]&68026392&&Xt&&pt!=Ct&&(Ct[0]&&Ct.forEach(qe=>{let lr={};lr[yt]=!1,De.setFeatureState({source:I,sourceLayer:k,id:qe},lr)}),f(26,Ct=pt),pt[0]&&pt.forEach(qe=>{let lr={};lr[yt]=!0,De.setFeatureState({source:I,sourceLayer:k,id:qe},lr)})),l.$$.dirty[0]&16777241&&at!=Ve&&(Ve&&De.setFeatureState({source:I,sourceLayer:k,id:Ve},{selected:!1}),at&&De.setFeatureState({source:I,sourceLayer:k,id:at},{selected:!0}),f(24,Ve=at)),l.$$.dirty[0]&33619994&&Ye&&Ge!=st&&(st&&De.setFeatureState({source:I,sourceLayer:k,id:st},{hovered:!1}),Ge&&De.setFeatureState({source:I,sourceLayer:k,id:Ge},{hovered:!0}),f(25,st=Ge))},[at,Ge,a,I,k,C,z,O,D,q,se,Te,_e,ke,Ce,mt,Ye,Xt,yt,pt,lt,Ie,it,nt,Ve,st,Ct]}class zu extends Na{constructor(c){super(),Va(this,c,s0,null,Ua,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function Em(l,c,f){const m=l.slice();return m[54]=c[f],m[56]=f,m}function Sm(l,c,f){const m=l.slice();return m[57]=c[f],m[56]=f,m}function km(l,c,f){const m=l.slice();return m[59]=c[f],m}function Im(l,c,f){const m=l.slice();return m[59]=c[f],m}function Tm(l,c,f){const m=l.slice();return m[57]=c[f],m[56]=f,m}function Am(l){let c,f,m,_,v,a,I=" &gt; ",k,C,z,O,D,q=l[1].name+"",se,Te,_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De,Ve,st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,Ut,At,Kt,It,Jt,vt,fr,yr,bt,gr,hr,dr,$e,Lt=" &#x24D8; ",Wt,Se,We,qt,Mt,tr,Dr,ri,Yt,Er=l[1].data.population.value[2021].all.toLocaleString()+"",Gr,Xr,ai,si,Cr,qr,Sr,ei,Yr,kt,kr=" &#x24D8; ",pi,Mr,rr,F,j,G,Y,te,ue,ge=l[1].data.households.value[2021].all_households.toLocaleString()+"",K,re,we,Ze,Je,ze,He,St,gt,Le,ft=l[1].name+"",ot,ht,$t,ut,mr,Kr,er,et,Nt,li,Ir,xr,Ar,pr,Ft,Wi,Gn,gi,Ji,pa,vn,_i,On,Ui,Ti,rn,ui,Sn,Yi,Ca,Ai,Fn,Ri,zi,cn,Bi,ji,ja,ho;function qa(Me,Rt){return Me[1].parents[0]?u0:l0}let io=qa(l),bn=io(l),hn=l[1].type!="ew"&&Pm(l);Qe=new e0({props:{options:l[0],group:"typestr",search:!0}}),Qe.$on("select",l[20]);function Za(Me,Rt){return Me[1].type=="ew"||Me[1].type=="ctry"?h0:c0}let ta=Za(l),pn=ta(l);function Ga(Me,Rt){return Me[1].data.population.value.change.all==0?_0:Me[1].data.population.value.change.all>0?g0:y0}let va=Ga(l),Nn=va(l),ki=l[1].type!="ew"&&Cm(l),fi=l[4]&&Dm(l),Ei=l[1].type!="ew"&l[16]&&Lm(l),ve=l[4]&&Rm(l);function xn(Me){l[30](Me)}let nn={location:{bounds:l[1].bounds},options:{fitBoundsOptions:{padding:20}},style:l_,$$slots:{default:[z0]},$$scope:{ctx:l}};l[6]!==void 0&&(nn.map=l[6]),ut=new n0({props:nn}),Ts.push(()=>a_(ut,"map",xn));let Hr=l[1].parents[0]&&Fm(l);function ra(Me,Rt){return Me[2].children[0]?C0:P0}let fn=ra(l),di=fn(l);function Ka(Me,Rt){return Me[14]==!0?D0:M0}let os=Ka(l),Ma=os(l);function Vl(Me,Rt){return Me[13]==!0?R0:L0}let Bo=Vl(l),fa=Bo(l);function Cs(Me,Rt){return Me[12]==!0?O0:B0}let Oo=Cs(l),ba=Oo(l);function rl(Me,Rt){return Me[11]==!0?N0:F0}let Ms=rl(l),Wn=Ms(l);function Fo(Me,Rt){return Me[9]==!0?U0:V0}let ss=Fo(l),Di=ss(l);function Ds(Me,Rt){return Me[10]==!0?q0:j0}let Da=Ds(l),Pn=Da(l),qi=l[14]&&Um(l),Zi=l[13]&&Hm(l),Oi=l[12]&&Xm(l),Gi=l[11]&&Wm(l),Ki=l[9]&&Jm(l),Fi=l[10]&&Ym(l);return{c(){c=X("div"),f=X("div"),m=X("span"),_=X("a"),v=pe("Home"),a=new ry(!1),k=Re(),bn.c(),C=Re(),z=X("br"),O=Re(),D=X("span"),se=pe(q),Te=Re(),_e=X("div"),ke=pe(`Click for:
		
					`),Ce=X("button"),mt=pe("No comparison"),at=Re(),hn&&hn.c(),Ye=Re(),Ge=X("button"),Xt=pe("Same area 2011"),yt=Re(),pt=X("div"),lt=X("div"),Ie=X("b"),it=pe("Search for your Local Government District:"),nt=Re(),Fr(Qe.$$.fragment),De=Re(),Ve=X("script"),st=pe(`// Share button
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button

						function copyToClipboard(text) {
							var inputc = document.body.appendChild(
								document.createElement("input")
							);
							inputc.value = window.location.href;
							inputc.select();
							document.execCommand("copy");
							inputc.parentNode.removeChild(inputc);
							alert("URL Copied.");
						}

						(function (win, doc) {
							const testButton = doc.createElement("button");
							testButton.setAttribute("type", "share");
							if (testButton.type != "share") {
								win.addEventListener("click", function (ev) {
									ev = ev || win.event;
									let target = ev.target;
									let button = target.closest(
										'button[type="share"]'
									);
									if (button) {
										const title = "Share URL";
										const url = win.location.href;
										if (navigator.share) {
											navigator.share({
												title: title,
												url: url,
											});
										} else {
											copyToClipboard();
										}
									}
								});
							}
						})(this, this.document);`),Ct=Re(),zt=X("div"),Ke=X("button"),qe=pe("Print / PDF"),lr=Re(),vr=X("button"),cr=pe("Menu"),Br=Re(),Bt=X("button"),xt=pe("Share"),Ut=Re(),At=X("div"),Kt=X("div"),It=X("h3"),Jt=pe("Overview"),vt=Re(),pn.c(),fr=Re(),Nn.c(),yr=Re(),bt=X("div"),gr=X("div"),hr=X("div"),dr=pe("Population "),$e=X("span"),Wt=Re(),Se=X("div"),We=X("div"),qt=pe(`Population is based on the number of usual residents. A
						usual resident is anyone who, on 21 March 2021 is in the
						UK, and staying in the UK for a period of 3 months or
						more; or has a permanent UK address and is outside the
						UK and is staying outside the UK for less than 12
						months. `),Mt=X("a"),tr=X("strong"),Dr=pe("Statistical bulletins"),ri=Re(),Yt=X("span"),Gr=pe(Er),Xr=X("br"),ai=Re(),ki&&ki.c(),si=Re(),fi&&fi.c(),Cr=Re(),qr=X("div"),Sr=X("div"),ei=X("div"),Yr=pe("Households"),kt=X("span"),pi=Re(),Mr=X("div"),rr=X("div"),F=pe(`A household is either one person living alone or a group
						of people living at the same address who share cooking
						facilities and share a living room, sitting room or
						dining area. `),j=X("a"),G=X("strong"),Y=pe("Statistical bulletins"),te=Re(),ue=X("span"),K=pe(ge),re=X("br"),we=Re(),Ei&&Ei.c(),Ze=Re(),ve&&ve.c(),Je=Re(),ze=X("div"),He=X("div"),St=X("h3"),gt=pe("Explore "),Le=X("span"),ot=pe(ft),ht=Re(),$t=X("div"),Fr(ut.$$.fragment),Kr=Re(),er=X("div"),et=X("span"),Hr&&Hr.c(),Nt=Re(),li=X("div"),Ir=X("span"),xr=X("ul"),di.c(),pr=Re(),Ft=X("div"),Wi=X("br"),Gn=Re(),gi=X("div"),Ji=pe("Select Census 2021 topics:"),pa=Re(),Ma.c(),vn=Re(),fa.c(),_i=Re(),ba.c(),On=Re(),Wn.c(),Ui=Re(),Di.c(),Ti=Re(),Pn.c(),rn=Re(),ui=X("br"),Sn=Re(),Yi=X("br"),Ca=Re(),qi&&qi.c(),Ai=Re(),Zi&&Zi.c(),Fn=Re(),Oi&&Oi.c(),Ri=Re(),Gi&&Gi.c(),zi=Re(),Ki&&Ki.c(),cn=Re(),Fi&&Fi.c(),Bi=Xi(),this.h()},l(Me){c=W(Me,"DIV",{class:!0});var Rt=Q(c);f=W(Rt,"DIV",{});var ii=Q(f);m=W(ii,"SPAN",{class:!0});var La=Q(m);_=W(La,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var ls=Q(_);v=fe(ls,"Home"),ls.forEach(M),a=iy(La,!1),k=Be(La),bn.l(La),C=Be(La),La.forEach(M),z=W(ii,"BR",{}),O=Be(ii),D=W(ii,"SPAN",{class:!0});var il=Q(D);se=fe(il,q),il.forEach(M),Te=Be(ii),_e=W(ii,"DIV",{class:!0,style:!0});var po=Q(_e);ke=fe(po,`Click for:
		
					`),Ce=W(po,"BUTTON",{class:!0});var nl=Q(Ce);mt=fe(nl,"No comparison"),nl.forEach(M),at=Be(po),hn&&hn.l(po),Ye=Be(po),Ge=W(po,"BUTTON",{class:!0});var al=Q(Ge);Xt=fe(al,"Same area 2011"),al.forEach(M),po.forEach(M),ii.forEach(M),yt=Be(Rt),pt=W(Rt,"DIV",{});var fo=Q(pt);lt=W(fo,"DIV",{style:!0,class:!0});var Jn=Q(lt);Ie=W(Jn,"B",{});var mo=Q(Ie);it=fe(mo,"Search for your Local Government District:"),mo.forEach(M),nt=Be(Jn),Nr(Qe.$$.fragment,Jn),De=Be(Jn),Ve=W(Jn,"SCRIPT",{});var ol=Q(Ve);st=fe(ol,`// Share button
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button

						function copyToClipboard(text) {
							var inputc = document.body.appendChild(
								document.createElement("input")
							);
							inputc.value = window.location.href;
							inputc.select();
							document.execCommand("copy");
							inputc.parentNode.removeChild(inputc);
							alert("URL Copied.");
						}

						(function (win, doc) {
							const testButton = doc.createElement("button");
							testButton.setAttribute("type", "share");
							if (testButton.type != "share") {
								win.addEventListener("click", function (ev) {
									ev = ev || win.event;
									let target = ev.target;
									let button = target.closest(
										'button[type="share"]'
									);
									if (button) {
										const title = "Share URL";
										const url = win.location.href;
										if (navigator.share) {
											navigator.share({
												title: title,
												url: url,
											});
										} else {
											copyToClipboard();
										}
									}
								});
							}
						})(this, this.document);`),ol.forEach(M),Ct=Be(Jn),zt=W(Jn,"DIV",{width:!0});var Eo=Q(zt);Ke=W(Eo,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var Ls=Q(Ke);qe=fe(Ls,"Print / PDF"),Ls.forEach(M),lr=Be(Eo),vr=W(Eo,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var yo=Q(vr);cr=fe(yo,"Menu"),yo.forEach(M),Br=Be(Eo),Bt=W(Eo,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var sl=Q(Bt);xt=fe(sl,"Share"),sl.forEach(M),Eo.forEach(M),Jn.forEach(M),fo.forEach(M),Rt.forEach(M),Ut=Be(Me),At=W(Me,"DIV",{id:!0,class:!0});var xa=Q(At);Kt=W(xa,"DIV",{class:!0,style:!0});var wa=Q(Kt);It=W(wa,"H3",{style:!0,class:!0});var ll=Q(It);Jt=fe(ll,"Overview"),ll.forEach(M),vt=Be(wa),pn.l(wa),fr=Be(wa),Nn.l(wa),wa.forEach(M),yr=Be(xa),bt=W(xa,"DIV",{class:!0});var Yn=Q(bt);gr=W(Yn,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Pi=Q(gr);hr=W(Pi,"DIV",{class:!0,style:!0});var No=Q(hr);dr=fe(No,"Population "),$e=W(No,"SPAN",{style:!0});var Ru=Q($e);Ru.forEach(M),No.forEach(M),Pi.forEach(M),Wt=Be(Yn),Se=W(Yn,"DIV",{class:!0,id:!0});var So=Q(Se);We=W(So,"DIV",{class:!0});var Rs=Q(We);qt=fe(Rs,`Population is based on the number of usual residents. A
						usual resident is anyone who, on 21 March 2021 is in the
						UK, and staying in the UK for a period of 3 months or
						more; or has a permanent UK address and is outside the
						UK and is staying outside the UK for less than 12
						months. `),Mt=W(Rs,"A",{href:!0,class:!0});var Ul=Q(Mt);tr=W(Ul,"STRONG",{});var ul=Q(tr);Dr=fe(ul,"Statistical bulletins"),ul.forEach(M),Ul.forEach(M),Rs.forEach(M),So.forEach(M),ri=Be(Yn),Yt=W(Yn,"SPAN",{class:!0,style:!0});var us=Q(Yt);Gr=fe(us,Er),us.forEach(M),Xr=W(Yn,"BR",{}),ai=Be(Yn),ki&&ki.l(Yn),si=Be(Yn),fi&&fi.l(Yn),Yn.forEach(M),Cr=Be(xa),qr=W(xa,"DIV",{class:!0});var Kn=Q(qr);Sr=W(Kn,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Vo=Q(Sr);ei=W(Vo,"DIV",{class:!0,style:!0});var Uo=Q(ei);Yr=fe(Uo,"Households"),kt=W(Uo,"SPAN",{style:!0});var cs=Q(kt);cs.forEach(M),Uo.forEach(M),Vo.forEach(M),pi=Be(Kn),Mr=W(Kn,"DIV",{class:!0,id:!0});var ko=Q(Mr);rr=W(ko,"DIV",{class:!0});var Bs=Q(rr);F=fe(Bs,`A household is either one person living alone or a group
						of people living at the same address who share cooking
						facilities and share a living room, sitting room or
						dining area. `),j=W(Bs,"A",{href:!0,class:!0});var Io=Q(j);G=W(Io,"STRONG",{});var Ea=Q(G);Y=fe(Ea,"Statistical bulletins"),Ea.forEach(M),Io.forEach(M),Bs.forEach(M),ko.forEach(M),te=Be(Kn),ue=W(Kn,"SPAN",{class:!0,style:!0});var cl=Q(ue);K=fe(cl,ge),cl.forEach(M),re=W(Kn,"BR",{}),we=Be(Kn),Ei&&Ei.l(Kn),Ze=Be(Kn),ve&&ve.l(Kn),Kn.forEach(M),xa.forEach(M),Je=Be(Me),ze=W(Me,"DIV",{class:!0});var no=Q(ze);He=W(no,"DIV",{style:!0});var hl=Q(He);St=W(hl,"H3",{class:!0});var ao=Q(St);gt=fe(ao,"Explore "),Le=W(ao,"SPAN",{style:!0});var jo=Q(Le);ot=fe(jo,ft),jo.forEach(M),ao.forEach(M),hl.forEach(M),ht=Be(no),$t=W(no,"DIV",{id:!0,style:!0,class:!0});var hs=Q($t);Nr(ut.$$.fragment,hs),hs.forEach(M),Kr=Be(no),er=W(no,"DIV",{});var Os=Q(er);et=W(Os,"SPAN",{});var ps=Q(et);Hr&&Hr.l(ps),ps.forEach(M),Os.forEach(M),Nt=Be(no),li=W(no,"DIV",{});var jl=Q(li);Ir=W(jl,"SPAN",{});var fs=Q(Ir);xr=W(fs,"UL",{style:!0});var Fs=Q(xr);di.l(Fs),Fs.forEach(M),fs.forEach(M),jl.forEach(M),no.forEach(M),pr=Be(Me),Ft=W(Me,"DIV",{class:!0,style:!0});var dn=Q(Ft);Wi=W(dn,"BR",{}),Gn=Be(dn),gi=W(dn,"DIV",{class:!0,style:!0});var pl=Q(gi);Ji=fe(pl,"Select Census 2021 topics:"),pl.forEach(M),pa=Be(dn),Ma.l(dn),vn=Be(dn),fa.l(dn),_i=Be(dn),ba.l(dn),On=Be(dn),Wn.l(dn),Ui=Be(dn),Di.l(dn),Ti=Be(dn),Pn.l(dn),rn=Be(dn),ui=W(dn,"BR",{}),Sn=Be(dn),Yi=W(dn,"BR",{}),dn.forEach(M),Ca=Be(Me),qi&&qi.l(Me),Ai=Be(Me),Zi&&Zi.l(Me),Fn=Be(Me),Oi&&Oi.l(Me),Ri=Be(Me),Gi&&Gi.l(Me),zi=Be(Me),Ki&&Ki.l(Me),cn=Be(Me),Fi&&Fi.l(Me),Bi=Xi(),this.h()},h(){L(_,"href",as+"/"),L(_,"sveltekit:noscroll",""),L(_,"class","svelte-1dy7mjs"),a.a=k,L(m,"class","text-small"),L(D,"class","text-big title svelte-1dy7mjs"),L(Ce,"class","btn svelte-1dy7mjs"),Jr(Ce,"btn-active",l[15]),L(Ge,"class","btn svelte-1dy7mjs"),Jr(Ge,"btn-active",l[4]&!l[15]&!l[16]),L(_e,"class","text-bold"),he(_e,"font-size","0.85em"),L(Ke,"class","btn svelte-1dy7mjs"),he(Ke,"width","33%"),L(Ke,"title","Click to print this page to pdf or printer"),L(Ke,"onclick","window.print();return false;"),L(vr,"class","btn svelte-1dy7mjs"),he(vr,"width","33%"),L(vr,"alt","Return to the landing page"),L(vr,"onclick","window.location.href='"+as+"';"),L(Bt,"class","btn svelte-1dy7mjs"),he(Bt,"width","30%"),L(Bt,"type","share"),L(Bt,"alt","Share this page"),L(zt,"width","100%"),he(lt,"width","350px"),he(lt,"padding-top","5px"),L(lt,"class","svelte-1dy7mjs"),Jr(lt,"float-right",l[5]>1),L(c,"class","grid mtl svelte-1dy7mjs"),he(It,"margin","0 0 10px 0"),he(It,"line-height","1.78"),L(It,"class","svelte-1dy7mjs"),L(Kt,"class","div-grey-box svelte-1dy7mjs"),he(Kt,"line-height","1.3"),he($e,"color","gray"),he($e,"font-size","14pt"),L(hr,"class","blocktitle"),he(hr,"margin","0"),he(hr,"width","100%"),L(gr,"class","row"),he(gr,"display","flex"),he(gr,"cursor","pointer"),L(gr,"data-bs-toggle","collapse"),L(gr,"data-bs-target","#pop-info"),L(gr,"aria-expanded","false"),L(gr,"aria-controls","pop-info"),L(Mt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(Mt,"class","svelte-1dy7mjs"),L(We,"class","card card-body svelte-1dy7mjs"),L(Se,"class","collapse svelte-1dy7mjs"),L(Se,"id","pop-info"),L(Yt,"class","text-big"),he(Yt,"font-size","2.8em"),L(bt,"class","div-grey-box svelte-1dy7mjs"),he(kt,"color","gray"),he(kt,"font-size","14pt"),L(ei,"class","blocktitle"),he(ei,"margin","0"),he(ei,"width","100%"),L(Sr,"class","row"),he(Sr,"display","flex"),he(Sr,"cursor","pointer"),L(Sr,"data-bs-toggle","collapse"),L(Sr,"data-bs-target","#households-info"),L(Sr,"aria-expanded","false"),L(Sr,"aria-controls","households-info"),L(j,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(j,"class","svelte-1dy7mjs"),L(rr,"class","card card-body svelte-1dy7mjs"),L(Mr,"class","collapse svelte-1dy7mjs"),L(Mr,"id","households-info"),L(ue,"class","text-big"),he(ue,"font-size","2.8em"),L(qr,"class","div-grey-box svelte-1dy7mjs"),L(At,"id","grid"),L(At,"class","grid mt svelte-1dy7mjs"),he(Le,"color","#93328E"),L(St,"class","svelte-1dy7mjs"),he(He,"grid-column","span "+l[5]),L($t,"id","map"),he($t,"padding-right","45px"),he($t,"grid-column","span "+(l[5]==2?2:l[5]&&l[5]>2?l[5]-1:1)),L($t,"class","svelte-1dy7mjs"),he(xr,"padding-left","0"),L(ze,"class","grid mt svelte-1dy7mjs"),zs(()=>l[31].call(ze)),L(gi,"class","text-bold"),he(gi,"font-size","1.2em"),L(Ft,"class","text-bold"),he(Ft,"font-size","0.85em")},m(Me,Rt){xe(Me,c,Rt),P(c,f),P(f,m),P(m,_),P(_,v),a.m(I,m),P(m,k),bn.m(m,null),P(m,C),P(f,z),P(f,O),P(f,D),P(D,se),P(f,Te),P(f,_e),P(_e,ke),P(_e,Ce),P(Ce,mt),P(_e,at),hn&&hn.m(_e,null),P(_e,Ye),P(_e,Ge),P(Ge,Xt),P(c,yt),P(c,pt),P(pt,lt),P(lt,Ie),P(Ie,it),P(lt,nt),Vr(Qe,lt,null),P(lt,De),P(lt,Ve),P(Ve,st),P(lt,Ct),P(lt,zt),P(zt,Ke),P(Ke,qe),P(zt,lr),P(zt,vr),P(vr,cr),P(zt,Br),P(zt,Bt),P(Bt,xt),xe(Me,Ut,Rt),xe(Me,At,Rt),P(At,Kt),P(Kt,It),P(It,Jt),P(Kt,vt),pn.m(Kt,null),P(Kt,fr),Nn.m(Kt,null),P(At,yr),P(At,bt),P(bt,gr),P(gr,hr),P(hr,dr),P(hr,$e),$e.innerHTML=Lt,P(bt,Wt),P(bt,Se),P(Se,We),P(We,qt),P(We,Mt),P(Mt,tr),P(tr,Dr),P(bt,ri),P(bt,Yt),P(Yt,Gr),P(bt,Xr),P(bt,ai),ki&&ki.m(bt,null),P(bt,si),fi&&fi.m(bt,null),P(At,Cr),P(At,qr),P(qr,Sr),P(Sr,ei),P(ei,Yr),P(ei,kt),kt.innerHTML=kr,P(qr,pi),P(qr,Mr),P(Mr,rr),P(rr,F),P(rr,j),P(j,G),P(G,Y),P(qr,te),P(qr,ue),P(ue,K),P(qr,re),P(qr,we),Ei&&Ei.m(qr,null),P(qr,Ze),ve&&ve.m(qr,null),xe(Me,Je,Rt),xe(Me,ze,Rt),P(ze,He),P(He,St),P(St,gt),P(St,Le),P(Le,ot),P(ze,ht),P(ze,$t),Vr(ut,$t,null),P(ze,Kr),P(ze,er),P(er,et),Hr&&Hr.m(et,null),P(ze,Nt),P(ze,li),P(li,Ir),P(Ir,xr),di.m(xr,null),Ar=Ps(ze,l[31].bind(ze)),xe(Me,pr,Rt),xe(Me,Ft,Rt),P(Ft,Wi),P(Ft,Gn),P(Ft,gi),P(gi,Ji),P(Ft,pa),Ma.m(Ft,null),P(Ft,vn),fa.m(Ft,null),P(Ft,_i),ba.m(Ft,null),P(Ft,On),Wn.m(Ft,null),P(Ft,Ui),Di.m(Ft,null),P(Ft,Ti),Pn.m(Ft,null),P(Ft,rn),P(Ft,ui),P(Ft,Sn),P(Ft,Yi),xe(Me,Ca,Rt),qi&&qi.m(Me,Rt),xe(Me,Ai,Rt),Zi&&Zi.m(Me,Rt),xe(Me,Fn,Rt),Oi&&Oi.m(Me,Rt),xe(Me,Ri,Rt),Gi&&Gi.m(Me,Rt),xe(Me,zi,Rt),Ki&&Ki.m(Me,Rt),xe(Me,cn,Rt),Fi&&Fi.m(Me,Rt),xe(Me,Bi,Rt),ji=!0,ja||(ho=[Li(Ce,"click",l[21]),Li(Ce,"click",l[22]),Li(Ce,"click",l[23]),Li(Ge,"click",l[27]),Li(Ge,"click",l[28]),Li(Ge,"click",l[29])],ja=!0)},p(Me,Rt){io===(io=qa(Me))&&bn?bn.p(Me,Rt):(bn.d(1),bn=io(Me),bn&&(bn.c(),bn.m(m,C))),(!ji||Rt[0]&2)&&q!==(q=Me[1].name+"")&&Ht(se,q),Rt[0]&32768&&Jr(Ce,"btn-active",Me[15]),Me[1].type!="ew"?hn?hn.p(Me,Rt):(hn=Pm(Me),hn.c(),hn.m(_e,Ye)):hn&&(hn.d(1),hn=null),Rt[0]&98320&&Jr(Ge,"btn-active",Me[4]&!Me[15]&!Me[16]);const ii={};Rt[0]&1&&(ii.options=Me[0]),Qe.$set(ii),Rt[0]&32&&Jr(lt,"float-right",Me[5]>1),ta===(ta=Za(Me))&&pn?pn.p(Me,Rt):(pn.d(1),pn=ta(Me),pn&&(pn.c(),pn.m(Kt,fr))),va===(va=Ga(Me))&&Nn?Nn.p(Me,Rt):(Nn.d(1),Nn=va(Me),Nn&&(Nn.c(),Nn.m(Kt,null))),(!ji||Rt[0]&2)&&Er!==(Er=Me[1].data.population.value[2021].all.toLocaleString()+"")&&Ht(Gr,Er),Me[1].type!="ew"?ki?(ki.p(Me,Rt),Rt[0]&2&&rt(ki,1)):(ki=Cm(Me),ki.c(),rt(ki,1),ki.m(bt,si)):ki&&(Rn(),wt(ki,1,1,()=>{ki=null}),Bn()),Me[4]?fi?(fi.p(Me,Rt),Rt[0]&16&&rt(fi,1)):(fi=Dm(Me),fi.c(),rt(fi,1),fi.m(bt,null)):fi&&(Rn(),wt(fi,1,1,()=>{fi=null}),Bn()),(!ji||Rt[0]&2)&&ge!==(ge=Me[1].data.households.value[2021].all_households.toLocaleString()+"")&&Ht(K,ge),Me[1].type!="ew"&Me[16]?Ei?(Ei.p(Me,Rt),Rt[0]&65538&&rt(Ei,1)):(Ei=Lm(Me),Ei.c(),rt(Ei,1),Ei.m(qr,Ze)):Ei&&(Rn(),wt(Ei,1,1,()=>{Ei=null}),Bn()),Me[4]?ve?(ve.p(Me,Rt),Rt[0]&16&&rt(ve,1)):(ve=Rm(Me),ve.c(),rt(ve,1),ve.m(qr,null)):ve&&(Rn(),wt(ve,1,1,()=>{ve=null}),Bn()),(!ji||Rt[0]&2)&&ft!==(ft=Me[1].name+"")&&Ht(ot,ft),(!ji||Rt[0]&32)&&he(He,"grid-column","span "+Me[5]);const La={};Rt[0]&2&&(La.location={bounds:Me[1].bounds}),Rt[0]&384|Rt[2]&8&&(La.$$scope={dirty:Rt,ctx:Me}),!mr&&Rt[0]&64&&(mr=!0,La.map=Me[6],o_(()=>mr=!1)),ut.$set(La),(!ji||Rt[0]&32)&&he($t,"grid-column","span "+(Me[5]==2?2:Me[5]&&Me[5]>2?Me[5]-1:1)),Me[1].parents[0]?Hr?Hr.p(Me,Rt):(Hr=Fm(Me),Hr.c(),Hr.m(et,null)):Hr&&(Hr.d(1),Hr=null),fn===(fn=ra(Me))&&di?di.p(Me,Rt):(di.d(1),di=fn(Me),di&&(di.c(),di.m(xr,null))),os===(os=Ka(Me))&&Ma?Ma.p(Me,Rt):(Ma.d(1),Ma=os(Me),Ma&&(Ma.c(),Ma.m(Ft,vn))),Bo===(Bo=Vl(Me))&&fa?fa.p(Me,Rt):(fa.d(1),fa=Bo(Me),fa&&(fa.c(),fa.m(Ft,_i))),Oo===(Oo=Cs(Me))&&ba?ba.p(Me,Rt):(ba.d(1),ba=Oo(Me),ba&&(ba.c(),ba.m(Ft,On))),Ms===(Ms=rl(Me))&&Wn?Wn.p(Me,Rt):(Wn.d(1),Wn=Ms(Me),Wn&&(Wn.c(),Wn.m(Ft,Ui))),ss===(ss=Fo(Me))&&Di?Di.p(Me,Rt):(Di.d(1),Di=ss(Me),Di&&(Di.c(),Di.m(Ft,Ti))),Da===(Da=Ds(Me))&&Pn?Pn.p(Me,Rt):(Pn.d(1),Pn=Da(Me),Pn&&(Pn.c(),Pn.m(Ft,rn))),Me[14]?qi?(qi.p(Me,Rt),Rt[0]&16384&&rt(qi,1)):(qi=Um(Me),qi.c(),rt(qi,1),qi.m(Ai.parentNode,Ai)):qi&&(Rn(),wt(qi,1,1,()=>{qi=null}),Bn()),Me[13]?Zi?(Zi.p(Me,Rt),Rt[0]&8192&&rt(Zi,1)):(Zi=Hm(Me),Zi.c(),rt(Zi,1),Zi.m(Fn.parentNode,Fn)):Zi&&(Rn(),wt(Zi,1,1,()=>{Zi=null}),Bn()),Me[12]?Oi?(Oi.p(Me,Rt),Rt[0]&4096&&rt(Oi,1)):(Oi=Xm(Me),Oi.c(),rt(Oi,1),Oi.m(Ri.parentNode,Ri)):Oi&&(Rn(),wt(Oi,1,1,()=>{Oi=null}),Bn()),Me[11]?Gi?(Gi.p(Me,Rt),Rt[0]&2048&&rt(Gi,1)):(Gi=Wm(Me),Gi.c(),rt(Gi,1),Gi.m(zi.parentNode,zi)):Gi&&(Rn(),wt(Gi,1,1,()=>{Gi=null}),Bn()),Me[9]?Ki?(Ki.p(Me,Rt),Rt[0]&512&&rt(Ki,1)):(Ki=Jm(Me),Ki.c(),rt(Ki,1),Ki.m(cn.parentNode,cn)):Ki&&(Rn(),wt(Ki,1,1,()=>{Ki=null}),Bn()),Me[10]?Fi?(Fi.p(Me,Rt),Rt[0]&1024&&rt(Fi,1)):(Fi=Ym(Me),Fi.c(),rt(Fi,1),Fi.m(Bi.parentNode,Bi)):Fi&&(Rn(),wt(Fi,1,1,()=>{Fi=null}),Bn())},i(Me){ji||(rt(Qe.$$.fragment,Me),rt(ki),rt(fi),rt(Ei),rt(ve),rt(ut.$$.fragment,Me),rt(qi),rt(Zi),rt(Oi),rt(Gi),rt(Ki),rt(Fi),ji=!0)},o(Me){wt(Qe.$$.fragment,Me),wt(ki),wt(fi),wt(Ei),wt(ve),wt(ut.$$.fragment,Me),wt(qi),wt(Zi),wt(Oi),wt(Gi),wt(Ki),wt(Fi),ji=!1},d(Me){Me&&M(c),bn.d(),hn&&hn.d(),Ur(Qe),Me&&M(Ut),Me&&M(At),pn.d(),Nn.d(),ki&&ki.d(),fi&&fi.d(),Ei&&Ei.d(),ve&&ve.d(),Me&&M(Je),Me&&M(ze),Ur(ut),Hr&&Hr.d(),di.d(),Ar(),Me&&M(pr),Me&&M(Ft),Ma.d(),fa.d(),ba.d(),Wn.d(),Di.d(),Pn.d(),Me&&M(Ca),qi&&qi.d(Me),Me&&M(Ai),Zi&&Zi.d(Me),Me&&M(Fn),Oi&&Oi.d(Me),Me&&M(Ri),Gi&&Gi.d(Me),Me&&M(zi),Ki&&Ki.d(Me),Me&&M(cn),Fi&&Fi.d(Me),Me&&M(Bi),ja=!1,Ol(ho)}}}function l0(l){let c=l[1].name+"",f;return{c(){f=pe(c)},l(m){f=fe(m,c)},m(m,_){xe(m,f,_)},p(m,_){_[0]&2&&c!==(c=m[1].name+"")&&Ht(f,c)},d(m){m&&M(f)}}}function u0(l){let c,f=l[1].name+"",m,_=[...l[1].parents].reverse(),v=[];for(let a=0;a<_.length;a+=1)v[a]=zm(Tm(l,_,a));return{c(){for(let a=0;a<v.length;a+=1)v[a].c();c=Re(),m=pe(f)},l(a){for(let I=0;I<v.length;I+=1)v[I].l(a);c=Be(a),m=fe(a,f)},m(a,I){for(let k=0;k<v.length;k+=1)v[k].m(a,I);xe(a,c,I),xe(a,m,I)},p(a,I){if(I[0]&2){_=[...a[1].parents].reverse();let k;for(k=0;k<_.length;k+=1){const C=Tm(a,_,k);v[k]?v[k].p(C,I):(v[k]=zm(C),v[k].c(),v[k].m(c.parentNode,c))}for(;k<v.length;k+=1)v[k].d(1);v.length=_.length}I[0]&2&&f!==(f=a[1].name+"")&&Ht(m,f)},d(a){Ro(v,a),a&&M(c),a&&M(m)}}}function zm(l){let c,f=l[57].name+"",m,_,v,a=" &gt; ",I;return{c(){c=X("a"),m=pe(f),v=new ry(!1),I=Xi(),this.h()},l(k){c=W(k,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var C=Q(c);m=fe(C,f),C.forEach(M),v=iy(k,!1),I=Xi(),this.h()},h(){L(c,"href",_=as+"/"+l[57].code+"/"),L(c,"sveltekit:noscroll",""),L(c,"class","svelte-1dy7mjs"),v.a=I},m(k,C){xe(k,c,C),P(c,m),v.m(a,k,C),xe(k,I,C)},p(k,C){C[0]&2&&f!==(f=k[57].name+"")&&Ht(m,f),C[0]&2&&_!==(_=as+"/"+k[57].code+"/")&&L(c,"href",_)},d(k){k&&M(c),k&&M(I),k&&v.d()}}}function Pm(l){let c,f,m,_;return{c(){c=X("button"),f=pe("NI 2021"),this.h()},l(v){c=W(v,"BUTTON",{class:!0});var a=Q(c);f=fe(a,"NI 2021"),a.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[16]&!l[15]&!l[4])},m(v,a){xe(v,c,a),P(c,f),m||(_=[Li(c,"click",l[24]),Li(c,"click",l[25]),Li(c,"click",l[26])],m=!0)},p(v,a){a[0]&98320&&Jr(c,"btn-active",v[16]&!v[15]&!v[4])},d(v){v&&M(c),m=!1,Ol(_)}}}function c0(l){let c,f=l[1].name+"",m,_,v=l[1].data.population.value[2021].all.toLocaleString()+"",a,I,k;function C(D,q){return D[1].data.population.value_rank[2021].all==1?m0:D[1].data.population.value_rank[2021].all==D[1].count?d0:D[1].data.population.value_rank[2021].all<=(D[1].count+1)/2&&D[1].data.population.value_rank[2021].all!=1?f0:p0}let z=C(l),O=z(l);return{c(){c=pe("The population of "),m=pe(f),_=pe(" was "),a=pe(v),I=pe(` at the time of the 2021 Census, which
					made it the
					`),O.c(),k=Xi()},l(D){c=fe(D,"The population of "),m=fe(D,f),_=fe(D," was "),a=fe(D,v),I=fe(D,` at the time of the 2021 Census, which
					made it the
					`),O.l(D),k=Xi()},m(D,q){xe(D,c,q),xe(D,m,q),xe(D,_,q),xe(D,a,q),xe(D,I,q),O.m(D,q),xe(D,k,q)},p(D,q){q[0]&2&&f!==(f=D[1].name+"")&&Ht(m,f),q[0]&2&&v!==(v=D[1].data.population.value[2021].all.toLocaleString()+"")&&Ht(a,v),z===(z=C(D))&&O?O.p(D,q):(O.d(1),O=z(D),O&&(O.c(),O.m(k.parentNode,k)))},d(D){D&&M(c),D&&M(m),D&&M(_),D&&M(a),D&&M(I),O.d(D),D&&M(k)}}}function h0(l){let c,f=l[1].name+"",m,_,v=l[1].data.population.value[2021].all.toLocaleString()+"",a,I;return{c(){c=pe("The population of "),m=pe(f),_=pe(" was "),a=pe(v),I=pe(" at the time of the 2021 Census.")},l(k){c=fe(k,"The population of "),m=fe(k,f),_=fe(k," was "),a=fe(k,v),I=fe(k," at the time of the 2021 Census.")},m(k,C){xe(k,c,C),xe(k,m,C),xe(k,_,C),xe(k,a,C),xe(k,I,C)},p(k,C){C[0]&2&&f!==(f=k[1].name+"")&&Ht(m,f),C[0]&2&&v!==(v=k[1].data.population.value[2021].all.toLocaleString()+"")&&Ht(a,v)},d(k){k&&M(c),k&&M(m),k&&M(_),k&&M(a),k&&M(I)}}}function p0(l){let c=l[1].count+1-l[1].data.population.value_rank[2021].all.toLocaleString()+"",f,m=tl(l[1].count+1-l[1].data.population.value_rank[2021].all)+"",_,v;return{c(){f=pe(c),_=pe(m),v=pe(" smallest area.")},l(a){f=fe(a,c),_=fe(a,m),v=fe(a," smallest area.")},m(a,I){xe(a,f,I),xe(a,_,I),xe(a,v,I)},p(a,I){I[0]&2&&c!==(c=a[1].count+1-a[1].data.population.value_rank[2021].all.toLocaleString()+"")&&Ht(f,c),I[0]&2&&m!==(m=tl(a[1].count+1-a[1].data.population.value_rank[2021].all)+"")&&Ht(_,m)},d(a){a&&M(f),a&&M(_),a&&M(v)}}}function f0(l){let c=l[1].data.population.value_rank[2021].all.toLocaleString()+"",f,m=tl(l[1].data.population.value_rank[2021].all)+"",_,v;return{c(){f=pe(c),_=pe(m),v=pe(" largest area.")},l(a){f=fe(a,c),_=fe(a,m),v=fe(a," largest area.")},m(a,I){xe(a,f,I),xe(a,_,I),xe(a,v,I)},p(a,I){I[0]&2&&c!==(c=a[1].data.population.value_rank[2021].all.toLocaleString()+"")&&Ht(f,c),I[0]&2&&m!==(m=tl(a[1].data.population.value_rank[2021].all)+"")&&Ht(_,m)},d(a){a&&M(f),a&&M(_),a&&M(v)}}}function d0(l){let c;return{c(){c=pe("smallest area.")},l(f){c=fe(f,"smallest area.")},m(f,m){xe(f,c,m)},p:_a,d(f){f&&M(c)}}}function m0(l){let c;return{c(){c=pe("largest area.")},l(f){c=fe(f,"largest area.")},m(f,m){xe(f,c,m)},p:_a,d(f){f&&M(c)}}}function y0(l){let c,f=Wr(l[1].data.population.value.change.all,"%",1)+"",m,_;return{c(){c=pe("A decrease of "),m=pe(f),_=pe(" since the 2011 Census.")},l(v){c=fe(v,"A decrease of "),m=fe(v,f),_=fe(v," since the 2011 Census.")},m(v,a){xe(v,c,a),xe(v,m,a),xe(v,_,a)},p(v,a){a[0]&2&&f!==(f=Wr(v[1].data.population.value.change.all,"%",1)+"")&&Ht(m,f)},d(v){v&&M(c),v&&M(m),v&&M(_)}}}function g0(l){let c,f=Wr(l[1].data.population.value.change.all,"%",1)+"",m,_;return{c(){c=pe("An increase of "),m=pe(f),_=pe(" since the 2011 Census.")},l(v){c=fe(v,"An increase of "),m=fe(v,f),_=fe(v," since the 2011 Census.")},m(v,a){xe(v,c,a),xe(v,m,a),xe(v,_,a)},p(v,a){a[0]&2&&f!==(f=Wr(v[1].data.population.value.change.all,"%",1)+"")&&Ht(m,f)},d(v){v&&M(c),v&&M(m),v&&M(_)}}}function _0(l){let c;return{c(){c=pe("No change in population since the 2011 Census.")},l(f){c=fe(f,"No change in population since the 2011 Census.")},m(f,m){xe(f,c,m)},p:_a,d(f){f&&M(c)}}}function Cm(l){let c,f,m=l[1].type!="ctry"&l[16]&!l[4]&&Mm(l);return{c(){m&&m.c(),c=Xi()},l(_){m&&m.l(_),c=Xi()},m(_,v){m&&m.m(_,v),xe(_,c,v),f=!0},p(_,v){_[1].type!="ctry"&_[16]&!_[4]?m?(m.p(_,v),v[0]&65554&&rt(m,1)):(m=Mm(_),m.c(),rt(m,1),m.m(c.parentNode,c)):m&&(Rn(),wt(m,1,1,()=>{m=null}),Bn())},i(_){f||(rt(m),f=!0)},o(_){wt(m),f=!1},d(_){m&&m.d(_),_&&M(c)}}}function Mm(l){let c,f,m,_,v,a,I=l[1].count.toLocaleString()+"",k,C,z=Sc[l[1].type].pl.toLowerCase()+"",O,D;f=new Kh({props:{$$slots:{default:[v0]},$$scope:{ctx:l}}});function q(_e,ke){return _e[1].data.population.value_rank[2021].all==1?E0:_e[1].data.population.value_rank[2021].all==_e[1].count?w0:_e[1].data.population.value_rank[2021].all<=(_e[1].count+1)/2&&_e[1].data.population.value_rank[2021].all!=1?x0:b0}let se=q(l),Te=se(l);return{c(){c=X("span"),Fr(f.$$.fragment),m=pe(" of Northern Ireland population"),_=Re(),v=X("div"),Te.c(),a=pe(`
							population of `),k=pe(I),C=Re(),O=pe(z),this.h()},l(_e){c=W(_e,"SPAN",{class:!0});var ke=Q(c);Nr(f.$$.fragment,ke),m=fe(ke," of Northern Ireland population"),ke.forEach(M),_=Be(_e),v=W(_e,"DIV",{class:!0});var Ce=Q(v);Te.l(Ce),a=fe(Ce,`
							population of `),k=fe(Ce,I),C=Be(Ce),O=fe(Ce,z),Ce.forEach(M),this.h()},h(){L(c,"class","text-small "),L(v,"class","text-small ")},m(_e,ke){xe(_e,c,ke),Vr(f,c,null),P(c,m),xe(_e,_,ke),xe(_e,v,ke),Te.m(v,null),P(v,a),P(v,k),P(v,C),P(v,O),D=!0},p(_e,ke){const Ce={};ke[0]&6|ke[2]&8&&(Ce.$$scope={dirty:ke,ctx:_e}),f.$set(Ce),se===(se=q(_e))&&Te?Te.p(_e,ke):(Te.d(1),Te=se(_e),Te&&(Te.c(),Te.m(v,a))),(!D||ke[0]&2)&&I!==(I=_e[1].count.toLocaleString()+"")&&Ht(k,I),(!D||ke[0]&2)&&z!==(z=Sc[_e[1].type].pl.toLowerCase()+"")&&Ht(O,z)},i(_e){D||(rt(f.$$.fragment,_e),D=!0)},o(_e){wt(f.$$.fragment,_e),D=!1},d(_e){_e&&M(c),Ur(f),_e&&M(_),_e&&M(v),Te.d()}}}function v0(l){let c=(l[1].data.population.value[2021].all/l[2].data.population.value[2021].all>=.001?(l[1].data.population.value[2021].all/l[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,m;return{c(){f=pe(c),m=pe("%")},l(_){f=fe(_,c),m=fe(_,"%")},m(_,v){xe(_,f,v),xe(_,m,v)},p(_,v){v[0]&6&&c!==(c=(_[1].data.population.value[2021].all/_[2].data.population.value[2021].all>=.001?(_[1].data.population.value[2021].all/_[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&Ht(f,c)},d(_){_&&M(f),_&&M(m)}}}function b0(l){let c=l[1].count+1-l[1].data.population.value_rank[2021].all.toLocaleString()+"",f,m=tl(l[1].count+1-l[1].data.population.value_rank[2021].all)+"",_,v;return{c(){f=pe(c),_=pe(m),v=pe(" smallest")},l(a){f=fe(a,c),_=fe(a,m),v=fe(a," smallest")},m(a,I){xe(a,f,I),xe(a,_,I),xe(a,v,I)},p(a,I){I[0]&2&&c!==(c=a[1].count+1-a[1].data.population.value_rank[2021].all.toLocaleString()+"")&&Ht(f,c),I[0]&2&&m!==(m=tl(a[1].count+1-a[1].data.population.value_rank[2021].all)+"")&&Ht(_,m)},d(a){a&&M(f),a&&M(_),a&&M(v)}}}function x0(l){let c=l[1].data.population.value_rank[2021].all.toLocaleString()+"",f,m=tl(l[1].data.population.value_rank[2021].all)+"",_,v;return{c(){f=pe(c),_=pe(m),v=pe(" largest")},l(a){f=fe(a,c),_=fe(a,m),v=fe(a," largest")},m(a,I){xe(a,f,I),xe(a,_,I),xe(a,v,I)},p(a,I){I[0]&2&&c!==(c=a[1].data.population.value_rank[2021].all.toLocaleString()+"")&&Ht(f,c),I[0]&2&&m!==(m=tl(a[1].data.population.value_rank[2021].all)+"")&&Ht(_,m)},d(a){a&&M(f),a&&M(_),a&&M(v)}}}function w0(l){let c;return{c(){c=pe("The smallest")},l(f){c=fe(f,"The smallest")},m(f,m){xe(f,c,m)},p:_a,d(f){f&&M(c)}}}function E0(l){let c;return{c(){c=pe("The largest")},l(f){c=fe(f,"The largest")},m(f,m){xe(f,c,m)},p:_a,d(f){f&&M(c)}}}function Dm(l){let c,f,m,_;return f=new Kh({props:{$$slots:{default:[S0]},$$scope:{ctx:l}}}),{c(){c=X("span"),Fr(f.$$.fragment),m=pe(" since 2011 Census"),this.h()},l(v){c=W(v,"SPAN",{class:!0});var a=Q(c);Nr(f.$$.fragment,a),m=fe(a," since 2011 Census"),a.forEach(M),this.h()},h(){L(c,"class","text-small ")},m(v,a){xe(v,c,a),Vr(f,c,null),P(c,m),_=!0},p(v,a){const I={};a[0]&2|a[2]&8&&(I.$$scope={dirty:a,ctx:v}),f.$set(I)},i(v){_||(rt(f.$$.fragment,v),_=!0)},o(v){wt(f.$$.fragment,v),_=!1},d(v){v&&M(c),Ur(f)}}}function S0(l){let c,f=Wr(l[1].data.population.value.change.all,"%",1)+"",m,_;return{c(){c=X("span"),m=pe(f),this.h()},l(v){c=W(v,"SPAN",{class:!0});var a=Q(c);m=fe(a,f),a.forEach(M),this.h()},h(){L(c,"class",_=Mh(Rh(l[1].data.population.value.change.all))+" svelte-1dy7mjs")},m(v,a){xe(v,c,a),P(c,m)},p(v,a){a[0]&2&&f!==(f=Wr(v[1].data.population.value.change.all,"%",1)+"")&&Ht(m,f),a[0]&2&&_!==(_=Mh(Rh(v[1].data.population.value.change.all))+" svelte-1dy7mjs")&&L(c,"class",_)},d(v){v&&M(c)}}}function Lm(l){let c,f,m,_;return f=new Kh({props:{$$slots:{default:[k0]},$$scope:{ctx:l}}}),{c(){c=X("span"),Fr(f.$$.fragment),m=pe(" of Northern Ireland households"),this.h()},l(v){c=W(v,"SPAN",{class:!0});var a=Q(c);Nr(f.$$.fragment,a),m=fe(a," of Northern Ireland households"),a.forEach(M),this.h()},h(){L(c,"class","text-small")},m(v,a){xe(v,c,a),Vr(f,c,null),P(c,m),_=!0},p(v,a){const I={};a[0]&6|a[2]&8&&(I.$$scope={dirty:a,ctx:v}),f.$set(I)},i(v){_||(rt(f.$$.fragment,v),_=!0)},o(v){wt(f.$$.fragment,v),_=!1},d(v){v&&M(c),Ur(f)}}}function k0(l){let c=(l[1].data.households.value[2021].all_households/l[2].data.households.value[2021].all_households>=.001?(l[1].data.households.value[2021].all_households/l[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,m;return{c(){f=pe(c),m=pe("%")},l(_){f=fe(_,c),m=fe(_,"%")},m(_,v){xe(_,f,v),xe(_,m,v)},p(_,v){v[0]&6&&c!==(c=(_[1].data.households.value[2021].all_households/_[2].data.households.value[2021].all_households>=.001?(_[1].data.households.value[2021].all_households/_[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&Ht(f,c)},d(_){_&&M(f),_&&M(m)}}}function Rm(l){let c,f,m,_;return f=new Kh({props:{$$slots:{default:[I0]},$$scope:{ctx:l}}}),{c(){c=X("span"),Fr(f.$$.fragment),m=pe(" since 2011 Census"),this.h()},l(v){c=W(v,"SPAN",{class:!0});var a=Q(c);Nr(f.$$.fragment,a),m=fe(a," since 2011 Census"),a.forEach(M),this.h()},h(){L(c,"class","text-small")},m(v,a){xe(v,c,a),Vr(f,c,null),P(c,m),_=!0},p(v,a){const I={};a[0]&2|a[2]&8&&(I.$$scope={dirty:a,ctx:v}),f.$set(I)},i(v){_||(rt(f.$$.fragment,v),_=!0)},o(v){wt(f.$$.fragment,v),_=!1},d(v){v&&M(c),Ur(f)}}}function I0(l){let c,f=Wr(l[1].data.households.value.change.all_households,"%",1)+"",m,_;return{c(){c=X("span"),m=pe(f),this.h()},l(v){c=W(v,"SPAN",{class:!0});var a=Q(c);m=fe(a,f),a.forEach(M),this.h()},h(){L(c,"class",_=Mh(Rh(l[1].data.households.value.change.all_households))+" svelte-1dy7mjs")},m(v,a){xe(v,c,a),P(c,m)},p(v,a){a[0]&2&&f!==(f=Wr(v[1].data.households.value.change.all_households,"%",1)+"")&&Ht(m,f),a[0]&2&&_!==(_=Mh(Rh(v[1].data.households.value.change.all_households))+" svelte-1dy7mjs")&&L(c,"class",_)},d(v){v&&M(c)}}}function T0(l){let c,f,m,_,v,a;const I=[to[l[59]],{id:l[59]+"-fill"},{type:"fill"},{isChild:l[8][l[59]]},{click:!0},{selected:l[7].selected},{highlight:!0},{highlighted:l[7].highlighted},{hover:!0},{hovered:l[7].hovered},{layout:{visibility:l[7].type==l[59]||l[7].childType==l[59]?"visible":"none"}},{paint:l[7].type==l[59]?wi["fill-self"]:l[7].childType==l[59]?wi["fill-child"]:wi.fill}];let k={};for(let q=0;q<I.length;q+=1)k=Qs(k,I[q]);c=new zu({props:k}),c.$on("select",l[19]);const C=[to[l[59]],{id:l[59]+"-bounds"},{type:"line"},{selected:l[7].selected},{highlight:!0},{highlighted:l[7].highlighted},{layout:{visibility:l[7].type==l[59]||l[7].childType==l[59]?"visible":"none"}},{paint:l[7].type==l[59]?wi["line-active"]:l[7].childType==l[59]?wi["line-child"]:wi.line}];let z={};for(let q=0;q<C.length;q+=1)z=Qs(z,C[q]);m=new zu({props:z});const O=[to[l[59]],{id:l[59]+"-self"},{type:"line"},{selected:l[7].selected},{layout:{visibility:l[7].type==l[59]?"visible":"none"}},{paint:l[7].type==l[59]?wi["line-self"]:wi.line}];let D={};for(let q=0;q<O.length;q+=1)D=Qs(D,O[q]);return v=new zu({props:D}),{c(){Fr(c.$$.fragment),f=Re(),Fr(m.$$.fragment),_=Re(),Fr(v.$$.fragment)},l(q){Nr(c.$$.fragment,q),f=Be(q),Nr(m.$$.fragment,q),_=Be(q),Nr(v.$$.fragment,q)},m(q,se){Vr(c,q,se),xe(q,f,se),Vr(m,q,se),xe(q,_,se),Vr(v,q,se),a=!0},p(q,se){const Te=se[0]&384?$s(I,[se&0&&el(to[q[59]]),I[1],I[2],se[0]&256&&{isChild:q[8][q[59]]},I[4],se[0]&128&&{selected:q[7].selected},I[6],se[0]&128&&{highlighted:q[7].highlighted},I[8],se[0]&128&&{hovered:q[7].hovered},se[0]&128&&{layout:{visibility:q[7].type==q[59]||q[7].childType==q[59]?"visible":"none"}},se[0]&128&&{paint:q[7].type==q[59]?wi["fill-self"]:q[7].childType==q[59]?wi["fill-child"]:wi.fill}]):{};c.$set(Te);const _e=se[0]&128?$s(C,[se&0&&el(to[q[59]]),C[1],C[2],se[0]&128&&{selected:q[7].selected},C[4],se[0]&128&&{highlighted:q[7].highlighted},se[0]&128&&{layout:{visibility:q[7].type==q[59]||q[7].childType==q[59]?"visible":"none"}},se[0]&128&&{paint:q[7].type==q[59]?wi["line-active"]:q[7].childType==q[59]?wi["line-child"]:wi.line}]):{};m.$set(_e);const ke=se[0]&128?$s(O,[se&0&&el(to[q[59]]),O[1],O[2],se[0]&128&&{selected:q[7].selected},se[0]&128&&{layout:{visibility:q[7].type==q[59]?"visible":"none"}},se[0]&128&&{paint:q[7].type==q[59]?wi["line-self"]:wi.line}]):{};v.$set(ke)},i(q){a||(rt(c.$$.fragment,q),rt(m.$$.fragment,q),rt(v.$$.fragment,q),a=!0)},o(q){wt(c.$$.fragment,q),wt(m.$$.fragment,q),wt(v.$$.fragment,q),a=!1},d(q){Ur(c,q),q&&M(f),Ur(m,q),q&&M(_),Ur(v,q)}}}function Bm(l){let c,f;const m=[Lh[l[59]]];let _={$$slots:{default:[T0]},$$scope:{ctx:l}};for(let v=0;v<m.length;v+=1)_=Qs(_,m[v]);return c=new ky({props:_}),{c(){Fr(c.$$.fragment)},l(v){Nr(c.$$.fragment,v)},m(v,a){Vr(c,v,a),f=!0},p(v,a){const I=a&0?$s(m,[el(Lh[v[59]])]):{};a[0]&384|a[2]&8&&(I.$$scope={dirty:a,ctx:v}),c.$set(I)},i(v){f||(rt(c.$$.fragment,v),f=!0)},o(v){wt(c.$$.fragment,v),f=!1},d(v){Ur(c,v)}}}function Om(l){let c,f,m,_,v,a;const I=[to[l[59]],{id:l[59]+"-fill"},{type:"fill"},{isChild:l[8][l[59]]},{click:!0},{selected:l[7].selected},{highlight:!0},{highlighted:l[7].highlighted},{hover:!0},{hovered:l[7].hovered},{layout:{visibility:l[7].type==l[59]||l[7].childType==l[59]?"visible":"none"}},{paint:l[7].type==l[59]?wi["fill-self"]:l[7].childType==l[59]?wi["fill-child"]:wi.fill}];let k={};for(let q=0;q<I.length;q+=1)k=Qs(k,I[q]);c=new zu({props:k}),c.$on("select",l[19]);const C=[to[l[59]],{id:l[59]+"-bounds"},{type:"line"},{selected:l[7].selected},{highlight:!0},{highlighted:l[7].highlighted},{layout:{visibility:l[7].type==l[59]||l[7].childType==l[59]?"visible":"none"}},{paint:l[7].type==l[59]?wi["line-active"]:l[7].childType==l[59]?wi["line-child"]:wi.line}];let z={};for(let q=0;q<C.length;q+=1)z=Qs(z,C[q]);m=new zu({props:z});const O=[to[l[59]],{id:l[59]+"-self"},{type:"line"},{selected:l[7].selected},{layout:{visibility:l[7].type==l[59]?"visible":"none"}},{paint:l[7].type==l[59]?wi["line-self"]:wi.line}];let D={};for(let q=0;q<O.length;q+=1)D=Qs(D,O[q]);return v=new zu({props:D}),{c(){Fr(c.$$.fragment),f=Re(),Fr(m.$$.fragment),_=Re(),Fr(v.$$.fragment)},l(q){Nr(c.$$.fragment,q),f=Be(q),Nr(m.$$.fragment,q),_=Be(q),Nr(v.$$.fragment,q)},m(q,se){Vr(c,q,se),xe(q,f,se),Vr(m,q,se),xe(q,_,se),Vr(v,q,se),a=!0},p(q,se){const Te=se[0]&384?$s(I,[se&0&&el(to[q[59]]),I[1],I[2],se[0]&256&&{isChild:q[8][q[59]]},I[4],se[0]&128&&{selected:q[7].selected},I[6],se[0]&128&&{highlighted:q[7].highlighted},I[8],se[0]&128&&{hovered:q[7].hovered},se[0]&128&&{layout:{visibility:q[7].type==q[59]||q[7].childType==q[59]?"visible":"none"}},se[0]&128&&{paint:q[7].type==q[59]?wi["fill-self"]:q[7].childType==q[59]?wi["fill-child"]:wi.fill}]):{};c.$set(Te);const _e=se[0]&128?$s(C,[se&0&&el(to[q[59]]),C[1],C[2],se[0]&128&&{selected:q[7].selected},C[4],se[0]&128&&{highlighted:q[7].highlighted},se[0]&128&&{layout:{visibility:q[7].type==q[59]||q[7].childType==q[59]?"visible":"none"}},se[0]&128&&{paint:q[7].type==q[59]?wi["line-active"]:q[7].childType==q[59]?wi["line-child"]:wi.line}]):{};m.$set(_e);const ke=se[0]&128?$s(O,[se&0&&el(to[q[59]]),O[1],O[2],se[0]&128&&{selected:q[7].selected},se[0]&128&&{layout:{visibility:q[7].type==q[59]?"visible":"none"}},se[0]&128&&{paint:q[7].type==q[59]?wi["line-self"]:wi.line}]):{};v.$set(ke)},i(q){a||(rt(c.$$.fragment,q),rt(m.$$.fragment,q),rt(v.$$.fragment,q),a=!0)},o(q){wt(c.$$.fragment,q),wt(m.$$.fragment,q),wt(v.$$.fragment,q),a=!1},d(q){Ur(c,q),q&&M(f),Ur(m,q),q&&M(_),Ur(v,q)}}}function A0(l){let c,f,m=["lgd"],_=[];for(let a=0;a<1;a+=1)_[a]=Om(km(l,m,a));const v=a=>wt(_[a],1,1,()=>{_[a]=null});return{c(){for(let a=0;a<1;a+=1)_[a].c();c=Xi()},l(a){for(let I=0;I<1;I+=1)_[I].l(a);c=Xi()},m(a,I){for(let k=0;k<1;k+=1)_[k].m(a,I);xe(a,c,I),f=!0},p(a,I){if(I[0]&524672){m=["lgd"];let k;for(k=0;k<1;k+=1){const C=km(a,m,k);_[k]?(_[k].p(C,I),rt(_[k],1)):(_[k]=Om(C),_[k].c(),rt(_[k],1),_[k].m(c.parentNode,c))}for(Rn(),k=1;k<1;k+=1)v(k);Bn()}},i(a){if(!f){for(let I=0;I<1;I+=1)rt(_[I]);f=!0}},o(a){_=_.filter(Boolean);for(let I=0;I<1;I+=1)wt(_[I]);f=!1},d(a){Ro(_,a),a&&M(c)}}}function z0(l){let c,f,m,_=["dea"],v=[];for(let C=0;C<1;C+=1)v[C]=Bm(Im(l,_,C));const a=C=>wt(v[C],1,1,()=>{v[C]=null}),I=[Lh.lgd];let k={$$slots:{default:[A0]},$$scope:{ctx:l}};for(let C=0;C<I.length;C+=1)k=Qs(k,I[C]);return f=new ky({props:k}),{c(){for(let C=0;C<1;C+=1)v[C].c();c=Re(),Fr(f.$$.fragment)},l(C){for(let z=0;z<1;z+=1)v[z].l(C);c=Be(C),Nr(f.$$.fragment,C)},m(C,z){for(let O=0;O<1;O+=1)v[O].m(C,z);xe(C,c,z),Vr(f,C,z),m=!0},p(C,z){if(z[0]&524672){_=["dea"];let D;for(D=0;D<1;D+=1){const q=Im(C,_,D);v[D]?(v[D].p(q,z),rt(v[D],1)):(v[D]=Bm(q),v[D].c(),rt(v[D],1),v[D].m(c.parentNode,c))}for(Rn(),D=1;D<1;D+=1)a(D);Bn()}const O=z&0?$s(I,[el(Lh.lgd)]):{};z[0]&384|z[2]&8&&(O.$$scope={dirty:z,ctx:C}),f.$set(O)},i(C){if(!m){for(let z=0;z<1;z+=1)rt(v[z]);rt(f.$$.fragment,C),m=!0}},o(C){v=v.filter(Boolean);for(let z=0;z<1;z+=1)wt(v[z]);wt(f.$$.fragment,C),m=!1},d(C){Ro(v,C),C&&M(c),Ur(f,C)}}}function Fm(l){let c,f=[...l[1].parents].reverse(),m=[];for(let _=0;_<f.length;_+=1)m[_]=Nm(Sm(l,f,_));return{c(){for(let _=0;_<m.length;_+=1)m[_].c();c=Xi()},l(_){for(let v=0;v<m.length;v+=1)m[v].l(_);c=Xi()},m(_,v){for(let a=0;a<m.length;a+=1)m[a].m(_,v);xe(_,c,v)},p(_,v){if(v[0]&2){f=[..._[1].parents].reverse();let a;for(a=0;a<f.length;a+=1){const I=Sm(_,f,a);m[a]?m[a].p(I,v):(m[a]=Nm(I),m[a].c(),m[a].m(c.parentNode,c))}for(;a<m.length;a+=1)m[a].d(1);m.length=f.length}},d(_){Ro(m,_),_&&M(c)}}}function Nm(l){let c,f=l[1].name+"",m,_,v,a,I=l[57].name+"",k,C;return{c(){c=X("span"),m=pe(f),_=pe(" is located in "),v=X("span"),a=X("a"),k=pe(I),this.h()},l(z){c=W(z,"SPAN",{});var O=Q(c);m=fe(O,f),_=fe(O," is located in "),O.forEach(M),v=W(z,"SPAN",{class:!0});var D=Q(v);a=W(D,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var q=Q(a);k=fe(q,I),q.forEach(M),D.forEach(M),this.h()},h(){L(a,"href",C=as+"/"+l[57].code+"/"),L(a,"sveltekit:noscroll",""),L(a,"class","svelte-1dy7mjs"),L(v,"class","text-bold")},m(z,O){xe(z,c,O),P(c,m),P(c,_),xe(z,v,O),P(v,a),P(a,k)},p(z,O){O[0]&2&&f!==(f=z[1].name+"")&&Ht(m,f),O[0]&2&&I!==(I=z[57].name+"")&&Ht(k,I),O[0]&2&&C!==(C=as+"/"+z[57].code+"/")&&L(a,"href",C)},d(z){z&&M(c),z&&M(v)}}}function P0(l){let c,f,m=l[1].name+"",_;return{c(){c=X("span"),f=pe("No areas within "),_=pe(m),this.h()},l(v){c=W(v,"SPAN",{class:!0});var a=Q(c);f=fe(a,"No areas within "),_=fe(a,m),a.forEach(M),this.h()},h(){L(c,"class","muted")},m(v,a){xe(v,c,a),P(c,f),P(c,_)},p(v,a){a[0]&2&&m!==(m=v[1].name+"")&&Ht(_,m)},d(v){v&&M(c)}}}function C0(l){let c,f,m,_,v,a=l[2].children,I=[];for(let k=0;k<a.length;k+=1)I[k]=Vm(Em(l,a,k));return{c(){c=X("span"),f=pe("Districts within Northern Ireland"),m=X("br"),_=Re();for(let k=0;k<I.length;k+=1)I[k].c();v=Xi(),this.h()},l(k){c=W(k,"SPAN",{class:!0});var C=Q(c);f=fe(C,"Districts within Northern Ireland"),C.forEach(M),m=W(k,"BR",{}),_=Be(k);for(let z=0;z<I.length;z+=1)I[z].l(k);v=Xi(),this.h()},h(){L(c,"class","text-bold")},m(k,C){xe(k,c,C),P(c,f),xe(k,m,C),xe(k,_,C);for(let z=0;z<I.length;z+=1)I[z].m(k,C);xe(k,v,C)},p(k,C){if(C[0]&4){a=k[2].children;let z;for(z=0;z<a.length;z+=1){const O=Em(k,a,z);I[z]?I[z].p(O,C):(I[z]=Vm(O),I[z].c(),I[z].m(v.parentNode,v))}for(;z<I.length;z+=1)I[z].d(1);I.length=a.length}},d(k){k&&M(c),k&&M(m),k&&M(_),Ro(I,k),k&&M(v)}}}function Vm(l){let c,f,m=l[54].name+"",_,v,a=(l[56]<l[2].children.length-1,""),I,k;return{c(){c=X("li"),f=X("a"),_=pe(m),I=pe(a),k=Re(),this.h()},l(C){c=W(C,"LI",{style:!0});var z=Q(c);f=W(z,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var O=Q(f);_=fe(O,m),O.forEach(M),I=fe(z,a),k=Be(z),z.forEach(M),this.h()},h(){L(f,"href",v=as+"/"+l[54].code+"/"),L(f,"sveltekit:noscroll",""),L(f,"class","svelte-1dy7mjs"),he(c,"margin","3px"),he(c,"display","block"),he(c,"line-height","20px"),he(c,"padding-bottom","5px")},m(C,z){xe(C,c,z),P(c,f),P(f,_),P(c,I),P(c,k)},p(C,z){z[0]&4&&m!==(m=C[54].name+"")&&Ht(_,m),z[0]&4&&v!==(v=as+"/"+C[54].code+"/")&&L(f,"href",v),z[0]&4&&a!==(a=(C[56]<C[2].children.length-1,""))&&Ht(I,a)},d(C){C&&M(c)}}}function M0(l){let c,f,m,_;return{c(){c=X("button"),f=pe("Demography"),this.h()},l(v){c=W(v,"BUTTON",{class:!0});var a=Q(c);f=fe(a,"Demography"),a.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[14])},m(v,a){xe(v,c,a),P(c,f),m||(_=Li(c,"click",l[33]),m=!0)},p(v,a){a[0]&16384&&Jr(c,"btn-active",v[14])},d(v){v&&M(c),m=!1,_()}}}function D0(l){let c,f,m,_,v,a;return{c(){c=X("button"),f=pe("Demography "),m=X("sup"),_=pe("x"),this.h()},l(I){c=W(I,"BUTTON",{class:!0});var k=Q(c);f=fe(k,"Demography "),m=W(k,"SUP",{});var C=Q(m);_=fe(C,"x"),C.forEach(M),k.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[14])},m(I,k){xe(I,c,k),P(c,f),P(c,m),P(m,_),v||(a=Li(c,"click",l[32]),v=!0)},p(I,k){k[0]&16384&&Jr(c,"btn-active",I[14])},d(I){I&&M(c),v=!1,a()}}}function L0(l){let c,f,m,_;return{c(){c=X("button"),f=pe("Country of Birth & Nationality"),this.h()},l(v){c=W(v,"BUTTON",{class:!0});var a=Q(c);f=fe(a,"Country of Birth & Nationality"),a.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[13])},m(v,a){xe(v,c,a),P(c,f),m||(_=Li(c,"click",l[35]),m=!0)},p(v,a){a[0]&8192&&Jr(c,"btn-active",v[13])},d(v){v&&M(c),m=!1,_()}}}function R0(l){let c,f,m,_,v,a;return{c(){c=X("button"),f=pe("Country of Birth & Nationality "),m=X("sup"),_=pe("x"),this.h()},l(I){c=W(I,"BUTTON",{class:!0});var k=Q(c);f=fe(k,"Country of Birth & Nationality "),m=W(k,"SUP",{});var C=Q(m);_=fe(C,"x"),C.forEach(M),k.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[13])},m(I,k){xe(I,c,k),P(c,f),P(c,m),P(m,_),v||(a=Li(c,"click",l[34]),v=!0)},p(I,k){k[0]&8192&&Jr(c,"btn-active",I[13])},d(I){I&&M(c),v=!1,a()}}}function B0(l){let c,f,m,_;return{c(){c=X("button"),f=pe("Language"),this.h()},l(v){c=W(v,"BUTTON",{class:!0});var a=Q(c);f=fe(a,"Language"),a.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[12])},m(v,a){xe(v,c,a),P(c,f),m||(_=Li(c,"click",l[37]),m=!0)},p(v,a){a[0]&4096&&Jr(c,"btn-active",v[12])},d(v){v&&M(c),m=!1,_()}}}function O0(l){let c,f,m,_,v,a;return{c(){c=X("button"),f=pe("Language "),m=X("sup"),_=pe("x"),this.h()},l(I){c=W(I,"BUTTON",{class:!0});var k=Q(c);f=fe(k,"Language "),m=W(k,"SUP",{});var C=Q(m);_=fe(C,"x"),C.forEach(M),k.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[12])},m(I,k){xe(I,c,k),P(c,f),P(c,m),P(m,_),v||(a=Li(c,"click",l[36]),v=!0)},p(I,k){k[0]&4096&&Jr(c,"btn-active",I[12])},d(I){I&&M(c),v=!1,a()}}}function F0(l){let c,f,m,_;return{c(){c=X("button"),f=pe("Religion & Ethnicity"),this.h()},l(v){c=W(v,"BUTTON",{class:!0});var a=Q(c);f=fe(a,"Religion & Ethnicity"),a.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[11])},m(v,a){xe(v,c,a),P(c,f),m||(_=Li(c,"click",l[39]),m=!0)},p(v,a){a[0]&2048&&Jr(c,"btn-active",v[11])},d(v){v&&M(c),m=!1,_()}}}function N0(l){let c,f,m,_,v,a;return{c(){c=X("button"),f=pe("Religion & Ethnicity "),m=X("sup"),_=pe("x"),this.h()},l(I){c=W(I,"BUTTON",{class:!0});var k=Q(c);f=fe(k,"Religion & Ethnicity "),m=W(k,"SUP",{});var C=Q(m);_=fe(C,"x"),C.forEach(M),k.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[11])},m(I,k){xe(I,c,k),P(c,f),P(c,m),P(m,_),v||(a=Li(c,"click",l[38]),v=!0)},p(I,k){k[0]&2048&&Jr(c,"btn-active",I[11])},d(I){I&&M(c),v=!1,a()}}}function V0(l){let c,f,m,_;return{c(){c=X("button"),f=pe("Health & Care"),this.h()},l(v){c=W(v,"BUTTON",{class:!0});var a=Q(c);f=fe(a,"Health & Care"),a.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[9])},m(v,a){xe(v,c,a),P(c,f),m||(_=Li(c,"click",l[41]),m=!0)},p(v,a){a[0]&512&&Jr(c,"btn-active",v[9])},d(v){v&&M(c),m=!1,_()}}}function U0(l){let c,f,m,_,v,a;return{c(){c=X("button"),f=pe("Health & Care "),m=X("sup"),_=pe("x"),this.h()},l(I){c=W(I,"BUTTON",{class:!0});var k=Q(c);f=fe(k,"Health & Care "),m=W(k,"SUP",{});var C=Q(m);_=fe(C,"x"),C.forEach(M),k.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[9])},m(I,k){xe(I,c,k),P(c,f),P(c,m),P(m,_),v||(a=Li(c,"click",l[40]),v=!0)},p(I,k){k[0]&512&&Jr(c,"btn-active",I[9])},d(I){I&&M(c),v=!1,a()}}}function j0(l){let c,f,m,_;return{c(){c=X("button"),f=pe("Housing & Accommodation"),this.h()},l(v){c=W(v,"BUTTON",{class:!0});var a=Q(c);f=fe(a,"Housing & Accommodation"),a.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[10])},m(v,a){xe(v,c,a),P(c,f),m||(_=Li(c,"click",l[43]),m=!0)},p(v,a){a[0]&1024&&Jr(c,"btn-active",v[10])},d(v){v&&M(c),m=!1,_()}}}function q0(l){let c,f,m,_,v,a;return{c(){c=X("button"),f=pe("Housing & Accommodation "),m=X("sup"),_=pe("x"),this.h()},l(I){c=W(I,"BUTTON",{class:!0});var k=Q(c);f=fe(k,"Housing & Accommodation "),m=W(k,"SUP",{});var C=Q(m);_=fe(C,"x"),C.forEach(M),k.forEach(M),this.h()},h(){L(c,"class","btn svelte-1dy7mjs"),Jr(c,"btn-active",l[10])},m(I,k){xe(I,c,k),P(c,f),P(c,m),P(m,_),v||(a=Li(c,"click",l[42]),v=!0)},p(I,k){k[0]&1024&&Jr(c,"btn-active",I[10])},d(I){I&&M(c),v=!1,a()}}}function Um(l){let c,f,m,_,v=l[1].name+"",a,I,k,C,z,O,D,q,se,Te=" &#x24D8; ",_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De,Ve,st,Ct,zt,Ke,qe,lr,vr,cr=" &#x24D8; ",Br,Bt,xt,Ut,At,Kt,It,Jt,vt,fr,yr;pt=new t1({props:{data:l[1]&&l[18](["age","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null}});let bt=!l[15]&&l[17]&&jm(l);function gr($e,Lt){if($e[15])return K0;if($e[4])return G0;if($e[16])return Z0}let hr=gr(l),dr=hr&&hr(l);return st=new ua({props:{data:l[1]&&l[18](["population","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),vt=new ua({props:{data:l[1]&&l[18](["hh_size","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),{c(){c=X("div"),f=X("h2"),m=pe("Demography "),_=X("span"),a=pe(v),I=pe(" - Census 2021"),k=Re(),C=X("div"),z=X("div"),O=X("div"),D=X("div"),q=pe("Broad age bands (years) "),se=X("span"),_e=Re(),ke=X("div"),Ce=X("div"),mt=pe(`A grouping of ages where a person\u2019s age is their age
							at their last birthday on or prior to census day. `),at=X("a"),Ye=X("strong"),Ge=pe("Statistical bulletins"),Xt=Re(),yt=X("div"),Fr(pt.$$.fragment),lt=Re(),bt&&bt.c(),Ie=Re(),dr&&dr.c(),it=Re(),nt=X("div"),Qe=X("div"),De=pe("Sex"),Ve=Re(),Fr(st.$$.fragment),Ct=Re(),zt=X("div"),Ke=X("div"),qe=X("div"),lr=pe("Household size"),vr=X("span"),Br=Re(),Bt=X("div"),xt=X("div"),Ut=pe("The number of usual residents in the household.      "),At=X("a"),Kt=X("strong"),It=pe("Statistical bulletins"),Jt=Re(),Fr(vt.$$.fragment),this.h()},l($e){c=W($e,"DIV",{style:!0});var Lt=Q(c);f=W(Lt,"H2",{class:!0});var Wt=Q(f);m=fe(Wt,"Demography "),_=W(Wt,"SPAN",{class:!0});var Se=Q(_);a=fe(Se,v),I=fe(Se," - Census 2021"),Se.forEach(M),Wt.forEach(M),Lt.forEach(M),k=Be($e),C=W($e,"DIV",{class:!0});var We=Q(C);z=W(We,"DIV",{class:!0});var qt=Q(z);O=W(qt,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Mt=Q(O);D=W(Mt,"DIV",{class:!0,style:!0});var tr=Q(D);q=fe(tr,"Broad age bands (years) "),se=W(tr,"SPAN",{style:!0});var Dr=Q(se);Dr.forEach(M),tr.forEach(M),Mt.forEach(M),_e=Be(qt),ke=W(qt,"DIV",{class:!0,id:!0});var ri=Q(ke);Ce=W(ri,"DIV",{class:!0});var Yt=Q(Ce);mt=fe(Yt,`A grouping of ages where a person\u2019s age is their age
							at their last birthday on or prior to census day. `),at=W(Yt,"A",{href:!0,class:!0});var Er=Q(at);Ye=W(Er,"STRONG",{});var Gr=Q(Ye);Ge=fe(Gr,"Statistical bulletins"),Gr.forEach(M),Er.forEach(M),Yt.forEach(M),ri.forEach(M),Xt=Be(qt),yt=W(qt,"DIV",{class:!0,style:!0});var Xr=Q(yt);Nr(pt.$$.fragment,Xr),Xr.forEach(M),lt=Be(qt),bt&&bt.l(qt),Ie=Be(qt),dr&&dr.l(qt),qt.forEach(M),it=Be(We),nt=W(We,"DIV",{class:!0});var ai=Q(nt);Qe=W(ai,"DIV",{class:!0,style:!0});var si=Q(Qe);De=fe(si,"Sex"),si.forEach(M),Ve=Be(ai),Nr(st.$$.fragment,ai),ai.forEach(M),Ct=Be(We),zt=W(We,"DIV",{class:!0});var Cr=Q(zt);Ke=W(Cr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var qr=Q(Ke);qe=W(qr,"DIV",{class:!0,style:!0});var Sr=Q(qe);lr=fe(Sr,"Household size"),vr=W(Sr,"SPAN",{style:!0});var ei=Q(vr);ei.forEach(M),Sr.forEach(M),qr.forEach(M),Br=Be(Cr),Bt=W(Cr,"DIV",{class:!0,id:!0});var Yr=Q(Bt);xt=W(Yr,"DIV",{class:!0});var kt=Q(xt);Ut=fe(kt,"The number of usual residents in the household.      "),At=W(kt,"A",{href:!0,class:!0});var kr=Q(At);Kt=W(kr,"STRONG",{});var pi=Q(Kt);It=fe(pi,"Statistical bulletins"),pi.forEach(M),kr.forEach(M),kt.forEach(M),Yr.forEach(M),Jt=Be(Cr),Nr(vt.$$.fragment,Cr),Cr.forEach(M),We.forEach(M),this.h()},h(){L(_,"class","title-inset muted svelte-1dy7mjs"),L(f,"class","svelte-1dy7mjs"),he(c,"grid-column","span "+l[5]),he(se,"color","gray"),he(se,"font-size","14pt"),L(D,"class","blocktitle"),he(D,"margin","0"),he(D,"width","100%"),L(O,"class","row"),he(O,"display","flex"),he(O,"cursor","pointer"),L(O,"data-bs-toggle","collapse"),L(O,"data-bs-target","#broadagebands-info"),L(O,"aria-expanded","false"),L(O,"aria-controls","broadagebands-info"),L(at,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(at,"class","svelte-1dy7mjs"),L(Ce,"class","card card-body svelte-1dy7mjs"),L(ke,"class","collapse svelte-1dy7mjs"),L(ke,"id","broadagebands-info"),L(yt,"class","chart svelte-1dy7mjs"),he(yt,"height","100px"),he(yt,"padding-bottom","5px"),L(z,"class","div-grey-box svelte-1dy7mjs"),L(Qe,"class","blocktitle"),he(Qe,"margin","0"),he(Qe,"width","100%"),L(nt,"class","div-grey-box svelte-1dy7mjs"),he(vr,"color","gray"),he(vr,"font-size","14pt"),L(qe,"class","blocktitle"),he(qe,"margin","0"),he(qe,"width","100%"),L(Ke,"class","row"),he(Ke,"display","flex"),he(Ke,"cursor","pointer"),L(Ke,"data-bs-toggle","collapse"),L(Ke,"data-bs-target","#hhsize-info"),L(Ke,"aria-expanded","false"),L(Ke,"aria-controls","hhsize-info"),L(At,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(At,"class","svelte-1dy7mjs"),L(xt,"class","card card-body svelte-1dy7mjs"),L(Bt,"class","collapse svelte-1dy7mjs"),L(Bt,"id","hhsize-info"),L(zt,"class","div-grey-box svelte-1dy7mjs"),L(C,"class","grid mt svelte-1dy7mjs"),zs(()=>l[44].call(C))},m($e,Lt){xe($e,c,Lt),P(c,f),P(f,m),P(f,_),P(_,a),P(_,I),xe($e,k,Lt),xe($e,C,Lt),P(C,z),P(z,O),P(O,D),P(D,q),P(D,se),se.innerHTML=Te,P(z,_e),P(z,ke),P(ke,Ce),P(Ce,mt),P(Ce,at),P(at,Ye),P(Ye,Ge),P(z,Xt),P(z,yt),Vr(pt,yt,null),P(z,lt),bt&&bt.m(z,null),P(z,Ie),dr&&dr.m(z,null),P(C,it),P(C,nt),P(nt,Qe),P(Qe,De),P(nt,Ve),Vr(st,nt,null),P(C,Ct),P(C,zt),P(zt,Ke),P(Ke,qe),P(qe,lr),P(qe,vr),vr.innerHTML=cr,P(zt,Br),P(zt,Bt),P(Bt,xt),P(xt,Ut),P(xt,At),P(At,Kt),P(Kt,It),P(zt,Jt),Vr(vt,zt,null),fr=Ps(C,l[44].bind(C)),yr=!0},p($e,Lt){(!yr||Lt[0]&2)&&v!==(v=$e[1].name+"")&&Ht(a,v),(!yr||Lt[0]&32)&&he(c,"grid-column","span "+$e[5]);const Wt={};Lt[0]&2&&(Wt.data=$e[1]&&$e[18](["age","perc","2021"])),Lt[0]&32786&&(Wt.zKey=$e[15]?null:$e[4]?"prev":!$e[4]&&$e[1].type!="ew"?"ew":null),pt.$set(Wt),!$e[15]&&$e[17]?bt?bt.p($e,Lt):(bt=jm($e),bt.c(),bt.m(z,Ie)):bt&&(bt.d(1),bt=null),hr===(hr=gr($e))&&dr?dr.p($e,Lt):(dr&&dr.d(1),dr=hr&&hr($e),dr&&(dr.c(),dr.m(z,null)));const Se={};Lt[0]&2&&(Se.data=$e[1]&&$e[18](["population","perc","2021"])),Lt[0]&32786&&(Se.zKey=$e[15]?null:$e[4]?"prev":!$e[4]&&$e[1].type!="ew"?"ew":null),Lt[0]&131072&&(Se.label=$e[17]),st.$set(Se);const We={};Lt[0]&2&&(We.data=$e[1]&&$e[18](["hh_size","perc","2021"])),Lt[0]&32786&&(We.zKey=$e[15]?null:$e[4]?"prev":!$e[4]&&$e[1].type!="ew"?"ew":null),Lt[0]&131072&&(We.label=$e[17]),vt.$set(We)},i($e){yr||(rt(pt.$$.fragment,$e),rt(st.$$.fragment,$e),rt(vt.$$.fragment,$e),yr=!0)},o($e){wt(pt.$$.fragment,$e),wt(st.$$.fragment,$e),wt(vt.$$.fragment,$e),yr=!1},d($e){$e&&M(c),$e&&M(k),$e&&M(C),Ur(pt),bt&&bt.d(),dr&&dr.d(),Ur(st),Ur(vt),fr()}}}function jm(l){let c,f,m,_,v;return{c(){c=X("div"),f=ca("svg"),m=ca("rect"),_=Re(),v=pe(l[17]),this.h()},l(a){c=W(a,"DIV",{class:!0});var I=Q(c);f=ha(I,"svg",{width:!0,height:!0,style:!0});var k=Q(f);m=ha(k,"rect",{width:!0,height:!0,style:!0}),Q(m).forEach(M),k.forEach(M),_=Be(I),v=fe(I,l[17]),I.forEach(M),this.h()},h(){L(m,"width","25"),L(m,"height","4"),he(m,"fill","#CEDC20"),L(f,"width","25"),L(f,"height","4"),he(f,"display","inline-block"),he(f,"margin-bottom","3px"),L(c,"class","text-small muted; ")},m(a,I){xe(a,c,I),P(c,f),P(f,m),P(c,_),P(c,v)},p(a,I){I[0]&131072&&Ht(v,a[17])},d(a){a&&M(c)}}}function Z0(l){let c,f,m=Wr(l[1].data.age.perc[2021].a0to14,"%",0)+"",_,v,a,I,k,C,z=Wr(l[1].data.age.perc[2021].a15to39,"%",0)+"",O,D,q,se,Te,_e,ke=Wr(l[1].data.age.perc[2021].a40to64,"%",0)+"",Ce,mt,at,Ye,Ge,Xt,yt=Wr(l[1].data.age.perc[2021].a65plus,"%",0)+"",pt,lt,Ie,it=l[1].parents[0]&&qm(l),nt=l[1].parents[0]&&Zm(l),Qe=l[1].parents[0]&&Gm(l),De=l[1].parents[0]&&Km(l);return{c(){c=X("span"),f=pe("0-14 years "),_=pe(m),v=Re(),it&&it.c(),a=X("br"),I=Re(),k=X("span"),C=pe("15-39 years "),O=pe(z),D=Re(),nt&&nt.c(),q=X("br"),se=Re(),Te=X("span"),_e=pe("40-64 years "),Ce=pe(ke),mt=Re(),Qe&&Qe.c(),at=X("br"),Ye=Re(),Ge=X("span"),Xt=pe("65+ years "),pt=pe(yt),lt=Re(),De&&De.c(),Ie=Xi(),this.h()},l(Ve){c=W(Ve,"SPAN",{class:!0});var st=Q(c);f=fe(st,"0-14 years "),_=fe(st,m),v=Be(st),st.forEach(M),it&&it.l(Ve),a=W(Ve,"BR",{}),I=Be(Ve),k=W(Ve,"SPAN",{class:!0});var Ct=Q(k);C=fe(Ct,"15-39 years "),O=fe(Ct,z),D=Be(Ct),Ct.forEach(M),nt&&nt.l(Ve),q=W(Ve,"BR",{}),se=Be(Ve),Te=W(Ve,"SPAN",{class:!0});var zt=Q(Te);_e=fe(zt,"40-64 years "),Ce=fe(zt,ke),mt=Be(zt),zt.forEach(M),Qe&&Qe.l(Ve),at=W(Ve,"BR",{}),Ye=Be(Ve),Ge=W(Ve,"SPAN",{class:!0});var Ke=Q(Ge);Xt=fe(Ke,"65+ years "),pt=fe(Ke,yt),lt=Be(Ke),Ke.forEach(M),De&&De.l(Ve),Ie=Xi(),this.h()},h(){L(c,"class","text-small"),L(k,"class","text-small"),L(Te,"class","text-small"),L(Ge,"class","text-small")},m(Ve,st){xe(Ve,c,st),P(c,f),P(c,_),P(c,v),it&&it.m(Ve,st),xe(Ve,a,st),xe(Ve,I,st),xe(Ve,k,st),P(k,C),P(k,O),P(k,D),nt&&nt.m(Ve,st),xe(Ve,q,st),xe(Ve,se,st),xe(Ve,Te,st),P(Te,_e),P(Te,Ce),P(Te,mt),Qe&&Qe.m(Ve,st),xe(Ve,at,st),xe(Ve,Ye,st),xe(Ve,Ge,st),P(Ge,Xt),P(Ge,pt),P(Ge,lt),De&&De.m(Ve,st),xe(Ve,Ie,st)},p(Ve,st){st[0]&2&&m!==(m=Wr(Ve[1].data.age.perc[2021].a0to14,"%",0)+"")&&Ht(_,m),Ve[1].parents[0]?it?it.p(Ve,st):(it=qm(Ve),it.c(),it.m(a.parentNode,a)):it&&(it.d(1),it=null),st[0]&2&&z!==(z=Wr(Ve[1].data.age.perc[2021].a15to39,"%",0)+"")&&Ht(O,z),Ve[1].parents[0]?nt?nt.p(Ve,st):(nt=Zm(Ve),nt.c(),nt.m(q.parentNode,q)):nt&&(nt.d(1),nt=null),st[0]&2&&ke!==(ke=Wr(Ve[1].data.age.perc[2021].a40to64,"%",0)+"")&&Ht(Ce,ke),Ve[1].parents[0]?Qe?Qe.p(Ve,st):(Qe=Gm(Ve),Qe.c(),Qe.m(at.parentNode,at)):Qe&&(Qe.d(1),Qe=null),st[0]&2&&yt!==(yt=Wr(Ve[1].data.age.perc[2021].a65plus,"%",0)+"")&&Ht(pt,yt),Ve[1].parents[0]?De?De.p(Ve,st):(De=Km(Ve),De.c(),De.m(Ie.parentNode,Ie)):De&&(De.d(1),De=null)},d(Ve){Ve&&M(c),it&&it.d(Ve),Ve&&M(a),Ve&&M(I),Ve&&M(k),nt&&nt.d(Ve),Ve&&M(q),Ve&&M(se),Ve&&M(Te),Qe&&Qe.d(Ve),Ve&&M(at),Ve&&M(Ye),Ve&&M(Ge),De&&De.d(Ve),Ve&&M(Ie)}}}function G0(l){let c,f,m=Wr(l[1].data.age.perc[2021].a0to14,"%",0)+"",_,v,a,I,k=Wr(l[1].data.age.perc[2011].a0to14,"%",0)+"",C,z,O,D,q,se,Te=Wr(l[1].data.age.perc[2021].a15to39,"%",0)+"",_e,ke,Ce,mt,at=Wr(l[1].data.age.perc[2011].a15to39,"%",0)+"",Ye,Ge,Xt,yt,pt,lt,Ie=Wr(l[1].data.age.perc[2021].a40to64,"%",0)+"",it,nt,Qe,De,Ve=Wr(l[1].data.age.perc[2011].a40to64,"%",0)+"",st,Ct,zt,Ke,qe,lr,vr=Wr(l[1].data.age.perc[2021].a65plus,"%",0)+"",cr,Br,Bt,xt,Ut=Wr(l[1].data.age.perc[2011].a65plus,"%",0)+"",At,Kt;return{c(){c=X("span"),f=pe("0-14 years "),_=pe(m),v=Re(),a=X("span"),I=pe("(2011 "),C=pe(k),z=pe(")"),O=X("br"),D=Re(),q=X("span"),se=pe("15-39 years "),_e=pe(Te),ke=Re(),Ce=X("span"),mt=pe("(2011 "),Ye=pe(at),Ge=pe(")"),Xt=X("br"),yt=Re(),pt=X("span"),lt=pe("40-64 years "),it=pe(Ie),nt=Re(),Qe=X("span"),De=pe("(2011 "),st=pe(Ve),Ct=pe(")"),zt=X("br"),Ke=Re(),qe=X("span"),lr=pe("65+ years "),cr=pe(vr),Br=Re(),Bt=X("span"),xt=pe("(2011 "),At=pe(Ut),Kt=pe(")"),this.h()},l(It){c=W(It,"SPAN",{class:!0});var Jt=Q(c);f=fe(Jt,"0-14 years "),_=fe(Jt,m),v=Be(Jt),Jt.forEach(M),a=W(It,"SPAN",{class:!0,style:!0});var vt=Q(a);I=fe(vt,"(2011 "),C=fe(vt,k),z=fe(vt,")"),vt.forEach(M),O=W(It,"BR",{}),D=Be(It),q=W(It,"SPAN",{class:!0});var fr=Q(q);se=fe(fr,"15-39 years "),_e=fe(fr,Te),ke=Be(fr),fr.forEach(M),Ce=W(It,"SPAN",{class:!0,style:!0});var yr=Q(Ce);mt=fe(yr,"(2011 "),Ye=fe(yr,at),Ge=fe(yr,")"),yr.forEach(M),Xt=W(It,"BR",{}),yt=Be(It),pt=W(It,"SPAN",{class:!0});var bt=Q(pt);lt=fe(bt,"40-64 years "),it=fe(bt,Ie),nt=Be(bt),bt.forEach(M),Qe=W(It,"SPAN",{class:!0,style:!0});var gr=Q(Qe);De=fe(gr,"(2011 "),st=fe(gr,Ve),Ct=fe(gr,")"),gr.forEach(M),zt=W(It,"BR",{}),Ke=Be(It),qe=W(It,"SPAN",{class:!0});var hr=Q(qe);lr=fe(hr,"65+ years "),cr=fe(hr,vr),Br=Be(hr),hr.forEach(M),Bt=W(It,"SPAN",{class:!0,style:!0});var dr=Q(Bt);xt=fe(dr,"(2011 "),At=fe(dr,Ut),Kt=fe(dr,")"),dr.forEach(M),this.h()},h(){L(c,"class","text-small"),L(a,"class","text-small"),he(a,"color","#3878C5"),L(q,"class","text-small"),L(Ce,"class","text-small"),he(Ce,"color","#3878C5"),L(pt,"class","text-small"),L(Qe,"class","text-small"),he(Qe,"color","#3878C5"),L(qe,"class","text-small"),L(Bt,"class","text-small"),he(Bt,"color","#3878C5")},m(It,Jt){xe(It,c,Jt),P(c,f),P(c,_),P(c,v),xe(It,a,Jt),P(a,I),P(a,C),P(a,z),xe(It,O,Jt),xe(It,D,Jt),xe(It,q,Jt),P(q,se),P(q,_e),P(q,ke),xe(It,Ce,Jt),P(Ce,mt),P(Ce,Ye),P(Ce,Ge),xe(It,Xt,Jt),xe(It,yt,Jt),xe(It,pt,Jt),P(pt,lt),P(pt,it),P(pt,nt),xe(It,Qe,Jt),P(Qe,De),P(Qe,st),P(Qe,Ct),xe(It,zt,Jt),xe(It,Ke,Jt),xe(It,qe,Jt),P(qe,lr),P(qe,cr),P(qe,Br),xe(It,Bt,Jt),P(Bt,xt),P(Bt,At),P(Bt,Kt)},p(It,Jt){Jt[0]&2&&m!==(m=Wr(It[1].data.age.perc[2021].a0to14,"%",0)+"")&&Ht(_,m),Jt[0]&2&&k!==(k=Wr(It[1].data.age.perc[2011].a0to14,"%",0)+"")&&Ht(C,k),Jt[0]&2&&Te!==(Te=Wr(It[1].data.age.perc[2021].a15to39,"%",0)+"")&&Ht(_e,Te),Jt[0]&2&&at!==(at=Wr(It[1].data.age.perc[2011].a15to39,"%",0)+"")&&Ht(Ye,at),Jt[0]&2&&Ie!==(Ie=Wr(It[1].data.age.perc[2021].a40to64,"%",0)+"")&&Ht(it,Ie),Jt[0]&2&&Ve!==(Ve=Wr(It[1].data.age.perc[2011].a40to64,"%",0)+"")&&Ht(st,Ve),Jt[0]&2&&vr!==(vr=Wr(It[1].data.age.perc[2021].a65plus,"%",0)+"")&&Ht(cr,vr),Jt[0]&2&&Ut!==(Ut=Wr(It[1].data.age.perc[2011].a65plus,"%",0)+"")&&Ht(At,Ut)},d(It){It&&M(c),It&&M(a),It&&M(O),It&&M(D),It&&M(q),It&&M(Ce),It&&M(Xt),It&&M(yt),It&&M(pt),It&&M(Qe),It&&M(zt),It&&M(Ke),It&&M(qe),It&&M(Bt)}}}function K0(l){let c,f,m=Wr(l[1].data.age.perc[2021].a0to14,"%",0)+"",_,v,a,I,k,C,z,O=Wr(l[1].data.age.perc[2021].a15to39,"%",0)+"",D,q,se,Te,_e,ke,Ce,mt=Wr(l[1].data.age.perc[2021].a40to64,"%",0)+"",at,Ye,Ge,Xt,yt,pt,lt,Ie=Wr(l[1].data.age.perc[2021].a65plus,"%",0)+"",it,nt,Qe;return{c(){c=X("span"),f=pe("0-14 years "),_=pe(m),v=Re(),a=X("span"),I=X("br"),k=Re(),C=X("span"),z=pe("15-39 years "),D=pe(O),q=Re(),se=X("span"),Te=X("br"),_e=Re(),ke=X("span"),Ce=pe("40-64 years "),at=pe(mt),Ye=Re(),Ge=X("span"),Xt=X("br"),yt=Re(),pt=X("span"),lt=pe("65+ years "),it=pe(Ie),nt=Re(),Qe=X("span"),this.h()},l(De){c=W(De,"SPAN",{class:!0});var Ve=Q(c);f=fe(Ve,"0-14 years "),_=fe(Ve,m),v=Be(Ve),Ve.forEach(M),a=W(De,"SPAN",{class:!0,style:!0}),Q(a).forEach(M),I=W(De,"BR",{}),k=Be(De),C=W(De,"SPAN",{class:!0});var st=Q(C);z=fe(st,"15-39 years "),D=fe(st,O),q=Be(st),st.forEach(M),se=W(De,"SPAN",{class:!0,style:!0}),Q(se).forEach(M),Te=W(De,"BR",{}),_e=Be(De),ke=W(De,"SPAN",{class:!0});var Ct=Q(ke);Ce=fe(Ct,"40-64 years "),at=fe(Ct,mt),Ye=Be(Ct),Ct.forEach(M),Ge=W(De,"SPAN",{class:!0,style:!0}),Q(Ge).forEach(M),Xt=W(De,"BR",{}),yt=Be(De),pt=W(De,"SPAN",{class:!0});var zt=Q(pt);lt=fe(zt,"65+ years "),it=fe(zt,Ie),nt=Be(zt),zt.forEach(M),Qe=W(De,"SPAN",{class:!0,style:!0}),Q(Qe).forEach(M),this.h()},h(){L(c,"class","text-small"),L(a,"class","text-small"),he(a,"color","#3878C5"),L(C,"class","text-small"),L(se,"class","text-small"),he(se,"color","#3878C5"),L(ke,"class","text-small"),L(Ge,"class","text-small"),he(Ge,"color","#3878C5"),L(pt,"class","text-small"),L(Qe,"class","text-small"),he(Qe,"color","#3878C5")},m(De,Ve){xe(De,c,Ve),P(c,f),P(c,_),P(c,v),xe(De,a,Ve),xe(De,I,Ve),xe(De,k,Ve),xe(De,C,Ve),P(C,z),P(C,D),P(C,q),xe(De,se,Ve),xe(De,Te,Ve),xe(De,_e,Ve),xe(De,ke,Ve),P(ke,Ce),P(ke,at),P(ke,Ye),xe(De,Ge,Ve),xe(De,Xt,Ve),xe(De,yt,Ve),xe(De,pt,Ve),P(pt,lt),P(pt,it),P(pt,nt),xe(De,Qe,Ve)},p(De,Ve){Ve[0]&2&&m!==(m=Wr(De[1].data.age.perc[2021].a0to14,"%",0)+"")&&Ht(_,m),Ve[0]&2&&O!==(O=Wr(De[1].data.age.perc[2021].a15to39,"%",0)+"")&&Ht(D,O),Ve[0]&2&&mt!==(mt=Wr(De[1].data.age.perc[2021].a40to64,"%",0)+"")&&Ht(at,mt),Ve[0]&2&&Ie!==(Ie=Wr(De[1].data.age.perc[2021].a65plus,"%",0)+"")&&Ht(it,Ie)},d(De){De&&M(c),De&&M(a),De&&M(I),De&&M(k),De&&M(C),De&&M(se),De&&M(Te),De&&M(_e),De&&M(ke),De&&M(Ge),De&&M(Xt),De&&M(yt),De&&M(pt),De&&M(Qe)}}}function qm(l){let c,f,m=Wr(l[2].data.age.perc[2021].a0to14,"%",0)+"",_,v;return{c(){c=X("span"),f=pe("(NI "),_=pe(m),v=pe(")"),this.h()},l(a){c=W(a,"SPAN",{class:!0,style:!0});var I=Q(c);f=fe(I,"(NI "),_=fe(I,m),v=fe(I,")"),I.forEach(M),this.h()},h(){L(c,"class","text-small"),he(c,"color","#3878C5")},m(a,I){xe(a,c,I),P(c,f),P(c,_),P(c,v)},p(a,I){I[0]&4&&m!==(m=Wr(a[2].data.age.perc[2021].a0to14,"%",0)+"")&&Ht(_,m)},d(a){a&&M(c)}}}function Zm(l){let c,f,m=Wr(l[2].data.age.perc[2021].a15to39,"%",0)+"",_,v;return{c(){c=X("span"),f=pe("(NI "),_=pe(m),v=pe(")"),this.h()},l(a){c=W(a,"SPAN",{class:!0,style:!0});var I=Q(c);f=fe(I,"(NI "),_=fe(I,m),v=fe(I,")"),I.forEach(M),this.h()},h(){L(c,"class","text-small"),he(c,"color","#3878C5")},m(a,I){xe(a,c,I),P(c,f),P(c,_),P(c,v)},p(a,I){I[0]&4&&m!==(m=Wr(a[2].data.age.perc[2021].a15to39,"%",0)+"")&&Ht(_,m)},d(a){a&&M(c)}}}function Gm(l){let c,f,m=Wr(l[2].data.age.perc[2021].a40to64,"%",0)+"",_,v;return{c(){c=X("span"),f=pe("(NI "),_=pe(m),v=pe(")"),this.h()},l(a){c=W(a,"SPAN",{class:!0,style:!0});var I=Q(c);f=fe(I,"(NI "),_=fe(I,m),v=fe(I,")"),I.forEach(M),this.h()},h(){L(c,"class","text-small"),he(c,"color","#3878C5")},m(a,I){xe(a,c,I),P(c,f),P(c,_),P(c,v)},p(a,I){I[0]&4&&m!==(m=Wr(a[2].data.age.perc[2021].a40to64,"%",0)+"")&&Ht(_,m)},d(a){a&&M(c)}}}function Km(l){let c,f,m=Wr(l[2].data.age.perc[2021].a65plus,"%",0)+"",_,v;return{c(){c=X("span"),f=pe("(NI "),_=pe(m),v=pe(")"),this.h()},l(a){c=W(a,"SPAN",{class:!0,style:!0});var I=Q(c);f=fe(I,"(NI "),_=fe(I,m),v=fe(I,")"),I.forEach(M),this.h()},h(){L(c,"class","text-small"),he(c,"color","#3878C5")},m(a,I){xe(a,c,I),P(c,f),P(c,_),P(c,v)},p(a,I){I[0]&4&&m!==(m=Wr(a[2].data.age.perc[2021].a65plus,"%",0)+"")&&Ht(_,m)},d(a){a&&M(c)}}}function Hm(l){let c,f,m,_,v=l[1].name+"",a,I,k,C,z,O,D,q,se,Te=" &#x24D8; ",_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De=" &#x24D8; ",Ve,st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,Ut,At,Kt,It=" &#x24D8; ",Jt,vt,fr,yr,bt,gr,hr,dr,$e,Lt,Wt;return yt=new ua({props:{data:l[1]&&l[18](["cob","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),cr=new ua({props:{data:l[1]&&l[18](["passport","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),$e=new ua({props:{data:l[1]&&l[18](["natid","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),{c(){c=X("div"),f=X("h2"),m=pe("Country of Birth & Nationality "),_=X("span"),a=pe(v),I=pe(" - Census 2021"),k=Re(),C=X("div"),z=X("div"),O=X("div"),D=X("div"),q=pe("Country of birth"),se=X("span"),_e=Re(),ke=X("div"),Ce=X("div"),mt=pe("The country in which a person was born. "),at=X("a"),Ye=X("strong"),Ge=pe("Statistical bulletins"),Xt=Re(),Fr(yt.$$.fragment),pt=Re(),lt=X("div"),Ie=X("div"),it=X("div"),nt=pe("Passport(s) held"),Qe=X("span"),Ve=Re(),st=X("div"),Ct=X("div"),zt=pe("Passport or passports that an individual holds. "),Ke=X("a"),qe=X("strong"),lr=pe("Statistical bulletins"),vr=Re(),Fr(cr.$$.fragment),Br=Re(),Bt=X("div"),xt=X("div"),Ut=X("div"),At=pe("National identity (person based)"),Kt=X("span"),Jt=Re(),vt=X("div"),fr=X("div"),yr=pe(`The nationality or nationalities that the person
							identifies with. `),bt=X("a"),gr=X("strong"),hr=pe("Statistical bulletins"),dr=Re(),Fr($e.$$.fragment),this.h()},l(Se){c=W(Se,"DIV",{style:!0});var We=Q(c);f=W(We,"H2",{class:!0});var qt=Q(f);m=fe(qt,"Country of Birth & Nationality "),_=W(qt,"SPAN",{class:!0});var Mt=Q(_);a=fe(Mt,v),I=fe(Mt," - Census 2021"),Mt.forEach(M),qt.forEach(M),We.forEach(M),k=Be(Se),C=W(Se,"DIV",{class:!0});var tr=Q(C);z=W(tr,"DIV",{class:!0});var Dr=Q(z);O=W(Dr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ri=Q(O);D=W(ri,"DIV",{class:!0,style:!0});var Yt=Q(D);q=fe(Yt,"Country of birth"),se=W(Yt,"SPAN",{style:!0});var Er=Q(se);Er.forEach(M),Yt.forEach(M),ri.forEach(M),_e=Be(Dr),ke=W(Dr,"DIV",{class:!0,id:!0});var Gr=Q(ke);Ce=W(Gr,"DIV",{class:!0});var Xr=Q(Ce);mt=fe(Xr,"The country in which a person was born. "),at=W(Xr,"A",{href:!0,class:!0});var ai=Q(at);Ye=W(ai,"STRONG",{});var si=Q(Ye);Ge=fe(si,"Statistical bulletins"),si.forEach(M),ai.forEach(M),Xr.forEach(M),Gr.forEach(M),Xt=Be(Dr),Nr(yt.$$.fragment,Dr),Dr.forEach(M),pt=Be(tr),lt=W(tr,"DIV",{class:!0});var Cr=Q(lt);Ie=W(Cr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var qr=Q(Ie);it=W(qr,"DIV",{class:!0,style:!0});var Sr=Q(it);nt=fe(Sr,"Passport(s) held"),Qe=W(Sr,"SPAN",{style:!0});var ei=Q(Qe);ei.forEach(M),Sr.forEach(M),qr.forEach(M),Ve=Be(Cr),st=W(Cr,"DIV",{class:!0,id:!0});var Yr=Q(st);Ct=W(Yr,"DIV",{class:!0});var kt=Q(Ct);zt=fe(kt,"Passport or passports that an individual holds. "),Ke=W(kt,"A",{href:!0,class:!0});var kr=Q(Ke);qe=W(kr,"STRONG",{});var pi=Q(qe);lr=fe(pi,"Statistical bulletins"),pi.forEach(M),kr.forEach(M),kt.forEach(M),Yr.forEach(M),vr=Be(Cr),Nr(cr.$$.fragment,Cr),Cr.forEach(M),Br=Be(tr),Bt=W(tr,"DIV",{class:!0});var Mr=Q(Bt);xt=W(Mr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var rr=Q(xt);Ut=W(rr,"DIV",{class:!0,style:!0});var F=Q(Ut);At=fe(F,"National identity (person based)"),Kt=W(F,"SPAN",{style:!0});var j=Q(Kt);j.forEach(M),F.forEach(M),rr.forEach(M),Jt=Be(Mr),vt=W(Mr,"DIV",{class:!0,id:!0});var G=Q(vt);fr=W(G,"DIV",{class:!0});var Y=Q(fr);yr=fe(Y,`The nationality or nationalities that the person
							identifies with. `),bt=W(Y,"A",{href:!0,class:!0});var te=Q(bt);gr=W(te,"STRONG",{});var ue=Q(gr);hr=fe(ue,"Statistical bulletins"),ue.forEach(M),te.forEach(M),Y.forEach(M),G.forEach(M),dr=Be(Mr),Nr($e.$$.fragment,Mr),Mr.forEach(M),tr.forEach(M),this.h()},h(){L(_,"class","title-inset muted svelte-1dy7mjs"),L(f,"class","svelte-1dy7mjs"),he(c,"grid-column","span "+l[5]),he(se,"color","gray"),he(se,"font-size","14pt"),L(D,"class","blocktitle"),he(D,"margin","0"),he(D,"width","100%"),L(O,"class","row"),he(O,"display","flex"),he(O,"cursor","pointer"),L(O,"data-bs-toggle","collapse"),L(O,"data-bs-target","#cob-info"),L(O,"aria-expanded","false"),L(O,"aria-controls","cob-info"),L(at,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(at,"class","svelte-1dy7mjs"),L(Ce,"class","card card-body svelte-1dy7mjs"),L(ke,"class","collapse svelte-1dy7mjs"),L(ke,"id","cob-info"),L(z,"class","div-grey-box svelte-1dy7mjs"),he(Qe,"color","gray"),he(Qe,"font-size","14pt"),L(it,"class","blocktitle"),he(it,"margin","0"),he(it,"width","100%"),L(Ie,"class","row"),he(Ie,"display","flex"),he(Ie,"cursor","pointer"),L(Ie,"data-bs-toggle","collapse"),L(Ie,"data-bs-target","#passport-info"),L(Ie,"aria-expanded","false"),L(Ie,"aria-controls","passport-info"),L(Ke,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(Ke,"class","svelte-1dy7mjs"),L(Ct,"class","card card-body svelte-1dy7mjs"),L(st,"class","collapse svelte-1dy7mjs"),L(st,"id","passport-info"),L(lt,"class","div-grey-box svelte-1dy7mjs"),he(Kt,"color","gray"),he(Kt,"font-size","14pt"),L(Ut,"class","blocktitle"),he(Ut,"font-size","1.02em"),he(Ut,"margin","0"),he(Ut,"width","100%"),L(xt,"class","row"),he(xt,"display","flex"),he(xt,"cursor","pointer"),L(xt,"data-bs-toggle","collapse"),L(xt,"data-bs-target","#natid-info"),L(xt,"aria-expanded","false"),L(xt,"aria-controls","natid-info"),L(bt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(bt,"class","svelte-1dy7mjs"),L(fr,"class","card card-body svelte-1dy7mjs"),L(vt,"class","collapse svelte-1dy7mjs"),L(vt,"id","natid-info"),L(Bt,"class","div-grey-box svelte-1dy7mjs"),L(C,"class","grid mt svelte-1dy7mjs"),zs(()=>l[45].call(C))},m(Se,We){xe(Se,c,We),P(c,f),P(f,m),P(f,_),P(_,a),P(_,I),xe(Se,k,We),xe(Se,C,We),P(C,z),P(z,O),P(O,D),P(D,q),P(D,se),se.innerHTML=Te,P(z,_e),P(z,ke),P(ke,Ce),P(Ce,mt),P(Ce,at),P(at,Ye),P(Ye,Ge),P(z,Xt),Vr(yt,z,null),P(C,pt),P(C,lt),P(lt,Ie),P(Ie,it),P(it,nt),P(it,Qe),Qe.innerHTML=De,P(lt,Ve),P(lt,st),P(st,Ct),P(Ct,zt),P(Ct,Ke),P(Ke,qe),P(qe,lr),P(lt,vr),Vr(cr,lt,null),P(C,Br),P(C,Bt),P(Bt,xt),P(xt,Ut),P(Ut,At),P(Ut,Kt),Kt.innerHTML=It,P(Bt,Jt),P(Bt,vt),P(vt,fr),P(fr,yr),P(fr,bt),P(bt,gr),P(gr,hr),P(Bt,dr),Vr($e,Bt,null),Lt=Ps(C,l[45].bind(C)),Wt=!0},p(Se,We){(!Wt||We[0]&2)&&v!==(v=Se[1].name+"")&&Ht(a,v),(!Wt||We[0]&32)&&he(c,"grid-column","span "+Se[5]);const qt={};We[0]&2&&(qt.data=Se[1]&&Se[18](["cob","perc","2021"])),We[0]&32786&&(qt.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(qt.label=Se[17]),yt.$set(qt);const Mt={};We[0]&2&&(Mt.data=Se[1]&&Se[18](["passport","perc","2021"])),We[0]&32786&&(Mt.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(Mt.label=Se[17]),cr.$set(Mt);const tr={};We[0]&2&&(tr.data=Se[1]&&Se[18](["natid","perc","2021"])),We[0]&32786&&(tr.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(tr.label=Se[17]),$e.$set(tr)},i(Se){Wt||(rt(yt.$$.fragment,Se),rt(cr.$$.fragment,Se),rt($e.$$.fragment,Se),Wt=!0)},o(Se){wt(yt.$$.fragment,Se),wt(cr.$$.fragment,Se),wt($e.$$.fragment,Se),Wt=!1},d(Se){Se&&M(c),Se&&M(k),Se&&M(C),Ur(yt),Ur(cr),Ur($e),Lt()}}}function Xm(l){let c,f,m,_,v=l[1].name+"",a,I,k,C,z,O,D,q,se,Te=" &#x24D8; ",_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De=" &#x24D8; ",Ve,st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,Ut,At,Kt,It=" &#x24D8; ",Jt,vt,fr,yr,bt,gr,hr,dr,$e,Lt,Wt;return yt=new ua({props:{data:l[1]&&l[18](["mainlang","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),cr=new jp({props:{data:l[1]&&l[18](["irish","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17],ovrtm:l[4]}}),$e=new jp({props:{data:l[1]&&l[18](["ulster","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17],ovrtm:l[4]}}),{c(){c=X("div"),f=X("h2"),m=pe("Language  "),_=X("span"),a=pe(v),I=pe(" - Census 2021"),k=Re(),C=X("div"),z=X("div"),O=X("div"),D=X("div"),q=pe("Main language"),se=X("span"),_e=Re(),ke=X("div"),Ce=X("div"),mt=pe(`Person's main language as declared in the Census.
							Statistics for all language questions are restricted
							to persons aged 3 and over. `),at=X("a"),Ye=X("strong"),Ge=pe("Statistical bulletins"),Xt=Re(),Fr(yt.$$.fragment),pt=Re(),lt=X("div"),Ie=X("div"),it=X("div"),nt=pe("Knowledge of Irish"),Qe=X("span"),Ve=Re(),st=X("div"),Ct=X("div"),zt=pe(`A person has some ability in Irish if they can
							understand, speak, read or write Irish. Statistics
							for all language questions are restricted to persons
							aged 3 and over. `),Ke=X("a"),qe=X("strong"),lr=pe("Statistical bulletins"),vr=Re(),Fr(cr.$$.fragment),Br=Re(),Bt=X("div"),xt=X("div"),Ut=X("div"),At=pe("Knowledge of Ulster-Scots"),Kt=X("span"),Jt=Re(),vt=X("div"),fr=X("div"),yr=pe(`A person has some ability in Ulster-Scots if they
							can understand, speak, read or write Ulster-Scots.
							Statistics for all language questions are restricted
							to persons aged 3 and over. `),bt=X("a"),gr=X("strong"),hr=pe("Statistical bulletins"),dr=Re(),Fr($e.$$.fragment),this.h()},l(Se){c=W(Se,"DIV",{style:!0});var We=Q(c);f=W(We,"H2",{class:!0});var qt=Q(f);m=fe(qt,"Language  "),_=W(qt,"SPAN",{class:!0});var Mt=Q(_);a=fe(Mt,v),I=fe(Mt," - Census 2021"),Mt.forEach(M),qt.forEach(M),We.forEach(M),k=Be(Se),C=W(Se,"DIV",{class:!0});var tr=Q(C);z=W(tr,"DIV",{class:!0});var Dr=Q(z);O=W(Dr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ri=Q(O);D=W(ri,"DIV",{class:!0,style:!0});var Yt=Q(D);q=fe(Yt,"Main language"),se=W(Yt,"SPAN",{style:!0});var Er=Q(se);Er.forEach(M),Yt.forEach(M),ri.forEach(M),_e=Be(Dr),ke=W(Dr,"DIV",{class:!0,id:!0});var Gr=Q(ke);Ce=W(Gr,"DIV",{class:!0});var Xr=Q(Ce);mt=fe(Xr,`Person's main language as declared in the Census.
							Statistics for all language questions are restricted
							to persons aged 3 and over. `),at=W(Xr,"A",{href:!0,class:!0});var ai=Q(at);Ye=W(ai,"STRONG",{});var si=Q(Ye);Ge=fe(si,"Statistical bulletins"),si.forEach(M),ai.forEach(M),Xr.forEach(M),Gr.forEach(M),Xt=Be(Dr),Nr(yt.$$.fragment,Dr),Dr.forEach(M),pt=Be(tr),lt=W(tr,"DIV",{class:!0});var Cr=Q(lt);Ie=W(Cr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var qr=Q(Ie);it=W(qr,"DIV",{class:!0,style:!0});var Sr=Q(it);nt=fe(Sr,"Knowledge of Irish"),Qe=W(Sr,"SPAN",{style:!0});var ei=Q(Qe);ei.forEach(M),Sr.forEach(M),qr.forEach(M),Ve=Be(Cr),st=W(Cr,"DIV",{class:!0,id:!0});var Yr=Q(st);Ct=W(Yr,"DIV",{class:!0});var kt=Q(Ct);zt=fe(kt,`A person has some ability in Irish if they can
							understand, speak, read or write Irish. Statistics
							for all language questions are restricted to persons
							aged 3 and over. `),Ke=W(kt,"A",{href:!0,class:!0});var kr=Q(Ke);qe=W(kr,"STRONG",{});var pi=Q(qe);lr=fe(pi,"Statistical bulletins"),pi.forEach(M),kr.forEach(M),kt.forEach(M),Yr.forEach(M),vr=Be(Cr),Nr(cr.$$.fragment,Cr),Cr.forEach(M),Br=Be(tr),Bt=W(tr,"DIV",{class:!0});var Mr=Q(Bt);xt=W(Mr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var rr=Q(xt);Ut=W(rr,"DIV",{class:!0,style:!0});var F=Q(Ut);At=fe(F,"Knowledge of Ulster-Scots"),Kt=W(F,"SPAN",{style:!0});var j=Q(Kt);j.forEach(M),F.forEach(M),rr.forEach(M),Jt=Be(Mr),vt=W(Mr,"DIV",{class:!0,id:!0});var G=Q(vt);fr=W(G,"DIV",{class:!0});var Y=Q(fr);yr=fe(Y,`A person has some ability in Ulster-Scots if they
							can understand, speak, read or write Ulster-Scots.
							Statistics for all language questions are restricted
							to persons aged 3 and over. `),bt=W(Y,"A",{href:!0,class:!0});var te=Q(bt);gr=W(te,"STRONG",{});var ue=Q(gr);hr=fe(ue,"Statistical bulletins"),ue.forEach(M),te.forEach(M),Y.forEach(M),G.forEach(M),dr=Be(Mr),Nr($e.$$.fragment,Mr),Mr.forEach(M),tr.forEach(M),this.h()},h(){L(_,"class","title-inset muted svelte-1dy7mjs"),L(f,"class","svelte-1dy7mjs"),he(c,"grid-column","span "+l[5]),he(se,"color","gray"),he(se,"font-size","14pt"),L(D,"class","blocktitle"),he(D,"margin","0"),he(D,"width","100%"),L(O,"class","row"),he(O,"display","flex"),he(O,"cursor","pointer"),L(O,"data-bs-toggle","collapse"),L(O,"data-bs-target","#mainlang-info"),L(O,"aria-expanded","false"),L(O,"aria-controls","mainlang-info"),L(at,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(at,"class","svelte-1dy7mjs"),L(Ce,"class","card card-body svelte-1dy7mjs"),L(ke,"class","collapse svelte-1dy7mjs"),L(ke,"id","mainlang-info"),L(z,"class","div-grey-box svelte-1dy7mjs"),he(Qe,"color","gray"),he(Qe,"font-size","14pt"),L(it,"class","blocktitle"),he(it,"margin","0"),he(it,"width","100%"),L(Ie,"class","row"),he(Ie,"display","flex"),he(Ie,"cursor","pointer"),L(Ie,"data-bs-toggle","collapse"),L(Ie,"data-bs-target","#irish-info"),L(Ie,"aria-expanded","false"),L(Ie,"aria-controls","irish-info"),L(Ke,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(Ke,"class","svelte-1dy7mjs"),L(Ct,"class","card card-body svelte-1dy7mjs"),L(st,"class","collapse svelte-1dy7mjs"),L(st,"id","irish-info"),L(lt,"class","div-grey-box svelte-1dy7mjs"),he(Kt,"color","gray"),he(Kt,"font-size","14pt"),L(Ut,"class","blocktitle"),he(Ut,"margin","0"),he(Ut,"width","100%"),L(xt,"class","row"),he(xt,"display","flex"),he(xt,"cursor","pointer"),L(xt,"data-bs-toggle","collapse"),L(xt,"data-bs-target","#ulster-info"),L(xt,"aria-expanded","false"),L(xt,"aria-controls","ulster-info"),L(bt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(bt,"class","svelte-1dy7mjs"),L(fr,"class","card card-body svelte-1dy7mjs"),L(vt,"class","collapse svelte-1dy7mjs"),L(vt,"id","ulster-info"),L(Bt,"class","div-grey-box svelte-1dy7mjs"),L(C,"class","grid mt svelte-1dy7mjs"),zs(()=>l[46].call(C))},m(Se,We){xe(Se,c,We),P(c,f),P(f,m),P(f,_),P(_,a),P(_,I),xe(Se,k,We),xe(Se,C,We),P(C,z),P(z,O),P(O,D),P(D,q),P(D,se),se.innerHTML=Te,P(z,_e),P(z,ke),P(ke,Ce),P(Ce,mt),P(Ce,at),P(at,Ye),P(Ye,Ge),P(z,Xt),Vr(yt,z,null),P(C,pt),P(C,lt),P(lt,Ie),P(Ie,it),P(it,nt),P(it,Qe),Qe.innerHTML=De,P(lt,Ve),P(lt,st),P(st,Ct),P(Ct,zt),P(Ct,Ke),P(Ke,qe),P(qe,lr),P(lt,vr),Vr(cr,lt,null),P(C,Br),P(C,Bt),P(Bt,xt),P(xt,Ut),P(Ut,At),P(Ut,Kt),Kt.innerHTML=It,P(Bt,Jt),P(Bt,vt),P(vt,fr),P(fr,yr),P(fr,bt),P(bt,gr),P(gr,hr),P(Bt,dr),Vr($e,Bt,null),Lt=Ps(C,l[46].bind(C)),Wt=!0},p(Se,We){(!Wt||We[0]&2)&&v!==(v=Se[1].name+"")&&Ht(a,v),(!Wt||We[0]&32)&&he(c,"grid-column","span "+Se[5]);const qt={};We[0]&2&&(qt.data=Se[1]&&Se[18](["mainlang","perc","2021"])),We[0]&32786&&(qt.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(qt.label=Se[17]),yt.$set(qt);const Mt={};We[0]&2&&(Mt.data=Se[1]&&Se[18](["irish","perc","2021"])),We[0]&32786&&(Mt.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(Mt.label=Se[17]),We[0]&16&&(Mt.ovrtm=Se[4]),cr.$set(Mt);const tr={};We[0]&2&&(tr.data=Se[1]&&Se[18](["ulster","perc","2021"])),We[0]&32786&&(tr.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(tr.label=Se[17]),We[0]&16&&(tr.ovrtm=Se[4]),$e.$set(tr)},i(Se){Wt||(rt(yt.$$.fragment,Se),rt(cr.$$.fragment,Se),rt($e.$$.fragment,Se),Wt=!0)},o(Se){wt(yt.$$.fragment,Se),wt(cr.$$.fragment,Se),wt($e.$$.fragment,Se),Wt=!1},d(Se){Se&&M(c),Se&&M(k),Se&&M(C),Ur(yt),Ur(cr),Ur($e),Lt()}}}function Wm(l){let c,f,m,_,v=l[1].name+"",a,I,k,C,z,O,D,q,se,Te=" &#x24D8; ",_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De=" &#x24D8; ",Ve,st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,Ut,At,Kt,It=" &#x24D8; ",Jt,vt,fr,yr,bt,gr,hr,dr,$e,Lt,Wt;return yt=new ua({props:{data:l[1]&&l[18](["religion","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),cr=new ua({props:{data:l[1]&&l[18](["religion_or_religion_brought_up_in","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),$e=new ua({props:{data:l[1]&&l[18](["ethnic","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),{c(){c=X("div"),f=X("h2"),m=pe("Religion & Ethnicity  "),_=X("span"),a=pe(v),I=pe(" - Census 2021"),k=Re(),C=X("div"),z=X("div"),O=X("div"),D=X("div"),q=pe("Religion"),se=X("span"),_e=Re(),ke=X("div"),Ce=X("div"),mt=pe(`Religion, religious denomination or body the person
							indicated they belong to. `),at=X("a"),Ye=X("strong"),Ge=pe("Statistical bulletins"),Xt=Re(),Fr(yt.$$.fragment),pt=Re(),lt=X("div"),Ie=X("div"),it=X("div"),nt=pe("Religion, Religion brought up"),Qe=X("span"),Ve=Re(),st=X("div"),Ct=X("div"),zt=pe("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Ke=X("a"),qe=X("strong"),lr=pe("Statistical bulletins"),vr=Re(),Fr(cr.$$.fragment),Br=Re(),Bt=X("div"),xt=X("div"),Ut=X("div"),At=pe("Ethnic group"),Kt=X("span"),Jt=Re(),vt=X("div"),fr=X("div"),yr=pe("Person\u2019s ethnic group as declared in the Census. "),bt=X("a"),gr=X("strong"),hr=pe("Statistical bulletins"),dr=Re(),Fr($e.$$.fragment),this.h()},l(Se){c=W(Se,"DIV",{style:!0});var We=Q(c);f=W(We,"H2",{class:!0});var qt=Q(f);m=fe(qt,"Religion & Ethnicity  "),_=W(qt,"SPAN",{class:!0});var Mt=Q(_);a=fe(Mt,v),I=fe(Mt," - Census 2021"),Mt.forEach(M),qt.forEach(M),We.forEach(M),k=Be(Se),C=W(Se,"DIV",{class:!0});var tr=Q(C);z=W(tr,"DIV",{class:!0});var Dr=Q(z);O=W(Dr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ri=Q(O);D=W(ri,"DIV",{class:!0,style:!0});var Yt=Q(D);q=fe(Yt,"Religion"),se=W(Yt,"SPAN",{style:!0});var Er=Q(se);Er.forEach(M),Yt.forEach(M),ri.forEach(M),_e=Be(Dr),ke=W(Dr,"DIV",{class:!0,id:!0});var Gr=Q(ke);Ce=W(Gr,"DIV",{class:!0});var Xr=Q(Ce);mt=fe(Xr,`Religion, religious denomination or body the person
							indicated they belong to. `),at=W(Xr,"A",{href:!0,class:!0});var ai=Q(at);Ye=W(ai,"STRONG",{});var si=Q(Ye);Ge=fe(si,"Statistical bulletins"),si.forEach(M),ai.forEach(M),Xr.forEach(M),Gr.forEach(M),Xt=Be(Dr),Nr(yt.$$.fragment,Dr),Dr.forEach(M),pt=Be(tr),lt=W(tr,"DIV",{class:!0});var Cr=Q(lt);Ie=W(Cr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var qr=Q(Ie);it=W(qr,"DIV",{class:!0,style:!0});var Sr=Q(it);nt=fe(Sr,"Religion, Religion brought up"),Qe=W(Sr,"SPAN",{style:!0});var ei=Q(Qe);ei.forEach(M),Sr.forEach(M),qr.forEach(M),Ve=Be(Cr),st=W(Cr,"DIV",{class:!0,id:!0});var Yr=Q(st);Ct=W(Yr,"DIV",{class:!0});var kt=Q(Ct);zt=fe(kt,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Ke=W(kt,"A",{href:!0,class:!0});var kr=Q(Ke);qe=W(kr,"STRONG",{});var pi=Q(qe);lr=fe(pi,"Statistical bulletins"),pi.forEach(M),kr.forEach(M),kt.forEach(M),Yr.forEach(M),vr=Be(Cr),Nr(cr.$$.fragment,Cr),Cr.forEach(M),Br=Be(tr),Bt=W(tr,"DIV",{class:!0});var Mr=Q(Bt);xt=W(Mr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var rr=Q(xt);Ut=W(rr,"DIV",{class:!0,style:!0});var F=Q(Ut);At=fe(F,"Ethnic group"),Kt=W(F,"SPAN",{style:!0});var j=Q(Kt);j.forEach(M),F.forEach(M),rr.forEach(M),Jt=Be(Mr),vt=W(Mr,"DIV",{class:!0,id:!0});var G=Q(vt);fr=W(G,"DIV",{class:!0});var Y=Q(fr);yr=fe(Y,"Person\u2019s ethnic group as declared in the Census. "),bt=W(Y,"A",{href:!0,class:!0});var te=Q(bt);gr=W(te,"STRONG",{});var ue=Q(gr);hr=fe(ue,"Statistical bulletins"),ue.forEach(M),te.forEach(M),Y.forEach(M),G.forEach(M),dr=Be(Mr),Nr($e.$$.fragment,Mr),Mr.forEach(M),tr.forEach(M),this.h()},h(){L(_,"class","title-inset muted svelte-1dy7mjs"),L(f,"class","svelte-1dy7mjs"),he(c,"grid-column","span "+l[5]),he(se,"color","gray"),he(se,"font-size","14pt"),L(D,"class","blocktitle"),he(D,"margin","0"),he(D,"width","100%"),L(O,"class","row"),he(O,"display","flex"),he(O,"cursor","pointer"),L(O,"data-bs-toggle","collapse"),L(O,"data-bs-target","#rel-info"),L(O,"aria-expanded","false"),L(O,"aria-controls","rel-info"),L(at,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(at,"class","svelte-1dy7mjs"),L(Ce,"class","card card-body svelte-1dy7mjs"),L(ke,"class","collapse svelte-1dy7mjs"),L(ke,"id","rel-info"),L(z,"class","div-grey-box svelte-1dy7mjs"),he(Qe,"color","gray"),he(Qe,"font-size","14pt"),L(it,"class","blocktitle"),he(it,"margin","0"),he(it,"width","100%"),L(Ie,"class","row"),he(Ie,"display","flex"),he(Ie,"cursor","pointer"),L(Ie,"data-bs-toggle","collapse"),L(Ie,"data-bs-target","#relbup-info"),L(Ie,"aria-expanded","false"),L(Ie,"aria-controls","relbup-info"),L(Ke,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(Ke,"class","svelte-1dy7mjs"),L(Ct,"class","card card-body svelte-1dy7mjs"),L(st,"class","collapse svelte-1dy7mjs"),L(st,"id","relbup-info"),L(lt,"class","div-grey-box svelte-1dy7mjs"),he(Kt,"color","gray"),he(Kt,"font-size","14pt"),L(Ut,"class","blocktitle"),he(Ut,"margin","0"),he(Ut,"width","100%"),L(xt,"class","row"),he(xt,"display","flex"),he(xt,"cursor","pointer"),L(xt,"data-bs-toggle","collapse"),L(xt,"data-bs-target","#ethnic-info"),L(xt,"aria-expanded","false"),L(xt,"aria-controls","ethnic-info"),L(bt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(bt,"class","svelte-1dy7mjs"),L(fr,"class","card card-body svelte-1dy7mjs"),L(vt,"class","collapse svelte-1dy7mjs"),L(vt,"id","ethnic-info"),L(Bt,"class","div-grey-box svelte-1dy7mjs"),L(C,"class","grid mt svelte-1dy7mjs"),zs(()=>l[47].call(C))},m(Se,We){xe(Se,c,We),P(c,f),P(f,m),P(f,_),P(_,a),P(_,I),xe(Se,k,We),xe(Se,C,We),P(C,z),P(z,O),P(O,D),P(D,q),P(D,se),se.innerHTML=Te,P(z,_e),P(z,ke),P(ke,Ce),P(Ce,mt),P(Ce,at),P(at,Ye),P(Ye,Ge),P(z,Xt),Vr(yt,z,null),P(C,pt),P(C,lt),P(lt,Ie),P(Ie,it),P(it,nt),P(it,Qe),Qe.innerHTML=De,P(lt,Ve),P(lt,st),P(st,Ct),P(Ct,zt),P(Ct,Ke),P(Ke,qe),P(qe,lr),P(lt,vr),Vr(cr,lt,null),P(C,Br),P(C,Bt),P(Bt,xt),P(xt,Ut),P(Ut,At),P(Ut,Kt),Kt.innerHTML=It,P(Bt,Jt),P(Bt,vt),P(vt,fr),P(fr,yr),P(fr,bt),P(bt,gr),P(gr,hr),P(Bt,dr),Vr($e,Bt,null),Lt=Ps(C,l[47].bind(C)),Wt=!0},p(Se,We){(!Wt||We[0]&2)&&v!==(v=Se[1].name+"")&&Ht(a,v),(!Wt||We[0]&32)&&he(c,"grid-column","span "+Se[5]);const qt={};We[0]&2&&(qt.data=Se[1]&&Se[18](["religion","perc","2021"])),We[0]&32786&&(qt.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(qt.label=Se[17]),yt.$set(qt);const Mt={};We[0]&2&&(Mt.data=Se[1]&&Se[18](["religion_or_religion_brought_up_in","perc","2021"])),We[0]&32786&&(Mt.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(Mt.label=Se[17]),cr.$set(Mt);const tr={};We[0]&2&&(tr.data=Se[1]&&Se[18](["ethnic","perc","2021"])),We[0]&32786&&(tr.zKey=Se[15]?null:Se[4]?"prev":!Se[4]&&Se[1].type!="ew"?"ew":null),We[0]&131072&&(tr.label=Se[17]),$e.$set(tr)},i(Se){Wt||(rt(yt.$$.fragment,Se),rt(cr.$$.fragment,Se),rt($e.$$.fragment,Se),Wt=!0)},o(Se){wt(yt.$$.fragment,Se),wt(cr.$$.fragment,Se),wt($e.$$.fragment,Se),Wt=!1},d(Se){Se&&M(c),Se&&M(k),Se&&M(C),Ur(yt),Ur(cr),Ur($e),Lt()}}}function Jm(l){let c,f,m,_,v=l[1].name+"",a,I,k,C,z,O,D,q,se,Te=" &#x24D8; ",_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De,Ve=" &#x24D8; ",st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,Ut,At,Kt,It,Jt=" &#x24D8; ",vt,fr,yr,bt,gr,hr,dr,$e,Lt,Wt,Se,We,qt,Mt,tr,Dr,ri=" &#x24D8; ",Yt,Er,Gr,Xr,ai,si,Cr,qr,Sr,ei,Yr;return pt=new ua({props:{data:l[1]&&l[18](["general_health","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),Br=new ua({props:{data:l[1]&&l[18](["long_term_disability","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),Wt=new ua({props:{data:l[1]&&l[18](["number_of_long_term_health","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),Sr=new ua({props:{data:l[1]&&l[18](["provision_care","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),{c(){c=X("div"),f=X("h2"),m=pe("Health & Care "),_=X("span"),a=pe(v),I=pe(" - Census 2021"),k=Re(),C=X("div"),z=X("div"),O=X("div"),D=X("div"),q=pe("General health"),se=X("span"),_e=X("br"),ke=Re(),Ce=X("div"),mt=X("div"),at=pe(`General health is a self-assessment of a
								person\u2019s general state of health. It is not
								based over any specified period of time.
								`),Ye=X("a"),Ge=X("strong"),Xt=pe("Statistical bulletins"),yt=Re(),Fr(pt.$$.fragment),lt=Re(),Ie=X("div"),it=X("div"),nt=X("div"),Qe=pe("Long-term health problem or disability"),De=X("span"),st=Re(),Ct=X("div"),zt=X("div"),Ke=pe("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),qe=X("a"),lr=X("strong"),vr=pe("Statistical bulletins"),cr=Re(),Fr(Br.$$.fragment),Bt=Re(),xt=X("div"),Ut=X("div"),At=X("div"),Kt=pe("Long-term health conditions"),It=X("span"),vt=X("br"),fr=Re(),yr=X("div"),bt=X("div"),gr=pe(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.
						`),hr=X("a"),dr=X("strong"),$e=pe("Statistical bulletins"),Lt=Re(),Fr(Wt.$$.fragment),Se=Re(),We=X("div"),qt=X("div"),Mt=X("div"),tr=pe("Unpaid care"),Dr=X("span"),Yt=Re(),Er=X("div"),Gr=X("div"),Xr=pe(`'Unpaid care' covers looking after, giving help
								or support to anyone because they have long-term
								physical or mental health conditions or
								illnesses, or problems related to old age. It
								does not include any activities as part of paid
								employment.
								`),ai=X("a"),si=X("strong"),Cr=pe("Statistical bulletins"),qr=Re(),Fr(Sr.$$.fragment),this.h()},l(kt){c=W(kt,"DIV",{style:!0});var kr=Q(c);f=W(kr,"H2",{class:!0});var pi=Q(f);m=fe(pi,"Health & Care "),_=W(pi,"SPAN",{class:!0});var Mr=Q(_);a=fe(Mr,v),I=fe(Mr," - Census 2021"),Mr.forEach(M),pi.forEach(M),kr.forEach(M),k=Be(kt),C=W(kt,"DIV",{class:!0});var rr=Q(C);z=W(rr,"DIV",{class:!0});var F=Q(z);O=W(F,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var j=Q(O);D=W(j,"DIV",{class:!0,style:!0});var G=Q(D);q=fe(G,"General health"),se=W(G,"SPAN",{style:!0});var Y=Q(se);Y.forEach(M),_e=W(G,"BR",{}),G.forEach(M),j.forEach(M),ke=Be(F),Ce=W(F,"DIV",{class:!0,id:!0});var te=Q(Ce);mt=W(te,"DIV",{class:!0});var ue=Q(mt);at=fe(ue,`General health is a self-assessment of a
								person\u2019s general state of health. It is not
								based over any specified period of time.
								`),Ye=W(ue,"A",{href:!0,class:!0});var ge=Q(Ye);Ge=W(ge,"STRONG",{});var K=Q(Ge);Xt=fe(K,"Statistical bulletins"),K.forEach(M),ge.forEach(M),ue.forEach(M),te.forEach(M),yt=Be(F),Nr(pt.$$.fragment,F),F.forEach(M),lt=Be(rr),Ie=W(rr,"DIV",{class:!0});var re=Q(Ie);it=W(re,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var we=Q(it);nt=W(we,"DIV",{class:!0,style:!0});var Ze=Q(nt);Qe=fe(Ze,"Long-term health problem or disability"),De=W(Ze,"SPAN",{style:!0});var Je=Q(De);Je.forEach(M),Ze.forEach(M),we.forEach(M),st=Be(re),Ct=W(re,"DIV",{class:!0,id:!0});var ze=Q(Ct);zt=W(ze,"DIV",{class:!0});var He=Q(zt);Ke=fe(He,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),qe=W(He,"A",{href:!0,class:!0});var St=Q(qe);lr=W(St,"STRONG",{});var gt=Q(lr);vr=fe(gt,"Statistical bulletins"),gt.forEach(M),St.forEach(M),He.forEach(M),ze.forEach(M),cr=Be(re),Nr(Br.$$.fragment,re),re.forEach(M),Bt=Be(rr),xt=W(rr,"DIV",{class:!0});var Le=Q(xt);Ut=W(Le,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ft=Q(Ut);At=W(ft,"DIV",{class:!0,style:!0});var ot=Q(At);Kt=fe(ot,"Long-term health conditions"),It=W(ot,"SPAN",{style:!0});var ht=Q(It);ht.forEach(M),vt=W(ot,"BR",{}),ot.forEach(M),ft.forEach(M),fr=Be(Le),yr=W(Le,"DIV",{class:!0,id:!0});var $t=Q(yr);bt=W($t,"DIV",{class:!0});var ut=Q(bt);gr=fe(ut,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.
						`),hr=W(ut,"A",{href:!0,class:!0});var mr=Q(hr);dr=W(mr,"STRONG",{});var Kr=Q(dr);$e=fe(Kr,"Statistical bulletins"),Kr.forEach(M),mr.forEach(M),ut.forEach(M),$t.forEach(M),Lt=Be(Le),Nr(Wt.$$.fragment,Le),Le.forEach(M),Se=Be(rr),We=W(rr,"DIV",{class:!0});var er=Q(We);qt=W(er,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var et=Q(qt);Mt=W(et,"DIV",{class:!0,style:!0});var Nt=Q(Mt);tr=fe(Nt,"Unpaid care"),Dr=W(Nt,"SPAN",{style:!0});var li=Q(Dr);li.forEach(M),Nt.forEach(M),et.forEach(M),Yt=Be(er),Er=W(er,"DIV",{class:!0,id:!0});var Ir=Q(Er);Gr=W(Ir,"DIV",{class:!0});var xr=Q(Gr);Xr=fe(xr,`'Unpaid care' covers looking after, giving help
								or support to anyone because they have long-term
								physical or mental health conditions or
								illnesses, or problems related to old age. It
								does not include any activities as part of paid
								employment.
								`),ai=W(xr,"A",{href:!0,class:!0});var Ar=Q(ai);si=W(Ar,"STRONG",{});var pr=Q(si);Cr=fe(pr,"Statistical bulletins"),pr.forEach(M),Ar.forEach(M),xr.forEach(M),Ir.forEach(M),qr=Be(er),Nr(Sr.$$.fragment,er),er.forEach(M),rr.forEach(M),this.h()},h(){L(_,"class","title-inset muted svelte-1dy7mjs"),L(f,"class","svelte-1dy7mjs"),he(c,"grid-column","span "+l[5]),he(se,"color","gray"),he(se,"font-size","14pt"),L(D,"class","blocktitle"),he(D,"margin","0"),he(D,"width","100%"),L(O,"class","row"),he(O,"display","flex"),he(O,"cursor","pointer"),L(O,"data-bs-toggle","collapse"),L(O,"data-bs-target","#gen-health-info"),L(O,"aria-expanded","false"),L(O,"aria-controls","gen-health"),L(Ye,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(Ye,"class","svelte-1dy7mjs"),L(mt,"class","card card-body svelte-1dy7mjs"),L(Ce,"class","collapse svelte-1dy7mjs"),L(Ce,"id","gen-health-info"),L(z,"class","div-grey-box svelte-1dy7mjs"),he(De,"color","gray"),he(De,"font-size","14pt"),L(nt,"class","blocktitle"),he(nt,"font-size","0.90em"),he(nt,"margin","0"),he(nt,"width","100%"),L(it,"class","row"),he(it,"display","flex"),he(it,"cursor","pointer"),L(it,"data-bs-toggle","collapse"),L(it,"data-bs-target","#lti-info"),L(it,"aria-expanded","false"),L(it,"aria-controls","lti-info"),L(qe,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(qe,"class","svelte-1dy7mjs"),L(zt,"class","card card-body svelte-1dy7mjs"),L(Ct,"class","collapse svelte-1dy7mjs"),L(Ct,"id","lti-info"),L(Ie,"class","div-grey-box svelte-1dy7mjs"),he(It,"color","gray"),he(It,"font-size","14pt"),L(At,"class","blocktitle"),he(At,"font-size","1.02em"),he(At,"margin","0"),he(At,"width","100%"),L(Ut,"class","row"),he(Ut,"display","flex"),he(Ut,"cursor","pointer"),L(Ut,"data-bs-toggle","collapse"),L(Ut,"data-bs-target","#lt-cond-info"),L(Ut,"aria-expanded","false"),L(Ut,"aria-controls","lt-cond-info"),L(hr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(hr,"class","svelte-1dy7mjs"),L(bt,"class","card card-body svelte-1dy7mjs"),L(yr,"class","collapse svelte-1dy7mjs"),L(yr,"id","lt-cond-info"),L(xt,"class","div-grey-box svelte-1dy7mjs"),he(Dr,"color","gray"),he(Dr,"font-size","14pt"),L(Mt,"class","blocktitle"),he(Mt,"font-size","1.02em"),he(Mt,"margin","0"),he(Mt,"width","100%"),L(qt,"class","row"),he(qt,"display","flex"),he(qt,"cursor","pointer"),L(qt,"data-bs-toggle","collapse"),L(qt,"data-bs-target","#unpaid-info"),L(qt,"aria-expanded","false"),L(qt,"aria-controls","unpaid-info"),L(ai,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(ai,"class","svelte-1dy7mjs"),L(Gr,"class","card card-body svelte-1dy7mjs"),L(Er,"class","collapse svelte-1dy7mjs"),L(Er,"id","unpaid-info"),L(We,"class","div-grey-box svelte-1dy7mjs"),L(C,"class","grid mt svelte-1dy7mjs"),zs(()=>l[48].call(C))},m(kt,kr){xe(kt,c,kr),P(c,f),P(f,m),P(f,_),P(_,a),P(_,I),xe(kt,k,kr),xe(kt,C,kr),P(C,z),P(z,O),P(O,D),P(D,q),P(D,se),se.innerHTML=Te,P(D,_e),P(z,ke),P(z,Ce),P(Ce,mt),P(mt,at),P(mt,Ye),P(Ye,Ge),P(Ge,Xt),P(z,yt),Vr(pt,z,null),P(C,lt),P(C,Ie),P(Ie,it),P(it,nt),P(nt,Qe),P(nt,De),De.innerHTML=Ve,P(Ie,st),P(Ie,Ct),P(Ct,zt),P(zt,Ke),P(zt,qe),P(qe,lr),P(lr,vr),P(Ie,cr),Vr(Br,Ie,null),P(C,Bt),P(C,xt),P(xt,Ut),P(Ut,At),P(At,Kt),P(At,It),It.innerHTML=Jt,P(At,vt),P(xt,fr),P(xt,yr),P(yr,bt),P(bt,gr),P(bt,hr),P(hr,dr),P(dr,$e),P(xt,Lt),Vr(Wt,xt,null),P(C,Se),P(C,We),P(We,qt),P(qt,Mt),P(Mt,tr),P(Mt,Dr),Dr.innerHTML=ri,P(We,Yt),P(We,Er),P(Er,Gr),P(Gr,Xr),P(Gr,ai),P(ai,si),P(si,Cr),P(We,qr),Vr(Sr,We,null),ei=Ps(C,l[48].bind(C)),Yr=!0},p(kt,kr){(!Yr||kr[0]&2)&&v!==(v=kt[1].name+"")&&Ht(a,v),(!Yr||kr[0]&32)&&he(c,"grid-column","span "+kt[5]);const pi={};kr[0]&2&&(pi.data=kt[1]&&kt[18](["general_health","perc","2021"])),kr[0]&32786&&(pi.zKey=kt[15]?null:kt[4]?"prev":!kt[4]&&kt[1].type!="ew"?"ew":null),kr[0]&131072&&(pi.label=kt[17]),pt.$set(pi);const Mr={};kr[0]&2&&(Mr.data=kt[1]&&kt[18](["long_term_disability","perc","2021"])),kr[0]&32786&&(Mr.zKey=kt[15]?null:kt[4]?"prev":!kt[4]&&kt[1].type!="ew"?"ew":null),kr[0]&131072&&(Mr.label=kt[17]),Br.$set(Mr);const rr={};kr[0]&2&&(rr.data=kt[1]&&kt[18](["number_of_long_term_health","perc","2021"])),kr[0]&32786&&(rr.zKey=kt[15]?null:kt[4]?"prev":!kt[4]&&kt[1].type!="ew"?"ew":null),kr[0]&131072&&(rr.label=kt[17]),Wt.$set(rr);const F={};kr[0]&2&&(F.data=kt[1]&&kt[18](["provision_care","perc","2021"])),kr[0]&32786&&(F.zKey=kt[15]?null:kt[4]?"prev":!kt[4]&&kt[1].type!="ew"?"ew":null),kr[0]&131072&&(F.label=kt[17]),Sr.$set(F)},i(kt){Yr||(rt(pt.$$.fragment,kt),rt(Br.$$.fragment,kt),rt(Wt.$$.fragment,kt),rt(Sr.$$.fragment,kt),Yr=!0)},o(kt){wt(pt.$$.fragment,kt),wt(Br.$$.fragment,kt),wt(Wt.$$.fragment,kt),wt(Sr.$$.fragment,kt),Yr=!1},d(kt){kt&&M(c),kt&&M(k),kt&&M(C),Ur(pt),Ur(Br),Ur(Wt),Ur(Sr),ei()}}}function Ym(l){let c,f,m,_,v=l[1].name+"",a,I,k,C,z,O,D,q,se,Te=" &#x24D8; ",_e,ke,Ce,mt,at,Ye,Ge,Xt,yt,pt,lt,Ie,it,nt,Qe,De=" &#x24D8; ",Ve,st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,Ut,At,Kt,It=" &#x24D8; ",Jt,vt,fr,yr,bt,gr,hr,dr,$e,Lt,Wt,Se,We,qt,Mt,tr=" &#x24D8; ",Dr,ri,Yt,Er,Gr,Xr,ai,si,Cr,qr,Sr,ei,Yr,kt,kr,pi=" &#x24D8; ",Mr,rr,F,j,G,Y,te,ue,ge,K,re,we,Ze,Je,ze,He=" &#x24D8; ",St,gt,Le,ft,ot,ht,$t,ut,mr,Kr,er;return yt=new ua({props:{data:l[1]&&l[18](["accommodation_type","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),cr=new ua({props:{data:l[1]&&l[18](["number_of_adaptations","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),$e=new ua({props:{data:l[1]&&l[18](["central_heating","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),Cr=new jp({props:{data:l[1]&&l[18](["renewable_energy","perc","2021"]),zKey:!l[15]&&!l[4]&&l[1].type!="ew"?"ew":null,label:l[17],ovrtm:l[4]}}),ge=new ua({props:{data:l[1]&&l[18](["hh_tenure","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),mr=new ua({props:{data:l[1]&&l[18](["car_or_van","perc","2021"]),zKey:l[15]?null:l[4]?"prev":!l[4]&&l[1].type!="ew"?"ew":null,label:l[17]}}),{c(){c=X("div"),f=X("h2"),m=pe("Housing & Accommodation "),_=X("span"),a=pe(v),I=pe(" - Census 2021"),k=Re(),C=X("div"),z=X("div"),O=X("div"),D=X("div"),q=pe("Accommodation type"),se=X("span"),_e=Re(),ke=X("div"),Ce=X("div"),mt=pe("The type of accommodation occupied by a household. "),at=X("a"),Ye=X("strong"),Ge=pe("Statistical bulletins"),Xt=Re(),Fr(yt.$$.fragment),pt=Re(),lt=X("div"),Ie=X("div"),it=X("div"),nt=pe("Household adaptations"),Qe=X("span"),Ve=Re(),st=X("div"),Ct=X("div"),zt=pe(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.
							`),Ke=X("a"),qe=X("strong"),lr=pe("Statistical bulletins"),vr=Re(),Fr(cr.$$.fragment),Br=Re(),Bt=X("div"),xt=X("div"),Ut=X("div"),At=pe("Central heating"),Kt=X("span"),Jt=Re(),vt=X("div"),fr=X("div"),yr=pe(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.
							`),bt=X("a"),gr=X("strong"),hr=pe("Statistical bulletins"),dr=Re(),Fr($e.$$.fragment),Lt=Re(),Wt=X("div"),Se=X("div"),We=X("div"),qt=pe("Renewable energy systems"),Mt=X("span"),Dr=Re(),ri=X("div"),Yt=X("div"),Er=pe(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.
							`),Gr=X("a"),Xr=X("strong"),ai=pe("Statistical bulletins"),si=Re(),Fr(Cr.$$.fragment),qr=Re(),Sr=X("div"),ei=X("div"),Yr=X("div"),kt=pe("Household tenure"),kr=X("span"),Mr=Re(),rr=X("div"),F=X("div"),j=pe(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. 
							`),G=X("a"),Y=X("strong"),te=pe("Statistical bulletins"),ue=Re(),Fr(ge.$$.fragment),K=Re(),re=X("div"),we=X("div"),Ze=X("div"),Je=pe("Car or van availability"),ze=X("span"),St=Re(),gt=X("div"),Le=X("div"),ft=pe(`The number of cars or vans that are owned, or
							available for use, by members of a household. It
							includes company cars and vans that are available
							for private use.
							`),ot=X("a"),ht=X("strong"),$t=pe("Statistical bulletins"),ut=Re(),Fr(mr.$$.fragment),this.h()},l(et){c=W(et,"DIV",{style:!0});var Nt=Q(c);f=W(Nt,"H2",{class:!0});var li=Q(f);m=fe(li,"Housing & Accommodation "),_=W(li,"SPAN",{class:!0});var Ir=Q(_);a=fe(Ir,v),I=fe(Ir," - Census 2021"),Ir.forEach(M),li.forEach(M),Nt.forEach(M),k=Be(et),C=W(et,"DIV",{class:!0});var xr=Q(C);z=W(xr,"DIV",{class:!0});var Ar=Q(z);O=W(Ar,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var pr=Q(O);D=W(pr,"DIV",{class:!0,style:!0});var Ft=Q(D);q=fe(Ft,"Accommodation type"),se=W(Ft,"SPAN",{style:!0});var Wi=Q(se);Wi.forEach(M),Ft.forEach(M),pr.forEach(M),_e=Be(Ar),ke=W(Ar,"DIV",{class:!0,id:!0});var Gn=Q(ke);Ce=W(Gn,"DIV",{class:!0});var gi=Q(Ce);mt=fe(gi,"The type of accommodation occupied by a household. "),at=W(gi,"A",{href:!0,class:!0});var Ji=Q(at);Ye=W(Ji,"STRONG",{});var pa=Q(Ye);Ge=fe(pa,"Statistical bulletins"),pa.forEach(M),Ji.forEach(M),gi.forEach(M),Gn.forEach(M),Xt=Be(Ar),Nr(yt.$$.fragment,Ar),Ar.forEach(M),pt=Be(xr),lt=W(xr,"DIV",{class:!0});var vn=Q(lt);Ie=W(vn,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _i=Q(Ie);it=W(_i,"DIV",{class:!0,style:!0});var On=Q(it);nt=fe(On,"Household adaptations"),Qe=W(On,"SPAN",{style:!0});var Ui=Q(Qe);Ui.forEach(M),On.forEach(M),_i.forEach(M),Ve=Be(vn),st=W(vn,"DIV",{class:!0,id:!0});var Ti=Q(st);Ct=W(Ti,"DIV",{class:!0});var rn=Q(Ct);zt=fe(rn,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.
							`),Ke=W(rn,"A",{href:!0,class:!0});var ui=Q(Ke);qe=W(ui,"STRONG",{});var Sn=Q(qe);lr=fe(Sn,"Statistical bulletins"),Sn.forEach(M),ui.forEach(M),rn.forEach(M),Ti.forEach(M),vr=Be(vn),Nr(cr.$$.fragment,vn),vn.forEach(M),Br=Be(xr),Bt=W(xr,"DIV",{class:!0});var Yi=Q(Bt);xt=W(Yi,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ca=Q(xt);Ut=W(Ca,"DIV",{class:!0,style:!0});var Ai=Q(Ut);At=fe(Ai,"Central heating"),Kt=W(Ai,"SPAN",{style:!0});var Fn=Q(Kt);Fn.forEach(M),Ai.forEach(M),Ca.forEach(M),Jt=Be(Yi),vt=W(Yi,"DIV",{class:!0,id:!0});var Ri=Q(vt);fr=W(Ri,"DIV",{class:!0});var zi=Q(fr);yr=fe(zi,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.
							`),bt=W(zi,"A",{href:!0,class:!0});var cn=Q(bt);gr=W(cn,"STRONG",{});var Bi=Q(gr);hr=fe(Bi,"Statistical bulletins"),Bi.forEach(M),cn.forEach(M),zi.forEach(M),Ri.forEach(M),dr=Be(Yi),Nr($e.$$.fragment,Yi),Yi.forEach(M),Lt=Be(xr),Wt=W(xr,"DIV",{class:!0});var ji=Q(Wt);Se=W(ji,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ja=Q(Se);We=W(ja,"DIV",{class:!0,style:!0});var ho=Q(We);qt=fe(ho,"Renewable energy systems"),Mt=W(ho,"SPAN",{style:!0});var qa=Q(Mt);qa.forEach(M),ho.forEach(M),ja.forEach(M),Dr=Be(ji),ri=W(ji,"DIV",{class:!0,id:!0});var io=Q(ri);Yt=W(io,"DIV",{class:!0});var bn=Q(Yt);Er=fe(bn,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.
							`),Gr=W(bn,"A",{href:!0,class:!0});var hn=Q(Gr);Xr=W(hn,"STRONG",{});var Za=Q(Xr);ai=fe(Za,"Statistical bulletins"),Za.forEach(M),hn.forEach(M),bn.forEach(M),io.forEach(M),si=Be(ji),Nr(Cr.$$.fragment,ji),ji.forEach(M),qr=Be(xr),Sr=W(xr,"DIV",{class:!0});var ta=Q(Sr);ei=W(ta,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var pn=Q(ei);Yr=W(pn,"DIV",{class:!0,style:!0});var Ga=Q(Yr);kt=fe(Ga,"Household tenure"),kr=W(Ga,"SPAN",{style:!0});var va=Q(kr);va.forEach(M),Ga.forEach(M),pn.forEach(M),Mr=Be(ta),rr=W(ta,"DIV",{class:!0,id:!0});var Nn=Q(rr);F=W(Nn,"DIV",{class:!0});var ki=Q(F);j=fe(ki,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. 
							`),G=W(ki,"A",{href:!0,class:!0});var fi=Q(G);Y=W(fi,"STRONG",{});var Ei=Q(Y);te=fe(Ei,"Statistical bulletins"),Ei.forEach(M),fi.forEach(M),ki.forEach(M),Nn.forEach(M),ue=Be(ta),Nr(ge.$$.fragment,ta),ta.forEach(M),K=Be(xr),re=W(xr,"DIV",{class:!0});var ve=Q(re);we=W(ve,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xn=Q(we);Ze=W(xn,"DIV",{class:!0,style:!0});var nn=Q(Ze);Je=fe(nn,"Car or van availability"),ze=W(nn,"SPAN",{style:!0});var Hr=Q(ze);Hr.forEach(M),nn.forEach(M),xn.forEach(M),St=Be(ve),gt=W(ve,"DIV",{class:!0,id:!0});var ra=Q(gt);Le=W(ra,"DIV",{class:!0});var fn=Q(Le);ft=fe(fn,`The number of cars or vans that are owned, or
							available for use, by members of a household. It
							includes company cars and vans that are available
							for private use.
							`),ot=W(fn,"A",{href:!0,class:!0});var di=Q(ot);ht=W(di,"STRONG",{});var Ka=Q(ht);$t=fe(Ka,"Statistical bulletins"),Ka.forEach(M),di.forEach(M),fn.forEach(M),ra.forEach(M),ut=Be(ve),Nr(mr.$$.fragment,ve),ve.forEach(M),xr.forEach(M),this.h()},h(){L(_,"class","title-inset muted svelte-1dy7mjs"),L(f,"class","svelte-1dy7mjs"),he(c,"grid-column","span "+l[5]),he(se,"color","gray"),he(se,"font-size","14pt"),L(D,"class","blocktitle"),he(D,"margin","0"),he(D,"width","100%"),L(O,"class","row"),he(O,"display","flex"),he(O,"cursor","pointer"),L(O,"data-bs-toggle","collapse"),L(O,"data-bs-target","#acc-type-info"),L(O,"aria-expanded","false"),L(O,"aria-controls","acc-type-info"),L(at,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(at,"class","svelte-1dy7mjs"),L(Ce,"class","card card-body svelte-1dy7mjs"),L(ke,"class","collapse svelte-1dy7mjs"),L(ke,"id","acc-type-info"),L(z,"class","div-grey-box svelte-1dy7mjs"),he(Qe,"color","gray"),he(Qe,"font-size","14pt"),L(it,"class","blocktitle"),he(it,"margin","0"),he(it,"width","100%"),L(Ie,"class","row"),he(Ie,"display","flex"),he(Ie,"cursor","pointer"),L(Ie,"data-bs-toggle","collapse"),L(Ie,"data-bs-target","#adapt-info"),L(Ie,"aria-expanded","false"),L(Ie,"aria-controls","adapt-info"),L(Ke,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(Ke,"class","svelte-1dy7mjs"),L(Ct,"class","card card-body svelte-1dy7mjs"),L(st,"class","collapse svelte-1dy7mjs"),L(st,"id","adapt-info"),L(lt,"class","div-grey-box svelte-1dy7mjs"),he(Kt,"color","gray"),he(Kt,"font-size","14pt"),L(Ut,"class","blocktitle"),he(Ut,"margin","0"),he(Ut,"width","100%"),L(xt,"class","row"),he(xt,"display","flex"),he(xt,"cursor","pointer"),L(xt,"data-bs-toggle","collapse"),L(xt,"data-bs-target","#heat-info"),L(xt,"aria-expanded","false"),L(xt,"aria-controls","heat-info"),L(bt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(bt,"class","svelte-1dy7mjs"),L(fr,"class","card card-body svelte-1dy7mjs"),L(vt,"class","collapse svelte-1dy7mjs"),L(vt,"id","heat-info"),L(Bt,"class","div-grey-box svelte-1dy7mjs"),he(Mt,"color","gray"),he(Mt,"font-size","14pt"),L(We,"class","blocktitle"),he(We,"margin","0"),he(We,"width","100%"),L(Se,"class","row"),he(Se,"display","flex"),he(Se,"cursor","pointer"),L(Se,"data-bs-toggle","collapse"),L(Se,"data-bs-target","#renew-info"),L(Se,"aria-expanded","false"),L(Se,"aria-controls","renew-info"),L(Gr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(Gr,"class","svelte-1dy7mjs"),L(Yt,"class","card card-body svelte-1dy7mjs"),L(ri,"class","collapse svelte-1dy7mjs"),L(ri,"id","renew-info"),L(Wt,"class","div-grey-box svelte-1dy7mjs"),he(kr,"color","gray"),he(kr,"font-size","14pt"),L(Yr,"class","blocktitle"),he(Yr,"margin","0"),he(Yr,"width","100%"),L(ei,"class","row"),he(ei,"display","flex"),he(ei,"cursor","pointer"),L(ei,"data-bs-toggle","collapse"),L(ei,"data-bs-target","#tenure-info"),L(ei,"aria-expanded","false"),L(ei,"aria-controls","tenure-info"),L(G,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(G,"class","svelte-1dy7mjs"),L(F,"class","card card-body svelte-1dy7mjs"),L(rr,"class","collapse svelte-1dy7mjs"),L(rr,"id","tenure-info"),L(Sr,"class","div-grey-box svelte-1dy7mjs"),he(ze,"color","gray"),he(ze,"font-size","14pt"),L(Ze,"class","blocktitle"),he(Ze,"margin","0"),he(Ze,"width","100%"),L(we,"class","row"),he(we,"display","flex"),he(we,"cursor","pointer"),L(we,"data-bs-toggle","collapse"),L(we,"data-bs-target","#car-info"),L(we,"aria-expanded","false"),L(we,"aria-controls","car-info"),L(ot,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),L(ot,"class","svelte-1dy7mjs"),L(Le,"class","card card-body svelte-1dy7mjs"),L(gt,"class","collapse svelte-1dy7mjs"),L(gt,"id","car-info"),L(re,"class","div-grey-box svelte-1dy7mjs"),L(C,"class","grid mt svelte-1dy7mjs"),zs(()=>l[49].call(C))},m(et,Nt){xe(et,c,Nt),P(c,f),P(f,m),P(f,_),P(_,a),P(_,I),xe(et,k,Nt),xe(et,C,Nt),P(C,z),P(z,O),P(O,D),P(D,q),P(D,se),se.innerHTML=Te,P(z,_e),P(z,ke),P(ke,Ce),P(Ce,mt),P(Ce,at),P(at,Ye),P(Ye,Ge),P(z,Xt),Vr(yt,z,null),P(C,pt),P(C,lt),P(lt,Ie),P(Ie,it),P(it,nt),P(it,Qe),Qe.innerHTML=De,P(lt,Ve),P(lt,st),P(st,Ct),P(Ct,zt),P(Ct,Ke),P(Ke,qe),P(qe,lr),P(lt,vr),Vr(cr,lt,null),P(C,Br),P(C,Bt),P(Bt,xt),P(xt,Ut),P(Ut,At),P(Ut,Kt),Kt.innerHTML=It,P(Bt,Jt),P(Bt,vt),P(vt,fr),P(fr,yr),P(fr,bt),P(bt,gr),P(gr,hr),P(Bt,dr),Vr($e,Bt,null),P(C,Lt),P(C,Wt),P(Wt,Se),P(Se,We),P(We,qt),P(We,Mt),Mt.innerHTML=tr,P(Wt,Dr),P(Wt,ri),P(ri,Yt),P(Yt,Er),P(Yt,Gr),P(Gr,Xr),P(Xr,ai),P(Wt,si),Vr(Cr,Wt,null),P(C,qr),P(C,Sr),P(Sr,ei),P(ei,Yr),P(Yr,kt),P(Yr,kr),kr.innerHTML=pi,P(Sr,Mr),P(Sr,rr),P(rr,F),P(F,j),P(F,G),P(G,Y),P(Y,te),P(Sr,ue),Vr(ge,Sr,null),P(C,K),P(C,re),P(re,we),P(we,Ze),P(Ze,Je),P(Ze,ze),ze.innerHTML=He,P(re,St),P(re,gt),P(gt,Le),P(Le,ft),P(Le,ot),P(ot,ht),P(ht,$t),P(re,ut),Vr(mr,re,null),Kr=Ps(C,l[49].bind(C)),er=!0},p(et,Nt){(!er||Nt[0]&2)&&v!==(v=et[1].name+"")&&Ht(a,v),(!er||Nt[0]&32)&&he(c,"grid-column","span "+et[5]);const li={};Nt[0]&2&&(li.data=et[1]&&et[18](["accommodation_type","perc","2021"])),Nt[0]&32786&&(li.zKey=et[15]?null:et[4]?"prev":!et[4]&&et[1].type!="ew"?"ew":null),Nt[0]&131072&&(li.label=et[17]),yt.$set(li);const Ir={};Nt[0]&2&&(Ir.data=et[1]&&et[18](["number_of_adaptations","perc","2021"])),Nt[0]&32786&&(Ir.zKey=et[15]?null:et[4]?"prev":!et[4]&&et[1].type!="ew"?"ew":null),Nt[0]&131072&&(Ir.label=et[17]),cr.$set(Ir);const xr={};Nt[0]&2&&(xr.data=et[1]&&et[18](["central_heating","perc","2021"])),Nt[0]&32786&&(xr.zKey=et[15]?null:et[4]?"prev":!et[4]&&et[1].type!="ew"?"ew":null),Nt[0]&131072&&(xr.label=et[17]),$e.$set(xr);const Ar={};Nt[0]&2&&(Ar.data=et[1]&&et[18](["renewable_energy","perc","2021"])),Nt[0]&32786&&(Ar.zKey=!et[15]&&!et[4]&&et[1].type!="ew"?"ew":null),Nt[0]&131072&&(Ar.label=et[17]),Nt[0]&16&&(Ar.ovrtm=et[4]),Cr.$set(Ar);const pr={};Nt[0]&2&&(pr.data=et[1]&&et[18](["hh_tenure","perc","2021"])),Nt[0]&32786&&(pr.zKey=et[15]?null:et[4]?"prev":!et[4]&&et[1].type!="ew"?"ew":null),Nt[0]&131072&&(pr.label=et[17]),ge.$set(pr);const Ft={};Nt[0]&2&&(Ft.data=et[1]&&et[18](["car_or_van","perc","2021"])),Nt[0]&32786&&(Ft.zKey=et[15]?null:et[4]?"prev":!et[4]&&et[1].type!="ew"?"ew":null),Nt[0]&131072&&(Ft.label=et[17]),mr.$set(Ft)},i(et){er||(rt(yt.$$.fragment,et),rt(cr.$$.fragment,et),rt($e.$$.fragment,et),rt(Cr.$$.fragment,et),rt(ge.$$.fragment,et),rt(mr.$$.fragment,et),er=!0)},o(et){wt(yt.$$.fragment,et),wt(cr.$$.fragment,et),wt($e.$$.fragment,et),wt(Cr.$$.fragment,et),wt(ge.$$.fragment,et),wt(mr.$$.fragment,et),er=!1},d(et){et&&M(c),et&&M(k),et&&M(C),Ur(yt),Ur(cr),Ur($e),Ur(Cr),Ur(ge),Ur(mr),Kr()}}}function H0(l){let c,f,m=l[1]&&l[2]&&Am(l);return{c(){m&&m.c(),c=Xi()},l(_){m&&m.l(_),c=Xi()},m(_,v){m&&m.m(_,v),xe(_,c,v),f=!0},p(_,v){_[1]&&_[2]?m?(m.p(_,v),v[0]&6&&rt(m,1)):(m=Am(_),m.c(),rt(m,1),m.m(c.parentNode,c)):m&&(Rn(),wt(m,1,1,()=>{m=null}),Bn())},i(_){f||(rt(m),f=!0)},o(_){wt(m),f=!1},d(_){m&&m.d(_),_&&M(c)}}}function X0(l){let c,f,m,_,v,a,I,k,C,z,O,D,q,se;return document.title=c=l[1].name+" Census Data",q=new s_({props:{column:"wide",$$slots:{default:[H0]},$$scope:{ctx:l}}}),{c(){f=X("meta"),m=X("meta"),v=X("meta"),a=X("meta"),k=X("meta"),z=X("meta"),D=Re(),Fr(q.$$.fragment),this.h()},l(Te){const _e=n_('[data-svelte="svelte-hyixok"]',document.head);f=W(_e,"META",{name:!0,content:!0}),m=W(_e,"META",{property:!0,content:!0}),v=W(_e,"META",{property:!0,content:!0}),a=W(_e,"META",{property:!0,content:!0}),k=W(_e,"META",{property:!0,content:!0}),z=W(_e,"META",{name:!0,content:!0}),_e.forEach(M),D=Be(Te),Nr(q.$$.fragment,Te),this.h()},h(){L(f,"name","description"),L(f,"content",""),L(m,"property","og:title"),L(m,"content",_=l[1].name+" Census Data"),L(v,"property","og:type"),L(v,"content","website"),L(a,"property","og:url"),L(a,"content",I=Dh.base+"/"+l[1].code+"/"),L(k,"property","og:description"),L(k,"content",C="Explore census data for "+l[1].name+"."),L(z,"name","description"),L(z,"content",O="Explore census data for "+l[1].name+".")},m(Te,_e){P(document.head,f),P(document.head,m),P(document.head,v),P(document.head,a),P(document.head,k),P(document.head,z),xe(Te,D,_e),Vr(q,Te,_e),se=!0},p(Te,_e){(!se||_e[0]&2)&&c!==(c=Te[1].name+" Census Data")&&(document.title=c),(!se||_e[0]&2&&_!==(_=Te[1].name+" Census Data"))&&L(m,"content",_),(!se||_e[0]&2&&I!==(I=Dh.base+"/"+Te[1].code+"/"))&&L(a,"content",I),(!se||_e[0]&2&&C!==(C="Explore census data for "+Te[1].name+"."))&&L(k,"content",C),(!se||_e[0]&2&&O!==(O="Explore census data for "+Te[1].name+"."))&&L(z,"content",O);const ke={};_e[0]&262143|_e[2]&8&&(ke.$$scope={dirty:_e,ctx:Te}),q.$set(ke)},i(Te){se||(rt(q.$$.fragment,Te),se=!0)},o(Te){wt(q.$$.fragment,Te),se=!1},d(Te){M(f),M(m),M(v),M(a),M(k),M(z),Te&&M(D),Ur(q,Te)}}}const tb=!0;async function Qm(l,c){return await(await c(Dh.places+l+".json")).json()}async function rb({params:l,fetch:c}){let f=l.code,m=await g_(Dh.options,c),_={};m.forEach(k=>_[k.code]=k.name),m.forEach(k=>{k.typepl=Sc[k.type].pl,k.typenm=Sc[k.type].name,k.typestr=_[k.parent]?`${Sc[k.type].name} within ${_[k.parent]}`:""});let v=m.sort((k,C)=>k.name.localeCompare(C.name)),a=await Qm("N92000002",c),I=await Qm(f,c);return{props:{options:v,place:I,ew:a}}}function W0(l,c,f){let m,_,v,a,I,k,C,z,O,{options:D,place:q,ew:se}=c,Te,_e,ke=null,Ce=!1,mt={selected:null,type:null,childType:null,highlighted:[],hovered:null},at={};Object.keys(to).forEach(Lt=>f(8,at[Lt]=!1,at));function Ye(Lt){const Wt=(Er,Gr)=>Er+Gr;let Se=Lt[0],We=Lt[1],qt=q.data[Se][We][2021],Mt=q.data[Se][We][2011],tr=se.data[Se][We][2021],Dr=xd[Se].map(Er=>Er.code),ri=xd[Se].map(Er=>Er.label?Er.label:Er.code);return Dr.map((Er,Gr)=>Array.isArray(Er)?{x:ri[Gr],y:Er.map(Xr=>qt[Xr]).reduce(Wt,0),ew:Er.map(Xr=>tr[Xr]).reduce(Wt,0),prev:Er.map(Xr=>Mt[Xr]).reduce(Wt,0)}:{x:ri[Gr],y:qt[Er],ew:tr[Er],prev:Mt[Er]})}function Ge(Lt){ke&&ke.fitBounds(Lt,{padding:20})}function Xt(Lt){let Wt=JSON.parse(JSON.stringify(mt)),Se=Lt.code,We=Lt.type,qt=Lt.children[0]?Lt.children.map(Yt=>Yt.code):[],Mt=Lt.type=="rgn"?"cty":qt[0]?Lt.children[0].type:null;f(7,mt.selected=Se,mt),f(7,mt.type=We,mt),f(7,mt.childType=Mt,mt),f(7,mt.highlighted=qt,mt);let tr=Object.keys(to),Dr=["fill-color","fill-opacity"],ri=["line-color","line-width","line-opacity"];ke&&(mt.type!=Wt.type||mt.childType!=Wt.childType)&&(tr.forEach(Yt=>{let Er=Yt==We||Mt&&Yt==Mt?"visible":"none";ke.setLayoutProperty(Yt+"-fill","visibility",Er),ke.setLayoutProperty(Yt+"-bounds","visibility",Er),Lt.parents[0]&&ke.setLayoutProperty(Yt+"-self","visibility",Er),f(8,at[Yt]=Yt==Mt,at)}),Lt.parents[0]&&(Dr.forEach(Yt=>ke.setPaintProperty(We+"-fill",Yt,wi[qt[0]?"fill-active":"fill-self"][Yt])),ri.forEach(Yt=>{ke.setPaintProperty(We+"-bounds",Yt,wi["line-active"][Yt]),ke.setPaintProperty(We+"-self",Yt,wi["line-self"][Yt])})),Mt&&(Dr.forEach(Yt=>ke.setPaintProperty(Mt+"-fill",Yt,wi["fill-child"][Yt])),ri.forEach(Yt=>ke.setPaintProperty(Mt+"-bounds",Yt,wi["line-child"][Yt]))))}function yt(Lt){Xt(Lt),Ge(Lt.bounds)}function pt(Lt){Sd(`${as}/${Lt.detail.code}/`,{noscroll:!0})}function lt(Lt){Sd(`${as}/${Lt.detail.value}/`,{noscroll:!0})}function Ie(){f(5,_e=Te<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const it=()=>f(15,v=!0),nt=()=>f(4,Ce=!1),Qe=()=>f(16,_=!1),De=()=>f(16,_=!0),Ve=()=>f(15,v=!1),st=()=>f(4,Ce=!1),Ct=()=>f(4,Ce=!0),zt=()=>f(15,v=!1),Ke=()=>f(16,_=!1);function qe(Lt){ke=Lt,f(6,ke)}function lr(){Te=this.clientWidth,f(3,Te)}const vr=()=>f(14,a=!1),cr=()=>f(14,a=!0),Br=()=>f(13,I=!1),Bt=()=>f(13,I=!0),xt=()=>f(12,k=!1),Ut=()=>f(12,k=!0),At=()=>f(11,C=!1),Kt=()=>f(11,C=!0),It=()=>f(9,O=!1),Jt=()=>f(9,O=!0),vt=()=>f(10,z=!1),fr=()=>f(10,z=!0);function yr(){Te=this.clientWidth,f(3,Te)}function bt(){Te=this.clientWidth,f(3,Te)}function gr(){Te=this.clientWidth,f(3,Te)}function hr(){Te=this.clientWidth,f(3,Te)}function dr(){Te=this.clientWidth,f(3,Te)}function $e(){Te=this.clientWidth,f(3,Te)}return l.$$set=Lt=>{"options"in Lt&&f(0,D=Lt.options),"place"in Lt&&f(1,q=Lt.place),"ew"in Lt&&f(2,se=Lt.ew)},l.$$.update=()=>{l.$$.dirty[0]&8&&Te&&Ie(),l.$$.dirty[0]&18&&f(17,m=Ce?"Same area 2011":q&&q.parents[0]?"NI 2021":null),l.$$.dirty[0]&2&&q&&yt(q)},f(16,_=!1),f(15,v=!0),f(14,a=!0),f(13,I=!0),f(12,k=!0),f(11,C=!0),f(10,z=!0),f(9,O=!0),[D,q,se,Te,Ce,_e,ke,mt,at,O,z,C,k,I,a,v,_,m,Ye,pt,lt,it,nt,Qe,De,Ve,st,Ct,zt,Ke,qe,lr,vr,cr,Br,Bt,xt,Ut,At,Kt,It,Jt,vt,fr,yr,bt,gr,hr,dr,$e]}class ib extends Na{constructor(c){super(),Va(this,c,W0,X0,Ua,{options:0,place:1,ew:2},null,[-1,-1,-1])}}export{ib as default,rb as load,tb as prerender};
