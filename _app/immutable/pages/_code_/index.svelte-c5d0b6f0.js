import{S as Yo,i as Jo,s as Qo,O as Xv,l as M,m as L,n as R,h as T,p as S,q as ie,J as Si,b as Pe,Q as Wv,R as Yv,T as Jv,f as et,t as ft,a as ge,c as _e,I as w,M as Fi,E as an,G as Nc,U as Lk,V as hS,W as cf,r as ee,u as te,v as dt,e as zn,X as Uc,Y as Xo,Z as Wo,g as Zu,d as Gu,j as Rk,o as Bk,K as i_,_ as Yt,$ as Nr,a0 as Ma,a1 as La,w as Ut,x as qt,y as jt,B as Zt,P as o3,a2 as s3,a3 as Bx,a4 as Ox,a5 as l3,a6 as i0,C as Q_,z as $_,A as e0}from"../../chunks/index-06ab0f50.js";import{g as gn,a as n0,S as u3,m as vd,b as pS,c as c3,d as sa,e as fS}from"../../chunks/Section-80303abd.js";import{b as $h}from"../../chunks/paths-1c47712a.js";import{c as wy,w as Ur,d as Nn}from"../../chunks/singletons-e0a6622d.js";/* empty css                                                                 */var dS={},_x={},bx=34,Yg=10,xx=13;function Ok(u){return new Function("d","return {"+u.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function h3(u,h){var f=Ok(u);return function(y,x){return h(f(y),x,u)}}function mS(u){var h=Object.create(null),f=[];return u.forEach(function(y){for(var x in y)x in h||f.push(h[x]=x)}),f}function ol(u,h){var f=u+"",y=f.length;return y<h?new Array(h-y+1).join(0)+f:f}function p3(u){return u<0?"-"+ol(-u,6):u>9999?"+"+ol(u,6):ol(u,4)}function f3(u){var h=u.getUTCHours(),f=u.getUTCMinutes(),y=u.getUTCSeconds(),x=u.getUTCMilliseconds();return isNaN(u)?"Invalid Date":p3(u.getUTCFullYear())+"-"+ol(u.getUTCMonth()+1,2)+"-"+ol(u.getUTCDate(),2)+(x?"T"+ol(h,2)+":"+ol(f,2)+":"+ol(y,2)+"."+ol(x,3)+"Z":y?"T"+ol(h,2)+":"+ol(f,2)+":"+ol(y,2)+"Z":f||h?"T"+ol(h,2)+":"+ol(f,2)+"Z":"")}function d3(u){var h=new RegExp('["'+u+`
\r]`),f=u.charCodeAt(0);function y(j,U){var pe,he,Ie=x(j,function(we,Oe){if(pe)return pe(we,Oe-1);he=we,pe=U?h3(we,U):Ok(we)});return Ie.columns=he||[],Ie}function x(j,U){var pe=[],he=j.length,Ie=0,we=0,Oe,Ue=he<=0,Bt=!1;j.charCodeAt(he-1)===Yg&&--he,j.charCodeAt(he-1)===xx&&--he;function Mt(){if(Ue)return _x;if(Bt)return Bt=!1,dS;var Je,Tr=Ie,wr;if(j.charCodeAt(Tr)===bx){for(;Ie++<he&&j.charCodeAt(Ie)!==bx||j.charCodeAt(++Ie)===bx;);return(Je=Ie)>=he?Ue=!0:(wr=j.charCodeAt(Ie++))===Yg?Bt=!0:wr===xx&&(Bt=!0,j.charCodeAt(Ie)===Yg&&++Ie),j.slice(Tr+1,Je-1).replace(/""/g,'"')}for(;Ie<he;){if((wr=j.charCodeAt(Je=Ie++))===Yg)Bt=!0;else if(wr===xx)Bt=!0,j.charCodeAt(Ie)===Yg&&++Ie;else if(wr!==f)continue;return j.slice(Tr,Je)}return Ue=!0,j.slice(Tr,he)}for(;(Oe=Mt())!==_x;){for(var mt=[];Oe!==dS&&Oe!==_x;)mt.push(Oe),Oe=Mt();U&&(mt=U(mt,we++))==null||pe.push(mt)}return pe}function _(j,U){return j.map(function(pe){return U.map(function(he){return V(pe[he])}).join(u)})}function o(j,U){return U==null&&(U=mS(j)),[U.map(V).join(u)].concat(_(j,U)).join(`
`)}function z(j,U){return U==null&&(U=mS(j)),_(j,U).join(`
`)}function P(j){return j.map(F).join(`
`)}function F(j){return j.map(V).join(u)}function V(j){return j==null?"":j instanceof Date?f3(j):h.test(j+="")?'"'+j.replace(/"/g,'""')+'"':j}return{parse:y,parseRows:x,format:o,formatBody:z,formatRows:P,formatRow:F,formatValue:V}}var m3=d3(","),y3=m3.parse;function v3(u){for(var h in u){var f=u[h].trim(),y,x;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(y=+f))f=y;else if(x=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))g3&&!!x[4]&&!x[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;u[h]=f}return u}const g3=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function _3(u,h=window.fetch){let y=await(await h(u)).text();return await y3(y,v3)}function gd(u){let h=Math.round(u)%10;return u==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function a0(u){return u>0?"increase":u<0?"decrease":"nochange"}function _d(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"No change"}function o0(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"<1%"}wy.disable_scroll_handling;const yS=wy.goto;wy.invalidate;wy.prefetch;wy.prefetch_routes;wy.before_navigate;wy.after_navigate;var b3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x3={rgb2hsl:n_,rgb2hsv:p0,rgb2hwb:a_,rgb2cmyk:o_,rgb2keyword:s_,rgb2xyz:Vx,rgb2lab:Fx,rgb2lch:w3,hsl2rgb:f0,hsl2hsv:E3,hsl2hwb:S3,hsl2cmyk:k3,hsl2keyword:I3,hsv2rgb:d0,hsv2hsl:T3,hsv2hwb:A3,hsv2cmyk:z3,hsv2keyword:P3,hwb2rgb:l_,hwb2hsl:C3,hwb2hsv:D3,hwb2cmyk:M3,hwb2keyword:L3,cmyk2rgb:u_,cmyk2hsl:R3,cmyk2hsv:B3,cmyk2hwb:O3,cmyk2keyword:V3,keyword2rgb:Ey,keyword2hsl:q3,keyword2hsv:j3,keyword2hwb:Z3,keyword2cmyk:G3,keyword2lab:K3,keyword2xyz:H3,xyz2rgb:Vk,xyz2lab:Fk,xyz2lch:F3,lab2xyz:Nx,lab2rgb:Nk,lab2lch:Ux,lch2lab:qx,lch2xyz:N3,lch2rgb:U3};function n_(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,x=Math.min(h,f,y),_=Math.max(h,f,y),o=_-x,z,P,F;return _==x?z=0:h==_?z=(f-y)/o:f==_?z=2+(y-h)/o:y==_&&(z=4+(h-f)/o),z=Math.min(z*60,360),z<0&&(z+=360),F=(x+_)/2,_==x?P=0:F<=.5?P=o/(_+x):P=o/(2-_-x),[z,P*100,F*100]}function p0(u){var h=u[0],f=u[1],y=u[2],x=Math.min(h,f,y),_=Math.max(h,f,y),o=_-x,z,P,F;return _==0?P=0:P=o/_*1e3/10,_==x?z=0:h==_?z=(f-y)/o:f==_?z=2+(y-h)/o:y==_&&(z=4+(h-f)/o),z=Math.min(z*60,360),z<0&&(z+=360),F=_/255*1e3/10,[z,P,F]}function a_(u){var h=u[0],f=u[1],_=u[2],y=n_(u)[0],x=1/255*Math.min(h,Math.min(f,_)),_=1-1/255*Math.max(h,Math.max(f,_));return[y,x*100,_*100]}function o_(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,x,_,o,z;return z=Math.min(1-h,1-f,1-y),x=(1-h-z)/(1-z)||0,_=(1-f-z)/(1-z)||0,o=(1-y-z)/(1-z)||0,[x*100,_*100,o*100,z*100]}function s_(u){return Uk[JSON.stringify(u)]}function Vx(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var x=h*.4124+f*.3576+y*.1805,_=h*.2126+f*.7152+y*.0722,o=h*.0193+f*.1192+y*.9505;return[x*100,_*100,o*100]}function Fx(u){var h=Vx(u),f=h[0],y=h[1],x=h[2],_,o,z;return f/=95.047,y/=100,x/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,_=116*y-16,o=500*(f-y),z=200*(y-x),[_,o,z]}function w3(u){return Ux(Fx(u))}function f0(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,x,_,o,z,P;if(f==0)return P=y*255,[P,P,P];y<.5?_=y*(1+f):_=y+f-y*f,x=2*y-_,z=[0,0,0];for(var F=0;F<3;F++)o=h+1/3*-(F-1),o<0&&o++,o>1&&o--,6*o<1?P=x+(_-x)*6*o:2*o<1?P=_:3*o<2?P=x+(_-x)*(2/3-o)*6:P=x,z[F]=P*255;return z}function E3(u){var h=u[0],f=u[1]/100,y=u[2]/100,x,_;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,_=(y+f)/2,x=2*f/(y+f),[h,x*100,_*100])}function S3(u){return a_(f0(u))}function k3(u){return o_(f0(u))}function I3(u){return s_(f0(u))}function d0(u){var h=u[0]/60,f=u[1]/100,P=u[2]/100,y=Math.floor(h)%6,x=h-Math.floor(h),_=255*P*(1-f),o=255*P*(1-f*x),z=255*P*(1-f*(1-x)),P=255*P;switch(y){case 0:return[P,z,_];case 1:return[o,P,_];case 2:return[_,P,z];case 3:return[_,o,P];case 4:return[z,_,P];case 5:return[P,_,o]}}function T3(u){var h=u[0],f=u[1]/100,y=u[2]/100,x,_;return _=(2-f)*y,x=f*y,x/=_<=1?_:2-_,x=x||0,_/=2,[h,x*100,_*100]}function A3(u){return a_(d0(u))}function z3(u){return o_(d0(u))}function P3(u){return s_(d0(u))}function l_(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,x=f+y,_,o,z,P;switch(x>1&&(f/=x,y/=x),_=Math.floor(6*h),o=1-y,z=6*h-_,(_&1)!=0&&(z=1-z),P=f+z*(o-f),_){default:case 6:case 0:r=o,g=P,b=f;break;case 1:r=P,g=o,b=f;break;case 2:r=f,g=o,b=P;break;case 3:r=f,g=P,b=o;break;case 4:r=P,g=f,b=o;break;case 5:r=o,g=f,b=P;break}return[r*255,g*255,b*255]}function C3(u){return n_(l_(u))}function D3(u){return p0(l_(u))}function M3(u){return o_(l_(u))}function L3(u){return s_(l_(u))}function u_(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,x=u[3]/100,_,o,z;return _=1-Math.min(1,h*(1-x)+x),o=1-Math.min(1,f*(1-x)+x),z=1-Math.min(1,y*(1-x)+x),[_*255,o*255,z*255]}function R3(u){return n_(u_(u))}function B3(u){return p0(u_(u))}function O3(u){return a_(u_(u))}function V3(u){return s_(u_(u))}function Vk(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,x,_,o;return x=h*3.2406+f*-1.5372+y*-.4986,_=h*-.9689+f*1.8758+y*.0415,o=h*.0557+f*-.204+y*1.057,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x=x*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,x=Math.min(Math.max(0,x),1),_=Math.min(Math.max(0,_),1),o=Math.min(Math.max(0,o),1),[x*255,_*255,o*255]}function Fk(u){var h=u[0],f=u[1],y=u[2],x,_,o;return h/=95.047,f/=100,y/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=116*f-16,_=500*(h-f),o=200*(f-y),[x,_,o]}function F3(u){return Ux(Fk(u))}function Nx(u){var h=u[0],f=u[1],y=u[2],x,_,o,z;return h<=8?(_=h*100/903.3,z=7.787*(_/100)+16/116):(_=100*Math.pow((h+16)/116,3),z=Math.pow(_/100,1/3)),x=x/95.047<=.008856?x=95.047*(f/500+z-16/116)/7.787:95.047*Math.pow(f/500+z,3),o=o/108.883<=.008859?o=108.883*(z-y/200-16/116)/7.787:108.883*Math.pow(z-y/200,3),[x,_,o]}function Ux(u){var h=u[0],f=u[1],y=u[2],x,_,o;return x=Math.atan2(y,f),_=x*360/2/Math.PI,_<0&&(_+=360),o=Math.sqrt(f*f+y*y),[h,o,_]}function Nk(u){return Vk(Nx(u))}function qx(u){var h=u[0],f=u[1],y=u[2],x,_,o;return o=y/360*2*Math.PI,x=f*Math.cos(o),_=f*Math.sin(o),[h,x,_]}function N3(u){return Nx(qx(u))}function U3(u){return Nk(qx(u))}function Ey(u){return zx[u]}function q3(u){return n_(Ey(u))}function j3(u){return p0(Ey(u))}function Z3(u){return a_(Ey(u))}function G3(u){return o_(Ey(u))}function K3(u){return Fx(Ey(u))}function H3(u){return Vx(Ey(u))}var zx={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Uk={};for(var vS in zx)Uk[JSON.stringify(zx[vS])]=vS;var wx=x3,_y=function(){return new c_};for(var Jg in wx){_y[Jg+"Raw"]=function(u){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),wx[u](h)}}(Jg);var gS=/(\w+)2(\w+)/.exec(Jg),Ex=gS[1],X3=gS[2];_y[Ex]=_y[Ex]||{},_y[Ex][X3]=_y[Jg]=function(u){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=wx[u](h);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(Jg)}var c_=function(){this.convs={}};c_.prototype.routeSpace=function(u,h){var f=h[0];return f===void 0?this.getValues(u):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(u,f))};c_.prototype.setValues=function(u,h){return this.space=u,this.convs={},this.convs[u]=h,this};c_.prototype.getValues=function(u){var h=this.convs[u];if(!h){var f=this.space,y=this.convs[f];h=_y[f][u](y),this.convs[u]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(u){c_.prototype[u]=function(h){return this.routeSpace(u,arguments)}});var W3=_y,Sx=W3,Y3=function(u){var h,f,y,x;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(u)){var _=h[1],o=_.replace(/a$/,""),z=o==="cmyk"?4:3;f=Sx[o],y=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(F,V){return/%$/.test(F)&&V===z?parseFloat(F)/100:(/%$/.test(F),parseFloat(F))}),_===o&&y.push(1),x=y[z]===void 0?1:y[z],y=y.slice(0,z),f[o]=function(){return y}}else if(/^#[A-Fa-f0-9]+$/.test(u)){var o=u.replace(/^#/,""),z=o.length;f=Sx.rgb,y=o.split(z===3?/(.)/:/(..)/),y=y.filter(Boolean).map(function(j){return parseInt(z===3?j+j:j,16)}),x=1,f.rgb=function(){return y},y[0]||(y[0]=0),y[1]||(y[1]=0),y[2]||(y[2]=0)}else f=Sx.keyword,f.keyword=function(){return u},y=u,x=1;var P={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{P.rgb=f.rgb(y)}catch{}try{P.hsl=f.hsl(y)}catch{}try{P.hsv=f.hsv(y)}catch{}try{P.cmyk=f.cmyk(y)}catch{}try{P.keyword=f.keyword(y)}catch{}return P.rgb&&(P.hex="#"+P.rgb.map(function(F){var V=F.toString(16);return V.length===1?"0"+V:V}).join("")),P.rgb&&(P.rgba=P.rgb.concat(x)),P.hsl&&(P.hsla=P.hsl.concat(x)),P.hsv&&(P.hsva=P.hsv.concat(x)),P.cmyk&&(P.cmyka=P.cmyk.concat(x)),P};function J3(u){let h,f;const y=u[5].default,x=Xv(y,u,u[4],null);return{c(){h=M("span"),x&&x.c(),this.h()},l(_){h=L(_,"SPAN",{class:!0,style:!0,role:!0});var o=R(h);x&&x.l(o),o.forEach(T),this.h()},h(){S(h,"class","em svelte-s1t2y4"),ie(h,"background-color",u[0]),ie(h,"color",u[2]),S(h,"role","presentation"),Si(h,"nowrap",u[1])},m(_,o){Pe(_,h,o),x&&x.m(h,null),f=!0},p(_,[o]){x&&x.p&&(!f||o&16)&&Wv(x,y,_,_[4],f?Jv(y,_[4],o,null):Yv(_[4]),null),(!f||o&1)&&ie(h,"background-color",_[0]),(!f||o&4)&&ie(h,"color",_[2]),o&2&&Si(h,"nowrap",_[1])},i(_){f||(et(x,_),f=!0)},o(_){ft(x,_),f=!1},d(_){_&&T(h),x&&x.d(_)}}}function Q3(u,h,f){let y,{$$slots:x={},$$scope:_}=h,{color:o="lightgrey"}=h,{nowrap:z=!0}=h;function P(V){return(V[0]*299+V[1]*587+V[2]*114)/1e3>125?"black":"white"}let F="black";return u.$$set=V=>{"color"in V&&f(0,o=V.color),"nowrap"in V&&f(1,z=V.nowrap),"$$scope"in V&&f(4,_=V.$$scope)},u.$$.update=()=>{u.$$.dirty&1&&f(3,y=Y3(o).rgb),u.$$.dirty&8&&y&&f(2,F=P(y))},[o,z,F,y,_,x]}class m0 extends Yo{constructor(h){super(),Jo(this,h,Q3,J3,Qo,{color:0,nowrap:1})}}function _S(u,h,f){const y=u.slice();return y[33]=h[f],y[36]=h,y[35]=f,y}function bS(u,h,f){const y=u.slice();return y[33]=h[f],y[34]=h,y[35]=f,y}function $3(u){let h,f,y=(u[0]?u[0]:"Select one")+"",x,_,o,z,P,F;return{c(){h=M("a"),f=M("span"),x=ee(y),_=ge(),o=M("span"),z=ee("\xA0"),this.h()},l(V){h=L(V,"A",{id:!0,class:!0});var j=R(h);f=L(j,"SPAN",{class:!0});var U=R(f);x=te(U,y),U.forEach(T),_=_e(j),o=L(j,"SPAN",{class:!0});var pe=R(o);z=te(pe,"\xA0"),pe.forEach(T),j.forEach(T),this.h()},h(){S(f,"class","svelte-13flvue"),S(o,"class","button svelte-13flvue"),Si(o,"search",u[3]),Si(o,"down",!u[3]),S(h,"id","toggle"),S(h,"class","svelte-13flvue")},m(V,j){Pe(V,h,j),w(h,f),w(f,x),w(h,_),w(h,o),w(o,z),P||(F=Fi(h,"click",u[12]),P=!0)},p(V,j){j[0]&1&&y!==(y=(V[0]?V[0]:"Select one")+"")&&dt(x,y),j[0]&8&&Si(o,"search",V[3]),j[0]&8&&Si(o,"down",!V[3])},d(V){V&&T(h),P=!1,F()}}}function eT(u){let h,f,y=u[5][u[1]]+"",x,_,o,z,P,F,V,j=u[2]&&xS(u);return{c(){h=M("a"),f=M("span"),x=ee(y),_=ge(),j&&j.c(),o=ge(),z=M("span"),P=ee("\xA0"),this.h()},l(U){h=L(U,"A",{id:!0,class:!0});var pe=R(h);f=L(pe,"SPAN",{class:!0});var he=R(f);x=te(he,y),_=_e(he),j&&j.l(he),he.forEach(T),o=_e(pe),z=L(pe,"SPAN",{class:!0});var Ie=R(z);P=te(Ie,"\xA0"),Ie.forEach(T),pe.forEach(T),this.h()},h(){S(f,"class","selection svelte-13flvue"),S(z,"class","button close svelte-13flvue"),S(h,"id","toggle"),S(h,"class","selected svelte-13flvue")},m(U,pe){Pe(U,h,pe),w(h,f),w(f,x),w(f,_),j&&j.m(f,null),w(h,o),w(h,z),w(z,P),F||(V=[Fi(z,"click",u[14]),Fi(h,"click",u[12])],F=!0)},p(U,pe){pe[0]&34&&y!==(y=U[5][U[1]]+"")&&dt(x,y),U[2]?j?j.p(U,pe):(j=xS(U),j.c(),j.m(f,null)):j&&(j.d(1),j=null)},d(U){U&&T(h),j&&j.d(),F=!1,Nc(V)}}}function xS(u){let h,f=u[5][u[2]]+"",y;return{c(){h=M("small"),y=ee(f),this.h()},l(x){h=L(x,"SMALL",{class:!0});var _=R(h);y=te(_,f),_.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(x,_){Pe(x,h,_),w(h,y)},p(x,_){_[0]&36&&f!==(f=x[5][x[2]]+"")&&dt(y,f)},d(x){x&&T(h)}}}function wS(u){let h,f,y,x,_,o;function z(V,j){return V[4].length<3?nT:V[8][0]&&V[2]?iT:V[8][0]?rT:tT}let P=z(u),F=P(u);return{c(){h=M("div"),f=M("input"),y=ge(),x=M("ul"),F.c(),this.h()},l(V){h=L(V,"DIV",{id:!0,style:!0,class:!0});var j=R(h);f=L(j,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),y=_e(j),x=L(j,"UL",{class:!0});var U=R(x);F.l(U),U.forEach(T),j.forEach(T),this.h()},h(){S(f,"type","text"),S(f,"placeholder",""),S(f,"autocomplete","false"),f.autofocus="autofocus",S(f,"onfocus","this.select()"),S(f,"class","svelte-13flvue"),S(x,"class","svelte-13flvue"),S(h,"id","dropdown"),ie(h,"top","0"),S(h,"class","svelte-13flvue")},m(V,j){Pe(V,h,j),w(h,f),hS(f,u[4]),u[24](f),w(h,y),w(h,x),F.m(x,null),u[31](h),f.focus(),_||(o=[Fi(f,"input",u[23]),Fi(f,"keyup",u[16])],_=!0)},p(V,j){j[0]&16&&f.value!==V[4]&&hS(f,V[4]),P===(P=z(V))&&F?F.p(V,j):(F.d(1),F=P(V),F&&(F.c(),F.m(x,null)))},d(V){V&&T(h),u[24](null),F.d(),u[31](null),_=!1,Nc(o)}}}function tT(u){let h,f;return{c(){h=M("li"),f=ee("No results"),this.h()},l(y){h=L(y,"LI",{class:!0});var x=R(h);f=te(x,"No results"),x.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,x){Pe(y,h,x),w(h,f)},p:an,d(y){y&&T(h)}}}function rT(u){let h,f=u[8],y=[];for(let x=0;x<f.length;x+=1)y[x]=ES(_S(u,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();h=zn()},l(x){for(let _=0;_<y.length;_+=1)y[_].l(x);h=zn()},m(x,_){for(let o=0;o<y.length;o+=1)y[o].m(x,_);Pe(x,h,_)},p(x,_){if(_[0]&10626){f=x[8];let o;for(o=0;o<f.length;o+=1){const z=_S(x,f,o);y[o]?y[o].p(z,_):(y[o]=ES(z),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){Uc(y,x),x&&T(h)}}}function iT(u){let h,f=u[8],y=[];for(let x=0;x<f.length;x+=1)y[x]=SS(bS(u,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();h=zn()},l(x){for(let _=0;_<y.length;_+=1)y[_].l(x);h=zn()},m(x,_){for(let o=0;o<y.length;o+=1)y[o].m(x,_);Pe(x,h,_)},p(x,_){if(_[0]&10630){f=x[8];let o;for(o=0;o<f.length;o+=1){const z=bS(x,f,o);y[o]?y[o].p(z,_):(y[o]=SS(z),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){Uc(y,x),x&&T(h)}}}function nT(u){let h,f;return{c(){h=M("li"),f=ee("Type a name..."),this.h()},l(y){h=L(y,"LI",{class:!0});var x=R(h);f=te(x,"Type a name..."),x.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,x){Pe(y,h,x),w(h,f)},p:an,d(y){y&&T(h)}}}function ES(u){let h,f=u[33][u[1]]+"",y,x,_=u[35],o,z;function P(){return u[28](u[33])}function F(){return u[29](u[35])}const V=()=>u[30](h,_),j=()=>u[30](null,_);return{c(){h=M("li"),y=ee(f),x=ge(),this.h()},l(U){h=L(U,"LI",{class:!0});var pe=R(h);y=te(pe,f),x=_e(pe),pe.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue"),Si(h,"highlight",u[7]==u[35])},m(U,pe){Pe(U,h,pe),w(h,y),w(h,x),V(),o||(z=[Fi(h,"click",P),Fi(h,"mouseover",F)],o=!0)},p(U,pe){u=U,pe[0]&258&&f!==(f=u[33][u[1]]+"")&&dt(y,f),_!==u[35]&&(j(),_=u[35],V()),pe[0]&128&&Si(h,"highlight",u[7]==u[35])},d(U){U&&T(h),j(),o=!1,Nc(z)}}}function SS(u){let h,f=u[33][u[1]]+"",y,x,_,o=u[33][u[2]]+"",z,P,F=u[35],V,j;function U(){return u[25](u[33])}function pe(){return u[26](u[35])}const he=()=>u[27](h,F),Ie=()=>u[27](null,F);return{c(){h=M("li"),y=ee(f),x=ge(),_=M("small"),z=ee(o),P=ge(),this.h()},l(we){h=L(we,"LI",{class:!0});var Oe=R(h);y=te(Oe,f),x=_e(Oe),_=L(Oe,"SMALL",{class:!0});var Ue=R(_);z=te(Ue,o),Ue.forEach(T),P=_e(Oe),Oe.forEach(T),this.h()},h(){S(_,"class","svelte-13flvue"),S(h,"class","svelte-13flvue"),Si(h,"highlight",u[7]==u[35])},m(we,Oe){Pe(we,h,Oe),w(h,y),w(h,x),w(h,_),w(_,z),w(h,P),he(),V||(j=[Fi(h,"click",U),Fi(h,"mouseover",pe)],V=!0)},p(we,Oe){u=we,Oe[0]&258&&f!==(f=u[33][u[1]]+"")&&dt(y,f),Oe[0]&260&&o!==(o=u[33][u[2]]+"")&&dt(z,o),F!==u[35]&&(Ie(),F=u[35],he()),Oe[0]&128&&Si(h,"highlight",u[7]==u[35])},d(we){we&&T(h),Ie(),V=!1,Nc(j)}}}function aT(u){let h,f,y,x;function _(F,V){return F[5]&&!F[3]?eT:$3}let o=_(u),z=o(u),P=u[6]&&wS(u);return{c(){h=M("div"),z.c(),f=ge(),P&&P.c(),this.h()},l(F){h=L(F,"DIV",{id:!0,class:!0});var V=R(h);z.l(V),f=_e(V),P&&P.l(V),V.forEach(T),this.h()},h(){S(h,"id","select"),S(h,"class","svelte-13flvue"),Si(h,"active",u[6])},m(F,V){Pe(F,h,V),z.m(h,null),w(h,f),P&&P.m(h,null),y||(x=[Fi(window,"click",u[17]),Fi(h,"keydown",u[15])],y=!0)},p(F,V){o===(o=_(F))&&z?z.p(F,V):(z.d(1),z=o(F),z&&(z.c(),z.m(h,f))),F[6]?P?P.p(F,V):(P=wS(F),P.c(),P.m(h,null)):P&&(P.d(1),P=null),V[0]&64&&Si(h,"active",F[6])},i:an,o:an,d(F){F&&T(h),z.d(),P&&P.d(),y=!1,Nc(x)}}}function oT(u){return new Promise(h=>setTimeout(h,u))}function sT(u,h,f){let y;const x=Lk();let{search_data:_}=h,{selected:o=null}=h,{placeholder:z="Enter a town or area name"}=h,{value:P="code"}=h,{label:F="name"}=h,{group:V=null}=h,{search:j=!1}=h,U=o,pe=o?_.find(vt=>{vt[P]==o[P]}):null,he=!1,Ie="",we=null,Oe,Ue,Bt,Mt=[];function mt(vt){vt.stopPropagation(),f(4,Ie=""),f(6,he=!he),oT(10).then(()=>{Bt&&he&&Bt.focus()})}function Je(vt){f(18,o=vt),f(6,he=!1),x("select",{selected:vt,value:vt[P]})}function Tr(vt){vt.stopPropagation(),f(18,o=null),f(21,U=null),f(5,pe=null),x("select",{selected:null,value:null})}function wr(vt){he&&Oe[0]&&Number.isInteger(we)&&(vt.keyCode===38?(f(7,we-=we>0?1:0),Mt[we].scrollIntoView({block:"nearest",inline:"start"})):vt.keyCode===40&&(f(7,we+=we<Oe.length-1?1:0),Mt[we].scrollIntoView({block:"nearest",inline:"end"})))}function or(vt){Oe[0]&&Number.isInteger(we)&&vt.keyCode===13&&Je(Oe[we])}function kt(vt){vt.target!==Ue&&(f(6,he=!1),f(7,we=0))}function At(){Ie=this.value,f(4,Ie)}function Pr(vt){cf[vt?"unshift":"push"](()=>{Bt=vt,f(10,Bt)})}const Ot=vt=>Je(vt),Ar=vt=>f(7,we=vt);function rt(vt,nt){cf[vt?"unshift":"push"](()=>{Mt[nt]=vt,f(11,Mt)})}const ur=vt=>Je(vt),$r=vt=>f(7,we=vt);function li(vt,nt){cf[vt?"unshift":"push"](()=>{Mt[nt]=vt,f(11,Mt)})}function kr(vt){cf[vt?"unshift":"push"](()=>{Ue=vt,f(9,Ue)})}return u.$$set=vt=>{"search_data"in vt&&f(19,_=vt.search_data),"selected"in vt&&f(18,o=vt.selected),"placeholder"in vt&&f(0,z=vt.placeholder),"value"in vt&&f(20,P=vt.value),"label"in vt&&f(1,F=vt.label),"group"in vt&&f(2,V=vt.group),"search"in vt&&f(3,j=vt.search)},u.$$.update=()=>{u.$$.dirty[0]&16&&f(22,y=Ie?new RegExp(Ie,"i"):null),u.$$.dirty[0]&4718594&&(f(8,Oe=y?_.filter(vt=>y.test(vt[F])):_),f(7,we=0)),u.$$.dirty[0]&3932160&&U!=o&&(f(5,pe=_.find(vt=>vt[P]==o[P])),f(21,U=o))},[z,F,V,j,Ie,pe,he,we,Oe,Ue,Bt,Mt,mt,Je,Tr,wr,or,kt,o,_,P,U,y,At,Pr,Ot,Ar,rt,ur,$r,li,kr]}class lT extends Yo{constructor(h){super(),Jo(this,h,sT,aT,Qo,{search_data:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var $g={exports:{}};(function(u,h){(function(f,y){u.exports=y()})(b3,function(){var f,y,x;function _(o,z){if(!f)f=z;else if(!y)y=z;else{var P="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",F={};f(F),x=z(F),typeof window<"u"&&(x.workerUrl=window.URL.createObjectURL(new Blob([P],{type:"text/javascript"})))}}return _(["exports"],function(o){function z(e,t){return e(t={exports:{}},t.exports),t.exports}var P=F;function F(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}F.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},F.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},F.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},F.prototype.solveCurveX=function(e,t){var i,l,p,d,v;for(t===void 0&&(t=1e-6),p=e,v=0;v<8;v++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var I=this.sampleCurveDerivativeX(p);if(Math.abs(I)<1e-6)break;p-=d/I}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},F.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var V=j;function j(e,t){this.x=e,this.y=t}j.prototype={clone:function(){return new j(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},j.convert=function(e){return e instanceof j?e:Array.isArray(e)?new j(e[0],e[1]):e};var U=typeof self<"u"?self:{},pe=Math.pow(2,53)-1;function he(e,t,i,l){var p=new P(e,t,i,l);return function(d){return p.solve(d)}}var Ie=he(.25,.1,.25,1);function we(e,t,i){return Math.min(i,Math.max(t,e))}function Oe(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}var Bt=1;function Mt(){return Bt++}function mt(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Je(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Tr(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function wr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function or(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function kt(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function At(e){return Array.isArray(e)?e.map(At):typeof e=="object"&&e?or(e,At):e}var Pr={};function Ot(e){Pr[e]||(typeof console<"u"&&console.warn(e),Pr[e]=!0)}function Ar(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function rt(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,v=void 0;i<l;p=i++)t+=((v=e[p]).x-(d=e[i]).x)*(d.y+v.y);return t}function ur(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $r(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,v){var I=d||v;return t[p]=!I||I.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var li=null;function kr(e){if(li==null){var t=e.navigator?e.navigator.userAgent:null;li=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return li}function vt(e){try{var t=U[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var nt,dr,Un,la,Mi=U.performance&&U.performance.now?U.performance.now.bind(U.performance):Date.now.bind(Date),_n=U.requestAnimationFrame||U.mozRequestAnimationFrame||U.webkitRequestAnimationFrame||U.msRequestAnimationFrame,ri=U.cancelAnimationFrame||U.mozCancelAnimationFrame||U.webkitCancelAnimationFrame||U.msCancelAnimationFrame,Ia={now:Mi,frame:function(e){var t=_n(e);return{cancel:function(){return ri(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=U.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return nt||(nt=U.document.createElement("a")),nt.href=e,nt.href},hardwareConcurrency:U.navigator&&U.navigator.hardwareConcurrency||4,get devicePixelRatio(){return U.devicePixelRatio},get prefersReducedMotion(){return!!U.matchMedia&&(dr==null&&(dr=U.matchMedia("(prefers-reduced-motion: reduce)")),dr.matches)}},br={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},qn={supported:!1,testSupport:function(e){!Ya&&la&&(qr?Lt(e):Un=e)}},Ya=!1,qr=!1;function Lt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,la),e.isContextLost())return;qn.supported=!0}catch{}e.deleteTexture(t),Ya=!0}U.document&&((la=U.document.createElement("img")).onload=function(){Un&&Lt(Un),Un=null,qr=!0},la.onerror=function(){Ya=!0,Un=null},la.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Yi="01",Ni=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function ui(e){return e.indexOf("mapbox:")===0}Ni.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Yi,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Ni.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ni.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Ni.prototype.normalizeStyleURL=function(e,t){if(!ui(e))return e;var i=Lr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Ni.prototype.normalizeGlyphsURL=function(e,t){if(!ui(e))return e;var i=Lr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Ni.prototype.normalizeSourceURL=function(e,t){if(!ui(e))return e;var i=Lr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Ni.prototype.normalizeSpriteURL=function(e,t,i,l){var p=Lr(e);return ui(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,_i(p))},Ni.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ui(e))return e;var i=Lr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ia.devicePixelRatio>=2||t===512?"@2x":"")+(qn.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,v=p;d<v.length;d+=1){var I=v[d].match(/^access_token=(.*)$/);if(I)return I[1]}return null}(i.params)||br.ACCESS_TOKEN;return br.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Ni.prototype.canonicalizeTileURL=function(e,t){var i=Lr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Ni.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&ui(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var v=d[p];Wt(v)?l.push(this.canonicalizeTileURL(v,i)):l.push(v)}return l},Ni.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=Lr(br.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!br.REQUIRE_ACCESS_TOKEN)return _i(e);if(!(t=t||br.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),_i(e)};var fo=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Wt(e){return fo.test(e)}var ki=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Lr(e){var t=e.match(ki);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function _i(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function bi(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(U.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Cr=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Cr.prototype.getStorageKey=function(e){var t,i=bi(br.ACCESS_TOKEN);return t=i&&i.u?U.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(Number("0x"+p))})):br.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Cr.prototype.fetchEventData=function(){var e=vt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=U.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=U.localStorage.getItem(i);p&&(this.anonId=p)}catch{Ot("Unable to read from LocalStorage")}},Cr.prototype.saveEventData=function(){var e=vt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{U.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&U.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ot("Unable to write to LocalStorage")}},Cr.prototype.processRequests=function(e){},Cr.prototype.postEvent=function(e,t,i,l){var p=this;if(br.EVENTS_URL){var d=Lr(br.EVENTS_URL);d.params.push("access_token="+(l||br.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Yi,userId:this.anonId},I=t?Ue(v,t):v,C={url:_i(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([I])};this.pendingRequest=Zr(C,function(D){p.pendingRequest=null,i(D),p.saveEventData(),p.processRequests(l)})}},Cr.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var xi,on,Kr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p,(br.EVENTS_URL&&d||br.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(v){return ui(v)||Wt(v)}))&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,v=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),Je(this.anonId)||(this.anonId=mt()),this.postEvent(v,{skuToken:this.skuToken},function(I){I||d&&(l.success[d]=!0)},i))}},t}(Cr),hr=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){br.EVENTS_URL&&br.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return ui(p)||Wt(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=bi(br.ACCESS_TOKEN),d=p?p.u:br.ACCESS_TOKEN,v=d!==this.eventData.tokenU;Je(this.anonId)||(this.anonId=mt(),v=!0);var I=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),D=new Date(I),O=(I-this.eventData.lastSuccess)/864e5;v=v||O>=1||O<-1||C.getDate()!==D.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(I,{"enabled.telemetry":!1},function(q){q||(l.eventData.lastSuccess=I,l.eventData.tokenU=d)},i)}},t}(Cr)),jr=hr.postTurnstileEvent.bind(hr),ea=new Kr,jn=ea.postMapLoadEvent.bind(ea),Ra=500,$o=50;function ci(){U.caches&&!xi&&(xi=U.caches.open("mapbox-tiles"))}function sn(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var bn,mo=1/0;function ua(){return bn==null&&(bn=U.OffscreenCanvas&&new U.OffscreenCanvas(1,1).getContext("2d")&&typeof U.createImageBitmap=="function"),bn}var ll={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ll);var es=function(e){function t(i,l,p){l===401&&Wt(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Zn=ur()?function(){return self.worker&&self.worker.referrer}:function(){return(U.location.protocol==="blob:"?U.parent:U).location.href},xn,ca,ta=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Zn())&&!/^\w+:/.test(i))){if(U.fetch&&U.Request&&U.AbortController&&U.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,v=new U.AbortController,I=new U.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Zn(),signal:v.signal}),C=!1,D=!1,O=(d=I.url).indexOf("sku=")>0&&Wt(d);l.type==="json"&&I.headers.set("Accept","application/json");var q=function(W,ne,le){if(!D){if(W&&W.message!=="SecurityError"&&Ot(W),ne&&le)return K(ne);var ye=Date.now();U.fetch(I).then(function(fe){if(fe.ok){var Ee=O?fe.clone():null;return K(fe,Ee,ye)}return p(new es(fe.statusText,fe.status,l.url))}).catch(function(fe){fe.code!==20&&p(new Error(fe.message))})}},K=function(W,ne,le){(l.type==="arrayBuffer"?W.arrayBuffer():l.type==="json"?W.json():W.text()).then(function(ye){D||(ne&&le&&function(fe,Ee,Ae){if(ci(),xi){var Ce={status:Ee.status,statusText:Ee.statusText,headers:new U.Headers};Ee.headers.forEach(function(Fe,Ke){return Ce.headers.set(Ke,Fe)});var De=$r(Ee.headers.get("Cache-Control")||"");De["no-store"]||(De["max-age"]&&Ce.headers.set("Expires",new Date(Ae+1e3*De["max-age"]).toUTCString()),new Date(Ce.headers.get("Expires")).getTime()-Ae<42e4||function(Fe,Ke){if(on===void 0)try{new Response(new ReadableStream),on=!0}catch{on=!1}on?Ke(Fe.body):Fe.blob().then(Ke)}(Ee,function(Fe){var Ke=new U.Response(Fe,Ce);ci(),xi&&xi.then(function(Ye){return Ye.put(sn(fe.url),Ke)}).catch(function(Ye){return Ot(Ye.message)})}))}}(I,ne,le),C=!0,p(null,ye,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(function(ye){D||p(new Error(ye.message))})};return O?function(W,ne){if(ci(),!xi)return ne(null);var le=sn(W.url);xi.then(function(ye){ye.match(le).then(function(fe){var Ee=function(Ae){if(!Ae)return!1;var Ce=new Date(Ae.headers.get("Expires")||0),De=$r(Ae.headers.get("Cache-Control")||"");return Ce>Date.now()&&!De["no-cache"]}(fe);ye.delete(le),Ee&&ye.put(le,fe.clone()),ne(null,fe,Ee)}).catch(ne)}).catch(ne)}(I,q):q(null,null),{cancel:function(){D=!0,C||v.abort()}}}(e,t);if(ur()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new U.XMLHttpRequest;for(var v in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(v,l.headers[v]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var I=d.response;if(l.type==="json")try{I=JSON.parse(d.response)}catch(C){return p(C)}p(null,I,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new es(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},ha=function(e,t){return ta(Ue(e,{type:"arrayBuffer"}),t)},Zr=function(e,t){return ta(Ue(e,{method:"POST"}),t)},N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";xn=[],ca=0;var G=function(e,t){if(qn.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ca>=br.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return xn.push(i),i}ca++;var l=!1,p=function(){if(!l)for(l=!0,ca--;xn.length&&ca<br.MAX_PARALLEL_IMAGE_REQUESTS;){var v=xn.shift();v.cancelled||(v.cancel=G(v.requestParameters,v.callback).cancel)}},d=ha(e,function(v,I,C,D){p(),v?t(v):I&&(ua()?function(O,q){var K=new U.Blob([new Uint8Array(O)],{type:"image/png"});U.createImageBitmap(K).then(function(W){q(null,W)}).catch(function(W){q(new Error("Could not load image because of "+W.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(I,t):function(O,q,K,W){var ne=new U.Image,le=U.URL;ne.onload=function(){q(null,ne),le.revokeObjectURL(ne.src),ne.onload=null,U.requestAnimationFrame(function(){ne.src=N})},ne.onerror=function(){return q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ye=new U.Blob([new Uint8Array(O)],{type:"image/png"});ne.cacheControl=K,ne.expires=W,ne.src=O.byteLength?le.createObjectURL(ye):N}(I,t,C,D))});return{cancel:function(){d.cancel(),p()}}};function X(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function re(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var ce=function(e,t){t===void 0&&(t={}),Ue(this,t),this.type=e},ve=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",Ue({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ce),be=function(){};be.prototype.on=function(e,t){return this._listeners=this._listeners||{},X(e,t,this._listeners),this},be.prototype.off=function(e,t){return re(e,t,this._listeners),re(e,t,this._oneTimeListeners),this},be.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},X(e,t,this._oneTimeListeners),this},be.prototype.fire=function(e,t){typeof e=="string"&&(e=new ce(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var I=v[d];re(i,I,this._oneTimeListeners),I.call(this,e)}var C=this._eventedParent;C&&(Ue(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(e))}else e instanceof ve&&console.error(e.error);return this},be.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},be.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var H={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},se=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function Se(e){var t=e.value;return t?[new se(e.key,t,"constants have been deprecated as of v8")]:[]}function Ne(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}function Ge(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Le(e){if(Array.isArray(e))return e.map(Le);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Le(e[i]);return t}return Ge(e)}var qe=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),pt=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};pt.prototype.concat=function(e){return new pt(this,e)},pt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},pt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var at={kind:"null"},Be={kind:"number"},tt={kind:"string"},We={kind:"boolean"},Qe={kind:"color"},Ft={kind:"object"},Ze={kind:"value"},Gt={kind:"collator"},sr={kind:"formatted"},Pt={kind:"resolvedImage"};function Qt(e,t){return{kind:"array",itemType:e,N:t}}function Jt(e){if(e.kind==="array"){var t=Jt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Li=[at,Be,tt,We,Qe,sr,Ft,Qt(Ze),Pt];function $t(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!$t(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=Li;i<l.length;i+=1)if(!$t(l[i],t))return null}}return"Expected "+Jt(e)+" but found "+Jt(t)+" instead."}function mr(e,t){return t.some(function(i){return i.kind===e.kind})}function pr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Xt=z(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(I){return(I=Math.round(I))<0?0:I>255?255:I}function p(I){return l(I[I.length-1]==="%"?parseFloat(I)/100*255:parseInt(I))}function d(I){return(C=I[I.length-1]==="%"?parseFloat(I)/100:parseFloat(I))<0?0:C>1?1:C;var C}function v(I,C,D){return D<0?D+=1:D>1&&(D-=1),6*D<1?I+(C-I)*D*6:2*D<1?C:3*D<2?I+(C-I)*(2/3-D)*6:I}try{t.parseCSSColor=function(I){var C,D=I.replace(/ /g,"").toLowerCase();if(D in i)return i[D].slice();if(D[0]==="#")return D.length===4?(C=parseInt(D.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:D.length===7&&(C=parseInt(D.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var O=D.indexOf("("),q=D.indexOf(")");if(O!==-1&&q+1===D.length){var K=D.substr(0,O),W=D.substr(O+1,q-(O+1)).split(","),ne=1;switch(K){case"rgba":if(W.length!==4)return null;ne=d(W.pop());case"rgb":return W.length!==3?null:[p(W[0]),p(W[1]),p(W[2]),ne];case"hsla":if(W.length!==4)return null;ne=d(W.pop());case"hsl":if(W.length!==3)return null;var le=(parseFloat(W[0])%360+360)%360/360,ye=d(W[1]),fe=d(W[2]),Ee=fe<=.5?fe*(ye+1):fe+ye-fe*ye,Ae=2*fe-Ee;return[l(255*v(Ae,Ee,le+1/3)),l(255*v(Ae,Ee,le)),l(255*v(Ae,Ee,le-1/3)),ne];default:return null}}return null}}catch{}}).parseCSSColor,nr=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};nr.parse=function(e){if(e){if(e instanceof nr)return e;if(typeof e=="string"){var t=Xt(e);if(t)return new nr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},nr.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},nr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},nr.black=new nr(0,0,0,1),nr.white=new nr(1,1,1,1),nr.transparent=new nr(0,0,0,0),nr.red=new nr(1,0,0,1);var Ui=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ui.prototype.compare=function(e,t){return this.collator.compare(e,t)},Ui.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pa=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},wi=function(e){this.sections=e};wi.fromString=function(e){return new wi([new pa(e,null,null,null,null)])},wi.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},wi.factory=function(e){return e instanceof wi?e:wi.fromString(e)},wi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},wi.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var Ji=function(e){this.name=e.name,this.available=e.available};function wn(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Qi(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof nr||e instanceof Ui||e instanceof wi||e instanceof Ji)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!Qi(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!Qi(e[l]))return!1;return!0}return!1}function yr(e){if(e===null)return at;if(typeof e=="string")return tt;if(typeof e=="boolean")return We;if(typeof e=="number")return Be;if(e instanceof nr)return Qe;if(e instanceof Ui)return Gt;if(e instanceof wi)return sr;if(e instanceof Ji)return Pt;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=yr(p[l]);if(t){if(t===d)continue;t=Ze;break}t=d}return Qt(t||Ze,i)}return Ft}function Gn(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof nr||e instanceof wi||e instanceof Ji?e.toString():JSON.stringify(e)}Ji.prototype.toString=function(){return this.name},Ji.fromString=function(e){return e?new Ji({name:e,available:!1}):null},Ji.prototype.serialize=function(){return["image",this.name]};var qi=function(e,t){this.type=e,this.value=t};qi.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Qi(e[1]))return t.error("invalid value");var i=e[1],l=yr(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new qi(l,i)},qi.prototype.evaluate=function(){return this.value},qi.prototype.eachChild=function(){},qi.prototype.outputDefined=function(){return!0},qi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof nr?["rgba"].concat(this.value.toArray()):this.value instanceof wi?this.value.serialize():this.value};var Hr=function(e){this.name="ExpressionEvaluationError",this.message=e};Hr.prototype.toJSON=function(){return this.message};var ra={string:tt,number:Be,boolean:We,object:Ft},Dr=function(e,t){this.type=e,this.args=t};Dr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,v;if(e.length>2){var I=e[1];if(typeof I!="string"||!(I in ra)||I==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=ra[I],l++}else d=Ze;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);v=e[2],l++}i=Qt(d,v)}else i=ra[p];for(var C=[];l<e.length;l++){var D=t.parse(e[l],l,Ze);if(!D)return null;C.push(D)}return new Dr(i,C)},Dr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!$t(this.type,yr(i)))return i;if(t===this.args.length-1)throw new Hr("Expected value to be of type "+Jt(this.type)+", but found "+Jt(yr(i))+" instead.")}return null},Dr.prototype.eachChild=function(e){this.args.forEach(e)},Dr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Dr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var En=function(e){this.type=sr,this.sections=e};En.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var v=e[d];if(p&&typeof v=="object"&&!Array.isArray(v)){p=!1;var I=null;if(v["font-scale"]&&!(I=t.parse(v["font-scale"],1,Be)))return null;var C=null;if(v["text-font"]&&!(C=t.parse(v["text-font"],1,Qt(tt))))return null;var D=null;if(v["text-color"]&&!(D=t.parse(v["text-color"],1,Qe)))return null;var O=l[l.length-1];O.scale=I,O.font=C,O.textColor=D}else{var q=t.parse(e[d],1,Ze);if(!q)return null;var K=q.type.kind;if(K!=="string"&&K!=="value"&&K!=="null"&&K!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:q,scale:null,font:null,textColor:null})}}return new En(l)},En.prototype.evaluate=function(e){return new wi(this.sections.map(function(t){var i=t.content.evaluate(e);return yr(i)===Pt?new pa("",i,null,null,null):new pa(Gn(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},En.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},En.prototype.outputDefined=function(){return!1},En.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var ln=function(e){this.type=Pt,this.input=e};ln.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,tt);return i?new ln(i):t.error("No image name provided.")},ln.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=Ji.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},ln.prototype.eachChild=function(e){e(this.input)},ln.prototype.outputDefined=function(){return!1},ln.prototype.serialize=function(){return["image",this.input.serialize()]};var Ku={"to-boolean":We,"to-color":Qe,"to-number":Be,"to-string":tt},ji=function(e,t){this.type=e,this.args=t};ji.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=Ku[i],p=[],d=1;d<e.length;d++){var v=t.parse(e[d],d,Ze);if(!v)return null;p.push(v)}return new ji(l,p)},ji.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof nr)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":wn(t[0],t[1],t[2],t[3])))return new nr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Hr(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var v=null,I=0,C=this.args;I<C.length;I+=1){if((v=C[I].evaluate(e))===null)return 0;var D=Number(v);if(!isNaN(D))return D}throw new Hr("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?wi.fromString(Gn(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ji.fromString(Gn(this.args[0].evaluate(e))):Gn(this.args[0].evaluate(e))},ji.prototype.eachChild=function(e){this.args.forEach(e)},ji.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ji.prototype.serialize=function(){if(this.type.kind==="formatted")return new En([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ln(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var yo=["Unknown","Point","LineString","Polygon"],un=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};un.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},un.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?yo[this.feature.type]:this.feature.type:null},un.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},un.prototype.canonicalID=function(){return this.canonical},un.prototype.properties=function(){return this.feature&&this.feature.properties||{}},un.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=nr.parse(e)),t};var Xr=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};Xr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Xr.prototype.eachChild=function(e){this.args.forEach(e)},Xr.prototype.outputDefined=function(){return!1},Xr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Xr.parse=function(e,t){var i,l=e[0],p=Xr.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,I=v.filter(function(bt){var lt=bt[0];return!Array.isArray(lt)||lt.length===e.length-1}),C=null,D=0,O=I;D<O.length;D+=1){var q=O[D],K=q[0],W=q[1];C=new Wr(t.registry,t.path,null,t.scope);for(var ne=[],le=!1,ye=1;ye<e.length;ye++){var fe=e[ye],Ee=Array.isArray(K)?K[ye-1]:K.type,Ae=C.parse(fe,1+ne.length,Ee);if(!Ae){le=!0;break}ne.push(Ae)}if(!le)if(Array.isArray(K)&&K.length!==ne.length)C.error("Expected "+K.length+" arguments, but found "+ne.length+" instead.");else{for(var Ce=0;Ce<ne.length;Ce++){var De=Array.isArray(K)?K[Ce]:K.type,Fe=ne[Ce];C.concat(Ce+1).checkSubtype(De,Fe.type)}if(C.errors.length===0)return new Xr(l,d,W,ne)}}if(I.length===1)(i=t.errors).push.apply(i,C.errors);else{for(var Ke=(I.length?I:v).map(function(bt){var lt;return lt=bt[0],Array.isArray(lt)?"("+lt.map(Jt).join(", ")+")":"("+Jt(lt.type)+"...)"}).join(" | "),Ye=[],_t=1;_t<e.length;_t++){var it=t.parse(e[_t],1+Ye.length);if(!it)return null;Ye.push(Jt(it.type))}t.error("Expected arguments of type "+Ke+", but found ("+Ye.join(", ")+") instead.")}return null},Xr.register=function(e,t){for(var i in Xr.definitions=t,t)e[i]=Xr};var Ri=function(e,t,i){this.type=Gt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function hi(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function vo(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function ts(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function bd(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function ul(e,t){for(var i,l,p,d,v,I,C,D=!1,O=0,q=t.length;O<q;O++)for(var K=t[O],W=0,ne=K.length;W<ne-1;W++){if((d=(i=e)[0]-(l=K[W])[0])*(C=i[1]-(p=K[W+1])[1])-(I=i[0]-p[0])*(v=i[1]-l[1])==0&&d*I<=0&&v*C<=0)return!1;bd(e,K[W],K[W+1])&&(D=!D)}return D}function cl(e,t){for(var i=0;i<t.length;i++)if(ul(e,t[i]))return!0;return!1}function rs(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],v=(e[0]-i[0])*d-p*(e[1]-i[1]),I=(t[0]-i[0])*d-p*(t[1]-i[1]);return v>0&&I<0||v<0&&I>0}function ep(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],v=0;v<d.length-1;++v)if((q=[(O=d[v+1])[0]-(D=d[v])[0],O[1]-D[1]])[0]*(K=[(C=t)[0]-(I=e)[0],C[1]-I[1]])[1]-q[1]*K[0]!=0&&rs(I,C,D,O)&&rs(D,O,I,C))return!0;var I,C,D,O,q,K;return!1}function Yl(e,t){for(var i=0;i<e.length;++i)if(!ul(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(ep(e[l],e[l+1],t))return!1;return!0}function is(e,t){for(var i=0;i<t.length;i++)if(Yl(e,t[i]))return!0;return!1}function go(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],v=0;v<e[p].length;v++){var I=ts(e[p][v],i);hi(t,I),d.push(I)}l.push(d)}return l}function Jl(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=go(e[p],t,i);l.push(d)}return l}function hl(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}hi(t,e)}function qc(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],v=[],I=0,C=e;I<C.length;I+=1)for(var D=0,O=C[I];D<O.length;D+=1){var q=O[D],K=[q.x+d[0],q.y+d[1]];hl(K,t,i,p),v.push(K)}return v}function Sn(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),v=[8192*l.x,8192*l.y],I=[],C=0,D=e;C<D.length;C+=1){for(var O=[],q=0,K=D[C];q<K.length;q+=1){var W=K[q],ne=[W.x+v[0],W.y+v[1]];hi(t,ne),O.push(ne)}I.push(O)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var le=0,ye=I;le<ye.length;le+=1)for(var fe=0,Ee=ye[le];fe<Ee.length;fe+=1)hl(Ee[fe],t,i,d)}return I}Ri.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,We);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,We);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,tt))?null:new Ri(l,p,d)},Ri.prototype.evaluate=function(e){return new Ui(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Ri.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Ri.prototype.outputDefined=function(){return!1},Ri.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Ii=function(e,t){this.type=We,this.geojson=e,this.geometries=t};function Kn(e){if(e instanceof Xr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Ii)return!1;var t=!0;return e.eachChild(function(i){t&&!Kn(i)&&(t=!1)}),t}function ke(e){if(e instanceof Xr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!ke(i)&&(t=!1)}),t}function Zi(e,t){if(e instanceof Xr&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!Zi(l,t)&&(i=!1)}),i}Ii.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Qi(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Ii(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Ii(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Ii(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ii.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=go(i.coordinates,p,d),I=qc(t.geometry(),l,p,d);if(!vo(l,p))return!1;for(var C=0,D=I;C<D.length;C+=1)if(!ul(D[C],v))return!1}if(i.type==="MultiPolygon"){var O=Jl(i.coordinates,p,d),q=qc(t.geometry(),l,p,d);if(!vo(l,p))return!1;for(var K=0,W=q;K<W.length;K+=1)if(!cl(W[K],O))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=go(i.coordinates,p,d),I=Sn(t.geometry(),l,p,d);if(!vo(l,p))return!1;for(var C=0,D=I;C<D.length;C+=1)if(!Yl(D[C],v))return!1}if(i.type==="MultiPolygon"){var O=Jl(i.coordinates,p,d),q=Sn(t.geometry(),l,p,d);if(!vo(l,p))return!1;for(var K=0,W=q;K<W.length;K+=1)if(!is(W[K],O))return!1}return!0}(e,this.geometries)}return!1},Ii.prototype.eachChild=function(){},Ii.prototype.outputDefined=function(){return!0},Ii.prototype.serialize=function(){return["within",this.geojson]};var Pn=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Pn.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Pn(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Pn.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Pn.prototype.eachChild=function(){},Pn.prototype.outputDefined=function(){return!1},Pn.prototype.serialize=function(){return["var",this.name]};var Wr=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new pt),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function fa(e,t){for(var i,l=e.length-1,p=0,d=l,v=0;p<=d;)if((i=e[v=Math.floor((p+d)/2)])<=t){if(v===l||t<e[v+1])return v;p=v+1}else{if(!(i>t))throw new Hr("Input is not a number.");d=v-1}return 0}Wr.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},Wr.prototype._parse=function(e,t){function i(D,O,q){return q==="assert"?new Dr(O,[D]):q==="coerce"?new ji(O,[D]):D}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,I=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||I.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(v,I))return null}else d=i(d,v,t.typeAnnotation||"coerce");else d=i(d,v,t.typeAnnotation||"assert")}if(!(d instanceof qi)&&d.type.kind!=="resolvedImage"&&function D(O){if(O instanceof Pn)return D(O.boundExpression);if(O instanceof Xr&&O.name==="error"||O instanceof Ri||O instanceof Ii)return!1;var q=O instanceof ji||O instanceof Dr,K=!0;return O.eachChild(function(W){K=q?K&&D(W):K&&W instanceof qi}),!!K&&Kn(O)&&Zi(O,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var C=new un;try{d=new qi(d.type,d.evaluate(C))}catch(D){return this.error(D.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Wr.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Wr(this.registry,l,t||null,p,this.errors)},Wr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new qe(l,e))},Wr.prototype.checkSubtype=function(e,t){var i=$t(e,t);return i&&this.error(i),i};var Cn=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function Bi(e,t,i){return e*(1-i)+t*i}Cn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Be);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],I=e[d+1],C=d,D=d+1;if(typeof v!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(l.length&&l[l.length-1][0]>=v)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var O=t.parse(I,D,p);if(!O)return null;p=p||O.type,l.push([v,O])}return new Cn(p,i,l)},Cn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[fa(t,l)].evaluate(e)},Cn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Cn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Cn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Ql=Object.freeze({__proto__:null,number:Bi,color:function(e,t,i){return new nr(Bi(e.r,t.r,i),Bi(e.g,t.g,i),Bi(e.b,t.b,i),Bi(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return Bi(l,t[p],i)})}}),$l=6/29*3*(6/29),tp=Math.PI/180,hf=180/Math.PI;function rp(e){return e>.008856451679035631?Math.pow(e,1/3):e/$l+4/29}function pf(e){return e>6/29?e*e*e:$l*(e-4/29)}function ip(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ps(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function eu(e){var t=Ps(e.r),i=Ps(e.g),l=Ps(e.b),p=rp((.4124564*t+.3575761*i+.1804375*l)/.95047),d=rp((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-rp((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function _o(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*pf(t),i=.95047*pf(i),l=1.08883*pf(l),new nr(ip(3.2404542*i-1.5371385*t-.4985314*l),ip(-.969266*i+1.8760108*t+.041556*l),ip(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function jc(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var Hu={forward:eu,reverse:_o,interpolate:function(e,t,i){return{l:Bi(e.l,t.l,i),a:Bi(e.a,t.a,i),b:Bi(e.b,t.b,i),alpha:Bi(e.alpha,t.alpha,i)}}},Xu={forward:function(e){var t=eu(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*hf;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*tp,i=e.c;return _o({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:jc(e.h,t.h,i),c:Bi(e.c,t.c,i),l:Bi(e.l,t.l,i),alpha:Bi(e.alpha,t.alpha,i)}}},pl=Object.freeze({__proto__:null,lab:Hu,hcl:Xu}),ii=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,v=p;d<v.length;d+=1){var I=v[d],C=I[1];this.labels.push(I[0]),this.outputs.push(C)}};function np(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}ii.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=np(t,e.base,i,l);else if(e.name==="linear")p=np(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new P(d[0],d[1],d[2],d[3]).solve(np(t,1,i,l))}return p},ii.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var v=l[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:v}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var I=l.slice(1);if(I.length!==4||I.some(function(ye){return typeof ye!="number"||ye<0||ye>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:I}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Be)))return null;var C=[],D=null;i==="interpolate-hcl"||i==="interpolate-lab"?D=Qe:t.expectedType&&t.expectedType.kind!=="value"&&(D=t.expectedType);for(var O=0;O<d.length;O+=2){var q=d[O],K=d[O+1],W=O+3,ne=O+4;if(typeof q!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(C.length&&C[C.length-1][0]>=q)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);var le=t.parse(K,ne,D);if(!le)return null;D=D||le.type,C.push([q,le])}return D.kind==="number"||D.kind==="color"||D.kind==="array"&&D.itemType.kind==="number"&&typeof D.N=="number"?new ii(D,i,l,p,C):t.error("Type "+Jt(D)+" is not interpolatable.")},ii.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=fa(t,l),v=ii.interpolationFactor(this.interpolation,l,t[d],t[d+1]),I=i[d].evaluate(e),C=i[d+1].evaluate(e);return this.operator==="interpolate"?Ql[this.type.kind.toLowerCase()](I,C,v):this.operator==="interpolate-hcl"?Xu.reverse(Xu.interpolate(Xu.forward(I),Xu.forward(C),v)):Hu.reverse(Hu.interpolate(Hu.forward(I),Hu.forward(C),v))},ii.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},ii.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},ii.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var bo=function(e,t){this.type=e,this.args=t};bo.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,v=e.slice(1);d<v.length;d+=1){var I=t.parse(v[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!I)return null;i=i||I.type,p.push(I)}var C=l&&p.some(function(D){return $t(l,D.type)});return new bo(C?Ze:i,p)},bo.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof Ji&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},bo.prototype.eachChild=function(e){this.args.forEach(e)},bo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},bo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ns=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};ns.prototype.evaluate=function(e){return this.result.evaluate(e)},ns.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},ns.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var v=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return v?new ns(i,v):null},ns.prototype.outputDefined=function(){return this.result.outputDefined()},ns.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var fl=function(e,t,i){this.type=e,this.index=t,this.input=i};fl.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Be),l=t.parse(e[2],2,Qt(t.expectedType||Ze));return i&&l?new fl(l.type.itemType,i,l):null},fl.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Hr("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new Hr("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new Hr("Array index must be an integer, but found "+t+" instead.");return i[t]},fl.prototype.eachChild=function(e){e(this.index),e(this.input)},fl.prototype.outputDefined=function(){return!1},fl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xo=function(e,t){this.type=We,this.needle=e,this.haystack=t};xo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ze),l=t.parse(e[2],2,Ze);return i&&l?mr(i.type,[We,tt,Be,at,Ze])?new xo(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(i.type)+" instead"):null},xo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!pr(t,["boolean","string","number","null"]))throw new Hr("Expected first argument to be of type boolean, string, number or null, but found "+Jt(yr(t))+" instead.");if(!pr(i,["string","array"]))throw new Hr("Expected second argument to be of type array or string, but found "+Jt(yr(i))+" instead.");return i.indexOf(t)>=0},xo.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},xo.prototype.outputDefined=function(){return!0},xo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Cs=function(e,t,i){this.type=Be,this.needle=e,this.haystack=t,this.fromIndex=i};Cs.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ze),l=t.parse(e[2],2,Ze);if(!i||!l)return null;if(!mr(i.type,[We,tt,Be,at,Ze]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Be);return p?new Cs(i,l,p):null}return new Cs(i,l)},Cs.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!pr(t,["boolean","string","number","null"]))throw new Hr("Expected first argument to be of type boolean, string, number or null, but found "+Jt(yr(t))+" instead.");if(!pr(i,["string","array"]))throw new Hr("Expected second argument to be of type array or string, but found "+Jt(yr(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},Cs.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Cs.prototype.outputDefined=function(){return!1},Cs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var dl=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};dl.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],v=2;v<e.length-1;v+=2){var I=e[v],C=e[v+1];Array.isArray(I)||(I=[I]);var D=t.concat(v);if(I.length===0)return D.error("Expected at least one branch label.");for(var O=0,q=I;O<q.length;O+=1){var K=q[O];if(typeof K!="number"&&typeof K!="string")return D.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return D.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof K=="number"&&Math.floor(K)!==K)return D.error("Numeric branch labels must be integer values.");if(i){if(D.checkSubtype(i,yr(K)))return null}else i=yr(K);if(p[String(K)]!==void 0)return D.error("Branch labels must be unique.");p[String(K)]=d.length}var W=t.parse(C,v,l);if(!W)return null;l=l||W.type,d.push(W)}var ne=t.parse(e[1],1,Ze);if(!ne)return null;var le=t.parse(e[e.length-1],e.length-1,l);return le?ne.type.kind!=="value"&&t.concat(1).checkSubtype(i,ne.type)?null:new dl(i,l,ne,p,d,le):null},dl.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(yr(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},dl.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},dl.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},dl.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var v=d[p];(q=l[this.cases[v]])===void 0?(l[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[q][1].push(v)}for(var I=function(W){return e.inputType.kind==="number"?Number(W):W},C=0,D=i;C<D.length;C+=1){var O=D[C],q=O[0],K=O[1];t.push(K.length===1?I(K[0]):K.map(I)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Dn=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};Dn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,We);if(!d)return null;var v=t.parse(e[p+1],p+1,i);if(!v)return null;l.push([d,v]),i=i||v.type}var I=t.parse(e[e.length-1],e.length-1,i);return I?new Dn(i,l,I):null},Dn.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},Dn.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},Dn.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Dn.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var $i=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function Ja(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Ds(e,t,i,l){return l.compare(t,i)===0}function Rr(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,v,I){this.type=We,this.lhs=d,this.rhs=v,this.collator=I,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return p.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var I=d[0],C=v.parse(d[1],1,Ze);if(!C)return null;if(!Ja(I,C.type))return v.concat(1).error('"'+I+`" comparisons are not supported for type '`+Jt(C.type)+"'.");var D=v.parse(d[2],2,Ze);if(!D)return null;if(!Ja(I,D.type))return v.concat(2).error('"'+I+`" comparisons are not supported for type '`+Jt(D.type)+"'.");if(C.type.kind!==D.type.kind&&C.type.kind!=="value"&&D.type.kind!=="value")return v.error("Cannot compare types '"+Jt(C.type)+"' and '"+Jt(D.type)+"'.");l&&(C.type.kind==="value"&&D.type.kind!=="value"?C=new Dr(D.type,[C]):C.type.kind!=="value"&&D.type.kind==="value"&&(D=new Dr(C.type,[D])));var O=null;if(d.length===4){if(C.type.kind!=="string"&&D.type.kind!=="string"&&C.type.kind!=="value"&&D.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(O=v.parse(d[3],3,Gt)))return null}return new p(C,D,O)},p.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),I=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var C=yr(v),D=yr(I);if(C.kind!==D.kind||C.kind!=="string"&&C.kind!=="number")throw new Hr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+C.kind+", "+D.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var O=yr(v),q=yr(I);if(O.kind!=="string"||q.kind!=="string")return t(d,v,I)}return this.collator?i(d,v,I,this.collator.evaluate(d)):t(d,v,I)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},p}()}$i.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ze),l=t.parse(e[2],2,Be);if(!i||!l)return null;if(!mr(i.type,[Qt(Ze),tt,Ze]))return t.error("Expected first argument to be of type array or string, but found "+Jt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Be);return p?new $i(i.type,i,l,p):null}return new $i(i.type,i,l)},$i.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!pr(t,["string","array"]))throw new Hr("Expected first argument to be of type array or string, but found "+Jt(yr(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},$i.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},$i.prototype.outputDefined=function(){return!1},$i.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Wu=Rr("==",function(e,t,i){return t===i},Ds),ff=Rr("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!Ds(0,t,i,l)}),df=Rr("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),tu=Rr(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),ru=Rr("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),mf=Rr(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),Qa=function(e,t,i,l,p){this.type=tt,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};Qa.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Be);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,tt)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,tt)))return null;var v=null;if(l["min-fraction-digits"]&&!(v=t.parse(l["min-fraction-digits"],1,Be)))return null;var I=null;return l["max-fraction-digits"]&&!(I=t.parse(l["max-fraction-digits"],1,Be))?null:new Qa(i,p,d,v,I)},Qa.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Qa.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Qa.prototype.outputDefined=function(){return!1},Qa.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var wo=function(e){this.type=Be,this.input=e};wo.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Jt(i.type)+" instead."):new wo(i):null},wo.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Hr("Expected value to be of type string or array, but found "+Jt(yr(t))+" instead.")},wo.prototype.eachChild=function(e){e(this.input)},wo.prototype.outputDefined=function(){return!1},wo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ml={"==":Wu,"!=":ff,">":tu,"<":df,">=":mf,"<=":ru,array:Dr,at:fl,boolean:Dr,case:Dn,coalesce:bo,collator:Ri,format:En,image:ln,in:xo,"index-of":Cs,interpolate:ii,"interpolate-hcl":ii,"interpolate-lab":ii,length:wo,let:ns,literal:qi,match:dl,number:Dr,"number-format":Qa,object:Dr,slice:$i,step:Cn,string:Dr,"to-boolean":ji,"to-color":ji,"to-number":ji,"to-string":ji,var:Pn,within:Ii};function yf(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var v=d?d.evaluate(e):1,I=wn(i,l,p,v);if(I)throw new Hr(I);return new nr(i/255*v,l/255*v,p/255*v,v)}function yl(e,t){return e in t}function Ms(e,t){var i=t[e];return i===void 0?null:i}function vl(e){return{type:e}}function ap(e){return{result:"success",value:e}}function as(e){return{result:"error",value:e}}function Ba(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function vf(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Eo(e){return!!e.expression&&e.expression.interpolated}function Ir(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Zc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function xd(e){return e}function $a(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function gf(e,t,i,l,p){return $a(typeof i===p?l[i]:void 0,e.default,t.default)}function Ls(e,t,i){if(Ir(i)!=="number")return $a(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=fa(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function eo(e,t,i){var l=e.base!==void 0?e.base:1;if(Ir(i)!=="number")return $a(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=fa(e.stops.map(function(q){return q[0]}),i),v=function(q,K,W,ne){var le=ne-W,ye=q-W;return le===0?0:K===1?ye/le:(Math.pow(K,ye)-1)/(Math.pow(K,le)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),I=e.stops[d][1],C=e.stops[d+1][1],D=Ql[t.type]||xd;if(e.colorSpace&&e.colorSpace!=="rgb"){var O=pl[e.colorSpace];D=function(q,K){return O.reverse(O.interpolate(O.forward(q),O.forward(K),v))}}return typeof I.evaluate=="function"?{evaluate:function(){for(var q=[],K=arguments.length;K--;)q[K]=arguments[K];var W=I.evaluate.apply(void 0,q),ne=C.evaluate.apply(void 0,q);if(W!==void 0&&ne!==void 0)return D(W,ne,v)}}:D(I,C,v)}function So(e,t,i){return t.type==="color"?i=nr.parse(i):t.type==="formatted"?i=wi.fromString(i.toString()):t.type==="resolvedImage"?i=Ji.fromString(i.toString()):Ir(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),$a(i,e.default,t.default)}Xr.register(ml,{error:[{kind:"error"},[tt],function(e,t){throw new Hr(t[0].evaluate(e))}],typeof:[tt,[Ze],function(e,t){return Jt(yr(t[0].evaluate(e)))}],"to-rgba":[Qt(Be,4),[Qe],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Qe,[Be,Be,Be],yf],rgba:[Qe,[Be,Be,Be,Be],yf],has:{type:We,overloads:[[[tt],function(e,t){return yl(t[0].evaluate(e),e.properties())}],[[tt,Ft],function(e,t){var i=t[1];return yl(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:Ze,overloads:[[[tt],function(e,t){return Ms(t[0].evaluate(e),e.properties())}],[[tt,Ft],function(e,t){var i=t[1];return Ms(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[Ze,[tt],function(e,t){return Ms(t[0].evaluate(e),e.featureState||{})}],properties:[Ft,[],function(e){return e.properties()}],"geometry-type":[tt,[],function(e){return e.geometryType()}],id:[Ze,[],function(e){return e.id()}],zoom:[Be,[],function(e){return e.globals.zoom}],"heatmap-density":[Be,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Be,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ze,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Be,vl(Be),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Be,vl(Be),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Be,overloads:[[[Be,Be],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Be],function(e,t){return-t[0].evaluate(e)}]]},"/":[Be,[Be,Be],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Be,[Be,Be],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Be,[],function(){return Math.LN2}],pi:[Be,[],function(){return Math.PI}],e:[Be,[],function(){return Math.E}],"^":[Be,[Be,Be],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Be,[Be],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Be,[Be],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Be,[Be],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Be,[Be],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Be,[Be],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Be,[Be],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Be,[Be],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Be,[Be],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Be,[Be],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Be,[Be],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Be,vl(Be),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Be,vl(Be),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Be,[Be],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Be,[Be],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Be,[Be],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Be,[Be],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[We,[Ze],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[We,[tt],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[We,[Ze],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[We,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[We,[Qt(tt)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[We,[Qt(Ze)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[We,[tt,Qt(Ze)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[We,[tt,Qt(Ze)],function(e,t){var i=t[0],l=t[1];return function(p,d,v,I){for(;v<=I;){var C=v+I>>1;if(d[C]===p)return!0;d[C]>p?I=C-1:v=C+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:We,overloads:[[[We,We],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[vl(We),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:We,overloads:[[[We,We],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[vl(We),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[We,[We],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[We,[tt],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[tt,vl(Ze),function(e,t){return t.map(function(i){return Gn(i.evaluate(e))}).join("")}],"resolved-locale":[tt,[Gt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var iu=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new un,this._defaultValue=t?function(i){return i.type==="color"&&Zc(i.default)?new nr(0,0,0,0):i.type==="color"?nr.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function os(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in ml}function _f(e,t){var i=new Wr(ml,[],t?function(p){var d={color:Qe,string:tt,number:Be,enum:tt,boolean:We,formatted:sr,resolvedImage:Pt};return p.type==="array"?Qt(d[p.value]||Ze,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?ap(new iu(l,t)):as(i.errors)}iu.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},iu.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new Hr("Expected value to be one of "+Object.keys(this._enumValues).map(function(I){return JSON.stringify(I)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}};var Yu=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!ke(t.expression)};Yu.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},Yu.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var ko=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!ke(t.expression),this.interpolationType=l};function nu(e,t){if((e=_f(e,t)).result==="error")return e;var i=e.value.expression,l=Kn(i);if(!l&&!Ba(t))return as([new qe("","data expressions not supported")]);var p=Zi(i,["zoom"]);if(!p&&!vf(t))return as([new qe("","zoom expressions not supported")]);var d=function v(I){var C=null;if(I instanceof ns)C=v(I.result);else if(I instanceof bo)for(var D=0,O=I.args;D<O.length&&!(C=v(O[D]));D+=1);else(I instanceof Cn||I instanceof ii)&&I.input instanceof Xr&&I.input.name==="zoom"&&(C=I);return C instanceof qe||I.eachChild(function(q){var K=v(q);K instanceof qe?C=K:!C&&K?C=new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&K&&C!==K&&(C=new qe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(i);return d||p?d instanceof qe?as([d]):d instanceof ii&&!Eo(t)?as([new qe("",'"interpolate" expressions cannot be used with this property')]):ap(d?new ko(l?"camera":"composite",e.value,d.labels,d instanceof ii?d.interpolation:void 0):new Yu(l?"constant":"source",e.value)):as([new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ko.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},ko.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},ko.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?ii.interpolationFactor(this.interpolationType,e,t,i):0};var au=function(e,t){this._parameters=e,this._specification=t,Ne(this,function i(l,p){var d,v,I,C=p.type==="color",D=l.stops&&typeof l.stops[0][0]=="object",O=D||!(D||l.property!==void 0),q=l.type||(Eo(p)?"exponential":"interval");if(C&&((l=Ne({},l)).stops&&(l.stops=l.stops.map(function(it){return[it[0],nr.parse(it[1])]})),l.default=nr.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!pl[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(q==="exponential")d=eo;else if(q==="interval")d=Ls;else if(q==="categorical"){d=gf,v=Object.create(null);for(var K=0,W=l.stops;K<W.length;K+=1){var ne=W[K];v[ne[0]]=ne[1]}I=typeof l.stops[0][0]}else{if(q!=="identity")throw new Error('Unknown function type "'+q+'"');d=So}if(D){for(var le={},ye=[],fe=0;fe<l.stops.length;fe++){var Ee=l.stops[fe],Ae=Ee[0].zoom;le[Ae]===void 0&&(le[Ae]={zoom:Ae,type:l.type,property:l.property,default:l.default,stops:[]},ye.push(Ae)),le[Ae].stops.push([Ee[0].value,Ee[1]])}for(var Ce=[],De=0,Fe=ye;De<Fe.length;De+=1){var Ke=Fe[De];Ce.push([le[Ke].zoom,i(le[Ke],p)])}var Ye={name:"linear"};return{kind:"composite",interpolationType:Ye,interpolationFactor:ii.interpolationFactor.bind(void 0,Ye),zoomStops:Ce.map(function(it){return it[0]}),evaluate:function(it,bt){var lt=it.zoom;return eo({stops:Ce,base:l.base},p,lt).evaluate(lt,bt)}}}if(O){var _t=q==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:_t,interpolationFactor:ii.interpolationFactor.bind(void 0,_t),zoomStops:l.stops.map(function(it){return it[0]}),evaluate:function(it){return d(l,p,it.zoom,v,I)}}}return{kind:"source",evaluate:function(it,bt){var lt=bt&&bt.properties?bt.properties[l.property]:void 0;return lt===void 0?$a(l.default,p.default):d(l,p,lt,v,I)}}}(this._parameters,this._specification))};function ia(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,v=e.styleSpec,I=[],C=Ir(i);if(C!=="object")return[new se(t,i,"object expected, "+C+" found")];for(var D in i){var O=D.split(".")[0],q=l[O]||l["*"],K=void 0;if(p[O])K=p[O];else if(l[O])K=lr;else if(p["*"])K=p["*"];else{if(!l["*"]){I.push(new se(t,i[D],'unknown property "'+D+'"'));continue}K=lr}I=I.concat(K({key:(t&&t+".")+D,value:i[D],valueSpec:q,style:d,styleSpec:v,object:i,objectKey:D},i))}for(var W in l)p[W]||l[W].required&&l[W].default===void 0&&i[W]===void 0&&I.push(new se(t,i,'missing required property "'+W+'"'));return I}function Gc(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,v=e.arrayElementValidator||lr;if(Ir(t)!=="array")return[new se(d,t,"array expected, "+Ir(t)+" found")];if(i.length&&t.length!==i.length)return[new se(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new se(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var I={type:i.value,values:i.values};p.$version<7&&(I.function=i.function),Ir(i.value)==="object"&&(I=i.value);for(var C=[],D=0;D<t.length;D++)C=C.concat(v({array:t,arrayIndex:D,value:t[D],valueSpec:I,style:l,styleSpec:p,key:d+"["+D+"]"}));return C}function bf(e){var t=e.key,i=e.value,l=e.valueSpec,p=Ir(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new se(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new se(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new se(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function xf(e){var t,i,l,p=e.valueSpec,d=Ge(e.value.type),v={},I=d!=="categorical"&&e.value.property===void 0,C=!I,D=Ir(e.value.stops)==="array"&&Ir(e.value.stops[0])==="array"&&Ir(e.value.stops[0][0])==="object",O=ia({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(W){if(d==="identity")return[new se(W.key,W.value,'identity function may not have a "stops" property')];var ne=[],le=W.value;return ne=ne.concat(Gc({key:W.key,value:le,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:q})),Ir(le)==="array"&&le.length===0&&ne.push(new se(W.key,le,"array must have at least one stop")),ne},default:function(W){return lr({key:W.key,value:W.value,valueSpec:p,style:W.style,styleSpec:W.styleSpec})}}});return d==="identity"&&I&&O.push(new se(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||O.push(new se(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Eo(e.valueSpec)&&O.push(new se(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(C&&!Ba(e.valueSpec)?O.push(new se(e.key,e.value,"property functions not supported")):I&&!vf(e.valueSpec)&&O.push(new se(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!D||e.value.property!==void 0||O.push(new se(e.key,e.value,'"property" property is required')),O;function q(W){var ne=[],le=W.value,ye=W.key;if(Ir(le)!=="array")return[new se(ye,le,"array expected, "+Ir(le)+" found")];if(le.length!==2)return[new se(ye,le,"array length 2 expected, length "+le.length+" found")];if(D){if(Ir(le[0])!=="object")return[new se(ye,le,"object expected, "+Ir(le[0])+" found")];if(le[0].zoom===void 0)return[new se(ye,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new se(ye,le,"object stop key must have value")];if(l&&l>Ge(le[0].zoom))return[new se(ye,le[0].zoom,"stop zoom values must appear in ascending order")];Ge(le[0].zoom)!==l&&(l=Ge(le[0].zoom),i=void 0,v={}),ne=ne.concat(ia({key:ye+"[0]",value:le[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:bf,value:K}}))}else ne=ne.concat(K({key:ye+"[0]",value:le[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},le));return os(Le(le[1]))?ne.concat([new se(ye+"[1]",le[1],"expressions are not allowed in function stops.")]):ne.concat(lr({key:ye+"[1]",value:le[1],valueSpec:p,style:W.style,styleSpec:W.styleSpec}))}function K(W,ne){var le=Ir(W.value),ye=Ge(W.value),fe=W.value!==null?W.value:ne;if(t){if(le!==t)return[new se(W.key,fe,le+" stop domain type must match previous stop domain type "+t)]}else t=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new se(W.key,fe,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&d!=="categorical"){var Ee="number expected, "+le+" found";return Ba(p)&&d===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new se(W.key,fe,Ee)]}return d!=="categorical"||le!=="number"||isFinite(ye)&&Math.floor(ye)===ye?d!=="categorical"&&le==="number"&&i!==void 0&&ye<i?[new se(W.key,fe,"stop domain values must appear in ascending order")]:(i=ye,d==="categorical"&&ye in v?[new se(W.key,fe,"stop domain values must be unique")]:(v[ye]=!0,[])):[new se(W.key,fe,"integer expected, found "+ye)]}}function Oa(e){var t=(e.expressionContext==="property"?nu:_f)(Le(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new se(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new se(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!ke(i))return[new se(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!ke(i))return[new se(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Zi(i,["zoom","feature-state"]))return[new se(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Kn(i))return[new se(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Kc(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(Ge(i))===-1&&p.push(new se(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(Ge(i))===-1&&p.push(new se(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function Hc(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!Hc(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}au.deserialize=function(e){return new au(e._parameters,e._specification)},au.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Rs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bs(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Hc(e)||(e=gl(e));var t=_f(e,Rs);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function ss(e,t){return e<t?-1:e>t?1:0}function gl(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?op(e[1],e[2],"=="):i==="!="?Io(op(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?op(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(gl))):i==="all"?["all"].concat(e.slice(1).map(gl)):i==="none"?["all"].concat(e.slice(1).map(gl).map(Io)):i==="in"?wf(e[1],e.slice(2)):i==="!in"?Io(wf(e[1],e.slice(2))):i==="has"?_l(e[1]):i==="!has"?Io(_l(e[1])):i!=="within"||e}function op(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function wf(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(ss)]]:["filter-in-small",e,["literal",t]]}}function _l(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Io(e){return["!",e]}function sp(e){return Hc(Le(e.value))?Oa(Ne({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(Ir(l)!=="array")return[new se(p,l,"array expected, "+Ir(l)+" found")];var d,v=i.styleSpec,I=[];if(l.length<1)return[new se(p,l,"filter array must have at least 1 element")];switch(I=I.concat(Kc({key:p+"[0]",value:l[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ge(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ge(l[1])==="$type"&&I.push(new se(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&I.push(new se(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=Ir(l[1]))!=="string"&&I.push(new se(p+"[1]",l[1],"string expected, "+d+" found"));for(var C=2;C<l.length;C++)d=Ir(l[C]),Ge(l[1])==="$type"?I=I.concat(Kc({key:p+"["+C+"]",value:l[C],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&I.push(new se(p+"["+C+"]",l[C],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var D=1;D<l.length;D++)I=I.concat(t({key:p+"["+D+"]",value:l[D],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Ir(l[1]),l.length!==2?I.push(new se(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&I.push(new se(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=Ir(l[1]),l.length!==2?I.push(new se(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&I.push(new se(p+"[1]",l[1],"object expected, "+d+" found"))}return I}(e)}function Ju(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,v=e.objectKey,I=p[t+"_"+e.layerType];if(!I)return[];var C=v.match(/^(.*)-transition$/);if(t==="paint"&&C&&I[C[1]]&&I[C[1]].transition)return lr({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var D,O=e.valueSpec||I[v];if(!O)return[new se(i,d,'unknown property "'+v+'"')];if(Ir(d)==="string"&&Ba(O)&&!O.tokens&&(D=/^{([^}]+)}$/.exec(d)))return[new se(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(D[1])+" }`.")];var q=[];return e.layerType==="symbol"&&(v==="text-field"&&l&&!l.glyphs&&q.push(new se(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Zc(Le(d))&&Ge(d.type)==="identity"&&q.push(new se(i,d,'"text-font" does not support identity functions'))),q.concat(lr({key:e.key,value:d,valueSpec:O,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:v}))}function Xc(e){return Ju(e,"paint")}function Qu(e){return Ju(e,"layout")}function ou(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new se(l,i,'either "type" or "ref" is required'));var v,I=Ge(i.type),C=Ge(i.ref);if(i.id)for(var D=Ge(i.id),O=0;O<e.arrayIndex;O++){var q=p.layers[O];Ge(q.id)===D&&t.push(new se(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+q.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(ne){ne in i&&t.push(new se(l,i[ne],'"'+ne+'" is prohibited for ref layers'))}),p.layers.forEach(function(ne){Ge(ne.id)===C&&(v=ne)}),v?v.ref?t.push(new se(l,i.ref,"ref cannot reference another ref layer")):I=Ge(v.type):t.push(new se(l,i.ref,'ref layer "'+C+'" not found'));else if(I!=="background")if(i.source){var K=p.sources&&p.sources[i.source],W=K&&Ge(K.type);K?W==="vector"&&I==="raster"?t.push(new se(l,i.source,'layer "'+i.id+'" requires a raster source')):W==="raster"&&I!=="raster"?t.push(new se(l,i.source,'layer "'+i.id+'" requires a vector source')):W!=="vector"||i["source-layer"]?W==="raster-dem"&&I!=="hillshade"?t.push(new se(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!i.paint||!i.paint["line-gradient"]||W==="geojson"&&K.lineMetrics||t.push(new se(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new se(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new se(l,i.source,'source "'+i.source+'" not found'))}else t.push(new se(l,i,'missing required property "source"'));return t=t.concat(ia({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return lr({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:sp,layout:function(ne){return ia({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(le){return Qu(Ne({layerType:I},le))}}})},paint:function(ne){return ia({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(le){return Xc(Ne({layerType:I},le))}}})}}}))}function bl(e){var t=e.value,i=e.key,l=Ir(t);return l!=="string"?[new se(i,t,"string expected, "+l+" found")]:[]}var vr={promoteId:function(e){var t=e.key,i=e.value;if(Ir(i)==="string")return bl({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,bl({key:t+"."+p,value:i[p]}));return l}};function to(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new se(i,t,'"type" is required')];var d,v=Ge(t.type);switch(v){case"vector":case"raster":case"raster-dem":return ia({key:i,value:t,valueSpec:l["source_"+v.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:vr});case"geojson":if(d=ia({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:vr}),t.cluster)for(var I in t.clusterProperties){var C=t.clusterProperties[I],D=C[0],O=typeof D=="string"?[D,["accumulated"],["get",I]]:D;d.push.apply(d,Oa({key:i+"."+I+".map",value:C[1],expressionContext:"cluster-map"})),d.push.apply(d,Oa({key:i+"."+I+".reduce",value:O,expressionContext:"cluster-reduce"}))}return d;case"video":return ia({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return ia({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new se(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kc({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function Hn(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],v=Ir(t);if(t===void 0)return d;if(v!=="object")return d.concat([new se("light",t,"object expected, "+v+" found")]);for(var I in t){var C=I.match(/^(.*)-transition$/);d=d.concat(C&&l[C[1]]&&l[C[1]].transition?lr({key:I,value:t[I],valueSpec:i.transition,style:p,styleSpec:i}):l[I]?lr({key:I,value:t[I],valueSpec:l[I],style:p,styleSpec:i}):[new se(I,t[I],'unknown property "'+I+'"')])}return d}var da={"*":function(){return[]},array:Gc,boolean:function(e){var t=e.value,i=e.key,l=Ir(t);return l!=="boolean"?[new se(i,t,"boolean expected, "+l+" found")]:[]},number:bf,color:function(e){var t=e.key,i=e.value,l=Ir(i);return l!=="string"?[new se(t,i,"color expected, "+l+" found")]:Xt(i)===null?[new se(t,i,'color expected, "'+i+'" found')]:[]},constants:Se,enum:Kc,filter:sp,function:xf,layer:ou,object:ia,source:to,light:Hn,string:bl,formatted:function(e){return bl(e).length===0?[]:Oa(e)},resolvedImage:function(e){return bl(e).length===0?[]:Oa(e)}};function lr(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&Zc(Ge(t))?xf(e):i.expression&&os(Le(t))?Oa(e):i.type&&da[i.type]?da[i.type](e):ia(Ne({},e,{valueSpec:i.type?l[i.type]:i}))}function zr(e){var t=e.value,i=e.key,l=bl(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new se(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new se(i,t,'"glyphs" url must include a "{range}" token'))),l}function ro(e,t){t===void 0&&(t=H);var i=[];return i=i.concat(lr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:zr,"*":function(){return[]}}})),e.constants&&(i=i.concat(Se({key:"constants",value:e.constants,style:e,styleSpec:t}))),$u(i)}function $u(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function To(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return $u(e.apply(this,t))}}ro.source=To(to),ro.light=To(Hn),ro.layer=To(ou),ro.filter=To(sp),ro.paintProperty=To(Xc),ro.layoutProperty=To(Qu);var ls=ro,wd=ls.light,ec=ls.paintProperty,xl=ls.layoutProperty;function tc(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new ve(new Error(p[l].message))),i=!0;return i}var us=ni;function ni(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var v=p[3+d],I=p[3+d+1];l.push(v===I?null:p.subarray(v,I))}var C=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],C),this.bboxes=p.subarray(C),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var D=0;D<this.d*this.d;D++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var O=i/t*e;this.min=-O,this.max=e+O}ni.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},ni.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ni.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},ni.prototype.query=function(e,t,i,l,p){var d=this.min,v=this.max;if(e<=d&&t<=d&&v<=i&&v<=l&&!p)return Array.prototype.slice.call(this.keys);var I=[];return this._forEachCell(e,t,i,l,this._queryCell,I,{},p),I},ni.prototype._queryCell=function(e,t,i,l,p,d,v,I){var C=this.cells[p];if(C!==null)for(var D=this.keys,O=this.bboxes,q=0;q<C.length;q++){var K=C[q];if(v[K]===void 0){var W=4*K;(I?I(O[W+0],O[W+1],O[W+2],O[W+3]):e<=O[W+2]&&t<=O[W+3]&&i>=O[W+0]&&l>=O[W+1])?(v[K]=!0,d.push(D[K])):v[K]=!1}}},ni.prototype._forEachCell=function(e,t,i,l,p,d,v,I){for(var C=this._convertToCellCoord(e),D=this._convertToCellCoord(t),O=this._convertToCellCoord(i),q=this._convertToCellCoord(l),K=C;K<=O;K++)for(var W=D;W<=q;W++){var ne=this.d*W+K;if((!I||I(this._convertFromCellCoord(K),this._convertFromCellCoord(W),this._convertFromCellCoord(K+1),this._convertFromCellCoord(W+1)))&&p.call(this,e,t,i,l,ne,d,v,I))return}},ni.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ni.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ni.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,v=0;v<e.length;v++){var I=e[v];p[3+v]=d,p.set(I,d),d+=I.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var rc=U.ImageData,cs=U.ImageBitmap,Br={};function ot(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Br[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var ma in ot("Object",Object),us.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},us.deserialize=function(e){return new us(e.buffer)},ot("Grid",us),ot("Color",nr),ot("Error",Error),ot("ResolvedImage",Ji),ot("StylePropertyFunction",au),ot("StyleExpression",iu,{omit:["_evaluator"]}),ot("ZoomDependentExpression",ko),ot("ZoomConstantExpression",Yu),ot("CompoundExpression",Xr,{omit:["_evaluate"]}),ml)ml[ma]._classRegistryKey||ot("Expression_"+ma,ml[ma]);function Os(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Wc(e){return cs&&e instanceof cs}function io(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Os(e)||Wc(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof rc)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(io(d[p],t));return l}if(typeof e=="object"){var v=e.constructor,I=v._classRegistryKey;if(!I)throw new Error("can't serialize object of unregistered class");var C=v.serialize?v.serialize(e,t):{};if(!v.serialize){for(var D in e)if(e.hasOwnProperty(D)&&!(Br[I].omit.indexOf(D)>=0)){var O=e[D];C[D]=Br[I].shallow.indexOf(D)>=0?O:io(O,t)}e instanceof Error&&(C.message=e.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return I!=="Object"&&(C.$name=I),C}throw new Error("can't serialize object of type "+typeof e)}function kn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Os(e)||Wc(e)||ArrayBuffer.isView(e)||e instanceof rc)return e;if(Array.isArray(e))return e.map(kn);if(typeof e=="object"){var t=e.$name||"Object",i=Br[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var v=d[p];if(v!=="$name"){var I=e[v];l[v]=Br[t].shallow.indexOf(v)>=0?I:kn(I)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var wl=function(){this.first=!0};wl.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var $e={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function El(e){for(var t=0,i=e;t<i.length;t+=1)if(su(i[t].charCodeAt(0)))return!0;return!1}function su(e){return!(e!==746&&e!==747&&(e<4352||!($e["Bopomofo Extended"](e)||$e.Bopomofo(e)||$e["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||$e["CJK Compatibility Ideographs"](e)||$e["CJK Compatibility"](e)||$e["CJK Radicals Supplement"](e)||$e["CJK Strokes"](e)||!(!$e["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||$e["CJK Unified Ideographs Extension A"](e)||$e["CJK Unified Ideographs"](e)||$e["Enclosed CJK Letters and Months"](e)||$e["Hangul Compatibility Jamo"](e)||$e["Hangul Jamo Extended-A"](e)||$e["Hangul Jamo Extended-B"](e)||$e["Hangul Jamo"](e)||$e["Hangul Syllables"](e)||$e.Hiragana(e)||$e["Ideographic Description Characters"](e)||$e.Kanbun(e)||$e["Kangxi Radicals"](e)||$e["Katakana Phonetic Extensions"](e)||$e.Katakana(e)&&e!==12540||!(!$e["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!$e["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||$e["Unified Canadian Aboriginal Syllabics"](e)||$e["Unified Canadian Aboriginal Syllabics Extended"](e)||$e["Vertical Forms"](e)||$e["Yijing Hexagram Symbols"](e)||$e["Yi Syllables"](e)||$e["Yi Radicals"](e))))}function lp(e){return!(su(e)||function(t){return!!($e["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||$e["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||$e["Letterlike Symbols"](t)||$e["Number Forms"](t)||$e["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||$e["Control Pictures"](t)&&t!==9251||$e["Optical Character Recognition"](t)||$e["Enclosed Alphanumerics"](t)||$e["Geometric Shapes"](t)||$e["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||$e["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||$e["CJK Symbols and Punctuation"](t)||$e.Katakana(t)||$e["Private Use Area"](t)||$e["CJK Compatibility Forms"](t)||$e["Small Form Variants"](t)||$e["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Va(e){return e>=1424&&e<=2303||$e["Arabic Presentation Forms-A"](e)||$e["Arabic Presentation Forms-B"](e)}function cn(e,t){return!(!t&&Va(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||$e.Khmer(e))}function Yc(e){for(var t=0,i=e;t<i.length;t+=1)if(Va(i[t].charCodeAt(0)))return!0;return!1}var no=null,Ti="unavailable",Xn=null,Ef=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Ti="error"),no&&no(e)};function hs(){Ed.fire(new ce("pluginStateChange",{pluginStatus:Ti,pluginURL:Xn}))}var Ed=new be,up=function(){return Ti},na=function(){if(Ti!=="deferred"||!Xn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ti="loading",hs(),Xn&&ha({url:Xn},function(e){e?Ef(e):(Ti="loaded",hs())})},Mn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ti==="loaded"||Mn.applyArabicShaping!=null},isLoading:function(){return Ti==="loading"},setState:function(e){Ti=e.pluginStatus,Xn=e.pluginURL},isParsed:function(){return Mn.applyArabicShaping!=null&&Mn.processBidirectionalText!=null&&Mn.processStyledBidirectionalText!=null},getPluginURL:function(){return Xn}},tr=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new wl,this.transition={})};tr.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!cn(p[l].charCodeAt(0),i))return!1;return!0}(e,Mn.isLoaded())},tr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},tr.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var ya=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(Zc(i))return new au(i,l);if(os(i)){var p=nu(i,l);if(p.result==="error")throw new Error(p.value.map(function(v){return v.key+": "+v.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=nr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};ya.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ya.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var va=function(e){this.property=e,this.value=new ya(e,void 0)};va.prototype.transitioned=function(e,t){return new Sl(this.property,this.value,t,Ue({},e.transition,this.transition),e.now)},va.prototype.untransitioned=function(){return new Sl(this.property,this.value,null,{},0)};var In=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};In.prototype.getValue=function(e){return At(this._values[e].value.value)},In.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new va(this._values[e].property)),this._values[e].value=new ya(this._values[e].property,t===null?void 0:At(t))},In.prototype.getTransition=function(e){return At(this._values[e].transition)},In.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new va(this._values[e].property)),this._values[e].transition=At(t)||void 0},In.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},In.prototype.transitioned=function(e,t){for(var i=new Ta(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},In.prototype.untransitioned=function(){for(var e=new Ta(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var Sl=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};Sl.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var v=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(I){if(I<=0)return 0;if(I>=1)return 1;var C=I*I,D=C*I;return 4*(I<.5?D:3*(I-C)+D-.75)}(v))}return p};var Ta=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Ta.prototype.possiblyEvaluate=function(e,t,i){for(var l=new zo(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l},Ta.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var Ao=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Ao.prototype.getValue=function(e){return At(this._values[e].value)},Ao.prototype.setValue=function(e,t){this._values[e]=new ya(this._values[e].property,t===null?void 0:At(t))},Ao.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},Ao.prototype.possiblyEvaluate=function(e,t,i){for(var l=new zo(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l};var Wn=function(e,t,i){this.property=e,this.value=t,this.parameters=i};Wn.prototype.isConstant=function(){return this.value.kind==="constant"},Wn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Wn.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var zo=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};zo.prototype.get=function(e){return this._values[e]};var gt=function(e){this.specification=e};gt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},gt.prototype.interpolate=function(e,t,i){var l=Ql[this.specification.type];return l?l(e,t,i):e};var ct=function(e,t){this.specification=e,this.overrides=t};ct.prototype.possiblyEvaluate=function(e,t,i,l){return new Wn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},ct.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new Wn(this,{kind:"constant",value:void 0},e.parameters);var l=Ql[this.specification.type];return l?new Wn(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},ct.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var kl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new Wn(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var v=i.expression.evaluate(l,null,{},p,d),I=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,C=this._calculate(I,I,I,l);return new Wn(this,{kind:"constant",value:C},l)}if(i.expression.kind==="camera"){var D=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Wn(this,{kind:"constant",value:D},l)}return new Wn(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,v,I){if(i.kind==="source"){var C=i.evaluate(l,p,d,v,I);return this._calculate(C,C,C,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(ct),Yn=function(e){this.specification=e};Yn.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new tr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new tr(Math.floor(t.zoom),t)),e.expression.evaluate(new tr(Math.floor(t.zoom+1),t)),t)}},Yn.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},Yn.prototype.interpolate=function(e){return e};var ao=function(e){this.specification=e};ao.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},ao.prototype.interpolate=function(){return!1};var Ai=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new ya(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new va(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};ot("DataDrivenProperty",ct),ot("DataConstantProperty",gt),ot("CrossFadedDataDrivenProperty",kl),ot("CrossFadedProperty",Yn),ot("ColorRampProperty",ao);var Tn=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new Ao(l.layout)),l.paint)){for(var p in this._transitionablePaint=new In(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zo(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(xl,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return wr(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(ec,"layers."+this.id+".paint."+i,i,l,p))return!1;if(wr(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",I=d.value.isDataDriven(),C=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var D=this._transitionablePaint._values[i].value;return D.isDataDriven()||I||v||this._handleOverridablePaintPropertyUpdate(i,C,D)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),kt(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&tc(this,i.call(ls,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:H,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof Wn&&Ba(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(be),cp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},lu=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Er=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function hn(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=cp[p.type].BYTES_PER_ELEMENT,v=i=ic(i,Math.max(t,d)),I=p.components||1;return l=Math.max(l,d),i+=d*I,{name:p.name,type:p.type,components:I,offset:v}}),size:ic(i,Math.max(l,t)),alignment:t}}function ic(e,t){return Math.ceil(e/t)*t}Er.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Er.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Er.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Er.prototype.clear=function(){this.length=0},Er.prototype.resize=function(e){this.reserve(e),this.length=e},Er.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Er.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(Er);Il.prototype.bytesPerElement=4,ot("StructArrayLayout2i4",Il);var hp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var I=4*i;return this.int16[I+0]=l,this.int16[I+1]=p,this.int16[I+2]=d,this.int16[I+3]=v,i},t}(Er);hp.prototype.bytesPerElement=8,ot("StructArrayLayout4i8",hp);var pn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,v,I)},t.prototype.emplace=function(i,l,p,d,v,I,C){var D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=d,this.int16[D+3]=v,this.int16[D+4]=I,this.int16[D+5]=C,i},t}(Er);pn.prototype.bytesPerElement=12,ot("StructArrayLayout2i4i12",pn);var Gi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,v,I)},t.prototype.emplace=function(i,l,p,d,v,I,C){var D=4*i,O=8*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.uint8[O+4]=d,this.uint8[O+5]=v,this.uint8[O+6]=I,this.uint8[O+7]=C,i},t}(Er);Gi.prototype.bytesPerElement=8,ot("StructArrayLayout2i4ub8",Gi);var aa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(Er);aa.prototype.bytesPerElement=8,ot("StructArrayLayout2f8",aa);var Jn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q){var K=this.length;return this.resize(K+1),this.emplace(K,i,l,p,d,v,I,C,D,O,q)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K){var W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=p,this.uint16[W+2]=d,this.uint16[W+3]=v,this.uint16[W+4]=I,this.uint16[W+5]=C,this.uint16[W+6]=D,this.uint16[W+7]=O,this.uint16[W+8]=q,this.uint16[W+9]=K,i},t}(Er);Jn.prototype.bytesPerElement=20,ot("StructArrayLayout10ui20",Jn);var Jc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q,K,W){var ne=this.length;return this.resize(ne+1),this.emplace(ne,i,l,p,d,v,I,C,D,O,q,K,W)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K,W,ne){var le=12*i;return this.int16[le+0]=l,this.int16[le+1]=p,this.int16[le+2]=d,this.int16[le+3]=v,this.uint16[le+4]=I,this.uint16[le+5]=C,this.uint16[le+6]=D,this.uint16[le+7]=O,this.int16[le+8]=q,this.int16[le+9]=K,this.int16[le+10]=W,this.int16[le+11]=ne,i},t}(Er);Jc.prototype.bytesPerElement=24,ot("StructArrayLayout4i4ui4i24",Jc);var Po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.float32[v+0]=l,this.float32[v+1]=p,this.float32[v+2]=d,i},t}(Er);Po.prototype.bytesPerElement=12,ot("StructArrayLayout3f12",Po);var pp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(Er);pp.prototype.bytesPerElement=4,ot("StructArrayLayout1ul4",pp);var fp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O){var q=this.length;return this.resize(q+1),this.emplace(q,i,l,p,d,v,I,C,D,O)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q){var K=10*i,W=5*i;return this.int16[K+0]=l,this.int16[K+1]=p,this.int16[K+2]=d,this.int16[K+3]=v,this.int16[K+4]=I,this.int16[K+5]=C,this.uint32[W+3]=D,this.uint16[K+8]=O,this.uint16[K+9]=q,i},t}(Er);fp.prototype.bytesPerElement=20,ot("StructArrayLayout6i1ul2ui20",fp);var Co=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,v,I)},t.prototype.emplace=function(i,l,p,d,v,I,C){var D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=d,this.int16[D+3]=v,this.int16[D+4]=I,this.int16[D+5]=C,i},t}(Er);Co.prototype.bytesPerElement=12,ot("StructArrayLayout2i2i2i12",Co);var oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v){var I=this.length;return this.resize(I+1),this.emplace(I,i,l,p,d,v)},t.prototype.emplace=function(i,l,p,d,v,I){var C=4*i,D=8*i;return this.float32[C+0]=l,this.float32[C+1]=p,this.float32[C+2]=d,this.int16[D+6]=v,this.int16[D+7]=I,i},t}(Er);oo.prototype.bytesPerElement=16,ot("StructArrayLayout2f1f2i16",oo);var dp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var I=12*i,C=3*i;return this.uint8[I+0]=l,this.uint8[I+1]=p,this.float32[C+1]=d,this.float32[C+2]=v,i},t}(Er);dp.prototype.bytesPerElement=12,ot("StructArrayLayout2ub2f12",dp);var Fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.uint16[v+0]=l,this.uint16[v+1]=p,this.uint16[v+2]=d,i},t}(Er);Fa.prototype.bytesPerElement=6,ot("StructArrayLayout3ui6",Fa);var Do=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q,K,W,ne,le,ye,fe,Ee){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,i,l,p,d,v,I,C,D,O,q,K,W,ne,le,ye,fe,Ee)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K,W,ne,le,ye,fe,Ee,Ae){var Ce=24*i,De=12*i,Fe=48*i;return this.int16[Ce+0]=l,this.int16[Ce+1]=p,this.uint16[Ce+2]=d,this.uint16[Ce+3]=v,this.uint32[De+2]=I,this.uint32[De+3]=C,this.uint32[De+4]=D,this.uint16[Ce+10]=O,this.uint16[Ce+11]=q,this.uint16[Ce+12]=K,this.float32[De+7]=W,this.float32[De+8]=ne,this.uint8[Fe+36]=le,this.uint8[Fe+37]=ye,this.uint8[Fe+38]=fe,this.uint32[De+10]=Ee,this.int16[Ce+22]=Ae,i},t}(Er);Do.prototype.bytesPerElement=48,ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Do);var Qc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q,K,W,ne,le,ye,fe,Ee,Ae,Ce,De,Fe,Ke,Ye,_t,it,bt,lt,Dt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,i,l,p,d,v,I,C,D,O,q,K,W,ne,le,ye,fe,Ee,Ae,Ce,De,Fe,Ke,Ye,_t,it,bt,lt,Dt)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K,W,ne,le,ye,fe,Ee,Ae,Ce,De,Fe,Ke,Ye,_t,it,bt,lt,Dt,wt){var ut=34*i,Kt=17*i;return this.int16[ut+0]=l,this.int16[ut+1]=p,this.int16[ut+2]=d,this.int16[ut+3]=v,this.int16[ut+4]=I,this.int16[ut+5]=C,this.int16[ut+6]=D,this.int16[ut+7]=O,this.uint16[ut+8]=q,this.uint16[ut+9]=K,this.uint16[ut+10]=W,this.uint16[ut+11]=ne,this.uint16[ut+12]=le,this.uint16[ut+13]=ye,this.uint16[ut+14]=fe,this.uint16[ut+15]=Ee,this.uint16[ut+16]=Ae,this.uint16[ut+17]=Ce,this.uint16[ut+18]=De,this.uint16[ut+19]=Fe,this.uint16[ut+20]=Ke,this.uint16[ut+21]=Ye,this.uint16[ut+22]=_t,this.uint32[Kt+12]=it,this.float32[Kt+13]=bt,this.float32[Kt+14]=lt,this.float32[Kt+15]=Dt,this.float32[Kt+16]=wt,i},t}(Er);Qc.prototype.bytesPerElement=68,ot("StructArrayLayout8i15ui1ul4f68",Qc);var Vs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(Er);Vs.prototype.bytesPerElement=4,ot("StructArrayLayout1f4",Vs);var Ln=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.int16[v+0]=l,this.int16[v+1]=p,this.int16[v+2]=d,i},t}(Er);Ln.prototype.bytesPerElement=6,ot("StructArrayLayout3i6",Ln);var mp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=4*i;return this.uint32[2*i+0]=l,this.uint16[v+2]=p,this.uint16[v+3]=d,i},t}(Er);mp.prototype.bytesPerElement=8,ot("StructArrayLayout1ul2ui8",mp);var Na=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(Er);Na.prototype.bytesPerElement=4,ot("StructArrayLayout2ui4",Na);var Ua=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(Er);Ua.prototype.bytesPerElement=2,ot("StructArrayLayout1ui2",Ua);var Mo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var I=4*i;return this.float32[I+0]=l,this.float32[I+1]=p,this.float32[I+2]=d,this.float32[I+3]=v,i},t}(Er);Mo.prototype.bytesPerElement=16,ot("StructArrayLayout4f16",Mo);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new V(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(lu);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(fp);ot("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(lu);a.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new a(this,i)},t}(Do);ot("PlacedSymbolArray",c);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(lu);m.prototype.size=68;var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(Qc);ot("SymbolInstanceArray",E);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Vs);ot("GlyphOffsetArray",k);var A=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Ln);ot("SymbolLineVertexArray",A);var B=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(lu);B.prototype.size=8;var Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new B(this,i)},t}(mp);ot("FeatureIndexArray",Z);var Y=hn([{name:"a_pos",components:2,type:"Int16"}],4).members,Q=function(e){e===void 0&&(e=[]),this.segments=e};function $(e,t){return 256*(e=we(Math.floor(e),0,255))+we(Math.floor(t),0,255)}Q.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>Q.MAX_VERTEX_ARRAY_LENGTH&&Ot("Max vertices per segment is "+Q.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>Q.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},Q.prototype.get=function(){return this.segments},Q.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},Q.simpleSegment=function(e,t,i,l){return new Q([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},Q.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ot("SegmentVector",Q);var ue=hn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ae=z(function(e){e.exports=function(t,i){var l,p,d,v,I,C,D,O;for(p=t.length-(l=3&t.length),d=i,I=3432918353,C=461845907,O=0;O<p;)D=255&t.charCodeAt(O)|(255&t.charCodeAt(++O))<<8|(255&t.charCodeAt(++O))<<16|(255&t.charCodeAt(++O))<<24,++O,d=27492+(65535&(v=5*(65535&(d=(d^=D=(65535&(D=(D=(65535&D)*I+(((D>>>16)*I&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(D=0,l){case 3:D^=(255&t.charCodeAt(O+2))<<16;case 2:D^=(255&t.charCodeAt(O+1))<<8;case 1:d^=D=(65535&(D=(D=(65535&(D^=255&t.charCodeAt(O)))*I+(((D>>>16)*I&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),de=z(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,v=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(v)|(255&t.charCodeAt(++v))<<8|(255&t.charCodeAt(++v))<<16|(255&t.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++v;switch(p){case 3:d^=(255&t.charCodeAt(v+2))<<16;case 2:d^=(255&t.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),oe=ae,me=de;oe.murmur3=ae,oe.murmur2=me;var xe=function(){this.ids=[],this.positions=[],this.indexed=!1};xe.prototype.add=function(e,t,i,l){this.ids.push(Re(e)),this.positions.push(t,i,l)},xe.prototype.getPositions=function(e){for(var t=Re(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},xe.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,v,I,C){for(;I<C;){for(var D=d[I+C>>1],O=I-1,q=C+1;;){do O++;while(d[O]<D);do q--;while(d[q]>D);if(O>=q)break;Me(d,O,q),Me(v,3*O,3*q),Me(v,3*O+1,3*q+1),Me(v,3*O+2,3*q+2)}q-I<C-q?(p(d,v,I,q),I=q+1):(p(d,v,q+1,C),C=q)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},xe.deserialize=function(e){var t=new xe;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Te=Math.pow(2,53)-1;function Re(e){var t=+e;return!isNaN(t)&&t<=Te?t:oe(String(e))}function Me(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}ot("FeaturePositionMap",xe);var Ve=function(e,t){this.gl=e.gl,this.location=t},je=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Ve),He=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Ve),Xe=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Ve),ht=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Ve),yt=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Ve),It=function(e){function t(i,l){e.call(this,i,l),this.current=nr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Ve),Et=new Float32Array(16),rr=function(e){function t(i,l){e.call(this,i,l),this.current=Et}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Ve);function st(e){return[$(255*e.r,255*e.g),$(255*e.b,255*e.a)]}var Tt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};Tt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Tt.prototype.getBinding=function(e,t,i){return this.type==="color"?new It(e,t):new He(e,t)};var Nt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Nt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Nt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Nt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new yt(e,t):new He(e,t)};var Rt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};Rt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,v=this.expression.evaluate(new tr(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},Rt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},Rt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=st(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Rt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Rt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ct=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Ct.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new tr(this.zoom),t,{},l,[],p),v=this.expression.evaluate(new tr(this.zoom+1),t,{},l,[],p),I=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(I,e,d,v)},Ct.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},Ct.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=st(i),d=st(l),v=e;v<t;v++)this.paintVertexArray.emplace(v,p[0],p[1],d[0],d[1]);else{for(var I=e;I<t;I++)this.paintVertexArray.emplace(I,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},Ct.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ct.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ct.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=we(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},Ct.prototype.getBinding=function(e,t,i){return new He(e,t)};var Vt=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Vt.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Vt.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Vt.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],v=l[i.max];if(p&&d&&v)for(var I=e;I<t;I++)this.zoomInPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Vt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ue.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ue.members,this.expression.isStateDependent))},Vt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var xt=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof Wn&&Ba(d.property.specification)){var v=Oi(p,e.type),I=d.value,C=d.property.specification.type,D=d.property.useIntegerZoom,O=d.property.specification["property-type"],q=O==="cross-faded"||O==="cross-faded-data-driven";if(I.kind==="constant")this.binders[p]=q?new Nt(I.value,v):new Tt(I.value,v,C),l.push("/u_"+p);else if(I.kind==="source"||q){var K=pi(p,C,"source");this.binders[p]=q?new Vt(I,C,D,t,K,e.id):new Rt(I,v,C,K),l.push("/a_"+p)}else{var W=pi(p,C,"composite");this.binders[p]=new Ct(I,v,C,D,t,W),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};xt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Rt||t instanceof Ct?t.maxValue:0},xt.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var v=this.binders[d];(v instanceof Rt||v instanceof Ct||v instanceof Vt)&&v.populatePaintArray(e,t,i,l,p)}},xt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Nt&&l.setConstantPatternPositions(e,t)}},xt.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var v in e)for(var I=0,C=t.getPositions(v);I<C.length;I+=1){var D=C[I],O=i.feature(D.index);for(var q in this.binders){var K=this.binders[q];if((K instanceof Rt||K instanceof Ct||K instanceof Vt)&&K.expression.isStateDependent===!0){var W=l.paint.get(q);K.expression=W.value,K.updatePaintArray(D.start,D.end,O,e[v],p),d=!0}}}return d},xt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Tt||i instanceof Nt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},xt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Rt||i instanceof Ct)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Vt)for(var p=0;p<ue.members.length;p++)e.push(ue.members[p].name)}return e},xt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Tt||i instanceof Nt||i instanceof Ct)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},xt.prototype.getPaintVertexBuffers=function(){return this._buffers},xt.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof Tt||p instanceof Nt||p instanceof Ct)for(var d=0,v=p.uniformNames;d<v.length;d+=1){var I=v[d];if(t[I]){var C=p.getBinding(e,t[I],I);i.push({name:I,property:l,binding:C})}}}return i},xt.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var v=d[p],I=v.name,C=v.property;this.binders[C].setUniform(v.binding,l,i.get(C),I)}},xt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Vt){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof Rt||i instanceof Ct)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},xt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Rt||i instanceof Ct||i instanceof Vt)&&i.upload(e)}this.updatePaintBuffers()},xt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Rt||t instanceof Ct||t instanceof Vt)&&t.destroy()}};var zt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new xt(d,t,i)}this.needsUpload=!1,this._featureMap=new xe,this._bufferOffset=0};function Oi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function pi(e,t,i){var l={color:{source:aa,composite:Mo},number:{source:Vs,composite:aa}},p=function(d){return{"line-pattern":{source:Jn,composite:Jn},"fill-pattern":{source:Jn,composite:Jn},"fill-extrusion-pattern":{source:Jn,composite:Jn}}[d]}(e);return p&&p[i]||l[t][i]}zt.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},zt.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var v=d[p];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,t,v,l)||this.needsUpload}},zt.prototype.get=function(e){return this.programConfigurations[e]},zt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},zt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ot("ConstantBinder",Tt),ot("CrossFadedConstantBinder",Nt),ot("SourceExpressionBinder",Rt),ot("CrossFadedCompositeBinder",Vt),ot("CompositeExpressionBinder",Ct),ot("ProgramConfiguration",xt,{omit:["_buffers"]}),ot("ProgramConfigurationSet",zt);var Rn=Math.pow(2,14)-1,Vi=-Rn-1;function fi(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var v=p[d],I=Math.round(v.x*t),C=Math.round(v.y*t);v.x=we(I,Vi,Rn),v.y=we(C,Vi,Rn),(I<v.x||I>v.x+1||C<v.y||C>v.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function zi(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?fi(e):[]}}function Ei(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var Pi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Il,this.indexArray=new Fa,this.segments=new Q,this.programConfigurations=new zt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Bn(e,t){for(var i=0;i<e.length;i++)if(ga(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(ga(e,t[l]))return!0;return!!yp(e,t)}function Ki(e,t,i){return!!ga(e,t)||!!qa(t,e,i)}function so(e,t){if(e.length===1)return nc(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(ga(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(nc(t,e[d]))return!0;for(var v=0;v<t.length;v++)if(yp(e,t[v]))return!0;return!1}function Qn(e,t,i){if(e.length>1){if(yp(e,t))return!0;for(var l=0;l<t.length;l++)if(qa(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(qa(e[p],t,i))return!0;return!1}function yp(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(uu(l,p,t[d],t[d+1]))return!0;return!1}function uu(e,t,i,l){return Ar(e,i,l)!==Ar(t,i,l)&&Ar(e,t,i)!==Ar(e,t,l)}function qa(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Lo(e,t[p-1],t[p])<l)return!0;return!1}function Lo(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function nc(e,t){for(var i,l,p,d=!1,v=0;v<e.length;v++)for(var I=0,C=(i=e[v]).length-1;I<i.length;C=I++)(l=i[I]).y>t.y!=(p=i[C]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function ga(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],v=e[p];d.y>t.y!=v.y>t.y&&t.x<(v.x-d.x)*(t.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function Tl(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=Ar(e,t,i[0]);return d!==Ar(e,t,i[1])||d!==Ar(e,t,i[2])||d!==Ar(e,t,i[3])}function Ro(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function en(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function _a(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=V.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var v=[],I=0;I<e.length;I++)v.push(e[I].sub(d));return v}Pi.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var v=0,I=e;v<I.length;v+=1){var C=I[v],D=C.feature,O=C.id,q=C.index,K=C.sourceLayerIndex,W=this.layers[0]._featureFilter.needGeometry,ne=zi(D,W);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),ne,i)){var le=d?d.evaluate(ne,{},i):void 0,ye={id:O,properties:D.properties,type:D.type,sourceLayerIndex:K,index:q,geometry:W?ne.geometry:fi(D),patterns:{},sortKey:le};p.push(ye)}}d&&p.sort(function(Ye,_t){return Ye.sortKey-_t.sortKey});for(var fe=0,Ee=p;fe<Ee.length;fe+=1){var Ae=Ee[fe],Ce=Ae.geometry,De=Ae.index,Fe=Ae.sourceLayerIndex,Ke=e[De].feature;this.addFeature(Ae,Ce,De,i),t.featureIndex.insert(Ke,Ce,De,Fe,this.index)}},Pi.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Pi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Y),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Pi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Pi.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var v=0,I=d[p];v<I.length;v+=1){var C=I[v],D=C.x,O=C.y;if(!(D<0||D>=8192||O<0||O>=8192)){var q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),K=q.vertexLength;Ei(this.layoutVertexArray,D,O,-1,-1),Ei(this.layoutVertexArray,D,O,1,-1),Ei(this.layoutVertexArray,D,O,1,1),Ei(this.layoutVertexArray,D,O,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+3,K+2),q.vertexLength+=4,q.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},ot("CircleBucket",Pi,{omit:["layers"]});var Fs=new Ai({"circle-sort-key":new ct(H.layout_circle["circle-sort-key"])}),ba={paint:new Ai({"circle-radius":new ct(H.paint_circle["circle-radius"]),"circle-color":new ct(H.paint_circle["circle-color"]),"circle-blur":new ct(H.paint_circle["circle-blur"]),"circle-opacity":new ct(H.paint_circle["circle-opacity"]),"circle-translate":new gt(H.paint_circle["circle-translate"]),"circle-translate-anchor":new gt(H.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gt(H.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gt(H.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ct(H.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ct(H.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ct(H.paint_circle["circle-stroke-opacity"])}),layout:Fs},er=typeof Float32Array<"u"?Float32Array:Array;function fn(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oa(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],I=t[4],C=t[5],D=t[6],O=t[7],q=t[8],K=t[9],W=t[10],ne=t[11],le=t[12],ye=t[13],fe=t[14],Ee=t[15],Ae=i[0],Ce=i[1],De=i[2],Fe=i[3];return e[0]=Ae*l+Ce*I+De*q+Fe*le,e[1]=Ae*p+Ce*C+De*K+Fe*ye,e[2]=Ae*d+Ce*D+De*W+Fe*fe,e[3]=Ae*v+Ce*O+De*ne+Fe*Ee,e[4]=(Ae=i[4])*l+(Ce=i[5])*I+(De=i[6])*q+(Fe=i[7])*le,e[5]=Ae*p+Ce*C+De*K+Fe*ye,e[6]=Ae*d+Ce*D+De*W+Fe*fe,e[7]=Ae*v+Ce*O+De*ne+Fe*Ee,e[8]=(Ae=i[8])*l+(Ce=i[9])*I+(De=i[10])*q+(Fe=i[11])*le,e[9]=Ae*p+Ce*C+De*K+Fe*ye,e[10]=Ae*d+Ce*D+De*W+Fe*fe,e[11]=Ae*v+Ce*O+De*ne+Fe*Ee,e[12]=(Ae=i[12])*l+(Ce=i[13])*I+(De=i[14])*q+(Fe=i[15])*le,e[13]=Ae*p+Ce*C+De*K+Fe*ye,e[14]=Ae*d+Ce*D+De*W+Fe*fe,e[15]=Ae*v+Ce*O+De*ne+Fe*Ee,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var lo,$v=oa;function $c(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*v,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*v,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*v,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*v,e}lo=new er(3),er!=Float32Array&&(lo[0]=0,lo[1]=0,lo[2]=0),function(){var e=new er(4);er!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var ac=(function(){var e=new er(2);er!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,ba)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Pi(i)},t.prototype.queryRadius=function(i){var l=i;return Ro("circle-radius",this,l)+Ro("circle-stroke-width",this,l)+en(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C,D){for(var O=_a(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),q=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),K=this.paint.get("circle-pitch-alignment")==="map",W=K?O:function(Ke,Ye){return Ke.map(function(_t){return ps(_t,Ye)})}(O,D),ne=K?q*C:q,le=0,ye=d;le<ye.length;le+=1)for(var fe=0,Ee=ye[le];fe<Ee.length;fe+=1){var Ae=Ee[fe],Ce=K?Ae:ps(Ae,D),De=ne,Fe=$c([],[Ae.x,Ae.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?De*=Fe[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(De*=I.cameraToCenterDistance/Fe[3]),Ki(W,Ce,De))return!0}return!1},t}(Tn));function ps(e,t){var i=$c([],[e.x,e.y,0,1],t);return new V(i[0]/i[3],i[1]/i[3])}var Sf=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Pi);function Bo(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function cu(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=Bo({},{width:l,height:p},i);Sd(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function Sd(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,I=t.data,C=0;C<p.height;C++)for(var D=((i.y+C)*e.width+i.x)*d,O=((l.y+C)*t.width+l.x)*d,q=0;q<p.width*d;q++)I[O+q]=v[D+q];return t}ot("HeatmapBucket",Sf,{omit:["layers"]});var oc=function(e,t){Bo(this,e,1,t)};oc.prototype.resize=function(e){cu(this,e,1)},oc.prototype.clone=function(){return new oc({width:this.width,height:this.height},new Uint8Array(this.data))},oc.copy=function(e,t,i,l,p){Sd(e,t,i,l,p,1)};var dn=function(e,t){Bo(this,e,4,t)};dn.prototype.resize=function(e){cu(this,e,4)},dn.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},dn.prototype.clone=function(){return new dn({width:this.width,height:this.height},new Uint8Array(this.data))},dn.copy=function(e,t,i,l,p){Sd(e,t,i,l,p,4)},ot("AlphaImage",oc),ot("RGBAImage",dn);var eg={paint:new Ai({"heatmap-radius":new ct(H.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ct(H.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gt(H.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ao(H.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gt(H.paint_heatmap["heatmap-opacity"])})};function Al(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new dn({width:i,height:l}),d=function(ne,le,ye){t[e.evaluationKey]=ye;var fe=e.expression.evaluate(t);p.data[ne+le+0]=Math.floor(255*fe.r/fe.a),p.data[ne+le+1]=Math.floor(255*fe.g/fe.a),p.data[ne+le+2]=Math.floor(255*fe.b/fe.a),p.data[ne+le+3]=Math.floor(255*fe.a)};if(e.clips)for(var v=0,I=0;v<l;++v,I+=4*i)for(var C=0,D=0;C<i;C++,D+=4){var O=C/(i-1),q=e.clips[v];d(I,D,q.start*(1-O)+q.end*O)}else for(var K=0,W=0;K<i;K++,W+=4)d(0,W,K/(i-1));return p}var Ns=function(e){function t(i){e.call(this,i,eg),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Sf(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Al({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(Tn),sc={paint:new Ai({"hillshade-illumination-direction":new gt(H.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gt(H.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gt(H.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gt(H.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gt(H.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gt(H.paint_hillshade["hillshade-accent-color"])})},tg=function(e){function t(i){e.call(this,i,sc)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(Tn),vp=hn([{name:"a_pos",components:2,type:"Int16"}],4).members,rg=hu,ig=hu;function hu(e,t,i){i=i||2;var l,p,d,v,I,C,D,O=t&&t.length,q=O?t[0]*i:e.length,K=eh(e,0,q,i,!0),W=[];if(!K||K.next===K.prev)return W;if(O&&(K=function(le,ye,fe,Ee){var Ae,Ce,De,Fe=[];for(Ae=0,Ce=ye.length;Ae<Ce;Ae++)(De=eh(le,ye[Ae]*Ee,Ae<Ce-1?ye[Ae+1]*Ee:le.length,Ee,!1))===De.next&&(De.steiner=!0),Fe.push(Pl(De));for(Fe.sort(p_),Ae=0;Ae<Fe.length;Ae++)og(Fe[Ae],fe),fe=pu(fe,fe.next);return fe}(e,t,K,i)),e.length>80*i){l=d=e[0],p=v=e[1];for(var ne=i;ne<q;ne+=i)(I=e[ne])<l&&(l=I),(C=e[ne+1])<p&&(p=C),I>d&&(d=I),C>v&&(v=C);D=(D=Math.max(d-l,v-p))!==0?1/D:0}return zl(K,W,i,l,p,D),W}function eh(e,t,i,l,p){var d,v;if(p===Aa(e,t,i,l)>0)for(d=t;d<i;d+=l)v=gp(d,e[d],e[d+1],v);else for(d=i-l;d>=t;d-=l)v=gp(d,e[d],e[d+1],v);return v&&Dl(v,v.next)&&(_p(v),v=v.next),v}function pu(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!Dl(l,l.next)&&Hi(l.prev,l,l.next)!==0)l=l.next;else{if(_p(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function zl(e,t,i,l,p,d,v){if(e){!v&&d&&function(O,q,K,W){var ne=O;do ne.z===null&&(ne.z=lc(ne.x,ne.y,q,K,W)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==O);ne.prevZ.nextZ=null,ne.prevZ=null,function(le){var ye,fe,Ee,Ae,Ce,De,Fe,Ke,Ye=1;do{for(fe=le,le=null,Ce=null,De=0;fe;){for(De++,Ee=fe,Fe=0,ye=0;ye<Ye&&(Fe++,Ee=Ee.nextZ);ye++);for(Ke=Ye;Fe>0||Ke>0&&Ee;)Fe!==0&&(Ke===0||!Ee||fe.z<=Ee.z)?(Ae=fe,fe=fe.nextZ,Fe--):(Ae=Ee,Ee=Ee.nextZ,Ke--),Ce?Ce.nextZ=Ae:le=Ae,Ae.prevZ=Ce,Ce=Ae;fe=Ee}Ce.nextZ=null,Ye*=2}while(De>1)}(ne)}(e,l,p,d);for(var I,C,D=e;e.prev!==e.next;)if(I=e.prev,C=e.next,d?ng(e,l,p,d):kd(e))t.push(I.i/i),t.push(e.i/i),t.push(C.i/i),_p(e),e=C.next,D=C.next;else if((e=C)===D){v?v===1?zl(e=ag(pu(e),t,i),t,i,l,p,d,2):v===2&&th(e,t,i,l,p,d):zl(pu(e),t,i,l,p,d,1);break}}}function kd(e){var t=e.prev,i=e,l=e.next;if(Hi(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(Cl(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&Hi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ng(e,t,i,l){var p=e.prev,d=e,v=e.next;if(Hi(p,d,v)>=0)return!1;for(var I=p.x>d.x?p.x>v.x?p.x:v.x:d.x>v.x?d.x:v.x,C=p.y>d.y?p.y>v.y?p.y:v.y:d.y>v.y?d.y:v.y,D=lc(p.x<d.x?p.x<v.x?p.x:v.x:d.x<v.x?d.x:v.x,p.y<d.y?p.y<v.y?p.y:v.y:d.y<v.y?d.y:v.y,t,i,l),O=lc(I,C,t,i,l),q=e.prevZ,K=e.nextZ;q&&q.z>=D&&K&&K.z<=O;){if(q!==e.prev&&q!==e.next&&Cl(p.x,p.y,d.x,d.y,v.x,v.y,q.x,q.y)&&Hi(q.prev,q,q.next)>=0||(q=q.prevZ,K!==e.prev&&K!==e.next&&Cl(p.x,p.y,d.x,d.y,v.x,v.y,K.x,K.y)&&Hi(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;q&&q.z>=D;){if(q!==e.prev&&q!==e.next&&Cl(p.x,p.y,d.x,d.y,v.x,v.y,q.x,q.y)&&Hi(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;K&&K.z<=O;){if(K!==e.prev&&K!==e.next&&Cl(p.x,p.y,d.x,d.y,v.x,v.y,K.x,K.y)&&Hi(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function ag(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!Dl(p,d)&&Us(p,l,l.next,d)&&nh(p,d)&&nh(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),_p(l),_p(l.next),l=e=d),l=l.next}while(l!==e);return pu(l)}function th(e,t,i,l,p,d){var v=e;do{for(var I=v.next.next;I!==v.prev;){if(v.i!==I.i&&sg(v,I)){var C=Sy(v,I);return v=pu(v,v.next),C=pu(C,C.next),zl(v,t,i,l,p,d),void zl(C,t,i,l,p,d)}I=I.next}v=v.next}while(v!==e)}function p_(e,t){return e.x-t.x}function og(e,t){if(t=function(l,p){var d,v=p,I=l.x,C=l.y,D=-1/0;do{if(C<=v.y&&C>=v.next.y&&v.next.y!==v.y){var O=v.x+(C-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(O<=I&&O>D){if(D=O,O===I){if(C===v.y)return v;if(C===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==p);if(!d)return null;if(I===D)return d;var q,K=d,W=d.x,ne=d.y,le=1/0;v=d;do I>=v.x&&v.x>=W&&I!==v.x&&Cl(C<ne?I:D,C,W,ne,C<ne?D:I,C,v.x,v.y)&&(q=Math.abs(C-v.y)/(I-v.x),nh(v,l)&&(q<le||q===le&&(v.x>d.x||v.x===d.x&&rh(d,v)))&&(d=v,le=q)),v=v.next;while(v!==K);return d}(e,t)){var i=Sy(t,e);pu(t,t.next),pu(i,i.next)}}function rh(e,t){return Hi(e.prev,e,t.prev)<0&&Hi(t.next,e,e.next)<0}function lc(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Pl(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Cl(e,t,i,l,p,d,v,I){return(p-v)*(t-I)-(e-v)*(d-I)>=0&&(e-v)*(l-I)-(i-v)*(t-I)>=0&&(i-v)*(d-I)-(p-v)*(l-I)>=0}function sg(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&Us(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(nh(e,t)&&nh(t,e)&&function(i,l){var p=i,d=!1,v=(i.x+l.x)/2,I=(i.y+l.y)/2;do p.y>I!=p.next.y>I&&p.next.y!==p.y&&v<(p.next.x-p.x)*(I-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(Hi(e.prev,e,t.prev)||Hi(e,t.prev,t))||Dl(e,t)&&Hi(e.prev,e,e.next)>0&&Hi(t.prev,t,t.next)>0)}function Hi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Dl(e,t){return e.x===t.x&&e.y===t.y}function Us(e,t,i,l){var p=ih(Hi(e,t,i)),d=ih(Hi(e,t,l)),v=ih(Hi(i,l,e)),I=ih(Hi(i,l,t));return p!==d&&v!==I||!(p!==0||!kf(e,i,t))||!(d!==0||!kf(e,l,t))||!(v!==0||!kf(i,e,l))||!(I!==0||!kf(i,t,l))}function kf(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function ih(e){return e>0?1:e<0?-1:0}function nh(e,t){return Hi(e.prev,e,e.next)<0?Hi(e,t,e.next)>=0&&Hi(e,e.prev,t)>=0:Hi(e,t,e.prev)<0||Hi(e,e.next,t)<0}function Sy(e,t){var i=new Id(e.i,e.x,e.y),l=new Id(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function gp(e,t,i,l){var p=new Id(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function _p(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Id(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Aa(e,t,i,l){for(var p=0,d=t,v=i-l;d<i;d+=l)p+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return p}function fu(e,t,i,l,p){(function d(v,I,C,D,O){for(;D>C;){if(D-C>600){var q=D-C+1,K=I-C+1,W=Math.log(q),ne=.5*Math.exp(2*W/3),le=.5*Math.sqrt(W*ne*(q-ne)/q)*(K-q/2<0?-1:1);d(v,I,Math.max(C,Math.floor(I-K*ne/q+le)),Math.min(D,Math.floor(I+(q-K)*ne/q+le)),O)}var ye=v[I],fe=C,Ee=D;for(ja(v,C,I),O(v[D],ye)>0&&ja(v,C,D);fe<Ee;){for(ja(v,fe,Ee),fe++,Ee--;O(v[fe],ye)<0;)fe++;for(;O(v[Ee],ye)>0;)Ee--}O(v[C],ye)===0?ja(v,C,Ee):ja(v,++Ee,D),Ee<=I&&(C=Ee+1),I<=Ee&&(D=Ee-1)}})(e,t,i||0,l||e.length-1,p||du)}function ja(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function du(e,t){return e<t?-1:e>t?1:0}function Td(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],v=0;v<i;v++){var I=rt(e[v]);I!==0&&(e[v].area=Math.abs(I),p===void 0&&(p=I<0),p===I<0?(l&&d.push(l),l=[e[v]]):l.push(e[v]))}if(l&&d.push(l),t>1)for(var C=0;C<d.length;C++)d[C].length<=t||(fu(d[C],t,1,d[C].length-1,bp),d[C]=d[C].slice(0,t));return d}function bp(e,t){return t.area-e.area}function lg(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,v=t;d<v.length;d+=1){var I=v[d].paint.get(e+"-pattern");I.isConstant()||(p=!0);var C=I.constantOr(null);C&&(p=!0,l[C.to]=!0,l[C.from]=!0)}return p}function Ad(e,t,i,l,p){for(var d=p.patternDependencies,v=0,I=t;v<I.length;v+=1){var C=I[v],D=C.paint.get(e+"-pattern").value;if(D.kind!=="constant"){var O=D.evaluate({zoom:l-1},i,{},p.availableImages),q=D.evaluate({zoom:l},i,{},p.availableImages),K=D.evaluate({zoom:l+1},i,{},p.availableImages);q=q&&q.name?q.name:q,K=K&&K.name?K.name:K,d[O=O&&O.name?O.name:O]=!0,d[q]=!0,d[K]=!0,i.patterns[C.id]={min:O,mid:q,max:K}}}return i}hu.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(Aa(e,0,p?t[0]*i:e.length,i));if(p)for(var v=0,I=t.length;v<I;v++)d-=Math.abs(Aa(e,t[v]*i,v<I-1?t[v+1]*i:e.length,i));var C=0;for(v=0;v<l.length;v+=3){var D=l[v]*i,O=l[v+1]*i,q=l[v+2]*i;C+=Math.abs((e[D]-e[q])*(e[O+1]-e[D+1])-(e[D]-e[O])*(e[q+1]-e[D+1]))}return d===0&&C===0?0:Math.abs((C-d)/d)},hu.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var v=0;v<t;v++)i.vertices.push(e[p][d][v]);p>0&&i.holes.push(l+=e[p-1].length)}return i},rg.default=ig;var fs=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Il,this.indexArray=new Fa,this.indexArray2=new Na,this.programConfigurations=new zt(e.layers,e.zoom),this.segments=new Q,this.segments2=new Q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};fs.prototype.populate=function(e,t,i){this.hasPattern=lg("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var I=v[d],C=I.feature,D=I.id,O=I.index,q=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=zi(C,K);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),W,i)){var ne=l?l.evaluate(W,{},i,t.availableImages):void 0,le={id:D,properties:C.properties,type:C.type,sourceLayerIndex:q,index:O,geometry:K?W.geometry:fi(C),patterns:{},sortKey:ne};p.push(le)}}l&&p.sort(function(Ke,Ye){return Ke.sortKey-Ye.sortKey});for(var ye=0,fe=p;ye<fe.length;ye+=1){var Ee=fe[ye],Ae=Ee.geometry,Ce=Ee.index,De=Ee.sourceLayerIndex;if(this.hasPattern){var Fe=Ad("fill",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(Ee,Ae,Ce,i,{});t.featureIndex.insert(e[Ce].feature,Ae,Ce,De,this.index)}},fs.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},fs.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},fs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},fs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fs.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},fs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},fs.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=Td(t,500);d<v.length;d+=1){for(var I=v[d],C=0,D=0,O=I;D<O.length;D+=1)C+=O[D].length;for(var q=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),K=q.vertexLength,W=[],ne=[],le=0,ye=I;le<ye.length;le+=1){var fe=ye[le];if(fe.length!==0){fe!==I[0]&&ne.push(W.length/2);var Ee=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Ae=Ee.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Ae+fe.length-1,Ae),W.push(fe[0].x),W.push(fe[0].y);for(var Ce=1;Ce<fe.length;Ce++)this.layoutVertexArray.emplaceBack(fe[Ce].x,fe[Ce].y),this.indexArray2.emplaceBack(Ae+Ce-1,Ae+Ce),W.push(fe[Ce].x),W.push(fe[Ce].y);Ee.vertexLength+=fe.length,Ee.primitiveLength+=fe.length}}for(var De=rg(W,ne),Fe=0;Fe<De.length;Fe+=3)this.indexArray.emplaceBack(K+De[Fe],K+De[Fe+1],K+De[Fe+2]);q.vertexLength+=C,q.primitiveLength+=De.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ot("FillBucket",fs,{omit:["layers","patternFeatures"]});var xp=new Ai({"fill-sort-key":new ct(H.layout_fill["fill-sort-key"])}),wp={paint:new Ai({"fill-antialias":new gt(H.paint_fill["fill-antialias"]),"fill-opacity":new ct(H.paint_fill["fill-opacity"]),"fill-color":new ct(H.paint_fill["fill-color"]),"fill-outline-color":new ct(H.paint_fill["fill-outline-color"]),"fill-translate":new gt(H.paint_fill["fill-translate"]),"fill-translate-anchor":new gt(H.paint_fill["fill-translate-anchor"]),"fill-pattern":new kl(H.paint_fill["fill-pattern"])}),layout:xp},ug=function(e){function t(i){e.call(this,i,wp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new fs(i)},t.prototype.queryRadius=function(){return en(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C){return so(_a(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),d)},t.prototype.isTileClipped=function(){return!0},t}(Tn),Ep=hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,If=ah;function ah(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(cg,this,t)}function cg(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var v=p._keys[l.readVarint()],I=p._values[l.readVarint()];p.properties[v]=I}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function oh(e){for(var t,i,l=0,p=0,d=e.length,v=d-1;p<d;v=p++)l+=((i=e[v]).x-(t=e[p]).x)*(t.y+i.y);return l}ah.types=["Unknown","Point","LineString","Polygon"],ah.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,v=0,I=[];e.pos<i;){if(p<=0){var C=e.readVarint();l=7&C,p=C>>3}if(p--,l===1||l===2)d+=e.readSVarint(),v+=e.readSVarint(),l===1&&(t&&I.push(t),t=[]),t.push(new V(d,v));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&I.push(t),I},ah.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,v=1/0,I=-1/0,C=1/0,D=-1/0;e.pos<t;){if(l<=0){var O=e.readVarint();i=7&O,l=O>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<v&&(v=p),p>I&&(I=p),(d+=e.readSVarint())<C&&(C=d),d>D&&(D=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,C,I,D]},ah.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),v=this.extent*e,I=this.extent*t,C=this.loadGeometry(),D=ah.types[this.type];function O(W){for(var ne=0;ne<W.length;ne++){var le=W[ne];W[ne]=[360*(le.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+I)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(l=0;l<C.length;l++)q[l]=C[l][0];O(C=q);break;case 2:for(l=0;l<C.length;l++)O(C[l]);break;case 3:for(C=function(W){var ne=W.length;if(ne<=1)return[W];for(var le,ye,fe=[],Ee=0;Ee<ne;Ee++){var Ae=oh(W[Ee]);Ae!==0&&(ye===void 0&&(ye=Ae<0),ye===Ae<0?(le&&fe.push(le),le=[W[Ee]]):le.push(W[Ee]))}return le&&fe.push(le),fe}(C),l=0;l<C.length;l++)for(p=0;p<C[l].length;p++)O(C[l][p])}C.length===1?C=C[0]:D="Multi"+D;var K={type:"Feature",geometry:{type:D,coordinates:C},properties:this.properties};return"id"in this&&(K.id=this.id),K};var ky=Ml;function Ml(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(qs,this,t),this.length=this._features.length}function qs(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var v=l.readVarint()>>3;p=v===1?l.readString():v===2?l.readFloat():v===3?l.readDouble():v===4?l.readVarint64():v===5?l.readVarint():v===6?l.readSVarint():v===7?l.readBoolean():null}return p}(i))}function mu(e,t,i){if(e===3){var l=new ky(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}Ml.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new If(this._pbf,t,this.extent,this._keys,this._values)};var sh={VectorTile:function(e,t){this.layers=e.readFields(mu,{},t)},VectorTileFeature:If,VectorTileLayer:ky},Sp=sh.VectorTileFeature.types,hg=Math.pow(2,13);function kp(e,t,i,l,p,d,v,I){e.emplaceBack(t,i,2*Math.floor(l*hg)+v,p*hg*2,d*hg*2,Math.round(I))}var za=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new pn,this.indexArray=new Fa,this.programConfigurations=new zt(e.layers,e.zoom),this.segments=new Q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ip(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}za.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=lg("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],v=d.feature,I=d.id,C=d.index,D=d.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,q=zi(v,O);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),q,i)){var K={id:I,sourceLayerIndex:D,index:C,geometry:O?q.geometry:fi(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Ad("fill-extrusion",this.layers,K,this.zoom,t)):this.addFeature(K,K.geometry,C,i,{}),t.featureIndex.insert(v,K.geometry,C,D,this.index,!0)}}},za.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},za.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},za.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},za.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},za.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ep),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},za.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},za.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=Td(t,500);d<v.length;d+=1){for(var I=v[d],C=0,D=0,O=I;D<O.length;D+=1)C+=O[D].length;for(var q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),K=0,W=I;K<W.length;K+=1){var ne=W[K];if(ne.length!==0&&!((Kt=ne).every(function(Ht){return Ht.x<0})||Kt.every(function(Ht){return Ht.x>8192})||Kt.every(function(Ht){return Ht.y<0})||Kt.every(function(Ht){return Ht.y>8192})))for(var le=0,ye=0;ye<ne.length;ye++){var fe=ne[ye];if(ye>=1){var Ee=ne[ye-1];if(!Ip(fe,Ee)){q.vertexLength+4>Q.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Ae=fe.sub(Ee)._perp()._unit(),Ce=Ee.dist(fe);le+Ce>32768&&(le=0),kp(this.layoutVertexArray,fe.x,fe.y,Ae.x,Ae.y,0,0,le),kp(this.layoutVertexArray,fe.x,fe.y,Ae.x,Ae.y,0,1,le),kp(this.layoutVertexArray,Ee.x,Ee.y,Ae.x,Ae.y,0,0,le+=Ce),kp(this.layoutVertexArray,Ee.x,Ee.y,Ae.x,Ae.y,0,1,le);var De=q.vertexLength;this.indexArray.emplaceBack(De,De+2,De+1),this.indexArray.emplaceBack(De+1,De+2,De+3),q.vertexLength+=4,q.primitiveLength+=2}}}}if(q.vertexLength+C>Q.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),Sp[e.type]==="Polygon"){for(var Fe=[],Ke=[],Ye=q.vertexLength,_t=0,it=I;_t<it.length;_t+=1){var bt=it[_t];if(bt.length!==0){bt!==I[0]&&Ke.push(Fe.length/2);for(var lt=0;lt<bt.length;lt++){var Dt=bt[lt];kp(this.layoutVertexArray,Dt.x,Dt.y,0,0,1,1,0),Fe.push(Dt.x),Fe.push(Dt.y)}}}for(var wt=rg(Fe,Ke),ut=0;ut<wt.length;ut+=3)this.indexArray.emplaceBack(Ye+wt[ut],Ye+wt[ut+2],Ye+wt[ut+1]);q.primitiveLength+=wt.length/3,q.vertexLength+=C}}var Kt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ot("FillExtrusionBucket",za,{omit:["layers","features"]});var pg={paint:new Ai({"fill-extrusion-opacity":new gt(H["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ct(H["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gt(H["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gt(H["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kl(H["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ct(H["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ct(H["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gt(H["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Tp=function(e){function t(i){e.call(this,i,pg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new za(i)},t.prototype.queryRadius=function(){return en(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C,D){var O=_a(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),q=this.paint.get("fill-extrusion-height").evaluate(l,p),K=this.paint.get("fill-extrusion-base").evaluate(l,p),W=function(le,ye,fe,Ee){for(var Ae=[],Ce=0,De=le;Ce<De.length;Ce+=1){var Fe=De[Ce],Ke=[Fe.x,Fe.y,0,1];$c(Ke,Ke,ye),Ae.push(new V(Ke[0]/Ke[3],Ke[1]/Ke[3]))}return Ae}(O,D),ne=function(le,ye,fe,Ee){for(var Ae=[],Ce=[],De=Ee[8]*ye,Fe=Ee[9]*ye,Ke=Ee[10]*ye,Ye=Ee[11]*ye,_t=Ee[8]*fe,it=Ee[9]*fe,bt=Ee[10]*fe,lt=Ee[11]*fe,Dt=0,wt=le;Dt<wt.length;Dt+=1){for(var ut=[],Kt=[],Ht=0,ir=wt[Dt];Ht<ir.length;Ht+=1){var St=ir[Ht],gr=St.x,Or=St.y,Yr=Ee[0]*gr+Ee[4]*Or+Ee[12],yi=Ee[1]*gr+Ee[5]*Or+Ee[13],Vr=Ee[2]*gr+Ee[6]*Or+Ee[14],oi=Ee[3]*gr+Ee[7]*Or+Ee[15],tn=Vr+Ke,rn=oi+Ye,Xi=Yr+_t,mn=yi+it,Di=Vr+bt,Mr=oi+lt,vi=new V((Yr+De)/rn,(yi+Fe)/rn);vi.z=tn/rn,ut.push(vi);var ar=new V(Xi/Mr,mn/Mr);ar.z=Di/Mr,Kt.push(ar)}Ae.push(ut),Ce.push(Kt)}return[Ae,Ce]}(d,K,q,D);return function(le,ye,fe){var Ee=1/0;so(fe,ye)&&(Ee=Iy(fe,ye[0]));for(var Ae=0;Ae<ye.length;Ae++)for(var Ce=ye[Ae],De=le[Ae],Fe=0;Fe<Ce.length-1;Fe++){var Ke=Ce[Fe],Ye=[Ke,Ce[Fe+1],De[Fe+1],De[Fe],Ke];Bn(fe,Ye)&&(Ee=Math.min(Ee,Iy(fe,Ye)))}return Ee!==1/0&&Ee}(ne[0],ne[1],W)},t}(Tn);function uc(e,t){return e.x*t.x+e.y*t.y}function Iy(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],v=e[0],I=i.sub(p),C=d.sub(p),D=v.sub(p),O=uc(I,I),q=uc(I,C),K=uc(C,C),W=uc(D,I),ne=uc(D,C),le=O*K-q*q,ye=(K*W-q*ne)/le,fe=(O*ne-q*W)/le,Ee=p.z*(1-ye-fe)+i.z*ye+d.z*fe;if(isFinite(Ee))return Ee}return 1/0}for(var Ae=1/0,Ce=0,De=t;Ce<De.length;Ce+=1)Ae=Math.min(Ae,De[Ce].z);return Ae}var fg=hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,lh=hn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,dg=sh.VectorTileFeature.types,yu=Math.cos(Math.PI/180*37.5),ds=Math.pow(2,14)/.5,Ci=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new Gi,this.layoutVertexArray2=new aa,this.indexArray=new Fa,this.programConfigurations=new zt(e.layers,e.zoom),this.segments=new Q,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Ci.prototype.populate=function(e,t,i){this.hasPattern=lg("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var I=v[d],C=I.feature,D=I.id,O=I.index,q=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=zi(C,K);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),W,i)){var ne=l?l.evaluate(W,{},i):void 0,le={id:D,properties:C.properties,type:C.type,sourceLayerIndex:q,index:O,geometry:K?W.geometry:fi(C),patterns:{},sortKey:ne};p.push(le)}}l&&p.sort(function(Ke,Ye){return Ke.sortKey-Ye.sortKey});for(var ye=0,fe=p;ye<fe.length;ye+=1){var Ee=fe[ye],Ae=Ee.geometry,Ce=Ee.index,De=Ee.sourceLayerIndex;if(this.hasPattern){var Fe=Ad("line",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(Ee,Ae,Ce,i,{});t.featureIndex.insert(e[Ce].feature,Ae,Ce,De,this.index)}},Ci.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ci.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Ci.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ci.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ci.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,lh)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ci.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ci.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Ci.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),I=d.get("line-cap"),C=d.get("line-miter-limit"),D=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var O=0,q=t;O<q.length;O+=1)this.addLine(q[O],e,v,I,C,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},Ci.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var I=dg[t.type]==="Polygon",C=e.length;C>=2&&e[C-1].equals(e[C-2]);)C--;for(var D=0;D<C-1&&e[D].equals(e[D+1]);)D++;if(!(C<(I?3:2))){i==="bevel"&&(p=1.05);var O,q=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),W=void 0,ne=void 0,le=void 0,ye=void 0;this.e1=this.e2=-1,I&&(ye=e[D].sub(O=e[C-2])._unit()._perp());for(var fe=D;fe<C;fe++)if(!(ne=fe===C-1?I?e[D+1]:void 0:e[fe+1])||!e[fe].equals(ne)){ye&&(le=ye),O&&(W=O),O=e[fe],ye=ne?ne.sub(O)._unit()._perp():le;var Ee=(le=le||ye).add(ye);Ee.x===0&&Ee.y===0||Ee._unit();var Ae=le.x*ye.x+le.y*ye.y,Ce=Ee.x*ye.x+Ee.y*ye.y,De=Ce!==0?1/Ce:1/0,Fe=2*Math.sqrt(2-2*Ce),Ke=Ce<yu&&W&&ne,Ye=le.x*ye.y-le.y*ye.x>0;if(Ke&&fe>D){var _t=O.dist(W);if(_t>2*q){var it=O.sub(O.sub(W)._mult(q/_t)._round());this.updateDistance(W,it),this.addCurrentVertex(it,le,0,0,K),W=it}}var bt=W&&ne,lt=bt?i:I?"butt":l;if(bt&&lt==="round"&&(De<d?lt="miter":De<=2&&(lt="fakeround")),lt==="miter"&&De>p&&(lt="bevel"),lt==="bevel"&&(De>2&&(lt="flipbevel"),De<p&&(lt="miter")),W&&this.updateDistance(W,O),lt==="miter")Ee._mult(De),this.addCurrentVertex(O,Ee,0,0,K);else if(lt==="flipbevel"){if(De>100)Ee=ye.mult(-1);else{var Dt=De*le.add(ye).mag()/le.sub(ye).mag();Ee._perp()._mult(Dt*(Ye?-1:1))}this.addCurrentVertex(O,Ee,0,0,K),this.addCurrentVertex(O,Ee.mult(-1),0,0,K)}else if(lt==="bevel"||lt==="fakeround"){var wt=-Math.sqrt(De*De-1),ut=Ye?wt:0,Kt=Ye?0:wt;if(W&&this.addCurrentVertex(O,le,ut,Kt,K),lt==="fakeround")for(var Ht=Math.round(180*Fe/Math.PI/20),ir=1;ir<Ht;ir++){var St=ir/Ht;if(St!==.5){var gr=St-.5;St+=St*gr*(St-1)*((1.0904+Ae*(Ae*(3.55645-1.43519*Ae)-3.2452))*gr*gr+(.848013+Ae*(.215638*Ae-1.06021)))}var Or=ye.sub(le)._mult(St)._add(le)._unit()._mult(Ye?-1:1);this.addHalfVertex(O,Or.x,Or.y,!1,Ye,0,K)}ne&&this.addCurrentVertex(O,ye,-ut,-Kt,K)}else if(lt==="butt")this.addCurrentVertex(O,Ee,0,0,K);else if(lt==="square"){var Yr=W?1:-1;this.addCurrentVertex(O,Ee,Yr,Yr,K)}else lt==="round"&&(W&&(this.addCurrentVertex(O,le,0,0,K),this.addCurrentVertex(O,le,1,1,K,!0)),ne&&(this.addCurrentVertex(O,ye,-1,-1,K,!0),this.addCurrentVertex(O,ye,0,0,K)));if(Ke&&fe<C-1){var yi=O.dist(ne);if(yi>2*q){var Vr=O.add(ne.sub(O)._mult(q/yi)._round());this.updateDistance(O,Vr),this.addCurrentVertex(Vr,ye,0,0,K),O=Vr}}}}},Ci.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var v=t.y*l-t.x,I=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,v,I,d,!0,-l,p),this.distance>ds/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},Ci.prototype.addHalfVertex=function(e,t,i,l,p,d,v){var I=.5*(this.lineClips?this.scaledDistance*(ds-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),v.primitiveLength++),p?this.e2=C:this.e1=C},Ci.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ci.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ot("LineBucket",Ci,{omit:["layers","patternFeatures"]});var mg=new Ai({"line-cap":new gt(H.layout_line["line-cap"]),"line-join":new ct(H.layout_line["line-join"]),"line-miter-limit":new gt(H.layout_line["line-miter-limit"]),"line-round-limit":new gt(H.layout_line["line-round-limit"]),"line-sort-key":new ct(H.layout_line["line-sort-key"])}),uh={paint:new Ai({"line-opacity":new ct(H.paint_line["line-opacity"]),"line-color":new ct(H.paint_line["line-color"]),"line-translate":new gt(H.paint_line["line-translate"]),"line-translate-anchor":new gt(H.paint_line["line-translate-anchor"]),"line-width":new ct(H.paint_line["line-width"]),"line-gap-width":new ct(H.paint_line["line-gap-width"]),"line-offset":new ct(H.paint_line["line-offset"]),"line-blur":new ct(H.paint_line["line-blur"]),"line-dasharray":new Yn(H.paint_line["line-dasharray"]),"line-pattern":new kl(H.paint_line["line-pattern"]),"line-gradient":new ao(H.paint_line["line-gradient"])}),layout:mg},f_=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new tr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=Ue({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(ct))(uh.paint.properties["line-width"].specification);f_.useIntegerZoom=!0;var yg=function(e){function t(i){e.call(this,i,uh),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Cn,this.gradientVersion=(this.gradientVersion+1)%pe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=f_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new Ci(i)},t.prototype.queryRadius=function(i){var l=i,p=Ty(Ro("line-width",this,l),Ro("line-gap-width",this,l)),d=Ro("line-offset",this,l);return p/2+Math.abs(d)+en(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C){var D=_a(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),O=C/2*Ty(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),q=this.paint.get("line-offset").evaluate(l,p);return q&&(d=function(K,W){for(var ne=[],le=new V(0,0),ye=0;ye<K.length;ye++){for(var fe=K[ye],Ee=[],Ae=0;Ae<fe.length;Ae++){var Ce=fe[Ae],De=fe[Ae+1],Fe=Ae===0?le:Ce.sub(fe[Ae-1])._unit()._perp(),Ke=Ae===fe.length-1?le:De.sub(Ce)._unit()._perp(),Ye=Fe._add(Ke)._unit();Ye._mult(1/(Ye.x*Ke.x+Ye.y*Ke.y)),Ee.push(Ye._mult(W)._add(Ce))}ne.push(Ee)}return ne}(d,q*C)),function(K,W,ne){for(var le=0;le<W.length;le++){var ye=W[le];if(K.length>=3){for(var fe=0;fe<ye.length;fe++)if(ga(K,ye[fe]))return!0}if(Qn(K,ye,ne))return!0}return!1}(D,d,O)},t.prototype.isTileClipped=function(){return!0},t}(Tn);function Ty(e,t){return t>0?t+2*e:e}var Ap=hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),zp=hn([{name:"a_projected_pos",components:3,type:"Float32"}],4),vg=(hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ch=(hn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),zd=hn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gg(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,v){var I=d.layout.get("text-transform").evaluate(v,{});return I==="uppercase"?p=p.toLocaleUpperCase():I==="lowercase"&&(p=p.toLocaleLowerCase()),Mn.applyArabicShaping&&(p=Mn.applyArabicShaping(p)),p}(l.text,t,i)}),e}hn([{name:"triangle",components:3,type:"Uint16"}]),hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hn([{type:"Float32",name:"offsetX"}]),hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Pp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},cc=function(e,t,i,l,p){var d,v,I=8*p-l-1,C=(1<<I)-1,D=C>>1,O=-7,q=i?p-1:0,K=i?-1:1,W=e[t+q];for(q+=K,d=W&(1<<-O)-1,W>>=-O,O+=I;O>0;d=256*d+e[t+q],q+=K,O-=8);for(v=d&(1<<-O)-1,d>>=-O,O+=l;O>0;v=256*v+e[t+q],q+=K,O-=8);if(d===0)d=1-D;else{if(d===C)return v?NaN:1/0*(W?-1:1);v+=Math.pow(2,l),d-=D}return(W?-1:1)*v*Math.pow(2,d-l)},Ay=function(e,t,i,l,p,d){var v,I,C,D=8*d-p-1,O=(1<<D)-1,q=O>>1,K=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=l?0:d-1,ne=l?1:-1,le=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(I=isNaN(t)?1:0,v=O):(v=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-v))<1&&(v--,C*=2),(t+=v+q>=1?K/C:K*Math.pow(2,1-q))*C>=2&&(v++,C/=2),v+q>=O?(I=0,v=O):v+q>=1?(I=(t*C-1)*Math.pow(2,p),v+=q):(I=t*Math.pow(2,q-1)*Math.pow(2,p),v=0));p>=8;e[i+W]=255&I,W+=ne,I/=256,p-=8);for(v=v<<p|I,D+=p;D>0;e[i+W]=255&v,W+=ne,v/=256,D-=8);e[i+W-ne]|=128*le},ms=fr;function fr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}fr.Varint=0,fr.Fixed64=1,fr.Bytes=2,fr.Fixed32=5;var Ll=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Rl(e){return e.type===fr.Bytes?e.readVarint()+e.pos:e.pos+1}function js(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function d_(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function _g(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Cp(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Dp(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function bg(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Mp(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function Pd(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function xg(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function wg(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function hh(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Cd(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function ph(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function hc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Lp(e,t,i){e===1&&i.readMessage(Bl,t)}function Bl(e,t,i){if(e===3){var l=i.readMessage(Tf,{}),p=l.width,d=l.height,v=l.left,I=l.top,C=l.advance;t.push({id:l.id,bitmap:new oc({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:v,top:I,advance:C}})}}function Tf(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function zy(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(le,ye){return ye.h-le.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],I=0,C=0,D=0,O=e;D<O.length;D+=1)for(var q=O[D],K=v.length-1;K>=0;K--){var W=v[K];if(!(q.w>W.w||q.h>W.h)){if(q.x=W.x,q.y=W.y,C=Math.max(C,q.y+q.h),I=Math.max(I,q.x+q.w),q.w===W.w&&q.h===W.h){var ne=v.pop();K<v.length&&(v[K]=ne)}else q.h===W.h?(W.x+=q.w,W.w-=q.w):q.w===W.w?(W.y+=q.h,W.h-=q.h):(v.push({x:W.x+q.w,y:W.y,w:W.w-q.w,h:q.h}),W.y+=q.h,W.h-=q.h);break}}return{w:I,h:C,fill:t/(I*C)||0}}fr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Cd(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=hc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Cd(this.buf,this.pos)+4294967296*Cd(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Cd(this.buf,this.pos)+4294967296*hc(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=cc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=cc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,v){var I,C,D=v.buf;if(I=(112&(C=D[v.pos++]))>>4,C<128||(I|=(127&(C=D[v.pos++]))<<3,C<128)||(I|=(127&(C=D[v.pos++]))<<10,C<128)||(I|=(127&(C=D[v.pos++]))<<17,C<128)||(I|=(127&(C=D[v.pos++]))<<24,C<128)||(I|=(1&(C=D[v.pos++]))<<31,C<128))return js(p,I,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Ll?function(i,l,p){return Ll.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",v=l;v<p;){var I,C,D,O=i[v],q=null,K=O>239?4:O>223?3:O>191?2:1;if(v+K>p)break;K===1?O<128&&(q=O):K===2?(192&(I=i[v+1]))==128&&(q=(31&O)<<6|63&I)<=127&&(q=null):K===3?(C=i[v+2],(192&(I=i[v+1]))==128&&(192&C)==128&&((q=(15&O)<<12|(63&I)<<6|63&C)<=2047||q>=55296&&q<=57343)&&(q=null)):K===4&&(C=i[v+2],D=i[v+3],(192&(I=i[v+1]))==128&&(192&C)==128&&(192&D)==128&&((q=(15&O)<<18|(63&I)<<12|(63&C)<<6|63&D)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,K=1):q>65535&&(q-=65536,d+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),d+=String.fromCharCode(q),v+=K}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==fr.Bytes)return e.push(this.readVarint(t));var i=Rl(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==fr.Bytes)return e.push(this.readSVarint());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==fr.Bytes)return e.push(this.readBoolean());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==fr.Bytes)return e.push(this.readFloat());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==fr.Bytes)return e.push(this.readDouble());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==fr.Bytes)return e.push(this.readFixed32());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==fr.Bytes)return e.push(this.readSFixed32());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==fr.Bytes)return e.push(this.readFixed64());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==fr.Bytes)return e.push(this.readSFixed64());var t=Rl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===fr.Varint)for(;this.buf[this.pos++]>127;);else if(t===fr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===fr.Fixed32)this.pos+=4;else{if(t!==fr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),ph(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),ph(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),ph(this.buf,-1&e,this.pos),ph(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),ph(this.buf,-1&e,this.pos),ph(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,I){I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,I.buf[I.pos]=127&(d>>>=7)}(l,0,i),function(d,v){var I=(7&d)<<4;v.buf[v.pos++]|=I|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var v,I,C=0;C<p.length;C++){if((v=p.charCodeAt(C))>55295&&v<57344){if(!I){v>56319||C+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):I=v;continue}if(v<56320){l[d++]=239,l[d++]=191,l[d++]=189,I=v;continue}v=I-55296<<10|v-56320|65536,I=null}else I&&(l[d++]=239,l[d++]=191,l[d++]=189,I=null);v<128?l[d++]=v:(v<2048?l[d++]=v>>6|192:(v<65536?l[d++]=v>>12|224:(l[d++]=v>>18|240,l[d++]=v>>12&63|128),l[d++]=v>>6&63|128),l[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&d_(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Ay(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ay(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&d_(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,fr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,_g,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Cp,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Mp,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Dp,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,bg,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Pd,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,xg,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,wg,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,hh,t)},writeBytesField:function(e,t){this.writeTag(e,fr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,fr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,fr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,fr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,fr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,fr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,fr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,fr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,fr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,fr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Af=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,v=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=v,this.version=l},Zs={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Zs.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Zs.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Zs.tlbr.get=function(){return this.tl.concat(this.br)},Zs.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Af.prototype,Zs);var uo=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=zy(p),v=new dn({width:d.w||1,height:d.h||1});for(var I in e){var C=e[I],D=i[I].paddedRect;dn.copy(C.data,v,{x:0,y:0},{x:D.x+1,y:D.y+1},C.data)}for(var O in t){var q=t[O],K=l[O].paddedRect,W=K.x+1,ne=K.y+1,le=q.data.width,ye=q.data.height;dn.copy(q.data,v,{x:0,y:0},{x:W,y:ne},q.data),dn.copy(q.data,v,{x:0,y:ye-1},{x:W,y:ne-1},{width:le,height:1}),dn.copy(q.data,v,{x:0,y:0},{x:W,y:ne+ye},{width:le,height:1}),dn.copy(q.data,v,{x:le-1,y:0},{x:W-1,y:ne},{width:1,height:ye}),dn.copy(q.data,v,{x:0,y:0},{x:W+le,y:ne},{width:1,height:ye})}this.image=v,this.iconPositions=i,this.patternPositions=l};uo.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new Af(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},uo.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},uo.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},ot("ImagePosition",Af),ot("ImageAtlas",uo);var Za={horizontal:1,vertical:2,horizontalOnly:3},vu=function(){this.scale=1,this.fontStack="",this.imageName=null};vu.forText=function(e,t){var i=new vu;return i.scale=e||1,i.fontStack=t,i},vu.forImage=function(e){var t=new vu;return t.imageName=e,t};var On=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function zf(e,t,i,l,p,d,v,I,C,D,O,q,K,W,ne,le){var ye,fe=On.fromFeature(e,p);q===Za.vertical&&fe.verticalizePunctuation();var Ee=Mn.processBidirectionalText,Ae=Mn.processStyledBidirectionalText;if(Ee&&fe.sections.length===1){ye=[];for(var Ce=0,De=Ee(fe.toString(),Ol(fe,D,d,t,l,W,ne));Ce<De.length;Ce+=1){var Fe=De[Ce],Ke=new On;Ke.text=Fe,Ke.sections=fe.sections;for(var Ye=0;Ye<Fe.length;Ye++)Ke.sectionIndex.push(0);ye.push(Ke)}}else if(Ae){ye=[];for(var _t=0,it=Ae(fe.text,fe.sectionIndex,Ol(fe,D,d,t,l,W,ne));_t<it.length;_t+=1){var bt=it[_t],lt=new On;lt.text=bt[0],lt.sectionIndex=bt[1],lt.sections=fe.sections,ye.push(lt)}}else ye=function(ut,Kt){for(var Ht=[],ir=ut.text,St=0,gr=0,Or=Kt;gr<Or.length;gr+=1){var Yr=Or[gr];Ht.push(ut.substring(St,Yr)),St=Yr}return St<ir.length&&Ht.push(ut.substring(St,ir.length)),Ht}(fe,Ol(fe,D,d,t,l,W,ne));var Dt=[],wt={positionedLines:Dt,text:fe.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(ut,Kt,Ht,ir,St,gr,Or,Yr,yi,Vr,oi,tn){for(var rn=0,Xi=-17,mn=0,Di=0,Mr=Yr==="right"?1:Yr==="left"?0:.5,vi=0,ar=0,Sr=St;ar<Sr.length;ar+=1){var Fr=Sr[ar];Fr.trim();var cr=Fr.getMaxScale(),yn=24*(cr-1),Wi={positionedGlyphs:[],lineOffset:0};ut.positionedLines[vi]=Wi;var Jr=Wi.positionedGlyphs,si=0;if(Fr.length()){for(var vn=0;vn<Fr.length();vn++){var _r=Fr.getSection(vn),Ys=Fr.getSectionIndex(vn),Vn=Fr.getCharCode(vn),Js=0,gi=null,ql=null,Oo=null,Es=24,Ss=!(yi===Za.horizontal||!oi&&!su(Vn)||oi&&(pc[Vn]||(Qs=Vn,$e.Arabic(Qs)||$e["Arabic Supplement"](Qs)||$e["Arabic Extended-A"](Qs)||$e["Arabic Presentation Forms-A"](Qs)||$e["Arabic Presentation Forms-B"](Qs))));if(_r.imageName){var Ka=ir[_r.imageName];if(!Ka)continue;Oo=_r.imageName,ut.iconsInText=ut.iconsInText||!0,ql=Ka.paddedRect;var Vo=Ka.displaySize;_r.scale=24*_r.scale/tn,Js=yn+(24-Vo[1]*_r.scale),Es=(gi={width:Vo[0],height:Vo[1],left:1,top:-3,advance:Ss?Vo[1]:Vo[0]}).advance;var kh=Ss?Vo[0]*_r.scale-24*cr:Vo[1]*_r.scale-24*cr;kh>0&&kh>si&&(si=kh)}else{var Lf=Ht[_r.fontStack],ks=Lf&&Lf[Vn];if(ks&&ks.rect)ql=ks.rect,gi=ks.metrics;else{var co=Kt[_r.fontStack],Rf=co&&co[Vn];if(!Rf)continue;gi=Rf.metrics}Js=24*(cr-_r.scale)}Ss?(ut.verticalizable=!0,Jr.push({glyph:Vn,imageName:Oo,x:rn,y:Xi+Js,vertical:Ss,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:Ys,metrics:gi,rect:ql}),rn+=Es*_r.scale+Vr):(Jr.push({glyph:Vn,imageName:Oo,x:rn,y:Xi+Js,vertical:Ss,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:Ys,metrics:gi,rect:ql}),rn+=gi.advance*_r.scale+Vr)}Jr.length!==0&&(mn=Math.max(rn-Vr,mn),Rp(Jr,0,Jr.length-1,Mr,si)),rn=0;var Ih=gr*cr+si;Wi.lineOffset=Math.max(si,yn),Xi+=Ih,Di=Math.max(Ih,Di),++vi}else Xi+=gr,++vi}var Qs,Zp=Xi- -17,jl=Dd(Or),ku=jl.horizontalAlign,Th=jl.verticalAlign;(function(Ha,Is,Xa,Fo,Bf,Zl,Ud,Gp,Iu){var $s,Of=(Is-Xa)*Bf;$s=Zl!==Ud?-Gp*Fo- -17:(-Fo*Iu+.5)*Ud;for(var el=0,gc=Ha;el<gc.length;el+=1)for(var _c=0,Kp=gc[el].positionedGlyphs;_c<Kp.length;_c+=1){var Ts=Kp[_c];Ts.x+=Of,Ts.y+=$s}})(ut.positionedLines,Mr,ku,Th,mn,Di,gr,Zp,St.length),ut.top+=-Th*Zp,ut.bottom=ut.top+Zp,ut.left+=-ku*mn,ut.right=ut.left+mn}(wt,t,i,l,ye,v,I,C,q,D,K,le),!function(ut){for(var Kt=0,Ht=ut;Kt<Ht.length;Kt+=1)if(Ht[Kt].positionedGlyphs.length!==0)return!1;return!0}(Dt)&&wt}On.fromFeature=function(e,t){for(var i=new On,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},On.prototype.length=function(){return this.text.length},On.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},On.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},On.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},On.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&lp(l)&&!Pp[e[i+1]]||p&&lp(p)&&!Pp[e[i-1]]||!Pp[e[i]]?e[i]:Pp[e[i]]}return t}(this.text)},On.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&pc[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&pc[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},On.prototype.substring=function(e,t){var i=new On;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},On.prototype.toString=function(){return this.text},On.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},On.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(vu.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},On.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(vu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}else Ot("Can't add FormattedSection with an empty image.")},On.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var pc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Pa={};function Py(e,t,i,l,p,d){if(t.imageName){var v=l[t.imageName];return v?v.displaySize[0]*t.scale*24/d+p:0}var I=i[t.fontStack],C=I&&I[e];return C?C.metrics.advance*t.scale+p:0}function $n(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function gu(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function ys(e,t,i,l,p,d){for(var v=null,I=$n(t,i,p,d),C=0,D=l;C<D.length;C+=1){var O=D[C],q=$n(t-O.x,i,p,d)+O.badness;q<=I&&(v=O,I=q)}return{index:e,x:t,priorBreak:v,badness:I}}function Ol(e,t,i,l,p,d,v){if(d!=="point")return[];if(!e)return[];for(var I,C=[],D=function(ye,fe,Ee,Ae,Ce,De){for(var Fe=0,Ke=0;Ke<ye.length();Ke++){var Ye=ye.getSection(Ke);Fe+=Py(ye.getCharCode(Ke),Ye,Ae,Ce,fe,De)}return Fe/Math.max(1,Math.ceil(Fe/Ee))}(e,t,i,l,p,v),O=e.text.indexOf("\u200B")>=0,q=0,K=0;K<e.length();K++){var W=e.getSection(K),ne=e.getCharCode(K);if(pc[ne]||(q+=Py(ne,W,l,p,t,v)),K<e.length()-1){var le=!((I=ne)<11904||!($e["Bopomofo Extended"](I)||$e.Bopomofo(I)||$e["CJK Compatibility Forms"](I)||$e["CJK Compatibility Ideographs"](I)||$e["CJK Compatibility"](I)||$e["CJK Radicals Supplement"](I)||$e["CJK Strokes"](I)||$e["CJK Symbols and Punctuation"](I)||$e["CJK Unified Ideographs Extension A"](I)||$e["CJK Unified Ideographs"](I)||$e["Enclosed CJK Letters and Months"](I)||$e["Halfwidth and Fullwidth Forms"](I)||$e.Hiragana(I)||$e["Ideographic Description Characters"](I)||$e["Kangxi Radicals"](I)||$e["Katakana Phonetic Extensions"](I)||$e.Katakana(I)||$e["Vertical Forms"](I)||$e["Yi Radicals"](I)||$e["Yi Syllables"](I)));(Pa[ne]||le||W.imageName)&&C.push(ys(K+1,q,D,C,gu(ne,e.getCharCode(K+1),le&&O),!1))}}return function ye(fe){return fe?ye(fe.priorBreak).concat(fe.index):[]}(ys(e.length(),q,D,C,0,!0))}function Dd(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Rp(e,t,i,l,p){if(l||p)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*l,I=t;I<=i;I++)e[I].x-=v,e[I].y+=p}function m_(e,t,i,l,p,d){var v,I=e.image;if(I.content){var C=I.content,D=I.pixelRatio||1;v=[C[0]/D,C[1]/D,I.displaySize[0]-C[2]/D,I.displaySize[1]-C[3]/D]}var O,q,K,W,ne=t.left*d,le=t.right*d;i==="width"||i==="both"?(W=p[0]+ne-l[3],q=p[0]+le+l[1]):q=(W=p[0]+(ne+le-I.displaySize[0])/2)+I.displaySize[0];var ye=t.top*d,fe=t.bottom*d;return i==="height"||i==="both"?(O=p[1]+ye-l[0],K=p[1]+fe+l[2]):K=(O=p[1]+(ye+fe-I.displaySize[1])/2)+I.displaySize[1],{image:I,top:O,right:q,bottom:K,left:W,collisionPadding:v}}Pa[10]=!0,Pa[32]=!0,Pa[38]=!0,Pa[40]=!0,Pa[41]=!0,Pa[43]=!0,Pa[45]=!0,Pa[47]=!0,Pa[173]=!0,Pa[183]=!0,Pa[8203]=!0,Pa[8208]=!0,Pa[8211]=!0,Pa[8231]=!0;var fh=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(V);function fc(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new tr(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<l.length&&l[v]<e+1;)v++;v=Math.min(l.length-1,v);var I=l[d],C=l[v];return i.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:C,interpolationType:p}:{kind:"camera",minZoom:I,maxZoom:C,minSize:i.evaluate(new tr(I)),maxSize:i.evaluate(new tr(C)),interpolationType:p}}function dh(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?Bi(p/128,i.upperSize/128,t.uSizeT):l}function Cy(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?we(ii.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=Bi(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}ot("Anchor",fh);var Bp=Object.freeze({__proto__:null,getSizeData:fc,evaluateSizeForFeature:dh,evaluateSizeForZoom:Cy,SIZE_PACK_FACTOR:128});function Pf(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,v=t.segment+1,I=0;I>-i/2;){if(--v<0)return!1;I-=e[v].dist(d),d=e[v]}I+=e[v].dist(e[v+1]),v++;for(var C=[],D=0;I<i/2;){var O=e[v],q=e[v+1];if(!q)return!1;var K=e[v-1].angleTo(O)-O.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:I,angleDelta:K}),D+=K;I-C[0].distance>l;)D-=C.shift().angleDelta;if(D>p)return!1;v++,I+=O.dist(q)}return!0}function Dy(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function My(e,t,i){return e?.6*t*i:0}function dc(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Eg(e,t,i,l,p,d){for(var v=My(i,p,d),I=dc(i,l)*d,C=0,D=Dy(e)/2,O=0;O<e.length-1;O++){var q=e[O],K=e[O+1],W=q.dist(K);if(C+W>D){var ne=(D-C)/W,le=Bi(q.x,K.x,ne),ye=Bi(q.y,K.y,ne),fe=new fh(le,ye,K.angleTo(q),O);return fe._round(),!v||Pf(e,fe,I,v,t)?fe:void 0}C+=W}}function _u(e,t,i,l,p,d,v,I,C){var D=My(l,d,v),O=dc(l,p),q=O*v,K=e[0].x===0||e[0].x===C||e[0].y===0||e[0].y===C;return t-q<t/4&&(t=q+t/4),function W(ne,le,ye,fe,Ee,Ae,Ce,De,Fe){for(var Ke=Ae/2,Ye=Dy(ne),_t=0,it=le-ye,bt=[],lt=0;lt<ne.length-1;lt++){for(var Dt=ne[lt],wt=ne[lt+1],ut=Dt.dist(wt),Kt=wt.angleTo(Dt);it+ye<_t+ut;){var Ht=((it+=ye)-_t)/ut,ir=Bi(Dt.x,wt.x,Ht),St=Bi(Dt.y,wt.y,Ht);if(ir>=0&&ir<Fe&&St>=0&&St<Fe&&it-Ke>=0&&it+Ke<=Ye){var gr=new fh(ir,St,Kt,lt);gr._round(),fe&&!Pf(ne,gr,Ae,fe,Ee)||bt.push(gr)}}_t+=ut}return De||bt.length||Ce||(bt=W(ne,_t/2,ye,fe,Ee,Ae,Ce,!0,Fe)),bt}(e,K?t/2*I%t:(O/2+2*d)*v*I%t,t,D,i,q,K,!1,C)}function vs(e,t,i,l,p){for(var d=[],v=0;v<e.length;v++)for(var I=e[v],C=void 0,D=0;D<I.length-1;D++){var O=I[D],q=I[D+1];O.x<t&&q.x<t||(O.x<t?O=new V(t,O.y+(t-O.x)/(q.x-O.x)*(q.y-O.y))._round():q.x<t&&(q=new V(t,O.y+(t-O.x)/(q.x-O.x)*(q.y-O.y))._round()),O.y<i&&q.y<i||(O.y<i?O=new V(O.x+(i-O.y)/(q.y-O.y)*(q.x-O.x),i)._round():q.y<i&&(q=new V(O.x+(i-O.y)/(q.y-O.y)*(q.x-O.x),i)._round()),O.x>=l&&q.x>=l||(O.x>=l?O=new V(l,O.y+(l-O.x)/(q.x-O.x)*(q.y-O.y))._round():q.x>=l&&(q=new V(l,O.y+(l-O.x)/(q.x-O.x)*(q.y-O.y))._round()),O.y>=p&&q.y>=p||(O.y>=p?O=new V(O.x+(p-O.y)/(q.y-O.y)*(q.x-O.x),p)._round():q.y>=p&&(q=new V(O.x+(p-O.y)/(q.y-O.y)*(q.x-O.x),p)._round()),C&&O.equals(C[C.length-1])||d.push(C=[O]),C.push(q)))))}return d}function bu(e,t,i,l){var p=[],d=e.image,v=d.pixelRatio,I=d.paddedRect.w-2,C=d.paddedRect.h-2,D=e.right-e.left,O=e.bottom-e.top,q=d.stretchX||[[0,I]],K=d.stretchY||[[0,C]],W=function(ir,St){return ir+St[1]-St[0]},ne=q.reduce(W,0),le=K.reduce(W,0),ye=I-ne,fe=C-le,Ee=0,Ae=ne,Ce=0,De=le,Fe=0,Ke=ye,Ye=0,_t=fe;if(d.content&&l){var it=d.content;Ee=Cf(q,0,it[0]),Ce=Cf(K,0,it[1]),Ae=Cf(q,it[0],it[2]),De=Cf(K,it[1],it[3]),Fe=it[0]-Ee,Ye=it[1]-Ce,Ke=it[2]-it[0]-Ae,_t=it[3]-it[1]-De}var bt=function(ir,St,gr,Or){var Yr=Ly(ir.stretch-Ee,Ae,D,e.left),yi=Df(ir.fixed-Fe,Ke,ir.stretch,ne),Vr=Ly(St.stretch-Ce,De,O,e.top),oi=Df(St.fixed-Ye,_t,St.stretch,le),tn=Ly(gr.stretch-Ee,Ae,D,e.left),rn=Df(gr.fixed-Fe,Ke,gr.stretch,ne),Xi=Ly(Or.stretch-Ce,De,O,e.top),mn=Df(Or.fixed-Ye,_t,Or.stretch,le),Di=new V(Yr,Vr),Mr=new V(tn,Vr),vi=new V(tn,Xi),ar=new V(Yr,Xi),Sr=new V(yi/v,oi/v),Fr=new V(rn/v,mn/v),cr=t*Math.PI/180;if(cr){var yn=Math.sin(cr),Wi=Math.cos(cr),Jr=[Wi,-yn,yn,Wi];Di._matMult(Jr),Mr._matMult(Jr),ar._matMult(Jr),vi._matMult(Jr)}var si=ir.stretch+ir.fixed,vn=St.stretch+St.fixed;return{tl:Di,tr:Mr,bl:ar,br:vi,tex:{x:d.paddedRect.x+1+si,y:d.paddedRect.y+1+vn,w:gr.stretch+gr.fixed-si,h:Or.stretch+Or.fixed-vn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Sr,pixelOffsetBR:Fr,minFontScaleX:Ke/v/D,minFontScaleY:_t/v/O,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var lt=mh(q,ye,ne),Dt=mh(K,fe,le),wt=0;wt<lt.length-1;wt++)for(var ut=lt[wt],Kt=lt[wt+1],Ht=0;Ht<Dt.length-1;Ht++)p.push(bt(ut,Dt[Ht],Kt,Dt[Ht+1]));else p.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:C+1}));return p}function Cf(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var v=d[p];l+=Math.max(t,Math.min(i,v[1]))-Math.max(t,Math.min(i,v[0]))}return l}function mh(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var v=d[p],I=v[0],C=v[1],D=l[l.length-1];l.push({fixed:I-D.stretch,stretch:D.stretch}),l.push({fixed:I-D.stretch,stretch:D.stretch+(C-I)})}return l.push({fixed:t+1,stretch:i}),l}function Ly(e,t,i,l){return e/t*i+l}function Df(e,t,i,l){return e-t*i/l}var xu=function(e,t,i,l,p,d,v,I,C,D){if(this.boxStartIndex=e.length,C){var O=d.top,q=d.bottom,K=d.collisionPadding;K&&(O-=K[1],q+=K[3]);var W=q-O;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{var ne=d.top*v-I,le=d.bottom*v+I,ye=d.left*v-I,fe=d.right*v+I,Ee=d.collisionPadding;if(Ee&&(ye-=Ee[0]*v,ne-=Ee[1]*v,fe+=Ee[2]*v,le+=Ee[3]*v),D){var Ae=new V(ye,ne),Ce=new V(fe,ne),De=new V(ye,le),Fe=new V(fe,le),Ke=D*Math.PI/180;Ae._rotate(Ke),Ce._rotate(Ke),De._rotate(Ke),Fe._rotate(Ke),ye=Math.min(Ae.x,Ce.x,De.x,Fe.x),fe=Math.max(Ae.x,Ce.x,De.x,Fe.x),ne=Math.min(Ae.y,Ce.y,De.y,Fe.y),le=Math.max(Ae.y,Ce.y,De.y,Fe.y)}e.emplaceBack(t.x,t.y,ye,ne,fe,le,i,l,p)}this.boxEndIndex=e.length},Gs=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Sg),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Sg(e,t){return e<t?-1:e>t?1:0}function Op(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,v=-1/0,I=e[0],C=0;C<I.length;C++){var D=I[C];(!C||D.x<l)&&(l=D.x),(!C||D.y<p)&&(p=D.y),(!C||D.x>d)&&(d=D.x),(!C||D.y>v)&&(v=D.y)}var O=Math.min(d-l,v-p),q=O/2,K=new Gs([],Md);if(O===0)return new V(l,p);for(var W=l;W<d;W+=O)for(var ne=p;ne<v;ne+=O)K.push(new yh(W+q,ne+q,q,e));for(var le=function(Ee){for(var Ae=0,Ce=0,De=0,Fe=Ee[0],Ke=0,Ye=Fe.length,_t=Ye-1;Ke<Ye;_t=Ke++){var it=Fe[Ke],bt=Fe[_t],lt=it.x*bt.y-bt.x*it.y;Ce+=(it.x+bt.x)*lt,De+=(it.y+bt.y)*lt,Ae+=3*lt}return new yh(Ce/Ae,De/Ae,0,Ee)}(e),ye=K.length;K.length;){var fe=K.pop();(fe.d>le.d||!le.d)&&(le=fe,i&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,ye)),fe.max-le.d<=t||(K.push(new yh(fe.p.x-(q=fe.h/2),fe.p.y-q,q,e)),K.push(new yh(fe.p.x+q,fe.p.y-q,q,e)),K.push(new yh(fe.p.x-q,fe.p.y+q,q,e)),K.push(new yh(fe.p.x+q,fe.p.y+q,q,e)),ye+=4)}return i&&(console.log("num probes: "+ye),console.log("best distance: "+le.d)),le.p}function Md(e,t){return t.max-e.max}function yh(e,t,i,l){this.p=new V(e,t),this.h=i,this.d=function(p,d){for(var v=!1,I=1/0,C=0;C<d.length;C++)for(var D=d[C],O=0,q=D.length,K=q-1;O<q;K=O++){var W=D[O],ne=D[K];W.y>p.y!=ne.y>p.y&&p.x<(ne.x-W.x)*(p.y-W.y)/(ne.y-W.y)+W.x&&(v=!v),I=Math.min(I,Lo(p,W,ne))}return(v?1:-1)*Math.sqrt(I)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}Gs.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Gs.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Gs.prototype.peek=function(){return this.data[0]},Gs.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},Gs.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),v=t[d],I=d+1;if(I<this.length&&i(t[I],v)<0&&(d=I,v=t[I]),i(v,p)>=0)break;t[e]=v,e=d}t[e]=p};var Ld=Number.POSITIVE_INFINITY;function mc(e,t){return t[1]!==Ld?function(i,l,p){var d=0,v=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":v=p-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,v]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var v=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-v;break;case"top-left":case"bottom-left":p=v;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function Rd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Vl(e,t,i,l,p,d,v,I,C,D,O,q,K,W,ne){var le=function(Ce,De,Fe,Ke,Ye,_t,it,bt){for(var lt=Ke.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,Dt=[],wt=0,ut=De.positionedLines;wt<ut.length;wt+=1)for(var Kt=ut[wt],Ht=0,ir=Kt.positionedGlyphs;Ht<ir.length;Ht+=1){var St=ir[Ht];if(St.rect){var gr=St.rect||{},Or=4,Yr=!0,yi=1,Vr=0,oi=(Ye||bt)&&St.vertical,tn=St.metrics.advance*St.scale/2;if(bt&&De.verticalizable&&(Vr=Kt.lineOffset/2-(St.imageName?-(24-St.metrics.width*St.scale)/2:24*(St.scale-1))),St.imageName){var rn=it[St.imageName];Yr=rn.sdf,Or=1/(yi=rn.pixelRatio)}var Xi=Ye?[St.x+tn,St.y]:[0,0],mn=Ye?[0,0]:[St.x+tn+Fe[0],St.y+Fe[1]-Vr],Di=[0,0];oi&&(Di=mn,mn=[0,0]);var Mr=(St.metrics.left-Or)*St.scale-tn+mn[0],vi=(-St.metrics.top-Or)*St.scale+mn[1],ar=Mr+gr.w*St.scale/yi,Sr=vi+gr.h*St.scale/yi,Fr=new V(Mr,vi),cr=new V(ar,vi),yn=new V(Mr,Sr),Wi=new V(ar,Sr);if(oi){var Jr=new V(-tn,tn- -17),si=-Math.PI/2,vn=12-tn,_r=new V(22-vn,-(St.imageName?vn:0)),Ys=new(Function.prototype.bind.apply(V,[null].concat(Di)));Fr._rotateAround(si,Jr)._add(_r)._add(Ys),cr._rotateAround(si,Jr)._add(_r)._add(Ys),yn._rotateAround(si,Jr)._add(_r)._add(Ys),Wi._rotateAround(si,Jr)._add(_r)._add(Ys)}if(lt){var Vn=Math.sin(lt),Js=Math.cos(lt),gi=[Js,-Vn,Vn,Js];Fr._matMult(gi),cr._matMult(gi),yn._matMult(gi),Wi._matMult(gi)}var ql=new V(0,0),Oo=new V(0,0);Dt.push({tl:Fr,tr:cr,bl:yn,br:Wi,tex:gr,writingMode:De.writingMode,glyphOffset:Xi,sectionIndex:St.sectionIndex,isSDF:Yr,pixelOffsetTL:ql,pixelOffsetBR:Oo,minFontScaleX:0,minFontScaleY:0})}}return Dt}(0,i,I,p,d,v,l,e.allowVerticalPlacement),ye=e.textSizeData,fe=null;ye.kind==="source"?(fe=[128*p.layout.get("text-size").evaluate(v,{})])[0]>32640&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ye.kind==="composite"&&((fe=[128*W.compositeTextSizes[0].evaluate(v,{},ne),128*W.compositeTextSizes[1].evaluate(v,{},ne)])[0]>32640||fe[1]>32640)&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,le,fe,I,d,v,D,t,C.lineStartIndex,C.lineLength,K,ne);for(var Ee=0,Ae=O;Ee<Ae.length;Ee+=1)q[Ae[Ee]]=e.text.placedSymbolArray.length-1;return 4*le.length}function gs(e){for(var t in e)return e[t];return null}function yc(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],v=d.length-1;v>=0;v--)if(l.dist(d[v])<i)return!0}else p[t]=[];return p[t].push(l),!1}var kg=sh.VectorTileFeature.types,Vp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ry(e,t,i,l,p,d,v,I,C,D,O,q,K){var W=I?Math.min(32640,Math.round(I[0])):0,ne=I?Math.min(32640,Math.round(I[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,v,(W<<1)+(C?1:0),ne,16*D,16*O,256*q,256*K)}function Bd(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Fp(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Yc(i[t].text))return!0;return!1}var Ks=function(e){this.layoutVertexArray=new Jc,this.indexArray=new Fa,this.programConfigurations=e,this.segments=new Q,this.dynamicLayoutVertexArray=new Po,this.opacityVertexArray=new pp,this.placedSymbolArray=new c};Ks.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ks.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ap.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,zp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Vp,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},Ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ot("SymbolBuffers",Ks);var Np=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new Q,this.collisionVertexArray=new dp};Np.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,vg.members,!0)},Np.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ot("CollisionBuffers",Np);var xr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fn([]),this.placementViewportMatrix=fn([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fc(this.zoom,t["text-size"]),this.iconSizeData=fc(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Za[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};xr.prototype.createArrays=function(){this.text=new Ks(new zt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Ks(new zt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new k,this.lineVertexArray=new A,this.symbolInstances=new E},xr.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var v=Pp[e.charAt(d)];v&&(t[v.charCodeAt(0)]=!0)}},xr.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),v=p.get("text-field"),I=p.get("icon-image"),C=(v.value.kind!=="constant"||v.value.value instanceof wi&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),D=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,O=p.get("symbol-sort-key");if(this.features=[],C||D){for(var q=t.iconDependencies,K=t.glyphDependencies,W=t.availableImages,ne=new tr(this.zoom),le=0,ye=e;le<ye.length;le+=1){var fe=ye[le],Ee=fe.feature,Ae=fe.id,Ce=fe.index,De=fe.sourceLayerIndex,Fe=l._featureFilter.needGeometry,Ke=zi(Ee,Fe);if(l._featureFilter.filter(ne,Ke,i)){Fe||(Ke.geometry=fi(Ee));var Ye=void 0;if(C){var _t=l.getValueAndResolveTokens("text-field",Ke,i,W),it=wi.factory(_t);Fp(it)&&(this.hasRTLText=!0),(!this.hasRTLText||up()==="unavailable"||this.hasRTLText&&Mn.isParsed())&&(Ye=gg(it,l,Ke))}var bt=void 0;if(D){var lt=l.getValueAndResolveTokens("icon-image",Ke,i,W);bt=lt instanceof Ji?lt:Ji.fromString(lt)}if(Ye||bt){var Dt=this.sortFeaturesByKey?O.evaluate(Ke,{},i):void 0;if(this.features.push({id:Ae,text:Ye,icon:bt,index:Ce,sourceLayerIndex:De,geometry:Ke.geometry,properties:Ee.properties,type:kg[Ee.type],sortKey:Dt}),bt&&(q[bt.name]=!0),Ye){var wt=d.evaluate(Ke,{},i).join(","),ut=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Za.vertical)>=0;for(var Kt=0,Ht=Ye.sections;Kt<Ht.length;Kt+=1){var ir=Ht[Kt];if(ir.image)q[ir.image.name]=!0;else{var St=El(Ye.toString()),gr=ir.fontStack||wt,Or=K[gr]=K[gr]||{};this.calculateGlyphDependencies(ir.text,Or,ut,this.allowVerticalPlacement,St)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(Yr){var yi={},Vr={},oi=[],tn=0;function rn(Jr){oi.push(Yr[Jr]),tn++}function Xi(Jr,si,vn){var _r=Vr[Jr];return delete Vr[Jr],Vr[si]=_r,oi[_r].geometry[0].pop(),oi[_r].geometry[0]=oi[_r].geometry[0].concat(vn[0]),_r}function mn(Jr,si,vn){var _r=yi[si];return delete yi[si],yi[Jr]=_r,oi[_r].geometry[0].shift(),oi[_r].geometry[0]=vn[0].concat(oi[_r].geometry[0]),_r}function Di(Jr,si,vn){var _r=vn?si[0][si[0].length-1]:si[0][0];return Jr+":"+_r.x+":"+_r.y}for(var Mr=0;Mr<Yr.length;Mr++){var vi=Yr[Mr],ar=vi.geometry,Sr=vi.text?vi.text.toString():null;if(Sr){var Fr=Di(Sr,ar),cr=Di(Sr,ar,!0);if(Fr in Vr&&cr in yi&&Vr[Fr]!==yi[cr]){var yn=mn(Fr,cr,ar),Wi=Xi(Fr,cr,oi[yn].geometry);delete yi[Fr],delete Vr[cr],Vr[Di(Sr,oi[Wi].geometry,!0)]=Wi,oi[yn].geometry=null}else Fr in Vr?Xi(Fr,cr,ar):cr in yi?mn(Fr,cr,ar):(rn(Mr),yi[Fr]=tn-1,Vr[cr]=tn-1)}else rn(Mr)}return oi.filter(function(Jr){return Jr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Yr,yi){return Yr.sortKey-yi.sortKey})}},xr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},xr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},xr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},xr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},xr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},xr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},xr.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},v=e.segment+1;v<t.length;v++)d[v]={x:t[v].x,y:t[v].y,tileUnitDistanceFromAnchor:l},v<t.length-1&&(l+=t[v+1].dist(t[v]));for(var I=e.segment||0;I>=0;I--)d[I]={x:t[I].x,y:t[I].y,tileUnitDistanceFromAnchor:p},I>0&&(p+=t[I-1].dist(t[I]));for(var C=0;C<t.length;C++){var D=d[C];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},xr.prototype.addSymbols=function(e,t,i,l,p,d,v,I,C,D,O,q){for(var K=e.indexArray,W=e.layoutVertexArray,ne=e.segments.prepareSegment(4*t.length,W,K,this.canOverlap?d.sortKey:void 0),le=this.glyphOffsetArray.length,ye=ne.vertexLength,fe=this.allowVerticalPlacement&&v===Za.vertical?Math.PI/2:0,Ee=d.text&&d.text.sections,Ae=0;Ae<t.length;Ae++){var Ce=t[Ae],De=Ce.tl,Fe=Ce.tr,Ke=Ce.bl,Ye=Ce.br,_t=Ce.tex,it=Ce.pixelOffsetTL,bt=Ce.pixelOffsetBR,lt=Ce.minFontScaleX,Dt=Ce.minFontScaleY,wt=Ce.glyphOffset,ut=Ce.isSDF,Kt=Ce.sectionIndex,Ht=ne.vertexLength,ir=wt[1];Ry(W,I.x,I.y,De.x,ir+De.y,_t.x,_t.y,i,ut,it.x,it.y,lt,Dt),Ry(W,I.x,I.y,Fe.x,ir+Fe.y,_t.x+_t.w,_t.y,i,ut,bt.x,it.y,lt,Dt),Ry(W,I.x,I.y,Ke.x,ir+Ke.y,_t.x,_t.y+_t.h,i,ut,it.x,bt.y,lt,Dt),Ry(W,I.x,I.y,Ye.x,ir+Ye.y,_t.x+_t.w,_t.y+_t.h,i,ut,bt.x,bt.y,lt,Dt),Bd(e.dynamicLayoutVertexArray,I,fe),K.emplaceBack(Ht,Ht+1,Ht+2),K.emplaceBack(Ht+1,Ht+2,Ht+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),Ae!==t.length-1&&Kt===t[Ae+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,d,d.index,{},q,Ee&&Ee[Kt])}e.placedSymbolArray.emplaceBack(I.x,I.y,le,this.glyphOffsetArray.length-le,ye,C,D,I.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],v,0,!1,0,O)},xr.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},xr.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,v){var I=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),C=I.vertexLength,D=p.layoutVertexArray,O=p.collisionVertexArray,q=v.anchorX,K=v.anchorY;this._addCollisionDebugVertex(D,O,d,q,K,new V(e,t)),this._addCollisionDebugVertex(D,O,d,q,K,new V(i,t)),this._addCollisionDebugVertex(D,O,d,q,K,new V(i,l)),this._addCollisionDebugVertex(D,O,d,q,K,new V(e,l)),I.vertexLength+=4;var W=p.indexArray;W.emplaceBack(C,C+1),W.emplaceBack(C+1,C+2),W.emplaceBack(C+2,C+3),W.emplaceBack(C+3,C),I.primitiveLength+=4},xr.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},xr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Np(Co,ch.members,Na),this.iconCollisionBox=new Np(Co,ch.members,Na);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},xr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,v,I,C){for(var D={},O=t;O<i;O++){var q=e.get(O);D.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},D.textFeatureIndex=q.featureIndex;break}for(var K=l;K<p;K++){var W=e.get(K);D.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},D.verticalTextFeatureIndex=W.featureIndex;break}for(var ne=d;ne<v;ne++){var le=e.get(ne);D.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},D.iconFeatureIndex=le.featureIndex;break}for(var ye=I;ye<C;ye++){var fe=e.get(ye);D.verticalIconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},D.verticalIconFeatureIndex=fe.featureIndex;break}return D},xr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},xr.prototype.hasTextData=function(){return this.text.segments.get().length>0},xr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},xr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},xr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},xr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},xr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},xr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var I=this.symbolInstances.get(v);l.push(0|Math.round(t*I.anchorX+i*I.anchorY)),p.push(I.featureIndex)}return d.sort(function(C,D){return l[C]-l[D]||p[D]-p[C]}),d},xr.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},xr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,v,I){d>=0&&I.indexOf(d)===v&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ot("SymbolBucket",xr,{omit:["layers","collisionBoxArray","features","compareText"]}),xr.MAX_GLYPHS=65535,xr.addDynamicAttributes=Bd;var Od=new Ai({"symbol-placement":new gt(H.layout_symbol["symbol-placement"]),"symbol-spacing":new gt(H.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gt(H.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ct(H.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gt(H.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gt(H.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new gt(H.layout_symbol["icon-ignore-placement"]),"icon-optional":new gt(H.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gt(H.layout_symbol["icon-rotation-alignment"]),"icon-size":new ct(H.layout_symbol["icon-size"]),"icon-text-fit":new gt(H.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gt(H.layout_symbol["icon-text-fit-padding"]),"icon-image":new ct(H.layout_symbol["icon-image"]),"icon-rotate":new ct(H.layout_symbol["icon-rotate"]),"icon-padding":new gt(H.layout_symbol["icon-padding"]),"icon-keep-upright":new gt(H.layout_symbol["icon-keep-upright"]),"icon-offset":new ct(H.layout_symbol["icon-offset"]),"icon-anchor":new ct(H.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gt(H.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gt(H.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gt(H.layout_symbol["text-rotation-alignment"]),"text-field":new ct(H.layout_symbol["text-field"]),"text-font":new ct(H.layout_symbol["text-font"]),"text-size":new ct(H.layout_symbol["text-size"]),"text-max-width":new ct(H.layout_symbol["text-max-width"]),"text-line-height":new gt(H.layout_symbol["text-line-height"]),"text-letter-spacing":new ct(H.layout_symbol["text-letter-spacing"]),"text-justify":new ct(H.layout_symbol["text-justify"]),"text-radial-offset":new ct(H.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gt(H.layout_symbol["text-variable-anchor"]),"text-anchor":new ct(H.layout_symbol["text-anchor"]),"text-max-angle":new gt(H.layout_symbol["text-max-angle"]),"text-writing-mode":new gt(H.layout_symbol["text-writing-mode"]),"text-rotate":new ct(H.layout_symbol["text-rotate"]),"text-padding":new gt(H.layout_symbol["text-padding"]),"text-keep-upright":new gt(H.layout_symbol["text-keep-upright"]),"text-transform":new ct(H.layout_symbol["text-transform"]),"text-offset":new ct(H.layout_symbol["text-offset"]),"text-allow-overlap":new gt(H.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new gt(H.layout_symbol["text-ignore-placement"]),"text-optional":new gt(H.layout_symbol["text-optional"])}),Vd={paint:new Ai({"icon-opacity":new ct(H.paint_symbol["icon-opacity"]),"icon-color":new ct(H.paint_symbol["icon-color"]),"icon-halo-color":new ct(H.paint_symbol["icon-halo-color"]),"icon-halo-width":new ct(H.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ct(H.paint_symbol["icon-halo-blur"]),"icon-translate":new gt(H.paint_symbol["icon-translate"]),"icon-translate-anchor":new gt(H.paint_symbol["icon-translate-anchor"]),"text-opacity":new ct(H.paint_symbol["text-opacity"]),"text-color":new ct(H.paint_symbol["text-color"],{runtimeType:Qe,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ct(H.paint_symbol["text-halo-color"]),"text-halo-width":new ct(H.paint_symbol["text-halo-width"]),"text-halo-blur":new ct(H.paint_symbol["text-halo-blur"]),"text-translate":new gt(H.paint_symbol["text-translate"]),"text-translate-anchor":new gt(H.paint_symbol["text-translate-anchor"])}),layout:Od},vh=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:at,this.defaultValue=e};vh.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},vh.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},vh.prototype.outputDefined=function(){return!1},vh.prototype.serialize=function(){return null},ot("FormatSectionOverride",vh,{omit:["defaultValue"]});var gh=function(e){function t(i){e.call(this,i,Vd)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],v=0,I=p;v<I.length;v+=1){var C=I[v];d.indexOf(C)<0&&d.push(C)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var v=this.layout.get(i).evaluate(l,{},p,d),I=this._unevaluatedLayout._values[i];return I.isDataDriven()||os(I.value)||!v?v:function(C,D){return D.replace(/{([^{}]+)}/g,function(O,q){return q in C?String(C[q]):""})}(l.properties,v)},t.prototype.createBucket=function(i){return new xr(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=Vd.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,v=this.paint.get(p),I=new vh(v),C=new iu(I,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new Yu("source",C):new ko("composite",C,v.value.zoomStops,v.value._interpolationType),this.paint._values[p]=new Wn(v.property,d,v.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=Vd.paint.properties[l],v=!1,I=function(O){for(var q=0,K=O;q<K.length;q+=1)if(d.overrides&&d.overrides.hasOverride(K[q]))return void(v=!0)};if(p.value.kind==="constant"&&p.value.value instanceof wi)I(p.value.value.sections);else if(p.value.kind==="source"){var C=function(O){v||(O instanceof qi&&yr(O.value)===sr?I(O.value.sections):O instanceof En?I(O.sections):O.eachChild(C))},D=p.value;D._styleExpression&&C(D._styleExpression.expression)}return v},t}(Tn),Ig={paint:new Ai({"background-color":new gt(H.paint_background["background-color"]),"background-pattern":new Yn(H.paint_background["background-pattern"]),"background-opacity":new gt(H.paint_background["background-opacity"])})},Hs=function(e){function t(i){e.call(this,i,Ig)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Tn),Xs={paint:new Ai({"raster-opacity":new gt(H.paint_raster["raster-opacity"]),"raster-hue-rotate":new gt(H.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gt(H.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gt(H.paint_raster["raster-brightness-max"]),"raster-saturation":new gt(H.paint_raster["raster-saturation"]),"raster-contrast":new gt(H.paint_raster["raster-contrast"]),"raster-resampling":new gt(H.paint_raster["raster-resampling"]),"raster-fade-duration":new gt(H.paint_raster["raster-fade-duration"])})},vc=function(e){function t(i){e.call(this,i,Xs)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Tn),Tg=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(Tn),Up={circle:ac,heatmap:Ns,hillshade:tg,fill:ug,"fill-extrusion":Tp,line:yg,symbol:gh,background:Hs,raster:vc},y_=U.HTMLImageElement,By=U.HTMLCanvasElement,_h=U.HTMLVideoElement,bh=U.ImageData,Mf=U.ImageBitmap,_s=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};_s.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),v=this.context,I=v.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof y_||e instanceof By||e instanceof _h||e instanceof bh||Mf&&e instanceof Mf?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,e):I.texImage2D(I.TEXTURE_2D,0,this.format,l,p,0,this.format,I.UNSIGNED_BYTE,e.data);else{var C=i||{x:0,y:0},D=C.x,O=C.y;e instanceof y_||e instanceof By||e instanceof _h||e instanceof bh||Mf&&e instanceof Mf?I.texSubImage2D(I.TEXTURE_2D,0,D,O,I.RGBA,I.UNSIGNED_BYTE,e):I.texSubImage2D(I.TEXTURE_2D,0,D,O,l,p,I.RGBA,I.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)},_s.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},_s.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},_s.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var qp=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};qp.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},qp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var xh=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Tr(["receive","process"],this),this.invoker=new qp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ur()?e:U};function Oy(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}xh.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var I=kr(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:io(t,I)},I),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},xh.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else ur()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},xh.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},xh.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(kn(t.error)):l(null,kn(t.data)))}else{var p=!1,d=kr(this.globalScope)?void 0:[],v=t.hasCallback?function(O,q){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:O?io(O):null,data:io(q,d)},d)}:function(O){p=!0},I=null,C=kn(t.data);if(this.parent[t.type])I=this.parent[t.type](t.sourceMapId,C,v);else if(this.parent.getWorkerSource){var D=t.type.split(".");I=this.parent.getWorkerSource(t.sourceMapId,D[0],C.source)[D[1]](C,v)}else v(new Error("Could not find function "+t.type));!p&&I&&I.cancel&&(this.cancelCallbacks[e]=I.cancel)}},xh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ai=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};ai.prototype.setNorthEast=function(e){return this._ne=e instanceof ei?new ei(e.lng,e.lat):ei.convert(e),this},ai.prototype.setSouthWest=function(e){return this._sw=e instanceof ei?new ei(e.lng,e.lat):ei.convert(e),this},ai.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof ei)t=e,i=e;else{if(!(e instanceof ai))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(ai.convert(e)):this.extend(ei.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new ei(t.lng,t.lat),this._ne=new ei(i.lng,i.lat)),this},ai.prototype.getCenter=function(){return new ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ai.prototype.getSouthWest=function(){return this._sw},ai.prototype.getNorthEast=function(){return this._ne},ai.prototype.getNorthWest=function(){return new ei(this.getWest(),this.getNorth())},ai.prototype.getSouthEast=function(){return new ei(this.getEast(),this.getSouth())},ai.prototype.getWest=function(){return this._sw.lng},ai.prototype.getSouth=function(){return this._sw.lat},ai.prototype.getEast=function(){return this._ne.lng},ai.prototype.getNorth=function(){return this._ne.lat},ai.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ai.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ai.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ai.prototype.contains=function(e){var t=ei.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},ai.convert=function(e){return!e||e instanceof ai?e:new ai(e)};var ei=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ei.prototype.wrap=function(){return new ei(Oe(this.lng,-180,180),this.lat)},ei.prototype.toArray=function(){return[this.lng,this.lat]},ei.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ei.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},ei.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new ai(new ei(this.lng-i,this.lat-t),new ei(this.lng+i,this.lat+t))},ei.convert=function(e){if(e instanceof ei)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new ei(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new ei(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Vy=2*Math.PI*63710088e-1;function Fy(e){return Vy*Math.cos(e*Math.PI/180)}function Fl(e){return(180+e)/360}function bs(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function wu(e,t){return e/Fy(t)}function Fd(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var xs=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};xs.fromLngLat=function(e,t){t===void 0&&(t=0);var i=ei.convert(e);return new xs(Fl(i.lng),bs(i.lat),wu(t,i.lat))},xs.prototype.toLngLat=function(){return new ei(360*this.x-180,Fd(this.y))},xs.prototype.toAltitude=function(){return this.z*Fy(Fd(this.y))},xs.prototype.meterInMercatorCoordinateUnits=function(){return 1/Vy*(e=Fd(this.y),1/Math.cos(e*Math.PI/180));var e};var jp=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Nl(0,e,e,t,i)};jp.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},jp.prototype.url=function(e,t){var i,l,p,d,v,I=(l=this.y,p=this.z,d=Oy(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),v=Oy(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+v[0]+","+v[1]),C=function(D,O,q){for(var K,W="",ne=D;ne>0;ne--)W+=(O&(K=1<<ne-1)?1:0)+(q&K?2:0);return W}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",I)},jp.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new V(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},jp.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ny=function(e,t){this.wrap=e,this.canonical=t,this.key=Nl(e,t.z,t.z,t.x,t.y)},di=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new jp(i,+l,+p),this.key=Nl(t,e,i,l,p)};function Nl(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}di.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},di.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new di(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new di(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},di.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?Nl(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Nl(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},di.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},di.prototype.children=function(e){if(this.overscaledZ>=e)return[new di(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new di(t,this.wrap,t,i,l),new di(t,this.wrap,t,i+1,l),new di(t,this.wrap,t,i,l+1),new di(t,this.wrap,t,i+1,l+1)]},di.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},di.prototype.wrapped=function(){return new di(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},di.prototype.unwrapTo=function(e){return new di(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},di.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},di.prototype.toUnwrapped=function(){return new Ny(this.wrap,this.canonical)},di.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},di.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new xs(e.x-this.wrap,e.y))},ot("CanonicalTileID",jp),ot("OverscaledTileID",di,{omit:["posMatrix"]});var Ul=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Ot('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};Ul.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},Ul.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ul.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Ul.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Ul.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Ul.prototype.getPixels=function(){return new dn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ul.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var I=-t*this.dim,C=-i*this.dim,D=d;D<v;D++)for(var O=l;O<p;O++)this.data[this._idx(O,D)]=e.data[this._idx(O+I,D+C)]},ot("DEMData",Ul);var Eu=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Eu.prototype.encode=function(e){return this._stringToNumber[e]},Eu.prototype.decode=function(e){return this._numberToString[e]};var wh=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Nd={geometry:{configurable:!0}};Nd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Nd.geometry.set=function(e){this._geometry=e},wh.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(wh.prototype,Nd);var Eh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Eh.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},Ue(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][v]===null&&delete this.deletedStates[e][l][v]},Eh.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},Eh.prototype.getState=function(e,t){var i=String(t),l=Ue({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},Eh.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Eh.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),Ue(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var I={};if(this.deletedStates[v]===null)for(var C in this.state[v])I[C]={},this.state[v][C]={};else for(var D in this.deletedStates[v]){if(this.deletedStates[v][D]===null)this.state[v][D]={};else for(var O=0,q=Object.keys(this.deletedStates[v][D]);O<q.length;O+=1)delete this.state[v][D][q[O]];I[D]=this.state[v][D]}i[v]=i[v]||{},Ue(i[v],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var K in e)e[K].setFeatureState(i,t)};var Ga=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new us(8192,16,0),this.grid3D=new us(8192,16,0),this.featureIndexArray=new Z,this.promoteId=t};function Uy(e,t,i,l,p){return or(e,function(d,v){var I=t instanceof zo?t.get(v):null;return I&&I.evaluate?I.evaluate(i,l,p):I})}function ws(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,v=e;d<v.length;d+=1){var I=v[d];t=Math.min(t,I.x),i=Math.min(i,I.y),l=Math.max(l,I.x),p=Math.max(p,I.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Ws(e,t){return t-e}Ga.prototype.insert=function(e,t,i,l,p,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var I=d?this.grid3D:this.grid,C=0;C<t.length;C++){for(var D=t[C],O=[1/0,1/0,-1/0,-1/0],q=0;q<D.length;q++){var K=D[q];O[0]=Math.min(O[0],K.x),O[1]=Math.min(O[1],K.y),O[2]=Math.max(O[2],K.x),O[3]=Math.max(O[3],K.y)}O[0]<8192&&O[1]<8192&&O[2]>=0&&O[3]>=0&&I.insert(v,O[0],O[1],O[2],O[3])}},Ga.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new sh.VectorTile(new ms(this.rawTileData)).layers,this.sourceLayerCoder=new Eu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ga.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,I=Bs(d.filter),C=e.queryGeometry,D=e.queryPadding*v,O=ws(C),q=this.grid.query(O.minX-D,O.minY-D,O.maxX+D,O.maxY+D),K=ws(e.cameraQueryGeometry),W=this.grid3D.query(K.minX-D,K.minY-D,K.maxX+D,K.maxY+D,function(Ce,De,Fe,Ke){return function(Ye,_t,it,bt,lt){for(var Dt=0,wt=Ye;Dt<wt.length;Dt+=1){var ut=wt[Dt];if(_t<=ut.x&&it<=ut.y&&bt>=ut.x&&lt>=ut.y)return!0}var Kt=[new V(_t,it),new V(_t,lt),new V(bt,lt),new V(bt,it)];if(Ye.length>2){for(var Ht=0,ir=Kt;Ht<ir.length;Ht+=1)if(ga(Ye,ir[Ht]))return!0}for(var St=0;St<Ye.length-1;St++)if(Tl(Ye[St],Ye[St+1],Kt))return!0;return!1}(e.cameraQueryGeometry,Ce-D,De-D,Fe+D,Ke+D)}),ne=0,le=W;ne<le.length;ne+=1)q.push(le[ne]);q.sort(Ws);for(var ye,fe={},Ee=function(Ce){var De=q[Ce];if(De!==ye){ye=De;var Fe=p.featureIndexArray.get(De),Ke=null;p.loadMatchingFeature(fe,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,I,d.layers,d.availableImages,t,i,l,function(Ye,_t,it){return Ke||(Ke=fi(Ye)),_t.queryIntersectsFeature(C,Ye,it,Ke,p.z,e.transform,v,e.pixelPosMatrix)})}},Ae=0;Ae<q.length;Ae++)Ee(Ae);return fe},Ga.prototype.loadMatchingFeature=function(e,t,i,l,p,d,v,I,C,D,O){var q=this.bucketLayerIDs[t];if(!d||function(Ye,_t){for(var it=0;it<Ye.length;it++)if(_t.indexOf(Ye[it])>=0)return!0;return!1}(d,q)){var K=this.sourceLayerCoder.decode(i),W=this.vtLayers[K].feature(l);if(p.needGeometry){var ne=zi(W,!0);if(!p.filter(new tr(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!p.filter(new tr(this.tileID.overscaledZ),W))return;for(var le=this.getId(W,K),ye=0;ye<q.length;ye++){var fe=q[ye];if(!(d&&d.indexOf(fe)<0)){var Ee=I[fe];if(Ee){var Ae={};le!==void 0&&D&&(Ae=D.getState(Ee.sourceLayer||"_geojsonTileLayer",le));var Ce=Ue({},C[fe]);Ce.paint=Uy(Ce.paint,Ee.paint,W,Ae,v),Ce.layout=Uy(Ce.layout,Ee.layout,W,Ae,v);var De=!O||O(W,Ee,Ae);if(De){var Fe=new wh(W,this.z,this.x,this.y,le);Fe.layer=Ce;var Ke=e[fe];Ke===void 0&&(Ke=e[fe]=[]),Ke.push({featureIndex:l,feature:Fe,intersectionZ:De})}}}}}},Ga.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,v,I){var C={};this.loadVTLayers();for(var D=Bs(p),O=0,q=e;O<q.length;O+=1)this.loadMatchingFeature(C,i,l,q[O],D,d,v,I,t);return C},Ga.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},Ga.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},ot("FeatureIndex",Ga,{omit:["rawTileData","sourceLayerCoder"]});var mi=function(e,t){this.tileID=e,this.uid=Mt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};mi.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Ia.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},mi.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},mi.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(D,O){var q={};if(!O)return q;for(var K=function(){var le=ne[W],ye=le.layerIds.map(function(Ae){return O.getLayer(Ae)}).filter(Boolean);if(ye.length!==0){le.layers=ye,le.stateDependentLayerIds&&(le.stateDependentLayers=le.stateDependentLayerIds.map(function(Ae){return ye.filter(function(Ce){return Ce.id===Ae})[0]}));for(var fe=0,Ee=ye;fe<Ee.length;fe+=1)q[Ee[fe].id]=le}},W=0,ne=D;W<ne.length;W+=1)K();return q}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof xr){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof xr&&v.hasRTLText){this.hasRTLText=!0,Mn.isLoading()||Mn.isLoaded()||up()!=="deferred"||na();break}}for(var I in this.queryPadding=0,this.buckets){var C=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(I).queryRadius(C))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},mi.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},mi.prototype.getBucket=function(e){return this.buckets[e.id]},mi.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _s(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _s(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},mi.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},mi.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,v,I,C,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:D,transform:I,params:v,queryPadding:this.queryPadding*C},e,t,i):{}},mi.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var v=Bs(t&&t.filter),I=this.tileID.canonical,C=I.z,D=I.x,O=I.y,q={z:C,x:D,y:O},K=0;K<d.length;K++){var W=d.feature(K);if(v.needGeometry){var ne=zi(W,!0);if(!v.filter(new tr(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!v.filter(new tr(this.tileID.overscaledZ),W))continue;var le=i.getId(W,p),ye=new wh(W,C,D,O,le);ye.tile=q,e.push(ye)}}},mi.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},mi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},mi.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=$r(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},mi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},mi.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],I=e[d];if(v&&I&&Object.keys(I).length!==0){p.update(I,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=t&&t.style&&t.style.getLayer(l);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(p)))}}}},mi.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},mi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ia.now()},mi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},mi.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Ia.now()+e},mi.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},mi.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,v=t;d<v.length;d+=1)if(p[v[d]])return!0}}return!1};var Su=U.performance,Sh=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Su.mark(this._marks.start)};Sh.prototype.finish=function(){Su.mark(this._marks.end);var e=Su.getEntriesByName(this._marks.measure);return e.length===0&&(Su.measure(this._marks.measure,this._marks.start,this._marks.end),e=Su.getEntriesByName(this._marks.measure),Su.clearMarks(this._marks.start),Su.clearMarks(this._marks.end),Su.clearMeasures(this._marks.measure)),e},o.Actor=xh,o.AlphaImage=oc,o.CanonicalTileID=jp,o.CollisionBoxArray=s,o.Color=nr,o.DEMData=Ul,o.DataConstantProperty=gt,o.DictionaryCoder=Eu,o.EXTENT=8192,o.ErrorEvent=ve,o.EvaluationParameters=tr,o.Event=ce,o.Evented=be,o.FeatureIndex=Ga,o.FillBucket=fs,o.FillExtrusionBucket=za,o.ImageAtlas=uo,o.ImagePosition=Af,o.LineBucket=Ci,o.LngLat=ei,o.LngLatBounds=ai,o.MercatorCoordinate=xs,o.ONE_EM=24,o.OverscaledTileID=di,o.Point=V,o.Point$1=V,o.Properties=Ai,o.Protobuf=ms,o.RGBAImage=dn,o.RequestManager=Ni,o.RequestPerformance=Sh,o.ResourceType=ll,o.SegmentVector=Q,o.SourceFeatureState=Eh,o.StructArrayLayout1ui2=Ua,o.StructArrayLayout2f1f2i16=oo,o.StructArrayLayout2i4=Il,o.StructArrayLayout3ui6=Fa,o.StructArrayLayout4i8=hp,o.SymbolBucket=xr,o.Texture=_s,o.Tile=mi,o.Transitionable=In,o.Uniform1f=He,o.Uniform1i=je,o.Uniform2f=Xe,o.Uniform3f=ht,o.Uniform4f=yt,o.UniformColor=It,o.UniformMatrix4f=rr,o.UnwrappedTileID=Ny,o.ValidationError=se,o.WritingMode=Za,o.ZoomHistory=wl,o.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},o.addDynamicAttributes=Bd,o.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(v,I){t(v,function(C,D){C&&(d=C),p[I]=D,--l==0&&i(d,p)})})},o.bezier=he,o.bindAll=Tr,o.browser=Ia,o.cacheEntryPossiblyAdded=function(e){++mo>$o&&(e.getActor().send("enforceCacheSizeLimit",Ra),mo=0)},o.clamp=we,o.clearTileCache=function(e){var t=U.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},o.clipLine=vs,o.clone=function(e){var t=new er(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.clone$1=At,o.clone$2=function(e){var t=new er(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.collisionCircleLayout=zd,o.config=br,o.create=function(){var e=new er(16);return er!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},o.create$1=function(){var e=new er(9);return er!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},o.create$2=function(){var e=new er(4);return er!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},o.createCommonjsModule=z,o.createExpression=_f,o.createLayout=hn,o.createStyleLayer=function(e){return e.type==="custom"?new Tg(e):new Up[e.type](e)},o.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=i[0],I=i[1],C=i[2];return e[0]=p*C-d*I,e[1]=d*v-l*C,e[2]=l*I-p*v,e},o.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.ease=Ie,o.emitValidationErrors=tc,o.endsWith=wr,o.enforceCacheSizeLimit=function(e){ci(),xi&&xi.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},o.evaluateSizeForFeature=dh,o.evaluateSizeForZoom=Cy,o.evaluateVariableOffset=mc,o.evented=Ed,o.extend=Ue,o.featureFilter=Bs,o.filterObject=kt,o.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.getAnchorAlignment=Dd,o.getAnchorJustification=Rd,o.getArrayBuffer=ha,o.getImage=G,o.getJSON=function(e,t){return ta(Ue(e,{type:"json"}),t)},o.getRTLTextPluginStatus=up,o.getReferrer=Zn,o.getVideo=function(e,t){var i,l,p=U.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var v=U.document.createElement("source");i=e[d],l=void 0,(l=U.document.createElement("a")).href=i,(l.protocol!==U.document.location.protocol||l.host!==U.document.location.host)&&(p.crossOrigin="Anonymous"),v.src=e[d],p.appendChild(v)}return{cancel:function(){}}},o.identity=fn,o.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],v=t[4],I=t[5],C=t[6],D=t[7],O=t[8],q=t[9],K=t[10],W=t[11],ne=t[12],le=t[13],ye=t[14],fe=t[15],Ee=i*I-l*v,Ae=i*C-p*v,Ce=i*D-d*v,De=l*C-p*I,Fe=l*D-d*I,Ke=p*D-d*C,Ye=O*le-q*ne,_t=O*ye-K*ne,it=O*fe-W*ne,bt=q*ye-K*le,lt=q*fe-W*le,Dt=K*fe-W*ye,wt=Ee*Dt-Ae*lt+Ce*bt+De*it-Fe*_t+Ke*Ye;return wt?(e[0]=(I*Dt-C*lt+D*bt)*(wt=1/wt),e[1]=(p*lt-l*Dt-d*bt)*wt,e[2]=(le*Ke-ye*Fe+fe*De)*wt,e[3]=(K*Fe-q*Ke-W*De)*wt,e[4]=(C*it-v*Dt-D*_t)*wt,e[5]=(i*Dt-p*it+d*_t)*wt,e[6]=(ye*Ce-ne*Ke-fe*Ae)*wt,e[7]=(O*Ke-K*Ce+W*Ae)*wt,e[8]=(v*lt-I*it+D*Ye)*wt,e[9]=(l*it-i*lt-d*Ye)*wt,e[10]=(ne*Fe-le*Ce+fe*Ee)*wt,e[11]=(q*Ce-O*Fe-W*Ee)*wt,e[12]=(I*_t-v*bt-C*Ye)*wt,e[13]=(i*bt-l*_t+p*Ye)*wt,e[14]=(le*Ae-ne*De-ye*Ee)*wt,e[15]=(O*De-q*Ae+K*Ee)*wt,e):null},o.isChar=$e,o.isMapboxURL=ui,o.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},o.makeRequest=ta,o.mapObject=or,o.mercatorXfromLng=Fl,o.mercatorYfromLat=bs,o.mercatorZfromAltitude=wu,o.mul=$v,o.multiply=oa,o.mvt=sh,o.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},o.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},o.number=Bi,o.offscreenCanvasSupported=ua,o.ortho=function(e,t,i,l,p,d,v){var I=1/(t-i),C=1/(l-p),D=1/(d-v);return e[0]=-2*I,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*C,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*D,e[11]=0,e[12]=(t+i)*I,e[13]=(p+l)*C,e[14]=(v+d)*D,e[15]=1,e},o.parseGlyphPBF=function(e){return new ms(e).readFields(Lp,[])},o.pbf=ms,o.performSymbolLayout=function(e,t,i,l,p,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var I=e.layers[0].layout,C=e.layers[0]._unevaluatedLayout._values,D={};if(e.textSizeData.kind==="composite"){var O=e.textSizeData,q=O.maxZoom;D.compositeTextSizes=[C["text-size"].possiblyEvaluate(new tr(O.minZoom),v),C["text-size"].possiblyEvaluate(new tr(q),v)]}if(e.iconSizeData.kind==="composite"){var K=e.iconSizeData,W=K.maxZoom;D.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new tr(K.minZoom),v),C["icon-size"].possiblyEvaluate(new tr(W),v)]}D.layoutTextSize=C["text-size"].possiblyEvaluate(new tr(e.zoom+1),v),D.layoutIconSize=C["icon-size"].possiblyEvaluate(new tr(e.zoom+1),v),D.textMaxSize=C["text-size"].possiblyEvaluate(new tr(18));for(var ne=24*I.get("text-line-height"),le=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",ye=I.get("text-keep-upright"),fe=I.get("text-size"),Ee=function(){var De=Ce[Ae],Fe=I.get("text-font").evaluate(De,{},v).join(","),Ke=fe.evaluate(De,{},v),Ye=D.layoutTextSize.evaluate(De,{},v),_t=D.layoutIconSize.evaluate(De,{},v),it={horizontal:{},vertical:void 0},bt=De.text,lt=[0,0];if(bt){var Dt=bt.toString(),wt=24*I.get("text-letter-spacing").evaluate(De,{},v),ut=function(ar){for(var Sr=0,Fr=ar;Sr<Fr.length;Sr+=1)if(cr=Fr[Sr].charCodeAt(0),$e.Arabic(cr)||$e["Arabic Supplement"](cr)||$e["Arabic Extended-A"](cr)||$e["Arabic Presentation Forms-A"](cr)||$e["Arabic Presentation Forms-B"](cr))return!1;var cr;return!0}(Dt)?wt:0,Kt=I.get("text-anchor").evaluate(De,{},v),Ht=I.get("text-variable-anchor");if(!Ht){var ir=I.get("text-radial-offset").evaluate(De,{},v);lt=ir?mc(Kt,[24*ir,Ld]):I.get("text-offset").evaluate(De,{},v).map(function(ar){return 24*ar})}var St=le?"center":I.get("text-justify").evaluate(De,{},v),gr=I.get("symbol-placement"),Or=gr==="point"?24*I.get("text-max-width").evaluate(De,{},v):0,Yr=function(){e.allowVerticalPlacement&&El(Dt)&&(it.vertical=zf(bt,t,i,p,Fe,Or,ne,Kt,"left",ut,lt,Za.vertical,!0,gr,Ye,Ke))};if(!le&&Ht){for(var yi=St==="auto"?Ht.map(function(ar){return Rd(ar)}):[St],Vr=!1,oi=0;oi<yi.length;oi++){var tn=yi[oi];if(!it.horizontal[tn])if(Vr)it.horizontal[tn]=it.horizontal[0];else{var rn=zf(bt,t,i,p,Fe,Or,ne,"center",tn,ut,lt,Za.horizontal,!1,gr,Ye,Ke);rn&&(it.horizontal[tn]=rn,Vr=rn.positionedLines.length===1)}}Yr()}else{St==="auto"&&(St=Rd(Kt));var Xi=zf(bt,t,i,p,Fe,Or,ne,Kt,St,ut,lt,Za.horizontal,!1,gr,Ye,Ke);Xi&&(it.horizontal[St]=Xi),Yr(),El(Dt)&&le&&ye&&(it.vertical=zf(bt,t,i,p,Fe,Or,ne,Kt,St,ut,lt,Za.vertical,!1,gr,Ye,Ke))}}var mn=void 0,Di=!1;if(De.icon&&De.icon.name){var Mr=l[De.icon.name];Mr&&(mn=function(ar,Sr,Fr){var cr=Dd(Fr),yn=Sr[0]-ar.displaySize[0]*cr.horizontalAlign,Wi=Sr[1]-ar.displaySize[1]*cr.verticalAlign;return{image:ar,top:Wi,bottom:Wi+ar.displaySize[1],left:yn,right:yn+ar.displaySize[0]}}(p[De.icon.name],I.get("icon-offset").evaluate(De,{},v),I.get("icon-anchor").evaluate(De,{},v)),Di=Mr.sdf,e.sdfIcons===void 0?e.sdfIcons=Mr.sdf:e.sdfIcons!==Mr.sdf&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Mr.pixelRatio!==e.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var vi=gs(it.horizontal)||it.vertical;e.iconsInText=!!vi&&vi.iconsInText,(vi||mn)&&function(ar,Sr,Fr,cr,yn,Wi,Jr,si,vn,_r,Ys){var Vn=Wi.textMaxSize.evaluate(Sr,{});Vn===void 0&&(Vn=Jr);var Js,gi=ar.layers[0].layout,ql=gi.get("icon-offset").evaluate(Sr,{},Ys),Oo=gs(Fr.horizontal),Es=Jr/24,Ss=ar.tilePixelRatio*Es,Ka=ar.tilePixelRatio*Vn/24,Vo=ar.tilePixelRatio*si,kh=ar.tilePixelRatio*gi.get("symbol-spacing"),Lf=gi.get("text-padding")*ar.tilePixelRatio,ks=gi.get("icon-padding")*ar.tilePixelRatio,co=gi.get("text-max-angle")/180*Math.PI,Rf=gi.get("text-rotation-alignment")==="map"&&gi.get("symbol-placement")!=="point",Ih=gi.get("icon-rotation-alignment")==="map"&&gi.get("symbol-placement")!=="point",Qs=gi.get("symbol-placement"),Zp=kh/2,jl=gi.get("icon-text-fit");cr&&jl!=="none"&&(ar.allowVerticalPlacement&&Fr.vertical&&(Js=m_(cr,Fr.vertical,jl,gi.get("icon-text-fit-padding"),ql,Es)),Oo&&(cr=m_(cr,Oo,jl,gi.get("icon-text-fit-padding"),ql,Es)));var ku=function(Ag,tl){tl.x<0||tl.x>=8192||tl.y<0||tl.y>=8192||function(ti,Fn,Nf,Tu,Zd,bc,No,rl,Ah,zh,Uf,xc,Gd,jy,Ca,Gl,As,Au,Zy,Ph,Uo,qf,Ch,Wa,zg){var Dh,Kl,Mh,Lh,zs,Rh=ti.addToLineVertexArray(Fn,Nf),jf=0,Gy=0,Zf=0,Pg=0,Kd=-1,zu=-1,ho={},il=oe(""),Bh=0,Hd=0;if(rl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Bh=(Dh=rl.layout.get("text-offset").evaluate(Uo,{},Wa).map(function(Qp){return 24*Qp}))[0],Hd=Dh[1]):(Bh=24*rl.layout.get("text-radial-offset").evaluate(Uo,{},Wa),Hd=Ld),ti.allowVerticalPlacement&&Tu.vertical){var Ky=rl.layout.get("text-rotate").evaluate(Uo,{},Wa)+90;Lh=new xu(Ah,Fn,zh,Uf,xc,Tu.vertical,Gd,jy,Ca,Ky),No&&(zs=new xu(Ah,Fn,zh,Uf,xc,No,As,Au,Ca,Ky))}if(Zd){var Pu=rl.layout.get("icon-rotate").evaluate(Uo,{}),nl=rl.layout.get("icon-text-fit")!=="none",Hy=bu(Zd,Pu,Ch,nl),Hp=No?bu(No,Pu,Ch,nl):void 0;Mh=new xu(Ah,Fn,zh,Uf,xc,Zd,As,Au,!1,Pu),jf=4*Hy.length;var Xd=ti.iconSizeData,Xp=null;Xd.kind==="source"?(Xp=[128*rl.layout.get("icon-size").evaluate(Uo,{})])[0]>32640&&Ot(ti.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Xd.kind==="composite"&&((Xp=[128*qf.compositeIconSizes[0].evaluate(Uo,{},Wa),128*qf.compositeIconSizes[1].evaluate(Uo,{},Wa)])[0]>32640||Xp[1]>32640)&&Ot(ti.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ti.addSymbols(ti.icon,Hy,Xp,Ph,Zy,Uo,!1,Fn,Rh.lineStartIndex,Rh.lineLength,-1,Wa),Kd=ti.icon.placedSymbolArray.length-1,Hp&&(Gy=4*Hp.length,ti.addSymbols(ti.icon,Hp,Xp,Ph,Zy,Uo,Za.vertical,Fn,Rh.lineStartIndex,Rh.lineLength,-1,Wa),zu=ti.icon.placedSymbolArray.length-1)}for(var Wp in Tu.horizontal){var Gf=Tu.horizontal[Wp];if(!Kl){il=oe(Gf.text);var Cg=rl.layout.get("text-rotate").evaluate(Uo,{},Wa);Kl=new xu(Ah,Fn,zh,Uf,xc,Gf,Gd,jy,Ca,Cg)}var xa=Gf.positionedLines.length===1;if(Zf+=Vl(ti,Fn,Gf,bc,rl,Ca,Uo,Gl,Rh,Tu.vertical?Za.horizontal:Za.horizontalOnly,xa?Object.keys(Tu.horizontal):[Wp],ho,Kd,qf,Wa),xa)break}Tu.vertical&&(Pg+=Vl(ti,Fn,Tu.vertical,bc,rl,Ca,Uo,Gl,Rh,Za.vertical,["vertical"],ho,zu,qf,Wa));var Cu=Kl?Kl.boxStartIndex:ti.collisionBoxArray.length,al=Kl?Kl.boxEndIndex:ti.collisionBoxArray.length,wc=Lh?Lh.boxStartIndex:ti.collisionBoxArray.length,Dg=Lh?Lh.boxEndIndex:ti.collisionBoxArray.length,Yp=Mh?Mh.boxStartIndex:ti.collisionBoxArray.length,v0=Mh?Mh.boxEndIndex:ti.collisionBoxArray.length,Mg=zs?zs.boxStartIndex:ti.collisionBoxArray.length,Jp=zs?zs.boxEndIndex:ti.collisionBoxArray.length,Qr=-1,Kf=function(Qp,Wy){return Qp&&Qp.circleDiameter?Math.max(Qp.circleDiameter,Wy):Wy};Qr=Kf(Kl,Qr),Qr=Kf(Lh,Qr),Qr=Kf(Mh,Qr);var Xy=(Qr=Kf(zs,Qr))>-1?1:0;Xy&&(Qr*=zg/24),ti.glyphOffsetArray.length>=xr.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Uo.sortKey!==void 0&&ti.addToSortKeyRanges(ti.symbolInstances.length,Uo.sortKey),ti.symbolInstances.emplaceBack(Fn.x,Fn.y,ho.right>=0?ho.right:-1,ho.center>=0?ho.center:-1,ho.left>=0?ho.left:-1,ho.vertical||-1,Kd,zu,il,Cu,al,wc,Dg,Yp,v0,Mg,Jp,zh,Zf,Pg,jf,Gy,Xy,0,Gd,Bh,Hd,Qr)}(ar,tl,Ag,Fr,cr,yn,Js,ar.layers[0],ar.collisionBoxArray,Sr.index,Sr.sourceLayerIndex,ar.index,Ss,Lf,Rf,vn,Vo,ks,Ih,ql,Sr,Wi,_r,Ys,Jr)};if(Qs==="line")for(var Th=0,Ha=vs(Sr.geometry,0,0,8192,8192);Th<Ha.length;Th+=1)for(var Is=Ha[Th],Xa=0,Fo=_u(Is,kh,co,Fr.vertical||Oo,cr,24,Ka,ar.overscaling,8192);Xa<Fo.length;Xa+=1){var Bf=Fo[Xa];Oo&&yc(ar,Oo.text,Zp,Bf)||ku(Is,Bf)}else if(Qs==="line-center")for(var Zl=0,Ud=Sr.geometry;Zl<Ud.length;Zl+=1){var Gp=Ud[Zl];if(Gp.length>1){var Iu=Eg(Gp,co,Fr.vertical||Oo,cr,24,Ka);Iu&&ku(Gp,Iu)}}else if(Sr.type==="Polygon")for(var $s=0,Of=Td(Sr.geometry,0);$s<Of.length;$s+=1){var el=Of[$s],gc=Op(el,16);ku(el[0],new fh(gc.x,gc.y,0))}else if(Sr.type==="LineString")for(var _c=0,Kp=Sr.geometry;_c<Kp.length;_c+=1){var Ts=Kp[_c];ku(Ts,new fh(Ts[0].x,Ts[0].y,0))}else if(Sr.type==="Point")for(var qd=0,Vf=Sr.geometry;qd<Vf.length;qd+=1)for(var jd=0,Ff=Vf[qd];jd<Ff.length;jd+=1){var qy=Ff[jd];ku([qy],new fh(qy.x,qy.y,0))}}(e,De,it,mn,l,D,Ye,_t,lt,Di,v)},Ae=0,Ce=e.features;Ae<Ce.length;Ae+=1)Ee();d&&e.generateCollisionDebugBuffers()},o.perspective=function(e,t,i,l,p){var d,v=1/Math.tan(t/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},o.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},o.plugin=Mn,o.polygonIntersectsPolygon=Bn,o.postMapLoadEvent=jn,o.postTurnstileEvent=jr,o.potpack=zy,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=ot,o.registerForPluginStateChange=function(e){return e({pluginStatus:Ti,pluginURL:Xn}),Ed.on("pluginStateChange",e),e},o.renderColorRamp=Al,o.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],I=Math.sin(i),C=Math.cos(i);return e[0]=l*C+d*I,e[1]=p*C+v*I,e[2]=l*-I+d*C,e[3]=p*-I+v*C,e},o.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],v=t[5],I=t[6],C=t[7],D=t[8],O=t[9],q=t[10],K=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+D*l,e[5]=v*p+O*l,e[6]=I*p+q*l,e[7]=C*p+K*l,e[8]=D*p-d*l,e[9]=O*p-v*l,e[10]=q*p-I*l,e[11]=K*p-C*l,e},o.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],v=t[1],I=t[2],C=t[3],D=t[4],O=t[5],q=t[6],K=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+D*l,e[1]=v*p+O*l,e[2]=I*p+q*l,e[3]=C*p+K*l,e[4]=D*p-d*l,e[5]=O*p-v*l,e[6]=q*p-I*l,e[7]=K*p-C*l,e},o.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},o.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},o.setCacheLimits=function(e,t){Ra=e,$o=t},o.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),Ti==="deferred"||Ti==="loading"||Ti==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Xn=Ia.resolveURL(e),Ti="deferred",no=t,hs(),i||na()},o.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},o.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},o.styleSpec=H,o.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},o.symbolSize=Bp,o.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},o.transformMat4=$c,o.translate=function(e,t,i){var l,p,d,v,I,C,D,O,q,K,W,ne,le=i[0],ye=i[1],fe=i[2];return t===e?(e[12]=t[0]*le+t[4]*ye+t[8]*fe+t[12],e[13]=t[1]*le+t[5]*ye+t[9]*fe+t[13],e[14]=t[2]*le+t[6]*ye+t[10]*fe+t[14],e[15]=t[3]*le+t[7]*ye+t[11]*fe+t[15]):(p=t[1],d=t[2],v=t[3],I=t[4],C=t[5],D=t[6],O=t[7],q=t[8],K=t[9],W=t[10],ne=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=v,e[4]=I,e[5]=C,e[6]=D,e[7]=O,e[8]=q,e[9]=K,e[10]=W,e[11]=ne,e[12]=l*le+I*ye+q*fe+t[12],e[13]=p*le+C*ye+K*fe+t[13],e[14]=d*le+D*ye+W*fe+t[14],e[15]=v*le+O*ye+ne*fe+t[15]),e},o.triggerPluginCompletionEvent=Ef,o.uniqueId=Mt,o.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},o.validateLight=wd,o.validateStyle=ls,o.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},o.vectorTile=sh,o.version="1.13.2",o.warnOnce=Ot,o.webpSupported=qn,o.window=U,o.wrap=Oe}),_(["./shared"],function(o){function z(N){var G=typeof N;if(G==="number"||G==="boolean"||G==="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var X="[",re=0,ce=N;re<ce.length;re+=1)X+=z(ce[re])+",";return X+"]"}for(var ve=Object.keys(N).sort(),be="{",H=0;H<ve.length;H++)be+=JSON.stringify(ve[H])+":"+z(N[ve[H]])+",";return be+"}"}function P(N){for(var G="",X=0,re=o.refProperties;X<re.length;X+=1)G+="/"+z(N[re[X]]);return G}var F=function(N){this.keyCache={},N&&this.replace(N)};F.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},F.prototype.update=function(N,G){for(var X=this,re=0,ce=N;re<ce.length;re+=1){var ve=ce[re];this._layerConfigs[ve.id]=ve;var be=this._layers[ve.id]=o.createStyleLayer(ve);be._featureFilter=o.featureFilter(be.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(var H=0,se=G;H<se.length;H+=1){var Se=se[H];delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se]}this.familiesBySource={};for(var Ne=0,Ge=function(We,Qe){for(var Ft={},Ze=0;Ze<We.length;Ze++){var Gt=Qe&&Qe[We[Ze].id]||P(We[Ze]);Qe&&(Qe[We[Ze].id]=Gt);var sr=Ft[Gt];sr||(sr=Ft[Gt]=[]),sr.push(We[Ze])}var Pt=[];for(var Qt in Ft)Pt.push(Ft[Qt]);return Pt}(o.values(this._layerConfigs),this.keyCache);Ne<Ge.length;Ne+=1){var Le=Ge[Ne].map(function(We){return X._layers[We.id]}),qe=Le[0];if(qe.visibility!=="none"){var pt=qe.source||"",at=this.familiesBySource[pt];at||(at=this.familiesBySource[pt]={});var Be=qe.sourceLayer||"_geojsonTileLayer",tt=at[Be];tt||(tt=at[Be]=[]),tt.push(Le)}}};var V=function(N){var G={},X=[];for(var re in N){var ce=N[re],ve=G[re]={};for(var be in ce){var H=ce[+be];if(H&&H.bitmap.width!==0&&H.bitmap.height!==0){var se={x:0,y:0,w:H.bitmap.width+2,h:H.bitmap.height+2};X.push(se),ve[be]={rect:se,metrics:H.metrics}}}}var Se=o.potpack(X),Ne=new o.AlphaImage({width:Se.w||1,height:Se.h||1});for(var Ge in N){var Le=N[Ge];for(var qe in Le){var pt=Le[+qe];if(pt&&pt.bitmap.width!==0&&pt.bitmap.height!==0){var at=G[Ge][qe].rect;o.AlphaImage.copy(pt.bitmap,Ne,{x:0,y:0},{x:at.x+1,y:at.y+1},pt.bitmap)}}}this.image=Ne,this.positions=G};o.register("GlyphAtlas",V);var j=function(N){this.tileID=new o.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId};function U(N,G,X){for(var re=new o.EvaluationParameters(G),ce=0,ve=N;ce<ve.length;ce+=1)ve[ce].recalculate(re,X)}function pe(N,G){var X=o.getArrayBuffer(N.request,function(re,ce,ve,be){re?G(re):ce&&G(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(ce)),rawData:ce,cacheControl:ve,expires:be})});return function(){X.cancel(),G()}}j.prototype.parse=function(N,G,X,re,ce){var ve=this;this.status="parsing",this.data=N,this.collisionBoxArray=new o.CollisionBoxArray;var be=new o.DictionaryCoder(Object.keys(N.layers).sort()),H=new o.FeatureIndex(this.tileID,this.promoteId);H.bucketLayerIDs=[];var se,Se,Ne,Ge,Le={},qe={featureIndex:H,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},pt=G.familiesBySource[this.source];for(var at in pt){var Be=N.layers[at];if(Be){Be.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+at+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var tt=be.encode(at),We=[],Qe=0;Qe<Be.length;Qe++){var Ft=Be.feature(Qe),Ze=H.getId(Ft,at);We.push({feature:Ft,id:Ze,index:Qe,sourceLayerIndex:tt})}for(var Gt=0,sr=pt[at];Gt<sr.length;Gt+=1){var Pt=sr[Gt],Qt=Pt[0];Qt.minzoom&&this.zoom<Math.floor(Qt.minzoom)||Qt.maxzoom&&this.zoom>=Qt.maxzoom||Qt.visibility!=="none"&&(U(Pt,this.zoom,X),(Le[Qt.id]=Qt.createBucket({index:H.bucketLayerIDs.length,layers:Pt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:tt,sourceID:this.source})).populate(We,qe,this.tileID.canonical),H.bucketLayerIDs.push(Pt.map(function(pr){return pr.id})))}}}var Jt=o.mapObject(qe.glyphDependencies,function(pr){return Object.keys(pr).map(Number)});Object.keys(Jt).length?re.send("getGlyphs",{uid:this.uid,stacks:Jt},function(pr,Xt){se||(se=pr,Se=Xt,mr.call(ve))}):Se={};var Li=Object.keys(qe.iconDependencies);Li.length?re.send("getImages",{icons:Li,source:this.source,tileID:this.tileID,type:"icons"},function(pr,Xt){se||(se=pr,Ne=Xt,mr.call(ve))}):Ne={};var $t=Object.keys(qe.patternDependencies);function mr(){if(se)return ce(se);if(Se&&Ne&&Ge){var pr=new V(Se),Xt=new o.ImageAtlas(Ne,Ge);for(var nr in Le){var Ui=Le[nr];Ui instanceof o.SymbolBucket?(U(Ui.layers,this.zoom,X),o.performSymbolLayout(Ui,Se,pr.positions,Ne,Xt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ui.hasPattern&&(Ui instanceof o.LineBucket||Ui instanceof o.FillBucket||Ui instanceof o.FillExtrusionBucket)&&(U(Ui.layers,this.zoom,X),Ui.addFeatures(qe,this.tileID.canonical,Xt.patternPositions))}this.status="done",ce(null,{buckets:o.values(Le).filter(function(pa){return!pa.isEmpty()}),featureIndex:H,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pr.image,imageAtlas:Xt,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?Ne:null,glyphPositions:this.returnDependencies?pr.positions:null})}}$t.length?re.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},function(pr,Xt){se||(se=pr,Ge=Xt,mr.call(ve))}):Ge={},mr.call(this)};var he=function(N,G,X,re){this.actor=N,this.layerIndex=G,this.availableImages=X,this.loadVectorData=re||pe,this.loading={},this.loaded={}};he.prototype.loadTile=function(N,G){var X=this,re=N.uid;this.loading||(this.loading={});var ce=!!(N&&N.request&&N.request.collectResourceTiming)&&new o.RequestPerformance(N.request),ve=this.loading[re]=new j(N);ve.abort=this.loadVectorData(N,function(be,H){if(delete X.loading[re],be||!H)return ve.status="done",X.loaded[re]=ve,G(be);var se=H.rawData,Se={};H.expires&&(Se.expires=H.expires),H.cacheControl&&(Se.cacheControl=H.cacheControl);var Ne={};if(ce){var Ge=ce.finish();Ge&&(Ne.resourceTiming=JSON.parse(JSON.stringify(Ge)))}ve.vectorTile=H.vectorTile,ve.parse(H.vectorTile,X.layerIndex,X.availableImages,X.actor,function(Le,qe){if(Le||!qe)return G(Le);G(null,o.extend({rawTileData:se.slice(0)},qe,Se,Ne))}),X.loaded=X.loaded||{},X.loaded[re]=ve})},he.prototype.reloadTile=function(N,G){var X=this,re=this.loaded,ce=N.uid,ve=this;if(re&&re[ce]){var be=re[ce];be.showCollisionBoxes=N.showCollisionBoxes;var H=function(se,Se){var Ne=be.reloadCallback;Ne&&(delete be.reloadCallback,be.parse(be.vectorTile,ve.layerIndex,X.availableImages,ve.actor,Ne)),G(se,Se)};be.status==="parsing"?be.reloadCallback=H:be.status==="done"&&(be.vectorTile?be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,H):H())}},he.prototype.abortTile=function(N,G){var X=this.loading,re=N.uid;X&&X[re]&&X[re].abort&&(X[re].abort(),delete X[re]),G()},he.prototype.removeTile=function(N,G){var X=this.loaded,re=N.uid;X&&X[re]&&delete X[re],G()};var Ie=o.window.ImageBitmap,we=function(){this.loaded={}};function Oe(N,G){if(N.length!==0){Ue(N[0],G);for(var X=1;X<N.length;X++)Ue(N[X],!G)}}function Ue(N,G){for(var X=0,re=0,ce=N.length,ve=ce-1;re<ce;ve=re++)X+=(N[re][0]-N[ve][0])*(N[ve][1]+N[re][1]);X>=0!=!!G&&N.reverse()}we.prototype.loadTile=function(N,G){var X=N.uid,re=N.encoding,ce=N.rawImageData,ve=Ie&&ce instanceof Ie?this.getImageData(ce):ce,be=new o.DEMData(X,ve,re);this.loaded=this.loaded||{},this.loaded[X]=be,G(null,be)},we.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var G=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:G.width,height:G.height},G.data)},we.prototype.removeTile=function(N){var G=this.loaded,X=N.uid;G&&G[X]&&delete G[X]};var Bt=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,Mt=function(N){this._feature=N,this.extent=o.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))};Mt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],G=0,X=this._feature.geometry;G<X.length;G+=1){var re=X[G];N.push([new o.Point$1(re[0],re[1])])}return N}for(var ce=[],ve=0,be=this._feature.geometry;ve<be.length;ve+=1){for(var H=[],se=0,Se=be[ve];se<Se.length;se+=1){var Ne=Se[se];H.push(new o.Point$1(Ne[0],Ne[1]))}ce.push(H)}return ce},Mt.prototype.toGeoJSON=function(N,G,X){return Bt.call(this,N,G,X)};var mt=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=N.length,this._features=N};mt.prototype.feature=function(N){return new Mt(this._features[N])};var Je=o.vectorTile.VectorTileFeature,Tr=wr;function wr(N,G){this.options=G||{},this.features=N,this.length=N.length}function or(N,G){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=G||4096}wr.prototype.feature=function(N){return new or(this.features[N],this.options.extent)},or.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var G=0;G<N.length;G++){for(var X=N[G],re=[],ce=0;ce<X.length;ce++)re.push(new o.Point$1(X[ce][0],X[ce][1]));this.geometry.push(re)}return this.geometry},or.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,G=1/0,X=-1/0,re=1/0,ce=-1/0,ve=0;ve<N.length;ve++)for(var be=N[ve],H=0;H<be.length;H++){var se=be[H];G=Math.min(G,se.x),X=Math.max(X,se.x),re=Math.min(re,se.y),ce=Math.max(ce,se.y)}return[G,re,X,ce]},or.prototype.toGeoJSON=Je.prototype.toGeoJSON;var kt=Pr,At=Tr;function Pr(N){var G=new o.pbf;return function(X,re){for(var ce in X.layers)re.writeMessage(3,Ot,X.layers[ce])}(N,G),G.finish()}function Ot(N,G){var X;G.writeVarintField(15,N.version||1),G.writeStringField(1,N.name||""),G.writeVarintField(5,N.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(X=0;X<N.length;X++)re.feature=N.feature(X),G.writeMessage(2,Ar,re);var ce=re.keys;for(X=0;X<ce.length;X++)G.writeStringField(3,ce[X]);var ve=re.values;for(X=0;X<ve.length;X++)G.writeMessage(4,kr,ve[X])}function Ar(N,G){var X=N.feature;X.id!==void 0&&G.writeVarintField(1,X.id),G.writeMessage(2,rt,N),G.writeVarintField(3,X.type),G.writeMessage(4,li,X)}function rt(N,G){var X=N.feature,re=N.keys,ce=N.values,ve=N.keycache,be=N.valuecache;for(var H in X.properties){var se=ve[H];se===void 0&&(re.push(H),ve[H]=se=re.length-1),G.writeVarint(se);var Se=X.properties[H],Ne=typeof Se;Ne!=="string"&&Ne!=="boolean"&&Ne!=="number"&&(Se=JSON.stringify(Se));var Ge=Ne+":"+Se,Le=be[Ge];Le===void 0&&(ce.push(Se),be[Ge]=Le=ce.length-1),G.writeVarint(Le)}}function ur(N,G){return(G<<3)+(7&N)}function $r(N){return N<<1^N>>31}function li(N,G){for(var X=N.loadGeometry(),re=N.type,ce=0,ve=0,be=X.length,H=0;H<be;H++){var se=X[H],Se=1;re===1&&(Se=se.length),G.writeVarint(ur(1,Se));for(var Ne=re===3?se.length-1:se.length,Ge=0;Ge<Ne;Ge++){Ge===1&&re!==1&&G.writeVarint(ur(2,Ne-1));var Le=se[Ge].x-ce,qe=se[Ge].y-ve;G.writeVarint($r(Le)),G.writeVarint($r(qe)),ce+=Le,ve+=qe}re===3&&G.writeVarint(ur(7,1))}}function kr(N,G){var X=typeof N;X==="string"?G.writeStringField(1,N):X==="boolean"?G.writeBooleanField(7,N):X==="number"&&(N%1!=0?G.writeDoubleField(3,N):N<0?G.writeSVarintField(6,N):G.writeVarintField(5,N))}function vt(N,G,X,re){nt(N,X,re),nt(G,2*X,2*re),nt(G,2*X+1,2*re+1)}function nt(N,G,X){var re=N[G];N[G]=N[X],N[X]=re}function dr(N,G,X,re){var ce=N-X,ve=G-re;return ce*ce+ve*ve}kt.fromVectorTileJs=Pr,kt.fromGeojsonVt=function(N,G){G=G||{};var X={};for(var re in N)X[re]=new Tr(N[re].features,G),X[re].name=re,X[re].version=G.version,X[re].extent=G.extent;return Pr({layers:X})},kt.GeoJSONWrapper=At;var Un=function(N){return N[0]},la=function(N){return N[1]},Mi=function(N,G,X,re,ce){G===void 0&&(G=Un),X===void 0&&(X=la),re===void 0&&(re=64),ce===void 0&&(ce=Float64Array),this.nodeSize=re,this.points=N;for(var ve=N.length<65536?Uint16Array:Uint32Array,be=this.ids=new ve(N.length),H=this.coords=new ce(2*N.length),se=0;se<N.length;se++)be[se]=se,H[2*se]=G(N[se]),H[2*se+1]=X(N[se]);(function Se(Ne,Ge,Le,qe,pt,at){if(!(pt-qe<=Le)){var Be=qe+pt>>1;(function tt(We,Qe,Ft,Ze,Gt,sr){for(;Gt>Ze;){if(Gt-Ze>600){var Pt=Gt-Ze+1,Qt=Ft-Ze+1,Jt=Math.log(Pt),Li=.5*Math.exp(2*Jt/3),$t=.5*Math.sqrt(Jt*Li*(Pt-Li)/Pt)*(Qt-Pt/2<0?-1:1);tt(We,Qe,Ft,Math.max(Ze,Math.floor(Ft-Qt*Li/Pt+$t)),Math.min(Gt,Math.floor(Ft+(Pt-Qt)*Li/Pt+$t)),sr)}var mr=Qe[2*Ft+sr],pr=Ze,Xt=Gt;for(vt(We,Qe,Ze,Ft),Qe[2*Gt+sr]>mr&&vt(We,Qe,Ze,Gt);pr<Xt;){for(vt(We,Qe,pr,Xt),pr++,Xt--;Qe[2*pr+sr]<mr;)pr++;for(;Qe[2*Xt+sr]>mr;)Xt--}Qe[2*Ze+sr]===mr?vt(We,Qe,Ze,Xt):vt(We,Qe,++Xt,Gt),Xt<=Ft&&(Ze=Xt+1),Ft<=Xt&&(Gt=Xt-1)}})(Ne,Ge,Be,qe,pt,at%2),Se(Ne,Ge,Le,qe,Be-1,at+1),Se(Ne,Ge,Le,Be+1,pt,at+1)}})(be,H,re,0,be.length-1,0)};Mi.prototype.range=function(N,G,X,re){return function(ce,ve,be,H,se,Se,Ne){for(var Ge,Le,qe=[0,ce.length-1,0],pt=[];qe.length;){var at=qe.pop(),Be=qe.pop(),tt=qe.pop();if(Be-tt<=Ne)for(var We=tt;We<=Be;We++)Le=ve[2*We+1],(Ge=ve[2*We])>=be&&Ge<=se&&Le>=H&&Le<=Se&&pt.push(ce[We]);else{var Qe=Math.floor((tt+Be)/2);Le=ve[2*Qe+1],(Ge=ve[2*Qe])>=be&&Ge<=se&&Le>=H&&Le<=Se&&pt.push(ce[Qe]);var Ft=(at+1)%2;(at===0?be<=Ge:H<=Le)&&(qe.push(tt),qe.push(Qe-1),qe.push(Ft)),(at===0?se>=Ge:Se>=Le)&&(qe.push(Qe+1),qe.push(Be),qe.push(Ft))}}return pt}(this.ids,this.coords,N,G,X,re,this.nodeSize)},Mi.prototype.within=function(N,G,X){return function(re,ce,ve,be,H,se){for(var Se=[0,re.length-1,0],Ne=[],Ge=H*H;Se.length;){var Le=Se.pop(),qe=Se.pop(),pt=Se.pop();if(qe-pt<=se)for(var at=pt;at<=qe;at++)dr(ce[2*at],ce[2*at+1],ve,be)<=Ge&&Ne.push(re[at]);else{var Be=Math.floor((pt+qe)/2),tt=ce[2*Be],We=ce[2*Be+1];dr(tt,We,ve,be)<=Ge&&Ne.push(re[Be]);var Qe=(Le+1)%2;(Le===0?ve-H<=tt:be-H<=We)&&(Se.push(pt),Se.push(Be-1),Se.push(Qe)),(Le===0?ve+H>=tt:be+H>=We)&&(Se.push(Be+1),Se.push(qe),Se.push(Qe))}}return Ne}(this.ids,this.coords,N,G,X,this.nodeSize)};var _n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(N){return N}},ri=function(N){this.options=Yi(Object.create(_n),N),this.trees=new Array(this.options.maxZoom+1)};function Ia(N,G,X,re,ce){return{x:N,y:G,zoom:1/0,id:X,parentId:-1,numPoints:re,properties:ce}}function br(N,G){var X=N.geometry.coordinates,re=X[1];return{x:qr(X[0]),y:Lt(re),zoom:1/0,index:G,parentId:-1}}function qn(N){return{type:"Feature",id:N.id,properties:Ya(N),geometry:{type:"Point",coordinates:[(re=N.x,360*(re-.5)),(G=N.y,X=(180-360*G)*Math.PI/180,360*Math.atan(Math.exp(X))/Math.PI-90)]}};var G,X,re}function Ya(N){var G=N.numPoints,X=G>=1e4?Math.round(G/1e3)+"k":G>=1e3?Math.round(G/100)/10+"k":G;return Yi(Yi({},N.properties),{cluster:!0,cluster_id:N.id,point_count:G,point_count_abbreviated:X})}function qr(N){return N/360+.5}function Lt(N){var G=Math.sin(N*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function Yi(N,G){for(var X in G)N[X]=G[X];return N}function Ni(N){return N.x}function ui(N){return N.y}function fo(N,G,X,re,ce,ve){var be=ce-X,H=ve-re;if(be!==0||H!==0){var se=((N-X)*be+(G-re)*H)/(be*be+H*H);se>1?(X=ce,re=ve):se>0&&(X+=be*se,re+=H*se)}return(be=N-X)*be+(H=G-re)*H}function Wt(N,G,X,re){var ce={id:N===void 0?null:N,type:G,geometry:X,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ve){var be=ve.geometry,H=ve.type;if(H==="Point"||H==="MultiPoint"||H==="LineString")ki(ve,be);else if(H==="Polygon"||H==="MultiLineString")for(var se=0;se<be.length;se++)ki(ve,be[se]);else if(H==="MultiPolygon")for(se=0;se<be.length;se++)for(var Se=0;Se<be[se].length;Se++)ki(ve,be[se][Se])}(ce),ce}function ki(N,G){for(var X=0;X<G.length;X+=3)N.minX=Math.min(N.minX,G[X]),N.minY=Math.min(N.minY,G[X+1]),N.maxX=Math.max(N.maxX,G[X]),N.maxY=Math.max(N.maxY,G[X+1])}function Lr(N,G,X,re){if(G.geometry){var ce=G.geometry.coordinates,ve=G.geometry.type,be=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),H=[],se=G.id;if(X.promoteId?se=G.properties[X.promoteId]:X.generateId&&(se=re||0),ve==="Point")_i(ce,H);else if(ve==="MultiPoint")for(var Se=0;Se<ce.length;Se++)_i(ce[Se],H);else if(ve==="LineString")bi(ce,H,be,!1);else if(ve==="MultiLineString"){if(X.lineMetrics){for(Se=0;Se<ce.length;Se++)bi(ce[Se],H=[],be,!1),N.push(Wt(se,"LineString",H,G.properties));return}Cr(ce,H,be,!1)}else if(ve==="Polygon")Cr(ce,H,be,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(Se=0;Se<G.geometry.geometries.length;Se++)Lr(N,{id:se,geometry:G.geometry.geometries[Se],properties:G.properties},X,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Se=0;Se<ce.length;Se++){var Ne=[];Cr(ce[Se],Ne,be,!0),H.push(Ne)}}N.push(Wt(se,ve,H,G.properties))}}function _i(N,G){G.push(xi(N[0])),G.push(on(N[1])),G.push(0)}function bi(N,G,X,re){for(var ce,ve,be=0,H=0;H<N.length;H++){var se=xi(N[H][0]),Se=on(N[H][1]);G.push(se),G.push(Se),G.push(0),H>0&&(be+=re?(ce*Se-se*ve)/2:Math.sqrt(Math.pow(se-ce,2)+Math.pow(Se-ve,2))),ce=se,ve=Se}var Ne=G.length-3;G[2]=1,function Ge(Le,qe,pt,at){for(var Be,tt=at,We=pt-qe>>1,Qe=pt-qe,Ft=Le[qe],Ze=Le[qe+1],Gt=Le[pt],sr=Le[pt+1],Pt=qe+3;Pt<pt;Pt+=3){var Qt=fo(Le[Pt],Le[Pt+1],Ft,Ze,Gt,sr);if(Qt>tt)Be=Pt,tt=Qt;else if(Qt===tt){var Jt=Math.abs(Pt-We);Jt<Qe&&(Be=Pt,Qe=Jt)}}tt>at&&(Be-qe>3&&Ge(Le,qe,Be,at),Le[Be+2]=tt,pt-Be>3&&Ge(Le,Be,pt,at))}(G,0,Ne,X),G[Ne+2]=1,G.size=Math.abs(be),G.start=0,G.end=G.size}function Cr(N,G,X,re){for(var ce=0;ce<N.length;ce++){var ve=[];bi(N[ce],ve,X,re),G.push(ve)}}function xi(N){return N/360+.5}function on(N){var G=Math.sin(N*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function Kr(N,G,X,re,ce,ve,be,H){if(re/=G,ve>=(X/=G)&&be<re)return N;if(be<X||ve>=re)return null;for(var se=[],Se=0;Se<N.length;Se++){var Ne=N[Se],Ge=Ne.geometry,Le=Ne.type,qe=ce===0?Ne.minX:Ne.minY,pt=ce===0?Ne.maxX:Ne.maxY;if(qe>=X&&pt<re)se.push(Ne);else if(!(pt<X||qe>=re)){var at=[];if(Le==="Point"||Le==="MultiPoint")hr(Ge,at,X,re,ce);else if(Le==="LineString")jr(Ge,at,X,re,ce,!1,H.lineMetrics);else if(Le==="MultiLineString")jn(Ge,at,X,re,ce,!1);else if(Le==="Polygon")jn(Ge,at,X,re,ce,!0);else if(Le==="MultiPolygon")for(var Be=0;Be<Ge.length;Be++){var tt=[];jn(Ge[Be],tt,X,re,ce,!0),tt.length&&at.push(tt)}if(at.length){if(H.lineMetrics&&Le==="LineString"){for(Be=0;Be<at.length;Be++)se.push(Wt(Ne.id,Le,at[Be],Ne.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(at.length===1?(Le="LineString",at=at[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=at.length===3?"Point":"MultiPoint"),se.push(Wt(Ne.id,Le,at,Ne.tags))}}}return se.length?se:null}function hr(N,G,X,re,ce){for(var ve=0;ve<N.length;ve+=3){var be=N[ve+ce];be>=X&&be<=re&&(G.push(N[ve]),G.push(N[ve+1]),G.push(N[ve+2]))}}function jr(N,G,X,re,ce,ve,be){for(var H,se,Se=ea(N),Ne=ce===0?$o:ci,Ge=N.start,Le=0;Le<N.length-3;Le+=3){var qe=N[Le],pt=N[Le+1],at=N[Le+2],Be=N[Le+3],tt=N[Le+4],We=ce===0?qe:pt,Qe=ce===0?Be:tt,Ft=!1;be&&(H=Math.sqrt(Math.pow(qe-Be,2)+Math.pow(pt-tt,2))),We<X?Qe>X&&(se=Ne(Se,qe,pt,Be,tt,X),be&&(Se.start=Ge+H*se)):We>re?Qe<re&&(se=Ne(Se,qe,pt,Be,tt,re),be&&(Se.start=Ge+H*se)):Ra(Se,qe,pt,at),Qe<X&&We>=X&&(se=Ne(Se,qe,pt,Be,tt,X),Ft=!0),Qe>re&&We<=re&&(se=Ne(Se,qe,pt,Be,tt,re),Ft=!0),!ve&&Ft&&(be&&(Se.end=Ge+H*se),G.push(Se),Se=ea(N)),be&&(Ge+=H)}var Ze=N.length-3;qe=N[Ze],pt=N[Ze+1],at=N[Ze+2],(We=ce===0?qe:pt)>=X&&We<=re&&Ra(Se,qe,pt,at),Ze=Se.length-3,ve&&Ze>=3&&(Se[Ze]!==Se[0]||Se[Ze+1]!==Se[1])&&Ra(Se,Se[0],Se[1],Se[2]),Se.length&&G.push(Se)}function ea(N){var G=[];return G.size=N.size,G.start=N.start,G.end=N.end,G}function jn(N,G,X,re,ce,ve){for(var be=0;be<N.length;be++)jr(N[be],G,X,re,ce,ve,!1)}function Ra(N,G,X,re){N.push(G),N.push(X),N.push(re)}function $o(N,G,X,re,ce,ve){var be=(ve-G)/(re-G);return N.push(ve),N.push(X+(ce-X)*be),N.push(1),be}function ci(N,G,X,re,ce,ve){var be=(ve-X)/(ce-X);return N.push(G+(re-G)*be),N.push(ve),N.push(1),be}function sn(N,G){for(var X=[],re=0;re<N.length;re++){var ce,ve=N[re],be=ve.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")ce=bn(ve.geometry,G);else if(be==="MultiLineString"||be==="Polygon"){ce=[];for(var H=0;H<ve.geometry.length;H++)ce.push(bn(ve.geometry[H],G))}else if(be==="MultiPolygon")for(ce=[],H=0;H<ve.geometry.length;H++){for(var se=[],Se=0;Se<ve.geometry[H].length;Se++)se.push(bn(ve.geometry[H][Se],G));ce.push(se)}X.push(Wt(ve.id,be,ce,ve.tags))}return X}function bn(N,G){var X=[];X.size=N.size,N.start!==void 0&&(X.start=N.start,X.end=N.end);for(var re=0;re<N.length;re+=3)X.push(N[re]+G,N[re+1],N[re+2]);return X}function mo(N,G){if(N.transformed)return N;var X,re,ce,ve=1<<N.z,be=N.x,H=N.y;for(X=0;X<N.features.length;X++){var se=N.features[X],Se=se.geometry,Ne=se.type;if(se.geometry=[],Ne===1)for(re=0;re<Se.length;re+=2)se.geometry.push(ua(Se[re],Se[re+1],G,ve,be,H));else for(re=0;re<Se.length;re++){var Ge=[];for(ce=0;ce<Se[re].length;ce+=2)Ge.push(ua(Se[re][ce],Se[re][ce+1],G,ve,be,H));se.geometry.push(Ge)}}return N.transformed=!0,N}function ua(N,G,X,re,ce,ve){return[Math.round(X*(N*re-ce)),Math.round(X*(G*re-ve))]}function ll(N,G,X,re,ce){for(var ve=G===ce.maxZoom?0:ce.tolerance/((1<<G)*ce.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:X,y:re,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},H=0;H<N.length;H++){be.numFeatures++,es(be,N[H],ve,ce);var se=N[H].minX,Se=N[H].minY,Ne=N[H].maxX,Ge=N[H].maxY;se<be.minX&&(be.minX=se),Se<be.minY&&(be.minY=Se),Ne>be.maxX&&(be.maxX=Ne),Ge>be.maxY&&(be.maxY=Ge)}return be}function es(N,G,X,re){var ce=G.geometry,ve=G.type,be=[];if(ve==="Point"||ve==="MultiPoint")for(var H=0;H<ce.length;H+=3)be.push(ce[H]),be.push(ce[H+1]),N.numPoints++,N.numSimplified++;else if(ve==="LineString")Zn(be,ce,N,X,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(H=0;H<ce.length;H++)Zn(be,ce[H],N,X,ve==="Polygon",H===0);else if(ve==="MultiPolygon")for(var se=0;se<ce.length;se++){var Se=ce[se];for(H=0;H<Se.length;H++)Zn(be,Se[H],N,X,!0,H===0)}if(be.length){var Ne=G.tags||null;if(ve==="LineString"&&re.lineMetrics){for(var Ge in Ne={},G.tags)Ne[Ge]=G.tags[Ge];Ne.mapbox_clip_start=ce.start/ce.size,Ne.mapbox_clip_end=ce.end/ce.size}var Le={geometry:be,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Ne};G.id!==null&&(Le.id=G.id),N.features.push(Le)}}function Zn(N,G,X,re,ce,ve){var be=re*re;if(re>0&&G.size<(ce?be:re))X.numPoints+=G.length/3;else{for(var H=[],se=0;se<G.length;se+=3)(re===0||G[se+2]>be)&&(X.numSimplified++,H.push(G[se]),H.push(G[se+1])),X.numPoints++;ce&&function(Se,Ne){for(var Ge=0,Le=0,qe=Se.length,pt=qe-2;Le<qe;pt=Le,Le+=2)Ge+=(Se[Le]-Se[pt])*(Se[Le+1]+Se[pt+1]);if(Ge>0===Ne)for(Le=0,qe=Se.length;Le<qe/2;Le+=2){var at=Se[Le],Be=Se[Le+1];Se[Le]=Se[qe-2-Le],Se[Le+1]=Se[qe-1-Le],Se[qe-2-Le]=at,Se[qe-1-Le]=Be}}(H,ve),N.push(H)}}function xn(N,G){var X=(G=this.options=function(ce,ve){for(var be in ve)ce[be]=ve[be];return ce}(Object.create(this.options),G)).debug;if(X&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var re=function(ce,ve){var be=[];if(ce.type==="FeatureCollection")for(var H=0;H<ce.features.length;H++)Lr(be,ce.features[H],ve,H);else Lr(be,ce.type==="Feature"?ce:{geometry:ce},ve);return be}(N,G);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(re=function(ce,ve){var be=ve.buffer/ve.extent,H=ce,se=Kr(ce,1,-1-be,be,0,-1,2,ve),Se=Kr(ce,1,1-be,2+be,0,-1,2,ve);return(se||Se)&&(H=Kr(ce,1,-be,1+be,0,-1,2,ve)||[],se&&(H=sn(se,1).concat(H)),Se&&(H=H.concat(sn(Se,-1)))),H}(re,G)).length&&this.splitTile(re,0,0,0),X&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ca(N,G,X){return 32*((1<<N)*X+G)+N}function ta(N,G){var X=N.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);var re=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!re)return G(null,null);var ce=new mt(re.features),ve=kt(ce);ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),G(null,{vectorTile:ce,rawData:ve.buffer})}ri.prototype.load=function(N){var G=this.options,X=G.log,re=G.minZoom,ce=G.maxZoom,ve=G.nodeSize;X&&console.time("total time");var be="prepare "+N.length+" points";X&&console.time(be),this.points=N;for(var H=[],se=0;se<N.length;se++)N[se].geometry&&H.push(br(N[se],se));this.trees[ce+1]=new Mi(H,Ni,ui,ve,Float32Array),X&&console.timeEnd(be);for(var Se=ce;Se>=re;Se--){var Ne=+Date.now();H=this._cluster(H,Se),this.trees[Se]=new Mi(H,Ni,ui,ve,Float32Array),X&&console.log("z%d: %d clusters in %dms",Se,H.length,+Date.now()-Ne)}return X&&console.timeEnd("total time"),this},ri.prototype.getClusters=function(N,G){var X=((N[0]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,N[1])),ce=N[2]===180?180:((N[2]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)X=-180,ce=180;else if(X>ce){var be=this.getClusters([X,re,180,ve],G),H=this.getClusters([-180,re,ce,ve],G);return be.concat(H)}for(var se=this.trees[this._limitZoom(G)],Se=[],Ne=0,Ge=se.range(qr(X),Lt(ve),qr(ce),Lt(re));Ne<Ge.length;Ne+=1){var Le=se.points[Ge[Ne]];Se.push(Le.numPoints?qn(Le):this.points[Le.index])}return Se},ri.prototype.getChildren=function(N){var G=this._getOriginId(N),X=this._getOriginZoom(N),re="No cluster with the specified id.",ce=this.trees[X];if(!ce)throw new Error(re);var ve=ce.points[G];if(!ve)throw new Error(re);for(var be=this.options.radius/(this.options.extent*Math.pow(2,X-1)),H=[],se=0,Se=ce.within(ve.x,ve.y,be);se<Se.length;se+=1){var Ne=ce.points[Se[se]];Ne.parentId===N&&H.push(Ne.numPoints?qn(Ne):this.points[Ne.index])}if(H.length===0)throw new Error(re);return H},ri.prototype.getLeaves=function(N,G,X){var re=[];return this._appendLeaves(re,N,G=G||10,X=X||0,0),re},ri.prototype.getTile=function(N,G,X){var re=this.trees[this._limitZoom(N)],ce=Math.pow(2,N),ve=this.options,be=ve.radius/ve.extent,H=(X-be)/ce,se=(X+1+be)/ce,Se={features:[]};return this._addTileFeatures(re.range((G-be)/ce,H,(G+1+be)/ce,se),re.points,G,X,ce,Se),G===0&&this._addTileFeatures(re.range(1-be/ce,H,1,se),re.points,ce,X,ce,Se),G===ce-1&&this._addTileFeatures(re.range(0,H,be/ce,se),re.points,-1,X,ce,Se),Se.features.length?Se:null},ri.prototype.getClusterExpansionZoom=function(N){for(var G=this._getOriginZoom(N)-1;G<=this.options.maxZoom;){var X=this.getChildren(N);if(G++,X.length!==1)break;N=X[0].properties.cluster_id}return G},ri.prototype._appendLeaves=function(N,G,X,re,ce){for(var ve=0,be=this.getChildren(G);ve<be.length;ve+=1){var H=be[ve],se=H.properties;if(se&&se.cluster?ce+se.point_count<=re?ce+=se.point_count:ce=this._appendLeaves(N,se.cluster_id,X,re,ce):ce<re?ce++:N.push(H),N.length===X)break}return ce},ri.prototype._addTileFeatures=function(N,G,X,re,ce,ve){for(var be=0,H=N;be<H.length;be+=1){var se=G[H[be]],Se=se.numPoints,Ne={type:1,geometry:[[Math.round(this.options.extent*(se.x*ce-X)),Math.round(this.options.extent*(se.y*ce-re))]],tags:Se?Ya(se):this.points[se.index].properties},Ge=void 0;Se?Ge=se.id:this.options.generateId?Ge=se.index:this.points[se.index].id&&(Ge=this.points[se.index].id),Ge!==void 0&&(Ne.id=Ge),ve.features.push(Ne)}},ri.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},ri.prototype._cluster=function(N,G){for(var X=[],re=this.options,ce=re.reduce,ve=re.minPoints,be=re.radius/(re.extent*Math.pow(2,G)),H=0;H<N.length;H++){var se=N[H];if(!(se.zoom<=G)){se.zoom=G;for(var Se=this.trees[G+1],Ne=Se.within(se.x,se.y,be),Ge=se.numPoints||1,Le=Ge,qe=0,pt=Ne;qe<pt.length;qe+=1){var at=Se.points[pt[qe]];at.zoom>G&&(Le+=at.numPoints||1)}if(Le>=ve){for(var Be=se.x*Ge,tt=se.y*Ge,We=ce&&Ge>1?this._map(se,!0):null,Qe=(H<<5)+(G+1)+this.points.length,Ft=0,Ze=Ne;Ft<Ze.length;Ft+=1){var Gt=Se.points[Ze[Ft]];if(!(Gt.zoom<=G)){Gt.zoom=G;var sr=Gt.numPoints||1;Be+=Gt.x*sr,tt+=Gt.y*sr,Gt.parentId=Qe,ce&&(We||(We=this._map(se,!0)),ce(We,this._map(Gt)))}}se.parentId=Qe,X.push(Ia(Be/Le,tt/Le,Qe,Le,We))}else if(X.push(se),Le>1)for(var Pt=0,Qt=Ne;Pt<Qt.length;Pt+=1){var Jt=Se.points[Qt[Pt]];Jt.zoom<=G||(Jt.zoom=G,X.push(Jt))}}}return X},ri.prototype._getOriginId=function(N){return N-this.points.length>>5},ri.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},ri.prototype._map=function(N,G){if(N.numPoints)return G?Yi({},N.properties):N.properties;var X=this.points[N.index].properties,re=this.options.map(X);return G&&re===X?Yi({},re):re},xn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xn.prototype.splitTile=function(N,G,X,re,ce,ve,be){for(var H=[N,G,X,re],se=this.options,Se=se.debug;H.length;){re=H.pop(),X=H.pop(),G=H.pop(),N=H.pop();var Ne=1<<G,Ge=ca(G,X,re),Le=this.tiles[Ge];if(!Le&&(Se>1&&console.time("creation"),Le=this.tiles[Ge]=ll(N,G,X,re,se),this.tileCoords.push({z:G,x:X,y:re}),Se)){Se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,X,re,Le.numFeatures,Le.numPoints,Le.numSimplified),console.timeEnd("creation"));var qe="z"+G;this.stats[qe]=(this.stats[qe]||0)+1,this.total++}if(Le.source=N,ce){if(G===se.maxZoom||G===ce)continue;var pt=1<<ce-G;if(X!==Math.floor(ve/pt)||re!==Math.floor(be/pt))continue}else if(G===se.indexMaxZoom||Le.numPoints<=se.indexMaxPoints)continue;if(Le.source=null,N.length!==0){Se>1&&console.time("clipping");var at,Be,tt,We,Qe,Ft,Ze=.5*se.buffer/se.extent,Gt=.5-Ze,sr=.5+Ze,Pt=1+Ze;at=Be=tt=We=null,Qe=Kr(N,Ne,X-Ze,X+sr,0,Le.minX,Le.maxX,se),Ft=Kr(N,Ne,X+Gt,X+Pt,0,Le.minX,Le.maxX,se),N=null,Qe&&(at=Kr(Qe,Ne,re-Ze,re+sr,1,Le.minY,Le.maxY,se),Be=Kr(Qe,Ne,re+Gt,re+Pt,1,Le.minY,Le.maxY,se),Qe=null),Ft&&(tt=Kr(Ft,Ne,re-Ze,re+sr,1,Le.minY,Le.maxY,se),We=Kr(Ft,Ne,re+Gt,re+Pt,1,Le.minY,Le.maxY,se),Ft=null),Se>1&&console.timeEnd("clipping"),H.push(at||[],G+1,2*X,2*re),H.push(Be||[],G+1,2*X,2*re+1),H.push(tt||[],G+1,2*X+1,2*re),H.push(We||[],G+1,2*X+1,2*re+1)}}},xn.prototype.getTile=function(N,G,X){var re=this.options,ce=re.extent,ve=re.debug;if(N<0||N>24)return null;var be=1<<N,H=ca(N,G=(G%be+be)%be,X);if(this.tiles[H])return mo(this.tiles[H],ce);ve>1&&console.log("drilling down to z%d-%d-%d",N,G,X);for(var se,Se=N,Ne=G,Ge=X;!se&&Se>0;)Se--,Ne=Math.floor(Ne/2),Ge=Math.floor(Ge/2),se=this.tiles[ca(Se,Ne,Ge)];return se&&se.source?(ve>1&&console.log("found parent tile z%d-%d-%d",Se,Ne,Ge),ve>1&&console.time("drilling down"),this.splitTile(se.source,Se,Ne,Ge,N,G,X),ve>1&&console.timeEnd("drilling down"),this.tiles[H]?mo(this.tiles[H],ce):null):null};var ha=function(N){function G(X,re,ce,ve){N.call(this,X,re,ce,ta),ve&&(this.loadGeoJSON=ve)}return N&&(G.__proto__=N),(G.prototype=Object.create(N&&N.prototype)).constructor=G,G.prototype.loadData=function(X,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=re,this._pendingLoadDataParams=X,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},G.prototype._loadData=function(){var X=this;if(this._pendingCallback&&this._pendingLoadDataParams){var re=this._pendingCallback,ce=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ve=!!(ce&&ce.request&&ce.request.collectResourceTiming)&&new o.RequestPerformance(ce.request);this.loadGeoJSON(ce,function(be,H){if(be||!H)return re(be);if(typeof H!="object")return re(new Error("Input data given to '"+ce.source+"' is not a valid GeoJSON object."));(function Le(qe,pt){var at,Be=qe&&qe.type;if(Be==="FeatureCollection")for(at=0;at<qe.features.length;at++)Le(qe.features[at],pt);else if(Be==="GeometryCollection")for(at=0;at<qe.geometries.length;at++)Le(qe.geometries[at],pt);else if(Be==="Feature")Le(qe.geometry,pt);else if(Be==="Polygon")Oe(qe.coordinates,pt);else if(Be==="MultiPolygon")for(at=0;at<qe.coordinates.length;at++)Oe(qe.coordinates[at],pt);return qe})(H,!0);try{if(ce.filter){var se=o.createExpression(ce.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(function(Le){return Le.key+": "+Le.message}).join(", "));var Se=H.features.filter(function(Le){return se.value.evaluate({zoom:0},Le)});H={type:"FeatureCollection",features:Se}}X._geoJSONIndex=ce.cluster?new ri(function(Le){var qe=Le.superclusterOptions,pt=Le.clusterProperties;if(!pt||!qe)return qe;for(var at={},Be={},tt={accumulated:null,zoom:0},We={properties:null},Qe=Object.keys(pt),Ft=0,Ze=Qe;Ft<Ze.length;Ft+=1){var Gt=Ze[Ft],sr=pt[Gt],Pt=sr[0],Qt=o.createExpression(sr[1]),Jt=o.createExpression(typeof Pt=="string"?[Pt,["accumulated"],["get",Gt]]:Pt);at[Gt]=Qt.value,Be[Gt]=Jt.value}return qe.map=function(Li){We.properties=Li;for(var $t={},mr=0,pr=Qe;mr<pr.length;mr+=1){var Xt=pr[mr];$t[Xt]=at[Xt].evaluate(tt,We)}return $t},qe.reduce=function(Li,$t){We.properties=$t;for(var mr=0,pr=Qe;mr<pr.length;mr+=1){var Xt=pr[mr];tt.accumulated=Li[Xt],Li[Xt]=Be[Xt].evaluate(tt,We)}},qe}(ce)).load(H.features):function(Le,qe){return new xn(Le,qe)}(H,ce.geojsonVtOptions)}catch(Le){return re(Le)}X.loaded={};var Ne={};if(ve){var Ge=ve.finish();Ge&&(Ne.resourceTiming={},Ne.resourceTiming[ce.source]=JSON.parse(JSON.stringify(Ge)))}re(null,Ne)})}},G.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},G.prototype.reloadTile=function(X,re){var ce=this.loaded;return ce&&ce[X.uid]?N.prototype.reloadTile.call(this,X,re):this.loadTile(X,re)},G.prototype.loadGeoJSON=function(X,re){if(X.request)o.getJSON(X.request,re);else{if(typeof X.data!="string")return re(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."));try{return re(null,JSON.parse(X.data))}catch{return re(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."))}}},G.prototype.removeSource=function(X,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),re()},G.prototype.getClusterExpansionZoom=function(X,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(ce){re(ce)}},G.prototype.getClusterChildren=function(X,re){try{re(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(ce){re(ce)}},G.prototype.getClusterLeaves=function(X,re){try{re(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(ce){re(ce)}},G}(he),Zr=function(N){var G=this;this.self=N,this.actor=new o.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:he,geojson:ha},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(X,re){if(G.workerSourceTypes[X])throw new Error('Worker source with name "'+X+'" already registered.');G.workerSourceTypes[X]=re},this.self.registerRTLTextPlugin=function(X){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=X.applyArabicShaping,o.plugin.processBidirectionalText=X.processBidirectionalText,o.plugin.processStyledBidirectionalText=X.processStyledBidirectionalText}};return Zr.prototype.setReferrer=function(N,G){this.referrer=G},Zr.prototype.setImages=function(N,G,X){for(var re in this.availableImages[N]=G,this.workerSources[N]){var ce=this.workerSources[N][re];for(var ve in ce)ce[ve].availableImages=G}X()},Zr.prototype.setLayers=function(N,G,X){this.getLayerIndex(N).replace(G),X()},Zr.prototype.updateLayers=function(N,G,X){this.getLayerIndex(N).update(G.layers,G.removedIds),X()},Zr.prototype.loadTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).loadTile(G,X)},Zr.prototype.loadDEMTile=function(N,G,X){this.getDEMWorkerSource(N,G.source).loadTile(G,X)},Zr.prototype.reloadTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).reloadTile(G,X)},Zr.prototype.abortTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).abortTile(G,X)},Zr.prototype.removeTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).removeTile(G,X)},Zr.prototype.removeDEMTile=function(N,G){this.getDEMWorkerSource(N,G.source).removeTile(G)},Zr.prototype.removeSource=function(N,G,X){if(this.workerSources[N]&&this.workerSources[N][G.type]&&this.workerSources[N][G.type][G.source]){var re=this.workerSources[N][G.type][G.source];delete this.workerSources[N][G.type][G.source],re.removeSource!==void 0?re.removeSource(G,X):X()}},Zr.prototype.loadWorkerSource=function(N,G,X){try{this.self.importScripts(G.url),X()}catch(re){X(re.toString())}},Zr.prototype.syncRTLPluginState=function(N,G,X){try{o.plugin.setState(G);var re=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&re!=null){this.self.importScripts(re);var ce=o.plugin.isParsed();X(ce?void 0:new Error("RTL Text Plugin failed to import scripts from "+re),ce)}}catch(ve){X(ve.toString())}},Zr.prototype.getAvailableImages=function(N){var G=this.availableImages[N];return G||(G=[]),G},Zr.prototype.getLayerIndex=function(N){var G=this.layerIndexes[N];return G||(G=this.layerIndexes[N]=new F),G},Zr.prototype.getWorkerSource=function(N,G,X){var re=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][G]||(this.workerSources[N][G]={}),this.workerSources[N][G][X]||(this.workerSources[N][G][X]=new this.workerSourceTypes[G]({send:function(ce,ve,be){re.actor.send(ce,ve,be,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][G][X]},Zr.prototype.getDEMWorkerSource=function(N,G){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][G]||(this.demWorkerSources[N][G]=new we),this.demWorkerSources[N][G]},Zr.prototype.enforceCacheSizeLimit=function(N,G){o.enforceCacheSizeLimit(G)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Zr(self)),Zr}),_(["./shared"],function(o){var z=o.createCommonjsModule(function(n){function s(m){return!a(m)}function a(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,A,B=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(B);try{A=new Worker(Z),k=!0}catch{k=!1}return A&&A.terminate(),URL.revokeObjectURL(Z),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var A=k.getContext("2d");if(!A)return!1;var B=A.getImageData(0,0,1,1);return B&&B.width===k.width}()?(c[E=m&&m.failIfMajorPerformanceCaveat]===void 0&&(c[E]=function(k){var A=function(Z){var Y=document.createElement("canvas"),Q=Object.create(s.webGLContextAttributes);return Q.failIfMajorPerformanceCaveat=Z,Y.probablySupportsContext?Y.probablySupportsContext("webgl",Q)||Y.probablySupportsContext("experimental-webgl",Q):Y.supportsContext?Y.supportsContext("webgl",Q)||Y.supportsContext("experimental-webgl",Q):Y.getContext("webgl",Q)||Y.getContext("experimental-webgl",Q)}(k);if(!A)return!1;var B=A.createShader(A.VERTEX_SHADER);return!(!B||A.isContextLost())&&(A.shaderSource(B,"void main() {}"),A.compileShader(B),A.getShaderParameter(B,A.COMPILE_STATUS)===!0)}(E)),c[E]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var E}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),P={create:function(n,s,a){var c=o.window.document.createElement(n);return s!==void 0&&(c.className=s),a&&a.appendChild(c),c},createNS:function(n,s){return o.window.document.createElementNS(n,s)}},F=o.window.document&&o.window.document.documentElement.style;function V(n){if(!F)return n[0];for(var s=0;s<n.length;s++)if(n[s]in F)return n[s];return n[0]}var j,U=V(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);P.disableDrag=function(){F&&U&&(j=F[U],F[U]="none")},P.enableDrag=function(){F&&U&&(F[U]=j)};var pe=V(["transform","WebkitTransform"]);P.setTransform=function(n,s){n.style[pe]=s};var he=!1;try{var Ie=Object.defineProperty({},"passive",{get:function(){he=!0}});o.window.addEventListener("test",Ie,Ie),o.window.removeEventListener("test",Ie,Ie)}catch{he=!1}P.addEventListener=function(n,s,a,c){c===void 0&&(c={}),n.addEventListener(s,a,"passive"in c&&he?c:c.capture)},P.removeEventListener=function(n,s,a,c){c===void 0&&(c={}),n.removeEventListener(s,a,"passive"in c&&he?c:c.capture)};var we=function(n){n.preventDefault(),n.stopPropagation(),o.window.removeEventListener("click",we,!0)};function Oe(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}P.suppressClick=function(){o.window.addEventListener("click",we,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",we,!0)},0)},P.mousePos=function(n,s){var a=n.getBoundingClientRect();return new o.Point(s.clientX-a.left-n.clientLeft,s.clientY-a.top-n.clientTop)},P.touchPos=function(n,s){for(var a=n.getBoundingClientRect(),c=[],m=0;m<s.length;m++)c.push(new o.Point(s[m].clientX-a.left-n.clientLeft,s[m].clientY-a.top-n.clientTop));return c},P.mouseButton=function(n){return o.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},P.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Ue=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var c=0,m=this.requestors;c<m.length;c+=1){var E=m[c];this._notify(E.ids,E.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,c){this._validate(a,c)&&(this.images[a]=c)},s.prototype._validate=function(a,c){var m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(c.content,c)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(a,c){if(!a)return!0;for(var m=0,E=0,k=a;E<k.length;E+=1){var A=k[E];if(A[0]<m||A[1]<A[0]||c<A[1])return!1;m=A[1]}return!0},s.prototype._validateContent=function(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,c){c.version=this.images[a].version+1,this.images[a]=c,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,c){var m=!0;if(!this.isLoaded())for(var E=0,k=a;E<k.length;E+=1)this.images[k[E]]||(m=!1);this.isLoaded()||m?this._notify(a,c):this.requestors.push({ids:a,callback:c})},s.prototype._notify=function(a,c){for(var m={},E=0,k=a;E<k.length;E+=1){var A=k[E];this.images[A]||this.fire(new o.Event("styleimagemissing",{id:A}));var B=this.images[A];B?m[A]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:o.warnOnce('Image "'+A+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,m)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var c=this.patterns[a],m=this.getImage(a);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{var E={w:m.data.width+2,h:m.data.height+2,x:0,y:0},k=new o.ImagePosition(E,m);this.patterns[a]={bin:E,position:k}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var c in this.patterns)a.push(this.patterns[c].bin);var m=o.potpack(a),E=m.w,k=m.h,A=this.atlasImage;for(var B in A.resize({width:E||1,height:k||1}),this.patterns){var Z=this.patterns[B].bin,Y=Z.x+1,Q=Z.y+1,$=this.images[B].data,ue=$.width,ae=$.height;o.RGBAImage.copy($,A,{x:0,y:0},{x:Y,y:Q},{width:ue,height:ae}),o.RGBAImage.copy($,A,{x:0,y:ae-1},{x:Y,y:Q-1},{width:ue,height:1}),o.RGBAImage.copy($,A,{x:0,y:0},{x:Y,y:Q+ae},{width:ue,height:1}),o.RGBAImage.copy($,A,{x:ue-1,y:0},{x:Y-1,y:Q},{width:1,height:ae}),o.RGBAImage.copy($,A,{x:0,y:0},{x:Y+ue,y:Q},{width:1,height:ae})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var c=0,m=a;c<m.length;c+=1){var E=m[c];if(!this.callbackDispatchedThisFrame[E]){this.callbackDispatchedThisFrame[E]=!0;var k=this.images[E];Oe(k)&&this.updateImage(E,k)}}},s}(o.Evented),Bt=Je,Mt=Je,mt=1e20;function Je(n,s,a,c,m,E){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=m||"sans-serif",this.fontWeight=E||"normal",this.radius=a||8;var k=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=k,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.d=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Int16Array(k),this.middle=Math.round(k/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Tr(n,s,a,c,m,E,k){for(var A=0;A<s;A++){for(var B=0;B<a;B++)c[B]=n[B*s+A];for(wr(c,m,E,k,a),B=0;B<a;B++)n[B*s+A]=m[B]}for(B=0;B<a;B++){for(A=0;A<s;A++)c[A]=n[B*s+A];for(wr(c,m,E,k,s),A=0;A<s;A++)n[B*s+A]=Math.sqrt(m[A])}}function wr(n,s,a,c,m){a[0]=0,c[0]=-mt,c[1]=+mt;for(var E=1,k=0;E<m;E++){for(var A=(n[E]+E*E-(n[a[k]]+a[k]*a[k]))/(2*E-2*a[k]);A<=c[k];)k--,A=(n[E]+E*E-(n[a[k]]+a[k]*a[k]))/(2*E-2*a[k]);a[++k]=E,c[k]=A,c[k+1]=+mt}for(E=0,k=0;E<m;E++){for(;c[k+1]<E;)k++;s[E]=(E-a[k])*(E-a[k])+n[a[k]]}}Je.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var m=s.data[4*c+3]/255;this.gridOuter[c]=m===1?0:m===0?mt:Math.pow(Math.max(0,.5-m),2),this.gridInner[c]=m===1?mt:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(Tr(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Tr(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a},Bt.default=Mt;var or=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};or.prototype.setURL=function(n){this.url=n},or.prototype.getGlyphs=function(n,s){var a=this,c=[];for(var m in n)for(var E=0,k=n[m];E<k.length;E+=1)c.push({stack:m,id:k[E]});o.asyncAll(c,function(A,B){var Z=A.stack,Y=A.id,Q=a.entries[Z];Q||(Q=a.entries[Z]={glyphs:{},requests:{},ranges:{}});var $=Q.glyphs[Y];if($===void 0){if($=a._tinySDF(Q,Z,Y))return Q.glyphs[Y]=$,void B(null,{stack:Z,id:Y,glyph:$});var ue=Math.floor(Y/256);if(256*ue>65535)B(new Error("glyphs > 65535 not supported"));else if(Q.ranges[ue])B(null,{stack:Z,id:Y,glyph:$});else{var ae=Q.requests[ue];ae||(ae=Q.requests[ue]=[],or.loadGlyphRange(Z,ue,a.url,a.requestManager,function(de,oe){if(oe){for(var me in oe)a._doesCharSupportLocalGlyph(+me)||(Q.glyphs[+me]=oe[+me]);Q.ranges[ue]=!0}for(var xe=0,Te=ae;xe<Te.length;xe+=1)(0,Te[xe])(de,oe);delete Q.requests[ue]})),ae.push(function(de,oe){de?B(de):oe&&B(null,{stack:Z,id:Y,glyph:oe[Y]||null})})}}else B(null,{stack:Z,id:Y,glyph:$})},function(A,B){if(A)s(A);else if(B){for(var Z={},Y=0,Q=B;Y<Q.length;Y+=1){var $=Q[Y],ue=$.stack,ae=$.id,de=$.glyph;(Z[ue]||(Z[ue]={}))[ae]=de&&{id:de.id,bitmap:de.bitmap.clone(),metrics:de.metrics}}s(null,Z)}})},or.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](n)||o.isChar["Hangul Syllables"](n)||o.isChar.Hiragana(n)||o.isChar.Katakana(n))},or.prototype._tinySDF=function(n,s,a){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(a)){var m=n.tinySDF;if(!m){var E="400";/bold/i.test(s)?E="900":/medium/i.test(s)?E="500":/light/i.test(s)&&(E="200"),m=n.tinySDF=new or.TinySDF(24,3,8,.25,c,E)}return{id:a,bitmap:new o.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},or.loadGlyphRange=function(n,s,a,c,m){var E=256*s,k=E+255,A=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",n).replace("{range}",E+"-"+k),o.ResourceType.Glyphs);o.getArrayBuffer(A,function(B,Z){if(B)m(B);else if(Z){for(var Y={},Q=0,$=o.parseGlyphPBF(Z);Q<$.length;Q+=1){var ue=$[Q];Y[ue.id]=ue}m(null,Y)}})},or.TinySDF=Bt;var kt=function(){this.specification=o.styleSpec.light.position};kt.prototype.possiblyEvaluate=function(n,s){return o.sphericalToCartesian(n.expression.evaluate(s))},kt.prototype.interpolate=function(n,s,a){return{x:o.number(n.x,s.x,a),y:o.number(n.y,s.y,a),z:o.number(n.z,s.z,a)}};var At=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new kt,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Pr=function(n){function s(a){n.call(this),this._transitionable=new o.Transitionable(At),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,c){if(c===void 0&&(c={}),!this._validate(o.validateLight,a,c))for(var m in a){var E=a[m];o.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),E):this._transitionable.setValue(m,E)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,c,m){return(!m||m.validate!==!1)&&o.emitValidationErrors(this,a.call(o.validateStyle,o.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},s}(o.Evented),Ot=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ot.prototype.getDash=function(n,s){var a=n.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(n,s)),this.dashEntry[a]},Ot.prototype.getDashRanges=function(n,s,a){var c=[],m=n.length%2==1?-n[n.length-1]*a:0,E=n[0]*a,k=!0;c.push({left:m,right:E,isDash:k,zeroLength:n[0]===0});for(var A=n[0],B=1;B<n.length;B++){var Z=n[B];c.push({left:m=A*a,right:E=(A+=Z)*a,isDash:k=!k,zeroLength:Z===0})}return c},Ot.prototype.addRoundDash=function(n,s,a){for(var c=s/2,m=-a;m<=a;m++)for(var E=this.width*(this.nextRow+a+m),k=0,A=n[k],B=0;B<this.width;B++){B/A.right>1&&(A=n[++k]);var Z=Math.abs(B-A.left),Y=Math.abs(B-A.right),Q=Math.min(Z,Y),$=void 0,ue=m/a*(c+1);if(A.isDash){var ae=c-Math.abs(ue);$=Math.sqrt(Q*Q+ae*ae)}else $=c-Math.sqrt(Q*Q+ue*ue);this.data[E+B]=Math.max(0,Math.min(255,$+128))}},Ot.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var a=n[s],c=n[s+1];a.zeroLength?n.splice(s,1):c&&c.isDash===a.isDash&&(c.left=a.left,n.splice(s,1))}var m=n[0],E=n[n.length-1];m.isDash===E.isDash&&(m.left=E.left-this.width,E.right=m.right+this.width);for(var k=this.width*this.nextRow,A=0,B=n[A],Z=0;Z<this.width;Z++){Z/B.right>1&&(B=n[++A]);var Y=Math.abs(Z-B.left),Q=Math.abs(Z-B.right),$=Math.min(Y,Q);this.data[k+Z]=Math.max(0,Math.min(255,(B.isDash?$:-$)+128))}},Ot.prototype.addDash=function(n,s){var a=s?7:0,c=2*a+1;if(this.nextRow+c>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var m=0,E=0;E<n.length;E++)m+=n[E];if(m!==0){var k=this.width/m,A=this.getDashRanges(n,this.width,k);s?this.addRoundDash(A,k,a):this.addRegularDash(A)}var B={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=c,this.dirty=!0,B},Ot.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var Ar=function n(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var c=this.workerPool.acquire(this.id),m=0;m<c.length;m++){var E=new n.Actor(c[m],a,this.id);E.name="Worker "+m,this.actors.push(E)}};function rt(n,s,a){var c=function(m,E){if(m)return a(m);if(E){var k=o.pick(o.extend(E,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(k.vectorLayers=E.vector_layers,k.vectorLayerIds=k.vectorLayers.map(function(A){return A.id})),k.tiles=s.canonicalizeTileset(k,n.url),a(null,k)}};return n.url?o.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),o.ResourceType.Source),c):o.browser.frame(function(){return c(null,n)})}Ar.prototype.broadcast=function(n,s,a){o.asyncAll(this.actors,function(c,m){c.send(n,s,m)},a=a||function(){})},Ar.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ar.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},Ar.Actor=o.Actor;var ur=function(n,s,a){this.bounds=o.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=a||24};ur.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},ur.prototype.contains=function(n){var s=Math.pow(2,n.z),a=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*s),E=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=a&&n.x<m&&n.y>=c&&n.y<E};var $r=function(n){function s(a,c,m,E){if(n.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(c,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=rt(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new ur(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var c=this;return this.setSourceProperty(function(){c._options.tiles=a}),this},s.prototype.setUrl=function(a){var c=this;return this.setSourceProperty(function(){c.url=a,c._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(m,o.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function k(A,B){return delete a.request,a.aborted?c(null):A&&A.status!==404?c(A):(B&&B.resourceTiming&&(a.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&a.setExpiryData(B),a.loadVectorData(B,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",E,k.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",E,k.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(o.Evented),li=function(n){function s(a,c,m,E){n.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},c),o.extend(this,o.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=rt(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new ur(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,c){var m=this,E=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=o.getImage(this.map._requestManager.transformRequest(E,o.ResourceType.Tile),function(k,A){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(k)a.state="errored",c(k);else if(A){m.map._refreshExpiredTiles&&a.setExpiryData(A),delete A.cacheControl,delete A.expires;var B=m.map.painter.context,Z=B.gl;a.texture=m.map.painter.getTileTexture(A.width),a.texture?a.texture.update(A,{useMipmap:!0}):(a.texture=new o.Texture(B,A,Z.RGBA,{useMipmap:!0}),a.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&Z.texParameterf(Z.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),a.state="loaded",o.cacheEntryPossiblyAdded(m.dispatcher),c(null)}})},s.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request),c()},s.prototype.unloadTile=function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture),c()},s.prototype.hasTransition=function(){return!1},s}(o.Evented),kr=function(n){function s(a,c,m,E){n.call(this,a,c,m,E),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function E(k,A){k&&(a.state="errored",c(k)),A&&(a.dem=A,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}a.request=o.getImage(this.map._requestManager.transformRequest(m,o.ResourceType.Tile),function(k,A){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(k)a.state="errored",c(k);else if(A){this.map._refreshExpiredTiles&&a.setExpiryData(A),delete A.cacheControl,delete A.expires;var B=o.window.ImageBitmap&&A instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?A:o.browser.getImageData(A,1),Z={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:B,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",Z,E.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var c=a.canonical,m=Math.pow(2,c.z),E=(c.x-1+m)%m,k=c.x===0?a.wrap-1:a.wrap,A=(c.x+1+m)%m,B=c.x+1===m?a.wrap+1:a.wrap,Z={};return Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,E,c.y).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,E,c.y-1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<m&&(Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,E,c.y+1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,A,c.y+1).key]={backfilled:!1}),Z},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(li),vt=function(n){function s(a,c,m,E){n.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(E),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var k=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*k,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*k,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius||50)*k,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)a.fire(new o.ErrorEvent(c));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new o.Event("data",m))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new o.ErrorEvent(m));else{var E={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(E.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new o.Event("data",E))}}),this},s.prototype.getClusterExpansionZoom=function(a,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c),this},s.prototype.getClusterChildren=function(a,c){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},c),this},s.prototype.getClusterLeaves=function(a,c,m,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:m},E),this},s.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var m=o.extend({},this.workerOptions),E=this._data;typeof E=="string"?(m.request=this.map._requestManager.transformRequest(o.browser.resolveURL(E),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(E),this.actor.send(this.type+".loadData",m,function(k,A){c._removed||A&&A.abandoned||(c._loaded=!0,A&&A.resourceTiming&&A.resourceTiming[c.id]&&(c._resourceTiming=A.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:m.source},null),a(k))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,c){var m=this,E=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(E,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(k,A){return delete a.request,a.unloadVectorData(),a.aborted?c(null):k?c(k):(a.loadVectorData(A,m.map.painter,E==="reloadTile"),c(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(o.Evented),nt=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),dr=function(n){function s(a,c,m,E){n.call(this),this.id=a,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(a,c){var m=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(E,k){m._loaded=!0,E?m.fire(new o.ErrorEvent(E)):k&&(m.image=k,a&&(m.coordinates=a),c&&c(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;var m=a.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(k){for(var A=1/0,B=1/0,Z=-1/0,Y=-1/0,Q=0,$=k;Q<$.length;Q+=1){var ue=$[Q];A=Math.min(A,ue.x),B=Math.min(B,ue.y),Z=Math.max(Z,ue.x),Y=Math.max(Y,ue.y)}var ae=Math.max(Z-A,Y-B),de=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),oe=Math.pow(2,de);return new o.CanonicalTileID(de,Math.floor((A+Z)/2*oe),Math.floor((B+Y)/2*oe))}(m),this.minzoom=this.maxzoom=this.tileID.z;var E=m.map(function(k){return c.tileID.getTilePoint(k)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(E[0].x,E[0].y,0,0),this._boundsArray.emplaceBack(E[1].x,E[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(E[3].x,E[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(E[2].x,E[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(o.Evented),Un=function(n){function s(a,c,m,E){n.call(this,a,c,m,E),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];for(var m=0,E=c.urls;m<E.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(E[m],o.ResourceType.Source).url);o.getVideo(this.urls,function(k,A){a._loaded=!0,k?a.fire(new o.ErrorEvent(k)):A&&(a.video=A,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(dr),la=function(n){function s(a,c,m,E){n.call(this,a,c,m,E),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(k){return!Array.isArray(k)||k.length!==2||k.some(function(A){return typeof A!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,m=c.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var k=this.tiles[E];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var m=c[a];if(isNaN(m)||m<=0)return!0}return!1},s}(dr),Mi={vector:$r,raster:li,"raster-dem":kr,geojson:vt,video:Un,image:dr,canvas:la};function _n(n,s){var a=o.identity([]);return o.translate(a,a,[1,1,0]),o.scale(a,a,[.5*n.width,.5*n.height,1]),o.multiply(a,a,n.calculatePosMatrix(s.toUnwrapped()))}function ri(n,s,a,c,m,E){var k=function(de,oe,me){if(de)for(var xe=0,Te=de;xe<Te.length;xe+=1){var Re=oe[Te[xe]];if(Re&&Re.source===me&&Re.type==="fill-extrusion")return!0}else for(var Me in oe){var Ve=oe[Me];if(Ve.source===me&&Ve.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),A=E.maxPitchScaleFactor(),B=n.tilesIn(c,A,k);B.sort(Ia);for(var Z=[],Y=0,Q=B;Y<Q.length;Y+=1){var $=Q[Y];Z.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(s,a,n._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,m,E,A,_n(n.transform,$.tileID))})}var ue=function(de){for(var oe={},me={},xe=0,Te=de;xe<Te.length;xe+=1){var Re=Te[xe],Me=Re.queryResults,Ve=Re.wrappedTileID,je=me[Ve]=me[Ve]||{};for(var He in Me)for(var Xe=Me[He],ht=je[He]=je[He]||{},yt=oe[He]=oe[He]||[],It=0,Et=Xe;It<Et.length;It+=1){var rr=Et[It];ht[rr.featureIndex]||(ht[rr.featureIndex]=!0,yt.push(rr))}}return oe}(Z);for(var ae in ue)ue[ae].forEach(function(de){var oe=de.feature,me=n.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=me});return ue}function Ia(n,s){var a=n.tileID,c=s.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}var br=function(n,s){this.max=n,this.onRemove=s,this.reset()};br.prototype.reset=function(){for(var n in this.data)for(var s=0,a=this.data[n];s<a.length;s+=1){var c=a[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},br.prototype.add=function(n,s,a){var c=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var E={value:s,timeout:void 0};if(a!==void 0&&(E.timeout=setTimeout(function(){c.remove(n,E)},a)),this.data[m].push(E),this.order.push(m),this.order.length>this.max){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},br.prototype.has=function(n){return n.wrapped().key in this.data},br.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},br.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},br.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},br.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},br.prototype.remove=function(n,s){if(!this.has(n))return this;var a=n.wrapped().key,c=s===void 0?0:this.data[a].indexOf(s),m=this.data[a][c];return this.data[a].splice(c,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},br.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},br.prototype.filter=function(n){var s=[];for(var a in this.data)for(var c=0,m=this.data[a];c<m.length;c+=1){var E=m[c];n(E.value)||s.push(E)}for(var k=0,A=s;k<A.length;k+=1){var B=A[k];this.remove(B.value.tileID,B)}};var qn=function(n,s,a){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};qn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},qn.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},qn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ya={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},qr=function(n,s,a,c){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};qr.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},qr.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},qr.prototype.enableAttributes=function(n,s){for(var a=0;a<this.attributes.length;a++){var c=s.attributes[this.attributes[a].name];c!==void 0&&n.enableVertexAttribArray(c)}},qr.prototype.setVertexAttribPointers=function(n,s,a){for(var c=0;c<this.attributes.length;c++){var m=this.attributes[c],E=s.attributes[m.name];E!==void 0&&n.vertexAttribPointer(E,m.components,n[Ya[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},qr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Lt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Lt.prototype.get=function(){return this.current},Lt.prototype.set=function(n){},Lt.prototype.getDefault=function(){return this.default},Lt.prototype.setDefault=function(){this.set(this.default)};var Yi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Lt),Ni=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(Lt),ui=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(Lt),fo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Lt),Wt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(Lt),ki=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(Lt),Lr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(Lt),_i=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(Lt),bi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(Lt),Cr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Lt),xi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(Lt),on=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(Lt),Kr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}},s}(Lt),hr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Lt),jr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Lt),ea=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(Lt),jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}},s}(Lt),Ra=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(Lt),$o=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(Lt),ci=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(Lt),sn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(Lt),bn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Lt),mo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(Lt),ua=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Lt),ll=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(Lt),es=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(Lt),Zn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(Lt),xn=function(n){function s(a){n.call(this,a),this.vao=a.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(Lt),ca=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(Lt),ta=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(Lt),ha=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(Lt),Zr=function(n){function s(a,c){n.call(this,a),this.context=a,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Lt),N=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(Zr),G=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Zr),X=function(n,s,a,c){this.context=n,this.width=s,this.height=a;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new N(n,m),c&&(this.depthAttachment=new G(n,m))};X.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&n.deleteRenderbuffer(a)}n.deleteFramebuffer(this.framebuffer)};var re=function(n,s,a){this.func=n,this.mask=s,this.range=a};re.ReadOnly=!1,re.ReadWrite=!0,re.disabled=new re(519,re.ReadOnly,[0,1]);var ce=function(n,s,a,c,m,E){this.test=n,this.ref=s,this.mask=a,this.fail=c,this.depthFail=m,this.pass=E};ce.disabled=new ce({func:519,mask:0},0,0,7680,7680,7680);var ve=function(n,s,a){this.blendFunction=n,this.blendColor=s,this.mask=a};ve.disabled=new ve(ve.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),ve.unblended=new ve(ve.Replace,o.Color.transparent,[!0,!0,!0,!0]),ve.alphaBlended=new ve([1,771],o.Color.transparent,[!0,!0,!0,!0]);var be=function(n,s,a){this.enable=n,this.mode=s,this.frontFace=a};be.disabled=new be(!1,1029,2305),be.backCCW=new be(!0,1029,2305);var H=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Yi(this),this.clearDepth=new Ni(this),this.clearStencil=new ui(this),this.colorMask=new fo(this),this.depthMask=new Wt(this),this.stencilMask=new ki(this),this.stencilFunc=new Lr(this),this.stencilOp=new _i(this),this.stencilTest=new bi(this),this.depthRange=new Cr(this),this.depthTest=new xi(this),this.depthFunc=new on(this),this.blend=new Kr(this),this.blendFunc=new hr(this),this.blendColor=new jr(this),this.blendEquation=new ea(this),this.cullFace=new jn(this),this.cullFaceSide=new Ra(this),this.frontFace=new $o(this),this.program=new ci(this),this.activeTexture=new sn(this),this.viewport=new bn(this),this.bindFramebuffer=new mo(this),this.bindRenderbuffer=new ua(this),this.bindTexture=new ll(this),this.bindVertexBuffer=new es(this),this.bindElementBuffer=new Zn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new xn(this),this.pixelStoreUnpack=new ca(this),this.pixelStoreUnpackPremultiplyAlpha=new ta(this),this.pixelStoreUnpackFlipY=new ha(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};H.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},H.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},H.prototype.createIndexBuffer=function(n,s){return new qn(this,n,s)},H.prototype.createVertexBuffer=function(n,s,a){return new qr(this,n,s,a)},H.prototype.createRenderbuffer=function(n,s,a){var c=this.gl,m=c.createRenderbuffer();return this.bindRenderbuffer.set(m),c.renderbufferStorage(c.RENDERBUFFER,n,s,a),this.bindRenderbuffer.set(null),m},H.prototype.createFramebuffer=function(n,s,a){return new X(this,n,s,a)},H.prototype.clear=function(n){var s=n.color,a=n.depth,c=this.gl,m=0;s&&(m|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c.clear(m)},H.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},H.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},H.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},H.prototype.setColorMode=function(n){o.deepEqual(n.blendFunction,ve.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},H.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var se=function(n){function s(a,c,m){var E=this;n.call(this),this.id=a,this.dispatcher=m,this.on("data",function(k){k.dataType==="source"&&k.sourceDataType==="metadata"&&(E._sourceLoaded=!0),E._sourceLoaded&&!E._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(E.reload(),E.transform&&E.update(E.transform))}),this.on("error",function(){E._sourceErrored=!0}),this._source=function(k,A,B,Z){var Y=new Mi[A.type](k,A,B,Z);if(Y.id!==k)throw new Error("Expected Source id to be "+k+" instead of "+Y.id);return o.bindAll(["load","abort","unload","serialize","prepare"],Y),Y}(a,c,m,this),this._tiles={},this._cache=new br(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[c];m.upload(a),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return o.values(this._tiles).map(function(a){return a.tileID}).sort(Se).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var c=this,m=[];for(var E in this._tiles)this._isIdRenderable(E,a)&&m.push(this._tiles[E]);return a?m.sort(function(k,A){var B=k.tileID,Z=A.tileID,Y=new o.Point(B.canonical.x,B.canonical.y)._rotate(c.transform.angle),Q=new o.Point(Z.canonical.x,Z.canonical.y)._rotate(c.transform.angle);return B.overscaledZ-Z.overscaledZ||Q.y-Y.y||Q.x-Y.x}).map(function(k){return k.tileID.key}):m.map(function(k){return k.tileID}).sort(Se).map(function(k){return k.key})},s.prototype.hasRenderableParent=function(a){var c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,c){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,a,c)))},s.prototype._tileLoaded=function(a,c,m,E){if(E)return a.state="errored",void(E.status!==404?this._source.fire(new o.ErrorEvent(E,{tile:a})):this.update(this.transform));a.timeAdded=o.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var c=this.getRenderableIds(),m=0;m<c.length;m++){var E=c[m];if(a.neighboringTiles&&a.neighboringTiles[E]){var k=this.getTileByID(E);A(a,k),A(k,a)}}function A(B,Z){B.needsHillshadePrepare=!0;var Y=Z.tileID.canonical.x-B.tileID.canonical.x,Q=Z.tileID.canonical.y-B.tileID.canonical.y,$=Math.pow(2,B.tileID.canonical.z),ue=Z.tileID.key;Y===0&&Q===0||Math.abs(Q)>1||(Math.abs(Y)>1&&(Math.abs(Y+$)===1?Y+=$:Math.abs(Y-$)===1&&(Y-=$)),Z.dem&&B.dem&&(B.dem.backfillBorder(Z.dem,Y,Q),B.neighboringTiles&&B.neighboringTiles[ue]&&(B.neighboringTiles[ue].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,c,m,E){for(var k in this._tiles){var A=this._tiles[k];if(!(E[k]||!A.hasData()||A.tileID.overscaledZ<=c||A.tileID.overscaledZ>m)){for(var B=A.tileID;A&&A.tileID.overscaledZ>c+1;){var Z=A.tileID.scaledTo(A.tileID.overscaledZ-1);(A=this._tiles[Z.key])&&A.hasData()&&(B=Z)}for(var Y=B;Y.overscaledZ>c;)if(a[(Y=Y.scaledTo(Y.overscaledZ-1)).key]){E[B.key]=B;break}}}},s.prototype.findLoadedParent=function(a,c){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=c?m:null}for(var E=a.overscaledZ-1;E>=c;E--){var k=a.scaledTo(E),A=this._getLoadedTile(k);if(A)return A}},s.prototype._getLoadedTile=function(a){var c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var c=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,E=Math.floor(c*m*5),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(k)},s.prototype.handleWrapJump=function(a){var c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){var m={};for(var E in this._tiles){var k=this._tiles[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),m[k.tileID.key]=k}for(var A in this._tiles=m,this._timers)clearTimeout(this._timers[A]),delete this._timers[A];for(var B in this._tiles)this._setTileReloadTimer(B,this._tiles[B])}},s.prototype.update=function(a){var c=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(je){return new o.OverscaledTileID(je.canonical.z,je.wrap,je.canonical.z,je.canonical.x,je.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(je){return c._source.hasTile(je)}))):m=[];var E=a.coveringZoomLevel(this._source),k=Math.max(E-s.maxOverzooming,this._source.minzoom),A=Math.max(E+s.maxUnderzooming,this._source.minzoom),B=this._updateRetainedTiles(m,E);if(Ne(this._source.type)){for(var Z={},Y={},Q=0,$=Object.keys(B);Q<$.length;Q+=1){var ue=$[Q],ae=B[ue],de=this._tiles[ue];if(de&&!(de.fadeEndTime&&de.fadeEndTime<=o.browser.now())){var oe=this.findLoadedParent(ae,k);oe&&(this._addTile(oe.tileID),Z[oe.tileID.key]=oe.tileID),Y[ue]=ae}}for(var me in this._retainLoadedChildren(Y,E,A,B),Z)B[me]||(this._coveredTiles[me]=!0,B[me]=Z[me])}for(var xe in B)this._tiles[xe].clearFadeHold();for(var Te=0,Re=o.keysDifference(this._tiles,B);Te<Re.length;Te+=1){var Me=Re[Te],Ve=this._tiles[Me];Ve.hasSymbolBuckets&&!Ve.holdingForFade()?Ve.setHoldDuration(this.map._fadeDuration):Ve.hasSymbolBuckets&&!Ve.symbolFadeFinished()||this._removeTile(Me)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,c){for(var m={},E={},k=Math.max(c-s.maxOverzooming,this._source.minzoom),A=Math.max(c+s.maxUnderzooming,this._source.minzoom),B={},Z=0,Y=a;Z<Y.length;Z+=1){var Q=Y[Z],$=this._addTile(Q);m[Q.key]=Q,$.hasData()||c<this._source.maxzoom&&(B[Q.key]=Q)}this._retainLoadedChildren(B,c,A,m);for(var ue=0,ae=a;ue<ae.length;ue+=1){var de=ae[ue],oe=this._tiles[de.key];if(!oe.hasData()){if(c+1>this._source.maxzoom){var me=de.children(this._source.maxzoom)[0],xe=this.getTile(me);if(xe&&xe.hasData()){m[me.key]=me;continue}}else{var Te=de.children(this._source.maxzoom);if(m[Te[0].key]&&m[Te[1].key]&&m[Te[2].key]&&m[Te[3].key])continue}for(var Re=oe.wasRequested(),Me=de.overscaledZ-1;Me>=k;--Me){var Ve=de.scaledTo(Me);if(E[Ve.key]||(E[Ve.key]=!0,!(oe=this.getTile(Ve))&&Re&&(oe=this._addTile(Ve)),oe&&(m[Ve.key]=Ve,Re=oe.wasRequested(),oe.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var c=[],m=void 0,E=this._tiles[a].tileID;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){m=this._loadedParentTiles[E.key];break}c.push(E.key);var k=E.scaledTo(E.overscaledZ-1);if(m=this._getLoadedTile(k))break;E=k}for(var A=0,B=c;A<B.length;A+=1)this._loadedParentTiles[B[A]]=m}},s.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var m=Boolean(c);return m||(c=new o.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,m||this._source.fire(new o.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(a,c){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var E=c.getExpiryTimeout();E&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},E))},s.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,c,m){var E=this,k=[],A=this.transform;if(!A)return k;for(var B=m?A.getCameraQueryGeometry(a):a,Z=a.map(function(Me){return A.pointCoordinate(Me)}),Y=B.map(function(Me){return A.pointCoordinate(Me)}),Q=this.getIds(),$=1/0,ue=1/0,ae=-1/0,de=-1/0,oe=0,me=Y;oe<me.length;oe+=1){var xe=me[oe];$=Math.min($,xe.x),ue=Math.min(ue,xe.y),ae=Math.max(ae,xe.x),de=Math.max(de,xe.y)}for(var Te=function(Me){var Ve=E._tiles[Q[Me]];if(!Ve.holdingForFade()){var je=Ve.tileID,He=Math.pow(2,A.zoom-Ve.tileID.overscaledZ),Xe=c*Ve.queryPadding*o.EXTENT/Ve.tileSize/He,ht=[je.getTilePoint(new o.MercatorCoordinate($,ue)),je.getTilePoint(new o.MercatorCoordinate(ae,de))];if(ht[0].x-Xe<o.EXTENT&&ht[0].y-Xe<o.EXTENT&&ht[1].x+Xe>=0&&ht[1].y+Xe>=0){var yt=Z.map(function(Et){return je.getTilePoint(Et)}),It=Y.map(function(Et){return je.getTilePoint(Et)});k.push({tile:Ve,tileID:je,queryGeometry:yt,cameraQueryGeometry:It,scale:He})}}},Re=0;Re<Q.length;Re++)Te(Re);return k},s.prototype.getVisibleCoordinates=function(a){for(var c=this,m=this.getRenderableIds(a).map(function(B){return c._tiles[B].tileID}),E=0,k=m;E<k.length;E+=1){var A=k[E];A.posMatrix=this.transform.calculatePosMatrix(A.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ne(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=o.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,c,m){this._state.updateState(a=a||"_geojsonTileLayer",c,m)},s.prototype.removeFeatureState=function(a,c,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,m)},s.prototype.getFeatureState=function(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(a,c,m){var E=this._tiles[a];E&&E.setDependencies(c,m)},s.prototype.reloadTilesForDependencies=function(a,c){for(var m in this._tiles)this._tiles[m].hasDependency(a,c)&&this._reloadTile(m,"reloading");this._cache.filter(function(E){return!E.hasDependency(a,c)})},s}(o.Evented);function Se(n,s){var a=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-a||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ne(n){return n==="raster"||n==="image"||n==="video"}function Ge(){return new o.window.Worker(Mo.workerUrl)}se.maxOverzooming=10,se.maxUnderzooming=3;var Le="mapboxgl_preloaded_worker_pool",qe=function(){this.active={}};qe.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new Ge);return this.active[n]=!0,this.workers.slice()},qe.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},qe.prototype.isPreloaded=function(){return!!this.active[Le]},qe.prototype.numActive=function(){return Object.keys(this.active).length};var pt,at=Math.floor(o.browser.hardwareConcurrency/2);function Be(){return pt||(pt=new qe),pt}function tt(n,s){var a={};for(var c in n)c!=="ref"&&(a[c]=n[c]);return o.refProperties.forEach(function(m){m in s&&(a[m]=s[m])}),a}function We(n){n=n.slice();for(var s=Object.create(null),a=0;a<n.length;a++)s[n[a].id]=n[a];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=tt(n[c],s[n[c].ref]));return n}qe.workerCount=Math.max(Math.min(at,6),1);var Qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ft(n,s,a){a.push({command:Qe.addSource,args:[n,s[n]]})}function Ze(n,s,a){s.push({command:Qe.removeSource,args:[n]}),a[n]=!0}function Gt(n,s,a,c){Ze(n,a,c),Ft(n,s,a)}function sr(n,s,a){var c;for(c in n[a])if(n[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;for(c in s[a])if(s[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;return!0}function Pt(n,s,a,c,m,E){var k;for(k in s=s||{},n=n||{})n.hasOwnProperty(k)&&(o.deepEqual(n[k],s[k])||a.push({command:E,args:[c,k,s[k],m]}));for(k in s)s.hasOwnProperty(k)&&!n.hasOwnProperty(k)&&(o.deepEqual(n[k],s[k])||a.push({command:E,args:[c,k,s[k],m]}))}function Qt(n){return n.id}function Jt(n,s){return n[s.id]=s,n}var Li=function(n,s){this.reset(n,s)};Li.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Li.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=o.clamp(n,0,1);for(var s=1,a=this._distances[s],c=n*this.paddedLength+this.padding;a<c&&s<this._distances.length;)a=this._distances[++s];var m=s-1,E=this._distances[m],k=a-E,A=k>0?(c-E)/k:0;return this.points[m].mult(1-A).add(this.points[s].mult(A))};var $t=function(n,s,a){var c=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/a),this.yCellCount=Math.ceil(s/a);for(var E=0;E<this.xCellCount*this.yCellCount;E++)c.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function mr(n,s,a,c,m){var E=o.create();return s?(o.scale(E,E,[1/m,1/m,1]),a||o.rotateZ(E,E,c.angle)):o.multiply(E,c.labelPlaneMatrix,n),E}function pr(n,s,a,c,m){if(s){var E=o.clone(n);return o.scale(E,E,[m,m,1]),a||o.rotateZ(E,E,-c.angle),E}return c.glCoordMatrix}function Xt(n,s){var a=[n.x,n.y,0,1];Hr(a,a,s);var c=a[3];return{point:new o.Point(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function nr(n,s){return .5+n/s*.5}function Ui(n,s){var a=n[0]/n[3],c=n[1]/n[3];return a>=-s[0]&&a<=s[0]&&c>=-s[1]&&c<=s[1]}function pa(n,s,a,c,m,E,k,A){var B=c?n.textSizeData:n.iconSizeData,Z=o.evaluateSizeForZoom(B,a.transform.zoom),Y=[256/a.width*2+1,256/a.height*2+1],Q=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;Q.clear();for(var $=n.lineVertexArray,ue=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,ae=a.transform.width/a.transform.height,de=!1,oe=0;oe<ue.length;oe++){var me=ue.get(oe);if(me.hidden||me.writingMode===o.WritingMode.vertical&&!de)qi(me.numGlyphs,Q);else{de=!1;var xe=[me.anchorX,me.anchorY,0,1];if(o.transformMat4(xe,xe,s),Ui(xe,Y)){var Te=nr(a.transform.cameraToCenterDistance,xe[3]),Re=o.evaluateSizeForFeature(B,Z,me),Me=k?Re/Te:Re*Te,Ve=new o.Point(me.anchorX,me.anchorY),je=Xt(Ve,m).point,He={},Xe=wn(me,Me,!1,A,s,m,E,n.glyphOffsetArray,$,Q,je,Ve,He,ae);de=Xe.useVertical,(Xe.notEnoughRoom||de||Xe.needsFlipping&&wn(me,Me,!0,A,s,m,E,n.glyphOffsetArray,$,Q,je,Ve,He,ae).notEnoughRoom)&&qi(me.numGlyphs,Q)}else qi(me.numGlyphs,Q)}}c?n.text.dynamicLayoutVertexBuffer.updateData(Q):n.icon.dynamicLayoutVertexBuffer.updateData(Q)}function wi(n,s,a,c,m,E,k,A,B,Z,Y){var Q=A.glyphStartIndex+A.numGlyphs,$=A.lineStartIndex,ue=A.lineStartIndex+A.lineLength,ae=s.getoffsetX(A.glyphStartIndex),de=s.getoffsetX(Q-1),oe=yr(n*ae,a,c,m,E,k,A.segment,$,ue,B,Z,Y);if(!oe)return null;var me=yr(n*de,a,c,m,E,k,A.segment,$,ue,B,Z,Y);return me?{first:oe,last:me}:null}function Ji(n,s,a,c){return n===o.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*c?{useVertical:!0}:(n===o.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function wn(n,s,a,c,m,E,k,A,B,Z,Y,Q,$,ue){var ae,de=s/24,oe=n.lineOffsetX*de,me=n.lineOffsetY*de;if(n.numGlyphs>1){var xe=n.glyphStartIndex+n.numGlyphs,Te=n.lineStartIndex,Re=n.lineStartIndex+n.lineLength,Me=wi(de,A,oe,me,a,Y,Q,n,B,E,$);if(!Me)return{notEnoughRoom:!0};var Ve=Xt(Me.first.point,k).point,je=Xt(Me.last.point,k).point;if(c&&!a){var He=Ji(n.writingMode,Ve,je,ue);if(He)return He}ae=[Me.first];for(var Xe=n.glyphStartIndex+1;Xe<xe-1;Xe++)ae.push(yr(de*A.getoffsetX(Xe),oe,me,a,Y,Q,n.segment,Te,Re,B,E,$));ae.push(Me.last)}else{if(c&&!a){var ht=Xt(Q,m).point,yt=n.lineStartIndex+n.segment+1,It=new o.Point(B.getx(yt),B.gety(yt)),Et=Xt(It,m),rr=Et.signedDistanceFromCamera>0?Et.point:Qi(Q,It,ht,1,m),st=Ji(n.writingMode,ht,rr,ue);if(st)return st}var Tt=yr(de*A.getoffsetX(n.glyphStartIndex),oe,me,a,Y,Q,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,B,E,$);if(!Tt)return{notEnoughRoom:!0};ae=[Tt]}for(var Nt=0,Rt=ae;Nt<Rt.length;Nt+=1){var Ct=Rt[Nt];o.addDynamicAttributes(Z,Ct.point,Ct.angle)}return{}}function Qi(n,s,a,c,m){var E=Xt(n.add(n.sub(s)._unit()),m).point,k=a.sub(E);return a.add(k._mult(c/k.mag()))}function yr(n,s,a,c,m,E,k,A,B,Z,Y,Q){var $=c?n-s:n+s,ue=$>0?1:-1,ae=0;c&&(ue*=-1,ae=Math.PI),ue<0&&(ae+=Math.PI);for(var de=ue>0?A+k:A+k+1,oe=m,me=m,xe=0,Te=0,Re=Math.abs($),Me=[];xe+Te<=Re;){if((de+=ue)<A||de>=B)return null;if(me=oe,Me.push(oe),(oe=Q[de])===void 0){var Ve=new o.Point(Z.getx(de),Z.gety(de)),je=Xt(Ve,Y);if(je.signedDistanceFromCamera>0)oe=Q[de]=je.point;else{var He=de-ue;oe=Qi(xe===0?E:new o.Point(Z.getx(He),Z.gety(He)),Ve,me,Re-xe+1,Y)}}xe+=Te,Te=me.dist(oe)}var Xe=(Re-xe)/Te,ht=oe.sub(me),yt=ht.mult(Xe)._add(me);yt._add(ht._unit()._perp()._mult(a*ue));var It=ae+Math.atan2(oe.y-me.y,oe.x-me.x);return Me.push(yt),{point:yt,angle:It,path:Me}}$t.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},$t.prototype.insert=function(n,s,a,c,m){this._forEachCell(s,a,c,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(m)},$t.prototype.insertCircle=function(n,s,a,c){this._forEachCell(s-c,a-c,s+c,a+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(a),this.circles.push(c)},$t.prototype._insertBoxCell=function(n,s,a,c,m,E){this.boxCells[m].push(E)},$t.prototype._insertCircleCell=function(n,s,a,c,m,E){this.circleCells[m].push(E)},$t.prototype._query=function(n,s,a,c,m,E){if(a<0||n>this.width||c<0||s>this.height)return!m&&[];var k=[];if(n<=0&&s<=0&&this.width<=a&&this.height<=c){if(m)return!0;for(var A=0;A<this.boxKeys.length;A++)k.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(var B=0;B<this.circleKeys.length;B++){var Z=this.circles[3*B],Y=this.circles[3*B+1],Q=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:Z-Q,y1:Y-Q,x2:Z+Q,y2:Y+Q})}return E?k.filter(E):k}return this._forEachCell(n,s,a,c,this._queryCell,k,{hitTest:m,seenUids:{box:{},circle:{}}},E),m?k.length>0:k},$t.prototype._queryCircle=function(n,s,a,c,m){var E=n-a,k=n+a,A=s-a,B=s+a;if(k<0||E>this.width||B<0||A>this.height)return!c&&[];var Z=[];return this._forEachCell(E,A,k,B,this._queryCellCircle,Z,{hitTest:c,circle:{x:n,y:s,radius:a},seenUids:{box:{},circle:{}}},m),c?Z.length>0:Z},$t.prototype.query=function(n,s,a,c,m){return this._query(n,s,a,c,!1,m)},$t.prototype.hitTest=function(n,s,a,c,m){return this._query(n,s,a,c,!0,m)},$t.prototype.hitTestCircle=function(n,s,a,c){return this._queryCircle(n,s,a,!0,c)},$t.prototype._queryCell=function(n,s,a,c,m,E,k,A){var B=k.seenUids,Z=this.boxCells[m];if(Z!==null)for(var Y=this.bboxes,Q=0,$=Z;Q<$.length;Q+=1){var ue=$[Q];if(!B.box[ue]){B.box[ue]=!0;var ae=4*ue;if(n<=Y[ae+2]&&s<=Y[ae+3]&&a>=Y[ae+0]&&c>=Y[ae+1]&&(!A||A(this.boxKeys[ue]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ue],x1:Y[ae],y1:Y[ae+1],x2:Y[ae+2],y2:Y[ae+3]})}}}var de=this.circleCells[m];if(de!==null)for(var oe=this.circles,me=0,xe=de;me<xe.length;me+=1){var Te=xe[me];if(!B.circle[Te]){B.circle[Te]=!0;var Re=3*Te;if(this._circleAndRectCollide(oe[Re],oe[Re+1],oe[Re+2],n,s,a,c)&&(!A||A(this.circleKeys[Te]))){if(k.hitTest)return E.push(!0),!0;var Me=oe[Re],Ve=oe[Re+1],je=oe[Re+2];E.push({key:this.circleKeys[Te],x1:Me-je,y1:Ve-je,x2:Me+je,y2:Ve+je})}}}},$t.prototype._queryCellCircle=function(n,s,a,c,m,E,k,A){var B=k.circle,Z=k.seenUids,Y=this.boxCells[m];if(Y!==null)for(var Q=this.bboxes,$=0,ue=Y;$<ue.length;$+=1){var ae=ue[$];if(!Z.box[ae]){Z.box[ae]=!0;var de=4*ae;if(this._circleAndRectCollide(B.x,B.y,B.radius,Q[de+0],Q[de+1],Q[de+2],Q[de+3])&&(!A||A(this.boxKeys[ae])))return E.push(!0),!0}}var oe=this.circleCells[m];if(oe!==null)for(var me=this.circles,xe=0,Te=oe;xe<Te.length;xe+=1){var Re=Te[xe];if(!Z.circle[Re]){Z.circle[Re]=!0;var Me=3*Re;if(this._circlesCollide(me[Me],me[Me+1],me[Me+2],B.x,B.y,B.radius)&&(!A||A(this.circleKeys[Re])))return E.push(!0),!0}}},$t.prototype._forEachCell=function(n,s,a,c,m,E,k,A){for(var B=this._convertToXCellCoord(n),Z=this._convertToYCellCoord(s),Y=this._convertToXCellCoord(a),Q=this._convertToYCellCoord(c),$=B;$<=Y;$++)for(var ue=Z;ue<=Q;ue++)if(m.call(this,n,s,a,c,this.xCellCount*ue+$,E,k,A))return},$t.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},$t.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},$t.prototype._circlesCollide=function(n,s,a,c,m,E){var k=c-n,A=m-s,B=a+E;return B*B>k*k+A*A},$t.prototype._circleAndRectCollide=function(n,s,a,c,m,E,k){var A=(E-c)/2,B=Math.abs(n-(c+A));if(B>A+a)return!1;var Z=(k-m)/2,Y=Math.abs(s-(m+Z));if(Y>Z+a)return!1;if(B<=A||Y<=Z)return!0;var Q=B-A,$=Y-Z;return Q*Q+$*$<=a*a};var Gn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qi(n,s){for(var a=0;a<n;a++){var c=s.length;s.resize(c+4),s.float32.set(Gn,3*c)}}function Hr(n,s,a){var c=s[0],m=s[1];return n[0]=a[0]*c+a[4]*m+a[12],n[1]=a[1]*c+a[5]*m+a[13],n[3]=a[3]*c+a[7]*m+a[15],n}var ra=function(n,s,a){s===void 0&&(s=new $t(n.width+200,n.height+200,25)),a===void 0&&(a=new $t(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function Dr(n,s,a){return s*(o.EXTENT/(n.tileSize*Math.pow(2,a-n.tileID.overscaledZ)))}ra.prototype.placeCollisionBox=function(n,s,a,c,m){var E=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),k=a*E.perspectiveRatio,A=n.x1*k+E.point.x,B=n.y1*k+E.point.y,Z=n.x2*k+E.point.x,Y=n.y2*k+E.point.y;return!this.isInsideGrid(A,B,Z,Y)||!s&&this.grid.hitTest(A,B,Z,Y,m)?{box:[],offscreen:!1}:{box:[A,B,Z,Y],offscreen:this.isOffscreen(A,B,Z,Y)}},ra.prototype.placeCollisionCircles=function(n,s,a,c,m,E,k,A,B,Z,Y,Q,$){var ue=[],ae=new o.Point(s.anchorX,s.anchorY),de=Xt(ae,E),oe=nr(this.transform.cameraToCenterDistance,de.signedDistanceFromCamera),me=(Z?m/oe:m*oe)/o.ONE_EM,xe=Xt(ae,k).point,Te=wi(me,c,s.lineOffsetX*me,s.lineOffsetY*me,!1,xe,ae,s,a,k,{}),Re=!1,Me=!1,Ve=!0;if(Te){for(var je=.5*Q*oe+$,He=new o.Point(-100,-100),Xe=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),ht=new Li,yt=Te.first,It=Te.last,Et=[],rr=yt.path.length-1;rr>=1;rr--)Et.push(yt.path[rr]);for(var st=1;st<It.path.length;st++)Et.push(It.path[st]);var Tt=2.5*je;if(A){var Nt=Et.map(function(Qn){return Xt(Qn,A)});Et=Nt.some(function(Qn){return Qn.signedDistanceFromCamera<=0})?[]:Nt.map(function(Qn){return Qn.point})}var Rt=[];if(Et.length>0){for(var Ct=Et[0].clone(),Vt=Et[0].clone(),xt=1;xt<Et.length;xt++)Ct.x=Math.min(Ct.x,Et[xt].x),Ct.y=Math.min(Ct.y,Et[xt].y),Vt.x=Math.max(Vt.x,Et[xt].x),Vt.y=Math.max(Vt.y,Et[xt].y);Rt=Ct.x>=He.x&&Vt.x<=Xe.x&&Ct.y>=He.y&&Vt.y<=Xe.y?[Et]:Vt.x<He.x||Ct.x>Xe.x||Vt.y<He.y||Ct.y>Xe.y?[]:o.clipLine([Et],He.x,He.y,Xe.x,Xe.y)}for(var zt=0,Oi=Rt;zt<Oi.length;zt+=1){var pi;ht.reset(Oi[zt],.25*je),pi=ht.length<=.5*je?1:Math.ceil(ht.paddedLength/Tt)+1;for(var Rn=0;Rn<pi;Rn++){var Vi=Rn/Math.max(pi-1,1),fi=ht.lerp(Vi),zi=fi.x+100,Ei=fi.y+100;ue.push(zi,Ei,je,0);var Pi=zi-je,Bn=Ei-je,Ki=zi+je,so=Ei+je;if(Ve=Ve&&this.isOffscreen(Pi,Bn,Ki,so),Me=Me||this.isInsideGrid(Pi,Bn,Ki,so),!n&&this.grid.hitTestCircle(zi,Ei,je,Y)&&(Re=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Re}}}}return{circles:!B&&Re||!Me?[]:ue,offscreen:Ve,collisionDetected:Re}},ra.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,c=1/0,m=-1/0,E=-1/0,k=0,A=n;k<A.length;k+=1){var B=A[k],Z=new o.Point(B.x+100,B.y+100);a=Math.min(a,Z.x),c=Math.min(c,Z.y),m=Math.max(m,Z.x),E=Math.max(E,Z.y),s.push(Z)}for(var Y={},Q={},$=0,ue=this.grid.query(a,c,m,E).concat(this.ignoredGrid.query(a,c,m,E));$<ue.length;$+=1){var ae=ue[$],de=ae.key;if(Y[de.bucketInstanceId]===void 0&&(Y[de.bucketInstanceId]={}),!Y[de.bucketInstanceId][de.featureIndex]){var oe=[new o.Point(ae.x1,ae.y1),new o.Point(ae.x2,ae.y1),new o.Point(ae.x2,ae.y2),new o.Point(ae.x1,ae.y2)];o.polygonIntersectsPolygon(s,oe)&&(Y[de.bucketInstanceId][de.featureIndex]=!0,Q[de.bucketInstanceId]===void 0&&(Q[de.bucketInstanceId]=[]),Q[de.bucketInstanceId].push(de.featureIndex))}}return Q},ra.prototype.insertCollisionBox=function(n,s,a,c,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:c,collisionGroupID:m},n[0],n[1],n[2],n[3])},ra.prototype.insertCollisionCircles=function(n,s,a,c,m){for(var E=s?this.ignoredGrid:this.grid,k={bucketInstanceId:a,featureIndex:c,collisionGroupID:m},A=0;A<n.length;A+=4)E.insertCircle(k,n[A],n[A+1],n[A+2])},ra.prototype.projectAndGetPerspectiveRatio=function(n,s,a){var c=[s,a,0,1];return Hr(c,c,n),{point:new o.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},ra.prototype.isOffscreen=function(n,s,a,c){return a<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},ra.prototype.isInsideGrid=function(n,s,a,c){return a>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},ra.prototype.getViewportMatrix=function(){var n=o.identity([]);return o.translate(n,n,[-100,-100,0]),n};var En=function(n,s,a,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&a?1:0,this.placed=a};En.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ln=function(n,s,a,c,m){this.text=new En(n?n.text:null,s,a,m),this.icon=new En(n?n.icon:null,s,c,m)};ln.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ku=function(n,s,a){this.text=n,this.icon=s,this.skipFade=a},ji=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},yo=function(n,s,a,c,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=c,this.tileID=m},un=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Xr(n,s,a,c,m){var E=o.getAnchorAlignment(n),k=-(E.horizontalAlign-.5)*s,A=-(E.verticalAlign-.5)*a,B=o.evaluateVariableOffset(n,c);return new o.Point(k+B[0]*m,A+B[1]*m)}function Ri(n,s,a,c,m,E){var k=n.x1,A=n.x2,B=n.y1,Z=n.y2,Y=n.anchorPointX,Q=n.anchorPointY,$=new o.Point(s,a);return c&&$._rotate(m?E:-E),{x1:k+$.x,y1:B+$.y,x2:A+$.x,y2:Z+$.y,anchorPointX:Y,anchorPointY:Q}}un.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[n]};var hi=function(n,s,a,c){this.transform=n.clone(),this.collisionIndex=new ra(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new un(a),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function vo(n,s,a,c,m){n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0)}hi.prototype.getBucketParts=function(n,s,a,c){var m=a.getBucket(s),E=a.latestFeatureIndex;if(m&&E&&s.id===m.layerIds[0]){var k=a.collisionBoxArray,A=m.layers[0].layout,B=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),Z=a.tileSize/o.EXTENT,Y=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),Q=A.get("text-pitch-alignment")==="map",$=A.get("text-rotation-alignment")==="map",ue=Dr(a,1,this.transform.zoom),ae=mr(Y,Q,$,this.transform,ue),de=null;if(Q){var oe=pr(Y,Q,$,this.transform,ue);de=o.multiply([],this.transform.labelPlaneMatrix,oe)}this.retainedQueryData[m.bucketInstanceId]=new yo(m.bucketInstanceId,E,m.sourceLayerIndex,m.index,a.tileID);var me={bucket:m,layout:A,posMatrix:Y,textLabelPlaneMatrix:ae,labelToScreenMatrix:de,scale:B,textPixelRatio:Z,holdingForFade:a.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(c)for(var xe=0,Te=m.sortKeyRanges;xe<Te.length;xe+=1){var Re=Te[xe];n.push({sortKey:Re.sortKey,symbolInstanceStart:Re.symbolInstanceStart,symbolInstanceEnd:Re.symbolInstanceEnd,parameters:me})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:me})}},hi.prototype.attemptAnchorPlacement=function(n,s,a,c,m,E,k,A,B,Z,Y,Q,$,ue,ae){var de,oe=[Q.textOffset0,Q.textOffset1],me=Xr(n,a,c,oe,m),xe=this.collisionIndex.placeCollisionBox(Ri(s,me.x,me.y,E,k,this.transform.angle),Y,A,B,Z.predicate);if(!ae||this.collisionIndex.placeCollisionBox(Ri(ae,me.x,me.y,E,k,this.transform.angle),Y,A,B,Z.predicate).box.length!==0)return xe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(de=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),this.variableOffsets[Q.crossTileID]={textOffset:oe,width:a,height:c,anchor:n,textBoxScale:m,prevAnchor:de},this.markUsedJustification($,n,Q,ue),$.allowVerticalPlacement&&(this.markUsedOrientation($,ue,Q),this.placedOrientations[Q.crossTileID]=ue),{shift:me,placedGlyphBoxes:xe}):void 0},hi.prototype.placeLayerBucketPart=function(n,s,a){var c=this,m=n.parameters,E=m.bucket,k=m.layout,A=m.posMatrix,B=m.textLabelPlaneMatrix,Z=m.labelToScreenMatrix,Y=m.textPixelRatio,Q=m.holdingForFade,$=m.collisionBoxArray,ue=m.partiallyEvaluatedTextSize,ae=m.collisionGroup,de=k.get("text-optional"),oe=k.get("icon-optional"),me=k.get("text-allow-overlap"),xe=k.get("icon-allow-overlap"),Te=k.get("text-rotation-alignment")==="map",Re=k.get("text-pitch-alignment")==="map",Me=k.get("icon-text-fit")!=="none",Ve=k.get("symbol-z-order")==="viewport-y",je=me&&(xe||!E.hasIconData()||oe),He=xe&&(me||!E.hasTextData()||de);!E.collisionArrays&&$&&E.deserializeCollisionBoxes($);var Xe=function(st,Tt){if(!s[st.crossTileID])if(Q)c.placements[st.crossTileID]=new Ku(!1,!1,!1);else{var Nt,Rt=!1,Ct=!1,Vt=!0,xt=null,zt={box:null,offscreen:null},Oi={box:null,offscreen:null},pi=null,Rn=null,Vi=0,fi=0,zi=0;Tt.textFeatureIndex?Vi=Tt.textFeatureIndex:st.useRuntimeCollisionCircles&&(Vi=st.featureIndex),Tt.verticalTextFeatureIndex&&(fi=Tt.verticalTextFeatureIndex);var Ei=Tt.textBox;if(Ei){var Pi=function(er){var fn=o.WritingMode.horizontal;if(E.allowVerticalPlacement&&!er&&c.prevPlacement){var oa=c.prevPlacement.placedOrientations[st.crossTileID];oa&&(c.placedOrientations[st.crossTileID]=oa,c.markUsedOrientation(E,fn=oa,st))}return fn},Bn=function(er,fn){if(E.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&Tt.verticalTextBox)for(var oa=0,lo=E.writingModes;oa<lo.length&&(lo[oa]===o.WritingMode.vertical?(zt=fn(),Oi=zt):zt=er(),!(zt&&zt.box&&zt.box.length));oa+=1);else zt=er()};if(k.get("text-variable-anchor")){var Ki=k.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[st.crossTileID]){var so=c.prevPlacement.variableOffsets[st.crossTileID];Ki.indexOf(so.anchor)>0&&(Ki=Ki.filter(function(er){return er!==so.anchor})).unshift(so.anchor)}var Qn=function(er,fn,oa){for(var lo=er.x2-er.x1,$v=er.y2-er.y1,$c=st.textBoxScale,ac=Me&&!xe?fn:null,ps={box:[],offscreen:!1},Sf=me?2*Ki.length:Ki.length,Bo=0;Bo<Sf;++Bo){var cu=c.attemptAnchorPlacement(Ki[Bo%Ki.length],er,lo,$v,$c,Te,Re,Y,A,ae,Bo>=Ki.length,st,E,oa,ac);if(cu&&(ps=cu.placedGlyphBoxes)&&ps.box&&ps.box.length){Rt=!0,xt=cu.shift;break}}return ps};Bn(function(){return Qn(Ei,Tt.iconBox,o.WritingMode.horizontal)},function(){var er=Tt.verticalTextBox;return E.allowVerticalPlacement&&!(zt&&zt.box&&zt.box.length)&&st.numVerticalGlyphVertices>0&&er?Qn(er,Tt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),zt&&(Rt=zt.box,Vt=zt.offscreen);var yp=Pi(zt&&zt.box);if(!Rt&&c.prevPlacement){var uu=c.prevPlacement.variableOffsets[st.crossTileID];uu&&(c.variableOffsets[st.crossTileID]=uu,c.markUsedJustification(E,uu.anchor,st,yp))}}else{var qa=function(er,fn){var oa=c.collisionIndex.placeCollisionBox(er,me,Y,A,ae.predicate);return oa&&oa.box&&oa.box.length&&(c.markUsedOrientation(E,fn,st),c.placedOrientations[st.crossTileID]=fn),oa};Bn(function(){return qa(Ei,o.WritingMode.horizontal)},function(){var er=Tt.verticalTextBox;return E.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&er?qa(er,o.WritingMode.vertical):{box:null,offscreen:null}}),Pi(zt&&zt.box&&zt.box.length)}}if(Rt=(Nt=zt)&&Nt.box&&Nt.box.length>0,Vt=Nt&&Nt.offscreen,st.useRuntimeCollisionCircles){var Lo=E.text.placedSymbolArray.get(st.centerJustifiedTextSymbolIndex),nc=o.evaluateSizeForFeature(E.textSizeData,ue,Lo),ga=k.get("text-padding");pi=c.collisionIndex.placeCollisionCircles(me,Lo,E.lineVertexArray,E.glyphOffsetArray,nc,A,B,Z,a,Re,ae.predicate,st.collisionCircleDiameter,ga),Rt=me||pi.circles.length>0&&!pi.collisionDetected,Vt=Vt&&pi.offscreen}if(Tt.iconFeatureIndex&&(zi=Tt.iconFeatureIndex),Tt.iconBox){var Tl=function(er){var fn=Me&&xt?Ri(er,xt.x,xt.y,Te,Re,c.transform.angle):er;return c.collisionIndex.placeCollisionBox(fn,xe,Y,A,ae.predicate)};Ct=Oi&&Oi.box&&Oi.box.length&&Tt.verticalIconBox?(Rn=Tl(Tt.verticalIconBox)).box.length>0:(Rn=Tl(Tt.iconBox)).box.length>0,Vt=Vt&&Rn.offscreen}var Ro=de||st.numHorizontalGlyphVertices===0&&st.numVerticalGlyphVertices===0,en=oe||st.numIconVertices===0;if(Ro||en?en?Ro||(Ct=Ct&&Rt):Rt=Ct&&Rt:Ct=Rt=Ct&&Rt,Rt&&Nt&&Nt.box&&c.collisionIndex.insertCollisionBox(Nt.box,k.get("text-ignore-placement"),E.bucketInstanceId,Oi&&Oi.box&&fi?fi:Vi,ae.ID),Ct&&Rn&&c.collisionIndex.insertCollisionBox(Rn.box,k.get("icon-ignore-placement"),E.bucketInstanceId,zi,ae.ID),pi&&(Rt&&c.collisionIndex.insertCollisionCircles(pi.circles,k.get("text-ignore-placement"),E.bucketInstanceId,Vi,ae.ID),a)){var _a=E.bucketInstanceId,Fs=c.collisionCircleArrays[_a];Fs===void 0&&(Fs=c.collisionCircleArrays[_a]=new ji);for(var ba=0;ba<pi.circles.length;ba+=4)Fs.circles.push(pi.circles[ba+0]),Fs.circles.push(pi.circles[ba+1]),Fs.circles.push(pi.circles[ba+2]),Fs.circles.push(pi.collisionDetected?1:0)}c.placements[st.crossTileID]=new Ku(Rt||je,Ct||He,Vt||E.justReloaded),s[st.crossTileID]=!0}};if(Ve)for(var ht=E.getSortedSymbolIndexes(this.transform.angle),yt=ht.length-1;yt>=0;--yt){var It=ht[yt];Xe(E.symbolInstances.get(It),E.collisionArrays[It])}else for(var Et=n.symbolInstanceStart;Et<n.symbolInstanceEnd;Et++)Xe(E.symbolInstances.get(Et),E.collisionArrays[Et]);if(a&&E.bucketInstanceId in this.collisionCircleArrays){var rr=this.collisionCircleArrays[E.bucketInstanceId];o.invert(rr.invProjMatrix,A),rr.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1},hi.prototype.markUsedJustification=function(n,s,a,c){var m;m=c===o.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(s)];for(var E=0,k=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];E<k.length;E+=1){var A=k[E];A>=0&&(n.text.placedSymbolArray.get(A).crossTileID=m>=0&&A!==m?0:a.crossTileID)}},hi.prototype.markUsedOrientation=function(n,s,a){for(var c=s===o.WritingMode.horizontal||s===o.WritingMode.horizontalOnly?s:0,m=s===o.WritingMode.vertical?s:0,E=0,k=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];E<k.length;E+=1)n.text.placedSymbolArray.get(k[E]).placedOrientation=c;a.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},hi.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},E=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(var A in this.placements){var B=this.placements[A],Z=m[A];Z?(this.opacities[A]=new ln(Z,c,B.text,B.icon),a=a||B.text!==Z.text.placed||B.icon!==Z.icon.placed):(this.opacities[A]=new ln(null,c,B.text,B.icon,B.skipFade),a=a||B.text||B.icon)}for(var Y in m){var Q=m[Y];if(!this.opacities[Y]){var $=new ln(Q,c,!1,!1);$.isHidden()||(this.opacities[Y]=$,a=a||Q.text.placed||Q.icon.placed)}}for(var ue in E)this.variableOffsets[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.variableOffsets[ue]=E[ue]);for(var ae in k)this.placedOrientations[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.placedOrientations[ae]=k[ae]);a?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},hi.prototype.updateLayerOpacities=function(n,s){for(var a={},c=0,m=s;c<m.length;c+=1){var E=m[c],k=E.getBucket(n);k&&E.latestFeatureIndex&&n.id===k.layerIds[0]&&this.updateBucketOpacities(k,a,E.collisionBoxArray)}},hi.prototype.updateBucketOpacities=function(n,s,a){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,E=new ln(null,0,!1,!1,!0),k=m.get("text-allow-overlap"),A=m.get("icon-allow-overlap"),B=m.get("text-variable-anchor"),Z=m.get("text-rotation-alignment")==="map",Y=m.get("text-pitch-alignment")==="map",Q=m.get("icon-text-fit")!=="none",$=new ln(null,0,k&&(A||!n.hasIconData()||m.get("icon-optional")),A&&(k||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&a&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(a);for(var ue=function(me,xe,Te){for(var Re=0;Re<xe/4;Re++)me.opacityVertexArray.emplaceBack(Te)},ae=function(me){var xe=n.symbolInstances.get(me),Te=xe.numHorizontalGlyphVertices,Re=xe.numVerticalGlyphVertices,Me=xe.crossTileID,Ve=c.opacities[Me];s[Me]?Ve=E:Ve||(c.opacities[Me]=Ve=$),s[Me]=!0;var je=xe.numIconVertices>0,He=c.placedOrientations[xe.crossTileID],Xe=He===o.WritingMode.vertical,ht=He===o.WritingMode.horizontal||He===o.WritingMode.horizontalOnly;if(Te>0||Re>0){var yt=is(Ve.text);ue(n.text,Te,Xe?go:yt),ue(n.text,Re,ht?go:yt);var It=Ve.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(function(zt){zt>=0&&(n.text.placedSymbolArray.get(zt).hidden=It||Xe?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=It||ht?1:0);var Et=c.variableOffsets[xe.crossTileID];Et&&c.markUsedJustification(n,Et.anchor,xe,He);var rr=c.placedOrientations[xe.crossTileID];rr&&(c.markUsedJustification(n,"left",xe,rr),c.markUsedOrientation(n,rr,xe))}if(je){var st=is(Ve.icon),Tt=!(Q&&xe.verticalPlacedIconSymbolIndex&&Xe);xe.placedIconSymbolIndex>=0&&(ue(n.icon,xe.numIconVertices,Tt?st:go),n.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Ve.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(ue(n.icon,xe.numVerticalIconVertices,Tt?go:st),n.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Ve.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Nt=n.collisionArrays[me];if(Nt){var Rt=new o.Point(0,0);if(Nt.textBox||Nt.verticalTextBox){var Ct=!0;if(B){var Vt=c.variableOffsets[Me];Vt?(Rt=Xr(Vt.anchor,Vt.width,Vt.height,Vt.textOffset,Vt.textBoxScale),Z&&Rt._rotate(Y?c.transform.angle:-c.transform.angle)):Ct=!1}Nt.textBox&&vo(n.textCollisionBox.collisionVertexArray,Ve.text.placed,!Ct||Xe,Rt.x,Rt.y),Nt.verticalTextBox&&vo(n.textCollisionBox.collisionVertexArray,Ve.text.placed,!Ct||ht,Rt.x,Rt.y)}var xt=Boolean(!ht&&Nt.verticalIconBox);Nt.iconBox&&vo(n.iconCollisionBox.collisionVertexArray,Ve.icon.placed,xt,Q?Rt.x:0,Q?Rt.y:0),Nt.verticalIconBox&&vo(n.iconCollisionBox.collisionVertexArray,Ve.icon.placed,!xt,Q?Rt.x:0,Q?Rt.y:0)}}},de=0;de<n.symbolInstances.length;de++)ae(de);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var oe=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=oe.invProjMatrix,n.placementViewportMatrix=oe.viewportMatrix,n.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},hi.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},hi.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},hi.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},hi.prototype.stillRecent=function(n,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>n},hi.prototype.setStale=function(){this.stale=!0};var ts=Math.pow(2,25),bd=Math.pow(2,24),ul=Math.pow(2,17),cl=Math.pow(2,16),rs=Math.pow(2,9),ep=Math.pow(2,8),Yl=Math.pow(2,1);function is(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,a=Math.floor(127*n.opacity);return a*ts+s*bd+a*ul+s*cl+a*rs+s*ep+a*Yl+s}var go=0,Jl=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Jl.prototype.continuePlacement=function(n,s,a,c,m){for(var E=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(E,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(function(k,A){return k.sortKey-A.sortKey}));this._currentPartIndex<E.length;)if(s.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var hl=function(n,s,a,c,m,E,k){this.placement=new hi(n,m,E,k),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=c,this._done=!1};hl.prototype.isDone=function(){return this._done},hl.prototype.continuePlacement=function(n,s,a){for(var c=this,m=o.browser.now(),E=function(){var B=o.browser.now()-m;return!c._forceFullPlacement&&B>2};this._currentPlacementIndex>=0;){var k=s[n[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=A)&&(!k.maxzoom||k.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Jl(k)),this._inProgressLayer.continuePlacement(a[k.source],this.placement,this._showCollisionBoxes,k,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},hl.prototype.commit=function(n){return this.placement.commit(n),this.placement};var qc=512/o.EXTENT/2,Sn=function(n,s,a){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var c=0;c<s.length;c++){var m=s.get(c),E=m.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};Sn.prototype.getScaledCoordinates=function(n,s){var a=qc/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*o.EXTENT+n.anchorX)*a),y:Math.floor((s.canonical.y*o.EXTENT+n.anchorY)*a)}},Sn.prototype.findMatches=function(n,s,a){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var E=n.get(m);if(!E.crossTileID){var k=this.indexedSymbolInstances[E.key];if(k)for(var A=this.getScaledCoordinates(E,s),B=0,Z=k;B<Z.length;B+=1){var Y=Z[B];if(Math.abs(Y.coord.x-A.x)<=c&&Math.abs(Y.coord.y-A.y)<=c&&!a[Y.crossTileID]){a[Y.crossTileID]=!0,E.crossTileID=Y.crossTileID;break}}}}};var Ii=function(){this.maxCrossTileID=0};Ii.prototype.generate=function(){return++this.maxCrossTileID};var Kn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Kn.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var a in this.indexes){var c=this.indexes[a],m={};for(var E in c){var k=c[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),m[k.tileID.key]=k}this.indexes[a]=m}this.lng=n},Kn.prototype.addBucket=function(n,s,a){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var E in this.indexes){var k=this.indexes[E];if(Number(E)>n.overscaledZ)for(var A in k){var B=k[A];B.tileID.isChildOf(n)&&B.findMatches(s.symbolInstances,n,m)}else{var Z=k[n.scaledTo(Number(E)).key];Z&&Z.findMatches(s.symbolInstances,n,m)}}for(var Y=0;Y<s.symbolInstances.length;Y++){var Q=s.symbolInstances.get(Y);Q.crossTileID||(Q.crossTileID=a.generate(),m[Q.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Sn(n,s.symbolInstances,s.bucketInstanceId),!0},Kn.prototype.removeBucketCrossTileIDs=function(n,s){for(var a in s.indexedSymbolInstances)for(var c=0,m=s.indexedSymbolInstances[a];c<m.length;c+=1)delete this.usedCrossTileIDs[n][m[c].crossTileID]},Kn.prototype.removeStaleBuckets=function(n){var s=!1;for(var a in this.indexes){var c=this.indexes[a];for(var m in c)n[c[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,c[m]),delete c[m],s=!0)}return s};var ke=function(){this.layerIndexes={},this.crossTileIDs=new Ii,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ke.prototype.addLayer=function(n,s,a){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new Kn);var m=!1,E={};c.handleWrapJump(a);for(var k=0,A=s;k<A.length;k+=1){var B=A[k],Z=B.getBucket(n);Z&&n.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(B.tileID,Z,this.crossTileIDs)&&(m=!0),E[Z.bucketInstanceId]=!0)}return c.removeStaleBuckets(E)&&(m=!0),m},ke.prototype.pruneUnusedLayers=function(n){var s={};for(var a in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var Zi=function(n,s){return o.emitValidationErrors(n,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},Pn=o.pick(Qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Wr=o.pick(Qe,["setCenter","setZoom","setBearing","setPitch"]),fa=function(){var n={},s=o.styleSpec.$version;for(var a in o.styleSpec.$root){var c,m=o.styleSpec.$root[a];m.required&&(c=a==="version"?s:m.type==="array"?[]:{})!=null&&(n[a]=c)}return n}(),Cn=function(n){function s(a,c){var m=this;c===void 0&&(c={}),n.call(this),this.map=a,this.dispatcher=new Ar(Be(),this),this.imageManager=new Ue,this.imageManager.setEventedParent(this),this.glyphManager=new or(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ot(256,512),this.crossTileSymbolIndex=new ke,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var E=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(k){E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},function(A,B){if(o.triggerPluginCompletionEvent(A),B&&B.every(function(Y){return Y}))for(var Z in E.sourceCaches)E.sourceCaches[Z].reload()})}),this.on("data",function(k){if(k.dataType==="source"&&k.sourceDataType==="metadata"){var A=m.sourceCaches[k.sourceId];if(A){var B=A.getSource();if(B&&B.vectorLayerIds)for(var Z in m._layers){var Y=m._layers[Z];Y.source===B.id&&m._validateLayer(Y)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var E=typeof c.validate=="boolean"?c.validate:!o.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);var k=this.map._requestManager.transformRequest(a,o.ResourceType.Style);this._request=o.getJSON(k,function(A,B){m._request=null,A?m.fire(new o.ErrorEvent(A)):B&&m._load(B,E)})},s.prototype.loadJSON=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){m._request=null,m._load(a,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(fa,!1)},s.prototype._load=function(a,c){if(!c||!Zi(this,o.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var E=We(this.stylesheet.layers);this._order=E.map(function(Z){return Z.id}),this._layers={},this._serializedLayers={};for(var k=0,A=E;k<A.length;k+=1){var B=A[k];(B=o.createStyleLayer(B)).setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Pr(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},s.prototype._loadSprite=function(a){var c=this;this._spriteRequest=function(m,E,k){var A,B,Z,Y=o.browser.devicePixelRatio>1?"@2x":"",Q=o.getJSON(E.transformRequest(E.normalizeSpriteURL(m,Y,".json"),o.ResourceType.SpriteJSON),function(ae,de){Q=null,Z||(Z=ae,A=de,ue())}),$=o.getImage(E.transformRequest(E.normalizeSpriteURL(m,Y,".png"),o.ResourceType.SpriteImage),function(ae,de){$=null,Z||(Z=ae,B=de,ue())});function ue(){if(Z)k(Z);else if(A&&B){var ae=o.browser.getImageData(B),de={};for(var oe in A){var me=A[oe],xe=me.width,Te=me.height,Re=me.x,Me=me.y,Ve=me.sdf,je=me.pixelRatio,He=me.stretchX,Xe=me.stretchY,ht=me.content,yt=new o.RGBAImage({width:xe,height:Te});o.RGBAImage.copy(ae,yt,{x:Re,y:Me},{x:0,y:0},{width:xe,height:Te}),de[oe]={data:yt,pixelRatio:je,sdf:Ve,stretchX:He,stretchY:Xe,content:ht}}k(null,de)}}return{cancel:function(){Q&&(Q.cancel(),Q=null),$&&($.cancel(),$=null)}}}(a,this.map._requestManager,function(m,E){if(c._spriteRequest=null,m)c.fire(new o.ErrorEvent(m));else if(E)for(var k in E)c.imageManager.addImage(k,E[k]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new o.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var m=a.sourceLayer;if(m){var E=c.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+E.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var c=[],m=0,E=a;m<E.length;m+=1){var k=this._layers[E[m]];k.type!=="custom"&&c.push(k.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);for(var k in(m.length||E.length)&&this._updateWorkerLayers(m,E),this._updatedSources){var A=this._updatedSources[k];A==="reload"?this._reloadSource(k):A==="clear"&&this._clearSource(k)}for(var B in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[B].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var Z={};for(var Y in this.sourceCaches){var Q=this.sourceCaches[Y];Z[Y]=Q.used,Q.used=!1}for(var $=0,ue=this._order;$<ue.length;$+=1){var ae=this._layers[ue[$]];ae.recalculate(a,this._availableImages),!ae.isHidden(a.zoom)&&ae.source&&(this.sourceCaches[ae.source].used=!0)}for(var de in Z){var oe=this.sourceCaches[de];Z[de]!==oe.used&&oe.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:de}))}this.light.recalculate(a),this.z=a.zoom,c&&this.fire(new o.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var c=this;if(this._checkLoaded(),Zi(this,o.validateStyle(a)))return!1;(a=o.clone$1(a)).layers=We(a.layers);var m=function(k,A){if(!k)return[{command:Qe.setStyle,args:[A]}];var B=[];try{if(!o.deepEqual(k.version,A.version))return[{command:Qe.setStyle,args:[A]}];o.deepEqual(k.center,A.center)||B.push({command:Qe.setCenter,args:[A.center]}),o.deepEqual(k.zoom,A.zoom)||B.push({command:Qe.setZoom,args:[A.zoom]}),o.deepEqual(k.bearing,A.bearing)||B.push({command:Qe.setBearing,args:[A.bearing]}),o.deepEqual(k.pitch,A.pitch)||B.push({command:Qe.setPitch,args:[A.pitch]}),o.deepEqual(k.sprite,A.sprite)||B.push({command:Qe.setSprite,args:[A.sprite]}),o.deepEqual(k.glyphs,A.glyphs)||B.push({command:Qe.setGlyphs,args:[A.glyphs]}),o.deepEqual(k.transition,A.transition)||B.push({command:Qe.setTransition,args:[A.transition]}),o.deepEqual(k.light,A.light)||B.push({command:Qe.setLight,args:[A.light]});var Z={},Y=[];(function($,ue,ae,de){var oe;for(oe in ue=ue||{},$=$||{})$.hasOwnProperty(oe)&&(ue.hasOwnProperty(oe)||Ze(oe,ae,de));for(oe in ue)ue.hasOwnProperty(oe)&&($.hasOwnProperty(oe)?o.deepEqual($[oe],ue[oe])||($[oe].type==="geojson"&&ue[oe].type==="geojson"&&sr($,ue,oe)?ae.push({command:Qe.setGeoJSONSourceData,args:[oe,ue[oe].data]}):Gt(oe,ue,ae,de)):Ft(oe,ue,ae))})(k.sources,A.sources,Y,Z);var Q=[];k.layers&&k.layers.forEach(function($){Z[$.source]?B.push({command:Qe.removeLayer,args:[$.id]}):Q.push($)}),B=B.concat(Y),function($,ue,ae){ue=ue||[];var de,oe,me,xe,Te,Re,Me,Ve=($=$||[]).map(Qt),je=ue.map(Qt),He=$.reduce(Jt,{}),Xe=ue.reduce(Jt,{}),ht=Ve.slice(),yt=Object.create(null);for(de=0,oe=0;de<Ve.length;de++)Xe.hasOwnProperty(me=Ve[de])?oe++:(ae.push({command:Qe.removeLayer,args:[me]}),ht.splice(ht.indexOf(me,oe),1));for(de=0,oe=0;de<je.length;de++)ht[ht.length-1-de]!==(me=je[je.length-1-de])&&(He.hasOwnProperty(me)?(ae.push({command:Qe.removeLayer,args:[me]}),ht.splice(ht.lastIndexOf(me,ht.length-oe),1)):oe++,ae.push({command:Qe.addLayer,args:[Xe[me],Re=ht[ht.length-de]]}),ht.splice(ht.length-de,0,me),yt[me]=!0);for(de=0;de<je.length;de++)if(xe=He[me=je[de]],Te=Xe[me],!yt[me]&&!o.deepEqual(xe,Te))if(o.deepEqual(xe.source,Te.source)&&o.deepEqual(xe["source-layer"],Te["source-layer"])&&o.deepEqual(xe.type,Te.type)){for(Me in Pt(xe.layout,Te.layout,ae,me,null,Qe.setLayoutProperty),Pt(xe.paint,Te.paint,ae,me,null,Qe.setPaintProperty),o.deepEqual(xe.filter,Te.filter)||ae.push({command:Qe.setFilter,args:[me,Te.filter]}),o.deepEqual(xe.minzoom,Te.minzoom)&&o.deepEqual(xe.maxzoom,Te.maxzoom)||ae.push({command:Qe.setLayerZoomRange,args:[me,Te.minzoom,Te.maxzoom]}),xe)xe.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Pt(xe[Me],Te[Me],ae,me,Me.slice(6),Qe.setPaintProperty):o.deepEqual(xe[Me],Te[Me])||ae.push({command:Qe.setLayerProperty,args:[me,Me,Te[Me]]}));for(Me in Te)Te.hasOwnProperty(Me)&&!xe.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Pt(xe[Me],Te[Me],ae,me,Me.slice(6),Qe.setPaintProperty):o.deepEqual(xe[Me],Te[Me])||ae.push({command:Qe.setLayerProperty,args:[me,Me,Te[Me]]}))}else ae.push({command:Qe.removeLayer,args:[me]}),Re=ht[ht.lastIndexOf(me)+1],ae.push({command:Qe.addLayer,args:[Te,Re]})}(Q,A.layers,B)}catch($){console.warn("Unable to compute style diff:",$),B=[{command:Qe.setStyle,args:[A]}]}return B}(this.serialize(),a).filter(function(k){return!(k.command in Wr)});if(m.length===0)return!1;var E=m.filter(function(k){return!(k.command in Pn)});if(E.length>0)throw new Error("Unimplemented: "+E.map(function(k){return k.command}).join(", ")+".");return m.forEach(function(k){k.command!=="setTransition"&&c[k.command].apply(c,k.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,c),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,c){this.imageManager.updateImage(a,c)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,c,m){var E=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.validateStyle.source,"sources."+a,c,null,m))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var k=this.sourceCaches[a]=new se(a,c,this.dispatcher);k.style=this,k.setEventedParent(this,function(){return{isSourceLoaded:E.loaded(),source:k.serialize(),sourceId:a}}),k.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new o.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded(),this.sourceCaches[a].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var E=a.id;if(this.getLayer(E))this.fire(new o.ErrorEvent(new Error('Layer with id "'+E+'" already exists on this map')));else{var k;if(a.type==="custom"){if(Zi(this,o.validateCustomStyleLayer(a)))return;k=o.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(E,a.source),a=o.clone$1(a),a=o.extend(a,{source:E})),this._validate(o.validateStyle.layer,"layers."+E,a,{arrayIndex:-1},m))return;k=o.createStyleLayer(a),this._validateLayer(k),k.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[k.id]=k.serialize()}var A=c?this._order.indexOf(c):this._order.length;if(c&&A===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(A,0,E),this._layerOrderChanged=!0,this._layers[E]=k,this._removedLayers[E]&&k.source&&k.type!=="custom"){var B=this._removedLayers[E];delete this._removedLayers[E],B.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}},s.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var m=this._order.indexOf(a);this._order.splice(m,1);var E=c?this._order.indexOf(c):this._order.length;c&&E===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(E,0,a),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,c,m){this._checkLoaded();var E=this.getLayer(a);E?E.minzoom===c&&E.maxzoom===m||(c!=null&&(E.minzoom=c),m!=null&&(E.maxzoom=m),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var E=this.getLayer(a);if(E){if(!o.deepEqual(E.filter,c))return c==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(o.validateStyle.filter,"layers."+E.id+".filter",c,null,m)||(E.filter=o.clone$1(c),this._updateLayer(E)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return o.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(a);k?o.deepEqual(k.getLayoutProperty(c),m)||(k.setLayoutProperty(c,m,E),this._updateLayer(k)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,c){var m=this.getLayer(a);if(m)return m.getLayoutProperty(c);this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(a);k?o.deepEqual(k.getPaintProperty(c),m)||(k.setPaintProperty(c,m,E)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},s.prototype.setFeatureState=function(a,c){this._checkLoaded();var m=a.source,E=a.sourceLayer,k=this.sourceCaches[m];if(k!==void 0){var A=k.getSource().type;A==="geojson"&&E?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||E?(a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),k.setFeatureState(E,a.id,c)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,c){this._checkLoaded();var m=a.source,E=this.sourceCaches[m];if(E!==void 0){var k=E.getSource().type,A=k==="vector"?a.sourceLayer:void 0;k!=="vector"||A?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(A,a.id,c):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,m=a.sourceLayer,E=this.sourceCaches[c];if(E!==void 0){if(E.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.getFeatureState(m,a.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var c=this,m=function(He){return c._layers[He].type==="fill-extrusion"},E={},k=[],A=this._order.length-1;A>=0;A--){var B=this._order[A];if(m(B)){E[B]=A;for(var Z=0,Y=a;Z<Y.length;Z+=1){var Q=Y[Z][B];if(Q)for(var $=0,ue=Q;$<ue.length;$+=1)k.push(ue[$])}}}k.sort(function(He,Xe){return Xe.intersectionZ-He.intersectionZ});for(var ae=[],de=this._order.length-1;de>=0;de--){var oe=this._order[de];if(m(oe))for(var me=k.length-1;me>=0;me--){var xe=k[me].feature;if(E[xe.layer.id]<de)break;ae.push(xe),k.pop()}else for(var Te=0,Re=a;Te<Re.length;Te+=1){var Me=Re[Te][oe];if(Me)for(var Ve=0,je=Me;Ve<je.length;Ve+=1)ae.push(je[Ve].feature)}}return ae},s.prototype.queryRenderedFeatures=function(a,c,m){c&&c.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var E={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var k=0,A=c.layers;k<A.length;k+=1){var B=A[k],Z=this._layers[B];if(!Z)return this.fire(new o.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be queried for features."))),[];E[Z.source]=!0}}var Y=[];for(var Q in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!E[Q]||Y.push(ri(this.sourceCaches[Q],this._layers,this._serializedLayers,a,c,m));return this.placement&&Y.push(function($,ue,ae,de,oe,me,xe){for(var Te={},Re=me.queryRenderedSymbols(de),Me=[],Ve=0,je=Object.keys(Re).map(Number);Ve<je.length;Ve+=1)Me.push(xe[je[Ve]]);Me.sort(Ia);for(var He=function(){var Et=ht[Xe],rr=Et.featureIndex.lookupSymbolFeatures(Re[Et.bucketInstanceId],ue,Et.bucketIndex,Et.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,$);for(var st in rr){var Tt=Te[st]=Te[st]||[],Nt=rr[st];Nt.sort(function(Vt,xt){var zt=Et.featureSortOrder;if(zt){var Oi=zt.indexOf(Vt.featureIndex);return zt.indexOf(xt.featureIndex)-Oi}return xt.featureIndex-Vt.featureIndex});for(var Rt=0,Ct=Nt;Rt<Ct.length;Rt+=1)Tt.push(Ct[Rt])}},Xe=0,ht=Me;Xe<ht.length;Xe+=1)He();var yt=function(Et){Te[Et].forEach(function(rr){var st=rr.feature,Tt=ae[$[Et].source].getFeatureState(st.layer["source-layer"],st.id);st.source=st.layer.source,st.layer["source-layer"]&&(st.sourceLayer=st.layer["source-layer"]),st.state=Tt})};for(var It in Te)yt(It);return Te}(this._layers,this._serializedLayers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Y)},s.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var m=this.sourceCaches[a];return m?function(E,k){for(var A=E.getRenderableIds().map(function(ue){return E.getTileByID(ue)}),B=[],Z={},Y=0;Y<A.length;Y++){var Q=A[Y],$=Q.tileID.canonical.key;Z[$]||(Z[$]=!0,Q.querySourceFeatures(B,k))}return B}(m,c):[]},s.prototype.addSourceType=function(a,c,m){return s.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,c){c===void 0&&(c={}),this._checkLoaded();var m=this.light.getLight(),E=!1;for(var k in a)if(!o.deepEqual(a[k],m[k])){E=!0;break}if(E){var A={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(A)}},s.prototype._validate=function(a,c,m,E,k){return k===void 0&&(k={}),(!k||k.validate!==!1)&&Zi(this,a.call(o.validateStyle,o.extend({key:c,style:this.serialize(),value:m,styleSpec:o.styleSpec},E)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,c,m,E,k){k===void 0&&(k=!1);for(var A=!1,B=!1,Z={},Y=0,Q=this._order;Y<Q.length;Y+=1){var $=this._layers[Q[Y]];if($.type==="symbol"){if(!Z[$.source]){var ue=this.sourceCaches[$.source];Z[$.source]=ue.getRenderableIds(!0).map(function(xe){return ue.getTileByID(xe)}).sort(function(xe,Te){return Te.tileID.overscaledZ-xe.tileID.overscaledZ||(xe.tileID.isLessThan(Te.tileID)?-1:1)})}var ae=this.crossTileSymbolIndex.addLayer($,Z[$.source],a.center.lng);A=A||ae}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),a.zoom))&&(this.pauseablePlacement=new hl(a,this._order,k,c,m,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),B=!0),A&&this.pauseablePlacement.placement.setStale()),B||A)for(var de=0,oe=this._order;de<oe.length;de+=1){var me=this._layers[oe[de]];me.type==="symbol"&&this.placement.updateLayerOpacities(me,Z[me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();var E=this.sourceCaches[c.source];E&&E.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(a,c,m){this.glyphManager.getGlyphs(c.stacks,m)},s.prototype.getResource=function(a,c,m){return o.makeRequest(c,m)},s}(o.Evented);Cn.getSourceType=function(n){return Mi[n]},Cn.setSourceType=function(n,s){Mi[n]=s},Cn.registerForPluginStateChange=o.registerForPluginStateChange;var Bi=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ql=Rr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),$l=Rr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),tp=Rr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),hf=Rr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),rp=Rr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),pf=Rr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ip=Rr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ps=Rr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),eu=Rr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),_o=Rr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),jc=Rr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Hu=Rr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Xu=Rr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),pl=Rr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),ii=Rr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),np=Rr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),bo=Rr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ns=Rr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),fl=Rr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),xo=Rr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Cs=Rr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),dl=Rr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Dn=Rr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),$i=Rr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ja=Rr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ds=Rr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Rr(n,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=E?E.concat(m):m,A={};return{fragmentSource:n=n.replace(a,function(B,Z,Y,Q,$){return A[$]=!0,Z==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
varying `+Y+" "+Q+" "+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`}),vertexSource:s=s.replace(a,function(B,Z,Y,Q,$){var ue=Q==="float"?"vec2":"vec4",ae=$.match(/color/)?"color":ue;return A[$]?Z==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+Y+" "+ue+" a_"+$+`;
varying `+Y+" "+Q+" "+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = a_"+$+`;
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = unpack_mix_"+ae+"(a_"+$+", u_"+$+`_t);
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:Z==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+Y+" "+ue+" a_"+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = a_"+$+`;
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = unpack_mix_"+ae+"(a_"+$+", u_"+$+`_t);
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`}),staticAttributes:c,staticUniforms:k}}var Wu=Object.freeze({__proto__:null,prelude:Ql,background:$l,backgroundPattern:tp,circle:hf,clippingMask:rp,heatmap:pf,heatmapTexture:ip,collisionBox:Ps,collisionCircle:eu,debug:_o,fill:jc,fillOutline:Hu,fillOutlinePattern:Xu,fillPattern:pl,fillExtrusion:ii,fillExtrusionPattern:np,hillshadePrepare:bo,hillshade:ns,line:fl,lineGradient:xo,linePattern:Cs,lineSDF:dl,raster:Dn,symbolIcon:$i,symbolSDF:Ja,symbolTextAndIcon:Ds}),ff=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function df(n){for(var s=[],a=0;a<n.length;a++)if(n[a]!==null){var c=n[a].split(" ");s.push(c.pop())}return s}ff.prototype.bind=function(n,s,a,c,m,E,k,A){this.context=n;for(var B=this.boundPaintVertexBuffers.length!==c.length,Z=0;!B&&Z<c.length;Z++)this.boundPaintVertexBuffers[Z]!==c[Z]&&(B=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!B&&this.boundIndexBuffer===m&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===A?(n.bindVertexArrayOES.set(this.vao),k&&k.bind(),m&&m.dynamicDraw&&m.bind(),A&&A.bind()):this.freshBind(s,a,c,m,E,k,A)},ff.prototype.freshBind=function(n,s,a,c,m,E,k){var A,B=n.numAttributes,Z=this.context,Y=Z.gl;if(Z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Z.extVertexArrayObject.createVertexArrayOES(),Z.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=c,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=k;else{A=Z.currentNumAttributes||0;for(var Q=B;Q<A;Q++)Y.disableVertexAttribArray(Q)}s.enableAttributes(Y,n);for(var $=0,ue=a;$<ue.length;$+=1)ue[$].enableAttributes(Y,n);E&&E.enableAttributes(Y,n),k&&k.enableAttributes(Y,n),s.bind(),s.setVertexAttribPointers(Y,n,m);for(var ae=0,de=a;ae<de.length;ae+=1){var oe=de[ae];oe.bind(),oe.setVertexAttribPointers(Y,n,m)}E&&(E.bind(),E.setVertexAttribPointers(Y,n,m)),c&&c.bind(),k&&(k.bind(),k.setVertexAttribPointers(Y,n,m)),Z.currentNumAttributes=B},ff.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var tu=function(n,s,a,c,m,E){var k=n.gl;this.program=k.createProgram();for(var A=df(a.staticAttributes),B=c?c.getBinderAttributes():[],Z=A.concat(B),Y=a.staticUniforms?df(a.staticUniforms):[],Q=c?c.getBinderUniforms():[],$=[],ue=0,ae=Y.concat(Q);ue<ae.length;ue+=1){var de=ae[ue];$.indexOf(de)<0&&$.push(de)}var oe=c?c.defines():[];E&&oe.push("#define OVERDRAW_INSPECTOR;");var me=oe.concat(Ql.fragmentSource,a.fragmentSource).join(`
`),xe=oe.concat(Ql.vertexSource,a.vertexSource).join(`
`),Te=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Te,me),k.compileShader(Te),k.attachShader(this.program,Te);var Re=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Re,xe),k.compileShader(Re),k.attachShader(this.program,Re),this.attributes={};var Me={};this.numAttributes=Z.length;for(var Ve=0;Ve<this.numAttributes;Ve++)Z[Ve]&&(k.bindAttribLocation(this.program,Ve,Z[Ve]),this.attributes[Z[Ve]]=Ve);k.linkProgram(this.program),k.deleteShader(Re),k.deleteShader(Te);for(var je=0;je<$.length;je++){var He=$[je];if(He&&!Me[He]){var Xe=k.getUniformLocation(this.program,He);Xe&&(Me[He]=Xe)}}this.fixedUniforms=m(n,Me),this.binderUniforms=c?c.getUniforms(n,Me):[]}}};function ru(n,s,a){var c=1/Dr(a,1,s.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),E=a.tileSize*Math.pow(2,s.transform.tileZoom)/m,k=E*(a.tileID.canonical.x+a.tileID.wrap*m),A=E*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[k>>16,A>>16],u_pixel_coord_lower:[65535&k,65535&A]}}tu.prototype.draw=function(n,s,a,c,m,E,k,A,B,Z,Y,Q,$,ue,ae,de){var oe,me=n.gl;if(!this.failedToCreate){for(var xe in n.program.set(this.program),n.setDepthMode(a),n.setStencilMode(c),n.setColorMode(m),n.setCullFace(E),this.fixedUniforms)this.fixedUniforms[xe].set(k[xe]);ue&&ue.setUniforms(n,this.binderUniforms,Q,{zoom:$});for(var Te=(oe={},oe[me.LINES]=2,oe[me.TRIANGLES]=3,oe[me.LINE_STRIP]=1,oe)[s],Re=0,Me=Y.get();Re<Me.length;Re+=1){var Ve=Me[Re],je=Ve.vaos||(Ve.vaos={});(je[A]||(je[A]=new ff)).bind(n,this,B,ue?ue.getPaintVertexBuffers():[],Z,Ve.vertexOffset,ae,de),me.drawElements(s,Ve.primitiveLength*Te,me.UNSIGNED_SHORT,Ve.primitiveOffset*Te*2)}}};var mf=function(n,s,a,c){var m=s.style.light,E=m.properties.get("position"),k=[E.x,E.y,E.z],A=o.create$1();m.properties.get("anchor")==="viewport"&&o.fromRotation(A,-s.transform.angle),o.transformMat3(k,k,A);var B=m.properties.get("color");return{u_matrix:n,u_lightpos:k,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+a,u_opacity:c}},Qa=function(n,s,a,c,m,E,k){return o.extend(mf(n,s,a,c),ru(E,s,k),{u_height_factor:-Math.pow(2,m.overscaledZ)/k.tileSize/8})},wo=function(n){return{u_matrix:n}},ml=function(n,s,a,c){return o.extend(wo(n),ru(a,s,c))},yf=function(n,s){return{u_matrix:n,u_world:s}},yl=function(n,s,a,c,m){return o.extend(ml(n,s,a,c),{u_world:m})},Ms=function(n,s,a,c){var m,E,k=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var A=Dr(a,1,k.zoom);m=!0,E=[A,A]}else m=!1,E=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:E}},vl=function(n,s,a){var c=Dr(a,1,s.zoom),m=Math.pow(2,s.zoom-a.tileID.overscaledZ),E=a.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*m),s.pixelsToGLUnits[1]/(c*m)],u_overscale_factor:E}},ap=function(n,s,a){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},as=function(n,s,a){return a===void 0&&(a=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:a}},Ba=function(n){return{u_matrix:n}},vf=function(n,s,a,c){return{u_matrix:n,u_extrude_scale:Dr(s,1,a),u_intensity:c}},Eo=function(n,s,a){var c=n.transform;return{u_matrix:gf(n,s,a),u_ratio:1/Dr(s,1,c.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Ir=function(n,s,a,c){return o.extend(Eo(n,s,a),{u_image:0,u_image_height:c})},Zc=function(n,s,a,c){var m=n.transform,E=$a(s,m);return{u_matrix:gf(n,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Dr(s,1,m.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[E,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},xd=function(n,s,a,c,m){var E=n.lineAtlas,k=$a(s,n.transform),A=a.layout.get("line-cap")==="round",B=E.getDash(c.from,A),Z=E.getDash(c.to,A),Y=B.width*m.fromScale,Q=Z.width*m.toScale;return o.extend(Eo(n,s,a),{u_patternscale_a:[k/Y,-B.height/2],u_patternscale_b:[k/Q,-Z.height/2],u_sdfgamma:E.width/(256*Math.min(Y,Q)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:Z.y,u_mix:m.t})};function $a(n,s){return 1/Dr(n,1,s.tileZoom)}function gf(n,s,a){return n.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var Ls=function(n,s,a,c,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=m.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:eo(m.paint.get("raster-hue-rotate"))};var E,k};function eo(n){n*=Math.PI/180;var s=Math.sin(n),a=Math.cos(n);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var So,iu=function(n,s,a,c,m,E,k,A,B,Z){var Y=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:Y.width/Y.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:k,u_coord_matrix:A,u_is_text:+B,u_pitch_with_map:+c,u_texsize:Z,u_texture:0}},os=function(n,s,a,c,m,E,k,A,B,Z,Y){var Q=m.transform;return o.extend(iu(n,s,a,c,m,E,k,A,B,Z),{u_gamma_scale:c?Math.cos(Q._pitch)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+Y})},_f=function(n,s,a,c,m,E,k,A,B,Z){return o.extend(os(n,s,a,c,m,E,k,A,!0,B,!0),{u_texsize_icon:Z,u_texture_icon:1})},Yu=function(n,s,a){return{u_matrix:n,u_opacity:s,u_color:a}},ko=function(n,s,a,c,m,E){return o.extend(function(k,A,B,Z){var Y=B.imageManager.getPattern(k.from.toString()),Q=B.imageManager.getPattern(k.to.toString()),$=B.imageManager.getPixelSize(),ue=$.width,ae=$.height,de=Math.pow(2,Z.tileID.overscaledZ),oe=Z.tileSize*Math.pow(2,B.transform.tileZoom)/de,me=oe*(Z.tileID.canonical.x+Z.tileID.wrap*de),xe=oe*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[ue,ae],u_mix:A.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Dr(Z,1,B.transform.tileZoom),u_pixel_coord_upper:[me>>16,xe>>16],u_pixel_coord_lower:[65535&me,65535&xe]}}(c,E,a,m),{u_matrix:n,u_opacity:s})},nu={fillExtrusion:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new o.Uniform1f(n,s.u_height_factor),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new o.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new o.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new o.UniformColor(n,s.u_color),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_overlay:new o.Uniform1i(n,s.u_overlay),u_overlay_scale:new o.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new o.Uniform1f(n,s.u_extrude_scale),u_intensity:new o.Uniform1f(n,s.u_intensity),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_color_ramp:new o.Uniform1i(n,s.u_color_ramp),u_opacity:new o.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_latrange:new o.Uniform2f(n,s.u_latrange),u_light:new o.Uniform2f(n,s.u_light),u_shadow:new o.UniformColor(n,s.u_shadow),u_highlight:new o.UniformColor(n,s.u_highlight),u_accent:new o.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_dimension:new o.Uniform2f(n,s.u_dimension),u_zoom:new o.Uniform1f(n,s.u_zoom),u_unpack:new o.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_image:new o.Uniform1i(n,s.u_image),u_image_height:new o.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_texsize:new o.Uniform2f(n,s.u_texsize),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_image:new o.Uniform1i(n,s.u_image),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new o.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new o.Uniform1f(n,s.u_sdfgamma),u_image:new o.Uniform1i(n,s.u_image),u_tex_y_a:new o.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new o.Uniform1f(n,s.u_tex_y_b),u_mix:new o.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new o.Uniform2f(n,s.u_tl_parent),u_scale_parent:new o.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new o.Uniform1f(n,s.u_buffer_scale),u_fade_t:new o.Uniform1f(n,s.u_fade_t),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image0:new o.Uniform1i(n,s.u_image0),u_image1:new o.Uniform1i(n,s.u_image1),u_brightness_low:new o.Uniform1f(n,s.u_brightness_low),u_brightness_high:new o.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new o.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new o.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new o.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texsize_icon:new o.Uniform2f(n,s.u_texsize_icon),u_texture:new o.Uniform1i(n,s.u_texture),u_texture_icon:new o.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_color:new o.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image:new o.Uniform1i(n,s.u_image),u_pattern_tl_a:new o.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(n,s.u_pattern_br_b),u_texsize:new o.Uniform2f(n,s.u_texsize),u_mix:new o.Uniform1f(n,s.u_mix),u_pattern_size_a:new o.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new o.Uniform1f(n,s.u_scale_a),u_scale_b:new o.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(n,s.u_tile_units_to_pixels)}}};function au(n,s,a,c,m,E,k){for(var A=n.context,B=A.gl,Z=n.useProgram("collisionBox"),Y=[],Q=0,$=0,ue=0;ue<c.length;ue++){var ae=c[ue],de=s.getTile(ae),oe=de.getBucket(a);if(oe){var me=ae.posMatrix;m[0]===0&&m[1]===0||(me=n.translatePosMatrix(ae.posMatrix,de,m,E));var xe=k?oe.textCollisionBox:oe.iconCollisionBox,Te=oe.collisionCircleArray;if(Te.length>0){var Re=o.create(),Me=me;o.mul(Re,oe.placementInvProjMatrix,n.transform.glCoordMatrix),o.mul(Re,Re,oe.placementViewportMatrix),Y.push({circleArray:Te,circleOffset:$,transform:Me,invTransform:Re}),$=Q+=Te.length/4}xe&&Z.draw(A,B.LINES,re.disabled,ce.disabled,n.colorModeForRenderPass(),be.disabled,vl(me,n.transform,de),a.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,n.transform.zoom,null,null,xe.collisionVertexBuffer)}}if(k&&Y.length){var Ve=n.useProgram("collisionCircle"),je=new o.StructArrayLayout2f1f2i16;je.resize(4*Q),je._trim();for(var He=0,Xe=0,ht=Y;Xe<ht.length;Xe+=1)for(var yt=ht[Xe],It=0;It<yt.circleArray.length/4;It++){var Et=4*It,rr=yt.circleArray[Et+0],st=yt.circleArray[Et+1],Tt=yt.circleArray[Et+2],Nt=yt.circleArray[Et+3];je.emplace(He++,rr,st,Tt,Nt,0),je.emplace(He++,rr,st,Tt,Nt,1),je.emplace(He++,rr,st,Tt,Nt,2),je.emplace(He++,rr,st,Tt,Nt,3)}(!So||So.length<2*Q)&&(So=function(pi){var Rn=2*pi,Vi=new o.StructArrayLayout3ui6;Vi.resize(Rn),Vi._trim();for(var fi=0;fi<Rn;fi++){var zi=6*fi;Vi.uint16[zi+0]=4*fi+0,Vi.uint16[zi+1]=4*fi+1,Vi.uint16[zi+2]=4*fi+2,Vi.uint16[zi+3]=4*fi+2,Vi.uint16[zi+4]=4*fi+3,Vi.uint16[zi+5]=4*fi+0}return Vi}(Q));for(var Rt=A.createIndexBuffer(So,!0),Ct=A.createVertexBuffer(je,o.collisionCircleLayout.members,!0),Vt=0,xt=Y;Vt<xt.length;Vt+=1){var zt=xt[Vt],Oi=ap(zt.transform,zt.invTransform,n.transform);Ve.draw(A,B.TRIANGLES,re.disabled,ce.disabled,n.colorModeForRenderPass(),be.disabled,Oi,a.id,Ct,Rt,o.SegmentVector.simpleSegment(0,2*zt.circleOffset,zt.circleArray.length,zt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Ct.destroy(),Rt.destroy()}}var ia=o.identity(new Float32Array(16));function Gc(n,s,a,c,m,E){var k=o.getAnchorAlignment(n),A=-(k.horizontalAlign-.5)*s,B=-(k.verticalAlign-.5)*a,Z=o.evaluateVariableOffset(n,c);return new o.Point((A/m+Z[0])*E,(B/m+Z[1])*E)}function bf(n,s,a,c,m,E,k,A,B,Z,Y){var Q=n.text.placedSymbolArray,$=n.text.dynamicLayoutVertexArray,ue=n.icon.dynamicLayoutVertexArray,ae={};$.clear();for(var de=0;de<Q.length;de++){var oe=Q.get(de),me=oe.hidden||!oe.crossTileID||n.allowVerticalPlacement&&!oe.placedOrientation?null:c[oe.crossTileID];if(me){var xe=new o.Point(oe.anchorX,oe.anchorY),Te=Xt(xe,a?A:k),Re=nr(E.cameraToCenterDistance,Te.signedDistanceFromCamera),Me=m.evaluateSizeForFeature(n.textSizeData,Z,oe)*Re/o.ONE_EM;a&&(Me*=n.tilePixelRatio/B);for(var Ve=Gc(me.anchor,me.width,me.height,me.textOffset,me.textBoxScale,Me),je=a?Xt(xe.add(Ve),k).point:Te.point.add(s?Ve.rotate(-E.angle):Ve),He=n.allowVerticalPlacement&&oe.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Xe=0;Xe<oe.numGlyphs;Xe++)o.addDynamicAttributes($,je,He);Y&&oe.associatedIconIndex>=0&&(ae[oe.associatedIconIndex]={shiftedAnchor:je,angle:He})}else qi(oe.numGlyphs,$)}if(Y){ue.clear();for(var ht=n.icon.placedSymbolArray,yt=0;yt<ht.length;yt++){var It=ht.get(yt);if(It.hidden)qi(It.numGlyphs,ue);else{var Et=ae[yt];if(Et)for(var rr=0;rr<It.numGlyphs;rr++)o.addDynamicAttributes(ue,Et.shiftedAnchor,Et.angle);else qi(It.numGlyphs,ue)}}n.icon.dynamicLayoutVertexBuffer.updateData(ue)}n.text.dynamicLayoutVertexBuffer.updateData($)}function xf(n,s,a){return a.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Oa(n,s,a,c,m,E,k,A,B,Z,Y,Q){for(var $=n.context,ue=$.gl,ae=n.transform,de=A==="map",oe=B==="map",me=de&&a.layout.get("symbol-placement")!=="point",xe=de&&!oe&&!me,Te=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Re=!1,Me=n.depthModeForSublayer(0,re.ReadOnly),Ve=a.layout.get("text-variable-anchor"),je=[],He=0,Xe=c;He<Xe.length;He+=1){var ht=Xe[He],yt=s.getTile(ht),It=yt.getBucket(a);if(It){var Et=m?It.text:It.icon;if(Et&&Et.segments.get().length){var rr=Et.programConfigurations.get(a.id),st=m||It.sdfIcons,Tt=m?It.textSizeData:It.iconSizeData,Nt=oe||ae.pitch!==0,Rt=n.useProgram(xf(st,m,It),rr),Ct=o.evaluateSizeForZoom(Tt,ae.zoom),Vt=void 0,xt=[0,0],zt=void 0,Oi=void 0,pi=null,Rn=void 0;if(m)zt=yt.glyphAtlasTexture,Oi=ue.LINEAR,Vt=yt.glyphAtlasTexture.size,It.iconsInText&&(xt=yt.imageAtlasTexture.size,pi=yt.imageAtlasTexture,Rn=Nt||n.options.rotating||n.options.zooming||Tt.kind==="composite"||Tt.kind==="camera"?ue.LINEAR:ue.NEAREST);else{var Vi=a.layout.get("icon-size").constantOr(0)!==1||It.iconsNeedLinear;zt=yt.imageAtlasTexture,Oi=st||n.options.rotating||n.options.zooming||Vi||Nt?ue.LINEAR:ue.NEAREST,Vt=yt.imageAtlasTexture.size}var fi=Dr(yt,1,n.transform.zoom),zi=mr(ht.posMatrix,oe,de,n.transform,fi),Ei=pr(ht.posMatrix,oe,de,n.transform,fi),Pi=Ve&&It.hasTextData(),Bn=a.layout.get("icon-text-fit")!=="none"&&Pi&&It.hasIconData();me&&pa(It,ht.posMatrix,n,m,zi,Ei,oe,Z);var Ki=n.translatePosMatrix(ht.posMatrix,yt,E,k),so=me||m&&Ve||Bn?ia:zi,Qn=n.translatePosMatrix(Ei,yt,E,k,!0),yp=st&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,uu={program:Rt,buffers:Et,uniformValues:st?It.iconsInText?_f(Tt.kind,Ct,xe,oe,n,Ki,so,Qn,Vt,xt):os(Tt.kind,Ct,xe,oe,n,Ki,so,Qn,m,Vt,!0):iu(Tt.kind,Ct,xe,oe,n,Ki,so,Qn,m,Vt),atlasTexture:zt,atlasTextureIcon:pi,atlasInterpolation:Oi,atlasInterpolationIcon:Rn,isSDF:st,hasHalo:yp};if(Te&&It.canOverlap){Re=!0;for(var qa=0,Lo=Et.segments.get();qa<Lo.length;qa+=1){var nc=Lo[qa];je.push({segments:new o.SegmentVector([nc]),sortKey:nc.sortKey,state:uu})}}else je.push({segments:Et.segments,sortKey:0,state:uu})}}}Re&&je.sort(function(Fs,ba){return Fs.sortKey-ba.sortKey});for(var ga=0,Tl=je;ga<Tl.length;ga+=1){var Ro=Tl[ga],en=Ro.state;if($.activeTexture.set(ue.TEXTURE0),en.atlasTexture.bind(en.atlasInterpolation,ue.CLAMP_TO_EDGE),en.atlasTextureIcon&&($.activeTexture.set(ue.TEXTURE1),en.atlasTextureIcon&&en.atlasTextureIcon.bind(en.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),en.isSDF){var _a=en.uniformValues;en.hasHalo&&(_a.u_is_halo=1,Kc(en.buffers,Ro.segments,a,n,en.program,Me,Y,Q,_a)),_a.u_is_halo=0}Kc(en.buffers,Ro.segments,a,n,en.program,Me,Y,Q,en.uniformValues)}}function Kc(n,s,a,c,m,E,k,A,B){var Z=c.context;m.draw(Z,Z.gl.TRIANGLES,E,k,A,be.disabled,B,a.id,n.layoutVertexBuffer,n.indexBuffer,s,a.paint,c.transform.zoom,n.programConfigurations.get(a.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Hc(n,s,a,c,m,E,k){var A,B,Z,Y,Q,$=n.context.gl,ue=a.paint.get("fill-pattern"),ae=ue&&ue.constantOr(1),de=a.getCrossfadeParameters();k?(B=ae&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",A=$.LINES):(B=ae?"fillPattern":"fill",A=$.TRIANGLES);for(var oe=0,me=c;oe<me.length;oe+=1){var xe=me[oe],Te=s.getTile(xe);if(!ae||Te.patternsLoaded()){var Re=Te.getBucket(a);if(Re){var Me=Re.programConfigurations.get(a.id),Ve=n.useProgram(B,Me);ae&&(n.context.activeTexture.set($.TEXTURE0),Te.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Me.updatePaintBuffers(de));var je=ue.constantOr(null);if(je&&Te.imageAtlas){var He=Te.imageAtlas,Xe=He.patternPositions[je.to.toString()],ht=He.patternPositions[je.from.toString()];Xe&&ht&&Me.setConstantPatternPositions(Xe,ht)}var yt=n.translatePosMatrix(xe.posMatrix,Te,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(k){Y=Re.indexBuffer2,Q=Re.segments2;var It=[$.drawingBufferWidth,$.drawingBufferHeight];Z=B==="fillOutlinePattern"&&ae?yl(yt,n,de,Te,It):yf(yt,It)}else Y=Re.indexBuffer,Q=Re.segments,Z=ae?ml(yt,n,de,Te):wo(yt);Ve.draw(n.context,A,m,n.stencilModeForClipping(xe),E,be.disabled,Z,a.id,Re.layoutVertexBuffer,Y,Q,a.paint,n.transform.zoom,Me)}}}}function Rs(n,s,a,c,m,E,k){for(var A=n.context,B=A.gl,Z=a.paint.get("fill-extrusion-pattern"),Y=Z.constantOr(1),Q=a.getCrossfadeParameters(),$=a.paint.get("fill-extrusion-opacity"),ue=0,ae=c;ue<ae.length;ue+=1){var de=ae[ue],oe=s.getTile(de),me=oe.getBucket(a);if(me){var xe=me.programConfigurations.get(a.id),Te=n.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",xe);Y&&(n.context.activeTexture.set(B.TEXTURE0),oe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),xe.updatePaintBuffers(Q));var Re=Z.constantOr(null);if(Re&&oe.imageAtlas){var Me=oe.imageAtlas,Ve=Me.patternPositions[Re.to.toString()],je=Me.patternPositions[Re.from.toString()];Ve&&je&&xe.setConstantPatternPositions(Ve,je)}var He=n.translatePosMatrix(de.posMatrix,oe,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Xe=a.paint.get("fill-extrusion-vertical-gradient"),ht=Y?Qa(He,n,Xe,$,de,Q,oe):mf(He,n,Xe,$);Te.draw(A,A.gl.TRIANGLES,m,E,k,be.backCCW,ht,a.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,a.paint,n.transform.zoom,xe)}}}function Bs(n,s,a,c,m,E){var k=n.context,A=k.gl,B=s.fbo;if(B){var Z=n.useProgram("hillshade");k.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,B.colorAttachment.get());var Y=function(Q,$,ue){var ae=ue.paint.get("hillshade-shadow-color"),de=ue.paint.get("hillshade-highlight-color"),oe=ue.paint.get("hillshade-accent-color"),me=ue.paint.get("hillshade-illumination-direction")*(Math.PI/180);ue.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=Q.transform.angle);var xe,Te,Re,Me=!Q.options.moving;return{u_matrix:Q.transform.calculatePosMatrix($.tileID.toUnwrapped(),Me),u_image:0,u_latrange:(xe=$.tileID,Te=Math.pow(2,xe.canonical.z),Re=xe.canonical.y,[new o.MercatorCoordinate(0,Re/Te).toLngLat().lat,new o.MercatorCoordinate(0,(Re+1)/Te).toLngLat().lat]),u_light:[ue.paint.get("hillshade-exaggeration"),me],u_shadow:ae,u_highlight:de,u_accent:oe}}(n,s,a);Z.draw(k,A.TRIANGLES,c,m,E,be.disabled,Y,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function ss(n,s,a,c,m,E){var k=n.context,A=k.gl,B=s.dem;if(B&&B.data){var Z=B.dim,Y=B.stride,Q=B.getPixels();if(k.activeTexture.set(A.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(Y),s.demTexture){var $=s.demTexture;$.update(Q,{premultiply:!1}),$.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else s.demTexture=new o.Texture(k,Q,A.RGBA,{premultiply:!1}),s.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);k.activeTexture.set(A.TEXTURE0);var ue=s.fbo;if(!ue){var ae=new o.Texture(k,{width:Z,height:Z,data:null},A.RGBA);ae.bind(A.LINEAR,A.CLAMP_TO_EDGE),(ue=s.fbo=k.createFramebuffer(Z,Z,!0)).colorAttachment.set(ae.texture)}k.bindFramebuffer.set(ue.framebuffer),k.viewport.set([0,0,Z,Z]),n.useProgram("hillshadePrepare").draw(k,A.TRIANGLES,c,m,E,be.disabled,function(de,oe){var me=oe.stride,xe=o.create();return o.ortho(xe,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(xe,xe,[0,-o.EXTENT,0]),{u_matrix:xe,u_image:1,u_dimension:[me,me],u_zoom:de.overscaledZ,u_unpack:oe.getUnpackVector()}}(s.tileID,B),a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function gl(n,s,a,c,m){var E=c.paint.get("raster-fade-duration");if(E>0){var k=o.browser.now(),A=(k-n.timeAdded)/E,B=s?(k-s.timeAdded)/E:-1,Z=a.getSource(),Y=m.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),Q=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(n.tileID.overscaledZ-Y),$=Q&&n.refreshedUponExpiration?1:o.clamp(Q?A:1-B,0,1);return n.refreshedUponExpiration&&A>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-$}:{opacity:$,mix:0}}return{opacity:1,mix:0}}var op=new o.Color(1,0,0,1),wf=new o.Color(0,1,0,1),_l=new o.Color(0,0,1,1),Io=new o.Color(1,0,1,1),sp=new o.Color(0,1,1,1);function Ju(n,s,a,c){Qu(n,0,s+a/2,n.transform.width,a,c)}function Xc(n,s,a,c){Qu(n,s-a/2,0,a,n.transform.height,c)}function Qu(n,s,a,c,m,E){var k=n.context,A=k.gl;A.enable(A.SCISSOR_TEST),A.scissor(s*o.browser.devicePixelRatio,a*o.browser.devicePixelRatio,c*o.browser.devicePixelRatio,m*o.browser.devicePixelRatio),k.clear({color:E}),A.disable(A.SCISSOR_TEST)}function ou(n,s,a){var c=n.context,m=c.gl,E=a.posMatrix,k=n.useProgram("debug"),A=re.disabled,B=ce.disabled,Z=n.colorModeForRenderPass();c.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),k.draw(c,m.LINE_STRIP,A,B,Z,be.disabled,as(E,o.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var Y=s.getTileByID(a.key).latestRawTileData,Q=Math.floor((Y&&Y.byteLength||0)/1024),$=s.getTile(a).tileSize,ue=512/Math.min($,512)*(a.overscaledZ/n.transform.zoom)*.5,ae=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(ae+=" => "+a.overscaledZ),function(de,oe){de.initDebugOverlayCanvas();var me=de.debugOverlayCanvas,xe=de.context.gl,Te=de.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,me.width,me.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(oe,5,5),Te.strokeText(oe,5,5),de.debugOverlayTexture.update(me),de.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(n,ae+" "+Q+"kb"),k.draw(c,m.TRIANGLES,A,B,ve.alphaBlended,be.disabled,as(E,o.Color.transparent,ue),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var bl={symbol:function(n,s,a,c,m){if(n.renderPass==="translucent"){var E=ce.disabled,k=n.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(A,B,Z,Y,Q,$,ue){for(var ae=B.transform,de=Q==="map",oe=$==="map",me=0,xe=A;me<xe.length;me+=1){var Te=xe[me],Re=Y.getTile(Te),Me=Re.getBucket(Z);if(Me&&Me.text&&Me.text.segments.get().length){var Ve=o.evaluateSizeForZoom(Me.textSizeData,ae.zoom),je=Dr(Re,1,B.transform.zoom),He=mr(Te.posMatrix,oe,de,B.transform,je),Xe=Z.layout.get("icon-text-fit")!=="none"&&Me.hasIconData();if(Ve){var ht=Math.pow(2,ae.zoom-Re.tileID.overscaledZ);bf(Me,de,oe,ue,o.symbolSize,ae,He,Te.posMatrix,ht,Ve,Xe)}}}}(c,n,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&Oa(n,s,a,c,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),E,k),a.paint.get("text-opacity").constantOr(1)!==0&&Oa(n,s,a,c,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),E,k),s.map.showCollisionBoxes&&(au(n,s,a,c,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),au(n,s,a,c,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),E=a.paint.get("circle-stroke-width"),k=a.paint.get("circle-stroke-opacity"),A=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||E.constantOr(1)!==0&&k.constantOr(1)!==0){for(var B=n.context,Z=B.gl,Y=n.depthModeForSublayer(0,re.ReadOnly),Q=ce.disabled,$=n.colorModeForRenderPass(),ue=[],ae=0;ae<c.length;ae++){var de=c[ae],oe=s.getTile(de),me=oe.getBucket(a);if(me){var xe=me.programConfigurations.get(a.id),Te={programConfiguration:xe,program:n.useProgram("circle",xe),layoutVertexBuffer:me.layoutVertexBuffer,indexBuffer:me.indexBuffer,uniformValues:Ms(n,de,oe,a)};if(A)for(var Re=0,Me=me.segments.get();Re<Me.length;Re+=1){var Ve=Me[Re];ue.push({segments:new o.SegmentVector([Ve]),sortKey:Ve.sortKey,state:Te})}else ue.push({segments:me.segments,sortKey:0,state:Te})}}A&&ue.sort(function(yt,It){return yt.sortKey-It.sortKey});for(var je=0,He=ue;je<He.length;je+=1){var Xe=He[je],ht=Xe.state;ht.program.draw(B,Z.TRIANGLES,Y,Q,$,be.disabled,ht.uniformValues,a.id,ht.layoutVertexBuffer,ht.indexBuffer,Xe.segments,a.paint,n.transform.zoom,ht.programConfiguration)}}}},heatmap:function(n,s,a,c){if(a.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,E=m.gl,k=ce.disabled,A=new ve([E.ONE,E.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ue,ae,de){var oe=ue.gl;ue.activeTexture.set(oe.TEXTURE1),ue.viewport.set([0,0,ae.width/4,ae.height/4]);var me=de.heatmapFbo;if(me)oe.bindTexture(oe.TEXTURE_2D,me.colorAttachment.get()),ue.bindFramebuffer.set(me.framebuffer);else{var xe=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,xe),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),me=de.heatmapFbo=ue.createFramebuffer(ae.width/4,ae.height/4,!1),function(Te,Re,Me,Ve){var je=Te.gl;je.texImage2D(je.TEXTURE_2D,0,je.RGBA,Re.width/4,Re.height/4,0,je.RGBA,Te.extRenderToTextureHalfFloat?Te.extTextureHalfFloat.HALF_FLOAT_OES:je.UNSIGNED_BYTE,null),Ve.colorAttachment.set(Me)}(ue,ae,xe,me)}})(m,n,a),m.clear({color:o.Color.transparent});for(var B=0;B<c.length;B++){var Z=c[B];if(!s.hasRenderableParent(Z)){var Y=s.getTile(Z),Q=Y.getBucket(a);if(Q){var $=Q.programConfigurations.get(a.id);n.useProgram("heatmap",$).draw(m,E.TRIANGLES,re.disabled,k,A,be.disabled,vf(Z.posMatrix,Y,n.transform.zoom,a.paint.get("heatmap-intensity")),a.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,a.paint,n.transform.zoom,$)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(ue,ae){var de=ue.context,oe=de.gl,me=ae.heatmapFbo;if(me){de.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,me.colorAttachment.get()),de.activeTexture.set(oe.TEXTURE1);var xe=ae.colorRampTexture;xe||(xe=ae.colorRampTexture=new o.Texture(de,ae.colorRamp,oe.RGBA)),xe.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),ue.useProgram("heatmapTexture").draw(de,oe.TRIANGLES,re.disabled,ce.disabled,ue.colorModeForRenderPass(),be.disabled,function(Te,Re,Me,Ve){var je=o.create();o.ortho(je,0,Te.width,Te.height,0,0,1);var He=Te.context.gl;return{u_matrix:je,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Re.paint.get("heatmap-opacity")}}(ue,ae),ae.id,ue.viewportBuffer,ue.quadTriangleIndexBuffer,ue.viewportSegments,ae.paint,ue.transform.zoom)}}(n,a))},line:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("line-opacity"),E=a.paint.get("line-width");if(m.constantOr(1)!==0&&E.constantOr(1)!==0)for(var k=n.depthModeForSublayer(0,re.ReadOnly),A=n.colorModeForRenderPass(),B=a.paint.get("line-dasharray"),Z=a.paint.get("line-pattern"),Y=Z.constantOr(1),Q=a.paint.get("line-gradient"),$=a.getCrossfadeParameters(),ue=Y?"linePattern":B?"lineSDF":Q?"lineGradient":"line",ae=n.context,de=ae.gl,oe=!0,me=0,xe=c;me<xe.length;me+=1){var Te=xe[me],Re=s.getTile(Te);if(!Y||Re.patternsLoaded()){var Me=Re.getBucket(a);if(Me){var Ve=Me.programConfigurations.get(a.id),je=n.context.program.get(),He=n.useProgram(ue,Ve),Xe=oe||He.program!==je,ht=Z.constantOr(null);if(ht&&Re.imageAtlas){var yt=Re.imageAtlas,It=yt.patternPositions[ht.to.toString()],Et=yt.patternPositions[ht.from.toString()];It&&Et&&Ve.setConstantPatternPositions(It,Et)}var rr=Y?Zc(n,Re,a,$):B?xd(n,Re,a,B,$):Q?Ir(n,Re,a,Me.lineClipsArray.length):Eo(n,Re,a);if(Y)ae.activeTexture.set(de.TEXTURE0),Re.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Ve.updatePaintBuffers($);else if(B&&(Xe||n.lineAtlas.dirty))ae.activeTexture.set(de.TEXTURE0),n.lineAtlas.bind(ae);else if(Q){var st=Me.gradients[a.id],Tt=st.texture;if(a.gradientVersion!==st.version){var Nt=256;if(a.stepInterpolant){var Rt=s.getSource().maxzoom,Ct=Te.canonical.z===Rt?Math.ceil(1<<n.transform.maxZoom-Te.canonical.z):1;Nt=o.clamp(o.nextPowerOfTwo(Me.maxLineLength/o.EXTENT*1024*Ct),256,ae.maxTextureSize)}st.gradient=o.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Nt,image:st.gradient||void 0,clips:Me.lineClipsArray}),st.texture?st.texture.update(st.gradient):st.texture=new o.Texture(ae,st.gradient,de.RGBA),st.version=a.gradientVersion,Tt=st.texture}ae.activeTexture.set(de.TEXTURE0),Tt.bind(a.stepInterpolant?de.NEAREST:de.LINEAR,de.CLAMP_TO_EDGE)}He.draw(ae,de.TRIANGLES,k,n.stencilModeForClipping(Te),A,be.disabled,rr,a.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,a.paint,n.transform.zoom,Ve,Me.layoutVertexBuffer2),oe=!1}}}}},fill:function(n,s,a,c){var m=a.paint.get("fill-color"),E=a.paint.get("fill-opacity");if(E.constantOr(1)!==0){var k=n.colorModeForRenderPass(),A=a.paint.get("fill-pattern"),B=n.opaquePassEnabledForLayer()&&!A.constantOr(1)&&m.constantOr(o.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===B){var Z=n.depthModeForSublayer(1,n.renderPass==="opaque"?re.ReadWrite:re.ReadOnly);Hc(n,s,a,c,Z,k,!1)}if(n.renderPass==="translucent"&&a.paint.get("fill-antialias")){var Y=n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,re.ReadOnly);Hc(n,s,a,c,Y,k,!0)}}},"fill-extrusion":function(n,s,a,c){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var E=new re(n.context.gl.LEQUAL,re.ReadWrite,n.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Rs(n,s,a,c,E,ce.disabled,ve.disabled),Rs(n,s,a,c,E,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var k=n.colorModeForRenderPass();Rs(n,s,a,c,E,ce.disabled,k)}}},hillshade:function(n,s,a,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,E=n.depthModeForSublayer(0,re.ReadOnly),k=n.colorModeForRenderPass(),A=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],B=A[0],Z=0,Y=A[1];Z<Y.length;Z+=1){var Q=Y[Z],$=s.getTile(Q);$.needsHillshadePrepare&&n.renderPass==="offscreen"?ss(n,$,a,E,ce.disabled,k):n.renderPass==="translucent"&&Bs(n,$,a,E,B[Q.overscaledZ],k)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,a,c){if(n.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&c.length)for(var m=n.context,E=m.gl,k=s.getSource(),A=n.useProgram("raster"),B=n.colorModeForRenderPass(),Z=k instanceof dr?[{},c]:n.stencilConfigForOverlap(c),Y=Z[0],Q=Z[1],$=Q[Q.length-1].overscaledZ,ue=!n.options.moving,ae=0,de=Q;ae<de.length;ae+=1){var oe=de[ae],me=n.depthModeForSublayer(oe.overscaledZ-$,a.paint.get("raster-opacity")===1?re.ReadWrite:re.ReadOnly,E.LESS),xe=s.getTile(oe),Te=n.transform.calculatePosMatrix(oe.toUnwrapped(),ue);xe.registerFadeDuration(a.paint.get("raster-fade-duration"));var Re=s.findLoadedParent(oe,0),Me=gl(xe,Re,s,a,n.transform),Ve=void 0,je=void 0,He=a.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;m.activeTexture.set(E.TEXTURE0),xe.texture.bind(He,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(E.TEXTURE1),Re?(Re.texture.bind(He,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Ve=Math.pow(2,Re.tileID.overscaledZ-xe.tileID.overscaledZ),je=[xe.tileID.canonical.x*Ve%1,xe.tileID.canonical.y*Ve%1]):xe.texture.bind(He,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);var Xe=Ls(Te,je||[0,0],Ve||1,Me,a);k instanceof dr?A.draw(m,E.TRIANGLES,me,ce.disabled,B,be.disabled,Xe,a.id,k.boundsBuffer,n.quadTriangleIndexBuffer,k.boundsSegments):A.draw(m,E.TRIANGLES,me,Y[oe.overscaledZ],B,be.disabled,Xe,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,a){var c=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var E=n.context,k=E.gl,A=n.transform,B=A.tileSize,Z=a.paint.get("background-pattern");if(!n.isPatternMissing(Z)){var Y=!Z&&c.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===Y){var Q=ce.disabled,$=n.depthModeForSublayer(0,Y==="opaque"?re.ReadWrite:re.ReadOnly),ue=n.colorModeForRenderPass(),ae=n.useProgram(Z?"backgroundPattern":"background"),de=A.coveringTiles({tileSize:B});Z&&(E.activeTexture.set(k.TEXTURE0),n.imageManager.bind(n.context));for(var oe=a.getCrossfadeParameters(),me=0,xe=de;me<xe.length;me+=1){var Te=xe[me],Re=n.transform.calculatePosMatrix(Te.toUnwrapped()),Me=Z?ko(Re,m,n,Z,{tileID:Te,tileSize:B},oe):Yu(Re,m,c);ae.draw(E,k.TRIANGLES,$,Q,ue,be.disabled,Me,a.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,a){for(var c=0;c<a.length;c++)ou(n,s,a[c])},custom:function(n,s,a){var c=n.context,m=a.implementation;if(n.renderPass==="offscreen"){var E=m.prerender;E&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),E.call(m,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(ce.disabled);var k=m.renderingMode==="3d"?new re(n.context.gl.LEQUAL,re.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,re.ReadOnly);c.setDepthMode(k),m.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},vr=function(n,s){this.context=new H(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=se.maxUnderzooming+se.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ke,this.gpuTimers={}};vr.prototype.resize=function(n,s){if(this.width=n*o.browser.devicePixelRatio,this.height=s*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize()},vr.prototype.setup=function(){var n=this.context,s=new o.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(o.EXTENT,0),s.emplaceBack(0,o.EXTENT),s.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Bi.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var a=new o.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(o.EXTENT,0),a.emplaceBack(0,o.EXTENT),a.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=n.createVertexBuffer(a,Bi.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var c=new o.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(o.EXTENT,0,o.EXTENT,0),c.emplaceBack(0,o.EXTENT,0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,nt.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var m=new o.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,Bi.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var E=new o.StructArrayLayout1ui2;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(E);var k=new o.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k),this.emptyTexture=new o.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var A=this.context.gl;this.stencilClearMode=new ce({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)},vr.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=o.create();o.ortho(a,0,this.width,this.height,0,0,1),o.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,re.disabled,this.stencilClearMode,ve.disabled,be.disabled,Ba(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vr.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var a=this.context,c=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(ve.disabled),a.setDepthMode(re.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var E=0,k=s;E<k.length;E+=1){var A=k[E],B=this._tileClippingMaskIDs[A.key]=this.nextStencilID++;m.draw(a,c.TRIANGLES,re.disabled,new ce({func:c.ALWAYS,mask:0},B,255,c.KEEP,c.KEEP,c.REPLACE),ve.disabled,be.disabled,Ba(A.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new ce({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},vr.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new ce({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},vr.prototype.stencilConfigForOverlap=function(n){var s,a=this.context.gl,c=n.sort(function(B,Z){return Z.overscaledZ-B.overscaledZ}),m=c[c.length-1].overscaledZ,E=c[0].overscaledZ-m+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();for(var k={},A=0;A<E;A++)k[A+m]=new ce({func:a.GEQUAL,mask:255},A+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=E,[k,c]}return[(s={},s[m]=ce.disabled,s),c]},vr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ve([n.CONSTANT_COLOR,n.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ve.unblended:ve.alphaBlended},vr.prototype.depthModeForSublayer=function(n,s,a){if(!this.opaquePassEnabledForLayer())return re.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new re(a||this.context.gl.LEQUAL,s,[c,c])},vr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vr.prototype.render=function(n,s){var a=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var c=this.style._order,m=this.style.sourceCaches;for(var E in m){var k=m[E];k.used&&k.prepare(this.context)}var A,B,Z={},Y={},Q={};for(var $ in m){var ue=m[$];Z[$]=ue.getVisibleCoordinates(),Y[$]=Z[$].slice().reverse(),Q[$]=ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ae=0;ae<c.length;ae++)if(this.style._layers[c[ae]].is3D()){this.opaquePassCutoff=ae;break}this.renderPass="offscreen";for(var de=0,oe=c;de<oe.length;de+=1){var me=this.style._layers[oe[de]];if(me.hasOffscreenPass()&&!me.isHidden(this.transform.zoom)){var xe=Y[me.source];(me.type==="custom"||xe.length)&&this.renderLayer(this,m[me.source],me,xe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var Te=this.style._layers[c[this.currentLayer]],Re=m[Te.source],Me=Z[Te.source];this._renderTileClippingMasks(Te,Me),this.renderLayer(this,Re,Te,Me)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Ve=this.style._layers[c[this.currentLayer]],je=m[Ve.source],He=(Ve.type==="symbol"?Q:Y)[Ve.source];this._renderTileClippingMasks(Ve,Z[Ve.source]),this.renderLayer(this,je,Ve,He)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Xe){Xe.source&&!Xe.isHidden(a.transform.zoom)&&(Xe.source!==(B&&B.id)&&(B=a.style.sourceCaches[Xe.source]),(!A||A.getSource().maxzoom<B.getSource().maxzoom)&&(A=B))}),A&&bl.debug(this,A,A.getVisibleCoordinates())),this.options.showPadding&&function(Xe){var ht=Xe.transform.padding;Ju(Xe,Xe.transform.height-(ht.top||0),3,op),Ju(Xe,ht.bottom||0,3,wf),Xc(Xe,ht.left||0,3,_l),Xc(Xe,Xe.transform.width-(ht.right||0),3,Io);var yt=Xe.transform.centerPoint;(function(It,Et,rr,st){Qu(It,Et-1,rr-10,2,20,st),Qu(It,Et-10,rr-1,20,2,st)})(Xe,yt.x,Xe.transform.height-yt.y,sp)}(this),this.context.setDefault()},vr.prototype.renderLayer=function(n,s,a,c){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||c.length)&&(this.id=a.id,this.gpuTimingStart(a),bl[a.type](n,s,a,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},vr.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[n.id];a||(a=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},vr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},vr.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},vr.prototype.queryGpuTimers=function(n){var s={};for(var a in n){var c=n[a],m=this.context.extTimerQuery,E=m.getQueryObjectEXT(c.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(c.query),s[a]=E}return s},vr.prototype.translatePosMatrix=function(n,s,a,c,m){if(!a[0]&&!a[1])return n;var E=m?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(E){var k=Math.sin(E),A=Math.cos(E);a=[a[0]*A-a[1]*k,a[0]*k+a[1]*A]}var B=[m?a[0]:Dr(s,a[0],this.transform.zoom),m?a[1]:Dr(s,a[1],this.transform.zoom),0],Z=new Float32Array(16);return o.translate(Z,n,B),Z},vr.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},vr.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},vr.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),a=this.imageManager.getPattern(n.to.toString());return!s||!a},vr.prototype.useProgram=function(n,s){this.cache=this.cache||{};var a=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new tu(this.context,n,Wu[n],s,nu[n],this._showOverdrawInspector)),this.cache[a]},vr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},vr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var to=function(n,s){this.points=n,this.planes=s};to.fromInvProjectionMatrix=function(n,s,a){var c=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(k){return o.transformMat4([],k,n)}).map(function(k){return o.scale$1([],k,1/k[3]/s*c)}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(k){var A=o.sub([],m[k[0]],m[k[1]]),B=o.sub([],m[k[2]],m[k[1]]),Z=o.normalize([],o.cross([],A,B)),Y=-o.dot(Z,m[k[1]]);return Z.concat(Y)});return new to(m,E)};var Hn=function(n,s){this.min=n,this.max=s,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};Hn.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],a=o.clone$2(this.min),c=o.clone$2(this.max),m=0;m<s.length;m++)a[m]=s[m]?this.min[m]:this.center[m],c[m]=s[m]?this.center[m]:this.max[m];return c[2]=this.max[2],new Hn(a,c)},Hn.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},Hn.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},Hn.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,c=0;c<n.planes.length;c++){for(var m=n.planes[c],E=0,k=0;k<s.length;k++)E+=o.dot$1(m,s[k])>=0;if(E===0)return 0;E!==s.length&&(a=!1)}if(a)return 2;for(var A=0;A<3;A++){for(var B=Number.MAX_VALUE,Z=-Number.MAX_VALUE,Y=0;Y<n.points.length;Y++){var Q=n.points[Y][A]-this.min[A];B=Math.min(B,Q),Z=Math.max(Z,Q)}if(Z<0||B>this.max[A]-this.min[A])return 0}return 1};var da=function(n,s,a,c){if(n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=a,this.right=c};da.prototype.interpolate=function(n,s,a){return s.top!=null&&n.top!=null&&(this.top=o.number(n.top,s.top,a)),s.bottom!=null&&n.bottom!=null&&(this.bottom=o.number(n.bottom,s.bottom,a)),s.left!=null&&n.left!=null&&(this.left=o.number(n.left,s.left,a)),s.right!=null&&n.right!=null&&(this.right=o.number(n.right,s.right,a)),this},da.prototype.getCenter=function(n,s){var a=o.clamp((this.left+n-this.right)/2,0,n),c=o.clamp((this.top+s-this.bottom)/2,0,s);return new o.Point(a,c)},da.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},da.prototype.clone=function(){return new da(this.top,this.bottom,this.left,this.right)},da.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var lr=function(n,s,a,c,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=a==null?0:a,this._maxPitch=c==null?60:c,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new da,this._posMatrixCache={},this._alignedPosMatrixCache={}},zr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};lr.prototype.clone=function(){var n=new lr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},zr.minZoom.get=function(){return this._minZoom},zr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},zr.maxZoom.get=function(){return this._maxZoom},zr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},zr.minPitch.get=function(){return this._minPitch},zr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},zr.maxPitch.get=function(){return this._maxPitch},zr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},zr.renderWorldCopies.get=function(){return this._renderWorldCopies},zr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},zr.worldSize.get=function(){return this.tileSize*this.scale},zr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},zr.size.get=function(){return new o.Point(this.width,this.height)},zr.bearing.get=function(){return-this.angle/Math.PI*180},zr.bearing.set=function(n){var s=-o.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},zr.pitch.get=function(){return this._pitch/Math.PI*180},zr.pitch.set=function(n){var s=o.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},zr.fov.get=function(){return this._fov/Math.PI*180},zr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},zr.zoom.get=function(){return this._zoom},zr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},zr.center.get=function(){return this._center},zr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},zr.padding.get=function(){return this._edgeInsets.toJSON()},zr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},zr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},lr.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},lr.prototype.interpolatePadding=function(n,s,a){this._unmodified=!1,this._edgeInsets.interpolate(n,s,a),this._constrain(),this._calcMatrices()},lr.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},lr.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new o.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new o.Point(0,0)),c=this.pointCoordinate(new o.Point(this.width,0)),m=this.pointCoordinate(new o.Point(this.width,this.height)),E=this.pointCoordinate(new o.Point(0,this.height)),k=Math.floor(Math.min(a.x,c.x,m.x,E.x)),A=Math.floor(Math.max(a.x,c.x,m.x,E.x)),B=k-1;B<=A+1;B++)B!==0&&s.push(new o.UnwrappedTileID(B,n));return s},lr.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),a=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=o.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),E=[m*c.x,m*c.y,0],k=to.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),A=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(A=s);var B=function(Xe){return{aabb:new Hn([Xe*m,0,0],[(Xe+1)*m,m,0]),zoom:0,x:0,y:0,wrap:Xe,fullyVisible:!1}},Z=[],Y=[],Q=s,$=n.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var ue=1;ue<=3;ue++)Z.push(B(-ue)),Z.push(B(ue));for(Z.push(B(0));Z.length>0;){var ae=Z.pop(),de=ae.x,oe=ae.y,me=ae.fullyVisible;if(!me){var xe=ae.aabb.intersects(k);if(xe===0)continue;me=xe===2}var Te=ae.aabb.distanceX(E),Re=ae.aabb.distanceY(E),Me=Math.max(Math.abs(Te),Math.abs(Re));if(ae.zoom===Q||Me>3+(1<<Q-ae.zoom)-2&&ae.zoom>=A)Y.push({tileID:new o.OverscaledTileID(ae.zoom===Q?$:ae.zoom,ae.wrap,ae.zoom,de,oe),distanceSq:o.sqrLen([E[0]-.5-de,E[1]-.5-oe])});else for(var Ve=0;Ve<4;Ve++){var je=(de<<1)+Ve%2,He=(oe<<1)+(Ve>>1);Z.push({aabb:ae.aabb.quadrant(Ve),zoom:ae.zoom+1,x:je,y:He,wrap:ae.wrap,fullyVisible:me})}}return Y.sort(function(Xe,ht){return Xe.distanceSq-ht.distanceSq}).map(function(Xe){return Xe.tileID})},lr.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},zr.unmodified.get=function(){return this._unmodified},lr.prototype.zoomScale=function(n){return Math.pow(2,n)},lr.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},lr.prototype.project=function(n){var s=o.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(n.lng)*this.worldSize,o.mercatorYfromLat(s)*this.worldSize)},lr.prototype.unproject=function(n){return new o.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},zr.point.get=function(){return this.project(this.center)},lr.prototype.setLocationAtPoint=function(n,s){var a=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),E=new o.MercatorCoordinate(m.x-(a.x-c.x),m.y-(a.y-c.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())},lr.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},lr.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},lr.prototype.locationCoordinate=function(n){return o.MercatorCoordinate.fromLngLat(n)},lr.prototype.coordinateLocation=function(n){return n.toLngLat()},lr.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],a=[n.x,n.y,1,1];o.transformMat4(s,s,this.pixelMatrixInverse),o.transformMat4(a,a,this.pixelMatrixInverse);var c=s[3],m=a[3],E=s[1]/c,k=a[1]/m,A=s[2]/c,B=a[2]/m,Z=A===B?0:(0-A)/(B-A);return new o.MercatorCoordinate(o.number(s[0]/c,a[0]/m,Z)/this.worldSize,o.number(E,k,Z)/this.worldSize)},lr.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix),new o.Point(s[0]/s[3],s[1]/s[3])},lr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},lr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},lr.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},lr.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var a=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[a])return c[a];var m=n.canonical,E=this.worldSize/this.zoomScale(m.z),k=m.x+Math.pow(2,m.z)*n.wrap,A=o.identity(new Float64Array(16));return o.translate(A,A,[k*E,m.y*E,0]),o.scale(A,A,[E/o.EXTENT,E/o.EXTENT,1]),o.multiply(A,s?this.alignedProjMatrix:this.projMatrix,A),c[a]=new Float32Array(A),c[a]},lr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},lr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,a,c,m=-90,E=90,k=-180,A=180,B=this.size,Z=this._unmodified;if(this.latRange){var Y=this.latRange;m=o.mercatorYfromLat(Y[1])*this.worldSize,n=(E=o.mercatorYfromLat(Y[0])*this.worldSize)-m<B.y?B.y/(E-m):0}if(this.lngRange){var Q=this.lngRange;k=o.mercatorXfromLng(Q[0])*this.worldSize,s=(A=o.mercatorXfromLng(Q[1])*this.worldSize)-k<B.x?B.x/(A-k):0}var $=this.point,ue=Math.max(s||0,n||0);if(ue)return this.center=this.unproject(new o.Point(s?(A+k)/2:$.x,n?(E+m)/2:$.y)),this.zoom+=this.scaleZoom(ue),this._unmodified=Z,void(this._constraining=!1);if(this.latRange){var ae=$.y,de=B.y/2;ae-de<m&&(c=m+de),ae+de>E&&(c=E-de)}if(this.lngRange){var oe=$.x,me=B.x/2;oe-me<k&&(a=k+me),oe+me>A&&(a=A-me)}a===void 0&&c===void 0||(this.center=this.unproject(new o.Point(a!==void 0?a:$.x,c!==void 0?c:$.y))),this._unmodified=Z,this._constraining=!1}},lr.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+n.y/this.height),c=Math.sin(a)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-s-a,.01,Math.PI-.01)),m=this.point,E=m.x,k=m.y,A=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),B=this.height/50,Z=new Float64Array(16);o.perspective(Z,this._fov,this.width/this.height,B,A),Z[8]=2*-n.x/this.width,Z[9]=2*n.y/this.height,o.scale(Z,Z,[1,-1,1]),o.translate(Z,Z,[0,0,-this.cameraToCenterDistance]),o.rotateX(Z,Z,this._pitch),o.rotateZ(Z,Z,this.angle),o.translate(Z,Z,[-E,-k,0]),this.mercatorMatrix=o.scale([],Z,[this.worldSize,this.worldSize,this.worldSize]),o.scale(Z,Z,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Z,this.invProjMatrix=o.invert([],this.projMatrix);var Y=this.width%2/2,Q=this.height%2/2,$=Math.cos(this.angle),ue=Math.sin(this.angle),ae=E-Math.round(E)+$*Y+ue*Q,de=k-Math.round(k)+$*Q+ue*Y,oe=new Float64Array(Z);if(o.translate(oe,oe,[ae>.5?ae-1:ae,de>.5?de-1:de,0]),this.alignedProjMatrix=oe,Z=o.create(),o.scale(Z,Z,[this.width/2,-this.height/2,1]),o.translate(Z,Z,[1,-1,0]),this.labelPlaneMatrix=Z,Z=o.create(),o.scale(Z,Z,[1,-1,1]),o.translate(Z,Z,[-1,-1,0]),o.scale(Z,Z,[2/this.width,2/this.height,1]),this.glCoordMatrix=Z,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Z=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Z,this._posMatrixCache={},this._alignedPosMatrixCache={}}},lr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new o.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},lr.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,n))},lr.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var a=s.x,c=s.y,m=s.x,E=s.y,k=0,A=n;k<A.length;k+=1){var B=A[k];a=Math.min(a,B.x),c=Math.min(c,B.y),m=Math.max(m,B.x),E=Math.max(E,B.y)}return[new o.Point(a,c),new o.Point(m,c),new o.Point(m,E),new o.Point(a,E),new o.Point(a,c)]},Object.defineProperties(lr.prototype,zr);var ro=function(n){var s,a,c,m;this._hashName=n&&encodeURIComponent(n),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,c=null,m=function(){c=null,a&&(s(),c=setTimeout(m,300),a=!1)},function(){return a=!0,c||m(),c})};ro.prototype.addTo=function(n){return this._map=n,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ro.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ro.prototype.getHashString=function(n){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,c=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,c),E=Math.round(s.lng*m)/m,k=Math.round(s.lat*m)/m,A=this._map.getBearing(),B=this._map.getPitch(),Z="";if(Z+=n?"/"+E+"/"+k+"/"+a:a+"/"+k+"/"+E,(A||B)&&(Z+="/"+Math.round(10*A)/10),B&&(Z+="/"+Math.round(B)),this._hashName){var Y=this._hashName,Q=!1,$=o.window.location.hash.slice(1).split("&").map(function(ue){var ae=ue.split("=")[0];return ae===Y?(Q=!0,ae+"="+Z):ue}).filter(function(ue){return ue});return Q||$.push(Y+"="+Z),"#"+$.join("&")}return"#"+Z},ro.prototype._getCurrentHash=function(){var n,s=this,a=o.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):a.split("/")},ro.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},ro.prototype._updateHashUnthrottled=function(){var n=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,n)}catch{}};var $u={linearity:.3,easing:o.bezier(0,0,.3,1)},To=o.extend({deceleration:2500,maxSpeed:1400},$u),ls=o.extend({deceleration:20,maxSpeed:1400},$u),wd=o.extend({deceleration:1e3,maxSpeed:360},$u),ec=o.extend({deceleration:1e3,maxSpeed:90},$u),xl=function(n){this._map=n,this.clear()};function tc(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function us(n,s,a){var c=a.maxSpeed,m=a.linearity,E=a.deceleration,k=o.clamp(n*m/(s/1e3),-c,c),A=Math.abs(k)/(E*m);return{easing:a.easing,duration:1e3*A,amount:k*(A/2)}}xl.prototype.clear=function(){this._inertiaBuffer=[]},xl.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:n})},xl.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=o.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},xl.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},a=0,c=this._inertiaBuffer;a<c.length;a+=1){var m=c[a].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(s.pan.mag()){var A=us(s.pan.mag(),E,o.extend({},To,n||{}));k.offset=s.pan.mult(A.amount/s.pan.mag()),k.center=this._map.transform.center,tc(k,A)}if(s.zoom){var B=us(s.zoom,E,ls);k.zoom=this._map.transform.zoom+B.amount,tc(k,B)}if(s.bearing){var Z=us(s.bearing,E,wd);k.bearing=this._map.transform.bearing+o.clamp(Z.amount,-179,179),tc(k,Z)}if(s.pitch){var Y=us(s.pitch,E,ec);k.pitch=this._map.transform.pitch+Y.amount,tc(k,Y)}if(k.zoom||k.bearing){var Q=s.pinchAround===void 0?s.around:s.pinchAround;k.around=Q?this._map.unproject(Q):this._map.getCenter()}return this.clear(),o.extend(k,{noMoveStart:!0})}};var ni=function(n){function s(c,m,E,k){k===void 0&&(k={});var A=P.mousePos(m.getCanvasContainer(),E),B=m.unproject(A);n.call(this,c,o.extend({point:A,lngLat:B,originalEvent:E},k)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),rc=function(n){function s(c,m,E){var k=c==="touchend"?E.changedTouches:E.touches,A=P.touchPos(m.getCanvasContainer(),k),B=A.map(function(Q){return m.unproject(Q)}),Z=A.reduce(function(Q,$,ue,ae){return Q.add($.div(ae.length))},new o.Point(0,0)),Y=m.unproject(Z);n.call(this,c,{points:A,point:Z,lngLats:B,lngLat:Y,originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),cs=function(n){function s(c,m,E){n.call(this,c,{originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),Br=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};Br.prototype.reset=function(){delete this._mousedownPos},Br.prototype.wheel=function(n){return this._firePreventable(new cs(n.type,this._map,n))},Br.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new ni(n.type,this._map,n))},Br.prototype.mouseup=function(n){this._map.fire(new ni(n.type,this._map,n))},Br.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new ni(n.type,this._map,n))},Br.prototype.dblclick=function(n){return this._firePreventable(new ni(n.type,this._map,n))},Br.prototype.mouseover=function(n){this._map.fire(new ni(n.type,this._map,n))},Br.prototype.mouseout=function(n){this._map.fire(new ni(n.type,this._map,n))},Br.prototype.touchstart=function(n){return this._firePreventable(new rc(n.type,this._map,n))},Br.prototype.touchmove=function(n){this._map.fire(new rc(n.type,this._map,n))},Br.prototype.touchend=function(n){this._map.fire(new rc(n.type,this._map,n))},Br.prototype.touchcancel=function(n){this._map.fire(new rc(n.type,this._map,n))},Br.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},Br.prototype.isEnabled=function(){return!0},Br.prototype.isActive=function(){return!1},Br.prototype.enable=function(){},Br.prototype.disable=function(){};var ot=function(n){this._map=n};ot.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ot.prototype.mousemove=function(n){this._map.fire(new ni(n.type,this._map,n))},ot.prototype.mousedown=function(){this._delayContextMenu=!0},ot.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ni("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ot.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new ni(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},ot.prototype.isEnabled=function(){return!0},ot.prototype.isActive=function(){return!1},ot.prototype.enable=function(){},ot.prototype.disable=function(){};var ma=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Os(n,s){for(var a={},c=0;c<n.length;c++)a[n[c].identifier]=s[c];return a}ma.prototype.isEnabled=function(){return!!this._enabled},ma.prototype.isActive=function(){return!!this._active},ma.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ma.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ma.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(P.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},ma.prototype.mousemoveWindow=function(n,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a,this._box||(this._box=P.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(c.x,a.x),E=Math.max(c.x,a.x),k=Math.min(c.y,a.y),A=Math.max(c.y,a.y);P.setTransform(this._box,"translate("+m+"px,"+k+"px)"),this._box.style.width=E-m+"px",this._box.style.height=A-k+"px"}}},ma.prototype.mouseupWindow=function(n,s){var a=this;if(this._active&&n.button===0){var c=this._startPos,m=s;if(this.reset(),P.suppressClick(),c.x!==m.x||c.y!==m.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(E){return E.fitScreenCoordinates(c,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},ma.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},ma.prototype.blur=function(){this.reset()},ma.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos},ma.prototype._fireEvent=function(n,s){return this._map.fire(new o.Event(n,{originalEvent:s}))};var Wc=function(n){this.reset(),this.numTouches=n.numTouches};Wc.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Wc.prototype.touchstart=function(n,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),a.length===this.numTouches&&(this.centroid=function(c){for(var m=new o.Point(0,0),E=0,k=c;E<k.length;E+=1)m._add(k[E]);return m.div(c.length)}(s),this.touches=Os(a,s)))},Wc.prototype.touchmove=function(n,s,a){if(!this.aborted&&this.centroid){var c=Os(a,s);for(var m in this.touches){var E=c[m];(!E||E.dist(this.touches[m])>30)&&(this.aborted=!0)}}},Wc.prototype.touchend=function(n,s,a){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var io=function(n){this.singleTap=new Wc(n),this.numTaps=n.numTaps,this.reset()};io.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},io.prototype.touchstart=function(n,s,a){this.singleTap.touchstart(n,s,a)},io.prototype.touchmove=function(n,s,a){this.singleTap.touchmove(n,s,a)},io.prototype.touchend=function(n,s,a){var c=this.singleTap.touchend(n,s,a);if(c){var m=n.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(c)<30;if(m&&E||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var kn=function(){this._zoomIn=new io({numTouches:1,numTaps:2}),this._zoomOut=new io({numTouches:2,numTaps:1}),this.reset()};kn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},kn.prototype.touchstart=function(n,s,a){this._zoomIn.touchstart(n,s,a),this._zoomOut.touchstart(n,s,a)},kn.prototype.touchmove=function(n,s,a){this._zoomIn.touchmove(n,s,a),this._zoomOut.touchmove(n,s,a)},kn.prototype.touchend=function(n,s,a){var c=this,m=this._zoomIn.touchend(n,s,a),E=this._zoomOut.touchend(n,s,a);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(m)},{originalEvent:n})}}):E?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(E)},{originalEvent:n})}}):void 0},kn.prototype.touchcancel=function(){this.reset()},kn.prototype.enable=function(){this._enabled=!0},kn.prototype.disable=function(){this._enabled=!1,this.reset()},kn.prototype.isEnabled=function(){return this._enabled},kn.prototype.isActive=function(){return this._active};var wl={0:1,2:2},$e=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};$e.prototype.blur=function(){this.reset()},$e.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},$e.prototype._correctButton=function(n,s){return!1},$e.prototype._move=function(n,s){return{}},$e.prototype.mousedown=function(n,s){if(!this._lastPoint){var a=P.mouseButton(n);this._correctButton(n,a)&&(this._lastPoint=s,this._eventButton=a)}},$e.prototype.mousemoveWindow=function(n,s){var a=this._lastPoint;if(a){if(n.preventDefault(),function(c,m){var E=wl[m];return c.buttons===void 0||(c.buttons&E)!==E}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},$e.prototype.mouseupWindow=function(n){this._lastPoint&&P.mouseButton(n)===this._eventButton&&(this._moved&&P.suppressClick(),this.reset())},$e.prototype.enable=function(){this._enabled=!0},$e.prototype.disable=function(){this._enabled=!1,this.reset()},$e.prototype.isEnabled=function(){return this._enabled},$e.prototype.isActive=function(){return this._active};var El=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(a,c){n.prototype.mousedown.call(this,a,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,c){return c===0&&!a.ctrlKey},s.prototype._move=function(a,c){return{around:c,panDelta:c.sub(a)}},s}($e),su=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=.8*(c.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}($e),lp=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=-.5*(c.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}($e),Va=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};Va.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Va.prototype.touchstart=function(n,s,a){return this._calculateTransform(n,s,a)},Va.prototype.touchmove=function(n,s,a){if(this._active&&!(a.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,a)},Va.prototype.touchend=function(n,s,a){this._calculateTransform(n,s,a),this._active&&a.length<this._minTouches&&this.reset()},Va.prototype.touchcancel=function(){this.reset()},Va.prototype._calculateTransform=function(n,s,a){a.length>0&&(this._active=!0);var c=Os(a,s),m=new o.Point(0,0),E=new o.Point(0,0),k=0;for(var A in c){var B=c[A],Z=this._touches[A];Z&&(m._add(B),E._add(B.sub(Z)),k++,c[A]=B)}if(this._touches=c,!(k<this._minTouches)&&E.mag()){var Y=E.div(k);if(this._sum._add(Y),!(this._sum.mag()<this._clickTolerance))return{around:m.div(k),panDelta:Y}}},Va.prototype.enable=function(){this._enabled=!0},Va.prototype.disable=function(){this._enabled=!1,this.reset()},Va.prototype.isEnabled=function(){return this._enabled},Va.prototype.isActive=function(){return this._active};var cn=function(){this.reset()};function Yc(n,s,a){for(var c=0;c<n.length;c++)if(n[c].identifier===a)return s[c]}function no(n,s){return Math.log(n/s)/Math.LN2}cn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},cn.prototype._start=function(n){},cn.prototype._move=function(n,s,a){return{}},cn.prototype.touchstart=function(n,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},cn.prototype.touchmove=function(n,s,a){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,m=c[1],E=Yc(a,s,c[0]),k=Yc(a,s,m);if(E&&k){var A=this._aroundCenter?null:E.add(k).div(2);return this._move([E,k],A,n)}}},cn.prototype.touchend=function(n,s,a){if(this._firstTwoTouches){var c=this._firstTwoTouches,m=c[1],E=Yc(a,s,c[0]),k=Yc(a,s,m);E&&k||(this._active&&P.suppressClick(),this.reset())}},cn.prototype.touchcancel=function(){this.reset()},cn.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},cn.prototype.disable=function(){this._enabled=!1,this.reset()},cn.prototype.isEnabled=function(){return this._enabled},cn.prototype.isActive=function(){return this._active};var Ti=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(no(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:no(this._distance,m),pinchAround:c}},s}(cn);function Xn(n,s){return 180*n.angleWith(s)/Math.PI}var Ef=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xn(this._vector,m),pinchAround:c}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var c=25/(Math.PI*this._minDiameter)*360,m=Xn(a,this._startVector);return Math.abs(m)<c},s}(cn);function hs(n){return Math.abs(n.y)>Math.abs(n.x)}var Ed=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,hs(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,c,m){var E=a[0].sub(this._lastPoints[0]),k=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(E,k,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(E.y+k.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,c,m){if(this._valid!==void 0)return this._valid;var E=a.mag()>=2,k=c.mag()>=2;if(E||k){if(!E||!k)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var A=a.y>0==c.y>0;return hs(a)&&hs(c)&&A}},s}(cn),up={panStep:100,bearingStep:15,pitchStep:10},na=function(){var n=up;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function Mn(n){return n*(2-n)}na.prototype.blur=function(){this.reset()},na.prototype.reset=function(){this._active=!1},na.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=0,c=0,m=0,E=0,k=0;switch(n.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),E=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),E=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),k=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(c=0,m=0),{cameraAnimation:function(A){var B=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:Mn,zoom:a?Math.round(B)+a*(n.shiftKey?2:1):B,bearing:A.getBearing()+c*s._bearingStep,pitch:A.getPitch()+m*s._pitchStep,offset:[-E*s._panStep,-k*s._panStep],center:A.getCenter()},{originalEvent:n})}}}},na.prototype.enable=function(){this._enabled=!0},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active},na.prototype.disableRotation=function(){this._rotationDisabled=!0},na.prototype.enableRotation=function(){this._rotationDisabled=!1};var tr=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};tr.prototype.setZoomRate=function(n){this._defaultZoomRate=n},tr.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},tr.prototype.isEnabled=function(){return!!this._enabled},tr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},tr.prototype.isZooming=function(){return!!this._zooming},tr.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},tr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},tr.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,a=o.browser.now(),c=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},tr.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},tr.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=P.mousePos(this._el,n);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},tr.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&c!==0&&(c=1/c);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var E,k=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,A=this._startZoom,B=this._easing,Z=!1;if(this._type==="wheel"&&A&&B){var Y=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Q=B(Y);E=o.number(A,k,Q),Y<1?this._frameId||(this._frameId=!0):Z=!0}else E=k,Z=!0;return this._active=!0,Z&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Z,zoomDelta:E-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},tr.prototype._smoothOutEasing=function(n){var s=o.ease;if(this._prevEase){var a=this._prevEase,c=(o.browser.now()-a.start)/a.duration,m=a.easing(c+.01)-a.easing(c),E=.27/Math.sqrt(m*m+1e-4)*.01,k=Math.sqrt(.0729-E*E);s=o.bezier(E,k,.25,1)}return this._prevEase={start:o.browser.now(),duration:n,easing:s},s},tr.prototype.blur=function(){this.reset()},tr.prototype.reset=function(){this._active=!1};var ya=function(n,s){this._clickZoom=n,this._tapZoom=s};ya.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ya.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ya.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ya.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var va=function(){this.reset()};va.prototype.reset=function(){this._active=!1},va.prototype.blur=function(){this.reset()},va.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(n.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:n})}}},va.prototype.enable=function(){this._enabled=!0},va.prototype.disable=function(){this._enabled=!1,this.reset()},va.prototype.isEnabled=function(){return this._enabled},va.prototype.isActive=function(){return this._active};var In=function(){this._tap=new io({numTouches:1,numTaps:1}),this.reset()};In.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},In.prototype.touchstart=function(n,s,a){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(n,s,a))},In.prototype.touchmove=function(n,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var c=s[0],m=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,a)},In.prototype.touchend=function(n,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(n,s,a)&&(this._tapTime=n.timeStamp)},In.prototype.touchcancel=function(){this.reset()},In.prototype.enable=function(){this._enabled=!0},In.prototype.disable=function(){this._enabled=!1,this.reset()},In.prototype.isEnabled=function(){return this._enabled},In.prototype.isActive=function(){return this._active};var Sl=function(n,s,a){this._el=n,this._mousePan=s,this._touchPan=a};Sl.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Sl.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Sl.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Sl.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ta=function(n,s,a){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};Ta.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ta.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ta.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ta.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ao=function(n,s,a,c){this._el=n,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};Ao.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ao.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ao.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ao.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ao.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ao.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Wn=function(n){return n.zoom||n.drag||n.pitch||n.rotate},zo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(o.Event);function gt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var ct=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xl(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),o.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[o.window,"blur",void 0]];for(var c=0,m=this._listeners;c<m.length;c+=1){var E=m[c],k=E[0];P.addEventListener(k,E[1],k===o.window.document?this.handleWindowEvent:this.handleEvent,E[2])}};ct.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var a=s[n],c=a[0];P.removeEventListener(c,a[1],c===o.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},ct.prototype._addDefaultHandlers=function(n){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new Br(s,n));var c=s.boxZoom=new ma(s,n);this._add("boxZoom",c);var m=new kn,E=new va;s.doubleClickZoom=new ya(E,m),this._add("tapZoom",m),this._add("clickZoom",E);var k=new In;this._add("tapDragZoom",k);var A=s.touchPitch=new Ed;this._add("touchPitch",A);var B=new su(n),Z=new lp(n);s.dragRotate=new Ta(n,B,Z),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);var Y=new El(n),Q=new Va(n);s.dragPan=new Sl(a,Y,Q),this._add("mousePan",Y),this._add("touchPan",Q,["touchZoom","touchRotate"]);var $=new Ef,ue=new Ti;s.touchZoomRotate=new Ao(a,ue,$,k),this._add("touchRotate",$,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]);var ae=s.scrollZoom=new tr(s,this);this._add("scrollZoom",ae,["mousePan"]);var de=s.keyboard=new na;this._add("keyboard",de),this._add("blockableMapEvent",new ot(s));for(var oe=0,me=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];oe<me.length;oe+=1){var xe=me[oe];n.interactive&&n[xe]&&s[xe].enable(n[xe])}},ct.prototype._add=function(n,s,a){this._handlers.push({handlerName:n,handler:s,allowed:a}),this._handlersById[n]=s},ct.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},ct.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},ct.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ct.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ct.prototype.isMoving=function(){return Boolean(Wn(this._eventsInProgress))||this.isZooming()},ct.prototype._blockedByActive=function(n,s,a){for(var c in n)if(c!==a&&(!s||s.indexOf(c)<0))return!0;return!1},ct.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},ct.prototype._getMapTouches=function(n){for(var s=[],a=0,c=n;a<c.length;a+=1){var m=c[a];this._el.contains(m.target)&&s.push(m)}return s},ct.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var a=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},m={},E={},k=n.touches?this._getMapTouches(n.touches):void 0,A=k?P.touchPos(this._el,k):P.mousePos(this._el,n),B=0,Z=this._handlers;B<Z.length;B+=1){var Y=Z[B],Q=Y.handlerName,$=Y.handler,ue=Y.allowed;if($.isEnabled()){var ae=void 0;this._blockedByActive(E,ue,Q)?$.reset():$[s||n.type]&&(ae=$[s||n.type](n,A,k),this.mergeHandlerResult(c,m,ae,Q,a),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||$.isActive())&&(E[Q]=$)}}var de={};for(var oe in this._previousActiveHandlers)E[oe]||(de[oe]=a);this._previousActiveHandlers=E,(Object.keys(de).length||gt(c))&&(this._changes.push([c,m,de]),this._triggerRenderFrame()),(Object.keys(E).length||gt(c))&&this._map._stop(!0),this._updatingCamera=!1;var me=c.cameraAnimation;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},ct.prototype.mergeHandlerResult=function(n,s,a,c,m){if(a){o.extend(n,a);var E={handlerName:c,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(s.zoom=E),a.panDelta!==void 0&&(s.drag=E),a.pitchDelta!==void 0&&(s.pitch=E),a.bearingDelta!==void 0&&(s.rotate=E)}},ct.prototype._applyChanges=function(){for(var n={},s={},a={},c=0,m=this._changes;c<m.length;c+=1){var E=m[c],k=E[0],A=E[1],B=E[2];k.panDelta&&(n.panDelta=(n.panDelta||new o.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(n.around=k.around),k.pinchAround!==void 0&&(n.pinchAround=k.pinchAround),k.noInertia&&(n.noInertia=k.noInertia),o.extend(s,A),o.extend(a,B)}this._updateMapTransform(n,s,a),this._changes=[]},ct.prototype._updateMapTransform=function(n,s,a){var c=this._map,m=c.transform;if(!gt(n))return this._fireEvents(s,a,!0);var E=n.panDelta,k=n.zoomDelta,A=n.bearingDelta,B=n.pitchDelta,Z=n.around,Y=n.pinchAround;Y!==void 0&&(Z=Y),c._stop(!0),Z=Z||c.transform.centerPoint;var Q=m.pointLocation(E?Z.sub(E):Z);A&&(m.bearing+=A),B&&(m.pitch+=B),k&&(m.zoom+=k),m.setLocationAtPoint(Q,Z),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,a,!0)},ct.prototype._fireEvents=function(n,s,a){var c=this,m=Wn(this._eventsInProgress),E=Wn(n),k={};for(var A in n)this._eventsInProgress[A]||(k[A+"start"]=n[A].originalEvent),this._eventsInProgress[A]=n[A];for(var B in!m&&E&&this._fireEvent("movestart",E.originalEvent),k)this._fireEvent(B,k[B]);for(var Z in E&&this._fireEvent("move",E.originalEvent),n)this._fireEvent(Z,n[Z].originalEvent);var Y,Q={};for(var $ in this._eventsInProgress){var ue=this._eventsInProgress[$],ae=ue.handlerName,de=ue.originalEvent;this._handlersById[ae].isActive()||(delete this._eventsInProgress[$],Q[$+"end"]=Y=s[ae]||de)}for(var oe in Q)this._fireEvent(oe,Q[oe]);var me=Wn(this._eventsInProgress);if(a&&(m||E)&&!me){this._updatingCamera=!0;var xe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Te=function(Re){return Re!==0&&-c._bearingSnap<Re&&Re<c._bearingSnap};xe?(Te(xe.bearing||this._map.getBearing())&&(xe.bearing=0),this._map.easeTo(xe,{originalEvent:Y})):(this._map.fire(new o.Event("moveend",{originalEvent:Y})),Te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ct.prototype._fireEvent=function(n,s){this._map.fire(new o.Event(n,s?{originalEvent:s}:{}))},ct.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new zo("renderFrame",{timeStamp:s})),n._applyChanges()})},ct.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var kl=function(n){function s(a,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},s.prototype.panBy=function(a,c,m){return a=o.Point.convert(a).mult(-1),this.panTo(this.transform.center,o.extend({offset:a},c),m)},s.prototype.panTo=function(a,c,m){return this.easeTo(o.extend({center:a},c),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},s.prototype.zoomTo=function(a,c,m){return this.easeTo(o.extend({zoom:a},c),m)},s.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},s.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,c){return this.jumpTo({padding:a},c),this},s.prototype.rotateTo=function(a,c,m){return this.easeTo(o.extend({bearing:a},c),m)},s.prototype.resetNorth=function(a,c){return this.rotateTo(0,o.extend({duration:1e3},a),c),this},s.prototype.resetNorthPitch=function(a,c){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},a),c),this},s.prototype.snapToNorth=function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},s.prototype.cameraForBounds=function(a,c){a=o.LngLatBounds.convert(a);var m=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,c)},s.prototype._cameraForBoxAndBearing=function(a,c,m,E){var k={top:0,bottom:0,right:0,left:0};if(typeof(E=o.extend({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){var A=E.padding;E.padding={top:A,bottom:A,right:A,left:A}}E.padding=o.extend(k,E.padding);var B=this.transform,Z=B.padding,Y=B.project(o.LngLat.convert(a)),Q=B.project(o.LngLat.convert(c)),$=Y.rotate(-m*Math.PI/180),ue=Q.rotate(-m*Math.PI/180),ae=new o.Point(Math.max($.x,ue.x),Math.max($.y,ue.y)),de=new o.Point(Math.min($.x,ue.x),Math.min($.y,ue.y)),oe=ae.sub(de),me=(B.width-(Z.left+Z.right+E.padding.left+E.padding.right))/oe.x,xe=(B.height-(Z.top+Z.bottom+E.padding.top+E.padding.bottom))/oe.y;if(!(xe<0||me<0)){var Te=Math.min(B.scaleZoom(B.scale*Math.min(me,xe)),E.maxZoom),Re=typeof E.offset.x=="number"?new o.Point(E.offset.x,E.offset.y):o.Point.convert(E.offset),Me=new o.Point((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(m*Math.PI/180),Ve=Re.add(Me).mult(B.scale/B.zoomScale(Te));return{center:B.unproject(Y.add(Q).div(2).sub(Ve)),zoom:Te,bearing:m}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,c,m){return this._fitInternal(this.cameraForBounds(a,c),c,m)},s.prototype.fitScreenCoordinates=function(a,c,m,E,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(a)),this.transform.pointLocation(o.Point.convert(c)),m,E),E,k)},s.prototype._fitInternal=function(a,c,m){return a?(delete(c=o.extend(a,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this},s.prototype.jumpTo=function(a,c){this.stop();var m=this.transform,E=!1,k=!1,A=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(E=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=o.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(k=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(A=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),E&&this.fire(new o.Event("zoomstart",c)).fire(new o.Event("zoom",c)).fire(new o.Event("zoomend",c)),k&&this.fire(new o.Event("rotatestart",c)).fire(new o.Event("rotate",c)).fire(new o.Event("rotateend",c)),A&&this.fire(new o.Event("pitchstart",c)).fire(new o.Event("pitch",c)).fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))},s.prototype.easeTo=function(a,c){var m=this;this._stop(!1,a.easeId),((a=o.extend({offset:[0,0],duration:500,easing:o.ease},a)).animate===!1||!a.essential&&o.browser.prefersReducedMotion)&&(a.duration=0);var E=this.transform,k=this.getZoom(),A=this.getBearing(),B=this.getPitch(),Z=this.getPadding(),Y="zoom"in a?+a.zoom:k,Q="bearing"in a?this._normalizeBearing(a.bearing,A):A,$="pitch"in a?+a.pitch:B,ue="padding"in a?a.padding:E.padding,ae=o.Point.convert(a.offset),de=E.centerPoint.add(ae),oe=E.pointLocation(de),me=o.LngLat.convert(a.center||oe);this._normalizeCenter(me);var xe,Te,Re=E.project(oe),Me=E.project(me).sub(Re),Ve=E.zoomScale(Y-k);a.around&&(xe=o.LngLat.convert(a.around),Te=E.locationPoint(xe));var je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Y!==k,this._rotating=this._rotating||A!==Q,this._pitching=this._pitching||$!==B,this._padding=!E.isPaddingEqual(ue),this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,je),this._ease(function(He){if(m._zooming&&(E.zoom=o.number(k,Y,He)),m._rotating&&(E.bearing=o.number(A,Q,He)),m._pitching&&(E.pitch=o.number(B,$,He)),m._padding&&(E.interpolatePadding(Z,ue,He),de=E.centerPoint.add(ae)),xe)E.setLocationAtPoint(xe,Te);else{var Xe=E.zoomScale(E.zoom-k),ht=Y>k?Math.min(2,Ve):Math.max(.5,Ve),yt=Math.pow(ht,1-He),It=E.unproject(Re.add(Me.mult(He*yt)).mult(Xe));E.setLocationAtPoint(E.renderWorldCopies?It.wrap():It,de)}m._fireMoveEvents(c)},function(He){m._afterEase(c,He)},a),this},s.prototype._prepareEase=function(a,c,m){m===void 0&&(m={}),this._moving=!0,c||m.moving||this.fire(new o.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new o.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new o.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new o.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new o.Event("move",a)),this._zooming&&this.fire(new o.Event("zoom",a)),this._rotating&&this.fire(new o.Event("rotate",a)),this._pitching&&this.fire(new o.Event("pitch",a))},s.prototype._afterEase=function(a,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var m=this._zooming,E=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new o.Event("zoomend",a)),E&&this.fire(new o.Event("rotateend",a)),k&&this.fire(new o.Event("pitchend",a)),this.fire(new o.Event("moveend",a))}},s.prototype.flyTo=function(a,c){var m=this;if(!a.essential&&o.browser.prefersReducedMotion){var E=o.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(E,c)}this.stop(),a=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},a);var k=this.transform,A=this.getZoom(),B=this.getBearing(),Z=this.getPitch(),Y=this.getPadding(),Q="zoom"in a?o.clamp(+a.zoom,k.minZoom,k.maxZoom):A,$="bearing"in a?this._normalizeBearing(a.bearing,B):B,ue="pitch"in a?+a.pitch:Z,ae="padding"in a?a.padding:k.padding,de=k.zoomScale(Q-A),oe=o.Point.convert(a.offset),me=k.centerPoint.add(oe),xe=k.pointLocation(me),Te=o.LngLat.convert(a.center||xe);this._normalizeCenter(Te);var Re=k.project(xe),Me=k.project(Te).sub(Re),Ve=a.curve,je=Math.max(k.width,k.height),He=je/de,Xe=Me.mag();if("minZoom"in a){var ht=o.clamp(Math.min(a.minZoom,A,Q),k.minZoom,k.maxZoom),yt=je/k.zoomScale(ht-A);Ve=Math.sqrt(yt/Xe*2)}var It=Ve*Ve;function Et(xt){var zt=(He*He-je*je+(xt?-1:1)*It*It*Xe*Xe)/(2*(xt?He:je)*It*Xe);return Math.log(Math.sqrt(zt*zt+1)-zt)}function rr(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function st(xt){return(Math.exp(xt)+Math.exp(-xt))/2}var Tt=Et(0),Nt=function(xt){return st(Tt)/st(Tt+Ve*xt)},Rt=function(xt){return je*((st(Tt)*(rr(zt=Tt+Ve*xt)/st(zt))-rr(Tt))/It)/Xe;var zt},Ct=(Et(1)-Tt)/Ve;if(Math.abs(Xe)<1e-6||!isFinite(Ct)){if(Math.abs(je-He)<1e-6)return this.easeTo(a,c);var Vt=He<je?-1:1;Ct=Math.abs(Math.log(He/je))/Ve,Rt=function(){return 0},Nt=function(xt){return Math.exp(Vt*Ve*xt)}}return a.duration="duration"in a?+a.duration:1e3*Ct/("screenSpeed"in a?+a.screenSpeed/Ve:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=B!==$,this._pitching=ue!==Z,this._padding=!k.isPaddingEqual(ae),this._prepareEase(c,!1),this._ease(function(xt){var zt=xt*Ct,Oi=1/Nt(zt);k.zoom=xt===1?Q:A+k.scaleZoom(Oi),m._rotating&&(k.bearing=o.number(B,$,xt)),m._pitching&&(k.pitch=o.number(Z,ue,xt)),m._padding&&(k.interpolatePadding(Y,ae,xt),me=k.centerPoint.add(oe));var pi=xt===1?Te:k.unproject(Re.add(Me.mult(Rt(zt))).mult(Oi));k.setLocationAtPoint(k.renderWorldCopies?pi.wrap():pi,me),m._fireMoveEvents(c)},function(){return m._afterEase(c)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!a){var E=this.handlers;E&&E.stop(!1)}return this},s.prototype._ease=function(a,c,m){m.animate===!1||m.duration===0?(a(1),c()):(this._easeStart=o.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,c){a=o.wrap(a,-180,180);var m=Math.abs(a-c);return Math.abs(a-360-c)<m&&(a-=360),Math.abs(a+360-c)<m&&(a+=360),a},s.prototype._normalizeCenter=function(a){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var m=a.lng-c.center.lng;a.lng+=m>180?-360:m<-180?360:0}},s}(o.Evented),Yn=function(n){n===void 0&&(n={}),this.options=n,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Yn.prototype.getDefaultPosition=function(){return"bottom-right"},Yn.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Yn.prototype.onRemove=function(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Yn.prototype._setElementTitle=function(n,s){var a=this._map._getUIString("AttributionControl."+s);n.title=a,n.setAttribute("aria-label",a)},Yn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Yn.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(n){var a=s.reduce(function(c,m,E){return m.value&&(c+=m.key+"="+m.value+(E<s.length-1?"&":"")),c},"?");n.href=o.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},Yn.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Yn.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(A){return typeof A!="string"?"":A})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var c in a){var m=a[c];if(m.used){var E=m.getSource();E.attribution&&n.indexOf(E.attribution)<0&&n.push(E.attribution)}}n.sort(function(A,B){return A.length-B.length});var k=(n=n.filter(function(A,B){for(var Z=B+1;Z<n.length;Z++)if(n[Z].indexOf(A)>=0)return!1;return!0})).join(" | ");k!==this._attribHTML&&(this._attribHTML=k,n.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Yn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ao=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};ao.prototype.onAdd=function(n){this._map=n,this._container=P.create("div","mapboxgl-ctrl");var s=P.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ao.prototype.onRemove=function(){P.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ao.prototype.getDefaultPosition=function(){return"bottom-left"},ao.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ao.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},ao.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Ai=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ai.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},Ai.prototype.remove=function(n){for(var s=this._currentlyRunning,a=0,c=s?this._queue.concat(s):this._queue;a<c.length;a+=1){var m=c[a];if(m.id===n)return void(m.cancelled=!0)}},Ai.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,c=s;a<c.length;a+=1){var m=c[a];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ai.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Tn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},cp=o.window.HTMLImageElement,lu=o.window.HTMLElement,Er=o.window.ImageBitmap,hn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ic=function(n){function s(c){var m=this;if((c=o.extend({},hn,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var E=new lr(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,E,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Ai,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Tn,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new o.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=o.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof lu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ct(this,c),this._hash=c.hash&&new ro(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,o.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Yn({customAttribution:c.customAttribution})),this.addControl(new ao,c.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(k){m._update(k.dataType==="style"),m.fire(new o.Event(k.dataType+"data",k))}),this.on("dataloading",function(k){m.fire(new o.Event(k.dataType+"dataloading",k))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,m){if(m===void 0&&(m=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var E=c.onAdd(this);this._controls.push(c);var k=this._controlPositions[m];return m.indexOf("bottom")!==-1?k.insertBefore(E,k.firstChild):k.appendChild(E),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(c);return m>-1&&this._controls.splice(m,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var m=this._containerDimensions(),E=m[0],k=m[1];if(E===this.transform.width&&k===this.transform.height)return this;this._resizeCanvas(E,k),this.transform.resize(E,k),this.painter.resize(E,k);var A=!this._moving;return A&&this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),this.fire(new o.Event("resize",c)),A&&this.fire(new o.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(o.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c==null?-2:c)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c==null?22:c)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c==null?0:c)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c==null?60:c)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(o.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(o.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,m,E){var k,A=this;if(c==="mouseenter"||c==="mouseover"){var B=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){var Q=A.getLayer(m)?A.queryRenderedFeatures(Y.point,{layers:[m]}):[];Q.length?B||(B=!0,E.call(A,new ni(c,A,Y.originalEvent,{features:Q}))):B=!1},mouseout:function(){B=!1}}}}if(c==="mouseleave"||c==="mouseout"){var Z=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){(A.getLayer(m)?A.queryRenderedFeatures(Y.point,{layers:[m]}):[]).length?Z=!0:Z&&(Z=!1,E.call(A,new ni(c,A,Y.originalEvent)))},mouseout:function(Y){Z&&(Z=!1,E.call(A,new ni(c,A,Y.originalEvent)))}}}}return{layer:m,listener:E,delegates:(k={},k[c]=function(Y){var Q=A.getLayer(m)?A.queryRenderedFeatures(Y.point,{layers:[m]}):[];Q.length&&(Y.features=Q,E.call(A,Y),delete Y.features)},k)}},s.prototype.on=function(c,m,E){if(E===void 0)return n.prototype.on.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var A in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(k),k.delegates)this.on(A,k.delegates[A]);return this},s.prototype.once=function(c,m,E){if(E===void 0)return n.prototype.once.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var A in k.delegates)this.once(A,k.delegates[A]);return this},s.prototype.off=function(c,m,E){var k=this;return E===void 0?n.prototype.off.call(this,c,m):(this._delegatedListeners&&this._delegatedListeners[c]&&function(A){for(var B=A[c],Z=0;Z<B.length;Z++){var Y=B[Z];if(Y.layer===m&&Y.listener===E){for(var Q in Y.delegates)k.off(Q,Y.delegates[Q]);return B.splice(Z,1),k}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,m){if(!this.style)return[];var E;if(m!==void 0||c===void 0||c instanceof o.Point||Array.isArray(c)||(m=c,c=void 0),m=m||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof c[0]=="number")E=[o.Point.convert(c)];else{var k=o.Point.convert(c[0]),A=o.Point.convert(c[1]);E=[k,new o.Point(A.x,k.y),A,new o.Point(k.x,A.y),k]}return this.style.queryRenderedFeatures(E,m,this.transform)},s.prototype.querySourceFeatures=function(c,m){return this.style.querySourceFeatures(c,m)},s.prototype.setStyle=function(c,m){return(m=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(c,m))},s.prototype._getUIString=function(c){var m=this._locale[c];if(m==null)throw new Error("Missing UI string '"+c+"'");return m},s.prototype._updateStyle=function(c,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Cn(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Cn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,m){var E=this;if(typeof c=="string"){var k=this._requestManager.normalizeStyleURL(c),A=this._requestManager.transformRequest(k,o.ResourceType.Style);o.getJSON(A,function(B,Z){B?E.fire(new o.ErrorEvent(B)):Z&&E._updateDiff(Z,m)})}else typeof c=="object"&&this._updateDiff(c,m)},s.prototype._updateDiff=function(c,m){try{this.style.setState(c)&&this._update(!0)}catch(E){o.warnOnce("Unable to perform style diff: "+(E.message||E.error||E)+".  Rebuilding the style from scratch."),this._updateStyle(c,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,m){return this._lazyInitEmptyStyle(),this.style.addSource(c,m),this._update(!0)},s.prototype.isSourceLoaded=function(c){var m=this.style&&this.style.sourceCaches[c];if(m!==void 0)return m.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var m in c){var E=c[m]._tiles;for(var k in E){var A=E[k];if(A.state!=="loaded"&&A.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,m,E){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,m,E)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,m,E){E===void 0&&(E={});var k=E.pixelRatio;k===void 0&&(k=1);var A=E.sdf;A===void 0&&(A=!1);var B=E.stretchX,Z=E.stretchY,Y=E.content;if(this._lazyInitEmptyStyle(),m instanceof cp||Er&&m instanceof Er){var Q=o.browser.getImageData(m);this.style.addImage(c,{data:new o.RGBAImage({width:Q.width,height:Q.height},Q.data),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:A,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $=m;this.style.addImage(c,{data:new o.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:A,version:0,userImage:$}),$.onAdd&&$.onAdd(this,c)}},s.prototype.updateImage=function(c,m){var E=this.style.getImage(c);if(!E)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var k=m instanceof cp||Er&&m instanceof Er?o.browser.getImageData(m):m,A=k.width,B=k.height,Z=k.data;return A===void 0||B===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):A!==E.data.width||B!==E.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(E.data.replace(Z,!(m instanceof cp||Er&&m instanceof Er)),void this.style.updateImage(c,E))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,m){o.getImage(this._requestManager.transformRequest(c,o.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,m){return this._lazyInitEmptyStyle(),this.style.addLayer(c,m),this._update(!0)},s.prototype.moveLayer=function(c,m){return this.style.moveLayer(c,m),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,m,E){return this.style.setLayerZoomRange(c,m,E),this._update(!0)},s.prototype.setFilter=function(c,m,E){return E===void 0&&(E={}),this.style.setFilter(c,m,E),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setPaintProperty(c,m,E,k),this._update(!0)},s.prototype.getPaintProperty=function(c,m){return this.style.getPaintProperty(c,m)},s.prototype.setLayoutProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setLayoutProperty(c,m,E,k),this._update(!0)},s.prototype.getLayoutProperty=function(c,m){return this.style.getLayoutProperty(c,m)},s.prototype.setLight=function(c,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(c,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,m){return this.style.setFeatureState(c,m),this._update()},s.prototype.removeFeatureState=function(c,m){return this.style.removeFeatureState(c,m),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,m=0;return this._container&&(c=this._container.clientWidth||400,m=this._container.clientHeight||300),[c,m]},s.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=P.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=P.create("div","mapboxgl-canvas-container",c);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=P.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var E=this._containerDimensions();this._resizeCanvas(E[0],E[1]);var k=this._controlContainer=P.create("div","mapboxgl-control-container",c),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(B){A[B]=P.create("div","mapboxgl-ctrl-"+B,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,m){var E=o.browser.devicePixelRatio||1;this._canvas.width=E*c,this._canvas.height=E*m,this._canvas.style.width=c+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var c=o.extend({},z.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);m?(this.painter=new vr(m,this.transform),o.webpSupported.testSupport(m)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var m,E=this,k=0,A=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=A.createQueryEXT(),A.beginQueryEXT(A.TIME_ELAPSED_EXT,m),k=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Z=this.transform.zoom,Y=o.browser.now();this.style.zoomHistory.update(Z,Y);var Q=new o.EvaluationParameters(Z,{now:Y,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$=Q.crossFadingFactor();$===1&&$===this._crossFadingFactor||(B=!0,this._crossFadingFactor=$),this.style.update(Q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ue=o.browser.now()-k;A.endQueryEXT(A.TIME_ELAPSED_EXT,m),setTimeout(function(){var oe=A.getQueryObjectEXT(m,A.QUERY_RESULT_EXT)/1e6;A.deleteQueryEXT(m),E.fire(new o.Event("gpu-timing-frame",{cpuTime:ue,gpuTime:oe}))},50)}if(this.listens("gpu-timing-layer")){var ae=this.painter.collectGpuTimers();setTimeout(function(){var oe=E.painter.queryGpuTimers(ae);E.fire(new o.Event("gpu-timing-layer",{layerTimes:oe}))},50)}var de=this._sourcesDirty||this._styleDirty||this._placementDirty;return de||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||de||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,m=this._controls;c<m.length;c+=1)m[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),Il(this._canvasContainer),Il(this._controlContainer),Il(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(m){c._frame=null,c._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,m){o.setCacheLimits(c,m)},a.version.get=function(){return o.version},Object.defineProperties(s.prototype,a),s}(kl);function Il(n){n.parentNode&&n.parentNode.removeChild(n)}var hp={showCompass:!0,showZoom:!0,visualizePitch:!1},pn=function(n){var s=this;this.options=o.extend({},hp,n),this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),P.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),P.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=P.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};pn.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),a=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},pn.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},pn.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gi(this._map,this._compass,this.options.visualizePitch)),this._container},pn.prototype.onRemove=function(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},pn.prototype._createButton=function(n,s){var a=P.create("button",n,this._container);return a.type="button",a.addEventListener("click",s),a},pn.prototype._setButtonTitle=function(n,s){var a=this._map._getUIString("NavigationControl."+s);n.title=a,n.setAttribute("aria-label",a)};var Gi=function(n,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new su({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,a&&(this.mousePitch=new lp({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),P.addEventListener(s,"mousedown",this.mousedown),P.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(s,"touchmove",this.touchmove),P.addEventListener(s,"touchend",this.touchend),P.addEventListener(s,"touchcancel",this.reset)};function aa(n,s,a){if(n=new o.LngLat(n.lng,n.lat),s){var c=new o.LngLat(n.lng-360,n.lat),m=new o.LngLat(n.lng+360,n.lat),E=a.locationPoint(n).distSqr(s);a.locationPoint(c).distSqr(s)<E?n=c:a.locationPoint(m).distSqr(s)<E&&(n=m)}for(;Math.abs(n.lng-a.center.lng)>180;){var k=a.locationPoint(n);if(k.x>=0&&k.y>=0&&k.x<=a.width&&k.y<=a.height)break;n.lng>a.center.lng?n.lng-=360:n.lng+=360}return n}Gi.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),P.disableDrag()},Gi.prototype.move=function(n,s){var a=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&a.setBearing(a.getBearing()+c.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},Gi.prototype.off=function(){var n=this.element;P.removeEventListener(n,"mousedown",this.mousedown),P.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(n,"touchmove",this.touchmove),P.removeEventListener(n,"touchend",this.touchend),P.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},Gi.prototype.offTemp=function(){P.enableDrag(),P.removeEventListener(o.window,"mousemove",this.mousemove),P.removeEventListener(o.window,"mouseup",this.mouseup)},Gi.prototype.mousedown=function(n){this.down(o.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),P.mousePos(this.element,n)),P.addEventListener(o.window,"mousemove",this.mousemove),P.addEventListener(o.window,"mouseup",this.mouseup)},Gi.prototype.mousemove=function(n){this.move(n,P.mousePos(this.element,n))},Gi.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},Gi.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},Gi.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},Gi.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Gi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Jn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jc(n,s,a){var c=n.classList;for(var m in Jn)c.remove("mapboxgl-"+a+"-anchor-"+m);c.add("mapboxgl-"+a+"-anchor-"+s)}var Po,pp=function(n){function s(a,c){if(n.call(this),(a instanceof o.window.HTMLElement||c)&&(a=o.extend({element:a},c)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=o.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div"),this._element.setAttribute("aria-label","Map marker");var m=P.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var E=P.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");var k=P.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");var A=P.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");for(var B=0,Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];B<Z.length;B+=1){var Y=Z[B],Q=P.createNS("http://www.w3.org/2000/svg","ellipse");Q.setAttributeNS(null,"opacity","0.04"),Q.setAttributeNS(null,"cx","10.5"),Q.setAttributeNS(null,"cy","5.80029008"),Q.setAttributeNS(null,"rx",Y.rx),Q.setAttributeNS(null,"ry",Y.ry),A.appendChild(Q)}var $=P.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);var ue=P.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(ue);var ae=P.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"fill","#000000");var de=P.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ae.appendChild(de);var oe=P.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");var me=P.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(8.0, 8.0)");var xe=P.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#000000"),xe.setAttributeNS(null,"opacity","0.25"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962");var Te=P.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),me.appendChild(xe),me.appendChild(Te),k.appendChild(A),k.appendChild($),k.appendChild(ae),k.appendChild(oe),k.appendChild(me),m.appendChild(k),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=o.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Re){Re.preventDefault()}),this._element.addEventListener("mousedown",function(Re){Re.preventDefault()}),Jc(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var c=a.code,m=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var c=a.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=aa(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,Jn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=o.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(o.Evented),fp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Co=0,oo=!1,dp=function(n){function s(a){n.call(this),this.options=o.extend({},fp,a),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){var c;return this._map=a,this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Po!==void 0?c(Po):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(m){c(Po=m.state!=="denied")}):c(Po=!!o.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Co=0,oo=!1},s.prototype._isOutOfMapMaxBounds=function(a){var c=this._map.getMaxBounds(),m=a.coords;return c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,E=this._map.getBearing(),k=o.extend({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(m),k,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,c=this._map.unproject([0,a]),m=this._map.unproject([1,a]),E=c.distanceTo(m),k=Math.ceil(2*this._accuracy/E);this._circleElement.style.width=k+"px",this._circleElement.style.height=k+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&oo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var c=this;if(this._container.addEventListener("contextmenu",function(k){return k.preventDefault()}),this._geolocateButton=P.create("button","mapboxgl-ctrl-geolocate",this._container),P.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var E=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pp(this._dotElement),this._circleElement=P.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(k){k.geolocateSource||c._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new o.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Co--,oo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Co>1?(a={maximumAge:6e5,timeout:0},oo=!0):(a=this.options.positionOptions,oo=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(o.Evented),Fa={maxWidth:100,unit:"metric"},Do=function(n){this.options=o.extend({},Fa,n),o.bindAll(["_onMove","setUnit"],this)};function Qc(n,s,a){var c=a&&a.maxWidth||100,m=n._container.clientHeight/2,E=n.unproject([0,m]),k=n.unproject([c,m]),A=E.distanceTo(k);if(a&&a.unit==="imperial"){var B=3.2808*A;B>5280?Vs(s,c,B/5280,n._getUIString("ScaleControl.Miles")):Vs(s,c,B,n._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Vs(s,c,A/1852,n._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Vs(s,c,A/1e3,n._getUIString("ScaleControl.Kilometers")):Vs(s,c,A,n._getUIString("ScaleControl.Meters"))}function Vs(n,s,a,c){var m,E,k,A=(m=a,(E=Math.pow(10,(""+Math.floor(m)).length-1))*(k=(k=m/E)>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(B){var Z=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*Z)/Z}(k)));n.style.width=s*(A/a)+"px",n.innerHTML=A+"&nbsp;"+c}Do.prototype.getDefaultPosition=function(){return"bottom-left"},Do.prototype._onMove=function(){Qc(this._map,this._container,this.options)},Do.prototype.onAdd=function(n){return this._map=n,this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Do.prototype.onRemove=function(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Do.prototype.setUnit=function(n){this.options.unit=n,Qc(this._map,this._container,this.options)};var Ln=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof o.window.HTMLElement?this._container=n.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ln.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ln.prototype.onRemove=function(){P.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ln.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Ln.prototype._setupUI=function(){var n=this._fullscreenButton=P.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);P.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ln.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},Ln.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ln.prototype._isFullscreen=function(){return this._fullscreen},Ln.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ln.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var mp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Na=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ua=function(n){function s(a){n.call(this),this.options=o.extend(Object.create(mp),a),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(o.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var c,m=o.window.document.createDocumentFragment(),E=o.window.document.createElement("body");for(E.innerHTML=a;c=E.firstChild;)m.appendChild(c);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=P.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=P.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=P.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Q){return c._container.classList.add(Q)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=aa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),E=this.options.anchor,k=function Q($){if($){if(typeof $=="number"){var ue=Math.round(Math.sqrt(.5*Math.pow($,2)));return{center:new o.Point(0,0),top:new o.Point(0,$),"top-left":new o.Point(ue,ue),"top-right":new o.Point(-ue,ue),bottom:new o.Point(0,-$),"bottom-left":new o.Point(ue,-ue),"bottom-right":new o.Point(-ue,-ue),left:new o.Point($,0),right:new o.Point(-$,0)}}if($ instanceof o.Point||Array.isArray($)){var ae=o.Point.convert($);return{center:ae,top:ae,"top-left":ae,"top-right":ae,bottom:ae,"bottom-left":ae,"bottom-right":ae,left:ae,right:ae}}return{center:o.Point.convert($.center||[0,0]),top:o.Point.convert($.top||[0,0]),"top-left":o.Point.convert($["top-left"]||[0,0]),"top-right":o.Point.convert($["top-right"]||[0,0]),bottom:o.Point.convert($.bottom||[0,0]),"bottom-left":o.Point.convert($["bottom-left"]||[0,0]),"bottom-right":o.Point.convert($["bottom-right"]||[0,0]),left:o.Point.convert($.left||[0,0]),right:o.Point.convert($.right||[0,0])}}return Q(new o.Point(0,0))}(this.options.offset);if(!E){var A,B=this._container.offsetWidth,Z=this._container.offsetHeight;A=m.y+k.bottom.y<Z?["top"]:m.y>this._map.transform.height-Z?["bottom"]:[],m.x<B/2?A.push("left"):m.x>this._map.transform.width-B/2&&A.push("right"),E=A.length===0?"bottom":A.join("-")}var Y=m.add(k[E]).round();P.setTransform(this._container,Jn[E]+" translate("+Y.x+"px,"+Y.y+"px)"),Jc(this._container,E,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(Na);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(o.Evented),Mo={version:o.version,supported:z,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:ic,NavigationControl:pn,GeolocateControl:dp,AttributionControl:Yn,ScaleControl:Do,FullscreenControl:Ln,Popup:Ua,Marker:pp,Style:Cn,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Be().acquire(Le)},clearPrewarmedResources:function(){var n=pt;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Le),pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(n){o.config.ACCESS_TOKEN=n},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(n){o.config.API_URL=n},get workerCount(){return qe.workerCount},set workerCount(n){qe.workerCount=n},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){o.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){o.clearTileCache(n)},workerUrl:""};return Mo}),x})})($g);const uT=$g.exports;function kS(u){let h;const f=u[15].default,y=Xv(f,u,u[14],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,_){y&&y.m(x,_),h=!0},p(x,_){y&&y.p&&(!h||_&16384)&&Wv(y,f,x,x[14],h?Jv(f,x[14],_,null):Yv(x[14]),null)},i(x){h||(et(y,x),h=!0)},o(x){ft(y,x),h=!1},d(x){y&&y.d(x)}}}function cT(u){let h,f,y,x=u[0]&&kS(u);return{c(){h=M("div"),x&&x.c(),this.h()},l(_){h=L(_,"DIV",{class:!0,id:!0});var o=R(h);x&&x.l(o),o.forEach(T),this.h()},h(){S(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),S(h,"id",u[1]),Xo(()=>u[16].call(h))},m(_,o){Pe(_,h,o),x&&x.m(h,null),f=Wo(h,u[16].bind(h)),u[17](h),y=!0},p(_,[o]){_[0]?x?(x.p(_,o),o&1&&et(x,1)):(x=kS(_),x.c(),et(x,1),x.m(h,null)):x&&(Zu(),ft(x,1,1,()=>{x=null}),Gu()),(!y||o&2)&&S(h,"id",_[1])},i(_){y||(et(x),y=!0)},o(_){ft(x),y=!1},d(_){_&&T(h),x&&x.d(),f(),u[17](null)}}}function hT(u,h,f){let{$$slots:y={},$$scope:x}=h,{map:_}=h,{id:o="map"}=h,{location:z={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:P="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:F=!0}=h,{minzoom:V=0}=h,{maxzoom:j=14}=h,{zoom:U=null}=h,{scrollzoom:pe=!0}=h,{geolocate:he=!0}=h,{zoomcontrol:Ie=!0}=h,{options:we={}}=h,Oe,Ue;Rk("map",{getMap:()=>_}),z.bounds?we={...we,bounds:z.bounds}:z.lon&&z.lat&&(we={...we,center:[z.lon,z.lat]},z.zoom&&(we.zoom=z.zoom)),Bk(()=>{const Je=document.createElement("link");return Je.rel="stylesheet",Je.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",Je.onload=()=>{f(0,_=new $g.exports.Map({container:Oe,style:P,minZoom:V,maxZoom:j,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:F,...we})),Ie&&_.addControl(new $g.exports.NavigationControl({showCompass:!1})),pe||_.scrollZoom.disable(),he&&_.addControl(new $g.exports.GeolocateControl),_.on("load",()=>{f(4,U=_.getZoom())}),_.on("zoom",()=>{f(4,U=_.getZoom())})},document.head.appendChild(Je),()=>{_.remove(),Je.parentNode.removeChild(Je)}});function Bt(){let Je=document.getElementsByClassName("mapboxgl-canvas");Je[0]&&(Je[0].style.width="100%",_.resize())}function Mt(){Ue=this.clientWidth,f(2,Ue)}function mt(Je){cf[Je?"unshift":"push"](()=>{Oe=Je,f(3,Oe)})}return u.$$set=Je=>{"map"in Je&&f(0,_=Je.map),"id"in Je&&f(1,o=Je.id),"location"in Je&&f(6,z=Je.location),"style"in Je&&f(7,P=Je.style),"interactive"in Je&&f(8,F=Je.interactive),"minzoom"in Je&&f(9,V=Je.minzoom),"maxzoom"in Je&&f(10,j=Je.maxzoom),"zoom"in Je&&f(4,U=Je.zoom),"scrollzoom"in Je&&f(11,pe=Je.scrollzoom),"geolocate"in Je&&f(12,he=Je.geolocate),"zoomcontrol"in Je&&f(13,Ie=Je.zoomcontrol),"options"in Je&&f(5,we=Je.options),"$$scope"in Je&&f(14,x=Je.$$scope)},u.$$.update=()=>{u.$$.dirty&4&&Ue&&Bt()},[_,o,Ue,Oe,U,we,z,P,F,V,j,pe,he,Ie,x,y,Mt,mt]}class pT extends Yo{constructor(h){super(),Jo(this,h,hT,cT,Qo,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function IS(u){let h;const f=u[11].default,y=Xv(f,u,u[10],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,_){y&&y.m(x,_),h=!0},p(x,_){y&&y.p&&(!h||_&1024)&&Wv(y,f,x,x[10],h?Jv(f,x[10],_,null):Yv(x[10]),null)},i(x){h||(et(y,x),h=!0)},o(x){ft(y,x),h=!1},d(x){y&&y.d(x)}}}function fT(u){let h,f,y=u[0]&&IS(u);return{c(){y&&y.c(),h=zn()},l(x){y&&y.l(x),h=zn()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,[_]){x[0]?y?(y.p(x,_),_&1&&et(y,1)):(y=IS(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Zu(),ft(y,1,1,()=>{y=null}),Gu())},i(x){f||(et(y),f=!0)},o(x){ft(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function dT(u,h,f){let{$$slots:y={},$$scope:x}=h,{id:_}=h,{type:o}=h,{url:z=null}=h,{props:P={}}=h,{data:F=null}=h,{layer:V=null}=h,{promoteId:j=null}=h,{minzoom:U=null}=h,{maxzoom:pe=null}=h,he=!1;const{getMap:Ie}=i_("map"),we=Ie();we.getSource(_)&&we.removeSource(_);function Oe(){we.isSourceLoaded(_)?(f(0,he=!0),console.log(_+" loaded!")):setTimeout(()=>{console.log("..."),Oe()},500)}function Ue(){we.isStyleLoaded(_)?(Bt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),Ue()},500)}U&&(P.minzoom=U),pe&&(P.maxzoom=pe),V&&j?(P.promoteId={},P.promoteId[V]=j):j&&(P.promoteId=j);function Bt(){console.log(_+" map source loading..."),o=="geojson"?F?(we.addSource(_,{type:o,data:F,...P}),Oe()):z&&(we.addSource(_,{type:o,data:z,...P}),Oe()):o=="vector"&&(we.addSource(_,{type:o,tiles:[z],...P}),Oe())}Ue();function Mt(){we.getSource(_).setData(F)}return u.$$set=mt=>{"id"in mt&&f(2,_=mt.id),"type"in mt&&f(3,o=mt.type),"url"in mt&&f(4,z=mt.url),"props"in mt&&f(1,P=mt.props),"data"in mt&&f(5,F=mt.data),"layer"in mt&&f(6,V=mt.layer),"promoteId"in mt&&f(7,j=mt.promoteId),"minzoom"in mt&&f(8,U=mt.minzoom),"maxzoom"in mt&&f(9,pe=mt.maxzoom),"$$scope"in mt&&f(10,x=mt.$$scope)},u.$$.update=()=>{u.$$.dirty&33&&he&&F&&Mt()},[he,P,_,o,z,F,V,j,U,pe,x,y]}class mT extends Yo{constructor(h){super(),Jo(this,h,dT,fT,Qo,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function yT(u,h,f){const{Popup:y}=uT,x=Lk(),_=new y({closeButton:!1,closeOnClick:!1});let{id:o}=h,{source:z}=h,{sourceLayer:P=null}=h,{type:F}=h,{filter:V=null}=h,{layout:j={}}=h,{paint:U={}}=h,{data:pe=null}=h,{code:he=null}=h,{name:Ie="name"}=h,{colorCode:we=null}=h,{click:Oe=!1}=h,{ignoreClick:Ue=!1}=h,{clickCenter:Bt=!1}=h,{selected:Mt=null}=h,{hover:mt=!1}=h,{hovered:Je=null}=h,{highlight:Tr=!1}=h,{highlightKey:wr="highlighted"}=h,{highlighted:or=[]}=h,{order:kt=null}=h,{maxzoom:At=null}=h,{minzoom:Pr=null}=h,{isChild:Ot=!1}=h;const{getMap:Ar}=i_("map"),rt=Ar();let ur=null,$r=null,li=[];rt.getLayer(o)&&rt.removeLayer(o);let kr={id:o,type:F,source:z,paint:U,layout:j};V&&(kr.filter=V),P&&(kr["source-layer"]=P),At&&(kr.maxzoom=At),Pr&&(kr.minzoom=Pr),rt.addLayer(kr,kt);function vt(){console.log("updating colors..."),pe.forEach(nt=>{rt.setFeatureState({source:z,sourceLayer:P,id:nt[he]},{color:nt[we]})})}return Oe&&rt.on("click",o,nt=>{if(nt.features.length>0&&!Ue){let dr=nt.features[0].id;if(Ot&&or.includes(dr)||!Ot&&Mt!=dr){if(f(0,Mt=dr),x("select",{code:Mt}),ur&&rt.setFeatureState({source:z,sourceLayer:P,id:ur},{selected:!1}),rt.setFeatureState({source:z,sourceLayer:P,id:Mt},{selected:!0}),Bt){let Un=centroid(nt.features[0].toJSON().geometry);rt.flyTo({center:Un.geometry.coordinates})}f(24,ur=Mt)}}}),mt&&(rt.on("mousemove",o,nt=>{if(nt.features.length>0){let dr=nt.features[0].id;Je&&rt.setFeatureState({source:z,sourceLayer:P,id:Je},{hovered:!1}),Ot&&or.includes(dr)||!Ot&&Mt!=dr?(f(1,Je=f(25,$r=dr)),rt.setFeatureState({source:z,sourceLayer:P,id:Je},{hovered:!0}),rt.getCanvas().style.cursor="pointer",_.setLngLat(nt.lngLat).setHTML(`<strong>${nt.features[0].properties[Ie]?nt.features[0].properties[Ie]:nt.features[0].properties[he]}</strong>`).addTo(rt)):_.remove()}}),rt.on("mouseleave",o,nt=>{Je&&rt.setFeatureState({source:z,sourceLayer:P,id:Je},{hovered:!1}),f(1,Je=f(25,$r=null)),rt.getCanvas().style.cursor="",_.remove()})),u.$$set=nt=>{"id"in nt&&f(2,o=nt.id),"source"in nt&&f(3,z=nt.source),"sourceLayer"in nt&&f(4,P=nt.sourceLayer),"type"in nt&&f(5,F=nt.type),"filter"in nt&&f(6,V=nt.filter),"layout"in nt&&f(7,j=nt.layout),"paint"in nt&&f(8,U=nt.paint),"data"in nt&&f(9,pe=nt.data),"code"in nt&&f(10,he=nt.code),"name"in nt&&f(11,Ie=nt.name),"colorCode"in nt&&f(12,we=nt.colorCode),"click"in nt&&f(13,Oe=nt.click),"ignoreClick"in nt&&f(14,Ue=nt.ignoreClick),"clickCenter"in nt&&f(15,Bt=nt.clickCenter),"selected"in nt&&f(0,Mt=nt.selected),"hover"in nt&&f(16,mt=nt.hover),"hovered"in nt&&f(1,Je=nt.hovered),"highlight"in nt&&f(17,Tr=nt.highlight),"highlightKey"in nt&&f(18,wr=nt.highlightKey),"highlighted"in nt&&f(19,or=nt.highlighted),"order"in nt&&f(20,kt=nt.order),"maxzoom"in nt&&f(21,At=nt.maxzoom),"minzoom"in nt&&f(22,Pr=nt.minzoom),"isChild"in nt&&f(23,Ot=nt.isChild)},u.$$.update=()=>{u.$$.dirty[0]&4096&&we&&vt(),u.$$.dirty[0]&68026392&&Tr&&or!=li&&(li[0]&&li.forEach(nt=>{let dr={};dr[wr]=!1,rt.setFeatureState({source:z,sourceLayer:P,id:nt},dr)}),f(26,li=or),or[0]&&or.forEach(nt=>{let dr={};dr[wr]=!0,rt.setFeatureState({source:z,sourceLayer:P,id:nt},dr)})),u.$$.dirty[0]&16777241&&Mt!=ur&&(ur&&rt.setFeatureState({source:z,sourceLayer:P,id:ur},{selected:!1}),Mt&&rt.setFeatureState({source:z,sourceLayer:P,id:Mt},{selected:!0}),f(24,ur=Mt)),u.$$.dirty[0]&33619994&&mt&&Je!=$r&&($r&&rt.setFeatureState({source:z,sourceLayer:P,id:$r},{hovered:!1}),Je&&rt.setFeatureState({source:z,sourceLayer:P,id:Je},{hovered:!0}),f(25,$r=Je))},[Mt,Je,o,z,P,F,V,j,U,pe,he,Ie,we,Oe,Ue,Bt,mt,Tr,wr,or,kt,At,Pr,Ot,ur,$r,li]}class kx extends Yo{constructor(h){super(),Jo(this,h,yT,null,Qo,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function vT(u){return u===0?!0:u}function yd(u){return vT(u)?Array.isArray(u)?h=>u.map(f=>typeof f!="function"?h[f]:f(h)):typeof u!="function"?h=>h[u]:u:null}function gT(u){const h={};for(const f of u){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":y,"1":x}=f;Object.defineProperty(h,y,{configurable:!0,enumerable:!0,writable:!0,value:x})}return h}function Ix(u,h={}){return gT(Object.entries(u).filter(([f,y])=>y!==void 0&&h[f]===void 0))}function _T(u,h){if(!Array.isArray(u))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof u}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},y=Object.keys(h),x=y.length;let _,o,z,P,F,V,j,U;const pe=u.length;for(_=0;_<x;_+=1){for(P=y[_],j=h[P],F=null,V=null,o=0;o<pe;o+=1)if(U=j(u[o]),Array.isArray(U)){const he=U.length;for(z=0;z<he;z+=1)U[z]!==void 0&&U[z]!==null&&Number.isNaN(U[z])===!1&&((F===null||U[z]<F)&&(F=U[z]),(V===null||U[z]>V)&&(V=U[z]))}else U!=null&&Number.isNaN(U)===!1&&((F===null||U<F)&&(F=U),(V===null||U>V)&&(V=U));f[P]=[F,V]}return f}function qk(u=[],h){return Array.isArray(h)===!0?h.map((f,y)=>f===null?u[y]:f):u}function j_(u){return function([f,y]){return f?qk(f[u],y):y}}function t0(u,h){return u==null||h==null?NaN:u<h?-1:u>h?1:u>=h?0:NaN}function bT(u,h){return u==null||h==null?NaN:h<u?-1:h>u?1:h>=u?0:NaN}function jk(u){let h,f,y;u.length!==2?(h=t0,f=(z,P)=>t0(u(z),P),y=(z,P)=>u(z)-P):(h=u===t0||u===bT?u:xT,f=u,y=u);function x(z,P,F=0,V=z.length){if(F<V){if(h(P,P)!==0)return V;do{const j=F+V>>>1;f(z[j],P)<0?F=j+1:V=j}while(F<V)}return F}function _(z,P,F=0,V=z.length){if(F<V){if(h(P,P)!==0)return V;do{const j=F+V>>>1;f(z[j],P)<=0?F=j+1:V=j}while(F<V)}return F}function o(z,P,F=0,V=z.length){const j=x(z,P,F,V-1);return j>F&&y(z[j-1],P)>-y(z[j],P)?j-1:j}return{left:x,center:o,right:_}}function xT(){return 0}function wT(u){return u===null?NaN:+u}const ET=jk(t0),ST=ET.right;jk(wT).center;const kT=ST;class TS extends Map{constructor(h,f=AT){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[y,x]of h)this.set(y,x)}get(h){return super.get(AS(this,h))}has(h){return super.has(AS(this,h))}set(h,f){return super.set(IT(this,h),f)}delete(h){return super.delete(TT(this,h))}}function AS({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):f}function IT({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):(u.set(y,f),f)}function TT({_intern:u,_key:h},f){const y=h(f);return u.has(y)&&(f=u.get(y),u.delete(y)),f}function AT(u){return u!==null&&typeof u=="object"?u.valueOf():u}var Px=Math.sqrt(50),Cx=Math.sqrt(10),Dx=Math.sqrt(2);function zT(u,h,f){var y,x=-1,_,o,z;if(h=+h,u=+u,f=+f,u===h&&f>0)return[u];if((y=h<u)&&(_=u,u=h,h=_),(z=Zk(u,h,f))===0||!isFinite(z))return[];if(z>0){let P=Math.round(u/z),F=Math.round(h/z);for(P*z<u&&++P,F*z>h&&--F,o=new Array(_=F-P+1);++x<_;)o[x]=(P+x)*z}else{z=-z;let P=Math.round(u*z),F=Math.round(h*z);for(P/z<u&&++P,F/z>h&&--F,o=new Array(_=F-P+1);++x<_;)o[x]=(P+x)/z}return y&&o.reverse(),o}function Zk(u,h,f){var y=(h-u)/Math.max(0,f),x=Math.floor(Math.log(y)/Math.LN10),_=y/Math.pow(10,x);return x>=0?(_>=Px?10:_>=Cx?5:_>=Dx?2:1)*Math.pow(10,x):-Math.pow(10,-x)/(_>=Px?10:_>=Cx?5:_>=Dx?2:1)}function PT(u,h,f){var y=Math.abs(h-u)/Math.max(0,f),x=Math.pow(10,Math.floor(Math.log(y)/Math.LN10)),_=y/x;return _>=Px?x*=10:_>=Cx?x*=5:_>=Dx&&(x*=2),h<u?-x:x}function CT(u,h,f){u=+u,h=+h,f=(x=arguments.length)<2?(h=u,u=0,1):x<3?1:+f;for(var y=-1,x=Math.max(0,Math.ceil((h-u)/f))|0,_=new Array(x);++y<x;)_[y]=u+y*f;return _}function y0(u,h){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(h).domain(u);break}return this}const zS=Symbol("implicit");function Gk(){var u=new TS,h=[],f=[],y=zS;function x(_){let o=u.get(_);if(o===void 0){if(y!==zS)return y;u.set(_,o=h.push(_)-1)}return f[o%f.length]}return x.domain=function(_){if(!arguments.length)return h.slice();h=[],u=new TS;for(const o of _)u.has(o)||u.set(o,h.push(o)-1);return x},x.range=function(_){return arguments.length?(f=Array.from(_),x):f.slice()},x.unknown=function(_){return arguments.length?(y=_,x):y},x.copy=function(){return Gk(h,f).unknown(y)},y0.apply(x,arguments),x}function Kk(){var u=Gk().unknown(void 0),h=u.domain,f=u.range,y=0,x=1,_,o,z=!1,P=0,F=0,V=.5;delete u.unknown;function j(){var U=h().length,pe=x<y,he=pe?x:y,Ie=pe?y:x;_=(Ie-he)/Math.max(1,U-P+F*2),z&&(_=Math.floor(_)),he+=(Ie-he-_*(U-P))*V,o=_*(1-P),z&&(he=Math.round(he),o=Math.round(o));var we=CT(U).map(function(Oe){return he+_*Oe});return f(pe?we.reverse():we)}return u.domain=function(U){return arguments.length?(h(U),j()):h()},u.range=function(U){return arguments.length?([y,x]=U,y=+y,x=+x,j()):[y,x]},u.rangeRound=function(U){return[y,x]=U,y=+y,x=+x,z=!0,j()},u.bandwidth=function(){return o},u.step=function(){return _},u.round=function(U){return arguments.length?(z=!!U,j()):z},u.padding=function(U){return arguments.length?(P=Math.min(1,F=+U),j()):P},u.paddingInner=function(U){return arguments.length?(P=Math.min(1,U),j()):P},u.paddingOuter=function(U){return arguments.length?(F=+U,j()):F},u.align=function(U){return arguments.length?(V=Math.max(0,Math.min(1,U)),j()):V},u.copy=function(){return Kk(h(),[y,x]).round(z).paddingInner(P).paddingOuter(F).align(V)},y0.apply(j(),arguments)}function jx(u,h,f){u.prototype=h.prototype=f,f.constructor=u}function Hk(u,h){var f=Object.create(u.prototype);for(var y in h)f[y]=h[y];return f}function h_(){}var e_=.7,s0=1/e_,Hv="\\s*([+-]?\\d+)\\s*",t_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DT=/^#([0-9a-f]{3,8})$/,MT=new RegExp(`^rgb\\(${Hv},${Hv},${Hv}\\)$`),LT=new RegExp(`^rgb\\(${Qh},${Qh},${Qh}\\)$`),RT=new RegExp(`^rgba\\(${Hv},${Hv},${Hv},${t_}\\)$`),BT=new RegExp(`^rgba\\(${Qh},${Qh},${Qh},${t_}\\)$`),OT=new RegExp(`^hsl\\(${t_},${Qh},${Qh}\\)$`),VT=new RegExp(`^hsla\\(${t_},${Qh},${Qh},${t_}\\)$`),PS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jx(h_,r_,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:CS,formatHex:CS,formatHex8:FT,formatHsl:NT,formatRgb:DS,toString:DS});function CS(){return this.rgb().formatHex()}function FT(){return this.rgb().formatHex8()}function NT(){return Xk(this).formatHsl()}function DS(){return this.rgb().formatRgb()}function r_(u){var h,f;return u=(u+"").trim().toLowerCase(),(h=DT.exec(u))?(f=h[1].length,h=parseInt(h[1],16),f===6?MS(h):f===3?new sl(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?Z_(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?Z_(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=MT.exec(u))?new sl(h[1],h[2],h[3],1):(h=LT.exec(u))?new sl(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=RT.exec(u))?Z_(h[1],h[2],h[3],h[4]):(h=BT.exec(u))?Z_(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=OT.exec(u))?BS(h[1],h[2]/100,h[3]/100,1):(h=VT.exec(u))?BS(h[1],h[2]/100,h[3]/100,h[4]):PS.hasOwnProperty(u)?MS(PS[u]):u==="transparent"?new sl(NaN,NaN,NaN,0):null}function MS(u){return new sl(u>>16&255,u>>8&255,u&255,1)}function Z_(u,h,f,y){return y<=0&&(u=h=f=NaN),new sl(u,h,f,y)}function UT(u){return u instanceof h_||(u=r_(u)),u?(u=u.rgb(),new sl(u.r,u.g,u.b,u.opacity)):new sl}function Mx(u,h,f,y){return arguments.length===1?UT(u):new sl(u,h,f,y==null?1:y)}function sl(u,h,f,y){this.r=+u,this.g=+h,this.b=+f,this.opacity=+y}jx(sl,Mx,Hk(h_,{brighter(u){return u=u==null?s0:Math.pow(s0,u),new sl(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=u==null?e_:Math.pow(e_,u),new sl(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new sl(xy(this.r),xy(this.g),xy(this.b),l0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LS,formatHex:LS,formatHex8:qT,formatRgb:RS,toString:RS}));function LS(){return`#${by(this.r)}${by(this.g)}${by(this.b)}`}function qT(){return`#${by(this.r)}${by(this.g)}${by(this.b)}${by((isNaN(this.opacity)?1:this.opacity)*255)}`}function RS(){const u=l0(this.opacity);return`${u===1?"rgb(":"rgba("}${xy(this.r)}, ${xy(this.g)}, ${xy(this.b)}${u===1?")":`, ${u})`}`}function l0(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function xy(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function by(u){return u=xy(u),(u<16?"0":"")+u.toString(16)}function BS(u,h,f,y){return y<=0?u=h=f=NaN:f<=0||f>=1?u=h=NaN:h<=0&&(u=NaN),new Fc(u,h,f,y)}function Xk(u){if(u instanceof Fc)return new Fc(u.h,u.s,u.l,u.opacity);if(u instanceof h_||(u=r_(u)),!u)return new Fc;if(u instanceof Fc)return u;u=u.rgb();var h=u.r/255,f=u.g/255,y=u.b/255,x=Math.min(h,f,y),_=Math.max(h,f,y),o=NaN,z=_-x,P=(_+x)/2;return z?(h===_?o=(f-y)/z+(f<y)*6:f===_?o=(y-h)/z+2:o=(h-f)/z+4,z/=P<.5?_+x:2-_-x,o*=60):z=P>0&&P<1?0:o,new Fc(o,z,P,u.opacity)}function jT(u,h,f,y){return arguments.length===1?Xk(u):new Fc(u,h,f,y==null?1:y)}function Fc(u,h,f,y){this.h=+u,this.s=+h,this.l=+f,this.opacity=+y}jx(Fc,jT,Hk(h_,{brighter(u){return u=u==null?s0:Math.pow(s0,u),new Fc(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=u==null?e_:Math.pow(e_,u),new Fc(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+(this.h<0)*360,h=isNaN(u)||isNaN(this.s)?0:this.s,f=this.l,y=f+(f<.5?f:1-f)*h,x=2*f-y;return new sl(Tx(u>=240?u-240:u+120,x,y),Tx(u,x,y),Tx(u<120?u+240:u-120,x,y),this.opacity)},clamp(){return new Fc(OS(this.h),G_(this.s),G_(this.l),l0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=l0(this.opacity);return`${u===1?"hsl(":"hsla("}${OS(this.h)}, ${G_(this.s)*100}%, ${G_(this.l)*100}%${u===1?")":`, ${u})`}`}}));function OS(u){return u=(u||0)%360,u<0?u+360:u}function G_(u){return Math.max(0,Math.min(1,u||0))}function Tx(u,h,f){return(u<60?h+(f-h)*u/60:u<180?f:u<240?h+(f-h)*(240-u)/60:h)*255}const Zx=u=>()=>u;function ZT(u,h){return function(f){return u+f*h}}function GT(u,h,f){return u=Math.pow(u,f),h=Math.pow(h,f)-u,f=1/f,function(y){return Math.pow(u+y*h,f)}}function KT(u){return(u=+u)==1?Wk:function(h,f){return f-h?GT(h,f,u):Zx(isNaN(h)?f:h)}}function Wk(u,h){var f=h-u;return f?ZT(u,f):Zx(isNaN(u)?h:u)}const VS=function u(h){var f=KT(h);function y(x,_){var o=f((x=Mx(x)).r,(_=Mx(_)).r),z=f(x.g,_.g),P=f(x.b,_.b),F=Wk(x.opacity,_.opacity);return function(V){return x.r=o(V),x.g=z(V),x.b=P(V),x.opacity=F(V),x+""}}return y.gamma=u,y}(1);function HT(u,h){h||(h=[]);var f=u?Math.min(h.length,u.length):0,y=h.slice(),x;return function(_){for(x=0;x<f;++x)y[x]=u[x]*(1-_)+h[x]*_;return y}}function XT(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function WT(u,h){var f=h?h.length:0,y=u?Math.min(f,u.length):0,x=new Array(y),_=new Array(f),o;for(o=0;o<y;++o)x[o]=Gx(u[o],h[o]);for(;o<f;++o)_[o]=h[o];return function(z){for(o=0;o<y;++o)_[o]=x[o](z);return _}}function YT(u,h){var f=new Date;return u=+u,h=+h,function(y){return f.setTime(u*(1-y)+h*y),f}}function u0(u,h){return u=+u,h=+h,function(f){return u*(1-f)+h*f}}function JT(u,h){var f={},y={},x;(u===null||typeof u!="object")&&(u={}),(h===null||typeof h!="object")&&(h={});for(x in h)x in u?f[x]=Gx(u[x],h[x]):y[x]=h[x];return function(_){for(x in f)y[x]=f[x](_);return y}}var Lx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ax=new RegExp(Lx.source,"g");function QT(u){return function(){return u}}function $T(u){return function(h){return u(h)+""}}function e4(u,h){var f=Lx.lastIndex=Ax.lastIndex=0,y,x,_,o=-1,z=[],P=[];for(u=u+"",h=h+"";(y=Lx.exec(u))&&(x=Ax.exec(h));)(_=x.index)>f&&(_=h.slice(f,_),z[o]?z[o]+=_:z[++o]=_),(y=y[0])===(x=x[0])?z[o]?z[o]+=x:z[++o]=x:(z[++o]=null,P.push({i:o,x:u0(y,x)})),f=Ax.lastIndex;return f<h.length&&(_=h.slice(f),z[o]?z[o]+=_:z[++o]=_),z.length<2?P[0]?$T(P[0].x):QT(h):(h=P.length,function(F){for(var V=0,j;V<h;++V)z[(j=P[V]).i]=j.x(F);return z.join("")})}function Gx(u,h){var f=typeof h,y;return h==null||f==="boolean"?Zx(h):(f==="number"?u0:f==="string"?(y=r_(h))?(h=y,VS):e4:h instanceof r_?VS:h instanceof Date?YT:XT(h)?HT:Array.isArray(h)?WT:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?JT:u0)(u,h)}function t4(u,h){return u=+u,h=+h,function(f){return Math.round(u*(1-f)+h*f)}}function r4(u){return function(){return u}}function i4(u){return+u}var FS=[0,1];function Jh(u){return u}function Rx(u,h){return(h-=u=+u)?function(f){return(f-u)/h}:r4(isNaN(h)?NaN:.5)}function n4(u,h){var f;return u>h&&(f=u,u=h,h=f),function(y){return Math.max(u,Math.min(h,y))}}function a4(u,h,f){var y=u[0],x=u[1],_=h[0],o=h[1];return x<y?(y=Rx(x,y),_=f(o,_)):(y=Rx(y,x),_=f(_,o)),function(z){return _(y(z))}}function o4(u,h,f){var y=Math.min(u.length,h.length)-1,x=new Array(y),_=new Array(y),o=-1;for(u[y]<u[0]&&(u=u.slice().reverse(),h=h.slice().reverse());++o<y;)x[o]=Rx(u[o],u[o+1]),_[o]=f(h[o],h[o+1]);return function(z){var P=kT(u,z,1,y)-1;return _[P](x[P](z))}}function Yk(u,h){return h.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function Jk(){var u=FS,h=FS,f=Gx,y,x,_,o=Jh,z,P,F;function V(){var U=Math.min(u.length,h.length);return o!==Jh&&(o=n4(u[0],u[U-1])),z=U>2?o4:a4,P=F=null,j}function j(U){return U==null||isNaN(U=+U)?_:(P||(P=z(u.map(y),h,f)))(y(o(U)))}return j.invert=function(U){return o(x((F||(F=z(h,u.map(y),u0)))(U)))},j.domain=function(U){return arguments.length?(u=Array.from(U,i4),V()):u.slice()},j.range=function(U){return arguments.length?(h=Array.from(U),V()):h.slice()},j.rangeRound=function(U){return h=Array.from(U),f=t4,V()},j.clamp=function(U){return arguments.length?(o=U?!0:Jh,V()):o!==Jh},j.interpolate=function(U){return arguments.length?(f=U,V()):f},j.unknown=function(U){return arguments.length?(_=U,j):_},function(U,pe){return y=U,x=pe,V()}}function s4(){return Jk()(Jh,Jh)}function l4(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)}function c0(u,h){if((f=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var f,y=u.slice(0,f);return[y.length>1?y[0]+y.slice(2):y,+u.slice(f+1)]}function Qv(u){return u=c0(Math.abs(u)),u?u[1]:NaN}function u4(u,h){return function(f,y){for(var x=f.length,_=[],o=0,z=u[0],P=0;x>0&&z>0&&(P+z+1>y&&(z=Math.max(1,y-P)),_.push(f.substring(x-=z,x+z)),!((P+=z+1)>y));)z=u[o=(o+1)%u.length];return _.reverse().join(h)}}function c4(u){return function(h){return h.replace(/[0-9]/g,function(f){return u[+f]})}}var h4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function h0(u){if(!(h=h4.exec(u)))throw new Error("invalid format: "+u);var h;return new Kx({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}h0.prototype=Kx.prototype;function Kx(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}Kx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function p4(u){e:for(var h=u.length,f=1,y=-1,x;f<h;++f)switch(u[f]){case".":y=x=f;break;case"0":y===0&&(y=f),x=f;break;default:if(!+u[f])break e;y>0&&(y=0);break}return y>0?u.slice(0,y)+u.slice(x+1):u}var Qk;function f4(u,h){var f=c0(u,h);if(!f)return u+"";var y=f[0],x=f[1],_=x-(Qk=Math.max(-8,Math.min(8,Math.floor(x/3)))*3)+1,o=y.length;return _===o?y:_>o?y+new Array(_-o+1).join("0"):_>0?y.slice(0,_)+"."+y.slice(_):"0."+new Array(1-_).join("0")+c0(u,Math.max(0,h+_-1))[0]}function NS(u,h){var f=c0(u,h);if(!f)return u+"";var y=f[0],x=f[1];return x<0?"0."+new Array(-x).join("0")+y:y.length>x+1?y.slice(0,x+1)+"."+y.slice(x+1):y+new Array(x-y.length+2).join("0")}const US={"%":(u,h)=>(u*100).toFixed(h),b:u=>Math.round(u).toString(2),c:u=>u+"",d:l4,e:(u,h)=>u.toExponential(h),f:(u,h)=>u.toFixed(h),g:(u,h)=>u.toPrecision(h),o:u=>Math.round(u).toString(8),p:(u,h)=>NS(u*100,h),r:NS,s:f4,X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function qS(u){return u}var jS=Array.prototype.map,ZS=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function d4(u){var h=u.grouping===void 0||u.thousands===void 0?qS:u4(jS.call(u.grouping,Number),u.thousands+""),f=u.currency===void 0?"":u.currency[0]+"",y=u.currency===void 0?"":u.currency[1]+"",x=u.decimal===void 0?".":u.decimal+"",_=u.numerals===void 0?qS:c4(jS.call(u.numerals,String)),o=u.percent===void 0?"%":u.percent+"",z=u.minus===void 0?"\u2212":u.minus+"",P=u.nan===void 0?"NaN":u.nan+"";function F(j){j=h0(j);var U=j.fill,pe=j.align,he=j.sign,Ie=j.symbol,we=j.zero,Oe=j.width,Ue=j.comma,Bt=j.precision,Mt=j.trim,mt=j.type;mt==="n"?(Ue=!0,mt="g"):US[mt]||(Bt===void 0&&(Bt=12),Mt=!0,mt="g"),(we||U==="0"&&pe==="=")&&(we=!0,U="0",pe="=");var Je=Ie==="$"?f:Ie==="#"&&/[boxX]/.test(mt)?"0"+mt.toLowerCase():"",Tr=Ie==="$"?y:/[%p]/.test(mt)?o:"",wr=US[mt],or=/[defgprs%]/.test(mt);Bt=Bt===void 0?6:/[gprs]/.test(mt)?Math.max(1,Math.min(21,Bt)):Math.max(0,Math.min(20,Bt));function kt(At){var Pr=Je,Ot=Tr,Ar,rt,ur;if(mt==="c")Ot=wr(At)+Ot,At="";else{At=+At;var $r=At<0||1/At<0;if(At=isNaN(At)?P:wr(Math.abs(At),Bt),Mt&&(At=p4(At)),$r&&+At==0&&he!=="+"&&($r=!1),Pr=($r?he==="("?he:z:he==="-"||he==="("?"":he)+Pr,Ot=(mt==="s"?ZS[8+Qk/3]:"")+Ot+($r&&he==="("?")":""),or){for(Ar=-1,rt=At.length;++Ar<rt;)if(ur=At.charCodeAt(Ar),48>ur||ur>57){Ot=(ur===46?x+At.slice(Ar+1):At.slice(Ar))+Ot,At=At.slice(0,Ar);break}}}Ue&&!we&&(At=h(At,1/0));var li=Pr.length+At.length+Ot.length,kr=li<Oe?new Array(Oe-li+1).join(U):"";switch(Ue&&we&&(At=h(kr+At,kr.length?Oe-Ot.length:1/0),kr=""),pe){case"<":At=Pr+At+Ot+kr;break;case"=":At=Pr+kr+At+Ot;break;case"^":At=kr.slice(0,li=kr.length>>1)+Pr+At+Ot+kr.slice(li);break;default:At=kr+Pr+At+Ot;break}return _(At)}return kt.toString=function(){return j+""},kt}function V(j,U){var pe=F((j=h0(j),j.type="f",j)),he=Math.max(-8,Math.min(8,Math.floor(Qv(U)/3)))*3,Ie=Math.pow(10,-he),we=ZS[8+he/3];return function(Oe){return pe(Ie*Oe)+we}}return{format:F,formatPrefix:V}}var K_,$k,eI;m4({thousands:",",grouping:[3],currency:["$",""]});function m4(u){return K_=d4(u),$k=K_.format,eI=K_.formatPrefix,K_}function y4(u){return Math.max(0,-Qv(Math.abs(u)))}function v4(u,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qv(h)/3)))*3-Qv(Math.abs(u)))}function g4(u,h){return u=Math.abs(u),h=Math.abs(h)-u,Math.max(0,Qv(h)-Qv(u))+1}function _4(u,h,f,y){var x=PT(u,h,f),_;switch(y=h0(y==null?",f":y),y.type){case"s":{var o=Math.max(Math.abs(u),Math.abs(h));return y.precision==null&&!isNaN(_=v4(x,o))&&(y.precision=_),eI(y,o)}case"":case"e":case"g":case"p":case"r":{y.precision==null&&!isNaN(_=g4(x,Math.max(Math.abs(u),Math.abs(h))))&&(y.precision=_-(y.type==="e"));break}case"f":case"%":{y.precision==null&&!isNaN(_=y4(x))&&(y.precision=_-(y.type==="%")*2);break}}return $k(y)}function tI(u){var h=u.domain;return u.ticks=function(f){var y=h();return zT(y[0],y[y.length-1],f==null?10:f)},u.tickFormat=function(f,y){var x=h();return _4(x[0],x[x.length-1],f==null?10:f,y)},u.nice=function(f){f==null&&(f=10);var y=h(),x=0,_=y.length-1,o=y[x],z=y[_],P,F,V=10;for(z<o&&(F=o,o=z,z=F,F=x,x=_,_=F);V-- >0;){if(F=Zk(o,z,f),F===P)return y[x]=o,y[_]=z,h(y);if(F>0)o=Math.floor(o/F)*F,z=Math.ceil(z/F)*F;else if(F<0)o=Math.ceil(o*F)/F,z=Math.floor(z*F)/F;else break;P=F}return u},u}function r0(){var u=s4();return u.copy=function(){return Yk(u,r0())},y0.apply(u,arguments),tI(u)}function GS(u){return function(h){return h<0?-Math.pow(-h,u):Math.pow(h,u)}}function b4(u){return u<0?-Math.sqrt(-u):Math.sqrt(u)}function x4(u){return u<0?-u*u:u*u}function w4(u){var h=u(Jh,Jh),f=1;function y(){return f===1?u(Jh,Jh):f===.5?u(b4,x4):u(GS(f),GS(1/f))}return h.exponent=function(x){return arguments.length?(f=+x,y()):f},tI(h)}function rI(){var u=w4(Jk());return u.copy=function(){return Yk(u,rI()).exponent(u.exponent())},y0.apply(u,arguments),u}function E4(){return rI.apply(null,arguments).exponent(.5)}const Qg={x:r0,y:r0,z:r0,r:E4};function S4(u){return u.constant?"symlog":u.base?"log":u.exponent?u.exponent()===.5?"sqrt":"pow":"other"}function KS(u){return u}function k4(u){return h=>Math.log(u*h)}function I4(u){return h=>u*Math.exp(h)}function T4(u){return h=>Math.sign(h)*Math.log1p(Math.abs(h/u))}function A4(u){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*u}function H_(u){return function(f){return f<0?-Math.pow(-f,u):Math.pow(f,u)}}function z4(u){const h=S4(u);if(h==="log"){const f=Math.sign(u.domain()[0]);return{lift:k4(f),ground:I4(f),scaleType:h}}return h==="pow"?{lift:H_(1),ground:H_(1/1),scaleType:h}:h==="sqrt"?{lift:H_(.5),ground:H_(1/.5),scaleType:h}:h==="symlog"?{lift:T4(1),ground:A4(1),scaleType:h}:{lift:KS,ground:KS,scaleType:h}}function P4(u,h){if(typeof u.range!="function")throw new Error("Scale method `range` must be a function");if(typeof u.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return u.domain();u.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",u.domain()),u.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",u.range());const{lift:f,ground:y}=z4(u),x=u.domain()[0],_=Object.prototype.toString.call(x)==="[object Date]",[o,z]=u.domain().map(pe=>f(_?pe.getTime():pe)),[P,F]=u.range(),V=h[0]||0,j=h[1]||0,U=(z-o)/(Math.abs(F-P)-V-j);return[o-V*U,j*U+z].map(pe=>y(_?new Date(pe):pe))}function C4(u,h,f,y,x){let _,o;return x===!0?(_=0,o=100):(_=u==="r"?1:0,o=u==="y"?f:u==="r"?25:h),y===!0?[o,_]:[_,o]}function D4(u,h,f,y,x,_){return x?typeof x=="function"?x({width:h,height:f}):x:C4(u,h,f,y,_)}function X_(u){return function([f,y,x,_,o,z,P,F,V,j]){if(y===null)return null;const U=D4(u,P,F,z,V,j),pe=f===Qg[u]?f():f.copy();return pe.domain(qk(y[u],x)).range(U),_&&pe.domain(P4(pe,_)),o===!0&&(typeof pe.nice=="function"?pe.nice():console.error(`[Layer Cake] You set \`${u}Nice: true\` but the ${u}Scale does not have a \`.nice\` method. Ignoring...`)),pe}}function W_([u,h]){return f=>{const y=u(f);return Array.isArray(y)?y.map(x=>h(x)):h(y)}}function Y_([u]){if(typeof u=="function"){if(typeof u.range=="function")return u.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const J_={x:!1,y:!0,z:!1,r:!1};const M4=u=>({element:u[0]&4,width:u[0]&256,height:u[0]&512,aspectRatio:u[0]&1024,containerWidth:u[0]&128,containerHeight:u[0]&64}),HS=u=>({element:u[2],width:u[8],height:u[9],aspectRatio:u[10],containerWidth:u[7],containerHeight:u[6]});function XS(u){let h,f,y;const x=u[90].default,_=Xv(x,u,u[89],HS);return{c(){h=M("div"),_&&_.c(),this.h()},l(o){h=L(o,"DIV",{class:!0});var z=R(h);_&&_.l(z),z.forEach(T),this.h()},h(){S(h,"class","layercake-container svelte-vhzpsp"),Xo(()=>u[92].call(h)),ie(h,"position",u[5],!1),ie(h,"top",u[5]==="absolute"?"0":null,!1),ie(h,"right",u[5]==="absolute"?"0":null,!1),ie(h,"bottom",u[5]==="absolute"?"0":null,!1),ie(h,"left",u[5]==="absolute"?"0":null,!1),ie(h,"pointer-events",u[4]===!1?"none":null,!1)},m(o,z){Pe(o,h,z),_&&_.m(h,null),u[91](h),f=Wo(h,u[92].bind(h)),y=!0},p(o,z){_&&_.p&&(!y||z[0]&1988|z[2]&134217728)&&Wv(_,x,o,o[89],y?Jv(x,o[89],z,M4):Yv(o[89]),HS),z[0]&32&&ie(h,"position",o[5],!1),z[0]&32&&ie(h,"top",o[5]==="absolute"?"0":null,!1),z[0]&32&&ie(h,"right",o[5]==="absolute"?"0":null,!1),z[0]&32&&ie(h,"bottom",o[5]==="absolute"?"0":null,!1),z[0]&32&&ie(h,"left",o[5]==="absolute"?"0":null,!1),z[0]&16&&ie(h,"pointer-events",o[4]===!1?"none":null,!1)},i(o){y||(et(_,o),y=!0)},o(o){ft(_,o),y=!1},d(o){o&&T(h),_&&_.d(o),u[91](null),f()}}}function L4(u){let h,f,y=(u[3]===!0||typeof window<"u")&&XS(u);return{c(){y&&y.c(),h=zn()},l(x){y&&y.l(x),h=zn()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,_){x[3]===!0||typeof window<"u"?y?(y.p(x,_),_[0]&8&&et(y,1)):(y=XS(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Zu(),ft(y,1,1,()=>{y=null}),Gu())},i(x){f||(et(y),f=!0)},o(x){ft(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function R4(u,h,f){let y,x,_,o,z,P,F,V,j,U,pe,he,Ie,we,Oe,Ue,Bt,Mt,mt,Je,Tr,wr,or,kt,At,Pr,Ot,Ar,rt,ur,$r,li,kr,vt,nt,dr,Un,la,Mi,_n,ri,{$$slots:Ia={},$$scope:br}=h,{ssr:qn=!1}=h,{pointerEvents:Ya=!0}=h,{position:qr="relative"}=h,{percentRange:Lt=!1}=h,{width:Yi=void 0}=h,{height:Ni=void 0}=h,{containerWidth:ui=Yi||100}=h,{containerHeight:fo=Ni||100}=h,{element:Wt=void 0}=h,{x:ki=void 0}=h,{y:Lr=void 0}=h,{z:_i=void 0}=h,{r:bi=void 0}=h,{data:Cr=[]}=h,{xDomain:xi=void 0}=h,{yDomain:on=void 0}=h,{zDomain:Kr=void 0}=h,{rDomain:hr=void 0}=h,{xNice:jr=!1}=h,{yNice:ea=!1}=h,{zNice:jn=!1}=h,{rNice:Ra=!1}=h,{xReverse:$o=J_.x}=h,{yReverse:ci=J_.y}=h,{zReverse:sn=J_.z}=h,{rReverse:bn=J_.r}=h,{xPadding:mo=void 0}=h,{yPadding:ua=void 0}=h,{zPadding:ll=void 0}=h,{rPadding:es=void 0}=h,{xScale:Zn=Qg.x}=h,{yScale:xn=Qg.y}=h,{zScale:ca=Qg.z}=h,{rScale:ta=Qg.r}=h,{xRange:ha=void 0}=h,{yRange:Zr=void 0}=h,{zRange:N=void 0}=h,{rRange:G=void 0}=h,{padding:X={}}=h,{extents:re={}}=h,{flatData:ce=void 0}=h,{custom:ve={}}=h,be=!1;Bk(()=>{be=!0});const H={},se=Ur(Lt);Yt(u,se,ke=>f(128,la=ke));const Se=Ur(ui);Yt(u,Se,ke=>f(7,Un=ke));const Ne=Ur(fo);Yt(u,Ne,ke=>f(6,dr=ke));const Ge=Ur(Ix(re));Yt(u,Ge,ke=>f(127,nt=ke));const Le=Ur(Cr);Yt(u,Le,ke=>f(126,vt=ke));const qe=Ur(ce||Cr);Yt(u,qe,ke=>f(125,kr=ke));const pt=Ur(X);Yt(u,pt,ke=>f(124,li=ke));const at=Ur(yd(ki));Yt(u,at,ke=>f(123,$r=ke));const Be=Ur(yd(Lr));Yt(u,Be,ke=>f(122,ur=ke));const tt=Ur(yd(_i));Yt(u,tt,ke=>f(121,rt=ke));const We=Ur(yd(bi));Yt(u,We,ke=>f(120,Ar=ke));const Qe=Ur(xi);Yt(u,Qe,ke=>f(119,Ot=ke));const Ft=Ur(on);Yt(u,Ft,ke=>f(118,Pr=ke));const Ze=Ur(Kr);Yt(u,Ze,ke=>f(117,At=ke));const Gt=Ur(hr);Yt(u,Gt,ke=>f(116,kt=ke));const sr=Ur(jr);Yt(u,sr,ke=>f(115,or=ke));const Pt=Ur(ea);Yt(u,Pt,ke=>f(114,wr=ke));const Qt=Ur(jn);Yt(u,Qt,ke=>f(113,Tr=ke));const Jt=Ur(Ra);Yt(u,Jt,ke=>f(112,Je=ke));const Li=Ur($o);Yt(u,Li,ke=>f(111,mt=ke));const $t=Ur(ci);Yt(u,$t,ke=>f(110,Mt=ke));const mr=Ur(sn);Yt(u,mr,ke=>f(109,Bt=ke));const pr=Ur(bn);Yt(u,pr,ke=>f(108,Ue=ke));const Xt=Ur(mo);Yt(u,Xt,ke=>f(107,Oe=ke));const nr=Ur(ua);Yt(u,nr,ke=>f(106,we=ke));const Ui=Ur(ll);Yt(u,Ui,ke=>f(105,Ie=ke));const pa=Ur(es);Yt(u,pa,ke=>f(104,he=ke));const wi=Ur(ha);Yt(u,wi,ke=>f(103,pe=ke));const Ji=Ur(Zr);Yt(u,Ji,ke=>f(102,U=ke));const wn=Ur(N);Yt(u,wn,ke=>f(101,j=ke));const Qi=Ur(G);Yt(u,Qi,ke=>f(100,V=ke));const yr=Ur(Zn);Yt(u,yr,ke=>f(99,F=ke));const Gn=Ur(xn);Yt(u,Gn,ke=>f(98,P=ke));const qi=Ur(ca);Yt(u,qi,ke=>f(97,z=ke));const Hr=Ur(ta);Yt(u,Hr,ke=>f(96,o=ke));const ra=Ur(H);Yt(u,ra,ke=>f(94,x=ke));const Dr=Ur(ve);Yt(u,Dr,ke=>f(95,_=ke));const En=Nn([at,Be,tt,We],([ke,Zi,Pn,Wr])=>{const fa={};return ke&&(fa.x=ke),Zi&&(fa.y=Zi),Pn&&(fa.z=Pn),Wr&&(fa.r=Wr),fa}),ln=Nn([pt,Se,Ne],([ke])=>Object.assign({top:0,right:0,bottom:0,left:0},ke)),Ku=Nn([Se,Ne,ln],([ke,Zi,Pn])=>{const Wr={};return Wr.top=Pn.top,Wr.right=ke-Pn.right,Wr.bottom=Zi-Pn.bottom,Wr.left=Pn.left,Wr.width=Wr.right-Wr.left,Wr.height=Wr.bottom-Wr.top,Wr.width<=0&&be===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Wr.height<=0&&be===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Wr}),ji=Nn([Ku],([ke])=>ke.width);Yt(u,ji,ke=>f(8,Mi=ke));const yo=Nn([Ku],([ke])=>ke.height);Yt(u,yo,ke=>f(9,_n=ke));const un=Nn([qe,En,Ge],([ke,Zi,Pn])=>{const Wr=Ix(Zi,Pn);return Object.keys(Wr).length>0?{..._T(ke,Wr),...Pn}:{}}),Xr=Nn([un,Qe],j_("x")),Ri=Nn([un,Ft],j_("y")),hi=Nn([un,Ze],j_("z")),vo=Nn([un,Gt],j_("r")),ts=Nn([yr,un,Xr,Xt,sr,Li,ji,yo,wi,se],X_("x")),bd=Nn([at,ts],W_),ul=Nn([Gn,un,Ri,nr,Pt,$t,ji,yo,Ji,se],X_("y")),cl=Nn([Be,ul],W_),rs=Nn([qi,un,hi,Ui,Qt,mr,ji,yo,wn,se],X_("z")),ep=Nn([tt,rs],W_),Yl=Nn([Hr,un,vo,pa,Jt,pr,ji,yo,Qi,se],X_("r")),is=Nn([We,Yl],W_),go=Nn([ts],Y_),Jl=Nn([ul],Y_),hl=Nn([rs],Y_),qc=Nn([Yl],Y_),Sn=Nn([ji,yo],([ke,Zi])=>ke/Zi);Yt(u,Sn,ke=>f(10,ri=ke));function Ii(ke){cf[ke?"unshift":"push"](()=>{Wt=ke,f(2,Wt)})}function Kn(){ui=this.clientWidth,fo=this.clientHeight,f(0,ui),f(1,fo)}return u.$$set=ke=>{"ssr"in ke&&f(3,qn=ke.ssr),"pointerEvents"in ke&&f(4,Ya=ke.pointerEvents),"position"in ke&&f(5,qr=ke.position),"percentRange"in ke&&f(51,Lt=ke.percentRange),"width"in ke&&f(52,Yi=ke.width),"height"in ke&&f(53,Ni=ke.height),"containerWidth"in ke&&f(0,ui=ke.containerWidth),"containerHeight"in ke&&f(1,fo=ke.containerHeight),"element"in ke&&f(2,Wt=ke.element),"x"in ke&&f(54,ki=ke.x),"y"in ke&&f(55,Lr=ke.y),"z"in ke&&f(56,_i=ke.z),"r"in ke&&f(57,bi=ke.r),"data"in ke&&f(58,Cr=ke.data),"xDomain"in ke&&f(59,xi=ke.xDomain),"yDomain"in ke&&f(60,on=ke.yDomain),"zDomain"in ke&&f(61,Kr=ke.zDomain),"rDomain"in ke&&f(62,hr=ke.rDomain),"xNice"in ke&&f(63,jr=ke.xNice),"yNice"in ke&&f(64,ea=ke.yNice),"zNice"in ke&&f(65,jn=ke.zNice),"rNice"in ke&&f(66,Ra=ke.rNice),"xReverse"in ke&&f(67,$o=ke.xReverse),"yReverse"in ke&&f(68,ci=ke.yReverse),"zReverse"in ke&&f(69,sn=ke.zReverse),"rReverse"in ke&&f(70,bn=ke.rReverse),"xPadding"in ke&&f(71,mo=ke.xPadding),"yPadding"in ke&&f(72,ua=ke.yPadding),"zPadding"in ke&&f(73,ll=ke.zPadding),"rPadding"in ke&&f(74,es=ke.rPadding),"xScale"in ke&&f(75,Zn=ke.xScale),"yScale"in ke&&f(76,xn=ke.yScale),"zScale"in ke&&f(77,ca=ke.zScale),"rScale"in ke&&f(78,ta=ke.rScale),"xRange"in ke&&f(79,ha=ke.xRange),"yRange"in ke&&f(80,Zr=ke.yRange),"zRange"in ke&&f(81,N=ke.zRange),"rRange"in ke&&f(82,G=ke.rRange),"padding"in ke&&f(83,X=ke.padding),"extents"in ke&&f(84,re=ke.extents),"flatData"in ke&&f(85,ce=ke.flatData),"custom"in ke&&f(86,ve=ke.custom),"$$scope"in ke&&f(89,br=ke.$$scope)},u.$$.update=()=>{u.$$.dirty[1]&8388608&&ki&&f(87,H.x=ki,H),u.$$.dirty[1]&16777216&&Lr&&f(87,H.y=Lr,H),u.$$.dirty[1]&33554432&&_i&&f(87,H.z=_i,H),u.$$.dirty[1]&67108864&&bi&&f(87,H.r=bi,H),u.$$.dirty[1]&268435456&&xi&&f(87,H.xDomain=xi,H),u.$$.dirty[1]&536870912&&on&&f(87,H.yDomain=on,H),u.$$.dirty[1]&1073741824&&Kr&&f(87,H.zDomain=Kr,H),u.$$.dirty[2]&1&&hr&&f(87,H.rDomain=hr,H),u.$$.dirty[2]&131072&&ha&&f(87,H.xRange=ha,H),u.$$.dirty[2]&262144&&Zr&&f(87,H.yRange=Zr,H),u.$$.dirty[2]&524288&&N&&f(87,H.zRange=N,H),u.$$.dirty[2]&1048576&&G&&f(87,H.rRange=G,H),u.$$.dirty[1]&1048576&&Nr(se,la=Lt,la),u.$$.dirty[0]&1&&Nr(Se,Un=ui,Un),u.$$.dirty[0]&2&&Nr(Ne,dr=fo,dr),u.$$.dirty[2]&4194304&&Nr(Ge,nt=Ix(re),nt),u.$$.dirty[1]&134217728&&Nr(Le,vt=Cr,vt),u.$$.dirty[1]&134217728|u.$$.dirty[2]&8388608&&Nr(qe,kr=ce||Cr,kr),u.$$.dirty[2]&2097152&&Nr(pt,li=X,li),u.$$.dirty[1]&8388608&&Nr(at,$r=yd(ki),$r),u.$$.dirty[1]&16777216&&Nr(Be,ur=yd(Lr),ur),u.$$.dirty[1]&33554432&&Nr(tt,rt=yd(_i),rt),u.$$.dirty[1]&67108864&&Nr(We,Ar=yd(bi),Ar),u.$$.dirty[1]&268435456&&Nr(Qe,Ot=xi,Ot),u.$$.dirty[1]&536870912&&Nr(Ft,Pr=on,Pr),u.$$.dirty[1]&1073741824&&Nr(Ze,At=Kr,At),u.$$.dirty[2]&1&&Nr(Gt,kt=hr,kt),u.$$.dirty[2]&2&&Nr(sr,or=jr,or),u.$$.dirty[2]&4&&Nr(Pt,wr=ea,wr),u.$$.dirty[2]&8&&Nr(Qt,Tr=jn,Tr),u.$$.dirty[2]&16&&Nr(Jt,Je=Ra,Je),u.$$.dirty[2]&32&&Nr(Li,mt=$o,mt),u.$$.dirty[2]&64&&Nr($t,Mt=ci,Mt),u.$$.dirty[2]&128&&Nr(mr,Bt=sn,Bt),u.$$.dirty[2]&256&&Nr(pr,Ue=bn,Ue),u.$$.dirty[2]&512&&Nr(Xt,Oe=mo,Oe),u.$$.dirty[2]&1024&&Nr(nr,we=ua,we),u.$$.dirty[2]&2048&&Nr(Ui,Ie=ll,Ie),u.$$.dirty[2]&4096&&Nr(pa,he=es,he),u.$$.dirty[2]&131072&&Nr(wi,pe=ha,pe),u.$$.dirty[2]&262144&&Nr(Ji,U=Zr,U),u.$$.dirty[2]&524288&&Nr(wn,j=N,j),u.$$.dirty[2]&1048576&&Nr(Qi,V=G,V),u.$$.dirty[2]&8192&&Nr(yr,F=Zn,F),u.$$.dirty[2]&16384&&Nr(Gn,P=xn,P),u.$$.dirty[2]&32768&&Nr(qi,z=ca,z),u.$$.dirty[2]&65536&&Nr(Hr,o=ta,o),u.$$.dirty[2]&16777216&&Nr(Dr,_=ve,_),u.$$.dirty[2]&33554432&&Nr(ra,x=H,x),u.$$.dirty[2]&67108864&&Rk("LayerCake",y)},f(88,y={activeGetters:En,width:ji,height:yo,percentRange:se,aspectRatio:Sn,containerWidth:Se,containerHeight:Ne,x:at,y:Be,z:tt,r:We,custom:Dr,data:Le,xNice:sr,yNice:Pt,zNice:Qt,rNice:Jt,xReverse:Li,yReverse:$t,zReverse:mr,rReverse:pr,xPadding:Xt,yPadding:nr,zPadding:Ui,rPadding:pa,padding:ln,flatData:qe,extents:un,xDomain:Xr,yDomain:Ri,zDomain:hi,rDomain:vo,xRange:go,yRange:Jl,zRange:hl,rRange:qc,config:ra,xScale:ts,xGet:bd,yScale:ul,yGet:cl,zScale:rs,zGet:ep,rScale:Yl,rGet:is}),[ui,fo,Wt,qn,Ya,qr,dr,Un,Mi,_n,ri,se,Se,Ne,Ge,Le,qe,pt,at,Be,tt,We,Qe,Ft,Ze,Gt,sr,Pt,Qt,Jt,Li,$t,mr,pr,Xt,nr,Ui,pa,wi,Ji,wn,Qi,yr,Gn,qi,Hr,ra,Dr,ji,yo,Sn,Lt,Yi,Ni,ki,Lr,_i,bi,Cr,xi,on,Kr,hr,jr,ea,jn,Ra,$o,ci,sn,bn,mo,ua,ll,es,Zn,xn,ca,ta,ha,Zr,N,G,X,re,ce,ve,H,y,br,Ia,Ii,Kn]}class B4 extends Yo{constructor(h){super(),Jo(this,h,R4,L4,Qo,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const O4=u=>({element:u&1}),WS=u=>({element:u[0]}),V4=u=>({element:u&1}),YS=u=>({element:u[0]});function F4(u){let h,f,y,x,_;const o=u[12].defs,z=Xv(o,u,u[11],YS),P=u[12].default,F=Xv(P,u,u[11],WS);return{c(){h=Ma("svg"),f=Ma("defs"),z&&z.c(),y=Ma("g"),F&&F.c(),this.h()},l(V){h=La(V,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var j=R(h);f=La(j,"defs",{});var U=R(f);z&&z.l(U),U.forEach(T),y=La(j,"g",{class:!0,transform:!0});var pe=R(y);F&&F.l(pe),pe.forEach(T),j.forEach(T),this.h()},h(){S(y,"class","layercake-layout-svg_g"),S(y,"transform",x="translate("+u[7].left+", "+u[7].top+")"),S(h,"class","layercake-layout-svg svelte-u84d8d"),S(h,"viewBox",u[4]),S(h,"width",u[5]),S(h,"height",u[6]),ie(h,"z-index",u[2],!1),ie(h,"pointer-events",u[3]===!1?"none":null,!1)},m(V,j){Pe(V,h,j),w(h,f),z&&z.m(f,null),w(h,y),F&&F.m(y,null),u[13](y),u[14](h),_=!0},p(V,[j]){z&&z.p&&(!_||j&2049)&&Wv(z,o,V,V[11],_?Jv(o,V[11],j,V4):Yv(V[11]),YS),F&&F.p&&(!_||j&2049)&&Wv(F,P,V,V[11],_?Jv(P,V[11],j,O4):Yv(V[11]),WS),(!_||j&128&&x!==(x="translate("+V[7].left+", "+V[7].top+")"))&&S(y,"transform",x),(!_||j&16)&&S(h,"viewBox",V[4]),(!_||j&32)&&S(h,"width",V[5]),(!_||j&64)&&S(h,"height",V[6]),j&4&&ie(h,"z-index",V[2],!1),j&8&&ie(h,"pointer-events",V[3]===!1?"none":null,!1)},i(V){_||(et(z,V),et(F,V),_=!0)},o(V){ft(z,V),ft(F,V),_=!1},d(V){V&&T(h),z&&z.d(V),F&&F.d(V),u[13](null),u[14](null)}}}function N4(u,h,f){let y,x,_,{$$slots:o={},$$scope:z}=h,{element:P=void 0}=h,{innerElement:F=void 0}=h,{zIndex:V=void 0}=h,{pointerEvents:j=void 0}=h,{viewBox:U=void 0}=h;const{containerWidth:pe,containerHeight:he,padding:Ie}=i_("LayerCake");Yt(u,pe,Ue=>f(5,y=Ue)),Yt(u,he,Ue=>f(6,x=Ue)),Yt(u,Ie,Ue=>f(7,_=Ue));function we(Ue){cf[Ue?"unshift":"push"](()=>{F=Ue,f(1,F)})}function Oe(Ue){cf[Ue?"unshift":"push"](()=>{P=Ue,f(0,P)})}return u.$$set=Ue=>{"element"in Ue&&f(0,P=Ue.element),"innerElement"in Ue&&f(1,F=Ue.innerElement),"zIndex"in Ue&&f(2,V=Ue.zIndex),"pointerEvents"in Ue&&f(3,j=Ue.pointerEvents),"viewBox"in Ue&&f(4,U=Ue.viewBox),"$$scope"in Ue&&f(11,z=Ue.$$scope)},[P,F,V,j,U,y,x,_,pe,he,Ie,z,o,we,Oe]}class U4 extends Yo{constructor(h){super(),Jo(this,h,N4,F4,Qo,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function JS(u,h,f){const y=u.slice();return y[23]=h[f],y[25]=f,y}function QS(u){let h,f,y,x;return{c(){h=Ma("rect"),this.h()},l(_){h=La(_,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[13](u[12](u[23]))-1),S(h,"width",x=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height","3"),S(h,"fill","#CEDC20"),S(h,"stroke",u[0]),S(h,"stroke-width",u[1])},m(_,o){Pe(_,h,o)},p(_,o){o&3200&&f!==(f=_[11].bandwidth?_[7](_[23]):_[7](_[23])[0])&&S(h,"x",f),o&13312&&y!==(y=_[13](_[12](_[23]))-1)&&S(h,"y",y),o&3584&&x!==(x=_[11].bandwidth?_[11].bandwidth():_[9](_[23]))&&S(h,"width",x),o&1&&S(h,"stroke",_[0]),o&2&&S(h,"stroke-width",_[1])},d(_){_&&T(h)}}}function $S(u){let h,f,y,x,_,o,z,P,F=u[12]&&QS(u);return{c(){h=Ma("rect"),F&&F.c(),o=Ma("text"),this.h()},l(V){h=La(V,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),F&&F.l(V),o=La(V,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),R(o).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[6](u[23])),S(h,"width",x=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height",_=u[8](u[23])),S(h,"fill",u[4]),S(h,"stroke",u[0]),S(h,"stroke-width",u[1]),S(o,"x",z=u[11].bandwidth?u[7](u[23])+u[11].bandwidth()/2:u[7](u[23])[0]),S(o,"y",P=u[6](u[23])-4),S(o,"dx",u[2]),S(o,"dy",u[3]),S(o,"text-anchor",u[5])},m(V,j){Pe(V,h,j),F&&F.m(V,j),Pe(V,o,j)},p(V,j){j&3200&&f!==(f=V[11].bandwidth?V[7](V[23]):V[7](V[23])[0])&&S(h,"x",f),j&1088&&y!==(y=V[6](V[23]))&&S(h,"y",y),j&3584&&x!==(x=V[11].bandwidth?V[11].bandwidth():V[9](V[23]))&&S(h,"width",x),j&1280&&_!==(_=V[8](V[23]))&&S(h,"height",_),j&16&&S(h,"fill",V[4]),j&1&&S(h,"stroke",V[0]),j&2&&S(h,"stroke-width",V[1]),V[12]?F?F.p(V,j):(F=QS(V),F.c(),F.m(o.parentNode,o)):F&&(F.d(1),F=null),j&3200&&z!==(z=V[11].bandwidth?V[7](V[23])+V[11].bandwidth()/2:V[7](V[23])[0])&&S(o,"x",z),j&1088&&P!==(P=V[6](V[23])-4)&&S(o,"y",P),j&4&&S(o,"dx",V[2]),j&8&&S(o,"dy",V[3]),j&32&&S(o,"text-anchor",V[5])},d(V){V&&T(h),F&&F.d(V),V&&T(o)}}}function q4(u){let h,f=u[10],y=[];for(let x=0;x<f.length;x+=1)y[x]=$S(JS(u,f,x));return{c(){h=Ma("g");for(let x=0;x<y.length;x+=1)y[x].c();this.h()},l(x){h=La(x,"g",{class:!0});var _=R(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(T),this.h()},h(){S(h,"class","column-group svelte-wgzwsk")},m(x,_){Pe(x,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(x,[_]){if(_&16383){f=x[10];let o;for(o=0;o<f.length;o+=1){const z=JS(x,f,o);y[o]?y[o].p(z,_):(y[o]=$S(z),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},i:an,o:an,d(x){x&&T(h),Uc(y,x)}}}function j4(u,h,f){let y,x,_,o,z,P,F,V,j;const{data:U,xGet:pe,yGet:he,yRange:Ie,xScale:we,yScale:Oe,y:Ue,z:Bt}=i_("LayerCake");Yt(u,U,kt=>f(10,P=kt)),Yt(u,pe,kt=>f(7,z=kt)),Yt(u,he,kt=>f(6,_=kt)),Yt(u,Ie,kt=>f(21,o=kt)),Yt(u,we,kt=>f(11,F=kt)),Yt(u,Oe,kt=>f(13,j=kt)),Yt(u,Bt,kt=>f(12,V=kt));let{stroke:Mt=""}=h,{strokeWidth:mt=0}=h,{dxTick:Je=0}=h,{dyTick:Tr=0}=h,{fill:wr="#00205b"}=h,{textAnchor:or="middle"}=h;return u.$$set=kt=>{"stroke"in kt&&f(0,Mt=kt.stroke),"strokeWidth"in kt&&f(1,mt=kt.strokeWidth),"dxTick"in kt&&f(2,Je=kt.dxTick),"dyTick"in kt&&f(3,Tr=kt.dyTick),"fill"in kt&&f(4,wr=kt.fill),"textAnchor"in kt&&f(5,or=kt.textAnchor)},u.$$.update=()=>{u.$$.dirty&128&&f(9,y=kt=>{const At=z(kt);return Math.max(0,At[1]-At[0])}),u.$$.dirty&2097216&&f(8,x=kt=>o[0]-_(kt))},[Mt,mt,Je,Tr,wr,or,_,z,x,y,P,F,V,j,U,pe,he,Ie,we,Oe,Bt,o]}class Z4 extends Yo{constructor(h){super(),Jo(this,h,j4,q4,Qo,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function ek(u,h,f){const y=u.slice();return y[28]=h[f],y[30]=f,y}function tk(u){let h,f,y,x;return{c(){h=Ma("line"),this.h()},l(_){h=La(_,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),R(h).forEach(T),this.h()},h(){S(h,"y1",f=u[20]*-1),S(h,"y2",y=u[14]&&u[30]%2==0?u[10]+u[8]+2:u[10]+u[8]-13),S(h,"x1","0"),S(h,"x2","0"),S(h,"stroke",u[11]),S(h,"stroke-width",x=u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)?2:1),S(h,"class","svelte-fwjh80"),Si(h,"baseline",u[13])},m(_,o){Pe(_,h,o)},p(_,o){o&1048576&&f!==(f=_[20]*-1)&&S(h,"y1",f),o&17664&&y!==(y=_[14]&&_[30]%2==0?_[10]+_[8]+2:_[10]+_[8]-13)&&S(h,"y2",y),o&2048&&S(h,"stroke",_[11]),o&32784&&x!==(x=_[15]&&Array.isArray(_[4])&&_[30]==Math.floor(_[4].length/2)?2:1)&&S(h,"stroke-width",x),o&8192&&Si(h,"baseline",_[13])},d(_){_&&T(h)}}}function G4(u){let h=u[1](u[28])+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,x){Pe(y,f,x)},p(y,x){x&262146&&h!==(h=y[1](y[28])+"")&&dt(f,h)},d(y){y&&T(f)}}}function K4(u){let h,f=u[1](u[28])+"",y,x;return{c(){h=ee(u[5]),y=ee(f),x=ee(u[6])},l(_){h=te(_,u[5]),y=te(_,f),x=te(_,u[6])},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o&32&&dt(h,_[5]),o&262146&&f!==(f=_[1](_[28])+"")&&dt(y,f),o&64&&dt(x,_[6])},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function rk(u){let h,f,y,x,_,o,z,P=u[0]!==!1&&tk(u);function F(U,pe){return U[30]==U[18].length-1?K4:G4}let V=F(u),j=V(u);return{c(){h=Ma("g"),P&&P.c(),f=Ma("text"),j.c(),this.h()},l(U){h=La(U,"g",{class:!0,transform:!0});var pe=R(h);P&&P.l(pe),f=La(pe,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var he=R(f);j.l(he),he.forEach(T),pe.forEach(T),this.h()},h(){S(f,"x",y=u[7]||u[16]?u[17].bandwidth()/2:0),S(f,"y",x=u[3]?u[20]*-1-6:u[14]&&u[30]%2==0?u[8]+15:u[8]),S(f,"dx",_=u[24](u[30])=="start"?u[9]-2:u[24](u[30])=="end"?u[9]+2:u[9]),S(f,"dy",u[10]),S(f,"text-anchor",u[24](u[30])),S(f,"fill",u[12]),S(f,"class","svelte-fwjh80"),Si(f,"bold",u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)),S(h,"class",o="tick tick-"+u[28]+" svelte-fwjh80"),S(h,"transform",z="translate("+u[17](u[28])+","+u[19][0]+")")},m(U,pe){Pe(U,h,pe),P&&P.m(h,null),w(h,f),j.m(f,null)},p(U,pe){U[0]!==!1?P?P.p(U,pe):(P=tk(U),P.c(),P.m(h,f)):P&&(P.d(1),P=null),V===(V=F(U))&&j?j.p(U,pe):(j.d(1),j=V(U),j&&(j.c(),j.m(f,null))),pe&196736&&y!==(y=U[7]||U[16]?U[17].bandwidth()/2:0)&&S(f,"x",y),pe&1065224&&x!==(x=U[3]?U[20]*-1-6:U[14]&&U[30]%2==0?U[8]+15:U[8])&&S(f,"y",x),pe&512&&_!==(_=U[24](U[30])=="start"?U[9]-2:U[24](U[30])=="end"?U[9]+2:U[9])&&S(f,"dx",_),pe&1024&&S(f,"dy",U[10]),pe&4096&&S(f,"fill",U[12]),pe&32784&&Si(f,"bold",U[15]&&Array.isArray(U[4])&&U[30]==Math.floor(U[4].length/2)),pe&262144&&o!==(o="tick tick-"+U[28]+" svelte-fwjh80")&&S(h,"class",o),pe&917504&&z!==(z="translate("+U[17](U[28])+","+U[19][0]+")")&&S(h,"transform",z)},d(U){U&&T(h),P&&P.d(),j.d()}}}function ik(u){let h,f,y;return{c(){h=Ma("line"),this.h()},l(x){h=La(x,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","baseline svelte-fwjh80"),S(h,"y1",u[20]),S(h,"y2","0"),S(h,"x1",f=u[17](0)),S(h,"x2",y=u[17](0)),S(h,"stroke",u[11])},m(x,_){Pe(x,h,_)},p(x,_){_&1048576&&S(h,"y1",x[20]),_&131072&&f!==(f=x[17](0))&&S(h,"x1",f),_&131072&&y!==(y=x[17](0))&&S(h,"x2",y),_&2048&&S(h,"stroke",x[11])},d(x){x&&T(h)}}}function H4(u){let h,f,y=u[18],x=[];for(let o=0;o<y.length;o+=1)x[o]=rk(ek(u,y,o));let _=u[2]===!0&&ik(u);return{c(){h=Ma("g");for(let o=0;o<x.length;o+=1)x[o].c();f=zn(),_&&_.c(),this.h()},l(o){h=La(o,"g",{class:!0});var z=R(h);for(let P=0;P<x.length;P+=1)x[P].l(z);f=zn(),_&&_.l(z),z.forEach(T),this.h()},h(){S(h,"class","axis x-axis")},m(o,z){Pe(o,h,z);for(let P=0;P<x.length;P+=1)x[P].m(h,null);w(h,f),_&&_.m(h,null)},p(o,[z]){if(z&18874363){y=o[18];let P;for(P=0;P<y.length;P+=1){const F=ek(o,y,P);x[P]?x[P].p(F,z):(x[P]=rk(F),x[P].c(),x[P].m(h,f))}for(;P<x.length;P+=1)x[P].d(1);x.length=y.length}o[2]===!0?_?_.p(o,z):(_=ik(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null)},i:an,o:an,d(o){o&&T(h),Uc(x,o),_&&_.d()}}}function X4(u,h,f){let y,x,_,o,z;const{width:P,height:F,xScale:V,yScale:j,yRange:U}=i_("LayerCake");Yt(u,F,rt=>f(20,z=rt)),Yt(u,V,rt=>f(17,_=rt)),Yt(u,U,rt=>f(19,o=rt));let{gridlines:pe=!0}=h,{formatTick:he=rt=>rt}=h,{baseline:Ie=!1}=h,{flipped:we=!1}=h,{snapTicks:Oe=!1}=h,{ticks:Ue=void 0}=h,{prefix:Bt=""}=h,{suffix:Mt=""}=h,{xTick:mt=void 0}=h,{yTick:Je=15}=h,{dxTick:Tr=0}=h,{dyTick:wr=0}=h,{lineColor:or="#999"}=h,{textColor:kt="#555"}=h,{solid:At=!1}=h,{stagger:Pr=!1}=h,{median:Ot=!0}=h;function Ar(rt){if(Oe===!0){if(rt===0)return"start";if(rt===x.length-1)return"end"}return"middle"}return u.$$set=rt=>{"gridlines"in rt&&f(0,pe=rt.gridlines),"formatTick"in rt&&f(1,he=rt.formatTick),"baseline"in rt&&f(2,Ie=rt.baseline),"flipped"in rt&&f(3,we=rt.flipped),"snapTicks"in rt&&f(25,Oe=rt.snapTicks),"ticks"in rt&&f(4,Ue=rt.ticks),"prefix"in rt&&f(5,Bt=rt.prefix),"suffix"in rt&&f(6,Mt=rt.suffix),"xTick"in rt&&f(7,mt=rt.xTick),"yTick"in rt&&f(8,Je=rt.yTick),"dxTick"in rt&&f(9,Tr=rt.dxTick),"dyTick"in rt&&f(10,wr=rt.dyTick),"lineColor"in rt&&f(11,or=rt.lineColor),"textColor"in rt&&f(12,kt=rt.textColor),"solid"in rt&&f(13,At=rt.solid),"stagger"in rt&&f(14,Pr=rt.stagger),"median"in rt&&f(15,Ot=rt.median)},u.$$.update=()=>{u.$$.dirty&131072&&f(16,y=typeof _.bandwidth=="function"),u.$$.dirty&196624&&f(18,x=Array.isArray(Ue)?Ue:y?_.domain():_.ticks(Ue))},[pe,he,Ie,we,Ue,Bt,Mt,mt,Je,Tr,wr,or,kt,At,Pr,Ot,y,_,x,o,z,F,V,U,Ar,Oe]}class W4 extends Yo{constructor(h){super(),Jo(this,h,X4,H4,Qo,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function Y4(u){let h,f,y,x;return h=new Z4({props:{fill:u[1],formatVal:u[5]}}),y=new W4({props:{gridlines:!1}}),{c(){Ut(h.$$.fragment),f=ge(),Ut(y.$$.fragment)},l(_){qt(h.$$.fragment,_),f=_e(_),qt(y.$$.fragment,_)},m(_,o){jt(h,_,o),Pe(_,f,o),jt(y,_,o),x=!0},p(_,o){const z={};o&2&&(z.fill=_[1]),o&32&&(z.formatVal=_[5]),h.$set(z)},i(_){x||(et(h.$$.fragment,_),et(y.$$.fragment,_),x=!0)},o(_){ft(h.$$.fragment,_),ft(y.$$.fragment,_),x=!1},d(_){Zt(h,_),_&&T(f),Zt(y,_)}}}function J4(u){let h,f;return h=new U4({props:{$$slots:{default:[Y4]},$$scope:{ctx:u}}}),{c(){Ut(h.$$.fragment)},l(y){qt(h.$$.fragment,y)},m(y,x){jt(h,y,x),f=!0},p(y,x){const _={};x&2082&&(_.$$scope={dirty:x,ctx:y}),h.$set(_)},i(y){f||(et(h.$$.fragment,y),f=!0)},o(y){ft(h.$$.fragment,y),f=!1},d(y){Zt(h,y)}}}function Q4(u){let h,f,y;return f=new B4({props:{padding:{top:15,right:0,bottom:20,left:0},x:u[2],y:u[3],z:u[4],xScale:Kk().paddingInner([.02]).round(!0),xDomain:u[7],yDomain:u[6],zDomain:u[6],data:u[0],$$slots:{default:[J4]},$$scope:{ctx:u}}}),{c(){h=M("div"),Ut(f.$$.fragment),this.h()},l(x){h=L(x,"DIV",{class:!0});var _=R(h);qt(f.$$.fragment,_),_.forEach(T),this.h()},h(){S(h,"class","chart-container svelte-1i1qsul")},m(x,_){Pe(x,h,_),jt(f,h,null),y=!0},p(x,[_]){const o={};_&4&&(o.x=x[2]),_&8&&(o.y=x[3]),_&16&&(o.z=x[4]),_&128&&(o.xDomain=x[7]),_&64&&(o.yDomain=x[6]),_&64&&(o.zDomain=x[6]),_&1&&(o.data=x[0]),_&2082&&(o.$$scope={dirty:_,ctx:x}),f.$set(o)},i(x){y||(et(f.$$.fragment,x),y=!0)},o(x){ft(f.$$.fragment,x),y=!1},d(x){x&&T(h),Zt(f)}}}function $4(u,h,f){let y,x,_,{data:o}=h,{suffix:z="%"}=h,{decimals:P=null}=h,{fill:F="#00205B"}=h,{xKey:V="x"}=h,{yKey:j="y"}=h,{zKey:U=null}=h,{colors:pe=["#00205B","#00205B","#00205B","#00205B"]}=h;return u.$$set=he=>{"data"in he&&f(0,o=he.data),"suffix"in he&&f(8,z=he.suffix),"decimals"in he&&f(9,P=he.decimals),"fill"in he&&f(1,F=he.fill),"xKey"in he&&f(2,V=he.xKey),"yKey"in he&&f(3,j=he.yKey),"zKey"in he&&f(4,U=he.zKey),"colors"in he&&f(10,pe=he.colors)},u.$$.update=()=>{u.$$.dirty&5&&f(7,y=o.map(he=>he[V])),u.$$.dirty&9&&f(6,x=[0,Math.max(...o.map(he=>he[j]))]),u.$$.dirty&768&&f(5,_=he=>he.toFixed(P)+z)},[o,F,V,j,U,_,x,y,z,P,pe]}class eA extends Yo{constructor(h){super(),Jo(this,h,$4,Q4,Qo,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function nk(u,h,f){const y=u.slice();return y[13]=h[f],y[15]=f,y}function tA(u){let h,f,y=u[5](u[13][u[3]])+"",x,_;return{c(){h=M("span"),f=ee("(NI "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(NI "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=o[5](o[13][o[3]])+"")&&dt(x,y)},d(o){o&&T(h)}}}function rA(u){let h;return{c(){h=M("span"),this.h()},l(f){h=L(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(f,y){Pe(f,h,y)},p:an,d(f){f&&T(h)}}}function iA(u){let h,f,y=o0(Math.round(u[13][u[3]]),"%")+"",x,_;return{c(){h=M("span"),f=ee("(2011 "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(2011 "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=o0(Math.round(o[13][o[3]]),"%")+"")&&dt(x,y)},d(o){o&&T(h)}}}function ak(u){let h,f,y,x,_=u[13][u[1]]+"",o,z,P,F=u[5](u[13][u[2]])+"",V,j,U;function pe(we,Oe){if(we[3]=="prev"&&we[4])return iA;if(we[3]=="prev"&&!we[4])return rA;if(we[3]=="ni")return tA}let he=pe(u),Ie=he&&he(u);return{c(){h=M("tr"),f=M("td"),y=Ma("svg"),x=ge(),o=ee(_),z=ge(),P=M("td"),V=ee(F),j=ge(),Ie&&Ie.c(),U=ge(),this.h()},l(we){h=L(we,"TR",{});var Oe=R(h);f=L(Oe,"TD",{class:!0});var Ue=R(f);y=La(Ue,"svg",{width:!0,height:!0,class:!0});var Bt=R(y);Bt.forEach(T),x=_e(Ue),o=te(Ue,_),Ue.forEach(T),z=_e(Oe),P=L(Oe,"TD",{class:!0,style:!0});var Mt=R(P);V=te(Mt,F),j=_e(Mt),Ie&&Ie.l(Mt),Mt.forEach(T),U=_e(Oe),Oe.forEach(T),this.h()},h(){S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1mqxdxj"),S(f,"class","svelte-1mqxdxj"),S(P,"class","cell-right svelte-1mqxdxj"),ie(P,"vertical-align","top")},m(we,Oe){Pe(we,h,Oe),w(h,f),w(f,y),w(f,x),w(f,o),w(h,z),w(h,P),w(P,V),w(P,j),Ie&&Ie.m(P,null),w(h,U)},p(we,Oe){Oe&3&&_!==(_=we[13][we[1]]+"")&&dt(o,_),Oe&5&&F!==(F=we[5](we[13][we[2]])+"")&&dt(V,F),he===(he=pe(we))&&Ie?Ie.p(we,Oe):(Ie&&Ie.d(1),Ie=he&&he(we),Ie&&(Ie.c(),Ie.m(P,null)))},d(we){we&&T(h),Ie&&Ie.d()}}}function nA(u){let h,f,y=u[0],x=[];for(let _=0;_<y.length;_+=1)x[_]=ak(nk(u,y,_));return{c(){h=M("table"),f=M("tbody");for(let _=0;_<x.length;_+=1)x[_].c();this.h()},l(_){h=L(_,"TABLE",{class:!0});var o=R(h);f=L(o,"TBODY",{});var z=R(f);for(let P=0;P<x.length;P+=1)x[P].l(z);z.forEach(T),o.forEach(T),this.h()},h(){S(h,"class","legend svelte-1mqxdxj")},m(_,o){Pe(_,h,o),w(h,f);for(let z=0;z<x.length;z+=1)x[z].m(f,null)},p(_,[o]){if(o&63){y=_[0];let z;for(z=0;z<y.length;z+=1){const P=nk(_,y,z);x[z]?x[z].p(P,o):(x[z]=ak(P),x[z].c(),x[z].m(f,null))}for(;z<x.length;z+=1)x[z].d(1);x.length=y.length}},i:an,o:an,d(_){_&&T(h),Uc(x,_)}}}function aA(u,h,f){let y,{data:x}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:P=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:V="#555"}=h,{mutedColor:j="#999"}=h,{decimals:U=null}=h,{round:pe=!1}=h;function he(Ie){let we;return U?we=(Ie/y*100).toFixed(U)+"%":Ie/y*100<1?we="<1%":we=(Ie/y*100).toFixed(0)+"%",we}return u.$$set=Ie=>{"data"in Ie&&f(0,x=Ie.data),"xKey"in Ie&&f(1,_=Ie.xKey),"yKey"in Ie&&f(2,o=Ie.yKey),"zKey"in Ie&&f(3,z=Ie.zKey),"topic_prev_available"in Ie&&f(4,P=Ie.topic_prev_available),"colors"in Ie&&f(6,F=Ie.colors),"textColor"in Ie&&f(7,V=Ie.textColor),"mutedColor"in Ie&&f(8,j=Ie.mutedColor),"decimals"in Ie&&f(9,U=Ie.decimals),"round"in Ie&&f(10,pe=Ie.round)},u.$$.update=()=>{u.$$.dirty&5&&(y=x.map(Ie=>Ie[o]).reduce((Ie,we)=>Ie+we,0)),u.$$.dirty&9&&x.map(Ie=>Ie[z]).reduce((Ie,we)=>Ie+we,0)},[x,_,o,z,P,he,F,V,j,U,pe]}class oA extends Yo{constructor(h){super(),Jo(this,h,aA,nA,Qo,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:6,textColor:7,mutedColor:8,decimals:9,round:10})}}function ok(u,h,f){const y=u.slice();return y[6]=h[f],y[8]=f,y}function sk(u){let h,f=u[0],y=[];for(let x=0;x<f.length;x+=1)y[x]=lk(ok(u,f,x));return{c(){h=Ma("svg");for(let x=0;x<y.length;x+=1)y[x].c();this.h()},l(x){h=La(x,"svg",{class:!0});var _=R(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(T),this.h()},h(){S(h,"class","stack svelte-pzvhwz")},m(x,_){Pe(x,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(x,_){if(_&31){f=x[0];let o;for(o=0;o<f.length;o+=1){const z=ok(x,f,o);y[o]?y[o].p(z,_):(y[o]=lk(z),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){x&&T(h),Uc(y,x)}}}function lk(u){let h,f;return{c(){h=Ma("rect"),this.h()},l(y){h=La(y,"rect",{class:!0,x:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","cell svelte-pzvhwz"),S(h,"x",f=u[4][u[8]]/u[3]*100+"%"),ie(h,"width",u[6][u[1]]/u[3]*100+"%"),ie(h,"fill",u[2][u[8]])},m(y,x){Pe(y,h,x)},p(y,x){x&24&&f!==(f=y[4][y[8]]/y[3]*100+"%")&&S(h,"x",f),x&11&&ie(h,"width",y[6][y[1]]/y[3]*100+"%"),x&4&&ie(h,"fill",y[2][y[8]])},d(y){y&&T(h)}}}function sA(u){let h,f=u[3]&&u[4]&&sk(u);return{c(){f&&f.c(),h=zn()},l(y){f&&f.l(y),h=zn()},m(y,x){f&&f.m(y,x),Pe(y,h,x)},p(y,[x]){y[3]&&y[4]?f?f.p(y,x):(f=sk(y),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:an,o:an,d(y){f&&f.d(y),y&&T(h)}}}function lA(u,h,f){let{data:y}=h,{yKey:x="y"}=h,{colors:_=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,o,z;function P(){f(3,o=y.map(V=>V[x]).reduce((V,j)=>V+j,0));let F=[0];y.forEach(V=>F.push(F[F.length-1]+V[x])),f(4,z=F)}return u.$$set=F=>{"data"in F&&f(0,y=F.data),"yKey"in F&&f(1,x=F.yKey),"colors"in F&&f(2,_=F.colors)},u.$$.update=()=>{u.$$.dirty&3&&(y||x)&&P()},[y,x,_,o,z]}class Hx extends Yo{constructor(h){super(),Jo(this,h,lA,sA,Qo,{data:0,yKey:1,colors:2})}}function uk(u,h,f){const y=u.slice();return y[10]=h[f],y[12]=f,y}function uA(u){let h,f,y=u[6](u[10][u[3]])+"",x,_;return{c(){h=M("span"),f=ee("(NI "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(NI "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=o[6](o[10][o[3]])+"")&&dt(x,y)},d(o){o&&T(h)}}}function cA(u){let h;return{c(){h=M("span"),this.h()},l(f){h=L(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(f,y){Pe(f,h,y)},p:an,d(f){f&&T(h)}}}function hA(u){let h,f,y=o0(Math.round(u[10][u[3]]),"%")+"",x,_;return{c(){h=M("span"),f=ee("(2011 "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(2011 "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=o0(Math.round(o[10][o[3]]),"%")+"")&&dt(x,y)},d(o){o&&T(h)}}}function ck(u){let h,f,y,x,_,o=u[10][u[1]]+"",z,P,F,V=u[6](u[10][u[2]])+"",j,U,pe;function he(Oe,Ue){if(Oe[3]=="prev"&&Oe[4])return hA;if(Oe[3]=="prev"&&!Oe[4])return cA;if(Oe[3]=="ni")return uA}let Ie=he(u),we=Ie&&Ie(u);return{c(){h=M("tr"),f=M("td"),y=Ma("svg"),x=Ma("rect"),_=ge(),z=ee(o),P=ge(),F=M("td"),j=ee(V),U=ge(),we&&we.c(),pe=ge(),this.h()},l(Oe){h=L(Oe,"TR",{});var Ue=R(h);f=L(Ue,"TD",{class:!0});var Bt=R(f);y=La(Bt,"svg",{width:!0,height:!0,class:!0});var Mt=R(y);x=La(Mt,"rect",{width:!0,height:!0,style:!0}),R(x).forEach(T),Mt.forEach(T),_=_e(Bt),z=te(Bt,o),Bt.forEach(T),P=_e(Ue),F=L(Ue,"TD",{class:!0,style:!0});var mt=R(F);j=te(mt,V),U=_e(mt),we&&we.l(mt),mt.forEach(T),pe=_e(Ue),Ue.forEach(T),this.h()},h(){S(x,"width","20"),S(x,"height","30"),ie(x,"fill",u[5][u[12]]),S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1gvovsq"),S(f,"class","svelte-1gvovsq"),S(F,"class","cell-right svelte-1gvovsq"),ie(F,"vertical-align","top")},m(Oe,Ue){Pe(Oe,h,Ue),w(h,f),w(f,y),w(y,x),w(f,_),w(f,z),w(h,P),w(h,F),w(F,j),w(F,U),we&&we.m(F,null),w(h,pe)},p(Oe,Ue){Ue&32&&ie(x,"fill",Oe[5][Oe[12]]),Ue&3&&o!==(o=Oe[10][Oe[1]]+"")&&dt(z,o),Ue&5&&V!==(V=Oe[6](Oe[10][Oe[2]])+"")&&dt(j,V),Ie===(Ie=he(Oe))&&we?we.p(Oe,Ue):(we&&we.d(1),we=Ie&&Ie(Oe),we&&(we.c(),we.m(F,null)))},d(Oe){Oe&&T(h),we&&we.d()}}}function pA(u){let h,f,y=u[0],x=[];for(let _=0;_<y.length;_+=1)x[_]=ck(uk(u,y,_));return{c(){h=M("table"),f=M("tbody");for(let _=0;_<x.length;_+=1)x[_].c();this.h()},l(_){h=L(_,"TABLE",{class:!0});var o=R(h);f=L(o,"TBODY",{});var z=R(f);for(let P=0;P<x.length;P+=1)x[P].l(z);z.forEach(T),o.forEach(T),this.h()},h(){S(h,"class","legend svelte-1gvovsq")},m(_,o){Pe(_,h,o),w(h,f);for(let z=0;z<x.length;z+=1)x[z].m(f,null)},p(_,[o]){if(o&127){y=_[0];let z;for(z=0;z<y.length;z+=1){const P=uk(_,y,z);x[z]?x[z].p(P,o):(x[z]=ck(P),x[z].c(),x[z].m(f,null))}for(;z<x.length;z+=1)x[z].d(1);x.length=y.length}},i:an,o:an,d(_){_&&T(h),Uc(x,_)}}}function fA(u,h,f){let y,{data:x}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:P=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:V=null}=h;function j(U){let pe;return V?pe=(U/y*100).toFixed(V)+"%":U/y*100<1?pe="<1%":pe=(U/y*100).toFixed(0)+"%",pe}return u.$$set=U=>{"data"in U&&f(0,x=U.data),"xKey"in U&&f(1,_=U.xKey),"yKey"in U&&f(2,o=U.yKey),"zKey"in U&&f(3,z=U.zKey),"topic_prev_available"in U&&f(4,P=U.topic_prev_available),"colors"in U&&f(5,F=U.colors),"decimals"in U&&f(7,V=U.decimals)},u.$$.update=()=>{u.$$.dirty&5&&(y=x.map(U=>U[o]).reduce((U,pe)=>U+pe,0)),u.$$.dirty&9&&x.map(U=>U[z]).reduce((U,pe)=>U+pe,0)},[x,_,o,z,P,F,j,V]}class dA extends Yo{constructor(h){super(),Jo(this,h,fA,pA,Qo,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function hk(u){let h,f,y,x;f=new Hx({props:{data:u[0],yKey:u[4],colors:u[6]}});let _=u[8]&&pk(u);return{c(){h=M("div"),Ut(f.$$.fragment),y=ge(),_&&_.c(),this.h()},l(o){h=L(o,"DIV",{class:!0,style:!0});var z=R(h);qt(f.$$.fragment,z),y=_e(z),_&&_.l(z),z.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ie(h,"height",u[1]*.28+"px")},m(o,z){Pe(o,h,z),jt(f,h,null),w(h,y),_&&_.m(h,null),x=!0},p(o,z){const P={};z&1&&(P.data=o[0]),z&16&&(P.yKey=o[4]),z&64&&(P.colors=o[6]),f.$set(P),o[8]?_?_.p(o,z):(_=pk(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null),(!x||z&2)&&ie(h,"height",o[1]*.28+"px")},i(o){x||(et(f.$$.fragment,o),x=!0)},o(o){ft(f.$$.fragment,o),x=!1},d(o){o&&T(h),Zt(f),_&&_.d()}}}function pk(u){let h,f;return{c(){h=M("div"),f=ee(u[8]),this.h()},l(y){h=L(y,"DIV",{class:!0});var x=R(h);f=te(x,u[8]),x.forEach(T),this.h()},h(){S(h,"class","label svelte-1tebgpk")},m(y,x){Pe(y,h,x),w(h,f)},p(y,x){x&256&&dt(f,y[8])},d(y){y&&T(h)}}}function fk(u){let h,f,y,x,_,o;return f=new Hx({props:{data:u[0],yKey:u[4],colors:u[6]}}),{c(){h=M("div"),Ut(f.$$.fragment),y=ge(),x=M("div"),_=ee("2011 comparison not available"),this.h()},l(z){h=L(z,"DIV",{class:!0,style:!0});var P=R(h);qt(f.$$.fragment,P),y=_e(P),x=L(P,"DIV",{class:!0,style:!0});var F=R(x);_=te(F,"2011 comparison not available"),F.forEach(T),P.forEach(T),this.h()},h(){S(x,"class","label svelte-1tebgpk"),ie(x,"background-color","#d8d8d8 "),ie(x,"color","#000000"),S(h,"class","chart svelte-1tebgpk"),ie(h,"height",u[1]*.28+"px")},m(z,P){Pe(z,h,P),jt(f,h,null),w(h,y),w(h,x),w(x,_),o=!0},p(z,P){const F={};P&1&&(F.data=z[0]),P&16&&(F.yKey=z[4]),P&64&&(F.colors=z[6]),f.$set(F),(!o||P&2)&&ie(h,"height",z[1]*.28+"px")},i(z){o||(et(f.$$.fragment,z),o=!0)},o(z){ft(f.$$.fragment,z),o=!1},d(z){z&&T(h),Zt(f)}}}function mA(u){let h,f,y,x,_,o,z,P;f=new Hx({props:{data:u[0],yKey:u[3],colors:u[6]}});let F=(u[4]&&u[5]||u[4]=="ni")&&hk(u),V=u[4]=="prev"&&!u[5]&&fk(u);return z=new dA({props:{data:u[0],xKey:u[2],yKey:u[3],zKey:u[4],topic_prev_available:u[5],decimals:u[7],colors:u[6]}}),{c(){h=M("div"),Ut(f.$$.fragment),y=ge(),F&&F.c(),x=ge(),V&&V.c(),_=ge(),o=M("div"),Ut(z.$$.fragment),this.h()},l(j){h=L(j,"DIV",{class:!0,style:!0});var U=R(h);qt(f.$$.fragment,U),U.forEach(T),y=_e(j),F&&F.l(j),x=_e(j),V&&V.l(j),_=_e(j),o=L(j,"DIV",{class:!0});var pe=R(o);qt(z.$$.fragment,pe),pe.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ie(h,"padding-top","3px"),ie(h,"height",(u[4]?u[1]*.72:u[1])+"px"),S(o,"class","legend svelte-1tebgpk")},m(j,U){Pe(j,h,U),jt(f,h,null),Pe(j,y,U),F&&F.m(j,U),Pe(j,x,U),V&&V.m(j,U),Pe(j,_,U),Pe(j,o,U),jt(z,o,null),P=!0},p(j,[U]){const pe={};U&1&&(pe.data=j[0]),U&8&&(pe.yKey=j[3]),U&64&&(pe.colors=j[6]),f.$set(pe),(!P||U&18)&&ie(h,"height",(j[4]?j[1]*.72:j[1])+"px"),j[4]&&j[5]||j[4]=="ni"?F?(F.p(j,U),U&48&&et(F,1)):(F=hk(j),F.c(),et(F,1),F.m(x.parentNode,x)):F&&(Zu(),ft(F,1,1,()=>{F=null}),Gu()),j[4]=="prev"&&!j[5]?V?(V.p(j,U),U&48&&et(V,1)):(V=fk(j),V.c(),et(V,1),V.m(_.parentNode,_)):V&&(Zu(),ft(V,1,1,()=>{V=null}),Gu());const he={};U&1&&(he.data=j[0]),U&4&&(he.xKey=j[2]),U&8&&(he.yKey=j[3]),U&16&&(he.zKey=j[4]),U&32&&(he.topic_prev_available=j[5]),U&128&&(he.decimals=j[7]),U&64&&(he.colors=j[6]),z.$set(he)},i(j){P||(et(f.$$.fragment,j),et(F),et(V),et(z.$$.fragment,j),P=!0)},o(j){ft(f.$$.fragment,j),ft(F),ft(V),ft(z.$$.fragment,j),P=!1},d(j){j&&T(h),Zt(f),j&&T(y),F&&F.d(j),j&&T(x),V&&V.d(j),j&&T(_),j&&T(o),Zt(z)}}}function yA(u,h,f){let{data:y}=h,{height:x=80}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:P=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","#00695c"]}=h,{decimals:V=null}=h,{label:j=null}=h;return u.$$set=U=>{"data"in U&&f(0,y=U.data),"height"in U&&f(1,x=U.height),"xKey"in U&&f(2,_=U.xKey),"yKey"in U&&f(3,o=U.yKey),"zKey"in U&&f(4,z=U.zKey),"topic_prev_available"in U&&f(5,P=U.topic_prev_available),"colors"in U&&f(6,F=U.colors),"decimals"in U&&f(7,V=U.decimals),"label"in U&&f(8,j=U.label)},[y,x,_,o,z,P,F,V,j]}class Gr extends Yo{constructor(h){super(),Jo(this,h,yA,mA,Qo,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function vA(u){let h,f,y,x;return{c(){h=M("div"),f=ee("Back to top"),this.h()},l(_){h=L(_,"DIV",{class:!0});var o=R(h);f=te(o,"Back to top"),o.forEach(T),this.h()},h(){S(h,"class","back_to_start svelte-11zibd5"),Si(h,"hidden",u[0])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Fi(window,"scroll",u[2]),Fi(h,"click",u[1])],y=!0)},p(_,[o]){o&1&&Si(h,"hidden",_[0])},i:an,o:an,d(_){_&&T(h),y=!1,Nc(x)}}}function gA(u,h,f){let{buttonVisibleOnPX:y=200}=h,x=!0;const _=()=>{document.body.scrollIntoView()},o=()=>document.documentElement||document.body,z=()=>{o().scrollTop>y?f(0,x=!1):f(0,x=!0)};return u.$$set=P=>{"buttonVisibleOnPX"in P&&f(3,y=P.buttonVisibleOnPX)},[x,_,z,y]}class _A extends Yo{constructor(h){super(),Jo(this,h,gA,vA,Qo,{buttonVisibleOnPX:3})}}function dk(u,h,f){const y=u.slice();return y[53]=h[f],y[55]=f,y}function mk(u,h,f){const y=u.slice();return y[56]=h[f],y[55]=f,y}function yk(u,h,f){const y=u.slice();return y[58]=h[f],y}function vk(u,h,f){const y=u.slice();return y[56]=h[f],y[55]=f,y}function gk(u){let h,f,y,x,_,o,z=" &gt; ",P,F,V,j,U,pe=u[1].name+"",he,Ie,we,Oe,Ue,Bt,Mt,mt,Je,Tr,wr,or,kt,At,Pr,Ot,Ar,rt,ur,$r,li,kr,vt,nt,dr,Un,la,Mi,_n,ri,Ia,br,qn,Ya,qr,Lt,Yi,Ni,ui,fo=" &#x24D8; ",Wt,ki,Lr,_i,bi,Cr,xi,on,Kr,hr=u[1].data.population.value[2021].all.toLocaleString()+"",jr,ea,jn,Ra,$o,ci,sn,bn,mo,ua,ll=" &#x24D8; ",es,Zn,xn,ca,ta,ha,Zr,N,G,X=u[1].data.households.value[2021].all_households.toLocaleString()+"",re,ce,ve,be,H,se,Se,Ne,Ge,Le,qe,pt,at,Be,tt,We,Qe,Ft,Ze,Gt,sr,Pt,Qt,Jt,Li,$t,mr,pr,Xt=u[1].name+"",nr,Ui,pa,wi,Ji,wn,Qi,yr,Gn,qi,Hr,ra=" &#x24D8; ",Dr,En,ln,Ku,ji,yo,un,Xr,Ri,hi,vo,ts,bd=" &#x24D8; ",ul,cl,rs,ep,Yl,is,go=(u[1].hectares>=.1?u[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",Jl,hl,qc,Sn,Ii,Kn,ke,Zi,Pn=" &#x24D8; ",Wr,fa,Cn,Bi,Ql,$l,tp=(u[1].data.population.value[2021].all/u[1].hectares>=.1?(u[1].data.population.value[2021].all/u[1].hectares).toFixed(1):"<0.1")+"",hf,rp,pf,ip,Ps,eu,_o,jc,Hu,Xu,pl,ii,np,bo=u[1].name+"",ns,fl,xo,Cs,dl,Dn,$i,Ja,Ds,Rr,Wu,ff=" &#x24D8; ",df,tu,ru,mf,Qa,wo,ml,yf,yl,Ms,vl,ap,as,Ba,vf,Eo,Ir,Zc,xd,$a,gf,Ls,eo,So,iu,os,_f=" &#x24D8; ",Yu,ko,nu,au,ia,Gc,bf,xf,Oa,Kc,Hc,Rs,Bs,ss,gl,op,wf,_l,Io,sp,Ju=u[1].name+"",Xc,Qu,ou,bl,vr,to,Hn,da,lr,zr,ro=" &#x24D8; ",$u,To,ls,wd,ec,xl,tc,us,ni,rc,cs,Br,ot,ma,Os,Wc=" &#x24D8; ",io,kn,wl,$e,El,su,lp,Va,cn,Yc,no,Ti,Xn,Ef,hs,Ed=" &#x24D8; ",up,na,Mn,tr,ya,va,In,Sl,Ta,Ao,Wn,zo,gt,ct,kl,Yn,ao,Ai,Tn,cp,lu=u[1].name+"",Er,hn,ic,Il,hp,pn,Gi,aa,Jn,Jc,Po,pp=" &#x24D8; ",fp,Co,oo,dp,Fa,Do,Qc,Vs,Ln,mp,Na,Ua,Mo,n,s,a=" &#x24D8; ",c,m,E,k,A,B,Z,Y,Q,$,ue,ae,de,oe,me,xe=" &#x24D8; ",Te,Re,Me,Ve,je,He,Xe,ht,yt,It,Et,rr,st,Tt,Nt,Rt,Ct,Vt,xt,zt,Oi=u[1].name+"",pi,Rn,Vi,fi,zi,Ei,Pi,Bn,Ki,so,Qn,yp=" &#x24D8; ",uu,qa,Lo,nc,ga,Tl,Ro,en,_a,Fs,ba,er,fn,oa,lo,$v=" &#x24D8; ",$c,ac,ps,Sf,Bo,cu,Sd,oc,dn,eg,Al,Ns,sc,tg,vp,rg=" &#x24D8; ",ig,hu,eh,pu,zl,kd,ng,ag,th,p_,og,rh,lc,Pl,Cl,sg,Hi,Dl,Us,kf,ih=u[1].name+"",nh,Sy,gp,_p,Id,Aa,fu,ja,du,Td,bp,lg=" &#x24D8; ",Ad,fs,xp,wp,ug,Ep,If,ah,cg,oh,ky,Ml,qs,mu,sh,Sp,hg=" &#x24D8; ",kp,za,Ip,pg,Tp,uc,Iy,fg,lh,dg,yu,ds,Ci,mg,uh,f_=" &#x24D8; ",yg,Ty,Ap,zp,vg,ch,zd,gg,Pp,cc,Ay,ms,fr,Ll,Rl,js,d_=" &#x24D8; ",_g,Cp,Dp,bg,Mp,Pd,xg,wg,hh,Cd,ph,hc,Lp,Bl,Tf,zy,Af,Zs,uo,Za,vu=u[1].name+"",On,zf,pc,Pa,Py,$n,gu,ys,Ol,Dd,Rp,m_=" &#x24D8; ",fh,fc,dh,Cy,Bp,Pf,Dy,My,dc,Eg,_u,vs,bu,Cf,mh,Ly=" &#x24D8; ",Df,xu,Gs,Sg,Op,Md,yh,Ld,mc,Rd,Vl,gs,yc,kg,Vp,Ry=" &#x24D8; ",Bd,Fp,Ks,Np,xr,Od,Vd,vh,gh,Ig,Hs,Xs,vc,Tg,Up,y_=" &#x24D8; ",By,_h,bh,Mf,_s,qp,xh,Oy,ai,ei,Vy,Fy,Fl,bs,wu,Fd,xs,jp=" &#x24D8; ",Ny,di,Nl,Ul,Eu,wh,Nd,Eh,Ga,Uy,ws,Ws,mi,Su,Sh,e=" &#x24D8; ",t,i,l,p,d,v,I,C,D,O,q,K,W,ne,le,ye,fe,Ee,Ae,Ce,De,Fe,Ke=u[1].name+"",Ye,_t,it,bt,lt,Dt,wt,ut,Kt,Ht,ir,St=" &#x24D8; ",gr,Or,Yr,yi,Vr,oi,tn,rn,Xi,mn,Di,Mr,vi,ar,Sr,Fr=" &#x24D8; ",cr,yn,Wi,Jr,si,vn,_r,Ys,Vn,Js,gi,ql,Oo,Es,Ss,Ka,Vo,kh,Lf,ks,co,Rf,Ih=u[1].name+"",Qs,Zp,jl,ku,Th,Ha,Is,Xa,Fo,Bf,Zl,Ud=" &#x24D8; ",Gp,Iu,$s,Of,el,gc,_c,Kp,Ts,qd,Vf,jd,Ff,qy,Ag,tl,ti,Fn,Nf,Tu,Zd,bc,No,rl,Ah=u[1].name+"",zh,Uf,xc,Gd,jy,Ca,Gl,As,Au,Zy,Ph,Uo=" &#x24D8; ",qf,Ch,Wa,zg,Dh,Kl,Mh,Lh,zs,Rh,jf,Gy,Zf,Pg,Kd,zu,ho,il,Bh,Hd,Ky,Pu,nl,Hy,Hp=u[1].name+"",Xd,Xp,Wp,Gf,Cg,xa,Cu,al,wc,Dg,Yp,v0=" &#x24D8; ",Mg,Jp,Qr,Kf,Xy,Qp,Wy,g0,_0,b0,x0,w0,E0,S0,k0,I0,T0,A0,z0,P0,Wd,Lg,C0,D0,Hf,M0,Oh,Du,$p,L0,Yd,iI=" &#x24D8; ",R0,Jd,Qd,B0,$d,Rg,O0,V0,Xf,F0,Vh,Mu,ef,N0,em,nI=" &#x24D8; ",U0,tm,rm,q0,im,Bg,j0,Z0,Wf,G0,Fh,Lu,tf,K0,nm,aI=" &#x24D8; ",H0,am,om,X0,sm,Og,W0,Y0,Yf,J0,Nh,Ru,rf,Q0,lm,oI=" &#x24D8; ",$0,um,cm,e1,hm,Vg,t1,r1,Jf,Xx,i1,Qf,pm,Ec,Yy,n1,a1,$f,Sc,o1,Fg=u[1].name+"",v_,s1,Jy,l1,u1,po,Uh,Bu,nf,c1,fm,sI=" &#x24D8; ",h1,dm,mm,p1,ym,Ng,f1,d1,ed,m1,qh,Ou,af,y1,vm,lI=" &#x24D8; ",v1,gm,_m,g1,bm,Ug,_1,b1,td,x1,qg,w1,jh,Vu,of,E1,xm,uI=" &#x24D8; ",S1,wm,Em,k1,Sm,jg,I1,T1,rd,A1,Zh,Fu,sf,z1,km,cI=" &#x24D8; ",P1,Im,Tm,C1,Am,Zg,D1,M1,id,Wx,L1,nd,zm,kc,Qy,R1,B1,ad,Ic,O1,Gg=u[1].name+"",g_,V1,$y,F1,N1,Hl,Gh,Nu,lf,U1,Pm,hI=" &#x24D8; ",q1,Cm,Dm,j1,Mm,Kg,Z1,G1,od,K1,Kh,Uu,uf,H1,Lm,pI=" &#x24D8; ",X1,Rm,Bm,W1,Om,Hg,Y1,J1,sd,Q1,Xg,Yx,An;function Jx(J,ze){return J[1].parents[0]?xA:bA}let __=Jx(u),Tc=__(u);function Qx(J,ze){return J[1].type=="ni"?EA:wA}let b_=Qx(u),Ac=b_(u),qo=u[1].type!="ni"&&bk(u);function $x(J,ze){return J[6]?kA:SA}let x_=$x(u),zc=x_(u);kt=new lT({props:{search_data:u[0],group:"typestr",search:!0}}),kt.$on("select",u[16]);function e2(J,ze){return J[1].type=="ni"||J[1].type=="ctry"?TA:IA}let w_=e2(u),Pc=w_(u),jo=u[6]&&xk(u),wa=u[1].type!="ni"&&wk(u),Ea=u[6]&&u[4]&&kk(u),Sa=u[1].type!="ni"&u[11]&&Ik(u),ka=u[6]&&u[4]&&Tk(u);function t2(J,ze){return J[1].type!="ni"?ZA:jA}let E_=t2(u),Cc=E_(u);function fI(J){u[32](J)}let r2={location:{bounds:u[1].bounds},options:{fitBoundsOptions:{padding:20}},style:c3,$$slots:{default:[KA]},$$scope:{ctx:u}};u[8]!==void 0&&(r2.map=u[8]),qe=new pT({props:r2}),cf.push(()=>s3(qe,"map",fI));function i2(J,ze){return J[1].parents[0]?XA:HA}let S_=i2(u),Dc=S_(u);function n2(J,ze){return J[1].children[0]?YA:WA}let k_=n2(u),Mc=k_(u);function a2(J,ze){return J[1].type!="ni"&J[1].type!="lgd"?$A:J[1].type!="ni"&J[1].type=="lgd"?QA:JA}let I_=a2(u),Lc=I_(u),Zo=u[1].type!="ni"&&u[11]&&Ck(u);Ms=new eA({props:{data:u[1]&&u[14](["age"]),zKey:u[12]}});let Go=(u[11]&&u[13]||u[4]&&u[13]&&u[6])&&Dk(u);return Ba=new oA({props:{data:u[1]&&u[14](["age"]),zKey:u[12]}}),$a=new Gr({props:{data:u[1]&&u[14](["sex"]),zKey:u[12],label:u[13]}}),Oa=new Gr({props:{data:u[1]&&u[14](["hh_size"]),zKey:u[12],label:u[13]}}),ni=new Gr({props:{data:u[1]&&u[14](["cob"]),zKey:u[12],label:u[13]}}),cn=new Gr({props:{data:u[1]&&u[14](["passport"]),zKey:u[12],label:u[13]}}),Ta=new Gr({props:{data:u[1]&&u[14](["natid"]),zKey:u[12],label:u[13]}}),Ln=new Gr({props:{data:u[1]&&u[14](["mainlang"]),zKey:u[12],label:u[13]}}),Q=new Gr({props:{data:u[1]&&u[14](["irish"]),zKey:u[12],label:u[13]}}),yt=new Gr({props:{data:u[1]&&u[14](["ulster"]),zKey:u[12],label:u[13]}}),_a=new Gr({props:{data:u[1]&&u[14](["religion"]),zKey:u[12],label:u[13]}}),dn=new Gr({props:{data:u[1]&&u[14](["religion_or_religion_brought_up_in"]),zKey:u[12],label:u[13]}}),th=new Gr({props:{data:u[1]&&u[14](["ethnic"]),zKey:u[12],label:u[13]}}),oh=new Gr({props:{data:u[1]&&u[14](["general_health"]),zKey:u[12],label:u[13]}}),lh=new Gr({props:{data:u[1]&&u[14](["long_term_disability"]),zKey:u[12],label:u[13]}}),cc=new Gr({props:{data:u[1]&&u[14](["number_of_long_term_health"]),zKey:u[12],label:u[13]}}),hh=new Gr({props:{data:u[1]&&u[14](["provision_care"]),zKey:u[12],label:u[13]}}),dc=new Gr({props:{data:u[1]&&u[14](["accommodation_type"]),zKey:u[12],label:u[13]}}),mc=new Gr({props:{data:u[1]&&u[14](["number_of_adaptations"]),zKey:u[12],label:u[13]}}),gh=new Gr({props:{data:u[1]&&u[14](["central_heating"]),zKey:u[12],label:u[13]}}),ai=new Gr({props:{data:u[1]&&u[14](["renewable_energy"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Ga=new Gr({props:{data:u[1]&&u[14](["hh_tenure"]),zKey:u[12],label:u[13]}}),D=new Gr({props:{data:u[1]&&u[14](["car_or_van"]),zKey:u[12],label:u[13]}}),Xi=new Gr({props:{data:u[1]&&u[14](["number_of_dependent_children_households"]),zKey:u[12],label:u[13]}}),Vn=new Gr({props:{data:u[1]&&u[14](["household_composition_households"]),zKey:u[12],label:u[13]}}),Ts=new Gr({props:{data:u[1]&&u[14](["marital_and_civil_partnership_status"]),zKey:u[12],label:u[13]}}),zs=new Gr({props:{data:u[1]&&u[14](["sexual_orientation_by_broad_age_band"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Hf=new Gr({props:{data:u[1]&&u[14](["highest_level_of_qualifications"]),zKey:u[12],label:u[13]}}),Xf=new Gr({props:{data:u[1]&&u[14](["economic_activity"]),zKey:u[12],label:u[13]}}),Wf=new Gr({props:{data:u[1]&&u[14](["hours_worked"]),zKey:u[12],label:u[13]}}),Yf=new Gr({props:{data:u[1]&&u[14](["industry_of_employment"]),zKey:u[12],label:u[13]}}),Jf=new Gr({props:{data:u[1]&&u[14](["occupation_1_digit"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),ed=new Gr({props:{data:u[1]&&u[14](["method_of_travel_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),td=new Gr({props:{data:u[1]&&u[14](["method_of_travel_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),rd=new Gr({props:{data:u[1]&&u[14](["distance_travelled_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),id=new Gr({props:{data:u[1]&&u[14](["distance_travelled_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),od=new Gr({props:{data:u[1]&&u[14](["address_one_year_ago"]),zKey:u[12],label:u[13]}}),sd=new Gr({props:{data:u[1]&&u[14](["year_of_arrival"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),{c(){h=M("div"),f=M("div"),y=M("span"),x=M("a"),_=ee("Home"),o=new Bx(!1),P=ge(),Tc.c(),F=ge(),V=M("br"),j=ge(),U=M("span"),he=ee(pe),Ie=ge(),we=M("div"),Oe=ee(`Click for: \r
		\r
					`),Ac.c(),Ue=ge(),qo&&qo.c(),Bt=ge(),zc.c(),Mt=ge(),mt=M("div"),Je=M("div"),Tr=M("b"),wr=ee("Search for your area:"),or=ge(),Ut(kt.$$.fragment),At=ge(),Pr=M("script"),Ot=ee(`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Ar=ge(),rt=M("div"),ur=M("button"),$r=ee("Print / PDF"),li=ge(),kr=M("button"),vt=ee("Menu"),nt=ge(),dr=M("button"),Un=ee("Share"),la=ge(),Mi=M("div"),_n=M("div"),ri=M("h3"),Ia=ee("Overview"),br=ge(),Pc.c(),qn=ge(),jo&&jo.c(),Ya=ge(),qr=M("div"),Lt=M("div"),Yi=M("div"),Ni=ee("Population "),ui=M("span"),Wt=ge(),ki=M("div"),Lr=M("div"),_i=ee(`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),bi=M("a"),Cr=M("strong"),xi=ee("Statistical bulletins"),on=ge(),Kr=M("span"),jr=ee(hr),ea=M("br"),jn=ge(),wa&&wa.c(),Ra=ge(),Ea&&Ea.c(),$o=ge(),ci=M("div"),sn=M("div"),bn=M("div"),mo=ee("Households"),ua=M("span"),es=ge(),Zn=M("div"),xn=M("div"),ca=ee(`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),ta=M("a"),ha=M("strong"),Zr=ee("Statistical bulletins"),N=ge(),G=M("span"),re=ee(X),ce=M("br"),ve=ge(),Sa&&Sa.c(),be=ge(),ka&&ka.c(),H=ge(),se=M("div"),Se=M("div"),Ne=M("h3"),Cc.c(),Ge=ge(),Le=M("div"),Ut(qe.$$.fragment),at=ge(),Be=M("div"),Dc.c(),tt=ge(),We=M("div"),Mc.c(),Ft=ge(),Ze=M("div"),Gt=M("div"),sr=M("h2"),Pt=M("button"),Qt=M("span"),Jt=ee("Area Information"),Li=ge(),$t=M("div"),mr=M("div"),pr=ee("Census 2021 - "),nr=ee(Xt),Ui=ee(" - "),pa=M("span"),wi=ee("Location, Area and Population density"),Ji=ge(),wn=M("div"),Qi=M("div"),yr=M("div"),Gn=M("div"),qi=ee("Location"),Hr=M("span"),Dr=ge(),En=M("div"),ln=M("div"),Ku=ee("Information about the area including its geographical hierarchy."),ji=ge(),yo=M("br"),Lc.c(),un=ge(),Xr=M("div"),Ri=M("div"),hi=M("div"),vo=ee("Area "),ts=M("span"),ul=ge(),cl=M("div"),rs=M("div"),ep=ee("Area is measured in hectares (ha), it is rounded to the nearest whole number."),Yl=ge(),is=M("span"),Jl=ee(go),hl=ee(" ha"),qc=ge(),Sn=M("div"),Ii=M("div"),Kn=M("div"),ke=ee("Population density"),Zi=M("span"),Wr=ge(),fa=M("div"),Cn=M("div"),Bi=ee("Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),Ql=ge(),$l=M("span"),hf=ee(tp),rp=ge(),Zo&&Zo.c(),ip=ge(),Ps=M("div"),eu=M("h2"),_o=M("button"),jc=M("span"),Hu=ee("Demography"),Xu=ge(),pl=M("div"),ii=M("div"),np=ee("Census 2021 - "),ns=ee(bo),fl=ee(" - "),xo=M("span"),Cs=ee("Broad age bands (years), Sex, Household size"),dl=ge(),Dn=M("div"),$i=M("div"),Ja=M("div"),Ds=M("div"),Rr=ee("Broad age bands (years) "),Wu=M("span"),df=ge(),tu=M("div"),ru=M("div"),mf=ee(`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),Qa=M("a"),wo=M("strong"),ml=ee("Statistical bulletins"),yf=ge(),yl=M("div"),Ut(Ms.$$.fragment),vl=ge(),Go&&Go.c(),ap=ge(),as=M("div"),Ut(Ba.$$.fragment),vf=ge(),Eo=M("div"),Ir=M("div"),Zc=ee("Sex"),xd=ge(),Ut($a.$$.fragment),gf=ge(),Ls=M("div"),eo=M("div"),So=M("div"),iu=ee("Household size"),os=M("span"),Yu=ge(),ko=M("div"),nu=M("div"),au=ee("The number of usual residents in the household.      "),ia=M("a"),Gc=M("strong"),bf=ee("Statistical bulletins"),xf=ge(),Ut(Oa.$$.fragment),Hc=ge(),Rs=M("div"),Bs=M("h2"),ss=M("button"),gl=M("span"),op=ee("Country of Birth & Nationality"),wf=ge(),_l=M("div"),Io=M("div"),sp=ee("Census 2021 - "),Xc=ee(Ju),Qu=ee(" - "),ou=M("span"),bl=ee(`Country of birth, Passport(s) held, National identity (person based)\r
\r
					`),vr=M("div"),to=M("div"),Hn=M("div"),da=M("div"),lr=ee("Country of birth"),zr=M("span"),$u=ge(),To=M("div"),ls=M("div"),wd=ee("The country in which a person was born. "),ec=M("a"),xl=M("strong"),tc=ee("Statistical bulletins"),us=ge(),Ut(ni.$$.fragment),rc=ge(),cs=M("div"),Br=M("div"),ot=M("div"),ma=ee("Passport(s) held"),Os=M("span"),io=ge(),kn=M("div"),wl=M("div"),$e=ee("Passport or passports that an individual holds. "),El=M("a"),su=M("strong"),lp=ee("Statistical bulletins"),Va=ge(),Ut(cn.$$.fragment),Yc=ge(),no=M("div"),Ti=M("div"),Xn=M("div"),Ef=ee("National identity (person based)"),hs=M("span"),up=ge(),na=M("div"),Mn=M("div"),tr=ee(`The nationality or nationalities that the person\r
									identifies with. `),ya=M("a"),va=M("strong"),In=ee("Statistical bulletins"),Sl=ge(),Ut(Ta.$$.fragment),Wn=ge(),zo=M("div"),gt=M("h2"),ct=M("button"),kl=M("span"),Yn=ee("Language"),ao=ge(),Ai=M("div"),Tn=M("div"),cp=ee("Census 2021 - "),Er=ee(lu),hn=ee(" - "),ic=M("span"),Il=ee("Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),hp=ge(),pn=M("div"),Gi=M("div"),aa=M("div"),Jn=M("div"),Jc=ee("Main language"),Po=M("span"),fp=ge(),Co=M("div"),oo=M("div"),dp=ee(`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Fa=M("a"),Do=M("strong"),Qc=ee("Statistical bulletins"),Vs=ge(),Ut(Ln.$$.fragment),mp=ge(),Na=M("div"),Ua=M("div"),Mo=M("div"),n=ee("Knowledge of Irish"),s=M("span"),c=ge(),m=M("div"),E=M("div"),k=ee(`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),A=M("a"),B=M("strong"),Z=ee("Statistical bulletins"),Y=ge(),Ut(Q.$$.fragment),$=ge(),ue=M("div"),ae=M("div"),de=M("div"),oe=ee("Knowledge of Ulster-Scots"),me=M("span"),Te=ge(),Re=M("div"),Me=M("div"),Ve=ee(`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),je=M("a"),He=M("strong"),Xe=ee("Statistical bulletins"),ht=ge(),Ut(yt.$$.fragment),Et=ge(),rr=M("div"),st=M("h2"),Tt=M("button"),Nt=M("span"),Rt=ee("Religion & Ethnicity"),Ct=ge(),Vt=M("div"),xt=M("div"),zt=ee("Census 2021 - "),pi=ee(Oi),Rn=ee(" - "),Vi=M("span"),fi=ee("Religion, Religion or religion brought up in, Ethnic group"),zi=ge(),Ei=M("div"),Pi=M("div"),Bn=M("div"),Ki=M("div"),so=ee("Religion"),Qn=M("span"),uu=ge(),qa=M("div"),Lo=M("div"),nc=ee(`Religion, religious denomination or body the person\r
									indicated they belong to. `),ga=M("a"),Tl=M("strong"),Ro=ee("Statistical bulletins"),en=ge(),Ut(_a.$$.fragment),Fs=ge(),ba=M("div"),er=M("div"),fn=M("div"),oa=ee("Religion or religion brought up in"),lo=M("span"),$c=ge(),ac=M("div"),ps=M("div"),Sf=ee("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Bo=M("a"),cu=M("strong"),Sd=ee("Statistical bulletins"),oc=ge(),Ut(dn.$$.fragment),eg=ge(),Al=M("div"),Ns=M("div"),sc=M("div"),tg=ee("Ethnic group"),vp=M("span"),ig=ge(),hu=M("div"),eh=M("div"),pu=ee("Person\u2019s ethnic group as declared in the Census. "),zl=M("a"),kd=M("strong"),ng=ee("Statistical bulletins"),ag=ge(),Ut(th.$$.fragment),og=ge(),rh=M("div"),lc=M("h2"),Pl=M("button"),Cl=M("span"),sg=ee("Health & Care"),Hi=ge(),Dl=M("div"),Us=M("div"),kf=ee("Census 2021 - "),nh=ee(ih),Sy=ee(" - "),gp=M("span"),_p=ee("General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Id=ge(),Aa=M("div"),fu=M("div"),ja=M("div"),du=M("div"),Td=ee("General health"),bp=M("span"),Ad=M("br"),fs=ge(),xp=M("div"),wp=M("div"),ug=ee(`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),Ep=M("a"),If=M("strong"),ah=ee("Statistical bulletins"),cg=ge(),Ut(oh.$$.fragment),ky=ge(),Ml=M("div"),qs=M("div"),mu=M("div"),sh=ee("Long-term health problem or disability"),Sp=M("span"),kp=ge(),za=M("div"),Ip=M("div"),pg=ee("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Tp=M("a"),uc=M("strong"),Iy=ee("Statistical bulletins"),fg=ge(),Ut(lh.$$.fragment),dg=ge(),yu=M("div"),ds=M("div"),Ci=M("div"),mg=ee("Long-term health conditions"),uh=M("span"),yg=M("br"),Ty=ge(),Ap=M("div"),zp=M("div"),vg=ee(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),ch=M("a"),zd=M("strong"),gg=ee("Statistical bulletins"),Pp=ge(),Ut(cc.$$.fragment),Ay=ge(),ms=M("div"),fr=M("div"),Ll=M("div"),Rl=ee("Unpaid care"),js=M("span"),_g=ge(),Cp=M("div"),Dp=M("div"),bg=ee(`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),Mp=M("a"),Pd=M("strong"),xg=ee("Statistical bulletins"),wg=ge(),Ut(hh.$$.fragment),ph=ge(),hc=M("div"),Lp=M("h2"),Bl=M("button"),Tf=M("span"),zy=ee("Housing & Accommodation"),Af=ge(),Zs=M("div"),uo=M("div"),Za=ee("Census 2021 - "),On=ee(vu),zf=ee(" - "),pc=M("span"),Pa=ee("Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),Py=ge(),$n=M("div"),gu=M("div"),ys=M("div"),Ol=M("div"),Dd=ee("Accommodation type"),Rp=M("span"),fh=ge(),fc=M("div"),dh=M("div"),Cy=ee("The type of accommodation occupied by a household. "),Bp=M("a"),Pf=M("strong"),Dy=ee("Statistical bulletins"),My=ge(),Ut(dc.$$.fragment),Eg=ge(),_u=M("div"),vs=M("div"),bu=M("div"),Cf=ee("Household adaptations"),mh=M("span"),Df=ge(),xu=M("div"),Gs=M("div"),Sg=ee(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Op=M("a"),Md=M("strong"),yh=ee("Statistical bulletins"),Ld=ge(),Ut(mc.$$.fragment),Rd=ge(),Vl=M("div"),gs=M("div"),yc=M("div"),kg=ee("Central heating"),Vp=M("span"),Bd=ge(),Fp=M("div"),Ks=M("div"),Np=ee(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),xr=M("a"),Od=M("strong"),Vd=ee("Statistical bulletins"),vh=ge(),Ut(gh.$$.fragment),Ig=ge(),Hs=M("div"),Xs=M("div"),vc=M("div"),Tg=ee("Renewable energy systems"),Up=M("span"),By=ge(),_h=M("div"),bh=M("div"),Mf=ee(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),_s=M("a"),qp=M("strong"),xh=ee("Statistical bulletins"),Oy=ge(),Ut(ai.$$.fragment),ei=ge(),Vy=M("br"),Fy=ge(),Fl=M("div"),bs=M("div"),wu=M("div"),Fd=ee("Household tenure"),xs=M("span"),Ny=ge(),di=M("div"),Nl=M("div"),Ul=ee(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),Eu=M("a"),wh=M("strong"),Nd=ee("Statistical bulletins"),Eh=ge(),Ut(Ga.$$.fragment),Uy=ge(),ws=M("div"),Ws=M("div"),mi=M("div"),Su=ee("Car or van availability"),Sh=M("span"),t=ge(),i=M("div"),l=M("div"),p=ee(`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),d=M("a"),v=M("strong"),I=ee("Statistical bulletins"),C=ge(),Ut(D.$$.fragment),O=ge(),q=M("br"),W=ge(),ne=M("div"),le=M("h2"),ye=M("button"),fe=M("span"),Ee=ee("Household Structure"),Ae=ge(),Ce=M("div"),De=M("div"),Fe=ee("Census 2021 - "),Ye=ee(Ke),_t=ee(" - "),it=M("span"),bt=ee("Number of dependent children, Household composition"),lt=ge(),Dt=M("div"),wt=M("div"),ut=M("div"),Kt=M("div"),Ht=ee("Number of dependent children"),ir=M("span"),gr=ge(),Or=M("div"),Yr=M("div"),yi=ee("Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),Vr=M("a"),oi=M("strong"),tn=ee("Statistical bulletins"),rn=ge(),Ut(Xi.$$.fragment),mn=ge(),Di=M("div"),Mr=M("div"),vi=M("div"),ar=ee("Household composition"),Sr=M("span"),cr=ge(),yn=M("div"),Wi=M("div"),Jr=ee(`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),si=M("a"),vn=M("strong"),_r=ee("Statistical bulletins"),Ys=ge(),Ut(Vn.$$.fragment),Js=ge(),gi=M("div"),Oo=ge(),Es=M("div"),Ss=M("h2"),Ka=M("button"),Vo=M("span"),kh=ee("Marital & Civil Partnership Status"),Lf=ge(),ks=M("div"),co=M("div"),Rf=ee("Census 2021 - "),Qs=ee(Ih),Zp=ee(" - "),jl=M("span"),ku=ee("Marital and civil partnership status"),Th=ge(),Ha=M("div"),Is=M("div"),Xa=M("div"),Fo=M("div"),Bf=ee("Marital and civil partnership status"),Zl=M("span"),Gp=ge(),Iu=M("div"),$s=M("div"),Of=ee("Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),el=M("a"),gc=M("strong"),_c=ee("Statistical bulletins"),Kp=ge(),Ut(Ts.$$.fragment),qd=ge(),Vf=M("div"),jd=ge(),Ff=M("div"),Ag=ge(),tl=M("div"),ti=M("h2"),Fn=M("button"),Nf=M("span"),Tu=ee("Sexual Orientation"),Zd=ge(),bc=M("div"),No=M("div"),rl=ee("Census 2021 - "),zh=ee(Ah),Uf=ee(" - "),xc=M("span"),Gd=ee("Sexual orientation"),jy=ge(),Ca=M("div"),Gl=M("div"),As=M("div"),Au=M("div"),Zy=ee("Sexual orientation"),Ph=M("span"),qf=ge(),Ch=M("div"),Wa=M("div"),zg=ee("Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),Dh=M("a"),Kl=M("strong"),Mh=ee("Statistical bulletins"),Lh=ge(),Ut(zs.$$.fragment),Rh=ge(),jf=M("div"),Gy=ge(),Zf=M("div"),Kd=ge(),zu=M("div"),ho=M("h2"),il=M("button"),Bh=M("span"),Hd=ee("Labour Market & Qualifications"),Ky=ge(),Pu=M("div"),nl=M("div"),Hy=ee("Census 2021 - "),Xd=ee(Hp),Xp=ee(" - "),Wp=M("span"),Gf=ee("Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),Cg=ge(),xa=M("div"),Cu=M("div"),al=M("div"),wc=M("div"),Dg=ee("Highest level of qualifications"),Yp=M("span"),Mg=ge(),Jp=M("div"),Qr=M("div"),Kf=ee(`The highest level of qualification categories are as follows:\r
										`),Xy=M("br"),Qp=ee(`\r
                                        \u2022 No qualifications;\r
										`),Wy=M("br"),g0=ee(`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),_0=M("br"),b0=ee(`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),x0=M("br"),w0=ee(`\r
                                        \u2022 Apprenticeship;\r
										`),E0=M("br"),S0=ee(`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),k0=M("br"),I0=ee(`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),T0=M("br"),A0=ee(`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),z0=M("br"),P0=ee(`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Wd=M("a"),Lg=M("strong"),C0=ee("Statistical bulletins"),D0=ge(),Ut(Hf.$$.fragment),M0=ge(),Oh=M("div"),Du=M("div"),$p=M("div"),L0=ee("Economic activity"),Yd=M("span"),R0=ge(),Jd=M("div"),Qd=M("div"),B0=ee("Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),$d=M("a"),Rg=M("strong"),O0=ee("Statistical bulletins"),V0=ge(),Ut(Xf.$$.fragment),F0=ge(),Vh=M("div"),Mu=M("div"),ef=M("div"),N0=ee("Hours worked per week"),em=M("span"),U0=ge(),tm=M("div"),rm=M("div"),q0=ee("The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),im=M("a"),Bg=M("strong"),j0=ee("Statistical bulletins"),Z0=ge(),Ut(Wf.$$.fragment),G0=ge(),Fh=M("div"),Lu=M("div"),tf=M("div"),K0=ee("Industry of employment"),nm=M("span"),H0=ge(),am=M("div"),om=M("div"),X0=ee("The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),sm=M("a"),Og=M("strong"),W0=ee("Statistical bulletins"),Y0=ge(),Ut(Yf.$$.fragment),J0=ge(),Nh=M("div"),Ru=M("div"),rf=M("div"),Q0=ee("Occupation"),lm=M("span"),$0=ge(),um=M("div"),cm=M("div"),e1=ee("The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),hm=M("a"),Vg=M("strong"),t1=ee("Statistical bulletins"),r1=ge(),Ut(Jf.$$.fragment),i1=ge(),Qf=M("div"),pm=M("h2"),Ec=M("button"),Yy=M("span"),n1=ee("Travel to Work or Study"),a1=ge(),$f=M("div"),Sc=M("div"),o1=ee("Census 2021 - "),v_=ee(Fg),s1=ee(" - "),Jy=M("span"),l1=ee("Method of travel to work or study, Distance to place of work or study"),u1=ge(),po=M("div"),Uh=M("div"),Bu=M("div"),nf=M("div"),c1=ee("Method of travel to work"),fm=M("span"),h1=ge(),dm=M("div"),mm=M("div"),p1=ee(`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),ym=M("a"),Ng=M("strong"),f1=ee("Statistical bulletins"),d1=ge(),Ut(ed.$$.fragment),m1=ge(),qh=M("div"),Ou=M("div"),af=M("div"),y1=ee("Method of travel to study"),vm=M("span"),v1=ge(),gm=M("div"),_m=M("div"),g1=ee(`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),bm=M("a"),Ug=M("strong"),_1=ee("Statistical bulletins"),b1=ge(),Ut(td.$$.fragment),x1=ge(),qg=M("div"),w1=ge(),jh=M("div"),Vu=M("div"),of=M("div"),E1=ee("Distance to place of work"),xm=M("span"),S1=ge(),wm=M("div"),Em=M("div"),k1=ee("The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),Sm=M("a"),jg=M("strong"),I1=ee("Statistical bulletins"),T1=ge(),Ut(rd.$$.fragment),A1=ge(),Zh=M("div"),Fu=M("div"),sf=M("div"),z1=ee("Distance to place of study"),km=M("span"),P1=ge(),Im=M("div"),Tm=M("div"),C1=ee("The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),Am=M("a"),Zg=M("strong"),D1=ee("Statistical bulletins"),M1=ge(),Ut(id.$$.fragment),L1=ge(),nd=M("div"),zm=M("h2"),kc=M("button"),Qy=M("span"),R1=ee("Migration"),B1=ge(),ad=M("div"),Ic=M("div"),O1=ee("Census 2021 - "),g_=ee(Gg),V1=ee(" - "),$y=M("span"),F1=ee("Address one year ago, Year of arrival to live in NI"),N1=ge(),Hl=M("div"),Gh=M("div"),Nu=M("div"),lf=M("div"),U1=ee("Address one year ago"),Pm=M("span"),q1=ge(),Cm=M("div"),Dm=M("div"),j1=ee("Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),Mm=M("a"),Kg=M("strong"),Z1=ee("Statistical bulletins"),G1=ge(),Ut(od.$$.fragment),K1=ge(),Kh=M("div"),Uu=M("div"),uf=M("div"),H1=ee("Year of arrival to live in NI"),Lm=M("span"),X1=ge(),Rm=M("div"),Bm=M("div"),W1=ee("The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Om=M("a"),Hg=M("strong"),Y1=ee("Statistical bulletins"),J1=ge(),Ut(sd.$$.fragment),Q1=ge(),Xg=M("div"),this.h()},l(J){h=L(J,"DIV",{class:!0});var ze=R(h);f=L(ze,"DIV",{});var Hh=R(f);y=L(Hh,"SPAN",{class:!0});var Rc=R(y);x=L(Rc,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var ev=R(x);_=te(ev,"Home"),ev.forEach(T),o=Ox(Rc,!1),P=_e(Rc),Tc.l(Rc),F=_e(Rc),Rc.forEach(T),V=L(Hh,"BR",{}),j=_e(Hh),U=L(Hh,"SPAN",{class:!0});var tv=R(U);he=te(tv,pe),tv.forEach(T),Ie=_e(Hh),we=L(Hh,"DIV",{class:!0,style:!0});var qu=R(we);Oe=te(qu,`Click for: \r
		\r
					`),Ac.l(qu),Ue=_e(qu),qo&&qo.l(qu),Bt=_e(qu),zc.l(qu),qu.forEach(T),Hh.forEach(T),Mt=_e(ze),mt=L(ze,"DIV",{});var Vm=R(mt);Je=L(Vm,"DIV",{style:!0,class:!0});var Xl=R(Je);Tr=L(Xl,"B",{});var Fm=R(Tr);wr=te(Fm,"Search for your area:"),Fm.forEach(T),or=_e(Xl),qt(kt.$$.fragment,Xl),At=_e(Xl),Pr=L(Xl,"SCRIPT",{});var Nm=R(Pr);Ot=te(Nm,`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Nm.forEach(T),Ar=_e(Xl),rt=L(Xl,"DIV",{width:!0});var Bc=R(rt);ur=L(Bc,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var Um=R(ur);$r=te(Um,"Print / PDF"),Um.forEach(T),li=_e(Bc),kr=L(Bc,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var qm=R(kr);vt=te(qm,"Menu"),qm.forEach(T),nt=_e(Bc),dr=L(Bc,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var jm=R(dr);Un=te(jm,"Share"),jm.forEach(T),Bc.forEach(T),Xl.forEach(T),Vm.forEach(T),ze.forEach(T),la=_e(J),Mi=L(J,"DIV",{id:!0,class:!0});var Oc=R(Mi);_n=L(Oc,"DIV",{class:!0,style:!0});var Vc=R(_n);ri=L(Vc,"H3",{style:!0,class:!0});var Zm=R(ri);Ia=te(Zm,"Overview"),Zm.forEach(T),br=_e(Vc),Pc.l(Vc),qn=_e(Vc),jo&&jo.l(Vc),Vc.forEach(T),Ya=_e(Oc),qr=L(Oc,"DIV",{class:!0});var Ko=R(qr);Lt=L(Ko,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Gm=R(Lt);Yi=L(Gm,"DIV",{class:!0,style:!0});var ld=R(Yi);Ni=te(ld,"Population "),ui=L(ld,"SPAN",{style:!0});var rv=R(ui);rv.forEach(T),ld.forEach(T),Gm.forEach(T),Wt=_e(Ko),ki=L(Ko,"DIV",{class:!0,id:!0});var Km=R(ki);Lr=L(Km,"DIV",{class:!0});var ud=R(Lr);_i=te(ud,`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),bi=L(ud,"A",{href:!0,class:!0});var Hm=R(bi);Cr=L(Hm,"STRONG",{});var Xm=R(Cr);xi=te(Xm,"Statistical bulletins"),Xm.forEach(T),Hm.forEach(T),ud.forEach(T),Km.forEach(T),on=_e(Ko),Kr=L(Ko,"SPAN",{class:!0,style:!0});var Wm=R(Kr);jr=te(Wm,hr),Wm.forEach(T),ea=L(Ko,"BR",{}),jn=_e(Ko),wa&&wa.l(Ko),Ra=_e(Ko),Ea&&Ea.l(Ko),Ko.forEach(T),$o=_e(Oc),ci=L(Oc,"DIV",{class:!0});var Ho=R(ci);sn=L(Ho,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ym=R(sn);bn=L(Ym,"DIV",{class:!0,style:!0});var cd=R(bn);mo=te(cd,"Households"),ua=L(cd,"SPAN",{style:!0});var iv=R(ua);iv.forEach(T),cd.forEach(T),Ym.forEach(T),es=_e(Ho),Zn=L(Ho,"DIV",{class:!0,id:!0});var Jm=R(Zn);xn=L(Jm,"DIV",{class:!0});var hd=R(xn);ca=te(hd,`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),ta=L(hd,"A",{href:!0,class:!0});var Qm=R(ta);ha=L(Qm,"STRONG",{});var $m=R(ha);Zr=te($m,"Statistical bulletins"),$m.forEach(T),Qm.forEach(T),hd.forEach(T),Jm.forEach(T),N=_e(Ho),G=L(Ho,"SPAN",{class:!0,style:!0});var ey=R(G);re=te(ey,X),ey.forEach(T),ce=L(Ho,"BR",{}),ve=_e(Ho),Sa&&Sa.l(Ho),be=_e(Ho),ka&&ka.l(Ho),Ho.forEach(T),Oc.forEach(T),H=_e(J),se=L(J,"DIV",{class:!0});var Wl=R(se);Se=L(Wl,"DIV",{style:!0});var ty=R(Se);Ne=L(ty,"H3",{class:!0});var ry=R(Ne);Cc.l(ry),ry.forEach(T),ty.forEach(T),Ge=_e(Wl),Le=L(Wl,"DIV",{id:!0,style:!0,class:!0});var iy=R(Le);qt(qe.$$.fragment,iy),iy.forEach(T),at=_e(Wl),Be=L(Wl,"DIV",{});var ny=R(Be);Dc.l(ny),ny.forEach(T),tt=_e(Wl),We=L(Wl,"DIV",{});var ay=R(We);Mc.l(ay),ay.forEach(T),Wl.forEach(T),Ft=_e(J),Ze=L(J,"DIV",{class:!0,id:!0});var nn=R(Ze);Gt=L(nn,"DIV",{class:!0});var T_=R(Gt);sr=L(T_,"H2",{class:!0,id:!0});var o2=R(sr);Pt=L(o2,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var s2=R(Pt);Qt=L(s2,"SPAN",{class:!0});var l2=R(Qt);Jt=te(l2,"Area Information"),l2.forEach(T),s2.forEach(T),o2.forEach(T),Li=_e(T_),$t=L(T_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var u2=R($t);mr=L(u2,"DIV",{class:!0});var oy=R(mr);pr=te(oy,"Census 2021 - "),nr=te(oy,Xt),Ui=te(oy," - "),pa=L(oy,"SPAN",{class:!0});var c2=R(pa);wi=te(c2,"Location, Area and Population density"),c2.forEach(T),Ji=_e(oy),wn=L(oy,"DIV",{class:!0});var nv=R(wn);Qi=L(nv,"DIV",{class:!0,style:!0});var sy=R(Qi);yr=L(sy,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var h2=R(yr);Gn=L(h2,"DIV",{class:!0,style:!0});var $1=R(Gn);qi=te($1,"Location"),Hr=L($1,"SPAN",{style:!0});var dI=R(Hr);dI.forEach(T),$1.forEach(T),h2.forEach(T),Dr=_e(sy),En=L(sy,"DIV",{class:!0,id:!0});var p2=R(En);ln=L(p2,"DIV",{class:!0});var f2=R(ln);Ku=te(f2,"Information about the area including its geographical hierarchy."),f2.forEach(T),p2.forEach(T),ji=_e(sy),yo=L(sy,"BR",{}),Lc.l(sy),sy.forEach(T),un=_e(nv),Xr=L(nv,"DIV",{class:!0});var av=R(Xr);Ri=L(av,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var d2=R(Ri);hi=L(d2,"DIV",{class:!0,style:!0});var eb=R(hi);vo=te(eb,"Area "),ts=L(eb,"SPAN",{style:!0});var mI=R(ts);mI.forEach(T),eb.forEach(T),d2.forEach(T),ul=_e(av),cl=L(av,"DIV",{class:!0,id:!0});var m2=R(cl);rs=L(m2,"DIV",{class:!0});var y2=R(rs);ep=te(y2,"Area is measured in hectares (ha), it is rounded to the nearest whole number."),y2.forEach(T),m2.forEach(T),Yl=_e(av),is=L(av,"SPAN",{class:!0,style:!0});var tb=R(is);Jl=te(tb,go),hl=te(tb," ha"),tb.forEach(T),av.forEach(T),qc=_e(nv),Sn=L(nv,"DIV",{class:!0});var pd=R(Sn);Ii=L(pd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var v2=R(Ii);Kn=L(v2,"DIV",{class:!0,style:!0});var rb=R(Kn);ke=te(rb,"Population density"),Zi=L(rb,"SPAN",{style:!0});var yI=R(Zi);yI.forEach(T),rb.forEach(T),v2.forEach(T),Wr=_e(pd),fa=L(pd,"DIV",{class:!0,id:!0});var g2=R(fa);Cn=L(g2,"DIV",{class:!0});var _2=R(Cn);Bi=te(_2,"Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),_2.forEach(T),g2.forEach(T),Ql=_e(pd),$l=L(pd,"SPAN",{class:!0,style:!0});var b2=R($l);hf=te(b2,tp),b2.forEach(T),rp=_e(pd),Zo&&Zo.l(pd),pd.forEach(T),nv.forEach(T),oy.forEach(T),u2.forEach(T),T_.forEach(T),ip=_e(nn),Ps=L(nn,"DIV",{class:!0});var A_=R(Ps);eu=L(A_,"H2",{class:!0,id:!0});var x2=R(eu);_o=L(x2,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var w2=R(_o);jc=L(w2,"SPAN",{class:!0});var E2=R(jc);Hu=te(E2,"Demography"),E2.forEach(T),w2.forEach(T),x2.forEach(T),Xu=_e(A_),pl=L(A_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var S2=R(pl);ii=L(S2,"DIV",{class:!0});var ly=R(ii);np=te(ly,"Census 2021 - "),ns=te(ly,bo),fl=te(ly," - "),xo=L(ly,"SPAN",{class:!0});var k2=R(xo);Cs=te(k2,"Broad age bands (years), Sex, Household size"),k2.forEach(T),dl=_e(ly),Dn=L(ly,"DIV",{class:!0});var ov=R(Dn);$i=L(ov,"DIV",{class:!0});var Xh=R($i);Ja=L(Xh,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var I2=R(Ja);Ds=L(I2,"DIV",{class:!0,style:!0});var ib=R(Ds);Rr=te(ib,"Broad age bands (years) "),Wu=L(ib,"SPAN",{style:!0});var vI=R(Wu);vI.forEach(T),ib.forEach(T),I2.forEach(T),df=_e(Xh),tu=L(Xh,"DIV",{class:!0,id:!0});var T2=R(tu);ru=L(T2,"DIV",{class:!0});var nb=R(ru);mf=te(nb,`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),Qa=L(nb,"A",{href:!0,class:!0});var A2=R(Qa);wo=L(A2,"STRONG",{});var z2=R(wo);ml=te(z2,"Statistical bulletins"),z2.forEach(T),A2.forEach(T),nb.forEach(T),T2.forEach(T),yf=_e(Xh),yl=L(Xh,"DIV",{class:!0,style:!0});var P2=R(yl);qt(Ms.$$.fragment,P2),P2.forEach(T),vl=_e(Xh),Go&&Go.l(Xh),ap=_e(Xh),as=L(Xh,"DIV",{});var C2=R(as);qt(Ba.$$.fragment,C2),C2.forEach(T),Xh.forEach(T),vf=_e(ov),Eo=L(ov,"DIV",{class:!0});var z_=R(Eo);Ir=L(z_,"DIV",{class:!0,style:!0});var D2=R(Ir);Zc=te(D2,"Sex"),D2.forEach(T),xd=_e(z_),qt($a.$$.fragment,z_),z_.forEach(T),gf=_e(ov),Ls=L(ov,"DIV",{class:!0});var sv=R(Ls);eo=L(sv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M2=R(eo);So=L(M2,"DIV",{class:!0,style:!0});var ab=R(So);iu=te(ab,"Household size"),os=L(ab,"SPAN",{style:!0});var gI=R(os);gI.forEach(T),ab.forEach(T),M2.forEach(T),Yu=_e(sv),ko=L(sv,"DIV",{class:!0,id:!0});var L2=R(ko);nu=L(L2,"DIV",{class:!0});var ob=R(nu);au=te(ob,"The number of usual residents in the household.      "),ia=L(ob,"A",{href:!0,class:!0});var R2=R(ia);Gc=L(R2,"STRONG",{});var B2=R(Gc);bf=te(B2,"Statistical bulletins"),B2.forEach(T),R2.forEach(T),ob.forEach(T),L2.forEach(T),xf=_e(sv),qt(Oa.$$.fragment,sv),sv.forEach(T),ov.forEach(T),ly.forEach(T),S2.forEach(T),A_.forEach(T),Hc=_e(nn),Rs=L(nn,"DIV",{class:!0});var P_=R(Rs);Bs=L(P_,"H2",{class:!0,id:!0});var O2=R(Bs);ss=L(O2,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var V2=R(ss);gl=L(V2,"SPAN",{class:!0});var F2=R(gl);op=te(F2,"Country of Birth & Nationality"),F2.forEach(T),V2.forEach(T),O2.forEach(T),wf=_e(P_),_l=L(P_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var N2=R(_l);Io=L(N2,"DIV",{class:!0});var Wg=R(Io);sp=te(Wg,"Census 2021 - "),Xc=te(Wg,Ju),Qu=te(Wg," - "),ou=L(Wg,"SPAN",{class:!0});var sb=R(ou);bl=te(sb,`Country of birth, Passport(s) held, National identity (person based)\r
\r
					`),vr=L(sb,"DIV",{class:!0});var lv=R(vr);to=L(lv,"DIV",{class:!0});var uv=R(to);Hn=L(uv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var U2=R(Hn);da=L(U2,"DIV",{class:!0,style:!0});var lb=R(da);lr=te(lb,"Country of birth"),zr=L(lb,"SPAN",{style:!0});var _I=R(zr);_I.forEach(T),lb.forEach(T),U2.forEach(T),$u=_e(uv),To=L(uv,"DIV",{class:!0,id:!0});var q2=R(To);ls=L(q2,"DIV",{class:!0});var ub=R(ls);wd=te(ub,"The country in which a person was born. "),ec=L(ub,"A",{href:!0,class:!0});var j2=R(ec);xl=L(j2,"STRONG",{});var Z2=R(xl);tc=te(Z2,"Statistical bulletins"),Z2.forEach(T),j2.forEach(T),ub.forEach(T),q2.forEach(T),us=_e(uv),qt(ni.$$.fragment,uv),uv.forEach(T),rc=_e(lv),cs=L(lv,"DIV",{class:!0});var cv=R(cs);Br=L(cv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var G2=R(Br);ot=L(G2,"DIV",{class:!0,style:!0});var cb=R(ot);ma=te(cb,"Passport(s) held"),Os=L(cb,"SPAN",{style:!0});var bI=R(Os);bI.forEach(T),cb.forEach(T),G2.forEach(T),io=_e(cv),kn=L(cv,"DIV",{class:!0,id:!0});var K2=R(kn);wl=L(K2,"DIV",{class:!0});var hb=R(wl);$e=te(hb,"Passport or passports that an individual holds. "),El=L(hb,"A",{href:!0,class:!0});var H2=R(El);su=L(H2,"STRONG",{});var X2=R(su);lp=te(X2,"Statistical bulletins"),X2.forEach(T),H2.forEach(T),hb.forEach(T),K2.forEach(T),Va=_e(cv),qt(cn.$$.fragment,cv),cv.forEach(T),Yc=_e(lv),no=L(lv,"DIV",{class:!0});var hv=R(no);Ti=L(hv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var W2=R(Ti);Xn=L(W2,"DIV",{class:!0,style:!0});var pb=R(Xn);Ef=te(pb,"National identity (person based)"),hs=L(pb,"SPAN",{style:!0});var xI=R(hs);xI.forEach(T),pb.forEach(T),W2.forEach(T),up=_e(hv),na=L(hv,"DIV",{class:!0,id:!0});var Y2=R(na);Mn=L(Y2,"DIV",{class:!0});var fb=R(Mn);tr=te(fb,`The nationality or nationalities that the person\r
									identifies with. `),ya=L(fb,"A",{href:!0,class:!0});var J2=R(ya);va=L(J2,"STRONG",{});var Q2=R(va);In=te(Q2,"Statistical bulletins"),Q2.forEach(T),J2.forEach(T),fb.forEach(T),Y2.forEach(T),Sl=_e(hv),qt(Ta.$$.fragment,hv),hv.forEach(T),lv.forEach(T),sb.forEach(T),Wg.forEach(T),N2.forEach(T),P_.forEach(T),Wn=_e(nn),zo=L(nn,"DIV",{class:!0});var C_=R(zo);gt=L(C_,"H2",{class:!0,id:!0});var $2=R(gt);ct=L($2,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ew=R(ct);kl=L(ew,"SPAN",{class:!0});var tw=R(kl);Yn=te(tw,"Language"),tw.forEach(T),ew.forEach(T),$2.forEach(T),ao=_e(C_),Ai=L(C_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var rw=R(Ai);Tn=L(rw,"DIV",{class:!0});var uy=R(Tn);cp=te(uy,"Census 2021 - "),Er=te(uy,lu),hn=te(uy," - "),ic=L(uy,"SPAN",{class:!0});var iw=R(ic);Il=te(iw,"Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),iw.forEach(T),hp=_e(uy),pn=L(uy,"DIV",{class:!0});var pv=R(pn);Gi=L(pv,"DIV",{class:!0});var fv=R(Gi);aa=L(fv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var nw=R(aa);Jn=L(nw,"DIV",{class:!0,style:!0});var db=R(Jn);Jc=te(db,"Main language"),Po=L(db,"SPAN",{style:!0});var wI=R(Po);wI.forEach(T),db.forEach(T),nw.forEach(T),fp=_e(fv),Co=L(fv,"DIV",{class:!0,id:!0});var aw=R(Co);oo=L(aw,"DIV",{class:!0});var mb=R(oo);dp=te(mb,`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Fa=L(mb,"A",{href:!0,class:!0});var ow=R(Fa);Do=L(ow,"STRONG",{});var sw=R(Do);Qc=te(sw,"Statistical bulletins"),sw.forEach(T),ow.forEach(T),mb.forEach(T),aw.forEach(T),Vs=_e(fv),qt(Ln.$$.fragment,fv),fv.forEach(T),mp=_e(pv),Na=L(pv,"DIV",{class:!0});var dv=R(Na);Ua=L(dv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var lw=R(Ua);Mo=L(lw,"DIV",{class:!0,style:!0});var yb=R(Mo);n=te(yb,"Knowledge of Irish"),s=L(yb,"SPAN",{style:!0});var EI=R(s);EI.forEach(T),yb.forEach(T),lw.forEach(T),c=_e(dv),m=L(dv,"DIV",{class:!0,id:!0});var uw=R(m);E=L(uw,"DIV",{class:!0});var vb=R(E);k=te(vb,`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),A=L(vb,"A",{href:!0,class:!0});var cw=R(A);B=L(cw,"STRONG",{});var hw=R(B);Z=te(hw,"Statistical bulletins"),hw.forEach(T),cw.forEach(T),vb.forEach(T),uw.forEach(T),Y=_e(dv),qt(Q.$$.fragment,dv),dv.forEach(T),$=_e(pv),ue=L(pv,"DIV",{class:!0});var mv=R(ue);ae=L(mv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var pw=R(ae);de=L(pw,"DIV",{class:!0,style:!0});var gb=R(de);oe=te(gb,"Knowledge of Ulster-Scots"),me=L(gb,"SPAN",{style:!0});var SI=R(me);SI.forEach(T),gb.forEach(T),pw.forEach(T),Te=_e(mv),Re=L(mv,"DIV",{class:!0,id:!0});var fw=R(Re);Me=L(fw,"DIV",{class:!0});var _b=R(Me);Ve=te(_b,`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),je=L(_b,"A",{href:!0,class:!0});var dw=R(je);He=L(dw,"STRONG",{});var mw=R(He);Xe=te(mw,"Statistical bulletins"),mw.forEach(T),dw.forEach(T),_b.forEach(T),fw.forEach(T),ht=_e(mv),qt(yt.$$.fragment,mv),mv.forEach(T),pv.forEach(T),uy.forEach(T),rw.forEach(T),C_.forEach(T),Et=_e(nn),rr=L(nn,"DIV",{class:!0});var D_=R(rr);st=L(D_,"H2",{class:!0,id:!0});var yw=R(st);Tt=L(yw,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var vw=R(Tt);Nt=L(vw,"SPAN",{class:!0});var gw=R(Nt);Rt=te(gw,"Religion & Ethnicity"),gw.forEach(T),vw.forEach(T),yw.forEach(T),Ct=_e(D_),Vt=L(D_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var _w=R(Vt);xt=L(_w,"DIV",{class:!0});var cy=R(xt);zt=te(cy,"Census 2021 - "),pi=te(cy,Oi),Rn=te(cy," - "),Vi=L(cy,"SPAN",{class:!0});var bw=R(Vi);fi=te(bw,"Religion, Religion or religion brought up in, Ethnic group"),bw.forEach(T),zi=_e(cy),Ei=L(cy,"DIV",{class:!0});var yv=R(Ei);Pi=L(yv,"DIV",{class:!0});var vv=R(Pi);Bn=L(vv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xw=R(Bn);Ki=L(xw,"DIV",{class:!0,style:!0});var bb=R(Ki);so=te(bb,"Religion"),Qn=L(bb,"SPAN",{style:!0});var kI=R(Qn);kI.forEach(T),bb.forEach(T),xw.forEach(T),uu=_e(vv),qa=L(vv,"DIV",{class:!0,id:!0});var ww=R(qa);Lo=L(ww,"DIV",{class:!0});var xb=R(Lo);nc=te(xb,`Religion, religious denomination or body the person\r
									indicated they belong to. `),ga=L(xb,"A",{href:!0,class:!0});var Ew=R(ga);Tl=L(Ew,"STRONG",{});var Sw=R(Tl);Ro=te(Sw,"Statistical bulletins"),Sw.forEach(T),Ew.forEach(T),xb.forEach(T),ww.forEach(T),en=_e(vv),qt(_a.$$.fragment,vv),vv.forEach(T),Fs=_e(yv),ba=L(yv,"DIV",{class:!0});var gv=R(ba);er=L(gv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var kw=R(er);fn=L(kw,"DIV",{class:!0,style:!0});var wb=R(fn);oa=te(wb,"Religion or religion brought up in"),lo=L(wb,"SPAN",{style:!0});var II=R(lo);II.forEach(T),wb.forEach(T),kw.forEach(T),$c=_e(gv),ac=L(gv,"DIV",{class:!0,id:!0});var Iw=R(ac);ps=L(Iw,"DIV",{class:!0});var Eb=R(ps);Sf=te(Eb,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Bo=L(Eb,"A",{href:!0,class:!0});var Tw=R(Bo);cu=L(Tw,"STRONG",{});var Aw=R(cu);Sd=te(Aw,"Statistical bulletins"),Aw.forEach(T),Tw.forEach(T),Eb.forEach(T),Iw.forEach(T),oc=_e(gv),qt(dn.$$.fragment,gv),gv.forEach(T),eg=_e(yv),Al=L(yv,"DIV",{class:!0});var _v=R(Al);Ns=L(_v,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var zw=R(Ns);sc=L(zw,"DIV",{class:!0,style:!0});var Sb=R(sc);tg=te(Sb,"Ethnic group"),vp=L(Sb,"SPAN",{style:!0});var TI=R(vp);TI.forEach(T),Sb.forEach(T),zw.forEach(T),ig=_e(_v),hu=L(_v,"DIV",{class:!0,id:!0});var Pw=R(hu);eh=L(Pw,"DIV",{class:!0});var kb=R(eh);pu=te(kb,"Person\u2019s ethnic group as declared in the Census. "),zl=L(kb,"A",{href:!0,class:!0});var Cw=R(zl);kd=L(Cw,"STRONG",{});var Dw=R(kd);ng=te(Dw,"Statistical bulletins"),Dw.forEach(T),Cw.forEach(T),kb.forEach(T),Pw.forEach(T),ag=_e(_v),qt(th.$$.fragment,_v),_v.forEach(T),yv.forEach(T),cy.forEach(T),_w.forEach(T),D_.forEach(T),og=_e(nn),rh=L(nn,"DIV",{class:!0});var M_=R(rh);lc=L(M_,"H2",{class:!0,id:!0});var Mw=R(lc);Pl=L(Mw,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Lw=R(Pl);Cl=L(Lw,"SPAN",{class:!0});var Rw=R(Cl);sg=te(Rw,"Health & Care"),Rw.forEach(T),Lw.forEach(T),Mw.forEach(T),Hi=_e(M_),Dl=L(M_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Bw=R(Dl);Us=L(Bw,"DIV",{class:!0});var hy=R(Us);kf=te(hy,"Census 2021 - "),nh=te(hy,ih),Sy=te(hy," - "),gp=L(hy,"SPAN",{class:!0});var Ow=R(gp);_p=te(Ow,"General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Ow.forEach(T),Id=_e(hy),Aa=L(hy,"DIV",{class:!0});var fd=R(Aa);fu=L(fd,"DIV",{class:!0});var bv=R(fu);ja=L(bv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Vw=R(ja);du=L(Vw,"DIV",{class:!0,style:!0});var L_=R(du);Td=te(L_,"General health"),bp=L(L_,"SPAN",{style:!0});var AI=R(bp);AI.forEach(T),Ad=L(L_,"BR",{}),L_.forEach(T),Vw.forEach(T),fs=_e(bv),xp=L(bv,"DIV",{class:!0,id:!0});var Fw=R(xp);wp=L(Fw,"DIV",{class:!0});var Ib=R(wp);ug=te(Ib,`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),Ep=L(Ib,"A",{href:!0,class:!0});var Nw=R(Ep);If=L(Nw,"STRONG",{});var Uw=R(If);ah=te(Uw,"Statistical bulletins"),Uw.forEach(T),Nw.forEach(T),Ib.forEach(T),Fw.forEach(T),cg=_e(bv),qt(oh.$$.fragment,bv),bv.forEach(T),ky=_e(fd),Ml=L(fd,"DIV",{class:!0});var xv=R(Ml);qs=L(xv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var qw=R(qs);mu=L(qw,"DIV",{class:!0,style:!0});var Tb=R(mu);sh=te(Tb,"Long-term health problem or disability"),Sp=L(Tb,"SPAN",{style:!0});var zI=R(Sp);zI.forEach(T),Tb.forEach(T),qw.forEach(T),kp=_e(xv),za=L(xv,"DIV",{class:!0,id:!0});var jw=R(za);Ip=L(jw,"DIV",{class:!0});var Ab=R(Ip);pg=te(Ab,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Tp=L(Ab,"A",{href:!0,class:!0});var Zw=R(Tp);uc=L(Zw,"STRONG",{});var Gw=R(uc);Iy=te(Gw,"Statistical bulletins"),Gw.forEach(T),Zw.forEach(T),Ab.forEach(T),jw.forEach(T),fg=_e(xv),qt(lh.$$.fragment,xv),xv.forEach(T),dg=_e(fd),yu=L(fd,"DIV",{class:!0});var wv=R(yu);ds=L(wv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Kw=R(ds);Ci=L(Kw,"DIV",{class:!0,style:!0});var R_=R(Ci);mg=te(R_,"Long-term health conditions"),uh=L(R_,"SPAN",{style:!0});var PI=R(uh);PI.forEach(T),yg=L(R_,"BR",{}),R_.forEach(T),Kw.forEach(T),Ty=_e(wv),Ap=L(wv,"DIV",{class:!0,id:!0});var Hw=R(Ap);zp=L(Hw,"DIV",{class:!0});var zb=R(zp);vg=te(zb,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),ch=L(zb,"A",{href:!0,class:!0});var Xw=R(ch);zd=L(Xw,"STRONG",{});var Ww=R(zd);gg=te(Ww,"Statistical bulletins"),Ww.forEach(T),Xw.forEach(T),zb.forEach(T),Hw.forEach(T),Pp=_e(wv),qt(cc.$$.fragment,wv),wv.forEach(T),Ay=_e(fd),ms=L(fd,"DIV",{class:!0});var Ev=R(ms);fr=L(Ev,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Yw=R(fr);Ll=L(Yw,"DIV",{class:!0,style:!0});var Pb=R(Ll);Rl=te(Pb,"Unpaid care"),js=L(Pb,"SPAN",{style:!0});var CI=R(js);CI.forEach(T),Pb.forEach(T),Yw.forEach(T),_g=_e(Ev),Cp=L(Ev,"DIV",{class:!0,id:!0});var Jw=R(Cp);Dp=L(Jw,"DIV",{class:!0});var Cb=R(Dp);bg=te(Cb,`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),Mp=L(Cb,"A",{href:!0,class:!0});var Qw=R(Mp);Pd=L(Qw,"STRONG",{});var $w=R(Pd);xg=te($w,"Statistical bulletins"),$w.forEach(T),Qw.forEach(T),Cb.forEach(T),Jw.forEach(T),wg=_e(Ev),qt(hh.$$.fragment,Ev),Ev.forEach(T),fd.forEach(T),hy.forEach(T),Bw.forEach(T),M_.forEach(T),ph=_e(nn),hc=L(nn,"DIV",{class:!0});var B_=R(hc);Lp=L(B_,"H2",{class:!0,id:!0});var eE=R(Lp);Bl=L(eE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var tE=R(Bl);Tf=L(tE,"SPAN",{class:!0});var rE=R(Tf);zy=te(rE,"Housing & Accommodation"),rE.forEach(T),tE.forEach(T),eE.forEach(T),Af=_e(B_),Zs=L(B_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var iE=R(Zs);uo=L(iE,"DIV",{class:!0});var py=R(uo);Za=te(py,"Census 2021 - "),On=te(py,vu),zf=te(py," - "),pc=L(py,"SPAN",{class:!0});var nE=R(pc);Pa=te(nE,"Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),nE.forEach(T),Py=_e(py),$n=L(py,"DIV",{class:!0});var ju=R($n);gu=L(ju,"DIV",{class:!0});var Sv=R(gu);ys=L(Sv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var aE=R(ys);Ol=L(aE,"DIV",{class:!0,style:!0});var Db=R(Ol);Dd=te(Db,"Accommodation type"),Rp=L(Db,"SPAN",{style:!0});var DI=R(Rp);DI.forEach(T),Db.forEach(T),aE.forEach(T),fh=_e(Sv),fc=L(Sv,"DIV",{class:!0,id:!0});var oE=R(fc);dh=L(oE,"DIV",{class:!0});var Mb=R(dh);Cy=te(Mb,"The type of accommodation occupied by a household. "),Bp=L(Mb,"A",{href:!0,class:!0});var sE=R(Bp);Pf=L(sE,"STRONG",{});var lE=R(Pf);Dy=te(lE,"Statistical bulletins"),lE.forEach(T),sE.forEach(T),Mb.forEach(T),oE.forEach(T),My=_e(Sv),qt(dc.$$.fragment,Sv),Sv.forEach(T),Eg=_e(ju),_u=L(ju,"DIV",{class:!0});var kv=R(_u);vs=L(kv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var uE=R(vs);bu=L(uE,"DIV",{class:!0,style:!0});var Lb=R(bu);Cf=te(Lb,"Household adaptations"),mh=L(Lb,"SPAN",{style:!0});var MI=R(mh);MI.forEach(T),Lb.forEach(T),uE.forEach(T),Df=_e(kv),xu=L(kv,"DIV",{class:!0,id:!0});var cE=R(xu);Gs=L(cE,"DIV",{class:!0});var Rb=R(Gs);Sg=te(Rb,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Op=L(Rb,"A",{href:!0,class:!0});var hE=R(Op);Md=L(hE,"STRONG",{});var pE=R(Md);yh=te(pE,"Statistical bulletins"),pE.forEach(T),hE.forEach(T),Rb.forEach(T),cE.forEach(T),Ld=_e(kv),qt(mc.$$.fragment,kv),kv.forEach(T),Rd=_e(ju),Vl=L(ju,"DIV",{class:!0});var Iv=R(Vl);gs=L(Iv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var fE=R(gs);yc=L(fE,"DIV",{class:!0,style:!0});var Bb=R(yc);kg=te(Bb,"Central heating"),Vp=L(Bb,"SPAN",{style:!0});var LI=R(Vp);LI.forEach(T),Bb.forEach(T),fE.forEach(T),Bd=_e(Iv),Fp=L(Iv,"DIV",{class:!0,id:!0});var dE=R(Fp);Ks=L(dE,"DIV",{class:!0});var Ob=R(Ks);Np=te(Ob,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),xr=L(Ob,"A",{href:!0,class:!0});var mE=R(xr);Od=L(mE,"STRONG",{});var yE=R(Od);Vd=te(yE,"Statistical bulletins"),yE.forEach(T),mE.forEach(T),Ob.forEach(T),dE.forEach(T),vh=_e(Iv),qt(gh.$$.fragment,Iv),Iv.forEach(T),Ig=_e(ju),Hs=L(ju,"DIV",{class:!0});var dd=R(Hs);Xs=L(dd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var vE=R(Xs);vc=L(vE,"DIV",{class:!0,style:!0});var Vb=R(vc);Tg=te(Vb,"Renewable energy systems"),Up=L(Vb,"SPAN",{style:!0});var RI=R(Up);RI.forEach(T),Vb.forEach(T),vE.forEach(T),By=_e(dd),_h=L(dd,"DIV",{class:!0,id:!0});var gE=R(_h);bh=L(gE,"DIV",{class:!0});var Fb=R(bh);Mf=te(Fb,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),_s=L(Fb,"A",{href:!0,class:!0});var _E=R(_s);qp=L(_E,"STRONG",{});var bE=R(qp);xh=te(bE,"Statistical bulletins"),bE.forEach(T),_E.forEach(T),Fb.forEach(T),gE.forEach(T),Oy=_e(dd),qt(ai.$$.fragment,dd),ei=_e(dd),Vy=L(dd,"BR",{}),dd.forEach(T),Fy=_e(ju),Fl=L(ju,"DIV",{class:!0});var Tv=R(Fl);bs=L(Tv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xE=R(bs);wu=L(xE,"DIV",{class:!0,style:!0});var Nb=R(wu);Fd=te(Nb,"Household tenure"),xs=L(Nb,"SPAN",{style:!0});var BI=R(xs);BI.forEach(T),Nb.forEach(T),xE.forEach(T),Ny=_e(Tv),di=L(Tv,"DIV",{class:!0,id:!0});var wE=R(di);Nl=L(wE,"DIV",{class:!0});var Ub=R(Nl);Ul=te(Ub,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),Eu=L(Ub,"A",{href:!0,class:!0});var EE=R(Eu);wh=L(EE,"STRONG",{});var SE=R(wh);Nd=te(SE,"Statistical bulletins"),SE.forEach(T),EE.forEach(T),Ub.forEach(T),wE.forEach(T),Eh=_e(Tv),qt(Ga.$$.fragment,Tv),Tv.forEach(T),Uy=_e(ju),ws=L(ju,"DIV",{class:!0});var md=R(ws);Ws=L(md,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var kE=R(Ws);mi=L(kE,"DIV",{class:!0,style:!0});var qb=R(mi);Su=te(qb,"Car or van availability"),Sh=L(qb,"SPAN",{style:!0});var OI=R(Sh);OI.forEach(T),qb.forEach(T),kE.forEach(T),t=_e(md),i=L(md,"DIV",{class:!0,id:!0});var IE=R(i);l=L(IE,"DIV",{class:!0});var jb=R(l);p=te(jb,`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),d=L(jb,"A",{href:!0,class:!0});var TE=R(d);v=L(TE,"STRONG",{});var AE=R(v);I=te(AE,"Statistical bulletins"),AE.forEach(T),TE.forEach(T),jb.forEach(T),IE.forEach(T),C=_e(md),qt(D.$$.fragment,md),O=_e(md),q=L(md,"BR",{}),md.forEach(T),ju.forEach(T),py.forEach(T),iE.forEach(T),B_.forEach(T),W=_e(nn),ne=L(nn,"DIV",{class:!0});var O_=R(ne);le=L(O_,"H2",{class:!0,id:!0});var zE=R(le);ye=L(zE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var PE=R(ye);fe=L(PE,"SPAN",{class:!0});var CE=R(fe);Ee=te(CE,"Household Structure"),CE.forEach(T),PE.forEach(T),zE.forEach(T),Ae=_e(O_),Ce=L(O_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var DE=R(Ce);De=L(DE,"DIV",{class:!0});var fy=R(De);Fe=te(fy,"Census 2021 - "),Ye=te(fy,Ke),_t=te(fy," - "),it=L(fy,"SPAN",{class:!0});var ME=R(it);bt=te(ME,"Number of dependent children, Household composition"),ME.forEach(T),lt=_e(fy),Dt=L(fy,"DIV",{class:!0});var Av=R(Dt);wt=L(Av,"DIV",{class:!0});var zv=R(wt);ut=L(zv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var LE=R(ut);Kt=L(LE,"DIV",{class:!0,style:!0});var Zb=R(Kt);Ht=te(Zb,"Number of dependent children"),ir=L(Zb,"SPAN",{style:!0});var VI=R(ir);VI.forEach(T),Zb.forEach(T),LE.forEach(T),gr=_e(zv),Or=L(zv,"DIV",{class:!0,id:!0});var RE=R(Or);Yr=L(RE,"DIV",{class:!0});var Gb=R(Yr);yi=te(Gb,"Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),Vr=L(Gb,"A",{href:!0,class:!0});var BE=R(Vr);oi=L(BE,"STRONG",{});var OE=R(oi);tn=te(OE,"Statistical bulletins"),OE.forEach(T),BE.forEach(T),Gb.forEach(T),RE.forEach(T),rn=_e(zv),qt(Xi.$$.fragment,zv),zv.forEach(T),mn=_e(Av),Di=L(Av,"DIV",{class:!0});var Pv=R(Di);Mr=L(Pv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var VE=R(Mr);vi=L(VE,"DIV",{class:!0,style:!0});var Kb=R(vi);ar=te(Kb,"Household composition"),Sr=L(Kb,"SPAN",{style:!0});var FI=R(Sr);FI.forEach(T),Kb.forEach(T),VE.forEach(T),cr=_e(Pv),yn=L(Pv,"DIV",{class:!0,id:!0});var FE=R(yn);Wi=L(FE,"DIV",{class:!0});var Hb=R(Wi);Jr=te(Hb,`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),si=L(Hb,"A",{href:!0,class:!0});var NE=R(si);vn=L(NE,"STRONG",{});var UE=R(vn);_r=te(UE,"Statistical bulletins"),UE.forEach(T),NE.forEach(T),Hb.forEach(T),FE.forEach(T),Ys=_e(Pv),qt(Vn.$$.fragment,Pv),Pv.forEach(T),Js=_e(Av),gi=L(Av,"DIV",{class:!0});var NI=R(gi);NI.forEach(T),Av.forEach(T),fy.forEach(T),DE.forEach(T),O_.forEach(T),Oo=_e(nn),Es=L(nn,"DIV",{class:!0});var V_=R(Es);Ss=L(V_,"H2",{class:!0,id:!0});var qE=R(Ss);Ka=L(qE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var jE=R(Ka);Vo=L(jE,"SPAN",{class:!0});var ZE=R(Vo);kh=te(ZE,"Marital & Civil Partnership Status"),ZE.forEach(T),jE.forEach(T),qE.forEach(T),Lf=_e(V_),ks=L(V_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var GE=R(ks);co=L(GE,"DIV",{class:!0});var dy=R(co);Rf=te(dy,"Census 2021 - "),Qs=te(dy,Ih),Zp=te(dy," - "),jl=L(dy,"SPAN",{class:!0});var KE=R(jl);ku=te(KE,"Marital and civil partnership status"),KE.forEach(T),Th=_e(dy),Ha=L(dy,"DIV",{class:!0});var Cv=R(Ha);Is=L(Cv,"DIV",{class:!0});var Dv=R(Is);Xa=L(Dv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var HE=R(Xa);Fo=L(HE,"DIV",{class:!0,style:!0});var Xb=R(Fo);Bf=te(Xb,"Marital and civil partnership status"),Zl=L(Xb,"SPAN",{style:!0});var UI=R(Zl);UI.forEach(T),Xb.forEach(T),HE.forEach(T),Gp=_e(Dv),Iu=L(Dv,"DIV",{class:!0,id:!0});var XE=R(Iu);$s=L(XE,"DIV",{class:!0});var Wb=R($s);Of=te(Wb,"Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),el=L(Wb,"A",{href:!0,class:!0});var WE=R(el);gc=L(WE,"STRONG",{});var YE=R(gc);_c=te(YE,"Statistical bulletins"),YE.forEach(T),WE.forEach(T),Wb.forEach(T),XE.forEach(T),Kp=_e(Dv),qt(Ts.$$.fragment,Dv),Dv.forEach(T),qd=_e(Cv),Vf=L(Cv,"DIV",{class:!0});var qI=R(Vf);qI.forEach(T),jd=_e(Cv),Ff=L(Cv,"DIV",{class:!0});var jI=R(Ff);jI.forEach(T),Cv.forEach(T),dy.forEach(T),GE.forEach(T),V_.forEach(T),Ag=_e(nn),tl=L(nn,"DIV",{class:!0});var F_=R(tl);ti=L(F_,"H2",{class:!0,id:!0});var JE=R(ti);Fn=L(JE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var QE=R(Fn);Nf=L(QE,"SPAN",{class:!0});var $E=R(Nf);Tu=te($E,"Sexual Orientation"),$E.forEach(T),QE.forEach(T),JE.forEach(T),Zd=_e(F_),bc=L(F_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var e5=R(bc);No=L(e5,"DIV",{class:!0});var my=R(No);rl=te(my,"Census 2021 - "),zh=te(my,Ah),Uf=te(my," - "),xc=L(my,"SPAN",{class:!0});var t5=R(xc);Gd=te(t5,"Sexual orientation"),t5.forEach(T),jy=_e(my),Ca=L(my,"DIV",{class:!0});var Mv=R(Ca);Gl=L(Mv,"DIV",{class:!0});var Lv=R(Gl);As=L(Lv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var r5=R(As);Au=L(r5,"DIV",{class:!0,style:!0});var Yb=R(Au);Zy=te(Yb,"Sexual orientation"),Ph=L(Yb,"SPAN",{style:!0});var ZI=R(Ph);ZI.forEach(T),Yb.forEach(T),r5.forEach(T),qf=_e(Lv),Ch=L(Lv,"DIV",{class:!0,id:!0});var i5=R(Ch);Wa=L(i5,"DIV",{class:!0});var Jb=R(Wa);zg=te(Jb,"Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),Dh=L(Jb,"A",{href:!0,class:!0});var n5=R(Dh);Kl=L(n5,"STRONG",{});var a5=R(Kl);Mh=te(a5,"Statistical bulletins"),a5.forEach(T),n5.forEach(T),Jb.forEach(T),i5.forEach(T),Lh=_e(Lv),qt(zs.$$.fragment,Lv),Lv.forEach(T),Rh=_e(Mv),jf=L(Mv,"DIV",{class:!0});var GI=R(jf);GI.forEach(T),Gy=_e(Mv),Zf=L(Mv,"DIV",{class:!0});var KI=R(Zf);KI.forEach(T),Mv.forEach(T),my.forEach(T),e5.forEach(T),F_.forEach(T),Kd=_e(nn),zu=L(nn,"DIV",{class:!0});var N_=R(zu);ho=L(N_,"H2",{class:!0,id:!0});var o5=R(ho);il=L(o5,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var s5=R(il);Bh=L(s5,"SPAN",{class:!0});var l5=R(Bh);Hd=te(l5,"Labour Market & Qualifications"),l5.forEach(T),s5.forEach(T),o5.forEach(T),Ky=_e(N_),Pu=L(N_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var u5=R(Pu);nl=L(u5,"DIV",{class:!0});var yy=R(nl);Hy=te(yy,"Census 2021 - "),Xd=te(yy,Hp),Xp=te(yy," - "),Wp=L(yy,"SPAN",{class:!0});var c5=R(Wp);Gf=te(c5,"Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),c5.forEach(T),Cg=_e(yy),xa=L(yy,"DIV",{class:!0});var Wh=R(xa);Cu=L(Wh,"DIV",{class:!0});var Rv=R(Cu);al=L(Rv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var h5=R(al);wc=L(h5,"DIV",{class:!0,style:!0});var Qb=R(wc);Dg=te(Qb,"Highest level of qualifications"),Yp=L(Qb,"SPAN",{style:!0});var HI=R(Yp);HI.forEach(T),Qb.forEach(T),h5.forEach(T),Mg=_e(Rv),Jp=L(Rv,"DIV",{class:!0,id:!0});var p5=R(Jp);Qr=L(p5,"DIV",{class:!0});var Da=R(Qr);Kf=te(Da,`The highest level of qualification categories are as follows:\r
										`),Xy=L(Da,"BR",{}),Qp=te(Da,`\r
                                        \u2022 No qualifications;\r
										`),Wy=L(Da,"BR",{}),g0=te(Da,`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),_0=L(Da,"BR",{}),b0=te(Da,`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),x0=L(Da,"BR",{}),w0=te(Da,`\r
                                        \u2022 Apprenticeship;\r
										`),E0=L(Da,"BR",{}),S0=te(Da,`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),k0=L(Da,"BR",{}),I0=te(Da,`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),T0=L(Da,"BR",{}),A0=te(Da,`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),z0=L(Da,"BR",{}),P0=te(Da,`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Wd=L(Da,"A",{href:!0,class:!0});var f5=R(Wd);Lg=L(f5,"STRONG",{});var d5=R(Lg);C0=te(d5,"Statistical bulletins"),d5.forEach(T),f5.forEach(T),Da.forEach(T),p5.forEach(T),D0=_e(Rv),qt(Hf.$$.fragment,Rv),Rv.forEach(T),M0=_e(Wh),Oh=L(Wh,"DIV",{class:!0});var Bv=R(Oh);Du=L(Bv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var m5=R(Du);$p=L(m5,"DIV",{class:!0,style:!0});var $b=R($p);L0=te($b,"Economic activity"),Yd=L($b,"SPAN",{style:!0});var XI=R(Yd);XI.forEach(T),$b.forEach(T),m5.forEach(T),R0=_e(Bv),Jd=L(Bv,"DIV",{class:!0,id:!0});var y5=R(Jd);Qd=L(y5,"DIV",{class:!0});var ex=R(Qd);B0=te(ex,"Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),$d=L(ex,"A",{href:!0,class:!0});var v5=R($d);Rg=L(v5,"STRONG",{});var g5=R(Rg);O0=te(g5,"Statistical bulletins"),g5.forEach(T),v5.forEach(T),ex.forEach(T),y5.forEach(T),V0=_e(Bv),qt(Xf.$$.fragment,Bv),Bv.forEach(T),F0=_e(Wh),Vh=L(Wh,"DIV",{class:!0});var Ov=R(Vh);Mu=L(Ov,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _5=R(Mu);ef=L(_5,"DIV",{class:!0,style:!0});var tx=R(ef);N0=te(tx,"Hours worked per week"),em=L(tx,"SPAN",{style:!0});var WI=R(em);WI.forEach(T),tx.forEach(T),_5.forEach(T),U0=_e(Ov),tm=L(Ov,"DIV",{class:!0,id:!0});var b5=R(tm);rm=L(b5,"DIV",{class:!0});var rx=R(rm);q0=te(rx,"The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),im=L(rx,"A",{href:!0,class:!0});var x5=R(im);Bg=L(x5,"STRONG",{});var w5=R(Bg);j0=te(w5,"Statistical bulletins"),w5.forEach(T),x5.forEach(T),rx.forEach(T),b5.forEach(T),Z0=_e(Ov),qt(Wf.$$.fragment,Ov),Ov.forEach(T),G0=_e(Wh),Fh=L(Wh,"DIV",{class:!0});var Vv=R(Fh);Lu=L(Vv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var E5=R(Lu);tf=L(E5,"DIV",{class:!0,style:!0});var ix=R(tf);K0=te(ix,"Industry of employment"),nm=L(ix,"SPAN",{style:!0});var YI=R(nm);YI.forEach(T),ix.forEach(T),E5.forEach(T),H0=_e(Vv),am=L(Vv,"DIV",{class:!0,id:!0});var S5=R(am);om=L(S5,"DIV",{class:!0});var nx=R(om);X0=te(nx,"The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),sm=L(nx,"A",{href:!0,class:!0});var k5=R(sm);Og=L(k5,"STRONG",{});var I5=R(Og);W0=te(I5,"Statistical bulletins"),I5.forEach(T),k5.forEach(T),nx.forEach(T),S5.forEach(T),Y0=_e(Vv),qt(Yf.$$.fragment,Vv),Vv.forEach(T),J0=_e(Wh),Nh=L(Wh,"DIV",{class:!0});var Fv=R(Nh);Ru=L(Fv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var T5=R(Ru);rf=L(T5,"DIV",{class:!0,style:!0});var ax=R(rf);Q0=te(ax,"Occupation"),lm=L(ax,"SPAN",{style:!0});var JI=R(lm);JI.forEach(T),ax.forEach(T),T5.forEach(T),$0=_e(Fv),um=L(Fv,"DIV",{class:!0,id:!0});var A5=R(um);cm=L(A5,"DIV",{class:!0});var ox=R(cm);e1=te(ox,"The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),hm=L(ox,"A",{href:!0,class:!0});var z5=R(hm);Vg=L(z5,"STRONG",{});var P5=R(Vg);t1=te(P5,"Statistical bulletins"),P5.forEach(T),z5.forEach(T),ox.forEach(T),A5.forEach(T),r1=_e(Fv),qt(Jf.$$.fragment,Fv),Fv.forEach(T),Wh.forEach(T),yy.forEach(T),u5.forEach(T),N_.forEach(T),i1=_e(nn),Qf=L(nn,"DIV",{class:!0});var U_=R(Qf);pm=L(U_,"H2",{class:!0,id:!0});var C5=R(pm);Ec=L(C5,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var D5=R(Ec);Yy=L(D5,"SPAN",{class:!0});var M5=R(Yy);n1=te(M5,"Travel to Work or Study"),M5.forEach(T),D5.forEach(T),C5.forEach(T),a1=_e(U_),$f=L(U_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var L5=R($f);Sc=L(L5,"DIV",{class:!0});var vy=R(Sc);o1=te(vy,"Census 2021 - "),v_=te(vy,Fg),s1=te(vy," - "),Jy=L(vy,"SPAN",{class:!0});var R5=R(Jy);l1=te(R5,"Method of travel to work or study, Distance to place of work or study"),R5.forEach(T),u1=_e(vy),po=L(vy,"DIV",{class:!0});var Yh=R(po);Uh=L(Yh,"DIV",{class:!0});var Nv=R(Uh);Bu=L(Nv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var B5=R(Bu);nf=L(B5,"DIV",{class:!0,style:!0});var sx=R(nf);c1=te(sx,"Method of travel to work"),fm=L(sx,"SPAN",{style:!0});var QI=R(fm);QI.forEach(T),sx.forEach(T),B5.forEach(T),h1=_e(Nv),dm=L(Nv,"DIV",{class:!0,id:!0});var O5=R(dm);mm=L(O5,"DIV",{class:!0});var lx=R(mm);p1=te(lx,`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),ym=L(lx,"A",{href:!0,class:!0});var V5=R(ym);Ng=L(V5,"STRONG",{});var F5=R(Ng);f1=te(F5,"Statistical bulletins"),F5.forEach(T),V5.forEach(T),lx.forEach(T),O5.forEach(T),d1=_e(Nv),qt(ed.$$.fragment,Nv),Nv.forEach(T),m1=_e(Yh),qh=L(Yh,"DIV",{class:!0});var Uv=R(qh);Ou=L(Uv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var N5=R(Ou);af=L(N5,"DIV",{class:!0,style:!0});var ux=R(af);y1=te(ux,"Method of travel to study"),vm=L(ux,"SPAN",{style:!0});var $I=R(vm);$I.forEach(T),ux.forEach(T),N5.forEach(T),v1=_e(Uv),gm=L(Uv,"DIV",{class:!0,id:!0});var U5=R(gm);_m=L(U5,"DIV",{class:!0});var cx=R(_m);g1=te(cx,`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),bm=L(cx,"A",{href:!0,class:!0});var q5=R(bm);Ug=L(q5,"STRONG",{});var j5=R(Ug);_1=te(j5,"Statistical bulletins"),j5.forEach(T),q5.forEach(T),cx.forEach(T),U5.forEach(T),b1=_e(Uv),qt(td.$$.fragment,Uv),Uv.forEach(T),x1=_e(Yh),qg=L(Yh,"DIV",{class:!0});var e3=R(qg);e3.forEach(T),w1=_e(Yh),jh=L(Yh,"DIV",{class:!0});var qv=R(jh);Vu=L(qv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Z5=R(Vu);of=L(Z5,"DIV",{class:!0,style:!0});var hx=R(of);E1=te(hx,"Distance to place of work"),xm=L(hx,"SPAN",{style:!0});var t3=R(xm);t3.forEach(T),hx.forEach(T),Z5.forEach(T),S1=_e(qv),wm=L(qv,"DIV",{class:!0,id:!0});var G5=R(wm);Em=L(G5,"DIV",{class:!0});var px=R(Em);k1=te(px,"The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),Sm=L(px,"A",{href:!0,class:!0});var K5=R(Sm);jg=L(K5,"STRONG",{});var H5=R(jg);I1=te(H5,"Statistical bulletins"),H5.forEach(T),K5.forEach(T),px.forEach(T),G5.forEach(T),T1=_e(qv),qt(rd.$$.fragment,qv),qv.forEach(T),A1=_e(Yh),Zh=L(Yh,"DIV",{class:!0});var jv=R(Zh);Fu=L(jv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var X5=R(Fu);sf=L(X5,"DIV",{class:!0,style:!0});var fx=R(sf);z1=te(fx,"Distance to place of study"),km=L(fx,"SPAN",{style:!0});var r3=R(km);r3.forEach(T),fx.forEach(T),X5.forEach(T),P1=_e(jv),Im=L(jv,"DIV",{class:!0,id:!0});var W5=R(Im);Tm=L(W5,"DIV",{class:!0});var dx=R(Tm);C1=te(dx,"The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),Am=L(dx,"A",{href:!0,class:!0});var Y5=R(Am);Zg=L(Y5,"STRONG",{});var J5=R(Zg);D1=te(J5,"Statistical bulletins"),J5.forEach(T),Y5.forEach(T),dx.forEach(T),W5.forEach(T),M1=_e(jv),qt(id.$$.fragment,jv),jv.forEach(T),Yh.forEach(T),vy.forEach(T),L5.forEach(T),U_.forEach(T),L1=_e(nn),nd=L(nn,"DIV",{class:!0});var q_=R(nd);zm=L(q_,"H2",{class:!0,id:!0});var Q5=R(zm);kc=L(Q5,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var $5=R(kc);Qy=L($5,"SPAN",{class:!0});var eS=R(Qy);R1=te(eS,"Migration"),eS.forEach(T),$5.forEach(T),Q5.forEach(T),B1=_e(q_),ad=L(q_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var tS=R(ad);Ic=L(tS,"DIV",{class:!0});var gy=R(Ic);O1=te(gy,"Census 2021 - "),g_=te(gy,Gg),V1=te(gy," - "),$y=L(gy,"SPAN",{class:!0});var rS=R($y);F1=te(rS,"Address one year ago, Year of arrival to live in NI"),rS.forEach(T),N1=_e(gy),Hl=L(gy,"DIV",{class:!0});var Zv=R(Hl);Gh=L(Zv,"DIV",{class:!0});var Gv=R(Gh);Nu=L(Gv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var iS=R(Nu);lf=L(iS,"DIV",{class:!0,style:!0});var mx=R(lf);U1=te(mx,"Address one year ago"),Pm=L(mx,"SPAN",{style:!0});var i3=R(Pm);i3.forEach(T),mx.forEach(T),iS.forEach(T),q1=_e(Gv),Cm=L(Gv,"DIV",{class:!0,id:!0});var nS=R(Cm);Dm=L(nS,"DIV",{class:!0});var yx=R(Dm);j1=te(yx,"Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),Mm=L(yx,"A",{href:!0,class:!0});var aS=R(Mm);Kg=L(aS,"STRONG",{});var oS=R(Kg);Z1=te(oS,"Statistical bulletins"),oS.forEach(T),aS.forEach(T),yx.forEach(T),nS.forEach(T),G1=_e(Gv),qt(od.$$.fragment,Gv),Gv.forEach(T),K1=_e(Zv),Kh=L(Zv,"DIV",{class:!0});var Kv=R(Kh);Uu=L(Kv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var sS=R(Uu);uf=L(sS,"DIV",{class:!0,style:!0});var vx=R(uf);H1=te(vx,"Year of arrival to live in NI"),Lm=L(vx,"SPAN",{style:!0});var n3=R(Lm);n3.forEach(T),vx.forEach(T),sS.forEach(T),X1=_e(Kv),Rm=L(Kv,"DIV",{class:!0,id:!0});var lS=R(Rm);Bm=L(lS,"DIV",{class:!0});var gx=R(Bm);W1=te(gx,"The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Om=L(gx,"A",{href:!0,class:!0});var uS=R(Om);Hg=L(uS,"STRONG",{});var cS=R(Hg);Y1=te(cS,"Statistical bulletins"),cS.forEach(T),uS.forEach(T),gx.forEach(T),lS.forEach(T),J1=_e(Kv),qt(sd.$$.fragment,Kv),Kv.forEach(T),Q1=_e(Zv),Xg=L(Zv,"DIV",{class:!0});var a3=R(Xg);a3.forEach(T),Zv.forEach(T),gy.forEach(T),tS.forEach(T),q_.forEach(T),nn.forEach(T),this.h()},h(){S(x,"href",$h+"/"),S(x,"sveltekit:noscroll",""),S(x,"class","svelte-p0yy5r"),o.a=P,S(y,"class","text-small"),S(U,"class","text-big title svelte-p0yy5r"),S(we,"class","text-bold"),ie(we,"font-size","0.85em"),S(ur,"class","btn svelte-p0yy5r"),ie(ur,"width","33%"),S(ur,"title","Click to print this page to pdf or printer"),S(ur,"onclick","window.print();return false;"),S(kr,"class","btn svelte-p0yy5r"),ie(kr,"width","33%"),S(kr,"alt","Return to the landing page"),S(kr,"onclick","window.location.href='"+$h+"';"),S(dr,"class","btn svelte-p0yy5r"),ie(dr,"width","30%"),S(dr,"type","share"),S(dr,"alt","Share this page"),S(rt,"width","100%"),ie(Je,"width","350px"),ie(Je,"padding-top","5px"),S(Je,"class","svelte-p0yy5r"),Si(Je,"float-right",u[7]>1),S(h,"class","grid mtl svelte-p0yy5r"),ie(ri,"margin","0 0 10px 0"),ie(ri,"line-height","1.78"),S(ri,"class","svelte-p0yy5r"),S(_n,"class","div-grey-box svelte-p0yy5r"),ie(_n,"line-height","1.3"),ie(ui,"color","gray"),ie(ui,"font-size","14pt"),S(Yi,"class","blocktitle"),ie(Yi,"margin","0"),ie(Yi,"width","100%"),S(Lt,"class","row"),ie(Lt,"display","flex"),ie(Lt,"cursor","pointer"),S(Lt,"data-bs-toggle","collapse"),S(Lt,"data-bs-target","#pop-info"),S(Lt,"aria-expanded","false"),S(Lt,"aria-controls","pop-info"),S(bi,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(bi,"class","svelte-p0yy5r"),S(Lr,"class","card card-body svelte-p0yy5r"),S(ki,"class","collapse svelte-p0yy5r"),S(ki,"id","pop-info"),S(Kr,"class","text-big"),ie(Kr,"font-size","2.8em"),S(qr,"class","div-grey-box svelte-p0yy5r"),ie(ua,"color","gray"),ie(ua,"font-size","14pt"),S(bn,"class","blocktitle"),ie(bn,"margin","0"),ie(bn,"width","100%"),S(sn,"class","row"),ie(sn,"display","flex"),ie(sn,"cursor","pointer"),S(sn,"data-bs-toggle","collapse"),S(sn,"data-bs-target","#households-info"),S(sn,"aria-expanded","false"),S(sn,"aria-controls","households-info"),S(ta,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ta,"class","svelte-p0yy5r"),S(xn,"class","card card-body svelte-p0yy5r"),S(Zn,"class","collapse svelte-p0yy5r"),S(Zn,"id","households-info"),S(G,"class","text-big"),ie(G,"font-size","2.8em"),S(ci,"class","div-grey-box svelte-p0yy5r"),S(Mi,"id","grid"),S(Mi,"class","grid mt svelte-p0yy5r"),S(Ne,"class","svelte-p0yy5r"),ie(Se,"grid-column","span "+u[7]),S(Le,"id","map"),ie(Le,"padding-right","45px"),ie(Le,"grid-column","span "+(u[7]==2?2:u[7]&&u[7]>2?u[7]-1:1)),S(Le,"class","svelte-p0yy5r"),S(se,"class","grid mt svelte-p0yy5r"),Xo(()=>u[33].call(se)),S(Qt,"class","accordion-button-title"),S(Pt,"class","accordion-button collapsed"),S(Pt,"type","button"),S(Pt,"data-bs-toggle","collapse"),S(Pt,"data-bs-target","#panelsStayOpen-collapseZero"),S(Pt,"aria-expanded","false"),S(Pt,"aria-controls","panelsStayOpen-collapseZero"),S(sr,"class","accordion-header svelte-p0yy5r"),S(sr,"id","panelsStayOpen-headingZero"),S(pa,"class","accordion-button-title-sub"),ie(Hr,"color","gray"),ie(Hr,"font-size","14pt"),S(Gn,"class","blocktitle"),ie(Gn,"margin","0"),ie(Gn,"width","100%"),S(yr,"class","row"),ie(yr,"display","flex"),ie(yr,"cursor","pointer"),S(yr,"data-bs-toggle","collapse"),S(yr,"data-bs-target","#location-info"),S(yr,"aria-expanded","false"),S(yr,"aria-controls","location-info"),S(ln,"class","card card-body svelte-p0yy5r"),S(En,"class","collapse svelte-p0yy5r"),S(En,"id","location-info"),S(Qi,"class","div-grey-box svelte-p0yy5r"),ie(Qi,"line-height","1.3"),ie(ts,"color","gray"),ie(ts,"font-size","14pt"),S(hi,"class","blocktitle"),ie(hi,"margin","0"),ie(hi,"width","100%"),S(Ri,"class","row"),ie(Ri,"display","flex"),ie(Ri,"cursor","pointer"),S(Ri,"data-bs-toggle","collapse"),S(Ri,"data-bs-target","#Area-info"),S(Ri,"aria-expanded","false"),S(Ri,"aria-controls","Area-info"),S(rs,"class","card card-body svelte-p0yy5r"),S(cl,"class","collapse svelte-p0yy5r"),S(cl,"id","Area-info"),S(is,"class","text-big"),ie(is,"font-size","2.8em"),S(Xr,"class","div-grey-box svelte-p0yy5r"),ie(Zi,"color","gray"),ie(Zi,"font-size","14pt"),S(Kn,"class","blocktitle"),ie(Kn,"margin","0"),ie(Kn,"width","100%"),S(Ii,"class","row"),ie(Ii,"display","flex"),ie(Ii,"cursor","pointer"),S(Ii,"data-bs-toggle","collapse"),S(Ii,"data-bs-target","#popden-info"),S(Ii,"aria-expanded","false"),S(Ii,"aria-controls","popden-info"),S(Cn,"class","card card-body svelte-p0yy5r"),S(fa,"class","collapse svelte-p0yy5r"),S(fa,"id","popden-info"),S($l,"class","text-big"),ie($l,"font-size","2.8em"),S(Sn,"class","div-grey-box svelte-p0yy5r"),S(wn,"class","grid mt svelte-p0yy5r"),Xo(()=>u[34].call(wn)),S(mr,"class","accordion-body"),S($t,"id","panelsStayOpen-collapseZero"),S($t,"class","accordion-collapse collapse svelte-p0yy5r"),S($t,"aria-labelledby","panelsStayOpen-headingZero"),S(Gt,"class","accordion-item"),S(jc,"class","accordion-button-title"),S(_o,"class","accordion-button collapsed"),S(_o,"type","button"),S(_o,"data-bs-toggle","collapse"),S(_o,"data-bs-target","#panelsStayOpen-collapseOne"),S(_o,"aria-expanded","false"),S(_o,"aria-controls","panelsStayOpen-collapseOne"),S(eu,"class","accordion-header svelte-p0yy5r"),S(eu,"id","panelsStayOpen-headingOne"),S(xo,"class","accordion-button-title-sub"),ie(Wu,"color","gray"),ie(Wu,"font-size","14pt"),S(Ds,"class","blocktitle"),ie(Ds,"margin","0"),ie(Ds,"width","100%"),S(Ja,"class","row"),ie(Ja,"display","flex"),ie(Ja,"cursor","pointer"),S(Ja,"data-bs-toggle","collapse"),S(Ja,"data-bs-target","#broadagebands-info"),S(Ja,"aria-expanded","false"),S(Ja,"aria-controls","broadagebands-info"),S(Qa,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Qa,"class","svelte-p0yy5r"),S(ru,"class","card card-body svelte-p0yy5r"),S(tu,"class","collapse svelte-p0yy5r"),S(tu,"id","broadagebands-info"),S(yl,"class","chart svelte-p0yy5r"),ie(yl,"height","100px"),ie(yl,"padding-bottom","5px"),S($i,"class","div-grey-box svelte-p0yy5r"),S(Ir,"class","blocktitle"),ie(Ir,"margin","0"),ie(Ir,"width","100%"),S(Eo,"class","div-grey-box svelte-p0yy5r"),ie(os,"color","gray"),ie(os,"font-size","14pt"),S(So,"class","blocktitle"),ie(So,"margin","0"),ie(So,"width","100%"),S(eo,"class","row"),ie(eo,"display","flex"),ie(eo,"cursor","pointer"),S(eo,"data-bs-toggle","collapse"),S(eo,"data-bs-target","#hhsize-info"),S(eo,"aria-expanded","false"),S(eo,"aria-controls","hhsize-info"),S(ia,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ia,"class","svelte-p0yy5r"),S(nu,"class","card card-body svelte-p0yy5r"),S(ko,"class","collapse svelte-p0yy5r"),S(ko,"id","hhsize-info"),S(Ls,"class","div-grey-box svelte-p0yy5r"),S(Dn,"class","grid mt svelte-p0yy5r"),Xo(()=>u[35].call(Dn)),S(ii,"class","accordion-body"),S(pl,"id","panelsStayOpen-collapseOne"),S(pl,"class","accordion-collapse collapse svelte-p0yy5r"),S(pl,"aria-labelledby","panelsStayOpen-headingOne"),S(Ps,"class","accordion-item"),S(gl,"class","accordion-button-title"),S(ss,"class","accordion-button collapsed"),S(ss,"type","button"),S(ss,"data-bs-toggle","collapse"),S(ss,"data-bs-target","#panelsStayOpen-collapseTwo"),S(ss,"aria-expanded","false"),S(ss,"aria-controls","panelsStayOpen-collapseTwo"),S(Bs,"class","accordion-header svelte-p0yy5r"),S(Bs,"id","panelsStayOpen-headingTwo"),ie(zr,"color","gray"),ie(zr,"font-size","14pt"),S(da,"class","blocktitle"),ie(da,"margin","0"),ie(da,"width","100%"),S(Hn,"class","row"),ie(Hn,"display","flex"),ie(Hn,"cursor","pointer"),S(Hn,"data-bs-toggle","collapse"),S(Hn,"data-bs-target","#cob-info"),S(Hn,"aria-expanded","false"),S(Hn,"aria-controls","cob-info"),S(ec,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ec,"class","svelte-p0yy5r"),S(ls,"class","card card-body svelte-p0yy5r"),S(To,"class","collapse svelte-p0yy5r"),S(To,"id","cob-info"),S(to,"class","div-grey-box svelte-p0yy5r"),ie(Os,"color","gray"),ie(Os,"font-size","14pt"),S(ot,"class","blocktitle"),ie(ot,"margin","0"),ie(ot,"width","100%"),S(Br,"class","row"),ie(Br,"display","flex"),ie(Br,"cursor","pointer"),S(Br,"data-bs-toggle","collapse"),S(Br,"data-bs-target","#passport-info"),S(Br,"aria-expanded","false"),S(Br,"aria-controls","passport-info"),S(El,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(El,"class","svelte-p0yy5r"),S(wl,"class","card card-body svelte-p0yy5r"),S(kn,"class","collapse svelte-p0yy5r"),S(kn,"id","passport-info"),S(cs,"class","div-grey-box svelte-p0yy5r"),ie(hs,"color","gray"),ie(hs,"font-size","14pt"),S(Xn,"class","blocktitle"),ie(Xn,"font-size","1.02em"),ie(Xn,"margin","0"),ie(Xn,"width","100%"),S(Ti,"class","row"),ie(Ti,"display","flex"),ie(Ti,"cursor","pointer"),S(Ti,"data-bs-toggle","collapse"),S(Ti,"data-bs-target","#natid-info"),S(Ti,"aria-expanded","false"),S(Ti,"aria-controls","natid-info"),S(ya,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ya,"class","svelte-p0yy5r"),S(Mn,"class","card card-body svelte-p0yy5r"),S(na,"class","collapse svelte-p0yy5r"),S(na,"id","natid-info"),S(no,"class","div-grey-box svelte-p0yy5r"),S(vr,"class","grid mt svelte-p0yy5r"),Xo(()=>u[36].call(vr)),S(ou,"class","accordion-button-title-sub"),S(Io,"class","accordion-body"),S(_l,"id","panelsStayOpen-collapseTwo"),S(_l,"class","accordion-collapse collapse svelte-p0yy5r"),S(_l,"aria-labelledby","panelsStayOpen-headingTwo"),S(Rs,"class","accordion-item"),S(kl,"class","accordion-button-title"),S(ct,"class","accordion-button collapsed"),S(ct,"type","button"),S(ct,"data-bs-toggle","collapse"),S(ct,"data-bs-target","#panelsStayOpen-collapseThree"),S(ct,"aria-expanded","false"),S(ct,"aria-controls","panelsStayOpen-collapseThree"),S(gt,"class","accordion-header svelte-p0yy5r"),S(gt,"id","panelsStayOpen-headingThree"),S(ic,"class","accordion-button-title-sub"),ie(Po,"color","gray"),ie(Po,"font-size","14pt"),S(Jn,"class","blocktitle"),ie(Jn,"margin","0"),ie(Jn,"width","100%"),S(aa,"class","row"),ie(aa,"display","flex"),ie(aa,"cursor","pointer"),S(aa,"data-bs-toggle","collapse"),S(aa,"data-bs-target","#mainlang-info"),S(aa,"aria-expanded","false"),S(aa,"aria-controls","mainlang-info"),S(Fa,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Fa,"class","svelte-p0yy5r"),S(oo,"class","card card-body svelte-p0yy5r"),S(Co,"class","collapse svelte-p0yy5r"),S(Co,"id","mainlang-info"),S(Gi,"class","div-grey-box svelte-p0yy5r"),ie(s,"color","gray"),ie(s,"font-size","14pt"),S(Mo,"class","blocktitle"),ie(Mo,"margin","0"),ie(Mo,"width","100%"),S(Ua,"class","row"),ie(Ua,"display","flex"),ie(Ua,"cursor","pointer"),S(Ua,"data-bs-toggle","collapse"),S(Ua,"data-bs-target","#irish-info"),S(Ua,"aria-expanded","false"),S(Ua,"aria-controls","irish-info"),S(A,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(A,"class","svelte-p0yy5r"),S(E,"class","card card-body svelte-p0yy5r"),S(m,"class","collapse svelte-p0yy5r"),S(m,"id","irish-info"),S(Na,"class","div-grey-box svelte-p0yy5r"),ie(me,"color","gray"),ie(me,"font-size","14pt"),S(de,"class","blocktitle"),ie(de,"margin","0"),ie(de,"width","100%"),S(ae,"class","row"),ie(ae,"display","flex"),ie(ae,"cursor","pointer"),S(ae,"data-bs-toggle","collapse"),S(ae,"data-bs-target","#ulster-info"),S(ae,"aria-expanded","false"),S(ae,"aria-controls","ulster-info"),S(je,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(je,"class","svelte-p0yy5r"),S(Me,"class","card card-body svelte-p0yy5r"),S(Re,"class","collapse svelte-p0yy5r"),S(Re,"id","ulster-info"),S(ue,"class","div-grey-box svelte-p0yy5r"),S(pn,"class","grid mt svelte-p0yy5r"),Xo(()=>u[37].call(pn)),S(Tn,"class","accordion-body"),S(Ai,"id","panelsStayOpen-collapseThree"),S(Ai,"class","accordion-collapse collapse svelte-p0yy5r"),S(Ai,"aria-labelledby","panelsStayOpen-headingThree"),S(zo,"class","accordion-item"),S(Nt,"class","accordion-button-title"),S(Tt,"class","accordion-button collapsed"),S(Tt,"type","button"),S(Tt,"data-bs-toggle","collapse"),S(Tt,"data-bs-target","#panelsStayOpen-collapseFour"),S(Tt,"aria-expanded","false"),S(Tt,"aria-controls","panelsStayOpen-collapseFour"),S(st,"class","accordion-header svelte-p0yy5r"),S(st,"id","panelsStayOpen-headingFour"),S(Vi,"class","accordion-button-title-sub"),ie(Qn,"color","gray"),ie(Qn,"font-size","14pt"),S(Ki,"class","blocktitle"),ie(Ki,"margin","0"),ie(Ki,"width","100%"),S(Bn,"class","row"),ie(Bn,"display","flex"),ie(Bn,"cursor","pointer"),S(Bn,"data-bs-toggle","collapse"),S(Bn,"data-bs-target","#rel-info"),S(Bn,"aria-expanded","false"),S(Bn,"aria-controls","rel-info"),S(ga,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ga,"class","svelte-p0yy5r"),S(Lo,"class","card card-body svelte-p0yy5r"),S(qa,"class","collapse svelte-p0yy5r"),S(qa,"id","rel-info"),S(Pi,"class","div-grey-box svelte-p0yy5r"),ie(lo,"color","gray"),ie(lo,"font-size","14pt"),S(fn,"class","blocktitle"),ie(fn,"margin","0"),ie(fn,"width","100%"),S(er,"class","row"),ie(er,"display","flex"),ie(er,"cursor","pointer"),S(er,"data-bs-toggle","collapse"),S(er,"data-bs-target","#relbup-info"),S(er,"aria-expanded","false"),S(er,"aria-controls","relbup-info"),S(Bo,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Bo,"class","svelte-p0yy5r"),S(ps,"class","card card-body svelte-p0yy5r"),S(ac,"class","collapse svelte-p0yy5r"),S(ac,"id","relbup-info"),S(ba,"class","div-grey-box svelte-p0yy5r"),ie(vp,"color","gray"),ie(vp,"font-size","14pt"),S(sc,"class","blocktitle"),ie(sc,"margin","0"),ie(sc,"width","100%"),S(Ns,"class","row"),ie(Ns,"display","flex"),ie(Ns,"cursor","pointer"),S(Ns,"data-bs-toggle","collapse"),S(Ns,"data-bs-target","#ethnic-info"),S(Ns,"aria-expanded","false"),S(Ns,"aria-controls","ethnic-info"),S(zl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(zl,"class","svelte-p0yy5r"),S(eh,"class","card card-body svelte-p0yy5r"),S(hu,"class","collapse svelte-p0yy5r"),S(hu,"id","ethnic-info"),S(Al,"class","div-grey-box svelte-p0yy5r"),S(Ei,"class","grid mt svelte-p0yy5r"),Xo(()=>u[38].call(Ei)),S(xt,"class","accordion-body"),S(Vt,"id","panelsStayOpen-collapseFour"),S(Vt,"class","accordion-collapse collapse svelte-p0yy5r"),S(Vt,"aria-labelledby","panelsStayOpen-headingFour"),S(rr,"class","accordion-item"),S(Cl,"class","accordion-button-title"),S(Pl,"class","accordion-button collapsed"),S(Pl,"type","button"),S(Pl,"data-bs-toggle","collapse"),S(Pl,"data-bs-target","#panelsStayOpen-collapseFive"),S(Pl,"aria-expanded","false"),S(Pl,"aria-controls","panelsStayOpen-collapseFive"),S(lc,"class","accordion-header svelte-p0yy5r"),S(lc,"id","panelsStayOpen-headingFive"),S(gp,"class","accordion-button-title-sub"),ie(bp,"color","gray"),ie(bp,"font-size","14pt"),S(du,"class","blocktitle"),ie(du,"margin","0"),ie(du,"width","100%"),S(ja,"class","row"),ie(ja,"display","flex"),ie(ja,"cursor","pointer"),S(ja,"data-bs-toggle","collapse"),S(ja,"data-bs-target","#gen-health-info"),S(ja,"aria-expanded","false"),S(ja,"aria-controls","gen-health"),S(Ep,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ep,"class","svelte-p0yy5r"),S(wp,"class","card card-body svelte-p0yy5r"),S(xp,"class","collapse svelte-p0yy5r"),S(xp,"id","gen-health-info"),S(fu,"class","div-grey-box svelte-p0yy5r"),ie(Sp,"color","gray"),ie(Sp,"font-size","14pt"),S(mu,"class","blocktitle"),ie(mu,"font-size","0.87em"),ie(mu,"margin","0"),ie(mu,"width","100%"),S(qs,"class","row"),ie(qs,"display","flex"),ie(qs,"cursor","pointer"),S(qs,"data-bs-toggle","collapse"),S(qs,"data-bs-target","#lti-info"),S(qs,"aria-expanded","false"),S(qs,"aria-controls","lti-info"),S(Tp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Tp,"class","svelte-p0yy5r"),S(Ip,"class","card card-body svelte-p0yy5r"),S(za,"class","collapse svelte-p0yy5r"),S(za,"id","lti-info"),S(Ml,"class","div-grey-box svelte-p0yy5r"),ie(uh,"color","gray"),ie(uh,"font-size","14pt"),S(Ci,"class","blocktitle"),ie(Ci,"font-size","1.02em"),ie(Ci,"margin","0"),ie(Ci,"width","100%"),S(ds,"class","row"),ie(ds,"display","flex"),ie(ds,"cursor","pointer"),S(ds,"data-bs-toggle","collapse"),S(ds,"data-bs-target","#lt-cond-info"),S(ds,"aria-expanded","false"),S(ds,"aria-controls","lt-cond-info"),S(ch,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ch,"class","svelte-p0yy5r"),S(zp,"class","card card-body svelte-p0yy5r"),S(Ap,"class","collapse svelte-p0yy5r"),S(Ap,"id","lt-cond-info"),S(yu,"class","div-grey-box svelte-p0yy5r"),ie(js,"color","gray"),ie(js,"font-size","14pt"),S(Ll,"class","blocktitle"),ie(Ll,"font-size","1.02em"),ie(Ll,"margin","0"),ie(Ll,"width","100%"),S(fr,"class","row"),ie(fr,"display","flex"),ie(fr,"cursor","pointer"),S(fr,"data-bs-toggle","collapse"),S(fr,"data-bs-target","#unpaid-info"),S(fr,"aria-expanded","false"),S(fr,"aria-controls","unpaid-info"),S(Mp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Mp,"class","svelte-p0yy5r"),S(Dp,"class","card card-body svelte-p0yy5r"),S(Cp,"class","collapse svelte-p0yy5r"),S(Cp,"id","unpaid-info"),S(ms,"class","div-grey-box svelte-p0yy5r"),S(Aa,"class","grid mt svelte-p0yy5r"),Xo(()=>u[39].call(Aa)),S(Us,"class","accordion-body"),S(Dl,"id","panelsStayOpen-collapseFive"),S(Dl,"class","accordion-collapse collapse svelte-p0yy5r"),S(Dl,"aria-labelledby","panelsStayOpen-headingFive"),S(rh,"class","accordion-item"),S(Tf,"class","accordion-button-title"),S(Bl,"class","accordion-button collapsed"),S(Bl,"type","button"),S(Bl,"data-bs-toggle","collapse"),S(Bl,"data-bs-target","#panelsStayOpen-collapseSix"),S(Bl,"aria-expanded","false"),S(Bl,"aria-controls","panelsStayOpen-collapseSix"),S(Lp,"class","accordion-header svelte-p0yy5r"),S(Lp,"id","panelsStayOpen-headingSix"),S(pc,"class","accordion-button-title-sub"),ie(Rp,"color","gray"),ie(Rp,"font-size","14pt"),S(Ol,"class","blocktitle"),ie(Ol,"margin","0"),ie(Ol,"width","100%"),S(ys,"class","row"),ie(ys,"display","flex"),ie(ys,"cursor","pointer"),S(ys,"data-bs-toggle","collapse"),S(ys,"data-bs-target","#acc-type-info"),S(ys,"aria-expanded","false"),S(ys,"aria-controls","acc-type-info"),S(Bp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Bp,"class","svelte-p0yy5r"),S(dh,"class","card card-body svelte-p0yy5r"),S(fc,"class","collapse svelte-p0yy5r"),S(fc,"id","acc-type-info"),S(gu,"class","div-grey-box svelte-p0yy5r"),ie(mh,"color","gray"),ie(mh,"font-size","14pt"),S(bu,"class","blocktitle"),ie(bu,"margin","0"),ie(bu,"width","100%"),S(vs,"class","row"),ie(vs,"display","flex"),ie(vs,"cursor","pointer"),S(vs,"data-bs-toggle","collapse"),S(vs,"data-bs-target","#adapt-info"),S(vs,"aria-expanded","false"),S(vs,"aria-controls","adapt-info"),S(Op,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Op,"class","svelte-p0yy5r"),S(Gs,"class","card card-body svelte-p0yy5r"),S(xu,"class","collapse svelte-p0yy5r"),S(xu,"id","adapt-info"),S(_u,"class","div-grey-box svelte-p0yy5r"),ie(Vp,"color","gray"),ie(Vp,"font-size","14pt"),S(yc,"class","blocktitle"),ie(yc,"margin","0"),ie(yc,"width","100%"),S(gs,"class","row"),ie(gs,"display","flex"),ie(gs,"cursor","pointer"),S(gs,"data-bs-toggle","collapse"),S(gs,"data-bs-target","#heat-info"),S(gs,"aria-expanded","false"),S(gs,"aria-controls","heat-info"),S(xr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(xr,"class","svelte-p0yy5r"),S(Ks,"class","card card-body svelte-p0yy5r"),S(Fp,"class","collapse svelte-p0yy5r"),S(Fp,"id","heat-info"),S(Vl,"class","div-grey-box svelte-p0yy5r"),ie(Up,"color","gray"),ie(Up,"font-size","14pt"),S(vc,"class","blocktitle"),ie(vc,"margin","0"),ie(vc,"width","100%"),S(Xs,"class","row"),ie(Xs,"display","flex"),ie(Xs,"cursor","pointer"),S(Xs,"data-bs-toggle","collapse"),S(Xs,"data-bs-target","#renew-info"),S(Xs,"aria-expanded","false"),S(Xs,"aria-controls","renew-info"),S(_s,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(_s,"class","svelte-p0yy5r"),S(bh,"class","card card-body svelte-p0yy5r"),S(_h,"class","collapse svelte-p0yy5r"),S(_h,"id","renew-info"),S(Hs,"class","div-grey-box svelte-p0yy5r"),ie(xs,"color","gray"),ie(xs,"font-size","14pt"),S(wu,"class","blocktitle"),ie(wu,"margin","0"),ie(wu,"width","100%"),S(bs,"class","row"),ie(bs,"display","flex"),ie(bs,"cursor","pointer"),S(bs,"data-bs-toggle","collapse"),S(bs,"data-bs-target","#tenure-info"),S(bs,"aria-expanded","false"),S(bs,"aria-controls","tenure-info"),S(Eu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Eu,"class","svelte-p0yy5r"),S(Nl,"class","card card-body svelte-p0yy5r"),S(di,"class","collapse svelte-p0yy5r"),S(di,"id","tenure-info"),S(Fl,"class","div-grey-box svelte-p0yy5r"),ie(Sh,"color","gray"),ie(Sh,"font-size","14pt"),S(mi,"class","blocktitle"),ie(mi,"margin","0"),ie(mi,"width","100%"),S(Ws,"class","row"),ie(Ws,"display","flex"),ie(Ws,"cursor","pointer"),S(Ws,"data-bs-toggle","collapse"),S(Ws,"data-bs-target","#car-info"),S(Ws,"aria-expanded","false"),S(Ws,"aria-controls","car-info"),S(d,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(d,"class","svelte-p0yy5r"),S(l,"class","card card-body svelte-p0yy5r"),S(i,"class","collapse svelte-p0yy5r"),S(i,"id","car-info"),S(ws,"class","div-grey-box svelte-p0yy5r"),S($n,"class","grid mt svelte-p0yy5r"),Xo(()=>u[40].call($n)),S(uo,"class","accordion-body"),S(Zs,"id","panelsStayOpen-collapseSix"),S(Zs,"class","accordion-collapse collapse svelte-p0yy5r"),S(Zs,"aria-labelledby","panelsStayOpen-headingSix"),S(hc,"class","accordion-item"),S(fe,"class","accordion-button-title"),S(ye,"class","accordion-button collapsed"),S(ye,"type","button"),S(ye,"data-bs-toggle","collapse"),S(ye,"data-bs-target","#panelsStayOpen-collapseSeven"),S(ye,"aria-expanded","false"),S(ye,"aria-controls","panelsStayOpen-collapseSeven"),S(le,"class","accordion-header svelte-p0yy5r"),S(le,"id","panelsStayOpen-headingSeven"),S(it,"class","accordion-button-title-sub"),ie(ir,"color","gray"),ie(ir,"font-size","14pt"),S(Kt,"class","blocktitle"),ie(Kt,"margin","0"),ie(Kt,"width","100%"),S(ut,"class","row"),ie(ut,"display","flex"),ie(ut,"cursor","pointer"),S(ut,"data-bs-toggle","collapse"),S(ut,"data-bs-target","#dep-child-info"),S(ut,"aria-expanded","false"),S(ut,"aria-controls","dep-child-info"),S(Vr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Vr,"class","svelte-p0yy5r"),S(Yr,"class","card card-body svelte-p0yy5r"),S(Or,"class","collapse svelte-p0yy5r"),S(Or,"id","dep-child-info"),S(wt,"class","div-grey-box svelte-p0yy5r"),ie(Sr,"color","gray"),ie(Sr,"font-size","14pt"),S(vi,"class","blocktitle"),ie(vi,"margin","0"),ie(vi,"width","100%"),S(Mr,"class","row"),ie(Mr,"display","flex"),ie(Mr,"cursor","pointer"),S(Mr,"data-bs-toggle","collapse"),S(Mr,"data-bs-target","#hh-comp-info"),S(Mr,"aria-expanded","false"),S(Mr,"aria-controls","hh-comp-info"),S(si,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(si,"class","svelte-p0yy5r"),S(Wi,"class","card card-body svelte-p0yy5r"),S(yn,"class","collapse svelte-p0yy5r"),S(yn,"id","hh-comp-info"),S(Di,"class","div-grey-box svelte-p0yy5r"),S(gi,"class","div-white-box"),S(Dt,"class","grid mt svelte-p0yy5r"),Xo(()=>u[41].call(Dt)),S(De,"class","accordion-body"),S(Ce,"id","panelsStayOpen-collapseSeven"),S(Ce,"class","accordion-collapse collapse svelte-p0yy5r"),S(Ce,"aria-labelledby","panelsStayOpen-headingSeven"),S(ne,"class","accordion-item"),S(Vo,"class","accordion-button-title"),S(Ka,"class","accordion-button collapsed"),S(Ka,"type","button"),S(Ka,"data-bs-toggle","collapse"),S(Ka,"data-bs-target","#panelsStayOpen-collapseEight"),S(Ka,"aria-expanded","false"),S(Ka,"aria-controls","panelsStayOpen-collapseEight"),S(Ss,"class","accordion-header svelte-p0yy5r"),S(Ss,"id","panelsStayOpen-headingEight"),S(jl,"class","accordion-button-title-sub"),ie(Zl,"color","gray"),ie(Zl,"font-size","14pt"),S(Fo,"class","blocktitle"),ie(Fo,"font-size","0.95em"),ie(Fo,"margin","0"),ie(Fo,"width","100%"),S(Xa,"class","row"),ie(Xa,"display","flex"),ie(Xa,"cursor","pointer"),S(Xa,"data-bs-toggle","collapse"),S(Xa,"data-bs-target","#marital-info"),S(Xa,"aria-expanded","false"),S(Xa,"aria-controls","marital-info"),S(el,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(el,"class","svelte-p0yy5r"),S($s,"class","card card-body svelte-p0yy5r"),S(Iu,"class","collapse svelte-p0yy5r"),S(Iu,"id","marital-info"),S(Is,"class","div-grey-box svelte-p0yy5r"),S(Vf,"class","div-white-box"),S(Ff,"class","div-white-box"),S(Ha,"class","grid mt svelte-p0yy5r"),Xo(()=>u[42].call(Ha)),S(co,"class","accordion-body"),S(ks,"id","panelsStayOpen-collapseEight"),S(ks,"class","accordion-collapse collapse svelte-p0yy5r"),S(ks,"aria-labelledby","panelsStayOpen-headingEight"),S(Es,"class","accordion-item"),S(Nf,"class","accordion-button-title"),S(Fn,"class","accordion-button collapsed"),S(Fn,"type","button"),S(Fn,"data-bs-toggle","collapse"),S(Fn,"data-bs-target","#panelsStayOpen-collapseNine"),S(Fn,"aria-expanded","false"),S(Fn,"aria-controls","panelsStayOpen-collapseNine"),S(ti,"class","accordion-header svelte-p0yy5r"),S(ti,"id","panelsStayOpen-headingNine"),S(xc,"class","accordion-button-title-sub"),ie(Ph,"color","gray"),ie(Ph,"font-size","14pt"),S(Au,"class","blocktitle"),ie(Au,"margin","0"),ie(Au,"width","100%"),S(As,"class","row"),ie(As,"display","flex"),ie(As,"cursor","pointer"),S(As,"data-bs-toggle","collapse"),S(As,"data-bs-target","#sexual-orientation-info"),S(As,"aria-expanded","false"),S(As,"aria-controls","sexual-orientation-info"),S(Dh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Dh,"class","svelte-p0yy5r"),S(Wa,"class","card card-body svelte-p0yy5r"),S(Ch,"class","collapse svelte-p0yy5r"),S(Ch,"id","sexual-orientation-info"),S(Gl,"class","div-grey-box svelte-p0yy5r"),S(jf,"class","div-white-box"),S(Zf,"class","div-white-box"),S(Ca,"class","grid mt svelte-p0yy5r"),Xo(()=>u[43].call(Ca)),S(No,"class","accordion-body"),S(bc,"id","panelsStayOpen-collapseNine"),S(bc,"class","accordion-collapse collapse svelte-p0yy5r"),S(bc,"aria-labelledby","panelsStayOpen-headingNine"),S(tl,"class","accordion-item"),S(Bh,"class","accordion-button-title"),S(il,"class","accordion-button collapsed"),S(il,"type","button"),S(il,"data-bs-toggle","collapse"),S(il,"data-bs-target","#panelsStayOpen-collapseTen"),S(il,"aria-expanded","false"),S(il,"aria-controls","panelsStayOpen-collapseTen"),S(ho,"class","accordion-header svelte-p0yy5r"),S(ho,"id","panelsStayOpen-headingTen"),S(Wp,"class","accordion-button-title-sub"),ie(Yp,"color","gray"),ie(Yp,"font-size","14pt"),S(wc,"class","blocktitle"),ie(wc,"margin","0"),ie(wc,"width","100%"),S(al,"class","row"),ie(al,"display","flex"),ie(al,"cursor","pointer"),S(al,"data-bs-toggle","collapse"),S(al,"data-bs-target","#quals-info"),S(al,"aria-expanded","false"),S(al,"aria-controls","quals-info"),S(Wd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Wd,"class","svelte-p0yy5r"),S(Qr,"class","card card-body svelte-p0yy5r"),S(Jp,"class","collapse svelte-p0yy5r"),S(Jp,"id","quals-info"),S(Cu,"class","div-grey-box svelte-p0yy5r"),ie(Yd,"color","gray"),ie(Yd,"font-size","14pt"),S($p,"class","blocktitle"),ie($p,"margin","0"),ie($p,"width","100%"),S(Du,"class","row"),ie(Du,"display","flex"),ie(Du,"cursor","pointer"),S(Du,"data-bs-toggle","collapse"),S(Du,"data-bs-target","#econ-act-info"),S(Du,"aria-expanded","false"),S(Du,"aria-controls","econ-act-info"),S($d,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S($d,"class","svelte-p0yy5r"),S(Qd,"class","card card-body svelte-p0yy5r"),S(Jd,"class","collapse svelte-p0yy5r"),S(Jd,"id","econ-act-info"),S(Oh,"class","div-grey-box svelte-p0yy5r"),ie(em,"color","gray"),ie(em,"font-size","14pt"),S(ef,"class","blocktitle"),ie(ef,"margin","0"),ie(ef,"width","100%"),S(Mu,"class","row"),ie(Mu,"display","flex"),ie(Mu,"cursor","pointer"),S(Mu,"data-bs-toggle","collapse"),S(Mu,"data-bs-target","#hours-info"),S(Mu,"aria-expanded","false"),S(Mu,"aria-controls","hours-info"),S(im,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(im,"class","svelte-p0yy5r"),S(rm,"class","card card-body svelte-p0yy5r"),S(tm,"class","collapse svelte-p0yy5r"),S(tm,"id","hours-info"),S(Vh,"class","div-grey-box svelte-p0yy5r"),ie(nm,"color","gray"),ie(nm,"font-size","14pt"),S(tf,"class","blocktitle"),ie(tf,"margin","0"),ie(tf,"width","100%"),S(Lu,"class","row"),ie(Lu,"display","flex"),ie(Lu,"cursor","pointer"),S(Lu,"data-bs-toggle","collapse"),S(Lu,"data-bs-target","#industry-info"),S(Lu,"aria-expanded","false"),S(Lu,"aria-controls","industry-info"),S(sm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(sm,"class","svelte-p0yy5r"),S(om,"class","card card-body svelte-p0yy5r"),S(am,"class","collapse svelte-p0yy5r"),S(am,"id","industry-info"),S(Fh,"class","div-grey-box svelte-p0yy5r"),ie(lm,"color","gray"),ie(lm,"font-size","14pt"),S(rf,"class","blocktitle"),ie(rf,"margin","0"),ie(rf,"width","100%"),S(Ru,"class","row"),ie(Ru,"display","flex"),ie(Ru,"cursor","pointer"),S(Ru,"data-bs-toggle","collapse"),S(Ru,"data-bs-target","#occupation-info"),S(Ru,"aria-expanded","false"),S(Ru,"aria-controls","occupation-info"),S(hm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(hm,"class","svelte-p0yy5r"),S(cm,"class","card card-body svelte-p0yy5r"),S(um,"class","collapse svelte-p0yy5r"),S(um,"id","occupation-info"),S(Nh,"class","div-grey-box svelte-p0yy5r"),S(xa,"class","grid mt svelte-p0yy5r"),Xo(()=>u[44].call(xa)),S(nl,"class","accordion-body"),S(Pu,"id","panelsStayOpen-collapseTen"),S(Pu,"class","accordion-collapse collapse svelte-p0yy5r"),S(Pu,"aria-labelledby","panelsStayOpen-headingTen"),S(zu,"class","accordion-item"),S(Yy,"class","accordion-button-title"),S(Ec,"class","accordion-button collapsed"),S(Ec,"type","button"),S(Ec,"data-bs-toggle","collapse"),S(Ec,"data-bs-target","#panelsStayOpen-collapseEleven"),S(Ec,"aria-expanded","false"),S(Ec,"aria-controls","panelsStayOpen-collapseEleven"),S(pm,"class","accordion-header svelte-p0yy5r"),S(pm,"id","panelsStayOpen-headingEleven"),S(Jy,"class","accordion-button-title-sub"),ie(fm,"color","gray"),ie(fm,"font-size","14pt"),S(nf,"class","blocktitle"),ie(nf,"margin","0"),ie(nf,"width","100%"),S(Bu,"class","row"),ie(Bu,"display","flex"),ie(Bu,"cursor","pointer"),S(Bu,"data-bs-toggle","collapse"),S(Bu,"data-bs-target","#method-travel-work-info"),S(Bu,"aria-expanded","false"),S(Bu,"aria-controls","method-travel-work-info"),S(ym,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ym,"class","svelte-p0yy5r"),S(mm,"class","card card-body svelte-p0yy5r"),S(dm,"class","collapse svelte-p0yy5r"),S(dm,"id","method-travel-work-info"),S(Uh,"class","div-grey-box svelte-p0yy5r"),ie(vm,"color","gray"),ie(vm,"font-size","14pt"),S(af,"class","blocktitle"),ie(af,"margin","0"),ie(af,"width","100%"),S(Ou,"class","row"),ie(Ou,"display","flex"),ie(Ou,"cursor","pointer"),S(Ou,"data-bs-toggle","collapse"),S(Ou,"data-bs-target","#method-travel-study-info"),S(Ou,"aria-expanded","false"),S(Ou,"aria-controls","method-travel-study-info"),S(bm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(bm,"class","svelte-p0yy5r"),S(_m,"class","card card-body svelte-p0yy5r"),S(gm,"class","collapse svelte-p0yy5r"),S(gm,"id","method-travel-study-info"),S(qh,"class","div-grey-box svelte-p0yy5r"),S(qg,"class","div-white-box"),ie(xm,"color","gray"),ie(xm,"font-size","14pt"),S(of,"class","blocktitle"),ie(of,"margin","0"),ie(of,"width","100%"),S(Vu,"class","row"),ie(Vu,"display","flex"),ie(Vu,"cursor","pointer"),S(Vu,"data-bs-toggle","collapse"),S(Vu,"data-bs-target","#distance-travel-work-info"),S(Vu,"aria-expanded","false"),S(Vu,"aria-controls","distance-travel-work-info"),S(Sm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Sm,"class","svelte-p0yy5r"),S(Em,"class","card card-body svelte-p0yy5r"),S(wm,"class","collapse svelte-p0yy5r"),S(wm,"id","distance-travel-work-info"),S(jh,"class","div-grey-box svelte-p0yy5r"),ie(km,"color","gray"),ie(km,"font-size","14pt"),S(sf,"class","blocktitle"),ie(sf,"margin","0"),ie(sf,"width","100%"),S(Fu,"class","row"),ie(Fu,"display","flex"),ie(Fu,"cursor","pointer"),S(Fu,"data-bs-toggle","collapse"),S(Fu,"data-bs-target","#distance-travel-study-info"),S(Fu,"aria-expanded","false"),S(Fu,"aria-controls","distance-travel-study-info"),S(Am,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Am,"class","svelte-p0yy5r"),S(Tm,"class","card card-body svelte-p0yy5r"),S(Im,"class","collapse svelte-p0yy5r"),S(Im,"id","distance-travel-study-info"),S(Zh,"class","div-grey-box svelte-p0yy5r"),S(po,"class","grid mt svelte-p0yy5r"),Xo(()=>u[45].call(po)),S(Sc,"class","accordion-body"),S($f,"id","panelsStayOpen-collapseEleven"),S($f,"class","accordion-collapse collapse svelte-p0yy5r"),S($f,"aria-labelledby","panelsStayOpen-headingEleven"),S(Qf,"class","accordion-item"),S(Qy,"class","accordion-button-title"),S(kc,"class","accordion-button collapsed"),S(kc,"type","button"),S(kc,"data-bs-toggle","collapse"),S(kc,"data-bs-target","#panelsStayOpen-collapseTwelve"),S(kc,"aria-expanded","false"),S(kc,"aria-controls","panelsStayOpen-collapseTwelveTwelve"),S(zm,"class","accordion-header svelte-p0yy5r"),S(zm,"id","panelsStayOpen-headingTwelve"),S($y,"class","accordion-button-title-sub"),ie(Pm,"color","gray"),ie(Pm,"font-size","14pt"),S(lf,"class","blocktitle"),ie(lf,"margin","0"),ie(lf,"width","100%"),S(Nu,"class","row"),ie(Nu,"display","flex"),ie(Nu,"cursor","pointer"),S(Nu,"data-bs-toggle","collapse"),S(Nu,"data-bs-target","#address-1yr-info"),S(Nu,"aria-expanded","false"),S(Nu,"aria-controls","address-1yr-info"),S(Mm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Mm,"class","svelte-p0yy5r"),S(Dm,"class","card card-body svelte-p0yy5r"),S(Cm,"class","collapse svelte-p0yy5r"),S(Cm,"id","address-1yr-info"),S(Gh,"class","div-grey-box svelte-p0yy5r"),ie(Lm,"color","gray"),ie(Lm,"font-size","14pt"),S(uf,"class","blocktitle"),ie(uf,"margin","0"),ie(uf,"width","100%"),S(Uu,"class","row"),ie(Uu,"display","flex"),ie(Uu,"cursor","pointer"),S(Uu,"data-bs-toggle","collapse"),S(Uu,"data-bs-target","#year-arr-info"),S(Uu,"aria-expanded","false"),S(Uu,"aria-controls","year-arr-info"),S(Om,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Om,"class","svelte-p0yy5r"),S(Bm,"class","card card-body svelte-p0yy5r"),S(Rm,"class","collapse svelte-p0yy5r"),S(Rm,"id","year-arr-info"),S(Kh,"class","div-grey-box svelte-p0yy5r"),S(Xg,"class","div-white-box"),S(Hl,"class","grid mt svelte-p0yy5r"),Xo(()=>u[46].call(Hl)),S(Ic,"class","accordion-body"),S(ad,"id","panelsStayOpen-collapseTwelve"),S(ad,"class","accordion-collapse collapse svelte-p0yy5r"),S(ad,"aria-labelledby","panelsStayOpen-headingTwelve"),S(nd,"class","accordion-item"),S(Ze,"class","accordion"),S(Ze,"id","accordionPanelsStayOpenExample")},m(J,ze){Pe(J,h,ze),w(h,f),w(f,y),w(y,x),w(x,_),o.m(z,y),w(y,P),Tc.m(y,null),w(y,F),w(f,V),w(f,j),w(f,U),w(U,he),w(f,Ie),w(f,we),w(we,Oe),Ac.m(we,null),w(we,Ue),qo&&qo.m(we,null),w(we,Bt),zc.m(we,null),w(h,Mt),w(h,mt),w(mt,Je),w(Je,Tr),w(Tr,wr),w(Je,or),jt(kt,Je,null),w(Je,At),w(Je,Pr),w(Pr,Ot),w(Je,Ar),w(Je,rt),w(rt,ur),w(ur,$r),w(rt,li),w(rt,kr),w(kr,vt),w(rt,nt),w(rt,dr),w(dr,Un),Pe(J,la,ze),Pe(J,Mi,ze),w(Mi,_n),w(_n,ri),w(ri,Ia),w(_n,br),Pc.m(_n,null),w(_n,qn),jo&&jo.m(_n,null),w(Mi,Ya),w(Mi,qr),w(qr,Lt),w(Lt,Yi),w(Yi,Ni),w(Yi,ui),ui.innerHTML=fo,w(qr,Wt),w(qr,ki),w(ki,Lr),w(Lr,_i),w(Lr,bi),w(bi,Cr),w(Cr,xi),w(qr,on),w(qr,Kr),w(Kr,jr),w(qr,ea),w(qr,jn),wa&&wa.m(qr,null),w(qr,Ra),Ea&&Ea.m(qr,null),w(Mi,$o),w(Mi,ci),w(ci,sn),w(sn,bn),w(bn,mo),w(bn,ua),ua.innerHTML=ll,w(ci,es),w(ci,Zn),w(Zn,xn),w(xn,ca),w(xn,ta),w(ta,ha),w(ha,Zr),w(ci,N),w(ci,G),w(G,re),w(ci,ce),w(ci,ve),Sa&&Sa.m(ci,null),w(ci,be),ka&&ka.m(ci,null),Pe(J,H,ze),Pe(J,se,ze),w(se,Se),w(Se,Ne),Cc.m(Ne,null),w(se,Ge),w(se,Le),jt(qe,Le,null),w(se,at),w(se,Be),Dc.m(Be,null),w(se,tt),w(se,We),Mc.m(We,null),Qe=Wo(se,u[33].bind(se)),Pe(J,Ft,ze),Pe(J,Ze,ze),w(Ze,Gt),w(Gt,sr),w(sr,Pt),w(Pt,Qt),w(Qt,Jt),w(Gt,Li),w(Gt,$t),w($t,mr),w(mr,pr),w(mr,nr),w(mr,Ui),w(mr,pa),w(pa,wi),w(mr,Ji),w(mr,wn),w(wn,Qi),w(Qi,yr),w(yr,Gn),w(Gn,qi),w(Gn,Hr),Hr.innerHTML=ra,w(Qi,Dr),w(Qi,En),w(En,ln),w(ln,Ku),w(Qi,ji),w(Qi,yo),Lc.m(Qi,null),w(wn,un),w(wn,Xr),w(Xr,Ri),w(Ri,hi),w(hi,vo),w(hi,ts),ts.innerHTML=bd,w(Xr,ul),w(Xr,cl),w(cl,rs),w(rs,ep),w(Xr,Yl),w(Xr,is),w(is,Jl),w(is,hl),w(wn,qc),w(wn,Sn),w(Sn,Ii),w(Ii,Kn),w(Kn,ke),w(Kn,Zi),Zi.innerHTML=Pn,w(Sn,Wr),w(Sn,fa),w(fa,Cn),w(Cn,Bi),w(Sn,Ql),w(Sn,$l),w($l,hf),w(Sn,rp),Zo&&Zo.m(Sn,null),pf=Wo(wn,u[34].bind(wn)),w(Ze,ip),w(Ze,Ps),w(Ps,eu),w(eu,_o),w(_o,jc),w(jc,Hu),w(Ps,Xu),w(Ps,pl),w(pl,ii),w(ii,np),w(ii,ns),w(ii,fl),w(ii,xo),w(xo,Cs),w(ii,dl),w(ii,Dn),w(Dn,$i),w($i,Ja),w(Ja,Ds),w(Ds,Rr),w(Ds,Wu),Wu.innerHTML=ff,w($i,df),w($i,tu),w(tu,ru),w(ru,mf),w(ru,Qa),w(Qa,wo),w(wo,ml),w($i,yf),w($i,yl),jt(Ms,yl,null),w($i,vl),Go&&Go.m($i,null),w($i,ap),w($i,as),jt(Ba,as,null),w(Dn,vf),w(Dn,Eo),w(Eo,Ir),w(Ir,Zc),w(Eo,xd),jt($a,Eo,null),w(Dn,gf),w(Dn,Ls),w(Ls,eo),w(eo,So),w(So,iu),w(So,os),os.innerHTML=_f,w(Ls,Yu),w(Ls,ko),w(ko,nu),w(nu,au),w(nu,ia),w(ia,Gc),w(Gc,bf),w(Ls,xf),jt(Oa,Ls,null),Kc=Wo(Dn,u[35].bind(Dn)),w(Ze,Hc),w(Ze,Rs),w(Rs,Bs),w(Bs,ss),w(ss,gl),w(gl,op),w(Rs,wf),w(Rs,_l),w(_l,Io),w(Io,sp),w(Io,Xc),w(Io,Qu),w(Io,ou),w(ou,bl),w(ou,vr),w(vr,to),w(to,Hn),w(Hn,da),w(da,lr),w(da,zr),zr.innerHTML=ro,w(to,$u),w(to,To),w(To,ls),w(ls,wd),w(ls,ec),w(ec,xl),w(xl,tc),w(to,us),jt(ni,to,null),w(vr,rc),w(vr,cs),w(cs,Br),w(Br,ot),w(ot,ma),w(ot,Os),Os.innerHTML=Wc,w(cs,io),w(cs,kn),w(kn,wl),w(wl,$e),w(wl,El),w(El,su),w(su,lp),w(cs,Va),jt(cn,cs,null),w(vr,Yc),w(vr,no),w(no,Ti),w(Ti,Xn),w(Xn,Ef),w(Xn,hs),hs.innerHTML=Ed,w(no,up),w(no,na),w(na,Mn),w(Mn,tr),w(Mn,ya),w(ya,va),w(va,In),w(no,Sl),jt(Ta,no,null),Ao=Wo(vr,u[36].bind(vr)),w(Ze,Wn),w(Ze,zo),w(zo,gt),w(gt,ct),w(ct,kl),w(kl,Yn),w(zo,ao),w(zo,Ai),w(Ai,Tn),w(Tn,cp),w(Tn,Er),w(Tn,hn),w(Tn,ic),w(ic,Il),w(Tn,hp),w(Tn,pn),w(pn,Gi),w(Gi,aa),w(aa,Jn),w(Jn,Jc),w(Jn,Po),Po.innerHTML=pp,w(Gi,fp),w(Gi,Co),w(Co,oo),w(oo,dp),w(oo,Fa),w(Fa,Do),w(Do,Qc),w(Gi,Vs),jt(Ln,Gi,null),w(pn,mp),w(pn,Na),w(Na,Ua),w(Ua,Mo),w(Mo,n),w(Mo,s),s.innerHTML=a,w(Na,c),w(Na,m),w(m,E),w(E,k),w(E,A),w(A,B),w(B,Z),w(Na,Y),jt(Q,Na,null),w(pn,$),w(pn,ue),w(ue,ae),w(ae,de),w(de,oe),w(de,me),me.innerHTML=xe,w(ue,Te),w(ue,Re),w(Re,Me),w(Me,Ve),w(Me,je),w(je,He),w(He,Xe),w(ue,ht),jt(yt,ue,null),It=Wo(pn,u[37].bind(pn)),w(Ze,Et),w(Ze,rr),w(rr,st),w(st,Tt),w(Tt,Nt),w(Nt,Rt),w(rr,Ct),w(rr,Vt),w(Vt,xt),w(xt,zt),w(xt,pi),w(xt,Rn),w(xt,Vi),w(Vi,fi),w(xt,zi),w(xt,Ei),w(Ei,Pi),w(Pi,Bn),w(Bn,Ki),w(Ki,so),w(Ki,Qn),Qn.innerHTML=yp,w(Pi,uu),w(Pi,qa),w(qa,Lo),w(Lo,nc),w(Lo,ga),w(ga,Tl),w(Tl,Ro),w(Pi,en),jt(_a,Pi,null),w(Ei,Fs),w(Ei,ba),w(ba,er),w(er,fn),w(fn,oa),w(fn,lo),lo.innerHTML=$v,w(ba,$c),w(ba,ac),w(ac,ps),w(ps,Sf),w(ps,Bo),w(Bo,cu),w(cu,Sd),w(ba,oc),jt(dn,ba,null),w(Ei,eg),w(Ei,Al),w(Al,Ns),w(Ns,sc),w(sc,tg),w(sc,vp),vp.innerHTML=rg,w(Al,ig),w(Al,hu),w(hu,eh),w(eh,pu),w(eh,zl),w(zl,kd),w(kd,ng),w(Al,ag),jt(th,Al,null),p_=Wo(Ei,u[38].bind(Ei)),w(Ze,og),w(Ze,rh),w(rh,lc),w(lc,Pl),w(Pl,Cl),w(Cl,sg),w(rh,Hi),w(rh,Dl),w(Dl,Us),w(Us,kf),w(Us,nh),w(Us,Sy),w(Us,gp),w(gp,_p),w(Us,Id),w(Us,Aa),w(Aa,fu),w(fu,ja),w(ja,du),w(du,Td),w(du,bp),bp.innerHTML=lg,w(du,Ad),w(fu,fs),w(fu,xp),w(xp,wp),w(wp,ug),w(wp,Ep),w(Ep,If),w(If,ah),w(fu,cg),jt(oh,fu,null),w(Aa,ky),w(Aa,Ml),w(Ml,qs),w(qs,mu),w(mu,sh),w(mu,Sp),Sp.innerHTML=hg,w(Ml,kp),w(Ml,za),w(za,Ip),w(Ip,pg),w(Ip,Tp),w(Tp,uc),w(uc,Iy),w(Ml,fg),jt(lh,Ml,null),w(Aa,dg),w(Aa,yu),w(yu,ds),w(ds,Ci),w(Ci,mg),w(Ci,uh),uh.innerHTML=f_,w(Ci,yg),w(yu,Ty),w(yu,Ap),w(Ap,zp),w(zp,vg),w(zp,ch),w(ch,zd),w(zd,gg),w(yu,Pp),jt(cc,yu,null),w(Aa,Ay),w(Aa,ms),w(ms,fr),w(fr,Ll),w(Ll,Rl),w(Ll,js),js.innerHTML=d_,w(ms,_g),w(ms,Cp),w(Cp,Dp),w(Dp,bg),w(Dp,Mp),w(Mp,Pd),w(Pd,xg),w(ms,wg),jt(hh,ms,null),Cd=Wo(Aa,u[39].bind(Aa)),w(Ze,ph),w(Ze,hc),w(hc,Lp),w(Lp,Bl),w(Bl,Tf),w(Tf,zy),w(hc,Af),w(hc,Zs),w(Zs,uo),w(uo,Za),w(uo,On),w(uo,zf),w(uo,pc),w(pc,Pa),w(uo,Py),w(uo,$n),w($n,gu),w(gu,ys),w(ys,Ol),w(Ol,Dd),w(Ol,Rp),Rp.innerHTML=m_,w(gu,fh),w(gu,fc),w(fc,dh),w(dh,Cy),w(dh,Bp),w(Bp,Pf),w(Pf,Dy),w(gu,My),jt(dc,gu,null),w($n,Eg),w($n,_u),w(_u,vs),w(vs,bu),w(bu,Cf),w(bu,mh),mh.innerHTML=Ly,w(_u,Df),w(_u,xu),w(xu,Gs),w(Gs,Sg),w(Gs,Op),w(Op,Md),w(Md,yh),w(_u,Ld),jt(mc,_u,null),w($n,Rd),w($n,Vl),w(Vl,gs),w(gs,yc),w(yc,kg),w(yc,Vp),Vp.innerHTML=Ry,w(Vl,Bd),w(Vl,Fp),w(Fp,Ks),w(Ks,Np),w(Ks,xr),w(xr,Od),w(Od,Vd),w(Vl,vh),jt(gh,Vl,null),w($n,Ig),w($n,Hs),w(Hs,Xs),w(Xs,vc),w(vc,Tg),w(vc,Up),Up.innerHTML=y_,w(Hs,By),w(Hs,_h),w(_h,bh),w(bh,Mf),w(bh,_s),w(_s,qp),w(qp,xh),w(Hs,Oy),jt(ai,Hs,null),w(Hs,ei),w(Hs,Vy),w($n,Fy),w($n,Fl),w(Fl,bs),w(bs,wu),w(wu,Fd),w(wu,xs),xs.innerHTML=jp,w(Fl,Ny),w(Fl,di),w(di,Nl),w(Nl,Ul),w(Nl,Eu),w(Eu,wh),w(wh,Nd),w(Fl,Eh),jt(Ga,Fl,null),w($n,Uy),w($n,ws),w(ws,Ws),w(Ws,mi),w(mi,Su),w(mi,Sh),Sh.innerHTML=e,w(ws,t),w(ws,i),w(i,l),w(l,p),w(l,d),w(d,v),w(v,I),w(ws,C),jt(D,ws,null),w(ws,O),w(ws,q),K=Wo($n,u[40].bind($n)),w(Ze,W),w(Ze,ne),w(ne,le),w(le,ye),w(ye,fe),w(fe,Ee),w(ne,Ae),w(ne,Ce),w(Ce,De),w(De,Fe),w(De,Ye),w(De,_t),w(De,it),w(it,bt),w(De,lt),w(De,Dt),w(Dt,wt),w(wt,ut),w(ut,Kt),w(Kt,Ht),w(Kt,ir),ir.innerHTML=St,w(wt,gr),w(wt,Or),w(Or,Yr),w(Yr,yi),w(Yr,Vr),w(Vr,oi),w(oi,tn),w(wt,rn),jt(Xi,wt,null),w(Dt,mn),w(Dt,Di),w(Di,Mr),w(Mr,vi),w(vi,ar),w(vi,Sr),Sr.innerHTML=Fr,w(Di,cr),w(Di,yn),w(yn,Wi),w(Wi,Jr),w(Wi,si),w(si,vn),w(vn,_r),w(Di,Ys),jt(Vn,Di,null),w(Dt,Js),w(Dt,gi),ql=Wo(Dt,u[41].bind(Dt)),w(Ze,Oo),w(Ze,Es),w(Es,Ss),w(Ss,Ka),w(Ka,Vo),w(Vo,kh),w(Es,Lf),w(Es,ks),w(ks,co),w(co,Rf),w(co,Qs),w(co,Zp),w(co,jl),w(jl,ku),w(co,Th),w(co,Ha),w(Ha,Is),w(Is,Xa),w(Xa,Fo),w(Fo,Bf),w(Fo,Zl),Zl.innerHTML=Ud,w(Is,Gp),w(Is,Iu),w(Iu,$s),w($s,Of),w($s,el),w(el,gc),w(gc,_c),w(Is,Kp),jt(Ts,Is,null),w(Ha,qd),w(Ha,Vf),w(Ha,jd),w(Ha,Ff),qy=Wo(Ha,u[42].bind(Ha)),w(Ze,Ag),w(Ze,tl),w(tl,ti),w(ti,Fn),w(Fn,Nf),w(Nf,Tu),w(tl,Zd),w(tl,bc),w(bc,No),w(No,rl),w(No,zh),w(No,Uf),w(No,xc),w(xc,Gd),w(No,jy),w(No,Ca),w(Ca,Gl),w(Gl,As),w(As,Au),w(Au,Zy),w(Au,Ph),Ph.innerHTML=Uo,w(Gl,qf),w(Gl,Ch),w(Ch,Wa),w(Wa,zg),w(Wa,Dh),w(Dh,Kl),w(Kl,Mh),w(Gl,Lh),jt(zs,Gl,null),w(Ca,Rh),w(Ca,jf),w(Ca,Gy),w(Ca,Zf),Pg=Wo(Ca,u[43].bind(Ca)),w(Ze,Kd),w(Ze,zu),w(zu,ho),w(ho,il),w(il,Bh),w(Bh,Hd),w(zu,Ky),w(zu,Pu),w(Pu,nl),w(nl,Hy),w(nl,Xd),w(nl,Xp),w(nl,Wp),w(Wp,Gf),w(nl,Cg),w(nl,xa),w(xa,Cu),w(Cu,al),w(al,wc),w(wc,Dg),w(wc,Yp),Yp.innerHTML=v0,w(Cu,Mg),w(Cu,Jp),w(Jp,Qr),w(Qr,Kf),w(Qr,Xy),w(Qr,Qp),w(Qr,Wy),w(Qr,g0),w(Qr,_0),w(Qr,b0),w(Qr,x0),w(Qr,w0),w(Qr,E0),w(Qr,S0),w(Qr,k0),w(Qr,I0),w(Qr,T0),w(Qr,A0),w(Qr,z0),w(Qr,P0),w(Qr,Wd),w(Wd,Lg),w(Lg,C0),w(Cu,D0),jt(Hf,Cu,null),w(xa,M0),w(xa,Oh),w(Oh,Du),w(Du,$p),w($p,L0),w($p,Yd),Yd.innerHTML=iI,w(Oh,R0),w(Oh,Jd),w(Jd,Qd),w(Qd,B0),w(Qd,$d),w($d,Rg),w(Rg,O0),w(Oh,V0),jt(Xf,Oh,null),w(xa,F0),w(xa,Vh),w(Vh,Mu),w(Mu,ef),w(ef,N0),w(ef,em),em.innerHTML=nI,w(Vh,U0),w(Vh,tm),w(tm,rm),w(rm,q0),w(rm,im),w(im,Bg),w(Bg,j0),w(Vh,Z0),jt(Wf,Vh,null),w(xa,G0),w(xa,Fh),w(Fh,Lu),w(Lu,tf),w(tf,K0),w(tf,nm),nm.innerHTML=aI,w(Fh,H0),w(Fh,am),w(am,om),w(om,X0),w(om,sm),w(sm,Og),w(Og,W0),w(Fh,Y0),jt(Yf,Fh,null),w(xa,J0),w(xa,Nh),w(Nh,Ru),w(Ru,rf),w(rf,Q0),w(rf,lm),lm.innerHTML=oI,w(Nh,$0),w(Nh,um),w(um,cm),w(cm,e1),w(cm,hm),w(hm,Vg),w(Vg,t1),w(Nh,r1),jt(Jf,Nh,null),Xx=Wo(xa,u[44].bind(xa)),w(Ze,i1),w(Ze,Qf),w(Qf,pm),w(pm,Ec),w(Ec,Yy),w(Yy,n1),w(Qf,a1),w(Qf,$f),w($f,Sc),w(Sc,o1),w(Sc,v_),w(Sc,s1),w(Sc,Jy),w(Jy,l1),w(Sc,u1),w(Sc,po),w(po,Uh),w(Uh,Bu),w(Bu,nf),w(nf,c1),w(nf,fm),fm.innerHTML=sI,w(Uh,h1),w(Uh,dm),w(dm,mm),w(mm,p1),w(mm,ym),w(ym,Ng),w(Ng,f1),w(Uh,d1),jt(ed,Uh,null),w(po,m1),w(po,qh),w(qh,Ou),w(Ou,af),w(af,y1),w(af,vm),vm.innerHTML=lI,w(qh,v1),w(qh,gm),w(gm,_m),w(_m,g1),w(_m,bm),w(bm,Ug),w(Ug,_1),w(qh,b1),jt(td,qh,null),w(po,x1),w(po,qg),w(po,w1),w(po,jh),w(jh,Vu),w(Vu,of),w(of,E1),w(of,xm),xm.innerHTML=uI,w(jh,S1),w(jh,wm),w(wm,Em),w(Em,k1),w(Em,Sm),w(Sm,jg),w(jg,I1),w(jh,T1),jt(rd,jh,null),w(po,A1),w(po,Zh),w(Zh,Fu),w(Fu,sf),w(sf,z1),w(sf,km),km.innerHTML=cI,w(Zh,P1),w(Zh,Im),w(Im,Tm),w(Tm,C1),w(Tm,Am),w(Am,Zg),w(Zg,D1),w(Zh,M1),jt(id,Zh,null),Wx=Wo(po,u[45].bind(po)),w(Ze,L1),w(Ze,nd),w(nd,zm),w(zm,kc),w(kc,Qy),w(Qy,R1),w(nd,B1),w(nd,ad),w(ad,Ic),w(Ic,O1),w(Ic,g_),w(Ic,V1),w(Ic,$y),w($y,F1),w(Ic,N1),w(Ic,Hl),w(Hl,Gh),w(Gh,Nu),w(Nu,lf),w(lf,U1),w(lf,Pm),Pm.innerHTML=hI,w(Gh,q1),w(Gh,Cm),w(Cm,Dm),w(Dm,j1),w(Dm,Mm),w(Mm,Kg),w(Kg,Z1),w(Gh,G1),jt(od,Gh,null),w(Hl,K1),w(Hl,Kh),w(Kh,Uu),w(Uu,uf),w(uf,H1),w(uf,Lm),Lm.innerHTML=pI,w(Kh,X1),w(Kh,Rm),w(Rm,Bm),w(Bm,W1),w(Bm,Om),w(Om,Hg),w(Hg,Y1),w(Kh,J1),jt(sd,Kh,null),w(Hl,Q1),w(Hl,Xg),Yx=Wo(Hl,u[46].bind(Hl)),An=!0},p(J,ze){__===(__=Jx(J))&&Tc?Tc.p(J,ze):(Tc.d(1),Tc=__(J),Tc&&(Tc.c(),Tc.m(y,F))),(!An||ze[0]&2)&&pe!==(pe=J[1].name+"")&&dt(he,pe),b_===(b_=Qx(J))&&Ac?Ac.p(J,ze):(Ac.d(1),Ac=b_(J),Ac&&(Ac.c(),Ac.m(we,Ue))),J[1].type!="ni"?qo?qo.p(J,ze):(qo=bk(J),qo.c(),qo.m(we,Bt)):qo&&(qo.d(1),qo=null),x_===(x_=$x(J))&&zc?zc.p(J,ze):(zc.d(1),zc=x_(J),zc&&(zc.c(),zc.m(we,null)));const Hh={};ze[0]&1&&(Hh.search_data=J[0]),kt.$set(Hh),ze[0]&128&&Si(Je,"float-right",J[7]>1),w_===(w_=e2(J))&&Pc?Pc.p(J,ze):(Pc.d(1),Pc=w_(J),Pc&&(Pc.c(),Pc.m(_n,qn))),J[6]?jo?jo.p(J,ze):(jo=xk(J),jo.c(),jo.m(_n,null)):jo&&(jo.d(1),jo=null),(!An||ze[0]&2)&&hr!==(hr=J[1].data.population.value[2021].all.toLocaleString()+"")&&dt(jr,hr),J[1].type!="ni"?wa?(wa.p(J,ze),ze[0]&2&&et(wa,1)):(wa=wk(J),wa.c(),et(wa,1),wa.m(qr,Ra)):wa&&(Zu(),ft(wa,1,1,()=>{wa=null}),Gu()),J[6]&&J[4]?Ea?(Ea.p(J,ze),ze[0]&80&&et(Ea,1)):(Ea=kk(J),Ea.c(),et(Ea,1),Ea.m(qr,null)):Ea&&(Zu(),ft(Ea,1,1,()=>{Ea=null}),Gu()),(!An||ze[0]&2)&&X!==(X=J[1].data.households.value[2021].all_households.toLocaleString()+"")&&dt(re,X),J[1].type!="ni"&J[11]?Sa?(Sa.p(J,ze),ze[0]&2050&&et(Sa,1)):(Sa=Ik(J),Sa.c(),et(Sa,1),Sa.m(ci,be)):Sa&&(Zu(),ft(Sa,1,1,()=>{Sa=null}),Gu()),J[6]&&J[4]?ka?(ka.p(J,ze),ze[0]&80&&et(ka,1)):(ka=Tk(J),ka.c(),et(ka,1),ka.m(ci,null)):ka&&(Zu(),ft(ka,1,1,()=>{ka=null}),Gu()),E_===(E_=t2(J))&&Cc?Cc.p(J,ze):(Cc.d(1),Cc=E_(J),Cc&&(Cc.c(),Cc.m(Ne,null))),(!An||ze[0]&128)&&ie(Se,"grid-column","span "+J[7]);const Rc={};ze[0]&2&&(Rc.location={bounds:J[1].bounds}),ze[0]&1536|ze[2]&1&&(Rc.$$scope={dirty:ze,ctx:J}),!pt&&ze[0]&256&&(pt=!0,Rc.map=J[8],l3(()=>pt=!1)),qe.$set(Rc),(!An||ze[0]&128)&&ie(Le,"grid-column","span "+(J[7]==2?2:J[7]&&J[7]>2?J[7]-1:1)),S_===(S_=i2(J))&&Dc?Dc.p(J,ze):(Dc.d(1),Dc=S_(J),Dc&&(Dc.c(),Dc.m(Be,null))),k_===(k_=n2(J))&&Mc?Mc.p(J,ze):(Mc.d(1),Mc=k_(J),Mc&&(Mc.c(),Mc.m(We,null))),(!An||ze[0]&2)&&Xt!==(Xt=J[1].name+"")&&dt(nr,Xt),I_===(I_=a2(J))&&Lc?Lc.p(J,ze):(Lc.d(1),Lc=I_(J),Lc&&(Lc.c(),Lc.m(Qi,null))),(!An||ze[0]&2)&&go!==(go=(J[1].hectares>=.1?J[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&dt(Jl,go),(!An||ze[0]&2)&&tp!==(tp=(J[1].data.population.value[2021].all/J[1].hectares>=.1?(J[1].data.population.value[2021].all/J[1].hectares).toFixed(1):"<0.1")+"")&&dt(hf,tp),J[1].type!="ni"&&J[11]?Zo?Zo.p(J,ze):(Zo=Ck(J),Zo.c(),Zo.m(Sn,null)):Zo&&(Zo.d(1),Zo=null),(!An||ze[0]&2)&&bo!==(bo=J[1].name+"")&&dt(ns,bo);const ev={};ze[0]&2&&(ev.data=J[1]&&J[14](["age"])),ze[0]&4096&&(ev.zKey=J[12]),Ms.$set(ev),J[11]&&J[13]||J[4]&&J[13]&&J[6]?Go?Go.p(J,ze):(Go=Dk(J),Go.c(),Go.m($i,ap)):Go&&(Go.d(1),Go=null);const tv={};ze[0]&2&&(tv.data=J[1]&&J[14](["age"])),ze[0]&4096&&(tv.zKey=J[12]),Ba.$set(tv);const qu={};ze[0]&2&&(qu.data=J[1]&&J[14](["sex"])),ze[0]&4096&&(qu.zKey=J[12]),ze[0]&8192&&(qu.label=J[13]),$a.$set(qu);const Vm={};ze[0]&2&&(Vm.data=J[1]&&J[14](["hh_size"])),ze[0]&4096&&(Vm.zKey=J[12]),ze[0]&8192&&(Vm.label=J[13]),Oa.$set(Vm),(!An||ze[0]&2)&&Ju!==(Ju=J[1].name+"")&&dt(Xc,Ju);const Xl={};ze[0]&2&&(Xl.data=J[1]&&J[14](["cob"])),ze[0]&4096&&(Xl.zKey=J[12]),ze[0]&8192&&(Xl.label=J[13]),ni.$set(Xl);const Fm={};ze[0]&2&&(Fm.data=J[1]&&J[14](["passport"])),ze[0]&4096&&(Fm.zKey=J[12]),ze[0]&8192&&(Fm.label=J[13]),cn.$set(Fm);const Nm={};ze[0]&2&&(Nm.data=J[1]&&J[14](["natid"])),ze[0]&4096&&(Nm.zKey=J[12]),ze[0]&8192&&(Nm.label=J[13]),Ta.$set(Nm),(!An||ze[0]&2)&&lu!==(lu=J[1].name+"")&&dt(Er,lu);const Bc={};ze[0]&2&&(Bc.data=J[1]&&J[14](["mainlang"])),ze[0]&4096&&(Bc.zKey=J[12]),ze[0]&8192&&(Bc.label=J[13]),Ln.$set(Bc);const Um={};ze[0]&2&&(Um.data=J[1]&&J[14](["irish"])),ze[0]&4096&&(Um.zKey=J[12]),ze[0]&8192&&(Um.label=J[13]),Q.$set(Um);const qm={};ze[0]&2&&(qm.data=J[1]&&J[14](["ulster"])),ze[0]&4096&&(qm.zKey=J[12]),ze[0]&8192&&(qm.label=J[13]),yt.$set(qm),(!An||ze[0]&2)&&Oi!==(Oi=J[1].name+"")&&dt(pi,Oi);const jm={};ze[0]&2&&(jm.data=J[1]&&J[14](["religion"])),ze[0]&4096&&(jm.zKey=J[12]),ze[0]&8192&&(jm.label=J[13]),_a.$set(jm);const Oc={};ze[0]&2&&(Oc.data=J[1]&&J[14](["religion_or_religion_brought_up_in"])),ze[0]&4096&&(Oc.zKey=J[12]),ze[0]&8192&&(Oc.label=J[13]),dn.$set(Oc);const Vc={};ze[0]&2&&(Vc.data=J[1]&&J[14](["ethnic"])),ze[0]&4096&&(Vc.zKey=J[12]),ze[0]&8192&&(Vc.label=J[13]),th.$set(Vc),(!An||ze[0]&2)&&ih!==(ih=J[1].name+"")&&dt(nh,ih);const Zm={};ze[0]&2&&(Zm.data=J[1]&&J[14](["general_health"])),ze[0]&4096&&(Zm.zKey=J[12]),ze[0]&8192&&(Zm.label=J[13]),oh.$set(Zm);const Ko={};ze[0]&2&&(Ko.data=J[1]&&J[14](["long_term_disability"])),ze[0]&4096&&(Ko.zKey=J[12]),ze[0]&8192&&(Ko.label=J[13]),lh.$set(Ko);const Gm={};ze[0]&2&&(Gm.data=J[1]&&J[14](["number_of_long_term_health"])),ze[0]&4096&&(Gm.zKey=J[12]),ze[0]&8192&&(Gm.label=J[13]),cc.$set(Gm);const ld={};ze[0]&2&&(ld.data=J[1]&&J[14](["provision_care"])),ze[0]&4096&&(ld.zKey=J[12]),ze[0]&8192&&(ld.label=J[13]),hh.$set(ld),(!An||ze[0]&2)&&vu!==(vu=J[1].name+"")&&dt(On,vu);const rv={};ze[0]&2&&(rv.data=J[1]&&J[14](["accommodation_type"])),ze[0]&4096&&(rv.zKey=J[12]),ze[0]&8192&&(rv.label=J[13]),dc.$set(rv);const Km={};ze[0]&2&&(Km.data=J[1]&&J[14](["number_of_adaptations"])),ze[0]&4096&&(Km.zKey=J[12]),ze[0]&8192&&(Km.label=J[13]),mc.$set(Km);const ud={};ze[0]&2&&(ud.data=J[1]&&J[14](["central_heating"])),ze[0]&4096&&(ud.zKey=J[12]),ze[0]&8192&&(ud.label=J[13]),gh.$set(ud);const Hm={};ze[0]&2&&(Hm.data=J[1]&&J[14](["renewable_energy"])),ze[0]&4096&&(Hm.zKey=J[12]),ze[0]&8192&&(Hm.label=J[13]),ai.$set(Hm);const Xm={};ze[0]&2&&(Xm.data=J[1]&&J[14](["hh_tenure"])),ze[0]&4096&&(Xm.zKey=J[12]),ze[0]&8192&&(Xm.label=J[13]),Ga.$set(Xm);const Wm={};ze[0]&2&&(Wm.data=J[1]&&J[14](["car_or_van"])),ze[0]&4096&&(Wm.zKey=J[12]),ze[0]&8192&&(Wm.label=J[13]),D.$set(Wm),(!An||ze[0]&2)&&Ke!==(Ke=J[1].name+"")&&dt(Ye,Ke);const Ho={};ze[0]&2&&(Ho.data=J[1]&&J[14](["number_of_dependent_children_households"])),ze[0]&4096&&(Ho.zKey=J[12]),ze[0]&8192&&(Ho.label=J[13]),Xi.$set(Ho);const Ym={};ze[0]&2&&(Ym.data=J[1]&&J[14](["household_composition_households"])),ze[0]&4096&&(Ym.zKey=J[12]),ze[0]&8192&&(Ym.label=J[13]),Vn.$set(Ym),(!An||ze[0]&2)&&Ih!==(Ih=J[1].name+"")&&dt(Qs,Ih);const cd={};ze[0]&2&&(cd.data=J[1]&&J[14](["marital_and_civil_partnership_status"])),ze[0]&4096&&(cd.zKey=J[12]),ze[0]&8192&&(cd.label=J[13]),Ts.$set(cd),(!An||ze[0]&2)&&Ah!==(Ah=J[1].name+"")&&dt(zh,Ah);const iv={};ze[0]&2&&(iv.data=J[1]&&J[14](["sexual_orientation_by_broad_age_band"])),ze[0]&4096&&(iv.zKey=J[12]),ze[0]&8192&&(iv.label=J[13]),zs.$set(iv),(!An||ze[0]&2)&&Hp!==(Hp=J[1].name+"")&&dt(Xd,Hp);const Jm={};ze[0]&2&&(Jm.data=J[1]&&J[14](["highest_level_of_qualifications"])),ze[0]&4096&&(Jm.zKey=J[12]),ze[0]&8192&&(Jm.label=J[13]),Hf.$set(Jm);const hd={};ze[0]&2&&(hd.data=J[1]&&J[14](["economic_activity"])),ze[0]&4096&&(hd.zKey=J[12]),ze[0]&8192&&(hd.label=J[13]),Xf.$set(hd);const Qm={};ze[0]&2&&(Qm.data=J[1]&&J[14](["hours_worked"])),ze[0]&4096&&(Qm.zKey=J[12]),ze[0]&8192&&(Qm.label=J[13]),Wf.$set(Qm);const $m={};ze[0]&2&&($m.data=J[1]&&J[14](["industry_of_employment"])),ze[0]&4096&&($m.zKey=J[12]),ze[0]&8192&&($m.label=J[13]),Yf.$set($m);const ey={};ze[0]&2&&(ey.data=J[1]&&J[14](["occupation_1_digit"])),ze[0]&4096&&(ey.zKey=J[12]),ze[0]&8192&&(ey.label=J[13]),Jf.$set(ey),(!An||ze[0]&2)&&Fg!==(Fg=J[1].name+"")&&dt(v_,Fg);const Wl={};ze[0]&2&&(Wl.data=J[1]&&J[14](["method_of_travel_to_work"])),ze[0]&4096&&(Wl.zKey=J[12]),ze[0]&8192&&(Wl.label=J[13]),ed.$set(Wl);const ty={};ze[0]&2&&(ty.data=J[1]&&J[14](["method_of_travel_to_study"])),ze[0]&4096&&(ty.zKey=J[12]),ze[0]&8192&&(ty.label=J[13]),td.$set(ty);const ry={};ze[0]&2&&(ry.data=J[1]&&J[14](["distance_travelled_to_work"])),ze[0]&4096&&(ry.zKey=J[12]),ze[0]&8192&&(ry.label=J[13]),rd.$set(ry);const iy={};ze[0]&2&&(iy.data=J[1]&&J[14](["distance_travelled_to_study"])),ze[0]&4096&&(iy.zKey=J[12]),ze[0]&8192&&(iy.label=J[13]),id.$set(iy),(!An||ze[0]&2)&&Gg!==(Gg=J[1].name+"")&&dt(g_,Gg);const ny={};ze[0]&2&&(ny.data=J[1]&&J[14](["address_one_year_ago"])),ze[0]&4096&&(ny.zKey=J[12]),ze[0]&8192&&(ny.label=J[13]),od.$set(ny);const ay={};ze[0]&2&&(ay.data=J[1]&&J[14](["year_of_arrival"])),ze[0]&4096&&(ay.zKey=J[12]),ze[0]&8192&&(ay.label=J[13]),sd.$set(ay)},i(J){An||(et(kt.$$.fragment,J),et(wa),et(Ea),et(Sa),et(ka),et(qe.$$.fragment,J),et(Ms.$$.fragment,J),et(Ba.$$.fragment,J),et($a.$$.fragment,J),et(Oa.$$.fragment,J),et(ni.$$.fragment,J),et(cn.$$.fragment,J),et(Ta.$$.fragment,J),et(Ln.$$.fragment,J),et(Q.$$.fragment,J),et(yt.$$.fragment,J),et(_a.$$.fragment,J),et(dn.$$.fragment,J),et(th.$$.fragment,J),et(oh.$$.fragment,J),et(lh.$$.fragment,J),et(cc.$$.fragment,J),et(hh.$$.fragment,J),et(dc.$$.fragment,J),et(mc.$$.fragment,J),et(gh.$$.fragment,J),et(ai.$$.fragment,J),et(Ga.$$.fragment,J),et(D.$$.fragment,J),et(Xi.$$.fragment,J),et(Vn.$$.fragment,J),et(Ts.$$.fragment,J),et(zs.$$.fragment,J),et(Hf.$$.fragment,J),et(Xf.$$.fragment,J),et(Wf.$$.fragment,J),et(Yf.$$.fragment,J),et(Jf.$$.fragment,J),et(ed.$$.fragment,J),et(td.$$.fragment,J),et(rd.$$.fragment,J),et(id.$$.fragment,J),et(od.$$.fragment,J),et(sd.$$.fragment,J),An=!0)},o(J){ft(kt.$$.fragment,J),ft(wa),ft(Ea),ft(Sa),ft(ka),ft(qe.$$.fragment,J),ft(Ms.$$.fragment,J),ft(Ba.$$.fragment,J),ft($a.$$.fragment,J),ft(Oa.$$.fragment,J),ft(ni.$$.fragment,J),ft(cn.$$.fragment,J),ft(Ta.$$.fragment,J),ft(Ln.$$.fragment,J),ft(Q.$$.fragment,J),ft(yt.$$.fragment,J),ft(_a.$$.fragment,J),ft(dn.$$.fragment,J),ft(th.$$.fragment,J),ft(oh.$$.fragment,J),ft(lh.$$.fragment,J),ft(cc.$$.fragment,J),ft(hh.$$.fragment,J),ft(dc.$$.fragment,J),ft(mc.$$.fragment,J),ft(gh.$$.fragment,J),ft(ai.$$.fragment,J),ft(Ga.$$.fragment,J),ft(D.$$.fragment,J),ft(Xi.$$.fragment,J),ft(Vn.$$.fragment,J),ft(Ts.$$.fragment,J),ft(zs.$$.fragment,J),ft(Hf.$$.fragment,J),ft(Xf.$$.fragment,J),ft(Wf.$$.fragment,J),ft(Yf.$$.fragment,J),ft(Jf.$$.fragment,J),ft(ed.$$.fragment,J),ft(td.$$.fragment,J),ft(rd.$$.fragment,J),ft(id.$$.fragment,J),ft(od.$$.fragment,J),ft(sd.$$.fragment,J),An=!1},d(J){J&&T(h),Tc.d(),Ac.d(),qo&&qo.d(),zc.d(),Zt(kt),J&&T(la),J&&T(Mi),Pc.d(),jo&&jo.d(),wa&&wa.d(),Ea&&Ea.d(),Sa&&Sa.d(),ka&&ka.d(),J&&T(H),J&&T(se),Cc.d(),Zt(qe),Dc.d(),Mc.d(),Qe(),J&&T(Ft),J&&T(Ze),Lc.d(),Zo&&Zo.d(),pf(),Zt(Ms),Go&&Go.d(),Zt(Ba),Zt($a),Zt(Oa),Kc(),Zt(ni),Zt(cn),Zt(Ta),Ao(),Zt(Ln),Zt(Q),Zt(yt),It(),Zt(_a),Zt(dn),Zt(th),p_(),Zt(oh),Zt(lh),Zt(cc),Zt(hh),Cd(),Zt(dc),Zt(mc),Zt(gh),Zt(ai),Zt(Ga),Zt(D),K(),Zt(Xi),Zt(Vn),ql(),Zt(Ts),qy(),Zt(zs),Pg(),Zt(Hf),Zt(Xf),Zt(Wf),Zt(Yf),Zt(Jf),Xx(),Zt(ed),Zt(td),Zt(rd),Zt(id),Wx(),Zt(od),Zt(sd),Yx()}}}function bA(u){let h=u[1].name+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,x){Pe(y,f,x)},p(y,x){x[0]&2&&h!==(h=y[1].name+"")&&dt(f,h)},d(y){y&&T(f)}}}function xA(u){let h,f=u[1].name+"",y,x=[...u[1].parents].reverse(),_=[];for(let o=0;o<x.length;o+=1)_[o]=_k(vk(u,x,o));return{c(){for(let o=0;o<_.length;o+=1)_[o].c();h=ge(),y=ee(f)},l(o){for(let z=0;z<_.length;z+=1)_[z].l(o);h=_e(o),y=te(o,f)},m(o,z){for(let P=0;P<_.length;P+=1)_[P].m(o,z);Pe(o,h,z),Pe(o,y,z)},p(o,z){if(z[0]&2){x=[...o[1].parents].reverse();let P;for(P=0;P<x.length;P+=1){const F=vk(o,x,P);_[P]?_[P].p(F,z):(_[P]=_k(F),_[P].c(),_[P].m(h.parentNode,h))}for(;P<_.length;P+=1)_[P].d(1);_.length=x.length}z[0]&2&&f!==(f=o[1].name+"")&&dt(y,f)},d(o){Uc(_,o),o&&T(h),o&&T(y)}}}function _k(u){let h,f=u[56].name+"",y,x,_,o=" &gt; ",z;return{c(){h=M("a"),y=ee(f),_=new Bx(!1),z=zn(),this.h()},l(P){h=L(P,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var F=R(h);y=te(F,f),F.forEach(T),_=Ox(P,!1),z=zn(),this.h()},h(){S(h,"href",x=$h+"/"+u[56].code+"/"),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r"),_.a=z},m(P,F){Pe(P,h,F),w(h,y),_.m(o,P,F),Pe(P,z,F)},p(P,F){F[0]&2&&f!==(f=P[56].name+"")&&dt(y,f),F[0]&2&&x!==(x=$h+"/"+P[56].code+"/")&&S(h,"href",x)},d(P){P&&T(h),P&&T(z),P&&_.d()}}}function wA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("No comparison"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"No comparison"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),Si(h,"btn-active",u[5])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Fi(h,"click",u[20]),Fi(h,"click",u[21]),Fi(h,"click",u[22])],y=!0)},p(_,o){o[0]&32&&Si(h,"btn-active",_[5])},d(_){_&&T(h),y=!1,Nc(x)}}}function EA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("No comparison"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"No comparison"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),Si(h,"btn-active",!u[4])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Fi(h,"click",u[17]),Fi(h,"click",u[18]),Fi(h,"click",u[19])],y=!0)},p(_,o){o[0]&16&&Si(h,"btn-active",!_[4])},d(_){_&&T(h),y=!1,Nc(x)}}}function bk(u){let h,f,y,x;return{c(){h=M("button"),f=ee("NI 2021"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"NI 2021"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),Si(h,"btn-active",u[11]&!u[5]&!u[4])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Fi(h,"click",u[23]),Fi(h,"click",u[24]),Fi(h,"click",u[25])],y=!0)},p(_,o){o[0]&2096&&Si(h,"btn-active",_[11]&!_[5]&!_[4])},d(_){_&&T(h),y=!1,Nc(x)}}}function SA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("2011 data not available"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"2011 data not available"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),Si(h,"btn-active",u[4]&!u[5]&!u[11])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Fi(h,"click",u[29]),Fi(h,"click",u[30]),Fi(h,"click",u[31])],y=!0)},p(_,o){o[0]&2096&&Si(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&T(h),y=!1,Nc(x)}}}function kA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("Same area 2011"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"Same area 2011"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),Si(h,"btn-active",u[4]&!u[5]&!u[11])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Fi(h,"click",u[26]),Fi(h,"click",u[27]),Fi(h,"click",u[28])],y=!0)},p(_,o){o[0]&2096&&Si(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&T(h),y=!1,Nc(x)}}}function IA(u){let h,f=u[1].name+"",y,x,_=u[1].data.population.value[2021].all.toLocaleString()+"",o,z,P;function F(U,pe){return U[1].data.population.value_rank[2021].all==1?CA:U[1].data.population.value_rank[2021].all==U[1].count?PA:U[1].data.population.value_rank[2021].all<=(U[1].count+1)/2&&U[1].data.population.value_rank[2021].all!=1?zA:AA}let V=F(u),j=V(u);return{c(){h=ee("The population of "),y=ee(f),x=ee(" was "),o=ee(_),z=ee(` at the time of the 2021 Census, which\r
					made it the\r
					`),j.c(),P=zn()},l(U){h=te(U,"The population of "),y=te(U,f),x=te(U," was "),o=te(U,_),z=te(U,` at the time of the 2021 Census, which\r
					made it the\r
					`),j.l(U),P=zn()},m(U,pe){Pe(U,h,pe),Pe(U,y,pe),Pe(U,x,pe),Pe(U,o,pe),Pe(U,z,pe),j.m(U,pe),Pe(U,P,pe)},p(U,pe){pe[0]&2&&f!==(f=U[1].name+"")&&dt(y,f),pe[0]&2&&_!==(_=U[1].data.population.value[2021].all.toLocaleString()+"")&&dt(o,_),V===(V=F(U))&&j?j.p(U,pe):(j.d(1),j=V(U),j&&(j.c(),j.m(P.parentNode,P)))},d(U){U&&T(h),U&&T(y),U&&T(x),U&&T(o),U&&T(z),j.d(U),U&&T(P)}}}function TA(u){let h,f=u[1].name+"",y,x,_=u[1].data.population.value[2021].all.toLocaleString()+"",o,z;return{c(){h=ee("The population of "),y=ee(f),x=ee(" was "),o=ee(_),z=ee(" at the time of the 2021 Census.")},l(P){h=te(P,"The population of "),y=te(P,f),x=te(P," was "),o=te(P,_),z=te(P," at the time of the 2021 Census.")},m(P,F){Pe(P,h,F),Pe(P,y,F),Pe(P,x,F),Pe(P,o,F),Pe(P,z,F)},p(P,F){F[0]&2&&f!==(f=P[1].name+"")&&dt(y,f),F[0]&2&&_!==(_=P[1].data.population.value[2021].all.toLocaleString()+"")&&dt(o,_)},d(P){P&&T(h),P&&T(y),P&&T(x),P&&T(o),P&&T(z)}}}function AA(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=gd(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",x,_,o=gn[u[1].type].name+"",z,P;return{c(){f=ee(h),x=ee(y),_=ee(" smallest "),z=ee(o),P=ee(".")},l(F){f=te(F,h),x=te(F,y),_=te(F," smallest "),z=te(F,o),P=te(F,".")},m(F,V){Pe(F,f,V),Pe(F,x,V),Pe(F,_,V),Pe(F,z,V),Pe(F,P,V)},p(F,V){V[0]&2&&h!==(h=(F[1].count+1-F[1].data.population.value_rank[2021].all).toLocaleString()+"")&&dt(f,h),V[0]&2&&y!==(y=gd(F[1].count+1-F[1].data.population.value_rank[2021].all)+"")&&dt(x,y),V[0]&2&&o!==(o=gn[F[1].type].name+"")&&dt(z,o)},d(F){F&&T(f),F&&T(x),F&&T(_),F&&T(z),F&&T(P)}}}function zA(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=gd(u[1].data.population.value_rank[2021].all)+"",x,_,o=gn[u[1].type].name+"",z,P;return{c(){f=ee(h),x=ee(y),_=ee(" largest "),z=ee(o),P=ee(".")},l(F){f=te(F,h),x=te(F,y),_=te(F," largest "),z=te(F,o),P=te(F,".")},m(F,V){Pe(F,f,V),Pe(F,x,V),Pe(F,_,V),Pe(F,z,V),Pe(F,P,V)},p(F,V){V[0]&2&&h!==(h=F[1].data.population.value_rank[2021].all.toLocaleString()+"")&&dt(f,h),V[0]&2&&y!==(y=gd(F[1].data.population.value_rank[2021].all)+"")&&dt(x,y),V[0]&2&&o!==(o=gn[F[1].type].name+"")&&dt(z,o)},d(F){F&&T(f),F&&T(x),F&&T(_),F&&T(z),F&&T(P)}}}function PA(u){let h,f=gn[u[1].type].name+"",y,x;return{c(){h=ee("smallest "),y=ee(f),x=ee(".")},l(_){h=te(_,"smallest "),y=te(_,f),x=te(_,".")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=gn[_[1].type].name+"")&&dt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function CA(u){let h,f=gn[u[1].type].name+"",y,x;return{c(){h=ee("largest "),y=ee(f),x=ee(".")},l(_){h=te(_,"largest "),y=te(_,f),x=te(_,".")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=gn[_[1].type].name+"")&&dt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function xk(u){let h;function f(_,o){return _[1].data.population.value.change.all==0?LA:_[1].data.population.value.change.all>0?MA:DA}let y=f(u),x=y(u);return{c(){x.c(),h=zn()},l(_){x.l(_),h=zn()},m(_,o){x.m(_,o),Pe(_,h,o)},p(_,o){y===(y=f(_))&&x?x.p(_,o):(x.d(1),x=y(_),x&&(x.c(),x.m(h.parentNode,h)))},d(_){x.d(_),_&&T(h)}}}function DA(u){let h,f=_d(u[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=ee("A decrease of "),y=ee(f),x=ee(" since the 2011 Census.")},l(_){h=te(_,"A decrease of "),y=te(_,f),x=te(_," since the 2011 Census.")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=_d(_[1].data.population.value.change.all,"%",1)+"")&&dt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function MA(u){let h,f=_d(u[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=ee("An increase of "),y=ee(f),x=ee(" since the 2011 Census.")},l(_){h=te(_,"An increase of "),y=te(_,f),x=te(_," since the 2011 Census.")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=_d(_[1].data.population.value.change.all,"%",1)+"")&&dt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function LA(u){let h;return{c(){h=ee("No change in population since the 2011 Census.")},l(f){h=te(f,"No change in population since the 2011 Census.")},m(f,y){Pe(f,h,y)},p:an,d(f){f&&T(h)}}}function wk(u){let h,f,y=u[1].type!="ctry"&u[11]&!u[4]&&Ek(u);return{c(){y&&y.c(),h=zn()},l(x){y&&y.l(x),h=zn()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,_){x[1].type!="ctry"&x[11]&!x[4]?y?(y.p(x,_),_[0]&2066&&et(y,1)):(y=Ek(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Zu(),ft(y,1,1,()=>{y=null}),Gu())},i(x){f||(et(y),f=!0)},o(x){ft(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function Ek(u){let h,f,y,x,_,o;f=new m0({props:{$$slots:{default:[RA]},$$scope:{ctx:u}}});let z=u[1].type=="lgd"&&Sk(u);return{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" of Northern Ireland population"),x=ge(),_=M("div"),z&&z.c(),this.h()},l(P){h=L(P,"SPAN",{class:!0});var F=R(h);qt(f.$$.fragment,F),y=te(F," of Northern Ireland population"),F.forEach(T),x=_e(P),_=L(P,"DIV",{class:!0});var V=R(_);z&&z.l(V),V.forEach(T),this.h()},h(){S(h,"class","text-small "),S(_,"class","text-small ")},m(P,F){Pe(P,h,F),jt(f,h,null),w(h,y),Pe(P,x,F),Pe(P,_,F),z&&z.m(_,null),o=!0},p(P,F){const V={};F[0]&6|F[2]&1&&(V.$$scope={dirty:F,ctx:P}),f.$set(V),P[1].type=="lgd"?z?z.p(P,F):(z=Sk(P),z.c(),z.m(_,null)):z&&(z.d(1),z=null)},i(P){o||(et(f.$$.fragment,P),o=!0)},o(P){ft(f.$$.fragment,P),o=!1},d(P){P&&T(h),Zt(f),P&&T(x),P&&T(_),z&&z.d()}}}function RA(u){let h=(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all>=.001?(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(x){f=te(x,h),y=te(x,"%")},m(x,_){Pe(x,f,_),Pe(x,y,_)},p(x,_){_[0]&6&&h!==(h=(x[1].data.population.value[2021].all/x[2].data.population.value[2021].all>=.001?(x[1].data.population.value[2021].all/x[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&dt(f,h)},d(x){x&&T(f),x&&T(y)}}}function Sk(u){let h,f=u[1].count.toLocaleString()+"",y,x,_=gn[u[1].type].pl+"",o;function z(V,j){return V[1].data.population.value_rank[2021].all==1?FA:V[1].data.population.value_rank[2021].all==V[1].count?VA:V[1].data.population.value_rank[2021].all<=(V[1].count+1)/2&&V[1].data.population.value_rank[2021].all!=1?OA:BA}let P=z(u),F=P(u);return{c(){F.c(),h=ee(`\r
							population of `),y=ee(f),x=ge(),o=ee(_)},l(V){F.l(V),h=te(V,`\r
							population of `),y=te(V,f),x=_e(V),o=te(V,_)},m(V,j){F.m(V,j),Pe(V,h,j),Pe(V,y,j),Pe(V,x,j),Pe(V,o,j)},p(V,j){P===(P=z(V))&&F?F.p(V,j):(F.d(1),F=P(V),F&&(F.c(),F.m(h.parentNode,h))),j[0]&2&&f!==(f=V[1].count.toLocaleString()+"")&&dt(y,f),j[0]&2&&_!==(_=gn[V[1].type].pl+"")&&dt(o,_)},d(V){F.d(V),V&&T(h),V&&T(y),V&&T(x),V&&T(o)}}}function BA(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=gd(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",x,_;return{c(){f=ee(h),x=ee(y),_=ee(" smallest")},l(o){f=te(o,h),x=te(o,y),_=te(o," smallest")},m(o,z){Pe(o,f,z),Pe(o,x,z),Pe(o,_,z)},p(o,z){z[0]&2&&h!==(h=(o[1].count+1-o[1].data.population.value_rank[2021].all).toLocaleString()+"")&&dt(f,h),z[0]&2&&y!==(y=gd(o[1].count+1-o[1].data.population.value_rank[2021].all)+"")&&dt(x,y)},d(o){o&&T(f),o&&T(x),o&&T(_)}}}function OA(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=gd(u[1].data.population.value_rank[2021].all)+"",x,_;return{c(){f=ee(h),x=ee(y),_=ee(" largest")},l(o){f=te(o,h),x=te(o,y),_=te(o," largest")},m(o,z){Pe(o,f,z),Pe(o,x,z),Pe(o,_,z)},p(o,z){z[0]&2&&h!==(h=o[1].data.population.value_rank[2021].all.toLocaleString()+"")&&dt(f,h),z[0]&2&&y!==(y=gd(o[1].data.population.value_rank[2021].all)+"")&&dt(x,y)},d(o){o&&T(f),o&&T(x),o&&T(_)}}}function VA(u){let h;return{c(){h=ee("The smallest")},l(f){h=te(f,"The smallest")},m(f,y){Pe(f,h,y)},p:an,d(f){f&&T(h)}}}function FA(u){let h;return{c(){h=ee("The largest")},l(f){h=te(f,"The largest")},m(f,y){Pe(f,h,y)},p:an,d(f){f&&T(h)}}}function kk(u){let h,f,y,x;return f=new m0({props:{$$slots:{default:[NA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);qt(f.$$.fragment,o),y=te(o," since 2011 Census"),o.forEach(T),this.h()},h(){S(h,"class","text-small ")},m(_,o){Pe(_,h,o),jt(f,h,null),w(h,y),x=!0},p(_,o){const z={};o[0]&2|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),f.$set(z)},i(_){x||(et(f.$$.fragment,_),x=!0)},o(_){ft(f.$$.fragment,_),x=!1},d(_){_&&T(h),Zt(f)}}}function NA(u){let h,f=_d(u[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=M("span"),y=ee(f),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);y=te(o,f),o.forEach(T),this.h()},h(){S(h,"class",x=i0(a0(u[1].data.population.value.change.all))+" svelte-p0yy5r")},m(_,o){Pe(_,h,o),w(h,y)},p(_,o){o[0]&2&&f!==(f=_d(_[1].data.population.value.change.all,"%",1)+"")&&dt(y,f),o[0]&2&&x!==(x=i0(a0(_[1].data.population.value.change.all))+" svelte-p0yy5r")&&S(h,"class",x)},d(_){_&&T(h)}}}function Ik(u){let h,f,y,x;return f=new m0({props:{$$slots:{default:[UA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" of Northern Ireland households"),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);qt(f.$$.fragment,o),y=te(o," of Northern Ireland households"),o.forEach(T),this.h()},h(){S(h,"class","text-small")},m(_,o){Pe(_,h,o),jt(f,h,null),w(h,y),x=!0},p(_,o){const z={};o[0]&6|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),f.$set(z)},i(_){x||(et(f.$$.fragment,_),x=!0)},o(_){ft(f.$$.fragment,_),x=!1},d(_){_&&T(h),Zt(f)}}}function UA(u){let h=(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households>=.001?(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(x){f=te(x,h),y=te(x,"%")},m(x,_){Pe(x,f,_),Pe(x,y,_)},p(x,_){_[0]&6&&h!==(h=(x[1].data.households.value[2021].all_households/x[2].data.households.value[2021].all_households>=.001?(x[1].data.households.value[2021].all_households/x[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&dt(f,h)},d(x){x&&T(f),x&&T(y)}}}function Tk(u){let h,f,y,x;return f=new m0({props:{$$slots:{default:[qA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);qt(f.$$.fragment,o),y=te(o," since 2011 Census"),o.forEach(T),this.h()},h(){S(h,"class","text-small")},m(_,o){Pe(_,h,o),jt(f,h,null),w(h,y),x=!0},p(_,o){const z={};o[0]&2|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),f.$set(z)},i(_){x||(et(f.$$.fragment,_),x=!0)},o(_){ft(f.$$.fragment,_),x=!1},d(_){_&&T(h),Zt(f)}}}function qA(u){let h,f=_d(u[1].data.households.value.change.all_households,"%",1)+"",y,x;return{c(){h=M("span"),y=ee(f),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);y=te(o,f),o.forEach(T),this.h()},h(){S(h,"class",x=i0(a0(u[1].data.households.value.change.all_households))+" svelte-p0yy5r")},m(_,o){Pe(_,h,o),w(h,y)},p(_,o){o[0]&2&&f!==(f=_d(_[1].data.households.value.change.all_households,"%",1)+"")&&dt(y,f),o[0]&2&&x!==(x=i0(a0(_[1].data.households.value.change.all_households))+" svelte-p0yy5r")&&S(h,"class",x)},d(_){_&&T(h)}}}function jA(u){let h,f,y=u[1].name+"",x;return{c(){h=ee("Explore "),f=M("span"),x=ee(y),this.h()},l(_){h=te(_,"Explore "),f=L(_,"SPAN",{style:!0});var o=R(f);x=te(o,y),o.forEach(T),this.h()},h(){ie(f,"color","#93328E")},m(_,o){Pe(_,h,o),Pe(_,f,o),w(f,x)},p(_,o){o[0]&2&&y!==(y=_[1].name+"")&&dt(x,y)},d(_){_&&T(h),_&&T(f)}}}function ZA(u){let h,f,y=u[1].name+"",x,_,o,z,P=gn[u[1].type].name+"",F;return{c(){h=ee("Explore "),f=M("span"),x=ee(y),_=ge(),o=M("span"),z=ee("- "),F=ee(P),this.h()},l(V){h=te(V,"Explore "),f=L(V,"SPAN",{style:!0});var j=R(f);x=te(j,y),j.forEach(T),_=_e(V),o=L(V,"SPAN",{style:!0});var U=R(o);z=te(U,"- "),F=te(U,P),U.forEach(T),this.h()},h(){ie(f,"color","#93328E"),ie(o,"color","#a19e9e")},m(V,j){Pe(V,h,j),Pe(V,f,j),w(f,x),Pe(V,_,j),Pe(V,o,j),w(o,z),w(o,F)},p(V,j){j[0]&2&&y!==(y=V[1].name+"")&&dt(x,y),j[0]&2&&P!==(P=gn[V[1].type].name+"")&&dt(F,P)},d(V){V&&T(h),V&&T(f),V&&T(_),V&&T(o)}}}function GA(u){let h,f,y,x,_,o,z;const P=[vd[u[58]],{id:u[58]+"-fill"},{type:"fill"},{isChild:u[10][u[58]]},{click:!0},{selected:u[9].selected},{highlight:!0},{highlighted:u[9].highlighted},{hover:!0},{hovered:u[9].hovered},{layout:{visibility:u[9].type==u[58]||u[9].childType==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?sa["fill-self"]:u[9].childType==u[58]?sa["fill-child"]:sa.fill}];let F={};for(let he=0;he<P.length;he+=1)F=Q_(F,P[he]);h=new kx({props:F}),h.$on("select",u[15]);const V=[vd[u[58]],{id:u[58]+"-bounds"},{type:"line"},{selected:u[9].selected},{highlight:!0},{highlighted:u[9].highlighted},{layout:{visibility:u[9].type==u[58]||u[9].childType==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?sa["line-active"]:u[9].childType==u[58]?sa["line-child"]:sa.line}];let j={};for(let he=0;he<V.length;he+=1)j=Q_(j,V[he]);y=new kx({props:j});const U=[vd[u[58]],{id:u[58]+"-self"},{type:"line"},{selected:u[9].selected},{layout:{visibility:u[9].type==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?sa["line-self"]:sa.line}];let pe={};for(let he=0;he<U.length;he+=1)pe=Q_(pe,U[he]);return _=new kx({props:pe}),{c(){Ut(h.$$.fragment),f=ge(),Ut(y.$$.fragment),x=ge(),Ut(_.$$.fragment),o=ge()},l(he){qt(h.$$.fragment,he),f=_e(he),qt(y.$$.fragment,he),x=_e(he),qt(_.$$.fragment,he),o=_e(he)},m(he,Ie){jt(h,he,Ie),Pe(he,f,Ie),jt(y,he,Ie),Pe(he,x,Ie),jt(_,he,Ie),Pe(he,o,Ie),z=!0},p(he,Ie){const we=Ie[0]&1536?$_(P,[Ie&0&&e0(vd[he[58]]),P[1],P[2],Ie[0]&1024&&{isChild:he[10][he[58]]},P[4],Ie[0]&512&&{selected:he[9].selected},P[6],Ie[0]&512&&{highlighted:he[9].highlighted},P[8],Ie[0]&512&&{hovered:he[9].hovered},Ie[0]&512&&{layout:{visibility:he[9].type==he[58]||he[9].childType==he[58]?"visible":"none"}},Ie[0]&512&&{paint:he[9].type==he[58]?sa["fill-self"]:he[9].childType==he[58]?sa["fill-child"]:sa.fill}]):{};h.$set(we);const Oe=Ie[0]&512?$_(V,[Ie&0&&e0(vd[he[58]]),V[1],V[2],Ie[0]&512&&{selected:he[9].selected},V[4],Ie[0]&512&&{highlighted:he[9].highlighted},Ie[0]&512&&{layout:{visibility:he[9].type==he[58]||he[9].childType==he[58]?"visible":"none"}},Ie[0]&512&&{paint:he[9].type==he[58]?sa["line-active"]:he[9].childType==he[58]?sa["line-child"]:sa.line}]):{};y.$set(Oe);const Ue=Ie[0]&512?$_(U,[Ie&0&&e0(vd[he[58]]),U[1],U[2],Ie[0]&512&&{selected:he[9].selected},Ie[0]&512&&{layout:{visibility:he[9].type==he[58]?"visible":"none"}},Ie[0]&512&&{paint:he[9].type==he[58]?sa["line-self"]:sa.line}]):{};_.$set(Ue)},i(he){z||(et(h.$$.fragment,he),et(y.$$.fragment,he),et(_.$$.fragment,he),z=!0)},o(he){ft(h.$$.fragment,he),ft(y.$$.fragment,he),ft(_.$$.fragment,he),z=!1},d(he){Zt(h,he),he&&T(f),Zt(y,he),he&&T(x),Zt(_,he),he&&T(o)}}}function Ak(u){let h,f;const y=[fS[u[58]]];let x={$$slots:{default:[GA]},$$scope:{ctx:u}};for(let _=0;_<y.length;_+=1)x=Q_(x,y[_]);return h=new mT({props:x}),{c(){Ut(h.$$.fragment)},l(_){qt(h.$$.fragment,_)},m(_,o){jt(h,_,o),f=!0},p(_,o){const z=o&0?$_(y,[e0(fS[_[58]])]):{};o[0]&1536|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),h.$set(z)},i(_){f||(et(h.$$.fragment,_),f=!0)},o(_){ft(h.$$.fragment,_),f=!1},d(_){Zt(h,_)}}}function KA(u){let h,f,y=["dz","sdz","ward","dea","lgd"],x=[];for(let o=0;o<5;o+=1)x[o]=Ak(yk(u,y,o));const _=o=>ft(x[o],1,1,()=>{x[o]=null});return{c(){for(let o=0;o<5;o+=1)x[o].c();h=zn()},l(o){for(let z=0;z<5;z+=1)x[z].l(o);h=zn()},m(o,z){for(let P=0;P<5;P+=1)x[P].m(o,z);Pe(o,h,z),f=!0},p(o,z){if(z[0]&34304){y=["dz","sdz","ward","dea","lgd"];let P;for(P=0;P<5;P+=1){const F=yk(o,y,P);x[P]?(x[P].p(F,z),et(x[P],1)):(x[P]=Ak(F),x[P].c(),et(x[P],1),x[P].m(h.parentNode,h))}for(Zu(),P=5;P<5;P+=1)_(P);Gu()}},i(o){if(!f){for(let z=0;z<5;z+=1)et(x[z]);f=!0}},o(o){x=x.filter(Boolean);for(let z=0;z<5;z+=1)ft(x[z]);f=!1},d(o){Uc(x,o),o&&T(h)}}}function HA(u){return{c:an,l:an,m:an,p:an,d:an}}function XA(u){let h,f,y=u[1].name+"",x,_,o,z,P,F=[...u[1].parents].reverse(),V=[];for(let j=0;j<F.length;j+=1)V[j]=zk(mk(u,F,j));return{c(){h=M("span"),f=ee("Parents of "),x=ee(y),_=ge(),o=M("br"),z=ge(),P=M("span");for(let j=0;j<V.length;j+=1)V[j].c();this.h()},l(j){h=L(j,"SPAN",{class:!0});var U=R(h);f=te(U,"Parents of "),x=te(U,y),_=_e(U),U.forEach(T),o=L(j,"BR",{}),z=_e(j),P=L(j,"SPAN",{class:!0});var pe=R(P);for(let he=0;he<V.length;he+=1)V[he].l(pe);pe.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(P,"class","text-small")},m(j,U){Pe(j,h,U),w(h,f),w(h,x),w(h,_),Pe(j,o,U),Pe(j,z,U),Pe(j,P,U);for(let pe=0;pe<V.length;pe+=1)V[pe].m(P,null)},p(j,U){if(U[0]&2&&y!==(y=j[1].name+"")&&dt(x,y),U[0]&2){F=[...j[1].parents].reverse();let pe;for(pe=0;pe<F.length;pe+=1){const he=mk(j,F,pe);V[pe]?V[pe].p(he,U):(V[pe]=zk(he),V[pe].c(),V[pe].m(P,null))}for(;pe<V.length;pe+=1)V[pe].d(1);V.length=F.length}},d(j){j&&T(h),j&&T(o),j&&T(z),j&&T(P),Uc(V,j)}}}function zk(u){let h,f,y=u[55]>0?"\u21B3 ":"",x,_=u[56].name+"",o,z;return{c(){h=M("span"),f=new Bx(!1),x=M("a"),o=ee(_),this.h()},l(P){h=L(P,"SPAN",{style:!0});var F=R(h);f=Ox(F,!1),x=L(F,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var V=R(x);o=te(V,_),V.forEach(T),F.forEach(T),this.h()},h(){f.a=x,S(x,"href",z=$h+"/"+u[56].code),S(x,"sveltekit:noscroll",""),S(x,"class","svelte-p0yy5r"),ie(h,"display","block"),ie(h,"margin-left",(u[55]>0?(u[55]-1)*15:0)+"px")},m(P,F){Pe(P,h,F),f.m(y,h),w(h,x),w(x,o)},p(P,F){F[0]&2&&_!==(_=P[56].name+"")&&dt(o,_),F[0]&2&&z!==(z=$h+"/"+P[56].code)&&S(x,"href",z)},d(P){P&&T(h)}}}function WA(u){let h,f,y=u[1].name+"",x,_,o=gn[u[1].type].name+"",z;return{c(){h=M("span"),f=ee("No areas below "),x=ee(y),_=ge(),z=ee(o),this.h()},l(P){h=L(P,"SPAN",{class:!0});var F=R(h);f=te(F,"No areas below "),x=te(F,y),_=_e(F),z=te(F,o),F.forEach(T),this.h()},h(){S(h,"class","muted")},m(P,F){Pe(P,h,F),w(h,f),w(h,x),w(h,_),w(h,z)},p(P,F){F[0]&2&&y!==(y=P[1].name+"")&&dt(x,y),F[0]&2&&o!==(o=gn[P[1].type].name+"")&&dt(z,o)},d(P){P&&T(h)}}}function YA(u){let h,f=(u[1].children[0]?gn[u[1].children[0].type].pl:"Areas")+"",y,x,_=u[1].name+"",o,z,P,F,V=u[1].children,j=[];for(let U=0;U<V.length;U+=1)j[U]=Pk(dk(u,V,U));return{c(){h=M("span"),y=ee(f),x=ee(" within "),o=ee(_),z=M("br"),P=ge(),F=M("span");for(let U=0;U<j.length;U+=1)j[U].c();this.h()},l(U){h=L(U,"SPAN",{class:!0});var pe=R(h);y=te(pe,f),x=te(pe," within "),o=te(pe,_),pe.forEach(T),z=L(U,"BR",{}),P=_e(U),F=L(U,"SPAN",{class:!0});var he=R(F);for(let Ie=0;Ie<j.length;Ie+=1)j[Ie].l(he);he.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(F,"class","text-small")},m(U,pe){Pe(U,h,pe),w(h,y),w(h,x),w(h,o),Pe(U,z,pe),Pe(U,P,pe),Pe(U,F,pe);for(let he=0;he<j.length;he+=1)j[he].m(F,null)},p(U,pe){if(pe[0]&2&&f!==(f=(U[1].children[0]?gn[U[1].children[0].type].pl:"Areas")+"")&&dt(y,f),pe[0]&2&&_!==(_=U[1].name+"")&&dt(o,_),pe[0]&2){V=U[1].children;let he;for(he=0;he<V.length;he+=1){const Ie=dk(U,V,he);j[he]?j[he].p(Ie,pe):(j[he]=Pk(Ie),j[he].c(),j[he].m(F,null))}for(;he<j.length;he+=1)j[he].d(1);j.length=V.length}},d(U){U&&T(h),U&&T(z),U&&T(P),U&&T(F),Uc(j,U)}}}function Pk(u){let h,f=u[53].name+"",y,x,_=u[55]<u[1].children.length-1?", ":"",o;return{c(){h=M("a"),y=ee(f),o=ee(_),this.h()},l(z){h=L(z,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var P=R(h);y=te(P,f),P.forEach(T),o=te(z,_),this.h()},h(){S(h,"href",x=$h+"/"+u[53].code),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r")},m(z,P){Pe(z,h,P),w(h,y),Pe(z,o,P)},p(z,P){P[0]&2&&f!==(f=z[53].name+"")&&dt(y,f),P[0]&2&&x!==(x=$h+"/"+z[53].code)&&S(h,"href",x),P[0]&2&&_!==(_=z[55]<z[1].children.length-1?", ":"")&&dt(o,_)},d(z){z&&T(h),z&&T(o)}}}function JA(u){let h=u[1].name+"",f,y;return{c(){f=ee(h),y=ee(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(x){f=te(x,h),y=te(x," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(x,_){Pe(x,f,_),Pe(x,y,_)},p(x,_){_[0]&2&&h!==(h=x[1].name+"")&&dt(f,h)},d(x){x&&T(f),x&&T(y)}}}function QA(u){let h=u[1].name+"",f,y,x=u[1].count.toLocaleString()+"",_,o,z=gn[u[1].type].pl+"",P,F,V=u[1].parents[0].name+"",j,U;return{c(){f=ee(h),y=ee(" is one of "),_=ee(x),o=ge(),P=ee(z),F=ee(`.\r
								 It is located within `),j=ee(V),U=ee(".")},l(pe){f=te(pe,h),y=te(pe," is one of "),_=te(pe,x),o=_e(pe),P=te(pe,z),F=te(pe,`.\r
								 It is located within `),j=te(pe,V),U=te(pe,".")},m(pe,he){Pe(pe,f,he),Pe(pe,y,he),Pe(pe,_,he),Pe(pe,o,he),Pe(pe,P,he),Pe(pe,F,he),Pe(pe,j,he),Pe(pe,U,he)},p(pe,he){he[0]&2&&h!==(h=pe[1].name+"")&&dt(f,h),he[0]&2&&x!==(x=pe[1].count.toLocaleString()+"")&&dt(_,x),he[0]&2&&z!==(z=gn[pe[1].type].pl+"")&&dt(P,z),he[0]&2&&V!==(V=pe[1].parents[0].name+"")&&dt(j,V)},d(pe){pe&&T(f),pe&&T(y),pe&&T(_),pe&&T(o),pe&&T(P),pe&&T(F),pe&&T(j),pe&&T(U)}}}function $A(u){let h=u[1].name+"",f,y,x=u[1].count.toLocaleString()+"",_,o,z=gn[u[1].type].pl+"",P,F,V=u[1].parents[0].name+"",j,U,pe=gn[u[1].parents[0].type].name+"",he,Ie;return{c(){f=ee(h),y=ee(" is one of "),_=ee(x),o=ge(),P=ee(z),F=ee(`.  \r
									It is located within `),j=ee(V),U=ge(),he=ee(pe),Ie=ee(".")},l(we){f=te(we,h),y=te(we," is one of "),_=te(we,x),o=_e(we),P=te(we,z),F=te(we,`.  \r
									It is located within `),j=te(we,V),U=_e(we),he=te(we,pe),Ie=te(we,".")},m(we,Oe){Pe(we,f,Oe),Pe(we,y,Oe),Pe(we,_,Oe),Pe(we,o,Oe),Pe(we,P,Oe),Pe(we,F,Oe),Pe(we,j,Oe),Pe(we,U,Oe),Pe(we,he,Oe),Pe(we,Ie,Oe)},p(we,Oe){Oe[0]&2&&h!==(h=we[1].name+"")&&dt(f,h),Oe[0]&2&&x!==(x=we[1].count.toLocaleString()+"")&&dt(_,x),Oe[0]&2&&z!==(z=gn[we[1].type].pl+"")&&dt(P,z),Oe[0]&2&&V!==(V=we[1].parents[0].name+"")&&dt(j,V),Oe[0]&2&&pe!==(pe=gn[we[1].parents[0].type].name+"")&&dt(he,pe)},d(we){we&&T(f),we&&T(y),we&&T(_),we&&T(o),we&&T(P),we&&T(F),we&&T(j),we&&T(U),we&&T(he),we&&T(Ie)}}}function Ck(u){let h,f,y,x=u[1].data.population.value[2021].all/u[1].hectares>u[2].data.population.value[2021].all/u[2].hectares*1.1?"Higher than Northern Ireland value of ":u[1].data.population.value[2021].all/u[1].hectares<u[2].data.population.value[2021].all/u[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",_,o,z=(u[2].data.population.value[2021].all/u[2].hectares).toFixed(1)+"",P,F;return{c(){h=M("br"),f=ge(),y=M("span"),_=ee(x),o=ge(),P=ee(z),F=ee(" persons per hectare"),this.h()},l(V){h=L(V,"BR",{}),f=_e(V),y=L(V,"SPAN",{class:!0});var j=R(y);_=te(j,x),o=_e(j),P=te(j,z),F=te(j," persons per hectare"),j.forEach(T),this.h()},h(){S(y,"class","text-small")},m(V,j){Pe(V,h,j),Pe(V,f,j),Pe(V,y,j),w(y,_),w(y,o),w(y,P),w(y,F)},p(V,j){j[0]&6&&x!==(x=V[1].data.population.value[2021].all/V[1].hectares>V[2].data.population.value[2021].all/V[2].hectares*1.1?"Higher than Northern Ireland value of ":V[1].data.population.value[2021].all/V[1].hectares<V[2].data.population.value[2021].all/V[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&dt(_,x),j[0]&4&&z!==(z=(V[2].data.population.value[2021].all/V[2].hectares).toFixed(1)+"")&&dt(P,z)},d(V){V&&T(h),V&&T(f),V&&T(y)}}}function Dk(u){let h,f,y,x,_;return{c(){h=M("div"),f=Ma("svg"),y=Ma("rect"),x=ge(),_=ee(u[13]),this.h()},l(o){h=L(o,"DIV",{class:!0});var z=R(h);f=La(z,"svg",{width:!0,height:!0,style:!0});var P=R(f);y=La(P,"rect",{width:!0,height:!0,style:!0}),R(y).forEach(T),P.forEach(T),x=_e(z),_=te(z,u[13]),z.forEach(T),this.h()},h(){S(y,"width","25"),S(y,"height","4"),ie(y,"fill","#CEDC20"),S(f,"width","25"),S(f,"height","4"),ie(f,"display","inline-block"),ie(f,"margin-bottom","3px"),S(h,"class","text-small muted; ")},m(o,z){Pe(o,h,z),w(h,f),w(f,y),w(h,x),w(h,_)},p(o,z){z[0]&8192&&dt(_,o[13])},d(o){o&&T(h)}}}function ez(u){let h,f,y=u[1]&&u[2]&&gk(u);return{c(){y&&y.c(),h=zn()},l(x){y&&y.l(x),h=zn()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,_){x[1]&&x[2]?y?(y.p(x,_),_[0]&6&&et(y,1)):(y=gk(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Zu(),ft(y,1,1,()=>{y=null}),Gu())},i(x){f||(et(y),f=!0)},o(x){ft(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function tz(u){let h,f,y,x,_,o,z,P,F,V,j,U,pe,he,Ie,we;return document.title=h=u[1].name+" Census Data",pe=new _A({}),Ie=new u3({props:{column:"wide",$$slots:{default:[ez]},$$scope:{ctx:u}}}),{c(){f=M("meta"),y=M("meta"),_=M("meta"),o=M("meta"),P=M("meta"),V=M("meta"),U=ge(),Ut(pe.$$.fragment),he=ge(),Ut(Ie.$$.fragment),this.h()},l(Oe){const Ue=o3('[data-svelte="svelte-14ulspn"]',document.head);f=L(Ue,"META",{name:!0,content:!0}),y=L(Ue,"META",{property:!0,content:!0}),_=L(Ue,"META",{property:!0,content:!0}),o=L(Ue,"META",{property:!0,content:!0}),P=L(Ue,"META",{property:!0,content:!0}),V=L(Ue,"META",{name:!0,content:!0}),Ue.forEach(T),U=_e(Oe),qt(pe.$$.fragment,Oe),he=_e(Oe),qt(Ie.$$.fragment,Oe),this.h()},h(){S(f,"name","description"),S(f,"content",""),S(y,"property","og:title"),S(y,"content",x=u[1].name+" Census Data"),S(_,"property","og:type"),S(_,"content","website"),S(o,"property","og:url"),S(o,"content",z=n0.base+"/"+u[1].code+"/"),S(P,"property","og:description"),S(P,"content",F="Explore census data for "+u[1].name+"."),S(V,"name","description"),S(V,"content",j="Explore census data for "+u[1].name+".")},m(Oe,Ue){w(document.head,f),w(document.head,y),w(document.head,_),w(document.head,o),w(document.head,P),w(document.head,V),Pe(Oe,U,Ue),jt(pe,Oe,Ue),Pe(Oe,he,Ue),jt(Ie,Oe,Ue),we=!0},p(Oe,Ue){(!we||Ue[0]&2)&&h!==(h=Oe[1].name+" Census Data")&&(document.title=h),(!we||Ue[0]&2&&x!==(x=Oe[1].name+" Census Data"))&&S(y,"content",x),(!we||Ue[0]&2&&z!==(z=n0.base+"/"+Oe[1].code+"/"))&&S(o,"content",z),(!we||Ue[0]&2&&F!==(F="Explore census data for "+Oe[1].name+"."))&&S(P,"content",F),(!we||Ue[0]&2&&j!==(j="Explore census data for "+Oe[1].name+"."))&&S(V,"content",j);const Bt={};Ue[0]&16383|Ue[2]&1&&(Bt.$$scope={dirty:Ue,ctx:Oe}),Ie.$set(Bt)},i(Oe){we||(et(pe.$$.fragment,Oe),et(Ie.$$.fragment,Oe),we=!0)},o(Oe){ft(pe.$$.fragment,Oe),ft(Ie.$$.fragment,Oe),we=!1},d(Oe){T(f),T(y),T(_),T(o),T(P),T(V),Oe&&T(U),Zt(pe,Oe),Oe&&T(he),Zt(Ie,Oe)}}}const lz=!0;async function Mk(u,h){return await(await h(n0.app_json_data+u+".json")).json()}async function uz({params:u,fetch:h}){let f=u.code,y=await _3(n0.search_data,h),x={};y.forEach(P=>x[P.code]=P.name),y.forEach(P=>{P.typepl=gn[P.type].pl,P.typenm=gn[P.type].name,P.typestr=x[P.parent]?`${gn[P.type].name} within ${x[P.parent]}`:""});let _=y.sort((P,F)=>P.name.localeCompare(F.name)),o=await Mk("N92000002",h),z=await Mk(f,h);return{props:{search_data:_,place:z,ni:o}}}function rz(u,h,f){let y,x,_,o,z,{search_data:P,place:F,ni:V}=h,j,U,pe=null,he=!1,Ie={selected:null,type:null,childType:null,highlighted:[],hovered:null},we={};Object.keys(vd).forEach(Wt=>f(10,we[Wt]=!1,we));function Oe(Wt){const ki=(jr,ea)=>jr+ea;let Lr=Wt[0],_i="perc",bi=F.data[Lr][_i][2021],Cr=F.data[Lr][_i][2011],xi=V.data[Lr][_i][2021],on=pS[Lr].map(jr=>jr.category),Kr=pS[Lr].map(jr=>jr.label?jr.label:jr.category);return on.map((jr,ea)=>Array.isArray(jr)?{x:Kr[ea],y:jr.map(jn=>bi[jn]).reduce(ki,0),ni:jr.map(jn=>xi[jn]).reduce(ki,0),prev:jr.map(jn=>Cr[jn]).reduce(ki,0)}:{x:Kr[ea],y:bi[jr],ni:xi[jr],prev:Cr[jr]})}function Ue(Wt){pe&&pe.fitBounds(Wt,{padding:20})}function Bt(Wt){let ki=JSON.parse(JSON.stringify(Ie)),Lr=Wt.code,_i=Wt.type,bi=Wt.children[0]?Wt.children.map(hr=>hr.code):[],Cr=Wt.type=="rgn"?"cty":bi[0]?Wt.children[0].type:null;f(9,Ie.selected=Lr,Ie),f(9,Ie.type=_i,Ie),f(9,Ie.childType=Cr,Ie),f(9,Ie.highlighted=bi,Ie);let xi=Object.keys(vd),on=["fill-color","fill-opacity"],Kr=["line-color","line-width","line-opacity"];pe&&(Ie.type!=ki.type||Ie.childType!=ki.childType)&&(xi.forEach(hr=>{let jr=hr==_i||Cr&&hr==Cr?"visible":"none";pe.setLayoutProperty(hr+"-fill","visibility",jr),pe.setLayoutProperty(hr+"-bounds","visibility",jr),Wt.parents[0]&&pe.setLayoutProperty(hr+"-self","visibility",jr),f(10,we[hr]=hr==Cr,we)}),Wt.parents[0]&&(on.forEach(hr=>pe.setPaintProperty(_i+"-fill",hr,sa[bi[0]?"fill-active":"fill-self"][hr])),Kr.forEach(hr=>{pe.setPaintProperty(_i+"-bounds",hr,sa["line-active"][hr]),pe.setPaintProperty(_i+"-self",hr,sa["line-self"][hr])})),Cr&&(on.forEach(hr=>pe.setPaintProperty(Cr+"-fill",hr,sa["fill-child"][hr])),Kr.forEach(hr=>pe.setPaintProperty(Cr+"-bounds",hr,sa["line-child"][hr]))))}function Mt(Wt){Bt(Wt),Ue(Wt.bounds)}function mt(Wt){yS(`${$h}/${Wt.detail.code}/`,{noscroll:!0})}function Je(Wt){yS(`${$h}/${Wt.detail.value}/`,{noscroll:!0})}function Tr(){f(7,U=j<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const wr=()=>f(5,z=!0),or=()=>f(4,he=!1),kt=()=>f(11,o=!1),At=()=>f(5,z=!0),Pr=()=>f(4,he=!1),Ot=()=>f(11,o=!1),Ar=()=>f(11,o=!0),rt=()=>f(5,z=!1),ur=()=>f(4,he=!1),$r=()=>f(4,he=!0),li=()=>f(5,z=!1),kr=()=>f(11,o=!1),vt=()=>f(4,he=!1),nt=()=>f(5,z=!0),dr=()=>f(11,o=!1);function Un(Wt){pe=Wt,f(8,pe)}function la(){j=this.clientWidth,f(3,j)}function Mi(){j=this.clientWidth,f(3,j)}function _n(){j=this.clientWidth,f(3,j)}function ri(){j=this.clientWidth,f(3,j)}function Ia(){j=this.clientWidth,f(3,j)}function br(){j=this.clientWidth,f(3,j)}function qn(){j=this.clientWidth,f(3,j)}function Ya(){j=this.clientWidth,f(3,j)}function qr(){j=this.clientWidth,f(3,j)}function Lt(){j=this.clientWidth,f(3,j)}function Yi(){j=this.clientWidth,f(3,j)}function Ni(){j=this.clientWidth,f(3,j)}function ui(){j=this.clientWidth,f(3,j)}function fo(){j=this.clientWidth,f(3,j)}return u.$$set=Wt=>{"search_data"in Wt&&f(0,P=Wt.search_data),"place"in Wt&&f(1,F=Wt.place),"ni"in Wt&&f(2,V=Wt.ni)},u.$$.update=()=>{u.$$.dirty[0]&8&&j&&Tr(),u.$$.dirty[0]&18&&f(13,y=he?"Same area 2011":F&&F.parents[0]?"NI 2021":null),u.$$.dirty[0]&2&&f(6,x=!(F.type!="ni"&&F.type!="lgd")),u.$$.dirty[0]&114&&f(12,_=z?null:he&&x?"prev":!he&&F.type!="ni"?"ni":null),u.$$.dirty[0]&2&&F&&Mt(F)},f(5,z=!0),f(11,o=!1),[P,F,V,j,he,z,x,U,pe,Ie,we,o,_,y,Oe,mt,Je,wr,or,kt,At,Pr,Ot,Ar,rt,ur,$r,li,kr,vt,nt,dr,Un,la,Mi,_n,ri,Ia,br,qn,Ya,qr,Lt,Yi,Ni,ui,fo]}class cz extends Yo{constructor(h){super(),Jo(this,h,rz,tz,Qo,{search_data:0,place:1,ni:2},null,[-1,-1,-1])}}export{cz as default,uz as load,lz as prerender};
