import{S as Hs,i as Xs,s as Ws,O as Jm,l as D,m as M,n as R,h as T,p as S,q as re,J as gn,b as Ae,Q as Qm,R as $m,T as ey,f as it,t as pt,a as _e,c as be,I as w,M as On,E as Bn,G as Uc,U as Y2,V as Tx,W as Pp,r as ee,u as te,v as dt,e as _a,X as qc,Y as Gs,Z as Ks,g as xu,d as wu,j as J2,o as Q2,K as Xy,_ as ur,$ as ai,a0 as zo,a1 as Po,w as Yt,x as Jt,y as Qt,B as $t,P as lE,a2 as uE,a3 as Z_,a4 as G_,a5 as cE,a6 as Rv,C as Pv,z as Cv,A as Dv}from"../../chunks/index-06ab0f50.js";import{g as sa,a as Bv,S as hE,m as mf,b as Ax,c as pE,d as $a,e as zx}from"../../chunks/Section-fc732132.js";import{b as Vh}from"../../chunks/paths-1c47712a.js";import{c as kd,w as oi,d as za}from"../../chunks/singletons-e0a6622d.js";/* empty css                                                                 */var Px={},T_={},A_=34,Uy=10,z_=13;function $2(u){return new Function("d","return {"+u.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function fE(u,h){var f=$2(u);return function(y,_){return h(f(y),_,u)}}function Cx(u){var h=Object.create(null),f=[];return u.forEach(function(y){for(var _ in y)_ in h||f.push(h[_]=_)}),f}function Hl(u,h){var f=u+"",y=f.length;return y<h?new Array(h-y+1).join(0)+f:f}function dE(u){return u<0?"-"+Hl(-u,6):u>9999?"+"+Hl(u,6):Hl(u,4)}function mE(u){var h=u.getUTCHours(),f=u.getUTCMinutes(),y=u.getUTCSeconds(),_=u.getUTCMilliseconds();return isNaN(u)?"Invalid Date":dE(u.getUTCFullYear())+"-"+Hl(u.getUTCMonth()+1,2)+"-"+Hl(u.getUTCDate(),2)+(_?"T"+Hl(h,2)+":"+Hl(f,2)+":"+Hl(y,2)+"."+Hl(_,3)+"Z":y?"T"+Hl(h,2)+":"+Hl(f,2)+":"+Hl(y,2)+"Z":f||h?"T"+Hl(h,2)+":"+Hl(f,2)+"Z":"")}function yE(u){var h=new RegExp('["'+u+`
\r]`),f=u.charCodeAt(0);function y(j,U){var he,ie,De=_(j,function(we,Ce){if(he)return he(we,Ce-1);ie=we,he=U?fE(we,U):$2(we)});return De.columns=ie||[],De}function _(j,U){var he=[],ie=j.length,De=0,we=0,Ce,Ue=ie<=0,At=!1;j.charCodeAt(ie-1)===Uy&&--ie,j.charCodeAt(ie-1)===z_&&--ie;function Dt(){if(Ue)return T_;if(At)return At=!1,Px;var tt,Ar=De,yr;if(j.charCodeAt(Ar)===A_){for(;De++<ie&&j.charCodeAt(De)!==A_||j.charCodeAt(++De)===A_;);return(tt=De)>=ie?Ue=!0:(yr=j.charCodeAt(De++))===Uy?At=!0:yr===z_&&(At=!0,j.charCodeAt(De)===Uy&&++De),j.slice(Ar+1,tt-1).replace(/""/g,'"')}for(;De<ie;){if((yr=j.charCodeAt(tt=De++))===Uy)At=!0;else if(yr===z_)At=!0,j.charCodeAt(De)===Uy&&++De;else if(yr!==f)continue;return j.slice(Ar,tt)}return Ue=!0,j.slice(Ar,ie)}for(;(Ce=Dt())!==T_;){for(var ht=[];Ce!==Px&&Ce!==T_;)ht.push(Ce),Ce=Dt();U&&(ht=U(ht,we++))==null||he.push(ht)}return he}function v(j,U){return j.map(function(he){return U.map(function(ie){return V(he[ie])}).join(u)})}function a(j,U){return U==null&&(U=Cx(j)),[U.map(V).join(u)].concat(v(j,U)).join(`
`)}function P(j,U){return U==null&&(U=Cx(j)),v(j,U).join(`
`)}function A(j){return j.map(F).join(`
`)}function F(j){return j.map(V).join(u)}function V(j){return j==null?"":j instanceof Date?mE(j):h.test(j+="")?'"'+j.replace(/"/g,'""')+'"':j}return{parse:y,parseRows:_,format:a,formatBody:P,formatRows:A,formatRow:F,formatValue:V}}var vE=yE(","),gE=vE.parse;function _E(u){for(var h in u){var f=u[h].trim(),y,_;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(y=+f))f=y;else if(_=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))bE&&!!_[4]&&!_[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;u[h]=f}return u}const bE=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function xE(u,h=window.fetch){let y=await(await h(u)).text();return await gE(y,_E)}function yf(u){let h=Math.round(u)%10;return u==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function Ov(u){return u>0?"increase":u<0?"decrease":"nochange"}function vf(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"No change"}function Vv(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"<1%)"}kd.disable_scroll_handling;const Dx=kd.goto;kd.invalidate;kd.prefetch;kd.prefetch_routes;kd.before_navigate;kd.after_navigate;var wE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},EE={rgb2hsl:Wy,rgb2hsv:Zv,rgb2hwb:Yy,rgb2cmyk:Jy,rgb2keyword:Qy,rgb2xyz:K_,rgb2lab:H_,rgb2lch:SE,hsl2rgb:Gv,hsl2hsv:kE,hsl2hwb:IE,hsl2cmyk:TE,hsl2keyword:AE,hsv2rgb:Kv,hsv2hsl:zE,hsv2hwb:PE,hsv2cmyk:CE,hsv2keyword:DE,hwb2rgb:$y,hwb2hsl:ME,hwb2hsv:LE,hwb2cmyk:RE,hwb2keyword:BE,cmyk2rgb:ev,cmyk2hsl:OE,cmyk2hsv:VE,cmyk2hwb:FE,cmyk2keyword:NE,keyword2rgb:Id,keyword2hsl:ZE,keyword2hsv:GE,keyword2hwb:KE,keyword2cmyk:HE,keyword2lab:XE,keyword2xyz:WE,xyz2rgb:ew,xyz2lab:tw,xyz2lch:UE,lab2xyz:X_,lab2rgb:rw,lab2lch:W_,lch2lab:Y_,lch2xyz:qE,lch2rgb:jE};function Wy(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,_=Math.min(h,f,y),v=Math.max(h,f,y),a=v-_,P,A,F;return v==_?P=0:h==v?P=(f-y)/a:f==v?P=2+(y-h)/a:y==v&&(P=4+(h-f)/a),P=Math.min(P*60,360),P<0&&(P+=360),F=(_+v)/2,v==_?A=0:F<=.5?A=a/(v+_):A=a/(2-v-_),[P,A*100,F*100]}function Zv(u){var h=u[0],f=u[1],y=u[2],_=Math.min(h,f,y),v=Math.max(h,f,y),a=v-_,P,A,F;return v==0?A=0:A=a/v*1e3/10,v==_?P=0:h==v?P=(f-y)/a:f==v?P=2+(y-h)/a:y==v&&(P=4+(h-f)/a),P=Math.min(P*60,360),P<0&&(P+=360),F=v/255*1e3/10,[P,A,F]}function Yy(u){var h=u[0],f=u[1],v=u[2],y=Wy(u)[0],_=1/255*Math.min(h,Math.min(f,v)),v=1-1/255*Math.max(h,Math.max(f,v));return[y,_*100,v*100]}function Jy(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,_,v,a,P;return P=Math.min(1-h,1-f,1-y),_=(1-h-P)/(1-P)||0,v=(1-f-P)/(1-P)||0,a=(1-y-P)/(1-P)||0,[_*100,v*100,a*100,P*100]}function Qy(u){return iw[JSON.stringify(u)]}function K_(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var _=h*.4124+f*.3576+y*.1805,v=h*.2126+f*.7152+y*.0722,a=h*.0193+f*.1192+y*.9505;return[_*100,v*100,a*100]}function H_(u){var h=K_(u),f=h[0],y=h[1],_=h[2],v,a,P;return f/=95.047,y/=100,_/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,v=116*y-16,a=500*(f-y),P=200*(y-_),[v,a,P]}function SE(u){return W_(H_(u))}function Gv(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,_,v,a,P,A;if(f==0)return A=y*255,[A,A,A];y<.5?v=y*(1+f):v=y+f-y*f,_=2*y-v,P=[0,0,0];for(var F=0;F<3;F++)a=h+1/3*-(F-1),a<0&&a++,a>1&&a--,6*a<1?A=_+(v-_)*6*a:2*a<1?A=v:3*a<2?A=_+(v-_)*(2/3-a)*6:A=_,P[F]=A*255;return P}function kE(u){var h=u[0],f=u[1]/100,y=u[2]/100,_,v;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,v=(y+f)/2,_=2*f/(y+f),[h,_*100,v*100])}function IE(u){return Yy(Gv(u))}function TE(u){return Jy(Gv(u))}function AE(u){return Qy(Gv(u))}function Kv(u){var h=u[0]/60,f=u[1]/100,A=u[2]/100,y=Math.floor(h)%6,_=h-Math.floor(h),v=255*A*(1-f),a=255*A*(1-f*_),P=255*A*(1-f*(1-_)),A=255*A;switch(y){case 0:return[A,P,v];case 1:return[a,A,v];case 2:return[v,A,P];case 3:return[v,a,A];case 4:return[P,v,A];case 5:return[A,v,a]}}function zE(u){var h=u[0],f=u[1]/100,y=u[2]/100,_,v;return v=(2-f)*y,_=f*y,_/=v<=1?v:2-v,_=_||0,v/=2,[h,_*100,v*100]}function PE(u){return Yy(Kv(u))}function CE(u){return Jy(Kv(u))}function DE(u){return Qy(Kv(u))}function $y(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,_=f+y,v,a,P,A;switch(_>1&&(f/=_,y/=_),v=Math.floor(6*h),a=1-y,P=6*h-v,(v&1)!=0&&(P=1-P),A=f+P*(a-f),v){default:case 6:case 0:r=a,g=A,b=f;break;case 1:r=A,g=a,b=f;break;case 2:r=f,g=a,b=A;break;case 3:r=f,g=A,b=a;break;case 4:r=A,g=f,b=a;break;case 5:r=a,g=f,b=A;break}return[r*255,g*255,b*255]}function ME(u){return Wy($y(u))}function LE(u){return Zv($y(u))}function RE(u){return Jy($y(u))}function BE(u){return Qy($y(u))}function ev(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,_=u[3]/100,v,a,P;return v=1-Math.min(1,h*(1-_)+_),a=1-Math.min(1,f*(1-_)+_),P=1-Math.min(1,y*(1-_)+_),[v*255,a*255,P*255]}function OE(u){return Wy(ev(u))}function VE(u){return Zv(ev(u))}function FE(u){return Yy(ev(u))}function NE(u){return Qy(ev(u))}function ew(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,_,v,a;return _=h*3.2406+f*-1.5372+y*-.4986,v=h*-.9689+f*1.8758+y*.0415,a=h*.0557+f*-.204+y*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v=v*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,_=Math.min(Math.max(0,_),1),v=Math.min(Math.max(0,v),1),a=Math.min(Math.max(0,a),1),[_*255,v*255,a*255]}function tw(u){var h=u[0],f=u[1],y=u[2],_,v,a;return h/=95.047,f/=100,y/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,_=116*f-16,v=500*(h-f),a=200*(f-y),[_,v,a]}function UE(u){return W_(tw(u))}function X_(u){var h=u[0],f=u[1],y=u[2],_,v,a,P;return h<=8?(v=h*100/903.3,P=7.787*(v/100)+16/116):(v=100*Math.pow((h+16)/116,3),P=Math.pow(v/100,1/3)),_=_/95.047<=.008856?_=95.047*(f/500+P-16/116)/7.787:95.047*Math.pow(f/500+P,3),a=a/108.883<=.008859?a=108.883*(P-y/200-16/116)/7.787:108.883*Math.pow(P-y/200,3),[_,v,a]}function W_(u){var h=u[0],f=u[1],y=u[2],_,v,a;return _=Math.atan2(y,f),v=_*360/2/Math.PI,v<0&&(v+=360),a=Math.sqrt(f*f+y*y),[h,a,v]}function rw(u){return ew(X_(u))}function Y_(u){var h=u[0],f=u[1],y=u[2],_,v,a;return a=y/360*2*Math.PI,_=f*Math.cos(a),v=f*Math.sin(a),[h,_,v]}function qE(u){return X_(Y_(u))}function jE(u){return rw(Y_(u))}function Id(u){return O_[u]}function ZE(u){return Wy(Id(u))}function GE(u){return Zv(Id(u))}function KE(u){return Yy(Id(u))}function HE(u){return Jy(Id(u))}function XE(u){return H_(Id(u))}function WE(u){return K_(Id(u))}var O_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},iw={};for(var Mx in O_)iw[JSON.stringify(O_[Mx])]=Mx;var P_=EE,wd=function(){return new tv};for(var qy in P_){wd[qy+"Raw"]=function(u){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),P_[u](h)}}(qy);var Lx=/(\w+)2(\w+)/.exec(qy),C_=Lx[1],YE=Lx[2];wd[C_]=wd[C_]||{},wd[C_][YE]=wd[qy]=function(u){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=P_[u](h);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(qy)}var tv=function(){this.convs={}};tv.prototype.routeSpace=function(u,h){var f=h[0];return f===void 0?this.getValues(u):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(u,f))};tv.prototype.setValues=function(u,h){return this.space=u,this.convs={},this.convs[u]=h,this};tv.prototype.getValues=function(u){var h=this.convs[u];if(!h){var f=this.space,y=this.convs[f];h=wd[f][u](y),this.convs[u]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(u){tv.prototype[u]=function(h){return this.routeSpace(u,arguments)}});var JE=wd,D_=JE,QE=function(u){var h,f,y,_;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(u)){var v=h[1],a=v.replace(/a$/,""),P=a==="cmyk"?4:3;f=D_[a],y=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(F,V){return/%$/.test(F)&&V===P?parseFloat(F)/100:(/%$/.test(F),parseFloat(F))}),v===a&&y.push(1),_=y[P]===void 0?1:y[P],y=y.slice(0,P),f[a]=function(){return y}}else if(/^#[A-Fa-f0-9]+$/.test(u)){var a=u.replace(/^#/,""),P=a.length;f=D_.rgb,y=a.split(P===3?/(.)/:/(..)/),y=y.filter(Boolean).map(function(j){return parseInt(P===3?j+j:j,16)}),_=1,f.rgb=function(){return y},y[0]||(y[0]=0),y[1]||(y[1]=0),y[2]||(y[2]=0)}else f=D_.keyword,f.keyword=function(){return u},y=u,_=1;var A={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{A.rgb=f.rgb(y)}catch{}try{A.hsl=f.hsl(y)}catch{}try{A.hsv=f.hsv(y)}catch{}try{A.cmyk=f.cmyk(y)}catch{}try{A.keyword=f.keyword(y)}catch{}return A.rgb&&(A.hex="#"+A.rgb.map(function(F){var V=F.toString(16);return V.length===1?"0"+V:V}).join("")),A.rgb&&(A.rgba=A.rgb.concat(_)),A.hsl&&(A.hsla=A.hsl.concat(_)),A.hsv&&(A.hsva=A.hsv.concat(_)),A.cmyk&&(A.cmyka=A.cmyk.concat(_)),A};function $E(u){let h,f;const y=u[5].default,_=Jm(y,u,u[4],null);return{c(){h=D("span"),_&&_.c(),this.h()},l(v){h=M(v,"SPAN",{class:!0,style:!0,role:!0});var a=R(h);_&&_.l(a),a.forEach(T),this.h()},h(){S(h,"class","em svelte-s1t2y4"),re(h,"background-color",u[0]),re(h,"color",u[2]),S(h,"role","presentation"),gn(h,"nowrap",u[1])},m(v,a){Ae(v,h,a),_&&_.m(h,null),f=!0},p(v,[a]){_&&_.p&&(!f||a&16)&&Qm(_,y,v,v[4],f?ey(y,v[4],a,null):$m(v[4]),null),(!f||a&1)&&re(h,"background-color",v[0]),(!f||a&4)&&re(h,"color",v[2]),a&2&&gn(h,"nowrap",v[1])},i(v){f||(it(_,v),f=!0)},o(v){pt(_,v),f=!1},d(v){v&&T(h),_&&_.d(v)}}}function eS(u,h,f){let y,{$$slots:_={},$$scope:v}=h,{color:a="lightgrey"}=h,{nowrap:P=!0}=h;function A(V){return(V[0]*299+V[1]*587+V[2]*114)/1e3>125?"black":"white"}let F="black";return u.$$set=V=>{"color"in V&&f(0,a=V.color),"nowrap"in V&&f(1,P=V.nowrap),"$$scope"in V&&f(4,v=V.$$scope)},u.$$.update=()=>{u.$$.dirty&1&&f(3,y=QE(a).rgb),u.$$.dirty&8&&y&&f(2,F=A(y))},[a,P,F,y,v,_]}class Hv extends Hs{constructor(h){super(),Xs(this,h,eS,$E,Ws,{color:0,nowrap:1})}}function Rx(u,h,f){const y=u.slice();return y[33]=h[f],y[36]=h,y[35]=f,y}function Bx(u,h,f){const y=u.slice();return y[33]=h[f],y[34]=h,y[35]=f,y}function tS(u){let h,f,y=(u[0]?u[0]:"Select one")+"",_,v,a,P,A,F;return{c(){h=D("a"),f=D("span"),_=ee(y),v=_e(),a=D("span"),P=ee("\xA0"),this.h()},l(V){h=M(V,"A",{id:!0,class:!0});var j=R(h);f=M(j,"SPAN",{class:!0});var U=R(f);_=te(U,y),U.forEach(T),v=be(j),a=M(j,"SPAN",{class:!0});var he=R(a);P=te(he,"\xA0"),he.forEach(T),j.forEach(T),this.h()},h(){S(f,"class","svelte-13flvue"),S(a,"class","button svelte-13flvue"),gn(a,"search",u[3]),gn(a,"down",!u[3]),S(h,"id","toggle"),S(h,"class","svelte-13flvue")},m(V,j){Ae(V,h,j),w(h,f),w(f,_),w(h,v),w(h,a),w(a,P),A||(F=On(h,"click",u[12]),A=!0)},p(V,j){j[0]&1&&y!==(y=(V[0]?V[0]:"Select one")+"")&&dt(_,y),j[0]&8&&gn(a,"search",V[3]),j[0]&8&&gn(a,"down",!V[3])},d(V){V&&T(h),A=!1,F()}}}function rS(u){let h,f,y=u[5][u[1]]+"",_,v,a,P,A,F,V,j=u[2]&&Ox(u);return{c(){h=D("a"),f=D("span"),_=ee(y),v=_e(),j&&j.c(),a=_e(),P=D("span"),A=ee("\xA0"),this.h()},l(U){h=M(U,"A",{id:!0,class:!0});var he=R(h);f=M(he,"SPAN",{class:!0});var ie=R(f);_=te(ie,y),v=be(ie),j&&j.l(ie),ie.forEach(T),a=be(he),P=M(he,"SPAN",{class:!0});var De=R(P);A=te(De,"\xA0"),De.forEach(T),he.forEach(T),this.h()},h(){S(f,"class","selection svelte-13flvue"),S(P,"class","button close svelte-13flvue"),S(h,"id","toggle"),S(h,"class","selected svelte-13flvue")},m(U,he){Ae(U,h,he),w(h,f),w(f,_),w(f,v),j&&j.m(f,null),w(h,a),w(h,P),w(P,A),F||(V=[On(P,"click",u[14]),On(h,"click",u[12])],F=!0)},p(U,he){he[0]&34&&y!==(y=U[5][U[1]]+"")&&dt(_,y),U[2]?j?j.p(U,he):(j=Ox(U),j.c(),j.m(f,null)):j&&(j.d(1),j=null)},d(U){U&&T(h),j&&j.d(),F=!1,Uc(V)}}}function Ox(u){let h,f=u[5][u[2]]+"",y;return{c(){h=D("small"),y=ee(f),this.h()},l(_){h=M(_,"SMALL",{class:!0});var v=R(h);y=te(v,f),v.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(_,v){Ae(_,h,v),w(h,y)},p(_,v){v[0]&36&&f!==(f=_[5][_[2]]+"")&&dt(y,f)},d(_){_&&T(h)}}}function Vx(u){let h,f,y,_,v,a;function P(V,j){return V[4].length<3?oS:V[8][0]&&V[2]?aS:V[8][0]?nS:iS}let A=P(u),F=A(u);return{c(){h=D("div"),f=D("input"),y=_e(),_=D("ul"),F.c(),this.h()},l(V){h=M(V,"DIV",{id:!0,style:!0,class:!0});var j=R(h);f=M(j,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),y=be(j),_=M(j,"UL",{class:!0});var U=R(_);F.l(U),U.forEach(T),j.forEach(T),this.h()},h(){S(f,"type","text"),S(f,"placeholder",""),S(f,"autocomplete","false"),f.autofocus="autofocus",S(f,"onfocus","this.select()"),S(f,"class","svelte-13flvue"),S(_,"class","svelte-13flvue"),S(h,"id","dropdown"),re(h,"top","0"),S(h,"class","svelte-13flvue")},m(V,j){Ae(V,h,j),w(h,f),Tx(f,u[4]),u[24](f),w(h,y),w(h,_),F.m(_,null),u[31](h),f.focus(),v||(a=[On(f,"input",u[23]),On(f,"keyup",u[16])],v=!0)},p(V,j){j[0]&16&&f.value!==V[4]&&Tx(f,V[4]),A===(A=P(V))&&F?F.p(V,j):(F.d(1),F=A(V),F&&(F.c(),F.m(_,null)))},d(V){V&&T(h),u[24](null),F.d(),u[31](null),v=!1,Uc(a)}}}function iS(u){let h,f;return{c(){h=D("li"),f=ee("No results"),this.h()},l(y){h=M(y,"LI",{class:!0});var _=R(h);f=te(_,"No results"),_.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,_){Ae(y,h,_),w(h,f)},p:Bn,d(y){y&&T(h)}}}function nS(u){let h,f=u[8],y=[];for(let _=0;_<f.length;_+=1)y[_]=Fx(Rx(u,f,_));return{c(){for(let _=0;_<y.length;_+=1)y[_].c();h=_a()},l(_){for(let v=0;v<y.length;v+=1)y[v].l(_);h=_a()},m(_,v){for(let a=0;a<y.length;a+=1)y[a].m(_,v);Ae(_,h,v)},p(_,v){if(v[0]&10626){f=_[8];let a;for(a=0;a<f.length;a+=1){const P=Rx(_,f,a);y[a]?y[a].p(P,v):(y[a]=Fx(P),y[a].c(),y[a].m(h.parentNode,h))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},d(_){qc(y,_),_&&T(h)}}}function aS(u){let h,f=u[8],y=[];for(let _=0;_<f.length;_+=1)y[_]=Nx(Bx(u,f,_));return{c(){for(let _=0;_<y.length;_+=1)y[_].c();h=_a()},l(_){for(let v=0;v<y.length;v+=1)y[v].l(_);h=_a()},m(_,v){for(let a=0;a<y.length;a+=1)y[a].m(_,v);Ae(_,h,v)},p(_,v){if(v[0]&10630){f=_[8];let a;for(a=0;a<f.length;a+=1){const P=Bx(_,f,a);y[a]?y[a].p(P,v):(y[a]=Nx(P),y[a].c(),y[a].m(h.parentNode,h))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},d(_){qc(y,_),_&&T(h)}}}function oS(u){let h,f;return{c(){h=D("li"),f=ee("Type a name..."),this.h()},l(y){h=M(y,"LI",{class:!0});var _=R(h);f=te(_,"Type a name..."),_.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,_){Ae(y,h,_),w(h,f)},p:Bn,d(y){y&&T(h)}}}function Fx(u){let h,f=u[33][u[1]]+"",y,_,v=u[35],a,P;function A(){return u[28](u[33])}function F(){return u[29](u[35])}const V=()=>u[30](h,v),j=()=>u[30](null,v);return{c(){h=D("li"),y=ee(f),_=_e(),this.h()},l(U){h=M(U,"LI",{class:!0});var he=R(h);y=te(he,f),_=be(he),he.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue"),gn(h,"highlight",u[7]==u[35])},m(U,he){Ae(U,h,he),w(h,y),w(h,_),V(),a||(P=[On(h,"click",A),On(h,"mouseover",F)],a=!0)},p(U,he){u=U,he[0]&258&&f!==(f=u[33][u[1]]+"")&&dt(y,f),v!==u[35]&&(j(),v=u[35],V()),he[0]&128&&gn(h,"highlight",u[7]==u[35])},d(U){U&&T(h),j(),a=!1,Uc(P)}}}function Nx(u){let h,f=u[33][u[1]]+"",y,_,v,a=u[33][u[2]]+"",P,A,F=u[35],V,j;function U(){return u[25](u[33])}function he(){return u[26](u[35])}const ie=()=>u[27](h,F),De=()=>u[27](null,F);return{c(){h=D("li"),y=ee(f),_=_e(),v=D("small"),P=ee(a),A=_e(),this.h()},l(we){h=M(we,"LI",{class:!0});var Ce=R(h);y=te(Ce,f),_=be(Ce),v=M(Ce,"SMALL",{class:!0});var Ue=R(v);P=te(Ue,a),Ue.forEach(T),A=be(Ce),Ce.forEach(T),this.h()},h(){S(v,"class","svelte-13flvue"),S(h,"class","svelte-13flvue"),gn(h,"highlight",u[7]==u[35])},m(we,Ce){Ae(we,h,Ce),w(h,y),w(h,_),w(h,v),w(v,P),w(h,A),ie(),V||(j=[On(h,"click",U),On(h,"mouseover",he)],V=!0)},p(we,Ce){u=we,Ce[0]&258&&f!==(f=u[33][u[1]]+"")&&dt(y,f),Ce[0]&260&&a!==(a=u[33][u[2]]+"")&&dt(P,a),F!==u[35]&&(De(),F=u[35],ie()),Ce[0]&128&&gn(h,"highlight",u[7]==u[35])},d(we){we&&T(h),De(),V=!1,Uc(j)}}}function sS(u){let h,f,y,_;function v(F,V){return F[5]&&!F[3]?rS:tS}let a=v(u),P=a(u),A=u[6]&&Vx(u);return{c(){h=D("div"),P.c(),f=_e(),A&&A.c(),this.h()},l(F){h=M(F,"DIV",{id:!0,class:!0});var V=R(h);P.l(V),f=be(V),A&&A.l(V),V.forEach(T),this.h()},h(){S(h,"id","select"),S(h,"class","svelte-13flvue"),gn(h,"active",u[6])},m(F,V){Ae(F,h,V),P.m(h,null),w(h,f),A&&A.m(h,null),y||(_=[On(window,"click",u[17]),On(h,"keydown",u[15])],y=!0)},p(F,V){a===(a=v(F))&&P?P.p(F,V):(P.d(1),P=a(F),P&&(P.c(),P.m(h,f))),F[6]?A?A.p(F,V):(A=Vx(F),A.c(),A.m(h,null)):A&&(A.d(1),A=null),V[0]&64&&gn(h,"active",F[6])},i:Bn,o:Bn,d(F){F&&T(h),P.d(),A&&A.d(),y=!1,Uc(_)}}}function lS(u){return new Promise(h=>setTimeout(h,u))}function uS(u,h,f){let y;const _=Y2();let{search_data:v}=h,{selected:a=null}=h,{placeholder:P="Enter a town or area name"}=h,{value:A="code"}=h,{label:F="name"}=h,{group:V=null}=h,{search:j=!1}=h,U=a,he=a?v.find(mt=>{mt[A]==a[A]}):null,ie=!1,De="",we=null,Ce,Ue,At,Dt=[];function ht(mt){mt.stopPropagation(),f(4,De=""),f(6,ie=!ie),lS(10).then(()=>{At&&ie&&At.focus()})}function tt(mt){f(18,a=mt),f(6,ie=!1),_("select",{selected:mt,value:mt[A]})}function Ar(mt){mt.stopPropagation(),f(18,a=null),f(21,U=null),f(5,he=null),_("select",{selected:null,value:null})}function yr(mt){ie&&Ce[0]&&Number.isInteger(we)&&(mt.keyCode===38?(f(7,we-=we>0?1:0),Dt[we].scrollIntoView({block:"nearest",inline:"start"})):mt.keyCode===40&&(f(7,we+=we<Ce.length-1?1:0),Dt[we].scrollIntoView({block:"nearest",inline:"end"})))}function tr(mt){Ce[0]&&Number.isInteger(we)&&mt.keyCode===13&&tt(Ce[we])}function wt(mt){mt.target!==Ue&&(f(6,ie=!1),f(7,we=0))}function bt(){De=this.value,f(4,De)}function kr(mt){Pp[mt?"unshift":"push"](()=>{At=mt,f(10,At)})}const Rt=mt=>tt(mt),zr=mt=>f(7,we=mt);function Qe(mt,nt){Pp[mt?"unshift":"push"](()=>{Dt[nt]=mt,f(11,Dt)})}const ar=mt=>tt(mt),$r=mt=>f(7,we=mt);function si(mt,nt){Pp[mt?"unshift":"push"](()=>{Dt[nt]=mt,f(11,Dt)})}function wr(mt){Pp[mt?"unshift":"push"](()=>{Ue=mt,f(9,Ue)})}return u.$$set=mt=>{"search_data"in mt&&f(19,v=mt.search_data),"selected"in mt&&f(18,a=mt.selected),"placeholder"in mt&&f(0,P=mt.placeholder),"value"in mt&&f(20,A=mt.value),"label"in mt&&f(1,F=mt.label),"group"in mt&&f(2,V=mt.group),"search"in mt&&f(3,j=mt.search)},u.$$.update=()=>{u.$$.dirty[0]&16&&f(22,y=De?new RegExp(De,"i"):null),u.$$.dirty[0]&4718594&&(f(8,Ce=y?v.filter(mt=>y.test(mt[F])):v),f(7,we=0)),u.$$.dirty[0]&3932160&&U!=a&&(f(5,he=v.find(mt=>mt[A]==a[A])),f(21,U=a))},[P,F,V,j,De,he,ie,we,Ce,Ue,At,Dt,ht,tt,Ar,yr,tr,wt,a,v,A,U,y,bt,kr,Rt,zr,Qe,ar,$r,si,wr]}class cS extends Hs{constructor(h){super(),Xs(this,h,uS,sS,Ws,{search_data:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var Zy={exports:{}};(function(u,h){(function(f,y){u.exports=y()})(wE,function(){var f,y,_;function v(a,P){if(!f)f=P;else if(!y)y=P;else{var A="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",F={};f(F),_=P(F),typeof window<"u"&&(_.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}return v(["exports"],function(a){function P(e,t){return e(t={exports:{}},t.exports),t.exports}var A=F;function F(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}F.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},F.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},F.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},F.prototype.solveCurveX=function(e,t){var i,l,p,d,x;for(t===void 0&&(t=1e-6),p=e,x=0;x<8;x++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var I=this.sampleCurveDerivativeX(p);if(Math.abs(I)<1e-6)break;p-=d/I}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},F.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var V=j;function j(e,t){this.x=e,this.y=t}j.prototype={clone:function(){return new j(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},j.convert=function(e){return e instanceof j?e:Array.isArray(e)?new j(e[0],e[1]):e};var U=typeof self<"u"?self:{},he=Math.pow(2,53)-1;function ie(e,t,i,l){var p=new A(e,t,i,l);return function(d){return p.solve(d)}}var De=ie(.25,.1,.25,1);function we(e,t,i){return Math.min(i,Math.max(t,e))}function Ce(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var x in d)e[x]=d[x]}return e}var At=1;function Dt(){return At++}function ht(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function tt(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Ar(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function yr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function tr(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function wt(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function bt(e){return Array.isArray(e)?e.map(bt):typeof e=="object"&&e?tr(e,bt):e}var kr={};function Rt(e){kr[e]||(typeof console<"u"&&console.warn(e),kr[e]=!0)}function zr(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Qe(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,x=void 0;i<l;p=i++)t+=((x=e[p]).x-(d=e[i]).x)*(d.y+x.y);return t}function ar(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $r(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,x){var I=d||x;return t[p]=!I||I.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var si=null;function wr(e){if(si==null){var t=e.navigator?e.navigator.userAgent:null;si=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return si}function mt(e){try{var t=U[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var nt,cr,ji,la,Bi=U.performance&&U.performance.now?U.performance.now.bind(U.performance):Date.now.bind(Date),zi=U.requestAnimationFrame||U.mozRequestAnimationFrame||U.webkitRequestAnimationFrame||U.msRequestAnimationFrame,li=U.cancelAnimationFrame||U.mozCancelAnimationFrame||U.webkitCancelAnimationFrame||U.msCancelAnimationFrame,tn={now:Bi,frame:function(e){var t=zi(e);return{cancel:function(){return li(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=U.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return nt||(nt=U.document.createElement("a")),nt.href=e,nt.href},hardwareConcurrency:U.navigator&&U.navigator.hardwareConcurrency||4,get devicePixelRatio(){return U.devicePixelRatio},get prefersReducedMotion(){return!!U.matchMedia&&(cr==null&&(cr=U.matchMedia("(prefers-reduced-motion: reduce)")),cr.matches)}},rr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Oi={supported:!1,testSupport:function(e){!Za&&la&&(Ir?Bt(e):ji=e)}},Za=!1,Ir=!1;function Bt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,la),e.isContextLost())return;Oi.supported=!0}catch{}e.deleteTexture(t),Za=!0}U.document&&((la=U.document.createElement("img")).onload=function(){ji&&Bt(ji),ji=null,Ir=!0},la.onerror=function(){Za=!0,ji=null},la.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var rn="01",mi=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function Zr(e){return e.indexOf("mapbox:")===0}mi.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",rn,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},mi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},mi.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},mi.prototype.normalizeStyleURL=function(e,t){if(!Zr(e))return e;var i=Or(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},mi.prototype.normalizeGlyphsURL=function(e,t){if(!Zr(e))return e;var i=Or(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},mi.prototype.normalizeSourceURL=function(e,t){if(!Zr(e))return e;var i=Or(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},mi.prototype.normalizeSpriteURL=function(e,t,i,l){var p=Or(e);return Zr(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,bi(p))},mi.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Zr(e))return e;var i=Or(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(tn.devicePixelRatio>=2||t===512?"@2x":"")+(Oi.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,x=p;d<x.length;d+=1){var I=x[d].match(/^access_token=(.*)$/);if(I)return I[1]}return null}(i.params)||rr.ACCESS_TOKEN;return rr.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},mi.prototype.canonicalizeTileURL=function(e,t){var i=Or(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},mi.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&Zr(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var x=d[p];Ut(x)?l.push(this.canonicalizeTileURL(x,i)):l.push(x)}return l},mi.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=Or(rr.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!rr.REQUIRE_ACCESS_TOKEN)return bi(e);if(!(t=t||rr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),bi(e)};var eo=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ut(e){return eo.test(e)}var yi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Or(e){var t=e.match(yi);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function bi(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Gr(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(U.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Vr=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Vr.prototype.getStorageKey=function(e){var t,i=Gr(rr.ACCESS_TOKEN);return t=i&&i.u?U.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(Number("0x"+p))})):rr.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Vr.prototype.fetchEventData=function(){var e=mt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=U.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=U.localStorage.getItem(i);p&&(this.anonId=p)}catch{Rt("Unable to read from LocalStorage")}},Vr.prototype.saveEventData=function(){var e=mt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{U.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&U.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Rt("Unable to write to LocalStorage")}},Vr.prototype.processRequests=function(e){},Vr.prototype.postEvent=function(e,t,i,l){var p=this;if(rr.EVENTS_URL){var d=Or(rr.EVENTS_URL);d.params.push("access_token="+(l||rr.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:rn,userId:this.anonId},I=t?Ue(x,t):x,C={url:bi(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([I])};this.pendingRequest=Wr(C,function(L){p.pendingRequest=null,i(L),p.saveEventData(),p.processRequests(l)})}},Vr.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var xi,wi,Mr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p,(rr.EVENTS_URL&&d||rr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(x){return Zr(x)||Ut(x)}))&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,x=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),tt(this.anonId)||(this.anonId=ht()),this.postEvent(x,{skuToken:this.skuToken},function(I){I||d&&(l.success[d]=!0)},i))}},t}(Vr),er=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){rr.EVENTS_URL&&rr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return Zr(p)||Ut(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=Gr(rr.ACCESS_TOKEN),d=p?p.u:rr.ACCESS_TOKEN,x=d!==this.eventData.tokenU;tt(this.anonId)||(this.anonId=ht(),x=!0);var I=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),L=new Date(I),O=(I-this.eventData.lastSuccess)/864e5;x=x||O>=1||O<-1||C.getDate()!==L.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(I,{"enabled.telemetry":!1},function(q){q||(l.eventData.lastSuccess=I,l.eventData.tokenU=d)},i)}},t}(Vr)),Pr=er.postTurnstileEvent.bind(er),Yn=new Mr,jn=Yn.postMapLoadEvent.bind(Yn),Vn=500,Jn=50;function vi(){U.caches&&!xi&&(xi=U.caches.open("mapbox-tiles"))}function Zi(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var _n,to=1/0;function An(){return _n==null&&(_n=U.OffscreenCanvas&&new U.OffscreenCanvas(1,1).getContext("2d")&&typeof U.createImageBitmap=="function"),_n}var is={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(is);var bn=function(e){function t(i,l,p){l===401&&Ut(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Pi=ar()?function(){return self.worker&&self.worker.referrer}:function(){return(U.location.protocol==="blob:"?U.parent:U).location.href},ei,nn,Qn=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Pi())&&!/^\w+:/.test(i))){if(U.fetch&&U.Request&&U.AbortController&&U.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,x=new U.AbortController,I=new U.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Pi(),signal:x.signal}),C=!1,L=!1,O=(d=I.url).indexOf("sku=")>0&&Ut(d);l.type==="json"&&I.headers.set("Accept","application/json");var q=function(W,se,ce){if(!L){if(W&&W.message!=="SecurityError"&&Rt(W),se&&ce)return K(se);var ye=Date.now();U.fetch(I).then(function(pe){if(pe.ok){var Ee=O?pe.clone():null;return K(pe,Ee,ye)}return p(new bn(pe.statusText,pe.status,l.url))}).catch(function(pe){pe.code!==20&&p(new Error(pe.message))})}},K=function(W,se,ce){(l.type==="arrayBuffer"?W.arrayBuffer():l.type==="json"?W.json():W.text()).then(function(ye){L||(se&&ce&&function(pe,Ee,Te){if(vi(),xi){var Pe={status:Ee.status,statusText:Ee.statusText,headers:new U.Headers};Ee.headers.forEach(function(Ne,Ke){return Pe.headers.set(Ke,Ne)});var Be=$r(Ee.headers.get("Cache-Control")||"");Be["no-store"]||(Be["max-age"]&&Pe.headers.set("Expires",new Date(Te+1e3*Be["max-age"]).toUTCString()),new Date(Pe.headers.get("Expires")).getTime()-Te<42e4||function(Ne,Ke){if(wi===void 0)try{new Response(new ReadableStream),wi=!0}catch{wi=!1}wi?Ke(Ne.body):Ne.blob().then(Ke)}(Ee,function(Ne){var Ke=new U.Response(Ne,Pe);vi(),xi&&xi.then(function(Ye){return Ye.put(Zi(pe.url),Ke)}).catch(function(Ye){return Rt(Ye.message)})}))}}(I,se,ce),C=!0,p(null,ye,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(function(ye){L||p(new Error(ye.message))})};return O?function(W,se){if(vi(),!xi)return se(null);var ce=Zi(W.url);xi.then(function(ye){ye.match(ce).then(function(pe){var Ee=function(Te){if(!Te)return!1;var Pe=new Date(Te.headers.get("Expires")||0),Be=$r(Te.headers.get("Cache-Control")||"");return Pe>Date.now()&&!Be["no-cache"]}(pe);ye.delete(ce),Ee&&ye.put(ce,pe.clone()),se(null,pe,Ee)}).catch(se)}).catch(se)}(I,q):q(null,null),{cancel:function(){L=!0,C||x.abort()}}}(e,t);if(ar()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new U.XMLHttpRequest;for(var x in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(x,l.headers[x]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var I=d.response;if(l.type==="json")try{I=JSON.parse(d.response)}catch(C){return p(C)}p(null,I,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new bn(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},zn=function(e,t){return Qn(Ue(e,{type:"arrayBuffer"}),t)},Wr=function(e,t){return Qn(Ue(e,{method:"POST"}),t)},N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ei=[],nn=0;var G=function(e,t){if(Oi.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),nn>=rr.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return ei.push(i),i}nn++;var l=!1,p=function(){if(!l)for(l=!0,nn--;ei.length&&nn<rr.MAX_PARALLEL_IMAGE_REQUESTS;){var x=ei.shift();x.cancelled||(x.cancel=G(x.requestParameters,x.callback).cancel)}},d=zn(e,function(x,I,C,L){p(),x?t(x):I&&(An()?function(O,q){var K=new U.Blob([new Uint8Array(O)],{type:"image/png"});U.createImageBitmap(K).then(function(W){q(null,W)}).catch(function(W){q(new Error("Could not load image because of "+W.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(I,t):function(O,q,K,W){var se=new U.Image,ce=U.URL;se.onload=function(){q(null,se),ce.revokeObjectURL(se.src),se.onload=null,U.requestAnimationFrame(function(){se.src=N})},se.onerror=function(){return q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ye=new U.Blob([new Uint8Array(O)],{type:"image/png"});se.cacheControl=K,se.expires=W,se.src=O.byteLength?ce.createObjectURL(ye):N}(I,t,C,L))});return{cancel:function(){d.cancel(),p()}}};function H(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function $(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var oe=function(e,t){t===void 0&&(t={}),Ue(this,t),this.type=e},ve=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",Ue({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(oe),ge=function(){};ge.prototype.on=function(e,t){return this._listeners=this._listeners||{},H(e,t,this._listeners),this},ge.prototype.off=function(e,t){return $(e,t,this._listeners),$(e,t,this._oneTimeListeners),this},ge.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},H(e,t,this._oneTimeListeners),this},ge.prototype.fire=function(e,t){typeof e=="string"&&(e=new oe(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,x=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<x.length;d+=1){var I=x[d];$(i,I,this._oneTimeListeners),I.call(this,e)}var C=this._eventedParent;C&&(Ue(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(e))}else e instanceof ve&&console.error(e.error);return this},ge.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ge.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var X={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ne=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function ke(e){var t=e.value;return t?[new ne(e.key,t,"constants have been deprecated as of v8")]:[]}function qe(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var x in d)e[x]=d[x]}return e}function Ze(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ze(e){if(Array.isArray(e))return e.map(ze);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=ze(e[i]);return t}return Ze(e)}var je=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),ot=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};ot.prototype.concat=function(e){return new ot(this,e)},ot.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},ot.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var st={kind:"null"},Re={kind:"number"},$e={kind:"string"},He={kind:"boolean"},et={kind:"color"},Mt={kind:"object"},We={kind:"value"},qt={kind:"collator"},pr={kind:"formatted"},kt={kind:"resolvedImage"};function ir(e,t){return{kind:"array",itemType:e,N:t}}function Vt(e){if(e.kind==="array"){var t=Vt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Fr=[st,Re,$e,He,et,pr,Mt,ir(We),kt];function Ft(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Ft(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=Fr;i<l.length;i+=1)if(!Ft(l[i],t))return null}}return"Expected "+Vt(e)+" but found "+Vt(t)+" instead."}function _r(e,t){return t.some(function(i){return i.kind===e.kind})}function hr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Ht=P(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(I){return(I=Math.round(I))<0?0:I>255?255:I}function p(I){return l(I[I.length-1]==="%"?parseFloat(I)/100*255:parseInt(I))}function d(I){return(C=I[I.length-1]==="%"?parseFloat(I)/100:parseFloat(I))<0?0:C>1?1:C;var C}function x(I,C,L){return L<0?L+=1:L>1&&(L-=1),6*L<1?I+(C-I)*L*6:2*L<1?C:3*L<2?I+(C-I)*(2/3-L)*6:I}try{t.parseCSSColor=function(I){var C,L=I.replace(/ /g,"").toLowerCase();if(L in i)return i[L].slice();if(L[0]==="#")return L.length===4?(C=parseInt(L.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:L.length===7&&(C=parseInt(L.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var O=L.indexOf("("),q=L.indexOf(")");if(O!==-1&&q+1===L.length){var K=L.substr(0,O),W=L.substr(O+1,q-(O+1)).split(","),se=1;switch(K){case"rgba":if(W.length!==4)return null;se=d(W.pop());case"rgb":return W.length!==3?null:[p(W[0]),p(W[1]),p(W[2]),se];case"hsla":if(W.length!==4)return null;se=d(W.pop());case"hsl":if(W.length!==3)return null;var ce=(parseFloat(W[0])%360+360)%360/360,ye=d(W[1]),pe=d(W[2]),Ee=pe<=.5?pe*(ye+1):pe+ye-pe*ye,Te=2*pe-Ee;return[l(255*x(Te,Ee,ce+1/3)),l(255*x(Te,Ee,ce)),l(255*x(Te,Ee,ce-1/3)),se];default:return null}}return null}}catch{}}).parseCSSColor,lr=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};lr.parse=function(e){if(e){if(e instanceof lr)return e;if(typeof e=="string"){var t=Ht(e);if(t)return new lr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},lr.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},lr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},lr.black=new lr(0,0,0,1),lr.white=new lr(1,1,1,1),lr.transparent=new lr(0,0,0,0),lr.red=new lr(1,0,0,1);var gi=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};gi.prototype.compare=function(e,t){return this.collator.compare(e,t)},gi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Pn=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},Ei=function(e){this.sections=e};Ei.fromString=function(e){return new Ei([new Pn(e,null,null,null,null)])},Ei.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Ei.factory=function(e){return e instanceof Ei?e:Ei.fromString(e)},Ei.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Ei.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var Si=function(e){this.name=e.name,this.available=e.available};function an(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function on(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof lr||e instanceof gi||e instanceof Ei||e instanceof Si)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!on(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!on(e[l]))return!1;return!0}return!1}function br(e){if(e===null)return st;if(typeof e=="string")return $e;if(typeof e=="boolean")return He;if(typeof e=="number")return Re;if(e instanceof lr)return et;if(e instanceof gi)return qt;if(e instanceof Ei)return pr;if(e instanceof Si)return kt;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=br(p[l]);if(t){if(t===d)continue;t=We;break}t=d}return ir(t||We,i)}return Mt}function Gi(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof lr||e instanceof Ei||e instanceof Si?e.toString():JSON.stringify(e)}Si.prototype.toString=function(){return this.name},Si.fromString=function(e){return e?new Si({name:e,available:!1}):null},Si.prototype.serialize=function(){return["image",this.name]};var sn=function(e,t){this.type=e,this.value=t};sn.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!on(e[1]))return t.error("invalid value");var i=e[1],l=br(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new sn(l,i)},sn.prototype.evaluate=function(){return this.value},sn.prototype.eachChild=function(){},sn.prototype.outputDefined=function(){return!0},sn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof lr?["rgba"].concat(this.value.toArray()):this.value instanceof Ei?this.value.serialize():this.value};var Yr=function(e){this.name="ExpressionEvaluationError",this.message=e};Yr.prototype.toJSON=function(){return this.message};var ln={string:$e,number:Re,boolean:He,object:Mt},Er=function(e,t){this.type=e,this.args=t};Er.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,x;if(e.length>2){var I=e[1];if(typeof I!="string"||!(I in ln)||I==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=ln[I],l++}else d=We;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);x=e[2],l++}i=ir(d,x)}else i=ln[p];for(var C=[];l<e.length;l++){var L=t.parse(e[l],l,We);if(!L)return null;C.push(L)}return new Er(i,C)},Er.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!Ft(this.type,br(i)))return i;if(t===this.args.length-1)throw new Yr("Expected value to be of type "+Vt(this.type)+", but found "+Vt(br(i))+" instead.")}return null},Er.prototype.eachChild=function(e){this.args.forEach(e)},Er.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Er.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var ui=function(e){this.type=pr,this.sections=e};ui.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var x=e[d];if(p&&typeof x=="object"&&!Array.isArray(x)){p=!1;var I=null;if(x["font-scale"]&&!(I=t.parse(x["font-scale"],1,Re)))return null;var C=null;if(x["text-font"]&&!(C=t.parse(x["text-font"],1,ir($e))))return null;var L=null;if(x["text-color"]&&!(L=t.parse(x["text-color"],1,et)))return null;var O=l[l.length-1];O.scale=I,O.font=C,O.textColor=L}else{var q=t.parse(e[d],1,We);if(!q)return null;var K=q.type.kind;if(K!=="string"&&K!=="value"&&K!=="null"&&K!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:q,scale:null,font:null,textColor:null})}}return new ui(l)},ui.prototype.evaluate=function(e){return new Ei(this.sections.map(function(t){var i=t.content.evaluate(e);return br(i)===kt?new Pn("",i,null,null,null):new Pn(Gi(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},ui.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},ui.prototype.outputDefined=function(){return!1},ui.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var Vi=function(e){this.type=kt,this.input=e};Vi.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,$e);return i?new Vi(i):t.error("No image name provided.")},Vi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=Si.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},Vi.prototype.eachChild=function(e){e(this.input)},Vi.prototype.outputDefined=function(){return!1},Vi.prototype.serialize=function(){return["image",this.input.serialize()]};var Ys={"to-boolean":He,"to-color":et,"to-number":Re,"to-string":$e},Ki=function(e,t){this.type=e,this.args=t};Ki.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=Ys[i],p=[],d=1;d<e.length;d++){var x=t.parse(e[d],d,We);if(!x)return null;p.push(x)}return new Ki(l,p)},Ki.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof lr)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":an(t[0],t[1],t[2],t[3])))return new lr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Yr(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var x=null,I=0,C=this.args;I<C.length;I+=1){if((x=C[I].evaluate(e))===null)return 0;var L=Number(x);if(!isNaN(L))return L}throw new Yr("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?Ei.fromString(Gi(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Si.fromString(Gi(this.args[0].evaluate(e))):Gi(this.args[0].evaluate(e))},Ki.prototype.eachChild=function(e){this.args.forEach(e)},Ki.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ki.prototype.serialize=function(){if(this.type.kind==="formatted")return new ui([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vi(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var $n=["Unknown","Point","LineString","Polygon"],ti=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ti.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ti.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?$n[this.feature.type]:this.feature.type:null},ti.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ti.prototype.canonicalID=function(){return this.canonical},ti.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ti.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=lr.parse(e)),t};var Jr=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};Jr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Jr.prototype.eachChild=function(e){this.args.forEach(e)},Jr.prototype.outputDefined=function(){return!1},Jr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Jr.parse=function(e,t){var i,l=e[0],p=Jr.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,I=x.filter(function(zt){var ut=zt[0];return!Array.isArray(ut)||ut.length===e.length-1}),C=null,L=0,O=I;L<O.length;L+=1){var q=O[L],K=q[0],W=q[1];C=new Cr(t.registry,t.path,null,t.scope);for(var se=[],ce=!1,ye=1;ye<e.length;ye++){var pe=e[ye],Ee=Array.isArray(K)?K[ye-1]:K.type,Te=C.parse(pe,1+se.length,Ee);if(!Te){ce=!0;break}se.push(Te)}if(!ce)if(Array.isArray(K)&&K.length!==se.length)C.error("Expected "+K.length+" arguments, but found "+se.length+" instead.");else{for(var Pe=0;Pe<se.length;Pe++){var Be=Array.isArray(K)?K[Pe]:K.type,Ne=se[Pe];C.concat(Pe+1).checkSubtype(Be,Ne.type)}if(C.errors.length===0)return new Jr(l,d,W,se)}}if(I.length===1)(i=t.errors).push.apply(i,C.errors);else{for(var Ke=(I.length?I:x).map(function(zt){var ut;return ut=zt[0],Array.isArray(ut)?"("+ut.map(Vt).join(", ")+")":"("+Vt(ut.type)+"...)"}).join(" | "),Ye=[],xt=1;xt<e.length;xt++){var at=t.parse(e[xt],1+Ye.length);if(!at)return null;Ye.push(Vt(at.type))}t.error("Expected arguments of type "+Ke+", but found ("+Ye.join(", ")+") instead.")}return null},Jr.register=function(e,t){for(var i in Jr.definitions=t,t)e[i]=Jr};var ki=function(e,t,i){this.type=qt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function ci(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ro(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Pa(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function Qu(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function ns(e,t){for(var i,l,p,d,x,I,C,L=!1,O=0,q=t.length;O<q;O++)for(var K=t[O],W=0,se=K.length;W<se-1;W++){if((d=(i=e)[0]-(l=K[W])[0])*(C=i[1]-(p=K[W+1])[1])-(I=i[0]-p[0])*(x=i[1]-l[1])==0&&d*I<=0&&x*C<=0)return!1;Qu(e,K[W],K[W+1])&&(L=!L)}return L}function Fn(e,t){for(var i=0;i<t.length;i++)if(ns(e,t[i]))return!0;return!1}function Zn(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],x=(e[0]-i[0])*d-p*(e[1]-i[1]),I=(t[0]-i[0])*d-p*(t[1]-i[1]);return x>0&&I<0||x<0&&I>0}function Ca(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],x=0;x<d.length-1;++x)if((q=[(O=d[x+1])[0]-(L=d[x])[0],O[1]-L[1]])[0]*(K=[(C=t)[0]-(I=e)[0],C[1]-I[1]])[1]-q[1]*K[0]!=0&&Zn(I,C,L,O)&&Zn(L,O,I,C))return!0;var I,C,L,O,q,K;return!1}function Da(e,t){for(var i=0;i<e.length;++i)if(!ns(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(Ca(e[l],e[l+1],t))return!1;return!0}function go(e,t){for(var i=0;i<t.length;i++)if(Da(e,t[i]))return!0;return!1}function ua(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],x=0;x<e[p].length;x++){var I=Pa(e[p][x],i);ci(t,I),d.push(I)}l.push(d)}return l}function Il(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=ua(e[p],t,i);l.push(d)}return l}function as(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}ci(t,e)}function Co(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],x=[],I=0,C=e;I<C.length;I+=1)for(var L=0,O=C[I];L<O.length;L+=1){var q=O[L],K=[q.x+d[0],q.y+d[1]];as(K,t,i,p),x.push(K)}return x}function Fi(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),x=[8192*l.x,8192*l.y],I=[],C=0,L=e;C<L.length;C+=1){for(var O=[],q=0,K=L[C];q<K.length;q+=1){var W=K[q],se=[W.x+x[0],W.y+x[1]];ci(t,se),O.push(se)}I.push(O)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var ce=0,ye=I;ce<ye.length;ce+=1)for(var pe=0,Ee=ye[ce];pe<Ee.length;pe+=1)as(Ee[pe],t,i,d)}return I}ki.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,He);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,He);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,$e))?null:new ki(l,p,d)},ki.prototype.evaluate=function(e){return new gi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ki.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ki.prototype.outputDefined=function(){return!1},ki.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Ci=function(e,t){this.type=He,this.geojson=e,this.geometries=t};function un(e){if(e instanceof Jr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Ci)return!1;var t=!0;return e.eachChild(function(i){t&&!un(i)&&(t=!1)}),t}function Se(e){if(e instanceof Jr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!Se(i)&&(t=!1)}),t}function Hi(e,t){if(e instanceof Jr&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!Hi(l,t)&&(i=!1)}),i}Ci.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(on(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Ci(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Ci(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Ci(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ci.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=ua(i.coordinates,p,d),I=Co(t.geometry(),l,p,d);if(!ro(l,p))return!1;for(var C=0,L=I;C<L.length;C+=1)if(!ns(L[C],x))return!1}if(i.type==="MultiPolygon"){var O=Il(i.coordinates,p,d),q=Co(t.geometry(),l,p,d);if(!ro(l,p))return!1;for(var K=0,W=q;K<W.length;K+=1)if(!Fn(W[K],O))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=ua(i.coordinates,p,d),I=Fi(t.geometry(),l,p,d);if(!ro(l,p))return!1;for(var C=0,L=I;C<L.length;C+=1)if(!Da(L[C],x))return!1}if(i.type==="MultiPolygon"){var O=Il(i.coordinates,p,d),q=Fi(t.geometry(),l,p,d);if(!ro(l,p))return!1;for(var K=0,W=q;K<W.length;K+=1)if(!go(W[K],O))return!1}return!0}(e,this.geometries)}return!1},Ci.prototype.eachChild=function(){},Ci.prototype.outputDefined=function(){return!0},Ci.prototype.serialize=function(){return["within",this.geojson]};var Nn=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Nn.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Nn(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Nn.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Nn.prototype.eachChild=function(){},Nn.prototype.outputDefined=function(){return!1},Nn.prototype.serialize=function(){return["var",this.name]};var Cr=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new ot),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function ca(e,t){for(var i,l=e.length-1,p=0,d=l,x=0;p<=d;)if((i=e[x=Math.floor((p+d)/2)])<=t){if(x===l||t<e[x+1])return x;p=x+1}else{if(!(i>t))throw new Yr("Input is not a number.");d=x-1}return 0}Cr.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},Cr.prototype._parse=function(e,t){function i(L,O,q){return q==="assert"?new Er(O,[L]):q==="coerce"?new Ki(O,[L]):L}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var x=this.expectedType,I=d.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||I.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(x,I))return null}else d=i(d,x,t.typeAnnotation||"coerce");else d=i(d,x,t.typeAnnotation||"assert")}if(!(d instanceof sn)&&d.type.kind!=="resolvedImage"&&function L(O){if(O instanceof Nn)return L(O.boundExpression);if(O instanceof Jr&&O.name==="error"||O instanceof ki||O instanceof Ci)return!1;var q=O instanceof Ki||O instanceof Er,K=!0;return O.eachChild(function(W){K=q?K&&L(W):K&&W instanceof sn}),!!K&&un(O)&&Hi(O,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var C=new ti;try{d=new sn(d.type,d.evaluate(C))}catch(L){return this.error(L.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Cr.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Cr(this.registry,l,t||null,p,this.errors)},Cr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new je(l,e))},Cr.prototype.checkSubtype=function(e,t){var i=Ft(e,t);return i&&this.error(i),i};var Ii=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],x=d[1];this.labels.push(d[0]),this.outputs.push(x)}};function Nr(e,t,i){return e*(1-i)+t*i}Ii.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Re);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var x=d===1?-1/0:e[d],I=e[d+1],C=d,L=d+1;if(typeof x!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(l.length&&l[l.length-1][0]>=x)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var O=t.parse(I,L,p);if(!O)return null;p=p||O.type,l.push([x,O])}return new Ii(p,i,l)},Ii.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[ca(t,l)].evaluate(e)},Ii.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Ii.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Ii.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Ma=Object.freeze({__proto__:null,number:Nr,color:function(e,t,i){return new lr(Nr(e.r,t.r,i),Nr(e.g,t.g,i),Nr(e.b,t.b,i),Nr(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return Nr(l,t[p],i)})}}),ys=6/29*3*(6/29),os=Math.PI/180,jc=180/Math.PI;function Wl(e){return e>.008856451679035631?Math.pow(e,1/3):e/ys+4/29}function vs(e){return e>6/29?e*e*e:ys*(e-4/29)}function ss(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function La(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ea(e){var t=La(e.r),i=La(e.g),l=La(e.b),p=Wl((.4124564*t+.3575761*i+.1804375*l)/.95047),d=Wl((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-Wl((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function ba(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*vs(t),i=.95047*vs(i),l=1.08883*vs(l),new lr(ss(3.2404542*i-1.5371385*t-.4985314*l),ss(-.969266*i+1.8760108*t+.041556*l),ss(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function Zc(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var gs={forward:ea,reverse:ba,interpolate:function(e,t,i){return{l:Nr(e.l,t.l,i),a:Nr(e.a,t.a,i),b:Nr(e.b,t.b,i),alpha:Nr(e.alpha,t.alpha,i)}}},Cn={forward:function(e){var t=ea(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*jc;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*os,i=e.c;return ba({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Zc(e.h,t.h,i),c:Nr(e.c,t.c,i),l:Nr(e.l,t.l,i),alpha:Nr(e.alpha,t.alpha,i)}}},$u=Object.freeze({__proto__:null,lab:gs,hcl:Cn}),hi=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,x=p;d<x.length;d+=1){var I=x[d],C=I[1];this.labels.push(I[0]),this.outputs.push(C)}};function cn(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}hi.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=cn(t,e.base,i,l);else if(e.name==="linear")p=cn(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new A(d[0],d[1],d[2],d[3]).solve(cn(t,1,i,l))}return p},hi.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var x=l[1];if(typeof x!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:x}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var I=l.slice(1);if(I.length!==4||I.some(function(ye){return typeof ye!="number"||ye<0||ye>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:I}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Re)))return null;var C=[],L=null;i==="interpolate-hcl"||i==="interpolate-lab"?L=et:t.expectedType&&t.expectedType.kind!=="value"&&(L=t.expectedType);for(var O=0;O<d.length;O+=2){var q=d[O],K=d[O+1],W=O+3,se=O+4;if(typeof q!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(C.length&&C[C.length-1][0]>=q)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);var ce=t.parse(K,se,L);if(!ce)return null;L=L||ce.type,C.push([q,ce])}return L.kind==="number"||L.kind==="color"||L.kind==="array"&&L.itemType.kind==="number"&&typeof L.N=="number"?new hi(L,i,l,p,C):t.error("Type "+Vt(L)+" is not interpolatable.")},hi.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=ca(t,l),x=hi.interpolationFactor(this.interpolation,l,t[d],t[d+1]),I=i[d].evaluate(e),C=i[d+1].evaluate(e);return this.operator==="interpolate"?Ma[this.type.kind.toLowerCase()](I,C,x):this.operator==="interpolate-hcl"?Cn.reverse(Cn.interpolate(Cn.forward(I),Cn.forward(C),x)):gs.reverse(gs.interpolate(gs.forward(I),gs.forward(C),x))},hi.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},hi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},hi.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var ri=function(e,t){this.type=e,this.args=t};ri.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,x=e.slice(1);d<x.length;d+=1){var I=t.parse(x[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!I)return null;i=i||I.type,p.push(I)}var C=l&&p.some(function(L){return Ft(l,L.type)});return new ri(C?We:i,p)},ri.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof Si&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},ri.prototype.eachChild=function(e){this.args.forEach(e)},ri.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ri.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ls=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};ls.prototype.evaluate=function(e){return this.result.evaluate(e)},ls.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},ls.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var x=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return x?new ls(i,x):null},ls.prototype.outputDefined=function(){return this.result.outputDefined()},ls.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var Ra=function(e,t,i){this.type=e,this.index=t,this.input=i};Ra.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Re),l=t.parse(e[2],2,ir(t.expectedType||We));return i&&l?new Ra(l.type.itemType,i,l):null},Ra.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Yr("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new Yr("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new Yr("Array index must be an integer, but found "+t+" instead.");return i[t]},Ra.prototype.eachChild=function(e){e(this.index),e(this.input)},Ra.prototype.outputDefined=function(){return!1},Ra.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xa=function(e,t){this.type=He,this.needle=e,this.haystack=t};xa.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,We),l=t.parse(e[2],2,We);return i&&l?_r(i.type,[He,$e,Re,st,We])?new xa(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Vt(i.type)+" instead"):null},xa.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!hr(t,["boolean","string","number","null"]))throw new Yr("Expected first argument to be of type boolean, string, number or null, but found "+Vt(br(t))+" instead.");if(!hr(i,["string","array"]))throw new Yr("Expected second argument to be of type array or string, but found "+Vt(br(i))+" instead.");return i.indexOf(t)>=0},xa.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},xa.prototype.outputDefined=function(){return!0},xa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var us=function(e,t,i){this.type=Re,this.needle=e,this.haystack=t,this.fromIndex=i};us.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,We),l=t.parse(e[2],2,We);if(!i||!l)return null;if(!_r(i.type,[He,$e,Re,st,We]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Vt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Re);return p?new us(i,l,p):null}return new us(i,l)},us.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!hr(t,["boolean","string","number","null"]))throw new Yr("Expected first argument to be of type boolean, string, number or null, but found "+Vt(br(t))+" instead.");if(!hr(i,["string","array"]))throw new Yr("Expected second argument to be of type array or string, but found "+Vt(br(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},us.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ba=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};Ba.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],x=2;x<e.length-1;x+=2){var I=e[x],C=e[x+1];Array.isArray(I)||(I=[I]);var L=t.concat(x);if(I.length===0)return L.error("Expected at least one branch label.");for(var O=0,q=I;O<q.length;O+=1){var K=q[O];if(typeof K!="number"&&typeof K!="string")return L.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return L.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof K=="number"&&Math.floor(K)!==K)return L.error("Numeric branch labels must be integer values.");if(i){if(L.checkSubtype(i,br(K)))return null}else i=br(K);if(p[String(K)]!==void 0)return L.error("Branch labels must be unique.");p[String(K)]=d.length}var W=t.parse(C,x,l);if(!W)return null;l=l||W.type,d.push(W)}var se=t.parse(e[1],1,We);if(!se)return null;var ce=t.parse(e[e.length-1],e.length-1,l);return ce?se.type.kind!=="value"&&t.concat(1).checkSubtype(i,se.type)?null:new Ba(i,l,se,p,d,ce):null},Ba.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(br(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Ba.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ba.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Ba.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var x=d[p];(q=l[this.cases[x]])===void 0?(l[this.cases[x]]=i.length,i.push([this.cases[x],[x]])):i[q][1].push(x)}for(var I=function(W){return e.inputType.kind==="number"?Number(W):W},C=0,L=i;C<L.length;C+=1){var O=L[C],q=O[0],K=O[1];t.push(K.length===1?I(K[0]):K.map(I)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var xn=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};xn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,He);if(!d)return null;var x=t.parse(e[p+1],p+1,i);if(!x)return null;l.push([d,x]),i=i||x.type}var I=t.parse(e[e.length-1],e.length-1,i);return I?new xn(i,l,I):null},xn.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},xn.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},xn.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},xn.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Xi=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function Di(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Wi(e,t,i,l){return l.compare(t,i)===0}function Xt(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,x,I){this.type=He,this.lhs=d,this.rhs=x,this.collator=I,this.hasUntypedArgument=d.type.kind==="value"||x.type.kind==="value"}return p.parse=function(d,x){if(d.length!==3&&d.length!==4)return x.error("Expected two or three arguments.");var I=d[0],C=x.parse(d[1],1,We);if(!C)return null;if(!Di(I,C.type))return x.concat(1).error('"'+I+`" comparisons are not supported for type '`+Vt(C.type)+"'.");var L=x.parse(d[2],2,We);if(!L)return null;if(!Di(I,L.type))return x.concat(2).error('"'+I+`" comparisons are not supported for type '`+Vt(L.type)+"'.");if(C.type.kind!==L.type.kind&&C.type.kind!=="value"&&L.type.kind!=="value")return x.error("Cannot compare types '"+Vt(C.type)+"' and '"+Vt(L.type)+"'.");l&&(C.type.kind==="value"&&L.type.kind!=="value"?C=new Er(L.type,[C]):C.type.kind!=="value"&&L.type.kind==="value"&&(L=new Er(C.type,[L])));var O=null;if(d.length===4){if(C.type.kind!=="string"&&L.type.kind!=="string"&&C.type.kind!=="value"&&L.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(O=x.parse(d[3],3,qt)))return null}return new p(C,L,O)},p.prototype.evaluate=function(d){var x=this.lhs.evaluate(d),I=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var C=br(x),L=br(I);if(C.kind!==L.kind||C.kind!=="string"&&C.kind!=="number")throw new Yr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+C.kind+", "+L.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var O=br(x),q=br(I);if(O.kind!=="string"||q.kind!=="string")return t(d,x,I)}return this.collator?i(d,x,I,this.collator.evaluate(d)):t(d,x,I)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(x){d.push(x.serialize())}),d},p}()}Xi.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,We),l=t.parse(e[2],2,Re);if(!i||!l)return null;if(!_r(i.type,[ir(We),$e,We]))return t.error("Expected first argument to be of type array or string, but found "+Vt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Re);return p?new Xi(i.type,i,l,p):null}return new Xi(i.type,i,l)},Xi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!hr(t,["string","array"]))throw new Yr("Expected first argument to be of type array or string, but found "+Vt(br(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},Xi.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Xi.prototype.outputDefined=function(){return!1},Xi.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Dn=Xt("==",function(e,t,i){return t===i},Wi),Do=Xt("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!Wi(0,t,i,l)}),Eu=Xt("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),io=Xt(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),Js=Xt("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),Qs=Xt(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),ha=function(e,t,i,l,p){this.type=$e,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};ha.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Re);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,$e)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,$e)))return null;var x=null;if(l["min-fraction-digits"]&&!(x=t.parse(l["min-fraction-digits"],1,Re)))return null;var I=null;return l["max-fraction-digits"]&&!(I=t.parse(l["max-fraction-digits"],1,Re))?null:new ha(i,p,d,x,I)},ha.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},ha.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Oa=function(e){this.type=Re,this.input=e};Oa.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Vt(i.type)+" instead."):new Oa(i):null},Oa.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Yr("Expected value to be of type string or array, but found "+Vt(br(t))+" instead.")},Oa.prototype.eachChild=function(e){e(this.input)},Oa.prototype.outputDefined=function(){return!1},Oa.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ta={"==":Dn,"!=":Do,">":io,"<":Eu,">=":Qs,"<=":Js,array:Er,at:Ra,boolean:Er,case:xn,coalesce:ri,collator:ki,format:ui,image:Vi,in:xa,"index-of":us,interpolate:hi,"interpolate-hcl":hi,"interpolate-lab":hi,length:Oa,let:ls,literal:sn,match:Ba,number:Er,"number-format":ha,object:Er,slice:Xi,step:Ii,string:Er,"to-boolean":Ki,"to-color":Ki,"to-number":Ki,"to-string":Ki,var:Nn,within:Ci};function ec(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var x=d?d.evaluate(e):1,I=an(i,l,p,x);if(I)throw new Yr(I);return new lr(i/255*x,l/255*x,p/255*x,x)}function Mo(e,t){return e in t}function wn(e,t){var i=t[e];return i===void 0?null:i}function _s(e){return{type:e}}function $s(e){return{result:"success",value:e}}function Gn(e){return{result:"error",value:e}}function hn(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Tl(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function no(e){return!!e.expression&&e.expression.interpolated}function Qr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Fe(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function It(e){return e}function Ni(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function Kn(e,t,i,l,p){return Ni(typeof i===p?l[i]:void 0,e.default,t.default)}function Al(e,t,i){if(Qr(i)!=="number")return Ni(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=ca(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function el(e,t,i){var l=e.base!==void 0?e.base:1;if(Qr(i)!=="number")return Ni(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=ca(e.stops.map(function(q){return q[0]}),i),x=function(q,K,W,se){var ce=se-W,ye=q-W;return ce===0?0:K===1?ye/ce:(Math.pow(K,ye)-1)/(Math.pow(K,ce)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),I=e.stops[d][1],C=e.stops[d+1][1],L=Ma[t.type]||It;if(e.colorSpace&&e.colorSpace!=="rgb"){var O=$u[e.colorSpace];L=function(q,K){return O.reverse(O.interpolate(O.forward(q),O.forward(K),x))}}return typeof I.evaluate=="function"?{evaluate:function(){for(var q=[],K=arguments.length;K--;)q[K]=arguments[K];var W=I.evaluate.apply(void 0,q),se=C.evaluate.apply(void 0,q);if(W!==void 0&&se!==void 0)return L(W,se,x)}}:L(I,C,x)}function bs(e,t,i){return t.type==="color"?i=lr.parse(i):t.type==="formatted"?i=Ei.fromString(i.toString()):t.type==="resolvedImage"?i=Si.fromString(i.toString()):Qr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),Ni(i,e.default,t.default)}Jr.register(ta,{error:[{kind:"error"},[$e],function(e,t){throw new Yr(t[0].evaluate(e))}],typeof:[$e,[We],function(e,t){return Vt(br(t[0].evaluate(e)))}],"to-rgba":[ir(Re,4),[et],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[et,[Re,Re,Re],ec],rgba:[et,[Re,Re,Re,Re],ec],has:{type:He,overloads:[[[$e],function(e,t){return Mo(t[0].evaluate(e),e.properties())}],[[$e,Mt],function(e,t){var i=t[1];return Mo(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:We,overloads:[[[$e],function(e,t){return wn(t[0].evaluate(e),e.properties())}],[[$e,Mt],function(e,t){var i=t[1];return wn(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[We,[$e],function(e,t){return wn(t[0].evaluate(e),e.featureState||{})}],properties:[Mt,[],function(e){return e.properties()}],"geometry-type":[$e,[],function(e){return e.geometryType()}],id:[We,[],function(e){return e.id()}],zoom:[Re,[],function(e){return e.globals.zoom}],"heatmap-density":[Re,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Re,[],function(e){return e.globals.lineProgress||0}],accumulated:[We,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Re,_s(Re),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Re,_s(Re),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Re,overloads:[[[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Re],function(e,t){return-t[0].evaluate(e)}]]},"/":[Re,[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Re,[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Re,[],function(){return Math.LN2}],pi:[Re,[],function(){return Math.PI}],e:[Re,[],function(){return Math.E}],"^":[Re,[Re,Re],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Re,[Re],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Re,[Re],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Re,[Re],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Re,[Re],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Re,[Re],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Re,[Re],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Re,[Re],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Re,_s(Re),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Re,_s(Re),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Re,[Re],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Re,[Re],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Re,[Re],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Re,[Re],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[He,[$e,We],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[He,[We],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[He,[$e],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[He,[$e,We],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[He,[We],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[He,[$e,We],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[He,[We],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[He,[$e,We],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[He,[We],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[He,[$e,We],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[He,[We],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[He,[We],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[He,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[He,[ir($e)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[He,[ir(We)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[He,[$e,ir(We)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[He,[$e,ir(We)],function(e,t){var i=t[0],l=t[1];return function(p,d,x,I){for(;x<=I;){var C=x+I>>1;if(d[C]===p)return!0;d[C]>p?I=C-1:x=C+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:He,overloads:[[[He,He],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[_s(He),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:He,overloads:[[[He,He],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[_s(He),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[He,[He],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[He,[$e],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[$e,[$e],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[$e,[$e],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[$e,_s(We),function(e,t){return t.map(function(i){return Gi(i.evaluate(e))}).join("")}],"resolved-locale":[$e,[qt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var tl=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new ti,this._defaultValue=t?function(i){return i.type==="color"&&Fe(i.default)?new lr(0,0,0,0):i.type==="color"?lr.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function pa(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in ta}function cs(e,t){var i=new Cr(ta,[],t?function(p){var d={color:et,string:$e,number:Re,enum:$e,boolean:He,formatted:pr,resolvedImage:kt};return p.type==="array"?ir(d[p.value]||We,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?$s(new tl(l,t)):Gn(i.errors)}tl.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},tl.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Yr("Expected value to be one of "+Object.keys(this._enumValues).map(function(I){return JSON.stringify(I)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}};var zl=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!Se(t.expression)};zl.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},zl.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var wa=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!Se(t.expression),this.interpolationType=l};function Yl(e,t){if((e=cs(e,t)).result==="error")return e;var i=e.value.expression,l=un(i);if(!l&&!hn(t))return Gn([new je("","data expressions not supported")]);var p=Hi(i,["zoom"]);if(!p&&!Tl(t))return Gn([new je("","zoom expressions not supported")]);var d=function x(I){var C=null;if(I instanceof ls)C=x(I.result);else if(I instanceof ri)for(var L=0,O=I.args;L<O.length&&!(C=x(O[L]));L+=1);else(I instanceof Ii||I instanceof hi)&&I.input instanceof Jr&&I.input.name==="zoom"&&(C=I);return C instanceof je||I.eachChild(function(q){var K=x(q);K instanceof je?C=K:!C&&K?C=new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&K&&C!==K&&(C=new je("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(i);return d||p?d instanceof je?Gn([d]):d instanceof hi&&!no(t)?Gn([new je("",'"interpolate" expressions cannot be used with this property')]):$s(d?new wa(l?"camera":"composite",e.value,d.labels,d instanceof hi?d.interpolation:void 0):new zl(l?"constant":"source",e.value)):Gn([new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}wa.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},wa.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},wa.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?hi.interpolationFactor(this.interpolationType,e,t,i):0};var rl=function(e,t){this._parameters=e,this._specification=t,qe(this,function i(l,p){var d,x,I,C=p.type==="color",L=l.stops&&typeof l.stops[0][0]=="object",O=L||!(L||l.property!==void 0),q=l.type||(no(p)?"exponential":"interval");if(C&&((l=qe({},l)).stops&&(l.stops=l.stops.map(function(at){return[at[0],lr.parse(at[1])]})),l.default=lr.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!$u[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(q==="exponential")d=el;else if(q==="interval")d=Al;else if(q==="categorical"){d=Kn,x=Object.create(null);for(var K=0,W=l.stops;K<W.length;K+=1){var se=W[K];x[se[0]]=se[1]}I=typeof l.stops[0][0]}else{if(q!=="identity")throw new Error('Unknown function type "'+q+'"');d=bs}if(L){for(var ce={},ye=[],pe=0;pe<l.stops.length;pe++){var Ee=l.stops[pe],Te=Ee[0].zoom;ce[Te]===void 0&&(ce[Te]={zoom:Te,type:l.type,property:l.property,default:l.default,stops:[]},ye.push(Te)),ce[Te].stops.push([Ee[0].value,Ee[1]])}for(var Pe=[],Be=0,Ne=ye;Be<Ne.length;Be+=1){var Ke=Ne[Be];Pe.push([ce[Ke].zoom,i(ce[Ke],p)])}var Ye={name:"linear"};return{kind:"composite",interpolationType:Ye,interpolationFactor:hi.interpolationFactor.bind(void 0,Ye),zoomStops:Pe.map(function(at){return at[0]}),evaluate:function(at,zt){var ut=at.zoom;return el({stops:Pe,base:l.base},p,ut).evaluate(ut,zt)}}}if(O){var xt=q==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:xt,interpolationFactor:hi.interpolationFactor.bind(void 0,xt),zoomStops:l.stops.map(function(at){return at[0]}),evaluate:function(at){return d(l,p,at.zoom,x,I)}}}return{kind:"source",evaluate:function(at,zt){var ut=zt&&zt.properties?zt.properties[l.property]:void 0;return ut===void 0?Ni(l.default,p.default):d(l,p,ut,x,I)}}}(this._parameters,this._specification))};function ao(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,x=e.styleSpec,I=[],C=Qr(i);if(C!=="object")return[new ne(t,i,"object expected, "+C+" found")];for(var L in i){var O=L.split(".")[0],q=l[O]||l["*"],K=void 0;if(p[O])K=p[O];else if(l[O])K=dr;else if(p["*"])K=p["*"];else{if(!l["*"]){I.push(new ne(t,i[L],'unknown property "'+L+'"'));continue}K=dr}I=I.concat(K({key:(t&&t+".")+L,value:i[L],valueSpec:q,style:d,styleSpec:x,object:i,objectKey:L},i))}for(var W in l)p[W]||l[W].required&&l[W].default===void 0&&i[W]===void 0&&I.push(new ne(t,i,'missing required property "'+W+'"'));return I}function oo(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,x=e.arrayElementValidator||dr;if(Qr(t)!=="array")return[new ne(d,t,"array expected, "+Qr(t)+" found")];if(i.length&&t.length!==i.length)return[new ne(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new ne(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var I={type:i.value,values:i.values};p.$version<7&&(I.function=i.function),Qr(i.value)==="object"&&(I=i.value);for(var C=[],L=0;L<t.length;L++)C=C.concat(x({array:t,arrayIndex:L,value:t[L],valueSpec:I,style:l,styleSpec:p,key:d+"["+L+"]"}));return C}function il(e){var t=e.key,i=e.value,l=e.valueSpec,p=Qr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new ne(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new ne(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new ne(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function Lo(e){var t,i,l,p=e.valueSpec,d=Ze(e.value.type),x={},I=d!=="categorical"&&e.value.property===void 0,C=!I,L=Qr(e.value.stops)==="array"&&Qr(e.value.stops[0])==="array"&&Qr(e.value.stops[0][0])==="object",O=ao({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(W){if(d==="identity")return[new ne(W.key,W.value,'identity function may not have a "stops" property')];var se=[],ce=W.value;return se=se.concat(oo({key:W.key,value:ce,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:q})),Qr(ce)==="array"&&ce.length===0&&se.push(new ne(W.key,ce,"array must have at least one stop")),se},default:function(W){return dr({key:W.key,value:W.value,valueSpec:p,style:W.style,styleSpec:W.styleSpec})}}});return d==="identity"&&I&&O.push(new ne(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||O.push(new ne(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!no(e.valueSpec)&&O.push(new ne(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(C&&!hn(e.valueSpec)?O.push(new ne(e.key,e.value,"property functions not supported")):I&&!Tl(e.valueSpec)&&O.push(new ne(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!L||e.value.property!==void 0||O.push(new ne(e.key,e.value,'"property" property is required')),O;function q(W){var se=[],ce=W.value,ye=W.key;if(Qr(ce)!=="array")return[new ne(ye,ce,"array expected, "+Qr(ce)+" found")];if(ce.length!==2)return[new ne(ye,ce,"array length 2 expected, length "+ce.length+" found")];if(L){if(Qr(ce[0])!=="object")return[new ne(ye,ce,"object expected, "+Qr(ce[0])+" found")];if(ce[0].zoom===void 0)return[new ne(ye,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new ne(ye,ce,"object stop key must have value")];if(l&&l>Ze(ce[0].zoom))return[new ne(ye,ce[0].zoom,"stop zoom values must appear in ascending order")];Ze(ce[0].zoom)!==l&&(l=Ze(ce[0].zoom),i=void 0,x={}),se=se.concat(ao({key:ye+"[0]",value:ce[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:il,value:K}}))}else se=se.concat(K({key:ye+"[0]",value:ce[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},ce));return pa(ze(ce[1]))?se.concat([new ne(ye+"[1]",ce[1],"expressions are not allowed in function stops.")]):se.concat(dr({key:ye+"[1]",value:ce[1],valueSpec:p,style:W.style,styleSpec:W.styleSpec}))}function K(W,se){var ce=Qr(W.value),ye=Ze(W.value),pe=W.value!==null?W.value:se;if(t){if(ce!==t)return[new ne(W.key,pe,ce+" stop domain type must match previous stop domain type "+t)]}else t=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new ne(W.key,pe,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&d!=="categorical"){var Ee="number expected, "+ce+" found";return hn(p)&&d===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ne(W.key,pe,Ee)]}return d!=="categorical"||ce!=="number"||isFinite(ye)&&Math.floor(ye)===ye?d!=="categorical"&&ce==="number"&&i!==void 0&&ye<i?[new ne(W.key,pe,"stop domain values must appear in ascending order")]:(i=ye,d==="categorical"&&ye in x?[new ne(W.key,pe,"stop domain values must be unique")]:(x[ye]=!0,[])):[new ne(W.key,pe,"integer expected, found "+ye)]}}function Ti(e){var t=(e.expressionContext==="property"?Yl:cs)(ze(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new ne(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new ne(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Se(i))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Se(i))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Hi(i,["zoom","feature-state"]))return[new ne(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!un(i))return[new ne(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function so(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(Ze(i))===-1&&p.push(new ne(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(Ze(i))===-1&&p.push(new ne(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function Pl(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!Pl(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}rl.deserialize=function(e){return new rl(e._parameters,e._specification)},rl.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var nl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function tc(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Pl(e)||(e=hs(e));var t=cs(e,nl);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function rc(e,t){return e<t?-1:e>t?1:0}function hs(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?xs(e[1],e[2],"=="):i==="!="?al(xs(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?xs(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(hs))):i==="all"?["all"].concat(e.slice(1).map(hs)):i==="none"?["all"].concat(e.slice(1).map(hs).map(al)):i==="in"?ic(e[1],e.slice(2)):i==="!in"?al(ic(e[1],e.slice(2))):i==="has"?fa(e[1]):i==="!has"?al(fa(e[1])):i!=="within"||e}function xs(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function ic(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(rc)]]:["filter-in-small",e,["literal",t]]}}function fa(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function al(e){return["!",e]}function Jl(e){return Pl(ze(e.value))?Ti(qe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(Qr(l)!=="array")return[new ne(p,l,"array expected, "+Qr(l)+" found")];var d,x=i.styleSpec,I=[];if(l.length<1)return[new ne(p,l,"filter array must have at least 1 element")];switch(I=I.concat(so({key:p+"[0]",value:l[0],valueSpec:x.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ze(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ze(l[1])==="$type"&&I.push(new ne(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&I.push(new ne(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=Qr(l[1]))!=="string"&&I.push(new ne(p+"[1]",l[1],"string expected, "+d+" found"));for(var C=2;C<l.length;C++)d=Qr(l[C]),Ze(l[1])==="$type"?I=I.concat(so({key:p+"["+C+"]",value:l[C],valueSpec:x.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&I.push(new ne(p+"["+C+"]",l[C],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var L=1;L<l.length;L++)I=I.concat(t({key:p+"["+L+"]",value:l[L],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Qr(l[1]),l.length!==2?I.push(new ne(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&I.push(new ne(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=Qr(l[1]),l.length!==2?I.push(new ne(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&I.push(new ne(p+"[1]",l[1],"object expected, "+d+" found"))}return I}(e)}function nc(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,x=e.objectKey,I=p[t+"_"+e.layerType];if(!I)return[];var C=x.match(/^(.*)-transition$/);if(t==="paint"&&C&&I[C[1]]&&I[C[1]].transition)return dr({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var L,O=e.valueSpec||I[x];if(!O)return[new ne(i,d,'unknown property "'+x+'"')];if(Qr(d)==="string"&&hn(O)&&!O.tokens&&(L=/^{([^}]+)}$/.exec(d)))return[new ne(i,d,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(L[1])+" }`.")];var q=[];return e.layerType==="symbol"&&(x==="text-field"&&l&&!l.glyphs&&q.push(new ne(i,d,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Fe(ze(d))&&Ze(d.type)==="identity"&&q.push(new ne(i,d,'"text-font" does not support identity functions'))),q.concat(dr({key:e.key,value:d,valueSpec:O,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:x}))}function ps(e){return nc(e,"paint")}function ol(e){return nc(e,"layout")}function Ro(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new ne(l,i,'either "type" or "ref" is required'));var x,I=Ze(i.type),C=Ze(i.ref);if(i.id)for(var L=Ze(i.id),O=0;O<e.arrayIndex;O++){var q=p.layers[O];Ze(q.id)===L&&t.push(new ne(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+q.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(se){se in i&&t.push(new ne(l,i[se],'"'+se+'" is prohibited for ref layers'))}),p.layers.forEach(function(se){Ze(se.id)===C&&(x=se)}),x?x.ref?t.push(new ne(l,i.ref,"ref cannot reference another ref layer")):I=Ze(x.type):t.push(new ne(l,i.ref,'ref layer "'+C+'" not found'));else if(I!=="background")if(i.source){var K=p.sources&&p.sources[i.source],W=K&&Ze(K.type);K?W==="vector"&&I==="raster"?t.push(new ne(l,i.source,'layer "'+i.id+'" requires a raster source')):W==="raster"&&I!=="raster"?t.push(new ne(l,i.source,'layer "'+i.id+'" requires a vector source')):W!=="vector"||i["source-layer"]?W==="raster-dem"&&I!=="hillshade"?t.push(new ne(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!i.paint||!i.paint["line-gradient"]||W==="geojson"&&K.lineMetrics||t.push(new ne(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ne(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new ne(l,i.source,'source "'+i.source+'" not found'))}else t.push(new ne(l,i,'missing required property "source"'));return t=t.concat(ao({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return dr({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Jl,layout:function(se){return ao({layer:i,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":function(ce){return ol(qe({layerType:I},ce))}}})},paint:function(se){return ao({layer:i,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":function(ce){return ps(qe({layerType:I},ce))}}})}}}))}function ra(e){var t=e.value,i=e.key,l=Qr(t);return l!=="string"?[new ne(i,t,"string expected, "+l+" found")]:[]}var Lr={promoteId:function(e){var t=e.key,i=e.value;if(Qr(i)==="string")return ra({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,ra({key:t+"."+p,value:i[p]}));return l}};function _o(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new ne(i,t,'"type" is required')];var d,x=Ze(t.type);switch(x){case"vector":case"raster":case"raster-dem":return ao({key:i,value:t,valueSpec:l["source_"+x.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:Lr});case"geojson":if(d=ao({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:Lr}),t.cluster)for(var I in t.clusterProperties){var C=t.clusterProperties[I],L=C[0],O=typeof L=="string"?[L,["accumulated"],["get",I]]:L;d.push.apply(d,Ti({key:i+"."+I+".map",value:C[1],expressionContext:"cluster-map"})),d.push.apply(d,Ti({key:i+"."+I+".reduce",value:O,expressionContext:"cluster-reduce"}))}return d;case"video":return ao({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return ao({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new ne(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return so({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function lo(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],x=Qr(t);if(t===void 0)return d;if(x!=="object")return d.concat([new ne("light",t,"object expected, "+x+" found")]);for(var I in t){var C=I.match(/^(.*)-transition$/);d=d.concat(C&&l[C[1]]&&l[C[1]].transition?dr({key:I,value:t[I],valueSpec:i.transition,style:p,styleSpec:i}):l[I]?dr({key:I,value:t[I],valueSpec:l[I],style:p,styleSpec:i}):[new ne(I,t[I],'unknown property "'+I+'"')])}return d}var sl={"*":function(){return[]},array:oo,boolean:function(e){var t=e.value,i=e.key,l=Qr(t);return l!=="boolean"?[new ne(i,t,"boolean expected, "+l+" found")]:[]},number:il,color:function(e){var t=e.key,i=e.value,l=Qr(i);return l!=="string"?[new ne(t,i,"color expected, "+l+" found")]:Ht(i)===null?[new ne(t,i,'color expected, "'+i+'" found')]:[]},constants:ke,enum:so,filter:Jl,function:Lo,layer:Ro,object:ao,source:_o,light:lo,string:ra,formatted:function(e){return ra(e).length===0?[]:Ti(e)},resolvedImage:function(e){return ra(e).length===0?[]:Ti(e)}};function dr(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&Fe(Ze(t))?Lo(e):i.expression&&pa(ze(t))?Ti(e):i.type&&sl[i.type]?sl[i.type](e):ao(qe({},e,{valueSpec:i.type?l[i.type]:i}))}function Rr(e){var t=e.value,i=e.key,l=ra(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new ne(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new ne(i,t,'"glyphs" url must include a "{range}" token'))),l}function Hn(e,t){t===void 0&&(t=X);var i=[];return i=i.concat(dr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Rr,"*":function(){return[]}}})),e.constants&&(i=i.concat(ke({key:"constants",value:e.constants,style:e,styleSpec:t}))),ws(i)}function ws(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function Ga(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return ws(e.apply(this,t))}}Hn.source=Ga(_o),Hn.light=Ga(lo),Hn.layer=Ga(Ro),Hn.filter=Ga(Jl),Hn.paintProperty=Ga(ps),Hn.layoutProperty=Ga(ol);var Es=Hn,Gc=Es.light,Kc=Es.paintProperty,bo=Es.layoutProperty;function Bo(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new ve(new Error(p[l].message))),i=!0;return i}var Oo=Kr;function Kr(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var x=p[3+d],I=p[3+d+1];l.push(x===I?null:p.subarray(x,I))}var C=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],C),this.bboxes=p.subarray(C),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var L=0;L<this.d*this.d;L++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var O=i/t*e;this.min=-O,this.max=e+O}Kr.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},Kr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Kr.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},Kr.prototype.query=function(e,t,i,l,p){var d=this.min,x=this.max;if(e<=d&&t<=d&&x<=i&&x<=l&&!p)return Array.prototype.slice.call(this.keys);var I=[];return this._forEachCell(e,t,i,l,this._queryCell,I,{},p),I},Kr.prototype._queryCell=function(e,t,i,l,p,d,x,I){var C=this.cells[p];if(C!==null)for(var L=this.keys,O=this.bboxes,q=0;q<C.length;q++){var K=C[q];if(x[K]===void 0){var W=4*K;(I?I(O[W+0],O[W+1],O[W+2],O[W+3]):e<=O[W+2]&&t<=O[W+3]&&i>=O[W+0]&&l>=O[W+1])?(x[K]=!0,d.push(L[K])):x[K]=!1}}},Kr.prototype._forEachCell=function(e,t,i,l,p,d,x,I){for(var C=this._convertToCellCoord(e),L=this._convertToCellCoord(t),O=this._convertToCellCoord(i),q=this._convertToCellCoord(l),K=C;K<=O;K++)for(var W=L;W<=q;W++){var se=this.d*W+K;if((!I||I(this._convertFromCellCoord(K),this._convertFromCellCoord(W),this._convertFromCellCoord(K+1),this._convertFromCellCoord(W+1)))&&p.call(this,e,t,i,l,se,d,x,I))return}},Kr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Kr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Kr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,x=0;x<e.length;x++){var I=e[x];p[3+x]=d,p.set(I,d),d+=I.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var Ea=U.ImageData,xo=U.ImageBitmap,_i={};function ft(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),_i[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Sa in ft("Object",Object),Oo.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Oo.deserialize=function(e){return new Oo(e.buffer)},ft("Grid",Oo),ft("Color",lr),ft("Error",Error),ft("ResolvedImage",Si),ft("StylePropertyFunction",rl),ft("StyleExpression",tl,{omit:["_evaluator"]}),ft("ZoomDependentExpression",wa),ft("ZoomConstantExpression",zl),ft("CompoundExpression",Jr,{omit:["_evaluate"]}),ta)ta[Sa]._classRegistryKey||ft("Expression_"+Sa,ta[Sa]);function Vo(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Un(e){return xo&&e instanceof xo}function uo(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Vo(e)||Un(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof Ea)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(uo(d[p],t));return l}if(typeof e=="object"){var x=e.constructor,I=x._classRegistryKey;if(!I)throw new Error("can't serialize object of unregistered class");var C=x.serialize?x.serialize(e,t):{};if(!x.serialize){for(var L in e)if(e.hasOwnProperty(L)&&!(_i[I].omit.indexOf(L)>=0)){var O=e[L];C[L]=_i[I].shallow.indexOf(L)>=0?O:uo(O,t)}e instanceof Error&&(C.message=e.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return I!=="Object"&&(C.$name=I),C}throw new Error("can't serialize object of type "+typeof e)}function Xn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Vo(e)||Un(e)||ArrayBuffer.isView(e)||e instanceof Ea)return e;if(Array.isArray(e))return e.map(Xn);if(typeof e=="object"){var t=e.$name||"Object",i=_i[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var x=d[p];if(x!=="$name"){var I=e[x];l[x]=_i[t].shallow.indexOf(x)>=0?I:Xn(I)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var Su=function(){this.first=!0};Su.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var rt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function ll(e){for(var t=0,i=e;t<i.length;t+=1)if(Cl(i[t].charCodeAt(0)))return!0;return!1}function Cl(e){return!(e!==746&&e!==747&&(e<4352||!(rt["Bopomofo Extended"](e)||rt.Bopomofo(e)||rt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||rt["CJK Compatibility Ideographs"](e)||rt["CJK Compatibility"](e)||rt["CJK Radicals Supplement"](e)||rt["CJK Strokes"](e)||!(!rt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||rt["CJK Unified Ideographs Extension A"](e)||rt["CJK Unified Ideographs"](e)||rt["Enclosed CJK Letters and Months"](e)||rt["Hangul Compatibility Jamo"](e)||rt["Hangul Jamo Extended-A"](e)||rt["Hangul Jamo Extended-B"](e)||rt["Hangul Jamo"](e)||rt["Hangul Syllables"](e)||rt.Hiragana(e)||rt["Ideographic Description Characters"](e)||rt.Kanbun(e)||rt["Kangxi Radicals"](e)||rt["Katakana Phonetic Extensions"](e)||rt.Katakana(e)&&e!==12540||!(!rt["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!rt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||rt["Unified Canadian Aboriginal Syllabics"](e)||rt["Unified Canadian Aboriginal Syllabics Extended"](e)||rt["Vertical Forms"](e)||rt["Yijing Hexagram Symbols"](e)||rt["Yi Syllables"](e)||rt["Yi Radicals"](e))))}function Fo(e){return!(Cl(e)||function(t){return!!(rt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||rt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||rt["Letterlike Symbols"](t)||rt["Number Forms"](t)||rt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||rt["Control Pictures"](t)&&t!==9251||rt["Optical Character Recognition"](t)||rt["Enclosed Alphanumerics"](t)||rt["Geometric Shapes"](t)||rt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||rt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||rt["CJK Symbols and Punctuation"](t)||rt.Katakana(t)||rt["Private Use Area"](t)||rt["CJK Compatibility Forms"](t)||rt["Small Form Variants"](t)||rt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Mi(e){return e>=1424&&e<=2303||rt["Arabic Presentation Forms-A"](e)||rt["Arabic Presentation Forms-B"](e)}function Yi(e,t){return!(!t&&Mi(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||rt.Khmer(e))}function Ka(e){for(var t=0,i=e;t<i.length;t+=1)if(Mi(i[t].charCodeAt(0)))return!0;return!1}var co=null,ka="unavailable",Va=null,Td=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(ka="error"),co&&co(e)};function ac(){Fh.fire(new oe("pluginStateChange",{pluginStatus:ka,pluginURL:Va}))}var Fh=new ge,Ql=function(){return ka},Ha=function(){if(ka!=="deferred"||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ka="loading",ac(),Va&&zn({url:Va},function(e){e?Td(e):(ka="loaded",ac())})},wo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ka==="loaded"||wo.applyArabicShaping!=null},isLoading:function(){return ka==="loading"},setState:function(e){ka=e.pluginStatus,Va=e.pluginURL},isParsed:function(){return wo.applyArabicShaping!=null&&wo.processBidirectionalText!=null&&wo.processStyledBidirectionalText!=null},getPluginURL:function(){return Va}},or=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Su,this.transition={})};or.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!Yi(p[l].charCodeAt(0),i))return!1;return!0}(e,wo.isLoaded())},or.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},or.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var No=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(Fe(i))return new rl(i,l);if(pa(i)){var p=Yl(i,l);if(p.result==="error")throw new Error(p.value.map(function(x){return x.key+": "+x.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=lr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};No.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},No.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var Uo=function(e){this.property=e,this.value=new No(e,void 0)};Uo.prototype.transitioned=function(e,t){return new qo(this.property,this.value,t,Ue({},e.transition,this.transition),e.now)},Uo.prototype.untransitioned=function(){return new qo(this.property,this.value,null,{},0)};var da=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};da.prototype.getValue=function(e){return bt(this._values[e].value.value)},da.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Uo(this._values[e].property)),this._values[e].value=new No(this._values[e].property,t===null?void 0:bt(t))},da.prototype.getTransition=function(e){return bt(this._values[e].transition)},da.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Uo(this._values[e].property)),this._values[e].transition=bt(t)||void 0},da.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},da.prototype.transitioned=function(e,t){for(var i=new Dl(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},da.prototype.untransitioned=function(){for(var e=new Dl(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var qo=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};qo.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var x=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(I){if(I<=0)return 0;if(I>=1)return 1;var C=I*I,L=C*I;return 4*(I<.5?L:3*(I-C)+L-.75)}(x))}return p};var Dl=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Dl.prototype.possiblyEvaluate=function(e,t,i){for(var l=new jo(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];l._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return l},Dl.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var ma=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ma.prototype.getValue=function(e){return bt(this._values[e].value)},ma.prototype.setValue=function(e,t){this._values[e]=new No(this._values[e].property,t===null?void 0:bt(t))},ma.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},ma.prototype.possiblyEvaluate=function(e,t,i){for(var l=new jo(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];l._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return l};var Ji=function(e,t,i){this.property=e,this.value=t,this.parameters=i};Ji.prototype.isConstant=function(){return this.value.kind==="constant"},Ji.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Ji.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var jo=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};jo.prototype.get=function(e){return this._values[e]};var Et=function(e){this.specification=e};Et.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Et.prototype.interpolate=function(e,t,i){var l=Ma[this.specification.type];return l?l(e,t,i):e};var yt=function(e,t){this.specification=e,this.overrides=t};yt.prototype.possiblyEvaluate=function(e,t,i,l){return new Ji(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},yt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new Ji(this,{kind:"constant",value:void 0},e.parameters);var l=Ma[this.specification.type];return l?new Ji(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var Cp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new Ji(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var x=i.expression.evaluate(l,null,{},p,d),I=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(I,I,I,l);return new Ji(this,{kind:"constant",value:C},l)}if(i.expression.kind==="camera"){var L=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Ji(this,{kind:"constant",value:L},l)}return new Ji(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,x,I){if(i.kind==="source"){var C=i.evaluate(l,p,d,x,I);return this._calculate(C,C,C,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(yt),Fa=function(e){this.specification=e};Fa.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new or(Math.floor(t.zoom-1),t)),e.expression.evaluate(new or(Math.floor(t.zoom),t)),e.expression.evaluate(new or(Math.floor(t.zoom+1),t)),t)}},Fa.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},Fa.prototype.interpolate=function(e){return e};var Xa=function(e){this.specification=e};Xa.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},Xa.prototype.interpolate=function(){return!1};var Mn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new No(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new Uo(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};ft("DataDrivenProperty",yt),ft("DataConstantProperty",Et),ft("CrossFadedDataDrivenProperty",Cp),ft("CrossFadedProperty",Fa),ft("ColorRampProperty",Xa);var Ss=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new ma(l.layout)),l.paint)){for(var p in this._transitionablePaint=new da(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jo(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(bo,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return yr(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(Kc,"layers."+this.id+".paint."+i,i,l,p))return!1;if(yr(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],x=d.property.specification["property-type"]==="cross-faded-data-driven",I=d.value.isDataDriven(),C=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var L=this._transitionablePaint._values[i].value;return L.isDataDriven()||I||x||this._handleOverridablePaintPropertyUpdate(i,C,L)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),wt(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&Bo(this,i.call(Es,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:X,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof Ji&&hn(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(ge),$l={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ku=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},qr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ia(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=$l[p.type].BYTES_PER_ELEMENT,x=i=eu(i,Math.max(t,d)),I=p.components||1;return l=Math.max(l,d),i+=d*I,{name:p.name,type:p.type,components:I,offset:x}}),size:eu(i,Math.max(l,t)),alignment:t}}function eu(e,t){return Math.ceil(e/t)*t}qr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},qr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},qr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qr.prototype.clear=function(){this.length=0},qr.prototype.resize=function(e){this.reserve(e),this.length=e},qr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},qr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var tu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(qr);tu.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",tu);var ks=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var I=4*i;return this.int16[I+0]=l,this.int16[I+1]=p,this.int16[I+2]=d,this.int16[I+3]=x,i},t}(qr);ks.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",ks);var ya=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,x,I)},t.prototype.emplace=function(i,l,p,d,x,I,C){var L=6*i;return this.int16[L+0]=l,this.int16[L+1]=p,this.int16[L+2]=d,this.int16[L+3]=x,this.int16[L+4]=I,this.int16[L+5]=C,i},t}(qr);ya.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",ya);var Ln=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,x,I)},t.prototype.emplace=function(i,l,p,d,x,I,C){var L=4*i,O=8*i;return this.int16[L+0]=l,this.int16[L+1]=p,this.uint8[O+4]=d,this.uint8[O+5]=x,this.uint8[O+6]=I,this.uint8[O+7]=C,i},t}(qr);Ln.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",Ln);var Iu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(qr);Iu.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",Iu);var ho=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,q){var K=this.length;return this.resize(K+1),this.emplace(K,i,l,p,d,x,I,C,L,O,q)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,q,K){var W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=p,this.uint16[W+2]=d,this.uint16[W+3]=x,this.uint16[W+4]=I,this.uint16[W+5]=C,this.uint16[W+6]=L,this.uint16[W+7]=O,this.uint16[W+8]=q,this.uint16[W+9]=K,i},t}(qr);ho.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",ho);var Dp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,q,K,W){var se=this.length;return this.resize(se+1),this.emplace(se,i,l,p,d,x,I,C,L,O,q,K,W)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,q,K,W,se){var ce=12*i;return this.int16[ce+0]=l,this.int16[ce+1]=p,this.int16[ce+2]=d,this.int16[ce+3]=x,this.uint16[ce+4]=I,this.uint16[ce+5]=C,this.uint16[ce+6]=L,this.uint16[ce+7]=O,this.int16[ce+8]=q,this.int16[ce+9]=K,this.int16[ce+10]=W,this.int16[ce+11]=se,i},t}(qr);Dp.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",Dp);var Tu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.float32[x+0]=l,this.float32[x+1]=p,this.float32[x+2]=d,i},t}(qr);Tu.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",Tu);var oc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(qr);oc.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",oc);var ru=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O){var q=this.length;return this.resize(q+1),this.emplace(q,i,l,p,d,x,I,C,L,O)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,q){var K=10*i,W=5*i;return this.int16[K+0]=l,this.int16[K+1]=p,this.int16[K+2]=d,this.int16[K+3]=x,this.int16[K+4]=I,this.int16[K+5]=C,this.uint32[W+3]=L,this.uint16[K+8]=O,this.uint16[K+9]=q,i},t}(qr);ru.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",ru);var Is=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,x,I)},t.prototype.emplace=function(i,l,p,d,x,I,C){var L=6*i;return this.int16[L+0]=l,this.int16[L+1]=p,this.int16[L+2]=d,this.int16[L+3]=x,this.int16[L+4]=I,this.int16[L+5]=C,i},t}(qr);Is.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",Is);var iu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x){var I=this.length;return this.resize(I+1),this.emplace(I,i,l,p,d,x)},t.prototype.emplace=function(i,l,p,d,x,I){var C=4*i,L=8*i;return this.float32[C+0]=l,this.float32[C+1]=p,this.float32[C+2]=d,this.int16[L+6]=x,this.int16[L+7]=I,i},t}(qr);iu.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",iu);var nu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var I=12*i,C=3*i;return this.uint8[I+0]=l,this.uint8[I+1]=p,this.float32[C+1]=d,this.float32[C+2]=x,i},t}(qr);nu.prototype.bytesPerElement=12,ft("StructArrayLayout2ub2f12",nu);var Ts=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.uint16[x+0]=l,this.uint16[x+1]=p,this.uint16[x+2]=d,i},t}(qr);Ts.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",Ts);var Ml=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,q,K,W,se,ce,ye,pe,Ee){var Te=this.length;return this.resize(Te+1),this.emplace(Te,i,l,p,d,x,I,C,L,O,q,K,W,se,ce,ye,pe,Ee)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,q,K,W,se,ce,ye,pe,Ee,Te){var Pe=24*i,Be=12*i,Ne=48*i;return this.int16[Pe+0]=l,this.int16[Pe+1]=p,this.uint16[Pe+2]=d,this.uint16[Pe+3]=x,this.uint32[Be+2]=I,this.uint32[Be+3]=C,this.uint32[Be+4]=L,this.uint16[Pe+10]=O,this.uint16[Pe+11]=q,this.uint16[Pe+12]=K,this.float32[Be+7]=W,this.float32[Be+8]=se,this.uint8[Ne+36]=ce,this.uint8[Ne+37]=ye,this.uint8[Ne+38]=pe,this.uint32[Be+10]=Ee,this.int16[Pe+22]=Te,i},t}(qr);Ml.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ml);var Hc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,q,K,W,se,ce,ye,pe,Ee,Te,Pe,Be,Ne,Ke,Ye,xt,at,zt,ut,Wt){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,i,l,p,d,x,I,C,L,O,q,K,W,se,ce,ye,pe,Ee,Te,Pe,Be,Ne,Ke,Ye,xt,at,zt,ut,Wt)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,q,K,W,se,ce,ye,pe,Ee,Te,Pe,Be,Ne,Ke,Ye,xt,at,zt,ut,Wt,Pt){var gt=34*i,nr=17*i;return this.int16[gt+0]=l,this.int16[gt+1]=p,this.int16[gt+2]=d,this.int16[gt+3]=x,this.int16[gt+4]=I,this.int16[gt+5]=C,this.int16[gt+6]=L,this.int16[gt+7]=O,this.uint16[gt+8]=q,this.uint16[gt+9]=K,this.uint16[gt+10]=W,this.uint16[gt+11]=se,this.uint16[gt+12]=ce,this.uint16[gt+13]=ye,this.uint16[gt+14]=pe,this.uint16[gt+15]=Ee,this.uint16[gt+16]=Te,this.uint16[gt+17]=Pe,this.uint16[gt+18]=Be,this.uint16[gt+19]=Ne,this.uint16[gt+20]=Ke,this.uint16[gt+21]=Ye,this.uint16[gt+22]=xt,this.uint32[nr+12]=at,this.float32[nr+13]=zt,this.float32[nr+14]=ut,this.float32[nr+15]=Wt,this.float32[nr+16]=Pt,i},t}(qr);Hc.prototype.bytesPerElement=68,ft("StructArrayLayout8i15ui1ul4f68",Hc);var Eo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(qr);Eo.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",Eo);var Zo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.int16[x+0]=l,this.int16[x+1]=p,this.int16[x+2]=d,i},t}(qr);Zo.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",Zo);var As=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=4*i;return this.uint32[2*i+0]=l,this.uint16[x+2]=p,this.uint16[x+3]=d,i},t}(qr);As.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",As);var po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(qr);po.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",po);var zs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(qr);zs.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",zs);var Xc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var I=4*i;return this.float32[I+0]=l,this.float32[I+1]=p,this.float32[I+2]=d,this.float32[I+3]=x,i},t}(qr);Xc.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",Xc);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new V(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(ku);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(ru);ft("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(ku);o.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Ml);ft("PlacedSymbolArray",c);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(ku);m.prototype.size=68;var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(Hc);ft("SymbolInstanceArray",E);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Eo);ft("GlyphOffsetArray",k);var z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Zo);ft("SymbolLineVertexArray",z);var B=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(ku);B.prototype.size=8;var Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new B(this,i)},t}(As);ft("FeatureIndexArray",Z);var Y=ia([{name:"a_pos",components:2,type:"Int16"}],4).members,J=function(e){e===void 0&&(e=[]),this.segments=e};function Q(e,t){return 256*(e=we(Math.floor(e),0,255))+we(Math.floor(t),0,255)}J.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>J.MAX_VERTEX_ARRAY_LENGTH&&Rt("Max vertices per segment is "+J.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>J.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},J.prototype.get=function(){return this.segments},J.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},J.simpleSegment=function(e,t,i,l){return new J([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},J.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",J);var ue=ia([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),le=P(function(e){e.exports=function(t,i){var l,p,d,x,I,C,L,O;for(p=t.length-(l=3&t.length),d=i,I=3432918353,C=461845907,O=0;O<p;)L=255&t.charCodeAt(O)|(255&t.charCodeAt(++O))<<8|(255&t.charCodeAt(++O))<<16|(255&t.charCodeAt(++O))<<24,++O,d=27492+(65535&(x=5*(65535&(d=(d^=L=(65535&(L=(L=(65535&L)*I+(((L>>>16)*I&65535)<<16)&4294967295)<<15|L>>>17))*C+(((L>>>16)*C&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(L=0,l){case 3:L^=(255&t.charCodeAt(O+2))<<16;case 2:L^=(255&t.charCodeAt(O+1))<<8;case 1:d^=L=(65535&(L=(L=(65535&(L^=255&t.charCodeAt(O)))*I+(((L>>>16)*I&65535)<<16)&4294967295)<<15|L>>>17))*C+(((L>>>16)*C&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),fe=P(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,x=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(x)|(255&t.charCodeAt(++x))<<8|(255&t.charCodeAt(++x))<<16|(255&t.charCodeAt(++x))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++x;switch(p){case 3:d^=(255&t.charCodeAt(x+2))<<16;case 2:d^=(255&t.charCodeAt(x+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(x)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),ae=le,me=fe;ae.murmur3=le,ae.murmur2=me;var xe=function(){this.ids=[],this.positions=[],this.indexed=!1};xe.prototype.add=function(e,t,i,l){this.ids.push(Me(e)),this.positions.push(t,i,l)},xe.prototype.getPositions=function(e){for(var t=Me(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},xe.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,x,I,C){for(;I<C;){for(var L=d[I+C>>1],O=I-1,q=C+1;;){do O++;while(d[O]<L);do q--;while(d[q]>L);if(O>=q)break;Le(d,O,q),Le(x,3*O,3*q),Le(x,3*O+1,3*q+1),Le(x,3*O+2,3*q+2)}q-I<C-q?(p(d,x,I,q),I=q+1):(p(d,x,q+1,C),C=q)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},xe.deserialize=function(e){var t=new xe;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Ie=Math.pow(2,53)-1;function Me(e){var t=+e;return!isNaN(t)&&t<=Ie?t:ae(String(e))}function Le(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}ft("FeaturePositionMap",xe);var Oe=function(e,t){this.gl=e.gl,this.location=t},Ge=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Oe),Je=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Oe),Xe=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Oe),ct=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Oe),St=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Oe),vt=function(e){function t(i,l){e.call(this,i,l),this.current=lr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Oe),_t=new Float32Array(16),sr=function(e){function t(i,l){e.call(this,i,l),this.current=_t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Oe);function lt(e){return[Q(255*e.r,255*e.g),Q(255*e.b,255*e.a)]}var Nt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};Nt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Nt.prototype.getBinding=function(e,t,i){return this.type==="color"?new vt(e,t):new Je(e,t)};var Gt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Gt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Gt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Gt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new St(e,t):new Je(e,t)};var jt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};jt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,x=this.expression.evaluate(new or(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,x)},jt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},jt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=lt(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},jt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ot=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(x){return"u_"+x+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(x){return{name:"a_"+x,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Ot.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new or(this.zoom),t,{},l,[],p),x=this.expression.evaluate(new or(this.zoom+1),t,{},l,[],p),I=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(I,e,d,x)},Ot.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},Ot.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=lt(i),d=lt(l),x=e;x<t;x++)this.paintVertexArray.emplace(x,p[0],p[1],d[0],d[1]);else{for(var I=e;I<t;I++)this.paintVertexArray.emplace(I,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},Ot.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ot.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ot.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=we(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},Ot.prototype.getBinding=function(e,t,i){return new Je(e,t)};var Zt=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Zt.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Zt.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Zt.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],x=l[i.max];if(p&&d&&x)for(var I=e;I<t;I++)this.zoomInPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],d.pixelRatio,x.pixelRatio)}},Zt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ue.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ue.members,this.expression.isStateDependent))},Zt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ct=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof Ji&&hn(d.property.specification)){var x=pn(p,e.type),I=d.value,C=d.property.specification.type,L=d.property.useIntegerZoom,O=d.property.specification["property-type"],q=O==="cross-faded"||O==="cross-faded-data-driven";if(I.kind==="constant")this.binders[p]=q?new Gt(I.value,x):new Nt(I.value,x,C),l.push("/u_"+p);else if(I.kind==="source"||q){var K=Ui(p,C,"source");this.binders[p]=q?new Zt(I,C,L,t,K,e.id):new jt(I,x,C,K),l.push("/a_"+p)}else{var W=Ui(p,C,"composite");this.binders[p]=new Ot(I,x,C,L,t,W),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};Ct.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof jt||t instanceof Ot?t.maxValue:0},Ct.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var x=this.binders[d];(x instanceof jt||x instanceof Ot||x instanceof Zt)&&x.populatePaintArray(e,t,i,l,p)}},Ct.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Gt&&l.setConstantPatternPositions(e,t)}},Ct.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var x in e)for(var I=0,C=t.getPositions(x);I<C.length;I+=1){var L=C[I],O=i.feature(L.index);for(var q in this.binders){var K=this.binders[q];if((K instanceof jt||K instanceof Ot||K instanceof Zt)&&K.expression.isStateDependent===!0){var W=l.paint.get(q);K.expression=W.value,K.updatePaintArray(L.start,L.end,O,e[x],p),d=!0}}}return d},Ct.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Nt||i instanceof Gt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},Ct.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof jt||i instanceof Ot)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Zt)for(var p=0;p<ue.members.length;p++)e.push(ue.members[p].name)}return e},Ct.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Nt||i instanceof Gt||i instanceof Ot)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},Ct.prototype.getPaintVertexBuffers=function(){return this._buffers},Ct.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof Nt||p instanceof Gt||p instanceof Ot)for(var d=0,x=p.uniformNames;d<x.length;d+=1){var I=x[d];if(t[I]){var C=p.getBinding(e,t[I],I);i.push({name:I,property:l,binding:C})}}}return i},Ct.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var x=d[p],I=x.name,C=x.property;this.binders[C].setUniform(x.binding,l,i.get(C),I)}},Ct.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Zt){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof jt||i instanceof Ot)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Ct.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof jt||i instanceof Ot||i instanceof Zt)&&i.upload(e)}this.updatePaintBuffers()},Ct.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof jt||t instanceof Ot||t instanceof Zt)&&t.destroy()}};var Lt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new Ct(d,t,i)}this.needsUpload=!1,this._featureMap=new xe,this._bufferOffset=0};function pn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Ui(e,t,i){var l={color:{source:Iu,composite:Xc},number:{source:Eo,composite:Iu}},p=function(d){return{"line-pattern":{source:ho,composite:ho},"fill-pattern":{source:ho,composite:ho},"fill-extrusion-pattern":{source:ho,composite:ho}}[d]}(e);return p&&p[i]||l[t][i]}Lt.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Lt.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var x=d[p];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,t,x,l)||this.needsUpload}},Lt.prototype.get=function(e){return this.programConfigurations[e]},Lt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Lt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ft("ConstantBinder",Nt),ft("CrossFadedConstantBinder",Gt),ft("SourceExpressionBinder",jt),ft("CrossFadedCompositeBinder",Zt),ft("CompositeExpressionBinder",Ot),ft("ProgramConfiguration",Ct,{omit:["_buffers"]}),ft("ProgramConfigurationSet",Lt);var Ia=Math.pow(2,14)-1,na=-Ia-1;function pi(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var x=p[d],I=Math.round(x.x*t),C=Math.round(x.y*t);x.x=we(I,na,Ia),x.y=we(C,na,Ia),(I<x.x||I>x.x+1||C<x.y||C>x.y+1)&&Rt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function En(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?pi(e):[]}}function qn(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var Qi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new tu,this.indexArray=new Ts,this.segments=new J,this.programConfigurations=new Lt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function fo(e,t){for(var i=0;i<e.length;i++)if(Ko(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(Ko(e,t[l]))return!0;return!!sc(e,t)}function Wa(e,t,i){return!!Ko(e,t)||!!Go(t,e,i)}function Ya(e,t){if(e.length===1)return ul(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(Ko(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(ul(t,e[d]))return!0;for(var x=0;x<t.length;x++)if(sc(e,t[x]))return!0;return!1}function Ps(e,t,i){if(e.length>1){if(sc(e,t))return!0;for(var l=0;l<t.length;l++)if(Go(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Go(e[p],t,i))return!0;return!1}function sc(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(Cs(l,p,t[d],t[d+1]))return!0;return!1}function Cs(e,t,i,l){return zr(e,i,l)!==zr(t,i,l)&&zr(e,t,i)!==zr(e,t,l)}function Go(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Au(e,t[p-1],t[p])<l)return!0;return!1}function Au(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function ul(e,t){for(var i,l,p,d=!1,x=0;x<e.length;x++)for(var I=0,C=(i=e[x]).length-1;I<i.length;C=I++)(l=i[I]).y>t.y!=(p=i[C]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function Ko(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],x=e[p];d.y>t.y!=x.y>t.y&&t.x<(x.x-d.x)*(t.y-d.y)/(x.y-d.y)+d.x&&(i=!i)}return i}function lc(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=zr(e,t,i[0]);return d!==zr(e,t,i[1])||d!==zr(e,t,i[2])||d!==zr(e,t,i[3])}function Ds(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function $i(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function cl(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=V.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var x=[],I=0;I<e.length;I++)x.push(e[I].sub(d));return x}Qi.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var x=0,I=e;x<I.length;x+=1){var C=I[x],L=C.feature,O=C.id,q=C.index,K=C.sourceLayerIndex,W=this.layers[0]._featureFilter.needGeometry,se=En(L,W);if(this.layers[0]._featureFilter.filter(new or(this.zoom),se,i)){var ce=d?d.evaluate(se,{},i):void 0,ye={id:O,properties:L.properties,type:L.type,sourceLayerIndex:K,index:q,geometry:W?se.geometry:pi(L),patterns:{},sortKey:ce};p.push(ye)}}d&&p.sort(function(Ye,xt){return Ye.sortKey-xt.sortKey});for(var pe=0,Ee=p;pe<Ee.length;pe+=1){var Te=Ee[pe],Pe=Te.geometry,Be=Te.index,Ne=Te.sourceLayerIndex,Ke=e[Be].feature;this.addFeature(Te,Pe,Be,i),t.featureIndex.insert(Ke,Pe,Be,Ne,this.index)}},Qi.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Qi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Y),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Qi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qi.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var x=0,I=d[p];x<I.length;x+=1){var C=I[x],L=C.x,O=C.y;if(!(L<0||L>=8192||O<0||O>=8192)){var q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),K=q.vertexLength;qn(this.layoutVertexArray,L,O,-1,-1),qn(this.layoutVertexArray,L,O,1,-1),qn(this.layoutVertexArray,L,O,1,1),qn(this.layoutVertexArray,L,O,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+3,K+2),q.vertexLength+=4,q.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},ft("CircleBucket",Qi,{omit:["layers"]});var Ja=new Mn({"circle-sort-key":new yt(X.layout_circle["circle-sort-key"])}),Na={paint:new Mn({"circle-radius":new yt(X.paint_circle["circle-radius"]),"circle-color":new yt(X.paint_circle["circle-color"]),"circle-blur":new yt(X.paint_circle["circle-blur"]),"circle-opacity":new yt(X.paint_circle["circle-opacity"]),"circle-translate":new Et(X.paint_circle["circle-translate"]),"circle-translate-anchor":new Et(X.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Et(X.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Et(X.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(X.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(X.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(X.paint_circle["circle-stroke-opacity"])}),layout:Ja},vr=typeof Float32Array<"u"?Float32Array:Array;function So(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function aa(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3],I=t[4],C=t[5],L=t[6],O=t[7],q=t[8],K=t[9],W=t[10],se=t[11],ce=t[12],ye=t[13],pe=t[14],Ee=t[15],Te=i[0],Pe=i[1],Be=i[2],Ne=i[3];return e[0]=Te*l+Pe*I+Be*q+Ne*ce,e[1]=Te*p+Pe*C+Be*K+Ne*ye,e[2]=Te*d+Pe*L+Be*W+Ne*pe,e[3]=Te*x+Pe*O+Be*se+Ne*Ee,e[4]=(Te=i[4])*l+(Pe=i[5])*I+(Be=i[6])*q+(Ne=i[7])*ce,e[5]=Te*p+Pe*C+Be*K+Ne*ye,e[6]=Te*d+Pe*L+Be*W+Ne*pe,e[7]=Te*x+Pe*O+Be*se+Ne*Ee,e[8]=(Te=i[8])*l+(Pe=i[9])*I+(Be=i[10])*q+(Ne=i[11])*ce,e[9]=Te*p+Pe*C+Be*K+Ne*ye,e[10]=Te*d+Pe*L+Be*W+Ne*pe,e[11]=Te*x+Pe*O+Be*se+Ne*Ee,e[12]=(Te=i[12])*l+(Pe=i[13])*I+(Be=i[14])*q+(Ne=i[15])*ce,e[13]=Te*p+Pe*C+Be*K+Ne*ye,e[14]=Te*d+Pe*L+Be*W+Ne*pe,e[15]=Te*x+Pe*O+Be*se+Ne*Ee,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var uc,gf=aa;function Ll(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*x,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*x,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*x,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*x,e}uc=new vr(3),vr!=Float32Array&&(uc[0]=0,uc[1]=0,uc[2]=0),function(){var e=new vr(4);vr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var cc=(function(){var e=new vr(2);vr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Na)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Qi(i)},t.prototype.queryRadius=function(i){var l=i;return Ds("circle-radius",this,l)+Ds("circle-stroke-width",this,l)+$i(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C,L){for(var O=cl(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),q=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),K=this.paint.get("circle-pitch-alignment")==="map",W=K?O:function(Ke,Ye){return Ke.map(function(xt){return hc(xt,Ye)})}(O,L),se=K?q*C:q,ce=0,ye=d;ce<ye.length;ce+=1)for(var pe=0,Ee=ye[ce];pe<Ee.length;pe+=1){var Te=Ee[pe],Pe=K?Te:hc(Te,L),Be=se,Ne=Ll([],[Te.x,Te.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=Ne[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=I.cameraToCenterDistance/Ne[3]),Wa(W,Pe,Be))return!0}return!1},t}(Ss));function hc(e,t){var i=Ll([],[e.x,e.y,0,1],t);return new V(i[0]/i[3],i[1]/i[3])}var zu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Qi);function Rl(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function Wc(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=Rl({},{width:l,height:p},i);_f(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function _f(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=e.data,I=t.data,C=0;C<p.height;C++)for(var L=((i.y+C)*e.width+i.x)*d,O=((l.y+C)*t.width+l.x)*d,q=0;q<p.width*d;q++)I[O+q]=x[L+q];return t}ft("HeatmapBucket",zu,{omit:["layers"]});var Ms=function(e,t){Rl(this,e,1,t)};Ms.prototype.resize=function(e){Wc(this,e,1)},Ms.prototype.clone=function(){return new Ms({width:this.width,height:this.height},new Uint8Array(this.data))},Ms.copy=function(e,t,i,l,p){_f(e,t,i,l,p,1)};var mo=function(e,t){Rl(this,e,4,t)};mo.prototype.resize=function(e){Wc(this,e,4)},mo.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))},mo.copy=function(e,t,i,l,p){_f(e,t,i,l,p,4)},ft("AlphaImage",Ms),ft("RGBAImage",mo);var Bl={paint:new Mn({"heatmap-radius":new yt(X.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(X.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Et(X.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xa(X.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Et(X.paint_heatmap["heatmap-opacity"])})};function hl(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new mo({width:i,height:l}),d=function(se,ce,ye){t[e.evaluationKey]=ye;var pe=e.expression.evaluate(t);p.data[se+ce+0]=Math.floor(255*pe.r/pe.a),p.data[se+ce+1]=Math.floor(255*pe.g/pe.a),p.data[se+ce+2]=Math.floor(255*pe.b/pe.a),p.data[se+ce+3]=Math.floor(255*pe.a)};if(e.clips)for(var x=0,I=0;x<l;++x,I+=4*i)for(var C=0,L=0;C<i;C++,L+=4){var O=C/(i-1),q=e.clips[x];d(I,L,q.start*(1-O)+q.end*O)}else for(var K=0,W=0;K<i;K++,W+=4)d(0,W,K/(i-1));return p}var pc=function(e){function t(i){e.call(this,i,Bl),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new zu(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=hl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(Ss),ry={paint:new Mn({"hillshade-illumination-direction":new Et(X.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Et(X.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Et(X.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Et(X.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Et(X.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Et(X.paint_hillshade["hillshade-accent-color"])})},Nh=function(e){function t(i){e.call(this,i,ry)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(Ss),Wv=ia([{name:"a_pos",components:2,type:"Int16"}],4).members,bf=Pu,Uh=Pu;function Pu(e,t,i){i=i||2;var l,p,d,x,I,C,L,O=t&&t.length,q=O?t[0]*i:e.length,K=Ad(e,0,q,i,!0),W=[];if(!K||K.next===K.prev)return W;if(O&&(K=function(ce,ye,pe,Ee){var Te,Pe,Be,Ne=[];for(Te=0,Pe=ye.length;Te<Pe;Te++)(Be=Ad(ce,ye[Te]*Ee,Te<Pe-1?ye[Te+1]*Ee:ce.length,Ee,!1))===Be.next&&(Be.steiner=!0),Ne.push(dc(Be));for(Ne.sort(oy),Te=0;Te<Ne.length;Te++)sy(Ne[Te],pe),pe=Ls(pe,pe.next);return pe}(e,t,K,i)),e.length>80*i){l=d=e[0],p=x=e[1];for(var se=i;se<q;se+=i)(I=e[se])<l&&(l=I),(C=e[se+1])<p&&(p=C),I>d&&(d=I),C>x&&(x=C);L=(L=Math.max(d-l,x-p))!==0?1/L:0}return fc(K,W,i,l,p,L),W}function Ad(e,t,i,l,p){var d,x;if(p===xf(e,t,i,l)>0)for(d=t;d<i;d+=l)x=zd(d,e[d],e[d+1],x);else for(d=i-l;d>=t;d-=l)x=zd(d,e[d],e[d+1],x);return x&&Mp(x,x.next)&&(jh(x),x=x.next),x}function Ls(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!Mp(l,l.next)&&oa(l.prev,l,l.next)!==0)l=l.next;else{if(jh(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function fc(e,t,i,l,p,d,x){if(e){!x&&d&&function(O,q,K,W){var se=O;do se.z===null&&(se.z=Rs(se.x,se.y,q,K,W)),se.prevZ=se.prev,se.nextZ=se.next,se=se.next;while(se!==O);se.prevZ.nextZ=null,se.prevZ=null,function(ce){var ye,pe,Ee,Te,Pe,Be,Ne,Ke,Ye=1;do{for(pe=ce,ce=null,Pe=null,Be=0;pe;){for(Be++,Ee=pe,Ne=0,ye=0;ye<Ye&&(Ne++,Ee=Ee.nextZ);ye++);for(Ke=Ye;Ne>0||Ke>0&&Ee;)Ne!==0&&(Ke===0||!Ee||pe.z<=Ee.z)?(Te=pe,pe=pe.nextZ,Ne--):(Te=Ee,Ee=Ee.nextZ,Ke--),Pe?Pe.nextZ=Te:ce=Te,Te.prevZ=Pe,Pe=Te;pe=Ee}Pe.nextZ=null,Ye*=2}while(Be>1)}(se)}(e,l,p,d);for(var I,C,L=e;e.prev!==e.next;)if(I=e.prev,C=e.next,d?ny(e,l,p,d):iy(e))t.push(I.i/i),t.push(e.i/i),t.push(C.i/i),jh(e),e=C.next,L=C.next;else if((e=C)===L){x?x===1?fc(e=Yc(Ls(e),t,i),t,i,l,p,d,2):x===2&&ay(e,t,i,l,p,d):fc(Ls(e),t,i,l,p,d,1);break}}}function iy(e){var t=e.prev,i=e,l=e.next;if(oa(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(Jc(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&oa(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ny(e,t,i,l){var p=e.prev,d=e,x=e.next;if(oa(p,d,x)>=0)return!1;for(var I=p.x>d.x?p.x>x.x?p.x:x.x:d.x>x.x?d.x:x.x,C=p.y>d.y?p.y>x.y?p.y:x.y:d.y>x.y?d.y:x.y,L=Rs(p.x<d.x?p.x<x.x?p.x:x.x:d.x<x.x?d.x:x.x,p.y<d.y?p.y<x.y?p.y:x.y:d.y<x.y?d.y:x.y,t,i,l),O=Rs(I,C,t,i,l),q=e.prevZ,K=e.nextZ;q&&q.z>=L&&K&&K.z<=O;){if(q!==e.prev&&q!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,q.x,q.y)&&oa(q.prev,q,q.next)>=0||(q=q.prevZ,K!==e.prev&&K!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,K.x,K.y)&&oa(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;q&&q.z>=L;){if(q!==e.prev&&q!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,q.x,q.y)&&oa(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;K&&K.z<=O;){if(K!==e.prev&&K!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,K.x,K.y)&&oa(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function Yc(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!Mp(p,d)&&Qc(p,l,l.next,d)&&au(p,d)&&au(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),jh(l),jh(l.next),l=e=d),l=l.next}while(l!==e);return Ls(l)}function ay(e,t,i,l,p,d){var x=e;do{for(var I=x.next.next;I!==x.prev;){if(x.i!==I.i&&qh(x,I)){var C=Rp(x,I);return x=Ls(x,x.next),C=Ls(C,C.next),fc(x,t,i,l,p,d),void fc(C,t,i,l,p,d)}I=I.next}x=x.next}while(x!==e)}function oy(e,t){return e.x-t.x}function sy(e,t){if(t=function(l,p){var d,x=p,I=l.x,C=l.y,L=-1/0;do{if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){var O=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(O<=I&&O>L){if(L=O,O===I){if(C===x.y)return x;if(C===x.next.y)return x.next}d=x.x<x.next.x?x:x.next}}x=x.next}while(x!==p);if(!d)return null;if(I===L)return d;var q,K=d,W=d.x,se=d.y,ce=1/0;x=d;do I>=x.x&&x.x>=W&&I!==x.x&&Jc(C<se?I:L,C,W,se,C<se?L:I,C,x.x,x.y)&&(q=Math.abs(C-x.y)/(I-x.x),au(x,l)&&(q<ce||q===ce&&(x.x>d.x||x.x===d.x&&Cu(d,x)))&&(d=x,ce=q)),x=x.next;while(x!==K);return d}(e,t)){var i=Rp(t,e);Ls(t,t.next),Ls(i,i.next)}}function Cu(e,t){return oa(e.prev,e,t.prev)<0&&oa(t.next,e,e.next)<0}function Rs(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function dc(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Jc(e,t,i,l,p,d,x,I){return(p-x)*(t-I)-(e-x)*(d-I)>=0&&(e-x)*(l-I)-(i-x)*(t-I)>=0&&(i-x)*(d-I)-(p-x)*(l-I)>=0}function qh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&Qc(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(au(e,t)&&au(t,e)&&function(i,l){var p=i,d=!1,x=(i.x+l.x)/2,I=(i.y+l.y)/2;do p.y>I!=p.next.y>I&&p.next.y!==p.y&&x<(p.next.x-p.x)*(I-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(oa(e.prev,e,t.prev)||oa(e,t.prev,t))||Mp(e,t)&&oa(e.prev,e,e.next)>0&&oa(t.prev,t,t.next)>0)}function oa(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Mp(e,t){return e.x===t.x&&e.y===t.y}function Qc(e,t,i,l){var p=Lp(oa(e,t,i)),d=Lp(oa(e,t,l)),x=Lp(oa(i,l,e)),I=Lp(oa(i,l,t));return p!==d&&x!==I||!(p!==0||!Du(e,i,t))||!(d!==0||!Du(e,l,t))||!(x!==0||!Du(i,e,l))||!(I!==0||!Du(i,t,l))}function Du(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Lp(e){return e>0?1:e<0?-1:0}function au(e,t){return oa(e.prev,e,e.next)<0?oa(e,t,e.next)>=0&&oa(e,e.prev,t)>=0:oa(e,t,e.prev)<0||oa(e,e.next,t)<0}function Rp(e,t){var i=new Mu(e.i,e.x,e.y),l=new Mu(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function zd(e,t,i,l){var p=new Mu(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function jh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Mu(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xf(e,t,i,l){for(var p=0,d=t,x=i-l;d<i;d+=l)p+=(e[x]-e[d])*(e[d+1]+e[x+1]),x=d;return p}function Ol(e,t,i,l,p){(function d(x,I,C,L,O){for(;L>C;){if(L-C>600){var q=L-C+1,K=I-C+1,W=Math.log(q),se=.5*Math.exp(2*W/3),ce=.5*Math.sqrt(W*se*(q-se)/q)*(K-q/2<0?-1:1);d(x,I,Math.max(C,Math.floor(I-K*se/q+ce)),Math.min(L,Math.floor(I+(q-K)*se/q+ce)),O)}var ye=x[I],pe=C,Ee=L;for(Ho(x,C,I),O(x[L],ye)>0&&Ho(x,C,L);pe<Ee;){for(Ho(x,pe,Ee),pe++,Ee--;O(x[pe],ye)<0;)pe++;for(;O(x[Ee],ye)>0;)Ee--}O(x[C],ye)===0?Ho(x,C,Ee):Ho(x,++Ee,L),Ee<=I&&(C=Ee+1),I<=Ee&&(L=Ee-1)}})(e,t,i||0,l||e.length-1,p||mc)}function Ho(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function mc(e,t){return e<t?-1:e>t?1:0}function wf(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],x=0;x<i;x++){var I=Qe(e[x]);I!==0&&(e[x].area=Math.abs(I),p===void 0&&(p=I<0),p===I<0?(l&&d.push(l),l=[e[x]]):l.push(e[x]))}if(l&&d.push(l),t>1)for(var C=0;C<d.length;C++)d[C].length<=t||(Ol(d[C],t,1,d[C].length-1,Zh),d[C]=d[C].slice(0,t));return d}function Zh(e,t){return t.area-e.area}function ly(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,x=t;d<x.length;d+=1){var I=x[d].paint.get(e+"-pattern");I.isConstant()||(p=!0);var C=I.constantOr(null);C&&(p=!0,l[C.to]=!0,l[C.from]=!0)}return p}function Ef(e,t,i,l,p){for(var d=p.patternDependencies,x=0,I=t;x<I.length;x+=1){var C=I[x],L=C.paint.get(e+"-pattern").value;if(L.kind!=="constant"){var O=L.evaluate({zoom:l-1},i,{},p.availableImages),q=L.evaluate({zoom:l},i,{},p.availableImages),K=L.evaluate({zoom:l+1},i,{},p.availableImages);q=q&&q.name?q.name:q,K=K&&K.name?K.name:K,d[O=O&&O.name?O.name:O]=!0,d[q]=!0,d[K]=!0,i.patterns[C.id]={min:O,mid:q,max:K}}}return i}Pu.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(xf(e,0,p?t[0]*i:e.length,i));if(p)for(var x=0,I=t.length;x<I;x++)d-=Math.abs(xf(e,t[x]*i,x<I-1?t[x+1]*i:e.length,i));var C=0;for(x=0;x<l.length;x+=3){var L=l[x]*i,O=l[x+1]*i,q=l[x+2]*i;C+=Math.abs((e[L]-e[q])*(e[O+1]-e[L+1])-(e[L]-e[O])*(e[q+1]-e[L+1]))}return d===0&&C===0?0:Math.abs((C-d)/d)},Pu.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var x=0;x<t;x++)i.vertices.push(e[p][d][x]);p>0&&i.holes.push(l+=e[p-1].length)}return i},bf.default=Uh;var ko=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tu,this.indexArray=new Ts,this.indexArray2=new po,this.programConfigurations=new Lt(e.layers,e.zoom),this.segments=new J,this.segments2=new J,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};ko.prototype.populate=function(e,t,i){this.hasPattern=ly("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var I=x[d],C=I.feature,L=I.id,O=I.index,q=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=En(C,K);if(this.layers[0]._featureFilter.filter(new or(this.zoom),W,i)){var se=l?l.evaluate(W,{},i,t.availableImages):void 0,ce={id:L,properties:C.properties,type:C.type,sourceLayerIndex:q,index:O,geometry:K?W.geometry:pi(C),patterns:{},sortKey:se};p.push(ce)}}l&&p.sort(function(Ke,Ye){return Ke.sortKey-Ye.sortKey});for(var ye=0,pe=p;ye<pe.length;ye+=1){var Ee=pe[ye],Te=Ee.geometry,Pe=Ee.index,Be=Ee.sourceLayerIndex;if(this.hasPattern){var Ne=Ef("fill",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Ne)}else this.addFeature(Ee,Te,Pe,i,{});t.featureIndex.insert(e[Pe].feature,Te,Pe,Be,this.index)}},ko.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ko.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},ko.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ko.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ko.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Wv),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},ko.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ko.prototype.addFeature=function(e,t,i,l,p){for(var d=0,x=wf(t,500);d<x.length;d+=1){for(var I=x[d],C=0,L=0,O=I;L<O.length;L+=1)C+=O[L].length;for(var q=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),K=q.vertexLength,W=[],se=[],ce=0,ye=I;ce<ye.length;ce+=1){var pe=ye[ce];if(pe.length!==0){pe!==I[0]&&se.push(W.length/2);var Ee=this.segments2.prepareSegment(pe.length,this.layoutVertexArray,this.indexArray2),Te=Ee.vertexLength;this.layoutVertexArray.emplaceBack(pe[0].x,pe[0].y),this.indexArray2.emplaceBack(Te+pe.length-1,Te),W.push(pe[0].x),W.push(pe[0].y);for(var Pe=1;Pe<pe.length;Pe++)this.layoutVertexArray.emplaceBack(pe[Pe].x,pe[Pe].y),this.indexArray2.emplaceBack(Te+Pe-1,Te+Pe),W.push(pe[Pe].x),W.push(pe[Pe].y);Ee.vertexLength+=pe.length,Ee.primitiveLength+=pe.length}}for(var Be=bf(W,se),Ne=0;Ne<Be.length;Ne+=3)this.indexArray.emplaceBack(K+Be[Ne],K+Be[Ne+1],K+Be[Ne+2]);q.vertexLength+=C,q.primitiveLength+=Be.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ft("FillBucket",ko,{omit:["layers","patternFeatures"]});var Gh=new Mn({"fill-sort-key":new yt(X.layout_fill["fill-sort-key"])}),uy={paint:new Mn({"fill-antialias":new Et(X.paint_fill["fill-antialias"]),"fill-opacity":new yt(X.paint_fill["fill-opacity"]),"fill-color":new yt(X.paint_fill["fill-color"]),"fill-outline-color":new yt(X.paint_fill["fill-outline-color"]),"fill-translate":new Et(X.paint_fill["fill-translate"]),"fill-translate-anchor":new Et(X.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cp(X.paint_fill["fill-pattern"])}),layout:Gh},Kh=function(e){function t(i){e.call(this,i,uy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new ko(i)},t.prototype.queryRadius=function(){return $i(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C){return Ya(cl(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),d)},t.prototype.isTileClipped=function(){return!0},t}(Ss),Sf=ia([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Pd=$c;function $c(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(eh,this,t)}function eh(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var x=p._keys[l.readVarint()],I=p._values[l.readVarint()];p.properties[x]=I}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function cy(e){for(var t,i,l=0,p=0,d=e.length,x=d-1;p<d;x=p++)l+=((i=e[x]).x-(t=e[p]).x)*(t.y+i.y);return l}$c.types=["Unknown","Point","LineString","Polygon"],$c.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,x=0,I=[];e.pos<i;){if(p<=0){var C=e.readVarint();l=7&C,p=C>>3}if(p--,l===1||l===2)d+=e.readSVarint(),x+=e.readSVarint(),l===1&&(t&&I.push(t),t=[]),t.push(new V(d,x));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&I.push(t),I},$c.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,x=1/0,I=-1/0,C=1/0,L=-1/0;e.pos<t;){if(l<=0){var O=e.readVarint();i=7&O,l=O>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<x&&(x=p),p>I&&(I=p),(d+=e.readSVarint())<C&&(C=d),d>L&&(L=d);else if(i!==7)throw new Error("unknown command "+i)}return[x,C,I,L]},$c.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),x=this.extent*e,I=this.extent*t,C=this.loadGeometry(),L=$c.types[this.type];function O(W){for(var se=0;se<W.length;se++){var ce=W[se];W[se]=[360*(ce.x+x)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(ce.y+I)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(l=0;l<C.length;l++)q[l]=C[l][0];O(C=q);break;case 2:for(l=0;l<C.length;l++)O(C[l]);break;case 3:for(C=function(W){var se=W.length;if(se<=1)return[W];for(var ce,ye,pe=[],Ee=0;Ee<se;Ee++){var Te=cy(W[Ee]);Te!==0&&(ye===void 0&&(ye=Te<0),ye===Te<0?(ce&&pe.push(ce),ce=[W[Ee]]):ce.push(W[Ee]))}return ce&&pe.push(ce),pe}(C),l=0;l<C.length;l++)for(p=0;p<C[l].length;p++)O(C[l][p])}C.length===1?C=C[0]:L="Multi"+L;var K={type:"Feature",geometry:{type:L,coordinates:C},properties:this.properties};return"id"in this&&(K.id=this.id),K};var Cd=hy;function hy(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(py,this,t),this.length=this._features.length}function py(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var x=l.readVarint()>>3;p=x===1?l.readString():x===2?l.readFloat():x===3?l.readDouble():x===4?l.readVarint64():x===5?l.readVarint():x===6?l.readSVarint():x===7?l.readBoolean():null}return p}(i))}function th(e,t,i){if(e===3){var l=new Cd(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}hy.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Pd(this._pbf,t,this.extent,this._keys,this._values)};var Vl={VectorTile:function(e,t){this.layers=e.readFields(th,{},t)},VectorTileFeature:Pd,VectorTileLayer:Cd},ou=Vl.VectorTileFeature.types,rh=Math.pow(2,13);function Hh(e,t,i,l,p,d,x,I){e.emplaceBack(t,i,2*Math.floor(l*rh)+x,p*rh*2,d*rh*2,Math.round(I))}var pl=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ya,this.indexArray=new Ts,this.programConfigurations=new Lt(e.layers,e.zoom),this.segments=new J,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ih(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}pl.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=ly("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],x=d.feature,I=d.id,C=d.index,L=d.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,q=En(x,O);if(this.layers[0]._featureFilter.filter(new or(this.zoom),q,i)){var K={id:I,sourceLayerIndex:L,index:C,geometry:O?q.geometry:pi(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(Ef("fill-extrusion",this.layers,K,this.zoom,t)):this.addFeature(K,K.geometry,C,i,{}),t.featureIndex.insert(x,K.geometry,C,L,this.index,!0)}}},pl.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},pl.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},pl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pl.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Sf),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},pl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pl.prototype.addFeature=function(e,t,i,l,p){for(var d=0,x=wf(t,500);d<x.length;d+=1){for(var I=x[d],C=0,L=0,O=I;L<O.length;L+=1)C+=O[L].length;for(var q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),K=0,W=I;K<W.length;K+=1){var se=W[K];if(se.length!==0&&!((nr=se).every(function(Kt){return Kt.x<0})||nr.every(function(Kt){return Kt.x>8192})||nr.every(function(Kt){return Kt.y<0})||nr.every(function(Kt){return Kt.y>8192})))for(var ce=0,ye=0;ye<se.length;ye++){var pe=se[ye];if(ye>=1){var Ee=se[ye-1];if(!ih(pe,Ee)){q.vertexLength+4>J.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Te=pe.sub(Ee)._perp()._unit(),Pe=Ee.dist(pe);ce+Pe>32768&&(ce=0),Hh(this.layoutVertexArray,pe.x,pe.y,Te.x,Te.y,0,0,ce),Hh(this.layoutVertexArray,pe.x,pe.y,Te.x,Te.y,0,1,ce),Hh(this.layoutVertexArray,Ee.x,Ee.y,Te.x,Te.y,0,0,ce+=Pe),Hh(this.layoutVertexArray,Ee.x,Ee.y,Te.x,Te.y,0,1,ce);var Be=q.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),q.vertexLength+=4,q.primitiveLength+=2}}}}if(q.vertexLength+C>J.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),ou[e.type]==="Polygon"){for(var Ne=[],Ke=[],Ye=q.vertexLength,xt=0,at=I;xt<at.length;xt+=1){var zt=at[xt];if(zt.length!==0){zt!==I[0]&&Ke.push(Ne.length/2);for(var ut=0;ut<zt.length;ut++){var Wt=zt[ut];Hh(this.layoutVertexArray,Wt.x,Wt.y,0,0,1,1,0),Ne.push(Wt.x),Ne.push(Wt.y)}}}for(var Pt=bf(Ne,Ke),gt=0;gt<Pt.length;gt+=3)this.indexArray.emplaceBack(Ye+Pt[gt],Ye+Pt[gt+2],Ye+Pt[gt+1]);q.primitiveLength+=Pt.length/3,q.vertexLength+=C}}var nr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ft("FillExtrusionBucket",pl,{omit:["layers","features"]});var su={paint:new Mn({"fill-extrusion-opacity":new Et(X["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(X["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Et(X["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Et(X["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cp(X["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(X["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(X["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Et(X["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},fy=function(e){function t(i){e.call(this,i,su)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new pl(i)},t.prototype.queryRadius=function(){return $i(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C,L){var O=cl(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),q=this.paint.get("fill-extrusion-height").evaluate(l,p),K=this.paint.get("fill-extrusion-base").evaluate(l,p),W=function(ce,ye,pe,Ee){for(var Te=[],Pe=0,Be=ce;Pe<Be.length;Pe+=1){var Ne=Be[Pe],Ke=[Ne.x,Ne.y,0,1];Ll(Ke,Ke,ye),Te.push(new V(Ke[0]/Ke[3],Ke[1]/Ke[3]))}return Te}(O,L),se=function(ce,ye,pe,Ee){for(var Te=[],Pe=[],Be=Ee[8]*ye,Ne=Ee[9]*ye,Ke=Ee[10]*ye,Ye=Ee[11]*ye,xt=Ee[8]*pe,at=Ee[9]*pe,zt=Ee[10]*pe,ut=Ee[11]*pe,Wt=0,Pt=ce;Wt<Pt.length;Wt+=1){for(var gt=[],nr=[],Kt=0,Sr=Pt[Wt];Kt<Sr.length;Kt+=1){var Tt=Sr[Kt],gr=Tt.x,Li=Tt.y,ii=Ee[0]*gr+Ee[4]*Li+Ee[12],jr=Ee[1]*gr+Ee[5]*Li+Ee[13],Hr=Ee[2]*gr+Ee[6]*Li+Ee[14],mn=Ee[3]*gr+Ee[7]*Li+Ee[15],yn=Hr+Ke,va=mn+Ye,qa=ii+xt,kn=jr+at,Wn=Hr+zt,In=mn+ut,Tn=new V((ii+Be)/va,(jr+Ne)/va);Tn.z=yn/va,gt.push(Tn);var fr=new V(qa/In,kn/In);fr.z=Wn/In,nr.push(fr)}Te.push(gt),Pe.push(nr)}return[Te,Pe]}(d,K,q,L);return function(ce,ye,pe){var Ee=1/0;Ya(pe,ye)&&(Ee=kf(pe,ye[0]));for(var Te=0;Te<ye.length;Te++)for(var Pe=ye[Te],Be=ce[Te],Ne=0;Ne<Pe.length-1;Ne++){var Ke=Pe[Ne],Ye=[Ke,Pe[Ne+1],Be[Ne+1],Be[Ne],Ke];fo(pe,Ye)&&(Ee=Math.min(Ee,kf(pe,Ye)))}return Ee!==1/0&&Ee}(se[0],se[1],W)},t}(Ss);function yc(e,t){return e.x*t.x+e.y*t.y}function kf(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],x=e[0],I=i.sub(p),C=d.sub(p),L=x.sub(p),O=yc(I,I),q=yc(I,C),K=yc(C,C),W=yc(L,I),se=yc(L,C),ce=O*K-q*q,ye=(K*W-q*se)/ce,pe=(O*se-q*W)/ce,Ee=p.z*(1-ye-pe)+i.z*ye+d.z*pe;if(isFinite(Ee))return Ee}return 1/0}for(var Te=1/0,Pe=0,Be=t;Pe<Be.length;Pe+=1)Te=Math.min(Te,Be[Pe].z);return Te}var dy=ia([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Bp=ia([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,my=Vl.VectorTileFeature.types,yy=Math.cos(Math.PI/180*37.5),Bs=Math.pow(2,14)/.5,Rn=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new Ln,this.layoutVertexArray2=new Iu,this.indexArray=new Ts,this.programConfigurations=new Lt(e.layers,e.zoom),this.segments=new J,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Rn.prototype.populate=function(e,t,i){this.hasPattern=ly("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var I=x[d],C=I.feature,L=I.id,O=I.index,q=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=En(C,K);if(this.layers[0]._featureFilter.filter(new or(this.zoom),W,i)){var se=l?l.evaluate(W,{},i):void 0,ce={id:L,properties:C.properties,type:C.type,sourceLayerIndex:q,index:O,geometry:K?W.geometry:pi(C),patterns:{},sortKey:se};p.push(ce)}}l&&p.sort(function(Ke,Ye){return Ke.sortKey-Ye.sortKey});for(var ye=0,pe=p;ye<pe.length;ye+=1){var Ee=pe[ye],Te=Ee.geometry,Pe=Ee.index,Be=Ee.sourceLayerIndex;if(this.hasPattern){var Ne=Ef("line",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Ne)}else this.addFeature(Ee,Te,Pe,i,{});t.featureIndex.insert(e[Pe].feature,Te,Pe,Be,this.index)}},Rn.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Rn.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Rn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Rn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rn.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Bp)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,dy),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Rn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Rn.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Rn.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,x=d.get("line-join").evaluate(e,{}),I=d.get("line-cap"),C=d.get("line-miter-limit"),L=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var O=0,q=t;O<q.length;O+=1)this.addLine(q[O],e,x,I,C,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},Rn.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<e.length-1;x++)this.totalDistance+=e[x].dist(e[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var I=my[t.type]==="Polygon",C=e.length;C>=2&&e[C-1].equals(e[C-2]);)C--;for(var L=0;L<C-1&&e[L].equals(e[L+1]);)L++;if(!(C<(I?3:2))){i==="bevel"&&(p=1.05);var O,q=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),W=void 0,se=void 0,ce=void 0,ye=void 0;this.e1=this.e2=-1,I&&(ye=e[L].sub(O=e[C-2])._unit()._perp());for(var pe=L;pe<C;pe++)if(!(se=pe===C-1?I?e[L+1]:void 0:e[pe+1])||!e[pe].equals(se)){ye&&(ce=ye),O&&(W=O),O=e[pe],ye=se?se.sub(O)._unit()._perp():ce;var Ee=(ce=ce||ye).add(ye);Ee.x===0&&Ee.y===0||Ee._unit();var Te=ce.x*ye.x+ce.y*ye.y,Pe=Ee.x*ye.x+Ee.y*ye.y,Be=Pe!==0?1/Pe:1/0,Ne=2*Math.sqrt(2-2*Pe),Ke=Pe<yy&&W&&se,Ye=ce.x*ye.y-ce.y*ye.x>0;if(Ke&&pe>L){var xt=O.dist(W);if(xt>2*q){var at=O.sub(O.sub(W)._mult(q/xt)._round());this.updateDistance(W,at),this.addCurrentVertex(at,ce,0,0,K),W=at}}var zt=W&&se,ut=zt?i:I?"butt":l;if(zt&&ut==="round"&&(Be<d?ut="miter":Be<=2&&(ut="fakeround")),ut==="miter"&&Be>p&&(ut="bevel"),ut==="bevel"&&(Be>2&&(ut="flipbevel"),Be<p&&(ut="miter")),W&&this.updateDistance(W,O),ut==="miter")Ee._mult(Be),this.addCurrentVertex(O,Ee,0,0,K);else if(ut==="flipbevel"){if(Be>100)Ee=ye.mult(-1);else{var Wt=Be*ce.add(ye).mag()/ce.sub(ye).mag();Ee._perp()._mult(Wt*(Ye?-1:1))}this.addCurrentVertex(O,Ee,0,0,K),this.addCurrentVertex(O,Ee.mult(-1),0,0,K)}else if(ut==="bevel"||ut==="fakeround"){var Pt=-Math.sqrt(Be*Be-1),gt=Ye?Pt:0,nr=Ye?0:Pt;if(W&&this.addCurrentVertex(O,ce,gt,nr,K),ut==="fakeround")for(var Kt=Math.round(180*Ne/Math.PI/20),Sr=1;Sr<Kt;Sr++){var Tt=Sr/Kt;if(Tt!==.5){var gr=Tt-.5;Tt+=Tt*gr*(Tt-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*gr*gr+(.848013+Te*(.215638*Te-1.06021)))}var Li=ye.sub(ce)._mult(Tt)._add(ce)._unit()._mult(Ye?-1:1);this.addHalfVertex(O,Li.x,Li.y,!1,Ye,0,K)}se&&this.addCurrentVertex(O,ye,-gt,-nr,K)}else if(ut==="butt")this.addCurrentVertex(O,Ee,0,0,K);else if(ut==="square"){var ii=W?1:-1;this.addCurrentVertex(O,Ee,ii,ii,K)}else ut==="round"&&(W&&(this.addCurrentVertex(O,ce,0,0,K),this.addCurrentVertex(O,ce,1,1,K,!0)),se&&(this.addCurrentVertex(O,ye,-1,-1,K,!0),this.addCurrentVertex(O,ye,0,0,K)));if(Ke&&pe<C-1){var jr=O.dist(se);if(jr>2*q){var Hr=O.add(se.sub(O)._mult(q/jr)._round());this.updateDistance(O,Hr),this.addCurrentVertex(Hr,ye,0,0,K),O=Hr}}}}},Rn.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var x=t.y*l-t.x,I=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,x,I,d,!0,-l,p),this.distance>Bs/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},Rn.prototype.addHalfVertex=function(e,t,i,l,p,d,x){var I=.5*(this.lineClips?this.scaledDistance*(Bs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),x.primitiveLength++),p?this.e2=C:this.e1=C},Rn.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Rn.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ft("LineBucket",Rn,{omit:["layers","patternFeatures"]});var Fl=new Mn({"line-cap":new Et(X.layout_line["line-cap"]),"line-join":new yt(X.layout_line["line-join"]),"line-miter-limit":new Et(X.layout_line["line-miter-limit"]),"line-round-limit":new Et(X.layout_line["line-round-limit"]),"line-sort-key":new yt(X.layout_line["line-sort-key"])}),Lu={paint:new Mn({"line-opacity":new yt(X.paint_line["line-opacity"]),"line-color":new yt(X.paint_line["line-color"]),"line-translate":new Et(X.paint_line["line-translate"]),"line-translate-anchor":new Et(X.paint_line["line-translate-anchor"]),"line-width":new yt(X.paint_line["line-width"]),"line-gap-width":new yt(X.paint_line["line-gap-width"]),"line-offset":new yt(X.paint_line["line-offset"]),"line-blur":new yt(X.paint_line["line-blur"]),"line-dasharray":new Fa(X.paint_line["line-dasharray"]),"line-pattern":new Cp(X.paint_line["line-pattern"]),"line-gradient":new Xa(X.paint_line["line-gradient"])}),layout:Fl},Dd=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new or(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=Ue({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(yt))(Lu.paint.properties["line-width"].specification);Dd.useIntegerZoom=!0;var Xh=function(e){function t(i){e.call(this,i,Lu),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ii,this.gradientVersion=(this.gradientVersion+1)%he)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=Dd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new Rn(i)},t.prototype.queryRadius=function(i){var l=i,p=iv(Ds("line-width",this,l),Ds("line-gap-width",this,l)),d=Ds("line-offset",this,l);return p/2+Math.abs(d)+$i(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C){var L=cl(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),O=C/2*iv(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),q=this.paint.get("line-offset").evaluate(l,p);return q&&(d=function(K,W){for(var se=[],ce=new V(0,0),ye=0;ye<K.length;ye++){for(var pe=K[ye],Ee=[],Te=0;Te<pe.length;Te++){var Pe=pe[Te],Be=pe[Te+1],Ne=Te===0?ce:Pe.sub(pe[Te-1])._unit()._perp(),Ke=Te===pe.length-1?ce:Be.sub(Pe)._unit()._perp(),Ye=Ne._add(Ke)._unit();Ye._mult(1/(Ye.x*Ke.x+Ye.y*Ke.y)),Ee.push(Ye._mult(W)._add(Pe))}se.push(Ee)}return se}(d,q*C)),function(K,W,se){for(var ce=0;ce<W.length;ce++){var ye=W[ce];if(K.length>=3){for(var pe=0;pe<ye.length;pe++)if(Ko(K,ye[pe]))return!0}if(Ps(K,ye,se))return!0}return!1}(L,d,O)},t.prototype.isTileClipped=function(){return!0},t}(Ss);function iv(e,t){return t>0?t+2*e:e}var vy=ia([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wh=ia([{name:"a_projected_pos",components:3,type:"Float32"}],4),Yh=(ia([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ia([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Md=(ia([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ia([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Jh=ia([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function If(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,x){var I=d.layout.get("text-transform").evaluate(x,{});return I==="uppercase"?p=p.toLocaleUpperCase():I==="lowercase"&&(p=p.toLocaleLowerCase()),wo.applyArabicShaping&&(p=wo.applyArabicShaping(p)),p}(l.text,t,i)}),e}ia([{name:"triangle",components:3,type:"Uint16"}]),ia([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ia([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ia([{type:"Float32",name:"offsetX"}]),ia([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Qh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ld=function(e,t,i,l,p){var d,x,I=8*p-l-1,C=(1<<I)-1,L=C>>1,O=-7,q=i?p-1:0,K=i?-1:1,W=e[t+q];for(q+=K,d=W&(1<<-O)-1,W>>=-O,O+=I;O>0;d=256*d+e[t+q],q+=K,O-=8);for(x=d&(1<<-O)-1,d>>=-O,O+=l;O>0;x=256*x+e[t+q],q+=K,O-=8);if(d===0)d=1-L;else{if(d===C)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,l),d-=L}return(W?-1:1)*x*Math.pow(2,d-l)},vc=function(e,t,i,l,p,d){var x,I,C,L=8*d-p-1,O=(1<<L)-1,q=O>>1,K=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=l?0:d-1,se=l?1:-1,ce=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(I=isNaN(t)?1:0,x=O):(x=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-x))<1&&(x--,C*=2),(t+=x+q>=1?K/C:K*Math.pow(2,1-q))*C>=2&&(x++,C/=2),x+q>=O?(I=0,x=O):x+q>=1?(I=(t*C-1)*Math.pow(2,p),x+=q):(I=t*Math.pow(2,q-1)*Math.pow(2,p),x=0));p>=8;e[i+W]=255&I,W+=se,I/=256,p-=8);for(x=x<<p|I,L+=p;L>0;e[i+W]=255&x,W+=se,x/=256,L-=8);e[i+W-se]|=128*ce},Op=Br;function Br(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Br.Varint=0,Br.Fixed64=1,Br.Bytes=2,Br.Fixed32=5;var fl=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Io(e){return e.type===Br.Bytes?e.readVarint()+e.pos:e.pos+1}function nh(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function ah(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function Yv(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function gy(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function $h(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function ep(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function _y(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function tp(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Tf(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function by(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xy(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function lu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function oh(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Vp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function nv(e,t,i){e===1&&i.readMessage(wy,t)}function wy(e,t,i){if(e===3){var l=i.readMessage(sh,{}),p=l.width,d=l.height,x=l.left,I=l.top,C=l.advance;t.push({id:l.id,bitmap:new Ms({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:x,top:I,advance:C}})}}function sh(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function lh(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(ce,ye){return ye.h-ce.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],I=0,C=0,L=0,O=e;L<O.length;L+=1)for(var q=O[L],K=x.length-1;K>=0;K--){var W=x[K];if(!(q.w>W.w||q.h>W.h)){if(q.x=W.x,q.y=W.y,C=Math.max(C,q.y+q.h),I=Math.max(I,q.x+q.w),q.w===W.w&&q.h===W.h){var se=x.pop();K<x.length&&(x[K]=se)}else q.h===W.h?(W.x+=q.w,W.w-=q.w):q.w===W.w?(W.y+=q.h,W.h-=q.h):(x.push({x:W.x+q.w,y:W.y,w:W.w-q.w,h:q.h}),W.y+=q.h,W.h-=q.h);break}}return{w:I,h:C,fill:t/(I*C)||0}}Br.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Vp(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*Vp(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ld(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ld(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,x){var I,C,L=x.buf;if(I=(112&(C=L[x.pos++]))>>4,C<128||(I|=(127&(C=L[x.pos++]))<<3,C<128)||(I|=(127&(C=L[x.pos++]))<<10,C<128)||(I|=(127&(C=L[x.pos++]))<<17,C<128)||(I|=(127&(C=L[x.pos++]))<<24,C<128)||(I|=(1&(C=L[x.pos++]))<<31,C<128))return nh(p,I,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&fl?function(i,l,p){return fl.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",x=l;x<p;){var I,C,L,O=i[x],q=null,K=O>239?4:O>223?3:O>191?2:1;if(x+K>p)break;K===1?O<128&&(q=O):K===2?(192&(I=i[x+1]))==128&&(q=(31&O)<<6|63&I)<=127&&(q=null):K===3?(C=i[x+2],(192&(I=i[x+1]))==128&&(192&C)==128&&((q=(15&O)<<12|(63&I)<<6|63&C)<=2047||q>=55296&&q<=57343)&&(q=null)):K===4&&(C=i[x+2],L=i[x+3],(192&(I=i[x+1]))==128&&(192&C)==128&&(192&L)==128&&((q=(15&O)<<18|(63&I)<<12|(63&C)<<6|63&L)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,K=1):q>65535&&(q-=65536,d+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),d+=String.fromCharCode(q),x+=K}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Br.Bytes)return e.push(this.readVarint(t));var i=Io(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Br.Bytes)return e.push(this.readSVarint());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Br.Bytes)return e.push(this.readBoolean());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Br.Bytes)return e.push(this.readFloat());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Br.Bytes)return e.push(this.readDouble());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Br.Bytes)return e.push(this.readFixed32());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Br.Bytes)return e.push(this.readSFixed32());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Br.Bytes)return e.push(this.readFixed64());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Br.Bytes)return e.push(this.readSFixed64());var t=Io(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Br.Varint)for(;this.buf[this.pos++]>127;);else if(t===Br.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Br.Fixed32)this.pos+=4;else{if(t!==Br.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),oh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),oh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),oh(this.buf,-1&e,this.pos),oh(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),oh(this.buf,-1&e,this.pos),oh(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,x,I){I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,I.buf[I.pos]=127&(d>>>=7)}(l,0,i),function(d,x){var I=(7&d)<<4;x.buf[x.pos++]|=I|((d>>>=3)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var x,I,C=0;C<p.length;C++){if((x=p.charCodeAt(C))>55295&&x<57344){if(!I){x>56319||C+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):I=x;continue}if(x<56320){l[d++]=239,l[d++]=191,l[d++]=189,I=x;continue}x=I-55296<<10|x-56320|65536,I=null}else I&&(l[d++]=239,l[d++]=191,l[d++]=189,I=null);x<128?l[d++]=x:(x<2048?l[d++]=x>>6|192:(x<65536?l[d++]=x>>12|224:(l[d++]=x>>18|240,l[d++]=x>>12&63|128),l[d++]=x>>6&63|128),l[d++]=63&x|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&ah(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),vc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),vc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&ah(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,Br.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Yv,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,gy,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,_y,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,$h,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,ep,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,tp,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Tf,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,by,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xy,t)},writeBytesField:function(e,t){this.writeTag(e,Br.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Br.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Br.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Br.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Br.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Br.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Br.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Br.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Br.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Br.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Os=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,x=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=x,this.version=l},Ru={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ru.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ru.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ru.tlbr.get=function(){return this.tl.concat(this.br)},Ru.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Os.prototype,Ru);var rp=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=lh(p),x=new mo({width:d.w||1,height:d.h||1});for(var I in e){var C=e[I],L=i[I].paddedRect;mo.copy(C.data,x,{x:0,y:0},{x:L.x+1,y:L.y+1},C.data)}for(var O in t){var q=t[O],K=l[O].paddedRect,W=K.x+1,se=K.y+1,ce=q.data.width,ye=q.data.height;mo.copy(q.data,x,{x:0,y:0},{x:W,y:se},q.data),mo.copy(q.data,x,{x:0,y:ye-1},{x:W,y:se-1},{width:ce,height:1}),mo.copy(q.data,x,{x:0,y:0},{x:W,y:se+ye},{width:ce,height:1}),mo.copy(q.data,x,{x:ce-1,y:0},{x:W-1,y:se},{width:1,height:ye}),mo.copy(q.data,x,{x:0,y:0},{x:W+ce,y:se},{width:1,height:ye})}this.image=x,this.iconPositions=i,this.patternPositions=l};rp.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new Os(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},rp.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},rp.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},ft("ImagePosition",Os),ft("ImageAtlas",rp);var Xo={horizontal:1,vertical:2,horizontalOnly:3},dl=function(){this.scale=1,this.fontStack="",this.imageName=null};dl.forText=function(e,t){var i=new dl;return i.scale=e||1,i.fontStack=t,i},dl.forImage=function(e){var t=new dl;return t.imageName=e,t};var fn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Fp(e,t,i,l,p,d,x,I,C,L,O,q,K,W,se,ce){var ye,pe=fn.fromFeature(e,p);q===Xo.vertical&&pe.verticalizePunctuation();var Ee=wo.processBidirectionalText,Te=wo.processStyledBidirectionalText;if(Ee&&pe.sections.length===1){ye=[];for(var Pe=0,Be=Ee(pe.toString(),fs(pe,L,d,t,l,W,se));Pe<Be.length;Pe+=1){var Ne=Be[Pe],Ke=new fn;Ke.text=Ne,Ke.sections=pe.sections;for(var Ye=0;Ye<Ne.length;Ye++)Ke.sectionIndex.push(0);ye.push(Ke)}}else if(Te){ye=[];for(var xt=0,at=Te(pe.text,pe.sectionIndex,fs(pe,L,d,t,l,W,se));xt<at.length;xt+=1){var zt=at[xt],ut=new fn;ut.text=zt[0],ut.sectionIndex=zt[1],ut.sections=pe.sections,ye.push(ut)}}else ye=function(gt,nr){for(var Kt=[],Sr=gt.text,Tt=0,gr=0,Li=nr;gr<Li.length;gr+=1){var ii=Li[gr];Kt.push(gt.substring(Tt,ii)),Tt=ii}return Tt<Sr.length&&Kt.push(gt.substring(Tt,Sr.length)),Kt}(pe,fs(pe,L,d,t,l,W,se));var Wt=[],Pt={positionedLines:Wt,text:pe.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(gt,nr,Kt,Sr,Tt,gr,Li,ii,jr,Hr,mn,yn){for(var va=0,qa=-17,kn=0,Wn=0,In=ii==="right"?1:ii==="left"?0:.5,Tn=0,fr=0,ni=Tt;fr<ni.length;fr+=1){var Xr=ni[fr];Xr.trim();var mr=Xr.getMaxScale(),Qa=24*(mr-1),vn={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Tn]=vn;var Dr=vn.positionedGlyphs,Ai=0;if(Xr.length()){for(var Ta=0;Ta<Xr.length();Ta++){var xr=Xr.getSection(Ta),Ou=Xr.getSectionIndex(Ta),Yo=Xr.getCharCode(Ta),Jo=0,Ri=null,jl=null,vo=null,Vu=24,kc=!(jr===Xo.horizontal||!mn&&!Cl(Yo)||mn&&(uh[Yo]||(Ic=Yo,rt.Arabic(Ic)||rt["Arabic Supplement"](Ic)||rt["Arabic Extended-A"](Ic)||rt["Arabic Presentation Forms-A"](Ic)||rt["Arabic Presentation Forms-B"](Ic))));if(xr.imageName){var gh=Sr[xr.imageName];if(!gh)continue;vo=xr.imageName,gt.iconsInText=gt.iconsInText||!0,jl=gh.paddedRect;var Qo=gh.displaySize;xr.scale=24*xr.scale/yn,Jo=Qa+(24-Qo[1]*xr.scale),Vu=(Ri={width:Qo[0],height:Qo[1],left:1,top:-3,advance:kc?Qo[1]:Qo[0]}).advance;var _h=kc?Qo[0]*xr.scale-24*mr:Qo[1]*xr.scale-24*mr;_h>0&&_h>Ai&&(Ai=_h)}else{var _l=Kt[xr.fontStack],To=_l&&_l[Yo];if(To&&To.rect)jl=To.rect,Ri=To.metrics;else{var bl=nr[xr.fontStack],Wp=bl&&bl[Yo];if(!Wp)continue;Ri=Wp.metrics}Jo=24*(mr-xr.scale)}kc?(gt.verticalizable=!0,Dr.push({glyph:Yo,imageName:vo,x:va,y:qa+Jo,vertical:kc,scale:xr.scale,fontStack:xr.fontStack,sectionIndex:Ou,metrics:Ri,rect:jl}),va+=Vu*xr.scale+Hr):(Dr.push({glyph:Yo,imageName:vo,x:va,y:qa+Jo,vertical:kc,scale:xr.scale,fontStack:xr.fontStack,sectionIndex:Ou,metrics:Ri,rect:jl}),va+=Ri.advance*xr.scale+Hr)}Dr.length!==0&&(kn=Math.max(va-Hr,kn),Ul(Dr,0,Dr.length-1,In,Ai)),va=0;var Fu=gr*mr+Ai;vn.lineOffset=Math.max(Ai,Qa),qa+=Fu,Wn=Math.max(Fu,Wn),++Tn}else qa+=gr,++Tn}var Ic,hp=qa- -17,Zl=Nl(Li),Ns=Zl.horizontalAlign,bh=Zl.verticalAlign;(function(Nu,xh,pp,fp,mu,Yp,dp,Gl,Uu){var $o,Tc=(xh-pp)*mu;$o=Yp!==dp?-Gl*fp- -17:(-fp*Uu+.5)*dp;for(var wh=0,mp=Nu;wh<mp.length;wh+=1)for(var Us=0,ms=mp[wh].positionedGlyphs;Us<ms.length;Us+=1){var Eh=ms[Us];Eh.x+=Tc,Eh.y+=$o}})(gt.positionedLines,In,Ns,bh,kn,Wn,gr,hp,Tt.length),gt.top+=-bh*hp,gt.bottom=gt.top+hp,gt.left+=-Ns*kn,gt.right=gt.left+kn}(Pt,t,i,l,ye,x,I,C,q,L,K,ce),!function(gt){for(var nr=0,Kt=gt;nr<Kt.length;nr+=1)if(Kt[nr].positionedGlyphs.length!==0)return!1;return!0}(Wt)&&Pt}fn.fromFeature=function(e,t){for(var i=new fn,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},fn.prototype.length=function(){return this.text.length},fn.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},fn.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},fn.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},fn.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&Fo(l)&&!Qh[e[i+1]]||p&&Fo(p)&&!Qh[e[i-1]]||!Qh[e[i]]?e[i]:Qh[e[i]]}return t}(this.text)},fn.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&uh[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&uh[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},fn.prototype.substring=function(e,t){var i=new fn;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},fn.prototype.toString=function(){return this.text},fn.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},fn.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(dl.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},fn.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(dl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Rt("Reached maximum number of images 6401")}else Rt("Can't add FormattedSection with an empty image.")},fn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var uh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yo={};function Rd(e,t,i,l,p,d){if(t.imageName){var x=l[t.imageName];return x?x.displaySize[0]*t.scale*24/d+p:0}var I=i[t.fontStack],C=I&&I[e];return C?C.metrics.advance*t.scale+p:0}function ip(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function Ey(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function Bd(e,t,i,l,p,d){for(var x=null,I=ip(t,i,p,d),C=0,L=l;C<L.length;C+=1){var O=L[C],q=ip(t-O.x,i,p,d)+O.badness;q<=I&&(x=O,I=q)}return{index:e,x:t,priorBreak:x,badness:I}}function fs(e,t,i,l,p,d,x){if(d!=="point")return[];if(!e)return[];for(var I,C=[],L=function(ye,pe,Ee,Te,Pe,Be){for(var Ne=0,Ke=0;Ke<ye.length();Ke++){var Ye=ye.getSection(Ke);Ne+=Rd(ye.getCharCode(Ke),Ye,Te,Pe,pe,Be)}return Ne/Math.max(1,Math.ceil(Ne/Ee))}(e,t,i,l,p,x),O=e.text.indexOf("\u200B")>=0,q=0,K=0;K<e.length();K++){var W=e.getSection(K),se=e.getCharCode(K);if(uh[se]||(q+=Rd(se,W,l,p,t,x)),K<e.length()-1){var ce=!((I=se)<11904||!(rt["Bopomofo Extended"](I)||rt.Bopomofo(I)||rt["CJK Compatibility Forms"](I)||rt["CJK Compatibility Ideographs"](I)||rt["CJK Compatibility"](I)||rt["CJK Radicals Supplement"](I)||rt["CJK Strokes"](I)||rt["CJK Symbols and Punctuation"](I)||rt["CJK Unified Ideographs Extension A"](I)||rt["CJK Unified Ideographs"](I)||rt["Enclosed CJK Letters and Months"](I)||rt["Halfwidth and Fullwidth Forms"](I)||rt.Hiragana(I)||rt["Ideographic Description Characters"](I)||rt["Kangxi Radicals"](I)||rt["Katakana Phonetic Extensions"](I)||rt.Katakana(I)||rt["Vertical Forms"](I)||rt["Yi Radicals"](I)||rt["Yi Syllables"](I)));(yo[se]||ce||W.imageName)&&C.push(Bd(K+1,q,L,C,Ey(se,e.getCharCode(K+1),ce&&O),!1))}}return function ye(pe){return pe?ye(pe.priorBreak).concat(pe.index):[]}(Bd(e.length(),q,L,C,0,!0))}function Nl(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Ul(e,t,i,l,p){if(l||p)for(var d=e[i],x=(e[i].x+d.metrics.advance*d.scale)*l,I=t;I<=i;I++)e[I].x-=x,e[I].y+=p}function uu(e,t,i,l,p,d){var x,I=e.image;if(I.content){var C=I.content,L=I.pixelRatio||1;x=[C[0]/L,C[1]/L,I.displaySize[0]-C[2]/L,I.displaySize[1]-C[3]/L]}var O,q,K,W,se=t.left*d,ce=t.right*d;i==="width"||i==="both"?(W=p[0]+se-l[3],q=p[0]+ce+l[1]):q=(W=p[0]+(se+ce-I.displaySize[0])/2)+I.displaySize[0];var ye=t.top*d,pe=t.bottom*d;return i==="height"||i==="both"?(O=p[1]+ye-l[0],K=p[1]+pe+l[2]):K=(O=p[1]+(ye+pe-I.displaySize[1])/2)+I.displaySize[1],{image:I,top:O,right:q,bottom:K,left:W,collisionPadding:x}}yo[10]=!0,yo[32]=!0,yo[38]=!0,yo[40]=!0,yo[41]=!0,yo[43]=!0,yo[45]=!0,yo[47]=!0,yo[173]=!0,yo[183]=!0,yo[8203]=!0,yo[8208]=!0,yo[8211]=!0,yo[8231]=!0;var ch=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(V);function gc(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new or(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var x=d=Math.max(0,d-1);x<l.length&&l[x]<e+1;)x++;x=Math.min(l.length-1,x);var I=l[d],C=l[x];return i.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:C,interpolationType:p}:{kind:"camera",minZoom:I,maxZoom:C,minSize:i.evaluate(new or(I)),maxSize:i.evaluate(new or(C)),interpolationType:p}}function av(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?Nr(p/128,i.upperSize/128,t.uSizeT):l}function Od(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?we(hi.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=Nr(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}ft("Anchor",ch);var np=Object.freeze({__proto__:null,getSizeData:gc,evaluateSizeForFeature:av,evaluateSizeForZoom:Od,SIZE_PACK_FACTOR:128});function hh(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,x=t.segment+1,I=0;I>-i/2;){if(--x<0)return!1;I-=e[x].dist(d),d=e[x]}I+=e[x].dist(e[x+1]),x++;for(var C=[],L=0;I<i/2;){var O=e[x],q=e[x+1];if(!q)return!1;var K=e[x-1].angleTo(O)-O.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:I,angleDelta:K}),L+=K;I-C[0].distance>l;)L-=C.shift().angleDelta;if(L>p)return!1;x++,I+=O.dist(q)}return!0}function Vd(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function ph(e,t,i){return e?.6*t*i:0}function Np(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Sy(e,t,i,l,p,d){for(var x=ph(i,p,d),I=Np(i,l)*d,C=0,L=Vd(e)/2,O=0;O<e.length-1;O++){var q=e[O],K=e[O+1],W=q.dist(K);if(C+W>L){var se=(L-C)/W,ce=Nr(q.x,K.x,se),ye=Nr(q.y,K.y,se),pe=new ch(ce,ye,K.angleTo(q),O);return pe._round(),!x||hh(e,pe,I,x,t)?pe:void 0}C+=W}}function ky(e,t,i,l,p,d,x,I,C){var L=ph(l,d,x),O=Np(l,p),q=O*x,K=e[0].x===0||e[0].x===C||e[0].y===0||e[0].y===C;return t-q<t/4&&(t=q+t/4),function W(se,ce,ye,pe,Ee,Te,Pe,Be,Ne){for(var Ke=Te/2,Ye=Vd(se),xt=0,at=ce-ye,zt=[],ut=0;ut<se.length-1;ut++){for(var Wt=se[ut],Pt=se[ut+1],gt=Wt.dist(Pt),nr=Pt.angleTo(Wt);at+ye<xt+gt;){var Kt=((at+=ye)-xt)/gt,Sr=Nr(Wt.x,Pt.x,Kt),Tt=Nr(Wt.y,Pt.y,Kt);if(Sr>=0&&Sr<Ne&&Tt>=0&&Tt<Ne&&at-Ke>=0&&at+Ke<=Ye){var gr=new ch(Sr,Tt,nr,ut);gr._round(),pe&&!hh(se,gr,Te,pe,Ee)||zt.push(gr)}}xt+=gt}return Be||zt.length||Pe||(zt=W(se,xt/2,ye,pe,Ee,Te,Pe,!0,Ne)),zt}(e,K?t/2*I%t:(O/2+2*d)*x*I%t,t,L,i,q,K,!1,C)}function _c(e,t,i,l,p){for(var d=[],x=0;x<e.length;x++)for(var I=e[x],C=void 0,L=0;L<I.length-1;L++){var O=I[L],q=I[L+1];O.x<t&&q.x<t||(O.x<t?O=new V(t,O.y+(t-O.x)/(q.x-O.x)*(q.y-O.y))._round():q.x<t&&(q=new V(t,O.y+(t-O.x)/(q.x-O.x)*(q.y-O.y))._round()),O.y<i&&q.y<i||(O.y<i?O=new V(O.x+(i-O.y)/(q.y-O.y)*(q.x-O.x),i)._round():q.y<i&&(q=new V(O.x+(i-O.y)/(q.y-O.y)*(q.x-O.x),i)._round()),O.x>=l&&q.x>=l||(O.x>=l?O=new V(l,O.y+(l-O.x)/(q.x-O.x)*(q.y-O.y))._round():q.x>=l&&(q=new V(l,O.y+(l-O.x)/(q.x-O.x)*(q.y-O.y))._round()),O.y>=p&&q.y>=p||(O.y>=p?O=new V(O.x+(p-O.y)/(q.y-O.y)*(q.x-O.x),p)._round():q.y>=p&&(q=new V(O.x+(p-O.y)/(q.y-O.y)*(q.x-O.x),p)._round()),C&&O.equals(C[C.length-1])||d.push(C=[O]),C.push(q)))))}return d}function Fd(e,t,i,l){var p=[],d=e.image,x=d.pixelRatio,I=d.paddedRect.w-2,C=d.paddedRect.h-2,L=e.right-e.left,O=e.bottom-e.top,q=d.stretchX||[[0,I]],K=d.stretchY||[[0,C]],W=function(Sr,Tt){return Sr+Tt[1]-Tt[0]},se=q.reduce(W,0),ce=K.reduce(W,0),ye=I-se,pe=C-ce,Ee=0,Te=se,Pe=0,Be=ce,Ne=0,Ke=ye,Ye=0,xt=pe;if(d.content&&l){var at=d.content;Ee=fh(q,0,at[0]),Pe=fh(K,0,at[1]),Te=fh(q,at[0],at[2]),Be=fh(K,at[1],at[3]),Ne=at[0]-Ee,Ye=at[1]-Pe,Ke=at[2]-at[0]-Te,xt=at[3]-at[1]-Be}var zt=function(Sr,Tt,gr,Li){var ii=dh(Sr.stretch-Ee,Te,L,e.left),jr=Af(Sr.fixed-Ne,Ke,Sr.stretch,se),Hr=dh(Tt.stretch-Pe,Be,O,e.top),mn=Af(Tt.fixed-Ye,xt,Tt.stretch,ce),yn=dh(gr.stretch-Ee,Te,L,e.left),va=Af(gr.fixed-Ne,Ke,gr.stretch,se),qa=dh(Li.stretch-Pe,Be,O,e.top),kn=Af(Li.fixed-Ye,xt,Li.stretch,ce),Wn=new V(ii,Hr),In=new V(yn,Hr),Tn=new V(yn,qa),fr=new V(ii,qa),ni=new V(jr/x,mn/x),Xr=new V(va/x,kn/x),mr=t*Math.PI/180;if(mr){var Qa=Math.sin(mr),vn=Math.cos(mr),Dr=[vn,-Qa,Qa,vn];Wn._matMult(Dr),In._matMult(Dr),fr._matMult(Dr),Tn._matMult(Dr)}var Ai=Sr.stretch+Sr.fixed,Ta=Tt.stretch+Tt.fixed;return{tl:Wn,tr:In,bl:fr,br:Tn,tex:{x:d.paddedRect.x+1+Ai,y:d.paddedRect.y+1+Ta,w:gr.stretch+gr.fixed-Ai,h:Li.stretch+Li.fixed-Ta},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ni,pixelOffsetBR:Xr,minFontScaleX:Ke/x/L,minFontScaleY:xt/x/O,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var ut=Nd(q,ye,se),Wt=Nd(K,pe,ce),Pt=0;Pt<ut.length-1;Pt++)for(var gt=ut[Pt],nr=ut[Pt+1],Kt=0;Kt<Wt.length-1;Kt++)p.push(zt(gt,Wt[Kt],nr,Wt[Kt+1]));else p.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:C+1}));return p}function fh(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var x=d[p];l+=Math.max(t,Math.min(i,x[1]))-Math.max(t,Math.min(i,x[0]))}return l}function Nd(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var x=d[p],I=x[0],C=x[1],L=l[l.length-1];l.push({fixed:I-L.stretch,stretch:L.stretch}),l.push({fixed:I-L.stretch,stretch:L.stretch+(C-I)})}return l.push({fixed:t+1,stretch:i}),l}function dh(e,t,i,l){return e/t*i+l}function Af(e,t,i,l){return e-t*i/l}var Up=function(e,t,i,l,p,d,x,I,C,L){if(this.boxStartIndex=e.length,C){var O=d.top,q=d.bottom,K=d.collisionPadding;K&&(O-=K[1],q+=K[3]);var W=q-O;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{var se=d.top*x-I,ce=d.bottom*x+I,ye=d.left*x-I,pe=d.right*x+I,Ee=d.collisionPadding;if(Ee&&(ye-=Ee[0]*x,se-=Ee[1]*x,pe+=Ee[2]*x,ce+=Ee[3]*x),L){var Te=new V(ye,se),Pe=new V(pe,se),Be=new V(ye,ce),Ne=new V(pe,ce),Ke=L*Math.PI/180;Te._rotate(Ke),Pe._rotate(Ke),Be._rotate(Ke),Ne._rotate(Ke),ye=Math.min(Te.x,Pe.x,Be.x,Ne.x),pe=Math.max(Te.x,Pe.x,Be.x,Ne.x),se=Math.min(Te.y,Pe.y,Be.y,Ne.y),ce=Math.max(Te.y,Pe.y,Be.y,Ne.y)}e.emplaceBack(t.x,t.y,ye,se,pe,ce,i,l,p)}this.boxEndIndex=e.length},ml=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=ap),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function ap(e,t){return e<t?-1:e>t?1:0}function cu(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,x=-1/0,I=e[0],C=0;C<I.length;C++){var L=I[C];(!C||L.x<l)&&(l=L.x),(!C||L.y<p)&&(p=L.y),(!C||L.x>d)&&(d=L.x),(!C||L.y>x)&&(x=L.y)}var O=Math.min(d-l,x-p),q=O/2,K=new ml([],qp);if(O===0)return new V(l,p);for(var W=l;W<d;W+=O)for(var se=p;se<x;se+=O)K.push(new mh(W+q,se+q,q,e));for(var ce=function(Ee){for(var Te=0,Pe=0,Be=0,Ne=Ee[0],Ke=0,Ye=Ne.length,xt=Ye-1;Ke<Ye;xt=Ke++){var at=Ne[Ke],zt=Ne[xt],ut=at.x*zt.y-zt.x*at.y;Pe+=(at.x+zt.x)*ut,Be+=(at.y+zt.y)*ut,Te+=3*ut}return new mh(Pe/Te,Be/Te,0,Ee)}(e),ye=K.length;K.length;){var pe=K.pop();(pe.d>ce.d||!ce.d)&&(ce=pe,i&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,ye)),pe.max-ce.d<=t||(K.push(new mh(pe.p.x-(q=pe.h/2),pe.p.y-q,q,e)),K.push(new mh(pe.p.x+q,pe.p.y-q,q,e)),K.push(new mh(pe.p.x-q,pe.p.y+q,q,e)),K.push(new mh(pe.p.x+q,pe.p.y+q,q,e)),ye+=4)}return i&&(console.log("num probes: "+ye),console.log("best distance: "+ce.d)),ce.p}function qp(e,t){return t.max-e.max}function mh(e,t,i,l){this.p=new V(e,t),this.h=i,this.d=function(p,d){for(var x=!1,I=1/0,C=0;C<d.length;C++)for(var L=d[C],O=0,q=L.length,K=q-1;O<q;K=O++){var W=L[O],se=L[K];W.y>p.y!=se.y>p.y&&p.x<(se.x-W.x)*(p.y-W.y)/(se.y-W.y)+W.x&&(x=!x),I=Math.min(I,Au(p,W,se))}return(x?1:-1)*Math.sqrt(I)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}ml.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},ml.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},ml.prototype.peek=function(){return this.data[0]},ml.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},ml.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),x=t[d],I=d+1;if(I<this.length&&i(t[I],x)<0&&(d=I,x=t[I]),i(x,p)>=0)break;t[e]=x,e=d}t[e]=p};var zf=Number.POSITIVE_INFINITY;function bc(e,t){return t[1]!==zf?function(i,l,p){var d=0,x=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,x]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var x=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=x-7;break;case"bottom-right":case"bottom-left":d=7-x;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function yl(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ud(e,t,i,l,p,d,x,I,C,L,O,q,K,W,se){var ce=function(Pe,Be,Ne,Ke,Ye,xt,at,zt){for(var ut=Ke.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,Wt=[],Pt=0,gt=Be.positionedLines;Pt<gt.length;Pt+=1)for(var nr=gt[Pt],Kt=0,Sr=nr.positionedGlyphs;Kt<Sr.length;Kt+=1){var Tt=Sr[Kt];if(Tt.rect){var gr=Tt.rect||{},Li=4,ii=!0,jr=1,Hr=0,mn=(Ye||zt)&&Tt.vertical,yn=Tt.metrics.advance*Tt.scale/2;if(zt&&Be.verticalizable&&(Hr=nr.lineOffset/2-(Tt.imageName?-(24-Tt.metrics.width*Tt.scale)/2:24*(Tt.scale-1))),Tt.imageName){var va=at[Tt.imageName];ii=va.sdf,Li=1/(jr=va.pixelRatio)}var qa=Ye?[Tt.x+yn,Tt.y]:[0,0],kn=Ye?[0,0]:[Tt.x+yn+Ne[0],Tt.y+Ne[1]-Hr],Wn=[0,0];mn&&(Wn=kn,kn=[0,0]);var In=(Tt.metrics.left-Li)*Tt.scale-yn+kn[0],Tn=(-Tt.metrics.top-Li)*Tt.scale+kn[1],fr=In+gr.w*Tt.scale/jr,ni=Tn+gr.h*Tt.scale/jr,Xr=new V(In,Tn),mr=new V(fr,Tn),Qa=new V(In,ni),vn=new V(fr,ni);if(mn){var Dr=new V(-yn,yn- -17),Ai=-Math.PI/2,Ta=12-yn,xr=new V(22-Ta,-(Tt.imageName?Ta:0)),Ou=new(Function.prototype.bind.apply(V,[null].concat(Wn)));Xr._rotateAround(Ai,Dr)._add(xr)._add(Ou),mr._rotateAround(Ai,Dr)._add(xr)._add(Ou),Qa._rotateAround(Ai,Dr)._add(xr)._add(Ou),vn._rotateAround(Ai,Dr)._add(xr)._add(Ou)}if(ut){var Yo=Math.sin(ut),Jo=Math.cos(ut),Ri=[Jo,-Yo,Yo,Jo];Xr._matMult(Ri),mr._matMult(Ri),Qa._matMult(Ri),vn._matMult(Ri)}var jl=new V(0,0),vo=new V(0,0);Wt.push({tl:Xr,tr:mr,bl:Qa,br:vn,tex:gr,writingMode:Be.writingMode,glyphOffset:qa,sectionIndex:Tt.sectionIndex,isSDF:ii,pixelOffsetTL:jl,pixelOffsetBR:vo,minFontScaleX:0,minFontScaleY:0})}}return Wt}(0,i,I,p,d,x,l,e.allowVerticalPlacement),ye=e.textSizeData,pe=null;ye.kind==="source"?(pe=[128*p.layout.get("text-size").evaluate(x,{})])[0]>32640&&Rt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ye.kind==="composite"&&((pe=[128*W.compositeTextSizes[0].evaluate(x,{},se),128*W.compositeTextSizes[1].evaluate(x,{},se)])[0]>32640||pe[1]>32640)&&Rt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,ce,pe,I,d,x,L,t,C.lineStartIndex,C.lineLength,K,se);for(var Ee=0,Te=O;Ee<Te.length;Ee+=1)q[Te[Ee]]=e.text.placedSymbolArray.length-1;return 4*ce.length}function jp(e){for(var t in e)return e[t];return null}function qd(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],x=d.length-1;x>=0;x--)if(l.dist(d[x])<i)return!0}else p[t]=[];return p[t].push(l),!1}var Iy=Vl.VectorTileFeature.types,Zp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gp(e,t,i,l,p,d,x,I,C,L,O,q,K){var W=I?Math.min(32640,Math.round(I[0])):0,se=I?Math.min(32640,Math.round(I[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,x,(W<<1)+(C?1:0),se,16*L,16*O,256*q,256*K)}function Pf(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function vl(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Ka(i[t].text))return!0;return!1}var ds=function(e){this.layoutVertexArray=new Dp,this.indexArray=new Ts,this.programConfigurations=e,this.segments=new J,this.dynamicLayoutVertexArray=new Tu,this.opacityVertexArray=new oc,this.placedSymbolArray=new c};ds.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},ds.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vy.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Wh.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Zp,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},ds.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ft("SymbolBuffers",ds);var Wo=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new J,this.collisionVertexArray=new nu};Wo.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Yh.members,!0)},Wo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ft("CollisionBuffers",Wo);var Tr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=So([]),this.placementViewportMatrix=So([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gc(this.zoom,t["text-size"]),this.iconSizeData=gc(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Xo[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Tr.prototype.createArrays=function(){this.text=new ds(new Lt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new ds(new Lt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new k,this.lineVertexArray=new z,this.symbolInstances=new E},Tr.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var x=Qh[e.charAt(d)];x&&(t[x.charCodeAt(0)]=!0)}},Tr.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),x=p.get("text-field"),I=p.get("icon-image"),C=(x.value.kind!=="constant"||x.value.value instanceof Ei&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),L=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,O=p.get("symbol-sort-key");if(this.features=[],C||L){for(var q=t.iconDependencies,K=t.glyphDependencies,W=t.availableImages,se=new or(this.zoom),ce=0,ye=e;ce<ye.length;ce+=1){var pe=ye[ce],Ee=pe.feature,Te=pe.id,Pe=pe.index,Be=pe.sourceLayerIndex,Ne=l._featureFilter.needGeometry,Ke=En(Ee,Ne);if(l._featureFilter.filter(se,Ke,i)){Ne||(Ke.geometry=pi(Ee));var Ye=void 0;if(C){var xt=l.getValueAndResolveTokens("text-field",Ke,i,W),at=Ei.factory(xt);vl(at)&&(this.hasRTLText=!0),(!this.hasRTLText||Ql()==="unavailable"||this.hasRTLText&&wo.isParsed())&&(Ye=If(at,l,Ke))}var zt=void 0;if(L){var ut=l.getValueAndResolveTokens("icon-image",Ke,i,W);zt=ut instanceof Si?ut:Si.fromString(ut)}if(Ye||zt){var Wt=this.sortFeaturesByKey?O.evaluate(Ke,{},i):void 0;if(this.features.push({id:Te,text:Ye,icon:zt,index:Pe,sourceLayerIndex:Be,geometry:Ke.geometry,properties:Ee.properties,type:Iy[Ee.type],sortKey:Wt}),zt&&(q[zt.name]=!0),Ye){var Pt=d.evaluate(Ke,{},i).join(","),gt=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Xo.vertical)>=0;for(var nr=0,Kt=Ye.sections;nr<Kt.length;nr+=1){var Sr=Kt[nr];if(Sr.image)q[Sr.image.name]=!0;else{var Tt=ll(Ye.toString()),gr=Sr.fontStack||Pt,Li=K[gr]=K[gr]||{};this.calculateGlyphDependencies(Sr.text,Li,gt,this.allowVerticalPlacement,Tt)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(ii){var jr={},Hr={},mn=[],yn=0;function va(Dr){mn.push(ii[Dr]),yn++}function qa(Dr,Ai,Ta){var xr=Hr[Dr];return delete Hr[Dr],Hr[Ai]=xr,mn[xr].geometry[0].pop(),mn[xr].geometry[0]=mn[xr].geometry[0].concat(Ta[0]),xr}function kn(Dr,Ai,Ta){var xr=jr[Ai];return delete jr[Ai],jr[Dr]=xr,mn[xr].geometry[0].shift(),mn[xr].geometry[0]=Ta[0].concat(mn[xr].geometry[0]),xr}function Wn(Dr,Ai,Ta){var xr=Ta?Ai[0][Ai[0].length-1]:Ai[0][0];return Dr+":"+xr.x+":"+xr.y}for(var In=0;In<ii.length;In++){var Tn=ii[In],fr=Tn.geometry,ni=Tn.text?Tn.text.toString():null;if(ni){var Xr=Wn(ni,fr),mr=Wn(ni,fr,!0);if(Xr in Hr&&mr in jr&&Hr[Xr]!==jr[mr]){var Qa=kn(Xr,mr,fr),vn=qa(Xr,mr,mn[Qa].geometry);delete jr[Xr],delete Hr[mr],Hr[Wn(ni,mn[vn].geometry,!0)]=vn,mn[Qa].geometry=null}else Xr in Hr?qa(Xr,mr,fr):mr in jr?kn(Xr,mr,fr):(va(In),jr[Xr]=yn-1,Hr[mr]=yn-1)}else va(In)}return mn.filter(function(Dr){return Dr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ii,jr){return ii.sortKey-jr.sortKey})}},Tr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Tr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Tr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Tr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Tr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Tr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Tr.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},x=e.segment+1;x<t.length;x++)d[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:l},x<t.length-1&&(l+=t[x+1].dist(t[x]));for(var I=e.segment||0;I>=0;I--)d[I]={x:t[I].x,y:t[I].y,tileUnitDistanceFromAnchor:p},I>0&&(p+=t[I-1].dist(t[I]));for(var C=0;C<t.length;C++){var L=d[C];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Tr.prototype.addSymbols=function(e,t,i,l,p,d,x,I,C,L,O,q){for(var K=e.indexArray,W=e.layoutVertexArray,se=e.segments.prepareSegment(4*t.length,W,K,this.canOverlap?d.sortKey:void 0),ce=this.glyphOffsetArray.length,ye=se.vertexLength,pe=this.allowVerticalPlacement&&x===Xo.vertical?Math.PI/2:0,Ee=d.text&&d.text.sections,Te=0;Te<t.length;Te++){var Pe=t[Te],Be=Pe.tl,Ne=Pe.tr,Ke=Pe.bl,Ye=Pe.br,xt=Pe.tex,at=Pe.pixelOffsetTL,zt=Pe.pixelOffsetBR,ut=Pe.minFontScaleX,Wt=Pe.minFontScaleY,Pt=Pe.glyphOffset,gt=Pe.isSDF,nr=Pe.sectionIndex,Kt=se.vertexLength,Sr=Pt[1];Gp(W,I.x,I.y,Be.x,Sr+Be.y,xt.x,xt.y,i,gt,at.x,at.y,ut,Wt),Gp(W,I.x,I.y,Ne.x,Sr+Ne.y,xt.x+xt.w,xt.y,i,gt,zt.x,at.y,ut,Wt),Gp(W,I.x,I.y,Ke.x,Sr+Ke.y,xt.x,xt.y+xt.h,i,gt,at.x,zt.y,ut,Wt),Gp(W,I.x,I.y,Ye.x,Sr+Ye.y,xt.x+xt.w,xt.y+xt.h,i,gt,zt.x,zt.y,ut,Wt),Pf(e.dynamicLayoutVertexArray,I,pe),K.emplaceBack(Kt,Kt+1,Kt+2),K.emplaceBack(Kt+1,Kt+2,Kt+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),Te!==t.length-1&&nr===t[Te+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,d,d.index,{},q,Ee&&Ee[nr])}e.placedSymbolArray.emplaceBack(I.x,I.y,ce,this.glyphOffsetArray.length-ce,ye,C,L,I.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],x,0,!1,0,O)},Tr.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},Tr.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,x){var I=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),C=I.vertexLength,L=p.layoutVertexArray,O=p.collisionVertexArray,q=x.anchorX,K=x.anchorY;this._addCollisionDebugVertex(L,O,d,q,K,new V(e,t)),this._addCollisionDebugVertex(L,O,d,q,K,new V(i,t)),this._addCollisionDebugVertex(L,O,d,q,K,new V(i,l)),this._addCollisionDebugVertex(L,O,d,q,K,new V(e,l)),I.vertexLength+=4;var W=p.indexArray;W.emplaceBack(C,C+1),W.emplaceBack(C+1,C+2),W.emplaceBack(C+2,C+3),W.emplaceBack(C+3,C),I.primitiveLength+=4},Tr.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Tr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wo(Is,Md.members,po),this.iconCollisionBox=new Wo(Is,Md.members,po);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Tr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,x,I,C){for(var L={},O=t;O<i;O++){var q=e.get(O);L.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},L.textFeatureIndex=q.featureIndex;break}for(var K=l;K<p;K++){var W=e.get(K);L.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.verticalTextFeatureIndex=W.featureIndex;break}for(var se=d;se<x;se++){var ce=e.get(se);L.iconBox={x1:ce.x1,y1:ce.y1,x2:ce.x2,y2:ce.y2,anchorPointX:ce.anchorPointX,anchorPointY:ce.anchorPointY},L.iconFeatureIndex=ce.featureIndex;break}for(var ye=I;ye<C;ye++){var pe=e.get(ye);L.verticalIconBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},L.verticalIconFeatureIndex=pe.featureIndex;break}return L},Tr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Tr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Tr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Tr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Tr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Tr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Tr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},Tr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],x=0;x<this.symbolInstances.length;++x){d.push(x);var I=this.symbolInstances.get(x);l.push(0|Math.round(t*I.anchorX+i*I.anchorY)),p.push(I.featureIndex)}return d.sort(function(C,L){return l[C]-l[L]||p[L]-p[C]}),d},Tr.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Tr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,x,I){d>=0&&I.indexOf(d)===x&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ft("SymbolBucket",Tr,{omit:["layers","collisionBoxArray","features","compareText"]}),Tr.MAX_GLYPHS=65535,Tr.addDynamicAttributes=Pf;var Ty=new Mn({"symbol-placement":new Et(X.layout_symbol["symbol-placement"]),"symbol-spacing":new Et(X.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Et(X.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(X.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Et(X.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Et(X.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Et(X.layout_symbol["icon-ignore-placement"]),"icon-optional":new Et(X.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Et(X.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(X.layout_symbol["icon-size"]),"icon-text-fit":new Et(X.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Et(X.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(X.layout_symbol["icon-image"]),"icon-rotate":new yt(X.layout_symbol["icon-rotate"]),"icon-padding":new Et(X.layout_symbol["icon-padding"]),"icon-keep-upright":new Et(X.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(X.layout_symbol["icon-offset"]),"icon-anchor":new yt(X.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Et(X.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Et(X.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Et(X.layout_symbol["text-rotation-alignment"]),"text-field":new yt(X.layout_symbol["text-field"]),"text-font":new yt(X.layout_symbol["text-font"]),"text-size":new yt(X.layout_symbol["text-size"]),"text-max-width":new yt(X.layout_symbol["text-max-width"]),"text-line-height":new Et(X.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(X.layout_symbol["text-letter-spacing"]),"text-justify":new yt(X.layout_symbol["text-justify"]),"text-radial-offset":new yt(X.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Et(X.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(X.layout_symbol["text-anchor"]),"text-max-angle":new Et(X.layout_symbol["text-max-angle"]),"text-writing-mode":new Et(X.layout_symbol["text-writing-mode"]),"text-rotate":new yt(X.layout_symbol["text-rotate"]),"text-padding":new Et(X.layout_symbol["text-padding"]),"text-keep-upright":new Et(X.layout_symbol["text-keep-upright"]),"text-transform":new yt(X.layout_symbol["text-transform"]),"text-offset":new yt(X.layout_symbol["text-offset"]),"text-allow-overlap":new Et(X.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Et(X.layout_symbol["text-ignore-placement"]),"text-optional":new Et(X.layout_symbol["text-optional"])}),xc={paint:new Mn({"icon-opacity":new yt(X.paint_symbol["icon-opacity"]),"icon-color":new yt(X.paint_symbol["icon-color"]),"icon-halo-color":new yt(X.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(X.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(X.paint_symbol["icon-halo-blur"]),"icon-translate":new Et(X.paint_symbol["icon-translate"]),"icon-translate-anchor":new Et(X.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(X.paint_symbol["text-opacity"]),"text-color":new yt(X.paint_symbol["text-color"],{runtimeType:et,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(X.paint_symbol["text-halo-color"]),"text-halo-width":new yt(X.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(X.paint_symbol["text-halo-blur"]),"text-translate":new Et(X.paint_symbol["text-translate"]),"text-translate-anchor":new Et(X.paint_symbol["text-translate-anchor"])}),layout:Ty},Kp=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:st,this.defaultValue=e};Kp.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Kp.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Kp.prototype.outputDefined=function(){return!1},Kp.prototype.serialize=function(){return null},ft("FormatSectionOverride",Kp,{omit:["defaultValue"]});var Ay=function(e){function t(i){e.call(this,i,xc)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],x=0,I=p;x<I.length;x+=1){var C=I[x];d.indexOf(C)<0&&d.push(C)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var x=this.layout.get(i).evaluate(l,{},p,d),I=this._unevaluatedLayout._values[i];return I.isDataDriven()||pa(I.value)||!x?x:function(C,L){return L.replace(/{([^{}]+)}/g,function(O,q){return q in C?String(C[q]):""})}(l.properties,x)},t.prototype.createBucket=function(i){return new Tr(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=xc.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,x=this.paint.get(p),I=new Kp(x),C=new tl(I,x.property.specification);d=x.value.kind==="constant"||x.value.kind==="source"?new zl("source",C):new wa("composite",C,x.value.zoomStops,x.value._interpolationType),this.paint._values[p]=new Ji(x.property,d,x.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=xc.paint.properties[l],x=!1,I=function(O){for(var q=0,K=O;q<K.length;q+=1)if(d.overrides&&d.overrides.hasOverride(K[q]))return void(x=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Ei)I(p.value.value.sections);else if(p.value.kind==="source"){var C=function(O){x||(O instanceof sn&&br(O.value)===pr?I(O.value.sections):O instanceof ui?I(O.sections):O.eachChild(C))},L=p.value;L._styleExpression&&C(L._styleExpression.expression)}return x},t}(Ss),op={paint:new Mn({"background-color":new Et(X.paint_background["background-color"]),"background-pattern":new Fa(X.paint_background["background-pattern"]),"background-opacity":new Et(X.paint_background["background-opacity"])})},sp=function(e){function t(i){e.call(this,i,op)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ss),zy={paint:new Mn({"raster-opacity":new Et(X.paint_raster["raster-opacity"]),"raster-hue-rotate":new Et(X.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Et(X.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Et(X.paint_raster["raster-brightness-max"]),"raster-saturation":new Et(X.paint_raster["raster-saturation"]),"raster-contrast":new Et(X.paint_raster["raster-contrast"]),"raster-resampling":new Et(X.paint_raster["raster-resampling"]),"raster-fade-duration":new Et(X.paint_raster["raster-fade-duration"])})},lp=function(e){function t(i){e.call(this,i,zy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ss),Cf=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(Ss),Py={circle:cc,heatmap:pc,hillshade:Nh,fill:Kh,"fill-extrusion":fy,line:Xh,symbol:Ay,background:sp,raster:lp},jd=U.HTMLImageElement,wc=U.HTMLCanvasElement,Zd=U.HTMLVideoElement,Hp=U.ImageData,Xp=U.ImageBitmap,hu=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};hu.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),x=this.context,I=x.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof jd||e instanceof wc||e instanceof Zd||e instanceof Hp||Xp&&e instanceof Xp?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,e):I.texImage2D(I.TEXTURE_2D,0,this.format,l,p,0,this.format,I.UNSIGNED_BYTE,e.data);else{var C=i||{x:0,y:0},L=C.x,O=C.y;e instanceof jd||e instanceof wc||e instanceof Zd||e instanceof Hp||Xp&&e instanceof Xp?I.texSubImage2D(I.TEXTURE_2D,0,L,O,I.RGBA,I.UNSIGNED_BYTE,e):I.texSubImage2D(I.TEXTURE_2D,0,L,O,l,p,I.RGBA,I.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)},hu.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},hu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},hu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Gd=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Gd.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Gd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var yh=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ar(["receive","process"],this),this.invoker=new Gd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ar()?e:U};function Ec(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}yh.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[x]=i);var I=wr(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:uo(t,I)},I),{cancel:function(){i&&delete d.callbacks[x],d.target.postMessage({id:x,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},yh.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else ar()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},yh.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},yh.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(Xn(t.error)):l(null,Xn(t.data)))}else{var p=!1,d=wr(this.globalScope)?void 0:[],x=t.hasCallback?function(O,q){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:O?uo(O):null,data:uo(q,d)},d)}:function(O){p=!0},I=null,C=Xn(t.data);if(this.parent[t.type])I=this.parent[t.type](t.sourceMapId,C,x);else if(this.parent.getWorkerSource){var L=t.type.split(".");I=this.parent.getWorkerSource(t.sourceMapId,L[0],C.source)[L[1]](C,x)}else x(new Error("Could not find function "+t.type));!p&&I&&I.cancel&&(this.cancelCallbacks[e]=I.cancel)}},yh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var en=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};en.prototype.setNorthEast=function(e){return this._ne=e instanceof Ur?new Ur(e.lng,e.lat):Ur.convert(e),this},en.prototype.setSouthWest=function(e){return this._sw=e instanceof Ur?new Ur(e.lng,e.lat):Ur.convert(e),this},en.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof Ur)t=e,i=e;else{if(!(e instanceof en))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(en.convert(e)):this.extend(Ur.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new Ur(t.lng,t.lat),this._ne=new Ur(i.lng,i.lat)),this},en.prototype.getCenter=function(){return new Ur((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},en.prototype.getSouthWest=function(){return this._sw},en.prototype.getNorthEast=function(){return this._ne},en.prototype.getNorthWest=function(){return new Ur(this.getWest(),this.getNorth())},en.prototype.getSouthEast=function(){return new Ur(this.getEast(),this.getSouth())},en.prototype.getWest=function(){return this._sw.lng},en.prototype.getSouth=function(){return this._sw.lat},en.prototype.getEast=function(){return this._ne.lng},en.prototype.getNorth=function(){return this._ne.lat},en.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},en.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},en.prototype.isEmpty=function(){return!(this._sw&&this._ne)},en.prototype.contains=function(e){var t=Ur.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},en.convert=function(e){return!e||e instanceof en?e:new en(e)};var Ur=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ur.prototype.wrap=function(){return new Ur(Ce(this.lng,-180,180),this.lat)},Ur.prototype.toArray=function(){return[this.lng,this.lat]},Ur.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ur.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},Ur.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new en(new Ur(this.lng-i,this.lat-t),new Ur(this.lng+i,this.lat+t))},Ur.convert=function(e){if(e instanceof Ur)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Ur(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Ur(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var up=2*Math.PI*63710088e-1;function Kd(e){return up*Math.cos(e*Math.PI/180)}function Hd(e){return(180+e)/360}function Sc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ql(e,t){return e/Kd(t)}function Df(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var pu=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};pu.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Ur.convert(e);return new pu(Hd(i.lng),Sc(i.lat),ql(t,i.lat))},pu.prototype.toLngLat=function(){return new Ur(360*this.x-180,Df(this.y))},pu.prototype.toAltitude=function(){return this.z*Kd(Df(this.y))},pu.prototype.meterInMercatorCoordinateUnits=function(){return 1/up*(e=Df(this.y),1/Math.cos(e*Math.PI/180));var e};var Bu=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=cp(0,e,e,t,i)};Bu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Bu.prototype.url=function(e,t){var i,l,p,d,x,I=(l=this.y,p=this.z,d=Ec(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),x=Ec(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+x[0]+","+x[1]),C=function(L,O,q){for(var K,W="",se=L;se>0;se--)W+=(O&(K=1<<se-1)?1:0)+(q&K?2:0);return W}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",I)},Bu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new V(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Bu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Xd=function(e,t){this.wrap=e,this.canonical=t,this.key=cp(e,t.z,t.z,t.x,t.y)},dn=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new Bu(i,+l,+p),this.key=cp(t,e,i,l,p)};function cp(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}dn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},dn.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new dn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new dn(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},dn.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?cp(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):cp(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},dn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},dn.prototype.children=function(e){if(this.overscaledZ>=e)return[new dn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new dn(t,this.wrap,t,i,l),new dn(t,this.wrap,t,i+1,l),new dn(t,this.wrap,t,i,l+1),new dn(t,this.wrap,t,i+1,l+1)]},dn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},dn.prototype.wrapped=function(){return new dn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},dn.prototype.unwrapTo=function(e){return new dn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},dn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},dn.prototype.toUnwrapped=function(){return new Xd(this.wrap,this.canonical)},dn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},dn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new pu(e.x-this.wrap,e.y))},ft("CanonicalTileID",Bu),ft("OverscaledTileID",dn,{omit:["posMatrix"]});var fu=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Rt('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};fu.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},fu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},fu.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},fu.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},fu.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},fu.prototype.getPixels=function(){return new mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},fu.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,x=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=x-1;break;case 1:x=d+1}for(var I=-t*this.dim,C=-i*this.dim,L=d;L<x;L++)for(var O=l;O<p;O++)this.data[this._idx(O,L)]=e.data[this._idx(O+I,L+C)]},ft("DEMData",fu);var Ua=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Ua.prototype.encode=function(e){return this._stringToNumber[e]},Ua.prototype.decode=function(e){return this._numberToString[e]};var gl=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Vs={geometry:{configurable:!0}};Vs.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Vs.geometry.set=function(e){this._geometry=e},gl.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(gl.prototype,Vs);var Fs=function(){this.state={},this.stateChanges={},this.deletedStates={}};Fs.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},Ue(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var x in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][x]===null&&delete this.deletedStates[e][l][x]},Fs.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},Fs.prototype.getState=function(e,t){var i=String(t),l=Ue({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},Fs.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Fs.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),Ue(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var I={};if(this.deletedStates[x]===null)for(var C in this.state[x])I[C]={},this.state[x][C]={};else for(var L in this.deletedStates[x]){if(this.deletedStates[x][L]===null)this.state[x][L]={};else for(var O=0,q=Object.keys(this.deletedStates[x][L]);O<q.length;O+=1)delete this.state[x][L][q[O]];I[L]=this.state[x][L]}i[x]=i[x]||{},Ue(i[x],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var K in e)e[K].setFeatureState(i,t)};var du=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Oo(8192,16,0),this.grid3D=new Oo(8192,16,0),this.featureIndexArray=new Z,this.promoteId=t};function vh(e,t,i,l,p){return tr(e,function(d,x){var I=t instanceof jo?t.get(x):null;return I&&I.evaluate?I.evaluate(i,l,p):I})}function ov(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,x=e;d<x.length;d+=1){var I=x[d];t=Math.min(t,I.x),i=Math.min(i,I.y),l=Math.max(l,I.x),p=Math.max(p,I.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Cy(e,t){return t-e}du.prototype.insert=function(e,t,i,l,p,d){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var I=d?this.grid3D:this.grid,C=0;C<t.length;C++){for(var L=t[C],O=[1/0,1/0,-1/0,-1/0],q=0;q<L.length;q++){var K=L[q];O[0]=Math.min(O[0],K.x),O[1]=Math.min(O[1],K.y),O[2]=Math.max(O[2],K.x),O[3]=Math.max(O[3],K.y)}O[0]<8192&&O[1]<8192&&O[2]>=0&&O[3]>=0&&I.insert(x,O[0],O[1],O[2],O[3])}},du.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Vl.VectorTile(new Op(this.rawTileData)).layers,this.sourceLayerCoder=new Ua(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},du.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},x=8192/e.tileSize/e.scale,I=tc(d.filter),C=e.queryGeometry,L=e.queryPadding*x,O=ov(C),q=this.grid.query(O.minX-L,O.minY-L,O.maxX+L,O.maxY+L),K=ov(e.cameraQueryGeometry),W=this.grid3D.query(K.minX-L,K.minY-L,K.maxX+L,K.maxY+L,function(Pe,Be,Ne,Ke){return function(Ye,xt,at,zt,ut){for(var Wt=0,Pt=Ye;Wt<Pt.length;Wt+=1){var gt=Pt[Wt];if(xt<=gt.x&&at<=gt.y&&zt>=gt.x&&ut>=gt.y)return!0}var nr=[new V(xt,at),new V(xt,ut),new V(zt,ut),new V(zt,at)];if(Ye.length>2){for(var Kt=0,Sr=nr;Kt<Sr.length;Kt+=1)if(Ko(Ye,Sr[Kt]))return!0}for(var Tt=0;Tt<Ye.length-1;Tt++)if(lc(Ye[Tt],Ye[Tt+1],nr))return!0;return!1}(e.cameraQueryGeometry,Pe-L,Be-L,Ne+L,Ke+L)}),se=0,ce=W;se<ce.length;se+=1)q.push(ce[se]);q.sort(Cy);for(var ye,pe={},Ee=function(Pe){var Be=q[Pe];if(Be!==ye){ye=Be;var Ne=p.featureIndexArray.get(Be),Ke=null;p.loadMatchingFeature(pe,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,I,d.layers,d.availableImages,t,i,l,function(Ye,xt,at){return Ke||(Ke=pi(Ye)),xt.queryIntersectsFeature(C,Ye,at,Ke,p.z,e.transform,x,e.pixelPosMatrix)})}},Te=0;Te<q.length;Te++)Ee(Te);return pe},du.prototype.loadMatchingFeature=function(e,t,i,l,p,d,x,I,C,L,O){var q=this.bucketLayerIDs[t];if(!d||function(Ye,xt){for(var at=0;at<Ye.length;at++)if(xt.indexOf(Ye[at])>=0)return!0;return!1}(d,q)){var K=this.sourceLayerCoder.decode(i),W=this.vtLayers[K].feature(l);if(p.needGeometry){var se=En(W,!0);if(!p.filter(new or(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!p.filter(new or(this.tileID.overscaledZ),W))return;for(var ce=this.getId(W,K),ye=0;ye<q.length;ye++){var pe=q[ye];if(!(d&&d.indexOf(pe)<0)){var Ee=I[pe];if(Ee){var Te={};ce!==void 0&&L&&(Te=L.getState(Ee.sourceLayer||"_geojsonTileLayer",ce));var Pe=Ue({},C[pe]);Pe.paint=vh(Pe.paint,Ee.paint,W,Te,x),Pe.layout=vh(Pe.layout,Ee.layout,W,Te,x);var Be=!O||O(W,Ee,Te);if(Be){var Ne=new gl(W,this.z,this.x,this.y,ce);Ne.layer=Pe;var Ke=e[pe];Ke===void 0&&(Ke=e[pe]=[]),Ke.push({featureIndex:l,feature:Ne,intersectionZ:Be})}}}}}},du.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,x,I){var C={};this.loadVTLayers();for(var L=tc(p),O=0,q=e;O<q.length;O+=1)this.loadMatchingFeature(C,i,l,q[O],L,d,x,I,t);return C},du.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},du.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},ft("FeatureIndex",du,{omit:["rawTileData","sourceLayerCoder"]});var Sn=function(e,t){this.tileID=e,this.uid=Dt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Sn.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<tn.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Sn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Sn.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(L,O){var q={};if(!O)return q;for(var K=function(){var ce=se[W],ye=ce.layerIds.map(function(Te){return O.getLayer(Te)}).filter(Boolean);if(ye.length!==0){ce.layers=ye,ce.stateDependentLayerIds&&(ce.stateDependentLayers=ce.stateDependentLayerIds.map(function(Te){return ye.filter(function(Pe){return Pe.id===Te})[0]}));for(var pe=0,Ee=ye;pe<Ee.length;pe+=1)q[Ee[pe].id]=ce}},W=0,se=L;W<se.length;W+=1)K();return q}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof Tr){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var x=this.buckets[d];if(x instanceof Tr&&x.hasRTLText){this.hasRTLText=!0,wo.isLoading()||wo.isLoaded()||Ql()!=="deferred"||Ha();break}}for(var I in this.queryPadding=0,this.buckets){var C=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(I).queryRadius(C))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Sn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Sn.prototype.getBucket=function(e){return this.buckets[e.id]},Sn.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hu(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hu(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},Sn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Sn.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,x,I,C,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:L,transform:I,params:x,queryPadding:this.queryPadding*C},e,t,i):{}},Sn.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var x=tc(t&&t.filter),I=this.tileID.canonical,C=I.z,L=I.x,O=I.y,q={z:C,x:L,y:O},K=0;K<d.length;K++){var W=d.feature(K);if(x.needGeometry){var se=En(W,!0);if(!x.filter(new or(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!x.filter(new or(this.tileID.overscaledZ),W))continue;var ce=i.getId(W,p),ye=new gl(W,C,L,O,ce);ye.tile=q,e.push(ye)}}},Sn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Sn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Sn.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=$r(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Sn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Sn.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",x=i[d],I=e[d];if(x&&I&&Object.keys(I).length!==0){p.update(I,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=t&&t.style&&t.style.getLayer(l);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(p)))}}}},Sn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Sn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<tn.now()},Sn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Sn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=tn.now()+e},Sn.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},Sn.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,x=t;d<x.length;d+=1)if(p[x[d]])return!0}}return!1};var qi=U.performance,Wd=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},qi.mark(this._marks.start)};Wd.prototype.finish=function(){qi.mark(this._marks.end);var e=qi.getEntriesByName(this._marks.measure);return e.length===0&&(qi.measure(this._marks.measure,this._marks.start,this._marks.end),e=qi.getEntriesByName(this._marks.measure),qi.clearMarks(this._marks.start),qi.clearMarks(this._marks.end),qi.clearMeasures(this._marks.measure)),e},a.Actor=yh,a.AlphaImage=Ms,a.CanonicalTileID=Bu,a.CollisionBoxArray=s,a.Color=lr,a.DEMData=fu,a.DataConstantProperty=Et,a.DictionaryCoder=Ua,a.EXTENT=8192,a.ErrorEvent=ve,a.EvaluationParameters=or,a.Event=oe,a.Evented=ge,a.FeatureIndex=du,a.FillBucket=ko,a.FillExtrusionBucket=pl,a.ImageAtlas=rp,a.ImagePosition=Os,a.LineBucket=Rn,a.LngLat=Ur,a.LngLatBounds=en,a.MercatorCoordinate=pu,a.ONE_EM=24,a.OverscaledTileID=dn,a.Point=V,a.Point$1=V,a.Properties=Mn,a.Protobuf=Op,a.RGBAImage=mo,a.RequestManager=mi,a.RequestPerformance=Wd,a.ResourceType=is,a.SegmentVector=J,a.SourceFeatureState=Fs,a.StructArrayLayout1ui2=zs,a.StructArrayLayout2f1f2i16=iu,a.StructArrayLayout2i4=tu,a.StructArrayLayout3ui6=Ts,a.StructArrayLayout4i8=ks,a.SymbolBucket=Tr,a.Texture=hu,a.Tile=Sn,a.Transitionable=da,a.Uniform1f=Je,a.Uniform1i=Ge,a.Uniform2f=Xe,a.Uniform3f=ct,a.Uniform4f=St,a.UniformColor=vt,a.UniformMatrix4f=sr,a.UnwrappedTileID=Xd,a.ValidationError=ne,a.WritingMode=Xo,a.ZoomHistory=Su,a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},a.addDynamicAttributes=Pf,a.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(x,I){t(x,function(C,L){C&&(d=C),p[I]=L,--l==0&&i(d,p)})})},a.bezier=ie,a.bindAll=Ar,a.browser=tn,a.cacheEntryPossiblyAdded=function(e){++to>Jn&&(e.getActor().send("enforceCacheSizeLimit",Vn),to=0)},a.clamp=we,a.clearTileCache=function(e){var t=U.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},a.clipLine=_c,a.clone=function(e){var t=new vr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.clone$1=bt,a.clone$2=function(e){var t=new vr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.collisionCircleLayout=Jh,a.config=rr,a.create=function(){var e=new vr(16);return vr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},a.create$1=function(){var e=new vr(9);return vr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},a.create$2=function(){var e=new vr(4);return vr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},a.createCommonjsModule=P,a.createExpression=cs,a.createLayout=ia,a.createStyleLayer=function(e){return e.type==="custom"?new Cf(e):new Py[e.type](e)},a.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],x=i[0],I=i[1],C=i[2];return e[0]=p*C-d*I,e[1]=d*x-l*C,e[2]=l*I-p*x,e},a.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.ease=De,a.emitValidationErrors=Bo,a.endsWith=yr,a.enforceCacheSizeLimit=function(e){vi(),xi&&xi.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},a.evaluateSizeForFeature=av,a.evaluateSizeForZoom=Od,a.evaluateVariableOffset=bc,a.evented=Fh,a.extend=Ue,a.featureFilter=tc,a.filterObject=wt,a.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.getAnchorAlignment=Nl,a.getAnchorJustification=yl,a.getArrayBuffer=zn,a.getImage=G,a.getJSON=function(e,t){return Qn(Ue(e,{type:"json"}),t)},a.getRTLTextPluginStatus=Ql,a.getReferrer=Pi,a.getVideo=function(e,t){var i,l,p=U.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var x=U.document.createElement("source");i=e[d],l=void 0,(l=U.document.createElement("a")).href=i,(l.protocol!==U.document.location.protocol||l.host!==U.document.location.host)&&(p.crossOrigin="Anonymous"),x.src=e[d],p.appendChild(x)}return{cancel:function(){}}},a.identity=So,a.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],x=t[4],I=t[5],C=t[6],L=t[7],O=t[8],q=t[9],K=t[10],W=t[11],se=t[12],ce=t[13],ye=t[14],pe=t[15],Ee=i*I-l*x,Te=i*C-p*x,Pe=i*L-d*x,Be=l*C-p*I,Ne=l*L-d*I,Ke=p*L-d*C,Ye=O*ce-q*se,xt=O*ye-K*se,at=O*pe-W*se,zt=q*ye-K*ce,ut=q*pe-W*ce,Wt=K*pe-W*ye,Pt=Ee*Wt-Te*ut+Pe*zt+Be*at-Ne*xt+Ke*Ye;return Pt?(e[0]=(I*Wt-C*ut+L*zt)*(Pt=1/Pt),e[1]=(p*ut-l*Wt-d*zt)*Pt,e[2]=(ce*Ke-ye*Ne+pe*Be)*Pt,e[3]=(K*Ne-q*Ke-W*Be)*Pt,e[4]=(C*at-x*Wt-L*xt)*Pt,e[5]=(i*Wt-p*at+d*xt)*Pt,e[6]=(ye*Pe-se*Ke-pe*Te)*Pt,e[7]=(O*Ke-K*Pe+W*Te)*Pt,e[8]=(x*ut-I*at+L*Ye)*Pt,e[9]=(l*at-i*ut-d*Ye)*Pt,e[10]=(se*Ne-ce*Pe+pe*Ee)*Pt,e[11]=(q*Pe-O*Ne-W*Ee)*Pt,e[12]=(I*xt-x*zt-C*Ye)*Pt,e[13]=(i*zt-l*xt+p*Ye)*Pt,e[14]=(ce*Te-se*Be-ye*Ee)*Pt,e[15]=(O*Be-q*Te+K*Ee)*Pt,e):null},a.isChar=rt,a.isMapboxURL=Zr,a.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},a.makeRequest=Qn,a.mapObject=tr,a.mercatorXfromLng=Hd,a.mercatorYfromLat=Sc,a.mercatorZfromAltitude=ql,a.mul=gf,a.multiply=aa,a.mvt=Vl,a.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},a.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},a.number=Nr,a.offscreenCanvasSupported=An,a.ortho=function(e,t,i,l,p,d,x){var I=1/(t-i),C=1/(l-p),L=1/(d-x);return e[0]=-2*I,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*C,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*L,e[11]=0,e[12]=(t+i)*I,e[13]=(p+l)*C,e[14]=(x+d)*L,e[15]=1,e},a.parseGlyphPBF=function(e){return new Op(e).readFields(nv,[])},a.pbf=Op,a.performSymbolLayout=function(e,t,i,l,p,d,x){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var I=e.layers[0].layout,C=e.layers[0]._unevaluatedLayout._values,L={};if(e.textSizeData.kind==="composite"){var O=e.textSizeData,q=O.maxZoom;L.compositeTextSizes=[C["text-size"].possiblyEvaluate(new or(O.minZoom),x),C["text-size"].possiblyEvaluate(new or(q),x)]}if(e.iconSizeData.kind==="composite"){var K=e.iconSizeData,W=K.maxZoom;L.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new or(K.minZoom),x),C["icon-size"].possiblyEvaluate(new or(W),x)]}L.layoutTextSize=C["text-size"].possiblyEvaluate(new or(e.zoom+1),x),L.layoutIconSize=C["icon-size"].possiblyEvaluate(new or(e.zoom+1),x),L.textMaxSize=C["text-size"].possiblyEvaluate(new or(18));for(var se=24*I.get("text-line-height"),ce=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",ye=I.get("text-keep-upright"),pe=I.get("text-size"),Ee=function(){var Be=Pe[Te],Ne=I.get("text-font").evaluate(Be,{},x).join(","),Ke=pe.evaluate(Be,{},x),Ye=L.layoutTextSize.evaluate(Be,{},x),xt=L.layoutIconSize.evaluate(Be,{},x),at={horizontal:{},vertical:void 0},zt=Be.text,ut=[0,0];if(zt){var Wt=zt.toString(),Pt=24*I.get("text-letter-spacing").evaluate(Be,{},x),gt=function(fr){for(var ni=0,Xr=fr;ni<Xr.length;ni+=1)if(mr=Xr[ni].charCodeAt(0),rt.Arabic(mr)||rt["Arabic Supplement"](mr)||rt["Arabic Extended-A"](mr)||rt["Arabic Presentation Forms-A"](mr)||rt["Arabic Presentation Forms-B"](mr))return!1;var mr;return!0}(Wt)?Pt:0,nr=I.get("text-anchor").evaluate(Be,{},x),Kt=I.get("text-variable-anchor");if(!Kt){var Sr=I.get("text-radial-offset").evaluate(Be,{},x);ut=Sr?bc(nr,[24*Sr,zf]):I.get("text-offset").evaluate(Be,{},x).map(function(fr){return 24*fr})}var Tt=ce?"center":I.get("text-justify").evaluate(Be,{},x),gr=I.get("symbol-placement"),Li=gr==="point"?24*I.get("text-max-width").evaluate(Be,{},x):0,ii=function(){e.allowVerticalPlacement&&ll(Wt)&&(at.vertical=Fp(zt,t,i,p,Ne,Li,se,nr,"left",gt,ut,Xo.vertical,!0,gr,Ye,Ke))};if(!ce&&Kt){for(var jr=Tt==="auto"?Kt.map(function(fr){return yl(fr)}):[Tt],Hr=!1,mn=0;mn<jr.length;mn++){var yn=jr[mn];if(!at.horizontal[yn])if(Hr)at.horizontal[yn]=at.horizontal[0];else{var va=Fp(zt,t,i,p,Ne,Li,se,"center",yn,gt,ut,Xo.horizontal,!1,gr,Ye,Ke);va&&(at.horizontal[yn]=va,Hr=va.positionedLines.length===1)}}ii()}else{Tt==="auto"&&(Tt=yl(nr));var qa=Fp(zt,t,i,p,Ne,Li,se,nr,Tt,gt,ut,Xo.horizontal,!1,gr,Ye,Ke);qa&&(at.horizontal[Tt]=qa),ii(),ll(Wt)&&ce&&ye&&(at.vertical=Fp(zt,t,i,p,Ne,Li,se,nr,Tt,gt,ut,Xo.vertical,!1,gr,Ye,Ke))}}var kn=void 0,Wn=!1;if(Be.icon&&Be.icon.name){var In=l[Be.icon.name];In&&(kn=function(fr,ni,Xr){var mr=Nl(Xr),Qa=ni[0]-fr.displaySize[0]*mr.horizontalAlign,vn=ni[1]-fr.displaySize[1]*mr.verticalAlign;return{image:fr,top:vn,bottom:vn+fr.displaySize[1],left:Qa,right:Qa+fr.displaySize[0]}}(p[Be.icon.name],I.get("icon-offset").evaluate(Be,{},x),I.get("icon-anchor").evaluate(Be,{},x)),Wn=In.sdf,e.sdfIcons===void 0?e.sdfIcons=In.sdf:e.sdfIcons!==In.sdf&&Rt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(In.pixelRatio!==e.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Tn=jp(at.horizontal)||at.vertical;e.iconsInText=!!Tn&&Tn.iconsInText,(Tn||kn)&&function(fr,ni,Xr,mr,Qa,vn,Dr,Ai,Ta,xr,Ou){var Yo=vn.textMaxSize.evaluate(ni,{});Yo===void 0&&(Yo=Dr);var Jo,Ri=fr.layers[0].layout,jl=Ri.get("icon-offset").evaluate(ni,{},Ou),vo=jp(Xr.horizontal),Vu=Dr/24,kc=fr.tilePixelRatio*Vu,gh=fr.tilePixelRatio*Yo/24,Qo=fr.tilePixelRatio*Ai,_h=fr.tilePixelRatio*Ri.get("symbol-spacing"),_l=Ri.get("text-padding")*fr.tilePixelRatio,To=Ri.get("icon-padding")*fr.tilePixelRatio,bl=Ri.get("text-max-angle")/180*Math.PI,Wp=Ri.get("text-rotation-alignment")==="map"&&Ri.get("symbol-placement")!=="point",Fu=Ri.get("icon-rotation-alignment")==="map"&&Ri.get("symbol-placement")!=="point",Ic=Ri.get("symbol-placement"),hp=_h/2,Zl=Ri.get("icon-text-fit");mr&&Zl!=="none"&&(fr.allowVerticalPlacement&&Xr.vertical&&(Jo=uu(mr,Xr.vertical,Zl,Ri.get("icon-text-fit-padding"),jl,Vu)),vo&&(mr=uu(mr,vo,Zl,Ri.get("icon-text-fit-padding"),jl,Vu)));var Ns=function(Dy,Aa){Aa.x<0||Aa.x>=8192||Aa.y<0||Aa.y>=8192||function(fi,ga,Ac,qu,zc,sv,Jp,es,ju,gp,Zu,Sh,Bf,Yd,Kl,Jd,yu,xl,Gu,Qd,ja,$d,em,ts,_p){var tm,wl,Ku,kh,Ih,El=fi.addToLineVertexArray(ga,Ac),rm=0,Qp=0,im=0,vu=0,qs=-1,gu=-1,_u={},Th=ae(""),My=0,Of=0;if(es._unevaluatedLayout.getValue("text-radial-offset")===void 0?(My=(tm=es.layout.get("text-offset").evaluate(ja,{},ts).map(function(kp){return 24*kp}))[0],Of=tm[1]):(My=24*es.layout.get("text-radial-offset").evaluate(ja,{},ts),Of=zf),fi.allowVerticalPlacement&&qu.vertical){var Ah=es.layout.get("text-rotate").evaluate(ja,{},ts)+90;kh=new Up(ju,ga,gp,Zu,Sh,qu.vertical,Bf,Yd,Kl,Ah),Jp&&(Ih=new Up(ju,ga,gp,Zu,Sh,Jp,yu,xl,Kl,Ah))}if(zc){var Pc=es.layout.get("icon-rotate").evaluate(ja,{}),nm=es.layout.get("icon-text-fit")!=="none",zh=Fd(zc,Pc,em,nm),bp=Jp?Fd(Jp,Pc,em,nm):void 0;Ku=new Up(ju,ga,gp,Zu,Sh,zc,yu,xl,!1,Pc),rm=4*zh.length;var am=fi.iconSizeData,xp=null;am.kind==="source"?(xp=[128*es.layout.get("icon-size").evaluate(ja,{})])[0]>32640&&Rt(fi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):am.kind==="composite"&&((xp=[128*$d.compositeIconSizes[0].evaluate(ja,{},ts),128*$d.compositeIconSizes[1].evaluate(ja,{},ts)])[0]>32640||xp[1]>32640)&&Rt(fi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),fi.addSymbols(fi.icon,zh,xp,Qd,Gu,ja,!1,ga,El.lineStartIndex,El.lineLength,-1,ts),qs=fi.icon.placedSymbolArray.length-1,bp&&(Qp=4*bp.length,fi.addSymbols(fi.icon,bp,xp,Qd,Gu,ja,Xo.vertical,ga,El.lineStartIndex,El.lineLength,-1,ts),gu=fi.icon.placedSymbolArray.length-1)}for(var Cc in qu.horizontal){var $p=qu.horizontal[Cc];if(!wl){Th=ae($p.text);var Hu=es.layout.get("text-rotate").evaluate(ja,{},ts);wl=new Up(ju,ga,gp,Zu,Sh,$p,Bf,Yd,Kl,Hu)}var Sl=$p.positionedLines.length===1;if(im+=Ud(fi,ga,$p,sv,es,Kl,ja,Jd,El,qu.vertical?Xo.horizontal:Xo.horizontalOnly,Sl?Object.keys(qu.horizontal):[Cc],_u,qs,$d,ts),Sl)break}qu.vertical&&(vu+=Ud(fi,ga,qu.vertical,sv,es,Kl,ja,Jd,El,Xo.vertical,["vertical"],_u,gu,$d,ts));var Dc=wl?wl.boxStartIndex:fi.collisionBoxArray.length,Ly=wl?wl.boxEndIndex:fi.collisionBoxArray.length,wp=kh?kh.boxStartIndex:fi.collisionBoxArray.length,Jv=kh?kh.boxEndIndex:fi.collisionBoxArray.length,Ry=Ku?Ku.boxStartIndex:fi.collisionBoxArray.length,Ep=Ku?Ku.boxEndIndex:fi.collisionBoxArray.length,Sp=Ih?Ih.boxStartIndex:fi.collisionBoxArray.length,By=Ih?Ih.boxEndIndex:fi.collisionBoxArray.length,rs=-1,Ph=function(kp,Mc){return kp&&kp.circleDiameter?Math.max(kp.circleDiameter,Mc):Mc};rs=Ph(wl,rs),rs=Ph(kh,rs),rs=Ph(Ku,rs);var om=(rs=Ph(Ih,rs))>-1?1:0;om&&(rs*=_p/24),fi.glyphOffsetArray.length>=Tr.MAX_GLYPHS&&Rt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ja.sortKey!==void 0&&fi.addToSortKeyRanges(fi.symbolInstances.length,ja.sortKey),fi.symbolInstances.emplaceBack(ga.x,ga.y,_u.right>=0?_u.right:-1,_u.center>=0?_u.center:-1,_u.left>=0?_u.left:-1,_u.vertical||-1,qs,gu,Th,Dc,Ly,wp,Jv,Ry,Ep,Sp,By,gp,im,vu,rm,Qp,om,0,Bf,My,Of,rs)}(fr,Aa,Dy,Xr,mr,Qa,Jo,fr.layers[0],fr.collisionBoxArray,ni.index,ni.sourceLayerIndex,fr.index,kc,_l,Wp,Ta,Qo,To,Fu,jl,ni,vn,xr,Ou,Dr)};if(Ic==="line")for(var bh=0,Nu=_c(ni.geometry,0,0,8192,8192);bh<Nu.length;bh+=1)for(var xh=Nu[bh],pp=0,fp=ky(xh,_h,bl,Xr.vertical||vo,mr,24,gh,fr.overscaling,8192);pp<fp.length;pp+=1){var mu=fp[pp];vo&&qd(fr,vo.text,hp,mu)||Ns(xh,mu)}else if(Ic==="line-center")for(var Yp=0,dp=ni.geometry;Yp<dp.length;Yp+=1){var Gl=dp[Yp];if(Gl.length>1){var Uu=Sy(Gl,bl,Xr.vertical||vo,mr,24,gh);Uu&&Ns(Gl,Uu)}}else if(ni.type==="Polygon")for(var $o=0,Tc=wf(ni.geometry,0);$o<Tc.length;$o+=1){var wh=Tc[$o],mp=cu(wh,16);Ns(wh[0],new ch(mp.x,mp.y,0))}else if(ni.type==="LineString")for(var Us=0,ms=ni.geometry;Us<ms.length;Us+=1){var Eh=ms[Us];Ns(Eh,new ch(Eh[0].x,Eh[0].y,0))}else if(ni.type==="Point")for(var yp=0,Mf=ni.geometry;yp<Mf.length;yp+=1)for(var Lf=0,vp=Mf[yp];Lf<vp.length;Lf+=1){var Rf=vp[Lf];Ns([Rf],new ch(Rf.x,Rf.y,0))}}(e,Be,at,kn,l,L,Ye,xt,ut,Wn,x)},Te=0,Pe=e.features;Te<Pe.length;Te+=1)Ee();d&&e.generateCollisionDebugBuffers()},a.perspective=function(e,t,i,l,p){var d,x=1/Math.tan(t/2);return e[0]=x/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},a.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},a.plugin=wo,a.polygonIntersectsPolygon=fo,a.postMapLoadEvent=jn,a.postTurnstileEvent=Pr,a.potpack=lh,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=ft,a.registerForPluginStateChange=function(e){return e({pluginStatus:ka,pluginURL:Va}),Fh.on("pluginStateChange",e),e},a.renderColorRamp=hl,a.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3],I=Math.sin(i),C=Math.cos(i);return e[0]=l*C+d*I,e[1]=p*C+x*I,e[2]=l*-I+d*C,e[3]=p*-I+x*C,e},a.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],x=t[5],I=t[6],C=t[7],L=t[8],O=t[9],q=t[10],K=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+L*l,e[5]=x*p+O*l,e[6]=I*p+q*l,e[7]=C*p+K*l,e[8]=L*p-d*l,e[9]=O*p-x*l,e[10]=q*p-I*l,e[11]=K*p-C*l,e},a.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],x=t[1],I=t[2],C=t[3],L=t[4],O=t[5],q=t[6],K=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+L*l,e[1]=x*p+O*l,e[2]=I*p+q*l,e[3]=C*p+K*l,e[4]=L*p-d*l,e[5]=O*p-x*l,e[6]=q*p-I*l,e[7]=K*p-C*l,e},a.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},a.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},a.setCacheLimits=function(e,t){Vn=e,Jn=t},a.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),ka==="deferred"||ka==="loading"||ka==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=tn.resolveURL(e),ka="deferred",co=t,ac(),i||Ha()},a.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},a.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},a.styleSpec=X,a.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},a.symbolSize=np,a.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},a.transformMat4=Ll,a.translate=function(e,t,i){var l,p,d,x,I,C,L,O,q,K,W,se,ce=i[0],ye=i[1],pe=i[2];return t===e?(e[12]=t[0]*ce+t[4]*ye+t[8]*pe+t[12],e[13]=t[1]*ce+t[5]*ye+t[9]*pe+t[13],e[14]=t[2]*ce+t[6]*ye+t[10]*pe+t[14],e[15]=t[3]*ce+t[7]*ye+t[11]*pe+t[15]):(p=t[1],d=t[2],x=t[3],I=t[4],C=t[5],L=t[6],O=t[7],q=t[8],K=t[9],W=t[10],se=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=x,e[4]=I,e[5]=C,e[6]=L,e[7]=O,e[8]=q,e[9]=K,e[10]=W,e[11]=se,e[12]=l*ce+I*ye+q*pe+t[12],e[13]=p*ce+C*ye+K*pe+t[13],e[14]=d*ce+L*ye+W*pe+t[14],e[15]=x*ce+O*ye+se*pe+t[15]),e},a.triggerPluginCompletionEvent=Td,a.uniqueId=Dt,a.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},a.validateLight=Gc,a.validateStyle=Es,a.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},a.vectorTile=Vl,a.version="1.13.2",a.warnOnce=Rt,a.webpSupported=Oi,a.window=U,a.wrap=Ce}),v(["./shared"],function(a){function P(N){var G=typeof N;if(G==="number"||G==="boolean"||G==="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var H="[",$=0,oe=N;$<oe.length;$+=1)H+=P(oe[$])+",";return H+"]"}for(var ve=Object.keys(N).sort(),ge="{",X=0;X<ve.length;X++)ge+=JSON.stringify(ve[X])+":"+P(N[ve[X]])+",";return ge+"}"}function A(N){for(var G="",H=0,$=a.refProperties;H<$.length;H+=1)G+="/"+P(N[$[H]]);return G}var F=function(N){this.keyCache={},N&&this.replace(N)};F.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},F.prototype.update=function(N,G){for(var H=this,$=0,oe=N;$<oe.length;$+=1){var ve=oe[$];this._layerConfigs[ve.id]=ve;var ge=this._layers[ve.id]=a.createStyleLayer(ve);ge._featureFilter=a.featureFilter(ge.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(var X=0,ne=G;X<ne.length;X+=1){var ke=ne[X];delete this.keyCache[ke],delete this._layerConfigs[ke],delete this._layers[ke]}this.familiesBySource={};for(var qe=0,Ze=function(He,et){for(var Mt={},We=0;We<He.length;We++){var qt=et&&et[He[We].id]||A(He[We]);et&&(et[He[We].id]=qt);var pr=Mt[qt];pr||(pr=Mt[qt]=[]),pr.push(He[We])}var kt=[];for(var ir in Mt)kt.push(Mt[ir]);return kt}(a.values(this._layerConfigs),this.keyCache);qe<Ze.length;qe+=1){var ze=Ze[qe].map(function(He){return H._layers[He.id]}),je=ze[0];if(je.visibility!=="none"){var ot=je.source||"",st=this.familiesBySource[ot];st||(st=this.familiesBySource[ot]={});var Re=je.sourceLayer||"_geojsonTileLayer",$e=st[Re];$e||($e=st[Re]=[]),$e.push(ze)}}};var V=function(N){var G={},H=[];for(var $ in N){var oe=N[$],ve=G[$]={};for(var ge in oe){var X=oe[+ge];if(X&&X.bitmap.width!==0&&X.bitmap.height!==0){var ne={x:0,y:0,w:X.bitmap.width+2,h:X.bitmap.height+2};H.push(ne),ve[ge]={rect:ne,metrics:X.metrics}}}}var ke=a.potpack(H),qe=new a.AlphaImage({width:ke.w||1,height:ke.h||1});for(var Ze in N){var ze=N[Ze];for(var je in ze){var ot=ze[+je];if(ot&&ot.bitmap.width!==0&&ot.bitmap.height!==0){var st=G[Ze][je].rect;a.AlphaImage.copy(ot.bitmap,qe,{x:0,y:0},{x:st.x+1,y:st.y+1},ot.bitmap)}}}this.image=qe,this.positions=G};a.register("GlyphAtlas",V);var j=function(N){this.tileID=new a.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId};function U(N,G,H){for(var $=new a.EvaluationParameters(G),oe=0,ve=N;oe<ve.length;oe+=1)ve[oe].recalculate($,H)}function he(N,G){var H=a.getArrayBuffer(N.request,function($,oe,ve,ge){$?G($):oe&&G(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(oe)),rawData:oe,cacheControl:ve,expires:ge})});return function(){H.cancel(),G()}}j.prototype.parse=function(N,G,H,$,oe){var ve=this;this.status="parsing",this.data=N,this.collisionBoxArray=new a.CollisionBoxArray;var ge=new a.DictionaryCoder(Object.keys(N.layers).sort()),X=new a.FeatureIndex(this.tileID,this.promoteId);X.bucketLayerIDs=[];var ne,ke,qe,Ze,ze={},je={featureIndex:X,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:H},ot=G.familiesBySource[this.source];for(var st in ot){var Re=N.layers[st];if(Re){Re.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+st+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var $e=ge.encode(st),He=[],et=0;et<Re.length;et++){var Mt=Re.feature(et),We=X.getId(Mt,st);He.push({feature:Mt,id:We,index:et,sourceLayerIndex:$e})}for(var qt=0,pr=ot[st];qt<pr.length;qt+=1){var kt=pr[qt],ir=kt[0];ir.minzoom&&this.zoom<Math.floor(ir.minzoom)||ir.maxzoom&&this.zoom>=ir.maxzoom||ir.visibility!=="none"&&(U(kt,this.zoom,H),(ze[ir.id]=ir.createBucket({index:X.bucketLayerIDs.length,layers:kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$e,sourceID:this.source})).populate(He,je,this.tileID.canonical),X.bucketLayerIDs.push(kt.map(function(hr){return hr.id})))}}}var Vt=a.mapObject(je.glyphDependencies,function(hr){return Object.keys(hr).map(Number)});Object.keys(Vt).length?$.send("getGlyphs",{uid:this.uid,stacks:Vt},function(hr,Ht){ne||(ne=hr,ke=Ht,_r.call(ve))}):ke={};var Fr=Object.keys(je.iconDependencies);Fr.length?$.send("getImages",{icons:Fr,source:this.source,tileID:this.tileID,type:"icons"},function(hr,Ht){ne||(ne=hr,qe=Ht,_r.call(ve))}):qe={};var Ft=Object.keys(je.patternDependencies);function _r(){if(ne)return oe(ne);if(ke&&qe&&Ze){var hr=new V(ke),Ht=new a.ImageAtlas(qe,Ze);for(var lr in ze){var gi=ze[lr];gi instanceof a.SymbolBucket?(U(gi.layers,this.zoom,H),a.performSymbolLayout(gi,ke,hr.positions,qe,Ht.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):gi.hasPattern&&(gi instanceof a.LineBucket||gi instanceof a.FillBucket||gi instanceof a.FillExtrusionBucket)&&(U(gi.layers,this.zoom,H),gi.addFeatures(je,this.tileID.canonical,Ht.patternPositions))}this.status="done",oe(null,{buckets:a.values(ze).filter(function(Pn){return!Pn.isEmpty()}),featureIndex:X,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hr.image,imageAtlas:Ht,glyphMap:this.returnDependencies?ke:null,iconMap:this.returnDependencies?qe:null,glyphPositions:this.returnDependencies?hr.positions:null})}}Ft.length?$.send("getImages",{icons:Ft,source:this.source,tileID:this.tileID,type:"patterns"},function(hr,Ht){ne||(ne=hr,Ze=Ht,_r.call(ve))}):Ze={},_r.call(this)};var ie=function(N,G,H,$){this.actor=N,this.layerIndex=G,this.availableImages=H,this.loadVectorData=$||he,this.loading={},this.loaded={}};ie.prototype.loadTile=function(N,G){var H=this,$=N.uid;this.loading||(this.loading={});var oe=!!(N&&N.request&&N.request.collectResourceTiming)&&new a.RequestPerformance(N.request),ve=this.loading[$]=new j(N);ve.abort=this.loadVectorData(N,function(ge,X){if(delete H.loading[$],ge||!X)return ve.status="done",H.loaded[$]=ve,G(ge);var ne=X.rawData,ke={};X.expires&&(ke.expires=X.expires),X.cacheControl&&(ke.cacheControl=X.cacheControl);var qe={};if(oe){var Ze=oe.finish();Ze&&(qe.resourceTiming=JSON.parse(JSON.stringify(Ze)))}ve.vectorTile=X.vectorTile,ve.parse(X.vectorTile,H.layerIndex,H.availableImages,H.actor,function(ze,je){if(ze||!je)return G(ze);G(null,a.extend({rawTileData:ne.slice(0)},je,ke,qe))}),H.loaded=H.loaded||{},H.loaded[$]=ve})},ie.prototype.reloadTile=function(N,G){var H=this,$=this.loaded,oe=N.uid,ve=this;if($&&$[oe]){var ge=$[oe];ge.showCollisionBoxes=N.showCollisionBoxes;var X=function(ne,ke){var qe=ge.reloadCallback;qe&&(delete ge.reloadCallback,ge.parse(ge.vectorTile,ve.layerIndex,H.availableImages,ve.actor,qe)),G(ne,ke)};ge.status==="parsing"?ge.reloadCallback=X:ge.status==="done"&&(ge.vectorTile?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,X):X())}},ie.prototype.abortTile=function(N,G){var H=this.loading,$=N.uid;H&&H[$]&&H[$].abort&&(H[$].abort(),delete H[$]),G()},ie.prototype.removeTile=function(N,G){var H=this.loaded,$=N.uid;H&&H[$]&&delete H[$],G()};var De=a.window.ImageBitmap,we=function(){this.loaded={}};function Ce(N,G){if(N.length!==0){Ue(N[0],G);for(var H=1;H<N.length;H++)Ue(N[H],!G)}}function Ue(N,G){for(var H=0,$=0,oe=N.length,ve=oe-1;$<oe;ve=$++)H+=(N[$][0]-N[ve][0])*(N[ve][1]+N[$][1]);H>=0!=!!G&&N.reverse()}we.prototype.loadTile=function(N,G){var H=N.uid,$=N.encoding,oe=N.rawImageData,ve=De&&oe instanceof De?this.getImageData(oe):oe,ge=new a.DEMData(H,ve,$);this.loaded=this.loaded||{},this.loaded[H]=ge,G(null,ge)},we.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var G=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:G.width,height:G.height},G.data)},we.prototype.removeTile=function(N){var G=this.loaded,H=N.uid;G&&G[H]&&delete G[H]};var At=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Dt=function(N){this._feature=N,this.extent=a.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))};Dt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],G=0,H=this._feature.geometry;G<H.length;G+=1){var $=H[G];N.push([new a.Point$1($[0],$[1])])}return N}for(var oe=[],ve=0,ge=this._feature.geometry;ve<ge.length;ve+=1){for(var X=[],ne=0,ke=ge[ve];ne<ke.length;ne+=1){var qe=ke[ne];X.push(new a.Point$1(qe[0],qe[1]))}oe.push(X)}return oe},Dt.prototype.toGeoJSON=function(N,G,H){return At.call(this,N,G,H)};var ht=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=N.length,this._features=N};ht.prototype.feature=function(N){return new Dt(this._features[N])};var tt=a.vectorTile.VectorTileFeature,Ar=yr;function yr(N,G){this.options=G||{},this.features=N,this.length=N.length}function tr(N,G){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=G||4096}yr.prototype.feature=function(N){return new tr(this.features[N],this.options.extent)},tr.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var G=0;G<N.length;G++){for(var H=N[G],$=[],oe=0;oe<H.length;oe++)$.push(new a.Point$1(H[oe][0],H[oe][1]));this.geometry.push($)}return this.geometry},tr.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,G=1/0,H=-1/0,$=1/0,oe=-1/0,ve=0;ve<N.length;ve++)for(var ge=N[ve],X=0;X<ge.length;X++){var ne=ge[X];G=Math.min(G,ne.x),H=Math.max(H,ne.x),$=Math.min($,ne.y),oe=Math.max(oe,ne.y)}return[G,$,H,oe]},tr.prototype.toGeoJSON=tt.prototype.toGeoJSON;var wt=kr,bt=Ar;function kr(N){var G=new a.pbf;return function(H,$){for(var oe in H.layers)$.writeMessage(3,Rt,H.layers[oe])}(N,G),G.finish()}function Rt(N,G){var H;G.writeVarintField(15,N.version||1),G.writeStringField(1,N.name||""),G.writeVarintField(5,N.extent||4096);var $={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<N.length;H++)$.feature=N.feature(H),G.writeMessage(2,zr,$);var oe=$.keys;for(H=0;H<oe.length;H++)G.writeStringField(3,oe[H]);var ve=$.values;for(H=0;H<ve.length;H++)G.writeMessage(4,wr,ve[H])}function zr(N,G){var H=N.feature;H.id!==void 0&&G.writeVarintField(1,H.id),G.writeMessage(2,Qe,N),G.writeVarintField(3,H.type),G.writeMessage(4,si,H)}function Qe(N,G){var H=N.feature,$=N.keys,oe=N.values,ve=N.keycache,ge=N.valuecache;for(var X in H.properties){var ne=ve[X];ne===void 0&&($.push(X),ve[X]=ne=$.length-1),G.writeVarint(ne);var ke=H.properties[X],qe=typeof ke;qe!=="string"&&qe!=="boolean"&&qe!=="number"&&(ke=JSON.stringify(ke));var Ze=qe+":"+ke,ze=ge[Ze];ze===void 0&&(oe.push(ke),ge[Ze]=ze=oe.length-1),G.writeVarint(ze)}}function ar(N,G){return(G<<3)+(7&N)}function $r(N){return N<<1^N>>31}function si(N,G){for(var H=N.loadGeometry(),$=N.type,oe=0,ve=0,ge=H.length,X=0;X<ge;X++){var ne=H[X],ke=1;$===1&&(ke=ne.length),G.writeVarint(ar(1,ke));for(var qe=$===3?ne.length-1:ne.length,Ze=0;Ze<qe;Ze++){Ze===1&&$!==1&&G.writeVarint(ar(2,qe-1));var ze=ne[Ze].x-oe,je=ne[Ze].y-ve;G.writeVarint($r(ze)),G.writeVarint($r(je)),oe+=ze,ve+=je}$===3&&G.writeVarint(ar(7,1))}}function wr(N,G){var H=typeof N;H==="string"?G.writeStringField(1,N):H==="boolean"?G.writeBooleanField(7,N):H==="number"&&(N%1!=0?G.writeDoubleField(3,N):N<0?G.writeSVarintField(6,N):G.writeVarintField(5,N))}function mt(N,G,H,$){nt(N,H,$),nt(G,2*H,2*$),nt(G,2*H+1,2*$+1)}function nt(N,G,H){var $=N[G];N[G]=N[H],N[H]=$}function cr(N,G,H,$){var oe=N-H,ve=G-$;return oe*oe+ve*ve}wt.fromVectorTileJs=kr,wt.fromGeojsonVt=function(N,G){G=G||{};var H={};for(var $ in N)H[$]=new Ar(N[$].features,G),H[$].name=$,H[$].version=G.version,H[$].extent=G.extent;return kr({layers:H})},wt.GeoJSONWrapper=bt;var ji=function(N){return N[0]},la=function(N){return N[1]},Bi=function(N,G,H,$,oe){G===void 0&&(G=ji),H===void 0&&(H=la),$===void 0&&($=64),oe===void 0&&(oe=Float64Array),this.nodeSize=$,this.points=N;for(var ve=N.length<65536?Uint16Array:Uint32Array,ge=this.ids=new ve(N.length),X=this.coords=new oe(2*N.length),ne=0;ne<N.length;ne++)ge[ne]=ne,X[2*ne]=G(N[ne]),X[2*ne+1]=H(N[ne]);(function ke(qe,Ze,ze,je,ot,st){if(!(ot-je<=ze)){var Re=je+ot>>1;(function $e(He,et,Mt,We,qt,pr){for(;qt>We;){if(qt-We>600){var kt=qt-We+1,ir=Mt-We+1,Vt=Math.log(kt),Fr=.5*Math.exp(2*Vt/3),Ft=.5*Math.sqrt(Vt*Fr*(kt-Fr)/kt)*(ir-kt/2<0?-1:1);$e(He,et,Mt,Math.max(We,Math.floor(Mt-ir*Fr/kt+Ft)),Math.min(qt,Math.floor(Mt+(kt-ir)*Fr/kt+Ft)),pr)}var _r=et[2*Mt+pr],hr=We,Ht=qt;for(mt(He,et,We,Mt),et[2*qt+pr]>_r&&mt(He,et,We,qt);hr<Ht;){for(mt(He,et,hr,Ht),hr++,Ht--;et[2*hr+pr]<_r;)hr++;for(;et[2*Ht+pr]>_r;)Ht--}et[2*We+pr]===_r?mt(He,et,We,Ht):mt(He,et,++Ht,qt),Ht<=Mt&&(We=Ht+1),Mt<=Ht&&(qt=Ht-1)}})(qe,Ze,Re,je,ot,st%2),ke(qe,Ze,ze,je,Re-1,st+1),ke(qe,Ze,ze,Re+1,ot,st+1)}})(ge,X,$,0,ge.length-1,0)};Bi.prototype.range=function(N,G,H,$){return function(oe,ve,ge,X,ne,ke,qe){for(var Ze,ze,je=[0,oe.length-1,0],ot=[];je.length;){var st=je.pop(),Re=je.pop(),$e=je.pop();if(Re-$e<=qe)for(var He=$e;He<=Re;He++)ze=ve[2*He+1],(Ze=ve[2*He])>=ge&&Ze<=ne&&ze>=X&&ze<=ke&&ot.push(oe[He]);else{var et=Math.floor(($e+Re)/2);ze=ve[2*et+1],(Ze=ve[2*et])>=ge&&Ze<=ne&&ze>=X&&ze<=ke&&ot.push(oe[et]);var Mt=(st+1)%2;(st===0?ge<=Ze:X<=ze)&&(je.push($e),je.push(et-1),je.push(Mt)),(st===0?ne>=Ze:ke>=ze)&&(je.push(et+1),je.push(Re),je.push(Mt))}}return ot}(this.ids,this.coords,N,G,H,$,this.nodeSize)},Bi.prototype.within=function(N,G,H){return function($,oe,ve,ge,X,ne){for(var ke=[0,$.length-1,0],qe=[],Ze=X*X;ke.length;){var ze=ke.pop(),je=ke.pop(),ot=ke.pop();if(je-ot<=ne)for(var st=ot;st<=je;st++)cr(oe[2*st],oe[2*st+1],ve,ge)<=Ze&&qe.push($[st]);else{var Re=Math.floor((ot+je)/2),$e=oe[2*Re],He=oe[2*Re+1];cr($e,He,ve,ge)<=Ze&&qe.push($[Re]);var et=(ze+1)%2;(ze===0?ve-X<=$e:ge-X<=He)&&(ke.push(ot),ke.push(Re-1),ke.push(et)),(ze===0?ve+X>=$e:ge+X>=He)&&(ke.push(Re+1),ke.push(je),ke.push(et))}}return qe}(this.ids,this.coords,N,G,H,this.nodeSize)};var zi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(N){return N}},li=function(N){this.options=rn(Object.create(zi),N),this.trees=new Array(this.options.maxZoom+1)};function tn(N,G,H,$,oe){return{x:N,y:G,zoom:1/0,id:H,parentId:-1,numPoints:$,properties:oe}}function rr(N,G){var H=N.geometry.coordinates,$=H[1];return{x:Ir(H[0]),y:Bt($),zoom:1/0,index:G,parentId:-1}}function Oi(N){return{type:"Feature",id:N.id,properties:Za(N),geometry:{type:"Point",coordinates:[($=N.x,360*($-.5)),(G=N.y,H=(180-360*G)*Math.PI/180,360*Math.atan(Math.exp(H))/Math.PI-90)]}};var G,H,$}function Za(N){var G=N.numPoints,H=G>=1e4?Math.round(G/1e3)+"k":G>=1e3?Math.round(G/100)/10+"k":G;return rn(rn({},N.properties),{cluster:!0,cluster_id:N.id,point_count:G,point_count_abbreviated:H})}function Ir(N){return N/360+.5}function Bt(N){var G=Math.sin(N*Math.PI/180),H=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return H<0?0:H>1?1:H}function rn(N,G){for(var H in G)N[H]=G[H];return N}function mi(N){return N.x}function Zr(N){return N.y}function eo(N,G,H,$,oe,ve){var ge=oe-H,X=ve-$;if(ge!==0||X!==0){var ne=((N-H)*ge+(G-$)*X)/(ge*ge+X*X);ne>1?(H=oe,$=ve):ne>0&&(H+=ge*ne,$+=X*ne)}return(ge=N-H)*ge+(X=G-$)*X}function Ut(N,G,H,$){var oe={id:N===void 0?null:N,type:G,geometry:H,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ve){var ge=ve.geometry,X=ve.type;if(X==="Point"||X==="MultiPoint"||X==="LineString")yi(ve,ge);else if(X==="Polygon"||X==="MultiLineString")for(var ne=0;ne<ge.length;ne++)yi(ve,ge[ne]);else if(X==="MultiPolygon")for(ne=0;ne<ge.length;ne++)for(var ke=0;ke<ge[ne].length;ke++)yi(ve,ge[ne][ke])}(oe),oe}function yi(N,G){for(var H=0;H<G.length;H+=3)N.minX=Math.min(N.minX,G[H]),N.minY=Math.min(N.minY,G[H+1]),N.maxX=Math.max(N.maxX,G[H]),N.maxY=Math.max(N.maxY,G[H+1])}function Or(N,G,H,$){if(G.geometry){var oe=G.geometry.coordinates,ve=G.geometry.type,ge=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),X=[],ne=G.id;if(H.promoteId?ne=G.properties[H.promoteId]:H.generateId&&(ne=$||0),ve==="Point")bi(oe,X);else if(ve==="MultiPoint")for(var ke=0;ke<oe.length;ke++)bi(oe[ke],X);else if(ve==="LineString")Gr(oe,X,ge,!1);else if(ve==="MultiLineString"){if(H.lineMetrics){for(ke=0;ke<oe.length;ke++)Gr(oe[ke],X=[],ge,!1),N.push(Ut(ne,"LineString",X,G.properties));return}Vr(oe,X,ge,!1)}else if(ve==="Polygon")Vr(oe,X,ge,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(ke=0;ke<G.geometry.geometries.length;ke++)Or(N,{id:ne,geometry:G.geometry.geometries[ke],properties:G.properties},H,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ke=0;ke<oe.length;ke++){var qe=[];Vr(oe[ke],qe,ge,!0),X.push(qe)}}N.push(Ut(ne,ve,X,G.properties))}}function bi(N,G){G.push(xi(N[0])),G.push(wi(N[1])),G.push(0)}function Gr(N,G,H,$){for(var oe,ve,ge=0,X=0;X<N.length;X++){var ne=xi(N[X][0]),ke=wi(N[X][1]);G.push(ne),G.push(ke),G.push(0),X>0&&(ge+=$?(oe*ke-ne*ve)/2:Math.sqrt(Math.pow(ne-oe,2)+Math.pow(ke-ve,2))),oe=ne,ve=ke}var qe=G.length-3;G[2]=1,function Ze(ze,je,ot,st){for(var Re,$e=st,He=ot-je>>1,et=ot-je,Mt=ze[je],We=ze[je+1],qt=ze[ot],pr=ze[ot+1],kt=je+3;kt<ot;kt+=3){var ir=eo(ze[kt],ze[kt+1],Mt,We,qt,pr);if(ir>$e)Re=kt,$e=ir;else if(ir===$e){var Vt=Math.abs(kt-He);Vt<et&&(Re=kt,et=Vt)}}$e>st&&(Re-je>3&&Ze(ze,je,Re,st),ze[Re+2]=$e,ot-Re>3&&Ze(ze,Re,ot,st))}(G,0,qe,H),G[qe+2]=1,G.size=Math.abs(ge),G.start=0,G.end=G.size}function Vr(N,G,H,$){for(var oe=0;oe<N.length;oe++){var ve=[];Gr(N[oe],ve,H,$),G.push(ve)}}function xi(N){return N/360+.5}function wi(N){var G=Math.sin(N*Math.PI/180),H=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return H<0?0:H>1?1:H}function Mr(N,G,H,$,oe,ve,ge,X){if($/=G,ve>=(H/=G)&&ge<$)return N;if(ge<H||ve>=$)return null;for(var ne=[],ke=0;ke<N.length;ke++){var qe=N[ke],Ze=qe.geometry,ze=qe.type,je=oe===0?qe.minX:qe.minY,ot=oe===0?qe.maxX:qe.maxY;if(je>=H&&ot<$)ne.push(qe);else if(!(ot<H||je>=$)){var st=[];if(ze==="Point"||ze==="MultiPoint")er(Ze,st,H,$,oe);else if(ze==="LineString")Pr(Ze,st,H,$,oe,!1,X.lineMetrics);else if(ze==="MultiLineString")jn(Ze,st,H,$,oe,!1);else if(ze==="Polygon")jn(Ze,st,H,$,oe,!0);else if(ze==="MultiPolygon")for(var Re=0;Re<Ze.length;Re++){var $e=[];jn(Ze[Re],$e,H,$,oe,!0),$e.length&&st.push($e)}if(st.length){if(X.lineMetrics&&ze==="LineString"){for(Re=0;Re<st.length;Re++)ne.push(Ut(qe.id,ze,st[Re],qe.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(st.length===1?(ze="LineString",st=st[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=st.length===3?"Point":"MultiPoint"),ne.push(Ut(qe.id,ze,st,qe.tags))}}}return ne.length?ne:null}function er(N,G,H,$,oe){for(var ve=0;ve<N.length;ve+=3){var ge=N[ve+oe];ge>=H&&ge<=$&&(G.push(N[ve]),G.push(N[ve+1]),G.push(N[ve+2]))}}function Pr(N,G,H,$,oe,ve,ge){for(var X,ne,ke=Yn(N),qe=oe===0?Jn:vi,Ze=N.start,ze=0;ze<N.length-3;ze+=3){var je=N[ze],ot=N[ze+1],st=N[ze+2],Re=N[ze+3],$e=N[ze+4],He=oe===0?je:ot,et=oe===0?Re:$e,Mt=!1;ge&&(X=Math.sqrt(Math.pow(je-Re,2)+Math.pow(ot-$e,2))),He<H?et>H&&(ne=qe(ke,je,ot,Re,$e,H),ge&&(ke.start=Ze+X*ne)):He>$?et<$&&(ne=qe(ke,je,ot,Re,$e,$),ge&&(ke.start=Ze+X*ne)):Vn(ke,je,ot,st),et<H&&He>=H&&(ne=qe(ke,je,ot,Re,$e,H),Mt=!0),et>$&&He<=$&&(ne=qe(ke,je,ot,Re,$e,$),Mt=!0),!ve&&Mt&&(ge&&(ke.end=Ze+X*ne),G.push(ke),ke=Yn(N)),ge&&(Ze+=X)}var We=N.length-3;je=N[We],ot=N[We+1],st=N[We+2],(He=oe===0?je:ot)>=H&&He<=$&&Vn(ke,je,ot,st),We=ke.length-3,ve&&We>=3&&(ke[We]!==ke[0]||ke[We+1]!==ke[1])&&Vn(ke,ke[0],ke[1],ke[2]),ke.length&&G.push(ke)}function Yn(N){var G=[];return G.size=N.size,G.start=N.start,G.end=N.end,G}function jn(N,G,H,$,oe,ve){for(var ge=0;ge<N.length;ge++)Pr(N[ge],G,H,$,oe,ve,!1)}function Vn(N,G,H,$){N.push(G),N.push(H),N.push($)}function Jn(N,G,H,$,oe,ve){var ge=(ve-G)/($-G);return N.push(ve),N.push(H+(oe-H)*ge),N.push(1),ge}function vi(N,G,H,$,oe,ve){var ge=(ve-H)/(oe-H);return N.push(G+($-G)*ge),N.push(ve),N.push(1),ge}function Zi(N,G){for(var H=[],$=0;$<N.length;$++){var oe,ve=N[$],ge=ve.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")oe=_n(ve.geometry,G);else if(ge==="MultiLineString"||ge==="Polygon"){oe=[];for(var X=0;X<ve.geometry.length;X++)oe.push(_n(ve.geometry[X],G))}else if(ge==="MultiPolygon")for(oe=[],X=0;X<ve.geometry.length;X++){for(var ne=[],ke=0;ke<ve.geometry[X].length;ke++)ne.push(_n(ve.geometry[X][ke],G));oe.push(ne)}H.push(Ut(ve.id,ge,oe,ve.tags))}return H}function _n(N,G){var H=[];H.size=N.size,N.start!==void 0&&(H.start=N.start,H.end=N.end);for(var $=0;$<N.length;$+=3)H.push(N[$]+G,N[$+1],N[$+2]);return H}function to(N,G){if(N.transformed)return N;var H,$,oe,ve=1<<N.z,ge=N.x,X=N.y;for(H=0;H<N.features.length;H++){var ne=N.features[H],ke=ne.geometry,qe=ne.type;if(ne.geometry=[],qe===1)for($=0;$<ke.length;$+=2)ne.geometry.push(An(ke[$],ke[$+1],G,ve,ge,X));else for($=0;$<ke.length;$++){var Ze=[];for(oe=0;oe<ke[$].length;oe+=2)Ze.push(An(ke[$][oe],ke[$][oe+1],G,ve,ge,X));ne.geometry.push(Ze)}}return N.transformed=!0,N}function An(N,G,H,$,oe,ve){return[Math.round(H*(N*$-oe)),Math.round(H*(G*$-ve))]}function is(N,G,H,$,oe){for(var ve=G===oe.maxZoom?0:oe.tolerance/((1<<G)*oe.extent),ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:H,y:$,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},X=0;X<N.length;X++){ge.numFeatures++,bn(ge,N[X],ve,oe);var ne=N[X].minX,ke=N[X].minY,qe=N[X].maxX,Ze=N[X].maxY;ne<ge.minX&&(ge.minX=ne),ke<ge.minY&&(ge.minY=ke),qe>ge.maxX&&(ge.maxX=qe),Ze>ge.maxY&&(ge.maxY=Ze)}return ge}function bn(N,G,H,$){var oe=G.geometry,ve=G.type,ge=[];if(ve==="Point"||ve==="MultiPoint")for(var X=0;X<oe.length;X+=3)ge.push(oe[X]),ge.push(oe[X+1]),N.numPoints++,N.numSimplified++;else if(ve==="LineString")Pi(ge,oe,N,H,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(X=0;X<oe.length;X++)Pi(ge,oe[X],N,H,ve==="Polygon",X===0);else if(ve==="MultiPolygon")for(var ne=0;ne<oe.length;ne++){var ke=oe[ne];for(X=0;X<ke.length;X++)Pi(ge,ke[X],N,H,!0,X===0)}if(ge.length){var qe=G.tags||null;if(ve==="LineString"&&$.lineMetrics){for(var Ze in qe={},G.tags)qe[Ze]=G.tags[Ze];qe.mapbox_clip_start=oe.start/oe.size,qe.mapbox_clip_end=oe.end/oe.size}var ze={geometry:ge,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:qe};G.id!==null&&(ze.id=G.id),N.features.push(ze)}}function Pi(N,G,H,$,oe,ve){var ge=$*$;if($>0&&G.size<(oe?ge:$))H.numPoints+=G.length/3;else{for(var X=[],ne=0;ne<G.length;ne+=3)($===0||G[ne+2]>ge)&&(H.numSimplified++,X.push(G[ne]),X.push(G[ne+1])),H.numPoints++;oe&&function(ke,qe){for(var Ze=0,ze=0,je=ke.length,ot=je-2;ze<je;ot=ze,ze+=2)Ze+=(ke[ze]-ke[ot])*(ke[ze+1]+ke[ot+1]);if(Ze>0===qe)for(ze=0,je=ke.length;ze<je/2;ze+=2){var st=ke[ze],Re=ke[ze+1];ke[ze]=ke[je-2-ze],ke[ze+1]=ke[je-1-ze],ke[je-2-ze]=st,ke[je-1-ze]=Re}}(X,ve),N.push(X)}}function ei(N,G){var H=(G=this.options=function(oe,ve){for(var ge in ve)oe[ge]=ve[ge];return oe}(Object.create(this.options),G)).debug;if(H&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var $=function(oe,ve){var ge=[];if(oe.type==="FeatureCollection")for(var X=0;X<oe.features.length;X++)Or(ge,oe.features[X],ve,X);else Or(ge,oe.type==="Feature"?oe:{geometry:oe},ve);return ge}(N,G);this.tiles={},this.tileCoords=[],H&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),($=function(oe,ve){var ge=ve.buffer/ve.extent,X=oe,ne=Mr(oe,1,-1-ge,ge,0,-1,2,ve),ke=Mr(oe,1,1-ge,2+ge,0,-1,2,ve);return(ne||ke)&&(X=Mr(oe,1,-ge,1+ge,0,-1,2,ve)||[],ne&&(X=Zi(ne,1).concat(X)),ke&&(X=X.concat(Zi(ke,-1)))),X}($,G)).length&&this.splitTile($,0,0,0),H&&($.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function nn(N,G,H){return 32*((1<<N)*H+G)+N}function Qn(N,G){var H=N.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);var $=this._geoJSONIndex.getTile(H.z,H.x,H.y);if(!$)return G(null,null);var oe=new ht($.features),ve=wt(oe);ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),G(null,{vectorTile:oe,rawData:ve.buffer})}li.prototype.load=function(N){var G=this.options,H=G.log,$=G.minZoom,oe=G.maxZoom,ve=G.nodeSize;H&&console.time("total time");var ge="prepare "+N.length+" points";H&&console.time(ge),this.points=N;for(var X=[],ne=0;ne<N.length;ne++)N[ne].geometry&&X.push(rr(N[ne],ne));this.trees[oe+1]=new Bi(X,mi,Zr,ve,Float32Array),H&&console.timeEnd(ge);for(var ke=oe;ke>=$;ke--){var qe=+Date.now();X=this._cluster(X,ke),this.trees[ke]=new Bi(X,mi,Zr,ve,Float32Array),H&&console.log("z%d: %d clusters in %dms",ke,X.length,+Date.now()-qe)}return H&&console.timeEnd("total time"),this},li.prototype.getClusters=function(N,G){var H=((N[0]+180)%360+360)%360-180,$=Math.max(-90,Math.min(90,N[1])),oe=N[2]===180?180:((N[2]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)H=-180,oe=180;else if(H>oe){var ge=this.getClusters([H,$,180,ve],G),X=this.getClusters([-180,$,oe,ve],G);return ge.concat(X)}for(var ne=this.trees[this._limitZoom(G)],ke=[],qe=0,Ze=ne.range(Ir(H),Bt(ve),Ir(oe),Bt($));qe<Ze.length;qe+=1){var ze=ne.points[Ze[qe]];ke.push(ze.numPoints?Oi(ze):this.points[ze.index])}return ke},li.prototype.getChildren=function(N){var G=this._getOriginId(N),H=this._getOriginZoom(N),$="No cluster with the specified id.",oe=this.trees[H];if(!oe)throw new Error($);var ve=oe.points[G];if(!ve)throw new Error($);for(var ge=this.options.radius/(this.options.extent*Math.pow(2,H-1)),X=[],ne=0,ke=oe.within(ve.x,ve.y,ge);ne<ke.length;ne+=1){var qe=oe.points[ke[ne]];qe.parentId===N&&X.push(qe.numPoints?Oi(qe):this.points[qe.index])}if(X.length===0)throw new Error($);return X},li.prototype.getLeaves=function(N,G,H){var $=[];return this._appendLeaves($,N,G=G||10,H=H||0,0),$},li.prototype.getTile=function(N,G,H){var $=this.trees[this._limitZoom(N)],oe=Math.pow(2,N),ve=this.options,ge=ve.radius/ve.extent,X=(H-ge)/oe,ne=(H+1+ge)/oe,ke={features:[]};return this._addTileFeatures($.range((G-ge)/oe,X,(G+1+ge)/oe,ne),$.points,G,H,oe,ke),G===0&&this._addTileFeatures($.range(1-ge/oe,X,1,ne),$.points,oe,H,oe,ke),G===oe-1&&this._addTileFeatures($.range(0,X,ge/oe,ne),$.points,-1,H,oe,ke),ke.features.length?ke:null},li.prototype.getClusterExpansionZoom=function(N){for(var G=this._getOriginZoom(N)-1;G<=this.options.maxZoom;){var H=this.getChildren(N);if(G++,H.length!==1)break;N=H[0].properties.cluster_id}return G},li.prototype._appendLeaves=function(N,G,H,$,oe){for(var ve=0,ge=this.getChildren(G);ve<ge.length;ve+=1){var X=ge[ve],ne=X.properties;if(ne&&ne.cluster?oe+ne.point_count<=$?oe+=ne.point_count:oe=this._appendLeaves(N,ne.cluster_id,H,$,oe):oe<$?oe++:N.push(X),N.length===H)break}return oe},li.prototype._addTileFeatures=function(N,G,H,$,oe,ve){for(var ge=0,X=N;ge<X.length;ge+=1){var ne=G[X[ge]],ke=ne.numPoints,qe={type:1,geometry:[[Math.round(this.options.extent*(ne.x*oe-H)),Math.round(this.options.extent*(ne.y*oe-$))]],tags:ke?Za(ne):this.points[ne.index].properties},Ze=void 0;ke?Ze=ne.id:this.options.generateId?Ze=ne.index:this.points[ne.index].id&&(Ze=this.points[ne.index].id),Ze!==void 0&&(qe.id=Ze),ve.features.push(qe)}},li.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},li.prototype._cluster=function(N,G){for(var H=[],$=this.options,oe=$.reduce,ve=$.minPoints,ge=$.radius/($.extent*Math.pow(2,G)),X=0;X<N.length;X++){var ne=N[X];if(!(ne.zoom<=G)){ne.zoom=G;for(var ke=this.trees[G+1],qe=ke.within(ne.x,ne.y,ge),Ze=ne.numPoints||1,ze=Ze,je=0,ot=qe;je<ot.length;je+=1){var st=ke.points[ot[je]];st.zoom>G&&(ze+=st.numPoints||1)}if(ze>=ve){for(var Re=ne.x*Ze,$e=ne.y*Ze,He=oe&&Ze>1?this._map(ne,!0):null,et=(X<<5)+(G+1)+this.points.length,Mt=0,We=qe;Mt<We.length;Mt+=1){var qt=ke.points[We[Mt]];if(!(qt.zoom<=G)){qt.zoom=G;var pr=qt.numPoints||1;Re+=qt.x*pr,$e+=qt.y*pr,qt.parentId=et,oe&&(He||(He=this._map(ne,!0)),oe(He,this._map(qt)))}}ne.parentId=et,H.push(tn(Re/ze,$e/ze,et,ze,He))}else if(H.push(ne),ze>1)for(var kt=0,ir=qe;kt<ir.length;kt+=1){var Vt=ke.points[ir[kt]];Vt.zoom<=G||(Vt.zoom=G,H.push(Vt))}}}return H},li.prototype._getOriginId=function(N){return N-this.points.length>>5},li.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},li.prototype._map=function(N,G){if(N.numPoints)return G?rn({},N.properties):N.properties;var H=this.points[N.index].properties,$=this.options.map(H);return G&&$===H?rn({},$):$},ei.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ei.prototype.splitTile=function(N,G,H,$,oe,ve,ge){for(var X=[N,G,H,$],ne=this.options,ke=ne.debug;X.length;){$=X.pop(),H=X.pop(),G=X.pop(),N=X.pop();var qe=1<<G,Ze=nn(G,H,$),ze=this.tiles[Ze];if(!ze&&(ke>1&&console.time("creation"),ze=this.tiles[Ze]=is(N,G,H,$,ne),this.tileCoords.push({z:G,x:H,y:$}),ke)){ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,H,$,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var je="z"+G;this.stats[je]=(this.stats[je]||0)+1,this.total++}if(ze.source=N,oe){if(G===ne.maxZoom||G===oe)continue;var ot=1<<oe-G;if(H!==Math.floor(ve/ot)||$!==Math.floor(ge/ot))continue}else if(G===ne.indexMaxZoom||ze.numPoints<=ne.indexMaxPoints)continue;if(ze.source=null,N.length!==0){ke>1&&console.time("clipping");var st,Re,$e,He,et,Mt,We=.5*ne.buffer/ne.extent,qt=.5-We,pr=.5+We,kt=1+We;st=Re=$e=He=null,et=Mr(N,qe,H-We,H+pr,0,ze.minX,ze.maxX,ne),Mt=Mr(N,qe,H+qt,H+kt,0,ze.minX,ze.maxX,ne),N=null,et&&(st=Mr(et,qe,$-We,$+pr,1,ze.minY,ze.maxY,ne),Re=Mr(et,qe,$+qt,$+kt,1,ze.minY,ze.maxY,ne),et=null),Mt&&($e=Mr(Mt,qe,$-We,$+pr,1,ze.minY,ze.maxY,ne),He=Mr(Mt,qe,$+qt,$+kt,1,ze.minY,ze.maxY,ne),Mt=null),ke>1&&console.timeEnd("clipping"),X.push(st||[],G+1,2*H,2*$),X.push(Re||[],G+1,2*H,2*$+1),X.push($e||[],G+1,2*H+1,2*$),X.push(He||[],G+1,2*H+1,2*$+1)}}},ei.prototype.getTile=function(N,G,H){var $=this.options,oe=$.extent,ve=$.debug;if(N<0||N>24)return null;var ge=1<<N,X=nn(N,G=(G%ge+ge)%ge,H);if(this.tiles[X])return to(this.tiles[X],oe);ve>1&&console.log("drilling down to z%d-%d-%d",N,G,H);for(var ne,ke=N,qe=G,Ze=H;!ne&&ke>0;)ke--,qe=Math.floor(qe/2),Ze=Math.floor(Ze/2),ne=this.tiles[nn(ke,qe,Ze)];return ne&&ne.source?(ve>1&&console.log("found parent tile z%d-%d-%d",ke,qe,Ze),ve>1&&console.time("drilling down"),this.splitTile(ne.source,ke,qe,Ze,N,G,H),ve>1&&console.timeEnd("drilling down"),this.tiles[X]?to(this.tiles[X],oe):null):null};var zn=function(N){function G(H,$,oe,ve){N.call(this,H,$,oe,Qn),ve&&(this.loadGeoJSON=ve)}return N&&(G.__proto__=N),(G.prototype=Object.create(N&&N.prototype)).constructor=G,G.prototype.loadData=function(H,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=$,this._pendingLoadDataParams=H,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},G.prototype._loadData=function(){var H=this;if(this._pendingCallback&&this._pendingLoadDataParams){var $=this._pendingCallback,oe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ve=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new a.RequestPerformance(oe.request);this.loadGeoJSON(oe,function(ge,X){if(ge||!X)return $(ge);if(typeof X!="object")return $(new Error("Input data given to '"+oe.source+"' is not a valid GeoJSON object."));(function ze(je,ot){var st,Re=je&&je.type;if(Re==="FeatureCollection")for(st=0;st<je.features.length;st++)ze(je.features[st],ot);else if(Re==="GeometryCollection")for(st=0;st<je.geometries.length;st++)ze(je.geometries[st],ot);else if(Re==="Feature")ze(je.geometry,ot);else if(Re==="Polygon")Ce(je.coordinates,ot);else if(Re==="MultiPolygon")for(st=0;st<je.coordinates.length;st++)Ce(je.coordinates[st],ot);return je})(X,!0);try{if(oe.filter){var ne=a.createExpression(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map(function(ze){return ze.key+": "+ze.message}).join(", "));var ke=X.features.filter(function(ze){return ne.value.evaluate({zoom:0},ze)});X={type:"FeatureCollection",features:ke}}H._geoJSONIndex=oe.cluster?new li(function(ze){var je=ze.superclusterOptions,ot=ze.clusterProperties;if(!ot||!je)return je;for(var st={},Re={},$e={accumulated:null,zoom:0},He={properties:null},et=Object.keys(ot),Mt=0,We=et;Mt<We.length;Mt+=1){var qt=We[Mt],pr=ot[qt],kt=pr[0],ir=a.createExpression(pr[1]),Vt=a.createExpression(typeof kt=="string"?[kt,["accumulated"],["get",qt]]:kt);st[qt]=ir.value,Re[qt]=Vt.value}return je.map=function(Fr){He.properties=Fr;for(var Ft={},_r=0,hr=et;_r<hr.length;_r+=1){var Ht=hr[_r];Ft[Ht]=st[Ht].evaluate($e,He)}return Ft},je.reduce=function(Fr,Ft){He.properties=Ft;for(var _r=0,hr=et;_r<hr.length;_r+=1){var Ht=hr[_r];$e.accumulated=Fr[Ht],Fr[Ht]=Re[Ht].evaluate($e,He)}},je}(oe)).load(X.features):function(ze,je){return new ei(ze,je)}(X,oe.geojsonVtOptions)}catch(ze){return $(ze)}H.loaded={};var qe={};if(ve){var Ze=ve.finish();Ze&&(qe.resourceTiming={},qe.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Ze)))}$(null,qe)})}},G.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},G.prototype.reloadTile=function(H,$){var oe=this.loaded;return oe&&oe[H.uid]?N.prototype.reloadTile.call(this,H,$):this.loadTile(H,$)},G.prototype.loadGeoJSON=function(H,$){if(H.request)a.getJSON(H.request,$);else{if(typeof H.data!="string")return $(new Error("Input data given to '"+H.source+"' is not a valid GeoJSON object."));try{return $(null,JSON.parse(H.data))}catch{return $(new Error("Input data given to '"+H.source+"' is not a valid GeoJSON object."))}}},G.prototype.removeSource=function(H,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()},G.prototype.getClusterExpansionZoom=function(H,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(H.clusterId))}catch(oe){$(oe)}},G.prototype.getClusterChildren=function(H,$){try{$(null,this._geoJSONIndex.getChildren(H.clusterId))}catch(oe){$(oe)}},G.prototype.getClusterLeaves=function(H,$){try{$(null,this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset))}catch(oe){$(oe)}},G}(ie),Wr=function(N){var G=this;this.self=N,this.actor=new a.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ie,geojson:zn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(H,$){if(G.workerSourceTypes[H])throw new Error('Worker source with name "'+H+'" already registered.');G.workerSourceTypes[H]=$},this.self.registerRTLTextPlugin=function(H){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=H.applyArabicShaping,a.plugin.processBidirectionalText=H.processBidirectionalText,a.plugin.processStyledBidirectionalText=H.processStyledBidirectionalText}};return Wr.prototype.setReferrer=function(N,G){this.referrer=G},Wr.prototype.setImages=function(N,G,H){for(var $ in this.availableImages[N]=G,this.workerSources[N]){var oe=this.workerSources[N][$];for(var ve in oe)oe[ve].availableImages=G}H()},Wr.prototype.setLayers=function(N,G,H){this.getLayerIndex(N).replace(G),H()},Wr.prototype.updateLayers=function(N,G,H){this.getLayerIndex(N).update(G.layers,G.removedIds),H()},Wr.prototype.loadTile=function(N,G,H){this.getWorkerSource(N,G.type,G.source).loadTile(G,H)},Wr.prototype.loadDEMTile=function(N,G,H){this.getDEMWorkerSource(N,G.source).loadTile(G,H)},Wr.prototype.reloadTile=function(N,G,H){this.getWorkerSource(N,G.type,G.source).reloadTile(G,H)},Wr.prototype.abortTile=function(N,G,H){this.getWorkerSource(N,G.type,G.source).abortTile(G,H)},Wr.prototype.removeTile=function(N,G,H){this.getWorkerSource(N,G.type,G.source).removeTile(G,H)},Wr.prototype.removeDEMTile=function(N,G){this.getDEMWorkerSource(N,G.source).removeTile(G)},Wr.prototype.removeSource=function(N,G,H){if(this.workerSources[N]&&this.workerSources[N][G.type]&&this.workerSources[N][G.type][G.source]){var $=this.workerSources[N][G.type][G.source];delete this.workerSources[N][G.type][G.source],$.removeSource!==void 0?$.removeSource(G,H):H()}},Wr.prototype.loadWorkerSource=function(N,G,H){try{this.self.importScripts(G.url),H()}catch($){H($.toString())}},Wr.prototype.syncRTLPluginState=function(N,G,H){try{a.plugin.setState(G);var $=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&$!=null){this.self.importScripts($);var oe=a.plugin.isParsed();H(oe?void 0:new Error("RTL Text Plugin failed to import scripts from "+$),oe)}}catch(ve){H(ve.toString())}},Wr.prototype.getAvailableImages=function(N){var G=this.availableImages[N];return G||(G=[]),G},Wr.prototype.getLayerIndex=function(N){var G=this.layerIndexes[N];return G||(G=this.layerIndexes[N]=new F),G},Wr.prototype.getWorkerSource=function(N,G,H){var $=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][G]||(this.workerSources[N][G]={}),this.workerSources[N][G][H]||(this.workerSources[N][G][H]=new this.workerSourceTypes[G]({send:function(oe,ve,ge){$.actor.send(oe,ve,ge,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][G][H]},Wr.prototype.getDEMWorkerSource=function(N,G){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][G]||(this.demWorkerSources[N][G]=new we),this.demWorkerSources[N][G]},Wr.prototype.enforceCacheSizeLimit=function(N,G){a.enforceCacheSizeLimit(G)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Wr(self)),Wr}),v(["./shared"],function(a){var P=a.createCommonjsModule(function(n){function s(m){return!o(m)}function o(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,z,B=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(B);try{z=new Worker(Z),k=!0}catch{k=!1}return z&&z.terminate(),URL.revokeObjectURL(Z),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var z=k.getContext("2d");if(!z)return!1;var B=z.getImageData(0,0,1,1);return B&&B.width===k.width}()?(c[E=m&&m.failIfMajorPerformanceCaveat]===void 0&&(c[E]=function(k){var z=function(Z){var Y=document.createElement("canvas"),J=Object.create(s.webGLContextAttributes);return J.failIfMajorPerformanceCaveat=Z,Y.probablySupportsContext?Y.probablySupportsContext("webgl",J)||Y.probablySupportsContext("experimental-webgl",J):Y.supportsContext?Y.supportsContext("webgl",J)||Y.supportsContext("experimental-webgl",J):Y.getContext("webgl",J)||Y.getContext("experimental-webgl",J)}(k);if(!z)return!1;var B=z.createShader(z.VERTEX_SHADER);return!(!B||z.isContextLost())&&(z.shaderSource(B,"void main() {}"),z.compileShader(B),z.getShaderParameter(B,z.COMPILE_STATUS)===!0)}(E)),c[E]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var E}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),A={create:function(n,s,o){var c=a.window.document.createElement(n);return s!==void 0&&(c.className=s),o&&o.appendChild(c),c},createNS:function(n,s){return a.window.document.createElementNS(n,s)}},F=a.window.document&&a.window.document.documentElement.style;function V(n){if(!F)return n[0];for(var s=0;s<n.length;s++)if(n[s]in F)return n[s];return n[0]}var j,U=V(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);A.disableDrag=function(){F&&U&&(j=F[U],F[U]="none")},A.enableDrag=function(){F&&U&&(F[U]=j)};var he=V(["transform","WebkitTransform"]);A.setTransform=function(n,s){n.style[he]=s};var ie=!1;try{var De=Object.defineProperty({},"passive",{get:function(){ie=!0}});a.window.addEventListener("test",De,De),a.window.removeEventListener("test",De,De)}catch{ie=!1}A.addEventListener=function(n,s,o,c){c===void 0&&(c={}),n.addEventListener(s,o,"passive"in c&&ie?c:c.capture)},A.removeEventListener=function(n,s,o,c){c===void 0&&(c={}),n.removeEventListener(s,o,"passive"in c&&ie?c:c.capture)};var we=function(n){n.preventDefault(),n.stopPropagation(),a.window.removeEventListener("click",we,!0)};function Ce(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}A.suppressClick=function(){a.window.addEventListener("click",we,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",we,!0)},0)},A.mousePos=function(n,s){var o=n.getBoundingClientRect();return new a.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},A.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),c=[],m=0;m<s.length;m++)c.push(new a.Point(s[m].clientX-o.left-n.clientLeft,s[m].clientY-o.top-n.clientTop));return c},A.mouseButton=function(n){return a.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},A.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Ue=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var c=0,m=this.requestors;c<m.length;c+=1){var E=m[c];this._notify(E.ids,E.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,c){this._validate(o,c)&&(this.images[o]=c)},s.prototype._validate=function(o,c){var m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),m=!1),this._validateContent(c.content,c)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(o,c){if(!o)return!0;for(var m=0,E=0,k=o;E<k.length;E+=1){var z=k[E];if(z[0]<m||z[1]<z[0]||c<z[1])return!1;m=z[1]}return!0},s.prototype._validateContent=function(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,c){var m=!0;if(!this.isLoaded())for(var E=0,k=o;E<k.length;E+=1)this.images[k[E]]||(m=!1);this.isLoaded()||m?this._notify(o,c):this.requestors.push({ids:o,callback:c})},s.prototype._notify=function(o,c){for(var m={},E=0,k=o;E<k.length;E+=1){var z=k[E];this.images[z]||this.fire(new a.Event("styleimagemissing",{id:z}));var B=this.images[z];B?m[z]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:a.warnOnce('Image "'+z+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,m)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var c=this.patterns[o],m=this.getImage(o);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{var E={w:m.data.width+2,h:m.data.height+2,x:0,y:0},k=new a.ImagePosition(E,m);this.patterns[o]={bin:E,position:k}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var c in this.patterns)o.push(this.patterns[c].bin);var m=a.potpack(o),E=m.w,k=m.h,z=this.atlasImage;for(var B in z.resize({width:E||1,height:k||1}),this.patterns){var Z=this.patterns[B].bin,Y=Z.x+1,J=Z.y+1,Q=this.images[B].data,ue=Q.width,le=Q.height;a.RGBAImage.copy(Q,z,{x:0,y:0},{x:Y,y:J},{width:ue,height:le}),a.RGBAImage.copy(Q,z,{x:0,y:le-1},{x:Y,y:J-1},{width:ue,height:1}),a.RGBAImage.copy(Q,z,{x:0,y:0},{x:Y,y:J+le},{width:ue,height:1}),a.RGBAImage.copy(Q,z,{x:ue-1,y:0},{x:Y-1,y:J},{width:1,height:le}),a.RGBAImage.copy(Q,z,{x:0,y:0},{x:Y+ue,y:J},{width:1,height:le})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var c=0,m=o;c<m.length;c+=1){var E=m[c];if(!this.callbackDispatchedThisFrame[E]){this.callbackDispatchedThisFrame[E]=!0;var k=this.images[E];Ce(k)&&this.updateImage(E,k)}}},s}(a.Evented),At=tt,Dt=tt,ht=1e20;function tt(n,s,o,c,m,E){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=m||"sans-serif",this.fontWeight=E||"normal",this.radius=o||8;var k=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=k,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.d=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Int16Array(k),this.middle=Math.round(k/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ar(n,s,o,c,m,E,k){for(var z=0;z<s;z++){for(var B=0;B<o;B++)c[B]=n[B*s+z];for(yr(c,m,E,k,o),B=0;B<o;B++)n[B*s+z]=m[B]}for(B=0;B<o;B++){for(z=0;z<s;z++)c[z]=n[B*s+z];for(yr(c,m,E,k,s),z=0;z<s;z++)n[B*s+z]=Math.sqrt(m[z])}}function yr(n,s,o,c,m){o[0]=0,c[0]=-ht,c[1]=+ht;for(var E=1,k=0;E<m;E++){for(var z=(n[E]+E*E-(n[o[k]]+o[k]*o[k]))/(2*E-2*o[k]);z<=c[k];)k--,z=(n[E]+E*E-(n[o[k]]+o[k]*o[k]))/(2*E-2*o[k]);o[++k]=E,c[k]=z,c[k+1]=+ht}for(E=0,k=0;E<m;E++){for(;c[k+1]<E;)k++;s[E]=(E-o[k])*(E-o[k])+n[o[k]]}}tt.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var m=s.data[4*c+3]/255;this.gridOuter[c]=m===1?0:m===0?ht:Math.pow(Math.max(0,.5-m),2),this.gridInner[c]=m===1?ht:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(Ar(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ar(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)o[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return o},At.default=Dt;var tr=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};tr.prototype.setURL=function(n){this.url=n},tr.prototype.getGlyphs=function(n,s){var o=this,c=[];for(var m in n)for(var E=0,k=n[m];E<k.length;E+=1)c.push({stack:m,id:k[E]});a.asyncAll(c,function(z,B){var Z=z.stack,Y=z.id,J=o.entries[Z];J||(J=o.entries[Z]={glyphs:{},requests:{},ranges:{}});var Q=J.glyphs[Y];if(Q===void 0){if(Q=o._tinySDF(J,Z,Y))return J.glyphs[Y]=Q,void B(null,{stack:Z,id:Y,glyph:Q});var ue=Math.floor(Y/256);if(256*ue>65535)B(new Error("glyphs > 65535 not supported"));else if(J.ranges[ue])B(null,{stack:Z,id:Y,glyph:Q});else{var le=J.requests[ue];le||(le=J.requests[ue]=[],tr.loadGlyphRange(Z,ue,o.url,o.requestManager,function(fe,ae){if(ae){for(var me in ae)o._doesCharSupportLocalGlyph(+me)||(J.glyphs[+me]=ae[+me]);J.ranges[ue]=!0}for(var xe=0,Ie=le;xe<Ie.length;xe+=1)(0,Ie[xe])(fe,ae);delete J.requests[ue]})),le.push(function(fe,ae){fe?B(fe):ae&&B(null,{stack:Z,id:Y,glyph:ae[Y]||null})})}}else B(null,{stack:Z,id:Y,glyph:Q})},function(z,B){if(z)s(z);else if(B){for(var Z={},Y=0,J=B;Y<J.length;Y+=1){var Q=J[Y],ue=Q.stack,le=Q.id,fe=Q.glyph;(Z[ue]||(Z[ue]={}))[le]=fe&&{id:fe.id,bitmap:fe.bitmap.clone(),metrics:fe.metrics}}s(null,Z)}})},tr.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](n)||a.isChar["Hangul Syllables"](n)||a.isChar.Hiragana(n)||a.isChar.Katakana(n))},tr.prototype._tinySDF=function(n,s,o){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(o)){var m=n.tinySDF;if(!m){var E="400";/bold/i.test(s)?E="900":/medium/i.test(s)?E="500":/light/i.test(s)&&(E="200"),m=n.tinySDF=new tr.TinySDF(24,3,8,.25,c,E)}return{id:o,bitmap:new a.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},tr.loadGlyphRange=function(n,s,o,c,m){var E=256*s,k=E+255,z=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",E+"-"+k),a.ResourceType.Glyphs);a.getArrayBuffer(z,function(B,Z){if(B)m(B);else if(Z){for(var Y={},J=0,Q=a.parseGlyphPBF(Z);J<Q.length;J+=1){var ue=Q[J];Y[ue.id]=ue}m(null,Y)}})},tr.TinySDF=At;var wt=function(){this.specification=a.styleSpec.light.position};wt.prototype.possiblyEvaluate=function(n,s){return a.sphericalToCartesian(n.expression.evaluate(s))},wt.prototype.interpolate=function(n,s,o){return{x:a.number(n.x,s.x,o),y:a.number(n.y,s.y,o),z:a.number(n.z,s.z,o)}};var bt=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new wt,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),kr=function(n){function s(o){n.call(this),this._transitionable=new a.Transitionable(bt),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,c){if(c===void 0&&(c={}),!this._validate(a.validateLight,o,c))for(var m in o){var E=o[m];a.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),E):this._transitionable.setValue(m,E)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,c,m){return(!m||m.validate!==!1)&&a.emitValidationErrors(this,o.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},s}(a.Evented),Rt=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Rt.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},Rt.prototype.getDashRanges=function(n,s,o){var c=[],m=n.length%2==1?-n[n.length-1]*o:0,E=n[0]*o,k=!0;c.push({left:m,right:E,isDash:k,zeroLength:n[0]===0});for(var z=n[0],B=1;B<n.length;B++){var Z=n[B];c.push({left:m=z*o,right:E=(z+=Z)*o,isDash:k=!k,zeroLength:Z===0})}return c},Rt.prototype.addRoundDash=function(n,s,o){for(var c=s/2,m=-o;m<=o;m++)for(var E=this.width*(this.nextRow+o+m),k=0,z=n[k],B=0;B<this.width;B++){B/z.right>1&&(z=n[++k]);var Z=Math.abs(B-z.left),Y=Math.abs(B-z.right),J=Math.min(Z,Y),Q=void 0,ue=m/o*(c+1);if(z.isDash){var le=c-Math.abs(ue);Q=Math.sqrt(J*J+le*le)}else Q=c-Math.sqrt(J*J+ue*ue);this.data[E+B]=Math.max(0,Math.min(255,Q+128))}},Rt.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],c=n[s+1];o.zeroLength?n.splice(s,1):c&&c.isDash===o.isDash&&(c.left=o.left,n.splice(s,1))}var m=n[0],E=n[n.length-1];m.isDash===E.isDash&&(m.left=E.left-this.width,E.right=m.right+this.width);for(var k=this.width*this.nextRow,z=0,B=n[z],Z=0;Z<this.width;Z++){Z/B.right>1&&(B=n[++z]);var Y=Math.abs(Z-B.left),J=Math.abs(Z-B.right),Q=Math.min(Y,J);this.data[k+Z]=Math.max(0,Math.min(255,(B.isDash?Q:-Q)+128))}},Rt.prototype.addDash=function(n,s){var o=s?7:0,c=2*o+1;if(this.nextRow+c>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var m=0,E=0;E<n.length;E++)m+=n[E];if(m!==0){var k=this.width/m,z=this.getDashRanges(n,this.width,k);s?this.addRoundDash(z,k,o):this.addRegularDash(z)}var B={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:m};return this.nextRow+=c,this.dirty=!0,B},Rt.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var zr=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var c=this.workerPool.acquire(this.id),m=0;m<c.length;m++){var E=new n.Actor(c[m],o,this.id);E.name="Worker "+m,this.actors.push(E)}};function Qe(n,s,o){var c=function(m,E){if(m)return o(m);if(E){var k=a.pick(a.extend(E,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(k.vectorLayers=E.vector_layers,k.vectorLayerIds=k.vectorLayers.map(function(z){return z.id})),k.tiles=s.canonicalizeTileset(k,n.url),o(null,k)}};return n.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),a.ResourceType.Source),c):a.browser.frame(function(){return c(null,n)})}zr.prototype.broadcast=function(n,s,o){a.asyncAll(this.actors,function(c,m){c.send(n,s,m)},o=o||function(){})},zr.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},zr.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},zr.Actor=a.Actor;var ar=function(n,s,o){this.bounds=a.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};ar.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},ar.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),E=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<m&&n.y>=c&&n.y<E};var $r=function(n){function s(o,c,m,E){if(n.call(this),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(c,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Qe(this._options,this.map._requestManager,function(c,m){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):m&&(a.extend(o,m),m.bounds&&(o.tileBounds=new ar(m.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(m.tiles,o.map._requestManager._customAccessToken),a.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var c=this;return this.setSourceProperty(function(){c._options.tiles=o}),this},s.prototype.setUrl=function(o){var c=this;return this.setSourceProperty(function(){c.url=o,c._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.loadTile=function(o,c){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(m,a.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function k(z,B){return delete o.request,o.aborted?c(null):z&&z.status!==404?c(z):(B&&B.resourceTiming&&(o.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&o.setExpiryData(B),o.loadVectorData(B,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",E,k.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",E,k.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(a.Evented),si=function(n){function s(o,c,m,E){n.call(this),this.id=o,this.dispatcher=m,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},c),a.extend(this,a.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Qe(this._options,this.map._requestManager,function(c,m){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):m&&(a.extend(o,m),m.bounds&&(o.tileBounds=new ar(m.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(m.tiles),a.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,c){var m=this,E=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=a.getImage(this.map._requestManager.transformRequest(E,a.ResourceType.Tile),function(k,z){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(k)o.state="errored",c(k);else if(z){m.map._refreshExpiredTiles&&o.setExpiryData(z),delete z.cacheControl,delete z.expires;var B=m.map.painter.context,Z=B.gl;o.texture=m.map.painter.getTileTexture(z.width),o.texture?o.texture.update(z,{useMipmap:!0}):(o.texture=new a.Texture(B,z,Z.RGBA,{useMipmap:!0}),o.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&Z.texParameterf(Z.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),o.state="loaded",a.cacheEntryPossiblyAdded(m.dispatcher),c(null)}})},s.prototype.abortTile=function(o,c){o.request&&(o.request.cancel(),delete o.request),c()},s.prototype.unloadTile=function(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()},s.prototype.hasTransition=function(){return!1},s}(a.Evented),wr=function(n){function s(o,c,m,E){n.call(this,o,c,m,E),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,c){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function E(k,z){k&&(o.state="errored",c(k)),z&&(o.dem=z,o.needsHillshadePrepare=!0,o.state="loaded",c(null))}o.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),function(k,z){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(k)o.state="errored",c(k);else if(z){this.map._refreshExpiredTiles&&o.setExpiryData(z),delete z.cacheControl,delete z.expires;var B=a.window.ImageBitmap&&z instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?z:a.browser.getImageData(z,1),Z={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:B,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",Z,E.bind(this)))}}.bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var c=o.canonical,m=Math.pow(2,c.z),E=(c.x-1+m)%m,k=c.x===0?o.wrap-1:o.wrap,z=(c.x+1+m)%m,B=c.x+1===m?o.wrap+1:o.wrap,Z={};return Z[new a.OverscaledTileID(o.overscaledZ,k,c.z,E,c.y).key]={backfilled:!1},Z[new a.OverscaledTileID(o.overscaledZ,B,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(Z[new a.OverscaledTileID(o.overscaledZ,k,c.z,E,c.y-1).key]={backfilled:!1},Z[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},Z[new a.OverscaledTileID(o.overscaledZ,B,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<m&&(Z[new a.OverscaledTileID(o.overscaledZ,k,c.z,E,c.y+1).key]={backfilled:!1},Z[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},Z[new a.OverscaledTileID(o.overscaledZ,B,c.z,z,c.y+1).key]={backfilled:!1}),Z},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(si),mt=function(n){function s(o,c,m,E){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(E),this._data=c.data,this._options=a.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var k=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*k,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*k,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.EXTENT,radius:(c.clusterRadius||50)*k,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)o.fire(new a.ErrorEvent(c));else{var m={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(m.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new a.Event("data",m))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var c=this;return this._data=o,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new a.ErrorEvent(m));else{var E={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(E.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new a.Event("data",E))}}),this},s.prototype.getClusterExpansionZoom=function(o,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},c),this},s.prototype.getClusterChildren=function(o,c){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},c),this},s.prototype.getClusterLeaves=function(o,c,m,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:c,offset:m},E),this},s.prototype._updateWorkerData=function(o){var c=this;this._loaded=!1;var m=a.extend({},this.workerOptions),E=this._data;typeof E=="string"?(m.request=this.map._requestManager.transformRequest(a.browser.resolveURL(E),a.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(E),this.actor.send(this.type+".loadData",m,function(k,z){c._removed||z&&z.abandoned||(c._loaded=!0,z&&z.resourceTiming&&z.resourceTiming[c.id]&&(c._resourceTiming=z.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:m.source},null),o(k))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,c){var m=this,E=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(E,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(k,z){return delete o.request,o.unloadVectorData(),o.aborted?c(null):k?c(k):(o.loadVectorData(z,m.map.painter,E==="reloadTile"),c(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(a.Evented),nt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),cr=function(n){function s(o,c,m,E){n.call(this),this.id=o,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,c){var m=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(E,k){m._loaded=!0,E?m.fire(new a.ErrorEvent(E)):k&&(m.image=k,o&&(m.coordinates=o),c&&c(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var c=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var c=this;this.coordinates=o;var m=o.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(k){for(var z=1/0,B=1/0,Z=-1/0,Y=-1/0,J=0,Q=k;J<Q.length;J+=1){var ue=Q[J];z=Math.min(z,ue.x),B=Math.min(B,ue.y),Z=Math.max(Z,ue.x),Y=Math.max(Y,ue.y)}var le=Math.max(Z-z,Y-B),fe=Math.max(0,Math.floor(-Math.log(le)/Math.LN2)),ae=Math.pow(2,fe);return new a.CanonicalTileID(fe,Math.floor((z+Z)/2*ae),Math.floor((B+Y)/2*ae))}(m),this.minzoom=this.maxzoom=this.tileID.z;var E=m.map(function(k){return c.tileID.getTilePoint(k)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(E[0].x,E[0].y,0,0),this._boundsArray.emplaceBack(E[1].x,E[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(E[3].x,E[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(E[2].x,E[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,c=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.loadTile=function(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(a.Evented),ji=function(n){function s(o,c,m,E){n.call(this,o,c,m,E),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var c=this.options;this.urls=[];for(var m=0,E=c.urls;m<E.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(E[m],a.ResourceType.Source).url);a.getVideo(this.urls,function(k,z){o._loaded=!0,k?o.fire(new a.ErrorEvent(k)):z&&(o.video=z,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,c=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(cr),la=function(n){function s(o,c,m,E){n.call(this,o,c,m,E),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(k){return!Array.isArray(k)||k.length!==2||k.some(function(z){return typeof z!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,m=c.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(c,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var k=this.tiles[E];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,c=[this.canvas.width,this.canvas.height];o<c.length;o+=1){var m=c[o];if(isNaN(m)||m<=0)return!0}return!1},s}(cr),Bi={vector:$r,raster:si,"raster-dem":wr,geojson:mt,video:ji,image:cr,canvas:la};function zi(n,s){var o=a.identity([]);return a.translate(o,o,[1,1,0]),a.scale(o,o,[.5*n.width,.5*n.height,1]),a.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function li(n,s,o,c,m,E){var k=function(fe,ae,me){if(fe)for(var xe=0,Ie=fe;xe<Ie.length;xe+=1){var Me=ae[Ie[xe]];if(Me&&Me.source===me&&Me.type==="fill-extrusion")return!0}else for(var Le in ae){var Oe=ae[Le];if(Oe.source===me&&Oe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),z=E.maxPitchScaleFactor(),B=n.tilesIn(c,z,k);B.sort(tn);for(var Z=[],Y=0,J=B;Y<J.length;Y+=1){var Q=J[Y];Z.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(s,o,n._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,m,E,z,zi(n.transform,Q.tileID))})}var ue=function(fe){for(var ae={},me={},xe=0,Ie=fe;xe<Ie.length;xe+=1){var Me=Ie[xe],Le=Me.queryResults,Oe=Me.wrappedTileID,Ge=me[Oe]=me[Oe]||{};for(var Je in Le)for(var Xe=Le[Je],ct=Ge[Je]=Ge[Je]||{},St=ae[Je]=ae[Je]||[],vt=0,_t=Xe;vt<_t.length;vt+=1){var sr=_t[vt];ct[sr.featureIndex]||(ct[sr.featureIndex]=!0,St.push(sr))}}return ae}(Z);for(var le in ue)ue[le].forEach(function(fe){var ae=fe.feature,me=n.getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=me});return ue}function tn(n,s){var o=n.tileID,c=s.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}var rr=function(n,s){this.max=n,this.onRemove=s,this.reset()};rr.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var c=o[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},rr.prototype.add=function(n,s,o){var c=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var E={value:s,timeout:void 0};if(o!==void 0&&(E.timeout=setTimeout(function(){c.remove(n,E)},o)),this.data[m].push(E),this.order.push(m),this.order.length>this.max){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},rr.prototype.has=function(n){return n.wrapped().key in this.data},rr.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},rr.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},rr.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},rr.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},rr.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,c=s===void 0?0:this.data[o].indexOf(s),m=this.data[o][c];return this.data[o].splice(c,1),m.timeout&&clearTimeout(m.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(m.value),this.order.splice(this.order.indexOf(o),1),this},rr.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},rr.prototype.filter=function(n){var s=[];for(var o in this.data)for(var c=0,m=this.data[o];c<m.length;c+=1){var E=m[c];n(E.value)||s.push(E)}for(var k=0,z=s;k<z.length;k+=1){var B=z[k];this.remove(B.value.tileID,B)}};var Oi=function(n,s,o){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=Boolean(o),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Oi.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Oi.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Oi.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Za={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ir=function(n,s,o,c){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Ir.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ir.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},Ir.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var c=s.attributes[this.attributes[o].name];c!==void 0&&n.enableVertexAttribArray(c)}},Ir.prototype.setVertexAttribPointers=function(n,s,o){for(var c=0;c<this.attributes.length;c++){var m=this.attributes[c],E=s.attributes[m.name];E!==void 0&&n.vertexAttribPointer(E,m.components,n[Za[m.type]],!1,this.itemSize,m.offset+this.itemSize*(o||0))}},Ir.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Bt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Bt.prototype.get=function(){return this.current},Bt.prototype.set=function(n){},Bt.prototype.getDefault=function(){return this.default},Bt.prototype.setDefault=function(){this.set(this.default)};var rn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Bt),mi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(Bt),Zr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(Bt),eo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Bt),Ut=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(Bt),yi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(Bt),Or=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(Bt),bi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(Bt),Gr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(Bt),Vr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Bt),xi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(Bt),wi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(Bt),Mr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}},s}(Bt),er=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Bt),Pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Bt),Yn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(Bt),jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}},s}(Bt),Vn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(Bt),Jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(Bt),vi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(Bt),Zi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(Bt),_n=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Bt),to=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(Bt),An=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Bt),is=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(Bt),bn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(Bt),Pi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(Bt),ei=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(Bt),nn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(Bt),Qn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(Bt),zn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(Bt),Wr=function(n){function s(o,c){n.call(this,o),this.context=o,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Bt),N=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(Wr),G=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Wr),H=function(n,s,o,c){this.context=n,this.width=s,this.height=o;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new N(n,m),c&&(this.depthAttachment=new G(n,m))};H.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var $=function(n,s,o){this.func=n,this.mask=s,this.range=o};$.ReadOnly=!1,$.ReadWrite=!0,$.disabled=new $(519,$.ReadOnly,[0,1]);var oe=function(n,s,o,c,m,E){this.test=n,this.ref=s,this.mask=o,this.fail=c,this.depthFail=m,this.pass=E};oe.disabled=new oe({func:519,mask:0},0,0,7680,7680,7680);var ve=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};ve.disabled=new ve(ve.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),ve.unblended=new ve(ve.Replace,a.Color.transparent,[!0,!0,!0,!0]),ve.alphaBlended=new ve([1,771],a.Color.transparent,[!0,!0,!0,!0]);var ge=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};ge.disabled=new ge(!1,1029,2305),ge.backCCW=new ge(!0,1029,2305);var X=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new rn(this),this.clearDepth=new mi(this),this.clearStencil=new Zr(this),this.colorMask=new eo(this),this.depthMask=new Ut(this),this.stencilMask=new yi(this),this.stencilFunc=new Or(this),this.stencilOp=new bi(this),this.stencilTest=new Gr(this),this.depthRange=new Vr(this),this.depthTest=new xi(this),this.depthFunc=new wi(this),this.blend=new Mr(this),this.blendFunc=new er(this),this.blendColor=new Pr(this),this.blendEquation=new Yn(this),this.cullFace=new jn(this),this.cullFaceSide=new Vn(this),this.frontFace=new Jn(this),this.program=new vi(this),this.activeTexture=new Zi(this),this.viewport=new _n(this),this.bindFramebuffer=new to(this),this.bindRenderbuffer=new An(this),this.bindTexture=new is(this),this.bindVertexBuffer=new bn(this),this.bindElementBuffer=new Pi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ei(this),this.pixelStoreUnpack=new nn(this),this.pixelStoreUnpackPremultiplyAlpha=new Qn(this),this.pixelStoreUnpackFlipY=new zn(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};X.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},X.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},X.prototype.createIndexBuffer=function(n,s){return new Oi(this,n,s)},X.prototype.createVertexBuffer=function(n,s,o){return new Ir(this,n,s,o)},X.prototype.createRenderbuffer=function(n,s,o){var c=this.gl,m=c.createRenderbuffer();return this.bindRenderbuffer.set(m),c.renderbufferStorage(c.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),m},X.prototype.createFramebuffer=function(n,s,o){return new H(this,n,s,o)},X.prototype.clear=function(n){var s=n.color,o=n.depth,c=this.gl,m=0;s&&(m|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(m|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c.clear(m)},X.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},X.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},X.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},X.prototype.setColorMode=function(n){a.deepEqual(n.blendFunction,ve.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},X.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ne=function(n){function s(o,c,m){var E=this;n.call(this),this.id=o,this.dispatcher=m,this.on("data",function(k){k.dataType==="source"&&k.sourceDataType==="metadata"&&(E._sourceLoaded=!0),E._sourceLoaded&&!E._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(E.reload(),E.transform&&E.update(E.transform))}),this.on("error",function(){E._sourceErrored=!0}),this._source=function(k,z,B,Z){var Y=new Bi[z.type](k,z,B,Z);if(Y.id!==k)throw new Error("Expected Source id to be "+k+" instead of "+Y.id);return a.bindAll(["load","abort","unload","serialize","prepare"],Y),Y}(o,c,m,this),this._tiles={},this._cache=new rr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,c){return this._source.loadTile(o,c)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[c];m.upload(o),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return a.values(this._tiles).map(function(o){return o.tileID}).sort(ke).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var c=this,m=[];for(var E in this._tiles)this._isIdRenderable(E,o)&&m.push(this._tiles[E]);return o?m.sort(function(k,z){var B=k.tileID,Z=z.tileID,Y=new a.Point(B.canonical.x,B.canonical.y)._rotate(c.transform.angle),J=new a.Point(Z.canonical.x,Z.canonical.y)._rotate(c.transform.angle);return B.overscaledZ-Z.overscaledZ||J.y-Y.y||J.x-Y.x}).map(function(k){return k.tileID.key}):m.map(function(k){return k.tileID}).sort(ke).map(function(k){return k.key})},s.prototype.hasRenderableParent=function(o){var c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,c){var m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,o,c)))},s.prototype._tileLoaded=function(o,c,m,E){if(E)return o.state="errored",void(E.status!==404?this._source.fire(new a.ErrorEvent(E,{tile:o})):this.update(this.transform));o.timeAdded=a.browser.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var c=this.getRenderableIds(),m=0;m<c.length;m++){var E=c[m];if(o.neighboringTiles&&o.neighboringTiles[E]){var k=this.getTileByID(E);z(o,k),z(k,o)}}function z(B,Z){B.needsHillshadePrepare=!0;var Y=Z.tileID.canonical.x-B.tileID.canonical.x,J=Z.tileID.canonical.y-B.tileID.canonical.y,Q=Math.pow(2,B.tileID.canonical.z),ue=Z.tileID.key;Y===0&&J===0||Math.abs(J)>1||(Math.abs(Y)>1&&(Math.abs(Y+Q)===1?Y+=Q:Math.abs(Y-Q)===1&&(Y-=Q)),Z.dem&&B.dem&&(B.dem.backfillBorder(Z.dem,Y,J),B.neighboringTiles&&B.neighboringTiles[ue]&&(B.neighboringTiles[ue].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,c,m,E){for(var k in this._tiles){var z=this._tiles[k];if(!(E[k]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>m)){for(var B=z.tileID;z&&z.tileID.overscaledZ>c+1;){var Z=z.tileID.scaledTo(z.tileID.overscaledZ-1);(z=this._tiles[Z.key])&&z.hasData()&&(B=Z)}for(var Y=B;Y.overscaledZ>c;)if(o[(Y=Y.scaledTo(Y.overscaledZ-1)).key]){E[B.key]=B;break}}}},s.prototype.findLoadedParent=function(o,c){if(o.key in this._loadedParentTiles){var m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=c?m:null}for(var E=o.overscaledZ-1;E>=c;E--){var k=o.scaledTo(E),z=this._getLoadedTile(k);if(z)return z}},s.prototype._getLoadedTile=function(o){var c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var c=Math.ceil(o.width/this._source.tileSize)+1,m=Math.ceil(o.height/this._source.tileSize)+1,E=Math.floor(c*m*5),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(k)},s.prototype.handleWrapJump=function(o){var c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){var m={};for(var E in this._tiles){var k=this._tiles[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),m[k.tileID.key]=k}for(var z in this._tiles=m,this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(var B in this._tiles)this._setTileReloadTimer(B,this._tiles[B])}},s.prototype.update=function(o){var c=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ge){return new a.OverscaledTileID(Ge.canonical.z,Ge.wrap,Ge.canonical.z,Ge.canonical.x,Ge.canonical.y)}):(m=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ge){return c._source.hasTile(Ge)}))):m=[];var E=o.coveringZoomLevel(this._source),k=Math.max(E-s.maxOverzooming,this._source.minzoom),z=Math.max(E+s.maxUnderzooming,this._source.minzoom),B=this._updateRetainedTiles(m,E);if(qe(this._source.type)){for(var Z={},Y={},J=0,Q=Object.keys(B);J<Q.length;J+=1){var ue=Q[J],le=B[ue],fe=this._tiles[ue];if(fe&&!(fe.fadeEndTime&&fe.fadeEndTime<=a.browser.now())){var ae=this.findLoadedParent(le,k);ae&&(this._addTile(ae.tileID),Z[ae.tileID.key]=ae.tileID),Y[ue]=le}}for(var me in this._retainLoadedChildren(Y,E,z,B),Z)B[me]||(this._coveredTiles[me]=!0,B[me]=Z[me])}for(var xe in B)this._tiles[xe].clearFadeHold();for(var Ie=0,Me=a.keysDifference(this._tiles,B);Ie<Me.length;Ie+=1){var Le=Me[Ie],Oe=this._tiles[Le];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(Le)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,c){for(var m={},E={},k=Math.max(c-s.maxOverzooming,this._source.minzoom),z=Math.max(c+s.maxUnderzooming,this._source.minzoom),B={},Z=0,Y=o;Z<Y.length;Z+=1){var J=Y[Z],Q=this._addTile(J);m[J.key]=J,Q.hasData()||c<this._source.maxzoom&&(B[J.key]=J)}this._retainLoadedChildren(B,c,z,m);for(var ue=0,le=o;ue<le.length;ue+=1){var fe=le[ue],ae=this._tiles[fe.key];if(!ae.hasData()){if(c+1>this._source.maxzoom){var me=fe.children(this._source.maxzoom)[0],xe=this.getTile(me);if(xe&&xe.hasData()){m[me.key]=me;continue}}else{var Ie=fe.children(this._source.maxzoom);if(m[Ie[0].key]&&m[Ie[1].key]&&m[Ie[2].key]&&m[Ie[3].key])continue}for(var Me=ae.wasRequested(),Le=fe.overscaledZ-1;Le>=k;--Le){var Oe=fe.scaledTo(Le);if(E[Oe.key]||(E[Oe.key]=!0,!(ae=this.getTile(Oe))&&Me&&(ae=this._addTile(Oe)),ae&&(m[Oe.key]=Oe,Me=ae.wasRequested(),ae.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var c=[],m=void 0,E=this._tiles[o].tileID;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){m=this._loadedParentTiles[E.key];break}c.push(E.key);var k=E.scaledTo(E.overscaledZ-1);if(m=this._getLoadedTile(k))break;E=k}for(var z=0,B=c;z<B.length;z+=1)this._loadedParentTiles[B[z]]=m}},s.prototype._addTile=function(o){var c=this._tiles[o.key];if(c)return c;(c=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));var m=Boolean(c);return m||(c=new a.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))),c?(c.uses++,this._tiles[o.key]=c,m||this._source.fire(new a.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(o,c){var m=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var E=c.getExpiryTimeout();E&&(this._timers[o]=setTimeout(function(){m._reloadTile(o,"expired"),delete m._timers[o]},E))},s.prototype._removeTile=function(o){var c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,c,m){var E=this,k=[],z=this.transform;if(!z)return k;for(var B=m?z.getCameraQueryGeometry(o):o,Z=o.map(function(Le){return z.pointCoordinate(Le)}),Y=B.map(function(Le){return z.pointCoordinate(Le)}),J=this.getIds(),Q=1/0,ue=1/0,le=-1/0,fe=-1/0,ae=0,me=Y;ae<me.length;ae+=1){var xe=me[ae];Q=Math.min(Q,xe.x),ue=Math.min(ue,xe.y),le=Math.max(le,xe.x),fe=Math.max(fe,xe.y)}for(var Ie=function(Le){var Oe=E._tiles[J[Le]];if(!Oe.holdingForFade()){var Ge=Oe.tileID,Je=Math.pow(2,z.zoom-Oe.tileID.overscaledZ),Xe=c*Oe.queryPadding*a.EXTENT/Oe.tileSize/Je,ct=[Ge.getTilePoint(new a.MercatorCoordinate(Q,ue)),Ge.getTilePoint(new a.MercatorCoordinate(le,fe))];if(ct[0].x-Xe<a.EXTENT&&ct[0].y-Xe<a.EXTENT&&ct[1].x+Xe>=0&&ct[1].y+Xe>=0){var St=Z.map(function(_t){return Ge.getTilePoint(_t)}),vt=Y.map(function(_t){return Ge.getTilePoint(_t)});k.push({tile:Oe,tileID:Ge,queryGeometry:St,cameraQueryGeometry:vt,scale:Je})}}},Me=0;Me<J.length;Me++)Ie(Me);return k},s.prototype.getVisibleCoordinates=function(o){for(var c=this,m=this.getRenderableIds(o).map(function(B){return c._tiles[B].tileID}),E=0,k=m;E<k.length;E+=1){var z=k[E];z.posMatrix=this.transform.calculatePosMatrix(z.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(qe(this._source.type))for(var o in this._tiles){var c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=a.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,c,m){this._state.updateState(o=o||"_geojsonTileLayer",c,m)},s.prototype.removeFeatureState=function(o,c,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,m)},s.prototype.getFeatureState=function(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(o,c,m){var E=this._tiles[o];E&&E.setDependencies(c,m)},s.prototype.reloadTilesForDependencies=function(o,c){for(var m in this._tiles)this._tiles[m].hasDependency(o,c)&&this._reloadTile(m,"reloading");this._cache.filter(function(E){return!E.hasDependency(o,c)})},s}(a.Evented);function ke(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function qe(n){return n==="raster"||n==="image"||n==="video"}function Ze(){return new a.window.Worker(Xc.workerUrl)}ne.maxOverzooming=10,ne.maxUnderzooming=3;var ze="mapboxgl_preloaded_worker_pool",je=function(){this.active={}};je.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<je.workerCount;)this.workers.push(new Ze);return this.active[n]=!0,this.workers.slice()},je.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},je.prototype.isPreloaded=function(){return!!this.active[ze]},je.prototype.numActive=function(){return Object.keys(this.active).length};var ot,st=Math.floor(a.browser.hardwareConcurrency/2);function Re(){return ot||(ot=new je),ot}function $e(n,s){var o={};for(var c in n)c!=="ref"&&(o[c]=n[c]);return a.refProperties.forEach(function(m){m in s&&(o[m]=s[m])}),o}function He(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=$e(n[c],s[n[c].ref]));return n}je.workerCount=Math.max(Math.min(st,6),1);var et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mt(n,s,o){o.push({command:et.addSource,args:[n,s[n]]})}function We(n,s,o){s.push({command:et.removeSource,args:[n]}),o[n]=!0}function qt(n,s,o,c){We(n,o,c),Mt(n,s,o)}function pr(n,s,o){var c;for(c in n[o])if(n[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;for(c in s[o])if(s[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;return!0}function kt(n,s,o,c,m,E){var k;for(k in s=s||{},n=n||{})n.hasOwnProperty(k)&&(a.deepEqual(n[k],s[k])||o.push({command:E,args:[c,k,s[k],m]}));for(k in s)s.hasOwnProperty(k)&&!n.hasOwnProperty(k)&&(a.deepEqual(n[k],s[k])||o.push({command:E,args:[c,k,s[k],m]}))}function ir(n){return n.id}function Vt(n,s){return n[s.id]=s,n}var Fr=function(n,s){this.reset(n,s)};Fr.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Fr.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=a.clamp(n,0,1);for(var s=1,o=this._distances[s],c=n*this.paddedLength+this.padding;o<c&&s<this._distances.length;)o=this._distances[++s];var m=s-1,E=this._distances[m],k=o-E,z=k>0?(c-E)/k:0;return this.points[m].mult(1-z).add(this.points[s].mult(z))};var Ft=function(n,s,o){var c=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var E=0;E<this.xCellCount*this.yCellCount;E++)c.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function _r(n,s,o,c,m){var E=a.create();return s?(a.scale(E,E,[1/m,1/m,1]),o||a.rotateZ(E,E,c.angle)):a.multiply(E,c.labelPlaneMatrix,n),E}function hr(n,s,o,c,m){if(s){var E=a.clone(n);return a.scale(E,E,[m,m,1]),o||a.rotateZ(E,E,-c.angle),E}return c.glCoordMatrix}function Ht(n,s){var o=[n.x,n.y,0,1];Yr(o,o,s);var c=o[3];return{point:new a.Point(o[0]/c,o[1]/c),signedDistanceFromCamera:c}}function lr(n,s){return .5+n/s*.5}function gi(n,s){var o=n[0]/n[3],c=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&c>=-s[1]&&c<=s[1]}function Pn(n,s,o,c,m,E,k,z){var B=c?n.textSizeData:n.iconSizeData,Z=a.evaluateSizeForZoom(B,o.transform.zoom),Y=[256/o.width*2+1,256/o.height*2+1],J=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;J.clear();for(var Q=n.lineVertexArray,ue=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,le=o.transform.width/o.transform.height,fe=!1,ae=0;ae<ue.length;ae++){var me=ue.get(ae);if(me.hidden||me.writingMode===a.WritingMode.vertical&&!fe)sn(me.numGlyphs,J);else{fe=!1;var xe=[me.anchorX,me.anchorY,0,1];if(a.transformMat4(xe,xe,s),gi(xe,Y)){var Ie=lr(o.transform.cameraToCenterDistance,xe[3]),Me=a.evaluateSizeForFeature(B,Z,me),Le=k?Me/Ie:Me*Ie,Oe=new a.Point(me.anchorX,me.anchorY),Ge=Ht(Oe,m).point,Je={},Xe=an(me,Le,!1,z,s,m,E,n.glyphOffsetArray,Q,J,Ge,Oe,Je,le);fe=Xe.useVertical,(Xe.notEnoughRoom||fe||Xe.needsFlipping&&an(me,Le,!0,z,s,m,E,n.glyphOffsetArray,Q,J,Ge,Oe,Je,le).notEnoughRoom)&&sn(me.numGlyphs,J)}else sn(me.numGlyphs,J)}}c?n.text.dynamicLayoutVertexBuffer.updateData(J):n.icon.dynamicLayoutVertexBuffer.updateData(J)}function Ei(n,s,o,c,m,E,k,z,B,Z,Y){var J=z.glyphStartIndex+z.numGlyphs,Q=z.lineStartIndex,ue=z.lineStartIndex+z.lineLength,le=s.getoffsetX(z.glyphStartIndex),fe=s.getoffsetX(J-1),ae=br(n*le,o,c,m,E,k,z.segment,Q,ue,B,Z,Y);if(!ae)return null;var me=br(n*fe,o,c,m,E,k,z.segment,Q,ue,B,Z,Y);return me?{first:ae,last:me}:null}function Si(n,s,o,c){return n===a.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*c?{useVertical:!0}:(n===a.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function an(n,s,o,c,m,E,k,z,B,Z,Y,J,Q,ue){var le,fe=s/24,ae=n.lineOffsetX*fe,me=n.lineOffsetY*fe;if(n.numGlyphs>1){var xe=n.glyphStartIndex+n.numGlyphs,Ie=n.lineStartIndex,Me=n.lineStartIndex+n.lineLength,Le=Ei(fe,z,ae,me,o,Y,J,n,B,E,Q);if(!Le)return{notEnoughRoom:!0};var Oe=Ht(Le.first.point,k).point,Ge=Ht(Le.last.point,k).point;if(c&&!o){var Je=Si(n.writingMode,Oe,Ge,ue);if(Je)return Je}le=[Le.first];for(var Xe=n.glyphStartIndex+1;Xe<xe-1;Xe++)le.push(br(fe*z.getoffsetX(Xe),ae,me,o,Y,J,n.segment,Ie,Me,B,E,Q));le.push(Le.last)}else{if(c&&!o){var ct=Ht(J,m).point,St=n.lineStartIndex+n.segment+1,vt=new a.Point(B.getx(St),B.gety(St)),_t=Ht(vt,m),sr=_t.signedDistanceFromCamera>0?_t.point:on(J,vt,ct,1,m),lt=Si(n.writingMode,ct,sr,ue);if(lt)return lt}var Nt=br(fe*z.getoffsetX(n.glyphStartIndex),ae,me,o,Y,J,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,B,E,Q);if(!Nt)return{notEnoughRoom:!0};le=[Nt]}for(var Gt=0,jt=le;Gt<jt.length;Gt+=1){var Ot=jt[Gt];a.addDynamicAttributes(Z,Ot.point,Ot.angle)}return{}}function on(n,s,o,c,m){var E=Ht(n.add(n.sub(s)._unit()),m).point,k=o.sub(E);return o.add(k._mult(c/k.mag()))}function br(n,s,o,c,m,E,k,z,B,Z,Y,J){var Q=c?n-s:n+s,ue=Q>0?1:-1,le=0;c&&(ue*=-1,le=Math.PI),ue<0&&(le+=Math.PI);for(var fe=ue>0?z+k:z+k+1,ae=m,me=m,xe=0,Ie=0,Me=Math.abs(Q),Le=[];xe+Ie<=Me;){if((fe+=ue)<z||fe>=B)return null;if(me=ae,Le.push(ae),(ae=J[fe])===void 0){var Oe=new a.Point(Z.getx(fe),Z.gety(fe)),Ge=Ht(Oe,Y);if(Ge.signedDistanceFromCamera>0)ae=J[fe]=Ge.point;else{var Je=fe-ue;ae=on(xe===0?E:new a.Point(Z.getx(Je),Z.gety(Je)),Oe,me,Me-xe+1,Y)}}xe+=Ie,Ie=me.dist(ae)}var Xe=(Me-xe)/Ie,ct=ae.sub(me),St=ct.mult(Xe)._add(me);St._add(ct._unit()._perp()._mult(o*ue));var vt=le+Math.atan2(ae.y-me.y,ae.x-me.x);return Le.push(St),{point:St,angle:vt,path:Le}}Ft.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ft.prototype.insert=function(n,s,o,c,m){this._forEachCell(s,o,c,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(m)},Ft.prototype.insertCircle=function(n,s,o,c){this._forEachCell(s-c,o-c,s+c,o+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(c)},Ft.prototype._insertBoxCell=function(n,s,o,c,m,E){this.boxCells[m].push(E)},Ft.prototype._insertCircleCell=function(n,s,o,c,m,E){this.circleCells[m].push(E)},Ft.prototype._query=function(n,s,o,c,m,E){if(o<0||n>this.width||c<0||s>this.height)return!m&&[];var k=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=c){if(m)return!0;for(var z=0;z<this.boxKeys.length;z++)k.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(var B=0;B<this.circleKeys.length;B++){var Z=this.circles[3*B],Y=this.circles[3*B+1],J=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:Z-J,y1:Y-J,x2:Z+J,y2:Y+J})}return E?k.filter(E):k}return this._forEachCell(n,s,o,c,this._queryCell,k,{hitTest:m,seenUids:{box:{},circle:{}}},E),m?k.length>0:k},Ft.prototype._queryCircle=function(n,s,o,c,m){var E=n-o,k=n+o,z=s-o,B=s+o;if(k<0||E>this.width||B<0||z>this.height)return!c&&[];var Z=[];return this._forEachCell(E,z,k,B,this._queryCellCircle,Z,{hitTest:c,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},m),c?Z.length>0:Z},Ft.prototype.query=function(n,s,o,c,m){return this._query(n,s,o,c,!1,m)},Ft.prototype.hitTest=function(n,s,o,c,m){return this._query(n,s,o,c,!0,m)},Ft.prototype.hitTestCircle=function(n,s,o,c){return this._queryCircle(n,s,o,!0,c)},Ft.prototype._queryCell=function(n,s,o,c,m,E,k,z){var B=k.seenUids,Z=this.boxCells[m];if(Z!==null)for(var Y=this.bboxes,J=0,Q=Z;J<Q.length;J+=1){var ue=Q[J];if(!B.box[ue]){B.box[ue]=!0;var le=4*ue;if(n<=Y[le+2]&&s<=Y[le+3]&&o>=Y[le+0]&&c>=Y[le+1]&&(!z||z(this.boxKeys[ue]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ue],x1:Y[le],y1:Y[le+1],x2:Y[le+2],y2:Y[le+3]})}}}var fe=this.circleCells[m];if(fe!==null)for(var ae=this.circles,me=0,xe=fe;me<xe.length;me+=1){var Ie=xe[me];if(!B.circle[Ie]){B.circle[Ie]=!0;var Me=3*Ie;if(this._circleAndRectCollide(ae[Me],ae[Me+1],ae[Me+2],n,s,o,c)&&(!z||z(this.circleKeys[Ie]))){if(k.hitTest)return E.push(!0),!0;var Le=ae[Me],Oe=ae[Me+1],Ge=ae[Me+2];E.push({key:this.circleKeys[Ie],x1:Le-Ge,y1:Oe-Ge,x2:Le+Ge,y2:Oe+Ge})}}}},Ft.prototype._queryCellCircle=function(n,s,o,c,m,E,k,z){var B=k.circle,Z=k.seenUids,Y=this.boxCells[m];if(Y!==null)for(var J=this.bboxes,Q=0,ue=Y;Q<ue.length;Q+=1){var le=ue[Q];if(!Z.box[le]){Z.box[le]=!0;var fe=4*le;if(this._circleAndRectCollide(B.x,B.y,B.radius,J[fe+0],J[fe+1],J[fe+2],J[fe+3])&&(!z||z(this.boxKeys[le])))return E.push(!0),!0}}var ae=this.circleCells[m];if(ae!==null)for(var me=this.circles,xe=0,Ie=ae;xe<Ie.length;xe+=1){var Me=Ie[xe];if(!Z.circle[Me]){Z.circle[Me]=!0;var Le=3*Me;if(this._circlesCollide(me[Le],me[Le+1],me[Le+2],B.x,B.y,B.radius)&&(!z||z(this.circleKeys[Me])))return E.push(!0),!0}}},Ft.prototype._forEachCell=function(n,s,o,c,m,E,k,z){for(var B=this._convertToXCellCoord(n),Z=this._convertToYCellCoord(s),Y=this._convertToXCellCoord(o),J=this._convertToYCellCoord(c),Q=B;Q<=Y;Q++)for(var ue=Z;ue<=J;ue++)if(m.call(this,n,s,o,c,this.xCellCount*ue+Q,E,k,z))return},Ft.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},Ft.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},Ft.prototype._circlesCollide=function(n,s,o,c,m,E){var k=c-n,z=m-s,B=o+E;return B*B>k*k+z*z},Ft.prototype._circleAndRectCollide=function(n,s,o,c,m,E,k){var z=(E-c)/2,B=Math.abs(n-(c+z));if(B>z+o)return!1;var Z=(k-m)/2,Y=Math.abs(s-(m+Z));if(Y>Z+o)return!1;if(B<=z||Y<=Z)return!0;var J=B-z,Q=Y-Z;return J*J+Q*Q<=o*o};var Gi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function sn(n,s){for(var o=0;o<n;o++){var c=s.length;s.resize(c+4),s.float32.set(Gi,3*c)}}function Yr(n,s,o){var c=s[0],m=s[1];return n[0]=o[0]*c+o[4]*m+o[12],n[1]=o[1]*c+o[5]*m+o[13],n[3]=o[3]*c+o[7]*m+o[15],n}var ln=function(n,s,o){s===void 0&&(s=new Ft(n.width+200,n.height+200,25)),o===void 0&&(o=new Ft(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function Er(n,s,o){return s*(a.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}ln.prototype.placeCollisionBox=function(n,s,o,c,m){var E=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),k=o*E.perspectiveRatio,z=n.x1*k+E.point.x,B=n.y1*k+E.point.y,Z=n.x2*k+E.point.x,Y=n.y2*k+E.point.y;return!this.isInsideGrid(z,B,Z,Y)||!s&&this.grid.hitTest(z,B,Z,Y,m)?{box:[],offscreen:!1}:{box:[z,B,Z,Y],offscreen:this.isOffscreen(z,B,Z,Y)}},ln.prototype.placeCollisionCircles=function(n,s,o,c,m,E,k,z,B,Z,Y,J,Q){var ue=[],le=new a.Point(s.anchorX,s.anchorY),fe=Ht(le,E),ae=lr(this.transform.cameraToCenterDistance,fe.signedDistanceFromCamera),me=(Z?m/ae:m*ae)/a.ONE_EM,xe=Ht(le,k).point,Ie=Ei(me,c,s.lineOffsetX*me,s.lineOffsetY*me,!1,xe,le,s,o,k,{}),Me=!1,Le=!1,Oe=!0;if(Ie){for(var Ge=.5*J*ae+Q,Je=new a.Point(-100,-100),Xe=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),ct=new Fr,St=Ie.first,vt=Ie.last,_t=[],sr=St.path.length-1;sr>=1;sr--)_t.push(St.path[sr]);for(var lt=1;lt<vt.path.length;lt++)_t.push(vt.path[lt]);var Nt=2.5*Ge;if(z){var Gt=_t.map(function(Ps){return Ht(Ps,z)});_t=Gt.some(function(Ps){return Ps.signedDistanceFromCamera<=0})?[]:Gt.map(function(Ps){return Ps.point})}var jt=[];if(_t.length>0){for(var Ot=_t[0].clone(),Zt=_t[0].clone(),Ct=1;Ct<_t.length;Ct++)Ot.x=Math.min(Ot.x,_t[Ct].x),Ot.y=Math.min(Ot.y,_t[Ct].y),Zt.x=Math.max(Zt.x,_t[Ct].x),Zt.y=Math.max(Zt.y,_t[Ct].y);jt=Ot.x>=Je.x&&Zt.x<=Xe.x&&Ot.y>=Je.y&&Zt.y<=Xe.y?[_t]:Zt.x<Je.x||Ot.x>Xe.x||Zt.y<Je.y||Ot.y>Xe.y?[]:a.clipLine([_t],Je.x,Je.y,Xe.x,Xe.y)}for(var Lt=0,pn=jt;Lt<pn.length;Lt+=1){var Ui;ct.reset(pn[Lt],.25*Ge),Ui=ct.length<=.5*Ge?1:Math.ceil(ct.paddedLength/Nt)+1;for(var Ia=0;Ia<Ui;Ia++){var na=Ia/Math.max(Ui-1,1),pi=ct.lerp(na),En=pi.x+100,qn=pi.y+100;ue.push(En,qn,Ge,0);var Qi=En-Ge,fo=qn-Ge,Wa=En+Ge,Ya=qn+Ge;if(Oe=Oe&&this.isOffscreen(Qi,fo,Wa,Ya),Le=Le||this.isInsideGrid(Qi,fo,Wa,Ya),!n&&this.grid.hitTestCircle(En,qn,Ge,Y)&&(Me=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Me}}}}return{circles:!B&&Me||!Le?[]:ue,offscreen:Oe,collisionDetected:Me}},ln.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,c=1/0,m=-1/0,E=-1/0,k=0,z=n;k<z.length;k+=1){var B=z[k],Z=new a.Point(B.x+100,B.y+100);o=Math.min(o,Z.x),c=Math.min(c,Z.y),m=Math.max(m,Z.x),E=Math.max(E,Z.y),s.push(Z)}for(var Y={},J={},Q=0,ue=this.grid.query(o,c,m,E).concat(this.ignoredGrid.query(o,c,m,E));Q<ue.length;Q+=1){var le=ue[Q],fe=le.key;if(Y[fe.bucketInstanceId]===void 0&&(Y[fe.bucketInstanceId]={}),!Y[fe.bucketInstanceId][fe.featureIndex]){var ae=[new a.Point(le.x1,le.y1),new a.Point(le.x2,le.y1),new a.Point(le.x2,le.y2),new a.Point(le.x1,le.y2)];a.polygonIntersectsPolygon(s,ae)&&(Y[fe.bucketInstanceId][fe.featureIndex]=!0,J[fe.bucketInstanceId]===void 0&&(J[fe.bucketInstanceId]=[]),J[fe.bucketInstanceId].push(fe.featureIndex))}}return J},ln.prototype.insertCollisionBox=function(n,s,o,c,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:c,collisionGroupID:m},n[0],n[1],n[2],n[3])},ln.prototype.insertCollisionCircles=function(n,s,o,c,m){for(var E=s?this.ignoredGrid:this.grid,k={bucketInstanceId:o,featureIndex:c,collisionGroupID:m},z=0;z<n.length;z+=4)E.insertCircle(k,n[z],n[z+1],n[z+2])},ln.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var c=[s,o,0,1];return Yr(c,c,n),{point:new a.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},ln.prototype.isOffscreen=function(n,s,o,c){return o<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},ln.prototype.isInsideGrid=function(n,s,o,c){return o>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},ln.prototype.getViewportMatrix=function(){var n=a.identity([]);return a.translate(n,n,[-100,-100,0]),n};var ui=function(n,s,o,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&o?1:0,this.placed=o};ui.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Vi=function(n,s,o,c,m){this.text=new ui(n?n.text:null,s,o,m),this.icon=new ui(n?n.icon:null,s,c,m)};Vi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ys=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Ki=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},$n=function(n,s,o,c,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=c,this.tileID=m},ti=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Jr(n,s,o,c,m){var E=a.getAnchorAlignment(n),k=-(E.horizontalAlign-.5)*s,z=-(E.verticalAlign-.5)*o,B=a.evaluateVariableOffset(n,c);return new a.Point(k+B[0]*m,z+B[1]*m)}function ki(n,s,o,c,m,E){var k=n.x1,z=n.x2,B=n.y1,Z=n.y2,Y=n.anchorPointX,J=n.anchorPointY,Q=new a.Point(s,o);return c&&Q._rotate(m?E:-E),{x1:k+Q.x,y1:B+Q.y,x2:z+Q.x,y2:Z+Q.y,anchorPointX:Y,anchorPointY:J}}ti.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var ci=function(n,s,o,c){this.transform=n.clone(),this.collisionIndex=new ln(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new ti(o),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function ro(n,s,o,c,m){n.emplaceBack(s?1:0,o?1:0,c||0,m||0),n.emplaceBack(s?1:0,o?1:0,c||0,m||0),n.emplaceBack(s?1:0,o?1:0,c||0,m||0),n.emplaceBack(s?1:0,o?1:0,c||0,m||0)}ci.prototype.getBucketParts=function(n,s,o,c){var m=o.getBucket(s),E=o.latestFeatureIndex;if(m&&E&&s.id===m.layerIds[0]){var k=o.collisionBoxArray,z=m.layers[0].layout,B=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),Z=o.tileSize/a.EXTENT,Y=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),J=z.get("text-pitch-alignment")==="map",Q=z.get("text-rotation-alignment")==="map",ue=Er(o,1,this.transform.zoom),le=_r(Y,J,Q,this.transform,ue),fe=null;if(J){var ae=hr(Y,J,Q,this.transform,ue);fe=a.multiply([],this.transform.labelPlaneMatrix,ae)}this.retainedQueryData[m.bucketInstanceId]=new $n(m.bucketInstanceId,E,m.sourceLayerIndex,m.index,o.tileID);var me={bucket:m,layout:z,posMatrix:Y,textLabelPlaneMatrix:le,labelToScreenMatrix:fe,scale:B,textPixelRatio:Z,holdingForFade:o.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(c)for(var xe=0,Ie=m.sortKeyRanges;xe<Ie.length;xe+=1){var Me=Ie[xe];n.push({sortKey:Me.sortKey,symbolInstanceStart:Me.symbolInstanceStart,symbolInstanceEnd:Me.symbolInstanceEnd,parameters:me})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:me})}},ci.prototype.attemptAnchorPlacement=function(n,s,o,c,m,E,k,z,B,Z,Y,J,Q,ue,le){var fe,ae=[J.textOffset0,J.textOffset1],me=Jr(n,o,c,ae,m),xe=this.collisionIndex.placeCollisionBox(ki(s,me.x,me.y,E,k,this.transform.angle),Y,z,B,Z.predicate);if(!le||this.collisionIndex.placeCollisionBox(ki(le,me.x,me.y,E,k,this.transform.angle),Y,z,B,Z.predicate).box.length!==0)return xe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(fe=this.prevPlacement.variableOffsets[J.crossTileID].anchor),this.variableOffsets[J.crossTileID]={textOffset:ae,width:o,height:c,anchor:n,textBoxScale:m,prevAnchor:fe},this.markUsedJustification(Q,n,J,ue),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,ue,J),this.placedOrientations[J.crossTileID]=ue),{shift:me,placedGlyphBoxes:xe}):void 0},ci.prototype.placeLayerBucketPart=function(n,s,o){var c=this,m=n.parameters,E=m.bucket,k=m.layout,z=m.posMatrix,B=m.textLabelPlaneMatrix,Z=m.labelToScreenMatrix,Y=m.textPixelRatio,J=m.holdingForFade,Q=m.collisionBoxArray,ue=m.partiallyEvaluatedTextSize,le=m.collisionGroup,fe=k.get("text-optional"),ae=k.get("icon-optional"),me=k.get("text-allow-overlap"),xe=k.get("icon-allow-overlap"),Ie=k.get("text-rotation-alignment")==="map",Me=k.get("text-pitch-alignment")==="map",Le=k.get("icon-text-fit")!=="none",Oe=k.get("symbol-z-order")==="viewport-y",Ge=me&&(xe||!E.hasIconData()||ae),Je=xe&&(me||!E.hasTextData()||fe);!E.collisionArrays&&Q&&E.deserializeCollisionBoxes(Q);var Xe=function(lt,Nt){if(!s[lt.crossTileID])if(J)c.placements[lt.crossTileID]=new Ys(!1,!1,!1);else{var Gt,jt=!1,Ot=!1,Zt=!0,Ct=null,Lt={box:null,offscreen:null},pn={box:null,offscreen:null},Ui=null,Ia=null,na=0,pi=0,En=0;Nt.textFeatureIndex?na=Nt.textFeatureIndex:lt.useRuntimeCollisionCircles&&(na=lt.featureIndex),Nt.verticalTextFeatureIndex&&(pi=Nt.verticalTextFeatureIndex);var qn=Nt.textBox;if(qn){var Qi=function(vr){var So=a.WritingMode.horizontal;if(E.allowVerticalPlacement&&!vr&&c.prevPlacement){var aa=c.prevPlacement.placedOrientations[lt.crossTileID];aa&&(c.placedOrientations[lt.crossTileID]=aa,c.markUsedOrientation(E,So=aa,lt))}return So},fo=function(vr,So){if(E.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&Nt.verticalTextBox)for(var aa=0,uc=E.writingModes;aa<uc.length&&(uc[aa]===a.WritingMode.vertical?(Lt=So(),pn=Lt):Lt=vr(),!(Lt&&Lt.box&&Lt.box.length));aa+=1);else Lt=vr()};if(k.get("text-variable-anchor")){var Wa=k.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[lt.crossTileID]){var Ya=c.prevPlacement.variableOffsets[lt.crossTileID];Wa.indexOf(Ya.anchor)>0&&(Wa=Wa.filter(function(vr){return vr!==Ya.anchor})).unshift(Ya.anchor)}var Ps=function(vr,So,aa){for(var uc=vr.x2-vr.x1,gf=vr.y2-vr.y1,Ll=lt.textBoxScale,cc=Le&&!xe?So:null,hc={box:[],offscreen:!1},zu=me?2*Wa.length:Wa.length,Rl=0;Rl<zu;++Rl){var Wc=c.attemptAnchorPlacement(Wa[Rl%Wa.length],vr,uc,gf,Ll,Ie,Me,Y,z,le,Rl>=Wa.length,lt,E,aa,cc);if(Wc&&(hc=Wc.placedGlyphBoxes)&&hc.box&&hc.box.length){jt=!0,Ct=Wc.shift;break}}return hc};fo(function(){return Ps(qn,Nt.iconBox,a.WritingMode.horizontal)},function(){var vr=Nt.verticalTextBox;return E.allowVerticalPlacement&&!(Lt&&Lt.box&&Lt.box.length)&&lt.numVerticalGlyphVertices>0&&vr?Ps(vr,Nt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Lt&&(jt=Lt.box,Zt=Lt.offscreen);var sc=Qi(Lt&&Lt.box);if(!jt&&c.prevPlacement){var Cs=c.prevPlacement.variableOffsets[lt.crossTileID];Cs&&(c.variableOffsets[lt.crossTileID]=Cs,c.markUsedJustification(E,Cs.anchor,lt,sc))}}else{var Go=function(vr,So){var aa=c.collisionIndex.placeCollisionBox(vr,me,Y,z,le.predicate);return aa&&aa.box&&aa.box.length&&(c.markUsedOrientation(E,So,lt),c.placedOrientations[lt.crossTileID]=So),aa};fo(function(){return Go(qn,a.WritingMode.horizontal)},function(){var vr=Nt.verticalTextBox;return E.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&vr?Go(vr,a.WritingMode.vertical):{box:null,offscreen:null}}),Qi(Lt&&Lt.box&&Lt.box.length)}}if(jt=(Gt=Lt)&&Gt.box&&Gt.box.length>0,Zt=Gt&&Gt.offscreen,lt.useRuntimeCollisionCircles){var Au=E.text.placedSymbolArray.get(lt.centerJustifiedTextSymbolIndex),ul=a.evaluateSizeForFeature(E.textSizeData,ue,Au),Ko=k.get("text-padding");Ui=c.collisionIndex.placeCollisionCircles(me,Au,E.lineVertexArray,E.glyphOffsetArray,ul,z,B,Z,o,Me,le.predicate,lt.collisionCircleDiameter,Ko),jt=me||Ui.circles.length>0&&!Ui.collisionDetected,Zt=Zt&&Ui.offscreen}if(Nt.iconFeatureIndex&&(En=Nt.iconFeatureIndex),Nt.iconBox){var lc=function(vr){var So=Le&&Ct?ki(vr,Ct.x,Ct.y,Ie,Me,c.transform.angle):vr;return c.collisionIndex.placeCollisionBox(So,xe,Y,z,le.predicate)};Ot=pn&&pn.box&&pn.box.length&&Nt.verticalIconBox?(Ia=lc(Nt.verticalIconBox)).box.length>0:(Ia=lc(Nt.iconBox)).box.length>0,Zt=Zt&&Ia.offscreen}var Ds=fe||lt.numHorizontalGlyphVertices===0&&lt.numVerticalGlyphVertices===0,$i=ae||lt.numIconVertices===0;if(Ds||$i?$i?Ds||(Ot=Ot&&jt):jt=Ot&&jt:Ot=jt=Ot&&jt,jt&&Gt&&Gt.box&&c.collisionIndex.insertCollisionBox(Gt.box,k.get("text-ignore-placement"),E.bucketInstanceId,pn&&pn.box&&pi?pi:na,le.ID),Ot&&Ia&&c.collisionIndex.insertCollisionBox(Ia.box,k.get("icon-ignore-placement"),E.bucketInstanceId,En,le.ID),Ui&&(jt&&c.collisionIndex.insertCollisionCircles(Ui.circles,k.get("text-ignore-placement"),E.bucketInstanceId,na,le.ID),o)){var cl=E.bucketInstanceId,Ja=c.collisionCircleArrays[cl];Ja===void 0&&(Ja=c.collisionCircleArrays[cl]=new Ki);for(var Na=0;Na<Ui.circles.length;Na+=4)Ja.circles.push(Ui.circles[Na+0]),Ja.circles.push(Ui.circles[Na+1]),Ja.circles.push(Ui.circles[Na+2]),Ja.circles.push(Ui.collisionDetected?1:0)}c.placements[lt.crossTileID]=new Ys(jt||Ge,Ot||Je,Zt||E.justReloaded),s[lt.crossTileID]=!0}};if(Oe)for(var ct=E.getSortedSymbolIndexes(this.transform.angle),St=ct.length-1;St>=0;--St){var vt=ct[St];Xe(E.symbolInstances.get(vt),E.collisionArrays[vt])}else for(var _t=n.symbolInstanceStart;_t<n.symbolInstanceEnd;_t++)Xe(E.symbolInstances.get(_t),E.collisionArrays[_t]);if(o&&E.bucketInstanceId in this.collisionCircleArrays){var sr=this.collisionCircleArrays[E.bucketInstanceId];a.invert(sr.invProjMatrix,z),sr.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1},ci.prototype.markUsedJustification=function(n,s,o,c){var m;m=c===a.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];for(var E=0,k=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];E<k.length;E+=1){var z=k[E];z>=0&&(n.text.placedSymbolArray.get(z).crossTileID=m>=0&&z!==m?0:o.crossTileID)}},ci.prototype.markUsedOrientation=function(n,s,o){for(var c=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,m=s===a.WritingMode.vertical?s:0,E=0,k=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];E<k.length;E+=1)n.text.placedSymbolArray.get(k[E]).placedOrientation=c;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=m)},ci.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},E=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(var z in this.placements){var B=this.placements[z],Z=m[z];Z?(this.opacities[z]=new Vi(Z,c,B.text,B.icon),o=o||B.text!==Z.text.placed||B.icon!==Z.icon.placed):(this.opacities[z]=new Vi(null,c,B.text,B.icon,B.skipFade),o=o||B.text||B.icon)}for(var Y in m){var J=m[Y];if(!this.opacities[Y]){var Q=new Vi(J,c,!1,!1);Q.isHidden()||(this.opacities[Y]=Q,o=o||J.text.placed||J.icon.placed)}}for(var ue in E)this.variableOffsets[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.variableOffsets[ue]=E[ue]);for(var le in k)this.placedOrientations[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.placedOrientations[le]=k[le]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},ci.prototype.updateLayerOpacities=function(n,s){for(var o={},c=0,m=s;c<m.length;c+=1){var E=m[c],k=E.getBucket(n);k&&E.latestFeatureIndex&&n.id===k.layerIds[0]&&this.updateBucketOpacities(k,o,E.collisionBoxArray)}},ci.prototype.updateBucketOpacities=function(n,s,o){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,E=new Vi(null,0,!1,!1,!0),k=m.get("text-allow-overlap"),z=m.get("icon-allow-overlap"),B=m.get("text-variable-anchor"),Z=m.get("text-rotation-alignment")==="map",Y=m.get("text-pitch-alignment")==="map",J=m.get("icon-text-fit")!=="none",Q=new Vi(null,0,k&&(z||!n.hasIconData()||m.get("icon-optional")),z&&(k||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var ue=function(me,xe,Ie){for(var Me=0;Me<xe/4;Me++)me.opacityVertexArray.emplaceBack(Ie)},le=function(me){var xe=n.symbolInstances.get(me),Ie=xe.numHorizontalGlyphVertices,Me=xe.numVerticalGlyphVertices,Le=xe.crossTileID,Oe=c.opacities[Le];s[Le]?Oe=E:Oe||(c.opacities[Le]=Oe=Q),s[Le]=!0;var Ge=xe.numIconVertices>0,Je=c.placedOrientations[xe.crossTileID],Xe=Je===a.WritingMode.vertical,ct=Je===a.WritingMode.horizontal||Je===a.WritingMode.horizontalOnly;if(Ie>0||Me>0){var St=go(Oe.text);ue(n.text,Ie,Xe?ua:St),ue(n.text,Me,ct?ua:St);var vt=Oe.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(function(Lt){Lt>=0&&(n.text.placedSymbolArray.get(Lt).hidden=vt||Xe?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=vt||ct?1:0);var _t=c.variableOffsets[xe.crossTileID];_t&&c.markUsedJustification(n,_t.anchor,xe,Je);var sr=c.placedOrientations[xe.crossTileID];sr&&(c.markUsedJustification(n,"left",xe,sr),c.markUsedOrientation(n,sr,xe))}if(Ge){var lt=go(Oe.icon),Nt=!(J&&xe.verticalPlacedIconSymbolIndex&&Xe);xe.placedIconSymbolIndex>=0&&(ue(n.icon,xe.numIconVertices,Nt?lt:ua),n.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(ue(n.icon,xe.numVerticalIconVertices,Nt?ua:lt),n.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Gt=n.collisionArrays[me];if(Gt){var jt=new a.Point(0,0);if(Gt.textBox||Gt.verticalTextBox){var Ot=!0;if(B){var Zt=c.variableOffsets[Le];Zt?(jt=Jr(Zt.anchor,Zt.width,Zt.height,Zt.textOffset,Zt.textBoxScale),Z&&jt._rotate(Y?c.transform.angle:-c.transform.angle)):Ot=!1}Gt.textBox&&ro(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Ot||Xe,jt.x,jt.y),Gt.verticalTextBox&&ro(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Ot||ct,jt.x,jt.y)}var Ct=Boolean(!ct&&Gt.verticalIconBox);Gt.iconBox&&ro(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Ct,J?jt.x:0,J?jt.y:0),Gt.verticalIconBox&&ro(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Ct,J?jt.x:0,J?jt.y:0)}}},fe=0;fe<n.symbolInstances.length;fe++)le(fe);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var ae=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ae.invProjMatrix,n.placementViewportMatrix=ae.viewportMatrix,n.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},ci.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ci.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},ci.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},ci.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},ci.prototype.setStale=function(){this.stale=!0};var Pa=Math.pow(2,25),Qu=Math.pow(2,24),ns=Math.pow(2,17),Fn=Math.pow(2,16),Zn=Math.pow(2,9),Ca=Math.pow(2,8),Da=Math.pow(2,1);function go(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*Pa+s*Qu+o*ns+s*Fn+o*Zn+s*Ca+o*Da+s}var ua=0,Il=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Il.prototype.continuePlacement=function(n,s,o,c,m){for(var E=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(E,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(function(k,z){return k.sortKey-z.sortKey}));this._currentPartIndex<E.length;)if(s.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,m())return!0;return!1};var as=function(n,s,o,c,m,E,k){this.placement=new ci(n,m,E,k),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=c,this._done=!1};as.prototype.isDone=function(){return this._done},as.prototype.continuePlacement=function(n,s,o){for(var c=this,m=a.browser.now(),E=function(){var B=a.browser.now()-m;return!c._forceFullPlacement&&B>2};this._currentPlacementIndex>=0;){var k=s[n[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=z)&&(!k.maxzoom||k.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Il(k)),this._inProgressLayer.continuePlacement(o[k.source],this.placement,this._showCollisionBoxes,k,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},as.prototype.commit=function(n){return this.placement.commit(n),this.placement};var Co=512/a.EXTENT/2,Fi=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var c=0;c<s.length;c++){var m=s.get(c),E=m.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};Fi.prototype.getScaledCoordinates=function(n,s){var o=Co/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*a.EXTENT+n.anchorY)*o)}},Fi.prototype.findMatches=function(n,s,o){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var E=n.get(m);if(!E.crossTileID){var k=this.indexedSymbolInstances[E.key];if(k)for(var z=this.getScaledCoordinates(E,s),B=0,Z=k;B<Z.length;B+=1){var Y=Z[B];if(Math.abs(Y.coord.x-z.x)<=c&&Math.abs(Y.coord.y-z.y)<=c&&!o[Y.crossTileID]){o[Y.crossTileID]=!0,E.crossTileID=Y.crossTileID;break}}}}};var Ci=function(){this.maxCrossTileID=0};Ci.prototype.generate=function(){return++this.maxCrossTileID};var un=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};un.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var c=this.indexes[o],m={};for(var E in c){var k=c[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),m[k.tileID.key]=k}this.indexes[o]=m}this.lng=n},un.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var E in this.indexes){var k=this.indexes[E];if(Number(E)>n.overscaledZ)for(var z in k){var B=k[z];B.tileID.isChildOf(n)&&B.findMatches(s.symbolInstances,n,m)}else{var Z=k[n.scaledTo(Number(E)).key];Z&&Z.findMatches(s.symbolInstances,n,m)}}for(var Y=0;Y<s.symbolInstances.length;Y++){var J=s.symbolInstances.get(Y);J.crossTileID||(J.crossTileID=o.generate(),m[J.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Fi(n,s.symbolInstances,s.bucketInstanceId),!0},un.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var c=0,m=s.indexedSymbolInstances[o];c<m.length;c+=1)delete this.usedCrossTileIDs[n][m[c].crossTileID]},un.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var c=this.indexes[o];for(var m in c)n[c[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,c[m]),delete c[m],s=!0)}return s};var Se=function(){this.layerIndexes={},this.crossTileIDs=new Ci,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Se.prototype.addLayer=function(n,s,o){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new un);var m=!1,E={};c.handleWrapJump(o);for(var k=0,z=s;k<z.length;k+=1){var B=z[k],Z=B.getBucket(n);Z&&n.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(B.tileID,Z,this.crossTileIDs)&&(m=!0),E[Z.bucketInstanceId]=!0)}return c.removeStaleBuckets(E)&&(m=!0),m},Se.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var Hi=function(n,s){return a.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},Nn=a.pick(et,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Cr=a.pick(et,["setCenter","setZoom","setBearing","setPitch"]),ca=function(){var n={},s=a.styleSpec.$version;for(var o in a.styleSpec.$root){var c,m=a.styleSpec.$root[o];m.required&&(c=o==="version"?s:m.type==="array"?[]:{})!=null&&(n[o]=c)}return n}(),Ii=function(n){function s(o,c){var m=this;c===void 0&&(c={}),n.call(this),this.map=o,this.dispatcher=new zr(Re(),this),this.imageManager=new Ue,this.imageManager.setEventedParent(this),this.glyphManager=new tr(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Rt(256,512),this.crossTileSymbolIndex=new Se,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var E=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(k){E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},function(z,B){if(a.triggerPluginCompletionEvent(z),B&&B.every(function(Y){return Y}))for(var Z in E.sourceCaches)E.sourceCaches[Z].reload()})}),this.on("data",function(k){if(k.dataType==="source"&&k.sourceDataType==="metadata"){var z=m.sourceCaches[k.sourceId];if(z){var B=z.getSource();if(B&&B.vectorLayerIds)for(var Z in m._layers){var Y=m._layers[Z];Y.source===B.id&&m._validateLayer(Y)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,c){var m=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var E=typeof c.validate=="boolean"?c.validate:!a.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);var k=this.map._requestManager.transformRequest(o,a.ResourceType.Style);this._request=a.getJSON(k,function(z,B){m._request=null,z?m.fire(new a.ErrorEvent(z)):B&&m._load(B,E)})},s.prototype.loadJSON=function(o,c){var m=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){m._request=null,m._load(o,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ca,!1)},s.prototype._load=function(o,c){if(!c||!Hi(this,a.validateStyle(o))){for(var m in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(m,o.sources[m],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var E=He(this.stylesheet.layers);this._order=E.map(function(Z){return Z.id}),this._layers={},this._serializedLayers={};for(var k=0,z=E;k<z.length;k+=1){var B=z[k];(B=a.createStyleLayer(B)).setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new kr(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},s.prototype._loadSprite=function(o){var c=this;this._spriteRequest=function(m,E,k){var z,B,Z,Y=a.browser.devicePixelRatio>1?"@2x":"",J=a.getJSON(E.transformRequest(E.normalizeSpriteURL(m,Y,".json"),a.ResourceType.SpriteJSON),function(le,fe){J=null,Z||(Z=le,z=fe,ue())}),Q=a.getImage(E.transformRequest(E.normalizeSpriteURL(m,Y,".png"),a.ResourceType.SpriteImage),function(le,fe){Q=null,Z||(Z=le,B=fe,ue())});function ue(){if(Z)k(Z);else if(z&&B){var le=a.browser.getImageData(B),fe={};for(var ae in z){var me=z[ae],xe=me.width,Ie=me.height,Me=me.x,Le=me.y,Oe=me.sdf,Ge=me.pixelRatio,Je=me.stretchX,Xe=me.stretchY,ct=me.content,St=new a.RGBAImage({width:xe,height:Ie});a.RGBAImage.copy(le,St,{x:Me,y:Le},{x:0,y:0},{width:xe,height:Ie}),fe[ae]={data:St,pixelRatio:Ge,sdf:Oe,stretchX:Je,stretchY:Xe,content:ct}}k(null,fe)}}return{cancel:function(){J&&(J.cancel(),J=null),Q&&(Q.cancel(),Q=null)}}}(o,this.map._requestManager,function(m,E){if(c._spriteRequest=null,m)c.fire(new a.ErrorEvent(m));else if(E)for(var k in E)c.imageManager.addImage(k,E[k]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new a.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var c=this.sourceCaches[o.source];if(c){var m=o.sourceLayer;if(m){var E=c.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+E.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var c=[],m=0,E=o;m<E.length;m+=1){var k=this._layers[E[m]];k.type!=="custom"&&c.push(k.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var c=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);for(var k in(m.length||E.length)&&this._updateWorkerLayers(m,E),this._updatedSources){var z=this._updatedSources[k];z==="reload"?this._reloadSource(k):z==="clear"&&this._clearSource(k)}for(var B in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[B].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var Z={};for(var Y in this.sourceCaches){var J=this.sourceCaches[Y];Z[Y]=J.used,J.used=!1}for(var Q=0,ue=this._order;Q<ue.length;Q+=1){var le=this._layers[ue[Q]];le.recalculate(o,this._availableImages),!le.isHidden(o.zoom)&&le.source&&(this.sourceCaches[le.source].used=!0)}for(var fe in Z){var ae=this.sourceCaches[fe];Z[fe]!==ae.used&&ae.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:fe}))}this.light.recalculate(o),this.z=o.zoom,c&&this.fire(new a.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var c=this;if(this._checkLoaded(),Hi(this,a.validateStyle(o)))return!1;(o=a.clone$1(o)).layers=He(o.layers);var m=function(k,z){if(!k)return[{command:et.setStyle,args:[z]}];var B=[];try{if(!a.deepEqual(k.version,z.version))return[{command:et.setStyle,args:[z]}];a.deepEqual(k.center,z.center)||B.push({command:et.setCenter,args:[z.center]}),a.deepEqual(k.zoom,z.zoom)||B.push({command:et.setZoom,args:[z.zoom]}),a.deepEqual(k.bearing,z.bearing)||B.push({command:et.setBearing,args:[z.bearing]}),a.deepEqual(k.pitch,z.pitch)||B.push({command:et.setPitch,args:[z.pitch]}),a.deepEqual(k.sprite,z.sprite)||B.push({command:et.setSprite,args:[z.sprite]}),a.deepEqual(k.glyphs,z.glyphs)||B.push({command:et.setGlyphs,args:[z.glyphs]}),a.deepEqual(k.transition,z.transition)||B.push({command:et.setTransition,args:[z.transition]}),a.deepEqual(k.light,z.light)||B.push({command:et.setLight,args:[z.light]});var Z={},Y=[];(function(Q,ue,le,fe){var ae;for(ae in ue=ue||{},Q=Q||{})Q.hasOwnProperty(ae)&&(ue.hasOwnProperty(ae)||We(ae,le,fe));for(ae in ue)ue.hasOwnProperty(ae)&&(Q.hasOwnProperty(ae)?a.deepEqual(Q[ae],ue[ae])||(Q[ae].type==="geojson"&&ue[ae].type==="geojson"&&pr(Q,ue,ae)?le.push({command:et.setGeoJSONSourceData,args:[ae,ue[ae].data]}):qt(ae,ue,le,fe)):Mt(ae,ue,le))})(k.sources,z.sources,Y,Z);var J=[];k.layers&&k.layers.forEach(function(Q){Z[Q.source]?B.push({command:et.removeLayer,args:[Q.id]}):J.push(Q)}),B=B.concat(Y),function(Q,ue,le){ue=ue||[];var fe,ae,me,xe,Ie,Me,Le,Oe=(Q=Q||[]).map(ir),Ge=ue.map(ir),Je=Q.reduce(Vt,{}),Xe=ue.reduce(Vt,{}),ct=Oe.slice(),St=Object.create(null);for(fe=0,ae=0;fe<Oe.length;fe++)Xe.hasOwnProperty(me=Oe[fe])?ae++:(le.push({command:et.removeLayer,args:[me]}),ct.splice(ct.indexOf(me,ae),1));for(fe=0,ae=0;fe<Ge.length;fe++)ct[ct.length-1-fe]!==(me=Ge[Ge.length-1-fe])&&(Je.hasOwnProperty(me)?(le.push({command:et.removeLayer,args:[me]}),ct.splice(ct.lastIndexOf(me,ct.length-ae),1)):ae++,le.push({command:et.addLayer,args:[Xe[me],Me=ct[ct.length-fe]]}),ct.splice(ct.length-fe,0,me),St[me]=!0);for(fe=0;fe<Ge.length;fe++)if(xe=Je[me=Ge[fe]],Ie=Xe[me],!St[me]&&!a.deepEqual(xe,Ie))if(a.deepEqual(xe.source,Ie.source)&&a.deepEqual(xe["source-layer"],Ie["source-layer"])&&a.deepEqual(xe.type,Ie.type)){for(Le in kt(xe.layout,Ie.layout,le,me,null,et.setLayoutProperty),kt(xe.paint,Ie.paint,le,me,null,et.setPaintProperty),a.deepEqual(xe.filter,Ie.filter)||le.push({command:et.setFilter,args:[me,Ie.filter]}),a.deepEqual(xe.minzoom,Ie.minzoom)&&a.deepEqual(xe.maxzoom,Ie.maxzoom)||le.push({command:et.setLayerZoomRange,args:[me,Ie.minzoom,Ie.maxzoom]}),xe)xe.hasOwnProperty(Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?kt(xe[Le],Ie[Le],le,me,Le.slice(6),et.setPaintProperty):a.deepEqual(xe[Le],Ie[Le])||le.push({command:et.setLayerProperty,args:[me,Le,Ie[Le]]}));for(Le in Ie)Ie.hasOwnProperty(Le)&&!xe.hasOwnProperty(Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?kt(xe[Le],Ie[Le],le,me,Le.slice(6),et.setPaintProperty):a.deepEqual(xe[Le],Ie[Le])||le.push({command:et.setLayerProperty,args:[me,Le,Ie[Le]]}))}else le.push({command:et.removeLayer,args:[me]}),Me=ct[ct.lastIndexOf(me)+1],le.push({command:et.addLayer,args:[Ie,Me]})}(J,z.layers,B)}catch(Q){console.warn("Unable to compute style diff:",Q),B=[{command:et.setStyle,args:[z]}]}return B}(this.serialize(),o).filter(function(k){return!(k.command in Cr)});if(m.length===0)return!1;var E=m.filter(function(k){return!(k.command in Nn)});if(E.length>0)throw new Error("Unimplemented: "+E.map(function(k){return k.command}).join(", ")+".");return m.forEach(function(k){k.command!=="setTransition"&&c[k.command].apply(c,k.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,c){if(this.getImage(o))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,c),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,c){this.imageManager.updateImage(o,c)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,c,m){var E=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.validateStyle.source,"sources."+o,c,null,m))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var k=this.sourceCaches[o]=new ne(o,c,this.dispatcher);k.style=this,k.setEventedParent(this,function(){return{isSourceLoaded:E.loaded(),source:k.serialize(),sourceId:o}}),k.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===o)return this.fire(new a.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+c+'" is using it.')));var m=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],m.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,c){this._checkLoaded(),this.sourceCaches[o].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,c,m){m===void 0&&(m={}),this._checkLoaded();var E=o.id;if(this.getLayer(E))this.fire(new a.ErrorEvent(new Error('Layer with id "'+E+'" already exists on this map')));else{var k;if(o.type==="custom"){if(Hi(this,a.validateCustomStyleLayer(o)))return;k=a.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(E,o.source),o=a.clone$1(o),o=a.extend(o,{source:E})),this._validate(a.validateStyle.layer,"layers."+E,o,{arrayIndex:-1},m))return;k=a.createStyleLayer(o),this._validateLayer(k),k.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[k.id]=k.serialize()}var z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(z,0,E),this._layerOrderChanged=!0,this._layers[E]=k,this._removedLayers[E]&&k.source&&k.type!=="custom"){var B=this._removedLayers[E];delete this._removedLayers[E],B.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}},s.prototype.moveLayer=function(o,c){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==c){var m=this._order.indexOf(o);this._order.splice(m,1);var E=c?this._order.indexOf(c):this._order.length;c&&E===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(E,0,o),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var c=this._layers[o];if(c){c.setEventedParent(null);var m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,c,m){this._checkLoaded();var E=this.getLayer(o);E?E.minzoom===c&&E.maxzoom===m||(c!=null&&(E.minzoom=c),m!=null&&(E.maxzoom=m),this._updateLayer(E)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,c,m){m===void 0&&(m={}),this._checkLoaded();var E=this.getLayer(o);if(E){if(!a.deepEqual(E.filter,c))return c==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(a.validateStyle.filter,"layers."+E.id+".filter",c,null,m)||(E.filter=a.clone$1(c),this._updateLayer(E)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return a.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(o);k?a.deepEqual(k.getLayoutProperty(c),m)||(k.setLayoutProperty(c,m,E),this._updateLayer(k)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,c){var m=this.getLayer(o);if(m)return m.getLayoutProperty(c);this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(o);k?a.deepEqual(k.getPaintProperty(c),m)||(k.setPaintProperty(c,m,E)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,c){return this.getLayer(o).getPaintProperty(c)},s.prototype.setFeatureState=function(o,c){this._checkLoaded();var m=o.source,E=o.sourceLayer,k=this.sourceCaches[m];if(k!==void 0){var z=k.getSource().type;z==="geojson"&&E?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||E?(o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),k.setFeatureState(E,o.id,c)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,c){this._checkLoaded();var m=o.source,E=this.sourceCaches[m];if(E!==void 0){var k=E.getSource().type,z=k==="vector"?o.sourceLayer:void 0;k!=="vector"||z?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(z,o.id,c):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var c=o.source,m=o.sourceLayer,E=this.sourceCaches[c];if(E!==void 0){if(E.getSource().type!=="vector"||m)return o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),E.getFeatureState(m,o.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var c=this,m=function(Je){return c._layers[Je].type==="fill-extrusion"},E={},k=[],z=this._order.length-1;z>=0;z--){var B=this._order[z];if(m(B)){E[B]=z;for(var Z=0,Y=o;Z<Y.length;Z+=1){var J=Y[Z][B];if(J)for(var Q=0,ue=J;Q<ue.length;Q+=1)k.push(ue[Q])}}}k.sort(function(Je,Xe){return Xe.intersectionZ-Je.intersectionZ});for(var le=[],fe=this._order.length-1;fe>=0;fe--){var ae=this._order[fe];if(m(ae))for(var me=k.length-1;me>=0;me--){var xe=k[me].feature;if(E[xe.layer.id]<fe)break;le.push(xe),k.pop()}else for(var Ie=0,Me=o;Ie<Me.length;Ie+=1){var Le=Me[Ie][ae];if(Le)for(var Oe=0,Ge=Le;Oe<Ge.length;Oe+=1)le.push(Ge[Oe].feature)}}return le},s.prototype.queryRenderedFeatures=function(o,c,m){c&&c.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var E={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var k=0,z=c.layers;k<z.length;k+=1){var B=z[k],Z=this._layers[B];if(!Z)return this.fire(new a.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be queried for features."))),[];E[Z.source]=!0}}var Y=[];for(var J in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!E[J]||Y.push(li(this.sourceCaches[J],this._layers,this._serializedLayers,o,c,m));return this.placement&&Y.push(function(Q,ue,le,fe,ae,me,xe){for(var Ie={},Me=me.queryRenderedSymbols(fe),Le=[],Oe=0,Ge=Object.keys(Me).map(Number);Oe<Ge.length;Oe+=1)Le.push(xe[Ge[Oe]]);Le.sort(tn);for(var Je=function(){var _t=ct[Xe],sr=_t.featureIndex.lookupSymbolFeatures(Me[_t.bucketInstanceId],ue,_t.bucketIndex,_t.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,Q);for(var lt in sr){var Nt=Ie[lt]=Ie[lt]||[],Gt=sr[lt];Gt.sort(function(Zt,Ct){var Lt=_t.featureSortOrder;if(Lt){var pn=Lt.indexOf(Zt.featureIndex);return Lt.indexOf(Ct.featureIndex)-pn}return Ct.featureIndex-Zt.featureIndex});for(var jt=0,Ot=Gt;jt<Ot.length;jt+=1)Nt.push(Ot[jt])}},Xe=0,ct=Le;Xe<ct.length;Xe+=1)Je();var St=function(_t){Ie[_t].forEach(function(sr){var lt=sr.feature,Nt=le[Q[_t].source].getFeatureState(lt.layer["source-layer"],lt.id);lt.source=lt.layer.source,lt.layer["source-layer"]&&(lt.sourceLayer=lt.layer["source-layer"]),lt.state=Nt})};for(var vt in Ie)St(vt);return Ie}(this._layers,this._serializedLayers,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Y)},s.prototype.querySourceFeatures=function(o,c){c&&c.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var m=this.sourceCaches[o];return m?function(E,k){for(var z=E.getRenderableIds().map(function(ue){return E.getTileByID(ue)}),B=[],Z={},Y=0;Y<z.length;Y++){var J=z[Y],Q=J.tileID.canonical.key;Z[Q]||(Z[Q]=!0,J.querySourceFeatures(B,k))}return B}(m,c):[]},s.prototype.addSourceType=function(o,c,m){return s.getSourceType(o)?m(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,c){c===void 0&&(c={}),this._checkLoaded();var m=this.light.getLight(),E=!1;for(var k in o)if(!a.deepEqual(o[k],m[k])){E=!0;break}if(E){var z={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(z)}},s.prototype._validate=function(o,c,m,E,k){return k===void 0&&(k={}),(!k||k.validate!==!1)&&Hi(this,o.call(a.validateStyle,a.extend({key:c,style:this.serialize(),value:m,styleSpec:a.styleSpec},E)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var c in this.sourceCaches)this.sourceCaches[c].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,c,m,E,k){k===void 0&&(k=!1);for(var z=!1,B=!1,Z={},Y=0,J=this._order;Y<J.length;Y+=1){var Q=this._layers[J[Y]];if(Q.type==="symbol"){if(!Z[Q.source]){var ue=this.sourceCaches[Q.source];Z[Q.source]=ue.getRenderableIds(!0).map(function(xe){return ue.getTileByID(xe)}).sort(function(xe,Ie){return Ie.tileID.overscaledZ-xe.tileID.overscaledZ||(xe.tileID.isLessThan(Ie.tileID)?-1:1)})}var le=this.crossTileSymbolIndex.addLayer(Q,Z[Q.source],o.center.lng);z=z||le}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),o.zoom))&&(this.pauseablePlacement=new as(o,this._order,k,c,m,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),B=!0),z&&this.pauseablePlacement.placement.setStale()),B||z)for(var fe=0,ae=this._order;fe<ae.length;fe+=1){var me=this._layers[ae[fe]];me.type==="symbol"&&this.placement.updateLayerOpacities(me,Z[me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();var E=this.sourceCaches[c.source];E&&E.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(o,c,m){this.glyphManager.getGlyphs(c.stacks,m)},s.prototype.getResource=function(o,c,m){return a.makeRequest(c,m)},s}(a.Evented);Ii.getSourceType=function(n){return Bi[n]},Ii.setSourceType=function(n,s){Bi[n]=s},Ii.registerForPluginStateChange=a.registerForPluginStateChange;var Nr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ma=Xt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ys=Xt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),os=Xt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),jc=Xt(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Wl=Xt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),vs=Xt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ss=Xt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),La=Xt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ea=Xt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ba=Xt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Zc=Xt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),gs=Xt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Cn=Xt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),$u=Xt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),hi=Xt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),cn=Xt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ri=Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ls=Xt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ra=Xt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),xa=Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),us=Xt(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ba=Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),xn=Xt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Xi=Xt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Di=Xt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Wi=Xt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Xt(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=E?E.concat(m):m,z={};return{fragmentSource:n=n.replace(o,function(B,Z,Y,J,Q){return z[Q]=!0,Z==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
varying `+Y+" "+J+" "+Q+`;
#else
uniform `+Y+" "+J+" u_"+Q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Q+`
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`}),vertexSource:s=s.replace(o,function(B,Z,Y,J,Q){var ue=J==="float"?"vec2":"vec4",le=Q.match(/color/)?"color":ue;return z[Q]?Z==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+Y+" "+ue+" a_"+Q+`;
varying `+Y+" "+J+" "+Q+`;
#else
uniform `+Y+" "+J+" u_"+Q+`;
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = a_"+Q+`;
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = unpack_mix_"+le+"(a_"+Q+", u_"+Q+`_t);
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:Z==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+Y+" "+ue+" a_"+Q+`;
#else
uniform `+Y+" "+J+" u_"+Q+`;
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Y+" "+J+" "+Q+" = a_"+Q+`;
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Y+" "+J+" "+Q+" = unpack_mix_"+le+"(a_"+Q+", u_"+Q+`_t);
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`}),staticAttributes:c,staticUniforms:k}}var Dn=Object.freeze({__proto__:null,prelude:Ma,background:ys,backgroundPattern:os,circle:jc,clippingMask:Wl,heatmap:vs,heatmapTexture:ss,collisionBox:La,collisionCircle:ea,debug:ba,fill:Zc,fillOutline:gs,fillOutlinePattern:Cn,fillPattern:$u,fillExtrusion:hi,fillExtrusionPattern:cn,hillshadePrepare:ri,hillshade:ls,line:Ra,lineGradient:xa,linePattern:us,lineSDF:Ba,raster:xn,symbolIcon:Xi,symbolSDF:Di,symbolTextAndIcon:Wi}),Do=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Eu(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var c=n[o].split(" ");s.push(c.pop())}return s}Do.prototype.bind=function(n,s,o,c,m,E,k,z){this.context=n;for(var B=this.boundPaintVertexBuffers.length!==c.length,Z=0;!B&&Z<c.length;Z++)this.boundPaintVertexBuffers[Z]!==c[Z]&&(B=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!B&&this.boundIndexBuffer===m&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===z?(n.bindVertexArrayOES.set(this.vao),k&&k.bind(),m&&m.dynamicDraw&&m.bind(),z&&z.bind()):this.freshBind(s,o,c,m,E,k,z)},Do.prototype.freshBind=function(n,s,o,c,m,E,k){var z,B=n.numAttributes,Z=this.context,Y=Z.gl;if(Z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Z.extVertexArrayObject.createVertexArrayOES(),Z.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=c,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=k;else{z=Z.currentNumAttributes||0;for(var J=B;J<z;J++)Y.disableVertexAttribArray(J)}s.enableAttributes(Y,n);for(var Q=0,ue=o;Q<ue.length;Q+=1)ue[Q].enableAttributes(Y,n);E&&E.enableAttributes(Y,n),k&&k.enableAttributes(Y,n),s.bind(),s.setVertexAttribPointers(Y,n,m);for(var le=0,fe=o;le<fe.length;le+=1){var ae=fe[le];ae.bind(),ae.setVertexAttribPointers(Y,n,m)}E&&(E.bind(),E.setVertexAttribPointers(Y,n,m)),c&&c.bind(),k&&(k.bind(),k.setVertexAttribPointers(Y,n,m)),Z.currentNumAttributes=B},Do.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var io=function(n,s,o,c,m,E){var k=n.gl;this.program=k.createProgram();for(var z=Eu(o.staticAttributes),B=c?c.getBinderAttributes():[],Z=z.concat(B),Y=o.staticUniforms?Eu(o.staticUniforms):[],J=c?c.getBinderUniforms():[],Q=[],ue=0,le=Y.concat(J);ue<le.length;ue+=1){var fe=le[ue];Q.indexOf(fe)<0&&Q.push(fe)}var ae=c?c.defines():[];E&&ae.push("#define OVERDRAW_INSPECTOR;");var me=ae.concat(Ma.fragmentSource,o.fragmentSource).join(`
`),xe=ae.concat(Ma.vertexSource,o.vertexSource).join(`
`),Ie=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Ie,me),k.compileShader(Ie),k.attachShader(this.program,Ie);var Me=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Me,xe),k.compileShader(Me),k.attachShader(this.program,Me),this.attributes={};var Le={};this.numAttributes=Z.length;for(var Oe=0;Oe<this.numAttributes;Oe++)Z[Oe]&&(k.bindAttribLocation(this.program,Oe,Z[Oe]),this.attributes[Z[Oe]]=Oe);k.linkProgram(this.program),k.deleteShader(Me),k.deleteShader(Ie);for(var Ge=0;Ge<Q.length;Ge++){var Je=Q[Ge];if(Je&&!Le[Je]){var Xe=k.getUniformLocation(this.program,Je);Xe&&(Le[Je]=Xe)}}this.fixedUniforms=m(n,Le),this.binderUniforms=c?c.getUniforms(n,Le):[]}}};function Js(n,s,o){var c=1/Er(o,1,s.transform.tileZoom),m=Math.pow(2,o.tileID.overscaledZ),E=o.tileSize*Math.pow(2,s.transform.tileZoom)/m,k=E*(o.tileID.canonical.x+o.tileID.wrap*m),z=E*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[k>>16,z>>16],u_pixel_coord_lower:[65535&k,65535&z]}}io.prototype.draw=function(n,s,o,c,m,E,k,z,B,Z,Y,J,Q,ue,le,fe){var ae,me=n.gl;if(!this.failedToCreate){for(var xe in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(c),n.setColorMode(m),n.setCullFace(E),this.fixedUniforms)this.fixedUniforms[xe].set(k[xe]);ue&&ue.setUniforms(n,this.binderUniforms,J,{zoom:Q});for(var Ie=(ae={},ae[me.LINES]=2,ae[me.TRIANGLES]=3,ae[me.LINE_STRIP]=1,ae)[s],Me=0,Le=Y.get();Me<Le.length;Me+=1){var Oe=Le[Me],Ge=Oe.vaos||(Oe.vaos={});(Ge[z]||(Ge[z]=new Do)).bind(n,this,B,ue?ue.getPaintVertexBuffers():[],Z,Oe.vertexOffset,le,fe),me.drawElements(s,Oe.primitiveLength*Ie,me.UNSIGNED_SHORT,Oe.primitiveOffset*Ie*2)}}};var Qs=function(n,s,o,c){var m=s.style.light,E=m.properties.get("position"),k=[E.x,E.y,E.z],z=a.create$1();m.properties.get("anchor")==="viewport"&&a.fromRotation(z,-s.transform.angle),a.transformMat3(k,k,z);var B=m.properties.get("color");return{u_matrix:n,u_lightpos:k,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+o,u_opacity:c}},ha=function(n,s,o,c,m,E,k){return a.extend(Qs(n,s,o,c),Js(E,s,k),{u_height_factor:-Math.pow(2,m.overscaledZ)/k.tileSize/8})},Oa=function(n){return{u_matrix:n}},ta=function(n,s,o,c){return a.extend(Oa(n),Js(o,s,c))},ec=function(n,s){return{u_matrix:n,u_world:s}},Mo=function(n,s,o,c,m){return a.extend(ta(n,s,o,c),{u_world:m})},wn=function(n,s,o,c){var m,E,k=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var z=Er(o,1,k.zoom);m=!0,E=[z,z]}else m=!1,E=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:E}},_s=function(n,s,o){var c=Er(o,1,s.zoom),m=Math.pow(2,s.zoom-o.tileID.overscaledZ),E=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*m),s.pixelsToGLUnits[1]/(c*m)],u_overscale_factor:E}},$s=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},Gn=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},hn=function(n){return{u_matrix:n}},Tl=function(n,s,o,c){return{u_matrix:n,u_extrude_scale:Er(s,1,o),u_intensity:c}},no=function(n,s,o){var c=n.transform;return{u_matrix:Kn(n,s,o),u_ratio:1/Er(s,1,c.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Qr=function(n,s,o,c){return a.extend(no(n,s,o),{u_image:0,u_image_height:c})},Fe=function(n,s,o,c){var m=n.transform,E=Ni(s,m);return{u_matrix:Kn(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Er(s,1,m.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[E,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},It=function(n,s,o,c,m){var E=n.lineAtlas,k=Ni(s,n.transform),z=o.layout.get("line-cap")==="round",B=E.getDash(c.from,z),Z=E.getDash(c.to,z),Y=B.width*m.fromScale,J=Z.width*m.toScale;return a.extend(no(n,s,o),{u_patternscale_a:[k/Y,-B.height/2],u_patternscale_b:[k/J,-Z.height/2],u_sdfgamma:E.width/(256*Math.min(Y,J)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:Z.y,u_mix:m.t})};function Ni(n,s){return 1/Er(n,1,s.tileZoom)}function Kn(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Al=function(n,s,o,c,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=m.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:el(m.paint.get("raster-hue-rotate"))};var E,k};function el(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var bs,tl=function(n,s,o,c,m,E,k,z,B,Z){var Y=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Y.width/Y.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:k,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+c,u_texsize:Z,u_texture:0}},pa=function(n,s,o,c,m,E,k,z,B,Z,Y){var J=m.transform;return a.extend(tl(n,s,o,c,m,E,k,z,B,Z),{u_gamma_scale:c?Math.cos(J._pitch)*J.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+Y})},cs=function(n,s,o,c,m,E,k,z,B,Z){return a.extend(pa(n,s,o,c,m,E,k,z,!0,B,!0),{u_texsize_icon:Z,u_texture_icon:1})},zl=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},wa=function(n,s,o,c,m,E){return a.extend(function(k,z,B,Z){var Y=B.imageManager.getPattern(k.from.toString()),J=B.imageManager.getPattern(k.to.toString()),Q=B.imageManager.getPixelSize(),ue=Q.width,le=Q.height,fe=Math.pow(2,Z.tileID.overscaledZ),ae=Z.tileSize*Math.pow(2,B.transform.tileZoom)/fe,me=ae*(Z.tileID.canonical.x+Z.tileID.wrap*fe),xe=ae*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[ue,le],u_mix:z.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Er(Z,1,B.transform.tileZoom),u_pixel_coord_upper:[me>>16,xe>>16],u_pixel_coord_lower:[65535&me,65535&xe]}}(c,E,o,m),{u_matrix:n,u_opacity:s})},Yl={fillExtrusion:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new a.Uniform1f(n,s.u_height_factor),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new a.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new a.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new a.UniformColor(n,s.u_color),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_overlay:new a.Uniform1i(n,s.u_overlay),u_overlay_scale:new a.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new a.Uniform1f(n,s.u_extrude_scale),u_intensity:new a.Uniform1f(n,s.u_intensity),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_color_ramp:new a.Uniform1i(n,s.u_color_ramp),u_opacity:new a.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_latrange:new a.Uniform2f(n,s.u_latrange),u_light:new a.Uniform2f(n,s.u_light),u_shadow:new a.UniformColor(n,s.u_shadow),u_highlight:new a.UniformColor(n,s.u_highlight),u_accent:new a.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_dimension:new a.Uniform2f(n,s.u_dimension),u_zoom:new a.Uniform1f(n,s.u_zoom),u_unpack:new a.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_image:new a.Uniform1i(n,s.u_image),u_image_height:new a.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_texsize:new a.Uniform2f(n,s.u_texsize),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_image:new a.Uniform1i(n,s.u_image),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new a.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new a.Uniform1f(n,s.u_sdfgamma),u_image:new a.Uniform1i(n,s.u_image),u_tex_y_a:new a.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new a.Uniform1f(n,s.u_tex_y_b),u_mix:new a.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new a.Uniform2f(n,s.u_tl_parent),u_scale_parent:new a.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new a.Uniform1f(n,s.u_buffer_scale),u_fade_t:new a.Uniform1f(n,s.u_fade_t),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image0:new a.Uniform1i(n,s.u_image0),u_image1:new a.Uniform1i(n,s.u_image1),u_brightness_low:new a.Uniform1f(n,s.u_brightness_low),u_brightness_high:new a.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new a.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new a.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new a.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texsize_icon:new a.Uniform2f(n,s.u_texsize_icon),u_texture:new a.Uniform1i(n,s.u_texture),u_texture_icon:new a.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_color:new a.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image:new a.Uniform1i(n,s.u_image),u_pattern_tl_a:new a.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(n,s.u_pattern_br_b),u_texsize:new a.Uniform2f(n,s.u_texsize),u_mix:new a.Uniform1f(n,s.u_mix),u_pattern_size_a:new a.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new a.Uniform1f(n,s.u_scale_a),u_scale_b:new a.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(n,s.u_tile_units_to_pixels)}}};function rl(n,s,o,c,m,E,k){for(var z=n.context,B=z.gl,Z=n.useProgram("collisionBox"),Y=[],J=0,Q=0,ue=0;ue<c.length;ue++){var le=c[ue],fe=s.getTile(le),ae=fe.getBucket(o);if(ae){var me=le.posMatrix;m[0]===0&&m[1]===0||(me=n.translatePosMatrix(le.posMatrix,fe,m,E));var xe=k?ae.textCollisionBox:ae.iconCollisionBox,Ie=ae.collisionCircleArray;if(Ie.length>0){var Me=a.create(),Le=me;a.mul(Me,ae.placementInvProjMatrix,n.transform.glCoordMatrix),a.mul(Me,Me,ae.placementViewportMatrix),Y.push({circleArray:Ie,circleOffset:Q,transform:Le,invTransform:Me}),Q=J+=Ie.length/4}xe&&Z.draw(z,B.LINES,$.disabled,oe.disabled,n.colorModeForRenderPass(),ge.disabled,_s(me,n.transform,fe),o.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,n.transform.zoom,null,null,xe.collisionVertexBuffer)}}if(k&&Y.length){var Oe=n.useProgram("collisionCircle"),Ge=new a.StructArrayLayout2f1f2i16;Ge.resize(4*J),Ge._trim();for(var Je=0,Xe=0,ct=Y;Xe<ct.length;Xe+=1)for(var St=ct[Xe],vt=0;vt<St.circleArray.length/4;vt++){var _t=4*vt,sr=St.circleArray[_t+0],lt=St.circleArray[_t+1],Nt=St.circleArray[_t+2],Gt=St.circleArray[_t+3];Ge.emplace(Je++,sr,lt,Nt,Gt,0),Ge.emplace(Je++,sr,lt,Nt,Gt,1),Ge.emplace(Je++,sr,lt,Nt,Gt,2),Ge.emplace(Je++,sr,lt,Nt,Gt,3)}(!bs||bs.length<2*J)&&(bs=function(Ui){var Ia=2*Ui,na=new a.StructArrayLayout3ui6;na.resize(Ia),na._trim();for(var pi=0;pi<Ia;pi++){var En=6*pi;na.uint16[En+0]=4*pi+0,na.uint16[En+1]=4*pi+1,na.uint16[En+2]=4*pi+2,na.uint16[En+3]=4*pi+2,na.uint16[En+4]=4*pi+3,na.uint16[En+5]=4*pi+0}return na}(J));for(var jt=z.createIndexBuffer(bs,!0),Ot=z.createVertexBuffer(Ge,a.collisionCircleLayout.members,!0),Zt=0,Ct=Y;Zt<Ct.length;Zt+=1){var Lt=Ct[Zt],pn=$s(Lt.transform,Lt.invTransform,n.transform);Oe.draw(z,B.TRIANGLES,$.disabled,oe.disabled,n.colorModeForRenderPass(),ge.disabled,pn,o.id,Ot,jt,a.SegmentVector.simpleSegment(0,2*Lt.circleOffset,Lt.circleArray.length,Lt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Ot.destroy(),jt.destroy()}}var ao=a.identity(new Float32Array(16));function oo(n,s,o,c,m,E){var k=a.getAnchorAlignment(n),z=-(k.horizontalAlign-.5)*s,B=-(k.verticalAlign-.5)*o,Z=a.evaluateVariableOffset(n,c);return new a.Point((z/m+Z[0])*E,(B/m+Z[1])*E)}function il(n,s,o,c,m,E,k,z,B,Z,Y){var J=n.text.placedSymbolArray,Q=n.text.dynamicLayoutVertexArray,ue=n.icon.dynamicLayoutVertexArray,le={};Q.clear();for(var fe=0;fe<J.length;fe++){var ae=J.get(fe),me=ae.hidden||!ae.crossTileID||n.allowVerticalPlacement&&!ae.placedOrientation?null:c[ae.crossTileID];if(me){var xe=new a.Point(ae.anchorX,ae.anchorY),Ie=Ht(xe,o?z:k),Me=lr(E.cameraToCenterDistance,Ie.signedDistanceFromCamera),Le=m.evaluateSizeForFeature(n.textSizeData,Z,ae)*Me/a.ONE_EM;o&&(Le*=n.tilePixelRatio/B);for(var Oe=oo(me.anchor,me.width,me.height,me.textOffset,me.textBoxScale,Le),Ge=o?Ht(xe.add(Oe),k).point:Ie.point.add(s?Oe.rotate(-E.angle):Oe),Je=n.allowVerticalPlacement&&ae.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,Xe=0;Xe<ae.numGlyphs;Xe++)a.addDynamicAttributes(Q,Ge,Je);Y&&ae.associatedIconIndex>=0&&(le[ae.associatedIconIndex]={shiftedAnchor:Ge,angle:Je})}else sn(ae.numGlyphs,Q)}if(Y){ue.clear();for(var ct=n.icon.placedSymbolArray,St=0;St<ct.length;St++){var vt=ct.get(St);if(vt.hidden)sn(vt.numGlyphs,ue);else{var _t=le[St];if(_t)for(var sr=0;sr<vt.numGlyphs;sr++)a.addDynamicAttributes(ue,_t.shiftedAnchor,_t.angle);else sn(vt.numGlyphs,ue)}}n.icon.dynamicLayoutVertexBuffer.updateData(ue)}n.text.dynamicLayoutVertexBuffer.updateData(Q)}function Lo(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Ti(n,s,o,c,m,E,k,z,B,Z,Y,J){for(var Q=n.context,ue=Q.gl,le=n.transform,fe=z==="map",ae=B==="map",me=fe&&o.layout.get("symbol-placement")!=="point",xe=fe&&!ae&&!me,Ie=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Me=!1,Le=n.depthModeForSublayer(0,$.ReadOnly),Oe=o.layout.get("text-variable-anchor"),Ge=[],Je=0,Xe=c;Je<Xe.length;Je+=1){var ct=Xe[Je],St=s.getTile(ct),vt=St.getBucket(o);if(vt){var _t=m?vt.text:vt.icon;if(_t&&_t.segments.get().length){var sr=_t.programConfigurations.get(o.id),lt=m||vt.sdfIcons,Nt=m?vt.textSizeData:vt.iconSizeData,Gt=ae||le.pitch!==0,jt=n.useProgram(Lo(lt,m,vt),sr),Ot=a.evaluateSizeForZoom(Nt,le.zoom),Zt=void 0,Ct=[0,0],Lt=void 0,pn=void 0,Ui=null,Ia=void 0;if(m)Lt=St.glyphAtlasTexture,pn=ue.LINEAR,Zt=St.glyphAtlasTexture.size,vt.iconsInText&&(Ct=St.imageAtlasTexture.size,Ui=St.imageAtlasTexture,Ia=Gt||n.options.rotating||n.options.zooming||Nt.kind==="composite"||Nt.kind==="camera"?ue.LINEAR:ue.NEAREST);else{var na=o.layout.get("icon-size").constantOr(0)!==1||vt.iconsNeedLinear;Lt=St.imageAtlasTexture,pn=lt||n.options.rotating||n.options.zooming||na||Gt?ue.LINEAR:ue.NEAREST,Zt=St.imageAtlasTexture.size}var pi=Er(St,1,n.transform.zoom),En=_r(ct.posMatrix,ae,fe,n.transform,pi),qn=hr(ct.posMatrix,ae,fe,n.transform,pi),Qi=Oe&&vt.hasTextData(),fo=o.layout.get("icon-text-fit")!=="none"&&Qi&&vt.hasIconData();me&&Pn(vt,ct.posMatrix,n,m,En,qn,ae,Z);var Wa=n.translatePosMatrix(ct.posMatrix,St,E,k),Ya=me||m&&Oe||fo?ao:En,Ps=n.translatePosMatrix(qn,St,E,k,!0),sc=lt&&o.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Cs={program:jt,buffers:_t,uniformValues:lt?vt.iconsInText?cs(Nt.kind,Ot,xe,ae,n,Wa,Ya,Ps,Zt,Ct):pa(Nt.kind,Ot,xe,ae,n,Wa,Ya,Ps,m,Zt,!0):tl(Nt.kind,Ot,xe,ae,n,Wa,Ya,Ps,m,Zt),atlasTexture:Lt,atlasTextureIcon:Ui,atlasInterpolation:pn,atlasInterpolationIcon:Ia,isSDF:lt,hasHalo:sc};if(Ie&&vt.canOverlap){Me=!0;for(var Go=0,Au=_t.segments.get();Go<Au.length;Go+=1){var ul=Au[Go];Ge.push({segments:new a.SegmentVector([ul]),sortKey:ul.sortKey,state:Cs})}}else Ge.push({segments:_t.segments,sortKey:0,state:Cs})}}}Me&&Ge.sort(function(Ja,Na){return Ja.sortKey-Na.sortKey});for(var Ko=0,lc=Ge;Ko<lc.length;Ko+=1){var Ds=lc[Ko],$i=Ds.state;if(Q.activeTexture.set(ue.TEXTURE0),$i.atlasTexture.bind($i.atlasInterpolation,ue.CLAMP_TO_EDGE),$i.atlasTextureIcon&&(Q.activeTexture.set(ue.TEXTURE1),$i.atlasTextureIcon&&$i.atlasTextureIcon.bind($i.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),$i.isSDF){var cl=$i.uniformValues;$i.hasHalo&&(cl.u_is_halo=1,so($i.buffers,Ds.segments,o,n,$i.program,Le,Y,J,cl)),cl.u_is_halo=0}so($i.buffers,Ds.segments,o,n,$i.program,Le,Y,J,$i.uniformValues)}}function so(n,s,o,c,m,E,k,z,B){var Z=c.context;m.draw(Z,Z.gl.TRIANGLES,E,k,z,ge.disabled,B,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,c.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Pl(n,s,o,c,m,E,k){var z,B,Z,Y,J,Q=n.context.gl,ue=o.paint.get("fill-pattern"),le=ue&&ue.constantOr(1),fe=o.getCrossfadeParameters();k?(B=le&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",z=Q.LINES):(B=le?"fillPattern":"fill",z=Q.TRIANGLES);for(var ae=0,me=c;ae<me.length;ae+=1){var xe=me[ae],Ie=s.getTile(xe);if(!le||Ie.patternsLoaded()){var Me=Ie.getBucket(o);if(Me){var Le=Me.programConfigurations.get(o.id),Oe=n.useProgram(B,Le);le&&(n.context.activeTexture.set(Q.TEXTURE0),Ie.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Le.updatePaintBuffers(fe));var Ge=ue.constantOr(null);if(Ge&&Ie.imageAtlas){var Je=Ie.imageAtlas,Xe=Je.patternPositions[Ge.to.toString()],ct=Je.patternPositions[Ge.from.toString()];Xe&&ct&&Le.setConstantPatternPositions(Xe,ct)}var St=n.translatePosMatrix(xe.posMatrix,Ie,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(k){Y=Me.indexBuffer2,J=Me.segments2;var vt=[Q.drawingBufferWidth,Q.drawingBufferHeight];Z=B==="fillOutlinePattern"&&le?Mo(St,n,fe,Ie,vt):ec(St,vt)}else Y=Me.indexBuffer,J=Me.segments,Z=le?ta(St,n,fe,Ie):Oa(St);Oe.draw(n.context,z,m,n.stencilModeForClipping(xe),E,ge.disabled,Z,o.id,Me.layoutVertexBuffer,Y,J,o.paint,n.transform.zoom,Le)}}}}function nl(n,s,o,c,m,E,k){for(var z=n.context,B=z.gl,Z=o.paint.get("fill-extrusion-pattern"),Y=Z.constantOr(1),J=o.getCrossfadeParameters(),Q=o.paint.get("fill-extrusion-opacity"),ue=0,le=c;ue<le.length;ue+=1){var fe=le[ue],ae=s.getTile(fe),me=ae.getBucket(o);if(me){var xe=me.programConfigurations.get(o.id),Ie=n.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",xe);Y&&(n.context.activeTexture.set(B.TEXTURE0),ae.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),xe.updatePaintBuffers(J));var Me=Z.constantOr(null);if(Me&&ae.imageAtlas){var Le=ae.imageAtlas,Oe=Le.patternPositions[Me.to.toString()],Ge=Le.patternPositions[Me.from.toString()];Oe&&Ge&&xe.setConstantPatternPositions(Oe,Ge)}var Je=n.translatePosMatrix(fe.posMatrix,ae,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Xe=o.paint.get("fill-extrusion-vertical-gradient"),ct=Y?ha(Je,n,Xe,Q,fe,J,ae):Qs(Je,n,Xe,Q);Ie.draw(z,z.gl.TRIANGLES,m,E,k,ge.backCCW,ct,o.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,o.paint,n.transform.zoom,xe)}}}function tc(n,s,o,c,m,E){var k=n.context,z=k.gl,B=s.fbo;if(B){var Z=n.useProgram("hillshade");k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,B.colorAttachment.get());var Y=function(J,Q,ue){var le=ue.paint.get("hillshade-shadow-color"),fe=ue.paint.get("hillshade-highlight-color"),ae=ue.paint.get("hillshade-accent-color"),me=ue.paint.get("hillshade-illumination-direction")*(Math.PI/180);ue.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=J.transform.angle);var xe,Ie,Me,Le=!J.options.moving;return{u_matrix:J.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),Le),u_image:0,u_latrange:(xe=Q.tileID,Ie=Math.pow(2,xe.canonical.z),Me=xe.canonical.y,[new a.MercatorCoordinate(0,Me/Ie).toLngLat().lat,new a.MercatorCoordinate(0,(Me+1)/Ie).toLngLat().lat]),u_light:[ue.paint.get("hillshade-exaggeration"),me],u_shadow:le,u_highlight:fe,u_accent:ae}}(n,s,o);Z.draw(k,z.TRIANGLES,c,m,E,ge.disabled,Y,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function rc(n,s,o,c,m,E){var k=n.context,z=k.gl,B=s.dem;if(B&&B.data){var Z=B.dim,Y=B.stride,J=B.getPixels();if(k.activeTexture.set(z.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(Y),s.demTexture){var Q=s.demTexture;Q.update(J,{premultiply:!1}),Q.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else s.demTexture=new a.Texture(k,J,z.RGBA,{premultiply:!1}),s.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);k.activeTexture.set(z.TEXTURE0);var ue=s.fbo;if(!ue){var le=new a.Texture(k,{width:Z,height:Z,data:null},z.RGBA);le.bind(z.LINEAR,z.CLAMP_TO_EDGE),(ue=s.fbo=k.createFramebuffer(Z,Z,!0)).colorAttachment.set(le.texture)}k.bindFramebuffer.set(ue.framebuffer),k.viewport.set([0,0,Z,Z]),n.useProgram("hillshadePrepare").draw(k,z.TRIANGLES,c,m,E,ge.disabled,function(fe,ae){var me=ae.stride,xe=a.create();return a.ortho(xe,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(xe,xe,[0,-a.EXTENT,0]),{u_matrix:xe,u_image:1,u_dimension:[me,me],u_zoom:fe.overscaledZ,u_unpack:ae.getUnpackVector()}}(s.tileID,B),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function hs(n,s,o,c,m){var E=c.paint.get("raster-fade-duration");if(E>0){var k=a.browser.now(),z=(k-n.timeAdded)/E,B=s?(k-s.timeAdded)/E:-1,Z=o.getSource(),Y=m.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),J=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(n.tileID.overscaledZ-Y),Q=J&&n.refreshedUponExpiration?1:a.clamp(J?z:1-B,0,1);return n.refreshedUponExpiration&&z>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}var xs=new a.Color(1,0,0,1),ic=new a.Color(0,1,0,1),fa=new a.Color(0,0,1,1),al=new a.Color(1,0,1,1),Jl=new a.Color(0,1,1,1);function nc(n,s,o,c){ol(n,0,s+o/2,n.transform.width,o,c)}function ps(n,s,o,c){ol(n,s-o/2,0,o,n.transform.height,c)}function ol(n,s,o,c,m,E){var k=n.context,z=k.gl;z.enable(z.SCISSOR_TEST),z.scissor(s*a.browser.devicePixelRatio,o*a.browser.devicePixelRatio,c*a.browser.devicePixelRatio,m*a.browser.devicePixelRatio),k.clear({color:E}),z.disable(z.SCISSOR_TEST)}function Ro(n,s,o){var c=n.context,m=c.gl,E=o.posMatrix,k=n.useProgram("debug"),z=$.disabled,B=oe.disabled,Z=n.colorModeForRenderPass();c.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),k.draw(c,m.LINE_STRIP,z,B,Z,ge.disabled,Gn(E,a.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var Y=s.getTileByID(o.key).latestRawTileData,J=Math.floor((Y&&Y.byteLength||0)/1024),Q=s.getTile(o).tileSize,ue=512/Math.min(Q,512)*(o.overscaledZ/n.transform.zoom)*.5,le=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(le+=" => "+o.overscaledZ),function(fe,ae){fe.initDebugOverlayCanvas();var me=fe.debugOverlayCanvas,xe=fe.context.gl,Ie=fe.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,me.width,me.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(ae,5,5),Ie.strokeText(ae,5,5),fe.debugOverlayTexture.update(me),fe.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(n,le+" "+J+"kb"),k.draw(c,m.TRIANGLES,z,B,ve.alphaBlended,ge.disabled,Gn(E,a.Color.transparent,ue),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var ra={symbol:function(n,s,o,c,m){if(n.renderPass==="translucent"){var E=oe.disabled,k=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(z,B,Z,Y,J,Q,ue){for(var le=B.transform,fe=J==="map",ae=Q==="map",me=0,xe=z;me<xe.length;me+=1){var Ie=xe[me],Me=Y.getTile(Ie),Le=Me.getBucket(Z);if(Le&&Le.text&&Le.text.segments.get().length){var Oe=a.evaluateSizeForZoom(Le.textSizeData,le.zoom),Ge=Er(Me,1,B.transform.zoom),Je=_r(Ie.posMatrix,ae,fe,B.transform,Ge),Xe=Z.layout.get("icon-text-fit")!=="none"&&Le.hasIconData();if(Oe){var ct=Math.pow(2,le.zoom-Me.tileID.overscaledZ);il(Le,fe,ae,ue,a.symbolSize,le,Je,Ie.posMatrix,ct,Oe,Xe)}}}}(c,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),m),o.paint.get("icon-opacity").constantOr(1)!==0&&Ti(n,s,o,c,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),E,k),o.paint.get("text-opacity").constantOr(1)!==0&&Ti(n,s,o,c,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),E,k),s.map.showCollisionBoxes&&(rl(n,s,o,c,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),rl(n,s,o,c,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,c){if(n.renderPass==="translucent"){var m=o.paint.get("circle-opacity"),E=o.paint.get("circle-stroke-width"),k=o.paint.get("circle-stroke-opacity"),z=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||E.constantOr(1)!==0&&k.constantOr(1)!==0){for(var B=n.context,Z=B.gl,Y=n.depthModeForSublayer(0,$.ReadOnly),J=oe.disabled,Q=n.colorModeForRenderPass(),ue=[],le=0;le<c.length;le++){var fe=c[le],ae=s.getTile(fe),me=ae.getBucket(o);if(me){var xe=me.programConfigurations.get(o.id),Ie={programConfiguration:xe,program:n.useProgram("circle",xe),layoutVertexBuffer:me.layoutVertexBuffer,indexBuffer:me.indexBuffer,uniformValues:wn(n,fe,ae,o)};if(z)for(var Me=0,Le=me.segments.get();Me<Le.length;Me+=1){var Oe=Le[Me];ue.push({segments:new a.SegmentVector([Oe]),sortKey:Oe.sortKey,state:Ie})}else ue.push({segments:me.segments,sortKey:0,state:Ie})}}z&&ue.sort(function(St,vt){return St.sortKey-vt.sortKey});for(var Ge=0,Je=ue;Ge<Je.length;Ge+=1){var Xe=Je[Ge],ct=Xe.state;ct.program.draw(B,Z.TRIANGLES,Y,J,Q,ge.disabled,ct.uniformValues,o.id,ct.layoutVertexBuffer,ct.indexBuffer,Xe.segments,o.paint,n.transform.zoom,ct.programConfiguration)}}}},heatmap:function(n,s,o,c){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,E=m.gl,k=oe.disabled,z=new ve([E.ONE,E.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ue,le,fe){var ae=ue.gl;ue.activeTexture.set(ae.TEXTURE1),ue.viewport.set([0,0,le.width/4,le.height/4]);var me=fe.heatmapFbo;if(me)ae.bindTexture(ae.TEXTURE_2D,me.colorAttachment.get()),ue.bindFramebuffer.set(me.framebuffer);else{var xe=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,xe),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),me=fe.heatmapFbo=ue.createFramebuffer(le.width/4,le.height/4,!1),function(Ie,Me,Le,Oe){var Ge=Ie.gl;Ge.texImage2D(Ge.TEXTURE_2D,0,Ge.RGBA,Me.width/4,Me.height/4,0,Ge.RGBA,Ie.extRenderToTextureHalfFloat?Ie.extTextureHalfFloat.HALF_FLOAT_OES:Ge.UNSIGNED_BYTE,null),Oe.colorAttachment.set(Le)}(ue,le,xe,me)}})(m,n,o),m.clear({color:a.Color.transparent});for(var B=0;B<c.length;B++){var Z=c[B];if(!s.hasRenderableParent(Z)){var Y=s.getTile(Z),J=Y.getBucket(o);if(J){var Q=J.programConfigurations.get(o.id);n.useProgram("heatmap",Q).draw(m,E.TRIANGLES,$.disabled,k,z,ge.disabled,Tl(Z.posMatrix,Y,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,o.paint,n.transform.zoom,Q)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(ue,le){var fe=ue.context,ae=fe.gl,me=le.heatmapFbo;if(me){fe.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,me.colorAttachment.get()),fe.activeTexture.set(ae.TEXTURE1);var xe=le.colorRampTexture;xe||(xe=le.colorRampTexture=new a.Texture(fe,le.colorRamp,ae.RGBA)),xe.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),ue.useProgram("heatmapTexture").draw(fe,ae.TRIANGLES,$.disabled,oe.disabled,ue.colorModeForRenderPass(),ge.disabled,function(Ie,Me,Le,Oe){var Ge=a.create();a.ortho(Ge,0,Ie.width,Ie.height,0,0,1);var Je=Ie.context.gl;return{u_matrix:Ge,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Me.paint.get("heatmap-opacity")}}(ue,le),le.id,ue.viewportBuffer,ue.quadTriangleIndexBuffer,ue.viewportSegments,le.paint,ue.transform.zoom)}}(n,o))},line:function(n,s,o,c){if(n.renderPass==="translucent"){var m=o.paint.get("line-opacity"),E=o.paint.get("line-width");if(m.constantOr(1)!==0&&E.constantOr(1)!==0)for(var k=n.depthModeForSublayer(0,$.ReadOnly),z=n.colorModeForRenderPass(),B=o.paint.get("line-dasharray"),Z=o.paint.get("line-pattern"),Y=Z.constantOr(1),J=o.paint.get("line-gradient"),Q=o.getCrossfadeParameters(),ue=Y?"linePattern":B?"lineSDF":J?"lineGradient":"line",le=n.context,fe=le.gl,ae=!0,me=0,xe=c;me<xe.length;me+=1){var Ie=xe[me],Me=s.getTile(Ie);if(!Y||Me.patternsLoaded()){var Le=Me.getBucket(o);if(Le){var Oe=Le.programConfigurations.get(o.id),Ge=n.context.program.get(),Je=n.useProgram(ue,Oe),Xe=ae||Je.program!==Ge,ct=Z.constantOr(null);if(ct&&Me.imageAtlas){var St=Me.imageAtlas,vt=St.patternPositions[ct.to.toString()],_t=St.patternPositions[ct.from.toString()];vt&&_t&&Oe.setConstantPatternPositions(vt,_t)}var sr=Y?Fe(n,Me,o,Q):B?It(n,Me,o,B,Q):J?Qr(n,Me,o,Le.lineClipsArray.length):no(n,Me,o);if(Y)le.activeTexture.set(fe.TEXTURE0),Me.imageAtlasTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Oe.updatePaintBuffers(Q);else if(B&&(Xe||n.lineAtlas.dirty))le.activeTexture.set(fe.TEXTURE0),n.lineAtlas.bind(le);else if(J){var lt=Le.gradients[o.id],Nt=lt.texture;if(o.gradientVersion!==lt.version){var Gt=256;if(o.stepInterpolant){var jt=s.getSource().maxzoom,Ot=Ie.canonical.z===jt?Math.ceil(1<<n.transform.maxZoom-Ie.canonical.z):1;Gt=a.clamp(a.nextPowerOfTwo(Le.maxLineLength/a.EXTENT*1024*Ot),256,le.maxTextureSize)}lt.gradient=a.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Gt,image:lt.gradient||void 0,clips:Le.lineClipsArray}),lt.texture?lt.texture.update(lt.gradient):lt.texture=new a.Texture(le,lt.gradient,fe.RGBA),lt.version=o.gradientVersion,Nt=lt.texture}le.activeTexture.set(fe.TEXTURE0),Nt.bind(o.stepInterpolant?fe.NEAREST:fe.LINEAR,fe.CLAMP_TO_EDGE)}Je.draw(le,fe.TRIANGLES,k,n.stencilModeForClipping(Ie),z,ge.disabled,sr,o.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,o.paint,n.transform.zoom,Oe,Le.layoutVertexBuffer2),ae=!1}}}}},fill:function(n,s,o,c){var m=o.paint.get("fill-color"),E=o.paint.get("fill-opacity");if(E.constantOr(1)!==0){var k=n.colorModeForRenderPass(),z=o.paint.get("fill-pattern"),B=n.opaquePassEnabledForLayer()&&!z.constantOr(1)&&m.constantOr(a.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===B){var Z=n.depthModeForSublayer(1,n.renderPass==="opaque"?$.ReadWrite:$.ReadOnly);Pl(n,s,o,c,Z,k,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var Y=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,$.ReadOnly);Pl(n,s,o,c,Y,k,!0)}}},"fill-extrusion":function(n,s,o,c){var m=o.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var E=new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D);if(m!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))nl(n,s,o,c,E,oe.disabled,ve.disabled),nl(n,s,o,c,E,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var k=n.colorModeForRenderPass();nl(n,s,o,c,E,oe.disabled,k)}}},hillshade:function(n,s,o,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,E=n.depthModeForSublayer(0,$.ReadOnly),k=n.colorModeForRenderPass(),z=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],B=z[0],Z=0,Y=z[1];Z<Y.length;Z+=1){var J=Y[Z],Q=s.getTile(J);Q.needsHillshadePrepare&&n.renderPass==="offscreen"?rc(n,Q,o,E,oe.disabled,k):n.renderPass==="translucent"&&tc(n,Q,o,E,B[J.overscaledZ],k)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,c){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&c.length)for(var m=n.context,E=m.gl,k=s.getSource(),z=n.useProgram("raster"),B=n.colorModeForRenderPass(),Z=k instanceof cr?[{},c]:n.stencilConfigForOverlap(c),Y=Z[0],J=Z[1],Q=J[J.length-1].overscaledZ,ue=!n.options.moving,le=0,fe=J;le<fe.length;le+=1){var ae=fe[le],me=n.depthModeForSublayer(ae.overscaledZ-Q,o.paint.get("raster-opacity")===1?$.ReadWrite:$.ReadOnly,E.LESS),xe=s.getTile(ae),Ie=n.transform.calculatePosMatrix(ae.toUnwrapped(),ue);xe.registerFadeDuration(o.paint.get("raster-fade-duration"));var Me=s.findLoadedParent(ae,0),Le=hs(xe,Me,s,o,n.transform),Oe=void 0,Ge=void 0,Je=o.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;m.activeTexture.set(E.TEXTURE0),xe.texture.bind(Je,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(E.TEXTURE1),Me?(Me.texture.bind(Je,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,Me.tileID.overscaledZ-xe.tileID.overscaledZ),Ge=[xe.tileID.canonical.x*Oe%1,xe.tileID.canonical.y*Oe%1]):xe.texture.bind(Je,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);var Xe=Al(Ie,Ge||[0,0],Oe||1,Le,o);k instanceof cr?z.draw(m,E.TRIANGLES,me,oe.disabled,B,ge.disabled,Xe,o.id,k.boundsBuffer,n.quadTriangleIndexBuffer,k.boundsSegments):z.draw(m,E.TRIANGLES,me,Y[ae.overscaledZ],B,ge.disabled,Xe,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var c=o.paint.get("background-color"),m=o.paint.get("background-opacity");if(m!==0){var E=n.context,k=E.gl,z=n.transform,B=z.tileSize,Z=o.paint.get("background-pattern");if(!n.isPatternMissing(Z)){var Y=!Z&&c.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===Y){var J=oe.disabled,Q=n.depthModeForSublayer(0,Y==="opaque"?$.ReadWrite:$.ReadOnly),ue=n.colorModeForRenderPass(),le=n.useProgram(Z?"backgroundPattern":"background"),fe=z.coveringTiles({tileSize:B});Z&&(E.activeTexture.set(k.TEXTURE0),n.imageManager.bind(n.context));for(var ae=o.getCrossfadeParameters(),me=0,xe=fe;me<xe.length;me+=1){var Ie=xe[me],Me=n.transform.calculatePosMatrix(Ie.toUnwrapped()),Le=Z?wa(Me,m,n,Z,{tileID:Ie,tileSize:B},ae):zl(Me,m,c);le.draw(E,k.TRIANGLES,Q,J,ue,ge.disabled,Le,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var c=0;c<o.length;c++)Ro(n,s,o[c])},custom:function(n,s,o){var c=n.context,m=o.implementation;if(n.renderPass==="offscreen"){var E=m.prerender;E&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),E.call(m,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(oe.disabled);var k=m.renderingMode==="3d"?new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,$.ReadOnly);c.setDepthMode(k),m.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},Lr=function(n,s){this.context=new X(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=ne.maxUnderzooming+ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Se,this.gpuTimers={}};Lr.prototype.resize=function(n,s){if(this.width=n*a.browser.devicePixelRatio,this.height=s*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,c=this.style._order;o<c.length;o+=1)this.style._layers[c[o]].resize()},Lr.prototype.setup=function(){var n=this.context,s=new a.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Nr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var o=new a.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(a.EXTENT,0),o.emplaceBack(0,a.EXTENT),o.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=n.createVertexBuffer(o,Nr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var c=new a.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(a.EXTENT,0,a.EXTENT,0),c.emplaceBack(0,a.EXTENT,0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,nt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var m=new a.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,Nr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var E=new a.StructArrayLayout1ui2;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(E);var k=new a.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k),this.emptyTexture=new a.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var z=this.context.gl;this.stencilClearMode=new oe({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)},Lr.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=a.create();a.ortho(o,0,this.width,this.height,0,0,1),a.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,$.disabled,this.stencilClearMode,ve.disabled,ge.disabled,hn(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Lr.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,c=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(ve.disabled),o.setDepthMode($.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var E=0,k=s;E<k.length;E+=1){var z=k[E],B=this._tileClippingMaskIDs[z.key]=this.nextStencilID++;m.draw(o,c.TRIANGLES,$.disabled,new oe({func:c.ALWAYS,mask:0},B,255,c.KEEP,c.KEEP,c.REPLACE),ve.disabled,ge.disabled,hn(z.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Lr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new oe({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Lr.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new oe({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Lr.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,c=n.sort(function(B,Z){return Z.overscaledZ-B.overscaledZ}),m=c[c.length-1].overscaledZ,E=c[0].overscaledZ-m+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();for(var k={},z=0;z<E;z++)k[z+m]=new oe({func:o.GEQUAL,mask:255},z+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=E,[k,c]}return[(s={},s[m]=oe.disabled,s),c]},Lr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ve([n.CONSTANT_COLOR,n.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ve.unblended:ve.alphaBlended},Lr.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return $.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $(o||this.context.gl.LEQUAL,s,[c,c])},Lr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Lr.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var c=this.style._order,m=this.style.sourceCaches;for(var E in m){var k=m[E];k.used&&k.prepare(this.context)}var z,B,Z={},Y={},J={};for(var Q in m){var ue=m[Q];Z[Q]=ue.getVisibleCoordinates(),Y[Q]=Z[Q].slice().reverse(),J[Q]=ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var le=0;le<c.length;le++)if(this.style._layers[c[le]].is3D()){this.opaquePassCutoff=le;break}this.renderPass="offscreen";for(var fe=0,ae=c;fe<ae.length;fe+=1){var me=this.style._layers[ae[fe]];if(me.hasOffscreenPass()&&!me.isHidden(this.transform.zoom)){var xe=Y[me.source];(me.type==="custom"||xe.length)&&this.renderLayer(this,m[me.source],me,xe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var Ie=this.style._layers[c[this.currentLayer]],Me=m[Ie.source],Le=Z[Ie.source];this._renderTileClippingMasks(Ie,Le),this.renderLayer(this,Me,Ie,Le)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Oe=this.style._layers[c[this.currentLayer]],Ge=m[Oe.source],Je=(Oe.type==="symbol"?J:Y)[Oe.source];this._renderTileClippingMasks(Oe,Z[Oe.source]),this.renderLayer(this,Ge,Oe,Je)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(Xe){Xe.source&&!Xe.isHidden(o.transform.zoom)&&(Xe.source!==(B&&B.id)&&(B=o.style.sourceCaches[Xe.source]),(!z||z.getSource().maxzoom<B.getSource().maxzoom)&&(z=B))}),z&&ra.debug(this,z,z.getVisibleCoordinates())),this.options.showPadding&&function(Xe){var ct=Xe.transform.padding;nc(Xe,Xe.transform.height-(ct.top||0),3,xs),nc(Xe,ct.bottom||0,3,ic),ps(Xe,ct.left||0,3,fa),ps(Xe,Xe.transform.width-(ct.right||0),3,al);var St=Xe.transform.centerPoint;(function(vt,_t,sr,lt){ol(vt,_t-1,sr-10,2,20,lt),ol(vt,_t-10,sr-1,20,2,lt)})(Xe,St.x,Xe.transform.height-St.y,Jl)}(this),this.context.setDefault()},Lr.prototype.renderLayer=function(n,s,o,c){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||c.length)&&(this.id=o.id,this.gpuTimingStart(o),ra[o.type](n,s,o,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Lr.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Lr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Lr.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Lr.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var c=n[o],m=this.context.extTimerQuery,E=m.getQueryObjectEXT(c.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(c.query),s[o]=E}return s},Lr.prototype.translatePosMatrix=function(n,s,o,c,m){if(!o[0]&&!o[1])return n;var E=m?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(E){var k=Math.sin(E),z=Math.cos(E);o=[o[0]*z-o[1]*k,o[0]*k+o[1]*z]}var B=[m?o[0]:Er(s,o[0],this.transform.zoom),m?o[1]:Er(s,o[1],this.transform.zoom),0],Z=new Float32Array(16);return a.translate(Z,n,B),Z},Lr.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Lr.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Lr.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Lr.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new io(this.context,n,Dn[n],s,Yl[n],this._showOverdrawInspector)),this.cache[o]},Lr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Lr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Lr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Lr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _o=function(n,s){this.points=n,this.planes=s};_o.fromInvProjectionMatrix=function(n,s,o){var c=Math.pow(2,o),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(k){return a.transformMat4([],k,n)}).map(function(k){return a.scale$1([],k,1/k[3]/s*c)}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(k){var z=a.sub([],m[k[0]],m[k[1]]),B=a.sub([],m[k[2]],m[k[1]]),Z=a.normalize([],a.cross([],z,B)),Y=-a.dot(Z,m[k[1]]);return Z.concat(Y)});return new _o(m,E)};var lo=function(n,s){this.min=n,this.max=s,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};lo.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=a.clone$2(this.min),c=a.clone$2(this.max),m=0;m<s.length;m++)o[m]=s[m]?this.min[m]:this.center[m],c[m]=s[m]?this.center[m]:this.max[m];return c[2]=this.max[2],new lo(o,c)},lo.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},lo.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},lo.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,c=0;c<n.planes.length;c++){for(var m=n.planes[c],E=0,k=0;k<s.length;k++)E+=a.dot$1(m,s[k])>=0;if(E===0)return 0;E!==s.length&&(o=!1)}if(o)return 2;for(var z=0;z<3;z++){for(var B=Number.MAX_VALUE,Z=-Number.MAX_VALUE,Y=0;Y<n.points.length;Y++){var J=n.points[Y][z]-this.min[z];B=Math.min(B,J),Z=Math.max(Z,J)}if(Z<0||B>this.max[z]-this.min[z])return 0}return 1};var sl=function(n,s,o,c){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=c};sl.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=a.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=a.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=a.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=a.number(n.right,s.right,o)),this},sl.prototype.getCenter=function(n,s){var o=a.clamp((this.left+n-this.right)/2,0,n),c=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.Point(o,c)},sl.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},sl.prototype.clone=function(){return new sl(this.top,this.bottom,this.left,this.right)},sl.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var dr=function(n,s,o,c,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o==null?0:o,this._maxPitch=c==null?60:c,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sl,this._posMatrixCache={},this._alignedPosMatrixCache={}},Rr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};dr.prototype.clone=function(){var n=new dr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Rr.minZoom.get=function(){return this._minZoom},Rr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Rr.maxZoom.get=function(){return this._maxZoom},Rr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Rr.minPitch.get=function(){return this._minPitch},Rr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Rr.maxPitch.get=function(){return this._maxPitch},Rr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Rr.renderWorldCopies.get=function(){return this._renderWorldCopies},Rr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Rr.worldSize.get=function(){return this.tileSize*this.scale},Rr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Rr.size.get=function(){return new a.Point(this.width,this.height)},Rr.bearing.get=function(){return-this.angle/Math.PI*180},Rr.bearing.set=function(n){var s=-a.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Rr.pitch.get=function(){return this._pitch/Math.PI*180},Rr.pitch.set=function(n){var s=a.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Rr.fov.get=function(){return this._fov/Math.PI*180},Rr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Rr.zoom.get=function(){return this._zoom},Rr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Rr.center.get=function(){return this._center},Rr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Rr.padding.get=function(){return this._edgeInsets.toJSON()},Rr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Rr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},dr.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},dr.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},dr.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},dr.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new a.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new a.Point(0,0)),c=this.pointCoordinate(new a.Point(this.width,0)),m=this.pointCoordinate(new a.Point(this.width,this.height)),E=this.pointCoordinate(new a.Point(0,this.height)),k=Math.floor(Math.min(o.x,c.x,m.x,E.x)),z=Math.floor(Math.max(o.x,c.x,m.x,E.x)),B=k-1;B<=z+1;B++)B!==0&&s.push(new a.UnwrappedTileID(B,n));return s},dr.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=a.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),E=[m*c.x,m*c.y,0],k=_o.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),z=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(z=s);var B=function(Xe){return{aabb:new lo([Xe*m,0,0],[(Xe+1)*m,m,0]),zoom:0,x:0,y:0,wrap:Xe,fullyVisible:!1}},Z=[],Y=[],J=s,Q=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var ue=1;ue<=3;ue++)Z.push(B(-ue)),Z.push(B(ue));for(Z.push(B(0));Z.length>0;){var le=Z.pop(),fe=le.x,ae=le.y,me=le.fullyVisible;if(!me){var xe=le.aabb.intersects(k);if(xe===0)continue;me=xe===2}var Ie=le.aabb.distanceX(E),Me=le.aabb.distanceY(E),Le=Math.max(Math.abs(Ie),Math.abs(Me));if(le.zoom===J||Le>3+(1<<J-le.zoom)-2&&le.zoom>=z)Y.push({tileID:new a.OverscaledTileID(le.zoom===J?Q:le.zoom,le.wrap,le.zoom,fe,ae),distanceSq:a.sqrLen([E[0]-.5-fe,E[1]-.5-ae])});else for(var Oe=0;Oe<4;Oe++){var Ge=(fe<<1)+Oe%2,Je=(ae<<1)+(Oe>>1);Z.push({aabb:le.aabb.quadrant(Oe),zoom:le.zoom+1,x:Ge,y:Je,wrap:le.wrap,fullyVisible:me})}}return Y.sort(function(Xe,ct){return Xe.distanceSq-ct.distanceSq}).map(function(Xe){return Xe.tileID})},dr.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Rr.unmodified.get=function(){return this._unmodified},dr.prototype.zoomScale=function(n){return Math.pow(2,n)},dr.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},dr.prototype.project=function(n){var s=a.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(n.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)},dr.prototype.unproject=function(n){return new a.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Rr.point.get=function(){return this.project(this.center)},dr.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),E=new a.MercatorCoordinate(m.x-(o.x-c.x),m.y-(o.y-c.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())},dr.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},dr.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},dr.prototype.locationCoordinate=function(n){return a.MercatorCoordinate.fromLngLat(n)},dr.prototype.coordinateLocation=function(n){return n.toLngLat()},dr.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(o,o,this.pixelMatrixInverse);var c=s[3],m=o[3],E=s[1]/c,k=o[1]/m,z=s[2]/c,B=o[2]/m,Z=z===B?0:(0-z)/(B-z);return new a.MercatorCoordinate(a.number(s[0]/c,o[0]/m,Z)/this.worldSize,a.number(E,k,Z)/this.worldSize)},dr.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.Point(s[0]/s[3],s[1]/s[3])},dr.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},dr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},dr.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},dr.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[o])return c[o];var m=n.canonical,E=this.worldSize/this.zoomScale(m.z),k=m.x+Math.pow(2,m.z)*n.wrap,z=a.identity(new Float64Array(16));return a.translate(z,z,[k*E,m.y*E,0]),a.scale(z,z,[E/a.EXTENT,E/a.EXTENT,1]),a.multiply(z,s?this.alignedProjMatrix:this.projMatrix,z),c[o]=new Float32Array(z),c[o]},dr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},dr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,c,m=-90,E=90,k=-180,z=180,B=this.size,Z=this._unmodified;if(this.latRange){var Y=this.latRange;m=a.mercatorYfromLat(Y[1])*this.worldSize,n=(E=a.mercatorYfromLat(Y[0])*this.worldSize)-m<B.y?B.y/(E-m):0}if(this.lngRange){var J=this.lngRange;k=a.mercatorXfromLng(J[0])*this.worldSize,s=(z=a.mercatorXfromLng(J[1])*this.worldSize)-k<B.x?B.x/(z-k):0}var Q=this.point,ue=Math.max(s||0,n||0);if(ue)return this.center=this.unproject(new a.Point(s?(z+k)/2:Q.x,n?(E+m)/2:Q.y)),this.zoom+=this.scaleZoom(ue),this._unmodified=Z,void(this._constraining=!1);if(this.latRange){var le=Q.y,fe=B.y/2;le-fe<m&&(c=m+fe),le+fe>E&&(c=E-fe)}if(this.lngRange){var ae=Q.x,me=B.x/2;ae-me<k&&(o=k+me),ae+me>z&&(o=z-me)}o===void 0&&c===void 0||(this.center=this.unproject(new a.Point(o!==void 0?o:Q.x,c!==void 0?c:Q.y))),this._unmodified=Z,this._constraining=!1}},dr.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),c=Math.sin(o)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-o,.01,Math.PI-.01)),m=this.point,E=m.x,k=m.y,z=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),B=this.height/50,Z=new Float64Array(16);a.perspective(Z,this._fov,this.width/this.height,B,z),Z[8]=2*-n.x/this.width,Z[9]=2*n.y/this.height,a.scale(Z,Z,[1,-1,1]),a.translate(Z,Z,[0,0,-this.cameraToCenterDistance]),a.rotateX(Z,Z,this._pitch),a.rotateZ(Z,Z,this.angle),a.translate(Z,Z,[-E,-k,0]),this.mercatorMatrix=a.scale([],Z,[this.worldSize,this.worldSize,this.worldSize]),a.scale(Z,Z,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Z,this.invProjMatrix=a.invert([],this.projMatrix);var Y=this.width%2/2,J=this.height%2/2,Q=Math.cos(this.angle),ue=Math.sin(this.angle),le=E-Math.round(E)+Q*Y+ue*J,fe=k-Math.round(k)+Q*J+ue*Y,ae=new Float64Array(Z);if(a.translate(ae,ae,[le>.5?le-1:le,fe>.5?fe-1:fe,0]),this.alignedProjMatrix=ae,Z=a.create(),a.scale(Z,Z,[this.width/2,-this.height/2,1]),a.translate(Z,Z,[1,-1,0]),this.labelPlaneMatrix=Z,Z=a.create(),a.scale(Z,Z,[1,-1,1]),a.translate(Z,Z,[-1,-1,0]),a.scale(Z,Z,[2/this.width,2/this.height,1]),this.glCoordMatrix=Z,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Z=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Z,this._posMatrixCache={},this._alignedPosMatrixCache={}}},dr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new a.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},dr.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,n))},dr.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,c=s.y,m=s.x,E=s.y,k=0,z=n;k<z.length;k+=1){var B=z[k];o=Math.min(o,B.x),c=Math.min(c,B.y),m=Math.max(m,B.x),E=Math.max(E,B.y)}return[new a.Point(o,c),new a.Point(m,c),new a.Point(m,E),new a.Point(o,E),new a.Point(o,c)]},Object.defineProperties(dr.prototype,Rr);var Hn=function(n){var s,o,c,m;this._hashName=n&&encodeURIComponent(n),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,c=null,m=function(){c=null,o&&(s(),c=setTimeout(m,300),o=!1)},function(){return o=!0,c||m(),c})};Hn.prototype.addTo=function(n){return this._map=n,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Hn.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Hn.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,c=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,c),E=Math.round(s.lng*m)/m,k=Math.round(s.lat*m)/m,z=this._map.getBearing(),B=this._map.getPitch(),Z="";if(Z+=n?"/"+E+"/"+k+"/"+o:o+"/"+k+"/"+E,(z||B)&&(Z+="/"+Math.round(10*z)/10),B&&(Z+="/"+Math.round(B)),this._hashName){var Y=this._hashName,J=!1,Q=a.window.location.hash.slice(1).split("&").map(function(ue){var le=ue.split("=")[0];return le===Y?(J=!0,le+"="+Z):ue}).filter(function(ue){return ue});return J||Q.push(Y+"="+Z),"#"+Q.join("&")}return"#"+Z},Hn.prototype._getCurrentHash=function(){var n,s=this,o=a.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):o.split("/")},Hn.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},Hn.prototype._updateHashUnthrottled=function(){var n=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,n)}catch{}};var ws={linearity:.3,easing:a.bezier(0,0,.3,1)},Ga=a.extend({deceleration:2500,maxSpeed:1400},ws),Es=a.extend({deceleration:20,maxSpeed:1400},ws),Gc=a.extend({deceleration:1e3,maxSpeed:360},ws),Kc=a.extend({deceleration:1e3,maxSpeed:90},ws),bo=function(n){this._map=n,this.clear()};function Bo(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function Oo(n,s,o){var c=o.maxSpeed,m=o.linearity,E=o.deceleration,k=a.clamp(n*m/(s/1e3),-c,c),z=Math.abs(k)/(E*m);return{easing:o.easing,duration:1e3*z,amount:k*(z/2)}}bo.prototype.clear=function(){this._inertiaBuffer=[]},bo.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:n})},bo.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=a.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},bo.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},o=0,c=this._inertiaBuffer;o<c.length;o+=1){var m=c[o].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(s.pan.mag()){var z=Oo(s.pan.mag(),E,a.extend({},Ga,n||{}));k.offset=s.pan.mult(z.amount/s.pan.mag()),k.center=this._map.transform.center,Bo(k,z)}if(s.zoom){var B=Oo(s.zoom,E,Es);k.zoom=this._map.transform.zoom+B.amount,Bo(k,B)}if(s.bearing){var Z=Oo(s.bearing,E,Gc);k.bearing=this._map.transform.bearing+a.clamp(Z.amount,-179,179),Bo(k,Z)}if(s.pitch){var Y=Oo(s.pitch,E,Kc);k.pitch=this._map.transform.pitch+Y.amount,Bo(k,Y)}if(k.zoom||k.bearing){var J=s.pinchAround===void 0?s.around:s.pinchAround;k.around=J?this._map.unproject(J):this._map.getCenter()}return this.clear(),a.extend(k,{noMoveStart:!0})}};var Kr=function(n){function s(c,m,E,k){k===void 0&&(k={});var z=A.mousePos(m.getCanvasContainer(),E),B=m.unproject(z);n.call(this,c,a.extend({point:z,lngLat:B,originalEvent:E},k)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),Ea=function(n){function s(c,m,E){var k=c==="touchend"?E.changedTouches:E.touches,z=A.touchPos(m.getCanvasContainer(),k),B=z.map(function(J){return m.unproject(J)}),Z=z.reduce(function(J,Q,ue,le){return J.add(Q.div(le.length))},new a.Point(0,0)),Y=m.unproject(Z);n.call(this,c,{points:z,point:Z,lngLats:B,lngLat:Y,originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),xo=function(n){function s(c,m,E){n.call(this,c,{originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),_i=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};_i.prototype.reset=function(){delete this._mousedownPos},_i.prototype.wheel=function(n){return this._firePreventable(new xo(n.type,this._map,n))},_i.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new Kr(n.type,this._map,n))},_i.prototype.mouseup=function(n){this._map.fire(new Kr(n.type,this._map,n))},_i.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Kr(n.type,this._map,n))},_i.prototype.dblclick=function(n){return this._firePreventable(new Kr(n.type,this._map,n))},_i.prototype.mouseover=function(n){this._map.fire(new Kr(n.type,this._map,n))},_i.prototype.mouseout=function(n){this._map.fire(new Kr(n.type,this._map,n))},_i.prototype.touchstart=function(n){return this._firePreventable(new Ea(n.type,this._map,n))},_i.prototype.touchmove=function(n){this._map.fire(new Ea(n.type,this._map,n))},_i.prototype.touchend=function(n){this._map.fire(new Ea(n.type,this._map,n))},_i.prototype.touchcancel=function(n){this._map.fire(new Ea(n.type,this._map,n))},_i.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},_i.prototype.isEnabled=function(){return!0},_i.prototype.isActive=function(){return!1},_i.prototype.enable=function(){},_i.prototype.disable=function(){};var ft=function(n){this._map=n};ft.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ft.prototype.mousemove=function(n){this._map.fire(new Kr(n.type,this._map,n))},ft.prototype.mousedown=function(){this._delayContextMenu=!0},ft.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Kr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ft.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Kr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},ft.prototype.isEnabled=function(){return!0},ft.prototype.isActive=function(){return!1},ft.prototype.enable=function(){},ft.prototype.disable=function(){};var Sa=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Vo(n,s){for(var o={},c=0;c<n.length;c++)o[n[c].identifier]=s[c];return o}Sa.prototype.isEnabled=function(){return!!this._enabled},Sa.prototype.isActive=function(){return!!this._active},Sa.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Sa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Sa.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(A.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Sa.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=o,this._box||(this._box=A.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(c.x,o.x),E=Math.max(c.x,o.x),k=Math.min(c.y,o.y),z=Math.max(c.y,o.y);A.setTransform(this._box,"translate("+m+"px,"+k+"px)"),this._box.style.width=E-m+"px",this._box.style.height=z-k+"px"}}},Sa.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var c=this._startPos,m=s;if(this.reset(),A.suppressClick(),c.x!==m.x||c.y!==m.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(E){return E.fitScreenCoordinates(c,m,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},Sa.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},Sa.prototype.blur=function(){this.reset()},Sa.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos},Sa.prototype._fireEvent=function(n,s){return this._map.fire(new a.Event(n,{originalEvent:s}))};var Un=function(n){this.reset(),this.numTouches=n.numTouches};Un.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Un.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(c){for(var m=new a.Point(0,0),E=0,k=c;E<k.length;E+=1)m._add(k[E]);return m.div(c.length)}(s),this.touches=Vo(o,s)))},Un.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var c=Vo(o,s);for(var m in this.touches){var E=c[m];(!E||E.dist(this.touches[m])>30)&&(this.aborted=!0)}}},Un.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var uo=function(n){this.singleTap=new Un(n),this.numTaps=n.numTaps,this.reset()};uo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},uo.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},uo.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},uo.prototype.touchend=function(n,s,o){var c=this.singleTap.touchend(n,s,o);if(c){var m=n.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(c)<30;if(m&&E||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var Xn=function(){this._zoomIn=new uo({numTouches:1,numTaps:2}),this._zoomOut=new uo({numTouches:2,numTaps:1}),this.reset()};Xn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Xn.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},Xn.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},Xn.prototype.touchend=function(n,s,o){var c=this,m=this._zoomIn.touchend(n,s,o),E=this._zoomOut.touchend(n,s,o);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(m)},{originalEvent:n})}}):E?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(E)},{originalEvent:n})}}):void 0},Xn.prototype.touchcancel=function(){this.reset()},Xn.prototype.enable=function(){this._enabled=!0},Xn.prototype.disable=function(){this._enabled=!1,this.reset()},Xn.prototype.isEnabled=function(){return this._enabled},Xn.prototype.isActive=function(){return this._active};var Su={0:1,2:2},rt=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};rt.prototype.blur=function(){this.reset()},rt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rt.prototype._correctButton=function(n,s){return!1},rt.prototype._move=function(n,s){return{}},rt.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=A.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},rt.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(c,m){var E=Su[m];return c.buttons===void 0||(c.buttons&E)!==E}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},rt.prototype.mouseupWindow=function(n){this._lastPoint&&A.mouseButton(n)===this._eventButton&&(this._moved&&A.suppressClick(),this.reset())},rt.prototype.enable=function(){this._enabled=!0},rt.prototype.disable=function(){this._enabled=!1,this.reset()},rt.prototype.isEnabled=function(){return this._enabled},rt.prototype.isActive=function(){return this._active};var ll=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,c){n.prototype.mousedown.call(this,o,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,c){return c===0&&!o.ctrlKey},s.prototype._move=function(o,c){return{around:c,panDelta:c.sub(o)}},s}(rt),Cl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var m=.8*(c.x-o.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(rt),Fo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var m=-.5*(c.y-o.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(rt),Mi=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};Mi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Mi.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},Mi.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},Mi.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},Mi.prototype.touchcancel=function(){this.reset()},Mi.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var c=Vo(o,s),m=new a.Point(0,0),E=new a.Point(0,0),k=0;for(var z in c){var B=c[z],Z=this._touches[z];Z&&(m._add(B),E._add(B.sub(Z)),k++,c[z]=B)}if(this._touches=c,!(k<this._minTouches)&&E.mag()){var Y=E.div(k);if(this._sum._add(Y),!(this._sum.mag()<this._clickTolerance))return{around:m.div(k),panDelta:Y}}},Mi.prototype.enable=function(){this._enabled=!0},Mi.prototype.disable=function(){this._enabled=!1,this.reset()},Mi.prototype.isEnabled=function(){return this._enabled},Mi.prototype.isActive=function(){return this._active};var Yi=function(){this.reset()};function Ka(n,s,o){for(var c=0;c<n.length;c++)if(n[c].identifier===o)return s[c]}function co(n,s){return Math.log(n/s)/Math.LN2}Yi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yi.prototype._start=function(n){},Yi.prototype._move=function(n,s,o){return{}},Yi.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},Yi.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,m=c[1],E=Ka(o,s,c[0]),k=Ka(o,s,m);if(E&&k){var z=this._aroundCenter?null:E.add(k).div(2);return this._move([E,k],z,n)}}},Yi.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var c=this._firstTwoTouches,m=c[1],E=Ka(o,s,c[0]),k=Ka(o,s,m);E&&k||(this._active&&A.suppressClick(),this.reset())}},Yi.prototype.touchcancel=function(){this.reset()},Yi.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},Yi.prototype.disable=function(){this._enabled=!1,this.reset()},Yi.prototype.isEnabled=function(){return this._enabled},Yi.prototype.isActive=function(){return this._active};var ka=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,c){var m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(co(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:co(this._distance,m),pinchAround:c}},s}(Yi);function Va(n,s){return 180*n.angleWith(s)/Math.PI}var Td=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,c){var m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Va(this._vector,m),pinchAround:c}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var c=25/(Math.PI*this._minDiameter)*360,m=Va(o,this._startVector);return Math.abs(m)<c},s}(Yi);function ac(n){return Math.abs(n.y)>Math.abs(n.x)}var Fh=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,ac(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,c,m){var E=o[0].sub(this._lastPoints[0]),k=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(E,k,m.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(E.y+k.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,c,m){if(this._valid!==void 0)return this._valid;var E=o.mag()>=2,k=c.mag()>=2;if(E||k){if(!E||!k)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var z=o.y>0==c.y>0;return ac(o)&&ac(c)&&z}},s}(Yi),Ql={panStep:100,bearingStep:15,pitchStep:10},Ha=function(){var n=Ql;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function wo(n){return n*(2-n)}Ha.prototype.blur=function(){this.reset()},Ha.prototype.reset=function(){this._active=!1},Ha.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,c=0,m=0,E=0,k=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),E=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),E=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),k=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(c=0,m=0),{cameraAnimation:function(z){var B=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:wo,zoom:o?Math.round(B)+o*(n.shiftKey?2:1):B,bearing:z.getBearing()+c*s._bearingStep,pitch:z.getPitch()+m*s._pitchStep,offset:[-E*s._panStep,-k*s._panStep],center:z.getCenter()},{originalEvent:n})}}}},Ha.prototype.enable=function(){this._enabled=!0},Ha.prototype.disable=function(){this._enabled=!1,this.reset()},Ha.prototype.isEnabled=function(){return this._enabled},Ha.prototype.isActive=function(){return this._active},Ha.prototype.disableRotation=function(){this._rotationDisabled=!0},Ha.prototype.enableRotation=function(){this._rotationDisabled=!1};var or=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};or.prototype.setZoomRate=function(n){this._defaultZoomRate=n},or.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},or.prototype.isEnabled=function(){return!!this._enabled},or.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},or.prototype.isZooming=function(){return!!this._zooming},or.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},or.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},or.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=a.browser.now(),c=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},or.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},or.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=A.mousePos(this._el,n);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},or.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&c!==0&&(c=1/c);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var E,k=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,z=this._startZoom,B=this._easing,Z=!1;if(this._type==="wheel"&&z&&B){var Y=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),J=B(Y);E=a.number(z,k,J),Y<1?this._frameId||(this._frameId=!0):Z=!0}else E=k,Z=!0;return this._active=!0,Z&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Z,zoomDelta:E-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},or.prototype._smoothOutEasing=function(n){var s=a.ease;if(this._prevEase){var o=this._prevEase,c=(a.browser.now()-o.start)/o.duration,m=o.easing(c+.01)-o.easing(c),E=.27/Math.sqrt(m*m+1e-4)*.01,k=Math.sqrt(.0729-E*E);s=a.bezier(E,k,.25,1)}return this._prevEase={start:a.browser.now(),duration:n,easing:s},s},or.prototype.blur=function(){this.reset()},or.prototype.reset=function(){this._active=!1};var No=function(n,s){this._clickZoom=n,this._tapZoom=s};No.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},No.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},No.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},No.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Uo=function(){this.reset()};Uo.prototype.reset=function(){this._active=!1},Uo.prototype.blur=function(){this.reset()},Uo.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},Uo.prototype.enable=function(){this._enabled=!0},Uo.prototype.disable=function(){this._enabled=!1,this.reset()},Uo.prototype.isEnabled=function(){return this._enabled},Uo.prototype.isActive=function(){return this._active};var da=function(){this._tap=new uo({numTouches:1,numTaps:1}),this.reset()};da.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},da.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},da.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var c=s[0],m=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,o)},da.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},da.prototype.touchcancel=function(){this.reset()},da.prototype.enable=function(){this._enabled=!0},da.prototype.disable=function(){this._enabled=!1,this.reset()},da.prototype.isEnabled=function(){return this._enabled},da.prototype.isActive=function(){return this._active};var qo=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};qo.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},qo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},qo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},qo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Dl=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};Dl.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Dl.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Dl.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Dl.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ma=function(n,s,o,c){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};ma.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ma.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ma.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ma.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ma.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ma.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ji=function(n){return n.zoom||n.drag||n.pitch||n.rotate},jo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(a.Event);function Et(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var yt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new bo(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[a.window,"blur",void 0]];for(var c=0,m=this._listeners;c<m.length;c+=1){var E=m[c],k=E[0];A.addEventListener(k,E[1],k===a.window.document?this.handleWindowEvent:this.handleEvent,E[2])}};yt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],c=o[0];A.removeEventListener(c,o[1],c===a.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},yt.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new _i(s,n));var c=s.boxZoom=new Sa(s,n);this._add("boxZoom",c);var m=new Xn,E=new Uo;s.doubleClickZoom=new No(E,m),this._add("tapZoom",m),this._add("clickZoom",E);var k=new da;this._add("tapDragZoom",k);var z=s.touchPitch=new Fh;this._add("touchPitch",z);var B=new Cl(n),Z=new Fo(n);s.dragRotate=new Dl(n,B,Z),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);var Y=new ll(n),J=new Mi(n);s.dragPan=new qo(o,Y,J),this._add("mousePan",Y),this._add("touchPan",J,["touchZoom","touchRotate"]);var Q=new Td,ue=new ka;s.touchZoomRotate=new ma(o,ue,Q,k),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]);var le=s.scrollZoom=new or(s,this);this._add("scrollZoom",le,["mousePan"]);var fe=s.keyboard=new Ha;this._add("keyboard",fe),this._add("blockableMapEvent",new ft(s));for(var ae=0,me=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ae<me.length;ae+=1){var xe=me[ae];n.interactive&&n[xe]&&s[xe].enable(n[xe])}},yt.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},yt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},yt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return Boolean(Ji(this._eventsInProgress))||this.isZooming()},yt.prototype._blockedByActive=function(n,s,o){for(var c in n)if(c!==o&&(!s||s.indexOf(c)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},yt.prototype._getMapTouches=function(n){for(var s=[],o=0,c=n;o<c.length;o+=1){var m=c[o];this._el.contains(m.target)&&s.push(m)}return s},yt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},m={},E={},k=n.touches?this._getMapTouches(n.touches):void 0,z=k?A.touchPos(this._el,k):A.mousePos(this._el,n),B=0,Z=this._handlers;B<Z.length;B+=1){var Y=Z[B],J=Y.handlerName,Q=Y.handler,ue=Y.allowed;if(Q.isEnabled()){var le=void 0;this._blockedByActive(E,ue,J)?Q.reset():Q[s||n.type]&&(le=Q[s||n.type](n,z,k),this.mergeHandlerResult(c,m,le,J,o),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||Q.isActive())&&(E[J]=Q)}}var fe={};for(var ae in this._previousActiveHandlers)E[ae]||(fe[ae]=o);this._previousActiveHandlers=E,(Object.keys(fe).length||Et(c))&&(this._changes.push([c,m,fe]),this._triggerRenderFrame()),(Object.keys(E).length||Et(c))&&this._map._stop(!0),this._updatingCamera=!1;var me=c.cameraAnimation;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},yt.prototype.mergeHandlerResult=function(n,s,o,c,m){if(o){a.extend(n,o);var E={handlerName:c,originalEvent:o.originalEvent||m};o.zoomDelta!==void 0&&(s.zoom=E),o.panDelta!==void 0&&(s.drag=E),o.pitchDelta!==void 0&&(s.pitch=E),o.bearingDelta!==void 0&&(s.rotate=E)}},yt.prototype._applyChanges=function(){for(var n={},s={},o={},c=0,m=this._changes;c<m.length;c+=1){var E=m[c],k=E[0],z=E[1],B=E[2];k.panDelta&&(n.panDelta=(n.panDelta||new a.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(n.around=k.around),k.pinchAround!==void 0&&(n.pinchAround=k.pinchAround),k.noInertia&&(n.noInertia=k.noInertia),a.extend(s,z),a.extend(o,B)}this._updateMapTransform(n,s,o),this._changes=[]},yt.prototype._updateMapTransform=function(n,s,o){var c=this._map,m=c.transform;if(!Et(n))return this._fireEvents(s,o,!0);var E=n.panDelta,k=n.zoomDelta,z=n.bearingDelta,B=n.pitchDelta,Z=n.around,Y=n.pinchAround;Y!==void 0&&(Z=Y),c._stop(!0),Z=Z||c.transform.centerPoint;var J=m.pointLocation(E?Z.sub(E):Z);z&&(m.bearing+=z),B&&(m.pitch+=B),k&&(m.zoom+=k),m.setLocationAtPoint(J,Z),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},yt.prototype._fireEvents=function(n,s,o){var c=this,m=Ji(this._eventsInProgress),E=Ji(n),k={};for(var z in n)this._eventsInProgress[z]||(k[z+"start"]=n[z].originalEvent),this._eventsInProgress[z]=n[z];for(var B in!m&&E&&this._fireEvent("movestart",E.originalEvent),k)this._fireEvent(B,k[B]);for(var Z in E&&this._fireEvent("move",E.originalEvent),n)this._fireEvent(Z,n[Z].originalEvent);var Y,J={};for(var Q in this._eventsInProgress){var ue=this._eventsInProgress[Q],le=ue.handlerName,fe=ue.originalEvent;this._handlersById[le].isActive()||(delete this._eventsInProgress[Q],J[Q+"end"]=Y=s[le]||fe)}for(var ae in J)this._fireEvent(ae,J[ae]);var me=Ji(this._eventsInProgress);if(o&&(m||E)&&!me){this._updatingCamera=!0;var xe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ie=function(Me){return Me!==0&&-c._bearingSnap<Me&&Me<c._bearingSnap};xe?(Ie(xe.bearing||this._map.getBearing())&&(xe.bearing=0),this._map.easeTo(xe,{originalEvent:Y})):(this._map.fire(new a.Event("moveend",{originalEvent:Y})),Ie(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(n,s){this._map.fire(new a.Event(n,s?{originalEvent:s}:{}))},yt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new jo("renderFrame",{timeStamp:s})),n._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Cp=function(n){function s(o,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,c){return this.jumpTo({center:o},c)},s.prototype.panBy=function(o,c,m){return o=a.Point.convert(o).mult(-1),this.panTo(this.transform.center,a.extend({offset:o},c),m)},s.prototype.panTo=function(o,c,m){return this.easeTo(a.extend({center:o},c),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,c){return this.jumpTo({zoom:o},c),this},s.prototype.zoomTo=function(o,c,m){return this.easeTo(a.extend({zoom:o},c),m)},s.prototype.zoomIn=function(o,c){return this.zoomTo(this.getZoom()+1,o,c),this},s.prototype.zoomOut=function(o,c){return this.zoomTo(this.getZoom()-1,o,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,c){return this.jumpTo({bearing:o},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,c){return this.jumpTo({padding:o},c),this},s.prototype.rotateTo=function(o,c,m){return this.easeTo(a.extend({bearing:o},c),m)},s.prototype.resetNorth=function(o,c){return this.rotateTo(0,a.extend({duration:1e3},o),c),this},s.prototype.resetNorthPitch=function(o,c){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},o),c),this},s.prototype.snapToNorth=function(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,c){return this.jumpTo({pitch:o},c),this},s.prototype.cameraForBounds=function(o,c){o=a.LngLatBounds.convert(o);var m=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),m,c)},s.prototype._cameraForBoxAndBearing=function(o,c,m,E){var k={top:0,bottom:0,right:0,left:0};if(typeof(E=a.extend({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){var z=E.padding;E.padding={top:z,bottom:z,right:z,left:z}}E.padding=a.extend(k,E.padding);var B=this.transform,Z=B.padding,Y=B.project(a.LngLat.convert(o)),J=B.project(a.LngLat.convert(c)),Q=Y.rotate(-m*Math.PI/180),ue=J.rotate(-m*Math.PI/180),le=new a.Point(Math.max(Q.x,ue.x),Math.max(Q.y,ue.y)),fe=new a.Point(Math.min(Q.x,ue.x),Math.min(Q.y,ue.y)),ae=le.sub(fe),me=(B.width-(Z.left+Z.right+E.padding.left+E.padding.right))/ae.x,xe=(B.height-(Z.top+Z.bottom+E.padding.top+E.padding.bottom))/ae.y;if(!(xe<0||me<0)){var Ie=Math.min(B.scaleZoom(B.scale*Math.min(me,xe)),E.maxZoom),Me=typeof E.offset.x=="number"?new a.Point(E.offset.x,E.offset.y):a.Point.convert(E.offset),Le=new a.Point((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(m*Math.PI/180),Oe=Me.add(Le).mult(B.scale/B.zoomScale(Ie));return{center:B.unproject(Y.add(J).div(2).sub(Oe)),zoom:Ie,bearing:m}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,c,m){return this._fitInternal(this.cameraForBounds(o,c),c,m)},s.prototype.fitScreenCoordinates=function(o,c,m,E,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(o)),this.transform.pointLocation(a.Point.convert(c)),m,E),E,k)},s.prototype._fitInternal=function(o,c,m){return o?(delete(c=a.extend(o,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this},s.prototype.jumpTo=function(o,c){this.stop();var m=this.transform,E=!1,k=!1,z=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(E=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=a.LngLat.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(k=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(z=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),E&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",c)).fire(new a.Event("zoomend",c)),k&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),z&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))},s.prototype.easeTo=function(o,c){var m=this;this._stop(!1,o.easeId),((o=a.extend({offset:[0,0],duration:500,easing:a.ease},o)).animate===!1||!o.essential&&a.browser.prefersReducedMotion)&&(o.duration=0);var E=this.transform,k=this.getZoom(),z=this.getBearing(),B=this.getPitch(),Z=this.getPadding(),Y="zoom"in o?+o.zoom:k,J="bearing"in o?this._normalizeBearing(o.bearing,z):z,Q="pitch"in o?+o.pitch:B,ue="padding"in o?o.padding:E.padding,le=a.Point.convert(o.offset),fe=E.centerPoint.add(le),ae=E.pointLocation(fe),me=a.LngLat.convert(o.center||ae);this._normalizeCenter(me);var xe,Ie,Me=E.project(ae),Le=E.project(me).sub(Me),Oe=E.zoomScale(Y-k);o.around&&(xe=a.LngLat.convert(o.around),Ie=E.locationPoint(xe));var Ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Y!==k,this._rotating=this._rotating||z!==J,this._pitching=this._pitching||Q!==B,this._padding=!E.isPaddingEqual(ue),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,Ge),this._ease(function(Je){if(m._zooming&&(E.zoom=a.number(k,Y,Je)),m._rotating&&(E.bearing=a.number(z,J,Je)),m._pitching&&(E.pitch=a.number(B,Q,Je)),m._padding&&(E.interpolatePadding(Z,ue,Je),fe=E.centerPoint.add(le)),xe)E.setLocationAtPoint(xe,Ie);else{var Xe=E.zoomScale(E.zoom-k),ct=Y>k?Math.min(2,Oe):Math.max(.5,Oe),St=Math.pow(ct,1-Je),vt=E.unproject(Me.add(Le.mult(Je*St)).mult(Xe));E.setLocationAtPoint(E.renderWorldCopies?vt.wrap():vt,fe)}m._fireMoveEvents(c)},function(Je){m._afterEase(c,Je)},o),this},s.prototype._prepareEase=function(o,c,m){m===void 0&&(m={}),this._moving=!0,c||m.moving||this.fire(new a.Event("movestart",o)),this._zooming&&!m.zooming&&this.fire(new a.Event("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new a.Event("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new a.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new a.Event("move",o)),this._zooming&&this.fire(new a.Event("zoom",o)),this._rotating&&this.fire(new a.Event("rotate",o)),this._pitching&&this.fire(new a.Event("pitch",o))},s.prototype._afterEase=function(o,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var m=this._zooming,E=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new a.Event("zoomend",o)),E&&this.fire(new a.Event("rotateend",o)),k&&this.fire(new a.Event("pitchend",o)),this.fire(new a.Event("moveend",o))}},s.prototype.flyTo=function(o,c){var m=this;if(!o.essential&&a.browser.prefersReducedMotion){var E=a.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(E,c)}this.stop(),o=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},o);var k=this.transform,z=this.getZoom(),B=this.getBearing(),Z=this.getPitch(),Y=this.getPadding(),J="zoom"in o?a.clamp(+o.zoom,k.minZoom,k.maxZoom):z,Q="bearing"in o?this._normalizeBearing(o.bearing,B):B,ue="pitch"in o?+o.pitch:Z,le="padding"in o?o.padding:k.padding,fe=k.zoomScale(J-z),ae=a.Point.convert(o.offset),me=k.centerPoint.add(ae),xe=k.pointLocation(me),Ie=a.LngLat.convert(o.center||xe);this._normalizeCenter(Ie);var Me=k.project(xe),Le=k.project(Ie).sub(Me),Oe=o.curve,Ge=Math.max(k.width,k.height),Je=Ge/fe,Xe=Le.mag();if("minZoom"in o){var ct=a.clamp(Math.min(o.minZoom,z,J),k.minZoom,k.maxZoom),St=Ge/k.zoomScale(ct-z);Oe=Math.sqrt(St/Xe*2)}var vt=Oe*Oe;function _t(Ct){var Lt=(Je*Je-Ge*Ge+(Ct?-1:1)*vt*vt*Xe*Xe)/(2*(Ct?Je:Ge)*vt*Xe);return Math.log(Math.sqrt(Lt*Lt+1)-Lt)}function sr(Ct){return(Math.exp(Ct)-Math.exp(-Ct))/2}function lt(Ct){return(Math.exp(Ct)+Math.exp(-Ct))/2}var Nt=_t(0),Gt=function(Ct){return lt(Nt)/lt(Nt+Oe*Ct)},jt=function(Ct){return Ge*((lt(Nt)*(sr(Lt=Nt+Oe*Ct)/lt(Lt))-sr(Nt))/vt)/Xe;var Lt},Ot=(_t(1)-Nt)/Oe;if(Math.abs(Xe)<1e-6||!isFinite(Ot)){if(Math.abs(Ge-Je)<1e-6)return this.easeTo(o,c);var Zt=Je<Ge?-1:1;Ot=Math.abs(Math.log(Je/Ge))/Oe,jt=function(){return 0},Gt=function(Ct){return Math.exp(Zt*Oe*Ct)}}return o.duration="duration"in o?+o.duration:1e3*Ot/("screenSpeed"in o?+o.screenSpeed/Oe:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=B!==Q,this._pitching=ue!==Z,this._padding=!k.isPaddingEqual(le),this._prepareEase(c,!1),this._ease(function(Ct){var Lt=Ct*Ot,pn=1/Gt(Lt);k.zoom=Ct===1?J:z+k.scaleZoom(pn),m._rotating&&(k.bearing=a.number(B,Q,Ct)),m._pitching&&(k.pitch=a.number(Z,ue,Ct)),m._padding&&(k.interpolatePadding(Y,le,Ct),me=k.centerPoint.add(ae));var Ui=Ct===1?Ie:k.unproject(Me.add(Le.mult(jt(Lt))).mult(pn));k.setLocationAtPoint(k.renderWorldCopies?Ui.wrap():Ui,me),m._fireMoveEvents(c)},function(){return m._afterEase(c)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!o){var E=this.handlers;E&&E.stop(!1)}return this},s.prototype._ease=function(o,c,m){m.animate===!1||m.duration===0?(o(1),c()):(this._easeStart=a.browser.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,c){o=a.wrap(o,-180,180);var m=Math.abs(o-c);return Math.abs(o-360-c)<m&&(o-=360),Math.abs(o+360-c)<m&&(o+=360),o},s.prototype._normalizeCenter=function(o){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var m=o.lng-c.center.lng;o.lng+=m>180?-360:m<-180?360:0}},s}(a.Evented),Fa=function(n){n===void 0&&(n={}),this.options=n,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Fa.prototype.getDefaultPosition=function(){return"bottom-right"},Fa.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=A.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Fa.prototype.onRemove=function(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Fa.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},Fa.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Fa.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(c,m,E){return m.value&&(c+=m.key+"="+m.value+(E<s.length-1?"&":"")),c},"?");n.href=a.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},Fa.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Fa.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(z){return typeof z!="string"?"":z})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var c in o){var m=o[c];if(m.used){var E=m.getSource();E.attribution&&n.indexOf(E.attribution)<0&&n.push(E.attribution)}}n.sort(function(z,B){return z.length-B.length});var k=(n=n.filter(function(z,B){for(var Z=B+1;Z<n.length;Z++)if(n[Z].indexOf(z)>=0)return!1;return!0})).join(" | ");k!==this._attribHTML&&(this._attribHTML=k,n.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Fa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Xa=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};Xa.prototype.onAdd=function(n){this._map=n,this._container=A.create("div","mapboxgl-ctrl");var s=A.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Xa.prototype.onRemove=function(){A.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Xa.prototype.getDefaultPosition=function(){return"bottom-left"},Xa.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Xa.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},Xa.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Mn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Mn.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},Mn.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,c=s?this._queue.concat(s):this._queue;o<c.length;o+=1){var m=c[o];if(m.id===n)return void(m.cancelled=!0)}},Mn.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,c=s;o<c.length;o+=1){var m=c[o];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Mn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ss={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},$l=a.window.HTMLImageElement,ku=a.window.HTMLElement,qr=a.window.ImageBitmap,ia={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},eu=function(n){function s(c){var m=this;if((c=a.extend({},ia,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var E=new dr(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,E,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Mn,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Ss,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new a.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=a.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof ku))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,c),this._hash=c.hash&&new Hn(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,a.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Fa({customAttribution:c.customAttribution})),this.addControl(new Xa,c.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(k){m._update(k.dataType==="style"),m.fire(new a.Event(k.dataType+"data",k))}),this.on("dataloading",function(k){m.fire(new a.Event(k.dataType+"dataloading",k))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,m){if(m===void 0&&(m=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var E=c.onAdd(this);this._controls.push(c);var k=this._controlPositions[m];return m.indexOf("bottom")!==-1?k.insertBefore(E,k.firstChild):k.appendChild(E),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(c);return m>-1&&this._controls.splice(m,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var m=this._containerDimensions(),E=m[0],k=m[1];if(E===this.transform.width&&k===this.transform.height)return this;this._resizeCanvas(E,k),this.transform.resize(E,k),this.painter.resize(E,k);var z=!this._moving;return z&&this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),this.fire(new a.Event("resize",c)),z&&this.fire(new a.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(a.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c==null?-2:c)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c==null?22:c)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c==null?0:c)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c==null?60:c)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(a.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(a.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,m,E){var k,z=this;if(c==="mouseenter"||c==="mouseover"){var B=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){var J=z.getLayer(m)?z.queryRenderedFeatures(Y.point,{layers:[m]}):[];J.length?B||(B=!0,E.call(z,new Kr(c,z,Y.originalEvent,{features:J}))):B=!1},mouseout:function(){B=!1}}}}if(c==="mouseleave"||c==="mouseout"){var Z=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){(z.getLayer(m)?z.queryRenderedFeatures(Y.point,{layers:[m]}):[]).length?Z=!0:Z&&(Z=!1,E.call(z,new Kr(c,z,Y.originalEvent)))},mouseout:function(Y){Z&&(Z=!1,E.call(z,new Kr(c,z,Y.originalEvent)))}}}}return{layer:m,listener:E,delegates:(k={},k[c]=function(Y){var J=z.getLayer(m)?z.queryRenderedFeatures(Y.point,{layers:[m]}):[];J.length&&(Y.features=J,E.call(z,Y),delete Y.features)},k)}},s.prototype.on=function(c,m,E){if(E===void 0)return n.prototype.on.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var z in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(k),k.delegates)this.on(z,k.delegates[z]);return this},s.prototype.once=function(c,m,E){if(E===void 0)return n.prototype.once.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var z in k.delegates)this.once(z,k.delegates[z]);return this},s.prototype.off=function(c,m,E){var k=this;return E===void 0?n.prototype.off.call(this,c,m):(this._delegatedListeners&&this._delegatedListeners[c]&&function(z){for(var B=z[c],Z=0;Z<B.length;Z++){var Y=B[Z];if(Y.layer===m&&Y.listener===E){for(var J in Y.delegates)k.off(J,Y.delegates[J]);return B.splice(Z,1),k}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,m){if(!this.style)return[];var E;if(m!==void 0||c===void 0||c instanceof a.Point||Array.isArray(c)||(m=c,c=void 0),m=m||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof c[0]=="number")E=[a.Point.convert(c)];else{var k=a.Point.convert(c[0]),z=a.Point.convert(c[1]);E=[k,new a.Point(z.x,k.y),z,new a.Point(k.x,z.y),k]}return this.style.queryRenderedFeatures(E,m,this.transform)},s.prototype.querySourceFeatures=function(c,m){return this.style.querySourceFeatures(c,m)},s.prototype.setStyle=function(c,m){return(m=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(c,m))},s.prototype._getUIString=function(c){var m=this._locale[c];if(m==null)throw new Error("Missing UI string '"+c+"'");return m},s.prototype._updateStyle=function(c,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Ii(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ii(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,m){var E=this;if(typeof c=="string"){var k=this._requestManager.normalizeStyleURL(c),z=this._requestManager.transformRequest(k,a.ResourceType.Style);a.getJSON(z,function(B,Z){B?E.fire(new a.ErrorEvent(B)):Z&&E._updateDiff(Z,m)})}else typeof c=="object"&&this._updateDiff(c,m)},s.prototype._updateDiff=function(c,m){try{this.style.setState(c)&&this._update(!0)}catch(E){a.warnOnce("Unable to perform style diff: "+(E.message||E.error||E)+".  Rebuilding the style from scratch."),this._updateStyle(c,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,m){return this._lazyInitEmptyStyle(),this.style.addSource(c,m),this._update(!0)},s.prototype.isSourceLoaded=function(c){var m=this.style&&this.style.sourceCaches[c];if(m!==void 0)return m.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var m in c){var E=c[m]._tiles;for(var k in E){var z=E[k];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,m,E){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,m,E)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,m,E){E===void 0&&(E={});var k=E.pixelRatio;k===void 0&&(k=1);var z=E.sdf;z===void 0&&(z=!1);var B=E.stretchX,Z=E.stretchY,Y=E.content;if(this._lazyInitEmptyStyle(),m instanceof $l||qr&&m instanceof qr){var J=a.browser.getImageData(m);this.style.addImage(c,{data:new a.RGBAImage({width:J.width,height:J.height},J.data),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:z,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Q=m;this.style.addImage(c,{data:new a.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:z,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,c)}},s.prototype.updateImage=function(c,m){var E=this.style.getImage(c);if(!E)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var k=m instanceof $l||qr&&m instanceof qr?a.browser.getImageData(m):m,z=k.width,B=k.height,Z=k.data;return z===void 0||B===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):z!==E.data.width||B!==E.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(E.data.replace(Z,!(m instanceof $l||qr&&m instanceof qr)),void this.style.updateImage(c,E))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,m){a.getImage(this._requestManager.transformRequest(c,a.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,m){return this._lazyInitEmptyStyle(),this.style.addLayer(c,m),this._update(!0)},s.prototype.moveLayer=function(c,m){return this.style.moveLayer(c,m),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,m,E){return this.style.setLayerZoomRange(c,m,E),this._update(!0)},s.prototype.setFilter=function(c,m,E){return E===void 0&&(E={}),this.style.setFilter(c,m,E),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setPaintProperty(c,m,E,k),this._update(!0)},s.prototype.getPaintProperty=function(c,m){return this.style.getPaintProperty(c,m)},s.prototype.setLayoutProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setLayoutProperty(c,m,E,k),this._update(!0)},s.prototype.getLayoutProperty=function(c,m){return this.style.getLayoutProperty(c,m)},s.prototype.setLight=function(c,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(c,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,m){return this.style.setFeatureState(c,m),this._update()},s.prototype.removeFeatureState=function(c,m){return this.style.removeFeatureState(c,m),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,m=0;return this._container&&(c=this._container.clientWidth||400,m=this._container.clientHeight||300),[c,m]},s.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=A.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=A.create("div","mapboxgl-canvas-container",c);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=A.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var E=this._containerDimensions();this._resizeCanvas(E[0],E[1]);var k=this._controlContainer=A.create("div","mapboxgl-control-container",c),z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(B){z[B]=A.create("div","mapboxgl-ctrl-"+B,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,m){var E=a.browser.devicePixelRatio||1;this._canvas.width=E*c,this._canvas.height=E*m,this._canvas.style.width=c+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var c=a.extend({},P.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);m?(this.painter=new Lr(m,this.transform),a.webpSupported.testSupport(m)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var m,E=this,k=0,z=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=z.createQueryEXT(),z.beginQueryEXT(z.TIME_ELAPSED_EXT,m),k=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Z=this.transform.zoom,Y=a.browser.now();this.style.zoomHistory.update(Z,Y);var J=new a.EvaluationParameters(Z,{now:Y,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=J.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(B=!0,this._crossFadingFactor=Q),this.style.update(J)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ue=a.browser.now()-k;z.endQueryEXT(z.TIME_ELAPSED_EXT,m),setTimeout(function(){var ae=z.getQueryObjectEXT(m,z.QUERY_RESULT_EXT)/1e6;z.deleteQueryEXT(m),E.fire(new a.Event("gpu-timing-frame",{cpuTime:ue,gpuTime:ae}))},50)}if(this.listens("gpu-timing-layer")){var le=this.painter.collectGpuTimers();setTimeout(function(){var ae=E.painter.queryGpuTimers(le);E.fire(new a.Event("gpu-timing-layer",{layerTimes:ae}))},50)}var fe=this._sourcesDirty||this._styleDirty||this._placementDirty;return fe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||fe||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,m=this._controls;c<m.length;c+=1)m[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),tu(this._canvasContainer),tu(this._controlContainer),tu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(m){c._frame=null,c._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,m){a.setCacheLimits(c,m)},o.version.get=function(){return a.version},Object.defineProperties(s.prototype,o),s}(Cp);function tu(n){n.parentNode&&n.parentNode.removeChild(n)}var ks={showCompass:!0,showZoom:!0,visualizePitch:!1},ya=function(n){var s=this;this.options=a.extend({},ks,n),this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),A.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),A.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=A.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ya.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},ya.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},ya.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ln(this._map,this._compass,this.options.visualizePitch)),this._container},ya.prototype.onRemove=function(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ya.prototype._createButton=function(n,s){var o=A.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},ya.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var Ln=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Cl({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new Fo({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),A.addEventListener(s,"mousedown",this.mousedown),A.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(s,"touchmove",this.touchmove),A.addEventListener(s,"touchend",this.touchend),A.addEventListener(s,"touchcancel",this.reset)};function Iu(n,s,o){if(n=new a.LngLat(n.lng,n.lat),s){var c=new a.LngLat(n.lng-360,n.lat),m=new a.LngLat(n.lng+360,n.lat),E=o.locationPoint(n).distSqr(s);o.locationPoint(c).distSqr(s)<E?n=c:o.locationPoint(m).distSqr(s)<E&&(n=m)}for(;Math.abs(n.lng-o.center.lng)>180;){var k=o.locationPoint(n);if(k.x>=0&&k.y>=0&&k.x<=o.width&&k.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}Ln.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),A.disableDrag()},Ln.prototype.move=function(n,s){var o=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&o.setBearing(o.getBearing()+c.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&o.setPitch(o.getPitch()+m.pitchDelta)}},Ln.prototype.off=function(){var n=this.element;A.removeEventListener(n,"mousedown",this.mousedown),A.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(n,"touchmove",this.touchmove),A.removeEventListener(n,"touchend",this.touchend),A.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},Ln.prototype.offTemp=function(){A.enableDrag(),A.removeEventListener(a.window,"mousemove",this.mousemove),A.removeEventListener(a.window,"mouseup",this.mouseup)},Ln.prototype.mousedown=function(n){this.down(a.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),A.mousePos(this.element,n)),A.addEventListener(a.window,"mousemove",this.mousemove),A.addEventListener(a.window,"mouseup",this.mouseup)},Ln.prototype.mousemove=function(n){this.move(n,A.mousePos(this.element,n))},Ln.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},Ln.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},Ln.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},Ln.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ln.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ho={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Dp(n,s,o){var c=n.classList;for(var m in ho)c.remove("mapboxgl-"+o+"-anchor-"+m);c.add("mapboxgl-"+o+"-anchor-"+s)}var Tu,oc=function(n){function s(o,c){if(n.call(this),(o instanceof a.window.HTMLElement||c)&&(o=a.extend({element:o},c)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=a.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div"),this._element.setAttribute("aria-label","Map marker");var m=A.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var E=A.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");var k=A.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");var z=A.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");for(var B=0,Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];B<Z.length;B+=1){var Y=Z[B],J=A.createNS("http://www.w3.org/2000/svg","ellipse");J.setAttributeNS(null,"opacity","0.04"),J.setAttributeNS(null,"cx","10.5"),J.setAttributeNS(null,"cy","5.80029008"),J.setAttributeNS(null,"rx",Y.rx),J.setAttributeNS(null,"ry",Y.ry),z.appendChild(J)}var Q=A.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);var ue=A.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(ue);var le=A.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");var fe=A.createNS("http://www.w3.org/2000/svg","path");fe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(fe);var ae=A.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ae.setAttributeNS(null,"fill","#FFFFFF");var me=A.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(8.0, 8.0)");var xe=A.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#000000"),xe.setAttributeNS(null,"opacity","0.25"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962");var Ie=A.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#FFFFFF"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962"),me.appendChild(xe),me.appendChild(Ie),k.appendChild(z),k.appendChild(Q),k.appendChild(le),k.appendChild(ae),k.appendChild(me),m.appendChild(k),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=a.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Me){Me.preventDefault()}),this._element.addEventListener("mousedown",function(Me){Me.preventDefault()}),Dp(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var c=o.code,m=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var c=o.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Iu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,ho[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=a.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(a.Evented),ru={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Is=0,iu=!1,nu=function(n){function s(o){n.call(this),this.options=a.extend({},ru,o),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var c;return this._map=o,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Tu!==void 0?c(Tu):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(m){c(Tu=m.state!=="denied")}):c(Tu=!!a.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Is=0,iu=!1},s.prototype._isOutOfMapMaxBounds=function(o){var c=this._map.getMaxBounds(),m=o.coords;return c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude),m=o.coords.accuracy,E=this._map.getBearing(),k=a.extend({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(m),k,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,c=this._map.unproject([0,o]),m=this._map.unproject([1,o]),E=c.distanceTo(m),k=Math.ceil(2*this._accuracy/E);this._circleElement.style.width=k+"px",this._circleElement.style.height=k+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&iu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var c=this;if(this._container.addEventListener("contextmenu",function(k){return k.preventDefault()}),this._geolocateButton=A.create("button","mapboxgl-ctrl-geolocate",this._container),A.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var E=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new oc(this._dotElement),this._circleElement=A.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(k){k.geolocateSource||c._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new a.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Is--,iu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Is>1?(o={maximumAge:6e5,timeout:0},iu=!0):(o=this.options.positionOptions,iu=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(a.Evented),Ts={maxWidth:100,unit:"metric"},Ml=function(n){this.options=a.extend({},Ts,n),a.bindAll(["_onMove","setUnit"],this)};function Hc(n,s,o){var c=o&&o.maxWidth||100,m=n._container.clientHeight/2,E=n.unproject([0,m]),k=n.unproject([c,m]),z=E.distanceTo(k);if(o&&o.unit==="imperial"){var B=3.2808*z;B>5280?Eo(s,c,B/5280,n._getUIString("ScaleControl.Miles")):Eo(s,c,B,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Eo(s,c,z/1852,n._getUIString("ScaleControl.NauticalMiles")):z>=1e3?Eo(s,c,z/1e3,n._getUIString("ScaleControl.Kilometers")):Eo(s,c,z,n._getUIString("ScaleControl.Meters"))}function Eo(n,s,o,c){var m,E,k,z=(m=o,(E=Math.pow(10,(""+Math.floor(m)).length-1))*(k=(k=m/E)>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(B){var Z=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*Z)/Z}(k)));n.style.width=s*(z/o)+"px",n.innerHTML=z+"&nbsp;"+c}Ml.prototype.getDefaultPosition=function(){return"bottom-left"},Ml.prototype._onMove=function(){Hc(this._map,this._container,this.options)},Ml.prototype.onAdd=function(n){return this._map=n,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ml.prototype.onRemove=function(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ml.prototype.setUnit=function(n){this.options.unit=n,Hc(this._map,this._container,this.options)};var Zo=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof a.window.HTMLElement?this._container=n.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Zo.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Zo.prototype.onRemove=function(){A.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Zo.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Zo.prototype._setupUI=function(){var n=this._fullscreenButton=A.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);A.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Zo.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},Zo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Zo.prototype._isFullscreen=function(){return this._fullscreen},Zo.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Zo.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var As={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},po=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),zs=function(n){function s(o){n.call(this),this.options=a.extend(Object.create(As),o),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(a.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var c,m=a.window.document.createDocumentFragment(),E=a.window.document.createElement("body");for(E.innerHTML=o;c=E.firstChild;)m.appendChild(c);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=A.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=A.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=A.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(J){return c._container.classList.add(J)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Iu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var m=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),E=this.options.anchor,k=function J(Q){if(Q){if(typeof Q=="number"){var ue=Math.round(Math.sqrt(.5*Math.pow(Q,2)));return{center:new a.Point(0,0),top:new a.Point(0,Q),"top-left":new a.Point(ue,ue),"top-right":new a.Point(-ue,ue),bottom:new a.Point(0,-Q),"bottom-left":new a.Point(ue,-ue),"bottom-right":new a.Point(-ue,-ue),left:new a.Point(Q,0),right:new a.Point(-Q,0)}}if(Q instanceof a.Point||Array.isArray(Q)){var le=a.Point.convert(Q);return{center:le,top:le,"top-left":le,"top-right":le,bottom:le,"bottom-left":le,"bottom-right":le,left:le,right:le}}return{center:a.Point.convert(Q.center||[0,0]),top:a.Point.convert(Q.top||[0,0]),"top-left":a.Point.convert(Q["top-left"]||[0,0]),"top-right":a.Point.convert(Q["top-right"]||[0,0]),bottom:a.Point.convert(Q.bottom||[0,0]),"bottom-left":a.Point.convert(Q["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Q["bottom-right"]||[0,0]),left:a.Point.convert(Q.left||[0,0]),right:a.Point.convert(Q.right||[0,0])}}return J(new a.Point(0,0))}(this.options.offset);if(!E){var z,B=this._container.offsetWidth,Z=this._container.offsetHeight;z=m.y+k.bottom.y<Z?["top"]:m.y>this._map.transform.height-Z?["bottom"]:[],m.x<B/2?z.push("left"):m.x>this._map.transform.width-B/2&&z.push("right"),E=z.length===0?"bottom":z.join("-")}var Y=m.add(k[E]).round();A.setTransform(this._container,ho[E]+" translate("+Y.x+"px,"+Y.y+"px)"),Dp(this._container,E,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(po);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(a.Evented),Xc={version:a.version,supported:P,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:eu,NavigationControl:ya,GeolocateControl:nu,AttributionControl:Fa,ScaleControl:Ml,FullscreenControl:Zo,Popup:zs,Marker:oc,Style:Ii,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){Re().acquire(ze)},clearPrewarmedResources:function(){var n=ot;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(ze),ot=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(n){a.config.ACCESS_TOKEN=n},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(n){a.config.API_URL=n},get workerCount(){return je.workerCount},set workerCount(n){je.workerCount=n},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){a.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){a.clearTileCache(n)},workerUrl:""};return Xc}),_})})(Zy);const hS=Zy.exports;function Ux(u){let h;const f=u[15].default,y=Jm(f,u,u[14],null);return{c(){y&&y.c()},l(_){y&&y.l(_)},m(_,v){y&&y.m(_,v),h=!0},p(_,v){y&&y.p&&(!h||v&16384)&&Qm(y,f,_,_[14],h?ey(f,_[14],v,null):$m(_[14]),null)},i(_){h||(it(y,_),h=!0)},o(_){pt(y,_),h=!1},d(_){y&&y.d(_)}}}function pS(u){let h,f,y,_=u[0]&&Ux(u);return{c(){h=D("div"),_&&_.c(),this.h()},l(v){h=M(v,"DIV",{class:!0,id:!0});var a=R(h);_&&_.l(a),a.forEach(T),this.h()},h(){S(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),S(h,"id",u[1]),Gs(()=>u[16].call(h))},m(v,a){Ae(v,h,a),_&&_.m(h,null),f=Ks(h,u[16].bind(h)),u[17](h),y=!0},p(v,[a]){v[0]?_?(_.p(v,a),a&1&&it(_,1)):(_=Ux(v),_.c(),it(_,1),_.m(h,null)):_&&(xu(),pt(_,1,1,()=>{_=null}),wu()),(!y||a&2)&&S(h,"id",v[1])},i(v){y||(it(_),y=!0)},o(v){pt(_),y=!1},d(v){v&&T(h),_&&_.d(),f(),u[17](null)}}}function fS(u,h,f){let{$$slots:y={},$$scope:_}=h,{map:v}=h,{id:a="map"}=h,{location:P={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:A="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:F=!0}=h,{minzoom:V=0}=h,{maxzoom:j=14}=h,{zoom:U=null}=h,{scrollzoom:he=!0}=h,{geolocate:ie=!0}=h,{zoomcontrol:De=!0}=h,{options:we={}}=h,Ce,Ue;J2("map",{getMap:()=>v}),P.bounds?we={...we,bounds:P.bounds}:P.lon&&P.lat&&(we={...we,center:[P.lon,P.lat]},P.zoom&&(we.zoom=P.zoom)),Q2(()=>{const tt=document.createElement("link");return tt.rel="stylesheet",tt.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",tt.onload=()=>{f(0,v=new Zy.exports.Map({container:Ce,style:A,minZoom:V,maxZoom:j,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:F,...we})),De&&v.addControl(new Zy.exports.NavigationControl({showCompass:!1})),he||v.scrollZoom.disable(),ie&&v.addControl(new Zy.exports.GeolocateControl),v.on("load",()=>{f(4,U=v.getZoom())}),v.on("zoom",()=>{f(4,U=v.getZoom())})},document.head.appendChild(tt),()=>{v.remove(),tt.parentNode.removeChild(tt)}});function At(){let tt=document.getElementsByClassName("mapboxgl-canvas");tt[0]&&(tt[0].style.width="100%",v.resize())}function Dt(){Ue=this.clientWidth,f(2,Ue)}function ht(tt){Pp[tt?"unshift":"push"](()=>{Ce=tt,f(3,Ce)})}return u.$$set=tt=>{"map"in tt&&f(0,v=tt.map),"id"in tt&&f(1,a=tt.id),"location"in tt&&f(6,P=tt.location),"style"in tt&&f(7,A=tt.style),"interactive"in tt&&f(8,F=tt.interactive),"minzoom"in tt&&f(9,V=tt.minzoom),"maxzoom"in tt&&f(10,j=tt.maxzoom),"zoom"in tt&&f(4,U=tt.zoom),"scrollzoom"in tt&&f(11,he=tt.scrollzoom),"geolocate"in tt&&f(12,ie=tt.geolocate),"zoomcontrol"in tt&&f(13,De=tt.zoomcontrol),"options"in tt&&f(5,we=tt.options),"$$scope"in tt&&f(14,_=tt.$$scope)},u.$$.update=()=>{u.$$.dirty&4&&Ue&&At()},[v,a,Ue,Ce,U,we,P,A,F,V,j,he,ie,De,_,y,Dt,ht]}class dS extends Hs{constructor(h){super(),Xs(this,h,fS,pS,Ws,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function qx(u){let h;const f=u[11].default,y=Jm(f,u,u[10],null);return{c(){y&&y.c()},l(_){y&&y.l(_)},m(_,v){y&&y.m(_,v),h=!0},p(_,v){y&&y.p&&(!h||v&1024)&&Qm(y,f,_,_[10],h?ey(f,_[10],v,null):$m(_[10]),null)},i(_){h||(it(y,_),h=!0)},o(_){pt(y,_),h=!1},d(_){y&&y.d(_)}}}function mS(u){let h,f,y=u[0]&&qx(u);return{c(){y&&y.c(),h=_a()},l(_){y&&y.l(_),h=_a()},m(_,v){y&&y.m(_,v),Ae(_,h,v),f=!0},p(_,[v]){_[0]?y?(y.p(_,v),v&1&&it(y,1)):(y=qx(_),y.c(),it(y,1),y.m(h.parentNode,h)):y&&(xu(),pt(y,1,1,()=>{y=null}),wu())},i(_){f||(it(y),f=!0)},o(_){pt(y),f=!1},d(_){y&&y.d(_),_&&T(h)}}}function yS(u,h,f){let{$$slots:y={},$$scope:_}=h,{id:v}=h,{type:a}=h,{url:P=null}=h,{props:A={}}=h,{data:F=null}=h,{layer:V=null}=h,{promoteId:j=null}=h,{minzoom:U=null}=h,{maxzoom:he=null}=h,ie=!1;const{getMap:De}=Xy("map"),we=De();we.getSource(v)&&we.removeSource(v);function Ce(){we.isSourceLoaded(v)?(f(0,ie=!0),console.log(v+" loaded!")):setTimeout(()=>{console.log("..."),Ce()},500)}function Ue(){we.isStyleLoaded(v)?(At(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),Ue()},500)}U&&(A.minzoom=U),he&&(A.maxzoom=he),V&&j?(A.promoteId={},A.promoteId[V]=j):j&&(A.promoteId=j);function At(){console.log(v+" map source loading..."),a=="geojson"?F?(we.addSource(v,{type:a,data:F,...A}),Ce()):P&&(we.addSource(v,{type:a,data:P,...A}),Ce()):a=="vector"&&(we.addSource(v,{type:a,tiles:[P],...A}),Ce())}Ue();function Dt(){we.getSource(v).setData(F)}return u.$$set=ht=>{"id"in ht&&f(2,v=ht.id),"type"in ht&&f(3,a=ht.type),"url"in ht&&f(4,P=ht.url),"props"in ht&&f(1,A=ht.props),"data"in ht&&f(5,F=ht.data),"layer"in ht&&f(6,V=ht.layer),"promoteId"in ht&&f(7,j=ht.promoteId),"minzoom"in ht&&f(8,U=ht.minzoom),"maxzoom"in ht&&f(9,he=ht.maxzoom),"$$scope"in ht&&f(10,_=ht.$$scope)},u.$$.update=()=>{u.$$.dirty&33&&ie&&F&&Dt()},[ie,A,v,a,P,F,V,j,U,he,_,y]}class vS extends Hs{constructor(h){super(),Xs(this,h,yS,mS,Ws,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function gS(u,h,f){const{Popup:y}=hS,_=Y2(),v=new y({closeButton:!1,closeOnClick:!1});let{id:a}=h,{source:P}=h,{sourceLayer:A=null}=h,{type:F}=h,{filter:V=null}=h,{layout:j={}}=h,{paint:U={}}=h,{data:he=null}=h,{code:ie=null}=h,{name:De="name"}=h,{colorCode:we=null}=h,{click:Ce=!1}=h,{ignoreClick:Ue=!1}=h,{clickCenter:At=!1}=h,{selected:Dt=null}=h,{hover:ht=!1}=h,{hovered:tt=null}=h,{highlight:Ar=!1}=h,{highlightKey:yr="highlighted"}=h,{highlighted:tr=[]}=h,{order:wt=null}=h,{maxzoom:bt=null}=h,{minzoom:kr=null}=h,{isChild:Rt=!1}=h;const{getMap:zr}=Xy("map"),Qe=zr();let ar=null,$r=null,si=[];Qe.getLayer(a)&&Qe.removeLayer(a);let wr={id:a,type:F,source:P,paint:U,layout:j};V&&(wr.filter=V),A&&(wr["source-layer"]=A),bt&&(wr.maxzoom=bt),kr&&(wr.minzoom=kr),Qe.addLayer(wr,wt);function mt(){console.log("updating colors..."),he.forEach(nt=>{Qe.setFeatureState({source:P,sourceLayer:A,id:nt[ie]},{color:nt[we]})})}return Ce&&Qe.on("click",a,nt=>{if(nt.features.length>0&&!Ue){let cr=nt.features[0].id;if(Rt&&tr.includes(cr)||!Rt&&Dt!=cr){if(f(0,Dt=cr),_("select",{code:Dt}),ar&&Qe.setFeatureState({source:P,sourceLayer:A,id:ar},{selected:!1}),Qe.setFeatureState({source:P,sourceLayer:A,id:Dt},{selected:!0}),At){let ji=centroid(nt.features[0].toJSON().geometry);Qe.flyTo({center:ji.geometry.coordinates})}f(24,ar=Dt)}}}),ht&&(Qe.on("mousemove",a,nt=>{if(nt.features.length>0){let cr=nt.features[0].id;tt&&Qe.setFeatureState({source:P,sourceLayer:A,id:tt},{hovered:!1}),Rt&&tr.includes(cr)||!Rt&&Dt!=cr?(f(1,tt=f(25,$r=cr)),Qe.setFeatureState({source:P,sourceLayer:A,id:tt},{hovered:!0}),Qe.getCanvas().style.cursor="pointer",v.setLngLat(nt.lngLat).setHTML(`<strong>${nt.features[0].properties[De]?nt.features[0].properties[De]:nt.features[0].properties[ie]}</strong>`).addTo(Qe)):v.remove()}}),Qe.on("mouseleave",a,nt=>{tt&&Qe.setFeatureState({source:P,sourceLayer:A,id:tt},{hovered:!1}),f(1,tt=f(25,$r=null)),Qe.getCanvas().style.cursor="",v.remove()})),u.$$set=nt=>{"id"in nt&&f(2,a=nt.id),"source"in nt&&f(3,P=nt.source),"sourceLayer"in nt&&f(4,A=nt.sourceLayer),"type"in nt&&f(5,F=nt.type),"filter"in nt&&f(6,V=nt.filter),"layout"in nt&&f(7,j=nt.layout),"paint"in nt&&f(8,U=nt.paint),"data"in nt&&f(9,he=nt.data),"code"in nt&&f(10,ie=nt.code),"name"in nt&&f(11,De=nt.name),"colorCode"in nt&&f(12,we=nt.colorCode),"click"in nt&&f(13,Ce=nt.click),"ignoreClick"in nt&&f(14,Ue=nt.ignoreClick),"clickCenter"in nt&&f(15,At=nt.clickCenter),"selected"in nt&&f(0,Dt=nt.selected),"hover"in nt&&f(16,ht=nt.hover),"hovered"in nt&&f(1,tt=nt.hovered),"highlight"in nt&&f(17,Ar=nt.highlight),"highlightKey"in nt&&f(18,yr=nt.highlightKey),"highlighted"in nt&&f(19,tr=nt.highlighted),"order"in nt&&f(20,wt=nt.order),"maxzoom"in nt&&f(21,bt=nt.maxzoom),"minzoom"in nt&&f(22,kr=nt.minzoom),"isChild"in nt&&f(23,Rt=nt.isChild)},u.$$.update=()=>{u.$$.dirty[0]&4096&&we&&mt(),u.$$.dirty[0]&68026392&&Ar&&tr!=si&&(si[0]&&si.forEach(nt=>{let cr={};cr[yr]=!1,Qe.setFeatureState({source:P,sourceLayer:A,id:nt},cr)}),f(26,si=tr),tr[0]&&tr.forEach(nt=>{let cr={};cr[yr]=!0,Qe.setFeatureState({source:P,sourceLayer:A,id:nt},cr)})),u.$$.dirty[0]&16777241&&Dt!=ar&&(ar&&Qe.setFeatureState({source:P,sourceLayer:A,id:ar},{selected:!1}),Dt&&Qe.setFeatureState({source:P,sourceLayer:A,id:Dt},{selected:!0}),f(24,ar=Dt)),u.$$.dirty[0]&33619994&&ht&&tt!=$r&&($r&&Qe.setFeatureState({source:P,sourceLayer:A,id:$r},{hovered:!1}),tt&&Qe.setFeatureState({source:P,sourceLayer:A,id:tt},{hovered:!0}),f(25,$r=tt))},[Dt,tt,a,P,A,F,V,j,U,he,ie,De,we,Ce,Ue,At,ht,Ar,yr,tr,wt,bt,kr,Rt,ar,$r,si]}class M_ extends Hs{constructor(h){super(),Xs(this,h,gS,null,Ws,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function _S(u){return u===0?!0:u}function df(u){return _S(u)?Array.isArray(u)?h=>u.map(f=>typeof f!="function"?h[f]:f(h)):typeof u!="function"?h=>h[u]:u:null}function bS(u){const h={};for(const f of u){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":y,"1":_}=f;Object.defineProperty(h,y,{configurable:!0,enumerable:!0,writable:!0,value:_})}return h}function L_(u,h={}){return bS(Object.entries(u).filter(([f,y])=>y!==void 0&&h[f]===void 0))}function xS(u,h){if(!Array.isArray(u))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof u}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},y=Object.keys(h),_=y.length;let v,a,P,A,F,V,j,U;const he=u.length;for(v=0;v<_;v+=1){for(A=y[v],j=h[A],F=null,V=null,a=0;a<he;a+=1)if(U=j(u[a]),Array.isArray(U)){const ie=U.length;for(P=0;P<ie;P+=1)U[P]!==void 0&&U[P]!==null&&Number.isNaN(U[P])===!1&&((F===null||U[P]<F)&&(F=U[P]),(V===null||U[P]>V)&&(V=U[P]))}else U!=null&&Number.isNaN(U)===!1&&((F===null||U<F)&&(F=U),(V===null||U>V)&&(V=U));f[A]=[F,V]}return f}function nw(u=[],h){return Array.isArray(h)===!0?h.map((f,y)=>f===null?u[y]:f):u}function xv(u){return function([f,y]){return f?nw(f[u],y):y}}function Mv(u,h){return u==null||h==null?NaN:u<h?-1:u>h?1:u>=h?0:NaN}function wS(u,h){return u==null||h==null?NaN:h<u?-1:h>u?1:h>=u?0:NaN}function aw(u){let h,f,y;u.length!==2?(h=Mv,f=(P,A)=>Mv(u(P),A),y=(P,A)=>u(P)-A):(h=u===Mv||u===wS?u:ES,f=u,y=u);function _(P,A,F=0,V=P.length){if(F<V){if(h(A,A)!==0)return V;do{const j=F+V>>>1;f(P[j],A)<0?F=j+1:V=j}while(F<V)}return F}function v(P,A,F=0,V=P.length){if(F<V){if(h(A,A)!==0)return V;do{const j=F+V>>>1;f(P[j],A)<=0?F=j+1:V=j}while(F<V)}return F}function a(P,A,F=0,V=P.length){const j=_(P,A,F,V-1);return j>F&&y(P[j-1],A)>-y(P[j],A)?j-1:j}return{left:_,center:a,right:v}}function ES(){return 0}function SS(u){return u===null?NaN:+u}const kS=aw(Mv),IS=kS.right;aw(SS).center;const TS=IS;class jx extends Map{constructor(h,f=PS){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[y,_]of h)this.set(y,_)}get(h){return super.get(Zx(this,h))}has(h){return super.has(Zx(this,h))}set(h,f){return super.set(AS(this,h),f)}delete(h){return super.delete(zS(this,h))}}function Zx({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):f}function AS({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):(u.set(y,f),f)}function zS({_intern:u,_key:h},f){const y=h(f);return u.has(y)&&(f=u.get(y),u.delete(y)),f}function PS(u){return u!==null&&typeof u=="object"?u.valueOf():u}var V_=Math.sqrt(50),F_=Math.sqrt(10),N_=Math.sqrt(2);function CS(u,h,f){var y,_=-1,v,a,P;if(h=+h,u=+u,f=+f,u===h&&f>0)return[u];if((y=h<u)&&(v=u,u=h,h=v),(P=ow(u,h,f))===0||!isFinite(P))return[];if(P>0){let A=Math.round(u/P),F=Math.round(h/P);for(A*P<u&&++A,F*P>h&&--F,a=new Array(v=F-A+1);++_<v;)a[_]=(A+_)*P}else{P=-P;let A=Math.round(u*P),F=Math.round(h*P);for(A/P<u&&++A,F/P>h&&--F,a=new Array(v=F-A+1);++_<v;)a[_]=(A+_)/P}return y&&a.reverse(),a}function ow(u,h,f){var y=(h-u)/Math.max(0,f),_=Math.floor(Math.log(y)/Math.LN10),v=y/Math.pow(10,_);return _>=0?(v>=V_?10:v>=F_?5:v>=N_?2:1)*Math.pow(10,_):-Math.pow(10,-_)/(v>=V_?10:v>=F_?5:v>=N_?2:1)}function DS(u,h,f){var y=Math.abs(h-u)/Math.max(0,f),_=Math.pow(10,Math.floor(Math.log(y)/Math.LN10)),v=y/_;return v>=V_?_*=10:v>=F_?_*=5:v>=N_&&(_*=2),h<u?-_:_}function MS(u,h,f){u=+u,h=+h,f=(_=arguments.length)<2?(h=u,u=0,1):_<3?1:+f;for(var y=-1,_=Math.max(0,Math.ceil((h-u)/f))|0,v=new Array(_);++y<_;)v[y]=u+y*f;return v}function Xv(u,h){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(h).domain(u);break}return this}const Gx=Symbol("implicit");function sw(){var u=new jx,h=[],f=[],y=Gx;function _(v){let a=u.get(v);if(a===void 0){if(y!==Gx)return y;u.set(v,a=h.push(v)-1)}return f[a%f.length]}return _.domain=function(v){if(!arguments.length)return h.slice();h=[],u=new jx;for(const a of v)u.has(a)||u.set(a,h.push(a)-1);return _},_.range=function(v){return arguments.length?(f=Array.from(v),_):f.slice()},_.unknown=function(v){return arguments.length?(y=v,_):y},_.copy=function(){return sw(h,f).unknown(y)},Xv.apply(_,arguments),_}function lw(){var u=sw().unknown(void 0),h=u.domain,f=u.range,y=0,_=1,v,a,P=!1,A=0,F=0,V=.5;delete u.unknown;function j(){var U=h().length,he=_<y,ie=he?_:y,De=he?y:_;v=(De-ie)/Math.max(1,U-A+F*2),P&&(v=Math.floor(v)),ie+=(De-ie-v*(U-A))*V,a=v*(1-A),P&&(ie=Math.round(ie),a=Math.round(a));var we=MS(U).map(function(Ce){return ie+v*Ce});return f(he?we.reverse():we)}return u.domain=function(U){return arguments.length?(h(U),j()):h()},u.range=function(U){return arguments.length?([y,_]=U,y=+y,_=+_,j()):[y,_]},u.rangeRound=function(U){return[y,_]=U,y=+y,_=+_,P=!0,j()},u.bandwidth=function(){return a},u.step=function(){return v},u.round=function(U){return arguments.length?(P=!!U,j()):P},u.padding=function(U){return arguments.length?(A=Math.min(1,F=+U),j()):A},u.paddingInner=function(U){return arguments.length?(A=Math.min(1,U),j()):A},u.paddingOuter=function(U){return arguments.length?(F=+U,j()):F},u.align=function(U){return arguments.length?(V=Math.max(0,Math.min(1,U)),j()):V},u.copy=function(){return lw(h(),[y,_]).round(P).paddingInner(A).paddingOuter(F).align(V)},Xv.apply(j(),arguments)}function J_(u,h,f){u.prototype=h.prototype=f,f.constructor=u}function uw(u,h){var f=Object.create(u.prototype);for(var y in h)f[y]=h[y];return f}function rv(){}var Gy=.7,Fv=1/Gy,Ym="\\s*([+-]?\\d+)\\s*",Ky="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LS=/^#([0-9a-f]{3,8})$/,RS=new RegExp(`^rgb\\(${Ym},${Ym},${Ym}\\)$`),BS=new RegExp(`^rgb\\(${Oh},${Oh},${Oh}\\)$`),OS=new RegExp(`^rgba\\(${Ym},${Ym},${Ym},${Ky}\\)$`),VS=new RegExp(`^rgba\\(${Oh},${Oh},${Oh},${Ky}\\)$`),FS=new RegExp(`^hsl\\(${Ky},${Oh},${Oh}\\)$`),NS=new RegExp(`^hsla\\(${Ky},${Oh},${Oh},${Ky}\\)$`),Kx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J_(rv,Hy,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:Hx,formatHex:Hx,formatHex8:US,formatHsl:qS,formatRgb:Xx,toString:Xx});function Hx(){return this.rgb().formatHex()}function US(){return this.rgb().formatHex8()}function qS(){return cw(this).formatHsl()}function Xx(){return this.rgb().formatRgb()}function Hy(u){var h,f;return u=(u+"").trim().toLowerCase(),(h=LS.exec(u))?(f=h[1].length,h=parseInt(h[1],16),f===6?Wx(h):f===3?new Xl(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?wv(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?wv(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=RS.exec(u))?new Xl(h[1],h[2],h[3],1):(h=BS.exec(u))?new Xl(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=OS.exec(u))?wv(h[1],h[2],h[3],h[4]):(h=VS.exec(u))?wv(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=FS.exec(u))?Qx(h[1],h[2]/100,h[3]/100,1):(h=NS.exec(u))?Qx(h[1],h[2]/100,h[3]/100,h[4]):Kx.hasOwnProperty(u)?Wx(Kx[u]):u==="transparent"?new Xl(NaN,NaN,NaN,0):null}function Wx(u){return new Xl(u>>16&255,u>>8&255,u&255,1)}function wv(u,h,f,y){return y<=0&&(u=h=f=NaN),new Xl(u,h,f,y)}function jS(u){return u instanceof rv||(u=Hy(u)),u?(u=u.rgb(),new Xl(u.r,u.g,u.b,u.opacity)):new Xl}function U_(u,h,f,y){return arguments.length===1?jS(u):new Xl(u,h,f,y==null?1:y)}function Xl(u,h,f,y){this.r=+u,this.g=+h,this.b=+f,this.opacity=+y}J_(Xl,U_,uw(rv,{brighter(u){return u=u==null?Fv:Math.pow(Fv,u),new Xl(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=u==null?Gy:Math.pow(Gy,u),new Xl(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new Xl(Sd(this.r),Sd(this.g),Sd(this.b),Nv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yx,formatHex:Yx,formatHex8:ZS,formatRgb:Jx,toString:Jx}));function Yx(){return`#${Ed(this.r)}${Ed(this.g)}${Ed(this.b)}`}function ZS(){return`#${Ed(this.r)}${Ed(this.g)}${Ed(this.b)}${Ed((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jx(){const u=Nv(this.opacity);return`${u===1?"rgb(":"rgba("}${Sd(this.r)}, ${Sd(this.g)}, ${Sd(this.b)}${u===1?")":`, ${u})`}`}function Nv(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function Sd(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function Ed(u){return u=Sd(u),(u<16?"0":"")+u.toString(16)}function Qx(u,h,f,y){return y<=0?u=h=f=NaN:f<=0||f>=1?u=h=NaN:h<=0&&(u=NaN),new Nc(u,h,f,y)}function cw(u){if(u instanceof Nc)return new Nc(u.h,u.s,u.l,u.opacity);if(u instanceof rv||(u=Hy(u)),!u)return new Nc;if(u instanceof Nc)return u;u=u.rgb();var h=u.r/255,f=u.g/255,y=u.b/255,_=Math.min(h,f,y),v=Math.max(h,f,y),a=NaN,P=v-_,A=(v+_)/2;return P?(h===v?a=(f-y)/P+(f<y)*6:f===v?a=(y-h)/P+2:a=(h-f)/P+4,P/=A<.5?v+_:2-v-_,a*=60):P=A>0&&A<1?0:a,new Nc(a,P,A,u.opacity)}function GS(u,h,f,y){return arguments.length===1?cw(u):new Nc(u,h,f,y==null?1:y)}function Nc(u,h,f,y){this.h=+u,this.s=+h,this.l=+f,this.opacity=+y}J_(Nc,GS,uw(rv,{brighter(u){return u=u==null?Fv:Math.pow(Fv,u),new Nc(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=u==null?Gy:Math.pow(Gy,u),new Nc(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+(this.h<0)*360,h=isNaN(u)||isNaN(this.s)?0:this.s,f=this.l,y=f+(f<.5?f:1-f)*h,_=2*f-y;return new Xl(R_(u>=240?u-240:u+120,_,y),R_(u,_,y),R_(u<120?u+240:u-120,_,y),this.opacity)},clamp(){return new Nc($x(this.h),Ev(this.s),Ev(this.l),Nv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=Nv(this.opacity);return`${u===1?"hsl(":"hsla("}${$x(this.h)}, ${Ev(this.s)*100}%, ${Ev(this.l)*100}%${u===1?")":`, ${u})`}`}}));function $x(u){return u=(u||0)%360,u<0?u+360:u}function Ev(u){return Math.max(0,Math.min(1,u||0))}function R_(u,h,f){return(u<60?h+(f-h)*u/60:u<180?f:u<240?h+(f-h)*(240-u)/60:h)*255}const Q_=u=>()=>u;function KS(u,h){return function(f){return u+f*h}}function HS(u,h,f){return u=Math.pow(u,f),h=Math.pow(h,f)-u,f=1/f,function(y){return Math.pow(u+y*h,f)}}function XS(u){return(u=+u)==1?hw:function(h,f){return f-h?HS(h,f,u):Q_(isNaN(h)?f:h)}}function hw(u,h){var f=h-u;return f?KS(u,f):Q_(isNaN(u)?h:u)}const e2=function u(h){var f=XS(h);function y(_,v){var a=f((_=U_(_)).r,(v=U_(v)).r),P=f(_.g,v.g),A=f(_.b,v.b),F=hw(_.opacity,v.opacity);return function(V){return _.r=a(V),_.g=P(V),_.b=A(V),_.opacity=F(V),_+""}}return y.gamma=u,y}(1);function WS(u,h){h||(h=[]);var f=u?Math.min(h.length,u.length):0,y=h.slice(),_;return function(v){for(_=0;_<f;++_)y[_]=u[_]*(1-v)+h[_]*v;return y}}function YS(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function JS(u,h){var f=h?h.length:0,y=u?Math.min(f,u.length):0,_=new Array(y),v=new Array(f),a;for(a=0;a<y;++a)_[a]=$_(u[a],h[a]);for(;a<f;++a)v[a]=h[a];return function(P){for(a=0;a<y;++a)v[a]=_[a](P);return v}}function QS(u,h){var f=new Date;return u=+u,h=+h,function(y){return f.setTime(u*(1-y)+h*y),f}}function Uv(u,h){return u=+u,h=+h,function(f){return u*(1-f)+h*f}}function $S(u,h){var f={},y={},_;(u===null||typeof u!="object")&&(u={}),(h===null||typeof h!="object")&&(h={});for(_ in h)_ in u?f[_]=$_(u[_],h[_]):y[_]=h[_];return function(v){for(_ in f)y[_]=f[_](v);return y}}var q_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,B_=new RegExp(q_.source,"g");function e5(u){return function(){return u}}function t5(u){return function(h){return u(h)+""}}function r5(u,h){var f=q_.lastIndex=B_.lastIndex=0,y,_,v,a=-1,P=[],A=[];for(u=u+"",h=h+"";(y=q_.exec(u))&&(_=B_.exec(h));)(v=_.index)>f&&(v=h.slice(f,v),P[a]?P[a]+=v:P[++a]=v),(y=y[0])===(_=_[0])?P[a]?P[a]+=_:P[++a]=_:(P[++a]=null,A.push({i:a,x:Uv(y,_)})),f=B_.lastIndex;return f<h.length&&(v=h.slice(f),P[a]?P[a]+=v:P[++a]=v),P.length<2?A[0]?t5(A[0].x):e5(h):(h=A.length,function(F){for(var V=0,j;V<h;++V)P[(j=A[V]).i]=j.x(F);return P.join("")})}function $_(u,h){var f=typeof h,y;return h==null||f==="boolean"?Q_(h):(f==="number"?Uv:f==="string"?(y=Hy(h))?(h=y,e2):r5:h instanceof Hy?e2:h instanceof Date?QS:YS(h)?WS:Array.isArray(h)?JS:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?$S:Uv)(u,h)}function i5(u,h){return u=+u,h=+h,function(f){return Math.round(u*(1-f)+h*f)}}function n5(u){return function(){return u}}function a5(u){return+u}var t2=[0,1];function Bh(u){return u}function j_(u,h){return(h-=u=+u)?function(f){return(f-u)/h}:n5(isNaN(h)?NaN:.5)}function o5(u,h){var f;return u>h&&(f=u,u=h,h=f),function(y){return Math.max(u,Math.min(h,y))}}function s5(u,h,f){var y=u[0],_=u[1],v=h[0],a=h[1];return _<y?(y=j_(_,y),v=f(a,v)):(y=j_(y,_),v=f(v,a)),function(P){return v(y(P))}}function l5(u,h,f){var y=Math.min(u.length,h.length)-1,_=new Array(y),v=new Array(y),a=-1;for(u[y]<u[0]&&(u=u.slice().reverse(),h=h.slice().reverse());++a<y;)_[a]=j_(u[a],u[a+1]),v[a]=f(h[a],h[a+1]);return function(P){var A=TS(u,P,1,y)-1;return v[A](_[A](P))}}function pw(u,h){return h.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function fw(){var u=t2,h=t2,f=$_,y,_,v,a=Bh,P,A,F;function V(){var U=Math.min(u.length,h.length);return a!==Bh&&(a=o5(u[0],u[U-1])),P=U>2?l5:s5,A=F=null,j}function j(U){return U==null||isNaN(U=+U)?v:(A||(A=P(u.map(y),h,f)))(y(a(U)))}return j.invert=function(U){return a(_((F||(F=P(h,u.map(y),Uv)))(U)))},j.domain=function(U){return arguments.length?(u=Array.from(U,a5),V()):u.slice()},j.range=function(U){return arguments.length?(h=Array.from(U),V()):h.slice()},j.rangeRound=function(U){return h=Array.from(U),f=i5,V()},j.clamp=function(U){return arguments.length?(a=U?!0:Bh,V()):a!==Bh},j.interpolate=function(U){return arguments.length?(f=U,V()):f},j.unknown=function(U){return arguments.length?(v=U,j):v},function(U,he){return y=U,_=he,V()}}function u5(){return fw()(Bh,Bh)}function c5(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)}function qv(u,h){if((f=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var f,y=u.slice(0,f);return[y.length>1?y[0]+y.slice(2):y,+u.slice(f+1)]}function ty(u){return u=qv(Math.abs(u)),u?u[1]:NaN}function h5(u,h){return function(f,y){for(var _=f.length,v=[],a=0,P=u[0],A=0;_>0&&P>0&&(A+P+1>y&&(P=Math.max(1,y-A)),v.push(f.substring(_-=P,_+P)),!((A+=P+1)>y));)P=u[a=(a+1)%u.length];return v.reverse().join(h)}}function p5(u){return function(h){return h.replace(/[0-9]/g,function(f){return u[+f]})}}var f5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jv(u){if(!(h=f5.exec(u)))throw new Error("invalid format: "+u);var h;return new e0({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}jv.prototype=e0.prototype;function e0(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}e0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function d5(u){e:for(var h=u.length,f=1,y=-1,_;f<h;++f)switch(u[f]){case".":y=_=f;break;case"0":y===0&&(y=f),_=f;break;default:if(!+u[f])break e;y>0&&(y=0);break}return y>0?u.slice(0,y)+u.slice(_+1):u}var dw;function m5(u,h){var f=qv(u,h);if(!f)return u+"";var y=f[0],_=f[1],v=_-(dw=Math.max(-8,Math.min(8,Math.floor(_/3)))*3)+1,a=y.length;return v===a?y:v>a?y+new Array(v-a+1).join("0"):v>0?y.slice(0,v)+"."+y.slice(v):"0."+new Array(1-v).join("0")+qv(u,Math.max(0,h+v-1))[0]}function r2(u,h){var f=qv(u,h);if(!f)return u+"";var y=f[0],_=f[1];return _<0?"0."+new Array(-_).join("0")+y:y.length>_+1?y.slice(0,_+1)+"."+y.slice(_+1):y+new Array(_-y.length+2).join("0")}const i2={"%":(u,h)=>(u*100).toFixed(h),b:u=>Math.round(u).toString(2),c:u=>u+"",d:c5,e:(u,h)=>u.toExponential(h),f:(u,h)=>u.toFixed(h),g:(u,h)=>u.toPrecision(h),o:u=>Math.round(u).toString(8),p:(u,h)=>r2(u*100,h),r:r2,s:m5,X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function n2(u){return u}var a2=Array.prototype.map,o2=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function y5(u){var h=u.grouping===void 0||u.thousands===void 0?n2:h5(a2.call(u.grouping,Number),u.thousands+""),f=u.currency===void 0?"":u.currency[0]+"",y=u.currency===void 0?"":u.currency[1]+"",_=u.decimal===void 0?".":u.decimal+"",v=u.numerals===void 0?n2:p5(a2.call(u.numerals,String)),a=u.percent===void 0?"%":u.percent+"",P=u.minus===void 0?"\u2212":u.minus+"",A=u.nan===void 0?"NaN":u.nan+"";function F(j){j=jv(j);var U=j.fill,he=j.align,ie=j.sign,De=j.symbol,we=j.zero,Ce=j.width,Ue=j.comma,At=j.precision,Dt=j.trim,ht=j.type;ht==="n"?(Ue=!0,ht="g"):i2[ht]||(At===void 0&&(At=12),Dt=!0,ht="g"),(we||U==="0"&&he==="=")&&(we=!0,U="0",he="=");var tt=De==="$"?f:De==="#"&&/[boxX]/.test(ht)?"0"+ht.toLowerCase():"",Ar=De==="$"?y:/[%p]/.test(ht)?a:"",yr=i2[ht],tr=/[defgprs%]/.test(ht);At=At===void 0?6:/[gprs]/.test(ht)?Math.max(1,Math.min(21,At)):Math.max(0,Math.min(20,At));function wt(bt){var kr=tt,Rt=Ar,zr,Qe,ar;if(ht==="c")Rt=yr(bt)+Rt,bt="";else{bt=+bt;var $r=bt<0||1/bt<0;if(bt=isNaN(bt)?A:yr(Math.abs(bt),At),Dt&&(bt=d5(bt)),$r&&+bt==0&&ie!=="+"&&($r=!1),kr=($r?ie==="("?ie:P:ie==="-"||ie==="("?"":ie)+kr,Rt=(ht==="s"?o2[8+dw/3]:"")+Rt+($r&&ie==="("?")":""),tr){for(zr=-1,Qe=bt.length;++zr<Qe;)if(ar=bt.charCodeAt(zr),48>ar||ar>57){Rt=(ar===46?_+bt.slice(zr+1):bt.slice(zr))+Rt,bt=bt.slice(0,zr);break}}}Ue&&!we&&(bt=h(bt,1/0));var si=kr.length+bt.length+Rt.length,wr=si<Ce?new Array(Ce-si+1).join(U):"";switch(Ue&&we&&(bt=h(wr+bt,wr.length?Ce-Rt.length:1/0),wr=""),he){case"<":bt=kr+bt+Rt+wr;break;case"=":bt=kr+wr+bt+Rt;break;case"^":bt=wr.slice(0,si=wr.length>>1)+kr+bt+Rt+wr.slice(si);break;default:bt=wr+kr+bt+Rt;break}return v(bt)}return wt.toString=function(){return j+""},wt}function V(j,U){var he=F((j=jv(j),j.type="f",j)),ie=Math.max(-8,Math.min(8,Math.floor(ty(U)/3)))*3,De=Math.pow(10,-ie),we=o2[8+ie/3];return function(Ce){return he(De*Ce)+we}}return{format:F,formatPrefix:V}}var Sv,mw,yw;v5({thousands:",",grouping:[3],currency:["$",""]});function v5(u){return Sv=y5(u),mw=Sv.format,yw=Sv.formatPrefix,Sv}function g5(u){return Math.max(0,-ty(Math.abs(u)))}function _5(u,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ty(h)/3)))*3-ty(Math.abs(u)))}function b5(u,h){return u=Math.abs(u),h=Math.abs(h)-u,Math.max(0,ty(h)-ty(u))+1}function x5(u,h,f,y){var _=DS(u,h,f),v;switch(y=jv(y==null?",f":y),y.type){case"s":{var a=Math.max(Math.abs(u),Math.abs(h));return y.precision==null&&!isNaN(v=_5(_,a))&&(y.precision=v),yw(y,a)}case"":case"e":case"g":case"p":case"r":{y.precision==null&&!isNaN(v=b5(_,Math.max(Math.abs(u),Math.abs(h))))&&(y.precision=v-(y.type==="e"));break}case"f":case"%":{y.precision==null&&!isNaN(v=g5(_))&&(y.precision=v-(y.type==="%")*2);break}}return mw(y)}function vw(u){var h=u.domain;return u.ticks=function(f){var y=h();return CS(y[0],y[y.length-1],f==null?10:f)},u.tickFormat=function(f,y){var _=h();return x5(_[0],_[_.length-1],f==null?10:f,y)},u.nice=function(f){f==null&&(f=10);var y=h(),_=0,v=y.length-1,a=y[_],P=y[v],A,F,V=10;for(P<a&&(F=a,a=P,P=F,F=_,_=v,v=F);V-- >0;){if(F=ow(a,P,f),F===A)return y[_]=a,y[v]=P,h(y);if(F>0)a=Math.floor(a/F)*F,P=Math.ceil(P/F)*F;else if(F<0)a=Math.ceil(a*F)/F,P=Math.floor(P*F)/F;else break;A=F}return u},u}function Lv(){var u=u5();return u.copy=function(){return pw(u,Lv())},Xv.apply(u,arguments),vw(u)}function s2(u){return function(h){return h<0?-Math.pow(-h,u):Math.pow(h,u)}}function w5(u){return u<0?-Math.sqrt(-u):Math.sqrt(u)}function E5(u){return u<0?-u*u:u*u}function S5(u){var h=u(Bh,Bh),f=1;function y(){return f===1?u(Bh,Bh):f===.5?u(w5,E5):u(s2(f),s2(1/f))}return h.exponent=function(_){return arguments.length?(f=+_,y()):f},vw(h)}function gw(){var u=S5(fw());return u.copy=function(){return pw(u,gw()).exponent(u.exponent())},Xv.apply(u,arguments),u}function k5(){return gw.apply(null,arguments).exponent(.5)}const jy={x:Lv,y:Lv,z:Lv,r:k5};function I5(u){return u.constant?"symlog":u.base?"log":u.exponent?u.exponent()===.5?"sqrt":"pow":"other"}function l2(u){return u}function T5(u){return h=>Math.log(u*h)}function A5(u){return h=>u*Math.exp(h)}function z5(u){return h=>Math.sign(h)*Math.log1p(Math.abs(h/u))}function P5(u){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*u}function kv(u){return function(f){return f<0?-Math.pow(-f,u):Math.pow(f,u)}}function C5(u){const h=I5(u);if(h==="log"){const f=Math.sign(u.domain()[0]);return{lift:T5(f),ground:A5(f),scaleType:h}}return h==="pow"?{lift:kv(1),ground:kv(1/1),scaleType:h}:h==="sqrt"?{lift:kv(.5),ground:kv(1/.5),scaleType:h}:h==="symlog"?{lift:z5(1),ground:P5(1),scaleType:h}:{lift:l2,ground:l2,scaleType:h}}function D5(u,h){if(typeof u.range!="function")throw new Error("Scale method `range` must be a function");if(typeof u.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return u.domain();u.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",u.domain()),u.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",u.range());const{lift:f,ground:y}=C5(u),_=u.domain()[0],v=Object.prototype.toString.call(_)==="[object Date]",[a,P]=u.domain().map(he=>f(v?he.getTime():he)),[A,F]=u.range(),V=h[0]||0,j=h[1]||0,U=(P-a)/(Math.abs(F-A)-V-j);return[a-V*U,j*U+P].map(he=>y(v?new Date(he):he))}function M5(u,h,f,y,_){let v,a;return _===!0?(v=0,a=100):(v=u==="r"?1:0,a=u==="y"?f:u==="r"?25:h),y===!0?[a,v]:[v,a]}function L5(u,h,f,y,_,v){return _?typeof _=="function"?_({width:h,height:f}):_:M5(u,h,f,y,v)}function Iv(u){return function([f,y,_,v,a,P,A,F,V,j]){if(y===null)return null;const U=L5(u,A,F,P,V,j),he=f===jy[u]?f():f.copy();return he.domain(nw(y[u],_)).range(U),v&&he.domain(D5(he,v)),a===!0&&(typeof he.nice=="function"?he.nice():console.error(`[Layer Cake] You set \`${u}Nice: true\` but the ${u}Scale does not have a \`.nice\` method. Ignoring...`)),he}}function Tv([u,h]){return f=>{const y=u(f);return Array.isArray(y)?y.map(_=>h(_)):h(y)}}function Av([u]){if(typeof u=="function"){if(typeof u.range=="function")return u.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const zv={x:!1,y:!0,z:!1,r:!1};const R5=u=>({element:u[0]&4,width:u[0]&256,height:u[0]&512,aspectRatio:u[0]&1024,containerWidth:u[0]&128,containerHeight:u[0]&64}),u2=u=>({element:u[2],width:u[8],height:u[9],aspectRatio:u[10],containerWidth:u[7],containerHeight:u[6]});function c2(u){let h,f,y;const _=u[90].default,v=Jm(_,u,u[89],u2);return{c(){h=D("div"),v&&v.c(),this.h()},l(a){h=M(a,"DIV",{class:!0});var P=R(h);v&&v.l(P),P.forEach(T),this.h()},h(){S(h,"class","layercake-container svelte-vhzpsp"),Gs(()=>u[92].call(h)),re(h,"position",u[5],!1),re(h,"top",u[5]==="absolute"?"0":null,!1),re(h,"right",u[5]==="absolute"?"0":null,!1),re(h,"bottom",u[5]==="absolute"?"0":null,!1),re(h,"left",u[5]==="absolute"?"0":null,!1),re(h,"pointer-events",u[4]===!1?"none":null,!1)},m(a,P){Ae(a,h,P),v&&v.m(h,null),u[91](h),f=Ks(h,u[92].bind(h)),y=!0},p(a,P){v&&v.p&&(!y||P[0]&1988|P[2]&134217728)&&Qm(v,_,a,a[89],y?ey(_,a[89],P,R5):$m(a[89]),u2),P[0]&32&&re(h,"position",a[5],!1),P[0]&32&&re(h,"top",a[5]==="absolute"?"0":null,!1),P[0]&32&&re(h,"right",a[5]==="absolute"?"0":null,!1),P[0]&32&&re(h,"bottom",a[5]==="absolute"?"0":null,!1),P[0]&32&&re(h,"left",a[5]==="absolute"?"0":null,!1),P[0]&16&&re(h,"pointer-events",a[4]===!1?"none":null,!1)},i(a){y||(it(v,a),y=!0)},o(a){pt(v,a),y=!1},d(a){a&&T(h),v&&v.d(a),u[91](null),f()}}}function B5(u){let h,f,y=(u[3]===!0||typeof window<"u")&&c2(u);return{c(){y&&y.c(),h=_a()},l(_){y&&y.l(_),h=_a()},m(_,v){y&&y.m(_,v),Ae(_,h,v),f=!0},p(_,v){_[3]===!0||typeof window<"u"?y?(y.p(_,v),v[0]&8&&it(y,1)):(y=c2(_),y.c(),it(y,1),y.m(h.parentNode,h)):y&&(xu(),pt(y,1,1,()=>{y=null}),wu())},i(_){f||(it(y),f=!0)},o(_){pt(y),f=!1},d(_){y&&y.d(_),_&&T(h)}}}function O5(u,h,f){let y,_,v,a,P,A,F,V,j,U,he,ie,De,we,Ce,Ue,At,Dt,ht,tt,Ar,yr,tr,wt,bt,kr,Rt,zr,Qe,ar,$r,si,wr,mt,nt,cr,ji,la,Bi,zi,li,{$$slots:tn={},$$scope:rr}=h,{ssr:Oi=!1}=h,{pointerEvents:Za=!0}=h,{position:Ir="relative"}=h,{percentRange:Bt=!1}=h,{width:rn=void 0}=h,{height:mi=void 0}=h,{containerWidth:Zr=rn||100}=h,{containerHeight:eo=mi||100}=h,{element:Ut=void 0}=h,{x:yi=void 0}=h,{y:Or=void 0}=h,{z:bi=void 0}=h,{r:Gr=void 0}=h,{data:Vr=[]}=h,{xDomain:xi=void 0}=h,{yDomain:wi=void 0}=h,{zDomain:Mr=void 0}=h,{rDomain:er=void 0}=h,{xNice:Pr=!1}=h,{yNice:Yn=!1}=h,{zNice:jn=!1}=h,{rNice:Vn=!1}=h,{xReverse:Jn=zv.x}=h,{yReverse:vi=zv.y}=h,{zReverse:Zi=zv.z}=h,{rReverse:_n=zv.r}=h,{xPadding:to=void 0}=h,{yPadding:An=void 0}=h,{zPadding:is=void 0}=h,{rPadding:bn=void 0}=h,{xScale:Pi=jy.x}=h,{yScale:ei=jy.y}=h,{zScale:nn=jy.z}=h,{rScale:Qn=jy.r}=h,{xRange:zn=void 0}=h,{yRange:Wr=void 0}=h,{zRange:N=void 0}=h,{rRange:G=void 0}=h,{padding:H={}}=h,{extents:$={}}=h,{flatData:oe=void 0}=h,{custom:ve={}}=h,ge=!1;Q2(()=>{ge=!0});const X={},ne=oi(Bt);ur(u,ne,Se=>f(128,la=Se));const ke=oi(Zr);ur(u,ke,Se=>f(7,ji=Se));const qe=oi(eo);ur(u,qe,Se=>f(6,cr=Se));const Ze=oi(L_($));ur(u,Ze,Se=>f(127,nt=Se));const ze=oi(Vr);ur(u,ze,Se=>f(126,mt=Se));const je=oi(oe||Vr);ur(u,je,Se=>f(125,wr=Se));const ot=oi(H);ur(u,ot,Se=>f(124,si=Se));const st=oi(df(yi));ur(u,st,Se=>f(123,$r=Se));const Re=oi(df(Or));ur(u,Re,Se=>f(122,ar=Se));const $e=oi(df(bi));ur(u,$e,Se=>f(121,Qe=Se));const He=oi(df(Gr));ur(u,He,Se=>f(120,zr=Se));const et=oi(xi);ur(u,et,Se=>f(119,Rt=Se));const Mt=oi(wi);ur(u,Mt,Se=>f(118,kr=Se));const We=oi(Mr);ur(u,We,Se=>f(117,bt=Se));const qt=oi(er);ur(u,qt,Se=>f(116,wt=Se));const pr=oi(Pr);ur(u,pr,Se=>f(115,tr=Se));const kt=oi(Yn);ur(u,kt,Se=>f(114,yr=Se));const ir=oi(jn);ur(u,ir,Se=>f(113,Ar=Se));const Vt=oi(Vn);ur(u,Vt,Se=>f(112,tt=Se));const Fr=oi(Jn);ur(u,Fr,Se=>f(111,ht=Se));const Ft=oi(vi);ur(u,Ft,Se=>f(110,Dt=Se));const _r=oi(Zi);ur(u,_r,Se=>f(109,At=Se));const hr=oi(_n);ur(u,hr,Se=>f(108,Ue=Se));const Ht=oi(to);ur(u,Ht,Se=>f(107,Ce=Se));const lr=oi(An);ur(u,lr,Se=>f(106,we=Se));const gi=oi(is);ur(u,gi,Se=>f(105,De=Se));const Pn=oi(bn);ur(u,Pn,Se=>f(104,ie=Se));const Ei=oi(zn);ur(u,Ei,Se=>f(103,he=Se));const Si=oi(Wr);ur(u,Si,Se=>f(102,U=Se));const an=oi(N);ur(u,an,Se=>f(101,j=Se));const on=oi(G);ur(u,on,Se=>f(100,V=Se));const br=oi(Pi);ur(u,br,Se=>f(99,F=Se));const Gi=oi(ei);ur(u,Gi,Se=>f(98,A=Se));const sn=oi(nn);ur(u,sn,Se=>f(97,P=Se));const Yr=oi(Qn);ur(u,Yr,Se=>f(96,a=Se));const ln=oi(X);ur(u,ln,Se=>f(94,_=Se));const Er=oi(ve);ur(u,Er,Se=>f(95,v=Se));const ui=za([st,Re,$e,He],([Se,Hi,Nn,Cr])=>{const ca={};return Se&&(ca.x=Se),Hi&&(ca.y=Hi),Nn&&(ca.z=Nn),Cr&&(ca.r=Cr),ca}),Vi=za([ot,ke,qe],([Se])=>Object.assign({top:0,right:0,bottom:0,left:0},Se)),Ys=za([ke,qe,Vi],([Se,Hi,Nn])=>{const Cr={};return Cr.top=Nn.top,Cr.right=Se-Nn.right,Cr.bottom=Hi-Nn.bottom,Cr.left=Nn.left,Cr.width=Cr.right-Cr.left,Cr.height=Cr.bottom-Cr.top,Cr.width<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Cr.height<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Cr}),Ki=za([Ys],([Se])=>Se.width);ur(u,Ki,Se=>f(8,Bi=Se));const $n=za([Ys],([Se])=>Se.height);ur(u,$n,Se=>f(9,zi=Se));const ti=za([je,ui,Ze],([Se,Hi,Nn])=>{const Cr=L_(Hi,Nn);return Object.keys(Cr).length>0?{...xS(Se,Cr),...Nn}:{}}),Jr=za([ti,et],xv("x")),ki=za([ti,Mt],xv("y")),ci=za([ti,We],xv("z")),ro=za([ti,qt],xv("r")),Pa=za([br,ti,Jr,Ht,pr,Fr,Ki,$n,Ei,ne],Iv("x")),Qu=za([st,Pa],Tv),ns=za([Gi,ti,ki,lr,kt,Ft,Ki,$n,Si,ne],Iv("y")),Fn=za([Re,ns],Tv),Zn=za([sn,ti,ci,gi,ir,_r,Ki,$n,an,ne],Iv("z")),Ca=za([$e,Zn],Tv),Da=za([Yr,ti,ro,Pn,Vt,hr,Ki,$n,on,ne],Iv("r")),go=za([He,Da],Tv),ua=za([Pa],Av),Il=za([ns],Av),as=za([Zn],Av),Co=za([Da],Av),Fi=za([Ki,$n],([Se,Hi])=>Se/Hi);ur(u,Fi,Se=>f(10,li=Se));function Ci(Se){Pp[Se?"unshift":"push"](()=>{Ut=Se,f(2,Ut)})}function un(){Zr=this.clientWidth,eo=this.clientHeight,f(0,Zr),f(1,eo)}return u.$$set=Se=>{"ssr"in Se&&f(3,Oi=Se.ssr),"pointerEvents"in Se&&f(4,Za=Se.pointerEvents),"position"in Se&&f(5,Ir=Se.position),"percentRange"in Se&&f(51,Bt=Se.percentRange),"width"in Se&&f(52,rn=Se.width),"height"in Se&&f(53,mi=Se.height),"containerWidth"in Se&&f(0,Zr=Se.containerWidth),"containerHeight"in Se&&f(1,eo=Se.containerHeight),"element"in Se&&f(2,Ut=Se.element),"x"in Se&&f(54,yi=Se.x),"y"in Se&&f(55,Or=Se.y),"z"in Se&&f(56,bi=Se.z),"r"in Se&&f(57,Gr=Se.r),"data"in Se&&f(58,Vr=Se.data),"xDomain"in Se&&f(59,xi=Se.xDomain),"yDomain"in Se&&f(60,wi=Se.yDomain),"zDomain"in Se&&f(61,Mr=Se.zDomain),"rDomain"in Se&&f(62,er=Se.rDomain),"xNice"in Se&&f(63,Pr=Se.xNice),"yNice"in Se&&f(64,Yn=Se.yNice),"zNice"in Se&&f(65,jn=Se.zNice),"rNice"in Se&&f(66,Vn=Se.rNice),"xReverse"in Se&&f(67,Jn=Se.xReverse),"yReverse"in Se&&f(68,vi=Se.yReverse),"zReverse"in Se&&f(69,Zi=Se.zReverse),"rReverse"in Se&&f(70,_n=Se.rReverse),"xPadding"in Se&&f(71,to=Se.xPadding),"yPadding"in Se&&f(72,An=Se.yPadding),"zPadding"in Se&&f(73,is=Se.zPadding),"rPadding"in Se&&f(74,bn=Se.rPadding),"xScale"in Se&&f(75,Pi=Se.xScale),"yScale"in Se&&f(76,ei=Se.yScale),"zScale"in Se&&f(77,nn=Se.zScale),"rScale"in Se&&f(78,Qn=Se.rScale),"xRange"in Se&&f(79,zn=Se.xRange),"yRange"in Se&&f(80,Wr=Se.yRange),"zRange"in Se&&f(81,N=Se.zRange),"rRange"in Se&&f(82,G=Se.rRange),"padding"in Se&&f(83,H=Se.padding),"extents"in Se&&f(84,$=Se.extents),"flatData"in Se&&f(85,oe=Se.flatData),"custom"in Se&&f(86,ve=Se.custom),"$$scope"in Se&&f(89,rr=Se.$$scope)},u.$$.update=()=>{u.$$.dirty[1]&8388608&&yi&&f(87,X.x=yi,X),u.$$.dirty[1]&16777216&&Or&&f(87,X.y=Or,X),u.$$.dirty[1]&33554432&&bi&&f(87,X.z=bi,X),u.$$.dirty[1]&67108864&&Gr&&f(87,X.r=Gr,X),u.$$.dirty[1]&268435456&&xi&&f(87,X.xDomain=xi,X),u.$$.dirty[1]&536870912&&wi&&f(87,X.yDomain=wi,X),u.$$.dirty[1]&1073741824&&Mr&&f(87,X.zDomain=Mr,X),u.$$.dirty[2]&1&&er&&f(87,X.rDomain=er,X),u.$$.dirty[2]&131072&&zn&&f(87,X.xRange=zn,X),u.$$.dirty[2]&262144&&Wr&&f(87,X.yRange=Wr,X),u.$$.dirty[2]&524288&&N&&f(87,X.zRange=N,X),u.$$.dirty[2]&1048576&&G&&f(87,X.rRange=G,X),u.$$.dirty[1]&1048576&&ai(ne,la=Bt,la),u.$$.dirty[0]&1&&ai(ke,ji=Zr,ji),u.$$.dirty[0]&2&&ai(qe,cr=eo,cr),u.$$.dirty[2]&4194304&&ai(Ze,nt=L_($),nt),u.$$.dirty[1]&134217728&&ai(ze,mt=Vr,mt),u.$$.dirty[1]&134217728|u.$$.dirty[2]&8388608&&ai(je,wr=oe||Vr,wr),u.$$.dirty[2]&2097152&&ai(ot,si=H,si),u.$$.dirty[1]&8388608&&ai(st,$r=df(yi),$r),u.$$.dirty[1]&16777216&&ai(Re,ar=df(Or),ar),u.$$.dirty[1]&33554432&&ai($e,Qe=df(bi),Qe),u.$$.dirty[1]&67108864&&ai(He,zr=df(Gr),zr),u.$$.dirty[1]&268435456&&ai(et,Rt=xi,Rt),u.$$.dirty[1]&536870912&&ai(Mt,kr=wi,kr),u.$$.dirty[1]&1073741824&&ai(We,bt=Mr,bt),u.$$.dirty[2]&1&&ai(qt,wt=er,wt),u.$$.dirty[2]&2&&ai(pr,tr=Pr,tr),u.$$.dirty[2]&4&&ai(kt,yr=Yn,yr),u.$$.dirty[2]&8&&ai(ir,Ar=jn,Ar),u.$$.dirty[2]&16&&ai(Vt,tt=Vn,tt),u.$$.dirty[2]&32&&ai(Fr,ht=Jn,ht),u.$$.dirty[2]&64&&ai(Ft,Dt=vi,Dt),u.$$.dirty[2]&128&&ai(_r,At=Zi,At),u.$$.dirty[2]&256&&ai(hr,Ue=_n,Ue),u.$$.dirty[2]&512&&ai(Ht,Ce=to,Ce),u.$$.dirty[2]&1024&&ai(lr,we=An,we),u.$$.dirty[2]&2048&&ai(gi,De=is,De),u.$$.dirty[2]&4096&&ai(Pn,ie=bn,ie),u.$$.dirty[2]&131072&&ai(Ei,he=zn,he),u.$$.dirty[2]&262144&&ai(Si,U=Wr,U),u.$$.dirty[2]&524288&&ai(an,j=N,j),u.$$.dirty[2]&1048576&&ai(on,V=G,V),u.$$.dirty[2]&8192&&ai(br,F=Pi,F),u.$$.dirty[2]&16384&&ai(Gi,A=ei,A),u.$$.dirty[2]&32768&&ai(sn,P=nn,P),u.$$.dirty[2]&65536&&ai(Yr,a=Qn,a),u.$$.dirty[2]&16777216&&ai(Er,v=ve,v),u.$$.dirty[2]&33554432&&ai(ln,_=X,_),u.$$.dirty[2]&67108864&&J2("LayerCake",y)},f(88,y={activeGetters:ui,width:Ki,height:$n,percentRange:ne,aspectRatio:Fi,containerWidth:ke,containerHeight:qe,x:st,y:Re,z:$e,r:He,custom:Er,data:ze,xNice:pr,yNice:kt,zNice:ir,rNice:Vt,xReverse:Fr,yReverse:Ft,zReverse:_r,rReverse:hr,xPadding:Ht,yPadding:lr,zPadding:gi,rPadding:Pn,padding:Vi,flatData:je,extents:ti,xDomain:Jr,yDomain:ki,zDomain:ci,rDomain:ro,xRange:ua,yRange:Il,zRange:as,rRange:Co,config:ln,xScale:Pa,xGet:Qu,yScale:ns,yGet:Fn,zScale:Zn,zGet:Ca,rScale:Da,rGet:go}),[Zr,eo,Ut,Oi,Za,Ir,cr,ji,Bi,zi,li,ne,ke,qe,Ze,ze,je,ot,st,Re,$e,He,et,Mt,We,qt,pr,kt,ir,Vt,Fr,Ft,_r,hr,Ht,lr,gi,Pn,Ei,Si,an,on,br,Gi,sn,Yr,ln,Er,Ki,$n,Fi,Bt,rn,mi,yi,Or,bi,Gr,Vr,xi,wi,Mr,er,Pr,Yn,jn,Vn,Jn,vi,Zi,_n,to,An,is,bn,Pi,ei,nn,Qn,zn,Wr,N,G,H,$,oe,ve,X,y,rr,tn,Ci,un]}class V5 extends Hs{constructor(h){super(),Xs(this,h,O5,B5,Ws,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const F5=u=>({element:u&1}),h2=u=>({element:u[0]}),N5=u=>({element:u&1}),p2=u=>({element:u[0]});function U5(u){let h,f,y,_,v;const a=u[12].defs,P=Jm(a,u,u[11],p2),A=u[12].default,F=Jm(A,u,u[11],h2);return{c(){h=zo("svg"),f=zo("defs"),P&&P.c(),y=zo("g"),F&&F.c(),this.h()},l(V){h=Po(V,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var j=R(h);f=Po(j,"defs",{});var U=R(f);P&&P.l(U),U.forEach(T),y=Po(j,"g",{class:!0,transform:!0});var he=R(y);F&&F.l(he),he.forEach(T),j.forEach(T),this.h()},h(){S(y,"class","layercake-layout-svg_g"),S(y,"transform",_="translate("+u[7].left+", "+u[7].top+")"),S(h,"class","layercake-layout-svg svelte-u84d8d"),S(h,"viewBox",u[4]),S(h,"width",u[5]),S(h,"height",u[6]),re(h,"z-index",u[2],!1),re(h,"pointer-events",u[3]===!1?"none":null,!1)},m(V,j){Ae(V,h,j),w(h,f),P&&P.m(f,null),w(h,y),F&&F.m(y,null),u[13](y),u[14](h),v=!0},p(V,[j]){P&&P.p&&(!v||j&2049)&&Qm(P,a,V,V[11],v?ey(a,V[11],j,N5):$m(V[11]),p2),F&&F.p&&(!v||j&2049)&&Qm(F,A,V,V[11],v?ey(A,V[11],j,F5):$m(V[11]),h2),(!v||j&128&&_!==(_="translate("+V[7].left+", "+V[7].top+")"))&&S(y,"transform",_),(!v||j&16)&&S(h,"viewBox",V[4]),(!v||j&32)&&S(h,"width",V[5]),(!v||j&64)&&S(h,"height",V[6]),j&4&&re(h,"z-index",V[2],!1),j&8&&re(h,"pointer-events",V[3]===!1?"none":null,!1)},i(V){v||(it(P,V),it(F,V),v=!0)},o(V){pt(P,V),pt(F,V),v=!1},d(V){V&&T(h),P&&P.d(V),F&&F.d(V),u[13](null),u[14](null)}}}function q5(u,h,f){let y,_,v,{$$slots:a={},$$scope:P}=h,{element:A=void 0}=h,{innerElement:F=void 0}=h,{zIndex:V=void 0}=h,{pointerEvents:j=void 0}=h,{viewBox:U=void 0}=h;const{containerWidth:he,containerHeight:ie,padding:De}=Xy("LayerCake");ur(u,he,Ue=>f(5,y=Ue)),ur(u,ie,Ue=>f(6,_=Ue)),ur(u,De,Ue=>f(7,v=Ue));function we(Ue){Pp[Ue?"unshift":"push"](()=>{F=Ue,f(1,F)})}function Ce(Ue){Pp[Ue?"unshift":"push"](()=>{A=Ue,f(0,A)})}return u.$$set=Ue=>{"element"in Ue&&f(0,A=Ue.element),"innerElement"in Ue&&f(1,F=Ue.innerElement),"zIndex"in Ue&&f(2,V=Ue.zIndex),"pointerEvents"in Ue&&f(3,j=Ue.pointerEvents),"viewBox"in Ue&&f(4,U=Ue.viewBox),"$$scope"in Ue&&f(11,P=Ue.$$scope)},[A,F,V,j,U,y,_,v,he,ie,De,P,a,we,Ce]}class j5 extends Hs{constructor(h){super(),Xs(this,h,q5,U5,Ws,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function f2(u,h,f){const y=u.slice();return y[23]=h[f],y[25]=f,y}function d2(u){let h,f,y,_;return{c(){h=zo("rect"),this.h()},l(v){h=Po(v,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[13](u[12](u[23]))-1),S(h,"width",_=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height","3"),S(h,"fill","#CEDC20"),S(h,"stroke",u[0]),S(h,"stroke-width",u[1])},m(v,a){Ae(v,h,a)},p(v,a){a&3200&&f!==(f=v[11].bandwidth?v[7](v[23]):v[7](v[23])[0])&&S(h,"x",f),a&13312&&y!==(y=v[13](v[12](v[23]))-1)&&S(h,"y",y),a&3584&&_!==(_=v[11].bandwidth?v[11].bandwidth():v[9](v[23]))&&S(h,"width",_),a&1&&S(h,"stroke",v[0]),a&2&&S(h,"stroke-width",v[1])},d(v){v&&T(h)}}}function m2(u){let h,f,y,_,v,a,P,A,F=u[12]&&d2(u);return{c(){h=zo("rect"),F&&F.c(),a=zo("text"),this.h()},l(V){h=Po(V,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),F&&F.l(V),a=Po(V,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),R(a).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[6](u[23])),S(h,"width",_=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height",v=u[8](u[23])),S(h,"fill",u[4]),S(h,"stroke",u[0]),S(h,"stroke-width",u[1]),S(a,"x",P=u[11].bandwidth?u[7](u[23])+u[11].bandwidth()/2:u[7](u[23])[0]),S(a,"y",A=u[6](u[23])-4),S(a,"dx",u[2]),S(a,"dy",u[3]),S(a,"text-anchor",u[5])},m(V,j){Ae(V,h,j),F&&F.m(V,j),Ae(V,a,j)},p(V,j){j&3200&&f!==(f=V[11].bandwidth?V[7](V[23]):V[7](V[23])[0])&&S(h,"x",f),j&1088&&y!==(y=V[6](V[23]))&&S(h,"y",y),j&3584&&_!==(_=V[11].bandwidth?V[11].bandwidth():V[9](V[23]))&&S(h,"width",_),j&1280&&v!==(v=V[8](V[23]))&&S(h,"height",v),j&16&&S(h,"fill",V[4]),j&1&&S(h,"stroke",V[0]),j&2&&S(h,"stroke-width",V[1]),V[12]?F?F.p(V,j):(F=d2(V),F.c(),F.m(a.parentNode,a)):F&&(F.d(1),F=null),j&3200&&P!==(P=V[11].bandwidth?V[7](V[23])+V[11].bandwidth()/2:V[7](V[23])[0])&&S(a,"x",P),j&1088&&A!==(A=V[6](V[23])-4)&&S(a,"y",A),j&4&&S(a,"dx",V[2]),j&8&&S(a,"dy",V[3]),j&32&&S(a,"text-anchor",V[5])},d(V){V&&T(h),F&&F.d(V),V&&T(a)}}}function Z5(u){let h,f=u[10],y=[];for(let _=0;_<f.length;_+=1)y[_]=m2(f2(u,f,_));return{c(){h=zo("g");for(let _=0;_<y.length;_+=1)y[_].c();this.h()},l(_){h=Po(_,"g",{class:!0});var v=R(h);for(let a=0;a<y.length;a+=1)y[a].l(v);v.forEach(T),this.h()},h(){S(h,"class","column-group svelte-wgzwsk")},m(_,v){Ae(_,h,v);for(let a=0;a<y.length;a+=1)y[a].m(h,null)},p(_,[v]){if(v&16383){f=_[10];let a;for(a=0;a<f.length;a+=1){const P=f2(_,f,a);y[a]?y[a].p(P,v):(y[a]=m2(P),y[a].c(),y[a].m(h,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},i:Bn,o:Bn,d(_){_&&T(h),qc(y,_)}}}function G5(u,h,f){let y,_,v,a,P,A,F,V,j;const{data:U,xGet:he,yGet:ie,yRange:De,xScale:we,yScale:Ce,y:Ue,z:At}=Xy("LayerCake");ur(u,U,wt=>f(10,A=wt)),ur(u,he,wt=>f(7,P=wt)),ur(u,ie,wt=>f(6,v=wt)),ur(u,De,wt=>f(21,a=wt)),ur(u,we,wt=>f(11,F=wt)),ur(u,Ce,wt=>f(13,j=wt)),ur(u,At,wt=>f(12,V=wt));let{stroke:Dt=""}=h,{strokeWidth:ht=0}=h,{dxTick:tt=0}=h,{dyTick:Ar=0}=h,{fill:yr="#00205b"}=h,{textAnchor:tr="middle"}=h;return u.$$set=wt=>{"stroke"in wt&&f(0,Dt=wt.stroke),"strokeWidth"in wt&&f(1,ht=wt.strokeWidth),"dxTick"in wt&&f(2,tt=wt.dxTick),"dyTick"in wt&&f(3,Ar=wt.dyTick),"fill"in wt&&f(4,yr=wt.fill),"textAnchor"in wt&&f(5,tr=wt.textAnchor)},u.$$.update=()=>{u.$$.dirty&128&&f(9,y=wt=>{const bt=P(wt);return Math.max(0,bt[1]-bt[0])}),u.$$.dirty&2097216&&f(8,_=wt=>a[0]-v(wt))},[Dt,ht,tt,Ar,yr,tr,v,P,_,y,A,F,V,j,U,he,ie,De,we,Ce,At,a]}class K5 extends Hs{constructor(h){super(),Xs(this,h,G5,Z5,Ws,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function y2(u,h,f){const y=u.slice();return y[28]=h[f],y[30]=f,y}function v2(u){let h,f,y,_;return{c(){h=zo("line"),this.h()},l(v){h=Po(v,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),R(h).forEach(T),this.h()},h(){S(h,"y1",f=u[20]*-1),S(h,"y2",y=u[14]&&u[30]%2==0?u[10]+u[8]+2:u[10]+u[8]-13),S(h,"x1","0"),S(h,"x2","0"),S(h,"stroke",u[11]),S(h,"stroke-width",_=u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)?2:1),S(h,"class","svelte-fwjh80"),gn(h,"baseline",u[13])},m(v,a){Ae(v,h,a)},p(v,a){a&1048576&&f!==(f=v[20]*-1)&&S(h,"y1",f),a&17664&&y!==(y=v[14]&&v[30]%2==0?v[10]+v[8]+2:v[10]+v[8]-13)&&S(h,"y2",y),a&2048&&S(h,"stroke",v[11]),a&32784&&_!==(_=v[15]&&Array.isArray(v[4])&&v[30]==Math.floor(v[4].length/2)?2:1)&&S(h,"stroke-width",_),a&8192&&gn(h,"baseline",v[13])},d(v){v&&T(h)}}}function H5(u){let h=u[1](u[28])+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,_){Ae(y,f,_)},p(y,_){_&262146&&h!==(h=y[1](y[28])+"")&&dt(f,h)},d(y){y&&T(f)}}}function X5(u){let h,f=u[1](u[28])+"",y,_;return{c(){h=ee(u[5]),y=ee(f),_=ee(u[6])},l(v){h=te(v,u[5]),y=te(v,f),_=te(v,u[6])},m(v,a){Ae(v,h,a),Ae(v,y,a),Ae(v,_,a)},p(v,a){a&32&&dt(h,v[5]),a&262146&&f!==(f=v[1](v[28])+"")&&dt(y,f),a&64&&dt(_,v[6])},d(v){v&&T(h),v&&T(y),v&&T(_)}}}function g2(u){let h,f,y,_,v,a,P,A=u[0]!==!1&&v2(u);function F(U,he){return U[30]==U[18].length-1?X5:H5}let V=F(u),j=V(u);return{c(){h=zo("g"),A&&A.c(),f=zo("text"),j.c(),this.h()},l(U){h=Po(U,"g",{class:!0,transform:!0});var he=R(h);A&&A.l(he),f=Po(he,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var ie=R(f);j.l(ie),ie.forEach(T),he.forEach(T),this.h()},h(){S(f,"x",y=u[7]||u[16]?u[17].bandwidth()/2:0),S(f,"y",_=u[3]?u[20]*-1-6:u[14]&&u[30]%2==0?u[8]+15:u[8]),S(f,"dx",v=u[24](u[30])=="start"?u[9]-2:u[24](u[30])=="end"?u[9]+2:u[9]),S(f,"dy",u[10]),S(f,"text-anchor",u[24](u[30])),S(f,"fill",u[12]),S(f,"class","svelte-fwjh80"),gn(f,"bold",u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)),S(h,"class",a="tick tick-"+u[28]+" svelte-fwjh80"),S(h,"transform",P="translate("+u[17](u[28])+","+u[19][0]+")")},m(U,he){Ae(U,h,he),A&&A.m(h,null),w(h,f),j.m(f,null)},p(U,he){U[0]!==!1?A?A.p(U,he):(A=v2(U),A.c(),A.m(h,f)):A&&(A.d(1),A=null),V===(V=F(U))&&j?j.p(U,he):(j.d(1),j=V(U),j&&(j.c(),j.m(f,null))),he&196736&&y!==(y=U[7]||U[16]?U[17].bandwidth()/2:0)&&S(f,"x",y),he&1065224&&_!==(_=U[3]?U[20]*-1-6:U[14]&&U[30]%2==0?U[8]+15:U[8])&&S(f,"y",_),he&512&&v!==(v=U[24](U[30])=="start"?U[9]-2:U[24](U[30])=="end"?U[9]+2:U[9])&&S(f,"dx",v),he&1024&&S(f,"dy",U[10]),he&4096&&S(f,"fill",U[12]),he&32784&&gn(f,"bold",U[15]&&Array.isArray(U[4])&&U[30]==Math.floor(U[4].length/2)),he&262144&&a!==(a="tick tick-"+U[28]+" svelte-fwjh80")&&S(h,"class",a),he&917504&&P!==(P="translate("+U[17](U[28])+","+U[19][0]+")")&&S(h,"transform",P)},d(U){U&&T(h),A&&A.d(),j.d()}}}function _2(u){let h,f,y;return{c(){h=zo("line"),this.h()},l(_){h=Po(_,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","baseline svelte-fwjh80"),S(h,"y1",u[20]),S(h,"y2","0"),S(h,"x1",f=u[17](0)),S(h,"x2",y=u[17](0)),S(h,"stroke",u[11])},m(_,v){Ae(_,h,v)},p(_,v){v&1048576&&S(h,"y1",_[20]),v&131072&&f!==(f=_[17](0))&&S(h,"x1",f),v&131072&&y!==(y=_[17](0))&&S(h,"x2",y),v&2048&&S(h,"stroke",_[11])},d(_){_&&T(h)}}}function W5(u){let h,f,y=u[18],_=[];for(let a=0;a<y.length;a+=1)_[a]=g2(y2(u,y,a));let v=u[2]===!0&&_2(u);return{c(){h=zo("g");for(let a=0;a<_.length;a+=1)_[a].c();f=_a(),v&&v.c(),this.h()},l(a){h=Po(a,"g",{class:!0});var P=R(h);for(let A=0;A<_.length;A+=1)_[A].l(P);f=_a(),v&&v.l(P),P.forEach(T),this.h()},h(){S(h,"class","axis x-axis")},m(a,P){Ae(a,h,P);for(let A=0;A<_.length;A+=1)_[A].m(h,null);w(h,f),v&&v.m(h,null)},p(a,[P]){if(P&18874363){y=a[18];let A;for(A=0;A<y.length;A+=1){const F=y2(a,y,A);_[A]?_[A].p(F,P):(_[A]=g2(F),_[A].c(),_[A].m(h,f))}for(;A<_.length;A+=1)_[A].d(1);_.length=y.length}a[2]===!0?v?v.p(a,P):(v=_2(a),v.c(),v.m(h,null)):v&&(v.d(1),v=null)},i:Bn,o:Bn,d(a){a&&T(h),qc(_,a),v&&v.d()}}}function Y5(u,h,f){let y,_,v,a,P;const{width:A,height:F,xScale:V,yScale:j,yRange:U}=Xy("LayerCake");ur(u,F,Qe=>f(20,P=Qe)),ur(u,V,Qe=>f(17,v=Qe)),ur(u,U,Qe=>f(19,a=Qe));let{gridlines:he=!0}=h,{formatTick:ie=Qe=>Qe}=h,{baseline:De=!1}=h,{flipped:we=!1}=h,{snapTicks:Ce=!1}=h,{ticks:Ue=void 0}=h,{prefix:At=""}=h,{suffix:Dt=""}=h,{xTick:ht=void 0}=h,{yTick:tt=15}=h,{dxTick:Ar=0}=h,{dyTick:yr=0}=h,{lineColor:tr="#999"}=h,{textColor:wt="#555"}=h,{solid:bt=!1}=h,{stagger:kr=!1}=h,{median:Rt=!0}=h;function zr(Qe){if(Ce===!0){if(Qe===0)return"start";if(Qe===_.length-1)return"end"}return"middle"}return u.$$set=Qe=>{"gridlines"in Qe&&f(0,he=Qe.gridlines),"formatTick"in Qe&&f(1,ie=Qe.formatTick),"baseline"in Qe&&f(2,De=Qe.baseline),"flipped"in Qe&&f(3,we=Qe.flipped),"snapTicks"in Qe&&f(25,Ce=Qe.snapTicks),"ticks"in Qe&&f(4,Ue=Qe.ticks),"prefix"in Qe&&f(5,At=Qe.prefix),"suffix"in Qe&&f(6,Dt=Qe.suffix),"xTick"in Qe&&f(7,ht=Qe.xTick),"yTick"in Qe&&f(8,tt=Qe.yTick),"dxTick"in Qe&&f(9,Ar=Qe.dxTick),"dyTick"in Qe&&f(10,yr=Qe.dyTick),"lineColor"in Qe&&f(11,tr=Qe.lineColor),"textColor"in Qe&&f(12,wt=Qe.textColor),"solid"in Qe&&f(13,bt=Qe.solid),"stagger"in Qe&&f(14,kr=Qe.stagger),"median"in Qe&&f(15,Rt=Qe.median)},u.$$.update=()=>{u.$$.dirty&131072&&f(16,y=typeof v.bandwidth=="function"),u.$$.dirty&196624&&f(18,_=Array.isArray(Ue)?Ue:y?v.domain():v.ticks(Ue))},[he,ie,De,we,Ue,At,Dt,ht,tt,Ar,yr,tr,wt,bt,kr,Rt,y,v,_,a,P,F,V,U,zr,Ce]}class J5 extends Hs{constructor(h){super(),Xs(this,h,Y5,W5,Ws,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function Q5(u){let h,f,y,_;return h=new K5({props:{fill:u[1],formatVal:u[5]}}),y=new J5({props:{gridlines:!1}}),{c(){Yt(h.$$.fragment),f=_e(),Yt(y.$$.fragment)},l(v){Jt(h.$$.fragment,v),f=be(v),Jt(y.$$.fragment,v)},m(v,a){Qt(h,v,a),Ae(v,f,a),Qt(y,v,a),_=!0},p(v,a){const P={};a&2&&(P.fill=v[1]),a&32&&(P.formatVal=v[5]),h.$set(P)},i(v){_||(it(h.$$.fragment,v),it(y.$$.fragment,v),_=!0)},o(v){pt(h.$$.fragment,v),pt(y.$$.fragment,v),_=!1},d(v){$t(h,v),v&&T(f),$t(y,v)}}}function $5(u){let h,f;return h=new j5({props:{$$slots:{default:[Q5]},$$scope:{ctx:u}}}),{c(){Yt(h.$$.fragment)},l(y){Jt(h.$$.fragment,y)},m(y,_){Qt(h,y,_),f=!0},p(y,_){const v={};_&2082&&(v.$$scope={dirty:_,ctx:y}),h.$set(v)},i(y){f||(it(h.$$.fragment,y),f=!0)},o(y){pt(h.$$.fragment,y),f=!1},d(y){$t(h,y)}}}function ek(u){let h,f,y;return f=new V5({props:{padding:{top:15,right:0,bottom:20,left:0},x:u[2],y:u[3],z:u[4],xScale:lw().paddingInner([.02]).round(!0),xDomain:u[7],yDomain:u[6],zDomain:u[6],data:u[0],$$slots:{default:[$5]},$$scope:{ctx:u}}}),{c(){h=D("div"),Yt(f.$$.fragment),this.h()},l(_){h=M(_,"DIV",{class:!0});var v=R(h);Jt(f.$$.fragment,v),v.forEach(T),this.h()},h(){S(h,"class","chart-container svelte-1i1qsul")},m(_,v){Ae(_,h,v),Qt(f,h,null),y=!0},p(_,[v]){const a={};v&4&&(a.x=_[2]),v&8&&(a.y=_[3]),v&16&&(a.z=_[4]),v&128&&(a.xDomain=_[7]),v&64&&(a.yDomain=_[6]),v&64&&(a.zDomain=_[6]),v&1&&(a.data=_[0]),v&2082&&(a.$$scope={dirty:v,ctx:_}),f.$set(a)},i(_){y||(it(f.$$.fragment,_),y=!0)},o(_){pt(f.$$.fragment,_),y=!1},d(_){_&&T(h),$t(f)}}}function tk(u,h,f){let y,_,v,{data:a}=h,{suffix:P="%"}=h,{decimals:A=null}=h,{fill:F="#00205B"}=h,{xKey:V="x"}=h,{yKey:j="y"}=h,{zKey:U=null}=h,{colors:he=["#00205B","#00205B","#00205B","#00205B"]}=h;return u.$$set=ie=>{"data"in ie&&f(0,a=ie.data),"suffix"in ie&&f(8,P=ie.suffix),"decimals"in ie&&f(9,A=ie.decimals),"fill"in ie&&f(1,F=ie.fill),"xKey"in ie&&f(2,V=ie.xKey),"yKey"in ie&&f(3,j=ie.yKey),"zKey"in ie&&f(4,U=ie.zKey),"colors"in ie&&f(10,he=ie.colors)},u.$$.update=()=>{u.$$.dirty&5&&f(7,y=a.map(ie=>ie[V])),u.$$.dirty&9&&f(6,_=[0,Math.max(...a.map(ie=>ie[j]))]),u.$$.dirty&768&&f(5,v=ie=>ie.toFixed(A)+P)},[a,F,V,j,U,v,_,y,P,A,he]}class rk extends Hs{constructor(h){super(),Xs(this,h,tk,ek,Ws,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function b2(u,h,f){const y=u.slice();return y[12]=h[f],y[14]=f,y}function ik(u){let h,f,y=u[4](u[12][u[3]])+"",_,v;return{c(){h=D("span"),f=ee("(NI "),_=ee(y),v=ee(")"),this.h()},l(a){h=M(a,"SPAN",{class:!0,style:!0});var P=R(h);f=te(P,"(NI "),_=te(P,y),v=te(P,")"),P.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(a,P){Ae(a,h,P),w(h,f),w(h,_),w(h,v)},p(a,P){P&9&&y!==(y=a[4](a[12][a[3]])+"")&&dt(_,y)},d(a){a&&T(h)}}}function nk(u){let h,f,y=Vv(Math.round(u[12][u[3]]),"%)")+"",_;return{c(){h=D("span"),f=ee("(2011 "),_=ee(y),this.h()},l(v){h=M(v,"SPAN",{class:!0,style:!0});var a=R(h);f=te(a,"(2011 "),_=te(a,y),a.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(v,a){Ae(v,h,a),w(h,f),w(h,_)},p(v,a){a&9&&y!==(y=Vv(Math.round(v[12][v[3]]),"%)")+"")&&dt(_,y)},d(v){v&&T(h)}}}function x2(u){let h,f,y,_,v=u[12][u[1]]+"",a,P,A,F=u[4](u[12][u[2]])+"",V,j,U;function he(we,Ce){if(we[3]=="prev")return nk;if(we[3])return ik}let ie=he(u),De=ie&&ie(u);return{c(){h=D("tr"),f=D("td"),y=zo("svg"),_=_e(),a=ee(v),P=_e(),A=D("td"),V=ee(F),j=_e(),De&&De.c(),U=_e(),this.h()},l(we){h=M(we,"TR",{});var Ce=R(h);f=M(Ce,"TD",{class:!0});var Ue=R(f);y=Po(Ue,"svg",{width:!0,height:!0,class:!0});var At=R(y);At.forEach(T),_=be(Ue),a=te(Ue,v),Ue.forEach(T),P=be(Ce),A=M(Ce,"TD",{class:!0,style:!0});var Dt=R(A);V=te(Dt,F),j=be(Dt),De&&De.l(Dt),Dt.forEach(T),U=be(Ce),Ce.forEach(T),this.h()},h(){S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1mqxdxj"),S(f,"class","svelte-1mqxdxj"),S(A,"class","cell-right svelte-1mqxdxj"),re(A,"vertical-align","top")},m(we,Ce){Ae(we,h,Ce),w(h,f),w(f,y),w(f,_),w(f,a),w(h,P),w(h,A),w(A,V),w(A,j),De&&De.m(A,null),w(h,U)},p(we,Ce){Ce&3&&v!==(v=we[12][we[1]]+"")&&dt(a,v),Ce&5&&F!==(F=we[4](we[12][we[2]])+"")&&dt(V,F),ie===(ie=he(we))&&De?De.p(we,Ce):(De&&De.d(1),De=ie&&ie(we),De&&(De.c(),De.m(A,null)))},d(we){we&&T(h),De&&De.d()}}}function ak(u){let h,f,y=u[0],_=[];for(let v=0;v<y.length;v+=1)_[v]=x2(b2(u,y,v));return{c(){h=D("table"),f=D("tbody");for(let v=0;v<_.length;v+=1)_[v].c();this.h()},l(v){h=M(v,"TABLE",{class:!0});var a=R(h);f=M(a,"TBODY",{});var P=R(f);for(let A=0;A<_.length;A+=1)_[A].l(P);P.forEach(T),a.forEach(T),this.h()},h(){S(h,"class","legend svelte-1mqxdxj")},m(v,a){Ae(v,h,a),w(h,f);for(let P=0;P<_.length;P+=1)_[P].m(f,null)},p(v,[a]){if(a&31){y=v[0];let P;for(P=0;P<y.length;P+=1){const A=b2(v,y,P);_[P]?_[P].p(A,a):(_[P]=x2(A),_[P].c(),_[P].m(f,null))}for(;P<_.length;P+=1)_[P].d(1);_.length=y.length}},i:Bn,o:Bn,d(v){v&&T(h),qc(_,v)}}}function ok(u,h,f){let y,{data:_}=h,{xKey:v="x"}=h,{yKey:a="y"}=h,{zKey:P="ni"}=h,{colors:A=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:F="#555"}=h,{mutedColor:V="#999"}=h,{decimals:j=null}=h,{round:U=!1}=h;function he(ie){let De;return j?De=(ie/y*100).toFixed(j)+"%":ie/y*100<1?De="<1%":De=(ie/y*100).toFixed(0)+"%",De}return u.$$set=ie=>{"data"in ie&&f(0,_=ie.data),"xKey"in ie&&f(1,v=ie.xKey),"yKey"in ie&&f(2,a=ie.yKey),"zKey"in ie&&f(3,P=ie.zKey),"colors"in ie&&f(5,A=ie.colors),"textColor"in ie&&f(6,F=ie.textColor),"mutedColor"in ie&&f(7,V=ie.mutedColor),"decimals"in ie&&f(8,j=ie.decimals),"round"in ie&&f(9,U=ie.round)},u.$$.update=()=>{u.$$.dirty&5&&(y=_.map(ie=>ie[a]).reduce((ie,De)=>ie+De,0)),u.$$.dirty&9&&_.map(ie=>ie[P]).reduce((ie,De)=>ie+De,0)},[_,v,a,P,he,A,F,V,j,U]}class sk extends Hs{constructor(h){super(),Xs(this,h,ok,ak,Ws,{data:0,xKey:1,yKey:2,zKey:3,colors:5,textColor:6,mutedColor:7,decimals:8,round:9})}}function w2(u,h,f){const y=u.slice();return y[6]=h[f],y[8]=f,y}function E2(u){let h,f=u[0],y=[];for(let _=0;_<f.length;_+=1)y[_]=S2(w2(u,f,_));return{c(){h=zo("svg");for(let _=0;_<y.length;_+=1)y[_].c();this.h()},l(_){h=Po(_,"svg",{class:!0});var v=R(h);for(let a=0;a<y.length;a+=1)y[a].l(v);v.forEach(T),this.h()},h(){S(h,"class","stack svelte-pzvhwz")},m(_,v){Ae(_,h,v);for(let a=0;a<y.length;a+=1)y[a].m(h,null)},p(_,v){if(v&31){f=_[0];let a;for(a=0;a<f.length;a+=1){const P=w2(_,f,a);y[a]?y[a].p(P,v):(y[a]=S2(P),y[a].c(),y[a].m(h,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=f.length}},d(_){_&&T(h),qc(y,_)}}}function S2(u){let h,f;return{c(){h=zo("rect"),this.h()},l(y){h=Po(y,"rect",{class:!0,x:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","cell svelte-pzvhwz"),S(h,"x",f=u[4][u[8]]/u[3]*100+"%"),re(h,"width",u[6][u[1]]/u[3]*100+"%"),re(h,"fill",u[2][u[8]])},m(y,_){Ae(y,h,_)},p(y,_){_&24&&f!==(f=y[4][y[8]]/y[3]*100+"%")&&S(h,"x",f),_&11&&re(h,"width",y[6][y[1]]/y[3]*100+"%"),_&4&&re(h,"fill",y[2][y[8]])},d(y){y&&T(h)}}}function lk(u){let h,f=u[3]&&u[4]&&E2(u);return{c(){f&&f.c(),h=_a()},l(y){f&&f.l(y),h=_a()},m(y,_){f&&f.m(y,_),Ae(y,h,_)},p(y,[_]){y[3]&&y[4]?f?f.p(y,_):(f=E2(y),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:Bn,o:Bn,d(y){f&&f.d(y),y&&T(h)}}}function uk(u,h,f){let{data:y}=h,{yKey:_="y"}=h,{colors:v=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,a,P;function A(){f(3,a=y.map(V=>V[_]).reduce((V,j)=>V+j,0));let F=[0];y.forEach(V=>F.push(F[F.length-1]+V[_])),f(4,P=F)}return u.$$set=F=>{"data"in F&&f(0,y=F.data),"yKey"in F&&f(1,_=F.yKey),"colors"in F&&f(2,v=F.colors)},u.$$.update=()=>{u.$$.dirty&3&&(y||_)&&A()},[y,_,v,a,P]}class t0 extends Hs{constructor(h){super(),Xs(this,h,uk,lk,Ws,{data:0,yKey:1,colors:2})}}function k2(u,h,f){const y=u.slice();return y[10]=h[f],y[12]=f,y}function ck(u){let h,f,y=u[6](u[10][u[3]])+"",_,v;return{c(){h=D("span"),f=ee("(NI "),_=ee(y),v=ee(")"),this.h()},l(a){h=M(a,"SPAN",{class:!0,style:!0});var P=R(h);f=te(P,"(NI "),_=te(P,y),v=te(P,")"),P.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(a,P){Ae(a,h,P),w(h,f),w(h,_),w(h,v)},p(a,P){P&9&&y!==(y=a[6](a[10][a[3]])+"")&&dt(_,y)},d(a){a&&T(h)}}}function hk(u){let h;return{c(){h=D("span"),this.h()},l(f){h=M(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(f,y){Ae(f,h,y)},p:Bn,d(f){f&&T(h)}}}function pk(u){let h,f,y=Vv(Math.round(u[10][u[3]]),"%)")+"",_;return{c(){h=D("span"),f=ee("(2011 "),_=ee(y),this.h()},l(v){h=M(v,"SPAN",{class:!0,style:!0});var a=R(h);f=te(a,"(2011 "),_=te(a,y),a.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(v,a){Ae(v,h,a),w(h,f),w(h,_)},p(v,a){a&9&&y!==(y=Vv(Math.round(v[10][v[3]]),"%)")+"")&&dt(_,y)},d(v){v&&T(h)}}}function I2(u){let h,f,y,_,v,a=u[10][u[1]]+"",P,A,F,V=u[6](u[10][u[2]])+"",j,U,he;function ie(Ce,Ue){if(Ce[3]=="prev"&&Ce[4])return pk;if(Ce[3]=="prev"&&!Ce[4])return hk;if(Ce[3])return ck}let De=ie(u),we=De&&De(u);return{c(){h=D("tr"),f=D("td"),y=zo("svg"),_=zo("rect"),v=_e(),P=ee(a),A=_e(),F=D("td"),j=ee(V),U=_e(),we&&we.c(),he=_e(),this.h()},l(Ce){h=M(Ce,"TR",{});var Ue=R(h);f=M(Ue,"TD",{class:!0});var At=R(f);y=Po(At,"svg",{width:!0,height:!0,class:!0});var Dt=R(y);_=Po(Dt,"rect",{width:!0,height:!0,style:!0}),R(_).forEach(T),Dt.forEach(T),v=be(At),P=te(At,a),At.forEach(T),A=be(Ue),F=M(Ue,"TD",{class:!0,style:!0});var ht=R(F);j=te(ht,V),U=be(ht),we&&we.l(ht),ht.forEach(T),he=be(Ue),Ue.forEach(T),this.h()},h(){S(_,"width","20"),S(_,"height","30"),re(_,"fill",u[5][u[12]]),S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1gvovsq"),S(f,"class","svelte-1gvovsq"),S(F,"class","cell-right svelte-1gvovsq"),re(F,"vertical-align","top")},m(Ce,Ue){Ae(Ce,h,Ue),w(h,f),w(f,y),w(y,_),w(f,v),w(f,P),w(h,A),w(h,F),w(F,j),w(F,U),we&&we.m(F,null),w(h,he)},p(Ce,Ue){Ue&32&&re(_,"fill",Ce[5][Ce[12]]),Ue&3&&a!==(a=Ce[10][Ce[1]]+"")&&dt(P,a),Ue&5&&V!==(V=Ce[6](Ce[10][Ce[2]])+"")&&dt(j,V),De===(De=ie(Ce))&&we?we.p(Ce,Ue):(we&&we.d(1),we=De&&De(Ce),we&&(we.c(),we.m(F,null)))},d(Ce){Ce&&T(h),we&&we.d()}}}function fk(u){let h,f,y=u[0],_=[];for(let v=0;v<y.length;v+=1)_[v]=I2(k2(u,y,v));return{c(){h=D("table"),f=D("tbody");for(let v=0;v<_.length;v+=1)_[v].c();this.h()},l(v){h=M(v,"TABLE",{class:!0});var a=R(h);f=M(a,"TBODY",{});var P=R(f);for(let A=0;A<_.length;A+=1)_[A].l(P);P.forEach(T),a.forEach(T),this.h()},h(){S(h,"class","legend svelte-1gvovsq")},m(v,a){Ae(v,h,a),w(h,f);for(let P=0;P<_.length;P+=1)_[P].m(f,null)},p(v,[a]){if(a&127){y=v[0];let P;for(P=0;P<y.length;P+=1){const A=k2(v,y,P);_[P]?_[P].p(A,a):(_[P]=I2(A),_[P].c(),_[P].m(f,null))}for(;P<_.length;P+=1)_[P].d(1);_.length=y.length}},i:Bn,o:Bn,d(v){v&&T(h),qc(_,v)}}}function dk(u,h,f){let y,{data:_}=h,{xKey:v="x"}=h,{yKey:a="y"}=h,{zKey:P="ni"}=h,{topic_prev_available:A=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:V=null}=h;function j(U){let he;return V?he=(U/y*100).toFixed(V)+"%":U/y*100<1?he="<1%":he=(U/y*100).toFixed(0)+"%",he}return u.$$set=U=>{"data"in U&&f(0,_=U.data),"xKey"in U&&f(1,v=U.xKey),"yKey"in U&&f(2,a=U.yKey),"zKey"in U&&f(3,P=U.zKey),"topic_prev_available"in U&&f(4,A=U.topic_prev_available),"colors"in U&&f(5,F=U.colors),"decimals"in U&&f(7,V=U.decimals)},u.$$.update=()=>{u.$$.dirty&5&&(y=_.map(U=>U[a]).reduce((U,he)=>U+he,0)),u.$$.dirty&9&&_.map(U=>U[P]).reduce((U,he)=>U+he,0)},[_,v,a,P,A,F,j,V]}class mk extends Hs{constructor(h){super(),Xs(this,h,dk,fk,Ws,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function T2(u){let h,f,y,_;f=new t0({props:{data:u[0],yKey:u[4],colors:u[6]}});let v=u[8]&&A2(u);return{c(){h=D("div"),Yt(f.$$.fragment),y=_e(),v&&v.c(),this.h()},l(a){h=M(a,"DIV",{class:!0,style:!0});var P=R(h);Jt(f.$$.fragment,P),y=be(P),v&&v.l(P),P.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),re(h,"height",u[1]*.28+"px")},m(a,P){Ae(a,h,P),Qt(f,h,null),w(h,y),v&&v.m(h,null),_=!0},p(a,P){const A={};P&1&&(A.data=a[0]),P&16&&(A.yKey=a[4]),P&64&&(A.colors=a[6]),f.$set(A),a[8]?v?v.p(a,P):(v=A2(a),v.c(),v.m(h,null)):v&&(v.d(1),v=null),(!_||P&2)&&re(h,"height",a[1]*.28+"px")},i(a){_||(it(f.$$.fragment,a),_=!0)},o(a){pt(f.$$.fragment,a),_=!1},d(a){a&&T(h),$t(f),v&&v.d()}}}function A2(u){let h,f;return{c(){h=D("div"),f=ee(u[8]),this.h()},l(y){h=M(y,"DIV",{class:!0});var _=R(h);f=te(_,u[8]),_.forEach(T),this.h()},h(){S(h,"class","label svelte-1tebgpk")},m(y,_){Ae(y,h,_),w(h,f)},p(y,_){_&256&&dt(f,y[8])},d(y){y&&T(h)}}}function z2(u){let h,f,y,_,v,a;return f=new t0({props:{data:u[0],yKey:u[4],colors:u[6]}}),{c(){h=D("div"),Yt(f.$$.fragment),y=_e(),_=D("div"),v=ee("2011 comparison not available"),this.h()},l(P){h=M(P,"DIV",{class:!0,style:!0});var A=R(h);Jt(f.$$.fragment,A),y=be(A),_=M(A,"DIV",{class:!0,style:!0});var F=R(_);v=te(F,"2011 comparison not available"),F.forEach(T),A.forEach(T),this.h()},h(){S(_,"class","label svelte-1tebgpk"),re(_,"background-color","#d8d8d8 "),re(_,"color","#000000"),S(h,"class","chart svelte-1tebgpk"),re(h,"height",u[1]*.28+"px")},m(P,A){Ae(P,h,A),Qt(f,h,null),w(h,y),w(h,_),w(_,v),a=!0},p(P,A){const F={};A&1&&(F.data=P[0]),A&16&&(F.yKey=P[4]),A&64&&(F.colors=P[6]),f.$set(F),(!a||A&2)&&re(h,"height",P[1]*.28+"px")},i(P){a||(it(f.$$.fragment,P),a=!0)},o(P){pt(f.$$.fragment,P),a=!1},d(P){P&&T(h),$t(f)}}}function yk(u){let h,f,y,_,v,a,P,A;f=new t0({props:{data:u[0],yKey:u[3],colors:u[6]}});let F=(u[4]&&u[5]||u[4]=="ni")&&T2(u),V=u[4]=="prev"&&!u[5]&&z2(u);return P=new mk({props:{data:u[0],xKey:u[2],yKey:u[3],zKey:u[4],topic_prev_available:u[5],decimals:u[7],colors:u[6]}}),{c(){h=D("div"),Yt(f.$$.fragment),y=_e(),F&&F.c(),_=_e(),V&&V.c(),v=_e(),a=D("div"),Yt(P.$$.fragment),this.h()},l(j){h=M(j,"DIV",{class:!0,style:!0});var U=R(h);Jt(f.$$.fragment,U),U.forEach(T),y=be(j),F&&F.l(j),_=be(j),V&&V.l(j),v=be(j),a=M(j,"DIV",{class:!0});var he=R(a);Jt(P.$$.fragment,he),he.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),re(h,"padding-top","3px"),re(h,"height",(u[4]?u[1]*.72:u[1])+"px"),S(a,"class","legend svelte-1tebgpk")},m(j,U){Ae(j,h,U),Qt(f,h,null),Ae(j,y,U),F&&F.m(j,U),Ae(j,_,U),V&&V.m(j,U),Ae(j,v,U),Ae(j,a,U),Qt(P,a,null),A=!0},p(j,[U]){const he={};U&1&&(he.data=j[0]),U&8&&(he.yKey=j[3]),U&64&&(he.colors=j[6]),f.$set(he),(!A||U&18)&&re(h,"height",(j[4]?j[1]*.72:j[1])+"px"),j[4]&&j[5]||j[4]=="ni"?F?(F.p(j,U),U&48&&it(F,1)):(F=T2(j),F.c(),it(F,1),F.m(_.parentNode,_)):F&&(xu(),pt(F,1,1,()=>{F=null}),wu()),j[4]=="prev"&&!j[5]?V?(V.p(j,U),U&48&&it(V,1)):(V=z2(j),V.c(),it(V,1),V.m(v.parentNode,v)):V&&(xu(),pt(V,1,1,()=>{V=null}),wu());const ie={};U&1&&(ie.data=j[0]),U&4&&(ie.xKey=j[2]),U&8&&(ie.yKey=j[3]),U&16&&(ie.zKey=j[4]),U&32&&(ie.topic_prev_available=j[5]),U&128&&(ie.decimals=j[7]),U&64&&(ie.colors=j[6]),P.$set(ie)},i(j){A||(it(f.$$.fragment,j),it(F),it(V),it(P.$$.fragment,j),A=!0)},o(j){pt(f.$$.fragment,j),pt(F),pt(V),pt(P.$$.fragment,j),A=!1},d(j){j&&T(h),$t(f),j&&T(y),F&&F.d(j),j&&T(_),V&&V.d(j),j&&T(v),j&&T(a),$t(P)}}}function vk(u,h,f){let{data:y}=h,{height:_=80}=h,{xKey:v="x"}=h,{yKey:a="y"}=h,{zKey:P="ni"}=h,{topic_prev_available:A=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","#00695c"]}=h,{decimals:V=null}=h,{label:j=null}=h;return u.$$set=U=>{"data"in U&&f(0,y=U.data),"height"in U&&f(1,_=U.height),"xKey"in U&&f(2,v=U.xKey),"yKey"in U&&f(3,a=U.yKey),"zKey"in U&&f(4,P=U.zKey),"topic_prev_available"in U&&f(5,A=U.topic_prev_available),"colors"in U&&f(6,F=U.colors),"decimals"in U&&f(7,V=U.decimals),"label"in U&&f(8,j=U.label)},[y,_,v,a,P,A,F,V,j]}class di extends Hs{constructor(h){super(),Xs(this,h,vk,yk,Ws,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function gk(u){let h,f,y,_;return{c(){h=D("div"),f=ee("Back to top"),this.h()},l(v){h=M(v,"DIV",{class:!0});var a=R(h);f=te(a,"Back to top"),a.forEach(T),this.h()},h(){S(h,"class","back_to_start svelte-11zibd5"),gn(h,"hidden",u[0])},m(v,a){Ae(v,h,a),w(h,f),y||(_=[On(window,"scroll",u[2]),On(h,"click",u[1])],y=!0)},p(v,[a]){a&1&&gn(h,"hidden",v[0])},i:Bn,o:Bn,d(v){v&&T(h),y=!1,Uc(_)}}}function _k(u,h,f){let{buttonVisibleOnPX:y=200}=h,_=!0;const v=()=>{document.body.scrollIntoView()},a=()=>document.documentElement||document.body,P=()=>{a().scrollTop>y?f(0,_=!1):f(0,_=!0)};return u.$$set=A=>{"buttonVisibleOnPX"in A&&f(3,y=A.buttonVisibleOnPX)},[_,v,P,y]}class bk extends Hs{constructor(h){super(),Xs(this,h,_k,gk,Ws,{buttonVisibleOnPX:3})}}function P2(u,h,f){const y=u.slice();return y[52]=h[f],y[54]=f,y}function C2(u,h,f){const y=u.slice();return y[55]=h[f],y[54]=f,y}function D2(u,h,f){const y=u.slice();return y[57]=h[f],y}function M2(u,h,f){const y=u.slice();return y[55]=h[f],y[54]=f,y}function L2(u){let h,f,y,_,v,a,P=" &gt; ",A,F,V,j,U,he=u[1].name+"",ie,De,we,Ce,Ue,At,Dt,ht,tt,Ar,yr,tr,wt,bt,kr,Rt,zr,Qe,ar,$r,si,wr,mt,nt,cr,ji,la,Bi,zi,li,tn,rr,Oi,Za,Ir,Bt,rn,mi,Zr,eo=" &#x24D8; ",Ut,yi,Or,bi,Gr,Vr,xi,wi,Mr,er=u[1].data.population.value[2021].all.toLocaleString()+"",Pr,Yn,jn,Vn,Jn,vi,Zi,_n,to,An,is=" &#x24D8; ",bn,Pi,ei,nn,Qn,zn,Wr,N,G,H=u[1].data.households.value[2021].all_households.toLocaleString()+"",$,oe,ve,ge,X,ne,ke,qe,Ze,ze,je,ot,st,Re,$e,He,et,Mt,We,qt,pr,kt,ir,Vt,Fr,Ft,_r,hr,Ht=u[1].name+"",lr,gi,Pn,Ei,Si,an,on,br,Gi,sn,Yr,ln=" &#x24D8; ",Er,ui,Vi,Ys,Ki,$n,ti,Jr,ki,ci,ro,Pa,Qu=" &#x24D8; ",ns,Fn,Zn,Ca,Da,go,ua=(u[1].hectares>=.1?u[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",Il,as,Co,Fi,Ci,un,Se,Hi,Nn=" &#x24D8; ",Cr,ca,Ii,Nr,Ma,ys,os=(u[1].data.population.value[2021].all/u[1].hectares>=.1?(u[1].data.population.value[2021].all/u[1].hectares).toFixed(1):"<0.1")+"",jc,Wl,vs,ss,La,ea,ba;function Zc(Fe,It){return Fe[1].parents[0]?wk:xk}let gs=Zc(u),Cn=gs(u);function $u(Fe,It){return Fe[1].type=="ni"?Sk:Ek}let hi=$u(u),cn=hi(u),ri=u[1].type!="ni"&&B2(u);function ls(Fe,It){return Fe[10]?Ik:kk}let Ra=ls(u),xa=Ra(u);wt=new cS({props:{search_data:u[0],group:"typestr",search:!0}}),wt.$on("select",u[16]);function us(Fe,It){return Fe[1].type=="ni"||Fe[1].type=="ctry"?Ak:Tk}let Ba=us(u),xn=Ba(u),Xi=u[10]&&O2(u),Di=u[1].type!="ni"&&V2(u),Wi=u[10]&&u[4]&&U2(u),Xt=u[1].type!="ni"&u[11]&&q2(u),Dn=u[10]&&u[4]&&j2(u);function Do(Fe,It){return Fe[1].type!="ni"?Gk:Zk}let Eu=Do(u),io=Eu(u);function Js(Fe){u[32](Fe)}let Qs={location:{bounds:u[1].bounds},options:{fitBoundsOptions:{padding:20}},style:pE,$$slots:{default:[Hk]},$$scope:{ctx:u}};u[7]!==void 0&&(Qs.map=u[7]),je=new dS({props:Qs}),Pp.push(()=>uE(je,"map",Js));function ha(Fe,It){return Fe[1].parents[0]?Wk:Xk}let Oa=ha(u),ta=Oa(u);function ec(Fe,It){return Fe[1].children[0]?Jk:Yk}let Mo=ec(u),wn=Mo(u);function _s(Fe,It){return Fe[1].type!="ni"&Fe[1].type!="lgd"?eI:Fe[1].type!="ni"&Fe[1].type=="lgd"?$k:Qk}let $s=_s(u),Gn=$s(u),hn=u[1].type!="ni"&&u[11]&&H2(u);const Tl=[rI,tI],no=[];function Qr(Fe,It){return Fe[10]?0:1}return La=Qr(u),ea=no[La]=Tl[La](u),{c(){h=D("div"),f=D("div"),y=D("span"),_=D("a"),v=ee("Home"),a=new Z_(!1),A=_e(),Cn.c(),F=_e(),V=D("br"),j=_e(),U=D("span"),ie=ee(he),De=_e(),we=D("div"),Ce=ee(`Click for: \r
		\r
					`),cn.c(),Ue=_e(),ri&&ri.c(),At=_e(),xa.c(),Dt=_e(),ht=D("div"),tt=D("div"),Ar=D("b"),yr=ee("Search for your area:"),tr=_e(),Yt(wt.$$.fragment),bt=_e(),kr=D("script"),Rt=ee(`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),zr=_e(),Qe=D("div"),ar=D("button"),$r=ee("Print / PDF"),si=_e(),wr=D("button"),mt=ee("Menu"),nt=_e(),cr=D("button"),ji=ee("Share"),la=_e(),Bi=D("div"),zi=D("div"),li=D("h3"),tn=ee("Overview"),rr=_e(),xn.c(),Oi=_e(),Xi&&Xi.c(),Za=_e(),Ir=D("div"),Bt=D("div"),rn=D("div"),mi=ee("Population "),Zr=D("span"),Ut=_e(),yi=D("div"),Or=D("div"),bi=ee(`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),Gr=D("a"),Vr=D("strong"),xi=ee("Statistical bulletins"),wi=_e(),Mr=D("span"),Pr=ee(er),Yn=D("br"),jn=_e(),Di&&Di.c(),Vn=_e(),Wi&&Wi.c(),Jn=_e(),vi=D("div"),Zi=D("div"),_n=D("div"),to=ee("Households"),An=D("span"),bn=_e(),Pi=D("div"),ei=D("div"),nn=ee(`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),Qn=D("a"),zn=D("strong"),Wr=ee("Statistical bulletins"),N=_e(),G=D("span"),$=ee(H),oe=D("br"),ve=_e(),Xt&&Xt.c(),ge=_e(),Dn&&Dn.c(),X=_e(),ne=D("div"),ke=D("div"),qe=D("h3"),io.c(),Ze=_e(),ze=D("div"),Yt(je.$$.fragment),st=_e(),Re=D("div"),ta.c(),$e=_e(),He=D("div"),wn.c(),Mt=_e(),We=D("div"),qt=D("div"),pr=D("h2"),kt=D("button"),ir=D("span"),Vt=ee("Area Information"),Fr=_e(),Ft=D("div"),_r=D("div"),hr=ee("Census 2021 - "),lr=ee(Ht),gi=ee(" - "),Pn=D("span"),Ei=ee("Location, Area and Population density"),Si=_e(),an=D("div"),on=D("div"),br=D("div"),Gi=D("div"),sn=ee("Location"),Yr=D("span"),Er=_e(),ui=D("div"),Vi=D("div"),Ys=ee("Information about the area including its geographical hierarchy."),Ki=_e(),$n=D("br"),Gn.c(),ti=_e(),Jr=D("div"),ki=D("div"),ci=D("div"),ro=ee("Area "),Pa=D("span"),ns=_e(),Fn=D("div"),Zn=D("div"),Ca=ee("Area is measured in hectares (ha), it is rounded to the nearest whole number."),Da=_e(),go=D("span"),Il=ee(ua),as=ee(" ha"),Co=_e(),Fi=D("div"),Ci=D("div"),un=D("div"),Se=ee("Population density"),Hi=D("span"),Cr=_e(),ca=D("div"),Ii=D("div"),Nr=ee("Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),Ma=_e(),ys=D("span"),jc=ee(os),Wl=_e(),hn&&hn.c(),ss=_e(),ea.c(),this.h()},l(Fe){h=M(Fe,"DIV",{class:!0});var It=R(h);f=M(It,"DIV",{});var Ni=R(f);y=M(Ni,"SPAN",{class:!0});var Kn=R(y);_=M(Kn,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var Al=R(_);v=te(Al,"Home"),Al.forEach(T),a=G_(Kn,!1),A=be(Kn),Cn.l(Kn),F=be(Kn),Kn.forEach(T),V=M(Ni,"BR",{}),j=be(Ni),U=M(Ni,"SPAN",{class:!0});var el=R(U);ie=te(el,he),el.forEach(T),De=be(Ni),we=M(Ni,"DIV",{class:!0,style:!0});var bs=R(we);Ce=te(bs,`Click for: \r
		\r
					`),cn.l(bs),Ue=be(bs),ri&&ri.l(bs),At=be(bs),xa.l(bs),bs.forEach(T),Ni.forEach(T),Dt=be(It),ht=M(It,"DIV",{});var tl=R(ht);tt=M(tl,"DIV",{style:!0,class:!0});var pa=R(tt);Ar=M(pa,"B",{});var cs=R(Ar);yr=te(cs,"Search for your area:"),cs.forEach(T),tr=be(pa),Jt(wt.$$.fragment,pa),bt=be(pa),kr=M(pa,"SCRIPT",{});var zl=R(kr);Rt=te(zl,`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),zl.forEach(T),zr=be(pa),Qe=M(pa,"DIV",{width:!0});var wa=R(Qe);ar=M(wa,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var Yl=R(ar);$r=te(Yl,"Print / PDF"),Yl.forEach(T),si=be(wa),wr=M(wa,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var rl=R(wr);mt=te(rl,"Menu"),rl.forEach(T),nt=be(wa),cr=M(wa,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var ao=R(cr);ji=te(ao,"Share"),ao.forEach(T),wa.forEach(T),pa.forEach(T),tl.forEach(T),It.forEach(T),la=be(Fe),Bi=M(Fe,"DIV",{id:!0,class:!0});var oo=R(Bi);zi=M(oo,"DIV",{class:!0,style:!0});var il=R(zi);li=M(il,"H3",{style:!0,class:!0});var Lo=R(li);tn=te(Lo,"Overview"),Lo.forEach(T),rr=be(il),xn.l(il),Oi=be(il),Xi&&Xi.l(il),il.forEach(T),Za=be(oo),Ir=M(oo,"DIV",{class:!0});var Ti=R(Ir);Bt=M(Ti,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var so=R(Bt);rn=M(so,"DIV",{class:!0,style:!0});var Pl=R(rn);mi=te(Pl,"Population "),Zr=M(Pl,"SPAN",{style:!0});var nl=R(Zr);nl.forEach(T),Pl.forEach(T),so.forEach(T),Ut=be(Ti),yi=M(Ti,"DIV",{class:!0,id:!0});var tc=R(yi);Or=M(tc,"DIV",{class:!0});var rc=R(Or);bi=te(rc,`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),Gr=M(rc,"A",{href:!0,class:!0});var hs=R(Gr);Vr=M(hs,"STRONG",{});var xs=R(Vr);xi=te(xs,"Statistical bulletins"),xs.forEach(T),hs.forEach(T),rc.forEach(T),tc.forEach(T),wi=be(Ti),Mr=M(Ti,"SPAN",{class:!0,style:!0});var ic=R(Mr);Pr=te(ic,er),ic.forEach(T),Yn=M(Ti,"BR",{}),jn=be(Ti),Di&&Di.l(Ti),Vn=be(Ti),Wi&&Wi.l(Ti),Ti.forEach(T),Jn=be(oo),vi=M(oo,"DIV",{class:!0});var fa=R(vi);Zi=M(fa,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var al=R(Zi);_n=M(al,"DIV",{class:!0,style:!0});var Jl=R(_n);to=te(Jl,"Households"),An=M(Jl,"SPAN",{style:!0});var nc=R(An);nc.forEach(T),Jl.forEach(T),al.forEach(T),bn=be(fa),Pi=M(fa,"DIV",{class:!0,id:!0});var ps=R(Pi);ei=M(ps,"DIV",{class:!0});var ol=R(ei);nn=te(ol,`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),Qn=M(ol,"A",{href:!0,class:!0});var Ro=R(Qn);zn=M(Ro,"STRONG",{});var ra=R(zn);Wr=te(ra,"Statistical bulletins"),ra.forEach(T),Ro.forEach(T),ol.forEach(T),ps.forEach(T),N=be(fa),G=M(fa,"SPAN",{class:!0,style:!0});var Lr=R(G);$=te(Lr,H),Lr.forEach(T),oe=M(fa,"BR",{}),ve=be(fa),Xt&&Xt.l(fa),ge=be(fa),Dn&&Dn.l(fa),fa.forEach(T),oo.forEach(T),X=be(Fe),ne=M(Fe,"DIV",{class:!0});var _o=R(ne);ke=M(_o,"DIV",{style:!0});var lo=R(ke);qe=M(lo,"H3",{class:!0});var sl=R(qe);io.l(sl),sl.forEach(T),lo.forEach(T),Ze=be(_o),ze=M(_o,"DIV",{id:!0,style:!0,class:!0});var dr=R(ze);Jt(je.$$.fragment,dr),dr.forEach(T),st=be(_o),Re=M(_o,"DIV",{});var Rr=R(Re);ta.l(Rr),Rr.forEach(T),$e=be(_o),He=M(_o,"DIV",{});var Hn=R(He);wn.l(Hn),Hn.forEach(T),_o.forEach(T),Mt=be(Fe),We=M(Fe,"DIV",{class:!0,id:!0});var ws=R(We);qt=M(ws,"DIV",{class:!0});var Ga=R(qt);pr=M(Ga,"H2",{class:!0,id:!0});var Es=R(pr);kt=M(Es,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Gc=R(kt);ir=M(Gc,"SPAN",{class:!0});var Kc=R(ir);Vt=te(Kc,"Area Information"),Kc.forEach(T),Gc.forEach(T),Es.forEach(T),Fr=be(Ga),Ft=M(Ga,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var bo=R(Ft);_r=M(bo,"DIV",{class:!0});var Bo=R(_r);hr=te(Bo,"Census 2021 - "),lr=te(Bo,Ht),gi=te(Bo," - "),Pn=M(Bo,"SPAN",{class:!0});var Oo=R(Pn);Ei=te(Oo,"Location, Area and Population density"),Oo.forEach(T),Si=be(Bo),an=M(Bo,"DIV",{class:!0});var Kr=R(an);on=M(Kr,"DIV",{class:!0,style:!0});var Ea=R(on);br=M(Ea,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xo=R(br);Gi=M(xo,"DIV",{class:!0,style:!0});var _i=R(Gi);sn=te(_i,"Location"),Yr=M(_i,"SPAN",{style:!0});var ft=R(Yr);ft.forEach(T),_i.forEach(T),xo.forEach(T),Er=be(Ea),ui=M(Ea,"DIV",{class:!0,id:!0});var Sa=R(ui);Vi=M(Sa,"DIV",{class:!0});var Vo=R(Vi);Ys=te(Vo,"Information about the area including its geographical hierarchy."),Vo.forEach(T),Sa.forEach(T),Ki=be(Ea),$n=M(Ea,"BR",{}),Gn.l(Ea),Ea.forEach(T),ti=be(Kr),Jr=M(Kr,"DIV",{class:!0});var Un=R(Jr);ki=M(Un,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var uo=R(ki);ci=M(uo,"DIV",{class:!0,style:!0});var Xn=R(ci);ro=te(Xn,"Area "),Pa=M(Xn,"SPAN",{style:!0});var Su=R(Pa);Su.forEach(T),Xn.forEach(T),uo.forEach(T),ns=be(Un),Fn=M(Un,"DIV",{class:!0,id:!0});var rt=R(Fn);Zn=M(rt,"DIV",{class:!0});var ll=R(Zn);Ca=te(ll,"Area is measured in hectares (ha), it is rounded to the nearest whole number."),ll.forEach(T),rt.forEach(T),Da=be(Un),go=M(Un,"SPAN",{class:!0,style:!0});var Cl=R(go);Il=te(Cl,ua),as=te(Cl," ha"),Cl.forEach(T),Un.forEach(T),Co=be(Kr),Fi=M(Kr,"DIV",{class:!0});var Fo=R(Fi);Ci=M(Fo,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Mi=R(Ci);un=M(Mi,"DIV",{class:!0,style:!0});var Yi=R(un);Se=te(Yi,"Population density"),Hi=M(Yi,"SPAN",{style:!0});var Ka=R(Hi);Ka.forEach(T),Yi.forEach(T),Mi.forEach(T),Cr=be(Fo),ca=M(Fo,"DIV",{class:!0,id:!0});var co=R(ca);Ii=M(co,"DIV",{class:!0});var ka=R(Ii);Nr=te(ka,"Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),ka.forEach(T),co.forEach(T),Ma=be(Fo),ys=M(Fo,"SPAN",{class:!0,style:!0});var Va=R(ys);jc=te(Va,os),Va.forEach(T),Wl=be(Fo),hn&&hn.l(Fo),Fo.forEach(T),Kr.forEach(T),Bo.forEach(T),bo.forEach(T),Ga.forEach(T),ss=be(ws),ea.l(ws),ws.forEach(T),this.h()},h(){S(_,"href",Vh+"/"),S(_,"sveltekit:noscroll",""),S(_,"class","svelte-p0yy5r"),a.a=A,S(y,"class","text-small"),S(U,"class","text-big title svelte-p0yy5r"),S(we,"class","text-bold"),re(we,"font-size","0.85em"),S(ar,"class","btn svelte-p0yy5r"),re(ar,"width","33%"),S(ar,"title","Click to print this page to pdf or printer"),S(ar,"onclick","window.print();return false;"),S(wr,"class","btn svelte-p0yy5r"),re(wr,"width","33%"),S(wr,"alt","Return to the landing page"),S(wr,"onclick","window.location.href='"+Vh+"';"),S(cr,"class","btn svelte-p0yy5r"),re(cr,"width","30%"),S(cr,"type","share"),S(cr,"alt","Share this page"),S(Qe,"width","100%"),re(tt,"width","350px"),re(tt,"padding-top","5px"),S(tt,"class","svelte-p0yy5r"),gn(tt,"float-right",u[6]>1),S(h,"class","grid mtl svelte-p0yy5r"),re(li,"margin","0 0 10px 0"),re(li,"line-height","1.78"),S(li,"class","svelte-p0yy5r"),S(zi,"class","div-grey-box svelte-p0yy5r"),re(zi,"line-height","1.3"),re(Zr,"color","gray"),re(Zr,"font-size","14pt"),S(rn,"class","blocktitle"),re(rn,"margin","0"),re(rn,"width","100%"),S(Bt,"class","row"),re(Bt,"display","flex"),re(Bt,"cursor","pointer"),S(Bt,"data-bs-toggle","collapse"),S(Bt,"data-bs-target","#pop-info"),S(Bt,"aria-expanded","false"),S(Bt,"aria-controls","pop-info"),S(Gr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Gr,"class","svelte-p0yy5r"),S(Or,"class","card card-body svelte-p0yy5r"),S(yi,"class","collapse svelte-p0yy5r"),S(yi,"id","pop-info"),S(Mr,"class","text-big"),re(Mr,"font-size","2.8em"),S(Ir,"class","div-grey-box svelte-p0yy5r"),re(An,"color","gray"),re(An,"font-size","14pt"),S(_n,"class","blocktitle"),re(_n,"margin","0"),re(_n,"width","100%"),S(Zi,"class","row"),re(Zi,"display","flex"),re(Zi,"cursor","pointer"),S(Zi,"data-bs-toggle","collapse"),S(Zi,"data-bs-target","#households-info"),S(Zi,"aria-expanded","false"),S(Zi,"aria-controls","households-info"),S(Qn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Qn,"class","svelte-p0yy5r"),S(ei,"class","card card-body svelte-p0yy5r"),S(Pi,"class","collapse svelte-p0yy5r"),S(Pi,"id","households-info"),S(G,"class","text-big"),re(G,"font-size","2.8em"),S(vi,"class","div-grey-box svelte-p0yy5r"),S(Bi,"id","grid"),S(Bi,"class","grid mt svelte-p0yy5r"),S(qe,"class","svelte-p0yy5r"),re(ke,"grid-column","span "+u[6]),S(ze,"id","map"),re(ze,"padding-right","45px"),re(ze,"grid-column","span "+(u[6]==2?2:u[6]&&u[6]>2?u[6]-1:1)),S(ze,"class","svelte-p0yy5r"),S(ne,"class","grid mt svelte-p0yy5r"),Gs(()=>u[33].call(ne)),S(ir,"class","accordion-button-title"),S(kt,"class","accordion-button collapsed"),S(kt,"type","button"),S(kt,"data-bs-toggle","collapse"),S(kt,"data-bs-target","#panelsStayOpen-collapseZero"),S(kt,"aria-expanded","false"),S(kt,"aria-controls","panelsStayOpen-collapseZero"),S(pr,"class","accordion-header svelte-p0yy5r"),S(pr,"id","panelsStayOpen-headingZero"),S(Pn,"class","accordion-button-title-sub"),re(Yr,"color","gray"),re(Yr,"font-size","14pt"),S(Gi,"class","blocktitle"),re(Gi,"margin","0"),re(Gi,"width","100%"),S(br,"class","row"),re(br,"display","flex"),re(br,"cursor","pointer"),S(br,"data-bs-toggle","collapse"),S(br,"data-bs-target","#location-info"),S(br,"aria-expanded","false"),S(br,"aria-controls","location-info"),S(Vi,"class","card card-body svelte-p0yy5r"),S(ui,"class","collapse svelte-p0yy5r"),S(ui,"id","location-info"),S(on,"class","div-grey-box svelte-p0yy5r"),re(on,"line-height","1.3"),re(Pa,"color","gray"),re(Pa,"font-size","14pt"),S(ci,"class","blocktitle"),re(ci,"margin","0"),re(ci,"width","100%"),S(ki,"class","row"),re(ki,"display","flex"),re(ki,"cursor","pointer"),S(ki,"data-bs-toggle","collapse"),S(ki,"data-bs-target","#Area-info"),S(ki,"aria-expanded","false"),S(ki,"aria-controls","Area-info"),S(Zn,"class","card card-body svelte-p0yy5r"),S(Fn,"class","collapse svelte-p0yy5r"),S(Fn,"id","Area-info"),S(go,"class","text-big"),re(go,"font-size","2.8em"),S(Jr,"class","div-grey-box svelte-p0yy5r"),re(Hi,"color","gray"),re(Hi,"font-size","14pt"),S(un,"class","blocktitle"),re(un,"margin","0"),re(un,"width","100%"),S(Ci,"class","row"),re(Ci,"display","flex"),re(Ci,"cursor","pointer"),S(Ci,"data-bs-toggle","collapse"),S(Ci,"data-bs-target","#popden-info"),S(Ci,"aria-expanded","false"),S(Ci,"aria-controls","popden-info"),S(Ii,"class","card card-body svelte-p0yy5r"),S(ca,"class","collapse svelte-p0yy5r"),S(ca,"id","popden-info"),S(ys,"class","text-big"),re(ys,"font-size","2.8em"),S(Fi,"class","div-grey-box svelte-p0yy5r"),S(an,"class","grid mt svelte-p0yy5r"),Gs(()=>u[34].call(an)),S(_r,"class","accordion-body"),S(Ft,"id","panelsStayOpen-collapseZero"),S(Ft,"class","accordion-collapse collapse svelte-p0yy5r"),S(Ft,"aria-labelledby","panelsStayOpen-headingZero"),S(qt,"class","accordion-item"),S(We,"class","accordion"),S(We,"id","accordionPanelsStayOpenExample")},m(Fe,It){Ae(Fe,h,It),w(h,f),w(f,y),w(y,_),w(_,v),a.m(P,y),w(y,A),Cn.m(y,null),w(y,F),w(f,V),w(f,j),w(f,U),w(U,ie),w(f,De),w(f,we),w(we,Ce),cn.m(we,null),w(we,Ue),ri&&ri.m(we,null),w(we,At),xa.m(we,null),w(h,Dt),w(h,ht),w(ht,tt),w(tt,Ar),w(Ar,yr),w(tt,tr),Qt(wt,tt,null),w(tt,bt),w(tt,kr),w(kr,Rt),w(tt,zr),w(tt,Qe),w(Qe,ar),w(ar,$r),w(Qe,si),w(Qe,wr),w(wr,mt),w(Qe,nt),w(Qe,cr),w(cr,ji),Ae(Fe,la,It),Ae(Fe,Bi,It),w(Bi,zi),w(zi,li),w(li,tn),w(zi,rr),xn.m(zi,null),w(zi,Oi),Xi&&Xi.m(zi,null),w(Bi,Za),w(Bi,Ir),w(Ir,Bt),w(Bt,rn),w(rn,mi),w(rn,Zr),Zr.innerHTML=eo,w(Ir,Ut),w(Ir,yi),w(yi,Or),w(Or,bi),w(Or,Gr),w(Gr,Vr),w(Vr,xi),w(Ir,wi),w(Ir,Mr),w(Mr,Pr),w(Ir,Yn),w(Ir,jn),Di&&Di.m(Ir,null),w(Ir,Vn),Wi&&Wi.m(Ir,null),w(Bi,Jn),w(Bi,vi),w(vi,Zi),w(Zi,_n),w(_n,to),w(_n,An),An.innerHTML=is,w(vi,bn),w(vi,Pi),w(Pi,ei),w(ei,nn),w(ei,Qn),w(Qn,zn),w(zn,Wr),w(vi,N),w(vi,G),w(G,$),w(vi,oe),w(vi,ve),Xt&&Xt.m(vi,null),w(vi,ge),Dn&&Dn.m(vi,null),Ae(Fe,X,It),Ae(Fe,ne,It),w(ne,ke),w(ke,qe),io.m(qe,null),w(ne,Ze),w(ne,ze),Qt(je,ze,null),w(ne,st),w(ne,Re),ta.m(Re,null),w(ne,$e),w(ne,He),wn.m(He,null),et=Ks(ne,u[33].bind(ne)),Ae(Fe,Mt,It),Ae(Fe,We,It),w(We,qt),w(qt,pr),w(pr,kt),w(kt,ir),w(ir,Vt),w(qt,Fr),w(qt,Ft),w(Ft,_r),w(_r,hr),w(_r,lr),w(_r,gi),w(_r,Pn),w(Pn,Ei),w(_r,Si),w(_r,an),w(an,on),w(on,br),w(br,Gi),w(Gi,sn),w(Gi,Yr),Yr.innerHTML=ln,w(on,Er),w(on,ui),w(ui,Vi),w(Vi,Ys),w(on,Ki),w(on,$n),Gn.m(on,null),w(an,ti),w(an,Jr),w(Jr,ki),w(ki,ci),w(ci,ro),w(ci,Pa),Pa.innerHTML=Qu,w(Jr,ns),w(Jr,Fn),w(Fn,Zn),w(Zn,Ca),w(Jr,Da),w(Jr,go),w(go,Il),w(go,as),w(an,Co),w(an,Fi),w(Fi,Ci),w(Ci,un),w(un,Se),w(un,Hi),Hi.innerHTML=Nn,w(Fi,Cr),w(Fi,ca),w(ca,Ii),w(Ii,Nr),w(Fi,Ma),w(Fi,ys),w(ys,jc),w(Fi,Wl),hn&&hn.m(Fi,null),vs=Ks(an,u[34].bind(an)),w(We,ss),no[La].m(We,null),ba=!0},p(Fe,It){gs===(gs=Zc(Fe))&&Cn?Cn.p(Fe,It):(Cn.d(1),Cn=gs(Fe),Cn&&(Cn.c(),Cn.m(y,F))),(!ba||It[0]&2)&&he!==(he=Fe[1].name+"")&&dt(ie,he),hi===(hi=$u(Fe))&&cn?cn.p(Fe,It):(cn.d(1),cn=hi(Fe),cn&&(cn.c(),cn.m(we,Ue))),Fe[1].type!="ni"?ri?ri.p(Fe,It):(ri=B2(Fe),ri.c(),ri.m(we,At)):ri&&(ri.d(1),ri=null),Ra===(Ra=ls(Fe))&&xa?xa.p(Fe,It):(xa.d(1),xa=Ra(Fe),xa&&(xa.c(),xa.m(we,null)));const Ni={};It[0]&1&&(Ni.search_data=Fe[0]),wt.$set(Ni),It[0]&64&&gn(tt,"float-right",Fe[6]>1),Ba===(Ba=us(Fe))&&xn?xn.p(Fe,It):(xn.d(1),xn=Ba(Fe),xn&&(xn.c(),xn.m(zi,Oi))),Fe[10]?Xi?Xi.p(Fe,It):(Xi=O2(Fe),Xi.c(),Xi.m(zi,null)):Xi&&(Xi.d(1),Xi=null),(!ba||It[0]&2)&&er!==(er=Fe[1].data.population.value[2021].all.toLocaleString()+"")&&dt(Pr,er),Fe[1].type!="ni"?Di?(Di.p(Fe,It),It[0]&2&&it(Di,1)):(Di=V2(Fe),Di.c(),it(Di,1),Di.m(Ir,Vn)):Di&&(xu(),pt(Di,1,1,()=>{Di=null}),wu()),Fe[10]&&Fe[4]?Wi?(Wi.p(Fe,It),It[0]&1040&&it(Wi,1)):(Wi=U2(Fe),Wi.c(),it(Wi,1),Wi.m(Ir,null)):Wi&&(xu(),pt(Wi,1,1,()=>{Wi=null}),wu()),(!ba||It[0]&2)&&H!==(H=Fe[1].data.households.value[2021].all_households.toLocaleString()+"")&&dt($,H),Fe[1].type!="ni"&Fe[11]?Xt?(Xt.p(Fe,It),It[0]&2050&&it(Xt,1)):(Xt=q2(Fe),Xt.c(),it(Xt,1),Xt.m(vi,ge)):Xt&&(xu(),pt(Xt,1,1,()=>{Xt=null}),wu()),Fe[10]&&Fe[4]?Dn?(Dn.p(Fe,It),It[0]&1040&&it(Dn,1)):(Dn=j2(Fe),Dn.c(),it(Dn,1),Dn.m(vi,null)):Dn&&(xu(),pt(Dn,1,1,()=>{Dn=null}),wu()),Eu===(Eu=Do(Fe))&&io?io.p(Fe,It):(io.d(1),io=Eu(Fe),io&&(io.c(),io.m(qe,null))),(!ba||It[0]&64)&&re(ke,"grid-column","span "+Fe[6]);const Kn={};It[0]&2&&(Kn.location={bounds:Fe[1].bounds}),It[0]&768|It[1]&1073741824&&(Kn.$$scope={dirty:It,ctx:Fe}),!ot&&It[0]&128&&(ot=!0,Kn.map=Fe[7],cE(()=>ot=!1)),je.$set(Kn),(!ba||It[0]&64)&&re(ze,"grid-column","span "+(Fe[6]==2?2:Fe[6]&&Fe[6]>2?Fe[6]-1:1)),Oa===(Oa=ha(Fe))&&ta?ta.p(Fe,It):(ta.d(1),ta=Oa(Fe),ta&&(ta.c(),ta.m(Re,null))),Mo===(Mo=ec(Fe))&&wn?wn.p(Fe,It):(wn.d(1),wn=Mo(Fe),wn&&(wn.c(),wn.m(He,null))),(!ba||It[0]&2)&&Ht!==(Ht=Fe[1].name+"")&&dt(lr,Ht),$s===($s=_s(Fe))&&Gn?Gn.p(Fe,It):(Gn.d(1),Gn=$s(Fe),Gn&&(Gn.c(),Gn.m(on,null))),(!ba||It[0]&2)&&ua!==(ua=(Fe[1].hectares>=.1?Fe[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&dt(Il,ua),(!ba||It[0]&2)&&os!==(os=(Fe[1].data.population.value[2021].all/Fe[1].hectares>=.1?(Fe[1].data.population.value[2021].all/Fe[1].hectares).toFixed(1):"<0.1")+"")&&dt(jc,os),Fe[1].type!="ni"&&Fe[11]?hn?hn.p(Fe,It):(hn=H2(Fe),hn.c(),hn.m(Fi,null)):hn&&(hn.d(1),hn=null);let Al=La;La=Qr(Fe),La===Al?no[La].p(Fe,It):(xu(),pt(no[Al],1,1,()=>{no[Al]=null}),wu(),ea=no[La],ea?ea.p(Fe,It):(ea=no[La]=Tl[La](Fe),ea.c()),it(ea,1),ea.m(We,null))},i(Fe){ba||(it(wt.$$.fragment,Fe),it(Di),it(Wi),it(Xt),it(Dn),it(je.$$.fragment,Fe),it(ea),ba=!0)},o(Fe){pt(wt.$$.fragment,Fe),pt(Di),pt(Wi),pt(Xt),pt(Dn),pt(je.$$.fragment,Fe),pt(ea),ba=!1},d(Fe){Fe&&T(h),Cn.d(),cn.d(),ri&&ri.d(),xa.d(),$t(wt),Fe&&T(la),Fe&&T(Bi),xn.d(),Xi&&Xi.d(),Di&&Di.d(),Wi&&Wi.d(),Xt&&Xt.d(),Dn&&Dn.d(),Fe&&T(X),Fe&&T(ne),io.d(),$t(je),ta.d(),wn.d(),et(),Fe&&T(Mt),Fe&&T(We),Gn.d(),hn&&hn.d(),vs(),no[La].d()}}}function xk(u){let h=u[1].name+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,_){Ae(y,f,_)},p(y,_){_[0]&2&&h!==(h=y[1].name+"")&&dt(f,h)},d(y){y&&T(f)}}}function wk(u){let h,f=u[1].name+"",y,_=[...u[1].parents].reverse(),v=[];for(let a=0;a<_.length;a+=1)v[a]=R2(M2(u,_,a));return{c(){for(let a=0;a<v.length;a+=1)v[a].c();h=_e(),y=ee(f)},l(a){for(let P=0;P<v.length;P+=1)v[P].l(a);h=be(a),y=te(a,f)},m(a,P){for(let A=0;A<v.length;A+=1)v[A].m(a,P);Ae(a,h,P),Ae(a,y,P)},p(a,P){if(P[0]&2){_=[...a[1].parents].reverse();let A;for(A=0;A<_.length;A+=1){const F=M2(a,_,A);v[A]?v[A].p(F,P):(v[A]=R2(F),v[A].c(),v[A].m(h.parentNode,h))}for(;A<v.length;A+=1)v[A].d(1);v.length=_.length}P[0]&2&&f!==(f=a[1].name+"")&&dt(y,f)},d(a){qc(v,a),a&&T(h),a&&T(y)}}}function R2(u){let h,f=u[55].name+"",y,_,v,a=" &gt; ",P;return{c(){h=D("a"),y=ee(f),v=new Z_(!1),P=_a(),this.h()},l(A){h=M(A,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var F=R(h);y=te(F,f),F.forEach(T),v=G_(A,!1),P=_a(),this.h()},h(){S(h,"href",_=Vh+"/"+u[55].code+"/"),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r"),v.a=P},m(A,F){Ae(A,h,F),w(h,y),v.m(a,A,F),Ae(A,P,F)},p(A,F){F[0]&2&&f!==(f=A[55].name+"")&&dt(y,f),F[0]&2&&_!==(_=Vh+"/"+A[55].code+"/")&&S(h,"href",_)},d(A){A&&T(h),A&&T(P),A&&v.d()}}}function Ek(u){let h,f,y,_;return{c(){h=D("button"),f=ee("No comparison"),this.h()},l(v){h=M(v,"BUTTON",{class:!0});var a=R(h);f=te(a,"No comparison"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),gn(h,"btn-active",u[5])},m(v,a){Ae(v,h,a),w(h,f),y||(_=[On(h,"click",u[20]),On(h,"click",u[21]),On(h,"click",u[22])],y=!0)},p(v,a){a[0]&32&&gn(h,"btn-active",v[5])},d(v){v&&T(h),y=!1,Uc(_)}}}function Sk(u){let h,f,y,_;return{c(){h=D("button"),f=ee("No comparison"),this.h()},l(v){h=M(v,"BUTTON",{class:!0});var a=R(h);f=te(a,"No comparison"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),gn(h,"btn-active",!u[4])},m(v,a){Ae(v,h,a),w(h,f),y||(_=[On(h,"click",u[17]),On(h,"click",u[18]),On(h,"click",u[19])],y=!0)},p(v,a){a[0]&16&&gn(h,"btn-active",!v[4])},d(v){v&&T(h),y=!1,Uc(_)}}}function B2(u){let h,f,y,_;return{c(){h=D("button"),f=ee("NI 2021"),this.h()},l(v){h=M(v,"BUTTON",{class:!0});var a=R(h);f=te(a,"NI 2021"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),gn(h,"btn-active",u[11]&!u[5]&!u[4])},m(v,a){Ae(v,h,a),w(h,f),y||(_=[On(h,"click",u[23]),On(h,"click",u[24]),On(h,"click",u[25])],y=!0)},p(v,a){a[0]&2096&&gn(h,"btn-active",v[11]&!v[5]&!v[4])},d(v){v&&T(h),y=!1,Uc(_)}}}function kk(u){let h,f,y,_;return{c(){h=D("button"),f=ee("2011 data not available"),this.h()},l(v){h=M(v,"BUTTON",{class:!0});var a=R(h);f=te(a,"2011 data not available"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),gn(h,"btn-active",u[4]&!u[5]&!u[11])},m(v,a){Ae(v,h,a),w(h,f),y||(_=[On(h,"click",u[29]),On(h,"click",u[30]),On(h,"click",u[31])],y=!0)},p(v,a){a[0]&2096&&gn(h,"btn-active",v[4]&!v[5]&!v[11])},d(v){v&&T(h),y=!1,Uc(_)}}}function Ik(u){let h,f,y,_;return{c(){h=D("button"),f=ee("Same area 2011"),this.h()},l(v){h=M(v,"BUTTON",{class:!0});var a=R(h);f=te(a,"Same area 2011"),a.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),gn(h,"btn-active",u[4]&!u[5]&!u[11])},m(v,a){Ae(v,h,a),w(h,f),y||(_=[On(h,"click",u[26]),On(h,"click",u[27]),On(h,"click",u[28])],y=!0)},p(v,a){a[0]&2096&&gn(h,"btn-active",v[4]&!v[5]&!v[11])},d(v){v&&T(h),y=!1,Uc(_)}}}function Tk(u){let h,f=u[1].name+"",y,_,v=u[1].data.population.value[2021].all.toLocaleString()+"",a,P,A;function F(U,he){return U[1].data.population.value_rank[2021].all==1?Dk:U[1].data.population.value_rank[2021].all==U[1].count?Ck:U[1].data.population.value_rank[2021].all<=(U[1].count+1)/2&&U[1].data.population.value_rank[2021].all!=1?Pk:zk}let V=F(u),j=V(u);return{c(){h=ee("The population of "),y=ee(f),_=ee(" was "),a=ee(v),P=ee(` at the time of the 2021 Census, which\r
					made it the\r
					`),j.c(),A=_a()},l(U){h=te(U,"The population of "),y=te(U,f),_=te(U," was "),a=te(U,v),P=te(U,` at the time of the 2021 Census, which\r
					made it the\r
					`),j.l(U),A=_a()},m(U,he){Ae(U,h,he),Ae(U,y,he),Ae(U,_,he),Ae(U,a,he),Ae(U,P,he),j.m(U,he),Ae(U,A,he)},p(U,he){he[0]&2&&f!==(f=U[1].name+"")&&dt(y,f),he[0]&2&&v!==(v=U[1].data.population.value[2021].all.toLocaleString()+"")&&dt(a,v),V===(V=F(U))&&j?j.p(U,he):(j.d(1),j=V(U),j&&(j.c(),j.m(A.parentNode,A)))},d(U){U&&T(h),U&&T(y),U&&T(_),U&&T(a),U&&T(P),j.d(U),U&&T(A)}}}function Ak(u){let h,f=u[1].name+"",y,_,v=u[1].data.population.value[2021].all.toLocaleString()+"",a,P;return{c(){h=ee("The population of "),y=ee(f),_=ee(" was "),a=ee(v),P=ee(" at the time of the 2021 Census.")},l(A){h=te(A,"The population of "),y=te(A,f),_=te(A," was "),a=te(A,v),P=te(A," at the time of the 2021 Census.")},m(A,F){Ae(A,h,F),Ae(A,y,F),Ae(A,_,F),Ae(A,a,F),Ae(A,P,F)},p(A,F){F[0]&2&&f!==(f=A[1].name+"")&&dt(y,f),F[0]&2&&v!==(v=A[1].data.population.value[2021].all.toLocaleString()+"")&&dt(a,v)},d(A){A&&T(h),A&&T(y),A&&T(_),A&&T(a),A&&T(P)}}}function zk(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=yf(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",_,v,a=sa[u[1].type].name+"",P,A;return{c(){f=ee(h),_=ee(y),v=ee(" smallest "),P=ee(a),A=ee(".")},l(F){f=te(F,h),_=te(F,y),v=te(F," smallest "),P=te(F,a),A=te(F,".")},m(F,V){Ae(F,f,V),Ae(F,_,V),Ae(F,v,V),Ae(F,P,V),Ae(F,A,V)},p(F,V){V[0]&2&&h!==(h=(F[1].count+1-F[1].data.population.value_rank[2021].all).toLocaleString()+"")&&dt(f,h),V[0]&2&&y!==(y=yf(F[1].count+1-F[1].data.population.value_rank[2021].all)+"")&&dt(_,y),V[0]&2&&a!==(a=sa[F[1].type].name+"")&&dt(P,a)},d(F){F&&T(f),F&&T(_),F&&T(v),F&&T(P),F&&T(A)}}}function Pk(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=yf(u[1].data.population.value_rank[2021].all)+"",_,v,a=sa[u[1].type].name+"",P,A;return{c(){f=ee(h),_=ee(y),v=ee(" largest "),P=ee(a),A=ee(".")},l(F){f=te(F,h),_=te(F,y),v=te(F," largest "),P=te(F,a),A=te(F,".")},m(F,V){Ae(F,f,V),Ae(F,_,V),Ae(F,v,V),Ae(F,P,V),Ae(F,A,V)},p(F,V){V[0]&2&&h!==(h=F[1].data.population.value_rank[2021].all.toLocaleString()+"")&&dt(f,h),V[0]&2&&y!==(y=yf(F[1].data.population.value_rank[2021].all)+"")&&dt(_,y),V[0]&2&&a!==(a=sa[F[1].type].name+"")&&dt(P,a)},d(F){F&&T(f),F&&T(_),F&&T(v),F&&T(P),F&&T(A)}}}function Ck(u){let h,f=sa[u[1].type].name+"",y,_;return{c(){h=ee("smallest "),y=ee(f),_=ee(".")},l(v){h=te(v,"smallest "),y=te(v,f),_=te(v,".")},m(v,a){Ae(v,h,a),Ae(v,y,a),Ae(v,_,a)},p(v,a){a[0]&2&&f!==(f=sa[v[1].type].name+"")&&dt(y,f)},d(v){v&&T(h),v&&T(y),v&&T(_)}}}function Dk(u){let h,f=sa[u[1].type].name+"",y,_;return{c(){h=ee("largest "),y=ee(f),_=ee(".")},l(v){h=te(v,"largest "),y=te(v,f),_=te(v,".")},m(v,a){Ae(v,h,a),Ae(v,y,a),Ae(v,_,a)},p(v,a){a[0]&2&&f!==(f=sa[v[1].type].name+"")&&dt(y,f)},d(v){v&&T(h),v&&T(y),v&&T(_)}}}function O2(u){let h;function f(v,a){return v[1].data.population.value.change.all==0?Rk:v[1].data.population.value.change.all>0?Lk:Mk}let y=f(u),_=y(u);return{c(){_.c(),h=_a()},l(v){_.l(v),h=_a()},m(v,a){_.m(v,a),Ae(v,h,a)},p(v,a){y===(y=f(v))&&_?_.p(v,a):(_.d(1),_=y(v),_&&(_.c(),_.m(h.parentNode,h)))},d(v){_.d(v),v&&T(h)}}}function Mk(u){let h,f=vf(u[1].data.population.value.change.all,"%",1)+"",y,_;return{c(){h=ee("A decrease of "),y=ee(f),_=ee(" since the 2011 Census.")},l(v){h=te(v,"A decrease of "),y=te(v,f),_=te(v," since the 2011 Census.")},m(v,a){Ae(v,h,a),Ae(v,y,a),Ae(v,_,a)},p(v,a){a[0]&2&&f!==(f=vf(v[1].data.population.value.change.all,"%",1)+"")&&dt(y,f)},d(v){v&&T(h),v&&T(y),v&&T(_)}}}function Lk(u){let h,f=vf(u[1].data.population.value.change.all,"%",1)+"",y,_;return{c(){h=ee("An increase of "),y=ee(f),_=ee(" since the 2011 Census.")},l(v){h=te(v,"An increase of "),y=te(v,f),_=te(v," since the 2011 Census.")},m(v,a){Ae(v,h,a),Ae(v,y,a),Ae(v,_,a)},p(v,a){a[0]&2&&f!==(f=vf(v[1].data.population.value.change.all,"%",1)+"")&&dt(y,f)},d(v){v&&T(h),v&&T(y),v&&T(_)}}}function Rk(u){let h;return{c(){h=ee("No change in population since the 2011 Census.")},l(f){h=te(f,"No change in population since the 2011 Census.")},m(f,y){Ae(f,h,y)},p:Bn,d(f){f&&T(h)}}}function V2(u){let h,f,y=u[1].type!="ctry"&u[11]&!u[4]&&F2(u);return{c(){y&&y.c(),h=_a()},l(_){y&&y.l(_),h=_a()},m(_,v){y&&y.m(_,v),Ae(_,h,v),f=!0},p(_,v){_[1].type!="ctry"&_[11]&!_[4]?y?(y.p(_,v),v[0]&2066&&it(y,1)):(y=F2(_),y.c(),it(y,1),y.m(h.parentNode,h)):y&&(xu(),pt(y,1,1,()=>{y=null}),wu())},i(_){f||(it(y),f=!0)},o(_){pt(y),f=!1},d(_){y&&y.d(_),_&&T(h)}}}function F2(u){let h,f,y,_,v,a;f=new Hv({props:{$$slots:{default:[Bk]},$$scope:{ctx:u}}});let P=u[1].type=="lgd"&&N2(u);return{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" of Northern Ireland population"),_=_e(),v=D("div"),P&&P.c(),this.h()},l(A){h=M(A,"SPAN",{class:!0});var F=R(h);Jt(f.$$.fragment,F),y=te(F," of Northern Ireland population"),F.forEach(T),_=be(A),v=M(A,"DIV",{class:!0});var V=R(v);P&&P.l(V),V.forEach(T),this.h()},h(){S(h,"class","text-small "),S(v,"class","text-small ")},m(A,F){Ae(A,h,F),Qt(f,h,null),w(h,y),Ae(A,_,F),Ae(A,v,F),P&&P.m(v,null),a=!0},p(A,F){const V={};F[0]&6|F[1]&1073741824&&(V.$$scope={dirty:F,ctx:A}),f.$set(V),A[1].type=="lgd"?P?P.p(A,F):(P=N2(A),P.c(),P.m(v,null)):P&&(P.d(1),P=null)},i(A){a||(it(f.$$.fragment,A),a=!0)},o(A){pt(f.$$.fragment,A),a=!1},d(A){A&&T(h),$t(f),A&&T(_),A&&T(v),P&&P.d()}}}function Bk(u){let h=(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all>=.001?(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(_){f=te(_,h),y=te(_,"%")},m(_,v){Ae(_,f,v),Ae(_,y,v)},p(_,v){v[0]&6&&h!==(h=(_[1].data.population.value[2021].all/_[2].data.population.value[2021].all>=.001?(_[1].data.population.value[2021].all/_[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&dt(f,h)},d(_){_&&T(f),_&&T(y)}}}function N2(u){let h,f=u[1].count.toLocaleString()+"",y,_,v=sa[u[1].type].pl+"",a;function P(V,j){return V[1].data.population.value_rank[2021].all==1?Nk:V[1].data.population.value_rank[2021].all==V[1].count?Fk:V[1].data.population.value_rank[2021].all<=(V[1].count+1)/2&&V[1].data.population.value_rank[2021].all!=1?Vk:Ok}let A=P(u),F=A(u);return{c(){F.c(),h=ee(`\r
							population of `),y=ee(f),_=_e(),a=ee(v)},l(V){F.l(V),h=te(V,`\r
							population of `),y=te(V,f),_=be(V),a=te(V,v)},m(V,j){F.m(V,j),Ae(V,h,j),Ae(V,y,j),Ae(V,_,j),Ae(V,a,j)},p(V,j){A===(A=P(V))&&F?F.p(V,j):(F.d(1),F=A(V),F&&(F.c(),F.m(h.parentNode,h))),j[0]&2&&f!==(f=V[1].count.toLocaleString()+"")&&dt(y,f),j[0]&2&&v!==(v=sa[V[1].type].pl+"")&&dt(a,v)},d(V){F.d(V),V&&T(h),V&&T(y),V&&T(_),V&&T(a)}}}function Ok(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=yf(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",_,v;return{c(){f=ee(h),_=ee(y),v=ee(" smallest")},l(a){f=te(a,h),_=te(a,y),v=te(a," smallest")},m(a,P){Ae(a,f,P),Ae(a,_,P),Ae(a,v,P)},p(a,P){P[0]&2&&h!==(h=(a[1].count+1-a[1].data.population.value_rank[2021].all).toLocaleString()+"")&&dt(f,h),P[0]&2&&y!==(y=yf(a[1].count+1-a[1].data.population.value_rank[2021].all)+"")&&dt(_,y)},d(a){a&&T(f),a&&T(_),a&&T(v)}}}function Vk(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=yf(u[1].data.population.value_rank[2021].all)+"",_,v;return{c(){f=ee(h),_=ee(y),v=ee(" largest")},l(a){f=te(a,h),_=te(a,y),v=te(a," largest")},m(a,P){Ae(a,f,P),Ae(a,_,P),Ae(a,v,P)},p(a,P){P[0]&2&&h!==(h=a[1].data.population.value_rank[2021].all.toLocaleString()+"")&&dt(f,h),P[0]&2&&y!==(y=yf(a[1].data.population.value_rank[2021].all)+"")&&dt(_,y)},d(a){a&&T(f),a&&T(_),a&&T(v)}}}function Fk(u){let h;return{c(){h=ee("The smallest")},l(f){h=te(f,"The smallest")},m(f,y){Ae(f,h,y)},p:Bn,d(f){f&&T(h)}}}function Nk(u){let h;return{c(){h=ee("The largest")},l(f){h=te(f,"The largest")},m(f,y){Ae(f,h,y)},p:Bn,d(f){f&&T(h)}}}function U2(u){let h,f,y,_;return f=new Hv({props:{$$slots:{default:[Uk]},$$scope:{ctx:u}}}),{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(v){h=M(v,"SPAN",{class:!0});var a=R(h);Jt(f.$$.fragment,a),y=te(a," since 2011 Census"),a.forEach(T),this.h()},h(){S(h,"class","text-small ")},m(v,a){Ae(v,h,a),Qt(f,h,null),w(h,y),_=!0},p(v,a){const P={};a[0]&2|a[1]&1073741824&&(P.$$scope={dirty:a,ctx:v}),f.$set(P)},i(v){_||(it(f.$$.fragment,v),_=!0)},o(v){pt(f.$$.fragment,v),_=!1},d(v){v&&T(h),$t(f)}}}function Uk(u){let h,f=vf(u[1].data.population.value.change.all,"%",1)+"",y,_;return{c(){h=D("span"),y=ee(f),this.h()},l(v){h=M(v,"SPAN",{class:!0});var a=R(h);y=te(a,f),a.forEach(T),this.h()},h(){S(h,"class",_=Rv(Ov(u[1].data.population.value.change.all))+" svelte-p0yy5r")},m(v,a){Ae(v,h,a),w(h,y)},p(v,a){a[0]&2&&f!==(f=vf(v[1].data.population.value.change.all,"%",1)+"")&&dt(y,f),a[0]&2&&_!==(_=Rv(Ov(v[1].data.population.value.change.all))+" svelte-p0yy5r")&&S(h,"class",_)},d(v){v&&T(h)}}}function q2(u){let h,f,y,_;return f=new Hv({props:{$$slots:{default:[qk]},$$scope:{ctx:u}}}),{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" of Northern Ireland households"),this.h()},l(v){h=M(v,"SPAN",{class:!0});var a=R(h);Jt(f.$$.fragment,a),y=te(a," of Northern Ireland households"),a.forEach(T),this.h()},h(){S(h,"class","text-small")},m(v,a){Ae(v,h,a),Qt(f,h,null),w(h,y),_=!0},p(v,a){const P={};a[0]&6|a[1]&1073741824&&(P.$$scope={dirty:a,ctx:v}),f.$set(P)},i(v){_||(it(f.$$.fragment,v),_=!0)},o(v){pt(f.$$.fragment,v),_=!1},d(v){v&&T(h),$t(f)}}}function qk(u){let h=(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households>=.001?(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(_){f=te(_,h),y=te(_,"%")},m(_,v){Ae(_,f,v),Ae(_,y,v)},p(_,v){v[0]&6&&h!==(h=(_[1].data.households.value[2021].all_households/_[2].data.households.value[2021].all_households>=.001?(_[1].data.households.value[2021].all_households/_[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&dt(f,h)},d(_){_&&T(f),_&&T(y)}}}function j2(u){let h,f,y,_;return f=new Hv({props:{$$slots:{default:[jk]},$$scope:{ctx:u}}}),{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(v){h=M(v,"SPAN",{class:!0});var a=R(h);Jt(f.$$.fragment,a),y=te(a," since 2011 Census"),a.forEach(T),this.h()},h(){S(h,"class","text-small")},m(v,a){Ae(v,h,a),Qt(f,h,null),w(h,y),_=!0},p(v,a){const P={};a[0]&2|a[1]&1073741824&&(P.$$scope={dirty:a,ctx:v}),f.$set(P)},i(v){_||(it(f.$$.fragment,v),_=!0)},o(v){pt(f.$$.fragment,v),_=!1},d(v){v&&T(h),$t(f)}}}function jk(u){let h,f=vf(u[1].data.households.value.change.all_households,"%",1)+"",y,_;return{c(){h=D("span"),y=ee(f),this.h()},l(v){h=M(v,"SPAN",{class:!0});var a=R(h);y=te(a,f),a.forEach(T),this.h()},h(){S(h,"class",_=Rv(Ov(u[1].data.households.value.change.all_households))+" svelte-p0yy5r")},m(v,a){Ae(v,h,a),w(h,y)},p(v,a){a[0]&2&&f!==(f=vf(v[1].data.households.value.change.all_households,"%",1)+"")&&dt(y,f),a[0]&2&&_!==(_=Rv(Ov(v[1].data.households.value.change.all_households))+" svelte-p0yy5r")&&S(h,"class",_)},d(v){v&&T(h)}}}function Zk(u){let h,f,y=u[1].name+"",_;return{c(){h=ee("Explore "),f=D("span"),_=ee(y),this.h()},l(v){h=te(v,"Explore "),f=M(v,"SPAN",{style:!0});var a=R(f);_=te(a,y),a.forEach(T),this.h()},h(){re(f,"color","#93328E")},m(v,a){Ae(v,h,a),Ae(v,f,a),w(f,_)},p(v,a){a[0]&2&&y!==(y=v[1].name+"")&&dt(_,y)},d(v){v&&T(h),v&&T(f)}}}function Gk(u){let h,f,y=u[1].name+"",_,v,a,P,A=sa[u[1].type].name+"",F;return{c(){h=ee("Explore "),f=D("span"),_=ee(y),v=_e(),a=D("span"),P=ee("- "),F=ee(A),this.h()},l(V){h=te(V,"Explore "),f=M(V,"SPAN",{style:!0});var j=R(f);_=te(j,y),j.forEach(T),v=be(V),a=M(V,"SPAN",{style:!0});var U=R(a);P=te(U,"- "),F=te(U,A),U.forEach(T),this.h()},h(){re(f,"color","#93328E"),re(a,"color","#a19e9e")},m(V,j){Ae(V,h,j),Ae(V,f,j),w(f,_),Ae(V,v,j),Ae(V,a,j),w(a,P),w(a,F)},p(V,j){j[0]&2&&y!==(y=V[1].name+"")&&dt(_,y),j[0]&2&&A!==(A=sa[V[1].type].name+"")&&dt(F,A)},d(V){V&&T(h),V&&T(f),V&&T(v),V&&T(a)}}}function Kk(u){let h,f,y,_,v,a,P;const A=[mf[u[57]],{id:u[57]+"-fill"},{type:"fill"},{isChild:u[9][u[57]]},{click:!0},{selected:u[8].selected},{highlight:!0},{highlighted:u[8].highlighted},{hover:!0},{hovered:u[8].hovered},{layout:{visibility:u[8].type==u[57]||u[8].childType==u[57]?"visible":"none"}},{paint:u[8].type==u[57]?$a["fill-self"]:u[8].childType==u[57]?$a["fill-child"]:$a.fill}];let F={};for(let ie=0;ie<A.length;ie+=1)F=Pv(F,A[ie]);h=new M_({props:F}),h.$on("select",u[15]);const V=[mf[u[57]],{id:u[57]+"-bounds"},{type:"line"},{selected:u[8].selected},{highlight:!0},{highlighted:u[8].highlighted},{layout:{visibility:u[8].type==u[57]||u[8].childType==u[57]?"visible":"none"}},{paint:u[8].type==u[57]?$a["line-active"]:u[8].childType==u[57]?$a["line-child"]:$a.line}];let j={};for(let ie=0;ie<V.length;ie+=1)j=Pv(j,V[ie]);y=new M_({props:j});const U=[mf[u[57]],{id:u[57]+"-self"},{type:"line"},{selected:u[8].selected},{layout:{visibility:u[8].type==u[57]?"visible":"none"}},{paint:u[8].type==u[57]?$a["line-self"]:$a.line}];let he={};for(let ie=0;ie<U.length;ie+=1)he=Pv(he,U[ie]);return v=new M_({props:he}),{c(){Yt(h.$$.fragment),f=_e(),Yt(y.$$.fragment),_=_e(),Yt(v.$$.fragment),a=_e()},l(ie){Jt(h.$$.fragment,ie),f=be(ie),Jt(y.$$.fragment,ie),_=be(ie),Jt(v.$$.fragment,ie),a=be(ie)},m(ie,De){Qt(h,ie,De),Ae(ie,f,De),Qt(y,ie,De),Ae(ie,_,De),Qt(v,ie,De),Ae(ie,a,De),P=!0},p(ie,De){const we=De[0]&768?Cv(A,[De&0&&Dv(mf[ie[57]]),A[1],A[2],De[0]&512&&{isChild:ie[9][ie[57]]},A[4],De[0]&256&&{selected:ie[8].selected},A[6],De[0]&256&&{highlighted:ie[8].highlighted},A[8],De[0]&256&&{hovered:ie[8].hovered},De[0]&256&&{layout:{visibility:ie[8].type==ie[57]||ie[8].childType==ie[57]?"visible":"none"}},De[0]&256&&{paint:ie[8].type==ie[57]?$a["fill-self"]:ie[8].childType==ie[57]?$a["fill-child"]:$a.fill}]):{};h.$set(we);const Ce=De[0]&256?Cv(V,[De&0&&Dv(mf[ie[57]]),V[1],V[2],De[0]&256&&{selected:ie[8].selected},V[4],De[0]&256&&{highlighted:ie[8].highlighted},De[0]&256&&{layout:{visibility:ie[8].type==ie[57]||ie[8].childType==ie[57]?"visible":"none"}},De[0]&256&&{paint:ie[8].type==ie[57]?$a["line-active"]:ie[8].childType==ie[57]?$a["line-child"]:$a.line}]):{};y.$set(Ce);const Ue=De[0]&256?Cv(U,[De&0&&Dv(mf[ie[57]]),U[1],U[2],De[0]&256&&{selected:ie[8].selected},De[0]&256&&{layout:{visibility:ie[8].type==ie[57]?"visible":"none"}},De[0]&256&&{paint:ie[8].type==ie[57]?$a["line-self"]:$a.line}]):{};v.$set(Ue)},i(ie){P||(it(h.$$.fragment,ie),it(y.$$.fragment,ie),it(v.$$.fragment,ie),P=!0)},o(ie){pt(h.$$.fragment,ie),pt(y.$$.fragment,ie),pt(v.$$.fragment,ie),P=!1},d(ie){$t(h,ie),ie&&T(f),$t(y,ie),ie&&T(_),$t(v,ie),ie&&T(a)}}}function Z2(u){let h,f;const y=[zx[u[57]]];let _={$$slots:{default:[Kk]},$$scope:{ctx:u}};for(let v=0;v<y.length;v+=1)_=Pv(_,y[v]);return h=new vS({props:_}),{c(){Yt(h.$$.fragment)},l(v){Jt(h.$$.fragment,v)},m(v,a){Qt(h,v,a),f=!0},p(v,a){const P=a&0?Cv(y,[Dv(zx[v[57]])]):{};a[0]&768|a[1]&1073741824&&(P.$$scope={dirty:a,ctx:v}),h.$set(P)},i(v){f||(it(h.$$.fragment,v),f=!0)},o(v){pt(h.$$.fragment,v),f=!1},d(v){$t(h,v)}}}function Hk(u){let h,f,y=["dz","sdz","ward","dea","lgd"],_=[];for(let a=0;a<5;a+=1)_[a]=Z2(D2(u,y,a));const v=a=>pt(_[a],1,1,()=>{_[a]=null});return{c(){for(let a=0;a<5;a+=1)_[a].c();h=_a()},l(a){for(let P=0;P<5;P+=1)_[P].l(a);h=_a()},m(a,P){for(let A=0;A<5;A+=1)_[A].m(a,P);Ae(a,h,P),f=!0},p(a,P){if(P[0]&33536){y=["dz","sdz","ward","dea","lgd"];let A;for(A=0;A<5;A+=1){const F=D2(a,y,A);_[A]?(_[A].p(F,P),it(_[A],1)):(_[A]=Z2(F),_[A].c(),it(_[A],1),_[A].m(h.parentNode,h))}for(xu(),A=5;A<5;A+=1)v(A);wu()}},i(a){if(!f){for(let P=0;P<5;P+=1)it(_[P]);f=!0}},o(a){_=_.filter(Boolean);for(let P=0;P<5;P+=1)pt(_[P]);f=!1},d(a){qc(_,a),a&&T(h)}}}function Xk(u){return{c:Bn,l:Bn,m:Bn,p:Bn,d:Bn}}function Wk(u){let h,f,y=u[1].name+"",_,v,a,P,A,F=[...u[1].parents].reverse(),V=[];for(let j=0;j<F.length;j+=1)V[j]=G2(C2(u,F,j));return{c(){h=D("span"),f=ee("Parents of "),_=ee(y),v=_e(),a=D("br"),P=_e(),A=D("span");for(let j=0;j<V.length;j+=1)V[j].c();this.h()},l(j){h=M(j,"SPAN",{class:!0});var U=R(h);f=te(U,"Parents of "),_=te(U,y),v=be(U),U.forEach(T),a=M(j,"BR",{}),P=be(j),A=M(j,"SPAN",{class:!0});var he=R(A);for(let ie=0;ie<V.length;ie+=1)V[ie].l(he);he.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(A,"class","text-small")},m(j,U){Ae(j,h,U),w(h,f),w(h,_),w(h,v),Ae(j,a,U),Ae(j,P,U),Ae(j,A,U);for(let he=0;he<V.length;he+=1)V[he].m(A,null)},p(j,U){if(U[0]&2&&y!==(y=j[1].name+"")&&dt(_,y),U[0]&2){F=[...j[1].parents].reverse();let he;for(he=0;he<F.length;he+=1){const ie=C2(j,F,he);V[he]?V[he].p(ie,U):(V[he]=G2(ie),V[he].c(),V[he].m(A,null))}for(;he<V.length;he+=1)V[he].d(1);V.length=F.length}},d(j){j&&T(h),j&&T(a),j&&T(P),j&&T(A),qc(V,j)}}}function G2(u){let h,f,y=u[54]>0?"\u21B3 ":"",_,v=u[55].name+"",a,P;return{c(){h=D("span"),f=new Z_(!1),_=D("a"),a=ee(v),this.h()},l(A){h=M(A,"SPAN",{style:!0});var F=R(h);f=G_(F,!1),_=M(F,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var V=R(_);a=te(V,v),V.forEach(T),F.forEach(T),this.h()},h(){f.a=_,S(_,"href",P=Vh+"/"+u[55].code),S(_,"sveltekit:noscroll",""),S(_,"class","svelte-p0yy5r"),re(h,"display","block"),re(h,"margin-left",(u[54]>0?(u[54]-1)*15:0)+"px")},m(A,F){Ae(A,h,F),f.m(y,h),w(h,_),w(_,a)},p(A,F){F[0]&2&&v!==(v=A[55].name+"")&&dt(a,v),F[0]&2&&P!==(P=Vh+"/"+A[55].code)&&S(_,"href",P)},d(A){A&&T(h)}}}function Yk(u){let h,f,y=u[1].name+"",_,v,a=sa[u[1].type].name+"",P;return{c(){h=D("span"),f=ee("No areas below "),_=ee(y),v=_e(),P=ee(a),this.h()},l(A){h=M(A,"SPAN",{class:!0});var F=R(h);f=te(F,"No areas below "),_=te(F,y),v=be(F),P=te(F,a),F.forEach(T),this.h()},h(){S(h,"class","muted")},m(A,F){Ae(A,h,F),w(h,f),w(h,_),w(h,v),w(h,P)},p(A,F){F[0]&2&&y!==(y=A[1].name+"")&&dt(_,y),F[0]&2&&a!==(a=sa[A[1].type].name+"")&&dt(P,a)},d(A){A&&T(h)}}}function Jk(u){let h,f=(u[1].children[0]?sa[u[1].children[0].type].pl:"Areas")+"",y,_,v=u[1].name+"",a,P,A,F,V=u[1].children,j=[];for(let U=0;U<V.length;U+=1)j[U]=K2(P2(u,V,U));return{c(){h=D("span"),y=ee(f),_=ee(" within "),a=ee(v),P=D("br"),A=_e(),F=D("span");for(let U=0;U<j.length;U+=1)j[U].c();this.h()},l(U){h=M(U,"SPAN",{class:!0});var he=R(h);y=te(he,f),_=te(he," within "),a=te(he,v),he.forEach(T),P=M(U,"BR",{}),A=be(U),F=M(U,"SPAN",{class:!0});var ie=R(F);for(let De=0;De<j.length;De+=1)j[De].l(ie);ie.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(F,"class","text-small")},m(U,he){Ae(U,h,he),w(h,y),w(h,_),w(h,a),Ae(U,P,he),Ae(U,A,he),Ae(U,F,he);for(let ie=0;ie<j.length;ie+=1)j[ie].m(F,null)},p(U,he){if(he[0]&2&&f!==(f=(U[1].children[0]?sa[U[1].children[0].type].pl:"Areas")+"")&&dt(y,f),he[0]&2&&v!==(v=U[1].name+"")&&dt(a,v),he[0]&2){V=U[1].children;let ie;for(ie=0;ie<V.length;ie+=1){const De=P2(U,V,ie);j[ie]?j[ie].p(De,he):(j[ie]=K2(De),j[ie].c(),j[ie].m(F,null))}for(;ie<j.length;ie+=1)j[ie].d(1);j.length=V.length}},d(U){U&&T(h),U&&T(P),U&&T(A),U&&T(F),qc(j,U)}}}function K2(u){let h,f=u[52].name+"",y,_,v=u[54]<u[1].children.length-1?", ":"",a;return{c(){h=D("a"),y=ee(f),a=ee(v),this.h()},l(P){h=M(P,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var A=R(h);y=te(A,f),A.forEach(T),a=te(P,v),this.h()},h(){S(h,"href",_=Vh+"/"+u[52].code),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r")},m(P,A){Ae(P,h,A),w(h,y),Ae(P,a,A)},p(P,A){A[0]&2&&f!==(f=P[52].name+"")&&dt(y,f),A[0]&2&&_!==(_=Vh+"/"+P[52].code)&&S(h,"href",_),A[0]&2&&v!==(v=P[54]<P[1].children.length-1?", ":"")&&dt(a,v)},d(P){P&&T(h),P&&T(a)}}}function Qk(u){let h=u[1].name+"",f,y;return{c(){f=ee(h),y=ee(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(_){f=te(_,h),y=te(_," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(_,v){Ae(_,f,v),Ae(_,y,v)},p(_,v){v[0]&2&&h!==(h=_[1].name+"")&&dt(f,h)},d(_){_&&T(f),_&&T(y)}}}function $k(u){let h=u[1].name+"",f,y,_=u[1].count.toLocaleString()+"",v,a,P=sa[u[1].type].pl+"",A,F,V=u[1].parents[0].name+"",j,U;return{c(){f=ee(h),y=ee(" is one of "),v=ee(_),a=_e(),A=ee(P),F=ee(`.\r
								 It is located within `),j=ee(V),U=ee(".")},l(he){f=te(he,h),y=te(he," is one of "),v=te(he,_),a=be(he),A=te(he,P),F=te(he,`.\r
								 It is located within `),j=te(he,V),U=te(he,".")},m(he,ie){Ae(he,f,ie),Ae(he,y,ie),Ae(he,v,ie),Ae(he,a,ie),Ae(he,A,ie),Ae(he,F,ie),Ae(he,j,ie),Ae(he,U,ie)},p(he,ie){ie[0]&2&&h!==(h=he[1].name+"")&&dt(f,h),ie[0]&2&&_!==(_=he[1].count.toLocaleString()+"")&&dt(v,_),ie[0]&2&&P!==(P=sa[he[1].type].pl+"")&&dt(A,P),ie[0]&2&&V!==(V=he[1].parents[0].name+"")&&dt(j,V)},d(he){he&&T(f),he&&T(y),he&&T(v),he&&T(a),he&&T(A),he&&T(F),he&&T(j),he&&T(U)}}}function eI(u){let h=u[1].name+"",f,y,_=u[1].count.toLocaleString()+"",v,a,P=sa[u[1].type].pl+"",A,F,V=u[1].parents[0].name+"",j,U,he=sa[u[1].parents[0].type].name+"",ie,De;return{c(){f=ee(h),y=ee(" is one of "),v=ee(_),a=_e(),A=ee(P),F=ee(`.  \r
									It is located within `),j=ee(V),U=_e(),ie=ee(he),De=ee(".")},l(we){f=te(we,h),y=te(we," is one of "),v=te(we,_),a=be(we),A=te(we,P),F=te(we,`.  \r
									It is located within `),j=te(we,V),U=be(we),ie=te(we,he),De=te(we,".")},m(we,Ce){Ae(we,f,Ce),Ae(we,y,Ce),Ae(we,v,Ce),Ae(we,a,Ce),Ae(we,A,Ce),Ae(we,F,Ce),Ae(we,j,Ce),Ae(we,U,Ce),Ae(we,ie,Ce),Ae(we,De,Ce)},p(we,Ce){Ce[0]&2&&h!==(h=we[1].name+"")&&dt(f,h),Ce[0]&2&&_!==(_=we[1].count.toLocaleString()+"")&&dt(v,_),Ce[0]&2&&P!==(P=sa[we[1].type].pl+"")&&dt(A,P),Ce[0]&2&&V!==(V=we[1].parents[0].name+"")&&dt(j,V),Ce[0]&2&&he!==(he=sa[we[1].parents[0].type].name+"")&&dt(ie,he)},d(we){we&&T(f),we&&T(y),we&&T(v),we&&T(a),we&&T(A),we&&T(F),we&&T(j),we&&T(U),we&&T(ie),we&&T(De)}}}function H2(u){let h,f,y,_=u[1].data.population.value[2021].all/u[1].hectares>u[2].data.population.value[2021].all/u[2].hectares*1.1?"Higher than Northern Ireland value of ":u[1].data.population.value[2021].all/u[1].hectares<u[2].data.population.value[2021].all/u[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",v,a,P=(u[2].data.population.value[2021].all/u[2].hectares).toFixed(1)+"",A,F;return{c(){h=D("br"),f=_e(),y=D("span"),v=ee(_),a=_e(),A=ee(P),F=ee(" persons per hectare"),this.h()},l(V){h=M(V,"BR",{}),f=be(V),y=M(V,"SPAN",{class:!0});var j=R(y);v=te(j,_),a=be(j),A=te(j,P),F=te(j," persons per hectare"),j.forEach(T),this.h()},h(){S(y,"class","text-small")},m(V,j){Ae(V,h,j),Ae(V,f,j),Ae(V,y,j),w(y,v),w(y,a),w(y,A),w(y,F)},p(V,j){j[0]&6&&_!==(_=V[1].data.population.value[2021].all/V[1].hectares>V[2].data.population.value[2021].all/V[2].hectares*1.1?"Higher than Northern Ireland value of ":V[1].data.population.value[2021].all/V[1].hectares<V[2].data.population.value[2021].all/V[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&dt(v,_),j[0]&4&&P!==(P=(V[2].data.population.value[2021].all/V[2].hectares).toFixed(1)+"")&&dt(A,P)},d(V){V&&T(h),V&&T(f),V&&T(y)}}}function tI(u){let h,f,y,_,v,a;return{c(){h=D("br"),f=_e(),y=D("div"),_=D("h3"),v=ee("No other topics are available."),a=ee(`\r
				 Further data will be added to this app as it is released.`),this.h()},l(P){h=M(P,"BR",{}),f=be(P),y=M(P,"DIV",{class:!0});var A=R(y);_=M(A,"H3",{style:!0,class:!0});var F=R(_);v=te(F,"No other topics are available."),F.forEach(T),a=te(A,`\r
				 Further data will be added to this app as it is released.`),A.forEach(T),this.h()},h(){re(_,"margin","0 0 10px 0"),re(_,"line-height","1.78"),S(_,"class","svelte-p0yy5r"),S(y,"class","div-grey-box svelte-p0yy5r")},m(P,A){Ae(P,h,A),Ae(P,f,A),Ae(P,y,A),w(y,_),w(_,v),w(y,a)},p:Bn,i:Bn,o:Bn,d(P){P&&T(h),P&&T(f),P&&T(y)}}}function rI(u){let h,f,y,_,v,a,P,A,F,V=u[1].name+"",j,U,he,ie,De,we,Ce,Ue,At,Dt,ht,tt=" &#x24D8; ",Ar,yr,tr,wt,bt,kr,Rt,zr,Qe,ar,$r,si,wr,mt,nt,cr,ji,la,Bi,zi,li,tn,rr,Oi,Za,Ir,Bt=" &#x24D8; ",rn,mi,Zr,eo,Ut,yi,Or,bi,Gr,Vr,xi,wi,Mr,er,Pr,Yn,jn,Vn,Jn,vi,Zi=u[1].name+"",_n,to,An,is,bn,Pi,ei,nn,Qn,zn,Wr=" &#x24D8; ",N,G,H,$,oe,ve,ge,X,ne,ke,qe,Ze,ze,je,ot,st=" &#x24D8; ",Re,$e,He,et,Mt,We,qt,pr,kt,ir,Vt,Fr,Ft,_r,hr,Ht=" &#x24D8; ",lr,gi,Pn,Ei,Si,an,on,br,Gi,sn,Yr,ln,Er,ui,Vi,Ys,Ki,$n,ti,Jr,ki=u[1].name+"",ci,ro,Pa,Qu,ns,Fn,Zn,Ca,Da,go,ua,Il=" &#x24D8; ",as,Co,Fi,Ci,un,Se,Hi,Nn,Cr,ca,Ii,Nr,Ma,ys,os,jc=" &#x24D8; ",Wl,vs,ss,La,ea,ba,Zc,gs,Cn,$u,hi,cn,ri,ls,Ra,xa=" &#x24D8; ",us,Ba,xn,Xi,Di,Wi,Xt,Dn,Do,Eu,io,Js,Qs,ha,Oa,ta,ec,Mo,wn,_s,$s=u[1].name+"",Gn,hn,Tl,no,Qr,Fe,It,Ni,Kn,Al,el,bs=" &#x24D8; ",tl,pa,cs,zl,wa,Yl,rl,ao,oo,il,Lo,Ti,so,Pl,nl,tc=" &#x24D8; ",rc,hs,xs,ic,fa,al,Jl,nc,ps,ol,Ro,ra,Lr,_o,lo,sl=" &#x24D8; ",dr,Rr,Hn,ws,Ga,Es,Gc,Kc,bo,Bo,Oo,Kr,Ea,xo,_i,ft,Sa,Vo,Un,uo,Xn=u[1].name+"",Su,rt,ll,Cl,Fo,Mi,Yi,Ka,co,ka,Va,Td=" &#x24D8; ",ac,Fh,Ql,Ha,wo,or,No,Uo,da,qo,Dl,ma,Ji,jo,Et,yt,Cp=" &#x24D8; ",Fa,Xa,Mn,Ss,$l,ku,qr,ia,eu,tu,ks,ya,Ln,Iu,ho,Dp=" &#x24D8; ",Tu,oc,ru,Is,iu,nu,Ts,Ml,Hc,Eo,Zo,As,po,zs,Xc,n,s=" &#x24D8; ",o,c,m,E,k,z,B,Z,Y,J,Q,ue,le,fe,ae,me,xe,Ie,Me,Le,Oe=u[1].name+"",Ge,Je,Xe,ct,St,vt,_t,sr,lt,Nt,Gt,jt=" &#x24D8; ",Ot,Zt,Ct,Lt,pn,Ui,Ia,na,pi,En,qn,Qi,fo,Wa,Ya,Ps=" &#x24D8; ",sc,Cs,Go,Au,ul,Ko,lc,Ds,$i,cl,Ja,Na,vr,So,aa,uc=" &#x24D8; ",gf,Ll,cc,hc,zu,Rl,Wc,_f,Ms,mo,Bl,hl,pc,ry,Nh,Wv=" &#x24D8; ",bf,Uh,Pu,Ad,Ls,fc,iy,ny,Yc,ay,oy,sy,Cu,Rs,dc,Jc,qh,oa=" &#x24D8; ",Mp,Qc,Du,Lp,au,Rp,zd,jh,Mu,xf,Ol,Ho,mc,wf,Zh,ly=" &#x24D8; ",Ef,ko,Gh,uy,Kh,Sf,Pd,$c,eh,cy,Cd,hy,py,th,Vl,ou,rh,Hh,pl,ih,su,fy,yc=u[1].name+"",kf,dy,Bp,my,yy,Bs,Rn,Fl,Lu,Dd,Xh,iv=" &#x24D8; ",vy,Wh,Yh,Md,Jh,If,Qh,Ld,vc,Op,Br,fl,Io,nh,ah,Yv=" &#x24D8; ",gy,$h,ep,_y,tp,Tf,by,xy,lu,oh,Vp,nv,wy,sh,lh,Os,Ru,rp,Xo,dl,fn,Fp,uh=u[1].name+"",yo,Rd,ip,Ey,Bd,fs,Nl,Ul,uu,ch,gc,av=" &#x24D8; ",Od,np,hh,Vd,ph,Np,Sy,ky,_c,Fd,fh,Nd,dh,Af,Up,ml,ap,cu,qp,mh,zf,bc,yl,Ud,jp=u[1].name+"",qd,Iy,Zp,Gp,Pf,vl,ds,Wo,Tr,Ty,xc,Kp=" &#x24D8; ",Ay,op,sp,zy,lp,Cf,Py,jd,wc,Zd,Hp,Xp,hu,Gd,yh,Ec,en,Ur,up,Kd,Hd,Sc,ql,Df,pu=u[1].name+"",Bu,Xd,dn,cp,fu,Ua,gl,Vs,Fs,du,vh,ov=" &#x24D8; ",Cy,Sn,qi,Wd,e,t,i,l,p,d,x,I,C,L,O,q,K,W,se,ce,ye,pe,Ee,Te,Pe,Be,Ne,Ke,Ye,xt,at,zt=" &#x24D8; ",ut,Wt,Pt,gt,nr,Kt,Sr,Tt,gr,Li,ii,jr,Hr,mn,yn,va=" &#x24D8; ",qa,kn,Wn,In,Tn,fr,ni,Xr,mr,Qa,vn,Dr,Ai,Ta,xr,Ou=" &#x24D8; ",Yo,Jo,Ri,jl,vo,Vu,kc,gh,Qo,_h,_l,To,bl,Wp,Fu,Ic=" &#x24D8; ",hp,Zl,Ns,bh,Nu,xh,pp,fp,mu,Yp,dp,Gl,Uu,$o,Tc,wh,mp,Us,ms,Eh,yp=u[1].name+"",Mf,Lf,vp,Rf,Dy,Aa,fi,ga,Ac,qu,zc,sv=" &#x24D8; ",Jp,es,ju,gp,Zu,Sh,Bf,Yd,Kl,Jd,yu,xl,Gu,Qd,ja,$d=" &#x24D8; ",em,ts,_p,tm,wl,Ku,kh,Ih,El,rm,Qp,im,vu,qs,gu,_u,Th,My=" &#x24D8; ",Of,Ah,Pc,nm,zh,bp,am,xp,Cc,$p,Hu,Sl,Dc,Ly,wp,Jv=" &#x24D8; ",Ry,Ep,Sp,By,rs,Ph,om,kp,Mc,r0,Qv,ef,Vf,Lc,sm,$v,eg,tf,Rc,tg,Oy=u[1].name+"",lv,rg,lm,ig,ng,bu,Ch,Xu,Ip,ag,Ff,_w=" &#x24D8; ",og,Nf,Uf,sg,qf,Vy,lg,ug,rf,cg,Dh,Wu,Tp,hg,jf,bw=" &#x24D8; ",pg,Zf,Gf,fg,Kf,Fy,dg,mg,nf,yg,Ny,i0,js;ar=new rk({props:{data:u[1]&&u[14](["age"]),zKey:u[12]}});let Zs=!u[5]&&u[13]&&X2(u);return mt=new sk({props:{data:u[1]&&u[14](["age"]),zkey:u[12]}}),zi=new di({props:{data:u[1]&&u[14](["sex"]),zKey:u[12],label:u[13]}}),Gr=new di({props:{data:u[1]&&u[14](["hh_size"]),zKey:u[12],label:u[13]}}),ne=new di({props:{data:u[1]&&u[14](["cob"]),zKey:u[12],label:u[13]}}),kt=new di({props:{data:u[1]&&u[14](["passport"]),zKey:u[12],label:u[13]}}),Gi=new di({props:{data:u[1]&&u[14](["natid"]),zKey:u[12],label:u[13]}}),Cr=new di({props:{data:u[1]&&u[14](["mainlang"]),zKey:u[12],label:u[13]}}),Cn=new di({props:{data:u[1]&&u[14](["irish"]),zKey:u[12],label:u[13]}}),Do=new di({props:{data:u[1]&&u[14](["ulster"]),zKey:u[12],label:u[13]}}),oo=new di({props:{data:u[1]&&u[14](["religion"]),zKey:u[12],label:u[13]}}),ps=new di({props:{data:u[1]&&u[14](["religion_or_religion_brought_up_in"]),zKey:u[12],label:u[13]}}),bo=new di({props:{data:u[1]&&u[14](["ethnic"]),zKey:u[12],label:u[13]}}),qo=new di({props:{data:u[1]&&u[14](["general_health"]),zKey:u[12],label:u[13]}}),eu=new di({props:{data:u[1]&&u[14](["long_term_disability"]),zKey:u[12],label:u[13]}}),Eo=new di({props:{data:u[1]&&u[14](["number_of_long_term_health"]),zKey:u[12],label:u[13]}}),Y=new di({props:{data:u[1]&&u[14](["provision_care"]),zKey:u[12],label:u[13]}}),pi=new di({props:{data:u[1]&&u[14](["accommodation_type"]),zKey:u[12],label:u[13]}}),$i=new di({props:{data:u[1]&&u[14](["number_of_adaptations"]),zKey:u[12],label:u[13]}}),Ms=new di({props:{data:u[1]&&u[14](["central_heating"]),zKey:u[12],label:u[13]}}),Yc=new di({props:{data:u[1]&&u[14](["renewable_energy"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Mu=new di({props:{data:u[1]&&u[14](["hh_tenure"]),zKey:u[12],label:u[13]}}),eh=new di({props:{data:u[1]&&u[14](["car_or_van"]),zKey:u[12],label:u[13]}}),vc=new di({props:{data:u[1]&&u[14](["number_of_dependent_children_households"]),zKey:u[12],label:u[13]}}),lu=new di({props:{data:u[1]&&u[14](["household_composition_households"]),zKey:u[12],label:u[13]}}),_c=new di({props:{data:u[1]&&u[14](["marital_and_civil_partnership_status"]),zKey:u[12],label:u[13]}}),wc=new di({props:{data:u[1]&&u[14](["sexual_orientation_by_broad_age_band"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Pe=new di({props:{data:u[1]&&u[14](["highest_level_of_qualifications"]),zKey:u[12],label:u[13]}}),gr=new di({props:{data:u[1]&&u[14](["economic_activity"]),zKey:u[12],label:u[13]}}),mr=new di({props:{data:u[1]&&u[14](["hours_worked"]),zKey:u[12],label:u[13]}}),Qo=new di({props:{data:u[1]&&u[14](["industry_of_employment"]),zKey:u[12],label:u[13]}}),mu=new di({props:{data:u[1]&&u[14](["occupation_1_digit"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Kl=new di({props:{data:u[1]&&u[14](["method_of_travel_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),El=new di({props:{data:u[1]&&u[14](["method_of_travel_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Cc=new di({props:{data:u[1]&&u[14](["distance_travelled_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Mc=new di({props:{data:u[1]&&u[14](["distance_travelled_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),rf=new di({props:{data:u[1]&&u[14](["address_one_year_ago"]),zKey:u[12],label:u[13]}}),nf=new di({props:{data:u[1]&&u[14](["year_of_arrival"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),{c(){h=D("div"),f=D("h2"),y=D("button"),_=D("span"),v=ee("Demography"),a=_e(),P=D("div"),A=D("div"),F=ee("Census 2021 - "),j=ee(V),U=ee(" - "),he=D("span"),ie=ee("Broad age bands (years), Sex, Household size"),De=_e(),we=D("div"),Ce=D("div"),Ue=D("div"),At=D("div"),Dt=ee("Broad age bands (years) "),ht=D("span"),Ar=_e(),yr=D("div"),tr=D("div"),wt=ee(`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),bt=D("a"),kr=D("strong"),Rt=ee("Statistical bulletins"),zr=_e(),Qe=D("div"),Yt(ar.$$.fragment),$r=_e(),Zs&&Zs.c(),si=_e(),wr=D("div"),Yt(mt.$$.fragment),nt=_e(),cr=D("div"),ji=D("div"),la=ee("Sex"),Bi=_e(),Yt(zi.$$.fragment),li=_e(),tn=D("div"),rr=D("div"),Oi=D("div"),Za=ee("Household size"),Ir=D("span"),rn=_e(),mi=D("div"),Zr=D("div"),eo=ee("The number of usual residents in the household.      "),Ut=D("a"),yi=D("strong"),Or=ee("Statistical bulletins"),bi=_e(),Yt(Gr.$$.fragment),xi=_e(),wi=D("div"),Mr=D("h2"),er=D("button"),Pr=D("span"),Yn=ee("Country of Birth & Nationality"),jn=_e(),Vn=D("div"),Jn=D("div"),vi=ee("Census 2021 - "),_n=ee(Zi),to=ee(" - "),An=D("span"),is=ee(`Country of birth, Passport(s) held, National identity (person based)\r
\r
					`),bn=D("div"),Pi=D("div"),ei=D("div"),nn=D("div"),Qn=ee("Country of birth"),zn=D("span"),N=_e(),G=D("div"),H=D("div"),$=ee("The country in which a person was born. "),oe=D("a"),ve=D("strong"),ge=ee("Statistical bulletins"),X=_e(),Yt(ne.$$.fragment),ke=_e(),qe=D("div"),Ze=D("div"),ze=D("div"),je=ee("Passport(s) held"),ot=D("span"),Re=_e(),$e=D("div"),He=D("div"),et=ee("Passport or passports that an individual holds. "),Mt=D("a"),We=D("strong"),qt=ee("Statistical bulletins"),pr=_e(),Yt(kt.$$.fragment),ir=_e(),Vt=D("div"),Fr=D("div"),Ft=D("div"),_r=ee("National identity (person based)"),hr=D("span"),lr=_e(),gi=D("div"),Pn=D("div"),Ei=ee(`The nationality or nationalities that the person\r
									identifies with. `),Si=D("a"),an=D("strong"),on=ee("Statistical bulletins"),br=_e(),Yt(Gi.$$.fragment),Yr=_e(),ln=D("div"),Er=D("h2"),ui=D("button"),Vi=D("span"),Ys=ee("Language"),Ki=_e(),$n=D("div"),ti=D("div"),Jr=ee("Census 2021 - "),ci=ee(ki),ro=ee(" - "),Pa=D("span"),Qu=ee("Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),ns=_e(),Fn=D("div"),Zn=D("div"),Ca=D("div"),Da=D("div"),go=ee("Main language"),ua=D("span"),as=_e(),Co=D("div"),Fi=D("div"),Ci=ee(`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),un=D("a"),Se=D("strong"),Hi=ee("Statistical bulletins"),Nn=_e(),Yt(Cr.$$.fragment),ca=_e(),Ii=D("div"),Nr=D("div"),Ma=D("div"),ys=ee("Knowledge of Irish"),os=D("span"),Wl=_e(),vs=D("div"),ss=D("div"),La=ee(`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),ea=D("a"),ba=D("strong"),Zc=ee("Statistical bulletins"),gs=_e(),Yt(Cn.$$.fragment),$u=_e(),hi=D("div"),cn=D("div"),ri=D("div"),ls=ee("Knowledge of Ulster-Scots"),Ra=D("span"),us=_e(),Ba=D("div"),xn=D("div"),Xi=ee(`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Di=D("a"),Wi=D("strong"),Xt=ee("Statistical bulletins"),Dn=_e(),Yt(Do.$$.fragment),io=_e(),Js=D("div"),Qs=D("h2"),ha=D("button"),Oa=D("span"),ta=ee("Religion & Ethnicity"),ec=_e(),Mo=D("div"),wn=D("div"),_s=ee("Census 2021 - "),Gn=ee($s),hn=ee(" - "),Tl=D("span"),no=ee("Religion, Religion or religion brought up in, Ethnic group"),Qr=_e(),Fe=D("div"),It=D("div"),Ni=D("div"),Kn=D("div"),Al=ee("Religion"),el=D("span"),tl=_e(),pa=D("div"),cs=D("div"),zl=ee(`Religion, religious denomination or body the person\r
									indicated they belong to. `),wa=D("a"),Yl=D("strong"),rl=ee("Statistical bulletins"),ao=_e(),Yt(oo.$$.fragment),il=_e(),Lo=D("div"),Ti=D("div"),so=D("div"),Pl=ee("Religion, Religion brought up"),nl=D("span"),rc=_e(),hs=D("div"),xs=D("div"),ic=ee("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),fa=D("a"),al=D("strong"),Jl=ee("Statistical bulletins"),nc=_e(),Yt(ps.$$.fragment),ol=_e(),Ro=D("div"),ra=D("div"),Lr=D("div"),_o=ee("Ethnic group"),lo=D("span"),dr=_e(),Rr=D("div"),Hn=D("div"),ws=ee("Person\u2019s ethnic group as declared in the Census. "),Ga=D("a"),Es=D("strong"),Gc=ee("Statistical bulletins"),Kc=_e(),Yt(bo.$$.fragment),Oo=_e(),Kr=D("div"),Ea=D("h2"),xo=D("button"),_i=D("span"),ft=ee("Health & Care"),Sa=_e(),Vo=D("div"),Un=D("div"),uo=ee("Census 2021 - "),Su=ee(Xn),rt=ee(" - "),ll=D("span"),Cl=ee("General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Fo=_e(),Mi=D("div"),Yi=D("div"),Ka=D("div"),co=D("div"),ka=ee("General health"),Va=D("span"),ac=D("br"),Fh=_e(),Ql=D("div"),Ha=D("div"),wo=ee(`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),or=D("a"),No=D("strong"),Uo=ee("Statistical bulletins"),da=_e(),Yt(qo.$$.fragment),Dl=_e(),ma=D("div"),Ji=D("div"),jo=D("div"),Et=ee("Long-term health problem or disability"),yt=D("span"),Fa=_e(),Xa=D("div"),Mn=D("div"),Ss=ee("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),$l=D("a"),ku=D("strong"),qr=ee("Statistical bulletins"),ia=_e(),Yt(eu.$$.fragment),tu=_e(),ks=D("div"),ya=D("div"),Ln=D("div"),Iu=ee("Long-term health conditions"),ho=D("span"),Tu=D("br"),oc=_e(),ru=D("div"),Is=D("div"),iu=ee(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),nu=D("a"),Ts=D("strong"),Ml=ee("Statistical bulletins"),Hc=_e(),Yt(Eo.$$.fragment),Zo=_e(),As=D("div"),po=D("div"),zs=D("div"),Xc=ee("Unpaid care"),n=D("span"),o=_e(),c=D("div"),m=D("div"),E=ee(`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),k=D("a"),z=D("strong"),B=ee("Statistical bulletins"),Z=_e(),Yt(Y.$$.fragment),Q=_e(),ue=D("div"),le=D("h2"),fe=D("button"),ae=D("span"),me=ee("Housing & Accommodation"),xe=_e(),Ie=D("div"),Me=D("div"),Le=ee("Census 2021 - "),Ge=ee(Oe),Je=ee(" - "),Xe=D("span"),ct=ee("Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),St=_e(),vt=D("div"),_t=D("div"),sr=D("div"),lt=D("div"),Nt=ee("Accommodation type"),Gt=D("span"),Ot=_e(),Zt=D("div"),Ct=D("div"),Lt=ee("The type of accommodation occupied by a household. "),pn=D("a"),Ui=D("strong"),Ia=ee("Statistical bulletins"),na=_e(),Yt(pi.$$.fragment),En=_e(),qn=D("div"),Qi=D("div"),fo=D("div"),Wa=ee("Household adaptations"),Ya=D("span"),sc=_e(),Cs=D("div"),Go=D("div"),Au=ee(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),ul=D("a"),Ko=D("strong"),lc=ee("Statistical bulletins"),Ds=_e(),Yt($i.$$.fragment),cl=_e(),Ja=D("div"),Na=D("div"),vr=D("div"),So=ee("Central heating"),aa=D("span"),gf=_e(),Ll=D("div"),cc=D("div"),hc=ee(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),zu=D("a"),Rl=D("strong"),Wc=ee("Statistical bulletins"),_f=_e(),Yt(Ms.$$.fragment),mo=_e(),Bl=D("div"),hl=D("div"),pc=D("div"),ry=ee("Renewable energy systems"),Nh=D("span"),bf=_e(),Uh=D("div"),Pu=D("div"),Ad=ee(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),Ls=D("a"),fc=D("strong"),iy=ee("Statistical bulletins"),ny=_e(),Yt(Yc.$$.fragment),ay=_e(),oy=D("br"),sy=_e(),Cu=D("div"),Rs=D("div"),dc=D("div"),Jc=ee("Household tenure"),qh=D("span"),Mp=_e(),Qc=D("div"),Du=D("div"),Lp=ee(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),au=D("a"),Rp=D("strong"),zd=ee("Statistical bulletins"),jh=_e(),Yt(Mu.$$.fragment),xf=_e(),Ol=D("div"),Ho=D("div"),mc=D("div"),wf=ee("Car or van availability"),Zh=D("span"),Ef=_e(),ko=D("div"),Gh=D("div"),uy=ee(`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),Kh=D("a"),Sf=D("strong"),Pd=ee("Statistical bulletins"),$c=_e(),Yt(eh.$$.fragment),cy=_e(),Cd=D("br"),py=_e(),th=D("div"),Vl=D("h2"),ou=D("button"),rh=D("span"),Hh=ee("Household Structure"),pl=_e(),ih=D("div"),su=D("div"),fy=ee("Census 2021 - "),kf=ee(yc),dy=ee(" - "),Bp=D("span"),my=ee("Number of dependent children, Household composition"),yy=_e(),Bs=D("div"),Rn=D("div"),Fl=D("div"),Lu=D("div"),Dd=ee("Number of dependent children"),Xh=D("span"),vy=_e(),Wh=D("div"),Yh=D("div"),Md=ee("Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),Jh=D("a"),If=D("strong"),Qh=ee("Statistical bulletins"),Ld=_e(),Yt(vc.$$.fragment),Op=_e(),Br=D("div"),fl=D("div"),Io=D("div"),nh=ee("Household composition"),ah=D("span"),gy=_e(),$h=D("div"),ep=D("div"),_y=ee(`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),tp=D("a"),Tf=D("strong"),by=ee("Statistical bulletins"),xy=_e(),Yt(lu.$$.fragment),oh=_e(),Vp=D("div"),wy=_e(),sh=D("div"),lh=D("h2"),Os=D("button"),Ru=D("span"),rp=ee("Marital & Civil Partnership Status"),Xo=_e(),dl=D("div"),fn=D("div"),Fp=ee("Census 2021 - "),yo=ee(uh),Rd=ee(" - "),ip=D("span"),Ey=ee("Marital and civil partnership status"),Bd=_e(),fs=D("div"),Nl=D("div"),Ul=D("div"),uu=D("div"),ch=ee("Marital and civil partnership status"),gc=D("span"),Od=_e(),np=D("div"),hh=D("div"),Vd=ee("Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),ph=D("a"),Np=D("strong"),Sy=ee("Statistical bulletins"),ky=_e(),Yt(_c.$$.fragment),Fd=_e(),fh=D("div"),Nd=_e(),dh=D("div"),Up=_e(),ml=D("div"),ap=D("h2"),cu=D("button"),qp=D("span"),mh=ee("Sexual Orientation"),zf=_e(),bc=D("div"),yl=D("div"),Ud=ee("Census 2021 - "),qd=ee(jp),Iy=ee(" - "),Zp=D("span"),Gp=ee("Sexual orientation"),Pf=_e(),vl=D("div"),ds=D("div"),Wo=D("div"),Tr=D("div"),Ty=ee("Sexual orientation"),xc=D("span"),Ay=_e(),op=D("div"),sp=D("div"),zy=ee("Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),lp=D("a"),Cf=D("strong"),Py=ee("Statistical bulletins"),jd=_e(),Yt(wc.$$.fragment),Zd=_e(),Hp=D("div"),Xp=_e(),hu=D("div"),yh=_e(),Ec=D("div"),en=D("h2"),Ur=D("button"),up=D("span"),Kd=ee("Labour Market & Qualifications"),Hd=_e(),Sc=D("div"),ql=D("div"),Df=ee("Census 2021 - "),Bu=ee(pu),Xd=ee(" - "),dn=D("span"),cp=ee("Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),fu=_e(),Ua=D("div"),gl=D("div"),Vs=D("div"),Fs=D("div"),du=ee("Highest level of qualifications"),vh=D("span"),Cy=_e(),Sn=D("div"),qi=D("div"),Wd=ee(`The highest level of qualification categories are as follows:\r
										`),e=D("br"),t=ee(`\r
                                        \u2022 No qualifications;\r
										`),i=D("br"),l=ee(`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),p=D("br"),d=ee(`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),x=D("br"),I=ee(`\r
                                        \u2022 Apprenticeship;\r
										`),C=D("br"),L=ee(`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),O=D("br"),q=ee(`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),K=D("br"),W=ee(`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),se=D("br"),ce=ee(`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),ye=D("a"),pe=D("strong"),Ee=ee("Statistical bulletins"),Te=_e(),Yt(Pe.$$.fragment),Be=_e(),Ne=D("div"),Ke=D("div"),Ye=D("div"),xt=ee("Economic activity"),at=D("span"),ut=_e(),Wt=D("div"),Pt=D("div"),gt=ee("Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),nr=D("a"),Kt=D("strong"),Sr=ee("Statistical bulletins"),Tt=_e(),Yt(gr.$$.fragment),Li=_e(),ii=D("div"),jr=D("div"),Hr=D("div"),mn=ee("Hours worked per week"),yn=D("span"),qa=_e(),kn=D("div"),Wn=D("div"),In=ee("The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),Tn=D("a"),fr=D("strong"),ni=ee("Statistical bulletins"),Xr=_e(),Yt(mr.$$.fragment),Qa=_e(),vn=D("div"),Dr=D("div"),Ai=D("div"),Ta=ee("Industry of employment"),xr=D("span"),Yo=_e(),Jo=D("div"),Ri=D("div"),jl=ee("The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),vo=D("a"),Vu=D("strong"),kc=ee("Statistical bulletins"),gh=_e(),Yt(Qo.$$.fragment),_h=_e(),_l=D("div"),To=D("div"),bl=D("div"),Wp=ee("Occupation"),Fu=D("span"),hp=_e(),Zl=D("div"),Ns=D("div"),bh=ee("The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),Nu=D("a"),xh=D("strong"),pp=ee("Statistical bulletins"),fp=_e(),Yt(mu.$$.fragment),dp=_e(),Gl=D("div"),Uu=D("h2"),$o=D("button"),Tc=D("span"),wh=ee("Travel to Work or Study"),mp=_e(),Us=D("div"),ms=D("div"),Eh=ee("Census 2021 - "),Mf=ee(yp),Lf=ee(" - "),vp=D("span"),Rf=ee("Method of travel to work or study, Distance to place of work or study"),Dy=_e(),Aa=D("div"),fi=D("div"),ga=D("div"),Ac=D("div"),qu=ee("Method of travel to work"),zc=D("span"),Jp=_e(),es=D("div"),ju=D("div"),gp=ee(`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),Zu=D("a"),Sh=D("strong"),Bf=ee("Statistical bulletins"),Yd=_e(),Yt(Kl.$$.fragment),Jd=_e(),yu=D("div"),xl=D("div"),Gu=D("div"),Qd=ee("Method of travel to study"),ja=D("span"),em=_e(),ts=D("div"),_p=D("div"),tm=ee(`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),wl=D("a"),Ku=D("strong"),kh=ee("Statistical bulletins"),Ih=_e(),Yt(El.$$.fragment),rm=_e(),Qp=D("div"),im=_e(),vu=D("div"),qs=D("div"),gu=D("div"),_u=ee("Distance to place of work"),Th=D("span"),Of=_e(),Ah=D("div"),Pc=D("div"),nm=ee("The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),zh=D("a"),bp=D("strong"),am=ee("Statistical bulletins"),xp=_e(),Yt(Cc.$$.fragment),$p=_e(),Hu=D("div"),Sl=D("div"),Dc=D("div"),Ly=ee("Distance to place of study"),wp=D("span"),Ry=_e(),Ep=D("div"),Sp=D("div"),By=ee("The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),rs=D("a"),Ph=D("strong"),om=ee("Statistical bulletins"),kp=_e(),Yt(Mc.$$.fragment),Qv=_e(),ef=D("div"),Vf=D("h2"),Lc=D("button"),sm=D("span"),$v=ee("Migration"),eg=_e(),tf=D("div"),Rc=D("div"),tg=ee("Census 2021 - "),lv=ee(Oy),rg=ee(" - "),lm=D("span"),ig=ee("Address one year ago, Year of arrival to live in NI"),ng=_e(),bu=D("div"),Ch=D("div"),Xu=D("div"),Ip=D("div"),ag=ee("Address one year ago"),Ff=D("span"),og=_e(),Nf=D("div"),Uf=D("div"),sg=ee("Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),qf=D("a"),Vy=D("strong"),lg=ee("Statistical bulletins"),ug=_e(),Yt(rf.$$.fragment),cg=_e(),Dh=D("div"),Wu=D("div"),Tp=D("div"),hg=ee("Year of arrival to live in NI"),jf=D("span"),pg=_e(),Zf=D("div"),Gf=D("div"),fg=ee("The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Kf=D("a"),Fy=D("strong"),dg=ee("Statistical bulletins"),mg=_e(),Yt(nf.$$.fragment),yg=_e(),Ny=D("div"),this.h()},l(de){h=M(de,"DIV",{class:!0});var Ve=R(h);f=M(Ve,"H2",{class:!0,id:!0});var um=R(f);y=M(um,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var cm=R(y);_=M(cm,"SPAN",{class:!0});var Hf=R(_);v=te(Hf,"Demography"),Hf.forEach(T),cm.forEach(T),um.forEach(T),a=be(Ve),P=M(Ve,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Xf=R(P);A=M(Xf,"DIV",{class:!0});var Yu=R(A);F=te(Yu,"Census 2021 - "),j=te(Yu,V),U=te(Yu," - "),he=M(Yu,"SPAN",{class:!0});var Wf=R(he);ie=te(Wf,"Broad age bands (years), Sex, Household size"),Wf.forEach(T),De=be(Yu),we=M(Yu,"DIV",{class:!0});var Bc=R(we);Ce=M(Bc,"DIV",{class:!0});var kl=R(Ce);Ue=M(kl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Yf=R(Ue);At=M(Yf,"DIV",{class:!0,style:!0});var af=R(At);Dt=te(af,"Broad age bands (years) "),ht=M(af,"SPAN",{style:!0});var hm=R(ht);hm.forEach(T),af.forEach(T),Yf.forEach(T),Ar=be(kl),yr=M(kl,"DIV",{class:!0,id:!0});var Jf=R(yr);tr=M(Jf,"DIV",{class:!0});var of=R(tr);wt=te(of,`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),bt=M(of,"A",{href:!0,class:!0});var Qf=R(bt);kr=M(Qf,"STRONG",{});var $f=R(kr);Rt=te($f,"Statistical bulletins"),$f.forEach(T),Qf.forEach(T),of.forEach(T),Jf.forEach(T),zr=be(kl),Qe=M(kl,"DIV",{class:!0,style:!0});var ed=R(Qe);Jt(ar.$$.fragment,ed),ed.forEach(T),$r=be(kl),Zs&&Zs.l(kl),si=be(kl),wr=M(kl,"DIV",{});var td=R(wr);Jt(mt.$$.fragment,td),td.forEach(T),kl.forEach(T),nt=be(Bc),cr=M(Bc,"DIV",{class:!0});var Ap=R(cr);ji=M(Ap,"DIV",{class:!0,style:!0});var rd=R(ji);la=te(rd,"Sex"),rd.forEach(T),Bi=be(Ap),Jt(zi.$$.fragment,Ap),Ap.forEach(T),li=be(Bc),tn=M(Bc,"DIV",{class:!0});var Oc=R(tn);rr=M(Oc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var id=R(rr);Oi=M(id,"DIV",{class:!0,style:!0});var sf=R(Oi);Za=te(sf,"Household size"),Ir=M(sf,"SPAN",{style:!0});var pm=R(Ir);pm.forEach(T),sf.forEach(T),id.forEach(T),rn=be(Oc),mi=M(Oc,"DIV",{class:!0,id:!0});var nd=R(mi);Zr=M(nd,"DIV",{class:!0});var lf=R(Zr);eo=te(lf,"The number of usual residents in the household.      "),Ut=M(lf,"A",{href:!0,class:!0});var ad=R(Ut);yi=M(ad,"STRONG",{});var od=R(yi);Or=te(od,"Statistical bulletins"),od.forEach(T),ad.forEach(T),lf.forEach(T),nd.forEach(T),bi=be(Oc),Jt(Gr.$$.fragment,Oc),Oc.forEach(T),Bc.forEach(T),Yu.forEach(T),Xf.forEach(T),xi=be(Ve),wi=M(Ve,"DIV",{class:!0});var zp=R(wi);Mr=M(zp,"H2",{class:!0,id:!0});var sd=R(Mr);er=M(sd,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ld=R(er);Pr=M(ld,"SPAN",{class:!0});var ud=R(Pr);Yn=te(ud,"Country of Birth & Nationality"),ud.forEach(T),ld.forEach(T),sd.forEach(T),jn=be(zp),Vn=M(zp,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var cd=R(Vn);Jn=M(cd,"DIV",{class:!0});var Mh=R(Jn);vi=te(Mh,"Census 2021 - "),_n=te(Mh,Zi),to=te(Mh," - "),An=M(Mh,"SPAN",{class:!0});var uf=R(An);is=te(uf,`Country of birth, Passport(s) held, National identity (person based)\r
\r
					`),bn=M(uf,"DIV",{class:!0});var Vc=R(bn);Pi=M(Vc,"DIV",{class:!0});var Fc=R(Pi);ei=M(Fc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var hd=R(ei);nn=M(hd,"DIV",{class:!0,style:!0});var cf=R(nn);Qn=te(cf,"Country of birth"),zn=M(cf,"SPAN",{style:!0});var xw=R(zn);xw.forEach(T),cf.forEach(T),hd.forEach(T),N=be(Fc),G=M(Fc,"DIV",{class:!0,id:!0});var n0=R(G);H=M(n0,"DIV",{class:!0});var vg=R(H);$=te(vg,"The country in which a person was born. "),oe=M(vg,"A",{href:!0,class:!0});var a0=R(oe);ve=M(a0,"STRONG",{});var o0=R(ve);ge=te(o0,"Statistical bulletins"),o0.forEach(T),a0.forEach(T),vg.forEach(T),n0.forEach(T),X=be(Fc),Jt(ne.$$.fragment,Fc),Fc.forEach(T),ke=be(Vc),qe=M(Vc,"DIV",{class:!0});var fm=R(qe);Ze=M(fm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var s0=R(Ze);ze=M(s0,"DIV",{class:!0,style:!0});var gg=R(ze);je=te(gg,"Passport(s) held"),ot=M(gg,"SPAN",{style:!0});var ww=R(ot);ww.forEach(T),gg.forEach(T),s0.forEach(T),Re=be(fm),$e=M(fm,"DIV",{class:!0,id:!0});var l0=R($e);He=M(l0,"DIV",{class:!0});var _g=R(He);et=te(_g,"Passport or passports that an individual holds. "),Mt=M(_g,"A",{href:!0,class:!0});var u0=R(Mt);We=M(u0,"STRONG",{});var c0=R(We);qt=te(c0,"Statistical bulletins"),c0.forEach(T),u0.forEach(T),_g.forEach(T),l0.forEach(T),pr=be(fm),Jt(kt.$$.fragment,fm),fm.forEach(T),ir=be(Vc),Vt=M(Vc,"DIV",{class:!0});var dm=R(Vt);Fr=M(dm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var h0=R(Fr);Ft=M(h0,"DIV",{class:!0,style:!0});var bg=R(Ft);_r=te(bg,"National identity (person based)"),hr=M(bg,"SPAN",{style:!0});var Ew=R(hr);Ew.forEach(T),bg.forEach(T),h0.forEach(T),lr=be(dm),gi=M(dm,"DIV",{class:!0,id:!0});var p0=R(gi);Pn=M(p0,"DIV",{class:!0});var xg=R(Pn);Ei=te(xg,`The nationality or nationalities that the person\r
									identifies with. `),Si=M(xg,"A",{href:!0,class:!0});var f0=R(Si);an=M(f0,"STRONG",{});var d0=R(an);on=te(d0,"Statistical bulletins"),d0.forEach(T),f0.forEach(T),xg.forEach(T),p0.forEach(T),br=be(dm),Jt(Gi.$$.fragment,dm),dm.forEach(T),Vc.forEach(T),uf.forEach(T),Mh.forEach(T),cd.forEach(T),zp.forEach(T),Yr=be(Ve),ln=M(Ve,"DIV",{class:!0});var uv=R(ln);Er=M(uv,"H2",{class:!0,id:!0});var m0=R(Er);ui=M(m0,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var y0=R(ui);Vi=M(y0,"SPAN",{class:!0});var v0=R(Vi);Ys=te(v0,"Language"),v0.forEach(T),y0.forEach(T),m0.forEach(T),Ki=be(uv),$n=M(uv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var g0=R($n);ti=M(g0,"DIV",{class:!0});var pd=R(ti);Jr=te(pd,"Census 2021 - "),ci=te(pd,ki),ro=te(pd," - "),Pa=M(pd,"SPAN",{class:!0});var _0=R(Pa);Qu=te(_0,"Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),_0.forEach(T),ns=be(pd),Fn=M(pd,"DIV",{class:!0});var mm=R(Fn);Zn=M(mm,"DIV",{class:!0});var ym=R(Zn);Ca=M(ym,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var b0=R(Ca);Da=M(b0,"DIV",{class:!0,style:!0});var wg=R(Da);go=te(wg,"Main language"),ua=M(wg,"SPAN",{style:!0});var Sw=R(ua);Sw.forEach(T),wg.forEach(T),b0.forEach(T),as=be(ym),Co=M(ym,"DIV",{class:!0,id:!0});var x0=R(Co);Fi=M(x0,"DIV",{class:!0});var Eg=R(Fi);Ci=te(Eg,`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),un=M(Eg,"A",{href:!0,class:!0});var w0=R(un);Se=M(w0,"STRONG",{});var E0=R(Se);Hi=te(E0,"Statistical bulletins"),E0.forEach(T),w0.forEach(T),Eg.forEach(T),x0.forEach(T),Nn=be(ym),Jt(Cr.$$.fragment,ym),ym.forEach(T),ca=be(mm),Ii=M(mm,"DIV",{class:!0});var vm=R(Ii);Nr=M(vm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var S0=R(Nr);Ma=M(S0,"DIV",{class:!0,style:!0});var Sg=R(Ma);ys=te(Sg,"Knowledge of Irish"),os=M(Sg,"SPAN",{style:!0});var kw=R(os);kw.forEach(T),Sg.forEach(T),S0.forEach(T),Wl=be(vm),vs=M(vm,"DIV",{class:!0,id:!0});var k0=R(vs);ss=M(k0,"DIV",{class:!0});var kg=R(ss);La=te(kg,`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),ea=M(kg,"A",{href:!0,class:!0});var I0=R(ea);ba=M(I0,"STRONG",{});var T0=R(ba);Zc=te(T0,"Statistical bulletins"),T0.forEach(T),I0.forEach(T),kg.forEach(T),k0.forEach(T),gs=be(vm),Jt(Cn.$$.fragment,vm),vm.forEach(T),$u=be(mm),hi=M(mm,"DIV",{class:!0});var gm=R(hi);cn=M(gm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var A0=R(cn);ri=M(A0,"DIV",{class:!0,style:!0});var Ig=R(ri);ls=te(Ig,"Knowledge of Ulster-Scots"),Ra=M(Ig,"SPAN",{style:!0});var Iw=R(Ra);Iw.forEach(T),Ig.forEach(T),A0.forEach(T),us=be(gm),Ba=M(gm,"DIV",{class:!0,id:!0});var z0=R(Ba);xn=M(z0,"DIV",{class:!0});var Tg=R(xn);Xi=te(Tg,`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Di=M(Tg,"A",{href:!0,class:!0});var P0=R(Di);Wi=M(P0,"STRONG",{});var C0=R(Wi);Xt=te(C0,"Statistical bulletins"),C0.forEach(T),P0.forEach(T),Tg.forEach(T),z0.forEach(T),Dn=be(gm),Jt(Do.$$.fragment,gm),gm.forEach(T),mm.forEach(T),pd.forEach(T),g0.forEach(T),uv.forEach(T),io=be(Ve),Js=M(Ve,"DIV",{class:!0});var cv=R(Js);Qs=M(cv,"H2",{class:!0,id:!0});var D0=R(Qs);ha=M(D0,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M0=R(ha);Oa=M(M0,"SPAN",{class:!0});var L0=R(Oa);ta=te(L0,"Religion & Ethnicity"),L0.forEach(T),M0.forEach(T),D0.forEach(T),ec=be(cv),Mo=M(cv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var R0=R(Mo);wn=M(R0,"DIV",{class:!0});var fd=R(wn);_s=te(fd,"Census 2021 - "),Gn=te(fd,$s),hn=te(fd," - "),Tl=M(fd,"SPAN",{class:!0});var B0=R(Tl);no=te(B0,"Religion, Religion or religion brought up in, Ethnic group"),B0.forEach(T),Qr=be(fd),Fe=M(fd,"DIV",{class:!0});var _m=R(Fe);It=M(_m,"DIV",{class:!0});var bm=R(It);Ni=M(bm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var O0=R(Ni);Kn=M(O0,"DIV",{class:!0,style:!0});var Ag=R(Kn);Al=te(Ag,"Religion"),el=M(Ag,"SPAN",{style:!0});var Tw=R(el);Tw.forEach(T),Ag.forEach(T),O0.forEach(T),tl=be(bm),pa=M(bm,"DIV",{class:!0,id:!0});var V0=R(pa);cs=M(V0,"DIV",{class:!0});var zg=R(cs);zl=te(zg,`Religion, religious denomination or body the person\r
									indicated they belong to. `),wa=M(zg,"A",{href:!0,class:!0});var F0=R(wa);Yl=M(F0,"STRONG",{});var N0=R(Yl);rl=te(N0,"Statistical bulletins"),N0.forEach(T),F0.forEach(T),zg.forEach(T),V0.forEach(T),ao=be(bm),Jt(oo.$$.fragment,bm),bm.forEach(T),il=be(_m),Lo=M(_m,"DIV",{class:!0});var xm=R(Lo);Ti=M(xm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var U0=R(Ti);so=M(U0,"DIV",{class:!0,style:!0});var Pg=R(so);Pl=te(Pg,"Religion, Religion brought up"),nl=M(Pg,"SPAN",{style:!0});var Aw=R(nl);Aw.forEach(T),Pg.forEach(T),U0.forEach(T),rc=be(xm),hs=M(xm,"DIV",{class:!0,id:!0});var q0=R(hs);xs=M(q0,"DIV",{class:!0});var Cg=R(xs);ic=te(Cg,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),fa=M(Cg,"A",{href:!0,class:!0});var j0=R(fa);al=M(j0,"STRONG",{});var Z0=R(al);Jl=te(Z0,"Statistical bulletins"),Z0.forEach(T),j0.forEach(T),Cg.forEach(T),q0.forEach(T),nc=be(xm),Jt(ps.$$.fragment,xm),xm.forEach(T),ol=be(_m),Ro=M(_m,"DIV",{class:!0});var wm=R(Ro);ra=M(wm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var G0=R(ra);Lr=M(G0,"DIV",{class:!0,style:!0});var Dg=R(Lr);_o=te(Dg,"Ethnic group"),lo=M(Dg,"SPAN",{style:!0});var zw=R(lo);zw.forEach(T),Dg.forEach(T),G0.forEach(T),dr=be(wm),Rr=M(wm,"DIV",{class:!0,id:!0});var K0=R(Rr);Hn=M(K0,"DIV",{class:!0});var Mg=R(Hn);ws=te(Mg,"Person\u2019s ethnic group as declared in the Census. "),Ga=M(Mg,"A",{href:!0,class:!0});var H0=R(Ga);Es=M(H0,"STRONG",{});var X0=R(Es);Gc=te(X0,"Statistical bulletins"),X0.forEach(T),H0.forEach(T),Mg.forEach(T),K0.forEach(T),Kc=be(wm),Jt(bo.$$.fragment,wm),wm.forEach(T),_m.forEach(T),fd.forEach(T),R0.forEach(T),cv.forEach(T),Oo=be(Ve),Kr=M(Ve,"DIV",{class:!0});var hv=R(Kr);Ea=M(hv,"H2",{class:!0,id:!0});var W0=R(Ea);xo=M(W0,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Y0=R(xo);_i=M(Y0,"SPAN",{class:!0});var J0=R(_i);ft=te(J0,"Health & Care"),J0.forEach(T),Y0.forEach(T),W0.forEach(T),Sa=be(hv),Vo=M(hv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Q0=R(Vo);Un=M(Q0,"DIV",{class:!0});var dd=R(Un);uo=te(dd,"Census 2021 - "),Su=te(dd,Xn),rt=te(dd," - "),ll=M(dd,"SPAN",{class:!0});var $0=R(ll);Cl=te($0,"General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),$0.forEach(T),Fo=be(dd),Mi=M(dd,"DIV",{class:!0});var hf=R(Mi);Yi=M(hf,"DIV",{class:!0});var Em=R(Yi);Ka=M(Em,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var e1=R(Ka);co=M(e1,"DIV",{class:!0,style:!0});var pv=R(co);ka=te(pv,"General health"),Va=M(pv,"SPAN",{style:!0});var Pw=R(Va);Pw.forEach(T),ac=M(pv,"BR",{}),pv.forEach(T),e1.forEach(T),Fh=be(Em),Ql=M(Em,"DIV",{class:!0,id:!0});var t1=R(Ql);Ha=M(t1,"DIV",{class:!0});var Lg=R(Ha);wo=te(Lg,`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),or=M(Lg,"A",{href:!0,class:!0});var r1=R(or);No=M(r1,"STRONG",{});var i1=R(No);Uo=te(i1,"Statistical bulletins"),i1.forEach(T),r1.forEach(T),Lg.forEach(T),t1.forEach(T),da=be(Em),Jt(qo.$$.fragment,Em),Em.forEach(T),Dl=be(hf),ma=M(hf,"DIV",{class:!0});var Sm=R(ma);Ji=M(Sm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var n1=R(Ji);jo=M(n1,"DIV",{class:!0,style:!0});var Rg=R(jo);Et=te(Rg,"Long-term health problem or disability"),yt=M(Rg,"SPAN",{style:!0});var Cw=R(yt);Cw.forEach(T),Rg.forEach(T),n1.forEach(T),Fa=be(Sm),Xa=M(Sm,"DIV",{class:!0,id:!0});var a1=R(Xa);Mn=M(a1,"DIV",{class:!0});var Bg=R(Mn);Ss=te(Bg,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),$l=M(Bg,"A",{href:!0,class:!0});var o1=R($l);ku=M(o1,"STRONG",{});var s1=R(ku);qr=te(s1,"Statistical bulletins"),s1.forEach(T),o1.forEach(T),Bg.forEach(T),a1.forEach(T),ia=be(Sm),Jt(eu.$$.fragment,Sm),Sm.forEach(T),tu=be(hf),ks=M(hf,"DIV",{class:!0});var km=R(ks);ya=M(km,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var l1=R(ya);Ln=M(l1,"DIV",{class:!0,style:!0});var fv=R(Ln);Iu=te(fv,"Long-term health conditions"),ho=M(fv,"SPAN",{style:!0});var Dw=R(ho);Dw.forEach(T),Tu=M(fv,"BR",{}),fv.forEach(T),l1.forEach(T),oc=be(km),ru=M(km,"DIV",{class:!0,id:!0});var u1=R(ru);Is=M(u1,"DIV",{class:!0});var Og=R(Is);iu=te(Og,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),nu=M(Og,"A",{href:!0,class:!0});var c1=R(nu);Ts=M(c1,"STRONG",{});var h1=R(Ts);Ml=te(h1,"Statistical bulletins"),h1.forEach(T),c1.forEach(T),Og.forEach(T),u1.forEach(T),Hc=be(km),Jt(Eo.$$.fragment,km),km.forEach(T),Zo=be(hf),As=M(hf,"DIV",{class:!0});var Im=R(As);po=M(Im,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var p1=R(po);zs=M(p1,"DIV",{class:!0,style:!0});var Vg=R(zs);Xc=te(Vg,"Unpaid care"),n=M(Vg,"SPAN",{style:!0});var Mw=R(n);Mw.forEach(T),Vg.forEach(T),p1.forEach(T),o=be(Im),c=M(Im,"DIV",{class:!0,id:!0});var f1=R(c);m=M(f1,"DIV",{class:!0});var Fg=R(m);E=te(Fg,`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),k=M(Fg,"A",{href:!0,class:!0});var d1=R(k);z=M(d1,"STRONG",{});var m1=R(z);B=te(m1,"Statistical bulletins"),m1.forEach(T),d1.forEach(T),Fg.forEach(T),f1.forEach(T),Z=be(Im),Jt(Y.$$.fragment,Im),Im.forEach(T),hf.forEach(T),dd.forEach(T),Q0.forEach(T),hv.forEach(T),Q=be(Ve),ue=M(Ve,"DIV",{class:!0});var dv=R(ue);le=M(dv,"H2",{class:!0,id:!0});var y1=R(le);fe=M(y1,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var v1=R(fe);ae=M(v1,"SPAN",{class:!0});var g1=R(ae);me=te(g1,"Housing & Accommodation"),g1.forEach(T),v1.forEach(T),y1.forEach(T),xe=be(dv),Ie=M(dv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var _1=R(Ie);Me=M(_1,"DIV",{class:!0});var md=R(Me);Le=te(md,"Census 2021 - "),Ge=te(md,Oe),Je=te(md," - "),Xe=M(md,"SPAN",{class:!0});var b1=R(Xe);ct=te(b1,"Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),b1.forEach(T),St=be(md),vt=M(md,"DIV",{class:!0});var Ju=R(vt);_t=M(Ju,"DIV",{class:!0});var Tm=R(_t);sr=M(Tm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var x1=R(sr);lt=M(x1,"DIV",{class:!0,style:!0});var Ng=R(lt);Nt=te(Ng,"Accommodation type"),Gt=M(Ng,"SPAN",{style:!0});var Lw=R(Gt);Lw.forEach(T),Ng.forEach(T),x1.forEach(T),Ot=be(Tm),Zt=M(Tm,"DIV",{class:!0,id:!0});var w1=R(Zt);Ct=M(w1,"DIV",{class:!0});var Ug=R(Ct);Lt=te(Ug,"The type of accommodation occupied by a household. "),pn=M(Ug,"A",{href:!0,class:!0});var E1=R(pn);Ui=M(E1,"STRONG",{});var S1=R(Ui);Ia=te(S1,"Statistical bulletins"),S1.forEach(T),E1.forEach(T),Ug.forEach(T),w1.forEach(T),na=be(Tm),Jt(pi.$$.fragment,Tm),Tm.forEach(T),En=be(Ju),qn=M(Ju,"DIV",{class:!0});var Am=R(qn);Qi=M(Am,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var k1=R(Qi);fo=M(k1,"DIV",{class:!0,style:!0});var qg=R(fo);Wa=te(qg,"Household adaptations"),Ya=M(qg,"SPAN",{style:!0});var Rw=R(Ya);Rw.forEach(T),qg.forEach(T),k1.forEach(T),sc=be(Am),Cs=M(Am,"DIV",{class:!0,id:!0});var I1=R(Cs);Go=M(I1,"DIV",{class:!0});var jg=R(Go);Au=te(jg,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),ul=M(jg,"A",{href:!0,class:!0});var T1=R(ul);Ko=M(T1,"STRONG",{});var A1=R(Ko);lc=te(A1,"Statistical bulletins"),A1.forEach(T),T1.forEach(T),jg.forEach(T),I1.forEach(T),Ds=be(Am),Jt($i.$$.fragment,Am),Am.forEach(T),cl=be(Ju),Ja=M(Ju,"DIV",{class:!0});var zm=R(Ja);Na=M(zm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var z1=R(Na);vr=M(z1,"DIV",{class:!0,style:!0});var Zg=R(vr);So=te(Zg,"Central heating"),aa=M(Zg,"SPAN",{style:!0});var Bw=R(aa);Bw.forEach(T),Zg.forEach(T),z1.forEach(T),gf=be(zm),Ll=M(zm,"DIV",{class:!0,id:!0});var P1=R(Ll);cc=M(P1,"DIV",{class:!0});var Gg=R(cc);hc=te(Gg,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),zu=M(Gg,"A",{href:!0,class:!0});var C1=R(zu);Rl=M(C1,"STRONG",{});var D1=R(Rl);Wc=te(D1,"Statistical bulletins"),D1.forEach(T),C1.forEach(T),Gg.forEach(T),P1.forEach(T),_f=be(zm),Jt(Ms.$$.fragment,zm),zm.forEach(T),mo=be(Ju),Bl=M(Ju,"DIV",{class:!0});var pf=R(Bl);hl=M(pf,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M1=R(hl);pc=M(M1,"DIV",{class:!0,style:!0});var Kg=R(pc);ry=te(Kg,"Renewable energy systems"),Nh=M(Kg,"SPAN",{style:!0});var Ow=R(Nh);Ow.forEach(T),Kg.forEach(T),M1.forEach(T),bf=be(pf),Uh=M(pf,"DIV",{class:!0,id:!0});var L1=R(Uh);Pu=M(L1,"DIV",{class:!0});var Hg=R(Pu);Ad=te(Hg,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),Ls=M(Hg,"A",{href:!0,class:!0});var R1=R(Ls);fc=M(R1,"STRONG",{});var B1=R(fc);iy=te(B1,"Statistical bulletins"),B1.forEach(T),R1.forEach(T),Hg.forEach(T),L1.forEach(T),ny=be(pf),Jt(Yc.$$.fragment,pf),ay=be(pf),oy=M(pf,"BR",{}),pf.forEach(T),sy=be(Ju),Cu=M(Ju,"DIV",{class:!0});var Pm=R(Cu);Rs=M(Pm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var O1=R(Rs);dc=M(O1,"DIV",{class:!0,style:!0});var Xg=R(dc);Jc=te(Xg,"Household tenure"),qh=M(Xg,"SPAN",{style:!0});var Vw=R(qh);Vw.forEach(T),Xg.forEach(T),O1.forEach(T),Mp=be(Pm),Qc=M(Pm,"DIV",{class:!0,id:!0});var V1=R(Qc);Du=M(V1,"DIV",{class:!0});var Wg=R(Du);Lp=te(Wg,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),au=M(Wg,"A",{href:!0,class:!0});var F1=R(au);Rp=M(F1,"STRONG",{});var N1=R(Rp);zd=te(N1,"Statistical bulletins"),N1.forEach(T),F1.forEach(T),Wg.forEach(T),V1.forEach(T),jh=be(Pm),Jt(Mu.$$.fragment,Pm),Pm.forEach(T),xf=be(Ju),Ol=M(Ju,"DIV",{class:!0});var ff=R(Ol);Ho=M(ff,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var U1=R(Ho);mc=M(U1,"DIV",{class:!0,style:!0});var Yg=R(mc);wf=te(Yg,"Car or van availability"),Zh=M(Yg,"SPAN",{style:!0});var Fw=R(Zh);Fw.forEach(T),Yg.forEach(T),U1.forEach(T),Ef=be(ff),ko=M(ff,"DIV",{class:!0,id:!0});var q1=R(ko);Gh=M(q1,"DIV",{class:!0});var Jg=R(Gh);uy=te(Jg,`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),Kh=M(Jg,"A",{href:!0,class:!0});var j1=R(Kh);Sf=M(j1,"STRONG",{});var Z1=R(Sf);Pd=te(Z1,"Statistical bulletins"),Z1.forEach(T),j1.forEach(T),Jg.forEach(T),q1.forEach(T),$c=be(ff),Jt(eh.$$.fragment,ff),cy=be(ff),Cd=M(ff,"BR",{}),ff.forEach(T),Ju.forEach(T),md.forEach(T),_1.forEach(T),dv.forEach(T),py=be(Ve),th=M(Ve,"DIV",{class:!0});var mv=R(th);Vl=M(mv,"H2",{class:!0,id:!0});var G1=R(Vl);ou=M(G1,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var K1=R(ou);rh=M(K1,"SPAN",{class:!0});var H1=R(rh);Hh=te(H1,"Household Structure"),H1.forEach(T),K1.forEach(T),G1.forEach(T),pl=be(mv),ih=M(mv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var X1=R(ih);su=M(X1,"DIV",{class:!0});var yd=R(su);fy=te(yd,"Census 2021 - "),kf=te(yd,yc),dy=te(yd," - "),Bp=M(yd,"SPAN",{class:!0});var W1=R(Bp);my=te(W1,"Number of dependent children, Household composition"),W1.forEach(T),yy=be(yd),Bs=M(yd,"DIV",{class:!0});var Cm=R(Bs);Rn=M(Cm,"DIV",{class:!0});var Dm=R(Rn);Fl=M(Dm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Y1=R(Fl);Lu=M(Y1,"DIV",{class:!0,style:!0});var Qg=R(Lu);Dd=te(Qg,"Number of dependent children"),Xh=M(Qg,"SPAN",{style:!0});var Nw=R(Xh);Nw.forEach(T),Qg.forEach(T),Y1.forEach(T),vy=be(Dm),Wh=M(Dm,"DIV",{class:!0,id:!0});var J1=R(Wh);Yh=M(J1,"DIV",{class:!0});var $g=R(Yh);Md=te($g,"Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),Jh=M($g,"A",{href:!0,class:!0});var Q1=R(Jh);If=M(Q1,"STRONG",{});var $1=R(If);Qh=te($1,"Statistical bulletins"),$1.forEach(T),Q1.forEach(T),$g.forEach(T),J1.forEach(T),Ld=be(Dm),Jt(vc.$$.fragment,Dm),Dm.forEach(T),Op=be(Cm),Br=M(Cm,"DIV",{class:!0});var Mm=R(Br);fl=M(Mm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var eb=R(fl);Io=M(eb,"DIV",{class:!0,style:!0});var e_=R(Io);nh=te(e_,"Household composition"),ah=M(e_,"SPAN",{style:!0});var Uw=R(ah);Uw.forEach(T),e_.forEach(T),eb.forEach(T),gy=be(Mm),$h=M(Mm,"DIV",{class:!0,id:!0});var tb=R($h);ep=M(tb,"DIV",{class:!0});var t_=R(ep);_y=te(t_,`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),tp=M(t_,"A",{href:!0,class:!0});var rb=R(tp);Tf=M(rb,"STRONG",{});var ib=R(Tf);by=te(ib,"Statistical bulletins"),ib.forEach(T),rb.forEach(T),t_.forEach(T),tb.forEach(T),xy=be(Mm),Jt(lu.$$.fragment,Mm),Mm.forEach(T),oh=be(Cm),Vp=M(Cm,"DIV",{class:!0});var qw=R(Vp);qw.forEach(T),Cm.forEach(T),yd.forEach(T),X1.forEach(T),mv.forEach(T),wy=be(Ve),sh=M(Ve,"DIV",{class:!0});var yv=R(sh);lh=M(yv,"H2",{class:!0,id:!0});var nb=R(lh);Os=M(nb,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ab=R(Os);Ru=M(ab,"SPAN",{class:!0});var ob=R(Ru);rp=te(ob,"Marital & Civil Partnership Status"),ob.forEach(T),ab.forEach(T),nb.forEach(T),Xo=be(yv),dl=M(yv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var sb=R(dl);fn=M(sb,"DIV",{class:!0});var vd=R(fn);Fp=te(vd,"Census 2021 - "),yo=te(vd,uh),Rd=te(vd," - "),ip=M(vd,"SPAN",{class:!0});var lb=R(ip);Ey=te(lb,"Marital and civil partnership status"),lb.forEach(T),Bd=be(vd),fs=M(vd,"DIV",{class:!0});var Lm=R(fs);Nl=M(Lm,"DIV",{class:!0});var Rm=R(Nl);Ul=M(Rm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ub=R(Ul);uu=M(ub,"DIV",{class:!0,style:!0});var r_=R(uu);ch=te(r_,"Marital and civil partnership status"),gc=M(r_,"SPAN",{style:!0});var jw=R(gc);jw.forEach(T),r_.forEach(T),ub.forEach(T),Od=be(Rm),np=M(Rm,"DIV",{class:!0,id:!0});var cb=R(np);hh=M(cb,"DIV",{class:!0});var i_=R(hh);Vd=te(i_,"Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),ph=M(i_,"A",{href:!0,class:!0});var hb=R(ph);Np=M(hb,"STRONG",{});var pb=R(Np);Sy=te(pb,"Statistical bulletins"),pb.forEach(T),hb.forEach(T),i_.forEach(T),cb.forEach(T),ky=be(Rm),Jt(_c.$$.fragment,Rm),Rm.forEach(T),Fd=be(Lm),fh=M(Lm,"DIV",{class:!0});var Zw=R(fh);Zw.forEach(T),Nd=be(Lm),dh=M(Lm,"DIV",{class:!0});var Gw=R(dh);Gw.forEach(T),Lm.forEach(T),vd.forEach(T),sb.forEach(T),yv.forEach(T),Up=be(Ve),ml=M(Ve,"DIV",{class:!0});var vv=R(ml);ap=M(vv,"H2",{class:!0,id:!0});var fb=R(ap);cu=M(fb,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var db=R(cu);qp=M(db,"SPAN",{class:!0});var mb=R(qp);mh=te(mb,"Sexual Orientation"),mb.forEach(T),db.forEach(T),fb.forEach(T),zf=be(vv),bc=M(vv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var yb=R(bc);yl=M(yb,"DIV",{class:!0});var gd=R(yl);Ud=te(gd,"Census 2021 - "),qd=te(gd,jp),Iy=te(gd," - "),Zp=M(gd,"SPAN",{class:!0});var vb=R(Zp);Gp=te(vb,"Sexual orientation"),vb.forEach(T),Pf=be(gd),vl=M(gd,"DIV",{class:!0});var Bm=R(vl);ds=M(Bm,"DIV",{class:!0});var Om=R(ds);Wo=M(Om,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var gb=R(Wo);Tr=M(gb,"DIV",{class:!0,style:!0});var n_=R(Tr);Ty=te(n_,"Sexual orientation"),xc=M(n_,"SPAN",{style:!0});var Kw=R(xc);Kw.forEach(T),n_.forEach(T),gb.forEach(T),Ay=be(Om),op=M(Om,"DIV",{class:!0,id:!0});var _b=R(op);sp=M(_b,"DIV",{class:!0});var a_=R(sp);zy=te(a_,"Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),lp=M(a_,"A",{href:!0,class:!0});var bb=R(lp);Cf=M(bb,"STRONG",{});var xb=R(Cf);Py=te(xb,"Statistical bulletins"),xb.forEach(T),bb.forEach(T),a_.forEach(T),_b.forEach(T),jd=be(Om),Jt(wc.$$.fragment,Om),Om.forEach(T),Zd=be(Bm),Hp=M(Bm,"DIV",{class:!0});var Hw=R(Hp);Hw.forEach(T),Xp=be(Bm),hu=M(Bm,"DIV",{class:!0});var Xw=R(hu);Xw.forEach(T),Bm.forEach(T),gd.forEach(T),yb.forEach(T),vv.forEach(T),yh=be(Ve),Ec=M(Ve,"DIV",{class:!0});var gv=R(Ec);en=M(gv,"H2",{class:!0,id:!0});var wb=R(en);Ur=M(wb,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Eb=R(Ur);up=M(Eb,"SPAN",{class:!0});var Sb=R(up);Kd=te(Sb,"Labour Market & Qualifications"),Sb.forEach(T),Eb.forEach(T),wb.forEach(T),Hd=be(gv),Sc=M(gv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var kb=R(Sc);ql=M(kb,"DIV",{class:!0});var _d=R(ql);Df=te(_d,"Census 2021 - "),Bu=te(_d,pu),Xd=te(_d," - "),dn=M(_d,"SPAN",{class:!0});var Ib=R(dn);cp=te(Ib,"Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),Ib.forEach(T),fu=be(_d),Ua=M(_d,"DIV",{class:!0});var Lh=R(Ua);gl=M(Lh,"DIV",{class:!0});var Vm=R(gl);Vs=M(Vm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Tb=R(Vs);Fs=M(Tb,"DIV",{class:!0,style:!0});var o_=R(Fs);du=te(o_,"Highest level of qualifications"),vh=M(o_,"SPAN",{style:!0});var Ww=R(vh);Ww.forEach(T),o_.forEach(T),Tb.forEach(T),Cy=be(Vm),Sn=M(Vm,"DIV",{class:!0,id:!0});var Ab=R(Sn);qi=M(Ab,"DIV",{class:!0});var Ao=R(qi);Wd=te(Ao,`The highest level of qualification categories are as follows:\r
										`),e=M(Ao,"BR",{}),t=te(Ao,`\r
                                        \u2022 No qualifications;\r
										`),i=M(Ao,"BR",{}),l=te(Ao,`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),p=M(Ao,"BR",{}),d=te(Ao,`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),x=M(Ao,"BR",{}),I=te(Ao,`\r
                                        \u2022 Apprenticeship;\r
										`),C=M(Ao,"BR",{}),L=te(Ao,`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),O=M(Ao,"BR",{}),q=te(Ao,`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),K=M(Ao,"BR",{}),W=te(Ao,`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),se=M(Ao,"BR",{}),ce=te(Ao,`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),ye=M(Ao,"A",{href:!0,class:!0});var zb=R(ye);pe=M(zb,"STRONG",{});var Pb=R(pe);Ee=te(Pb,"Statistical bulletins"),Pb.forEach(T),zb.forEach(T),Ao.forEach(T),Ab.forEach(T),Te=be(Vm),Jt(Pe.$$.fragment,Vm),Vm.forEach(T),Be=be(Lh),Ne=M(Lh,"DIV",{class:!0});var Fm=R(Ne);Ke=M(Fm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Cb=R(Ke);Ye=M(Cb,"DIV",{class:!0,style:!0});var s_=R(Ye);xt=te(s_,"Economic activity"),at=M(s_,"SPAN",{style:!0});var Yw=R(at);Yw.forEach(T),s_.forEach(T),Cb.forEach(T),ut=be(Fm),Wt=M(Fm,"DIV",{class:!0,id:!0});var Db=R(Wt);Pt=M(Db,"DIV",{class:!0});var l_=R(Pt);gt=te(l_,"Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),nr=M(l_,"A",{href:!0,class:!0});var Mb=R(nr);Kt=M(Mb,"STRONG",{});var Lb=R(Kt);Sr=te(Lb,"Statistical bulletins"),Lb.forEach(T),Mb.forEach(T),l_.forEach(T),Db.forEach(T),Tt=be(Fm),Jt(gr.$$.fragment,Fm),Fm.forEach(T),Li=be(Lh),ii=M(Lh,"DIV",{class:!0});var Nm=R(ii);jr=M(Nm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Rb=R(jr);Hr=M(Rb,"DIV",{class:!0,style:!0});var u_=R(Hr);mn=te(u_,"Hours worked per week"),yn=M(u_,"SPAN",{style:!0});var Jw=R(yn);Jw.forEach(T),u_.forEach(T),Rb.forEach(T),qa=be(Nm),kn=M(Nm,"DIV",{class:!0,id:!0});var Bb=R(kn);Wn=M(Bb,"DIV",{class:!0});var c_=R(Wn);In=te(c_,"The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),Tn=M(c_,"A",{href:!0,class:!0});var Ob=R(Tn);fr=M(Ob,"STRONG",{});var Vb=R(fr);ni=te(Vb,"Statistical bulletins"),Vb.forEach(T),Ob.forEach(T),c_.forEach(T),Bb.forEach(T),Xr=be(Nm),Jt(mr.$$.fragment,Nm),Nm.forEach(T),Qa=be(Lh),vn=M(Lh,"DIV",{class:!0});var Um=R(vn);Dr=M(Um,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Fb=R(Dr);Ai=M(Fb,"DIV",{class:!0,style:!0});var h_=R(Ai);Ta=te(h_,"Industry of employment"),xr=M(h_,"SPAN",{style:!0});var Qw=R(xr);Qw.forEach(T),h_.forEach(T),Fb.forEach(T),Yo=be(Um),Jo=M(Um,"DIV",{class:!0,id:!0});var Nb=R(Jo);Ri=M(Nb,"DIV",{class:!0});var p_=R(Ri);jl=te(p_,"The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),vo=M(p_,"A",{href:!0,class:!0});var Ub=R(vo);Vu=M(Ub,"STRONG",{});var qb=R(Vu);kc=te(qb,"Statistical bulletins"),qb.forEach(T),Ub.forEach(T),p_.forEach(T),Nb.forEach(T),gh=be(Um),Jt(Qo.$$.fragment,Um),Um.forEach(T),_h=be(Lh),_l=M(Lh,"DIV",{class:!0});var qm=R(_l);To=M(qm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var jb=R(To);bl=M(jb,"DIV",{class:!0,style:!0});var f_=R(bl);Wp=te(f_,"Occupation"),Fu=M(f_,"SPAN",{style:!0});var $w=R(Fu);$w.forEach(T),f_.forEach(T),jb.forEach(T),hp=be(qm),Zl=M(qm,"DIV",{class:!0,id:!0});var Zb=R(Zl);Ns=M(Zb,"DIV",{class:!0});var d_=R(Ns);bh=te(d_,"The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),Nu=M(d_,"A",{href:!0,class:!0});var Gb=R(Nu);xh=M(Gb,"STRONG",{});var Kb=R(xh);pp=te(Kb,"Statistical bulletins"),Kb.forEach(T),Gb.forEach(T),d_.forEach(T),Zb.forEach(T),fp=be(qm),Jt(mu.$$.fragment,qm),qm.forEach(T),Lh.forEach(T),_d.forEach(T),kb.forEach(T),gv.forEach(T),dp=be(Ve),Gl=M(Ve,"DIV",{class:!0});var _v=R(Gl);Uu=M(_v,"H2",{class:!0,id:!0});var Hb=R(Uu);$o=M(Hb,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Xb=R($o);Tc=M(Xb,"SPAN",{class:!0});var Wb=R(Tc);wh=te(Wb,"Travel to Work or Study"),Wb.forEach(T),Xb.forEach(T),Hb.forEach(T),mp=be(_v),Us=M(_v,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Yb=R(Us);ms=M(Yb,"DIV",{class:!0});var bd=R(ms);Eh=te(bd,"Census 2021 - "),Mf=te(bd,yp),Lf=te(bd," - "),vp=M(bd,"SPAN",{class:!0});var Jb=R(vp);Rf=te(Jb,"Method of travel to work or study, Distance to place of work or study"),Jb.forEach(T),Dy=be(bd),Aa=M(bd,"DIV",{class:!0});var Rh=R(Aa);fi=M(Rh,"DIV",{class:!0});var jm=R(fi);ga=M(jm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Qb=R(ga);Ac=M(Qb,"DIV",{class:!0,style:!0});var m_=R(Ac);qu=te(m_,"Method of travel to work"),zc=M(m_,"SPAN",{style:!0});var eE=R(zc);eE.forEach(T),m_.forEach(T),Qb.forEach(T),Jp=be(jm),es=M(jm,"DIV",{class:!0,id:!0});var $b=R(es);ju=M($b,"DIV",{class:!0});var y_=R(ju);gp=te(y_,`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),Zu=M(y_,"A",{href:!0,class:!0});var ex=R(Zu);Sh=M(ex,"STRONG",{});var tx=R(Sh);Bf=te(tx,"Statistical bulletins"),tx.forEach(T),ex.forEach(T),y_.forEach(T),$b.forEach(T),Yd=be(jm),Jt(Kl.$$.fragment,jm),jm.forEach(T),Jd=be(Rh),yu=M(Rh,"DIV",{class:!0});var Zm=R(yu);xl=M(Zm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var rx=R(xl);Gu=M(rx,"DIV",{class:!0,style:!0});var v_=R(Gu);Qd=te(v_,"Method of travel to study"),ja=M(v_,"SPAN",{style:!0});var tE=R(ja);tE.forEach(T),v_.forEach(T),rx.forEach(T),em=be(Zm),ts=M(Zm,"DIV",{class:!0,id:!0});var ix=R(ts);_p=M(ix,"DIV",{class:!0});var g_=R(_p);tm=te(g_,`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),wl=M(g_,"A",{href:!0,class:!0});var nx=R(wl);Ku=M(nx,"STRONG",{});var ax=R(Ku);kh=te(ax,"Statistical bulletins"),ax.forEach(T),nx.forEach(T),g_.forEach(T),ix.forEach(T),Ih=be(Zm),Jt(El.$$.fragment,Zm),Zm.forEach(T),rm=be(Rh),Qp=M(Rh,"DIV",{class:!0});var rE=R(Qp);rE.forEach(T),im=be(Rh),vu=M(Rh,"DIV",{class:!0});var Gm=R(vu);qs=M(Gm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ox=R(qs);gu=M(ox,"DIV",{class:!0,style:!0});var __=R(gu);_u=te(__,"Distance to place of work"),Th=M(__,"SPAN",{style:!0});var iE=R(Th);iE.forEach(T),__.forEach(T),ox.forEach(T),Of=be(Gm),Ah=M(Gm,"DIV",{class:!0,id:!0});var sx=R(Ah);Pc=M(sx,"DIV",{class:!0});var b_=R(Pc);nm=te(b_,"The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),zh=M(b_,"A",{href:!0,class:!0});var lx=R(zh);bp=M(lx,"STRONG",{});var ux=R(bp);am=te(ux,"Statistical bulletins"),ux.forEach(T),lx.forEach(T),b_.forEach(T),sx.forEach(T),xp=be(Gm),Jt(Cc.$$.fragment,Gm),Gm.forEach(T),$p=be(Rh),Hu=M(Rh,"DIV",{class:!0});var Km=R(Hu);Sl=M(Km,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var cx=R(Sl);Dc=M(cx,"DIV",{class:!0,style:!0});var x_=R(Dc);Ly=te(x_,"Distance to place of study"),wp=M(x_,"SPAN",{style:!0});var nE=R(wp);nE.forEach(T),x_.forEach(T),cx.forEach(T),Ry=be(Km),Ep=M(Km,"DIV",{class:!0,id:!0});var hx=R(Ep);Sp=M(hx,"DIV",{class:!0});var w_=R(Sp);By=te(w_,"The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),rs=M(w_,"A",{href:!0,class:!0});var px=R(rs);Ph=M(px,"STRONG",{});var fx=R(Ph);om=te(fx,"Statistical bulletins"),fx.forEach(T),px.forEach(T),w_.forEach(T),hx.forEach(T),kp=be(Km),Jt(Mc.$$.fragment,Km),Km.forEach(T),Rh.forEach(T),bd.forEach(T),Yb.forEach(T),_v.forEach(T),Qv=be(Ve),ef=M(Ve,"DIV",{class:!0});var bv=R(ef);Vf=M(bv,"H2",{class:!0,id:!0});var dx=R(Vf);Lc=M(dx,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var mx=R(Lc);sm=M(mx,"SPAN",{class:!0});var yx=R(sm);$v=te(yx,"Migration"),yx.forEach(T),mx.forEach(T),dx.forEach(T),eg=be(bv),tf=M(bv,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var vx=R(tf);Rc=M(vx,"DIV",{class:!0});var xd=R(Rc);tg=te(xd,"Census 2021 - "),lv=te(xd,Oy),rg=te(xd," - "),lm=M(xd,"SPAN",{class:!0});var gx=R(lm);ig=te(gx,"Address one year ago, Year of arrival to live in NI"),gx.forEach(T),ng=be(xd),bu=M(xd,"DIV",{class:!0});var Hm=R(bu);Ch=M(Hm,"DIV",{class:!0});var Xm=R(Ch);Xu=M(Xm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _x=R(Xu);Ip=M(_x,"DIV",{class:!0,style:!0});var E_=R(Ip);ag=te(E_,"Address one year ago"),Ff=M(E_,"SPAN",{style:!0});var aE=R(Ff);aE.forEach(T),E_.forEach(T),_x.forEach(T),og=be(Xm),Nf=M(Xm,"DIV",{class:!0,id:!0});var bx=R(Nf);Uf=M(bx,"DIV",{class:!0});var S_=R(Uf);sg=te(S_,"Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),qf=M(S_,"A",{href:!0,class:!0});var xx=R(qf);Vy=M(xx,"STRONG",{});var wx=R(Vy);lg=te(wx,"Statistical bulletins"),wx.forEach(T),xx.forEach(T),S_.forEach(T),bx.forEach(T),ug=be(Xm),Jt(rf.$$.fragment,Xm),Xm.forEach(T),cg=be(Hm),Dh=M(Hm,"DIV",{class:!0});var Wm=R(Dh);Wu=M(Wm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ex=R(Wu);Tp=M(Ex,"DIV",{class:!0,style:!0});var k_=R(Tp);hg=te(k_,"Year of arrival to live in NI"),jf=M(k_,"SPAN",{style:!0});var oE=R(jf);oE.forEach(T),k_.forEach(T),Ex.forEach(T),pg=be(Wm),Zf=M(Wm,"DIV",{class:!0,id:!0});var Sx=R(Zf);Gf=M(Sx,"DIV",{class:!0});var I_=R(Gf);fg=te(I_,"The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Kf=M(I_,"A",{href:!0,class:!0});var kx=R(Kf);Fy=M(kx,"STRONG",{});var Ix=R(Fy);dg=te(Ix,"Statistical bulletins"),Ix.forEach(T),kx.forEach(T),I_.forEach(T),Sx.forEach(T),mg=be(Wm),Jt(nf.$$.fragment,Wm),Wm.forEach(T),yg=be(Hm),Ny=M(Hm,"DIV",{class:!0});var sE=R(Ny);sE.forEach(T),Hm.forEach(T),xd.forEach(T),vx.forEach(T),bv.forEach(T),Ve.forEach(T),this.h()},h(){S(_,"class","accordion-button-title"),S(y,"class","accordion-button collapsed"),S(y,"type","button"),S(y,"data-bs-toggle","collapse"),S(y,"data-bs-target","#panelsStayOpen-collapseOne"),S(y,"aria-expanded","false"),S(y,"aria-controls","panelsStayOpen-collapseOne"),S(f,"class","accordion-header svelte-p0yy5r"),S(f,"id","panelsStayOpen-headingOne"),S(he,"class","accordion-button-title-sub"),re(ht,"color","gray"),re(ht,"font-size","14pt"),S(At,"class","blocktitle"),re(At,"margin","0"),re(At,"width","100%"),S(Ue,"class","row"),re(Ue,"display","flex"),re(Ue,"cursor","pointer"),S(Ue,"data-bs-toggle","collapse"),S(Ue,"data-bs-target","#broadagebands-info"),S(Ue,"aria-expanded","false"),S(Ue,"aria-controls","broadagebands-info"),S(bt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(bt,"class","svelte-p0yy5r"),S(tr,"class","card card-body svelte-p0yy5r"),S(yr,"class","collapse svelte-p0yy5r"),S(yr,"id","broadagebands-info"),S(Qe,"class","chart svelte-p0yy5r"),re(Qe,"height","100px"),re(Qe,"padding-bottom","5px"),S(Ce,"class","div-grey-box svelte-p0yy5r"),S(ji,"class","blocktitle"),re(ji,"margin","0"),re(ji,"width","100%"),S(cr,"class","div-grey-box svelte-p0yy5r"),re(Ir,"color","gray"),re(Ir,"font-size","14pt"),S(Oi,"class","blocktitle"),re(Oi,"margin","0"),re(Oi,"width","100%"),S(rr,"class","row"),re(rr,"display","flex"),re(rr,"cursor","pointer"),S(rr,"data-bs-toggle","collapse"),S(rr,"data-bs-target","#hhsize-info"),S(rr,"aria-expanded","false"),S(rr,"aria-controls","hhsize-info"),S(Ut,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ut,"class","svelte-p0yy5r"),S(Zr,"class","card card-body svelte-p0yy5r"),S(mi,"class","collapse svelte-p0yy5r"),S(mi,"id","hhsize-info"),S(tn,"class","div-grey-box svelte-p0yy5r"),S(we,"class","grid mt svelte-p0yy5r"),Gs(()=>u[35].call(we)),S(A,"class","accordion-body"),S(P,"id","panelsStayOpen-collapseOne"),S(P,"class","accordion-collapse collapse svelte-p0yy5r"),S(P,"aria-labelledby","panelsStayOpen-headingOne"),S(Pr,"class","accordion-button-title"),S(er,"class","accordion-button collapsed"),S(er,"type","button"),S(er,"data-bs-toggle","collapse"),S(er,"data-bs-target","#panelsStayOpen-collapseTwo"),S(er,"aria-expanded","false"),S(er,"aria-controls","panelsStayOpen-collapseTwo"),S(Mr,"class","accordion-header svelte-p0yy5r"),S(Mr,"id","panelsStayOpen-headingTwo"),re(zn,"color","gray"),re(zn,"font-size","14pt"),S(nn,"class","blocktitle"),re(nn,"margin","0"),re(nn,"width","100%"),S(ei,"class","row"),re(ei,"display","flex"),re(ei,"cursor","pointer"),S(ei,"data-bs-toggle","collapse"),S(ei,"data-bs-target","#cob-info"),S(ei,"aria-expanded","false"),S(ei,"aria-controls","cob-info"),S(oe,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(oe,"class","svelte-p0yy5r"),S(H,"class","card card-body svelte-p0yy5r"),S(G,"class","collapse svelte-p0yy5r"),S(G,"id","cob-info"),S(Pi,"class","div-grey-box svelte-p0yy5r"),re(ot,"color","gray"),re(ot,"font-size","14pt"),S(ze,"class","blocktitle"),re(ze,"margin","0"),re(ze,"width","100%"),S(Ze,"class","row"),re(Ze,"display","flex"),re(Ze,"cursor","pointer"),S(Ze,"data-bs-toggle","collapse"),S(Ze,"data-bs-target","#passport-info"),S(Ze,"aria-expanded","false"),S(Ze,"aria-controls","passport-info"),S(Mt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Mt,"class","svelte-p0yy5r"),S(He,"class","card card-body svelte-p0yy5r"),S($e,"class","collapse svelte-p0yy5r"),S($e,"id","passport-info"),S(qe,"class","div-grey-box svelte-p0yy5r"),re(hr,"color","gray"),re(hr,"font-size","14pt"),S(Ft,"class","blocktitle"),re(Ft,"font-size","1.02em"),re(Ft,"margin","0"),re(Ft,"width","100%"),S(Fr,"class","row"),re(Fr,"display","flex"),re(Fr,"cursor","pointer"),S(Fr,"data-bs-toggle","collapse"),S(Fr,"data-bs-target","#natid-info"),S(Fr,"aria-expanded","false"),S(Fr,"aria-controls","natid-info"),S(Si,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Si,"class","svelte-p0yy5r"),S(Pn,"class","card card-body svelte-p0yy5r"),S(gi,"class","collapse svelte-p0yy5r"),S(gi,"id","natid-info"),S(Vt,"class","div-grey-box svelte-p0yy5r"),S(bn,"class","grid mt svelte-p0yy5r"),Gs(()=>u[36].call(bn)),S(An,"class","accordion-button-title-sub"),S(Jn,"class","accordion-body"),S(Vn,"id","panelsStayOpen-collapseTwo"),S(Vn,"class","accordion-collapse collapse svelte-p0yy5r"),S(Vn,"aria-labelledby","panelsStayOpen-headingTwo"),S(wi,"class","accordion-item"),S(Vi,"class","accordion-button-title"),S(ui,"class","accordion-button collapsed"),S(ui,"type","button"),S(ui,"data-bs-toggle","collapse"),S(ui,"data-bs-target","#panelsStayOpen-collapseThree"),S(ui,"aria-expanded","false"),S(ui,"aria-controls","panelsStayOpen-collapseThree"),S(Er,"class","accordion-header svelte-p0yy5r"),S(Er,"id","panelsStayOpen-headingThree"),S(Pa,"class","accordion-button-title-sub"),re(ua,"color","gray"),re(ua,"font-size","14pt"),S(Da,"class","blocktitle"),re(Da,"margin","0"),re(Da,"width","100%"),S(Ca,"class","row"),re(Ca,"display","flex"),re(Ca,"cursor","pointer"),S(Ca,"data-bs-toggle","collapse"),S(Ca,"data-bs-target","#mainlang-info"),S(Ca,"aria-expanded","false"),S(Ca,"aria-controls","mainlang-info"),S(un,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(un,"class","svelte-p0yy5r"),S(Fi,"class","card card-body svelte-p0yy5r"),S(Co,"class","collapse svelte-p0yy5r"),S(Co,"id","mainlang-info"),S(Zn,"class","div-grey-box svelte-p0yy5r"),re(os,"color","gray"),re(os,"font-size","14pt"),S(Ma,"class","blocktitle"),re(Ma,"margin","0"),re(Ma,"width","100%"),S(Nr,"class","row"),re(Nr,"display","flex"),re(Nr,"cursor","pointer"),S(Nr,"data-bs-toggle","collapse"),S(Nr,"data-bs-target","#irish-info"),S(Nr,"aria-expanded","false"),S(Nr,"aria-controls","irish-info"),S(ea,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ea,"class","svelte-p0yy5r"),S(ss,"class","card card-body svelte-p0yy5r"),S(vs,"class","collapse svelte-p0yy5r"),S(vs,"id","irish-info"),S(Ii,"class","div-grey-box svelte-p0yy5r"),re(Ra,"color","gray"),re(Ra,"font-size","14pt"),S(ri,"class","blocktitle"),re(ri,"margin","0"),re(ri,"width","100%"),S(cn,"class","row"),re(cn,"display","flex"),re(cn,"cursor","pointer"),S(cn,"data-bs-toggle","collapse"),S(cn,"data-bs-target","#ulster-info"),S(cn,"aria-expanded","false"),S(cn,"aria-controls","ulster-info"),S(Di,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Di,"class","svelte-p0yy5r"),S(xn,"class","card card-body svelte-p0yy5r"),S(Ba,"class","collapse svelte-p0yy5r"),S(Ba,"id","ulster-info"),S(hi,"class","div-grey-box svelte-p0yy5r"),S(Fn,"class","grid mt svelte-p0yy5r"),Gs(()=>u[37].call(Fn)),S(ti,"class","accordion-body"),S($n,"id","panelsStayOpen-collapseThree"),S($n,"class","accordion-collapse collapse svelte-p0yy5r"),S($n,"aria-labelledby","panelsStayOpen-headingThree"),S(ln,"class","accordion-item"),S(Oa,"class","accordion-button-title"),S(ha,"class","accordion-button collapsed"),S(ha,"type","button"),S(ha,"data-bs-toggle","collapse"),S(ha,"data-bs-target","#panelsStayOpen-collapseFour"),S(ha,"aria-expanded","false"),S(ha,"aria-controls","panelsStayOpen-collapseFour"),S(Qs,"class","accordion-header svelte-p0yy5r"),S(Qs,"id","panelsStayOpen-headingFour"),S(Tl,"class","accordion-button-title-sub"),re(el,"color","gray"),re(el,"font-size","14pt"),S(Kn,"class","blocktitle"),re(Kn,"margin","0"),re(Kn,"width","100%"),S(Ni,"class","row"),re(Ni,"display","flex"),re(Ni,"cursor","pointer"),S(Ni,"data-bs-toggle","collapse"),S(Ni,"data-bs-target","#rel-info"),S(Ni,"aria-expanded","false"),S(Ni,"aria-controls","rel-info"),S(wa,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(wa,"class","svelte-p0yy5r"),S(cs,"class","card card-body svelte-p0yy5r"),S(pa,"class","collapse svelte-p0yy5r"),S(pa,"id","rel-info"),S(It,"class","div-grey-box svelte-p0yy5r"),re(nl,"color","gray"),re(nl,"font-size","14pt"),S(so,"class","blocktitle"),re(so,"margin","0"),re(so,"width","100%"),S(Ti,"class","row"),re(Ti,"display","flex"),re(Ti,"cursor","pointer"),S(Ti,"data-bs-toggle","collapse"),S(Ti,"data-bs-target","#relbup-info"),S(Ti,"aria-expanded","false"),S(Ti,"aria-controls","relbup-info"),S(fa,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(fa,"class","svelte-p0yy5r"),S(xs,"class","card card-body svelte-p0yy5r"),S(hs,"class","collapse svelte-p0yy5r"),S(hs,"id","relbup-info"),S(Lo,"class","div-grey-box svelte-p0yy5r"),re(lo,"color","gray"),re(lo,"font-size","14pt"),S(Lr,"class","blocktitle"),re(Lr,"margin","0"),re(Lr,"width","100%"),S(ra,"class","row"),re(ra,"display","flex"),re(ra,"cursor","pointer"),S(ra,"data-bs-toggle","collapse"),S(ra,"data-bs-target","#ethnic-info"),S(ra,"aria-expanded","false"),S(ra,"aria-controls","ethnic-info"),S(Ga,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ga,"class","svelte-p0yy5r"),S(Hn,"class","card card-body svelte-p0yy5r"),S(Rr,"class","collapse svelte-p0yy5r"),S(Rr,"id","ethnic-info"),S(Ro,"class","div-grey-box svelte-p0yy5r"),S(Fe,"class","grid mt svelte-p0yy5r"),Gs(()=>u[38].call(Fe)),S(wn,"class","accordion-body"),S(Mo,"id","panelsStayOpen-collapseFour"),S(Mo,"class","accordion-collapse collapse svelte-p0yy5r"),S(Mo,"aria-labelledby","panelsStayOpen-headingFour"),S(Js,"class","accordion-item"),S(_i,"class","accordion-button-title"),S(xo,"class","accordion-button collapsed"),S(xo,"type","button"),S(xo,"data-bs-toggle","collapse"),S(xo,"data-bs-target","#panelsStayOpen-collapseFive"),S(xo,"aria-expanded","false"),S(xo,"aria-controls","panelsStayOpen-collapseFive"),S(Ea,"class","accordion-header svelte-p0yy5r"),S(Ea,"id","panelsStayOpen-headingFive"),S(ll,"class","accordion-button-title-sub"),re(Va,"color","gray"),re(Va,"font-size","14pt"),S(co,"class","blocktitle"),re(co,"margin","0"),re(co,"width","100%"),S(Ka,"class","row"),re(Ka,"display","flex"),re(Ka,"cursor","pointer"),S(Ka,"data-bs-toggle","collapse"),S(Ka,"data-bs-target","#gen-health-info"),S(Ka,"aria-expanded","false"),S(Ka,"aria-controls","gen-health"),S(or,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(or,"class","svelte-p0yy5r"),S(Ha,"class","card card-body svelte-p0yy5r"),S(Ql,"class","collapse svelte-p0yy5r"),S(Ql,"id","gen-health-info"),S(Yi,"class","div-grey-box svelte-p0yy5r"),re(yt,"color","gray"),re(yt,"font-size","14pt"),S(jo,"class","blocktitle"),re(jo,"font-size","0.87em"),re(jo,"margin","0"),re(jo,"width","100%"),S(Ji,"class","row"),re(Ji,"display","flex"),re(Ji,"cursor","pointer"),S(Ji,"data-bs-toggle","collapse"),S(Ji,"data-bs-target","#lti-info"),S(Ji,"aria-expanded","false"),S(Ji,"aria-controls","lti-info"),S($l,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S($l,"class","svelte-p0yy5r"),S(Mn,"class","card card-body svelte-p0yy5r"),S(Xa,"class","collapse svelte-p0yy5r"),S(Xa,"id","lti-info"),S(ma,"class","div-grey-box svelte-p0yy5r"),re(ho,"color","gray"),re(ho,"font-size","14pt"),S(Ln,"class","blocktitle"),re(Ln,"font-size","1.02em"),re(Ln,"margin","0"),re(Ln,"width","100%"),S(ya,"class","row"),re(ya,"display","flex"),re(ya,"cursor","pointer"),S(ya,"data-bs-toggle","collapse"),S(ya,"data-bs-target","#lt-cond-info"),S(ya,"aria-expanded","false"),S(ya,"aria-controls","lt-cond-info"),S(nu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(nu,"class","svelte-p0yy5r"),S(Is,"class","card card-body svelte-p0yy5r"),S(ru,"class","collapse svelte-p0yy5r"),S(ru,"id","lt-cond-info"),S(ks,"class","div-grey-box svelte-p0yy5r"),re(n,"color","gray"),re(n,"font-size","14pt"),S(zs,"class","blocktitle"),re(zs,"font-size","1.02em"),re(zs,"margin","0"),re(zs,"width","100%"),S(po,"class","row"),re(po,"display","flex"),re(po,"cursor","pointer"),S(po,"data-bs-toggle","collapse"),S(po,"data-bs-target","#unpaid-info"),S(po,"aria-expanded","false"),S(po,"aria-controls","unpaid-info"),S(k,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(k,"class","svelte-p0yy5r"),S(m,"class","card card-body svelte-p0yy5r"),S(c,"class","collapse svelte-p0yy5r"),S(c,"id","unpaid-info"),S(As,"class","div-grey-box svelte-p0yy5r"),S(Mi,"class","grid mt svelte-p0yy5r"),Gs(()=>u[39].call(Mi)),S(Un,"class","accordion-body"),S(Vo,"id","panelsStayOpen-collapseFive"),S(Vo,"class","accordion-collapse collapse svelte-p0yy5r"),S(Vo,"aria-labelledby","panelsStayOpen-headingFive"),S(Kr,"class","accordion-item"),S(ae,"class","accordion-button-title"),S(fe,"class","accordion-button collapsed"),S(fe,"type","button"),S(fe,"data-bs-toggle","collapse"),S(fe,"data-bs-target","#panelsStayOpen-collapseSix"),S(fe,"aria-expanded","false"),S(fe,"aria-controls","panelsStayOpen-collapseSix"),S(le,"class","accordion-header svelte-p0yy5r"),S(le,"id","panelsStayOpen-headingSix"),S(Xe,"class","accordion-button-title-sub"),re(Gt,"color","gray"),re(Gt,"font-size","14pt"),S(lt,"class","blocktitle"),re(lt,"margin","0"),re(lt,"width","100%"),S(sr,"class","row"),re(sr,"display","flex"),re(sr,"cursor","pointer"),S(sr,"data-bs-toggle","collapse"),S(sr,"data-bs-target","#acc-type-info"),S(sr,"aria-expanded","false"),S(sr,"aria-controls","acc-type-info"),S(pn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(pn,"class","svelte-p0yy5r"),S(Ct,"class","card card-body svelte-p0yy5r"),S(Zt,"class","collapse svelte-p0yy5r"),S(Zt,"id","acc-type-info"),S(_t,"class","div-grey-box svelte-p0yy5r"),re(Ya,"color","gray"),re(Ya,"font-size","14pt"),S(fo,"class","blocktitle"),re(fo,"margin","0"),re(fo,"width","100%"),S(Qi,"class","row"),re(Qi,"display","flex"),re(Qi,"cursor","pointer"),S(Qi,"data-bs-toggle","collapse"),S(Qi,"data-bs-target","#adapt-info"),S(Qi,"aria-expanded","false"),S(Qi,"aria-controls","adapt-info"),S(ul,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ul,"class","svelte-p0yy5r"),S(Go,"class","card card-body svelte-p0yy5r"),S(Cs,"class","collapse svelte-p0yy5r"),S(Cs,"id","adapt-info"),S(qn,"class","div-grey-box svelte-p0yy5r"),re(aa,"color","gray"),re(aa,"font-size","14pt"),S(vr,"class","blocktitle"),re(vr,"margin","0"),re(vr,"width","100%"),S(Na,"class","row"),re(Na,"display","flex"),re(Na,"cursor","pointer"),S(Na,"data-bs-toggle","collapse"),S(Na,"data-bs-target","#heat-info"),S(Na,"aria-expanded","false"),S(Na,"aria-controls","heat-info"),S(zu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(zu,"class","svelte-p0yy5r"),S(cc,"class","card card-body svelte-p0yy5r"),S(Ll,"class","collapse svelte-p0yy5r"),S(Ll,"id","heat-info"),S(Ja,"class","div-grey-box svelte-p0yy5r"),re(Nh,"color","gray"),re(Nh,"font-size","14pt"),S(pc,"class","blocktitle"),re(pc,"margin","0"),re(pc,"width","100%"),S(hl,"class","row"),re(hl,"display","flex"),re(hl,"cursor","pointer"),S(hl,"data-bs-toggle","collapse"),S(hl,"data-bs-target","#renew-info"),S(hl,"aria-expanded","false"),S(hl,"aria-controls","renew-info"),S(Ls,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ls,"class","svelte-p0yy5r"),S(Pu,"class","card card-body svelte-p0yy5r"),S(Uh,"class","collapse svelte-p0yy5r"),S(Uh,"id","renew-info"),S(Bl,"class","div-grey-box svelte-p0yy5r"),re(qh,"color","gray"),re(qh,"font-size","14pt"),S(dc,"class","blocktitle"),re(dc,"margin","0"),re(dc,"width","100%"),S(Rs,"class","row"),re(Rs,"display","flex"),re(Rs,"cursor","pointer"),S(Rs,"data-bs-toggle","collapse"),S(Rs,"data-bs-target","#tenure-info"),S(Rs,"aria-expanded","false"),S(Rs,"aria-controls","tenure-info"),S(au,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(au,"class","svelte-p0yy5r"),S(Du,"class","card card-body svelte-p0yy5r"),S(Qc,"class","collapse svelte-p0yy5r"),S(Qc,"id","tenure-info"),S(Cu,"class","div-grey-box svelte-p0yy5r"),re(Zh,"color","gray"),re(Zh,"font-size","14pt"),S(mc,"class","blocktitle"),re(mc,"margin","0"),re(mc,"width","100%"),S(Ho,"class","row"),re(Ho,"display","flex"),re(Ho,"cursor","pointer"),S(Ho,"data-bs-toggle","collapse"),S(Ho,"data-bs-target","#car-info"),S(Ho,"aria-expanded","false"),S(Ho,"aria-controls","car-info"),S(Kh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Kh,"class","svelte-p0yy5r"),S(Gh,"class","card card-body svelte-p0yy5r"),S(ko,"class","collapse svelte-p0yy5r"),S(ko,"id","car-info"),S(Ol,"class","div-grey-box svelte-p0yy5r"),S(vt,"class","grid mt svelte-p0yy5r"),Gs(()=>u[40].call(vt)),S(Me,"class","accordion-body"),S(Ie,"id","panelsStayOpen-collapseSix"),S(Ie,"class","accordion-collapse collapse svelte-p0yy5r"),S(Ie,"aria-labelledby","panelsStayOpen-headingSix"),S(ue,"class","accordion-item"),S(rh,"class","accordion-button-title"),S(ou,"class","accordion-button collapsed"),S(ou,"type","button"),S(ou,"data-bs-toggle","collapse"),S(ou,"data-bs-target","#panelsStayOpen-collapseSeven"),S(ou,"aria-expanded","false"),S(ou,"aria-controls","panelsStayOpen-collapseSeven"),S(Vl,"class","accordion-header svelte-p0yy5r"),S(Vl,"id","panelsStayOpen-headingSeven"),S(Bp,"class","accordion-button-title-sub"),re(Xh,"color","gray"),re(Xh,"font-size","14pt"),S(Lu,"class","blocktitle"),re(Lu,"margin","0"),re(Lu,"width","100%"),S(Fl,"class","row"),re(Fl,"display","flex"),re(Fl,"cursor","pointer"),S(Fl,"data-bs-toggle","collapse"),S(Fl,"data-bs-target","#dep-child-info"),S(Fl,"aria-expanded","false"),S(Fl,"aria-controls","dep-child-info"),S(Jh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Jh,"class","svelte-p0yy5r"),S(Yh,"class","card card-body svelte-p0yy5r"),S(Wh,"class","collapse svelte-p0yy5r"),S(Wh,"id","dep-child-info"),S(Rn,"class","div-grey-box svelte-p0yy5r"),re(ah,"color","gray"),re(ah,"font-size","14pt"),S(Io,"class","blocktitle"),re(Io,"margin","0"),re(Io,"width","100%"),S(fl,"class","row"),re(fl,"display","flex"),re(fl,"cursor","pointer"),S(fl,"data-bs-toggle","collapse"),S(fl,"data-bs-target","#hh-comp-info"),S(fl,"aria-expanded","false"),S(fl,"aria-controls","hh-comp-info"),S(tp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(tp,"class","svelte-p0yy5r"),S(ep,"class","card card-body svelte-p0yy5r"),S($h,"class","collapse svelte-p0yy5r"),S($h,"id","hh-comp-info"),S(Br,"class","div-grey-box svelte-p0yy5r"),S(Vp,"class","div-white-box"),S(Bs,"class","grid mt svelte-p0yy5r"),Gs(()=>u[41].call(Bs)),S(su,"class","accordion-body"),S(ih,"id","panelsStayOpen-collapseSeven"),S(ih,"class","accordion-collapse collapse svelte-p0yy5r"),S(ih,"aria-labelledby","panelsStayOpen-headingSeven"),S(th,"class","accordion-item"),S(Ru,"class","accordion-button-title"),S(Os,"class","accordion-button collapsed"),S(Os,"type","button"),S(Os,"data-bs-toggle","collapse"),S(Os,"data-bs-target","#panelsStayOpen-collapseEight"),S(Os,"aria-expanded","false"),S(Os,"aria-controls","panelsStayOpen-collapseEight"),S(lh,"class","accordion-header svelte-p0yy5r"),S(lh,"id","panelsStayOpen-headingEight"),S(ip,"class","accordion-button-title-sub"),re(gc,"color","gray"),re(gc,"font-size","14pt"),S(uu,"class","blocktitle"),re(uu,"font-size","0.95em"),re(uu,"margin","0"),re(uu,"width","100%"),S(Ul,"class","row"),re(Ul,"display","flex"),re(Ul,"cursor","pointer"),S(Ul,"data-bs-toggle","collapse"),S(Ul,"data-bs-target","#marital-info"),S(Ul,"aria-expanded","false"),S(Ul,"aria-controls","marital-info"),S(ph,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ph,"class","svelte-p0yy5r"),S(hh,"class","card card-body svelte-p0yy5r"),S(np,"class","collapse svelte-p0yy5r"),S(np,"id","marital-info"),S(Nl,"class","div-grey-box svelte-p0yy5r"),S(fh,"class","div-white-box"),S(dh,"class","div-white-box"),S(fs,"class","grid mt svelte-p0yy5r"),Gs(()=>u[42].call(fs)),S(fn,"class","accordion-body"),S(dl,"id","panelsStayOpen-collapseEight"),S(dl,"class","accordion-collapse collapse svelte-p0yy5r"),S(dl,"aria-labelledby","panelsStayOpen-headingEight"),S(sh,"class","accordion-item"),S(qp,"class","accordion-button-title"),S(cu,"class","accordion-button collapsed"),S(cu,"type","button"),S(cu,"data-bs-toggle","collapse"),S(cu,"data-bs-target","#panelsStayOpen-collapseNine"),S(cu,"aria-expanded","false"),S(cu,"aria-controls","panelsStayOpen-collapseNine"),S(ap,"class","accordion-header svelte-p0yy5r"),S(ap,"id","panelsStayOpen-headingNine"),S(Zp,"class","accordion-button-title-sub"),re(xc,"color","gray"),re(xc,"font-size","14pt"),S(Tr,"class","blocktitle"),re(Tr,"margin","0"),re(Tr,"width","100%"),S(Wo,"class","row"),re(Wo,"display","flex"),re(Wo,"cursor","pointer"),S(Wo,"data-bs-toggle","collapse"),S(Wo,"data-bs-target","#sexual-orientation-info"),S(Wo,"aria-expanded","false"),S(Wo,"aria-controls","sexual-orientation-info"),S(lp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(lp,"class","svelte-p0yy5r"),S(sp,"class","card card-body svelte-p0yy5r"),S(op,"class","collapse svelte-p0yy5r"),S(op,"id","sexual-orientation-info"),S(ds,"class","div-grey-box svelte-p0yy5r"),S(Hp,"class","div-white-box"),S(hu,"class","div-white-box"),S(vl,"class","grid mt svelte-p0yy5r"),Gs(()=>u[43].call(vl)),S(yl,"class","accordion-body"),S(bc,"id","panelsStayOpen-collapseNine"),S(bc,"class","accordion-collapse collapse svelte-p0yy5r"),S(bc,"aria-labelledby","panelsStayOpen-headingNine"),S(ml,"class","accordion-item"),S(up,"class","accordion-button-title"),S(Ur,"class","accordion-button collapsed"),S(Ur,"type","button"),S(Ur,"data-bs-toggle","collapse"),S(Ur,"data-bs-target","#panelsStayOpen-collapseTen"),S(Ur,"aria-expanded","false"),S(Ur,"aria-controls","panelsStayOpen-collapseTen"),S(en,"class","accordion-header svelte-p0yy5r"),S(en,"id","panelsStayOpen-headingTen"),S(dn,"class","accordion-button-title-sub"),re(vh,"color","gray"),re(vh,"font-size","14pt"),S(Fs,"class","blocktitle"),re(Fs,"margin","0"),re(Fs,"width","100%"),S(Vs,"class","row"),re(Vs,"display","flex"),re(Vs,"cursor","pointer"),S(Vs,"data-bs-toggle","collapse"),S(Vs,"data-bs-target","#quals-info"),S(Vs,"aria-expanded","false"),S(Vs,"aria-controls","quals-info"),S(ye,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ye,"class","svelte-p0yy5r"),S(qi,"class","card card-body svelte-p0yy5r"),S(Sn,"class","collapse svelte-p0yy5r"),S(Sn,"id","quals-info"),S(gl,"class","div-grey-box svelte-p0yy5r"),re(at,"color","gray"),re(at,"font-size","14pt"),S(Ye,"class","blocktitle"),re(Ye,"margin","0"),re(Ye,"width","100%"),S(Ke,"class","row"),re(Ke,"display","flex"),re(Ke,"cursor","pointer"),S(Ke,"data-bs-toggle","collapse"),S(Ke,"data-bs-target","#econ-act-info"),S(Ke,"aria-expanded","false"),S(Ke,"aria-controls","econ-act-info"),S(nr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(nr,"class","svelte-p0yy5r"),S(Pt,"class","card card-body svelte-p0yy5r"),S(Wt,"class","collapse svelte-p0yy5r"),S(Wt,"id","econ-act-info"),S(Ne,"class","div-grey-box svelte-p0yy5r"),re(yn,"color","gray"),re(yn,"font-size","14pt"),S(Hr,"class","blocktitle"),re(Hr,"margin","0"),re(Hr,"width","100%"),S(jr,"class","row"),re(jr,"display","flex"),re(jr,"cursor","pointer"),S(jr,"data-bs-toggle","collapse"),S(jr,"data-bs-target","#hours-info"),S(jr,"aria-expanded","false"),S(jr,"aria-controls","hours-info"),S(Tn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Tn,"class","svelte-p0yy5r"),S(Wn,"class","card card-body svelte-p0yy5r"),S(kn,"class","collapse svelte-p0yy5r"),S(kn,"id","hours-info"),S(ii,"class","div-grey-box svelte-p0yy5r"),re(xr,"color","gray"),re(xr,"font-size","14pt"),S(Ai,"class","blocktitle"),re(Ai,"margin","0"),re(Ai,"width","100%"),S(Dr,"class","row"),re(Dr,"display","flex"),re(Dr,"cursor","pointer"),S(Dr,"data-bs-toggle","collapse"),S(Dr,"data-bs-target","#industry-info"),S(Dr,"aria-expanded","false"),S(Dr,"aria-controls","industry-info"),S(vo,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(vo,"class","svelte-p0yy5r"),S(Ri,"class","card card-body svelte-p0yy5r"),S(Jo,"class","collapse svelte-p0yy5r"),S(Jo,"id","industry-info"),S(vn,"class","div-grey-box svelte-p0yy5r"),re(Fu,"color","gray"),re(Fu,"font-size","14pt"),S(bl,"class","blocktitle"),re(bl,"margin","0"),re(bl,"width","100%"),S(To,"class","row"),re(To,"display","flex"),re(To,"cursor","pointer"),S(To,"data-bs-toggle","collapse"),S(To,"data-bs-target","#occupation-info"),S(To,"aria-expanded","false"),S(To,"aria-controls","occupation-info"),S(Nu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Nu,"class","svelte-p0yy5r"),S(Ns,"class","card card-body svelte-p0yy5r"),S(Zl,"class","collapse svelte-p0yy5r"),S(Zl,"id","occupation-info"),S(_l,"class","div-grey-box svelte-p0yy5r"),S(Ua,"class","grid mt svelte-p0yy5r"),Gs(()=>u[44].call(Ua)),S(ql,"class","accordion-body"),S(Sc,"id","panelsStayOpen-collapseTen"),S(Sc,"class","accordion-collapse collapse svelte-p0yy5r"),S(Sc,"aria-labelledby","panelsStayOpen-headingTen"),S(Ec,"class","accordion-item"),S(Tc,"class","accordion-button-title"),S($o,"class","accordion-button collapsed"),S($o,"type","button"),S($o,"data-bs-toggle","collapse"),S($o,"data-bs-target","#panelsStayOpen-collapseEleven"),S($o,"aria-expanded","false"),S($o,"aria-controls","panelsStayOpen-collapseEleven"),S(Uu,"class","accordion-header svelte-p0yy5r"),S(Uu,"id","panelsStayOpen-headingEleven"),S(vp,"class","accordion-button-title-sub"),re(zc,"color","gray"),re(zc,"font-size","14pt"),S(Ac,"class","blocktitle"),re(Ac,"margin","0"),re(Ac,"width","100%"),S(ga,"class","row"),re(ga,"display","flex"),re(ga,"cursor","pointer"),S(ga,"data-bs-toggle","collapse"),S(ga,"data-bs-target","#method-travel-work-info"),S(ga,"aria-expanded","false"),S(ga,"aria-controls","method-travel-work-info"),S(Zu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Zu,"class","svelte-p0yy5r"),S(ju,"class","card card-body svelte-p0yy5r"),S(es,"class","collapse svelte-p0yy5r"),S(es,"id","method-travel-work-info"),S(fi,"class","div-grey-box svelte-p0yy5r"),re(ja,"color","gray"),re(ja,"font-size","14pt"),S(Gu,"class","blocktitle"),re(Gu,"margin","0"),re(Gu,"width","100%"),S(xl,"class","row"),re(xl,"display","flex"),re(xl,"cursor","pointer"),S(xl,"data-bs-toggle","collapse"),S(xl,"data-bs-target","#method-travel-study-info"),S(xl,"aria-expanded","false"),S(xl,"aria-controls","method-travel-study-info"),S(wl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(wl,"class","svelte-p0yy5r"),S(_p,"class","card card-body svelte-p0yy5r"),S(ts,"class","collapse svelte-p0yy5r"),S(ts,"id","method-travel-study-info"),S(yu,"class","div-grey-box svelte-p0yy5r"),S(Qp,"class","div-white-box"),re(Th,"color","gray"),re(Th,"font-size","14pt"),S(gu,"class","blocktitle"),re(gu,"margin","0"),re(gu,"width","100%"),S(qs,"class","row"),re(qs,"display","flex"),re(qs,"cursor","pointer"),S(qs,"data-bs-toggle","collapse"),S(qs,"data-bs-target","#distance-travel-work-info"),S(qs,"aria-expanded","false"),S(qs,"aria-controls","distance-travel-work-info"),S(zh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(zh,"class","svelte-p0yy5r"),S(Pc,"class","card card-body svelte-p0yy5r"),S(Ah,"class","collapse svelte-p0yy5r"),S(Ah,"id","distance-travel-work-info"),S(vu,"class","div-grey-box svelte-p0yy5r"),re(wp,"color","gray"),re(wp,"font-size","14pt"),S(Dc,"class","blocktitle"),re(Dc,"margin","0"),re(Dc,"width","100%"),S(Sl,"class","row"),re(Sl,"display","flex"),re(Sl,"cursor","pointer"),S(Sl,"data-bs-toggle","collapse"),S(Sl,"data-bs-target","#distance-travel-study-info"),S(Sl,"aria-expanded","false"),S(Sl,"aria-controls","distance-travel-study-info"),S(rs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(rs,"class","svelte-p0yy5r"),S(Sp,"class","card card-body svelte-p0yy5r"),S(Ep,"class","collapse svelte-p0yy5r"),S(Ep,"id","distance-travel-study-info"),S(Hu,"class","div-grey-box svelte-p0yy5r"),S(Aa,"class","grid mt svelte-p0yy5r"),Gs(()=>u[45].call(Aa)),S(ms,"class","accordion-body"),S(Us,"id","panelsStayOpen-collapseEleven"),S(Us,"class","accordion-collapse collapse svelte-p0yy5r"),S(Us,"aria-labelledby","panelsStayOpen-headingEleven"),S(Gl,"class","accordion-item"),S(sm,"class","accordion-button-title"),S(Lc,"class","accordion-button collapsed"),S(Lc,"type","button"),S(Lc,"data-bs-toggle","collapse"),S(Lc,"data-bs-target","#panelsStayOpen-collapseTwelve"),S(Lc,"aria-expanded","false"),S(Lc,"aria-controls","panelsStayOpen-collapseTwelveTwelve"),S(Vf,"class","accordion-header svelte-p0yy5r"),S(Vf,"id","panelsStayOpen-headingTwelve"),S(lm,"class","accordion-button-title-sub"),re(Ff,"color","gray"),re(Ff,"font-size","14pt"),S(Ip,"class","blocktitle"),re(Ip,"margin","0"),re(Ip,"width","100%"),S(Xu,"class","row"),re(Xu,"display","flex"),re(Xu,"cursor","pointer"),S(Xu,"data-bs-toggle","collapse"),S(Xu,"data-bs-target","#address-1yr-info"),S(Xu,"aria-expanded","false"),S(Xu,"aria-controls","address-1yr-info"),S(qf,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(qf,"class","svelte-p0yy5r"),S(Uf,"class","card card-body svelte-p0yy5r"),S(Nf,"class","collapse svelte-p0yy5r"),S(Nf,"id","address-1yr-info"),S(Ch,"class","div-grey-box svelte-p0yy5r"),re(jf,"color","gray"),re(jf,"font-size","14pt"),S(Tp,"class","blocktitle"),re(Tp,"margin","0"),re(Tp,"width","100%"),S(Wu,"class","row"),re(Wu,"display","flex"),re(Wu,"cursor","pointer"),S(Wu,"data-bs-toggle","collapse"),S(Wu,"data-bs-target","#year-arr-info"),S(Wu,"aria-expanded","false"),S(Wu,"aria-controls","year-arr-info"),S(Kf,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Kf,"class","svelte-p0yy5r"),S(Gf,"class","card card-body svelte-p0yy5r"),S(Zf,"class","collapse svelte-p0yy5r"),S(Zf,"id","year-arr-info"),S(Dh,"class","div-grey-box svelte-p0yy5r"),S(Ny,"class","div-white-box"),S(bu,"class","grid mt svelte-p0yy5r"),Gs(()=>u[46].call(bu)),S(Rc,"class","accordion-body"),S(tf,"id","panelsStayOpen-collapseTwelve"),S(tf,"class","accordion-collapse collapse svelte-p0yy5r"),S(tf,"aria-labelledby","panelsStayOpen-headingTwelve"),S(ef,"class","accordion-item"),S(h,"class","accordion-item")},m(de,Ve){Ae(de,h,Ve),w(h,f),w(f,y),w(y,_),w(_,v),w(h,a),w(h,P),w(P,A),w(A,F),w(A,j),w(A,U),w(A,he),w(he,ie),w(A,De),w(A,we),w(we,Ce),w(Ce,Ue),w(Ue,At),w(At,Dt),w(At,ht),ht.innerHTML=tt,w(Ce,Ar),w(Ce,yr),w(yr,tr),w(tr,wt),w(tr,bt),w(bt,kr),w(kr,Rt),w(Ce,zr),w(Ce,Qe),Qt(ar,Qe,null),w(Ce,$r),Zs&&Zs.m(Ce,null),w(Ce,si),w(Ce,wr),Qt(mt,wr,null),w(we,nt),w(we,cr),w(cr,ji),w(ji,la),w(cr,Bi),Qt(zi,cr,null),w(we,li),w(we,tn),w(tn,rr),w(rr,Oi),w(Oi,Za),w(Oi,Ir),Ir.innerHTML=Bt,w(tn,rn),w(tn,mi),w(mi,Zr),w(Zr,eo),w(Zr,Ut),w(Ut,yi),w(yi,Or),w(tn,bi),Qt(Gr,tn,null),Vr=Ks(we,u[35].bind(we)),w(h,xi),w(h,wi),w(wi,Mr),w(Mr,er),w(er,Pr),w(Pr,Yn),w(wi,jn),w(wi,Vn),w(Vn,Jn),w(Jn,vi),w(Jn,_n),w(Jn,to),w(Jn,An),w(An,is),w(An,bn),w(bn,Pi),w(Pi,ei),w(ei,nn),w(nn,Qn),w(nn,zn),zn.innerHTML=Wr,w(Pi,N),w(Pi,G),w(G,H),w(H,$),w(H,oe),w(oe,ve),w(ve,ge),w(Pi,X),Qt(ne,Pi,null),w(bn,ke),w(bn,qe),w(qe,Ze),w(Ze,ze),w(ze,je),w(ze,ot),ot.innerHTML=st,w(qe,Re),w(qe,$e),w($e,He),w(He,et),w(He,Mt),w(Mt,We),w(We,qt),w(qe,pr),Qt(kt,qe,null),w(bn,ir),w(bn,Vt),w(Vt,Fr),w(Fr,Ft),w(Ft,_r),w(Ft,hr),hr.innerHTML=Ht,w(Vt,lr),w(Vt,gi),w(gi,Pn),w(Pn,Ei),w(Pn,Si),w(Si,an),w(an,on),w(Vt,br),Qt(Gi,Vt,null),sn=Ks(bn,u[36].bind(bn)),w(h,Yr),w(h,ln),w(ln,Er),w(Er,ui),w(ui,Vi),w(Vi,Ys),w(ln,Ki),w(ln,$n),w($n,ti),w(ti,Jr),w(ti,ci),w(ti,ro),w(ti,Pa),w(Pa,Qu),w(ti,ns),w(ti,Fn),w(Fn,Zn),w(Zn,Ca),w(Ca,Da),w(Da,go),w(Da,ua),ua.innerHTML=Il,w(Zn,as),w(Zn,Co),w(Co,Fi),w(Fi,Ci),w(Fi,un),w(un,Se),w(Se,Hi),w(Zn,Nn),Qt(Cr,Zn,null),w(Fn,ca),w(Fn,Ii),w(Ii,Nr),w(Nr,Ma),w(Ma,ys),w(Ma,os),os.innerHTML=jc,w(Ii,Wl),w(Ii,vs),w(vs,ss),w(ss,La),w(ss,ea),w(ea,ba),w(ba,Zc),w(Ii,gs),Qt(Cn,Ii,null),w(Fn,$u),w(Fn,hi),w(hi,cn),w(cn,ri),w(ri,ls),w(ri,Ra),Ra.innerHTML=xa,w(hi,us),w(hi,Ba),w(Ba,xn),w(xn,Xi),w(xn,Di),w(Di,Wi),w(Wi,Xt),w(hi,Dn),Qt(Do,hi,null),Eu=Ks(Fn,u[37].bind(Fn)),w(h,io),w(h,Js),w(Js,Qs),w(Qs,ha),w(ha,Oa),w(Oa,ta),w(Js,ec),w(Js,Mo),w(Mo,wn),w(wn,_s),w(wn,Gn),w(wn,hn),w(wn,Tl),w(Tl,no),w(wn,Qr),w(wn,Fe),w(Fe,It),w(It,Ni),w(Ni,Kn),w(Kn,Al),w(Kn,el),el.innerHTML=bs,w(It,tl),w(It,pa),w(pa,cs),w(cs,zl),w(cs,wa),w(wa,Yl),w(Yl,rl),w(It,ao),Qt(oo,It,null),w(Fe,il),w(Fe,Lo),w(Lo,Ti),w(Ti,so),w(so,Pl),w(so,nl),nl.innerHTML=tc,w(Lo,rc),w(Lo,hs),w(hs,xs),w(xs,ic),w(xs,fa),w(fa,al),w(al,Jl),w(Lo,nc),Qt(ps,Lo,null),w(Fe,ol),w(Fe,Ro),w(Ro,ra),w(ra,Lr),w(Lr,_o),w(Lr,lo),lo.innerHTML=sl,w(Ro,dr),w(Ro,Rr),w(Rr,Hn),w(Hn,ws),w(Hn,Ga),w(Ga,Es),w(Es,Gc),w(Ro,Kc),Qt(bo,Ro,null),Bo=Ks(Fe,u[38].bind(Fe)),w(h,Oo),w(h,Kr),w(Kr,Ea),w(Ea,xo),w(xo,_i),w(_i,ft),w(Kr,Sa),w(Kr,Vo),w(Vo,Un),w(Un,uo),w(Un,Su),w(Un,rt),w(Un,ll),w(ll,Cl),w(Un,Fo),w(Un,Mi),w(Mi,Yi),w(Yi,Ka),w(Ka,co),w(co,ka),w(co,Va),Va.innerHTML=Td,w(co,ac),w(Yi,Fh),w(Yi,Ql),w(Ql,Ha),w(Ha,wo),w(Ha,or),w(or,No),w(No,Uo),w(Yi,da),Qt(qo,Yi,null),w(Mi,Dl),w(Mi,ma),w(ma,Ji),w(Ji,jo),w(jo,Et),w(jo,yt),yt.innerHTML=Cp,w(ma,Fa),w(ma,Xa),w(Xa,Mn),w(Mn,Ss),w(Mn,$l),w($l,ku),w(ku,qr),w(ma,ia),Qt(eu,ma,null),w(Mi,tu),w(Mi,ks),w(ks,ya),w(ya,Ln),w(Ln,Iu),w(Ln,ho),ho.innerHTML=Dp,w(Ln,Tu),w(ks,oc),w(ks,ru),w(ru,Is),w(Is,iu),w(Is,nu),w(nu,Ts),w(Ts,Ml),w(ks,Hc),Qt(Eo,ks,null),w(Mi,Zo),w(Mi,As),w(As,po),w(po,zs),w(zs,Xc),w(zs,n),n.innerHTML=s,w(As,o),w(As,c),w(c,m),w(m,E),w(m,k),w(k,z),w(z,B),w(As,Z),Qt(Y,As,null),J=Ks(Mi,u[39].bind(Mi)),w(h,Q),w(h,ue),w(ue,le),w(le,fe),w(fe,ae),w(ae,me),w(ue,xe),w(ue,Ie),w(Ie,Me),w(Me,Le),w(Me,Ge),w(Me,Je),w(Me,Xe),w(Xe,ct),w(Me,St),w(Me,vt),w(vt,_t),w(_t,sr),w(sr,lt),w(lt,Nt),w(lt,Gt),Gt.innerHTML=jt,w(_t,Ot),w(_t,Zt),w(Zt,Ct),w(Ct,Lt),w(Ct,pn),w(pn,Ui),w(Ui,Ia),w(_t,na),Qt(pi,_t,null),w(vt,En),w(vt,qn),w(qn,Qi),w(Qi,fo),w(fo,Wa),w(fo,Ya),Ya.innerHTML=Ps,w(qn,sc),w(qn,Cs),w(Cs,Go),w(Go,Au),w(Go,ul),w(ul,Ko),w(Ko,lc),w(qn,Ds),Qt($i,qn,null),w(vt,cl),w(vt,Ja),w(Ja,Na),w(Na,vr),w(vr,So),w(vr,aa),aa.innerHTML=uc,w(Ja,gf),w(Ja,Ll),w(Ll,cc),w(cc,hc),w(cc,zu),w(zu,Rl),w(Rl,Wc),w(Ja,_f),Qt(Ms,Ja,null),w(vt,mo),w(vt,Bl),w(Bl,hl),w(hl,pc),w(pc,ry),w(pc,Nh),Nh.innerHTML=Wv,w(Bl,bf),w(Bl,Uh),w(Uh,Pu),w(Pu,Ad),w(Pu,Ls),w(Ls,fc),w(fc,iy),w(Bl,ny),Qt(Yc,Bl,null),w(Bl,ay),w(Bl,oy),w(vt,sy),w(vt,Cu),w(Cu,Rs),w(Rs,dc),w(dc,Jc),w(dc,qh),qh.innerHTML=oa,w(Cu,Mp),w(Cu,Qc),w(Qc,Du),w(Du,Lp),w(Du,au),w(au,Rp),w(Rp,zd),w(Cu,jh),Qt(Mu,Cu,null),w(vt,xf),w(vt,Ol),w(Ol,Ho),w(Ho,mc),w(mc,wf),w(mc,Zh),Zh.innerHTML=ly,w(Ol,Ef),w(Ol,ko),w(ko,Gh),w(Gh,uy),w(Gh,Kh),w(Kh,Sf),w(Sf,Pd),w(Ol,$c),Qt(eh,Ol,null),w(Ol,cy),w(Ol,Cd),hy=Ks(vt,u[40].bind(vt)),w(h,py),w(h,th),w(th,Vl),w(Vl,ou),w(ou,rh),w(rh,Hh),w(th,pl),w(th,ih),w(ih,su),w(su,fy),w(su,kf),w(su,dy),w(su,Bp),w(Bp,my),w(su,yy),w(su,Bs),w(Bs,Rn),w(Rn,Fl),w(Fl,Lu),w(Lu,Dd),w(Lu,Xh),Xh.innerHTML=iv,w(Rn,vy),w(Rn,Wh),w(Wh,Yh),w(Yh,Md),w(Yh,Jh),w(Jh,If),w(If,Qh),w(Rn,Ld),Qt(vc,Rn,null),w(Bs,Op),w(Bs,Br),w(Br,fl),w(fl,Io),w(Io,nh),w(Io,ah),ah.innerHTML=Yv,w(Br,gy),w(Br,$h),w($h,ep),w(ep,_y),w(ep,tp),w(tp,Tf),w(Tf,by),w(Br,xy),Qt(lu,Br,null),w(Bs,oh),w(Bs,Vp),nv=Ks(Bs,u[41].bind(Bs)),w(h,wy),w(h,sh),w(sh,lh),w(lh,Os),w(Os,Ru),w(Ru,rp),w(sh,Xo),w(sh,dl),w(dl,fn),w(fn,Fp),w(fn,yo),w(fn,Rd),w(fn,ip),w(ip,Ey),w(fn,Bd),w(fn,fs),w(fs,Nl),w(Nl,Ul),w(Ul,uu),w(uu,ch),w(uu,gc),gc.innerHTML=av,w(Nl,Od),w(Nl,np),w(np,hh),w(hh,Vd),w(hh,ph),w(ph,Np),w(Np,Sy),w(Nl,ky),Qt(_c,Nl,null),w(fs,Fd),w(fs,fh),w(fs,Nd),w(fs,dh),Af=Ks(fs,u[42].bind(fs)),w(h,Up),w(h,ml),w(ml,ap),w(ap,cu),w(cu,qp),w(qp,mh),w(ml,zf),w(ml,bc),w(bc,yl),w(yl,Ud),w(yl,qd),w(yl,Iy),w(yl,Zp),w(Zp,Gp),w(yl,Pf),w(yl,vl),w(vl,ds),w(ds,Wo),w(Wo,Tr),w(Tr,Ty),w(Tr,xc),xc.innerHTML=Kp,w(ds,Ay),w(ds,op),w(op,sp),w(sp,zy),w(sp,lp),w(lp,Cf),w(Cf,Py),w(ds,jd),Qt(wc,ds,null),w(vl,Zd),w(vl,Hp),w(vl,Xp),w(vl,hu),Gd=Ks(vl,u[43].bind(vl)),w(h,yh),w(h,Ec),w(Ec,en),w(en,Ur),w(Ur,up),w(up,Kd),w(Ec,Hd),w(Ec,Sc),w(Sc,ql),w(ql,Df),w(ql,Bu),w(ql,Xd),w(ql,dn),w(dn,cp),w(ql,fu),w(ql,Ua),w(Ua,gl),w(gl,Vs),w(Vs,Fs),w(Fs,du),w(Fs,vh),vh.innerHTML=ov,w(gl,Cy),w(gl,Sn),w(Sn,qi),w(qi,Wd),w(qi,e),w(qi,t),w(qi,i),w(qi,l),w(qi,p),w(qi,d),w(qi,x),w(qi,I),w(qi,C),w(qi,L),w(qi,O),w(qi,q),w(qi,K),w(qi,W),w(qi,se),w(qi,ce),w(qi,ye),w(ye,pe),w(pe,Ee),w(gl,Te),Qt(Pe,gl,null),w(Ua,Be),w(Ua,Ne),w(Ne,Ke),w(Ke,Ye),w(Ye,xt),w(Ye,at),at.innerHTML=zt,w(Ne,ut),w(Ne,Wt),w(Wt,Pt),w(Pt,gt),w(Pt,nr),w(nr,Kt),w(Kt,Sr),w(Ne,Tt),Qt(gr,Ne,null),w(Ua,Li),w(Ua,ii),w(ii,jr),w(jr,Hr),w(Hr,mn),w(Hr,yn),yn.innerHTML=va,w(ii,qa),w(ii,kn),w(kn,Wn),w(Wn,In),w(Wn,Tn),w(Tn,fr),w(fr,ni),w(ii,Xr),Qt(mr,ii,null),w(Ua,Qa),w(Ua,vn),w(vn,Dr),w(Dr,Ai),w(Ai,Ta),w(Ai,xr),xr.innerHTML=Ou,w(vn,Yo),w(vn,Jo),w(Jo,Ri),w(Ri,jl),w(Ri,vo),w(vo,Vu),w(Vu,kc),w(vn,gh),Qt(Qo,vn,null),w(Ua,_h),w(Ua,_l),w(_l,To),w(To,bl),w(bl,Wp),w(bl,Fu),Fu.innerHTML=Ic,w(_l,hp),w(_l,Zl),w(Zl,Ns),w(Ns,bh),w(Ns,Nu),w(Nu,xh),w(xh,pp),w(_l,fp),Qt(mu,_l,null),Yp=Ks(Ua,u[44].bind(Ua)),w(h,dp),w(h,Gl),w(Gl,Uu),w(Uu,$o),w($o,Tc),w(Tc,wh),w(Gl,mp),w(Gl,Us),w(Us,ms),w(ms,Eh),w(ms,Mf),w(ms,Lf),w(ms,vp),w(vp,Rf),w(ms,Dy),w(ms,Aa),w(Aa,fi),w(fi,ga),w(ga,Ac),w(Ac,qu),w(Ac,zc),zc.innerHTML=sv,w(fi,Jp),w(fi,es),w(es,ju),w(ju,gp),w(ju,Zu),w(Zu,Sh),w(Sh,Bf),w(fi,Yd),Qt(Kl,fi,null),w(Aa,Jd),w(Aa,yu),w(yu,xl),w(xl,Gu),w(Gu,Qd),w(Gu,ja),ja.innerHTML=$d,w(yu,em),w(yu,ts),w(ts,_p),w(_p,tm),w(_p,wl),w(wl,Ku),w(Ku,kh),w(yu,Ih),Qt(El,yu,null),w(Aa,rm),w(Aa,Qp),w(Aa,im),w(Aa,vu),w(vu,qs),w(qs,gu),w(gu,_u),w(gu,Th),Th.innerHTML=My,w(vu,Of),w(vu,Ah),w(Ah,Pc),w(Pc,nm),w(Pc,zh),w(zh,bp),w(bp,am),w(vu,xp),Qt(Cc,vu,null),w(Aa,$p),w(Aa,Hu),w(Hu,Sl),w(Sl,Dc),w(Dc,Ly),w(Dc,wp),wp.innerHTML=Jv,w(Hu,Ry),w(Hu,Ep),w(Ep,Sp),w(Sp,By),w(Sp,rs),w(rs,Ph),w(Ph,om),w(Hu,kp),Qt(Mc,Hu,null),r0=Ks(Aa,u[45].bind(Aa)),w(h,Qv),w(h,ef),w(ef,Vf),w(Vf,Lc),w(Lc,sm),w(sm,$v),w(ef,eg),w(ef,tf),w(tf,Rc),w(Rc,tg),w(Rc,lv),w(Rc,rg),w(Rc,lm),w(lm,ig),w(Rc,ng),w(Rc,bu),w(bu,Ch),w(Ch,Xu),w(Xu,Ip),w(Ip,ag),w(Ip,Ff),Ff.innerHTML=_w,w(Ch,og),w(Ch,Nf),w(Nf,Uf),w(Uf,sg),w(Uf,qf),w(qf,Vy),w(Vy,lg),w(Ch,ug),Qt(rf,Ch,null),w(bu,cg),w(bu,Dh),w(Dh,Wu),w(Wu,Tp),w(Tp,hg),w(Tp,jf),jf.innerHTML=bw,w(Dh,pg),w(Dh,Zf),w(Zf,Gf),w(Gf,fg),w(Gf,Kf),w(Kf,Fy),w(Fy,dg),w(Dh,mg),Qt(nf,Dh,null),w(bu,yg),w(bu,Ny),i0=Ks(bu,u[46].bind(bu)),js=!0},p(de,Ve){(!js||Ve[0]&2)&&V!==(V=de[1].name+"")&&dt(j,V);const um={};Ve[0]&2&&(um.data=de[1]&&de[14](["age"])),Ve[0]&4096&&(um.zKey=de[12]),ar.$set(um),!de[5]&&de[13]?Zs?Zs.p(de,Ve):(Zs=X2(de),Zs.c(),Zs.m(Ce,si)):Zs&&(Zs.d(1),Zs=null);const cm={};Ve[0]&2&&(cm.data=de[1]&&de[14](["age"])),Ve[0]&4096&&(cm.zkey=de[12]),mt.$set(cm);const Hf={};Ve[0]&2&&(Hf.data=de[1]&&de[14](["sex"])),Ve[0]&4096&&(Hf.zKey=de[12]),Ve[0]&8192&&(Hf.label=de[13]),zi.$set(Hf);const Xf={};Ve[0]&2&&(Xf.data=de[1]&&de[14](["hh_size"])),Ve[0]&4096&&(Xf.zKey=de[12]),Ve[0]&8192&&(Xf.label=de[13]),Gr.$set(Xf),(!js||Ve[0]&2)&&Zi!==(Zi=de[1].name+"")&&dt(_n,Zi);const Yu={};Ve[0]&2&&(Yu.data=de[1]&&de[14](["cob"])),Ve[0]&4096&&(Yu.zKey=de[12]),Ve[0]&8192&&(Yu.label=de[13]),ne.$set(Yu);const Wf={};Ve[0]&2&&(Wf.data=de[1]&&de[14](["passport"])),Ve[0]&4096&&(Wf.zKey=de[12]),Ve[0]&8192&&(Wf.label=de[13]),kt.$set(Wf);const Bc={};Ve[0]&2&&(Bc.data=de[1]&&de[14](["natid"])),Ve[0]&4096&&(Bc.zKey=de[12]),Ve[0]&8192&&(Bc.label=de[13]),Gi.$set(Bc),(!js||Ve[0]&2)&&ki!==(ki=de[1].name+"")&&dt(ci,ki);const kl={};Ve[0]&2&&(kl.data=de[1]&&de[14](["mainlang"])),Ve[0]&4096&&(kl.zKey=de[12]),Ve[0]&8192&&(kl.label=de[13]),Cr.$set(kl);const Yf={};Ve[0]&2&&(Yf.data=de[1]&&de[14](["irish"])),Ve[0]&4096&&(Yf.zKey=de[12]),Ve[0]&8192&&(Yf.label=de[13]),Cn.$set(Yf);const af={};Ve[0]&2&&(af.data=de[1]&&de[14](["ulster"])),Ve[0]&4096&&(af.zKey=de[12]),Ve[0]&8192&&(af.label=de[13]),Do.$set(af),(!js||Ve[0]&2)&&$s!==($s=de[1].name+"")&&dt(Gn,$s);const hm={};Ve[0]&2&&(hm.data=de[1]&&de[14](["religion"])),Ve[0]&4096&&(hm.zKey=de[12]),Ve[0]&8192&&(hm.label=de[13]),oo.$set(hm);const Jf={};Ve[0]&2&&(Jf.data=de[1]&&de[14](["religion_or_religion_brought_up_in"])),Ve[0]&4096&&(Jf.zKey=de[12]),Ve[0]&8192&&(Jf.label=de[13]),ps.$set(Jf);const of={};Ve[0]&2&&(of.data=de[1]&&de[14](["ethnic"])),Ve[0]&4096&&(of.zKey=de[12]),Ve[0]&8192&&(of.label=de[13]),bo.$set(of),(!js||Ve[0]&2)&&Xn!==(Xn=de[1].name+"")&&dt(Su,Xn);const Qf={};Ve[0]&2&&(Qf.data=de[1]&&de[14](["general_health"])),Ve[0]&4096&&(Qf.zKey=de[12]),Ve[0]&8192&&(Qf.label=de[13]),qo.$set(Qf);const $f={};Ve[0]&2&&($f.data=de[1]&&de[14](["long_term_disability"])),Ve[0]&4096&&($f.zKey=de[12]),Ve[0]&8192&&($f.label=de[13]),eu.$set($f);const ed={};Ve[0]&2&&(ed.data=de[1]&&de[14](["number_of_long_term_health"])),Ve[0]&4096&&(ed.zKey=de[12]),Ve[0]&8192&&(ed.label=de[13]),Eo.$set(ed);const td={};Ve[0]&2&&(td.data=de[1]&&de[14](["provision_care"])),Ve[0]&4096&&(td.zKey=de[12]),Ve[0]&8192&&(td.label=de[13]),Y.$set(td),(!js||Ve[0]&2)&&Oe!==(Oe=de[1].name+"")&&dt(Ge,Oe);const Ap={};Ve[0]&2&&(Ap.data=de[1]&&de[14](["accommodation_type"])),Ve[0]&4096&&(Ap.zKey=de[12]),Ve[0]&8192&&(Ap.label=de[13]),pi.$set(Ap);const rd={};Ve[0]&2&&(rd.data=de[1]&&de[14](["number_of_adaptations"])),Ve[0]&4096&&(rd.zKey=de[12]),Ve[0]&8192&&(rd.label=de[13]),$i.$set(rd);const Oc={};Ve[0]&2&&(Oc.data=de[1]&&de[14](["central_heating"])),Ve[0]&4096&&(Oc.zKey=de[12]),Ve[0]&8192&&(Oc.label=de[13]),Ms.$set(Oc);const id={};Ve[0]&2&&(id.data=de[1]&&de[14](["renewable_energy"])),Ve[0]&4096&&(id.zKey=de[12]),Ve[0]&8192&&(id.label=de[13]),Yc.$set(id);const sf={};Ve[0]&2&&(sf.data=de[1]&&de[14](["hh_tenure"])),Ve[0]&4096&&(sf.zKey=de[12]),Ve[0]&8192&&(sf.label=de[13]),Mu.$set(sf);const pm={};Ve[0]&2&&(pm.data=de[1]&&de[14](["car_or_van"])),Ve[0]&4096&&(pm.zKey=de[12]),Ve[0]&8192&&(pm.label=de[13]),eh.$set(pm),(!js||Ve[0]&2)&&yc!==(yc=de[1].name+"")&&dt(kf,yc);const nd={};Ve[0]&2&&(nd.data=de[1]&&de[14](["number_of_dependent_children_households"])),Ve[0]&4096&&(nd.zKey=de[12]),Ve[0]&8192&&(nd.label=de[13]),vc.$set(nd);const lf={};Ve[0]&2&&(lf.data=de[1]&&de[14](["household_composition_households"])),Ve[0]&4096&&(lf.zKey=de[12]),Ve[0]&8192&&(lf.label=de[13]),lu.$set(lf),(!js||Ve[0]&2)&&uh!==(uh=de[1].name+"")&&dt(yo,uh);const ad={};Ve[0]&2&&(ad.data=de[1]&&de[14](["marital_and_civil_partnership_status"])),Ve[0]&4096&&(ad.zKey=de[12]),Ve[0]&8192&&(ad.label=de[13]),_c.$set(ad),(!js||Ve[0]&2)&&jp!==(jp=de[1].name+"")&&dt(qd,jp);const od={};Ve[0]&2&&(od.data=de[1]&&de[14](["sexual_orientation_by_broad_age_band"])),Ve[0]&4096&&(od.zKey=de[12]),Ve[0]&8192&&(od.label=de[13]),wc.$set(od),(!js||Ve[0]&2)&&pu!==(pu=de[1].name+"")&&dt(Bu,pu);const zp={};Ve[0]&2&&(zp.data=de[1]&&de[14](["highest_level_of_qualifications"])),Ve[0]&4096&&(zp.zKey=de[12]),Ve[0]&8192&&(zp.label=de[13]),Pe.$set(zp);const sd={};Ve[0]&2&&(sd.data=de[1]&&de[14](["economic_activity"])),Ve[0]&4096&&(sd.zKey=de[12]),Ve[0]&8192&&(sd.label=de[13]),gr.$set(sd);const ld={};Ve[0]&2&&(ld.data=de[1]&&de[14](["hours_worked"])),Ve[0]&4096&&(ld.zKey=de[12]),Ve[0]&8192&&(ld.label=de[13]),mr.$set(ld);const ud={};Ve[0]&2&&(ud.data=de[1]&&de[14](["industry_of_employment"])),Ve[0]&4096&&(ud.zKey=de[12]),Ve[0]&8192&&(ud.label=de[13]),Qo.$set(ud);const cd={};Ve[0]&2&&(cd.data=de[1]&&de[14](["occupation_1_digit"])),Ve[0]&4096&&(cd.zKey=de[12]),Ve[0]&8192&&(cd.label=de[13]),mu.$set(cd),(!js||Ve[0]&2)&&yp!==(yp=de[1].name+"")&&dt(Mf,yp);const Mh={};Ve[0]&2&&(Mh.data=de[1]&&de[14](["method_of_travel_to_work"])),Ve[0]&4096&&(Mh.zKey=de[12]),Ve[0]&8192&&(Mh.label=de[13]),Kl.$set(Mh);const uf={};Ve[0]&2&&(uf.data=de[1]&&de[14](["method_of_travel_to_study"])),Ve[0]&4096&&(uf.zKey=de[12]),Ve[0]&8192&&(uf.label=de[13]),El.$set(uf);const Vc={};Ve[0]&2&&(Vc.data=de[1]&&de[14](["distance_travelled_to_work"])),Ve[0]&4096&&(Vc.zKey=de[12]),Ve[0]&8192&&(Vc.label=de[13]),Cc.$set(Vc);const Fc={};Ve[0]&2&&(Fc.data=de[1]&&de[14](["distance_travelled_to_study"])),Ve[0]&4096&&(Fc.zKey=de[12]),Ve[0]&8192&&(Fc.label=de[13]),Mc.$set(Fc),(!js||Ve[0]&2)&&Oy!==(Oy=de[1].name+"")&&dt(lv,Oy);const hd={};Ve[0]&2&&(hd.data=de[1]&&de[14](["address_one_year_ago"])),Ve[0]&4096&&(hd.zKey=de[12]),Ve[0]&8192&&(hd.label=de[13]),rf.$set(hd);const cf={};Ve[0]&2&&(cf.data=de[1]&&de[14](["year_of_arrival"])),Ve[0]&4096&&(cf.zKey=de[12]),Ve[0]&8192&&(cf.label=de[13]),nf.$set(cf)},i(de){js||(it(ar.$$.fragment,de),it(mt.$$.fragment,de),it(zi.$$.fragment,de),it(Gr.$$.fragment,de),it(ne.$$.fragment,de),it(kt.$$.fragment,de),it(Gi.$$.fragment,de),it(Cr.$$.fragment,de),it(Cn.$$.fragment,de),it(Do.$$.fragment,de),it(oo.$$.fragment,de),it(ps.$$.fragment,de),it(bo.$$.fragment,de),it(qo.$$.fragment,de),it(eu.$$.fragment,de),it(Eo.$$.fragment,de),it(Y.$$.fragment,de),it(pi.$$.fragment,de),it($i.$$.fragment,de),it(Ms.$$.fragment,de),it(Yc.$$.fragment,de),it(Mu.$$.fragment,de),it(eh.$$.fragment,de),it(vc.$$.fragment,de),it(lu.$$.fragment,de),it(_c.$$.fragment,de),it(wc.$$.fragment,de),it(Pe.$$.fragment,de),it(gr.$$.fragment,de),it(mr.$$.fragment,de),it(Qo.$$.fragment,de),it(mu.$$.fragment,de),it(Kl.$$.fragment,de),it(El.$$.fragment,de),it(Cc.$$.fragment,de),it(Mc.$$.fragment,de),it(rf.$$.fragment,de),it(nf.$$.fragment,de),js=!0)},o(de){pt(ar.$$.fragment,de),pt(mt.$$.fragment,de),pt(zi.$$.fragment,de),pt(Gr.$$.fragment,de),pt(ne.$$.fragment,de),pt(kt.$$.fragment,de),pt(Gi.$$.fragment,de),pt(Cr.$$.fragment,de),pt(Cn.$$.fragment,de),pt(Do.$$.fragment,de),pt(oo.$$.fragment,de),pt(ps.$$.fragment,de),pt(bo.$$.fragment,de),pt(qo.$$.fragment,de),pt(eu.$$.fragment,de),pt(Eo.$$.fragment,de),pt(Y.$$.fragment,de),pt(pi.$$.fragment,de),pt($i.$$.fragment,de),pt(Ms.$$.fragment,de),pt(Yc.$$.fragment,de),pt(Mu.$$.fragment,de),pt(eh.$$.fragment,de),pt(vc.$$.fragment,de),pt(lu.$$.fragment,de),pt(_c.$$.fragment,de),pt(wc.$$.fragment,de),pt(Pe.$$.fragment,de),pt(gr.$$.fragment,de),pt(mr.$$.fragment,de),pt(Qo.$$.fragment,de),pt(mu.$$.fragment,de),pt(Kl.$$.fragment,de),pt(El.$$.fragment,de),pt(Cc.$$.fragment,de),pt(Mc.$$.fragment,de),pt(rf.$$.fragment,de),pt(nf.$$.fragment,de),js=!1},d(de){de&&T(h),$t(ar),Zs&&Zs.d(),$t(mt),$t(zi),$t(Gr),Vr(),$t(ne),$t(kt),$t(Gi),sn(),$t(Cr),$t(Cn),$t(Do),Eu(),$t(oo),$t(ps),$t(bo),Bo(),$t(qo),$t(eu),$t(Eo),$t(Y),J(),$t(pi),$t($i),$t(Ms),$t(Yc),$t(Mu),$t(eh),hy(),$t(vc),$t(lu),nv(),$t(_c),Af(),$t(wc),Gd(),$t(Pe),$t(gr),$t(mr),$t(Qo),$t(mu),Yp(),$t(Kl),$t(El),$t(Cc),$t(Mc),r0(),$t(rf),$t(nf),i0()}}}function X2(u){let h,f,y,_,v;return{c(){h=D("div"),f=zo("svg"),y=zo("rect"),_=_e(),v=ee(u[13]),this.h()},l(a){h=M(a,"DIV",{class:!0});var P=R(h);f=Po(P,"svg",{width:!0,height:!0,style:!0});var A=R(f);y=Po(A,"rect",{width:!0,height:!0,style:!0}),R(y).forEach(T),A.forEach(T),_=be(P),v=te(P,u[13]),P.forEach(T),this.h()},h(){S(y,"width","25"),S(y,"height","4"),re(y,"fill","#CEDC20"),S(f,"width","25"),S(f,"height","4"),re(f,"display","inline-block"),re(f,"margin-bottom","3px"),S(h,"class","text-small muted; ")},m(a,P){Ae(a,h,P),w(h,f),w(f,y),w(h,_),w(h,v)},p(a,P){P[0]&8192&&dt(v,a[13])},d(a){a&&T(h)}}}function iI(u){let h,f,y=u[1]&&u[2]&&L2(u);return{c(){y&&y.c(),h=_a()},l(_){y&&y.l(_),h=_a()},m(_,v){y&&y.m(_,v),Ae(_,h,v),f=!0},p(_,v){_[1]&&_[2]?y?(y.p(_,v),v[0]&6&&it(y,1)):(y=L2(_),y.c(),it(y,1),y.m(h.parentNode,h)):y&&(xu(),pt(y,1,1,()=>{y=null}),wu())},i(_){f||(it(y),f=!0)},o(_){pt(y),f=!1},d(_){y&&y.d(_),_&&T(h)}}}function nI(u){let h,f,y,_,v,a,P,A,F,V,j,U,he,ie,De,we;return document.title=h=u[1].name+" Census Data",he=new bk({}),De=new hE({props:{column:"wide",$$slots:{default:[iI]},$$scope:{ctx:u}}}),{c(){f=D("meta"),y=D("meta"),v=D("meta"),a=D("meta"),A=D("meta"),V=D("meta"),U=_e(),Yt(he.$$.fragment),ie=_e(),Yt(De.$$.fragment),this.h()},l(Ce){const Ue=lE('[data-svelte="svelte-14ulspn"]',document.head);f=M(Ue,"META",{name:!0,content:!0}),y=M(Ue,"META",{property:!0,content:!0}),v=M(Ue,"META",{property:!0,content:!0}),a=M(Ue,"META",{property:!0,content:!0}),A=M(Ue,"META",{property:!0,content:!0}),V=M(Ue,"META",{name:!0,content:!0}),Ue.forEach(T),U=be(Ce),Jt(he.$$.fragment,Ce),ie=be(Ce),Jt(De.$$.fragment,Ce),this.h()},h(){S(f,"name","description"),S(f,"content",""),S(y,"property","og:title"),S(y,"content",_=u[1].name+" Census Data"),S(v,"property","og:type"),S(v,"content","website"),S(a,"property","og:url"),S(a,"content",P=Bv.base+"/"+u[1].code+"/"),S(A,"property","og:description"),S(A,"content",F="Explore census data for "+u[1].name+"."),S(V,"name","description"),S(V,"content",j="Explore census data for "+u[1].name+".")},m(Ce,Ue){w(document.head,f),w(document.head,y),w(document.head,v),w(document.head,a),w(document.head,A),w(document.head,V),Ae(Ce,U,Ue),Qt(he,Ce,Ue),Ae(Ce,ie,Ue),Qt(De,Ce,Ue),we=!0},p(Ce,Ue){(!we||Ue[0]&2)&&h!==(h=Ce[1].name+" Census Data")&&(document.title=h),(!we||Ue[0]&2&&_!==(_=Ce[1].name+" Census Data"))&&S(y,"content",_),(!we||Ue[0]&2&&P!==(P=Bv.base+"/"+Ce[1].code+"/"))&&S(a,"content",P),(!we||Ue[0]&2&&F!==(F="Explore census data for "+Ce[1].name+"."))&&S(A,"content",F),(!we||Ue[0]&2&&j!==(j="Explore census data for "+Ce[1].name+"."))&&S(V,"content",j);const At={};Ue[0]&16383|Ue[1]&1073741824&&(At.$$scope={dirty:Ue,ctx:Ce}),De.$set(At)},i(Ce){we||(it(he.$$.fragment,Ce),it(De.$$.fragment,Ce),we=!0)},o(Ce){pt(he.$$.fragment,Ce),pt(De.$$.fragment,Ce),we=!1},d(Ce){T(f),T(y),T(v),T(a),T(A),T(V),Ce&&T(U),$t(he,Ce),Ce&&T(ie),$t(De,Ce)}}}const hI=!0;async function W2(u,h){return await(await h(Bv.app_json_data+u+".json")).json()}async function pI({params:u,fetch:h}){let f=u.code,y=await xE(Bv.search_data,h),_={};y.forEach(A=>_[A.code]=A.name),y.forEach(A=>{A.typepl=sa[A.type].pl,A.typenm=sa[A.type].name,A.typestr=_[A.parent]?`${sa[A.type].name} within ${_[A.parent]}`:""});let v=y.sort((A,F)=>A.name.localeCompare(F.name)),a=await W2("N92000002",h),P=await W2(f,h);return{props:{search_data:v,place:P,ni:a}}}function aI(u,h,f){let y,_,v,a,P,{search_data:A,place:F,ni:V}=h,j,U,he=null,ie=!1,De={selected:null,type:null,childType:null,highlighted:[],hovered:null},we={};Object.keys(mf).forEach(Ut=>f(9,we[Ut]=!1,we));function Ce(Ut){const yi=(Pr,Yn)=>Pr+Yn;let Or=Ut[0],bi="perc",Gr=F.data[Or][bi][2021],Vr=F.data[Or][bi][2011],xi=V.data[Or][bi][2021],wi=Ax[Or].map(Pr=>Pr.category),Mr=Ax[Or].map(Pr=>Pr.label?Pr.label:Pr.category);return wi.map((Pr,Yn)=>Array.isArray(Pr)?{x:Mr[Yn],y:Pr.map(jn=>Gr[jn]).reduce(yi,0),ni:Pr.map(jn=>xi[jn]).reduce(yi,0),prev:Pr.map(jn=>Vr[jn]).reduce(yi,0)}:{x:Mr[Yn],y:Gr[Pr],ni:xi[Pr],prev:Vr[Pr]})}function Ue(Ut){he&&he.fitBounds(Ut,{padding:20})}function At(Ut){let yi=JSON.parse(JSON.stringify(De)),Or=Ut.code,bi=Ut.type,Gr=Ut.children[0]?Ut.children.map(er=>er.code):[],Vr=Ut.type=="rgn"?"cty":Gr[0]?Ut.children[0].type:null;f(8,De.selected=Or,De),f(8,De.type=bi,De),f(8,De.childType=Vr,De),f(8,De.highlighted=Gr,De);let xi=Object.keys(mf),wi=["fill-color","fill-opacity"],Mr=["line-color","line-width","line-opacity"];he&&(De.type!=yi.type||De.childType!=yi.childType)&&(xi.forEach(er=>{let Pr=er==bi||Vr&&er==Vr?"visible":"none";he.setLayoutProperty(er+"-fill","visibility",Pr),he.setLayoutProperty(er+"-bounds","visibility",Pr),Ut.parents[0]&&he.setLayoutProperty(er+"-self","visibility",Pr),f(9,we[er]=er==Vr,we)}),Ut.parents[0]&&(wi.forEach(er=>he.setPaintProperty(bi+"-fill",er,$a[Gr[0]?"fill-active":"fill-self"][er])),Mr.forEach(er=>{he.setPaintProperty(bi+"-bounds",er,$a["line-active"][er]),he.setPaintProperty(bi+"-self",er,$a["line-self"][er])})),Vr&&(wi.forEach(er=>he.setPaintProperty(Vr+"-fill",er,$a["fill-child"][er])),Mr.forEach(er=>he.setPaintProperty(Vr+"-bounds",er,$a["line-child"][er]))))}function Dt(Ut){At(Ut),Ue(Ut.bounds)}function ht(Ut){Dx(`${Vh}/${Ut.detail.code}/`,{noscroll:!0})}function tt(Ut){Dx(`${Vh}/${Ut.detail.value}/`,{noscroll:!0})}function Ar(){f(6,U=j<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const yr=()=>f(5,a=!0),tr=()=>f(4,ie=!1),wt=()=>f(11,v=!1),bt=()=>f(5,a=!0),kr=()=>f(4,ie=!1),Rt=()=>f(11,v=!1),zr=()=>f(11,v=!0),Qe=()=>f(5,a=!1),ar=()=>f(4,ie=!1),$r=()=>f(4,ie=!0),si=()=>f(5,a=!1),wr=()=>f(11,v=!1),mt=()=>f(4,ie=!1),nt=()=>f(5,a=!0),cr=()=>f(11,v=!1);function ji(Ut){he=Ut,f(7,he)}function la(){j=this.clientWidth,f(3,j)}function Bi(){j=this.clientWidth,f(3,j)}function zi(){j=this.clientWidth,f(3,j)}function li(){j=this.clientWidth,f(3,j)}function tn(){j=this.clientWidth,f(3,j)}function rr(){j=this.clientWidth,f(3,j)}function Oi(){j=this.clientWidth,f(3,j)}function Za(){j=this.clientWidth,f(3,j)}function Ir(){j=this.clientWidth,f(3,j)}function Bt(){j=this.clientWidth,f(3,j)}function rn(){j=this.clientWidth,f(3,j)}function mi(){j=this.clientWidth,f(3,j)}function Zr(){j=this.clientWidth,f(3,j)}function eo(){j=this.clientWidth,f(3,j)}return u.$$set=Ut=>{"search_data"in Ut&&f(0,A=Ut.search_data),"place"in Ut&&f(1,F=Ut.place),"ni"in Ut&&f(2,V=Ut.ni)},u.$$.update=()=>{u.$$.dirty[0]&8&&j&&Ar(),u.$$.dirty[0]&18&&f(13,y=ie?"Same area 2011":F&&F.parents[0]?"NI 2021":null),u.$$.dirty[0]&50&&f(12,_=a?null:ie?"prev":!ie&&F.type!="ni"?"ni":null),u.$$.dirty[0]&2&&F&&Dt(F),u.$$.dirty[0]&2&&f(10,P=!(F.type!="ni"&&F.type!="lgd"))},f(5,a=!0),f(11,v=!1),[A,F,V,j,ie,a,U,he,De,we,P,v,_,y,Ce,ht,tt,yr,tr,wt,bt,kr,Rt,zr,Qe,ar,$r,si,wr,mt,nt,cr,ji,la,Bi,zi,li,tn,rr,Oi,Za,Ir,Bt,rn,mi,Zr,eo]}class fI extends Hs{constructor(h){super(),Xs(this,h,aI,nI,Ws,{search_data:0,place:1,ni:2},null,[-1,-1])}}export{fI as default,pI as load,hI as prerender};
