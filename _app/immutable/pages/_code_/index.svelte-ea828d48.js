import{S as Es,i as Ss,s as ks,O as Jh,l as K,m as H,n as X,h as M,p as z,q as ye,J as Wi,b as ke,Q as Yh,R as Qh,T as $h,f as mt,t as wt,a as Le,c as Re,I as P,M as gn,E as yn,G as mu,U as ug,V as Nm,W as Ac,r as he,u as pe,v as gt,e as sa,X as yu,Y as Gu,Z as Ku,g as Tl,d as Al,j as cg,o as hg,K as lf,_ as rr,$ as ei,a0 as zo,a1 as Po,w as zr,x as Pr,y as Cr,B as Mr,P as Zg,a2 as Gg,a3 as nm,a4 as am,a5 as Kg,a6 as hd,C as od,z as sd,A as ld}from"../../chunks/index-06ab0f50.js";import{g as wa,a as pd,S as Hg,m as Hc,b as Um,c as Xg,d as Wa,e as jm}from"../../chunks/Section-46072ec5.js";import{b as Wu}from"../../chunks/paths-1c47712a.js";import{c as wh,w as ti,d as xa}from"../../chunks/singletons-e0a6622d.js";/* empty css                                                                 */var qm={},Ud={},jd=34,ef=10,qd=13;function pg(c){return new Function("d","return {"+c.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function Wg(c,h){var f=pg(c);return function(y,x){return h(f(y),x,c)}}function Zm(c){var h=Object.create(null),f=[];return c.forEach(function(y){for(var x in y)x in h||f.push(h[x]=x)}),f}function $s(c,h){var f=c+"",y=f.length;return y<h?new Array(h-y+1).join(0)+f:f}function Jg(c){return c<0?"-"+$s(-c,6):c>9999?"+"+$s(c,6):$s(c,4)}function Yg(c){var h=c.getUTCHours(),f=c.getUTCMinutes(),y=c.getUTCSeconds(),x=c.getUTCMilliseconds();return isNaN(c)?"Invalid Date":Jg(c.getUTCFullYear())+"-"+$s(c.getUTCMonth()+1,2)+"-"+$s(c.getUTCDate(),2)+(x?"T"+$s(h,2)+":"+$s(f,2)+":"+$s(y,2)+"."+$s(x,3)+"Z":y?"T"+$s(h,2)+":"+$s(f,2)+":"+$s(y,2)+"Z":f||h?"T"+$s(h,2)+":"+$s(f,2)+"Z":"")}function Qg(c){var h=new RegExp('["'+c+`
\r]`),f=c.charCodeAt(0);function y(U,V){var le,ee,ze=x(U,function(ve,Ie){if(le)return le(ve,Ie-1);ee=ve,le=V?Wg(ve,V):pg(ve)});return ze.columns=ee||[],ze}function x(U,V){var le=[],ee=U.length,ze=0,ve=0,Ie,Ve=ee<=0,At=!1;U.charCodeAt(ee-1)===ef&&--ee,U.charCodeAt(ee-1)===qd&&--ee;function Lt(){if(Ve)return Ud;if(At)return At=!1,qm;var Qe,Sr=ze,ur;if(U.charCodeAt(Sr)===jd){for(;ze++<ee&&U.charCodeAt(ze)!==jd||U.charCodeAt(++ze)===jd;);return(Qe=ze)>=ee?Ve=!0:(ur=U.charCodeAt(ze++))===ef?At=!0:ur===qd&&(At=!0,U.charCodeAt(ze)===ef&&++ze),U.slice(Sr+1,Qe-1).replace(/""/g,'"')}for(;ze<ee;){if((ur=U.charCodeAt(Qe=ze++))===ef)At=!0;else if(ur===qd)At=!0,U.charCodeAt(ze)===ef&&++ze;else if(ur!==f)continue;return U.slice(Sr,Qe)}return Ve=!0,U.slice(Sr,ee)}for(;(Ie=Lt())!==Ud;){for(var ct=[];Ie!==qm&&Ie!==Ud;)ct.push(Ie),Ie=Lt();V&&(ct=V(ct,ve++))==null||le.push(ct)}return le}function _(U,V){return U.map(function(le){return V.map(function(ee){return R(le[ee])}).join(c)})}function o(U,V){return V==null&&(V=Zm(U)),[V.map(R).join(c)].concat(_(U,V)).join(`
`)}function T(U,V){return V==null&&(V=Zm(U)),_(U,V).join(`
`)}function k(U){return U.map(B).join(`
`)}function B(U){return U.map(R).join(c)}function R(U){return U==null?"":U instanceof Date?Yg(U):h.test(U+="")?'"'+U.replace(/"/g,'""')+'"':U}return{parse:y,parseRows:x,format:o,formatBody:T,formatRows:k,formatRow:B,formatValue:R}}var $g=Qg(","),e_=$g.parse;function t_(c){for(var h in c){var f=c[h].trim(),y,x;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(y=+f))f=y;else if(x=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))r_&&!!x[4]&&!x[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;c[h]=f}return c}const r_=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function i_(c,h=window.fetch){let y=await(await h(c)).text();return await e_(y,t_)}function Xc(c){let h=Math.round(c)%10;return c==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function fd(c){return c>0?"increase":c<0?"decrease":"nochange"}function Wc(c,h="",f=0){return c!=0?Math.abs(c).toFixed(f)+h:h=="pp"?"n/c":"No change"}function dd(c,h="",f=0){return c!=0?Math.abs(c).toFixed(f)+h:h=="pp"?"n/c":"<1%)"}wh.disable_scroll_handling;const Gm=wh.goto;wh.invalidate;wh.prefetch;wh.prefetch_routes;wh.before_navigate;wh.after_navigate;var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a_={rgb2hsl:uf,rgb2hsv:bd,rgb2hwb:cf,rgb2cmyk:hf,rgb2keyword:pf,rgb2xyz:om,rgb2lab:sm,rgb2lch:o_,hsl2rgb:xd,hsl2hsv:s_,hsl2hwb:l_,hsl2cmyk:u_,hsl2keyword:c_,hsv2rgb:wd,hsv2hsl:h_,hsv2hwb:p_,hsv2cmyk:f_,hsv2keyword:d_,hwb2rgb:ff,hwb2hsl:m_,hwb2hsv:y_,hwb2cmyk:g_,hwb2keyword:__,cmyk2rgb:df,cmyk2hsl:v_,cmyk2hsv:b_,cmyk2hwb:x_,cmyk2keyword:w_,keyword2rgb:Eh,keyword2hsl:I_,keyword2hsv:T_,keyword2hwb:A_,keyword2cmyk:z_,keyword2lab:P_,keyword2xyz:C_,xyz2rgb:fg,xyz2lab:dg,xyz2lch:E_,lab2xyz:lm,lab2rgb:mg,lab2lch:um,lch2lab:cm,lch2xyz:S_,lch2rgb:k_};function uf(c){var h=c[0]/255,f=c[1]/255,y=c[2]/255,x=Math.min(h,f,y),_=Math.max(h,f,y),o=_-x,T,k,B;return _==x?T=0:h==_?T=(f-y)/o:f==_?T=2+(y-h)/o:y==_&&(T=4+(h-f)/o),T=Math.min(T*60,360),T<0&&(T+=360),B=(x+_)/2,_==x?k=0:B<=.5?k=o/(_+x):k=o/(2-_-x),[T,k*100,B*100]}function bd(c){var h=c[0],f=c[1],y=c[2],x=Math.min(h,f,y),_=Math.max(h,f,y),o=_-x,T,k,B;return _==0?k=0:k=o/_*1e3/10,_==x?T=0:h==_?T=(f-y)/o:f==_?T=2+(y-h)/o:y==_&&(T=4+(h-f)/o),T=Math.min(T*60,360),T<0&&(T+=360),B=_/255*1e3/10,[T,k,B]}function cf(c){var h=c[0],f=c[1],_=c[2],y=uf(c)[0],x=1/255*Math.min(h,Math.min(f,_)),_=1-1/255*Math.max(h,Math.max(f,_));return[y,x*100,_*100]}function hf(c){var h=c[0]/255,f=c[1]/255,y=c[2]/255,x,_,o,T;return T=Math.min(1-h,1-f,1-y),x=(1-h-T)/(1-T)||0,_=(1-f-T)/(1-T)||0,o=(1-y-T)/(1-T)||0,[x*100,_*100,o*100,T*100]}function pf(c){return yg[JSON.stringify(c)]}function om(c){var h=c[0]/255,f=c[1]/255,y=c[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var x=h*.4124+f*.3576+y*.1805,_=h*.2126+f*.7152+y*.0722,o=h*.0193+f*.1192+y*.9505;return[x*100,_*100,o*100]}function sm(c){var h=om(c),f=h[0],y=h[1],x=h[2],_,o,T;return f/=95.047,y/=100,x/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,_=116*y-16,o=500*(f-y),T=200*(y-x),[_,o,T]}function o_(c){return um(sm(c))}function xd(c){var h=c[0]/360,f=c[1]/100,y=c[2]/100,x,_,o,T,k;if(f==0)return k=y*255,[k,k,k];y<.5?_=y*(1+f):_=y+f-y*f,x=2*y-_,T=[0,0,0];for(var B=0;B<3;B++)o=h+1/3*-(B-1),o<0&&o++,o>1&&o--,6*o<1?k=x+(_-x)*6*o:2*o<1?k=_:3*o<2?k=x+(_-x)*(2/3-o)*6:k=x,T[B]=k*255;return T}function s_(c){var h=c[0],f=c[1]/100,y=c[2]/100,x,_;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,_=(y+f)/2,x=2*f/(y+f),[h,x*100,_*100])}function l_(c){return cf(xd(c))}function u_(c){return hf(xd(c))}function c_(c){return pf(xd(c))}function wd(c){var h=c[0]/60,f=c[1]/100,k=c[2]/100,y=Math.floor(h)%6,x=h-Math.floor(h),_=255*k*(1-f),o=255*k*(1-f*x),T=255*k*(1-f*(1-x)),k=255*k;switch(y){case 0:return[k,T,_];case 1:return[o,k,_];case 2:return[_,k,T];case 3:return[_,o,k];case 4:return[T,_,k];case 5:return[k,_,o]}}function h_(c){var h=c[0],f=c[1]/100,y=c[2]/100,x,_;return _=(2-f)*y,x=f*y,x/=_<=1?_:2-_,x=x||0,_/=2,[h,x*100,_*100]}function p_(c){return cf(wd(c))}function f_(c){return hf(wd(c))}function d_(c){return pf(wd(c))}function ff(c){var h=c[0]/360,f=c[1]/100,y=c[2]/100,x=f+y,_,o,T,k;switch(x>1&&(f/=x,y/=x),_=Math.floor(6*h),o=1-y,T=6*h-_,(_&1)!=0&&(T=1-T),k=f+T*(o-f),_){default:case 6:case 0:r=o,g=k,b=f;break;case 1:r=k,g=o,b=f;break;case 2:r=f,g=o,b=k;break;case 3:r=f,g=k,b=o;break;case 4:r=k,g=f,b=o;break;case 5:r=o,g=f,b=k;break}return[r*255,g*255,b*255]}function m_(c){return uf(ff(c))}function y_(c){return bd(ff(c))}function g_(c){return hf(ff(c))}function __(c){return pf(ff(c))}function df(c){var h=c[0]/100,f=c[1]/100,y=c[2]/100,x=c[3]/100,_,o,T;return _=1-Math.min(1,h*(1-x)+x),o=1-Math.min(1,f*(1-x)+x),T=1-Math.min(1,y*(1-x)+x),[_*255,o*255,T*255]}function v_(c){return uf(df(c))}function b_(c){return bd(df(c))}function x_(c){return cf(df(c))}function w_(c){return pf(df(c))}function fg(c){var h=c[0]/100,f=c[1]/100,y=c[2]/100,x,_,o;return x=h*3.2406+f*-1.5372+y*-.4986,_=h*-.9689+f*1.8758+y*.0415,o=h*.0557+f*-.204+y*1.057,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x=x*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,x=Math.min(Math.max(0,x),1),_=Math.min(Math.max(0,_),1),o=Math.min(Math.max(0,o),1),[x*255,_*255,o*255]}function dg(c){var h=c[0],f=c[1],y=c[2],x,_,o;return h/=95.047,f/=100,y/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=116*f-16,_=500*(h-f),o=200*(f-y),[x,_,o]}function E_(c){return um(dg(c))}function lm(c){var h=c[0],f=c[1],y=c[2],x,_,o,T;return h<=8?(_=h*100/903.3,T=7.787*(_/100)+16/116):(_=100*Math.pow((h+16)/116,3),T=Math.pow(_/100,1/3)),x=x/95.047<=.008856?x=95.047*(f/500+T-16/116)/7.787:95.047*Math.pow(f/500+T,3),o=o/108.883<=.008859?o=108.883*(T-y/200-16/116)/7.787:108.883*Math.pow(T-y/200,3),[x,_,o]}function um(c){var h=c[0],f=c[1],y=c[2],x,_,o;return x=Math.atan2(y,f),_=x*360/2/Math.PI,_<0&&(_+=360),o=Math.sqrt(f*f+y*y),[h,o,_]}function mg(c){return fg(lm(c))}function cm(c){var h=c[0],f=c[1],y=c[2],x,_,o;return o=y/360*2*Math.PI,x=f*Math.cos(o),_=f*Math.sin(o),[h,x,_]}function S_(c){return lm(cm(c))}function k_(c){return mg(cm(c))}function Eh(c){return Yd[c]}function I_(c){return uf(Eh(c))}function T_(c){return bd(Eh(c))}function A_(c){return cf(Eh(c))}function z_(c){return hf(Eh(c))}function P_(c){return sm(Eh(c))}function C_(c){return om(Eh(c))}var Yd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},yg={};for(var Km in Yd)yg[JSON.stringify(Yd[Km])]=Km;var Zd=a_,vh=function(){return new mf};for(var tf in Zd){vh[tf+"Raw"]=function(c){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),Zd[c](h)}}(tf);var Hm=/(\w+)2(\w+)/.exec(tf),Gd=Hm[1],M_=Hm[2];vh[Gd]=vh[Gd]||{},vh[Gd][M_]=vh[tf]=function(c){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=Zd[c](h);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(tf)}var mf=function(){this.convs={}};mf.prototype.routeSpace=function(c,h){var f=h[0];return f===void 0?this.getValues(c):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(c,f))};mf.prototype.setValues=function(c,h){return this.space=c,this.convs={},this.convs[c]=h,this};mf.prototype.getValues=function(c){var h=this.convs[c];if(!h){var f=this.space,y=this.convs[f];h=vh[f][c](y),this.convs[c]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(c){mf.prototype[c]=function(h){return this.routeSpace(c,arguments)}});var D_=vh,Kd=D_,L_=function(c){var h,f,y,x;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(c)){var _=h[1],o=_.replace(/a$/,""),T=o==="cmyk"?4:3;f=Kd[o],y=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(B,R){return/%$/.test(B)&&R===T?parseFloat(B)/100:(/%$/.test(B),parseFloat(B))}),_===o&&y.push(1),x=y[T]===void 0?1:y[T],y=y.slice(0,T),f[o]=function(){return y}}else if(/^#[A-Fa-f0-9]+$/.test(c)){var o=c.replace(/^#/,""),T=o.length;f=Kd.rgb,y=o.split(T===3?/(.)/:/(..)/),y=y.filter(Boolean).map(function(U){return parseInt(T===3?U+U:U,16)}),x=1,f.rgb=function(){return y},y[0]||(y[0]=0),y[1]||(y[1]=0),y[2]||(y[2]=0)}else f=Kd.keyword,f.keyword=function(){return c},y=c,x=1;var k={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{k.rgb=f.rgb(y)}catch{}try{k.hsl=f.hsl(y)}catch{}try{k.hsv=f.hsv(y)}catch{}try{k.cmyk=f.cmyk(y)}catch{}try{k.keyword=f.keyword(y)}catch{}return k.rgb&&(k.hex="#"+k.rgb.map(function(B){var R=B.toString(16);return R.length===1?"0"+R:R}).join("")),k.rgb&&(k.rgba=k.rgb.concat(x)),k.hsl&&(k.hsla=k.hsl.concat(x)),k.hsv&&(k.hsva=k.hsv.concat(x)),k.cmyk&&(k.cmyka=k.cmyk.concat(x)),k};function R_(c){let h,f;const y=c[5].default,x=Jh(y,c,c[4],null);return{c(){h=K("span"),x&&x.c(),this.h()},l(_){h=H(_,"SPAN",{class:!0,style:!0,role:!0});var o=X(h);x&&x.l(o),o.forEach(M),this.h()},h(){z(h,"class","em svelte-s1t2y4"),ye(h,"background-color",c[0]),ye(h,"color",c[2]),z(h,"role","presentation"),Wi(h,"nowrap",c[1])},m(_,o){ke(_,h,o),x&&x.m(h,null),f=!0},p(_,[o]){x&&x.p&&(!f||o&16)&&Yh(x,y,_,_[4],f?$h(y,_[4],o,null):Qh(_[4]),null),(!f||o&1)&&ye(h,"background-color",_[0]),(!f||o&4)&&ye(h,"color",_[2]),o&2&&Wi(h,"nowrap",_[1])},i(_){f||(mt(x,_),f=!0)},o(_){wt(x,_),f=!1},d(_){_&&M(h),x&&x.d(_)}}}function B_(c,h,f){let y,{$$slots:x={},$$scope:_}=h,{color:o="lightgrey"}=h,{nowrap:T=!0}=h;function k(R){return(R[0]*299+R[1]*587+R[2]*114)/1e3>125?"black":"white"}let B="black";return c.$$set=R=>{"color"in R&&f(0,o=R.color),"nowrap"in R&&f(1,T=R.nowrap),"$$scope"in R&&f(4,_=R.$$scope)},c.$$.update=()=>{c.$$.dirty&1&&f(3,y=L_(o).rgb),c.$$.dirty&8&&y&&f(2,B=k(y))},[o,T,B,y,_,x]}class Ed extends Es{constructor(h){super(),Ss(this,h,B_,R_,ks,{color:0,nowrap:1})}}function Xm(c,h,f){const y=c.slice();return y[33]=h[f],y[36]=h,y[35]=f,y}function Wm(c,h,f){const y=c.slice();return y[33]=h[f],y[34]=h,y[35]=f,y}function O_(c){let h,f,y=(c[0]?c[0]:"Select one")+"",x,_,o,T,k,B;return{c(){h=K("a"),f=K("span"),x=he(y),_=Le(),o=K("span"),T=he("\xA0"),this.h()},l(R){h=H(R,"A",{id:!0,class:!0});var U=X(h);f=H(U,"SPAN",{class:!0});var V=X(f);x=pe(V,y),V.forEach(M),_=Re(U),o=H(U,"SPAN",{class:!0});var le=X(o);T=pe(le,"\xA0"),le.forEach(M),U.forEach(M),this.h()},h(){z(f,"class","svelte-13flvue"),z(o,"class","button svelte-13flvue"),Wi(o,"search",c[3]),Wi(o,"down",!c[3]),z(h,"id","toggle"),z(h,"class","svelte-13flvue")},m(R,U){ke(R,h,U),P(h,f),P(f,x),P(h,_),P(h,o),P(o,T),k||(B=gn(h,"click",c[12]),k=!0)},p(R,U){U[0]&1&&y!==(y=(R[0]?R[0]:"Select one")+"")&&gt(x,y),U[0]&8&&Wi(o,"search",R[3]),U[0]&8&&Wi(o,"down",!R[3])},d(R){R&&M(h),k=!1,B()}}}function F_(c){let h,f,y=c[5][c[1]]+"",x,_,o,T,k,B,R,U=c[2]&&Jm(c);return{c(){h=K("a"),f=K("span"),x=he(y),_=Le(),U&&U.c(),o=Le(),T=K("span"),k=he("\xA0"),this.h()},l(V){h=H(V,"A",{id:!0,class:!0});var le=X(h);f=H(le,"SPAN",{class:!0});var ee=X(f);x=pe(ee,y),_=Re(ee),U&&U.l(ee),ee.forEach(M),o=Re(le),T=H(le,"SPAN",{class:!0});var ze=X(T);k=pe(ze,"\xA0"),ze.forEach(M),le.forEach(M),this.h()},h(){z(f,"class","selection svelte-13flvue"),z(T,"class","button close svelte-13flvue"),z(h,"id","toggle"),z(h,"class","selected svelte-13flvue")},m(V,le){ke(V,h,le),P(h,f),P(f,x),P(f,_),U&&U.m(f,null),P(h,o),P(h,T),P(T,k),B||(R=[gn(T,"click",c[14]),gn(h,"click",c[12])],B=!0)},p(V,le){le[0]&34&&y!==(y=V[5][V[1]]+"")&&gt(x,y),V[2]?U?U.p(V,le):(U=Jm(V),U.c(),U.m(f,null)):U&&(U.d(1),U=null)},d(V){V&&M(h),U&&U.d(),B=!1,mu(R)}}}function Jm(c){let h,f=c[5][c[2]]+"",y;return{c(){h=K("small"),y=he(f),this.h()},l(x){h=H(x,"SMALL",{class:!0});var _=X(h);y=pe(_,f),_.forEach(M),this.h()},h(){z(h,"class","svelte-13flvue")},m(x,_){ke(x,h,_),P(h,y)},p(x,_){_[0]&36&&f!==(f=x[5][x[2]]+"")&&gt(y,f)},d(x){x&&M(h)}}}function Ym(c){let h,f,y,x,_,o;function T(R,U){return R[4].length<3?j_:R[8][0]&&R[2]?U_:R[8][0]?N_:V_}let k=T(c),B=k(c);return{c(){h=K("div"),f=K("input"),y=Le(),x=K("ul"),B.c(),this.h()},l(R){h=H(R,"DIV",{id:!0,style:!0,class:!0});var U=X(h);f=H(U,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),y=Re(U),x=H(U,"UL",{class:!0});var V=X(x);B.l(V),V.forEach(M),U.forEach(M),this.h()},h(){z(f,"type","text"),z(f,"placeholder",""),z(f,"autocomplete","false"),f.autofocus="autofocus",z(f,"onfocus","this.select()"),z(f,"class","svelte-13flvue"),z(x,"class","svelte-13flvue"),z(h,"id","dropdown"),ye(h,"top","0"),z(h,"class","svelte-13flvue")},m(R,U){ke(R,h,U),P(h,f),Nm(f,c[4]),c[24](f),P(h,y),P(h,x),B.m(x,null),c[31](h),f.focus(),_||(o=[gn(f,"input",c[23]),gn(f,"keyup",c[16])],_=!0)},p(R,U){U[0]&16&&f.value!==R[4]&&Nm(f,R[4]),k===(k=T(R))&&B?B.p(R,U):(B.d(1),B=k(R),B&&(B.c(),B.m(x,null)))},d(R){R&&M(h),c[24](null),B.d(),c[31](null),_=!1,mu(o)}}}function V_(c){let h,f;return{c(){h=K("li"),f=he("No results"),this.h()},l(y){h=H(y,"LI",{class:!0});var x=X(h);f=pe(x,"No results"),x.forEach(M),this.h()},h(){z(h,"class","svelte-13flvue")},m(y,x){ke(y,h,x),P(h,f)},p:yn,d(y){y&&M(h)}}}function N_(c){let h,f=c[8],y=[];for(let x=0;x<f.length;x+=1)y[x]=Qm(Xm(c,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();h=sa()},l(x){for(let _=0;_<y.length;_+=1)y[_].l(x);h=sa()},m(x,_){for(let o=0;o<y.length;o+=1)y[o].m(x,_);ke(x,h,_)},p(x,_){if(_[0]&10626){f=x[8];let o;for(o=0;o<f.length;o+=1){const T=Xm(x,f,o);y[o]?y[o].p(T,_):(y[o]=Qm(T),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){yu(y,x),x&&M(h)}}}function U_(c){let h,f=c[8],y=[];for(let x=0;x<f.length;x+=1)y[x]=$m(Wm(c,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();h=sa()},l(x){for(let _=0;_<y.length;_+=1)y[_].l(x);h=sa()},m(x,_){for(let o=0;o<y.length;o+=1)y[o].m(x,_);ke(x,h,_)},p(x,_){if(_[0]&10630){f=x[8];let o;for(o=0;o<f.length;o+=1){const T=Wm(x,f,o);y[o]?y[o].p(T,_):(y[o]=$m(T),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){yu(y,x),x&&M(h)}}}function j_(c){let h,f;return{c(){h=K("li"),f=he("Type a name..."),this.h()},l(y){h=H(y,"LI",{class:!0});var x=X(h);f=pe(x,"Type a name..."),x.forEach(M),this.h()},h(){z(h,"class","svelte-13flvue")},m(y,x){ke(y,h,x),P(h,f)},p:yn,d(y){y&&M(h)}}}function Qm(c){let h,f=c[33][c[1]]+"",y,x,_=c[35],o,T;function k(){return c[28](c[33])}function B(){return c[29](c[35])}const R=()=>c[30](h,_),U=()=>c[30](null,_);return{c(){h=K("li"),y=he(f),x=Le(),this.h()},l(V){h=H(V,"LI",{class:!0});var le=X(h);y=pe(le,f),x=Re(le),le.forEach(M),this.h()},h(){z(h,"class","svelte-13flvue"),Wi(h,"highlight",c[7]==c[35])},m(V,le){ke(V,h,le),P(h,y),P(h,x),R(),o||(T=[gn(h,"click",k),gn(h,"mouseover",B)],o=!0)},p(V,le){c=V,le[0]&258&&f!==(f=c[33][c[1]]+"")&&gt(y,f),_!==c[35]&&(U(),_=c[35],R()),le[0]&128&&Wi(h,"highlight",c[7]==c[35])},d(V){V&&M(h),U(),o=!1,mu(T)}}}function $m(c){let h,f=c[33][c[1]]+"",y,x,_,o=c[33][c[2]]+"",T,k,B=c[35],R,U;function V(){return c[25](c[33])}function le(){return c[26](c[35])}const ee=()=>c[27](h,B),ze=()=>c[27](null,B);return{c(){h=K("li"),y=he(f),x=Le(),_=K("small"),T=he(o),k=Le(),this.h()},l(ve){h=H(ve,"LI",{class:!0});var Ie=X(h);y=pe(Ie,f),x=Re(Ie),_=H(Ie,"SMALL",{class:!0});var Ve=X(_);T=pe(Ve,o),Ve.forEach(M),k=Re(Ie),Ie.forEach(M),this.h()},h(){z(_,"class","svelte-13flvue"),z(h,"class","svelte-13flvue"),Wi(h,"highlight",c[7]==c[35])},m(ve,Ie){ke(ve,h,Ie),P(h,y),P(h,x),P(h,_),P(_,T),P(h,k),ee(),R||(U=[gn(h,"click",V),gn(h,"mouseover",le)],R=!0)},p(ve,Ie){c=ve,Ie[0]&258&&f!==(f=c[33][c[1]]+"")&&gt(y,f),Ie[0]&260&&o!==(o=c[33][c[2]]+"")&&gt(T,o),B!==c[35]&&(ze(),B=c[35],ee()),Ie[0]&128&&Wi(h,"highlight",c[7]==c[35])},d(ve){ve&&M(h),ze(),R=!1,mu(U)}}}function q_(c){let h,f,y,x;function _(B,R){return B[5]&&!B[3]?F_:O_}let o=_(c),T=o(c),k=c[6]&&Ym(c);return{c(){h=K("div"),T.c(),f=Le(),k&&k.c(),this.h()},l(B){h=H(B,"DIV",{id:!0,class:!0});var R=X(h);T.l(R),f=Re(R),k&&k.l(R),R.forEach(M),this.h()},h(){z(h,"id","select"),z(h,"class","svelte-13flvue"),Wi(h,"active",c[6])},m(B,R){ke(B,h,R),T.m(h,null),P(h,f),k&&k.m(h,null),y||(x=[gn(window,"click",c[17]),gn(h,"keydown",c[15])],y=!0)},p(B,R){o===(o=_(B))&&T?T.p(B,R):(T.d(1),T=o(B),T&&(T.c(),T.m(h,f))),B[6]?k?k.p(B,R):(k=Ym(B),k.c(),k.m(h,null)):k&&(k.d(1),k=null),R[0]&64&&Wi(h,"active",B[6])},i:yn,o:yn,d(B){B&&M(h),T.d(),k&&k.d(),y=!1,mu(x)}}}function Z_(c){return new Promise(h=>setTimeout(h,c))}function G_(c,h,f){let y;const x=ug();let{search_data:_}=h,{selected:o=null}=h,{placeholder:T="Enter a town or area name"}=h,{value:k="code"}=h,{label:B="name"}=h,{group:R=null}=h,{search:U=!1}=h,V=o,le=o?_.find(pt=>{pt[k]==o[k]}):null,ee=!1,ze="",ve=null,Ie,Ve,At,Lt=[];function ct(pt){pt.stopPropagation(),f(4,ze=""),f(6,ee=!ee),Z_(10).then(()=>{At&&ee&&At.focus()})}function Qe(pt){f(18,o=pt),f(6,ee=!1),x("select",{selected:pt,value:pt[k]})}function Sr(pt){pt.stopPropagation(),f(18,o=null),f(21,V=null),f(5,le=null),x("select",{selected:null,value:null})}function ur(pt){ee&&Ie[0]&&Number.isInteger(ve)&&(pt.keyCode===38?(f(7,ve-=ve>0?1:0),Lt[ve].scrollIntoView({block:"nearest",inline:"start"})):pt.keyCode===40&&(f(7,ve+=ve<Ie.length-1?1:0),Lt[ve].scrollIntoView({block:"nearest",inline:"end"})))}function Jt(pt){Ie[0]&&Number.isInteger(ve)&&pt.keyCode===13&&Qe(Ie[ve])}function Et(pt){pt.target!==Ve&&(f(6,ee=!1),f(7,ve=0))}function bt(){ze=this.value,f(4,ze)}function vr(pt){Ac[pt?"unshift":"push"](()=>{At=pt,f(10,At)})}const Ot=pt=>Qe(pt),kr=pt=>f(7,ve=pt);function Ye(pt,rt){Ac[pt?"unshift":"push"](()=>{Lt[rt]=pt,f(11,Lt)})}const Qt=pt=>Qe(pt),Wr=pt=>f(7,ve=pt);function ri(pt,rt){Ac[pt?"unshift":"push"](()=>{Lt[rt]=pt,f(11,Lt)})}function mr(pt){Ac[pt?"unshift":"push"](()=>{Ve=pt,f(9,Ve)})}return c.$$set=pt=>{"search_data"in pt&&f(19,_=pt.search_data),"selected"in pt&&f(18,o=pt.selected),"placeholder"in pt&&f(0,T=pt.placeholder),"value"in pt&&f(20,k=pt.value),"label"in pt&&f(1,B=pt.label),"group"in pt&&f(2,R=pt.group),"search"in pt&&f(3,U=pt.search)},c.$$.update=()=>{c.$$.dirty[0]&16&&f(22,y=ze?new RegExp(ze,"i"):null),c.$$.dirty[0]&4718594&&(f(8,Ie=y?_.filter(pt=>y.test(pt[B])):_),f(7,ve=0)),c.$$.dirty[0]&3932160&&V!=o&&(f(5,le=_.find(pt=>pt[k]==o[k])),f(21,V=o))},[T,B,R,U,ze,le,ee,ve,Ie,Ve,At,Lt,ct,Qe,Sr,ur,Jt,Et,o,_,k,V,y,bt,vr,Ot,kr,Ye,Qt,Wr,ri,mr]}class K_ extends Es{constructor(h){super(),Ss(this,h,G_,q_,ks,{search_data:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var nf={exports:{}};(function(c,h){(function(f,y){c.exports=y()})(n_,function(){var f,y,x;function _(o,T){if(!f)f=T;else if(!y)y=T;else{var k="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",B={};f(B),x=T(B),typeof window<"u"&&(x.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}}return _(["exports"],function(o){function T(e,t){return e(t={exports:{}},t.exports),t.exports}var k=B;function B(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}B.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},B.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},B.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},B.prototype.solveCurveX=function(e,t){var i,l,p,d,v;for(t===void 0&&(t=1e-6),p=e,v=0;v<8;v++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var S=this.sampleCurveDerivativeX(p);if(Math.abs(S)<1e-6)break;p-=d/S}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},B.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var R=U;function U(e,t){this.x=e,this.y=t}U.prototype={clone:function(){return new U(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},U.convert=function(e){return e instanceof U?e:Array.isArray(e)?new U(e[0],e[1]):e};var V=typeof self<"u"?self:{},le=Math.pow(2,53)-1;function ee(e,t,i,l){var p=new k(e,t,i,l);return function(d){return p.solve(d)}}var ze=ee(.25,.1,.25,1);function ve(e,t,i){return Math.min(i,Math.max(t,e))}function Ie(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function Ve(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}var At=1;function Lt(){return At++}function ct(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Qe(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Sr(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function ur(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Jt(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function Et(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function bt(e){return Array.isArray(e)?e.map(bt):typeof e=="object"&&e?Jt(e,bt):e}var vr={};function Ot(e){vr[e]||(typeof console<"u"&&console.warn(e),vr[e]=!0)}function kr(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Ye(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,v=void 0;i<l;p=i++)t+=((v=e[p]).x-(d=e[i]).x)*(d.y+v.y);return t}function Qt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Wr(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,v){var S=d||v;return t[p]=!S||S.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var ri=null;function mr(e){if(ri==null){var t=e.navigator?e.navigator.userAgent:null;ri=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return ri}function pt(e){try{var t=V[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var rt,ir,Ri,Kn,Ti=V.performance&&V.performance.now?V.performance.now.bind(V.performance):Date.now.bind(Date),Ei=V.requestAnimationFrame||V.mozRequestAnimationFrame||V.webkitRequestAnimationFrame||V.msRequestAnimationFrame,ii=V.cancelAnimationFrame||V.mozCancelAnimationFrame||V.webkitCancelAnimationFrame||V.msCancelAnimationFrame,Zi={now:Ti,frame:function(e){var t=Ei(e);return{cancel:function(){return ii(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=V.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return rt||(rt=V.document.createElement("a")),rt.href=e,rt.href},hardwareConcurrency:V.navigator&&V.navigator.hardwareConcurrency||4,get devicePixelRatio(){return V.devicePixelRatio},get prefersReducedMotion(){return!!V.matchMedia&&(ir==null&&(ir=V.matchMedia("(prefers-reduced-motion: reduce)")),ir.matches)}},Yt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ai={supported:!1,testSupport:function(e){!Fa&&Kn&&(It?Pt(e):Ri=e)}},Fa=!1,It=!1;function Pt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Kn),e.isContextLost())return;Ai.supported=!0}catch{}e.deleteTexture(t),Fa=!0}V.document&&((Kn=V.document.createElement("img")).onload=function(){Ri&&Pt(Ri),Ri=null,It=!0},Kn.onerror=function(){Fa=!0,Ri=null},Kn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ni="01",Ir=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function br(e){return e.indexOf("mapbox:")===0}Ir.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ni,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Ir.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ir.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Ir.prototype.normalizeStyleURL=function(e,t){if(!br(e))return e;var i=jr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Ir.prototype.normalizeGlyphsURL=function(e,t){if(!br(e))return e;var i=jr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Ir.prototype.normalizeSourceURL=function(e,t){if(!br(e))return e;var i=jr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Ir.prototype.normalizeSpriteURL=function(e,t,i,l){var p=jr(e);return br(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,cr(p))},Ir.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!br(e))return e;var i=jr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Zi.devicePixelRatio>=2||t===512?"@2x":"")+(Ai.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,v=p;d<v.length;d+=1){var S=v[d].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(i.params)||Yt.ACCESS_TOKEN;return Yt.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Ir.prototype.canonicalizeTileURL=function(e,t){var i=jr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Ir.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&br(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var v=d[p];ci(v)?l.push(this.canonicalizeTileURL(v,i)):l.push(v)}return l},Ir.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=jr(Yt.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!Yt.REQUIRE_ACCESS_TOKEN)return cr(e);if(!(t=t||Yt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),cr(e)};var Ji=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ci(e){return Ji.test(e)}var Si=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function jr(e){var t=e.match(Si);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function cr(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function nr(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(V.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var hi=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};hi.prototype.getStorageKey=function(e){var t,i=nr(Yt.ACCESS_TOKEN);return t=i&&i.u?V.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(Number("0x"+p))})):Yt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},hi.prototype.fetchEventData=function(){var e=pt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=V.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=V.localStorage.getItem(i);p&&(this.anonId=p)}catch{Ot("Unable to read from LocalStorage")}},hi.prototype.saveEventData=function(){var e=pt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{V.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&V.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Ot("Unable to write to LocalStorage")}},hi.prototype.processRequests=function(e){},hi.prototype.postEvent=function(e,t,i,l){var p=this;if(Yt.EVENTS_URL){var d=jr(Yt.EVENTS_URL);d.params.push("access_token="+(l||Yt.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:ni,userId:this.anonId},S=t?Ve(v,t):v,A={url:cr(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=Gr(A,function(C){p.pendingRequest=null,i(C),p.saveEventData(),p.processRequests(l)})}},hi.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var pi,Yi,ai=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p,(Yt.EVENTS_URL&&d||Yt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(v){return br(v)||ci(v)}))&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,v=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),Qe(this.anonId)||(this.anonId=ct()),this.postEvent(v,{skuToken:this.skuToken},function(S){S||d&&(l.success[d]=!0)},i))}},t}(hi),Bi=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){Yt.EVENTS_URL&&Yt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return br(p)||ci(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=nr(Yt.ACCESS_TOKEN),d=p?p.u:Yt.ACCESS_TOKEN,v=d!==this.eventData.tokenU;Qe(this.anonId)||(this.anonId=ct(),v=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var A=new Date(this.eventData.lastSuccess),C=new Date(S),L=(S-this.eventData.lastSuccess)/864e5;v=v||L>=1||L<-1||A.getDate()!==C.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(F){F||(l.eventData.lastSuccess=S,l.eventData.tokenU=d)},i)}},t}(hi)),la=Bi.postTurnstileEvent.bind(Bi),Ja=new ai,Ya=Ja.postMapLoadEvent.bind(Ja),_n=500,kn=50;function fi(){V.caches&&!pi&&(pi=V.caches.open("mapbox-tiles"))}function Oi(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Qi,Qa=1/0;function ln(){return Qi==null&&(Qi=V.OffscreenCanvas&&new V.OffscreenCanvas(1,1).getContext("2d")&&typeof V.createImageBitmap=="function"),Qi}var Qo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qo);var $i=function(e){function t(i,l,p){l===401&&ci(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),ki=Qt()?function(){return self.worker&&self.worker.referrer}:function(){return(V.location.protocol==="blob:"?V.parent:V).location.href},Jr,Gi,In=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(ki())&&!/^\w+:/.test(i))){if(V.fetch&&V.Request&&V.AbortController&&V.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,v=new V.AbortController,S=new V.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:ki(),signal:v.signal}),A=!1,C=!1,L=(d=S.url).indexOf("sku=")>0&&ci(d);l.type==="json"&&S.headers.set("Accept","application/json");var F=function(W,ne,oe){if(!C){if(W&&W.message!=="SecurityError"&&Ot(W),ne&&oe)return q(ne);var me=Date.now();V.fetch(S).then(function(ue){if(ue.ok){var be=L?ue.clone():null;return q(ue,be,me)}return p(new $i(ue.statusText,ue.status,l.url))}).catch(function(ue){ue.code!==20&&p(new Error(ue.message))})}},q=function(W,ne,oe){(l.type==="arrayBuffer"?W.arrayBuffer():l.type==="json"?W.json():W.text()).then(function(me){C||(ne&&oe&&function(ue,be,Se){if(fi(),pi){var Ae={status:be.status,statusText:be.statusText,headers:new V.Headers};be.headers.forEach(function(Fe,Ge){return Ae.headers.set(Ge,Fe)});var De=Wr(be.headers.get("Cache-Control")||"");De["no-store"]||(De["max-age"]&&Ae.headers.set("Expires",new Date(Se+1e3*De["max-age"]).toUTCString()),new Date(Ae.headers.get("Expires")).getTime()-Se<42e4||function(Fe,Ge){if(Yi===void 0)try{new Response(new ReadableStream),Yi=!0}catch{Yi=!1}Yi?Ge(Fe.body):Fe.blob().then(Ge)}(be,function(Fe){var Ge=new V.Response(Fe,Ae);fi(),pi&&pi.then(function(tt){return tt.put(Oi(ue.url),Ge)}).catch(function(tt){return Ot(tt.message)})}))}}(S,ne,oe),A=!0,p(null,me,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(function(me){C||p(new Error(me.message))})};return L?function(W,ne){if(fi(),!pi)return ne(null);var oe=Oi(W.url);pi.then(function(me){me.match(oe).then(function(ue){var be=function(Se){if(!Se)return!1;var Ae=new Date(Se.headers.get("Expires")||0),De=Wr(Se.headers.get("Cache-Control")||"");return Ae>Date.now()&&!De["no-cache"]}(ue);me.delete(oe),be&&me.put(oe,ue.clone()),ne(null,ue,be)}).catch(ne)}).catch(ne)}(S,F):F(null,null),{cancel:function(){C=!0,A||v.abort()}}}(e,t);if(Qt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new V.XMLHttpRequest;for(var v in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(v,l.headers[v]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var S=d.response;if(l.type==="json")try{S=JSON.parse(d.response)}catch(A){return p(A)}p(null,S,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new $i(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},un=function(e,t){return In(Ve(e,{type:"arrayBuffer"}),t)},Gr=function(e,t){return In(Ve(e,{method:"POST"}),t)},O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Jr=[],Gi=0;var j=function(e,t){if(Ai.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Gi>=Yt.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return Jr.push(i),i}Gi++;var l=!1,p=function(){if(!l)for(l=!0,Gi--;Jr.length&&Gi<Yt.MAX_PARALLEL_IMAGE_REQUESTS;){var v=Jr.shift();v.cancelled||(v.cancel=j(v.requestParameters,v.callback).cancel)}},d=un(e,function(v,S,A,C){p(),v?t(v):S&&(ln()?function(L,F){var q=new V.Blob([new Uint8Array(L)],{type:"image/png"});V.createImageBitmap(q).then(function(W){F(null,W)}).catch(function(W){F(new Error("Could not load image because of "+W.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,t):function(L,F,q,W){var ne=new V.Image,oe=V.URL;ne.onload=function(){F(null,ne),oe.revokeObjectURL(ne.src),ne.onload=null,V.requestAnimationFrame(function(){ne.src=O})},ne.onerror=function(){return F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var me=new V.Blob([new Uint8Array(L)],{type:"image/png"});ne.cacheControl=q,ne.expires=W,ne.src=L.byteLength?oe.createObjectURL(me):O}(S,t,A,C))});return{cancel:function(){d.cancel(),p()}}};function Z(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function $(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var ie=function(e,t){t===void 0&&(t={}),Ve(this,t),this.type=e},de=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",Ve({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ie),ge=function(){};ge.prototype.on=function(e,t){return this._listeners=this._listeners||{},Z(e,t,this._listeners),this},ge.prototype.off=function(e,t){return $(e,t,this._listeners),$(e,t,this._oneTimeListeners),this},ge.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Z(e,t,this._oneTimeListeners),this},ge.prototype.fire=function(e,t){typeof e=="string"&&(e=new ie(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var S=v[d];$(i,S,this._oneTimeListeners),S.call(this,e)}var A=this._eventedParent;A&&(Ve(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(e))}else e instanceof de&&console.error(e.error);return this},ge.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ge.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var G={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},te=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function we(e){var t=e.value;return t?[new te(e.key,t,"constants have been deprecated as of v8")]:[]}function Ne(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}function je(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Te(e){if(Array.isArray(e))return e.map(Te);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Te(e[i]);return t}return je(e)}var qe=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),it=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};it.prototype.concat=function(e){return new it(this,e)},it.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},it.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var nt={kind:"null"},Pe={kind:"number"},Xe={kind:"string"},Ke={kind:"boolean"},Je={kind:"color"},Ct={kind:"object"},$e={kind:"value"},Gt={kind:"collator"},yr={kind:"formatted"},Bt={kind:"resolvedImage"};function qt(e,t){return{kind:"array",itemType:e,N:t}}function Dt(e){if(e.kind==="array"){var t=Dt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var gr=[nt,Pe,Xe,Ke,Je,yr,Ct,qt($e),Bt];function Ft(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Ft(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=gr;i<l.length;i+=1)if(!Ft(l[i],t))return null}}return"Expected "+Dt(e)+" but found "+Dt(t)+" instead."}function Dr(e,t){return t.some(function(i){return i.kind===e.kind})}function ar(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Wt=T(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(S){return(S=Math.round(S))<0?0:S>255?255:S}function p(S){return l(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function d(S){return(A=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:A>1?1:A;var A}function v(S,A,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?S+(A-S)*C*6:2*C<1?A:3*C<2?S+(A-S)*(2/3-C)*6:S}try{t.parseCSSColor=function(S){var A,C=S.replace(/ /g,"").toLowerCase();if(C in i)return i[C].slice();if(C[0]==="#")return C.length===4?(A=parseInt(C.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:C.length===7&&(A=parseInt(C.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var L=C.indexOf("("),F=C.indexOf(")");if(L!==-1&&F+1===C.length){var q=C.substr(0,L),W=C.substr(L+1,F-(L+1)).split(","),ne=1;switch(q){case"rgba":if(W.length!==4)return null;ne=d(W.pop());case"rgb":return W.length!==3?null:[p(W[0]),p(W[1]),p(W[2]),ne];case"hsla":if(W.length!==4)return null;ne=d(W.pop());case"hsl":if(W.length!==3)return null;var oe=(parseFloat(W[0])%360+360)%360/360,me=d(W[1]),ue=d(W[2]),be=ue<=.5?ue*(me+1):ue+me-ue*me,Se=2*ue-be;return[l(255*v(Se,be,oe+1/3)),l(255*v(Se,be,oe)),l(255*v(Se,be,oe-1/3)),ne];default:return null}}return null}}catch{}}).parseCSSColor,Ht=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};Ht.parse=function(e){if(e){if(e instanceof Ht)return e;if(typeof e=="string"){var t=Wt(e);if(t)return new Ht(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Ht.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},Ht.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Ht.black=new Ht(0,0,0,1),Ht.white=new Ht(1,1,1,1),Ht.transparent=new Ht(0,0,0,0),Ht.red=new Ht(1,0,0,1);var Tr=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Tr.prototype.compare=function(e,t){return this.collator.compare(e,t)},Tr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Tn=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},oi=function(e){this.sections=e};oi.fromString=function(e){return new oi([new Tn(e,null,null,null,null)])},oi.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},oi.factory=function(e){return e instanceof oi?e:oi.fromString(e)},oi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},oi.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var di=function(e){this.name=e.name,this.available=e.available};function $a(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ua(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Ht||e instanceof Tr||e instanceof oi||e instanceof di)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!ua(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!ua(e[l]))return!1;return!0}return!1}function Kr(e){if(e===null)return nt;if(typeof e=="string")return Xe;if(typeof e=="boolean")return Ke;if(typeof e=="number")return Pe;if(e instanceof Ht)return Je;if(e instanceof Tr)return Gt;if(e instanceof oi)return yr;if(e instanceof di)return Bt;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=Kr(p[l]);if(t){if(t===d)continue;t=$e;break}t=d}return qt(t||$e,i)}return Ct}function An(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Ht||e instanceof oi||e instanceof di?e.toString():JSON.stringify(e)}di.prototype.toString=function(){return this.name},di.fromString=function(e){return e?new di({name:e,available:!1}):null},di.prototype.serialize=function(){return["image",this.name]};var Fr=function(e,t){this.type=e,this.value=t};Fr.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!ua(e[1]))return t.error("invalid value");var i=e[1],l=Kr(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new Fr(l,i)},Fr.prototype.evaluate=function(){return this.value},Fr.prototype.eachChild=function(){},Fr.prototype.outputDefined=function(){return!0},Fr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ht?["rgba"].concat(this.value.toArray()):this.value instanceof oi?this.value.serialize():this.value};var xr=function(e){this.name="ExpressionEvaluationError",this.message=e};xr.prototype.toJSON=function(){return this.message};var Br={string:Xe,number:Pe,boolean:Ke,object:Ct},or=function(e,t){this.type=e,this.args=t};or.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,v;if(e.length>2){var S=e[1];if(typeof S!="string"||!(S in Br)||S==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=Br[S],l++}else d=$e;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);v=e[2],l++}i=qt(d,v)}else i=Br[p];for(var A=[];l<e.length;l++){var C=t.parse(e[l],l,$e);if(!C)return null;A.push(C)}return new or(i,A)},or.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!Ft(this.type,Kr(i)))return i;if(t===this.args.length-1)throw new xr("Expected value to be of type "+Dt(this.type)+", but found "+Dt(Kr(i))+" instead.")}return null},or.prototype.eachChild=function(e){this.args.forEach(e)},or.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},or.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var zi=function(e){this.type=yr,this.sections=e};zi.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var v=e[d];if(p&&typeof v=="object"&&!Array.isArray(v)){p=!1;var S=null;if(v["font-scale"]&&!(S=t.parse(v["font-scale"],1,Pe)))return null;var A=null;if(v["text-font"]&&!(A=t.parse(v["text-font"],1,qt(Xe))))return null;var C=null;if(v["text-color"]&&!(C=t.parse(v["text-color"],1,Je)))return null;var L=l[l.length-1];L.scale=S,L.font=A,L.textColor=C}else{var F=t.parse(e[d],1,$e);if(!F)return null;var q=F.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:F,scale:null,font:null,textColor:null})}}return new zi(l)},zi.prototype.evaluate=function(e){return new oi(this.sections.map(function(t){var i=t.content.evaluate(e);return Kr(i)===Bt?new Tn("",i,null,null,null):new Tn(An(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},zi.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},zi.prototype.outputDefined=function(){return!1},zi.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var Ii=function(e){this.type=Bt,this.input=e};Ii.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Xe);return i?new Ii(i):t.error("No image name provided.")},Ii.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=di.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},Ii.prototype.eachChild=function(e){e(this.input)},Ii.prototype.outputDefined=function(){return!1},Ii.prototype.serialize=function(){return["image",this.input.serialize()]};var tl={"to-boolean":Ke,"to-color":Je,"to-number":Pe,"to-string":Xe},Fi=function(e,t){this.type=e,this.args=t};Fi.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=tl[i],p=[],d=1;d<e.length;d++){var v=t.parse(e[d],d,$e);if(!v)return null;p.push(v)}return new Fi(l,p)},Fi.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof Ht)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":$a(t[0],t[1],t[2],t[3])))return new Ht(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new xr(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var v=null,S=0,A=this.args;S<A.length;S+=1){if((v=A[S].evaluate(e))===null)return 0;var C=Number(v);if(!isNaN(C))return C}throw new xr("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?oi.fromString(An(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?di.fromString(An(this.args[0].evaluate(e))):An(this.args[0].evaluate(e))},Fi.prototype.eachChild=function(e){this.args.forEach(e)},Fi.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Fi.prototype.serialize=function(){if(this.type.kind==="formatted")return new zi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ii(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var en=["Unknown","Point","LineString","Polygon"],Vr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Vr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Vr.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?en[this.feature.type]:this.feature.type:null},Vr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Vr.prototype.canonicalID=function(){return this.canonical},Vr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Vr.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ht.parse(e)),t};var Vi=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};Vi.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Vi.prototype.eachChild=function(e){this.args.forEach(e)},Vi.prototype.outputDefined=function(){return!1},Vi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Vi.parse=function(e,t){var i,l=e[0],p=Vi.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=v.filter(function(Tt){var st=Tt[0];return!Array.isArray(st)||st.length===e.length-1}),A=null,C=0,L=S;C<L.length;C+=1){var F=L[C],q=F[0],W=F[1];A=new hr(t.registry,t.path,null,t.scope);for(var ne=[],oe=!1,me=1;me<e.length;me++){var ue=e[me],be=Array.isArray(q)?q[me-1]:q.type,Se=A.parse(ue,1+ne.length,be);if(!Se){oe=!0;break}ne.push(Se)}if(!oe)if(Array.isArray(q)&&q.length!==ne.length)A.error("Expected "+q.length+" arguments, but found "+ne.length+" instead.");else{for(var Ae=0;Ae<ne.length;Ae++){var De=Array.isArray(q)?q[Ae]:q.type,Fe=ne[Ae];A.concat(Ae+1).checkSubtype(De,Fe.type)}if(A.errors.length===0)return new Vi(l,d,W,ne)}}if(S.length===1)(i=t.errors).push.apply(i,A.errors);else{for(var Ge=(S.length?S:v).map(function(Tt){var st;return st=Tt[0],Array.isArray(st)?"("+st.map(Dt).join(", ")+")":"("+Dt(st.type)+"...)"}).join(" | "),tt=[],xt=1;xt<e.length;xt++){var lt=t.parse(e[xt],1+tt.length);if(!lt)return null;tt.push(Dt(lt.type))}t.error("Expected arguments of type "+Ge+", but found ("+tt.join(", ")+") instead.")}return null},Vi.register=function(e,t){for(var i in Vi.definitions=t,t)e[i]=Vi};var zn=function(e,t,i){this.type=Gt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function Ki(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function eo(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Pn(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function Ea(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function ca(e,t){for(var i,l,p,d,v,S,A,C=!1,L=0,F=t.length;L<F;L++)for(var q=t[L],W=0,ne=q.length;W<ne-1;W++){if((d=(i=e)[0]-(l=q[W])[0])*(A=i[1]-(p=q[W+1])[1])-(S=i[0]-p[0])*(v=i[1]-l[1])==0&&d*S<=0&&v*A<=0)return!1;Ea(e,q[W],q[W+1])&&(C=!C)}return C}function ha(e,t){for(var i=0;i<t.length;i++)if(ca(e,t[i]))return!0;return!1}function vn(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],v=(e[0]-i[0])*d-p*(e[1]-i[1]),S=(t[0]-i[0])*d-p*(t[1]-i[1]);return v>0&&S<0||v<0&&S>0}function to(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],v=0;v<d.length-1;++v)if((F=[(L=d[v+1])[0]-(C=d[v])[0],L[1]-C[1]])[0]*(q=[(A=t)[0]-(S=e)[0],A[1]-S[1]])[1]-F[1]*q[0]!=0&&vn(S,A,C,L)&&vn(C,L,S,A))return!0;var S,A,C,L,F,q;return!1}function Sa(e,t){for(var i=0;i<e.length;++i)if(!ca(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(to(e[l],e[l+1],t))return!1;return!0}function Co(e,t){for(var i=0;i<t.length;i++)if(Sa(e,t[i]))return!0;return!1}function Cn(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],v=0;v<e[p].length;v++){var S=Pn(e[p][v],i);Ki(t,S),d.push(S)}l.push(d)}return l}function rl(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=Cn(e[p],t,i);l.push(d)}return l}function $o(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}Ki(t,e)}function pa(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],v=[],S=0,A=e;S<A.length;S+=1)for(var C=0,L=A[S];C<L.length;C+=1){var F=L[C],q=[F.x+d[0],F.y+d[1]];$o(q,t,i,p),v.push(q)}return v}function Hn(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),v=[8192*l.x,8192*l.y],S=[],A=0,C=e;A<C.length;A+=1){for(var L=[],F=0,q=C[A];F<q.length;F+=1){var W=q[F],ne=[W.x+v[0],W.y+v[1]];Ki(t,ne),L.push(ne)}S.push(L)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var oe=0,me=S;oe<me.length;oe+=1)for(var ue=0,be=me[oe];ue<be.length;ue+=1)$o(be[ue],t,i,d)}return S}zn.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Ke);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Ke);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,Xe))?null:new zn(l,p,d)},zn.prototype.evaluate=function(e){return new Tr(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},zn.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},zn.prototype.outputDefined=function(){return!1},zn.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Mn=function(e,t){this.type=Ke,this.geojson=e,this.geometries=t};function Xn(e){if(e instanceof Vi&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Mn)return!1;var t=!0;return e.eachChild(function(i){t&&!Xn(i)&&(t=!1)}),t}function xe(e){if(e instanceof Vi&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!xe(i)&&(t=!1)}),t}function Yr(e,t){if(e instanceof Vi&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!Yr(l,t)&&(i=!1)}),i}Mn.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(ua(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Mn(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Mn(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Mn(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Mn.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=Cn(i.coordinates,p,d),S=pa(t.geometry(),l,p,d);if(!eo(l,p))return!1;for(var A=0,C=S;A<C.length;A+=1)if(!ca(C[A],v))return!1}if(i.type==="MultiPolygon"){var L=rl(i.coordinates,p,d),F=pa(t.geometry(),l,p,d);if(!eo(l,p))return!1;for(var q=0,W=F;q<W.length;q+=1)if(!ha(W[q],L))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=Cn(i.coordinates,p,d),S=Hn(t.geometry(),l,p,d);if(!eo(l,p))return!1;for(var A=0,C=S;A<C.length;A+=1)if(!Sa(C[A],v))return!1}if(i.type==="MultiPolygon"){var L=rl(i.coordinates,p,d),F=Hn(t.geometry(),l,p,d);if(!eo(l,p))return!1;for(var q=0,W=F;q<W.length;q+=1)if(!Co(W[q],L))return!1}return!0}(e,this.geometries)}return!1},Mn.prototype.eachChild=function(){},Mn.prototype.outputDefined=function(){return!0},Mn.prototype.serialize=function(){return["within",this.geojson]};var Hr=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Hr.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Hr(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Hr.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Hr.prototype.eachChild=function(){},Hr.prototype.outputDefined=function(){return!1},Hr.prototype.serialize=function(){return["var",this.name]};var hr=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new it),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function ro(e,t){for(var i,l=e.length-1,p=0,d=l,v=0;p<=d;)if((i=e[v=Math.floor((p+d)/2)])<=t){if(v===l||t<e[v+1])return v;p=v+1}else{if(!(i>t))throw new xr("Input is not a number.");d=v-1}return 0}hr.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},hr.prototype._parse=function(e,t){function i(C,L,F){return F==="assert"?new or(L,[C]):F==="coerce"?new Fi(L,[C]):C}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,S=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||S.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(v,S))return null}else d=i(d,v,t.typeAnnotation||"coerce");else d=i(d,v,t.typeAnnotation||"assert")}if(!(d instanceof Fr)&&d.type.kind!=="resolvedImage"&&function C(L){if(L instanceof Hr)return C(L.boundExpression);if(L instanceof Vi&&L.name==="error"||L instanceof zn||L instanceof Mn)return!1;var F=L instanceof Fi||L instanceof or,q=!0;return L.eachChild(function(W){q=F?q&&C(W):q&&W instanceof Fr}),!!q&&Xn(L)&&Yr(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var A=new Vr;try{d=new Fr(d.type,d.evaluate(A))}catch(C){return this.error(C.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},hr.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new hr(this.registry,l,t||null,p,this.errors)},hr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new qe(l,e))},hr.prototype.checkSubtype=function(e,t){var i=Ft(e,t);return i&&this.error(i),i};var mi=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function qr(e,t,i){return e*(1-i)+t*i}mi.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Pe);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],S=e[d+1],A=d,C=d+1;if(typeof v!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(l.length&&l[l.length-1][0]>=v)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);var L=t.parse(S,C,p);if(!L)return null;p=p||L.type,l.push([v,L])}return new mi(p,i,l)},mi.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[ro(t,l)].evaluate(e)},mi.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},mi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},mi.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var ka=Object.freeze({__proto__:null,number:qr,color:function(e,t,i){return new Ht(qr(e.r,t.r,i),qr(e.g,t.g,i),qr(e.b,t.b,i),qr(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return qr(l,t[p],i)})}}),as=6/29*3*(6/29),Mo=Math.PI/180,Ju=180/Math.PI;function il(e){return e>.008856451679035631?Math.pow(e,1/3):e/as+4/29}function Va(e){return e>6/29?e*e*e:as*(e-4/29)}function mo(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function os(e){var t=Bs(e.r),i=Bs(e.g),l=Bs(e.b),p=il((.4124564*t+.3575761*i+.1804375*l)/.95047),d=il((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-il((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function nl(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*Va(t),i=.95047*Va(i),l=1.08883*Va(l),new Ht(mo(3.2404542*i-1.5371385*t-.4985314*l),mo(-.969266*i+1.8760108*t+.041556*l),mo(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function Hl(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var Wn={forward:os,reverse:nl,interpolate:function(e,t,i){return{l:qr(e.l,t.l,i),a:qr(e.a,t.a,i),b:qr(e.b,t.b,i),alpha:qr(e.alpha,t.alpha,i)}}},tn={forward:function(e){var t=os(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*Ju;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Mo,i=e.c;return nl({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Hl(e.h,t.h,i),c:qr(e.c,t.c,i),l:qr(e.l,t.l,i),alpha:qr(e.alpha,t.alpha,i)}}},Ia=Object.freeze({__proto__:null,lab:Wn,hcl:tn}),gi=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,v=p;d<v.length;d+=1){var S=v[d],A=S[1];this.labels.push(S[0]),this.outputs.push(A)}};function fa(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}gi.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=fa(t,e.base,i,l);else if(e.name==="linear")p=fa(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new k(d[0],d[1],d[2],d[3]).solve(fa(t,1,i,l))}return p},gi.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var v=l[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:v}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var S=l.slice(1);if(S.length!==4||S.some(function(me){return typeof me!="number"||me<0||me>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:S}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Pe)))return null;var A=[],C=null;i==="interpolate-hcl"||i==="interpolate-lab"?C=Je:t.expectedType&&t.expectedType.kind!=="value"&&(C=t.expectedType);for(var L=0;L<d.length;L+=2){var F=d[L],q=d[L+1],W=L+3,ne=L+4;if(typeof F!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(A.length&&A[A.length-1][0]>=F)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);var oe=t.parse(q,ne,C);if(!oe)return null;C=C||oe.type,A.push([F,oe])}return C.kind==="number"||C.kind==="color"||C.kind==="array"&&C.itemType.kind==="number"&&typeof C.N=="number"?new gi(C,i,l,p,A):t.error("Type "+Dt(C)+" is not interpolatable.")},gi.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=ro(t,l),v=gi.interpolationFactor(this.interpolation,l,t[d],t[d+1]),S=i[d].evaluate(e),A=i[d+1].evaluate(e);return this.operator==="interpolate"?ka[this.type.kind.toLowerCase()](S,A,v):this.operator==="interpolate-hcl"?tn.reverse(tn.interpolate(tn.forward(S),tn.forward(A),v)):Wn.reverse(Wn.interpolate(Wn.forward(S),Wn.forward(A),v))},gi.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},gi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},gi.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var Pi=function(e,t){this.type=e,this.args=t};Pi.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,v=e.slice(1);d<v.length;d+=1){var S=t.parse(v[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!S)return null;i=i||S.type,p.push(S)}var A=l&&p.some(function(C){return Ft(l,C.type)});return new Pi(A?$e:i,p)},Pi.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof di&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},Pi.prototype.eachChild=function(e){this.args.forEach(e)},Pi.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Pi.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var es=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};es.prototype.evaluate=function(e){return this.result.evaluate(e)},es.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},es.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var v=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return v?new es(i,v):null},es.prototype.outputDefined=function(){return this.result.outputDefined()},es.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var Ta=function(e,t,i){this.type=e,this.index=t,this.input=i};Ta.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Pe),l=t.parse(e[2],2,qt(t.expectedType||$e));return i&&l?new Ta(l.type.itemType,i,l):null},Ta.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new xr("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new xr("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new xr("Array index must be an integer, but found "+t+" instead.");return i[t]},Ta.prototype.eachChild=function(e){e(this.index),e(this.input)},Ta.prototype.outputDefined=function(){return!1},Ta.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var da=function(e,t){this.type=Ke,this.needle=e,this.haystack=t};da.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,$e),l=t.parse(e[2],2,$e);return i&&l?Dr(i.type,[Ke,Xe,Pe,nt,$e])?new da(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Dt(i.type)+" instead"):null},da.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!ar(t,["boolean","string","number","null"]))throw new xr("Expected first argument to be of type boolean, string, number or null, but found "+Dt(Kr(t))+" instead.");if(!ar(i,["string","array"]))throw new xr("Expected second argument to be of type array or string, but found "+Dt(Kr(i))+" instead.");return i.indexOf(t)>=0},da.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},da.prototype.outputDefined=function(){return!0},da.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ni=function(e,t,i){this.type=Pe,this.needle=e,this.haystack=t,this.fromIndex=i};Ni.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,$e),l=t.parse(e[2],2,$e);if(!i||!l)return null;if(!Dr(i.type,[Ke,Xe,Pe,nt,$e]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Dt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Pe);return p?new Ni(i,l,p):null}return new Ni(i,l)},Ni.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!ar(t,["boolean","string","number","null"]))throw new xr("Expected first argument to be of type boolean, string, number or null, but found "+Dt(Kr(t))+" instead.");if(!ar(i,["string","array"]))throw new xr("Expected second argument to be of type array or string, but found "+Dt(Kr(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},Ni.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Ni.prototype.outputDefined=function(){return!1},Ni.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var io=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};io.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],v=2;v<e.length-1;v+=2){var S=e[v],A=e[v+1];Array.isArray(S)||(S=[S]);var C=t.concat(v);if(S.length===0)return C.error("Expected at least one branch label.");for(var L=0,F=S;L<F.length;L+=1){var q=F[L];if(typeof q!="number"&&typeof q!="string")return C.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return C.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof q=="number"&&Math.floor(q)!==q)return C.error("Numeric branch labels must be integer values.");if(i){if(C.checkSubtype(i,Kr(q)))return null}else i=Kr(q);if(p[String(q)]!==void 0)return C.error("Branch labels must be unique.");p[String(q)]=d.length}var W=t.parse(A,v,l);if(!W)return null;l=l||W.type,d.push(W)}var ne=t.parse(e[1],1,$e);if(!ne)return null;var oe=t.parse(e[e.length-1],e.length-1,l);return oe?ne.type.kind!=="value"&&t.concat(1).checkSubtype(i,ne.type)?null:new io(i,l,ne,p,d,oe):null},io.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Kr(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},io.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},io.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},io.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var v=d[p];(F=l[this.cases[v]])===void 0?(l[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[F][1].push(v)}for(var S=function(W){return e.inputType.kind==="number"?Number(W):W},A=0,C=i;A<C.length;A+=1){var L=C[A],F=L[0],q=L[1];t.push(q.length===1?S(q[0]):q.map(S)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Aa=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};Aa.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,Ke);if(!d)return null;var v=t.parse(e[p+1],p+1,i);if(!v)return null;l.push([d,v]),i=i||v.type}var S=t.parse(e[e.length-1],e.length-1,i);return S?new Aa(i,l,S):null},Aa.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},Aa.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},Aa.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Aa.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var wn=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function Is(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Ts(e,t,i,l){return l.compare(t,i)===0}function pr(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,v,S){this.type=Ke,this.lhs=d,this.rhs=v,this.collator=S,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return p.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var S=d[0],A=v.parse(d[1],1,$e);if(!A)return null;if(!Is(S,A.type))return v.concat(1).error('"'+S+`" comparisons are not supported for type '`+Dt(A.type)+"'.");var C=v.parse(d[2],2,$e);if(!C)return null;if(!Is(S,C.type))return v.concat(2).error('"'+S+`" comparisons are not supported for type '`+Dt(C.type)+"'.");if(A.type.kind!==C.type.kind&&A.type.kind!=="value"&&C.type.kind!=="value")return v.error("Cannot compare types '"+Dt(A.type)+"' and '"+Dt(C.type)+"'.");l&&(A.type.kind==="value"&&C.type.kind!=="value"?A=new or(C.type,[A]):A.type.kind!=="value"&&C.type.kind==="value"&&(C=new or(A.type,[C])));var L=null;if(d.length===4){if(A.type.kind!=="string"&&C.type.kind!=="string"&&A.type.kind!=="value"&&C.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(L=v.parse(d[3],3,Gt)))return null}return new p(A,C,L)},p.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),S=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var A=Kr(v),C=Kr(S);if(A.kind!==C.kind||A.kind!=="string"&&A.kind!=="number")throw new xr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+A.kind+", "+C.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var L=Kr(v),F=Kr(S);if(L.kind!=="string"||F.kind!=="string")return t(d,v,S)}return this.collator?i(d,v,S,this.collator.evaluate(d)):t(d,v,S)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},p}()}wn.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,$e),l=t.parse(e[2],2,Pe);if(!i||!l)return null;if(!Dr(i.type,[qt($e),Xe,$e]))return t.error("Expected first argument to be of type array or string, but found "+Dt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Pe);return p?new wn(i.type,i,l,p):null}return new wn(i.type,i,l)},wn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!ar(t,["string","array"]))throw new xr("Expected first argument to be of type array or string, but found "+Dt(Kr(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},wn.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},wn.prototype.outputDefined=function(){return!1},wn.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Jn=pr("==",function(e,t,i){return t===i},Ts),si=pr("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!Ts(0,t,i,l)}),cn=pr("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),rn=pr(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),_i=pr("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),Os=pr(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),Yn=function(e,t,i,l,p){this.type=Xe,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};Yn.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Pe);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,Xe)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,Xe)))return null;var v=null;if(l["min-fraction-digits"]&&!(v=t.parse(l["min-fraction-digits"],1,Pe)))return null;var S=null;return l["max-fraction-digits"]&&!(S=t.parse(l["max-fraction-digits"],1,Pe))?null:new Yn(i,p,d,v,S)},Yn.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Yn.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Yn.prototype.outputDefined=function(){return!1},Yn.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var no=function(e){this.type=Pe,this.input=e};no.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Dt(i.type)+" instead."):new no(i):null},no.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new xr("Expected value to be of type string or array, but found "+Dt(Kr(t))+" instead.")},no.prototype.eachChild=function(e){e(this.input)},no.prototype.outputDefined=function(){return!1},no.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Do={"==":Jn,"!=":si,">":rn,"<":cn,">=":Os,"<=":_i,array:or,at:Ta,boolean:or,case:Aa,coalesce:Pi,collator:zn,format:zi,image:Ii,in:da,"index-of":Ni,interpolate:gi,"interpolate-hcl":gi,"interpolate-lab":gi,length:no,let:es,literal:Fr,match:io,number:or,"number-format":Yn,object:or,slice:wn,step:mi,string:or,"to-boolean":Fi,"to-color":Fi,"to-number":Fi,"to-string":Fi,var:Hr,within:Mn};function ao(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var v=d?d.evaluate(e):1,S=$a(i,l,p,v);if(S)throw new xr(S);return new Ht(i/255*v,l/255*v,p/255*v,v)}function ss(e,t){return e in t}function za(e,t){var i=t[e];return i===void 0?null:i}function Dn(e){return{type:e}}function al(e){return{result:"success",value:e}}function yo(e){return{result:"error",value:e}}function Ln(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function hn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Fs(e){return!!e.expression&&e.expression.interpolated}function wr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function ma(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Ue(e){return e}function _t(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function Rn(e,t,i,l,p){return _t(typeof i===p?l[i]:void 0,e.default,t.default)}function go(e,t,i){if(wr(i)!=="number")return _t(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=ro(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function _o(e,t,i){var l=e.base!==void 0?e.base:1;if(wr(i)!=="number")return _t(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=ro(e.stops.map(function(F){return F[0]}),i),v=function(F,q,W,ne){var oe=ne-W,me=F-W;return oe===0?0:q===1?me/oe:(Math.pow(q,me)-1)/(Math.pow(q,oe)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),S=e.stops[d][1],A=e.stops[d+1][1],C=ka[t.type]||Ue;if(e.colorSpace&&e.colorSpace!=="rgb"){var L=Ia[e.colorSpace];C=function(F,q){return L.reverse(L.interpolate(L.forward(F),L.forward(q),v))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var F=[],q=arguments.length;q--;)F[q]=arguments[q];var W=S.evaluate.apply(void 0,F),ne=A.evaluate.apply(void 0,F);if(W!==void 0&&ne!==void 0)return C(W,ne,v)}}:C(S,A,v)}function Xl(e,t,i){return t.type==="color"?i=Ht.parse(i):t.type==="formatted"?i=oi.fromString(i.toString()):t.type==="resolvedImage"?i=di.fromString(i.toString()):wr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),_t(i,e.default,t.default)}Vi.register(Do,{error:[{kind:"error"},[Xe],function(e,t){throw new xr(t[0].evaluate(e))}],typeof:[Xe,[$e],function(e,t){return Dt(Kr(t[0].evaluate(e)))}],"to-rgba":[qt(Pe,4),[Je],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Je,[Pe,Pe,Pe],ao],rgba:[Je,[Pe,Pe,Pe,Pe],ao],has:{type:Ke,overloads:[[[Xe],function(e,t){return ss(t[0].evaluate(e),e.properties())}],[[Xe,Ct],function(e,t){var i=t[1];return ss(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:$e,overloads:[[[Xe],function(e,t){return za(t[0].evaluate(e),e.properties())}],[[Xe,Ct],function(e,t){var i=t[1];return za(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[$e,[Xe],function(e,t){return za(t[0].evaluate(e),e.featureState||{})}],properties:[Ct,[],function(e){return e.properties()}],"geometry-type":[Xe,[],function(e){return e.geometryType()}],id:[$e,[],function(e){return e.id()}],zoom:[Pe,[],function(e){return e.globals.zoom}],"heatmap-density":[Pe,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Pe,[],function(e){return e.globals.lineProgress||0}],accumulated:[$e,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Pe,Dn(Pe),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Pe,Dn(Pe),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Pe,overloads:[[[Pe,Pe],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Pe],function(e,t){return-t[0].evaluate(e)}]]},"/":[Pe,[Pe,Pe],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Pe,[Pe,Pe],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Pe,[],function(){return Math.LN2}],pi:[Pe,[],function(){return Math.PI}],e:[Pe,[],function(){return Math.E}],"^":[Pe,[Pe,Pe],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Pe,[Pe],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Pe,[Pe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Pe,[Pe],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Pe,[Pe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Pe,[Pe],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Pe,[Pe],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Pe,[Pe],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Pe,[Pe],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Pe,[Pe],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Pe,[Pe],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Pe,Dn(Pe),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Pe,Dn(Pe),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Pe,[Pe],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Pe,[Pe],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Pe,[Pe],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Pe,[Pe],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ke,[Xe,$e],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[Ke,[$e],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Ke,[Xe],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Ke,[Xe,$e],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[Ke,[$e],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[Ke,[Xe,$e],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[Ke,[$e],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[Ke,[Xe,$e],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[Ke,[$e],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[Ke,[Xe,$e],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[Ke,[$e],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[Ke,[$e],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ke,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Ke,[qt(Xe)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ke,[qt($e)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ke,[Xe,qt($e)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Ke,[Xe,qt($e)],function(e,t){var i=t[0],l=t[1];return function(p,d,v,S){for(;v<=S;){var A=v+S>>1;if(d[A]===p)return!0;d[A]>p?S=A-1:v=A+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:Ke,overloads:[[[Ke,Ke],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[Dn(Ke),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:Ke,overloads:[[[Ke,Ke],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[Dn(Ke),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[Ke,[Ke],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ke,[Xe],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[Xe,[Xe],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Xe,[Xe],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Xe,Dn($e),function(e,t){return t.map(function(i){return An(i.evaluate(e))}).join("")}],"resolved-locale":[Xe,[Gt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var oo=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Vr,this._defaultValue=t?function(i){return i.type==="color"&&ma(i.default)?new Ht(0,0,0,0):i.type==="color"?Ht.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function Lo(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Do}function ya(e,t){var i=new hr(Do,[],t?function(p){var d={color:Je,string:Xe,number:Pe,enum:Xe,boolean:Ke,formatted:yr,resolvedImage:Bt};return p.type==="array"?qt(d[p.value]||$e,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?al(new oo(l,t)):yo(i.errors)}oo.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},oo.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new xr("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Vs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!xe(t.expression)};Vs.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},Vs.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var vo=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!xe(t.expression),this.interpolationType=l};function ts(e,t){if((e=ya(e,t)).result==="error")return e;var i=e.value.expression,l=Xn(i);if(!l&&!Ln(t))return yo([new qe("","data expressions not supported")]);var p=Yr(i,["zoom"]);if(!p&&!hn(t))return yo([new qe("","zoom expressions not supported")]);var d=function v(S){var A=null;if(S instanceof es)A=v(S.result);else if(S instanceof Pi)for(var C=0,L=S.args;C<L.length&&!(A=v(L[C]));C+=1);else(S instanceof mi||S instanceof gi)&&S.input instanceof Vi&&S.input.name==="zoom"&&(A=S);return A instanceof qe||S.eachChild(function(F){var q=v(F);q instanceof qe?A=q:!A&&q?A=new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):A&&q&&A!==q&&(A=new qe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),A}(i);return d||p?d instanceof qe?yo([d]):d instanceof gi&&!Fs(t)?yo([new qe("",'"interpolate" expressions cannot be used with this property')]):al(d?new vo(l?"camera":"composite",e.value,d.labels,d instanceof gi?d.interpolation:void 0):new Vs(l?"constant":"source",e.value)):yo([new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}vo.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},vo.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},vo.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?gi.interpolationFactor(this.interpolationType,e,t,i):0};var As=function(e,t){this._parameters=e,this._specification=t,Ne(this,function i(l,p){var d,v,S,A=p.type==="color",C=l.stops&&typeof l.stops[0][0]=="object",L=C||!(C||l.property!==void 0),F=l.type||(Fs(p)?"exponential":"interval");if(A&&((l=Ne({},l)).stops&&(l.stops=l.stops.map(function(lt){return[lt[0],Ht.parse(lt[1])]})),l.default=Ht.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!Ia[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(F==="exponential")d=_o;else if(F==="interval")d=go;else if(F==="categorical"){d=Rn,v=Object.create(null);for(var q=0,W=l.stops;q<W.length;q+=1){var ne=W[q];v[ne[0]]=ne[1]}S=typeof l.stops[0][0]}else{if(F!=="identity")throw new Error('Unknown function type "'+F+'"');d=Xl}if(C){for(var oe={},me=[],ue=0;ue<l.stops.length;ue++){var be=l.stops[ue],Se=be[0].zoom;oe[Se]===void 0&&(oe[Se]={zoom:Se,type:l.type,property:l.property,default:l.default,stops:[]},me.push(Se)),oe[Se].stops.push([be[0].value,be[1]])}for(var Ae=[],De=0,Fe=me;De<Fe.length;De+=1){var Ge=Fe[De];Ae.push([oe[Ge].zoom,i(oe[Ge],p)])}var tt={name:"linear"};return{kind:"composite",interpolationType:tt,interpolationFactor:gi.interpolationFactor.bind(void 0,tt),zoomStops:Ae.map(function(lt){return lt[0]}),evaluate:function(lt,Tt){var st=lt.zoom;return _o({stops:Ae,base:l.base},p,st).evaluate(st,Tt)}}}if(L){var xt=F==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:xt,interpolationFactor:gi.interpolationFactor.bind(void 0,xt),zoomStops:l.stops.map(function(lt){return lt[0]}),evaluate:function(lt){return d(l,p,lt.zoom,v,S)}}}return{kind:"source",evaluate:function(lt,Tt){var st=Tt&&Tt.properties?Tt.properties[l.property]:void 0;return st===void 0?_t(l.default,p.default):d(l,p,st,v,S)}}}(this._parameters,this._specification))};function so(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,v=e.styleSpec,S=[],A=wr(i);if(A!=="object")return[new te(t,i,"object expected, "+A+" found")];for(var C in i){var L=C.split(".")[0],F=l[L]||l["*"],q=void 0;if(p[L])q=p[L];else if(l[L])q=sr;else if(p["*"])q=p["*"];else{if(!l["*"]){S.push(new te(t,i[C],'unknown property "'+C+'"'));continue}q=sr}S=S.concat(q({key:(t&&t+".")+C,value:i[C],valueSpec:F,style:d,styleSpec:v,object:i,objectKey:C},i))}for(var W in l)p[W]||l[W].required&&l[W].default===void 0&&i[W]===void 0&&S.push(new te(t,i,'missing required property "'+W+'"'));return S}function ls(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,v=e.arrayElementValidator||sr;if(wr(t)!=="array")return[new te(d,t,"array expected, "+wr(t)+" found")];if(i.length&&t.length!==i.length)return[new te(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new te(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var S={type:i.value,values:i.values};p.$version<7&&(S.function=i.function),wr(i.value)==="object"&&(S=i.value);for(var A=[],C=0;C<t.length;C++)A=A.concat(v({array:t,arrayIndex:C,value:t[C],valueSpec:S,style:l,styleSpec:p,key:d+"["+C+"]"}));return A}function zs(e){var t=e.key,i=e.value,l=e.valueSpec,p=wr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new te(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new te(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new te(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function Pa(e){var t,i,l,p=e.valueSpec,d=je(e.value.type),v={},S=d!=="categorical"&&e.value.property===void 0,A=!S,C=wr(e.value.stops)==="array"&&wr(e.value.stops[0])==="array"&&wr(e.value.stops[0][0])==="object",L=so({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(W){if(d==="identity")return[new te(W.key,W.value,'identity function may not have a "stops" property')];var ne=[],oe=W.value;return ne=ne.concat(ls({key:W.key,value:oe,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:F})),wr(oe)==="array"&&oe.length===0&&ne.push(new te(W.key,oe,"array must have at least one stop")),ne},default:function(W){return sr({key:W.key,value:W.value,valueSpec:p,style:W.style,styleSpec:W.styleSpec})}}});return d==="identity"&&S&&L.push(new te(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||L.push(new te(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Fs(e.valueSpec)&&L.push(new te(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(A&&!Ln(e.valueSpec)?L.push(new te(e.key,e.value,"property functions not supported")):S&&!hn(e.valueSpec)&&L.push(new te(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!C||e.value.property!==void 0||L.push(new te(e.key,e.value,'"property" property is required')),L;function F(W){var ne=[],oe=W.value,me=W.key;if(wr(oe)!=="array")return[new te(me,oe,"array expected, "+wr(oe)+" found")];if(oe.length!==2)return[new te(me,oe,"array length 2 expected, length "+oe.length+" found")];if(C){if(wr(oe[0])!=="object")return[new te(me,oe,"object expected, "+wr(oe[0])+" found")];if(oe[0].zoom===void 0)return[new te(me,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new te(me,oe,"object stop key must have value")];if(l&&l>je(oe[0].zoom))return[new te(me,oe[0].zoom,"stop zoom values must appear in ascending order")];je(oe[0].zoom)!==l&&(l=je(oe[0].zoom),i=void 0,v={}),ne=ne.concat(so({key:me+"[0]",value:oe[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:zs,value:q}}))}else ne=ne.concat(q({key:me+"[0]",value:oe[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},oe));return Lo(Te(oe[1]))?ne.concat([new te(me+"[1]",oe[1],"expressions are not allowed in function stops.")]):ne.concat(sr({key:me+"[1]",value:oe[1],valueSpec:p,style:W.style,styleSpec:W.styleSpec}))}function q(W,ne){var oe=wr(W.value),me=je(W.value),ue=W.value!==null?W.value:ne;if(t){if(oe!==t)return[new te(W.key,ue,oe+" stop domain type must match previous stop domain type "+t)]}else t=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new te(W.key,ue,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&d!=="categorical"){var be="number expected, "+oe+" found";return Ln(p)&&d===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new te(W.key,ue,be)]}return d!=="categorical"||oe!=="number"||isFinite(me)&&Math.floor(me)===me?d!=="categorical"&&oe==="number"&&i!==void 0&&me<i?[new te(W.key,ue,"stop domain values must appear in ascending order")]:(i=me,d==="categorical"&&me in v?[new te(W.key,ue,"stop domain values must be unique")]:(v[me]=!0,[])):[new te(W.key,ue,"integer expected, found "+me)]}}function Bn(e){var t=(e.expressionContext==="property"?ts:ya)(Te(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new te(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new te(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!xe(i))return[new te(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!xe(i))return[new te(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Yr(i,["zoom","feature-state"]))return[new te(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Xn(i))return[new te(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nn(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(je(i))===-1&&p.push(new te(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(je(i))===-1&&p.push(new te(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function ol(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!ol(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}As.deserialize=function(e){return new As(e._parameters,e._specification)},As.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var rs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gu(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};ol(e)||(e=Ro(e));var t=ya(e,rs);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function _u(e,t){return e<t?-1:e>t?1:0}function Ro(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?us(e[1],e[2],"=="):i==="!="?Qn(us(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?us(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(Ro))):i==="all"?["all"].concat(e.slice(1).map(Ro)):i==="none"?["all"].concat(e.slice(1).map(Ro).map(Qn)):i==="in"?Wl(e[1],e.slice(2)):i==="!in"?Qn(Wl(e[1],e.slice(2))):i==="has"?Ps(e[1]):i==="!has"?Qn(Ps(e[1])):i!=="within"||e}function us(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function Wl(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(_u)]]:["filter-in-small",e,["literal",t]]}}function Ps(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Qn(e){return["!",e]}function zl(e){return ol(Te(e.value))?Bn(Ne({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(wr(l)!=="array")return[new te(p,l,"array expected, "+wr(l)+" found")];var d,v=i.styleSpec,S=[];if(l.length<1)return[new te(p,l,"filter array must have at least 1 element")];switch(S=S.concat(nn({key:p+"[0]",value:l[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),je(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&je(l[1])==="$type"&&S.push(new te(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&S.push(new te(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=wr(l[1]))!=="string"&&S.push(new te(p+"[1]",l[1],"string expected, "+d+" found"));for(var A=2;A<l.length;A++)d=wr(l[A]),je(l[1])==="$type"?S=S.concat(nn({key:p+"["+A+"]",value:l[A],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&S.push(new te(p+"["+A+"]",l[A],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var C=1;C<l.length;C++)S=S.concat(t({key:p+"["+C+"]",value:l[C],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=wr(l[1]),l.length!==2?S.push(new te(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&S.push(new te(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=wr(l[1]),l.length!==2?S.push(new te(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&S.push(new te(p+"[1]",l[1],"object expected, "+d+" found"))}return S}(e)}function sl(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,v=e.objectKey,S=p[t+"_"+e.layerType];if(!S)return[];var A=v.match(/^(.*)-transition$/);if(t==="paint"&&A&&S[A[1]]&&S[A[1]].transition)return sr({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var C,L=e.valueSpec||S[v];if(!L)return[new te(i,d,'unknown property "'+v+'"')];if(wr(d)==="string"&&Ln(L)&&!L.tokens&&(C=/^{([^}]+)}$/.exec(d)))return[new te(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(C[1])+" }`.")];var F=[];return e.layerType==="symbol"&&(v==="text-field"&&l&&!l.glyphs&&F.push(new te(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&ma(Te(d))&&je(d.type)==="identity"&&F.push(new te(i,d,'"text-font" does not support identity functions'))),F.concat(sr({key:e.key,value:d,valueSpec:L,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:v}))}function cs(e){return sl(e,"paint")}function Ns(e){return sl(e,"layout")}function bo(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new te(l,i,'either "type" or "ref" is required'));var v,S=je(i.type),A=je(i.ref);if(i.id)for(var C=je(i.id),L=0;L<e.arrayIndex;L++){var F=p.layers[L];je(F.id)===C&&t.push(new te(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+F.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(ne){ne in i&&t.push(new te(l,i[ne],'"'+ne+'" is prohibited for ref layers'))}),p.layers.forEach(function(ne){je(ne.id)===A&&(v=ne)}),v?v.ref?t.push(new te(l,i.ref,"ref cannot reference another ref layer")):S=je(v.type):t.push(new te(l,i.ref,'ref layer "'+A+'" not found'));else if(S!=="background")if(i.source){var q=p.sources&&p.sources[i.source],W=q&&je(q.type);q?W==="vector"&&S==="raster"?t.push(new te(l,i.source,'layer "'+i.id+'" requires a raster source')):W==="raster"&&S!=="raster"?t.push(new te(l,i.source,'layer "'+i.id+'" requires a vector source')):W!=="vector"||i["source-layer"]?W==="raster-dem"&&S!=="hillshade"?t.push(new te(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!i.paint||!i.paint["line-gradient"]||W==="geojson"&&q.lineMetrics||t.push(new te(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new te(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new te(l,i.source,'source "'+i.source+'" not found'))}else t.push(new te(l,i,'missing required property "source"'));return t=t.concat(so({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return sr({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:zl,layout:function(ne){return so({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(oe){return Ns(Ne({layerType:S},oe))}}})},paint:function(ne){return so({layer:i,key:ne.key,value:ne.value,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{"*":function(oe){return cs(Ne({layerType:S},oe))}}})}}}))}function On(e){var t=e.value,i=e.key,l=wr(t);return l!=="string"?[new te(i,t,"string expected, "+l+" found")]:[]}var Lr={promoteId:function(e){var t=e.key,i=e.value;if(wr(i)==="string")return On({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,On({key:t+"."+p,value:i[p]}));return l}};function ll(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new te(i,t,'"type" is required')];var d,v=je(t.type);switch(v){case"vector":case"raster":case"raster-dem":return so({key:i,value:t,valueSpec:l["source_"+v.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:Lr});case"geojson":if(d=so({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:Lr}),t.cluster)for(var S in t.clusterProperties){var A=t.clusterProperties[S],C=A[0],L=typeof C=="string"?[C,["accumulated"],["get",S]]:C;d.push.apply(d,Bn({key:i+"."+S+".map",value:A[1],expressionContext:"cluster-map"})),d.push.apply(d,Bn({key:i+"."+S+".reduce",value:L,expressionContext:"cluster-reduce"}))}return d;case"video":return so({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return so({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new te(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nn({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function En(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],v=wr(t);if(t===void 0)return d;if(v!=="object")return d.concat([new te("light",t,"object expected, "+v+" found")]);for(var S in t){var A=S.match(/^(.*)-transition$/);d=d.concat(A&&l[A[1]]&&l[A[1]].transition?sr({key:S,value:t[S],valueSpec:i.transition,style:p,styleSpec:i}):l[S]?sr({key:S,value:t[S],valueSpec:l[S],style:p,styleSpec:i}):[new te(S,t[S],'unknown property "'+S+'"')])}return d}var Cs={"*":function(){return[]},array:ls,boolean:function(e){var t=e.value,i=e.key,l=wr(t);return l!=="boolean"?[new te(i,t,"boolean expected, "+l+" found")]:[]},number:zs,color:function(e){var t=e.key,i=e.value,l=wr(i);return l!=="string"?[new te(t,i,"color expected, "+l+" found")]:Wt(i)===null?[new te(t,i,'color expected, "'+i+'" found')]:[]},constants:we,enum:nn,filter:zl,function:Pa,layer:bo,object:so,source:ll,light:En,string:On,formatted:function(e){return On(e).length===0?[]:Bn(e)},resolvedImage:function(e){return On(e).length===0?[]:Bn(e)}};function sr(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&ma(je(t))?Pa(e):i.expression&&Lo(Te(t))?Bn(e):i.type&&Cs[i.type]?Cs[i.type](e):so(Ne({},e,{valueSpec:i.type?l[i.type]:i}))}function Rr(e){var t=e.value,i=e.key,l=On(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new te(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new te(i,t,'"glyphs" url must include a "{range}" token'))),l}function Sn(e,t){t===void 0&&(t=G);var i=[];return i=i.concat(sr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Rr,"*":function(){return[]}}})),e.constants&&(i=i.concat(we({key:"constants",value:e.constants,style:e,styleSpec:t}))),Us(i)}function Us(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function xo(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Us(e.apply(this,t))}}Sn.source=xo(ll),Sn.light=xo(En),Sn.layer=xo(bo),Sn.filter=xo(zl),Sn.paintProperty=xo(cs),Sn.layoutProperty=xo(Ns);var Bo=Sn,Pl=Bo.light,vu=Bo.paintProperty,wo=Bo.layoutProperty;function ul(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new de(new Error(p[l].message))),i=!0;return i}var Oo=Nr;function Nr(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var v=p[3+d],S=p[3+d+1];l.push(v===S?null:p.subarray(v,S))}var A=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],A),this.bboxes=p.subarray(A),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var C=0;C<this.d*this.d;C++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var L=i/t*e;this.min=-L,this.max=e+L}Nr.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},Nr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Nr.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},Nr.prototype.query=function(e,t,i,l,p){var d=this.min,v=this.max;if(e<=d&&t<=d&&v<=i&&v<=l&&!p)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(e,t,i,l,this._queryCell,S,{},p),S},Nr.prototype._queryCell=function(e,t,i,l,p,d,v,S){var A=this.cells[p];if(A!==null)for(var C=this.keys,L=this.bboxes,F=0;F<A.length;F++){var q=A[F];if(v[q]===void 0){var W=4*q;(S?S(L[W+0],L[W+1],L[W+2],L[W+3]):e<=L[W+2]&&t<=L[W+3]&&i>=L[W+0]&&l>=L[W+1])?(v[q]=!0,d.push(C[q])):v[q]=!1}}},Nr.prototype._forEachCell=function(e,t,i,l,p,d,v,S){for(var A=this._convertToCellCoord(e),C=this._convertToCellCoord(t),L=this._convertToCellCoord(i),F=this._convertToCellCoord(l),q=A;q<=L;q++)for(var W=C;W<=F;W++){var ne=this.d*W+q;if((!S||S(this._convertFromCellCoord(q),this._convertFromCellCoord(W),this._convertFromCellCoord(q+1),this._convertFromCellCoord(W+1)))&&p.call(this,e,t,i,l,ne,d,v,S))return}},Nr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Nr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Nr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,v=0;v<e.length;v++){var S=e[v];p[3+v]=d,p.set(S,d),d+=S.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var Fo=V.ImageData,ga=V.ImageBitmap,Zr={};function ht(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Zr[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var $n in ht("Object",Object),Oo.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Oo.deserialize=function(e){return new Oo(e.buffer)},ht("Grid",Oo),ht("Color",Ht),ht("Error",Error),ht("ResolvedImage",di),ht("StylePropertyFunction",As),ht("StyleExpression",oo,{omit:["_evaluator"]}),ht("ZoomDependentExpression",vo),ht("ZoomConstantExpression",Vs),ht("CompoundExpression",Vi,{omit:["_evaluate"]}),Do)Do[$n]._classRegistryKey||ht("Expression_"+$n,Do[$n]);function is(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function _a(e){return ga&&e instanceof ga}function lo(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(is(e)||_a(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof Fo)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(lo(d[p],t));return l}if(typeof e=="object"){var v=e.constructor,S=v._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var A=v.serialize?v.serialize(e,t):{};if(!v.serialize){for(var C in e)if(e.hasOwnProperty(C)&&!(Zr[S].omit.indexOf(C)>=0)){var L=e[C];A[C]=Zr[S].shallow.indexOf(C)>=0?L:lo(L,t)}e instanceof Error&&(A.message=e.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(A.$name=S),A}throw new Error("can't serialize object of type "+typeof e)}function an(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||is(e)||_a(e)||ArrayBuffer.isView(e)||e instanceof Fo)return e;if(Array.isArray(e))return e.map(an);if(typeof e=="object"){var t=e.$name||"Object",i=Zr[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var v=d[p];if(v!=="$name"){var S=e[v];l[v]=Zr[t].shallow.indexOf(v)>=0?S:an(S)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var cl=function(){this.first=!0};cl.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var et={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function js(e){for(var t=0,i=e;t<i.length;t+=1)if(hl(i[t].charCodeAt(0)))return!0;return!1}function hl(e){return!(e!==746&&e!==747&&(e<4352||!(et["Bopomofo Extended"](e)||et.Bopomofo(e)||et["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||et["CJK Compatibility Ideographs"](e)||et["CJK Compatibility"](e)||et["CJK Radicals Supplement"](e)||et["CJK Strokes"](e)||!(!et["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||et["CJK Unified Ideographs Extension A"](e)||et["CJK Unified Ideographs"](e)||et["Enclosed CJK Letters and Months"](e)||et["Hangul Compatibility Jamo"](e)||et["Hangul Jamo Extended-A"](e)||et["Hangul Jamo Extended-B"](e)||et["Hangul Jamo"](e)||et["Hangul Syllables"](e)||et.Hiragana(e)||et["Ideographic Description Characters"](e)||et.Kanbun(e)||et["Kangxi Radicals"](e)||et["Katakana Phonetic Extensions"](e)||et.Katakana(e)&&e!==12540||!(!et["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!et["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||et["Unified Canadian Aboriginal Syllabics"](e)||et["Unified Canadian Aboriginal Syllabics Extended"](e)||et["Vertical Forms"](e)||et["Yijing Hexagram Symbols"](e)||et["Yi Syllables"](e)||et["Yi Radicals"](e))))}function Cl(e){return!(hl(e)||function(t){return!!(et["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||et["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||et["Letterlike Symbols"](t)||et["Number Forms"](t)||et["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||et["Control Pictures"](t)&&t!==9251||et["Optical Character Recognition"](t)||et["Enclosed Alphanumerics"](t)||et["Geometric Shapes"](t)||et["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||et["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||et["CJK Symbols and Punctuation"](t)||et.Katakana(t)||et["Private Use Area"](t)||et["CJK Compatibility Forms"](t)||et["Small Form Variants"](t)||et["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function vi(e){return e>=1424&&e<=2303||et["Arabic Presentation Forms-A"](e)||et["Arabic Presentation Forms-B"](e)}function li(e,t){return!(!t&&vi(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||et.Khmer(e))}function Ca(e){for(var t=0,i=e;t<i.length;t+=1)if(vi(i[t].charCodeAt(0)))return!0;return!1}var Na=null,Ma="unavailable",Da=null,Yu=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Ma="error"),Na&&Na(e)};function qs(){Qu.fire(new ie("pluginStateChange",{pluginStatus:Ma,pluginURL:Da}))}var Qu=new ge,pl=function(){return Ma},Ua=function(){if(Ma!=="deferred"||!Da)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ma="loading",qs(),Da&&un({url:Da},function(e){e?Yu(e):(Ma="loaded",qs())})},Eo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ma==="loaded"||Eo.applyArabicShaping!=null},isLoading:function(){return Ma==="loading"},setState:function(e){Ma=e.pluginStatus,Da=e.pluginURL},isParsed:function(){return Eo.applyArabicShaping!=null&&Eo.processBidirectionalText!=null&&Eo.processStyledBidirectionalText!=null},getPluginURL:function(){return Da}},$t=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cl,this.transition={})};$t.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!li(p[l].charCodeAt(0),i))return!1;return!0}(e,Eo.isLoaded())},$t.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},$t.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var Vo=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(ma(i))return new As(i,l);if(Lo(i)){var p=ts(i,l);if(p.result==="error")throw new Error(p.value.map(function(v){return v.key+": "+v.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=Ht.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};Vo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Vo.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var No=function(e){this.property=e,this.value=new Vo(e,void 0)};No.prototype.transitioned=function(e,t){return new Uo(this.property,this.value,t,Ve({},e.transition,this.transition),e.now)},No.prototype.untransitioned=function(){return new Uo(this.property,this.value,null,{},0)};var ea=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};ea.prototype.getValue=function(e){return bt(this._values[e].value.value)},ea.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new No(this._values[e].property)),this._values[e].value=new Vo(this._values[e].property,t===null?void 0:bt(t))},ea.prototype.getTransition=function(e){return bt(this._values[e].transition)},ea.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new No(this._values[e].property)),this._values[e].transition=bt(t)||void 0},ea.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},ea.prototype.transitioned=function(e,t){for(var i=new Zs(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},ea.prototype.untransitioned=function(){for(var e=new Zs(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var Uo=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};Uo.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var v=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(S){if(S<=0)return 0;if(S>=1)return 1;var A=S*S,C=A*S;return 4*(S<.5?C:3*(S-A)+C-.75)}(v))}return p};var Zs=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Zs.prototype.possiblyEvaluate=function(e,t,i){for(var l=new jo(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l},Zs.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var ta=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ta.prototype.getValue=function(e){return bt(this._values[e].value)},ta.prototype.setValue=function(e,t){this._values[e]=new Vo(this._values[e].property,t===null?void 0:bt(t))},ta.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},ta.prototype.possiblyEvaluate=function(e,t,i){for(var l=new jo(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l};var Ui=function(e,t,i){this.property=e,this.value=t,this.parameters=i};Ui.prototype.isConstant=function(){return this.value.kind==="constant"},Ui.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Ui.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var jo=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};jo.prototype.get=function(e){return this._values[e]};var St=function(e){this.specification=e};St.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},St.prototype.interpolate=function(e,t,i){var l=ka[this.specification.type];return l?l(e,t,i):e};var ft=function(e,t){this.specification=e,this.overrides=t};ft.prototype.possiblyEvaluate=function(e,t,i,l){return new Ui(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},ft.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new Ui(this,{kind:"constant",value:void 0},e.parameters);var l=ka[this.specification.type];return l?new Ui(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},ft.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var zc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new Ui(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var v=i.expression.evaluate(l,null,{},p,d),S=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,A=this._calculate(S,S,S,l);return new Ui(this,{kind:"constant",value:A},l)}if(i.expression.kind==="camera"){var C=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Ui(this,{kind:"constant",value:C},l)}return new Ui(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,v,S){if(i.kind==="source"){var A=i.evaluate(l,p,d,v,S);return this._calculate(A,A,A,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(ft),La=function(e){this.specification=e};La.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new $t(Math.floor(t.zoom-1),t)),e.expression.evaluate(new $t(Math.floor(t.zoom),t)),e.expression.evaluate(new $t(Math.floor(t.zoom+1),t)),t)}},La.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},La.prototype.interpolate=function(e){return e};var ja=function(e){this.specification=e};ja.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},ja.prototype.interpolate=function(){return!1};var pn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Vo(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new No(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};ht("DataDrivenProperty",ft),ht("DataConstantProperty",St),ht("CrossFadedDataDrivenProperty",zc),ht("CrossFadedProperty",La),ht("ColorRampProperty",ja);var hs=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new ta(l.layout)),l.paint)){for(var p in this._transitionablePaint=new ea(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jo(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(wo,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return ur(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(vu,"layers."+this.id+".paint."+i,i,l,p))return!1;if(ur(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",S=d.value.isDataDriven(),A=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var C=this._transitionablePaint._values[i].value;return C.isDataDriven()||S||v||this._handleOverridablePaintPropertyUpdate(i,A,C)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Et(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&ul(this,i.call(Bo,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:G,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof Ui&&Ln(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(ge),fl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ml=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ur=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Fn(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=fl[p.type].BYTES_PER_ELEMENT,v=i=dl(i,Math.max(t,d)),S=p.components||1;return l=Math.max(l,d),i+=d*S,{name:p.name,type:p.type,components:S,offset:v}}),size:dl(i,Math.max(l,t)),alignment:t}}function dl(e,t){return Math.ceil(e/t)*t}Ur.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Ur.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Ur.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ur.prototype.clear=function(){this.length=0},Ur.prototype.resize=function(e){this.reserve(e),this.length=e},Ur.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Ur.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ml=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(Ur);ml.prototype.bytesPerElement=4,ht("StructArrayLayout2i4",ml);var ps=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var S=4*i;return this.int16[S+0]=l,this.int16[S+1]=p,this.int16[S+2]=d,this.int16[S+3]=v,i},t}(Ur);ps.prototype.bytesPerElement=8,ht("StructArrayLayout4i8",ps);var ra=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,v,S)},t.prototype.emplace=function(i,l,p,d,v,S,A){var C=6*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.int16[C+2]=d,this.int16[C+3]=v,this.int16[C+4]=S,this.int16[C+5]=A,i},t}(Ur);ra.prototype.bytesPerElement=12,ht("StructArrayLayout2i4i12",ra);var fn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,v,S)},t.prototype.emplace=function(i,l,p,d,v,S,A){var C=4*i,L=8*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.uint8[L+4]=d,this.uint8[L+5]=v,this.uint8[L+6]=S,this.uint8[L+7]=A,i},t}(Ur);fn.prototype.bytesPerElement=8,ht("StructArrayLayout2i4ub8",fn);var Dl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(Ur);Dl.prototype.bytesPerElement=8,ht("StructArrayLayout2f8",Dl);var uo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S,A,C,L,F){var q=this.length;return this.resize(q+1),this.emplace(q,i,l,p,d,v,S,A,C,L,F)},t.prototype.emplace=function(i,l,p,d,v,S,A,C,L,F,q){var W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=p,this.uint16[W+2]=d,this.uint16[W+3]=v,this.uint16[W+4]=S,this.uint16[W+5]=A,this.uint16[W+6]=C,this.uint16[W+7]=L,this.uint16[W+8]=F,this.uint16[W+9]=q,i},t}(Ur);uo.prototype.bytesPerElement=20,ht("StructArrayLayout10ui20",uo);var Pc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S,A,C,L,F,q,W){var ne=this.length;return this.resize(ne+1),this.emplace(ne,i,l,p,d,v,S,A,C,L,F,q,W)},t.prototype.emplace=function(i,l,p,d,v,S,A,C,L,F,q,W,ne){var oe=12*i;return this.int16[oe+0]=l,this.int16[oe+1]=p,this.int16[oe+2]=d,this.int16[oe+3]=v,this.uint16[oe+4]=S,this.uint16[oe+5]=A,this.uint16[oe+6]=C,this.uint16[oe+7]=L,this.int16[oe+8]=F,this.int16[oe+9]=q,this.int16[oe+10]=W,this.int16[oe+11]=ne,i},t}(Ur);Pc.prototype.bytesPerElement=24,ht("StructArrayLayout4i4ui4i24",Pc);var Ll=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.float32[v+0]=l,this.float32[v+1]=p,this.float32[v+2]=d,i},t}(Ur);Ll.prototype.bytesPerElement=12,ht("StructArrayLayout3f12",Ll);var Jl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(Ur);Jl.prototype.bytesPerElement=4,ht("StructArrayLayout1ul4",Jl);var yl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S,A,C,L){var F=this.length;return this.resize(F+1),this.emplace(F,i,l,p,d,v,S,A,C,L)},t.prototype.emplace=function(i,l,p,d,v,S,A,C,L,F){var q=10*i,W=5*i;return this.int16[q+0]=l,this.int16[q+1]=p,this.int16[q+2]=d,this.int16[q+3]=v,this.int16[q+4]=S,this.int16[q+5]=A,this.uint32[W+3]=C,this.uint16[q+8]=L,this.uint16[q+9]=F,i},t}(Ur);yl.prototype.bytesPerElement=20,ht("StructArrayLayout6i1ul2ui20",yl);var fs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S){var A=this.length;return this.resize(A+1),this.emplace(A,i,l,p,d,v,S)},t.prototype.emplace=function(i,l,p,d,v,S,A){var C=6*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.int16[C+2]=d,this.int16[C+3]=v,this.int16[C+4]=S,this.int16[C+5]=A,i},t}(Ur);fs.prototype.bytesPerElement=12,ht("StructArrayLayout2i2i2i12",fs);var gl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v){var S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,d,v)},t.prototype.emplace=function(i,l,p,d,v,S){var A=4*i,C=8*i;return this.float32[A+0]=l,this.float32[A+1]=p,this.float32[A+2]=d,this.int16[C+6]=v,this.int16[C+7]=S,i},t}(Ur);gl.prototype.bytesPerElement=16,ht("StructArrayLayout2f1f2i16",gl);var _l=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var S=12*i,A=3*i;return this.uint8[S+0]=l,this.uint8[S+1]=p,this.float32[A+1]=d,this.float32[A+2]=v,i},t}(Ur);_l.prototype.bytesPerElement=12,ht("StructArrayLayout2ub2f12",_l);var ds=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.uint16[v+0]=l,this.uint16[v+1]=p,this.uint16[v+2]=d,i},t}(Ur);ds.prototype.bytesPerElement=6,ht("StructArrayLayout3ui6",ds);var Gs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S,A,C,L,F,q,W,ne,oe,me,ue,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,i,l,p,d,v,S,A,C,L,F,q,W,ne,oe,me,ue,be)},t.prototype.emplace=function(i,l,p,d,v,S,A,C,L,F,q,W,ne,oe,me,ue,be,Se){var Ae=24*i,De=12*i,Fe=48*i;return this.int16[Ae+0]=l,this.int16[Ae+1]=p,this.uint16[Ae+2]=d,this.uint16[Ae+3]=v,this.uint32[De+2]=S,this.uint32[De+3]=A,this.uint32[De+4]=C,this.uint16[Ae+10]=L,this.uint16[Ae+11]=F,this.uint16[Ae+12]=q,this.float32[De+7]=W,this.float32[De+8]=ne,this.uint8[Fe+36]=oe,this.uint8[Fe+37]=me,this.uint8[Fe+38]=ue,this.uint32[De+10]=be,this.int16[Ae+22]=Se,i},t}(Ur);Gs.prototype.bytesPerElement=48,ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Gs);var bu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,S,A,C,L,F,q,W,ne,oe,me,ue,be,Se,Ae,De,Fe,Ge,tt,xt,lt,Tt,st,tr){var Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,i,l,p,d,v,S,A,C,L,F,q,W,ne,oe,me,ue,be,Se,Ae,De,Fe,Ge,tt,xt,lt,Tt,st,tr)},t.prototype.emplace=function(i,l,p,d,v,S,A,C,L,F,q,W,ne,oe,me,ue,be,Se,Ae,De,Fe,Ge,tt,xt,lt,Tt,st,tr,Vt){var yt=34*i,lr=17*i;return this.int16[yt+0]=l,this.int16[yt+1]=p,this.int16[yt+2]=d,this.int16[yt+3]=v,this.int16[yt+4]=S,this.int16[yt+5]=A,this.int16[yt+6]=C,this.int16[yt+7]=L,this.uint16[yt+8]=F,this.uint16[yt+9]=q,this.uint16[yt+10]=W,this.uint16[yt+11]=ne,this.uint16[yt+12]=oe,this.uint16[yt+13]=me,this.uint16[yt+14]=ue,this.uint16[yt+15]=be,this.uint16[yt+16]=Se,this.uint16[yt+17]=Ae,this.uint16[yt+18]=De,this.uint16[yt+19]=Fe,this.uint16[yt+20]=Ge,this.uint16[yt+21]=tt,this.uint16[yt+22]=xt,this.uint32[lr+12]=lt,this.float32[lr+13]=Tt,this.float32[lr+14]=st,this.float32[lr+15]=tr,this.float32[lr+16]=Vt,i},t}(Ur);bu.prototype.bytesPerElement=68,ht("StructArrayLayout8i15ui1ul4f68",bu);var So=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(Ur);So.prototype.bytesPerElement=4,ht("StructArrayLayout1f4",So);var qo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.int16[v+0]=l,this.int16[v+1]=p,this.int16[v+2]=d,i},t}(Ur);qo.prototype.bytesPerElement=6,ht("StructArrayLayout3i6",qo);var ms=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=4*i;return this.uint32[2*i+0]=l,this.uint16[v+2]=p,this.uint16[v+3]=d,i},t}(Ur);ms.prototype.bytesPerElement=8,ht("StructArrayLayout1ul2ui8",ms);var co=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(Ur);co.prototype.bytesPerElement=4,ht("StructArrayLayout2ui4",co);var ys=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(Ur);ys.prototype.bytesPerElement=2,ht("StructArrayLayout1ui2",ys);var xu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var S=4*i;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=d,this.float32[S+3]=v,i},t}(Ur);xu.prototype.bytesPerElement=16,ht("StructArrayLayout4f16",xu);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new R(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(Ml);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(yl);ht("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(Ml);a.prototype.size=48;var u=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new a(this,i)},t}(Gs);ht("PlacedSymbolArray",u);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(Ml);m.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(bu);ht("SymbolInstanceArray",w);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(So);ht("GlyphOffsetArray",E);var I=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(qo);ht("SymbolLineVertexArray",I);var D=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(Ml);D.prototype.size=8;var N=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new D(this,i)},t}(ms);ht("FeatureIndexArray",N);var J=Fn([{name:"a_pos",components:2,type:"Int16"}],4).members,Y=function(e){e===void 0&&(e=[]),this.segments=e};function Q(e,t){return 256*(e=ve(Math.floor(e),0,255))+ve(Math.floor(t),0,255)}Y.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>Y.MAX_VERTEX_ARRAY_LENGTH&&Ot("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>Y.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},Y.simpleSegment=function(e,t,i,l){return new Y([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ht("SegmentVector",Y);var se=Fn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ae=T(function(e){e.exports=function(t,i){var l,p,d,v,S,A,C,L;for(p=t.length-(l=3&t.length),d=i,S=3432918353,A=461845907,L=0;L<p;)C=255&t.charCodeAt(L)|(255&t.charCodeAt(++L))<<8|(255&t.charCodeAt(++L))<<16|(255&t.charCodeAt(++L))<<24,++L,d=27492+(65535&(v=5*(65535&(d=(d^=C=(65535&(C=(C=(65535&C)*S+(((C>>>16)*S&65535)<<16)&4294967295)<<15|C>>>17))*A+(((C>>>16)*A&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(C=0,l){case 3:C^=(255&t.charCodeAt(L+2))<<16;case 2:C^=(255&t.charCodeAt(L+1))<<8;case 1:d^=C=(65535&(C=(C=(65535&(C^=255&t.charCodeAt(L)))*S+(((C>>>16)*S&65535)<<16)&4294967295)<<15|C>>>17))*A+(((C>>>16)*A&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),ce=T(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,v=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(v)|(255&t.charCodeAt(++v))<<8|(255&t.charCodeAt(++v))<<16|(255&t.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++v;switch(p){case 3:d^=(255&t.charCodeAt(v+2))<<16;case 2:d^=(255&t.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),re=ae,fe=ce;re.murmur3=ae,re.murmur2=fe;var _e=function(){this.ids=[],this.positions=[],this.indexed=!1};_e.prototype.add=function(e,t,i,l){this.ids.push(Ce(e)),this.positions.push(t,i,l)},_e.prototype.getPositions=function(e){for(var t=Ce(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},_e.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,v,S,A){for(;S<A;){for(var C=d[S+A>>1],L=S-1,F=A+1;;){do L++;while(d[L]<C);do F--;while(d[F]>C);if(L>=F)break;Me(d,L,F),Me(v,3*L,3*F),Me(v,3*L+1,3*F+1),Me(v,3*L+2,3*F+2)}F-S<A-F?(p(d,v,S,F),S=F+1):(p(d,v,F+1,A),A=F)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},_e.deserialize=function(e){var t=new _e;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Ee=Math.pow(2,53)-1;function Ce(e){var t=+e;return!isNaN(t)&&t<=Ee?t:re(String(e))}function Me(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}ht("FeaturePositionMap",_e);var Oe=function(e,t){this.gl=e.gl,this.location=t},Ze=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Oe),We=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Oe),He=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Oe),ut=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Oe),kt=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Oe),dt=function(e){function t(i,l){e.call(this,i,l),this.current=Ht.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Oe),vt=new Float32Array(16),er=function(e){function t(i,l){e.call(this,i,l),this.current=vt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Oe);function at(e){return[Q(255*e.r,255*e.g),Q(255*e.b,255*e.a)]}var Ut=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};Ut.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Ut.prototype.getBinding=function(e,t,i){return this.type==="color"?new dt(e,t):new We(e,t)};var Kt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Kt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Kt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Kt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new kt(e,t):new We(e,t)};var jt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};jt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,v=this.expression.evaluate(new $t(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},jt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},jt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=at(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},jt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Nt=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Nt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new $t(this.zoom),t,{},l,[],p),v=this.expression.evaluate(new $t(this.zoom+1),t,{},l,[],p),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,d,v)},Nt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},Nt.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=at(i),d=at(l),v=e;v<t;v++)this.paintVertexArray.emplace(v,p[0],p[1],d[0],d[1]);else{for(var S=e;S<t;S++)this.paintVertexArray.emplace(S,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},Nt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Nt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Nt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=ve(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},Nt.prototype.getBinding=function(e,t,i){return new We(e,t)};var Zt=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Zt.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Zt.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Zt.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],v=l[i.max];if(p&&d&&v)for(var S=e;S<t;S++)this.zoomInPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Zt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,se.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,se.members,this.expression.isStateDependent))},Zt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Mt=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof Ui&&Ln(d.property.specification)){var v=Hi(p,e.type),S=d.value,A=d.property.specification.type,C=d.property.useIntegerZoom,L=d.property.specification["property-type"],F=L==="cross-faded"||L==="cross-faded-data-driven";if(S.kind==="constant")this.binders[p]=F?new Kt(S.value,v):new Ut(S.value,v,A),l.push("/u_"+p);else if(S.kind==="source"||F){var q=Ci(p,A,"source");this.binders[p]=F?new Zt(S,A,C,t,q,e.id):new jt(S,v,A,q),l.push("/a_"+p)}else{var W=Ci(p,A,"composite");this.binders[p]=new Nt(S,v,A,C,t,W),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};Mt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof jt||t instanceof Nt?t.maxValue:0},Mt.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var v=this.binders[d];(v instanceof jt||v instanceof Nt||v instanceof Zt)&&v.populatePaintArray(e,t,i,l,p)}},Mt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Kt&&l.setConstantPatternPositions(e,t)}},Mt.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var v in e)for(var S=0,A=t.getPositions(v);S<A.length;S+=1){var C=A[S],L=i.feature(C.index);for(var F in this.binders){var q=this.binders[F];if((q instanceof jt||q instanceof Nt||q instanceof Zt)&&q.expression.isStateDependent===!0){var W=l.paint.get(F);q.expression=W.value,q.updatePaintArray(C.start,C.end,L,e[v],p),d=!0}}}return d},Mt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Ut||i instanceof Kt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},Mt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof jt||i instanceof Nt)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Zt)for(var p=0;p<se.members.length;p++)e.push(se.members[p].name)}return e},Mt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ut||i instanceof Kt||i instanceof Nt)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},Mt.prototype.getPaintVertexBuffers=function(){return this._buffers},Mt.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof Ut||p instanceof Kt||p instanceof Nt)for(var d=0,v=p.uniformNames;d<v.length;d+=1){var S=v[d];if(t[S]){var A=p.getBinding(e,t[S],S);i.push({name:S,property:l,binding:A})}}}return i},Mt.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var v=d[p],S=v.name,A=v.property;this.binders[A].setUniform(v.binding,l,i.get(A),S)}},Mt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Zt){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof jt||i instanceof Nt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Mt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof jt||i instanceof Nt||i instanceof Zt)&&i.upload(e)}this.updatePaintBuffers()},Mt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof jt||t instanceof Nt||t instanceof Zt)&&t.destroy()}};var Rt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new Mt(d,t,i)}this.needsUpload=!1,this._featureMap=new _e,this._bufferOffset=0};function Hi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Ci(e,t,i){var l={color:{source:Dl,composite:xu},number:{source:So,composite:Dl}},p=function(d){return{"line-pattern":{source:uo,composite:uo},"fill-pattern":{source:uo,composite:uo},"fill-extrusion-pattern":{source:uo,composite:uo}}[d]}(e);return p&&p[i]||l[t][i]}Rt.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Rt.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var v=d[p];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,t,v,l)||this.needsUpload}},Rt.prototype.get=function(e){return this.programConfigurations[e]},Rt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Rt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ht("ConstantBinder",Ut),ht("CrossFadedConstantBinder",Kt),ht("SourceExpressionBinder",jt),ht("CrossFadedCompositeBinder",Zt),ht("CompositeExpressionBinder",Nt),ht("ProgramConfiguration",Mt,{omit:["_buffers"]}),ht("ProgramConfigurationSet",Rt);var va=Math.pow(2,14)-1,Vn=-va-1;function ui(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var v=p[d],S=Math.round(v.x*t),A=Math.round(v.y*t);v.x=ve(S,Vn,va),v.y=ve(A,Vn,va),(S<v.x||S>v.x+1||A<v.y||A>v.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function on(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ui(e):[]}}function bn(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var ji=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ml,this.indexArray=new ds,this.segments=new Y,this.programConfigurations=new Rt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ho(e,t){for(var i=0;i<e.length;i++)if(Go(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(Go(e,t[l]))return!0;return!!Yl(e,t)}function qa(e,t,i){return!!Go(e,t)||!!Zo(t,e,i)}function Za(e,t){if(e.length===1)return Ms(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(Go(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(Ms(t,e[d]))return!0;for(var v=0;v<t.length;v++)if(Yl(e,t[v]))return!0;return!1}function gs(e,t,i){if(e.length>1){if(Yl(e,t))return!0;for(var l=0;l<t.length;l++)if(Zo(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Zo(e[p],t,i))return!0;return!1}function Yl(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(_s(l,p,t[d],t[d+1]))return!0;return!1}function _s(e,t,i,l){return kr(e,i,l)!==kr(t,i,l)&&kr(e,t,i)!==kr(e,t,l)}function Zo(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Rl(e,t[p-1],t[p])<l)return!0;return!1}function Rl(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function Ms(e,t){for(var i,l,p,d=!1,v=0;v<e.length;v++)for(var S=0,A=(i=e[v]).length-1;S<i.length;A=S++)(l=i[S]).y>t.y!=(p=i[A]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function Go(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],v=e[p];d.y>t.y!=v.y>t.y&&t.x<(v.x-d.x)*(t.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function Ql(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=kr(e,t,i[0]);return d!==kr(e,t,i[1])||d!==kr(e,t,i[2])||d!==kr(e,t,i[3])}function vs(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function qi(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ds(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=R.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var v=[],S=0;S<e.length;S++)v.push(e[S].sub(d));return v}ji.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var v=0,S=e;v<S.length;v+=1){var A=S[v],C=A.feature,L=A.id,F=A.index,q=A.sourceLayerIndex,W=this.layers[0]._featureFilter.needGeometry,ne=on(C,W);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),ne,i)){var oe=d?d.evaluate(ne,{},i):void 0,me={id:L,properties:C.properties,type:C.type,sourceLayerIndex:q,index:F,geometry:W?ne.geometry:ui(C),patterns:{},sortKey:oe};p.push(me)}}d&&p.sort(function(tt,xt){return tt.sortKey-xt.sortKey});for(var ue=0,be=p;ue<be.length;ue+=1){var Se=be[ue],Ae=Se.geometry,De=Se.index,Fe=Se.sourceLayerIndex,Ge=e[De].feature;this.addFeature(Se,Ae,De,i),t.featureIndex.insert(Ge,Ae,De,Fe,this.index)}},ji.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ji.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ji.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ji.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,J),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ji.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ji.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var v=0,S=d[p];v<S.length;v+=1){var A=S[v],C=A.x,L=A.y;if(!(C<0||C>=8192||L<0||L>=8192)){var F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),q=F.vertexLength;bn(this.layoutVertexArray,C,L,-1,-1),bn(this.layoutVertexArray,C,L,1,-1),bn(this.layoutVertexArray,C,L,1,1),bn(this.layoutVertexArray,C,L,-1,1),this.indexArray.emplaceBack(q,q+1,q+2),this.indexArray.emplaceBack(q,q+3,q+2),F.vertexLength+=4,F.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},ht("CircleBucket",ji,{omit:["layers"]});var Ga=new pn({"circle-sort-key":new ft(G.layout_circle["circle-sort-key"])}),Ra={paint:new pn({"circle-radius":new ft(G.paint_circle["circle-radius"]),"circle-color":new ft(G.paint_circle["circle-color"]),"circle-blur":new ft(G.paint_circle["circle-blur"]),"circle-opacity":new ft(G.paint_circle["circle-opacity"]),"circle-translate":new St(G.paint_circle["circle-translate"]),"circle-translate-anchor":new St(G.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new St(G.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new St(G.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ft(G.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ft(G.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ft(G.paint_circle["circle-stroke-opacity"])}),layout:Ga},dr=typeof Float32Array<"u"?Float32Array:Array;function ko(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Nn(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],S=t[4],A=t[5],C=t[6],L=t[7],F=t[8],q=t[9],W=t[10],ne=t[11],oe=t[12],me=t[13],ue=t[14],be=t[15],Se=i[0],Ae=i[1],De=i[2],Fe=i[3];return e[0]=Se*l+Ae*S+De*F+Fe*oe,e[1]=Se*p+Ae*A+De*q+Fe*me,e[2]=Se*d+Ae*C+De*W+Fe*ue,e[3]=Se*v+Ae*L+De*ne+Fe*be,e[4]=(Se=i[4])*l+(Ae=i[5])*S+(De=i[6])*F+(Fe=i[7])*oe,e[5]=Se*p+Ae*A+De*q+Fe*me,e[6]=Se*d+Ae*C+De*W+Fe*ue,e[7]=Se*v+Ae*L+De*ne+Fe*be,e[8]=(Se=i[8])*l+(Ae=i[9])*S+(De=i[10])*F+(Fe=i[11])*oe,e[9]=Se*p+Ae*A+De*q+Fe*me,e[10]=Se*d+Ae*C+De*W+Fe*ue,e[11]=Se*v+Ae*L+De*ne+Fe*be,e[12]=(Se=i[12])*l+(Ae=i[13])*S+(De=i[14])*F+(Fe=i[15])*oe,e[13]=Se*p+Ae*A+De*q+Fe*me,e[14]=Se*d+Ae*C+De*W+Fe*ue,e[15]=Se*v+Ae*L+De*ne+Fe*be,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var $l,Jc=Nn;function Ks(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*v,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*v,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*v,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*v,e}$l=new dr(3),dr!=Float32Array&&($l[0]=0,$l[1]=0,$l[2]=0),function(){var e=new dr(4);dr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var eu=(function(){var e=new dr(2);dr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Ra)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new ji(i)},t.prototype.queryRadius=function(i){var l=i;return vs("circle-radius",this,l)+vs("circle-stroke-width",this,l)+qi(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,S,A,C){for(var L=Ds(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,A),F=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),q=this.paint.get("circle-pitch-alignment")==="map",W=q?L:function(Ge,tt){return Ge.map(function(xt){return tu(xt,tt)})}(L,C),ne=q?F*A:F,oe=0,me=d;oe<me.length;oe+=1)for(var ue=0,be=me[oe];ue<be.length;ue+=1){var Se=be[ue],Ae=q?Se:tu(Se,C),De=ne,Fe=Ks([],[Se.x,Se.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?De*=Fe[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(De*=S.cameraToCenterDistance/Fe[3]),qa(W,Ae,De))return!0}return!1},t}(hs));function tu(e,t){var i=Ks([],[e.x,e.y,0,1],t);return new R(i[0]/i[3],i[1]/i[3])}var Bl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ji);function Hs(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function wu(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=Hs({},{width:l,height:p},i);Yc(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function Yc(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,S=t.data,A=0;A<p.height;A++)for(var C=((i.y+A)*e.width+i.x)*d,L=((l.y+A)*t.width+l.x)*d,F=0;F<p.width*d;F++)S[L+F]=v[C+F];return t}ht("HeatmapBucket",Bl,{omit:["layers"]});var bs=function(e,t){Hs(this,e,1,t)};bs.prototype.resize=function(e){wu(this,e,1)},bs.prototype.clone=function(){return new bs({width:this.width,height:this.height},new Uint8Array(this.data))},bs.copy=function(e,t,i,l,p){Yc(e,t,i,l,p,1)};var po=function(e,t){Hs(this,e,4,t)};po.prototype.resize=function(e){wu(this,e,4)},po.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},po.prototype.clone=function(){return new po({width:this.width,height:this.height},new Uint8Array(this.data))},po.copy=function(e,t,i,l,p){Yc(e,t,i,l,p,4)},ht("AlphaImage",bs),ht("RGBAImage",po);var Xs={paint:new pn({"heatmap-radius":new ft(G.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ft(G.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new St(G.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ja(G.paint_heatmap["heatmap-color"]),"heatmap-opacity":new St(G.paint_heatmap["heatmap-opacity"])})};function Ls(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new po({width:i,height:l}),d=function(ne,oe,me){t[e.evaluationKey]=me;var ue=e.expression.evaluate(t);p.data[ne+oe+0]=Math.floor(255*ue.r/ue.a),p.data[ne+oe+1]=Math.floor(255*ue.g/ue.a),p.data[ne+oe+2]=Math.floor(255*ue.b/ue.a),p.data[ne+oe+3]=Math.floor(255*ue.a)};if(e.clips)for(var v=0,S=0;v<l;++v,S+=4*i)for(var A=0,C=0;A<i;A++,C+=4){var L=A/(i-1),F=e.clips[v];d(S,C,F.start*(1-L)+F.end*L)}else for(var q=0,W=0;q<i;q++,W+=4)d(0,W,q/(i-1));return p}var ru=function(e){function t(i){e.call(this,i,Xs),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Bl(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Ls({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(hs),tp={paint:new pn({"hillshade-illumination-direction":new St(G.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new St(G.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new St(G.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new St(G.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new St(G.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new St(G.paint_hillshade["hillshade-accent-color"])})},$u=function(e){function t(i){e.call(this,i,tp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(hs),kd=Fn([{name:"a_pos",components:2,type:"Int16"}],4).members,Qc=Ol,ec=Ol;function Ol(e,t,i){i=i||2;var l,p,d,v,S,A,C,L=t&&t.length,F=L?t[0]*i:e.length,q=Sh(e,0,F,i,!0),W=[];if(!q||q.next===q.prev)return W;if(L&&(q=function(oe,me,ue,be){var Se,Ae,De,Fe=[];for(Se=0,Ae=me.length;Se<Ae;Se++)(De=Sh(oe,me[Se]*be,Se<Ae-1?me[Se+1]*be:oe.length,be,!1))===De.next&&(De.steiner=!0),Fe.push(nu(De));for(Fe.sort(ap),Se=0;Se<Fe.length;Se++)op(Fe[Se],ue),ue=xs(ue,ue.next);return ue}(e,t,q,i)),e.length>80*i){l=d=e[0],p=v=e[1];for(var ne=i;ne<F;ne+=i)(S=e[ne])<l&&(l=S),(A=e[ne+1])<p&&(p=A),S>d&&(d=S),A>v&&(v=A);C=(C=Math.max(d-l,v-p))!==0?1/C:0}return iu(q,W,i,l,p,C),W}function Sh(e,t,i,l,p){var d,v;if(p===$c(e,t,i,l)>0)for(d=t;d<i;d+=l)v=kh(d,e[d],e[d+1],v);else for(d=i-l;d>=t;d-=l)v=kh(d,e[d],e[d+1],v);return v&&Cc(v,v.next)&&(rc(v),v=v.next),v}function xs(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!Cc(l,l.next)&&Un(l.prev,l,l.next)!==0)l=l.next;else{if(rc(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function iu(e,t,i,l,p,d,v){if(e){!v&&d&&function(L,F,q,W){var ne=L;do ne.z===null&&(ne.z=ws(ne.x,ne.y,F,q,W)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==L);ne.prevZ.nextZ=null,ne.prevZ=null,function(oe){var me,ue,be,Se,Ae,De,Fe,Ge,tt=1;do{for(ue=oe,oe=null,Ae=null,De=0;ue;){for(De++,be=ue,Fe=0,me=0;me<tt&&(Fe++,be=be.nextZ);me++);for(Ge=tt;Fe>0||Ge>0&&be;)Fe!==0&&(Ge===0||!be||ue.z<=be.z)?(Se=ue,ue=ue.nextZ,Fe--):(Se=be,be=be.nextZ,Ge--),Ae?Ae.nextZ=Se:oe=Se,Se.prevZ=Ae,Ae=Se;ue=be}Ae.nextZ=null,tt*=2}while(De>1)}(ne)}(e,l,p,d);for(var S,A,C=e;e.prev!==e.next;)if(S=e.prev,A=e.next,d?ip(e,l,p,d):rp(e))t.push(S.i/i),t.push(e.i/i),t.push(A.i/i),rc(e),e=A.next,C=A.next;else if((e=A)===C){v?v===1?iu(e=Eu(xs(e),t,i),t,i,l,p,d,2):v===2&&np(e,t,i,l,p,d):iu(xs(e),t,i,l,p,d,1);break}}}function rp(e){var t=e.prev,i=e,l=e.next;if(Un(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(Su(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&Un(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ip(e,t,i,l){var p=e.prev,d=e,v=e.next;if(Un(p,d,v)>=0)return!1;for(var S=p.x>d.x?p.x>v.x?p.x:v.x:d.x>v.x?d.x:v.x,A=p.y>d.y?p.y>v.y?p.y:v.y:d.y>v.y?d.y:v.y,C=ws(p.x<d.x?p.x<v.x?p.x:v.x:d.x<v.x?d.x:v.x,p.y<d.y?p.y<v.y?p.y:v.y:d.y<v.y?d.y:v.y,t,i,l),L=ws(S,A,t,i,l),F=e.prevZ,q=e.nextZ;F&&F.z>=C&&q&&q.z<=L;){if(F!==e.prev&&F!==e.next&&Su(p.x,p.y,d.x,d.y,v.x,v.y,F.x,F.y)&&Un(F.prev,F,F.next)>=0||(F=F.prevZ,q!==e.prev&&q!==e.next&&Su(p.x,p.y,d.x,d.y,v.x,v.y,q.x,q.y)&&Un(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;F&&F.z>=C;){if(F!==e.prev&&F!==e.next&&Su(p.x,p.y,d.x,d.y,v.x,v.y,F.x,F.y)&&Un(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;q&&q.z<=L;){if(q!==e.prev&&q!==e.next&&Su(p.x,p.y,d.x,d.y,v.x,v.y,q.x,q.y)&&Un(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function Eu(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!Cc(p,d)&&ku(p,l,l.next,d)&&vl(p,d)&&vl(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),rc(l),rc(l.next),l=e=d),l=l.next}while(l!==e);return xs(l)}function np(e,t,i,l,p,d){var v=e;do{for(var S=v.next.next;S!==v.prev;){if(v.i!==S.i&&tc(v,S)){var A=Dc(v,S);return v=xs(v,v.next),A=xs(A,A.next),iu(v,t,i,l,p,d),void iu(A,t,i,l,p,d)}S=S.next}v=v.next}while(v!==e)}function ap(e,t){return e.x-t.x}function op(e,t){if(t=function(l,p){var d,v=p,S=l.x,A=l.y,C=-1/0;do{if(A<=v.y&&A>=v.next.y&&v.next.y!==v.y){var L=v.x+(A-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(L<=S&&L>C){if(C=L,L===S){if(A===v.y)return v;if(A===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==p);if(!d)return null;if(S===C)return d;var F,q=d,W=d.x,ne=d.y,oe=1/0;v=d;do S>=v.x&&v.x>=W&&S!==v.x&&Su(A<ne?S:C,A,W,ne,A<ne?C:S,A,v.x,v.y)&&(F=Math.abs(A-v.y)/(S-v.x),vl(v,l)&&(F<oe||F===oe&&(v.x>d.x||v.x===d.x&&Fl(d,v)))&&(d=v,oe=F)),v=v.next;while(v!==q);return d}(e,t)){var i=Dc(t,e);xs(t,t.next),xs(i,i.next)}}function Fl(e,t){return Un(e.prev,e,t.prev)<0&&Un(t.next,e,e.next)<0}function ws(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function nu(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Su(e,t,i,l,p,d,v,S){return(p-v)*(t-S)-(e-v)*(d-S)>=0&&(e-v)*(l-S)-(i-v)*(t-S)>=0&&(i-v)*(d-S)-(p-v)*(l-S)>=0}function tc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&ku(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(vl(e,t)&&vl(t,e)&&function(i,l){var p=i,d=!1,v=(i.x+l.x)/2,S=(i.y+l.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&v<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(Un(e.prev,e,t.prev)||Un(e,t.prev,t))||Cc(e,t)&&Un(e.prev,e,e.next)>0&&Un(t.prev,t,t.next)>0)}function Un(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Cc(e,t){return e.x===t.x&&e.y===t.y}function ku(e,t,i,l){var p=Mc(Un(e,t,i)),d=Mc(Un(e,t,l)),v=Mc(Un(i,l,e)),S=Mc(Un(i,l,t));return p!==d&&v!==S||!(p!==0||!Vl(e,i,t))||!(d!==0||!Vl(e,l,t))||!(v!==0||!Vl(i,e,l))||!(S!==0||!Vl(i,t,l))}function Vl(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Mc(e){return e>0?1:e<0?-1:0}function vl(e,t){return Un(e.prev,e,e.next)<0?Un(e,t,e.next)>=0&&Un(e,e.prev,t)>=0:Un(e,t,e.prev)<0||Un(e,e.next,t)<0}function Dc(e,t){var i=new Nl(e.i,e.x,e.y),l=new Nl(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function kh(e,t,i,l){var p=new Nl(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function rc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Nl(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $c(e,t,i,l){for(var p=0,d=t,v=i-l;d<i;d+=l)p+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return p}function Ws(e,t,i,l,p){(function d(v,S,A,C,L){for(;C>A;){if(C-A>600){var F=C-A+1,q=S-A+1,W=Math.log(F),ne=.5*Math.exp(2*W/3),oe=.5*Math.sqrt(W*ne*(F-ne)/F)*(q-F/2<0?-1:1);d(v,S,Math.max(A,Math.floor(S-q*ne/F+oe)),Math.min(C,Math.floor(S+(F-q)*ne/F+oe)),L)}var me=v[S],ue=A,be=C;for(Ko(v,A,S),L(v[C],me)>0&&Ko(v,A,C);ue<be;){for(Ko(v,ue,be),ue++,be--;L(v[ue],me)<0;)ue++;for(;L(v[be],me)>0;)be--}L(v[A],me)===0?Ko(v,A,be):Ko(v,++be,C),be<=S&&(A=be+1),S<=be&&(C=be-1)}})(e,t,i||0,l||e.length-1,p||au)}function Ko(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function au(e,t){return e<t?-1:e>t?1:0}function eh(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],v=0;v<i;v++){var S=Ye(e[v]);S!==0&&(e[v].area=Math.abs(S),p===void 0&&(p=S<0),p===S<0?(l&&d.push(l),l=[e[v]]):l.push(e[v]))}if(l&&d.push(l),t>1)for(var A=0;A<d.length;A++)d[A].length<=t||(Ws(d[A],t,1,d[A].length-1,ic),d[A]=d[A].slice(0,t));return d}function ic(e,t){return t.area-e.area}function sp(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,v=t;d<v.length;d+=1){var S=v[d].paint.get(e+"-pattern");S.isConstant()||(p=!0);var A=S.constantOr(null);A&&(p=!0,l[A.to]=!0,l[A.from]=!0)}return p}function th(e,t,i,l,p){for(var d=p.patternDependencies,v=0,S=t;v<S.length;v+=1){var A=S[v],C=A.paint.get(e+"-pattern").value;if(C.kind!=="constant"){var L=C.evaluate({zoom:l-1},i,{},p.availableImages),F=C.evaluate({zoom:l},i,{},p.availableImages),q=C.evaluate({zoom:l+1},i,{},p.availableImages);F=F&&F.name?F.name:F,q=q&&q.name?q.name:q,d[L=L&&L.name?L.name:L]=!0,d[F]=!0,d[q]=!0,i.patterns[A.id]={min:L,mid:F,max:q}}}return i}Ol.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs($c(e,0,p?t[0]*i:e.length,i));if(p)for(var v=0,S=t.length;v<S;v++)d-=Math.abs($c(e,t[v]*i,v<S-1?t[v+1]*i:e.length,i));var A=0;for(v=0;v<l.length;v+=3){var C=l[v]*i,L=l[v+1]*i,F=l[v+2]*i;A+=Math.abs((e[C]-e[F])*(e[L+1]-e[C+1])-(e[C]-e[L])*(e[F+1]-e[C+1]))}return d===0&&A===0?0:Math.abs((A-d)/d)},Ol.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var v=0;v<t;v++)i.vertices.push(e[p][d][v]);p>0&&i.holes.push(l+=e[p-1].length)}return i},Qc.default=ec;var Io=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ml,this.indexArray=new ds,this.indexArray2=new co,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Io.prototype.populate=function(e,t,i){this.hasPattern=sp("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var S=v[d],A=S.feature,C=S.id,L=S.index,F=S.sourceLayerIndex,q=this.layers[0]._featureFilter.needGeometry,W=on(A,q);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),W,i)){var ne=l?l.evaluate(W,{},i,t.availableImages):void 0,oe={id:C,properties:A.properties,type:A.type,sourceLayerIndex:F,index:L,geometry:q?W.geometry:ui(A),patterns:{},sortKey:ne};p.push(oe)}}l&&p.sort(function(Ge,tt){return Ge.sortKey-tt.sortKey});for(var me=0,ue=p;me<ue.length;me+=1){var be=ue[me],Se=be.geometry,Ae=be.index,De=be.sourceLayerIndex;if(this.hasPattern){var Fe=th("fill",this.layers,be,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(be,Se,Ae,i,{});t.featureIndex.insert(e[Ae].feature,Se,Ae,De,this.index)}},Io.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Io.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Io.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Io.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Io.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kd),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Io.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Io.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=eh(t,500);d<v.length;d+=1){for(var S=v[d],A=0,C=0,L=S;C<L.length;C+=1)A+=L[C].length;for(var F=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),q=F.vertexLength,W=[],ne=[],oe=0,me=S;oe<me.length;oe+=1){var ue=me[oe];if(ue.length!==0){ue!==S[0]&&ne.push(W.length/2);var be=this.segments2.prepareSegment(ue.length,this.layoutVertexArray,this.indexArray2),Se=be.vertexLength;this.layoutVertexArray.emplaceBack(ue[0].x,ue[0].y),this.indexArray2.emplaceBack(Se+ue.length-1,Se),W.push(ue[0].x),W.push(ue[0].y);for(var Ae=1;Ae<ue.length;Ae++)this.layoutVertexArray.emplaceBack(ue[Ae].x,ue[Ae].y),this.indexArray2.emplaceBack(Se+Ae-1,Se+Ae),W.push(ue[Ae].x),W.push(ue[Ae].y);be.vertexLength+=ue.length,be.primitiveLength+=ue.length}}for(var De=Qc(W,ne),Fe=0;Fe<De.length;Fe+=3)this.indexArray.emplaceBack(q+De[Fe],q+De[Fe+1],q+De[Fe+2]);F.vertexLength+=A,F.primitiveLength+=De.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ht("FillBucket",Io,{omit:["layers","patternFeatures"]});var nc=new pn({"fill-sort-key":new ft(G.layout_fill["fill-sort-key"])}),lp={paint:new pn({"fill-antialias":new St(G.paint_fill["fill-antialias"]),"fill-opacity":new ft(G.paint_fill["fill-opacity"]),"fill-color":new ft(G.paint_fill["fill-color"]),"fill-outline-color":new ft(G.paint_fill["fill-outline-color"]),"fill-translate":new St(G.paint_fill["fill-translate"]),"fill-translate-anchor":new St(G.paint_fill["fill-translate-anchor"]),"fill-pattern":new zc(G.paint_fill["fill-pattern"])}),layout:nc},ac=function(e){function t(i){e.call(this,i,lp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Io(i)},t.prototype.queryRadius=function(){return qi(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,S,A){return Za(Ds(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,A),d)},t.prototype.isTileClipped=function(){return!0},t}(hs),rh=Fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ih=Iu;function Iu(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(Tu,this,t)}function Tu(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var v=p._keys[l.readVarint()],S=p._values[l.readVarint()];p.properties[v]=S}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function up(e){for(var t,i,l=0,p=0,d=e.length,v=d-1;p<d;v=p++)l+=((i=e[v]).x-(t=e[p]).x)*(t.y+i.y);return l}Iu.types=["Unknown","Point","LineString","Polygon"],Iu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,v=0,S=[];e.pos<i;){if(p<=0){var A=e.readVarint();l=7&A,p=A>>3}if(p--,l===1||l===2)d+=e.readSVarint(),v+=e.readSVarint(),l===1&&(t&&S.push(t),t=[]),t.push(new R(d,v));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&S.push(t),S},Iu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,v=1/0,S=-1/0,A=1/0,C=-1/0;e.pos<t;){if(l<=0){var L=e.readVarint();i=7&L,l=L>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<v&&(v=p),p>S&&(S=p),(d+=e.readSVarint())<A&&(A=d),d>C&&(C=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,A,S,C]},Iu.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),v=this.extent*e,S=this.extent*t,A=this.loadGeometry(),C=Iu.types[this.type];function L(W){for(var ne=0;ne<W.length;ne++){var oe=W[ne];W[ne]=[360*(oe.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+S)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(l=0;l<A.length;l++)F[l]=A[l][0];L(A=F);break;case 2:for(l=0;l<A.length;l++)L(A[l]);break;case 3:for(A=function(W){var ne=W.length;if(ne<=1)return[W];for(var oe,me,ue=[],be=0;be<ne;be++){var Se=up(W[be]);Se!==0&&(me===void 0&&(me=Se<0),me===Se<0?(oe&&ue.push(oe),oe=[W[be]]):oe.push(W[be]))}return oe&&ue.push(oe),ue}(A),l=0;l<A.length;l++)for(p=0;p<A[l].length;p++)L(A[l][p])}A.length===1?A=A[0]:C="Multi"+C;var q={type:"Feature",geometry:{type:C,coordinates:A},properties:this.properties};return"id"in this&&(q.id=this.id),q};var Th=cp;function cp(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Ul,this,t),this.length=this._features.length}function Ul(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var v=l.readVarint()>>3;p=v===1?l.readString():v===2?l.readFloat():v===3?l.readDouble():v===4?l.readVarint64():v===5?l.readVarint():v===6?l.readSVarint():v===7?l.readBoolean():null}return p}(i))}function Ho(e,t,i){if(e===3){var l=new Th(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}cp.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Ih(this._pbf,t,this.extent,this._keys,this._values)};var Be={VectorTile:function(e,t){this.layers=e.readFields(Ho,{},t)},VectorTileFeature:Ih,VectorTileLayer:Th},ot=Be.VectorTileFeature.types,Au=Math.pow(2,13);function jl(e,t,i,l,p,d,v,S){e.emplaceBack(t,i,2*Math.floor(l*Au)+v,p*Au*2,d*Au*2,Math.round(S))}var To=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ra,this.indexArray=new ds,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function oc(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}To.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=sp("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],v=d.feature,S=d.id,A=d.index,C=d.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,F=on(v,L);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),F,i)){var q={id:S,sourceLayerIndex:C,index:A,geometry:L?F.geometry:ui(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(th("fill-extrusion",this.layers,q,this.zoom,t)):this.addFeature(q,q.geometry,A,i,{}),t.featureIndex.insert(v,q.geometry,A,C,this.index,!0)}}},To.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},To.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},To.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},To.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},To.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},To.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},To.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=eh(t,500);d<v.length;d+=1){for(var S=v[d],A=0,C=0,L=S;C<L.length;C+=1)A+=L[C].length;for(var F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),q=0,W=S;q<W.length;q+=1){var ne=W[q];if(ne.length!==0&&!((lr=ne).every(function(Xt){return Xt.x<0})||lr.every(function(Xt){return Xt.x>8192})||lr.every(function(Xt){return Xt.y<0})||lr.every(function(Xt){return Xt.y>8192})))for(var oe=0,me=0;me<ne.length;me++){var ue=ne[me];if(me>=1){var be=ne[me-1];if(!oc(ue,be)){F.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Se=ue.sub(be)._perp()._unit(),Ae=be.dist(ue);oe+Ae>32768&&(oe=0),jl(this.layoutVertexArray,ue.x,ue.y,Se.x,Se.y,0,0,oe),jl(this.layoutVertexArray,ue.x,ue.y,Se.x,Se.y,0,1,oe),jl(this.layoutVertexArray,be.x,be.y,Se.x,Se.y,0,0,oe+=Ae),jl(this.layoutVertexArray,be.x,be.y,Se.x,Se.y,0,1,oe);var De=F.vertexLength;this.indexArray.emplaceBack(De,De+2,De+1),this.indexArray.emplaceBack(De+1,De+2,De+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+A>Y.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),ot[e.type]==="Polygon"){for(var Fe=[],Ge=[],tt=F.vertexLength,xt=0,lt=S;xt<lt.length;xt+=1){var Tt=lt[xt];if(Tt.length!==0){Tt!==S[0]&&Ge.push(Fe.length/2);for(var st=0;st<Tt.length;st++){var tr=Tt[st];jl(this.layoutVertexArray,tr.x,tr.y,0,0,1,1,0),Fe.push(tr.x),Fe.push(tr.y)}}}for(var Vt=Qc(Fe,Ge),yt=0;yt<Vt.length;yt+=3)this.indexArray.emplaceBack(tt+Vt[yt],tt+Vt[yt+2],tt+Vt[yt+1]);F.primitiveLength+=Vt.length/3,F.vertexLength+=A}}var lr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ht("FillExtrusionBucket",To,{omit:["layers","features"]});var Js={paint:new pn({"fill-extrusion-opacity":new St(G["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ft(G["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new St(G["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new St(G["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zc(G["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ft(G["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ft(G["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new St(G["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},sc=function(e){function t(i){e.call(this,i,Js)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new To(i)},t.prototype.queryRadius=function(){return qi(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,S,A,C){var L=Ds(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,A),F=this.paint.get("fill-extrusion-height").evaluate(l,p),q=this.paint.get("fill-extrusion-base").evaluate(l,p),W=function(oe,me,ue,be){for(var Se=[],Ae=0,De=oe;Ae<De.length;Ae+=1){var Fe=De[Ae],Ge=[Fe.x,Fe.y,0,1];Ks(Ge,Ge,me),Se.push(new R(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return Se}(L,C),ne=function(oe,me,ue,be){for(var Se=[],Ae=[],De=be[8]*me,Fe=be[9]*me,Ge=be[10]*me,tt=be[11]*me,xt=be[8]*ue,lt=be[9]*ue,Tt=be[10]*ue,st=be[11]*ue,tr=0,Vt=oe;tr<Vt.length;tr+=1){for(var yt=[],lr=[],Xt=0,Er=Vt[tr];Xt<Er.length;Xt+=1){var zt=Er[Xt],Ar=zt.x,Di=zt.y,sn=be[0]*Ar+be[4]*Di+be[12],xi=be[1]*Ar+be[5]*Di+be[13],Li=be[2]*Ar+be[6]*Di+be[14],Xi=be[3]*Ar+be[7]*Di+be[15],na=Li+Ge,Zn=Xi+tt,Ba=sn+xt,aa=xi+lt,Ha=Li+Tt,wi=Xi+st,oa=new R((sn+De)/Zn,(xi+Fe)/Zn);oa.z=na/Zn,yt.push(oa);var fr=new R(Ba/wi,aa/wi);fr.z=Ha/wi,lr.push(fr)}Se.push(yt),Ae.push(lr)}return[Se,Ae]}(d,q,F,C);return function(oe,me,ue){var be=1/0;Za(ue,me)&&(be=Xo(ue,me[0]));for(var Se=0;Se<me.length;Se++)for(var Ae=me[Se],De=oe[Se],Fe=0;Fe<Ae.length-1;Fe++){var Ge=Ae[Fe],tt=[Ge,Ae[Fe+1],De[Fe+1],De[Fe],Ge];ho(ue,tt)&&(be=Math.min(be,Xo(ue,tt)))}return be!==1/0&&be}(ne[0],ne[1],W)},t}(hs);function ns(e,t){return e.x*t.x+e.y*t.y}function Xo(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],v=e[0],S=i.sub(p),A=d.sub(p),C=v.sub(p),L=ns(S,S),F=ns(S,A),q=ns(A,A),W=ns(C,S),ne=ns(C,A),oe=L*q-F*F,me=(q*W-F*ne)/oe,ue=(L*ne-F*W)/oe,be=p.z*(1-me-ue)+i.z*me+d.z*ue;if(isFinite(be))return be}return 1/0}for(var Se=1/0,Ae=0,De=t;Ae<De.length;Ae+=1)Se=Math.min(Se,De[Ae].z);return Se}var lc=Fn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,zu=Fn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Lc=Be.VectorTileFeature.types,uc=Math.cos(Math.PI/180*37.5),ou=Math.pow(2,14)/.5,jn=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new fn,this.layoutVertexArray2=new Dl,this.indexArray=new ds,this.programConfigurations=new Rt(e.layers,e.zoom),this.segments=new Y,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};jn.prototype.populate=function(e,t,i){this.hasPattern=sp("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var S=v[d],A=S.feature,C=S.id,L=S.index,F=S.sourceLayerIndex,q=this.layers[0]._featureFilter.needGeometry,W=on(A,q);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),W,i)){var ne=l?l.evaluate(W,{},i):void 0,oe={id:C,properties:A.properties,type:A.type,sourceLayerIndex:F,index:L,geometry:q?W.geometry:ui(A),patterns:{},sortKey:ne};p.push(oe)}}l&&p.sort(function(Ge,tt){return Ge.sortKey-tt.sortKey});for(var me=0,ue=p;me<ue.length;me+=1){var be=ue[me],Se=be.geometry,Ae=be.index,De=be.sourceLayerIndex;if(this.hasPattern){var Fe=th("line",this.layers,be,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(be,Se,Ae,i,{});t.featureIndex.insert(e[Ae].feature,Se,Ae,De,this.index)}},jn.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},jn.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},jn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jn.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,zu)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,lc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},jn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jn.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},jn.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),S=d.get("line-cap"),A=d.get("line-miter-limit"),C=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var L=0,F=t;L<F.length;L+=1)this.addLine(F[L],e,v,S,A,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},jn.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=Lc[t.type]==="Polygon",A=e.length;A>=2&&e[A-1].equals(e[A-2]);)A--;for(var C=0;C<A-1&&e[C].equals(e[C+1]);)C++;if(!(A<(S?3:2))){i==="bevel"&&(p=1.05);var L,F=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),W=void 0,ne=void 0,oe=void 0,me=void 0;this.e1=this.e2=-1,S&&(me=e[C].sub(L=e[A-2])._unit()._perp());for(var ue=C;ue<A;ue++)if(!(ne=ue===A-1?S?e[C+1]:void 0:e[ue+1])||!e[ue].equals(ne)){me&&(oe=me),L&&(W=L),L=e[ue],me=ne?ne.sub(L)._unit()._perp():oe;var be=(oe=oe||me).add(me);be.x===0&&be.y===0||be._unit();var Se=oe.x*me.x+oe.y*me.y,Ae=be.x*me.x+be.y*me.y,De=Ae!==0?1/Ae:1/0,Fe=2*Math.sqrt(2-2*Ae),Ge=Ae<uc&&W&&ne,tt=oe.x*me.y-oe.y*me.x>0;if(Ge&&ue>C){var xt=L.dist(W);if(xt>2*F){var lt=L.sub(L.sub(W)._mult(F/xt)._round());this.updateDistance(W,lt),this.addCurrentVertex(lt,oe,0,0,q),W=lt}}var Tt=W&&ne,st=Tt?i:S?"butt":l;if(Tt&&st==="round"&&(De<d?st="miter":De<=2&&(st="fakeround")),st==="miter"&&De>p&&(st="bevel"),st==="bevel"&&(De>2&&(st="flipbevel"),De<p&&(st="miter")),W&&this.updateDistance(W,L),st==="miter")be._mult(De),this.addCurrentVertex(L,be,0,0,q);else if(st==="flipbevel"){if(De>100)be=me.mult(-1);else{var tr=De*oe.add(me).mag()/oe.sub(me).mag();be._perp()._mult(tr*(tt?-1:1))}this.addCurrentVertex(L,be,0,0,q),this.addCurrentVertex(L,be.mult(-1),0,0,q)}else if(st==="bevel"||st==="fakeround"){var Vt=-Math.sqrt(De*De-1),yt=tt?Vt:0,lr=tt?0:Vt;if(W&&this.addCurrentVertex(L,oe,yt,lr,q),st==="fakeround")for(var Xt=Math.round(180*Fe/Math.PI/20),Er=1;Er<Xt;Er++){var zt=Er/Xt;if(zt!==.5){var Ar=zt-.5;zt+=zt*Ar*(zt-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*Ar*Ar+(.848013+Se*(.215638*Se-1.06021)))}var Di=me.sub(oe)._mult(zt)._add(oe)._unit()._mult(tt?-1:1);this.addHalfVertex(L,Di.x,Di.y,!1,tt,0,q)}ne&&this.addCurrentVertex(L,me,-yt,-lr,q)}else if(st==="butt")this.addCurrentVertex(L,be,0,0,q);else if(st==="square"){var sn=W?1:-1;this.addCurrentVertex(L,be,sn,sn,q)}else st==="round"&&(W&&(this.addCurrentVertex(L,oe,0,0,q),this.addCurrentVertex(L,oe,1,1,q,!0)),ne&&(this.addCurrentVertex(L,me,-1,-1,q,!0),this.addCurrentVertex(L,me,0,0,q)));if(Ge&&ue<A-1){var xi=L.dist(ne);if(xi>2*F){var Li=L.add(ne.sub(L)._mult(F/xi)._round());this.updateDistance(L,Li),this.addCurrentVertex(Li,me,0,0,q),L=Li}}}}},jn.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var v=t.y*l-t.x,S=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,v,S,d,!0,-l,p),this.distance>ou/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},jn.prototype.addHalfVertex=function(e,t,i,l,p,d,v){var S=.5*(this.lineClips?this.scaledDistance*(ou-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var A=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),v.primitiveLength++),p?this.e2=A:this.e1=A},jn.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},jn.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ht("LineBucket",jn,{omit:["layers","patternFeatures"]});var cc=new pn({"line-cap":new St(G.layout_line["line-cap"]),"line-join":new ft(G.layout_line["line-join"]),"line-miter-limit":new St(G.layout_line["line-miter-limit"]),"line-round-limit":new St(G.layout_line["line-round-limit"]),"line-sort-key":new ft(G.layout_line["line-sort-key"])}),Pu={paint:new pn({"line-opacity":new ft(G.paint_line["line-opacity"]),"line-color":new ft(G.paint_line["line-color"]),"line-translate":new St(G.paint_line["line-translate"]),"line-translate-anchor":new St(G.paint_line["line-translate-anchor"]),"line-width":new ft(G.paint_line["line-width"]),"line-gap-width":new ft(G.paint_line["line-gap-width"]),"line-offset":new ft(G.paint_line["line-offset"]),"line-blur":new ft(G.paint_line["line-blur"]),"line-dasharray":new La(G.paint_line["line-dasharray"]),"line-pattern":new zc(G.paint_line["line-pattern"]),"line-gradient":new ja(G.paint_line["line-gradient"])}),layout:cc},Cu=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new $t(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=Ve({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(ft))(Pu.paint.properties["line-width"].specification);Cu.useIntegerZoom=!0;var su=function(e){function t(i){e.call(this,i,Pu),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof mi,this.gradientVersion=(this.gradientVersion+1)%le)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=Cu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new jn(i)},t.prototype.queryRadius=function(i){var l=i,p=Mu(vs("line-width",this,l),vs("line-gap-width",this,l)),d=vs("line-offset",this,l);return p/2+Math.abs(d)+qi(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,S,A){var C=Ds(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,A),L=A/2*Mu(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),F=this.paint.get("line-offset").evaluate(l,p);return F&&(d=function(q,W){for(var ne=[],oe=new R(0,0),me=0;me<q.length;me++){for(var ue=q[me],be=[],Se=0;Se<ue.length;Se++){var Ae=ue[Se],De=ue[Se+1],Fe=Se===0?oe:Ae.sub(ue[Se-1])._unit()._perp(),Ge=Se===ue.length-1?oe:De.sub(Ae)._unit()._perp(),tt=Fe._add(Ge)._unit();tt._mult(1/(tt.x*Ge.x+tt.y*Ge.y)),be.push(tt._mult(W)._add(Ae))}ne.push(be)}return ne}(d,F*A)),function(q,W,ne){for(var oe=0;oe<W.length;oe++){var me=W[oe];if(q.length>=3){for(var ue=0;ue<me.length;ue++)if(Go(q,me[ue]))return!0}if(gs(q,me,ne))return!0}return!1}(C,d,L)},t.prototype.isTileClipped=function(){return!0},t}(hs);function Mu(e,t){return t>0?t+2*e:e}var bl=Fn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hc=Fn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Du=(Fn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Fn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),pc=(Fn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),gf=Fn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hp(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,v){var S=d.layout.get("text-transform").evaluate(v,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),Eo.applyArabicShaping&&(p=Eo.applyArabicShaping(p)),p}(l.text,t,i)}),e}Fn([{name:"triangle",components:3,type:"Uint16"}]),Fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fn([{type:"Float32",name:"offsetX"}]),Fn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Rc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},pp=function(e,t,i,l,p){var d,v,S=8*p-l-1,A=(1<<S)-1,C=A>>1,L=-7,F=i?p-1:0,q=i?-1:1,W=e[t+F];for(F+=q,d=W&(1<<-L)-1,W>>=-L,L+=S;L>0;d=256*d+e[t+F],F+=q,L-=8);for(v=d&(1<<-L)-1,d>>=-L,L+=l;L>0;v=256*v+e[t+F],F+=q,L-=8);if(d===0)d=1-C;else{if(d===A)return v?NaN:1/0*(W?-1:1);v+=Math.pow(2,l),d-=C}return(W?-1:1)*v*Math.pow(2,d-l)},ih=function(e,t,i,l,p,d){var v,S,A,C=8*d-p-1,L=(1<<C)-1,F=L>>1,q=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=l?0:d-1,ne=l?1:-1,oe=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(S=isNaN(t)?1:0,v=L):(v=Math.floor(Math.log(t)/Math.LN2),t*(A=Math.pow(2,-v))<1&&(v--,A*=2),(t+=v+F>=1?q/A:q*Math.pow(2,1-F))*A>=2&&(v++,A/=2),v+F>=L?(S=0,v=L):v+F>=1?(S=(t*A-1)*Math.pow(2,p),v+=F):(S=t*Math.pow(2,F-1)*Math.pow(2,p),v=0));p>=8;e[i+W]=255&S,W+=ne,S/=256,p-=8);for(v=v<<p|S,C+=p;C>0;e[i+W]=255&v,W+=ne,v/=256,C-=8);e[i+W-ne]|=128*oe},nh=bi;function bi(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}bi.Varint=0,bi.Fixed64=1,bi.Bytes=2,bi.Fixed32=5;var fp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ql(e){return e.type===bi.Bytes?e.readVarint()+e.pos:e.pos+1}function Zl(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Ah(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function Bc(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Oc(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function _f(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function dp(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Id(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function vf(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function mp(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function bf(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xf(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function lu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function fc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function zh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Td(e,t,i){e===1&&i.readMessage(wf,t)}function wf(e,t,i){if(e===3){var l=i.readMessage(yp,{}),p=l.width,d=l.height,v=l.left,S=l.top,A=l.advance;t.push({id:l.id,bitmap:new bs({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:v,top:S,advance:A}})}}function yp(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function gp(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(oe,me){return me.h-oe.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],S=0,A=0,C=0,L=e;C<L.length;C+=1)for(var F=L[C],q=v.length-1;q>=0;q--){var W=v[q];if(!(F.w>W.w||F.h>W.h)){if(F.x=W.x,F.y=W.y,A=Math.max(A,F.y+F.h),S=Math.max(S,F.x+F.w),F.w===W.w&&F.h===W.h){var ne=v.pop();q<v.length&&(v[q]=ne)}else F.h===W.h?(W.x+=F.w,W.w-=F.w):F.w===W.w?(W.y+=F.h,W.h-=F.h):(v.push({x:W.x+F.w,y:W.y,w:W.w-F.w,h:F.h}),W.y+=F.h,W.h-=F.h);break}}return{w:S,h:A,fill:t/(S*A)||0}}bi.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=zh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*zh(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=pp(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=pp(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,v){var S,A,C=v.buf;if(S=(112&(A=C[v.pos++]))>>4,A<128||(S|=(127&(A=C[v.pos++]))<<3,A<128)||(S|=(127&(A=C[v.pos++]))<<10,A<128)||(S|=(127&(A=C[v.pos++]))<<17,A<128)||(S|=(127&(A=C[v.pos++]))<<24,A<128)||(S|=(1&(A=C[v.pos++]))<<31,A<128))return Zl(p,S,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&fp?function(i,l,p){return fp.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",v=l;v<p;){var S,A,C,L=i[v],F=null,q=L>239?4:L>223?3:L>191?2:1;if(v+q>p)break;q===1?L<128&&(F=L):q===2?(192&(S=i[v+1]))==128&&(F=(31&L)<<6|63&S)<=127&&(F=null):q===3?(A=i[v+2],(192&(S=i[v+1]))==128&&(192&A)==128&&((F=(15&L)<<12|(63&S)<<6|63&A)<=2047||F>=55296&&F<=57343)&&(F=null)):q===4&&(A=i[v+2],C=i[v+3],(192&(S=i[v+1]))==128&&(192&A)==128&&(192&C)==128&&((F=(15&L)<<18|(63&S)<<12|(63&A)<<6|63&C)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,q=1):F>65535&&(F-=65536,d+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),d+=String.fromCharCode(F),v+=q}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==bi.Bytes)return e.push(this.readVarint(t));var i=ql(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==bi.Bytes)return e.push(this.readSVarint());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==bi.Bytes)return e.push(this.readBoolean());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==bi.Bytes)return e.push(this.readFloat());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==bi.Bytes)return e.push(this.readDouble());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==bi.Bytes)return e.push(this.readFixed32());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==bi.Bytes)return e.push(this.readSFixed32());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==bi.Bytes)return e.push(this.readFixed64());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==bi.Bytes)return e.push(this.readSFixed64());var t=ql(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===bi.Varint)for(;this.buf[this.pos++]>127;);else if(t===bi.Bytes)this.pos=this.readVarint()+this.pos;else if(t===bi.Fixed32)this.pos+=4;else{if(t!==bi.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fc(this.buf,-1&e,this.pos),fc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fc(this.buf,-1&e,this.pos),fc(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,S){S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,d>>>=7,S.buf[S.pos++]=127&d|128,S.buf[S.pos]=127&(d>>>=7)}(l,0,i),function(d,v){var S=(7&d)<<4;v.buf[v.pos++]|=S|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var v,S,A=0;A<p.length;A++){if((v=p.charCodeAt(A))>55295&&v<57344){if(!S){v>56319||A+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):S=v;continue}if(v<56320){l[d++]=239,l[d++]=191,l[d++]=189,S=v;continue}v=S-55296<<10|v-56320|65536,S=null}else S&&(l[d++]=239,l[d++]=191,l[d++]=189,S=null);v<128?l[d++]=v:(v<2048?l[d++]=v>>6|192:(v<65536?l[d++]=v>>12|224:(l[d++]=v>>18|240,l[d++]=v>>12&63|128),l[d++]=v>>6&63|128),l[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&Ah(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),ih(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ih(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&Ah(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,bi.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Bc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Oc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Id,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,_f,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,dp,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,vf,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,mp,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,bf,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xf,t)},writeBytesField:function(e,t){this.writeTag(e,bi.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,bi.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,bi.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,bi.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,bi.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,bi.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,bi.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,bi.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,bi.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,bi.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var ah=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,v=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=v,this.version=l},Gl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Gl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Gl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Gl.tlbr.get=function(){return this.tl.concat(this.br)},Gl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ah.prototype,Gl);var Fc=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=gp(p),v=new po({width:d.w||1,height:d.h||1});for(var S in e){var A=e[S],C=i[S].paddedRect;po.copy(A.data,v,{x:0,y:0},{x:C.x+1,y:C.y+1},A.data)}for(var L in t){var F=t[L],q=l[L].paddedRect,W=q.x+1,ne=q.y+1,oe=F.data.width,me=F.data.height;po.copy(F.data,v,{x:0,y:0},{x:W,y:ne},F.data),po.copy(F.data,v,{x:0,y:me-1},{x:W,y:ne-1},{width:oe,height:1}),po.copy(F.data,v,{x:0,y:0},{x:W,y:ne+me},{width:oe,height:1}),po.copy(F.data,v,{x:oe-1,y:0},{x:W-1,y:ne},{width:1,height:me}),po.copy(F.data,v,{x:0,y:0},{x:W+oe,y:ne},{width:1,height:me})}this.image=v,this.iconPositions=i,this.patternPositions=l};Fc.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new ah(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},Fc.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},Fc.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},ht("ImagePosition",ah),ht("ImageAtlas",Fc);var Wo={horizontal:1,vertical:2,horizontalOnly:3},Vc=function(){this.scale=1,this.fontStack="",this.imageName=null};Vc.forText=function(e,t){var i=new Vc;return i.scale=e||1,i.fontStack=t,i},Vc.forImage=function(e){var t=new Vc;return t.imageName=e,t};var Ka=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Nc(e,t,i,l,p,d,v,S,A,C,L,F,q,W,ne,oe){var me,ue=Ka.fromFeature(e,p);F===Wo.vertical&&ue.verticalizePunctuation();var be=Eo.processBidirectionalText,Se=Eo.processStyledBidirectionalText;if(be&&ue.sections.length===1){me=[];for(var Ae=0,De=be(ue.toString(),Ph(ue,C,d,t,l,W,ne));Ae<De.length;Ae+=1){var Fe=De[Ae],Ge=new Ka;Ge.text=Fe,Ge.sections=ue.sections;for(var tt=0;tt<Fe.length;tt++)Ge.sectionIndex.push(0);me.push(Ge)}}else if(Se){me=[];for(var xt=0,lt=Se(ue.text,ue.sectionIndex,Ph(ue,C,d,t,l,W,ne));xt<lt.length;xt+=1){var Tt=lt[xt],st=new Ka;st.text=Tt[0],st.sectionIndex=Tt[1],st.sections=ue.sections,me.push(st)}}else me=function(yt,lr){for(var Xt=[],Er=yt.text,zt=0,Ar=0,Di=lr;Ar<Di.length;Ar+=1){var sn=Di[Ar];Xt.push(yt.substring(zt,sn)),zt=sn}return zt<Er.length&&Xt.push(yt.substring(zt,Er.length)),Xt}(ue,Ph(ue,C,d,t,l,W,ne));var tr=[],Vt={positionedLines:tr,text:ue.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(yt,lr,Xt,Er,zt,Ar,Di,sn,xi,Li,Xi,na){for(var Zn=0,Ba=-17,aa=0,Ha=0,wi=sn==="right"?1:sn==="left"?0:.5,oa=0,fr=0,yi=zt;fr<yi.length;fr+=1){var Xr=yi[fr];Xr.trim();var _r=Xr.getMaxScale(),fo=24*(_r-1),Oa={positionedGlyphs:[],lineOffset:0};yt.positionedLines[oa]=Oa;var $r=Oa.positionedGlyphs,xn=0;if(Xr.length()){for(var ba=0;ba<Xr.length();ba++){var Or=Xr.getSection(ba),Sl=Xr.getSectionIndex(ba),Yo=Xr.getCharCode(ba),kl=0,mn=null,Ao=null,Rs=null,Uu=24,Ec=!(xi===Wo.horizontal||!Xi&&!hl(Yo)||Xi&&(oh[Yo]||(Ic=Yo,et.Arabic(Ic)||et["Arabic Supplement"](Ic)||et["Arabic Extended-A"](Ic)||et["Arabic Presentation Forms-A"](Ic)||et["Arabic Presentation Forms-B"](Ic))));if(Or.imageName){var Sc=Er[Or.imageName];if(!Sc)continue;Rs=Or.imageName,yt.iconsInText=yt.iconsInText||!0,Ao=Sc.paddedRect;var Il=Sc.displaySize;Or.scale=24*Or.scale/na,kl=fo+(24-Il[1]*Or.scale),Uu=(mn={width:Il[0],height:Il[1],left:1,top:-3,advance:Ec?Il[1]:Il[0]}).advance;var kc=Ec?Il[0]*Or.scale-24*_r:Il[1]*Or.scale-24*_r;kc>0&&kc>xn&&(xn=kc)}else{var yh=Xt[Or.fontStack],Vh=yh&&yh[Yo];if(Vh&&Vh.rect)Ao=Vh.rect,mn=Vh.metrics;else{var Np=lr[Or.fontStack],Of=Np&&Np[Yo];if(!Of)continue;mn=Of.metrics}kl=24*(_r-Or.scale)}Ec?(yt.verticalizable=!0,$r.push({glyph:Yo,imageName:Rs,x:Zn,y:Ba+kl,vertical:Ec,scale:Or.scale,fontStack:Or.fontStack,sectionIndex:Sl,metrics:mn,rect:Ao}),Zn+=Uu*Or.scale+Li):($r.push({glyph:Yo,imageName:Rs,x:Zn,y:Ba+kl,vertical:Ec,scale:Or.scale,fontStack:Or.fontStack,sectionIndex:Sl,metrics:mn,rect:Ao}),Zn+=mn.advance*Or.scale+Li)}$r.length!==0&&(aa=Math.max(Zn-Li,aa),Sf($r,0,$r.length-1,wi,xn)),Zn=0;var Ff=Ar*_r+xn;Oa.lineOffset=Math.max(xn,fo),Ba+=Ff,Ha=Math.max(Ff,Ha),++oa}else Ba+=Ar,++oa}var Ic,Up=Ba- -17,Nh=uu(Di),Zc=Nh.horizontalAlign,Uh=Nh.verticalAlign;(function(Vf,Nf,jp,qp,Uf,Zp,Gp,Kp,jf){var jh,qf=(Nf-jp)*Uf;jh=Zp!==Gp?-Kp*qp- -17:(-qp*jf+.5)*Gp;for(var qh=0,Hp=Vf;qh<Hp.length;qh+=1)for(var gh=0,Xp=Hp[qh].positionedGlyphs;gh<Xp.length;gh+=1){var Zh=Xp[gh];Zh.x+=qf,Zh.y+=jh}})(yt.positionedLines,wi,Zc,Uh,aa,Ha,Ar,Up,zt.length),yt.top+=-Uh*Up,yt.bottom=yt.top+Up,yt.left+=-Zc*aa,yt.right=yt.left+aa}(Vt,t,i,l,me,v,S,A,F,C,q,oe),!function(yt){for(var lr=0,Xt=yt;lr<Xt.length;lr+=1)if(Xt[lr].positionedGlyphs.length!==0)return!1;return!0}(tr)&&Vt}Ka.fromFeature=function(e,t){for(var i=new Ka,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},Ka.prototype.length=function(){return this.text.length},Ka.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Ka.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Ka.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Ka.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&Cl(l)&&!Rc[e[i+1]]||p&&Cl(p)&&!Rc[e[i-1]]||!Rc[e[i]]?e[i]:Rc[e[i]]}return t}(this.text)},Ka.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&oh[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&oh[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},Ka.prototype.substring=function(e,t){var i=new Ka;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},Ka.prototype.toString=function(){return this.text},Ka.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},Ka.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(Vc.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},Ka.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Vc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}else Ot("Can't add FormattedSection with an empty image.")},Ka.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var oh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jo={};function sh(e,t,i,l,p,d){if(t.imageName){var v=l[t.imageName];return v?v.displaySize[0]*t.scale*24/d+p:0}var S=i[t.fontStack],A=S&&S[e];return A?A.metrics.advance*t.scale+p:0}function _p(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function Ef(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function vp(e,t,i,l,p,d){for(var v=null,S=_p(t,i,p,d),A=0,C=l;A<C.length;A+=1){var L=C[A],F=_p(t-L.x,i,p,d)+L.badness;F<=S&&(v=L,S=F)}return{index:e,x:t,priorBreak:v,badness:S}}function Ph(e,t,i,l,p,d,v){if(d!=="point")return[];if(!e)return[];for(var S,A=[],C=function(me,ue,be,Se,Ae,De){for(var Fe=0,Ge=0;Ge<me.length();Ge++){var tt=me.getSection(Ge);Fe+=sh(me.getCharCode(Ge),tt,Se,Ae,ue,De)}return Fe/Math.max(1,Math.ceil(Fe/be))}(e,t,i,l,p,v),L=e.text.indexOf("\u200B")>=0,F=0,q=0;q<e.length();q++){var W=e.getSection(q),ne=e.getCharCode(q);if(oh[ne]||(F+=sh(ne,W,l,p,t,v)),q<e.length()-1){var oe=!((S=ne)<11904||!(et["Bopomofo Extended"](S)||et.Bopomofo(S)||et["CJK Compatibility Forms"](S)||et["CJK Compatibility Ideographs"](S)||et["CJK Compatibility"](S)||et["CJK Radicals Supplement"](S)||et["CJK Strokes"](S)||et["CJK Symbols and Punctuation"](S)||et["CJK Unified Ideographs Extension A"](S)||et["CJK Unified Ideographs"](S)||et["Enclosed CJK Letters and Months"](S)||et["Halfwidth and Fullwidth Forms"](S)||et.Hiragana(S)||et["Ideographic Description Characters"](S)||et["Kangxi Radicals"](S)||et["Katakana Phonetic Extensions"](S)||et.Katakana(S)||et["Vertical Forms"](S)||et["Yi Radicals"](S)||et["Yi Syllables"](S)));(Jo[ne]||oe||W.imageName)&&A.push(vp(q+1,F,C,A,Ef(ne,e.getCharCode(q+1),oe&&L),!1))}}return function me(ue){return ue?me(ue.priorBreak).concat(ue.index):[]}(vp(e.length(),F,C,A,0,!0))}function uu(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Sf(e,t,i,l,p){if(l||p)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*l,S=t;S<=i;S++)e[S].x-=v,e[S].y+=p}function dc(e,t,i,l,p,d){var v,S=e.image;if(S.content){var A=S.content,C=S.pixelRatio||1;v=[A[0]/C,A[1]/C,S.displaySize[0]-A[2]/C,S.displaySize[1]-A[3]/C]}var L,F,q,W,ne=t.left*d,oe=t.right*d;i==="width"||i==="both"?(W=p[0]+ne-l[3],F=p[0]+oe+l[1]):F=(W=p[0]+(ne+oe-S.displaySize[0])/2)+S.displaySize[0];var me=t.top*d,ue=t.bottom*d;return i==="height"||i==="both"?(L=p[1]+me-l[0],q=p[1]+ue+l[2]):q=(L=p[1]+(me+ue-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:L,right:F,bottom:q,left:W,collisionPadding:v}}Jo[10]=!0,Jo[32]=!0,Jo[38]=!0,Jo[40]=!0,Jo[41]=!0,Jo[43]=!0,Jo[45]=!0,Jo[47]=!0,Jo[173]=!0,Jo[183]=!0,Jo[8203]=!0,Jo[8208]=!0,Jo[8211]=!0,Jo[8231]=!0;var xl=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(R);function Ch(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new $t(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<l.length&&l[v]<e+1;)v++;v=Math.min(l.length-1,v);var S=l[d],A=l[v];return i.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:A,minSize:i.evaluate(new $t(S)),maxSize:i.evaluate(new $t(A)),interpolationType:p}}function Mh(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?qr(p/128,i.upperSize/128,t.uSizeT):l}function kf(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?ve(gi.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=qr(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}ht("Anchor",xl);var If=Object.freeze({__proto__:null,getSizeData:Ch,evaluateSizeForFeature:Mh,evaluateSizeForZoom:kf,SIZE_PACK_FACTOR:128});function Dh(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,v=t.segment+1,S=0;S>-i/2;){if(--v<0)return!1;S-=e[v].dist(d),d=e[v]}S+=e[v].dist(e[v+1]),v++;for(var A=[],C=0;S<i/2;){var L=e[v],F=e[v+1];if(!F)return!1;var q=e[v-1].angleTo(L)-L.angleTo(F);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:S,angleDelta:q}),C+=q;S-A[0].distance>l;)C-=A.shift().angleDelta;if(C>p)return!1;v++,S+=L.dist(F)}return!0}function bp(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function xp(e,t,i){return e?.6*t*i:0}function mc(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Tf(e,t,i,l,p,d){for(var v=xp(i,p,d),S=mc(i,l)*d,A=0,C=bp(e)/2,L=0;L<e.length-1;L++){var F=e[L],q=e[L+1],W=F.dist(q);if(A+W>C){var ne=(C-A)/W,oe=qr(F.x,q.x,ne),me=qr(F.y,q.y,ne),ue=new xl(oe,me,q.angleTo(F),L);return ue._round(),!v||Dh(e,ue,S,v,t)?ue:void 0}A+=W}}function wp(e,t,i,l,p,d,v,S,A){var C=xp(l,d,v),L=mc(l,p),F=L*v,q=e[0].x===0||e[0].x===A||e[0].y===0||e[0].y===A;return t-F<t/4&&(t=F+t/4),function W(ne,oe,me,ue,be,Se,Ae,De,Fe){for(var Ge=Se/2,tt=bp(ne),xt=0,lt=oe-me,Tt=[],st=0;st<ne.length-1;st++){for(var tr=ne[st],Vt=ne[st+1],yt=tr.dist(Vt),lr=Vt.angleTo(tr);lt+me<xt+yt;){var Xt=((lt+=me)-xt)/yt,Er=qr(tr.x,Vt.x,Xt),zt=qr(tr.y,Vt.y,Xt);if(Er>=0&&Er<Fe&&zt>=0&&zt<Fe&&lt-Ge>=0&&lt+Ge<=tt){var Ar=new xl(Er,zt,lr,st);Ar._round(),ue&&!Dh(ne,Ar,Se,ue,be)||Tt.push(Ar)}}xt+=yt}return De||Tt.length||Ae||(Tt=W(ne,xt/2,me,ue,be,Se,Ae,!0,Fe)),Tt}(e,q?t/2*S%t:(L/2+2*d)*v*S%t,t,C,i,F,q,!1,A)}function Af(e,t,i,l,p){for(var d=[],v=0;v<e.length;v++)for(var S=e[v],A=void 0,C=0;C<S.length-1;C++){var L=S[C],F=S[C+1];L.x<t&&F.x<t||(L.x<t?L=new R(t,L.y+(t-L.x)/(F.x-L.x)*(F.y-L.y))._round():F.x<t&&(F=new R(t,L.y+(t-L.x)/(F.x-L.x)*(F.y-L.y))._round()),L.y<i&&F.y<i||(L.y<i?L=new R(L.x+(i-L.y)/(F.y-L.y)*(F.x-L.x),i)._round():F.y<i&&(F=new R(L.x+(i-L.y)/(F.y-L.y)*(F.x-L.x),i)._round()),L.x>=l&&F.x>=l||(L.x>=l?L=new R(l,L.y+(l-L.x)/(F.x-L.x)*(F.y-L.y))._round():F.x>=l&&(F=new R(l,L.y+(l-L.x)/(F.x-L.x)*(F.y-L.y))._round()),L.y>=p&&F.y>=p||(L.y>=p?L=new R(L.x+(p-L.y)/(F.y-L.y)*(F.x-L.x),p)._round():F.y>=p&&(F=new R(L.x+(p-L.y)/(F.y-L.y)*(F.x-L.x),p)._round()),A&&L.equals(A[A.length-1])||d.push(A=[L]),A.push(F)))))}return d}function Ep(e,t,i,l){var p=[],d=e.image,v=d.pixelRatio,S=d.paddedRect.w-2,A=d.paddedRect.h-2,C=e.right-e.left,L=e.bottom-e.top,F=d.stretchX||[[0,S]],q=d.stretchY||[[0,A]],W=function(Er,zt){return Er+zt[1]-zt[0]},ne=F.reduce(W,0),oe=q.reduce(W,0),me=S-ne,ue=A-oe,be=0,Se=ne,Ae=0,De=oe,Fe=0,Ge=me,tt=0,xt=ue;if(d.content&&l){var lt=d.content;be=Uc(F,0,lt[0]),Ae=Uc(q,0,lt[1]),Se=Uc(F,lt[0],lt[2]),De=Uc(q,lt[1],lt[3]),Fe=lt[0]-be,tt=lt[1]-Ae,Ge=lt[2]-lt[0]-Se,xt=lt[3]-lt[1]-De}var Tt=function(Er,zt,Ar,Di){var sn=lh(Er.stretch-be,Se,C,e.left),xi=cu(Er.fixed-Fe,Ge,Er.stretch,ne),Li=lh(zt.stretch-Ae,De,L,e.top),Xi=cu(zt.fixed-tt,xt,zt.stretch,oe),na=lh(Ar.stretch-be,Se,C,e.left),Zn=cu(Ar.fixed-Fe,Ge,Ar.stretch,ne),Ba=lh(Di.stretch-Ae,De,L,e.top),aa=cu(Di.fixed-tt,xt,Di.stretch,oe),Ha=new R(sn,Li),wi=new R(na,Li),oa=new R(na,Ba),fr=new R(sn,Ba),yi=new R(xi/v,Xi/v),Xr=new R(Zn/v,aa/v),_r=t*Math.PI/180;if(_r){var fo=Math.sin(_r),Oa=Math.cos(_r),$r=[Oa,-fo,fo,Oa];Ha._matMult($r),wi._matMult($r),fr._matMult($r),oa._matMult($r)}var xn=Er.stretch+Er.fixed,ba=zt.stretch+zt.fixed;return{tl:Ha,tr:wi,bl:fr,br:oa,tex:{x:d.paddedRect.x+1+xn,y:d.paddedRect.y+1+ba,w:Ar.stretch+Ar.fixed-xn,h:Di.stretch+Di.fixed-ba},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yi,pixelOffsetBR:Xr,minFontScaleX:Ge/v/C,minFontScaleY:xt/v/L,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var st=Sp(F,me,ne),tr=Sp(q,ue,oe),Vt=0;Vt<st.length-1;Vt++)for(var yt=st[Vt],lr=st[Vt+1],Xt=0;Xt<tr.length-1;Xt++)p.push(Tt(yt,tr[Xt],lr,tr[Xt+1]));else p.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:A+1}));return p}function Uc(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var v=d[p];l+=Math.max(t,Math.min(i,v[1]))-Math.max(t,Math.min(i,v[0]))}return l}function Sp(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var v=d[p],S=v[0],A=v[1],C=l[l.length-1];l.push({fixed:S-C.stretch,stretch:C.stretch}),l.push({fixed:S-C.stretch,stretch:C.stretch+(A-S)})}return l.push({fixed:t+1,stretch:i}),l}function lh(e,t,i,l){return e/t*i+l}function cu(e,t,i,l){return e-t*i/l}var uh=function(e,t,i,l,p,d,v,S,A,C){if(this.boxStartIndex=e.length,A){var L=d.top,F=d.bottom,q=d.collisionPadding;q&&(L-=q[1],F+=q[3]);var W=F-L;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{var ne=d.top*v-S,oe=d.bottom*v+S,me=d.left*v-S,ue=d.right*v+S,be=d.collisionPadding;if(be&&(me-=be[0]*v,ne-=be[1]*v,ue+=be[2]*v,oe+=be[3]*v),C){var Se=new R(me,ne),Ae=new R(ue,ne),De=new R(me,oe),Fe=new R(ue,oe),Ge=C*Math.PI/180;Se._rotate(Ge),Ae._rotate(Ge),De._rotate(Ge),Fe._rotate(Ge),me=Math.min(Se.x,Ae.x,De.x,Fe.x),ue=Math.max(Se.x,Ae.x,De.x,Fe.x),ne=Math.min(Se.y,Ae.y,De.y,Fe.y),oe=Math.max(Se.y,Ae.y,De.y,Fe.y)}e.emplaceBack(t.x,t.y,me,ne,ue,oe,i,l,p)}this.boxEndIndex=e.length},Lu=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Ad),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Ad(e,t){return e<t?-1:e>t?1:0}function zf(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,v=-1/0,S=e[0],A=0;A<S.length;A++){var C=S[A];(!A||C.x<l)&&(l=C.x),(!A||C.y<p)&&(p=C.y),(!A||C.x>d)&&(d=C.x),(!A||C.y>v)&&(v=C.y)}var L=Math.min(d-l,v-p),F=L/2,q=new Lu([],kp);if(L===0)return new R(l,p);for(var W=l;W<d;W+=L)for(var ne=p;ne<v;ne+=L)q.push(new yc(W+F,ne+F,F,e));for(var oe=function(be){for(var Se=0,Ae=0,De=0,Fe=be[0],Ge=0,tt=Fe.length,xt=tt-1;Ge<tt;xt=Ge++){var lt=Fe[Ge],Tt=Fe[xt],st=lt.x*Tt.y-Tt.x*lt.y;Ae+=(lt.x+Tt.x)*st,De+=(lt.y+Tt.y)*st,Se+=3*st}return new yc(Ae/Se,De/Se,0,be)}(e),me=q.length;q.length;){var ue=q.pop();(ue.d>oe.d||!oe.d)&&(oe=ue,i&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,me)),ue.max-oe.d<=t||(q.push(new yc(ue.p.x-(F=ue.h/2),ue.p.y-F,F,e)),q.push(new yc(ue.p.x+F,ue.p.y-F,F,e)),q.push(new yc(ue.p.x-F,ue.p.y+F,F,e)),q.push(new yc(ue.p.x+F,ue.p.y+F,F,e)),me+=4)}return i&&(console.log("num probes: "+me),console.log("best distance: "+oe.d)),oe.p}function kp(e,t){return t.max-e.max}function yc(e,t,i,l){this.p=new R(e,t),this.h=i,this.d=function(p,d){for(var v=!1,S=1/0,A=0;A<d.length;A++)for(var C=d[A],L=0,F=C.length,q=F-1;L<F;q=L++){var W=C[L],ne=C[q];W.y>p.y!=ne.y>p.y&&p.x<(ne.x-W.x)*(p.y-W.y)/(ne.y-W.y)+W.x&&(v=!v),S=Math.min(S,Rl(p,W,ne))}return(v?1:-1)*Math.sqrt(S)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}Lu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Lu.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Lu.prototype.peek=function(){return this.data[0]},Lu.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},Lu.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),v=t[d],S=d+1;if(S<this.length&&i(t[S],v)<0&&(d=S,v=t[S]),i(v,p)>=0)break;t[e]=v,e=d}t[e]=p};var Lh=Number.POSITIVE_INFINITY;function ch(e,t){return t[1]!==Lh?function(i,l,p){var d=0,v=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":v=p-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,v]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var v=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-v;break;case"top-left":case"bottom-left":p=v;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function Rh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ip(e,t,i,l,p,d,v,S,A,C,L,F,q,W,ne){var oe=function(Ae,De,Fe,Ge,tt,xt,lt,Tt){for(var st=Ge.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,tr=[],Vt=0,yt=De.positionedLines;Vt<yt.length;Vt+=1)for(var lr=yt[Vt],Xt=0,Er=lr.positionedGlyphs;Xt<Er.length;Xt+=1){var zt=Er[Xt];if(zt.rect){var Ar=zt.rect||{},Di=4,sn=!0,xi=1,Li=0,Xi=(tt||Tt)&&zt.vertical,na=zt.metrics.advance*zt.scale/2;if(Tt&&De.verticalizable&&(Li=lr.lineOffset/2-(zt.imageName?-(24-zt.metrics.width*zt.scale)/2:24*(zt.scale-1))),zt.imageName){var Zn=lt[zt.imageName];sn=Zn.sdf,Di=1/(xi=Zn.pixelRatio)}var Ba=tt?[zt.x+na,zt.y]:[0,0],aa=tt?[0,0]:[zt.x+na+Fe[0],zt.y+Fe[1]-Li],Ha=[0,0];Xi&&(Ha=aa,aa=[0,0]);var wi=(zt.metrics.left-Di)*zt.scale-na+aa[0],oa=(-zt.metrics.top-Di)*zt.scale+aa[1],fr=wi+Ar.w*zt.scale/xi,yi=oa+Ar.h*zt.scale/xi,Xr=new R(wi,oa),_r=new R(fr,oa),fo=new R(wi,yi),Oa=new R(fr,yi);if(Xi){var $r=new R(-na,na- -17),xn=-Math.PI/2,ba=12-na,Or=new R(22-ba,-(zt.imageName?ba:0)),Sl=new(Function.prototype.bind.apply(R,[null].concat(Ha)));Xr._rotateAround(xn,$r)._add(Or)._add(Sl),_r._rotateAround(xn,$r)._add(Or)._add(Sl),fo._rotateAround(xn,$r)._add(Or)._add(Sl),Oa._rotateAround(xn,$r)._add(Or)._add(Sl)}if(st){var Yo=Math.sin(st),kl=Math.cos(st),mn=[kl,-Yo,Yo,kl];Xr._matMult(mn),_r._matMult(mn),fo._matMult(mn),Oa._matMult(mn)}var Ao=new R(0,0),Rs=new R(0,0);tr.push({tl:Xr,tr:_r,bl:fo,br:Oa,tex:Ar,writingMode:De.writingMode,glyphOffset:Ba,sectionIndex:zt.sectionIndex,isSDF:sn,pixelOffsetTL:Ao,pixelOffsetBR:Rs,minFontScaleX:0,minFontScaleY:0})}}return tr}(0,i,S,p,d,v,l,e.allowVerticalPlacement),me=e.textSizeData,ue=null;me.kind==="source"?(ue=[128*p.layout.get("text-size").evaluate(v,{})])[0]>32640&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):me.kind==="composite"&&((ue=[128*W.compositeTextSizes[0].evaluate(v,{},ne),128*W.compositeTextSizes[1].evaluate(v,{},ne)])[0]>32640||ue[1]>32640)&&Ot(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,oe,ue,S,d,v,C,t,A.lineStartIndex,A.lineLength,q,ne);for(var be=0,Se=L;be<Se.length;be+=1)F[Se[be]]=e.text.placedSymbolArray.length-1;return 4*oe.length}function Tp(e){for(var t in e)return e[t];return null}function Pf(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],v=d.length-1;v>=0;v--)if(l.dist(d[v])<i)return!0}else p[t]=[];return p[t].push(l),!1}var gc=Be.VectorTileFeature.types,Cf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hu(e,t,i,l,p,d,v,S,A,C,L,F,q){var W=S?Math.min(32640,Math.round(S[0])):0,ne=S?Math.min(32640,Math.round(S[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,v,(W<<1)+(A?1:0),ne,16*C,16*L,256*F,256*q)}function Ru(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Mf(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Ca(i[t].text))return!0;return!1}var Bu=function(e){this.layoutVertexArray=new Pc,this.indexArray=new ds,this.programConfigurations=e,this.segments=new Y,this.dynamicLayoutVertexArray=new Ll,this.opacityVertexArray=new Jl,this.placedSymbolArray=new u};Bu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Bu.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,bl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,hc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Cf,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},Bu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ht("SymbolBuffers",Bu);var hh=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new Y,this.collisionVertexArray=new _l};hh.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Du.members,!0)},hh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ht("CollisionBuffers",hh);var Qr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ko([]),this.placementViewportMatrix=ko([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ch(this.zoom,t["text-size"]),this.iconSizeData=Ch(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Wo[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Qr.prototype.createArrays=function(){this.text=new Bu(new Rt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Bu(new Rt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new E,this.lineVertexArray=new I,this.symbolInstances=new w},Qr.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var v=Rc[e.charAt(d)];v&&(t[v.charCodeAt(0)]=!0)}},Qr.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),v=p.get("text-field"),S=p.get("icon-image"),A=(v.value.kind!=="constant"||v.value.value instanceof oi&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),C=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,L=p.get("symbol-sort-key");if(this.features=[],A||C){for(var F=t.iconDependencies,q=t.glyphDependencies,W=t.availableImages,ne=new $t(this.zoom),oe=0,me=e;oe<me.length;oe+=1){var ue=me[oe],be=ue.feature,Se=ue.id,Ae=ue.index,De=ue.sourceLayerIndex,Fe=l._featureFilter.needGeometry,Ge=on(be,Fe);if(l._featureFilter.filter(ne,Ge,i)){Fe||(Ge.geometry=ui(be));var tt=void 0;if(A){var xt=l.getValueAndResolveTokens("text-field",Ge,i,W),lt=oi.factory(xt);Mf(lt)&&(this.hasRTLText=!0),(!this.hasRTLText||pl()==="unavailable"||this.hasRTLText&&Eo.isParsed())&&(tt=hp(lt,l,Ge))}var Tt=void 0;if(C){var st=l.getValueAndResolveTokens("icon-image",Ge,i,W);Tt=st instanceof di?st:di.fromString(st)}if(tt||Tt){var tr=this.sortFeaturesByKey?L.evaluate(Ge,{},i):void 0;if(this.features.push({id:Se,text:tt,icon:Tt,index:Ae,sourceLayerIndex:De,geometry:Ge.geometry,properties:be.properties,type:gc[be.type],sortKey:tr}),Tt&&(F[Tt.name]=!0),tt){var Vt=d.evaluate(Ge,{},i).join(","),yt=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Wo.vertical)>=0;for(var lr=0,Xt=tt.sections;lr<Xt.length;lr+=1){var Er=Xt[lr];if(Er.image)F[Er.image.name]=!0;else{var zt=js(tt.toString()),Ar=Er.fontStack||Vt,Di=q[Ar]=q[Ar]||{};this.calculateGlyphDependencies(Er.text,Di,yt,this.allowVerticalPlacement,zt)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(sn){var xi={},Li={},Xi=[],na=0;function Zn($r){Xi.push(sn[$r]),na++}function Ba($r,xn,ba){var Or=Li[$r];return delete Li[$r],Li[xn]=Or,Xi[Or].geometry[0].pop(),Xi[Or].geometry[0]=Xi[Or].geometry[0].concat(ba[0]),Or}function aa($r,xn,ba){var Or=xi[xn];return delete xi[xn],xi[$r]=Or,Xi[Or].geometry[0].shift(),Xi[Or].geometry[0]=ba[0].concat(Xi[Or].geometry[0]),Or}function Ha($r,xn,ba){var Or=ba?xn[0][xn[0].length-1]:xn[0][0];return $r+":"+Or.x+":"+Or.y}for(var wi=0;wi<sn.length;wi++){var oa=sn[wi],fr=oa.geometry,yi=oa.text?oa.text.toString():null;if(yi){var Xr=Ha(yi,fr),_r=Ha(yi,fr,!0);if(Xr in Li&&_r in xi&&Li[Xr]!==xi[_r]){var fo=aa(Xr,_r,fr),Oa=Ba(Xr,_r,Xi[fo].geometry);delete xi[Xr],delete Li[_r],Li[Ha(yi,Xi[Oa].geometry,!0)]=Oa,Xi[fo].geometry=null}else Xr in Li?Ba(Xr,_r,fr):_r in xi?aa(Xr,_r,fr):(Zn(wi),xi[Xr]=na-1,Li[_r]=na-1)}else Zn(wi)}return Xi.filter(function($r){return $r.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(sn,xi){return sn.sortKey-xi.sortKey})}},Qr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Qr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Qr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Qr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Qr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Qr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Qr.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},v=e.segment+1;v<t.length;v++)d[v]={x:t[v].x,y:t[v].y,tileUnitDistanceFromAnchor:l},v<t.length-1&&(l+=t[v+1].dist(t[v]));for(var S=e.segment||0;S>=0;S--)d[S]={x:t[S].x,y:t[S].y,tileUnitDistanceFromAnchor:p},S>0&&(p+=t[S-1].dist(t[S]));for(var A=0;A<t.length;A++){var C=d[A];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Qr.prototype.addSymbols=function(e,t,i,l,p,d,v,S,A,C,L,F){for(var q=e.indexArray,W=e.layoutVertexArray,ne=e.segments.prepareSegment(4*t.length,W,q,this.canOverlap?d.sortKey:void 0),oe=this.glyphOffsetArray.length,me=ne.vertexLength,ue=this.allowVerticalPlacement&&v===Wo.vertical?Math.PI/2:0,be=d.text&&d.text.sections,Se=0;Se<t.length;Se++){var Ae=t[Se],De=Ae.tl,Fe=Ae.tr,Ge=Ae.bl,tt=Ae.br,xt=Ae.tex,lt=Ae.pixelOffsetTL,Tt=Ae.pixelOffsetBR,st=Ae.minFontScaleX,tr=Ae.minFontScaleY,Vt=Ae.glyphOffset,yt=Ae.isSDF,lr=Ae.sectionIndex,Xt=ne.vertexLength,Er=Vt[1];hu(W,S.x,S.y,De.x,Er+De.y,xt.x,xt.y,i,yt,lt.x,lt.y,st,tr),hu(W,S.x,S.y,Fe.x,Er+Fe.y,xt.x+xt.w,xt.y,i,yt,Tt.x,lt.y,st,tr),hu(W,S.x,S.y,Ge.x,Er+Ge.y,xt.x,xt.y+xt.h,i,yt,lt.x,Tt.y,st,tr),hu(W,S.x,S.y,tt.x,Er+tt.y,xt.x+xt.w,xt.y+xt.h,i,yt,Tt.x,Tt.y,st,tr),Ru(e.dynamicLayoutVertexArray,S,ue),q.emplaceBack(Xt,Xt+1,Xt+2),q.emplaceBack(Xt+1,Xt+2,Xt+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),Se!==t.length-1&&lr===t[Se+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,d,d.index,{},F,be&&be[lr])}e.placedSymbolArray.emplaceBack(S.x,S.y,oe,this.glyphOffsetArray.length-oe,me,A,C,S.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],v,0,!1,0,L)},Qr.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},Qr.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,v){var S=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),A=S.vertexLength,C=p.layoutVertexArray,L=p.collisionVertexArray,F=v.anchorX,q=v.anchorY;this._addCollisionDebugVertex(C,L,d,F,q,new R(e,t)),this._addCollisionDebugVertex(C,L,d,F,q,new R(i,t)),this._addCollisionDebugVertex(C,L,d,F,q,new R(i,l)),this._addCollisionDebugVertex(C,L,d,F,q,new R(e,l)),S.vertexLength+=4;var W=p.indexArray;W.emplaceBack(A,A+1),W.emplaceBack(A+1,A+2),W.emplaceBack(A+2,A+3),W.emplaceBack(A+3,A),S.primitiveLength+=4},Qr.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Qr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hh(fs,pc.members,co),this.iconCollisionBox=new hh(fs,pc.members,co);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Qr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,v,S,A){for(var C={},L=t;L<i;L++){var F=e.get(L);C.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},C.textFeatureIndex=F.featureIndex;break}for(var q=l;q<p;q++){var W=e.get(q);C.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},C.verticalTextFeatureIndex=W.featureIndex;break}for(var ne=d;ne<v;ne++){var oe=e.get(ne);C.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},C.iconFeatureIndex=oe.featureIndex;break}for(var me=S;me<A;me++){var ue=e.get(me);C.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},C.verticalIconFeatureIndex=ue.featureIndex;break}return C},Qr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Qr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Qr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Qr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Qr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Qr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Qr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},Qr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var S=this.symbolInstances.get(v);l.push(0|Math.round(t*S.anchorX+i*S.anchorY)),p.push(S.featureIndex)}return d.sort(function(A,C){return l[A]-l[C]||p[C]-p[A]}),d},Qr.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Qr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,v,S){d>=0&&S.indexOf(d)===v&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ht("SymbolBucket",Qr,{omit:["layers","collisionBoxArray","features","compareText"]}),Qr.MAX_GLYPHS=65535,Qr.addDynamicAttributes=Ru;var Ap=new pn({"symbol-placement":new St(G.layout_symbol["symbol-placement"]),"symbol-spacing":new St(G.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new St(G.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ft(G.layout_symbol["symbol-sort-key"]),"symbol-z-order":new St(G.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new St(G.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new St(G.layout_symbol["icon-ignore-placement"]),"icon-optional":new St(G.layout_symbol["icon-optional"]),"icon-rotation-alignment":new St(G.layout_symbol["icon-rotation-alignment"]),"icon-size":new ft(G.layout_symbol["icon-size"]),"icon-text-fit":new St(G.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new St(G.layout_symbol["icon-text-fit-padding"]),"icon-image":new ft(G.layout_symbol["icon-image"]),"icon-rotate":new ft(G.layout_symbol["icon-rotate"]),"icon-padding":new St(G.layout_symbol["icon-padding"]),"icon-keep-upright":new St(G.layout_symbol["icon-keep-upright"]),"icon-offset":new ft(G.layout_symbol["icon-offset"]),"icon-anchor":new ft(G.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new St(G.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new St(G.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new St(G.layout_symbol["text-rotation-alignment"]),"text-field":new ft(G.layout_symbol["text-field"]),"text-font":new ft(G.layout_symbol["text-font"]),"text-size":new ft(G.layout_symbol["text-size"]),"text-max-width":new ft(G.layout_symbol["text-max-width"]),"text-line-height":new St(G.layout_symbol["text-line-height"]),"text-letter-spacing":new ft(G.layout_symbol["text-letter-spacing"]),"text-justify":new ft(G.layout_symbol["text-justify"]),"text-radial-offset":new ft(G.layout_symbol["text-radial-offset"]),"text-variable-anchor":new St(G.layout_symbol["text-variable-anchor"]),"text-anchor":new ft(G.layout_symbol["text-anchor"]),"text-max-angle":new St(G.layout_symbol["text-max-angle"]),"text-writing-mode":new St(G.layout_symbol["text-writing-mode"]),"text-rotate":new ft(G.layout_symbol["text-rotate"]),"text-padding":new St(G.layout_symbol["text-padding"]),"text-keep-upright":new St(G.layout_symbol["text-keep-upright"]),"text-transform":new ft(G.layout_symbol["text-transform"]),"text-offset":new ft(G.layout_symbol["text-offset"]),"text-allow-overlap":new St(G.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new St(G.layout_symbol["text-ignore-placement"]),"text-optional":new St(G.layout_symbol["text-optional"])}),Bh={paint:new pn({"icon-opacity":new ft(G.paint_symbol["icon-opacity"]),"icon-color":new ft(G.paint_symbol["icon-color"]),"icon-halo-color":new ft(G.paint_symbol["icon-halo-color"]),"icon-halo-width":new ft(G.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ft(G.paint_symbol["icon-halo-blur"]),"icon-translate":new St(G.paint_symbol["icon-translate"]),"icon-translate-anchor":new St(G.paint_symbol["icon-translate-anchor"]),"text-opacity":new ft(G.paint_symbol["text-opacity"]),"text-color":new ft(G.paint_symbol["text-color"],{runtimeType:Je,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ft(G.paint_symbol["text-halo-color"]),"text-halo-width":new ft(G.paint_symbol["text-halo-width"]),"text-halo-blur":new ft(G.paint_symbol["text-halo-blur"]),"text-translate":new St(G.paint_symbol["text-translate"]),"text-translate-anchor":new St(G.paint_symbol["text-translate-anchor"])}),layout:Ap},_c=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:nt,this.defaultValue=e};_c.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},_c.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},_c.prototype.outputDefined=function(){return!1},_c.prototype.serialize=function(){return null},ht("FormatSectionOverride",_c,{omit:["defaultValue"]});var jc=function(e){function t(i){e.call(this,i,Bh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],v=0,S=p;v<S.length;v+=1){var A=S[v];d.indexOf(A)<0&&d.push(A)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var v=this.layout.get(i).evaluate(l,{},p,d),S=this._unevaluatedLayout._values[i];return S.isDataDriven()||Lo(S.value)||!v?v:function(A,C){return C.replace(/{([^{}]+)}/g,function(L,F){return F in A?String(A[F]):""})}(l.properties,v)},t.prototype.createBucket=function(i){return new Qr(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=Bh.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,v=this.paint.get(p),S=new _c(v),A=new oo(S,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new Vs("source",A):new vo("composite",A,v.value.zoomStops,v.value._interpolationType),this.paint._values[p]=new Ui(v.property,d,v.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=Bh.paint.properties[l],v=!1,S=function(L){for(var F=0,q=L;F<q.length;F+=1)if(d.overrides&&d.overrides.hasOverride(q[F]))return void(v=!0)};if(p.value.kind==="constant"&&p.value.value instanceof oi)S(p.value.value.sections);else if(p.value.kind==="source"){var A=function(L){v||(L instanceof Fr&&Kr(L.value)===yr?S(L.value.sections):L instanceof zi?S(L.sections):L.eachChild(A))},C=p.value;C._styleExpression&&A(C._styleExpression.expression)}return v},t}(hs),Df={paint:new pn({"background-color":new St(G.paint_background["background-color"]),"background-pattern":new La(G.paint_background["background-pattern"]),"background-opacity":new St(G.paint_background["background-opacity"])})},zp=function(e){function t(i){e.call(this,i,Df)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(hs),zd={paint:new pn({"raster-opacity":new St(G.paint_raster["raster-opacity"]),"raster-hue-rotate":new St(G.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new St(G.paint_raster["raster-brightness-min"]),"raster-brightness-max":new St(G.paint_raster["raster-brightness-max"]),"raster-saturation":new St(G.paint_raster["raster-saturation"]),"raster-contrast":new St(G.paint_raster["raster-contrast"]),"raster-resampling":new St(G.paint_raster["raster-resampling"]),"raster-fade-duration":new St(G.paint_raster["raster-fade-duration"])})},Lf=function(e){function t(i){e.call(this,i,zd)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(hs),Pp=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(hs),Rf={circle:eu,heatmap:ru,hillshade:$u,fill:ac,"fill-extrusion":sc,line:su,symbol:jc,background:zp,raster:Lf},Cp=V.HTMLImageElement,vc=V.HTMLCanvasElement,Mp=V.HTMLVideoElement,Oh=V.ImageData,Fh=V.ImageBitmap,Ou=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};Ou.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),v=this.context,S=v.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof Cp||e instanceof vc||e instanceof Mp||e instanceof Oh||Fh&&e instanceof Fh?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,l,p,0,this.format,S.UNSIGNED_BYTE,e.data);else{var A=i||{x:0,y:0},C=A.x,L=A.y;e instanceof Cp||e instanceof vc||e instanceof Mp||e instanceof Oh||Fh&&e instanceof Fh?S.texSubImage2D(S.TEXTURE_2D,0,C,L,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,C,L,l,p,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Ou.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},Ou.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ou.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ph=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};ph.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},ph.prototype.remove=function(){delete this._channel,this._callback=function(){}};var bc=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Sr(["receive","process"],this),this.invoker=new ph(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Qt()?e:V};function Dp(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}bc.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var S=mr(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:lo(t,S)},S),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},bc.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else Qt()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},bc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},bc.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(an(t.error)):l(null,an(t.data)))}else{var p=!1,d=mr(this.globalScope)?void 0:[],v=t.hasCallback?function(L,F){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:L?lo(L):null,data:lo(F,d)},d)}:function(L){p=!0},S=null,A=an(t.data);if(this.parent[t.type])S=this.parent[t.type](t.sourceMapId,A,v);else if(this.parent.getWorkerSource){var C=t.type.split(".");S=this.parent.getWorkerSource(t.sourceMapId,C[0],A.source)[C[1]](A,v)}else v(new Error("Could not find function "+t.type));!p&&S&&S.cancel&&(this.cancelCallbacks[e]=S.cancel)}},bc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var dn=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};dn.prototype.setNorthEast=function(e){return this._ne=e instanceof Mi?new Mi(e.lng,e.lat):Mi.convert(e),this},dn.prototype.setSouthWest=function(e){return this._sw=e instanceof Mi?new Mi(e.lng,e.lat):Mi.convert(e),this},dn.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof Mi)t=e,i=e;else{if(!(e instanceof dn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(dn.convert(e)):this.extend(Mi.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new Mi(t.lng,t.lat),this._ne=new Mi(i.lng,i.lat)),this},dn.prototype.getCenter=function(){return new Mi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},dn.prototype.getSouthWest=function(){return this._sw},dn.prototype.getNorthEast=function(){return this._ne},dn.prototype.getNorthWest=function(){return new Mi(this.getWest(),this.getNorth())},dn.prototype.getSouthEast=function(){return new Mi(this.getEast(),this.getSouth())},dn.prototype.getWest=function(){return this._sw.lng},dn.prototype.getSouth=function(){return this._sw.lat},dn.prototype.getEast=function(){return this._ne.lng},dn.prototype.getNorth=function(){return this._ne.lat},dn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},dn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},dn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},dn.prototype.contains=function(e){var t=Mi.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},dn.convert=function(e){return!e||e instanceof dn?e:new dn(e)};var Mi=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Mi.prototype.wrap=function(){return new Mi(Ie(this.lng,-180,180),this.lat)},Mi.prototype.toArray=function(){return[this.lng,this.lat]},Mi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Mi.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},Mi.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new dn(new Mi(this.lng-i,this.lat-t),new Mi(this.lng+i,this.lat+t))},Mi.convert=function(e){if(e instanceof Mi)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Mi(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Mi(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Lp=2*Math.PI*63710088e-1;function Rp(e){return Lp*Math.cos(e*Math.PI/180)}function Bp(e){return(180+e)/360}function Fu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Op(e,t){return e/Rp(t)}function Kl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Ys=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};Ys.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Mi.convert(e);return new Ys(Bp(i.lng),Fu(i.lat),Op(t,i.lat))},Ys.prototype.toLngLat=function(){return new Mi(360*this.x-180,Kl(this.y))},Ys.prototype.toAltitude=function(){return this.z*Rp(Kl(this.y))},Ys.prototype.meterInMercatorCoordinateUnits=function(){return 1/Lp*(e=Kl(this.y),1/Math.cos(e*Math.PI/180));var e};var Vu=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=qc(0,e,e,t,i)};Vu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Vu.prototype.url=function(e,t){var i,l,p,d,v,S=(l=this.y,p=this.z,d=Dp(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),v=Dp(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+v[0]+","+v[1]),A=function(C,L,F){for(var q,W="",ne=C;ne>0;ne--)W+=(L&(q=1<<ne-1)?1:0)+(F&q?2:0);return W}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",A).replace("{bbox-epsg-3857}",S)},Vu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new R(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Vu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var fh=function(e,t){this.wrap=e,this.canonical=t,this.key=qc(e,t.z,t.z,t.x,t.y)},qn=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new Vu(i,+l,+p),this.key=qc(t,e,i,l,p)};function qc(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}qn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},qn.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new qn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qn(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},qn.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?qc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):qc(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},qn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},qn.prototype.children=function(e){if(this.overscaledZ>=e)return[new qn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new qn(t,this.wrap,t,i,l),new qn(t,this.wrap,t,i+1,l),new qn(t,this.wrap,t,i,l+1),new qn(t,this.wrap,t,i+1,l+1)]},qn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},qn.prototype.wrapped=function(){return new qn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},qn.prototype.unwrapTo=function(e){return new qn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},qn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},qn.prototype.toUnwrapped=function(){return new fh(this.wrap,this.canonical)},qn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},qn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Ys(e.x-this.wrap,e.y))},ht("CanonicalTileID",Vu),ht("OverscaledTileID",qn,{omit:["posMatrix"]});var wl=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Ot('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};wl.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},wl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},wl.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},wl.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},wl.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},wl.prototype.getPixels=function(){return new po({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},wl.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var S=-t*this.dim,A=-i*this.dim,C=d;C<v;C++)for(var L=l;L<p;L++)this.data[this._idx(L,C)]=e.data[this._idx(L+S,C+A)]},ht("DEMData",wl);var dh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};dh.prototype.encode=function(e){return this._stringToNumber[e]},dh.prototype.decode=function(e){return this._numberToString[e]};var mh=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Nu={geometry:{configurable:!0}};Nu.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Nu.geometry.set=function(e){this._geometry=e},mh.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(mh.prototype,Nu);var xc=function(){this.state={},this.stateChanges={},this.deletedStates={}};xc.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},Ve(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][v]===null&&delete this.deletedStates[e][l][v]},xc.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},xc.prototype.getState=function(e,t){var i=String(t),l=Ve({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},xc.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},xc.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),Ve(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var S={};if(this.deletedStates[v]===null)for(var A in this.state[v])S[A]={},this.state[v][A]={};else for(var C in this.deletedStates[v]){if(this.deletedStates[v][C]===null)this.state[v][C]={};else for(var L=0,F=Object.keys(this.deletedStates[v][C]);L<F.length;L+=1)delete this.state[v][C][F[L]];S[C]=this.state[v][C]}i[v]=i[v]||{},Ve(i[v],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var q in e)e[q].setFeatureState(i,t)};var El=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Oo(8192,16,0),this.grid3D=new Oo(8192,16,0),this.featureIndexArray=new N,this.promoteId=t};function Bf(e,t,i,l,p){return Jt(e,function(d,v){var S=t instanceof jo?t.get(v):null;return S&&S.evaluate?S.evaluate(i,l,p):S})}function Fp(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,v=e;d<v.length;d+=1){var S=v[d];t=Math.min(t,S.x),i=Math.min(i,S.y),l=Math.max(l,S.x),p=Math.max(p,S.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Vp(e,t){return t-e}El.prototype.insert=function(e,t,i,l,p,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var S=d?this.grid3D:this.grid,A=0;A<t.length;A++){for(var C=t[A],L=[1/0,1/0,-1/0,-1/0],F=0;F<C.length;F++){var q=C[F];L[0]=Math.min(L[0],q.x),L[1]=Math.min(L[1],q.y),L[2]=Math.max(L[2],q.x),L[3]=Math.max(L[3],q.y)}L[0]<8192&&L[1]<8192&&L[2]>=0&&L[3]>=0&&S.insert(v,L[0],L[1],L[2],L[3])}},El.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Be.VectorTile(new nh(this.rawTileData)).layers,this.sourceLayerCoder=new dh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},El.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,S=gu(d.filter),A=e.queryGeometry,C=e.queryPadding*v,L=Fp(A),F=this.grid.query(L.minX-C,L.minY-C,L.maxX+C,L.maxY+C),q=Fp(e.cameraQueryGeometry),W=this.grid3D.query(q.minX-C,q.minY-C,q.maxX+C,q.maxY+C,function(Ae,De,Fe,Ge){return function(tt,xt,lt,Tt,st){for(var tr=0,Vt=tt;tr<Vt.length;tr+=1){var yt=Vt[tr];if(xt<=yt.x&&lt<=yt.y&&Tt>=yt.x&&st>=yt.y)return!0}var lr=[new R(xt,lt),new R(xt,st),new R(Tt,st),new R(Tt,lt)];if(tt.length>2){for(var Xt=0,Er=lr;Xt<Er.length;Xt+=1)if(Go(tt,Er[Xt]))return!0}for(var zt=0;zt<tt.length-1;zt++)if(Ql(tt[zt],tt[zt+1],lr))return!0;return!1}(e.cameraQueryGeometry,Ae-C,De-C,Fe+C,Ge+C)}),ne=0,oe=W;ne<oe.length;ne+=1)F.push(oe[ne]);F.sort(Vp);for(var me,ue={},be=function(Ae){var De=F[Ae];if(De!==me){me=De;var Fe=p.featureIndexArray.get(De),Ge=null;p.loadMatchingFeature(ue,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,S,d.layers,d.availableImages,t,i,l,function(tt,xt,lt){return Ge||(Ge=ui(tt)),xt.queryIntersectsFeature(A,tt,lt,Ge,p.z,e.transform,v,e.pixelPosMatrix)})}},Se=0;Se<F.length;Se++)be(Se);return ue},El.prototype.loadMatchingFeature=function(e,t,i,l,p,d,v,S,A,C,L){var F=this.bucketLayerIDs[t];if(!d||function(tt,xt){for(var lt=0;lt<tt.length;lt++)if(xt.indexOf(tt[lt])>=0)return!0;return!1}(d,F)){var q=this.sourceLayerCoder.decode(i),W=this.vtLayers[q].feature(l);if(p.needGeometry){var ne=on(W,!0);if(!p.filter(new $t(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!p.filter(new $t(this.tileID.overscaledZ),W))return;for(var oe=this.getId(W,q),me=0;me<F.length;me++){var ue=F[me];if(!(d&&d.indexOf(ue)<0)){var be=S[ue];if(be){var Se={};oe!==void 0&&C&&(Se=C.getState(be.sourceLayer||"_geojsonTileLayer",oe));var Ae=Ve({},A[ue]);Ae.paint=Bf(Ae.paint,be.paint,W,Se,v),Ae.layout=Bf(Ae.layout,be.layout,W,Se,v);var De=!L||L(W,be,Se);if(De){var Fe=new mh(W,this.z,this.x,this.y,oe);Fe.layer=Ae;var Ge=e[ue];Ge===void 0&&(Ge=e[ue]=[]),Ge.push({featureIndex:l,feature:Fe,intersectionZ:De})}}}}}},El.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,v,S){var A={};this.loadVTLayers();for(var C=gu(p),L=0,F=e;L<F.length;L+=1)this.loadMatchingFeature(A,i,l,F[L],C,d,v,S,t);return A},El.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},El.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},ht("FeatureIndex",El,{omit:["rawTileData","sourceLayerCoder"]});var ia=function(e,t){this.tileID=e,this.uid=Lt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ia.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Zi.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},ia.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ia.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(C,L){var F={};if(!L)return F;for(var q=function(){var oe=ne[W],me=oe.layerIds.map(function(Se){return L.getLayer(Se)}).filter(Boolean);if(me.length!==0){oe.layers=me,oe.stateDependentLayerIds&&(oe.stateDependentLayers=oe.stateDependentLayerIds.map(function(Se){return me.filter(function(Ae){return Ae.id===Se})[0]}));for(var ue=0,be=me;ue<be.length;ue+=1)F[be[ue].id]=oe}},W=0,ne=C;W<ne.length;W+=1)q();return F}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof Qr){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof Qr&&v.hasRTLText){this.hasRTLText=!0,Eo.isLoading()||Eo.isLoaded()||pl()!=="deferred"||Ua();break}}for(var S in this.queryPadding=0,this.buckets){var A=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(S).queryRadius(A))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},ia.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ia.prototype.getBucket=function(e){return this.buckets[e.id]},ia.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ou(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ou(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},ia.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},ia.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,v,S,A,C){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:C,transform:S,params:v,queryPadding:this.queryPadding*A},e,t,i):{}},ia.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var v=gu(t&&t.filter),S=this.tileID.canonical,A=S.z,C=S.x,L=S.y,F={z:A,x:C,y:L},q=0;q<d.length;q++){var W=d.feature(q);if(v.needGeometry){var ne=on(W,!0);if(!v.filter(new $t(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!v.filter(new $t(this.tileID.overscaledZ),W))continue;var oe=i.getId(W,p),me=new mh(W,A,C,L,oe);me.tile=F,e.push(me)}}},ia.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ia.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ia.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=Wr(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ia.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ia.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],S=e[d];if(v&&S&&Object.keys(S).length!==0){p.update(S,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var A=t&&t.style&&t.style.getLayer(l);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(p)))}}}},ia.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ia.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Zi.now()},ia.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ia.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Zi.now()+e},ia.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},ia.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,v=t;d<v.length;d+=1)if(p[v[d]])return!0}}return!1};var pu=V.performance,wc=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},pu.mark(this._marks.start)};wc.prototype.finish=function(){pu.mark(this._marks.end);var e=pu.getEntriesByName(this._marks.measure);return e.length===0&&(pu.measure(this._marks.measure,this._marks.start,this._marks.end),e=pu.getEntriesByName(this._marks.measure),pu.clearMarks(this._marks.start),pu.clearMarks(this._marks.end),pu.clearMeasures(this._marks.measure)),e},o.Actor=bc,o.AlphaImage=bs,o.CanonicalTileID=Vu,o.CollisionBoxArray=s,o.Color=Ht,o.DEMData=wl,o.DataConstantProperty=St,o.DictionaryCoder=dh,o.EXTENT=8192,o.ErrorEvent=de,o.EvaluationParameters=$t,o.Event=ie,o.Evented=ge,o.FeatureIndex=El,o.FillBucket=Io,o.FillExtrusionBucket=To,o.ImageAtlas=Fc,o.ImagePosition=ah,o.LineBucket=jn,o.LngLat=Mi,o.LngLatBounds=dn,o.MercatorCoordinate=Ys,o.ONE_EM=24,o.OverscaledTileID=qn,o.Point=R,o.Point$1=R,o.Properties=pn,o.Protobuf=nh,o.RGBAImage=po,o.RequestManager=Ir,o.RequestPerformance=wc,o.ResourceType=Qo,o.SegmentVector=Y,o.SourceFeatureState=xc,o.StructArrayLayout1ui2=ys,o.StructArrayLayout2f1f2i16=gl,o.StructArrayLayout2i4=ml,o.StructArrayLayout3ui6=ds,o.StructArrayLayout4i8=ps,o.SymbolBucket=Qr,o.Texture=Ou,o.Tile=ia,o.Transitionable=ea,o.Uniform1f=We,o.Uniform1i=Ze,o.Uniform2f=He,o.Uniform3f=ut,o.Uniform4f=kt,o.UniformColor=dt,o.UniformMatrix4f=er,o.UnwrappedTileID=fh,o.ValidationError=te,o.WritingMode=Wo,o.ZoomHistory=cl,o.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},o.addDynamicAttributes=Ru,o.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(v,S){t(v,function(A,C){A&&(d=A),p[S]=C,--l==0&&i(d,p)})})},o.bezier=ee,o.bindAll=Sr,o.browser=Zi,o.cacheEntryPossiblyAdded=function(e){++Qa>kn&&(e.getActor().send("enforceCacheSizeLimit",_n),Qa=0)},o.clamp=ve,o.clearTileCache=function(e){var t=V.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},o.clipLine=Af,o.clone=function(e){var t=new dr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.clone$1=bt,o.clone$2=function(e){var t=new dr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.collisionCircleLayout=gf,o.config=Yt,o.create=function(){var e=new dr(16);return dr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},o.create$1=function(){var e=new dr(9);return dr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},o.create$2=function(){var e=new dr(4);return dr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},o.createCommonjsModule=T,o.createExpression=ya,o.createLayout=Fn,o.createStyleLayer=function(e){return e.type==="custom"?new Pp(e):new Rf[e.type](e)},o.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=i[0],S=i[1],A=i[2];return e[0]=p*A-d*S,e[1]=d*v-l*A,e[2]=l*S-p*v,e},o.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.ease=ze,o.emitValidationErrors=ul,o.endsWith=ur,o.enforceCacheSizeLimit=function(e){fi(),pi&&pi.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},o.evaluateSizeForFeature=Mh,o.evaluateSizeForZoom=kf,o.evaluateVariableOffset=ch,o.evented=Qu,o.extend=Ve,o.featureFilter=gu,o.filterObject=Et,o.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.getAnchorAlignment=uu,o.getAnchorJustification=Rh,o.getArrayBuffer=un,o.getImage=j,o.getJSON=function(e,t){return In(Ve(e,{type:"json"}),t)},o.getRTLTextPluginStatus=pl,o.getReferrer=ki,o.getVideo=function(e,t){var i,l,p=V.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var v=V.document.createElement("source");i=e[d],l=void 0,(l=V.document.createElement("a")).href=i,(l.protocol!==V.document.location.protocol||l.host!==V.document.location.host)&&(p.crossOrigin="Anonymous"),v.src=e[d],p.appendChild(v)}return{cancel:function(){}}},o.identity=ko,o.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],v=t[4],S=t[5],A=t[6],C=t[7],L=t[8],F=t[9],q=t[10],W=t[11],ne=t[12],oe=t[13],me=t[14],ue=t[15],be=i*S-l*v,Se=i*A-p*v,Ae=i*C-d*v,De=l*A-p*S,Fe=l*C-d*S,Ge=p*C-d*A,tt=L*oe-F*ne,xt=L*me-q*ne,lt=L*ue-W*ne,Tt=F*me-q*oe,st=F*ue-W*oe,tr=q*ue-W*me,Vt=be*tr-Se*st+Ae*Tt+De*lt-Fe*xt+Ge*tt;return Vt?(e[0]=(S*tr-A*st+C*Tt)*(Vt=1/Vt),e[1]=(p*st-l*tr-d*Tt)*Vt,e[2]=(oe*Ge-me*Fe+ue*De)*Vt,e[3]=(q*Fe-F*Ge-W*De)*Vt,e[4]=(A*lt-v*tr-C*xt)*Vt,e[5]=(i*tr-p*lt+d*xt)*Vt,e[6]=(me*Ae-ne*Ge-ue*Se)*Vt,e[7]=(L*Ge-q*Ae+W*Se)*Vt,e[8]=(v*st-S*lt+C*tt)*Vt,e[9]=(l*lt-i*st-d*tt)*Vt,e[10]=(ne*Fe-oe*Ae+ue*be)*Vt,e[11]=(F*Ae-L*Fe-W*be)*Vt,e[12]=(S*xt-v*Tt-A*tt)*Vt,e[13]=(i*Tt-l*xt+p*tt)*Vt,e[14]=(oe*Se-ne*De-me*be)*Vt,e[15]=(L*De-F*Se+q*be)*Vt,e):null},o.isChar=et,o.isMapboxURL=br,o.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},o.makeRequest=In,o.mapObject=Jt,o.mercatorXfromLng=Bp,o.mercatorYfromLat=Fu,o.mercatorZfromAltitude=Op,o.mul=Jc,o.multiply=Nn,o.mvt=Be,o.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},o.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},o.number=qr,o.offscreenCanvasSupported=ln,o.ortho=function(e,t,i,l,p,d,v){var S=1/(t-i),A=1/(l-p),C=1/(d-v);return e[0]=-2*S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*C,e[11]=0,e[12]=(t+i)*S,e[13]=(p+l)*A,e[14]=(v+d)*C,e[15]=1,e},o.parseGlyphPBF=function(e){return new nh(e).readFields(Td,[])},o.pbf=nh,o.performSymbolLayout=function(e,t,i,l,p,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var S=e.layers[0].layout,A=e.layers[0]._unevaluatedLayout._values,C={};if(e.textSizeData.kind==="composite"){var L=e.textSizeData,F=L.maxZoom;C.compositeTextSizes=[A["text-size"].possiblyEvaluate(new $t(L.minZoom),v),A["text-size"].possiblyEvaluate(new $t(F),v)]}if(e.iconSizeData.kind==="composite"){var q=e.iconSizeData,W=q.maxZoom;C.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new $t(q.minZoom),v),A["icon-size"].possiblyEvaluate(new $t(W),v)]}C.layoutTextSize=A["text-size"].possiblyEvaluate(new $t(e.zoom+1),v),C.layoutIconSize=A["icon-size"].possiblyEvaluate(new $t(e.zoom+1),v),C.textMaxSize=A["text-size"].possiblyEvaluate(new $t(18));for(var ne=24*S.get("text-line-height"),oe=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",me=S.get("text-keep-upright"),ue=S.get("text-size"),be=function(){var De=Ae[Se],Fe=S.get("text-font").evaluate(De,{},v).join(","),Ge=ue.evaluate(De,{},v),tt=C.layoutTextSize.evaluate(De,{},v),xt=C.layoutIconSize.evaluate(De,{},v),lt={horizontal:{},vertical:void 0},Tt=De.text,st=[0,0];if(Tt){var tr=Tt.toString(),Vt=24*S.get("text-letter-spacing").evaluate(De,{},v),yt=function(fr){for(var yi=0,Xr=fr;yi<Xr.length;yi+=1)if(_r=Xr[yi].charCodeAt(0),et.Arabic(_r)||et["Arabic Supplement"](_r)||et["Arabic Extended-A"](_r)||et["Arabic Presentation Forms-A"](_r)||et["Arabic Presentation Forms-B"](_r))return!1;var _r;return!0}(tr)?Vt:0,lr=S.get("text-anchor").evaluate(De,{},v),Xt=S.get("text-variable-anchor");if(!Xt){var Er=S.get("text-radial-offset").evaluate(De,{},v);st=Er?ch(lr,[24*Er,Lh]):S.get("text-offset").evaluate(De,{},v).map(function(fr){return 24*fr})}var zt=oe?"center":S.get("text-justify").evaluate(De,{},v),Ar=S.get("symbol-placement"),Di=Ar==="point"?24*S.get("text-max-width").evaluate(De,{},v):0,sn=function(){e.allowVerticalPlacement&&js(tr)&&(lt.vertical=Nc(Tt,t,i,p,Fe,Di,ne,lr,"left",yt,st,Wo.vertical,!0,Ar,tt,Ge))};if(!oe&&Xt){for(var xi=zt==="auto"?Xt.map(function(fr){return Rh(fr)}):[zt],Li=!1,Xi=0;Xi<xi.length;Xi++){var na=xi[Xi];if(!lt.horizontal[na])if(Li)lt.horizontal[na]=lt.horizontal[0];else{var Zn=Nc(Tt,t,i,p,Fe,Di,ne,"center",na,yt,st,Wo.horizontal,!1,Ar,tt,Ge);Zn&&(lt.horizontal[na]=Zn,Li=Zn.positionedLines.length===1)}}sn()}else{zt==="auto"&&(zt=Rh(lr));var Ba=Nc(Tt,t,i,p,Fe,Di,ne,lr,zt,yt,st,Wo.horizontal,!1,Ar,tt,Ge);Ba&&(lt.horizontal[zt]=Ba),sn(),js(tr)&&oe&&me&&(lt.vertical=Nc(Tt,t,i,p,Fe,Di,ne,lr,zt,yt,st,Wo.vertical,!1,Ar,tt,Ge))}}var aa=void 0,Ha=!1;if(De.icon&&De.icon.name){var wi=l[De.icon.name];wi&&(aa=function(fr,yi,Xr){var _r=uu(Xr),fo=yi[0]-fr.displaySize[0]*_r.horizontalAlign,Oa=yi[1]-fr.displaySize[1]*_r.verticalAlign;return{image:fr,top:Oa,bottom:Oa+fr.displaySize[1],left:fo,right:fo+fr.displaySize[0]}}(p[De.icon.name],S.get("icon-offset").evaluate(De,{},v),S.get("icon-anchor").evaluate(De,{},v)),Ha=wi.sdf,e.sdfIcons===void 0?e.sdfIcons=wi.sdf:e.sdfIcons!==wi.sdf&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(wi.pixelRatio!==e.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var oa=Tp(lt.horizontal)||lt.vertical;e.iconsInText=!!oa&&oa.iconsInText,(oa||aa)&&function(fr,yi,Xr,_r,fo,Oa,$r,xn,ba,Or,Sl){var Yo=Oa.textMaxSize.evaluate(yi,{});Yo===void 0&&(Yo=$r);var kl,mn=fr.layers[0].layout,Ao=mn.get("icon-offset").evaluate(yi,{},Sl),Rs=Tp(Xr.horizontal),Uu=$r/24,Ec=fr.tilePixelRatio*Uu,Sc=fr.tilePixelRatio*Yo/24,Il=fr.tilePixelRatio*xn,kc=fr.tilePixelRatio*mn.get("symbol-spacing"),yh=mn.get("text-padding")*fr.tilePixelRatio,Vh=mn.get("icon-padding")*fr.tilePixelRatio,Np=mn.get("text-max-angle")/180*Math.PI,Of=mn.get("text-rotation-alignment")==="map"&&mn.get("symbol-placement")!=="point",Ff=mn.get("icon-rotation-alignment")==="map"&&mn.get("symbol-placement")!=="point",Ic=mn.get("symbol-placement"),Up=kc/2,Nh=mn.get("icon-text-fit");_r&&Nh!=="none"&&(fr.allowVerticalPlacement&&Xr.vertical&&(kl=dc(_r,Xr.vertical,Nh,mn.get("icon-text-fit-padding"),Ao,Uu)),Rs&&(_r=dc(_r,Rs,Nh,mn.get("icon-text-fit-padding"),Ao,Uu)));var Zc=function(Mg,Wp){Wp.x<0||Wp.x>=8192||Wp.y<0||Wp.y>=8192||function(Gn,fu,Dg,Gc,Dd,_m,Zf,ju,Gf,Jp,Kf,Hf,Ld,vm,Yp,bm,xm,wm,Em,Sm,Qs,Xf,km,qu,Lg){var Im,_h,Gh,Kh,Hh,Xh=Gn.addToLineVertexArray(fu,Dg),Tm=0,Am=0,zm=0,Pm=0,Rd=-1,Bd=-1,Tc={},Cm=re(""),Od=0,Fd=0;if(ju._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Od=(Im=ju.layout.get("text-offset").evaluate(Qs,{},qu).map(function($p){return 24*$p}))[0],Fd=Im[1]):(Od=24*ju.layout.get("text-radial-offset").evaluate(Qs,{},qu),Fd=Lh),Gn.allowVerticalPlacement&&Gc.vertical){var Mm=ju.layout.get("text-rotate").evaluate(Qs,{},qu)+90;Kh=new uh(Gf,fu,Jp,Kf,Hf,Gc.vertical,Ld,vm,Yp,Mm),Zf&&(Hh=new uh(Gf,fu,Jp,Kf,Hf,Zf,xm,wm,Yp,Mm))}if(Dd){var Vd=ju.layout.get("icon-rotate").evaluate(Qs,{}),Dm=ju.layout.get("icon-text-fit")!=="none",Lm=Ep(Dd,Vd,km,Dm),Nd=Zf?Ep(Zf,Vd,km,Dm):void 0;Gh=new uh(Gf,fu,Jp,Kf,Hf,Dd,xm,wm,!1,Vd),Tm=4*Lm.length;var Rm=Gn.iconSizeData,Qp=null;Rm.kind==="source"?(Qp=[128*ju.layout.get("icon-size").evaluate(Qs,{})])[0]>32640&&Ot(Gn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Rm.kind==="composite"&&((Qp=[128*Xf.compositeIconSizes[0].evaluate(Qs,{},qu),128*Xf.compositeIconSizes[1].evaluate(Qs,{},qu)])[0]>32640||Qp[1]>32640)&&Ot(Gn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Gn.addSymbols(Gn.icon,Lm,Qp,Sm,Em,Qs,!1,fu,Xh.lineStartIndex,Xh.lineLength,-1,qu),Rd=Gn.icon.placedSymbolArray.length-1,Nd&&(Am=4*Nd.length,Gn.addSymbols(Gn.icon,Nd,Qp,Sm,Em,Qs,Wo.vertical,fu,Xh.lineStartIndex,Xh.lineLength,-1,qu),Bd=Gn.icon.placedSymbolArray.length-1)}for(var Bm in Gc.horizontal){var Wf=Gc.horizontal[Bm];if(!_h){Cm=re(Wf.text);var Rg=ju.layout.get("text-rotate").evaluate(Qs,{},qu);_h=new uh(Gf,fu,Jp,Kf,Hf,Wf,Ld,vm,Yp,Rg)}var Om=Wf.positionedLines.length===1;if(zm+=Ip(Gn,fu,Wf,_m,ju,Yp,Qs,bm,Xh,Gc.vertical?Wo.horizontal:Wo.horizontalOnly,Om?Object.keys(Gc.horizontal):[Bm],Tc,Rd,Xf,qu),Om)break}Gc.vertical&&(Pm+=Ip(Gn,fu,Gc.vertical,_m,ju,Yp,Qs,bm,Xh,Wo.vertical,["vertical"],Tc,Bd,Xf,qu));var Bg=_h?_h.boxStartIndex:Gn.collisionBoxArray.length,Og=_h?_h.boxEndIndex:Gn.collisionBoxArray.length,Fg=Kh?Kh.boxStartIndex:Gn.collisionBoxArray.length,Vg=Kh?Kh.boxEndIndex:Gn.collisionBoxArray.length,Ng=Gh?Gh.boxStartIndex:Gn.collisionBoxArray.length,Ug=Gh?Gh.boxEndIndex:Gn.collisionBoxArray.length,jg=Hh?Hh.boxStartIndex:Gn.collisionBoxArray.length,qg=Hh?Hh.boxEndIndex:Gn.collisionBoxArray.length,Zu=-1,Jf=function($p,Vm){return $p&&$p.circleDiameter?Math.max($p.circleDiameter,Vm):Vm};Zu=Jf(_h,Zu),Zu=Jf(Kh,Zu),Zu=Jf(Gh,Zu);var Fm=(Zu=Jf(Hh,Zu))>-1?1:0;Fm&&(Zu*=Lg/24),Gn.glyphOffsetArray.length>=Qr.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qs.sortKey!==void 0&&Gn.addToSortKeyRanges(Gn.symbolInstances.length,Qs.sortKey),Gn.symbolInstances.emplaceBack(fu.x,fu.y,Tc.right>=0?Tc.right:-1,Tc.center>=0?Tc.center:-1,Tc.left>=0?Tc.left:-1,Tc.vertical||-1,Rd,Bd,Cm,Bg,Og,Fg,Vg,Ng,Ug,jg,qg,Jp,zm,Pm,Tm,Am,Fm,0,Ld,Od,Fd,Zu)}(fr,Wp,Mg,Xr,_r,fo,kl,fr.layers[0],fr.collisionBoxArray,yi.index,yi.sourceLayerIndex,fr.index,Ec,yh,Of,ba,Il,Vh,Ff,Ao,yi,Oa,Or,Sl,$r)};if(Ic==="line")for(var Uh=0,Vf=Af(yi.geometry,0,0,8192,8192);Uh<Vf.length;Uh+=1)for(var Nf=Vf[Uh],jp=0,qp=wp(Nf,kc,Np,Xr.vertical||Rs,_r,24,Sc,fr.overscaling,8192);jp<qp.length;jp+=1){var Uf=qp[jp];Rs&&Pf(fr,Rs.text,Up,Uf)||Zc(Nf,Uf)}else if(Ic==="line-center")for(var Zp=0,Gp=yi.geometry;Zp<Gp.length;Zp+=1){var Kp=Gp[Zp];if(Kp.length>1){var jf=Tf(Kp,Np,Xr.vertical||Rs,_r,24,Sc);jf&&Zc(Kp,jf)}}else if(yi.type==="Polygon")for(var jh=0,qf=eh(yi.geometry,0);jh<qf.length;jh+=1){var qh=qf[jh],Hp=zf(qh,16);Zc(qh[0],new xl(Hp.x,Hp.y,0))}else if(yi.type==="LineString")for(var gh=0,Xp=yi.geometry;gh<Xp.length;gh+=1){var Zh=Xp[gh];Zc(Zh,new xl(Zh[0].x,Zh[0].y,0))}else if(yi.type==="Point")for(var Pd=0,ym=yi.geometry;Pd<ym.length;Pd+=1)for(var Cd=0,gm=ym[Pd];Cd<gm.length;Cd+=1){var Md=gm[Cd];Zc([Md],new xl(Md.x,Md.y,0))}}(e,De,lt,aa,l,C,tt,xt,st,Ha,v)},Se=0,Ae=e.features;Se<Ae.length;Se+=1)be();d&&e.generateCollisionDebugBuffers()},o.perspective=function(e,t,i,l,p){var d,v=1/Math.tan(t/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},o.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},o.plugin=Eo,o.polygonIntersectsPolygon=ho,o.postMapLoadEvent=Ya,o.postTurnstileEvent=la,o.potpack=gp,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=ht,o.registerForPluginStateChange=function(e){return e({pluginStatus:Ma,pluginURL:Da}),Qu.on("pluginStateChange",e),e},o.renderColorRamp=Ls,o.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],S=Math.sin(i),A=Math.cos(i);return e[0]=l*A+d*S,e[1]=p*A+v*S,e[2]=l*-S+d*A,e[3]=p*-S+v*A,e},o.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],v=t[5],S=t[6],A=t[7],C=t[8],L=t[9],F=t[10],q=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+C*l,e[5]=v*p+L*l,e[6]=S*p+F*l,e[7]=A*p+q*l,e[8]=C*p-d*l,e[9]=L*p-v*l,e[10]=F*p-S*l,e[11]=q*p-A*l,e},o.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],v=t[1],S=t[2],A=t[3],C=t[4],L=t[5],F=t[6],q=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+C*l,e[1]=v*p+L*l,e[2]=S*p+F*l,e[3]=A*p+q*l,e[4]=C*p-d*l,e[5]=L*p-v*l,e[6]=F*p-S*l,e[7]=q*p-A*l,e},o.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},o.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},o.setCacheLimits=function(e,t){_n=e,kn=t},o.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),Ma==="deferred"||Ma==="loading"||Ma==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Da=Zi.resolveURL(e),Ma="deferred",Na=t,qs(),i||Ua()},o.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},o.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},o.styleSpec=G,o.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},o.symbolSize=If,o.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},o.transformMat4=Ks,o.translate=function(e,t,i){var l,p,d,v,S,A,C,L,F,q,W,ne,oe=i[0],me=i[1],ue=i[2];return t===e?(e[12]=t[0]*oe+t[4]*me+t[8]*ue+t[12],e[13]=t[1]*oe+t[5]*me+t[9]*ue+t[13],e[14]=t[2]*oe+t[6]*me+t[10]*ue+t[14],e[15]=t[3]*oe+t[7]*me+t[11]*ue+t[15]):(p=t[1],d=t[2],v=t[3],S=t[4],A=t[5],C=t[6],L=t[7],F=t[8],q=t[9],W=t[10],ne=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=v,e[4]=S,e[5]=A,e[6]=C,e[7]=L,e[8]=F,e[9]=q,e[10]=W,e[11]=ne,e[12]=l*oe+S*me+F*ue+t[12],e[13]=p*oe+A*me+q*ue+t[13],e[14]=d*oe+C*me+W*ue+t[14],e[15]=v*oe+L*me+ne*ue+t[15]),e},o.triggerPluginCompletionEvent=Yu,o.uniqueId=Lt,o.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},o.validateLight=Pl,o.validateStyle=Bo,o.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},o.vectorTile=Be,o.version="1.13.2",o.warnOnce=Ot,o.webpSupported=Ai,o.window=V,o.wrap=Ie}),_(["./shared"],function(o){function T(O){var j=typeof O;if(j==="number"||j==="boolean"||j==="string"||O==null)return JSON.stringify(O);if(Array.isArray(O)){for(var Z="[",$=0,ie=O;$<ie.length;$+=1)Z+=T(ie[$])+",";return Z+"]"}for(var de=Object.keys(O).sort(),ge="{",G=0;G<de.length;G++)ge+=JSON.stringify(de[G])+":"+T(O[de[G]])+",";return ge+"}"}function k(O){for(var j="",Z=0,$=o.refProperties;Z<$.length;Z+=1)j+="/"+T(O[$[Z]]);return j}var B=function(O){this.keyCache={},O&&this.replace(O)};B.prototype.replace=function(O){this._layerConfigs={},this._layers={},this.update(O,[])},B.prototype.update=function(O,j){for(var Z=this,$=0,ie=O;$<ie.length;$+=1){var de=ie[$];this._layerConfigs[de.id]=de;var ge=this._layers[de.id]=o.createStyleLayer(de);ge._featureFilter=o.featureFilter(ge.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(var G=0,te=j;G<te.length;G+=1){var we=te[G];delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we]}this.familiesBySource={};for(var Ne=0,je=function(Ke,Je){for(var Ct={},$e=0;$e<Ke.length;$e++){var Gt=Je&&Je[Ke[$e].id]||k(Ke[$e]);Je&&(Je[Ke[$e].id]=Gt);var yr=Ct[Gt];yr||(yr=Ct[Gt]=[]),yr.push(Ke[$e])}var Bt=[];for(var qt in Ct)Bt.push(Ct[qt]);return Bt}(o.values(this._layerConfigs),this.keyCache);Ne<je.length;Ne+=1){var Te=je[Ne].map(function(Ke){return Z._layers[Ke.id]}),qe=Te[0];if(qe.visibility!=="none"){var it=qe.source||"",nt=this.familiesBySource[it];nt||(nt=this.familiesBySource[it]={});var Pe=qe.sourceLayer||"_geojsonTileLayer",Xe=nt[Pe];Xe||(Xe=nt[Pe]=[]),Xe.push(Te)}}};var R=function(O){var j={},Z=[];for(var $ in O){var ie=O[$],de=j[$]={};for(var ge in ie){var G=ie[+ge];if(G&&G.bitmap.width!==0&&G.bitmap.height!==0){var te={x:0,y:0,w:G.bitmap.width+2,h:G.bitmap.height+2};Z.push(te),de[ge]={rect:te,metrics:G.metrics}}}}var we=o.potpack(Z),Ne=new o.AlphaImage({width:we.w||1,height:we.h||1});for(var je in O){var Te=O[je];for(var qe in Te){var it=Te[+qe];if(it&&it.bitmap.width!==0&&it.bitmap.height!==0){var nt=j[je][qe].rect;o.AlphaImage.copy(it.bitmap,Ne,{x:0,y:0},{x:nt.x+1,y:nt.y+1},it.bitmap)}}}this.image=Ne,this.positions=j};o.register("GlyphAtlas",R);var U=function(O){this.tileID=new o.OverscaledTileID(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId};function V(O,j,Z){for(var $=new o.EvaluationParameters(j),ie=0,de=O;ie<de.length;ie+=1)de[ie].recalculate($,Z)}function le(O,j){var Z=o.getArrayBuffer(O.request,function($,ie,de,ge){$?j($):ie&&j(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(ie)),rawData:ie,cacheControl:de,expires:ge})});return function(){Z.cancel(),j()}}U.prototype.parse=function(O,j,Z,$,ie){var de=this;this.status="parsing",this.data=O,this.collisionBoxArray=new o.CollisionBoxArray;var ge=new o.DictionaryCoder(Object.keys(O.layers).sort()),G=new o.FeatureIndex(this.tileID,this.promoteId);G.bucketLayerIDs=[];var te,we,Ne,je,Te={},qe={featureIndex:G,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z},it=j.familiesBySource[this.source];for(var nt in it){var Pe=O.layers[nt];if(Pe){Pe.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+nt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Xe=ge.encode(nt),Ke=[],Je=0;Je<Pe.length;Je++){var Ct=Pe.feature(Je),$e=G.getId(Ct,nt);Ke.push({feature:Ct,id:$e,index:Je,sourceLayerIndex:Xe})}for(var Gt=0,yr=it[nt];Gt<yr.length;Gt+=1){var Bt=yr[Gt],qt=Bt[0];qt.minzoom&&this.zoom<Math.floor(qt.minzoom)||qt.maxzoom&&this.zoom>=qt.maxzoom||qt.visibility!=="none"&&(V(Bt,this.zoom,Z),(Te[qt.id]=qt.createBucket({index:G.bucketLayerIDs.length,layers:Bt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xe,sourceID:this.source})).populate(Ke,qe,this.tileID.canonical),G.bucketLayerIDs.push(Bt.map(function(ar){return ar.id})))}}}var Dt=o.mapObject(qe.glyphDependencies,function(ar){return Object.keys(ar).map(Number)});Object.keys(Dt).length?$.send("getGlyphs",{uid:this.uid,stacks:Dt},function(ar,Wt){te||(te=ar,we=Wt,Dr.call(de))}):we={};var gr=Object.keys(qe.iconDependencies);gr.length?$.send("getImages",{icons:gr,source:this.source,tileID:this.tileID,type:"icons"},function(ar,Wt){te||(te=ar,Ne=Wt,Dr.call(de))}):Ne={};var Ft=Object.keys(qe.patternDependencies);function Dr(){if(te)return ie(te);if(we&&Ne&&je){var ar=new R(we),Wt=new o.ImageAtlas(Ne,je);for(var Ht in Te){var Tr=Te[Ht];Tr instanceof o.SymbolBucket?(V(Tr.layers,this.zoom,Z),o.performSymbolLayout(Tr,we,ar.positions,Ne,Wt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Tr.hasPattern&&(Tr instanceof o.LineBucket||Tr instanceof o.FillBucket||Tr instanceof o.FillExtrusionBucket)&&(V(Tr.layers,this.zoom,Z),Tr.addFeatures(qe,this.tileID.canonical,Wt.patternPositions))}this.status="done",ie(null,{buckets:o.values(Te).filter(function(Tn){return!Tn.isEmpty()}),featureIndex:G,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ar.image,imageAtlas:Wt,glyphMap:this.returnDependencies?we:null,iconMap:this.returnDependencies?Ne:null,glyphPositions:this.returnDependencies?ar.positions:null})}}Ft.length?$.send("getImages",{icons:Ft,source:this.source,tileID:this.tileID,type:"patterns"},function(ar,Wt){te||(te=ar,je=Wt,Dr.call(de))}):je={},Dr.call(this)};var ee=function(O,j,Z,$){this.actor=O,this.layerIndex=j,this.availableImages=Z,this.loadVectorData=$||le,this.loading={},this.loaded={}};ee.prototype.loadTile=function(O,j){var Z=this,$=O.uid;this.loading||(this.loading={});var ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new o.RequestPerformance(O.request),de=this.loading[$]=new U(O);de.abort=this.loadVectorData(O,function(ge,G){if(delete Z.loading[$],ge||!G)return de.status="done",Z.loaded[$]=de,j(ge);var te=G.rawData,we={};G.expires&&(we.expires=G.expires),G.cacheControl&&(we.cacheControl=G.cacheControl);var Ne={};if(ie){var je=ie.finish();je&&(Ne.resourceTiming=JSON.parse(JSON.stringify(je)))}de.vectorTile=G.vectorTile,de.parse(G.vectorTile,Z.layerIndex,Z.availableImages,Z.actor,function(Te,qe){if(Te||!qe)return j(Te);j(null,o.extend({rawTileData:te.slice(0)},qe,we,Ne))}),Z.loaded=Z.loaded||{},Z.loaded[$]=de})},ee.prototype.reloadTile=function(O,j){var Z=this,$=this.loaded,ie=O.uid,de=this;if($&&$[ie]){var ge=$[ie];ge.showCollisionBoxes=O.showCollisionBoxes;var G=function(te,we){var Ne=ge.reloadCallback;Ne&&(delete ge.reloadCallback,ge.parse(ge.vectorTile,de.layerIndex,Z.availableImages,de.actor,Ne)),j(te,we)};ge.status==="parsing"?ge.reloadCallback=G:ge.status==="done"&&(ge.vectorTile?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}},ee.prototype.abortTile=function(O,j){var Z=this.loading,$=O.uid;Z&&Z[$]&&Z[$].abort&&(Z[$].abort(),delete Z[$]),j()},ee.prototype.removeTile=function(O,j){var Z=this.loaded,$=O.uid;Z&&Z[$]&&delete Z[$],j()};var ze=o.window.ImageBitmap,ve=function(){this.loaded={}};function Ie(O,j){if(O.length!==0){Ve(O[0],j);for(var Z=1;Z<O.length;Z++)Ve(O[Z],!j)}}function Ve(O,j){for(var Z=0,$=0,ie=O.length,de=ie-1;$<ie;de=$++)Z+=(O[$][0]-O[de][0])*(O[de][1]+O[$][1]);Z>=0!=!!j&&O.reverse()}ve.prototype.loadTile=function(O,j){var Z=O.uid,$=O.encoding,ie=O.rawImageData,de=ze&&ie instanceof ze?this.getImageData(ie):ie,ge=new o.DEMData(Z,de,$);this.loaded=this.loaded||{},this.loaded[Z]=ge,j(null,ge)},ve.prototype.getImageData=function(O){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(O.width,O.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=O.width,this.offscreenCanvas.height=O.height,this.offscreenCanvasContext.drawImage(O,0,0,O.width,O.height);var j=this.offscreenCanvasContext.getImageData(-1,-1,O.width+2,O.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:j.width,height:j.height},j.data)},ve.prototype.removeTile=function(O){var j=this.loaded,Z=O.uid;j&&j[Z]&&delete j[Z]};var At=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,Lt=function(O){this._feature=O,this.extent=o.EXTENT,this.type=O.type,this.properties=O.tags,"id"in O&&!isNaN(O.id)&&(this.id=parseInt(O.id,10))};Lt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var O=[],j=0,Z=this._feature.geometry;j<Z.length;j+=1){var $=Z[j];O.push([new o.Point$1($[0],$[1])])}return O}for(var ie=[],de=0,ge=this._feature.geometry;de<ge.length;de+=1){for(var G=[],te=0,we=ge[de];te<we.length;te+=1){var Ne=we[te];G.push(new o.Point$1(Ne[0],Ne[1]))}ie.push(G)}return ie},Lt.prototype.toGeoJSON=function(O,j,Z){return At.call(this,O,j,Z)};var ct=function(O){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=O.length,this._features=O};ct.prototype.feature=function(O){return new Lt(this._features[O])};var Qe=o.vectorTile.VectorTileFeature,Sr=ur;function ur(O,j){this.options=j||{},this.features=O,this.length=O.length}function Jt(O,j){this.id=typeof O.id=="number"?O.id:void 0,this.type=O.type,this.rawGeometry=O.type===1?[O.geometry]:O.geometry,this.properties=O.tags,this.extent=j||4096}ur.prototype.feature=function(O){return new Jt(this.features[O],this.options.extent)},Jt.prototype.loadGeometry=function(){var O=this.rawGeometry;this.geometry=[];for(var j=0;j<O.length;j++){for(var Z=O[j],$=[],ie=0;ie<Z.length;ie++)$.push(new o.Point$1(Z[ie][0],Z[ie][1]));this.geometry.push($)}return this.geometry},Jt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var O=this.geometry,j=1/0,Z=-1/0,$=1/0,ie=-1/0,de=0;de<O.length;de++)for(var ge=O[de],G=0;G<ge.length;G++){var te=ge[G];j=Math.min(j,te.x),Z=Math.max(Z,te.x),$=Math.min($,te.y),ie=Math.max(ie,te.y)}return[j,$,Z,ie]},Jt.prototype.toGeoJSON=Qe.prototype.toGeoJSON;var Et=vr,bt=Sr;function vr(O){var j=new o.pbf;return function(Z,$){for(var ie in Z.layers)$.writeMessage(3,Ot,Z.layers[ie])}(O,j),j.finish()}function Ot(O,j){var Z;j.writeVarintField(15,O.version||1),j.writeStringField(1,O.name||""),j.writeVarintField(5,O.extent||4096);var $={keys:[],values:[],keycache:{},valuecache:{}};for(Z=0;Z<O.length;Z++)$.feature=O.feature(Z),j.writeMessage(2,kr,$);var ie=$.keys;for(Z=0;Z<ie.length;Z++)j.writeStringField(3,ie[Z]);var de=$.values;for(Z=0;Z<de.length;Z++)j.writeMessage(4,mr,de[Z])}function kr(O,j){var Z=O.feature;Z.id!==void 0&&j.writeVarintField(1,Z.id),j.writeMessage(2,Ye,O),j.writeVarintField(3,Z.type),j.writeMessage(4,ri,Z)}function Ye(O,j){var Z=O.feature,$=O.keys,ie=O.values,de=O.keycache,ge=O.valuecache;for(var G in Z.properties){var te=de[G];te===void 0&&($.push(G),de[G]=te=$.length-1),j.writeVarint(te);var we=Z.properties[G],Ne=typeof we;Ne!=="string"&&Ne!=="boolean"&&Ne!=="number"&&(we=JSON.stringify(we));var je=Ne+":"+we,Te=ge[je];Te===void 0&&(ie.push(we),ge[je]=Te=ie.length-1),j.writeVarint(Te)}}function Qt(O,j){return(j<<3)+(7&O)}function Wr(O){return O<<1^O>>31}function ri(O,j){for(var Z=O.loadGeometry(),$=O.type,ie=0,de=0,ge=Z.length,G=0;G<ge;G++){var te=Z[G],we=1;$===1&&(we=te.length),j.writeVarint(Qt(1,we));for(var Ne=$===3?te.length-1:te.length,je=0;je<Ne;je++){je===1&&$!==1&&j.writeVarint(Qt(2,Ne-1));var Te=te[je].x-ie,qe=te[je].y-de;j.writeVarint(Wr(Te)),j.writeVarint(Wr(qe)),ie+=Te,de+=qe}$===3&&j.writeVarint(Qt(7,1))}}function mr(O,j){var Z=typeof O;Z==="string"?j.writeStringField(1,O):Z==="boolean"?j.writeBooleanField(7,O):Z==="number"&&(O%1!=0?j.writeDoubleField(3,O):O<0?j.writeSVarintField(6,O):j.writeVarintField(5,O))}function pt(O,j,Z,$){rt(O,Z,$),rt(j,2*Z,2*$),rt(j,2*Z+1,2*$+1)}function rt(O,j,Z){var $=O[j];O[j]=O[Z],O[Z]=$}function ir(O,j,Z,$){var ie=O-Z,de=j-$;return ie*ie+de*de}Et.fromVectorTileJs=vr,Et.fromGeojsonVt=function(O,j){j=j||{};var Z={};for(var $ in O)Z[$]=new Sr(O[$].features,j),Z[$].name=$,Z[$].version=j.version,Z[$].extent=j.extent;return vr({layers:Z})},Et.GeoJSONWrapper=bt;var Ri=function(O){return O[0]},Kn=function(O){return O[1]},Ti=function(O,j,Z,$,ie){j===void 0&&(j=Ri),Z===void 0&&(Z=Kn),$===void 0&&($=64),ie===void 0&&(ie=Float64Array),this.nodeSize=$,this.points=O;for(var de=O.length<65536?Uint16Array:Uint32Array,ge=this.ids=new de(O.length),G=this.coords=new ie(2*O.length),te=0;te<O.length;te++)ge[te]=te,G[2*te]=j(O[te]),G[2*te+1]=Z(O[te]);(function we(Ne,je,Te,qe,it,nt){if(!(it-qe<=Te)){var Pe=qe+it>>1;(function Xe(Ke,Je,Ct,$e,Gt,yr){for(;Gt>$e;){if(Gt-$e>600){var Bt=Gt-$e+1,qt=Ct-$e+1,Dt=Math.log(Bt),gr=.5*Math.exp(2*Dt/3),Ft=.5*Math.sqrt(Dt*gr*(Bt-gr)/Bt)*(qt-Bt/2<0?-1:1);Xe(Ke,Je,Ct,Math.max($e,Math.floor(Ct-qt*gr/Bt+Ft)),Math.min(Gt,Math.floor(Ct+(Bt-qt)*gr/Bt+Ft)),yr)}var Dr=Je[2*Ct+yr],ar=$e,Wt=Gt;for(pt(Ke,Je,$e,Ct),Je[2*Gt+yr]>Dr&&pt(Ke,Je,$e,Gt);ar<Wt;){for(pt(Ke,Je,ar,Wt),ar++,Wt--;Je[2*ar+yr]<Dr;)ar++;for(;Je[2*Wt+yr]>Dr;)Wt--}Je[2*$e+yr]===Dr?pt(Ke,Je,$e,Wt):pt(Ke,Je,++Wt,Gt),Wt<=Ct&&($e=Wt+1),Ct<=Wt&&(Gt=Wt-1)}})(Ne,je,Pe,qe,it,nt%2),we(Ne,je,Te,qe,Pe-1,nt+1),we(Ne,je,Te,Pe+1,it,nt+1)}})(ge,G,$,0,ge.length-1,0)};Ti.prototype.range=function(O,j,Z,$){return function(ie,de,ge,G,te,we,Ne){for(var je,Te,qe=[0,ie.length-1,0],it=[];qe.length;){var nt=qe.pop(),Pe=qe.pop(),Xe=qe.pop();if(Pe-Xe<=Ne)for(var Ke=Xe;Ke<=Pe;Ke++)Te=de[2*Ke+1],(je=de[2*Ke])>=ge&&je<=te&&Te>=G&&Te<=we&&it.push(ie[Ke]);else{var Je=Math.floor((Xe+Pe)/2);Te=de[2*Je+1],(je=de[2*Je])>=ge&&je<=te&&Te>=G&&Te<=we&&it.push(ie[Je]);var Ct=(nt+1)%2;(nt===0?ge<=je:G<=Te)&&(qe.push(Xe),qe.push(Je-1),qe.push(Ct)),(nt===0?te>=je:we>=Te)&&(qe.push(Je+1),qe.push(Pe),qe.push(Ct))}}return it}(this.ids,this.coords,O,j,Z,$,this.nodeSize)},Ti.prototype.within=function(O,j,Z){return function($,ie,de,ge,G,te){for(var we=[0,$.length-1,0],Ne=[],je=G*G;we.length;){var Te=we.pop(),qe=we.pop(),it=we.pop();if(qe-it<=te)for(var nt=it;nt<=qe;nt++)ir(ie[2*nt],ie[2*nt+1],de,ge)<=je&&Ne.push($[nt]);else{var Pe=Math.floor((it+qe)/2),Xe=ie[2*Pe],Ke=ie[2*Pe+1];ir(Xe,Ke,de,ge)<=je&&Ne.push($[Pe]);var Je=(Te+1)%2;(Te===0?de-G<=Xe:ge-G<=Ke)&&(we.push(it),we.push(Pe-1),we.push(Je)),(Te===0?de+G>=Xe:ge+G>=Ke)&&(we.push(Pe+1),we.push(qe),we.push(Je))}}return Ne}(this.ids,this.coords,O,j,Z,this.nodeSize)};var Ei={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(O){return O}},ii=function(O){this.options=ni(Object.create(Ei),O),this.trees=new Array(this.options.maxZoom+1)};function Zi(O,j,Z,$,ie){return{x:O,y:j,zoom:1/0,id:Z,parentId:-1,numPoints:$,properties:ie}}function Yt(O,j){var Z=O.geometry.coordinates,$=Z[1];return{x:It(Z[0]),y:Pt($),zoom:1/0,index:j,parentId:-1}}function Ai(O){return{type:"Feature",id:O.id,properties:Fa(O),geometry:{type:"Point",coordinates:[($=O.x,360*($-.5)),(j=O.y,Z=(180-360*j)*Math.PI/180,360*Math.atan(Math.exp(Z))/Math.PI-90)]}};var j,Z,$}function Fa(O){var j=O.numPoints,Z=j>=1e4?Math.round(j/1e3)+"k":j>=1e3?Math.round(j/100)/10+"k":j;return ni(ni({},O.properties),{cluster:!0,cluster_id:O.id,point_count:j,point_count_abbreviated:Z})}function It(O){return O/360+.5}function Pt(O){var j=Math.sin(O*Math.PI/180),Z=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return Z<0?0:Z>1?1:Z}function ni(O,j){for(var Z in j)O[Z]=j[Z];return O}function Ir(O){return O.x}function br(O){return O.y}function Ji(O,j,Z,$,ie,de){var ge=ie-Z,G=de-$;if(ge!==0||G!==0){var te=((O-Z)*ge+(j-$)*G)/(ge*ge+G*G);te>1?(Z=ie,$=de):te>0&&(Z+=ge*te,$+=G*te)}return(ge=O-Z)*ge+(G=j-$)*G}function ci(O,j,Z,$){var ie={id:O===void 0?null:O,type:j,geometry:Z,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(de){var ge=de.geometry,G=de.type;if(G==="Point"||G==="MultiPoint"||G==="LineString")Si(de,ge);else if(G==="Polygon"||G==="MultiLineString")for(var te=0;te<ge.length;te++)Si(de,ge[te]);else if(G==="MultiPolygon")for(te=0;te<ge.length;te++)for(var we=0;we<ge[te].length;we++)Si(de,ge[te][we])}(ie),ie}function Si(O,j){for(var Z=0;Z<j.length;Z+=3)O.minX=Math.min(O.minX,j[Z]),O.minY=Math.min(O.minY,j[Z+1]),O.maxX=Math.max(O.maxX,j[Z]),O.maxY=Math.max(O.maxY,j[Z+1])}function jr(O,j,Z,$){if(j.geometry){var ie=j.geometry.coordinates,de=j.geometry.type,ge=Math.pow(Z.tolerance/((1<<Z.maxZoom)*Z.extent),2),G=[],te=j.id;if(Z.promoteId?te=j.properties[Z.promoteId]:Z.generateId&&(te=$||0),de==="Point")cr(ie,G);else if(de==="MultiPoint")for(var we=0;we<ie.length;we++)cr(ie[we],G);else if(de==="LineString")nr(ie,G,ge,!1);else if(de==="MultiLineString"){if(Z.lineMetrics){for(we=0;we<ie.length;we++)nr(ie[we],G=[],ge,!1),O.push(ci(te,"LineString",G,j.properties));return}hi(ie,G,ge,!1)}else if(de==="Polygon")hi(ie,G,ge,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(we=0;we<j.geometry.geometries.length;we++)jr(O,{id:te,geometry:j.geometry.geometries[we],properties:j.properties},Z,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<ie.length;we++){var Ne=[];hi(ie[we],Ne,ge,!0),G.push(Ne)}}O.push(ci(te,de,G,j.properties))}}function cr(O,j){j.push(pi(O[0])),j.push(Yi(O[1])),j.push(0)}function nr(O,j,Z,$){for(var ie,de,ge=0,G=0;G<O.length;G++){var te=pi(O[G][0]),we=Yi(O[G][1]);j.push(te),j.push(we),j.push(0),G>0&&(ge+=$?(ie*we-te*de)/2:Math.sqrt(Math.pow(te-ie,2)+Math.pow(we-de,2))),ie=te,de=we}var Ne=j.length-3;j[2]=1,function je(Te,qe,it,nt){for(var Pe,Xe=nt,Ke=it-qe>>1,Je=it-qe,Ct=Te[qe],$e=Te[qe+1],Gt=Te[it],yr=Te[it+1],Bt=qe+3;Bt<it;Bt+=3){var qt=Ji(Te[Bt],Te[Bt+1],Ct,$e,Gt,yr);if(qt>Xe)Pe=Bt,Xe=qt;else if(qt===Xe){var Dt=Math.abs(Bt-Ke);Dt<Je&&(Pe=Bt,Je=Dt)}}Xe>nt&&(Pe-qe>3&&je(Te,qe,Pe,nt),Te[Pe+2]=Xe,it-Pe>3&&je(Te,Pe,it,nt))}(j,0,Ne,Z),j[Ne+2]=1,j.size=Math.abs(ge),j.start=0,j.end=j.size}function hi(O,j,Z,$){for(var ie=0;ie<O.length;ie++){var de=[];nr(O[ie],de,Z,$),j.push(de)}}function pi(O){return O/360+.5}function Yi(O){var j=Math.sin(O*Math.PI/180),Z=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return Z<0?0:Z>1?1:Z}function ai(O,j,Z,$,ie,de,ge,G){if($/=j,de>=(Z/=j)&&ge<$)return O;if(ge<Z||de>=$)return null;for(var te=[],we=0;we<O.length;we++){var Ne=O[we],je=Ne.geometry,Te=Ne.type,qe=ie===0?Ne.minX:Ne.minY,it=ie===0?Ne.maxX:Ne.maxY;if(qe>=Z&&it<$)te.push(Ne);else if(!(it<Z||qe>=$)){var nt=[];if(Te==="Point"||Te==="MultiPoint")Bi(je,nt,Z,$,ie);else if(Te==="LineString")la(je,nt,Z,$,ie,!1,G.lineMetrics);else if(Te==="MultiLineString")Ya(je,nt,Z,$,ie,!1);else if(Te==="Polygon")Ya(je,nt,Z,$,ie,!0);else if(Te==="MultiPolygon")for(var Pe=0;Pe<je.length;Pe++){var Xe=[];Ya(je[Pe],Xe,Z,$,ie,!0),Xe.length&&nt.push(Xe)}if(nt.length){if(G.lineMetrics&&Te==="LineString"){for(Pe=0;Pe<nt.length;Pe++)te.push(ci(Ne.id,Te,nt[Pe],Ne.tags));continue}Te!=="LineString"&&Te!=="MultiLineString"||(nt.length===1?(Te="LineString",nt=nt[0]):Te="MultiLineString"),Te!=="Point"&&Te!=="MultiPoint"||(Te=nt.length===3?"Point":"MultiPoint"),te.push(ci(Ne.id,Te,nt,Ne.tags))}}}return te.length?te:null}function Bi(O,j,Z,$,ie){for(var de=0;de<O.length;de+=3){var ge=O[de+ie];ge>=Z&&ge<=$&&(j.push(O[de]),j.push(O[de+1]),j.push(O[de+2]))}}function la(O,j,Z,$,ie,de,ge){for(var G,te,we=Ja(O),Ne=ie===0?kn:fi,je=O.start,Te=0;Te<O.length-3;Te+=3){var qe=O[Te],it=O[Te+1],nt=O[Te+2],Pe=O[Te+3],Xe=O[Te+4],Ke=ie===0?qe:it,Je=ie===0?Pe:Xe,Ct=!1;ge&&(G=Math.sqrt(Math.pow(qe-Pe,2)+Math.pow(it-Xe,2))),Ke<Z?Je>Z&&(te=Ne(we,qe,it,Pe,Xe,Z),ge&&(we.start=je+G*te)):Ke>$?Je<$&&(te=Ne(we,qe,it,Pe,Xe,$),ge&&(we.start=je+G*te)):_n(we,qe,it,nt),Je<Z&&Ke>=Z&&(te=Ne(we,qe,it,Pe,Xe,Z),Ct=!0),Je>$&&Ke<=$&&(te=Ne(we,qe,it,Pe,Xe,$),Ct=!0),!de&&Ct&&(ge&&(we.end=je+G*te),j.push(we),we=Ja(O)),ge&&(je+=G)}var $e=O.length-3;qe=O[$e],it=O[$e+1],nt=O[$e+2],(Ke=ie===0?qe:it)>=Z&&Ke<=$&&_n(we,qe,it,nt),$e=we.length-3,de&&$e>=3&&(we[$e]!==we[0]||we[$e+1]!==we[1])&&_n(we,we[0],we[1],we[2]),we.length&&j.push(we)}function Ja(O){var j=[];return j.size=O.size,j.start=O.start,j.end=O.end,j}function Ya(O,j,Z,$,ie,de){for(var ge=0;ge<O.length;ge++)la(O[ge],j,Z,$,ie,de,!1)}function _n(O,j,Z,$){O.push(j),O.push(Z),O.push($)}function kn(O,j,Z,$,ie,de){var ge=(de-j)/($-j);return O.push(de),O.push(Z+(ie-Z)*ge),O.push(1),ge}function fi(O,j,Z,$,ie,de){var ge=(de-Z)/(ie-Z);return O.push(j+($-j)*ge),O.push(de),O.push(1),ge}function Oi(O,j){for(var Z=[],$=0;$<O.length;$++){var ie,de=O[$],ge=de.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")ie=Qi(de.geometry,j);else if(ge==="MultiLineString"||ge==="Polygon"){ie=[];for(var G=0;G<de.geometry.length;G++)ie.push(Qi(de.geometry[G],j))}else if(ge==="MultiPolygon")for(ie=[],G=0;G<de.geometry.length;G++){for(var te=[],we=0;we<de.geometry[G].length;we++)te.push(Qi(de.geometry[G][we],j));ie.push(te)}Z.push(ci(de.id,ge,ie,de.tags))}return Z}function Qi(O,j){var Z=[];Z.size=O.size,O.start!==void 0&&(Z.start=O.start,Z.end=O.end);for(var $=0;$<O.length;$+=3)Z.push(O[$]+j,O[$+1],O[$+2]);return Z}function Qa(O,j){if(O.transformed)return O;var Z,$,ie,de=1<<O.z,ge=O.x,G=O.y;for(Z=0;Z<O.features.length;Z++){var te=O.features[Z],we=te.geometry,Ne=te.type;if(te.geometry=[],Ne===1)for($=0;$<we.length;$+=2)te.geometry.push(ln(we[$],we[$+1],j,de,ge,G));else for($=0;$<we.length;$++){var je=[];for(ie=0;ie<we[$].length;ie+=2)je.push(ln(we[$][ie],we[$][ie+1],j,de,ge,G));te.geometry.push(je)}}return O.transformed=!0,O}function ln(O,j,Z,$,ie,de){return[Math.round(Z*(O*$-ie)),Math.round(Z*(j*$-de))]}function Qo(O,j,Z,$,ie){for(var de=j===ie.maxZoom?0:ie.tolerance/((1<<j)*ie.extent),ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Z,y:$,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},G=0;G<O.length;G++){ge.numFeatures++,$i(ge,O[G],de,ie);var te=O[G].minX,we=O[G].minY,Ne=O[G].maxX,je=O[G].maxY;te<ge.minX&&(ge.minX=te),we<ge.minY&&(ge.minY=we),Ne>ge.maxX&&(ge.maxX=Ne),je>ge.maxY&&(ge.maxY=je)}return ge}function $i(O,j,Z,$){var ie=j.geometry,de=j.type,ge=[];if(de==="Point"||de==="MultiPoint")for(var G=0;G<ie.length;G+=3)ge.push(ie[G]),ge.push(ie[G+1]),O.numPoints++,O.numSimplified++;else if(de==="LineString")ki(ge,ie,O,Z,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(G=0;G<ie.length;G++)ki(ge,ie[G],O,Z,de==="Polygon",G===0);else if(de==="MultiPolygon")for(var te=0;te<ie.length;te++){var we=ie[te];for(G=0;G<we.length;G++)ki(ge,we[G],O,Z,!0,G===0)}if(ge.length){var Ne=j.tags||null;if(de==="LineString"&&$.lineMetrics){for(var je in Ne={},j.tags)Ne[je]=j.tags[je];Ne.mapbox_clip_start=ie.start/ie.size,Ne.mapbox_clip_end=ie.end/ie.size}var Te={geometry:ge,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:Ne};j.id!==null&&(Te.id=j.id),O.features.push(Te)}}function ki(O,j,Z,$,ie,de){var ge=$*$;if($>0&&j.size<(ie?ge:$))Z.numPoints+=j.length/3;else{for(var G=[],te=0;te<j.length;te+=3)($===0||j[te+2]>ge)&&(Z.numSimplified++,G.push(j[te]),G.push(j[te+1])),Z.numPoints++;ie&&function(we,Ne){for(var je=0,Te=0,qe=we.length,it=qe-2;Te<qe;it=Te,Te+=2)je+=(we[Te]-we[it])*(we[Te+1]+we[it+1]);if(je>0===Ne)for(Te=0,qe=we.length;Te<qe/2;Te+=2){var nt=we[Te],Pe=we[Te+1];we[Te]=we[qe-2-Te],we[Te+1]=we[qe-1-Te],we[qe-2-Te]=nt,we[qe-1-Te]=Pe}}(G,de),O.push(G)}}function Jr(O,j){var Z=(j=this.options=function(ie,de){for(var ge in de)ie[ge]=de[ge];return ie}(Object.create(this.options),j)).debug;if(Z&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var $=function(ie,de){var ge=[];if(ie.type==="FeatureCollection")for(var G=0;G<ie.features.length;G++)jr(ge,ie.features[G],de,G);else jr(ge,ie.type==="Feature"?ie:{geometry:ie},de);return ge}(O,j);this.tiles={},this.tileCoords=[],Z&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),($=function(ie,de){var ge=de.buffer/de.extent,G=ie,te=ai(ie,1,-1-ge,ge,0,-1,2,de),we=ai(ie,1,1-ge,2+ge,0,-1,2,de);return(te||we)&&(G=ai(ie,1,-ge,1+ge,0,-1,2,de)||[],te&&(G=Oi(te,1).concat(G)),we&&(G=G.concat(Oi(we,-1)))),G}($,j)).length&&this.splitTile($,0,0,0),Z&&($.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Gi(O,j,Z){return 32*((1<<O)*Z+j)+O}function In(O,j){var Z=O.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);var $=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!$)return j(null,null);var ie=new ct($.features),de=Et(ie);de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),j(null,{vectorTile:ie,rawData:de.buffer})}ii.prototype.load=function(O){var j=this.options,Z=j.log,$=j.minZoom,ie=j.maxZoom,de=j.nodeSize;Z&&console.time("total time");var ge="prepare "+O.length+" points";Z&&console.time(ge),this.points=O;for(var G=[],te=0;te<O.length;te++)O[te].geometry&&G.push(Yt(O[te],te));this.trees[ie+1]=new Ti(G,Ir,br,de,Float32Array),Z&&console.timeEnd(ge);for(var we=ie;we>=$;we--){var Ne=+Date.now();G=this._cluster(G,we),this.trees[we]=new Ti(G,Ir,br,de,Float32Array),Z&&console.log("z%d: %d clusters in %dms",we,G.length,+Date.now()-Ne)}return Z&&console.timeEnd("total time"),this},ii.prototype.getClusters=function(O,j){var Z=((O[0]+180)%360+360)%360-180,$=Math.max(-90,Math.min(90,O[1])),ie=O[2]===180?180:((O[2]+180)%360+360)%360-180,de=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)Z=-180,ie=180;else if(Z>ie){var ge=this.getClusters([Z,$,180,de],j),G=this.getClusters([-180,$,ie,de],j);return ge.concat(G)}for(var te=this.trees[this._limitZoom(j)],we=[],Ne=0,je=te.range(It(Z),Pt(de),It(ie),Pt($));Ne<je.length;Ne+=1){var Te=te.points[je[Ne]];we.push(Te.numPoints?Ai(Te):this.points[Te.index])}return we},ii.prototype.getChildren=function(O){var j=this._getOriginId(O),Z=this._getOriginZoom(O),$="No cluster with the specified id.",ie=this.trees[Z];if(!ie)throw new Error($);var de=ie.points[j];if(!de)throw new Error($);for(var ge=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),G=[],te=0,we=ie.within(de.x,de.y,ge);te<we.length;te+=1){var Ne=ie.points[we[te]];Ne.parentId===O&&G.push(Ne.numPoints?Ai(Ne):this.points[Ne.index])}if(G.length===0)throw new Error($);return G},ii.prototype.getLeaves=function(O,j,Z){var $=[];return this._appendLeaves($,O,j=j||10,Z=Z||0,0),$},ii.prototype.getTile=function(O,j,Z){var $=this.trees[this._limitZoom(O)],ie=Math.pow(2,O),de=this.options,ge=de.radius/de.extent,G=(Z-ge)/ie,te=(Z+1+ge)/ie,we={features:[]};return this._addTileFeatures($.range((j-ge)/ie,G,(j+1+ge)/ie,te),$.points,j,Z,ie,we),j===0&&this._addTileFeatures($.range(1-ge/ie,G,1,te),$.points,ie,Z,ie,we),j===ie-1&&this._addTileFeatures($.range(0,G,ge/ie,te),$.points,-1,Z,ie,we),we.features.length?we:null},ii.prototype.getClusterExpansionZoom=function(O){for(var j=this._getOriginZoom(O)-1;j<=this.options.maxZoom;){var Z=this.getChildren(O);if(j++,Z.length!==1)break;O=Z[0].properties.cluster_id}return j},ii.prototype._appendLeaves=function(O,j,Z,$,ie){for(var de=0,ge=this.getChildren(j);de<ge.length;de+=1){var G=ge[de],te=G.properties;if(te&&te.cluster?ie+te.point_count<=$?ie+=te.point_count:ie=this._appendLeaves(O,te.cluster_id,Z,$,ie):ie<$?ie++:O.push(G),O.length===Z)break}return ie},ii.prototype._addTileFeatures=function(O,j,Z,$,ie,de){for(var ge=0,G=O;ge<G.length;ge+=1){var te=j[G[ge]],we=te.numPoints,Ne={type:1,geometry:[[Math.round(this.options.extent*(te.x*ie-Z)),Math.round(this.options.extent*(te.y*ie-$))]],tags:we?Fa(te):this.points[te.index].properties},je=void 0;we?je=te.id:this.options.generateId?je=te.index:this.points[te.index].id&&(je=this.points[te.index].id),je!==void 0&&(Ne.id=je),de.features.push(Ne)}},ii.prototype._limitZoom=function(O){return Math.max(this.options.minZoom,Math.min(+O,this.options.maxZoom+1))},ii.prototype._cluster=function(O,j){for(var Z=[],$=this.options,ie=$.reduce,de=$.minPoints,ge=$.radius/($.extent*Math.pow(2,j)),G=0;G<O.length;G++){var te=O[G];if(!(te.zoom<=j)){te.zoom=j;for(var we=this.trees[j+1],Ne=we.within(te.x,te.y,ge),je=te.numPoints||1,Te=je,qe=0,it=Ne;qe<it.length;qe+=1){var nt=we.points[it[qe]];nt.zoom>j&&(Te+=nt.numPoints||1)}if(Te>=de){for(var Pe=te.x*je,Xe=te.y*je,Ke=ie&&je>1?this._map(te,!0):null,Je=(G<<5)+(j+1)+this.points.length,Ct=0,$e=Ne;Ct<$e.length;Ct+=1){var Gt=we.points[$e[Ct]];if(!(Gt.zoom<=j)){Gt.zoom=j;var yr=Gt.numPoints||1;Pe+=Gt.x*yr,Xe+=Gt.y*yr,Gt.parentId=Je,ie&&(Ke||(Ke=this._map(te,!0)),ie(Ke,this._map(Gt)))}}te.parentId=Je,Z.push(Zi(Pe/Te,Xe/Te,Je,Te,Ke))}else if(Z.push(te),Te>1)for(var Bt=0,qt=Ne;Bt<qt.length;Bt+=1){var Dt=we.points[qt[Bt]];Dt.zoom<=j||(Dt.zoom=j,Z.push(Dt))}}}return Z},ii.prototype._getOriginId=function(O){return O-this.points.length>>5},ii.prototype._getOriginZoom=function(O){return(O-this.points.length)%32},ii.prototype._map=function(O,j){if(O.numPoints)return j?ni({},O.properties):O.properties;var Z=this.points[O.index].properties,$=this.options.map(Z);return j&&$===Z?ni({},$):$},Jr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Jr.prototype.splitTile=function(O,j,Z,$,ie,de,ge){for(var G=[O,j,Z,$],te=this.options,we=te.debug;G.length;){$=G.pop(),Z=G.pop(),j=G.pop(),O=G.pop();var Ne=1<<j,je=Gi(j,Z,$),Te=this.tiles[je];if(!Te&&(we>1&&console.time("creation"),Te=this.tiles[je]=Qo(O,j,Z,$,te),this.tileCoords.push({z:j,x:Z,y:$}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,Z,$,Te.numFeatures,Te.numPoints,Te.numSimplified),console.timeEnd("creation"));var qe="z"+j;this.stats[qe]=(this.stats[qe]||0)+1,this.total++}if(Te.source=O,ie){if(j===te.maxZoom||j===ie)continue;var it=1<<ie-j;if(Z!==Math.floor(de/it)||$!==Math.floor(ge/it))continue}else if(j===te.indexMaxZoom||Te.numPoints<=te.indexMaxPoints)continue;if(Te.source=null,O.length!==0){we>1&&console.time("clipping");var nt,Pe,Xe,Ke,Je,Ct,$e=.5*te.buffer/te.extent,Gt=.5-$e,yr=.5+$e,Bt=1+$e;nt=Pe=Xe=Ke=null,Je=ai(O,Ne,Z-$e,Z+yr,0,Te.minX,Te.maxX,te),Ct=ai(O,Ne,Z+Gt,Z+Bt,0,Te.minX,Te.maxX,te),O=null,Je&&(nt=ai(Je,Ne,$-$e,$+yr,1,Te.minY,Te.maxY,te),Pe=ai(Je,Ne,$+Gt,$+Bt,1,Te.minY,Te.maxY,te),Je=null),Ct&&(Xe=ai(Ct,Ne,$-$e,$+yr,1,Te.minY,Te.maxY,te),Ke=ai(Ct,Ne,$+Gt,$+Bt,1,Te.minY,Te.maxY,te),Ct=null),we>1&&console.timeEnd("clipping"),G.push(nt||[],j+1,2*Z,2*$),G.push(Pe||[],j+1,2*Z,2*$+1),G.push(Xe||[],j+1,2*Z+1,2*$),G.push(Ke||[],j+1,2*Z+1,2*$+1)}}},Jr.prototype.getTile=function(O,j,Z){var $=this.options,ie=$.extent,de=$.debug;if(O<0||O>24)return null;var ge=1<<O,G=Gi(O,j=(j%ge+ge)%ge,Z);if(this.tiles[G])return Qa(this.tiles[G],ie);de>1&&console.log("drilling down to z%d-%d-%d",O,j,Z);for(var te,we=O,Ne=j,je=Z;!te&&we>0;)we--,Ne=Math.floor(Ne/2),je=Math.floor(je/2),te=this.tiles[Gi(we,Ne,je)];return te&&te.source?(de>1&&console.log("found parent tile z%d-%d-%d",we,Ne,je),de>1&&console.time("drilling down"),this.splitTile(te.source,we,Ne,je,O,j,Z),de>1&&console.timeEnd("drilling down"),this.tiles[G]?Qa(this.tiles[G],ie):null):null};var un=function(O){function j(Z,$,ie,de){O.call(this,Z,$,ie,In),de&&(this.loadGeoJSON=de)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.loadData=function(Z,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=$,this._pendingLoadDataParams=Z,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},j.prototype._loadData=function(){var Z=this;if(this._pendingCallback&&this._pendingLoadDataParams){var $=this._pendingCallback,ie=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var de=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new o.RequestPerformance(ie.request);this.loadGeoJSON(ie,function(ge,G){if(ge||!G)return $(ge);if(typeof G!="object")return $(new Error("Input data given to '"+ie.source+"' is not a valid GeoJSON object."));(function Te(qe,it){var nt,Pe=qe&&qe.type;if(Pe==="FeatureCollection")for(nt=0;nt<qe.features.length;nt++)Te(qe.features[nt],it);else if(Pe==="GeometryCollection")for(nt=0;nt<qe.geometries.length;nt++)Te(qe.geometries[nt],it);else if(Pe==="Feature")Te(qe.geometry,it);else if(Pe==="Polygon")Ie(qe.coordinates,it);else if(Pe==="MultiPolygon")for(nt=0;nt<qe.coordinates.length;nt++)Ie(qe.coordinates[nt],it);return qe})(G,!0);try{if(ie.filter){var te=o.createExpression(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(function(Te){return Te.key+": "+Te.message}).join(", "));var we=G.features.filter(function(Te){return te.value.evaluate({zoom:0},Te)});G={type:"FeatureCollection",features:we}}Z._geoJSONIndex=ie.cluster?new ii(function(Te){var qe=Te.superclusterOptions,it=Te.clusterProperties;if(!it||!qe)return qe;for(var nt={},Pe={},Xe={accumulated:null,zoom:0},Ke={properties:null},Je=Object.keys(it),Ct=0,$e=Je;Ct<$e.length;Ct+=1){var Gt=$e[Ct],yr=it[Gt],Bt=yr[0],qt=o.createExpression(yr[1]),Dt=o.createExpression(typeof Bt=="string"?[Bt,["accumulated"],["get",Gt]]:Bt);nt[Gt]=qt.value,Pe[Gt]=Dt.value}return qe.map=function(gr){Ke.properties=gr;for(var Ft={},Dr=0,ar=Je;Dr<ar.length;Dr+=1){var Wt=ar[Dr];Ft[Wt]=nt[Wt].evaluate(Xe,Ke)}return Ft},qe.reduce=function(gr,Ft){Ke.properties=Ft;for(var Dr=0,ar=Je;Dr<ar.length;Dr+=1){var Wt=ar[Dr];Xe.accumulated=gr[Wt],gr[Wt]=Pe[Wt].evaluate(Xe,Ke)}},qe}(ie)).load(G.features):function(Te,qe){return new Jr(Te,qe)}(G,ie.geojsonVtOptions)}catch(Te){return $(Te)}Z.loaded={};var Ne={};if(de){var je=de.finish();je&&(Ne.resourceTiming={},Ne.resourceTiming[ie.source]=JSON.parse(JSON.stringify(je)))}$(null,Ne)})}},j.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},j.prototype.reloadTile=function(Z,$){var ie=this.loaded;return ie&&ie[Z.uid]?O.prototype.reloadTile.call(this,Z,$):this.loadTile(Z,$)},j.prototype.loadGeoJSON=function(Z,$){if(Z.request)o.getJSON(Z.request,$);else{if(typeof Z.data!="string")return $(new Error("Input data given to '"+Z.source+"' is not a valid GeoJSON object."));try{return $(null,JSON.parse(Z.data))}catch{return $(new Error("Input data given to '"+Z.source+"' is not a valid GeoJSON object."))}}},j.prototype.removeSource=function(Z,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()},j.prototype.getClusterExpansionZoom=function(Z,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId))}catch(ie){$(ie)}},j.prototype.getClusterChildren=function(Z,$){try{$(null,this._geoJSONIndex.getChildren(Z.clusterId))}catch(ie){$(ie)}},j.prototype.getClusterLeaves=function(Z,$){try{$(null,this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset))}catch(ie){$(ie)}},j}(ee),Gr=function(O){var j=this;this.self=O,this.actor=new o.Actor(O,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ee,geojson:un},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Z,$){if(j.workerSourceTypes[Z])throw new Error('Worker source with name "'+Z+'" already registered.');j.workerSourceTypes[Z]=$},this.self.registerRTLTextPlugin=function(Z){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Z.applyArabicShaping,o.plugin.processBidirectionalText=Z.processBidirectionalText,o.plugin.processStyledBidirectionalText=Z.processStyledBidirectionalText}};return Gr.prototype.setReferrer=function(O,j){this.referrer=j},Gr.prototype.setImages=function(O,j,Z){for(var $ in this.availableImages[O]=j,this.workerSources[O]){var ie=this.workerSources[O][$];for(var de in ie)ie[de].availableImages=j}Z()},Gr.prototype.setLayers=function(O,j,Z){this.getLayerIndex(O).replace(j),Z()},Gr.prototype.updateLayers=function(O,j,Z){this.getLayerIndex(O).update(j.layers,j.removedIds),Z()},Gr.prototype.loadTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).loadTile(j,Z)},Gr.prototype.loadDEMTile=function(O,j,Z){this.getDEMWorkerSource(O,j.source).loadTile(j,Z)},Gr.prototype.reloadTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).reloadTile(j,Z)},Gr.prototype.abortTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).abortTile(j,Z)},Gr.prototype.removeTile=function(O,j,Z){this.getWorkerSource(O,j.type,j.source).removeTile(j,Z)},Gr.prototype.removeDEMTile=function(O,j){this.getDEMWorkerSource(O,j.source).removeTile(j)},Gr.prototype.removeSource=function(O,j,Z){if(this.workerSources[O]&&this.workerSources[O][j.type]&&this.workerSources[O][j.type][j.source]){var $=this.workerSources[O][j.type][j.source];delete this.workerSources[O][j.type][j.source],$.removeSource!==void 0?$.removeSource(j,Z):Z()}},Gr.prototype.loadWorkerSource=function(O,j,Z){try{this.self.importScripts(j.url),Z()}catch($){Z($.toString())}},Gr.prototype.syncRTLPluginState=function(O,j,Z){try{o.plugin.setState(j);var $=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&$!=null){this.self.importScripts($);var ie=o.plugin.isParsed();Z(ie?void 0:new Error("RTL Text Plugin failed to import scripts from "+$),ie)}}catch(de){Z(de.toString())}},Gr.prototype.getAvailableImages=function(O){var j=this.availableImages[O];return j||(j=[]),j},Gr.prototype.getLayerIndex=function(O){var j=this.layerIndexes[O];return j||(j=this.layerIndexes[O]=new B),j},Gr.prototype.getWorkerSource=function(O,j,Z){var $=this;return this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][j]||(this.workerSources[O][j]={}),this.workerSources[O][j][Z]||(this.workerSources[O][j][Z]=new this.workerSourceTypes[j]({send:function(ie,de,ge){$.actor.send(ie,de,ge,O)}},this.getLayerIndex(O),this.getAvailableImages(O))),this.workerSources[O][j][Z]},Gr.prototype.getDEMWorkerSource=function(O,j){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][j]||(this.demWorkerSources[O][j]=new ve),this.demWorkerSources[O][j]},Gr.prototype.enforceCacheSizeLimit=function(O,j){o.enforceCacheSizeLimit(j)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Gr(self)),Gr}),_(["./shared"],function(o){var T=o.createCommonjsModule(function(n){function s(m){return!a(m)}function a(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,I,D=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(D);try{I=new Worker(N),E=!0}catch{E=!1}return I&&I.terminate(),URL.revokeObjectURL(N),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var I=E.getContext("2d");if(!I)return!1;var D=I.getImageData(0,0,1,1);return D&&D.width===E.width}()?(u[w=m&&m.failIfMajorPerformanceCaveat]===void 0&&(u[w]=function(E){var I=function(N){var J=document.createElement("canvas"),Y=Object.create(s.webGLContextAttributes);return Y.failIfMajorPerformanceCaveat=N,J.probablySupportsContext?J.probablySupportsContext("webgl",Y)||J.probablySupportsContext("experimental-webgl",Y):J.supportsContext?J.supportsContext("webgl",Y)||J.supportsContext("experimental-webgl",Y):J.getContext("webgl",Y)||J.getContext("experimental-webgl",Y)}(E);if(!I)return!1;var D=I.createShader(I.VERTEX_SHADER);return!(!D||I.isContextLost())&&(I.shaderSource(D,"void main() {}"),I.compileShader(D),I.getShaderParameter(D,I.COMPILE_STATUS)===!0)}(w)),u[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var u={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),k={create:function(n,s,a){var u=o.window.document.createElement(n);return s!==void 0&&(u.className=s),a&&a.appendChild(u),u},createNS:function(n,s){return o.window.document.createElementNS(n,s)}},B=o.window.document&&o.window.document.documentElement.style;function R(n){if(!B)return n[0];for(var s=0;s<n.length;s++)if(n[s]in B)return n[s];return n[0]}var U,V=R(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);k.disableDrag=function(){B&&V&&(U=B[V],B[V]="none")},k.enableDrag=function(){B&&V&&(B[V]=U)};var le=R(["transform","WebkitTransform"]);k.setTransform=function(n,s){n.style[le]=s};var ee=!1;try{var ze=Object.defineProperty({},"passive",{get:function(){ee=!0}});o.window.addEventListener("test",ze,ze),o.window.removeEventListener("test",ze,ze)}catch{ee=!1}k.addEventListener=function(n,s,a,u){u===void 0&&(u={}),n.addEventListener(s,a,"passive"in u&&ee?u:u.capture)},k.removeEventListener=function(n,s,a,u){u===void 0&&(u={}),n.removeEventListener(s,a,"passive"in u&&ee?u:u.capture)};var ve=function(n){n.preventDefault(),n.stopPropagation(),o.window.removeEventListener("click",ve,!0)};function Ie(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}k.suppressClick=function(){o.window.addEventListener("click",ve,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",ve,!0)},0)},k.mousePos=function(n,s){var a=n.getBoundingClientRect();return new o.Point(s.clientX-a.left-n.clientLeft,s.clientY-a.top-n.clientTop)},k.touchPos=function(n,s){for(var a=n.getBoundingClientRect(),u=[],m=0;m<s.length;m++)u.push(new o.Point(s[m].clientX-a.left-n.clientLeft,s[m].clientY-a.top-n.clientTop));return u},k.mouseButton=function(n){return o.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},k.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Ve=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var u=0,m=this.requestors;u<m.length;u+=1){var w=m[u];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,u){this._validate(a,u)&&(this.images[a]=u)},s.prototype._validate=function(a,u){var m=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(u.content,u)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(a,u){if(!a)return!0;for(var m=0,w=0,E=a;w<E.length;w+=1){var I=E[w];if(I[0]<m||I[1]<I[0]||u<I[1])return!1;m=I[1]}return!0},s.prototype._validateContent=function(a,u){return!(a&&(a.length!==4||a[0]<0||u.data.width<a[0]||a[1]<0||u.data.height<a[1]||a[2]<0||u.data.width<a[2]||a[3]<0||u.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,u){u.version=this.images[a].version+1,this.images[a]=u,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var u=this.images[a];delete this.images[a],delete this.patterns[a],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,u){var m=!0;if(!this.isLoaded())for(var w=0,E=a;w<E.length;w+=1)this.images[E[w]]||(m=!1);this.isLoaded()||m?this._notify(a,u):this.requestors.push({ids:a,callback:u})},s.prototype._notify=function(a,u){for(var m={},w=0,E=a;w<E.length;w+=1){var I=E[w];this.images[I]||this.fire(new o.Event("styleimagemissing",{id:I}));var D=this.images[I];D?m[I]={data:D.data.clone(),pixelRatio:D.pixelRatio,sdf:D.sdf,version:D.version,stretchX:D.stretchX,stretchY:D.stretchY,content:D.content,hasRenderCallback:Boolean(D.userImage&&D.userImage.render)}:o.warnOnce('Image "'+I+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}u(null,m)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var u=this.patterns[a],m=this.getImage(a);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{var w={w:m.data.width+2,h:m.data.height+2,x:0,y:0},E=new o.ImagePosition(w,m);this.patterns[a]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var u=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(a,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var u in this.patterns)a.push(this.patterns[u].bin);var m=o.potpack(a),w=m.w,E=m.h,I=this.atlasImage;for(var D in I.resize({width:w||1,height:E||1}),this.patterns){var N=this.patterns[D].bin,J=N.x+1,Y=N.y+1,Q=this.images[D].data,se=Q.width,ae=Q.height;o.RGBAImage.copy(Q,I,{x:0,y:0},{x:J,y:Y},{width:se,height:ae}),o.RGBAImage.copy(Q,I,{x:0,y:ae-1},{x:J,y:Y-1},{width:se,height:1}),o.RGBAImage.copy(Q,I,{x:0,y:0},{x:J,y:Y+ae},{width:se,height:1}),o.RGBAImage.copy(Q,I,{x:se-1,y:0},{x:J-1,y:Y},{width:1,height:ae}),o.RGBAImage.copy(Q,I,{x:0,y:0},{x:J+se,y:Y},{width:1,height:ae})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var u=0,m=a;u<m.length;u+=1){var w=m[u];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];Ie(E)&&this.updateImage(w,E)}}},s}(o.Evented),At=Qe,Lt=Qe,ct=1e20;function Qe(n,s,a,u,m,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=u||.25,this.fontFamily=m||"sans-serif",this.fontWeight=w||"normal",this.radius=a||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Sr(n,s,a,u,m,w,E){for(var I=0;I<s;I++){for(var D=0;D<a;D++)u[D]=n[D*s+I];for(ur(u,m,w,E,a),D=0;D<a;D++)n[D*s+I]=m[D]}for(D=0;D<a;D++){for(I=0;I<s;I++)u[I]=n[D*s+I];for(ur(u,m,w,E,s),I=0;I<s;I++)n[D*s+I]=Math.sqrt(m[I])}}function ur(n,s,a,u,m){a[0]=0,u[0]=-ct,u[1]=+ct;for(var w=1,E=0;w<m;w++){for(var I=(n[w]+w*w-(n[a[E]]+a[E]*a[E]))/(2*w-2*a[E]);I<=u[E];)E--,I=(n[w]+w*w-(n[a[E]]+a[E]*a[E]))/(2*w-2*a[E]);a[++E]=w,u[E]=I,u[E+1]=+ct}for(w=0,E=0;w<m;w++){for(;u[E+1]<w;)E++;s[w]=(w-a[E])*(w-a[E])+n[a[E]]}}Qe.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),u=0;u<this.size*this.size;u++){var m=s.data[4*u+3]/255;this.gridOuter[u]=m===1?0:m===0?ct:Math.pow(Math.max(0,.5-m),2),this.gridInner[u]=m===1?ct:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(Sr(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Sr(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),u=0;u<this.size*this.size;u++)a[u]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[u]-this.gridInner[u])/this.radius+this.cutoff))));return a},At.default=Lt;var Jt=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};Jt.prototype.setURL=function(n){this.url=n},Jt.prototype.getGlyphs=function(n,s){var a=this,u=[];for(var m in n)for(var w=0,E=n[m];w<E.length;w+=1)u.push({stack:m,id:E[w]});o.asyncAll(u,function(I,D){var N=I.stack,J=I.id,Y=a.entries[N];Y||(Y=a.entries[N]={glyphs:{},requests:{},ranges:{}});var Q=Y.glyphs[J];if(Q===void 0){if(Q=a._tinySDF(Y,N,J))return Y.glyphs[J]=Q,void D(null,{stack:N,id:J,glyph:Q});var se=Math.floor(J/256);if(256*se>65535)D(new Error("glyphs > 65535 not supported"));else if(Y.ranges[se])D(null,{stack:N,id:J,glyph:Q});else{var ae=Y.requests[se];ae||(ae=Y.requests[se]=[],Jt.loadGlyphRange(N,se,a.url,a.requestManager,function(ce,re){if(re){for(var fe in re)a._doesCharSupportLocalGlyph(+fe)||(Y.glyphs[+fe]=re[+fe]);Y.ranges[se]=!0}for(var _e=0,Ee=ae;_e<Ee.length;_e+=1)(0,Ee[_e])(ce,re);delete Y.requests[se]})),ae.push(function(ce,re){ce?D(ce):re&&D(null,{stack:N,id:J,glyph:re[J]||null})})}}else D(null,{stack:N,id:J,glyph:Q})},function(I,D){if(I)s(I);else if(D){for(var N={},J=0,Y=D;J<Y.length;J+=1){var Q=Y[J],se=Q.stack,ae=Q.id,ce=Q.glyph;(N[se]||(N[se]={}))[ae]=ce&&{id:ce.id,bitmap:ce.bitmap.clone(),metrics:ce.metrics}}s(null,N)}})},Jt.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](n)||o.isChar["Hangul Syllables"](n)||o.isChar.Hiragana(n)||o.isChar.Katakana(n))},Jt.prototype._tinySDF=function(n,s,a){var u=this.localIdeographFontFamily;if(u&&this._doesCharSupportLocalGlyph(a)){var m=n.tinySDF;if(!m){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),m=n.tinySDF=new Jt.TinySDF(24,3,8,.25,u,w)}return{id:a,bitmap:new o.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Jt.loadGlyphRange=function(n,s,a,u,m){var w=256*s,E=w+255,I=u.transformRequest(u.normalizeGlyphsURL(a).replace("{fontstack}",n).replace("{range}",w+"-"+E),o.ResourceType.Glyphs);o.getArrayBuffer(I,function(D,N){if(D)m(D);else if(N){for(var J={},Y=0,Q=o.parseGlyphPBF(N);Y<Q.length;Y+=1){var se=Q[Y];J[se.id]=se}m(null,J)}})},Jt.TinySDF=At;var Et=function(){this.specification=o.styleSpec.light.position};Et.prototype.possiblyEvaluate=function(n,s){return o.sphericalToCartesian(n.expression.evaluate(s))},Et.prototype.interpolate=function(n,s,a){return{x:o.number(n.x,s.x,a),y:o.number(n.y,s.y,a),z:o.number(n.z,s.z,a)}};var bt=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new Et,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),vr=function(n){function s(a){n.call(this),this._transitionable=new o.Transitionable(bt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,u){if(u===void 0&&(u={}),!this._validate(o.validateLight,a,u))for(var m in a){var w=a[m];o.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),w):this._transitionable.setValue(m,w)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,u,m){return(!m||m.validate!==!1)&&o.emitValidationErrors(this,a.call(o.validateStyle,o.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},s}(o.Evented),Ot=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ot.prototype.getDash=function(n,s){var a=n.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(n,s)),this.dashEntry[a]},Ot.prototype.getDashRanges=function(n,s,a){var u=[],m=n.length%2==1?-n[n.length-1]*a:0,w=n[0]*a,E=!0;u.push({left:m,right:w,isDash:E,zeroLength:n[0]===0});for(var I=n[0],D=1;D<n.length;D++){var N=n[D];u.push({left:m=I*a,right:w=(I+=N)*a,isDash:E=!E,zeroLength:N===0})}return u},Ot.prototype.addRoundDash=function(n,s,a){for(var u=s/2,m=-a;m<=a;m++)for(var w=this.width*(this.nextRow+a+m),E=0,I=n[E],D=0;D<this.width;D++){D/I.right>1&&(I=n[++E]);var N=Math.abs(D-I.left),J=Math.abs(D-I.right),Y=Math.min(N,J),Q=void 0,se=m/a*(u+1);if(I.isDash){var ae=u-Math.abs(se);Q=Math.sqrt(Y*Y+ae*ae)}else Q=u-Math.sqrt(Y*Y+se*se);this.data[w+D]=Math.max(0,Math.min(255,Q+128))}},Ot.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var a=n[s],u=n[s+1];a.zeroLength?n.splice(s,1):u&&u.isDash===a.isDash&&(u.left=a.left,n.splice(s,1))}var m=n[0],w=n[n.length-1];m.isDash===w.isDash&&(m.left=w.left-this.width,w.right=m.right+this.width);for(var E=this.width*this.nextRow,I=0,D=n[I],N=0;N<this.width;N++){N/D.right>1&&(D=n[++I]);var J=Math.abs(N-D.left),Y=Math.abs(N-D.right),Q=Math.min(J,Y);this.data[E+N]=Math.max(0,Math.min(255,(D.isDash?Q:-Q)+128))}},Ot.prototype.addDash=function(n,s){var a=s?7:0,u=2*a+1;if(this.nextRow+u>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var m=0,w=0;w<n.length;w++)m+=n[w];if(m!==0){var E=this.width/m,I=this.getDashRanges(n,this.width,E);s?this.addRoundDash(I,E,a):this.addRegularDash(I)}var D={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=u,this.dirty=!0,D},Ot.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var kr=function n(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var u=this.workerPool.acquire(this.id),m=0;m<u.length;m++){var w=new n.Actor(u[m],a,this.id);w.name="Worker "+m,this.actors.push(w)}};function Ye(n,s,a){var u=function(m,w){if(m)return a(m);if(w){var E=o.pick(o.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(I){return I.id})),E.tiles=s.canonicalizeTileset(E,n.url),a(null,E)}};return n.url?o.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),o.ResourceType.Source),u):o.browser.frame(function(){return u(null,n)})}kr.prototype.broadcast=function(n,s,a){o.asyncAll(this.actors,function(u,m){u.send(n,s,m)},a=a||function(){})},kr.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},kr.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},kr.Actor=o.Actor;var Qt=function(n,s,a){this.bounds=o.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=a||24};Qt.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},Qt.prototype.contains=function(n){var s=Math.pow(2,n.z),a=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*s),u=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=a&&n.x<m&&n.y>=u&&n.y<w};var Wr=function(n){function s(a,u,m,w){if(n.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(u,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ye(this._options,this.map._requestManager,function(u,m){a._tileJSONRequest=null,a._loaded=!0,u?a.fire(new o.ErrorEvent(u)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new Qt(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var u=this;return this.setSourceProperty(function(){u._options.tiles=a}),this},s.prototype.setUrl=function(a){var u=this;return this.setSourceProperty(function(){u.url=a,u._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.loadTile=function(a,u){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(m,o.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(I,D){return delete a.request,a.aborted?u(null):I&&I.status!==404?u(I):(D&&D.resourceTiming&&(a.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&a.setExpiryData(D),a.loadVectorData(D,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=u:a.request=a.actor.send("reloadTile",w,E.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",w,E.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(o.Evented),ri=function(n){function s(a,u,m,w){n.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},u),o.extend(this,o.pick(u,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ye(this._options,this.map._requestManager,function(u,m){a._tileJSONRequest=null,a._loaded=!0,u?a.fire(new o.ErrorEvent(u)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new Qt(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,u){var m=this,w=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=o.getImage(this.map._requestManager.transformRequest(w,o.ResourceType.Tile),function(E,I){if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(E)a.state="errored",u(E);else if(I){m.map._refreshExpiredTiles&&a.setExpiryData(I),delete I.cacheControl,delete I.expires;var D=m.map.painter.context,N=D.gl;a.texture=m.map.painter.getTileTexture(I.width),a.texture?a.texture.update(I,{useMipmap:!0}):(a.texture=new o.Texture(D,I,N.RGBA,{useMipmap:!0}),a.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),D.extTextureFilterAnisotropic&&N.texParameterf(N.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax)),a.state="loaded",o.cacheEntryPossiblyAdded(m.dispatcher),u(null)}})},s.prototype.abortTile=function(a,u){a.request&&(a.request.cancel(),delete a.request),u()},s.prototype.unloadTile=function(a,u){a.texture&&this.map.painter.saveTileTexture(a.texture),u()},s.prototype.hasTransition=function(){return!1},s}(o.Evented),mr=function(n){function s(a,u,m,w){n.call(this,a,u,m,w),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,u){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,I){E&&(a.state="errored",u(E)),I&&(a.dem=I,a.needsHillshadePrepare=!0,a.state="loaded",u(null))}a.request=o.getImage(this.map._requestManager.transformRequest(m,o.ResourceType.Tile),function(E,I){if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(E)a.state="errored",u(E);else if(I){this.map._refreshExpiredTiles&&a.setExpiryData(I),delete I.cacheControl,delete I.expires;var D=o.window.ImageBitmap&&I instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?I:o.browser.getImageData(I,1),N={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:D,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",N,w.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var u=a.canonical,m=Math.pow(2,u.z),w=(u.x-1+m)%m,E=u.x===0?a.wrap-1:a.wrap,I=(u.x+1+m)%m,D=u.x+1===m?a.wrap+1:a.wrap,N={};return N[new o.OverscaledTileID(a.overscaledZ,E,u.z,w,u.y).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,D,u.z,I,u.y).key]={backfilled:!1},u.y>0&&(N[new o.OverscaledTileID(a.overscaledZ,E,u.z,w,u.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,D,u.z,I,u.y-1).key]={backfilled:!1}),u.y+1<m&&(N[new o.OverscaledTileID(a.overscaledZ,E,u.z,w,u.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(a.overscaledZ,D,u.z,I,u.y+1).key]={backfilled:!1}),N},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(ri),pt=function(n){function s(a,u,m,w){n.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(w),this._data=u.data,this._options=o.extend({},u),this._collectResourceTiming=u.collectResourceTiming,this._resourceTiming=[],u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;var E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*E,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?Math.min(u.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.EXTENT,radius:(u.clusterRadius||50)*E,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(u){if(u)a.fire(new o.ErrorEvent(u));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new o.Event("data",m))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var u=this;return this._data=a,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)u.fire(new o.ErrorEvent(m));else{var w={dataType:"source",sourceDataType:"content"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(w.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new o.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(a,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},u),this},s.prototype.getClusterChildren=function(a,u){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},u),this},s.prototype.getClusterLeaves=function(a,u,m,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:u,offset:m},w),this},s.prototype._updateWorkerData=function(a){var u=this;this._loaded=!1;var m=o.extend({},this.workerOptions),w=this._data;typeof w=="string"?(m.request=this.map._requestManager.transformRequest(o.browser.resolveURL(w),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(w),this.actor.send(this.type+".loadData",m,function(E,I){u._removed||I&&I.abandoned||(u._loaded=!0,I&&I.resourceTiming&&I.resourceTiming[u.id]&&(u._resourceTiming=I.resourceTiming[u.id].slice(0)),u.actor.send(u.type+".coalesce",{source:m.source},null),a(E))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,u){var m=this,w=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(w,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,I){return delete a.request,a.unloadVectorData(),a.aborted?u(null):E?u(E):(a.loadVectorData(I,m.map.painter,w==="reloadTile"),u(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(o.Evented),rt=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ir=function(n){function s(a,u,m,w){n.call(this),this.id=a,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(a,u){var m=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(w,E){m._loaded=!0,w?m.fire(new o.ErrorEvent(w)):E&&(m.image=E,a&&(m.coordinates=a),u&&u(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var u=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){u.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var u=this;this.coordinates=a;var m=a.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var I=1/0,D=1/0,N=-1/0,J=-1/0,Y=0,Q=E;Y<Q.length;Y+=1){var se=Q[Y];I=Math.min(I,se.x),D=Math.min(D,se.y),N=Math.max(N,se.x),J=Math.max(J,se.y)}var ae=Math.max(N-I,J-D),ce=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),re=Math.pow(2,ce);return new o.CanonicalTileID(ce,Math.floor((I+N)/2*re),Math.floor((D+J)/2*re))}(m),this.minzoom=this.maxzoom=this.tileID.z;var w=m.map(function(E){return u.tileID.getTilePoint(E)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,u=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(a,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(a,u){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},u(null)):(a.state="errored",u(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(o.Evented),Ri=function(n){function s(a,u,m,w){n.call(this,a,u,m,w),this.roundZoom=!0,this.type="video",this.options=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var u=this.options;this.urls=[];for(var m=0,w=u.urls;m<w.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(w[m],o.ResourceType.Source).url);o.getVideo(this.urls,function(E,I){a._loaded=!0,E?a.fire(new o.ErrorEvent(E)):I&&(a.video=I,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var u=this.video.seekable;a<u.start(0)||a>u.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+u.start(0)+" and "+u.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,u=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(a,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(ir),Kn=function(n){function s(a,u,m,w){n.call(this,a,u,m,w),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(I){return typeof I!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var u=this.map.painter.context,m=u.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(u,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,u=[this.canvas.width,this.canvas.height];a<u.length;a+=1){var m=u[a];if(isNaN(m)||m<=0)return!0}return!1},s}(ir),Ti={vector:Wr,raster:ri,"raster-dem":mr,geojson:pt,video:Ri,image:ir,canvas:Kn};function Ei(n,s){var a=o.identity([]);return o.translate(a,a,[1,1,0]),o.scale(a,a,[.5*n.width,.5*n.height,1]),o.multiply(a,a,n.calculatePosMatrix(s.toUnwrapped()))}function ii(n,s,a,u,m,w){var E=function(ce,re,fe){if(ce)for(var _e=0,Ee=ce;_e<Ee.length;_e+=1){var Ce=re[Ee[_e]];if(Ce&&Ce.source===fe&&Ce.type==="fill-extrusion")return!0}else for(var Me in re){var Oe=re[Me];if(Oe.source===fe&&Oe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),I=w.maxPitchScaleFactor(),D=n.tilesIn(u,I,E);D.sort(Zi);for(var N=[],J=0,Y=D;J<Y.length;J+=1){var Q=Y[J];N.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(s,a,n._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,m,w,I,Ei(n.transform,Q.tileID))})}var se=function(ce){for(var re={},fe={},_e=0,Ee=ce;_e<Ee.length;_e+=1){var Ce=Ee[_e],Me=Ce.queryResults,Oe=Ce.wrappedTileID,Ze=fe[Oe]=fe[Oe]||{};for(var We in Me)for(var He=Me[We],ut=Ze[We]=Ze[We]||{},kt=re[We]=re[We]||[],dt=0,vt=He;dt<vt.length;dt+=1){var er=vt[dt];ut[er.featureIndex]||(ut[er.featureIndex]=!0,kt.push(er))}}return re}(N);for(var ae in se)se[ae].forEach(function(ce){var re=ce.feature,fe=n.getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=fe});return se}function Zi(n,s){var a=n.tileID,u=s.tileID;return a.overscaledZ-u.overscaledZ||a.canonical.y-u.canonical.y||a.wrap-u.wrap||a.canonical.x-u.canonical.x}var Yt=function(n,s){this.max=n,this.onRemove=s,this.reset()};Yt.prototype.reset=function(){for(var n in this.data)for(var s=0,a=this.data[n];s<a.length;s+=1){var u=a[s];u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value)}return this.data={},this.order=[],this},Yt.prototype.add=function(n,s,a){var u=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var w={value:s,timeout:void 0};if(a!==void 0&&(w.timeout=setTimeout(function(){u.remove(n,w)},a)),this.data[m].push(w),this.order.push(m),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},Yt.prototype.has=function(n){return n.wrapped().key in this.data},Yt.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},Yt.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},Yt.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},Yt.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},Yt.prototype.remove=function(n,s){if(!this.has(n))return this;var a=n.wrapped().key,u=s===void 0?0:this.data[a].indexOf(s),m=this.data[a][u];return this.data[a].splice(u,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},Yt.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},Yt.prototype.filter=function(n){var s=[];for(var a in this.data)for(var u=0,m=this.data[a];u<m.length;u+=1){var w=m[u];n(w.value)||s.push(w)}for(var E=0,I=s;E<I.length;E+=1){var D=I[E];this.remove(D.value.tileID,D)}};var Ai=function(n,s,a){this.context=n;var u=n.gl;this.buffer=u.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Ai.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ai.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Ai.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Fa={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},It=function(n,s,a,u){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=u,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};It.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},It.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},It.prototype.enableAttributes=function(n,s){for(var a=0;a<this.attributes.length;a++){var u=s.attributes[this.attributes[a].name];u!==void 0&&n.enableVertexAttribArray(u)}},It.prototype.setVertexAttribPointers=function(n,s,a){for(var u=0;u<this.attributes.length;u++){var m=this.attributes[u],w=s.attributes[m.name];w!==void 0&&n.vertexAttribPointer(w,m.components,n[Fa[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},It.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Pt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Pt.prototype.get=function(){return this.current},Pt.prototype.set=function(n){},Pt.prototype.getDefault=function(){return this.default},Pt.prototype.setDefault=function(){this.set(this.default)};var ni=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Pt),Ir=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(Pt),br=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(Pt),Ji=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Pt),ci=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(Pt),Si=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(Pt),jr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(Pt),cr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(Pt),nr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(Pt),hi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Pt),pi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(Pt),Yi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(Pt),ai=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}},s}(Pt),Bi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Pt),la=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Pt),Ja=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(Pt),Ya=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}},s}(Pt),_n=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(Pt),kn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(Pt),fi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(Pt),Oi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(Pt),Qi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Pt),Qa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(Pt),ln=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Pt),Qo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(Pt),$i=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(Pt),ki=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(Pt),Jr=function(n){function s(a){n.call(this,a),this.vao=a.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(Pt),Gi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(Pt),In=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(Pt),un=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(Pt),Gr=function(n){function s(a,u){n.call(this,a),this.context=a,this.parent=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Pt),O=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(Gr),j=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Gr),Z=function(n,s,a,u){this.context=n,this.width=s,this.height=a;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new O(n,m),u&&(this.depthAttachment=new j(n,m))};Z.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&n.deleteRenderbuffer(a)}n.deleteFramebuffer(this.framebuffer)};var $=function(n,s,a){this.func=n,this.mask=s,this.range=a};$.ReadOnly=!1,$.ReadWrite=!0,$.disabled=new $(519,$.ReadOnly,[0,1]);var ie=function(n,s,a,u,m,w){this.test=n,this.ref=s,this.mask=a,this.fail=u,this.depthFail=m,this.pass=w};ie.disabled=new ie({func:519,mask:0},0,0,7680,7680,7680);var de=function(n,s,a){this.blendFunction=n,this.blendColor=s,this.mask=a};de.disabled=new de(de.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),de.unblended=new de(de.Replace,o.Color.transparent,[!0,!0,!0,!0]),de.alphaBlended=new de([1,771],o.Color.transparent,[!0,!0,!0,!0]);var ge=function(n,s,a){this.enable=n,this.mode=s,this.frontFace=a};ge.disabled=new ge(!1,1029,2305),ge.backCCW=new ge(!0,1029,2305);var G=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ni(this),this.clearDepth=new Ir(this),this.clearStencil=new br(this),this.colorMask=new Ji(this),this.depthMask=new ci(this),this.stencilMask=new Si(this),this.stencilFunc=new jr(this),this.stencilOp=new cr(this),this.stencilTest=new nr(this),this.depthRange=new hi(this),this.depthTest=new pi(this),this.depthFunc=new Yi(this),this.blend=new ai(this),this.blendFunc=new Bi(this),this.blendColor=new la(this),this.blendEquation=new Ja(this),this.cullFace=new Ya(this),this.cullFaceSide=new _n(this),this.frontFace=new kn(this),this.program=new fi(this),this.activeTexture=new Oi(this),this.viewport=new Qi(this),this.bindFramebuffer=new Qa(this),this.bindRenderbuffer=new ln(this),this.bindTexture=new Qo(this),this.bindVertexBuffer=new $i(this),this.bindElementBuffer=new ki(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Jr(this),this.pixelStoreUnpack=new Gi(this),this.pixelStoreUnpackPremultiplyAlpha=new In(this),this.pixelStoreUnpackFlipY=new un(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};G.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},G.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},G.prototype.createIndexBuffer=function(n,s){return new Ai(this,n,s)},G.prototype.createVertexBuffer=function(n,s,a){return new It(this,n,s,a)},G.prototype.createRenderbuffer=function(n,s,a){var u=this.gl,m=u.createRenderbuffer();return this.bindRenderbuffer.set(m),u.renderbufferStorage(u.RENDERBUFFER,n,s,a),this.bindRenderbuffer.set(null),m},G.prototype.createFramebuffer=function(n,s,a){return new Z(this,n,s,a)},G.prototype.clear=function(n){var s=n.color,a=n.depth,u=this.gl,m=0;s&&(m|=u.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),u.clear(m)},G.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},G.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},G.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},G.prototype.setColorMode=function(n){o.deepEqual(n.blendFunction,de.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},G.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var te=function(n){function s(a,u,m){var w=this;n.call(this),this.id=a,this.dispatcher=m,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,I,D,N){var J=new Ti[I.type](E,I,D,N);if(J.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+J.id);return o.bindAll(["load","abort","unload","serialize","prepare"],J),J}(a,u,m,this),this._tiles={},this._cache=new Yt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var u=this._tiles[a];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,u){return this._source.loadTile(a,u)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var u in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[u];m.upload(a),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return o.values(this._tiles).map(function(a){return a.tileID}).sort(we).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var u=this,m=[];for(var w in this._tiles)this._isIdRenderable(w,a)&&m.push(this._tiles[w]);return a?m.sort(function(E,I){var D=E.tileID,N=I.tileID,J=new o.Point(D.canonical.x,D.canonical.y)._rotate(u.transform.angle),Y=new o.Point(N.canonical.x,N.canonical.y)._rotate(u.transform.angle);return D.overscaledZ-N.overscaledZ||Y.y-J.y||Y.x-J.x}).map(function(E){return E.tileID.key}):m.map(function(E){return E.tileID}).sort(we).map(function(E){return E.key})},s.prototype.hasRenderableParent=function(a){var u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)},s.prototype._isIdRenderable=function(a,u){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,u){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,a,u)))},s.prototype._tileLoaded=function(a,u,m,w){if(w)return a.state="errored",void(w.status!==404?this._source.fire(new o.ErrorEvent(w,{tile:a})):this.update(this.transform));a.timeAdded=o.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var u=this.getRenderableIds(),m=0;m<u.length;m++){var w=u[m];if(a.neighboringTiles&&a.neighboringTiles[w]){var E=this.getTileByID(w);I(a,E),I(E,a)}}function I(D,N){D.needsHillshadePrepare=!0;var J=N.tileID.canonical.x-D.tileID.canonical.x,Y=N.tileID.canonical.y-D.tileID.canonical.y,Q=Math.pow(2,D.tileID.canonical.z),se=N.tileID.key;J===0&&Y===0||Math.abs(Y)>1||(Math.abs(J)>1&&(Math.abs(J+Q)===1?J+=Q:Math.abs(J-Q)===1&&(J-=Q)),N.dem&&D.dem&&(D.dem.backfillBorder(N.dem,J,Y),D.neighboringTiles&&D.neighboringTiles[se]&&(D.neighboringTiles[se].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,u,m,w){for(var E in this._tiles){var I=this._tiles[E];if(!(w[E]||!I.hasData()||I.tileID.overscaledZ<=u||I.tileID.overscaledZ>m)){for(var D=I.tileID;I&&I.tileID.overscaledZ>u+1;){var N=I.tileID.scaledTo(I.tileID.overscaledZ-1);(I=this._tiles[N.key])&&I.hasData()&&(D=N)}for(var J=D;J.overscaledZ>u;)if(a[(J=J.scaledTo(J.overscaledZ-1)).key]){w[D.key]=D;break}}}},s.prototype.findLoadedParent=function(a,u){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=u?m:null}for(var w=a.overscaledZ-1;w>=u;w--){var E=a.scaledTo(w),I=this._getLoadedTile(E);if(I)return I}},s.prototype._getLoadedTile=function(a){var u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var u=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,w=Math.floor(u*m*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},s.prototype.handleWrapJump=function(a){var u=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,u){var m={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),m[E.tileID.key]=E}for(var I in this._tiles=m,this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(var D in this._tiles)this._setTileReloadTimer(D,this._tiles[D])}},s.prototype.update=function(a){var u=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ze){return new o.OverscaledTileID(Ze.canonical.z,Ze.wrap,Ze.canonical.z,Ze.canonical.x,Ze.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ze){return u._source.hasTile(Ze)}))):m=[];var w=a.coveringZoomLevel(this._source),E=Math.max(w-s.maxOverzooming,this._source.minzoom),I=Math.max(w+s.maxUnderzooming,this._source.minzoom),D=this._updateRetainedTiles(m,w);if(Ne(this._source.type)){for(var N={},J={},Y=0,Q=Object.keys(D);Y<Q.length;Y+=1){var se=Q[Y],ae=D[se],ce=this._tiles[se];if(ce&&!(ce.fadeEndTime&&ce.fadeEndTime<=o.browser.now())){var re=this.findLoadedParent(ae,E);re&&(this._addTile(re.tileID),N[re.tileID.key]=re.tileID),J[se]=ae}}for(var fe in this._retainLoadedChildren(J,w,I,D),N)D[fe]||(this._coveredTiles[fe]=!0,D[fe]=N[fe])}for(var _e in D)this._tiles[_e].clearFadeHold();for(var Ee=0,Ce=o.keysDifference(this._tiles,D);Ee<Ce.length;Ee+=1){var Me=Ce[Ee],Oe=this._tiles[Me];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(Me)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,u){for(var m={},w={},E=Math.max(u-s.maxOverzooming,this._source.minzoom),I=Math.max(u+s.maxUnderzooming,this._source.minzoom),D={},N=0,J=a;N<J.length;N+=1){var Y=J[N],Q=this._addTile(Y);m[Y.key]=Y,Q.hasData()||u<this._source.maxzoom&&(D[Y.key]=Y)}this._retainLoadedChildren(D,u,I,m);for(var se=0,ae=a;se<ae.length;se+=1){var ce=ae[se],re=this._tiles[ce.key];if(!re.hasData()){if(u+1>this._source.maxzoom){var fe=ce.children(this._source.maxzoom)[0],_e=this.getTile(fe);if(_e&&_e.hasData()){m[fe.key]=fe;continue}}else{var Ee=ce.children(this._source.maxzoom);if(m[Ee[0].key]&&m[Ee[1].key]&&m[Ee[2].key]&&m[Ee[3].key])continue}for(var Ce=re.wasRequested(),Me=ce.overscaledZ-1;Me>=E;--Me){var Oe=ce.scaledTo(Me);if(w[Oe.key]||(w[Oe.key]=!0,!(re=this.getTile(Oe))&&Ce&&(re=this._addTile(Oe)),re&&(m[Oe.key]=Oe,Ce=re.wasRequested(),re.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var u=[],m=void 0,w=this._tiles[a].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){m=this._loadedParentTiles[w.key];break}u.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(m=this._getLoadedTile(E))break;w=E}for(var I=0,D=u;I<D.length;I+=1)this._loadedParentTiles[D[I]]=m}},s.prototype._addTile=function(a){var u=this._tiles[a.key];if(u)return u;(u=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));var m=Boolean(u);return m||(u=new o.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,a.key,u.state))),u?(u.uses++,this._tiles[a.key]=u,m||this._source.fire(new o.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null},s.prototype._setTileReloadTimer=function(a,u){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var w=u.getExpiryTimeout();w&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},w))},s.prototype._removeTile=function(a){var u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,u,m){var w=this,E=[],I=this.transform;if(!I)return E;for(var D=m?I.getCameraQueryGeometry(a):a,N=a.map(function(Me){return I.pointCoordinate(Me)}),J=D.map(function(Me){return I.pointCoordinate(Me)}),Y=this.getIds(),Q=1/0,se=1/0,ae=-1/0,ce=-1/0,re=0,fe=J;re<fe.length;re+=1){var _e=fe[re];Q=Math.min(Q,_e.x),se=Math.min(se,_e.y),ae=Math.max(ae,_e.x),ce=Math.max(ce,_e.y)}for(var Ee=function(Me){var Oe=w._tiles[Y[Me]];if(!Oe.holdingForFade()){var Ze=Oe.tileID,We=Math.pow(2,I.zoom-Oe.tileID.overscaledZ),He=u*Oe.queryPadding*o.EXTENT/Oe.tileSize/We,ut=[Ze.getTilePoint(new o.MercatorCoordinate(Q,se)),Ze.getTilePoint(new o.MercatorCoordinate(ae,ce))];if(ut[0].x-He<o.EXTENT&&ut[0].y-He<o.EXTENT&&ut[1].x+He>=0&&ut[1].y+He>=0){var kt=N.map(function(vt){return Ze.getTilePoint(vt)}),dt=J.map(function(vt){return Ze.getTilePoint(vt)});E.push({tile:Oe,tileID:Ze,queryGeometry:kt,cameraQueryGeometry:dt,scale:We})}}},Ce=0;Ce<Y.length;Ce++)Ee(Ce);return E},s.prototype.getVisibleCoordinates=function(a){for(var u=this,m=this.getRenderableIds(a).map(function(D){return u._tiles[D].tileID}),w=0,E=m;w<E.length;w+=1){var I=E[w];I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ne(this._source.type))for(var a in this._tiles){var u=this._tiles[a];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=o.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,u,m){this._state.updateState(a=a||"_geojsonTileLayer",u,m)},s.prototype.removeFeatureState=function(a,u,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,m)},s.prototype.getFeatureState=function(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)},s.prototype.setDependencies=function(a,u,m){var w=this._tiles[a];w&&w.setDependencies(u,m)},s.prototype.reloadTilesForDependencies=function(a,u){for(var m in this._tiles)this._tiles[m].hasDependency(a,u)&&this._reloadTile(m,"reloading");this._cache.filter(function(w){return!w.hasDependency(a,u)})},s}(o.Evented);function we(n,s){var a=Math.abs(2*n.wrap)-+(n.wrap<0),u=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||u-a||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ne(n){return n==="raster"||n==="image"||n==="video"}function je(){return new o.window.Worker(xu.workerUrl)}te.maxOverzooming=10,te.maxUnderzooming=3;var Te="mapboxgl_preloaded_worker_pool",qe=function(){this.active={}};qe.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new je);return this.active[n]=!0,this.workers.slice()},qe.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},qe.prototype.isPreloaded=function(){return!!this.active[Te]},qe.prototype.numActive=function(){return Object.keys(this.active).length};var it,nt=Math.floor(o.browser.hardwareConcurrency/2);function Pe(){return it||(it=new qe),it}function Xe(n,s){var a={};for(var u in n)u!=="ref"&&(a[u]=n[u]);return o.refProperties.forEach(function(m){m in s&&(a[m]=s[m])}),a}function Ke(n){n=n.slice();for(var s=Object.create(null),a=0;a<n.length;a++)s[n[a].id]=n[a];for(var u=0;u<n.length;u++)"ref"in n[u]&&(n[u]=Xe(n[u],s[n[u].ref]));return n}qe.workerCount=Math.max(Math.min(nt,6),1);var Je={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ct(n,s,a){a.push({command:Je.addSource,args:[n,s[n]]})}function $e(n,s,a){s.push({command:Je.removeSource,args:[n]}),a[n]=!0}function Gt(n,s,a,u){$e(n,a,u),Ct(n,s,a)}function yr(n,s,a){var u;for(u in n[a])if(n[a].hasOwnProperty(u)&&u!=="data"&&!o.deepEqual(n[a][u],s[a][u]))return!1;for(u in s[a])if(s[a].hasOwnProperty(u)&&u!=="data"&&!o.deepEqual(n[a][u],s[a][u]))return!1;return!0}function Bt(n,s,a,u,m,w){var E;for(E in s=s||{},n=n||{})n.hasOwnProperty(E)&&(o.deepEqual(n[E],s[E])||a.push({command:w,args:[u,E,s[E],m]}));for(E in s)s.hasOwnProperty(E)&&!n.hasOwnProperty(E)&&(o.deepEqual(n[E],s[E])||a.push({command:w,args:[u,E,s[E],m]}))}function qt(n){return n.id}function Dt(n,s){return n[s.id]=s,n}var gr=function(n,s){this.reset(n,s)};gr.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},gr.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=o.clamp(n,0,1);for(var s=1,a=this._distances[s],u=n*this.paddedLength+this.padding;a<u&&s<this._distances.length;)a=this._distances[++s];var m=s-1,w=this._distances[m],E=a-w,I=E>0?(u-w)/E:0;return this.points[m].mult(1-I).add(this.points[s].mult(I))};var Ft=function(n,s,a){var u=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/a),this.yCellCount=Math.ceil(s/a);for(var w=0;w<this.xCellCount*this.yCellCount;w++)u.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Dr(n,s,a,u,m){var w=o.create();return s?(o.scale(w,w,[1/m,1/m,1]),a||o.rotateZ(w,w,u.angle)):o.multiply(w,u.labelPlaneMatrix,n),w}function ar(n,s,a,u,m){if(s){var w=o.clone(n);return o.scale(w,w,[m,m,1]),a||o.rotateZ(w,w,-u.angle),w}return u.glCoordMatrix}function Wt(n,s){var a=[n.x,n.y,0,1];xr(a,a,s);var u=a[3];return{point:new o.Point(a[0]/u,a[1]/u),signedDistanceFromCamera:u}}function Ht(n,s){return .5+n/s*.5}function Tr(n,s){var a=n[0]/n[3],u=n[1]/n[3];return a>=-s[0]&&a<=s[0]&&u>=-s[1]&&u<=s[1]}function Tn(n,s,a,u,m,w,E,I){var D=u?n.textSizeData:n.iconSizeData,N=o.evaluateSizeForZoom(D,a.transform.zoom),J=[256/a.width*2+1,256/a.height*2+1],Y=u?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;Y.clear();for(var Q=n.lineVertexArray,se=u?n.text.placedSymbolArray:n.icon.placedSymbolArray,ae=a.transform.width/a.transform.height,ce=!1,re=0;re<se.length;re++){var fe=se.get(re);if(fe.hidden||fe.writingMode===o.WritingMode.vertical&&!ce)Fr(fe.numGlyphs,Y);else{ce=!1;var _e=[fe.anchorX,fe.anchorY,0,1];if(o.transformMat4(_e,_e,s),Tr(_e,J)){var Ee=Ht(a.transform.cameraToCenterDistance,_e[3]),Ce=o.evaluateSizeForFeature(D,N,fe),Me=E?Ce/Ee:Ce*Ee,Oe=new o.Point(fe.anchorX,fe.anchorY),Ze=Wt(Oe,m).point,We={},He=$a(fe,Me,!1,I,s,m,w,n.glyphOffsetArray,Q,Y,Ze,Oe,We,ae);ce=He.useVertical,(He.notEnoughRoom||ce||He.needsFlipping&&$a(fe,Me,!0,I,s,m,w,n.glyphOffsetArray,Q,Y,Ze,Oe,We,ae).notEnoughRoom)&&Fr(fe.numGlyphs,Y)}else Fr(fe.numGlyphs,Y)}}u?n.text.dynamicLayoutVertexBuffer.updateData(Y):n.icon.dynamicLayoutVertexBuffer.updateData(Y)}function oi(n,s,a,u,m,w,E,I,D,N,J){var Y=I.glyphStartIndex+I.numGlyphs,Q=I.lineStartIndex,se=I.lineStartIndex+I.lineLength,ae=s.getoffsetX(I.glyphStartIndex),ce=s.getoffsetX(Y-1),re=Kr(n*ae,a,u,m,w,E,I.segment,Q,se,D,N,J);if(!re)return null;var fe=Kr(n*ce,a,u,m,w,E,I.segment,Q,se,D,N,J);return fe?{first:re,last:fe}:null}function di(n,s,a,u){return n===o.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*u?{useVertical:!0}:(n===o.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function $a(n,s,a,u,m,w,E,I,D,N,J,Y,Q,se){var ae,ce=s/24,re=n.lineOffsetX*ce,fe=n.lineOffsetY*ce;if(n.numGlyphs>1){var _e=n.glyphStartIndex+n.numGlyphs,Ee=n.lineStartIndex,Ce=n.lineStartIndex+n.lineLength,Me=oi(ce,I,re,fe,a,J,Y,n,D,w,Q);if(!Me)return{notEnoughRoom:!0};var Oe=Wt(Me.first.point,E).point,Ze=Wt(Me.last.point,E).point;if(u&&!a){var We=di(n.writingMode,Oe,Ze,se);if(We)return We}ae=[Me.first];for(var He=n.glyphStartIndex+1;He<_e-1;He++)ae.push(Kr(ce*I.getoffsetX(He),re,fe,a,J,Y,n.segment,Ee,Ce,D,w,Q));ae.push(Me.last)}else{if(u&&!a){var ut=Wt(Y,m).point,kt=n.lineStartIndex+n.segment+1,dt=new o.Point(D.getx(kt),D.gety(kt)),vt=Wt(dt,m),er=vt.signedDistanceFromCamera>0?vt.point:ua(Y,dt,ut,1,m),at=di(n.writingMode,ut,er,se);if(at)return at}var Ut=Kr(ce*I.getoffsetX(n.glyphStartIndex),re,fe,a,J,Y,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,D,w,Q);if(!Ut)return{notEnoughRoom:!0};ae=[Ut]}for(var Kt=0,jt=ae;Kt<jt.length;Kt+=1){var Nt=jt[Kt];o.addDynamicAttributes(N,Nt.point,Nt.angle)}return{}}function ua(n,s,a,u,m){var w=Wt(n.add(n.sub(s)._unit()),m).point,E=a.sub(w);return a.add(E._mult(u/E.mag()))}function Kr(n,s,a,u,m,w,E,I,D,N,J,Y){var Q=u?n-s:n+s,se=Q>0?1:-1,ae=0;u&&(se*=-1,ae=Math.PI),se<0&&(ae+=Math.PI);for(var ce=se>0?I+E:I+E+1,re=m,fe=m,_e=0,Ee=0,Ce=Math.abs(Q),Me=[];_e+Ee<=Ce;){if((ce+=se)<I||ce>=D)return null;if(fe=re,Me.push(re),(re=Y[ce])===void 0){var Oe=new o.Point(N.getx(ce),N.gety(ce)),Ze=Wt(Oe,J);if(Ze.signedDistanceFromCamera>0)re=Y[ce]=Ze.point;else{var We=ce-se;re=ua(_e===0?w:new o.Point(N.getx(We),N.gety(We)),Oe,fe,Ce-_e+1,J)}}_e+=Ee,Ee=fe.dist(re)}var He=(Ce-_e)/Ee,ut=re.sub(fe),kt=ut.mult(He)._add(fe);kt._add(ut._unit()._perp()._mult(a*se));var dt=ae+Math.atan2(re.y-fe.y,re.x-fe.x);return Me.push(kt),{point:kt,angle:dt,path:Me}}Ft.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ft.prototype.insert=function(n,s,a,u,m){this._forEachCell(s,a,u,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(m)},Ft.prototype.insertCircle=function(n,s,a,u){this._forEachCell(s-u,a-u,s+u,a+u,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(a),this.circles.push(u)},Ft.prototype._insertBoxCell=function(n,s,a,u,m,w){this.boxCells[m].push(w)},Ft.prototype._insertCircleCell=function(n,s,a,u,m,w){this.circleCells[m].push(w)},Ft.prototype._query=function(n,s,a,u,m,w){if(a<0||n>this.width||u<0||s>this.height)return!m&&[];var E=[];if(n<=0&&s<=0&&this.width<=a&&this.height<=u){if(m)return!0;for(var I=0;I<this.boxKeys.length;I++)E.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(var D=0;D<this.circleKeys.length;D++){var N=this.circles[3*D],J=this.circles[3*D+1],Y=this.circles[3*D+2];E.push({key:this.circleKeys[D],x1:N-Y,y1:J-Y,x2:N+Y,y2:J+Y})}return w?E.filter(w):E}return this._forEachCell(n,s,a,u,this._queryCell,E,{hitTest:m,seenUids:{box:{},circle:{}}},w),m?E.length>0:E},Ft.prototype._queryCircle=function(n,s,a,u,m){var w=n-a,E=n+a,I=s-a,D=s+a;if(E<0||w>this.width||D<0||I>this.height)return!u&&[];var N=[];return this._forEachCell(w,I,E,D,this._queryCellCircle,N,{hitTest:u,circle:{x:n,y:s,radius:a},seenUids:{box:{},circle:{}}},m),u?N.length>0:N},Ft.prototype.query=function(n,s,a,u,m){return this._query(n,s,a,u,!1,m)},Ft.prototype.hitTest=function(n,s,a,u,m){return this._query(n,s,a,u,!0,m)},Ft.prototype.hitTestCircle=function(n,s,a,u){return this._queryCircle(n,s,a,!0,u)},Ft.prototype._queryCell=function(n,s,a,u,m,w,E,I){var D=E.seenUids,N=this.boxCells[m];if(N!==null)for(var J=this.bboxes,Y=0,Q=N;Y<Q.length;Y+=1){var se=Q[Y];if(!D.box[se]){D.box[se]=!0;var ae=4*se;if(n<=J[ae+2]&&s<=J[ae+3]&&a>=J[ae+0]&&u>=J[ae+1]&&(!I||I(this.boxKeys[se]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[se],x1:J[ae],y1:J[ae+1],x2:J[ae+2],y2:J[ae+3]})}}}var ce=this.circleCells[m];if(ce!==null)for(var re=this.circles,fe=0,_e=ce;fe<_e.length;fe+=1){var Ee=_e[fe];if(!D.circle[Ee]){D.circle[Ee]=!0;var Ce=3*Ee;if(this._circleAndRectCollide(re[Ce],re[Ce+1],re[Ce+2],n,s,a,u)&&(!I||I(this.circleKeys[Ee]))){if(E.hitTest)return w.push(!0),!0;var Me=re[Ce],Oe=re[Ce+1],Ze=re[Ce+2];w.push({key:this.circleKeys[Ee],x1:Me-Ze,y1:Oe-Ze,x2:Me+Ze,y2:Oe+Ze})}}}},Ft.prototype._queryCellCircle=function(n,s,a,u,m,w,E,I){var D=E.circle,N=E.seenUids,J=this.boxCells[m];if(J!==null)for(var Y=this.bboxes,Q=0,se=J;Q<se.length;Q+=1){var ae=se[Q];if(!N.box[ae]){N.box[ae]=!0;var ce=4*ae;if(this._circleAndRectCollide(D.x,D.y,D.radius,Y[ce+0],Y[ce+1],Y[ce+2],Y[ce+3])&&(!I||I(this.boxKeys[ae])))return w.push(!0),!0}}var re=this.circleCells[m];if(re!==null)for(var fe=this.circles,_e=0,Ee=re;_e<Ee.length;_e+=1){var Ce=Ee[_e];if(!N.circle[Ce]){N.circle[Ce]=!0;var Me=3*Ce;if(this._circlesCollide(fe[Me],fe[Me+1],fe[Me+2],D.x,D.y,D.radius)&&(!I||I(this.circleKeys[Ce])))return w.push(!0),!0}}},Ft.prototype._forEachCell=function(n,s,a,u,m,w,E,I){for(var D=this._convertToXCellCoord(n),N=this._convertToYCellCoord(s),J=this._convertToXCellCoord(a),Y=this._convertToYCellCoord(u),Q=D;Q<=J;Q++)for(var se=N;se<=Y;se++)if(m.call(this,n,s,a,u,this.xCellCount*se+Q,w,E,I))return},Ft.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},Ft.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},Ft.prototype._circlesCollide=function(n,s,a,u,m,w){var E=u-n,I=m-s,D=a+w;return D*D>E*E+I*I},Ft.prototype._circleAndRectCollide=function(n,s,a,u,m,w,E){var I=(w-u)/2,D=Math.abs(n-(u+I));if(D>I+a)return!1;var N=(E-m)/2,J=Math.abs(s-(m+N));if(J>N+a)return!1;if(D<=I||J<=N)return!0;var Y=D-I,Q=J-N;return Y*Y+Q*Q<=a*a};var An=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Fr(n,s){for(var a=0;a<n;a++){var u=s.length;s.resize(u+4),s.float32.set(An,3*u)}}function xr(n,s,a){var u=s[0],m=s[1];return n[0]=a[0]*u+a[4]*m+a[12],n[1]=a[1]*u+a[5]*m+a[13],n[3]=a[3]*u+a[7]*m+a[15],n}var Br=function(n,s,a){s===void 0&&(s=new Ft(n.width+200,n.height+200,25)),a===void 0&&(a=new Ft(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function or(n,s,a){return s*(o.EXTENT/(n.tileSize*Math.pow(2,a-n.tileID.overscaledZ)))}Br.prototype.placeCollisionBox=function(n,s,a,u,m){var w=this.projectAndGetPerspectiveRatio(u,n.anchorPointX,n.anchorPointY),E=a*w.perspectiveRatio,I=n.x1*E+w.point.x,D=n.y1*E+w.point.y,N=n.x2*E+w.point.x,J=n.y2*E+w.point.y;return!this.isInsideGrid(I,D,N,J)||!s&&this.grid.hitTest(I,D,N,J,m)?{box:[],offscreen:!1}:{box:[I,D,N,J],offscreen:this.isOffscreen(I,D,N,J)}},Br.prototype.placeCollisionCircles=function(n,s,a,u,m,w,E,I,D,N,J,Y,Q){var se=[],ae=new o.Point(s.anchorX,s.anchorY),ce=Wt(ae,w),re=Ht(this.transform.cameraToCenterDistance,ce.signedDistanceFromCamera),fe=(N?m/re:m*re)/o.ONE_EM,_e=Wt(ae,E).point,Ee=oi(fe,u,s.lineOffsetX*fe,s.lineOffsetY*fe,!1,_e,ae,s,a,E,{}),Ce=!1,Me=!1,Oe=!0;if(Ee){for(var Ze=.5*Y*re+Q,We=new o.Point(-100,-100),He=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new gr,kt=Ee.first,dt=Ee.last,vt=[],er=kt.path.length-1;er>=1;er--)vt.push(kt.path[er]);for(var at=1;at<dt.path.length;at++)vt.push(dt.path[at]);var Ut=2.5*Ze;if(I){var Kt=vt.map(function(gs){return Wt(gs,I)});vt=Kt.some(function(gs){return gs.signedDistanceFromCamera<=0})?[]:Kt.map(function(gs){return gs.point})}var jt=[];if(vt.length>0){for(var Nt=vt[0].clone(),Zt=vt[0].clone(),Mt=1;Mt<vt.length;Mt++)Nt.x=Math.min(Nt.x,vt[Mt].x),Nt.y=Math.min(Nt.y,vt[Mt].y),Zt.x=Math.max(Zt.x,vt[Mt].x),Zt.y=Math.max(Zt.y,vt[Mt].y);jt=Nt.x>=We.x&&Zt.x<=He.x&&Nt.y>=We.y&&Zt.y<=He.y?[vt]:Zt.x<We.x||Nt.x>He.x||Zt.y<We.y||Nt.y>He.y?[]:o.clipLine([vt],We.x,We.y,He.x,He.y)}for(var Rt=0,Hi=jt;Rt<Hi.length;Rt+=1){var Ci;ut.reset(Hi[Rt],.25*Ze),Ci=ut.length<=.5*Ze?1:Math.ceil(ut.paddedLength/Ut)+1;for(var va=0;va<Ci;va++){var Vn=va/Math.max(Ci-1,1),ui=ut.lerp(Vn),on=ui.x+100,bn=ui.y+100;se.push(on,bn,Ze,0);var ji=on-Ze,ho=bn-Ze,qa=on+Ze,Za=bn+Ze;if(Oe=Oe&&this.isOffscreen(ji,ho,qa,Za),Me=Me||this.isInsideGrid(ji,ho,qa,Za),!n&&this.grid.hitTestCircle(on,bn,Ze,J)&&(Ce=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!D&&Ce||!Me?[]:se,offscreen:Oe,collisionDetected:Ce}},Br.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,u=1/0,m=-1/0,w=-1/0,E=0,I=n;E<I.length;E+=1){var D=I[E],N=new o.Point(D.x+100,D.y+100);a=Math.min(a,N.x),u=Math.min(u,N.y),m=Math.max(m,N.x),w=Math.max(w,N.y),s.push(N)}for(var J={},Y={},Q=0,se=this.grid.query(a,u,m,w).concat(this.ignoredGrid.query(a,u,m,w));Q<se.length;Q+=1){var ae=se[Q],ce=ae.key;if(J[ce.bucketInstanceId]===void 0&&(J[ce.bucketInstanceId]={}),!J[ce.bucketInstanceId][ce.featureIndex]){var re=[new o.Point(ae.x1,ae.y1),new o.Point(ae.x2,ae.y1),new o.Point(ae.x2,ae.y2),new o.Point(ae.x1,ae.y2)];o.polygonIntersectsPolygon(s,re)&&(J[ce.bucketInstanceId][ce.featureIndex]=!0,Y[ce.bucketInstanceId]===void 0&&(Y[ce.bucketInstanceId]=[]),Y[ce.bucketInstanceId].push(ce.featureIndex))}}return Y},Br.prototype.insertCollisionBox=function(n,s,a,u,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:u,collisionGroupID:m},n[0],n[1],n[2],n[3])},Br.prototype.insertCollisionCircles=function(n,s,a,u,m){for(var w=s?this.ignoredGrid:this.grid,E={bucketInstanceId:a,featureIndex:u,collisionGroupID:m},I=0;I<n.length;I+=4)w.insertCircle(E,n[I],n[I+1],n[I+2])},Br.prototype.projectAndGetPerspectiveRatio=function(n,s,a){var u=[s,a,0,1];return xr(u,u,n),{point:new o.Point((u[0]/u[3]+1)/2*this.transform.width+100,(-u[1]/u[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/u[3]*.5}},Br.prototype.isOffscreen=function(n,s,a,u){return a<100||n>=this.screenRightBoundary||u<100||s>this.screenBottomBoundary},Br.prototype.isInsideGrid=function(n,s,a,u){return a>=0&&n<this.gridRightBoundary&&u>=0&&s<this.gridBottomBoundary},Br.prototype.getViewportMatrix=function(){var n=o.identity([]);return o.translate(n,n,[-100,-100,0]),n};var zi=function(n,s,a,u){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):u&&a?1:0,this.placed=a};zi.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Ii=function(n,s,a,u,m){this.text=new zi(n?n.text:null,s,a,m),this.icon=new zi(n?n.icon:null,s,u,m)};Ii.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tl=function(n,s,a){this.text=n,this.icon=s,this.skipFade=a},Fi=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},en=function(n,s,a,u,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=u,this.tileID=m},Vr=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Vi(n,s,a,u,m){var w=o.getAnchorAlignment(n),E=-(w.horizontalAlign-.5)*s,I=-(w.verticalAlign-.5)*a,D=o.evaluateVariableOffset(n,u);return new o.Point(E+D[0]*m,I+D[1]*m)}function zn(n,s,a,u,m,w){var E=n.x1,I=n.x2,D=n.y1,N=n.y2,J=n.anchorPointX,Y=n.anchorPointY,Q=new o.Point(s,a);return u&&Q._rotate(m?w:-w),{x1:E+Q.x,y1:D+Q.y,x2:I+Q.x,y2:N+Q.y,anchorPointX:J,anchorPointY:Y}}Vr.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[n]};var Ki=function(n,s,a,u){this.transform=n.clone(),this.collisionIndex=new Br(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Vr(a),this.collisionCircleArrays={},this.prevPlacement=u,u&&(u.prevPlacement=void 0),this.placedOrientations={}};function eo(n,s,a,u,m){n.emplaceBack(s?1:0,a?1:0,u||0,m||0),n.emplaceBack(s?1:0,a?1:0,u||0,m||0),n.emplaceBack(s?1:0,a?1:0,u||0,m||0),n.emplaceBack(s?1:0,a?1:0,u||0,m||0)}Ki.prototype.getBucketParts=function(n,s,a,u){var m=a.getBucket(s),w=a.latestFeatureIndex;if(m&&w&&s.id===m.layerIds[0]){var E=a.collisionBoxArray,I=m.layers[0].layout,D=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),N=a.tileSize/o.EXTENT,J=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),Y=I.get("text-pitch-alignment")==="map",Q=I.get("text-rotation-alignment")==="map",se=or(a,1,this.transform.zoom),ae=Dr(J,Y,Q,this.transform,se),ce=null;if(Y){var re=ar(J,Y,Q,this.transform,se);ce=o.multiply([],this.transform.labelPlaneMatrix,re)}this.retainedQueryData[m.bucketInstanceId]=new en(m.bucketInstanceId,w,m.sourceLayerIndex,m.index,a.tileID);var fe={bucket:m,layout:I,posMatrix:J,textLabelPlaneMatrix:ae,labelToScreenMatrix:ce,scale:D,textPixelRatio:N,holdingForFade:a.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(u)for(var _e=0,Ee=m.sortKeyRanges;_e<Ee.length;_e+=1){var Ce=Ee[_e];n.push({sortKey:Ce.sortKey,symbolInstanceStart:Ce.symbolInstanceStart,symbolInstanceEnd:Ce.symbolInstanceEnd,parameters:fe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:fe})}},Ki.prototype.attemptAnchorPlacement=function(n,s,a,u,m,w,E,I,D,N,J,Y,Q,se,ae){var ce,re=[Y.textOffset0,Y.textOffset1],fe=Vi(n,a,u,re,m),_e=this.collisionIndex.placeCollisionBox(zn(s,fe.x,fe.y,w,E,this.transform.angle),J,I,D,N.predicate);if(!ae||this.collisionIndex.placeCollisionBox(zn(ae,fe.x,fe.y,w,E,this.transform.angle),J,I,D,N.predicate).box.length!==0)return _e.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(ce=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),this.variableOffsets[Y.crossTileID]={textOffset:re,width:a,height:u,anchor:n,textBoxScale:m,prevAnchor:ce},this.markUsedJustification(Q,n,Y,se),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,se,Y),this.placedOrientations[Y.crossTileID]=se),{shift:fe,placedGlyphBoxes:_e}):void 0},Ki.prototype.placeLayerBucketPart=function(n,s,a){var u=this,m=n.parameters,w=m.bucket,E=m.layout,I=m.posMatrix,D=m.textLabelPlaneMatrix,N=m.labelToScreenMatrix,J=m.textPixelRatio,Y=m.holdingForFade,Q=m.collisionBoxArray,se=m.partiallyEvaluatedTextSize,ae=m.collisionGroup,ce=E.get("text-optional"),re=E.get("icon-optional"),fe=E.get("text-allow-overlap"),_e=E.get("icon-allow-overlap"),Ee=E.get("text-rotation-alignment")==="map",Ce=E.get("text-pitch-alignment")==="map",Me=E.get("icon-text-fit")!=="none",Oe=E.get("symbol-z-order")==="viewport-y",Ze=fe&&(_e||!w.hasIconData()||re),We=_e&&(fe||!w.hasTextData()||ce);!w.collisionArrays&&Q&&w.deserializeCollisionBoxes(Q);var He=function(at,Ut){if(!s[at.crossTileID])if(Y)u.placements[at.crossTileID]=new tl(!1,!1,!1);else{var Kt,jt=!1,Nt=!1,Zt=!0,Mt=null,Rt={box:null,offscreen:null},Hi={box:null,offscreen:null},Ci=null,va=null,Vn=0,ui=0,on=0;Ut.textFeatureIndex?Vn=Ut.textFeatureIndex:at.useRuntimeCollisionCircles&&(Vn=at.featureIndex),Ut.verticalTextFeatureIndex&&(ui=Ut.verticalTextFeatureIndex);var bn=Ut.textBox;if(bn){var ji=function(dr){var ko=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!dr&&u.prevPlacement){var Nn=u.prevPlacement.placedOrientations[at.crossTileID];Nn&&(u.placedOrientations[at.crossTileID]=Nn,u.markUsedOrientation(w,ko=Nn,at))}return ko},ho=function(dr,ko){if(w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&Ut.verticalTextBox)for(var Nn=0,$l=w.writingModes;Nn<$l.length&&($l[Nn]===o.WritingMode.vertical?(Rt=ko(),Hi=Rt):Rt=dr(),!(Rt&&Rt.box&&Rt.box.length));Nn+=1);else Rt=dr()};if(E.get("text-variable-anchor")){var qa=E.get("text-variable-anchor");if(u.prevPlacement&&u.prevPlacement.variableOffsets[at.crossTileID]){var Za=u.prevPlacement.variableOffsets[at.crossTileID];qa.indexOf(Za.anchor)>0&&(qa=qa.filter(function(dr){return dr!==Za.anchor})).unshift(Za.anchor)}var gs=function(dr,ko,Nn){for(var $l=dr.x2-dr.x1,Jc=dr.y2-dr.y1,Ks=at.textBoxScale,eu=Me&&!_e?ko:null,tu={box:[],offscreen:!1},Bl=fe?2*qa.length:qa.length,Hs=0;Hs<Bl;++Hs){var wu=u.attemptAnchorPlacement(qa[Hs%qa.length],dr,$l,Jc,Ks,Ee,Ce,J,I,ae,Hs>=qa.length,at,w,Nn,eu);if(wu&&(tu=wu.placedGlyphBoxes)&&tu.box&&tu.box.length){jt=!0,Mt=wu.shift;break}}return tu};ho(function(){return gs(bn,Ut.iconBox,o.WritingMode.horizontal)},function(){var dr=Ut.verticalTextBox;return w.allowVerticalPlacement&&!(Rt&&Rt.box&&Rt.box.length)&&at.numVerticalGlyphVertices>0&&dr?gs(dr,Ut.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Rt&&(jt=Rt.box,Zt=Rt.offscreen);var Yl=ji(Rt&&Rt.box);if(!jt&&u.prevPlacement){var _s=u.prevPlacement.variableOffsets[at.crossTileID];_s&&(u.variableOffsets[at.crossTileID]=_s,u.markUsedJustification(w,_s.anchor,at,Yl))}}else{var Zo=function(dr,ko){var Nn=u.collisionIndex.placeCollisionBox(dr,fe,J,I,ae.predicate);return Nn&&Nn.box&&Nn.box.length&&(u.markUsedOrientation(w,ko,at),u.placedOrientations[at.crossTileID]=ko),Nn};ho(function(){return Zo(bn,o.WritingMode.horizontal)},function(){var dr=Ut.verticalTextBox;return w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&dr?Zo(dr,o.WritingMode.vertical):{box:null,offscreen:null}}),ji(Rt&&Rt.box&&Rt.box.length)}}if(jt=(Kt=Rt)&&Kt.box&&Kt.box.length>0,Zt=Kt&&Kt.offscreen,at.useRuntimeCollisionCircles){var Rl=w.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex),Ms=o.evaluateSizeForFeature(w.textSizeData,se,Rl),Go=E.get("text-padding");Ci=u.collisionIndex.placeCollisionCircles(fe,Rl,w.lineVertexArray,w.glyphOffsetArray,Ms,I,D,N,a,Ce,ae.predicate,at.collisionCircleDiameter,Go),jt=fe||Ci.circles.length>0&&!Ci.collisionDetected,Zt=Zt&&Ci.offscreen}if(Ut.iconFeatureIndex&&(on=Ut.iconFeatureIndex),Ut.iconBox){var Ql=function(dr){var ko=Me&&Mt?zn(dr,Mt.x,Mt.y,Ee,Ce,u.transform.angle):dr;return u.collisionIndex.placeCollisionBox(ko,_e,J,I,ae.predicate)};Nt=Hi&&Hi.box&&Hi.box.length&&Ut.verticalIconBox?(va=Ql(Ut.verticalIconBox)).box.length>0:(va=Ql(Ut.iconBox)).box.length>0,Zt=Zt&&va.offscreen}var vs=ce||at.numHorizontalGlyphVertices===0&&at.numVerticalGlyphVertices===0,qi=re||at.numIconVertices===0;if(vs||qi?qi?vs||(Nt=Nt&&jt):jt=Nt&&jt:Nt=jt=Nt&&jt,jt&&Kt&&Kt.box&&u.collisionIndex.insertCollisionBox(Kt.box,E.get("text-ignore-placement"),w.bucketInstanceId,Hi&&Hi.box&&ui?ui:Vn,ae.ID),Nt&&va&&u.collisionIndex.insertCollisionBox(va.box,E.get("icon-ignore-placement"),w.bucketInstanceId,on,ae.ID),Ci&&(jt&&u.collisionIndex.insertCollisionCircles(Ci.circles,E.get("text-ignore-placement"),w.bucketInstanceId,Vn,ae.ID),a)){var Ds=w.bucketInstanceId,Ga=u.collisionCircleArrays[Ds];Ga===void 0&&(Ga=u.collisionCircleArrays[Ds]=new Fi);for(var Ra=0;Ra<Ci.circles.length;Ra+=4)Ga.circles.push(Ci.circles[Ra+0]),Ga.circles.push(Ci.circles[Ra+1]),Ga.circles.push(Ci.circles[Ra+2]),Ga.circles.push(Ci.collisionDetected?1:0)}u.placements[at.crossTileID]=new tl(jt||Ze,Nt||We,Zt||w.justReloaded),s[at.crossTileID]=!0}};if(Oe)for(var ut=w.getSortedSymbolIndexes(this.transform.angle),kt=ut.length-1;kt>=0;--kt){var dt=ut[kt];He(w.symbolInstances.get(dt),w.collisionArrays[dt])}else for(var vt=n.symbolInstanceStart;vt<n.symbolInstanceEnd;vt++)He(w.symbolInstances.get(vt),w.collisionArrays[vt]);if(a&&w.bucketInstanceId in this.collisionCircleArrays){var er=this.collisionCircleArrays[w.bucketInstanceId];o.invert(er.invProjMatrix,I),er.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Ki.prototype.markUsedJustification=function(n,s,a,u){var m;m=u===o.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(s)];for(var w=0,E=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var I=E[w];I>=0&&(n.text.placedSymbolArray.get(I).crossTileID=m>=0&&I!==m?0:a.crossTileID)}},Ki.prototype.markUsedOrientation=function(n,s,a){for(var u=s===o.WritingMode.horizontal||s===o.WritingMode.horizontalOnly?s:0,m=s===o.WritingMode.vertical?s:0,w=0,E=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];w<E.length;w+=1)n.text.placedSymbolArray.get(E[w]).placedOrientation=u;a.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},Ki.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var u=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},w=s?s.variableOffsets:{},E=s?s.placedOrientations:{};for(var I in this.placements){var D=this.placements[I],N=m[I];N?(this.opacities[I]=new Ii(N,u,D.text,D.icon),a=a||D.text!==N.text.placed||D.icon!==N.icon.placed):(this.opacities[I]=new Ii(null,u,D.text,D.icon,D.skipFade),a=a||D.text||D.icon)}for(var J in m){var Y=m[J];if(!this.opacities[J]){var Q=new Ii(Y,u,!1,!1);Q.isHidden()||(this.opacities[J]=Q,a=a||Y.text.placed||Y.icon.placed)}}for(var se in w)this.variableOffsets[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.variableOffsets[se]=w[se]);for(var ae in E)this.placedOrientations[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.placedOrientations[ae]=E[ae]);a?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},Ki.prototype.updateLayerOpacities=function(n,s){for(var a={},u=0,m=s;u<m.length;u+=1){var w=m[u],E=w.getBucket(n);E&&w.latestFeatureIndex&&n.id===E.layerIds[0]&&this.updateBucketOpacities(E,a,w.collisionBoxArray)}},Ki.prototype.updateBucketOpacities=function(n,s,a){var u=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,w=new Ii(null,0,!1,!1,!0),E=m.get("text-allow-overlap"),I=m.get("icon-allow-overlap"),D=m.get("text-variable-anchor"),N=m.get("text-rotation-alignment")==="map",J=m.get("text-pitch-alignment")==="map",Y=m.get("icon-text-fit")!=="none",Q=new Ii(null,0,E&&(I||!n.hasIconData()||m.get("icon-optional")),I&&(E||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&a&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(a);for(var se=function(fe,_e,Ee){for(var Ce=0;Ce<_e/4;Ce++)fe.opacityVertexArray.emplaceBack(Ee)},ae=function(fe){var _e=n.symbolInstances.get(fe),Ee=_e.numHorizontalGlyphVertices,Ce=_e.numVerticalGlyphVertices,Me=_e.crossTileID,Oe=u.opacities[Me];s[Me]?Oe=w:Oe||(u.opacities[Me]=Oe=Q),s[Me]=!0;var Ze=_e.numIconVertices>0,We=u.placedOrientations[_e.crossTileID],He=We===o.WritingMode.vertical,ut=We===o.WritingMode.horizontal||We===o.WritingMode.horizontalOnly;if(Ee>0||Ce>0){var kt=Co(Oe.text);se(n.text,Ee,He?Cn:kt),se(n.text,Ce,ut?Cn:kt);var dt=Oe.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(function(Rt){Rt>=0&&(n.text.placedSymbolArray.get(Rt).hidden=dt||He?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=dt||ut?1:0);var vt=u.variableOffsets[_e.crossTileID];vt&&u.markUsedJustification(n,vt.anchor,_e,We);var er=u.placedOrientations[_e.crossTileID];er&&(u.markUsedJustification(n,"left",_e,er),u.markUsedOrientation(n,er,_e))}if(Ze){var at=Co(Oe.icon),Ut=!(Y&&_e.verticalPlacedIconSymbolIndex&&He);_e.placedIconSymbolIndex>=0&&(se(n.icon,_e.numIconVertices,Ut?at:Cn),n.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(se(n.icon,_e.numVerticalIconVertices,Ut?Cn:at),n.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Kt=n.collisionArrays[fe];if(Kt){var jt=new o.Point(0,0);if(Kt.textBox||Kt.verticalTextBox){var Nt=!0;if(D){var Zt=u.variableOffsets[Me];Zt?(jt=Vi(Zt.anchor,Zt.width,Zt.height,Zt.textOffset,Zt.textBoxScale),N&&jt._rotate(J?u.transform.angle:-u.transform.angle)):Nt=!1}Kt.textBox&&eo(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Nt||He,jt.x,jt.y),Kt.verticalTextBox&&eo(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Nt||ut,jt.x,jt.y)}var Mt=Boolean(!ut&&Kt.verticalIconBox);Kt.iconBox&&eo(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Mt,Y?jt.x:0,Y?jt.y:0),Kt.verticalIconBox&&eo(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Mt,Y?jt.x:0,Y?jt.y:0)}}},ce=0;ce<n.symbolInstances.length;ce++)ae(ce);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var re=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=re.invProjMatrix,n.placementViewportMatrix=re.viewportMatrix,n.collisionCircleArray=re.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},Ki.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ki.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},Ki.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},Ki.prototype.stillRecent=function(n,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>n},Ki.prototype.setStale=function(){this.stale=!0};var Pn=Math.pow(2,25),Ea=Math.pow(2,24),ca=Math.pow(2,17),ha=Math.pow(2,16),vn=Math.pow(2,9),to=Math.pow(2,8),Sa=Math.pow(2,1);function Co(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,a=Math.floor(127*n.opacity);return a*Pn+s*Ea+a*ca+s*ha+a*vn+s*to+a*Sa+s}var Cn=0,rl=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};rl.prototype.continuePlacement=function(n,s,a,u,m){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,u,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,I){return E.sortKey-I.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var $o=function(n,s,a,u,m,w,E){this.placement=new Ki(n,m,w,E),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=u,this._done=!1};$o.prototype.isDone=function(){return this._done},$o.prototype.continuePlacement=function(n,s,a){for(var u=this,m=o.browser.now(),w=function(){var D=o.browser.now()-m;return!u._forceFullPlacement&&D>2};this._currentPlacementIndex>=0;){var E=s[n[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=I)&&(!E.maxzoom||E.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new rl(E)),this._inProgressLayer.continuePlacement(a[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},$o.prototype.commit=function(n){return this.placement.commit(n),this.placement};var pa=512/o.EXTENT/2,Hn=function(n,s,a){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var u=0;u<s.length;u++){var m=s.get(u),w=m.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};Hn.prototype.getScaledCoordinates=function(n,s){var a=pa/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*o.EXTENT+n.anchorX)*a),y:Math.floor((s.canonical.y*o.EXTENT+n.anchorY)*a)}},Hn.prototype.findMatches=function(n,s,a){for(var u=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var w=n.get(m);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var I=this.getScaledCoordinates(w,s),D=0,N=E;D<N.length;D+=1){var J=N[D];if(Math.abs(J.coord.x-I.x)<=u&&Math.abs(J.coord.y-I.y)<=u&&!a[J.crossTileID]){a[J.crossTileID]=!0,w.crossTileID=J.crossTileID;break}}}}};var Mn=function(){this.maxCrossTileID=0};Mn.prototype.generate=function(){return++this.maxCrossTileID};var Xn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Xn.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var a in this.indexes){var u=this.indexes[a],m={};for(var w in u){var E=u[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+s),m[E.tileID.key]=E}this.indexes[a]=m}this.lng=n},Xn.prototype.addBucket=function(n,s,a){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var u=0;u<s.symbolInstances.length;u++)s.symbolInstances.get(u).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>n.overscaledZ)for(var I in E){var D=E[I];D.tileID.isChildOf(n)&&D.findMatches(s.symbolInstances,n,m)}else{var N=E[n.scaledTo(Number(w)).key];N&&N.findMatches(s.symbolInstances,n,m)}}for(var J=0;J<s.symbolInstances.length;J++){var Y=s.symbolInstances.get(J);Y.crossTileID||(Y.crossTileID=a.generate(),m[Y.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Hn(n,s.symbolInstances,s.bucketInstanceId),!0},Xn.prototype.removeBucketCrossTileIDs=function(n,s){for(var a in s.indexedSymbolInstances)for(var u=0,m=s.indexedSymbolInstances[a];u<m.length;u+=1)delete this.usedCrossTileIDs[n][m[u].crossTileID]},Xn.prototype.removeStaleBuckets=function(n){var s=!1;for(var a in this.indexes){var u=this.indexes[a];for(var m in u)n[u[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,u[m]),delete u[m],s=!0)}return s};var xe=function(){this.layerIndexes={},this.crossTileIDs=new Mn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};xe.prototype.addLayer=function(n,s,a){var u=this.layerIndexes[n.id];u===void 0&&(u=this.layerIndexes[n.id]=new Xn);var m=!1,w={};u.handleWrapJump(a);for(var E=0,I=s;E<I.length;E+=1){var D=I[E],N=D.getBucket(n);N&&n.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(D.tileID,N,this.crossTileIDs)&&(m=!0),w[N.bucketInstanceId]=!0)}return u.removeStaleBuckets(w)&&(m=!0),m},xe.prototype.pruneUnusedLayers=function(n){var s={};for(var a in n.forEach(function(u){s[u]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var Yr=function(n,s){return o.emitValidationErrors(n,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},Hr=o.pick(Je,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),hr=o.pick(Je,["setCenter","setZoom","setBearing","setPitch"]),ro=function(){var n={},s=o.styleSpec.$version;for(var a in o.styleSpec.$root){var u,m=o.styleSpec.$root[a];m.required&&(u=a==="version"?s:m.type==="array"?[]:{})!=null&&(n[a]=u)}return n}(),mi=function(n){function s(a,u){var m=this;u===void 0&&(u={}),n.call(this),this.map=a,this.dispatcher=new kr(Pe(),this),this.imageManager=new Ve,this.imageManager.setEventedParent(this),this.glyphManager=new Jt(a._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Ot(256,512),this.crossTileSymbolIndex=new xe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(I,D){if(o.triggerPluginCompletionEvent(I),D&&D.every(function(J){return J}))for(var N in w.sourceCaches)w.sourceCaches[N].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var I=m.sourceCaches[E.sourceId];if(I){var D=I.getSource();if(D&&D.vectorLayerIds)for(var N in m._layers){var J=m._layers[N];J.source===D.id&&m._validateLayer(J)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(a,u){var m=this;u===void 0&&(u={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var w=typeof u.validate=="boolean"?u.validate:!o.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,u.accessToken);var E=this.map._requestManager.transformRequest(a,o.ResourceType.Style);this._request=o.getJSON(E,function(I,D){m._request=null,I?m.fire(new o.ErrorEvent(I)):D&&m._load(D,w)})},s.prototype.loadJSON=function(a,u){var m=this;u===void 0&&(u={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){m._request=null,m._load(a,u.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(ro,!1)},s.prototype._load=function(a,u){if(!u||!Yr(this,o.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var w=Ke(this.stylesheet.layers);this._order=w.map(function(N){return N.id}),this._layers={},this._serializedLayers={};for(var E=0,I=w;E<I.length;E+=1){var D=I[E];(D=o.createStyleLayer(D)).setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new vr(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},s.prototype._loadSprite=function(a){var u=this;this._spriteRequest=function(m,w,E){var I,D,N,J=o.browser.devicePixelRatio>1?"@2x":"",Y=o.getJSON(w.transformRequest(w.normalizeSpriteURL(m,J,".json"),o.ResourceType.SpriteJSON),function(ae,ce){Y=null,N||(N=ae,I=ce,se())}),Q=o.getImage(w.transformRequest(w.normalizeSpriteURL(m,J,".png"),o.ResourceType.SpriteImage),function(ae,ce){Q=null,N||(N=ae,D=ce,se())});function se(){if(N)E(N);else if(I&&D){var ae=o.browser.getImageData(D),ce={};for(var re in I){var fe=I[re],_e=fe.width,Ee=fe.height,Ce=fe.x,Me=fe.y,Oe=fe.sdf,Ze=fe.pixelRatio,We=fe.stretchX,He=fe.stretchY,ut=fe.content,kt=new o.RGBAImage({width:_e,height:Ee});o.RGBAImage.copy(ae,kt,{x:Ce,y:Me},{x:0,y:0},{width:_e,height:Ee}),ce[re]={data:kt,pixelRatio:Ze,sdf:Oe,stretchX:We,stretchY:He,content:ut}}E(null,ce)}}return{cancel:function(){Y&&(Y.cancel(),Y=null),Q&&(Q.cancel(),Q=null)}}}(a,this.map._requestManager,function(m,w){if(u._spriteRequest=null,m)u.fire(new o.ErrorEvent(m));else if(w)for(var E in w)u.imageManager.addImage(E,w[E]);u.imageManager.setLoaded(!0),u._availableImages=u.imageManager.listImages(),u.dispatcher.broadcast("setImages",u._availableImages),u.fire(new o.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var u=this.sourceCaches[a.source];if(u){var m=a.sourceLayer;if(m){var w=u.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+w.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var u=[],m=0,w=a;m<w.length;m+=1){var E=this._layers[w[m]];E.type!=="custom"&&u.push(E.serialize())}return u},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var u in this._layers)if(this._layers[u].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var u=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(m.length||w.length)&&this._updateWorkerLayers(m,w),this._updatedSources){var I=this._updatedSources[E];I==="reload"?this._reloadSource(E):I==="clear"&&this._clearSource(E)}for(var D in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[D].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var N={};for(var J in this.sourceCaches){var Y=this.sourceCaches[J];N[J]=Y.used,Y.used=!1}for(var Q=0,se=this._order;Q<se.length;Q+=1){var ae=this._layers[se[Q]];ae.recalculate(a,this._availableImages),!ae.isHidden(a.zoom)&&ae.source&&(this.sourceCaches[ae.source].used=!0)}for(var ce in N){var re=this.sourceCaches[ce];N[ce]!==re.used&&re.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ce}))}this.light.recalculate(a),this.z=a.zoom,u&&this.fire(new o.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:u})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var u=this;if(this._checkLoaded(),Yr(this,o.validateStyle(a)))return!1;(a=o.clone$1(a)).layers=Ke(a.layers);var m=function(E,I){if(!E)return[{command:Je.setStyle,args:[I]}];var D=[];try{if(!o.deepEqual(E.version,I.version))return[{command:Je.setStyle,args:[I]}];o.deepEqual(E.center,I.center)||D.push({command:Je.setCenter,args:[I.center]}),o.deepEqual(E.zoom,I.zoom)||D.push({command:Je.setZoom,args:[I.zoom]}),o.deepEqual(E.bearing,I.bearing)||D.push({command:Je.setBearing,args:[I.bearing]}),o.deepEqual(E.pitch,I.pitch)||D.push({command:Je.setPitch,args:[I.pitch]}),o.deepEqual(E.sprite,I.sprite)||D.push({command:Je.setSprite,args:[I.sprite]}),o.deepEqual(E.glyphs,I.glyphs)||D.push({command:Je.setGlyphs,args:[I.glyphs]}),o.deepEqual(E.transition,I.transition)||D.push({command:Je.setTransition,args:[I.transition]}),o.deepEqual(E.light,I.light)||D.push({command:Je.setLight,args:[I.light]});var N={},J=[];(function(Q,se,ae,ce){var re;for(re in se=se||{},Q=Q||{})Q.hasOwnProperty(re)&&(se.hasOwnProperty(re)||$e(re,ae,ce));for(re in se)se.hasOwnProperty(re)&&(Q.hasOwnProperty(re)?o.deepEqual(Q[re],se[re])||(Q[re].type==="geojson"&&se[re].type==="geojson"&&yr(Q,se,re)?ae.push({command:Je.setGeoJSONSourceData,args:[re,se[re].data]}):Gt(re,se,ae,ce)):Ct(re,se,ae))})(E.sources,I.sources,J,N);var Y=[];E.layers&&E.layers.forEach(function(Q){N[Q.source]?D.push({command:Je.removeLayer,args:[Q.id]}):Y.push(Q)}),D=D.concat(J),function(Q,se,ae){se=se||[];var ce,re,fe,_e,Ee,Ce,Me,Oe=(Q=Q||[]).map(qt),Ze=se.map(qt),We=Q.reduce(Dt,{}),He=se.reduce(Dt,{}),ut=Oe.slice(),kt=Object.create(null);for(ce=0,re=0;ce<Oe.length;ce++)He.hasOwnProperty(fe=Oe[ce])?re++:(ae.push({command:Je.removeLayer,args:[fe]}),ut.splice(ut.indexOf(fe,re),1));for(ce=0,re=0;ce<Ze.length;ce++)ut[ut.length-1-ce]!==(fe=Ze[Ze.length-1-ce])&&(We.hasOwnProperty(fe)?(ae.push({command:Je.removeLayer,args:[fe]}),ut.splice(ut.lastIndexOf(fe,ut.length-re),1)):re++,ae.push({command:Je.addLayer,args:[He[fe],Ce=ut[ut.length-ce]]}),ut.splice(ut.length-ce,0,fe),kt[fe]=!0);for(ce=0;ce<Ze.length;ce++)if(_e=We[fe=Ze[ce]],Ee=He[fe],!kt[fe]&&!o.deepEqual(_e,Ee))if(o.deepEqual(_e.source,Ee.source)&&o.deepEqual(_e["source-layer"],Ee["source-layer"])&&o.deepEqual(_e.type,Ee.type)){for(Me in Bt(_e.layout,Ee.layout,ae,fe,null,Je.setLayoutProperty),Bt(_e.paint,Ee.paint,ae,fe,null,Je.setPaintProperty),o.deepEqual(_e.filter,Ee.filter)||ae.push({command:Je.setFilter,args:[fe,Ee.filter]}),o.deepEqual(_e.minzoom,Ee.minzoom)&&o.deepEqual(_e.maxzoom,Ee.maxzoom)||ae.push({command:Je.setLayerZoomRange,args:[fe,Ee.minzoom,Ee.maxzoom]}),_e)_e.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Bt(_e[Me],Ee[Me],ae,fe,Me.slice(6),Je.setPaintProperty):o.deepEqual(_e[Me],Ee[Me])||ae.push({command:Je.setLayerProperty,args:[fe,Me,Ee[Me]]}));for(Me in Ee)Ee.hasOwnProperty(Me)&&!_e.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?Bt(_e[Me],Ee[Me],ae,fe,Me.slice(6),Je.setPaintProperty):o.deepEqual(_e[Me],Ee[Me])||ae.push({command:Je.setLayerProperty,args:[fe,Me,Ee[Me]]}))}else ae.push({command:Je.removeLayer,args:[fe]}),Ce=ut[ut.lastIndexOf(fe)+1],ae.push({command:Je.addLayer,args:[Ee,Ce]})}(Y,I.layers,D)}catch(Q){console.warn("Unable to compute style diff:",Q),D=[{command:Je.setStyle,args:[I]}]}return D}(this.serialize(),a).filter(function(E){return!(E.command in hr)});if(m.length===0)return!1;var w=m.filter(function(E){return!(E.command in Hr)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return m.forEach(function(E){E.command!=="setTransition"&&u[E.command].apply(u,E.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,u){if(this.getImage(a))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,u),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,u){this.imageManager.updateImage(a,u)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,u,m){var w=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!u.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(u).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(o.validateStyle.source,"sources."+a,u,null,m))){this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);var E=this.sourceCaches[a]=new te(a,u,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:a}}),E.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var u in this._layers)if(this._layers[u].source===a)return this.fire(new o.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+u+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,u){this._checkLoaded(),this.sourceCaches[a].getSource().setData(u),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,u,m){m===void 0&&(m={}),this._checkLoaded();var w=a.id;if(this.getLayer(w))this.fire(new o.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(a.type==="custom"){if(Yr(this,o.validateCustomStyleLayer(a)))return;E=o.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(w,a.source),a=o.clone$1(a),a=o.extend(a,{source:w})),this._validate(o.validateStyle.layer,"layers."+w,a,{arrayIndex:-1},m))return;E=o.createStyleLayer(a),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var I=u?this._order.indexOf(u):this._order.length;if(u&&I===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.')));else{if(this._order.splice(I,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var D=this._removedLayers[w];delete this._removedLayers[w],D.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},s.prototype.moveLayer=function(a,u){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==u){var m=this._order.indexOf(a);this._order.splice(m,1);var w=u?this._order.indexOf(u):this._order.length;u&&w===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.'))):(this._order.splice(w,0,a),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var u=this._layers[a];if(u){u.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=u,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],u.onRemove&&u.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,u,m){this._checkLoaded();var w=this.getLayer(a);w?w.minzoom===u&&w.maxzoom===m||(u!=null&&(w.minzoom=u),m!=null&&(w.maxzoom=m),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,u,m){m===void 0&&(m={}),this._checkLoaded();var w=this.getLayer(a);if(w){if(!o.deepEqual(w.filter,u))return u==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.validateStyle.filter,"layers."+w.id+".filter",u,null,m)||(w.filter=o.clone$1(u),this._updateLayer(w)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return o.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,u,m,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(a);E?o.deepEqual(E.getLayoutProperty(u),m)||(E.setLayoutProperty(u,m,w),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,u){var m=this.getLayer(a);if(m)return m.getLayoutProperty(u);this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,u,m,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(a);E?o.deepEqual(E.getPaintProperty(u),m)||(E.setPaintProperty(u,m,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,u){return this.getLayer(a).getPaintProperty(u)},s.prototype.setFeatureState=function(a,u){this._checkLoaded();var m=a.source,w=a.sourceLayer,E=this.sourceCaches[m];if(E!==void 0){var I=E.getSource().type;I==="geojson"&&w?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||w?(a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,a.id,u)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,u){this._checkLoaded();var m=a.source,w=this.sourceCaches[m];if(w!==void 0){var E=w.getSource().type,I=E==="vector"?a.sourceLayer:void 0;E!=="vector"||I?u&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(I,a.id,u):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var u=a.source,m=a.sourceLayer,w=this.sourceCaches[u];if(w!==void 0){if(w.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(m,a.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+u+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var u=this,m=function(We){return u._layers[We].type==="fill-extrusion"},w={},E=[],I=this._order.length-1;I>=0;I--){var D=this._order[I];if(m(D)){w[D]=I;for(var N=0,J=a;N<J.length;N+=1){var Y=J[N][D];if(Y)for(var Q=0,se=Y;Q<se.length;Q+=1)E.push(se[Q])}}}E.sort(function(We,He){return He.intersectionZ-We.intersectionZ});for(var ae=[],ce=this._order.length-1;ce>=0;ce--){var re=this._order[ce];if(m(re))for(var fe=E.length-1;fe>=0;fe--){var _e=E[fe].feature;if(w[_e.layer.id]<ce)break;ae.push(_e),E.pop()}else for(var Ee=0,Ce=a;Ee<Ce.length;Ee+=1){var Me=Ce[Ee][re];if(Me)for(var Oe=0,Ze=Me;Oe<Ze.length;Oe+=1)ae.push(Ze[Oe].feature)}}return ae},s.prototype.queryRenderedFeatures=function(a,u,m){u&&u.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);var w={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,I=u.layers;E<I.length;E+=1){var D=I[E],N=this._layers[D];if(!N)return this.fire(new o.ErrorEvent(new Error("The layer '"+D+"' does not exist in the map's style and cannot be queried for features."))),[];w[N.source]=!0}}var J=[];for(var Y in u.availableImages=this._availableImages,this.sourceCaches)u.layers&&!w[Y]||J.push(ii(this.sourceCaches[Y],this._layers,this._serializedLayers,a,u,m));return this.placement&&J.push(function(Q,se,ae,ce,re,fe,_e){for(var Ee={},Ce=fe.queryRenderedSymbols(ce),Me=[],Oe=0,Ze=Object.keys(Ce).map(Number);Oe<Ze.length;Oe+=1)Me.push(_e[Ze[Oe]]);Me.sort(Zi);for(var We=function(){var vt=ut[He],er=vt.featureIndex.lookupSymbolFeatures(Ce[vt.bucketInstanceId],se,vt.bucketIndex,vt.sourceLayerIndex,re.filter,re.layers,re.availableImages,Q);for(var at in er){var Ut=Ee[at]=Ee[at]||[],Kt=er[at];Kt.sort(function(Zt,Mt){var Rt=vt.featureSortOrder;if(Rt){var Hi=Rt.indexOf(Zt.featureIndex);return Rt.indexOf(Mt.featureIndex)-Hi}return Mt.featureIndex-Zt.featureIndex});for(var jt=0,Nt=Kt;jt<Nt.length;jt+=1)Ut.push(Nt[jt])}},He=0,ut=Me;He<ut.length;He+=1)We();var kt=function(vt){Ee[vt].forEach(function(er){var at=er.feature,Ut=ae[Q[vt].source].getFeatureState(at.layer["source-layer"],at.id);at.source=at.layer.source,at.layer["source-layer"]&&(at.sourceLayer=at.layer["source-layer"]),at.state=Ut})};for(var dt in Ee)kt(dt);return Ee}(this._layers,this._serializedLayers,this.sourceCaches,a,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(J)},s.prototype.querySourceFeatures=function(a,u){u&&u.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);var m=this.sourceCaches[a];return m?function(w,E){for(var I=w.getRenderableIds().map(function(se){return w.getTileByID(se)}),D=[],N={},J=0;J<I.length;J++){var Y=I[J],Q=Y.tileID.canonical.key;N[Q]||(N[Q]=!0,Y.querySourceFeatures(D,E))}return D}(m,u):[]},s.prototype.addSourceType=function(a,u,m){return s.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:u.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,u){u===void 0&&(u={}),this._checkLoaded();var m=this.light.getLight(),w=!1;for(var E in a)if(!o.deepEqual(a[E],m[E])){w=!0;break}if(w){var I={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,u),this.light.updateTransitions(I)}},s.prototype._validate=function(a,u,m,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&Yr(this,a.call(o.validateStyle,o.extend({key:u,style:this.serialize(),value:m,styleSpec:o.styleSpec},w)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var u in this.sourceCaches)this.sourceCaches[u].clearTiles(),this.sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var u in this.sourceCaches)this.sourceCaches[u].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,u,m,w,E){E===void 0&&(E=!1);for(var I=!1,D=!1,N={},J=0,Y=this._order;J<Y.length;J+=1){var Q=this._layers[Y[J]];if(Q.type==="symbol"){if(!N[Q.source]){var se=this.sourceCaches[Q.source];N[Q.source]=se.getRenderableIds(!0).map(function(_e){return se.getTileByID(_e)}).sort(function(_e,Ee){return Ee.tileID.overscaledZ-_e.tileID.overscaledZ||(_e.tileID.isLessThan(Ee.tileID)?-1:1)})}var ae=this.crossTileSymbolIndex.addLayer(Q,N[Q.source],a.center.lng);I=I||ae}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),a.zoom))&&(this.pauseablePlacement=new $o(a,this._order,E,u,m,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),D=!0),I&&this.pauseablePlacement.placement.setStale()),D||I)for(var ce=0,re=this._order;ce<re.length;ce+=1){var fe=this._layers[re[ce]];fe.type==="symbol"&&this.placement.updateLayerOpacities(fe,N[fe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();var w=this.sourceCaches[u.source];w&&w.setDependencies(u.tileID.key,u.type,u.icons)},s.prototype.getGlyphs=function(a,u,m){this.glyphManager.getGlyphs(u.stacks,m)},s.prototype.getResource=function(a,u,m){return o.makeRequest(u,m)},s}(o.Evented);mi.getSourceType=function(n){return Ti[n]},mi.setSourceType=function(n,s){Ti[n]=s},mi.registerForPluginStateChange=o.registerForPluginStateChange;var qr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),ka=pr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),as=pr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Mo=pr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ju=pr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),il=pr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Va=pr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),mo=pr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Bs=pr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),os=pr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),nl=pr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Hl=pr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Wn=pr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),tn=pr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ia=pr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),gi=pr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fa=pr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Pi=pr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),es=pr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ta=pr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),da=pr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ni=pr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),io=pr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Aa=pr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),wn=pr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Is=pr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ts=pr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function pr(n,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(m):m,I={};return{fragmentSource:n=n.replace(a,function(D,N,J,Y,Q){return I[Q]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
varying `+J+" "+Y+" "+Q+`;
#else
uniform `+J+" "+Y+" u_"+Q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Q+`
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`}),vertexSource:s=s.replace(a,function(D,N,J,Y,Q){var se=Y==="float"?"vec2":"vec4",ae=Q.match(/color/)?"color":se;return I[Q]?N==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+J+" "+se+" a_"+Q+`;
varying `+J+" "+Y+" "+Q+`;
#else
uniform `+J+" "+Y+" u_"+Q+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = a_"+Q+`;
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = unpack_mix_"+ae+"(a_"+Q+", u_"+Q+`_t);
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+J+" "+se+" a_"+Q+`;
#else
uniform `+J+" "+Y+" u_"+Q+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+J+" "+Y+" "+Q+" = a_"+Q+`;
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+J+" "+Y+" "+Q+" = unpack_mix_"+ae+"(a_"+Q+", u_"+Q+`_t);
#else
    `+J+" "+Y+" "+Q+" = u_"+Q+`;
#endif
`}),staticAttributes:u,staticUniforms:E}}var Jn=Object.freeze({__proto__:null,prelude:ka,background:as,backgroundPattern:Mo,circle:Ju,clippingMask:il,heatmap:Va,heatmapTexture:mo,collisionBox:Bs,collisionCircle:os,debug:nl,fill:Hl,fillOutline:Wn,fillOutlinePattern:tn,fillPattern:Ia,fillExtrusion:gi,fillExtrusionPattern:fa,hillshadePrepare:Pi,hillshade:es,line:Ta,lineGradient:da,linePattern:Ni,lineSDF:io,raster:Aa,symbolIcon:wn,symbolSDF:Is,symbolTextAndIcon:Ts}),si=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function cn(n){for(var s=[],a=0;a<n.length;a++)if(n[a]!==null){var u=n[a].split(" ");s.push(u.pop())}return s}si.prototype.bind=function(n,s,a,u,m,w,E,I){this.context=n;for(var D=this.boundPaintVertexBuffers.length!==u.length,N=0;!D&&N<u.length;N++)this.boundPaintVertexBuffers[N]!==u[N]&&(D=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!D&&this.boundIndexBuffer===m&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===I?(n.bindVertexArrayOES.set(this.vao),E&&E.bind(),m&&m.dynamicDraw&&m.bind(),I&&I.bind()):this.freshBind(s,a,u,m,w,E,I)},si.prototype.freshBind=function(n,s,a,u,m,w,E){var I,D=n.numAttributes,N=this.context,J=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=u,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{I=N.currentNumAttributes||0;for(var Y=D;Y<I;Y++)J.disableVertexAttribArray(Y)}s.enableAttributes(J,n);for(var Q=0,se=a;Q<se.length;Q+=1)se[Q].enableAttributes(J,n);w&&w.enableAttributes(J,n),E&&E.enableAttributes(J,n),s.bind(),s.setVertexAttribPointers(J,n,m);for(var ae=0,ce=a;ae<ce.length;ae+=1){var re=ce[ae];re.bind(),re.setVertexAttribPointers(J,n,m)}w&&(w.bind(),w.setVertexAttribPointers(J,n,m)),u&&u.bind(),E&&(E.bind(),E.setVertexAttribPointers(J,n,m)),N.currentNumAttributes=D},si.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var rn=function(n,s,a,u,m,w){var E=n.gl;this.program=E.createProgram();for(var I=cn(a.staticAttributes),D=u?u.getBinderAttributes():[],N=I.concat(D),J=a.staticUniforms?cn(a.staticUniforms):[],Y=u?u.getBinderUniforms():[],Q=[],se=0,ae=J.concat(Y);se<ae.length;se+=1){var ce=ae[se];Q.indexOf(ce)<0&&Q.push(ce)}var re=u?u.defines():[];w&&re.push("#define OVERDRAW_INSPECTOR;");var fe=re.concat(ka.fragmentSource,a.fragmentSource).join(`
`),_e=re.concat(ka.vertexSource,a.vertexSource).join(`
`),Ee=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ee,fe),E.compileShader(Ee),E.attachShader(this.program,Ee);var Ce=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ce,_e),E.compileShader(Ce),E.attachShader(this.program,Ce),this.attributes={};var Me={};this.numAttributes=N.length;for(var Oe=0;Oe<this.numAttributes;Oe++)N[Oe]&&(E.bindAttribLocation(this.program,Oe,N[Oe]),this.attributes[N[Oe]]=Oe);E.linkProgram(this.program),E.deleteShader(Ce),E.deleteShader(Ee);for(var Ze=0;Ze<Q.length;Ze++){var We=Q[Ze];if(We&&!Me[We]){var He=E.getUniformLocation(this.program,We);He&&(Me[We]=He)}}this.fixedUniforms=m(n,Me),this.binderUniforms=u?u.getUniforms(n,Me):[]}}};function _i(n,s,a){var u=1/or(a,1,s.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),w=a.tileSize*Math.pow(2,s.transform.tileZoom)/m,E=w*(a.tileID.canonical.x+a.tileID.wrap*m),I=w*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[u,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[E>>16,I>>16],u_pixel_coord_lower:[65535&E,65535&I]}}rn.prototype.draw=function(n,s,a,u,m,w,E,I,D,N,J,Y,Q,se,ae,ce){var re,fe=n.gl;if(!this.failedToCreate){for(var _e in n.program.set(this.program),n.setDepthMode(a),n.setStencilMode(u),n.setColorMode(m),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[_e].set(E[_e]);se&&se.setUniforms(n,this.binderUniforms,Y,{zoom:Q});for(var Ee=(re={},re[fe.LINES]=2,re[fe.TRIANGLES]=3,re[fe.LINE_STRIP]=1,re)[s],Ce=0,Me=J.get();Ce<Me.length;Ce+=1){var Oe=Me[Ce],Ze=Oe.vaos||(Oe.vaos={});(Ze[I]||(Ze[I]=new si)).bind(n,this,D,se?se.getPaintVertexBuffers():[],N,Oe.vertexOffset,ae,ce),fe.drawElements(s,Oe.primitiveLength*Ee,fe.UNSIGNED_SHORT,Oe.primitiveOffset*Ee*2)}}};var Os=function(n,s,a,u){var m=s.style.light,w=m.properties.get("position"),E=[w.x,w.y,w.z],I=o.create$1();m.properties.get("anchor")==="viewport"&&o.fromRotation(I,-s.transform.angle),o.transformMat3(E,E,I);var D=m.properties.get("color");return{u_matrix:n,u_lightpos:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+a,u_opacity:u}},Yn=function(n,s,a,u,m,w,E){return o.extend(Os(n,s,a,u),_i(w,s,E),{u_height_factor:-Math.pow(2,m.overscaledZ)/E.tileSize/8})},no=function(n){return{u_matrix:n}},Do=function(n,s,a,u){return o.extend(no(n),_i(a,s,u))},ao=function(n,s){return{u_matrix:n,u_world:s}},ss=function(n,s,a,u,m){return o.extend(Do(n,s,a,u),{u_world:m})},za=function(n,s,a,u){var m,w,E=n.transform;if(u.paint.get("circle-pitch-alignment")==="map"){var I=or(a,1,E.zoom);m=!0,w=[I,I]}else m=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,a,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:w}},Dn=function(n,s,a){var u=or(a,1,s.zoom),m=Math.pow(2,s.zoom-a.tileID.overscaledZ),w=a.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:u,u_extrude_scale:[s.pixelsToGLUnits[0]/(u*m),s.pixelsToGLUnits[1]/(u*m)],u_overscale_factor:w}},al=function(n,s,a){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},yo=function(n,s,a){return a===void 0&&(a=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:a}},Ln=function(n){return{u_matrix:n}},hn=function(n,s,a,u){return{u_matrix:n,u_extrude_scale:or(s,1,a),u_intensity:u}},Fs=function(n,s,a){var u=n.transform;return{u_matrix:Rn(n,s,a),u_ratio:1/or(s,1,u.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]]}},wr=function(n,s,a,u){return o.extend(Fs(n,s,a),{u_image:0,u_image_height:u})},ma=function(n,s,a,u){var m=n.transform,w=_t(s,m);return{u_matrix:Rn(n,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/or(s,1,m.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[w,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ue=function(n,s,a,u,m){var w=n.lineAtlas,E=_t(s,n.transform),I=a.layout.get("line-cap")==="round",D=w.getDash(u.from,I),N=w.getDash(u.to,I),J=D.width*m.fromScale,Y=N.width*m.toScale;return o.extend(Fs(n,s,a),{u_patternscale_a:[E/J,-D.height/2],u_patternscale_b:[E/Y,-N.height/2],u_sdfgamma:w.width/(256*Math.min(J,Y)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:N.y,u_mix:m.t})};function _t(n,s){return 1/or(n,1,s.tileZoom)}function Rn(n,s,a){return n.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var go=function(n,s,a,u,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(E=m.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=m.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:_o(m.paint.get("raster-hue-rotate"))};var w,E};function _o(n){n*=Math.PI/180;var s=Math.sin(n),a=Math.cos(n);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var Xl,oo=function(n,s,a,u,m,w,E,I,D,N){var J=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:J.width/J.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:I,u_is_text:+D,u_pitch_with_map:+u,u_texsize:N,u_texture:0}},Lo=function(n,s,a,u,m,w,E,I,D,N,J){var Y=m.transform;return o.extend(oo(n,s,a,u,m,w,E,I,D,N),{u_gamma_scale:u?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+J})},ya=function(n,s,a,u,m,w,E,I,D,N){return o.extend(Lo(n,s,a,u,m,w,E,I,!0,D,!0),{u_texsize_icon:N,u_texture_icon:1})},Vs=function(n,s,a){return{u_matrix:n,u_opacity:s,u_color:a}},vo=function(n,s,a,u,m,w){return o.extend(function(E,I,D,N){var J=D.imageManager.getPattern(E.from.toString()),Y=D.imageManager.getPattern(E.to.toString()),Q=D.imageManager.getPixelSize(),se=Q.width,ae=Q.height,ce=Math.pow(2,N.tileID.overscaledZ),re=N.tileSize*Math.pow(2,D.transform.tileZoom)/ce,fe=re*(N.tileID.canonical.x+N.tileID.wrap*ce),_e=re*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[se,ae],u_mix:I.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/or(N,1,D.transform.tileZoom),u_pixel_coord_upper:[fe>>16,_e>>16],u_pixel_coord_lower:[65535&fe,65535&_e]}}(u,w,a,m),{u_matrix:n,u_opacity:s})},ts={fillExtrusion:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new o.Uniform1f(n,s.u_height_factor),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new o.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new o.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new o.UniformColor(n,s.u_color),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_overlay:new o.Uniform1i(n,s.u_overlay),u_overlay_scale:new o.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new o.Uniform1f(n,s.u_extrude_scale),u_intensity:new o.Uniform1f(n,s.u_intensity),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_color_ramp:new o.Uniform1i(n,s.u_color_ramp),u_opacity:new o.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_latrange:new o.Uniform2f(n,s.u_latrange),u_light:new o.Uniform2f(n,s.u_light),u_shadow:new o.UniformColor(n,s.u_shadow),u_highlight:new o.UniformColor(n,s.u_highlight),u_accent:new o.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_dimension:new o.Uniform2f(n,s.u_dimension),u_zoom:new o.Uniform1f(n,s.u_zoom),u_unpack:new o.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_image:new o.Uniform1i(n,s.u_image),u_image_height:new o.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_texsize:new o.Uniform2f(n,s.u_texsize),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_image:new o.Uniform1i(n,s.u_image),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new o.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new o.Uniform1f(n,s.u_sdfgamma),u_image:new o.Uniform1i(n,s.u_image),u_tex_y_a:new o.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new o.Uniform1f(n,s.u_tex_y_b),u_mix:new o.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new o.Uniform2f(n,s.u_tl_parent),u_scale_parent:new o.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new o.Uniform1f(n,s.u_buffer_scale),u_fade_t:new o.Uniform1f(n,s.u_fade_t),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image0:new o.Uniform1i(n,s.u_image0),u_image1:new o.Uniform1i(n,s.u_image1),u_brightness_low:new o.Uniform1f(n,s.u_brightness_low),u_brightness_high:new o.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new o.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new o.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new o.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texsize_icon:new o.Uniform2f(n,s.u_texsize_icon),u_texture:new o.Uniform1i(n,s.u_texture),u_texture_icon:new o.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_color:new o.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image:new o.Uniform1i(n,s.u_image),u_pattern_tl_a:new o.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(n,s.u_pattern_br_b),u_texsize:new o.Uniform2f(n,s.u_texsize),u_mix:new o.Uniform1f(n,s.u_mix),u_pattern_size_a:new o.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new o.Uniform1f(n,s.u_scale_a),u_scale_b:new o.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(n,s.u_tile_units_to_pixels)}}};function As(n,s,a,u,m,w,E){for(var I=n.context,D=I.gl,N=n.useProgram("collisionBox"),J=[],Y=0,Q=0,se=0;se<u.length;se++){var ae=u[se],ce=s.getTile(ae),re=ce.getBucket(a);if(re){var fe=ae.posMatrix;m[0]===0&&m[1]===0||(fe=n.translatePosMatrix(ae.posMatrix,ce,m,w));var _e=E?re.textCollisionBox:re.iconCollisionBox,Ee=re.collisionCircleArray;if(Ee.length>0){var Ce=o.create(),Me=fe;o.mul(Ce,re.placementInvProjMatrix,n.transform.glCoordMatrix),o.mul(Ce,Ce,re.placementViewportMatrix),J.push({circleArray:Ee,circleOffset:Q,transform:Me,invTransform:Ce}),Q=Y+=Ee.length/4}_e&&N.draw(I,D.LINES,$.disabled,ie.disabled,n.colorModeForRenderPass(),ge.disabled,Dn(fe,n.transform,ce),a.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,n.transform.zoom,null,null,_e.collisionVertexBuffer)}}if(E&&J.length){var Oe=n.useProgram("collisionCircle"),Ze=new o.StructArrayLayout2f1f2i16;Ze.resize(4*Y),Ze._trim();for(var We=0,He=0,ut=J;He<ut.length;He+=1)for(var kt=ut[He],dt=0;dt<kt.circleArray.length/4;dt++){var vt=4*dt,er=kt.circleArray[vt+0],at=kt.circleArray[vt+1],Ut=kt.circleArray[vt+2],Kt=kt.circleArray[vt+3];Ze.emplace(We++,er,at,Ut,Kt,0),Ze.emplace(We++,er,at,Ut,Kt,1),Ze.emplace(We++,er,at,Ut,Kt,2),Ze.emplace(We++,er,at,Ut,Kt,3)}(!Xl||Xl.length<2*Y)&&(Xl=function(Ci){var va=2*Ci,Vn=new o.StructArrayLayout3ui6;Vn.resize(va),Vn._trim();for(var ui=0;ui<va;ui++){var on=6*ui;Vn.uint16[on+0]=4*ui+0,Vn.uint16[on+1]=4*ui+1,Vn.uint16[on+2]=4*ui+2,Vn.uint16[on+3]=4*ui+2,Vn.uint16[on+4]=4*ui+3,Vn.uint16[on+5]=4*ui+0}return Vn}(Y));for(var jt=I.createIndexBuffer(Xl,!0),Nt=I.createVertexBuffer(Ze,o.collisionCircleLayout.members,!0),Zt=0,Mt=J;Zt<Mt.length;Zt+=1){var Rt=Mt[Zt],Hi=al(Rt.transform,Rt.invTransform,n.transform);Oe.draw(I,D.TRIANGLES,$.disabled,ie.disabled,n.colorModeForRenderPass(),ge.disabled,Hi,a.id,Nt,jt,o.SegmentVector.simpleSegment(0,2*Rt.circleOffset,Rt.circleArray.length,Rt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Nt.destroy(),jt.destroy()}}var so=o.identity(new Float32Array(16));function ls(n,s,a,u,m,w){var E=o.getAnchorAlignment(n),I=-(E.horizontalAlign-.5)*s,D=-(E.verticalAlign-.5)*a,N=o.evaluateVariableOffset(n,u);return new o.Point((I/m+N[0])*w,(D/m+N[1])*w)}function zs(n,s,a,u,m,w,E,I,D,N,J){var Y=n.text.placedSymbolArray,Q=n.text.dynamicLayoutVertexArray,se=n.icon.dynamicLayoutVertexArray,ae={};Q.clear();for(var ce=0;ce<Y.length;ce++){var re=Y.get(ce),fe=re.hidden||!re.crossTileID||n.allowVerticalPlacement&&!re.placedOrientation?null:u[re.crossTileID];if(fe){var _e=new o.Point(re.anchorX,re.anchorY),Ee=Wt(_e,a?I:E),Ce=Ht(w.cameraToCenterDistance,Ee.signedDistanceFromCamera),Me=m.evaluateSizeForFeature(n.textSizeData,N,re)*Ce/o.ONE_EM;a&&(Me*=n.tilePixelRatio/D);for(var Oe=ls(fe.anchor,fe.width,fe.height,fe.textOffset,fe.textBoxScale,Me),Ze=a?Wt(_e.add(Oe),E).point:Ee.point.add(s?Oe.rotate(-w.angle):Oe),We=n.allowVerticalPlacement&&re.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,He=0;He<re.numGlyphs;He++)o.addDynamicAttributes(Q,Ze,We);J&&re.associatedIconIndex>=0&&(ae[re.associatedIconIndex]={shiftedAnchor:Ze,angle:We})}else Fr(re.numGlyphs,Q)}if(J){se.clear();for(var ut=n.icon.placedSymbolArray,kt=0;kt<ut.length;kt++){var dt=ut.get(kt);if(dt.hidden)Fr(dt.numGlyphs,se);else{var vt=ae[kt];if(vt)for(var er=0;er<dt.numGlyphs;er++)o.addDynamicAttributes(se,vt.shiftedAnchor,vt.angle);else Fr(dt.numGlyphs,se)}}n.icon.dynamicLayoutVertexBuffer.updateData(se)}n.text.dynamicLayoutVertexBuffer.updateData(Q)}function Pa(n,s,a){return a.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Bn(n,s,a,u,m,w,E,I,D,N,J,Y){for(var Q=n.context,se=Q.gl,ae=n.transform,ce=I==="map",re=D==="map",fe=ce&&a.layout.get("symbol-placement")!=="point",_e=ce&&!re&&!fe,Ee=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ce=!1,Me=n.depthModeForSublayer(0,$.ReadOnly),Oe=a.layout.get("text-variable-anchor"),Ze=[],We=0,He=u;We<He.length;We+=1){var ut=He[We],kt=s.getTile(ut),dt=kt.getBucket(a);if(dt){var vt=m?dt.text:dt.icon;if(vt&&vt.segments.get().length){var er=vt.programConfigurations.get(a.id),at=m||dt.sdfIcons,Ut=m?dt.textSizeData:dt.iconSizeData,Kt=re||ae.pitch!==0,jt=n.useProgram(Pa(at,m,dt),er),Nt=o.evaluateSizeForZoom(Ut,ae.zoom),Zt=void 0,Mt=[0,0],Rt=void 0,Hi=void 0,Ci=null,va=void 0;if(m)Rt=kt.glyphAtlasTexture,Hi=se.LINEAR,Zt=kt.glyphAtlasTexture.size,dt.iconsInText&&(Mt=kt.imageAtlasTexture.size,Ci=kt.imageAtlasTexture,va=Kt||n.options.rotating||n.options.zooming||Ut.kind==="composite"||Ut.kind==="camera"?se.LINEAR:se.NEAREST);else{var Vn=a.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Rt=kt.imageAtlasTexture,Hi=at||n.options.rotating||n.options.zooming||Vn||Kt?se.LINEAR:se.NEAREST,Zt=kt.imageAtlasTexture.size}var ui=or(kt,1,n.transform.zoom),on=Dr(ut.posMatrix,re,ce,n.transform,ui),bn=ar(ut.posMatrix,re,ce,n.transform,ui),ji=Oe&&dt.hasTextData(),ho=a.layout.get("icon-text-fit")!=="none"&&ji&&dt.hasIconData();fe&&Tn(dt,ut.posMatrix,n,m,on,bn,re,N);var qa=n.translatePosMatrix(ut.posMatrix,kt,w,E),Za=fe||m&&Oe||ho?so:on,gs=n.translatePosMatrix(bn,kt,w,E,!0),Yl=at&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,_s={program:jt,buffers:vt,uniformValues:at?dt.iconsInText?ya(Ut.kind,Nt,_e,re,n,qa,Za,gs,Zt,Mt):Lo(Ut.kind,Nt,_e,re,n,qa,Za,gs,m,Zt,!0):oo(Ut.kind,Nt,_e,re,n,qa,Za,gs,m,Zt),atlasTexture:Rt,atlasTextureIcon:Ci,atlasInterpolation:Hi,atlasInterpolationIcon:va,isSDF:at,hasHalo:Yl};if(Ee&&dt.canOverlap){Ce=!0;for(var Zo=0,Rl=vt.segments.get();Zo<Rl.length;Zo+=1){var Ms=Rl[Zo];Ze.push({segments:new o.SegmentVector([Ms]),sortKey:Ms.sortKey,state:_s})}}else Ze.push({segments:vt.segments,sortKey:0,state:_s})}}}Ce&&Ze.sort(function(Ga,Ra){return Ga.sortKey-Ra.sortKey});for(var Go=0,Ql=Ze;Go<Ql.length;Go+=1){var vs=Ql[Go],qi=vs.state;if(Q.activeTexture.set(se.TEXTURE0),qi.atlasTexture.bind(qi.atlasInterpolation,se.CLAMP_TO_EDGE),qi.atlasTextureIcon&&(Q.activeTexture.set(se.TEXTURE1),qi.atlasTextureIcon&&qi.atlasTextureIcon.bind(qi.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),qi.isSDF){var Ds=qi.uniformValues;qi.hasHalo&&(Ds.u_is_halo=1,nn(qi.buffers,vs.segments,a,n,qi.program,Me,J,Y,Ds)),Ds.u_is_halo=0}nn(qi.buffers,vs.segments,a,n,qi.program,Me,J,Y,qi.uniformValues)}}function nn(n,s,a,u,m,w,E,I,D){var N=u.context;m.draw(N,N.gl.TRIANGLES,w,E,I,ge.disabled,D,a.id,n.layoutVertexBuffer,n.indexBuffer,s,a.paint,u.transform.zoom,n.programConfigurations.get(a.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function ol(n,s,a,u,m,w,E){var I,D,N,J,Y,Q=n.context.gl,se=a.paint.get("fill-pattern"),ae=se&&se.constantOr(1),ce=a.getCrossfadeParameters();E?(D=ae&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",I=Q.LINES):(D=ae?"fillPattern":"fill",I=Q.TRIANGLES);for(var re=0,fe=u;re<fe.length;re+=1){var _e=fe[re],Ee=s.getTile(_e);if(!ae||Ee.patternsLoaded()){var Ce=Ee.getBucket(a);if(Ce){var Me=Ce.programConfigurations.get(a.id),Oe=n.useProgram(D,Me);ae&&(n.context.activeTexture.set(Q.TEXTURE0),Ee.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Me.updatePaintBuffers(ce));var Ze=se.constantOr(null);if(Ze&&Ee.imageAtlas){var We=Ee.imageAtlas,He=We.patternPositions[Ze.to.toString()],ut=We.patternPositions[Ze.from.toString()];He&&ut&&Me.setConstantPatternPositions(He,ut)}var kt=n.translatePosMatrix(_e.posMatrix,Ee,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(E){J=Ce.indexBuffer2,Y=Ce.segments2;var dt=[Q.drawingBufferWidth,Q.drawingBufferHeight];N=D==="fillOutlinePattern"&&ae?ss(kt,n,ce,Ee,dt):ao(kt,dt)}else J=Ce.indexBuffer,Y=Ce.segments,N=ae?Do(kt,n,ce,Ee):no(kt);Oe.draw(n.context,I,m,n.stencilModeForClipping(_e),w,ge.disabled,N,a.id,Ce.layoutVertexBuffer,J,Y,a.paint,n.transform.zoom,Me)}}}}function rs(n,s,a,u,m,w,E){for(var I=n.context,D=I.gl,N=a.paint.get("fill-extrusion-pattern"),J=N.constantOr(1),Y=a.getCrossfadeParameters(),Q=a.paint.get("fill-extrusion-opacity"),se=0,ae=u;se<ae.length;se+=1){var ce=ae[se],re=s.getTile(ce),fe=re.getBucket(a);if(fe){var _e=fe.programConfigurations.get(a.id),Ee=n.useProgram(J?"fillExtrusionPattern":"fillExtrusion",_e);J&&(n.context.activeTexture.set(D.TEXTURE0),re.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),_e.updatePaintBuffers(Y));var Ce=N.constantOr(null);if(Ce&&re.imageAtlas){var Me=re.imageAtlas,Oe=Me.patternPositions[Ce.to.toString()],Ze=Me.patternPositions[Ce.from.toString()];Oe&&Ze&&_e.setConstantPatternPositions(Oe,Ze)}var We=n.translatePosMatrix(ce.posMatrix,re,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),He=a.paint.get("fill-extrusion-vertical-gradient"),ut=J?Yn(We,n,He,Q,ce,Y,re):Os(We,n,He,Q);Ee.draw(I,I.gl.TRIANGLES,m,w,E,ge.backCCW,ut,a.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,a.paint,n.transform.zoom,_e)}}}function gu(n,s,a,u,m,w){var E=n.context,I=E.gl,D=s.fbo;if(D){var N=n.useProgram("hillshade");E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,D.colorAttachment.get());var J=function(Y,Q,se){var ae=se.paint.get("hillshade-shadow-color"),ce=se.paint.get("hillshade-highlight-color"),re=se.paint.get("hillshade-accent-color"),fe=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=Y.transform.angle);var _e,Ee,Ce,Me=!Y.options.moving;return{u_matrix:Y.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),Me),u_image:0,u_latrange:(_e=Q.tileID,Ee=Math.pow(2,_e.canonical.z),Ce=_e.canonical.y,[new o.MercatorCoordinate(0,Ce/Ee).toLngLat().lat,new o.MercatorCoordinate(0,(Ce+1)/Ee).toLngLat().lat]),u_light:[se.paint.get("hillshade-exaggeration"),fe],u_shadow:ae,u_highlight:ce,u_accent:re}}(n,s,a);N.draw(E,I.TRIANGLES,u,m,w,ge.disabled,J,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function _u(n,s,a,u,m,w){var E=n.context,I=E.gl,D=s.dem;if(D&&D.data){var N=D.dim,J=D.stride,Y=D.getPixels();if(E.activeTexture.set(I.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(J),s.demTexture){var Q=s.demTexture;Q.update(Y,{premultiply:!1}),Q.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else s.demTexture=new o.Texture(E,Y,I.RGBA,{premultiply:!1}),s.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);E.activeTexture.set(I.TEXTURE0);var se=s.fbo;if(!se){var ae=new o.Texture(E,{width:N,height:N,data:null},I.RGBA);ae.bind(I.LINEAR,I.CLAMP_TO_EDGE),(se=s.fbo=E.createFramebuffer(N,N,!0)).colorAttachment.set(ae.texture)}E.bindFramebuffer.set(se.framebuffer),E.viewport.set([0,0,N,N]),n.useProgram("hillshadePrepare").draw(E,I.TRIANGLES,u,m,w,ge.disabled,function(ce,re){var fe=re.stride,_e=o.create();return o.ortho(_e,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(_e,_e,[0,-o.EXTENT,0]),{u_matrix:_e,u_image:1,u_dimension:[fe,fe],u_zoom:ce.overscaledZ,u_unpack:re.getUnpackVector()}}(s.tileID,D),a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Ro(n,s,a,u,m){var w=u.paint.get("raster-fade-duration");if(w>0){var E=o.browser.now(),I=(E-n.timeAdded)/w,D=s?(E-s.timeAdded)/w:-1,N=a.getSource(),J=m.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),Y=!s||Math.abs(s.tileID.overscaledZ-J)>Math.abs(n.tileID.overscaledZ-J),Q=Y&&n.refreshedUponExpiration?1:o.clamp(Y?I:1-D,0,1);return n.refreshedUponExpiration&&I>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}var us=new o.Color(1,0,0,1),Wl=new o.Color(0,1,0,1),Ps=new o.Color(0,0,1,1),Qn=new o.Color(1,0,1,1),zl=new o.Color(0,1,1,1);function sl(n,s,a,u){Ns(n,0,s+a/2,n.transform.width,a,u)}function cs(n,s,a,u){Ns(n,s-a/2,0,a,n.transform.height,u)}function Ns(n,s,a,u,m,w){var E=n.context,I=E.gl;I.enable(I.SCISSOR_TEST),I.scissor(s*o.browser.devicePixelRatio,a*o.browser.devicePixelRatio,u*o.browser.devicePixelRatio,m*o.browser.devicePixelRatio),E.clear({color:w}),I.disable(I.SCISSOR_TEST)}function bo(n,s,a){var u=n.context,m=u.gl,w=a.posMatrix,E=n.useProgram("debug"),I=$.disabled,D=ie.disabled,N=n.colorModeForRenderPass();u.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.draw(u,m.LINE_STRIP,I,D,N,ge.disabled,yo(w,o.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var J=s.getTileByID(a.key).latestRawTileData,Y=Math.floor((J&&J.byteLength||0)/1024),Q=s.getTile(a).tileSize,se=512/Math.min(Q,512)*(a.overscaledZ/n.transform.zoom)*.5,ae=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(ae+=" => "+a.overscaledZ),function(ce,re){ce.initDebugOverlayCanvas();var fe=ce.debugOverlayCanvas,_e=ce.context.gl,Ee=ce.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,fe.width,fe.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(re,5,5),Ee.strokeText(re,5,5),ce.debugOverlayTexture.update(fe),ce.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(n,ae+" "+Y+"kb"),E.draw(u,m.TRIANGLES,I,D,de.alphaBlended,ge.disabled,yo(w,o.Color.transparent,se),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var On={symbol:function(n,s,a,u,m){if(n.renderPass==="translucent"){var w=ie.disabled,E=n.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(I,D,N,J,Y,Q,se){for(var ae=D.transform,ce=Y==="map",re=Q==="map",fe=0,_e=I;fe<_e.length;fe+=1){var Ee=_e[fe],Ce=J.getTile(Ee),Me=Ce.getBucket(N);if(Me&&Me.text&&Me.text.segments.get().length){var Oe=o.evaluateSizeForZoom(Me.textSizeData,ae.zoom),Ze=or(Ce,1,D.transform.zoom),We=Dr(Ee.posMatrix,re,ce,D.transform,Ze),He=N.layout.get("icon-text-fit")!=="none"&&Me.hasIconData();if(Oe){var ut=Math.pow(2,ae.zoom-Ce.tileID.overscaledZ);zs(Me,ce,re,se,o.symbolSize,ae,We,Ee.posMatrix,ut,Oe,He)}}}}(u,n,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&Bn(n,s,a,u,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),w,E),a.paint.get("text-opacity").constantOr(1)!==0&&Bn(n,s,a,u,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),w,E),s.map.showCollisionBoxes&&(As(n,s,a,u,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),As(n,s,a,u,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,a,u){if(n.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),w=a.paint.get("circle-stroke-width"),E=a.paint.get("circle-stroke-opacity"),I=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var D=n.context,N=D.gl,J=n.depthModeForSublayer(0,$.ReadOnly),Y=ie.disabled,Q=n.colorModeForRenderPass(),se=[],ae=0;ae<u.length;ae++){var ce=u[ae],re=s.getTile(ce),fe=re.getBucket(a);if(fe){var _e=fe.programConfigurations.get(a.id),Ee={programConfiguration:_e,program:n.useProgram("circle",_e),layoutVertexBuffer:fe.layoutVertexBuffer,indexBuffer:fe.indexBuffer,uniformValues:za(n,ce,re,a)};if(I)for(var Ce=0,Me=fe.segments.get();Ce<Me.length;Ce+=1){var Oe=Me[Ce];se.push({segments:new o.SegmentVector([Oe]),sortKey:Oe.sortKey,state:Ee})}else se.push({segments:fe.segments,sortKey:0,state:Ee})}}I&&se.sort(function(kt,dt){return kt.sortKey-dt.sortKey});for(var Ze=0,We=se;Ze<We.length;Ze+=1){var He=We[Ze],ut=He.state;ut.program.draw(D,N.TRIANGLES,J,Y,Q,ge.disabled,ut.uniformValues,a.id,ut.layoutVertexBuffer,ut.indexBuffer,He.segments,a.paint,n.transform.zoom,ut.programConfiguration)}}}},heatmap:function(n,s,a,u){if(a.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,w=m.gl,E=ie.disabled,I=new de([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(se,ae,ce){var re=se.gl;se.activeTexture.set(re.TEXTURE1),se.viewport.set([0,0,ae.width/4,ae.height/4]);var fe=ce.heatmapFbo;if(fe)re.bindTexture(re.TEXTURE_2D,fe.colorAttachment.get()),se.bindFramebuffer.set(fe.framebuffer);else{var _e=re.createTexture();re.bindTexture(re.TEXTURE_2D,_e),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,re.LINEAR),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,re.LINEAR),fe=ce.heatmapFbo=se.createFramebuffer(ae.width/4,ae.height/4,!1),function(Ee,Ce,Me,Oe){var Ze=Ee.gl;Ze.texImage2D(Ze.TEXTURE_2D,0,Ze.RGBA,Ce.width/4,Ce.height/4,0,Ze.RGBA,Ee.extRenderToTextureHalfFloat?Ee.extTextureHalfFloat.HALF_FLOAT_OES:Ze.UNSIGNED_BYTE,null),Oe.colorAttachment.set(Me)}(se,ae,_e,fe)}})(m,n,a),m.clear({color:o.Color.transparent});for(var D=0;D<u.length;D++){var N=u[D];if(!s.hasRenderableParent(N)){var J=s.getTile(N),Y=J.getBucket(a);if(Y){var Q=Y.programConfigurations.get(a.id);n.useProgram("heatmap",Q).draw(m,w.TRIANGLES,$.disabled,E,I,ge.disabled,hn(N.posMatrix,J,n.transform.zoom,a.paint.get("heatmap-intensity")),a.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,a.paint,n.transform.zoom,Q)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(se,ae){var ce=se.context,re=ce.gl,fe=ae.heatmapFbo;if(fe){ce.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,fe.colorAttachment.get()),ce.activeTexture.set(re.TEXTURE1);var _e=ae.colorRampTexture;_e||(_e=ae.colorRampTexture=new o.Texture(ce,ae.colorRamp,re.RGBA)),_e.bind(re.LINEAR,re.CLAMP_TO_EDGE),se.useProgram("heatmapTexture").draw(ce,re.TRIANGLES,$.disabled,ie.disabled,se.colorModeForRenderPass(),ge.disabled,function(Ee,Ce,Me,Oe){var Ze=o.create();o.ortho(Ze,0,Ee.width,Ee.height,0,0,1);var We=Ee.context.gl;return{u_matrix:Ze,u_world:[We.drawingBufferWidth,We.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}}(se,ae),ae.id,se.viewportBuffer,se.quadTriangleIndexBuffer,se.viewportSegments,ae.paint,se.transform.zoom)}}(n,a))},line:function(n,s,a,u){if(n.renderPass==="translucent"){var m=a.paint.get("line-opacity"),w=a.paint.get("line-width");if(m.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=n.depthModeForSublayer(0,$.ReadOnly),I=n.colorModeForRenderPass(),D=a.paint.get("line-dasharray"),N=a.paint.get("line-pattern"),J=N.constantOr(1),Y=a.paint.get("line-gradient"),Q=a.getCrossfadeParameters(),se=J?"linePattern":D?"lineSDF":Y?"lineGradient":"line",ae=n.context,ce=ae.gl,re=!0,fe=0,_e=u;fe<_e.length;fe+=1){var Ee=_e[fe],Ce=s.getTile(Ee);if(!J||Ce.patternsLoaded()){var Me=Ce.getBucket(a);if(Me){var Oe=Me.programConfigurations.get(a.id),Ze=n.context.program.get(),We=n.useProgram(se,Oe),He=re||We.program!==Ze,ut=N.constantOr(null);if(ut&&Ce.imageAtlas){var kt=Ce.imageAtlas,dt=kt.patternPositions[ut.to.toString()],vt=kt.patternPositions[ut.from.toString()];dt&&vt&&Oe.setConstantPatternPositions(dt,vt)}var er=J?ma(n,Ce,a,Q):D?Ue(n,Ce,a,D,Q):Y?wr(n,Ce,a,Me.lineClipsArray.length):Fs(n,Ce,a);if(J)ae.activeTexture.set(ce.TEXTURE0),Ce.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Oe.updatePaintBuffers(Q);else if(D&&(He||n.lineAtlas.dirty))ae.activeTexture.set(ce.TEXTURE0),n.lineAtlas.bind(ae);else if(Y){var at=Me.gradients[a.id],Ut=at.texture;if(a.gradientVersion!==at.version){var Kt=256;if(a.stepInterpolant){var jt=s.getSource().maxzoom,Nt=Ee.canonical.z===jt?Math.ceil(1<<n.transform.maxZoom-Ee.canonical.z):1;Kt=o.clamp(o.nextPowerOfTwo(Me.maxLineLength/o.EXTENT*1024*Nt),256,ae.maxTextureSize)}at.gradient=o.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Kt,image:at.gradient||void 0,clips:Me.lineClipsArray}),at.texture?at.texture.update(at.gradient):at.texture=new o.Texture(ae,at.gradient,ce.RGBA),at.version=a.gradientVersion,Ut=at.texture}ae.activeTexture.set(ce.TEXTURE0),Ut.bind(a.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}We.draw(ae,ce.TRIANGLES,E,n.stencilModeForClipping(Ee),I,ge.disabled,er,a.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,a.paint,n.transform.zoom,Oe,Me.layoutVertexBuffer2),re=!1}}}}},fill:function(n,s,a,u){var m=a.paint.get("fill-color"),w=a.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=n.colorModeForRenderPass(),I=a.paint.get("fill-pattern"),D=n.opaquePassEnabledForLayer()&&!I.constantOr(1)&&m.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===D){var N=n.depthModeForSublayer(1,n.renderPass==="opaque"?$.ReadWrite:$.ReadOnly);ol(n,s,a,u,N,E,!1)}if(n.renderPass==="translucent"&&a.paint.get("fill-antialias")){var J=n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,$.ReadOnly);ol(n,s,a,u,J,E,!0)}}},"fill-extrusion":function(n,s,a,u){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var w=new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))rs(n,s,a,u,w,ie.disabled,de.disabled),rs(n,s,a,u,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var E=n.colorModeForRenderPass();rs(n,s,a,u,w,ie.disabled,E)}}},hillshade:function(n,s,a,u){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,w=n.depthModeForSublayer(0,$.ReadOnly),E=n.colorModeForRenderPass(),I=n.renderPass==="translucent"?n.stencilConfigForOverlap(u):[{},u],D=I[0],N=0,J=I[1];N<J.length;N+=1){var Y=J[N],Q=s.getTile(Y);Q.needsHillshadePrepare&&n.renderPass==="offscreen"?_u(n,Q,a,w,ie.disabled,E):n.renderPass==="translucent"&&gu(n,Q,a,w,D[Y.overscaledZ],E)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,a,u){if(n.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&u.length)for(var m=n.context,w=m.gl,E=s.getSource(),I=n.useProgram("raster"),D=n.colorModeForRenderPass(),N=E instanceof ir?[{},u]:n.stencilConfigForOverlap(u),J=N[0],Y=N[1],Q=Y[Y.length-1].overscaledZ,se=!n.options.moving,ae=0,ce=Y;ae<ce.length;ae+=1){var re=ce[ae],fe=n.depthModeForSublayer(re.overscaledZ-Q,a.paint.get("raster-opacity")===1?$.ReadWrite:$.ReadOnly,w.LESS),_e=s.getTile(re),Ee=n.transform.calculatePosMatrix(re.toUnwrapped(),se);_e.registerFadeDuration(a.paint.get("raster-fade-duration"));var Ce=s.findLoadedParent(re,0),Me=Ro(_e,Ce,s,a,n.transform),Oe=void 0,Ze=void 0,We=a.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;m.activeTexture.set(w.TEXTURE0),_e.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(w.TEXTURE1),Ce?(Ce.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,Ce.tileID.overscaledZ-_e.tileID.overscaledZ),Ze=[_e.tileID.canonical.x*Oe%1,_e.tileID.canonical.y*Oe%1]):_e.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var He=go(Ee,Ze||[0,0],Oe||1,Me,a);E instanceof ir?I.draw(m,w.TRIANGLES,fe,ie.disabled,D,ge.disabled,He,a.id,E.boundsBuffer,n.quadTriangleIndexBuffer,E.boundsSegments):I.draw(m,w.TRIANGLES,fe,J[re.overscaledZ],D,ge.disabled,He,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,a){var u=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var w=n.context,E=w.gl,I=n.transform,D=I.tileSize,N=a.paint.get("background-pattern");if(!n.isPatternMissing(N)){var J=!N&&u.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===J){var Y=ie.disabled,Q=n.depthModeForSublayer(0,J==="opaque"?$.ReadWrite:$.ReadOnly),se=n.colorModeForRenderPass(),ae=n.useProgram(N?"backgroundPattern":"background"),ce=I.coveringTiles({tileSize:D});N&&(w.activeTexture.set(E.TEXTURE0),n.imageManager.bind(n.context));for(var re=a.getCrossfadeParameters(),fe=0,_e=ce;fe<_e.length;fe+=1){var Ee=_e[fe],Ce=n.transform.calculatePosMatrix(Ee.toUnwrapped()),Me=N?vo(Ce,m,n,N,{tileID:Ee,tileSize:D},re):Vs(Ce,m,u);ae.draw(w,E.TRIANGLES,Q,Y,se,ge.disabled,Me,a.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,a){for(var u=0;u<a.length;u++)bo(n,s,a[u])},custom:function(n,s,a){var u=n.context,m=a.implementation;if(n.renderPass==="offscreen"){var w=m.prerender;w&&(n.setCustomLayerDefaults(),u.setColorMode(n.colorModeForRenderPass()),w.call(m,u.gl,n.transform.customLayerMatrix()),u.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),u.setColorMode(n.colorModeForRenderPass()),u.setStencilMode(ie.disabled);var E=m.renderingMode==="3d"?new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,$.ReadOnly);u.setDepthMode(E),m.render(u.gl,n.transform.customLayerMatrix()),u.setDirty(),n.setBaseState(),u.bindFramebuffer.set(null)}}},Lr=function(n,s){this.context=new G(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=te.maxUnderzooming+te.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xe,this.gpuTimers={}};Lr.prototype.resize=function(n,s){if(this.width=n*o.browser.devicePixelRatio,this.height=s*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,u=this.style._order;a<u.length;a+=1)this.style._layers[u[a]].resize()},Lr.prototype.setup=function(){var n=this.context,s=new o.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(o.EXTENT,0),s.emplaceBack(0,o.EXTENT),s.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,qr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var a=new o.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(o.EXTENT,0),a.emplaceBack(0,o.EXTENT),a.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=n.createVertexBuffer(a,qr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var u=new o.StructArrayLayout4i8;u.emplaceBack(0,0,0,0),u.emplaceBack(o.EXTENT,0,o.EXTENT,0),u.emplaceBack(0,o.EXTENT,0,o.EXTENT),u.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(u,rt.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var m=new o.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,qr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var w=new o.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var E=new o.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(E),this.emptyTexture=new o.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var I=this.context.gl;this.stencilClearMode=new ie({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)},Lr.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=o.create();o.ortho(a,0,this.width,this.height,0,0,1),o.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,$.disabled,this.stencilClearMode,de.disabled,ge.disabled,Ln(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Lr.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var a=this.context,u=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(de.disabled),a.setDepthMode($.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=s;w<E.length;w+=1){var I=E[w],D=this._tileClippingMaskIDs[I.key]=this.nextStencilID++;m.draw(a,u.TRIANGLES,$.disabled,new ie({func:u.ALWAYS,mask:0},D,255,u.KEEP,u.KEEP,u.REPLACE),de.disabled,ge.disabled,Ln(I.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Lr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new ie({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Lr.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new ie({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Lr.prototype.stencilConfigForOverlap=function(n){var s,a=this.context.gl,u=n.sort(function(D,N){return N.overscaledZ-D.overscaledZ}),m=u[u.length-1].overscaledZ,w=u[0].overscaledZ-m+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},I=0;I<w;I++)E[I+m]=new ie({func:a.GEQUAL,mask:255},I+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=w,[E,u]}return[(s={},s[m]=ie.disabled,s),u]},Lr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new de([n.CONSTANT_COLOR,n.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?de.unblended:de.alphaBlended},Lr.prototype.depthModeForSublayer=function(n,s,a){if(!this.opaquePassEnabledForLayer())return $.disabled;var u=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $(a||this.context.gl.LEQUAL,s,[u,u])},Lr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Lr.prototype.render=function(n,s){var a=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var u=this.style._order,m=this.style.sourceCaches;for(var w in m){var E=m[w];E.used&&E.prepare(this.context)}var I,D,N={},J={},Y={};for(var Q in m){var se=m[Q];N[Q]=se.getVisibleCoordinates(),J[Q]=N[Q].slice().reverse(),Y[Q]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ae=0;ae<u.length;ae++)if(this.style._layers[u[ae]].is3D()){this.opaquePassCutoff=ae;break}this.renderPass="offscreen";for(var ce=0,re=u;ce<re.length;ce+=1){var fe=this.style._layers[re[ce]];if(fe.hasOffscreenPass()&&!fe.isHidden(this.transform.zoom)){var _e=J[fe.source];(fe.type==="custom"||_e.length)&&this.renderLayer(this,m[fe.source],fe,_e)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){var Ee=this.style._layers[u[this.currentLayer]],Ce=m[Ee.source],Me=N[Ee.source];this._renderTileClippingMasks(Ee,Me),this.renderLayer(this,Ce,Ee,Me)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){var Oe=this.style._layers[u[this.currentLayer]],Ze=m[Oe.source],We=(Oe.type==="symbol"?Y:J)[Oe.source];this._renderTileClippingMasks(Oe,N[Oe.source]),this.renderLayer(this,Ze,Oe,We)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(He){He.source&&!He.isHidden(a.transform.zoom)&&(He.source!==(D&&D.id)&&(D=a.style.sourceCaches[He.source]),(!I||I.getSource().maxzoom<D.getSource().maxzoom)&&(I=D))}),I&&On.debug(this,I,I.getVisibleCoordinates())),this.options.showPadding&&function(He){var ut=He.transform.padding;sl(He,He.transform.height-(ut.top||0),3,us),sl(He,ut.bottom||0,3,Wl),cs(He,ut.left||0,3,Ps),cs(He,He.transform.width-(ut.right||0),3,Qn);var kt=He.transform.centerPoint;(function(dt,vt,er,at){Ns(dt,vt-1,er-10,2,20,at),Ns(dt,vt-10,er-1,20,2,at)})(He,kt.x,He.transform.height-kt.y,zl)}(this),this.context.setDefault()},Lr.prototype.renderLayer=function(n,s,a,u){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||u.length)&&(this.id=a.id,this.gpuTimingStart(a),On[a.type](n,s,a,u,this.style.placement.variableOffsets),this.gpuTimingEnd())},Lr.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[n.id];a||(a=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},Lr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Lr.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Lr.prototype.queryGpuTimers=function(n){var s={};for(var a in n){var u=n[a],m=this.context.extTimerQuery,w=m.getQueryObjectEXT(u.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(u.query),s[a]=w}return s},Lr.prototype.translatePosMatrix=function(n,s,a,u,m){if(!a[0]&&!a[1])return n;var w=m?u==="map"?this.transform.angle:0:u==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),I=Math.cos(w);a=[a[0]*I-a[1]*E,a[0]*E+a[1]*I]}var D=[m?a[0]:or(s,a[0],this.transform.zoom),m?a[1]:or(s,a[1],this.transform.zoom),0],N=new Float32Array(16);return o.translate(N,n,D),N},Lr.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Lr.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Lr.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),a=this.imageManager.getPattern(n.to.toString());return!s||!a},Lr.prototype.useProgram=function(n,s){this.cache=this.cache||{};var a=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new rn(this.context,n,Jn[n],s,ts[n],this._showOverdrawInspector)),this.cache[a]},Lr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Lr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Lr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Lr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ll=function(n,s){this.points=n,this.planes=s};ll.fromInvProjectionMatrix=function(n,s,a){var u=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return o.transformMat4([],E,n)}).map(function(E){return o.scale$1([],E,1/E[3]/s*u)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var I=o.sub([],m[E[0]],m[E[1]]),D=o.sub([],m[E[2]],m[E[1]]),N=o.normalize([],o.cross([],I,D)),J=-o.dot(N,m[E[1]]);return N.concat(J)});return new ll(m,w)};var En=function(n,s){this.min=n,this.max=s,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};En.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],a=o.clone$2(this.min),u=o.clone$2(this.max),m=0;m<s.length;m++)a[m]=s[m]?this.min[m]:this.center[m],u[m]=s[m]?this.center[m]:this.max[m];return u[2]=this.max[2],new En(a,u)},En.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},En.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},En.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,u=0;u<n.planes.length;u++){for(var m=n.planes[u],w=0,E=0;E<s.length;E++)w+=o.dot$1(m,s[E])>=0;if(w===0)return 0;w!==s.length&&(a=!1)}if(a)return 2;for(var I=0;I<3;I++){for(var D=Number.MAX_VALUE,N=-Number.MAX_VALUE,J=0;J<n.points.length;J++){var Y=n.points[J][I]-this.min[I];D=Math.min(D,Y),N=Math.max(N,Y)}if(N<0||D>this.max[I]-this.min[I])return 0}return 1};var Cs=function(n,s,a,u){if(n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=a,this.right=u};Cs.prototype.interpolate=function(n,s,a){return s.top!=null&&n.top!=null&&(this.top=o.number(n.top,s.top,a)),s.bottom!=null&&n.bottom!=null&&(this.bottom=o.number(n.bottom,s.bottom,a)),s.left!=null&&n.left!=null&&(this.left=o.number(n.left,s.left,a)),s.right!=null&&n.right!=null&&(this.right=o.number(n.right,s.right,a)),this},Cs.prototype.getCenter=function(n,s){var a=o.clamp((this.left+n-this.right)/2,0,n),u=o.clamp((this.top+s-this.bottom)/2,0,s);return new o.Point(a,u)},Cs.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Cs.prototype.clone=function(){return new Cs(this.top,this.bottom,this.left,this.right)},Cs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var sr=function(n,s,a,u,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=a==null?0:a,this._maxPitch=u==null?60:u,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Cs,this._posMatrixCache={},this._alignedPosMatrixCache={}},Rr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};sr.prototype.clone=function(){var n=new sr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Rr.minZoom.get=function(){return this._minZoom},Rr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Rr.maxZoom.get=function(){return this._maxZoom},Rr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Rr.minPitch.get=function(){return this._minPitch},Rr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Rr.maxPitch.get=function(){return this._maxPitch},Rr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Rr.renderWorldCopies.get=function(){return this._renderWorldCopies},Rr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Rr.worldSize.get=function(){return this.tileSize*this.scale},Rr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Rr.size.get=function(){return new o.Point(this.width,this.height)},Rr.bearing.get=function(){return-this.angle/Math.PI*180},Rr.bearing.set=function(n){var s=-o.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Rr.pitch.get=function(){return this._pitch/Math.PI*180},Rr.pitch.set=function(n){var s=o.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Rr.fov.get=function(){return this._fov/Math.PI*180},Rr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Rr.zoom.get=function(){return this._zoom},Rr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Rr.center.get=function(){return this._center},Rr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Rr.padding.get=function(){return this._edgeInsets.toJSON()},Rr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Rr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},sr.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},sr.prototype.interpolatePadding=function(n,s,a){this._unmodified=!1,this._edgeInsets.interpolate(n,s,a),this._constrain(),this._calcMatrices()},sr.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},sr.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new o.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new o.Point(0,0)),u=this.pointCoordinate(new o.Point(this.width,0)),m=this.pointCoordinate(new o.Point(this.width,this.height)),w=this.pointCoordinate(new o.Point(0,this.height)),E=Math.floor(Math.min(a.x,u.x,m.x,w.x)),I=Math.floor(Math.max(a.x,u.x,m.x,w.x)),D=E-1;D<=I+1;D++)D!==0&&s.push(new o.UnwrappedTileID(D,n));return s},sr.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),a=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var u=o.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),w=[m*u.x,m*u.y,0],E=ll.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),I=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=s);var D=function(He){return{aabb:new En([He*m,0,0],[(He+1)*m,m,0]),zoom:0,x:0,y:0,wrap:He,fullyVisible:!1}},N=[],J=[],Y=s,Q=n.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var se=1;se<=3;se++)N.push(D(-se)),N.push(D(se));for(N.push(D(0));N.length>0;){var ae=N.pop(),ce=ae.x,re=ae.y,fe=ae.fullyVisible;if(!fe){var _e=ae.aabb.intersects(E);if(_e===0)continue;fe=_e===2}var Ee=ae.aabb.distanceX(w),Ce=ae.aabb.distanceY(w),Me=Math.max(Math.abs(Ee),Math.abs(Ce));if(ae.zoom===Y||Me>3+(1<<Y-ae.zoom)-2&&ae.zoom>=I)J.push({tileID:new o.OverscaledTileID(ae.zoom===Y?Q:ae.zoom,ae.wrap,ae.zoom,ce,re),distanceSq:o.sqrLen([w[0]-.5-ce,w[1]-.5-re])});else for(var Oe=0;Oe<4;Oe++){var Ze=(ce<<1)+Oe%2,We=(re<<1)+(Oe>>1);N.push({aabb:ae.aabb.quadrant(Oe),zoom:ae.zoom+1,x:Ze,y:We,wrap:ae.wrap,fullyVisible:fe})}}return J.sort(function(He,ut){return He.distanceSq-ut.distanceSq}).map(function(He){return He.tileID})},sr.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Rr.unmodified.get=function(){return this._unmodified},sr.prototype.zoomScale=function(n){return Math.pow(2,n)},sr.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},sr.prototype.project=function(n){var s=o.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(n.lng)*this.worldSize,o.mercatorYfromLat(s)*this.worldSize)},sr.prototype.unproject=function(n){return new o.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Rr.point.get=function(){return this.project(this.center)},sr.prototype.setLocationAtPoint=function(n,s){var a=this.pointCoordinate(s),u=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),w=new o.MercatorCoordinate(m.x-(a.x-u.x),m.y-(a.y-u.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},sr.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},sr.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},sr.prototype.locationCoordinate=function(n){return o.MercatorCoordinate.fromLngLat(n)},sr.prototype.coordinateLocation=function(n){return n.toLngLat()},sr.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],a=[n.x,n.y,1,1];o.transformMat4(s,s,this.pixelMatrixInverse),o.transformMat4(a,a,this.pixelMatrixInverse);var u=s[3],m=a[3],w=s[1]/u,E=a[1]/m,I=s[2]/u,D=a[2]/m,N=I===D?0:(0-I)/(D-I);return new o.MercatorCoordinate(o.number(s[0]/u,a[0]/m,N)/this.worldSize,o.number(w,E,N)/this.worldSize)},sr.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix),new o.Point(s[0]/s[3],s[1]/s[3])},sr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},sr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},sr.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},sr.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var a=n.key,u=s?this._alignedPosMatrixCache:this._posMatrixCache;if(u[a])return u[a];var m=n.canonical,w=this.worldSize/this.zoomScale(m.z),E=m.x+Math.pow(2,m.z)*n.wrap,I=o.identity(new Float64Array(16));return o.translate(I,I,[E*w,m.y*w,0]),o.scale(I,I,[w/o.EXTENT,w/o.EXTENT,1]),o.multiply(I,s?this.alignedProjMatrix:this.projMatrix,I),u[a]=new Float32Array(I),u[a]},sr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},sr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,a,u,m=-90,w=90,E=-180,I=180,D=this.size,N=this._unmodified;if(this.latRange){var J=this.latRange;m=o.mercatorYfromLat(J[1])*this.worldSize,n=(w=o.mercatorYfromLat(J[0])*this.worldSize)-m<D.y?D.y/(w-m):0}if(this.lngRange){var Y=this.lngRange;E=o.mercatorXfromLng(Y[0])*this.worldSize,s=(I=o.mercatorXfromLng(Y[1])*this.worldSize)-E<D.x?D.x/(I-E):0}var Q=this.point,se=Math.max(s||0,n||0);if(se)return this.center=this.unproject(new o.Point(s?(I+E)/2:Q.x,n?(w+m)/2:Q.y)),this.zoom+=this.scaleZoom(se),this._unmodified=N,void(this._constraining=!1);if(this.latRange){var ae=Q.y,ce=D.y/2;ae-ce<m&&(u=m+ce),ae+ce>w&&(u=w-ce)}if(this.lngRange){var re=Q.x,fe=D.x/2;re-fe<E&&(a=E+fe),re+fe>I&&(a=I-fe)}a===void 0&&u===void 0||(this.center=this.unproject(new o.Point(a!==void 0?a:Q.x,u!==void 0?u:Q.y))),this._unmodified=N,this._constraining=!1}},sr.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+n.y/this.height),u=Math.sin(a)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-s-a,.01,Math.PI-.01)),m=this.point,w=m.x,E=m.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*u+this.cameraToCenterDistance),D=this.height/50,N=new Float64Array(16);o.perspective(N,this._fov,this.width/this.height,D,I),N[8]=2*-n.x/this.width,N[9]=2*n.y/this.height,o.scale(N,N,[1,-1,1]),o.translate(N,N,[0,0,-this.cameraToCenterDistance]),o.rotateX(N,N,this._pitch),o.rotateZ(N,N,this.angle),o.translate(N,N,[-w,-E,0]),this.mercatorMatrix=o.scale([],N,[this.worldSize,this.worldSize,this.worldSize]),o.scale(N,N,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=N,this.invProjMatrix=o.invert([],this.projMatrix);var J=this.width%2/2,Y=this.height%2/2,Q=Math.cos(this.angle),se=Math.sin(this.angle),ae=w-Math.round(w)+Q*J+se*Y,ce=E-Math.round(E)+Q*Y+se*J,re=new Float64Array(N);if(o.translate(re,re,[ae>.5?ae-1:ae,ce>.5?ce-1:ce,0]),this.alignedProjMatrix=re,N=o.create(),o.scale(N,N,[this.width/2,-this.height/2,1]),o.translate(N,N,[1,-1,0]),this.labelPlaneMatrix=N,N=o.create(),o.scale(N,N,[1,-1,1]),o.translate(N,N,[-1,-1,0]),o.scale(N,N,[2/this.width,2/this.height,1]),this.glCoordMatrix=N,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(N=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=N,this._posMatrixCache={},this._alignedPosMatrixCache={}}},sr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new o.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},sr.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,n))},sr.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var a=s.x,u=s.y,m=s.x,w=s.y,E=0,I=n;E<I.length;E+=1){var D=I[E];a=Math.min(a,D.x),u=Math.min(u,D.y),m=Math.max(m,D.x),w=Math.max(w,D.y)}return[new o.Point(a,u),new o.Point(m,u),new o.Point(m,w),new o.Point(a,w),new o.Point(a,u)]},Object.defineProperties(sr.prototype,Rr);var Sn=function(n){var s,a,u,m;this._hashName=n&&encodeURIComponent(n),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,u=null,m=function(){u=null,a&&(s(),u=setTimeout(m,300),a=!1)},function(){return a=!0,u||m(),u})};Sn.prototype.addTo=function(n){return this._map=n,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Sn.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Sn.prototype.getHashString=function(n){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,u=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,u),w=Math.round(s.lng*m)/m,E=Math.round(s.lat*m)/m,I=this._map.getBearing(),D=this._map.getPitch(),N="";if(N+=n?"/"+w+"/"+E+"/"+a:a+"/"+E+"/"+w,(I||D)&&(N+="/"+Math.round(10*I)/10),D&&(N+="/"+Math.round(D)),this._hashName){var J=this._hashName,Y=!1,Q=o.window.location.hash.slice(1).split("&").map(function(se){var ae=se.split("=")[0];return ae===J?(Y=!0,ae+"="+N):se}).filter(function(se){return se});return Y||Q.push(J+"="+N),"#"+Q.join("&")}return"#"+N},Sn.prototype._getCurrentHash=function(){var n,s=this,a=o.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(u){return u.split("=")}).forEach(function(u){u[0]===s._hashName&&(n=u)}),(n&&n[1]||"").split("/")):a.split("/")},Sn.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},Sn.prototype._updateHashUnthrottled=function(){var n=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,n)}catch{}};var Us={linearity:.3,easing:o.bezier(0,0,.3,1)},xo=o.extend({deceleration:2500,maxSpeed:1400},Us),Bo=o.extend({deceleration:20,maxSpeed:1400},Us),Pl=o.extend({deceleration:1e3,maxSpeed:360},Us),vu=o.extend({deceleration:1e3,maxSpeed:90},Us),wo=function(n){this._map=n,this.clear()};function ul(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function Oo(n,s,a){var u=a.maxSpeed,m=a.linearity,w=a.deceleration,E=o.clamp(n*m/(s/1e3),-u,u),I=Math.abs(E)/(w*m);return{easing:a.easing,duration:1e3*I,amount:E*(I/2)}}wo.prototype.clear=function(){this._inertiaBuffer=[]},wo.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:n})},wo.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=o.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},wo.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},a=0,u=this._inertiaBuffer;a<u.length;a+=1){var m=u[a].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(s.pan.mag()){var I=Oo(s.pan.mag(),w,o.extend({},xo,n||{}));E.offset=s.pan.mult(I.amount/s.pan.mag()),E.center=this._map.transform.center,ul(E,I)}if(s.zoom){var D=Oo(s.zoom,w,Bo);E.zoom=this._map.transform.zoom+D.amount,ul(E,D)}if(s.bearing){var N=Oo(s.bearing,w,Pl);E.bearing=this._map.transform.bearing+o.clamp(N.amount,-179,179),ul(E,N)}if(s.pitch){var J=Oo(s.pitch,w,vu);E.pitch=this._map.transform.pitch+J.amount,ul(E,J)}if(E.zoom||E.bearing){var Y=s.pinchAround===void 0?s.around:s.pinchAround;E.around=Y?this._map.unproject(Y):this._map.getCenter()}return this.clear(),o.extend(E,{noMoveStart:!0})}};var Nr=function(n){function s(u,m,w,E){E===void 0&&(E={});var I=k.mousePos(m.getCanvasContainer(),w),D=m.unproject(I);n.call(this,u,o.extend({point:I,lngLat:D,originalEvent:w},E)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),Fo=function(n){function s(u,m,w){var E=u==="touchend"?w.changedTouches:w.touches,I=k.touchPos(m.getCanvasContainer(),E),D=I.map(function(Y){return m.unproject(Y)}),N=I.reduce(function(Y,Q,se,ae){return Y.add(Q.div(ae.length))},new o.Point(0,0)),J=m.unproject(N);n.call(this,u,{points:I,point:N,lngLats:D,lngLat:J,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),ga=function(n){function s(u,m,w){n.call(this,u,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),Zr=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};Zr.prototype.reset=function(){delete this._mousedownPos},Zr.prototype.wheel=function(n){return this._firePreventable(new ga(n.type,this._map,n))},Zr.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new Nr(n.type,this._map,n))},Zr.prototype.mouseup=function(n){this._map.fire(new Nr(n.type,this._map,n))},Zr.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Nr(n.type,this._map,n))},Zr.prototype.dblclick=function(n){return this._firePreventable(new Nr(n.type,this._map,n))},Zr.prototype.mouseover=function(n){this._map.fire(new Nr(n.type,this._map,n))},Zr.prototype.mouseout=function(n){this._map.fire(new Nr(n.type,this._map,n))},Zr.prototype.touchstart=function(n){return this._firePreventable(new Fo(n.type,this._map,n))},Zr.prototype.touchmove=function(n){this._map.fire(new Fo(n.type,this._map,n))},Zr.prototype.touchend=function(n){this._map.fire(new Fo(n.type,this._map,n))},Zr.prototype.touchcancel=function(n){this._map.fire(new Fo(n.type,this._map,n))},Zr.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},Zr.prototype.isEnabled=function(){return!0},Zr.prototype.isActive=function(){return!1},Zr.prototype.enable=function(){},Zr.prototype.disable=function(){};var ht=function(n){this._map=n};ht.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ht.prototype.mousemove=function(n){this._map.fire(new Nr(n.type,this._map,n))},ht.prototype.mousedown=function(){this._delayContextMenu=!0},ht.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Nr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ht.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Nr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},ht.prototype.isEnabled=function(){return!0},ht.prototype.isActive=function(){return!1},ht.prototype.enable=function(){},ht.prototype.disable=function(){};var $n=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function is(n,s){for(var a={},u=0;u<n.length;u++)a[n[u].identifier]=s[u];return a}$n.prototype.isEnabled=function(){return!!this._enabled},$n.prototype.isActive=function(){return!!this._active},$n.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},$n.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$n.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(k.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},$n.prototype.mousemoveWindow=function(n,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var u=this._startPos;this._lastPos=a,this._box||(this._box=k.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(u.x,a.x),w=Math.max(u.x,a.x),E=Math.min(u.y,a.y),I=Math.max(u.y,a.y);k.setTransform(this._box,"translate("+m+"px,"+E+"px)"),this._box.style.width=w-m+"px",this._box.style.height=I-E+"px"}}},$n.prototype.mouseupWindow=function(n,s){var a=this;if(this._active&&n.button===0){var u=this._startPos,m=s;if(this.reset(),k.suppressClick(),u.x!==m.x||u.y!==m.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(u,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},$n.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},$n.prototype.blur=function(){this.reset()},$n.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos},$n.prototype._fireEvent=function(n,s){return this._map.fire(new o.Event(n,{originalEvent:s}))};var _a=function(n){this.reset(),this.numTouches=n.numTouches};_a.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},_a.prototype.touchstart=function(n,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),a.length===this.numTouches&&(this.centroid=function(u){for(var m=new o.Point(0,0),w=0,E=u;w<E.length;w+=1)m._add(E[w]);return m.div(u.length)}(s),this.touches=is(a,s)))},_a.prototype.touchmove=function(n,s,a){if(!this.aborted&&this.centroid){var u=is(a,s);for(var m in this.touches){var w=u[m];(!w||w.dist(this.touches[m])>30)&&(this.aborted=!0)}}},_a.prototype.touchend=function(n,s,a){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var u=!this.aborted&&this.centroid;if(this.reset(),u)return u}};var lo=function(n){this.singleTap=new _a(n),this.numTaps=n.numTaps,this.reset()};lo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},lo.prototype.touchstart=function(n,s,a){this.singleTap.touchstart(n,s,a)},lo.prototype.touchmove=function(n,s,a){this.singleTap.touchmove(n,s,a)},lo.prototype.touchend=function(n,s,a){var u=this.singleTap.touchend(n,s,a);if(u){var m=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(u)<30;if(m&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=u,this.count===this.numTaps)return this.reset(),u}};var an=function(){this._zoomIn=new lo({numTouches:1,numTaps:2}),this._zoomOut=new lo({numTouches:2,numTaps:1}),this.reset()};an.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},an.prototype.touchstart=function(n,s,a){this._zoomIn.touchstart(n,s,a),this._zoomOut.touchstart(n,s,a)},an.prototype.touchmove=function(n,s,a){this._zoomIn.touchmove(n,s,a),this._zoomOut.touchmove(n,s,a)},an.prototype.touchend=function(n,s,a){var u=this,m=this._zoomIn.touchend(n,s,a),w=this._zoomOut.touchend(n,s,a);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(m)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:n})}}):void 0},an.prototype.touchcancel=function(){this.reset()},an.prototype.enable=function(){this._enabled=!0},an.prototype.disable=function(){this._enabled=!1,this.reset()},an.prototype.isEnabled=function(){return this._enabled},an.prototype.isActive=function(){return this._active};var cl={0:1,2:2},et=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};et.prototype.blur=function(){this.reset()},et.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},et.prototype._correctButton=function(n,s){return!1},et.prototype._move=function(n,s){return{}},et.prototype.mousedown=function(n,s){if(!this._lastPoint){var a=k.mouseButton(n);this._correctButton(n,a)&&(this._lastPoint=s,this._eventButton=a)}},et.prototype.mousemoveWindow=function(n,s){var a=this._lastPoint;if(a){if(n.preventDefault(),function(u,m){var w=cl[m];return u.buttons===void 0||(u.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},et.prototype.mouseupWindow=function(n){this._lastPoint&&k.mouseButton(n)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())},et.prototype.enable=function(){this._enabled=!0},et.prototype.disable=function(){this._enabled=!1,this.reset()},et.prototype.isEnabled=function(){return this._enabled},et.prototype.isActive=function(){return this._active};var js=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(a,u){n.prototype.mousedown.call(this,a,u),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,u){return u===0&&!a.ctrlKey},s.prototype._move=function(a,u){return{around:u,panDelta:u.sub(a)}},s}(et),hl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,u){return u===0&&a.ctrlKey||u===2},s.prototype._move=function(a,u){var m=.8*(u.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(et),Cl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,u){return u===0&&a.ctrlKey||u===2},s.prototype._move=function(a,u){var m=-.5*(u.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(et),vi=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};vi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},vi.prototype.touchstart=function(n,s,a){return this._calculateTransform(n,s,a)},vi.prototype.touchmove=function(n,s,a){if(this._active&&!(a.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,a)},vi.prototype.touchend=function(n,s,a){this._calculateTransform(n,s,a),this._active&&a.length<this._minTouches&&this.reset()},vi.prototype.touchcancel=function(){this.reset()},vi.prototype._calculateTransform=function(n,s,a){a.length>0&&(this._active=!0);var u=is(a,s),m=new o.Point(0,0),w=new o.Point(0,0),E=0;for(var I in u){var D=u[I],N=this._touches[I];N&&(m._add(D),w._add(D.sub(N)),E++,u[I]=D)}if(this._touches=u,!(E<this._minTouches)&&w.mag()){var J=w.div(E);if(this._sum._add(J),!(this._sum.mag()<this._clickTolerance))return{around:m.div(E),panDelta:J}}},vi.prototype.enable=function(){this._enabled=!0},vi.prototype.disable=function(){this._enabled=!1,this.reset()},vi.prototype.isEnabled=function(){return this._enabled},vi.prototype.isActive=function(){return this._active};var li=function(){this.reset()};function Ca(n,s,a){for(var u=0;u<n.length;u++)if(n[u].identifier===a)return s[u]}function Na(n,s){return Math.log(n/s)/Math.LN2}li.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},li.prototype._start=function(n){},li.prototype._move=function(n,s,a){return{}},li.prototype.touchstart=function(n,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},li.prototype.touchmove=function(n,s,a){if(this._firstTwoTouches){n.preventDefault();var u=this._firstTwoTouches,m=u[1],w=Ca(a,s,u[0]),E=Ca(a,s,m);if(w&&E){var I=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],I,n)}}},li.prototype.touchend=function(n,s,a){if(this._firstTwoTouches){var u=this._firstTwoTouches,m=u[1],w=Ca(a,s,u[0]),E=Ca(a,s,m);w&&E||(this._active&&k.suppressClick(),this.reset())}},li.prototype.touchcancel=function(){this.reset()},li.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},li.prototype.disable=function(){this._enabled=!1,this.reset()},li.prototype.isEnabled=function(){return this._enabled},li.prototype.isActive=function(){return this._active};var Ma=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,u){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Na(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Na(this._distance,m),pinchAround:u}},s}(li);function Da(n,s){return 180*n.angleWith(s)/Math.PI}var Yu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,u){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Da(this._vector,m),pinchAround:u}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var u=25/(Math.PI*this._minDiameter)*360,m=Da(a,this._startVector);return Math.abs(m)<u},s}(li);function qs(n){return Math.abs(n.y)>Math.abs(n.x)}var Qu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,qs(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,u,m){var w=a[0].sub(this._lastPoints[0]),E=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,u,m){if(this._valid!==void 0)return this._valid;var w=a.mag()>=2,E=u.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var I=a.y>0==u.y>0;return qs(a)&&qs(u)&&I}},s}(li),pl={panStep:100,bearingStep:15,pitchStep:10},Ua=function(){var n=pl;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function Eo(n){return n*(2-n)}Ua.prototype.blur=function(){this.reset()},Ua.prototype.reset=function(){this._active=!1},Ua.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=0,u=0,m=0,w=0,E=0;switch(n.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:n.shiftKey?u=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?u=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),E=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(u=0,m=0),{cameraAnimation:function(I){var D=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:Eo,zoom:a?Math.round(D)+a*(n.shiftKey?2:1):D,bearing:I.getBearing()+u*s._bearingStep,pitch:I.getPitch()+m*s._pitchStep,offset:[-w*s._panStep,-E*s._panStep],center:I.getCenter()},{originalEvent:n})}}}},Ua.prototype.enable=function(){this._enabled=!0},Ua.prototype.disable=function(){this._enabled=!1,this.reset()},Ua.prototype.isEnabled=function(){return this._enabled},Ua.prototype.isActive=function(){return this._active},Ua.prototype.disableRotation=function(){this._rotationDisabled=!0},Ua.prototype.enableRotation=function(){this._rotationDisabled=!1};var $t=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};$t.prototype.setZoomRate=function(n){this._defaultZoomRate=n},$t.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},$t.prototype.isEnabled=function(){return!!this._enabled},$t.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},$t.prototype.isZooming=function(){return!!this._zooming},$t.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},$t.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$t.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,a=o.browser.now(),u=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(u*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},$t.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},$t.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=k.mousePos(this._el,n);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},$t.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,u=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&u!==0&&(u=1/u);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*u))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,I=this._startZoom,D=this._easing,N=!1;if(this._type==="wheel"&&I&&D){var J=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Y=D(J);w=o.number(I,E,Y),J<1?this._frameId||(this._frameId=!0):N=!0}else w=E,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!N,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},$t.prototype._smoothOutEasing=function(n){var s=o.ease;if(this._prevEase){var a=this._prevEase,u=(o.browser.now()-a.start)/a.duration,m=a.easing(u+.01)-a.easing(u),w=.27/Math.sqrt(m*m+1e-4)*.01,E=Math.sqrt(.0729-w*w);s=o.bezier(w,E,.25,1)}return this._prevEase={start:o.browser.now(),duration:n,easing:s},s},$t.prototype.blur=function(){this.reset()},$t.prototype.reset=function(){this._active=!1};var Vo=function(n,s){this._clickZoom=n,this._tapZoom=s};Vo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Vo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Vo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Vo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var No=function(){this.reset()};No.prototype.reset=function(){this._active=!1},No.prototype.blur=function(){this.reset()},No.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(n.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:n})}}},No.prototype.enable=function(){this._enabled=!0},No.prototype.disable=function(){this._enabled=!1,this.reset()},No.prototype.isEnabled=function(){return this._enabled},No.prototype.isActive=function(){return this._active};var ea=function(){this._tap=new lo({numTouches:1,numTaps:1}),this.reset()};ea.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ea.prototype.touchstart=function(n,s,a){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(n,s,a))},ea.prototype.touchmove=function(n,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var u=s[0],m=u.y-this._swipePoint.y;return this._swipePoint=u,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,a)},ea.prototype.touchend=function(n,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(n,s,a)&&(this._tapTime=n.timeStamp)},ea.prototype.touchcancel=function(){this.reset()},ea.prototype.enable=function(){this._enabled=!0},ea.prototype.disable=function(){this._enabled=!1,this.reset()},ea.prototype.isEnabled=function(){return this._enabled},ea.prototype.isActive=function(){return this._active};var Uo=function(n,s,a){this._el=n,this._mousePan=s,this._touchPan=a};Uo.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Uo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Uo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Uo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Zs=function(n,s,a){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};Zs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Zs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Zs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Zs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ta=function(n,s,a,u){this._el=n,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=u,this._rotationDisabled=!1,this._enabled=!0};ta.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ta.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ta.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ta.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ta.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ta.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ui=function(n){return n.zoom||n.drag||n.pitch||n.rotate},jo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(o.Event);function St(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var ft=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wo(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),o.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[o.window,"blur",void 0]];for(var u=0,m=this._listeners;u<m.length;u+=1){var w=m[u],E=w[0];k.addEventListener(E,w[1],E===o.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};ft.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var a=s[n],u=a[0];k.removeEventListener(u,a[1],u===o.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},ft.prototype._addDefaultHandlers=function(n){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new Zr(s,n));var u=s.boxZoom=new $n(s,n);this._add("boxZoom",u);var m=new an,w=new No;s.doubleClickZoom=new Vo(w,m),this._add("tapZoom",m),this._add("clickZoom",w);var E=new ea;this._add("tapDragZoom",E);var I=s.touchPitch=new Qu;this._add("touchPitch",I);var D=new hl(n),N=new Cl(n);s.dragRotate=new Zs(n,D,N),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);var J=new js(n),Y=new vi(n);s.dragPan=new Uo(a,J,Y),this._add("mousePan",J),this._add("touchPan",Y,["touchZoom","touchRotate"]);var Q=new Yu,se=new Ma;s.touchZoomRotate=new ta(a,se,Q,E),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]);var ae=s.scrollZoom=new $t(s,this);this._add("scrollZoom",ae,["mousePan"]);var ce=s.keyboard=new Ua;this._add("keyboard",ce),this._add("blockableMapEvent",new ht(s));for(var re=0,fe=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];re<fe.length;re+=1){var _e=fe[re];n.interactive&&n[_e]&&s[_e].enable(n[_e])}},ft.prototype._add=function(n,s,a){this._handlers.push({handlerName:n,handler:s,allowed:a}),this._handlersById[n]=s},ft.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},ft.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},ft.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ft.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ft.prototype.isMoving=function(){return Boolean(Ui(this._eventsInProgress))||this.isZooming()},ft.prototype._blockedByActive=function(n,s,a){for(var u in n)if(u!==a&&(!s||s.indexOf(u)<0))return!0;return!1},ft.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},ft.prototype._getMapTouches=function(n){for(var s=[],a=0,u=n;a<u.length;a+=1){var m=u[a];this._el.contains(m.target)&&s.push(m)}return s},ft.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var a=n.type==="renderFrame"?void 0:n,u={needsRenderFrame:!1},m={},w={},E=n.touches?this._getMapTouches(n.touches):void 0,I=E?k.touchPos(this._el,E):k.mousePos(this._el,n),D=0,N=this._handlers;D<N.length;D+=1){var J=N[D],Y=J.handlerName,Q=J.handler,se=J.allowed;if(Q.isEnabled()){var ae=void 0;this._blockedByActive(w,se,Y)?Q.reset():Q[s||n.type]&&(ae=Q[s||n.type](n,I,E),this.mergeHandlerResult(u,m,ae,Y,a),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||Q.isActive())&&(w[Y]=Q)}}var ce={};for(var re in this._previousActiveHandlers)w[re]||(ce[re]=a);this._previousActiveHandlers=w,(Object.keys(ce).length||St(u))&&(this._changes.push([u,m,ce]),this._triggerRenderFrame()),(Object.keys(w).length||St(u))&&this._map._stop(!0),this._updatingCamera=!1;var fe=u.cameraAnimation;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))},ft.prototype.mergeHandlerResult=function(n,s,a,u,m){if(a){o.extend(n,a);var w={handlerName:u,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(s.zoom=w),a.panDelta!==void 0&&(s.drag=w),a.pitchDelta!==void 0&&(s.pitch=w),a.bearingDelta!==void 0&&(s.rotate=w)}},ft.prototype._applyChanges=function(){for(var n={},s={},a={},u=0,m=this._changes;u<m.length;u+=1){var w=m[u],E=w[0],I=w[1],D=w[2];E.panDelta&&(n.panDelta=(n.panDelta||new o.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(n.around=E.around),E.pinchAround!==void 0&&(n.pinchAround=E.pinchAround),E.noInertia&&(n.noInertia=E.noInertia),o.extend(s,I),o.extend(a,D)}this._updateMapTransform(n,s,a),this._changes=[]},ft.prototype._updateMapTransform=function(n,s,a){var u=this._map,m=u.transform;if(!St(n))return this._fireEvents(s,a,!0);var w=n.panDelta,E=n.zoomDelta,I=n.bearingDelta,D=n.pitchDelta,N=n.around,J=n.pinchAround;J!==void 0&&(N=J),u._stop(!0),N=N||u.transform.centerPoint;var Y=m.pointLocation(w?N.sub(w):N);I&&(m.bearing+=I),D&&(m.pitch+=D),E&&(m.zoom+=E),m.setLocationAtPoint(Y,N),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,a,!0)},ft.prototype._fireEvents=function(n,s,a){var u=this,m=Ui(this._eventsInProgress),w=Ui(n),E={};for(var I in n)this._eventsInProgress[I]||(E[I+"start"]=n[I].originalEvent),this._eventsInProgress[I]=n[I];for(var D in!m&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(D,E[D]);for(var N in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(N,n[N].originalEvent);var J,Y={};for(var Q in this._eventsInProgress){var se=this._eventsInProgress[Q],ae=se.handlerName,ce=se.originalEvent;this._handlersById[ae].isActive()||(delete this._eventsInProgress[Q],Y[Q+"end"]=J=s[ae]||ce)}for(var re in Y)this._fireEvent(re,Y[re]);var fe=Ui(this._eventsInProgress);if(a&&(m||w)&&!fe){this._updatingCamera=!0;var _e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ee=function(Ce){return Ce!==0&&-u._bearingSnap<Ce&&Ce<u._bearingSnap};_e?(Ee(_e.bearing||this._map.getBearing())&&(_e.bearing=0),this._map.easeTo(_e,{originalEvent:J})):(this._map.fire(new o.Event("moveend",{originalEvent:J})),Ee(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ft.prototype._fireEvent=function(n,s){this._map.fire(new o.Event(n,s?{originalEvent:s}:{}))},ft.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new jo("renderFrame",{timeStamp:s})),n._applyChanges()})},ft.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var zc=function(n){function s(a,u){n.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=u.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,u){return this.jumpTo({center:a},u)},s.prototype.panBy=function(a,u,m){return a=o.Point.convert(a).mult(-1),this.panTo(this.transform.center,o.extend({offset:a},u),m)},s.prototype.panTo=function(a,u,m){return this.easeTo(o.extend({center:a},u),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,u){return this.jumpTo({zoom:a},u),this},s.prototype.zoomTo=function(a,u,m){return this.easeTo(o.extend({zoom:a},u),m)},s.prototype.zoomIn=function(a,u){return this.zoomTo(this.getZoom()+1,a,u),this},s.prototype.zoomOut=function(a,u){return this.zoomTo(this.getZoom()-1,a,u),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,u){return this.jumpTo({bearing:a},u),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,u){return this.jumpTo({padding:a},u),this},s.prototype.rotateTo=function(a,u,m){return this.easeTo(o.extend({bearing:a},u),m)},s.prototype.resetNorth=function(a,u){return this.rotateTo(0,o.extend({duration:1e3},a),u),this},s.prototype.resetNorthPitch=function(a,u){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},a),u),this},s.prototype.snapToNorth=function(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,u){return this.jumpTo({pitch:a},u),this},s.prototype.cameraForBounds=function(a,u){a=o.LngLatBounds.convert(a);var m=u&&u.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,u)},s.prototype._cameraForBoxAndBearing=function(a,u,m,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=o.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var I=w.padding;w.padding={top:I,bottom:I,right:I,left:I}}w.padding=o.extend(E,w.padding);var D=this.transform,N=D.padding,J=D.project(o.LngLat.convert(a)),Y=D.project(o.LngLat.convert(u)),Q=J.rotate(-m*Math.PI/180),se=Y.rotate(-m*Math.PI/180),ae=new o.Point(Math.max(Q.x,se.x),Math.max(Q.y,se.y)),ce=new o.Point(Math.min(Q.x,se.x),Math.min(Q.y,se.y)),re=ae.sub(ce),fe=(D.width-(N.left+N.right+w.padding.left+w.padding.right))/re.x,_e=(D.height-(N.top+N.bottom+w.padding.top+w.padding.bottom))/re.y;if(!(_e<0||fe<0)){var Ee=Math.min(D.scaleZoom(D.scale*Math.min(fe,_e)),w.maxZoom),Ce=typeof w.offset.x=="number"?new o.Point(w.offset.x,w.offset.y):o.Point.convert(w.offset),Me=new o.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(m*Math.PI/180),Oe=Ce.add(Me).mult(D.scale/D.zoomScale(Ee));return{center:D.unproject(J.add(Y).div(2).sub(Oe)),zoom:Ee,bearing:m}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,u,m){return this._fitInternal(this.cameraForBounds(a,u),u,m)},s.prototype.fitScreenCoordinates=function(a,u,m,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(a)),this.transform.pointLocation(o.Point.convert(u)),m,w),w,E)},s.prototype._fitInternal=function(a,u,m){return a?(delete(u=o.extend(a,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this},s.prototype.jumpTo=function(a,u){this.stop();var m=this.transform,w=!1,E=!1,I=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(w=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=o.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(E=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(I=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new o.Event("movestart",u)).fire(new o.Event("move",u)),w&&this.fire(new o.Event("zoomstart",u)).fire(new o.Event("zoom",u)).fire(new o.Event("zoomend",u)),E&&this.fire(new o.Event("rotatestart",u)).fire(new o.Event("rotate",u)).fire(new o.Event("rotateend",u)),I&&this.fire(new o.Event("pitchstart",u)).fire(new o.Event("pitch",u)).fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))},s.prototype.easeTo=function(a,u){var m=this;this._stop(!1,a.easeId),((a=o.extend({offset:[0,0],duration:500,easing:o.ease},a)).animate===!1||!a.essential&&o.browser.prefersReducedMotion)&&(a.duration=0);var w=this.transform,E=this.getZoom(),I=this.getBearing(),D=this.getPitch(),N=this.getPadding(),J="zoom"in a?+a.zoom:E,Y="bearing"in a?this._normalizeBearing(a.bearing,I):I,Q="pitch"in a?+a.pitch:D,se="padding"in a?a.padding:w.padding,ae=o.Point.convert(a.offset),ce=w.centerPoint.add(ae),re=w.pointLocation(ce),fe=o.LngLat.convert(a.center||re);this._normalizeCenter(fe);var _e,Ee,Ce=w.project(re),Me=w.project(fe).sub(Ce),Oe=w.zoomScale(J-E);a.around&&(_e=o.LngLat.convert(a.around),Ee=w.locationPoint(_e));var Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==E,this._rotating=this._rotating||I!==Y,this._pitching=this._pitching||Q!==D,this._padding=!w.isPaddingEqual(se),this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,Ze),this._ease(function(We){if(m._zooming&&(w.zoom=o.number(E,J,We)),m._rotating&&(w.bearing=o.number(I,Y,We)),m._pitching&&(w.pitch=o.number(D,Q,We)),m._padding&&(w.interpolatePadding(N,se,We),ce=w.centerPoint.add(ae)),_e)w.setLocationAtPoint(_e,Ee);else{var He=w.zoomScale(w.zoom-E),ut=J>E?Math.min(2,Oe):Math.max(.5,Oe),kt=Math.pow(ut,1-We),dt=w.unproject(Ce.add(Me.mult(We*kt)).mult(He));w.setLocationAtPoint(w.renderWorldCopies?dt.wrap():dt,ce)}m._fireMoveEvents(u)},function(We){m._afterEase(u,We)},a),this},s.prototype._prepareEase=function(a,u,m){m===void 0&&(m={}),this._moving=!0,u||m.moving||this.fire(new o.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new o.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new o.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new o.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new o.Event("move",a)),this._zooming&&this.fire(new o.Event("zoom",a)),this._rotating&&this.fire(new o.Event("rotate",a)),this._pitching&&this.fire(new o.Event("pitch",a))},s.prototype._afterEase=function(a,u){if(!this._easeId||!u||this._easeId!==u){delete this._easeId;var m=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new o.Event("zoomend",a)),w&&this.fire(new o.Event("rotateend",a)),E&&this.fire(new o.Event("pitchend",a)),this.fire(new o.Event("moveend",a))}},s.prototype.flyTo=function(a,u){var m=this;if(!a.essential&&o.browser.prefersReducedMotion){var w=o.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,u)}this.stop(),a=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},a);var E=this.transform,I=this.getZoom(),D=this.getBearing(),N=this.getPitch(),J=this.getPadding(),Y="zoom"in a?o.clamp(+a.zoom,E.minZoom,E.maxZoom):I,Q="bearing"in a?this._normalizeBearing(a.bearing,D):D,se="pitch"in a?+a.pitch:N,ae="padding"in a?a.padding:E.padding,ce=E.zoomScale(Y-I),re=o.Point.convert(a.offset),fe=E.centerPoint.add(re),_e=E.pointLocation(fe),Ee=o.LngLat.convert(a.center||_e);this._normalizeCenter(Ee);var Ce=E.project(_e),Me=E.project(Ee).sub(Ce),Oe=a.curve,Ze=Math.max(E.width,E.height),We=Ze/ce,He=Me.mag();if("minZoom"in a){var ut=o.clamp(Math.min(a.minZoom,I,Y),E.minZoom,E.maxZoom),kt=Ze/E.zoomScale(ut-I);Oe=Math.sqrt(kt/He*2)}var dt=Oe*Oe;function vt(Mt){var Rt=(We*We-Ze*Ze+(Mt?-1:1)*dt*dt*He*He)/(2*(Mt?We:Ze)*dt*He);return Math.log(Math.sqrt(Rt*Rt+1)-Rt)}function er(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function at(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}var Ut=vt(0),Kt=function(Mt){return at(Ut)/at(Ut+Oe*Mt)},jt=function(Mt){return Ze*((at(Ut)*(er(Rt=Ut+Oe*Mt)/at(Rt))-er(Ut))/dt)/He;var Rt},Nt=(vt(1)-Ut)/Oe;if(Math.abs(He)<1e-6||!isFinite(Nt)){if(Math.abs(Ze-We)<1e-6)return this.easeTo(a,u);var Zt=We<Ze?-1:1;Nt=Math.abs(Math.log(We/Ze))/Oe,jt=function(){return 0},Kt=function(Mt){return Math.exp(Zt*Oe*Mt)}}return a.duration="duration"in a?+a.duration:1e3*Nt/("screenSpeed"in a?+a.screenSpeed/Oe:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=D!==Q,this._pitching=se!==N,this._padding=!E.isPaddingEqual(ae),this._prepareEase(u,!1),this._ease(function(Mt){var Rt=Mt*Nt,Hi=1/Kt(Rt);E.zoom=Mt===1?Y:I+E.scaleZoom(Hi),m._rotating&&(E.bearing=o.number(D,Q,Mt)),m._pitching&&(E.pitch=o.number(N,se,Mt)),m._padding&&(E.interpolatePadding(J,ae,Mt),fe=E.centerPoint.add(re));var Ci=Mt===1?Ee:E.unproject(Ce.add(Me.mult(jt(Rt))).mult(Hi));E.setLocationAtPoint(E.renderWorldCopies?Ci.wrap():Ci,fe),m._fireMoveEvents(u)},function(){return m._afterEase(u)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!a){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(a,u,m){m.animate===!1||m.duration===0?(a(1),u()):(this._easeStart=o.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,u){a=o.wrap(a,-180,180);var m=Math.abs(a-u);return Math.abs(a-360-u)<m&&(a-=360),Math.abs(a+360-u)<m&&(a+=360),a},s.prototype._normalizeCenter=function(a){var u=this.transform;if(u.renderWorldCopies&&!u.lngRange){var m=a.lng-u.center.lng;a.lng+=m>180?-360:m<-180?360:0}},s}(o.Evented),La=function(n){n===void 0&&(n={}),this.options=n,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};La.prototype.getDefaultPosition=function(){return"bottom-right"},La.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},La.prototype.onRemove=function(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},La.prototype._setElementTitle=function(n,s){var a=this._map._getUIString("AttributionControl."+s);n.title=a,n.setAttribute("aria-label",a)},La.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},La.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(n){var a=s.reduce(function(u,m,w){return m.value&&(u+=m.key+"="+m.value+(w<s.length-1?"&":"")),u},"?");n.href=o.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},La.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},La.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(I){return typeof I!="string"?"":I})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var u in a){var m=a[u];if(m.used){var w=m.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(I,D){return I.length-D.length});var E=(n=n.filter(function(I,D){for(var N=D+1;N<n.length;N++)if(n[N].indexOf(I)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,n.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},La.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ja=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};ja.prototype.onAdd=function(n){this._map=n,this._container=k.create("div","mapboxgl-ctrl");var s=k.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ja.prototype.onRemove=function(){k.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ja.prototype.getDefaultPosition=function(){return"bottom-left"},ja.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ja.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},ja.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var pn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};pn.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},pn.prototype.remove=function(n){for(var s=this._currentlyRunning,a=0,u=s?this._queue.concat(s):this._queue;a<u.length;a+=1){var m=u[a];if(m.id===n)return void(m.cancelled=!0)}},pn.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,u=s;a<u.length;a+=1){var m=u[a];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},pn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var hs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},fl=o.window.HTMLImageElement,Ml=o.window.HTMLElement,Ur=o.window.ImageBitmap,Fn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},dl=function(n){function s(u){var m=this;if((u=o.extend({},Fn,u)).minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new sr(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies);if(n.call(this,w,u),this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=u.collectResourceTiming,this._renderTaskQueue=new pn,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},hs,u.locale),this._clickTolerance=u.clickTolerance,this._requestManager=new o.RequestManager(u.transformRequest,u.accessToken),typeof u.container=="string"){if(this._container=o.window.document.getElementById(u.container),!this._container)throw new Error("Container '"+u.container+"' not found.")}else{if(!(u.container instanceof Ml))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ft(this,u),this._hash=u.hash&&new Sn(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,o.extend({},u.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=u.localIdeographFontFamily,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new La({customAttribution:u.customAttribution})),this.addControl(new ja,u.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(E){m._update(E.dataType==="style"),m.fire(new o.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){m.fire(new o.Event(E.dataType+"dataloading",E))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(u,m){if(m===void 0&&(m=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=u.onAdd(this);this._controls.push(u);var E=this._controlPositions[m];return m.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},s.prototype.removeControl=function(u){if(!u||!u.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(u);return m>-1&&this._controls.splice(m,1),u.onRemove(this),this},s.prototype.hasControl=function(u){return this._controls.indexOf(u)>-1},s.prototype.resize=function(u){var m=this._containerDimensions(),w=m[0],E=m[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var I=!this._moving;return I&&this.fire(new o.Event("movestart",u)).fire(new o.Event("move",u)),this.fire(new o.Event("resize",u)),I&&this.fire(new o.Event("moveend",u)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(u){return this.transform.setMaxBounds(o.LngLatBounds.convert(u)),this._update()},s.prototype.setMinZoom=function(u){if((u=u==null?-2:u)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(u){if((u=u==null?22:u)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(u){if((u=u==null?0:u)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(u){if((u=u==null?60:u)>60)throw new Error("maxPitch must be less than or equal to 60");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(u){return this.transform.renderWorldCopies=u,this._update()},s.prototype.project=function(u){return this.transform.locationPoint(o.LngLat.convert(u))},s.prototype.unproject=function(u){return this.transform.pointLocation(o.Point.convert(u))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(u,m,w){var E,I=this;if(u==="mouseenter"||u==="mouseover"){var D=!1;return{layer:m,listener:w,delegates:{mousemove:function(J){var Y=I.getLayer(m)?I.queryRenderedFeatures(J.point,{layers:[m]}):[];Y.length?D||(D=!0,w.call(I,new Nr(u,I,J.originalEvent,{features:Y}))):D=!1},mouseout:function(){D=!1}}}}if(u==="mouseleave"||u==="mouseout"){var N=!1;return{layer:m,listener:w,delegates:{mousemove:function(J){(I.getLayer(m)?I.queryRenderedFeatures(J.point,{layers:[m]}):[]).length?N=!0:N&&(N=!1,w.call(I,new Nr(u,I,J.originalEvent)))},mouseout:function(J){N&&(N=!1,w.call(I,new Nr(u,I,J.originalEvent)))}}}}return{layer:m,listener:w,delegates:(E={},E[u]=function(J){var Y=I.getLayer(m)?I.queryRenderedFeatures(J.point,{layers:[m]}):[];Y.length&&(J.features=Y,w.call(I,J),delete J.features)},E)}},s.prototype.on=function(u,m,w){if(w===void 0)return n.prototype.on.call(this,u,m);var E=this._createDelegatedListener(u,m,w);for(var I in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(E),E.delegates)this.on(I,E.delegates[I]);return this},s.prototype.once=function(u,m,w){if(w===void 0)return n.prototype.once.call(this,u,m);var E=this._createDelegatedListener(u,m,w);for(var I in E.delegates)this.once(I,E.delegates[I]);return this},s.prototype.off=function(u,m,w){var E=this;return w===void 0?n.prototype.off.call(this,u,m):(this._delegatedListeners&&this._delegatedListeners[u]&&function(I){for(var D=I[u],N=0;N<D.length;N++){var J=D[N];if(J.layer===m&&J.listener===w){for(var Y in J.delegates)E.off(Y,J.delegates[Y]);return D.splice(N,1),E}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(u,m){if(!this.style)return[];var w;if(m!==void 0||u===void 0||u instanceof o.Point||Array.isArray(u)||(m=u,u=void 0),m=m||{},(u=u||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof u[0]=="number")w=[o.Point.convert(u)];else{var E=o.Point.convert(u[0]),I=o.Point.convert(u[1]);w=[E,new o.Point(I.x,E.y),I,new o.Point(E.x,I.y),E]}return this.style.queryRenderedFeatures(w,m,this.transform)},s.prototype.querySourceFeatures=function(u,m){return this.style.querySourceFeatures(u,m)},s.prototype.setStyle=function(u,m){return(m=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&u?(this._diffStyle(u,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(u,m))},s.prototype._getUIString=function(u){var m=this._locale[u];if(m==null)throw new Error("Missing UI string '"+u+"'");return m},s.prototype._updateStyle=function(u,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),u?(this.style=new mi(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof u=="string"?this.style.loadURL(u):this.style.loadJSON(u),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new mi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(u,m){var w=this;if(typeof u=="string"){var E=this._requestManager.normalizeStyleURL(u),I=this._requestManager.transformRequest(E,o.ResourceType.Style);o.getJSON(I,function(D,N){D?w.fire(new o.ErrorEvent(D)):N&&w._updateDiff(N,m)})}else typeof u=="object"&&this._updateDiff(u,m)},s.prototype._updateDiff=function(u,m){try{this.style.setState(u)&&this._update(!0)}catch(w){o.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(u,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(u,m){return this._lazyInitEmptyStyle(),this.style.addSource(u,m),this._update(!0)},s.prototype.isSourceLoaded=function(u){var m=this.style&&this.style.sourceCaches[u];if(m!==void 0)return m.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+u+"'")))},s.prototype.areTilesLoaded=function(){var u=this.style&&this.style.sourceCaches;for(var m in u){var w=u[m]._tiles;for(var E in w){var I=w[E];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(u,m,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(u,m,w)},s.prototype.removeSource=function(u){return this.style.removeSource(u),this._update(!0)},s.prototype.getSource=function(u){return this.style.getSource(u)},s.prototype.addImage=function(u,m,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var I=w.sdf;I===void 0&&(I=!1);var D=w.stretchX,N=w.stretchY,J=w.content;if(this._lazyInitEmptyStyle(),m instanceof fl||Ur&&m instanceof Ur){var Y=o.browser.getImageData(m);this.style.addImage(u,{data:new o.RGBAImage({width:Y.width,height:Y.height},Y.data),pixelRatio:E,stretchX:D,stretchY:N,content:J,sdf:I,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Q=m;this.style.addImage(u,{data:new o.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:E,stretchX:D,stretchY:N,content:J,sdf:I,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,u)}},s.prototype.updateImage=function(u,m){var w=this.style.getImage(u);if(!w)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=m instanceof fl||Ur&&m instanceof Ur?o.browser.getImageData(m):m,I=E.width,D=E.height,N=E.data;return I===void 0||D===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):I!==w.data.width||D!==w.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(N,!(m instanceof fl||Ur&&m instanceof Ur)),void this.style.updateImage(u,w))},s.prototype.hasImage=function(u){return u?!!this.style.getImage(u):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(u){this.style.removeImage(u)},s.prototype.loadImage=function(u,m){o.getImage(this._requestManager.transformRequest(u,o.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(u,m){return this._lazyInitEmptyStyle(),this.style.addLayer(u,m),this._update(!0)},s.prototype.moveLayer=function(u,m){return this.style.moveLayer(u,m),this._update(!0)},s.prototype.removeLayer=function(u){return this.style.removeLayer(u),this._update(!0)},s.prototype.getLayer=function(u){return this.style.getLayer(u)},s.prototype.setLayerZoomRange=function(u,m,w){return this.style.setLayerZoomRange(u,m,w),this._update(!0)},s.prototype.setFilter=function(u,m,w){return w===void 0&&(w={}),this.style.setFilter(u,m,w),this._update(!0)},s.prototype.getFilter=function(u){return this.style.getFilter(u)},s.prototype.setPaintProperty=function(u,m,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(u,m,w,E),this._update(!0)},s.prototype.getPaintProperty=function(u,m){return this.style.getPaintProperty(u,m)},s.prototype.setLayoutProperty=function(u,m,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(u,m,w,E),this._update(!0)},s.prototype.getLayoutProperty=function(u,m){return this.style.getLayoutProperty(u,m)},s.prototype.setLight=function(u,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(u,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(u,m){return this.style.setFeatureState(u,m),this._update()},s.prototype.removeFeatureState=function(u,m){return this.style.removeFeatureState(u,m),this._update()},s.prototype.getFeatureState=function(u){return this.style.getFeatureState(u)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var u=0,m=0;return this._container&&(u=this._container.clientWidth||400,m=this._container.clientHeight||300),[u,m]},s.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=k.create("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=k.create("div","mapboxgl-canvas-container",u);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=k.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=k.create("div","mapboxgl-control-container",u),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(D){I[D]=k.create("div","mapboxgl-ctrl-"+D,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(u,m){var w=o.browser.devicePixelRatio||1;this._canvas.width=w*u,this._canvas.height=w*m,this._canvas.style.width=u+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var u=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",u)||this._canvas.getContext("experimental-webgl",u);m?(this.painter=new Lr(m,this.transform),o.webpSupported.testSupport(m)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:u}))},s.prototype._contextRestored=function(u){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:u}))},s.prototype._onMapScroll=function(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(u){return this._update(),this._renderTaskQueue.add(u)},s.prototype._cancelRenderFrame=function(u){this._renderTaskQueue.remove(u)},s.prototype._render=function(u){var m,w=this,E=0,I=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=I.createQueryEXT(),I.beginQueryEXT(I.TIME_ELAPSED_EXT,m),E=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(u),!this._removed){var D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var N=this.transform.zoom,J=o.browser.now();this.style.zoomHistory.update(N,J);var Y=new o.EvaluationParameters(N,{now:J,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=Y.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(D=!0,this._crossFadingFactor=Q),this.style.update(Y)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var se=o.browser.now()-E;I.endQueryEXT(I.TIME_ELAPSED_EXT,m),setTimeout(function(){var re=I.getQueryObjectEXT(m,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(m),w.fire(new o.Event("gpu-timing-frame",{cpuTime:se,gpuTime:re}))},50)}if(this.listens("gpu-timing-layer")){var ae=this.painter.collectGpuTimers();setTimeout(function(){var re=w.painter.queryGpuTimers(ae);w.fire(new o.Event("gpu-timing-layer",{layerTimes:re}))},50)}var ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ce||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var u=0,m=this._controls;u<m.length;u+=1)m[u].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),ml(this._canvasContainer),ml(this._controlContainer),ml(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},s.prototype.triggerRepaint=function(){var u=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(m){u._frame=null,u._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(u){this._trackResize&&this.resize({originalEvent:u})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(u){this._showPadding!==u&&(this._showPadding=u,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(u){this._vertices=u,this._update()},s.prototype._setCacheLimits=function(u,m){o.setCacheLimits(u,m)},a.version.get=function(){return o.version},Object.defineProperties(s.prototype,a),s}(zc);function ml(n){n.parentNode&&n.parentNode.removeChild(n)}var ps={showCompass:!0,showZoom:!0,visualizePitch:!1},ra=function(n){var s=this;this.options=o.extend({},ps,n),this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),k.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),k.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=k.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ra.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),a=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},ra.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},ra.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new fn(this._map,this._compass,this.options.visualizePitch)),this._container},ra.prototype.onRemove=function(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ra.prototype._createButton=function(n,s){var a=k.create("button",n,this._container);return a.type="button",a.addEventListener("click",s),a},ra.prototype._setButtonTitle=function(n,s){var a=this._map._getUIString("NavigationControl."+s);n.title=a,n.setAttribute("aria-label",a)};var fn=function(n,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new hl({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,a&&(this.mousePitch=new Cl({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(s,"mousedown",this.mousedown),k.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(s,"touchmove",this.touchmove),k.addEventListener(s,"touchend",this.touchend),k.addEventListener(s,"touchcancel",this.reset)};function Dl(n,s,a){if(n=new o.LngLat(n.lng,n.lat),s){var u=new o.LngLat(n.lng-360,n.lat),m=new o.LngLat(n.lng+360,n.lat),w=a.locationPoint(n).distSqr(s);a.locationPoint(u).distSqr(s)<w?n=u:a.locationPoint(m).distSqr(s)<w&&(n=m)}for(;Math.abs(n.lng-a.center.lng)>180;){var E=a.locationPoint(n);if(E.x>=0&&E.y>=0&&E.x<=a.width&&E.y<=a.height)break;n.lng>a.center.lng?n.lng-=360:n.lng+=360}return n}fn.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),k.disableDrag()},fn.prototype.move=function(n,s){var a=this.map,u=this.mouseRotate.mousemoveWindow(n,s);if(u&&u.bearingDelta&&a.setBearing(a.getBearing()+u.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},fn.prototype.off=function(){var n=this.element;k.removeEventListener(n,"mousedown",this.mousedown),k.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(n,"touchmove",this.touchmove),k.removeEventListener(n,"touchend",this.touchend),k.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},fn.prototype.offTemp=function(){k.enableDrag(),k.removeEventListener(o.window,"mousemove",this.mousemove),k.removeEventListener(o.window,"mouseup",this.mouseup)},fn.prototype.mousedown=function(n){this.down(o.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),k.mousePos(this.element,n)),k.addEventListener(o.window,"mousemove",this.mousemove),k.addEventListener(o.window,"mouseup",this.mouseup)},fn.prototype.mousemove=function(n){this.move(n,k.mousePos(this.element,n))},fn.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},fn.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},fn.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},fn.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},fn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var uo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pc(n,s,a){var u=n.classList;for(var m in uo)u.remove("mapboxgl-"+a+"-anchor-"+m);u.add("mapboxgl-"+a+"-anchor-"+s)}var Ll,Jl=function(n){function s(a,u){if(n.call(this),(a instanceof o.window.HTMLElement||u)&&(a=o.extend({element:a},u)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=o.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");var m=k.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var w=k.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=k.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var I=k.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");for(var D=0,N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];D<N.length;D+=1){var J=N[D],Y=k.createNS("http://www.w3.org/2000/svg","ellipse");Y.setAttributeNS(null,"opacity","0.04"),Y.setAttributeNS(null,"cx","10.5"),Y.setAttributeNS(null,"cy","5.80029008"),Y.setAttributeNS(null,"rx",J.rx),Y.setAttributeNS(null,"ry",J.ry),I.appendChild(Y)}var Q=k.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);var se=k.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(se);var ae=k.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"fill","#000000");var ce=k.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ae.appendChild(ce);var re=k.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");var fe=k.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _e=k.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");var Ee=k.createNS("http://www.w3.org/2000/svg","circle");Ee.setAttributeNS(null,"fill","#FFFFFF"),Ee.setAttributeNS(null,"cx","5.5"),Ee.setAttributeNS(null,"cy","5.5"),Ee.setAttributeNS(null,"r","5.4999962"),fe.appendChild(_e),fe.appendChild(Ee),E.appendChild(I),E.appendChild(Q),E.appendChild(ae),E.appendChild(re),E.appendChild(fe),m.appendChild(E),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=o.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ce){Ce.preventDefault()}),this._element.addEventListener("mousedown",function(Ce){Ce.preventDefault()}),Pc(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var u=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[u,-1*(24.6+u)],"bottom-right":[-u,-1*(24.6+u)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var u=a.code,m=a.charCode||a.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var u=a.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Dl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(u="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,uo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+u)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=o.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var u=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(o.Evented),yl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},fs=0,gl=!1,_l=function(n){function s(a){n.call(this),this.options=o.extend({},yl,a),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){var u;return this._map=a,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,Ll!==void 0?u(Ll):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(m){u(Ll=m.state!=="denied")}):u(Ll=!!o.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fs=0,gl=!1},s.prototype._isOutOfMapMaxBounds=function(a){var u=this._map.getMaxBounds(),m=a.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var u=new o.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,w=this._map.getBearing(),E=o.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(m),E,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var u=new o.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,u=this._map.unproject([0,a]),m=this._map.unproject([1,a]),w=u.distanceTo(m),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&gl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var u=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=k.create("button","mapboxgl-ctrl-geolocate",this._container),k.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Jl(this._dotElement),this._circleElement=k.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Jl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||u._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(u._watchState="BACKGROUND",u._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),u._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),u.fire(new o.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fs--,gl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++fs>1?(a={maximumAge:6e5,timeout:0},gl=!0):(a=this.options.positionOptions,gl=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(o.Evented),ds={maxWidth:100,unit:"metric"},Gs=function(n){this.options=o.extend({},ds,n),o.bindAll(["_onMove","setUnit"],this)};function bu(n,s,a){var u=a&&a.maxWidth||100,m=n._container.clientHeight/2,w=n.unproject([0,m]),E=n.unproject([u,m]),I=w.distanceTo(E);if(a&&a.unit==="imperial"){var D=3.2808*I;D>5280?So(s,u,D/5280,n._getUIString("ScaleControl.Miles")):So(s,u,D,n._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?So(s,u,I/1852,n._getUIString("ScaleControl.NauticalMiles")):I>=1e3?So(s,u,I/1e3,n._getUIString("ScaleControl.Kilometers")):So(s,u,I,n._getUIString("ScaleControl.Meters"))}function So(n,s,a,u){var m,w,E,I=(m=a,(w=Math.pow(10,(""+Math.floor(m)).length-1))*(E=(E=m/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(D){var N=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*N)/N}(E)));n.style.width=s*(I/a)+"px",n.innerHTML=I+"&nbsp;"+u}Gs.prototype.getDefaultPosition=function(){return"bottom-left"},Gs.prototype._onMove=function(){bu(this._map,this._container,this.options)},Gs.prototype.onAdd=function(n){return this._map=n,this._container=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Gs.prototype.onRemove=function(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Gs.prototype.setUnit=function(n){this.options.unit=n,bu(this._map,this._container,this.options)};var qo=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof o.window.HTMLElement?this._container=n.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};qo.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},qo.prototype.onRemove=function(){k.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},qo.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},qo.prototype._setupUI=function(){var n=this._fullscreenButton=k.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},qo.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},qo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},qo.prototype._isFullscreen=function(){return this._fullscreen},qo.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},qo.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ms={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},co=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ys=function(n){function s(a){n.call(this),this.options=o.extend(Object.create(ms),a),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(o.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var u,m=o.window.document.createDocumentFragment(),w=o.window.document.createElement("body");for(w.innerHTML=a;u=w.firstChild;)m.appendChild(u);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=k.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var u=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=k.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Y){return u._container.classList.add(Y)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Dl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),w=this.options.anchor,E=function Y(Q){if(Q){if(typeof Q=="number"){var se=Math.round(Math.sqrt(.5*Math.pow(Q,2)));return{center:new o.Point(0,0),top:new o.Point(0,Q),"top-left":new o.Point(se,se),"top-right":new o.Point(-se,se),bottom:new o.Point(0,-Q),"bottom-left":new o.Point(se,-se),"bottom-right":new o.Point(-se,-se),left:new o.Point(Q,0),right:new o.Point(-Q,0)}}if(Q instanceof o.Point||Array.isArray(Q)){var ae=o.Point.convert(Q);return{center:ae,top:ae,"top-left":ae,"top-right":ae,bottom:ae,"bottom-left":ae,"bottom-right":ae,left:ae,right:ae}}return{center:o.Point.convert(Q.center||[0,0]),top:o.Point.convert(Q.top||[0,0]),"top-left":o.Point.convert(Q["top-left"]||[0,0]),"top-right":o.Point.convert(Q["top-right"]||[0,0]),bottom:o.Point.convert(Q.bottom||[0,0]),"bottom-left":o.Point.convert(Q["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(Q["bottom-right"]||[0,0]),left:o.Point.convert(Q.left||[0,0]),right:o.Point.convert(Q.right||[0,0])}}return Y(new o.Point(0,0))}(this.options.offset);if(!w){var I,D=this._container.offsetWidth,N=this._container.offsetHeight;I=m.y+E.bottom.y<N?["top"]:m.y>this._map.transform.height-N?["bottom"]:[],m.x<D/2?I.push("left"):m.x>this._map.transform.width-D/2&&I.push("right"),w=I.length===0?"bottom":I.join("-")}var J=m.add(E[w]).round();k.setTransform(this._container,uo[w]+" translate("+J.x+"px,"+J.y+"px)"),Pc(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(co);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(o.Evented),xu={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:dl,NavigationControl:ra,GeolocateControl:_l,AttributionControl:La,ScaleControl:Gs,FullscreenControl:qo,Popup:ys,Marker:Jl,Style:mi,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Pe().acquire(Te)},clearPrewarmedResources:function(){var n=it;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Te),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(n){o.config.ACCESS_TOKEN=n},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(n){o.config.API_URL=n},get workerCount(){return qe.workerCount},set workerCount(n){qe.workerCount=n},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){o.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){o.clearTileCache(n)},workerUrl:""};return xu}),x})})(nf);const H_=nf.exports;function ey(c){let h;const f=c[15].default,y=Jh(f,c,c[14],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,_){y&&y.m(x,_),h=!0},p(x,_){y&&y.p&&(!h||_&16384)&&Yh(y,f,x,x[14],h?$h(f,x[14],_,null):Qh(x[14]),null)},i(x){h||(mt(y,x),h=!0)},o(x){wt(y,x),h=!1},d(x){y&&y.d(x)}}}function X_(c){let h,f,y,x=c[0]&&ey(c);return{c(){h=K("div"),x&&x.c(),this.h()},l(_){h=H(_,"DIV",{class:!0,id:!0});var o=X(h);x&&x.l(o),o.forEach(M),this.h()},h(){z(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),z(h,"id",c[1]),Gu(()=>c[16].call(h))},m(_,o){ke(_,h,o),x&&x.m(h,null),f=Ku(h,c[16].bind(h)),c[17](h),y=!0},p(_,[o]){_[0]?x?(x.p(_,o),o&1&&mt(x,1)):(x=ey(_),x.c(),mt(x,1),x.m(h,null)):x&&(Tl(),wt(x,1,1,()=>{x=null}),Al()),(!y||o&2)&&z(h,"id",_[1])},i(_){y||(mt(x),y=!0)},o(_){wt(x),y=!1},d(_){_&&M(h),x&&x.d(),f(),c[17](null)}}}function W_(c,h,f){let{$$slots:y={},$$scope:x}=h,{map:_}=h,{id:o="map"}=h,{location:T={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:k="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:B=!0}=h,{minzoom:R=0}=h,{maxzoom:U=14}=h,{zoom:V=null}=h,{scrollzoom:le=!0}=h,{geolocate:ee=!0}=h,{zoomcontrol:ze=!0}=h,{options:ve={}}=h,Ie,Ve;cg("map",{getMap:()=>_}),T.bounds?ve={...ve,bounds:T.bounds}:T.lon&&T.lat&&(ve={...ve,center:[T.lon,T.lat]},T.zoom&&(ve.zoom=T.zoom)),hg(()=>{const Qe=document.createElement("link");return Qe.rel="stylesheet",Qe.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",Qe.onload=()=>{f(0,_=new nf.exports.Map({container:Ie,style:k,minZoom:R,maxZoom:U,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:B,...ve})),ze&&_.addControl(new nf.exports.NavigationControl({showCompass:!1})),le||_.scrollZoom.disable(),ee&&_.addControl(new nf.exports.GeolocateControl),_.on("load",()=>{f(4,V=_.getZoom())}),_.on("zoom",()=>{f(4,V=_.getZoom())})},document.head.appendChild(Qe),()=>{_.remove(),Qe.parentNode.removeChild(Qe)}});function At(){let Qe=document.getElementsByClassName("mapboxgl-canvas");Qe[0]&&(Qe[0].style.width="100%",_.resize())}function Lt(){Ve=this.clientWidth,f(2,Ve)}function ct(Qe){Ac[Qe?"unshift":"push"](()=>{Ie=Qe,f(3,Ie)})}return c.$$set=Qe=>{"map"in Qe&&f(0,_=Qe.map),"id"in Qe&&f(1,o=Qe.id),"location"in Qe&&f(6,T=Qe.location),"style"in Qe&&f(7,k=Qe.style),"interactive"in Qe&&f(8,B=Qe.interactive),"minzoom"in Qe&&f(9,R=Qe.minzoom),"maxzoom"in Qe&&f(10,U=Qe.maxzoom),"zoom"in Qe&&f(4,V=Qe.zoom),"scrollzoom"in Qe&&f(11,le=Qe.scrollzoom),"geolocate"in Qe&&f(12,ee=Qe.geolocate),"zoomcontrol"in Qe&&f(13,ze=Qe.zoomcontrol),"options"in Qe&&f(5,ve=Qe.options),"$$scope"in Qe&&f(14,x=Qe.$$scope)},c.$$.update=()=>{c.$$.dirty&4&&Ve&&At()},[_,o,Ve,Ie,V,ve,T,k,B,R,U,le,ee,ze,x,y,Lt,ct]}class J_ extends Es{constructor(h){super(),Ss(this,h,W_,X_,ks,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function ty(c){let h;const f=c[11].default,y=Jh(f,c,c[10],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,_){y&&y.m(x,_),h=!0},p(x,_){y&&y.p&&(!h||_&1024)&&Yh(y,f,x,x[10],h?$h(f,x[10],_,null):Qh(x[10]),null)},i(x){h||(mt(y,x),h=!0)},o(x){wt(y,x),h=!1},d(x){y&&y.d(x)}}}function Y_(c){let h,f,y=c[0]&&ty(c);return{c(){y&&y.c(),h=sa()},l(x){y&&y.l(x),h=sa()},m(x,_){y&&y.m(x,_),ke(x,h,_),f=!0},p(x,[_]){x[0]?y?(y.p(x,_),_&1&&mt(y,1)):(y=ty(x),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(Tl(),wt(y,1,1,()=>{y=null}),Al())},i(x){f||(mt(y),f=!0)},o(x){wt(y),f=!1},d(x){y&&y.d(x),x&&M(h)}}}function Q_(c,h,f){let{$$slots:y={},$$scope:x}=h,{id:_}=h,{type:o}=h,{url:T=null}=h,{props:k={}}=h,{data:B=null}=h,{layer:R=null}=h,{promoteId:U=null}=h,{minzoom:V=null}=h,{maxzoom:le=null}=h,ee=!1;const{getMap:ze}=lf("map"),ve=ze();ve.getSource(_)&&ve.removeSource(_);function Ie(){ve.isSourceLoaded(_)?(f(0,ee=!0),console.log(_+" loaded!")):setTimeout(()=>{console.log("..."),Ie()},500)}function Ve(){ve.isStyleLoaded(_)?(At(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),Ve()},500)}V&&(k.minzoom=V),le&&(k.maxzoom=le),R&&U?(k.promoteId={},k.promoteId[R]=U):U&&(k.promoteId=U);function At(){console.log(_+" map source loading..."),o=="geojson"?B?(ve.addSource(_,{type:o,data:B,...k}),Ie()):T&&(ve.addSource(_,{type:o,data:T,...k}),Ie()):o=="vector"&&(ve.addSource(_,{type:o,tiles:[T],...k}),Ie())}Ve();function Lt(){ve.getSource(_).setData(B)}return c.$$set=ct=>{"id"in ct&&f(2,_=ct.id),"type"in ct&&f(3,o=ct.type),"url"in ct&&f(4,T=ct.url),"props"in ct&&f(1,k=ct.props),"data"in ct&&f(5,B=ct.data),"layer"in ct&&f(6,R=ct.layer),"promoteId"in ct&&f(7,U=ct.promoteId),"minzoom"in ct&&f(8,V=ct.minzoom),"maxzoom"in ct&&f(9,le=ct.maxzoom),"$$scope"in ct&&f(10,x=ct.$$scope)},c.$$.update=()=>{c.$$.dirty&33&&ee&&B&&Lt()},[ee,k,_,o,T,B,R,U,V,le,x,y]}class $_ extends Es{constructor(h){super(),Ss(this,h,Q_,Y_,ks,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function ev(c,h,f){const{Popup:y}=H_,x=ug(),_=new y({closeButton:!1,closeOnClick:!1});let{id:o}=h,{source:T}=h,{sourceLayer:k=null}=h,{type:B}=h,{filter:R=null}=h,{layout:U={}}=h,{paint:V={}}=h,{data:le=null}=h,{code:ee=null}=h,{name:ze="name"}=h,{colorCode:ve=null}=h,{click:Ie=!1}=h,{ignoreClick:Ve=!1}=h,{clickCenter:At=!1}=h,{selected:Lt=null}=h,{hover:ct=!1}=h,{hovered:Qe=null}=h,{highlight:Sr=!1}=h,{highlightKey:ur="highlighted"}=h,{highlighted:Jt=[]}=h,{order:Et=null}=h,{maxzoom:bt=null}=h,{minzoom:vr=null}=h,{isChild:Ot=!1}=h;const{getMap:kr}=lf("map"),Ye=kr();let Qt=null,Wr=null,ri=[];Ye.getLayer(o)&&Ye.removeLayer(o);let mr={id:o,type:B,source:T,paint:V,layout:U};R&&(mr.filter=R),k&&(mr["source-layer"]=k),bt&&(mr.maxzoom=bt),vr&&(mr.minzoom=vr),Ye.addLayer(mr,Et);function pt(){console.log("updating colors..."),le.forEach(rt=>{Ye.setFeatureState({source:T,sourceLayer:k,id:rt[ee]},{color:rt[ve]})})}return Ie&&Ye.on("click",o,rt=>{if(rt.features.length>0&&!Ve){let ir=rt.features[0].id;if(Ot&&Jt.includes(ir)||!Ot&&Lt!=ir){if(f(0,Lt=ir),x("select",{code:Lt}),Qt&&Ye.setFeatureState({source:T,sourceLayer:k,id:Qt},{selected:!1}),Ye.setFeatureState({source:T,sourceLayer:k,id:Lt},{selected:!0}),At){let Ri=centroid(rt.features[0].toJSON().geometry);Ye.flyTo({center:Ri.geometry.coordinates})}f(24,Qt=Lt)}}}),ct&&(Ye.on("mousemove",o,rt=>{if(rt.features.length>0){let ir=rt.features[0].id;Qe&&Ye.setFeatureState({source:T,sourceLayer:k,id:Qe},{hovered:!1}),Ot&&Jt.includes(ir)||!Ot&&Lt!=ir?(f(1,Qe=f(25,Wr=ir)),Ye.setFeatureState({source:T,sourceLayer:k,id:Qe},{hovered:!0}),Ye.getCanvas().style.cursor="pointer",_.setLngLat(rt.lngLat).setHTML(`<strong>${rt.features[0].properties[ze]?rt.features[0].properties[ze]:rt.features[0].properties[ee]}</strong>`).addTo(Ye)):_.remove()}}),Ye.on("mouseleave",o,rt=>{Qe&&Ye.setFeatureState({source:T,sourceLayer:k,id:Qe},{hovered:!1}),f(1,Qe=f(25,Wr=null)),Ye.getCanvas().style.cursor="",_.remove()})),c.$$set=rt=>{"id"in rt&&f(2,o=rt.id),"source"in rt&&f(3,T=rt.source),"sourceLayer"in rt&&f(4,k=rt.sourceLayer),"type"in rt&&f(5,B=rt.type),"filter"in rt&&f(6,R=rt.filter),"layout"in rt&&f(7,U=rt.layout),"paint"in rt&&f(8,V=rt.paint),"data"in rt&&f(9,le=rt.data),"code"in rt&&f(10,ee=rt.code),"name"in rt&&f(11,ze=rt.name),"colorCode"in rt&&f(12,ve=rt.colorCode),"click"in rt&&f(13,Ie=rt.click),"ignoreClick"in rt&&f(14,Ve=rt.ignoreClick),"clickCenter"in rt&&f(15,At=rt.clickCenter),"selected"in rt&&f(0,Lt=rt.selected),"hover"in rt&&f(16,ct=rt.hover),"hovered"in rt&&f(1,Qe=rt.hovered),"highlight"in rt&&f(17,Sr=rt.highlight),"highlightKey"in rt&&f(18,ur=rt.highlightKey),"highlighted"in rt&&f(19,Jt=rt.highlighted),"order"in rt&&f(20,Et=rt.order),"maxzoom"in rt&&f(21,bt=rt.maxzoom),"minzoom"in rt&&f(22,vr=rt.minzoom),"isChild"in rt&&f(23,Ot=rt.isChild)},c.$$.update=()=>{c.$$.dirty[0]&4096&&ve&&pt(),c.$$.dirty[0]&68026392&&Sr&&Jt!=ri&&(ri[0]&&ri.forEach(rt=>{let ir={};ir[ur]=!1,Ye.setFeatureState({source:T,sourceLayer:k,id:rt},ir)}),f(26,ri=Jt),Jt[0]&&Jt.forEach(rt=>{let ir={};ir[ur]=!0,Ye.setFeatureState({source:T,sourceLayer:k,id:rt},ir)})),c.$$.dirty[0]&16777241&&Lt!=Qt&&(Qt&&Ye.setFeatureState({source:T,sourceLayer:k,id:Qt},{selected:!1}),Lt&&Ye.setFeatureState({source:T,sourceLayer:k,id:Lt},{selected:!0}),f(24,Qt=Lt)),c.$$.dirty[0]&33619994&&ct&&Qe!=Wr&&(Wr&&Ye.setFeatureState({source:T,sourceLayer:k,id:Wr},{hovered:!1}),Qe&&Ye.setFeatureState({source:T,sourceLayer:k,id:Qe},{hovered:!0}),f(25,Wr=Qe))},[Lt,Qe,o,T,k,B,R,U,V,le,ee,ze,ve,Ie,Ve,At,ct,Sr,ur,Jt,Et,bt,vr,Ot,Qt,Wr,ri]}class Hd extends Es{constructor(h){super(),Ss(this,h,ev,null,ks,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function tv(c){return c===0?!0:c}function Kc(c){return tv(c)?Array.isArray(c)?h=>c.map(f=>typeof f!="function"?h[f]:f(h)):typeof c!="function"?h=>h[c]:c:null}function rv(c){const h={};for(const f of c){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":y,"1":x}=f;Object.defineProperty(h,y,{configurable:!0,enumerable:!0,writable:!0,value:x})}return h}function Xd(c,h={}){return rv(Object.entries(c).filter(([f,y])=>y!==void 0&&h[f]===void 0))}function iv(c,h){if(!Array.isArray(c))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof c}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},y=Object.keys(h),x=y.length;let _,o,T,k,B,R,U,V;const le=c.length;for(_=0;_<x;_+=1){for(k=y[_],U=h[k],B=null,R=null,o=0;o<le;o+=1)if(V=U(c[o]),Array.isArray(V)){const ee=V.length;for(T=0;T<ee;T+=1)V[T]!==void 0&&V[T]!==null&&Number.isNaN(V[T])===!1&&((B===null||V[T]<B)&&(B=V[T]),(R===null||V[T]>R)&&(R=V[T]))}else V!=null&&Number.isNaN(V)===!1&&((B===null||V<B)&&(B=V),(R===null||V>R)&&(R=V));f[k]=[B,R]}return f}function gg(c=[],h){return Array.isArray(h)===!0?h.map((f,y)=>f===null?c[y]:f):c}function Yf(c){return function([f,y]){return f?gg(f[c],y):y}}function ud(c,h){return c==null||h==null?NaN:c<h?-1:c>h?1:c>=h?0:NaN}function nv(c,h){return c==null||h==null?NaN:h<c?-1:h>c?1:h>=c?0:NaN}function _g(c){let h,f,y;c.length!==2?(h=ud,f=(T,k)=>ud(c(T),k),y=(T,k)=>c(T)-k):(h=c===ud||c===nv?c:av,f=c,y=c);function x(T,k,B=0,R=T.length){if(B<R){if(h(k,k)!==0)return R;do{const U=B+R>>>1;f(T[U],k)<0?B=U+1:R=U}while(B<R)}return B}function _(T,k,B=0,R=T.length){if(B<R){if(h(k,k)!==0)return R;do{const U=B+R>>>1;f(T[U],k)<=0?B=U+1:R=U}while(B<R)}return B}function o(T,k,B=0,R=T.length){const U=x(T,k,B,R-1);return U>B&&y(T[U-1],k)>-y(T[U],k)?U-1:U}return{left:x,center:o,right:_}}function av(){return 0}function ov(c){return c===null?NaN:+c}const sv=_g(ud),lv=sv.right;_g(ov).center;const uv=lv;class ry extends Map{constructor(h,f=pv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[y,x]of h)this.set(y,x)}get(h){return super.get(iy(this,h))}has(h){return super.has(iy(this,h))}set(h,f){return super.set(cv(this,h),f)}delete(h){return super.delete(hv(this,h))}}function iy({_intern:c,_key:h},f){const y=h(f);return c.has(y)?c.get(y):f}function cv({_intern:c,_key:h},f){const y=h(f);return c.has(y)?c.get(y):(c.set(y,f),f)}function hv({_intern:c,_key:h},f){const y=h(f);return c.has(y)&&(f=c.get(y),c.delete(y)),f}function pv(c){return c!==null&&typeof c=="object"?c.valueOf():c}var Qd=Math.sqrt(50),$d=Math.sqrt(10),em=Math.sqrt(2);function fv(c,h,f){var y,x=-1,_,o,T;if(h=+h,c=+c,f=+f,c===h&&f>0)return[c];if((y=h<c)&&(_=c,c=h,h=_),(T=vg(c,h,f))===0||!isFinite(T))return[];if(T>0){let k=Math.round(c/T),B=Math.round(h/T);for(k*T<c&&++k,B*T>h&&--B,o=new Array(_=B-k+1);++x<_;)o[x]=(k+x)*T}else{T=-T;let k=Math.round(c*T),B=Math.round(h*T);for(k/T<c&&++k,B/T>h&&--B,o=new Array(_=B-k+1);++x<_;)o[x]=(k+x)/T}return y&&o.reverse(),o}function vg(c,h,f){var y=(h-c)/Math.max(0,f),x=Math.floor(Math.log(y)/Math.LN10),_=y/Math.pow(10,x);return x>=0?(_>=Qd?10:_>=$d?5:_>=em?2:1)*Math.pow(10,x):-Math.pow(10,-x)/(_>=Qd?10:_>=$d?5:_>=em?2:1)}function dv(c,h,f){var y=Math.abs(h-c)/Math.max(0,f),x=Math.pow(10,Math.floor(Math.log(y)/Math.LN10)),_=y/x;return _>=Qd?x*=10:_>=$d?x*=5:_>=em&&(x*=2),h<c?-x:x}function mv(c,h,f){c=+c,h=+h,f=(x=arguments.length)<2?(h=c,c=0,1):x<3?1:+f;for(var y=-1,x=Math.max(0,Math.ceil((h-c)/f))|0,_=new Array(x);++y<x;)_[y]=c+y*f;return _}function Sd(c,h){switch(arguments.length){case 0:break;case 1:this.range(c);break;default:this.range(h).domain(c);break}return this}const ny=Symbol("implicit");function bg(){var c=new ry,h=[],f=[],y=ny;function x(_){let o=c.get(_);if(o===void 0){if(y!==ny)return y;c.set(_,o=h.push(_)-1)}return f[o%f.length]}return x.domain=function(_){if(!arguments.length)return h.slice();h=[],c=new ry;for(const o of _)c.has(o)||c.set(o,h.push(o)-1);return x},x.range=function(_){return arguments.length?(f=Array.from(_),x):f.slice()},x.unknown=function(_){return arguments.length?(y=_,x):y},x.copy=function(){return bg(h,f).unknown(y)},Sd.apply(x,arguments),x}function xg(){var c=bg().unknown(void 0),h=c.domain,f=c.range,y=0,x=1,_,o,T=!1,k=0,B=0,R=.5;delete c.unknown;function U(){var V=h().length,le=x<y,ee=le?x:y,ze=le?y:x;_=(ze-ee)/Math.max(1,V-k+B*2),T&&(_=Math.floor(_)),ee+=(ze-ee-_*(V-k))*R,o=_*(1-k),T&&(ee=Math.round(ee),o=Math.round(o));var ve=mv(V).map(function(Ie){return ee+_*Ie});return f(le?ve.reverse():ve)}return c.domain=function(V){return arguments.length?(h(V),U()):h()},c.range=function(V){return arguments.length?([y,x]=V,y=+y,x=+x,U()):[y,x]},c.rangeRound=function(V){return[y,x]=V,y=+y,x=+x,T=!0,U()},c.bandwidth=function(){return o},c.step=function(){return _},c.round=function(V){return arguments.length?(T=!!V,U()):T},c.padding=function(V){return arguments.length?(k=Math.min(1,B=+V),U()):k},c.paddingInner=function(V){return arguments.length?(k=Math.min(1,V),U()):k},c.paddingOuter=function(V){return arguments.length?(B=+V,U()):B},c.align=function(V){return arguments.length?(R=Math.max(0,Math.min(1,V)),U()):R},c.copy=function(){return xg(h(),[y,x]).round(T).paddingInner(k).paddingOuter(B).align(R)},Sd.apply(U(),arguments)}function hm(c,h,f){c.prototype=h.prototype=f,f.constructor=c}function wg(c,h){var f=Object.create(c.prototype);for(var y in h)f[y]=h[y];return f}function yf(){}var af=.7,md=1/af,Wh="\\s*([+-]?\\d+)\\s*",of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yv=/^#([0-9a-f]{3,8})$/,gv=new RegExp(`^rgb\\(${Wh},${Wh},${Wh}\\)$`),_v=new RegExp(`^rgb\\(${Xu},${Xu},${Xu}\\)$`),vv=new RegExp(`^rgba\\(${Wh},${Wh},${Wh},${of}\\)$`),bv=new RegExp(`^rgba\\(${Xu},${Xu},${Xu},${of}\\)$`),xv=new RegExp(`^hsl\\(${of},${Xu},${Xu}\\)$`),wv=new RegExp(`^hsla\\(${of},${Xu},${Xu},${of}\\)$`),ay={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hm(yf,sf,{copy(c){return Object.assign(new this.constructor,this,c)},displayable(){return this.rgb().displayable()},hex:oy,formatHex:oy,formatHex8:Ev,formatHsl:Sv,formatRgb:sy,toString:sy});function oy(){return this.rgb().formatHex()}function Ev(){return this.rgb().formatHex8()}function Sv(){return Eg(this).formatHsl()}function sy(){return this.rgb().formatRgb()}function sf(c){var h,f;return c=(c+"").trim().toLowerCase(),(h=yv.exec(c))?(f=h[1].length,h=parseInt(h[1],16),f===6?ly(h):f===3?new el(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?Qf(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?Qf(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=gv.exec(c))?new el(h[1],h[2],h[3],1):(h=_v.exec(c))?new el(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=vv.exec(c))?Qf(h[1],h[2],h[3],h[4]):(h=bv.exec(c))?Qf(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=xv.exec(c))?hy(h[1],h[2]/100,h[3]/100,1):(h=wv.exec(c))?hy(h[1],h[2]/100,h[3]/100,h[4]):ay.hasOwnProperty(c)?ly(ay[c]):c==="transparent"?new el(NaN,NaN,NaN,0):null}function ly(c){return new el(c>>16&255,c>>8&255,c&255,1)}function Qf(c,h,f,y){return y<=0&&(c=h=f=NaN),new el(c,h,f,y)}function kv(c){return c instanceof yf||(c=sf(c)),c?(c=c.rgb(),new el(c.r,c.g,c.b,c.opacity)):new el}function tm(c,h,f,y){return arguments.length===1?kv(c):new el(c,h,f,y==null?1:y)}function el(c,h,f,y){this.r=+c,this.g=+h,this.b=+f,this.opacity=+y}hm(el,tm,wg(yf,{brighter(c){return c=c==null?md:Math.pow(md,c),new el(this.r*c,this.g*c,this.b*c,this.opacity)},darker(c){return c=c==null?af:Math.pow(af,c),new el(this.r*c,this.g*c,this.b*c,this.opacity)},rgb(){return this},clamp(){return new el(xh(this.r),xh(this.g),xh(this.b),yd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uy,formatHex:uy,formatHex8:Iv,formatRgb:cy,toString:cy}));function uy(){return`#${bh(this.r)}${bh(this.g)}${bh(this.b)}`}function Iv(){return`#${bh(this.r)}${bh(this.g)}${bh(this.b)}${bh((isNaN(this.opacity)?1:this.opacity)*255)}`}function cy(){const c=yd(this.opacity);return`${c===1?"rgb(":"rgba("}${xh(this.r)}, ${xh(this.g)}, ${xh(this.b)}${c===1?")":`, ${c})`}`}function yd(c){return isNaN(c)?1:Math.max(0,Math.min(1,c))}function xh(c){return Math.max(0,Math.min(255,Math.round(c)||0))}function bh(c){return c=xh(c),(c<16?"0":"")+c.toString(16)}function hy(c,h,f,y){return y<=0?c=h=f=NaN:f<=0||f>=1?c=h=NaN:h<=0&&(c=NaN),new du(c,h,f,y)}function Eg(c){if(c instanceof du)return new du(c.h,c.s,c.l,c.opacity);if(c instanceof yf||(c=sf(c)),!c)return new du;if(c instanceof du)return c;c=c.rgb();var h=c.r/255,f=c.g/255,y=c.b/255,x=Math.min(h,f,y),_=Math.max(h,f,y),o=NaN,T=_-x,k=(_+x)/2;return T?(h===_?o=(f-y)/T+(f<y)*6:f===_?o=(y-h)/T+2:o=(h-f)/T+4,T/=k<.5?_+x:2-_-x,o*=60):T=k>0&&k<1?0:o,new du(o,T,k,c.opacity)}function Tv(c,h,f,y){return arguments.length===1?Eg(c):new du(c,h,f,y==null?1:y)}function du(c,h,f,y){this.h=+c,this.s=+h,this.l=+f,this.opacity=+y}hm(du,Tv,wg(yf,{brighter(c){return c=c==null?md:Math.pow(md,c),new du(this.h,this.s,this.l*c,this.opacity)},darker(c){return c=c==null?af:Math.pow(af,c),new du(this.h,this.s,this.l*c,this.opacity)},rgb(){var c=this.h%360+(this.h<0)*360,h=isNaN(c)||isNaN(this.s)?0:this.s,f=this.l,y=f+(f<.5?f:1-f)*h,x=2*f-y;return new el(Wd(c>=240?c-240:c+120,x,y),Wd(c,x,y),Wd(c<120?c+240:c-120,x,y),this.opacity)},clamp(){return new du(py(this.h),$f(this.s),$f(this.l),yd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const c=yd(this.opacity);return`${c===1?"hsl(":"hsla("}${py(this.h)}, ${$f(this.s)*100}%, ${$f(this.l)*100}%${c===1?")":`, ${c})`}`}}));function py(c){return c=(c||0)%360,c<0?c+360:c}function $f(c){return Math.max(0,Math.min(1,c||0))}function Wd(c,h,f){return(c<60?h+(f-h)*c/60:c<180?f:c<240?h+(f-h)*(240-c)/60:h)*255}const pm=c=>()=>c;function Av(c,h){return function(f){return c+f*h}}function zv(c,h,f){return c=Math.pow(c,f),h=Math.pow(h,f)-c,f=1/f,function(y){return Math.pow(c+y*h,f)}}function Pv(c){return(c=+c)==1?Sg:function(h,f){return f-h?zv(h,f,c):pm(isNaN(h)?f:h)}}function Sg(c,h){var f=h-c;return f?Av(c,f):pm(isNaN(c)?h:c)}const fy=function c(h){var f=Pv(h);function y(x,_){var o=f((x=tm(x)).r,(_=tm(_)).r),T=f(x.g,_.g),k=f(x.b,_.b),B=Sg(x.opacity,_.opacity);return function(R){return x.r=o(R),x.g=T(R),x.b=k(R),x.opacity=B(R),x+""}}return y.gamma=c,y}(1);function Cv(c,h){h||(h=[]);var f=c?Math.min(h.length,c.length):0,y=h.slice(),x;return function(_){for(x=0;x<f;++x)y[x]=c[x]*(1-_)+h[x]*_;return y}}function Mv(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}function Dv(c,h){var f=h?h.length:0,y=c?Math.min(f,c.length):0,x=new Array(y),_=new Array(f),o;for(o=0;o<y;++o)x[o]=fm(c[o],h[o]);for(;o<f;++o)_[o]=h[o];return function(T){for(o=0;o<y;++o)_[o]=x[o](T);return _}}function Lv(c,h){var f=new Date;return c=+c,h=+h,function(y){return f.setTime(c*(1-y)+h*y),f}}function gd(c,h){return c=+c,h=+h,function(f){return c*(1-f)+h*f}}function Rv(c,h){var f={},y={},x;(c===null||typeof c!="object")&&(c={}),(h===null||typeof h!="object")&&(h={});for(x in h)x in c?f[x]=fm(c[x],h[x]):y[x]=h[x];return function(_){for(x in f)y[x]=f[x](_);return y}}var rm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jd=new RegExp(rm.source,"g");function Bv(c){return function(){return c}}function Ov(c){return function(h){return c(h)+""}}function Fv(c,h){var f=rm.lastIndex=Jd.lastIndex=0,y,x,_,o=-1,T=[],k=[];for(c=c+"",h=h+"";(y=rm.exec(c))&&(x=Jd.exec(h));)(_=x.index)>f&&(_=h.slice(f,_),T[o]?T[o]+=_:T[++o]=_),(y=y[0])===(x=x[0])?T[o]?T[o]+=x:T[++o]=x:(T[++o]=null,k.push({i:o,x:gd(y,x)})),f=Jd.lastIndex;return f<h.length&&(_=h.slice(f),T[o]?T[o]+=_:T[++o]=_),T.length<2?k[0]?Ov(k[0].x):Bv(h):(h=k.length,function(B){for(var R=0,U;R<h;++R)T[(U=k[R]).i]=U.x(B);return T.join("")})}function fm(c,h){var f=typeof h,y;return h==null||f==="boolean"?pm(h):(f==="number"?gd:f==="string"?(y=sf(h))?(h=y,fy):Fv:h instanceof sf?fy:h instanceof Date?Lv:Mv(h)?Cv:Array.isArray(h)?Dv:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?Rv:gd)(c,h)}function Vv(c,h){return c=+c,h=+h,function(f){return Math.round(c*(1-f)+h*f)}}function Nv(c){return function(){return c}}function Uv(c){return+c}var dy=[0,1];function Hu(c){return c}function im(c,h){return(h-=c=+c)?function(f){return(f-c)/h}:Nv(isNaN(h)?NaN:.5)}function jv(c,h){var f;return c>h&&(f=c,c=h,h=f),function(y){return Math.max(c,Math.min(h,y))}}function qv(c,h,f){var y=c[0],x=c[1],_=h[0],o=h[1];return x<y?(y=im(x,y),_=f(o,_)):(y=im(y,x),_=f(_,o)),function(T){return _(y(T))}}function Zv(c,h,f){var y=Math.min(c.length,h.length)-1,x=new Array(y),_=new Array(y),o=-1;for(c[y]<c[0]&&(c=c.slice().reverse(),h=h.slice().reverse());++o<y;)x[o]=im(c[o],c[o+1]),_[o]=f(h[o],h[o+1]);return function(T){var k=uv(c,T,1,y)-1;return _[k](x[k](T))}}function kg(c,h){return h.domain(c.domain()).range(c.range()).interpolate(c.interpolate()).clamp(c.clamp()).unknown(c.unknown())}function Ig(){var c=dy,h=dy,f=fm,y,x,_,o=Hu,T,k,B;function R(){var V=Math.min(c.length,h.length);return o!==Hu&&(o=jv(c[0],c[V-1])),T=V>2?Zv:qv,k=B=null,U}function U(V){return V==null||isNaN(V=+V)?_:(k||(k=T(c.map(y),h,f)))(y(o(V)))}return U.invert=function(V){return o(x((B||(B=T(h,c.map(y),gd)))(V)))},U.domain=function(V){return arguments.length?(c=Array.from(V,Uv),R()):c.slice()},U.range=function(V){return arguments.length?(h=Array.from(V),R()):h.slice()},U.rangeRound=function(V){return h=Array.from(V),f=Vv,R()},U.clamp=function(V){return arguments.length?(o=V?!0:Hu,R()):o!==Hu},U.interpolate=function(V){return arguments.length?(f=V,R()):f},U.unknown=function(V){return arguments.length?(_=V,U):_},function(V,le){return y=V,x=le,R()}}function Gv(){return Ig()(Hu,Hu)}function Kv(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)}function _d(c,h){if((f=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var f,y=c.slice(0,f);return[y.length>1?y[0]+y.slice(2):y,+c.slice(f+1)]}function ep(c){return c=_d(Math.abs(c)),c?c[1]:NaN}function Hv(c,h){return function(f,y){for(var x=f.length,_=[],o=0,T=c[0],k=0;x>0&&T>0&&(k+T+1>y&&(T=Math.max(1,y-k)),_.push(f.substring(x-=T,x+T)),!((k+=T+1)>y));)T=c[o=(o+1)%c.length];return _.reverse().join(h)}}function Xv(c){return function(h){return h.replace(/[0-9]/g,function(f){return c[+f]})}}var Wv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vd(c){if(!(h=Wv.exec(c)))throw new Error("invalid format: "+c);var h;return new dm({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}vd.prototype=dm.prototype;function dm(c){this.fill=c.fill===void 0?" ":c.fill+"",this.align=c.align===void 0?">":c.align+"",this.sign=c.sign===void 0?"-":c.sign+"",this.symbol=c.symbol===void 0?"":c.symbol+"",this.zero=!!c.zero,this.width=c.width===void 0?void 0:+c.width,this.comma=!!c.comma,this.precision=c.precision===void 0?void 0:+c.precision,this.trim=!!c.trim,this.type=c.type===void 0?"":c.type+""}dm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jv(c){e:for(var h=c.length,f=1,y=-1,x;f<h;++f)switch(c[f]){case".":y=x=f;break;case"0":y===0&&(y=f),x=f;break;default:if(!+c[f])break e;y>0&&(y=0);break}return y>0?c.slice(0,y)+c.slice(x+1):c}var Tg;function Yv(c,h){var f=_d(c,h);if(!f)return c+"";var y=f[0],x=f[1],_=x-(Tg=Math.max(-8,Math.min(8,Math.floor(x/3)))*3)+1,o=y.length;return _===o?y:_>o?y+new Array(_-o+1).join("0"):_>0?y.slice(0,_)+"."+y.slice(_):"0."+new Array(1-_).join("0")+_d(c,Math.max(0,h+_-1))[0]}function my(c,h){var f=_d(c,h);if(!f)return c+"";var y=f[0],x=f[1];return x<0?"0."+new Array(-x).join("0")+y:y.length>x+1?y.slice(0,x+1)+"."+y.slice(x+1):y+new Array(x-y.length+2).join("0")}const yy={"%":(c,h)=>(c*100).toFixed(h),b:c=>Math.round(c).toString(2),c:c=>c+"",d:Kv,e:(c,h)=>c.toExponential(h),f:(c,h)=>c.toFixed(h),g:(c,h)=>c.toPrecision(h),o:c=>Math.round(c).toString(8),p:(c,h)=>my(c*100,h),r:my,s:Yv,X:c=>Math.round(c).toString(16).toUpperCase(),x:c=>Math.round(c).toString(16)};function gy(c){return c}var _y=Array.prototype.map,vy=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Qv(c){var h=c.grouping===void 0||c.thousands===void 0?gy:Hv(_y.call(c.grouping,Number),c.thousands+""),f=c.currency===void 0?"":c.currency[0]+"",y=c.currency===void 0?"":c.currency[1]+"",x=c.decimal===void 0?".":c.decimal+"",_=c.numerals===void 0?gy:Xv(_y.call(c.numerals,String)),o=c.percent===void 0?"%":c.percent+"",T=c.minus===void 0?"\u2212":c.minus+"",k=c.nan===void 0?"NaN":c.nan+"";function B(U){U=vd(U);var V=U.fill,le=U.align,ee=U.sign,ze=U.symbol,ve=U.zero,Ie=U.width,Ve=U.comma,At=U.precision,Lt=U.trim,ct=U.type;ct==="n"?(Ve=!0,ct="g"):yy[ct]||(At===void 0&&(At=12),Lt=!0,ct="g"),(ve||V==="0"&&le==="=")&&(ve=!0,V="0",le="=");var Qe=ze==="$"?f:ze==="#"&&/[boxX]/.test(ct)?"0"+ct.toLowerCase():"",Sr=ze==="$"?y:/[%p]/.test(ct)?o:"",ur=yy[ct],Jt=/[defgprs%]/.test(ct);At=At===void 0?6:/[gprs]/.test(ct)?Math.max(1,Math.min(21,At)):Math.max(0,Math.min(20,At));function Et(bt){var vr=Qe,Ot=Sr,kr,Ye,Qt;if(ct==="c")Ot=ur(bt)+Ot,bt="";else{bt=+bt;var Wr=bt<0||1/bt<0;if(bt=isNaN(bt)?k:ur(Math.abs(bt),At),Lt&&(bt=Jv(bt)),Wr&&+bt==0&&ee!=="+"&&(Wr=!1),vr=(Wr?ee==="("?ee:T:ee==="-"||ee==="("?"":ee)+vr,Ot=(ct==="s"?vy[8+Tg/3]:"")+Ot+(Wr&&ee==="("?")":""),Jt){for(kr=-1,Ye=bt.length;++kr<Ye;)if(Qt=bt.charCodeAt(kr),48>Qt||Qt>57){Ot=(Qt===46?x+bt.slice(kr+1):bt.slice(kr))+Ot,bt=bt.slice(0,kr);break}}}Ve&&!ve&&(bt=h(bt,1/0));var ri=vr.length+bt.length+Ot.length,mr=ri<Ie?new Array(Ie-ri+1).join(V):"";switch(Ve&&ve&&(bt=h(mr+bt,mr.length?Ie-Ot.length:1/0),mr=""),le){case"<":bt=vr+bt+Ot+mr;break;case"=":bt=vr+mr+bt+Ot;break;case"^":bt=mr.slice(0,ri=mr.length>>1)+vr+bt+Ot+mr.slice(ri);break;default:bt=mr+vr+bt+Ot;break}return _(bt)}return Et.toString=function(){return U+""},Et}function R(U,V){var le=B((U=vd(U),U.type="f",U)),ee=Math.max(-8,Math.min(8,Math.floor(ep(V)/3)))*3,ze=Math.pow(10,-ee),ve=vy[8+ee/3];return function(Ie){return le(ze*Ie)+ve}}return{format:B,formatPrefix:R}}var ed,Ag,zg;$v({thousands:",",grouping:[3],currency:["$",""]});function $v(c){return ed=Qv(c),Ag=ed.format,zg=ed.formatPrefix,ed}function e0(c){return Math.max(0,-ep(Math.abs(c)))}function t0(c,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ep(h)/3)))*3-ep(Math.abs(c)))}function r0(c,h){return c=Math.abs(c),h=Math.abs(h)-c,Math.max(0,ep(h)-ep(c))+1}function i0(c,h,f,y){var x=dv(c,h,f),_;switch(y=vd(y==null?",f":y),y.type){case"s":{var o=Math.max(Math.abs(c),Math.abs(h));return y.precision==null&&!isNaN(_=t0(x,o))&&(y.precision=_),zg(y,o)}case"":case"e":case"g":case"p":case"r":{y.precision==null&&!isNaN(_=r0(x,Math.max(Math.abs(c),Math.abs(h))))&&(y.precision=_-(y.type==="e"));break}case"f":case"%":{y.precision==null&&!isNaN(_=e0(x))&&(y.precision=_-(y.type==="%")*2);break}}return Ag(y)}function Pg(c){var h=c.domain;return c.ticks=function(f){var y=h();return fv(y[0],y[y.length-1],f==null?10:f)},c.tickFormat=function(f,y){var x=h();return i0(x[0],x[x.length-1],f==null?10:f,y)},c.nice=function(f){f==null&&(f=10);var y=h(),x=0,_=y.length-1,o=y[x],T=y[_],k,B,R=10;for(T<o&&(B=o,o=T,T=B,B=x,x=_,_=B);R-- >0;){if(B=vg(o,T,f),B===k)return y[x]=o,y[_]=T,h(y);if(B>0)o=Math.floor(o/B)*B,T=Math.ceil(T/B)*B;else if(B<0)o=Math.ceil(o*B)/B,T=Math.floor(T*B)/B;else break;k=B}return c},c}function cd(){var c=Gv();return c.copy=function(){return kg(c,cd())},Sd.apply(c,arguments),Pg(c)}function by(c){return function(h){return h<0?-Math.pow(-h,c):Math.pow(h,c)}}function n0(c){return c<0?-Math.sqrt(-c):Math.sqrt(c)}function a0(c){return c<0?-c*c:c*c}function o0(c){var h=c(Hu,Hu),f=1;function y(){return f===1?c(Hu,Hu):f===.5?c(n0,a0):c(by(f),by(1/f))}return h.exponent=function(x){return arguments.length?(f=+x,y()):f},Pg(h)}function Cg(){var c=o0(Ig());return c.copy=function(){return kg(c,Cg()).exponent(c.exponent())},Sd.apply(c,arguments),c}function s0(){return Cg.apply(null,arguments).exponent(.5)}const rf={x:cd,y:cd,z:cd,r:s0};function l0(c){return c.constant?"symlog":c.base?"log":c.exponent?c.exponent()===.5?"sqrt":"pow":"other"}function xy(c){return c}function u0(c){return h=>Math.log(c*h)}function c0(c){return h=>c*Math.exp(h)}function h0(c){return h=>Math.sign(h)*Math.log1p(Math.abs(h/c))}function p0(c){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*c}function td(c){return function(f){return f<0?-Math.pow(-f,c):Math.pow(f,c)}}function f0(c){const h=l0(c);if(h==="log"){const f=Math.sign(c.domain()[0]);return{lift:u0(f),ground:c0(f),scaleType:h}}return h==="pow"?{lift:td(1),ground:td(1/1),scaleType:h}:h==="sqrt"?{lift:td(.5),ground:td(1/.5),scaleType:h}:h==="symlog"?{lift:h0(1),ground:p0(1),scaleType:h}:{lift:xy,ground:xy,scaleType:h}}function d0(c,h){if(typeof c.range!="function")throw new Error("Scale method `range` must be a function");if(typeof c.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return c.domain();c.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",c.domain()),c.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",c.range());const{lift:f,ground:y}=f0(c),x=c.domain()[0],_=Object.prototype.toString.call(x)==="[object Date]",[o,T]=c.domain().map(le=>f(_?le.getTime():le)),[k,B]=c.range(),R=h[0]||0,U=h[1]||0,V=(T-o)/(Math.abs(B-k)-R-U);return[o-R*V,U*V+T].map(le=>y(_?new Date(le):le))}function m0(c,h,f,y,x){let _,o;return x===!0?(_=0,o=100):(_=c==="r"?1:0,o=c==="y"?f:c==="r"?25:h),y===!0?[o,_]:[_,o]}function y0(c,h,f,y,x,_){return x?typeof x=="function"?x({width:h,height:f}):x:m0(c,h,f,y,_)}function rd(c){return function([f,y,x,_,o,T,k,B,R,U]){if(y===null)return null;const V=y0(c,k,B,T,R,U),le=f===rf[c]?f():f.copy();return le.domain(gg(y[c],x)).range(V),_&&le.domain(d0(le,_)),o===!0&&(typeof le.nice=="function"?le.nice():console.error(`[Layer Cake] You set \`${c}Nice: true\` but the ${c}Scale does not have a \`.nice\` method. Ignoring...`)),le}}function id([c,h]){return f=>{const y=c(f);return Array.isArray(y)?y.map(x=>h(x)):h(y)}}function nd([c]){if(typeof c=="function"){if(typeof c.range=="function")return c.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const ad={x:!1,y:!0,z:!1,r:!1};const g0=c=>({element:c[0]&4,width:c[0]&256,height:c[0]&512,aspectRatio:c[0]&1024,containerWidth:c[0]&128,containerHeight:c[0]&64}),wy=c=>({element:c[2],width:c[8],height:c[9],aspectRatio:c[10],containerWidth:c[7],containerHeight:c[6]});function Ey(c){let h,f,y;const x=c[90].default,_=Jh(x,c,c[89],wy);return{c(){h=K("div"),_&&_.c(),this.h()},l(o){h=H(o,"DIV",{class:!0});var T=X(h);_&&_.l(T),T.forEach(M),this.h()},h(){z(h,"class","layercake-container svelte-vhzpsp"),Gu(()=>c[92].call(h)),ye(h,"position",c[5],!1),ye(h,"top",c[5]==="absolute"?"0":null,!1),ye(h,"right",c[5]==="absolute"?"0":null,!1),ye(h,"bottom",c[5]==="absolute"?"0":null,!1),ye(h,"left",c[5]==="absolute"?"0":null,!1),ye(h,"pointer-events",c[4]===!1?"none":null,!1)},m(o,T){ke(o,h,T),_&&_.m(h,null),c[91](h),f=Ku(h,c[92].bind(h)),y=!0},p(o,T){_&&_.p&&(!y||T[0]&1988|T[2]&134217728)&&Yh(_,x,o,o[89],y?$h(x,o[89],T,g0):Qh(o[89]),wy),T[0]&32&&ye(h,"position",o[5],!1),T[0]&32&&ye(h,"top",o[5]==="absolute"?"0":null,!1),T[0]&32&&ye(h,"right",o[5]==="absolute"?"0":null,!1),T[0]&32&&ye(h,"bottom",o[5]==="absolute"?"0":null,!1),T[0]&32&&ye(h,"left",o[5]==="absolute"?"0":null,!1),T[0]&16&&ye(h,"pointer-events",o[4]===!1?"none":null,!1)},i(o){y||(mt(_,o),y=!0)},o(o){wt(_,o),y=!1},d(o){o&&M(h),_&&_.d(o),c[91](null),f()}}}function _0(c){let h,f,y=(c[3]===!0||typeof window<"u")&&Ey(c);return{c(){y&&y.c(),h=sa()},l(x){y&&y.l(x),h=sa()},m(x,_){y&&y.m(x,_),ke(x,h,_),f=!0},p(x,_){x[3]===!0||typeof window<"u"?y?(y.p(x,_),_[0]&8&&mt(y,1)):(y=Ey(x),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(Tl(),wt(y,1,1,()=>{y=null}),Al())},i(x){f||(mt(y),f=!0)},o(x){wt(y),f=!1},d(x){y&&y.d(x),x&&M(h)}}}function v0(c,h,f){let y,x,_,o,T,k,B,R,U,V,le,ee,ze,ve,Ie,Ve,At,Lt,ct,Qe,Sr,ur,Jt,Et,bt,vr,Ot,kr,Ye,Qt,Wr,ri,mr,pt,rt,ir,Ri,Kn,Ti,Ei,ii,{$$slots:Zi={},$$scope:Yt}=h,{ssr:Ai=!1}=h,{pointerEvents:Fa=!0}=h,{position:It="relative"}=h,{percentRange:Pt=!1}=h,{width:ni=void 0}=h,{height:Ir=void 0}=h,{containerWidth:br=ni||100}=h,{containerHeight:Ji=Ir||100}=h,{element:ci=void 0}=h,{x:Si=void 0}=h,{y:jr=void 0}=h,{z:cr=void 0}=h,{r:nr=void 0}=h,{data:hi=[]}=h,{xDomain:pi=void 0}=h,{yDomain:Yi=void 0}=h,{zDomain:ai=void 0}=h,{rDomain:Bi=void 0}=h,{xNice:la=!1}=h,{yNice:Ja=!1}=h,{zNice:Ya=!1}=h,{rNice:_n=!1}=h,{xReverse:kn=ad.x}=h,{yReverse:fi=ad.y}=h,{zReverse:Oi=ad.z}=h,{rReverse:Qi=ad.r}=h,{xPadding:Qa=void 0}=h,{yPadding:ln=void 0}=h,{zPadding:Qo=void 0}=h,{rPadding:$i=void 0}=h,{xScale:ki=rf.x}=h,{yScale:Jr=rf.y}=h,{zScale:Gi=rf.z}=h,{rScale:In=rf.r}=h,{xRange:un=void 0}=h,{yRange:Gr=void 0}=h,{zRange:O=void 0}=h,{rRange:j=void 0}=h,{padding:Z={}}=h,{extents:$={}}=h,{flatData:ie=void 0}=h,{custom:de={}}=h,ge=!1;hg(()=>{ge=!0});const G={},te=ti(Pt);rr(c,te,xe=>f(128,Kn=xe));const we=ti(br);rr(c,we,xe=>f(7,Ri=xe));const Ne=ti(Ji);rr(c,Ne,xe=>f(6,ir=xe));const je=ti(Xd($));rr(c,je,xe=>f(127,rt=xe));const Te=ti(hi);rr(c,Te,xe=>f(126,pt=xe));const qe=ti(ie||hi);rr(c,qe,xe=>f(125,mr=xe));const it=ti(Z);rr(c,it,xe=>f(124,ri=xe));const nt=ti(Kc(Si));rr(c,nt,xe=>f(123,Wr=xe));const Pe=ti(Kc(jr));rr(c,Pe,xe=>f(122,Qt=xe));const Xe=ti(Kc(cr));rr(c,Xe,xe=>f(121,Ye=xe));const Ke=ti(Kc(nr));rr(c,Ke,xe=>f(120,kr=xe));const Je=ti(pi);rr(c,Je,xe=>f(119,Ot=xe));const Ct=ti(Yi);rr(c,Ct,xe=>f(118,vr=xe));const $e=ti(ai);rr(c,$e,xe=>f(117,bt=xe));const Gt=ti(Bi);rr(c,Gt,xe=>f(116,Et=xe));const yr=ti(la);rr(c,yr,xe=>f(115,Jt=xe));const Bt=ti(Ja);rr(c,Bt,xe=>f(114,ur=xe));const qt=ti(Ya);rr(c,qt,xe=>f(113,Sr=xe));const Dt=ti(_n);rr(c,Dt,xe=>f(112,Qe=xe));const gr=ti(kn);rr(c,gr,xe=>f(111,ct=xe));const Ft=ti(fi);rr(c,Ft,xe=>f(110,Lt=xe));const Dr=ti(Oi);rr(c,Dr,xe=>f(109,At=xe));const ar=ti(Qi);rr(c,ar,xe=>f(108,Ve=xe));const Wt=ti(Qa);rr(c,Wt,xe=>f(107,Ie=xe));const Ht=ti(ln);rr(c,Ht,xe=>f(106,ve=xe));const Tr=ti(Qo);rr(c,Tr,xe=>f(105,ze=xe));const Tn=ti($i);rr(c,Tn,xe=>f(104,ee=xe));const oi=ti(un);rr(c,oi,xe=>f(103,le=xe));const di=ti(Gr);rr(c,di,xe=>f(102,V=xe));const $a=ti(O);rr(c,$a,xe=>f(101,U=xe));const ua=ti(j);rr(c,ua,xe=>f(100,R=xe));const Kr=ti(ki);rr(c,Kr,xe=>f(99,B=xe));const An=ti(Jr);rr(c,An,xe=>f(98,k=xe));const Fr=ti(Gi);rr(c,Fr,xe=>f(97,T=xe));const xr=ti(In);rr(c,xr,xe=>f(96,o=xe));const Br=ti(G);rr(c,Br,xe=>f(94,x=xe));const or=ti(de);rr(c,or,xe=>f(95,_=xe));const zi=xa([nt,Pe,Xe,Ke],([xe,Yr,Hr,hr])=>{const ro={};return xe&&(ro.x=xe),Yr&&(ro.y=Yr),Hr&&(ro.z=Hr),hr&&(ro.r=hr),ro}),Ii=xa([it,we,Ne],([xe])=>Object.assign({top:0,right:0,bottom:0,left:0},xe)),tl=xa([we,Ne,Ii],([xe,Yr,Hr])=>{const hr={};return hr.top=Hr.top,hr.right=xe-Hr.right,hr.bottom=Yr-Hr.bottom,hr.left=Hr.left,hr.width=hr.right-hr.left,hr.height=hr.bottom-hr.top,hr.width<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),hr.height<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),hr}),Fi=xa([tl],([xe])=>xe.width);rr(c,Fi,xe=>f(8,Ti=xe));const en=xa([tl],([xe])=>xe.height);rr(c,en,xe=>f(9,Ei=xe));const Vr=xa([qe,zi,je],([xe,Yr,Hr])=>{const hr=Xd(Yr,Hr);return Object.keys(hr).length>0?{...iv(xe,hr),...Hr}:{}}),Vi=xa([Vr,Je],Yf("x")),zn=xa([Vr,Ct],Yf("y")),Ki=xa([Vr,$e],Yf("z")),eo=xa([Vr,Gt],Yf("r")),Pn=xa([Kr,Vr,Vi,Wt,yr,gr,Fi,en,oi,te],rd("x")),Ea=xa([nt,Pn],id),ca=xa([An,Vr,zn,Ht,Bt,Ft,Fi,en,di,te],rd("y")),ha=xa([Pe,ca],id),vn=xa([Fr,Vr,Ki,Tr,qt,Dr,Fi,en,$a,te],rd("z")),to=xa([Xe,vn],id),Sa=xa([xr,Vr,eo,Tn,Dt,ar,Fi,en,ua,te],rd("r")),Co=xa([Ke,Sa],id),Cn=xa([Pn],nd),rl=xa([ca],nd),$o=xa([vn],nd),pa=xa([Sa],nd),Hn=xa([Fi,en],([xe,Yr])=>xe/Yr);rr(c,Hn,xe=>f(10,ii=xe));function Mn(xe){Ac[xe?"unshift":"push"](()=>{ci=xe,f(2,ci)})}function Xn(){br=this.clientWidth,Ji=this.clientHeight,f(0,br),f(1,Ji)}return c.$$set=xe=>{"ssr"in xe&&f(3,Ai=xe.ssr),"pointerEvents"in xe&&f(4,Fa=xe.pointerEvents),"position"in xe&&f(5,It=xe.position),"percentRange"in xe&&f(51,Pt=xe.percentRange),"width"in xe&&f(52,ni=xe.width),"height"in xe&&f(53,Ir=xe.height),"containerWidth"in xe&&f(0,br=xe.containerWidth),"containerHeight"in xe&&f(1,Ji=xe.containerHeight),"element"in xe&&f(2,ci=xe.element),"x"in xe&&f(54,Si=xe.x),"y"in xe&&f(55,jr=xe.y),"z"in xe&&f(56,cr=xe.z),"r"in xe&&f(57,nr=xe.r),"data"in xe&&f(58,hi=xe.data),"xDomain"in xe&&f(59,pi=xe.xDomain),"yDomain"in xe&&f(60,Yi=xe.yDomain),"zDomain"in xe&&f(61,ai=xe.zDomain),"rDomain"in xe&&f(62,Bi=xe.rDomain),"xNice"in xe&&f(63,la=xe.xNice),"yNice"in xe&&f(64,Ja=xe.yNice),"zNice"in xe&&f(65,Ya=xe.zNice),"rNice"in xe&&f(66,_n=xe.rNice),"xReverse"in xe&&f(67,kn=xe.xReverse),"yReverse"in xe&&f(68,fi=xe.yReverse),"zReverse"in xe&&f(69,Oi=xe.zReverse),"rReverse"in xe&&f(70,Qi=xe.rReverse),"xPadding"in xe&&f(71,Qa=xe.xPadding),"yPadding"in xe&&f(72,ln=xe.yPadding),"zPadding"in xe&&f(73,Qo=xe.zPadding),"rPadding"in xe&&f(74,$i=xe.rPadding),"xScale"in xe&&f(75,ki=xe.xScale),"yScale"in xe&&f(76,Jr=xe.yScale),"zScale"in xe&&f(77,Gi=xe.zScale),"rScale"in xe&&f(78,In=xe.rScale),"xRange"in xe&&f(79,un=xe.xRange),"yRange"in xe&&f(80,Gr=xe.yRange),"zRange"in xe&&f(81,O=xe.zRange),"rRange"in xe&&f(82,j=xe.rRange),"padding"in xe&&f(83,Z=xe.padding),"extents"in xe&&f(84,$=xe.extents),"flatData"in xe&&f(85,ie=xe.flatData),"custom"in xe&&f(86,de=xe.custom),"$$scope"in xe&&f(89,Yt=xe.$$scope)},c.$$.update=()=>{c.$$.dirty[1]&8388608&&Si&&f(87,G.x=Si,G),c.$$.dirty[1]&16777216&&jr&&f(87,G.y=jr,G),c.$$.dirty[1]&33554432&&cr&&f(87,G.z=cr,G),c.$$.dirty[1]&67108864&&nr&&f(87,G.r=nr,G),c.$$.dirty[1]&268435456&&pi&&f(87,G.xDomain=pi,G),c.$$.dirty[1]&536870912&&Yi&&f(87,G.yDomain=Yi,G),c.$$.dirty[1]&1073741824&&ai&&f(87,G.zDomain=ai,G),c.$$.dirty[2]&1&&Bi&&f(87,G.rDomain=Bi,G),c.$$.dirty[2]&131072&&un&&f(87,G.xRange=un,G),c.$$.dirty[2]&262144&&Gr&&f(87,G.yRange=Gr,G),c.$$.dirty[2]&524288&&O&&f(87,G.zRange=O,G),c.$$.dirty[2]&1048576&&j&&f(87,G.rRange=j,G),c.$$.dirty[1]&1048576&&ei(te,Kn=Pt,Kn),c.$$.dirty[0]&1&&ei(we,Ri=br,Ri),c.$$.dirty[0]&2&&ei(Ne,ir=Ji,ir),c.$$.dirty[2]&4194304&&ei(je,rt=Xd($),rt),c.$$.dirty[1]&134217728&&ei(Te,pt=hi,pt),c.$$.dirty[1]&134217728|c.$$.dirty[2]&8388608&&ei(qe,mr=ie||hi,mr),c.$$.dirty[2]&2097152&&ei(it,ri=Z,ri),c.$$.dirty[1]&8388608&&ei(nt,Wr=Kc(Si),Wr),c.$$.dirty[1]&16777216&&ei(Pe,Qt=Kc(jr),Qt),c.$$.dirty[1]&33554432&&ei(Xe,Ye=Kc(cr),Ye),c.$$.dirty[1]&67108864&&ei(Ke,kr=Kc(nr),kr),c.$$.dirty[1]&268435456&&ei(Je,Ot=pi,Ot),c.$$.dirty[1]&536870912&&ei(Ct,vr=Yi,vr),c.$$.dirty[1]&1073741824&&ei($e,bt=ai,bt),c.$$.dirty[2]&1&&ei(Gt,Et=Bi,Et),c.$$.dirty[2]&2&&ei(yr,Jt=la,Jt),c.$$.dirty[2]&4&&ei(Bt,ur=Ja,ur),c.$$.dirty[2]&8&&ei(qt,Sr=Ya,Sr),c.$$.dirty[2]&16&&ei(Dt,Qe=_n,Qe),c.$$.dirty[2]&32&&ei(gr,ct=kn,ct),c.$$.dirty[2]&64&&ei(Ft,Lt=fi,Lt),c.$$.dirty[2]&128&&ei(Dr,At=Oi,At),c.$$.dirty[2]&256&&ei(ar,Ve=Qi,Ve),c.$$.dirty[2]&512&&ei(Wt,Ie=Qa,Ie),c.$$.dirty[2]&1024&&ei(Ht,ve=ln,ve),c.$$.dirty[2]&2048&&ei(Tr,ze=Qo,ze),c.$$.dirty[2]&4096&&ei(Tn,ee=$i,ee),c.$$.dirty[2]&131072&&ei(oi,le=un,le),c.$$.dirty[2]&262144&&ei(di,V=Gr,V),c.$$.dirty[2]&524288&&ei($a,U=O,U),c.$$.dirty[2]&1048576&&ei(ua,R=j,R),c.$$.dirty[2]&8192&&ei(Kr,B=ki,B),c.$$.dirty[2]&16384&&ei(An,k=Jr,k),c.$$.dirty[2]&32768&&ei(Fr,T=Gi,T),c.$$.dirty[2]&65536&&ei(xr,o=In,o),c.$$.dirty[2]&16777216&&ei(or,_=de,_),c.$$.dirty[2]&33554432&&ei(Br,x=G,x),c.$$.dirty[2]&67108864&&cg("LayerCake",y)},f(88,y={activeGetters:zi,width:Fi,height:en,percentRange:te,aspectRatio:Hn,containerWidth:we,containerHeight:Ne,x:nt,y:Pe,z:Xe,r:Ke,custom:or,data:Te,xNice:yr,yNice:Bt,zNice:qt,rNice:Dt,xReverse:gr,yReverse:Ft,zReverse:Dr,rReverse:ar,xPadding:Wt,yPadding:Ht,zPadding:Tr,rPadding:Tn,padding:Ii,flatData:qe,extents:Vr,xDomain:Vi,yDomain:zn,zDomain:Ki,rDomain:eo,xRange:Cn,yRange:rl,zRange:$o,rRange:pa,config:Br,xScale:Pn,xGet:Ea,yScale:ca,yGet:ha,zScale:vn,zGet:to,rScale:Sa,rGet:Co}),[br,Ji,ci,Ai,Fa,It,ir,Ri,Ti,Ei,ii,te,we,Ne,je,Te,qe,it,nt,Pe,Xe,Ke,Je,Ct,$e,Gt,yr,Bt,qt,Dt,gr,Ft,Dr,ar,Wt,Ht,Tr,Tn,oi,di,$a,ua,Kr,An,Fr,xr,Br,or,Fi,en,Hn,Pt,ni,Ir,Si,jr,cr,nr,hi,pi,Yi,ai,Bi,la,Ja,Ya,_n,kn,fi,Oi,Qi,Qa,ln,Qo,$i,ki,Jr,Gi,In,un,Gr,O,j,Z,$,ie,de,G,y,Yt,Zi,Mn,Xn]}class b0 extends Es{constructor(h){super(),Ss(this,h,v0,_0,ks,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const x0=c=>({element:c&1}),Sy=c=>({element:c[0]}),w0=c=>({element:c&1}),ky=c=>({element:c[0]});function E0(c){let h,f,y,x,_;const o=c[12].defs,T=Jh(o,c,c[11],ky),k=c[12].default,B=Jh(k,c,c[11],Sy);return{c(){h=zo("svg"),f=zo("defs"),T&&T.c(),y=zo("g"),B&&B.c(),this.h()},l(R){h=Po(R,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var U=X(h);f=Po(U,"defs",{});var V=X(f);T&&T.l(V),V.forEach(M),y=Po(U,"g",{class:!0,transform:!0});var le=X(y);B&&B.l(le),le.forEach(M),U.forEach(M),this.h()},h(){z(y,"class","layercake-layout-svg_g"),z(y,"transform",x="translate("+c[7].left+", "+c[7].top+")"),z(h,"class","layercake-layout-svg svelte-u84d8d"),z(h,"viewBox",c[4]),z(h,"width",c[5]),z(h,"height",c[6]),ye(h,"z-index",c[2],!1),ye(h,"pointer-events",c[3]===!1?"none":null,!1)},m(R,U){ke(R,h,U),P(h,f),T&&T.m(f,null),P(h,y),B&&B.m(y,null),c[13](y),c[14](h),_=!0},p(R,[U]){T&&T.p&&(!_||U&2049)&&Yh(T,o,R,R[11],_?$h(o,R[11],U,w0):Qh(R[11]),ky),B&&B.p&&(!_||U&2049)&&Yh(B,k,R,R[11],_?$h(k,R[11],U,x0):Qh(R[11]),Sy),(!_||U&128&&x!==(x="translate("+R[7].left+", "+R[7].top+")"))&&z(y,"transform",x),(!_||U&16)&&z(h,"viewBox",R[4]),(!_||U&32)&&z(h,"width",R[5]),(!_||U&64)&&z(h,"height",R[6]),U&4&&ye(h,"z-index",R[2],!1),U&8&&ye(h,"pointer-events",R[3]===!1?"none":null,!1)},i(R){_||(mt(T,R),mt(B,R),_=!0)},o(R){wt(T,R),wt(B,R),_=!1},d(R){R&&M(h),T&&T.d(R),B&&B.d(R),c[13](null),c[14](null)}}}function S0(c,h,f){let y,x,_,{$$slots:o={},$$scope:T}=h,{element:k=void 0}=h,{innerElement:B=void 0}=h,{zIndex:R=void 0}=h,{pointerEvents:U=void 0}=h,{viewBox:V=void 0}=h;const{containerWidth:le,containerHeight:ee,padding:ze}=lf("LayerCake");rr(c,le,Ve=>f(5,y=Ve)),rr(c,ee,Ve=>f(6,x=Ve)),rr(c,ze,Ve=>f(7,_=Ve));function ve(Ve){Ac[Ve?"unshift":"push"](()=>{B=Ve,f(1,B)})}function Ie(Ve){Ac[Ve?"unshift":"push"](()=>{k=Ve,f(0,k)})}return c.$$set=Ve=>{"element"in Ve&&f(0,k=Ve.element),"innerElement"in Ve&&f(1,B=Ve.innerElement),"zIndex"in Ve&&f(2,R=Ve.zIndex),"pointerEvents"in Ve&&f(3,U=Ve.pointerEvents),"viewBox"in Ve&&f(4,V=Ve.viewBox),"$$scope"in Ve&&f(11,T=Ve.$$scope)},[k,B,R,U,V,y,x,_,le,ee,ze,T,o,ve,Ie]}class k0 extends Es{constructor(h){super(),Ss(this,h,S0,E0,ks,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Iy(c,h,f){const y=c.slice();return y[23]=h[f],y[25]=f,y}function Ty(c){let h,f,y,x;return{c(){h=zo("rect"),this.h()},l(_){h=Po(_,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),X(h).forEach(M),this.h()},h(){z(h,"class","group-rect"),z(h,"data-id",c[25]),z(h,"x",f=c[11].bandwidth?c[7](c[23]):c[7](c[23])[0]),z(h,"y",y=c[13](c[12](c[23]))-1),z(h,"width",x=c[11].bandwidth?c[11].bandwidth():c[9](c[23])),z(h,"height","3"),z(h,"fill","#CEDC20"),z(h,"stroke",c[0]),z(h,"stroke-width",c[1])},m(_,o){ke(_,h,o)},p(_,o){o&3200&&f!==(f=_[11].bandwidth?_[7](_[23]):_[7](_[23])[0])&&z(h,"x",f),o&13312&&y!==(y=_[13](_[12](_[23]))-1)&&z(h,"y",y),o&3584&&x!==(x=_[11].bandwidth?_[11].bandwidth():_[9](_[23]))&&z(h,"width",x),o&1&&z(h,"stroke",_[0]),o&2&&z(h,"stroke-width",_[1])},d(_){_&&M(h)}}}function Ay(c){let h,f,y,x,_,o,T,k,B=c[12]&&Ty(c);return{c(){h=zo("rect"),B&&B.c(),o=zo("text"),this.h()},l(R){h=Po(R,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),X(h).forEach(M),B&&B.l(R),o=Po(R,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),X(o).forEach(M),this.h()},h(){z(h,"class","group-rect"),z(h,"data-id",c[25]),z(h,"x",f=c[11].bandwidth?c[7](c[23]):c[7](c[23])[0]),z(h,"y",y=c[6](c[23])),z(h,"width",x=c[11].bandwidth?c[11].bandwidth():c[9](c[23])),z(h,"height",_=c[8](c[23])),z(h,"fill",c[4]),z(h,"stroke",c[0]),z(h,"stroke-width",c[1]),z(o,"x",T=c[11].bandwidth?c[7](c[23])+c[11].bandwidth()/2:c[7](c[23])[0]),z(o,"y",k=c[6](c[23])-4),z(o,"dx",c[2]),z(o,"dy",c[3]),z(o,"text-anchor",c[5])},m(R,U){ke(R,h,U),B&&B.m(R,U),ke(R,o,U)},p(R,U){U&3200&&f!==(f=R[11].bandwidth?R[7](R[23]):R[7](R[23])[0])&&z(h,"x",f),U&1088&&y!==(y=R[6](R[23]))&&z(h,"y",y),U&3584&&x!==(x=R[11].bandwidth?R[11].bandwidth():R[9](R[23]))&&z(h,"width",x),U&1280&&_!==(_=R[8](R[23]))&&z(h,"height",_),U&16&&z(h,"fill",R[4]),U&1&&z(h,"stroke",R[0]),U&2&&z(h,"stroke-width",R[1]),R[12]?B?B.p(R,U):(B=Ty(R),B.c(),B.m(o.parentNode,o)):B&&(B.d(1),B=null),U&3200&&T!==(T=R[11].bandwidth?R[7](R[23])+R[11].bandwidth()/2:R[7](R[23])[0])&&z(o,"x",T),U&1088&&k!==(k=R[6](R[23])-4)&&z(o,"y",k),U&4&&z(o,"dx",R[2]),U&8&&z(o,"dy",R[3]),U&32&&z(o,"text-anchor",R[5])},d(R){R&&M(h),B&&B.d(R),R&&M(o)}}}function I0(c){let h,f=c[10],y=[];for(let x=0;x<f.length;x+=1)y[x]=Ay(Iy(c,f,x));return{c(){h=zo("g");for(let x=0;x<y.length;x+=1)y[x].c();this.h()},l(x){h=Po(x,"g",{class:!0});var _=X(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(M),this.h()},h(){z(h,"class","column-group svelte-wgzwsk")},m(x,_){ke(x,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(x,[_]){if(_&16383){f=x[10];let o;for(o=0;o<f.length;o+=1){const T=Iy(x,f,o);y[o]?y[o].p(T,_):(y[o]=Ay(T),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},i:yn,o:yn,d(x){x&&M(h),yu(y,x)}}}function T0(c,h,f){let y,x,_,o,T,k,B,R,U;const{data:V,xGet:le,yGet:ee,yRange:ze,xScale:ve,yScale:Ie,y:Ve,z:At}=lf("LayerCake");rr(c,V,Et=>f(10,k=Et)),rr(c,le,Et=>f(7,T=Et)),rr(c,ee,Et=>f(6,_=Et)),rr(c,ze,Et=>f(21,o=Et)),rr(c,ve,Et=>f(11,B=Et)),rr(c,Ie,Et=>f(13,U=Et)),rr(c,At,Et=>f(12,R=Et));let{stroke:Lt=""}=h,{strokeWidth:ct=0}=h,{dxTick:Qe=0}=h,{dyTick:Sr=0}=h,{fill:ur="#00205b"}=h,{textAnchor:Jt="middle"}=h;return c.$$set=Et=>{"stroke"in Et&&f(0,Lt=Et.stroke),"strokeWidth"in Et&&f(1,ct=Et.strokeWidth),"dxTick"in Et&&f(2,Qe=Et.dxTick),"dyTick"in Et&&f(3,Sr=Et.dyTick),"fill"in Et&&f(4,ur=Et.fill),"textAnchor"in Et&&f(5,Jt=Et.textAnchor)},c.$$.update=()=>{c.$$.dirty&128&&f(9,y=Et=>{const bt=T(Et);return Math.max(0,bt[1]-bt[0])}),c.$$.dirty&2097216&&f(8,x=Et=>o[0]-_(Et))},[Lt,ct,Qe,Sr,ur,Jt,_,T,x,y,k,B,R,U,V,le,ee,ze,ve,Ie,At,o]}class A0 extends Es{constructor(h){super(),Ss(this,h,T0,I0,ks,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function zy(c,h,f){const y=c.slice();return y[28]=h[f],y[30]=f,y}function Py(c){let h,f,y,x;return{c(){h=zo("line"),this.h()},l(_){h=Po(_,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),X(h).forEach(M),this.h()},h(){z(h,"y1",f=c[20]*-1),z(h,"y2",y=c[14]&&c[30]%2==0?c[10]+c[8]+2:c[10]+c[8]-13),z(h,"x1","0"),z(h,"x2","0"),z(h,"stroke",c[11]),z(h,"stroke-width",x=c[15]&&Array.isArray(c[4])&&c[30]==Math.floor(c[4].length/2)?2:1),z(h,"class","svelte-fwjh80"),Wi(h,"baseline",c[13])},m(_,o){ke(_,h,o)},p(_,o){o&1048576&&f!==(f=_[20]*-1)&&z(h,"y1",f),o&17664&&y!==(y=_[14]&&_[30]%2==0?_[10]+_[8]+2:_[10]+_[8]-13)&&z(h,"y2",y),o&2048&&z(h,"stroke",_[11]),o&32784&&x!==(x=_[15]&&Array.isArray(_[4])&&_[30]==Math.floor(_[4].length/2)?2:1)&&z(h,"stroke-width",x),o&8192&&Wi(h,"baseline",_[13])},d(_){_&&M(h)}}}function z0(c){let h=c[1](c[28])+"",f;return{c(){f=he(h)},l(y){f=pe(y,h)},m(y,x){ke(y,f,x)},p(y,x){x&262146&&h!==(h=y[1](y[28])+"")&&gt(f,h)},d(y){y&&M(f)}}}function P0(c){let h,f=c[1](c[28])+"",y,x;return{c(){h=he(c[5]),y=he(f),x=he(c[6])},l(_){h=pe(_,c[5]),y=pe(_,f),x=pe(_,c[6])},m(_,o){ke(_,h,o),ke(_,y,o),ke(_,x,o)},p(_,o){o&32&&gt(h,_[5]),o&262146&&f!==(f=_[1](_[28])+"")&&gt(y,f),o&64&&gt(x,_[6])},d(_){_&&M(h),_&&M(y),_&&M(x)}}}function Cy(c){let h,f,y,x,_,o,T,k=c[0]!==!1&&Py(c);function B(V,le){return V[30]==V[18].length-1?P0:z0}let R=B(c),U=R(c);return{c(){h=zo("g"),k&&k.c(),f=zo("text"),U.c(),this.h()},l(V){h=Po(V,"g",{class:!0,transform:!0});var le=X(h);k&&k.l(le),f=Po(le,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var ee=X(f);U.l(ee),ee.forEach(M),le.forEach(M),this.h()},h(){z(f,"x",y=c[7]||c[16]?c[17].bandwidth()/2:0),z(f,"y",x=c[3]?c[20]*-1-6:c[14]&&c[30]%2==0?c[8]+15:c[8]),z(f,"dx",_=c[24](c[30])=="start"?c[9]-2:c[24](c[30])=="end"?c[9]+2:c[9]),z(f,"dy",c[10]),z(f,"text-anchor",c[24](c[30])),z(f,"fill",c[12]),z(f,"class","svelte-fwjh80"),Wi(f,"bold",c[15]&&Array.isArray(c[4])&&c[30]==Math.floor(c[4].length/2)),z(h,"class",o="tick tick-"+c[28]+" svelte-fwjh80"),z(h,"transform",T="translate("+c[17](c[28])+","+c[19][0]+")")},m(V,le){ke(V,h,le),k&&k.m(h,null),P(h,f),U.m(f,null)},p(V,le){V[0]!==!1?k?k.p(V,le):(k=Py(V),k.c(),k.m(h,f)):k&&(k.d(1),k=null),R===(R=B(V))&&U?U.p(V,le):(U.d(1),U=R(V),U&&(U.c(),U.m(f,null))),le&196736&&y!==(y=V[7]||V[16]?V[17].bandwidth()/2:0)&&z(f,"x",y),le&1065224&&x!==(x=V[3]?V[20]*-1-6:V[14]&&V[30]%2==0?V[8]+15:V[8])&&z(f,"y",x),le&512&&_!==(_=V[24](V[30])=="start"?V[9]-2:V[24](V[30])=="end"?V[9]+2:V[9])&&z(f,"dx",_),le&1024&&z(f,"dy",V[10]),le&4096&&z(f,"fill",V[12]),le&32784&&Wi(f,"bold",V[15]&&Array.isArray(V[4])&&V[30]==Math.floor(V[4].length/2)),le&262144&&o!==(o="tick tick-"+V[28]+" svelte-fwjh80")&&z(h,"class",o),le&917504&&T!==(T="translate("+V[17](V[28])+","+V[19][0]+")")&&z(h,"transform",T)},d(V){V&&M(h),k&&k.d(),U.d()}}}function My(c){let h,f,y;return{c(){h=zo("line"),this.h()},l(x){h=Po(x,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),X(h).forEach(M),this.h()},h(){z(h,"class","baseline svelte-fwjh80"),z(h,"y1",c[20]),z(h,"y2","0"),z(h,"x1",f=c[17](0)),z(h,"x2",y=c[17](0)),z(h,"stroke",c[11])},m(x,_){ke(x,h,_)},p(x,_){_&1048576&&z(h,"y1",x[20]),_&131072&&f!==(f=x[17](0))&&z(h,"x1",f),_&131072&&y!==(y=x[17](0))&&z(h,"x2",y),_&2048&&z(h,"stroke",x[11])},d(x){x&&M(h)}}}function C0(c){let h,f,y=c[18],x=[];for(let o=0;o<y.length;o+=1)x[o]=Cy(zy(c,y,o));let _=c[2]===!0&&My(c);return{c(){h=zo("g");for(let o=0;o<x.length;o+=1)x[o].c();f=sa(),_&&_.c(),this.h()},l(o){h=Po(o,"g",{class:!0});var T=X(h);for(let k=0;k<x.length;k+=1)x[k].l(T);f=sa(),_&&_.l(T),T.forEach(M),this.h()},h(){z(h,"class","axis x-axis")},m(o,T){ke(o,h,T);for(let k=0;k<x.length;k+=1)x[k].m(h,null);P(h,f),_&&_.m(h,null)},p(o,[T]){if(T&18874363){y=o[18];let k;for(k=0;k<y.length;k+=1){const B=zy(o,y,k);x[k]?x[k].p(B,T):(x[k]=Cy(B),x[k].c(),x[k].m(h,f))}for(;k<x.length;k+=1)x[k].d(1);x.length=y.length}o[2]===!0?_?_.p(o,T):(_=My(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null)},i:yn,o:yn,d(o){o&&M(h),yu(x,o),_&&_.d()}}}function M0(c,h,f){let y,x,_,o,T;const{width:k,height:B,xScale:R,yScale:U,yRange:V}=lf("LayerCake");rr(c,B,Ye=>f(20,T=Ye)),rr(c,R,Ye=>f(17,_=Ye)),rr(c,V,Ye=>f(19,o=Ye));let{gridlines:le=!0}=h,{formatTick:ee=Ye=>Ye}=h,{baseline:ze=!1}=h,{flipped:ve=!1}=h,{snapTicks:Ie=!1}=h,{ticks:Ve=void 0}=h,{prefix:At=""}=h,{suffix:Lt=""}=h,{xTick:ct=void 0}=h,{yTick:Qe=15}=h,{dxTick:Sr=0}=h,{dyTick:ur=0}=h,{lineColor:Jt="#999"}=h,{textColor:Et="#555"}=h,{solid:bt=!1}=h,{stagger:vr=!1}=h,{median:Ot=!0}=h;function kr(Ye){if(Ie===!0){if(Ye===0)return"start";if(Ye===x.length-1)return"end"}return"middle"}return c.$$set=Ye=>{"gridlines"in Ye&&f(0,le=Ye.gridlines),"formatTick"in Ye&&f(1,ee=Ye.formatTick),"baseline"in Ye&&f(2,ze=Ye.baseline),"flipped"in Ye&&f(3,ve=Ye.flipped),"snapTicks"in Ye&&f(25,Ie=Ye.snapTicks),"ticks"in Ye&&f(4,Ve=Ye.ticks),"prefix"in Ye&&f(5,At=Ye.prefix),"suffix"in Ye&&f(6,Lt=Ye.suffix),"xTick"in Ye&&f(7,ct=Ye.xTick),"yTick"in Ye&&f(8,Qe=Ye.yTick),"dxTick"in Ye&&f(9,Sr=Ye.dxTick),"dyTick"in Ye&&f(10,ur=Ye.dyTick),"lineColor"in Ye&&f(11,Jt=Ye.lineColor),"textColor"in Ye&&f(12,Et=Ye.textColor),"solid"in Ye&&f(13,bt=Ye.solid),"stagger"in Ye&&f(14,vr=Ye.stagger),"median"in Ye&&f(15,Ot=Ye.median)},c.$$.update=()=>{c.$$.dirty&131072&&f(16,y=typeof _.bandwidth=="function"),c.$$.dirty&196624&&f(18,x=Array.isArray(Ve)?Ve:y?_.domain():_.ticks(Ve))},[le,ee,ze,ve,Ve,At,Lt,ct,Qe,Sr,ur,Jt,Et,bt,vr,Ot,y,_,x,o,T,B,R,V,kr,Ie]}class D0 extends Es{constructor(h){super(),Ss(this,h,M0,C0,ks,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function L0(c){let h,f,y,x;return h=new A0({props:{fill:c[1],formatVal:c[5]}}),y=new D0({props:{gridlines:!1}}),{c(){zr(h.$$.fragment),f=Le(),zr(y.$$.fragment)},l(_){Pr(h.$$.fragment,_),f=Re(_),Pr(y.$$.fragment,_)},m(_,o){Cr(h,_,o),ke(_,f,o),Cr(y,_,o),x=!0},p(_,o){const T={};o&2&&(T.fill=_[1]),o&32&&(T.formatVal=_[5]),h.$set(T)},i(_){x||(mt(h.$$.fragment,_),mt(y.$$.fragment,_),x=!0)},o(_){wt(h.$$.fragment,_),wt(y.$$.fragment,_),x=!1},d(_){Mr(h,_),_&&M(f),Mr(y,_)}}}function R0(c){let h,f;return h=new k0({props:{$$slots:{default:[L0]},$$scope:{ctx:c}}}),{c(){zr(h.$$.fragment)},l(y){Pr(h.$$.fragment,y)},m(y,x){Cr(h,y,x),f=!0},p(y,x){const _={};x&2082&&(_.$$scope={dirty:x,ctx:y}),h.$set(_)},i(y){f||(mt(h.$$.fragment,y),f=!0)},o(y){wt(h.$$.fragment,y),f=!1},d(y){Mr(h,y)}}}function B0(c){let h,f,y;return f=new b0({props:{padding:{top:15,right:0,bottom:20,left:0},x:c[2],y:c[3],z:c[4],xScale:xg().paddingInner([.02]).round(!0),xDomain:c[7],yDomain:c[6],zDomain:c[6],data:c[0],$$slots:{default:[R0]},$$scope:{ctx:c}}}),{c(){h=K("div"),zr(f.$$.fragment),this.h()},l(x){h=H(x,"DIV",{class:!0});var _=X(h);Pr(f.$$.fragment,_),_.forEach(M),this.h()},h(){z(h,"class","chart-container svelte-1i1qsul")},m(x,_){ke(x,h,_),Cr(f,h,null),y=!0},p(x,[_]){const o={};_&4&&(o.x=x[2]),_&8&&(o.y=x[3]),_&16&&(o.z=x[4]),_&128&&(o.xDomain=x[7]),_&64&&(o.yDomain=x[6]),_&64&&(o.zDomain=x[6]),_&1&&(o.data=x[0]),_&2082&&(o.$$scope={dirty:_,ctx:x}),f.$set(o)},i(x){y||(mt(f.$$.fragment,x),y=!0)},o(x){wt(f.$$.fragment,x),y=!1},d(x){x&&M(h),Mr(f)}}}function O0(c,h,f){let y,x,_,{data:o}=h,{suffix:T="%"}=h,{decimals:k=null}=h,{fill:B="#00205B"}=h,{xKey:R="x"}=h,{yKey:U="y"}=h,{zKey:V=null}=h,{colors:le=["#00205B","#00205B","#00205B","#00205B"]}=h;return c.$$set=ee=>{"data"in ee&&f(0,o=ee.data),"suffix"in ee&&f(8,T=ee.suffix),"decimals"in ee&&f(9,k=ee.decimals),"fill"in ee&&f(1,B=ee.fill),"xKey"in ee&&f(2,R=ee.xKey),"yKey"in ee&&f(3,U=ee.yKey),"zKey"in ee&&f(4,V=ee.zKey),"colors"in ee&&f(10,le=ee.colors)},c.$$.update=()=>{c.$$.dirty&5&&f(7,y=o.map(ee=>ee[R])),c.$$.dirty&9&&f(6,x=[0,Math.max(...o.map(ee=>ee[U]))]),c.$$.dirty&768&&f(5,_=ee=>ee.toFixed(k)+T)},[o,B,R,U,V,_,x,y,T,k,le]}class F0 extends Es{constructor(h){super(),Ss(this,h,O0,B0,ks,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function Dy(c,h,f){const y=c.slice();return y[12]=h[f],y[14]=f,y}function V0(c){let h,f,y=c[4](c[12][c[3]])+"",x,_;return{c(){h=K("span"),f=he("(NI "),x=he(y),_=he(")"),this.h()},l(o){h=H(o,"SPAN",{class:!0,style:!0});var T=X(h);f=pe(T,"(NI "),x=pe(T,y),_=pe(T,")"),T.forEach(M),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(o,T){ke(o,h,T),P(h,f),P(h,x),P(h,_)},p(o,T){T&9&&y!==(y=o[4](o[12][o[3]])+"")&&gt(x,y)},d(o){o&&M(h)}}}function N0(c){let h,f,y=dd(Math.round(c[12][c[3]]),"%)")+"",x;return{c(){h=K("span"),f=he("(2011 "),x=he(y),this.h()},l(_){h=H(_,"SPAN",{class:!0,style:!0});var o=X(h);f=pe(o,"(2011 "),x=pe(o,y),o.forEach(M),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(_,o){ke(_,h,o),P(h,f),P(h,x)},p(_,o){o&9&&y!==(y=dd(Math.round(_[12][_[3]]),"%)")+"")&&gt(x,y)},d(_){_&&M(h)}}}function Ly(c){let h,f,y,x,_=c[12][c[1]]+"",o,T,k,B=c[4](c[12][c[2]])+"",R,U,V;function le(ve,Ie){if(ve[3]=="prev")return N0;if(ve[3])return V0}let ee=le(c),ze=ee&&ee(c);return{c(){h=K("tr"),f=K("td"),y=zo("svg"),x=Le(),o=he(_),T=Le(),k=K("td"),R=he(B),U=Le(),ze&&ze.c(),V=Le(),this.h()},l(ve){h=H(ve,"TR",{});var Ie=X(h);f=H(Ie,"TD",{class:!0});var Ve=X(f);y=Po(Ve,"svg",{width:!0,height:!0,class:!0});var At=X(y);At.forEach(M),x=Re(Ve),o=pe(Ve,_),Ve.forEach(M),T=Re(Ie),k=H(Ie,"TD",{class:!0,style:!0});var Lt=X(k);R=pe(Lt,B),U=Re(Lt),ze&&ze.l(Lt),Lt.forEach(M),V=Re(Ie),Ie.forEach(M),this.h()},h(){z(y,"width","20"),z(y,"height","30"),z(y,"class","bullet svelte-1mqxdxj"),z(f,"class","svelte-1mqxdxj"),z(k,"class","cell-right svelte-1mqxdxj"),ye(k,"vertical-align","top")},m(ve,Ie){ke(ve,h,Ie),P(h,f),P(f,y),P(f,x),P(f,o),P(h,T),P(h,k),P(k,R),P(k,U),ze&&ze.m(k,null),P(h,V)},p(ve,Ie){Ie&3&&_!==(_=ve[12][ve[1]]+"")&&gt(o,_),Ie&5&&B!==(B=ve[4](ve[12][ve[2]])+"")&&gt(R,B),ee===(ee=le(ve))&&ze?ze.p(ve,Ie):(ze&&ze.d(1),ze=ee&&ee(ve),ze&&(ze.c(),ze.m(k,null)))},d(ve){ve&&M(h),ze&&ze.d()}}}function U0(c){let h,f,y=c[0],x=[];for(let _=0;_<y.length;_+=1)x[_]=Ly(Dy(c,y,_));return{c(){h=K("table"),f=K("tbody");for(let _=0;_<x.length;_+=1)x[_].c();this.h()},l(_){h=H(_,"TABLE",{class:!0});var o=X(h);f=H(o,"TBODY",{});var T=X(f);for(let k=0;k<x.length;k+=1)x[k].l(T);T.forEach(M),o.forEach(M),this.h()},h(){z(h,"class","legend svelte-1mqxdxj")},m(_,o){ke(_,h,o),P(h,f);for(let T=0;T<x.length;T+=1)x[T].m(f,null)},p(_,[o]){if(o&31){y=_[0];let T;for(T=0;T<y.length;T+=1){const k=Dy(_,y,T);x[T]?x[T].p(k,o):(x[T]=Ly(k),x[T].c(),x[T].m(f,null))}for(;T<x.length;T+=1)x[T].d(1);x.length=y.length}},i:yn,o:yn,d(_){_&&M(h),yu(x,_)}}}function j0(c,h,f){let y,{data:x}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:T="ni"}=h,{colors:k=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:B="#555"}=h,{mutedColor:R="#999"}=h,{decimals:U=null}=h,{round:V=!1}=h;function le(ee){let ze;return U?ze=(ee/y*100).toFixed(U)+"%":ee/y*100<1?ze="<1%":ze=(ee/y*100).toFixed(0)+"%",ze}return c.$$set=ee=>{"data"in ee&&f(0,x=ee.data),"xKey"in ee&&f(1,_=ee.xKey),"yKey"in ee&&f(2,o=ee.yKey),"zKey"in ee&&f(3,T=ee.zKey),"colors"in ee&&f(5,k=ee.colors),"textColor"in ee&&f(6,B=ee.textColor),"mutedColor"in ee&&f(7,R=ee.mutedColor),"decimals"in ee&&f(8,U=ee.decimals),"round"in ee&&f(9,V=ee.round)},c.$$.update=()=>{c.$$.dirty&5&&(y=x.map(ee=>ee[o]).reduce((ee,ze)=>ee+ze,0)),c.$$.dirty&9&&x.map(ee=>ee[T]).reduce((ee,ze)=>ee+ze,0)},[x,_,o,T,le,k,B,R,U,V]}class q0 extends Es{constructor(h){super(),Ss(this,h,j0,U0,ks,{data:0,xKey:1,yKey:2,zKey:3,colors:5,textColor:6,mutedColor:7,decimals:8,round:9})}}function Ry(c,h,f){const y=c.slice();return y[6]=h[f],y[8]=f,y}function By(c){let h,f=c[0],y=[];for(let x=0;x<f.length;x+=1)y[x]=Oy(Ry(c,f,x));return{c(){h=zo("svg");for(let x=0;x<y.length;x+=1)y[x].c();this.h()},l(x){h=Po(x,"svg",{class:!0});var _=X(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(M),this.h()},h(){z(h,"class","stack svelte-pzvhwz")},m(x,_){ke(x,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(x,_){if(_&31){f=x[0];let o;for(o=0;o<f.length;o+=1){const T=Ry(x,f,o);y[o]?y[o].p(T,_):(y[o]=Oy(T),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){x&&M(h),yu(y,x)}}}function Oy(c){let h,f;return{c(){h=zo("rect"),this.h()},l(y){h=Po(y,"rect",{class:!0,x:!0,style:!0}),X(h).forEach(M),this.h()},h(){z(h,"class","cell svelte-pzvhwz"),z(h,"x",f=c[4][c[8]]/c[3]*100+"%"),ye(h,"width",c[6][c[1]]/c[3]*100+"%"),ye(h,"fill",c[2][c[8]])},m(y,x){ke(y,h,x)},p(y,x){x&24&&f!==(f=y[4][y[8]]/y[3]*100+"%")&&z(h,"x",f),x&11&&ye(h,"width",y[6][y[1]]/y[3]*100+"%"),x&4&&ye(h,"fill",y[2][y[8]])},d(y){y&&M(h)}}}function Z0(c){let h,f=c[3]&&c[4]&&By(c);return{c(){f&&f.c(),h=sa()},l(y){f&&f.l(y),h=sa()},m(y,x){f&&f.m(y,x),ke(y,h,x)},p(y,[x]){y[3]&&y[4]?f?f.p(y,x):(f=By(y),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:yn,o:yn,d(y){f&&f.d(y),y&&M(h)}}}function G0(c,h,f){let{data:y}=h,{yKey:x="y"}=h,{colors:_=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,o,T;function k(){f(3,o=y.map(R=>R[x]).reduce((R,U)=>R+U,0));let B=[0];y.forEach(R=>B.push(B[B.length-1]+R[x])),f(4,T=B)}return c.$$set=B=>{"data"in B&&f(0,y=B.data),"yKey"in B&&f(1,x=B.yKey),"colors"in B&&f(2,_=B.colors)},c.$$.update=()=>{c.$$.dirty&3&&(y||x)&&k()},[y,x,_,o,T]}class mm extends Es{constructor(h){super(),Ss(this,h,G0,Z0,ks,{data:0,yKey:1,colors:2})}}function Fy(c,h,f){const y=c.slice();return y[10]=h[f],y[12]=f,y}function K0(c){let h,f,y=c[6](c[10][c[3]])+"",x,_;return{c(){h=K("span"),f=he("(NI "),x=he(y),_=he(")"),this.h()},l(o){h=H(o,"SPAN",{class:!0,style:!0});var T=X(h);f=pe(T,"(NI "),x=pe(T,y),_=pe(T,")"),T.forEach(M),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(o,T){ke(o,h,T),P(h,f),P(h,x),P(h,_)},p(o,T){T&9&&y!==(y=o[6](o[10][o[3]])+"")&&gt(x,y)},d(o){o&&M(h)}}}function H0(c){let h;return{c(){h=K("span"),this.h()},l(f){h=H(f,"SPAN",{class:!0,style:!0}),X(h).forEach(M),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(f,y){ke(f,h,y)},p:yn,d(f){f&&M(h)}}}function X0(c){let h,f,y=dd(Math.round(c[10][c[3]]),"%)")+"",x;return{c(){h=K("span"),f=he("(2011 "),x=he(y),this.h()},l(_){h=H(_,"SPAN",{class:!0,style:!0});var o=X(h);f=pe(o,"(2011 "),x=pe(o,y),o.forEach(M),this.h()},h(){z(h,"class",""),ye(h,"color","#1460aa")},m(_,o){ke(_,h,o),P(h,f),P(h,x)},p(_,o){o&9&&y!==(y=dd(Math.round(_[10][_[3]]),"%)")+"")&&gt(x,y)},d(_){_&&M(h)}}}function Vy(c){let h,f,y,x,_,o=c[10][c[1]]+"",T,k,B,R=c[6](c[10][c[2]])+"",U,V,le;function ee(Ie,Ve){if(Ie[3]=="prev"&&Ie[4])return X0;if(Ie[3]=="prev"&&!Ie[4])return H0;if(Ie[3])return K0}let ze=ee(c),ve=ze&&ze(c);return{c(){h=K("tr"),f=K("td"),y=zo("svg"),x=zo("rect"),_=Le(),T=he(o),k=Le(),B=K("td"),U=he(R),V=Le(),ve&&ve.c(),le=Le(),this.h()},l(Ie){h=H(Ie,"TR",{});var Ve=X(h);f=H(Ve,"TD",{class:!0});var At=X(f);y=Po(At,"svg",{width:!0,height:!0,class:!0});var Lt=X(y);x=Po(Lt,"rect",{width:!0,height:!0,style:!0}),X(x).forEach(M),Lt.forEach(M),_=Re(At),T=pe(At,o),At.forEach(M),k=Re(Ve),B=H(Ve,"TD",{class:!0,style:!0});var ct=X(B);U=pe(ct,R),V=Re(ct),ve&&ve.l(ct),ct.forEach(M),le=Re(Ve),Ve.forEach(M),this.h()},h(){z(x,"width","20"),z(x,"height","30"),ye(x,"fill",c[5][c[12]]),z(y,"width","20"),z(y,"height","30"),z(y,"class","bullet svelte-1gvovsq"),z(f,"class","svelte-1gvovsq"),z(B,"class","cell-right svelte-1gvovsq"),ye(B,"vertical-align","top")},m(Ie,Ve){ke(Ie,h,Ve),P(h,f),P(f,y),P(y,x),P(f,_),P(f,T),P(h,k),P(h,B),P(B,U),P(B,V),ve&&ve.m(B,null),P(h,le)},p(Ie,Ve){Ve&32&&ye(x,"fill",Ie[5][Ie[12]]),Ve&3&&o!==(o=Ie[10][Ie[1]]+"")&&gt(T,o),Ve&5&&R!==(R=Ie[6](Ie[10][Ie[2]])+"")&&gt(U,R),ze===(ze=ee(Ie))&&ve?ve.p(Ie,Ve):(ve&&ve.d(1),ve=ze&&ze(Ie),ve&&(ve.c(),ve.m(B,null)))},d(Ie){Ie&&M(h),ve&&ve.d()}}}function W0(c){let h,f,y=c[0],x=[];for(let _=0;_<y.length;_+=1)x[_]=Vy(Fy(c,y,_));return{c(){h=K("table"),f=K("tbody");for(let _=0;_<x.length;_+=1)x[_].c();this.h()},l(_){h=H(_,"TABLE",{class:!0});var o=X(h);f=H(o,"TBODY",{});var T=X(f);for(let k=0;k<x.length;k+=1)x[k].l(T);T.forEach(M),o.forEach(M),this.h()},h(){z(h,"class","legend svelte-1gvovsq")},m(_,o){ke(_,h,o),P(h,f);for(let T=0;T<x.length;T+=1)x[T].m(f,null)},p(_,[o]){if(o&127){y=_[0];let T;for(T=0;T<y.length;T+=1){const k=Fy(_,y,T);x[T]?x[T].p(k,o):(x[T]=Vy(k),x[T].c(),x[T].m(f,null))}for(;T<x.length;T+=1)x[T].d(1);x.length=y.length}},i:yn,o:yn,d(_){_&&M(h),yu(x,_)}}}function J0(c,h,f){let y,{data:x}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:T="ni"}=h,{topic_prev_available:k=!0}=h,{colors:B=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:R=null}=h;function U(V){let le;return R?le=(V/y*100).toFixed(R)+"%":V/y*100<1?le="<1%":le=(V/y*100).toFixed(0)+"%",le}return c.$$set=V=>{"data"in V&&f(0,x=V.data),"xKey"in V&&f(1,_=V.xKey),"yKey"in V&&f(2,o=V.yKey),"zKey"in V&&f(3,T=V.zKey),"topic_prev_available"in V&&f(4,k=V.topic_prev_available),"colors"in V&&f(5,B=V.colors),"decimals"in V&&f(7,R=V.decimals)},c.$$.update=()=>{c.$$.dirty&5&&(y=x.map(V=>V[o]).reduce((V,le)=>V+le,0)),c.$$.dirty&9&&x.map(V=>V[T]).reduce((V,le)=>V+le,0)},[x,_,o,T,k,B,U,R]}class Y0 extends Es{constructor(h){super(),Ss(this,h,J0,W0,ks,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function Ny(c){let h,f,y,x;f=new mm({props:{data:c[0],yKey:c[4],colors:c[6]}});let _=c[8]&&Uy(c);return{c(){h=K("div"),zr(f.$$.fragment),y=Le(),_&&_.c(),this.h()},l(o){h=H(o,"DIV",{class:!0,style:!0});var T=X(h);Pr(f.$$.fragment,T),y=Re(T),_&&_.l(T),T.forEach(M),this.h()},h(){z(h,"class","chart svelte-1tebgpk"),ye(h,"height",c[1]*.28+"px")},m(o,T){ke(o,h,T),Cr(f,h,null),P(h,y),_&&_.m(h,null),x=!0},p(o,T){const k={};T&1&&(k.data=o[0]),T&16&&(k.yKey=o[4]),T&64&&(k.colors=o[6]),f.$set(k),o[8]?_?_.p(o,T):(_=Uy(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null),(!x||T&2)&&ye(h,"height",o[1]*.28+"px")},i(o){x||(mt(f.$$.fragment,o),x=!0)},o(o){wt(f.$$.fragment,o),x=!1},d(o){o&&M(h),Mr(f),_&&_.d()}}}function Uy(c){let h,f;return{c(){h=K("div"),f=he(c[8]),this.h()},l(y){h=H(y,"DIV",{class:!0});var x=X(h);f=pe(x,c[8]),x.forEach(M),this.h()},h(){z(h,"class","label svelte-1tebgpk")},m(y,x){ke(y,h,x),P(h,f)},p(y,x){x&256&&gt(f,y[8])},d(y){y&&M(h)}}}function jy(c){let h,f,y,x,_,o;return f=new mm({props:{data:c[0],yKey:c[4],colors:c[6]}}),{c(){h=K("div"),zr(f.$$.fragment),y=Le(),x=K("div"),_=he("2011 comparison not available"),this.h()},l(T){h=H(T,"DIV",{class:!0,style:!0});var k=X(h);Pr(f.$$.fragment,k),y=Re(k),x=H(k,"DIV",{class:!0,style:!0});var B=X(x);_=pe(B,"2011 comparison not available"),B.forEach(M),k.forEach(M),this.h()},h(){z(x,"class","label svelte-1tebgpk"),ye(x,"background-color","#d8d8d8 "),ye(x,"color","#000000"),z(h,"class","chart svelte-1tebgpk"),ye(h,"height",c[1]*.28+"px")},m(T,k){ke(T,h,k),Cr(f,h,null),P(h,y),P(h,x),P(x,_),o=!0},p(T,k){const B={};k&1&&(B.data=T[0]),k&16&&(B.yKey=T[4]),k&64&&(B.colors=T[6]),f.$set(B),(!o||k&2)&&ye(h,"height",T[1]*.28+"px")},i(T){o||(mt(f.$$.fragment,T),o=!0)},o(T){wt(f.$$.fragment,T),o=!1},d(T){T&&M(h),Mr(f)}}}function Q0(c){let h,f,y,x,_,o,T,k;f=new mm({props:{data:c[0],yKey:c[3],colors:c[6]}});let B=(c[4]&&c[5]||c[4]=="ni")&&Ny(c),R=c[4]=="prev"&&!c[5]&&jy(c);return T=new Y0({props:{data:c[0],xKey:c[2],yKey:c[3],zKey:c[4],topic_prev_available:c[5],decimals:c[7],colors:c[6]}}),{c(){h=K("div"),zr(f.$$.fragment),y=Le(),B&&B.c(),x=Le(),R&&R.c(),_=Le(),o=K("div"),zr(T.$$.fragment),this.h()},l(U){h=H(U,"DIV",{class:!0,style:!0});var V=X(h);Pr(f.$$.fragment,V),V.forEach(M),y=Re(U),B&&B.l(U),x=Re(U),R&&R.l(U),_=Re(U),o=H(U,"DIV",{class:!0});var le=X(o);Pr(T.$$.fragment,le),le.forEach(M),this.h()},h(){z(h,"class","chart svelte-1tebgpk"),ye(h,"padding-top","3px"),ye(h,"height",(c[4]?c[1]*.72:c[1])+"px"),z(o,"class","legend svelte-1tebgpk")},m(U,V){ke(U,h,V),Cr(f,h,null),ke(U,y,V),B&&B.m(U,V),ke(U,x,V),R&&R.m(U,V),ke(U,_,V),ke(U,o,V),Cr(T,o,null),k=!0},p(U,[V]){const le={};V&1&&(le.data=U[0]),V&8&&(le.yKey=U[3]),V&64&&(le.colors=U[6]),f.$set(le),(!k||V&18)&&ye(h,"height",(U[4]?U[1]*.72:U[1])+"px"),U[4]&&U[5]||U[4]=="ni"?B?(B.p(U,V),V&48&&mt(B,1)):(B=Ny(U),B.c(),mt(B,1),B.m(x.parentNode,x)):B&&(Tl(),wt(B,1,1,()=>{B=null}),Al()),U[4]=="prev"&&!U[5]?R?(R.p(U,V),V&48&&mt(R,1)):(R=jy(U),R.c(),mt(R,1),R.m(_.parentNode,_)):R&&(Tl(),wt(R,1,1,()=>{R=null}),Al());const ee={};V&1&&(ee.data=U[0]),V&4&&(ee.xKey=U[2]),V&8&&(ee.yKey=U[3]),V&16&&(ee.zKey=U[4]),V&32&&(ee.topic_prev_available=U[5]),V&128&&(ee.decimals=U[7]),V&64&&(ee.colors=U[6]),T.$set(ee)},i(U){k||(mt(f.$$.fragment,U),mt(B),mt(R),mt(T.$$.fragment,U),k=!0)},o(U){wt(f.$$.fragment,U),wt(B),wt(R),wt(T.$$.fragment,U),k=!1},d(U){U&&M(h),Mr(f),U&&M(y),B&&B.d(U),U&&M(x),R&&R.d(U),U&&M(_),U&&M(o),Mr(T)}}}function $0(c,h,f){let{data:y}=h,{height:x=80}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:T="ni"}=h,{topic_prev_available:k=!0}=h,{colors:B=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:R=null}=h,{label:U=null}=h;return c.$$set=V=>{"data"in V&&f(0,y=V.data),"height"in V&&f(1,x=V.height),"xKey"in V&&f(2,_=V.xKey),"yKey"in V&&f(3,o=V.yKey),"zKey"in V&&f(4,T=V.zKey),"topic_prev_available"in V&&f(5,k=V.topic_prev_available),"colors"in V&&f(6,B=V.colors),"decimals"in V&&f(7,R=V.decimals),"label"in V&&f(8,U=V.label)},[y,x,_,o,T,k,B,R,U]}class Xa extends Es{constructor(h){super(),Ss(this,h,$0,Q0,ks,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function e1(c){let h,f,y,x;return{c(){h=K("div"),f=he("Back to top"),this.h()},l(_){h=H(_,"DIV",{class:!0});var o=X(h);f=pe(o,"Back to top"),o.forEach(M),this.h()},h(){z(h,"class","back_to_start svelte-11zibd5"),Wi(h,"hidden",c[0])},m(_,o){ke(_,h,o),P(h,f),y||(x=[gn(window,"scroll",c[2]),gn(h,"click",c[1])],y=!0)},p(_,[o]){o&1&&Wi(h,"hidden",_[0])},i:yn,o:yn,d(_){_&&M(h),y=!1,mu(x)}}}function t1(c,h,f){let{buttonVisibleOnPX:y=200}=h,x=!0;const _=()=>{document.body.scrollIntoView()},o=()=>document.documentElement||document.body,T=()=>{o().scrollTop>y?f(0,x=!1):f(0,x=!0)};return c.$$set=k=>{"buttonVisibleOnPX"in k&&f(3,y=k.buttonVisibleOnPX)},[x,_,T,y]}class r1 extends Es{constructor(h){super(),Ss(this,h,t1,e1,ks,{buttonVisibleOnPX:3})}}function qy(c,h,f){const y=c.slice();return y[46]=h[f],y[48]=f,y}function Zy(c,h,f){const y=c.slice();return y[49]=h[f],y[48]=f,y}function Gy(c,h,f){const y=c.slice();return y[51]=h[f],y}function Ky(c,h,f){const y=c.slice();return y[49]=h[f],y[48]=f,y}function Hy(c){let h,f,y,x,_,o,T=" &gt; ",k,B,R,U,V,le=c[1].name+"",ee,ze,ve,Ie,Ve,At,Lt,ct,Qe,Sr,ur,Jt,Et,bt,vr,Ot,kr,Ye,Qt,Wr,ri,mr,pt,rt,ir,Ri,Kn,Ti,Ei,ii,Zi,Yt,Ai,Fa,It,Pt,ni,Ir,br,Ji=" &#x24D8; ",ci,Si,jr,cr,nr,hi,pi,Yi,ai,Bi=c[1].data.population.value[2021].all.toLocaleString()+"",la,Ja,Ya,_n,kn,fi,Oi,Qi,Qa,ln,Qo=" &#x24D8; ",$i,ki,Jr,Gi,In,un,Gr,O,j,Z=c[1].data.households.value[2021].all_households.toLocaleString()+"",$,ie,de,ge,G,te,we,Ne,je,Te,qe=c[1].name+"",it,nt,Pe,Xe,Ke,Je,Ct,$e,Gt,yr,Bt,qt,Dt,gr,Ft,Dr,ar,Wt,Ht,Tr,Tn,oi=c[1].name+"",di,$a,ua,Kr,An,Fr,xr,Br,or,zi,Ii,tl=" &#x24D8; ",Fi,en,Vr,Vi,zn,Ki,eo,Pn,Ea,ca,ha,vn,to=" &#x24D8; ",Sa,Co,Cn,rl,$o,pa,Hn=(c[1].hectares>=.1?c[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",Mn,Xn,xe,Yr,Hr,hr,ro,mi,qr=" &#x24D8; ",ka,as,Mo,Ju,il,Va,mo=(c[1].data.population.value[2021].all/c[1].hectares>=.1?(c[1].data.population.value[2021].all/c[1].hectares).toFixed(1):"<0.1")+"",Bs,os,nl,Hl,Wn,tn,Ia;function gi(Ue,_t){return Ue[1].parents[0]?n1:i1}let fa=gi(c),Pi=fa(c);function es(Ue,_t){return Ue[1].type=="ni"?o1:a1}let Ta=es(c),da=Ta(c),Ni=c[1].type!="ni"&&Wy(c);function io(Ue,_t){return Ue[10]?l1:s1}let Aa=io(c),wn=Aa(c);Et=new K_({props:{search_data:c[0],group:"typestr",search:!0}}),Et.$on("select",c[16]);function Is(Ue,_t){return Ue[1].type=="ni"||Ue[1].type=="ctry"?c1:u1}let Ts=Is(c),pr=Ts(c),Jn=c[10]&&Jy(c),si=c[1].type!="ni"&&Yy(c),cn=c[10]&&c[4]&&eg(c),rn=c[1].type!="ni"&c[11]&&tg(c),_i=c[10]&&c[4]&&rg(c);function Os(Ue){c[32](Ue)}let Yn={location:{bounds:c[1].bounds},options:{fitBoundsOptions:{padding:20}},style:Xg,$$slots:{default:[T1]},$$scope:{ctx:c}};c[7]!==void 0&&(Yn.map=c[7]),Xe=new J_({props:Yn}),Ac.push(()=>Gg(Xe,"map",Os));function no(Ue,_t){return Ue[1].parents[0]?z1:A1}let Do=no(c),ao=Do(c);function ss(Ue,_t){return Ue[1].children[0]?C1:P1}let za=ss(c),Dn=za(c);function al(Ue,_t){return Ue[1].type!="ni"&Ue[1].type!="lgd"?L1:Ue[1].type!="ni"&Ue[1].type=="lgd"?D1:M1}let yo=al(c),Ln=yo(c),hn=c[1].type!="ni"&&c[11]&&og(c);const Fs=[B1,R1],wr=[];function ma(Ue,_t){return Ue[10]?0:1}return Wn=ma(c),tn=wr[Wn]=Fs[Wn](c),{c(){h=K("div"),f=K("div"),y=K("span"),x=K("a"),_=he("Home"),o=new nm(!1),k=Le(),Pi.c(),B=Le(),R=K("br"),U=Le(),V=K("span"),ee=he(le),ze=Le(),ve=K("div"),Ie=he(`Click for: 
		
					`),da.c(),Ve=Le(),Ni&&Ni.c(),At=Le(),wn.c(),Lt=Le(),ct=K("div"),Qe=K("div"),Sr=K("b"),ur=he("Search for your area:"),Jt=Le(),zr(Et.$$.fragment),bt=Le(),vr=K("script"),Ot=he(`// Share button
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button

						function copyToClipboard(text) {
							var inputc = document.body.appendChild(
								document.createElement("input")
							);
							inputc.value = window.location.href;
							inputc.select();
							document.execCommand("copy");
							inputc.parentNode.removeChild(inputc);
							alert("URL Copied.");
						}

						(function (win, doc) {
							const testButton = doc.createElement("button");
							testButton.setAttribute("type", "share");
							if (testButton.type != "share") {
								win.addEventListener("click", function (ev) {
									ev = ev || win.event;
									let target = ev.target;
									let button = target.closest(
										'button[type="share"]'
									);
									if (button) {
										const title = "Share URL";
										const url = win.location.href;
										if (navigator.share) {
											navigator.share({
												title: title,
												url: url,
											});
										} else {
											copyToClipboard();
										}
									}
								});
							}
						})(this, this.document);`),kr=Le(),Ye=K("div"),Qt=K("button"),Wr=he("Print / PDF"),ri=Le(),mr=K("button"),pt=he("Menu"),rt=Le(),ir=K("button"),Ri=he("Share"),Kn=Le(),Ti=K("div"),Ei=K("div"),ii=K("h3"),Zi=he("Overview"),Yt=Le(),pr.c(),Ai=Le(),Jn&&Jn.c(),Fa=Le(),It=K("div"),Pt=K("div"),ni=K("div"),Ir=he("Population "),br=K("span"),ci=Le(),Si=K("div"),jr=K("div"),cr=he(`Population is based on the number of usual residents. A
						usual resident is anyone who, on 21 March 2021 is in the
						UK, and staying in the UK for a period of 3 months or
						more; or has a permanent UK address and is outside the
						UK and is staying outside the UK for less than 12
						months. `),nr=K("a"),hi=K("strong"),pi=he("Statistical bulletins"),Yi=Le(),ai=K("span"),la=he(Bi),Ja=K("br"),Ya=Le(),si&&si.c(),_n=Le(),cn&&cn.c(),kn=Le(),fi=K("div"),Oi=K("div"),Qi=K("div"),Qa=he("Households"),ln=K("span"),$i=Le(),ki=K("div"),Jr=K("div"),Gi=he(`A household is either one person living alone or a group
						of people living at the same address who share cooking
						facilities and share a living room, sitting room or
						dining area. `),In=K("a"),un=K("strong"),Gr=he("Statistical bulletins"),O=Le(),j=K("span"),$=he(Z),ie=K("br"),de=Le(),rn&&rn.c(),ge=Le(),_i&&_i.c(),G=Le(),te=K("div"),we=K("div"),Ne=K("h3"),je=he("Explore "),Te=K("span"),it=he(qe),nt=Le(),Pe=K("div"),zr(Xe.$$.fragment),Je=Le(),Ct=K("div"),ao.c(),$e=Le(),Gt=K("div"),Dn.c(),Bt=Le(),qt=K("div"),Dt=K("div"),gr=K("h2"),Ft=K("button"),Dr=K("span"),ar=he("Area Information"),Wt=Le(),Ht=K("div"),Tr=K("div"),Tn=he("Census 2021 - "),di=he(oi),$a=he(" - "),ua=K("span"),Kr=he("Location, Area and Population density"),An=Le(),Fr=K("div"),xr=K("div"),Br=K("div"),or=K("div"),zi=he("Location"),Ii=K("span"),Fi=Le(),en=K("div"),Vr=K("div"),Vi=he("Information about the area including its geographical hierarchy."),zn=Le(),Ki=K("br"),Ln.c(),eo=Le(),Pn=K("div"),Ea=K("div"),ca=K("div"),ha=he("Area "),vn=K("span"),Sa=Le(),Co=K("div"),Cn=K("div"),rl=he("Area is measured in hectares (ha), it is rounded to the nearest whole number."),$o=Le(),pa=K("span"),Mn=he(Hn),Xn=he(" ha"),xe=Le(),Yr=K("div"),Hr=K("div"),hr=K("div"),ro=he("Population density"),mi=K("span"),ka=Le(),as=K("div"),Mo=K("div"),Ju=he("Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),il=Le(),Va=K("span"),Bs=he(mo),os=Le(),hn&&hn.c(),Hl=Le(),tn.c(),this.h()},l(Ue){h=H(Ue,"DIV",{class:!0});var _t=X(h);f=H(_t,"DIV",{});var Rn=X(f);y=H(Rn,"SPAN",{class:!0});var go=X(y);x=H(go,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var _o=X(x);_=pe(_o,"Home"),_o.forEach(M),o=am(go,!1),k=Re(go),Pi.l(go),B=Re(go),go.forEach(M),R=H(Rn,"BR",{}),U=Re(Rn),V=H(Rn,"SPAN",{class:!0});var Xl=X(V);ee=pe(Xl,le),Xl.forEach(M),ze=Re(Rn),ve=H(Rn,"DIV",{class:!0,style:!0});var oo=X(ve);Ie=pe(oo,`Click for: 
		
					`),da.l(oo),Ve=Re(oo),Ni&&Ni.l(oo),At=Re(oo),wn.l(oo),oo.forEach(M),Rn.forEach(M),Lt=Re(_t),ct=H(_t,"DIV",{});var Lo=X(ct);Qe=H(Lo,"DIV",{style:!0,class:!0});var ya=X(Qe);Sr=H(ya,"B",{});var Vs=X(Sr);ur=pe(Vs,"Search for your area:"),Vs.forEach(M),Jt=Re(ya),Pr(Et.$$.fragment,ya),bt=Re(ya),vr=H(ya,"SCRIPT",{});var vo=X(vr);Ot=pe(vo,`// Share button
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button

						function copyToClipboard(text) {
							var inputc = document.body.appendChild(
								document.createElement("input")
							);
							inputc.value = window.location.href;
							inputc.select();
							document.execCommand("copy");
							inputc.parentNode.removeChild(inputc);
							alert("URL Copied.");
						}

						(function (win, doc) {
							const testButton = doc.createElement("button");
							testButton.setAttribute("type", "share");
							if (testButton.type != "share") {
								win.addEventListener("click", function (ev) {
									ev = ev || win.event;
									let target = ev.target;
									let button = target.closest(
										'button[type="share"]'
									);
									if (button) {
										const title = "Share URL";
										const url = win.location.href;
										if (navigator.share) {
											navigator.share({
												title: title,
												url: url,
											});
										} else {
											copyToClipboard();
										}
									}
								});
							}
						})(this, this.document);`),vo.forEach(M),kr=Re(ya),Ye=H(ya,"DIV",{width:!0});var ts=X(Ye);Qt=H(ts,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var As=X(Qt);Wr=pe(As,"Print / PDF"),As.forEach(M),ri=Re(ts),mr=H(ts,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var so=X(mr);pt=pe(so,"Menu"),so.forEach(M),rt=Re(ts),ir=H(ts,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var ls=X(ir);Ri=pe(ls,"Share"),ls.forEach(M),ts.forEach(M),ya.forEach(M),Lo.forEach(M),_t.forEach(M),Kn=Re(Ue),Ti=H(Ue,"DIV",{id:!0,class:!0});var zs=X(Ti);Ei=H(zs,"DIV",{class:!0,style:!0});var Pa=X(Ei);ii=H(Pa,"H3",{style:!0,class:!0});var Bn=X(ii);Zi=pe(Bn,"Overview"),Bn.forEach(M),Yt=Re(Pa),pr.l(Pa),Ai=Re(Pa),Jn&&Jn.l(Pa),Pa.forEach(M),Fa=Re(zs),It=H(zs,"DIV",{class:!0});var nn=X(It);Pt=H(nn,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ol=X(Pt);ni=H(ol,"DIV",{class:!0,style:!0});var rs=X(ni);Ir=pe(rs,"Population "),br=H(rs,"SPAN",{style:!0});var gu=X(br);gu.forEach(M),rs.forEach(M),ol.forEach(M),ci=Re(nn),Si=H(nn,"DIV",{class:!0,id:!0});var _u=X(Si);jr=H(_u,"DIV",{class:!0});var Ro=X(jr);cr=pe(Ro,`Population is based on the number of usual residents. A
						usual resident is anyone who, on 21 March 2021 is in the
						UK, and staying in the UK for a period of 3 months or
						more; or has a permanent UK address and is outside the
						UK and is staying outside the UK for less than 12
						months. `),nr=H(Ro,"A",{href:!0,class:!0});var us=X(nr);hi=H(us,"STRONG",{});var Wl=X(hi);pi=pe(Wl,"Statistical bulletins"),Wl.forEach(M),us.forEach(M),Ro.forEach(M),_u.forEach(M),Yi=Re(nn),ai=H(nn,"SPAN",{class:!0,style:!0});var Ps=X(ai);la=pe(Ps,Bi),Ps.forEach(M),Ja=H(nn,"BR",{}),Ya=Re(nn),si&&si.l(nn),_n=Re(nn),cn&&cn.l(nn),nn.forEach(M),kn=Re(zs),fi=H(zs,"DIV",{class:!0});var Qn=X(fi);Oi=H(Qn,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var zl=X(Oi);Qi=H(zl,"DIV",{class:!0,style:!0});var sl=X(Qi);Qa=pe(sl,"Households"),ln=H(sl,"SPAN",{style:!0});var cs=X(ln);cs.forEach(M),sl.forEach(M),zl.forEach(M),$i=Re(Qn),ki=H(Qn,"DIV",{class:!0,id:!0});var Ns=X(ki);Jr=H(Ns,"DIV",{class:!0});var bo=X(Jr);Gi=pe(bo,`A household is either one person living alone or a group
						of people living at the same address who share cooking
						facilities and share a living room, sitting room or
						dining area. `),In=H(bo,"A",{href:!0,class:!0});var On=X(In);un=H(On,"STRONG",{});var Lr=X(un);Gr=pe(Lr,"Statistical bulletins"),Lr.forEach(M),On.forEach(M),bo.forEach(M),Ns.forEach(M),O=Re(Qn),j=H(Qn,"SPAN",{class:!0,style:!0});var ll=X(j);$=pe(ll,Z),ll.forEach(M),ie=H(Qn,"BR",{}),de=Re(Qn),rn&&rn.l(Qn),ge=Re(Qn),_i&&_i.l(Qn),Qn.forEach(M),zs.forEach(M),G=Re(Ue),te=H(Ue,"DIV",{class:!0});var En=X(te);we=H(En,"DIV",{style:!0});var Cs=X(we);Ne=H(Cs,"H3",{class:!0});var sr=X(Ne);je=pe(sr,"Explore "),Te=H(sr,"SPAN",{style:!0});var Rr=X(Te);it=pe(Rr,qe),Rr.forEach(M),sr.forEach(M),Cs.forEach(M),nt=Re(En),Pe=H(En,"DIV",{id:!0,style:!0,class:!0});var Sn=X(Pe);Pr(Xe.$$.fragment,Sn),Sn.forEach(M),Je=Re(En),Ct=H(En,"DIV",{});var Us=X(Ct);ao.l(Us),Us.forEach(M),$e=Re(En),Gt=H(En,"DIV",{});var xo=X(Gt);Dn.l(xo),xo.forEach(M),En.forEach(M),Bt=Re(Ue),qt=H(Ue,"DIV",{class:!0,id:!0});var Bo=X(qt);Dt=H(Bo,"DIV",{class:!0});var Pl=X(Dt);gr=H(Pl,"H2",{class:!0,id:!0});var vu=X(gr);Ft=H(vu,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var wo=X(Ft);Dr=H(wo,"SPAN",{class:!0});var ul=X(Dr);ar=pe(ul,"Area Information"),ul.forEach(M),wo.forEach(M),vu.forEach(M),Wt=Re(Pl),Ht=H(Pl,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Oo=X(Ht);Tr=H(Oo,"DIV",{class:!0});var Nr=X(Tr);Tn=pe(Nr,"Census 2021 - "),di=pe(Nr,oi),$a=pe(Nr," - "),ua=H(Nr,"SPAN",{class:!0});var Fo=X(ua);Kr=pe(Fo,"Location, Area and Population density"),Fo.forEach(M),An=Re(Nr),Fr=H(Nr,"DIV",{class:!0});var ga=X(Fr);xr=H(ga,"DIV",{class:!0,style:!0});var Zr=X(xr);Br=H(Zr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ht=X(Br);or=H(ht,"DIV",{class:!0,style:!0});var $n=X(or);zi=pe($n,"Location"),Ii=H($n,"SPAN",{style:!0});var is=X(Ii);is.forEach(M),$n.forEach(M),ht.forEach(M),Fi=Re(Zr),en=H(Zr,"DIV",{class:!0,id:!0});var _a=X(en);Vr=H(_a,"DIV",{class:!0});var lo=X(Vr);Vi=pe(lo,"Information about the area including its geographical hierarchy."),lo.forEach(M),_a.forEach(M),zn=Re(Zr),Ki=H(Zr,"BR",{}),Ln.l(Zr),Zr.forEach(M),eo=Re(ga),Pn=H(ga,"DIV",{class:!0});var an=X(Pn);Ea=H(an,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var cl=X(Ea);ca=H(cl,"DIV",{class:!0,style:!0});var et=X(ca);ha=pe(et,"Area "),vn=H(et,"SPAN",{style:!0});var js=X(vn);js.forEach(M),et.forEach(M),cl.forEach(M),Sa=Re(an),Co=H(an,"DIV",{class:!0,id:!0});var hl=X(Co);Cn=H(hl,"DIV",{class:!0});var Cl=X(Cn);rl=pe(Cl,"Area is measured in hectares (ha), it is rounded to the nearest whole number."),Cl.forEach(M),hl.forEach(M),$o=Re(an),pa=H(an,"SPAN",{class:!0,style:!0});var vi=X(pa);Mn=pe(vi,Hn),Xn=pe(vi," ha"),vi.forEach(M),an.forEach(M),xe=Re(ga),Yr=H(ga,"DIV",{class:!0});var li=X(Yr);Hr=H(li,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ca=X(Hr);hr=H(Ca,"DIV",{class:!0,style:!0});var Na=X(hr);ro=pe(Na,"Population density"),mi=H(Na,"SPAN",{style:!0});var Ma=X(mi);Ma.forEach(M),Na.forEach(M),Ca.forEach(M),ka=Re(li),as=H(li,"DIV",{class:!0,id:!0});var Da=X(as);Mo=H(Da,"DIV",{class:!0});var Yu=X(Mo);Ju=pe(Yu,"Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),Yu.forEach(M),Da.forEach(M),il=Re(li),Va=H(li,"SPAN",{class:!0,style:!0});var qs=X(Va);Bs=pe(qs,mo),qs.forEach(M),os=Re(li),hn&&hn.l(li),li.forEach(M),ga.forEach(M),Nr.forEach(M),Oo.forEach(M),Pl.forEach(M),Hl=Re(Bo),tn.l(Bo),Bo.forEach(M),this.h()},h(){z(x,"href",Wu+"/"),z(x,"sveltekit:noscroll",""),z(x,"class","svelte-p0yy5r"),o.a=k,z(y,"class","text-small"),z(V,"class","text-big title svelte-p0yy5r"),z(ve,"class","text-bold"),ye(ve,"font-size","0.85em"),z(Qt,"class","btn svelte-p0yy5r"),ye(Qt,"width","33%"),z(Qt,"title","Click to print this page to pdf or printer"),z(Qt,"onclick","window.print();return false;"),z(mr,"class","btn svelte-p0yy5r"),ye(mr,"width","33%"),z(mr,"alt","Return to the landing page"),z(mr,"onclick","window.location.href='"+Wu+"';"),z(ir,"class","btn svelte-p0yy5r"),ye(ir,"width","30%"),z(ir,"type","share"),z(ir,"alt","Share this page"),z(Ye,"width","100%"),ye(Qe,"width","350px"),ye(Qe,"padding-top","5px"),z(Qe,"class","svelte-p0yy5r"),Wi(Qe,"float-right",c[6]>1),z(h,"class","grid mtl svelte-p0yy5r"),ye(ii,"margin","0 0 10px 0"),ye(ii,"line-height","1.78"),z(ii,"class","svelte-p0yy5r"),z(Ei,"class","div-grey-box svelte-p0yy5r"),ye(Ei,"line-height","1.3"),ye(br,"color","gray"),ye(br,"font-size","14pt"),z(ni,"class","blocktitle"),ye(ni,"margin","0"),ye(ni,"width","100%"),z(Pt,"class","row"),ye(Pt,"display","flex"),ye(Pt,"cursor","pointer"),z(Pt,"data-bs-toggle","collapse"),z(Pt,"data-bs-target","#pop-info"),z(Pt,"aria-expanded","false"),z(Pt,"aria-controls","pop-info"),z(nr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(nr,"class","svelte-p0yy5r"),z(jr,"class","card card-body svelte-p0yy5r"),z(Si,"class","collapse svelte-p0yy5r"),z(Si,"id","pop-info"),z(ai,"class","text-big"),ye(ai,"font-size","2.8em"),z(It,"class","div-grey-box svelte-p0yy5r"),ye(ln,"color","gray"),ye(ln,"font-size","14pt"),z(Qi,"class","blocktitle"),ye(Qi,"margin","0"),ye(Qi,"width","100%"),z(Oi,"class","row"),ye(Oi,"display","flex"),ye(Oi,"cursor","pointer"),z(Oi,"data-bs-toggle","collapse"),z(Oi,"data-bs-target","#households-info"),z(Oi,"aria-expanded","false"),z(Oi,"aria-controls","households-info"),z(In,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(In,"class","svelte-p0yy5r"),z(Jr,"class","card card-body svelte-p0yy5r"),z(ki,"class","collapse svelte-p0yy5r"),z(ki,"id","households-info"),z(j,"class","text-big"),ye(j,"font-size","2.8em"),z(fi,"class","div-grey-box svelte-p0yy5r"),z(Ti,"id","grid"),z(Ti,"class","grid mt svelte-p0yy5r"),ye(Te,"color","#93328E"),z(Ne,"class","svelte-p0yy5r"),ye(we,"grid-column","span "+c[6]),z(Pe,"id","map"),ye(Pe,"padding-right","45px"),ye(Pe,"grid-column","span "+(c[6]==2?2:c[6]&&c[6]>2?c[6]-1:1)),z(Pe,"class","svelte-p0yy5r"),z(te,"class","grid mt svelte-p0yy5r"),Gu(()=>c[33].call(te)),z(Dr,"class","accordion-button-title"),z(Ft,"class","accordion-button collapsed"),z(Ft,"type","button"),z(Ft,"data-bs-toggle","collapse"),z(Ft,"data-bs-target","#panelsStayOpen-collapseZero"),z(Ft,"aria-expanded","false"),z(Ft,"aria-controls","panelsStayOpen-collapseZero"),z(gr,"class","accordion-header svelte-p0yy5r"),z(gr,"id","panelsStayOpen-headingZero"),z(ua,"class","accordion-button-title-sub"),ye(Ii,"color","gray"),ye(Ii,"font-size","14pt"),z(or,"class","blocktitle"),ye(or,"margin","0"),ye(or,"width","100%"),z(Br,"class","row"),ye(Br,"display","flex"),ye(Br,"cursor","pointer"),z(Br,"data-bs-toggle","collapse"),z(Br,"data-bs-target","#location-info"),z(Br,"aria-expanded","false"),z(Br,"aria-controls","location-info"),z(Vr,"class","card card-body svelte-p0yy5r"),z(en,"class","collapse svelte-p0yy5r"),z(en,"id","location-info"),z(xr,"class","div-grey-box svelte-p0yy5r"),ye(xr,"line-height","1.3"),ye(vn,"color","gray"),ye(vn,"font-size","14pt"),z(ca,"class","blocktitle"),ye(ca,"margin","0"),ye(ca,"width","100%"),z(Ea,"class","row"),ye(Ea,"display","flex"),ye(Ea,"cursor","pointer"),z(Ea,"data-bs-toggle","collapse"),z(Ea,"data-bs-target","#Area-info"),z(Ea,"aria-expanded","false"),z(Ea,"aria-controls","Area-info"),z(Cn,"class","card card-body svelte-p0yy5r"),z(Co,"class","collapse svelte-p0yy5r"),z(Co,"id","Area-info"),z(pa,"class","text-big"),ye(pa,"font-size","2.8em"),z(Pn,"class","div-grey-box svelte-p0yy5r"),ye(mi,"color","gray"),ye(mi,"font-size","14pt"),z(hr,"class","blocktitle"),ye(hr,"margin","0"),ye(hr,"width","100%"),z(Hr,"class","row"),ye(Hr,"display","flex"),ye(Hr,"cursor","pointer"),z(Hr,"data-bs-toggle","collapse"),z(Hr,"data-bs-target","#popden-info"),z(Hr,"aria-expanded","false"),z(Hr,"aria-controls","popden-info"),z(Mo,"class","card card-body svelte-p0yy5r"),z(as,"class","collapse svelte-p0yy5r"),z(as,"id","popden-info"),z(Va,"class","text-big"),ye(Va,"font-size","2.8em"),z(Yr,"class","div-grey-box svelte-p0yy5r"),z(Fr,"class","grid mt svelte-p0yy5r"),Gu(()=>c[34].call(Fr)),z(Tr,"class","accordion-body"),z(Ht,"id","panelsStayOpen-collapseZero"),z(Ht,"class","accordion-collapse collapse svelte-p0yy5r"),z(Ht,"aria-labelledby","panelsStayOpen-headingZero"),z(Dt,"class","accordion-item"),z(qt,"class","accordion"),z(qt,"id","accordionPanelsStayOpenExample")},m(Ue,_t){ke(Ue,h,_t),P(h,f),P(f,y),P(y,x),P(x,_),o.m(T,y),P(y,k),Pi.m(y,null),P(y,B),P(f,R),P(f,U),P(f,V),P(V,ee),P(f,ze),P(f,ve),P(ve,Ie),da.m(ve,null),P(ve,Ve),Ni&&Ni.m(ve,null),P(ve,At),wn.m(ve,null),P(h,Lt),P(h,ct),P(ct,Qe),P(Qe,Sr),P(Sr,ur),P(Qe,Jt),Cr(Et,Qe,null),P(Qe,bt),P(Qe,vr),P(vr,Ot),P(Qe,kr),P(Qe,Ye),P(Ye,Qt),P(Qt,Wr),P(Ye,ri),P(Ye,mr),P(mr,pt),P(Ye,rt),P(Ye,ir),P(ir,Ri),ke(Ue,Kn,_t),ke(Ue,Ti,_t),P(Ti,Ei),P(Ei,ii),P(ii,Zi),P(Ei,Yt),pr.m(Ei,null),P(Ei,Ai),Jn&&Jn.m(Ei,null),P(Ti,Fa),P(Ti,It),P(It,Pt),P(Pt,ni),P(ni,Ir),P(ni,br),br.innerHTML=Ji,P(It,ci),P(It,Si),P(Si,jr),P(jr,cr),P(jr,nr),P(nr,hi),P(hi,pi),P(It,Yi),P(It,ai),P(ai,la),P(It,Ja),P(It,Ya),si&&si.m(It,null),P(It,_n),cn&&cn.m(It,null),P(Ti,kn),P(Ti,fi),P(fi,Oi),P(Oi,Qi),P(Qi,Qa),P(Qi,ln),ln.innerHTML=Qo,P(fi,$i),P(fi,ki),P(ki,Jr),P(Jr,Gi),P(Jr,In),P(In,un),P(un,Gr),P(fi,O),P(fi,j),P(j,$),P(fi,ie),P(fi,de),rn&&rn.m(fi,null),P(fi,ge),_i&&_i.m(fi,null),ke(Ue,G,_t),ke(Ue,te,_t),P(te,we),P(we,Ne),P(Ne,je),P(Ne,Te),P(Te,it),P(te,nt),P(te,Pe),Cr(Xe,Pe,null),P(te,Je),P(te,Ct),ao.m(Ct,null),P(te,$e),P(te,Gt),Dn.m(Gt,null),yr=Ku(te,c[33].bind(te)),ke(Ue,Bt,_t),ke(Ue,qt,_t),P(qt,Dt),P(Dt,gr),P(gr,Ft),P(Ft,Dr),P(Dr,ar),P(Dt,Wt),P(Dt,Ht),P(Ht,Tr),P(Tr,Tn),P(Tr,di),P(Tr,$a),P(Tr,ua),P(ua,Kr),P(Tr,An),P(Tr,Fr),P(Fr,xr),P(xr,Br),P(Br,or),P(or,zi),P(or,Ii),Ii.innerHTML=tl,P(xr,Fi),P(xr,en),P(en,Vr),P(Vr,Vi),P(xr,zn),P(xr,Ki),Ln.m(xr,null),P(Fr,eo),P(Fr,Pn),P(Pn,Ea),P(Ea,ca),P(ca,ha),P(ca,vn),vn.innerHTML=to,P(Pn,Sa),P(Pn,Co),P(Co,Cn),P(Cn,rl),P(Pn,$o),P(Pn,pa),P(pa,Mn),P(pa,Xn),P(Fr,xe),P(Fr,Yr),P(Yr,Hr),P(Hr,hr),P(hr,ro),P(hr,mi),mi.innerHTML=qr,P(Yr,ka),P(Yr,as),P(as,Mo),P(Mo,Ju),P(Yr,il),P(Yr,Va),P(Va,Bs),P(Yr,os),hn&&hn.m(Yr,null),nl=Ku(Fr,c[34].bind(Fr)),P(qt,Hl),wr[Wn].m(qt,null),Ia=!0},p(Ue,_t){fa===(fa=gi(Ue))&&Pi?Pi.p(Ue,_t):(Pi.d(1),Pi=fa(Ue),Pi&&(Pi.c(),Pi.m(y,B))),(!Ia||_t[0]&2)&&le!==(le=Ue[1].name+"")&&gt(ee,le),Ta===(Ta=es(Ue))&&da?da.p(Ue,_t):(da.d(1),da=Ta(Ue),da&&(da.c(),da.m(ve,Ve))),Ue[1].type!="ni"?Ni?Ni.p(Ue,_t):(Ni=Wy(Ue),Ni.c(),Ni.m(ve,At)):Ni&&(Ni.d(1),Ni=null),Aa===(Aa=io(Ue))&&wn?wn.p(Ue,_t):(wn.d(1),wn=Aa(Ue),wn&&(wn.c(),wn.m(ve,null)));const Rn={};_t[0]&1&&(Rn.search_data=Ue[0]),Et.$set(Rn),_t[0]&64&&Wi(Qe,"float-right",Ue[6]>1),Ts===(Ts=Is(Ue))&&pr?pr.p(Ue,_t):(pr.d(1),pr=Ts(Ue),pr&&(pr.c(),pr.m(Ei,Ai))),Ue[10]?Jn?Jn.p(Ue,_t):(Jn=Jy(Ue),Jn.c(),Jn.m(Ei,null)):Jn&&(Jn.d(1),Jn=null),(!Ia||_t[0]&2)&&Bi!==(Bi=Ue[1].data.population.value[2021].all.toLocaleString()+"")&&gt(la,Bi),Ue[1].type!="ni"?si?(si.p(Ue,_t),_t[0]&2&&mt(si,1)):(si=Yy(Ue),si.c(),mt(si,1),si.m(It,_n)):si&&(Tl(),wt(si,1,1,()=>{si=null}),Al()),Ue[10]&&Ue[4]?cn?(cn.p(Ue,_t),_t[0]&1040&&mt(cn,1)):(cn=eg(Ue),cn.c(),mt(cn,1),cn.m(It,null)):cn&&(Tl(),wt(cn,1,1,()=>{cn=null}),Al()),(!Ia||_t[0]&2)&&Z!==(Z=Ue[1].data.households.value[2021].all_households.toLocaleString()+"")&&gt($,Z),Ue[1].type!="ni"&Ue[11]?rn?(rn.p(Ue,_t),_t[0]&2050&&mt(rn,1)):(rn=tg(Ue),rn.c(),mt(rn,1),rn.m(fi,ge)):rn&&(Tl(),wt(rn,1,1,()=>{rn=null}),Al()),Ue[10]&&Ue[4]?_i?(_i.p(Ue,_t),_t[0]&1040&&mt(_i,1)):(_i=rg(Ue),_i.c(),mt(_i,1),_i.m(fi,null)):_i&&(Tl(),wt(_i,1,1,()=>{_i=null}),Al()),(!Ia||_t[0]&2)&&qe!==(qe=Ue[1].name+"")&&gt(it,qe),(!Ia||_t[0]&64)&&ye(we,"grid-column","span "+Ue[6]);const go={};_t[0]&2&&(go.location={bounds:Ue[1].bounds}),_t[0]&768|_t[1]&16777216&&(go.$$scope={dirty:_t,ctx:Ue}),!Ke&&_t[0]&128&&(Ke=!0,go.map=Ue[7],Kg(()=>Ke=!1)),Xe.$set(go),(!Ia||_t[0]&64)&&ye(Pe,"grid-column","span "+(Ue[6]==2?2:Ue[6]&&Ue[6]>2?Ue[6]-1:1)),Do===(Do=no(Ue))&&ao?ao.p(Ue,_t):(ao.d(1),ao=Do(Ue),ao&&(ao.c(),ao.m(Ct,null))),za===(za=ss(Ue))&&Dn?Dn.p(Ue,_t):(Dn.d(1),Dn=za(Ue),Dn&&(Dn.c(),Dn.m(Gt,null))),(!Ia||_t[0]&2)&&oi!==(oi=Ue[1].name+"")&&gt(di,oi),yo===(yo=al(Ue))&&Ln?Ln.p(Ue,_t):(Ln.d(1),Ln=yo(Ue),Ln&&(Ln.c(),Ln.m(xr,null))),(!Ia||_t[0]&2)&&Hn!==(Hn=(Ue[1].hectares>=.1?Ue[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&gt(Mn,Hn),(!Ia||_t[0]&2)&&mo!==(mo=(Ue[1].data.population.value[2021].all/Ue[1].hectares>=.1?(Ue[1].data.population.value[2021].all/Ue[1].hectares).toFixed(1):"<0.1")+"")&&gt(Bs,mo),Ue[1].type!="ni"&&Ue[11]?hn?hn.p(Ue,_t):(hn=og(Ue),hn.c(),hn.m(Yr,null)):hn&&(hn.d(1),hn=null);let _o=Wn;Wn=ma(Ue),Wn===_o?wr[Wn].p(Ue,_t):(Tl(),wt(wr[_o],1,1,()=>{wr[_o]=null}),Al(),tn=wr[Wn],tn?tn.p(Ue,_t):(tn=wr[Wn]=Fs[Wn](Ue),tn.c()),mt(tn,1),tn.m(qt,null))},i(Ue){Ia||(mt(Et.$$.fragment,Ue),mt(si),mt(cn),mt(rn),mt(_i),mt(Xe.$$.fragment,Ue),mt(tn),Ia=!0)},o(Ue){wt(Et.$$.fragment,Ue),wt(si),wt(cn),wt(rn),wt(_i),wt(Xe.$$.fragment,Ue),wt(tn),Ia=!1},d(Ue){Ue&&M(h),Pi.d(),da.d(),Ni&&Ni.d(),wn.d(),Mr(Et),Ue&&M(Kn),Ue&&M(Ti),pr.d(),Jn&&Jn.d(),si&&si.d(),cn&&cn.d(),rn&&rn.d(),_i&&_i.d(),Ue&&M(G),Ue&&M(te),Mr(Xe),ao.d(),Dn.d(),yr(),Ue&&M(Bt),Ue&&M(qt),Ln.d(),hn&&hn.d(),nl(),wr[Wn].d()}}}function i1(c){let h=c[1].name+"",f;return{c(){f=he(h)},l(y){f=pe(y,h)},m(y,x){ke(y,f,x)},p(y,x){x[0]&2&&h!==(h=y[1].name+"")&&gt(f,h)},d(y){y&&M(f)}}}function n1(c){let h,f=c[1].name+"",y,x=[...c[1].parents].reverse(),_=[];for(let o=0;o<x.length;o+=1)_[o]=Xy(Ky(c,x,o));return{c(){for(let o=0;o<_.length;o+=1)_[o].c();h=Le(),y=he(f)},l(o){for(let T=0;T<_.length;T+=1)_[T].l(o);h=Re(o),y=pe(o,f)},m(o,T){for(let k=0;k<_.length;k+=1)_[k].m(o,T);ke(o,h,T),ke(o,y,T)},p(o,T){if(T[0]&2){x=[...o[1].parents].reverse();let k;for(k=0;k<x.length;k+=1){const B=Ky(o,x,k);_[k]?_[k].p(B,T):(_[k]=Xy(B),_[k].c(),_[k].m(h.parentNode,h))}for(;k<_.length;k+=1)_[k].d(1);_.length=x.length}T[0]&2&&f!==(f=o[1].name+"")&&gt(y,f)},d(o){yu(_,o),o&&M(h),o&&M(y)}}}function Xy(c){let h,f=c[49].name+"",y,x,_,o=" &gt; ",T;return{c(){h=K("a"),y=he(f),_=new nm(!1),T=sa(),this.h()},l(k){h=H(k,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var B=X(h);y=pe(B,f),B.forEach(M),_=am(k,!1),T=sa(),this.h()},h(){z(h,"href",x=Wu+"/"+c[49].code+"/"),z(h,"sveltekit:noscroll",""),z(h,"class","svelte-p0yy5r"),_.a=T},m(k,B){ke(k,h,B),P(h,y),_.m(o,k,B),ke(k,T,B)},p(k,B){B[0]&2&&f!==(f=k[49].name+"")&&gt(y,f),B[0]&2&&x!==(x=Wu+"/"+k[49].code+"/")&&z(h,"href",x)},d(k){k&&M(h),k&&M(T),k&&_.d()}}}function a1(c){let h,f,y,x;return{c(){h=K("button"),f=he("No comparison"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var o=X(h);f=pe(o,"No comparison"),o.forEach(M),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),Wi(h,"btn-active",c[5])},m(_,o){ke(_,h,o),P(h,f),y||(x=[gn(h,"click",c[20]),gn(h,"click",c[21]),gn(h,"click",c[22])],y=!0)},p(_,o){o[0]&32&&Wi(h,"btn-active",_[5])},d(_){_&&M(h),y=!1,mu(x)}}}function o1(c){let h,f,y,x;return{c(){h=K("button"),f=he("No comparison"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var o=X(h);f=pe(o,"No comparison"),o.forEach(M),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),Wi(h,"btn-active",!c[4])},m(_,o){ke(_,h,o),P(h,f),y||(x=[gn(h,"click",c[17]),gn(h,"click",c[18]),gn(h,"click",c[19])],y=!0)},p(_,o){o[0]&16&&Wi(h,"btn-active",!_[4])},d(_){_&&M(h),y=!1,mu(x)}}}function Wy(c){let h,f,y,x;return{c(){h=K("button"),f=he("NI 2021"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var o=X(h);f=pe(o,"NI 2021"),o.forEach(M),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),Wi(h,"btn-active",c[11]&!c[5]&!c[4])},m(_,o){ke(_,h,o),P(h,f),y||(x=[gn(h,"click",c[23]),gn(h,"click",c[24]),gn(h,"click",c[25])],y=!0)},p(_,o){o[0]&2096&&Wi(h,"btn-active",_[11]&!_[5]&!_[4])},d(_){_&&M(h),y=!1,mu(x)}}}function s1(c){let h,f,y,x;return{c(){h=K("button"),f=he("2011 data not available"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var o=X(h);f=pe(o,"2011 data not available"),o.forEach(M),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),Wi(h,"btn-active",c[4]&!c[5]&!c[11])},m(_,o){ke(_,h,o),P(h,f),y||(x=[gn(h,"click",c[29]),gn(h,"click",c[30]),gn(h,"click",c[31])],y=!0)},p(_,o){o[0]&2096&&Wi(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&M(h),y=!1,mu(x)}}}function l1(c){let h,f,y,x;return{c(){h=K("button"),f=he("Same area 2011"),this.h()},l(_){h=H(_,"BUTTON",{class:!0});var o=X(h);f=pe(o,"Same area 2011"),o.forEach(M),this.h()},h(){z(h,"class","btn svelte-p0yy5r"),Wi(h,"btn-active",c[4]&!c[5]&!c[11])},m(_,o){ke(_,h,o),P(h,f),y||(x=[gn(h,"click",c[26]),gn(h,"click",c[27]),gn(h,"click",c[28])],y=!0)},p(_,o){o[0]&2096&&Wi(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&M(h),y=!1,mu(x)}}}function u1(c){let h,f=c[1].name+"",y,x,_=c[1].data.population.value[2021].all.toLocaleString()+"",o,T,k;function B(V,le){return V[1].data.population.value_rank[2021].all==1?d1:V[1].data.population.value_rank[2021].all==V[1].count?f1:V[1].data.population.value_rank[2021].all<=(V[1].count+1)/2&&V[1].data.population.value_rank[2021].all!=1?p1:h1}let R=B(c),U=R(c);return{c(){h=he("The population of "),y=he(f),x=he(" was "),o=he(_),T=he(` at the time of the 2021 Census, which
					made it the
					`),U.c(),k=sa()},l(V){h=pe(V,"The population of "),y=pe(V,f),x=pe(V," was "),o=pe(V,_),T=pe(V,` at the time of the 2021 Census, which
					made it the
					`),U.l(V),k=sa()},m(V,le){ke(V,h,le),ke(V,y,le),ke(V,x,le),ke(V,o,le),ke(V,T,le),U.m(V,le),ke(V,k,le)},p(V,le){le[0]&2&&f!==(f=V[1].name+"")&&gt(y,f),le[0]&2&&_!==(_=V[1].data.population.value[2021].all.toLocaleString()+"")&&gt(o,_),R===(R=B(V))&&U?U.p(V,le):(U.d(1),U=R(V),U&&(U.c(),U.m(k.parentNode,k)))},d(V){V&&M(h),V&&M(y),V&&M(x),V&&M(o),V&&M(T),U.d(V),V&&M(k)}}}function c1(c){let h,f=c[1].name+"",y,x,_=c[1].data.population.value[2021].all.toLocaleString()+"",o,T;return{c(){h=he("The population of "),y=he(f),x=he(" was "),o=he(_),T=he(" at the time of the 2021 Census.")},l(k){h=pe(k,"The population of "),y=pe(k,f),x=pe(k," was "),o=pe(k,_),T=pe(k," at the time of the 2021 Census.")},m(k,B){ke(k,h,B),ke(k,y,B),ke(k,x,B),ke(k,o,B),ke(k,T,B)},p(k,B){B[0]&2&&f!==(f=k[1].name+"")&&gt(y,f),B[0]&2&&_!==(_=k[1].data.population.value[2021].all.toLocaleString()+"")&&gt(o,_)},d(k){k&&M(h),k&&M(y),k&&M(x),k&&M(o),k&&M(T)}}}function h1(c){let h=(c[1].count+1-c[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=Xc(c[1].count+1-c[1].data.population.value_rank[2021].all)+"",x,_,o=wa[c[1].type].name+"",T,k;return{c(){f=he(h),x=he(y),_=he(" smallest "),T=he(o),k=he(".")},l(B){f=pe(B,h),x=pe(B,y),_=pe(B," smallest "),T=pe(B,o),k=pe(B,".")},m(B,R){ke(B,f,R),ke(B,x,R),ke(B,_,R),ke(B,T,R),ke(B,k,R)},p(B,R){R[0]&2&&h!==(h=(B[1].count+1-B[1].data.population.value_rank[2021].all).toLocaleString()+"")&&gt(f,h),R[0]&2&&y!==(y=Xc(B[1].count+1-B[1].data.population.value_rank[2021].all)+"")&&gt(x,y),R[0]&2&&o!==(o=wa[B[1].type].name+"")&&gt(T,o)},d(B){B&&M(f),B&&M(x),B&&M(_),B&&M(T),B&&M(k)}}}function p1(c){let h=c[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=Xc(c[1].data.population.value_rank[2021].all)+"",x,_,o=wa[c[1].type].name+"",T,k;return{c(){f=he(h),x=he(y),_=he(" largest "),T=he(o),k=he(".")},l(B){f=pe(B,h),x=pe(B,y),_=pe(B," largest "),T=pe(B,o),k=pe(B,".")},m(B,R){ke(B,f,R),ke(B,x,R),ke(B,_,R),ke(B,T,R),ke(B,k,R)},p(B,R){R[0]&2&&h!==(h=B[1].data.population.value_rank[2021].all.toLocaleString()+"")&&gt(f,h),R[0]&2&&y!==(y=Xc(B[1].data.population.value_rank[2021].all)+"")&&gt(x,y),R[0]&2&&o!==(o=wa[B[1].type].name+"")&&gt(T,o)},d(B){B&&M(f),B&&M(x),B&&M(_),B&&M(T),B&&M(k)}}}function f1(c){let h,f=wa[c[1].type].name+"",y,x;return{c(){h=he("smallest "),y=he(f),x=he(".")},l(_){h=pe(_,"smallest "),y=pe(_,f),x=pe(_,".")},m(_,o){ke(_,h,o),ke(_,y,o),ke(_,x,o)},p(_,o){o[0]&2&&f!==(f=wa[_[1].type].name+"")&&gt(y,f)},d(_){_&&M(h),_&&M(y),_&&M(x)}}}function d1(c){let h,f=wa[c[1].type].name+"",y,x;return{c(){h=he("largest "),y=he(f),x=he(".")},l(_){h=pe(_,"largest "),y=pe(_,f),x=pe(_,".")},m(_,o){ke(_,h,o),ke(_,y,o),ke(_,x,o)},p(_,o){o[0]&2&&f!==(f=wa[_[1].type].name+"")&&gt(y,f)},d(_){_&&M(h),_&&M(y),_&&M(x)}}}function Jy(c){let h;function f(_,o){return _[1].data.population.value.change.all==0?g1:_[1].data.population.value.change.all>0?y1:m1}let y=f(c),x=y(c);return{c(){x.c(),h=sa()},l(_){x.l(_),h=sa()},m(_,o){x.m(_,o),ke(_,h,o)},p(_,o){y===(y=f(_))&&x?x.p(_,o):(x.d(1),x=y(_),x&&(x.c(),x.m(h.parentNode,h)))},d(_){x.d(_),_&&M(h)}}}function m1(c){let h,f=Wc(c[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=he("A decrease of "),y=he(f),x=he(" since the 2011 Census.")},l(_){h=pe(_,"A decrease of "),y=pe(_,f),x=pe(_," since the 2011 Census.")},m(_,o){ke(_,h,o),ke(_,y,o),ke(_,x,o)},p(_,o){o[0]&2&&f!==(f=Wc(_[1].data.population.value.change.all,"%",1)+"")&&gt(y,f)},d(_){_&&M(h),_&&M(y),_&&M(x)}}}function y1(c){let h,f=Wc(c[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=he("An increase of "),y=he(f),x=he(" since the 2011 Census.")},l(_){h=pe(_,"An increase of "),y=pe(_,f),x=pe(_," since the 2011 Census.")},m(_,o){ke(_,h,o),ke(_,y,o),ke(_,x,o)},p(_,o){o[0]&2&&f!==(f=Wc(_[1].data.population.value.change.all,"%",1)+"")&&gt(y,f)},d(_){_&&M(h),_&&M(y),_&&M(x)}}}function g1(c){let h;return{c(){h=he("No change in population since the 2011 Census.")},l(f){h=pe(f,"No change in population since the 2011 Census.")},m(f,y){ke(f,h,y)},p:yn,d(f){f&&M(h)}}}function Yy(c){let h,f,y=c[1].type!="ctry"&c[11]&!c[4]&&Qy(c);return{c(){y&&y.c(),h=sa()},l(x){y&&y.l(x),h=sa()},m(x,_){y&&y.m(x,_),ke(x,h,_),f=!0},p(x,_){x[1].type!="ctry"&x[11]&!x[4]?y?(y.p(x,_),_[0]&2066&&mt(y,1)):(y=Qy(x),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(Tl(),wt(y,1,1,()=>{y=null}),Al())},i(x){f||(mt(y),f=!0)},o(x){wt(y),f=!1},d(x){y&&y.d(x),x&&M(h)}}}function Qy(c){let h,f,y,x,_,o;f=new Ed({props:{$$slots:{default:[_1]},$$scope:{ctx:c}}});let T=c[1].type=="lgd"&&$y(c);return{c(){h=K("span"),zr(f.$$.fragment),y=he(" of Northern Ireland population"),x=Le(),_=K("div"),T&&T.c(),this.h()},l(k){h=H(k,"SPAN",{class:!0});var B=X(h);Pr(f.$$.fragment,B),y=pe(B," of Northern Ireland population"),B.forEach(M),x=Re(k),_=H(k,"DIV",{class:!0});var R=X(_);T&&T.l(R),R.forEach(M),this.h()},h(){z(h,"class","text-small "),z(_,"class","text-small ")},m(k,B){ke(k,h,B),Cr(f,h,null),P(h,y),ke(k,x,B),ke(k,_,B),T&&T.m(_,null),o=!0},p(k,B){const R={};B[0]&6|B[1]&16777216&&(R.$$scope={dirty:B,ctx:k}),f.$set(R),k[1].type=="lgd"?T?T.p(k,B):(T=$y(k),T.c(),T.m(_,null)):T&&(T.d(1),T=null)},i(k){o||(mt(f.$$.fragment,k),o=!0)},o(k){wt(f.$$.fragment,k),o=!1},d(k){k&&M(h),Mr(f),k&&M(x),k&&M(_),T&&T.d()}}}function _1(c){let h=(c[1].data.population.value[2021].all/c[2].data.population.value[2021].all>=.001?(c[1].data.population.value[2021].all/c[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=he(h),y=he("%")},l(x){f=pe(x,h),y=pe(x,"%")},m(x,_){ke(x,f,_),ke(x,y,_)},p(x,_){_[0]&6&&h!==(h=(x[1].data.population.value[2021].all/x[2].data.population.value[2021].all>=.001?(x[1].data.population.value[2021].all/x[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&gt(f,h)},d(x){x&&M(f),x&&M(y)}}}function $y(c){let h,f=c[1].count.toLocaleString()+"",y,x,_=wa[c[1].type].pl+"",o;function T(R,U){return R[1].data.population.value_rank[2021].all==1?w1:R[1].data.population.value_rank[2021].all==R[1].count?x1:R[1].data.population.value_rank[2021].all<=(R[1].count+1)/2&&R[1].data.population.value_rank[2021].all!=1?b1:v1}let k=T(c),B=k(c);return{c(){B.c(),h=he(`
							population of `),y=he(f),x=Le(),o=he(_)},l(R){B.l(R),h=pe(R,`
							population of `),y=pe(R,f),x=Re(R),o=pe(R,_)},m(R,U){B.m(R,U),ke(R,h,U),ke(R,y,U),ke(R,x,U),ke(R,o,U)},p(R,U){k===(k=T(R))&&B?B.p(R,U):(B.d(1),B=k(R),B&&(B.c(),B.m(h.parentNode,h))),U[0]&2&&f!==(f=R[1].count.toLocaleString()+"")&&gt(y,f),U[0]&2&&_!==(_=wa[R[1].type].pl+"")&&gt(o,_)},d(R){B.d(R),R&&M(h),R&&M(y),R&&M(x),R&&M(o)}}}function v1(c){let h=(c[1].count+1-c[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=Xc(c[1].count+1-c[1].data.population.value_rank[2021].all)+"",x,_;return{c(){f=he(h),x=he(y),_=he(" smallest")},l(o){f=pe(o,h),x=pe(o,y),_=pe(o," smallest")},m(o,T){ke(o,f,T),ke(o,x,T),ke(o,_,T)},p(o,T){T[0]&2&&h!==(h=(o[1].count+1-o[1].data.population.value_rank[2021].all).toLocaleString()+"")&&gt(f,h),T[0]&2&&y!==(y=Xc(o[1].count+1-o[1].data.population.value_rank[2021].all)+"")&&gt(x,y)},d(o){o&&M(f),o&&M(x),o&&M(_)}}}function b1(c){let h=c[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=Xc(c[1].data.population.value_rank[2021].all)+"",x,_;return{c(){f=he(h),x=he(y),_=he(" largest")},l(o){f=pe(o,h),x=pe(o,y),_=pe(o," largest")},m(o,T){ke(o,f,T),ke(o,x,T),ke(o,_,T)},p(o,T){T[0]&2&&h!==(h=o[1].data.population.value_rank[2021].all.toLocaleString()+"")&&gt(f,h),T[0]&2&&y!==(y=Xc(o[1].data.population.value_rank[2021].all)+"")&&gt(x,y)},d(o){o&&M(f),o&&M(x),o&&M(_)}}}function x1(c){let h;return{c(){h=he("The smallest")},l(f){h=pe(f,"The smallest")},m(f,y){ke(f,h,y)},p:yn,d(f){f&&M(h)}}}function w1(c){let h;return{c(){h=he("The largest")},l(f){h=pe(f,"The largest")},m(f,y){ke(f,h,y)},p:yn,d(f){f&&M(h)}}}function eg(c){let h,f,y,x;return f=new Ed({props:{$$slots:{default:[E1]},$$scope:{ctx:c}}}),{c(){h=K("span"),zr(f.$$.fragment),y=he(" since 2011 Census"),this.h()},l(_){h=H(_,"SPAN",{class:!0});var o=X(h);Pr(f.$$.fragment,o),y=pe(o," since 2011 Census"),o.forEach(M),this.h()},h(){z(h,"class","text-small ")},m(_,o){ke(_,h,o),Cr(f,h,null),P(h,y),x=!0},p(_,o){const T={};o[0]&2|o[1]&16777216&&(T.$$scope={dirty:o,ctx:_}),f.$set(T)},i(_){x||(mt(f.$$.fragment,_),x=!0)},o(_){wt(f.$$.fragment,_),x=!1},d(_){_&&M(h),Mr(f)}}}function E1(c){let h,f=Wc(c[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=K("span"),y=he(f),this.h()},l(_){h=H(_,"SPAN",{class:!0});var o=X(h);y=pe(o,f),o.forEach(M),this.h()},h(){z(h,"class",x=hd(fd(c[1].data.population.value.change.all))+" svelte-p0yy5r")},m(_,o){ke(_,h,o),P(h,y)},p(_,o){o[0]&2&&f!==(f=Wc(_[1].data.population.value.change.all,"%",1)+"")&&gt(y,f),o[0]&2&&x!==(x=hd(fd(_[1].data.population.value.change.all))+" svelte-p0yy5r")&&z(h,"class",x)},d(_){_&&M(h)}}}function tg(c){let h,f,y,x;return f=new Ed({props:{$$slots:{default:[S1]},$$scope:{ctx:c}}}),{c(){h=K("span"),zr(f.$$.fragment),y=he(" of Northern Ireland households"),this.h()},l(_){h=H(_,"SPAN",{class:!0});var o=X(h);Pr(f.$$.fragment,o),y=pe(o," of Northern Ireland households"),o.forEach(M),this.h()},h(){z(h,"class","text-small")},m(_,o){ke(_,h,o),Cr(f,h,null),P(h,y),x=!0},p(_,o){const T={};o[0]&6|o[1]&16777216&&(T.$$scope={dirty:o,ctx:_}),f.$set(T)},i(_){x||(mt(f.$$.fragment,_),x=!0)},o(_){wt(f.$$.fragment,_),x=!1},d(_){_&&M(h),Mr(f)}}}function S1(c){let h=(c[1].data.households.value[2021].all_households/c[2].data.households.value[2021].all_households>=.001?(c[1].data.households.value[2021].all_households/c[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=he(h),y=he("%")},l(x){f=pe(x,h),y=pe(x,"%")},m(x,_){ke(x,f,_),ke(x,y,_)},p(x,_){_[0]&6&&h!==(h=(x[1].data.households.value[2021].all_households/x[2].data.households.value[2021].all_households>=.001?(x[1].data.households.value[2021].all_households/x[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&gt(f,h)},d(x){x&&M(f),x&&M(y)}}}function rg(c){let h,f,y,x;return f=new Ed({props:{$$slots:{default:[k1]},$$scope:{ctx:c}}}),{c(){h=K("span"),zr(f.$$.fragment),y=he(" since 2011 Census"),this.h()},l(_){h=H(_,"SPAN",{class:!0});var o=X(h);Pr(f.$$.fragment,o),y=pe(o," since 2011 Census"),o.forEach(M),this.h()},h(){z(h,"class","text-small")},m(_,o){ke(_,h,o),Cr(f,h,null),P(h,y),x=!0},p(_,o){const T={};o[0]&2|o[1]&16777216&&(T.$$scope={dirty:o,ctx:_}),f.$set(T)},i(_){x||(mt(f.$$.fragment,_),x=!0)},o(_){wt(f.$$.fragment,_),x=!1},d(_){_&&M(h),Mr(f)}}}function k1(c){let h,f=Wc(c[1].data.households.value.change.all_households,"%",1)+"",y,x;return{c(){h=K("span"),y=he(f),this.h()},l(_){h=H(_,"SPAN",{class:!0});var o=X(h);y=pe(o,f),o.forEach(M),this.h()},h(){z(h,"class",x=hd(fd(c[1].data.households.value.change.all_households))+" svelte-p0yy5r")},m(_,o){ke(_,h,o),P(h,y)},p(_,o){o[0]&2&&f!==(f=Wc(_[1].data.households.value.change.all_households,"%",1)+"")&&gt(y,f),o[0]&2&&x!==(x=hd(fd(_[1].data.households.value.change.all_households))+" svelte-p0yy5r")&&z(h,"class",x)},d(_){_&&M(h)}}}function I1(c){let h,f,y,x,_,o,T;const k=[Hc[c[51]],{id:c[51]+"-fill"},{type:"fill"},{isChild:c[9][c[51]]},{click:!0},{selected:c[8].selected},{highlight:!0},{highlighted:c[8].highlighted},{hover:!0},{hovered:c[8].hovered},{layout:{visibility:c[8].type==c[51]||c[8].childType==c[51]?"visible":"none"}},{paint:c[8].type==c[51]?Wa["fill-self"]:c[8].childType==c[51]?Wa["fill-child"]:Wa.fill}];let B={};for(let ee=0;ee<k.length;ee+=1)B=od(B,k[ee]);h=new Hd({props:B}),h.$on("select",c[15]);const R=[Hc[c[51]],{id:c[51]+"-bounds"},{type:"line"},{selected:c[8].selected},{highlight:!0},{highlighted:c[8].highlighted},{layout:{visibility:c[8].type==c[51]||c[8].childType==c[51]?"visible":"none"}},{paint:c[8].type==c[51]?Wa["line-active"]:c[8].childType==c[51]?Wa["line-child"]:Wa.line}];let U={};for(let ee=0;ee<R.length;ee+=1)U=od(U,R[ee]);y=new Hd({props:U});const V=[Hc[c[51]],{id:c[51]+"-self"},{type:"line"},{selected:c[8].selected},{layout:{visibility:c[8].type==c[51]?"visible":"none"}},{paint:c[8].type==c[51]?Wa["line-self"]:Wa.line}];let le={};for(let ee=0;ee<V.length;ee+=1)le=od(le,V[ee]);return _=new Hd({props:le}),{c(){zr(h.$$.fragment),f=Le(),zr(y.$$.fragment),x=Le(),zr(_.$$.fragment),o=Le()},l(ee){Pr(h.$$.fragment,ee),f=Re(ee),Pr(y.$$.fragment,ee),x=Re(ee),Pr(_.$$.fragment,ee),o=Re(ee)},m(ee,ze){Cr(h,ee,ze),ke(ee,f,ze),Cr(y,ee,ze),ke(ee,x,ze),Cr(_,ee,ze),ke(ee,o,ze),T=!0},p(ee,ze){const ve=ze[0]&768?sd(k,[ze&0&&ld(Hc[ee[51]]),k[1],k[2],ze[0]&512&&{isChild:ee[9][ee[51]]},k[4],ze[0]&256&&{selected:ee[8].selected},k[6],ze[0]&256&&{highlighted:ee[8].highlighted},k[8],ze[0]&256&&{hovered:ee[8].hovered},ze[0]&256&&{layout:{visibility:ee[8].type==ee[51]||ee[8].childType==ee[51]?"visible":"none"}},ze[0]&256&&{paint:ee[8].type==ee[51]?Wa["fill-self"]:ee[8].childType==ee[51]?Wa["fill-child"]:Wa.fill}]):{};h.$set(ve);const Ie=ze[0]&256?sd(R,[ze&0&&ld(Hc[ee[51]]),R[1],R[2],ze[0]&256&&{selected:ee[8].selected},R[4],ze[0]&256&&{highlighted:ee[8].highlighted},ze[0]&256&&{layout:{visibility:ee[8].type==ee[51]||ee[8].childType==ee[51]?"visible":"none"}},ze[0]&256&&{paint:ee[8].type==ee[51]?Wa["line-active"]:ee[8].childType==ee[51]?Wa["line-child"]:Wa.line}]):{};y.$set(Ie);const Ve=ze[0]&256?sd(V,[ze&0&&ld(Hc[ee[51]]),V[1],V[2],ze[0]&256&&{selected:ee[8].selected},ze[0]&256&&{layout:{visibility:ee[8].type==ee[51]?"visible":"none"}},ze[0]&256&&{paint:ee[8].type==ee[51]?Wa["line-self"]:Wa.line}]):{};_.$set(Ve)},i(ee){T||(mt(h.$$.fragment,ee),mt(y.$$.fragment,ee),mt(_.$$.fragment,ee),T=!0)},o(ee){wt(h.$$.fragment,ee),wt(y.$$.fragment,ee),wt(_.$$.fragment,ee),T=!1},d(ee){Mr(h,ee),ee&&M(f),Mr(y,ee),ee&&M(x),Mr(_,ee),ee&&M(o)}}}function ig(c){let h,f;const y=[jm[c[51]]];let x={$$slots:{default:[I1]},$$scope:{ctx:c}};for(let _=0;_<y.length;_+=1)x=od(x,y[_]);return h=new $_({props:x}),{c(){zr(h.$$.fragment)},l(_){Pr(h.$$.fragment,_)},m(_,o){Cr(h,_,o),f=!0},p(_,o){const T=o&0?sd(y,[ld(jm[_[51]])]):{};o[0]&768|o[1]&16777216&&(T.$$scope={dirty:o,ctx:_}),h.$set(T)},i(_){f||(mt(h.$$.fragment,_),f=!0)},o(_){wt(h.$$.fragment,_),f=!1},d(_){Mr(h,_)}}}function T1(c){let h,f,y=["dz","sdz","ward","dea","lgd"],x=[];for(let o=0;o<5;o+=1)x[o]=ig(Gy(c,y,o));const _=o=>wt(x[o],1,1,()=>{x[o]=null});return{c(){for(let o=0;o<5;o+=1)x[o].c();h=sa()},l(o){for(let T=0;T<5;T+=1)x[T].l(o);h=sa()},m(o,T){for(let k=0;k<5;k+=1)x[k].m(o,T);ke(o,h,T),f=!0},p(o,T){if(T[0]&33536){y=["dz","sdz","ward","dea","lgd"];let k;for(k=0;k<5;k+=1){const B=Gy(o,y,k);x[k]?(x[k].p(B,T),mt(x[k],1)):(x[k]=ig(B),x[k].c(),mt(x[k],1),x[k].m(h.parentNode,h))}for(Tl(),k=5;k<5;k+=1)_(k);Al()}},i(o){if(!f){for(let T=0;T<5;T+=1)mt(x[T]);f=!0}},o(o){x=x.filter(Boolean);for(let T=0;T<5;T+=1)wt(x[T]);f=!1},d(o){yu(x,o),o&&M(h)}}}function A1(c){return{c:yn,l:yn,m:yn,p:yn,d:yn}}function z1(c){let h,f,y=c[1].name+"",x,_,o,T,k,B=[...c[1].parents].reverse(),R=[];for(let U=0;U<B.length;U+=1)R[U]=ng(Zy(c,B,U));return{c(){h=K("span"),f=he("Parents of "),x=he(y),_=Le(),o=K("br"),T=Le(),k=K("span");for(let U=0;U<R.length;U+=1)R[U].c();this.h()},l(U){h=H(U,"SPAN",{class:!0});var V=X(h);f=pe(V,"Parents of "),x=pe(V,y),_=Re(V),V.forEach(M),o=H(U,"BR",{}),T=Re(U),k=H(U,"SPAN",{class:!0});var le=X(k);for(let ee=0;ee<R.length;ee+=1)R[ee].l(le);le.forEach(M),this.h()},h(){z(h,"class","text-bold"),z(k,"class","text-small")},m(U,V){ke(U,h,V),P(h,f),P(h,x),P(h,_),ke(U,o,V),ke(U,T,V),ke(U,k,V);for(let le=0;le<R.length;le+=1)R[le].m(k,null)},p(U,V){if(V[0]&2&&y!==(y=U[1].name+"")&&gt(x,y),V[0]&2){B=[...U[1].parents].reverse();let le;for(le=0;le<B.length;le+=1){const ee=Zy(U,B,le);R[le]?R[le].p(ee,V):(R[le]=ng(ee),R[le].c(),R[le].m(k,null))}for(;le<R.length;le+=1)R[le].d(1);R.length=B.length}},d(U){U&&M(h),U&&M(o),U&&M(T),U&&M(k),yu(R,U)}}}function ng(c){let h,f,y=c[48]>0?"\u21B3 ":"",x,_=c[49].name+"",o,T;return{c(){h=K("span"),f=new nm(!1),x=K("a"),o=he(_),this.h()},l(k){h=H(k,"SPAN",{style:!0});var B=X(h);f=am(B,!1),x=H(B,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var R=X(x);o=pe(R,_),R.forEach(M),B.forEach(M),this.h()},h(){f.a=x,z(x,"href",T=Wu+"/"+c[49].code),z(x,"sveltekit:noscroll",""),z(x,"class","svelte-p0yy5r"),ye(h,"display","block"),ye(h,"margin-left",(c[48]>0?(c[48]-1)*15:0)+"px")},m(k,B){ke(k,h,B),f.m(y,h),P(h,x),P(x,o)},p(k,B){B[0]&2&&_!==(_=k[49].name+"")&&gt(o,_),B[0]&2&&T!==(T=Wu+"/"+k[49].code)&&z(x,"href",T)},d(k){k&&M(h)}}}function P1(c){let h,f,y=c[1].name+"",x,_,o=wa[c[1].type].name+"",T;return{c(){h=K("span"),f=he("No areas below "),x=he(y),_=Le(),T=he(o),this.h()},l(k){h=H(k,"SPAN",{class:!0});var B=X(h);f=pe(B,"No areas below "),x=pe(B,y),_=Re(B),T=pe(B,o),B.forEach(M),this.h()},h(){z(h,"class","muted")},m(k,B){ke(k,h,B),P(h,f),P(h,x),P(h,_),P(h,T)},p(k,B){B[0]&2&&y!==(y=k[1].name+"")&&gt(x,y),B[0]&2&&o!==(o=wa[k[1].type].name+"")&&gt(T,o)},d(k){k&&M(h)}}}function C1(c){let h,f=(c[1].children[0]?wa[c[1].children[0].type].pl:"Areas")+"",y,x,_=c[1].name+"",o,T,k,B,R=c[1].children,U=[];for(let V=0;V<R.length;V+=1)U[V]=ag(qy(c,R,V));return{c(){h=K("span"),y=he(f),x=he(" within "),o=he(_),T=K("br"),k=Le(),B=K("span");for(let V=0;V<U.length;V+=1)U[V].c();this.h()},l(V){h=H(V,"SPAN",{class:!0});var le=X(h);y=pe(le,f),x=pe(le," within "),o=pe(le,_),le.forEach(M),T=H(V,"BR",{}),k=Re(V),B=H(V,"SPAN",{class:!0});var ee=X(B);for(let ze=0;ze<U.length;ze+=1)U[ze].l(ee);ee.forEach(M),this.h()},h(){z(h,"class","text-bold"),z(B,"class","text-small")},m(V,le){ke(V,h,le),P(h,y),P(h,x),P(h,o),ke(V,T,le),ke(V,k,le),ke(V,B,le);for(let ee=0;ee<U.length;ee+=1)U[ee].m(B,null)},p(V,le){if(le[0]&2&&f!==(f=(V[1].children[0]?wa[V[1].children[0].type].pl:"Areas")+"")&&gt(y,f),le[0]&2&&_!==(_=V[1].name+"")&&gt(o,_),le[0]&2){R=V[1].children;let ee;for(ee=0;ee<R.length;ee+=1){const ze=qy(V,R,ee);U[ee]?U[ee].p(ze,le):(U[ee]=ag(ze),U[ee].c(),U[ee].m(B,null))}for(;ee<U.length;ee+=1)U[ee].d(1);U.length=R.length}},d(V){V&&M(h),V&&M(T),V&&M(k),V&&M(B),yu(U,V)}}}function ag(c){let h,f=c[46].name+"",y,x,_=c[48]<c[1].children.length-1?", ":"",o;return{c(){h=K("a"),y=he(f),o=he(_),this.h()},l(T){h=H(T,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var k=X(h);y=pe(k,f),k.forEach(M),o=pe(T,_),this.h()},h(){z(h,"href",x=Wu+"/"+c[46].code),z(h,"sveltekit:noscroll",""),z(h,"class","svelte-p0yy5r")},m(T,k){ke(T,h,k),P(h,y),ke(T,o,k)},p(T,k){k[0]&2&&f!==(f=T[46].name+"")&&gt(y,f),k[0]&2&&x!==(x=Wu+"/"+T[46].code)&&z(h,"href",x),k[0]&2&&_!==(_=T[48]<T[1].children.length-1?", ":"")&&gt(o,_)},d(T){T&&M(h),T&&M(o)}}}function M1(c){let h=c[1].name+"",f,y;return{c(){f=he(h),y=he(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(x){f=pe(x,h),y=pe(x," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(x,_){ke(x,f,_),ke(x,y,_)},p(x,_){_[0]&2&&h!==(h=x[1].name+"")&&gt(f,h)},d(x){x&&M(f),x&&M(y)}}}function D1(c){let h=c[1].name+"",f,y,x=c[1].count.toLocaleString()+"",_,o,T=wa[c[1].type].pl+"",k,B,R=c[1].parents[0].name+"",U,V;return{c(){f=he(h),y=he(" is one of "),_=he(x),o=Le(),k=he(T),B=he(`.
								 It is located within `),U=he(R),V=he(".")},l(le){f=pe(le,h),y=pe(le," is one of "),_=pe(le,x),o=Re(le),k=pe(le,T),B=pe(le,`.
								 It is located within `),U=pe(le,R),V=pe(le,".")},m(le,ee){ke(le,f,ee),ke(le,y,ee),ke(le,_,ee),ke(le,o,ee),ke(le,k,ee),ke(le,B,ee),ke(le,U,ee),ke(le,V,ee)},p(le,ee){ee[0]&2&&h!==(h=le[1].name+"")&&gt(f,h),ee[0]&2&&x!==(x=le[1].count.toLocaleString()+"")&&gt(_,x),ee[0]&2&&T!==(T=wa[le[1].type].pl+"")&&gt(k,T),ee[0]&2&&R!==(R=le[1].parents[0].name+"")&&gt(U,R)},d(le){le&&M(f),le&&M(y),le&&M(_),le&&M(o),le&&M(k),le&&M(B),le&&M(U),le&&M(V)}}}function L1(c){let h=c[1].name+"",f,y,x=c[1].count.toLocaleString()+"",_,o,T=wa[c[1].type].pl+"",k,B,R=c[1].parents[0].name+"",U,V,le=wa[c[1].parents[0].type].name+"",ee,ze;return{c(){f=he(h),y=he(" is one of "),_=he(x),o=Le(),k=he(T),B=he(`.  
									It is located within `),U=he(R),V=Le(),ee=he(le),ze=he(".")},l(ve){f=pe(ve,h),y=pe(ve," is one of "),_=pe(ve,x),o=Re(ve),k=pe(ve,T),B=pe(ve,`.  
									It is located within `),U=pe(ve,R),V=Re(ve),ee=pe(ve,le),ze=pe(ve,".")},m(ve,Ie){ke(ve,f,Ie),ke(ve,y,Ie),ke(ve,_,Ie),ke(ve,o,Ie),ke(ve,k,Ie),ke(ve,B,Ie),ke(ve,U,Ie),ke(ve,V,Ie),ke(ve,ee,Ie),ke(ve,ze,Ie)},p(ve,Ie){Ie[0]&2&&h!==(h=ve[1].name+"")&&gt(f,h),Ie[0]&2&&x!==(x=ve[1].count.toLocaleString()+"")&&gt(_,x),Ie[0]&2&&T!==(T=wa[ve[1].type].pl+"")&&gt(k,T),Ie[0]&2&&R!==(R=ve[1].parents[0].name+"")&&gt(U,R),Ie[0]&2&&le!==(le=wa[ve[1].parents[0].type].name+"")&&gt(ee,le)},d(ve){ve&&M(f),ve&&M(y),ve&&M(_),ve&&M(o),ve&&M(k),ve&&M(B),ve&&M(U),ve&&M(V),ve&&M(ee),ve&&M(ze)}}}function og(c){let h,f,y,x=c[1].data.population.value[2021].all/c[1].hectares>c[2].data.population.value[2021].all/c[2].hectares*1.1?"Higher than Northern Ireland value of ":c[1].data.population.value[2021].all/c[1].hectares<c[2].data.population.value[2021].all/c[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",_,o,T=(c[2].data.population.value[2021].all/c[2].hectares).toFixed(1)+"",k,B;return{c(){h=K("br"),f=Le(),y=K("span"),_=he(x),o=Le(),k=he(T),B=he(" persons per hectare"),this.h()},l(R){h=H(R,"BR",{}),f=Re(R),y=H(R,"SPAN",{class:!0});var U=X(y);_=pe(U,x),o=Re(U),k=pe(U,T),B=pe(U," persons per hectare"),U.forEach(M),this.h()},h(){z(y,"class","text-small")},m(R,U){ke(R,h,U),ke(R,f,U),ke(R,y,U),P(y,_),P(y,o),P(y,k),P(y,B)},p(R,U){U[0]&6&&x!==(x=R[1].data.population.value[2021].all/R[1].hectares>R[2].data.population.value[2021].all/R[2].hectares*1.1?"Higher than Northern Ireland value of ":R[1].data.population.value[2021].all/R[1].hectares<R[2].data.population.value[2021].all/R[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&gt(_,x),U[0]&4&&T!==(T=(R[2].data.population.value[2021].all/R[2].hectares).toFixed(1)+"")&&gt(k,T)},d(R){R&&M(h),R&&M(f),R&&M(y)}}}function R1(c){let h,f,y,x,_,o;return{c(){h=K("br"),f=Le(),y=K("div"),x=K("h3"),_=he("No other topics are available."),o=he(`
				 Further data will be added to this app as it is released.`),this.h()},l(T){h=H(T,"BR",{}),f=Re(T),y=H(T,"DIV",{class:!0});var k=X(y);x=H(k,"H3",{style:!0,class:!0});var B=X(x);_=pe(B,"No other topics are available."),B.forEach(M),o=pe(k,`
				 Further data will be added to this app as it is released.`),k.forEach(M),this.h()},h(){ye(x,"margin","0 0 10px 0"),ye(x,"line-height","1.78"),z(x,"class","svelte-p0yy5r"),z(y,"class","div-grey-box svelte-p0yy5r")},m(T,k){ke(T,h,k),ke(T,f,k),ke(T,y,k),P(y,x),P(x,_),P(y,o)},p:yn,i:yn,o:yn,d(T){T&&M(h),T&&M(f),T&&M(y)}}}function B1(c){let h,f,y,x,_,o,T,k,B,R=c[1].name+"",U,V,le,ee,ze,ve,Ie,Ve,At,Lt,ct,Qe=" &#x24D8; ",Sr,ur,Jt,Et,bt,vr,Ot,kr,Ye,Qt,Wr,ri,mr,pt,rt,ir,Ri,Kn,Ti,Ei,ii,Zi,Yt,Ai,Fa,It,Pt=" &#x24D8; ",ni,Ir,br,Ji,ci,Si,jr,cr,nr,hi,pi,Yi,ai,Bi,la,Ja,Ya,_n,kn,fi,Oi=c[1].name+"",Qi,Qa,ln,Qo,$i,ki,Jr,Gi,In,un,Gr=" &#x24D8; ",O,j,Z,$,ie,de,ge,G,te,we,Ne,je,Te,qe,it,nt=" &#x24D8; ",Pe,Xe,Ke,Je,Ct,$e,Gt,yr,Bt,qt,Dt,gr,Ft,Dr,ar,Wt=" &#x24D8; ",Ht,Tr,Tn,oi,di,$a,ua,Kr,An,Fr,xr,Br,or,zi,Ii,tl,Fi,en,Vr,Vi,zn=c[1].name+"",Ki,eo,Pn,Ea,ca,ha,vn,to,Sa,Co,Cn,rl=" &#x24D8; ",$o,pa,Hn,Mn,Xn,xe,Yr,Hr,hr,ro,mi,qr,ka,as,Mo,Ju=" &#x24D8; ",il,Va,mo,Bs,os,nl,Hl,Wn,tn,Ia,gi,fa,Pi,es,Ta,da=" &#x24D8; ",Ni,io,Aa,wn,Is,Ts,pr,Jn,si,cn,rn,_i,Os,Yn,no,Do,ao,ss,za,Dn,al=c[1].name+"",yo,Ln,hn,Fs,wr,ma,Ue,_t,Rn,go,_o,Xl=" &#x24D8; ",oo,Lo,ya,Vs,vo,ts,As,so,ls,zs,Pa,Bn,nn,ol,rs,gu=" &#x24D8; ",_u,Ro,us,Wl,Ps,Qn,zl,sl,cs,Ns,bo,On,Lr,ll,En,Cs=" &#x24D8; ",sr,Rr,Sn,Us,xo,Bo,Pl,vu,wo,ul,Oo,Nr,Fo,ga,Zr,ht,$n,is,_a,lo,an=c[1].name+"",cl,et,js,hl,Cl,vi,li,Ca,Na,Ma,Da,Yu=" &#x24D8; ",qs,Qu,pl,Ua,Eo,$t,Vo,No,ea,Uo,Zs,ta,Ui,jo,St,ft,zc=" &#x24D8; ",La,ja,pn,hs,fl,Ml,Ur,Fn,dl,ml,ps,ra,fn,Dl,uo,Pc=" &#x24D8; ",Ll,Jl,yl,fs,gl,_l,ds,Gs,bu,So,qo,ms,co,ys,xu,n,s=" &#x24D8; ",a,u,m,w,E,I,D,N,J,Y,Q,se,ae,ce,re,fe,_e,Ee,Ce,Me,Oe=c[1].name+"",Ze,We,He,ut,kt,dt,vt,er,at,Ut,Kt,jt=" &#x24D8; ",Nt,Zt,Mt,Rt,Hi,Ci,va,Vn,ui,on,bn,ji,ho,qa,Za,gs=" &#x24D8; ",Yl,_s,Zo,Rl,Ms,Go,Ql,vs,qi,Ds,Ga,Ra,dr,ko,Nn,$l=" &#x24D8; ",Jc,Ks,eu,tu,Bl,Hs,wu,Yc,bs,po,Xs,Ls,ru,tp,$u,kd=" &#x24D8; ",Qc,ec,Ol,Sh,xs,iu,rp,ip,Eu,np,ap,op,Fl,ws,nu,Su,tc,Un=" &#x24D8; ",Cc,ku,Vl,Mc,vl,Dc,kh,rc,Nl,$c,Ws,Ko,au,eh,ic,sp=" &#x24D8; ",th,Io,nc,lp,ac,rh,Ih,Iu,Tu,up,Th,cp,Ul;Qt=new F0({props:{data:c[1]&&c[14](["age"]),zKey:c[12]}});let Ho=!c[5]&&c[13]&&sg(c);return pt=new q0({props:{data:c[1]&&c[14](["age"]),zkey:c[12]}}),Ei=new Xa({props:{data:c[1]&&c[14](["sex"]),zKey:c[12],label:c[13]}}),nr=new Xa({props:{data:c[1]&&c[14](["hh_size"]),zKey:c[12],label:c[13]}}),te=new Xa({props:{data:c[1]&&c[14](["cob"]),zKey:c[12],label:c[13]}}),Bt=new Xa({props:{data:c[1]&&c[14](["passport"]),zKey:c[12],label:c[13]}}),An=new Xa({props:{data:c[1]&&c[14](["natid"]),zKey:c[12],label:c[13]}}),hr=new Xa({props:{data:c[1]&&c[14](["mainlang"]),zKey:c[12],label:c[13]}}),tn=new Xa({props:{data:c[1]&&c[14](["irish"]),zKey:c[12],label:c[13]}}),si=new Xa({props:{data:c[1]&&c[14](["ulster"]),zKey:c[12],label:c[13]}}),ls=new Xa({props:{data:c[1]&&c[14](["religion"]),zKey:c[12],label:c[13]}}),cs=new Xa({props:{data:c[1]&&c[14](["religion_or_religion_brought_up_in"]),zKey:c[12],label:c[13]}}),wo=new Xa({props:{data:c[1]&&c[14](["ethnic"]),zKey:c[12],label:c[13]}}),Uo=new Xa({props:{data:c[1]&&c[14](["general_health"]),zKey:c[12],label:c[13]}}),dl=new Xa({props:{data:c[1]&&c[14](["long_term_disability"]),zKey:c[12],label:c[13]}}),So=new Xa({props:{data:c[1]&&c[14](["number_of_long_term_health"]),zKey:c[12],label:c[13]}}),J=new Xa({props:{data:c[1]&&c[14](["provision_care"]),zKey:c[12],label:c[13]}}),ui=new Xa({props:{data:c[1]&&c[14](["accommodation_type"]),zKey:c[12],label:c[13]}}),qi=new Xa({props:{data:c[1]&&c[14](["number_of_adaptations"]),zKey:c[12],label:c[13]}}),bs=new Xa({props:{data:c[1]&&c[14](["central_heating"]),zKey:c[12],label:c[13]}}),Eu=new Xa({props:{data:c[1]&&c[14](["renewable_energy"]),zKey:c[12],label:c[13],topic_prev_available:!1}}),Nl=new Xa({props:{data:c[1]&&c[14](["hh_tenure"]),zKey:c[12],label:c[13]}}),Tu=new Xa({props:{data:c[1]&&c[14](["car_or_van"]),zKey:c[12],label:c[13]}}),{c(){h=K("div"),f=K("h2"),y=K("button"),x=K("span"),_=he("Demography"),o=Le(),T=K("div"),k=K("div"),B=he("Census 2021 - "),U=he(R),V=he(" - "),le=K("span"),ee=he("Broad age bands (years), Sex, Household size"),ze=Le(),ve=K("div"),Ie=K("div"),Ve=K("div"),At=K("div"),Lt=he("Broad age bands (years) "),ct=K("span"),Sr=Le(),ur=K("div"),Jt=K("div"),Et=he(`A grouping of ages where a person\u2019s age is their age
									at their last birthday on or prior to census day. `),bt=K("a"),vr=K("strong"),Ot=he("Statistical bulletins"),kr=Le(),Ye=K("div"),zr(Qt.$$.fragment),Wr=Le(),Ho&&Ho.c(),ri=Le(),mr=K("div"),zr(pt.$$.fragment),rt=Le(),ir=K("div"),Ri=K("div"),Kn=he("Sex"),Ti=Le(),zr(Ei.$$.fragment),ii=Le(),Zi=K("div"),Yt=K("div"),Ai=K("div"),Fa=he("Household size"),It=K("span"),ni=Le(),Ir=K("div"),br=K("div"),Ji=he("The number of usual residents in the household.      "),ci=K("a"),Si=K("strong"),jr=he("Statistical bulletins"),cr=Le(),zr(nr.$$.fragment),pi=Le(),Yi=K("div"),ai=K("h2"),Bi=K("button"),la=K("span"),Ja=he("Country of Birth & Nationality"),Ya=Le(),_n=K("div"),kn=K("div"),fi=he("Census 2021 - "),Qi=he(Oi),Qa=he(" - "),ln=K("span"),Qo=he(`Country of birth, Passport(s) held, National identity (person based)

					`),$i=K("div"),ki=K("div"),Jr=K("div"),Gi=K("div"),In=he("Country of birth"),un=K("span"),O=Le(),j=K("div"),Z=K("div"),$=he("The country in which a person was born. "),ie=K("a"),de=K("strong"),ge=he("Statistical bulletins"),G=Le(),zr(te.$$.fragment),we=Le(),Ne=K("div"),je=K("div"),Te=K("div"),qe=he("Passport(s) held"),it=K("span"),Pe=Le(),Xe=K("div"),Ke=K("div"),Je=he("Passport or passports that an individual holds. "),Ct=K("a"),$e=K("strong"),Gt=he("Statistical bulletins"),yr=Le(),zr(Bt.$$.fragment),qt=Le(),Dt=K("div"),gr=K("div"),Ft=K("div"),Dr=he("National identity (person based)"),ar=K("span"),Ht=Le(),Tr=K("div"),Tn=K("div"),oi=he(`The nationality or nationalities that the person
									identifies with. `),di=K("a"),$a=K("strong"),ua=he("Statistical bulletins"),Kr=Le(),zr(An.$$.fragment),xr=Le(),Br=K("div"),or=K("h2"),zi=K("button"),Ii=K("span"),tl=he("Language"),Fi=Le(),en=K("div"),Vr=K("div"),Vi=he("Census 2021 - "),Ki=he(zn),eo=he(" - "),Pn=K("span"),Ea=he("Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),ca=Le(),ha=K("div"),vn=K("div"),to=K("div"),Sa=K("div"),Co=he("Main language"),Cn=K("span"),$o=Le(),pa=K("div"),Hn=K("div"),Mn=he(`Person's main language as declared in the Census.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),Xn=K("a"),xe=K("strong"),Yr=he("Statistical bulletins"),Hr=Le(),zr(hr.$$.fragment),ro=Le(),mi=K("div"),qr=K("div"),ka=K("div"),as=he("Knowledge of Irish"),Mo=K("span"),il=Le(),Va=K("div"),mo=K("div"),Bs=he(`A person has some ability in Irish if they can
									understand, speak, read or write Irish. Statistics
									for all language questions are restricted to persons
									aged 3 and over. `),os=K("a"),nl=K("strong"),Hl=he("Statistical bulletins"),Wn=Le(),zr(tn.$$.fragment),Ia=Le(),gi=K("div"),fa=K("div"),Pi=K("div"),es=he("Knowledge of Ulster-Scots"),Ta=K("span"),Ni=Le(),io=K("div"),Aa=K("div"),wn=he(`A person has some ability in Ulster-Scots if they
									can understand, speak, read or write Ulster-Scots.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),Is=K("a"),Ts=K("strong"),pr=he("Statistical bulletins"),Jn=Le(),zr(si.$$.fragment),rn=Le(),_i=K("div"),Os=K("h2"),Yn=K("button"),no=K("span"),Do=he("Religion & Ethnicity"),ao=Le(),ss=K("div"),za=K("div"),Dn=he("Census 2021 - "),yo=he(al),Ln=he(" - "),hn=K("span"),Fs=he("Religion, Religion or religion brought up in, Ethnic group"),wr=Le(),ma=K("div"),Ue=K("div"),_t=K("div"),Rn=K("div"),go=he("Religion"),_o=K("span"),oo=Le(),Lo=K("div"),ya=K("div"),Vs=he(`Religion, religious denomination or body the person
									indicated they belong to. `),vo=K("a"),ts=K("strong"),As=he("Statistical bulletins"),so=Le(),zr(ls.$$.fragment),zs=Le(),Pa=K("div"),Bn=K("div"),nn=K("div"),ol=he("Religion, Religion brought up"),rs=K("span"),_u=Le(),Ro=K("div"),us=K("div"),Wl=he("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Ps=K("a"),Qn=K("strong"),zl=he("Statistical bulletins"),sl=Le(),zr(cs.$$.fragment),Ns=Le(),bo=K("div"),On=K("div"),Lr=K("div"),ll=he("Ethnic group"),En=K("span"),sr=Le(),Rr=K("div"),Sn=K("div"),Us=he("Person\u2019s ethnic group as declared in the Census. "),xo=K("a"),Bo=K("strong"),Pl=he("Statistical bulletins"),vu=Le(),zr(wo.$$.fragment),Oo=Le(),Nr=K("div"),Fo=K("h2"),ga=K("button"),Zr=K("span"),ht=he("Health & Care"),$n=Le(),is=K("div"),_a=K("div"),lo=he("Census 2021 - "),cl=he(an),et=he(" - "),js=K("span"),hl=he("General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Cl=Le(),vi=K("div"),li=K("div"),Ca=K("div"),Na=K("div"),Ma=he("General health"),Da=K("span"),qs=K("br"),Qu=Le(),pl=K("div"),Ua=K("div"),Eo=he(`General health is a self-assessment of a
											person\u2019s general state of health. It is not
											based over any specified period of time.
											`),$t=K("a"),Vo=K("strong"),No=he("Statistical bulletins"),ea=Le(),zr(Uo.$$.fragment),Zs=Le(),ta=K("div"),Ui=K("div"),jo=K("div"),St=he("Long-term health problem or disability"),ft=K("span"),La=Le(),ja=K("div"),pn=K("div"),hs=he("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),fl=K("a"),Ml=K("strong"),Ur=he("Statistical bulletins"),Fn=Le(),zr(dl.$$.fragment),ml=Le(),ps=K("div"),ra=K("div"),fn=K("div"),Dl=he("Long-term health conditions"),uo=K("span"),Ll=K("br"),Jl=Le(),yl=K("div"),fs=K("div"),gl=he(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.
									`),_l=K("a"),ds=K("strong"),Gs=he("Statistical bulletins"),bu=Le(),zr(So.$$.fragment),qo=Le(),ms=K("div"),co=K("div"),ys=K("div"),xu=he("Unpaid care"),n=K("span"),a=Le(),u=K("div"),m=K("div"),w=he(`'Unpaid care' covers looking after, giving help
											or support to anyone because they have long-term
											physical or mental health conditions or
											illnesses, or problems related to old age. It
											does not include any activities as part of paid
											employment. All unpaid care statistics are restricted 
											to persons aged 5 and over.
											`),E=K("a"),I=K("strong"),D=he("Statistical bulletins"),N=Le(),zr(J.$$.fragment),Q=Le(),se=K("div"),ae=K("h2"),ce=K("button"),re=K("span"),fe=he("Housing & Accommodation"),_e=Le(),Ee=K("div"),Ce=K("div"),Me=he("Census 2021 - "),Ze=he(Oe),We=he(" - "),He=K("span"),ut=he("Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),kt=Le(),dt=K("div"),vt=K("div"),er=K("div"),at=K("div"),Ut=he("Accommodation type"),Kt=K("span"),Nt=Le(),Zt=K("div"),Mt=K("div"),Rt=he("The type of accommodation occupied by a household. "),Hi=K("a"),Ci=K("strong"),va=he("Statistical bulletins"),Vn=Le(),zr(ui.$$.fragment),on=Le(),bn=K("div"),ji=K("div"),ho=K("div"),qa=he("Household adaptations"),Za=K("span"),Yl=Le(),_s=K("div"),Zo=K("div"),Rl=he(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.
									`),Ms=K("a"),Go=K("strong"),Ql=he("Statistical bulletins"),vs=Le(),zr(qi.$$.fragment),Ds=Le(),Ga=K("div"),Ra=K("div"),dr=K("div"),ko=he("Central heating"),Nn=K("span"),Jc=Le(),Ks=K("div"),eu=K("div"),tu=he(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.
									`),Bl=K("a"),Hs=K("strong"),wu=he("Statistical bulletins"),Yc=Le(),zr(bs.$$.fragment),po=Le(),Xs=K("div"),Ls=K("div"),ru=K("div"),tp=he("Renewable energy systems"),$u=K("span"),Qc=Le(),ec=K("div"),Ol=K("div"),Sh=he(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.
									`),xs=K("a"),iu=K("strong"),rp=he("Statistical bulletins"),ip=Le(),zr(Eu.$$.fragment),np=Le(),ap=K("br"),op=Le(),Fl=K("div"),ws=K("div"),nu=K("div"),Su=he("Household tenure"),tc=K("span"),Cc=Le(),ku=K("div"),Vl=K("div"),Mc=he(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. 
									`),vl=K("a"),Dc=K("strong"),kh=he("Statistical bulletins"),rc=Le(),zr(Nl.$$.fragment),$c=Le(),Ws=K("div"),Ko=K("div"),au=K("div"),eh=he("Car or van availability"),ic=K("span"),th=Le(),Io=K("div"),nc=K("div"),lp=he(`The number of cars or vans that are owned, or
									available for use, by members of a household. It
									includes company cars and vans that are available
									for private use.
									`),ac=K("a"),rh=K("strong"),Ih=he("Statistical bulletins"),Iu=Le(),zr(Tu.$$.fragment),up=Le(),Th=K("br"),this.h()},l(Be){h=H(Be,"DIV",{class:!0});var ot=X(h);f=H(ot,"H2",{class:!0,id:!0});var Au=X(f);y=H(Au,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var jl=X(y);x=H(jl,"SPAN",{class:!0});var To=X(x);_=pe(To,"Demography"),To.forEach(M),jl.forEach(M),Au.forEach(M),o=Re(ot),T=H(ot,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var oc=X(T);k=H(oc,"DIV",{class:!0});var Js=X(k);B=pe(Js,"Census 2021 - "),U=pe(Js,R),V=pe(Js," - "),le=H(Js,"SPAN",{class:!0});var sc=X(le);ee=pe(sc,"Broad age bands (years), Sex, Household size"),sc.forEach(M),ze=Re(Js),ve=H(Js,"DIV",{class:!0});var ns=X(ve);Ie=H(ns,"DIV",{class:!0});var Xo=X(Ie);Ve=H(Xo,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var lc=X(Ve);At=H(lc,"DIV",{class:!0,style:!0});var zu=X(At);Lt=pe(zu,"Broad age bands (years) "),ct=H(zu,"SPAN",{style:!0});var Lc=X(ct);Lc.forEach(M),zu.forEach(M),lc.forEach(M),Sr=Re(Xo),ur=H(Xo,"DIV",{class:!0,id:!0});var uc=X(ur);Jt=H(uc,"DIV",{class:!0});var ou=X(Jt);Et=pe(ou,`A grouping of ages where a person\u2019s age is their age
									at their last birthday on or prior to census day. `),bt=H(ou,"A",{href:!0,class:!0});var jn=X(bt);vr=H(jn,"STRONG",{});var cc=X(vr);Ot=pe(cc,"Statistical bulletins"),cc.forEach(M),jn.forEach(M),ou.forEach(M),uc.forEach(M),kr=Re(Xo),Ye=H(Xo,"DIV",{class:!0,style:!0});var Pu=X(Ye);Pr(Qt.$$.fragment,Pu),Pu.forEach(M),Wr=Re(Xo),Ho&&Ho.l(Xo),ri=Re(Xo),mr=H(Xo,"DIV",{});var Cu=X(mr);Pr(pt.$$.fragment,Cu),Cu.forEach(M),Xo.forEach(M),rt=Re(ns),ir=H(ns,"DIV",{class:!0});var su=X(ir);Ri=H(su,"DIV",{class:!0,style:!0});var Mu=X(Ri);Kn=pe(Mu,"Sex"),Mu.forEach(M),Ti=Re(su),Pr(Ei.$$.fragment,su),su.forEach(M),ii=Re(ns),Zi=H(ns,"DIV",{class:!0});var bl=X(Zi);Yt=H(bl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var hc=X(Yt);Ai=H(hc,"DIV",{class:!0,style:!0});var Du=X(Ai);Fa=pe(Du,"Household size"),It=H(Du,"SPAN",{style:!0});var pc=X(It);pc.forEach(M),Du.forEach(M),hc.forEach(M),ni=Re(bl),Ir=H(bl,"DIV",{class:!0,id:!0});var gf=X(Ir);br=H(gf,"DIV",{class:!0});var hp=X(br);Ji=pe(hp,"The number of usual residents in the household.      "),ci=H(hp,"A",{href:!0,class:!0});var Rc=X(ci);Si=H(Rc,"STRONG",{});var pp=X(Si);jr=pe(pp,"Statistical bulletins"),pp.forEach(M),Rc.forEach(M),hp.forEach(M),gf.forEach(M),cr=Re(bl),Pr(nr.$$.fragment,bl),bl.forEach(M),ns.forEach(M),Js.forEach(M),oc.forEach(M),pi=Re(ot),Yi=H(ot,"DIV",{class:!0});var ih=X(Yi);ai=H(ih,"H2",{class:!0,id:!0});var nh=X(ai);Bi=H(nh,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var bi=X(Bi);la=H(bi,"SPAN",{class:!0});var fp=X(la);Ja=pe(fp,"Country of Birth & Nationality"),fp.forEach(M),bi.forEach(M),nh.forEach(M),Ya=Re(ih),_n=H(ih,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var ql=X(_n);kn=H(ql,"DIV",{class:!0});var Zl=X(kn);fi=pe(Zl,"Census 2021 - "),Qi=pe(Zl,Oi),Qa=pe(Zl," - "),ln=H(Zl,"SPAN",{class:!0});var Ah=X(ln);Qo=pe(Ah,`Country of birth, Passport(s) held, National identity (person based)

					`),$i=H(Ah,"DIV",{class:!0});var Bc=X($i);ki=H(Bc,"DIV",{class:!0});var Oc=X(ki);Jr=H(Oc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _f=X(Jr);Gi=H(_f,"DIV",{class:!0,style:!0});var dp=X(Gi);In=pe(dp,"Country of birth"),un=H(dp,"SPAN",{style:!0});var Id=X(un);Id.forEach(M),dp.forEach(M),_f.forEach(M),O=Re(Oc),j=H(Oc,"DIV",{class:!0,id:!0});var vf=X(j);Z=H(vf,"DIV",{class:!0});var mp=X(Z);$=pe(mp,"The country in which a person was born. "),ie=H(mp,"A",{href:!0,class:!0});var bf=X(ie);de=H(bf,"STRONG",{});var xf=X(de);ge=pe(xf,"Statistical bulletins"),xf.forEach(M),bf.forEach(M),mp.forEach(M),vf.forEach(M),G=Re(Oc),Pr(te.$$.fragment,Oc),Oc.forEach(M),we=Re(Bc),Ne=H(Bc,"DIV",{class:!0});var lu=X(Ne);je=H(lu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var fc=X(je);Te=H(fc,"DIV",{class:!0,style:!0});var zh=X(Te);qe=pe(zh,"Passport(s) held"),it=H(zh,"SPAN",{style:!0});var Td=X(it);Td.forEach(M),zh.forEach(M),fc.forEach(M),Pe=Re(lu),Xe=H(lu,"DIV",{class:!0,id:!0});var wf=X(Xe);Ke=H(wf,"DIV",{class:!0});var yp=X(Ke);Je=pe(yp,"Passport or passports that an individual holds. "),Ct=H(yp,"A",{href:!0,class:!0});var gp=X(Ct);$e=H(gp,"STRONG",{});var ah=X($e);Gt=pe(ah,"Statistical bulletins"),ah.forEach(M),gp.forEach(M),yp.forEach(M),wf.forEach(M),yr=Re(lu),Pr(Bt.$$.fragment,lu),lu.forEach(M),qt=Re(Bc),Dt=H(Bc,"DIV",{class:!0});var Gl=X(Dt);gr=H(Gl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Fc=X(gr);Ft=H(Fc,"DIV",{class:!0,style:!0});var Wo=X(Ft);Dr=pe(Wo,"National identity (person based)"),ar=H(Wo,"SPAN",{style:!0});var Vc=X(ar);Vc.forEach(M),Wo.forEach(M),Fc.forEach(M),Ht=Re(Gl),Tr=H(Gl,"DIV",{class:!0,id:!0});var Ka=X(Tr);Tn=H(Ka,"DIV",{class:!0});var Nc=X(Tn);oi=pe(Nc,`The nationality or nationalities that the person
									identifies with. `),di=H(Nc,"A",{href:!0,class:!0});var oh=X(di);$a=H(oh,"STRONG",{});var Jo=X($a);ua=pe(Jo,"Statistical bulletins"),Jo.forEach(M),oh.forEach(M),Nc.forEach(M),Ka.forEach(M),Kr=Re(Gl),Pr(An.$$.fragment,Gl),Gl.forEach(M),Bc.forEach(M),Ah.forEach(M),Zl.forEach(M),ql.forEach(M),ih.forEach(M),xr=Re(ot),Br=H(ot,"DIV",{class:!0});var sh=X(Br);or=H(sh,"H2",{class:!0,id:!0});var _p=X(or);zi=H(_p,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ef=X(zi);Ii=H(Ef,"SPAN",{class:!0});var vp=X(Ii);tl=pe(vp,"Language"),vp.forEach(M),Ef.forEach(M),_p.forEach(M),Fi=Re(sh),en=H(sh,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Ph=X(en);Vr=H(Ph,"DIV",{class:!0});var uu=X(Vr);Vi=pe(uu,"Census 2021 - "),Ki=pe(uu,zn),eo=pe(uu," - "),Pn=H(uu,"SPAN",{class:!0});var Sf=X(Pn);Ea=pe(Sf,"Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),Sf.forEach(M),ca=Re(uu),ha=H(uu,"DIV",{class:!0});var dc=X(ha);vn=H(dc,"DIV",{class:!0});var xl=X(vn);to=H(xl,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ch=X(to);Sa=H(Ch,"DIV",{class:!0,style:!0});var Mh=X(Sa);Co=pe(Mh,"Main language"),Cn=H(Mh,"SPAN",{style:!0});var kf=X(Cn);kf.forEach(M),Mh.forEach(M),Ch.forEach(M),$o=Re(xl),pa=H(xl,"DIV",{class:!0,id:!0});var If=X(pa);Hn=H(If,"DIV",{class:!0});var Dh=X(Hn);Mn=pe(Dh,`Person's main language as declared in the Census.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),Xn=H(Dh,"A",{href:!0,class:!0});var bp=X(Xn);xe=H(bp,"STRONG",{});var xp=X(xe);Yr=pe(xp,"Statistical bulletins"),xp.forEach(M),bp.forEach(M),Dh.forEach(M),If.forEach(M),Hr=Re(xl),Pr(hr.$$.fragment,xl),xl.forEach(M),ro=Re(dc),mi=H(dc,"DIV",{class:!0});var mc=X(mi);qr=H(mc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Tf=X(qr);ka=H(Tf,"DIV",{class:!0,style:!0});var wp=X(ka);as=pe(wp,"Knowledge of Irish"),Mo=H(wp,"SPAN",{style:!0});var Af=X(Mo);Af.forEach(M),wp.forEach(M),Tf.forEach(M),il=Re(mc),Va=H(mc,"DIV",{class:!0,id:!0});var Ep=X(Va);mo=H(Ep,"DIV",{class:!0});var Uc=X(mo);Bs=pe(Uc,`A person has some ability in Irish if they can
									understand, speak, read or write Irish. Statistics
									for all language questions are restricted to persons
									aged 3 and over. `),os=H(Uc,"A",{href:!0,class:!0});var Sp=X(os);nl=H(Sp,"STRONG",{});var lh=X(nl);Hl=pe(lh,"Statistical bulletins"),lh.forEach(M),Sp.forEach(M),Uc.forEach(M),Ep.forEach(M),Wn=Re(mc),Pr(tn.$$.fragment,mc),mc.forEach(M),Ia=Re(dc),gi=H(dc,"DIV",{class:!0});var cu=X(gi);fa=H(cu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var uh=X(fa);Pi=H(uh,"DIV",{class:!0,style:!0});var Lu=X(Pi);es=pe(Lu,"Knowledge of Ulster-Scots"),Ta=H(Lu,"SPAN",{style:!0});var Ad=X(Ta);Ad.forEach(M),Lu.forEach(M),uh.forEach(M),Ni=Re(cu),io=H(cu,"DIV",{class:!0,id:!0});var zf=X(io);Aa=H(zf,"DIV",{class:!0});var kp=X(Aa);wn=pe(kp,`A person has some ability in Ulster-Scots if they
									can understand, speak, read or write Ulster-Scots.
									Statistics for all language questions are restricted
									to persons aged 3 and over. `),Is=H(kp,"A",{href:!0,class:!0});var yc=X(Is);Ts=H(yc,"STRONG",{});var Lh=X(Ts);pr=pe(Lh,"Statistical bulletins"),Lh.forEach(M),yc.forEach(M),kp.forEach(M),zf.forEach(M),Jn=Re(cu),Pr(si.$$.fragment,cu),cu.forEach(M),dc.forEach(M),uu.forEach(M),Ph.forEach(M),sh.forEach(M),rn=Re(ot),_i=H(ot,"DIV",{class:!0});var ch=X(_i);Os=H(ch,"H2",{class:!0,id:!0});var Rh=X(Os);Yn=H(Rh,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ip=X(Yn);no=H(Ip,"SPAN",{class:!0});var Tp=X(no);Do=pe(Tp,"Religion & Ethnicity"),Tp.forEach(M),Ip.forEach(M),Rh.forEach(M),ao=Re(ch),ss=H(ch,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Pf=X(ss);za=H(Pf,"DIV",{class:!0});var gc=X(za);Dn=pe(gc,"Census 2021 - "),yo=pe(gc,al),Ln=pe(gc," - "),hn=H(gc,"SPAN",{class:!0});var Cf=X(hn);Fs=pe(Cf,"Religion, Religion or religion brought up in, Ethnic group"),Cf.forEach(M),wr=Re(gc),ma=H(gc,"DIV",{class:!0});var hu=X(ma);Ue=H(hu,"DIV",{class:!0});var Ru=X(Ue);_t=H(Ru,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Mf=X(_t);Rn=H(Mf,"DIV",{class:!0,style:!0});var Bu=X(Rn);go=pe(Bu,"Religion"),_o=H(Bu,"SPAN",{style:!0});var hh=X(_o);hh.forEach(M),Bu.forEach(M),Mf.forEach(M),oo=Re(Ru),Lo=H(Ru,"DIV",{class:!0,id:!0});var Qr=X(Lo);ya=H(Qr,"DIV",{class:!0});var Ap=X(ya);Vs=pe(Ap,`Religion, religious denomination or body the person
									indicated they belong to. `),vo=H(Ap,"A",{href:!0,class:!0});var Bh=X(vo);ts=H(Bh,"STRONG",{});var _c=X(ts);As=pe(_c,"Statistical bulletins"),_c.forEach(M),Bh.forEach(M),Ap.forEach(M),Qr.forEach(M),so=Re(Ru),Pr(ls.$$.fragment,Ru),Ru.forEach(M),zs=Re(hu),Pa=H(hu,"DIV",{class:!0});var jc=X(Pa);Bn=H(jc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Df=X(Bn);nn=H(Df,"DIV",{class:!0,style:!0});var zp=X(nn);ol=pe(zp,"Religion, Religion brought up"),rs=H(zp,"SPAN",{style:!0});var zd=X(rs);zd.forEach(M),zp.forEach(M),Df.forEach(M),_u=Re(jc),Ro=H(jc,"DIV",{class:!0,id:!0});var Lf=X(Ro);us=H(Lf,"DIV",{class:!0});var Pp=X(us);Wl=pe(Pp,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Ps=H(Pp,"A",{href:!0,class:!0});var Rf=X(Ps);Qn=H(Rf,"STRONG",{});var Cp=X(Qn);zl=pe(Cp,"Statistical bulletins"),Cp.forEach(M),Rf.forEach(M),Pp.forEach(M),Lf.forEach(M),sl=Re(jc),Pr(cs.$$.fragment,jc),jc.forEach(M),Ns=Re(hu),bo=H(hu,"DIV",{class:!0});var vc=X(bo);On=H(vc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Mp=X(On);Lr=H(Mp,"DIV",{class:!0,style:!0});var Oh=X(Lr);ll=pe(Oh,"Ethnic group"),En=H(Oh,"SPAN",{style:!0});var Fh=X(En);Fh.forEach(M),Oh.forEach(M),Mp.forEach(M),sr=Re(vc),Rr=H(vc,"DIV",{class:!0,id:!0});var Ou=X(Rr);Sn=H(Ou,"DIV",{class:!0});var ph=X(Sn);Us=pe(ph,"Person\u2019s ethnic group as declared in the Census. "),xo=H(ph,"A",{href:!0,class:!0});var bc=X(xo);Bo=H(bc,"STRONG",{});var Dp=X(Bo);Pl=pe(Dp,"Statistical bulletins"),Dp.forEach(M),bc.forEach(M),ph.forEach(M),Ou.forEach(M),vu=Re(vc),Pr(wo.$$.fragment,vc),vc.forEach(M),hu.forEach(M),gc.forEach(M),Pf.forEach(M),ch.forEach(M),Oo=Re(ot),Nr=H(ot,"DIV",{class:!0});var dn=X(Nr);Fo=H(dn,"H2",{class:!0,id:!0});var Mi=X(Fo);ga=H(Mi,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Lp=X(ga);Zr=H(Lp,"SPAN",{class:!0});var Rp=X(Zr);ht=pe(Rp,"Health & Care"),Rp.forEach(M),Lp.forEach(M),Mi.forEach(M),$n=Re(dn),is=H(dn,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Bp=X(is);_a=H(Bp,"DIV",{class:!0});var Fu=X(_a);lo=pe(Fu,"Census 2021 - "),cl=pe(Fu,an),et=pe(Fu," - "),js=H(Fu,"SPAN",{class:!0});var Op=X(js);hl=pe(Op,"General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Op.forEach(M),Cl=Re(Fu),vi=H(Fu,"DIV",{class:!0});var Kl=X(vi);li=H(Kl,"DIV",{class:!0});var Ys=X(li);Ca=H(Ys,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Vu=X(Ca);Na=H(Vu,"DIV",{class:!0,style:!0});var fh=X(Na);Ma=pe(fh,"General health"),Da=H(fh,"SPAN",{style:!0});var qn=X(Da);qn.forEach(M),qs=H(fh,"BR",{}),fh.forEach(M),Vu.forEach(M),Qu=Re(Ys),pl=H(Ys,"DIV",{class:!0,id:!0});var qc=X(pl);Ua=H(qc,"DIV",{class:!0});var wl=X(Ua);Eo=pe(wl,`General health is a self-assessment of a
											person\u2019s general state of health. It is not
											based over any specified period of time.
											`),$t=H(wl,"A",{href:!0,class:!0});var dh=X($t);Vo=H(dh,"STRONG",{});var mh=X(Vo);No=pe(mh,"Statistical bulletins"),mh.forEach(M),dh.forEach(M),wl.forEach(M),qc.forEach(M),ea=Re(Ys),Pr(Uo.$$.fragment,Ys),Ys.forEach(M),Zs=Re(Kl),ta=H(Kl,"DIV",{class:!0});var Nu=X(ta);Ui=H(Nu,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xc=X(Ui);jo=H(xc,"DIV",{class:!0,style:!0});var El=X(jo);St=pe(El,"Long-term health problem or disability"),ft=H(El,"SPAN",{style:!0});var Bf=X(ft);Bf.forEach(M),El.forEach(M),xc.forEach(M),La=Re(Nu),ja=H(Nu,"DIV",{class:!0,id:!0});var Fp=X(ja);pn=H(Fp,"DIV",{class:!0});var Vp=X(pn);hs=pe(Vp,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),fl=H(Vp,"A",{href:!0,class:!0});var ia=X(fl);Ml=H(ia,"STRONG",{});var pu=X(Ml);Ur=pe(pu,"Statistical bulletins"),pu.forEach(M),ia.forEach(M),Vp.forEach(M),Fp.forEach(M),Fn=Re(Nu),Pr(dl.$$.fragment,Nu),Nu.forEach(M),ml=Re(Kl),ps=H(Kl,"DIV",{class:!0});var wc=X(ps);ra=H(wc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var e=X(ra);fn=H(e,"DIV",{class:!0,style:!0});var t=X(fn);Dl=pe(t,"Long-term health conditions"),uo=H(t,"SPAN",{style:!0});var i=X(uo);i.forEach(M),Ll=H(t,"BR",{}),t.forEach(M),e.forEach(M),Jl=Re(wc),yl=H(wc,"DIV",{class:!0,id:!0});var l=X(yl);fs=H(l,"DIV",{class:!0});var p=X(fs);gl=pe(p,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.
									`),_l=H(p,"A",{href:!0,class:!0});var d=X(_l);ds=H(d,"STRONG",{});var v=X(ds);Gs=pe(v,"Statistical bulletins"),v.forEach(M),d.forEach(M),p.forEach(M),l.forEach(M),bu=Re(wc),Pr(So.$$.fragment,wc),wc.forEach(M),qo=Re(Kl),ms=H(Kl,"DIV",{class:!0});var S=X(ms);co=H(S,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var A=X(co);ys=H(A,"DIV",{class:!0,style:!0});var C=X(ys);xu=pe(C,"Unpaid care"),n=H(C,"SPAN",{style:!0});var L=X(n);L.forEach(M),C.forEach(M),A.forEach(M),a=Re(S),u=H(S,"DIV",{class:!0,id:!0});var F=X(u);m=H(F,"DIV",{class:!0});var q=X(m);w=pe(q,`'Unpaid care' covers looking after, giving help
											or support to anyone because they have long-term
											physical or mental health conditions or
											illnesses, or problems related to old age. It
											does not include any activities as part of paid
											employment. All unpaid care statistics are restricted 
											to persons aged 5 and over.
											`),E=H(q,"A",{href:!0,class:!0});var W=X(E);I=H(W,"STRONG",{});var ne=X(I);D=pe(ne,"Statistical bulletins"),ne.forEach(M),W.forEach(M),q.forEach(M),F.forEach(M),N=Re(S),Pr(J.$$.fragment,S),S.forEach(M),Kl.forEach(M),Fu.forEach(M),Bp.forEach(M),dn.forEach(M),Q=Re(ot),se=H(ot,"DIV",{class:!0});var oe=X(se);ae=H(oe,"H2",{class:!0,id:!0});var me=X(ae);ce=H(me,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ue=X(ce);re=H(ue,"SPAN",{class:!0});var be=X(re);fe=pe(be,"Housing & Accommodation"),be.forEach(M),ue.forEach(M),me.forEach(M),_e=Re(oe),Ee=H(oe,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Se=X(Ee);Ce=H(Se,"DIV",{class:!0});var Ae=X(Ce);Me=pe(Ae,"Census 2021 - "),Ze=pe(Ae,Oe),We=pe(Ae," - "),He=H(Ae,"SPAN",{class:!0});var De=X(He);ut=pe(De,"Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),De.forEach(M),kt=Re(Ae),dt=H(Ae,"DIV",{class:!0});var Fe=X(dt);vt=H(Fe,"DIV",{class:!0});var Ge=X(vt);er=H(Ge,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var tt=X(er);at=H(tt,"DIV",{class:!0,style:!0});var xt=X(at);Ut=pe(xt,"Accommodation type"),Kt=H(xt,"SPAN",{style:!0});var lt=X(Kt);lt.forEach(M),xt.forEach(M),tt.forEach(M),Nt=Re(Ge),Zt=H(Ge,"DIV",{class:!0,id:!0});var Tt=X(Zt);Mt=H(Tt,"DIV",{class:!0});var st=X(Mt);Rt=pe(st,"The type of accommodation occupied by a household. "),Hi=H(st,"A",{href:!0,class:!0});var tr=X(Hi);Ci=H(tr,"STRONG",{});var Vt=X(Ci);va=pe(Vt,"Statistical bulletins"),Vt.forEach(M),tr.forEach(M),st.forEach(M),Tt.forEach(M),Vn=Re(Ge),Pr(ui.$$.fragment,Ge),Ge.forEach(M),on=Re(Fe),bn=H(Fe,"DIV",{class:!0});var yt=X(bn);ji=H(yt,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var lr=X(ji);ho=H(lr,"DIV",{class:!0,style:!0});var Xt=X(ho);qa=pe(Xt,"Household adaptations"),Za=H(Xt,"SPAN",{style:!0});var Er=X(Za);Er.forEach(M),Xt.forEach(M),lr.forEach(M),Yl=Re(yt),_s=H(yt,"DIV",{class:!0,id:!0});var zt=X(_s);Zo=H(zt,"DIV",{class:!0});var Ar=X(Zo);Rl=pe(Ar,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.
									`),Ms=H(Ar,"A",{href:!0,class:!0});var Di=X(Ms);Go=H(Di,"STRONG",{});var sn=X(Go);Ql=pe(sn,"Statistical bulletins"),sn.forEach(M),Di.forEach(M),Ar.forEach(M),zt.forEach(M),vs=Re(yt),Pr(qi.$$.fragment,yt),yt.forEach(M),Ds=Re(Fe),Ga=H(Fe,"DIV",{class:!0});var xi=X(Ga);Ra=H(xi,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Li=X(Ra);dr=H(Li,"DIV",{class:!0,style:!0});var Xi=X(dr);ko=pe(Xi,"Central heating"),Nn=H(Xi,"SPAN",{style:!0});var na=X(Nn);na.forEach(M),Xi.forEach(M),Li.forEach(M),Jc=Re(xi),Ks=H(xi,"DIV",{class:!0,id:!0});var Zn=X(Ks);eu=H(Zn,"DIV",{class:!0});var Ba=X(eu);tu=pe(Ba,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.
									`),Bl=H(Ba,"A",{href:!0,class:!0});var aa=X(Bl);Hs=H(aa,"STRONG",{});var Ha=X(Hs);wu=pe(Ha,"Statistical bulletins"),Ha.forEach(M),aa.forEach(M),Ba.forEach(M),Zn.forEach(M),Yc=Re(xi),Pr(bs.$$.fragment,xi),xi.forEach(M),po=Re(Fe),Xs=H(Fe,"DIV",{class:!0});var wi=X(Xs);Ls=H(wi,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var oa=X(Ls);ru=H(oa,"DIV",{class:!0,style:!0});var fr=X(ru);tp=pe(fr,"Renewable energy systems"),$u=H(fr,"SPAN",{style:!0});var yi=X($u);yi.forEach(M),fr.forEach(M),oa.forEach(M),Qc=Re(wi),ec=H(wi,"DIV",{class:!0,id:!0});var Xr=X(ec);Ol=H(Xr,"DIV",{class:!0});var _r=X(Ol);Sh=pe(_r,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.
									`),xs=H(_r,"A",{href:!0,class:!0});var fo=X(xs);iu=H(fo,"STRONG",{});var Oa=X(iu);rp=pe(Oa,"Statistical bulletins"),Oa.forEach(M),fo.forEach(M),_r.forEach(M),Xr.forEach(M),ip=Re(wi),Pr(Eu.$$.fragment,wi),np=Re(wi),ap=H(wi,"BR",{}),wi.forEach(M),op=Re(Fe),Fl=H(Fe,"DIV",{class:!0});var $r=X(Fl);ws=H($r,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xn=X(ws);nu=H(xn,"DIV",{class:!0,style:!0});var ba=X(nu);Su=pe(ba,"Household tenure"),tc=H(ba,"SPAN",{style:!0});var Or=X(tc);Or.forEach(M),ba.forEach(M),xn.forEach(M),Cc=Re($r),ku=H($r,"DIV",{class:!0,id:!0});var Sl=X(ku);Vl=H(Sl,"DIV",{class:!0});var Yo=X(Vl);Mc=pe(Yo,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. 
									`),vl=H(Yo,"A",{href:!0,class:!0});var kl=X(vl);Dc=H(kl,"STRONG",{});var mn=X(Dc);kh=pe(mn,"Statistical bulletins"),mn.forEach(M),kl.forEach(M),Yo.forEach(M),Sl.forEach(M),rc=Re($r),Pr(Nl.$$.fragment,$r),$r.forEach(M),$c=Re(Fe),Ws=H(Fe,"DIV",{class:!0});var Ao=X(Ws);Ko=H(Ao,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Rs=X(Ko);au=H(Rs,"DIV",{class:!0,style:!0});var Uu=X(au);eh=pe(Uu,"Car or van availability"),ic=H(Uu,"SPAN",{style:!0});var Ec=X(ic);Ec.forEach(M),Uu.forEach(M),Rs.forEach(M),th=Re(Ao),Io=H(Ao,"DIV",{class:!0,id:!0});var Sc=X(Io);nc=H(Sc,"DIV",{class:!0});var Il=X(nc);lp=pe(Il,`The number of cars or vans that are owned, or
									available for use, by members of a household. It
									includes company cars and vans that are available
									for private use.
									`),ac=H(Il,"A",{href:!0,class:!0});var kc=X(ac);rh=H(kc,"STRONG",{});var yh=X(rh);Ih=pe(yh,"Statistical bulletins"),yh.forEach(M),kc.forEach(M),Il.forEach(M),Sc.forEach(M),Iu=Re(Ao),Pr(Tu.$$.fragment,Ao),up=Re(Ao),Th=H(Ao,"BR",{}),Ao.forEach(M),Fe.forEach(M),Ae.forEach(M),Se.forEach(M),oe.forEach(M),ot.forEach(M),this.h()},h(){z(x,"class","accordion-button-title"),z(y,"class","accordion-button collapsed"),z(y,"type","button"),z(y,"data-bs-toggle","collapse"),z(y,"data-bs-target","#panelsStayOpen-collapseOne"),z(y,"aria-expanded","false"),z(y,"aria-controls","panelsStayOpen-collapseOne"),z(f,"class","accordion-header svelte-p0yy5r"),z(f,"id","panelsStayOpen-headingOne"),z(le,"class","accordion-button-title-sub"),ye(ct,"color","gray"),ye(ct,"font-size","14pt"),z(At,"class","blocktitle"),ye(At,"margin","0"),ye(At,"width","100%"),z(Ve,"class","row"),ye(Ve,"display","flex"),ye(Ve,"cursor","pointer"),z(Ve,"data-bs-toggle","collapse"),z(Ve,"data-bs-target","#broadagebands-info"),z(Ve,"aria-expanded","false"),z(Ve,"aria-controls","broadagebands-info"),z(bt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(bt,"class","svelte-p0yy5r"),z(Jt,"class","card card-body svelte-p0yy5r"),z(ur,"class","collapse svelte-p0yy5r"),z(ur,"id","broadagebands-info"),z(Ye,"class","chart svelte-p0yy5r"),ye(Ye,"height","100px"),ye(Ye,"padding-bottom","5px"),z(Ie,"class","div-grey-box svelte-p0yy5r"),z(Ri,"class","blocktitle"),ye(Ri,"margin","0"),ye(Ri,"width","100%"),z(ir,"class","div-grey-box svelte-p0yy5r"),ye(It,"color","gray"),ye(It,"font-size","14pt"),z(Ai,"class","blocktitle"),ye(Ai,"margin","0"),ye(Ai,"width","100%"),z(Yt,"class","row"),ye(Yt,"display","flex"),ye(Yt,"cursor","pointer"),z(Yt,"data-bs-toggle","collapse"),z(Yt,"data-bs-target","#hhsize-info"),z(Yt,"aria-expanded","false"),z(Yt,"aria-controls","hhsize-info"),z(ci,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ci,"class","svelte-p0yy5r"),z(br,"class","card card-body svelte-p0yy5r"),z(Ir,"class","collapse svelte-p0yy5r"),z(Ir,"id","hhsize-info"),z(Zi,"class","div-grey-box svelte-p0yy5r"),z(ve,"class","grid mt svelte-p0yy5r"),Gu(()=>c[35].call(ve)),z(k,"class","accordion-body"),z(T,"id","panelsStayOpen-collapseOne"),z(T,"class","accordion-collapse collapse svelte-p0yy5r"),z(T,"aria-labelledby","panelsStayOpen-headingOne"),z(la,"class","accordion-button-title"),z(Bi,"class","accordion-button collapsed"),z(Bi,"type","button"),z(Bi,"data-bs-toggle","collapse"),z(Bi,"data-bs-target","#panelsStayOpen-collapseTwo"),z(Bi,"aria-expanded","false"),z(Bi,"aria-controls","panelsStayOpen-collapseTwo"),z(ai,"class","accordion-header svelte-p0yy5r"),z(ai,"id","panelsStayOpen-headingTwo"),ye(un,"color","gray"),ye(un,"font-size","14pt"),z(Gi,"class","blocktitle"),ye(Gi,"margin","0"),ye(Gi,"width","100%"),z(Jr,"class","row"),ye(Jr,"display","flex"),ye(Jr,"cursor","pointer"),z(Jr,"data-bs-toggle","collapse"),z(Jr,"data-bs-target","#cob-info"),z(Jr,"aria-expanded","false"),z(Jr,"aria-controls","cob-info"),z(ie,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ie,"class","svelte-p0yy5r"),z(Z,"class","card card-body svelte-p0yy5r"),z(j,"class","collapse svelte-p0yy5r"),z(j,"id","cob-info"),z(ki,"class","div-grey-box svelte-p0yy5r"),ye(it,"color","gray"),ye(it,"font-size","14pt"),z(Te,"class","blocktitle"),ye(Te,"margin","0"),ye(Te,"width","100%"),z(je,"class","row"),ye(je,"display","flex"),ye(je,"cursor","pointer"),z(je,"data-bs-toggle","collapse"),z(je,"data-bs-target","#passport-info"),z(je,"aria-expanded","false"),z(je,"aria-controls","passport-info"),z(Ct,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Ct,"class","svelte-p0yy5r"),z(Ke,"class","card card-body svelte-p0yy5r"),z(Xe,"class","collapse svelte-p0yy5r"),z(Xe,"id","passport-info"),z(Ne,"class","div-grey-box svelte-p0yy5r"),ye(ar,"color","gray"),ye(ar,"font-size","14pt"),z(Ft,"class","blocktitle"),ye(Ft,"font-size","1.02em"),ye(Ft,"margin","0"),ye(Ft,"width","100%"),z(gr,"class","row"),ye(gr,"display","flex"),ye(gr,"cursor","pointer"),z(gr,"data-bs-toggle","collapse"),z(gr,"data-bs-target","#natid-info"),z(gr,"aria-expanded","false"),z(gr,"aria-controls","natid-info"),z(di,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(di,"class","svelte-p0yy5r"),z(Tn,"class","card card-body svelte-p0yy5r"),z(Tr,"class","collapse svelte-p0yy5r"),z(Tr,"id","natid-info"),z(Dt,"class","div-grey-box svelte-p0yy5r"),z($i,"class","grid mt svelte-p0yy5r"),Gu(()=>c[36].call($i)),z(ln,"class","accordion-button-title-sub"),z(kn,"class","accordion-body"),z(_n,"id","panelsStayOpen-collapseTwo"),z(_n,"class","accordion-collapse collapse svelte-p0yy5r"),z(_n,"aria-labelledby","panelsStayOpen-headingTwo"),z(Yi,"class","accordion-item"),z(Ii,"class","accordion-button-title"),z(zi,"class","accordion-button collapsed"),z(zi,"type","button"),z(zi,"data-bs-toggle","collapse"),z(zi,"data-bs-target","#panelsStayOpen-collapseThree"),z(zi,"aria-expanded","false"),z(zi,"aria-controls","panelsStayOpen-collapseThree"),z(or,"class","accordion-header svelte-p0yy5r"),z(or,"id","panelsStayOpen-headingThree"),z(Pn,"class","accordion-button-title-sub"),ye(Cn,"color","gray"),ye(Cn,"font-size","14pt"),z(Sa,"class","blocktitle"),ye(Sa,"margin","0"),ye(Sa,"width","100%"),z(to,"class","row"),ye(to,"display","flex"),ye(to,"cursor","pointer"),z(to,"data-bs-toggle","collapse"),z(to,"data-bs-target","#mainlang-info"),z(to,"aria-expanded","false"),z(to,"aria-controls","mainlang-info"),z(Xn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Xn,"class","svelte-p0yy5r"),z(Hn,"class","card card-body svelte-p0yy5r"),z(pa,"class","collapse svelte-p0yy5r"),z(pa,"id","mainlang-info"),z(vn,"class","div-grey-box svelte-p0yy5r"),ye(Mo,"color","gray"),ye(Mo,"font-size","14pt"),z(ka,"class","blocktitle"),ye(ka,"margin","0"),ye(ka,"width","100%"),z(qr,"class","row"),ye(qr,"display","flex"),ye(qr,"cursor","pointer"),z(qr,"data-bs-toggle","collapse"),z(qr,"data-bs-target","#irish-info"),z(qr,"aria-expanded","false"),z(qr,"aria-controls","irish-info"),z(os,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(os,"class","svelte-p0yy5r"),z(mo,"class","card card-body svelte-p0yy5r"),z(Va,"class","collapse svelte-p0yy5r"),z(Va,"id","irish-info"),z(mi,"class","div-grey-box svelte-p0yy5r"),ye(Ta,"color","gray"),ye(Ta,"font-size","14pt"),z(Pi,"class","blocktitle"),ye(Pi,"margin","0"),ye(Pi,"width","100%"),z(fa,"class","row"),ye(fa,"display","flex"),ye(fa,"cursor","pointer"),z(fa,"data-bs-toggle","collapse"),z(fa,"data-bs-target","#ulster-info"),z(fa,"aria-expanded","false"),z(fa,"aria-controls","ulster-info"),z(Is,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Is,"class","svelte-p0yy5r"),z(Aa,"class","card card-body svelte-p0yy5r"),z(io,"class","collapse svelte-p0yy5r"),z(io,"id","ulster-info"),z(gi,"class","div-grey-box svelte-p0yy5r"),z(ha,"class","grid mt svelte-p0yy5r"),Gu(()=>c[37].call(ha)),z(Vr,"class","accordion-body"),z(en,"id","panelsStayOpen-collapseThree"),z(en,"class","accordion-collapse collapse svelte-p0yy5r"),z(en,"aria-labelledby","panelsStayOpen-headingThree"),z(Br,"class","accordion-item"),z(no,"class","accordion-button-title"),z(Yn,"class","accordion-button collapsed"),z(Yn,"type","button"),z(Yn,"data-bs-toggle","collapse"),z(Yn,"data-bs-target","#panelsStayOpen-collapseFour"),z(Yn,"aria-expanded","false"),z(Yn,"aria-controls","panelsStayOpen-collapseFour"),z(Os,"class","accordion-header svelte-p0yy5r"),z(Os,"id","panelsStayOpen-headingFour"),z(hn,"class","accordion-button-title-sub"),ye(_o,"color","gray"),ye(_o,"font-size","14pt"),z(Rn,"class","blocktitle"),ye(Rn,"margin","0"),ye(Rn,"width","100%"),z(_t,"class","row"),ye(_t,"display","flex"),ye(_t,"cursor","pointer"),z(_t,"data-bs-toggle","collapse"),z(_t,"data-bs-target","#rel-info"),z(_t,"aria-expanded","false"),z(_t,"aria-controls","rel-info"),z(vo,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(vo,"class","svelte-p0yy5r"),z(ya,"class","card card-body svelte-p0yy5r"),z(Lo,"class","collapse svelte-p0yy5r"),z(Lo,"id","rel-info"),z(Ue,"class","div-grey-box svelte-p0yy5r"),ye(rs,"color","gray"),ye(rs,"font-size","14pt"),z(nn,"class","blocktitle"),ye(nn,"margin","0"),ye(nn,"width","100%"),z(Bn,"class","row"),ye(Bn,"display","flex"),ye(Bn,"cursor","pointer"),z(Bn,"data-bs-toggle","collapse"),z(Bn,"data-bs-target","#relbup-info"),z(Bn,"aria-expanded","false"),z(Bn,"aria-controls","relbup-info"),z(Ps,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Ps,"class","svelte-p0yy5r"),z(us,"class","card card-body svelte-p0yy5r"),z(Ro,"class","collapse svelte-p0yy5r"),z(Ro,"id","relbup-info"),z(Pa,"class","div-grey-box svelte-p0yy5r"),ye(En,"color","gray"),ye(En,"font-size","14pt"),z(Lr,"class","blocktitle"),ye(Lr,"margin","0"),ye(Lr,"width","100%"),z(On,"class","row"),ye(On,"display","flex"),ye(On,"cursor","pointer"),z(On,"data-bs-toggle","collapse"),z(On,"data-bs-target","#ethnic-info"),z(On,"aria-expanded","false"),z(On,"aria-controls","ethnic-info"),z(xo,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(xo,"class","svelte-p0yy5r"),z(Sn,"class","card card-body svelte-p0yy5r"),z(Rr,"class","collapse svelte-p0yy5r"),z(Rr,"id","ethnic-info"),z(bo,"class","div-grey-box svelte-p0yy5r"),z(ma,"class","grid mt svelte-p0yy5r"),Gu(()=>c[38].call(ma)),z(za,"class","accordion-body"),z(ss,"id","panelsStayOpen-collapseFour"),z(ss,"class","accordion-collapse collapse svelte-p0yy5r"),z(ss,"aria-labelledby","panelsStayOpen-headingFour"),z(_i,"class","accordion-item"),z(Zr,"class","accordion-button-title"),z(ga,"class","accordion-button collapsed"),z(ga,"type","button"),z(ga,"data-bs-toggle","collapse"),z(ga,"data-bs-target","#panelsStayOpen-collapseFive"),z(ga,"aria-expanded","false"),z(ga,"aria-controls","panelsStayOpen-collapseFive"),z(Fo,"class","accordion-header svelte-p0yy5r"),z(Fo,"id","panelsStayOpen-headingFive"),z(js,"class","accordion-button-title-sub"),ye(Da,"color","gray"),ye(Da,"font-size","14pt"),z(Na,"class","blocktitle"),ye(Na,"margin","0"),ye(Na,"width","100%"),z(Ca,"class","row"),ye(Ca,"display","flex"),ye(Ca,"cursor","pointer"),z(Ca,"data-bs-toggle","collapse"),z(Ca,"data-bs-target","#gen-health-info"),z(Ca,"aria-expanded","false"),z(Ca,"aria-controls","gen-health"),z($t,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z($t,"class","svelte-p0yy5r"),z(Ua,"class","card card-body svelte-p0yy5r"),z(pl,"class","collapse svelte-p0yy5r"),z(pl,"id","gen-health-info"),z(li,"class","div-grey-box svelte-p0yy5r"),ye(ft,"color","gray"),ye(ft,"font-size","14pt"),z(jo,"class","blocktitle"),ye(jo,"font-size","0.85em"),ye(jo,"margin","0"),ye(jo,"width","100%"),z(Ui,"class","row"),ye(Ui,"display","flex"),ye(Ui,"cursor","pointer"),z(Ui,"data-bs-toggle","collapse"),z(Ui,"data-bs-target","#lti-info"),z(Ui,"aria-expanded","false"),z(Ui,"aria-controls","lti-info"),z(fl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(fl,"class","svelte-p0yy5r"),z(pn,"class","card card-body svelte-p0yy5r"),z(ja,"class","collapse svelte-p0yy5r"),z(ja,"id","lti-info"),z(ta,"class","div-grey-box svelte-p0yy5r"),ye(uo,"color","gray"),ye(uo,"font-size","14pt"),z(fn,"class","blocktitle"),ye(fn,"font-size","1.02em"),ye(fn,"margin","0"),ye(fn,"width","100%"),z(ra,"class","row"),ye(ra,"display","flex"),ye(ra,"cursor","pointer"),z(ra,"data-bs-toggle","collapse"),z(ra,"data-bs-target","#lt-cond-info"),z(ra,"aria-expanded","false"),z(ra,"aria-controls","lt-cond-info"),z(_l,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(_l,"class","svelte-p0yy5r"),z(fs,"class","card card-body svelte-p0yy5r"),z(yl,"class","collapse svelte-p0yy5r"),z(yl,"id","lt-cond-info"),z(ps,"class","div-grey-box svelte-p0yy5r"),ye(n,"color","gray"),ye(n,"font-size","14pt"),z(ys,"class","blocktitle"),ye(ys,"font-size","1.02em"),ye(ys,"margin","0"),ye(ys,"width","100%"),z(co,"class","row"),ye(co,"display","flex"),ye(co,"cursor","pointer"),z(co,"data-bs-toggle","collapse"),z(co,"data-bs-target","#unpaid-info"),z(co,"aria-expanded","false"),z(co,"aria-controls","unpaid-info"),z(E,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(E,"class","svelte-p0yy5r"),z(m,"class","card card-body svelte-p0yy5r"),z(u,"class","collapse svelte-p0yy5r"),z(u,"id","unpaid-info"),z(ms,"class","div-grey-box svelte-p0yy5r"),z(vi,"class","grid mt svelte-p0yy5r"),Gu(()=>c[39].call(vi)),z(_a,"class","accordion-body"),z(is,"id","panelsStayOpen-collapseFive"),z(is,"class","accordion-collapse collapse svelte-p0yy5r"),z(is,"aria-labelledby","panelsStayOpen-headingFive"),z(Nr,"class","accordion-item"),z(re,"class","accordion-button-title"),z(ce,"class","accordion-button collapsed"),z(ce,"type","button"),z(ce,"data-bs-toggle","collapse"),z(ce,"data-bs-target","#panelsStayOpen-collapseSix"),z(ce,"aria-expanded","false"),z(ce,"aria-controls","panelsStayOpen-collapseSix"),z(ae,"class","accordion-header svelte-p0yy5r"),z(ae,"id","panelsStayOpen-headingSix"),z(He,"class","accordion-button-title-sub"),ye(Kt,"color","gray"),ye(Kt,"font-size","14pt"),z(at,"class","blocktitle"),ye(at,"margin","0"),ye(at,"width","100%"),z(er,"class","row"),ye(er,"display","flex"),ye(er,"cursor","pointer"),z(er,"data-bs-toggle","collapse"),z(er,"data-bs-target","#acc-type-info"),z(er,"aria-expanded","false"),z(er,"aria-controls","acc-type-info"),z(Hi,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Hi,"class","svelte-p0yy5r"),z(Mt,"class","card card-body svelte-p0yy5r"),z(Zt,"class","collapse svelte-p0yy5r"),z(Zt,"id","acc-type-info"),z(vt,"class","div-grey-box svelte-p0yy5r"),ye(Za,"color","gray"),ye(Za,"font-size","14pt"),z(ho,"class","blocktitle"),ye(ho,"margin","0"),ye(ho,"width","100%"),z(ji,"class","row"),ye(ji,"display","flex"),ye(ji,"cursor","pointer"),z(ji,"data-bs-toggle","collapse"),z(ji,"data-bs-target","#adapt-info"),z(ji,"aria-expanded","false"),z(ji,"aria-controls","adapt-info"),z(Ms,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Ms,"class","svelte-p0yy5r"),z(Zo,"class","card card-body svelte-p0yy5r"),z(_s,"class","collapse svelte-p0yy5r"),z(_s,"id","adapt-info"),z(bn,"class","div-grey-box svelte-p0yy5r"),ye(Nn,"color","gray"),ye(Nn,"font-size","14pt"),z(dr,"class","blocktitle"),ye(dr,"margin","0"),ye(dr,"width","100%"),z(Ra,"class","row"),ye(Ra,"display","flex"),ye(Ra,"cursor","pointer"),z(Ra,"data-bs-toggle","collapse"),z(Ra,"data-bs-target","#heat-info"),z(Ra,"aria-expanded","false"),z(Ra,"aria-controls","heat-info"),z(Bl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(Bl,"class","svelte-p0yy5r"),z(eu,"class","card card-body svelte-p0yy5r"),z(Ks,"class","collapse svelte-p0yy5r"),z(Ks,"id","heat-info"),z(Ga,"class","div-grey-box svelte-p0yy5r"),ye($u,"color","gray"),ye($u,"font-size","14pt"),z(ru,"class","blocktitle"),ye(ru,"margin","0"),ye(ru,"width","100%"),z(Ls,"class","row"),ye(Ls,"display","flex"),ye(Ls,"cursor","pointer"),z(Ls,"data-bs-toggle","collapse"),z(Ls,"data-bs-target","#renew-info"),z(Ls,"aria-expanded","false"),z(Ls,"aria-controls","renew-info"),z(xs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(xs,"class","svelte-p0yy5r"),z(Ol,"class","card card-body svelte-p0yy5r"),z(ec,"class","collapse svelte-p0yy5r"),z(ec,"id","renew-info"),z(Xs,"class","div-grey-box svelte-p0yy5r"),ye(tc,"color","gray"),ye(tc,"font-size","14pt"),z(nu,"class","blocktitle"),ye(nu,"margin","0"),ye(nu,"width","100%"),z(ws,"class","row"),ye(ws,"display","flex"),ye(ws,"cursor","pointer"),z(ws,"data-bs-toggle","collapse"),z(ws,"data-bs-target","#tenure-info"),z(ws,"aria-expanded","false"),z(ws,"aria-controls","tenure-info"),z(vl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(vl,"class","svelte-p0yy5r"),z(Vl,"class","card card-body svelte-p0yy5r"),z(ku,"class","collapse svelte-p0yy5r"),z(ku,"id","tenure-info"),z(Fl,"class","div-grey-box svelte-p0yy5r"),ye(ic,"color","gray"),ye(ic,"font-size","14pt"),z(au,"class","blocktitle"),ye(au,"margin","0"),ye(au,"width","100%"),z(Ko,"class","row"),ye(Ko,"display","flex"),ye(Ko,"cursor","pointer"),z(Ko,"data-bs-toggle","collapse"),z(Ko,"data-bs-target","#car-info"),z(Ko,"aria-expanded","false"),z(Ko,"aria-controls","car-info"),z(ac,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),z(ac,"class","svelte-p0yy5r"),z(nc,"class","card card-body svelte-p0yy5r"),z(Io,"class","collapse svelte-p0yy5r"),z(Io,"id","car-info"),z(Ws,"class","div-grey-box svelte-p0yy5r"),z(dt,"class","grid mt svelte-p0yy5r"),Gu(()=>c[40].call(dt)),z(Ce,"class","accordion-body"),z(Ee,"id","panelsStayOpen-collapseSix"),z(Ee,"class","accordion-collapse collapse svelte-p0yy5r"),z(Ee,"aria-labelledby","panelsStayOpen-headingSix"),z(se,"class","accordion-item"),z(h,"class","accordion-item")},m(Be,ot){ke(Be,h,ot),P(h,f),P(f,y),P(y,x),P(x,_),P(h,o),P(h,T),P(T,k),P(k,B),P(k,U),P(k,V),P(k,le),P(le,ee),P(k,ze),P(k,ve),P(ve,Ie),P(Ie,Ve),P(Ve,At),P(At,Lt),P(At,ct),ct.innerHTML=Qe,P(Ie,Sr),P(Ie,ur),P(ur,Jt),P(Jt,Et),P(Jt,bt),P(bt,vr),P(vr,Ot),P(Ie,kr),P(Ie,Ye),Cr(Qt,Ye,null),P(Ie,Wr),Ho&&Ho.m(Ie,null),P(Ie,ri),P(Ie,mr),Cr(pt,mr,null),P(ve,rt),P(ve,ir),P(ir,Ri),P(Ri,Kn),P(ir,Ti),Cr(Ei,ir,null),P(ve,ii),P(ve,Zi),P(Zi,Yt),P(Yt,Ai),P(Ai,Fa),P(Ai,It),It.innerHTML=Pt,P(Zi,ni),P(Zi,Ir),P(Ir,br),P(br,Ji),P(br,ci),P(ci,Si),P(Si,jr),P(Zi,cr),Cr(nr,Zi,null),hi=Ku(ve,c[35].bind(ve)),P(h,pi),P(h,Yi),P(Yi,ai),P(ai,Bi),P(Bi,la),P(la,Ja),P(Yi,Ya),P(Yi,_n),P(_n,kn),P(kn,fi),P(kn,Qi),P(kn,Qa),P(kn,ln),P(ln,Qo),P(ln,$i),P($i,ki),P(ki,Jr),P(Jr,Gi),P(Gi,In),P(Gi,un),un.innerHTML=Gr,P(ki,O),P(ki,j),P(j,Z),P(Z,$),P(Z,ie),P(ie,de),P(de,ge),P(ki,G),Cr(te,ki,null),P($i,we),P($i,Ne),P(Ne,je),P(je,Te),P(Te,qe),P(Te,it),it.innerHTML=nt,P(Ne,Pe),P(Ne,Xe),P(Xe,Ke),P(Ke,Je),P(Ke,Ct),P(Ct,$e),P($e,Gt),P(Ne,yr),Cr(Bt,Ne,null),P($i,qt),P($i,Dt),P(Dt,gr),P(gr,Ft),P(Ft,Dr),P(Ft,ar),ar.innerHTML=Wt,P(Dt,Ht),P(Dt,Tr),P(Tr,Tn),P(Tn,oi),P(Tn,di),P(di,$a),P($a,ua),P(Dt,Kr),Cr(An,Dt,null),Fr=Ku($i,c[36].bind($i)),P(h,xr),P(h,Br),P(Br,or),P(or,zi),P(zi,Ii),P(Ii,tl),P(Br,Fi),P(Br,en),P(en,Vr),P(Vr,Vi),P(Vr,Ki),P(Vr,eo),P(Vr,Pn),P(Pn,Ea),P(Vr,ca),P(Vr,ha),P(ha,vn),P(vn,to),P(to,Sa),P(Sa,Co),P(Sa,Cn),Cn.innerHTML=rl,P(vn,$o),P(vn,pa),P(pa,Hn),P(Hn,Mn),P(Hn,Xn),P(Xn,xe),P(xe,Yr),P(vn,Hr),Cr(hr,vn,null),P(ha,ro),P(ha,mi),P(mi,qr),P(qr,ka),P(ka,as),P(ka,Mo),Mo.innerHTML=Ju,P(mi,il),P(mi,Va),P(Va,mo),P(mo,Bs),P(mo,os),P(os,nl),P(nl,Hl),P(mi,Wn),Cr(tn,mi,null),P(ha,Ia),P(ha,gi),P(gi,fa),P(fa,Pi),P(Pi,es),P(Pi,Ta),Ta.innerHTML=da,P(gi,Ni),P(gi,io),P(io,Aa),P(Aa,wn),P(Aa,Is),P(Is,Ts),P(Ts,pr),P(gi,Jn),Cr(si,gi,null),cn=Ku(ha,c[37].bind(ha)),P(h,rn),P(h,_i),P(_i,Os),P(Os,Yn),P(Yn,no),P(no,Do),P(_i,ao),P(_i,ss),P(ss,za),P(za,Dn),P(za,yo),P(za,Ln),P(za,hn),P(hn,Fs),P(za,wr),P(za,ma),P(ma,Ue),P(Ue,_t),P(_t,Rn),P(Rn,go),P(Rn,_o),_o.innerHTML=Xl,P(Ue,oo),P(Ue,Lo),P(Lo,ya),P(ya,Vs),P(ya,vo),P(vo,ts),P(ts,As),P(Ue,so),Cr(ls,Ue,null),P(ma,zs),P(ma,Pa),P(Pa,Bn),P(Bn,nn),P(nn,ol),P(nn,rs),rs.innerHTML=gu,P(Pa,_u),P(Pa,Ro),P(Ro,us),P(us,Wl),P(us,Ps),P(Ps,Qn),P(Qn,zl),P(Pa,sl),Cr(cs,Pa,null),P(ma,Ns),P(ma,bo),P(bo,On),P(On,Lr),P(Lr,ll),P(Lr,En),En.innerHTML=Cs,P(bo,sr),P(bo,Rr),P(Rr,Sn),P(Sn,Us),P(Sn,xo),P(xo,Bo),P(Bo,Pl),P(bo,vu),Cr(wo,bo,null),ul=Ku(ma,c[38].bind(ma)),P(h,Oo),P(h,Nr),P(Nr,Fo),P(Fo,ga),P(ga,Zr),P(Zr,ht),P(Nr,$n),P(Nr,is),P(is,_a),P(_a,lo),P(_a,cl),P(_a,et),P(_a,js),P(js,hl),P(_a,Cl),P(_a,vi),P(vi,li),P(li,Ca),P(Ca,Na),P(Na,Ma),P(Na,Da),Da.innerHTML=Yu,P(Na,qs),P(li,Qu),P(li,pl),P(pl,Ua),P(Ua,Eo),P(Ua,$t),P($t,Vo),P(Vo,No),P(li,ea),Cr(Uo,li,null),P(vi,Zs),P(vi,ta),P(ta,Ui),P(Ui,jo),P(jo,St),P(jo,ft),ft.innerHTML=zc,P(ta,La),P(ta,ja),P(ja,pn),P(pn,hs),P(pn,fl),P(fl,Ml),P(Ml,Ur),P(ta,Fn),Cr(dl,ta,null),P(vi,ml),P(vi,ps),P(ps,ra),P(ra,fn),P(fn,Dl),P(fn,uo),uo.innerHTML=Pc,P(fn,Ll),P(ps,Jl),P(ps,yl),P(yl,fs),P(fs,gl),P(fs,_l),P(_l,ds),P(ds,Gs),P(ps,bu),Cr(So,ps,null),P(vi,qo),P(vi,ms),P(ms,co),P(co,ys),P(ys,xu),P(ys,n),n.innerHTML=s,P(ms,a),P(ms,u),P(u,m),P(m,w),P(m,E),P(E,I),P(I,D),P(ms,N),Cr(J,ms,null),Y=Ku(vi,c[39].bind(vi)),P(h,Q),P(h,se),P(se,ae),P(ae,ce),P(ce,re),P(re,fe),P(se,_e),P(se,Ee),P(Ee,Ce),P(Ce,Me),P(Ce,Ze),P(Ce,We),P(Ce,He),P(He,ut),P(Ce,kt),P(Ce,dt),P(dt,vt),P(vt,er),P(er,at),P(at,Ut),P(at,Kt),Kt.innerHTML=jt,P(vt,Nt),P(vt,Zt),P(Zt,Mt),P(Mt,Rt),P(Mt,Hi),P(Hi,Ci),P(Ci,va),P(vt,Vn),Cr(ui,vt,null),P(dt,on),P(dt,bn),P(bn,ji),P(ji,ho),P(ho,qa),P(ho,Za),Za.innerHTML=gs,P(bn,Yl),P(bn,_s),P(_s,Zo),P(Zo,Rl),P(Zo,Ms),P(Ms,Go),P(Go,Ql),P(bn,vs),Cr(qi,bn,null),P(dt,Ds),P(dt,Ga),P(Ga,Ra),P(Ra,dr),P(dr,ko),P(dr,Nn),Nn.innerHTML=$l,P(Ga,Jc),P(Ga,Ks),P(Ks,eu),P(eu,tu),P(eu,Bl),P(Bl,Hs),P(Hs,wu),P(Ga,Yc),Cr(bs,Ga,null),P(dt,po),P(dt,Xs),P(Xs,Ls),P(Ls,ru),P(ru,tp),P(ru,$u),$u.innerHTML=kd,P(Xs,Qc),P(Xs,ec),P(ec,Ol),P(Ol,Sh),P(Ol,xs),P(xs,iu),P(iu,rp),P(Xs,ip),Cr(Eu,Xs,null),P(Xs,np),P(Xs,ap),P(dt,op),P(dt,Fl),P(Fl,ws),P(ws,nu),P(nu,Su),P(nu,tc),tc.innerHTML=Un,P(Fl,Cc),P(Fl,ku),P(ku,Vl),P(Vl,Mc),P(Vl,vl),P(vl,Dc),P(Dc,kh),P(Fl,rc),Cr(Nl,Fl,null),P(dt,$c),P(dt,Ws),P(Ws,Ko),P(Ko,au),P(au,eh),P(au,ic),ic.innerHTML=sp,P(Ws,th),P(Ws,Io),P(Io,nc),P(nc,lp),P(nc,ac),P(ac,rh),P(rh,Ih),P(Ws,Iu),Cr(Tu,Ws,null),P(Ws,up),P(Ws,Th),cp=Ku(dt,c[40].bind(dt)),Ul=!0},p(Be,ot){(!Ul||ot[0]&2)&&R!==(R=Be[1].name+"")&&gt(U,R);const Au={};ot[0]&2&&(Au.data=Be[1]&&Be[14](["age"])),ot[0]&4096&&(Au.zKey=Be[12]),Qt.$set(Au),!Be[5]&&Be[13]?Ho?Ho.p(Be,ot):(Ho=sg(Be),Ho.c(),Ho.m(Ie,ri)):Ho&&(Ho.d(1),Ho=null);const jl={};ot[0]&2&&(jl.data=Be[1]&&Be[14](["age"])),ot[0]&4096&&(jl.zkey=Be[12]),pt.$set(jl);const To={};ot[0]&2&&(To.data=Be[1]&&Be[14](["sex"])),ot[0]&4096&&(To.zKey=Be[12]),ot[0]&8192&&(To.label=Be[13]),Ei.$set(To);const oc={};ot[0]&2&&(oc.data=Be[1]&&Be[14](["hh_size"])),ot[0]&4096&&(oc.zKey=Be[12]),ot[0]&8192&&(oc.label=Be[13]),nr.$set(oc),(!Ul||ot[0]&2)&&Oi!==(Oi=Be[1].name+"")&&gt(Qi,Oi);const Js={};ot[0]&2&&(Js.data=Be[1]&&Be[14](["cob"])),ot[0]&4096&&(Js.zKey=Be[12]),ot[0]&8192&&(Js.label=Be[13]),te.$set(Js);const sc={};ot[0]&2&&(sc.data=Be[1]&&Be[14](["passport"])),ot[0]&4096&&(sc.zKey=Be[12]),ot[0]&8192&&(sc.label=Be[13]),Bt.$set(sc);const ns={};ot[0]&2&&(ns.data=Be[1]&&Be[14](["natid"])),ot[0]&4096&&(ns.zKey=Be[12]),ot[0]&8192&&(ns.label=Be[13]),An.$set(ns),(!Ul||ot[0]&2)&&zn!==(zn=Be[1].name+"")&&gt(Ki,zn);const Xo={};ot[0]&2&&(Xo.data=Be[1]&&Be[14](["mainlang"])),ot[0]&4096&&(Xo.zKey=Be[12]),ot[0]&8192&&(Xo.label=Be[13]),hr.$set(Xo);const lc={};ot[0]&2&&(lc.data=Be[1]&&Be[14](["irish"])),ot[0]&4096&&(lc.zKey=Be[12]),ot[0]&8192&&(lc.label=Be[13]),tn.$set(lc);const zu={};ot[0]&2&&(zu.data=Be[1]&&Be[14](["ulster"])),ot[0]&4096&&(zu.zKey=Be[12]),ot[0]&8192&&(zu.label=Be[13]),si.$set(zu),(!Ul||ot[0]&2)&&al!==(al=Be[1].name+"")&&gt(yo,al);const Lc={};ot[0]&2&&(Lc.data=Be[1]&&Be[14](["religion"])),ot[0]&4096&&(Lc.zKey=Be[12]),ot[0]&8192&&(Lc.label=Be[13]),ls.$set(Lc);const uc={};ot[0]&2&&(uc.data=Be[1]&&Be[14](["religion_or_religion_brought_up_in"])),ot[0]&4096&&(uc.zKey=Be[12]),ot[0]&8192&&(uc.label=Be[13]),cs.$set(uc);const ou={};ot[0]&2&&(ou.data=Be[1]&&Be[14](["ethnic"])),ot[0]&4096&&(ou.zKey=Be[12]),ot[0]&8192&&(ou.label=Be[13]),wo.$set(ou),(!Ul||ot[0]&2)&&an!==(an=Be[1].name+"")&&gt(cl,an);const jn={};ot[0]&2&&(jn.data=Be[1]&&Be[14](["general_health"])),ot[0]&4096&&(jn.zKey=Be[12]),ot[0]&8192&&(jn.label=Be[13]),Uo.$set(jn);const cc={};ot[0]&2&&(cc.data=Be[1]&&Be[14](["long_term_disability"])),ot[0]&4096&&(cc.zKey=Be[12]),ot[0]&8192&&(cc.label=Be[13]),dl.$set(cc);const Pu={};ot[0]&2&&(Pu.data=Be[1]&&Be[14](["number_of_long_term_health"])),ot[0]&4096&&(Pu.zKey=Be[12]),ot[0]&8192&&(Pu.label=Be[13]),So.$set(Pu);const Cu={};ot[0]&2&&(Cu.data=Be[1]&&Be[14](["provision_care"])),ot[0]&4096&&(Cu.zKey=Be[12]),ot[0]&8192&&(Cu.label=Be[13]),J.$set(Cu),(!Ul||ot[0]&2)&&Oe!==(Oe=Be[1].name+"")&&gt(Ze,Oe);const su={};ot[0]&2&&(su.data=Be[1]&&Be[14](["accommodation_type"])),ot[0]&4096&&(su.zKey=Be[12]),ot[0]&8192&&(su.label=Be[13]),ui.$set(su);const Mu={};ot[0]&2&&(Mu.data=Be[1]&&Be[14](["number_of_adaptations"])),ot[0]&4096&&(Mu.zKey=Be[12]),ot[0]&8192&&(Mu.label=Be[13]),qi.$set(Mu);const bl={};ot[0]&2&&(bl.data=Be[1]&&Be[14](["central_heating"])),ot[0]&4096&&(bl.zKey=Be[12]),ot[0]&8192&&(bl.label=Be[13]),bs.$set(bl);const hc={};ot[0]&2&&(hc.data=Be[1]&&Be[14](["renewable_energy"])),ot[0]&4096&&(hc.zKey=Be[12]),ot[0]&8192&&(hc.label=Be[13]),Eu.$set(hc);const Du={};ot[0]&2&&(Du.data=Be[1]&&Be[14](["hh_tenure"])),ot[0]&4096&&(Du.zKey=Be[12]),ot[0]&8192&&(Du.label=Be[13]),Nl.$set(Du);const pc={};ot[0]&2&&(pc.data=Be[1]&&Be[14](["car_or_van"])),ot[0]&4096&&(pc.zKey=Be[12]),ot[0]&8192&&(pc.label=Be[13]),Tu.$set(pc)},i(Be){Ul||(mt(Qt.$$.fragment,Be),mt(pt.$$.fragment,Be),mt(Ei.$$.fragment,Be),mt(nr.$$.fragment,Be),mt(te.$$.fragment,Be),mt(Bt.$$.fragment,Be),mt(An.$$.fragment,Be),mt(hr.$$.fragment,Be),mt(tn.$$.fragment,Be),mt(si.$$.fragment,Be),mt(ls.$$.fragment,Be),mt(cs.$$.fragment,Be),mt(wo.$$.fragment,Be),mt(Uo.$$.fragment,Be),mt(dl.$$.fragment,Be),mt(So.$$.fragment,Be),mt(J.$$.fragment,Be),mt(ui.$$.fragment,Be),mt(qi.$$.fragment,Be),mt(bs.$$.fragment,Be),mt(Eu.$$.fragment,Be),mt(Nl.$$.fragment,Be),mt(Tu.$$.fragment,Be),Ul=!0)},o(Be){wt(Qt.$$.fragment,Be),wt(pt.$$.fragment,Be),wt(Ei.$$.fragment,Be),wt(nr.$$.fragment,Be),wt(te.$$.fragment,Be),wt(Bt.$$.fragment,Be),wt(An.$$.fragment,Be),wt(hr.$$.fragment,Be),wt(tn.$$.fragment,Be),wt(si.$$.fragment,Be),wt(ls.$$.fragment,Be),wt(cs.$$.fragment,Be),wt(wo.$$.fragment,Be),wt(Uo.$$.fragment,Be),wt(dl.$$.fragment,Be),wt(So.$$.fragment,Be),wt(J.$$.fragment,Be),wt(ui.$$.fragment,Be),wt(qi.$$.fragment,Be),wt(bs.$$.fragment,Be),wt(Eu.$$.fragment,Be),wt(Nl.$$.fragment,Be),wt(Tu.$$.fragment,Be),Ul=!1},d(Be){Be&&M(h),Mr(Qt),Ho&&Ho.d(),Mr(pt),Mr(Ei),Mr(nr),hi(),Mr(te),Mr(Bt),Mr(An),Fr(),Mr(hr),Mr(tn),Mr(si),cn(),Mr(ls),Mr(cs),Mr(wo),ul(),Mr(Uo),Mr(dl),Mr(So),Mr(J),Y(),Mr(ui),Mr(qi),Mr(bs),Mr(Eu),Mr(Nl),Mr(Tu),cp()}}}function sg(c){let h,f,y,x,_;return{c(){h=K("div"),f=zo("svg"),y=zo("rect"),x=Le(),_=he(c[13]),this.h()},l(o){h=H(o,"DIV",{class:!0});var T=X(h);f=Po(T,"svg",{width:!0,height:!0,style:!0});var k=X(f);y=Po(k,"rect",{width:!0,height:!0,style:!0}),X(y).forEach(M),k.forEach(M),x=Re(T),_=pe(T,c[13]),T.forEach(M),this.h()},h(){z(y,"width","25"),z(y,"height","4"),ye(y,"fill","#CEDC20"),z(f,"width","25"),z(f,"height","4"),ye(f,"display","inline-block"),ye(f,"margin-bottom","3px"),z(h,"class","text-small muted; ")},m(o,T){ke(o,h,T),P(h,f),P(f,y),P(h,x),P(h,_)},p(o,T){T[0]&8192&&gt(_,o[13])},d(o){o&&M(h)}}}function O1(c){let h,f,y=c[1]&&c[2]&&Hy(c);return{c(){y&&y.c(),h=sa()},l(x){y&&y.l(x),h=sa()},m(x,_){y&&y.m(x,_),ke(x,h,_),f=!0},p(x,_){x[1]&&x[2]?y?(y.p(x,_),_[0]&6&&mt(y,1)):(y=Hy(x),y.c(),mt(y,1),y.m(h.parentNode,h)):y&&(Tl(),wt(y,1,1,()=>{y=null}),Al())},i(x){f||(mt(y),f=!0)},o(x){wt(y),f=!1},d(x){y&&y.d(x),x&&M(h)}}}function F1(c){let h,f,y,x,_,o,T,k,B,R,U,V,le,ee,ze,ve;return document.title=h=c[1].name+" Census Data",le=new r1({}),ze=new Hg({props:{column:"wide",$$slots:{default:[O1]},$$scope:{ctx:c}}}),{c(){f=K("meta"),y=K("meta"),_=K("meta"),o=K("meta"),k=K("meta"),R=K("meta"),V=Le(),zr(le.$$.fragment),ee=Le(),zr(ze.$$.fragment),this.h()},l(Ie){const Ve=Zg('[data-svelte="svelte-14ulspn"]',document.head);f=H(Ve,"META",{name:!0,content:!0}),y=H(Ve,"META",{property:!0,content:!0}),_=H(Ve,"META",{property:!0,content:!0}),o=H(Ve,"META",{property:!0,content:!0}),k=H(Ve,"META",{property:!0,content:!0}),R=H(Ve,"META",{name:!0,content:!0}),Ve.forEach(M),V=Re(Ie),Pr(le.$$.fragment,Ie),ee=Re(Ie),Pr(ze.$$.fragment,Ie),this.h()},h(){z(f,"name","description"),z(f,"content",""),z(y,"property","og:title"),z(y,"content",x=c[1].name+" Census Data"),z(_,"property","og:type"),z(_,"content","website"),z(o,"property","og:url"),z(o,"content",T=pd.base+"/"+c[1].code+"/"),z(k,"property","og:description"),z(k,"content",B="Explore census data for "+c[1].name+"."),z(R,"name","description"),z(R,"content",U="Explore census data for "+c[1].name+".")},m(Ie,Ve){P(document.head,f),P(document.head,y),P(document.head,_),P(document.head,o),P(document.head,k),P(document.head,R),ke(Ie,V,Ve),Cr(le,Ie,Ve),ke(Ie,ee,Ve),Cr(ze,Ie,Ve),ve=!0},p(Ie,Ve){(!ve||Ve[0]&2)&&h!==(h=Ie[1].name+" Census Data")&&(document.title=h),(!ve||Ve[0]&2&&x!==(x=Ie[1].name+" Census Data"))&&z(y,"content",x),(!ve||Ve[0]&2&&T!==(T=pd.base+"/"+Ie[1].code+"/"))&&z(o,"content",T),(!ve||Ve[0]&2&&B!==(B="Explore census data for "+Ie[1].name+"."))&&z(k,"content",B),(!ve||Ve[0]&2&&U!==(U="Explore census data for "+Ie[1].name+"."))&&z(R,"content",U);const At={};Ve[0]&16383|Ve[1]&16777216&&(At.$$scope={dirty:Ve,ctx:Ie}),ze.$set(At)},i(Ie){ve||(mt(le.$$.fragment,Ie),mt(ze.$$.fragment,Ie),ve=!0)},o(Ie){wt(le.$$.fragment,Ie),wt(ze.$$.fragment,Ie),ve=!1},d(Ie){M(f),M(y),M(_),M(o),M(k),M(R),Ie&&M(V),Mr(le,Ie),Ie&&M(ee),Mr(ze,Ie)}}}const G1=!0;async function lg(c,h){return await(await h(pd.app_json_data+c+".json")).json()}async function K1({params:c,fetch:h}){let f=c.code,y=await i_(pd.search_data,h),x={};y.forEach(k=>x[k.code]=k.name),y.forEach(k=>{k.typepl=wa[k.type].pl,k.typenm=wa[k.type].name,k.typestr=x[k.parent]?`${wa[k.type].name} within ${x[k.parent]}`:""});let _=y.sort((k,B)=>k.name.localeCompare(B.name)),o=await lg("N92000002",h),T=await lg(f,h);return{props:{search_data:_,place:T,ni:o}}}function V1(c,h,f){let y,x,_,o,T,{search_data:k,place:B,ni:R}=h,U,V,le=null,ee=!1,ze={selected:null,type:null,childType:null,highlighted:[],hovered:null},ve={};Object.keys(Hc).forEach(It=>f(9,ve[It]=!1,ve));function Ie(It){const Pt=(nr,hi)=>nr+hi;let ni=It[0],Ir="perc",br=B.data[ni][Ir][2021],Ji=B.data[ni][Ir][2011],ci=R.data[ni][Ir][2021],Si=Um[ni].map(nr=>nr.category),jr=Um[ni].map(nr=>nr.label?nr.label:nr.category);return Si.map((nr,hi)=>Array.isArray(nr)?{x:jr[hi],y:nr.map(pi=>br[pi]).reduce(Pt,0),ni:nr.map(pi=>ci[pi]).reduce(Pt,0),prev:nr.map(pi=>Ji[pi]).reduce(Pt,0)}:{x:jr[hi],y:br[nr],ni:ci[nr],prev:Ji[nr]})}function Ve(It){le&&le.fitBounds(It,{padding:20})}function At(It){let Pt=JSON.parse(JSON.stringify(ze)),ni=It.code,Ir=It.type,br=It.children[0]?It.children.map(cr=>cr.code):[],Ji=It.type=="rgn"?"cty":br[0]?It.children[0].type:null;f(8,ze.selected=ni,ze),f(8,ze.type=Ir,ze),f(8,ze.childType=Ji,ze),f(8,ze.highlighted=br,ze);let ci=Object.keys(Hc),Si=["fill-color","fill-opacity"],jr=["line-color","line-width","line-opacity"];le&&(ze.type!=Pt.type||ze.childType!=Pt.childType)&&(ci.forEach(cr=>{let nr=cr==Ir||Ji&&cr==Ji?"visible":"none";le.setLayoutProperty(cr+"-fill","visibility",nr),le.setLayoutProperty(cr+"-bounds","visibility",nr),It.parents[0]&&le.setLayoutProperty(cr+"-self","visibility",nr),f(9,ve[cr]=cr==Ji,ve)}),It.parents[0]&&(Si.forEach(cr=>le.setPaintProperty(Ir+"-fill",cr,Wa[br[0]?"fill-active":"fill-self"][cr])),jr.forEach(cr=>{le.setPaintProperty(Ir+"-bounds",cr,Wa["line-active"][cr]),le.setPaintProperty(Ir+"-self",cr,Wa["line-self"][cr])})),Ji&&(Si.forEach(cr=>le.setPaintProperty(Ji+"-fill",cr,Wa["fill-child"][cr])),jr.forEach(cr=>le.setPaintProperty(Ji+"-bounds",cr,Wa["line-child"][cr]))))}function Lt(It){At(It),Ve(It.bounds)}function ct(It){Gm(`${Wu}/${It.detail.code}/`,{noscroll:!0})}function Qe(It){Gm(`${Wu}/${It.detail.value}/`,{noscroll:!0})}function Sr(){f(6,V=U<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const ur=()=>f(5,o=!0),Jt=()=>f(4,ee=!1),Et=()=>f(11,_=!1),bt=()=>f(5,o=!0),vr=()=>f(4,ee=!1),Ot=()=>f(11,_=!1),kr=()=>f(11,_=!0),Ye=()=>f(5,o=!1),Qt=()=>f(4,ee=!1),Wr=()=>f(4,ee=!0),ri=()=>f(5,o=!1),mr=()=>f(11,_=!1),pt=()=>f(4,ee=!1),rt=()=>f(5,o=!0),ir=()=>f(11,_=!1);function Ri(It){le=It,f(7,le)}function Kn(){U=this.clientWidth,f(3,U)}function Ti(){U=this.clientWidth,f(3,U)}function Ei(){U=this.clientWidth,f(3,U)}function ii(){U=this.clientWidth,f(3,U)}function Zi(){U=this.clientWidth,f(3,U)}function Yt(){U=this.clientWidth,f(3,U)}function Ai(){U=this.clientWidth,f(3,U)}function Fa(){U=this.clientWidth,f(3,U)}return c.$$set=It=>{"search_data"in It&&f(0,k=It.search_data),"place"in It&&f(1,B=It.place),"ni"in It&&f(2,R=It.ni)},c.$$.update=()=>{c.$$.dirty[0]&8&&U&&Sr(),c.$$.dirty[0]&18&&f(13,y=ee?"Same area 2011":B&&B.parents[0]?"NI 2021":null),c.$$.dirty[0]&50&&f(12,x=o?null:ee?"prev":!ee&&B.type!="ni"?"ni":null),c.$$.dirty[0]&2&&B&&Lt(B),c.$$.dirty[0]&2&&f(10,T=!(B.type!="ni"&&B.type!="lgd"))},f(5,o=!0),f(11,_=!1),[k,B,R,U,ee,o,V,le,ze,ve,T,_,x,y,Ie,ct,Qe,ur,Jt,Et,bt,vr,Ot,kr,Ye,Qt,Wr,ri,mr,pt,rt,ir,Ri,Kn,Ti,Ei,ii,Zi,Yt,Ai,Fa]}class H1 extends Es{constructor(h){super(),Ss(this,h,V1,F1,ks,{search_data:0,place:1,ni:2},null,[-1,-1])}}export{H1 as default,K1 as load,G1 as prerender};
