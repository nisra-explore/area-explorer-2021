import{S as gl,i as _l,s as bl,O as um,l as D,m as M,n as R,h as T,p as S,q as re,J as mn,b as ze,Q as cm,R as hm,T as pm,f as rt,t as ht,a as xe,c as we,I as E,M as Fn,E as kn,G as Kc,U as bx,V as J1,W as up,r as ee,u as te,v as pt,e as La,X as Hc,Y as yl,Z as vl,g as Uu,d as qu,j as xx,o as wx,K as iy,_ as or,$ as si,a0 as es,a1 as ts,w as Yt,x as Jt,y as Qt,B as $t,P as T2,a2 as A2,a3 as zg,a4 as Pg,a5 as z2,a6 as Zy,C as Fy,z as Ny,A as Uy}from"../../chunks/index-06ab0f50.js";import{g as xa,a as Gy,S as P2,m as qp,b as Q1,c as C2,d as go,e as $1}from"../../chunks/Section-17337951.js";import{b as Mh}from"../../chunks/paths-1c47712a.js";import{c as Kf,w as li,d as Za}from"../../chunks/singletons-e0a6622d.js";/* empty css                                                                 */var eb={},pg={},fg=34,Ym=10,dg=13;function Ex(u){return new Function("d","return {"+u.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function D2(u,h){var f=Ex(u);return function(y,v){return h(f(y),v,u)}}function tb(u){var h=Object.create(null),f=[];return u.forEach(function(y){for(var v in y)v in h||f.push(h[v]=v)}),f}function mu(u,h){var f=u+"",y=f.length;return y<h?new Array(h-y+1).join(0)+f:f}function M2(u){return u<0?"-"+mu(-u,6):u>9999?"+"+mu(u,6):mu(u,4)}function L2(u){var h=u.getUTCHours(),f=u.getUTCMinutes(),y=u.getUTCSeconds(),v=u.getUTCMilliseconds();return isNaN(u)?"Invalid Date":M2(u.getUTCFullYear())+"-"+mu(u.getUTCMonth()+1,2)+"-"+mu(u.getUTCDate(),2)+(v?"T"+mu(h,2)+":"+mu(f,2)+":"+mu(y,2)+"."+mu(v,3)+"Z":y?"T"+mu(h,2)+":"+mu(f,2)+":"+mu(y,2)+"Z":f||h?"T"+mu(h,2)+":"+mu(f,2)+"Z":"")}function R2(u){var h=new RegExp('["'+u+`
\r]`),f=u.charCodeAt(0);function y(j,q){var pe,he,ke=v(j,function(Ee,Be){if(pe)return pe(Ee,Be-1);he=Ee,pe=q?D2(Ee,q):Ex(Ee)});return ke.columns=he||[],ke}function v(j,q){var pe=[],he=j.length,ke=0,Ee=0,Be,Fe=he<=0,Ft=!1;j.charCodeAt(he-1)===Ym&&--he,j.charCodeAt(he-1)===dg&&--he;function Ct(){if(Fe)return pg;if(Ft)return Ft=!1,eb;var et,vr=ke,pr;if(j.charCodeAt(vr)===fg){for(;ke++<he&&j.charCodeAt(ke)!==fg||j.charCodeAt(++ke)===fg;);return(et=ke)>=he?Fe=!0:(pr=j.charCodeAt(ke++))===Ym?Ft=!0:pr===dg&&(Ft=!0,j.charCodeAt(ke)===Ym&&++ke),j.slice(vr+1,et-1).replace(/""/g,'"')}for(;ke<he;){if((pr=j.charCodeAt(et=ke++))===Ym)Ft=!0;else if(pr===dg)Ft=!0,j.charCodeAt(ke)===Ym&&++ke;else if(pr!==f)continue;return j.slice(vr,et)}return Fe=!0,j.slice(vr,he)}for(;(Be=Ct())!==pg;){for(var mt=[];Be!==eb&&Be!==pg;)mt.push(Be),Be=Ct();q&&(mt=q(mt,Ee++))==null||pe.push(mt)}return pe}function _(j,q){return j.map(function(pe){return q.map(function(he){return V(pe[he])}).join(u)})}function o(j,q){return q==null&&(q=tb(j)),[q.map(V).join(u)].concat(_(j,q)).join(`
`)}function A(j,q){return q==null&&(q=tb(j)),_(j,q).join(`
`)}function z(j){return j.map(F).join(`
`)}function F(j){return j.map(V).join(u)}function V(j){return j==null?"":j instanceof Date?L2(j):h.test(j+="")?'"'+j.replace(/"/g,'""')+'"':j}return{parse:y,parseRows:v,format:o,formatBody:A,formatRows:z,formatRow:F,formatValue:V}}var B2=R2(","),O2=B2.parse;function V2(u){for(var h in u){var f=u[h].trim(),y,v;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(y=+f))f=y;else if(v=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))F2&&!!v[4]&&!v[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;u[h]=f}return u}const F2=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function N2(u,h=window.fetch){let y=await(await h(u)).text();return await O2(y,V2)}function jp(u){let h=Math.round(u)%10;return u==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function Ky(u){return u>0?"increase":u<0?"decrease":"nochange"}function Zp(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"No change"}function Hy(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"<1%"}Kf.disable_scroll_handling;const rb=Kf.goto;Kf.invalidate;Kf.prefetch;Kf.prefetch_routes;Kf.before_navigate;Kf.after_navigate;var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q2={rgb2hsl:ny,rgb2hsv:$y,rgb2hwb:ay,rgb2cmyk:oy,rgb2keyword:sy,rgb2xyz:Cg,rgb2lab:Dg,rgb2lch:j2,hsl2rgb:ev,hsl2hsv:Z2,hsl2hwb:G2,hsl2cmyk:K2,hsl2keyword:H2,hsv2rgb:tv,hsv2hsl:X2,hsv2hwb:W2,hsv2cmyk:Y2,hsv2keyword:J2,hwb2rgb:ly,hwb2hsl:Q2,hwb2hsv:$2,hwb2cmyk:ew,hwb2keyword:tw,cmyk2rgb:uy,cmyk2hsl:rw,cmyk2hsv:iw,cmyk2hwb:nw,cmyk2keyword:aw,keyword2rgb:Hf,keyword2hsl:uw,keyword2hsv:cw,keyword2hwb:hw,keyword2cmyk:pw,keyword2lab:fw,keyword2xyz:dw,xyz2rgb:Sx,xyz2lab:kx,xyz2lch:ow,lab2xyz:Mg,lab2rgb:Ix,lab2lch:Lg,lch2lab:Rg,lch2xyz:sw,lch2rgb:lw};function ny(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,v=Math.min(h,f,y),_=Math.max(h,f,y),o=_-v,A,z,F;return _==v?A=0:h==_?A=(f-y)/o:f==_?A=2+(y-h)/o:y==_&&(A=4+(h-f)/o),A=Math.min(A*60,360),A<0&&(A+=360),F=(v+_)/2,_==v?z=0:F<=.5?z=o/(_+v):z=o/(2-_-v),[A,z*100,F*100]}function $y(u){var h=u[0],f=u[1],y=u[2],v=Math.min(h,f,y),_=Math.max(h,f,y),o=_-v,A,z,F;return _==0?z=0:z=o/_*1e3/10,_==v?A=0:h==_?A=(f-y)/o:f==_?A=2+(y-h)/o:y==_&&(A=4+(h-f)/o),A=Math.min(A*60,360),A<0&&(A+=360),F=_/255*1e3/10,[A,z,F]}function ay(u){var h=u[0],f=u[1],_=u[2],y=ny(u)[0],v=1/255*Math.min(h,Math.min(f,_)),_=1-1/255*Math.max(h,Math.max(f,_));return[y,v*100,_*100]}function oy(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,v,_,o,A;return A=Math.min(1-h,1-f,1-y),v=(1-h-A)/(1-A)||0,_=(1-f-A)/(1-A)||0,o=(1-y-A)/(1-A)||0,[v*100,_*100,o*100,A*100]}function sy(u){return Tx[JSON.stringify(u)]}function Cg(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var v=h*.4124+f*.3576+y*.1805,_=h*.2126+f*.7152+y*.0722,o=h*.0193+f*.1192+y*.9505;return[v*100,_*100,o*100]}function Dg(u){var h=Cg(u),f=h[0],y=h[1],v=h[2],_,o,A;return f/=95.047,y/=100,v/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,v=v>.008856?Math.pow(v,1/3):7.787*v+16/116,_=116*y-16,o=500*(f-y),A=200*(y-v),[_,o,A]}function j2(u){return Lg(Dg(u))}function ev(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,v,_,o,A,z;if(f==0)return z=y*255,[z,z,z];y<.5?_=y*(1+f):_=y+f-y*f,v=2*y-_,A=[0,0,0];for(var F=0;F<3;F++)o=h+1/3*-(F-1),o<0&&o++,o>1&&o--,6*o<1?z=v+(_-v)*6*o:2*o<1?z=_:3*o<2?z=v+(_-v)*(2/3-o)*6:z=v,A[F]=z*255;return A}function Z2(u){var h=u[0],f=u[1]/100,y=u[2]/100,v,_;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,_=(y+f)/2,v=2*f/(y+f),[h,v*100,_*100])}function G2(u){return ay(ev(u))}function K2(u){return oy(ev(u))}function H2(u){return sy(ev(u))}function tv(u){var h=u[0]/60,f=u[1]/100,z=u[2]/100,y=Math.floor(h)%6,v=h-Math.floor(h),_=255*z*(1-f),o=255*z*(1-f*v),A=255*z*(1-f*(1-v)),z=255*z;switch(y){case 0:return[z,A,_];case 1:return[o,z,_];case 2:return[_,z,A];case 3:return[_,o,z];case 4:return[A,_,z];case 5:return[z,_,o]}}function X2(u){var h=u[0],f=u[1]/100,y=u[2]/100,v,_;return _=(2-f)*y,v=f*y,v/=_<=1?_:2-_,v=v||0,_/=2,[h,v*100,_*100]}function W2(u){return ay(tv(u))}function Y2(u){return oy(tv(u))}function J2(u){return sy(tv(u))}function ly(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,v=f+y,_,o,A,z;switch(v>1&&(f/=v,y/=v),_=Math.floor(6*h),o=1-y,A=6*h-_,(_&1)!=0&&(A=1-A),z=f+A*(o-f),_){default:case 6:case 0:r=o,g=z,b=f;break;case 1:r=z,g=o,b=f;break;case 2:r=f,g=o,b=z;break;case 3:r=f,g=z,b=o;break;case 4:r=z,g=f,b=o;break;case 5:r=o,g=f,b=z;break}return[r*255,g*255,b*255]}function Q2(u){return ny(ly(u))}function $2(u){return $y(ly(u))}function ew(u){return oy(ly(u))}function tw(u){return sy(ly(u))}function uy(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,v=u[3]/100,_,o,A;return _=1-Math.min(1,h*(1-v)+v),o=1-Math.min(1,f*(1-v)+v),A=1-Math.min(1,y*(1-v)+v),[_*255,o*255,A*255]}function rw(u){return ny(uy(u))}function iw(u){return $y(uy(u))}function nw(u){return ay(uy(u))}function aw(u){return sy(uy(u))}function Sx(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,v,_,o;return v=h*3.2406+f*-1.5372+y*-.4986,_=h*-.9689+f*1.8758+y*.0415,o=h*.0557+f*-.204+y*1.057,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v=v*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,v=Math.min(Math.max(0,v),1),_=Math.min(Math.max(0,_),1),o=Math.min(Math.max(0,o),1),[v*255,_*255,o*255]}function kx(u){var h=u[0],f=u[1],y=u[2],v,_,o;return h/=95.047,f/=100,y/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,v=116*f-16,_=500*(h-f),o=200*(f-y),[v,_,o]}function ow(u){return Lg(kx(u))}function Mg(u){var h=u[0],f=u[1],y=u[2],v,_,o,A;return h<=8?(_=h*100/903.3,A=7.787*(_/100)+16/116):(_=100*Math.pow((h+16)/116,3),A=Math.pow(_/100,1/3)),v=v/95.047<=.008856?v=95.047*(f/500+A-16/116)/7.787:95.047*Math.pow(f/500+A,3),o=o/108.883<=.008859?o=108.883*(A-y/200-16/116)/7.787:108.883*Math.pow(A-y/200,3),[v,_,o]}function Lg(u){var h=u[0],f=u[1],y=u[2],v,_,o;return v=Math.atan2(y,f),_=v*360/2/Math.PI,_<0&&(_+=360),o=Math.sqrt(f*f+y*y),[h,o,_]}function Ix(u){return Sx(Mg(u))}function Rg(u){var h=u[0],f=u[1],y=u[2],v,_,o;return o=y/360*2*Math.PI,v=f*Math.cos(o),_=f*Math.sin(o),[h,v,_]}function sw(u){return Mg(Rg(u))}function lw(u){return Ix(Rg(u))}function Hf(u){return wg[u]}function uw(u){return ny(Hf(u))}function cw(u){return $y(Hf(u))}function hw(u){return ay(Hf(u))}function pw(u){return oy(Hf(u))}function fw(u){return Dg(Hf(u))}function dw(u){return Cg(Hf(u))}var wg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Tx={};for(var ib in wg)Tx[JSON.stringify(wg[ib])]=ib;var mg=q2,jf=function(){return new cy};for(var Jm in mg){jf[Jm+"Raw"]=function(u){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),mg[u](h)}}(Jm);var nb=/(\w+)2(\w+)/.exec(Jm),yg=nb[1],mw=nb[2];jf[yg]=jf[yg]||{},jf[yg][mw]=jf[Jm]=function(u){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=mg[u](h);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(Jm)}var cy=function(){this.convs={}};cy.prototype.routeSpace=function(u,h){var f=h[0];return f===void 0?this.getValues(u):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(u,f))};cy.prototype.setValues=function(u,h){return this.space=u,this.convs={},this.convs[u]=h,this};cy.prototype.getValues=function(u){var h=this.convs[u];if(!h){var f=this.space,y=this.convs[f];h=jf[f][u](y),this.convs[u]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(u){cy.prototype[u]=function(h){return this.routeSpace(u,arguments)}});var yw=jf,vg=yw,vw=function(u){var h,f,y,v;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(u)){var _=h[1],o=_.replace(/a$/,""),A=o==="cmyk"?4:3;f=vg[o],y=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(F,V){return/%$/.test(F)&&V===A?parseFloat(F)/100:(/%$/.test(F),parseFloat(F))}),_===o&&y.push(1),v=y[A]===void 0?1:y[A],y=y.slice(0,A),f[o]=function(){return y}}else if(/^#[A-Fa-f0-9]+$/.test(u)){var o=u.replace(/^#/,""),A=o.length;f=vg.rgb,y=o.split(A===3?/(.)/:/(..)/),y=y.filter(Boolean).map(function(j){return parseInt(A===3?j+j:j,16)}),v=1,f.rgb=function(){return y},y[0]||(y[0]=0),y[1]||(y[1]=0),y[2]||(y[2]=0)}else f=vg.keyword,f.keyword=function(){return u},y=u,v=1;var z={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{z.rgb=f.rgb(y)}catch{}try{z.hsl=f.hsl(y)}catch{}try{z.hsv=f.hsv(y)}catch{}try{z.cmyk=f.cmyk(y)}catch{}try{z.keyword=f.keyword(y)}catch{}return z.rgb&&(z.hex="#"+z.rgb.map(function(F){var V=F.toString(16);return V.length===1?"0"+V:V}).join("")),z.rgb&&(z.rgba=z.rgb.concat(v)),z.hsl&&(z.hsla=z.hsl.concat(v)),z.hsv&&(z.hsva=z.hsv.concat(v)),z.cmyk&&(z.cmyka=z.cmyk.concat(v)),z};function gw(u){let h,f;const y=u[5].default,v=um(y,u,u[4],null);return{c(){h=D("span"),v&&v.c(),this.h()},l(_){h=M(_,"SPAN",{class:!0,style:!0,role:!0});var o=R(h);v&&v.l(o),o.forEach(T),this.h()},h(){S(h,"class","em svelte-s1t2y4"),re(h,"background-color",u[0]),re(h,"color",u[2]),S(h,"role","presentation"),mn(h,"nowrap",u[1])},m(_,o){ze(_,h,o),v&&v.m(h,null),f=!0},p(_,[o]){v&&v.p&&(!f||o&16)&&cm(v,y,_,_[4],f?pm(y,_[4],o,null):hm(_[4]),null),(!f||o&1)&&re(h,"background-color",_[0]),(!f||o&4)&&re(h,"color",_[2]),o&2&&mn(h,"nowrap",_[1])},i(_){f||(rt(v,_),f=!0)},o(_){ht(v,_),f=!1},d(_){_&&T(h),v&&v.d(_)}}}function _w(u,h,f){let y,{$$slots:v={},$$scope:_}=h,{color:o="lightgrey"}=h,{nowrap:A=!0}=h;function z(V){return(V[0]*299+V[1]*587+V[2]*114)/1e3>125?"black":"white"}let F="black";return u.$$set=V=>{"color"in V&&f(0,o=V.color),"nowrap"in V&&f(1,A=V.nowrap),"$$scope"in V&&f(4,_=V.$$scope)},u.$$.update=()=>{u.$$.dirty&1&&f(3,y=vw(o).rgb),u.$$.dirty&8&&y&&f(2,F=z(y))},[o,A,F,y,_,v]}class rv extends gl{constructor(h){super(),_l(this,h,_w,gw,bl,{color:0,nowrap:1})}}function ab(u,h,f){const y=u.slice();return y[33]=h[f],y[36]=h,y[35]=f,y}function ob(u,h,f){const y=u.slice();return y[33]=h[f],y[34]=h,y[35]=f,y}function bw(u){let h,f,y=(u[0]?u[0]:"Select one")+"",v,_,o,A,z,F;return{c(){h=D("a"),f=D("span"),v=ee(y),_=xe(),o=D("span"),A=ee("\xA0"),this.h()},l(V){h=M(V,"A",{id:!0,class:!0});var j=R(h);f=M(j,"SPAN",{class:!0});var q=R(f);v=te(q,y),q.forEach(T),_=we(j),o=M(j,"SPAN",{class:!0});var pe=R(o);A=te(pe,"\xA0"),pe.forEach(T),j.forEach(T),this.h()},h(){S(f,"class","svelte-13flvue"),S(o,"class","button svelte-13flvue"),mn(o,"search",u[3]),mn(o,"down",!u[3]),S(h,"id","toggle"),S(h,"class","svelte-13flvue")},m(V,j){ze(V,h,j),E(h,f),E(f,v),E(h,_),E(h,o),E(o,A),z||(F=Fn(h,"click",u[12]),z=!0)},p(V,j){j[0]&1&&y!==(y=(V[0]?V[0]:"Select one")+"")&&pt(v,y),j[0]&8&&mn(o,"search",V[3]),j[0]&8&&mn(o,"down",!V[3])},d(V){V&&T(h),z=!1,F()}}}function xw(u){let h,f,y=u[5][u[1]]+"",v,_,o,A,z,F,V,j=u[2]&&sb(u);return{c(){h=D("a"),f=D("span"),v=ee(y),_=xe(),j&&j.c(),o=xe(),A=D("span"),z=ee("\xA0"),this.h()},l(q){h=M(q,"A",{id:!0,class:!0});var pe=R(h);f=M(pe,"SPAN",{class:!0});var he=R(f);v=te(he,y),_=we(he),j&&j.l(he),he.forEach(T),o=we(pe),A=M(pe,"SPAN",{class:!0});var ke=R(A);z=te(ke,"\xA0"),ke.forEach(T),pe.forEach(T),this.h()},h(){S(f,"class","selection svelte-13flvue"),S(A,"class","button close svelte-13flvue"),S(h,"id","toggle"),S(h,"class","selected svelte-13flvue")},m(q,pe){ze(q,h,pe),E(h,f),E(f,v),E(f,_),j&&j.m(f,null),E(h,o),E(h,A),E(A,z),F||(V=[Fn(A,"click",u[14]),Fn(h,"click",u[12])],F=!0)},p(q,pe){pe[0]&34&&y!==(y=q[5][q[1]]+"")&&pt(v,y),q[2]?j?j.p(q,pe):(j=sb(q),j.c(),j.m(f,null)):j&&(j.d(1),j=null)},d(q){q&&T(h),j&&j.d(),F=!1,Kc(V)}}}function sb(u){let h,f=u[5][u[2]]+"",y;return{c(){h=D("small"),y=ee(f),this.h()},l(v){h=M(v,"SMALL",{class:!0});var _=R(h);y=te(_,f),_.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(v,_){ze(v,h,_),E(h,y)},p(v,_){_[0]&36&&f!==(f=v[5][v[2]]+"")&&pt(y,f)},d(v){v&&T(h)}}}function lb(u){let h,f,y,v,_,o;function A(V,j){return V[4].length<3?kw:V[8][0]&&V[2]?Sw:V[8][0]?Ew:ww}let z=A(u),F=z(u);return{c(){h=D("div"),f=D("input"),y=xe(),v=D("ul"),F.c(),this.h()},l(V){h=M(V,"DIV",{id:!0,style:!0,class:!0});var j=R(h);f=M(j,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),y=we(j),v=M(j,"UL",{class:!0});var q=R(v);F.l(q),q.forEach(T),j.forEach(T),this.h()},h(){S(f,"type","text"),S(f,"placeholder",""),S(f,"autocomplete","false"),f.autofocus="autofocus",S(f,"onfocus","this.select()"),S(f,"class","svelte-13flvue"),S(v,"class","svelte-13flvue"),S(h,"id","dropdown"),re(h,"top","0"),S(h,"class","svelte-13flvue")},m(V,j){ze(V,h,j),E(h,f),J1(f,u[4]),u[24](f),E(h,y),E(h,v),F.m(v,null),u[31](h),f.focus(),_||(o=[Fn(f,"input",u[23]),Fn(f,"keyup",u[16])],_=!0)},p(V,j){j[0]&16&&f.value!==V[4]&&J1(f,V[4]),z===(z=A(V))&&F?F.p(V,j):(F.d(1),F=z(V),F&&(F.c(),F.m(v,null)))},d(V){V&&T(h),u[24](null),F.d(),u[31](null),_=!1,Kc(o)}}}function ww(u){let h,f;return{c(){h=D("li"),f=ee("No results"),this.h()},l(y){h=M(y,"LI",{class:!0});var v=R(h);f=te(v,"No results"),v.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,v){ze(y,h,v),E(h,f)},p:kn,d(y){y&&T(h)}}}function Ew(u){let h,f=u[8],y=[];for(let v=0;v<f.length;v+=1)y[v]=ub(ab(u,f,v));return{c(){for(let v=0;v<y.length;v+=1)y[v].c();h=La()},l(v){for(let _=0;_<y.length;_+=1)y[_].l(v);h=La()},m(v,_){for(let o=0;o<y.length;o+=1)y[o].m(v,_);ze(v,h,_)},p(v,_){if(_[0]&10626){f=v[8];let o;for(o=0;o<f.length;o+=1){const A=ab(v,f,o);y[o]?y[o].p(A,_):(y[o]=ub(A),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(v){Hc(y,v),v&&T(h)}}}function Sw(u){let h,f=u[8],y=[];for(let v=0;v<f.length;v+=1)y[v]=cb(ob(u,f,v));return{c(){for(let v=0;v<y.length;v+=1)y[v].c();h=La()},l(v){for(let _=0;_<y.length;_+=1)y[_].l(v);h=La()},m(v,_){for(let o=0;o<y.length;o+=1)y[o].m(v,_);ze(v,h,_)},p(v,_){if(_[0]&10630){f=v[8];let o;for(o=0;o<f.length;o+=1){const A=ob(v,f,o);y[o]?y[o].p(A,_):(y[o]=cb(A),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(v){Hc(y,v),v&&T(h)}}}function kw(u){let h,f;return{c(){h=D("li"),f=ee("Type a name..."),this.h()},l(y){h=M(y,"LI",{class:!0});var v=R(h);f=te(v,"Type a name..."),v.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,v){ze(y,h,v),E(h,f)},p:kn,d(y){y&&T(h)}}}function ub(u){let h,f=u[33][u[1]]+"",y,v,_=u[35],o,A;function z(){return u[28](u[33])}function F(){return u[29](u[35])}const V=()=>u[30](h,_),j=()=>u[30](null,_);return{c(){h=D("li"),y=ee(f),v=xe(),this.h()},l(q){h=M(q,"LI",{class:!0});var pe=R(h);y=te(pe,f),v=we(pe),pe.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue"),mn(h,"highlight",u[7]==u[35])},m(q,pe){ze(q,h,pe),E(h,y),E(h,v),V(),o||(A=[Fn(h,"click",z),Fn(h,"mouseover",F)],o=!0)},p(q,pe){u=q,pe[0]&258&&f!==(f=u[33][u[1]]+"")&&pt(y,f),_!==u[35]&&(j(),_=u[35],V()),pe[0]&128&&mn(h,"highlight",u[7]==u[35])},d(q){q&&T(h),j(),o=!1,Kc(A)}}}function cb(u){let h,f=u[33][u[1]]+"",y,v,_,o=u[33][u[2]]+"",A,z,F=u[35],V,j;function q(){return u[25](u[33])}function pe(){return u[26](u[35])}const he=()=>u[27](h,F),ke=()=>u[27](null,F);return{c(){h=D("li"),y=ee(f),v=xe(),_=D("small"),A=ee(o),z=xe(),this.h()},l(Ee){h=M(Ee,"LI",{class:!0});var Be=R(h);y=te(Be,f),v=we(Be),_=M(Be,"SMALL",{class:!0});var Fe=R(_);A=te(Fe,o),Fe.forEach(T),z=we(Be),Be.forEach(T),this.h()},h(){S(_,"class","svelte-13flvue"),S(h,"class","svelte-13flvue"),mn(h,"highlight",u[7]==u[35])},m(Ee,Be){ze(Ee,h,Be),E(h,y),E(h,v),E(h,_),E(_,A),E(h,z),he(),V||(j=[Fn(h,"click",q),Fn(h,"mouseover",pe)],V=!0)},p(Ee,Be){u=Ee,Be[0]&258&&f!==(f=u[33][u[1]]+"")&&pt(y,f),Be[0]&260&&o!==(o=u[33][u[2]]+"")&&pt(A,o),F!==u[35]&&(ke(),F=u[35],he()),Be[0]&128&&mn(h,"highlight",u[7]==u[35])},d(Ee){Ee&&T(h),ke(),V=!1,Kc(j)}}}function Iw(u){let h,f,y,v;function _(F,V){return F[5]&&!F[3]?xw:bw}let o=_(u),A=o(u),z=u[6]&&lb(u);return{c(){h=D("div"),A.c(),f=xe(),z&&z.c(),this.h()},l(F){h=M(F,"DIV",{id:!0,class:!0});var V=R(h);A.l(V),f=we(V),z&&z.l(V),V.forEach(T),this.h()},h(){S(h,"id","select"),S(h,"class","svelte-13flvue"),mn(h,"active",u[6])},m(F,V){ze(F,h,V),A.m(h,null),E(h,f),z&&z.m(h,null),y||(v=[Fn(window,"click",u[17]),Fn(h,"keydown",u[15])],y=!0)},p(F,V){o===(o=_(F))&&A?A.p(F,V):(A.d(1),A=o(F),A&&(A.c(),A.m(h,f))),F[6]?z?z.p(F,V):(z=lb(F),z.c(),z.m(h,null)):z&&(z.d(1),z=null),V[0]&64&&mn(h,"active",F[6])},i:kn,o:kn,d(F){F&&T(h),A.d(),z&&z.d(),y=!1,Kc(v)}}}function Tw(u){return new Promise(h=>setTimeout(h,u))}function Aw(u,h,f){let y;const v=bx();let{search_data:_}=h,{selected:o=null}=h,{placeholder:A="Enter a town or area name"}=h,{value:z="code"}=h,{label:F="name"}=h,{group:V=null}=h,{search:j=!1}=h,q=o,pe=o?_.find(ft=>{ft[z]==o[z]}):null,he=!1,ke="",Ee=null,Be,Fe,Ft,Ct=[];function mt(ft){ft.stopPropagation(),f(4,ke=""),f(6,he=!he),Tw(10).then(()=>{Ft&&he&&Ft.focus()})}function et(ft){f(18,o=ft),f(6,he=!1),v("select",{selected:ft,value:ft[z]})}function vr(ft){ft.stopPropagation(),f(18,o=null),f(21,q=null),f(5,pe=null),v("select",{selected:null,value:null})}function pr(ft){he&&Be[0]&&Number.isInteger(Ee)&&(ft.keyCode===38?(f(7,Ee-=Ee>0?1:0),Ct[Ee].scrollIntoView({block:"nearest",inline:"start"})):ft.keyCode===40&&(f(7,Ee+=Ee<Be.length-1?1:0),Ct[Ee].scrollIntoView({block:"nearest",inline:"end"})))}function lr(ft){Be[0]&&Number.isInteger(Ee)&&ft.keyCode===13&&et(Be[Ee])}function bt(ft){ft.target!==Fe&&(f(6,he=!1),f(7,Ee=0))}function kt(){ke=this.value,f(4,ke)}function Rr(ft){up[ft?"unshift":"push"](()=>{Ft=ft,f(10,Ft)})}const Nt=ft=>et(ft),dr=ft=>f(7,Ee=ft);function it(ft,nt){up[ft?"unshift":"push"](()=>{Ct[nt]=ft,f(11,Ct)})}const rr=ft=>et(ft),wr=ft=>f(7,Ee=ft);function Vr(ft,nt){up[ft?"unshift":"push"](()=>{Ct[nt]=ft,f(11,Ct)})}function zr(ft){up[ft?"unshift":"push"](()=>{Fe=ft,f(9,Fe)})}return u.$$set=ft=>{"search_data"in ft&&f(19,_=ft.search_data),"selected"in ft&&f(18,o=ft.selected),"placeholder"in ft&&f(0,A=ft.placeholder),"value"in ft&&f(20,z=ft.value),"label"in ft&&f(1,F=ft.label),"group"in ft&&f(2,V=ft.group),"search"in ft&&f(3,j=ft.search)},u.$$.update=()=>{u.$$.dirty[0]&16&&f(22,y=ke?new RegExp(ke,"i"):null),u.$$.dirty[0]&4718594&&(f(8,Be=y?_.filter(ft=>y.test(ft[F])):_),f(7,Ee=0)),u.$$.dirty[0]&3932160&&q!=o&&(f(5,pe=_.find(ft=>ft[z]==o[z])),f(21,q=o))},[A,F,V,j,ke,pe,he,Ee,Be,Fe,Ft,Ct,mt,et,vr,pr,lr,bt,o,_,z,q,y,kt,Rr,Nt,dr,it,rr,wr,Vr,zr]}class zw extends gl{constructor(h){super(),_l(this,h,Aw,Iw,bl,{search_data:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var $m={exports:{}};(function(u,h){(function(f,y){u.exports=y()})(U2,function(){var f,y,v;function _(o,A){if(!f)f=A;else if(!y)y=A;else{var z="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",F={};f(F),v=A(F),typeof window<"u"&&(v.workerUrl=window.URL.createObjectURL(new Blob([z],{type:"text/javascript"})))}}return _(["exports"],function(o){function A(e,t){return e(t={exports:{}},t.exports),t.exports}var z=F;function F(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}F.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},F.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},F.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},F.prototype.solveCurveX=function(e,t){var i,l,p,d,x;for(t===void 0&&(t=1e-6),p=e,x=0;x<8;x++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var I=this.sampleCurveDerivativeX(p);if(Math.abs(I)<1e-6)break;p-=d/I}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},F.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var V=j;function j(e,t){this.x=e,this.y=t}j.prototype={clone:function(){return new j(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},j.convert=function(e){return e instanceof j?e:Array.isArray(e)?new j(e[0],e[1]):e};var q=typeof self<"u"?self:{},pe=Math.pow(2,53)-1;function he(e,t,i,l){var p=new z(e,t,i,l);return function(d){return p.solve(d)}}var ke=he(.25,.1,.25,1);function Ee(e,t,i){return Math.min(i,Math.max(t,e))}function Be(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function Fe(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var x in d)e[x]=d[x]}return e}var Ft=1;function Ct(){return Ft++}function mt(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function et(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function vr(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function pr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function lr(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function bt(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function kt(e){return Array.isArray(e)?e.map(kt):typeof e=="object"&&e?lr(e,kt):e}var Rr={};function Nt(e){Rr[e]||(typeof console<"u"&&console.warn(e),Rr[e]=!0)}function dr(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function it(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,x=void 0;i<l;p=i++)t+=((x=e[p]).x-(d=e[i]).x)*(d.y+x.y);return t}function rr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function wr(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,x){var I=d||x;return t[p]=!I||I.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Vr=null;function zr(e){if(Vr==null){var t=e.navigator?e.navigator.userAgent:null;Vr=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Vr}function ft(e){try{var t=q[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var nt,gr,on,In,Fi=q.performance&&q.performance.now?q.performance.now.bind(q.performance):Date.now.bind(Date),Ni=q.requestAnimationFrame||q.mozRequestAnimationFrame||q.webkitRequestAnimationFrame||q.msRequestAnimationFrame,Gr=q.cancelAnimationFrame||q.mozCancelAnimationFrame||q.webkitCancelAnimationFrame||q.msCancelAnimationFrame,Ra={now:Fi,frame:function(e){var t=Ni(e);return{cancel:function(){return Gr(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=q.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return nt||(nt=q.document.createElement("a")),nt.href=e,nt.href},hardwareConcurrency:q.navigator&&q.navigator.hardwareConcurrency||4,get devicePixelRatio(){return q.devicePixelRatio},get prefersReducedMotion(){return!!q.matchMedia&&(gr==null&&(gr=q.matchMedia("(prefers-reduced-motion: reduce)")),gr.matches)}},Er={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Wi={supported:!1,testSupport:function(e){!$a&&In&&(_r?wt(e):on=e)}},$a=!1,_r=!1;function wt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,In),e.isContextLost())return;Wi.supported=!0}catch{}e.deleteTexture(t),$a=!0}q.document&&((In=q.document.createElement("img")).onload=function(){on&&wt(on),on=null,_r=!0},In.onerror=function(){$a=!0,on=null},In.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ti="01",Yi=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function Zr(e){return e.indexOf("mapbox:")===0}Yi.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ti,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Yi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Yi.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Yi.prototype.normalizeStyleURL=function(e,t){if(!Zr(e))return e;var i=kr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Yi.prototype.normalizeGlyphsURL=function(e,t){if(!Zr(e))return e;var i=kr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Yi.prototype.normalizeSourceURL=function(e,t){if(!Zr(e))return e;var i=kr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Yi.prototype.normalizeSpriteURL=function(e,t,i,l){var p=kr(e);return Zr(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,bi(p))},Yi.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Zr(e))return e;var i=kr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ra.devicePixelRatio>=2||t===512?"@2x":"")+(Wi.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,x=p;d<x.length;d+=1){var I=x[d].match(/^access_token=(.*)$/);if(I)return I[1]}return null}(i.params)||Er.ACCESS_TOKEN;return Er.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Yi.prototype.canonicalizeTileURL=function(e,t){var i=kr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Yi.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&Zr(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var x=d[p];er(x)?l.push(this.canonicalizeTileURL(x,i)):l.push(x)}return l},Yi.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=kr(Er.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!Er.REQUIRE_ACCESS_TOKEN)return bi(e);if(!(t=t||Er.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),bi(e)};var rs=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function er(e){return rs.test(e)}var ri=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function kr(e){var t=e.match(ri);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function bi(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Kr(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(q.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Pr=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Pr.prototype.getStorageKey=function(e){var t,i=Kr(Er.ACCESS_TOKEN);return t=i&&i.u?q.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(Number("0x"+p))})):Er.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Pr.prototype.fetchEventData=function(){var e=ft("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=q.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=q.localStorage.getItem(i);p&&(this.anonId=p)}catch{Nt("Unable to read from LocalStorage")}},Pr.prototype.saveEventData=function(){var e=ft("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{q.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&q.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Nt("Unable to write to LocalStorage")}},Pr.prototype.processRequests=function(e){},Pr.prototype.postEvent=function(e,t,i,l){var p=this;if(Er.EVENTS_URL){var d=kr(Er.EVENTS_URL);d.params.push("access_token="+(l||Er.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:ti,userId:this.anonId},I=t?Fe(x,t):x,C={url:bi(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([I])};this.pendingRequest=xr(C,function(L){p.pendingRequest=null,i(L),p.saveEventData(),p.processRequests(l)})}},Pr.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var xi,yn,Cr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p,(Er.EVENTS_URL&&d||Er.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(x){return Zr(x)||er(x)}))&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,x=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),et(this.anonId)||(this.anonId=mt()),this.postEvent(x,{skuToken:this.skuToken},function(I){I||d&&(l.success[d]=!0)},i))}},t}(Pr),br=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){Er.EVENTS_URL&&Er.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return Zr(p)||er(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=Kr(Er.ACCESS_TOKEN),d=p?p.u:Er.ACCESS_TOKEN,x=d!==this.eventData.tokenU;et(this.anonId)||(this.anonId=mt(),x=!0);var I=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),L=new Date(I),O=(I-this.eventData.lastSuccess)/864e5;x=x||O>=1||O<-1||C.getDate()!==L.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(I,{"enabled.telemetry":!1},function(U){U||(l.eventData.lastSuccess=I,l.eventData.tokenU=d)},i)}},t}(Pr)),Fr=br.postTurnstileEvent.bind(br),Ji=new Cr,sn=Ji.postMapLoadEvent.bind(Ji),ln=500,Ga=50;function ci(){q.caches&&!xi&&(xi=q.caches.open("mapbox-tiles"))}function vn(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Pi,Tn=1/0;function wa(){return Pi==null&&(Pi=q.OffscreenCanvas&&new q.OffscreenCanvas(1,1).getContext("2d")&&typeof q.createImageBitmap=="function"),Pi}var Bo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Bo);var _o=function(e){function t(i,l,p){l===401&&er(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Qn=rr()?function(){return self.worker&&self.worker.referrer}:function(){return(q.location.protocol==="blob:"?q.parent:q).location.href},Qi,Ea,sa=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Qn())&&!/^\w+:/.test(i))){if(q.fetch&&q.Request&&q.AbortController&&q.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,x=new q.AbortController,I=new q.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Qn(),signal:x.signal}),C=!1,L=!1,O=(d=I.url).indexOf("sku=")>0&&er(d);l.type==="json"&&I.headers.set("Accept","application/json");var U=function(W,ae,ue){if(!L){if(W&&W.message!=="SecurityError"&&Nt(W),ae&&ue)return K(ae);var ge=Date.now();q.fetch(I).then(function(de){if(de.ok){var Se=O?de.clone():null;return K(de,Se,ge)}return p(new _o(de.statusText,de.status,l.url))}).catch(function(de){de.code!==20&&p(new Error(de.message))})}},K=function(W,ae,ue){(l.type==="arrayBuffer"?W.arrayBuffer():l.type==="json"?W.json():W.text()).then(function(ge){L||(ae&&ue&&function(de,Se,Pe){if(ci(),xi){var Me={status:Se.status,statusText:Se.statusText,headers:new q.Headers};Se.headers.forEach(function(je,Xe){return Me.headers.set(Xe,je)});var Oe=wr(Se.headers.get("Cache-Control")||"");Oe["no-store"]||(Oe["max-age"]&&Me.headers.set("Expires",new Date(Pe+1e3*Oe["max-age"]).toUTCString()),new Date(Me.headers.get("Expires")).getTime()-Pe<42e4||function(je,Xe){if(yn===void 0)try{new Response(new ReadableStream),yn=!0}catch{yn=!1}yn?Xe(je.body):je.blob().then(Xe)}(Se,function(je){var Xe=new q.Response(je,Me);ci(),xi&&xi.then(function(Qe){return Qe.put(vn(de.url),Xe)}).catch(function(Qe){return Nt(Qe.message)})}))}}(I,ae,ue),C=!0,p(null,ge,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(function(ge){L||p(new Error(ge.message))})};return O?function(W,ae){if(ci(),!xi)return ae(null);var ue=vn(W.url);xi.then(function(ge){ge.match(ue).then(function(de){var Se=function(Pe){if(!Pe)return!1;var Me=new Date(Pe.headers.get("Expires")||0),Oe=wr(Pe.headers.get("Cache-Control")||"");return Me>Date.now()&&!Oe["no-cache"]}(de);ge.delete(ue),Se&&ge.put(ue,de.clone()),ae(null,de,Se)}).catch(ae)}).catch(ae)}(I,U):U(null,null),{cancel:function(){L=!0,C||x.abort()}}}(e,t);if(rr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new q.XMLHttpRequest;for(var x in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(x,l.headers[x]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var I=d.response;if(l.type==="json")try{I=JSON.parse(d.response)}catch(C){return p(C)}p(null,I,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new _o(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},wi=function(e,t){return sa(Fe(e,{type:"arrayBuffer"}),t)},xr=function(e,t){return sa(Fe(e,{method:"POST"}),t)},N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Qi=[],Ea=0;var G=function(e,t){if(Wi.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Ea>=Er.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return Qi.push(i),i}Ea++;var l=!1,p=function(){if(!l)for(l=!0,Ea--;Qi.length&&Ea<Er.MAX_PARALLEL_IMAGE_REQUESTS;){var x=Qi.shift();x.cancelled||(x.cancel=G(x.requestParameters,x.callback).cancel)}},d=wi(e,function(x,I,C,L){p(),x?t(x):I&&(wa()?function(O,U){var K=new q.Blob([new Uint8Array(O)],{type:"image/png"});q.createImageBitmap(K).then(function(W){U(null,W)}).catch(function(W){U(new Error("Could not load image because of "+W.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(I,t):function(O,U,K,W){var ae=new q.Image,ue=q.URL;ae.onload=function(){U(null,ae),ue.revokeObjectURL(ae.src),ae.onload=null,q.requestAnimationFrame(function(){ae.src=N})},ae.onerror=function(){return U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ge=new q.Blob([new Uint8Array(O)],{type:"image/png"});ae.cacheControl=K,ae.expires=W,ae.src=O.byteLength?ue.createObjectURL(ge):N}(I,t,C,L))});return{cancel:function(){d.cancel(),p()}}};function X(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function $(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var se=function(e,t){t===void 0&&(t={}),Fe(this,t),this.type=e},ve=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",Fe({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(se),be=function(){};be.prototype.on=function(e,t){return this._listeners=this._listeners||{},X(e,t,this._listeners),this},be.prototype.off=function(e,t){return $(e,t,this._listeners),$(e,t,this._oneTimeListeners),this},be.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},X(e,t,this._oneTimeListeners),this},be.prototype.fire=function(e,t){typeof e=="string"&&(e=new se(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,x=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<x.length;d+=1){var I=x[d];$(i,I,this._oneTimeListeners),I.call(this,e)}var C=this._eventedParent;C&&(Fe(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(e))}else e instanceof ve&&console.error(e.error);return this},be.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},be.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var H={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ne=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function Ie(e){var t=e.value;return t?[new ne(e.key,t,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var x in d)e[x]=d[x]}return e}function Ge(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Le(e){if(Array.isArray(e))return e.map(Le);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Le(e[i]);return t}return Ge(e)}var Ne=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),ct=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};ct.prototype.concat=function(e){return new ct(this,e)},ct.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},ct.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var tt={kind:"null"},Ce={kind:"number"},$e={kind:"string"},We={kind:"boolean"},Je={kind:"color"},Kt={kind:"object"},Ye={kind:"value"},Ut={kind:"collator"},ir={kind:"formatted"},Rt={kind:"resolvedImage"};function Ht(e,t){return{kind:"array",itemType:e,N:t}}function Xt(e){if(e.kind==="array"){var t=Xt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Ui=[tt,Ce,$e,We,Je,ir,Kt,Ht(Ye),Rt];function nr(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!nr(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=Ui;i<l.length;i+=1)if(!nr(l[i],t))return null}}return"Expected "+Xt(e)+" but found "+Xt(t)+" instead."}function sr(e,t){return t.some(function(i){return i.kind===e.kind})}function mr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Ot=A(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(I){return(I=Math.round(I))<0?0:I>255?255:I}function p(I){return l(I[I.length-1]==="%"?parseFloat(I)/100*255:parseInt(I))}function d(I){return(C=I[I.length-1]==="%"?parseFloat(I)/100:parseFloat(I))<0?0:C>1?1:C;var C}function x(I,C,L){return L<0?L+=1:L>1&&(L-=1),6*L<1?I+(C-I)*L*6:2*L<1?C:3*L<2?I+(C-I)*(2/3-L)*6:I}try{t.parseCSSColor=function(I){var C,L=I.replace(/ /g,"").toLowerCase();if(L in i)return i[L].slice();if(L[0]==="#")return L.length===4?(C=parseInt(L.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:L.length===7&&(C=parseInt(L.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var O=L.indexOf("("),U=L.indexOf(")");if(O!==-1&&U+1===L.length){var K=L.substr(0,O),W=L.substr(O+1,U-(O+1)).split(","),ae=1;switch(K){case"rgba":if(W.length!==4)return null;ae=d(W.pop());case"rgb":return W.length!==3?null:[p(W[0]),p(W[1]),p(W[2]),ae];case"hsla":if(W.length!==4)return null;ae=d(W.pop());case"hsl":if(W.length!==3)return null;var ue=(parseFloat(W[0])%360+360)%360/360,ge=d(W[1]),de=d(W[2]),Se=de<=.5?de*(ge+1):de+ge-de*ge,Pe=2*de-Se;return[l(255*x(Pe,Se,ue+1/3)),l(255*x(Pe,Se,ue)),l(255*x(Pe,Se,ue-1/3)),ae];default:return null}}return null}}catch{}}).parseCSSColor,jt=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};jt.parse=function(e){if(e){if(e instanceof jt)return e;if(typeof e=="string"){var t=Ot(e);if(t)return new jt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},jt.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},jt.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},jt.black=new jt(0,0,0,1),jt.white=new jt(1,1,1,1),jt.transparent=new jt(0,0,0,0),jt.red=new jt(1,0,0,1);var ii=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ii.prototype.compare=function(e,t){return this.collator.compare(e,t)},ii.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Sa=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},Hr=function(e){this.sections=e};Hr.fromString=function(e){return new Hr([new Sa(e,null,null,null,null)])},Hr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Hr.factory=function(e){return e instanceof Hr?e:Hr.fromString(e)},Hr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Hr.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var An=function(e){this.name=e.name,this.available=e.available};function zn(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ei(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof jt||e instanceof ii||e instanceof Hr||e instanceof An)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!Ei(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!Ei(e[l]))return!1;return!0}return!1}function ur(e){if(e===null)return tt;if(typeof e=="string")return $e;if(typeof e=="boolean")return We;if(typeof e=="number")return Ce;if(e instanceof jt)return Je;if(e instanceof ii)return Ut;if(e instanceof Hr)return ir;if(e instanceof An)return Rt;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=ur(p[l]);if(t){if(t===d)continue;t=Ye;break}t=d}return Ht(t||Ye,i)}return Kt}function $n(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof jt||e instanceof Hr||e instanceof An?e.toString():JSON.stringify(e)}An.prototype.toString=function(){return this.name},An.fromString=function(e){return e?new An({name:e,available:!1}):null},An.prototype.serialize=function(){return["image",this.name]};var hi=function(e,t){this.type=e,this.value=t};hi.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Ei(e[1]))return t.error("invalid value");var i=e[1],l=ur(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new hi(l,i)},hi.prototype.evaluate=function(){return this.value},hi.prototype.eachChild=function(){},hi.prototype.outputDefined=function(){return!0},hi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof jt?["rgba"].concat(this.value.toArray()):this.value instanceof Hr?this.value.serialize():this.value};var qr=function(e){this.name="ExpressionEvaluationError",this.message=e};qr.prototype.toJSON=function(){return this.message};var la={string:$e,number:Ce,boolean:We,object:Kt},Br=function(e,t){this.type=e,this.args=t};Br.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,x;if(e.length>2){var I=e[1];if(typeof I!="string"||!(I in la)||I==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=la[I],l++}else d=Ye;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);x=e[2],l++}i=Ht(d,x)}else i=la[p];for(var C=[];l<e.length;l++){var L=t.parse(e[l],l,Ye);if(!L)return null;C.push(L)}return new Br(i,C)},Br.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!nr(this.type,ur(i)))return i;if(t===this.args.length-1)throw new qr("Expected value to be of type "+Xt(this.type)+", but found "+Xt(ur(i))+" instead.")}return null},Br.prototype.eachChild=function(e){this.args.forEach(e)},Br.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Br.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var Ci=function(e){this.type=ir,this.sections=e};Ci.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var x=e[d];if(p&&typeof x=="object"&&!Array.isArray(x)){p=!1;var I=null;if(x["font-scale"]&&!(I=t.parse(x["font-scale"],1,Ce)))return null;var C=null;if(x["text-font"]&&!(C=t.parse(x["text-font"],1,Ht($e))))return null;var L=null;if(x["text-color"]&&!(L=t.parse(x["text-color"],1,Je)))return null;var O=l[l.length-1];O.scale=I,O.font=C,O.textColor=L}else{var U=t.parse(e[d],1,Ye);if(!U)return null;var K=U.type.kind;if(K!=="string"&&K!=="value"&&K!=="null"&&K!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:U,scale:null,font:null,textColor:null})}}return new Ci(l)},Ci.prototype.evaluate=function(e){return new Hr(this.sections.map(function(t){var i=t.content.evaluate(e);return ur(i)===Rt?new Sa("",i,null,null,null):new Sa($n(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Ci.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},Ci.prototype.outputDefined=function(){return!1},Ci.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var Pn=function(e){this.type=Rt,this.input=e};Pn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,$e);return i?new Pn(i):t.error("No image name provided.")},Pn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=An.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},Pn.prototype.eachChild=function(e){e(this.input)},Pn.prototype.outputDefined=function(){return!1},Pn.prototype.serialize=function(){return["image",this.input.serialize()]};var Xs={"to-boolean":We,"to-color":Je,"to-number":Ce,"to-string":$e},ni=function(e,t){this.type=e,this.args=t};ni.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=Xs[i],p=[],d=1;d<e.length;d++){var x=t.parse(e[d],d,Ye);if(!x)return null;p.push(x)}return new ni(l,p)},ni.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof jt)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":zn(t[0],t[1],t[2],t[3])))return new jt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new qr(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var x=null,I=0,C=this.args;I<C.length;I+=1){if((x=C[I].evaluate(e))===null)return 0;var L=Number(x);if(!isNaN(L))return L}throw new qr("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?Hr.fromString($n(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?An.fromString($n(this.args[0].evaluate(e))):$n(this.args[0].evaluate(e))},ni.prototype.eachChild=function(e){this.args.forEach(e)},ni.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ni.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ci([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Pn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var ka=["Unknown","Point","LineString","Polygon"],ai=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ai.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ai.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ka[this.feature.type]:this.feature.type:null},ai.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ai.prototype.canonicalID=function(){return this.canonical},ai.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ai.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=jt.parse(e)),t};var Nr=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};Nr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Nr.prototype.eachChild=function(e){this.args.forEach(e)},Nr.prototype.outputDefined=function(){return!1},Nr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Nr.parse=function(e,t){var i,l=e[0],p=Nr.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,I=x.filter(function(_t){var st=_t[0];return!Array.isArray(st)||st.length===e.length-1}),C=null,L=0,O=I;L<O.length;L+=1){var U=O[L],K=U[0],W=U[1];C=new Xr(t.registry,t.path,null,t.scope);for(var ae=[],ue=!1,ge=1;ge<e.length;ge++){var de=e[ge],Se=Array.isArray(K)?K[ge-1]:K.type,Pe=C.parse(de,1+ae.length,Se);if(!Pe){ue=!0;break}ae.push(Pe)}if(!ue)if(Array.isArray(K)&&K.length!==ae.length)C.error("Expected "+K.length+" arguments, but found "+ae.length+" instead.");else{for(var Me=0;Me<ae.length;Me++){var Oe=Array.isArray(K)?K[Me]:K.type,je=ae[Me];C.concat(Me+1).checkSubtype(Oe,je.type)}if(C.errors.length===0)return new Nr(l,d,W,ae)}}if(I.length===1)(i=t.errors).push.apply(i,C.errors);else{for(var Xe=(I.length?I:x).map(function(_t){var st;return st=_t[0],Array.isArray(st)?"("+st.map(Xt).join(", ")+")":"("+Xt(st.type)+"...)"}).join(" | "),Qe=[],St=1;St<e.length;St++){var lt=t.parse(e[St],1+Qe.length);if(!lt)return null;Qe.push(Xt(lt.type))}t.error("Expected arguments of type "+Xe+", but found ("+Qe.join(", ")+") instead.")}return null},Nr.register=function(e,t){for(var i in Nr.definitions=t,t)e[i]=Nr};var qi=function(e,t,i){this.type=Ut,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function pi(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ua(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Nn(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function yc(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function Oo(e,t){for(var i,l,p,d,x,I,C,L=!1,O=0,U=t.length;O<U;O++)for(var K=t[O],W=0,ae=K.length;W<ae-1;W++){if((d=(i=e)[0]-(l=K[W])[0])*(C=i[1]-(p=K[W+1])[1])-(I=i[0]-p[0])*(x=i[1]-l[1])==0&&d*I<=0&&x*C<=0)return!1;yc(e,K[W],K[W+1])&&(L=!L)}return L}function is(e,t){for(var i=0;i<t.length;i++)if(Oo(e,t[i]))return!0;return!1}function Vo(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],x=(e[0]-i[0])*d-p*(e[1]-i[1]),I=(t[0]-i[0])*d-p*(t[1]-i[1]);return x>0&&I<0||x<0&&I>0}function Ws(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],x=0;x<d.length-1;++x)if((U=[(O=d[x+1])[0]-(L=d[x])[0],O[1]-L[1]])[0]*(K=[(C=t)[0]-(I=e)[0],C[1]-I[1]])[1]-U[1]*K[0]!=0&&Vo(I,C,L,O)&&Vo(L,O,I,C))return!0;var I,C,L,O,U,K;return!1}function Ys(e,t){for(var i=0;i<e.length;++i)if(!Oo(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(Ws(e[l],e[l+1],t))return!1;return!0}function Fo(e,t){for(var i=0;i<t.length;i++)if(Ys(e,t[i]))return!0;return!1}function un(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],x=0;x<e[p].length;x++){var I=Nn(e[p][x],i);pi(t,I),d.push(I)}l.push(d)}return l}function Ba(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=un(e[p],t,i);l.push(d)}return l}function ea(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}pi(t,e)}function bo(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],x=[],I=0,C=e;I<C.length;I+=1)for(var L=0,O=C[I];L<O.length;L+=1){var U=O[L],K=[U.x+d[0],U.y+d[1]];ea(K,t,i,p),x.push(K)}return x}function Cn(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),x=[8192*l.x,8192*l.y],I=[],C=0,L=e;C<L.length;C+=1){for(var O=[],U=0,K=L[C];U<K.length;U+=1){var W=K[U],ae=[W.x+x[0],W.y+x[1]];pi(t,ae),O.push(ae)}I.push(O)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var ue=0,ge=I;ue<ge.length;ue+=1)for(var de=0,Se=ge[ue];de<Se.length;de+=1)ea(Se[de],t,i,d)}return I}qi.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,We);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,We);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,$e))?null:new qi(l,p,d)},qi.prototype.evaluate=function(e){return new ii(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},qi.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},qi.prototype.outputDefined=function(){return!1},qi.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var oi=function(e,t){this.type=We,this.geojson=e,this.geometries=t};function Ia(e){if(e instanceof Nr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof oi)return!1;var t=!0;return e.eachChild(function(i){t&&!Ia(i)&&(t=!1)}),t}function Ae(e){if(e instanceof Nr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!Ae(i)&&(t=!1)}),t}function fi(e,t){if(e instanceof Nr&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!fi(l,t)&&(i=!1)}),i}oi.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Ei(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new oi(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new oi(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new oi(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},oi.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=un(i.coordinates,p,d),I=bo(t.geometry(),l,p,d);if(!ua(l,p))return!1;for(var C=0,L=I;C<L.length;C+=1)if(!Oo(L[C],x))return!1}if(i.type==="MultiPolygon"){var O=Ba(i.coordinates,p,d),U=bo(t.geometry(),l,p,d);if(!ua(l,p))return!1;for(var K=0,W=U;K<W.length;K+=1)if(!is(W[K],O))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var x=un(i.coordinates,p,d),I=Cn(t.geometry(),l,p,d);if(!ua(l,p))return!1;for(var C=0,L=I;C<L.length;C+=1)if(!Ys(L[C],x))return!1}if(i.type==="MultiPolygon"){var O=Ba(i.coordinates,p,d),U=Cn(t.geometry(),l,p,d);if(!ua(l,p))return!1;for(var K=0,W=U;K<W.length;K+=1)if(!Fo(W[K],O))return!1}return!0}(e,this.geometries)}return!1},oi.prototype.eachChild=function(){},oi.prototype.outputDefined=function(){return!0},oi.prototype.serialize=function(){return["within",this.geojson]};var $i=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};$i.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new $i(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},$i.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},$i.prototype.eachChild=function(){},$i.prototype.outputDefined=function(){return!1},$i.prototype.serialize=function(){return["var",this.name]};var Xr=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new ct),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function Dn(e,t){for(var i,l=e.length-1,p=0,d=l,x=0;p<=d;)if((i=e[x=Math.floor((p+d)/2)])<=t){if(x===l||t<e[x+1])return x;p=x+1}else{if(!(i>t))throw new qr("Input is not a number.");d=x-1}return 0}Xr.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},Xr.prototype._parse=function(e,t){function i(L,O,U){return U==="assert"?new Br(O,[L]):U==="coerce"?new ni(O,[L]):L}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var x=this.expectedType,I=d.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||I.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(x,I))return null}else d=i(d,x,t.typeAnnotation||"coerce");else d=i(d,x,t.typeAnnotation||"assert")}if(!(d instanceof hi)&&d.type.kind!=="resolvedImage"&&function L(O){if(O instanceof $i)return L(O.boundExpression);if(O instanceof Nr&&O.name==="error"||O instanceof qi||O instanceof oi)return!1;var U=O instanceof ni||O instanceof Br,K=!0;return O.eachChild(function(W){K=U?K&&L(W):K&&W instanceof hi}),!!K&&Ia(O)&&fi(O,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var C=new ai;try{d=new hi(d.type,d.evaluate(C))}catch(L){return this.error(L.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Xr.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Xr(this.registry,l,t||null,p,this.errors)},Xr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new Ne(l,e))},Xr.prototype.checkSubtype=function(e,t){var i=nr(e,t);return i&&this.error(i),i};var gn=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],x=d[1];this.labels.push(d[0]),this.outputs.push(x)}};function ji(e,t,i){return e*(1-i)+t*i}gn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Ce);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var x=d===1?-1/0:e[d],I=e[d+1],C=d,L=d+1;if(typeof x!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(l.length&&l[l.length-1][0]>=x)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var O=t.parse(I,L,p);if(!O)return null;p=p||O.type,l.push([x,O])}return new gn(p,i,l)},gn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[Dn(t,l)].evaluate(e)},gn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},gn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},gn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Js=Object.freeze({__proto__:null,number:ji,color:function(e,t,i){return new jt(ji(e.r,t.r,i),ji(e.g,t.g,i),ji(e.b,t.b,i),ji(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return ji(l,t[p],i)})}}),eo=6/29*3*(6/29),vu=Math.PI/180,No=180/Math.PI;function Ka(e){return e>.008856451679035631?Math.pow(e,1/3):e/eo+4/29}function ns(e){return e>6/29?e*e*e:eo*(e-4/29)}function gu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ha(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jl(e){var t=Ha(e.r),i=Ha(e.g),l=Ha(e.b),p=Ka((.4124564*t+.3575761*i+.1804375*l)/.95047),d=Ka((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-Ka((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function xo(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*ns(t),i=.95047*ns(i),l=1.08883*ns(l),new jt(gu(3.2404542*i-1.5371385*t-.4985314*l),gu(-.969266*i+1.8760108*t+.041556*l),gu(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function as(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var Uo={forward:jl,reverse:xo,interpolate:function(e,t,i){return{l:ji(e.l,t.l,i),a:ji(e.a,t.a,i),b:ji(e.b,t.b,i),alpha:ji(e.alpha,t.alpha,i)}}},xl={forward:function(e){var t=jl(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*No;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*vu,i=e.c;return xo({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:as(e.h,t.h,i),c:ji(e.c,t.c,i),l:ji(e.l,t.l,i),alpha:ji(e.alpha,t.alpha,i)}}},to=Object.freeze({__proto__:null,lab:Uo,hcl:xl}),Wr=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,x=p;d<x.length;d+=1){var I=x[d],C=I[1];this.labels.push(I[0]),this.outputs.push(C)}};function _u(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}Wr.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=_u(t,e.base,i,l);else if(e.name==="linear")p=_u(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new z(d[0],d[1],d[2],d[3]).solve(_u(t,1,i,l))}return p},Wr.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var x=l[1];if(typeof x!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:x}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var I=l.slice(1);if(I.length!==4||I.some(function(ge){return typeof ge!="number"||ge<0||ge>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:I}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Ce)))return null;var C=[],L=null;i==="interpolate-hcl"||i==="interpolate-lab"?L=Je:t.expectedType&&t.expectedType.kind!=="value"&&(L=t.expectedType);for(var O=0;O<d.length;O+=2){var U=d[O],K=d[O+1],W=O+3,ae=O+4;if(typeof U!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(C.length&&C[C.length-1][0]>=U)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);var ue=t.parse(K,ae,L);if(!ue)return null;L=L||ue.type,C.push([U,ue])}return L.kind==="number"||L.kind==="color"||L.kind==="array"&&L.itemType.kind==="number"&&typeof L.N=="number"?new Wr(L,i,l,p,C):t.error("Type "+Xt(L)+" is not interpolatable.")},Wr.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=Dn(t,l),x=Wr.interpolationFactor(this.interpolation,l,t[d],t[d+1]),I=i[d].evaluate(e),C=i[d+1].evaluate(e);return this.operator==="interpolate"?Js[this.type.kind.toLowerCase()](I,C,x):this.operator==="interpolate-hcl"?xl.reverse(xl.interpolate(xl.forward(I),xl.forward(C),x)):Uo.reverse(Uo.interpolate(Uo.forward(I),Uo.forward(C),x))},Wr.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Wr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Wr.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var wo=function(e,t){this.type=e,this.args=t};wo.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,x=e.slice(1);d<x.length;d+=1){var I=t.parse(x[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!I)return null;i=i||I.type,p.push(I)}var C=l&&p.some(function(L){return nr(l,L.type)});return new wo(C?Ye:i,p)},wo.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof An&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},wo.prototype.eachChild=function(e){this.args.forEach(e)},wo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},wo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ta=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Ta.prototype.evaluate=function(e){return this.result.evaluate(e)},Ta.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},Ta.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var x=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return x?new Ta(i,x):null},Ta.prototype.outputDefined=function(){return this.result.outputDefined()},Ta.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var Ls=function(e,t,i){this.type=e,this.index=t,this.input=i};Ls.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ce),l=t.parse(e[2],2,Ht(t.expectedType||Ye));return i&&l?new Ls(l.type.itemType,i,l):null},Ls.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new qr("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new qr("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new qr("Array index must be an integer, but found "+t+" instead.");return i[t]},Ls.prototype.eachChild=function(e){e(this.index),e(this.input)},Ls.prototype.outputDefined=function(){return!1},Ls.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Un=function(e,t){this.type=We,this.needle=e,this.haystack=t};Un.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ye),l=t.parse(e[2],2,Ye);return i&&l?sr(i.type,[We,$e,Ce,tt,Ye])?new Un(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(i.type)+" instead"):null},Un.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!mr(t,["boolean","string","number","null"]))throw new qr("Expected first argument to be of type boolean, string, number or null, but found "+Xt(ur(t))+" instead.");if(!mr(i,["string","array"]))throw new qr("Expected second argument to be of type array or string, but found "+Xt(ur(i))+" instead.");return i.indexOf(t)>=0},Un.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Un.prototype.outputDefined=function(){return!0},Un.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var qn=function(e,t,i){this.type=Ce,this.needle=e,this.haystack=t,this.fromIndex=i};qn.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ye),l=t.parse(e[2],2,Ye);if(!i||!l)return null;if(!sr(i.type,[We,$e,Ce,tt,Ye]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Ce);return p?new qn(i,l,p):null}return new qn(i,l)},qn.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!mr(t,["boolean","string","number","null"]))throw new qr("Expected first argument to be of type boolean, string, number or null, but found "+Xt(ur(t))+" instead.");if(!mr(i,["string","array"]))throw new qr("Expected second argument to be of type array or string, but found "+Xt(ur(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},qn.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},qn.prototype.outputDefined=function(){return!1},qn.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Oa=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};Oa.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],x=2;x<e.length-1;x+=2){var I=e[x],C=e[x+1];Array.isArray(I)||(I=[I]);var L=t.concat(x);if(I.length===0)return L.error("Expected at least one branch label.");for(var O=0,U=I;O<U.length;O+=1){var K=U[O];if(typeof K!="number"&&typeof K!="string")return L.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return L.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof K=="number"&&Math.floor(K)!==K)return L.error("Numeric branch labels must be integer values.");if(i){if(L.checkSubtype(i,ur(K)))return null}else i=ur(K);if(p[String(K)]!==void 0)return L.error("Branch labels must be unique.");p[String(K)]=d.length}var W=t.parse(C,x,l);if(!W)return null;l=l||W.type,d.push(W)}var ae=t.parse(e[1],1,Ye);if(!ae)return null;var ue=t.parse(e[e.length-1],e.length-1,l);return ue?ae.type.kind!=="value"&&t.concat(1).checkSubtype(i,ae.type)?null:new Oa(i,l,ae,p,d,ue):null},Oa.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(ur(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Oa.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Oa.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Oa.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var x=d[p];(U=l[this.cases[x]])===void 0?(l[this.cases[x]]=i.length,i.push([this.cases[x],[x]])):i[U][1].push(x)}for(var I=function(W){return e.inputType.kind==="number"?Number(W):W},C=0,L=i;C<L.length;C+=1){var O=L[C],U=O[0],K=O[1];t.push(K.length===1?I(K[0]):K.map(I)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var jn=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};jn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,We);if(!d)return null;var x=t.parse(e[p+1],p+1,i);if(!x)return null;l.push([d,x]),i=i||x.type}var I=t.parse(e[e.length-1],e.length-1,i);return I?new jn(i,l,I):null},jn.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},jn.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},jn.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},jn.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Si=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function qo(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function os(e,t,i,l){return l.compare(t,i)===0}function Ir(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,x,I){this.type=We,this.lhs=d,this.rhs=x,this.collator=I,this.hasUntypedArgument=d.type.kind==="value"||x.type.kind==="value"}return p.parse=function(d,x){if(d.length!==3&&d.length!==4)return x.error("Expected two or three arguments.");var I=d[0],C=x.parse(d[1],1,Ye);if(!C)return null;if(!qo(I,C.type))return x.concat(1).error('"'+I+`" comparisons are not supported for type '`+Xt(C.type)+"'.");var L=x.parse(d[2],2,Ye);if(!L)return null;if(!qo(I,L.type))return x.concat(2).error('"'+I+`" comparisons are not supported for type '`+Xt(L.type)+"'.");if(C.type.kind!==L.type.kind&&C.type.kind!=="value"&&L.type.kind!=="value")return x.error("Cannot compare types '"+Xt(C.type)+"' and '"+Xt(L.type)+"'.");l&&(C.type.kind==="value"&&L.type.kind!=="value"?C=new Br(L.type,[C]):C.type.kind!=="value"&&L.type.kind==="value"&&(L=new Br(C.type,[L])));var O=null;if(d.length===4){if(C.type.kind!=="string"&&L.type.kind!=="string"&&C.type.kind!=="value"&&L.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(O=x.parse(d[3],3,Ut)))return null}return new p(C,L,O)},p.prototype.evaluate=function(d){var x=this.lhs.evaluate(d),I=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var C=ur(x),L=ur(I);if(C.kind!==L.kind||C.kind!=="string"&&C.kind!=="number")throw new qr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+C.kind+", "+L.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var O=ur(x),U=ur(I);if(O.kind!=="string"||U.kind!=="string")return t(d,x,I)}return this.collator?i(d,x,I,this.collator.evaluate(d)):t(d,x,I)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(x){d.push(x.serialize())}),d},p}()}Si.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ye),l=t.parse(e[2],2,Ce);if(!i||!l)return null;if(!sr(i.type,[Ht(Ye),$e,Ye]))return t.error("Expected first argument to be of type array or string, but found "+Xt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Ce);return p?new Si(i.type,i,l,p):null}return new Si(i.type,i,l)},Si.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!mr(t,["string","array"]))throw new qr("Expected first argument to be of type array or string, but found "+Xt(ur(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},Si.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var jo=Ir("==",function(e,t,i){return t===i},os),ju=Ir("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!os(0,t,i,l)}),Qs=Ir("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),ss=Ir(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),$s=Ir("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),Zu=Ir(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),ta=function(e,t,i,l,p){this.type=$e,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};ta.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Ce);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,$e)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,$e)))return null;var x=null;if(l["min-fraction-digits"]&&!(x=t.parse(l["min-fraction-digits"],1,Ce)))return null;var I=null;return l["max-fraction-digits"]&&!(I=t.parse(l["max-fraction-digits"],1,Ce))?null:new ta(i,p,d,x,I)},ta.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},ta.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},ta.prototype.outputDefined=function(){return!1},ta.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Zo=function(e){this.type=Ce,this.input=e};Zo.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Xt(i.type)+" instead."):new Zo(i):null},Zo.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new qr("Expected value to be of type string or array, but found "+Xt(ur(t))+" instead.")},Zo.prototype.eachChild=function(e){e(this.input)},Zo.prototype.outputDefined=function(){return!1},Zo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ls={"==":jo,"!=":ju,">":ss,"<":Qs,">=":Zu,"<=":$s,array:Br,at:Ls,boolean:Br,case:jn,coalesce:wo,collator:qi,format:Ci,image:Pn,in:Un,"index-of":qn,interpolate:Wr,"interpolate-hcl":Wr,"interpolate-lab":Wr,length:Zo,let:Ta,literal:hi,match:Oa,number:Br,"number-format":ta,object:Br,slice:Si,step:gn,string:Br,"to-boolean":ni,"to-color":ni,"to-number":ni,"to-string":ni,var:$i,within:oi};function us(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var x=d?d.evaluate(e):1,I=zn(i,l,p,x);if(I)throw new qr(I);return new jt(i/255*x,l/255*x,p/255*x,x)}function ro(e,t){return e in t}function ra(e,t){var i=t[e];return i===void 0?null:i}function Eo(e){return{type:e}}function bu(e){return{result:"success",value:e}}function Go(e){return{result:"error",value:e}}function Zn(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function So(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ko(e){return!!e.expression&&e.expression.interpolated}function Sr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function wl(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function vc(e){return e}function Aa(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function Gu(e,t,i,l,p){return Aa(typeof i===p?l[i]:void 0,e.default,t.default)}function cs(e,t,i){if(Sr(i)!=="number")return Aa(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=Dn(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function Di(e,t,i){var l=e.base!==void 0?e.base:1;if(Sr(i)!=="number")return Aa(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=Dn(e.stops.map(function(U){return U[0]}),i),x=function(U,K,W,ae){var ue=ae-W,ge=U-W;return ue===0?0:K===1?ge/ue:(Math.pow(K,ge)-1)/(Math.pow(K,ue)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),I=e.stops[d][1],C=e.stops[d+1][1],L=Js[t.type]||vc;if(e.colorSpace&&e.colorSpace!=="rgb"){var O=to[e.colorSpace];L=function(U,K){return O.reverse(O.interpolate(O.forward(U),O.forward(K),x))}}return typeof I.evaluate=="function"?{evaluate:function(){for(var U=[],K=arguments.length;K--;)U[K]=arguments[K];var W=I.evaluate.apply(void 0,U),ae=C.evaluate.apply(void 0,U);if(W!==void 0&&ae!==void 0)return L(W,ae,x)}}:L(I,C,x)}function Gn(e,t,i){return t.type==="color"?i=jt.parse(i):t.type==="formatted"?i=Hr.fromString(i.toString()):t.type==="resolvedImage"?i=An.fromString(i.toString()):Sr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),Aa(i,e.default,t.default)}Nr.register(ls,{error:[{kind:"error"},[$e],function(e,t){throw new qr(t[0].evaluate(e))}],typeof:[$e,[Ye],function(e,t){return Xt(ur(t[0].evaluate(e)))}],"to-rgba":[Ht(Ce,4),[Je],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Je,[Ce,Ce,Ce],us],rgba:[Je,[Ce,Ce,Ce,Ce],us],has:{type:We,overloads:[[[$e],function(e,t){return ro(t[0].evaluate(e),e.properties())}],[[$e,Kt],function(e,t){var i=t[1];return ro(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:Ye,overloads:[[[$e],function(e,t){return ra(t[0].evaluate(e),e.properties())}],[[$e,Kt],function(e,t){var i=t[1];return ra(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[Ye,[$e],function(e,t){return ra(t[0].evaluate(e),e.featureState||{})}],properties:[Kt,[],function(e){return e.properties()}],"geometry-type":[$e,[],function(e){return e.geometryType()}],id:[Ye,[],function(e){return e.id()}],zoom:[Ce,[],function(e){return e.globals.zoom}],"heatmap-density":[Ce,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ce,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ye,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Ce,Eo(Ce),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Ce,Eo(Ce),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Ce,overloads:[[[Ce,Ce],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Ce],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ce,[Ce,Ce],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Ce,[Ce,Ce],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Ce,[],function(){return Math.LN2}],pi:[Ce,[],function(){return Math.PI}],e:[Ce,[],function(){return Math.E}],"^":[Ce,[Ce,Ce],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Ce,[Ce],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Ce,[Ce],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Ce,[Ce],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Ce,[Ce],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Ce,[Ce],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Ce,[Ce],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Ce,[Ce],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Ce,[Ce],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Ce,[Ce],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Ce,[Ce],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Ce,Eo(Ce),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Ce,Eo(Ce),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Ce,[Ce],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Ce,[Ce],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ce,[Ce],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Ce,[Ce],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[We,[$e,Ye],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[We,[Ye],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[We,[$e],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[We,[$e,Ye],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[We,[Ye],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[We,[$e,Ye],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[We,[Ye],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[We,[$e,Ye],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[We,[Ye],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[We,[$e,Ye],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[We,[Ye],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[We,[Ye],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[We,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[We,[Ht($e)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[We,[Ht(Ye)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[We,[$e,Ht(Ye)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[We,[$e,Ht(Ye)],function(e,t){var i=t[0],l=t[1];return function(p,d,x,I){for(;x<=I;){var C=x+I>>1;if(d[C]===p)return!0;d[C]>p?I=C-1:x=C+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:We,overloads:[[[We,We],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[Eo(We),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:We,overloads:[[[We,We],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[Eo(We),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[We,[We],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[We,[$e],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[$e,[$e],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[$e,[$e],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[$e,Eo(Ye),function(e,t){return t.map(function(i){return $n(i.evaluate(e))}).join("")}],"resolved-locale":[$e,[Ut],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var ca=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new ai,this._defaultValue=t?function(i){return i.type==="color"&&wl(i.default)?new jt(0,0,0,0):i.type==="color"?jt.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function ia(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in ls}function Ku(e,t){var i=new Xr(ls,[],t?function(p){var d={color:Je,string:$e,number:Ce,enum:$e,boolean:We,formatted:ir,resolvedImage:Rt};return p.type==="array"?Ht(d[p.value]||Ye,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?bu(new ca(l,t)):Go(i.errors)}ca.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},ca.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new qr("Expected value to be one of "+Object.keys(this._enumValues).map(function(I){return JSON.stringify(I)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}};var Ko=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!Ae(t.expression)};Ko.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},Ko.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var hs=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!Ae(t.expression),this.interpolationType=l};function el(e,t){if((e=Ku(e,t)).result==="error")return e;var i=e.value.expression,l=Ia(i);if(!l&&!Zn(t))return Go([new Ne("","data expressions not supported")]);var p=fi(i,["zoom"]);if(!p&&!So(t))return Go([new Ne("","zoom expressions not supported")]);var d=function x(I){var C=null;if(I instanceof Ta)C=x(I.result);else if(I instanceof wo)for(var L=0,O=I.args;L<O.length&&!(C=x(O[L]));L+=1);else(I instanceof gn||I instanceof Wr)&&I.input instanceof Nr&&I.input.name==="zoom"&&(C=I);return C instanceof Ne||I.eachChild(function(U){var K=x(U);K instanceof Ne?C=K:!C&&K?C=new Ne("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&K&&C!==K&&(C=new Ne("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(i);return d||p?d instanceof Ne?Go([d]):d instanceof Wr&&!ko(t)?Go([new Ne("",'"interpolate" expressions cannot be used with this property')]):bu(d?new hs(l?"camera":"composite",e.value,d.labels,d instanceof Wr?d.interpolation:void 0):new Ko(l?"constant":"source",e.value)):Go([new Ne("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}hs.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},hs.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},hs.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?Wr.interpolationFactor(this.interpolationType,e,t,i):0};var tl=function(e,t){this._parameters=e,this._specification=t,Ue(this,function i(l,p){var d,x,I,C=p.type==="color",L=l.stops&&typeof l.stops[0][0]=="object",O=L||!(L||l.property!==void 0),U=l.type||(ko(p)?"exponential":"interval");if(C&&((l=Ue({},l)).stops&&(l.stops=l.stops.map(function(lt){return[lt[0],jt.parse(lt[1])]})),l.default=jt.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!to[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(U==="exponential")d=Di;else if(U==="interval")d=cs;else if(U==="categorical"){d=Gu,x=Object.create(null);for(var K=0,W=l.stops;K<W.length;K+=1){var ae=W[K];x[ae[0]]=ae[1]}I=typeof l.stops[0][0]}else{if(U!=="identity")throw new Error('Unknown function type "'+U+'"');d=Gn}if(L){for(var ue={},ge=[],de=0;de<l.stops.length;de++){var Se=l.stops[de],Pe=Se[0].zoom;ue[Pe]===void 0&&(ue[Pe]={zoom:Pe,type:l.type,property:l.property,default:l.default,stops:[]},ge.push(Pe)),ue[Pe].stops.push([Se[0].value,Se[1]])}for(var Me=[],Oe=0,je=ge;Oe<je.length;Oe+=1){var Xe=je[Oe];Me.push([ue[Xe].zoom,i(ue[Xe],p)])}var Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Wr.interpolationFactor.bind(void 0,Qe),zoomStops:Me.map(function(lt){return lt[0]}),evaluate:function(lt,_t){var st=lt.zoom;return Di({stops:Me,base:l.base},p,st).evaluate(st,_t)}}}if(O){var St=U==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:St,interpolationFactor:Wr.interpolationFactor.bind(void 0,St),zoomStops:l.stops.map(function(lt){return lt[0]}),evaluate:function(lt){return d(l,p,lt.zoom,x,I)}}}return{kind:"source",evaluate:function(lt,_t){var st=_t&&_t.properties?_t.properties[l.property]:void 0;return st===void 0?Aa(l.default,p.default):d(l,p,st,x,I)}}}(this._parameters,this._specification))};function _n(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,x=e.styleSpec,I=[],C=Sr(i);if(C!=="object")return[new ne(t,i,"object expected, "+C+" found")];for(var L in i){var O=L.split(".")[0],U=l[O]||l["*"],K=void 0;if(p[O])K=p[O];else if(l[O])K=It;else if(p["*"])K=p["*"];else{if(!l["*"]){I.push(new ne(t,i[L],'unknown property "'+L+'"'));continue}K=It}I=I.concat(K({key:(t&&t+".")+L,value:i[L],valueSpec:U,style:d,styleSpec:x,object:i,objectKey:L},i))}for(var W in l)p[W]||l[W].required&&l[W].default===void 0&&i[W]===void 0&&I.push(new ne(t,i,'missing required property "'+W+'"'));return I}function ps(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,x=e.arrayElementValidator||It;if(Sr(t)!=="array")return[new ne(d,t,"array expected, "+Sr(t)+" found")];if(i.length&&t.length!==i.length)return[new ne(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new ne(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var I={type:i.value,values:i.values};p.$version<7&&(I.function=i.function),Sr(i.value)==="object"&&(I=i.value);for(var C=[],L=0;L<t.length;L++)C=C.concat(x({array:t,arrayIndex:L,value:t[L],valueSpec:I,style:l,styleSpec:p,key:d+"["+L+"]"}));return C}function Hu(e){var t=e.key,i=e.value,l=e.valueSpec,p=Sr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new ne(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new ne(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new ne(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function rl(e){var t,i,l,p=e.valueSpec,d=Ge(e.value.type),x={},I=d!=="categorical"&&e.value.property===void 0,C=!I,L=Sr(e.value.stops)==="array"&&Sr(e.value.stops[0])==="array"&&Sr(e.value.stops[0][0])==="object",O=_n({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(W){if(d==="identity")return[new ne(W.key,W.value,'identity function may not have a "stops" property')];var ae=[],ue=W.value;return ae=ae.concat(ps({key:W.key,value:ue,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:U})),Sr(ue)==="array"&&ue.length===0&&ae.push(new ne(W.key,ue,"array must have at least one stop")),ae},default:function(W){return It({key:W.key,value:W.value,valueSpec:p,style:W.style,styleSpec:W.styleSpec})}}});return d==="identity"&&I&&O.push(new ne(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||O.push(new ne(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!ko(e.valueSpec)&&O.push(new ne(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(C&&!Zn(e.valueSpec)?O.push(new ne(e.key,e.value,"property functions not supported")):I&&!So(e.valueSpec)&&O.push(new ne(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!L||e.value.property!==void 0||O.push(new ne(e.key,e.value,'"property" property is required')),O;function U(W){var ae=[],ue=W.value,ge=W.key;if(Sr(ue)!=="array")return[new ne(ge,ue,"array expected, "+Sr(ue)+" found")];if(ue.length!==2)return[new ne(ge,ue,"array length 2 expected, length "+ue.length+" found")];if(L){if(Sr(ue[0])!=="object")return[new ne(ge,ue,"object expected, "+Sr(ue[0])+" found")];if(ue[0].zoom===void 0)return[new ne(ge,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new ne(ge,ue,"object stop key must have value")];if(l&&l>Ge(ue[0].zoom))return[new ne(ge,ue[0].zoom,"stop zoom values must appear in ascending order")];Ge(ue[0].zoom)!==l&&(l=Ge(ue[0].zoom),i=void 0,x={}),ae=ae.concat(_n({key:ge+"[0]",value:ue[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Hu,value:K}}))}else ae=ae.concat(K({key:ge+"[0]",value:ue[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},ue));return ia(Le(ue[1]))?ae.concat([new ne(ge+"[1]",ue[1],"expressions are not allowed in function stops.")]):ae.concat(It({key:ge+"[1]",value:ue[1],valueSpec:p,style:W.style,styleSpec:W.styleSpec}))}function K(W,ae){var ue=Sr(W.value),ge=Ge(W.value),de=W.value!==null?W.value:ae;if(t){if(ue!==t)return[new ne(W.key,de,ue+" stop domain type must match previous stop domain type "+t)]}else t=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new ne(W.key,de,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&d!=="categorical"){var Se="number expected, "+ue+" found";return Zn(p)&&d===void 0&&(Se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ne(W.key,de,Se)]}return d!=="categorical"||ue!=="number"||isFinite(ge)&&Math.floor(ge)===ge?d!=="categorical"&&ue==="number"&&i!==void 0&&ge<i?[new ne(W.key,de,"stop domain values must appear in ascending order")]:(i=ge,d==="categorical"&&ge in x?[new ne(W.key,de,"stop domain values must be unique")]:(x[ge]=!0,[])):[new ne(W.key,de,"integer expected, found "+ge)]}}function za(e){var t=(e.expressionContext==="property"?el:Ku)(Le(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new ne(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new ne(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Ae(i))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Ae(i))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!fi(i,["zoom","feature-state"]))return[new ne(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Ia(i))return[new ne(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zl(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(Ge(i))===-1&&p.push(new ne(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(Ge(i))===-1&&p.push(new ne(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function Gl(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!Gl(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}tl.deserialize=function(e){return new tl(e._parameters,e._specification)},tl.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Kn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Va(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Gl(e)||(e=Xa(e));var t=Ku(e,Kn);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function Mn(e,t){return e<t?-1:e>t?1:0}function Xa(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?io(e[1],e[2],"=="):i==="!="?xu(io(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?io(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(Xa))):i==="all"?["all"].concat(e.slice(1).map(Xa)):i==="none"?["all"].concat(e.slice(1).map(Xa).map(xu)):i==="in"?Io(e[1],e.slice(2)):i==="!in"?xu(Io(e[1],e.slice(2))):i==="has"?El(e[1]):i==="!has"?xu(El(e[1])):i!=="within"||e}function io(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function Io(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Mn)]]:["filter-in-small",e,["literal",t]]}}function El(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function xu(e){return["!",e]}function no(e){return Gl(Le(e.value))?za(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(Sr(l)!=="array")return[new ne(p,l,"array expected, "+Sr(l)+" found")];var d,x=i.styleSpec,I=[];if(l.length<1)return[new ne(p,l,"filter array must have at least 1 element")];switch(I=I.concat(Zl({key:p+"[0]",value:l[0],valueSpec:x.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ge(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ge(l[1])==="$type"&&I.push(new ne(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&I.push(new ne(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=Sr(l[1]))!=="string"&&I.push(new ne(p+"[1]",l[1],"string expected, "+d+" found"));for(var C=2;C<l.length;C++)d=Sr(l[C]),Ge(l[1])==="$type"?I=I.concat(Zl({key:p+"["+C+"]",value:l[C],valueSpec:x.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&I.push(new ne(p+"["+C+"]",l[C],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var L=1;L<l.length;L++)I=I.concat(t({key:p+"["+L+"]",value:l[L],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Sr(l[1]),l.length!==2?I.push(new ne(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&I.push(new ne(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=Sr(l[1]),l.length!==2?I.push(new ne(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&I.push(new ne(p+"[1]",l[1],"object expected, "+d+" found"))}return I}(e)}function cn(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,x=e.objectKey,I=p[t+"_"+e.layerType];if(!I)return[];var C=x.match(/^(.*)-transition$/);if(t==="paint"&&C&&I[C[1]]&&I[C[1]].transition)return It({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var L,O=e.valueSpec||I[x];if(!O)return[new ne(i,d,'unknown property "'+x+'"')];if(Sr(d)==="string"&&Zn(O)&&!O.tokens&&(L=/^{([^}]+)}$/.exec(d)))return[new ne(i,d,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(L[1])+" }`.")];var U=[];return e.layerType==="symbol"&&(x==="text-field"&&l&&!l.glyphs&&U.push(new ne(i,d,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&wl(Le(d))&&Ge(d.type)==="identity"&&U.push(new ne(i,d,'"text-font" does not support identity functions'))),U.concat(It({key:e.key,value:d,valueSpec:O,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:x}))}function il(e){return cn(e,"paint")}function nl(e){return cn(e,"layout")}function Pa(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new ne(l,i,'either "type" or "ref" is required'));var x,I=Ge(i.type),C=Ge(i.ref);if(i.id)for(var L=Ge(i.id),O=0;O<e.arrayIndex;O++){var U=p.layers[O];Ge(U.id)===L&&t.push(new ne(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+U.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(ae){ae in i&&t.push(new ne(l,i[ae],'"'+ae+'" is prohibited for ref layers'))}),p.layers.forEach(function(ae){Ge(ae.id)===C&&(x=ae)}),x?x.ref?t.push(new ne(l,i.ref,"ref cannot reference another ref layer")):I=Ge(x.type):t.push(new ne(l,i.ref,'ref layer "'+C+'" not found'));else if(I!=="background")if(i.source){var K=p.sources&&p.sources[i.source],W=K&&Ge(K.type);K?W==="vector"&&I==="raster"?t.push(new ne(l,i.source,'layer "'+i.id+'" requires a raster source')):W==="raster"&&I!=="raster"?t.push(new ne(l,i.source,'layer "'+i.id+'" requires a vector source')):W!=="vector"||i["source-layer"]?W==="raster-dem"&&I!=="hillshade"?t.push(new ne(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!i.paint||!i.paint["line-gradient"]||W==="geojson"&&K.lineMetrics||t.push(new ne(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ne(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new ne(l,i.source,'source "'+i.source+'" not found'))}else t.push(new ne(l,i,'missing required property "source"'));return t=t.concat(_n({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return It({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:no,layout:function(ae){return _n({layer:i,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":function(ue){return nl(Ue({layerType:I},ue))}}})},paint:function(ae){return _n({layer:i,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":function(ue){return il(Ue({layerType:I},ue))}}})}}}))}function fs(e){var t=e.value,i=e.key,l=Sr(t);return l!=="string"?[new ne(i,t,"string expected, "+l+" found")]:[]}var Yr={promoteId:function(e){var t=e.key,i=e.value;if(Sr(i)==="string")return fs({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,fs({key:t+"."+p,value:i[p]}));return l}};function Wa(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new ne(i,t,'"type" is required')];var d,x=Ge(t.type);switch(x){case"vector":case"raster":case"raster-dem":return _n({key:i,value:t,valueSpec:l["source_"+x.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:Yr});case"geojson":if(d=_n({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:Yr}),t.cluster)for(var I in t.clusterProperties){var C=t.clusterProperties[I],L=C[0],O=typeof L=="string"?[L,["accumulated"],["get",I]]:L;d.push.apply(d,za({key:i+"."+I+".map",value:C[1],expressionContext:"cluster-map"})),d.push.apply(d,za({key:i+"."+I+".reduce",value:O,expressionContext:"cluster-reduce"}))}return d;case"video":return _n({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return _n({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new ne(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zl({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function di(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],x=Sr(t);if(t===void 0)return d;if(x!=="object")return d.concat([new ne("light",t,"object expected, "+x+" found")]);for(var I in t){var C=I.match(/^(.*)-transition$/);d=d.concat(C&&l[C[1]]&&l[C[1]].transition?It({key:I,value:t[I],valueSpec:i.transition,style:p,styleSpec:i}):l[I]?It({key:I,value:t[I],valueSpec:l[I],style:p,styleSpec:i}):[new ne(I,t[I],'unknown property "'+I+'"')])}return d}var mi={"*":function(){return[]},array:ps,boolean:function(e){var t=e.value,i=e.key,l=Sr(t);return l!=="boolean"?[new ne(i,t,"boolean expected, "+l+" found")]:[]},number:Hu,color:function(e){var t=e.key,i=e.value,l=Sr(i);return l!=="string"?[new ne(t,i,"color expected, "+l+" found")]:Ot(i)===null?[new ne(t,i,'color expected, "'+i+'" found')]:[]},constants:Ie,enum:Zl,filter:no,function:rl,layer:Pa,object:_n,source:Wa,light:di,string:fs,formatted:function(e){return fs(e).length===0?[]:za(e)},resolvedImage:function(e){return fs(e).length===0?[]:za(e)}};function It(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&wl(Ge(t))?rl(e):i.expression&&ia(Le(t))?za(e):i.type&&mi[i.type]?mi[i.type](e):_n(Ue({},e,{valueSpec:i.type?l[i.type]:i}))}function qt(e){var t=e.value,i=e.key,l=fs(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new ne(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new ne(i,t,'"glyphs" url must include a "{range}" token'))),l}function yr(e,t){t===void 0&&(t=H);var i=[];return i=i.concat(It({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:qt,"*":function(){return[]}}})),e.constants&&(i=i.concat(Ie({key:"constants",value:e.constants,style:e,styleSpec:t}))),Kl(i)}function Kl(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function ao(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Kl(e.apply(this,t))}}yr.source=ao(Wa),yr.light=ao(di),yr.layer=ao(Pa),yr.filter=ao(no),yr.paintProperty=ao(il),yr.layoutProperty=ao(nl);var oo=yr,Lh=oo.light,Xc=oo.paintProperty,ds=oo.layoutProperty;function To(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new ve(new Error(p[l].message))),i=!0;return i}var Hn=ki;function ki(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var x=p[3+d],I=p[3+d+1];l.push(x===I?null:p.subarray(x,I))}var C=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],C),this.bboxes=p.subarray(C),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var L=0;L<this.d*this.d;L++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var O=i/t*e;this.min=-O,this.max=e+O}ki.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},ki.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ki.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},ki.prototype.query=function(e,t,i,l,p){var d=this.min,x=this.max;if(e<=d&&t<=d&&x<=i&&x<=l&&!p)return Array.prototype.slice.call(this.keys);var I=[];return this._forEachCell(e,t,i,l,this._queryCell,I,{},p),I},ki.prototype._queryCell=function(e,t,i,l,p,d,x,I){var C=this.cells[p];if(C!==null)for(var L=this.keys,O=this.bboxes,U=0;U<C.length;U++){var K=C[U];if(x[K]===void 0){var W=4*K;(I?I(O[W+0],O[W+1],O[W+2],O[W+3]):e<=O[W+2]&&t<=O[W+3]&&i>=O[W+0]&&l>=O[W+1])?(x[K]=!0,d.push(L[K])):x[K]=!1}}},ki.prototype._forEachCell=function(e,t,i,l,p,d,x,I){for(var C=this._convertToCellCoord(e),L=this._convertToCellCoord(t),O=this._convertToCellCoord(i),U=this._convertToCellCoord(l),K=C;K<=O;K++)for(var W=L;W<=U;W++){var ae=this.d*W+K;if((!I||I(this._convertFromCellCoord(K),this._convertFromCellCoord(W),this._convertFromCellCoord(K+1),this._convertFromCellCoord(W+1)))&&p.call(this,e,t,i,l,ae,d,x,I))return}},ki.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ki.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ki.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,x=0;x<e.length;x++){var I=e[x];p[3+x]=d,p.set(I,d),d+=I.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var ms=q.ImageData,Ao=q.ImageBitmap,en={};function at(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),en[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Zi in at("Object",Object),Hn.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Hn.deserialize=function(e){return new Hn(e.buffer)},at("Grid",Hn),at("Color",jt),at("Error",Error),at("ResolvedImage",An),at("StylePropertyFunction",tl),at("StyleExpression",ca,{omit:["_evaluator"]}),at("ZoomDependentExpression",hs),at("ZoomConstantExpression",Ko),at("CompoundExpression",Nr,{omit:["_evaluate"]}),ls)ls[Zi]._classRegistryKey||at("Expression_"+Zi,ls[Zi]);function Ii(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Jr(e){return Ao&&e instanceof Ao}function Xn(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Ii(e)||Jr(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof ms)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(Xn(d[p],t));return l}if(typeof e=="object"){var x=e.constructor,I=x._classRegistryKey;if(!I)throw new Error("can't serialize object of unregistered class");var C=x.serialize?x.serialize(e,t):{};if(!x.serialize){for(var L in e)if(e.hasOwnProperty(L)&&!(en[I].omit.indexOf(L)>=0)){var O=e[L];C[L]=en[I].shallow.indexOf(L)>=0?O:Xn(O,t)}e instanceof Error&&(C.message=e.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return I!=="Object"&&(C.$name=I),C}throw new Error("can't serialize object of type "+typeof e)}function bn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Ii(e)||Jr(e)||ArrayBuffer.isView(e)||e instanceof ms)return e;if(Array.isArray(e))return e.map(bn);if(typeof e=="object"){var t=e.$name||"Object",i=en[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var x=d[p];if(x!=="$name"){var I=e[x];l[x]=en[t].shallow.indexOf(x)>=0?I:bn(I)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var al=function(){this.first=!0};al.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var me={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function gt(e){for(var t=0,i=e;t<i.length;t+=1)if(ha(i[t].charCodeAt(0)))return!0;return!1}function ha(e){return!(e!==746&&e!==747&&(e<4352||!(me["Bopomofo Extended"](e)||me.Bopomofo(e)||me["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||me["CJK Compatibility Ideographs"](e)||me["CJK Compatibility"](e)||me["CJK Radicals Supplement"](e)||me["CJK Strokes"](e)||!(!me["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||me["CJK Unified Ideographs Extension A"](e)||me["CJK Unified Ideographs"](e)||me["Enclosed CJK Letters and Months"](e)||me["Hangul Compatibility Jamo"](e)||me["Hangul Jamo Extended-A"](e)||me["Hangul Jamo Extended-B"](e)||me["Hangul Jamo"](e)||me["Hangul Syllables"](e)||me.Hiragana(e)||me["Ideographic Description Characters"](e)||me.Kanbun(e)||me["Kangxi Radicals"](e)||me["Katakana Phonetic Extensions"](e)||me.Katakana(e)&&e!==12540||!(!me["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!me["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||me["Unified Canadian Aboriginal Syllabics"](e)||me["Unified Canadian Aboriginal Syllabics Extended"](e)||me["Vertical Forms"](e)||me["Yijing Hexagram Symbols"](e)||me["Yi Syllables"](e)||me["Yi Radicals"](e))))}function pa(e){return!(ha(e)||function(t){return!!(me["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||me["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||me["Letterlike Symbols"](t)||me["Number Forms"](t)||me["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||me["Control Pictures"](t)&&t!==9251||me["Optical Character Recognition"](t)||me["Enclosed Alphanumerics"](t)||me["Geometric Shapes"](t)||me["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||me["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||me["CJK Symbols and Punctuation"](t)||me.Katakana(t)||me["Private Use Area"](t)||me["CJK Compatibility Forms"](t)||me["Small Form Variants"](t)||me["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function fa(e){return e>=1424&&e<=2303||me["Arabic Presentation Forms-A"](e)||me["Arabic Presentation Forms-B"](e)}function tn(e,t){return!(!t&&fa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||me.Khmer(e))}function da(e){for(var t=0,i=e;t<i.length;t+=1)if(fa(i[t].charCodeAt(0)))return!0;return!1}var ys=null,Mi="unavailable",Fa=null,Wc=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Mi="error"),ys&&ys(e)};function Ho(){vs.fire(new se("pluginStateChange",{pluginStatus:Mi,pluginURL:Fa}))}var vs=new be,ol=function(){return Mi},Ln=function(){if(Mi!=="deferred"||!Fa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mi="loading",Ho(),Fa&&wi({url:Fa},function(e){e?Wc(e):(Mi="loaded",Ho())})},xn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Mi==="loaded"||xn.applyArabicShaping!=null},isLoading:function(){return Mi==="loading"},setState:function(e){Mi=e.pluginStatus,Fa=e.pluginURL},isParsed:function(){return xn.applyArabicShaping!=null&&xn.processBidirectionalText!=null&&xn.processStyledBidirectionalText!=null},getPluginURL:function(){return Fa}},tr=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new al,this.transition={})};tr.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!tn(p[l].charCodeAt(0),i))return!1;return!0}(e,xn.isLoaded())},tr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},tr.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var Xo=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(wl(i))return new tl(i,l);if(ia(i)){var p=el(i,l);if(p.result==="error")throw new Error(p.value.map(function(x){return x.key+": "+x.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=jt.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};Xo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Xo.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var yi=function(e){this.property=e,this.value=new Xo(e,void 0)};yi.prototype.transitioned=function(e,t){return new Rs(this.property,this.value,t,Fe({},e.transition,this.transition),e.now)},yi.prototype.untransitioned=function(){return new Rs(this.property,this.value,null,{},0)};var vi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};vi.prototype.getValue=function(e){return kt(this._values[e].value.value)},vi.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new yi(this._values[e].property)),this._values[e].value=new Xo(this._values[e].property,t===null?void 0:kt(t))},vi.prototype.getTransition=function(e){return kt(this._values[e].transition)},vi.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new yi(this._values[e].property)),this._values[e].transition=kt(t)||void 0},vi.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},vi.prototype.transitioned=function(e,t){for(var i=new gs(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},vi.prototype.untransitioned=function(){for(var e=new gs(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var Rs=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};Rs.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var x=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(I){if(I<=0)return 0;if(I>=1)return 1;var C=I*I,L=C*I;return 4*(I<.5?L:3*(I-C)+L-.75)}(x))}return p};var gs=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};gs.prototype.possiblyEvaluate=function(e,t,i){for(var l=new Bs(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];l._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return l},gs.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var so=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};so.prototype.getValue=function(e){return kt(this._values[e].value)},so.prototype.setValue=function(e,t){this._values[e]=new Xo(this._values[e].property,t===null?void 0:kt(t))},so.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},so.prototype.possiblyEvaluate=function(e,t,i){for(var l=new Bs(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var x=d[p];l._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return l};var na=function(e,t,i){this.property=e,this.value=t,this.parameters=i};na.prototype.isConstant=function(){return this.value.kind==="constant"},na.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},na.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var Bs=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Bs.prototype.get=function(e){return this._values[e]};var xt=function(e){this.specification=e};xt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},xt.prototype.interpolate=function(e,t,i){var l=Js[this.specification.type];return l?l(e,t,i):e};var dt=function(e,t){this.specification=e,this.overrides=t};dt.prototype.possiblyEvaluate=function(e,t,i,l){return new na(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},dt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new na(this,{kind:"constant",value:void 0},e.parameters);var l=Js[this.specification.type];return l?new na(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},dt.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var Qr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new na(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var x=i.expression.evaluate(l,null,{},p,d),I=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(I,I,I,l);return new na(this,{kind:"constant",value:C},l)}if(i.expression.kind==="camera"){var L=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new na(this,{kind:"constant",value:L},l)}return new na(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,x,I){if(i.kind==="source"){var C=i.evaluate(l,p,d,x,I);return this._calculate(C,C,C,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(dt),Gi=function(e){this.specification=e};Gi.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new tr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new tr(Math.floor(t.zoom),t)),e.expression.evaluate(new tr(Math.floor(t.zoom+1),t)),t)}},Gi.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},Gi.prototype.interpolate=function(e){return e};var hn=function(e){this.specification=e};hn.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},hn.prototype.interpolate=function(){return!1};var Ki=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Xo(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new yi(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};at("DataDrivenProperty",dt),at("DataConstantProperty",xt),at("CrossFadedDataDrivenProperty",Qr),at("CrossFadedProperty",Gi),at("ColorRampProperty",hn);var Wo=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new so(l.layout)),l.paint)){for(var p in this._transitionablePaint=new vi(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Bs(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(ds,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return pr(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(Xc,"layers."+this.id+".paint."+i,i,l,p))return!1;if(pr(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],x=d.property.specification["property-type"]==="cross-faded-data-driven",I=d.value.isDataDriven(),C=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var L=this._transitionablePaint._values[i].value;return L.isDataDriven()||I||x||this._handleOverridablePaintPropertyUpdate(i,C,L)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),bt(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&To(this,i.call(oo,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:H,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof na&&Zn(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(be),Os={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},gc=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Dr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Hi(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=Os[p.type].BYTES_PER_ELEMENT,x=i=lo(i,Math.max(t,d)),I=p.components||1;return l=Math.max(l,d),i+=d*I,{name:p.name,type:p.type,components:I,offset:x}}),size:lo(i,Math.max(l,t)),alignment:t}}function lo(e,t){return Math.ceil(e/t)*t}Dr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Dr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Dr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Dr.prototype.clear=function(){this.length=0},Dr.prototype.resize=function(e){this.reserve(e),this.length=e},Dr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Dr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var sl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(Dr);sl.prototype.bytesPerElement=4,at("StructArrayLayout2i4",sl);var ll=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var I=4*i;return this.int16[I+0]=l,this.int16[I+1]=p,this.int16[I+2]=d,this.int16[I+3]=x,i},t}(Dr);ll.prototype.bytesPerElement=8,at("StructArrayLayout4i8",ll);var zo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,x,I)},t.prototype.emplace=function(i,l,p,d,x,I,C){var L=6*i;return this.int16[L+0]=l,this.int16[L+1]=p,this.int16[L+2]=d,this.int16[L+3]=x,this.int16[L+4]=I,this.int16[L+5]=C,i},t}(Dr);zo.prototype.bytesPerElement=12,at("StructArrayLayout2i4i12",zo);var Na=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,x,I)},t.prototype.emplace=function(i,l,p,d,x,I,C){var L=4*i,O=8*i;return this.int16[L+0]=l,this.int16[L+1]=p,this.uint8[O+4]=d,this.uint8[O+5]=x,this.uint8[O+6]=I,this.uint8[O+7]=C,i},t}(Dr);Na.prototype.bytesPerElement=8,at("StructArrayLayout2i4ub8",Na);var Sl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(Dr);Sl.prototype.bytesPerElement=8,at("StructArrayLayout2f8",Sl);var Rn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,U){var K=this.length;return this.resize(K+1),this.emplace(K,i,l,p,d,x,I,C,L,O,U)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,U,K){var W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=p,this.uint16[W+2]=d,this.uint16[W+3]=x,this.uint16[W+4]=I,this.uint16[W+5]=C,this.uint16[W+6]=L,this.uint16[W+7]=O,this.uint16[W+8]=U,this.uint16[W+9]=K,i},t}(Dr);Rn.prototype.bytesPerElement=20,at("StructArrayLayout10ui20",Rn);var kl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,U,K,W){var ae=this.length;return this.resize(ae+1),this.emplace(ae,i,l,p,d,x,I,C,L,O,U,K,W)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,U,K,W,ae){var ue=12*i;return this.int16[ue+0]=l,this.int16[ue+1]=p,this.int16[ue+2]=d,this.int16[ue+3]=x,this.uint16[ue+4]=I,this.uint16[ue+5]=C,this.uint16[ue+6]=L,this.uint16[ue+7]=O,this.int16[ue+8]=U,this.int16[ue+9]=K,this.int16[ue+10]=W,this.int16[ue+11]=ae,i},t}(Dr);kl.prototype.bytesPerElement=24,at("StructArrayLayout4i4ui4i24",kl);var Ya=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.float32[x+0]=l,this.float32[x+1]=p,this.float32[x+2]=d,i},t}(Dr);Ya.prototype.bytesPerElement=12,at("StructArrayLayout3f12",Ya);var Ua=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(Dr);Ua.prototype.bytesPerElement=4,at("StructArrayLayout1ul4",Ua);var _s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O){var U=this.length;return this.resize(U+1),this.emplace(U,i,l,p,d,x,I,C,L,O)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,U){var K=10*i,W=5*i;return this.int16[K+0]=l,this.int16[K+1]=p,this.int16[K+2]=d,this.int16[K+3]=x,this.int16[K+4]=I,this.int16[K+5]=C,this.uint32[W+3]=L,this.uint16[K+8]=O,this.uint16[K+9]=U,i},t}(Dr);_s.prototype.bytesPerElement=20,at("StructArrayLayout6i1ul2ui20",_s);var Il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,x,I)},t.prototype.emplace=function(i,l,p,d,x,I,C){var L=6*i;return this.int16[L+0]=l,this.int16[L+1]=p,this.int16[L+2]=d,this.int16[L+3]=x,this.int16[L+4]=I,this.int16[L+5]=C,i},t}(Dr);Il.prototype.bytesPerElement=12,at("StructArrayLayout2i2i2i12",Il);var ma=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x){var I=this.length;return this.resize(I+1),this.emplace(I,i,l,p,d,x)},t.prototype.emplace=function(i,l,p,d,x,I){var C=4*i,L=8*i;return this.float32[C+0]=l,this.float32[C+1]=p,this.float32[C+2]=d,this.int16[L+6]=x,this.int16[L+7]=I,i},t}(Dr);ma.prototype.bytesPerElement=16,at("StructArrayLayout2f1f2i16",ma);var Yc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var I=12*i,C=3*i;return this.uint8[I+0]=l,this.uint8[I+1]=p,this.float32[C+1]=d,this.float32[C+2]=x,i},t}(Dr);Yc.prototype.bytesPerElement=12,at("StructArrayLayout2ub2f12",Yc);var uo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.uint16[x+0]=l,this.uint16[x+1]=p,this.uint16[x+2]=d,i},t}(Dr);uo.prototype.bytesPerElement=6,at("StructArrayLayout3ui6",uo);var aa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,U,K,W,ae,ue,ge,de,Se){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,i,l,p,d,x,I,C,L,O,U,K,W,ae,ue,ge,de,Se)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,U,K,W,ae,ue,ge,de,Se,Pe){var Me=24*i,Oe=12*i,je=48*i;return this.int16[Me+0]=l,this.int16[Me+1]=p,this.uint16[Me+2]=d,this.uint16[Me+3]=x,this.uint32[Oe+2]=I,this.uint32[Oe+3]=C,this.uint32[Oe+4]=L,this.uint16[Me+10]=O,this.uint16[Me+11]=U,this.uint16[Me+12]=K,this.float32[Oe+7]=W,this.float32[Oe+8]=ae,this.uint8[je+36]=ue,this.uint8[je+37]=ge,this.uint8[je+38]=de,this.uint32[Oe+10]=Se,this.int16[Me+22]=Pe,i},t}(Dr);aa.prototype.bytesPerElement=48,at("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",aa);var Vs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,x,I,C,L,O,U,K,W,ae,ue,ge,de,Se,Pe,Me,Oe,je,Xe,Qe,St,lt,_t,st,Zt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,i,l,p,d,x,I,C,L,O,U,K,W,ae,ue,ge,de,Se,Pe,Me,Oe,je,Xe,Qe,St,lt,_t,st,Zt)},t.prototype.emplace=function(i,l,p,d,x,I,C,L,O,U,K,W,ae,ue,ge,de,Se,Pe,Me,Oe,je,Xe,Qe,St,lt,_t,st,Zt,Lt){var yt=34*i,cr=17*i;return this.int16[yt+0]=l,this.int16[yt+1]=p,this.int16[yt+2]=d,this.int16[yt+3]=x,this.int16[yt+4]=I,this.int16[yt+5]=C,this.int16[yt+6]=L,this.int16[yt+7]=O,this.uint16[yt+8]=U,this.uint16[yt+9]=K,this.uint16[yt+10]=W,this.uint16[yt+11]=ae,this.uint16[yt+12]=ue,this.uint16[yt+13]=ge,this.uint16[yt+14]=de,this.uint16[yt+15]=Se,this.uint16[yt+16]=Pe,this.uint16[yt+17]=Me,this.uint16[yt+18]=Oe,this.uint16[yt+19]=je,this.uint16[yt+20]=Xe,this.uint16[yt+21]=Qe,this.uint16[yt+22]=St,this.uint32[cr+12]=lt,this.float32[cr+13]=_t,this.float32[cr+14]=st,this.float32[cr+15]=Zt,this.float32[cr+16]=Lt,i},t}(Dr);Vs.prototype.bytesPerElement=68,at("StructArrayLayout8i15ui1ul4f68",Vs);var bs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(Dr);bs.prototype.bytesPerElement=4,at("StructArrayLayout1f4",bs);var Ca=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=3*i;return this.int16[x+0]=l,this.int16[x+1]=p,this.int16[x+2]=d,i},t}(Dr);Ca.prototype.bytesPerElement=6,at("StructArrayLayout3i6",Ca);var Hl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var x=4*i;return this.uint32[2*i+0]=l,this.uint16[x+2]=p,this.uint16[x+3]=d,i},t}(Dr);Hl.prototype.bytesPerElement=8,at("StructArrayLayout1ul2ui8",Hl);var Xl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(Dr);Xl.prototype.bytesPerElement=4,at("StructArrayLayout2ui4",Xl);var ul=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(Dr);ul.prototype.bytesPerElement=2,at("StructArrayLayout1ui2",ul);var xs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,x){var I=4*i;return this.float32[I+0]=l,this.float32[I+1]=p,this.float32[I+2]=d,this.float32[I+3]=x,i},t}(Dr);xs.prototype.bytesPerElement=16,at("StructArrayLayout4f16",xs);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new V(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(gc);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(_s);at("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(gc);a.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new a(this,i)},t}(aa);at("PlacedSymbolArray",c);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(gc);m.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(Vs);at("SymbolInstanceArray",w);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(bs);at("GlyphOffsetArray",k);var P=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Ca);at("SymbolLineVertexArray",P);var B=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(gc);B.prototype.size=8;var Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new B(this,i)},t}(Hl);at("FeatureIndexArray",Z);var Y=Hi([{name:"a_pos",components:2,type:"Int16"}],4).members,J=function(e){e===void 0&&(e=[]),this.segments=e};function Q(e,t){return 256*(e=Ee(Math.floor(e),0,255))+Ee(Math.floor(t),0,255)}J.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>J.MAX_VERTEX_ARRAY_LENGTH&&Nt("Max vertices per segment is "+J.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>J.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},J.prototype.get=function(){return this.segments},J.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},J.simpleSegment=function(e,t,i,l){return new J([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},J.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,at("SegmentVector",J);var le=Hi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),oe=A(function(e){e.exports=function(t,i){var l,p,d,x,I,C,L,O;for(p=t.length-(l=3&t.length),d=i,I=3432918353,C=461845907,O=0;O<p;)L=255&t.charCodeAt(O)|(255&t.charCodeAt(++O))<<8|(255&t.charCodeAt(++O))<<16|(255&t.charCodeAt(++O))<<24,++O,d=27492+(65535&(x=5*(65535&(d=(d^=L=(65535&(L=(L=(65535&L)*I+(((L>>>16)*I&65535)<<16)&4294967295)<<15|L>>>17))*C+(((L>>>16)*C&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(L=0,l){case 3:L^=(255&t.charCodeAt(O+2))<<16;case 2:L^=(255&t.charCodeAt(O+1))<<8;case 1:d^=L=(65535&(L=(L=(65535&(L^=255&t.charCodeAt(O)))*I+(((L>>>16)*I&65535)<<16)&4294967295)<<15|L>>>17))*C+(((L>>>16)*C&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),ye=A(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,x=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(x)|(255&t.charCodeAt(++x))<<8|(255&t.charCodeAt(++x))<<16|(255&t.charCodeAt(++x))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++x;switch(p){case 3:d^=(255&t.charCodeAt(x+2))<<16;case 2:d^=(255&t.charCodeAt(x+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(x)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),ie=oe,fe=ye;ie.murmur3=oe,ie.murmur2=fe;var _e=function(){this.ids=[],this.positions=[],this.indexed=!1};_e.prototype.add=function(e,t,i,l){this.ids.push(Re(e)),this.positions.push(t,i,l)},_e.prototype.getPositions=function(e){for(var t=Re(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},_e.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,x,I,C){for(;I<C;){for(var L=d[I+C>>1],O=I-1,U=C+1;;){do O++;while(d[O]<L);do U--;while(d[U]>L);if(O>=U)break;De(d,O,U),De(x,3*O,3*U),De(x,3*O+1,3*U+1),De(x,3*O+2,3*U+2)}U-I<C-U?(p(d,x,I,U),I=U+1):(p(d,x,U+1,C),C=U)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},_e.deserialize=function(e){var t=new _e;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Te=Math.pow(2,53)-1;function Re(e){var t=+e;return!isNaN(t)&&t<=Te?t:ie(String(e))}function De(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}at("FeaturePositionMap",_e);var Ve=function(e,t){this.gl=e.gl,this.location=t},Ze=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Ve),He=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Ve),Ke=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Ve),ut=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Ve),vt=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Ve),Et=function(e){function t(i,l){e.call(this,i,l),this.current=jt.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Ve),Tt=new Float32Array(16),hr=function(e){function t(i,l){e.call(this,i,l),this.current=Tt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Ve);function ot(e){return[Q(255*e.r,255*e.g),Q(255*e.b,255*e.a)]}var Mt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};Mt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Mt.prototype.getBinding=function(e,t,i){return this.type==="color"?new Et(e,t):new He(e,t)};var Wt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Wt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Wt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Wt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new vt(e,t):new He(e,t)};var Vt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};Vt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,x=this.expression.evaluate(new tr(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,x)},Vt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},Vt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=ot(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Vt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var zt=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(x){return"u_"+x+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(x){return{name:"a_"+x,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};zt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new tr(this.zoom),t,{},l,[],p),x=this.expression.evaluate(new tr(this.zoom+1),t,{},l,[],p),I=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(I,e,d,x)},zt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},zt.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=ot(i),d=ot(l),x=e;x<t;x++)this.paintVertexArray.emplace(x,p[0],p[1],d[0],d[1]);else{for(var I=e;I<t;I++)this.paintVertexArray.emplace(I,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},zt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=Ee(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},zt.prototype.getBinding=function(e,t,i){return new He(e,t)};var Bt=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Bt.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Bt.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Bt.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],x=l[i.max];if(p&&d&&x)for(var I=e;I<t;I++)this.zoomInPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],d.pixelRatio,x.pixelRatio)}},Bt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,le.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,le.members,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var At=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof na&&Zn(d.property.specification)){var x=Li(p,e.type),I=d.value,C=d.property.specification.type,L=d.property.useIntegerZoom,O=d.property.specification["property-type"],U=O==="cross-faded"||O==="cross-faded-data-driven";if(I.kind==="constant")this.binders[p]=U?new Wt(I.value,x):new Mt(I.value,x,C),l.push("/u_"+p);else if(I.kind==="source"||U){var K=Bn(p,C,"source");this.binders[p]=U?new Bt(I,C,L,t,K,e.id):new Vt(I,x,C,K),l.push("/a_"+p)}else{var W=Bn(p,C,"composite");this.binders[p]=new zt(I,x,C,L,t,W),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};At.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Vt||t instanceof zt?t.maxValue:0},At.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var x=this.binders[d];(x instanceof Vt||x instanceof zt||x instanceof Bt)&&x.populatePaintArray(e,t,i,l,p)}},At.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Wt&&l.setConstantPatternPositions(e,t)}},At.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var x in e)for(var I=0,C=t.getPositions(x);I<C.length;I+=1){var L=C[I],O=i.feature(L.index);for(var U in this.binders){var K=this.binders[U];if((K instanceof Vt||K instanceof zt||K instanceof Bt)&&K.expression.isStateDependent===!0){var W=l.paint.get(U);K.expression=W.value,K.updatePaintArray(L.start,L.end,O,e[x],p),d=!0}}}return d},At.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Mt||i instanceof Wt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},At.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Vt||i instanceof zt)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Bt)for(var p=0;p<le.members.length;p++)e.push(le.members[p].name)}return e},At.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Mt||i instanceof Wt||i instanceof zt)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},At.prototype.getPaintVertexBuffers=function(){return this._buffers},At.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof Mt||p instanceof Wt||p instanceof zt)for(var d=0,x=p.uniformNames;d<x.length;d+=1){var I=x[d];if(t[I]){var C=p.getBinding(e,t[I],I);i.push({name:I,property:l,binding:C})}}}return i},At.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var x=d[p],I=x.name,C=x.property;this.binders[C].setUniform(x.binding,l,i.get(C),I)}},At.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Bt){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof Vt||i instanceof zt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},At.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Vt||i instanceof zt||i instanceof Bt)&&i.upload(e)}this.updatePaintBuffers()},At.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Vt||t instanceof zt||t instanceof Bt)&&t.destroy()}};var Dt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new At(d,t,i)}this.needsUpload=!1,this._featureMap=new _e,this._bufferOffset=0};function Li(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Bn(e,t,i){var l={color:{source:Sl,composite:xs},number:{source:bs,composite:Sl}},p=function(d){return{"line-pattern":{source:Rn,composite:Rn},"fill-pattern":{source:Rn,composite:Rn},"fill-extrusion-pattern":{source:Rn,composite:Rn}}[d]}(e);return p&&p[i]||l[t][i]}Dt.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Dt.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var x=d[p];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,t,x,l)||this.needsUpload}},Dt.prototype.get=function(e){return this.programConfigurations[e]},Dt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Dt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},at("ConstantBinder",Mt),at("CrossFadedConstantBinder",Wt),at("SourceExpressionBinder",Vt),at("CrossFadedCompositeBinder",Bt),at("CompositeExpressionBinder",zt),at("ProgramConfiguration",At,{omit:["_buffers"]}),at("ProgramConfigurationSet",Dt);var qa=Math.pow(2,14)-1,wn=-qa-1;function gi(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var x=p[d],I=Math.round(x.x*t),C=Math.round(x.y*t);x.x=Ee(I,wn,qa),x.y=Ee(C,wn,qa),(I<x.x||I>x.x+1||C<x.y||C>x.y+1)&&Nt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function En(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?gi(e):[]}}function Da(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var Ma=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new sl,this.indexArray=new uo,this.segments=new J,this.programConfigurations=new Dt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Wl(e,t){for(var i=0;i<e.length;i++)if(Yl(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(Yl(e,t[l]))return!0;return!!Po(e,t)}function co(e,t,i){return!!Yl(e,t)||!!Co(t,e,i)}function Ja(e,t){if(e.length===1)return Tl(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(Yl(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(Tl(t,e[d]))return!0;for(var x=0;x<t.length;x++)if(Po(e,t[x]))return!0;return!1}function ws(e,t,i){if(e.length>1){if(Po(e,t))return!0;for(var l=0;l<t.length;l++)if(Co(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Co(e[p],t,i))return!0;return!1}function Po(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(ho(l,p,t[d],t[d+1]))return!0;return!1}function ho(e,t,i,l){return dr(e,i,l)!==dr(t,i,l)&&dr(e,t,i)!==dr(e,t,l)}function Co(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Xu(e,t[p-1],t[p])<l)return!0;return!1}function Xu(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function Tl(e,t){for(var i,l,p,d=!1,x=0;x<e.length;x++)for(var I=0,C=(i=e[x]).length-1;I<i.length;C=I++)(l=i[I]).y>t.y!=(p=i[C]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function Yl(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],x=e[p];d.y>t.y!=x.y>t.y&&t.x<(x.x-d.x)*(t.y-d.y)/(x.y-d.y)+d.x&&(i=!i)}return i}function _c(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=dr(e,t,i[0]);return d!==dr(e,t,i[1])||d!==dr(e,t,i[2])||d!==dr(e,t,i[3])}function Do(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function pn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Al(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=V.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var x=[],I=0;I<e.length;I++)x.push(e[I].sub(d));return x}Ma.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var x=0,I=e;x<I.length;x+=1){var C=I[x],L=C.feature,O=C.id,U=C.index,K=C.sourceLayerIndex,W=this.layers[0]._featureFilter.needGeometry,ae=En(L,W);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),ae,i)){var ue=d?d.evaluate(ae,{},i):void 0,ge={id:O,properties:L.properties,type:L.type,sourceLayerIndex:K,index:U,geometry:W?ae.geometry:gi(L),patterns:{},sortKey:ue};p.push(ge)}}d&&p.sort(function(Qe,St){return Qe.sortKey-St.sortKey});for(var de=0,Se=p;de<Se.length;de+=1){var Pe=Se[de],Me=Pe.geometry,Oe=Pe.index,je=Pe.sourceLayerIndex,Xe=e[Oe].feature;this.addFeature(Pe,Me,Oe,i),t.featureIndex.insert(Xe,Me,Oe,je,this.index)}},Ma.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ma.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ma.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ma.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Y),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ma.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var x=0,I=d[p];x<I.length;x+=1){var C=I[x],L=C.x,O=C.y;if(!(L<0||L>=8192||O<0||O>=8192)){var U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),K=U.vertexLength;Da(this.layoutVertexArray,L,O,-1,-1),Da(this.layoutVertexArray,L,O,1,-1),Da(this.layoutVertexArray,L,O,1,1),Da(this.layoutVertexArray,L,O,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+3,K+2),U.vertexLength+=4,U.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},at("CircleBucket",Ma,{omit:["layers"]});var Es=new Ki({"circle-sort-key":new dt(H.layout_circle["circle-sort-key"])}),zl={paint:new Ki({"circle-radius":new dt(H.paint_circle["circle-radius"]),"circle-color":new dt(H.paint_circle["circle-color"]),"circle-blur":new dt(H.paint_circle["circle-blur"]),"circle-opacity":new dt(H.paint_circle["circle-opacity"]),"circle-translate":new xt(H.paint_circle["circle-translate"]),"circle-translate-anchor":new xt(H.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new xt(H.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new xt(H.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new dt(H.paint_circle["circle-stroke-width"]),"circle-stroke-color":new dt(H.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new dt(H.paint_circle["circle-stroke-opacity"])}),layout:Es},Or=typeof Float32Array<"u"?Float32Array:Array;function Yo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oa(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3],I=t[4],C=t[5],L=t[6],O=t[7],U=t[8],K=t[9],W=t[10],ae=t[11],ue=t[12],ge=t[13],de=t[14],Se=t[15],Pe=i[0],Me=i[1],Oe=i[2],je=i[3];return e[0]=Pe*l+Me*I+Oe*U+je*ue,e[1]=Pe*p+Me*C+Oe*K+je*ge,e[2]=Pe*d+Me*L+Oe*W+je*de,e[3]=Pe*x+Me*O+Oe*ae+je*Se,e[4]=(Pe=i[4])*l+(Me=i[5])*I+(Oe=i[6])*U+(je=i[7])*ue,e[5]=Pe*p+Me*C+Oe*K+je*ge,e[6]=Pe*d+Me*L+Oe*W+je*de,e[7]=Pe*x+Me*O+Oe*ae+je*Se,e[8]=(Pe=i[8])*l+(Me=i[9])*I+(Oe=i[10])*U+(je=i[11])*ue,e[9]=Pe*p+Me*C+Oe*K+je*ge,e[10]=Pe*d+Me*L+Oe*W+je*de,e[11]=Pe*x+Me*O+Oe*ae+je*Se,e[12]=(Pe=i[12])*l+(Me=i[13])*I+(Oe=i[14])*U+(je=i[15])*ue,e[13]=Pe*p+Me*C+Oe*K+je*ge,e[14]=Pe*d+Me*L+Oe*W+je*de,e[15]=Pe*x+Me*O+Oe*ae+je*Se,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var wu,Gp=oa;function Rh(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*x,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*x,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*x,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*x,e}wu=new Or(3),Or!=Float32Array&&(wu[0]=0,wu[1]=0,wu[2]=0),function(){var e=new Or(4);Or!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var cp=(function(){var e=new Or(2);Or!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,zl)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Ma(i)},t.prototype.queryRadius=function(i){var l=i;return Do("circle-radius",this,l)+Do("circle-stroke-width",this,l)+pn(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C,L){for(var O=Al(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),U=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),K=this.paint.get("circle-pitch-alignment")==="map",W=K?O:function(Xe,Qe){return Xe.map(function(St){return Fs(St,Qe)})}(O,L),ae=K?U*C:U,ue=0,ge=d;ue<ge.length;ue+=1)for(var de=0,Se=ge[ue];de<Se.length;de+=1){var Pe=Se[de],Me=K?Pe:Fs(Pe,L),Oe=ae,je=Rh([],[Pe.x,Pe.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Oe*=je[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Oe*=I.cameraToCenterDistance/je[3]),co(W,Me,Oe))return!0}return!1},t}(Wo));function Fs(e,t){var i=Rh([],[e.x,e.y,0,1],t);return new V(i[0]/i[3],i[1]/i[3])}var Wu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ma);function Mo(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function Eu(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=Mo({},{width:l,height:p},i);Kp(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function Kp(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=e.data,I=t.data,C=0;C<p.height;C++)for(var L=((i.y+C)*e.width+i.x)*d,O=((l.y+C)*t.width+l.x)*d,U=0;U<p.width*d;U++)I[O+U]=x[L+U];return t}at("HeatmapBucket",Wu,{omit:["layers"]});var bc=function(e,t){Mo(this,e,1,t)};bc.prototype.resize=function(e){Eu(this,e,1)},bc.prototype.clone=function(){return new bc({width:this.width,height:this.height},new Uint8Array(this.data))},bc.copy=function(e,t,i,l,p){Kp(e,t,i,l,p,1)};var ya=function(e,t){Mo(this,e,4,t)};ya.prototype.resize=function(e){Eu(this,e,4)},ya.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},ya.prototype.clone=function(){return new ya({width:this.width,height:this.height},new Uint8Array(this.data))},ya.copy=function(e,t,i,l,p){Kp(e,t,i,l,p,4)},at("AlphaImage",bc),at("RGBAImage",ya);var Su={paint:new Ki({"heatmap-radius":new dt(H.paint_heatmap["heatmap-radius"]),"heatmap-weight":new dt(H.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new xt(H.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hn(H.paint_heatmap["heatmap-color"]),"heatmap-opacity":new xt(H.paint_heatmap["heatmap-opacity"])})};function Xf(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new ya({width:i,height:l}),d=function(ae,ue,ge){t[e.evaluationKey]=ge;var de=e.expression.evaluate(t);p.data[ae+ue+0]=Math.floor(255*de.r/de.a),p.data[ae+ue+1]=Math.floor(255*de.g/de.a),p.data[ae+ue+2]=Math.floor(255*de.b/de.a),p.data[ae+ue+3]=Math.floor(255*de.a)};if(e.clips)for(var x=0,I=0;x<l;++x,I+=4*i)for(var C=0,L=0;C<i;C++,L+=4){var O=C/(i-1),U=e.clips[x];d(I,L,U.start*(1-O)+U.end*O)}else for(var K=0,W=0;K<i;K++,W+=4)d(0,W,K/(i-1));return p}var Hp=function(e){function t(i){e.call(this,i,Su),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Wu(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Xf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(Wo),Wf={paint:new Ki({"hillshade-illumination-direction":new xt(H.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new xt(H.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new xt(H.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new xt(H.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new xt(H.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new xt(H.paint_hillshade["hillshade-accent-color"])})},dm=function(e){function t(i){e.call(this,i,Wf)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(Wo),hp=Hi([{name:"a_pos",components:2,type:"Int16"}],4).members,Xp=Ss,mm=Ss;function Ss(e,t,i){i=i||2;var l,p,d,x,I,C,L,O=t&&t.length,U=O?t[0]*i:e.length,K=ku(e,0,U,i,!0),W=[];if(!K||K.next===K.prev)return W;if(O&&(K=function(ue,ge,de,Se){var Pe,Me,Oe,je=[];for(Pe=0,Me=ge.length;Pe<Me;Pe++)(Oe=ku(ue,ge[Pe]*Se,Pe<Me-1?ge[Pe+1]*Se:ue.length,Se,!1))===Oe.next&&(Oe.steiner=!0),je.push(Wp(Oe));for(je.sort(Oh),Pe=0;Pe<je.length;Pe++)Vh(je[Pe],de),de=po(de,de.next);return de}(e,t,K,i)),e.length>80*i){l=d=e[0],p=x=e[1];for(var ae=i;ae<U;ae+=i)(I=e[ae])<l&&(l=I),(C=e[ae+1])<p&&(p=C),I>d&&(d=I),C>x&&(x=C);L=(L=Math.max(d-l,x-p))!==0?1/L:0}return Pl(K,W,i,l,p,L),W}function ku(e,t,i,l,p){var d,x;if(p===Ec(e,t,i,l)>0)for(d=t;d<i;d+=l)x=py(d,e[d],e[d+1],x);else for(d=i-l;d>=t;d-=l)x=py(d,e[d],e[d+1],x);return x&&pp(x,x.next)&&(Nh(x),x=x.next),x}function po(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!pp(l,l.next)&&Xi(l.prev,l,l.next)!==0)l=l.next;else{if(Nh(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function Pl(e,t,i,l,p,d,x){if(e){!x&&d&&function(O,U,K,W){var ae=O;do ae.z===null&&(ae.z=xc(ae.x,ae.y,U,K,W)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==O);ae.prevZ.nextZ=null,ae.prevZ=null,function(ue){var ge,de,Se,Pe,Me,Oe,je,Xe,Qe=1;do{for(de=ue,ue=null,Me=null,Oe=0;de;){for(Oe++,Se=de,je=0,ge=0;ge<Qe&&(je++,Se=Se.nextZ);ge++);for(Xe=Qe;je>0||Xe>0&&Se;)je!==0&&(Xe===0||!Se||de.z<=Se.z)?(Pe=de,de=de.nextZ,je--):(Pe=Se,Se=Se.nextZ,Xe--),Me?Me.nextZ=Pe:ue=Pe,Pe.prevZ=Me,Me=Pe;de=Se}Me.nextZ=null,Qe*=2}while(Oe>1)}(ae)}(e,l,p,d);for(var I,C,L=e;e.prev!==e.next;)if(I=e.prev,C=e.next,d?Bh(e,l,p,d):ym(e))t.push(I.i/i),t.push(e.i/i),t.push(C.i/i),Nh(e),e=C.next,L=C.next;else if((e=C)===L){x?x===1?Pl(e=nv(po(e),t,i),t,i,l,p,d,2):x===2&&vm(e,t,i,l,p,d):Pl(po(e),t,i,l,p,d,1);break}}}function ym(e){var t=e.prev,i=e,l=e.next;if(Xi(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(Jc(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&Xi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Bh(e,t,i,l){var p=e.prev,d=e,x=e.next;if(Xi(p,d,x)>=0)return!1;for(var I=p.x>d.x?p.x>x.x?p.x:x.x:d.x>x.x?d.x:x.x,C=p.y>d.y?p.y>x.y?p.y:x.y:d.y>x.y?d.y:x.y,L=xc(p.x<d.x?p.x<x.x?p.x:x.x:d.x<x.x?d.x:x.x,p.y<d.y?p.y<x.y?p.y:x.y:d.y<x.y?d.y:x.y,t,i,l),O=xc(I,C,t,i,l),U=e.prevZ,K=e.nextZ;U&&U.z>=L&&K&&K.z<=O;){if(U!==e.prev&&U!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,U.x,U.y)&&Xi(U.prev,U,U.next)>=0||(U=U.prevZ,K!==e.prev&&K!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,K.x,K.y)&&Xi(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;U&&U.z>=L;){if(U!==e.prev&&U!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,U.x,U.y)&&Xi(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;K&&K.z<=O;){if(K!==e.prev&&K!==e.next&&Jc(p.x,p.y,d.x,d.y,x.x,x.y,K.x,K.y)&&Xi(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function nv(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!pp(p,d)&&Iu(p,l,l.next,d)&&Fh(p,d)&&Fh(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),Nh(l),Nh(l.next),l=e=d),l=l.next}while(l!==e);return po(l)}function vm(e,t,i,l,p,d){var x=e;do{for(var I=x.next.next;I!==x.prev;){if(x.i!==I.i&&_m(x,I)){var C=Qc(x,I);return x=po(x,x.next),C=po(C,C.next),Pl(x,t,i,l,p,d),void Pl(C,t,i,l,p,d)}I=I.next}x=x.next}while(x!==e)}function Oh(e,t){return e.x-t.x}function Vh(e,t){if(t=function(l,p){var d,x=p,I=l.x,C=l.y,L=-1/0;do{if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){var O=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(O<=I&&O>L){if(L=O,O===I){if(C===x.y)return x;if(C===x.next.y)return x.next}d=x.x<x.next.x?x:x.next}}x=x.next}while(x!==p);if(!d)return null;if(I===L)return d;var U,K=d,W=d.x,ae=d.y,ue=1/0;x=d;do I>=x.x&&x.x>=W&&I!==x.x&&Jc(C<ae?I:L,C,W,ae,C<ae?L:I,C,x.x,x.y)&&(U=Math.abs(C-x.y)/(I-x.x),Fh(x,l)&&(U<ue||U===ue&&(x.x>d.x||x.x===d.x&&gm(d,x)))&&(d=x,ue=U)),x=x.next;while(x!==K);return d}(e,t)){var i=Qc(t,e);po(t,t.next),po(i,i.next)}}function gm(e,t){return Xi(e.prev,e,t.prev)<0&&Xi(t.next,e,e.next)<0}function xc(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Wp(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Jc(e,t,i,l,p,d,x,I){return(p-x)*(t-I)-(e-x)*(d-I)>=0&&(e-x)*(l-I)-(i-x)*(t-I)>=0&&(i-x)*(d-I)-(p-x)*(l-I)>=0}function _m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&Iu(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(Fh(e,t)&&Fh(t,e)&&function(i,l){var p=i,d=!1,x=(i.x+l.x)/2,I=(i.y+l.y)/2;do p.y>I!=p.next.y>I&&p.next.y!==p.y&&x<(p.next.x-p.x)*(I-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(Xi(e.prev,e,t.prev)||Xi(e,t.prev,t))||pp(e,t)&&Xi(e.prev,e,e.next)>0&&Xi(t.prev,t,t.next)>0)}function Xi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function pp(e,t){return e.x===t.x&&e.y===t.y}function Iu(e,t,i,l){var p=Jl(Xi(e,t,i)),d=Jl(Xi(e,t,l)),x=Jl(Xi(i,l,e)),I=Jl(Xi(i,l,t));return p!==d&&x!==I||!(p!==0||!Ns(e,i,t))||!(d!==0||!Ns(e,l,t))||!(x!==0||!Ns(i,e,l))||!(I!==0||!Ns(i,t,l))}function Ns(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Jl(e){return e>0?1:e<0?-1:0}function Fh(e,t){return Xi(e.prev,e,e.next)<0?Xi(e,t,e.next)>=0&&Xi(e,e.prev,t)>=0:Xi(e,t,e.prev)<0||Xi(e,e.next,t)<0}function Qc(e,t){var i=new wc(e.i,e.x,e.y),l=new wc(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function py(e,t,i,l){var p=new wc(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function Nh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function wc(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ec(e,t,i,l){for(var p=0,d=t,x=i-l;d<i;d+=l)p+=(e[x]-e[d])*(e[d+1]+e[x+1]),x=d;return p}function bm(e,t,i,l,p){(function d(x,I,C,L,O){for(;L>C;){if(L-C>600){var U=L-C+1,K=I-C+1,W=Math.log(U),ae=.5*Math.exp(2*W/3),ue=.5*Math.sqrt(W*ae*(U-ae)/U)*(K-U/2<0?-1:1);d(x,I,Math.max(C,Math.floor(I-K*ae/U+ue)),Math.min(L,Math.floor(I+(U-K)*ae/U+ue)),O)}var ge=x[I],de=C,Se=L;for(Tu(x,C,I),O(x[L],ge)>0&&Tu(x,C,L);de<Se;){for(Tu(x,de,Se),de++,Se--;O(x[de],ge)<0;)de++;for(;O(x[Se],ge)>0;)Se--}O(x[C],ge)===0?Tu(x,C,Se):Tu(x,++Se,L),Se<=I&&(C=Se+1),I<=Se&&(L=Se-1)}})(e,t,i||0,l||e.length-1,p||Yp)}function Tu(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function Yp(e,t){return e<t?-1:e>t?1:0}function Jp(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],x=0;x<i;x++){var I=it(e[x]);I!==0&&(e[x].area=Math.abs(I),p===void 0&&(p=I<0),p===I<0?(l&&d.push(l),l=[e[x]]):l.push(e[x]))}if(l&&d.push(l),t>1)for(var C=0;C<d.length;C++)d[C].length<=t||(bm(d[C],t,1,d[C].length-1,xm),d[C]=d[C].slice(0,t));return d}function xm(e,t){return t.area-e.area}function Yu(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,x=t;d<x.length;d+=1){var I=x[d].paint.get(e+"-pattern");I.isConstant()||(p=!0);var C=I.constantOr(null);C&&(p=!0,l[C.to]=!0,l[C.from]=!0)}return p}function Qp(e,t,i,l,p){for(var d=p.patternDependencies,x=0,I=t;x<I.length;x+=1){var C=I[x],L=C.paint.get(e+"-pattern").value;if(L.kind!=="constant"){var O=L.evaluate({zoom:l-1},i,{},p.availableImages),U=L.evaluate({zoom:l},i,{},p.availableImages),K=L.evaluate({zoom:l+1},i,{},p.availableImages);U=U&&U.name?U.name:U,K=K&&K.name?K.name:K,d[O=O&&O.name?O.name:O]=!0,d[U]=!0,d[K]=!0,i.patterns[C.id]={min:O,mid:U,max:K}}}return i}Ss.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(Ec(e,0,p?t[0]*i:e.length,i));if(p)for(var x=0,I=t.length;x<I;x++)d-=Math.abs(Ec(e,t[x]*i,x<I-1?t[x+1]*i:e.length,i));var C=0;for(x=0;x<l.length;x+=3){var L=l[x]*i,O=l[x+1]*i,U=l[x+2]*i;C+=Math.abs((e[L]-e[U])*(e[O+1]-e[L+1])-(e[L]-e[O])*(e[U+1]-e[L+1]))}return d===0&&C===0?0:Math.abs((C-d)/d)},Ss.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var x=0;x<t;x++)i.vertices.push(e[p][d][x]);p>0&&i.holes.push(l+=e[p-1].length)}return i},Xp.default=mm;var Us=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new sl,this.indexArray=new uo,this.indexArray2=new Xl,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new J,this.segments2=new J,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Us.prototype.populate=function(e,t,i){this.hasPattern=Yu("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var I=x[d],C=I.feature,L=I.id,O=I.index,U=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=En(C,K);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),W,i)){var ae=l?l.evaluate(W,{},i,t.availableImages):void 0,ue={id:L,properties:C.properties,type:C.type,sourceLayerIndex:U,index:O,geometry:K?W.geometry:gi(C),patterns:{},sortKey:ae};p.push(ue)}}l&&p.sort(function(Xe,Qe){return Xe.sortKey-Qe.sortKey});for(var ge=0,de=p;ge<de.length;ge+=1){var Se=de[ge],Pe=Se.geometry,Me=Se.index,Oe=Se.sourceLayerIndex;if(this.hasPattern){var je=Qp("fill",this.layers,Se,this.zoom,t);this.patternFeatures.push(je)}else this.addFeature(Se,Pe,Me,i,{});t.featureIndex.insert(e[Me].feature,Pe,Me,Oe,this.index)}},Us.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Us.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Us.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Us.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Us.prototype.addFeature=function(e,t,i,l,p){for(var d=0,x=Jp(t,500);d<x.length;d+=1){for(var I=x[d],C=0,L=0,O=I;L<O.length;L+=1)C+=O[L].length;for(var U=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),K=U.vertexLength,W=[],ae=[],ue=0,ge=I;ue<ge.length;ue+=1){var de=ge[ue];if(de.length!==0){de!==I[0]&&ae.push(W.length/2);var Se=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Pe=Se.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Pe+de.length-1,Pe),W.push(de[0].x),W.push(de[0].y);for(var Me=1;Me<de.length;Me++)this.layoutVertexArray.emplaceBack(de[Me].x,de[Me].y),this.indexArray2.emplaceBack(Pe+Me-1,Pe+Me),W.push(de[Me].x),W.push(de[Me].y);Se.vertexLength+=de.length,Se.primitiveLength+=de.length}}for(var Oe=Xp(W,ae),je=0;je<Oe.length;je+=3)this.indexArray.emplaceBack(K+Oe[je],K+Oe[je+1],K+Oe[je+2]);U.vertexLength+=C,U.primitiveLength+=Oe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},at("FillBucket",Us,{omit:["layers","patternFeatures"]});var fy=new Ki({"fill-sort-key":new dt(H.layout_fill["fill-sort-key"])}),Yf={paint:new Ki({"fill-antialias":new xt(H.paint_fill["fill-antialias"]),"fill-opacity":new dt(H.paint_fill["fill-opacity"]),"fill-color":new dt(H.paint_fill["fill-color"]),"fill-outline-color":new dt(H.paint_fill["fill-outline-color"]),"fill-translate":new xt(H.paint_fill["fill-translate"]),"fill-translate-anchor":new xt(H.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qr(H.paint_fill["fill-pattern"])}),layout:fy},Sc=function(e){function t(i){e.call(this,i,Yf)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Us(i)},t.prototype.queryRadius=function(){return pn(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C){return Ja(Al(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),d)},t.prototype.isTileClipped=function(){return!0},t}(Wo),Uh=Hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ql=Au;function Au(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(wm,this,t)}function wm(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var x=p._keys[l.readVarint()],I=p._values[l.readVarint()];p.properties[x]=I}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function Em(e){for(var t,i,l=0,p=0,d=e.length,x=d-1;p<d;x=p++)l+=((i=e[x]).x-(t=e[p]).x)*(t.y+i.y);return l}Au.types=["Unknown","Point","LineString","Polygon"],Au.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,x=0,I=[];e.pos<i;){if(p<=0){var C=e.readVarint();l=7&C,p=C>>3}if(p--,l===1||l===2)d+=e.readSVarint(),x+=e.readSVarint(),l===1&&(t&&I.push(t),t=[]),t.push(new V(d,x));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&I.push(t),I},Au.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,x=1/0,I=-1/0,C=1/0,L=-1/0;e.pos<t;){if(l<=0){var O=e.readVarint();i=7&O,l=O>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<x&&(x=p),p>I&&(I=p),(d+=e.readSVarint())<C&&(C=d),d>L&&(L=d);else if(i!==7)throw new Error("unknown command "+i)}return[x,C,I,L]},Au.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),x=this.extent*e,I=this.extent*t,C=this.loadGeometry(),L=Au.types[this.type];function O(W){for(var ae=0;ae<W.length;ae++){var ue=W[ae];W[ae]=[360*(ue.x+x)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+I)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(l=0;l<C.length;l++)U[l]=C[l][0];O(C=U);break;case 2:for(l=0;l<C.length;l++)O(C[l]);break;case 3:for(C=function(W){var ae=W.length;if(ae<=1)return[W];for(var ue,ge,de=[],Se=0;Se<ae;Se++){var Pe=Em(W[Se]);Pe!==0&&(ge===void 0&&(ge=Pe<0),ge===Pe<0?(ue&&de.push(ue),ue=[W[Se]]):ue.push(W[Se]))}return ue&&de.push(ue),de}(C),l=0;l<C.length;l++)for(p=0;p<C[l].length;p++)O(C[l][p])}C.length===1?C=C[0]:L="Multi"+L;var K={type:"Feature",geometry:{type:L,coordinates:C},properties:this.properties};return"id"in this&&(K.id=this.id),K};var kc=$l;function $l(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Sm,this,t),this.length=this._features.length}function Sm(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var x=l.readVarint()>>3;p=x===1?l.readString():x===2?l.readFloat():x===3?l.readDouble():x===4?l.readVarint64():x===5?l.readVarint():x===6?l.readSVarint():x===7?l.readBoolean():null}return p}(i))}function $p(e,t,i){if(e===3){var l=new kc(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}$l.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Ql(this._pbf,t,this.extent,this._keys,this._values)};var Ic={VectorTile:function(e,t){this.layers=e.readFields($p,{},t)},VectorTileFeature:Ql,VectorTileLayer:kc},km=Ic.VectorTileFeature.types,$c=Math.pow(2,13);function qh(e,t,i,l,p,d,x,I){e.emplaceBack(t,i,2*Math.floor(l*$c)+x,p*$c*2,d*$c*2,Math.round(I))}var Cl=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new zo,this.indexArray=new uo,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new J,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Dl(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Cl.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=Yu("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],x=d.feature,I=d.id,C=d.index,L=d.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,U=En(x,O);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),U,i)){var K={id:I,sourceLayerIndex:L,index:C,geometry:O?U.geometry:gi(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(Qp("fill-extrusion",this.layers,K,this.zoom,t)):this.addFeature(K,K.geometry,C,i,{}),t.featureIndex.insert(x,K.geometry,C,L,this.index,!0)}}},Cl.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Cl.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Cl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Cl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cl.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Uh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Cl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Cl.prototype.addFeature=function(e,t,i,l,p){for(var d=0,x=Jp(t,500);d<x.length;d+=1){for(var I=x[d],C=0,L=0,O=I;L<O.length;L+=1)C+=O[L].length;for(var U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),K=0,W=I;K<W.length;K+=1){var ae=W[K];if(ae.length!==0&&!((cr=ae).every(function(Gt){return Gt.x<0})||cr.every(function(Gt){return Gt.x>8192})||cr.every(function(Gt){return Gt.y<0})||cr.every(function(Gt){return Gt.y>8192})))for(var ue=0,ge=0;ge<ae.length;ge++){var de=ae[ge];if(ge>=1){var Se=ae[ge-1];if(!Dl(de,Se)){U.vertexLength+4>J.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Pe=de.sub(Se)._perp()._unit(),Me=Se.dist(de);ue+Me>32768&&(ue=0),qh(this.layoutVertexArray,de.x,de.y,Pe.x,Pe.y,0,0,ue),qh(this.layoutVertexArray,de.x,de.y,Pe.x,Pe.y,0,1,ue),qh(this.layoutVertexArray,Se.x,Se.y,Pe.x,Pe.y,0,0,ue+=Me),qh(this.layoutVertexArray,Se.x,Se.y,Pe.x,Pe.y,0,1,ue);var Oe=U.vertexLength;this.indexArray.emplaceBack(Oe,Oe+2,Oe+1),this.indexArray.emplaceBack(Oe+1,Oe+2,Oe+3),U.vertexLength+=4,U.primitiveLength+=2}}}}if(U.vertexLength+C>J.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),km[e.type]==="Polygon"){for(var je=[],Xe=[],Qe=U.vertexLength,St=0,lt=I;St<lt.length;St+=1){var _t=lt[St];if(_t.length!==0){_t!==I[0]&&Xe.push(je.length/2);for(var st=0;st<_t.length;st++){var Zt=_t[st];qh(this.layoutVertexArray,Zt.x,Zt.y,0,0,1,1,0),je.push(Zt.x),je.push(Zt.y)}}}for(var Lt=Xp(je,Xe),yt=0;yt<Lt.length;yt+=3)this.indexArray.emplaceBack(Qe+Lt[yt],Qe+Lt[yt+2],Qe+Lt[yt+1]);U.primitiveLength+=Lt.length/3,U.vertexLength+=C}}var cr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},at("FillExtrusionBucket",Cl,{omit:["layers","features"]});var Ju={paint:new Ki({"fill-extrusion-opacity":new xt(H["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new dt(H["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new xt(H["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new xt(H["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qr(H["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new dt(H["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new dt(H["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new xt(H["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},eu=function(e){function t(i){e.call(this,i,Ju)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Cl(i)},t.prototype.queryRadius=function(){return pn(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C,L){var O=Al(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),U=this.paint.get("fill-extrusion-height").evaluate(l,p),K=this.paint.get("fill-extrusion-base").evaluate(l,p),W=function(ue,ge,de,Se){for(var Pe=[],Me=0,Oe=ue;Me<Oe.length;Me+=1){var je=Oe[Me],Xe=[je.x,je.y,0,1];Rh(Xe,Xe,ge),Pe.push(new V(Xe[0]/Xe[3],Xe[1]/Xe[3]))}return Pe}(O,L),ae=function(ue,ge,de,Se){for(var Pe=[],Me=[],Oe=Se[8]*ge,je=Se[9]*ge,Xe=Se[10]*ge,Qe=Se[11]*ge,St=Se[8]*de,lt=Se[9]*de,_t=Se[10]*de,st=Se[11]*de,Zt=0,Lt=ue;Zt<Lt.length;Zt+=1){for(var yt=[],cr=[],Gt=0,ar=Lt[Zt];Gt<ar.length;Gt+=1){var Pt=ar[Gt],Tr=Pt.x,Ti=Pt.y,fn=Se[0]*Tr+Se[4]*Ti+Se[12],Ai=Se[1]*Tr+Se[5]*Ti+Se[13],Ri=Se[2]*Tr+Se[6]*Ti+Se[14],dn=Se[3]*Tr+Se[7]*Ti+Se[15],jr=Ri+Xe,Bi=dn+Qe,nn=fn+St,an=Ai+lt,Qa=Ri+_t,Oi=dn+st,ja=new V((fn+Oe)/Bi,(Ai+je)/Bi);ja.z=jr/Bi,yt.push(ja);var fr=new V(nn/Oi,an/Oi);fr.z=Qa/Oi,cr.push(fr)}Pe.push(yt),Me.push(cr)}return[Pe,Me]}(d,K,U,L);return function(ue,ge,de){var Se=1/0;Ja(de,ge)&&(Se=Jf(de,ge[0]));for(var Pe=0;Pe<ge.length;Pe++)for(var Me=ge[Pe],Oe=ue[Pe],je=0;je<Me.length-1;je++){var Xe=Me[je],Qe=[Xe,Me[je+1],Oe[je+1],Oe[je],Xe];Wl(de,Qe)&&(Se=Math.min(Se,Jf(de,Qe)))}return Se!==1/0&&Se}(ae[0],ae[1],W)},t}(Wo);function cl(e,t){return e.x*t.x+e.y*t.y}function Jf(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],x=e[0],I=i.sub(p),C=d.sub(p),L=x.sub(p),O=cl(I,I),U=cl(I,C),K=cl(C,C),W=cl(L,I),ae=cl(L,C),ue=O*K-U*U,ge=(K*W-U*ae)/ue,de=(O*ae-U*W)/ue,Se=p.z*(1-ge-de)+i.z*ge+d.z*de;if(isFinite(Se))return Se}return 1/0}for(var Pe=1/0,Me=0,Oe=t;Me<Oe.length;Me+=1)Pe=Math.min(Pe,Oe[Me].z);return Pe}var jh=Hi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,av=Hi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Im=Ic.VectorTileFeature.types,Zh=Math.cos(Math.PI/180*37.5),eh=Math.pow(2,14)/.5,fo=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new Na,this.layoutVertexArray2=new Sl,this.indexArray=new uo,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new J,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};fo.prototype.populate=function(e,t,i){this.hasPattern=Yu("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,x=e;d<x.length;d+=1){var I=x[d],C=I.feature,L=I.id,O=I.index,U=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=En(C,K);if(this.layers[0]._featureFilter.filter(new tr(this.zoom),W,i)){var ae=l?l.evaluate(W,{},i):void 0,ue={id:L,properties:C.properties,type:C.type,sourceLayerIndex:U,index:O,geometry:K?W.geometry:gi(C),patterns:{},sortKey:ae};p.push(ue)}}l&&p.sort(function(Xe,Qe){return Xe.sortKey-Qe.sortKey});for(var ge=0,de=p;ge<de.length;ge+=1){var Se=de[ge],Pe=Se.geometry,Me=Se.index,Oe=Se.sourceLayerIndex;if(this.hasPattern){var je=Qp("line",this.layers,Se,this.zoom,t);this.patternFeatures.push(je)}else this.addFeature(Se,Pe,Me,i,{});t.featureIndex.insert(e[Me].feature,Pe,Me,Oe,this.index)}},fo.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},fo.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},fo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},fo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fo.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,av)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,jh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},fo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},fo.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},fo.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,x=d.get("line-join").evaluate(e,{}),I=d.get("line-cap"),C=d.get("line-miter-limit"),L=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var O=0,U=t;O<U.length;O+=1)this.addLine(U[O],e,x,I,C,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},fo.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<e.length-1;x++)this.totalDistance+=e[x].dist(e[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var I=Im[t.type]==="Polygon",C=e.length;C>=2&&e[C-1].equals(e[C-2]);)C--;for(var L=0;L<C-1&&e[L].equals(e[L+1]);)L++;if(!(C<(I?3:2))){i==="bevel"&&(p=1.05);var O,U=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),W=void 0,ae=void 0,ue=void 0,ge=void 0;this.e1=this.e2=-1,I&&(ge=e[L].sub(O=e[C-2])._unit()._perp());for(var de=L;de<C;de++)if(!(ae=de===C-1?I?e[L+1]:void 0:e[de+1])||!e[de].equals(ae)){ge&&(ue=ge),O&&(W=O),O=e[de],ge=ae?ae.sub(O)._unit()._perp():ue;var Se=(ue=ue||ge).add(ge);Se.x===0&&Se.y===0||Se._unit();var Pe=ue.x*ge.x+ue.y*ge.y,Me=Se.x*ge.x+Se.y*ge.y,Oe=Me!==0?1/Me:1/0,je=2*Math.sqrt(2-2*Me),Xe=Me<Zh&&W&&ae,Qe=ue.x*ge.y-ue.y*ge.x>0;if(Xe&&de>L){var St=O.dist(W);if(St>2*U){var lt=O.sub(O.sub(W)._mult(U/St)._round());this.updateDistance(W,lt),this.addCurrentVertex(lt,ue,0,0,K),W=lt}}var _t=W&&ae,st=_t?i:I?"butt":l;if(_t&&st==="round"&&(Oe<d?st="miter":Oe<=2&&(st="fakeround")),st==="miter"&&Oe>p&&(st="bevel"),st==="bevel"&&(Oe>2&&(st="flipbevel"),Oe<p&&(st="miter")),W&&this.updateDistance(W,O),st==="miter")Se._mult(Oe),this.addCurrentVertex(O,Se,0,0,K);else if(st==="flipbevel"){if(Oe>100)Se=ge.mult(-1);else{var Zt=Oe*ue.add(ge).mag()/ue.sub(ge).mag();Se._perp()._mult(Zt*(Qe?-1:1))}this.addCurrentVertex(O,Se,0,0,K),this.addCurrentVertex(O,Se.mult(-1),0,0,K)}else if(st==="bevel"||st==="fakeround"){var Lt=-Math.sqrt(Oe*Oe-1),yt=Qe?Lt:0,cr=Qe?0:Lt;if(W&&this.addCurrentVertex(O,ue,yt,cr,K),st==="fakeround")for(var Gt=Math.round(180*je/Math.PI/20),ar=1;ar<Gt;ar++){var Pt=ar/Gt;if(Pt!==.5){var Tr=Pt-.5;Pt+=Pt*Tr*(Pt-1)*((1.0904+Pe*(Pe*(3.55645-1.43519*Pe)-3.2452))*Tr*Tr+(.848013+Pe*(.215638*Pe-1.06021)))}var Ti=ge.sub(ue)._mult(Pt)._add(ue)._unit()._mult(Qe?-1:1);this.addHalfVertex(O,Ti.x,Ti.y,!1,Qe,0,K)}ae&&this.addCurrentVertex(O,ge,-yt,-cr,K)}else if(st==="butt")this.addCurrentVertex(O,Se,0,0,K);else if(st==="square"){var fn=W?1:-1;this.addCurrentVertex(O,Se,fn,fn,K)}else st==="round"&&(W&&(this.addCurrentVertex(O,ue,0,0,K),this.addCurrentVertex(O,ue,1,1,K,!0)),ae&&(this.addCurrentVertex(O,ge,-1,-1,K,!0),this.addCurrentVertex(O,ge,0,0,K)));if(Xe&&de<C-1){var Ai=O.dist(ae);if(Ai>2*U){var Ri=O.add(ae.sub(O)._mult(U/Ai)._round());this.updateDistance(O,Ri),this.addCurrentVertex(Ri,ge,0,0,K),O=Ri}}}}},fo.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var x=t.y*l-t.x,I=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,x,I,d,!0,-l,p),this.distance>eh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},fo.prototype.addHalfVertex=function(e,t,i,l,p,d,x){var I=.5*(this.lineClips?this.scaledDistance*(eh-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),x.primitiveLength++),p?this.e2=C:this.e1=C},fo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},fo.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},at("LineBucket",fo,{omit:["layers","patternFeatures"]});var Gh=new Ki({"line-cap":new xt(H.layout_line["line-cap"]),"line-join":new dt(H.layout_line["line-join"]),"line-miter-limit":new xt(H.layout_line["line-miter-limit"]),"line-round-limit":new xt(H.layout_line["line-round-limit"]),"line-sort-key":new dt(H.layout_line["line-sort-key"])}),fp={paint:new Ki({"line-opacity":new dt(H.paint_line["line-opacity"]),"line-color":new dt(H.paint_line["line-color"]),"line-translate":new xt(H.paint_line["line-translate"]),"line-translate-anchor":new xt(H.paint_line["line-translate-anchor"]),"line-width":new dt(H.paint_line["line-width"]),"line-gap-width":new dt(H.paint_line["line-gap-width"]),"line-offset":new dt(H.paint_line["line-offset"]),"line-blur":new dt(H.paint_line["line-blur"]),"line-dasharray":new Gi(H.paint_line["line-dasharray"]),"line-pattern":new Qr(H.paint_line["line-pattern"]),"line-gradient":new hn(H.paint_line["line-gradient"])}),layout:Gh},Qf=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new tr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=Fe({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(dt))(fp.paint.properties["line-width"].specification);Qf.useIntegerZoom=!0;var Tm=function(e){function t(i){e.call(this,i,fp),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof gn,this.gradientVersion=(this.gradientVersion+1)%pe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=Qf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new fo(i)},t.prototype.queryRadius=function(i){var l=i,p=Tc(Do("line-width",this,l),Do("line-gap-width",this,l)),d=Do("line-offset",this,l);return p/2+Math.abs(d)+pn(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,x,I,C){var L=Al(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),O=C/2*Tc(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),U=this.paint.get("line-offset").evaluate(l,p);return U&&(d=function(K,W){for(var ae=[],ue=new V(0,0),ge=0;ge<K.length;ge++){for(var de=K[ge],Se=[],Pe=0;Pe<de.length;Pe++){var Me=de[Pe],Oe=de[Pe+1],je=Pe===0?ue:Me.sub(de[Pe-1])._unit()._perp(),Xe=Pe===de.length-1?ue:Oe.sub(Me)._unit()._perp(),Qe=je._add(Xe)._unit();Qe._mult(1/(Qe.x*Xe.x+Qe.y*Xe.y)),Se.push(Qe._mult(W)._add(Me))}ae.push(Se)}return ae}(d,U*C)),function(K,W,ae){for(var ue=0;ue<W.length;ue++){var ge=W[ue];if(K.length>=3){for(var de=0;de<ge.length;de++)if(Yl(K,ge[de]))return!0}if(ws(K,ge,ae))return!0}return!1}(L,d,O)},t.prototype.isTileClipped=function(){return!0},t}(Wo);function Tc(e,t){return t>0?t+2*e:e}var Am=Hi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ef=Hi([{name:"a_projected_pos",components:3,type:"Float32"}],4),zm=(Hi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),dp=(Hi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),dy=Hi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $f(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,x){var I=d.layout.get("text-transform").evaluate(x,{});return I==="uppercase"?p=p.toLocaleUpperCase():I==="lowercase"&&(p=p.toLocaleLowerCase()),xn.applyArabicShaping&&(p=xn.applyArabicShaping(p)),p}(l.text,t,i)}),e}Hi([{name:"triangle",components:3,type:"Uint16"}]),Hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Hi([{type:"Float32",name:"offsetX"}]),Hi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ml={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},th=function(e,t,i,l,p){var d,x,I=8*p-l-1,C=(1<<I)-1,L=C>>1,O=-7,U=i?p-1:0,K=i?-1:1,W=e[t+U];for(U+=K,d=W&(1<<-O)-1,W>>=-O,O+=I;O>0;d=256*d+e[t+U],U+=K,O-=8);for(x=d&(1<<-O)-1,d>>=-O,O+=l;O>0;x=256*x+e[t+U],U+=K,O-=8);if(d===0)d=1-L;else{if(d===C)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,l),d-=L}return(W?-1:1)*x*Math.pow(2,d-l)},tu=function(e,t,i,l,p,d){var x,I,C,L=8*d-p-1,O=(1<<L)-1,U=O>>1,K=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=l?0:d-1,ae=l?1:-1,ue=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(I=isNaN(t)?1:0,x=O):(x=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-x))<1&&(x--,C*=2),(t+=x+U>=1?K/C:K*Math.pow(2,1-U))*C>=2&&(x++,C/=2),x+U>=O?(I=0,x=O):x+U>=1?(I=(t*C-1)*Math.pow(2,p),x+=U):(I=t*Math.pow(2,U-1)*Math.pow(2,p),x=0));p>=8;e[i+W]=255&I,W+=ae,I/=256,p-=8);for(x=x<<p|I,L+=p;L>0;e[i+W]=255&x,W+=ae,x/=256,L-=8);e[i+W-ae]|=128*ue},Ac=_i;function _i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}_i.Varint=0,_i.Fixed64=1,_i.Bytes=2,_i.Fixed32=5;var ed=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ks(e){return e.type===_i.Bytes?e.readVarint()+e.pos:e.pos+1}function Is(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function td(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function tf(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function rd(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Pm(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function mp(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Cm(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function Dm(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Ll(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Qu(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function ru(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function iu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function rh(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function ih(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function ov(e,t,i){e===1&&i.readMessage(Mm,t)}function Mm(e,t,i){if(e===3){var l=i.readMessage(Kh,{}),p=l.width,d=l.height,x=l.left,I=l.top,C=l.advance;t.push({id:l.id,bitmap:new bc({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:x,top:I,advance:C}})}}function Kh(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function nh(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(ue,ge){return ge.h-ue.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],I=0,C=0,L=0,O=e;L<O.length;L+=1)for(var U=O[L],K=x.length-1;K>=0;K--){var W=x[K];if(!(U.w>W.w||U.h>W.h)){if(U.x=W.x,U.y=W.y,C=Math.max(C,U.y+U.h),I=Math.max(I,U.x+U.w),U.w===W.w&&U.h===W.h){var ae=x.pop();K<x.length&&(x[K]=ae)}else U.h===W.h?(W.x+=U.w,W.w-=U.w):U.w===W.w?(W.y+=U.h,W.h-=U.h):(x.push({x:W.x+U.w,y:W.y,w:W.w-U.w,h:U.h}),W.y+=U.h,W.h-=U.h);break}}return{w:I,h:C,fill:t/(I*C)||0}}_i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=iu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ih(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=iu(this.buf,this.pos)+4294967296*iu(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=iu(this.buf,this.pos)+4294967296*ih(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=th(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=th(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,x){var I,C,L=x.buf;if(I=(112&(C=L[x.pos++]))>>4,C<128||(I|=(127&(C=L[x.pos++]))<<3,C<128)||(I|=(127&(C=L[x.pos++]))<<10,C<128)||(I|=(127&(C=L[x.pos++]))<<17,C<128)||(I|=(127&(C=L[x.pos++]))<<24,C<128)||(I|=(1&(C=L[x.pos++]))<<31,C<128))return Is(p,I,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ed?function(i,l,p){return ed.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",x=l;x<p;){var I,C,L,O=i[x],U=null,K=O>239?4:O>223?3:O>191?2:1;if(x+K>p)break;K===1?O<128&&(U=O):K===2?(192&(I=i[x+1]))==128&&(U=(31&O)<<6|63&I)<=127&&(U=null):K===3?(C=i[x+2],(192&(I=i[x+1]))==128&&(192&C)==128&&((U=(15&O)<<12|(63&I)<<6|63&C)<=2047||U>=55296&&U<=57343)&&(U=null)):K===4&&(C=i[x+2],L=i[x+3],(192&(I=i[x+1]))==128&&(192&C)==128&&(192&L)==128&&((U=(15&O)<<18|(63&I)<<12|(63&C)<<6|63&L)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,K=1):U>65535&&(U-=65536,d+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),d+=String.fromCharCode(U),x+=K}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==_i.Bytes)return e.push(this.readVarint(t));var i=ks(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==_i.Bytes)return e.push(this.readSVarint());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==_i.Bytes)return e.push(this.readBoolean());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==_i.Bytes)return e.push(this.readFloat());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==_i.Bytes)return e.push(this.readDouble());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==_i.Bytes)return e.push(this.readFixed32());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==_i.Bytes)return e.push(this.readSFixed32());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==_i.Bytes)return e.push(this.readFixed64());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==_i.Bytes)return e.push(this.readSFixed64());var t=ks(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===_i.Varint)for(;this.buf[this.pos++]>127;);else if(t===_i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===_i.Fixed32)this.pos+=4;else{if(t!==_i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),rh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),rh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),rh(this.buf,-1&e,this.pos),rh(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),rh(this.buf,-1&e,this.pos),rh(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,x,I){I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,I.buf[I.pos]=127&(d>>>=7)}(l,0,i),function(d,x){var I=(7&d)<<4;x.buf[x.pos++]|=I|((d>>>=3)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d|((d>>>=7)?128:0),d&&(x.buf[x.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var x,I,C=0;C<p.length;C++){if((x=p.charCodeAt(C))>55295&&x<57344){if(!I){x>56319||C+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):I=x;continue}if(x<56320){l[d++]=239,l[d++]=191,l[d++]=189,I=x;continue}x=I-55296<<10|x-56320|65536,I=null}else I&&(l[d++]=239,l[d++]=191,l[d++]=189,I=null);x<128?l[d++]=x:(x<2048?l[d++]=x>>6|192:(x<65536?l[d++]=x>>12|224:(l[d++]=x>>18|240,l[d++]=x>>12&63|128),l[d++]=x>>6&63|128),l[d++]=63&x|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&td(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),tu(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),tu(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&td(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,_i.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,tf,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,rd,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Cm,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Pm,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,mp,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Dm,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Ll,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Qu,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ru,t)},writeBytesField:function(e,t){this.writeTag(e,_i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,_i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,_i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,_i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,_i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,_i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,_i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,_i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,_i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,_i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var yp=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,x=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=x,this.version=l},zu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};zu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},zu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},zu.tlbr.get=function(){return this.tl.concat(this.br)},zu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yp.prototype,zu);var zc=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=nh(p),x=new ya({width:d.w||1,height:d.h||1});for(var I in e){var C=e[I],L=i[I].paddedRect;ya.copy(C.data,x,{x:0,y:0},{x:L.x+1,y:L.y+1},C.data)}for(var O in t){var U=t[O],K=l[O].paddedRect,W=K.x+1,ae=K.y+1,ue=U.data.width,ge=U.data.height;ya.copy(U.data,x,{x:0,y:0},{x:W,y:ae},U.data),ya.copy(U.data,x,{x:0,y:ge-1},{x:W,y:ae-1},{width:ue,height:1}),ya.copy(U.data,x,{x:0,y:0},{x:W,y:ae+ge},{width:ue,height:1}),ya.copy(U.data,x,{x:ue-1,y:0},{x:W-1,y:ae},{width:1,height:ge}),ya.copy(U.data,x,{x:0,y:0},{x:W+ue,y:ae},{width:1,height:ge})}this.image=x,this.iconPositions=i,this.patternPositions=l};zc.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new yp(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},zc.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},zc.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},at("ImagePosition",yp),at("ImageAtlas",zc);var Ts={horizontal:1,vertical:2,horizontalOnly:3},ah=function(){this.scale=1,this.fontStack="",this.imageName=null};ah.forText=function(e,t){var i=new ah;return i.scale=e||1,i.fontStack=t,i},ah.forImage=function(e){var t=new ah;return t.imageName=e,t};var Wn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function vp(e,t,i,l,p,d,x,I,C,L,O,U,K,W,ae,ue){var ge,de=Wn.fromFeature(e,p);U===Ts.vertical&&de.verticalizePunctuation();var Se=xn.processBidirectionalText,Pe=xn.processStyledBidirectionalText;if(Se&&de.sections.length===1){ge=[];for(var Me=0,Oe=Se(de.toString(),Pc(de,L,d,t,l,W,ae));Me<Oe.length;Me+=1){var je=Oe[Me],Xe=new Wn;Xe.text=je,Xe.sections=de.sections;for(var Qe=0;Qe<je.length;Qe++)Xe.sectionIndex.push(0);ge.push(Xe)}}else if(Pe){ge=[];for(var St=0,lt=Pe(de.text,de.sectionIndex,Pc(de,L,d,t,l,W,ae));St<lt.length;St+=1){var _t=lt[St],st=new Wn;st.text=_t[0],st.sectionIndex=_t[1],st.sections=de.sections,ge.push(st)}}else ge=function(yt,cr){for(var Gt=[],ar=yt.text,Pt=0,Tr=0,Ti=cr;Tr<Ti.length;Tr+=1){var fn=Ti[Tr];Gt.push(yt.substring(Pt,fn)),Pt=fn}return Pt<ar.length&&Gt.push(yt.substring(Pt,ar.length)),Gt}(de,Pc(de,L,d,t,l,W,ae));var Zt=[],Lt={positionedLines:Zt,text:de.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(yt,cr,Gt,ar,Pt,Tr,Ti,fn,Ai,Ri,dn,jr){for(var Bi=0,nn=-17,an=0,Qa=0,Oi=fn==="right"?1:fn==="left"?0:.5,ja=0,fr=0,Ur=Pt;fr<Ur.length;fr+=1){var Mr=Ur[fr];Mr.trim();var Ar=Mr.getMaxScale(),_a=24*(Ar-1),ba={positionedGlyphs:[],lineOffset:0};yt.positionedLines[ja]=ba;var zi=ba.positionedGlyphs,On=0;if(Mr.length()){for(var Vn=0;Vn<Mr.length();Vn++){var Lr=Mr.getSection(Vn),mo=Mr.getSectionIndex(Vn),Jn=Mr.getCharCode(Vn),Lo=0,Sn=null,As=null,lu=null,yh=24,Nl=!(Ai===Ts.horizontal||!dn&&!ha(Jn)||dn&&(oh[Jn]||(Ul=Jn,me.Arabic(Ul)||me["Arabic Supplement"](Ul)||me["Arabic Extended-A"](Ul)||me["Arabic Presentation Forms-A"](Ul)||me["Arabic Presentation Forms-B"](Ul))));if(Lr.imageName){var uu=ar[Lr.imageName];if(!uu)continue;lu=Lr.imageName,yt.iconsInText=yt.iconsInText||!0,As=uu.paddedRect;var Lu=uu.displaySize;Lr.scale=24*Lr.scale/jr,Lo=_a+(24-Lu[1]*Lr.scale),yh=(Sn={width:Lu[0],height:Lu[1],left:1,top:-3,advance:Nl?Lu[1]:Lu[0]}).advance;var cu=Nl?Lu[0]*Lr.scale-24*Ar:Lu[1]*Lr.scale-24*Ar;cu>0&&cu>On&&(On=cu)}else{var vh=Gt[Lr.fontStack],gh=vh&&vh[Jn];if(gh&&gh.rect)As=gh.rect,Sn=gh.metrics;else{var $h=cr[Lr.fontStack],Ru=$h&&$h[Jn];if(!Ru)continue;Sn=Ru.metrics}Lo=24*(Ar-Lr.scale)}Nl?(yt.verticalizable=!0,zi.push({glyph:Jn,imageName:lu,x:Bi,y:nn+Lo,vertical:Nl,scale:Lr.scale,fontStack:Lr.fontStack,sectionIndex:mo,metrics:Sn,rect:As}),Bi+=yh*Lr.scale+Ri):(zi.push({glyph:Jn,imageName:lu,x:Bi,y:nn+Lo,vertical:Nl,scale:Lr.scale,fontStack:Lr.fontStack,sectionIndex:mo,metrics:Sn,rect:As}),Bi+=Sn.advance*Lr.scale+Ri)}zi.length!==0&&(an=Math.max(Bi-Ri,an),_p(zi,0,zi.length-1,Oi,On)),Bi=0;var Ep=Tr*Ar+On;ba.lineOffset=Math.max(On,_a),nn+=Ep,Qa=Math.max(Ep,Qa),++ja}else nn+=Tr,++ja}var Ul,ep=nn- -17,js=Rl(Ti),yo=js.horizontalAlign,pl=js.verticalAlign;(function(Sp,oc,uf,tp,sc,Bu,rp,Ou,_h){var bh,kp=(oc-uf)*sc;bh=Bu!==rp?-Ou*tp- -17:(-tp*_h+.5)*rp;for(var ql=0,ip=Sp;ql<ip.length;ql+=1)for(var zs=0,Ps=ip[ql].positionedGlyphs;zs<Ps.length;zs+=1){var fl=Ps[zs];fl.x+=kp,fl.y+=bh}})(yt.positionedLines,Oi,yo,pl,an,Qa,Tr,ep,Pt.length),yt.top+=-pl*ep,yt.bottom=yt.top+ep,yt.left+=-yo*an,yt.right=yt.left+an}(Lt,t,i,l,ge,x,I,C,U,L,K,ue),!function(yt){for(var cr=0,Gt=yt;cr<Gt.length;cr+=1)if(Gt[cr].positionedGlyphs.length!==0)return!1;return!0}(Zt)&&Lt}Wn.fromFeature=function(e,t){for(var i=new Wn,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},Wn.prototype.length=function(){return this.text.length},Wn.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Wn.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Wn.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Wn.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&pa(l)&&!Ml[e[i+1]]||p&&pa(p)&&!Ml[e[i-1]]||!Ml[e[i]]?e[i]:Ml[e[i]]}return t}(this.text)},Wn.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&oh[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&oh[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},Wn.prototype.substring=function(e,t){var i=new Wn;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},Wn.prototype.toString=function(){return this.text},Wn.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},Wn.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(ah.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},Wn.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(ah.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Nt("Reached maximum number of images 6401")}else Nt("Can't add FormattedSection with an empty image.")},Wn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var oh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jo={};function gp(e,t,i,l,p,d){if(t.imageName){var x=l[t.imageName];return x?x.displaySize[0]*t.scale*24/d+p:0}var I=i[t.fontStack],C=I&&I[e];return C?C.metrics.advance*t.scale+p:0}function Lm(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function id(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function $u(e,t,i,l,p,d){for(var x=null,I=Lm(t,i,p,d),C=0,L=l;C<L.length;C+=1){var O=L[C],U=Lm(t-O.x,i,p,d)+O.badness;U<=I&&(x=O,I=U)}return{index:e,x:t,priorBreak:x,badness:I}}function Pc(e,t,i,l,p,d,x){if(d!=="point")return[];if(!e)return[];for(var I,C=[],L=function(ge,de,Se,Pe,Me,Oe){for(var je=0,Xe=0;Xe<ge.length();Xe++){var Qe=ge.getSection(Xe);je+=gp(ge.getCharCode(Xe),Qe,Pe,Me,de,Oe)}return je/Math.max(1,Math.ceil(je/Se))}(e,t,i,l,p,x),O=e.text.indexOf("\u200B")>=0,U=0,K=0;K<e.length();K++){var W=e.getSection(K),ae=e.getCharCode(K);if(oh[ae]||(U+=gp(ae,W,l,p,t,x)),K<e.length()-1){var ue=!((I=ae)<11904||!(me["Bopomofo Extended"](I)||me.Bopomofo(I)||me["CJK Compatibility Forms"](I)||me["CJK Compatibility Ideographs"](I)||me["CJK Compatibility"](I)||me["CJK Radicals Supplement"](I)||me["CJK Strokes"](I)||me["CJK Symbols and Punctuation"](I)||me["CJK Unified Ideographs Extension A"](I)||me["CJK Unified Ideographs"](I)||me["Enclosed CJK Letters and Months"](I)||me["Halfwidth and Fullwidth Forms"](I)||me.Hiragana(I)||me["Ideographic Description Characters"](I)||me["Kangxi Radicals"](I)||me["Katakana Phonetic Extensions"](I)||me.Katakana(I)||me["Vertical Forms"](I)||me["Yi Radicals"](I)||me["Yi Syllables"](I)));(Jo[ae]||ue||W.imageName)&&C.push($u(K+1,U,L,C,id(ae,e.getCharCode(K+1),ue&&O),!1))}}return function ge(de){return de?ge(de.priorBreak).concat(de.index):[]}($u(e.length(),U,L,C,0,!0))}function Rl(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function _p(e,t,i,l,p){if(l||p)for(var d=e[i],x=(e[i].x+d.metrics.advance*d.scale)*l,I=t;I<=i;I++)e[I].x-=x,e[I].y+=p}function nd(e,t,i,l,p,d){var x,I=e.image;if(I.content){var C=I.content,L=I.pixelRatio||1;x=[C[0]/L,C[1]/L,I.displaySize[0]-C[2]/L,I.displaySize[1]-C[3]/L]}var O,U,K,W,ae=t.left*d,ue=t.right*d;i==="width"||i==="both"?(W=p[0]+ae-l[3],U=p[0]+ue+l[1]):U=(W=p[0]+(ae+ue-I.displaySize[0])/2)+I.displaySize[0];var ge=t.top*d,de=t.bottom*d;return i==="height"||i==="both"?(O=p[1]+ge-l[0],K=p[1]+de+l[2]):K=(O=p[1]+(ge+de-I.displaySize[1])/2)+I.displaySize[1],{image:I,top:O,right:U,bottom:K,left:W,collisionPadding:x}}Jo[10]=!0,Jo[32]=!0,Jo[38]=!0,Jo[40]=!0,Jo[41]=!0,Jo[43]=!0,Jo[45]=!0,Jo[47]=!0,Jo[173]=!0,Jo[183]=!0,Jo[8203]=!0,Jo[8208]=!0,Jo[8211]=!0,Jo[8231]=!0;var sh=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(V);function ec(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new tr(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var x=d=Math.max(0,d-1);x<l.length&&l[x]<e+1;)x++;x=Math.min(l.length-1,x);var I=l[d],C=l[x];return i.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:C,interpolationType:p}:{kind:"camera",minZoom:I,maxZoom:C,minSize:i.evaluate(new tr(I)),maxSize:i.evaluate(new tr(C)),interpolationType:p}}function nu(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?ji(p/128,i.upperSize/128,t.uSizeT):l}function ad(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?Ee(Wr.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=ji(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}at("Anchor",sh);var rf=Object.freeze({__proto__:null,getSizeData:ec,evaluateSizeForFeature:nu,evaluateSizeForZoom:ad,SIZE_PACK_FACTOR:128});function nf(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,x=t.segment+1,I=0;I>-i/2;){if(--x<0)return!1;I-=e[x].dist(d),d=e[x]}I+=e[x].dist(e[x+1]),x++;for(var C=[],L=0;I<i/2;){var O=e[x],U=e[x+1];if(!U)return!1;var K=e[x-1].angleTo(O)-O.angleTo(U);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:I,angleDelta:K}),L+=K;I-C[0].distance>l;)L-=C.shift().angleDelta;if(L>p)return!1;x++,I+=O.dist(U)}return!0}function od(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function Hh(e,t,i){return e?.6*t*i:0}function sd(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Rm(e,t,i,l,p,d){for(var x=Hh(i,p,d),I=sd(i,l)*d,C=0,L=od(e)/2,O=0;O<e.length-1;O++){var U=e[O],K=e[O+1],W=U.dist(K);if(C+W>L){var ae=(L-C)/W,ue=ji(U.x,K.x,ae),ge=ji(U.y,K.y,ae),de=new sh(ue,ge,K.angleTo(U),O);return de._round(),!x||nf(e,de,I,x,t)?de:void 0}C+=W}}function Qo(e,t,i,l,p,d,x,I,C){var L=Hh(l,d,x),O=sd(l,p),U=O*x,K=e[0].x===0||e[0].x===C||e[0].y===0||e[0].y===C;return t-U<t/4&&(t=U+t/4),function W(ae,ue,ge,de,Se,Pe,Me,Oe,je){for(var Xe=Pe/2,Qe=od(ae),St=0,lt=ue-ge,_t=[],st=0;st<ae.length-1;st++){for(var Zt=ae[st],Lt=ae[st+1],yt=Zt.dist(Lt),cr=Lt.angleTo(Zt);lt+ge<St+yt;){var Gt=((lt+=ge)-St)/yt,ar=ji(Zt.x,Lt.x,Gt),Pt=ji(Zt.y,Lt.y,Gt);if(ar>=0&&ar<je&&Pt>=0&&Pt<je&&lt-Xe>=0&&lt+Xe<=Qe){var Tr=new sh(ar,Pt,cr,st);Tr._round(),de&&!nf(ae,Tr,Pe,de,Se)||_t.push(Tr)}}St+=yt}return Oe||_t.length||Me||(_t=W(ae,St/2,ge,de,Se,Pe,Me,!0,je)),_t}(e,K?t/2*I%t:(O/2+2*d)*x*I%t,t,L,i,U,K,!1,C)}function Pu(e,t,i,l,p){for(var d=[],x=0;x<e.length;x++)for(var I=e[x],C=void 0,L=0;L<I.length-1;L++){var O=I[L],U=I[L+1];O.x<t&&U.x<t||(O.x<t?O=new V(t,O.y+(t-O.x)/(U.x-O.x)*(U.y-O.y))._round():U.x<t&&(U=new V(t,O.y+(t-O.x)/(U.x-O.x)*(U.y-O.y))._round()),O.y<i&&U.y<i||(O.y<i?O=new V(O.x+(i-O.y)/(U.y-O.y)*(U.x-O.x),i)._round():U.y<i&&(U=new V(O.x+(i-O.y)/(U.y-O.y)*(U.x-O.x),i)._round()),O.x>=l&&U.x>=l||(O.x>=l?O=new V(l,O.y+(l-O.x)/(U.x-O.x)*(U.y-O.y))._round():U.x>=l&&(U=new V(l,O.y+(l-O.x)/(U.x-O.x)*(U.y-O.y))._round()),O.y>=p&&U.y>=p||(O.y>=p?O=new V(O.x+(p-O.y)/(U.y-O.y)*(U.x-O.x),p)._round():U.y>=p&&(U=new V(O.x+(p-O.y)/(U.y-O.y)*(U.x-O.x),p)._round()),C&&O.equals(C[C.length-1])||d.push(C=[O]),C.push(U)))))}return d}function Bl(e,t,i,l){var p=[],d=e.image,x=d.pixelRatio,I=d.paddedRect.w-2,C=d.paddedRect.h-2,L=e.right-e.left,O=e.bottom-e.top,U=d.stretchX||[[0,I]],K=d.stretchY||[[0,C]],W=function(ar,Pt){return ar+Pt[1]-Pt[0]},ae=U.reduce(W,0),ue=K.reduce(W,0),ge=I-ae,de=C-ue,Se=0,Pe=ae,Me=0,Oe=ue,je=0,Xe=ge,Qe=0,St=de;if(d.content&&l){var lt=d.content;Se=au(U,0,lt[0]),Me=au(K,0,lt[1]),Pe=au(U,lt[0],lt[2]),Oe=au(K,lt[1],lt[3]),je=lt[0]-Se,Qe=lt[1]-Me,Xe=lt[2]-lt[0]-Pe,St=lt[3]-lt[1]-Oe}var _t=function(ar,Pt,Tr,Ti){var fn=tc(ar.stretch-Se,Pe,L,e.left),Ai=ud(ar.fixed-je,Xe,ar.stretch,ae),Ri=tc(Pt.stretch-Me,Oe,O,e.top),dn=ud(Pt.fixed-Qe,St,Pt.stretch,ue),jr=tc(Tr.stretch-Se,Pe,L,e.left),Bi=ud(Tr.fixed-je,Xe,Tr.stretch,ae),nn=tc(Ti.stretch-Me,Oe,O,e.top),an=ud(Ti.fixed-Qe,St,Ti.stretch,ue),Qa=new V(fn,Ri),Oi=new V(jr,Ri),ja=new V(jr,nn),fr=new V(fn,nn),Ur=new V(Ai/x,dn/x),Mr=new V(Bi/x,an/x),Ar=t*Math.PI/180;if(Ar){var _a=Math.sin(Ar),ba=Math.cos(Ar),zi=[ba,-_a,_a,ba];Qa._matMult(zi),Oi._matMult(zi),fr._matMult(zi),ja._matMult(zi)}var On=ar.stretch+ar.fixed,Vn=Pt.stretch+Pt.fixed;return{tl:Qa,tr:Oi,bl:fr,br:ja,tex:{x:d.paddedRect.x+1+On,y:d.paddedRect.y+1+Vn,w:Tr.stretch+Tr.fixed-On,h:Ti.stretch+Ti.fixed-Vn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ur,pixelOffsetBR:Mr,minFontScaleX:Xe/x/L,minFontScaleY:St/x/O,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var st=ld(U,ge,ae),Zt=ld(K,de,ue),Lt=0;Lt<st.length-1;Lt++)for(var yt=st[Lt],cr=st[Lt+1],Gt=0;Gt<Zt.length-1;Gt++)p.push(_t(yt,Zt[Gt],cr,Zt[Gt+1]));else p.push(_t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:C+1}));return p}function au(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var x=d[p];l+=Math.max(t,Math.min(i,x[1]))-Math.max(t,Math.min(i,x[0]))}return l}function ld(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var x=d[p],I=x[0],C=x[1],L=l[l.length-1];l.push({fixed:I-L.stretch,stretch:L.stretch}),l.push({fixed:I-L.stretch,stretch:L.stretch+(C-I)})}return l.push({fixed:t+1,stretch:i}),l}function tc(e,t,i,l){return e/t*i+l}function ud(e,t,i,l){return e-t*i/l}var bp=function(e,t,i,l,p,d,x,I,C,L){if(this.boxStartIndex=e.length,C){var O=d.top,U=d.bottom,K=d.collisionPadding;K&&(O-=K[1],U+=K[3]);var W=U-O;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{var ae=d.top*x-I,ue=d.bottom*x+I,ge=d.left*x-I,de=d.right*x+I,Se=d.collisionPadding;if(Se&&(ge-=Se[0]*x,ae-=Se[1]*x,de+=Se[2]*x,ue+=Se[3]*x),L){var Pe=new V(ge,ae),Me=new V(de,ae),Oe=new V(ge,ue),je=new V(de,ue),Xe=L*Math.PI/180;Pe._rotate(Xe),Me._rotate(Xe),Oe._rotate(Xe),je._rotate(Xe),ge=Math.min(Pe.x,Me.x,Oe.x,je.x),de=Math.max(Pe.x,Me.x,Oe.x,je.x),ae=Math.min(Pe.y,Me.y,Oe.y,je.y),ue=Math.max(Pe.y,Me.y,Oe.y,je.y)}e.emplaceBack(t.x,t.y,ge,ae,de,ue,i,l,p)}this.boxEndIndex=e.length},ou=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=va),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function va(e,t){return e<t?-1:e>t?1:0}function Bm(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,x=-1/0,I=e[0],C=0;C<I.length;C++){var L=I[C];(!C||L.x<l)&&(l=L.x),(!C||L.y<p)&&(p=L.y),(!C||L.x>d)&&(d=L.x),(!C||L.y>x)&&(x=L.y)}var O=Math.min(d-l,x-p),U=O/2,K=new ou([],Om);if(O===0)return new V(l,p);for(var W=l;W<d;W+=O)for(var ae=p;ae<x;ae+=O)K.push(new lh(W+U,ae+U,U,e));for(var ue=function(Se){for(var Pe=0,Me=0,Oe=0,je=Se[0],Xe=0,Qe=je.length,St=Qe-1;Xe<Qe;St=Xe++){var lt=je[Xe],_t=je[St],st=lt.x*_t.y-_t.x*lt.y;Me+=(lt.x+_t.x)*st,Oe+=(lt.y+_t.y)*st,Pe+=3*st}return new lh(Me/Pe,Oe/Pe,0,Se)}(e),ge=K.length;K.length;){var de=K.pop();(de.d>ue.d||!ue.d)&&(ue=de,i&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,ge)),de.max-ue.d<=t||(K.push(new lh(de.p.x-(U=de.h/2),de.p.y-U,U,e)),K.push(new lh(de.p.x+U,de.p.y-U,U,e)),K.push(new lh(de.p.x-U,de.p.y+U,U,e)),K.push(new lh(de.p.x+U,de.p.y+U,U,e)),ge+=4)}return i&&(console.log("num probes: "+ge),console.log("best distance: "+ue.d)),ue.p}function Om(e,t){return t.max-e.max}function lh(e,t,i,l){this.p=new V(e,t),this.h=i,this.d=function(p,d){for(var x=!1,I=1/0,C=0;C<d.length;C++)for(var L=d[C],O=0,U=L.length,K=U-1;O<U;K=O++){var W=L[O],ae=L[K];W.y>p.y!=ae.y>p.y&&p.x<(ae.x-W.x)*(p.y-W.y)/(ae.y-W.y)+W.x&&(x=!x),I=Math.min(I,Xu(p,W,ae))}return(x?1:-1)*Math.sqrt(I)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}ou.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},ou.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},ou.prototype.peek=function(){return this.data[0]},ou.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},ou.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),x=t[d],I=d+1;if(I<this.length&&i(t[I],x)<0&&(d=I,x=t[I]),i(x,p)>=0)break;t[e]=x,e=d}t[e]=p};var af=Number.POSITIVE_INFINITY;function cd(e,t){return t[1]!==af?function(i,l,p){var d=0,x=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,x]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var x=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=x-7;break;case"bottom-right":case"bottom-left":d=7-x;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function of(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hd(e,t,i,l,p,d,x,I,C,L,O,U,K,W,ae){var ue=function(Me,Oe,je,Xe,Qe,St,lt,_t){for(var st=Xe.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,Zt=[],Lt=0,yt=Oe.positionedLines;Lt<yt.length;Lt+=1)for(var cr=yt[Lt],Gt=0,ar=cr.positionedGlyphs;Gt<ar.length;Gt+=1){var Pt=ar[Gt];if(Pt.rect){var Tr=Pt.rect||{},Ti=4,fn=!0,Ai=1,Ri=0,dn=(Qe||_t)&&Pt.vertical,jr=Pt.metrics.advance*Pt.scale/2;if(_t&&Oe.verticalizable&&(Ri=cr.lineOffset/2-(Pt.imageName?-(24-Pt.metrics.width*Pt.scale)/2:24*(Pt.scale-1))),Pt.imageName){var Bi=lt[Pt.imageName];fn=Bi.sdf,Ti=1/(Ai=Bi.pixelRatio)}var nn=Qe?[Pt.x+jr,Pt.y]:[0,0],an=Qe?[0,0]:[Pt.x+jr+je[0],Pt.y+je[1]-Ri],Qa=[0,0];dn&&(Qa=an,an=[0,0]);var Oi=(Pt.metrics.left-Ti)*Pt.scale-jr+an[0],ja=(-Pt.metrics.top-Ti)*Pt.scale+an[1],fr=Oi+Tr.w*Pt.scale/Ai,Ur=ja+Tr.h*Pt.scale/Ai,Mr=new V(Oi,ja),Ar=new V(fr,ja),_a=new V(Oi,Ur),ba=new V(fr,Ur);if(dn){var zi=new V(-jr,jr- -17),On=-Math.PI/2,Vn=12-jr,Lr=new V(22-Vn,-(Pt.imageName?Vn:0)),mo=new(Function.prototype.bind.apply(V,[null].concat(Qa)));Mr._rotateAround(On,zi)._add(Lr)._add(mo),Ar._rotateAround(On,zi)._add(Lr)._add(mo),_a._rotateAround(On,zi)._add(Lr)._add(mo),ba._rotateAround(On,zi)._add(Lr)._add(mo)}if(st){var Jn=Math.sin(st),Lo=Math.cos(st),Sn=[Lo,-Jn,Jn,Lo];Mr._matMult(Sn),Ar._matMult(Sn),_a._matMult(Sn),ba._matMult(Sn)}var As=new V(0,0),lu=new V(0,0);Zt.push({tl:Mr,tr:Ar,bl:_a,br:ba,tex:Tr,writingMode:Oe.writingMode,glyphOffset:nn,sectionIndex:Pt.sectionIndex,isSDF:fn,pixelOffsetTL:As,pixelOffsetBR:lu,minFontScaleX:0,minFontScaleY:0})}}return Zt}(0,i,I,p,d,x,l,e.allowVerticalPlacement),ge=e.textSizeData,de=null;ge.kind==="source"?(de=[128*p.layout.get("text-size").evaluate(x,{})])[0]>32640&&Nt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ge.kind==="composite"&&((de=[128*W.compositeTextSizes[0].evaluate(x,{},ae),128*W.compositeTextSizes[1].evaluate(x,{},ae)])[0]>32640||de[1]>32640)&&Nt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,ue,de,I,d,x,L,t,C.lineStartIndex,C.lineLength,K,ae);for(var Se=0,Pe=O;Se<Pe.length;Se+=1)U[Pe[Se]]=e.text.placedSymbolArray.length-1;return 4*ue.length}function pd(e){for(var t in e)return e[t];return null}function Vm(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],x=d.length-1;x>=0;x--)if(l.dist(d[x])<i)return!0}else p[t]=[];return p[t].push(l),!1}var Fm=Ic.VectorTileFeature.types,Nm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xp(e,t,i,l,p,d,x,I,C,L,O,U,K){var W=I?Math.min(32640,Math.round(I[0])):0,ae=I?Math.min(32640,Math.round(I[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,x,(W<<1)+(C?1:0),ae,16*L,16*O,256*U,256*K)}function sf(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Um(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(da(i[t].text))return!0;return!1}var uh=function(e){this.layoutVertexArray=new kl,this.indexArray=new uo,this.programConfigurations=e,this.segments=new J,this.dynamicLayoutVertexArray=new Ya,this.opacityVertexArray=new Ua,this.placedSymbolArray=new c};uh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},uh.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Am.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,ef.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Nm,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},uh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},at("SymbolBuffers",uh);var Xh=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new J,this.collisionVertexArray=new Yc};Xh.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,zm.members,!0)},Xh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},at("CollisionBuffers",Xh);var $r=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Yo([]),this.placementViewportMatrix=Yo([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ec(this.zoom,t["text-size"]),this.iconSizeData=ec(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Ts[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};$r.prototype.createArrays=function(){this.text=new uh(new Dt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new uh(new Dt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new k,this.lineVertexArray=new P,this.symbolInstances=new w},$r.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var x=Ml[e.charAt(d)];x&&(t[x.charCodeAt(0)]=!0)}},$r.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),x=p.get("text-field"),I=p.get("icon-image"),C=(x.value.kind!=="constant"||x.value.value instanceof Hr&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),L=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,O=p.get("symbol-sort-key");if(this.features=[],C||L){for(var U=t.iconDependencies,K=t.glyphDependencies,W=t.availableImages,ae=new tr(this.zoom),ue=0,ge=e;ue<ge.length;ue+=1){var de=ge[ue],Se=de.feature,Pe=de.id,Me=de.index,Oe=de.sourceLayerIndex,je=l._featureFilter.needGeometry,Xe=En(Se,je);if(l._featureFilter.filter(ae,Xe,i)){je||(Xe.geometry=gi(Se));var Qe=void 0;if(C){var St=l.getValueAndResolveTokens("text-field",Xe,i,W),lt=Hr.factory(St);Um(lt)&&(this.hasRTLText=!0),(!this.hasRTLText||ol()==="unavailable"||this.hasRTLText&&xn.isParsed())&&(Qe=$f(lt,l,Xe))}var _t=void 0;if(L){var st=l.getValueAndResolveTokens("icon-image",Xe,i,W);_t=st instanceof An?st:An.fromString(st)}if(Qe||_t){var Zt=this.sortFeaturesByKey?O.evaluate(Xe,{},i):void 0;if(this.features.push({id:Pe,text:Qe,icon:_t,index:Me,sourceLayerIndex:Oe,geometry:Xe.geometry,properties:Se.properties,type:Fm[Se.type],sortKey:Zt}),_t&&(U[_t.name]=!0),Qe){var Lt=d.evaluate(Xe,{},i).join(","),yt=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ts.vertical)>=0;for(var cr=0,Gt=Qe.sections;cr<Gt.length;cr+=1){var ar=Gt[cr];if(ar.image)U[ar.image.name]=!0;else{var Pt=gt(Qe.toString()),Tr=ar.fontStack||Lt,Ti=K[Tr]=K[Tr]||{};this.calculateGlyphDependencies(ar.text,Ti,yt,this.allowVerticalPlacement,Pt)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(fn){var Ai={},Ri={},dn=[],jr=0;function Bi(zi){dn.push(fn[zi]),jr++}function nn(zi,On,Vn){var Lr=Ri[zi];return delete Ri[zi],Ri[On]=Lr,dn[Lr].geometry[0].pop(),dn[Lr].geometry[0]=dn[Lr].geometry[0].concat(Vn[0]),Lr}function an(zi,On,Vn){var Lr=Ai[On];return delete Ai[On],Ai[zi]=Lr,dn[Lr].geometry[0].shift(),dn[Lr].geometry[0]=Vn[0].concat(dn[Lr].geometry[0]),Lr}function Qa(zi,On,Vn){var Lr=Vn?On[0][On[0].length-1]:On[0][0];return zi+":"+Lr.x+":"+Lr.y}for(var Oi=0;Oi<fn.length;Oi++){var ja=fn[Oi],fr=ja.geometry,Ur=ja.text?ja.text.toString():null;if(Ur){var Mr=Qa(Ur,fr),Ar=Qa(Ur,fr,!0);if(Mr in Ri&&Ar in Ai&&Ri[Mr]!==Ai[Ar]){var _a=an(Mr,Ar,fr),ba=nn(Mr,Ar,dn[_a].geometry);delete Ai[Mr],delete Ri[Ar],Ri[Qa(Ur,dn[ba].geometry,!0)]=ba,dn[_a].geometry=null}else Mr in Ri?nn(Mr,Ar,fr):Ar in Ai?an(Mr,Ar,fr):(Bi(Oi),Ai[Mr]=jr-1,Ri[Ar]=jr-1)}else Bi(Oi)}return dn.filter(function(zi){return zi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(fn,Ai){return fn.sortKey-Ai.sortKey})}},$r.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},$r.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},$r.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},$r.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},$r.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},$r.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},$r.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},x=e.segment+1;x<t.length;x++)d[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:l},x<t.length-1&&(l+=t[x+1].dist(t[x]));for(var I=e.segment||0;I>=0;I--)d[I]={x:t[I].x,y:t[I].y,tileUnitDistanceFromAnchor:p},I>0&&(p+=t[I-1].dist(t[I]));for(var C=0;C<t.length;C++){var L=d[C];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},$r.prototype.addSymbols=function(e,t,i,l,p,d,x,I,C,L,O,U){for(var K=e.indexArray,W=e.layoutVertexArray,ae=e.segments.prepareSegment(4*t.length,W,K,this.canOverlap?d.sortKey:void 0),ue=this.glyphOffsetArray.length,ge=ae.vertexLength,de=this.allowVerticalPlacement&&x===Ts.vertical?Math.PI/2:0,Se=d.text&&d.text.sections,Pe=0;Pe<t.length;Pe++){var Me=t[Pe],Oe=Me.tl,je=Me.tr,Xe=Me.bl,Qe=Me.br,St=Me.tex,lt=Me.pixelOffsetTL,_t=Me.pixelOffsetBR,st=Me.minFontScaleX,Zt=Me.minFontScaleY,Lt=Me.glyphOffset,yt=Me.isSDF,cr=Me.sectionIndex,Gt=ae.vertexLength,ar=Lt[1];xp(W,I.x,I.y,Oe.x,ar+Oe.y,St.x,St.y,i,yt,lt.x,lt.y,st,Zt),xp(W,I.x,I.y,je.x,ar+je.y,St.x+St.w,St.y,i,yt,_t.x,lt.y,st,Zt),xp(W,I.x,I.y,Xe.x,ar+Xe.y,St.x,St.y+St.h,i,yt,lt.x,_t.y,st,Zt),xp(W,I.x,I.y,Qe.x,ar+Qe.y,St.x+St.w,St.y+St.h,i,yt,_t.x,_t.y,st,Zt),sf(e.dynamicLayoutVertexArray,I,de),K.emplaceBack(Gt,Gt+1,Gt+2),K.emplaceBack(Gt+1,Gt+2,Gt+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lt[0]),Pe!==t.length-1&&cr===t[Pe+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,d,d.index,{},U,Se&&Se[cr])}e.placedSymbolArray.emplaceBack(I.x,I.y,ue,this.glyphOffsetArray.length-ue,ge,C,L,I.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],x,0,!1,0,O)},$r.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},$r.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,x){var I=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),C=I.vertexLength,L=p.layoutVertexArray,O=p.collisionVertexArray,U=x.anchorX,K=x.anchorY;this._addCollisionDebugVertex(L,O,d,U,K,new V(e,t)),this._addCollisionDebugVertex(L,O,d,U,K,new V(i,t)),this._addCollisionDebugVertex(L,O,d,U,K,new V(i,l)),this._addCollisionDebugVertex(L,O,d,U,K,new V(e,l)),I.vertexLength+=4;var W=p.indexArray;W.emplaceBack(C,C+1),W.emplaceBack(C+1,C+2),W.emplaceBack(C+2,C+3),W.emplaceBack(C+3,C),I.primitiveLength+=4},$r.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},$r.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xh(Il,dp.members,Xl),this.iconCollisionBox=new Xh(Il,dp.members,Xl);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},$r.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,x,I,C){for(var L={},O=t;O<i;O++){var U=e.get(O);L.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.textFeatureIndex=U.featureIndex;break}for(var K=l;K<p;K++){var W=e.get(K);L.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},L.verticalTextFeatureIndex=W.featureIndex;break}for(var ae=d;ae<x;ae++){var ue=e.get(ae);L.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},L.iconFeatureIndex=ue.featureIndex;break}for(var ge=I;ge<C;ge++){var de=e.get(ge);L.verticalIconBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},L.verticalIconFeatureIndex=de.featureIndex;break}return L},$r.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},$r.prototype.hasTextData=function(){return this.text.segments.get().length>0},$r.prototype.hasIconData=function(){return this.icon.segments.get().length>0},$r.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},$r.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},$r.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},$r.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},$r.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],x=0;x<this.symbolInstances.length;++x){d.push(x);var I=this.symbolInstances.get(x);l.push(0|Math.round(t*I.anchorX+i*I.anchorY)),p.push(I.featureIndex)}return d.sort(function(C,L){return l[C]-l[L]||p[L]-p[C]}),d},$r.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},$r.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,x,I){d>=0&&I.indexOf(d)===x&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},at("SymbolBucket",$r,{omit:["layers","collisionBoxArray","features","compareText"]}),$r.MAX_GLYPHS=65535,$r.addDynamicAttributes=sf;var Wh=new Ki({"symbol-placement":new xt(H.layout_symbol["symbol-placement"]),"symbol-spacing":new xt(H.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new xt(H.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new dt(H.layout_symbol["symbol-sort-key"]),"symbol-z-order":new xt(H.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new xt(H.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new xt(H.layout_symbol["icon-ignore-placement"]),"icon-optional":new xt(H.layout_symbol["icon-optional"]),"icon-rotation-alignment":new xt(H.layout_symbol["icon-rotation-alignment"]),"icon-size":new dt(H.layout_symbol["icon-size"]),"icon-text-fit":new xt(H.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new xt(H.layout_symbol["icon-text-fit-padding"]),"icon-image":new dt(H.layout_symbol["icon-image"]),"icon-rotate":new dt(H.layout_symbol["icon-rotate"]),"icon-padding":new xt(H.layout_symbol["icon-padding"]),"icon-keep-upright":new xt(H.layout_symbol["icon-keep-upright"]),"icon-offset":new dt(H.layout_symbol["icon-offset"]),"icon-anchor":new dt(H.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new xt(H.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new xt(H.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new xt(H.layout_symbol["text-rotation-alignment"]),"text-field":new dt(H.layout_symbol["text-field"]),"text-font":new dt(H.layout_symbol["text-font"]),"text-size":new dt(H.layout_symbol["text-size"]),"text-max-width":new dt(H.layout_symbol["text-max-width"]),"text-line-height":new xt(H.layout_symbol["text-line-height"]),"text-letter-spacing":new dt(H.layout_symbol["text-letter-spacing"]),"text-justify":new dt(H.layout_symbol["text-justify"]),"text-radial-offset":new dt(H.layout_symbol["text-radial-offset"]),"text-variable-anchor":new xt(H.layout_symbol["text-variable-anchor"]),"text-anchor":new dt(H.layout_symbol["text-anchor"]),"text-max-angle":new xt(H.layout_symbol["text-max-angle"]),"text-writing-mode":new xt(H.layout_symbol["text-writing-mode"]),"text-rotate":new dt(H.layout_symbol["text-rotate"]),"text-padding":new xt(H.layout_symbol["text-padding"]),"text-keep-upright":new xt(H.layout_symbol["text-keep-upright"]),"text-transform":new dt(H.layout_symbol["text-transform"]),"text-offset":new dt(H.layout_symbol["text-offset"]),"text-allow-overlap":new xt(H.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new xt(H.layout_symbol["text-ignore-placement"]),"text-optional":new xt(H.layout_symbol["text-optional"])}),Yh={paint:new Ki({"icon-opacity":new dt(H.paint_symbol["icon-opacity"]),"icon-color":new dt(H.paint_symbol["icon-color"]),"icon-halo-color":new dt(H.paint_symbol["icon-halo-color"]),"icon-halo-width":new dt(H.paint_symbol["icon-halo-width"]),"icon-halo-blur":new dt(H.paint_symbol["icon-halo-blur"]),"icon-translate":new xt(H.paint_symbol["icon-translate"]),"icon-translate-anchor":new xt(H.paint_symbol["icon-translate-anchor"]),"text-opacity":new dt(H.paint_symbol["text-opacity"]),"text-color":new dt(H.paint_symbol["text-color"],{runtimeType:Je,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new dt(H.paint_symbol["text-halo-color"]),"text-halo-width":new dt(H.paint_symbol["text-halo-width"]),"text-halo-blur":new dt(H.paint_symbol["text-halo-blur"]),"text-translate":new xt(H.paint_symbol["text-translate"]),"text-translate-anchor":new xt(H.paint_symbol["text-translate-anchor"])}),layout:Wh},ch=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:tt,this.defaultValue=e};ch.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},ch.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},ch.prototype.outputDefined=function(){return!1},ch.prototype.serialize=function(){return null},at("FormatSectionOverride",ch,{omit:["defaultValue"]});var qm=function(e){function t(i){e.call(this,i,Yh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],x=0,I=p;x<I.length;x+=1){var C=I[x];d.indexOf(C)<0&&d.push(C)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var x=this.layout.get(i).evaluate(l,{},p,d),I=this._unevaluatedLayout._values[i];return I.isDataDriven()||ia(I.value)||!x?x:function(C,L){return L.replace(/{([^{}]+)}/g,function(O,U){return U in C?String(C[U]):""})}(l.properties,x)},t.prototype.createBucket=function(i){return new $r(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=Yh.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,x=this.paint.get(p),I=new ch(x),C=new ca(I,x.property.specification);d=x.value.kind==="constant"||x.value.kind==="source"?new Ko("source",C):new hs("composite",C,x.value.zoomStops,x.value._interpolationType),this.paint._values[p]=new na(x.property,d,x.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=Yh.paint.properties[l],x=!1,I=function(O){for(var U=0,K=O;U<K.length;U+=1)if(d.overrides&&d.overrides.hasOverride(K[U]))return void(x=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Hr)I(p.value.value.sections);else if(p.value.kind==="source"){var C=function(O){x||(O instanceof hi&&ur(O.value)===ir?I(O.value.sections):O instanceof Ci?I(O.sections):O.eachChild(C))},L=p.value;L._styleExpression&&C(L._styleExpression.expression)}return x},t}(Wo),hh={paint:new Ki({"background-color":new xt(H.paint_background["background-color"]),"background-pattern":new Gi(H.paint_background["background-pattern"]),"background-opacity":new xt(H.paint_background["background-opacity"])})},jm=function(e){function t(i){e.call(this,i,hh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Wo),rc={paint:new Ki({"raster-opacity":new xt(H.paint_raster["raster-opacity"]),"raster-hue-rotate":new xt(H.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new xt(H.paint_raster["raster-brightness-min"]),"raster-brightness-max":new xt(H.paint_raster["raster-brightness-max"]),"raster-saturation":new xt(H.paint_raster["raster-saturation"]),"raster-contrast":new xt(H.paint_raster["raster-contrast"]),"raster-resampling":new xt(H.paint_raster["raster-resampling"]),"raster-fade-duration":new xt(H.paint_raster["raster-fade-duration"])})},su=function(e){function t(i){e.call(this,i,rc)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Wo),Cc=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(Wo),Zm={circle:cp,heatmap:Hp,hillshade:dm,fill:Sc,"fill-extrusion":eu,line:Tm,symbol:qm,background:jm,raster:su},ph=q.HTMLImageElement,my=q.HTMLCanvasElement,fd=q.HTMLVideoElement,fh=q.ImageData,ic=q.ImageBitmap,Dc=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};Dc.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),x=this.context,I=x.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof ph||e instanceof my||e instanceof fd||e instanceof fh||ic&&e instanceof ic?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,e):I.texImage2D(I.TEXTURE_2D,0,this.format,l,p,0,this.format,I.UNSIGNED_BYTE,e.data);else{var C=i||{x:0,y:0},L=C.x,O=C.y;e instanceof ph||e instanceof my||e instanceof fd||e instanceof fh||ic&&e instanceof ic?I.texSubImage2D(I.TEXTURE_2D,0,L,O,I.RGBA,I.UNSIGNED_BYTE,e):I.texSubImage2D(I.TEXTURE_2D,0,L,O,l,p,I.RGBA,I.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)},Dc.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},Dc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Dc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Mc=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Mc.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Mc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var nc=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},vr(["receive","process"],this),this.invoker=new Mc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=rr()?e:q};function dd(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}nc.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[x]=i);var I=zr(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:Xn(t,I)},I),{cancel:function(){i&&delete d.callbacks[x],d.target.postMessage({id:x,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},nc.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else rr()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},nc.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},nc.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(bn(t.error)):l(null,bn(t.data)))}else{var p=!1,d=zr(this.globalScope)?void 0:[],x=t.hasCallback?function(O,U){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:O?Xn(O):null,data:Xn(U,d)},d)}:function(O){p=!0},I=null,C=bn(t.data);if(this.parent[t.type])I=this.parent[t.type](t.sourceMapId,C,x);else if(this.parent.getWorkerSource){var L=t.type.split(".");I=this.parent.getWorkerSource(t.sourceMapId,L[0],C.source)[L[1]](C,x)}else x(new Error("Could not find function "+t.type));!p&&I&&I.cancel&&(this.cancelCallbacks[e]=I.cancel)}},nc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Yn=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Yn.prototype.setNorthEast=function(e){return this._ne=e instanceof ei?new ei(e.lng,e.lat):ei.convert(e),this},Yn.prototype.setSouthWest=function(e){return this._sw=e instanceof ei?new ei(e.lng,e.lat):ei.convert(e),this},Yn.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof ei)t=e,i=e;else{if(!(e instanceof Yn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Yn.convert(e)):this.extend(ei.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new ei(t.lng,t.lat),this._ne=new ei(i.lng,i.lat)),this},Yn.prototype.getCenter=function(){return new ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Yn.prototype.getSouthWest=function(){return this._sw},Yn.prototype.getNorthEast=function(){return this._ne},Yn.prototype.getNorthWest=function(){return new ei(this.getWest(),this.getNorth())},Yn.prototype.getSouthEast=function(){return new ei(this.getEast(),this.getSouth())},Yn.prototype.getWest=function(){return this._sw.lng},Yn.prototype.getSouth=function(){return this._sw.lat},Yn.prototype.getEast=function(){return this._ne.lng},Yn.prototype.getNorth=function(){return this._ne.lat},Yn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Yn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Yn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Yn.prototype.contains=function(e){var t=ei.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},Yn.convert=function(e){return!e||e instanceof Yn?e:new Yn(e)};var ei=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ei.prototype.wrap=function(){return new ei(Be(this.lng,-180,180),this.lat)},ei.prototype.toArray=function(){return[this.lng,this.lat]},ei.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ei.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},ei.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Yn(new ei(this.lng-i,this.lat-t),new ei(this.lng+i,this.lat+t))},ei.convert=function(e){if(e instanceof ei)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new ei(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new ei(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var md=2*Math.PI*63710088e-1;function Cu(e){return md*Math.cos(e*Math.PI/180)}function Ol(e){return(180+e)/360}function ac(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function yd(e,t){return e/Cu(t)}function Lc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Jh=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};Jh.fromLngLat=function(e,t){t===void 0&&(t=0);var i=ei.convert(e);return new Jh(Ol(i.lng),ac(i.lat),yd(t,i.lat))},Jh.prototype.toLngLat=function(){return new ei(360*this.x-180,Lc(this.y))},Jh.prototype.toAltitude=function(){return this.z*Cu(Lc(this.y))},Jh.prototype.meterInMercatorCoordinateUnits=function(){return 1/md*(e=Lc(this.y),1/Math.cos(e*Math.PI/180));var e};var Rc=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Qh(0,e,e,t,i)};Rc.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Rc.prototype.url=function(e,t){var i,l,p,d,x,I=(l=this.y,p=this.z,d=dd(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),x=dd(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+x[0]+","+x[1]),C=function(L,O,U){for(var K,W="",ae=L;ae>0;ae--)W+=(O&(K=1<<ae-1)?1:0)+(U&K?2:0);return W}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",I)},Rc.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new V(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Rc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var dh=function(e,t){this.wrap=e,this.canonical=t,this.key=Qh(e,t.z,t.z,t.x,t.y)},rn=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new Rc(i,+l,+p),this.key=Qh(t,e,i,l,p)};function Qh(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}rn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},rn.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new rn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rn(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},rn.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?Qh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Qh(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},rn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},rn.prototype.children=function(e){if(this.overscaledZ>=e)return[new rn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new rn(t,this.wrap,t,i,l),new rn(t,this.wrap,t,i+1,l),new rn(t,this.wrap,t,i,l+1),new rn(t,this.wrap,t,i+1,l+1)]},rn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},rn.prototype.wrapped=function(){return new rn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},rn.prototype.unwrapTo=function(e){return new rn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},rn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},rn.prototype.toUnwrapped=function(){return new dh(this.wrap,this.canonical)},rn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},rn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Jh(e.x-this.wrap,e.y))},at("CanonicalTileID",Rc),at("OverscaledTileID",rn,{omit:["posMatrix"]});var qs=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Nt('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};qs.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},qs.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},qs.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},qs.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},qs.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},qs.prototype.getPixels=function(){return new ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},qs.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,x=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=x-1;break;case 1:x=d+1}for(var I=-t*this.dim,C=-i*this.dim,L=d;L<x;L++)for(var O=l;O<p;O++)this.data[this._idx(O,L)]=e.data[this._idx(O+I,L+C)]},at("DEMData",qs);var mh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};mh.prototype.encode=function(e){return this._stringToNumber[e]},mh.prototype.decode=function(e){return this._numberToString[e]};var wp=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},lf={geometry:{configurable:!0}};lf.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},lf.geometry.set=function(e){this._geometry=e},wp.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(wp.prototype,lf);var Vl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Vl.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},Fe(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var x in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][x]===null&&delete this.deletedStates[e][l][x]},Vl.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},Vl.prototype.getState=function(e,t){var i=String(t),l=Fe({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},Vl.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Vl.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),Fe(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var I={};if(this.deletedStates[x]===null)for(var C in this.state[x])I[C]={},this.state[x][C]={};else for(var L in this.deletedStates[x]){if(this.deletedStates[x][L]===null)this.state[x][L]={};else for(var O=0,U=Object.keys(this.deletedStates[x][L]);O<U.length;O+=1)delete this.state[x][L][U[O]];I[L]=this.state[x][L]}i[x]=i[x]||{},Fe(i[x],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var K in e)e[K].setFeatureState(i,t)};var Du=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Hn(8192,16,0),this.grid3D=new Hn(8192,16,0),this.featureIndexArray=new Z,this.promoteId=t};function Mu(e,t,i,l,p){return lr(e,function(d,x){var I=t instanceof Bs?t.get(x):null;return I&&I.evaluate?I.evaluate(i,l,p):I})}function Fl(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,x=e;d<x.length;d+=1){var I=x[d];t=Math.min(t,I.x),i=Math.min(i,I.y),l=Math.max(l,I.x),p=Math.max(p,I.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Bc(e,t){return t-e}Du.prototype.insert=function(e,t,i,l,p,d){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var I=d?this.grid3D:this.grid,C=0;C<t.length;C++){for(var L=t[C],O=[1/0,1/0,-1/0,-1/0],U=0;U<L.length;U++){var K=L[U];O[0]=Math.min(O[0],K.x),O[1]=Math.min(O[1],K.y),O[2]=Math.max(O[2],K.x),O[3]=Math.max(O[3],K.y)}O[0]<8192&&O[1]<8192&&O[2]>=0&&O[3]>=0&&I.insert(x,O[0],O[1],O[2],O[3])}},Du.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ic.VectorTile(new Ac(this.rawTileData)).layers,this.sourceLayerCoder=new mh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Du.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},x=8192/e.tileSize/e.scale,I=Va(d.filter),C=e.queryGeometry,L=e.queryPadding*x,O=Fl(C),U=this.grid.query(O.minX-L,O.minY-L,O.maxX+L,O.maxY+L),K=Fl(e.cameraQueryGeometry),W=this.grid3D.query(K.minX-L,K.minY-L,K.maxX+L,K.maxY+L,function(Me,Oe,je,Xe){return function(Qe,St,lt,_t,st){for(var Zt=0,Lt=Qe;Zt<Lt.length;Zt+=1){var yt=Lt[Zt];if(St<=yt.x&&lt<=yt.y&&_t>=yt.x&&st>=yt.y)return!0}var cr=[new V(St,lt),new V(St,st),new V(_t,st),new V(_t,lt)];if(Qe.length>2){for(var Gt=0,ar=cr;Gt<ar.length;Gt+=1)if(Yl(Qe,ar[Gt]))return!0}for(var Pt=0;Pt<Qe.length-1;Pt++)if(_c(Qe[Pt],Qe[Pt+1],cr))return!0;return!1}(e.cameraQueryGeometry,Me-L,Oe-L,je+L,Xe+L)}),ae=0,ue=W;ae<ue.length;ae+=1)U.push(ue[ae]);U.sort(Bc);for(var ge,de={},Se=function(Me){var Oe=U[Me];if(Oe!==ge){ge=Oe;var je=p.featureIndexArray.get(Oe),Xe=null;p.loadMatchingFeature(de,je.bucketIndex,je.sourceLayerIndex,je.featureIndex,I,d.layers,d.availableImages,t,i,l,function(Qe,St,lt){return Xe||(Xe=gi(Qe)),St.queryIntersectsFeature(C,Qe,lt,Xe,p.z,e.transform,x,e.pixelPosMatrix)})}},Pe=0;Pe<U.length;Pe++)Se(Pe);return de},Du.prototype.loadMatchingFeature=function(e,t,i,l,p,d,x,I,C,L,O){var U=this.bucketLayerIDs[t];if(!d||function(Qe,St){for(var lt=0;lt<Qe.length;lt++)if(St.indexOf(Qe[lt])>=0)return!0;return!1}(d,U)){var K=this.sourceLayerCoder.decode(i),W=this.vtLayers[K].feature(l);if(p.needGeometry){var ae=En(W,!0);if(!p.filter(new tr(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!p.filter(new tr(this.tileID.overscaledZ),W))return;for(var ue=this.getId(W,K),ge=0;ge<U.length;ge++){var de=U[ge];if(!(d&&d.indexOf(de)<0)){var Se=I[de];if(Se){var Pe={};ue!==void 0&&L&&(Pe=L.getState(Se.sourceLayer||"_geojsonTileLayer",ue));var Me=Fe({},C[de]);Me.paint=Mu(Me.paint,Se.paint,W,Pe,x),Me.layout=Mu(Me.layout,Se.layout,W,Pe,x);var Oe=!O||O(W,Se,Pe);if(Oe){var je=new wp(W,this.z,this.x,this.y,ue);je.layer=Me;var Xe=e[de];Xe===void 0&&(Xe=e[de]=[]),Xe.push({featureIndex:l,feature:je,intersectionZ:Oe})}}}}}},Du.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,x,I){var C={};this.loadVTLayers();for(var L=Va(p),O=0,U=e;O<U.length;O+=1)this.loadMatchingFeature(C,i,l,U[O],L,d,x,I,t);return C},Du.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},Du.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},at("FeatureIndex",Du,{omit:["rawTileData","sourceLayerCoder"]});var ga=function(e,t){this.tileID=e,this.uid=Ct(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ga.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Ra.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},ga.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ga.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(L,O){var U={};if(!O)return U;for(var K=function(){var ue=ae[W],ge=ue.layerIds.map(function(Pe){return O.getLayer(Pe)}).filter(Boolean);if(ge.length!==0){ue.layers=ge,ue.stateDependentLayerIds&&(ue.stateDependentLayers=ue.stateDependentLayerIds.map(function(Pe){return ge.filter(function(Me){return Me.id===Pe})[0]}));for(var de=0,Se=ge;de<Se.length;de+=1)U[Se[de].id]=ue}},W=0,ae=L;W<ae.length;W+=1)K();return U}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof $r){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var x=this.buckets[d];if(x instanceof $r&&x.hasRTLText){this.hasRTLText=!0,xn.isLoading()||xn.isLoaded()||ol()!=="deferred"||Ln();break}}for(var I in this.queryPadding=0,this.buckets){var C=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(I).queryRadius(C))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},ga.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ga.prototype.getBucket=function(e){return this.buckets[e.id]},ga.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Dc(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Dc(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},ga.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},ga.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,x,I,C,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:L,transform:I,params:x,queryPadding:this.queryPadding*C},e,t,i):{}},ga.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var x=Va(t&&t.filter),I=this.tileID.canonical,C=I.z,L=I.x,O=I.y,U={z:C,x:L,y:O},K=0;K<d.length;K++){var W=d.feature(K);if(x.needGeometry){var ae=En(W,!0);if(!x.filter(new tr(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!x.filter(new tr(this.tileID.overscaledZ),W))continue;var ue=i.getId(W,p),ge=new wp(W,C,L,O,ue);ge.tile=U,e.push(ge)}}},ga.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ga.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ga.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=wr(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ga.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ga.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",x=i[d],I=e[d];if(x&&I&&Object.keys(I).length!==0){p.update(I,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=t&&t.style&&t.style.getLayer(l);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(p)))}}}},ga.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ga.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ra.now()},ga.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ga.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Ra.now()+e},ga.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},ga.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,x=t;d<x.length;d+=1)if(p[x[d]])return!0}}return!1};var hl=q.performance,yy=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},hl.mark(this._marks.start)};yy.prototype.finish=function(){hl.mark(this._marks.end);var e=hl.getEntriesByName(this._marks.measure);return e.length===0&&(hl.measure(this._marks.measure,this._marks.start,this._marks.end),e=hl.getEntriesByName(this._marks.measure),hl.clearMarks(this._marks.start),hl.clearMarks(this._marks.end),hl.clearMeasures(this._marks.measure)),e},o.Actor=nc,o.AlphaImage=bc,o.CanonicalTileID=Rc,o.CollisionBoxArray=s,o.Color=jt,o.DEMData=qs,o.DataConstantProperty=xt,o.DictionaryCoder=mh,o.EXTENT=8192,o.ErrorEvent=ve,o.EvaluationParameters=tr,o.Event=se,o.Evented=be,o.FeatureIndex=Du,o.FillBucket=Us,o.FillExtrusionBucket=Cl,o.ImageAtlas=zc,o.ImagePosition=yp,o.LineBucket=fo,o.LngLat=ei,o.LngLatBounds=Yn,o.MercatorCoordinate=Jh,o.ONE_EM=24,o.OverscaledTileID=rn,o.Point=V,o.Point$1=V,o.Properties=Ki,o.Protobuf=Ac,o.RGBAImage=ya,o.RequestManager=Yi,o.RequestPerformance=yy,o.ResourceType=Bo,o.SegmentVector=J,o.SourceFeatureState=Vl,o.StructArrayLayout1ui2=ul,o.StructArrayLayout2f1f2i16=ma,o.StructArrayLayout2i4=sl,o.StructArrayLayout3ui6=uo,o.StructArrayLayout4i8=ll,o.SymbolBucket=$r,o.Texture=Dc,o.Tile=ga,o.Transitionable=vi,o.Uniform1f=He,o.Uniform1i=Ze,o.Uniform2f=Ke,o.Uniform3f=ut,o.Uniform4f=vt,o.UniformColor=Et,o.UniformMatrix4f=hr,o.UnwrappedTileID=dh,o.ValidationError=ne,o.WritingMode=Ts,o.ZoomHistory=al,o.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},o.addDynamicAttributes=sf,o.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(x,I){t(x,function(C,L){C&&(d=C),p[I]=L,--l==0&&i(d,p)})})},o.bezier=he,o.bindAll=vr,o.browser=Ra,o.cacheEntryPossiblyAdded=function(e){++Tn>Ga&&(e.getActor().send("enforceCacheSizeLimit",ln),Tn=0)},o.clamp=Ee,o.clearTileCache=function(e){var t=q.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},o.clipLine=Pu,o.clone=function(e){var t=new Or(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.clone$1=kt,o.clone$2=function(e){var t=new Or(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.collisionCircleLayout=dy,o.config=Er,o.create=function(){var e=new Or(16);return Or!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},o.create$1=function(){var e=new Or(9);return Or!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},o.create$2=function(){var e=new Or(4);return Or!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},o.createCommonjsModule=A,o.createExpression=Ku,o.createLayout=Hi,o.createStyleLayer=function(e){return e.type==="custom"?new Cc(e):new Zm[e.type](e)},o.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],x=i[0],I=i[1],C=i[2];return e[0]=p*C-d*I,e[1]=d*x-l*C,e[2]=l*I-p*x,e},o.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.ease=ke,o.emitValidationErrors=To,o.endsWith=pr,o.enforceCacheSizeLimit=function(e){ci(),xi&&xi.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},o.evaluateSizeForFeature=nu,o.evaluateSizeForZoom=ad,o.evaluateVariableOffset=cd,o.evented=vs,o.extend=Fe,o.featureFilter=Va,o.filterObject=bt,o.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.getAnchorAlignment=Rl,o.getAnchorJustification=of,o.getArrayBuffer=wi,o.getImage=G,o.getJSON=function(e,t){return sa(Fe(e,{type:"json"}),t)},o.getRTLTextPluginStatus=ol,o.getReferrer=Qn,o.getVideo=function(e,t){var i,l,p=q.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var x=q.document.createElement("source");i=e[d],l=void 0,(l=q.document.createElement("a")).href=i,(l.protocol!==q.document.location.protocol||l.host!==q.document.location.host)&&(p.crossOrigin="Anonymous"),x.src=e[d],p.appendChild(x)}return{cancel:function(){}}},o.identity=Yo,o.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],x=t[4],I=t[5],C=t[6],L=t[7],O=t[8],U=t[9],K=t[10],W=t[11],ae=t[12],ue=t[13],ge=t[14],de=t[15],Se=i*I-l*x,Pe=i*C-p*x,Me=i*L-d*x,Oe=l*C-p*I,je=l*L-d*I,Xe=p*L-d*C,Qe=O*ue-U*ae,St=O*ge-K*ae,lt=O*de-W*ae,_t=U*ge-K*ue,st=U*de-W*ue,Zt=K*de-W*ge,Lt=Se*Zt-Pe*st+Me*_t+Oe*lt-je*St+Xe*Qe;return Lt?(e[0]=(I*Zt-C*st+L*_t)*(Lt=1/Lt),e[1]=(p*st-l*Zt-d*_t)*Lt,e[2]=(ue*Xe-ge*je+de*Oe)*Lt,e[3]=(K*je-U*Xe-W*Oe)*Lt,e[4]=(C*lt-x*Zt-L*St)*Lt,e[5]=(i*Zt-p*lt+d*St)*Lt,e[6]=(ge*Me-ae*Xe-de*Pe)*Lt,e[7]=(O*Xe-K*Me+W*Pe)*Lt,e[8]=(x*st-I*lt+L*Qe)*Lt,e[9]=(l*lt-i*st-d*Qe)*Lt,e[10]=(ae*je-ue*Me+de*Se)*Lt,e[11]=(U*Me-O*je-W*Se)*Lt,e[12]=(I*St-x*_t-C*Qe)*Lt,e[13]=(i*_t-l*St+p*Qe)*Lt,e[14]=(ue*Pe-ae*Oe-ge*Se)*Lt,e[15]=(O*Oe-U*Pe+K*Se)*Lt,e):null},o.isChar=me,o.isMapboxURL=Zr,o.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},o.makeRequest=sa,o.mapObject=lr,o.mercatorXfromLng=Ol,o.mercatorYfromLat=ac,o.mercatorZfromAltitude=yd,o.mul=Gp,o.multiply=oa,o.mvt=Ic,o.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},o.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},o.number=ji,o.offscreenCanvasSupported=wa,o.ortho=function(e,t,i,l,p,d,x){var I=1/(t-i),C=1/(l-p),L=1/(d-x);return e[0]=-2*I,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*C,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*L,e[11]=0,e[12]=(t+i)*I,e[13]=(p+l)*C,e[14]=(x+d)*L,e[15]=1,e},o.parseGlyphPBF=function(e){return new Ac(e).readFields(ov,[])},o.pbf=Ac,o.performSymbolLayout=function(e,t,i,l,p,d,x){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var I=e.layers[0].layout,C=e.layers[0]._unevaluatedLayout._values,L={};if(e.textSizeData.kind==="composite"){var O=e.textSizeData,U=O.maxZoom;L.compositeTextSizes=[C["text-size"].possiblyEvaluate(new tr(O.minZoom),x),C["text-size"].possiblyEvaluate(new tr(U),x)]}if(e.iconSizeData.kind==="composite"){var K=e.iconSizeData,W=K.maxZoom;L.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new tr(K.minZoom),x),C["icon-size"].possiblyEvaluate(new tr(W),x)]}L.layoutTextSize=C["text-size"].possiblyEvaluate(new tr(e.zoom+1),x),L.layoutIconSize=C["icon-size"].possiblyEvaluate(new tr(e.zoom+1),x),L.textMaxSize=C["text-size"].possiblyEvaluate(new tr(18));for(var ae=24*I.get("text-line-height"),ue=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",ge=I.get("text-keep-upright"),de=I.get("text-size"),Se=function(){var Oe=Me[Pe],je=I.get("text-font").evaluate(Oe,{},x).join(","),Xe=de.evaluate(Oe,{},x),Qe=L.layoutTextSize.evaluate(Oe,{},x),St=L.layoutIconSize.evaluate(Oe,{},x),lt={horizontal:{},vertical:void 0},_t=Oe.text,st=[0,0];if(_t){var Zt=_t.toString(),Lt=24*I.get("text-letter-spacing").evaluate(Oe,{},x),yt=function(fr){for(var Ur=0,Mr=fr;Ur<Mr.length;Ur+=1)if(Ar=Mr[Ur].charCodeAt(0),me.Arabic(Ar)||me["Arabic Supplement"](Ar)||me["Arabic Extended-A"](Ar)||me["Arabic Presentation Forms-A"](Ar)||me["Arabic Presentation Forms-B"](Ar))return!1;var Ar;return!0}(Zt)?Lt:0,cr=I.get("text-anchor").evaluate(Oe,{},x),Gt=I.get("text-variable-anchor");if(!Gt){var ar=I.get("text-radial-offset").evaluate(Oe,{},x);st=ar?cd(cr,[24*ar,af]):I.get("text-offset").evaluate(Oe,{},x).map(function(fr){return 24*fr})}var Pt=ue?"center":I.get("text-justify").evaluate(Oe,{},x),Tr=I.get("symbol-placement"),Ti=Tr==="point"?24*I.get("text-max-width").evaluate(Oe,{},x):0,fn=function(){e.allowVerticalPlacement&&gt(Zt)&&(lt.vertical=vp(_t,t,i,p,je,Ti,ae,cr,"left",yt,st,Ts.vertical,!0,Tr,Qe,Xe))};if(!ue&&Gt){for(var Ai=Pt==="auto"?Gt.map(function(fr){return of(fr)}):[Pt],Ri=!1,dn=0;dn<Ai.length;dn++){var jr=Ai[dn];if(!lt.horizontal[jr])if(Ri)lt.horizontal[jr]=lt.horizontal[0];else{var Bi=vp(_t,t,i,p,je,Ti,ae,"center",jr,yt,st,Ts.horizontal,!1,Tr,Qe,Xe);Bi&&(lt.horizontal[jr]=Bi,Ri=Bi.positionedLines.length===1)}}fn()}else{Pt==="auto"&&(Pt=of(cr));var nn=vp(_t,t,i,p,je,Ti,ae,cr,Pt,yt,st,Ts.horizontal,!1,Tr,Qe,Xe);nn&&(lt.horizontal[Pt]=nn),fn(),gt(Zt)&&ue&&ge&&(lt.vertical=vp(_t,t,i,p,je,Ti,ae,cr,Pt,yt,st,Ts.vertical,!1,Tr,Qe,Xe))}}var an=void 0,Qa=!1;if(Oe.icon&&Oe.icon.name){var Oi=l[Oe.icon.name];Oi&&(an=function(fr,Ur,Mr){var Ar=Rl(Mr),_a=Ur[0]-fr.displaySize[0]*Ar.horizontalAlign,ba=Ur[1]-fr.displaySize[1]*Ar.verticalAlign;return{image:fr,top:ba,bottom:ba+fr.displaySize[1],left:_a,right:_a+fr.displaySize[0]}}(p[Oe.icon.name],I.get("icon-offset").evaluate(Oe,{},x),I.get("icon-anchor").evaluate(Oe,{},x)),Qa=Oi.sdf,e.sdfIcons===void 0?e.sdfIcons=Oi.sdf:e.sdfIcons!==Oi.sdf&&Nt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Oi.pixelRatio!==e.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var ja=pd(lt.horizontal)||lt.vertical;e.iconsInText=!!ja&&ja.iconsInText,(ja||an)&&function(fr,Ur,Mr,Ar,_a,ba,zi,On,Vn,Lr,mo){var Jn=ba.textMaxSize.evaluate(Ur,{});Jn===void 0&&(Jn=zi);var Lo,Sn=fr.layers[0].layout,As=Sn.get("icon-offset").evaluate(Ur,{},mo),lu=pd(Mr.horizontal),yh=zi/24,Nl=fr.tilePixelRatio*yh,uu=fr.tilePixelRatio*Jn/24,Lu=fr.tilePixelRatio*On,cu=fr.tilePixelRatio*Sn.get("symbol-spacing"),vh=Sn.get("text-padding")*fr.tilePixelRatio,gh=Sn.get("icon-padding")*fr.tilePixelRatio,$h=Sn.get("text-max-angle")/180*Math.PI,Ru=Sn.get("text-rotation-alignment")==="map"&&Sn.get("symbol-placement")!=="point",Ep=Sn.get("icon-rotation-alignment")==="map"&&Sn.get("symbol-placement")!=="point",Ul=Sn.get("symbol-placement"),ep=cu/2,js=Sn.get("icon-text-fit");Ar&&js!=="none"&&(fr.allowVerticalPlacement&&Mr.vertical&&(Lo=nd(Ar,Mr.vertical,js,Sn.get("icon-text-fit-padding"),As,yh)),lu&&(Ar=nd(Ar,lu,js,Sn.get("icon-text-fit-padding"),As,yh)));var yo=function(np,ap){ap.x<0||ap.x>=8192||ap.y<0||ap.y>=8192||function(Vi,Zs,Km,lc,uc,Hm,op,Ro,cc,Gs,Vc,Ip,hf,Fc,Ks,gd,Tp,pf,_d,sp,Cs,Ap,dl,vo,hu){var hc,Nc,pu,zp,wh,fu=Vi.addToLineVertexArray(Zs,Km),Eh=0,bd=0,Sh=0,Pp=0,ff=-1,df=-1,Ds={},xd=ie(""),du=0,ml=0;if(Ro._unevaluatedLayout.getValue("text-radial-offset")===void 0?(du=(hc=Ro.layout.get("text-offset").evaluate(Cs,{},vo).map(function(Fu){return 24*Fu}))[0],ml=hc[1]):(du=24*Ro.layout.get("text-radial-offset").evaluate(Cs,{},vo),ml=af),Vi.allowVerticalPlacement&&lc.vertical){var pc=Ro.layout.get("text-rotate").evaluate(Cs,{},vo)+90;zp=new bp(cc,Zs,Gs,Vc,Ip,lc.vertical,hf,Fc,Ks,pc),op&&(wh=new bp(cc,Zs,Gs,Vc,Ip,op,Tp,pf,Ks,pc))}if(uc){var mf=Ro.layout.get("icon-rotate").evaluate(Cs,{}),kh=Ro.layout.get("icon-text-fit")!=="none",vy=Bl(uc,mf,dl,kh),yf=op?Bl(op,mf,dl,kh):void 0;pu=new bp(cc,Zs,Gs,Vc,Ip,uc,Tp,pf,!1,mf),Eh=4*vy.length;var Ih=Vi.iconSizeData,Vu=null;Ih.kind==="source"?(Vu=[128*Ro.layout.get("icon-size").evaluate(Cs,{})])[0]>32640&&Nt(Vi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Ih.kind==="composite"&&((Vu=[128*Ap.compositeIconSizes[0].evaluate(Cs,{},vo),128*Ap.compositeIconSizes[1].evaluate(Cs,{},vo)])[0]>32640||Vu[1]>32640)&&Nt(Vi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Vi.addSymbols(Vi.icon,vy,Vu,sp,_d,Cs,!1,Zs,fu.lineStartIndex,fu.lineLength,-1,vo),ff=Vi.icon.placedSymbolArray.length-1,yf&&(bd=4*yf.length,Vi.addSymbols(Vi.icon,yf,Vu,sp,_d,Cs,Ts.vertical,Zs,fu.lineStartIndex,fu.lineLength,-1,vo),df=Vi.icon.placedSymbolArray.length-1)}for(var wd in lc.horizontal){var fc=lc.horizontal[wd];if(!Nc){xd=ie(fc.text);var vf=Ro.layout.get("text-rotate").evaluate(Cs,{},vo);Nc=new bp(cc,Zs,Gs,Vc,Ip,fc,hf,Fc,Ks,vf)}var Ed=fc.positionedLines.length===1;if(Sh+=hd(Vi,Zs,fc,Hm,Ro,Ks,Cs,gd,fu,lc.vertical?Ts.horizontal:Ts.horizontalOnly,Ed?Object.keys(lc.horizontal):[wd],Ds,ff,Ap,vo),Ed)break}lc.vertical&&(Pp+=hd(Vi,Zs,lc.vertical,Hm,Ro,Ks,Cs,gd,fu,Ts.vertical,["vertical"],Ds,df,Ap,vo));var Xm=Nc?Nc.boxStartIndex:Vi.collisionBoxArray.length,Th=Nc?Nc.boxEndIndex:Vi.collisionBoxArray.length,Wm=zp?zp.boxStartIndex:Vi.collisionBoxArray.length,gf=zp?zp.boxEndIndex:Vi.collisionBoxArray.length,gy=pu?pu.boxStartIndex:Vi.collisionBoxArray.length,Hs=pu?pu.boxEndIndex:Vi.collisionBoxArray.length,ce=wh?wh.boxStartIndex:Vi.collisionBoxArray.length,qe=wh?wh.boxEndIndex:Vi.collisionBoxArray.length,Ms=-1,dc=function(Fu,Nu){return Fu&&Fu.circleDiameter?Math.max(Fu.circleDiameter,Nu):Nu};Ms=dc(Nc,Ms),Ms=dc(zp,Ms),Ms=dc(pu,Ms);var Ah=(Ms=dc(wh,Ms))>-1?1:0;Ah&&(Ms*=hu/24),Vi.glyphOffsetArray.length>=$r.MAX_GLYPHS&&Nt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cs.sortKey!==void 0&&Vi.addToSortKeyRanges(Vi.symbolInstances.length,Cs.sortKey),Vi.symbolInstances.emplaceBack(Zs.x,Zs.y,Ds.right>=0?Ds.right:-1,Ds.center>=0?Ds.center:-1,Ds.left>=0?Ds.left:-1,Ds.vertical||-1,ff,df,xd,Xm,Th,Wm,gf,gy,Hs,ce,qe,Gs,Sh,Pp,Eh,bd,Ah,0,hf,du,ml,Ms)}(fr,ap,np,Mr,Ar,_a,Lo,fr.layers[0],fr.collisionBoxArray,Ur.index,Ur.sourceLayerIndex,fr.index,Nl,vh,Ru,Vn,Lu,gh,Ep,As,Ur,ba,Lr,mo,zi)};if(Ul==="line")for(var pl=0,Sp=Pu(Ur.geometry,0,0,8192,8192);pl<Sp.length;pl+=1)for(var oc=Sp[pl],uf=0,tp=Qo(oc,cu,$h,Mr.vertical||lu,Ar,24,uu,fr.overscaling,8192);uf<tp.length;uf+=1){var sc=tp[uf];lu&&Vm(fr,lu.text,ep,sc)||yo(oc,sc)}else if(Ul==="line-center")for(var Bu=0,rp=Ur.geometry;Bu<rp.length;Bu+=1){var Ou=rp[Bu];if(Ou.length>1){var _h=Rm(Ou,$h,Mr.vertical||lu,Ar,24,uu);_h&&yo(Ou,_h)}}else if(Ur.type==="Polygon")for(var bh=0,kp=Jp(Ur.geometry,0);bh<kp.length;bh+=1){var ql=kp[bh],ip=Bm(ql,16);yo(ql[0],new sh(ip.x,ip.y,0))}else if(Ur.type==="LineString")for(var zs=0,Ps=Ur.geometry;zs<Ps.length;zs+=1){var fl=Ps[zs];yo(fl,new sh(fl[0].x,fl[0].y,0))}else if(Ur.type==="Point")for(var cf=0,xh=Ur.geometry;cf<xh.length;cf+=1)for(var Gm=0,vd=xh[cf];Gm<vd.length;Gm+=1){var Oc=vd[Gm];yo([Oc],new sh(Oc.x,Oc.y,0))}}(e,Oe,lt,an,l,L,Qe,St,st,Qa,x)},Pe=0,Me=e.features;Pe<Me.length;Pe+=1)Se();d&&e.generateCollisionDebugBuffers()},o.perspective=function(e,t,i,l,p){var d,x=1/Math.tan(t/2);return e[0]=x/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},o.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},o.plugin=xn,o.polygonIntersectsPolygon=Wl,o.postMapLoadEvent=sn,o.postTurnstileEvent=Fr,o.potpack=nh,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=at,o.registerForPluginStateChange=function(e){return e({pluginStatus:Mi,pluginURL:Fa}),vs.on("pluginStateChange",e),e},o.renderColorRamp=Xf,o.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],x=t[3],I=Math.sin(i),C=Math.cos(i);return e[0]=l*C+d*I,e[1]=p*C+x*I,e[2]=l*-I+d*C,e[3]=p*-I+x*C,e},o.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],x=t[5],I=t[6],C=t[7],L=t[8],O=t[9],U=t[10],K=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+L*l,e[5]=x*p+O*l,e[6]=I*p+U*l,e[7]=C*p+K*l,e[8]=L*p-d*l,e[9]=O*p-x*l,e[10]=U*p-I*l,e[11]=K*p-C*l,e},o.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],x=t[1],I=t[2],C=t[3],L=t[4],O=t[5],U=t[6],K=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+L*l,e[1]=x*p+O*l,e[2]=I*p+U*l,e[3]=C*p+K*l,e[4]=L*p-d*l,e[5]=O*p-x*l,e[6]=U*p-I*l,e[7]=K*p-C*l,e},o.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},o.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},o.setCacheLimits=function(e,t){ln=e,Ga=t},o.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),Mi==="deferred"||Mi==="loading"||Mi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Fa=Ra.resolveURL(e),Mi="deferred",ys=t,Ho(),i||Ln()},o.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},o.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},o.styleSpec=H,o.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},o.symbolSize=rf,o.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},o.transformMat4=Rh,o.translate=function(e,t,i){var l,p,d,x,I,C,L,O,U,K,W,ae,ue=i[0],ge=i[1],de=i[2];return t===e?(e[12]=t[0]*ue+t[4]*ge+t[8]*de+t[12],e[13]=t[1]*ue+t[5]*ge+t[9]*de+t[13],e[14]=t[2]*ue+t[6]*ge+t[10]*de+t[14],e[15]=t[3]*ue+t[7]*ge+t[11]*de+t[15]):(p=t[1],d=t[2],x=t[3],I=t[4],C=t[5],L=t[6],O=t[7],U=t[8],K=t[9],W=t[10],ae=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=x,e[4]=I,e[5]=C,e[6]=L,e[7]=O,e[8]=U,e[9]=K,e[10]=W,e[11]=ae,e[12]=l*ue+I*ge+U*de+t[12],e[13]=p*ue+C*ge+K*de+t[13],e[14]=d*ue+L*ge+W*de+t[14],e[15]=x*ue+O*ge+ae*de+t[15]),e},o.triggerPluginCompletionEvent=Wc,o.uniqueId=Ct,o.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},o.validateLight=Lh,o.validateStyle=oo,o.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},o.vectorTile=Ic,o.version="1.13.2",o.warnOnce=Nt,o.webpSupported=Wi,o.window=q,o.wrap=Be}),_(["./shared"],function(o){function A(N){var G=typeof N;if(G==="number"||G==="boolean"||G==="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var X="[",$=0,se=N;$<se.length;$+=1)X+=A(se[$])+",";return X+"]"}for(var ve=Object.keys(N).sort(),be="{",H=0;H<ve.length;H++)be+=JSON.stringify(ve[H])+":"+A(N[ve[H]])+",";return be+"}"}function z(N){for(var G="",X=0,$=o.refProperties;X<$.length;X+=1)G+="/"+A(N[$[X]]);return G}var F=function(N){this.keyCache={},N&&this.replace(N)};F.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},F.prototype.update=function(N,G){for(var X=this,$=0,se=N;$<se.length;$+=1){var ve=se[$];this._layerConfigs[ve.id]=ve;var be=this._layers[ve.id]=o.createStyleLayer(ve);be._featureFilter=o.featureFilter(be.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(var H=0,ne=G;H<ne.length;H+=1){var Ie=ne[H];delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie]}this.familiesBySource={};for(var Ue=0,Ge=function(We,Je){for(var Kt={},Ye=0;Ye<We.length;Ye++){var Ut=Je&&Je[We[Ye].id]||z(We[Ye]);Je&&(Je[We[Ye].id]=Ut);var ir=Kt[Ut];ir||(ir=Kt[Ut]=[]),ir.push(We[Ye])}var Rt=[];for(var Ht in Kt)Rt.push(Kt[Ht]);return Rt}(o.values(this._layerConfigs),this.keyCache);Ue<Ge.length;Ue+=1){var Le=Ge[Ue].map(function(We){return X._layers[We.id]}),Ne=Le[0];if(Ne.visibility!=="none"){var ct=Ne.source||"",tt=this.familiesBySource[ct];tt||(tt=this.familiesBySource[ct]={});var Ce=Ne.sourceLayer||"_geojsonTileLayer",$e=tt[Ce];$e||($e=tt[Ce]=[]),$e.push(Le)}}};var V=function(N){var G={},X=[];for(var $ in N){var se=N[$],ve=G[$]={};for(var be in se){var H=se[+be];if(H&&H.bitmap.width!==0&&H.bitmap.height!==0){var ne={x:0,y:0,w:H.bitmap.width+2,h:H.bitmap.height+2};X.push(ne),ve[be]={rect:ne,metrics:H.metrics}}}}var Ie=o.potpack(X),Ue=new o.AlphaImage({width:Ie.w||1,height:Ie.h||1});for(var Ge in N){var Le=N[Ge];for(var Ne in Le){var ct=Le[+Ne];if(ct&&ct.bitmap.width!==0&&ct.bitmap.height!==0){var tt=G[Ge][Ne].rect;o.AlphaImage.copy(ct.bitmap,Ue,{x:0,y:0},{x:tt.x+1,y:tt.y+1},ct.bitmap)}}}this.image=Ue,this.positions=G};o.register("GlyphAtlas",V);var j=function(N){this.tileID=new o.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId};function q(N,G,X){for(var $=new o.EvaluationParameters(G),se=0,ve=N;se<ve.length;se+=1)ve[se].recalculate($,X)}function pe(N,G){var X=o.getArrayBuffer(N.request,function($,se,ve,be){$?G($):se&&G(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(se)),rawData:se,cacheControl:ve,expires:be})});return function(){X.cancel(),G()}}j.prototype.parse=function(N,G,X,$,se){var ve=this;this.status="parsing",this.data=N,this.collisionBoxArray=new o.CollisionBoxArray;var be=new o.DictionaryCoder(Object.keys(N.layers).sort()),H=new o.FeatureIndex(this.tileID,this.promoteId);H.bucketLayerIDs=[];var ne,Ie,Ue,Ge,Le={},Ne={featureIndex:H,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},ct=G.familiesBySource[this.source];for(var tt in ct){var Ce=N.layers[tt];if(Ce){Ce.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+tt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var $e=be.encode(tt),We=[],Je=0;Je<Ce.length;Je++){var Kt=Ce.feature(Je),Ye=H.getId(Kt,tt);We.push({feature:Kt,id:Ye,index:Je,sourceLayerIndex:$e})}for(var Ut=0,ir=ct[tt];Ut<ir.length;Ut+=1){var Rt=ir[Ut],Ht=Rt[0];Ht.minzoom&&this.zoom<Math.floor(Ht.minzoom)||Ht.maxzoom&&this.zoom>=Ht.maxzoom||Ht.visibility!=="none"&&(q(Rt,this.zoom,X),(Le[Ht.id]=Ht.createBucket({index:H.bucketLayerIDs.length,layers:Rt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$e,sourceID:this.source})).populate(We,Ne,this.tileID.canonical),H.bucketLayerIDs.push(Rt.map(function(mr){return mr.id})))}}}var Xt=o.mapObject(Ne.glyphDependencies,function(mr){return Object.keys(mr).map(Number)});Object.keys(Xt).length?$.send("getGlyphs",{uid:this.uid,stacks:Xt},function(mr,Ot){ne||(ne=mr,Ie=Ot,sr.call(ve))}):Ie={};var Ui=Object.keys(Ne.iconDependencies);Ui.length?$.send("getImages",{icons:Ui,source:this.source,tileID:this.tileID,type:"icons"},function(mr,Ot){ne||(ne=mr,Ue=Ot,sr.call(ve))}):Ue={};var nr=Object.keys(Ne.patternDependencies);function sr(){if(ne)return se(ne);if(Ie&&Ue&&Ge){var mr=new V(Ie),Ot=new o.ImageAtlas(Ue,Ge);for(var jt in Le){var ii=Le[jt];ii instanceof o.SymbolBucket?(q(ii.layers,this.zoom,X),o.performSymbolLayout(ii,Ie,mr.positions,Ue,Ot.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ii.hasPattern&&(ii instanceof o.LineBucket||ii instanceof o.FillBucket||ii instanceof o.FillExtrusionBucket)&&(q(ii.layers,this.zoom,X),ii.addFeatures(Ne,this.tileID.canonical,Ot.patternPositions))}this.status="done",se(null,{buckets:o.values(Le).filter(function(Sa){return!Sa.isEmpty()}),featureIndex:H,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mr.image,imageAtlas:Ot,glyphMap:this.returnDependencies?Ie:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?mr.positions:null})}}nr.length?$.send("getImages",{icons:nr,source:this.source,tileID:this.tileID,type:"patterns"},function(mr,Ot){ne||(ne=mr,Ge=Ot,sr.call(ve))}):Ge={},sr.call(this)};var he=function(N,G,X,$){this.actor=N,this.layerIndex=G,this.availableImages=X,this.loadVectorData=$||pe,this.loading={},this.loaded={}};he.prototype.loadTile=function(N,G){var X=this,$=N.uid;this.loading||(this.loading={});var se=!!(N&&N.request&&N.request.collectResourceTiming)&&new o.RequestPerformance(N.request),ve=this.loading[$]=new j(N);ve.abort=this.loadVectorData(N,function(be,H){if(delete X.loading[$],be||!H)return ve.status="done",X.loaded[$]=ve,G(be);var ne=H.rawData,Ie={};H.expires&&(Ie.expires=H.expires),H.cacheControl&&(Ie.cacheControl=H.cacheControl);var Ue={};if(se){var Ge=se.finish();Ge&&(Ue.resourceTiming=JSON.parse(JSON.stringify(Ge)))}ve.vectorTile=H.vectorTile,ve.parse(H.vectorTile,X.layerIndex,X.availableImages,X.actor,function(Le,Ne){if(Le||!Ne)return G(Le);G(null,o.extend({rawTileData:ne.slice(0)},Ne,Ie,Ue))}),X.loaded=X.loaded||{},X.loaded[$]=ve})},he.prototype.reloadTile=function(N,G){var X=this,$=this.loaded,se=N.uid,ve=this;if($&&$[se]){var be=$[se];be.showCollisionBoxes=N.showCollisionBoxes;var H=function(ne,Ie){var Ue=be.reloadCallback;Ue&&(delete be.reloadCallback,be.parse(be.vectorTile,ve.layerIndex,X.availableImages,ve.actor,Ue)),G(ne,Ie)};be.status==="parsing"?be.reloadCallback=H:be.status==="done"&&(be.vectorTile?be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,H):H())}},he.prototype.abortTile=function(N,G){var X=this.loading,$=N.uid;X&&X[$]&&X[$].abort&&(X[$].abort(),delete X[$]),G()},he.prototype.removeTile=function(N,G){var X=this.loaded,$=N.uid;X&&X[$]&&delete X[$],G()};var ke=o.window.ImageBitmap,Ee=function(){this.loaded={}};function Be(N,G){if(N.length!==0){Fe(N[0],G);for(var X=1;X<N.length;X++)Fe(N[X],!G)}}function Fe(N,G){for(var X=0,$=0,se=N.length,ve=se-1;$<se;ve=$++)X+=(N[$][0]-N[ve][0])*(N[ve][1]+N[$][1]);X>=0!=!!G&&N.reverse()}Ee.prototype.loadTile=function(N,G){var X=N.uid,$=N.encoding,se=N.rawImageData,ve=ke&&se instanceof ke?this.getImageData(se):se,be=new o.DEMData(X,ve,$);this.loaded=this.loaded||{},this.loaded[X]=be,G(null,be)},Ee.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var G=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:G.width,height:G.height},G.data)},Ee.prototype.removeTile=function(N){var G=this.loaded,X=N.uid;G&&G[X]&&delete G[X]};var Ft=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ct=function(N){this._feature=N,this.extent=o.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))};Ct.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],G=0,X=this._feature.geometry;G<X.length;G+=1){var $=X[G];N.push([new o.Point$1($[0],$[1])])}return N}for(var se=[],ve=0,be=this._feature.geometry;ve<be.length;ve+=1){for(var H=[],ne=0,Ie=be[ve];ne<Ie.length;ne+=1){var Ue=Ie[ne];H.push(new o.Point$1(Ue[0],Ue[1]))}se.push(H)}return se},Ct.prototype.toGeoJSON=function(N,G,X){return Ft.call(this,N,G,X)};var mt=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=N.length,this._features=N};mt.prototype.feature=function(N){return new Ct(this._features[N])};var et=o.vectorTile.VectorTileFeature,vr=pr;function pr(N,G){this.options=G||{},this.features=N,this.length=N.length}function lr(N,G){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=G||4096}pr.prototype.feature=function(N){return new lr(this.features[N],this.options.extent)},lr.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var G=0;G<N.length;G++){for(var X=N[G],$=[],se=0;se<X.length;se++)$.push(new o.Point$1(X[se][0],X[se][1]));this.geometry.push($)}return this.geometry},lr.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,G=1/0,X=-1/0,$=1/0,se=-1/0,ve=0;ve<N.length;ve++)for(var be=N[ve],H=0;H<be.length;H++){var ne=be[H];G=Math.min(G,ne.x),X=Math.max(X,ne.x),$=Math.min($,ne.y),se=Math.max(se,ne.y)}return[G,$,X,se]},lr.prototype.toGeoJSON=et.prototype.toGeoJSON;var bt=Rr,kt=vr;function Rr(N){var G=new o.pbf;return function(X,$){for(var se in X.layers)$.writeMessage(3,Nt,X.layers[se])}(N,G),G.finish()}function Nt(N,G){var X;G.writeVarintField(15,N.version||1),G.writeStringField(1,N.name||""),G.writeVarintField(5,N.extent||4096);var $={keys:[],values:[],keycache:{},valuecache:{}};for(X=0;X<N.length;X++)$.feature=N.feature(X),G.writeMessage(2,dr,$);var se=$.keys;for(X=0;X<se.length;X++)G.writeStringField(3,se[X]);var ve=$.values;for(X=0;X<ve.length;X++)G.writeMessage(4,zr,ve[X])}function dr(N,G){var X=N.feature;X.id!==void 0&&G.writeVarintField(1,X.id),G.writeMessage(2,it,N),G.writeVarintField(3,X.type),G.writeMessage(4,Vr,X)}function it(N,G){var X=N.feature,$=N.keys,se=N.values,ve=N.keycache,be=N.valuecache;for(var H in X.properties){var ne=ve[H];ne===void 0&&($.push(H),ve[H]=ne=$.length-1),G.writeVarint(ne);var Ie=X.properties[H],Ue=typeof Ie;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(Ie=JSON.stringify(Ie));var Ge=Ue+":"+Ie,Le=be[Ge];Le===void 0&&(se.push(Ie),be[Ge]=Le=se.length-1),G.writeVarint(Le)}}function rr(N,G){return(G<<3)+(7&N)}function wr(N){return N<<1^N>>31}function Vr(N,G){for(var X=N.loadGeometry(),$=N.type,se=0,ve=0,be=X.length,H=0;H<be;H++){var ne=X[H],Ie=1;$===1&&(Ie=ne.length),G.writeVarint(rr(1,Ie));for(var Ue=$===3?ne.length-1:ne.length,Ge=0;Ge<Ue;Ge++){Ge===1&&$!==1&&G.writeVarint(rr(2,Ue-1));var Le=ne[Ge].x-se,Ne=ne[Ge].y-ve;G.writeVarint(wr(Le)),G.writeVarint(wr(Ne)),se+=Le,ve+=Ne}$===3&&G.writeVarint(rr(7,1))}}function zr(N,G){var X=typeof N;X==="string"?G.writeStringField(1,N):X==="boolean"?G.writeBooleanField(7,N):X==="number"&&(N%1!=0?G.writeDoubleField(3,N):N<0?G.writeSVarintField(6,N):G.writeVarintField(5,N))}function ft(N,G,X,$){nt(N,X,$),nt(G,2*X,2*$),nt(G,2*X+1,2*$+1)}function nt(N,G,X){var $=N[G];N[G]=N[X],N[X]=$}function gr(N,G,X,$){var se=N-X,ve=G-$;return se*se+ve*ve}bt.fromVectorTileJs=Rr,bt.fromGeojsonVt=function(N,G){G=G||{};var X={};for(var $ in N)X[$]=new vr(N[$].features,G),X[$].name=$,X[$].version=G.version,X[$].extent=G.extent;return Rr({layers:X})},bt.GeoJSONWrapper=kt;var on=function(N){return N[0]},In=function(N){return N[1]},Fi=function(N,G,X,$,se){G===void 0&&(G=on),X===void 0&&(X=In),$===void 0&&($=64),se===void 0&&(se=Float64Array),this.nodeSize=$,this.points=N;for(var ve=N.length<65536?Uint16Array:Uint32Array,be=this.ids=new ve(N.length),H=this.coords=new se(2*N.length),ne=0;ne<N.length;ne++)be[ne]=ne,H[2*ne]=G(N[ne]),H[2*ne+1]=X(N[ne]);(function Ie(Ue,Ge,Le,Ne,ct,tt){if(!(ct-Ne<=Le)){var Ce=Ne+ct>>1;(function $e(We,Je,Kt,Ye,Ut,ir){for(;Ut>Ye;){if(Ut-Ye>600){var Rt=Ut-Ye+1,Ht=Kt-Ye+1,Xt=Math.log(Rt),Ui=.5*Math.exp(2*Xt/3),nr=.5*Math.sqrt(Xt*Ui*(Rt-Ui)/Rt)*(Ht-Rt/2<0?-1:1);$e(We,Je,Kt,Math.max(Ye,Math.floor(Kt-Ht*Ui/Rt+nr)),Math.min(Ut,Math.floor(Kt+(Rt-Ht)*Ui/Rt+nr)),ir)}var sr=Je[2*Kt+ir],mr=Ye,Ot=Ut;for(ft(We,Je,Ye,Kt),Je[2*Ut+ir]>sr&&ft(We,Je,Ye,Ut);mr<Ot;){for(ft(We,Je,mr,Ot),mr++,Ot--;Je[2*mr+ir]<sr;)mr++;for(;Je[2*Ot+ir]>sr;)Ot--}Je[2*Ye+ir]===sr?ft(We,Je,Ye,Ot):ft(We,Je,++Ot,Ut),Ot<=Kt&&(Ye=Ot+1),Kt<=Ot&&(Ut=Ot-1)}})(Ue,Ge,Ce,Ne,ct,tt%2),Ie(Ue,Ge,Le,Ne,Ce-1,tt+1),Ie(Ue,Ge,Le,Ce+1,ct,tt+1)}})(be,H,$,0,be.length-1,0)};Fi.prototype.range=function(N,G,X,$){return function(se,ve,be,H,ne,Ie,Ue){for(var Ge,Le,Ne=[0,se.length-1,0],ct=[];Ne.length;){var tt=Ne.pop(),Ce=Ne.pop(),$e=Ne.pop();if(Ce-$e<=Ue)for(var We=$e;We<=Ce;We++)Le=ve[2*We+1],(Ge=ve[2*We])>=be&&Ge<=ne&&Le>=H&&Le<=Ie&&ct.push(se[We]);else{var Je=Math.floor(($e+Ce)/2);Le=ve[2*Je+1],(Ge=ve[2*Je])>=be&&Ge<=ne&&Le>=H&&Le<=Ie&&ct.push(se[Je]);var Kt=(tt+1)%2;(tt===0?be<=Ge:H<=Le)&&(Ne.push($e),Ne.push(Je-1),Ne.push(Kt)),(tt===0?ne>=Ge:Ie>=Le)&&(Ne.push(Je+1),Ne.push(Ce),Ne.push(Kt))}}return ct}(this.ids,this.coords,N,G,X,$,this.nodeSize)},Fi.prototype.within=function(N,G,X){return function($,se,ve,be,H,ne){for(var Ie=[0,$.length-1,0],Ue=[],Ge=H*H;Ie.length;){var Le=Ie.pop(),Ne=Ie.pop(),ct=Ie.pop();if(Ne-ct<=ne)for(var tt=ct;tt<=Ne;tt++)gr(se[2*tt],se[2*tt+1],ve,be)<=Ge&&Ue.push($[tt]);else{var Ce=Math.floor((ct+Ne)/2),$e=se[2*Ce],We=se[2*Ce+1];gr($e,We,ve,be)<=Ge&&Ue.push($[Ce]);var Je=(Le+1)%2;(Le===0?ve-H<=$e:be-H<=We)&&(Ie.push(ct),Ie.push(Ce-1),Ie.push(Je)),(Le===0?ve+H>=$e:be+H>=We)&&(Ie.push(Ce+1),Ie.push(Ne),Ie.push(Je))}}return Ue}(this.ids,this.coords,N,G,X,this.nodeSize)};var Ni={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(N){return N}},Gr=function(N){this.options=ti(Object.create(Ni),N),this.trees=new Array(this.options.maxZoom+1)};function Ra(N,G,X,$,se){return{x:N,y:G,zoom:1/0,id:X,parentId:-1,numPoints:$,properties:se}}function Er(N,G){var X=N.geometry.coordinates,$=X[1];return{x:_r(X[0]),y:wt($),zoom:1/0,index:G,parentId:-1}}function Wi(N){return{type:"Feature",id:N.id,properties:$a(N),geometry:{type:"Point",coordinates:[($=N.x,360*($-.5)),(G=N.y,X=(180-360*G)*Math.PI/180,360*Math.atan(Math.exp(X))/Math.PI-90)]}};var G,X,$}function $a(N){var G=N.numPoints,X=G>=1e4?Math.round(G/1e3)+"k":G>=1e3?Math.round(G/100)/10+"k":G;return ti(ti({},N.properties),{cluster:!0,cluster_id:N.id,point_count:G,point_count_abbreviated:X})}function _r(N){return N/360+.5}function wt(N){var G=Math.sin(N*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function ti(N,G){for(var X in G)N[X]=G[X];return N}function Yi(N){return N.x}function Zr(N){return N.y}function rs(N,G,X,$,se,ve){var be=se-X,H=ve-$;if(be!==0||H!==0){var ne=((N-X)*be+(G-$)*H)/(be*be+H*H);ne>1?(X=se,$=ve):ne>0&&(X+=be*ne,$+=H*ne)}return(be=N-X)*be+(H=G-$)*H}function er(N,G,X,$){var se={id:N===void 0?null:N,type:G,geometry:X,tags:$,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ve){var be=ve.geometry,H=ve.type;if(H==="Point"||H==="MultiPoint"||H==="LineString")ri(ve,be);else if(H==="Polygon"||H==="MultiLineString")for(var ne=0;ne<be.length;ne++)ri(ve,be[ne]);else if(H==="MultiPolygon")for(ne=0;ne<be.length;ne++)for(var Ie=0;Ie<be[ne].length;Ie++)ri(ve,be[ne][Ie])}(se),se}function ri(N,G){for(var X=0;X<G.length;X+=3)N.minX=Math.min(N.minX,G[X]),N.minY=Math.min(N.minY,G[X+1]),N.maxX=Math.max(N.maxX,G[X]),N.maxY=Math.max(N.maxY,G[X+1])}function kr(N,G,X,$){if(G.geometry){var se=G.geometry.coordinates,ve=G.geometry.type,be=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),H=[],ne=G.id;if(X.promoteId?ne=G.properties[X.promoteId]:X.generateId&&(ne=$||0),ve==="Point")bi(se,H);else if(ve==="MultiPoint")for(var Ie=0;Ie<se.length;Ie++)bi(se[Ie],H);else if(ve==="LineString")Kr(se,H,be,!1);else if(ve==="MultiLineString"){if(X.lineMetrics){for(Ie=0;Ie<se.length;Ie++)Kr(se[Ie],H=[],be,!1),N.push(er(ne,"LineString",H,G.properties));return}Pr(se,H,be,!1)}else if(ve==="Polygon")Pr(se,H,be,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(Ie=0;Ie<G.geometry.geometries.length;Ie++)kr(N,{id:ne,geometry:G.geometry.geometries[Ie],properties:G.properties},X,$);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ie=0;Ie<se.length;Ie++){var Ue=[];Pr(se[Ie],Ue,be,!0),H.push(Ue)}}N.push(er(ne,ve,H,G.properties))}}function bi(N,G){G.push(xi(N[0])),G.push(yn(N[1])),G.push(0)}function Kr(N,G,X,$){for(var se,ve,be=0,H=0;H<N.length;H++){var ne=xi(N[H][0]),Ie=yn(N[H][1]);G.push(ne),G.push(Ie),G.push(0),H>0&&(be+=$?(se*Ie-ne*ve)/2:Math.sqrt(Math.pow(ne-se,2)+Math.pow(Ie-ve,2))),se=ne,ve=Ie}var Ue=G.length-3;G[2]=1,function Ge(Le,Ne,ct,tt){for(var Ce,$e=tt,We=ct-Ne>>1,Je=ct-Ne,Kt=Le[Ne],Ye=Le[Ne+1],Ut=Le[ct],ir=Le[ct+1],Rt=Ne+3;Rt<ct;Rt+=3){var Ht=rs(Le[Rt],Le[Rt+1],Kt,Ye,Ut,ir);if(Ht>$e)Ce=Rt,$e=Ht;else if(Ht===$e){var Xt=Math.abs(Rt-We);Xt<Je&&(Ce=Rt,Je=Xt)}}$e>tt&&(Ce-Ne>3&&Ge(Le,Ne,Ce,tt),Le[Ce+2]=$e,ct-Ce>3&&Ge(Le,Ce,ct,tt))}(G,0,Ue,X),G[Ue+2]=1,G.size=Math.abs(be),G.start=0,G.end=G.size}function Pr(N,G,X,$){for(var se=0;se<N.length;se++){var ve=[];Kr(N[se],ve,X,$),G.push(ve)}}function xi(N){return N/360+.5}function yn(N){var G=Math.sin(N*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function Cr(N,G,X,$,se,ve,be,H){if($/=G,ve>=(X/=G)&&be<$)return N;if(be<X||ve>=$)return null;for(var ne=[],Ie=0;Ie<N.length;Ie++){var Ue=N[Ie],Ge=Ue.geometry,Le=Ue.type,Ne=se===0?Ue.minX:Ue.minY,ct=se===0?Ue.maxX:Ue.maxY;if(Ne>=X&&ct<$)ne.push(Ue);else if(!(ct<X||Ne>=$)){var tt=[];if(Le==="Point"||Le==="MultiPoint")br(Ge,tt,X,$,se);else if(Le==="LineString")Fr(Ge,tt,X,$,se,!1,H.lineMetrics);else if(Le==="MultiLineString")sn(Ge,tt,X,$,se,!1);else if(Le==="Polygon")sn(Ge,tt,X,$,se,!0);else if(Le==="MultiPolygon")for(var Ce=0;Ce<Ge.length;Ce++){var $e=[];sn(Ge[Ce],$e,X,$,se,!0),$e.length&&tt.push($e)}if(tt.length){if(H.lineMetrics&&Le==="LineString"){for(Ce=0;Ce<tt.length;Ce++)ne.push(er(Ue.id,Le,tt[Ce],Ue.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(tt.length===1?(Le="LineString",tt=tt[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=tt.length===3?"Point":"MultiPoint"),ne.push(er(Ue.id,Le,tt,Ue.tags))}}}return ne.length?ne:null}function br(N,G,X,$,se){for(var ve=0;ve<N.length;ve+=3){var be=N[ve+se];be>=X&&be<=$&&(G.push(N[ve]),G.push(N[ve+1]),G.push(N[ve+2]))}}function Fr(N,G,X,$,se,ve,be){for(var H,ne,Ie=Ji(N),Ue=se===0?Ga:ci,Ge=N.start,Le=0;Le<N.length-3;Le+=3){var Ne=N[Le],ct=N[Le+1],tt=N[Le+2],Ce=N[Le+3],$e=N[Le+4],We=se===0?Ne:ct,Je=se===0?Ce:$e,Kt=!1;be&&(H=Math.sqrt(Math.pow(Ne-Ce,2)+Math.pow(ct-$e,2))),We<X?Je>X&&(ne=Ue(Ie,Ne,ct,Ce,$e,X),be&&(Ie.start=Ge+H*ne)):We>$?Je<$&&(ne=Ue(Ie,Ne,ct,Ce,$e,$),be&&(Ie.start=Ge+H*ne)):ln(Ie,Ne,ct,tt),Je<X&&We>=X&&(ne=Ue(Ie,Ne,ct,Ce,$e,X),Kt=!0),Je>$&&We<=$&&(ne=Ue(Ie,Ne,ct,Ce,$e,$),Kt=!0),!ve&&Kt&&(be&&(Ie.end=Ge+H*ne),G.push(Ie),Ie=Ji(N)),be&&(Ge+=H)}var Ye=N.length-3;Ne=N[Ye],ct=N[Ye+1],tt=N[Ye+2],(We=se===0?Ne:ct)>=X&&We<=$&&ln(Ie,Ne,ct,tt),Ye=Ie.length-3,ve&&Ye>=3&&(Ie[Ye]!==Ie[0]||Ie[Ye+1]!==Ie[1])&&ln(Ie,Ie[0],Ie[1],Ie[2]),Ie.length&&G.push(Ie)}function Ji(N){var G=[];return G.size=N.size,G.start=N.start,G.end=N.end,G}function sn(N,G,X,$,se,ve){for(var be=0;be<N.length;be++)Fr(N[be],G,X,$,se,ve,!1)}function ln(N,G,X,$){N.push(G),N.push(X),N.push($)}function Ga(N,G,X,$,se,ve){var be=(ve-G)/($-G);return N.push(ve),N.push(X+(se-X)*be),N.push(1),be}function ci(N,G,X,$,se,ve){var be=(ve-X)/(se-X);return N.push(G+($-G)*be),N.push(ve),N.push(1),be}function vn(N,G){for(var X=[],$=0;$<N.length;$++){var se,ve=N[$],be=ve.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")se=Pi(ve.geometry,G);else if(be==="MultiLineString"||be==="Polygon"){se=[];for(var H=0;H<ve.geometry.length;H++)se.push(Pi(ve.geometry[H],G))}else if(be==="MultiPolygon")for(se=[],H=0;H<ve.geometry.length;H++){for(var ne=[],Ie=0;Ie<ve.geometry[H].length;Ie++)ne.push(Pi(ve.geometry[H][Ie],G));se.push(ne)}X.push(er(ve.id,be,se,ve.tags))}return X}function Pi(N,G){var X=[];X.size=N.size,N.start!==void 0&&(X.start=N.start,X.end=N.end);for(var $=0;$<N.length;$+=3)X.push(N[$]+G,N[$+1],N[$+2]);return X}function Tn(N,G){if(N.transformed)return N;var X,$,se,ve=1<<N.z,be=N.x,H=N.y;for(X=0;X<N.features.length;X++){var ne=N.features[X],Ie=ne.geometry,Ue=ne.type;if(ne.geometry=[],Ue===1)for($=0;$<Ie.length;$+=2)ne.geometry.push(wa(Ie[$],Ie[$+1],G,ve,be,H));else for($=0;$<Ie.length;$++){var Ge=[];for(se=0;se<Ie[$].length;se+=2)Ge.push(wa(Ie[$][se],Ie[$][se+1],G,ve,be,H));ne.geometry.push(Ge)}}return N.transformed=!0,N}function wa(N,G,X,$,se,ve){return[Math.round(X*(N*$-se)),Math.round(X*(G*$-ve))]}function Bo(N,G,X,$,se){for(var ve=G===se.maxZoom?0:se.tolerance/((1<<G)*se.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:X,y:$,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},H=0;H<N.length;H++){be.numFeatures++,_o(be,N[H],ve,se);var ne=N[H].minX,Ie=N[H].minY,Ue=N[H].maxX,Ge=N[H].maxY;ne<be.minX&&(be.minX=ne),Ie<be.minY&&(be.minY=Ie),Ue>be.maxX&&(be.maxX=Ue),Ge>be.maxY&&(be.maxY=Ge)}return be}function _o(N,G,X,$){var se=G.geometry,ve=G.type,be=[];if(ve==="Point"||ve==="MultiPoint")for(var H=0;H<se.length;H+=3)be.push(se[H]),be.push(se[H+1]),N.numPoints++,N.numSimplified++;else if(ve==="LineString")Qn(be,se,N,X,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(H=0;H<se.length;H++)Qn(be,se[H],N,X,ve==="Polygon",H===0);else if(ve==="MultiPolygon")for(var ne=0;ne<se.length;ne++){var Ie=se[ne];for(H=0;H<Ie.length;H++)Qn(be,Ie[H],N,X,!0,H===0)}if(be.length){var Ue=G.tags||null;if(ve==="LineString"&&$.lineMetrics){for(var Ge in Ue={},G.tags)Ue[Ge]=G.tags[Ge];Ue.mapbox_clip_start=se.start/se.size,Ue.mapbox_clip_end=se.end/se.size}var Le={geometry:be,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Ue};G.id!==null&&(Le.id=G.id),N.features.push(Le)}}function Qn(N,G,X,$,se,ve){var be=$*$;if($>0&&G.size<(se?be:$))X.numPoints+=G.length/3;else{for(var H=[],ne=0;ne<G.length;ne+=3)($===0||G[ne+2]>be)&&(X.numSimplified++,H.push(G[ne]),H.push(G[ne+1])),X.numPoints++;se&&function(Ie,Ue){for(var Ge=0,Le=0,Ne=Ie.length,ct=Ne-2;Le<Ne;ct=Le,Le+=2)Ge+=(Ie[Le]-Ie[ct])*(Ie[Le+1]+Ie[ct+1]);if(Ge>0===Ue)for(Le=0,Ne=Ie.length;Le<Ne/2;Le+=2){var tt=Ie[Le],Ce=Ie[Le+1];Ie[Le]=Ie[Ne-2-Le],Ie[Le+1]=Ie[Ne-1-Le],Ie[Ne-2-Le]=tt,Ie[Ne-1-Le]=Ce}}(H,ve),N.push(H)}}function Qi(N,G){var X=(G=this.options=function(se,ve){for(var be in ve)se[be]=ve[be];return se}(Object.create(this.options),G)).debug;if(X&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var $=function(se,ve){var be=[];if(se.type==="FeatureCollection")for(var H=0;H<se.features.length;H++)kr(be,se.features[H],ve,H);else kr(be,se.type==="Feature"?se:{geometry:se},ve);return be}(N,G);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),($=function(se,ve){var be=ve.buffer/ve.extent,H=se,ne=Cr(se,1,-1-be,be,0,-1,2,ve),Ie=Cr(se,1,1-be,2+be,0,-1,2,ve);return(ne||Ie)&&(H=Cr(se,1,-be,1+be,0,-1,2,ve)||[],ne&&(H=vn(ne,1).concat(H)),Ie&&(H=H.concat(vn(Ie,-1)))),H}($,G)).length&&this.splitTile($,0,0,0),X&&($.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ea(N,G,X){return 32*((1<<N)*X+G)+N}function sa(N,G){var X=N.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);var $=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!$)return G(null,null);var se=new mt($.features),ve=bt(se);ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),G(null,{vectorTile:se,rawData:ve.buffer})}Gr.prototype.load=function(N){var G=this.options,X=G.log,$=G.minZoom,se=G.maxZoom,ve=G.nodeSize;X&&console.time("total time");var be="prepare "+N.length+" points";X&&console.time(be),this.points=N;for(var H=[],ne=0;ne<N.length;ne++)N[ne].geometry&&H.push(Er(N[ne],ne));this.trees[se+1]=new Fi(H,Yi,Zr,ve,Float32Array),X&&console.timeEnd(be);for(var Ie=se;Ie>=$;Ie--){var Ue=+Date.now();H=this._cluster(H,Ie),this.trees[Ie]=new Fi(H,Yi,Zr,ve,Float32Array),X&&console.log("z%d: %d clusters in %dms",Ie,H.length,+Date.now()-Ue)}return X&&console.timeEnd("total time"),this},Gr.prototype.getClusters=function(N,G){var X=((N[0]+180)%360+360)%360-180,$=Math.max(-90,Math.min(90,N[1])),se=N[2]===180?180:((N[2]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)X=-180,se=180;else if(X>se){var be=this.getClusters([X,$,180,ve],G),H=this.getClusters([-180,$,se,ve],G);return be.concat(H)}for(var ne=this.trees[this._limitZoom(G)],Ie=[],Ue=0,Ge=ne.range(_r(X),wt(ve),_r(se),wt($));Ue<Ge.length;Ue+=1){var Le=ne.points[Ge[Ue]];Ie.push(Le.numPoints?Wi(Le):this.points[Le.index])}return Ie},Gr.prototype.getChildren=function(N){var G=this._getOriginId(N),X=this._getOriginZoom(N),$="No cluster with the specified id.",se=this.trees[X];if(!se)throw new Error($);var ve=se.points[G];if(!ve)throw new Error($);for(var be=this.options.radius/(this.options.extent*Math.pow(2,X-1)),H=[],ne=0,Ie=se.within(ve.x,ve.y,be);ne<Ie.length;ne+=1){var Ue=se.points[Ie[ne]];Ue.parentId===N&&H.push(Ue.numPoints?Wi(Ue):this.points[Ue.index])}if(H.length===0)throw new Error($);return H},Gr.prototype.getLeaves=function(N,G,X){var $=[];return this._appendLeaves($,N,G=G||10,X=X||0,0),$},Gr.prototype.getTile=function(N,G,X){var $=this.trees[this._limitZoom(N)],se=Math.pow(2,N),ve=this.options,be=ve.radius/ve.extent,H=(X-be)/se,ne=(X+1+be)/se,Ie={features:[]};return this._addTileFeatures($.range((G-be)/se,H,(G+1+be)/se,ne),$.points,G,X,se,Ie),G===0&&this._addTileFeatures($.range(1-be/se,H,1,ne),$.points,se,X,se,Ie),G===se-1&&this._addTileFeatures($.range(0,H,be/se,ne),$.points,-1,X,se,Ie),Ie.features.length?Ie:null},Gr.prototype.getClusterExpansionZoom=function(N){for(var G=this._getOriginZoom(N)-1;G<=this.options.maxZoom;){var X=this.getChildren(N);if(G++,X.length!==1)break;N=X[0].properties.cluster_id}return G},Gr.prototype._appendLeaves=function(N,G,X,$,se){for(var ve=0,be=this.getChildren(G);ve<be.length;ve+=1){var H=be[ve],ne=H.properties;if(ne&&ne.cluster?se+ne.point_count<=$?se+=ne.point_count:se=this._appendLeaves(N,ne.cluster_id,X,$,se):se<$?se++:N.push(H),N.length===X)break}return se},Gr.prototype._addTileFeatures=function(N,G,X,$,se,ve){for(var be=0,H=N;be<H.length;be+=1){var ne=G[H[be]],Ie=ne.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(ne.x*se-X)),Math.round(this.options.extent*(ne.y*se-$))]],tags:Ie?$a(ne):this.points[ne.index].properties},Ge=void 0;Ie?Ge=ne.id:this.options.generateId?Ge=ne.index:this.points[ne.index].id&&(Ge=this.points[ne.index].id),Ge!==void 0&&(Ue.id=Ge),ve.features.push(Ue)}},Gr.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},Gr.prototype._cluster=function(N,G){for(var X=[],$=this.options,se=$.reduce,ve=$.minPoints,be=$.radius/($.extent*Math.pow(2,G)),H=0;H<N.length;H++){var ne=N[H];if(!(ne.zoom<=G)){ne.zoom=G;for(var Ie=this.trees[G+1],Ue=Ie.within(ne.x,ne.y,be),Ge=ne.numPoints||1,Le=Ge,Ne=0,ct=Ue;Ne<ct.length;Ne+=1){var tt=Ie.points[ct[Ne]];tt.zoom>G&&(Le+=tt.numPoints||1)}if(Le>=ve){for(var Ce=ne.x*Ge,$e=ne.y*Ge,We=se&&Ge>1?this._map(ne,!0):null,Je=(H<<5)+(G+1)+this.points.length,Kt=0,Ye=Ue;Kt<Ye.length;Kt+=1){var Ut=Ie.points[Ye[Kt]];if(!(Ut.zoom<=G)){Ut.zoom=G;var ir=Ut.numPoints||1;Ce+=Ut.x*ir,$e+=Ut.y*ir,Ut.parentId=Je,se&&(We||(We=this._map(ne,!0)),se(We,this._map(Ut)))}}ne.parentId=Je,X.push(Ra(Ce/Le,$e/Le,Je,Le,We))}else if(X.push(ne),Le>1)for(var Rt=0,Ht=Ue;Rt<Ht.length;Rt+=1){var Xt=Ie.points[Ht[Rt]];Xt.zoom<=G||(Xt.zoom=G,X.push(Xt))}}}return X},Gr.prototype._getOriginId=function(N){return N-this.points.length>>5},Gr.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},Gr.prototype._map=function(N,G){if(N.numPoints)return G?ti({},N.properties):N.properties;var X=this.points[N.index].properties,$=this.options.map(X);return G&&$===X?ti({},$):$},Qi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qi.prototype.splitTile=function(N,G,X,$,se,ve,be){for(var H=[N,G,X,$],ne=this.options,Ie=ne.debug;H.length;){$=H.pop(),X=H.pop(),G=H.pop(),N=H.pop();var Ue=1<<G,Ge=Ea(G,X,$),Le=this.tiles[Ge];if(!Le&&(Ie>1&&console.time("creation"),Le=this.tiles[Ge]=Bo(N,G,X,$,ne),this.tileCoords.push({z:G,x:X,y:$}),Ie)){Ie>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,X,$,Le.numFeatures,Le.numPoints,Le.numSimplified),console.timeEnd("creation"));var Ne="z"+G;this.stats[Ne]=(this.stats[Ne]||0)+1,this.total++}if(Le.source=N,se){if(G===ne.maxZoom||G===se)continue;var ct=1<<se-G;if(X!==Math.floor(ve/ct)||$!==Math.floor(be/ct))continue}else if(G===ne.indexMaxZoom||Le.numPoints<=ne.indexMaxPoints)continue;if(Le.source=null,N.length!==0){Ie>1&&console.time("clipping");var tt,Ce,$e,We,Je,Kt,Ye=.5*ne.buffer/ne.extent,Ut=.5-Ye,ir=.5+Ye,Rt=1+Ye;tt=Ce=$e=We=null,Je=Cr(N,Ue,X-Ye,X+ir,0,Le.minX,Le.maxX,ne),Kt=Cr(N,Ue,X+Ut,X+Rt,0,Le.minX,Le.maxX,ne),N=null,Je&&(tt=Cr(Je,Ue,$-Ye,$+ir,1,Le.minY,Le.maxY,ne),Ce=Cr(Je,Ue,$+Ut,$+Rt,1,Le.minY,Le.maxY,ne),Je=null),Kt&&($e=Cr(Kt,Ue,$-Ye,$+ir,1,Le.minY,Le.maxY,ne),We=Cr(Kt,Ue,$+Ut,$+Rt,1,Le.minY,Le.maxY,ne),Kt=null),Ie>1&&console.timeEnd("clipping"),H.push(tt||[],G+1,2*X,2*$),H.push(Ce||[],G+1,2*X,2*$+1),H.push($e||[],G+1,2*X+1,2*$),H.push(We||[],G+1,2*X+1,2*$+1)}}},Qi.prototype.getTile=function(N,G,X){var $=this.options,se=$.extent,ve=$.debug;if(N<0||N>24)return null;var be=1<<N,H=Ea(N,G=(G%be+be)%be,X);if(this.tiles[H])return Tn(this.tiles[H],se);ve>1&&console.log("drilling down to z%d-%d-%d",N,G,X);for(var ne,Ie=N,Ue=G,Ge=X;!ne&&Ie>0;)Ie--,Ue=Math.floor(Ue/2),Ge=Math.floor(Ge/2),ne=this.tiles[Ea(Ie,Ue,Ge)];return ne&&ne.source?(ve>1&&console.log("found parent tile z%d-%d-%d",Ie,Ue,Ge),ve>1&&console.time("drilling down"),this.splitTile(ne.source,Ie,Ue,Ge,N,G,X),ve>1&&console.timeEnd("drilling down"),this.tiles[H]?Tn(this.tiles[H],se):null):null};var wi=function(N){function G(X,$,se,ve){N.call(this,X,$,se,sa),ve&&(this.loadGeoJSON=ve)}return N&&(G.__proto__=N),(G.prototype=Object.create(N&&N.prototype)).constructor=G,G.prototype.loadData=function(X,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=$,this._pendingLoadDataParams=X,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},G.prototype._loadData=function(){var X=this;if(this._pendingCallback&&this._pendingLoadDataParams){var $=this._pendingCallback,se=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ve=!!(se&&se.request&&se.request.collectResourceTiming)&&new o.RequestPerformance(se.request);this.loadGeoJSON(se,function(be,H){if(be||!H)return $(be);if(typeof H!="object")return $(new Error("Input data given to '"+se.source+"' is not a valid GeoJSON object."));(function Le(Ne,ct){var tt,Ce=Ne&&Ne.type;if(Ce==="FeatureCollection")for(tt=0;tt<Ne.features.length;tt++)Le(Ne.features[tt],ct);else if(Ce==="GeometryCollection")for(tt=0;tt<Ne.geometries.length;tt++)Le(Ne.geometries[tt],ct);else if(Ce==="Feature")Le(Ne.geometry,ct);else if(Ce==="Polygon")Be(Ne.coordinates,ct);else if(Ce==="MultiPolygon")for(tt=0;tt<Ne.coordinates.length;tt++)Be(Ne.coordinates[tt],ct);return Ne})(H,!0);try{if(se.filter){var ne=o.createExpression(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map(function(Le){return Le.key+": "+Le.message}).join(", "));var Ie=H.features.filter(function(Le){return ne.value.evaluate({zoom:0},Le)});H={type:"FeatureCollection",features:Ie}}X._geoJSONIndex=se.cluster?new Gr(function(Le){var Ne=Le.superclusterOptions,ct=Le.clusterProperties;if(!ct||!Ne)return Ne;for(var tt={},Ce={},$e={accumulated:null,zoom:0},We={properties:null},Je=Object.keys(ct),Kt=0,Ye=Je;Kt<Ye.length;Kt+=1){var Ut=Ye[Kt],ir=ct[Ut],Rt=ir[0],Ht=o.createExpression(ir[1]),Xt=o.createExpression(typeof Rt=="string"?[Rt,["accumulated"],["get",Ut]]:Rt);tt[Ut]=Ht.value,Ce[Ut]=Xt.value}return Ne.map=function(Ui){We.properties=Ui;for(var nr={},sr=0,mr=Je;sr<mr.length;sr+=1){var Ot=mr[sr];nr[Ot]=tt[Ot].evaluate($e,We)}return nr},Ne.reduce=function(Ui,nr){We.properties=nr;for(var sr=0,mr=Je;sr<mr.length;sr+=1){var Ot=mr[sr];$e.accumulated=Ui[Ot],Ui[Ot]=Ce[Ot].evaluate($e,We)}},Ne}(se)).load(H.features):function(Le,Ne){return new Qi(Le,Ne)}(H,se.geojsonVtOptions)}catch(Le){return $(Le)}X.loaded={};var Ue={};if(ve){var Ge=ve.finish();Ge&&(Ue.resourceTiming={},Ue.resourceTiming[se.source]=JSON.parse(JSON.stringify(Ge)))}$(null,Ue)})}},G.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},G.prototype.reloadTile=function(X,$){var se=this.loaded;return se&&se[X.uid]?N.prototype.reloadTile.call(this,X,$):this.loadTile(X,$)},G.prototype.loadGeoJSON=function(X,$){if(X.request)o.getJSON(X.request,$);else{if(typeof X.data!="string")return $(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."));try{return $(null,JSON.parse(X.data))}catch{return $(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."))}}},G.prototype.removeSource=function(X,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()},G.prototype.getClusterExpansionZoom=function(X,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(se){$(se)}},G.prototype.getClusterChildren=function(X,$){try{$(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(se){$(se)}},G.prototype.getClusterLeaves=function(X,$){try{$(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(se){$(se)}},G}(he),xr=function(N){var G=this;this.self=N,this.actor=new o.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:he,geojson:wi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(X,$){if(G.workerSourceTypes[X])throw new Error('Worker source with name "'+X+'" already registered.');G.workerSourceTypes[X]=$},this.self.registerRTLTextPlugin=function(X){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=X.applyArabicShaping,o.plugin.processBidirectionalText=X.processBidirectionalText,o.plugin.processStyledBidirectionalText=X.processStyledBidirectionalText}};return xr.prototype.setReferrer=function(N,G){this.referrer=G},xr.prototype.setImages=function(N,G,X){for(var $ in this.availableImages[N]=G,this.workerSources[N]){var se=this.workerSources[N][$];for(var ve in se)se[ve].availableImages=G}X()},xr.prototype.setLayers=function(N,G,X){this.getLayerIndex(N).replace(G),X()},xr.prototype.updateLayers=function(N,G,X){this.getLayerIndex(N).update(G.layers,G.removedIds),X()},xr.prototype.loadTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).loadTile(G,X)},xr.prototype.loadDEMTile=function(N,G,X){this.getDEMWorkerSource(N,G.source).loadTile(G,X)},xr.prototype.reloadTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).reloadTile(G,X)},xr.prototype.abortTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).abortTile(G,X)},xr.prototype.removeTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).removeTile(G,X)},xr.prototype.removeDEMTile=function(N,G){this.getDEMWorkerSource(N,G.source).removeTile(G)},xr.prototype.removeSource=function(N,G,X){if(this.workerSources[N]&&this.workerSources[N][G.type]&&this.workerSources[N][G.type][G.source]){var $=this.workerSources[N][G.type][G.source];delete this.workerSources[N][G.type][G.source],$.removeSource!==void 0?$.removeSource(G,X):X()}},xr.prototype.loadWorkerSource=function(N,G,X){try{this.self.importScripts(G.url),X()}catch($){X($.toString())}},xr.prototype.syncRTLPluginState=function(N,G,X){try{o.plugin.setState(G);var $=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&$!=null){this.self.importScripts($);var se=o.plugin.isParsed();X(se?void 0:new Error("RTL Text Plugin failed to import scripts from "+$),se)}}catch(ve){X(ve.toString())}},xr.prototype.getAvailableImages=function(N){var G=this.availableImages[N];return G||(G=[]),G},xr.prototype.getLayerIndex=function(N){var G=this.layerIndexes[N];return G||(G=this.layerIndexes[N]=new F),G},xr.prototype.getWorkerSource=function(N,G,X){var $=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][G]||(this.workerSources[N][G]={}),this.workerSources[N][G][X]||(this.workerSources[N][G][X]=new this.workerSourceTypes[G]({send:function(se,ve,be){$.actor.send(se,ve,be,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][G][X]},xr.prototype.getDEMWorkerSource=function(N,G){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][G]||(this.demWorkerSources[N][G]=new Ee),this.demWorkerSources[N][G]},xr.prototype.enforceCacheSizeLimit=function(N,G){o.enforceCacheSizeLimit(G)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new xr(self)),xr}),_(["./shared"],function(o){var A=o.createCommonjsModule(function(n){function s(m){return!a(m)}function a(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,P,B=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(B);try{P=new Worker(Z),k=!0}catch{k=!1}return P&&P.terminate(),URL.revokeObjectURL(Z),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var P=k.getContext("2d");if(!P)return!1;var B=P.getImageData(0,0,1,1);return B&&B.width===k.width}()?(c[w=m&&m.failIfMajorPerformanceCaveat]===void 0&&(c[w]=function(k){var P=function(Z){var Y=document.createElement("canvas"),J=Object.create(s.webGLContextAttributes);return J.failIfMajorPerformanceCaveat=Z,Y.probablySupportsContext?Y.probablySupportsContext("webgl",J)||Y.probablySupportsContext("experimental-webgl",J):Y.supportsContext?Y.supportsContext("webgl",J)||Y.supportsContext("experimental-webgl",J):Y.getContext("webgl",J)||Y.getContext("experimental-webgl",J)}(k);if(!P)return!1;var B=P.createShader(P.VERTEX_SHADER);return!(!B||P.isContextLost())&&(P.shaderSource(B,"void main() {}"),P.compileShader(B),P.getShaderParameter(B,P.COMPILE_STATUS)===!0)}(w)),c[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),z={create:function(n,s,a){var c=o.window.document.createElement(n);return s!==void 0&&(c.className=s),a&&a.appendChild(c),c},createNS:function(n,s){return o.window.document.createElementNS(n,s)}},F=o.window.document&&o.window.document.documentElement.style;function V(n){if(!F)return n[0];for(var s=0;s<n.length;s++)if(n[s]in F)return n[s];return n[0]}var j,q=V(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);z.disableDrag=function(){F&&q&&(j=F[q],F[q]="none")},z.enableDrag=function(){F&&q&&(F[q]=j)};var pe=V(["transform","WebkitTransform"]);z.setTransform=function(n,s){n.style[pe]=s};var he=!1;try{var ke=Object.defineProperty({},"passive",{get:function(){he=!0}});o.window.addEventListener("test",ke,ke),o.window.removeEventListener("test",ke,ke)}catch{he=!1}z.addEventListener=function(n,s,a,c){c===void 0&&(c={}),n.addEventListener(s,a,"passive"in c&&he?c:c.capture)},z.removeEventListener=function(n,s,a,c){c===void 0&&(c={}),n.removeEventListener(s,a,"passive"in c&&he?c:c.capture)};var Ee=function(n){n.preventDefault(),n.stopPropagation(),o.window.removeEventListener("click",Ee,!0)};function Be(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}z.suppressClick=function(){o.window.addEventListener("click",Ee,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",Ee,!0)},0)},z.mousePos=function(n,s){var a=n.getBoundingClientRect();return new o.Point(s.clientX-a.left-n.clientLeft,s.clientY-a.top-n.clientTop)},z.touchPos=function(n,s){for(var a=n.getBoundingClientRect(),c=[],m=0;m<s.length;m++)c.push(new o.Point(s[m].clientX-a.left-n.clientLeft,s[m].clientY-a.top-n.clientTop));return c},z.mouseButton=function(n){return o.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},z.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Fe=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var c=0,m=this.requestors;c<m.length;c+=1){var w=m[c];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,c){this._validate(a,c)&&(this.images[a]=c)},s.prototype._validate=function(a,c){var m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(c.content,c)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(a,c){if(!a)return!0;for(var m=0,w=0,k=a;w<k.length;w+=1){var P=k[w];if(P[0]<m||P[1]<P[0]||c<P[1])return!1;m=P[1]}return!0},s.prototype._validateContent=function(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,c){c.version=this.images[a].version+1,this.images[a]=c,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,c){var m=!0;if(!this.isLoaded())for(var w=0,k=a;w<k.length;w+=1)this.images[k[w]]||(m=!1);this.isLoaded()||m?this._notify(a,c):this.requestors.push({ids:a,callback:c})},s.prototype._notify=function(a,c){for(var m={},w=0,k=a;w<k.length;w+=1){var P=k[w];this.images[P]||this.fire(new o.Event("styleimagemissing",{id:P}));var B=this.images[P];B?m[P]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:o.warnOnce('Image "'+P+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,m)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var c=this.patterns[a],m=this.getImage(a);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{var w={w:m.data.width+2,h:m.data.height+2,x:0,y:0},k=new o.ImagePosition(w,m);this.patterns[a]={bin:w,position:k}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var c in this.patterns)a.push(this.patterns[c].bin);var m=o.potpack(a),w=m.w,k=m.h,P=this.atlasImage;for(var B in P.resize({width:w||1,height:k||1}),this.patterns){var Z=this.patterns[B].bin,Y=Z.x+1,J=Z.y+1,Q=this.images[B].data,le=Q.width,oe=Q.height;o.RGBAImage.copy(Q,P,{x:0,y:0},{x:Y,y:J},{width:le,height:oe}),o.RGBAImage.copy(Q,P,{x:0,y:oe-1},{x:Y,y:J-1},{width:le,height:1}),o.RGBAImage.copy(Q,P,{x:0,y:0},{x:Y,y:J+oe},{width:le,height:1}),o.RGBAImage.copy(Q,P,{x:le-1,y:0},{x:Y-1,y:J},{width:1,height:oe}),o.RGBAImage.copy(Q,P,{x:0,y:0},{x:Y+le,y:J},{width:1,height:oe})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var c=0,m=a;c<m.length;c+=1){var w=m[c];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var k=this.images[w];Be(k)&&this.updateImage(w,k)}}},s}(o.Evented),Ft=et,Ct=et,mt=1e20;function et(n,s,a,c,m,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=m||"sans-serif",this.fontWeight=w||"normal",this.radius=a||8;var k=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=k,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.d=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Int16Array(k),this.middle=Math.round(k/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function vr(n,s,a,c,m,w,k){for(var P=0;P<s;P++){for(var B=0;B<a;B++)c[B]=n[B*s+P];for(pr(c,m,w,k,a),B=0;B<a;B++)n[B*s+P]=m[B]}for(B=0;B<a;B++){for(P=0;P<s;P++)c[P]=n[B*s+P];for(pr(c,m,w,k,s),P=0;P<s;P++)n[B*s+P]=Math.sqrt(m[P])}}function pr(n,s,a,c,m){a[0]=0,c[0]=-mt,c[1]=+mt;for(var w=1,k=0;w<m;w++){for(var P=(n[w]+w*w-(n[a[k]]+a[k]*a[k]))/(2*w-2*a[k]);P<=c[k];)k--,P=(n[w]+w*w-(n[a[k]]+a[k]*a[k]))/(2*w-2*a[k]);a[++k]=w,c[k]=P,c[k+1]=+mt}for(w=0,k=0;w<m;w++){for(;c[k+1]<w;)k++;s[w]=(w-a[k])*(w-a[k])+n[a[k]]}}et.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var m=s.data[4*c+3]/255;this.gridOuter[c]=m===1?0:m===0?mt:Math.pow(Math.max(0,.5-m),2),this.gridInner[c]=m===1?mt:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(vr(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),vr(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a},Ft.default=Ct;var lr=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};lr.prototype.setURL=function(n){this.url=n},lr.prototype.getGlyphs=function(n,s){var a=this,c=[];for(var m in n)for(var w=0,k=n[m];w<k.length;w+=1)c.push({stack:m,id:k[w]});o.asyncAll(c,function(P,B){var Z=P.stack,Y=P.id,J=a.entries[Z];J||(J=a.entries[Z]={glyphs:{},requests:{},ranges:{}});var Q=J.glyphs[Y];if(Q===void 0){if(Q=a._tinySDF(J,Z,Y))return J.glyphs[Y]=Q,void B(null,{stack:Z,id:Y,glyph:Q});var le=Math.floor(Y/256);if(256*le>65535)B(new Error("glyphs > 65535 not supported"));else if(J.ranges[le])B(null,{stack:Z,id:Y,glyph:Q});else{var oe=J.requests[le];oe||(oe=J.requests[le]=[],lr.loadGlyphRange(Z,le,a.url,a.requestManager,function(ye,ie){if(ie){for(var fe in ie)a._doesCharSupportLocalGlyph(+fe)||(J.glyphs[+fe]=ie[+fe]);J.ranges[le]=!0}for(var _e=0,Te=oe;_e<Te.length;_e+=1)(0,Te[_e])(ye,ie);delete J.requests[le]})),oe.push(function(ye,ie){ye?B(ye):ie&&B(null,{stack:Z,id:Y,glyph:ie[Y]||null})})}}else B(null,{stack:Z,id:Y,glyph:Q})},function(P,B){if(P)s(P);else if(B){for(var Z={},Y=0,J=B;Y<J.length;Y+=1){var Q=J[Y],le=Q.stack,oe=Q.id,ye=Q.glyph;(Z[le]||(Z[le]={}))[oe]=ye&&{id:ye.id,bitmap:ye.bitmap.clone(),metrics:ye.metrics}}s(null,Z)}})},lr.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](n)||o.isChar["Hangul Syllables"](n)||o.isChar.Hiragana(n)||o.isChar.Katakana(n))},lr.prototype._tinySDF=function(n,s,a){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(a)){var m=n.tinySDF;if(!m){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),m=n.tinySDF=new lr.TinySDF(24,3,8,.25,c,w)}return{id:a,bitmap:new o.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},lr.loadGlyphRange=function(n,s,a,c,m){var w=256*s,k=w+255,P=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",n).replace("{range}",w+"-"+k),o.ResourceType.Glyphs);o.getArrayBuffer(P,function(B,Z){if(B)m(B);else if(Z){for(var Y={},J=0,Q=o.parseGlyphPBF(Z);J<Q.length;J+=1){var le=Q[J];Y[le.id]=le}m(null,Y)}})},lr.TinySDF=Ft;var bt=function(){this.specification=o.styleSpec.light.position};bt.prototype.possiblyEvaluate=function(n,s){return o.sphericalToCartesian(n.expression.evaluate(s))},bt.prototype.interpolate=function(n,s,a){return{x:o.number(n.x,s.x,a),y:o.number(n.y,s.y,a),z:o.number(n.z,s.z,a)}};var kt=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new bt,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Rr=function(n){function s(a){n.call(this),this._transitionable=new o.Transitionable(kt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,c){if(c===void 0&&(c={}),!this._validate(o.validateLight,a,c))for(var m in a){var w=a[m];o.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),w):this._transitionable.setValue(m,w)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,c,m){return(!m||m.validate!==!1)&&o.emitValidationErrors(this,a.call(o.validateStyle,o.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},s}(o.Evented),Nt=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Nt.prototype.getDash=function(n,s){var a=n.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(n,s)),this.dashEntry[a]},Nt.prototype.getDashRanges=function(n,s,a){var c=[],m=n.length%2==1?-n[n.length-1]*a:0,w=n[0]*a,k=!0;c.push({left:m,right:w,isDash:k,zeroLength:n[0]===0});for(var P=n[0],B=1;B<n.length;B++){var Z=n[B];c.push({left:m=P*a,right:w=(P+=Z)*a,isDash:k=!k,zeroLength:Z===0})}return c},Nt.prototype.addRoundDash=function(n,s,a){for(var c=s/2,m=-a;m<=a;m++)for(var w=this.width*(this.nextRow+a+m),k=0,P=n[k],B=0;B<this.width;B++){B/P.right>1&&(P=n[++k]);var Z=Math.abs(B-P.left),Y=Math.abs(B-P.right),J=Math.min(Z,Y),Q=void 0,le=m/a*(c+1);if(P.isDash){var oe=c-Math.abs(le);Q=Math.sqrt(J*J+oe*oe)}else Q=c-Math.sqrt(J*J+le*le);this.data[w+B]=Math.max(0,Math.min(255,Q+128))}},Nt.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var a=n[s],c=n[s+1];a.zeroLength?n.splice(s,1):c&&c.isDash===a.isDash&&(c.left=a.left,n.splice(s,1))}var m=n[0],w=n[n.length-1];m.isDash===w.isDash&&(m.left=w.left-this.width,w.right=m.right+this.width);for(var k=this.width*this.nextRow,P=0,B=n[P],Z=0;Z<this.width;Z++){Z/B.right>1&&(B=n[++P]);var Y=Math.abs(Z-B.left),J=Math.abs(Z-B.right),Q=Math.min(Y,J);this.data[k+Z]=Math.max(0,Math.min(255,(B.isDash?Q:-Q)+128))}},Nt.prototype.addDash=function(n,s){var a=s?7:0,c=2*a+1;if(this.nextRow+c>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var m=0,w=0;w<n.length;w++)m+=n[w];if(m!==0){var k=this.width/m,P=this.getDashRanges(n,this.width,k);s?this.addRoundDash(P,k,a):this.addRegularDash(P)}var B={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=c,this.dirty=!0,B},Nt.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var dr=function n(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var c=this.workerPool.acquire(this.id),m=0;m<c.length;m++){var w=new n.Actor(c[m],a,this.id);w.name="Worker "+m,this.actors.push(w)}};function it(n,s,a){var c=function(m,w){if(m)return a(m);if(w){var k=o.pick(o.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(k.vectorLayers=w.vector_layers,k.vectorLayerIds=k.vectorLayers.map(function(P){return P.id})),k.tiles=s.canonicalizeTileset(k,n.url),a(null,k)}};return n.url?o.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),o.ResourceType.Source),c):o.browser.frame(function(){return c(null,n)})}dr.prototype.broadcast=function(n,s,a){o.asyncAll(this.actors,function(c,m){c.send(n,s,m)},a=a||function(){})},dr.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},dr.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},dr.Actor=o.Actor;var rr=function(n,s,a){this.bounds=o.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=a||24};rr.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},rr.prototype.contains=function(n){var s=Math.pow(2,n.z),a=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=a&&n.x<m&&n.y>=c&&n.y<w};var wr=function(n){function s(a,c,m,w){if(n.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(c,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=it(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new rr(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var c=this;return this.setSourceProperty(function(){c._options.tiles=a}),this},s.prototype.setUrl=function(a){var c=this;return this.setSourceProperty(function(){c.url=a,c._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(m,o.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function k(P,B){return delete a.request,a.aborted?c(null):P&&P.status!==404?c(P):(B&&B.resourceTiming&&(a.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&a.setExpiryData(B),a.loadVectorData(B,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",w,k.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",w,k.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(o.Evented),Vr=function(n){function s(a,c,m,w){n.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},c),o.extend(this,o.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=it(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new rr(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,c){var m=this,w=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=o.getImage(this.map._requestManager.transformRequest(w,o.ResourceType.Tile),function(k,P){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(k)a.state="errored",c(k);else if(P){m.map._refreshExpiredTiles&&a.setExpiryData(P),delete P.cacheControl,delete P.expires;var B=m.map.painter.context,Z=B.gl;a.texture=m.map.painter.getTileTexture(P.width),a.texture?a.texture.update(P,{useMipmap:!0}):(a.texture=new o.Texture(B,P,Z.RGBA,{useMipmap:!0}),a.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&Z.texParameterf(Z.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),a.state="loaded",o.cacheEntryPossiblyAdded(m.dispatcher),c(null)}})},s.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request),c()},s.prototype.unloadTile=function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture),c()},s.prototype.hasTransition=function(){return!1},s}(o.Evented),zr=function(n){function s(a,c,m,w){n.call(this,a,c,m,w),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(k,P){k&&(a.state="errored",c(k)),P&&(a.dem=P,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}a.request=o.getImage(this.map._requestManager.transformRequest(m,o.ResourceType.Tile),function(k,P){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(k)a.state="errored",c(k);else if(P){this.map._refreshExpiredTiles&&a.setExpiryData(P),delete P.cacheControl,delete P.expires;var B=o.window.ImageBitmap&&P instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?P:o.browser.getImageData(P,1),Z={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:B,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",Z,w.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var c=a.canonical,m=Math.pow(2,c.z),w=(c.x-1+m)%m,k=c.x===0?a.wrap-1:a.wrap,P=(c.x+1+m)%m,B=c.x+1===m?a.wrap+1:a.wrap,Z={};return Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,w,c.y).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,P,c.y).key]={backfilled:!1},c.y>0&&(Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,w,c.y-1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,P,c.y-1).key]={backfilled:!1}),c.y+1<m&&(Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,w,c.y+1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,P,c.y+1).key]={backfilled:!1}),Z},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(Vr),ft=function(n){function s(a,c,m,w){n.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(w),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var k=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*k,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*k,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius||50)*k,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)a.fire(new o.ErrorEvent(c));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new o.Event("data",m))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new o.ErrorEvent(m));else{var w={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(w.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new o.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(a,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c),this},s.prototype.getClusterChildren=function(a,c){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},c),this},s.prototype.getClusterLeaves=function(a,c,m,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:m},w),this},s.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var m=o.extend({},this.workerOptions),w=this._data;typeof w=="string"?(m.request=this.map._requestManager.transformRequest(o.browser.resolveURL(w),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(w),this.actor.send(this.type+".loadData",m,function(k,P){c._removed||P&&P.abandoned||(c._loaded=!0,P&&P.resourceTiming&&P.resourceTiming[c.id]&&(c._resourceTiming=P.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:m.source},null),a(k))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,c){var m=this,w=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(w,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(k,P){return delete a.request,a.unloadVectorData(),a.aborted?c(null):k?c(k):(a.loadVectorData(P,m.map.painter,w==="reloadTile"),c(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(o.Evented),nt=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),gr=function(n){function s(a,c,m,w){n.call(this),this.id=a,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(a,c){var m=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(w,k){m._loaded=!0,w?m.fire(new o.ErrorEvent(w)):k&&(m.image=k,a&&(m.coordinates=a),c&&c(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;var m=a.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(k){for(var P=1/0,B=1/0,Z=-1/0,Y=-1/0,J=0,Q=k;J<Q.length;J+=1){var le=Q[J];P=Math.min(P,le.x),B=Math.min(B,le.y),Z=Math.max(Z,le.x),Y=Math.max(Y,le.y)}var oe=Math.max(Z-P,Y-B),ye=Math.max(0,Math.floor(-Math.log(oe)/Math.LN2)),ie=Math.pow(2,ye);return new o.CanonicalTileID(ye,Math.floor((P+Z)/2*ie),Math.floor((B+Y)/2*ie))}(m),this.minzoom=this.maxzoom=this.tileID.z;var w=m.map(function(k){return c.tileID.getTilePoint(k)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(o.Evented),on=function(n){function s(a,c,m,w){n.call(this,a,c,m,w),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];for(var m=0,w=c.urls;m<w.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(w[m],o.ResourceType.Source).url);o.getVideo(this.urls,function(k,P){a._loaded=!0,k?a.fire(new o.ErrorEvent(k)):P&&(a.video=P,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(gr),In=function(n){function s(a,c,m,w){n.call(this,a,c,m,w),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(k){return!Array.isArray(k)||k.length!==2||k.some(function(P){return typeof P!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,m=c.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var k=this.tiles[w];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var m=c[a];if(isNaN(m)||m<=0)return!0}return!1},s}(gr),Fi={vector:wr,raster:Vr,"raster-dem":zr,geojson:ft,video:on,image:gr,canvas:In};function Ni(n,s){var a=o.identity([]);return o.translate(a,a,[1,1,0]),o.scale(a,a,[.5*n.width,.5*n.height,1]),o.multiply(a,a,n.calculatePosMatrix(s.toUnwrapped()))}function Gr(n,s,a,c,m,w){var k=function(ye,ie,fe){if(ye)for(var _e=0,Te=ye;_e<Te.length;_e+=1){var Re=ie[Te[_e]];if(Re&&Re.source===fe&&Re.type==="fill-extrusion")return!0}else for(var De in ie){var Ve=ie[De];if(Ve.source===fe&&Ve.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),P=w.maxPitchScaleFactor(),B=n.tilesIn(c,P,k);B.sort(Ra);for(var Z=[],Y=0,J=B;Y<J.length;Y+=1){var Q=J[Y];Z.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(s,a,n._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,m,w,P,Ni(n.transform,Q.tileID))})}var le=function(ye){for(var ie={},fe={},_e=0,Te=ye;_e<Te.length;_e+=1){var Re=Te[_e],De=Re.queryResults,Ve=Re.wrappedTileID,Ze=fe[Ve]=fe[Ve]||{};for(var He in De)for(var Ke=De[He],ut=Ze[He]=Ze[He]||{},vt=ie[He]=ie[He]||[],Et=0,Tt=Ke;Et<Tt.length;Et+=1){var hr=Tt[Et];ut[hr.featureIndex]||(ut[hr.featureIndex]=!0,vt.push(hr))}}return ie}(Z);for(var oe in le)le[oe].forEach(function(ye){var ie=ye.feature,fe=n.getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=fe});return le}function Ra(n,s){var a=n.tileID,c=s.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}var Er=function(n,s){this.max=n,this.onRemove=s,this.reset()};Er.prototype.reset=function(){for(var n in this.data)for(var s=0,a=this.data[n];s<a.length;s+=1){var c=a[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},Er.prototype.add=function(n,s,a){var c=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var w={value:s,timeout:void 0};if(a!==void 0&&(w.timeout=setTimeout(function(){c.remove(n,w)},a)),this.data[m].push(w),this.order.push(m),this.order.length>this.max){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},Er.prototype.has=function(n){return n.wrapped().key in this.data},Er.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},Er.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},Er.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},Er.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},Er.prototype.remove=function(n,s){if(!this.has(n))return this;var a=n.wrapped().key,c=s===void 0?0:this.data[a].indexOf(s),m=this.data[a][c];return this.data[a].splice(c,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},Er.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},Er.prototype.filter=function(n){var s=[];for(var a in this.data)for(var c=0,m=this.data[a];c<m.length;c+=1){var w=m[c];n(w.value)||s.push(w)}for(var k=0,P=s;k<P.length;k+=1){var B=P[k];this.remove(B.value.tileID,B)}};var Wi=function(n,s,a){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Wi.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Wi.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Wi.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var $a={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},_r=function(n,s,a,c){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};_r.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},_r.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},_r.prototype.enableAttributes=function(n,s){for(var a=0;a<this.attributes.length;a++){var c=s.attributes[this.attributes[a].name];c!==void 0&&n.enableVertexAttribArray(c)}},_r.prototype.setVertexAttribPointers=function(n,s,a){for(var c=0;c<this.attributes.length;c++){var m=this.attributes[c],w=s.attributes[m.name];w!==void 0&&n.vertexAttribPointer(w,m.components,n[$a[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},_r.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var wt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};wt.prototype.get=function(){return this.current},wt.prototype.set=function(n){},wt.prototype.getDefault=function(){return this.default},wt.prototype.setDefault=function(){this.set(this.default)};var ti=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(wt),Yi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(wt),Zr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(wt),rs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(wt),er=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(wt),ri=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(wt),kr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(wt),bi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(wt),Kr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(wt),Pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(wt),xi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(wt),yn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(wt),Cr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}},s}(wt),br=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(wt),Fr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(wt),Ji=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(wt),sn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}},s}(wt),ln=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(wt),Ga=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(wt),ci=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(wt),vn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(wt),Pi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(wt),Tn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(wt),wa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(wt),Bo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(wt),_o=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(wt),Qn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(wt),Qi=function(n){function s(a){n.call(this,a),this.vao=a.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(wt),Ea=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(wt),sa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(wt),wi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(wt),xr=function(n){function s(a,c){n.call(this,a),this.context=a,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(wt),N=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(xr),G=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(xr),X=function(n,s,a,c){this.context=n,this.width=s,this.height=a;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new N(n,m),c&&(this.depthAttachment=new G(n,m))};X.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&n.deleteRenderbuffer(a)}n.deleteFramebuffer(this.framebuffer)};var $=function(n,s,a){this.func=n,this.mask=s,this.range=a};$.ReadOnly=!1,$.ReadWrite=!0,$.disabled=new $(519,$.ReadOnly,[0,1]);var se=function(n,s,a,c,m,w){this.test=n,this.ref=s,this.mask=a,this.fail=c,this.depthFail=m,this.pass=w};se.disabled=new se({func:519,mask:0},0,0,7680,7680,7680);var ve=function(n,s,a){this.blendFunction=n,this.blendColor=s,this.mask=a};ve.disabled=new ve(ve.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),ve.unblended=new ve(ve.Replace,o.Color.transparent,[!0,!0,!0,!0]),ve.alphaBlended=new ve([1,771],o.Color.transparent,[!0,!0,!0,!0]);var be=function(n,s,a){this.enable=n,this.mode=s,this.frontFace=a};be.disabled=new be(!1,1029,2305),be.backCCW=new be(!0,1029,2305);var H=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ti(this),this.clearDepth=new Yi(this),this.clearStencil=new Zr(this),this.colorMask=new rs(this),this.depthMask=new er(this),this.stencilMask=new ri(this),this.stencilFunc=new kr(this),this.stencilOp=new bi(this),this.stencilTest=new Kr(this),this.depthRange=new Pr(this),this.depthTest=new xi(this),this.depthFunc=new yn(this),this.blend=new Cr(this),this.blendFunc=new br(this),this.blendColor=new Fr(this),this.blendEquation=new Ji(this),this.cullFace=new sn(this),this.cullFaceSide=new ln(this),this.frontFace=new Ga(this),this.program=new ci(this),this.activeTexture=new vn(this),this.viewport=new Pi(this),this.bindFramebuffer=new Tn(this),this.bindRenderbuffer=new wa(this),this.bindTexture=new Bo(this),this.bindVertexBuffer=new _o(this),this.bindElementBuffer=new Qn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Qi(this),this.pixelStoreUnpack=new Ea(this),this.pixelStoreUnpackPremultiplyAlpha=new sa(this),this.pixelStoreUnpackFlipY=new wi(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};H.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},H.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},H.prototype.createIndexBuffer=function(n,s){return new Wi(this,n,s)},H.prototype.createVertexBuffer=function(n,s,a){return new _r(this,n,s,a)},H.prototype.createRenderbuffer=function(n,s,a){var c=this.gl,m=c.createRenderbuffer();return this.bindRenderbuffer.set(m),c.renderbufferStorage(c.RENDERBUFFER,n,s,a),this.bindRenderbuffer.set(null),m},H.prototype.createFramebuffer=function(n,s,a){return new X(this,n,s,a)},H.prototype.clear=function(n){var s=n.color,a=n.depth,c=this.gl,m=0;s&&(m|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c.clear(m)},H.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},H.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},H.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},H.prototype.setColorMode=function(n){o.deepEqual(n.blendFunction,ve.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},H.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ne=function(n){function s(a,c,m){var w=this;n.call(this),this.id=a,this.dispatcher=m,this.on("data",function(k){k.dataType==="source"&&k.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(k,P,B,Z){var Y=new Fi[P.type](k,P,B,Z);if(Y.id!==k)throw new Error("Expected Source id to be "+k+" instead of "+Y.id);return o.bindAll(["load","abort","unload","serialize","prepare"],Y),Y}(a,c,m,this),this._tiles={},this._cache=new Er(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[c];m.upload(a),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return o.values(this._tiles).map(function(a){return a.tileID}).sort(Ie).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var c=this,m=[];for(var w in this._tiles)this._isIdRenderable(w,a)&&m.push(this._tiles[w]);return a?m.sort(function(k,P){var B=k.tileID,Z=P.tileID,Y=new o.Point(B.canonical.x,B.canonical.y)._rotate(c.transform.angle),J=new o.Point(Z.canonical.x,Z.canonical.y)._rotate(c.transform.angle);return B.overscaledZ-Z.overscaledZ||J.y-Y.y||J.x-Y.x}).map(function(k){return k.tileID.key}):m.map(function(k){return k.tileID}).sort(Ie).map(function(k){return k.key})},s.prototype.hasRenderableParent=function(a){var c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,c){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,a,c)))},s.prototype._tileLoaded=function(a,c,m,w){if(w)return a.state="errored",void(w.status!==404?this._source.fire(new o.ErrorEvent(w,{tile:a})):this.update(this.transform));a.timeAdded=o.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var c=this.getRenderableIds(),m=0;m<c.length;m++){var w=c[m];if(a.neighboringTiles&&a.neighboringTiles[w]){var k=this.getTileByID(w);P(a,k),P(k,a)}}function P(B,Z){B.needsHillshadePrepare=!0;var Y=Z.tileID.canonical.x-B.tileID.canonical.x,J=Z.tileID.canonical.y-B.tileID.canonical.y,Q=Math.pow(2,B.tileID.canonical.z),le=Z.tileID.key;Y===0&&J===0||Math.abs(J)>1||(Math.abs(Y)>1&&(Math.abs(Y+Q)===1?Y+=Q:Math.abs(Y-Q)===1&&(Y-=Q)),Z.dem&&B.dem&&(B.dem.backfillBorder(Z.dem,Y,J),B.neighboringTiles&&B.neighboringTiles[le]&&(B.neighboringTiles[le].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,c,m,w){for(var k in this._tiles){var P=this._tiles[k];if(!(w[k]||!P.hasData()||P.tileID.overscaledZ<=c||P.tileID.overscaledZ>m)){for(var B=P.tileID;P&&P.tileID.overscaledZ>c+1;){var Z=P.tileID.scaledTo(P.tileID.overscaledZ-1);(P=this._tiles[Z.key])&&P.hasData()&&(B=Z)}for(var Y=B;Y.overscaledZ>c;)if(a[(Y=Y.scaledTo(Y.overscaledZ-1)).key]){w[B.key]=B;break}}}},s.prototype.findLoadedParent=function(a,c){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=c?m:null}for(var w=a.overscaledZ-1;w>=c;w--){var k=a.scaledTo(w),P=this._getLoadedTile(k);if(P)return P}},s.prototype._getLoadedTile=function(a){var c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var c=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,w=Math.floor(c*m*5),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(k)},s.prototype.handleWrapJump=function(a){var c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){var m={};for(var w in this._tiles){var k=this._tiles[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),m[k.tileID.key]=k}for(var P in this._tiles=m,this._timers)clearTimeout(this._timers[P]),delete this._timers[P];for(var B in this._tiles)this._setTileReloadTimer(B,this._tiles[B])}},s.prototype.update=function(a){var c=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ze){return new o.OverscaledTileID(Ze.canonical.z,Ze.wrap,Ze.canonical.z,Ze.canonical.x,Ze.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Ze){return c._source.hasTile(Ze)}))):m=[];var w=a.coveringZoomLevel(this._source),k=Math.max(w-s.maxOverzooming,this._source.minzoom),P=Math.max(w+s.maxUnderzooming,this._source.minzoom),B=this._updateRetainedTiles(m,w);if(Ue(this._source.type)){for(var Z={},Y={},J=0,Q=Object.keys(B);J<Q.length;J+=1){var le=Q[J],oe=B[le],ye=this._tiles[le];if(ye&&!(ye.fadeEndTime&&ye.fadeEndTime<=o.browser.now())){var ie=this.findLoadedParent(oe,k);ie&&(this._addTile(ie.tileID),Z[ie.tileID.key]=ie.tileID),Y[le]=oe}}for(var fe in this._retainLoadedChildren(Y,w,P,B),Z)B[fe]||(this._coveredTiles[fe]=!0,B[fe]=Z[fe])}for(var _e in B)this._tiles[_e].clearFadeHold();for(var Te=0,Re=o.keysDifference(this._tiles,B);Te<Re.length;Te+=1){var De=Re[Te],Ve=this._tiles[De];Ve.hasSymbolBuckets&&!Ve.holdingForFade()?Ve.setHoldDuration(this.map._fadeDuration):Ve.hasSymbolBuckets&&!Ve.symbolFadeFinished()||this._removeTile(De)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,c){for(var m={},w={},k=Math.max(c-s.maxOverzooming,this._source.minzoom),P=Math.max(c+s.maxUnderzooming,this._source.minzoom),B={},Z=0,Y=a;Z<Y.length;Z+=1){var J=Y[Z],Q=this._addTile(J);m[J.key]=J,Q.hasData()||c<this._source.maxzoom&&(B[J.key]=J)}this._retainLoadedChildren(B,c,P,m);for(var le=0,oe=a;le<oe.length;le+=1){var ye=oe[le],ie=this._tiles[ye.key];if(!ie.hasData()){if(c+1>this._source.maxzoom){var fe=ye.children(this._source.maxzoom)[0],_e=this.getTile(fe);if(_e&&_e.hasData()){m[fe.key]=fe;continue}}else{var Te=ye.children(this._source.maxzoom);if(m[Te[0].key]&&m[Te[1].key]&&m[Te[2].key]&&m[Te[3].key])continue}for(var Re=ie.wasRequested(),De=ye.overscaledZ-1;De>=k;--De){var Ve=ye.scaledTo(De);if(w[Ve.key]||(w[Ve.key]=!0,!(ie=this.getTile(Ve))&&Re&&(ie=this._addTile(Ve)),ie&&(m[Ve.key]=Ve,Re=ie.wasRequested(),ie.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var c=[],m=void 0,w=this._tiles[a].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){m=this._loadedParentTiles[w.key];break}c.push(w.key);var k=w.scaledTo(w.overscaledZ-1);if(m=this._getLoadedTile(k))break;w=k}for(var P=0,B=c;P<B.length;P+=1)this._loadedParentTiles[B[P]]=m}},s.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var m=Boolean(c);return m||(c=new o.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,m||this._source.fire(new o.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(a,c){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var w=c.getExpiryTimeout();w&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},w))},s.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,c,m){var w=this,k=[],P=this.transform;if(!P)return k;for(var B=m?P.getCameraQueryGeometry(a):a,Z=a.map(function(De){return P.pointCoordinate(De)}),Y=B.map(function(De){return P.pointCoordinate(De)}),J=this.getIds(),Q=1/0,le=1/0,oe=-1/0,ye=-1/0,ie=0,fe=Y;ie<fe.length;ie+=1){var _e=fe[ie];Q=Math.min(Q,_e.x),le=Math.min(le,_e.y),oe=Math.max(oe,_e.x),ye=Math.max(ye,_e.y)}for(var Te=function(De){var Ve=w._tiles[J[De]];if(!Ve.holdingForFade()){var Ze=Ve.tileID,He=Math.pow(2,P.zoom-Ve.tileID.overscaledZ),Ke=c*Ve.queryPadding*o.EXTENT/Ve.tileSize/He,ut=[Ze.getTilePoint(new o.MercatorCoordinate(Q,le)),Ze.getTilePoint(new o.MercatorCoordinate(oe,ye))];if(ut[0].x-Ke<o.EXTENT&&ut[0].y-Ke<o.EXTENT&&ut[1].x+Ke>=0&&ut[1].y+Ke>=0){var vt=Z.map(function(Tt){return Ze.getTilePoint(Tt)}),Et=Y.map(function(Tt){return Ze.getTilePoint(Tt)});k.push({tile:Ve,tileID:Ze,queryGeometry:vt,cameraQueryGeometry:Et,scale:He})}}},Re=0;Re<J.length;Re++)Te(Re);return k},s.prototype.getVisibleCoordinates=function(a){for(var c=this,m=this.getRenderableIds(a).map(function(B){return c._tiles[B].tileID}),w=0,k=m;w<k.length;w+=1){var P=k[w];P.posMatrix=this.transform.calculatePosMatrix(P.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=o.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,c,m){this._state.updateState(a=a||"_geojsonTileLayer",c,m)},s.prototype.removeFeatureState=function(a,c,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,m)},s.prototype.getFeatureState=function(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(a,c,m){var w=this._tiles[a];w&&w.setDependencies(c,m)},s.prototype.reloadTilesForDependencies=function(a,c){for(var m in this._tiles)this._tiles[m].hasDependency(a,c)&&this._reloadTile(m,"reloading");this._cache.filter(function(w){return!w.hasDependency(a,c)})},s}(o.Evented);function Ie(n,s){var a=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-a||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ue(n){return n==="raster"||n==="image"||n==="video"}function Ge(){return new o.window.Worker(xs.workerUrl)}ne.maxOverzooming=10,ne.maxUnderzooming=3;var Le="mapboxgl_preloaded_worker_pool",Ne=function(){this.active={}};Ne.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<Ne.workerCount;)this.workers.push(new Ge);return this.active[n]=!0,this.workers.slice()},Ne.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Ne.prototype.isPreloaded=function(){return!!this.active[Le]},Ne.prototype.numActive=function(){return Object.keys(this.active).length};var ct,tt=Math.floor(o.browser.hardwareConcurrency/2);function Ce(){return ct||(ct=new Ne),ct}function $e(n,s){var a={};for(var c in n)c!=="ref"&&(a[c]=n[c]);return o.refProperties.forEach(function(m){m in s&&(a[m]=s[m])}),a}function We(n){n=n.slice();for(var s=Object.create(null),a=0;a<n.length;a++)s[n[a].id]=n[a];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=$e(n[c],s[n[c].ref]));return n}Ne.workerCount=Math.max(Math.min(tt,6),1);var Je={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Kt(n,s,a){a.push({command:Je.addSource,args:[n,s[n]]})}function Ye(n,s,a){s.push({command:Je.removeSource,args:[n]}),a[n]=!0}function Ut(n,s,a,c){Ye(n,a,c),Kt(n,s,a)}function ir(n,s,a){var c;for(c in n[a])if(n[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;for(c in s[a])if(s[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;return!0}function Rt(n,s,a,c,m,w){var k;for(k in s=s||{},n=n||{})n.hasOwnProperty(k)&&(o.deepEqual(n[k],s[k])||a.push({command:w,args:[c,k,s[k],m]}));for(k in s)s.hasOwnProperty(k)&&!n.hasOwnProperty(k)&&(o.deepEqual(n[k],s[k])||a.push({command:w,args:[c,k,s[k],m]}))}function Ht(n){return n.id}function Xt(n,s){return n[s.id]=s,n}var Ui=function(n,s){this.reset(n,s)};Ui.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ui.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=o.clamp(n,0,1);for(var s=1,a=this._distances[s],c=n*this.paddedLength+this.padding;a<c&&s<this._distances.length;)a=this._distances[++s];var m=s-1,w=this._distances[m],k=a-w,P=k>0?(c-w)/k:0;return this.points[m].mult(1-P).add(this.points[s].mult(P))};var nr=function(n,s,a){var c=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/a),this.yCellCount=Math.ceil(s/a);for(var w=0;w<this.xCellCount*this.yCellCount;w++)c.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function sr(n,s,a,c,m){var w=o.create();return s?(o.scale(w,w,[1/m,1/m,1]),a||o.rotateZ(w,w,c.angle)):o.multiply(w,c.labelPlaneMatrix,n),w}function mr(n,s,a,c,m){if(s){var w=o.clone(n);return o.scale(w,w,[m,m,1]),a||o.rotateZ(w,w,-c.angle),w}return c.glCoordMatrix}function Ot(n,s){var a=[n.x,n.y,0,1];qr(a,a,s);var c=a[3];return{point:new o.Point(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function jt(n,s){return .5+n/s*.5}function ii(n,s){var a=n[0]/n[3],c=n[1]/n[3];return a>=-s[0]&&a<=s[0]&&c>=-s[1]&&c<=s[1]}function Sa(n,s,a,c,m,w,k,P){var B=c?n.textSizeData:n.iconSizeData,Z=o.evaluateSizeForZoom(B,a.transform.zoom),Y=[256/a.width*2+1,256/a.height*2+1],J=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;J.clear();for(var Q=n.lineVertexArray,le=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,oe=a.transform.width/a.transform.height,ye=!1,ie=0;ie<le.length;ie++){var fe=le.get(ie);if(fe.hidden||fe.writingMode===o.WritingMode.vertical&&!ye)hi(fe.numGlyphs,J);else{ye=!1;var _e=[fe.anchorX,fe.anchorY,0,1];if(o.transformMat4(_e,_e,s),ii(_e,Y)){var Te=jt(a.transform.cameraToCenterDistance,_e[3]),Re=o.evaluateSizeForFeature(B,Z,fe),De=k?Re/Te:Re*Te,Ve=new o.Point(fe.anchorX,fe.anchorY),Ze=Ot(Ve,m).point,He={},Ke=zn(fe,De,!1,P,s,m,w,n.glyphOffsetArray,Q,J,Ze,Ve,He,oe);ye=Ke.useVertical,(Ke.notEnoughRoom||ye||Ke.needsFlipping&&zn(fe,De,!0,P,s,m,w,n.glyphOffsetArray,Q,J,Ze,Ve,He,oe).notEnoughRoom)&&hi(fe.numGlyphs,J)}else hi(fe.numGlyphs,J)}}c?n.text.dynamicLayoutVertexBuffer.updateData(J):n.icon.dynamicLayoutVertexBuffer.updateData(J)}function Hr(n,s,a,c,m,w,k,P,B,Z,Y){var J=P.glyphStartIndex+P.numGlyphs,Q=P.lineStartIndex,le=P.lineStartIndex+P.lineLength,oe=s.getoffsetX(P.glyphStartIndex),ye=s.getoffsetX(J-1),ie=ur(n*oe,a,c,m,w,k,P.segment,Q,le,B,Z,Y);if(!ie)return null;var fe=ur(n*ye,a,c,m,w,k,P.segment,Q,le,B,Z,Y);return fe?{first:ie,last:fe}:null}function An(n,s,a,c){return n===o.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*c?{useVertical:!0}:(n===o.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function zn(n,s,a,c,m,w,k,P,B,Z,Y,J,Q,le){var oe,ye=s/24,ie=n.lineOffsetX*ye,fe=n.lineOffsetY*ye;if(n.numGlyphs>1){var _e=n.glyphStartIndex+n.numGlyphs,Te=n.lineStartIndex,Re=n.lineStartIndex+n.lineLength,De=Hr(ye,P,ie,fe,a,Y,J,n,B,w,Q);if(!De)return{notEnoughRoom:!0};var Ve=Ot(De.first.point,k).point,Ze=Ot(De.last.point,k).point;if(c&&!a){var He=An(n.writingMode,Ve,Ze,le);if(He)return He}oe=[De.first];for(var Ke=n.glyphStartIndex+1;Ke<_e-1;Ke++)oe.push(ur(ye*P.getoffsetX(Ke),ie,fe,a,Y,J,n.segment,Te,Re,B,w,Q));oe.push(De.last)}else{if(c&&!a){var ut=Ot(J,m).point,vt=n.lineStartIndex+n.segment+1,Et=new o.Point(B.getx(vt),B.gety(vt)),Tt=Ot(Et,m),hr=Tt.signedDistanceFromCamera>0?Tt.point:Ei(J,Et,ut,1,m),ot=An(n.writingMode,ut,hr,le);if(ot)return ot}var Mt=ur(ye*P.getoffsetX(n.glyphStartIndex),ie,fe,a,Y,J,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,B,w,Q);if(!Mt)return{notEnoughRoom:!0};oe=[Mt]}for(var Wt=0,Vt=oe;Wt<Vt.length;Wt+=1){var zt=Vt[Wt];o.addDynamicAttributes(Z,zt.point,zt.angle)}return{}}function Ei(n,s,a,c,m){var w=Ot(n.add(n.sub(s)._unit()),m).point,k=a.sub(w);return a.add(k._mult(c/k.mag()))}function ur(n,s,a,c,m,w,k,P,B,Z,Y,J){var Q=c?n-s:n+s,le=Q>0?1:-1,oe=0;c&&(le*=-1,oe=Math.PI),le<0&&(oe+=Math.PI);for(var ye=le>0?P+k:P+k+1,ie=m,fe=m,_e=0,Te=0,Re=Math.abs(Q),De=[];_e+Te<=Re;){if((ye+=le)<P||ye>=B)return null;if(fe=ie,De.push(ie),(ie=J[ye])===void 0){var Ve=new o.Point(Z.getx(ye),Z.gety(ye)),Ze=Ot(Ve,Y);if(Ze.signedDistanceFromCamera>0)ie=J[ye]=Ze.point;else{var He=ye-le;ie=Ei(_e===0?w:new o.Point(Z.getx(He),Z.gety(He)),Ve,fe,Re-_e+1,Y)}}_e+=Te,Te=fe.dist(ie)}var Ke=(Re-_e)/Te,ut=ie.sub(fe),vt=ut.mult(Ke)._add(fe);vt._add(ut._unit()._perp()._mult(a*le));var Et=oe+Math.atan2(ie.y-fe.y,ie.x-fe.x);return De.push(vt),{point:vt,angle:Et,path:De}}nr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},nr.prototype.insert=function(n,s,a,c,m){this._forEachCell(s,a,c,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(m)},nr.prototype.insertCircle=function(n,s,a,c){this._forEachCell(s-c,a-c,s+c,a+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(a),this.circles.push(c)},nr.prototype._insertBoxCell=function(n,s,a,c,m,w){this.boxCells[m].push(w)},nr.prototype._insertCircleCell=function(n,s,a,c,m,w){this.circleCells[m].push(w)},nr.prototype._query=function(n,s,a,c,m,w){if(a<0||n>this.width||c<0||s>this.height)return!m&&[];var k=[];if(n<=0&&s<=0&&this.width<=a&&this.height<=c){if(m)return!0;for(var P=0;P<this.boxKeys.length;P++)k.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(var B=0;B<this.circleKeys.length;B++){var Z=this.circles[3*B],Y=this.circles[3*B+1],J=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:Z-J,y1:Y-J,x2:Z+J,y2:Y+J})}return w?k.filter(w):k}return this._forEachCell(n,s,a,c,this._queryCell,k,{hitTest:m,seenUids:{box:{},circle:{}}},w),m?k.length>0:k},nr.prototype._queryCircle=function(n,s,a,c,m){var w=n-a,k=n+a,P=s-a,B=s+a;if(k<0||w>this.width||B<0||P>this.height)return!c&&[];var Z=[];return this._forEachCell(w,P,k,B,this._queryCellCircle,Z,{hitTest:c,circle:{x:n,y:s,radius:a},seenUids:{box:{},circle:{}}},m),c?Z.length>0:Z},nr.prototype.query=function(n,s,a,c,m){return this._query(n,s,a,c,!1,m)},nr.prototype.hitTest=function(n,s,a,c,m){return this._query(n,s,a,c,!0,m)},nr.prototype.hitTestCircle=function(n,s,a,c){return this._queryCircle(n,s,a,!0,c)},nr.prototype._queryCell=function(n,s,a,c,m,w,k,P){var B=k.seenUids,Z=this.boxCells[m];if(Z!==null)for(var Y=this.bboxes,J=0,Q=Z;J<Q.length;J+=1){var le=Q[J];if(!B.box[le]){B.box[le]=!0;var oe=4*le;if(n<=Y[oe+2]&&s<=Y[oe+3]&&a>=Y[oe+0]&&c>=Y[oe+1]&&(!P||P(this.boxKeys[le]))){if(k.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[le],x1:Y[oe],y1:Y[oe+1],x2:Y[oe+2],y2:Y[oe+3]})}}}var ye=this.circleCells[m];if(ye!==null)for(var ie=this.circles,fe=0,_e=ye;fe<_e.length;fe+=1){var Te=_e[fe];if(!B.circle[Te]){B.circle[Te]=!0;var Re=3*Te;if(this._circleAndRectCollide(ie[Re],ie[Re+1],ie[Re+2],n,s,a,c)&&(!P||P(this.circleKeys[Te]))){if(k.hitTest)return w.push(!0),!0;var De=ie[Re],Ve=ie[Re+1],Ze=ie[Re+2];w.push({key:this.circleKeys[Te],x1:De-Ze,y1:Ve-Ze,x2:De+Ze,y2:Ve+Ze})}}}},nr.prototype._queryCellCircle=function(n,s,a,c,m,w,k,P){var B=k.circle,Z=k.seenUids,Y=this.boxCells[m];if(Y!==null)for(var J=this.bboxes,Q=0,le=Y;Q<le.length;Q+=1){var oe=le[Q];if(!Z.box[oe]){Z.box[oe]=!0;var ye=4*oe;if(this._circleAndRectCollide(B.x,B.y,B.radius,J[ye+0],J[ye+1],J[ye+2],J[ye+3])&&(!P||P(this.boxKeys[oe])))return w.push(!0),!0}}var ie=this.circleCells[m];if(ie!==null)for(var fe=this.circles,_e=0,Te=ie;_e<Te.length;_e+=1){var Re=Te[_e];if(!Z.circle[Re]){Z.circle[Re]=!0;var De=3*Re;if(this._circlesCollide(fe[De],fe[De+1],fe[De+2],B.x,B.y,B.radius)&&(!P||P(this.circleKeys[Re])))return w.push(!0),!0}}},nr.prototype._forEachCell=function(n,s,a,c,m,w,k,P){for(var B=this._convertToXCellCoord(n),Z=this._convertToYCellCoord(s),Y=this._convertToXCellCoord(a),J=this._convertToYCellCoord(c),Q=B;Q<=Y;Q++)for(var le=Z;le<=J;le++)if(m.call(this,n,s,a,c,this.xCellCount*le+Q,w,k,P))return},nr.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},nr.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},nr.prototype._circlesCollide=function(n,s,a,c,m,w){var k=c-n,P=m-s,B=a+w;return B*B>k*k+P*P},nr.prototype._circleAndRectCollide=function(n,s,a,c,m,w,k){var P=(w-c)/2,B=Math.abs(n-(c+P));if(B>P+a)return!1;var Z=(k-m)/2,Y=Math.abs(s-(m+Z));if(Y>Z+a)return!1;if(B<=P||Y<=Z)return!0;var J=B-P,Q=Y-Z;return J*J+Q*Q<=a*a};var $n=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function hi(n,s){for(var a=0;a<n;a++){var c=s.length;s.resize(c+4),s.float32.set($n,3*c)}}function qr(n,s,a){var c=s[0],m=s[1];return n[0]=a[0]*c+a[4]*m+a[12],n[1]=a[1]*c+a[5]*m+a[13],n[3]=a[3]*c+a[7]*m+a[15],n}var la=function(n,s,a){s===void 0&&(s=new nr(n.width+200,n.height+200,25)),a===void 0&&(a=new nr(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function Br(n,s,a){return s*(o.EXTENT/(n.tileSize*Math.pow(2,a-n.tileID.overscaledZ)))}la.prototype.placeCollisionBox=function(n,s,a,c,m){var w=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),k=a*w.perspectiveRatio,P=n.x1*k+w.point.x,B=n.y1*k+w.point.y,Z=n.x2*k+w.point.x,Y=n.y2*k+w.point.y;return!this.isInsideGrid(P,B,Z,Y)||!s&&this.grid.hitTest(P,B,Z,Y,m)?{box:[],offscreen:!1}:{box:[P,B,Z,Y],offscreen:this.isOffscreen(P,B,Z,Y)}},la.prototype.placeCollisionCircles=function(n,s,a,c,m,w,k,P,B,Z,Y,J,Q){var le=[],oe=new o.Point(s.anchorX,s.anchorY),ye=Ot(oe,w),ie=jt(this.transform.cameraToCenterDistance,ye.signedDistanceFromCamera),fe=(Z?m/ie:m*ie)/o.ONE_EM,_e=Ot(oe,k).point,Te=Hr(fe,c,s.lineOffsetX*fe,s.lineOffsetY*fe,!1,_e,oe,s,a,k,{}),Re=!1,De=!1,Ve=!0;if(Te){for(var Ze=.5*J*ie+Q,He=new o.Point(-100,-100),Ke=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new Ui,vt=Te.first,Et=Te.last,Tt=[],hr=vt.path.length-1;hr>=1;hr--)Tt.push(vt.path[hr]);for(var ot=1;ot<Et.path.length;ot++)Tt.push(Et.path[ot]);var Mt=2.5*Ze;if(P){var Wt=Tt.map(function(ws){return Ot(ws,P)});Tt=Wt.some(function(ws){return ws.signedDistanceFromCamera<=0})?[]:Wt.map(function(ws){return ws.point})}var Vt=[];if(Tt.length>0){for(var zt=Tt[0].clone(),Bt=Tt[0].clone(),At=1;At<Tt.length;At++)zt.x=Math.min(zt.x,Tt[At].x),zt.y=Math.min(zt.y,Tt[At].y),Bt.x=Math.max(Bt.x,Tt[At].x),Bt.y=Math.max(Bt.y,Tt[At].y);Vt=zt.x>=He.x&&Bt.x<=Ke.x&&zt.y>=He.y&&Bt.y<=Ke.y?[Tt]:Bt.x<He.x||zt.x>Ke.x||Bt.y<He.y||zt.y>Ke.y?[]:o.clipLine([Tt],He.x,He.y,Ke.x,Ke.y)}for(var Dt=0,Li=Vt;Dt<Li.length;Dt+=1){var Bn;ut.reset(Li[Dt],.25*Ze),Bn=ut.length<=.5*Ze?1:Math.ceil(ut.paddedLength/Mt)+1;for(var qa=0;qa<Bn;qa++){var wn=qa/Math.max(Bn-1,1),gi=ut.lerp(wn),En=gi.x+100,Da=gi.y+100;le.push(En,Da,Ze,0);var Ma=En-Ze,Wl=Da-Ze,co=En+Ze,Ja=Da+Ze;if(Ve=Ve&&this.isOffscreen(Ma,Wl,co,Ja),De=De||this.isInsideGrid(Ma,Wl,co,Ja),!n&&this.grid.hitTestCircle(En,Da,Ze,Y)&&(Re=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Re}}}}return{circles:!B&&Re||!De?[]:le,offscreen:Ve,collisionDetected:Re}},la.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,c=1/0,m=-1/0,w=-1/0,k=0,P=n;k<P.length;k+=1){var B=P[k],Z=new o.Point(B.x+100,B.y+100);a=Math.min(a,Z.x),c=Math.min(c,Z.y),m=Math.max(m,Z.x),w=Math.max(w,Z.y),s.push(Z)}for(var Y={},J={},Q=0,le=this.grid.query(a,c,m,w).concat(this.ignoredGrid.query(a,c,m,w));Q<le.length;Q+=1){var oe=le[Q],ye=oe.key;if(Y[ye.bucketInstanceId]===void 0&&(Y[ye.bucketInstanceId]={}),!Y[ye.bucketInstanceId][ye.featureIndex]){var ie=[new o.Point(oe.x1,oe.y1),new o.Point(oe.x2,oe.y1),new o.Point(oe.x2,oe.y2),new o.Point(oe.x1,oe.y2)];o.polygonIntersectsPolygon(s,ie)&&(Y[ye.bucketInstanceId][ye.featureIndex]=!0,J[ye.bucketInstanceId]===void 0&&(J[ye.bucketInstanceId]=[]),J[ye.bucketInstanceId].push(ye.featureIndex))}}return J},la.prototype.insertCollisionBox=function(n,s,a,c,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:c,collisionGroupID:m},n[0],n[1],n[2],n[3])},la.prototype.insertCollisionCircles=function(n,s,a,c,m){for(var w=s?this.ignoredGrid:this.grid,k={bucketInstanceId:a,featureIndex:c,collisionGroupID:m},P=0;P<n.length;P+=4)w.insertCircle(k,n[P],n[P+1],n[P+2])},la.prototype.projectAndGetPerspectiveRatio=function(n,s,a){var c=[s,a,0,1];return qr(c,c,n),{point:new o.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},la.prototype.isOffscreen=function(n,s,a,c){return a<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},la.prototype.isInsideGrid=function(n,s,a,c){return a>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},la.prototype.getViewportMatrix=function(){var n=o.identity([]);return o.translate(n,n,[-100,-100,0]),n};var Ci=function(n,s,a,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&a?1:0,this.placed=a};Ci.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Pn=function(n,s,a,c,m){this.text=new Ci(n?n.text:null,s,a,m),this.icon=new Ci(n?n.icon:null,s,c,m)};Pn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Xs=function(n,s,a){this.text=n,this.icon=s,this.skipFade=a},ni=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},ka=function(n,s,a,c,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=c,this.tileID=m},ai=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Nr(n,s,a,c,m){var w=o.getAnchorAlignment(n),k=-(w.horizontalAlign-.5)*s,P=-(w.verticalAlign-.5)*a,B=o.evaluateVariableOffset(n,c);return new o.Point(k+B[0]*m,P+B[1]*m)}function qi(n,s,a,c,m,w){var k=n.x1,P=n.x2,B=n.y1,Z=n.y2,Y=n.anchorPointX,J=n.anchorPointY,Q=new o.Point(s,a);return c&&Q._rotate(m?w:-w),{x1:k+Q.x,y1:B+Q.y,x2:P+Q.x,y2:Z+Q.y,anchorPointX:Y,anchorPointY:J}}ai.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[n]};var pi=function(n,s,a,c){this.transform=n.clone(),this.collisionIndex=new la(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new ai(a),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function ua(n,s,a,c,m){n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0)}pi.prototype.getBucketParts=function(n,s,a,c){var m=a.getBucket(s),w=a.latestFeatureIndex;if(m&&w&&s.id===m.layerIds[0]){var k=a.collisionBoxArray,P=m.layers[0].layout,B=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),Z=a.tileSize/o.EXTENT,Y=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),J=P.get("text-pitch-alignment")==="map",Q=P.get("text-rotation-alignment")==="map",le=Br(a,1,this.transform.zoom),oe=sr(Y,J,Q,this.transform,le),ye=null;if(J){var ie=mr(Y,J,Q,this.transform,le);ye=o.multiply([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[m.bucketInstanceId]=new ka(m.bucketInstanceId,w,m.sourceLayerIndex,m.index,a.tileID);var fe={bucket:m,layout:P,posMatrix:Y,textLabelPlaneMatrix:oe,labelToScreenMatrix:ye,scale:B,textPixelRatio:Z,holdingForFade:a.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(c)for(var _e=0,Te=m.sortKeyRanges;_e<Te.length;_e+=1){var Re=Te[_e];n.push({sortKey:Re.sortKey,symbolInstanceStart:Re.symbolInstanceStart,symbolInstanceEnd:Re.symbolInstanceEnd,parameters:fe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:fe})}},pi.prototype.attemptAnchorPlacement=function(n,s,a,c,m,w,k,P,B,Z,Y,J,Q,le,oe){var ye,ie=[J.textOffset0,J.textOffset1],fe=Nr(n,a,c,ie,m),_e=this.collisionIndex.placeCollisionBox(qi(s,fe.x,fe.y,w,k,this.transform.angle),Y,P,B,Z.predicate);if(!oe||this.collisionIndex.placeCollisionBox(qi(oe,fe.x,fe.y,w,k,this.transform.angle),Y,P,B,Z.predicate).box.length!==0)return _e.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(ye=this.prevPlacement.variableOffsets[J.crossTileID].anchor),this.variableOffsets[J.crossTileID]={textOffset:ie,width:a,height:c,anchor:n,textBoxScale:m,prevAnchor:ye},this.markUsedJustification(Q,n,J,le),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,le,J),this.placedOrientations[J.crossTileID]=le),{shift:fe,placedGlyphBoxes:_e}):void 0},pi.prototype.placeLayerBucketPart=function(n,s,a){var c=this,m=n.parameters,w=m.bucket,k=m.layout,P=m.posMatrix,B=m.textLabelPlaneMatrix,Z=m.labelToScreenMatrix,Y=m.textPixelRatio,J=m.holdingForFade,Q=m.collisionBoxArray,le=m.partiallyEvaluatedTextSize,oe=m.collisionGroup,ye=k.get("text-optional"),ie=k.get("icon-optional"),fe=k.get("text-allow-overlap"),_e=k.get("icon-allow-overlap"),Te=k.get("text-rotation-alignment")==="map",Re=k.get("text-pitch-alignment")==="map",De=k.get("icon-text-fit")!=="none",Ve=k.get("symbol-z-order")==="viewport-y",Ze=fe&&(_e||!w.hasIconData()||ie),He=_e&&(fe||!w.hasTextData()||ye);!w.collisionArrays&&Q&&w.deserializeCollisionBoxes(Q);var Ke=function(ot,Mt){if(!s[ot.crossTileID])if(J)c.placements[ot.crossTileID]=new Xs(!1,!1,!1);else{var Wt,Vt=!1,zt=!1,Bt=!0,At=null,Dt={box:null,offscreen:null},Li={box:null,offscreen:null},Bn=null,qa=null,wn=0,gi=0,En=0;Mt.textFeatureIndex?wn=Mt.textFeatureIndex:ot.useRuntimeCollisionCircles&&(wn=ot.featureIndex),Mt.verticalTextFeatureIndex&&(gi=Mt.verticalTextFeatureIndex);var Da=Mt.textBox;if(Da){var Ma=function(Or){var Yo=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Or&&c.prevPlacement){var oa=c.prevPlacement.placedOrientations[ot.crossTileID];oa&&(c.placedOrientations[ot.crossTileID]=oa,c.markUsedOrientation(w,Yo=oa,ot))}return Yo},Wl=function(Or,Yo){if(w.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&Mt.verticalTextBox)for(var oa=0,wu=w.writingModes;oa<wu.length&&(wu[oa]===o.WritingMode.vertical?(Dt=Yo(),Li=Dt):Dt=Or(),!(Dt&&Dt.box&&Dt.box.length));oa+=1);else Dt=Or()};if(k.get("text-variable-anchor")){var co=k.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[ot.crossTileID]){var Ja=c.prevPlacement.variableOffsets[ot.crossTileID];co.indexOf(Ja.anchor)>0&&(co=co.filter(function(Or){return Or!==Ja.anchor})).unshift(Ja.anchor)}var ws=function(Or,Yo,oa){for(var wu=Or.x2-Or.x1,Gp=Or.y2-Or.y1,Rh=ot.textBoxScale,cp=De&&!_e?Yo:null,Fs={box:[],offscreen:!1},Wu=fe?2*co.length:co.length,Mo=0;Mo<Wu;++Mo){var Eu=c.attemptAnchorPlacement(co[Mo%co.length],Or,wu,Gp,Rh,Te,Re,Y,P,oe,Mo>=co.length,ot,w,oa,cp);if(Eu&&(Fs=Eu.placedGlyphBoxes)&&Fs.box&&Fs.box.length){Vt=!0,At=Eu.shift;break}}return Fs};Wl(function(){return ws(Da,Mt.iconBox,o.WritingMode.horizontal)},function(){var Or=Mt.verticalTextBox;return w.allowVerticalPlacement&&!(Dt&&Dt.box&&Dt.box.length)&&ot.numVerticalGlyphVertices>0&&Or?ws(Or,Mt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Dt&&(Vt=Dt.box,Bt=Dt.offscreen);var Po=Ma(Dt&&Dt.box);if(!Vt&&c.prevPlacement){var ho=c.prevPlacement.variableOffsets[ot.crossTileID];ho&&(c.variableOffsets[ot.crossTileID]=ho,c.markUsedJustification(w,ho.anchor,ot,Po))}}else{var Co=function(Or,Yo){var oa=c.collisionIndex.placeCollisionBox(Or,fe,Y,P,oe.predicate);return oa&&oa.box&&oa.box.length&&(c.markUsedOrientation(w,Yo,ot),c.placedOrientations[ot.crossTileID]=Yo),oa};Wl(function(){return Co(Da,o.WritingMode.horizontal)},function(){var Or=Mt.verticalTextBox;return w.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&Or?Co(Or,o.WritingMode.vertical):{box:null,offscreen:null}}),Ma(Dt&&Dt.box&&Dt.box.length)}}if(Vt=(Wt=Dt)&&Wt.box&&Wt.box.length>0,Bt=Wt&&Wt.offscreen,ot.useRuntimeCollisionCircles){var Xu=w.text.placedSymbolArray.get(ot.centerJustifiedTextSymbolIndex),Tl=o.evaluateSizeForFeature(w.textSizeData,le,Xu),Yl=k.get("text-padding");Bn=c.collisionIndex.placeCollisionCircles(fe,Xu,w.lineVertexArray,w.glyphOffsetArray,Tl,P,B,Z,a,Re,oe.predicate,ot.collisionCircleDiameter,Yl),Vt=fe||Bn.circles.length>0&&!Bn.collisionDetected,Bt=Bt&&Bn.offscreen}if(Mt.iconFeatureIndex&&(En=Mt.iconFeatureIndex),Mt.iconBox){var _c=function(Or){var Yo=De&&At?qi(Or,At.x,At.y,Te,Re,c.transform.angle):Or;return c.collisionIndex.placeCollisionBox(Yo,_e,Y,P,oe.predicate)};zt=Li&&Li.box&&Li.box.length&&Mt.verticalIconBox?(qa=_c(Mt.verticalIconBox)).box.length>0:(qa=_c(Mt.iconBox)).box.length>0,Bt=Bt&&qa.offscreen}var Do=ye||ot.numHorizontalGlyphVertices===0&&ot.numVerticalGlyphVertices===0,pn=ie||ot.numIconVertices===0;if(Do||pn?pn?Do||(zt=zt&&Vt):Vt=zt&&Vt:zt=Vt=zt&&Vt,Vt&&Wt&&Wt.box&&c.collisionIndex.insertCollisionBox(Wt.box,k.get("text-ignore-placement"),w.bucketInstanceId,Li&&Li.box&&gi?gi:wn,oe.ID),zt&&qa&&c.collisionIndex.insertCollisionBox(qa.box,k.get("icon-ignore-placement"),w.bucketInstanceId,En,oe.ID),Bn&&(Vt&&c.collisionIndex.insertCollisionCircles(Bn.circles,k.get("text-ignore-placement"),w.bucketInstanceId,wn,oe.ID),a)){var Al=w.bucketInstanceId,Es=c.collisionCircleArrays[Al];Es===void 0&&(Es=c.collisionCircleArrays[Al]=new ni);for(var zl=0;zl<Bn.circles.length;zl+=4)Es.circles.push(Bn.circles[zl+0]),Es.circles.push(Bn.circles[zl+1]),Es.circles.push(Bn.circles[zl+2]),Es.circles.push(Bn.collisionDetected?1:0)}c.placements[ot.crossTileID]=new Xs(Vt||Ze,zt||He,Bt||w.justReloaded),s[ot.crossTileID]=!0}};if(Ve)for(var ut=w.getSortedSymbolIndexes(this.transform.angle),vt=ut.length-1;vt>=0;--vt){var Et=ut[vt];Ke(w.symbolInstances.get(Et),w.collisionArrays[Et])}else for(var Tt=n.symbolInstanceStart;Tt<n.symbolInstanceEnd;Tt++)Ke(w.symbolInstances.get(Tt),w.collisionArrays[Tt]);if(a&&w.bucketInstanceId in this.collisionCircleArrays){var hr=this.collisionCircleArrays[w.bucketInstanceId];o.invert(hr.invProjMatrix,P),hr.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},pi.prototype.markUsedJustification=function(n,s,a,c){var m;m=c===o.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(s)];for(var w=0,k=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];w<k.length;w+=1){var P=k[w];P>=0&&(n.text.placedSymbolArray.get(P).crossTileID=m>=0&&P!==m?0:a.crossTileID)}},pi.prototype.markUsedOrientation=function(n,s,a){for(var c=s===o.WritingMode.horizontal||s===o.WritingMode.horizontalOnly?s:0,m=s===o.WritingMode.vertical?s:0,w=0,k=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];w<k.length;w+=1)n.text.placedSymbolArray.get(k[w]).placedOrientation=c;a.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},pi.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},w=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(var P in this.placements){var B=this.placements[P],Z=m[P];Z?(this.opacities[P]=new Pn(Z,c,B.text,B.icon),a=a||B.text!==Z.text.placed||B.icon!==Z.icon.placed):(this.opacities[P]=new Pn(null,c,B.text,B.icon,B.skipFade),a=a||B.text||B.icon)}for(var Y in m){var J=m[Y];if(!this.opacities[Y]){var Q=new Pn(J,c,!1,!1);Q.isHidden()||(this.opacities[Y]=Q,a=a||J.text.placed||J.icon.placed)}}for(var le in w)this.variableOffsets[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.variableOffsets[le]=w[le]);for(var oe in k)this.placedOrientations[oe]||!this.opacities[oe]||this.opacities[oe].isHidden()||(this.placedOrientations[oe]=k[oe]);a?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},pi.prototype.updateLayerOpacities=function(n,s){for(var a={},c=0,m=s;c<m.length;c+=1){var w=m[c],k=w.getBucket(n);k&&w.latestFeatureIndex&&n.id===k.layerIds[0]&&this.updateBucketOpacities(k,a,w.collisionBoxArray)}},pi.prototype.updateBucketOpacities=function(n,s,a){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,w=new Pn(null,0,!1,!1,!0),k=m.get("text-allow-overlap"),P=m.get("icon-allow-overlap"),B=m.get("text-variable-anchor"),Z=m.get("text-rotation-alignment")==="map",Y=m.get("text-pitch-alignment")==="map",J=m.get("icon-text-fit")!=="none",Q=new Pn(null,0,k&&(P||!n.hasIconData()||m.get("icon-optional")),P&&(k||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&a&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(a);for(var le=function(fe,_e,Te){for(var Re=0;Re<_e/4;Re++)fe.opacityVertexArray.emplaceBack(Te)},oe=function(fe){var _e=n.symbolInstances.get(fe),Te=_e.numHorizontalGlyphVertices,Re=_e.numVerticalGlyphVertices,De=_e.crossTileID,Ve=c.opacities[De];s[De]?Ve=w:Ve||(c.opacities[De]=Ve=Q),s[De]=!0;var Ze=_e.numIconVertices>0,He=c.placedOrientations[_e.crossTileID],Ke=He===o.WritingMode.vertical,ut=He===o.WritingMode.horizontal||He===o.WritingMode.horizontalOnly;if(Te>0||Re>0){var vt=Fo(Ve.text);le(n.text,Te,Ke?un:vt),le(n.text,Re,ut?un:vt);var Et=Ve.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(function(Dt){Dt>=0&&(n.text.placedSymbolArray.get(Dt).hidden=Et||Ke?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=Et||ut?1:0);var Tt=c.variableOffsets[_e.crossTileID];Tt&&c.markUsedJustification(n,Tt.anchor,_e,He);var hr=c.placedOrientations[_e.crossTileID];hr&&(c.markUsedJustification(n,"left",_e,hr),c.markUsedOrientation(n,hr,_e))}if(Ze){var ot=Fo(Ve.icon),Mt=!(J&&_e.verticalPlacedIconSymbolIndex&&Ke);_e.placedIconSymbolIndex>=0&&(le(n.icon,_e.numIconVertices,Mt?ot:un),n.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Ve.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(le(n.icon,_e.numVerticalIconVertices,Mt?un:ot),n.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Ve.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Wt=n.collisionArrays[fe];if(Wt){var Vt=new o.Point(0,0);if(Wt.textBox||Wt.verticalTextBox){var zt=!0;if(B){var Bt=c.variableOffsets[De];Bt?(Vt=Nr(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),Z&&Vt._rotate(Y?c.transform.angle:-c.transform.angle)):zt=!1}Wt.textBox&&ua(n.textCollisionBox.collisionVertexArray,Ve.text.placed,!zt||Ke,Vt.x,Vt.y),Wt.verticalTextBox&&ua(n.textCollisionBox.collisionVertexArray,Ve.text.placed,!zt||ut,Vt.x,Vt.y)}var At=Boolean(!ut&&Wt.verticalIconBox);Wt.iconBox&&ua(n.iconCollisionBox.collisionVertexArray,Ve.icon.placed,At,J?Vt.x:0,J?Vt.y:0),Wt.verticalIconBox&&ua(n.iconCollisionBox.collisionVertexArray,Ve.icon.placed,!At,J?Vt.x:0,J?Vt.y:0)}}},ye=0;ye<n.symbolInstances.length;ye++)oe(ye);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var ie=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ie.invProjMatrix,n.placementViewportMatrix=ie.viewportMatrix,n.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},pi.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},pi.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},pi.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},pi.prototype.stillRecent=function(n,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>n},pi.prototype.setStale=function(){this.stale=!0};var Nn=Math.pow(2,25),yc=Math.pow(2,24),Oo=Math.pow(2,17),is=Math.pow(2,16),Vo=Math.pow(2,9),Ws=Math.pow(2,8),Ys=Math.pow(2,1);function Fo(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,a=Math.floor(127*n.opacity);return a*Nn+s*yc+a*Oo+s*is+a*Vo+s*Ws+a*Ys+s}var un=0,Ba=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ba.prototype.continuePlacement=function(n,s,a,c,m){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(k,P){return k.sortKey-P.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var ea=function(n,s,a,c,m,w,k){this.placement=new pi(n,m,w,k),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=c,this._done=!1};ea.prototype.isDone=function(){return this._done},ea.prototype.continuePlacement=function(n,s,a){for(var c=this,m=o.browser.now(),w=function(){var B=o.browser.now()-m;return!c._forceFullPlacement&&B>2};this._currentPlacementIndex>=0;){var k=s[n[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=P)&&(!k.maxzoom||k.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Ba(k)),this._inProgressLayer.continuePlacement(a[k.source],this.placement,this._showCollisionBoxes,k,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ea.prototype.commit=function(n){return this.placement.commit(n),this.placement};var bo=512/o.EXTENT/2,Cn=function(n,s,a){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var c=0;c<s.length;c++){var m=s.get(c),w=m.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};Cn.prototype.getScaledCoordinates=function(n,s){var a=bo/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*o.EXTENT+n.anchorX)*a),y:Math.floor((s.canonical.y*o.EXTENT+n.anchorY)*a)}},Cn.prototype.findMatches=function(n,s,a){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var w=n.get(m);if(!w.crossTileID){var k=this.indexedSymbolInstances[w.key];if(k)for(var P=this.getScaledCoordinates(w,s),B=0,Z=k;B<Z.length;B+=1){var Y=Z[B];if(Math.abs(Y.coord.x-P.x)<=c&&Math.abs(Y.coord.y-P.y)<=c&&!a[Y.crossTileID]){a[Y.crossTileID]=!0,w.crossTileID=Y.crossTileID;break}}}}};var oi=function(){this.maxCrossTileID=0};oi.prototype.generate=function(){return++this.maxCrossTileID};var Ia=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ia.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var a in this.indexes){var c=this.indexes[a],m={};for(var w in c){var k=c[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),m[k.tileID.key]=k}this.indexes[a]=m}this.lng=n},Ia.prototype.addBucket=function(n,s,a){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var k=this.indexes[w];if(Number(w)>n.overscaledZ)for(var P in k){var B=k[P];B.tileID.isChildOf(n)&&B.findMatches(s.symbolInstances,n,m)}else{var Z=k[n.scaledTo(Number(w)).key];Z&&Z.findMatches(s.symbolInstances,n,m)}}for(var Y=0;Y<s.symbolInstances.length;Y++){var J=s.symbolInstances.get(Y);J.crossTileID||(J.crossTileID=a.generate(),m[J.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Cn(n,s.symbolInstances,s.bucketInstanceId),!0},Ia.prototype.removeBucketCrossTileIDs=function(n,s){for(var a in s.indexedSymbolInstances)for(var c=0,m=s.indexedSymbolInstances[a];c<m.length;c+=1)delete this.usedCrossTileIDs[n][m[c].crossTileID]},Ia.prototype.removeStaleBuckets=function(n){var s=!1;for(var a in this.indexes){var c=this.indexes[a];for(var m in c)n[c[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,c[m]),delete c[m],s=!0)}return s};var Ae=function(){this.layerIndexes={},this.crossTileIDs=new oi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ae.prototype.addLayer=function(n,s,a){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new Ia);var m=!1,w={};c.handleWrapJump(a);for(var k=0,P=s;k<P.length;k+=1){var B=P[k],Z=B.getBucket(n);Z&&n.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(B.tileID,Z,this.crossTileIDs)&&(m=!0),w[Z.bucketInstanceId]=!0)}return c.removeStaleBuckets(w)&&(m=!0),m},Ae.prototype.pruneUnusedLayers=function(n){var s={};for(var a in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var fi=function(n,s){return o.emitValidationErrors(n,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},$i=o.pick(Je,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Xr=o.pick(Je,["setCenter","setZoom","setBearing","setPitch"]),Dn=function(){var n={},s=o.styleSpec.$version;for(var a in o.styleSpec.$root){var c,m=o.styleSpec.$root[a];m.required&&(c=a==="version"?s:m.type==="array"?[]:{})!=null&&(n[a]=c)}return n}(),gn=function(n){function s(a,c){var m=this;c===void 0&&(c={}),n.call(this),this.map=a,this.dispatcher=new dr(Ce(),this),this.imageManager=new Fe,this.imageManager.setEventedParent(this),this.glyphManager=new lr(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Nt(256,512),this.crossTileSymbolIndex=new Ae,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(k){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},function(P,B){if(o.triggerPluginCompletionEvent(P),B&&B.every(function(Y){return Y}))for(var Z in w.sourceCaches)w.sourceCaches[Z].reload()})}),this.on("data",function(k){if(k.dataType==="source"&&k.sourceDataType==="metadata"){var P=m.sourceCaches[k.sourceId];if(P){var B=P.getSource();if(B&&B.vectorLayerIds)for(var Z in m._layers){var Y=m._layers[Z];Y.source===B.id&&m._validateLayer(Y)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var w=typeof c.validate=="boolean"?c.validate:!o.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);var k=this.map._requestManager.transformRequest(a,o.ResourceType.Style);this._request=o.getJSON(k,function(P,B){m._request=null,P?m.fire(new o.ErrorEvent(P)):B&&m._load(B,w)})},s.prototype.loadJSON=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){m._request=null,m._load(a,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Dn,!1)},s.prototype._load=function(a,c){if(!c||!fi(this,o.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var w=We(this.stylesheet.layers);this._order=w.map(function(Z){return Z.id}),this._layers={},this._serializedLayers={};for(var k=0,P=w;k<P.length;k+=1){var B=P[k];(B=o.createStyleLayer(B)).setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Rr(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},s.prototype._loadSprite=function(a){var c=this;this._spriteRequest=function(m,w,k){var P,B,Z,Y=o.browser.devicePixelRatio>1?"@2x":"",J=o.getJSON(w.transformRequest(w.normalizeSpriteURL(m,Y,".json"),o.ResourceType.SpriteJSON),function(oe,ye){J=null,Z||(Z=oe,P=ye,le())}),Q=o.getImage(w.transformRequest(w.normalizeSpriteURL(m,Y,".png"),o.ResourceType.SpriteImage),function(oe,ye){Q=null,Z||(Z=oe,B=ye,le())});function le(){if(Z)k(Z);else if(P&&B){var oe=o.browser.getImageData(B),ye={};for(var ie in P){var fe=P[ie],_e=fe.width,Te=fe.height,Re=fe.x,De=fe.y,Ve=fe.sdf,Ze=fe.pixelRatio,He=fe.stretchX,Ke=fe.stretchY,ut=fe.content,vt=new o.RGBAImage({width:_e,height:Te});o.RGBAImage.copy(oe,vt,{x:Re,y:De},{x:0,y:0},{width:_e,height:Te}),ye[ie]={data:vt,pixelRatio:Ze,sdf:Ve,stretchX:He,stretchY:Ke,content:ut}}k(null,ye)}}return{cancel:function(){J&&(J.cancel(),J=null),Q&&(Q.cancel(),Q=null)}}}(a,this.map._requestManager,function(m,w){if(c._spriteRequest=null,m)c.fire(new o.ErrorEvent(m));else if(w)for(var k in w)c.imageManager.addImage(k,w[k]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new o.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var m=a.sourceLayer;if(m){var w=c.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+w.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var c=[],m=0,w=a;m<w.length;m+=1){var k=this._layers[w[m]];k.type!=="custom"&&c.push(k.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var k in(m.length||w.length)&&this._updateWorkerLayers(m,w),this._updatedSources){var P=this._updatedSources[k];P==="reload"?this._reloadSource(k):P==="clear"&&this._clearSource(k)}for(var B in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[B].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var Z={};for(var Y in this.sourceCaches){var J=this.sourceCaches[Y];Z[Y]=J.used,J.used=!1}for(var Q=0,le=this._order;Q<le.length;Q+=1){var oe=this._layers[le[Q]];oe.recalculate(a,this._availableImages),!oe.isHidden(a.zoom)&&oe.source&&(this.sourceCaches[oe.source].used=!0)}for(var ye in Z){var ie=this.sourceCaches[ye];Z[ye]!==ie.used&&ie.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ye}))}this.light.recalculate(a),this.z=a.zoom,c&&this.fire(new o.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var c=this;if(this._checkLoaded(),fi(this,o.validateStyle(a)))return!1;(a=o.clone$1(a)).layers=We(a.layers);var m=function(k,P){if(!k)return[{command:Je.setStyle,args:[P]}];var B=[];try{if(!o.deepEqual(k.version,P.version))return[{command:Je.setStyle,args:[P]}];o.deepEqual(k.center,P.center)||B.push({command:Je.setCenter,args:[P.center]}),o.deepEqual(k.zoom,P.zoom)||B.push({command:Je.setZoom,args:[P.zoom]}),o.deepEqual(k.bearing,P.bearing)||B.push({command:Je.setBearing,args:[P.bearing]}),o.deepEqual(k.pitch,P.pitch)||B.push({command:Je.setPitch,args:[P.pitch]}),o.deepEqual(k.sprite,P.sprite)||B.push({command:Je.setSprite,args:[P.sprite]}),o.deepEqual(k.glyphs,P.glyphs)||B.push({command:Je.setGlyphs,args:[P.glyphs]}),o.deepEqual(k.transition,P.transition)||B.push({command:Je.setTransition,args:[P.transition]}),o.deepEqual(k.light,P.light)||B.push({command:Je.setLight,args:[P.light]});var Z={},Y=[];(function(Q,le,oe,ye){var ie;for(ie in le=le||{},Q=Q||{})Q.hasOwnProperty(ie)&&(le.hasOwnProperty(ie)||Ye(ie,oe,ye));for(ie in le)le.hasOwnProperty(ie)&&(Q.hasOwnProperty(ie)?o.deepEqual(Q[ie],le[ie])||(Q[ie].type==="geojson"&&le[ie].type==="geojson"&&ir(Q,le,ie)?oe.push({command:Je.setGeoJSONSourceData,args:[ie,le[ie].data]}):Ut(ie,le,oe,ye)):Kt(ie,le,oe))})(k.sources,P.sources,Y,Z);var J=[];k.layers&&k.layers.forEach(function(Q){Z[Q.source]?B.push({command:Je.removeLayer,args:[Q.id]}):J.push(Q)}),B=B.concat(Y),function(Q,le,oe){le=le||[];var ye,ie,fe,_e,Te,Re,De,Ve=(Q=Q||[]).map(Ht),Ze=le.map(Ht),He=Q.reduce(Xt,{}),Ke=le.reduce(Xt,{}),ut=Ve.slice(),vt=Object.create(null);for(ye=0,ie=0;ye<Ve.length;ye++)Ke.hasOwnProperty(fe=Ve[ye])?ie++:(oe.push({command:Je.removeLayer,args:[fe]}),ut.splice(ut.indexOf(fe,ie),1));for(ye=0,ie=0;ye<Ze.length;ye++)ut[ut.length-1-ye]!==(fe=Ze[Ze.length-1-ye])&&(He.hasOwnProperty(fe)?(oe.push({command:Je.removeLayer,args:[fe]}),ut.splice(ut.lastIndexOf(fe,ut.length-ie),1)):ie++,oe.push({command:Je.addLayer,args:[Ke[fe],Re=ut[ut.length-ye]]}),ut.splice(ut.length-ye,0,fe),vt[fe]=!0);for(ye=0;ye<Ze.length;ye++)if(_e=He[fe=Ze[ye]],Te=Ke[fe],!vt[fe]&&!o.deepEqual(_e,Te))if(o.deepEqual(_e.source,Te.source)&&o.deepEqual(_e["source-layer"],Te["source-layer"])&&o.deepEqual(_e.type,Te.type)){for(De in Rt(_e.layout,Te.layout,oe,fe,null,Je.setLayoutProperty),Rt(_e.paint,Te.paint,oe,fe,null,Je.setPaintProperty),o.deepEqual(_e.filter,Te.filter)||oe.push({command:Je.setFilter,args:[fe,Te.filter]}),o.deepEqual(_e.minzoom,Te.minzoom)&&o.deepEqual(_e.maxzoom,Te.maxzoom)||oe.push({command:Je.setLayerZoomRange,args:[fe,Te.minzoom,Te.maxzoom]}),_e)_e.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?Rt(_e[De],Te[De],oe,fe,De.slice(6),Je.setPaintProperty):o.deepEqual(_e[De],Te[De])||oe.push({command:Je.setLayerProperty,args:[fe,De,Te[De]]}));for(De in Te)Te.hasOwnProperty(De)&&!_e.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?Rt(_e[De],Te[De],oe,fe,De.slice(6),Je.setPaintProperty):o.deepEqual(_e[De],Te[De])||oe.push({command:Je.setLayerProperty,args:[fe,De,Te[De]]}))}else oe.push({command:Je.removeLayer,args:[fe]}),Re=ut[ut.lastIndexOf(fe)+1],oe.push({command:Je.addLayer,args:[Te,Re]})}(J,P.layers,B)}catch(Q){console.warn("Unable to compute style diff:",Q),B=[{command:Je.setStyle,args:[P]}]}return B}(this.serialize(),a).filter(function(k){return!(k.command in Xr)});if(m.length===0)return!1;var w=m.filter(function(k){return!(k.command in $i)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(k){return k.command}).join(", ")+".");return m.forEach(function(k){k.command!=="setTransition"&&c[k.command].apply(c,k.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,c),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,c){this.imageManager.updateImage(a,c)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,c,m){var w=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.validateStyle.source,"sources."+a,c,null,m))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var k=this.sourceCaches[a]=new ne(a,c,this.dispatcher);k.style=this,k.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:k.serialize(),sourceId:a}}),k.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new o.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded(),this.sourceCaches[a].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var w=a.id;if(this.getLayer(w))this.fire(new o.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var k;if(a.type==="custom"){if(fi(this,o.validateCustomStyleLayer(a)))return;k=o.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(w,a.source),a=o.clone$1(a),a=o.extend(a,{source:w})),this._validate(o.validateStyle.layer,"layers."+w,a,{arrayIndex:-1},m))return;k=o.createStyleLayer(a),this._validateLayer(k),k.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[k.id]=k.serialize()}var P=c?this._order.indexOf(c):this._order.length;if(c&&P===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(P,0,w),this._layerOrderChanged=!0,this._layers[w]=k,this._removedLayers[w]&&k.source&&k.type!=="custom"){var B=this._removedLayers[w];delete this._removedLayers[w],B.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}},s.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var m=this._order.indexOf(a);this._order.splice(m,1);var w=c?this._order.indexOf(c):this._order.length;c&&w===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(w,0,a),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,c,m){this._checkLoaded();var w=this.getLayer(a);w?w.minzoom===c&&w.maxzoom===m||(c!=null&&(w.minzoom=c),m!=null&&(w.maxzoom=m),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var w=this.getLayer(a);if(w){if(!o.deepEqual(w.filter,c))return c==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.validateStyle.filter,"layers."+w.id+".filter",c,null,m)||(w.filter=o.clone$1(c),this._updateLayer(w)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return o.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,c,m,w){w===void 0&&(w={}),this._checkLoaded();var k=this.getLayer(a);k?o.deepEqual(k.getLayoutProperty(c),m)||(k.setLayoutProperty(c,m,w),this._updateLayer(k)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,c){var m=this.getLayer(a);if(m)return m.getLayoutProperty(c);this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,c,m,w){w===void 0&&(w={}),this._checkLoaded();var k=this.getLayer(a);k?o.deepEqual(k.getPaintProperty(c),m)||(k.setPaintProperty(c,m,w)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},s.prototype.setFeatureState=function(a,c){this._checkLoaded();var m=a.source,w=a.sourceLayer,k=this.sourceCaches[m];if(k!==void 0){var P=k.getSource().type;P==="geojson"&&w?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||w?(a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),k.setFeatureState(w,a.id,c)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,c){this._checkLoaded();var m=a.source,w=this.sourceCaches[m];if(w!==void 0){var k=w.getSource().type,P=k==="vector"?a.sourceLayer:void 0;k!=="vector"||P?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(P,a.id,c):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,m=a.sourceLayer,w=this.sourceCaches[c];if(w!==void 0){if(w.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(m,a.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var c=this,m=function(He){return c._layers[He].type==="fill-extrusion"},w={},k=[],P=this._order.length-1;P>=0;P--){var B=this._order[P];if(m(B)){w[B]=P;for(var Z=0,Y=a;Z<Y.length;Z+=1){var J=Y[Z][B];if(J)for(var Q=0,le=J;Q<le.length;Q+=1)k.push(le[Q])}}}k.sort(function(He,Ke){return Ke.intersectionZ-He.intersectionZ});for(var oe=[],ye=this._order.length-1;ye>=0;ye--){var ie=this._order[ye];if(m(ie))for(var fe=k.length-1;fe>=0;fe--){var _e=k[fe].feature;if(w[_e.layer.id]<ye)break;oe.push(_e),k.pop()}else for(var Te=0,Re=a;Te<Re.length;Te+=1){var De=Re[Te][ie];if(De)for(var Ve=0,Ze=De;Ve<Ze.length;Ve+=1)oe.push(Ze[Ve].feature)}}return oe},s.prototype.queryRenderedFeatures=function(a,c,m){c&&c.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var w={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var k=0,P=c.layers;k<P.length;k+=1){var B=P[k],Z=this._layers[B];if(!Z)return this.fire(new o.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be queried for features."))),[];w[Z.source]=!0}}var Y=[];for(var J in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!w[J]||Y.push(Gr(this.sourceCaches[J],this._layers,this._serializedLayers,a,c,m));return this.placement&&Y.push(function(Q,le,oe,ye,ie,fe,_e){for(var Te={},Re=fe.queryRenderedSymbols(ye),De=[],Ve=0,Ze=Object.keys(Re).map(Number);Ve<Ze.length;Ve+=1)De.push(_e[Ze[Ve]]);De.sort(Ra);for(var He=function(){var Tt=ut[Ke],hr=Tt.featureIndex.lookupSymbolFeatures(Re[Tt.bucketInstanceId],le,Tt.bucketIndex,Tt.sourceLayerIndex,ie.filter,ie.layers,ie.availableImages,Q);for(var ot in hr){var Mt=Te[ot]=Te[ot]||[],Wt=hr[ot];Wt.sort(function(Bt,At){var Dt=Tt.featureSortOrder;if(Dt){var Li=Dt.indexOf(Bt.featureIndex);return Dt.indexOf(At.featureIndex)-Li}return At.featureIndex-Bt.featureIndex});for(var Vt=0,zt=Wt;Vt<zt.length;Vt+=1)Mt.push(zt[Vt])}},Ke=0,ut=De;Ke<ut.length;Ke+=1)He();var vt=function(Tt){Te[Tt].forEach(function(hr){var ot=hr.feature,Mt=oe[Q[Tt].source].getFeatureState(ot.layer["source-layer"],ot.id);ot.source=ot.layer.source,ot.layer["source-layer"]&&(ot.sourceLayer=ot.layer["source-layer"]),ot.state=Mt})};for(var Et in Te)vt(Et);return Te}(this._layers,this._serializedLayers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Y)},s.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var m=this.sourceCaches[a];return m?function(w,k){for(var P=w.getRenderableIds().map(function(le){return w.getTileByID(le)}),B=[],Z={},Y=0;Y<P.length;Y++){var J=P[Y],Q=J.tileID.canonical.key;Z[Q]||(Z[Q]=!0,J.querySourceFeatures(B,k))}return B}(m,c):[]},s.prototype.addSourceType=function(a,c,m){return s.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,c){c===void 0&&(c={}),this._checkLoaded();var m=this.light.getLight(),w=!1;for(var k in a)if(!o.deepEqual(a[k],m[k])){w=!0;break}if(w){var P={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(P)}},s.prototype._validate=function(a,c,m,w,k){return k===void 0&&(k={}),(!k||k.validate!==!1)&&fi(this,a.call(o.validateStyle,o.extend({key:c,style:this.serialize(),value:m,styleSpec:o.styleSpec},w)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,c,m,w,k){k===void 0&&(k=!1);for(var P=!1,B=!1,Z={},Y=0,J=this._order;Y<J.length;Y+=1){var Q=this._layers[J[Y]];if(Q.type==="symbol"){if(!Z[Q.source]){var le=this.sourceCaches[Q.source];Z[Q.source]=le.getRenderableIds(!0).map(function(_e){return le.getTileByID(_e)}).sort(function(_e,Te){return Te.tileID.overscaledZ-_e.tileID.overscaledZ||(_e.tileID.isLessThan(Te.tileID)?-1:1)})}var oe=this.crossTileSymbolIndex.addLayer(Q,Z[Q.source],a.center.lng);P=P||oe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),a.zoom))&&(this.pauseablePlacement=new ea(a,this._order,k,c,m,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),B=!0),P&&this.pauseablePlacement.placement.setStale()),B||P)for(var ye=0,ie=this._order;ye<ie.length;ye+=1){var fe=this._layers[ie[ye]];fe.type==="symbol"&&this.placement.updateLayerOpacities(fe,Z[fe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();var w=this.sourceCaches[c.source];w&&w.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(a,c,m){this.glyphManager.getGlyphs(c.stacks,m)},s.prototype.getResource=function(a,c,m){return o.makeRequest(c,m)},s}(o.Evented);gn.getSourceType=function(n){return Fi[n]},gn.setSourceType=function(n,s){Fi[n]=s},gn.registerForPluginStateChange=o.registerForPluginStateChange;var ji=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Js=Ir(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),eo=Ir(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),vu=Ir(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),No=Ir(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Ka=Ir("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ns=Ir(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),gu=Ir(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ha=Ir("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),jl=Ir("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),xo=Ir("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),as=Ir(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Uo=Ir(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),xl=Ir(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),to=Ir(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Wr=Ir(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),_u=Ir(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),wo=Ir(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ta=Ir(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ls=Ir(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Un=Ir(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),qn=Ir(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Oa=Ir(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),jn=Ir(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Si=Ir(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),qo=Ir(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),os=Ir(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ir(n,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=w?w.concat(m):m,P={};return{fragmentSource:n=n.replace(a,function(B,Z,Y,J,Q){return P[Q]=!0,Z==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
varying `+Y+" "+J+" "+Q+`;
#else
uniform `+Y+" "+J+" u_"+Q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Q+`
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`}),vertexSource:s=s.replace(a,function(B,Z,Y,J,Q){var le=J==="float"?"vec2":"vec4",oe=Q.match(/color/)?"color":le;return P[Q]?Z==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+Y+" "+le+" a_"+Q+`;
varying `+Y+" "+J+" "+Q+`;
#else
uniform `+Y+" "+J+" u_"+Q+`;
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = a_"+Q+`;
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Q+" = unpack_mix_"+oe+"(a_"+Q+", u_"+Q+`_t);
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:Z==="define"?`
#ifndef HAS_UNIFORM_u_`+Q+`
uniform lowp float u_`+Q+`_t;
attribute `+Y+" "+le+" a_"+Q+`;
#else
uniform `+Y+" "+J+" u_"+Q+`;
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Y+" "+J+" "+Q+" = a_"+Q+`;
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Q+`
    `+Y+" "+J+" "+Q+" = unpack_mix_"+oe+"(a_"+Q+", u_"+Q+`_t);
#else
    `+Y+" "+J+" "+Q+" = u_"+Q+`;
#endif
`}),staticAttributes:c,staticUniforms:k}}var jo=Object.freeze({__proto__:null,prelude:Js,background:eo,backgroundPattern:vu,circle:No,clippingMask:Ka,heatmap:ns,heatmapTexture:gu,collisionBox:Ha,collisionCircle:jl,debug:xo,fill:as,fillOutline:Uo,fillOutlinePattern:xl,fillPattern:to,fillExtrusion:Wr,fillExtrusionPattern:_u,hillshadePrepare:wo,hillshade:Ta,line:Ls,lineGradient:Un,linePattern:qn,lineSDF:Oa,raster:jn,symbolIcon:Si,symbolSDF:qo,symbolTextAndIcon:os}),ju=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Qs(n){for(var s=[],a=0;a<n.length;a++)if(n[a]!==null){var c=n[a].split(" ");s.push(c.pop())}return s}ju.prototype.bind=function(n,s,a,c,m,w,k,P){this.context=n;for(var B=this.boundPaintVertexBuffers.length!==c.length,Z=0;!B&&Z<c.length;Z++)this.boundPaintVertexBuffers[Z]!==c[Z]&&(B=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!B&&this.boundIndexBuffer===m&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===P?(n.bindVertexArrayOES.set(this.vao),k&&k.bind(),m&&m.dynamicDraw&&m.bind(),P&&P.bind()):this.freshBind(s,a,c,m,w,k,P)},ju.prototype.freshBind=function(n,s,a,c,m,w,k){var P,B=n.numAttributes,Z=this.context,Y=Z.gl;if(Z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Z.extVertexArrayObject.createVertexArrayOES(),Z.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=c,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=k;else{P=Z.currentNumAttributes||0;for(var J=B;J<P;J++)Y.disableVertexAttribArray(J)}s.enableAttributes(Y,n);for(var Q=0,le=a;Q<le.length;Q+=1)le[Q].enableAttributes(Y,n);w&&w.enableAttributes(Y,n),k&&k.enableAttributes(Y,n),s.bind(),s.setVertexAttribPointers(Y,n,m);for(var oe=0,ye=a;oe<ye.length;oe+=1){var ie=ye[oe];ie.bind(),ie.setVertexAttribPointers(Y,n,m)}w&&(w.bind(),w.setVertexAttribPointers(Y,n,m)),c&&c.bind(),k&&(k.bind(),k.setVertexAttribPointers(Y,n,m)),Z.currentNumAttributes=B},ju.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ss=function(n,s,a,c,m,w){var k=n.gl;this.program=k.createProgram();for(var P=Qs(a.staticAttributes),B=c?c.getBinderAttributes():[],Z=P.concat(B),Y=a.staticUniforms?Qs(a.staticUniforms):[],J=c?c.getBinderUniforms():[],Q=[],le=0,oe=Y.concat(J);le<oe.length;le+=1){var ye=oe[le];Q.indexOf(ye)<0&&Q.push(ye)}var ie=c?c.defines():[];w&&ie.push("#define OVERDRAW_INSPECTOR;");var fe=ie.concat(Js.fragmentSource,a.fragmentSource).join(`
`),_e=ie.concat(Js.vertexSource,a.vertexSource).join(`
`),Te=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Te,fe),k.compileShader(Te),k.attachShader(this.program,Te);var Re=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Re,_e),k.compileShader(Re),k.attachShader(this.program,Re),this.attributes={};var De={};this.numAttributes=Z.length;for(var Ve=0;Ve<this.numAttributes;Ve++)Z[Ve]&&(k.bindAttribLocation(this.program,Ve,Z[Ve]),this.attributes[Z[Ve]]=Ve);k.linkProgram(this.program),k.deleteShader(Re),k.deleteShader(Te);for(var Ze=0;Ze<Q.length;Ze++){var He=Q[Ze];if(He&&!De[He]){var Ke=k.getUniformLocation(this.program,He);Ke&&(De[He]=Ke)}}this.fixedUniforms=m(n,De),this.binderUniforms=c?c.getUniforms(n,De):[]}}};function $s(n,s,a){var c=1/Br(a,1,s.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),w=a.tileSize*Math.pow(2,s.transform.tileZoom)/m,k=w*(a.tileID.canonical.x+a.tileID.wrap*m),P=w*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[k>>16,P>>16],u_pixel_coord_lower:[65535&k,65535&P]}}ss.prototype.draw=function(n,s,a,c,m,w,k,P,B,Z,Y,J,Q,le,oe,ye){var ie,fe=n.gl;if(!this.failedToCreate){for(var _e in n.program.set(this.program),n.setDepthMode(a),n.setStencilMode(c),n.setColorMode(m),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[_e].set(k[_e]);le&&le.setUniforms(n,this.binderUniforms,J,{zoom:Q});for(var Te=(ie={},ie[fe.LINES]=2,ie[fe.TRIANGLES]=3,ie[fe.LINE_STRIP]=1,ie)[s],Re=0,De=Y.get();Re<De.length;Re+=1){var Ve=De[Re],Ze=Ve.vaos||(Ve.vaos={});(Ze[P]||(Ze[P]=new ju)).bind(n,this,B,le?le.getPaintVertexBuffers():[],Z,Ve.vertexOffset,oe,ye),fe.drawElements(s,Ve.primitiveLength*Te,fe.UNSIGNED_SHORT,Ve.primitiveOffset*Te*2)}}};var Zu=function(n,s,a,c){var m=s.style.light,w=m.properties.get("position"),k=[w.x,w.y,w.z],P=o.create$1();m.properties.get("anchor")==="viewport"&&o.fromRotation(P,-s.transform.angle),o.transformMat3(k,k,P);var B=m.properties.get("color");return{u_matrix:n,u_lightpos:k,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+a,u_opacity:c}},ta=function(n,s,a,c,m,w,k){return o.extend(Zu(n,s,a,c),$s(w,s,k),{u_height_factor:-Math.pow(2,m.overscaledZ)/k.tileSize/8})},Zo=function(n){return{u_matrix:n}},ls=function(n,s,a,c){return o.extend(Zo(n),$s(a,s,c))},us=function(n,s){return{u_matrix:n,u_world:s}},ro=function(n,s,a,c,m){return o.extend(ls(n,s,a,c),{u_world:m})},ra=function(n,s,a,c){var m,w,k=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var P=Br(a,1,k.zoom);m=!0,w=[P,P]}else m=!1,w=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:w}},Eo=function(n,s,a){var c=Br(a,1,s.zoom),m=Math.pow(2,s.zoom-a.tileID.overscaledZ),w=a.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*m),s.pixelsToGLUnits[1]/(c*m)],u_overscale_factor:w}},bu=function(n,s,a){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},Go=function(n,s,a){return a===void 0&&(a=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:a}},Zn=function(n){return{u_matrix:n}},So=function(n,s,a,c){return{u_matrix:n,u_extrude_scale:Br(s,1,a),u_intensity:c}},ko=function(n,s,a){var c=n.transform;return{u_matrix:Gu(n,s,a),u_ratio:1/Br(s,1,c.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Sr=function(n,s,a,c){return o.extend(ko(n,s,a),{u_image:0,u_image_height:c})},wl=function(n,s,a,c){var m=n.transform,w=Aa(s,m);return{u_matrix:Gu(n,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Br(s,1,m.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},vc=function(n,s,a,c,m){var w=n.lineAtlas,k=Aa(s,n.transform),P=a.layout.get("line-cap")==="round",B=w.getDash(c.from,P),Z=w.getDash(c.to,P),Y=B.width*m.fromScale,J=Z.width*m.toScale;return o.extend(ko(n,s,a),{u_patternscale_a:[k/Y,-B.height/2],u_patternscale_b:[k/J,-Z.height/2],u_sdfgamma:w.width/(256*Math.min(Y,J)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:Z.y,u_mix:m.t})};function Aa(n,s){return 1/Br(n,1,s.tileZoom)}function Gu(n,s,a){return n.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var cs=function(n,s,a,c,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(w=m.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Di(m.paint.get("raster-hue-rotate"))};var w,k};function Di(n){n*=Math.PI/180;var s=Math.sin(n),a=Math.cos(n);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var Gn,ca=function(n,s,a,c,m,w,k,P,B,Z){var Y=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:Y.width/Y.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:k,u_coord_matrix:P,u_is_text:+B,u_pitch_with_map:+c,u_texsize:Z,u_texture:0}},ia=function(n,s,a,c,m,w,k,P,B,Z,Y){var J=m.transform;return o.extend(ca(n,s,a,c,m,w,k,P,B,Z),{u_gamma_scale:c?Math.cos(J._pitch)*J.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+Y})},Ku=function(n,s,a,c,m,w,k,P,B,Z){return o.extend(ia(n,s,a,c,m,w,k,P,!0,B,!0),{u_texsize_icon:Z,u_texture_icon:1})},Ko=function(n,s,a){return{u_matrix:n,u_opacity:s,u_color:a}},hs=function(n,s,a,c,m,w){return o.extend(function(k,P,B,Z){var Y=B.imageManager.getPattern(k.from.toString()),J=B.imageManager.getPattern(k.to.toString()),Q=B.imageManager.getPixelSize(),le=Q.width,oe=Q.height,ye=Math.pow(2,Z.tileID.overscaledZ),ie=Z.tileSize*Math.pow(2,B.transform.tileZoom)/ye,fe=ie*(Z.tileID.canonical.x+Z.tileID.wrap*ye),_e=ie*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[le,oe],u_mix:P.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/Br(Z,1,B.transform.tileZoom),u_pixel_coord_upper:[fe>>16,_e>>16],u_pixel_coord_lower:[65535&fe,65535&_e]}}(c,w,a,m),{u_matrix:n,u_opacity:s})},el={fillExtrusion:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new o.Uniform1f(n,s.u_height_factor),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new o.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new o.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new o.UniformColor(n,s.u_color),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_overlay:new o.Uniform1i(n,s.u_overlay),u_overlay_scale:new o.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new o.Uniform1f(n,s.u_extrude_scale),u_intensity:new o.Uniform1f(n,s.u_intensity),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_color_ramp:new o.Uniform1i(n,s.u_color_ramp),u_opacity:new o.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_latrange:new o.Uniform2f(n,s.u_latrange),u_light:new o.Uniform2f(n,s.u_light),u_shadow:new o.UniformColor(n,s.u_shadow),u_highlight:new o.UniformColor(n,s.u_highlight),u_accent:new o.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_dimension:new o.Uniform2f(n,s.u_dimension),u_zoom:new o.Uniform1f(n,s.u_zoom),u_unpack:new o.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_image:new o.Uniform1i(n,s.u_image),u_image_height:new o.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_texsize:new o.Uniform2f(n,s.u_texsize),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_image:new o.Uniform1i(n,s.u_image),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new o.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new o.Uniform1f(n,s.u_sdfgamma),u_image:new o.Uniform1i(n,s.u_image),u_tex_y_a:new o.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new o.Uniform1f(n,s.u_tex_y_b),u_mix:new o.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new o.Uniform2f(n,s.u_tl_parent),u_scale_parent:new o.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new o.Uniform1f(n,s.u_buffer_scale),u_fade_t:new o.Uniform1f(n,s.u_fade_t),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image0:new o.Uniform1i(n,s.u_image0),u_image1:new o.Uniform1i(n,s.u_image1),u_brightness_low:new o.Uniform1f(n,s.u_brightness_low),u_brightness_high:new o.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new o.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new o.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new o.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texsize_icon:new o.Uniform2f(n,s.u_texsize_icon),u_texture:new o.Uniform1i(n,s.u_texture),u_texture_icon:new o.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_color:new o.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image:new o.Uniform1i(n,s.u_image),u_pattern_tl_a:new o.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(n,s.u_pattern_br_b),u_texsize:new o.Uniform2f(n,s.u_texsize),u_mix:new o.Uniform1f(n,s.u_mix),u_pattern_size_a:new o.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new o.Uniform1f(n,s.u_scale_a),u_scale_b:new o.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(n,s.u_tile_units_to_pixels)}}};function tl(n,s,a,c,m,w,k){for(var P=n.context,B=P.gl,Z=n.useProgram("collisionBox"),Y=[],J=0,Q=0,le=0;le<c.length;le++){var oe=c[le],ye=s.getTile(oe),ie=ye.getBucket(a);if(ie){var fe=oe.posMatrix;m[0]===0&&m[1]===0||(fe=n.translatePosMatrix(oe.posMatrix,ye,m,w));var _e=k?ie.textCollisionBox:ie.iconCollisionBox,Te=ie.collisionCircleArray;if(Te.length>0){var Re=o.create(),De=fe;o.mul(Re,ie.placementInvProjMatrix,n.transform.glCoordMatrix),o.mul(Re,Re,ie.placementViewportMatrix),Y.push({circleArray:Te,circleOffset:Q,transform:De,invTransform:Re}),Q=J+=Te.length/4}_e&&Z.draw(P,B.LINES,$.disabled,se.disabled,n.colorModeForRenderPass(),be.disabled,Eo(fe,n.transform,ye),a.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,n.transform.zoom,null,null,_e.collisionVertexBuffer)}}if(k&&Y.length){var Ve=n.useProgram("collisionCircle"),Ze=new o.StructArrayLayout2f1f2i16;Ze.resize(4*J),Ze._trim();for(var He=0,Ke=0,ut=Y;Ke<ut.length;Ke+=1)for(var vt=ut[Ke],Et=0;Et<vt.circleArray.length/4;Et++){var Tt=4*Et,hr=vt.circleArray[Tt+0],ot=vt.circleArray[Tt+1],Mt=vt.circleArray[Tt+2],Wt=vt.circleArray[Tt+3];Ze.emplace(He++,hr,ot,Mt,Wt,0),Ze.emplace(He++,hr,ot,Mt,Wt,1),Ze.emplace(He++,hr,ot,Mt,Wt,2),Ze.emplace(He++,hr,ot,Mt,Wt,3)}(!Gn||Gn.length<2*J)&&(Gn=function(Bn){var qa=2*Bn,wn=new o.StructArrayLayout3ui6;wn.resize(qa),wn._trim();for(var gi=0;gi<qa;gi++){var En=6*gi;wn.uint16[En+0]=4*gi+0,wn.uint16[En+1]=4*gi+1,wn.uint16[En+2]=4*gi+2,wn.uint16[En+3]=4*gi+2,wn.uint16[En+4]=4*gi+3,wn.uint16[En+5]=4*gi+0}return wn}(J));for(var Vt=P.createIndexBuffer(Gn,!0),zt=P.createVertexBuffer(Ze,o.collisionCircleLayout.members,!0),Bt=0,At=Y;Bt<At.length;Bt+=1){var Dt=At[Bt],Li=bu(Dt.transform,Dt.invTransform,n.transform);Ve.draw(P,B.TRIANGLES,$.disabled,se.disabled,n.colorModeForRenderPass(),be.disabled,Li,a.id,zt,Vt,o.SegmentVector.simpleSegment(0,2*Dt.circleOffset,Dt.circleArray.length,Dt.circleArray.length/2),null,n.transform.zoom,null,null,null)}zt.destroy(),Vt.destroy()}}var _n=o.identity(new Float32Array(16));function ps(n,s,a,c,m,w){var k=o.getAnchorAlignment(n),P=-(k.horizontalAlign-.5)*s,B=-(k.verticalAlign-.5)*a,Z=o.evaluateVariableOffset(n,c);return new o.Point((P/m+Z[0])*w,(B/m+Z[1])*w)}function Hu(n,s,a,c,m,w,k,P,B,Z,Y){var J=n.text.placedSymbolArray,Q=n.text.dynamicLayoutVertexArray,le=n.icon.dynamicLayoutVertexArray,oe={};Q.clear();for(var ye=0;ye<J.length;ye++){var ie=J.get(ye),fe=ie.hidden||!ie.crossTileID||n.allowVerticalPlacement&&!ie.placedOrientation?null:c[ie.crossTileID];if(fe){var _e=new o.Point(ie.anchorX,ie.anchorY),Te=Ot(_e,a?P:k),Re=jt(w.cameraToCenterDistance,Te.signedDistanceFromCamera),De=m.evaluateSizeForFeature(n.textSizeData,Z,ie)*Re/o.ONE_EM;a&&(De*=n.tilePixelRatio/B);for(var Ve=ps(fe.anchor,fe.width,fe.height,fe.textOffset,fe.textBoxScale,De),Ze=a?Ot(_e.add(Ve),k).point:Te.point.add(s?Ve.rotate(-w.angle):Ve),He=n.allowVerticalPlacement&&ie.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Ke=0;Ke<ie.numGlyphs;Ke++)o.addDynamicAttributes(Q,Ze,He);Y&&ie.associatedIconIndex>=0&&(oe[ie.associatedIconIndex]={shiftedAnchor:Ze,angle:He})}else hi(ie.numGlyphs,Q)}if(Y){le.clear();for(var ut=n.icon.placedSymbolArray,vt=0;vt<ut.length;vt++){var Et=ut.get(vt);if(Et.hidden)hi(Et.numGlyphs,le);else{var Tt=oe[vt];if(Tt)for(var hr=0;hr<Et.numGlyphs;hr++)o.addDynamicAttributes(le,Tt.shiftedAnchor,Tt.angle);else hi(Et.numGlyphs,le)}}n.icon.dynamicLayoutVertexBuffer.updateData(le)}n.text.dynamicLayoutVertexBuffer.updateData(Q)}function rl(n,s,a){return a.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function za(n,s,a,c,m,w,k,P,B,Z,Y,J){for(var Q=n.context,le=Q.gl,oe=n.transform,ye=P==="map",ie=B==="map",fe=ye&&a.layout.get("symbol-placement")!=="point",_e=ye&&!ie&&!fe,Te=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Re=!1,De=n.depthModeForSublayer(0,$.ReadOnly),Ve=a.layout.get("text-variable-anchor"),Ze=[],He=0,Ke=c;He<Ke.length;He+=1){var ut=Ke[He],vt=s.getTile(ut),Et=vt.getBucket(a);if(Et){var Tt=m?Et.text:Et.icon;if(Tt&&Tt.segments.get().length){var hr=Tt.programConfigurations.get(a.id),ot=m||Et.sdfIcons,Mt=m?Et.textSizeData:Et.iconSizeData,Wt=ie||oe.pitch!==0,Vt=n.useProgram(rl(ot,m,Et),hr),zt=o.evaluateSizeForZoom(Mt,oe.zoom),Bt=void 0,At=[0,0],Dt=void 0,Li=void 0,Bn=null,qa=void 0;if(m)Dt=vt.glyphAtlasTexture,Li=le.LINEAR,Bt=vt.glyphAtlasTexture.size,Et.iconsInText&&(At=vt.imageAtlasTexture.size,Bn=vt.imageAtlasTexture,qa=Wt||n.options.rotating||n.options.zooming||Mt.kind==="composite"||Mt.kind==="camera"?le.LINEAR:le.NEAREST);else{var wn=a.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;Dt=vt.imageAtlasTexture,Li=ot||n.options.rotating||n.options.zooming||wn||Wt?le.LINEAR:le.NEAREST,Bt=vt.imageAtlasTexture.size}var gi=Br(vt,1,n.transform.zoom),En=sr(ut.posMatrix,ie,ye,n.transform,gi),Da=mr(ut.posMatrix,ie,ye,n.transform,gi),Ma=Ve&&Et.hasTextData(),Wl=a.layout.get("icon-text-fit")!=="none"&&Ma&&Et.hasIconData();fe&&Sa(Et,ut.posMatrix,n,m,En,Da,ie,Z);var co=n.translatePosMatrix(ut.posMatrix,vt,w,k),Ja=fe||m&&Ve||Wl?_n:En,ws=n.translatePosMatrix(Da,vt,w,k,!0),Po=ot&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ho={program:Vt,buffers:Tt,uniformValues:ot?Et.iconsInText?Ku(Mt.kind,zt,_e,ie,n,co,Ja,ws,Bt,At):ia(Mt.kind,zt,_e,ie,n,co,Ja,ws,m,Bt,!0):ca(Mt.kind,zt,_e,ie,n,co,Ja,ws,m,Bt),atlasTexture:Dt,atlasTextureIcon:Bn,atlasInterpolation:Li,atlasInterpolationIcon:qa,isSDF:ot,hasHalo:Po};if(Te&&Et.canOverlap){Re=!0;for(var Co=0,Xu=Tt.segments.get();Co<Xu.length;Co+=1){var Tl=Xu[Co];Ze.push({segments:new o.SegmentVector([Tl]),sortKey:Tl.sortKey,state:ho})}}else Ze.push({segments:Tt.segments,sortKey:0,state:ho})}}}Re&&Ze.sort(function(Es,zl){return Es.sortKey-zl.sortKey});for(var Yl=0,_c=Ze;Yl<_c.length;Yl+=1){var Do=_c[Yl],pn=Do.state;if(Q.activeTexture.set(le.TEXTURE0),pn.atlasTexture.bind(pn.atlasInterpolation,le.CLAMP_TO_EDGE),pn.atlasTextureIcon&&(Q.activeTexture.set(le.TEXTURE1),pn.atlasTextureIcon&&pn.atlasTextureIcon.bind(pn.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),pn.isSDF){var Al=pn.uniformValues;pn.hasHalo&&(Al.u_is_halo=1,Zl(pn.buffers,Do.segments,a,n,pn.program,De,Y,J,Al)),Al.u_is_halo=0}Zl(pn.buffers,Do.segments,a,n,pn.program,De,Y,J,pn.uniformValues)}}function Zl(n,s,a,c,m,w,k,P,B){var Z=c.context;m.draw(Z,Z.gl.TRIANGLES,w,k,P,be.disabled,B,a.id,n.layoutVertexBuffer,n.indexBuffer,s,a.paint,c.transform.zoom,n.programConfigurations.get(a.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Gl(n,s,a,c,m,w,k){var P,B,Z,Y,J,Q=n.context.gl,le=a.paint.get("fill-pattern"),oe=le&&le.constantOr(1),ye=a.getCrossfadeParameters();k?(B=oe&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",P=Q.LINES):(B=oe?"fillPattern":"fill",P=Q.TRIANGLES);for(var ie=0,fe=c;ie<fe.length;ie+=1){var _e=fe[ie],Te=s.getTile(_e);if(!oe||Te.patternsLoaded()){var Re=Te.getBucket(a);if(Re){var De=Re.programConfigurations.get(a.id),Ve=n.useProgram(B,De);oe&&(n.context.activeTexture.set(Q.TEXTURE0),Te.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),De.updatePaintBuffers(ye));var Ze=le.constantOr(null);if(Ze&&Te.imageAtlas){var He=Te.imageAtlas,Ke=He.patternPositions[Ze.to.toString()],ut=He.patternPositions[Ze.from.toString()];Ke&&ut&&De.setConstantPatternPositions(Ke,ut)}var vt=n.translatePosMatrix(_e.posMatrix,Te,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(k){Y=Re.indexBuffer2,J=Re.segments2;var Et=[Q.drawingBufferWidth,Q.drawingBufferHeight];Z=B==="fillOutlinePattern"&&oe?ro(vt,n,ye,Te,Et):us(vt,Et)}else Y=Re.indexBuffer,J=Re.segments,Z=oe?ls(vt,n,ye,Te):Zo(vt);Ve.draw(n.context,P,m,n.stencilModeForClipping(_e),w,be.disabled,Z,a.id,Re.layoutVertexBuffer,Y,J,a.paint,n.transform.zoom,De)}}}}function Kn(n,s,a,c,m,w,k){for(var P=n.context,B=P.gl,Z=a.paint.get("fill-extrusion-pattern"),Y=Z.constantOr(1),J=a.getCrossfadeParameters(),Q=a.paint.get("fill-extrusion-opacity"),le=0,oe=c;le<oe.length;le+=1){var ye=oe[le],ie=s.getTile(ye),fe=ie.getBucket(a);if(fe){var _e=fe.programConfigurations.get(a.id),Te=n.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",_e);Y&&(n.context.activeTexture.set(B.TEXTURE0),ie.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),_e.updatePaintBuffers(J));var Re=Z.constantOr(null);if(Re&&ie.imageAtlas){var De=ie.imageAtlas,Ve=De.patternPositions[Re.to.toString()],Ze=De.patternPositions[Re.from.toString()];Ve&&Ze&&_e.setConstantPatternPositions(Ve,Ze)}var He=n.translatePosMatrix(ye.posMatrix,ie,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Ke=a.paint.get("fill-extrusion-vertical-gradient"),ut=Y?ta(He,n,Ke,Q,ye,J,ie):Zu(He,n,Ke,Q);Te.draw(P,P.gl.TRIANGLES,m,w,k,be.backCCW,ut,a.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,a.paint,n.transform.zoom,_e)}}}function Va(n,s,a,c,m,w){var k=n.context,P=k.gl,B=s.fbo;if(B){var Z=n.useProgram("hillshade");k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,B.colorAttachment.get());var Y=function(J,Q,le){var oe=le.paint.get("hillshade-shadow-color"),ye=le.paint.get("hillshade-highlight-color"),ie=le.paint.get("hillshade-accent-color"),fe=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=J.transform.angle);var _e,Te,Re,De=!J.options.moving;return{u_matrix:J.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),De),u_image:0,u_latrange:(_e=Q.tileID,Te=Math.pow(2,_e.canonical.z),Re=_e.canonical.y,[new o.MercatorCoordinate(0,Re/Te).toLngLat().lat,new o.MercatorCoordinate(0,(Re+1)/Te).toLngLat().lat]),u_light:[le.paint.get("hillshade-exaggeration"),fe],u_shadow:oe,u_highlight:ye,u_accent:ie}}(n,s,a);Z.draw(k,P.TRIANGLES,c,m,w,be.disabled,Y,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function Mn(n,s,a,c,m,w){var k=n.context,P=k.gl,B=s.dem;if(B&&B.data){var Z=B.dim,Y=B.stride,J=B.getPixels();if(k.activeTexture.set(P.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(Y),s.demTexture){var Q=s.demTexture;Q.update(J,{premultiply:!1}),Q.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else s.demTexture=new o.Texture(k,J,P.RGBA,{premultiply:!1}),s.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);k.activeTexture.set(P.TEXTURE0);var le=s.fbo;if(!le){var oe=new o.Texture(k,{width:Z,height:Z,data:null},P.RGBA);oe.bind(P.LINEAR,P.CLAMP_TO_EDGE),(le=s.fbo=k.createFramebuffer(Z,Z,!0)).colorAttachment.set(oe.texture)}k.bindFramebuffer.set(le.framebuffer),k.viewport.set([0,0,Z,Z]),n.useProgram("hillshadePrepare").draw(k,P.TRIANGLES,c,m,w,be.disabled,function(ye,ie){var fe=ie.stride,_e=o.create();return o.ortho(_e,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(_e,_e,[0,-o.EXTENT,0]),{u_matrix:_e,u_image:1,u_dimension:[fe,fe],u_zoom:ye.overscaledZ,u_unpack:ie.getUnpackVector()}}(s.tileID,B),a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Xa(n,s,a,c,m){var w=c.paint.get("raster-fade-duration");if(w>0){var k=o.browser.now(),P=(k-n.timeAdded)/w,B=s?(k-s.timeAdded)/w:-1,Z=a.getSource(),Y=m.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),J=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(n.tileID.overscaledZ-Y),Q=J&&n.refreshedUponExpiration?1:o.clamp(J?P:1-B,0,1);return n.refreshedUponExpiration&&P>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}var io=new o.Color(1,0,0,1),Io=new o.Color(0,1,0,1),El=new o.Color(0,0,1,1),xu=new o.Color(1,0,1,1),no=new o.Color(0,1,1,1);function cn(n,s,a,c){nl(n,0,s+a/2,n.transform.width,a,c)}function il(n,s,a,c){nl(n,s-a/2,0,a,n.transform.height,c)}function nl(n,s,a,c,m,w){var k=n.context,P=k.gl;P.enable(P.SCISSOR_TEST),P.scissor(s*o.browser.devicePixelRatio,a*o.browser.devicePixelRatio,c*o.browser.devicePixelRatio,m*o.browser.devicePixelRatio),k.clear({color:w}),P.disable(P.SCISSOR_TEST)}function Pa(n,s,a){var c=n.context,m=c.gl,w=a.posMatrix,k=n.useProgram("debug"),P=$.disabled,B=se.disabled,Z=n.colorModeForRenderPass();c.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),k.draw(c,m.LINE_STRIP,P,B,Z,be.disabled,Go(w,o.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var Y=s.getTileByID(a.key).latestRawTileData,J=Math.floor((Y&&Y.byteLength||0)/1024),Q=s.getTile(a).tileSize,le=512/Math.min(Q,512)*(a.overscaledZ/n.transform.zoom)*.5,oe=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(oe+=" => "+a.overscaledZ),function(ye,ie){ye.initDebugOverlayCanvas();var fe=ye.debugOverlayCanvas,_e=ye.context.gl,Te=ye.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,fe.width,fe.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(ie,5,5),Te.strokeText(ie,5,5),ye.debugOverlayTexture.update(fe),ye.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(n,oe+" "+J+"kb"),k.draw(c,m.TRIANGLES,P,B,ve.alphaBlended,be.disabled,Go(w,o.Color.transparent,le),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var fs={symbol:function(n,s,a,c,m){if(n.renderPass==="translucent"){var w=se.disabled,k=n.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(P,B,Z,Y,J,Q,le){for(var oe=B.transform,ye=J==="map",ie=Q==="map",fe=0,_e=P;fe<_e.length;fe+=1){var Te=_e[fe],Re=Y.getTile(Te),De=Re.getBucket(Z);if(De&&De.text&&De.text.segments.get().length){var Ve=o.evaluateSizeForZoom(De.textSizeData,oe.zoom),Ze=Br(Re,1,B.transform.zoom),He=sr(Te.posMatrix,ie,ye,B.transform,Ze),Ke=Z.layout.get("icon-text-fit")!=="none"&&De.hasIconData();if(Ve){var ut=Math.pow(2,oe.zoom-Re.tileID.overscaledZ);Hu(De,ye,ie,le,o.symbolSize,oe,He,Te.posMatrix,ut,Ve,Ke)}}}}(c,n,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&za(n,s,a,c,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),w,k),a.paint.get("text-opacity").constantOr(1)!==0&&za(n,s,a,c,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),w,k),s.map.showCollisionBoxes&&(tl(n,s,a,c,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),tl(n,s,a,c,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),w=a.paint.get("circle-stroke-width"),k=a.paint.get("circle-stroke-opacity"),P=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||w.constantOr(1)!==0&&k.constantOr(1)!==0){for(var B=n.context,Z=B.gl,Y=n.depthModeForSublayer(0,$.ReadOnly),J=se.disabled,Q=n.colorModeForRenderPass(),le=[],oe=0;oe<c.length;oe++){var ye=c[oe],ie=s.getTile(ye),fe=ie.getBucket(a);if(fe){var _e=fe.programConfigurations.get(a.id),Te={programConfiguration:_e,program:n.useProgram("circle",_e),layoutVertexBuffer:fe.layoutVertexBuffer,indexBuffer:fe.indexBuffer,uniformValues:ra(n,ye,ie,a)};if(P)for(var Re=0,De=fe.segments.get();Re<De.length;Re+=1){var Ve=De[Re];le.push({segments:new o.SegmentVector([Ve]),sortKey:Ve.sortKey,state:Te})}else le.push({segments:fe.segments,sortKey:0,state:Te})}}P&&le.sort(function(vt,Et){return vt.sortKey-Et.sortKey});for(var Ze=0,He=le;Ze<He.length;Ze+=1){var Ke=He[Ze],ut=Ke.state;ut.program.draw(B,Z.TRIANGLES,Y,J,Q,be.disabled,ut.uniformValues,a.id,ut.layoutVertexBuffer,ut.indexBuffer,Ke.segments,a.paint,n.transform.zoom,ut.programConfiguration)}}}},heatmap:function(n,s,a,c){if(a.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,w=m.gl,k=se.disabled,P=new ve([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(le,oe,ye){var ie=le.gl;le.activeTexture.set(ie.TEXTURE1),le.viewport.set([0,0,oe.width/4,oe.height/4]);var fe=ye.heatmapFbo;if(fe)ie.bindTexture(ie.TEXTURE_2D,fe.colorAttachment.get()),le.bindFramebuffer.set(fe.framebuffer);else{var _e=ie.createTexture();ie.bindTexture(ie.TEXTURE_2D,_e),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,ie.LINEAR),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,ie.LINEAR),fe=ye.heatmapFbo=le.createFramebuffer(oe.width/4,oe.height/4,!1),function(Te,Re,De,Ve){var Ze=Te.gl;Ze.texImage2D(Ze.TEXTURE_2D,0,Ze.RGBA,Re.width/4,Re.height/4,0,Ze.RGBA,Te.extRenderToTextureHalfFloat?Te.extTextureHalfFloat.HALF_FLOAT_OES:Ze.UNSIGNED_BYTE,null),Ve.colorAttachment.set(De)}(le,oe,_e,fe)}})(m,n,a),m.clear({color:o.Color.transparent});for(var B=0;B<c.length;B++){var Z=c[B];if(!s.hasRenderableParent(Z)){var Y=s.getTile(Z),J=Y.getBucket(a);if(J){var Q=J.programConfigurations.get(a.id);n.useProgram("heatmap",Q).draw(m,w.TRIANGLES,$.disabled,k,P,be.disabled,So(Z.posMatrix,Y,n.transform.zoom,a.paint.get("heatmap-intensity")),a.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,a.paint,n.transform.zoom,Q)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(le,oe){var ye=le.context,ie=ye.gl,fe=oe.heatmapFbo;if(fe){ye.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,fe.colorAttachment.get()),ye.activeTexture.set(ie.TEXTURE1);var _e=oe.colorRampTexture;_e||(_e=oe.colorRampTexture=new o.Texture(ye,oe.colorRamp,ie.RGBA)),_e.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(ye,ie.TRIANGLES,$.disabled,se.disabled,le.colorModeForRenderPass(),be.disabled,function(Te,Re,De,Ve){var Ze=o.create();o.ortho(Ze,0,Te.width,Te.height,0,0,1);var He=Te.context.gl;return{u_matrix:Ze,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Re.paint.get("heatmap-opacity")}}(le,oe),oe.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,oe.paint,le.transform.zoom)}}(n,a))},line:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("line-opacity"),w=a.paint.get("line-width");if(m.constantOr(1)!==0&&w.constantOr(1)!==0)for(var k=n.depthModeForSublayer(0,$.ReadOnly),P=n.colorModeForRenderPass(),B=a.paint.get("line-dasharray"),Z=a.paint.get("line-pattern"),Y=Z.constantOr(1),J=a.paint.get("line-gradient"),Q=a.getCrossfadeParameters(),le=Y?"linePattern":B?"lineSDF":J?"lineGradient":"line",oe=n.context,ye=oe.gl,ie=!0,fe=0,_e=c;fe<_e.length;fe+=1){var Te=_e[fe],Re=s.getTile(Te);if(!Y||Re.patternsLoaded()){var De=Re.getBucket(a);if(De){var Ve=De.programConfigurations.get(a.id),Ze=n.context.program.get(),He=n.useProgram(le,Ve),Ke=ie||He.program!==Ze,ut=Z.constantOr(null);if(ut&&Re.imageAtlas){var vt=Re.imageAtlas,Et=vt.patternPositions[ut.to.toString()],Tt=vt.patternPositions[ut.from.toString()];Et&&Tt&&Ve.setConstantPatternPositions(Et,Tt)}var hr=Y?wl(n,Re,a,Q):B?vc(n,Re,a,B,Q):J?Sr(n,Re,a,De.lineClipsArray.length):ko(n,Re,a);if(Y)oe.activeTexture.set(ye.TEXTURE0),Re.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Ve.updatePaintBuffers(Q);else if(B&&(Ke||n.lineAtlas.dirty))oe.activeTexture.set(ye.TEXTURE0),n.lineAtlas.bind(oe);else if(J){var ot=De.gradients[a.id],Mt=ot.texture;if(a.gradientVersion!==ot.version){var Wt=256;if(a.stepInterpolant){var Vt=s.getSource().maxzoom,zt=Te.canonical.z===Vt?Math.ceil(1<<n.transform.maxZoom-Te.canonical.z):1;Wt=o.clamp(o.nextPowerOfTwo(De.maxLineLength/o.EXTENT*1024*zt),256,oe.maxTextureSize)}ot.gradient=o.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Wt,image:ot.gradient||void 0,clips:De.lineClipsArray}),ot.texture?ot.texture.update(ot.gradient):ot.texture=new o.Texture(oe,ot.gradient,ye.RGBA),ot.version=a.gradientVersion,Mt=ot.texture}oe.activeTexture.set(ye.TEXTURE0),Mt.bind(a.stepInterpolant?ye.NEAREST:ye.LINEAR,ye.CLAMP_TO_EDGE)}He.draw(oe,ye.TRIANGLES,k,n.stencilModeForClipping(Te),P,be.disabled,hr,a.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,a.paint,n.transform.zoom,Ve,De.layoutVertexBuffer2),ie=!1}}}}},fill:function(n,s,a,c){var m=a.paint.get("fill-color"),w=a.paint.get("fill-opacity");if(w.constantOr(1)!==0){var k=n.colorModeForRenderPass(),P=a.paint.get("fill-pattern"),B=n.opaquePassEnabledForLayer()&&!P.constantOr(1)&&m.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===B){var Z=n.depthModeForSublayer(1,n.renderPass==="opaque"?$.ReadWrite:$.ReadOnly);Gl(n,s,a,c,Z,k,!1)}if(n.renderPass==="translucent"&&a.paint.get("fill-antialias")){var Y=n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,$.ReadOnly);Gl(n,s,a,c,Y,k,!0)}}},"fill-extrusion":function(n,s,a,c){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var w=new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Kn(n,s,a,c,w,se.disabled,ve.disabled),Kn(n,s,a,c,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var k=n.colorModeForRenderPass();Kn(n,s,a,c,w,se.disabled,k)}}},hillshade:function(n,s,a,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,w=n.depthModeForSublayer(0,$.ReadOnly),k=n.colorModeForRenderPass(),P=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],B=P[0],Z=0,Y=P[1];Z<Y.length;Z+=1){var J=Y[Z],Q=s.getTile(J);Q.needsHillshadePrepare&&n.renderPass==="offscreen"?Mn(n,Q,a,w,se.disabled,k):n.renderPass==="translucent"&&Va(n,Q,a,w,B[J.overscaledZ],k)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,a,c){if(n.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&c.length)for(var m=n.context,w=m.gl,k=s.getSource(),P=n.useProgram("raster"),B=n.colorModeForRenderPass(),Z=k instanceof gr?[{},c]:n.stencilConfigForOverlap(c),Y=Z[0],J=Z[1],Q=J[J.length-1].overscaledZ,le=!n.options.moving,oe=0,ye=J;oe<ye.length;oe+=1){var ie=ye[oe],fe=n.depthModeForSublayer(ie.overscaledZ-Q,a.paint.get("raster-opacity")===1?$.ReadWrite:$.ReadOnly,w.LESS),_e=s.getTile(ie),Te=n.transform.calculatePosMatrix(ie.toUnwrapped(),le);_e.registerFadeDuration(a.paint.get("raster-fade-duration"));var Re=s.findLoadedParent(ie,0),De=Xa(_e,Re,s,a,n.transform),Ve=void 0,Ze=void 0,He=a.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;m.activeTexture.set(w.TEXTURE0),_e.texture.bind(He,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(w.TEXTURE1),Re?(Re.texture.bind(He,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),Ve=Math.pow(2,Re.tileID.overscaledZ-_e.tileID.overscaledZ),Ze=[_e.tileID.canonical.x*Ve%1,_e.tileID.canonical.y*Ve%1]):_e.texture.bind(He,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var Ke=cs(Te,Ze||[0,0],Ve||1,De,a);k instanceof gr?P.draw(m,w.TRIANGLES,fe,se.disabled,B,be.disabled,Ke,a.id,k.boundsBuffer,n.quadTriangleIndexBuffer,k.boundsSegments):P.draw(m,w.TRIANGLES,fe,Y[ie.overscaledZ],B,be.disabled,Ke,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,a){var c=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var w=n.context,k=w.gl,P=n.transform,B=P.tileSize,Z=a.paint.get("background-pattern");if(!n.isPatternMissing(Z)){var Y=!Z&&c.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===Y){var J=se.disabled,Q=n.depthModeForSublayer(0,Y==="opaque"?$.ReadWrite:$.ReadOnly),le=n.colorModeForRenderPass(),oe=n.useProgram(Z?"backgroundPattern":"background"),ye=P.coveringTiles({tileSize:B});Z&&(w.activeTexture.set(k.TEXTURE0),n.imageManager.bind(n.context));for(var ie=a.getCrossfadeParameters(),fe=0,_e=ye;fe<_e.length;fe+=1){var Te=_e[fe],Re=n.transform.calculatePosMatrix(Te.toUnwrapped()),De=Z?hs(Re,m,n,Z,{tileID:Te,tileSize:B},ie):Ko(Re,m,c);oe.draw(w,k.TRIANGLES,Q,J,le,be.disabled,De,a.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,a){for(var c=0;c<a.length;c++)Pa(n,s,a[c])},custom:function(n,s,a){var c=n.context,m=a.implementation;if(n.renderPass==="offscreen"){var w=m.prerender;w&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),w.call(m,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(se.disabled);var k=m.renderingMode==="3d"?new $(n.context.gl.LEQUAL,$.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,$.ReadOnly);c.setDepthMode(k),m.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},Yr=function(n,s){this.context=new H(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=ne.maxUnderzooming+ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ae,this.gpuTimers={}};Yr.prototype.resize=function(n,s){if(this.width=n*o.browser.devicePixelRatio,this.height=s*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize()},Yr.prototype.setup=function(){var n=this.context,s=new o.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(o.EXTENT,0),s.emplaceBack(0,o.EXTENT),s.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,ji.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var a=new o.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(o.EXTENT,0),a.emplaceBack(0,o.EXTENT),a.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=n.createVertexBuffer(a,ji.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var c=new o.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(o.EXTENT,0,o.EXTENT,0),c.emplaceBack(0,o.EXTENT,0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,nt.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var m=new o.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,ji.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var w=new o.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var k=new o.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k),this.emptyTexture=new o.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var P=this.context.gl;this.stencilClearMode=new se({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)},Yr.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=o.create();o.ortho(a,0,this.width,this.height,0,0,1),o.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,$.disabled,this.stencilClearMode,ve.disabled,be.disabled,Zn(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Yr.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var a=this.context,c=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(ve.disabled),a.setDepthMode($.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,k=s;w<k.length;w+=1){var P=k[w],B=this._tileClippingMaskIDs[P.key]=this.nextStencilID++;m.draw(a,c.TRIANGLES,$.disabled,new se({func:c.ALWAYS,mask:0},B,255,c.KEEP,c.KEEP,c.REPLACE),ve.disabled,be.disabled,Zn(P.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Yr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new se({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Yr.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new se({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Yr.prototype.stencilConfigForOverlap=function(n){var s,a=this.context.gl,c=n.sort(function(B,Z){return Z.overscaledZ-B.overscaledZ}),m=c[c.length-1].overscaledZ,w=c[0].overscaledZ-m+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var k={},P=0;P<w;P++)k[P+m]=new se({func:a.GEQUAL,mask:255},P+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=w,[k,c]}return[(s={},s[m]=se.disabled,s),c]},Yr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ve([n.CONSTANT_COLOR,n.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ve.unblended:ve.alphaBlended},Yr.prototype.depthModeForSublayer=function(n,s,a){if(!this.opaquePassEnabledForLayer())return $.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $(a||this.context.gl.LEQUAL,s,[c,c])},Yr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Yr.prototype.render=function(n,s){var a=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var c=this.style._order,m=this.style.sourceCaches;for(var w in m){var k=m[w];k.used&&k.prepare(this.context)}var P,B,Z={},Y={},J={};for(var Q in m){var le=m[Q];Z[Q]=le.getVisibleCoordinates(),Y[Q]=Z[Q].slice().reverse(),J[Q]=le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var oe=0;oe<c.length;oe++)if(this.style._layers[c[oe]].is3D()){this.opaquePassCutoff=oe;break}this.renderPass="offscreen";for(var ye=0,ie=c;ye<ie.length;ye+=1){var fe=this.style._layers[ie[ye]];if(fe.hasOffscreenPass()&&!fe.isHidden(this.transform.zoom)){var _e=Y[fe.source];(fe.type==="custom"||_e.length)&&this.renderLayer(this,m[fe.source],fe,_e)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var Te=this.style._layers[c[this.currentLayer]],Re=m[Te.source],De=Z[Te.source];this._renderTileClippingMasks(Te,De),this.renderLayer(this,Re,Te,De)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Ve=this.style._layers[c[this.currentLayer]],Ze=m[Ve.source],He=(Ve.type==="symbol"?J:Y)[Ve.source];this._renderTileClippingMasks(Ve,Z[Ve.source]),this.renderLayer(this,Ze,Ve,He)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Ke){Ke.source&&!Ke.isHidden(a.transform.zoom)&&(Ke.source!==(B&&B.id)&&(B=a.style.sourceCaches[Ke.source]),(!P||P.getSource().maxzoom<B.getSource().maxzoom)&&(P=B))}),P&&fs.debug(this,P,P.getVisibleCoordinates())),this.options.showPadding&&function(Ke){var ut=Ke.transform.padding;cn(Ke,Ke.transform.height-(ut.top||0),3,io),cn(Ke,ut.bottom||0,3,Io),il(Ke,ut.left||0,3,El),il(Ke,Ke.transform.width-(ut.right||0),3,xu);var vt=Ke.transform.centerPoint;(function(Et,Tt,hr,ot){nl(Et,Tt-1,hr-10,2,20,ot),nl(Et,Tt-10,hr-1,20,2,ot)})(Ke,vt.x,Ke.transform.height-vt.y,no)}(this),this.context.setDefault()},Yr.prototype.renderLayer=function(n,s,a,c){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||c.length)&&(this.id=a.id,this.gpuTimingStart(a),fs[a.type](n,s,a,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Yr.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[n.id];a||(a=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},Yr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Yr.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Yr.prototype.queryGpuTimers=function(n){var s={};for(var a in n){var c=n[a],m=this.context.extTimerQuery,w=m.getQueryObjectEXT(c.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(c.query),s[a]=w}return s},Yr.prototype.translatePosMatrix=function(n,s,a,c,m){if(!a[0]&&!a[1])return n;var w=m?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(w){var k=Math.sin(w),P=Math.cos(w);a=[a[0]*P-a[1]*k,a[0]*k+a[1]*P]}var B=[m?a[0]:Br(s,a[0],this.transform.zoom),m?a[1]:Br(s,a[1],this.transform.zoom),0],Z=new Float32Array(16);return o.translate(Z,n,B),Z},Yr.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Yr.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Yr.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),a=this.imageManager.getPattern(n.to.toString());return!s||!a},Yr.prototype.useProgram=function(n,s){this.cache=this.cache||{};var a=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new ss(this.context,n,jo[n],s,el[n],this._showOverdrawInspector)),this.cache[a]},Yr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Yr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Yr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Yr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Wa=function(n,s){this.points=n,this.planes=s};Wa.fromInvProjectionMatrix=function(n,s,a){var c=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(k){return o.transformMat4([],k,n)}).map(function(k){return o.scale$1([],k,1/k[3]/s*c)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(k){var P=o.sub([],m[k[0]],m[k[1]]),B=o.sub([],m[k[2]],m[k[1]]),Z=o.normalize([],o.cross([],P,B)),Y=-o.dot(Z,m[k[1]]);return Z.concat(Y)});return new Wa(m,w)};var di=function(n,s){this.min=n,this.max=s,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};di.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],a=o.clone$2(this.min),c=o.clone$2(this.max),m=0;m<s.length;m++)a[m]=s[m]?this.min[m]:this.center[m],c[m]=s[m]?this.center[m]:this.max[m];return c[2]=this.max[2],new di(a,c)},di.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},di.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},di.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,c=0;c<n.planes.length;c++){for(var m=n.planes[c],w=0,k=0;k<s.length;k++)w+=o.dot$1(m,s[k])>=0;if(w===0)return 0;w!==s.length&&(a=!1)}if(a)return 2;for(var P=0;P<3;P++){for(var B=Number.MAX_VALUE,Z=-Number.MAX_VALUE,Y=0;Y<n.points.length;Y++){var J=n.points[Y][P]-this.min[P];B=Math.min(B,J),Z=Math.max(Z,J)}if(Z<0||B>this.max[P]-this.min[P])return 0}return 1};var mi=function(n,s,a,c){if(n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=a,this.right=c};mi.prototype.interpolate=function(n,s,a){return s.top!=null&&n.top!=null&&(this.top=o.number(n.top,s.top,a)),s.bottom!=null&&n.bottom!=null&&(this.bottom=o.number(n.bottom,s.bottom,a)),s.left!=null&&n.left!=null&&(this.left=o.number(n.left,s.left,a)),s.right!=null&&n.right!=null&&(this.right=o.number(n.right,s.right,a)),this},mi.prototype.getCenter=function(n,s){var a=o.clamp((this.left+n-this.right)/2,0,n),c=o.clamp((this.top+s-this.bottom)/2,0,s);return new o.Point(a,c)},mi.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},mi.prototype.clone=function(){return new mi(this.top,this.bottom,this.left,this.right)},mi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var It=function(n,s,a,c,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=a==null?0:a,this._maxPitch=c==null?60:c,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mi,this._posMatrixCache={},this._alignedPosMatrixCache={}},qt={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};It.prototype.clone=function(){var n=new It(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},qt.minZoom.get=function(){return this._minZoom},qt.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},qt.maxZoom.get=function(){return this._maxZoom},qt.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},qt.minPitch.get=function(){return this._minPitch},qt.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},qt.maxPitch.get=function(){return this._maxPitch},qt.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},qt.renderWorldCopies.get=function(){return this._renderWorldCopies},qt.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},qt.worldSize.get=function(){return this.tileSize*this.scale},qt.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},qt.size.get=function(){return new o.Point(this.width,this.height)},qt.bearing.get=function(){return-this.angle/Math.PI*180},qt.bearing.set=function(n){var s=-o.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},qt.pitch.get=function(){return this._pitch/Math.PI*180},qt.pitch.set=function(n){var s=o.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},qt.fov.get=function(){return this._fov/Math.PI*180},qt.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},qt.zoom.get=function(){return this._zoom},qt.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},qt.center.get=function(){return this._center},qt.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},qt.padding.get=function(){return this._edgeInsets.toJSON()},qt.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},qt.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},It.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},It.prototype.interpolatePadding=function(n,s,a){this._unmodified=!1,this._edgeInsets.interpolate(n,s,a),this._constrain(),this._calcMatrices()},It.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},It.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new o.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new o.Point(0,0)),c=this.pointCoordinate(new o.Point(this.width,0)),m=this.pointCoordinate(new o.Point(this.width,this.height)),w=this.pointCoordinate(new o.Point(0,this.height)),k=Math.floor(Math.min(a.x,c.x,m.x,w.x)),P=Math.floor(Math.max(a.x,c.x,m.x,w.x)),B=k-1;B<=P+1;B++)B!==0&&s.push(new o.UnwrappedTileID(B,n));return s},It.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),a=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=o.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),w=[m*c.x,m*c.y,0],k=Wa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),P=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(P=s);var B=function(Ke){return{aabb:new di([Ke*m,0,0],[(Ke+1)*m,m,0]),zoom:0,x:0,y:0,wrap:Ke,fullyVisible:!1}},Z=[],Y=[],J=s,Q=n.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var le=1;le<=3;le++)Z.push(B(-le)),Z.push(B(le));for(Z.push(B(0));Z.length>0;){var oe=Z.pop(),ye=oe.x,ie=oe.y,fe=oe.fullyVisible;if(!fe){var _e=oe.aabb.intersects(k);if(_e===0)continue;fe=_e===2}var Te=oe.aabb.distanceX(w),Re=oe.aabb.distanceY(w),De=Math.max(Math.abs(Te),Math.abs(Re));if(oe.zoom===J||De>3+(1<<J-oe.zoom)-2&&oe.zoom>=P)Y.push({tileID:new o.OverscaledTileID(oe.zoom===J?Q:oe.zoom,oe.wrap,oe.zoom,ye,ie),distanceSq:o.sqrLen([w[0]-.5-ye,w[1]-.5-ie])});else for(var Ve=0;Ve<4;Ve++){var Ze=(ye<<1)+Ve%2,He=(ie<<1)+(Ve>>1);Z.push({aabb:oe.aabb.quadrant(Ve),zoom:oe.zoom+1,x:Ze,y:He,wrap:oe.wrap,fullyVisible:fe})}}return Y.sort(function(Ke,ut){return Ke.distanceSq-ut.distanceSq}).map(function(Ke){return Ke.tileID})},It.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},qt.unmodified.get=function(){return this._unmodified},It.prototype.zoomScale=function(n){return Math.pow(2,n)},It.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},It.prototype.project=function(n){var s=o.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(n.lng)*this.worldSize,o.mercatorYfromLat(s)*this.worldSize)},It.prototype.unproject=function(n){return new o.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},qt.point.get=function(){return this.project(this.center)},It.prototype.setLocationAtPoint=function(n,s){var a=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),w=new o.MercatorCoordinate(m.x-(a.x-c.x),m.y-(a.y-c.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},It.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},It.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},It.prototype.locationCoordinate=function(n){return o.MercatorCoordinate.fromLngLat(n)},It.prototype.coordinateLocation=function(n){return n.toLngLat()},It.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],a=[n.x,n.y,1,1];o.transformMat4(s,s,this.pixelMatrixInverse),o.transformMat4(a,a,this.pixelMatrixInverse);var c=s[3],m=a[3],w=s[1]/c,k=a[1]/m,P=s[2]/c,B=a[2]/m,Z=P===B?0:(0-P)/(B-P);return new o.MercatorCoordinate(o.number(s[0]/c,a[0]/m,Z)/this.worldSize,o.number(w,k,Z)/this.worldSize)},It.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix),new o.Point(s[0]/s[3],s[1]/s[3])},It.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},It.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},It.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},It.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var a=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[a])return c[a];var m=n.canonical,w=this.worldSize/this.zoomScale(m.z),k=m.x+Math.pow(2,m.z)*n.wrap,P=o.identity(new Float64Array(16));return o.translate(P,P,[k*w,m.y*w,0]),o.scale(P,P,[w/o.EXTENT,w/o.EXTENT,1]),o.multiply(P,s?this.alignedProjMatrix:this.projMatrix,P),c[a]=new Float32Array(P),c[a]},It.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},It.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,a,c,m=-90,w=90,k=-180,P=180,B=this.size,Z=this._unmodified;if(this.latRange){var Y=this.latRange;m=o.mercatorYfromLat(Y[1])*this.worldSize,n=(w=o.mercatorYfromLat(Y[0])*this.worldSize)-m<B.y?B.y/(w-m):0}if(this.lngRange){var J=this.lngRange;k=o.mercatorXfromLng(J[0])*this.worldSize,s=(P=o.mercatorXfromLng(J[1])*this.worldSize)-k<B.x?B.x/(P-k):0}var Q=this.point,le=Math.max(s||0,n||0);if(le)return this.center=this.unproject(new o.Point(s?(P+k)/2:Q.x,n?(w+m)/2:Q.y)),this.zoom+=this.scaleZoom(le),this._unmodified=Z,void(this._constraining=!1);if(this.latRange){var oe=Q.y,ye=B.y/2;oe-ye<m&&(c=m+ye),oe+ye>w&&(c=w-ye)}if(this.lngRange){var ie=Q.x,fe=B.x/2;ie-fe<k&&(a=k+fe),ie+fe>P&&(a=P-fe)}a===void 0&&c===void 0||(this.center=this.unproject(new o.Point(a!==void 0?a:Q.x,c!==void 0?c:Q.y))),this._unmodified=Z,this._constraining=!1}},It.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+n.y/this.height),c=Math.sin(a)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-s-a,.01,Math.PI-.01)),m=this.point,w=m.x,k=m.y,P=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),B=this.height/50,Z=new Float64Array(16);o.perspective(Z,this._fov,this.width/this.height,B,P),Z[8]=2*-n.x/this.width,Z[9]=2*n.y/this.height,o.scale(Z,Z,[1,-1,1]),o.translate(Z,Z,[0,0,-this.cameraToCenterDistance]),o.rotateX(Z,Z,this._pitch),o.rotateZ(Z,Z,this.angle),o.translate(Z,Z,[-w,-k,0]),this.mercatorMatrix=o.scale([],Z,[this.worldSize,this.worldSize,this.worldSize]),o.scale(Z,Z,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Z,this.invProjMatrix=o.invert([],this.projMatrix);var Y=this.width%2/2,J=this.height%2/2,Q=Math.cos(this.angle),le=Math.sin(this.angle),oe=w-Math.round(w)+Q*Y+le*J,ye=k-Math.round(k)+Q*J+le*Y,ie=new Float64Array(Z);if(o.translate(ie,ie,[oe>.5?oe-1:oe,ye>.5?ye-1:ye,0]),this.alignedProjMatrix=ie,Z=o.create(),o.scale(Z,Z,[this.width/2,-this.height/2,1]),o.translate(Z,Z,[1,-1,0]),this.labelPlaneMatrix=Z,Z=o.create(),o.scale(Z,Z,[1,-1,1]),o.translate(Z,Z,[-1,-1,0]),o.scale(Z,Z,[2/this.width,2/this.height,1]),this.glCoordMatrix=Z,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Z=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Z,this._posMatrixCache={},this._alignedPosMatrixCache={}}},It.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new o.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},It.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,n))},It.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var a=s.x,c=s.y,m=s.x,w=s.y,k=0,P=n;k<P.length;k+=1){var B=P[k];a=Math.min(a,B.x),c=Math.min(c,B.y),m=Math.max(m,B.x),w=Math.max(w,B.y)}return[new o.Point(a,c),new o.Point(m,c),new o.Point(m,w),new o.Point(a,w),new o.Point(a,c)]},Object.defineProperties(It.prototype,qt);var yr=function(n){var s,a,c,m;this._hashName=n&&encodeURIComponent(n),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,c=null,m=function(){c=null,a&&(s(),c=setTimeout(m,300),a=!1)},function(){return a=!0,c||m(),c})};yr.prototype.addTo=function(n){return this._map=n,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},yr.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},yr.prototype.getHashString=function(n){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,c=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,c),w=Math.round(s.lng*m)/m,k=Math.round(s.lat*m)/m,P=this._map.getBearing(),B=this._map.getPitch(),Z="";if(Z+=n?"/"+w+"/"+k+"/"+a:a+"/"+k+"/"+w,(P||B)&&(Z+="/"+Math.round(10*P)/10),B&&(Z+="/"+Math.round(B)),this._hashName){var Y=this._hashName,J=!1,Q=o.window.location.hash.slice(1).split("&").map(function(le){var oe=le.split("=")[0];return oe===Y?(J=!0,oe+"="+Z):le}).filter(function(le){return le});return J||Q.push(Y+"="+Z),"#"+Q.join("&")}return"#"+Z},yr.prototype._getCurrentHash=function(){var n,s=this,a=o.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):a.split("/")},yr.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},yr.prototype._updateHashUnthrottled=function(){var n=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,n)}catch{}};var Kl={linearity:.3,easing:o.bezier(0,0,.3,1)},ao=o.extend({deceleration:2500,maxSpeed:1400},Kl),oo=o.extend({deceleration:20,maxSpeed:1400},Kl),Lh=o.extend({deceleration:1e3,maxSpeed:360},Kl),Xc=o.extend({deceleration:1e3,maxSpeed:90},Kl),ds=function(n){this._map=n,this.clear()};function To(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function Hn(n,s,a){var c=a.maxSpeed,m=a.linearity,w=a.deceleration,k=o.clamp(n*m/(s/1e3),-c,c),P=Math.abs(k)/(w*m);return{easing:a.easing,duration:1e3*P,amount:k*(P/2)}}ds.prototype.clear=function(){this._inertiaBuffer=[]},ds.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:n})},ds.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=o.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},ds.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},a=0,c=this._inertiaBuffer;a<c.length;a+=1){var m=c[a].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(s.pan.mag()){var P=Hn(s.pan.mag(),w,o.extend({},ao,n||{}));k.offset=s.pan.mult(P.amount/s.pan.mag()),k.center=this._map.transform.center,To(k,P)}if(s.zoom){var B=Hn(s.zoom,w,oo);k.zoom=this._map.transform.zoom+B.amount,To(k,B)}if(s.bearing){var Z=Hn(s.bearing,w,Lh);k.bearing=this._map.transform.bearing+o.clamp(Z.amount,-179,179),To(k,Z)}if(s.pitch){var Y=Hn(s.pitch,w,Xc);k.pitch=this._map.transform.pitch+Y.amount,To(k,Y)}if(k.zoom||k.bearing){var J=s.pinchAround===void 0?s.around:s.pinchAround;k.around=J?this._map.unproject(J):this._map.getCenter()}return this.clear(),o.extend(k,{noMoveStart:!0})}};var ki=function(n){function s(c,m,w,k){k===void 0&&(k={});var P=z.mousePos(m.getCanvasContainer(),w),B=m.unproject(P);n.call(this,c,o.extend({point:P,lngLat:B,originalEvent:w},k)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),ms=function(n){function s(c,m,w){var k=c==="touchend"?w.changedTouches:w.touches,P=z.touchPos(m.getCanvasContainer(),k),B=P.map(function(J){return m.unproject(J)}),Z=P.reduce(function(J,Q,le,oe){return J.add(Q.div(oe.length))},new o.Point(0,0)),Y=m.unproject(Z);n.call(this,c,{points:P,point:Z,lngLats:B,lngLat:Y,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),Ao=function(n){function s(c,m,w){n.call(this,c,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),en=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};en.prototype.reset=function(){delete this._mousedownPos},en.prototype.wheel=function(n){return this._firePreventable(new Ao(n.type,this._map,n))},en.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new ki(n.type,this._map,n))},en.prototype.mouseup=function(n){this._map.fire(new ki(n.type,this._map,n))},en.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new ki(n.type,this._map,n))},en.prototype.dblclick=function(n){return this._firePreventable(new ki(n.type,this._map,n))},en.prototype.mouseover=function(n){this._map.fire(new ki(n.type,this._map,n))},en.prototype.mouseout=function(n){this._map.fire(new ki(n.type,this._map,n))},en.prototype.touchstart=function(n){return this._firePreventable(new ms(n.type,this._map,n))},en.prototype.touchmove=function(n){this._map.fire(new ms(n.type,this._map,n))},en.prototype.touchend=function(n){this._map.fire(new ms(n.type,this._map,n))},en.prototype.touchcancel=function(n){this._map.fire(new ms(n.type,this._map,n))},en.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},en.prototype.isEnabled=function(){return!0},en.prototype.isActive=function(){return!1},en.prototype.enable=function(){},en.prototype.disable=function(){};var at=function(n){this._map=n};at.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},at.prototype.mousemove=function(n){this._map.fire(new ki(n.type,this._map,n))},at.prototype.mousedown=function(){this._delayContextMenu=!0},at.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},at.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new ki(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},at.prototype.isEnabled=function(){return!0},at.prototype.isActive=function(){return!1},at.prototype.enable=function(){},at.prototype.disable=function(){};var Zi=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Ii(n,s){for(var a={},c=0;c<n.length;c++)a[n[c].identifier]=s[c];return a}Zi.prototype.isEnabled=function(){return!!this._enabled},Zi.prototype.isActive=function(){return!!this._active},Zi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Zi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Zi.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(z.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Zi.prototype.mousemoveWindow=function(n,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a,this._box||(this._box=z.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(c.x,a.x),w=Math.max(c.x,a.x),k=Math.min(c.y,a.y),P=Math.max(c.y,a.y);z.setTransform(this._box,"translate("+m+"px,"+k+"px)"),this._box.style.width=w-m+"px",this._box.style.height=P-k+"px"}}},Zi.prototype.mouseupWindow=function(n,s){var a=this;if(this._active&&n.button===0){var c=this._startPos,m=s;if(this.reset(),z.suppressClick(),c.x!==m.x||c.y!==m.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(c,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},Zi.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},Zi.prototype.blur=function(){this.reset()},Zi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos},Zi.prototype._fireEvent=function(n,s){return this._map.fire(new o.Event(n,{originalEvent:s}))};var Jr=function(n){this.reset(),this.numTouches=n.numTouches};Jr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Jr.prototype.touchstart=function(n,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),a.length===this.numTouches&&(this.centroid=function(c){for(var m=new o.Point(0,0),w=0,k=c;w<k.length;w+=1)m._add(k[w]);return m.div(c.length)}(s),this.touches=Ii(a,s)))},Jr.prototype.touchmove=function(n,s,a){if(!this.aborted&&this.centroid){var c=Ii(a,s);for(var m in this.touches){var w=c[m];(!w||w.dist(this.touches[m])>30)&&(this.aborted=!0)}}},Jr.prototype.touchend=function(n,s,a){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var Xn=function(n){this.singleTap=new Jr(n),this.numTaps=n.numTaps,this.reset()};Xn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Xn.prototype.touchstart=function(n,s,a){this.singleTap.touchstart(n,s,a)},Xn.prototype.touchmove=function(n,s,a){this.singleTap.touchmove(n,s,a)},Xn.prototype.touchend=function(n,s,a){var c=this.singleTap.touchend(n,s,a);if(c){var m=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(c)<30;if(m&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var bn=function(){this._zoomIn=new Xn({numTouches:1,numTaps:2}),this._zoomOut=new Xn({numTouches:2,numTaps:1}),this.reset()};bn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},bn.prototype.touchstart=function(n,s,a){this._zoomIn.touchstart(n,s,a),this._zoomOut.touchstart(n,s,a)},bn.prototype.touchmove=function(n,s,a){this._zoomIn.touchmove(n,s,a),this._zoomOut.touchmove(n,s,a)},bn.prototype.touchend=function(n,s,a){var c=this,m=this._zoomIn.touchend(n,s,a),w=this._zoomOut.touchend(n,s,a);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(m)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(w)},{originalEvent:n})}}):void 0},bn.prototype.touchcancel=function(){this.reset()},bn.prototype.enable=function(){this._enabled=!0},bn.prototype.disable=function(){this._enabled=!1,this.reset()},bn.prototype.isEnabled=function(){return this._enabled},bn.prototype.isActive=function(){return this._active};var al={0:1,2:2},me=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};me.prototype.blur=function(){this.reset()},me.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},me.prototype._correctButton=function(n,s){return!1},me.prototype._move=function(n,s){return{}},me.prototype.mousedown=function(n,s){if(!this._lastPoint){var a=z.mouseButton(n);this._correctButton(n,a)&&(this._lastPoint=s,this._eventButton=a)}},me.prototype.mousemoveWindow=function(n,s){var a=this._lastPoint;if(a){if(n.preventDefault(),function(c,m){var w=al[m];return c.buttons===void 0||(c.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},me.prototype.mouseupWindow=function(n){this._lastPoint&&z.mouseButton(n)===this._eventButton&&(this._moved&&z.suppressClick(),this.reset())},me.prototype.enable=function(){this._enabled=!0},me.prototype.disable=function(){this._enabled=!1,this.reset()},me.prototype.isEnabled=function(){return this._enabled},me.prototype.isActive=function(){return this._active};var gt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(a,c){n.prototype.mousedown.call(this,a,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,c){return c===0&&!a.ctrlKey},s.prototype._move=function(a,c){return{around:c,panDelta:c.sub(a)}},s}(me),ha=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=.8*(c.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(me),pa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=-.5*(c.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(me),fa=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},fa.prototype.touchstart=function(n,s,a){return this._calculateTransform(n,s,a)},fa.prototype.touchmove=function(n,s,a){if(this._active&&!(a.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,a)},fa.prototype.touchend=function(n,s,a){this._calculateTransform(n,s,a),this._active&&a.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(n,s,a){a.length>0&&(this._active=!0);var c=Ii(a,s),m=new o.Point(0,0),w=new o.Point(0,0),k=0;for(var P in c){var B=c[P],Z=this._touches[P];Z&&(m._add(B),w._add(B.sub(Z)),k++,c[P]=B)}if(this._touches=c,!(k<this._minTouches)&&w.mag()){var Y=w.div(k);if(this._sum._add(Y),!(this._sum.mag()<this._clickTolerance))return{around:m.div(k),panDelta:Y}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var tn=function(){this.reset()};function da(n,s,a){for(var c=0;c<n.length;c++)if(n[c].identifier===a)return s[c]}function ys(n,s){return Math.log(n/s)/Math.LN2}tn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},tn.prototype._start=function(n){},tn.prototype._move=function(n,s,a){return{}},tn.prototype.touchstart=function(n,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},tn.prototype.touchmove=function(n,s,a){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,m=c[1],w=da(a,s,c[0]),k=da(a,s,m);if(w&&k){var P=this._aroundCenter?null:w.add(k).div(2);return this._move([w,k],P,n)}}},tn.prototype.touchend=function(n,s,a){if(this._firstTwoTouches){var c=this._firstTwoTouches,m=c[1],w=da(a,s,c[0]),k=da(a,s,m);w&&k||(this._active&&z.suppressClick(),this.reset())}},tn.prototype.touchcancel=function(){this.reset()},tn.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},tn.prototype.disable=function(){this._enabled=!1,this.reset()},tn.prototype.isEnabled=function(){return this._enabled},tn.prototype.isActive=function(){return this._active};var Mi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(ys(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ys(this._distance,m),pinchAround:c}},s}(tn);function Fa(n,s){return 180*n.angleWith(s)/Math.PI}var Wc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fa(this._vector,m),pinchAround:c}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var c=25/(Math.PI*this._minDiameter)*360,m=Fa(a,this._startVector);return Math.abs(m)<c},s}(tn);function Ho(n){return Math.abs(n.y)>Math.abs(n.x)}var vs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,Ho(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,c,m){var w=a[0].sub(this._lastPoints[0]),k=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,k,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+k.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,c,m){if(this._valid!==void 0)return this._valid;var w=a.mag()>=2,k=c.mag()>=2;if(w||k){if(!w||!k)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var P=a.y>0==c.y>0;return Ho(a)&&Ho(c)&&P}},s}(tn),ol={panStep:100,bearingStep:15,pitchStep:10},Ln=function(){var n=ol;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function xn(n){return n*(2-n)}Ln.prototype.blur=function(){this.reset()},Ln.prototype.reset=function(){this._active=!1},Ln.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=0,c=0,m=0,w=0,k=0;switch(n.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),k=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(c=0,m=0),{cameraAnimation:function(P){var B=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:xn,zoom:a?Math.round(B)+a*(n.shiftKey?2:1):B,bearing:P.getBearing()+c*s._bearingStep,pitch:P.getPitch()+m*s._pitchStep,offset:[-w*s._panStep,-k*s._panStep],center:P.getCenter()},{originalEvent:n})}}}},Ln.prototype.enable=function(){this._enabled=!0},Ln.prototype.disable=function(){this._enabled=!1,this.reset()},Ln.prototype.isEnabled=function(){return this._enabled},Ln.prototype.isActive=function(){return this._active},Ln.prototype.disableRotation=function(){this._rotationDisabled=!0},Ln.prototype.enableRotation=function(){this._rotationDisabled=!1};var tr=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};tr.prototype.setZoomRate=function(n){this._defaultZoomRate=n},tr.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},tr.prototype.isEnabled=function(){return!!this._enabled},tr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},tr.prototype.isZooming=function(){return!!this._zooming},tr.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},tr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},tr.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,a=o.browser.now(),c=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},tr.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},tr.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=z.mousePos(this._el,n);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},tr.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&c!==0&&(c=1/c);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,k=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,P=this._startZoom,B=this._easing,Z=!1;if(this._type==="wheel"&&P&&B){var Y=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),J=B(Y);w=o.number(P,k,J),Y<1?this._frameId||(this._frameId=!0):Z=!0}else w=k,Z=!0;return this._active=!0,Z&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Z,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},tr.prototype._smoothOutEasing=function(n){var s=o.ease;if(this._prevEase){var a=this._prevEase,c=(o.browser.now()-a.start)/a.duration,m=a.easing(c+.01)-a.easing(c),w=.27/Math.sqrt(m*m+1e-4)*.01,k=Math.sqrt(.0729-w*w);s=o.bezier(w,k,.25,1)}return this._prevEase={start:o.browser.now(),duration:n,easing:s},s},tr.prototype.blur=function(){this.reset()},tr.prototype.reset=function(){this._active=!1};var Xo=function(n,s){this._clickZoom=n,this._tapZoom=s};Xo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Xo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Xo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Xo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var yi=function(){this.reset()};yi.prototype.reset=function(){this._active=!1},yi.prototype.blur=function(){this.reset()},yi.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(n.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:n})}}},yi.prototype.enable=function(){this._enabled=!0},yi.prototype.disable=function(){this._enabled=!1,this.reset()},yi.prototype.isEnabled=function(){return this._enabled},yi.prototype.isActive=function(){return this._active};var vi=function(){this._tap=new Xn({numTouches:1,numTaps:1}),this.reset()};vi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},vi.prototype.touchstart=function(n,s,a){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(n,s,a))},vi.prototype.touchmove=function(n,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var c=s[0],m=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,a)},vi.prototype.touchend=function(n,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(n,s,a)&&(this._tapTime=n.timeStamp)},vi.prototype.touchcancel=function(){this.reset()},vi.prototype.enable=function(){this._enabled=!0},vi.prototype.disable=function(){this._enabled=!1,this.reset()},vi.prototype.isEnabled=function(){return this._enabled},vi.prototype.isActive=function(){return this._active};var Rs=function(n,s,a){this._el=n,this._mousePan=s,this._touchPan=a};Rs.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Rs.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Rs.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Rs.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var gs=function(n,s,a){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};gs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},gs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},gs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},gs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var so=function(n,s,a,c){this._el=n,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};so.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},so.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},so.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},so.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},so.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},so.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var na=function(n){return n.zoom||n.drag||n.pitch||n.rotate},Bs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(o.Event);function xt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var dt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ds(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),o.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[o.window,"blur",void 0]];for(var c=0,m=this._listeners;c<m.length;c+=1){var w=m[c],k=w[0];z.addEventListener(k,w[1],k===o.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};dt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var a=s[n],c=a[0];z.removeEventListener(c,a[1],c===o.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},dt.prototype._addDefaultHandlers=function(n){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new en(s,n));var c=s.boxZoom=new Zi(s,n);this._add("boxZoom",c);var m=new bn,w=new yi;s.doubleClickZoom=new Xo(w,m),this._add("tapZoom",m),this._add("clickZoom",w);var k=new vi;this._add("tapDragZoom",k);var P=s.touchPitch=new vs;this._add("touchPitch",P);var B=new ha(n),Z=new pa(n);s.dragRotate=new gs(n,B,Z),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);var Y=new gt(n),J=new fa(n);s.dragPan=new Rs(a,Y,J),this._add("mousePan",Y),this._add("touchPan",J,["touchZoom","touchRotate"]);var Q=new Wc,le=new Mi;s.touchZoomRotate=new so(a,le,Q,k),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]);var oe=s.scrollZoom=new tr(s,this);this._add("scrollZoom",oe,["mousePan"]);var ye=s.keyboard=new Ln;this._add("keyboard",ye),this._add("blockableMapEvent",new at(s));for(var ie=0,fe=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ie<fe.length;ie+=1){var _e=fe[ie];n.interactive&&n[_e]&&s[_e].enable(n[_e])}},dt.prototype._add=function(n,s,a){this._handlers.push({handlerName:n,handler:s,allowed:a}),this._handlersById[n]=s},dt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},dt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},dt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},dt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},dt.prototype.isMoving=function(){return Boolean(na(this._eventsInProgress))||this.isZooming()},dt.prototype._blockedByActive=function(n,s,a){for(var c in n)if(c!==a&&(!s||s.indexOf(c)<0))return!0;return!1},dt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},dt.prototype._getMapTouches=function(n){for(var s=[],a=0,c=n;a<c.length;a+=1){var m=c[a];this._el.contains(m.target)&&s.push(m)}return s},dt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var a=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},m={},w={},k=n.touches?this._getMapTouches(n.touches):void 0,P=k?z.touchPos(this._el,k):z.mousePos(this._el,n),B=0,Z=this._handlers;B<Z.length;B+=1){var Y=Z[B],J=Y.handlerName,Q=Y.handler,le=Y.allowed;if(Q.isEnabled()){var oe=void 0;this._blockedByActive(w,le,J)?Q.reset():Q[s||n.type]&&(oe=Q[s||n.type](n,P,k),this.mergeHandlerResult(c,m,oe,J,a),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||Q.isActive())&&(w[J]=Q)}}var ye={};for(var ie in this._previousActiveHandlers)w[ie]||(ye[ie]=a);this._previousActiveHandlers=w,(Object.keys(ye).length||xt(c))&&(this._changes.push([c,m,ye]),this._triggerRenderFrame()),(Object.keys(w).length||xt(c))&&this._map._stop(!0),this._updatingCamera=!1;var fe=c.cameraAnimation;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))},dt.prototype.mergeHandlerResult=function(n,s,a,c,m){if(a){o.extend(n,a);var w={handlerName:c,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(s.zoom=w),a.panDelta!==void 0&&(s.drag=w),a.pitchDelta!==void 0&&(s.pitch=w),a.bearingDelta!==void 0&&(s.rotate=w)}},dt.prototype._applyChanges=function(){for(var n={},s={},a={},c=0,m=this._changes;c<m.length;c+=1){var w=m[c],k=w[0],P=w[1],B=w[2];k.panDelta&&(n.panDelta=(n.panDelta||new o.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(n.around=k.around),k.pinchAround!==void 0&&(n.pinchAround=k.pinchAround),k.noInertia&&(n.noInertia=k.noInertia),o.extend(s,P),o.extend(a,B)}this._updateMapTransform(n,s,a),this._changes=[]},dt.prototype._updateMapTransform=function(n,s,a){var c=this._map,m=c.transform;if(!xt(n))return this._fireEvents(s,a,!0);var w=n.panDelta,k=n.zoomDelta,P=n.bearingDelta,B=n.pitchDelta,Z=n.around,Y=n.pinchAround;Y!==void 0&&(Z=Y),c._stop(!0),Z=Z||c.transform.centerPoint;var J=m.pointLocation(w?Z.sub(w):Z);P&&(m.bearing+=P),B&&(m.pitch+=B),k&&(m.zoom+=k),m.setLocationAtPoint(J,Z),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,a,!0)},dt.prototype._fireEvents=function(n,s,a){var c=this,m=na(this._eventsInProgress),w=na(n),k={};for(var P in n)this._eventsInProgress[P]||(k[P+"start"]=n[P].originalEvent),this._eventsInProgress[P]=n[P];for(var B in!m&&w&&this._fireEvent("movestart",w.originalEvent),k)this._fireEvent(B,k[B]);for(var Z in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(Z,n[Z].originalEvent);var Y,J={};for(var Q in this._eventsInProgress){var le=this._eventsInProgress[Q],oe=le.handlerName,ye=le.originalEvent;this._handlersById[oe].isActive()||(delete this._eventsInProgress[Q],J[Q+"end"]=Y=s[oe]||ye)}for(var ie in J)this._fireEvent(ie,J[ie]);var fe=na(this._eventsInProgress);if(a&&(m||w)&&!fe){this._updatingCamera=!0;var _e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Te=function(Re){return Re!==0&&-c._bearingSnap<Re&&Re<c._bearingSnap};_e?(Te(_e.bearing||this._map.getBearing())&&(_e.bearing=0),this._map.easeTo(_e,{originalEvent:Y})):(this._map.fire(new o.Event("moveend",{originalEvent:Y})),Te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},dt.prototype._fireEvent=function(n,s){this._map.fire(new o.Event(n,s?{originalEvent:s}:{}))},dt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new Bs("renderFrame",{timeStamp:s})),n._applyChanges()})},dt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Qr=function(n){function s(a,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},s.prototype.panBy=function(a,c,m){return a=o.Point.convert(a).mult(-1),this.panTo(this.transform.center,o.extend({offset:a},c),m)},s.prototype.panTo=function(a,c,m){return this.easeTo(o.extend({center:a},c),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},s.prototype.zoomTo=function(a,c,m){return this.easeTo(o.extend({zoom:a},c),m)},s.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},s.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,c){return this.jumpTo({padding:a},c),this},s.prototype.rotateTo=function(a,c,m){return this.easeTo(o.extend({bearing:a},c),m)},s.prototype.resetNorth=function(a,c){return this.rotateTo(0,o.extend({duration:1e3},a),c),this},s.prototype.resetNorthPitch=function(a,c){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},a),c),this},s.prototype.snapToNorth=function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},s.prototype.cameraForBounds=function(a,c){a=o.LngLatBounds.convert(a);var m=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,c)},s.prototype._cameraForBoxAndBearing=function(a,c,m,w){var k={top:0,bottom:0,right:0,left:0};if(typeof(w=o.extend({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var P=w.padding;w.padding={top:P,bottom:P,right:P,left:P}}w.padding=o.extend(k,w.padding);var B=this.transform,Z=B.padding,Y=B.project(o.LngLat.convert(a)),J=B.project(o.LngLat.convert(c)),Q=Y.rotate(-m*Math.PI/180),le=J.rotate(-m*Math.PI/180),oe=new o.Point(Math.max(Q.x,le.x),Math.max(Q.y,le.y)),ye=new o.Point(Math.min(Q.x,le.x),Math.min(Q.y,le.y)),ie=oe.sub(ye),fe=(B.width-(Z.left+Z.right+w.padding.left+w.padding.right))/ie.x,_e=(B.height-(Z.top+Z.bottom+w.padding.top+w.padding.bottom))/ie.y;if(!(_e<0||fe<0)){var Te=Math.min(B.scaleZoom(B.scale*Math.min(fe,_e)),w.maxZoom),Re=typeof w.offset.x=="number"?new o.Point(w.offset.x,w.offset.y):o.Point.convert(w.offset),De=new o.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(m*Math.PI/180),Ve=Re.add(De).mult(B.scale/B.zoomScale(Te));return{center:B.unproject(Y.add(J).div(2).sub(Ve)),zoom:Te,bearing:m}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,c,m){return this._fitInternal(this.cameraForBounds(a,c),c,m)},s.prototype.fitScreenCoordinates=function(a,c,m,w,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(a)),this.transform.pointLocation(o.Point.convert(c)),m,w),w,k)},s.prototype._fitInternal=function(a,c,m){return a?(delete(c=o.extend(a,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this},s.prototype.jumpTo=function(a,c){this.stop();var m=this.transform,w=!1,k=!1,P=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(w=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=o.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(k=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(P=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),w&&this.fire(new o.Event("zoomstart",c)).fire(new o.Event("zoom",c)).fire(new o.Event("zoomend",c)),k&&this.fire(new o.Event("rotatestart",c)).fire(new o.Event("rotate",c)).fire(new o.Event("rotateend",c)),P&&this.fire(new o.Event("pitchstart",c)).fire(new o.Event("pitch",c)).fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))},s.prototype.easeTo=function(a,c){var m=this;this._stop(!1,a.easeId),((a=o.extend({offset:[0,0],duration:500,easing:o.ease},a)).animate===!1||!a.essential&&o.browser.prefersReducedMotion)&&(a.duration=0);var w=this.transform,k=this.getZoom(),P=this.getBearing(),B=this.getPitch(),Z=this.getPadding(),Y="zoom"in a?+a.zoom:k,J="bearing"in a?this._normalizeBearing(a.bearing,P):P,Q="pitch"in a?+a.pitch:B,le="padding"in a?a.padding:w.padding,oe=o.Point.convert(a.offset),ye=w.centerPoint.add(oe),ie=w.pointLocation(ye),fe=o.LngLat.convert(a.center||ie);this._normalizeCenter(fe);var _e,Te,Re=w.project(ie),De=w.project(fe).sub(Re),Ve=w.zoomScale(Y-k);a.around&&(_e=o.LngLat.convert(a.around),Te=w.locationPoint(_e));var Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Y!==k,this._rotating=this._rotating||P!==J,this._pitching=this._pitching||Q!==B,this._padding=!w.isPaddingEqual(le),this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,Ze),this._ease(function(He){if(m._zooming&&(w.zoom=o.number(k,Y,He)),m._rotating&&(w.bearing=o.number(P,J,He)),m._pitching&&(w.pitch=o.number(B,Q,He)),m._padding&&(w.interpolatePadding(Z,le,He),ye=w.centerPoint.add(oe)),_e)w.setLocationAtPoint(_e,Te);else{var Ke=w.zoomScale(w.zoom-k),ut=Y>k?Math.min(2,Ve):Math.max(.5,Ve),vt=Math.pow(ut,1-He),Et=w.unproject(Re.add(De.mult(He*vt)).mult(Ke));w.setLocationAtPoint(w.renderWorldCopies?Et.wrap():Et,ye)}m._fireMoveEvents(c)},function(He){m._afterEase(c,He)},a),this},s.prototype._prepareEase=function(a,c,m){m===void 0&&(m={}),this._moving=!0,c||m.moving||this.fire(new o.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new o.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new o.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new o.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new o.Event("move",a)),this._zooming&&this.fire(new o.Event("zoom",a)),this._rotating&&this.fire(new o.Event("rotate",a)),this._pitching&&this.fire(new o.Event("pitch",a))},s.prototype._afterEase=function(a,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var m=this._zooming,w=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new o.Event("zoomend",a)),w&&this.fire(new o.Event("rotateend",a)),k&&this.fire(new o.Event("pitchend",a)),this.fire(new o.Event("moveend",a))}},s.prototype.flyTo=function(a,c){var m=this;if(!a.essential&&o.browser.prefersReducedMotion){var w=o.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,c)}this.stop(),a=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},a);var k=this.transform,P=this.getZoom(),B=this.getBearing(),Z=this.getPitch(),Y=this.getPadding(),J="zoom"in a?o.clamp(+a.zoom,k.minZoom,k.maxZoom):P,Q="bearing"in a?this._normalizeBearing(a.bearing,B):B,le="pitch"in a?+a.pitch:Z,oe="padding"in a?a.padding:k.padding,ye=k.zoomScale(J-P),ie=o.Point.convert(a.offset),fe=k.centerPoint.add(ie),_e=k.pointLocation(fe),Te=o.LngLat.convert(a.center||_e);this._normalizeCenter(Te);var Re=k.project(_e),De=k.project(Te).sub(Re),Ve=a.curve,Ze=Math.max(k.width,k.height),He=Ze/ye,Ke=De.mag();if("minZoom"in a){var ut=o.clamp(Math.min(a.minZoom,P,J),k.minZoom,k.maxZoom),vt=Ze/k.zoomScale(ut-P);Ve=Math.sqrt(vt/Ke*2)}var Et=Ve*Ve;function Tt(At){var Dt=(He*He-Ze*Ze+(At?-1:1)*Et*Et*Ke*Ke)/(2*(At?He:Ze)*Et*Ke);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function hr(At){return(Math.exp(At)-Math.exp(-At))/2}function ot(At){return(Math.exp(At)+Math.exp(-At))/2}var Mt=Tt(0),Wt=function(At){return ot(Mt)/ot(Mt+Ve*At)},Vt=function(At){return Ze*((ot(Mt)*(hr(Dt=Mt+Ve*At)/ot(Dt))-hr(Mt))/Et)/Ke;var Dt},zt=(Tt(1)-Mt)/Ve;if(Math.abs(Ke)<1e-6||!isFinite(zt)){if(Math.abs(Ze-He)<1e-6)return this.easeTo(a,c);var Bt=He<Ze?-1:1;zt=Math.abs(Math.log(He/Ze))/Ve,Vt=function(){return 0},Wt=function(At){return Math.exp(Bt*Ve*At)}}return a.duration="duration"in a?+a.duration:1e3*zt/("screenSpeed"in a?+a.screenSpeed/Ve:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=B!==Q,this._pitching=le!==Z,this._padding=!k.isPaddingEqual(oe),this._prepareEase(c,!1),this._ease(function(At){var Dt=At*zt,Li=1/Wt(Dt);k.zoom=At===1?J:P+k.scaleZoom(Li),m._rotating&&(k.bearing=o.number(B,Q,At)),m._pitching&&(k.pitch=o.number(Z,le,At)),m._padding&&(k.interpolatePadding(Y,oe,At),fe=k.centerPoint.add(ie));var Bn=At===1?Te:k.unproject(Re.add(De.mult(Vt(Dt))).mult(Li));k.setLocationAtPoint(k.renderWorldCopies?Bn.wrap():Bn,fe),m._fireMoveEvents(c)},function(){return m._afterEase(c)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!a){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(a,c,m){m.animate===!1||m.duration===0?(a(1),c()):(this._easeStart=o.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,c){a=o.wrap(a,-180,180);var m=Math.abs(a-c);return Math.abs(a-360-c)<m&&(a-=360),Math.abs(a+360-c)<m&&(a+=360),a},s.prototype._normalizeCenter=function(a){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var m=a.lng-c.center.lng;a.lng+=m>180?-360:m<-180?360:0}},s}(o.Evented),Gi=function(n){n===void 0&&(n={}),this.options=n,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Gi.prototype.getDefaultPosition=function(){return"bottom-right"},Gi.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=z.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=z.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Gi.prototype.onRemove=function(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Gi.prototype._setElementTitle=function(n,s){var a=this._map._getUIString("AttributionControl."+s);n.title=a,n.setAttribute("aria-label",a)},Gi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Gi.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(n){var a=s.reduce(function(c,m,w){return m.value&&(c+=m.key+"="+m.value+(w<s.length-1?"&":"")),c},"?");n.href=o.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},Gi.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Gi.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(P){return typeof P!="string"?"":P})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var c in a){var m=a[c];if(m.used){var w=m.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(P,B){return P.length-B.length});var k=(n=n.filter(function(P,B){for(var Z=B+1;Z<n.length;Z++)if(n[Z].indexOf(P)>=0)return!1;return!0})).join(" | ");k!==this._attribHTML&&(this._attribHTML=k,n.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Gi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var hn=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};hn.prototype.onAdd=function(n){this._map=n,this._container=z.create("div","mapboxgl-ctrl");var s=z.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},hn.prototype.onRemove=function(){z.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},hn.prototype.getDefaultPosition=function(){return"bottom-left"},hn.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},hn.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},hn.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Ki=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ki.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},Ki.prototype.remove=function(n){for(var s=this._currentlyRunning,a=0,c=s?this._queue.concat(s):this._queue;a<c.length;a+=1){var m=c[a];if(m.id===n)return void(m.cancelled=!0)}},Ki.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,c=s;a<c.length;a+=1){var m=c[a];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ki.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Wo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Os=o.window.HTMLImageElement,gc=o.window.HTMLElement,Dr=o.window.ImageBitmap,Hi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},lo=function(n){function s(c){var m=this;if((c=o.extend({},Hi,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new It(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,w,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Ki,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Wo,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new o.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=o.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof gc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new dt(this,c),this._hash=c.hash&&new yr(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,o.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Gi({customAttribution:c.customAttribution})),this.addControl(new hn,c.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(k){m._update(k.dataType==="style"),m.fire(new o.Event(k.dataType+"data",k))}),this.on("dataloading",function(k){m.fire(new o.Event(k.dataType+"dataloading",k))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,m){if(m===void 0&&(m=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=c.onAdd(this);this._controls.push(c);var k=this._controlPositions[m];return m.indexOf("bottom")!==-1?k.insertBefore(w,k.firstChild):k.appendChild(w),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(c);return m>-1&&this._controls.splice(m,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var m=this._containerDimensions(),w=m[0],k=m[1];if(w===this.transform.width&&k===this.transform.height)return this;this._resizeCanvas(w,k),this.transform.resize(w,k),this.painter.resize(w,k);var P=!this._moving;return P&&this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),this.fire(new o.Event("resize",c)),P&&this.fire(new o.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(o.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c==null?-2:c)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c==null?22:c)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c==null?0:c)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c==null?60:c)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(o.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(o.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,m,w){var k,P=this;if(c==="mouseenter"||c==="mouseover"){var B=!1;return{layer:m,listener:w,delegates:{mousemove:function(Y){var J=P.getLayer(m)?P.queryRenderedFeatures(Y.point,{layers:[m]}):[];J.length?B||(B=!0,w.call(P,new ki(c,P,Y.originalEvent,{features:J}))):B=!1},mouseout:function(){B=!1}}}}if(c==="mouseleave"||c==="mouseout"){var Z=!1;return{layer:m,listener:w,delegates:{mousemove:function(Y){(P.getLayer(m)?P.queryRenderedFeatures(Y.point,{layers:[m]}):[]).length?Z=!0:Z&&(Z=!1,w.call(P,new ki(c,P,Y.originalEvent)))},mouseout:function(Y){Z&&(Z=!1,w.call(P,new ki(c,P,Y.originalEvent)))}}}}return{layer:m,listener:w,delegates:(k={},k[c]=function(Y){var J=P.getLayer(m)?P.queryRenderedFeatures(Y.point,{layers:[m]}):[];J.length&&(Y.features=J,w.call(P,Y),delete Y.features)},k)}},s.prototype.on=function(c,m,w){if(w===void 0)return n.prototype.on.call(this,c,m);var k=this._createDelegatedListener(c,m,w);for(var P in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(k),k.delegates)this.on(P,k.delegates[P]);return this},s.prototype.once=function(c,m,w){if(w===void 0)return n.prototype.once.call(this,c,m);var k=this._createDelegatedListener(c,m,w);for(var P in k.delegates)this.once(P,k.delegates[P]);return this},s.prototype.off=function(c,m,w){var k=this;return w===void 0?n.prototype.off.call(this,c,m):(this._delegatedListeners&&this._delegatedListeners[c]&&function(P){for(var B=P[c],Z=0;Z<B.length;Z++){var Y=B[Z];if(Y.layer===m&&Y.listener===w){for(var J in Y.delegates)k.off(J,Y.delegates[J]);return B.splice(Z,1),k}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,m){if(!this.style)return[];var w;if(m!==void 0||c===void 0||c instanceof o.Point||Array.isArray(c)||(m=c,c=void 0),m=m||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof c[0]=="number")w=[o.Point.convert(c)];else{var k=o.Point.convert(c[0]),P=o.Point.convert(c[1]);w=[k,new o.Point(P.x,k.y),P,new o.Point(k.x,P.y),k]}return this.style.queryRenderedFeatures(w,m,this.transform)},s.prototype.querySourceFeatures=function(c,m){return this.style.querySourceFeatures(c,m)},s.prototype.setStyle=function(c,m){return(m=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(c,m))},s.prototype._getUIString=function(c){var m=this._locale[c];if(m==null)throw new Error("Missing UI string '"+c+"'");return m},s.prototype._updateStyle=function(c,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new gn(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new gn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,m){var w=this;if(typeof c=="string"){var k=this._requestManager.normalizeStyleURL(c),P=this._requestManager.transformRequest(k,o.ResourceType.Style);o.getJSON(P,function(B,Z){B?w.fire(new o.ErrorEvent(B)):Z&&w._updateDiff(Z,m)})}else typeof c=="object"&&this._updateDiff(c,m)},s.prototype._updateDiff=function(c,m){try{this.style.setState(c)&&this._update(!0)}catch(w){o.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(c,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,m){return this._lazyInitEmptyStyle(),this.style.addSource(c,m),this._update(!0)},s.prototype.isSourceLoaded=function(c){var m=this.style&&this.style.sourceCaches[c];if(m!==void 0)return m.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var m in c){var w=c[m]._tiles;for(var k in w){var P=w[k];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,m,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,m,w)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,m,w){w===void 0&&(w={});var k=w.pixelRatio;k===void 0&&(k=1);var P=w.sdf;P===void 0&&(P=!1);var B=w.stretchX,Z=w.stretchY,Y=w.content;if(this._lazyInitEmptyStyle(),m instanceof Os||Dr&&m instanceof Dr){var J=o.browser.getImageData(m);this.style.addImage(c,{data:new o.RGBAImage({width:J.width,height:J.height},J.data),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:P,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Q=m;this.style.addImage(c,{data:new o.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:P,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,c)}},s.prototype.updateImage=function(c,m){var w=this.style.getImage(c);if(!w)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var k=m instanceof Os||Dr&&m instanceof Dr?o.browser.getImageData(m):m,P=k.width,B=k.height,Z=k.data;return P===void 0||B===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):P!==w.data.width||B!==w.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(Z,!(m instanceof Os||Dr&&m instanceof Dr)),void this.style.updateImage(c,w))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,m){o.getImage(this._requestManager.transformRequest(c,o.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,m){return this._lazyInitEmptyStyle(),this.style.addLayer(c,m),this._update(!0)},s.prototype.moveLayer=function(c,m){return this.style.moveLayer(c,m),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,m,w){return this.style.setLayerZoomRange(c,m,w),this._update(!0)},s.prototype.setFilter=function(c,m,w){return w===void 0&&(w={}),this.style.setFilter(c,m,w),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,m,w,k){return k===void 0&&(k={}),this.style.setPaintProperty(c,m,w,k),this._update(!0)},s.prototype.getPaintProperty=function(c,m){return this.style.getPaintProperty(c,m)},s.prototype.setLayoutProperty=function(c,m,w,k){return k===void 0&&(k={}),this.style.setLayoutProperty(c,m,w,k),this._update(!0)},s.prototype.getLayoutProperty=function(c,m){return this.style.getLayoutProperty(c,m)},s.prototype.setLight=function(c,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(c,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,m){return this.style.setFeatureState(c,m),this._update()},s.prototype.removeFeatureState=function(c,m){return this.style.removeFeatureState(c,m),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,m=0;return this._container&&(c=this._container.clientWidth||400,m=this._container.clientHeight||300),[c,m]},s.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=z.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=z.create("div","mapboxgl-canvas-container",c);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=z.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var k=this._controlContainer=z.create("div","mapboxgl-control-container",c),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(B){P[B]=z.create("div","mapboxgl-ctrl-"+B,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,m){var w=o.browser.devicePixelRatio||1;this._canvas.width=w*c,this._canvas.height=w*m,this._canvas.style.width=c+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var c=o.extend({},A.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);m?(this.painter=new Yr(m,this.transform),o.webpSupported.testSupport(m)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var m,w=this,k=0,P=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=P.createQueryEXT(),P.beginQueryEXT(P.TIME_ELAPSED_EXT,m),k=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Z=this.transform.zoom,Y=o.browser.now();this.style.zoomHistory.update(Z,Y);var J=new o.EvaluationParameters(Z,{now:Y,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=J.crossFadingFactor();Q===1&&Q===this._crossFadingFactor||(B=!0,this._crossFadingFactor=Q),this.style.update(J)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var le=o.browser.now()-k;P.endQueryEXT(P.TIME_ELAPSED_EXT,m),setTimeout(function(){var ie=P.getQueryObjectEXT(m,P.QUERY_RESULT_EXT)/1e6;P.deleteQueryEXT(m),w.fire(new o.Event("gpu-timing-frame",{cpuTime:le,gpuTime:ie}))},50)}if(this.listens("gpu-timing-layer")){var oe=this.painter.collectGpuTimers();setTimeout(function(){var ie=w.painter.queryGpuTimers(oe);w.fire(new o.Event("gpu-timing-layer",{layerTimes:ie}))},50)}var ye=this._sourcesDirty||this._styleDirty||this._placementDirty;return ye||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ye||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,m=this._controls;c<m.length;c+=1)m[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),sl(this._canvasContainer),sl(this._controlContainer),sl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(m){c._frame=null,c._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,m){o.setCacheLimits(c,m)},a.version.get=function(){return o.version},Object.defineProperties(s.prototype,a),s}(Qr);function sl(n){n.parentNode&&n.parentNode.removeChild(n)}var ll={showCompass:!0,showZoom:!0,visualizePitch:!1},zo=function(n){var s=this;this.options=o.extend({},ll,n),this._container=z.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),z.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),z.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=z.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};zo.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),a=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},zo.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},zo.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Na(this._map,this._compass,this.options.visualizePitch)),this._container},zo.prototype.onRemove=function(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},zo.prototype._createButton=function(n,s){var a=z.create("button",n,this._container);return a.type="button",a.addEventListener("click",s),a},zo.prototype._setButtonTitle=function(n,s){var a=this._map._getUIString("NavigationControl."+s);n.title=a,n.setAttribute("aria-label",a)};var Na=function(n,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new ha({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,a&&(this.mousePitch=new pa({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),z.addEventListener(s,"mousedown",this.mousedown),z.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(s,"touchmove",this.touchmove),z.addEventListener(s,"touchend",this.touchend),z.addEventListener(s,"touchcancel",this.reset)};function Sl(n,s,a){if(n=new o.LngLat(n.lng,n.lat),s){var c=new o.LngLat(n.lng-360,n.lat),m=new o.LngLat(n.lng+360,n.lat),w=a.locationPoint(n).distSqr(s);a.locationPoint(c).distSqr(s)<w?n=c:a.locationPoint(m).distSqr(s)<w&&(n=m)}for(;Math.abs(n.lng-a.center.lng)>180;){var k=a.locationPoint(n);if(k.x>=0&&k.y>=0&&k.x<=a.width&&k.y<=a.height)break;n.lng>a.center.lng?n.lng-=360:n.lng+=360}return n}Na.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),z.disableDrag()},Na.prototype.move=function(n,s){var a=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&a.setBearing(a.getBearing()+c.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},Na.prototype.off=function(){var n=this.element;z.removeEventListener(n,"mousedown",this.mousedown),z.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(n,"touchmove",this.touchmove),z.removeEventListener(n,"touchend",this.touchend),z.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},Na.prototype.offTemp=function(){z.enableDrag(),z.removeEventListener(o.window,"mousemove",this.mousemove),z.removeEventListener(o.window,"mouseup",this.mouseup)},Na.prototype.mousedown=function(n){this.down(o.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),z.mousePos(this.element,n)),z.addEventListener(o.window,"mousemove",this.mousemove),z.addEventListener(o.window,"mouseup",this.mouseup)},Na.prototype.mousemove=function(n){this.move(n,z.mousePos(this.element,n))},Na.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},Na.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},Na.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},Na.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Na.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Rn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kl(n,s,a){var c=n.classList;for(var m in Rn)c.remove("mapboxgl-"+a+"-anchor-"+m);c.add("mapboxgl-"+a+"-anchor-"+s)}var Ya,Ua=function(n){function s(a,c){if(n.call(this),(a instanceof o.window.HTMLElement||c)&&(a=o.extend({element:a},c)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=o.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div"),this._element.setAttribute("aria-label","Map marker");var m=z.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var w=z.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var k=z.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");var P=z.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");for(var B=0,Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];B<Z.length;B+=1){var Y=Z[B],J=z.createNS("http://www.w3.org/2000/svg","ellipse");J.setAttributeNS(null,"opacity","0.04"),J.setAttributeNS(null,"cx","10.5"),J.setAttributeNS(null,"cy","5.80029008"),J.setAttributeNS(null,"rx",Y.rx),J.setAttributeNS(null,"ry",Y.ry),P.appendChild(J)}var Q=z.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);var le=z.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(le);var oe=z.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"opacity","0.25"),oe.setAttributeNS(null,"fill","#000000");var ye=z.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),oe.appendChild(ye);var ie=z.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");var fe=z.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _e=z.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");var Te=z.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),fe.appendChild(_e),fe.appendChild(Te),k.appendChild(P),k.appendChild(Q),k.appendChild(oe),k.appendChild(ie),k.appendChild(fe),m.appendChild(k),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=o.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Re){Re.preventDefault()}),this._element.addEventListener("mousedown",function(Re){Re.preventDefault()}),kl(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var c=a.code,m=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var c=a.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Sl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,Rn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=o.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(o.Evented),_s={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Il=0,ma=!1,Yc=function(n){function s(a){n.call(this),this.options=o.extend({},_s,a),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){var c;return this._map=a,this._container=z.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Ya!==void 0?c(Ya):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(m){c(Ya=m.state!=="denied")}):c(Ya=!!o.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Il=0,ma=!1},s.prototype._isOutOfMapMaxBounds=function(a){var c=this._map.getMaxBounds(),m=a.coords;return c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,w=this._map.getBearing(),k=o.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(m),k,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,c=this._map.unproject([0,a]),m=this._map.unproject([1,a]),w=c.distanceTo(m),k=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=k+"px",this._circleElement.style.height=k+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&ma)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var c=this;if(this._container.addEventListener("contextmenu",function(k){return k.preventDefault()}),this._geolocateButton=z.create("button","mapboxgl-ctrl-geolocate",this._container),z.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ua(this._dotElement),this._circleElement=z.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ua({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(k){k.geolocateSource||c._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new o.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Il--,ma=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Il>1?(a={maximumAge:6e5,timeout:0},ma=!0):(a=this.options.positionOptions,ma=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(o.Evented),uo={maxWidth:100,unit:"metric"},aa=function(n){this.options=o.extend({},uo,n),o.bindAll(["_onMove","setUnit"],this)};function Vs(n,s,a){var c=a&&a.maxWidth||100,m=n._container.clientHeight/2,w=n.unproject([0,m]),k=n.unproject([c,m]),P=w.distanceTo(k);if(a&&a.unit==="imperial"){var B=3.2808*P;B>5280?bs(s,c,B/5280,n._getUIString("ScaleControl.Miles")):bs(s,c,B,n._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?bs(s,c,P/1852,n._getUIString("ScaleControl.NauticalMiles")):P>=1e3?bs(s,c,P/1e3,n._getUIString("ScaleControl.Kilometers")):bs(s,c,P,n._getUIString("ScaleControl.Meters"))}function bs(n,s,a,c){var m,w,k,P=(m=a,(w=Math.pow(10,(""+Math.floor(m)).length-1))*(k=(k=m/w)>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(B){var Z=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*Z)/Z}(k)));n.style.width=s*(P/a)+"px",n.innerHTML=P+"&nbsp;"+c}aa.prototype.getDefaultPosition=function(){return"bottom-left"},aa.prototype._onMove=function(){Vs(this._map,this._container,this.options)},aa.prototype.onAdd=function(n){return this._map=n,this._container=z.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},aa.prototype.onRemove=function(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},aa.prototype.setUnit=function(n){this.options.unit=n,Vs(this._map,this._container,this.options)};var Ca=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof o.window.HTMLElement?this._container=n.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ca.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ca.prototype.onRemove=function(){z.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ca.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Ca.prototype._setupUI=function(){var n=this._fullscreenButton=z.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);z.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ca.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},Ca.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ca.prototype._isFullscreen=function(){return this._fullscreen},Ca.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ca.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Hl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Xl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ul=function(n){function s(a){n.call(this),this.options=o.extend(Object.create(Hl),a),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(o.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var c,m=o.window.document.createDocumentFragment(),w=o.window.document.createElement("body");for(w.innerHTML=a;c=w.firstChild;)m.appendChild(c);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=z.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=z.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=z.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(J){return c._container.classList.add(J)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),w=this.options.anchor,k=function J(Q){if(Q){if(typeof Q=="number"){var le=Math.round(Math.sqrt(.5*Math.pow(Q,2)));return{center:new o.Point(0,0),top:new o.Point(0,Q),"top-left":new o.Point(le,le),"top-right":new o.Point(-le,le),bottom:new o.Point(0,-Q),"bottom-left":new o.Point(le,-le),"bottom-right":new o.Point(-le,-le),left:new o.Point(Q,0),right:new o.Point(-Q,0)}}if(Q instanceof o.Point||Array.isArray(Q)){var oe=o.Point.convert(Q);return{center:oe,top:oe,"top-left":oe,"top-right":oe,bottom:oe,"bottom-left":oe,"bottom-right":oe,left:oe,right:oe}}return{center:o.Point.convert(Q.center||[0,0]),top:o.Point.convert(Q.top||[0,0]),"top-left":o.Point.convert(Q["top-left"]||[0,0]),"top-right":o.Point.convert(Q["top-right"]||[0,0]),bottom:o.Point.convert(Q.bottom||[0,0]),"bottom-left":o.Point.convert(Q["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(Q["bottom-right"]||[0,0]),left:o.Point.convert(Q.left||[0,0]),right:o.Point.convert(Q.right||[0,0])}}return J(new o.Point(0,0))}(this.options.offset);if(!w){var P,B=this._container.offsetWidth,Z=this._container.offsetHeight;P=m.y+k.bottom.y<Z?["top"]:m.y>this._map.transform.height-Z?["bottom"]:[],m.x<B/2?P.push("left"):m.x>this._map.transform.width-B/2&&P.push("right"),w=P.length===0?"bottom":P.join("-")}var Y=m.add(k[w]).round();z.setTransform(this._container,Rn[w]+" translate("+Y.x+"px,"+Y.y+"px)"),kl(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(Xl);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(o.Evented),xs={version:o.version,supported:A,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:lo,NavigationControl:zo,GeolocateControl:Yc,AttributionControl:Gi,ScaleControl:aa,FullscreenControl:Ca,Popup:ul,Marker:Ua,Style:gn,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Ce().acquire(Le)},clearPrewarmedResources:function(){var n=ct;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Le),ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(n){o.config.ACCESS_TOKEN=n},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(n){o.config.API_URL=n},get workerCount(){return Ne.workerCount},set workerCount(n){Ne.workerCount=n},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){o.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){o.clearTileCache(n)},workerUrl:""};return xs}),v})})($m);const Pw=$m.exports;function hb(u){let h;const f=u[15].default,y=um(f,u,u[14],null);return{c(){y&&y.c()},l(v){y&&y.l(v)},m(v,_){y&&y.m(v,_),h=!0},p(v,_){y&&y.p&&(!h||_&16384)&&cm(y,f,v,v[14],h?pm(f,v[14],_,null):hm(v[14]),null)},i(v){h||(rt(y,v),h=!0)},o(v){ht(y,v),h=!1},d(v){y&&y.d(v)}}}function Cw(u){let h,f,y,v=u[0]&&hb(u);return{c(){h=D("div"),v&&v.c(),this.h()},l(_){h=M(_,"DIV",{class:!0,id:!0});var o=R(h);v&&v.l(o),o.forEach(T),this.h()},h(){S(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),S(h,"id",u[1]),yl(()=>u[16].call(h))},m(_,o){ze(_,h,o),v&&v.m(h,null),f=vl(h,u[16].bind(h)),u[17](h),y=!0},p(_,[o]){_[0]?v?(v.p(_,o),o&1&&rt(v,1)):(v=hb(_),v.c(),rt(v,1),v.m(h,null)):v&&(Uu(),ht(v,1,1,()=>{v=null}),qu()),(!y||o&2)&&S(h,"id",_[1])},i(_){y||(rt(v),y=!0)},o(_){ht(v),y=!1},d(_){_&&T(h),v&&v.d(),f(),u[17](null)}}}function Dw(u,h,f){let{$$slots:y={},$$scope:v}=h,{map:_}=h,{id:o="map"}=h,{location:A={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:z="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:F=!0}=h,{minzoom:V=0}=h,{maxzoom:j=14}=h,{zoom:q=null}=h,{scrollzoom:pe=!0}=h,{geolocate:he=!0}=h,{zoomcontrol:ke=!0}=h,{options:Ee={}}=h,Be,Fe;xx("map",{getMap:()=>_}),A.bounds?Ee={...Ee,bounds:A.bounds}:A.lon&&A.lat&&(Ee={...Ee,center:[A.lon,A.lat]},A.zoom&&(Ee.zoom=A.zoom)),wx(()=>{const et=document.createElement("link");return et.rel="stylesheet",et.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",et.onload=()=>{f(0,_=new $m.exports.Map({container:Be,style:z,minZoom:V,maxZoom:j,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:F,...Ee})),ke&&_.addControl(new $m.exports.NavigationControl({showCompass:!1})),pe||_.scrollZoom.disable(),he&&_.addControl(new $m.exports.GeolocateControl),_.on("load",()=>{f(4,q=_.getZoom())}),_.on("zoom",()=>{f(4,q=_.getZoom())})},document.head.appendChild(et),()=>{_.remove(),et.parentNode.removeChild(et)}});function Ft(){let et=document.getElementsByClassName("mapboxgl-canvas");et[0]&&(et[0].style.width="100%",_.resize())}function Ct(){Fe=this.clientWidth,f(2,Fe)}function mt(et){up[et?"unshift":"push"](()=>{Be=et,f(3,Be)})}return u.$$set=et=>{"map"in et&&f(0,_=et.map),"id"in et&&f(1,o=et.id),"location"in et&&f(6,A=et.location),"style"in et&&f(7,z=et.style),"interactive"in et&&f(8,F=et.interactive),"minzoom"in et&&f(9,V=et.minzoom),"maxzoom"in et&&f(10,j=et.maxzoom),"zoom"in et&&f(4,q=et.zoom),"scrollzoom"in et&&f(11,pe=et.scrollzoom),"geolocate"in et&&f(12,he=et.geolocate),"zoomcontrol"in et&&f(13,ke=et.zoomcontrol),"options"in et&&f(5,Ee=et.options),"$$scope"in et&&f(14,v=et.$$scope)},u.$$.update=()=>{u.$$.dirty&4&&Fe&&Ft()},[_,o,Fe,Be,q,Ee,A,z,F,V,j,pe,he,ke,v,y,Ct,mt]}class Mw extends gl{constructor(h){super(),_l(this,h,Dw,Cw,bl,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function pb(u){let h;const f=u[11].default,y=um(f,u,u[10],null);return{c(){y&&y.c()},l(v){y&&y.l(v)},m(v,_){y&&y.m(v,_),h=!0},p(v,_){y&&y.p&&(!h||_&1024)&&cm(y,f,v,v[10],h?pm(f,v[10],_,null):hm(v[10]),null)},i(v){h||(rt(y,v),h=!0)},o(v){ht(y,v),h=!1},d(v){y&&y.d(v)}}}function Lw(u){let h,f,y=u[0]&&pb(u);return{c(){y&&y.c(),h=La()},l(v){y&&y.l(v),h=La()},m(v,_){y&&y.m(v,_),ze(v,h,_),f=!0},p(v,[_]){v[0]?y?(y.p(v,_),_&1&&rt(y,1)):(y=pb(v),y.c(),rt(y,1),y.m(h.parentNode,h)):y&&(Uu(),ht(y,1,1,()=>{y=null}),qu())},i(v){f||(rt(y),f=!0)},o(v){ht(y),f=!1},d(v){y&&y.d(v),v&&T(h)}}}function Rw(u,h,f){let{$$slots:y={},$$scope:v}=h,{id:_}=h,{type:o}=h,{url:A=null}=h,{props:z={}}=h,{data:F=null}=h,{layer:V=null}=h,{promoteId:j=null}=h,{minzoom:q=null}=h,{maxzoom:pe=null}=h,he=!1;const{getMap:ke}=iy("map"),Ee=ke();Ee.getSource(_)&&Ee.removeSource(_);function Be(){Ee.isSourceLoaded(_)?(f(0,he=!0),console.log(_+" loaded!")):setTimeout(()=>{console.log("..."),Be()},500)}function Fe(){Ee.isStyleLoaded(_)?(Ft(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),Fe()},500)}q&&(z.minzoom=q),pe&&(z.maxzoom=pe),V&&j?(z.promoteId={},z.promoteId[V]=j):j&&(z.promoteId=j);function Ft(){console.log(_+" map source loading..."),o=="geojson"?F?(Ee.addSource(_,{type:o,data:F,...z}),Be()):A&&(Ee.addSource(_,{type:o,data:A,...z}),Be()):o=="vector"&&(Ee.addSource(_,{type:o,tiles:[A],...z}),Be())}Fe();function Ct(){Ee.getSource(_).setData(F)}return u.$$set=mt=>{"id"in mt&&f(2,_=mt.id),"type"in mt&&f(3,o=mt.type),"url"in mt&&f(4,A=mt.url),"props"in mt&&f(1,z=mt.props),"data"in mt&&f(5,F=mt.data),"layer"in mt&&f(6,V=mt.layer),"promoteId"in mt&&f(7,j=mt.promoteId),"minzoom"in mt&&f(8,q=mt.minzoom),"maxzoom"in mt&&f(9,pe=mt.maxzoom),"$$scope"in mt&&f(10,v=mt.$$scope)},u.$$.update=()=>{u.$$.dirty&33&&he&&F&&Ct()},[he,z,_,o,A,F,V,j,q,pe,v,y]}class Bw extends gl{constructor(h){super(),_l(this,h,Rw,Lw,bl,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function Ow(u,h,f){const{Popup:y}=Pw,v=bx(),_=new y({closeButton:!1,closeOnClick:!1});let{id:o}=h,{source:A}=h,{sourceLayer:z=null}=h,{type:F}=h,{filter:V=null}=h,{layout:j={}}=h,{paint:q={}}=h,{data:pe=null}=h,{code:he=null}=h,{name:ke="name"}=h,{colorCode:Ee=null}=h,{click:Be=!1}=h,{ignoreClick:Fe=!1}=h,{clickCenter:Ft=!1}=h,{selected:Ct=null}=h,{hover:mt=!1}=h,{hovered:et=null}=h,{highlight:vr=!1}=h,{highlightKey:pr="highlighted"}=h,{highlighted:lr=[]}=h,{order:bt=null}=h,{maxzoom:kt=null}=h,{minzoom:Rr=null}=h,{isChild:Nt=!1}=h;const{getMap:dr}=iy("map"),it=dr();let rr=null,wr=null,Vr=[];it.getLayer(o)&&it.removeLayer(o);let zr={id:o,type:F,source:A,paint:q,layout:j};V&&(zr.filter=V),z&&(zr["source-layer"]=z),kt&&(zr.maxzoom=kt),Rr&&(zr.minzoom=Rr),it.addLayer(zr,bt);function ft(){console.log("updating colors..."),pe.forEach(nt=>{it.setFeatureState({source:A,sourceLayer:z,id:nt[he]},{color:nt[Ee]})})}return Be&&it.on("click",o,nt=>{if(nt.features.length>0&&!Fe){let gr=nt.features[0].id;if(Nt&&lr.includes(gr)||!Nt&&Ct!=gr){if(f(0,Ct=gr),v("select",{code:Ct}),rr&&it.setFeatureState({source:A,sourceLayer:z,id:rr},{selected:!1}),it.setFeatureState({source:A,sourceLayer:z,id:Ct},{selected:!0}),Ft){let on=centroid(nt.features[0].toJSON().geometry);it.flyTo({center:on.geometry.coordinates})}f(24,rr=Ct)}}}),mt&&(it.on("mousemove",o,nt=>{if(nt.features.length>0){let gr=nt.features[0].id;et&&it.setFeatureState({source:A,sourceLayer:z,id:et},{hovered:!1}),Nt&&lr.includes(gr)||!Nt&&Ct!=gr?(f(1,et=f(25,wr=gr)),it.setFeatureState({source:A,sourceLayer:z,id:et},{hovered:!0}),it.getCanvas().style.cursor="pointer",_.setLngLat(nt.lngLat).setHTML(`<strong>${nt.features[0].properties[ke]?nt.features[0].properties[ke]:nt.features[0].properties[he]}</strong>`).addTo(it)):_.remove()}}),it.on("mouseleave",o,nt=>{et&&it.setFeatureState({source:A,sourceLayer:z,id:et},{hovered:!1}),f(1,et=f(25,wr=null)),it.getCanvas().style.cursor="",_.remove()})),u.$$set=nt=>{"id"in nt&&f(2,o=nt.id),"source"in nt&&f(3,A=nt.source),"sourceLayer"in nt&&f(4,z=nt.sourceLayer),"type"in nt&&f(5,F=nt.type),"filter"in nt&&f(6,V=nt.filter),"layout"in nt&&f(7,j=nt.layout),"paint"in nt&&f(8,q=nt.paint),"data"in nt&&f(9,pe=nt.data),"code"in nt&&f(10,he=nt.code),"name"in nt&&f(11,ke=nt.name),"colorCode"in nt&&f(12,Ee=nt.colorCode),"click"in nt&&f(13,Be=nt.click),"ignoreClick"in nt&&f(14,Fe=nt.ignoreClick),"clickCenter"in nt&&f(15,Ft=nt.clickCenter),"selected"in nt&&f(0,Ct=nt.selected),"hover"in nt&&f(16,mt=nt.hover),"hovered"in nt&&f(1,et=nt.hovered),"highlight"in nt&&f(17,vr=nt.highlight),"highlightKey"in nt&&f(18,pr=nt.highlightKey),"highlighted"in nt&&f(19,lr=nt.highlighted),"order"in nt&&f(20,bt=nt.order),"maxzoom"in nt&&f(21,kt=nt.maxzoom),"minzoom"in nt&&f(22,Rr=nt.minzoom),"isChild"in nt&&f(23,Nt=nt.isChild)},u.$$.update=()=>{u.$$.dirty[0]&4096&&Ee&&ft(),u.$$.dirty[0]&68026392&&vr&&lr!=Vr&&(Vr[0]&&Vr.forEach(nt=>{let gr={};gr[pr]=!1,it.setFeatureState({source:A,sourceLayer:z,id:nt},gr)}),f(26,Vr=lr),lr[0]&&lr.forEach(nt=>{let gr={};gr[pr]=!0,it.setFeatureState({source:A,sourceLayer:z,id:nt},gr)})),u.$$.dirty[0]&16777241&&Ct!=rr&&(rr&&it.setFeatureState({source:A,sourceLayer:z,id:rr},{selected:!1}),Ct&&it.setFeatureState({source:A,sourceLayer:z,id:Ct},{selected:!0}),f(24,rr=Ct)),u.$$.dirty[0]&33619994&&mt&&et!=wr&&(wr&&it.setFeatureState({source:A,sourceLayer:z,id:wr},{hovered:!1}),et&&it.setFeatureState({source:A,sourceLayer:z,id:et},{hovered:!0}),f(25,wr=et))},[Ct,et,o,A,z,F,V,j,q,pe,he,ke,Ee,Be,Fe,Ft,mt,vr,pr,lr,bt,kt,Rr,Nt,rr,wr,Vr]}class gg extends gl{constructor(h){super(),_l(this,h,Ow,null,bl,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function Vw(u){return u===0?!0:u}function Up(u){return Vw(u)?Array.isArray(u)?h=>u.map(f=>typeof f!="function"?h[f]:f(h)):typeof u!="function"?h=>h[u]:u:null}function Fw(u){const h={};for(const f of u){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":y,"1":v}=f;Object.defineProperty(h,y,{configurable:!0,enumerable:!0,writable:!0,value:v})}return h}function _g(u,h={}){return Fw(Object.entries(u).filter(([f,y])=>y!==void 0&&h[f]===void 0))}function Nw(u,h){if(!Array.isArray(u))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof u}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},y=Object.keys(h),v=y.length;let _,o,A,z,F,V,j,q;const pe=u.length;for(_=0;_<v;_+=1){for(z=y[_],j=h[z],F=null,V=null,o=0;o<pe;o+=1)if(q=j(u[o]),Array.isArray(q)){const he=q.length;for(A=0;A<he;A+=1)q[A]!==void 0&&q[A]!==null&&Number.isNaN(q[A])===!1&&((F===null||q[A]<F)&&(F=q[A]),(V===null||q[A]>V)&&(V=q[A]))}else q!=null&&Number.isNaN(q)===!1&&((F===null||q<F)&&(F=q),(V===null||q>V)&&(V=q));f[z]=[F,V]}return f}function Ax(u=[],h){return Array.isArray(h)===!0?h.map((f,y)=>f===null?u[y]:f):u}function Py(u){return function([f,y]){return f?Ax(f[u],y):y}}function qy(u,h){return u==null||h==null?NaN:u<h?-1:u>h?1:u>=h?0:NaN}function Uw(u,h){return u==null||h==null?NaN:h<u?-1:h>u?1:h>=u?0:NaN}function zx(u){let h,f,y;u.length!==2?(h=qy,f=(A,z)=>qy(u(A),z),y=(A,z)=>u(A)-z):(h=u===qy||u===Uw?u:qw,f=u,y=u);function v(A,z,F=0,V=A.length){if(F<V){if(h(z,z)!==0)return V;do{const j=F+V>>>1;f(A[j],z)<0?F=j+1:V=j}while(F<V)}return F}function _(A,z,F=0,V=A.length){if(F<V){if(h(z,z)!==0)return V;do{const j=F+V>>>1;f(A[j],z)<=0?F=j+1:V=j}while(F<V)}return F}function o(A,z,F=0,V=A.length){const j=v(A,z,F,V-1);return j>F&&y(A[j-1],z)>-y(A[j],z)?j-1:j}return{left:v,center:o,right:_}}function qw(){return 0}function jw(u){return u===null?NaN:+u}const Zw=zx(qy),Gw=Zw.right;zx(jw).center;const Kw=Gw;class fb extends Map{constructor(h,f=Ww){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[y,v]of h)this.set(y,v)}get(h){return super.get(db(this,h))}has(h){return super.has(db(this,h))}set(h,f){return super.set(Hw(this,h),f)}delete(h){return super.delete(Xw(this,h))}}function db({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):f}function Hw({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):(u.set(y,f),f)}function Xw({_intern:u,_key:h},f){const y=h(f);return u.has(y)&&(f=u.get(y),u.delete(y)),f}function Ww(u){return u!==null&&typeof u=="object"?u.valueOf():u}var Eg=Math.sqrt(50),Sg=Math.sqrt(10),kg=Math.sqrt(2);function Yw(u,h,f){var y,v=-1,_,o,A;if(h=+h,u=+u,f=+f,u===h&&f>0)return[u];if((y=h<u)&&(_=u,u=h,h=_),(A=Px(u,h,f))===0||!isFinite(A))return[];if(A>0){let z=Math.round(u/A),F=Math.round(h/A);for(z*A<u&&++z,F*A>h&&--F,o=new Array(_=F-z+1);++v<_;)o[v]=(z+v)*A}else{A=-A;let z=Math.round(u*A),F=Math.round(h*A);for(z/A<u&&++z,F/A>h&&--F,o=new Array(_=F-z+1);++v<_;)o[v]=(z+v)/A}return y&&o.reverse(),o}function Px(u,h,f){var y=(h-u)/Math.max(0,f),v=Math.floor(Math.log(y)/Math.LN10),_=y/Math.pow(10,v);return v>=0?(_>=Eg?10:_>=Sg?5:_>=kg?2:1)*Math.pow(10,v):-Math.pow(10,-v)/(_>=Eg?10:_>=Sg?5:_>=kg?2:1)}function Jw(u,h,f){var y=Math.abs(h-u)/Math.max(0,f),v=Math.pow(10,Math.floor(Math.log(y)/Math.LN10)),_=y/v;return _>=Eg?v*=10:_>=Sg?v*=5:_>=kg&&(v*=2),h<u?-v:v}function Qw(u,h,f){u=+u,h=+h,f=(v=arguments.length)<2?(h=u,u=0,1):v<3?1:+f;for(var y=-1,v=Math.max(0,Math.ceil((h-u)/f))|0,_=new Array(v);++y<v;)_[y]=u+y*f;return _}function iv(u,h){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(h).domain(u);break}return this}const mb=Symbol("implicit");function Cx(){var u=new fb,h=[],f=[],y=mb;function v(_){let o=u.get(_);if(o===void 0){if(y!==mb)return y;u.set(_,o=h.push(_)-1)}return f[o%f.length]}return v.domain=function(_){if(!arguments.length)return h.slice();h=[],u=new fb;for(const o of _)u.has(o)||u.set(o,h.push(o)-1);return v},v.range=function(_){return arguments.length?(f=Array.from(_),v):f.slice()},v.unknown=function(_){return arguments.length?(y=_,v):y},v.copy=function(){return Cx(h,f).unknown(y)},iv.apply(v,arguments),v}function Dx(){var u=Cx().unknown(void 0),h=u.domain,f=u.range,y=0,v=1,_,o,A=!1,z=0,F=0,V=.5;delete u.unknown;function j(){var q=h().length,pe=v<y,he=pe?v:y,ke=pe?y:v;_=(ke-he)/Math.max(1,q-z+F*2),A&&(_=Math.floor(_)),he+=(ke-he-_*(q-z))*V,o=_*(1-z),A&&(he=Math.round(he),o=Math.round(o));var Ee=Qw(q).map(function(Be){return he+_*Be});return f(pe?Ee.reverse():Ee)}return u.domain=function(q){return arguments.length?(h(q),j()):h()},u.range=function(q){return arguments.length?([y,v]=q,y=+y,v=+v,j()):[y,v]},u.rangeRound=function(q){return[y,v]=q,y=+y,v=+v,A=!0,j()},u.bandwidth=function(){return o},u.step=function(){return _},u.round=function(q){return arguments.length?(A=!!q,j()):A},u.padding=function(q){return arguments.length?(z=Math.min(1,F=+q),j()):z},u.paddingInner=function(q){return arguments.length?(z=Math.min(1,q),j()):z},u.paddingOuter=function(q){return arguments.length?(F=+q,j()):F},u.align=function(q){return arguments.length?(V=Math.max(0,Math.min(1,q)),j()):V},u.copy=function(){return Dx(h(),[y,v]).round(A).paddingInner(z).paddingOuter(F).align(V)},iv.apply(j(),arguments)}function Bg(u,h,f){u.prototype=h.prototype=f,f.constructor=u}function Mx(u,h){var f=Object.create(u.prototype);for(var y in h)f[y]=h[y];return f}function hy(){}var ey=.7,Xy=1/ey,lm="\\s*([+-]?\\d+)\\s*",ty="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$w=/^#([0-9a-f]{3,8})$/,eE=new RegExp(`^rgb\\(${lm},${lm},${lm}\\)$`),tE=new RegExp(`^rgb\\(${Dh},${Dh},${Dh}\\)$`),rE=new RegExp(`^rgba\\(${lm},${lm},${lm},${ty}\\)$`),iE=new RegExp(`^rgba\\(${Dh},${Dh},${Dh},${ty}\\)$`),nE=new RegExp(`^hsl\\(${ty},${Dh},${Dh}\\)$`),aE=new RegExp(`^hsla\\(${ty},${Dh},${Dh},${ty}\\)$`),yb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bg(hy,ry,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:vb,formatHex:vb,formatHex8:oE,formatHsl:sE,formatRgb:gb,toString:gb});function vb(){return this.rgb().formatHex()}function oE(){return this.rgb().formatHex8()}function sE(){return Lx(this).formatHsl()}function gb(){return this.rgb().formatRgb()}function ry(u){var h,f;return u=(u+"").trim().toLowerCase(),(h=$w.exec(u))?(f=h[1].length,h=parseInt(h[1],16),f===6?_b(h):f===3?new yu(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?Cy(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?Cy(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=eE.exec(u))?new yu(h[1],h[2],h[3],1):(h=tE.exec(u))?new yu(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=rE.exec(u))?Cy(h[1],h[2],h[3],h[4]):(h=iE.exec(u))?Cy(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=nE.exec(u))?wb(h[1],h[2]/100,h[3]/100,1):(h=aE.exec(u))?wb(h[1],h[2]/100,h[3]/100,h[4]):yb.hasOwnProperty(u)?_b(yb[u]):u==="transparent"?new yu(NaN,NaN,NaN,0):null}function _b(u){return new yu(u>>16&255,u>>8&255,u&255,1)}function Cy(u,h,f,y){return y<=0&&(u=h=f=NaN),new yu(u,h,f,y)}function lE(u){return u instanceof hy||(u=ry(u)),u?(u=u.rgb(),new yu(u.r,u.g,u.b,u.opacity)):new yu}function Ig(u,h,f,y){return arguments.length===1?lE(u):new yu(u,h,f,y==null?1:y)}function yu(u,h,f,y){this.r=+u,this.g=+h,this.b=+f,this.opacity=+y}Bg(yu,Ig,Mx(hy,{brighter(u){return u=u==null?Xy:Math.pow(Xy,u),new yu(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=u==null?ey:Math.pow(ey,u),new yu(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new yu(Gf(this.r),Gf(this.g),Gf(this.b),Wy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bb,formatHex:bb,formatHex8:uE,formatRgb:xb,toString:xb}));function bb(){return`#${Zf(this.r)}${Zf(this.g)}${Zf(this.b)}`}function uE(){return`#${Zf(this.r)}${Zf(this.g)}${Zf(this.b)}${Zf((isNaN(this.opacity)?1:this.opacity)*255)}`}function xb(){const u=Wy(this.opacity);return`${u===1?"rgb(":"rgba("}${Gf(this.r)}, ${Gf(this.g)}, ${Gf(this.b)}${u===1?")":`, ${u})`}`}function Wy(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function Gf(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function Zf(u){return u=Gf(u),(u<16?"0":"")+u.toString(16)}function wb(u,h,f,y){return y<=0?u=h=f=NaN:f<=0||f>=1?u=h=NaN:h<=0&&(u=NaN),new Gc(u,h,f,y)}function Lx(u){if(u instanceof Gc)return new Gc(u.h,u.s,u.l,u.opacity);if(u instanceof hy||(u=ry(u)),!u)return new Gc;if(u instanceof Gc)return u;u=u.rgb();var h=u.r/255,f=u.g/255,y=u.b/255,v=Math.min(h,f,y),_=Math.max(h,f,y),o=NaN,A=_-v,z=(_+v)/2;return A?(h===_?o=(f-y)/A+(f<y)*6:f===_?o=(y-h)/A+2:o=(h-f)/A+4,A/=z<.5?_+v:2-_-v,o*=60):A=z>0&&z<1?0:o,new Gc(o,A,z,u.opacity)}function cE(u,h,f,y){return arguments.length===1?Lx(u):new Gc(u,h,f,y==null?1:y)}function Gc(u,h,f,y){this.h=+u,this.s=+h,this.l=+f,this.opacity=+y}Bg(Gc,cE,Mx(hy,{brighter(u){return u=u==null?Xy:Math.pow(Xy,u),new Gc(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=u==null?ey:Math.pow(ey,u),new Gc(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+(this.h<0)*360,h=isNaN(u)||isNaN(this.s)?0:this.s,f=this.l,y=f+(f<.5?f:1-f)*h,v=2*f-y;return new yu(bg(u>=240?u-240:u+120,v,y),bg(u,v,y),bg(u<120?u+240:u-120,v,y),this.opacity)},clamp(){return new Gc(Eb(this.h),Dy(this.s),Dy(this.l),Wy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=Wy(this.opacity);return`${u===1?"hsl(":"hsla("}${Eb(this.h)}, ${Dy(this.s)*100}%, ${Dy(this.l)*100}%${u===1?")":`, ${u})`}`}}));function Eb(u){return u=(u||0)%360,u<0?u+360:u}function Dy(u){return Math.max(0,Math.min(1,u||0))}function bg(u,h,f){return(u<60?h+(f-h)*u/60:u<180?f:u<240?h+(f-h)*(240-u)/60:h)*255}const Og=u=>()=>u;function hE(u,h){return function(f){return u+f*h}}function pE(u,h,f){return u=Math.pow(u,f),h=Math.pow(h,f)-u,f=1/f,function(y){return Math.pow(u+y*h,f)}}function fE(u){return(u=+u)==1?Rx:function(h,f){return f-h?pE(h,f,u):Og(isNaN(h)?f:h)}}function Rx(u,h){var f=h-u;return f?hE(u,f):Og(isNaN(u)?h:u)}const Sb=function u(h){var f=fE(h);function y(v,_){var o=f((v=Ig(v)).r,(_=Ig(_)).r),A=f(v.g,_.g),z=f(v.b,_.b),F=Rx(v.opacity,_.opacity);return function(V){return v.r=o(V),v.g=A(V),v.b=z(V),v.opacity=F(V),v+""}}return y.gamma=u,y}(1);function dE(u,h){h||(h=[]);var f=u?Math.min(h.length,u.length):0,y=h.slice(),v;return function(_){for(v=0;v<f;++v)y[v]=u[v]*(1-_)+h[v]*_;return y}}function mE(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function yE(u,h){var f=h?h.length:0,y=u?Math.min(f,u.length):0,v=new Array(y),_=new Array(f),o;for(o=0;o<y;++o)v[o]=Vg(u[o],h[o]);for(;o<f;++o)_[o]=h[o];return function(A){for(o=0;o<y;++o)_[o]=v[o](A);return _}}function vE(u,h){var f=new Date;return u=+u,h=+h,function(y){return f.setTime(u*(1-y)+h*y),f}}function Yy(u,h){return u=+u,h=+h,function(f){return u*(1-f)+h*f}}function gE(u,h){var f={},y={},v;(u===null||typeof u!="object")&&(u={}),(h===null||typeof h!="object")&&(h={});for(v in h)v in u?f[v]=Vg(u[v],h[v]):y[v]=h[v];return function(_){for(v in f)y[v]=f[v](_);return y}}var Tg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xg=new RegExp(Tg.source,"g");function _E(u){return function(){return u}}function bE(u){return function(h){return u(h)+""}}function xE(u,h){var f=Tg.lastIndex=xg.lastIndex=0,y,v,_,o=-1,A=[],z=[];for(u=u+"",h=h+"";(y=Tg.exec(u))&&(v=xg.exec(h));)(_=v.index)>f&&(_=h.slice(f,_),A[o]?A[o]+=_:A[++o]=_),(y=y[0])===(v=v[0])?A[o]?A[o]+=v:A[++o]=v:(A[++o]=null,z.push({i:o,x:Yy(y,v)})),f=xg.lastIndex;return f<h.length&&(_=h.slice(f),A[o]?A[o]+=_:A[++o]=_),A.length<2?z[0]?bE(z[0].x):_E(h):(h=z.length,function(F){for(var V=0,j;V<h;++V)A[(j=z[V]).i]=j.x(F);return A.join("")})}function Vg(u,h){var f=typeof h,y;return h==null||f==="boolean"?Og(h):(f==="number"?Yy:f==="string"?(y=ry(h))?(h=y,Sb):xE:h instanceof ry?Sb:h instanceof Date?vE:mE(h)?dE:Array.isArray(h)?yE:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?gE:Yy)(u,h)}function wE(u,h){return u=+u,h=+h,function(f){return Math.round(u*(1-f)+h*f)}}function EE(u){return function(){return u}}function SE(u){return+u}var kb=[0,1];function Ch(u){return u}function Ag(u,h){return(h-=u=+u)?function(f){return(f-u)/h}:EE(isNaN(h)?NaN:.5)}function kE(u,h){var f;return u>h&&(f=u,u=h,h=f),function(y){return Math.max(u,Math.min(h,y))}}function IE(u,h,f){var y=u[0],v=u[1],_=h[0],o=h[1];return v<y?(y=Ag(v,y),_=f(o,_)):(y=Ag(y,v),_=f(_,o)),function(A){return _(y(A))}}function TE(u,h,f){var y=Math.min(u.length,h.length)-1,v=new Array(y),_=new Array(y),o=-1;for(u[y]<u[0]&&(u=u.slice().reverse(),h=h.slice().reverse());++o<y;)v[o]=Ag(u[o],u[o+1]),_[o]=f(h[o],h[o+1]);return function(A){var z=Kw(u,A,1,y)-1;return _[z](v[z](A))}}function Bx(u,h){return h.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function Ox(){var u=kb,h=kb,f=Vg,y,v,_,o=Ch,A,z,F;function V(){var q=Math.min(u.length,h.length);return o!==Ch&&(o=kE(u[0],u[q-1])),A=q>2?TE:IE,z=F=null,j}function j(q){return q==null||isNaN(q=+q)?_:(z||(z=A(u.map(y),h,f)))(y(o(q)))}return j.invert=function(q){return o(v((F||(F=A(h,u.map(y),Yy)))(q)))},j.domain=function(q){return arguments.length?(u=Array.from(q,SE),V()):u.slice()},j.range=function(q){return arguments.length?(h=Array.from(q),V()):h.slice()},j.rangeRound=function(q){return h=Array.from(q),f=wE,V()},j.clamp=function(q){return arguments.length?(o=q?!0:Ch,V()):o!==Ch},j.interpolate=function(q){return arguments.length?(f=q,V()):f},j.unknown=function(q){return arguments.length?(_=q,j):_},function(q,pe){return y=q,v=pe,V()}}function AE(){return Ox()(Ch,Ch)}function zE(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)}function Jy(u,h){if((f=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var f,y=u.slice(0,f);return[y.length>1?y[0]+y.slice(2):y,+u.slice(f+1)]}function fm(u){return u=Jy(Math.abs(u)),u?u[1]:NaN}function PE(u,h){return function(f,y){for(var v=f.length,_=[],o=0,A=u[0],z=0;v>0&&A>0&&(z+A+1>y&&(A=Math.max(1,y-z)),_.push(f.substring(v-=A,v+A)),!((z+=A+1)>y));)A=u[o=(o+1)%u.length];return _.reverse().join(h)}}function CE(u){return function(h){return h.replace(/[0-9]/g,function(f){return u[+f]})}}var DE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qy(u){if(!(h=DE.exec(u)))throw new Error("invalid format: "+u);var h;return new Fg({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}Qy.prototype=Fg.prototype;function Fg(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}Fg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ME(u){e:for(var h=u.length,f=1,y=-1,v;f<h;++f)switch(u[f]){case".":y=v=f;break;case"0":y===0&&(y=f),v=f;break;default:if(!+u[f])break e;y>0&&(y=0);break}return y>0?u.slice(0,y)+u.slice(v+1):u}var Vx;function LE(u,h){var f=Jy(u,h);if(!f)return u+"";var y=f[0],v=f[1],_=v-(Vx=Math.max(-8,Math.min(8,Math.floor(v/3)))*3)+1,o=y.length;return _===o?y:_>o?y+new Array(_-o+1).join("0"):_>0?y.slice(0,_)+"."+y.slice(_):"0."+new Array(1-_).join("0")+Jy(u,Math.max(0,h+_-1))[0]}function Ib(u,h){var f=Jy(u,h);if(!f)return u+"";var y=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+y:y.length>v+1?y.slice(0,v+1)+"."+y.slice(v+1):y+new Array(v-y.length+2).join("0")}const Tb={"%":(u,h)=>(u*100).toFixed(h),b:u=>Math.round(u).toString(2),c:u=>u+"",d:zE,e:(u,h)=>u.toExponential(h),f:(u,h)=>u.toFixed(h),g:(u,h)=>u.toPrecision(h),o:u=>Math.round(u).toString(8),p:(u,h)=>Ib(u*100,h),r:Ib,s:LE,X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function Ab(u){return u}var zb=Array.prototype.map,Pb=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function RE(u){var h=u.grouping===void 0||u.thousands===void 0?Ab:PE(zb.call(u.grouping,Number),u.thousands+""),f=u.currency===void 0?"":u.currency[0]+"",y=u.currency===void 0?"":u.currency[1]+"",v=u.decimal===void 0?".":u.decimal+"",_=u.numerals===void 0?Ab:CE(zb.call(u.numerals,String)),o=u.percent===void 0?"%":u.percent+"",A=u.minus===void 0?"\u2212":u.minus+"",z=u.nan===void 0?"NaN":u.nan+"";function F(j){j=Qy(j);var q=j.fill,pe=j.align,he=j.sign,ke=j.symbol,Ee=j.zero,Be=j.width,Fe=j.comma,Ft=j.precision,Ct=j.trim,mt=j.type;mt==="n"?(Fe=!0,mt="g"):Tb[mt]||(Ft===void 0&&(Ft=12),Ct=!0,mt="g"),(Ee||q==="0"&&pe==="=")&&(Ee=!0,q="0",pe="=");var et=ke==="$"?f:ke==="#"&&/[boxX]/.test(mt)?"0"+mt.toLowerCase():"",vr=ke==="$"?y:/[%p]/.test(mt)?o:"",pr=Tb[mt],lr=/[defgprs%]/.test(mt);Ft=Ft===void 0?6:/[gprs]/.test(mt)?Math.max(1,Math.min(21,Ft)):Math.max(0,Math.min(20,Ft));function bt(kt){var Rr=et,Nt=vr,dr,it,rr;if(mt==="c")Nt=pr(kt)+Nt,kt="";else{kt=+kt;var wr=kt<0||1/kt<0;if(kt=isNaN(kt)?z:pr(Math.abs(kt),Ft),Ct&&(kt=ME(kt)),wr&&+kt==0&&he!=="+"&&(wr=!1),Rr=(wr?he==="("?he:A:he==="-"||he==="("?"":he)+Rr,Nt=(mt==="s"?Pb[8+Vx/3]:"")+Nt+(wr&&he==="("?")":""),lr){for(dr=-1,it=kt.length;++dr<it;)if(rr=kt.charCodeAt(dr),48>rr||rr>57){Nt=(rr===46?v+kt.slice(dr+1):kt.slice(dr))+Nt,kt=kt.slice(0,dr);break}}}Fe&&!Ee&&(kt=h(kt,1/0));var Vr=Rr.length+kt.length+Nt.length,zr=Vr<Be?new Array(Be-Vr+1).join(q):"";switch(Fe&&Ee&&(kt=h(zr+kt,zr.length?Be-Nt.length:1/0),zr=""),pe){case"<":kt=Rr+kt+Nt+zr;break;case"=":kt=Rr+zr+kt+Nt;break;case"^":kt=zr.slice(0,Vr=zr.length>>1)+Rr+kt+Nt+zr.slice(Vr);break;default:kt=zr+Rr+kt+Nt;break}return _(kt)}return bt.toString=function(){return j+""},bt}function V(j,q){var pe=F((j=Qy(j),j.type="f",j)),he=Math.max(-8,Math.min(8,Math.floor(fm(q)/3)))*3,ke=Math.pow(10,-he),Ee=Pb[8+he/3];return function(Be){return pe(ke*Be)+Ee}}return{format:F,formatPrefix:V}}var My,Fx,Nx;BE({thousands:",",grouping:[3],currency:["$",""]});function BE(u){return My=RE(u),Fx=My.format,Nx=My.formatPrefix,My}function OE(u){return Math.max(0,-fm(Math.abs(u)))}function VE(u,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fm(h)/3)))*3-fm(Math.abs(u)))}function FE(u,h){return u=Math.abs(u),h=Math.abs(h)-u,Math.max(0,fm(h)-fm(u))+1}function NE(u,h,f,y){var v=Jw(u,h,f),_;switch(y=Qy(y==null?",f":y),y.type){case"s":{var o=Math.max(Math.abs(u),Math.abs(h));return y.precision==null&&!isNaN(_=VE(v,o))&&(y.precision=_),Nx(y,o)}case"":case"e":case"g":case"p":case"r":{y.precision==null&&!isNaN(_=FE(v,Math.max(Math.abs(u),Math.abs(h))))&&(y.precision=_-(y.type==="e"));break}case"f":case"%":{y.precision==null&&!isNaN(_=OE(v))&&(y.precision=_-(y.type==="%")*2);break}}return Fx(y)}function Ux(u){var h=u.domain;return u.ticks=function(f){var y=h();return Yw(y[0],y[y.length-1],f==null?10:f)},u.tickFormat=function(f,y){var v=h();return NE(v[0],v[v.length-1],f==null?10:f,y)},u.nice=function(f){f==null&&(f=10);var y=h(),v=0,_=y.length-1,o=y[v],A=y[_],z,F,V=10;for(A<o&&(F=o,o=A,A=F,F=v,v=_,_=F);V-- >0;){if(F=Px(o,A,f),F===z)return y[v]=o,y[_]=A,h(y);if(F>0)o=Math.floor(o/F)*F,A=Math.ceil(A/F)*F;else if(F<0)o=Math.ceil(o*F)/F,A=Math.floor(A*F)/F;else break;z=F}return u},u}function jy(){var u=AE();return u.copy=function(){return Bx(u,jy())},iv.apply(u,arguments),Ux(u)}function Cb(u){return function(h){return h<0?-Math.pow(-h,u):Math.pow(h,u)}}function UE(u){return u<0?-Math.sqrt(-u):Math.sqrt(u)}function qE(u){return u<0?-u*u:u*u}function jE(u){var h=u(Ch,Ch),f=1;function y(){return f===1?u(Ch,Ch):f===.5?u(UE,qE):u(Cb(f),Cb(1/f))}return h.exponent=function(v){return arguments.length?(f=+v,y()):f},Ux(h)}function qx(){var u=jE(Ox());return u.copy=function(){return Bx(u,qx()).exponent(u.exponent())},iv.apply(u,arguments),u}function ZE(){return qx.apply(null,arguments).exponent(.5)}const Qm={x:jy,y:jy,z:jy,r:ZE};function GE(u){return u.constant?"symlog":u.base?"log":u.exponent?u.exponent()===.5?"sqrt":"pow":"other"}function Db(u){return u}function KE(u){return h=>Math.log(u*h)}function HE(u){return h=>u*Math.exp(h)}function XE(u){return h=>Math.sign(h)*Math.log1p(Math.abs(h/u))}function WE(u){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*u}function Ly(u){return function(f){return f<0?-Math.pow(-f,u):Math.pow(f,u)}}function YE(u){const h=GE(u);if(h==="log"){const f=Math.sign(u.domain()[0]);return{lift:KE(f),ground:HE(f),scaleType:h}}return h==="pow"?{lift:Ly(1),ground:Ly(1/1),scaleType:h}:h==="sqrt"?{lift:Ly(.5),ground:Ly(1/.5),scaleType:h}:h==="symlog"?{lift:XE(1),ground:WE(1),scaleType:h}:{lift:Db,ground:Db,scaleType:h}}function JE(u,h){if(typeof u.range!="function")throw new Error("Scale method `range` must be a function");if(typeof u.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return u.domain();u.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",u.domain()),u.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",u.range());const{lift:f,ground:y}=YE(u),v=u.domain()[0],_=Object.prototype.toString.call(v)==="[object Date]",[o,A]=u.domain().map(pe=>f(_?pe.getTime():pe)),[z,F]=u.range(),V=h[0]||0,j=h[1]||0,q=(A-o)/(Math.abs(F-z)-V-j);return[o-V*q,j*q+A].map(pe=>y(_?new Date(pe):pe))}function QE(u,h,f,y,v){let _,o;return v===!0?(_=0,o=100):(_=u==="r"?1:0,o=u==="y"?f:u==="r"?25:h),y===!0?[o,_]:[_,o]}function $E(u,h,f,y,v,_){return v?typeof v=="function"?v({width:h,height:f}):v:QE(u,h,f,y,_)}function Ry(u){return function([f,y,v,_,o,A,z,F,V,j]){if(y===null)return null;const q=$E(u,z,F,A,V,j),pe=f===Qm[u]?f():f.copy();return pe.domain(Ax(y[u],v)).range(q),_&&pe.domain(JE(pe,_)),o===!0&&(typeof pe.nice=="function"?pe.nice():console.error(`[Layer Cake] You set \`${u}Nice: true\` but the ${u}Scale does not have a \`.nice\` method. Ignoring...`)),pe}}function By([u,h]){return f=>{const y=u(f);return Array.isArray(y)?y.map(v=>h(v)):h(y)}}function Oy([u]){if(typeof u=="function"){if(typeof u.range=="function")return u.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const Vy={x:!1,y:!0,z:!1,r:!1};const eS=u=>({element:u[0]&4,width:u[0]&256,height:u[0]&512,aspectRatio:u[0]&1024,containerWidth:u[0]&128,containerHeight:u[0]&64}),Mb=u=>({element:u[2],width:u[8],height:u[9],aspectRatio:u[10],containerWidth:u[7],containerHeight:u[6]});function Lb(u){let h,f,y;const v=u[90].default,_=um(v,u,u[89],Mb);return{c(){h=D("div"),_&&_.c(),this.h()},l(o){h=M(o,"DIV",{class:!0});var A=R(h);_&&_.l(A),A.forEach(T),this.h()},h(){S(h,"class","layercake-container svelte-vhzpsp"),yl(()=>u[92].call(h)),re(h,"position",u[5],!1),re(h,"top",u[5]==="absolute"?"0":null,!1),re(h,"right",u[5]==="absolute"?"0":null,!1),re(h,"bottom",u[5]==="absolute"?"0":null,!1),re(h,"left",u[5]==="absolute"?"0":null,!1),re(h,"pointer-events",u[4]===!1?"none":null,!1)},m(o,A){ze(o,h,A),_&&_.m(h,null),u[91](h),f=vl(h,u[92].bind(h)),y=!0},p(o,A){_&&_.p&&(!y||A[0]&1988|A[2]&134217728)&&cm(_,v,o,o[89],y?pm(v,o[89],A,eS):hm(o[89]),Mb),A[0]&32&&re(h,"position",o[5],!1),A[0]&32&&re(h,"top",o[5]==="absolute"?"0":null,!1),A[0]&32&&re(h,"right",o[5]==="absolute"?"0":null,!1),A[0]&32&&re(h,"bottom",o[5]==="absolute"?"0":null,!1),A[0]&32&&re(h,"left",o[5]==="absolute"?"0":null,!1),A[0]&16&&re(h,"pointer-events",o[4]===!1?"none":null,!1)},i(o){y||(rt(_,o),y=!0)},o(o){ht(_,o),y=!1},d(o){o&&T(h),_&&_.d(o),u[91](null),f()}}}function tS(u){let h,f,y=(u[3]===!0||typeof window<"u")&&Lb(u);return{c(){y&&y.c(),h=La()},l(v){y&&y.l(v),h=La()},m(v,_){y&&y.m(v,_),ze(v,h,_),f=!0},p(v,_){v[3]===!0||typeof window<"u"?y?(y.p(v,_),_[0]&8&&rt(y,1)):(y=Lb(v),y.c(),rt(y,1),y.m(h.parentNode,h)):y&&(Uu(),ht(y,1,1,()=>{y=null}),qu())},i(v){f||(rt(y),f=!0)},o(v){ht(y),f=!1},d(v){y&&y.d(v),v&&T(h)}}}function rS(u,h,f){let y,v,_,o,A,z,F,V,j,q,pe,he,ke,Ee,Be,Fe,Ft,Ct,mt,et,vr,pr,lr,bt,kt,Rr,Nt,dr,it,rr,wr,Vr,zr,ft,nt,gr,on,In,Fi,Ni,Gr,{$$slots:Ra={},$$scope:Er}=h,{ssr:Wi=!1}=h,{pointerEvents:$a=!0}=h,{position:_r="relative"}=h,{percentRange:wt=!1}=h,{width:ti=void 0}=h,{height:Yi=void 0}=h,{containerWidth:Zr=ti||100}=h,{containerHeight:rs=Yi||100}=h,{element:er=void 0}=h,{x:ri=void 0}=h,{y:kr=void 0}=h,{z:bi=void 0}=h,{r:Kr=void 0}=h,{data:Pr=[]}=h,{xDomain:xi=void 0}=h,{yDomain:yn=void 0}=h,{zDomain:Cr=void 0}=h,{rDomain:br=void 0}=h,{xNice:Fr=!1}=h,{yNice:Ji=!1}=h,{zNice:sn=!1}=h,{rNice:ln=!1}=h,{xReverse:Ga=Vy.x}=h,{yReverse:ci=Vy.y}=h,{zReverse:vn=Vy.z}=h,{rReverse:Pi=Vy.r}=h,{xPadding:Tn=void 0}=h,{yPadding:wa=void 0}=h,{zPadding:Bo=void 0}=h,{rPadding:_o=void 0}=h,{xScale:Qn=Qm.x}=h,{yScale:Qi=Qm.y}=h,{zScale:Ea=Qm.z}=h,{rScale:sa=Qm.r}=h,{xRange:wi=void 0}=h,{yRange:xr=void 0}=h,{zRange:N=void 0}=h,{rRange:G=void 0}=h,{padding:X={}}=h,{extents:$={}}=h,{flatData:se=void 0}=h,{custom:ve={}}=h,be=!1;wx(()=>{be=!0});const H={},ne=li(wt);or(u,ne,Ae=>f(128,In=Ae));const Ie=li(Zr);or(u,Ie,Ae=>f(7,on=Ae));const Ue=li(rs);or(u,Ue,Ae=>f(6,gr=Ae));const Ge=li(_g($));or(u,Ge,Ae=>f(127,nt=Ae));const Le=li(Pr);or(u,Le,Ae=>f(126,ft=Ae));const Ne=li(se||Pr);or(u,Ne,Ae=>f(125,zr=Ae));const ct=li(X);or(u,ct,Ae=>f(124,Vr=Ae));const tt=li(Up(ri));or(u,tt,Ae=>f(123,wr=Ae));const Ce=li(Up(kr));or(u,Ce,Ae=>f(122,rr=Ae));const $e=li(Up(bi));or(u,$e,Ae=>f(121,it=Ae));const We=li(Up(Kr));or(u,We,Ae=>f(120,dr=Ae));const Je=li(xi);or(u,Je,Ae=>f(119,Nt=Ae));const Kt=li(yn);or(u,Kt,Ae=>f(118,Rr=Ae));const Ye=li(Cr);or(u,Ye,Ae=>f(117,kt=Ae));const Ut=li(br);or(u,Ut,Ae=>f(116,bt=Ae));const ir=li(Fr);or(u,ir,Ae=>f(115,lr=Ae));const Rt=li(Ji);or(u,Rt,Ae=>f(114,pr=Ae));const Ht=li(sn);or(u,Ht,Ae=>f(113,vr=Ae));const Xt=li(ln);or(u,Xt,Ae=>f(112,et=Ae));const Ui=li(Ga);or(u,Ui,Ae=>f(111,mt=Ae));const nr=li(ci);or(u,nr,Ae=>f(110,Ct=Ae));const sr=li(vn);or(u,sr,Ae=>f(109,Ft=Ae));const mr=li(Pi);or(u,mr,Ae=>f(108,Fe=Ae));const Ot=li(Tn);or(u,Ot,Ae=>f(107,Be=Ae));const jt=li(wa);or(u,jt,Ae=>f(106,Ee=Ae));const ii=li(Bo);or(u,ii,Ae=>f(105,ke=Ae));const Sa=li(_o);or(u,Sa,Ae=>f(104,he=Ae));const Hr=li(wi);or(u,Hr,Ae=>f(103,pe=Ae));const An=li(xr);or(u,An,Ae=>f(102,q=Ae));const zn=li(N);or(u,zn,Ae=>f(101,j=Ae));const Ei=li(G);or(u,Ei,Ae=>f(100,V=Ae));const ur=li(Qn);or(u,ur,Ae=>f(99,F=Ae));const $n=li(Qi);or(u,$n,Ae=>f(98,z=Ae));const hi=li(Ea);or(u,hi,Ae=>f(97,A=Ae));const qr=li(sa);or(u,qr,Ae=>f(96,o=Ae));const la=li(H);or(u,la,Ae=>f(94,v=Ae));const Br=li(ve);or(u,Br,Ae=>f(95,_=Ae));const Ci=Za([tt,Ce,$e,We],([Ae,fi,$i,Xr])=>{const Dn={};return Ae&&(Dn.x=Ae),fi&&(Dn.y=fi),$i&&(Dn.z=$i),Xr&&(Dn.r=Xr),Dn}),Pn=Za([ct,Ie,Ue],([Ae])=>Object.assign({top:0,right:0,bottom:0,left:0},Ae)),Xs=Za([Ie,Ue,Pn],([Ae,fi,$i])=>{const Xr={};return Xr.top=$i.top,Xr.right=Ae-$i.right,Xr.bottom=fi-$i.bottom,Xr.left=$i.left,Xr.width=Xr.right-Xr.left,Xr.height=Xr.bottom-Xr.top,Xr.width<=0&&be===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Xr.height<=0&&be===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Xr}),ni=Za([Xs],([Ae])=>Ae.width);or(u,ni,Ae=>f(8,Fi=Ae));const ka=Za([Xs],([Ae])=>Ae.height);or(u,ka,Ae=>f(9,Ni=Ae));const ai=Za([Ne,Ci,Ge],([Ae,fi,$i])=>{const Xr=_g(fi,$i);return Object.keys(Xr).length>0?{...Nw(Ae,Xr),...$i}:{}}),Nr=Za([ai,Je],Py("x")),qi=Za([ai,Kt],Py("y")),pi=Za([ai,Ye],Py("z")),ua=Za([ai,Ut],Py("r")),Nn=Za([ur,ai,Nr,Ot,ir,Ui,ni,ka,Hr,ne],Ry("x")),yc=Za([tt,Nn],By),Oo=Za([$n,ai,qi,jt,Rt,nr,ni,ka,An,ne],Ry("y")),is=Za([Ce,Oo],By),Vo=Za([hi,ai,pi,ii,Ht,sr,ni,ka,zn,ne],Ry("z")),Ws=Za([$e,Vo],By),Ys=Za([qr,ai,ua,Sa,Xt,mr,ni,ka,Ei,ne],Ry("r")),Fo=Za([We,Ys],By),un=Za([Nn],Oy),Ba=Za([Oo],Oy),ea=Za([Vo],Oy),bo=Za([Ys],Oy),Cn=Za([ni,ka],([Ae,fi])=>Ae/fi);or(u,Cn,Ae=>f(10,Gr=Ae));function oi(Ae){up[Ae?"unshift":"push"](()=>{er=Ae,f(2,er)})}function Ia(){Zr=this.clientWidth,rs=this.clientHeight,f(0,Zr),f(1,rs)}return u.$$set=Ae=>{"ssr"in Ae&&f(3,Wi=Ae.ssr),"pointerEvents"in Ae&&f(4,$a=Ae.pointerEvents),"position"in Ae&&f(5,_r=Ae.position),"percentRange"in Ae&&f(51,wt=Ae.percentRange),"width"in Ae&&f(52,ti=Ae.width),"height"in Ae&&f(53,Yi=Ae.height),"containerWidth"in Ae&&f(0,Zr=Ae.containerWidth),"containerHeight"in Ae&&f(1,rs=Ae.containerHeight),"element"in Ae&&f(2,er=Ae.element),"x"in Ae&&f(54,ri=Ae.x),"y"in Ae&&f(55,kr=Ae.y),"z"in Ae&&f(56,bi=Ae.z),"r"in Ae&&f(57,Kr=Ae.r),"data"in Ae&&f(58,Pr=Ae.data),"xDomain"in Ae&&f(59,xi=Ae.xDomain),"yDomain"in Ae&&f(60,yn=Ae.yDomain),"zDomain"in Ae&&f(61,Cr=Ae.zDomain),"rDomain"in Ae&&f(62,br=Ae.rDomain),"xNice"in Ae&&f(63,Fr=Ae.xNice),"yNice"in Ae&&f(64,Ji=Ae.yNice),"zNice"in Ae&&f(65,sn=Ae.zNice),"rNice"in Ae&&f(66,ln=Ae.rNice),"xReverse"in Ae&&f(67,Ga=Ae.xReverse),"yReverse"in Ae&&f(68,ci=Ae.yReverse),"zReverse"in Ae&&f(69,vn=Ae.zReverse),"rReverse"in Ae&&f(70,Pi=Ae.rReverse),"xPadding"in Ae&&f(71,Tn=Ae.xPadding),"yPadding"in Ae&&f(72,wa=Ae.yPadding),"zPadding"in Ae&&f(73,Bo=Ae.zPadding),"rPadding"in Ae&&f(74,_o=Ae.rPadding),"xScale"in Ae&&f(75,Qn=Ae.xScale),"yScale"in Ae&&f(76,Qi=Ae.yScale),"zScale"in Ae&&f(77,Ea=Ae.zScale),"rScale"in Ae&&f(78,sa=Ae.rScale),"xRange"in Ae&&f(79,wi=Ae.xRange),"yRange"in Ae&&f(80,xr=Ae.yRange),"zRange"in Ae&&f(81,N=Ae.zRange),"rRange"in Ae&&f(82,G=Ae.rRange),"padding"in Ae&&f(83,X=Ae.padding),"extents"in Ae&&f(84,$=Ae.extents),"flatData"in Ae&&f(85,se=Ae.flatData),"custom"in Ae&&f(86,ve=Ae.custom),"$$scope"in Ae&&f(89,Er=Ae.$$scope)},u.$$.update=()=>{u.$$.dirty[1]&8388608&&ri&&f(87,H.x=ri,H),u.$$.dirty[1]&16777216&&kr&&f(87,H.y=kr,H),u.$$.dirty[1]&33554432&&bi&&f(87,H.z=bi,H),u.$$.dirty[1]&67108864&&Kr&&f(87,H.r=Kr,H),u.$$.dirty[1]&268435456&&xi&&f(87,H.xDomain=xi,H),u.$$.dirty[1]&536870912&&yn&&f(87,H.yDomain=yn,H),u.$$.dirty[1]&1073741824&&Cr&&f(87,H.zDomain=Cr,H),u.$$.dirty[2]&1&&br&&f(87,H.rDomain=br,H),u.$$.dirty[2]&131072&&wi&&f(87,H.xRange=wi,H),u.$$.dirty[2]&262144&&xr&&f(87,H.yRange=xr,H),u.$$.dirty[2]&524288&&N&&f(87,H.zRange=N,H),u.$$.dirty[2]&1048576&&G&&f(87,H.rRange=G,H),u.$$.dirty[1]&1048576&&si(ne,In=wt,In),u.$$.dirty[0]&1&&si(Ie,on=Zr,on),u.$$.dirty[0]&2&&si(Ue,gr=rs,gr),u.$$.dirty[2]&4194304&&si(Ge,nt=_g($),nt),u.$$.dirty[1]&134217728&&si(Le,ft=Pr,ft),u.$$.dirty[1]&134217728|u.$$.dirty[2]&8388608&&si(Ne,zr=se||Pr,zr),u.$$.dirty[2]&2097152&&si(ct,Vr=X,Vr),u.$$.dirty[1]&8388608&&si(tt,wr=Up(ri),wr),u.$$.dirty[1]&16777216&&si(Ce,rr=Up(kr),rr),u.$$.dirty[1]&33554432&&si($e,it=Up(bi),it),u.$$.dirty[1]&67108864&&si(We,dr=Up(Kr),dr),u.$$.dirty[1]&268435456&&si(Je,Nt=xi,Nt),u.$$.dirty[1]&536870912&&si(Kt,Rr=yn,Rr),u.$$.dirty[1]&1073741824&&si(Ye,kt=Cr,kt),u.$$.dirty[2]&1&&si(Ut,bt=br,bt),u.$$.dirty[2]&2&&si(ir,lr=Fr,lr),u.$$.dirty[2]&4&&si(Rt,pr=Ji,pr),u.$$.dirty[2]&8&&si(Ht,vr=sn,vr),u.$$.dirty[2]&16&&si(Xt,et=ln,et),u.$$.dirty[2]&32&&si(Ui,mt=Ga,mt),u.$$.dirty[2]&64&&si(nr,Ct=ci,Ct),u.$$.dirty[2]&128&&si(sr,Ft=vn,Ft),u.$$.dirty[2]&256&&si(mr,Fe=Pi,Fe),u.$$.dirty[2]&512&&si(Ot,Be=Tn,Be),u.$$.dirty[2]&1024&&si(jt,Ee=wa,Ee),u.$$.dirty[2]&2048&&si(ii,ke=Bo,ke),u.$$.dirty[2]&4096&&si(Sa,he=_o,he),u.$$.dirty[2]&131072&&si(Hr,pe=wi,pe),u.$$.dirty[2]&262144&&si(An,q=xr,q),u.$$.dirty[2]&524288&&si(zn,j=N,j),u.$$.dirty[2]&1048576&&si(Ei,V=G,V),u.$$.dirty[2]&8192&&si(ur,F=Qn,F),u.$$.dirty[2]&16384&&si($n,z=Qi,z),u.$$.dirty[2]&32768&&si(hi,A=Ea,A),u.$$.dirty[2]&65536&&si(qr,o=sa,o),u.$$.dirty[2]&16777216&&si(Br,_=ve,_),u.$$.dirty[2]&33554432&&si(la,v=H,v),u.$$.dirty[2]&67108864&&xx("LayerCake",y)},f(88,y={activeGetters:Ci,width:ni,height:ka,percentRange:ne,aspectRatio:Cn,containerWidth:Ie,containerHeight:Ue,x:tt,y:Ce,z:$e,r:We,custom:Br,data:Le,xNice:ir,yNice:Rt,zNice:Ht,rNice:Xt,xReverse:Ui,yReverse:nr,zReverse:sr,rReverse:mr,xPadding:Ot,yPadding:jt,zPadding:ii,rPadding:Sa,padding:Pn,flatData:Ne,extents:ai,xDomain:Nr,yDomain:qi,zDomain:pi,rDomain:ua,xRange:un,yRange:Ba,zRange:ea,rRange:bo,config:la,xScale:Nn,xGet:yc,yScale:Oo,yGet:is,zScale:Vo,zGet:Ws,rScale:Ys,rGet:Fo}),[Zr,rs,er,Wi,$a,_r,gr,on,Fi,Ni,Gr,ne,Ie,Ue,Ge,Le,Ne,ct,tt,Ce,$e,We,Je,Kt,Ye,Ut,ir,Rt,Ht,Xt,Ui,nr,sr,mr,Ot,jt,ii,Sa,Hr,An,zn,Ei,ur,$n,hi,qr,la,Br,ni,ka,Cn,wt,ti,Yi,ri,kr,bi,Kr,Pr,xi,yn,Cr,br,Fr,Ji,sn,ln,Ga,ci,vn,Pi,Tn,wa,Bo,_o,Qn,Qi,Ea,sa,wi,xr,N,G,X,$,se,ve,H,y,Er,Ra,oi,Ia]}class iS extends gl{constructor(h){super(),_l(this,h,rS,tS,bl,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const nS=u=>({element:u&1}),Rb=u=>({element:u[0]}),aS=u=>({element:u&1}),Bb=u=>({element:u[0]});function oS(u){let h,f,y,v,_;const o=u[12].defs,A=um(o,u,u[11],Bb),z=u[12].default,F=um(z,u,u[11],Rb);return{c(){h=es("svg"),f=es("defs"),A&&A.c(),y=es("g"),F&&F.c(),this.h()},l(V){h=ts(V,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var j=R(h);f=ts(j,"defs",{});var q=R(f);A&&A.l(q),q.forEach(T),y=ts(j,"g",{class:!0,transform:!0});var pe=R(y);F&&F.l(pe),pe.forEach(T),j.forEach(T),this.h()},h(){S(y,"class","layercake-layout-svg_g"),S(y,"transform",v="translate("+u[7].left+", "+u[7].top+")"),S(h,"class","layercake-layout-svg svelte-u84d8d"),S(h,"viewBox",u[4]),S(h,"width",u[5]),S(h,"height",u[6]),re(h,"z-index",u[2],!1),re(h,"pointer-events",u[3]===!1?"none":null,!1)},m(V,j){ze(V,h,j),E(h,f),A&&A.m(f,null),E(h,y),F&&F.m(y,null),u[13](y),u[14](h),_=!0},p(V,[j]){A&&A.p&&(!_||j&2049)&&cm(A,o,V,V[11],_?pm(o,V[11],j,aS):hm(V[11]),Bb),F&&F.p&&(!_||j&2049)&&cm(F,z,V,V[11],_?pm(z,V[11],j,nS):hm(V[11]),Rb),(!_||j&128&&v!==(v="translate("+V[7].left+", "+V[7].top+")"))&&S(y,"transform",v),(!_||j&16)&&S(h,"viewBox",V[4]),(!_||j&32)&&S(h,"width",V[5]),(!_||j&64)&&S(h,"height",V[6]),j&4&&re(h,"z-index",V[2],!1),j&8&&re(h,"pointer-events",V[3]===!1?"none":null,!1)},i(V){_||(rt(A,V),rt(F,V),_=!0)},o(V){ht(A,V),ht(F,V),_=!1},d(V){V&&T(h),A&&A.d(V),F&&F.d(V),u[13](null),u[14](null)}}}function sS(u,h,f){let y,v,_,{$$slots:o={},$$scope:A}=h,{element:z=void 0}=h,{innerElement:F=void 0}=h,{zIndex:V=void 0}=h,{pointerEvents:j=void 0}=h,{viewBox:q=void 0}=h;const{containerWidth:pe,containerHeight:he,padding:ke}=iy("LayerCake");or(u,pe,Fe=>f(5,y=Fe)),or(u,he,Fe=>f(6,v=Fe)),or(u,ke,Fe=>f(7,_=Fe));function Ee(Fe){up[Fe?"unshift":"push"](()=>{F=Fe,f(1,F)})}function Be(Fe){up[Fe?"unshift":"push"](()=>{z=Fe,f(0,z)})}return u.$$set=Fe=>{"element"in Fe&&f(0,z=Fe.element),"innerElement"in Fe&&f(1,F=Fe.innerElement),"zIndex"in Fe&&f(2,V=Fe.zIndex),"pointerEvents"in Fe&&f(3,j=Fe.pointerEvents),"viewBox"in Fe&&f(4,q=Fe.viewBox),"$$scope"in Fe&&f(11,A=Fe.$$scope)},[z,F,V,j,q,y,v,_,pe,he,ke,A,o,Ee,Be]}class lS extends gl{constructor(h){super(),_l(this,h,sS,oS,bl,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Ob(u,h,f){const y=u.slice();return y[23]=h[f],y[25]=f,y}function Vb(u){let h,f,y,v;return{c(){h=es("rect"),this.h()},l(_){h=ts(_,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[13](u[12](u[23]))-1),S(h,"width",v=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height","3"),S(h,"fill","#CEDC20"),S(h,"stroke",u[0]),S(h,"stroke-width",u[1])},m(_,o){ze(_,h,o)},p(_,o){o&3200&&f!==(f=_[11].bandwidth?_[7](_[23]):_[7](_[23])[0])&&S(h,"x",f),o&13312&&y!==(y=_[13](_[12](_[23]))-1)&&S(h,"y",y),o&3584&&v!==(v=_[11].bandwidth?_[11].bandwidth():_[9](_[23]))&&S(h,"width",v),o&1&&S(h,"stroke",_[0]),o&2&&S(h,"stroke-width",_[1])},d(_){_&&T(h)}}}function Fb(u){let h,f,y,v,_,o,A,z,F=u[12]&&Vb(u);return{c(){h=es("rect"),F&&F.c(),o=es("text"),this.h()},l(V){h=ts(V,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),F&&F.l(V),o=ts(V,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),R(o).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[6](u[23])),S(h,"width",v=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height",_=u[8](u[23])),S(h,"fill",u[4]),S(h,"stroke",u[0]),S(h,"stroke-width",u[1]),S(o,"x",A=u[11].bandwidth?u[7](u[23])+u[11].bandwidth()/2:u[7](u[23])[0]),S(o,"y",z=u[6](u[23])-4),S(o,"dx",u[2]),S(o,"dy",u[3]),S(o,"text-anchor",u[5])},m(V,j){ze(V,h,j),F&&F.m(V,j),ze(V,o,j)},p(V,j){j&3200&&f!==(f=V[11].bandwidth?V[7](V[23]):V[7](V[23])[0])&&S(h,"x",f),j&1088&&y!==(y=V[6](V[23]))&&S(h,"y",y),j&3584&&v!==(v=V[11].bandwidth?V[11].bandwidth():V[9](V[23]))&&S(h,"width",v),j&1280&&_!==(_=V[8](V[23]))&&S(h,"height",_),j&16&&S(h,"fill",V[4]),j&1&&S(h,"stroke",V[0]),j&2&&S(h,"stroke-width",V[1]),V[12]?F?F.p(V,j):(F=Vb(V),F.c(),F.m(o.parentNode,o)):F&&(F.d(1),F=null),j&3200&&A!==(A=V[11].bandwidth?V[7](V[23])+V[11].bandwidth()/2:V[7](V[23])[0])&&S(o,"x",A),j&1088&&z!==(z=V[6](V[23])-4)&&S(o,"y",z),j&4&&S(o,"dx",V[2]),j&8&&S(o,"dy",V[3]),j&32&&S(o,"text-anchor",V[5])},d(V){V&&T(h),F&&F.d(V),V&&T(o)}}}function uS(u){let h,f=u[10],y=[];for(let v=0;v<f.length;v+=1)y[v]=Fb(Ob(u,f,v));return{c(){h=es("g");for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){h=ts(v,"g",{class:!0});var _=R(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(T),this.h()},h(){S(h,"class","column-group svelte-wgzwsk")},m(v,_){ze(v,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(v,[_]){if(_&16383){f=v[10];let o;for(o=0;o<f.length;o+=1){const A=Ob(v,f,o);y[o]?y[o].p(A,_):(y[o]=Fb(A),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},i:kn,o:kn,d(v){v&&T(h),Hc(y,v)}}}function cS(u,h,f){let y,v,_,o,A,z,F,V,j;const{data:q,xGet:pe,yGet:he,yRange:ke,xScale:Ee,yScale:Be,y:Fe,z:Ft}=iy("LayerCake");or(u,q,bt=>f(10,z=bt)),or(u,pe,bt=>f(7,A=bt)),or(u,he,bt=>f(6,_=bt)),or(u,ke,bt=>f(21,o=bt)),or(u,Ee,bt=>f(11,F=bt)),or(u,Be,bt=>f(13,j=bt)),or(u,Ft,bt=>f(12,V=bt));let{stroke:Ct=""}=h,{strokeWidth:mt=0}=h,{dxTick:et=0}=h,{dyTick:vr=0}=h,{fill:pr="#00205b"}=h,{textAnchor:lr="middle"}=h;return u.$$set=bt=>{"stroke"in bt&&f(0,Ct=bt.stroke),"strokeWidth"in bt&&f(1,mt=bt.strokeWidth),"dxTick"in bt&&f(2,et=bt.dxTick),"dyTick"in bt&&f(3,vr=bt.dyTick),"fill"in bt&&f(4,pr=bt.fill),"textAnchor"in bt&&f(5,lr=bt.textAnchor)},u.$$.update=()=>{u.$$.dirty&128&&f(9,y=bt=>{const kt=A(bt);return Math.max(0,kt[1]-kt[0])}),u.$$.dirty&2097216&&f(8,v=bt=>o[0]-_(bt))},[Ct,mt,et,vr,pr,lr,_,A,v,y,z,F,V,j,q,pe,he,ke,Ee,Be,Ft,o]}class hS extends gl{constructor(h){super(),_l(this,h,cS,uS,bl,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function Nb(u,h,f){const y=u.slice();return y[28]=h[f],y[30]=f,y}function Ub(u){let h,f,y,v;return{c(){h=es("line"),this.h()},l(_){h=ts(_,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),R(h).forEach(T),this.h()},h(){S(h,"y1",f=u[20]*-1),S(h,"y2",y=u[14]&&u[30]%2==0?u[10]+u[8]+2:u[10]+u[8]-13),S(h,"x1","0"),S(h,"x2","0"),S(h,"stroke",u[11]),S(h,"stroke-width",v=u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)?2:1),S(h,"class","svelte-fwjh80"),mn(h,"baseline",u[13])},m(_,o){ze(_,h,o)},p(_,o){o&1048576&&f!==(f=_[20]*-1)&&S(h,"y1",f),o&17664&&y!==(y=_[14]&&_[30]%2==0?_[10]+_[8]+2:_[10]+_[8]-13)&&S(h,"y2",y),o&2048&&S(h,"stroke",_[11]),o&32784&&v!==(v=_[15]&&Array.isArray(_[4])&&_[30]==Math.floor(_[4].length/2)?2:1)&&S(h,"stroke-width",v),o&8192&&mn(h,"baseline",_[13])},d(_){_&&T(h)}}}function pS(u){let h=u[1](u[28])+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,v){ze(y,f,v)},p(y,v){v&262146&&h!==(h=y[1](y[28])+"")&&pt(f,h)},d(y){y&&T(f)}}}function fS(u){let h,f=u[1](u[28])+"",y,v;return{c(){h=ee(u[5]),y=ee(f),v=ee(u[6])},l(_){h=te(_,u[5]),y=te(_,f),v=te(_,u[6])},m(_,o){ze(_,h,o),ze(_,y,o),ze(_,v,o)},p(_,o){o&32&&pt(h,_[5]),o&262146&&f!==(f=_[1](_[28])+"")&&pt(y,f),o&64&&pt(v,_[6])},d(_){_&&T(h),_&&T(y),_&&T(v)}}}function qb(u){let h,f,y,v,_,o,A,z=u[0]!==!1&&Ub(u);function F(q,pe){return q[30]==q[18].length-1?fS:pS}let V=F(u),j=V(u);return{c(){h=es("g"),z&&z.c(),f=es("text"),j.c(),this.h()},l(q){h=ts(q,"g",{class:!0,transform:!0});var pe=R(h);z&&z.l(pe),f=ts(pe,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var he=R(f);j.l(he),he.forEach(T),pe.forEach(T),this.h()},h(){S(f,"x",y=u[7]||u[16]?u[17].bandwidth()/2:0),S(f,"y",v=u[3]?u[20]*-1-6:u[14]&&u[30]%2==0?u[8]+15:u[8]),S(f,"dx",_=u[24](u[30])=="start"?u[9]-2:u[24](u[30])=="end"?u[9]+2:u[9]),S(f,"dy",u[10]),S(f,"text-anchor",u[24](u[30])),S(f,"fill",u[12]),S(f,"class","svelte-fwjh80"),mn(f,"bold",u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)),S(h,"class",o="tick tick-"+u[28]+" svelte-fwjh80"),S(h,"transform",A="translate("+u[17](u[28])+","+u[19][0]+")")},m(q,pe){ze(q,h,pe),z&&z.m(h,null),E(h,f),j.m(f,null)},p(q,pe){q[0]!==!1?z?z.p(q,pe):(z=Ub(q),z.c(),z.m(h,f)):z&&(z.d(1),z=null),V===(V=F(q))&&j?j.p(q,pe):(j.d(1),j=V(q),j&&(j.c(),j.m(f,null))),pe&196736&&y!==(y=q[7]||q[16]?q[17].bandwidth()/2:0)&&S(f,"x",y),pe&1065224&&v!==(v=q[3]?q[20]*-1-6:q[14]&&q[30]%2==0?q[8]+15:q[8])&&S(f,"y",v),pe&512&&_!==(_=q[24](q[30])=="start"?q[9]-2:q[24](q[30])=="end"?q[9]+2:q[9])&&S(f,"dx",_),pe&1024&&S(f,"dy",q[10]),pe&4096&&S(f,"fill",q[12]),pe&32784&&mn(f,"bold",q[15]&&Array.isArray(q[4])&&q[30]==Math.floor(q[4].length/2)),pe&262144&&o!==(o="tick tick-"+q[28]+" svelte-fwjh80")&&S(h,"class",o),pe&917504&&A!==(A="translate("+q[17](q[28])+","+q[19][0]+")")&&S(h,"transform",A)},d(q){q&&T(h),z&&z.d(),j.d()}}}function jb(u){let h,f,y;return{c(){h=es("line"),this.h()},l(v){h=ts(v,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","baseline svelte-fwjh80"),S(h,"y1",u[20]),S(h,"y2","0"),S(h,"x1",f=u[17](0)),S(h,"x2",y=u[17](0)),S(h,"stroke",u[11])},m(v,_){ze(v,h,_)},p(v,_){_&1048576&&S(h,"y1",v[20]),_&131072&&f!==(f=v[17](0))&&S(h,"x1",f),_&131072&&y!==(y=v[17](0))&&S(h,"x2",y),_&2048&&S(h,"stroke",v[11])},d(v){v&&T(h)}}}function dS(u){let h,f,y=u[18],v=[];for(let o=0;o<y.length;o+=1)v[o]=qb(Nb(u,y,o));let _=u[2]===!0&&jb(u);return{c(){h=es("g");for(let o=0;o<v.length;o+=1)v[o].c();f=La(),_&&_.c(),this.h()},l(o){h=ts(o,"g",{class:!0});var A=R(h);for(let z=0;z<v.length;z+=1)v[z].l(A);f=La(),_&&_.l(A),A.forEach(T),this.h()},h(){S(h,"class","axis x-axis")},m(o,A){ze(o,h,A);for(let z=0;z<v.length;z+=1)v[z].m(h,null);E(h,f),_&&_.m(h,null)},p(o,[A]){if(A&18874363){y=o[18];let z;for(z=0;z<y.length;z+=1){const F=Nb(o,y,z);v[z]?v[z].p(F,A):(v[z]=qb(F),v[z].c(),v[z].m(h,f))}for(;z<v.length;z+=1)v[z].d(1);v.length=y.length}o[2]===!0?_?_.p(o,A):(_=jb(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null)},i:kn,o:kn,d(o){o&&T(h),Hc(v,o),_&&_.d()}}}function mS(u,h,f){let y,v,_,o,A;const{width:z,height:F,xScale:V,yScale:j,yRange:q}=iy("LayerCake");or(u,F,it=>f(20,A=it)),or(u,V,it=>f(17,_=it)),or(u,q,it=>f(19,o=it));let{gridlines:pe=!0}=h,{formatTick:he=it=>it}=h,{baseline:ke=!1}=h,{flipped:Ee=!1}=h,{snapTicks:Be=!1}=h,{ticks:Fe=void 0}=h,{prefix:Ft=""}=h,{suffix:Ct=""}=h,{xTick:mt=void 0}=h,{yTick:et=15}=h,{dxTick:vr=0}=h,{dyTick:pr=0}=h,{lineColor:lr="#999"}=h,{textColor:bt="#555"}=h,{solid:kt=!1}=h,{stagger:Rr=!1}=h,{median:Nt=!0}=h;function dr(it){if(Be===!0){if(it===0)return"start";if(it===v.length-1)return"end"}return"middle"}return u.$$set=it=>{"gridlines"in it&&f(0,pe=it.gridlines),"formatTick"in it&&f(1,he=it.formatTick),"baseline"in it&&f(2,ke=it.baseline),"flipped"in it&&f(3,Ee=it.flipped),"snapTicks"in it&&f(25,Be=it.snapTicks),"ticks"in it&&f(4,Fe=it.ticks),"prefix"in it&&f(5,Ft=it.prefix),"suffix"in it&&f(6,Ct=it.suffix),"xTick"in it&&f(7,mt=it.xTick),"yTick"in it&&f(8,et=it.yTick),"dxTick"in it&&f(9,vr=it.dxTick),"dyTick"in it&&f(10,pr=it.dyTick),"lineColor"in it&&f(11,lr=it.lineColor),"textColor"in it&&f(12,bt=it.textColor),"solid"in it&&f(13,kt=it.solid),"stagger"in it&&f(14,Rr=it.stagger),"median"in it&&f(15,Nt=it.median)},u.$$.update=()=>{u.$$.dirty&131072&&f(16,y=typeof _.bandwidth=="function"),u.$$.dirty&196624&&f(18,v=Array.isArray(Fe)?Fe:y?_.domain():_.ticks(Fe))},[pe,he,ke,Ee,Fe,Ft,Ct,mt,et,vr,pr,lr,bt,kt,Rr,Nt,y,_,v,o,A,F,V,q,dr,Be]}class yS extends gl{constructor(h){super(),_l(this,h,mS,dS,bl,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function vS(u){let h,f,y,v;return h=new hS({props:{fill:u[1],formatVal:u[5]}}),y=new yS({props:{gridlines:!1}}),{c(){Yt(h.$$.fragment),f=xe(),Yt(y.$$.fragment)},l(_){Jt(h.$$.fragment,_),f=we(_),Jt(y.$$.fragment,_)},m(_,o){Qt(h,_,o),ze(_,f,o),Qt(y,_,o),v=!0},p(_,o){const A={};o&2&&(A.fill=_[1]),o&32&&(A.formatVal=_[5]),h.$set(A)},i(_){v||(rt(h.$$.fragment,_),rt(y.$$.fragment,_),v=!0)},o(_){ht(h.$$.fragment,_),ht(y.$$.fragment,_),v=!1},d(_){$t(h,_),_&&T(f),$t(y,_)}}}function gS(u){let h,f;return h=new lS({props:{$$slots:{default:[vS]},$$scope:{ctx:u}}}),{c(){Yt(h.$$.fragment)},l(y){Jt(h.$$.fragment,y)},m(y,v){Qt(h,y,v),f=!0},p(y,v){const _={};v&2082&&(_.$$scope={dirty:v,ctx:y}),h.$set(_)},i(y){f||(rt(h.$$.fragment,y),f=!0)},o(y){ht(h.$$.fragment,y),f=!1},d(y){$t(h,y)}}}function _S(u){let h,f,y;return f=new iS({props:{padding:{top:15,right:0,bottom:20,left:0},x:u[2],y:u[3],z:u[4],xScale:Dx().paddingInner([.02]).round(!0),xDomain:u[7],yDomain:u[6],zDomain:u[6],data:u[0],$$slots:{default:[gS]},$$scope:{ctx:u}}}),{c(){h=D("div"),Yt(f.$$.fragment),this.h()},l(v){h=M(v,"DIV",{class:!0});var _=R(h);Jt(f.$$.fragment,_),_.forEach(T),this.h()},h(){S(h,"class","chart-container svelte-1i1qsul")},m(v,_){ze(v,h,_),Qt(f,h,null),y=!0},p(v,[_]){const o={};_&4&&(o.x=v[2]),_&8&&(o.y=v[3]),_&16&&(o.z=v[4]),_&128&&(o.xDomain=v[7]),_&64&&(o.yDomain=v[6]),_&64&&(o.zDomain=v[6]),_&1&&(o.data=v[0]),_&2082&&(o.$$scope={dirty:_,ctx:v}),f.$set(o)},i(v){y||(rt(f.$$.fragment,v),y=!0)},o(v){ht(f.$$.fragment,v),y=!1},d(v){v&&T(h),$t(f)}}}function bS(u,h,f){let y,v,_,{data:o}=h,{suffix:A="%"}=h,{decimals:z=null}=h,{fill:F="#00205B"}=h,{xKey:V="x"}=h,{yKey:j="y"}=h,{zKey:q=null}=h,{colors:pe=["#00205B","#00205B","#00205B","#00205B"]}=h;return u.$$set=he=>{"data"in he&&f(0,o=he.data),"suffix"in he&&f(8,A=he.suffix),"decimals"in he&&f(9,z=he.decimals),"fill"in he&&f(1,F=he.fill),"xKey"in he&&f(2,V=he.xKey),"yKey"in he&&f(3,j=he.yKey),"zKey"in he&&f(4,q=he.zKey),"colors"in he&&f(10,pe=he.colors)},u.$$.update=()=>{u.$$.dirty&5&&f(7,y=o.map(he=>he[V])),u.$$.dirty&9&&f(6,v=[0,Math.max(...o.map(he=>he[j]))]),u.$$.dirty&768&&f(5,_=he=>he.toFixed(z)+A)},[o,F,V,j,q,_,v,y,A,z,pe]}class xS extends gl{constructor(h){super(),_l(this,h,bS,_S,bl,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function Zb(u,h,f){const y=u.slice();return y[13]=h[f],y[15]=f,y}function wS(u){let h,f,y=u[5](u[13][u[3]])+"",v,_;return{c(){h=D("span"),f=ee("(NI "),v=ee(y),_=ee(")"),this.h()},l(o){h=M(o,"SPAN",{class:!0,style:!0});var A=R(h);f=te(A,"(NI "),v=te(A,y),_=te(A,")"),A.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(o,A){ze(o,h,A),E(h,f),E(h,v),E(h,_)},p(o,A){A&9&&y!==(y=o[5](o[13][o[3]])+"")&&pt(v,y)},d(o){o&&T(h)}}}function ES(u){let h;return{c(){h=D("span"),this.h()},l(f){h=M(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(f,y){ze(f,h,y)},p:kn,d(f){f&&T(h)}}}function SS(u){let h,f,y=Hy(Math.round(u[13][u[3]]),"%")+"",v,_;return{c(){h=D("span"),f=ee("(2011 "),v=ee(y),_=ee(")"),this.h()},l(o){h=M(o,"SPAN",{class:!0,style:!0});var A=R(h);f=te(A,"(2011 "),v=te(A,y),_=te(A,")"),A.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(o,A){ze(o,h,A),E(h,f),E(h,v),E(h,_)},p(o,A){A&9&&y!==(y=Hy(Math.round(o[13][o[3]]),"%")+"")&&pt(v,y)},d(o){o&&T(h)}}}function Gb(u){let h,f,y,v,_=u[13][u[1]]+"",o,A,z,F=u[5](u[13][u[2]])+"",V,j,q;function pe(Ee,Be){if(Ee[3]=="prev"&&Ee[4])return SS;if(Ee[3]=="prev"&&!Ee[4])return ES;if(Ee[3]=="ni")return wS}let he=pe(u),ke=he&&he(u);return{c(){h=D("tr"),f=D("td"),y=es("svg"),v=xe(),o=ee(_),A=xe(),z=D("td"),V=ee(F),j=xe(),ke&&ke.c(),q=xe(),this.h()},l(Ee){h=M(Ee,"TR",{});var Be=R(h);f=M(Be,"TD",{class:!0});var Fe=R(f);y=ts(Fe,"svg",{width:!0,height:!0,class:!0});var Ft=R(y);Ft.forEach(T),v=we(Fe),o=te(Fe,_),Fe.forEach(T),A=we(Be),z=M(Be,"TD",{class:!0,style:!0});var Ct=R(z);V=te(Ct,F),j=we(Ct),ke&&ke.l(Ct),Ct.forEach(T),q=we(Be),Be.forEach(T),this.h()},h(){S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1mqxdxj"),S(f,"class","svelte-1mqxdxj"),S(z,"class","cell-right svelte-1mqxdxj"),re(z,"vertical-align","top")},m(Ee,Be){ze(Ee,h,Be),E(h,f),E(f,y),E(f,v),E(f,o),E(h,A),E(h,z),E(z,V),E(z,j),ke&&ke.m(z,null),E(h,q)},p(Ee,Be){Be&3&&_!==(_=Ee[13][Ee[1]]+"")&&pt(o,_),Be&5&&F!==(F=Ee[5](Ee[13][Ee[2]])+"")&&pt(V,F),he===(he=pe(Ee))&&ke?ke.p(Ee,Be):(ke&&ke.d(1),ke=he&&he(Ee),ke&&(ke.c(),ke.m(z,null)))},d(Ee){Ee&&T(h),ke&&ke.d()}}}function kS(u){let h,f,y=u[0],v=[];for(let _=0;_<y.length;_+=1)v[_]=Gb(Zb(u,y,_));return{c(){h=D("table"),f=D("tbody");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){h=M(_,"TABLE",{class:!0});var o=R(h);f=M(o,"TBODY",{});var A=R(f);for(let z=0;z<v.length;z+=1)v[z].l(A);A.forEach(T),o.forEach(T),this.h()},h(){S(h,"class","legend svelte-1mqxdxj")},m(_,o){ze(_,h,o),E(h,f);for(let A=0;A<v.length;A+=1)v[A].m(f,null)},p(_,[o]){if(o&63){y=_[0];let A;for(A=0;A<y.length;A+=1){const z=Zb(_,y,A);v[A]?v[A].p(z,o):(v[A]=Gb(z),v[A].c(),v[A].m(f,null))}for(;A<v.length;A+=1)v[A].d(1);v.length=y.length}},i:kn,o:kn,d(_){_&&T(h),Hc(v,_)}}}function IS(u,h,f){let y,{data:v}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:A="ni"}=h,{topic_prev_available:z=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:V="#555"}=h,{mutedColor:j="#999"}=h,{decimals:q=null}=h,{round:pe=!1}=h;function he(ke){let Ee;return q?Ee=(ke/y*100).toFixed(q)+"%":ke/y*100<1?Ee="<1%":Ee=(ke/y*100).toFixed(0)+"%",Ee}return u.$$set=ke=>{"data"in ke&&f(0,v=ke.data),"xKey"in ke&&f(1,_=ke.xKey),"yKey"in ke&&f(2,o=ke.yKey),"zKey"in ke&&f(3,A=ke.zKey),"topic_prev_available"in ke&&f(4,z=ke.topic_prev_available),"colors"in ke&&f(6,F=ke.colors),"textColor"in ke&&f(7,V=ke.textColor),"mutedColor"in ke&&f(8,j=ke.mutedColor),"decimals"in ke&&f(9,q=ke.decimals),"round"in ke&&f(10,pe=ke.round)},u.$$.update=()=>{u.$$.dirty&5&&(y=v.map(ke=>ke[o]).reduce((ke,Ee)=>ke+Ee,0)),u.$$.dirty&9&&v.map(ke=>ke[A]).reduce((ke,Ee)=>ke+Ee,0)},[v,_,o,A,z,he,F,V,j,q,pe]}class TS extends gl{constructor(h){super(),_l(this,h,IS,kS,bl,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:6,textColor:7,mutedColor:8,decimals:9,round:10})}}function Kb(u,h,f){const y=u.slice();return y[6]=h[f],y[8]=f,y}function Hb(u){let h,f=u[0],y=[];for(let v=0;v<f.length;v+=1)y[v]=Xb(Kb(u,f,v));return{c(){h=es("svg");for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){h=ts(v,"svg",{class:!0});var _=R(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(T),this.h()},h(){S(h,"class","stack svelte-pzvhwz")},m(v,_){ze(v,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(v,_){if(_&31){f=v[0];let o;for(o=0;o<f.length;o+=1){const A=Kb(v,f,o);y[o]?y[o].p(A,_):(y[o]=Xb(A),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(v){v&&T(h),Hc(y,v)}}}function Xb(u){let h,f;return{c(){h=es("rect"),this.h()},l(y){h=ts(y,"rect",{class:!0,x:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","cell svelte-pzvhwz"),S(h,"x",f=u[4][u[8]]/u[3]*100+"%"),re(h,"width",u[6][u[1]]/u[3]*100+"%"),re(h,"fill",u[2][u[8]])},m(y,v){ze(y,h,v)},p(y,v){v&24&&f!==(f=y[4][y[8]]/y[3]*100+"%")&&S(h,"x",f),v&11&&re(h,"width",y[6][y[1]]/y[3]*100+"%"),v&4&&re(h,"fill",y[2][y[8]])},d(y){y&&T(h)}}}function AS(u){let h,f=u[3]&&u[4]&&Hb(u);return{c(){f&&f.c(),h=La()},l(y){f&&f.l(y),h=La()},m(y,v){f&&f.m(y,v),ze(y,h,v)},p(y,[v]){y[3]&&y[4]?f?f.p(y,v):(f=Hb(y),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:kn,o:kn,d(y){f&&f.d(y),y&&T(h)}}}function zS(u,h,f){let{data:y}=h,{yKey:v="y"}=h,{colors:_=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,o,A;function z(){f(3,o=y.map(V=>V[v]).reduce((V,j)=>V+j,0));let F=[0];y.forEach(V=>F.push(F[F.length-1]+V[v])),f(4,A=F)}return u.$$set=F=>{"data"in F&&f(0,y=F.data),"yKey"in F&&f(1,v=F.yKey),"colors"in F&&f(2,_=F.colors)},u.$$.update=()=>{u.$$.dirty&3&&(y||v)&&z()},[y,v,_,o,A]}class Ng extends gl{constructor(h){super(),_l(this,h,zS,AS,bl,{data:0,yKey:1,colors:2})}}function Wb(u,h,f){const y=u.slice();return y[10]=h[f],y[12]=f,y}function PS(u){let h,f,y=u[6](u[10][u[3]])+"",v,_;return{c(){h=D("span"),f=ee("(NI "),v=ee(y),_=ee(")"),this.h()},l(o){h=M(o,"SPAN",{class:!0,style:!0});var A=R(h);f=te(A,"(NI "),v=te(A,y),_=te(A,")"),A.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(o,A){ze(o,h,A),E(h,f),E(h,v),E(h,_)},p(o,A){A&9&&y!==(y=o[6](o[10][o[3]])+"")&&pt(v,y)},d(o){o&&T(h)}}}function CS(u){let h;return{c(){h=D("span"),this.h()},l(f){h=M(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(f,y){ze(f,h,y)},p:kn,d(f){f&&T(h)}}}function DS(u){let h,f,y=Hy(Math.round(u[10][u[3]]),"%")+"",v,_;return{c(){h=D("span"),f=ee("(2011 "),v=ee(y),_=ee(")"),this.h()},l(o){h=M(o,"SPAN",{class:!0,style:!0});var A=R(h);f=te(A,"(2011 "),v=te(A,y),_=te(A,")"),A.forEach(T),this.h()},h(){S(h,"class",""),re(h,"color","#1460aa")},m(o,A){ze(o,h,A),E(h,f),E(h,v),E(h,_)},p(o,A){A&9&&y!==(y=Hy(Math.round(o[10][o[3]]),"%")+"")&&pt(v,y)},d(o){o&&T(h)}}}function Yb(u){let h,f,y,v,_,o=u[10][u[1]]+"",A,z,F,V=u[6](u[10][u[2]])+"",j,q,pe;function he(Be,Fe){if(Be[3]=="prev"&&Be[4])return DS;if(Be[3]=="prev"&&!Be[4])return CS;if(Be[3]=="ni")return PS}let ke=he(u),Ee=ke&&ke(u);return{c(){h=D("tr"),f=D("td"),y=es("svg"),v=es("rect"),_=xe(),A=ee(o),z=xe(),F=D("td"),j=ee(V),q=xe(),Ee&&Ee.c(),pe=xe(),this.h()},l(Be){h=M(Be,"TR",{});var Fe=R(h);f=M(Fe,"TD",{class:!0});var Ft=R(f);y=ts(Ft,"svg",{width:!0,height:!0,class:!0});var Ct=R(y);v=ts(Ct,"rect",{width:!0,height:!0,style:!0}),R(v).forEach(T),Ct.forEach(T),_=we(Ft),A=te(Ft,o),Ft.forEach(T),z=we(Fe),F=M(Fe,"TD",{class:!0,style:!0});var mt=R(F);j=te(mt,V),q=we(mt),Ee&&Ee.l(mt),mt.forEach(T),pe=we(Fe),Fe.forEach(T),this.h()},h(){S(v,"width","20"),S(v,"height","30"),re(v,"fill",u[5][u[12]]),S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1gvovsq"),S(f,"class","svelte-1gvovsq"),S(F,"class","cell-right svelte-1gvovsq"),re(F,"vertical-align","top")},m(Be,Fe){ze(Be,h,Fe),E(h,f),E(f,y),E(y,v),E(f,_),E(f,A),E(h,z),E(h,F),E(F,j),E(F,q),Ee&&Ee.m(F,null),E(h,pe)},p(Be,Fe){Fe&32&&re(v,"fill",Be[5][Be[12]]),Fe&3&&o!==(o=Be[10][Be[1]]+"")&&pt(A,o),Fe&5&&V!==(V=Be[6](Be[10][Be[2]])+"")&&pt(j,V),ke===(ke=he(Be))&&Ee?Ee.p(Be,Fe):(Ee&&Ee.d(1),Ee=ke&&ke(Be),Ee&&(Ee.c(),Ee.m(F,null)))},d(Be){Be&&T(h),Ee&&Ee.d()}}}function MS(u){let h,f,y=u[0],v=[];for(let _=0;_<y.length;_+=1)v[_]=Yb(Wb(u,y,_));return{c(){h=D("table"),f=D("tbody");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){h=M(_,"TABLE",{class:!0});var o=R(h);f=M(o,"TBODY",{});var A=R(f);for(let z=0;z<v.length;z+=1)v[z].l(A);A.forEach(T),o.forEach(T),this.h()},h(){S(h,"class","legend svelte-1gvovsq")},m(_,o){ze(_,h,o),E(h,f);for(let A=0;A<v.length;A+=1)v[A].m(f,null)},p(_,[o]){if(o&127){y=_[0];let A;for(A=0;A<y.length;A+=1){const z=Wb(_,y,A);v[A]?v[A].p(z,o):(v[A]=Yb(z),v[A].c(),v[A].m(f,null))}for(;A<v.length;A+=1)v[A].d(1);v.length=y.length}},i:kn,o:kn,d(_){_&&T(h),Hc(v,_)}}}function LS(u,h,f){let y,{data:v}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:A="ni"}=h,{topic_prev_available:z=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:V=null}=h;function j(q){let pe;return V?pe=(q/y*100).toFixed(V)+"%":q/y*100<1?pe="<1%":pe=(q/y*100).toFixed(0)+"%",pe}return u.$$set=q=>{"data"in q&&f(0,v=q.data),"xKey"in q&&f(1,_=q.xKey),"yKey"in q&&f(2,o=q.yKey),"zKey"in q&&f(3,A=q.zKey),"topic_prev_available"in q&&f(4,z=q.topic_prev_available),"colors"in q&&f(5,F=q.colors),"decimals"in q&&f(7,V=q.decimals)},u.$$.update=()=>{u.$$.dirty&5&&(y=v.map(q=>q[o]).reduce((q,pe)=>q+pe,0)),u.$$.dirty&9&&v.map(q=>q[A]).reduce((q,pe)=>q+pe,0)},[v,_,o,A,z,F,j,V]}class RS extends gl{constructor(h){super(),_l(this,h,LS,MS,bl,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function Jb(u){let h,f,y,v;f=new Ng({props:{data:u[0],yKey:u[4],colors:u[6]}});let _=u[8]&&Qb(u);return{c(){h=D("div"),Yt(f.$$.fragment),y=xe(),_&&_.c(),this.h()},l(o){h=M(o,"DIV",{class:!0,style:!0});var A=R(h);Jt(f.$$.fragment,A),y=we(A),_&&_.l(A),A.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),re(h,"height",u[1]*.28+"px")},m(o,A){ze(o,h,A),Qt(f,h,null),E(h,y),_&&_.m(h,null),v=!0},p(o,A){const z={};A&1&&(z.data=o[0]),A&16&&(z.yKey=o[4]),A&64&&(z.colors=o[6]),f.$set(z),o[8]?_?_.p(o,A):(_=Qb(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null),(!v||A&2)&&re(h,"height",o[1]*.28+"px")},i(o){v||(rt(f.$$.fragment,o),v=!0)},o(o){ht(f.$$.fragment,o),v=!1},d(o){o&&T(h),$t(f),_&&_.d()}}}function Qb(u){let h,f;return{c(){h=D("div"),f=ee(u[8]),this.h()},l(y){h=M(y,"DIV",{class:!0});var v=R(h);f=te(v,u[8]),v.forEach(T),this.h()},h(){S(h,"class","label svelte-1tebgpk")},m(y,v){ze(y,h,v),E(h,f)},p(y,v){v&256&&pt(f,y[8])},d(y){y&&T(h)}}}function $b(u){let h,f,y,v,_,o;return f=new Ng({props:{data:u[0],yKey:u[4],colors:u[6]}}),{c(){h=D("div"),Yt(f.$$.fragment),y=xe(),v=D("div"),_=ee("2011 comparison not available"),this.h()},l(A){h=M(A,"DIV",{class:!0,style:!0});var z=R(h);Jt(f.$$.fragment,z),y=we(z),v=M(z,"DIV",{class:!0,style:!0});var F=R(v);_=te(F,"2011 comparison not available"),F.forEach(T),z.forEach(T),this.h()},h(){S(v,"class","label svelte-1tebgpk"),re(v,"background-color","#d8d8d8 "),re(v,"color","#000000"),S(h,"class","chart svelte-1tebgpk"),re(h,"height",u[1]*.28+"px")},m(A,z){ze(A,h,z),Qt(f,h,null),E(h,y),E(h,v),E(v,_),o=!0},p(A,z){const F={};z&1&&(F.data=A[0]),z&16&&(F.yKey=A[4]),z&64&&(F.colors=A[6]),f.$set(F),(!o||z&2)&&re(h,"height",A[1]*.28+"px")},i(A){o||(rt(f.$$.fragment,A),o=!0)},o(A){ht(f.$$.fragment,A),o=!1},d(A){A&&T(h),$t(f)}}}function BS(u){let h,f,y,v,_,o,A,z;f=new Ng({props:{data:u[0],yKey:u[3],colors:u[6]}});let F=(u[4]&&u[5]||u[4]=="ni")&&Jb(u),V=u[4]=="prev"&&!u[5]&&$b(u);return A=new RS({props:{data:u[0],xKey:u[2],yKey:u[3],zKey:u[4],topic_prev_available:u[5],decimals:u[7],colors:u[6]}}),{c(){h=D("div"),Yt(f.$$.fragment),y=xe(),F&&F.c(),v=xe(),V&&V.c(),_=xe(),o=D("div"),Yt(A.$$.fragment),this.h()},l(j){h=M(j,"DIV",{class:!0,style:!0});var q=R(h);Jt(f.$$.fragment,q),q.forEach(T),y=we(j),F&&F.l(j),v=we(j),V&&V.l(j),_=we(j),o=M(j,"DIV",{class:!0});var pe=R(o);Jt(A.$$.fragment,pe),pe.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),re(h,"padding-top","3px"),re(h,"height",(u[4]?u[1]*.72:u[1])+"px"),S(o,"class","legend svelte-1tebgpk")},m(j,q){ze(j,h,q),Qt(f,h,null),ze(j,y,q),F&&F.m(j,q),ze(j,v,q),V&&V.m(j,q),ze(j,_,q),ze(j,o,q),Qt(A,o,null),z=!0},p(j,[q]){const pe={};q&1&&(pe.data=j[0]),q&8&&(pe.yKey=j[3]),q&64&&(pe.colors=j[6]),f.$set(pe),(!z||q&18)&&re(h,"height",(j[4]?j[1]*.72:j[1])+"px"),j[4]&&j[5]||j[4]=="ni"?F?(F.p(j,q),q&48&&rt(F,1)):(F=Jb(j),F.c(),rt(F,1),F.m(v.parentNode,v)):F&&(Uu(),ht(F,1,1,()=>{F=null}),qu()),j[4]=="prev"&&!j[5]?V?(V.p(j,q),q&48&&rt(V,1)):(V=$b(j),V.c(),rt(V,1),V.m(_.parentNode,_)):V&&(Uu(),ht(V,1,1,()=>{V=null}),qu());const he={};q&1&&(he.data=j[0]),q&4&&(he.xKey=j[2]),q&8&&(he.yKey=j[3]),q&16&&(he.zKey=j[4]),q&32&&(he.topic_prev_available=j[5]),q&128&&(he.decimals=j[7]),q&64&&(he.colors=j[6]),A.$set(he)},i(j){z||(rt(f.$$.fragment,j),rt(F),rt(V),rt(A.$$.fragment,j),z=!0)},o(j){ht(f.$$.fragment,j),ht(F),ht(V),ht(A.$$.fragment,j),z=!1},d(j){j&&T(h),$t(f),j&&T(y),F&&F.d(j),j&&T(v),V&&V.d(j),j&&T(_),j&&T(o),$t(A)}}}function OS(u,h,f){let{data:y}=h,{height:v=80}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:A="ni"}=h,{topic_prev_available:z=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","#00695c"]}=h,{decimals:V=null}=h,{label:j=null}=h;return u.$$set=q=>{"data"in q&&f(0,y=q.data),"height"in q&&f(1,v=q.height),"xKey"in q&&f(2,_=q.xKey),"yKey"in q&&f(3,o=q.yKey),"zKey"in q&&f(4,A=q.zKey),"topic_prev_available"in q&&f(5,z=q.topic_prev_available),"colors"in q&&f(6,F=q.colors),"decimals"in q&&f(7,V=q.decimals),"label"in q&&f(8,j=q.label)},[y,v,_,o,A,z,F,V,j]}class ui extends gl{constructor(h){super(),_l(this,h,OS,BS,bl,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function VS(u){let h,f,y,v;return{c(){h=D("div"),f=ee("Back to top"),this.h()},l(_){h=M(_,"DIV",{class:!0});var o=R(h);f=te(o,"Back to top"),o.forEach(T),this.h()},h(){S(h,"class","back_to_start svelte-11zibd5"),mn(h,"hidden",u[0])},m(_,o){ze(_,h,o),E(h,f),y||(v=[Fn(window,"scroll",u[2]),Fn(h,"click",u[1])],y=!0)},p(_,[o]){o&1&&mn(h,"hidden",_[0])},i:kn,o:kn,d(_){_&&T(h),y=!1,Kc(v)}}}function FS(u,h,f){let{buttonVisibleOnPX:y=200}=h,v=!0;const _=()=>{document.body.scrollIntoView()},o=()=>document.documentElement||document.body,A=()=>{o().scrollTop>y?f(0,v=!1):f(0,v=!0)};return u.$$set=z=>{"buttonVisibleOnPX"in z&&f(3,y=z.buttonVisibleOnPX)},[v,_,A,y]}class NS extends gl{constructor(h){super(),_l(this,h,FS,VS,bl,{buttonVisibleOnPX:3})}}function ex(u,h,f){const y=u.slice();return y[53]=h[f],y[55]=f,y}function tx(u,h,f){const y=u.slice();return y[56]=h[f],y[55]=f,y}function rx(u,h,f){const y=u.slice();return y[58]=h[f],y}function ix(u,h,f){const y=u.slice();return y[56]=h[f],y[55]=f,y}function nx(u){let h,f,y,v,_,o,A=" &gt; ",z,F,V,j,q,pe=u[1].name+"",he,ke,Ee,Be,Fe,Ft,Ct,mt,et,vr,pr,lr,bt,kt,Rr,Nt,dr,it,rr,wr,Vr,zr,ft,nt,gr,on,In,Fi,Ni,Gr,Ra,Er,Wi,$a,_r,wt,ti,Yi,Zr,rs=" &#x24D8; ",er,ri,kr,bi,Kr,Pr,xi,yn,Cr,br=u[1].data.population.value[2021].all.toLocaleString()+"",Fr,Ji,sn,ln,Ga,ci,vn,Pi,Tn,wa,Bo=" &#x24D8; ",_o,Qn,Qi,Ea,sa,wi,xr,N,G,X=u[1].data.households.value[2021].all_households.toLocaleString()+"",$,se,ve,be,H,ne,Ie,Ue,Ge,Le,Ne,ct,tt,Ce,$e,We,Je,Kt,Ye,Ut,ir,Rt,Ht,Xt,Ui,nr,sr,mr,Ot=u[1].name+"",jt,ii,Sa,Hr,An,zn,Ei,ur,$n,hi,qr,la=" &#x24D8; ",Br,Ci,Pn,Xs,ni,ka,ai,Nr,qi,pi,ua,Nn,yc=" &#x24D8; ",Oo,is,Vo,Ws,Ys,Fo,un=(u[1].hectares>=.1?u[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",Ba,ea,bo,Cn,oi,Ia,Ae,fi,$i=" &#x24D8; ",Xr,Dn,gn,ji,Js,eo,vu=(u[1].data.population.value[2021].all/u[1].hectares>=.1?(u[1].data.population.value[2021].all/u[1].hectares).toFixed(1):"<0.1")+"",No,Ka,ns,gu,Ha,jl,xo,as,Uo,xl,to,Wr,_u,wo=u[1].name+"",Ta,Ls,Un,qn,Oa,jn,Si,qo,os,Ir,jo,ju=" &#x24D8; ",Qs,ss,$s,Zu,ta,Zo,ls,us,ro,ra,Eo,bu,Go,Zn,So,ko,Sr,wl,vc,Aa,Gu,cs,Di,Gn,ca,ia,Ku=" &#x24D8; ",Ko,hs,el,tl,_n,ps,Hu,rl,za,Zl,Gl,Kn,Va,Mn;function Xa(me,gt){return me[1].parents[0]?qS:US}let io=Xa(u),Io=io(u);function El(me,gt){return me[1].type=="ni"?ZS:jS}let xu=El(u),no=xu(u),cn=u[1].type!="ni"&&ox(u);function il(me,gt){return me[6]?KS:GS}let nl=il(u),Pa=nl(u);bt=new zw({props:{search_data:u[0],group:"typestr",search:!0}}),bt.$on("select",u[16]);function fs(me,gt){return me[1].type=="ni"||me[1].type=="ctry"?XS:HS}let Yr=fs(u),Wa=Yr(u),di=u[6]&&sx(u),mi=u[1].type!="ni"&&lx(u),It=u[6]&&u[4]&&hx(u),qt=u[1].type!="ni"&u[11]&&px(u),yr=u[6]&&u[4]&&fx(u);function Kl(me,gt){return me[1].type!="ni"?h5:c5}let ao=Kl(u),oo=ao(u);function Lh(me){u[32](me)}let Xc={location:{bounds:u[1].bounds},options:{fitBoundsOptions:{padding:20}},style:C2,$$slots:{default:[f5]},$$scope:{ctx:u}};u[8]!==void 0&&(Xc.map=u[8]),Ne=new Mw({props:Xc}),up.push(()=>A2(Ne,"map",Lh));function ds(me,gt){return me[1].parents[0]?m5:d5}let To=ds(u),Hn=To(u);function ki(me,gt){return me[1].children[0]?v5:y5}let ms=ki(u),Ao=ms(u);function en(me,gt){return me[1].type!="ni"&me[1].type!="lgd"?b5:me[1].type!="ni"&me[1].type=="lgd"?_5:g5}let at=en(u),Zi=at(u),Ii=u[1].type!="ni"&&u[11]&&vx(u);ra=new xS({props:{data:u[1]&&u[14](["age"]),zKey:u[12]}});let Jr=(u[11]&&u[13]||u[4]&&u[13]&&u[6])&&gx(u);Zn=new TS({props:{data:u[1]&&u[14](["age"]),zKey:u[12]}}),Aa=new ui({props:{data:u[1]&&u[14](["sex"]),zKey:u[12],label:u[13]}}),za=new ui({props:{data:u[1]&&u[14](["hh_size"]),zKey:u[12],label:u[13]}});const Xn=[w5,x5],bn=[];function al(me,gt){return me[6]?0:1}return Kn=al(u),Va=bn[Kn]=Xn[Kn](u),{c(){h=D("div"),f=D("div"),y=D("span"),v=D("a"),_=ee("Home"),o=new zg(!1),z=xe(),Io.c(),F=xe(),V=D("br"),j=xe(),q=D("span"),he=ee(pe),ke=xe(),Ee=D("div"),Be=ee(`Click for: \r
		\r
					`),no.c(),Fe=xe(),cn&&cn.c(),Ft=xe(),Pa.c(),Ct=xe(),mt=D("div"),et=D("div"),vr=D("b"),pr=ee("Search for your area:"),lr=xe(),Yt(bt.$$.fragment),kt=xe(),Rr=D("script"),Nt=ee(`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),dr=xe(),it=D("div"),rr=D("button"),wr=ee("Print / PDF"),Vr=xe(),zr=D("button"),ft=ee("Menu"),nt=xe(),gr=D("button"),on=ee("Share"),In=xe(),Fi=D("div"),Ni=D("div"),Gr=D("h3"),Ra=ee("Overview"),Er=xe(),Wa.c(),Wi=xe(),di&&di.c(),$a=xe(),_r=D("div"),wt=D("div"),ti=D("div"),Yi=ee("Population "),Zr=D("span"),er=xe(),ri=D("div"),kr=D("div"),bi=ee(`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),Kr=D("a"),Pr=D("strong"),xi=ee("Statistical bulletins"),yn=xe(),Cr=D("span"),Fr=ee(br),Ji=D("br"),sn=xe(),mi&&mi.c(),ln=xe(),It&&It.c(),Ga=xe(),ci=D("div"),vn=D("div"),Pi=D("div"),Tn=ee("Households"),wa=D("span"),_o=xe(),Qn=D("div"),Qi=D("div"),Ea=ee(`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),sa=D("a"),wi=D("strong"),xr=ee("Statistical bulletins"),N=xe(),G=D("span"),$=ee(X),se=D("br"),ve=xe(),qt&&qt.c(),be=xe(),yr&&yr.c(),H=xe(),ne=D("div"),Ie=D("div"),Ue=D("h3"),oo.c(),Ge=xe(),Le=D("div"),Yt(Ne.$$.fragment),tt=xe(),Ce=D("div"),Hn.c(),$e=xe(),We=D("div"),Ao.c(),Kt=xe(),Ye=D("div"),Ut=D("div"),ir=D("h2"),Rt=D("button"),Ht=D("span"),Xt=ee("Area Information"),Ui=xe(),nr=D("div"),sr=D("div"),mr=ee("Census 2021 - "),jt=ee(Ot),ii=ee(" - "),Sa=D("span"),Hr=ee("Location, Area and Population density"),An=xe(),zn=D("div"),Ei=D("div"),ur=D("div"),$n=D("div"),hi=ee("Location"),qr=D("span"),Br=xe(),Ci=D("div"),Pn=D("div"),Xs=ee("Information about the area including its geographical hierarchy."),ni=xe(),ka=D("br"),Zi.c(),ai=xe(),Nr=D("div"),qi=D("div"),pi=D("div"),ua=ee("Area "),Nn=D("span"),Oo=xe(),is=D("div"),Vo=D("div"),Ws=ee("Area is measured in hectares (ha), it is rounded to the nearest whole number."),Ys=xe(),Fo=D("span"),Ba=ee(un),ea=ee(" ha"),bo=xe(),Cn=D("div"),oi=D("div"),Ia=D("div"),Ae=ee("Population density"),fi=D("span"),Xr=xe(),Dn=D("div"),gn=D("div"),ji=ee("Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),Js=xe(),eo=D("span"),No=ee(vu),Ka=xe(),Ii&&Ii.c(),gu=xe(),Ha=D("div"),jl=D("h2"),xo=D("button"),as=D("span"),Uo=ee("Demography"),xl=xe(),to=D("div"),Wr=D("div"),_u=ee("Census 2021 - "),Ta=ee(wo),Ls=ee(" - "),Un=D("span"),qn=ee("Broad age bands (years), Sex, Household size"),Oa=xe(),jn=D("div"),Si=D("div"),qo=D("div"),os=D("div"),Ir=ee("Broad age bands (years) "),jo=D("span"),Qs=xe(),ss=D("div"),$s=D("div"),Zu=ee(`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),ta=D("a"),Zo=D("strong"),ls=ee("Statistical bulletins"),us=xe(),ro=D("div"),Yt(ra.$$.fragment),Eo=xe(),Jr&&Jr.c(),bu=xe(),Go=D("div"),Yt(Zn.$$.fragment),So=xe(),ko=D("div"),Sr=D("div"),wl=ee("Sex"),vc=xe(),Yt(Aa.$$.fragment),Gu=xe(),cs=D("div"),Di=D("div"),Gn=D("div"),ca=ee("Household size"),ia=D("span"),Ko=xe(),hs=D("div"),el=D("div"),tl=ee("The number of usual residents in the household.      "),_n=D("a"),ps=D("strong"),Hu=ee("Statistical bulletins"),rl=xe(),Yt(za.$$.fragment),Gl=xe(),Va.c(),this.h()},l(me){h=M(me,"DIV",{class:!0});var gt=R(h);f=M(gt,"DIV",{});var ha=R(f);y=M(ha,"SPAN",{class:!0});var pa=R(y);v=M(pa,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var fa=R(v);_=te(fa,"Home"),fa.forEach(T),o=Pg(pa,!1),z=we(pa),Io.l(pa),F=we(pa),pa.forEach(T),V=M(ha,"BR",{}),j=we(ha),q=M(ha,"SPAN",{class:!0});var tn=R(q);he=te(tn,pe),tn.forEach(T),ke=we(ha),Ee=M(ha,"DIV",{class:!0,style:!0});var da=R(Ee);Be=te(da,`Click for: \r
		\r
					`),no.l(da),Fe=we(da),cn&&cn.l(da),Ft=we(da),Pa.l(da),da.forEach(T),ha.forEach(T),Ct=we(gt),mt=M(gt,"DIV",{});var ys=R(mt);et=M(ys,"DIV",{style:!0,class:!0});var Mi=R(et);vr=M(Mi,"B",{});var Fa=R(vr);pr=te(Fa,"Search for your area:"),Fa.forEach(T),lr=we(Mi),Jt(bt.$$.fragment,Mi),kt=we(Mi),Rr=M(Mi,"SCRIPT",{});var Wc=R(Rr);Nt=te(Wc,`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Wc.forEach(T),dr=we(Mi),it=M(Mi,"DIV",{width:!0});var Ho=R(it);rr=M(Ho,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var vs=R(rr);wr=te(vs,"Print / PDF"),vs.forEach(T),Vr=we(Ho),zr=M(Ho,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var ol=R(zr);ft=te(ol,"Menu"),ol.forEach(T),nt=we(Ho),gr=M(Ho,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var Ln=R(gr);on=te(Ln,"Share"),Ln.forEach(T),Ho.forEach(T),Mi.forEach(T),ys.forEach(T),gt.forEach(T),In=we(me),Fi=M(me,"DIV",{id:!0,class:!0});var xn=R(Fi);Ni=M(xn,"DIV",{class:!0,style:!0});var tr=R(Ni);Gr=M(tr,"H3",{style:!0,class:!0});var Xo=R(Gr);Ra=te(Xo,"Overview"),Xo.forEach(T),Er=we(tr),Wa.l(tr),Wi=we(tr),di&&di.l(tr),tr.forEach(T),$a=we(xn),_r=M(xn,"DIV",{class:!0});var yi=R(_r);wt=M(yi,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var vi=R(wt);ti=M(vi,"DIV",{class:!0,style:!0});var Rs=R(ti);Yi=te(Rs,"Population "),Zr=M(Rs,"SPAN",{style:!0});var gs=R(Zr);gs.forEach(T),Rs.forEach(T),vi.forEach(T),er=we(yi),ri=M(yi,"DIV",{class:!0,id:!0});var so=R(ri);kr=M(so,"DIV",{class:!0});var na=R(kr);bi=te(na,`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),Kr=M(na,"A",{href:!0,class:!0});var Bs=R(Kr);Pr=M(Bs,"STRONG",{});var xt=R(Pr);xi=te(xt,"Statistical bulletins"),xt.forEach(T),Bs.forEach(T),na.forEach(T),so.forEach(T),yn=we(yi),Cr=M(yi,"SPAN",{class:!0,style:!0});var dt=R(Cr);Fr=te(dt,br),dt.forEach(T),Ji=M(yi,"BR",{}),sn=we(yi),mi&&mi.l(yi),ln=we(yi),It&&It.l(yi),yi.forEach(T),Ga=we(xn),ci=M(xn,"DIV",{class:!0});var Qr=R(ci);vn=M(Qr,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Gi=R(vn);Pi=M(Gi,"DIV",{class:!0,style:!0});var hn=R(Pi);Tn=te(hn,"Households"),wa=M(hn,"SPAN",{style:!0});var Ki=R(wa);Ki.forEach(T),hn.forEach(T),Gi.forEach(T),_o=we(Qr),Qn=M(Qr,"DIV",{class:!0,id:!0});var Wo=R(Qn);Qi=M(Wo,"DIV",{class:!0});var Os=R(Qi);Ea=te(Os,`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),sa=M(Os,"A",{href:!0,class:!0});var gc=R(sa);wi=M(gc,"STRONG",{});var Dr=R(wi);xr=te(Dr,"Statistical bulletins"),Dr.forEach(T),gc.forEach(T),Os.forEach(T),Wo.forEach(T),N=we(Qr),G=M(Qr,"SPAN",{class:!0,style:!0});var Hi=R(G);$=te(Hi,X),Hi.forEach(T),se=M(Qr,"BR",{}),ve=we(Qr),qt&&qt.l(Qr),be=we(Qr),yr&&yr.l(Qr),Qr.forEach(T),xn.forEach(T),H=we(me),ne=M(me,"DIV",{class:!0});var lo=R(ne);Ie=M(lo,"DIV",{style:!0});var sl=R(Ie);Ue=M(sl,"H3",{class:!0});var ll=R(Ue);oo.l(ll),ll.forEach(T),sl.forEach(T),Ge=we(lo),Le=M(lo,"DIV",{id:!0,style:!0,class:!0});var zo=R(Le);Jt(Ne.$$.fragment,zo),zo.forEach(T),tt=we(lo),Ce=M(lo,"DIV",{});var Na=R(Ce);Hn.l(Na),Na.forEach(T),$e=we(lo),We=M(lo,"DIV",{});var Sl=R(We);Ao.l(Sl),Sl.forEach(T),lo.forEach(T),Kt=we(me),Ye=M(me,"DIV",{class:!0,id:!0});var Rn=R(Ye);Ut=M(Rn,"DIV",{class:!0});var kl=R(Ut);ir=M(kl,"H2",{class:!0,id:!0});var Ya=R(ir);Rt=M(Ya,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ua=R(Rt);Ht=M(Ua,"SPAN",{class:!0});var _s=R(Ht);Xt=te(_s,"Area Information"),_s.forEach(T),Ua.forEach(T),Ya.forEach(T),Ui=we(kl),nr=M(kl,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Il=R(nr);sr=M(Il,"DIV",{class:!0});var ma=R(sr);mr=te(ma,"Census 2021 - "),jt=te(ma,Ot),ii=te(ma," - "),Sa=M(ma,"SPAN",{class:!0});var Yc=R(Sa);Hr=te(Yc,"Location, Area and Population density"),Yc.forEach(T),An=we(ma),zn=M(ma,"DIV",{class:!0});var uo=R(zn);Ei=M(uo,"DIV",{class:!0,style:!0});var aa=R(Ei);ur=M(aa,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Vs=R(ur);$n=M(Vs,"DIV",{class:!0,style:!0});var bs=R($n);hi=te(bs,"Location"),qr=M(bs,"SPAN",{style:!0});var Ca=R(qr);Ca.forEach(T),bs.forEach(T),Vs.forEach(T),Br=we(aa),Ci=M(aa,"DIV",{class:!0,id:!0});var Hl=R(Ci);Pn=M(Hl,"DIV",{class:!0});var Xl=R(Pn);Xs=te(Xl,"Information about the area including its geographical hierarchy."),Xl.forEach(T),Hl.forEach(T),ni=we(aa),ka=M(aa,"BR",{}),Zi.l(aa),aa.forEach(T),ai=we(uo),Nr=M(uo,"DIV",{class:!0});var ul=R(Nr);qi=M(ul,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var xs=R(qi);pi=M(xs,"DIV",{class:!0,style:!0});var n=R(pi);ua=te(n,"Area "),Nn=M(n,"SPAN",{style:!0});var s=R(Nn);s.forEach(T),n.forEach(T),xs.forEach(T),Oo=we(ul),is=M(ul,"DIV",{class:!0,id:!0});var a=R(is);Vo=M(a,"DIV",{class:!0});var c=R(Vo);Ws=te(c,"Area is measured in hectares (ha), it is rounded to the nearest whole number."),c.forEach(T),a.forEach(T),Ys=we(ul),Fo=M(ul,"SPAN",{class:!0,style:!0});var m=R(Fo);Ba=te(m,un),ea=te(m," ha"),m.forEach(T),ul.forEach(T),bo=we(uo),Cn=M(uo,"DIV",{class:!0});var w=R(Cn);oi=M(w,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var k=R(oi);Ia=M(k,"DIV",{class:!0,style:!0});var P=R(Ia);Ae=te(P,"Population density"),fi=M(P,"SPAN",{style:!0});var B=R(fi);B.forEach(T),P.forEach(T),k.forEach(T),Xr=we(w),Dn=M(w,"DIV",{class:!0,id:!0});var Z=R(Dn);gn=M(Z,"DIV",{class:!0});var Y=R(gn);ji=te(Y,"Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),Y.forEach(T),Z.forEach(T),Js=we(w),eo=M(w,"SPAN",{class:!0,style:!0});var J=R(eo);No=te(J,vu),J.forEach(T),Ka=we(w),Ii&&Ii.l(w),w.forEach(T),uo.forEach(T),ma.forEach(T),Il.forEach(T),kl.forEach(T),gu=we(Rn),Ha=M(Rn,"DIV",{class:!0});var Q=R(Ha);jl=M(Q,"H2",{class:!0,id:!0});var le=R(jl);xo=M(le,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var oe=R(xo);as=M(oe,"SPAN",{class:!0});var ye=R(as);Uo=te(ye,"Demography"),ye.forEach(T),oe.forEach(T),le.forEach(T),xl=we(Q),to=M(Q,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var ie=R(to);Wr=M(ie,"DIV",{class:!0});var fe=R(Wr);_u=te(fe,"Census 2021 - "),Ta=te(fe,wo),Ls=te(fe," - "),Un=M(fe,"SPAN",{class:!0});var _e=R(Un);qn=te(_e,"Broad age bands (years), Sex, Household size"),_e.forEach(T),Oa=we(fe),jn=M(fe,"DIV",{class:!0});var Te=R(jn);Si=M(Te,"DIV",{class:!0});var Re=R(Si);qo=M(Re,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var De=R(qo);os=M(De,"DIV",{class:!0,style:!0});var Ve=R(os);Ir=te(Ve,"Broad age bands (years) "),jo=M(Ve,"SPAN",{style:!0});var Ze=R(jo);Ze.forEach(T),Ve.forEach(T),De.forEach(T),Qs=we(Re),ss=M(Re,"DIV",{class:!0,id:!0});var He=R(ss);$s=M(He,"DIV",{class:!0});var Ke=R($s);Zu=te(Ke,`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),ta=M(Ke,"A",{href:!0,class:!0});var ut=R(ta);Zo=M(ut,"STRONG",{});var vt=R(Zo);ls=te(vt,"Statistical bulletins"),vt.forEach(T),ut.forEach(T),Ke.forEach(T),He.forEach(T),us=we(Re),ro=M(Re,"DIV",{class:!0,style:!0});var Et=R(ro);Jt(ra.$$.fragment,Et),Et.forEach(T),Eo=we(Re),Jr&&Jr.l(Re),bu=we(Re),Go=M(Re,"DIV",{});var Tt=R(Go);Jt(Zn.$$.fragment,Tt),Tt.forEach(T),Re.forEach(T),So=we(Te),ko=M(Te,"DIV",{class:!0});var hr=R(ko);Sr=M(hr,"DIV",{class:!0,style:!0});var ot=R(Sr);wl=te(ot,"Sex"),ot.forEach(T),vc=we(hr),Jt(Aa.$$.fragment,hr),hr.forEach(T),Gu=we(Te),cs=M(Te,"DIV",{class:!0});var Mt=R(cs);Di=M(Mt,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Wt=R(Di);Gn=M(Wt,"DIV",{class:!0,style:!0});var Vt=R(Gn);ca=te(Vt,"Household size"),ia=M(Vt,"SPAN",{style:!0});var zt=R(ia);zt.forEach(T),Vt.forEach(T),Wt.forEach(T),Ko=we(Mt),hs=M(Mt,"DIV",{class:!0,id:!0});var Bt=R(hs);el=M(Bt,"DIV",{class:!0});var At=R(el);tl=te(At,"The number of usual residents in the household.      "),_n=M(At,"A",{href:!0,class:!0});var Dt=R(_n);ps=M(Dt,"STRONG",{});var Li=R(ps);Hu=te(Li,"Statistical bulletins"),Li.forEach(T),Dt.forEach(T),At.forEach(T),Bt.forEach(T),rl=we(Mt),Jt(za.$$.fragment,Mt),Mt.forEach(T),Te.forEach(T),fe.forEach(T),ie.forEach(T),Q.forEach(T),Gl=we(Rn),Va.l(Rn),Rn.forEach(T),this.h()},h(){S(v,"href",Mh+"/"),S(v,"sveltekit:noscroll",""),S(v,"class","svelte-p0yy5r"),o.a=z,S(y,"class","text-small"),S(q,"class","text-big title svelte-p0yy5r"),S(Ee,"class","text-bold"),re(Ee,"font-size","0.85em"),S(rr,"class","btn svelte-p0yy5r"),re(rr,"width","33%"),S(rr,"title","Click to print this page to pdf or printer"),S(rr,"onclick","window.print();return false;"),S(zr,"class","btn svelte-p0yy5r"),re(zr,"width","33%"),S(zr,"alt","Return to the landing page"),S(zr,"onclick","window.location.href='"+Mh+"';"),S(gr,"class","btn svelte-p0yy5r"),re(gr,"width","30%"),S(gr,"type","share"),S(gr,"alt","Share this page"),S(it,"width","100%"),re(et,"width","350px"),re(et,"padding-top","5px"),S(et,"class","svelte-p0yy5r"),mn(et,"float-right",u[7]>1),S(h,"class","grid mtl svelte-p0yy5r"),re(Gr,"margin","0 0 10px 0"),re(Gr,"line-height","1.78"),S(Gr,"class","svelte-p0yy5r"),S(Ni,"class","div-grey-box svelte-p0yy5r"),re(Ni,"line-height","1.3"),re(Zr,"color","gray"),re(Zr,"font-size","14pt"),S(ti,"class","blocktitle"),re(ti,"margin","0"),re(ti,"width","100%"),S(wt,"class","row"),re(wt,"display","flex"),re(wt,"cursor","pointer"),S(wt,"data-bs-toggle","collapse"),S(wt,"data-bs-target","#pop-info"),S(wt,"aria-expanded","false"),S(wt,"aria-controls","pop-info"),S(Kr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Kr,"class","svelte-p0yy5r"),S(kr,"class","card card-body svelte-p0yy5r"),S(ri,"class","collapse svelte-p0yy5r"),S(ri,"id","pop-info"),S(Cr,"class","text-big"),re(Cr,"font-size","2.8em"),S(_r,"class","div-grey-box svelte-p0yy5r"),re(wa,"color","gray"),re(wa,"font-size","14pt"),S(Pi,"class","blocktitle"),re(Pi,"margin","0"),re(Pi,"width","100%"),S(vn,"class","row"),re(vn,"display","flex"),re(vn,"cursor","pointer"),S(vn,"data-bs-toggle","collapse"),S(vn,"data-bs-target","#households-info"),S(vn,"aria-expanded","false"),S(vn,"aria-controls","households-info"),S(sa,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(sa,"class","svelte-p0yy5r"),S(Qi,"class","card card-body svelte-p0yy5r"),S(Qn,"class","collapse svelte-p0yy5r"),S(Qn,"id","households-info"),S(G,"class","text-big"),re(G,"font-size","2.8em"),S(ci,"class","div-grey-box svelte-p0yy5r"),S(Fi,"id","grid"),S(Fi,"class","grid mt svelte-p0yy5r"),S(Ue,"class","svelte-p0yy5r"),re(Ie,"grid-column","span "+u[7]),S(Le,"id","map"),re(Le,"padding-right","45px"),re(Le,"grid-column","span "+(u[7]==2?2:u[7]&&u[7]>2?u[7]-1:1)),S(Le,"class","svelte-p0yy5r"),S(ne,"class","grid mt svelte-p0yy5r"),yl(()=>u[33].call(ne)),S(Ht,"class","accordion-button-title"),S(Rt,"class","accordion-button collapsed"),S(Rt,"type","button"),S(Rt,"data-bs-toggle","collapse"),S(Rt,"data-bs-target","#panelsStayOpen-collapseZero"),S(Rt,"aria-expanded","false"),S(Rt,"aria-controls","panelsStayOpen-collapseZero"),S(ir,"class","accordion-header svelte-p0yy5r"),S(ir,"id","panelsStayOpen-headingZero"),S(Sa,"class","accordion-button-title-sub"),re(qr,"color","gray"),re(qr,"font-size","14pt"),S($n,"class","blocktitle"),re($n,"margin","0"),re($n,"width","100%"),S(ur,"class","row"),re(ur,"display","flex"),re(ur,"cursor","pointer"),S(ur,"data-bs-toggle","collapse"),S(ur,"data-bs-target","#location-info"),S(ur,"aria-expanded","false"),S(ur,"aria-controls","location-info"),S(Pn,"class","card card-body svelte-p0yy5r"),S(Ci,"class","collapse svelte-p0yy5r"),S(Ci,"id","location-info"),S(Ei,"class","div-grey-box svelte-p0yy5r"),re(Ei,"line-height","1.3"),re(Nn,"color","gray"),re(Nn,"font-size","14pt"),S(pi,"class","blocktitle"),re(pi,"margin","0"),re(pi,"width","100%"),S(qi,"class","row"),re(qi,"display","flex"),re(qi,"cursor","pointer"),S(qi,"data-bs-toggle","collapse"),S(qi,"data-bs-target","#Area-info"),S(qi,"aria-expanded","false"),S(qi,"aria-controls","Area-info"),S(Vo,"class","card card-body svelte-p0yy5r"),S(is,"class","collapse svelte-p0yy5r"),S(is,"id","Area-info"),S(Fo,"class","text-big"),re(Fo,"font-size","2.8em"),S(Nr,"class","div-grey-box svelte-p0yy5r"),re(fi,"color","gray"),re(fi,"font-size","14pt"),S(Ia,"class","blocktitle"),re(Ia,"margin","0"),re(Ia,"width","100%"),S(oi,"class","row"),re(oi,"display","flex"),re(oi,"cursor","pointer"),S(oi,"data-bs-toggle","collapse"),S(oi,"data-bs-target","#popden-info"),S(oi,"aria-expanded","false"),S(oi,"aria-controls","popden-info"),S(gn,"class","card card-body svelte-p0yy5r"),S(Dn,"class","collapse svelte-p0yy5r"),S(Dn,"id","popden-info"),S(eo,"class","text-big"),re(eo,"font-size","2.8em"),S(Cn,"class","div-grey-box svelte-p0yy5r"),S(zn,"class","grid mt svelte-p0yy5r"),yl(()=>u[34].call(zn)),S(sr,"class","accordion-body"),S(nr,"id","panelsStayOpen-collapseZero"),S(nr,"class","accordion-collapse collapse svelte-p0yy5r"),S(nr,"aria-labelledby","panelsStayOpen-headingZero"),S(Ut,"class","accordion-item"),S(as,"class","accordion-button-title"),S(xo,"class","accordion-button collapsed"),S(xo,"type","button"),S(xo,"data-bs-toggle","collapse"),S(xo,"data-bs-target","#panelsStayOpen-collapseOne"),S(xo,"aria-expanded","false"),S(xo,"aria-controls","panelsStayOpen-collapseOne"),S(jl,"class","accordion-header svelte-p0yy5r"),S(jl,"id","panelsStayOpen-headingOne"),S(Un,"class","accordion-button-title-sub"),re(jo,"color","gray"),re(jo,"font-size","14pt"),S(os,"class","blocktitle"),re(os,"margin","0"),re(os,"width","100%"),S(qo,"class","row"),re(qo,"display","flex"),re(qo,"cursor","pointer"),S(qo,"data-bs-toggle","collapse"),S(qo,"data-bs-target","#broadagebands-info"),S(qo,"aria-expanded","false"),S(qo,"aria-controls","broadagebands-info"),S(ta,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ta,"class","svelte-p0yy5r"),S($s,"class","card card-body svelte-p0yy5r"),S(ss,"class","collapse svelte-p0yy5r"),S(ss,"id","broadagebands-info"),S(ro,"class","chart svelte-p0yy5r"),re(ro,"height","100px"),re(ro,"padding-bottom","5px"),S(Si,"class","div-grey-box svelte-p0yy5r"),S(Sr,"class","blocktitle"),re(Sr,"margin","0"),re(Sr,"width","100%"),S(ko,"class","div-grey-box svelte-p0yy5r"),re(ia,"color","gray"),re(ia,"font-size","14pt"),S(Gn,"class","blocktitle"),re(Gn,"margin","0"),re(Gn,"width","100%"),S(Di,"class","row"),re(Di,"display","flex"),re(Di,"cursor","pointer"),S(Di,"data-bs-toggle","collapse"),S(Di,"data-bs-target","#hhsize-info"),S(Di,"aria-expanded","false"),S(Di,"aria-controls","hhsize-info"),S(_n,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(_n,"class","svelte-p0yy5r"),S(el,"class","card card-body svelte-p0yy5r"),S(hs,"class","collapse svelte-p0yy5r"),S(hs,"id","hhsize-info"),S(cs,"class","div-grey-box svelte-p0yy5r"),S(jn,"class","grid mt svelte-p0yy5r"),yl(()=>u[35].call(jn)),S(Wr,"class","accordion-body"),S(to,"id","panelsStayOpen-collapseOne"),S(to,"class","accordion-collapse collapse svelte-p0yy5r"),S(to,"aria-labelledby","panelsStayOpen-headingOne"),S(Ha,"class","accordion-item"),S(Ye,"class","accordion"),S(Ye,"id","accordionPanelsStayOpenExample")},m(me,gt){ze(me,h,gt),E(h,f),E(f,y),E(y,v),E(v,_),o.m(A,y),E(y,z),Io.m(y,null),E(y,F),E(f,V),E(f,j),E(f,q),E(q,he),E(f,ke),E(f,Ee),E(Ee,Be),no.m(Ee,null),E(Ee,Fe),cn&&cn.m(Ee,null),E(Ee,Ft),Pa.m(Ee,null),E(h,Ct),E(h,mt),E(mt,et),E(et,vr),E(vr,pr),E(et,lr),Qt(bt,et,null),E(et,kt),E(et,Rr),E(Rr,Nt),E(et,dr),E(et,it),E(it,rr),E(rr,wr),E(it,Vr),E(it,zr),E(zr,ft),E(it,nt),E(it,gr),E(gr,on),ze(me,In,gt),ze(me,Fi,gt),E(Fi,Ni),E(Ni,Gr),E(Gr,Ra),E(Ni,Er),Wa.m(Ni,null),E(Ni,Wi),di&&di.m(Ni,null),E(Fi,$a),E(Fi,_r),E(_r,wt),E(wt,ti),E(ti,Yi),E(ti,Zr),Zr.innerHTML=rs,E(_r,er),E(_r,ri),E(ri,kr),E(kr,bi),E(kr,Kr),E(Kr,Pr),E(Pr,xi),E(_r,yn),E(_r,Cr),E(Cr,Fr),E(_r,Ji),E(_r,sn),mi&&mi.m(_r,null),E(_r,ln),It&&It.m(_r,null),E(Fi,Ga),E(Fi,ci),E(ci,vn),E(vn,Pi),E(Pi,Tn),E(Pi,wa),wa.innerHTML=Bo,E(ci,_o),E(ci,Qn),E(Qn,Qi),E(Qi,Ea),E(Qi,sa),E(sa,wi),E(wi,xr),E(ci,N),E(ci,G),E(G,$),E(ci,se),E(ci,ve),qt&&qt.m(ci,null),E(ci,be),yr&&yr.m(ci,null),ze(me,H,gt),ze(me,ne,gt),E(ne,Ie),E(Ie,Ue),oo.m(Ue,null),E(ne,Ge),E(ne,Le),Qt(Ne,Le,null),E(ne,tt),E(ne,Ce),Hn.m(Ce,null),E(ne,$e),E(ne,We),Ao.m(We,null),Je=vl(ne,u[33].bind(ne)),ze(me,Kt,gt),ze(me,Ye,gt),E(Ye,Ut),E(Ut,ir),E(ir,Rt),E(Rt,Ht),E(Ht,Xt),E(Ut,Ui),E(Ut,nr),E(nr,sr),E(sr,mr),E(sr,jt),E(sr,ii),E(sr,Sa),E(Sa,Hr),E(sr,An),E(sr,zn),E(zn,Ei),E(Ei,ur),E(ur,$n),E($n,hi),E($n,qr),qr.innerHTML=la,E(Ei,Br),E(Ei,Ci),E(Ci,Pn),E(Pn,Xs),E(Ei,ni),E(Ei,ka),Zi.m(Ei,null),E(zn,ai),E(zn,Nr),E(Nr,qi),E(qi,pi),E(pi,ua),E(pi,Nn),Nn.innerHTML=yc,E(Nr,Oo),E(Nr,is),E(is,Vo),E(Vo,Ws),E(Nr,Ys),E(Nr,Fo),E(Fo,Ba),E(Fo,ea),E(zn,bo),E(zn,Cn),E(Cn,oi),E(oi,Ia),E(Ia,Ae),E(Ia,fi),fi.innerHTML=$i,E(Cn,Xr),E(Cn,Dn),E(Dn,gn),E(gn,ji),E(Cn,Js),E(Cn,eo),E(eo,No),E(Cn,Ka),Ii&&Ii.m(Cn,null),ns=vl(zn,u[34].bind(zn)),E(Ye,gu),E(Ye,Ha),E(Ha,jl),E(jl,xo),E(xo,as),E(as,Uo),E(Ha,xl),E(Ha,to),E(to,Wr),E(Wr,_u),E(Wr,Ta),E(Wr,Ls),E(Wr,Un),E(Un,qn),E(Wr,Oa),E(Wr,jn),E(jn,Si),E(Si,qo),E(qo,os),E(os,Ir),E(os,jo),jo.innerHTML=ju,E(Si,Qs),E(Si,ss),E(ss,$s),E($s,Zu),E($s,ta),E(ta,Zo),E(Zo,ls),E(Si,us),E(Si,ro),Qt(ra,ro,null),E(Si,Eo),Jr&&Jr.m(Si,null),E(Si,bu),E(Si,Go),Qt(Zn,Go,null),E(jn,So),E(jn,ko),E(ko,Sr),E(Sr,wl),E(ko,vc),Qt(Aa,ko,null),E(jn,Gu),E(jn,cs),E(cs,Di),E(Di,Gn),E(Gn,ca),E(Gn,ia),ia.innerHTML=Ku,E(cs,Ko),E(cs,hs),E(hs,el),E(el,tl),E(el,_n),E(_n,ps),E(ps,Hu),E(cs,rl),Qt(za,cs,null),Zl=vl(jn,u[35].bind(jn)),E(Ye,Gl),bn[Kn].m(Ye,null),Mn=!0},p(me,gt){io===(io=Xa(me))&&Io?Io.p(me,gt):(Io.d(1),Io=io(me),Io&&(Io.c(),Io.m(y,F))),(!Mn||gt[0]&2)&&pe!==(pe=me[1].name+"")&&pt(he,pe),xu===(xu=El(me))&&no?no.p(me,gt):(no.d(1),no=xu(me),no&&(no.c(),no.m(Ee,Fe))),me[1].type!="ni"?cn?cn.p(me,gt):(cn=ox(me),cn.c(),cn.m(Ee,Ft)):cn&&(cn.d(1),cn=null),nl===(nl=il(me))&&Pa?Pa.p(me,gt):(Pa.d(1),Pa=nl(me),Pa&&(Pa.c(),Pa.m(Ee,null)));const ha={};gt[0]&1&&(ha.search_data=me[0]),bt.$set(ha),gt[0]&128&&mn(et,"float-right",me[7]>1),Yr===(Yr=fs(me))&&Wa?Wa.p(me,gt):(Wa.d(1),Wa=Yr(me),Wa&&(Wa.c(),Wa.m(Ni,Wi))),me[6]?di?di.p(me,gt):(di=sx(me),di.c(),di.m(Ni,null)):di&&(di.d(1),di=null),(!Mn||gt[0]&2)&&br!==(br=me[1].data.population.value[2021].all.toLocaleString()+"")&&pt(Fr,br),me[1].type!="ni"?mi?(mi.p(me,gt),gt[0]&2&&rt(mi,1)):(mi=lx(me),mi.c(),rt(mi,1),mi.m(_r,ln)):mi&&(Uu(),ht(mi,1,1,()=>{mi=null}),qu()),me[6]&&me[4]?It?(It.p(me,gt),gt[0]&80&&rt(It,1)):(It=hx(me),It.c(),rt(It,1),It.m(_r,null)):It&&(Uu(),ht(It,1,1,()=>{It=null}),qu()),(!Mn||gt[0]&2)&&X!==(X=me[1].data.households.value[2021].all_households.toLocaleString()+"")&&pt($,X),me[1].type!="ni"&me[11]?qt?(qt.p(me,gt),gt[0]&2050&&rt(qt,1)):(qt=px(me),qt.c(),rt(qt,1),qt.m(ci,be)):qt&&(Uu(),ht(qt,1,1,()=>{qt=null}),qu()),me[6]&&me[4]?yr?(yr.p(me,gt),gt[0]&80&&rt(yr,1)):(yr=fx(me),yr.c(),rt(yr,1),yr.m(ci,null)):yr&&(Uu(),ht(yr,1,1,()=>{yr=null}),qu()),ao===(ao=Kl(me))&&oo?oo.p(me,gt):(oo.d(1),oo=ao(me),oo&&(oo.c(),oo.m(Ue,null))),(!Mn||gt[0]&128)&&re(Ie,"grid-column","span "+me[7]);const pa={};gt[0]&2&&(pa.location={bounds:me[1].bounds}),gt[0]&1536|gt[2]&1&&(pa.$$scope={dirty:gt,ctx:me}),!ct&&gt[0]&256&&(ct=!0,pa.map=me[8],z2(()=>ct=!1)),Ne.$set(pa),(!Mn||gt[0]&128)&&re(Le,"grid-column","span "+(me[7]==2?2:me[7]&&me[7]>2?me[7]-1:1)),To===(To=ds(me))&&Hn?Hn.p(me,gt):(Hn.d(1),Hn=To(me),Hn&&(Hn.c(),Hn.m(Ce,null))),ms===(ms=ki(me))&&Ao?Ao.p(me,gt):(Ao.d(1),Ao=ms(me),Ao&&(Ao.c(),Ao.m(We,null))),(!Mn||gt[0]&2)&&Ot!==(Ot=me[1].name+"")&&pt(jt,Ot),at===(at=en(me))&&Zi?Zi.p(me,gt):(Zi.d(1),Zi=at(me),Zi&&(Zi.c(),Zi.m(Ei,null))),(!Mn||gt[0]&2)&&un!==(un=(me[1].hectares>=.1?me[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&pt(Ba,un),(!Mn||gt[0]&2)&&vu!==(vu=(me[1].data.population.value[2021].all/me[1].hectares>=.1?(me[1].data.population.value[2021].all/me[1].hectares).toFixed(1):"<0.1")+"")&&pt(No,vu),me[1].type!="ni"&&me[11]?Ii?Ii.p(me,gt):(Ii=vx(me),Ii.c(),Ii.m(Cn,null)):Ii&&(Ii.d(1),Ii=null),(!Mn||gt[0]&2)&&wo!==(wo=me[1].name+"")&&pt(Ta,wo);const fa={};gt[0]&2&&(fa.data=me[1]&&me[14](["age"])),gt[0]&4096&&(fa.zKey=me[12]),ra.$set(fa),me[11]&&me[13]||me[4]&&me[13]&&me[6]?Jr?Jr.p(me,gt):(Jr=gx(me),Jr.c(),Jr.m(Si,bu)):Jr&&(Jr.d(1),Jr=null);const tn={};gt[0]&2&&(tn.data=me[1]&&me[14](["age"])),gt[0]&4096&&(tn.zKey=me[12]),Zn.$set(tn);const da={};gt[0]&2&&(da.data=me[1]&&me[14](["sex"])),gt[0]&4096&&(da.zKey=me[12]),gt[0]&8192&&(da.label=me[13]),Aa.$set(da);const ys={};gt[0]&2&&(ys.data=me[1]&&me[14](["hh_size"])),gt[0]&4096&&(ys.zKey=me[12]),gt[0]&8192&&(ys.label=me[13]),za.$set(ys);let Mi=Kn;Kn=al(me),Kn===Mi?bn[Kn].p(me,gt):(Uu(),ht(bn[Mi],1,1,()=>{bn[Mi]=null}),qu(),Va=bn[Kn],Va?Va.p(me,gt):(Va=bn[Kn]=Xn[Kn](me),Va.c()),rt(Va,1),Va.m(Ye,null))},i(me){Mn||(rt(bt.$$.fragment,me),rt(mi),rt(It),rt(qt),rt(yr),rt(Ne.$$.fragment,me),rt(ra.$$.fragment,me),rt(Zn.$$.fragment,me),rt(Aa.$$.fragment,me),rt(za.$$.fragment,me),rt(Va),Mn=!0)},o(me){ht(bt.$$.fragment,me),ht(mi),ht(It),ht(qt),ht(yr),ht(Ne.$$.fragment,me),ht(ra.$$.fragment,me),ht(Zn.$$.fragment,me),ht(Aa.$$.fragment,me),ht(za.$$.fragment,me),ht(Va),Mn=!1},d(me){me&&T(h),Io.d(),no.d(),cn&&cn.d(),Pa.d(),$t(bt),me&&T(In),me&&T(Fi),Wa.d(),di&&di.d(),mi&&mi.d(),It&&It.d(),qt&&qt.d(),yr&&yr.d(),me&&T(H),me&&T(ne),oo.d(),$t(Ne),Hn.d(),Ao.d(),Je(),me&&T(Kt),me&&T(Ye),Zi.d(),Ii&&Ii.d(),ns(),$t(ra),Jr&&Jr.d(),$t(Zn),$t(Aa),$t(za),Zl(),bn[Kn].d()}}}function US(u){let h=u[1].name+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,v){ze(y,f,v)},p(y,v){v[0]&2&&h!==(h=y[1].name+"")&&pt(f,h)},d(y){y&&T(f)}}}function qS(u){let h,f=u[1].name+"",y,v=[...u[1].parents].reverse(),_=[];for(let o=0;o<v.length;o+=1)_[o]=ax(ix(u,v,o));return{c(){for(let o=0;o<_.length;o+=1)_[o].c();h=xe(),y=ee(f)},l(o){for(let A=0;A<_.length;A+=1)_[A].l(o);h=we(o),y=te(o,f)},m(o,A){for(let z=0;z<_.length;z+=1)_[z].m(o,A);ze(o,h,A),ze(o,y,A)},p(o,A){if(A[0]&2){v=[...o[1].parents].reverse();let z;for(z=0;z<v.length;z+=1){const F=ix(o,v,z);_[z]?_[z].p(F,A):(_[z]=ax(F),_[z].c(),_[z].m(h.parentNode,h))}for(;z<_.length;z+=1)_[z].d(1);_.length=v.length}A[0]&2&&f!==(f=o[1].name+"")&&pt(y,f)},d(o){Hc(_,o),o&&T(h),o&&T(y)}}}function ax(u){let h,f=u[56].name+"",y,v,_,o=" &gt; ",A;return{c(){h=D("a"),y=ee(f),_=new zg(!1),A=La(),this.h()},l(z){h=M(z,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var F=R(h);y=te(F,f),F.forEach(T),_=Pg(z,!1),A=La(),this.h()},h(){S(h,"href",v=Mh+"/"+u[56].code+"/"),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r"),_.a=A},m(z,F){ze(z,h,F),E(h,y),_.m(o,z,F),ze(z,A,F)},p(z,F){F[0]&2&&f!==(f=z[56].name+"")&&pt(y,f),F[0]&2&&v!==(v=Mh+"/"+z[56].code+"/")&&S(h,"href",v)},d(z){z&&T(h),z&&T(A),z&&_.d()}}}function jS(u){let h,f,y,v;return{c(){h=D("button"),f=ee("No comparison"),this.h()},l(_){h=M(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"No comparison"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),mn(h,"btn-active",u[5])},m(_,o){ze(_,h,o),E(h,f),y||(v=[Fn(h,"click",u[20]),Fn(h,"click",u[21]),Fn(h,"click",u[22])],y=!0)},p(_,o){o[0]&32&&mn(h,"btn-active",_[5])},d(_){_&&T(h),y=!1,Kc(v)}}}function ZS(u){let h,f,y,v;return{c(){h=D("button"),f=ee("No comparison"),this.h()},l(_){h=M(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"No comparison"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),mn(h,"btn-active",!u[4])},m(_,o){ze(_,h,o),E(h,f),y||(v=[Fn(h,"click",u[17]),Fn(h,"click",u[18]),Fn(h,"click",u[19])],y=!0)},p(_,o){o[0]&16&&mn(h,"btn-active",!_[4])},d(_){_&&T(h),y=!1,Kc(v)}}}function ox(u){let h,f,y,v;return{c(){h=D("button"),f=ee("NI 2021"),this.h()},l(_){h=M(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"NI 2021"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),mn(h,"btn-active",u[11]&!u[5]&!u[4])},m(_,o){ze(_,h,o),E(h,f),y||(v=[Fn(h,"click",u[23]),Fn(h,"click",u[24]),Fn(h,"click",u[25])],y=!0)},p(_,o){o[0]&2096&&mn(h,"btn-active",_[11]&!_[5]&!_[4])},d(_){_&&T(h),y=!1,Kc(v)}}}function GS(u){let h,f,y,v;return{c(){h=D("button"),f=ee("2011 data not available"),this.h()},l(_){h=M(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"2011 data not available"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),mn(h,"btn-active",u[4]&!u[5]&!u[11])},m(_,o){ze(_,h,o),E(h,f),y||(v=[Fn(h,"click",u[29]),Fn(h,"click",u[30]),Fn(h,"click",u[31])],y=!0)},p(_,o){o[0]&2096&&mn(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&T(h),y=!1,Kc(v)}}}function KS(u){let h,f,y,v;return{c(){h=D("button"),f=ee("Same area 2011"),this.h()},l(_){h=M(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"Same area 2011"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),mn(h,"btn-active",u[4]&!u[5]&!u[11])},m(_,o){ze(_,h,o),E(h,f),y||(v=[Fn(h,"click",u[26]),Fn(h,"click",u[27]),Fn(h,"click",u[28])],y=!0)},p(_,o){o[0]&2096&&mn(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&T(h),y=!1,Kc(v)}}}function HS(u){let h,f=u[1].name+"",y,v,_=u[1].data.population.value[2021].all.toLocaleString()+"",o,A,z;function F(q,pe){return q[1].data.population.value_rank[2021].all==1?QS:q[1].data.population.value_rank[2021].all==q[1].count?JS:q[1].data.population.value_rank[2021].all<=(q[1].count+1)/2&&q[1].data.population.value_rank[2021].all!=1?YS:WS}let V=F(u),j=V(u);return{c(){h=ee("The population of "),y=ee(f),v=ee(" was "),o=ee(_),A=ee(` at the time of the 2021 Census, which\r
					made it the\r
					`),j.c(),z=La()},l(q){h=te(q,"The population of "),y=te(q,f),v=te(q," was "),o=te(q,_),A=te(q,` at the time of the 2021 Census, which\r
					made it the\r
					`),j.l(q),z=La()},m(q,pe){ze(q,h,pe),ze(q,y,pe),ze(q,v,pe),ze(q,o,pe),ze(q,A,pe),j.m(q,pe),ze(q,z,pe)},p(q,pe){pe[0]&2&&f!==(f=q[1].name+"")&&pt(y,f),pe[0]&2&&_!==(_=q[1].data.population.value[2021].all.toLocaleString()+"")&&pt(o,_),V===(V=F(q))&&j?j.p(q,pe):(j.d(1),j=V(q),j&&(j.c(),j.m(z.parentNode,z)))},d(q){q&&T(h),q&&T(y),q&&T(v),q&&T(o),q&&T(A),j.d(q),q&&T(z)}}}function XS(u){let h,f=u[1].name+"",y,v,_=u[1].data.population.value[2021].all.toLocaleString()+"",o,A;return{c(){h=ee("The population of "),y=ee(f),v=ee(" was "),o=ee(_),A=ee(" at the time of the 2021 Census.")},l(z){h=te(z,"The population of "),y=te(z,f),v=te(z," was "),o=te(z,_),A=te(z," at the time of the 2021 Census.")},m(z,F){ze(z,h,F),ze(z,y,F),ze(z,v,F),ze(z,o,F),ze(z,A,F)},p(z,F){F[0]&2&&f!==(f=z[1].name+"")&&pt(y,f),F[0]&2&&_!==(_=z[1].data.population.value[2021].all.toLocaleString()+"")&&pt(o,_)},d(z){z&&T(h),z&&T(y),z&&T(v),z&&T(o),z&&T(A)}}}function WS(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=jp(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",v,_,o=xa[u[1].type].name+"",A,z;return{c(){f=ee(h),v=ee(y),_=ee(" smallest "),A=ee(o),z=ee(".")},l(F){f=te(F,h),v=te(F,y),_=te(F," smallest "),A=te(F,o),z=te(F,".")},m(F,V){ze(F,f,V),ze(F,v,V),ze(F,_,V),ze(F,A,V),ze(F,z,V)},p(F,V){V[0]&2&&h!==(h=(F[1].count+1-F[1].data.population.value_rank[2021].all).toLocaleString()+"")&&pt(f,h),V[0]&2&&y!==(y=jp(F[1].count+1-F[1].data.population.value_rank[2021].all)+"")&&pt(v,y),V[0]&2&&o!==(o=xa[F[1].type].name+"")&&pt(A,o)},d(F){F&&T(f),F&&T(v),F&&T(_),F&&T(A),F&&T(z)}}}function YS(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=jp(u[1].data.population.value_rank[2021].all)+"",v,_,o=xa[u[1].type].name+"",A,z;return{c(){f=ee(h),v=ee(y),_=ee(" largest "),A=ee(o),z=ee(".")},l(F){f=te(F,h),v=te(F,y),_=te(F," largest "),A=te(F,o),z=te(F,".")},m(F,V){ze(F,f,V),ze(F,v,V),ze(F,_,V),ze(F,A,V),ze(F,z,V)},p(F,V){V[0]&2&&h!==(h=F[1].data.population.value_rank[2021].all.toLocaleString()+"")&&pt(f,h),V[0]&2&&y!==(y=jp(F[1].data.population.value_rank[2021].all)+"")&&pt(v,y),V[0]&2&&o!==(o=xa[F[1].type].name+"")&&pt(A,o)},d(F){F&&T(f),F&&T(v),F&&T(_),F&&T(A),F&&T(z)}}}function JS(u){let h,f=xa[u[1].type].name+"",y,v;return{c(){h=ee("smallest "),y=ee(f),v=ee(".")},l(_){h=te(_,"smallest "),y=te(_,f),v=te(_,".")},m(_,o){ze(_,h,o),ze(_,y,o),ze(_,v,o)},p(_,o){o[0]&2&&f!==(f=xa[_[1].type].name+"")&&pt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(v)}}}function QS(u){let h,f=xa[u[1].type].name+"",y,v;return{c(){h=ee("largest "),y=ee(f),v=ee(".")},l(_){h=te(_,"largest "),y=te(_,f),v=te(_,".")},m(_,o){ze(_,h,o),ze(_,y,o),ze(_,v,o)},p(_,o){o[0]&2&&f!==(f=xa[_[1].type].name+"")&&pt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(v)}}}function sx(u){let h;function f(_,o){return _[1].data.population.value.change.all==0?t5:_[1].data.population.value.change.all>0?e5:$S}let y=f(u),v=y(u);return{c(){v.c(),h=La()},l(_){v.l(_),h=La()},m(_,o){v.m(_,o),ze(_,h,o)},p(_,o){y===(y=f(_))&&v?v.p(_,o):(v.d(1),v=y(_),v&&(v.c(),v.m(h.parentNode,h)))},d(_){v.d(_),_&&T(h)}}}function $S(u){let h,f=Zp(u[1].data.population.value.change.all,"%",1)+"",y,v;return{c(){h=ee("A decrease of "),y=ee(f),v=ee(" since the 2011 Census.")},l(_){h=te(_,"A decrease of "),y=te(_,f),v=te(_," since the 2011 Census.")},m(_,o){ze(_,h,o),ze(_,y,o),ze(_,v,o)},p(_,o){o[0]&2&&f!==(f=Zp(_[1].data.population.value.change.all,"%",1)+"")&&pt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(v)}}}function e5(u){let h,f=Zp(u[1].data.population.value.change.all,"%",1)+"",y,v;return{c(){h=ee("An increase of "),y=ee(f),v=ee(" since the 2011 Census.")},l(_){h=te(_,"An increase of "),y=te(_,f),v=te(_," since the 2011 Census.")},m(_,o){ze(_,h,o),ze(_,y,o),ze(_,v,o)},p(_,o){o[0]&2&&f!==(f=Zp(_[1].data.population.value.change.all,"%",1)+"")&&pt(y,f)},d(_){_&&T(h),_&&T(y),_&&T(v)}}}function t5(u){let h;return{c(){h=ee("No change in population since the 2011 Census.")},l(f){h=te(f,"No change in population since the 2011 Census.")},m(f,y){ze(f,h,y)},p:kn,d(f){f&&T(h)}}}function lx(u){let h,f,y=u[1].type!="ctry"&u[11]&!u[4]&&ux(u);return{c(){y&&y.c(),h=La()},l(v){y&&y.l(v),h=La()},m(v,_){y&&y.m(v,_),ze(v,h,_),f=!0},p(v,_){v[1].type!="ctry"&v[11]&!v[4]?y?(y.p(v,_),_[0]&2066&&rt(y,1)):(y=ux(v),y.c(),rt(y,1),y.m(h.parentNode,h)):y&&(Uu(),ht(y,1,1,()=>{y=null}),qu())},i(v){f||(rt(y),f=!0)},o(v){ht(y),f=!1},d(v){y&&y.d(v),v&&T(h)}}}function ux(u){let h,f,y,v,_,o;f=new rv({props:{$$slots:{default:[r5]},$$scope:{ctx:u}}});let A=u[1].type=="lgd"&&cx(u);return{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" of Northern Ireland population"),v=xe(),_=D("div"),A&&A.c(),this.h()},l(z){h=M(z,"SPAN",{class:!0});var F=R(h);Jt(f.$$.fragment,F),y=te(F," of Northern Ireland population"),F.forEach(T),v=we(z),_=M(z,"DIV",{class:!0});var V=R(_);A&&A.l(V),V.forEach(T),this.h()},h(){S(h,"class","text-small "),S(_,"class","text-small ")},m(z,F){ze(z,h,F),Qt(f,h,null),E(h,y),ze(z,v,F),ze(z,_,F),A&&A.m(_,null),o=!0},p(z,F){const V={};F[0]&6|F[2]&1&&(V.$$scope={dirty:F,ctx:z}),f.$set(V),z[1].type=="lgd"?A?A.p(z,F):(A=cx(z),A.c(),A.m(_,null)):A&&(A.d(1),A=null)},i(z){o||(rt(f.$$.fragment,z),o=!0)},o(z){ht(f.$$.fragment,z),o=!1},d(z){z&&T(h),$t(f),z&&T(v),z&&T(_),A&&A.d()}}}function r5(u){let h=(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all>=.001?(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(v){f=te(v,h),y=te(v,"%")},m(v,_){ze(v,f,_),ze(v,y,_)},p(v,_){_[0]&6&&h!==(h=(v[1].data.population.value[2021].all/v[2].data.population.value[2021].all>=.001?(v[1].data.population.value[2021].all/v[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&pt(f,h)},d(v){v&&T(f),v&&T(y)}}}function cx(u){let h,f=u[1].count.toLocaleString()+"",y,v,_=xa[u[1].type].pl+"",o;function A(V,j){return V[1].data.population.value_rank[2021].all==1?o5:V[1].data.population.value_rank[2021].all==V[1].count?a5:V[1].data.population.value_rank[2021].all<=(V[1].count+1)/2&&V[1].data.population.value_rank[2021].all!=1?n5:i5}let z=A(u),F=z(u);return{c(){F.c(),h=ee(`\r
							population of `),y=ee(f),v=xe(),o=ee(_)},l(V){F.l(V),h=te(V,`\r
							population of `),y=te(V,f),v=we(V),o=te(V,_)},m(V,j){F.m(V,j),ze(V,h,j),ze(V,y,j),ze(V,v,j),ze(V,o,j)},p(V,j){z===(z=A(V))&&F?F.p(V,j):(F.d(1),F=z(V),F&&(F.c(),F.m(h.parentNode,h))),j[0]&2&&f!==(f=V[1].count.toLocaleString()+"")&&pt(y,f),j[0]&2&&_!==(_=xa[V[1].type].pl+"")&&pt(o,_)},d(V){F.d(V),V&&T(h),V&&T(y),V&&T(v),V&&T(o)}}}function i5(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=jp(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",v,_;return{c(){f=ee(h),v=ee(y),_=ee(" smallest")},l(o){f=te(o,h),v=te(o,y),_=te(o," smallest")},m(o,A){ze(o,f,A),ze(o,v,A),ze(o,_,A)},p(o,A){A[0]&2&&h!==(h=(o[1].count+1-o[1].data.population.value_rank[2021].all).toLocaleString()+"")&&pt(f,h),A[0]&2&&y!==(y=jp(o[1].count+1-o[1].data.population.value_rank[2021].all)+"")&&pt(v,y)},d(o){o&&T(f),o&&T(v),o&&T(_)}}}function n5(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=jp(u[1].data.population.value_rank[2021].all)+"",v,_;return{c(){f=ee(h),v=ee(y),_=ee(" largest")},l(o){f=te(o,h),v=te(o,y),_=te(o," largest")},m(o,A){ze(o,f,A),ze(o,v,A),ze(o,_,A)},p(o,A){A[0]&2&&h!==(h=o[1].data.population.value_rank[2021].all.toLocaleString()+"")&&pt(f,h),A[0]&2&&y!==(y=jp(o[1].data.population.value_rank[2021].all)+"")&&pt(v,y)},d(o){o&&T(f),o&&T(v),o&&T(_)}}}function a5(u){let h;return{c(){h=ee("The smallest")},l(f){h=te(f,"The smallest")},m(f,y){ze(f,h,y)},p:kn,d(f){f&&T(h)}}}function o5(u){let h;return{c(){h=ee("The largest")},l(f){h=te(f,"The largest")},m(f,y){ze(f,h,y)},p:kn,d(f){f&&T(h)}}}function hx(u){let h,f,y,v;return f=new rv({props:{$$slots:{default:[s5]},$$scope:{ctx:u}}}),{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(_){h=M(_,"SPAN",{class:!0});var o=R(h);Jt(f.$$.fragment,o),y=te(o," since 2011 Census"),o.forEach(T),this.h()},h(){S(h,"class","text-small ")},m(_,o){ze(_,h,o),Qt(f,h,null),E(h,y),v=!0},p(_,o){const A={};o[0]&2|o[2]&1&&(A.$$scope={dirty:o,ctx:_}),f.$set(A)},i(_){v||(rt(f.$$.fragment,_),v=!0)},o(_){ht(f.$$.fragment,_),v=!1},d(_){_&&T(h),$t(f)}}}function s5(u){let h,f=Zp(u[1].data.population.value.change.all,"%",1)+"",y,v;return{c(){h=D("span"),y=ee(f),this.h()},l(_){h=M(_,"SPAN",{class:!0});var o=R(h);y=te(o,f),o.forEach(T),this.h()},h(){S(h,"class",v=Zy(Ky(u[1].data.population.value.change.all))+" svelte-p0yy5r")},m(_,o){ze(_,h,o),E(h,y)},p(_,o){o[0]&2&&f!==(f=Zp(_[1].data.population.value.change.all,"%",1)+"")&&pt(y,f),o[0]&2&&v!==(v=Zy(Ky(_[1].data.population.value.change.all))+" svelte-p0yy5r")&&S(h,"class",v)},d(_){_&&T(h)}}}function px(u){let h,f,y,v;return f=new rv({props:{$$slots:{default:[l5]},$$scope:{ctx:u}}}),{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" of Northern Ireland households"),this.h()},l(_){h=M(_,"SPAN",{class:!0});var o=R(h);Jt(f.$$.fragment,o),y=te(o," of Northern Ireland households"),o.forEach(T),this.h()},h(){S(h,"class","text-small")},m(_,o){ze(_,h,o),Qt(f,h,null),E(h,y),v=!0},p(_,o){const A={};o[0]&6|o[2]&1&&(A.$$scope={dirty:o,ctx:_}),f.$set(A)},i(_){v||(rt(f.$$.fragment,_),v=!0)},o(_){ht(f.$$.fragment,_),v=!1},d(_){_&&T(h),$t(f)}}}function l5(u){let h=(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households>=.001?(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(v){f=te(v,h),y=te(v,"%")},m(v,_){ze(v,f,_),ze(v,y,_)},p(v,_){_[0]&6&&h!==(h=(v[1].data.households.value[2021].all_households/v[2].data.households.value[2021].all_households>=.001?(v[1].data.households.value[2021].all_households/v[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&pt(f,h)},d(v){v&&T(f),v&&T(y)}}}function fx(u){let h,f,y,v;return f=new rv({props:{$$slots:{default:[u5]},$$scope:{ctx:u}}}),{c(){h=D("span"),Yt(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(_){h=M(_,"SPAN",{class:!0});var o=R(h);Jt(f.$$.fragment,o),y=te(o," since 2011 Census"),o.forEach(T),this.h()},h(){S(h,"class","text-small")},m(_,o){ze(_,h,o),Qt(f,h,null),E(h,y),v=!0},p(_,o){const A={};o[0]&2|o[2]&1&&(A.$$scope={dirty:o,ctx:_}),f.$set(A)},i(_){v||(rt(f.$$.fragment,_),v=!0)},o(_){ht(f.$$.fragment,_),v=!1},d(_){_&&T(h),$t(f)}}}function u5(u){let h,f=Zp(u[1].data.households.value.change.all_households,"%",1)+"",y,v;return{c(){h=D("span"),y=ee(f),this.h()},l(_){h=M(_,"SPAN",{class:!0});var o=R(h);y=te(o,f),o.forEach(T),this.h()},h(){S(h,"class",v=Zy(Ky(u[1].data.households.value.change.all_households))+" svelte-p0yy5r")},m(_,o){ze(_,h,o),E(h,y)},p(_,o){o[0]&2&&f!==(f=Zp(_[1].data.households.value.change.all_households,"%",1)+"")&&pt(y,f),o[0]&2&&v!==(v=Zy(Ky(_[1].data.households.value.change.all_households))+" svelte-p0yy5r")&&S(h,"class",v)},d(_){_&&T(h)}}}function c5(u){let h,f,y=u[1].name+"",v;return{c(){h=ee("Explore "),f=D("span"),v=ee(y),this.h()},l(_){h=te(_,"Explore "),f=M(_,"SPAN",{style:!0});var o=R(f);v=te(o,y),o.forEach(T),this.h()},h(){re(f,"color","#93328E")},m(_,o){ze(_,h,o),ze(_,f,o),E(f,v)},p(_,o){o[0]&2&&y!==(y=_[1].name+"")&&pt(v,y)},d(_){_&&T(h),_&&T(f)}}}function h5(u){let h,f,y=u[1].name+"",v,_,o,A,z=xa[u[1].type].name+"",F;return{c(){h=ee("Explore "),f=D("span"),v=ee(y),_=xe(),o=D("span"),A=ee("- "),F=ee(z),this.h()},l(V){h=te(V,"Explore "),f=M(V,"SPAN",{style:!0});var j=R(f);v=te(j,y),j.forEach(T),_=we(V),o=M(V,"SPAN",{style:!0});var q=R(o);A=te(q,"- "),F=te(q,z),q.forEach(T),this.h()},h(){re(f,"color","#93328E"),re(o,"color","#a19e9e")},m(V,j){ze(V,h,j),ze(V,f,j),E(f,v),ze(V,_,j),ze(V,o,j),E(o,A),E(o,F)},p(V,j){j[0]&2&&y!==(y=V[1].name+"")&&pt(v,y),j[0]&2&&z!==(z=xa[V[1].type].name+"")&&pt(F,z)},d(V){V&&T(h),V&&T(f),V&&T(_),V&&T(o)}}}function p5(u){let h,f,y,v,_,o,A;const z=[qp[u[58]],{id:u[58]+"-fill"},{type:"fill"},{isChild:u[10][u[58]]},{click:!0},{selected:u[9].selected},{highlight:!0},{highlighted:u[9].highlighted},{hover:!0},{hovered:u[9].hovered},{layout:{visibility:u[9].type==u[58]||u[9].childType==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?go["fill-self"]:u[9].childType==u[58]?go["fill-child"]:go.fill}];let F={};for(let he=0;he<z.length;he+=1)F=Fy(F,z[he]);h=new gg({props:F}),h.$on("select",u[15]);const V=[qp[u[58]],{id:u[58]+"-bounds"},{type:"line"},{selected:u[9].selected},{highlight:!0},{highlighted:u[9].highlighted},{layout:{visibility:u[9].type==u[58]||u[9].childType==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?go["line-active"]:u[9].childType==u[58]?go["line-child"]:go.line}];let j={};for(let he=0;he<V.length;he+=1)j=Fy(j,V[he]);y=new gg({props:j});const q=[qp[u[58]],{id:u[58]+"-self"},{type:"line"},{selected:u[9].selected},{layout:{visibility:u[9].type==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?go["line-self"]:go.line}];let pe={};for(let he=0;he<q.length;he+=1)pe=Fy(pe,q[he]);return _=new gg({props:pe}),{c(){Yt(h.$$.fragment),f=xe(),Yt(y.$$.fragment),v=xe(),Yt(_.$$.fragment),o=xe()},l(he){Jt(h.$$.fragment,he),f=we(he),Jt(y.$$.fragment,he),v=we(he),Jt(_.$$.fragment,he),o=we(he)},m(he,ke){Qt(h,he,ke),ze(he,f,ke),Qt(y,he,ke),ze(he,v,ke),Qt(_,he,ke),ze(he,o,ke),A=!0},p(he,ke){const Ee=ke[0]&1536?Ny(z,[ke&0&&Uy(qp[he[58]]),z[1],z[2],ke[0]&1024&&{isChild:he[10][he[58]]},z[4],ke[0]&512&&{selected:he[9].selected},z[6],ke[0]&512&&{highlighted:he[9].highlighted},z[8],ke[0]&512&&{hovered:he[9].hovered},ke[0]&512&&{layout:{visibility:he[9].type==he[58]||he[9].childType==he[58]?"visible":"none"}},ke[0]&512&&{paint:he[9].type==he[58]?go["fill-self"]:he[9].childType==he[58]?go["fill-child"]:go.fill}]):{};h.$set(Ee);const Be=ke[0]&512?Ny(V,[ke&0&&Uy(qp[he[58]]),V[1],V[2],ke[0]&512&&{selected:he[9].selected},V[4],ke[0]&512&&{highlighted:he[9].highlighted},ke[0]&512&&{layout:{visibility:he[9].type==he[58]||he[9].childType==he[58]?"visible":"none"}},ke[0]&512&&{paint:he[9].type==he[58]?go["line-active"]:he[9].childType==he[58]?go["line-child"]:go.line}]):{};y.$set(Be);const Fe=ke[0]&512?Ny(q,[ke&0&&Uy(qp[he[58]]),q[1],q[2],ke[0]&512&&{selected:he[9].selected},ke[0]&512&&{layout:{visibility:he[9].type==he[58]?"visible":"none"}},ke[0]&512&&{paint:he[9].type==he[58]?go["line-self"]:go.line}]):{};_.$set(Fe)},i(he){A||(rt(h.$$.fragment,he),rt(y.$$.fragment,he),rt(_.$$.fragment,he),A=!0)},o(he){ht(h.$$.fragment,he),ht(y.$$.fragment,he),ht(_.$$.fragment,he),A=!1},d(he){$t(h,he),he&&T(f),$t(y,he),he&&T(v),$t(_,he),he&&T(o)}}}function dx(u){let h,f;const y=[$1[u[58]]];let v={$$slots:{default:[p5]},$$scope:{ctx:u}};for(let _=0;_<y.length;_+=1)v=Fy(v,y[_]);return h=new Bw({props:v}),{c(){Yt(h.$$.fragment)},l(_){Jt(h.$$.fragment,_)},m(_,o){Qt(h,_,o),f=!0},p(_,o){const A=o&0?Ny(y,[Uy($1[_[58]])]):{};o[0]&1536|o[2]&1&&(A.$$scope={dirty:o,ctx:_}),h.$set(A)},i(_){f||(rt(h.$$.fragment,_),f=!0)},o(_){ht(h.$$.fragment,_),f=!1},d(_){$t(h,_)}}}function f5(u){let h,f,y=["dz","sdz","ward","dea","lgd"],v=[];for(let o=0;o<5;o+=1)v[o]=dx(rx(u,y,o));const _=o=>ht(v[o],1,1,()=>{v[o]=null});return{c(){for(let o=0;o<5;o+=1)v[o].c();h=La()},l(o){for(let A=0;A<5;A+=1)v[A].l(o);h=La()},m(o,A){for(let z=0;z<5;z+=1)v[z].m(o,A);ze(o,h,A),f=!0},p(o,A){if(A[0]&34304){y=["dz","sdz","ward","dea","lgd"];let z;for(z=0;z<5;z+=1){const F=rx(o,y,z);v[z]?(v[z].p(F,A),rt(v[z],1)):(v[z]=dx(F),v[z].c(),rt(v[z],1),v[z].m(h.parentNode,h))}for(Uu(),z=5;z<5;z+=1)_(z);qu()}},i(o){if(!f){for(let A=0;A<5;A+=1)rt(v[A]);f=!0}},o(o){v=v.filter(Boolean);for(let A=0;A<5;A+=1)ht(v[A]);f=!1},d(o){Hc(v,o),o&&T(h)}}}function d5(u){return{c:kn,l:kn,m:kn,p:kn,d:kn}}function m5(u){let h,f,y=u[1].name+"",v,_,o,A,z,F=[...u[1].parents].reverse(),V=[];for(let j=0;j<F.length;j+=1)V[j]=mx(tx(u,F,j));return{c(){h=D("span"),f=ee("Parents of "),v=ee(y),_=xe(),o=D("br"),A=xe(),z=D("span");for(let j=0;j<V.length;j+=1)V[j].c();this.h()},l(j){h=M(j,"SPAN",{class:!0});var q=R(h);f=te(q,"Parents of "),v=te(q,y),_=we(q),q.forEach(T),o=M(j,"BR",{}),A=we(j),z=M(j,"SPAN",{class:!0});var pe=R(z);for(let he=0;he<V.length;he+=1)V[he].l(pe);pe.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(z,"class","text-small")},m(j,q){ze(j,h,q),E(h,f),E(h,v),E(h,_),ze(j,o,q),ze(j,A,q),ze(j,z,q);for(let pe=0;pe<V.length;pe+=1)V[pe].m(z,null)},p(j,q){if(q[0]&2&&y!==(y=j[1].name+"")&&pt(v,y),q[0]&2){F=[...j[1].parents].reverse();let pe;for(pe=0;pe<F.length;pe+=1){const he=tx(j,F,pe);V[pe]?V[pe].p(he,q):(V[pe]=mx(he),V[pe].c(),V[pe].m(z,null))}for(;pe<V.length;pe+=1)V[pe].d(1);V.length=F.length}},d(j){j&&T(h),j&&T(o),j&&T(A),j&&T(z),Hc(V,j)}}}function mx(u){let h,f,y=u[55]>0?"\u21B3 ":"",v,_=u[56].name+"",o,A;return{c(){h=D("span"),f=new zg(!1),v=D("a"),o=ee(_),this.h()},l(z){h=M(z,"SPAN",{style:!0});var F=R(h);f=Pg(F,!1),v=M(F,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var V=R(v);o=te(V,_),V.forEach(T),F.forEach(T),this.h()},h(){f.a=v,S(v,"href",A=Mh+"/"+u[56].code),S(v,"sveltekit:noscroll",""),S(v,"class","svelte-p0yy5r"),re(h,"display","block"),re(h,"margin-left",(u[55]>0?(u[55]-1)*15:0)+"px")},m(z,F){ze(z,h,F),f.m(y,h),E(h,v),E(v,o)},p(z,F){F[0]&2&&_!==(_=z[56].name+"")&&pt(o,_),F[0]&2&&A!==(A=Mh+"/"+z[56].code)&&S(v,"href",A)},d(z){z&&T(h)}}}function y5(u){let h,f,y=u[1].name+"",v,_,o=xa[u[1].type].name+"",A;return{c(){h=D("span"),f=ee("No areas below "),v=ee(y),_=xe(),A=ee(o),this.h()},l(z){h=M(z,"SPAN",{class:!0});var F=R(h);f=te(F,"No areas below "),v=te(F,y),_=we(F),A=te(F,o),F.forEach(T),this.h()},h(){S(h,"class","muted")},m(z,F){ze(z,h,F),E(h,f),E(h,v),E(h,_),E(h,A)},p(z,F){F[0]&2&&y!==(y=z[1].name+"")&&pt(v,y),F[0]&2&&o!==(o=xa[z[1].type].name+"")&&pt(A,o)},d(z){z&&T(h)}}}function v5(u){let h,f=(u[1].children[0]?xa[u[1].children[0].type].pl:"Areas")+"",y,v,_=u[1].name+"",o,A,z,F,V=u[1].children,j=[];for(let q=0;q<V.length;q+=1)j[q]=yx(ex(u,V,q));return{c(){h=D("span"),y=ee(f),v=ee(" within "),o=ee(_),A=D("br"),z=xe(),F=D("span");for(let q=0;q<j.length;q+=1)j[q].c();this.h()},l(q){h=M(q,"SPAN",{class:!0});var pe=R(h);y=te(pe,f),v=te(pe," within "),o=te(pe,_),pe.forEach(T),A=M(q,"BR",{}),z=we(q),F=M(q,"SPAN",{class:!0});var he=R(F);for(let ke=0;ke<j.length;ke+=1)j[ke].l(he);he.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(F,"class","text-small")},m(q,pe){ze(q,h,pe),E(h,y),E(h,v),E(h,o),ze(q,A,pe),ze(q,z,pe),ze(q,F,pe);for(let he=0;he<j.length;he+=1)j[he].m(F,null)},p(q,pe){if(pe[0]&2&&f!==(f=(q[1].children[0]?xa[q[1].children[0].type].pl:"Areas")+"")&&pt(y,f),pe[0]&2&&_!==(_=q[1].name+"")&&pt(o,_),pe[0]&2){V=q[1].children;let he;for(he=0;he<V.length;he+=1){const ke=ex(q,V,he);j[he]?j[he].p(ke,pe):(j[he]=yx(ke),j[he].c(),j[he].m(F,null))}for(;he<j.length;he+=1)j[he].d(1);j.length=V.length}},d(q){q&&T(h),q&&T(A),q&&T(z),q&&T(F),Hc(j,q)}}}function yx(u){let h,f=u[53].name+"",y,v,_=u[55]<u[1].children.length-1?", ":"",o;return{c(){h=D("a"),y=ee(f),o=ee(_),this.h()},l(A){h=M(A,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var z=R(h);y=te(z,f),z.forEach(T),o=te(A,_),this.h()},h(){S(h,"href",v=Mh+"/"+u[53].code),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r")},m(A,z){ze(A,h,z),E(h,y),ze(A,o,z)},p(A,z){z[0]&2&&f!==(f=A[53].name+"")&&pt(y,f),z[0]&2&&v!==(v=Mh+"/"+A[53].code)&&S(h,"href",v),z[0]&2&&_!==(_=A[55]<A[1].children.length-1?", ":"")&&pt(o,_)},d(A){A&&T(h),A&&T(o)}}}function g5(u){let h=u[1].name+"",f,y;return{c(){f=ee(h),y=ee(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(v){f=te(v,h),y=te(v," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(v,_){ze(v,f,_),ze(v,y,_)},p(v,_){_[0]&2&&h!==(h=v[1].name+"")&&pt(f,h)},d(v){v&&T(f),v&&T(y)}}}function _5(u){let h=u[1].name+"",f,y,v=u[1].count.toLocaleString()+"",_,o,A=xa[u[1].type].pl+"",z,F,V=u[1].parents[0].name+"",j,q;return{c(){f=ee(h),y=ee(" is one of "),_=ee(v),o=xe(),z=ee(A),F=ee(`.\r
								 It is located within `),j=ee(V),q=ee(".")},l(pe){f=te(pe,h),y=te(pe," is one of "),_=te(pe,v),o=we(pe),z=te(pe,A),F=te(pe,`.\r
								 It is located within `),j=te(pe,V),q=te(pe,".")},m(pe,he){ze(pe,f,he),ze(pe,y,he),ze(pe,_,he),ze(pe,o,he),ze(pe,z,he),ze(pe,F,he),ze(pe,j,he),ze(pe,q,he)},p(pe,he){he[0]&2&&h!==(h=pe[1].name+"")&&pt(f,h),he[0]&2&&v!==(v=pe[1].count.toLocaleString()+"")&&pt(_,v),he[0]&2&&A!==(A=xa[pe[1].type].pl+"")&&pt(z,A),he[0]&2&&V!==(V=pe[1].parents[0].name+"")&&pt(j,V)},d(pe){pe&&T(f),pe&&T(y),pe&&T(_),pe&&T(o),pe&&T(z),pe&&T(F),pe&&T(j),pe&&T(q)}}}function b5(u){let h=u[1].name+"",f,y,v=u[1].count.toLocaleString()+"",_,o,A=xa[u[1].type].pl+"",z,F,V=u[1].parents[0].name+"",j,q,pe=xa[u[1].parents[0].type].name+"",he,ke;return{c(){f=ee(h),y=ee(" is one of "),_=ee(v),o=xe(),z=ee(A),F=ee(`.  \r
									It is located within `),j=ee(V),q=xe(),he=ee(pe),ke=ee(".")},l(Ee){f=te(Ee,h),y=te(Ee," is one of "),_=te(Ee,v),o=we(Ee),z=te(Ee,A),F=te(Ee,`.  \r
									It is located within `),j=te(Ee,V),q=we(Ee),he=te(Ee,pe),ke=te(Ee,".")},m(Ee,Be){ze(Ee,f,Be),ze(Ee,y,Be),ze(Ee,_,Be),ze(Ee,o,Be),ze(Ee,z,Be),ze(Ee,F,Be),ze(Ee,j,Be),ze(Ee,q,Be),ze(Ee,he,Be),ze(Ee,ke,Be)},p(Ee,Be){Be[0]&2&&h!==(h=Ee[1].name+"")&&pt(f,h),Be[0]&2&&v!==(v=Ee[1].count.toLocaleString()+"")&&pt(_,v),Be[0]&2&&A!==(A=xa[Ee[1].type].pl+"")&&pt(z,A),Be[0]&2&&V!==(V=Ee[1].parents[0].name+"")&&pt(j,V),Be[0]&2&&pe!==(pe=xa[Ee[1].parents[0].type].name+"")&&pt(he,pe)},d(Ee){Ee&&T(f),Ee&&T(y),Ee&&T(_),Ee&&T(o),Ee&&T(z),Ee&&T(F),Ee&&T(j),Ee&&T(q),Ee&&T(he),Ee&&T(ke)}}}function vx(u){let h,f,y,v=u[1].data.population.value[2021].all/u[1].hectares>u[2].data.population.value[2021].all/u[2].hectares*1.1?"Higher than Northern Ireland value of ":u[1].data.population.value[2021].all/u[1].hectares<u[2].data.population.value[2021].all/u[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",_,o,A=(u[2].data.population.value[2021].all/u[2].hectares).toFixed(1)+"",z,F;return{c(){h=D("br"),f=xe(),y=D("span"),_=ee(v),o=xe(),z=ee(A),F=ee(" persons per hectare"),this.h()},l(V){h=M(V,"BR",{}),f=we(V),y=M(V,"SPAN",{class:!0});var j=R(y);_=te(j,v),o=we(j),z=te(j,A),F=te(j," persons per hectare"),j.forEach(T),this.h()},h(){S(y,"class","text-small")},m(V,j){ze(V,h,j),ze(V,f,j),ze(V,y,j),E(y,_),E(y,o),E(y,z),E(y,F)},p(V,j){j[0]&6&&v!==(v=V[1].data.population.value[2021].all/V[1].hectares>V[2].data.population.value[2021].all/V[2].hectares*1.1?"Higher than Northern Ireland value of ":V[1].data.population.value[2021].all/V[1].hectares<V[2].data.population.value[2021].all/V[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&pt(_,v),j[0]&4&&A!==(A=(V[2].data.population.value[2021].all/V[2].hectares).toFixed(1)+"")&&pt(z,A)},d(V){V&&T(h),V&&T(f),V&&T(y)}}}function gx(u){let h,f,y,v,_;return{c(){h=D("div"),f=es("svg"),y=es("rect"),v=xe(),_=ee(u[13]),this.h()},l(o){h=M(o,"DIV",{class:!0});var A=R(h);f=ts(A,"svg",{width:!0,height:!0,style:!0});var z=R(f);y=ts(z,"rect",{width:!0,height:!0,style:!0}),R(y).forEach(T),z.forEach(T),v=we(A),_=te(A,u[13]),A.forEach(T),this.h()},h(){S(y,"width","25"),S(y,"height","4"),re(y,"fill","#CEDC20"),S(f,"width","25"),S(f,"height","4"),re(f,"display","inline-block"),re(f,"margin-bottom","3px"),S(h,"class","text-small muted; ")},m(o,A){ze(o,h,A),E(h,f),E(f,y),E(h,v),E(h,_)},p(o,A){A[0]&8192&&pt(_,o[13])},d(o){o&&T(h)}}}function x5(u){let h,f,y,v,_,o;return{c(){h=D("br"),f=xe(),y=D("div"),v=D("h3"),_=ee("No other topics are available."),o=ee(`\r
				 Further data will be added to this app as it is released.`),this.h()},l(A){h=M(A,"BR",{}),f=we(A),y=M(A,"DIV",{class:!0});var z=R(y);v=M(z,"H3",{style:!0,class:!0});var F=R(v);_=te(F,"No other topics are available."),F.forEach(T),o=te(z,`\r
				 Further data will be added to this app as it is released.`),z.forEach(T),this.h()},h(){re(v,"margin","0 0 10px 0"),re(v,"line-height","1.78"),S(v,"class","svelte-p0yy5r"),S(y,"class","div-grey-box svelte-p0yy5r")},m(A,z){ze(A,h,z),ze(A,f,z),ze(A,y,z),E(y,v),E(v,_),E(y,o)},p:kn,i:kn,o:kn,d(A){A&&T(h),A&&T(f),A&&T(y)}}}function w5(u){let h,f,y,v,_,o,A,z,F,V=u[1].name+"",j,q,pe,he,ke,Ee,Be,Fe,Ft,Ct,mt=" &#x24D8; ",et,vr,pr,lr,bt,kt,Rr,Nt,dr,it,rr,wr,Vr,zr,ft,nt=" &#x24D8; ",gr,on,In,Fi,Ni,Gr,Ra,Er,Wi,$a,_r,wt,ti,Yi,Zr,rs=" &#x24D8; ",er,ri,kr,bi,Kr,Pr,xi,yn,Cr,br,Fr,Ji,sn,ln,Ga,ci,vn,Pi,Tn,wa,Bo=u[1].name+"",_o,Qn,Qi,Ea,sa,wi,xr,N,G,X,$,se=" &#x24D8; ",ve,be,H,ne,Ie,Ue,Ge,Le,Ne,ct,tt,Ce,$e,We,Je,Kt=" &#x24D8; ",Ye,Ut,ir,Rt,Ht,Xt,Ui,nr,sr,mr,Ot,jt,ii,Sa,Hr,An=" &#x24D8; ",zn,Ei,ur,$n,hi,qr,la,Br,Ci,Pn,Xs,ni,ka,ai,Nr,qi,pi,ua,Nn,yc,Oo=u[1].name+"",is,Vo,Ws,Ys,Fo,un,Ba,ea,bo,Cn,oi,Ia=" &#x24D8; ",Ae,fi,$i,Xr,Dn,gn,ji,Js,eo,vu,No,Ka,ns,gu,Ha,jl=" &#x24D8; ",xo,as,Uo,xl,to,Wr,_u,wo,Ta,Ls,Un,qn,Oa,jn,Si,qo=" &#x24D8; ",os,Ir,jo,ju,Qs,ss,$s,Zu,ta,Zo,ls,us,ro,ra,Eo,bu,Go,Zn,So,ko,Sr=u[1].name+"",wl,vc,Aa,Gu,cs,Di,Gn,ca,ia,Ku,Ko,hs=" &#x24D8; ",el,tl,_n,ps,Hu,rl,za,Zl,Gl,Kn,Va,Mn,Xa,io,Io,El,xu=" &#x24D8; ",no,cn,il,nl,Pa,fs,Yr,Wa,di,mi,It,qt,yr,Kl,ao,oo=" &#x24D8; ",Lh,Xc,ds,To,Hn,ki,ms,Ao,en,at,Zi,Ii,Jr,Xn,bn,al,me=" &#x24D8; ",gt,ha,pa,fa,tn,da,ys,Mi,Fa,Wc,Ho,vs,ol,Ln,xn,tr,Xo,yi,vi,Rs,gs=u[1].name+"",so,na,Bs,xt,dt,Qr,Gi,hn,Ki,Wo,Os,gc=" &#x24D8; ",Dr,Hi,lo,sl,ll,zo,Na,Sl,Rn,kl,Ya,Ua,_s,Il,ma,Yc=" &#x24D8; ",uo,aa,Vs,bs,Ca,Hl,Xl,ul,xs,n,s,a,c,m,w,k=" &#x24D8; ",P,B,Z,Y,J,Q,le,oe,ye,ie,fe,_e,Te,Re,De,Ve=" &#x24D8; ",Ze,He,Ke,ut,vt,Et,Tt,hr,ot,Mt,Wt,Vt,zt,Bt,At,Dt,Li,Bn=" &#x24D8; ",qa,wn,gi,En,Da,Ma,Wl,co,Ja,ws,Po,ho,Co,Xu,Tl,Yl=" &#x24D8; ",_c,Do,pn,Al,Es,zl,Or,Yo,oa,wu,Gp,Rh,cp,Fs,Wu,Mo,Eu,Kp,bc,ya,Su,Xf,Hp=u[1].name+"",Wf,dm,hp,Xp,mm,Ss,ku,po,Pl,ym,Bh,nv=" &#x24D8; ",vm,Oh,Vh,gm,xc,Wp,Jc,_m,Xi,pp,Iu,Ns,Jl,Fh,Qc,py=" &#x24D8; ",Nh,wc,Ec,bm,Tu,Yp,Jp,xm,Yu,Qp,Us,fy,Yf,Sc,Uh,Ql,Au,wm,Em,kc,$l,Sm,$p=u[1].name+"",Ic,km,$c,qh,Cl,Dl,Ju,eu,cl,Jf,jh,av=" &#x24D8; ",Im,Zh,eh,fo,Gh,fp,Qf,Tm,Tc,Am,ef,zm,dp,dy,$f,Ml,th,tu,Ac,_i,ed,ks,Is,td,tf=u[1].name+"",rd,Pm,mp,Cm,Dm,Ll,Qu,ru,iu,rh,ih,ov=" &#x24D8; ",Mm,Kh,nh,yp,zu,zc,Ts,ah,Wn,vp,oh,Jo,gp,Lm,id,$u,Pc,Rl,_p,nd,sh,ec,nu,ad,rf=u[1].name+"",nf,od,Hh,sd,Rm,Qo,Pu,Bl,au,ld,tc,ud=" &#x24D8; ",bp,ou,va,Bm,Om,lh,af,cd,of,hd,pd,Vm,Fm,Nm,xp,sf,Um,uh,Xh,$r,Wh,Yh,ch,qm,hh,jm,rc,su,Cc,Zm,ph,my=" &#x24D8; ",fd,fh,ic,Dc,Mc,nc,dd,Yn,ei,md,Cu,Ol,ac,yd,Lc,Jh=" &#x24D8; ",Rc,dh,rn,Qh,qs,mh,wp,lf,Vl,Du,Mu,Fl,Bc,ga,hl,yy=" &#x24D8; ",e,t,i,l,p,d,x,I,C,L,O,U,K,W,ae,ue=" &#x24D8; ",ge,de,Se,Pe,Me,Oe,je,Xe,Qe,St,lt,_t,st,Zt,Lt,yt,cr,Gt,ar,Pt,Tr=u[1].name+"",Ti,fn,Ai,Ri,dn,jr,Bi,nn,an,Qa,Oi,ja=" &#x24D8; ",fr,Ur,Mr,Ar,_a,ba,zi,On,Vn,Lr,mo,Jn,Lo,Sn,As,lu=" &#x24D8; ",yh,Nl,uu,Lu,cu,vh,gh,$h,Ru,Ep,Ul,ep,js,yo,pl,Sp,oc,uf=" &#x24D8; ",tp,sc,Bu,rp,Ou,_h,bh,kp,ql,ip,zs,Ps,fl,cf,xh,Gm=" &#x24D8; ",vd,Oc,np,ap,Vi,Zs,Km,lc,uc,Hm,op,Ro,cc,Gs,Vc,Ip,hf,Fc,Ks,gd,Tp=u[1].name+"",pf,_d,sp,Cs,Ap,dl,vo,hu,hc,Nc,pu,zp=" &#x24D8; ",wh,fu,Eh,bd,Sh,Pp,ff,df,Ds,xd,du,ml,pc,mf,kh,vy=" &#x24D8; ",yf,Ih,Vu,wd,fc,vf,Ed,Xm,Th,Wm,gf,gy,Hs;return dr=new ui({props:{data:u[1]&&u[14](["cob"]),zKey:u[12],label:u[13]}}),Wi=new ui({props:{data:u[1]&&u[14](["passport"]),zKey:u[12],label:u[13]}}),Cr=new ui({props:{data:u[1]&&u[14](["natid"]),zKey:u[12],label:u[13]}}),Ne=new ui({props:{data:u[1]&&u[14](["mainlang"]),zKey:u[12],label:u[13]}}),sr=new ui({props:{data:u[1]&&u[14](["irish"]),zKey:u[12],label:u[13]}}),Ci=new ui({props:{data:u[1]&&u[14](["ulster"]),zKey:u[12],label:u[13]}}),eo=new ui({props:{data:u[1]&&u[14](["religion"]),zKey:u[12],label:u[13]}}),Ta=new ui({props:{data:u[1]&&u[14](["religion_or_religion_brought_up_in"]),zKey:u[12],label:u[13]}}),ta=new ui({props:{data:u[1]&&u[14](["ethnic"]),zKey:u[12],label:u[13]}}),Kn=new ui({props:{data:u[1]&&u[14](["general_health"]),zKey:u[12],label:u[13]}}),di=new ui({props:{data:u[1]&&u[14](["long_term_disability"]),zKey:u[12],label:u[13]}}),at=new ui({props:{data:u[1]&&u[14](["number_of_long_term_health"]),zKey:u[12],label:u[13]}}),Fa=new ui({props:{data:u[1]&&u[14](["provision_care"]),zKey:u[12],label:u[13]}}),Rn=new ui({props:{data:u[1]&&u[14](["accommodation_type"]),zKey:u[12],label:u[13]}}),xs=new ui({props:{data:u[1]&&u[14](["number_of_adaptations"]),zKey:u[12],label:u[13]}}),ye=new ui({props:{data:u[1]&&u[14](["central_heating"]),zKey:u[12],label:u[13]}}),ot=new ui({props:{data:u[1]&&u[14](["renewable_energy"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Ja=new ui({props:{data:u[1]&&u[14](["hh_tenure"]),zKey:u[12],label:u[13]}}),oa=new ui({props:{data:u[1]&&u[14](["car_or_van"]),zKey:u[12],label:u[13]}}),Xi=new ui({props:{data:u[1]&&u[14](["number_of_dependent_children_households"]),zKey:u[12],label:u[13]}}),Yu=new ui({props:{data:u[1]&&u[14](["household_composition_households"]),zKey:u[12],label:u[13]}}),Tc=new ui({props:{data:u[1]&&u[14](["marital_and_civil_partnership_status"]),zKey:u[12],label:u[13]}}),Wn=new ui({props:{data:u[1]&&u[14](["sexual_orientation_by_broad_age_band"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),hh=new ui({props:{data:u[1]&&u[14](["highest_level_of_qualifications"]),zKey:u[12],label:u[13]}}),ei=new ui({props:{data:u[1]&&u[14](["economic_activity"]),zKey:u[12],label:u[13]}}),Vl=new ui({props:{data:u[1]&&u[14](["hours_worked"]),zKey:u[12],label:u[13]}}),C=new ui({props:{data:u[1]&&u[14](["industry_of_employment"]),zKey:u[12],label:u[13]}}),Qe=new ui({props:{data:u[1]&&u[14](["occupation_1_digit"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Vn=new ui({props:{data:u[1]&&u[14](["method_of_travel_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Ru=new ui({props:{data:u[1]&&u[14](["method_of_travel_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),ql=new ui({props:{data:u[1]&&u[14](["distance_travelled_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),uc=new ui({props:{data:u[1]&&u[14](["distance_travelled_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Ds=new ui({props:{data:u[1]&&u[14](["address_one_year_ago"]),zKey:u[12],label:u[13]}}),Th=new ui({props:{data:u[1]&&u[14](["year_of_arrival"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),{c(){h=D("div"),f=D("h2"),y=D("button"),v=D("span"),_=ee("Country of Birth & Nationality"),o=xe(),A=D("div"),z=D("div"),F=ee("Census 2021 - "),j=ee(V),q=ee(" - "),pe=D("span"),he=ee(`Country of birth, Passport(s) held, National identity (person based)\r
\r
					`),ke=D("div"),Ee=D("div"),Be=D("div"),Fe=D("div"),Ft=ee("Country of birth"),Ct=D("span"),et=xe(),vr=D("div"),pr=D("div"),lr=ee("The country in which a person was born. "),bt=D("a"),kt=D("strong"),Rr=ee("Statistical bulletins"),Nt=xe(),Yt(dr.$$.fragment),it=xe(),rr=D("div"),wr=D("div"),Vr=D("div"),zr=ee("Passport(s) held"),ft=D("span"),gr=xe(),on=D("div"),In=D("div"),Fi=ee("Passport or passports that an individual holds. "),Ni=D("a"),Gr=D("strong"),Ra=ee("Statistical bulletins"),Er=xe(),Yt(Wi.$$.fragment),$a=xe(),_r=D("div"),wt=D("div"),ti=D("div"),Yi=ee("National identity (person based)"),Zr=D("span"),er=xe(),ri=D("div"),kr=D("div"),bi=ee(`The nationality or nationalities that the person\r
									identifies with. `),Kr=D("a"),Pr=D("strong"),xi=ee("Statistical bulletins"),yn=xe(),Yt(Cr.$$.fragment),Fr=xe(),Ji=D("div"),sn=D("h2"),ln=D("button"),Ga=D("span"),ci=ee("Language"),vn=xe(),Pi=D("div"),Tn=D("div"),wa=ee("Census 2021 - "),_o=ee(Bo),Qn=ee(" - "),Qi=D("span"),Ea=ee("Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),sa=xe(),wi=D("div"),xr=D("div"),N=D("div"),G=D("div"),X=ee("Main language"),$=D("span"),ve=xe(),be=D("div"),H=D("div"),ne=ee(`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Ie=D("a"),Ue=D("strong"),Ge=ee("Statistical bulletins"),Le=xe(),Yt(Ne.$$.fragment),ct=xe(),tt=D("div"),Ce=D("div"),$e=D("div"),We=ee("Knowledge of Irish"),Je=D("span"),Ye=xe(),Ut=D("div"),ir=D("div"),Rt=ee(`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),Ht=D("a"),Xt=D("strong"),Ui=ee("Statistical bulletins"),nr=xe(),Yt(sr.$$.fragment),mr=xe(),Ot=D("div"),jt=D("div"),ii=D("div"),Sa=ee("Knowledge of Ulster-Scots"),Hr=D("span"),zn=xe(),Ei=D("div"),ur=D("div"),$n=ee(`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),hi=D("a"),qr=D("strong"),la=ee("Statistical bulletins"),Br=xe(),Yt(Ci.$$.fragment),Xs=xe(),ni=D("div"),ka=D("h2"),ai=D("button"),Nr=D("span"),qi=ee("Religion & Ethnicity"),pi=xe(),ua=D("div"),Nn=D("div"),yc=ee("Census 2021 - "),is=ee(Oo),Vo=ee(" - "),Ws=D("span"),Ys=ee("Religion, Religion or religion brought up in, Ethnic group"),Fo=xe(),un=D("div"),Ba=D("div"),ea=D("div"),bo=D("div"),Cn=ee("Religion"),oi=D("span"),Ae=xe(),fi=D("div"),$i=D("div"),Xr=ee(`Religion, religious denomination or body the person\r
									indicated they belong to. `),Dn=D("a"),gn=D("strong"),ji=ee("Statistical bulletins"),Js=xe(),Yt(eo.$$.fragment),vu=xe(),No=D("div"),Ka=D("div"),ns=D("div"),gu=ee("Religion, Religion brought up"),Ha=D("span"),xo=xe(),as=D("div"),Uo=D("div"),xl=ee("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),to=D("a"),Wr=D("strong"),_u=ee("Statistical bulletins"),wo=xe(),Yt(Ta.$$.fragment),Ls=xe(),Un=D("div"),qn=D("div"),Oa=D("div"),jn=ee("Ethnic group"),Si=D("span"),os=xe(),Ir=D("div"),jo=D("div"),ju=ee("Person\u2019s ethnic group as declared in the Census. "),Qs=D("a"),ss=D("strong"),$s=ee("Statistical bulletins"),Zu=xe(),Yt(ta.$$.fragment),ls=xe(),us=D("div"),ro=D("h2"),ra=D("button"),Eo=D("span"),bu=ee("Health & Care"),Go=xe(),Zn=D("div"),So=D("div"),ko=ee("Census 2021 - "),wl=ee(Sr),vc=ee(" - "),Aa=D("span"),Gu=ee("General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),cs=xe(),Di=D("div"),Gn=D("div"),ca=D("div"),ia=D("div"),Ku=ee("General health"),Ko=D("span"),el=D("br"),tl=xe(),_n=D("div"),ps=D("div"),Hu=ee(`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),rl=D("a"),za=D("strong"),Zl=ee("Statistical bulletins"),Gl=xe(),Yt(Kn.$$.fragment),Va=xe(),Mn=D("div"),Xa=D("div"),io=D("div"),Io=ee("Long-term health problem or disability"),El=D("span"),no=xe(),cn=D("div"),il=D("div"),nl=ee("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Pa=D("a"),fs=D("strong"),Yr=ee("Statistical bulletins"),Wa=xe(),Yt(di.$$.fragment),mi=xe(),It=D("div"),qt=D("div"),yr=D("div"),Kl=ee("Long-term health conditions"),ao=D("span"),Lh=D("br"),Xc=xe(),ds=D("div"),To=D("div"),Hn=ee(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),ki=D("a"),ms=D("strong"),Ao=ee("Statistical bulletins"),en=xe(),Yt(at.$$.fragment),Zi=xe(),Ii=D("div"),Jr=D("div"),Xn=D("div"),bn=ee("Unpaid care"),al=D("span"),gt=xe(),ha=D("div"),pa=D("div"),fa=ee(`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),tn=D("a"),da=D("strong"),ys=ee("Statistical bulletins"),Mi=xe(),Yt(Fa.$$.fragment),Ho=xe(),vs=D("div"),ol=D("h2"),Ln=D("button"),xn=D("span"),tr=ee("Housing & Accommodation"),Xo=xe(),yi=D("div"),vi=D("div"),Rs=ee("Census 2021 - "),so=ee(gs),na=ee(" - "),Bs=D("span"),xt=ee("Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),dt=xe(),Qr=D("div"),Gi=D("div"),hn=D("div"),Ki=D("div"),Wo=ee("Accommodation type"),Os=D("span"),Dr=xe(),Hi=D("div"),lo=D("div"),sl=ee("The type of accommodation occupied by a household. "),ll=D("a"),zo=D("strong"),Na=ee("Statistical bulletins"),Sl=xe(),Yt(Rn.$$.fragment),kl=xe(),Ya=D("div"),Ua=D("div"),_s=D("div"),Il=ee("Household adaptations"),ma=D("span"),uo=xe(),aa=D("div"),Vs=D("div"),bs=ee(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Ca=D("a"),Hl=D("strong"),Xl=ee("Statistical bulletins"),ul=xe(),Yt(xs.$$.fragment),n=xe(),s=D("div"),a=D("div"),c=D("div"),m=ee("Central heating"),w=D("span"),P=xe(),B=D("div"),Z=D("div"),Y=ee(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),J=D("a"),Q=D("strong"),le=ee("Statistical bulletins"),oe=xe(),Yt(ye.$$.fragment),ie=xe(),fe=D("div"),_e=D("div"),Te=D("div"),Re=ee("Renewable energy systems"),De=D("span"),Ze=xe(),He=D("div"),Ke=D("div"),ut=ee(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),vt=D("a"),Et=D("strong"),Tt=ee("Statistical bulletins"),hr=xe(),Yt(ot.$$.fragment),Mt=xe(),Wt=D("br"),Vt=xe(),zt=D("div"),Bt=D("div"),At=D("div"),Dt=ee("Household tenure"),Li=D("span"),qa=xe(),wn=D("div"),gi=D("div"),En=ee(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),Da=D("a"),Ma=D("strong"),Wl=ee("Statistical bulletins"),co=xe(),Yt(Ja.$$.fragment),ws=xe(),Po=D("div"),ho=D("div"),Co=D("div"),Xu=ee("Car or van availability"),Tl=D("span"),_c=xe(),Do=D("div"),pn=D("div"),Al=ee(`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),Es=D("a"),zl=D("strong"),Or=ee("Statistical bulletins"),Yo=xe(),Yt(oa.$$.fragment),wu=xe(),Gp=D("br"),cp=xe(),Fs=D("div"),Wu=D("h2"),Mo=D("button"),Eu=D("span"),Kp=ee("Household Structure"),bc=xe(),ya=D("div"),Su=D("div"),Xf=ee("Census 2021 - "),Wf=ee(Hp),dm=ee(" - "),hp=D("span"),Xp=ee("Number of dependent children, Household composition"),mm=xe(),Ss=D("div"),ku=D("div"),po=D("div"),Pl=D("div"),ym=ee("Number of dependent children"),Bh=D("span"),vm=xe(),Oh=D("div"),Vh=D("div"),gm=ee("Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),xc=D("a"),Wp=D("strong"),Jc=ee("Statistical bulletins"),_m=xe(),Yt(Xi.$$.fragment),pp=xe(),Iu=D("div"),Ns=D("div"),Jl=D("div"),Fh=ee("Household composition"),Qc=D("span"),Nh=xe(),wc=D("div"),Ec=D("div"),bm=ee(`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),Tu=D("a"),Yp=D("strong"),Jp=ee("Statistical bulletins"),xm=xe(),Yt(Yu.$$.fragment),Qp=xe(),Us=D("div"),Yf=xe(),Sc=D("div"),Uh=D("h2"),Ql=D("button"),Au=D("span"),wm=ee("Marital & Civil Partnership Status"),Em=xe(),kc=D("div"),$l=D("div"),Sm=ee("Census 2021 - "),Ic=ee($p),km=ee(" - "),$c=D("span"),qh=ee("Marital and civil partnership status"),Cl=xe(),Dl=D("div"),Ju=D("div"),eu=D("div"),cl=D("div"),Jf=ee("Marital and civil partnership status"),jh=D("span"),Im=xe(),Zh=D("div"),eh=D("div"),fo=ee("Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),Gh=D("a"),fp=D("strong"),Qf=ee("Statistical bulletins"),Tm=xe(),Yt(Tc.$$.fragment),Am=xe(),ef=D("div"),zm=xe(),dp=D("div"),$f=xe(),Ml=D("div"),th=D("h2"),tu=D("button"),Ac=D("span"),_i=ee("Sexual Orientation"),ed=xe(),ks=D("div"),Is=D("div"),td=ee("Census 2021 - "),rd=ee(tf),Pm=ee(" - "),mp=D("span"),Cm=ee("Sexual orientation"),Dm=xe(),Ll=D("div"),Qu=D("div"),ru=D("div"),iu=D("div"),rh=ee("Sexual orientation"),ih=D("span"),Mm=xe(),Kh=D("div"),nh=D("div"),yp=ee("Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),zu=D("a"),zc=D("strong"),Ts=ee("Statistical bulletins"),ah=xe(),Yt(Wn.$$.fragment),vp=xe(),oh=D("div"),Jo=xe(),gp=D("div"),id=xe(),$u=D("div"),Pc=D("h2"),Rl=D("button"),_p=D("span"),nd=ee("Labour Market & Qualifications"),sh=xe(),ec=D("div"),nu=D("div"),ad=ee("Census 2021 - "),nf=ee(rf),od=ee(" - "),Hh=D("span"),sd=ee("Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),Rm=xe(),Qo=D("div"),Pu=D("div"),Bl=D("div"),au=D("div"),ld=ee("Highest level of qualifications"),tc=D("span"),bp=xe(),ou=D("div"),va=D("div"),Bm=ee(`The highest level of qualification categories are as follows:\r
										`),Om=D("br"),lh=ee(`\r
                                        \u2022 No qualifications;\r
										`),af=D("br"),cd=ee(`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),of=D("br"),hd=ee(`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),pd=D("br"),Vm=ee(`\r
                                        \u2022 Apprenticeship;\r
										`),Fm=D("br"),Nm=ee(`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),xp=D("br"),sf=ee(`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),Um=D("br"),uh=ee(`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),Xh=D("br"),$r=ee(`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Wh=D("a"),Yh=D("strong"),ch=ee("Statistical bulletins"),qm=xe(),Yt(hh.$$.fragment),jm=xe(),rc=D("div"),su=D("div"),Cc=D("div"),Zm=ee("Economic activity"),ph=D("span"),fd=xe(),fh=D("div"),ic=D("div"),Dc=ee("Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),Mc=D("a"),nc=D("strong"),dd=ee("Statistical bulletins"),Yn=xe(),Yt(ei.$$.fragment),md=xe(),Cu=D("div"),Ol=D("div"),ac=D("div"),yd=ee("Hours worked per week"),Lc=D("span"),Rc=xe(),dh=D("div"),rn=D("div"),Qh=ee("The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),qs=D("a"),mh=D("strong"),wp=ee("Statistical bulletins"),lf=xe(),Yt(Vl.$$.fragment),Du=xe(),Mu=D("div"),Fl=D("div"),Bc=D("div"),ga=ee("Industry of employment"),hl=D("span"),e=xe(),t=D("div"),i=D("div"),l=ee("The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),p=D("a"),d=D("strong"),x=ee("Statistical bulletins"),I=xe(),Yt(C.$$.fragment),L=xe(),O=D("div"),U=D("div"),K=D("div"),W=ee("Occupation"),ae=D("span"),ge=xe(),de=D("div"),Se=D("div"),Pe=ee("The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),Me=D("a"),Oe=D("strong"),je=ee("Statistical bulletins"),Xe=xe(),Yt(Qe.$$.fragment),lt=xe(),_t=D("div"),st=D("h2"),Zt=D("button"),Lt=D("span"),yt=ee("Travel to Work or Study"),cr=xe(),Gt=D("div"),ar=D("div"),Pt=ee("Census 2021 - "),Ti=ee(Tr),fn=ee(" - "),Ai=D("span"),Ri=ee("Method of travel to work or study, Distance to place of work or study"),dn=xe(),jr=D("div"),Bi=D("div"),nn=D("div"),an=D("div"),Qa=ee("Method of travel to work"),Oi=D("span"),fr=xe(),Ur=D("div"),Mr=D("div"),Ar=ee(`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),_a=D("a"),ba=D("strong"),zi=ee("Statistical bulletins"),On=xe(),Yt(Vn.$$.fragment),Lr=xe(),mo=D("div"),Jn=D("div"),Lo=D("div"),Sn=ee("Method of travel to study"),As=D("span"),yh=xe(),Nl=D("div"),uu=D("div"),Lu=ee(`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),cu=D("a"),vh=D("strong"),gh=ee("Statistical bulletins"),$h=xe(),Yt(Ru.$$.fragment),Ep=xe(),Ul=D("div"),ep=xe(),js=D("div"),yo=D("div"),pl=D("div"),Sp=ee("Distance to place of work"),oc=D("span"),tp=xe(),sc=D("div"),Bu=D("div"),rp=ee("The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),Ou=D("a"),_h=D("strong"),bh=ee("Statistical bulletins"),kp=xe(),Yt(ql.$$.fragment),ip=xe(),zs=D("div"),Ps=D("div"),fl=D("div"),cf=ee("Distance to place of study"),xh=D("span"),vd=xe(),Oc=D("div"),np=D("div"),ap=ee("The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),Vi=D("a"),Zs=D("strong"),Km=ee("Statistical bulletins"),lc=xe(),Yt(uc.$$.fragment),op=xe(),Ro=D("div"),cc=D("h2"),Gs=D("button"),Vc=D("span"),Ip=ee("Migration"),hf=xe(),Fc=D("div"),Ks=D("div"),gd=ee("Census 2021 - "),pf=ee(Tp),_d=ee(" - "),sp=D("span"),Cs=ee("Address one year ago, Year of arrival to live in NI"),Ap=xe(),dl=D("div"),vo=D("div"),hu=D("div"),hc=D("div"),Nc=ee("Address one year ago"),pu=D("span"),wh=xe(),fu=D("div"),Eh=D("div"),bd=ee("Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),Sh=D("a"),Pp=D("strong"),ff=ee("Statistical bulletins"),df=xe(),Yt(Ds.$$.fragment),xd=xe(),du=D("div"),ml=D("div"),pc=D("div"),mf=ee("Year of arrival to live in NI"),kh=D("span"),yf=xe(),Ih=D("div"),Vu=D("div"),wd=ee("The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),fc=D("a"),vf=D("strong"),Ed=ee("Statistical bulletins"),Xm=xe(),Yt(Th.$$.fragment),Wm=xe(),gf=D("div"),this.h()},l(ce){h=M(ce,"DIV",{class:!0});var qe=R(h);f=M(qe,"H2",{class:!0,id:!0});var Ms=R(f);y=M(Ms,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var dc=R(y);v=M(dc,"SPAN",{class:!0});var Ah=R(v);_=te(Ah,"Country of Birth & Nationality"),Ah.forEach(T),dc.forEach(T),Ms.forEach(T),o=we(qe),A=M(qe,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Fu=R(A);z=M(Fu,"DIV",{class:!0});var Nu=R(z);F=te(Nu,"Census 2021 - "),j=te(Nu,V),q=te(Nu," - "),pe=M(Nu,"SPAN",{class:!0});var Cp=R(pe);he=te(Cp,`Country of birth, Passport(s) held, National identity (person based)\r
\r
					`),ke=M(Cp,"DIV",{class:!0});var Uc=R(ke);Ee=M(Uc,"DIV",{class:!0});var qc=R(Ee);Be=M(qc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var _f=R(Be);Fe=M(_f,"DIV",{class:!0,style:!0});var Dp=R(Fe);Ft=te(Dp,"Country of birth"),Ct=M(Dp,"SPAN",{style:!0});var Sd=R(Ct);Sd.forEach(T),Dp.forEach(T),_f.forEach(T),et=we(qc),vr=M(qc,"DIV",{class:!0,id:!0});var bf=R(vr);pr=M(bf,"DIV",{class:!0});var Mp=R(pr);lr=te(Mp,"The country in which a person was born. "),bt=M(Mp,"A",{href:!0,class:!0});var xf=R(bt);kt=M(xf,"STRONG",{});var wf=R(kt);Rr=te(wf,"Statistical bulletins"),wf.forEach(T),xf.forEach(T),Mp.forEach(T),bf.forEach(T),Nt=we(qc),Jt(dr.$$.fragment,qc),qc.forEach(T),it=we(Uc),rr=M(Uc,"DIV",{class:!0});var jc=R(rr);wr=M(jc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Ef=R(wr);Vr=M(Ef,"DIV",{class:!0,style:!0});var Lp=R(Vr);zr=te(Lp,"Passport(s) held"),ft=M(Lp,"SPAN",{style:!0});var kd=R(ft);kd.forEach(T),Lp.forEach(T),Ef.forEach(T),gr=we(jc),on=M(jc,"DIV",{class:!0,id:!0});var Sf=R(on);In=M(Sf,"DIV",{class:!0});var Rp=R(In);Fi=te(Rp,"Passport or passports that an individual holds. "),Ni=M(Rp,"A",{href:!0,class:!0});var kf=R(Ni);Gr=M(kf,"STRONG",{});var If=R(Gr);Ra=te(If,"Statistical bulletins"),If.forEach(T),kf.forEach(T),Rp.forEach(T),Sf.forEach(T),Er=we(jc),Jt(Wi.$$.fragment,jc),jc.forEach(T),$a=we(Uc),_r=M(Uc,"DIV",{class:!0});var Zc=R(_r);wt=M(Zc,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Tf=R(wt);ti=M(Tf,"DIV",{class:!0,style:!0});var Bp=R(ti);Yi=te(Bp,"National identity (person based)"),Zr=M(Bp,"SPAN",{style:!0});var Id=R(Zr);Id.forEach(T),Bp.forEach(T),Tf.forEach(T),er=we(Zc),ri=M(Zc,"DIV",{class:!0,id:!0});var Af=R(ri);kr=M(Af,"DIV",{class:!0});var Op=R(kr);bi=te(Op,`The nationality or nationalities that the person\r
									identifies with. `),Kr=M(Op,"A",{href:!0,class:!0});var zf=R(Kr);Pr=M(zf,"STRONG",{});var Pf=R(Pr);xi=te(Pf,"Statistical bulletins"),Pf.forEach(T),zf.forEach(T),Op.forEach(T),Af.forEach(T),yn=we(Zc),Jt(Cr.$$.fragment,Zc),Zc.forEach(T),Uc.forEach(T),Cp.forEach(T),Nu.forEach(T),Fu.forEach(T),qe.forEach(T),Fr=we(ce),Ji=M(ce,"DIV",{class:!0});var lp=R(Ji);sn=M(lp,"H2",{class:!0,id:!0});var Cf=R(sn);ln=M(Cf,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Df=R(ln);Ga=M(Df,"SPAN",{class:!0});var Ug=R(Ga);ci=te(Ug,"Language"),Ug.forEach(T),Df.forEach(T),Cf.forEach(T),vn=we(lp),Pi=M(lp,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var qg=R(Pi);Tn=M(qg,"DIV",{class:!0});var Mf=R(Tn);wa=te(Mf,"Census 2021 - "),_o=te(Mf,Bo),Qn=te(Mf," - "),Qi=M(Mf,"SPAN",{class:!0});var jg=R(Qi);Ea=te(jg,"Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),jg.forEach(T),sa=we(Mf),wi=M(Mf,"DIV",{class:!0});var Td=R(wi);xr=M(Td,"DIV",{class:!0});var Ad=R(xr);N=M(Ad,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Zg=R(N);G=M(Zg,"DIV",{class:!0,style:!0});var sv=R(G);X=te(sv,"Main language"),$=M(sv,"SPAN",{style:!0});var jx=R($);jx.forEach(T),sv.forEach(T),Zg.forEach(T),ve=we(Ad),be=M(Ad,"DIV",{class:!0,id:!0});var Gg=R(be);H=M(Gg,"DIV",{class:!0});var lv=R(H);ne=te(lv,`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Ie=M(lv,"A",{href:!0,class:!0});var Kg=R(Ie);Ue=M(Kg,"STRONG",{});var Hg=R(Ue);Ge=te(Hg,"Statistical bulletins"),Hg.forEach(T),Kg.forEach(T),lv.forEach(T),Gg.forEach(T),Le=we(Ad),Jt(Ne.$$.fragment,Ad),Ad.forEach(T),ct=we(Td),tt=M(Td,"DIV",{class:!0});var zd=R(tt);Ce=M(zd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Xg=R(Ce);$e=M(Xg,"DIV",{class:!0,style:!0});var uv=R($e);We=te(uv,"Knowledge of Irish"),Je=M(uv,"SPAN",{style:!0});var Zx=R(Je);Zx.forEach(T),uv.forEach(T),Xg.forEach(T),Ye=we(zd),Ut=M(zd,"DIV",{class:!0,id:!0});var Wg=R(Ut);ir=M(Wg,"DIV",{class:!0});var cv=R(ir);Rt=te(cv,`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),Ht=M(cv,"A",{href:!0,class:!0});var Yg=R(Ht);Xt=M(Yg,"STRONG",{});var Jg=R(Xt);Ui=te(Jg,"Statistical bulletins"),Jg.forEach(T),Yg.forEach(T),cv.forEach(T),Wg.forEach(T),nr=we(zd),Jt(sr.$$.fragment,zd),zd.forEach(T),mr=we(Td),Ot=M(Td,"DIV",{class:!0});var Pd=R(Ot);jt=M(Pd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Qg=R(jt);ii=M(Qg,"DIV",{class:!0,style:!0});var hv=R(ii);Sa=te(hv,"Knowledge of Ulster-Scots"),Hr=M(hv,"SPAN",{style:!0});var Gx=R(Hr);Gx.forEach(T),hv.forEach(T),Qg.forEach(T),zn=we(Pd),Ei=M(Pd,"DIV",{class:!0,id:!0});var $g=R(Ei);ur=M($g,"DIV",{class:!0});var pv=R(ur);$n=te(pv,`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),hi=M(pv,"A",{href:!0,class:!0});var e_=R(hi);qr=M(e_,"STRONG",{});var t_=R(qr);la=te(t_,"Statistical bulletins"),t_.forEach(T),e_.forEach(T),pv.forEach(T),$g.forEach(T),Br=we(Pd),Jt(Ci.$$.fragment,Pd),Pd.forEach(T),Td.forEach(T),Mf.forEach(T),qg.forEach(T),lp.forEach(T),Xs=we(ce),ni=M(ce,"DIV",{class:!0});var _y=R(ni);ka=M(_y,"H2",{class:!0,id:!0});var r_=R(ka);ai=M(r_,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var i_=R(ai);Nr=M(i_,"SPAN",{class:!0});var n_=R(Nr);qi=te(n_,"Religion & Ethnicity"),n_.forEach(T),i_.forEach(T),r_.forEach(T),pi=we(_y),ua=M(_y,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var a_=R(ua);Nn=M(a_,"DIV",{class:!0});var Lf=R(Nn);yc=te(Lf,"Census 2021 - "),is=te(Lf,Oo),Vo=te(Lf," - "),Ws=M(Lf,"SPAN",{class:!0});var o_=R(Ws);Ys=te(o_,"Religion, Religion or religion brought up in, Ethnic group"),o_.forEach(T),Fo=we(Lf),un=M(Lf,"DIV",{class:!0});var Cd=R(un);Ba=M(Cd,"DIV",{class:!0});var Dd=R(Ba);ea=M(Dd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var s_=R(ea);bo=M(s_,"DIV",{class:!0,style:!0});var fv=R(bo);Cn=te(fv,"Religion"),oi=M(fv,"SPAN",{style:!0});var Kx=R(oi);Kx.forEach(T),fv.forEach(T),s_.forEach(T),Ae=we(Dd),fi=M(Dd,"DIV",{class:!0,id:!0});var l_=R(fi);$i=M(l_,"DIV",{class:!0});var dv=R($i);Xr=te(dv,`Religion, religious denomination or body the person\r
									indicated they belong to. `),Dn=M(dv,"A",{href:!0,class:!0});var u_=R(Dn);gn=M(u_,"STRONG",{});var c_=R(gn);ji=te(c_,"Statistical bulletins"),c_.forEach(T),u_.forEach(T),dv.forEach(T),l_.forEach(T),Js=we(Dd),Jt(eo.$$.fragment,Dd),Dd.forEach(T),vu=we(Cd),No=M(Cd,"DIV",{class:!0});var Md=R(No);Ka=M(Md,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var h_=R(Ka);ns=M(h_,"DIV",{class:!0,style:!0});var mv=R(ns);gu=te(mv,"Religion, Religion brought up"),Ha=M(mv,"SPAN",{style:!0});var Hx=R(Ha);Hx.forEach(T),mv.forEach(T),h_.forEach(T),xo=we(Md),as=M(Md,"DIV",{class:!0,id:!0});var p_=R(as);Uo=M(p_,"DIV",{class:!0});var yv=R(Uo);xl=te(yv,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),to=M(yv,"A",{href:!0,class:!0});var f_=R(to);Wr=M(f_,"STRONG",{});var d_=R(Wr);_u=te(d_,"Statistical bulletins"),d_.forEach(T),f_.forEach(T),yv.forEach(T),p_.forEach(T),wo=we(Md),Jt(Ta.$$.fragment,Md),Md.forEach(T),Ls=we(Cd),Un=M(Cd,"DIV",{class:!0});var Ld=R(Un);qn=M(Ld,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var m_=R(qn);Oa=M(m_,"DIV",{class:!0,style:!0});var vv=R(Oa);jn=te(vv,"Ethnic group"),Si=M(vv,"SPAN",{style:!0});var Xx=R(Si);Xx.forEach(T),vv.forEach(T),m_.forEach(T),os=we(Ld),Ir=M(Ld,"DIV",{class:!0,id:!0});var y_=R(Ir);jo=M(y_,"DIV",{class:!0});var gv=R(jo);ju=te(gv,"Person\u2019s ethnic group as declared in the Census. "),Qs=M(gv,"A",{href:!0,class:!0});var v_=R(Qs);ss=M(v_,"STRONG",{});var g_=R(ss);$s=te(g_,"Statistical bulletins"),g_.forEach(T),v_.forEach(T),gv.forEach(T),y_.forEach(T),Zu=we(Ld),Jt(ta.$$.fragment,Ld),Ld.forEach(T),Cd.forEach(T),Lf.forEach(T),a_.forEach(T),_y.forEach(T),ls=we(ce),us=M(ce,"DIV",{class:!0});var by=R(us);ro=M(by,"H2",{class:!0,id:!0});var __=R(ro);ra=M(__,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var b_=R(ra);Eo=M(b_,"SPAN",{class:!0});var x_=R(Eo);bu=te(x_,"Health & Care"),x_.forEach(T),b_.forEach(T),__.forEach(T),Go=we(by),Zn=M(by,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var w_=R(Zn);So=M(w_,"DIV",{class:!0});var Rf=R(So);ko=te(Rf,"Census 2021 - "),wl=te(Rf,Sr),vc=te(Rf," - "),Aa=M(Rf,"SPAN",{class:!0});var E_=R(Aa);Gu=te(E_,"General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),E_.forEach(T),cs=we(Rf),Di=M(Rf,"DIV",{class:!0});var Vp=R(Di);Gn=M(Vp,"DIV",{class:!0});var Rd=R(Gn);ca=M(Rd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var S_=R(ca);ia=M(S_,"DIV",{class:!0,style:!0});var xy=R(ia);Ku=te(xy,"General health"),Ko=M(xy,"SPAN",{style:!0});var Wx=R(Ko);Wx.forEach(T),el=M(xy,"BR",{}),xy.forEach(T),S_.forEach(T),tl=we(Rd),_n=M(Rd,"DIV",{class:!0,id:!0});var k_=R(_n);ps=M(k_,"DIV",{class:!0});var _v=R(ps);Hu=te(_v,`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),rl=M(_v,"A",{href:!0,class:!0});var I_=R(rl);za=M(I_,"STRONG",{});var T_=R(za);Zl=te(T_,"Statistical bulletins"),T_.forEach(T),I_.forEach(T),_v.forEach(T),k_.forEach(T),Gl=we(Rd),Jt(Kn.$$.fragment,Rd),Rd.forEach(T),Va=we(Vp),Mn=M(Vp,"DIV",{class:!0});var Bd=R(Mn);Xa=M(Bd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var A_=R(Xa);io=M(A_,"DIV",{class:!0,style:!0});var bv=R(io);Io=te(bv,"Long-term health problem or disability"),El=M(bv,"SPAN",{style:!0});var Yx=R(El);Yx.forEach(T),bv.forEach(T),A_.forEach(T),no=we(Bd),cn=M(Bd,"DIV",{class:!0,id:!0});var z_=R(cn);il=M(z_,"DIV",{class:!0});var xv=R(il);nl=te(xv,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Pa=M(xv,"A",{href:!0,class:!0});var P_=R(Pa);fs=M(P_,"STRONG",{});var C_=R(fs);Yr=te(C_,"Statistical bulletins"),C_.forEach(T),P_.forEach(T),xv.forEach(T),z_.forEach(T),Wa=we(Bd),Jt(di.$$.fragment,Bd),Bd.forEach(T),mi=we(Vp),It=M(Vp,"DIV",{class:!0});var Od=R(It);qt=M(Od,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var D_=R(qt);yr=M(D_,"DIV",{class:!0,style:!0});var wy=R(yr);Kl=te(wy,"Long-term health conditions"),ao=M(wy,"SPAN",{style:!0});var Jx=R(ao);Jx.forEach(T),Lh=M(wy,"BR",{}),wy.forEach(T),D_.forEach(T),Xc=we(Od),ds=M(Od,"DIV",{class:!0,id:!0});var M_=R(ds);To=M(M_,"DIV",{class:!0});var wv=R(To);Hn=te(wv,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),ki=M(wv,"A",{href:!0,class:!0});var L_=R(ki);ms=M(L_,"STRONG",{});var R_=R(ms);Ao=te(R_,"Statistical bulletins"),R_.forEach(T),L_.forEach(T),wv.forEach(T),M_.forEach(T),en=we(Od),Jt(at.$$.fragment,Od),Od.forEach(T),Zi=we(Vp),Ii=M(Vp,"DIV",{class:!0});var Vd=R(Ii);Jr=M(Vd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var B_=R(Jr);Xn=M(B_,"DIV",{class:!0,style:!0});var Ev=R(Xn);bn=te(Ev,"Unpaid care"),al=M(Ev,"SPAN",{style:!0});var Qx=R(al);Qx.forEach(T),Ev.forEach(T),B_.forEach(T),gt=we(Vd),ha=M(Vd,"DIV",{class:!0,id:!0});var O_=R(ha);pa=M(O_,"DIV",{class:!0});var Sv=R(pa);fa=te(Sv,`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),tn=M(Sv,"A",{href:!0,class:!0});var V_=R(tn);da=M(V_,"STRONG",{});var F_=R(da);ys=te(F_,"Statistical bulletins"),F_.forEach(T),V_.forEach(T),Sv.forEach(T),O_.forEach(T),Mi=we(Vd),Jt(Fa.$$.fragment,Vd),Vd.forEach(T),Vp.forEach(T),Rf.forEach(T),w_.forEach(T),by.forEach(T),Ho=we(ce),vs=M(ce,"DIV",{class:!0});var Ey=R(vs);ol=M(Ey,"H2",{class:!0,id:!0});var N_=R(ol);Ln=M(N_,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var U_=R(Ln);xn=M(U_,"SPAN",{class:!0});var q_=R(xn);tr=te(q_,"Housing & Accommodation"),q_.forEach(T),U_.forEach(T),N_.forEach(T),Xo=we(Ey),yi=M(Ey,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var j_=R(yi);vi=M(j_,"DIV",{class:!0});var Bf=R(vi);Rs=te(Bf,"Census 2021 - "),so=te(Bf,gs),na=te(Bf," - "),Bs=M(Bf,"SPAN",{class:!0});var Z_=R(Bs);xt=te(Z_,"Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),Z_.forEach(T),dt=we(Bf),Qr=M(Bf,"DIV",{class:!0});var mc=R(Qr);Gi=M(mc,"DIV",{class:!0});var Fd=R(Gi);hn=M(Fd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var G_=R(hn);Ki=M(G_,"DIV",{class:!0,style:!0});var kv=R(Ki);Wo=te(kv,"Accommodation type"),Os=M(kv,"SPAN",{style:!0});var $x=R(Os);$x.forEach(T),kv.forEach(T),G_.forEach(T),Dr=we(Fd),Hi=M(Fd,"DIV",{class:!0,id:!0});var K_=R(Hi);lo=M(K_,"DIV",{class:!0});var Iv=R(lo);sl=te(Iv,"The type of accommodation occupied by a household. "),ll=M(Iv,"A",{href:!0,class:!0});var H_=R(ll);zo=M(H_,"STRONG",{});var X_=R(zo);Na=te(X_,"Statistical bulletins"),X_.forEach(T),H_.forEach(T),Iv.forEach(T),K_.forEach(T),Sl=we(Fd),Jt(Rn.$$.fragment,Fd),Fd.forEach(T),kl=we(mc),Ya=M(mc,"DIV",{class:!0});var Nd=R(Ya);Ua=M(Nd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var W_=R(Ua);_s=M(W_,"DIV",{class:!0,style:!0});var Tv=R(_s);Il=te(Tv,"Household adaptations"),ma=M(Tv,"SPAN",{style:!0});var e2=R(ma);e2.forEach(T),Tv.forEach(T),W_.forEach(T),uo=we(Nd),aa=M(Nd,"DIV",{class:!0,id:!0});var Y_=R(aa);Vs=M(Y_,"DIV",{class:!0});var Av=R(Vs);bs=te(Av,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Ca=M(Av,"A",{href:!0,class:!0});var J_=R(Ca);Hl=M(J_,"STRONG",{});var Q_=R(Hl);Xl=te(Q_,"Statistical bulletins"),Q_.forEach(T),J_.forEach(T),Av.forEach(T),Y_.forEach(T),ul=we(Nd),Jt(xs.$$.fragment,Nd),Nd.forEach(T),n=we(mc),s=M(mc,"DIV",{class:!0});var Ud=R(s);a=M(Ud,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var $_=R(a);c=M($_,"DIV",{class:!0,style:!0});var zv=R(c);m=te(zv,"Central heating"),w=M(zv,"SPAN",{style:!0});var t2=R(w);t2.forEach(T),zv.forEach(T),$_.forEach(T),P=we(Ud),B=M(Ud,"DIV",{class:!0,id:!0});var e0=R(B);Z=M(e0,"DIV",{class:!0});var Pv=R(Z);Y=te(Pv,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),J=M(Pv,"A",{href:!0,class:!0});var t0=R(J);Q=M(t0,"STRONG",{});var r0=R(Q);le=te(r0,"Statistical bulletins"),r0.forEach(T),t0.forEach(T),Pv.forEach(T),e0.forEach(T),oe=we(Ud),Jt(ye.$$.fragment,Ud),Ud.forEach(T),ie=we(mc),fe=M(mc,"DIV",{class:!0});var Fp=R(fe);_e=M(Fp,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var i0=R(_e);Te=M(i0,"DIV",{class:!0,style:!0});var Cv=R(Te);Re=te(Cv,"Renewable energy systems"),De=M(Cv,"SPAN",{style:!0});var r2=R(De);r2.forEach(T),Cv.forEach(T),i0.forEach(T),Ze=we(Fp),He=M(Fp,"DIV",{class:!0,id:!0});var n0=R(He);Ke=M(n0,"DIV",{class:!0});var Dv=R(Ke);ut=te(Dv,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),vt=M(Dv,"A",{href:!0,class:!0});var a0=R(vt);Et=M(a0,"STRONG",{});var o0=R(Et);Tt=te(o0,"Statistical bulletins"),o0.forEach(T),a0.forEach(T),Dv.forEach(T),n0.forEach(T),hr=we(Fp),Jt(ot.$$.fragment,Fp),Mt=we(Fp),Wt=M(Fp,"BR",{}),Fp.forEach(T),Vt=we(mc),zt=M(mc,"DIV",{class:!0});var qd=R(zt);Bt=M(qd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var s0=R(Bt);At=M(s0,"DIV",{class:!0,style:!0});var Mv=R(At);Dt=te(Mv,"Household tenure"),Li=M(Mv,"SPAN",{style:!0});var i2=R(Li);i2.forEach(T),Mv.forEach(T),s0.forEach(T),qa=we(qd),wn=M(qd,"DIV",{class:!0,id:!0});var l0=R(wn);gi=M(l0,"DIV",{class:!0});var Lv=R(gi);En=te(Lv,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),Da=M(Lv,"A",{href:!0,class:!0});var u0=R(Da);Ma=M(u0,"STRONG",{});var c0=R(Ma);Wl=te(c0,"Statistical bulletins"),c0.forEach(T),u0.forEach(T),Lv.forEach(T),l0.forEach(T),co=we(qd),Jt(Ja.$$.fragment,qd),qd.forEach(T),ws=we(mc),Po=M(mc,"DIV",{class:!0});var Np=R(Po);ho=M(Np,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var h0=R(ho);Co=M(h0,"DIV",{class:!0,style:!0});var Rv=R(Co);Xu=te(Rv,"Car or van availability"),Tl=M(Rv,"SPAN",{style:!0});var n2=R(Tl);n2.forEach(T),Rv.forEach(T),h0.forEach(T),_c=we(Np),Do=M(Np,"DIV",{class:!0,id:!0});var p0=R(Do);pn=M(p0,"DIV",{class:!0});var Bv=R(pn);Al=te(Bv,`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),Es=M(Bv,"A",{href:!0,class:!0});var f0=R(Es);zl=M(f0,"STRONG",{});var d0=R(zl);Or=te(d0,"Statistical bulletins"),d0.forEach(T),f0.forEach(T),Bv.forEach(T),p0.forEach(T),Yo=we(Np),Jt(oa.$$.fragment,Np),wu=we(Np),Gp=M(Np,"BR",{}),Np.forEach(T),mc.forEach(T),Bf.forEach(T),j_.forEach(T),Ey.forEach(T),cp=we(ce),Fs=M(ce,"DIV",{class:!0});var Sy=R(Fs);Wu=M(Sy,"H2",{class:!0,id:!0});var m0=R(Wu);Mo=M(m0,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var y0=R(Mo);Eu=M(y0,"SPAN",{class:!0});var v0=R(Eu);Kp=te(v0,"Household Structure"),v0.forEach(T),y0.forEach(T),m0.forEach(T),bc=we(Sy),ya=M(Sy,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var g0=R(ya);Su=M(g0,"DIV",{class:!0});var Of=R(Su);Xf=te(Of,"Census 2021 - "),Wf=te(Of,Hp),dm=te(Of," - "),hp=M(Of,"SPAN",{class:!0});var _0=R(hp);Xp=te(_0,"Number of dependent children, Household composition"),_0.forEach(T),mm=we(Of),Ss=M(Of,"DIV",{class:!0});var jd=R(Ss);ku=M(jd,"DIV",{class:!0});var Zd=R(ku);po=M(Zd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var b0=R(po);Pl=M(b0,"DIV",{class:!0,style:!0});var Ov=R(Pl);ym=te(Ov,"Number of dependent children"),Bh=M(Ov,"SPAN",{style:!0});var a2=R(Bh);a2.forEach(T),Ov.forEach(T),b0.forEach(T),vm=we(Zd),Oh=M(Zd,"DIV",{class:!0,id:!0});var x0=R(Oh);Vh=M(x0,"DIV",{class:!0});var Vv=R(Vh);gm=te(Vv,"Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),xc=M(Vv,"A",{href:!0,class:!0});var w0=R(xc);Wp=M(w0,"STRONG",{});var E0=R(Wp);Jc=te(E0,"Statistical bulletins"),E0.forEach(T),w0.forEach(T),Vv.forEach(T),x0.forEach(T),_m=we(Zd),Jt(Xi.$$.fragment,Zd),Zd.forEach(T),pp=we(jd),Iu=M(jd,"DIV",{class:!0});var Gd=R(Iu);Ns=M(Gd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var S0=R(Ns);Jl=M(S0,"DIV",{class:!0,style:!0});var Fv=R(Jl);Fh=te(Fv,"Household composition"),Qc=M(Fv,"SPAN",{style:!0});var o2=R(Qc);o2.forEach(T),Fv.forEach(T),S0.forEach(T),Nh=we(Gd),wc=M(Gd,"DIV",{class:!0,id:!0});var k0=R(wc);Ec=M(k0,"DIV",{class:!0});var Nv=R(Ec);bm=te(Nv,`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),Tu=M(Nv,"A",{href:!0,class:!0});var I0=R(Tu);Yp=M(I0,"STRONG",{});var T0=R(Yp);Jp=te(T0,"Statistical bulletins"),T0.forEach(T),I0.forEach(T),Nv.forEach(T),k0.forEach(T),xm=we(Gd),Jt(Yu.$$.fragment,Gd),Gd.forEach(T),Qp=we(jd),Us=M(jd,"DIV",{class:!0});var s2=R(Us);s2.forEach(T),jd.forEach(T),Of.forEach(T),g0.forEach(T),Sy.forEach(T),Yf=we(ce),Sc=M(ce,"DIV",{class:!0});var ky=R(Sc);Uh=M(ky,"H2",{class:!0,id:!0});var A0=R(Uh);Ql=M(A0,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var z0=R(Ql);Au=M(z0,"SPAN",{class:!0});var P0=R(Au);wm=te(P0,"Marital & Civil Partnership Status"),P0.forEach(T),z0.forEach(T),A0.forEach(T),Em=we(ky),kc=M(ky,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var C0=R(kc);$l=M(C0,"DIV",{class:!0});var Vf=R($l);Sm=te(Vf,"Census 2021 - "),Ic=te(Vf,$p),km=te(Vf," - "),$c=M(Vf,"SPAN",{class:!0});var D0=R($c);qh=te(D0,"Marital and civil partnership status"),D0.forEach(T),Cl=we(Vf),Dl=M(Vf,"DIV",{class:!0});var Kd=R(Dl);Ju=M(Kd,"DIV",{class:!0});var Hd=R(Ju);eu=M(Hd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M0=R(eu);cl=M(M0,"DIV",{class:!0,style:!0});var Uv=R(cl);Jf=te(Uv,"Marital and civil partnership status"),jh=M(Uv,"SPAN",{style:!0});var l2=R(jh);l2.forEach(T),Uv.forEach(T),M0.forEach(T),Im=we(Hd),Zh=M(Hd,"DIV",{class:!0,id:!0});var L0=R(Zh);eh=M(L0,"DIV",{class:!0});var qv=R(eh);fo=te(qv,"Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),Gh=M(qv,"A",{href:!0,class:!0});var R0=R(Gh);fp=M(R0,"STRONG",{});var B0=R(fp);Qf=te(B0,"Statistical bulletins"),B0.forEach(T),R0.forEach(T),qv.forEach(T),L0.forEach(T),Tm=we(Hd),Jt(Tc.$$.fragment,Hd),Hd.forEach(T),Am=we(Kd),ef=M(Kd,"DIV",{class:!0});var u2=R(ef);u2.forEach(T),zm=we(Kd),dp=M(Kd,"DIV",{class:!0});var c2=R(dp);c2.forEach(T),Kd.forEach(T),Vf.forEach(T),C0.forEach(T),ky.forEach(T),$f=we(ce),Ml=M(ce,"DIV",{class:!0});var Iy=R(Ml);th=M(Iy,"H2",{class:!0,id:!0});var O0=R(th);tu=M(O0,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var V0=R(tu);Ac=M(V0,"SPAN",{class:!0});var F0=R(Ac);_i=te(F0,"Sexual Orientation"),F0.forEach(T),V0.forEach(T),O0.forEach(T),ed=we(Iy),ks=M(Iy,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var N0=R(ks);Is=M(N0,"DIV",{class:!0});var Ff=R(Is);td=te(Ff,"Census 2021 - "),rd=te(Ff,tf),Pm=te(Ff," - "),mp=M(Ff,"SPAN",{class:!0});var U0=R(mp);Cm=te(U0,"Sexual orientation"),U0.forEach(T),Dm=we(Ff),Ll=M(Ff,"DIV",{class:!0});var Xd=R(Ll);Qu=M(Xd,"DIV",{class:!0});var Wd=R(Qu);ru=M(Wd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var q0=R(ru);iu=M(q0,"DIV",{class:!0,style:!0});var jv=R(iu);rh=te(jv,"Sexual orientation"),ih=M(jv,"SPAN",{style:!0});var h2=R(ih);h2.forEach(T),jv.forEach(T),q0.forEach(T),Mm=we(Wd),Kh=M(Wd,"DIV",{class:!0,id:!0});var j0=R(Kh);nh=M(j0,"DIV",{class:!0});var Zv=R(nh);yp=te(Zv,"Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),zu=M(Zv,"A",{href:!0,class:!0});var Z0=R(zu);zc=M(Z0,"STRONG",{});var G0=R(zc);Ts=te(G0,"Statistical bulletins"),G0.forEach(T),Z0.forEach(T),Zv.forEach(T),j0.forEach(T),ah=we(Wd),Jt(Wn.$$.fragment,Wd),Wd.forEach(T),vp=we(Xd),oh=M(Xd,"DIV",{class:!0});var p2=R(oh);p2.forEach(T),Jo=we(Xd),gp=M(Xd,"DIV",{class:!0});var f2=R(gp);f2.forEach(T),Xd.forEach(T),Ff.forEach(T),N0.forEach(T),Iy.forEach(T),id=we(ce),$u=M(ce,"DIV",{class:!0});var Ty=R($u);Pc=M(Ty,"H2",{class:!0,id:!0});var K0=R(Pc);Rl=M(K0,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var H0=R(Rl);_p=M(H0,"SPAN",{class:!0});var X0=R(_p);nd=te(X0,"Labour Market & Qualifications"),X0.forEach(T),H0.forEach(T),K0.forEach(T),sh=we(Ty),ec=M(Ty,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var W0=R(ec);nu=M(W0,"DIV",{class:!0});var Nf=R(nu);ad=te(Nf,"Census 2021 - "),nf=te(Nf,rf),od=te(Nf," - "),Hh=M(Nf,"SPAN",{class:!0});var Y0=R(Hh);sd=te(Y0,"Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),Y0.forEach(T),Rm=we(Nf),Qo=M(Nf,"DIV",{class:!0});var zh=R(Qo);Pu=M(zh,"DIV",{class:!0});var Yd=R(Pu);Bl=M(Yd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var J0=R(Bl);au=M(J0,"DIV",{class:!0,style:!0});var Gv=R(au);ld=te(Gv,"Highest level of qualifications"),tc=M(Gv,"SPAN",{style:!0});var d2=R(tc);d2.forEach(T),Gv.forEach(T),J0.forEach(T),bp=we(Yd),ou=M(Yd,"DIV",{class:!0,id:!0});var Q0=R(ou);va=M(Q0,"DIV",{class:!0});var $o=R(va);Bm=te($o,`The highest level of qualification categories are as follows:\r
										`),Om=M($o,"BR",{}),lh=te($o,`\r
                                        \u2022 No qualifications;\r
										`),af=M($o,"BR",{}),cd=te($o,`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),of=M($o,"BR",{}),hd=te($o,`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),pd=M($o,"BR",{}),Vm=te($o,`\r
                                        \u2022 Apprenticeship;\r
										`),Fm=M($o,"BR",{}),Nm=te($o,`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),xp=M($o,"BR",{}),sf=te($o,`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),Um=M($o,"BR",{}),uh=te($o,`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),Xh=M($o,"BR",{}),$r=te($o,`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Wh=M($o,"A",{href:!0,class:!0});var $0=R(Wh);Yh=M($0,"STRONG",{});var e1=R(Yh);ch=te(e1,"Statistical bulletins"),e1.forEach(T),$0.forEach(T),$o.forEach(T),Q0.forEach(T),qm=we(Yd),Jt(hh.$$.fragment,Yd),Yd.forEach(T),jm=we(zh),rc=M(zh,"DIV",{class:!0});var Jd=R(rc);su=M(Jd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var t1=R(su);Cc=M(t1,"DIV",{class:!0,style:!0});var Kv=R(Cc);Zm=te(Kv,"Economic activity"),ph=M(Kv,"SPAN",{style:!0});var m2=R(ph);m2.forEach(T),Kv.forEach(T),t1.forEach(T),fd=we(Jd),fh=M(Jd,"DIV",{class:!0,id:!0});var r1=R(fh);ic=M(r1,"DIV",{class:!0});var Hv=R(ic);Dc=te(Hv,"Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),Mc=M(Hv,"A",{href:!0,class:!0});var i1=R(Mc);nc=M(i1,"STRONG",{});var n1=R(nc);dd=te(n1,"Statistical bulletins"),n1.forEach(T),i1.forEach(T),Hv.forEach(T),r1.forEach(T),Yn=we(Jd),Jt(ei.$$.fragment,Jd),Jd.forEach(T),md=we(zh),Cu=M(zh,"DIV",{class:!0});var Qd=R(Cu);Ol=M(Qd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var a1=R(Ol);ac=M(a1,"DIV",{class:!0,style:!0});var Xv=R(ac);yd=te(Xv,"Hours worked per week"),Lc=M(Xv,"SPAN",{style:!0});var y2=R(Lc);y2.forEach(T),Xv.forEach(T),a1.forEach(T),Rc=we(Qd),dh=M(Qd,"DIV",{class:!0,id:!0});var o1=R(dh);rn=M(o1,"DIV",{class:!0});var Wv=R(rn);Qh=te(Wv,"The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),qs=M(Wv,"A",{href:!0,class:!0});var s1=R(qs);mh=M(s1,"STRONG",{});var l1=R(mh);wp=te(l1,"Statistical bulletins"),l1.forEach(T),s1.forEach(T),Wv.forEach(T),o1.forEach(T),lf=we(Qd),Jt(Vl.$$.fragment,Qd),Qd.forEach(T),Du=we(zh),Mu=M(zh,"DIV",{class:!0});var $d=R(Mu);Fl=M($d,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var u1=R(Fl);Bc=M(u1,"DIV",{class:!0,style:!0});var Yv=R(Bc);ga=te(Yv,"Industry of employment"),hl=M(Yv,"SPAN",{style:!0});var v2=R(hl);v2.forEach(T),Yv.forEach(T),u1.forEach(T),e=we($d),t=M($d,"DIV",{class:!0,id:!0});var c1=R(t);i=M(c1,"DIV",{class:!0});var Jv=R(i);l=te(Jv,"The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),p=M(Jv,"A",{href:!0,class:!0});var h1=R(p);d=M(h1,"STRONG",{});var p1=R(d);x=te(p1,"Statistical bulletins"),p1.forEach(T),h1.forEach(T),Jv.forEach(T),c1.forEach(T),I=we($d),Jt(C.$$.fragment,$d),$d.forEach(T),L=we(zh),O=M(zh,"DIV",{class:!0});var em=R(O);U=M(em,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var f1=R(U);K=M(f1,"DIV",{class:!0,style:!0});var Qv=R(K);W=te(Qv,"Occupation"),ae=M(Qv,"SPAN",{style:!0});var g2=R(ae);g2.forEach(T),Qv.forEach(T),f1.forEach(T),ge=we(em),de=M(em,"DIV",{class:!0,id:!0});var d1=R(de);Se=M(d1,"DIV",{class:!0});var $v=R(Se);Pe=te($v,"The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),Me=M($v,"A",{href:!0,class:!0});var m1=R(Me);Oe=M(m1,"STRONG",{});var y1=R(Oe);je=te(y1,"Statistical bulletins"),y1.forEach(T),m1.forEach(T),$v.forEach(T),d1.forEach(T),Xe=we(em),Jt(Qe.$$.fragment,em),em.forEach(T),zh.forEach(T),Nf.forEach(T),W0.forEach(T),Ty.forEach(T),lt=we(ce),_t=M(ce,"DIV",{class:!0});var Ay=R(_t);st=M(Ay,"H2",{class:!0,id:!0});var v1=R(st);Zt=M(v1,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var g1=R(Zt);Lt=M(g1,"SPAN",{class:!0});var _1=R(Lt);yt=te(_1,"Travel to Work or Study"),_1.forEach(T),g1.forEach(T),v1.forEach(T),cr=we(Ay),Gt=M(Ay,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var b1=R(Gt);ar=M(b1,"DIV",{class:!0});var Uf=R(ar);Pt=te(Uf,"Census 2021 - "),Ti=te(Uf,Tr),fn=te(Uf," - "),Ai=M(Uf,"SPAN",{class:!0});var x1=R(Ai);Ri=te(x1,"Method of travel to work or study, Distance to place of work or study"),x1.forEach(T),dn=we(Uf),jr=M(Uf,"DIV",{class:!0});var Ph=R(jr);Bi=M(Ph,"DIV",{class:!0});var tm=R(Bi);nn=M(tm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var w1=R(nn);an=M(w1,"DIV",{class:!0,style:!0});var eg=R(an);Qa=te(eg,"Method of travel to work"),Oi=M(eg,"SPAN",{style:!0});var _2=R(Oi);_2.forEach(T),eg.forEach(T),w1.forEach(T),fr=we(tm),Ur=M(tm,"DIV",{class:!0,id:!0});var E1=R(Ur);Mr=M(E1,"DIV",{class:!0});var tg=R(Mr);Ar=te(tg,`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),_a=M(tg,"A",{href:!0,class:!0});var S1=R(_a);ba=M(S1,"STRONG",{});var k1=R(ba);zi=te(k1,"Statistical bulletins"),k1.forEach(T),S1.forEach(T),tg.forEach(T),E1.forEach(T),On=we(tm),Jt(Vn.$$.fragment,tm),tm.forEach(T),Lr=we(Ph),mo=M(Ph,"DIV",{class:!0});var rm=R(mo);Jn=M(rm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var I1=R(Jn);Lo=M(I1,"DIV",{class:!0,style:!0});var rg=R(Lo);Sn=te(rg,"Method of travel to study"),As=M(rg,"SPAN",{style:!0});var b2=R(As);b2.forEach(T),rg.forEach(T),I1.forEach(T),yh=we(rm),Nl=M(rm,"DIV",{class:!0,id:!0});var T1=R(Nl);uu=M(T1,"DIV",{class:!0});var ig=R(uu);Lu=te(ig,`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),cu=M(ig,"A",{href:!0,class:!0});var A1=R(cu);vh=M(A1,"STRONG",{});var z1=R(vh);gh=te(z1,"Statistical bulletins"),z1.forEach(T),A1.forEach(T),ig.forEach(T),T1.forEach(T),$h=we(rm),Jt(Ru.$$.fragment,rm),rm.forEach(T),Ep=we(Ph),Ul=M(Ph,"DIV",{class:!0});var x2=R(Ul);x2.forEach(T),ep=we(Ph),js=M(Ph,"DIV",{class:!0});var im=R(js);yo=M(im,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var P1=R(yo);pl=M(P1,"DIV",{class:!0,style:!0});var ng=R(pl);Sp=te(ng,"Distance to place of work"),oc=M(ng,"SPAN",{style:!0});var w2=R(oc);w2.forEach(T),ng.forEach(T),P1.forEach(T),tp=we(im),sc=M(im,"DIV",{class:!0,id:!0});var C1=R(sc);Bu=M(C1,"DIV",{class:!0});var ag=R(Bu);rp=te(ag,"The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),Ou=M(ag,"A",{href:!0,class:!0});var D1=R(Ou);_h=M(D1,"STRONG",{});var M1=R(_h);bh=te(M1,"Statistical bulletins"),M1.forEach(T),D1.forEach(T),ag.forEach(T),C1.forEach(T),kp=we(im),Jt(ql.$$.fragment,im),im.forEach(T),ip=we(Ph),zs=M(Ph,"DIV",{class:!0});var nm=R(zs);Ps=M(nm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var L1=R(Ps);fl=M(L1,"DIV",{class:!0,style:!0});var og=R(fl);cf=te(og,"Distance to place of study"),xh=M(og,"SPAN",{style:!0});var E2=R(xh);E2.forEach(T),og.forEach(T),L1.forEach(T),vd=we(nm),Oc=M(nm,"DIV",{class:!0,id:!0});var R1=R(Oc);np=M(R1,"DIV",{class:!0});var sg=R(np);ap=te(sg,"The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),Vi=M(sg,"A",{href:!0,class:!0});var B1=R(Vi);Zs=M(B1,"STRONG",{});var O1=R(Zs);Km=te(O1,"Statistical bulletins"),O1.forEach(T),B1.forEach(T),sg.forEach(T),R1.forEach(T),lc=we(nm),Jt(uc.$$.fragment,nm),nm.forEach(T),Ph.forEach(T),Uf.forEach(T),b1.forEach(T),Ay.forEach(T),op=we(ce),Ro=M(ce,"DIV",{class:!0});var zy=R(Ro);cc=M(zy,"H2",{class:!0,id:!0});var V1=R(cc);Gs=M(V1,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var F1=R(Gs);Vc=M(F1,"SPAN",{class:!0});var N1=R(Vc);Ip=te(N1,"Migration"),N1.forEach(T),F1.forEach(T),V1.forEach(T),hf=we(zy),Fc=M(zy,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var U1=R(Fc);Ks=M(U1,"DIV",{class:!0});var qf=R(Ks);gd=te(qf,"Census 2021 - "),pf=te(qf,Tp),_d=te(qf," - "),sp=M(qf,"SPAN",{class:!0});var q1=R(sp);Cs=te(q1,"Address one year ago, Year of arrival to live in NI"),q1.forEach(T),Ap=we(qf),dl=M(qf,"DIV",{class:!0});var am=R(dl);vo=M(am,"DIV",{class:!0});var om=R(vo);hu=M(om,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var j1=R(hu);hc=M(j1,"DIV",{class:!0,style:!0});var lg=R(hc);Nc=te(lg,"Address one year ago"),pu=M(lg,"SPAN",{style:!0});var S2=R(pu);S2.forEach(T),lg.forEach(T),j1.forEach(T),wh=we(om),fu=M(om,"DIV",{class:!0,id:!0});var Z1=R(fu);Eh=M(Z1,"DIV",{class:!0});var ug=R(Eh);bd=te(ug,"Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),Sh=M(ug,"A",{href:!0,class:!0});var G1=R(Sh);Pp=M(G1,"STRONG",{});var K1=R(Pp);ff=te(K1,"Statistical bulletins"),K1.forEach(T),G1.forEach(T),ug.forEach(T),Z1.forEach(T),df=we(om),Jt(Ds.$$.fragment,om),om.forEach(T),xd=we(am),du=M(am,"DIV",{class:!0});var sm=R(du);ml=M(sm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var H1=R(ml);pc=M(H1,"DIV",{class:!0,style:!0});var cg=R(pc);mf=te(cg,"Year of arrival to live in NI"),kh=M(cg,"SPAN",{style:!0});var k2=R(kh);k2.forEach(T),cg.forEach(T),H1.forEach(T),yf=we(sm),Ih=M(sm,"DIV",{class:!0,id:!0});var X1=R(Ih);Vu=M(X1,"DIV",{class:!0});var hg=R(Vu);wd=te(hg,"The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),fc=M(hg,"A",{href:!0,class:!0});var W1=R(fc);vf=M(W1,"STRONG",{});var Y1=R(vf);Ed=te(Y1,"Statistical bulletins"),Y1.forEach(T),W1.forEach(T),hg.forEach(T),X1.forEach(T),Xm=we(sm),Jt(Th.$$.fragment,sm),sm.forEach(T),Wm=we(am),gf=M(am,"DIV",{class:!0});var I2=R(gf);I2.forEach(T),am.forEach(T),qf.forEach(T),U1.forEach(T),zy.forEach(T),this.h()},h(){S(v,"class","accordion-button-title"),S(y,"class","accordion-button collapsed"),S(y,"type","button"),S(y,"data-bs-toggle","collapse"),S(y,"data-bs-target","#panelsStayOpen-collapseTwo"),S(y,"aria-expanded","false"),S(y,"aria-controls","panelsStayOpen-collapseTwo"),S(f,"class","accordion-header svelte-p0yy5r"),S(f,"id","panelsStayOpen-headingTwo"),re(Ct,"color","gray"),re(Ct,"font-size","14pt"),S(Fe,"class","blocktitle"),re(Fe,"margin","0"),re(Fe,"width","100%"),S(Be,"class","row"),re(Be,"display","flex"),re(Be,"cursor","pointer"),S(Be,"data-bs-toggle","collapse"),S(Be,"data-bs-target","#cob-info"),S(Be,"aria-expanded","false"),S(Be,"aria-controls","cob-info"),S(bt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(bt,"class","svelte-p0yy5r"),S(pr,"class","card card-body svelte-p0yy5r"),S(vr,"class","collapse svelte-p0yy5r"),S(vr,"id","cob-info"),S(Ee,"class","div-grey-box svelte-p0yy5r"),re(ft,"color","gray"),re(ft,"font-size","14pt"),S(Vr,"class","blocktitle"),re(Vr,"margin","0"),re(Vr,"width","100%"),S(wr,"class","row"),re(wr,"display","flex"),re(wr,"cursor","pointer"),S(wr,"data-bs-toggle","collapse"),S(wr,"data-bs-target","#passport-info"),S(wr,"aria-expanded","false"),S(wr,"aria-controls","passport-info"),S(Ni,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ni,"class","svelte-p0yy5r"),S(In,"class","card card-body svelte-p0yy5r"),S(on,"class","collapse svelte-p0yy5r"),S(on,"id","passport-info"),S(rr,"class","div-grey-box svelte-p0yy5r"),re(Zr,"color","gray"),re(Zr,"font-size","14pt"),S(ti,"class","blocktitle"),re(ti,"font-size","1.02em"),re(ti,"margin","0"),re(ti,"width","100%"),S(wt,"class","row"),re(wt,"display","flex"),re(wt,"cursor","pointer"),S(wt,"data-bs-toggle","collapse"),S(wt,"data-bs-target","#natid-info"),S(wt,"aria-expanded","false"),S(wt,"aria-controls","natid-info"),S(Kr,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Kr,"class","svelte-p0yy5r"),S(kr,"class","card card-body svelte-p0yy5r"),S(ri,"class","collapse svelte-p0yy5r"),S(ri,"id","natid-info"),S(_r,"class","div-grey-box svelte-p0yy5r"),S(ke,"class","grid mt svelte-p0yy5r"),yl(()=>u[36].call(ke)),S(pe,"class","accordion-button-title-sub"),S(z,"class","accordion-body"),S(A,"id","panelsStayOpen-collapseTwo"),S(A,"class","accordion-collapse collapse svelte-p0yy5r"),S(A,"aria-labelledby","panelsStayOpen-headingTwo"),S(h,"class","accordion-item"),S(Ga,"class","accordion-button-title"),S(ln,"class","accordion-button collapsed"),S(ln,"type","button"),S(ln,"data-bs-toggle","collapse"),S(ln,"data-bs-target","#panelsStayOpen-collapseThree"),S(ln,"aria-expanded","false"),S(ln,"aria-controls","panelsStayOpen-collapseThree"),S(sn,"class","accordion-header svelte-p0yy5r"),S(sn,"id","panelsStayOpen-headingThree"),S(Qi,"class","accordion-button-title-sub"),re($,"color","gray"),re($,"font-size","14pt"),S(G,"class","blocktitle"),re(G,"margin","0"),re(G,"width","100%"),S(N,"class","row"),re(N,"display","flex"),re(N,"cursor","pointer"),S(N,"data-bs-toggle","collapse"),S(N,"data-bs-target","#mainlang-info"),S(N,"aria-expanded","false"),S(N,"aria-controls","mainlang-info"),S(Ie,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ie,"class","svelte-p0yy5r"),S(H,"class","card card-body svelte-p0yy5r"),S(be,"class","collapse svelte-p0yy5r"),S(be,"id","mainlang-info"),S(xr,"class","div-grey-box svelte-p0yy5r"),re(Je,"color","gray"),re(Je,"font-size","14pt"),S($e,"class","blocktitle"),re($e,"margin","0"),re($e,"width","100%"),S(Ce,"class","row"),re(Ce,"display","flex"),re(Ce,"cursor","pointer"),S(Ce,"data-bs-toggle","collapse"),S(Ce,"data-bs-target","#irish-info"),S(Ce,"aria-expanded","false"),S(Ce,"aria-controls","irish-info"),S(Ht,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ht,"class","svelte-p0yy5r"),S(ir,"class","card card-body svelte-p0yy5r"),S(Ut,"class","collapse svelte-p0yy5r"),S(Ut,"id","irish-info"),S(tt,"class","div-grey-box svelte-p0yy5r"),re(Hr,"color","gray"),re(Hr,"font-size","14pt"),S(ii,"class","blocktitle"),re(ii,"margin","0"),re(ii,"width","100%"),S(jt,"class","row"),re(jt,"display","flex"),re(jt,"cursor","pointer"),S(jt,"data-bs-toggle","collapse"),S(jt,"data-bs-target","#ulster-info"),S(jt,"aria-expanded","false"),S(jt,"aria-controls","ulster-info"),S(hi,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(hi,"class","svelte-p0yy5r"),S(ur,"class","card card-body svelte-p0yy5r"),S(Ei,"class","collapse svelte-p0yy5r"),S(Ei,"id","ulster-info"),S(Ot,"class","div-grey-box svelte-p0yy5r"),S(wi,"class","grid mt svelte-p0yy5r"),yl(()=>u[37].call(wi)),S(Tn,"class","accordion-body"),S(Pi,"id","panelsStayOpen-collapseThree"),S(Pi,"class","accordion-collapse collapse svelte-p0yy5r"),S(Pi,"aria-labelledby","panelsStayOpen-headingThree"),S(Ji,"class","accordion-item"),S(Nr,"class","accordion-button-title"),S(ai,"class","accordion-button collapsed"),S(ai,"type","button"),S(ai,"data-bs-toggle","collapse"),S(ai,"data-bs-target","#panelsStayOpen-collapseFour"),S(ai,"aria-expanded","false"),S(ai,"aria-controls","panelsStayOpen-collapseFour"),S(ka,"class","accordion-header svelte-p0yy5r"),S(ka,"id","panelsStayOpen-headingFour"),S(Ws,"class","accordion-button-title-sub"),re(oi,"color","gray"),re(oi,"font-size","14pt"),S(bo,"class","blocktitle"),re(bo,"margin","0"),re(bo,"width","100%"),S(ea,"class","row"),re(ea,"display","flex"),re(ea,"cursor","pointer"),S(ea,"data-bs-toggle","collapse"),S(ea,"data-bs-target","#rel-info"),S(ea,"aria-expanded","false"),S(ea,"aria-controls","rel-info"),S(Dn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Dn,"class","svelte-p0yy5r"),S($i,"class","card card-body svelte-p0yy5r"),S(fi,"class","collapse svelte-p0yy5r"),S(fi,"id","rel-info"),S(Ba,"class","div-grey-box svelte-p0yy5r"),re(Ha,"color","gray"),re(Ha,"font-size","14pt"),S(ns,"class","blocktitle"),re(ns,"margin","0"),re(ns,"width","100%"),S(Ka,"class","row"),re(Ka,"display","flex"),re(Ka,"cursor","pointer"),S(Ka,"data-bs-toggle","collapse"),S(Ka,"data-bs-target","#relbup-info"),S(Ka,"aria-expanded","false"),S(Ka,"aria-controls","relbup-info"),S(to,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(to,"class","svelte-p0yy5r"),S(Uo,"class","card card-body svelte-p0yy5r"),S(as,"class","collapse svelte-p0yy5r"),S(as,"id","relbup-info"),S(No,"class","div-grey-box svelte-p0yy5r"),re(Si,"color","gray"),re(Si,"font-size","14pt"),S(Oa,"class","blocktitle"),re(Oa,"margin","0"),re(Oa,"width","100%"),S(qn,"class","row"),re(qn,"display","flex"),re(qn,"cursor","pointer"),S(qn,"data-bs-toggle","collapse"),S(qn,"data-bs-target","#ethnic-info"),S(qn,"aria-expanded","false"),S(qn,"aria-controls","ethnic-info"),S(Qs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Qs,"class","svelte-p0yy5r"),S(jo,"class","card card-body svelte-p0yy5r"),S(Ir,"class","collapse svelte-p0yy5r"),S(Ir,"id","ethnic-info"),S(Un,"class","div-grey-box svelte-p0yy5r"),S(un,"class","grid mt svelte-p0yy5r"),yl(()=>u[38].call(un)),S(Nn,"class","accordion-body"),S(ua,"id","panelsStayOpen-collapseFour"),S(ua,"class","accordion-collapse collapse svelte-p0yy5r"),S(ua,"aria-labelledby","panelsStayOpen-headingFour"),S(ni,"class","accordion-item"),S(Eo,"class","accordion-button-title"),S(ra,"class","accordion-button collapsed"),S(ra,"type","button"),S(ra,"data-bs-toggle","collapse"),S(ra,"data-bs-target","#panelsStayOpen-collapseFive"),S(ra,"aria-expanded","false"),S(ra,"aria-controls","panelsStayOpen-collapseFive"),S(ro,"class","accordion-header svelte-p0yy5r"),S(ro,"id","panelsStayOpen-headingFive"),S(Aa,"class","accordion-button-title-sub"),re(Ko,"color","gray"),re(Ko,"font-size","14pt"),S(ia,"class","blocktitle"),re(ia,"margin","0"),re(ia,"width","100%"),S(ca,"class","row"),re(ca,"display","flex"),re(ca,"cursor","pointer"),S(ca,"data-bs-toggle","collapse"),S(ca,"data-bs-target","#gen-health-info"),S(ca,"aria-expanded","false"),S(ca,"aria-controls","gen-health"),S(rl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(rl,"class","svelte-p0yy5r"),S(ps,"class","card card-body svelte-p0yy5r"),S(_n,"class","collapse svelte-p0yy5r"),S(_n,"id","gen-health-info"),S(Gn,"class","div-grey-box svelte-p0yy5r"),re(El,"color","gray"),re(El,"font-size","14pt"),S(io,"class","blocktitle"),re(io,"font-size","0.87em"),re(io,"margin","0"),re(io,"width","100%"),S(Xa,"class","row"),re(Xa,"display","flex"),re(Xa,"cursor","pointer"),S(Xa,"data-bs-toggle","collapse"),S(Xa,"data-bs-target","#lti-info"),S(Xa,"aria-expanded","false"),S(Xa,"aria-controls","lti-info"),S(Pa,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Pa,"class","svelte-p0yy5r"),S(il,"class","card card-body svelte-p0yy5r"),S(cn,"class","collapse svelte-p0yy5r"),S(cn,"id","lti-info"),S(Mn,"class","div-grey-box svelte-p0yy5r"),re(ao,"color","gray"),re(ao,"font-size","14pt"),S(yr,"class","blocktitle"),re(yr,"font-size","1.02em"),re(yr,"margin","0"),re(yr,"width","100%"),S(qt,"class","row"),re(qt,"display","flex"),re(qt,"cursor","pointer"),S(qt,"data-bs-toggle","collapse"),S(qt,"data-bs-target","#lt-cond-info"),S(qt,"aria-expanded","false"),S(qt,"aria-controls","lt-cond-info"),S(ki,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ki,"class","svelte-p0yy5r"),S(To,"class","card card-body svelte-p0yy5r"),S(ds,"class","collapse svelte-p0yy5r"),S(ds,"id","lt-cond-info"),S(It,"class","div-grey-box svelte-p0yy5r"),re(al,"color","gray"),re(al,"font-size","14pt"),S(Xn,"class","blocktitle"),re(Xn,"font-size","1.02em"),re(Xn,"margin","0"),re(Xn,"width","100%"),S(Jr,"class","row"),re(Jr,"display","flex"),re(Jr,"cursor","pointer"),S(Jr,"data-bs-toggle","collapse"),S(Jr,"data-bs-target","#unpaid-info"),S(Jr,"aria-expanded","false"),S(Jr,"aria-controls","unpaid-info"),S(tn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(tn,"class","svelte-p0yy5r"),S(pa,"class","card card-body svelte-p0yy5r"),S(ha,"class","collapse svelte-p0yy5r"),S(ha,"id","unpaid-info"),S(Ii,"class","div-grey-box svelte-p0yy5r"),S(Di,"class","grid mt svelte-p0yy5r"),yl(()=>u[39].call(Di)),S(So,"class","accordion-body"),S(Zn,"id","panelsStayOpen-collapseFive"),S(Zn,"class","accordion-collapse collapse svelte-p0yy5r"),S(Zn,"aria-labelledby","panelsStayOpen-headingFive"),S(us,"class","accordion-item"),S(xn,"class","accordion-button-title"),S(Ln,"class","accordion-button collapsed"),S(Ln,"type","button"),S(Ln,"data-bs-toggle","collapse"),S(Ln,"data-bs-target","#panelsStayOpen-collapseSix"),S(Ln,"aria-expanded","false"),S(Ln,"aria-controls","panelsStayOpen-collapseSix"),S(ol,"class","accordion-header svelte-p0yy5r"),S(ol,"id","panelsStayOpen-headingSix"),S(Bs,"class","accordion-button-title-sub"),re(Os,"color","gray"),re(Os,"font-size","14pt"),S(Ki,"class","blocktitle"),re(Ki,"margin","0"),re(Ki,"width","100%"),S(hn,"class","row"),re(hn,"display","flex"),re(hn,"cursor","pointer"),S(hn,"data-bs-toggle","collapse"),S(hn,"data-bs-target","#acc-type-info"),S(hn,"aria-expanded","false"),S(hn,"aria-controls","acc-type-info"),S(ll,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ll,"class","svelte-p0yy5r"),S(lo,"class","card card-body svelte-p0yy5r"),S(Hi,"class","collapse svelte-p0yy5r"),S(Hi,"id","acc-type-info"),S(Gi,"class","div-grey-box svelte-p0yy5r"),re(ma,"color","gray"),re(ma,"font-size","14pt"),S(_s,"class","blocktitle"),re(_s,"margin","0"),re(_s,"width","100%"),S(Ua,"class","row"),re(Ua,"display","flex"),re(Ua,"cursor","pointer"),S(Ua,"data-bs-toggle","collapse"),S(Ua,"data-bs-target","#adapt-info"),S(Ua,"aria-expanded","false"),S(Ua,"aria-controls","adapt-info"),S(Ca,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ca,"class","svelte-p0yy5r"),S(Vs,"class","card card-body svelte-p0yy5r"),S(aa,"class","collapse svelte-p0yy5r"),S(aa,"id","adapt-info"),S(Ya,"class","div-grey-box svelte-p0yy5r"),re(w,"color","gray"),re(w,"font-size","14pt"),S(c,"class","blocktitle"),re(c,"margin","0"),re(c,"width","100%"),S(a,"class","row"),re(a,"display","flex"),re(a,"cursor","pointer"),S(a,"data-bs-toggle","collapse"),S(a,"data-bs-target","#heat-info"),S(a,"aria-expanded","false"),S(a,"aria-controls","heat-info"),S(J,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(J,"class","svelte-p0yy5r"),S(Z,"class","card card-body svelte-p0yy5r"),S(B,"class","collapse svelte-p0yy5r"),S(B,"id","heat-info"),S(s,"class","div-grey-box svelte-p0yy5r"),re(De,"color","gray"),re(De,"font-size","14pt"),S(Te,"class","blocktitle"),re(Te,"margin","0"),re(Te,"width","100%"),S(_e,"class","row"),re(_e,"display","flex"),re(_e,"cursor","pointer"),S(_e,"data-bs-toggle","collapse"),S(_e,"data-bs-target","#renew-info"),S(_e,"aria-expanded","false"),S(_e,"aria-controls","renew-info"),S(vt,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(vt,"class","svelte-p0yy5r"),S(Ke,"class","card card-body svelte-p0yy5r"),S(He,"class","collapse svelte-p0yy5r"),S(He,"id","renew-info"),S(fe,"class","div-grey-box svelte-p0yy5r"),re(Li,"color","gray"),re(Li,"font-size","14pt"),S(At,"class","blocktitle"),re(At,"margin","0"),re(At,"width","100%"),S(Bt,"class","row"),re(Bt,"display","flex"),re(Bt,"cursor","pointer"),S(Bt,"data-bs-toggle","collapse"),S(Bt,"data-bs-target","#tenure-info"),S(Bt,"aria-expanded","false"),S(Bt,"aria-controls","tenure-info"),S(Da,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Da,"class","svelte-p0yy5r"),S(gi,"class","card card-body svelte-p0yy5r"),S(wn,"class","collapse svelte-p0yy5r"),S(wn,"id","tenure-info"),S(zt,"class","div-grey-box svelte-p0yy5r"),re(Tl,"color","gray"),re(Tl,"font-size","14pt"),S(Co,"class","blocktitle"),re(Co,"margin","0"),re(Co,"width","100%"),S(ho,"class","row"),re(ho,"display","flex"),re(ho,"cursor","pointer"),S(ho,"data-bs-toggle","collapse"),S(ho,"data-bs-target","#car-info"),S(ho,"aria-expanded","false"),S(ho,"aria-controls","car-info"),S(Es,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Es,"class","svelte-p0yy5r"),S(pn,"class","card card-body svelte-p0yy5r"),S(Do,"class","collapse svelte-p0yy5r"),S(Do,"id","car-info"),S(Po,"class","div-grey-box svelte-p0yy5r"),S(Qr,"class","grid mt svelte-p0yy5r"),yl(()=>u[40].call(Qr)),S(vi,"class","accordion-body"),S(yi,"id","panelsStayOpen-collapseSix"),S(yi,"class","accordion-collapse collapse svelte-p0yy5r"),S(yi,"aria-labelledby","panelsStayOpen-headingSix"),S(vs,"class","accordion-item"),S(Eu,"class","accordion-button-title"),S(Mo,"class","accordion-button collapsed"),S(Mo,"type","button"),S(Mo,"data-bs-toggle","collapse"),S(Mo,"data-bs-target","#panelsStayOpen-collapseSeven"),S(Mo,"aria-expanded","false"),S(Mo,"aria-controls","panelsStayOpen-collapseSeven"),S(Wu,"class","accordion-header svelte-p0yy5r"),S(Wu,"id","panelsStayOpen-headingSeven"),S(hp,"class","accordion-button-title-sub"),re(Bh,"color","gray"),re(Bh,"font-size","14pt"),S(Pl,"class","blocktitle"),re(Pl,"margin","0"),re(Pl,"width","100%"),S(po,"class","row"),re(po,"display","flex"),re(po,"cursor","pointer"),S(po,"data-bs-toggle","collapse"),S(po,"data-bs-target","#dep-child-info"),S(po,"aria-expanded","false"),S(po,"aria-controls","dep-child-info"),S(xc,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(xc,"class","svelte-p0yy5r"),S(Vh,"class","card card-body svelte-p0yy5r"),S(Oh,"class","collapse svelte-p0yy5r"),S(Oh,"id","dep-child-info"),S(ku,"class","div-grey-box svelte-p0yy5r"),re(Qc,"color","gray"),re(Qc,"font-size","14pt"),S(Jl,"class","blocktitle"),re(Jl,"margin","0"),re(Jl,"width","100%"),S(Ns,"class","row"),re(Ns,"display","flex"),re(Ns,"cursor","pointer"),S(Ns,"data-bs-toggle","collapse"),S(Ns,"data-bs-target","#hh-comp-info"),S(Ns,"aria-expanded","false"),S(Ns,"aria-controls","hh-comp-info"),S(Tu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Tu,"class","svelte-p0yy5r"),S(Ec,"class","card card-body svelte-p0yy5r"),S(wc,"class","collapse svelte-p0yy5r"),S(wc,"id","hh-comp-info"),S(Iu,"class","div-grey-box svelte-p0yy5r"),S(Us,"class","div-white-box"),S(Ss,"class","grid mt svelte-p0yy5r"),yl(()=>u[41].call(Ss)),S(Su,"class","accordion-body"),S(ya,"id","panelsStayOpen-collapseSeven"),S(ya,"class","accordion-collapse collapse svelte-p0yy5r"),S(ya,"aria-labelledby","panelsStayOpen-headingSeven"),S(Fs,"class","accordion-item"),S(Au,"class","accordion-button-title"),S(Ql,"class","accordion-button collapsed"),S(Ql,"type","button"),S(Ql,"data-bs-toggle","collapse"),S(Ql,"data-bs-target","#panelsStayOpen-collapseEight"),S(Ql,"aria-expanded","false"),S(Ql,"aria-controls","panelsStayOpen-collapseEight"),S(Uh,"class","accordion-header svelte-p0yy5r"),S(Uh,"id","panelsStayOpen-headingEight"),S($c,"class","accordion-button-title-sub"),re(jh,"color","gray"),re(jh,"font-size","14pt"),S(cl,"class","blocktitle"),re(cl,"font-size","0.95em"),re(cl,"margin","0"),re(cl,"width","100%"),S(eu,"class","row"),re(eu,"display","flex"),re(eu,"cursor","pointer"),S(eu,"data-bs-toggle","collapse"),S(eu,"data-bs-target","#marital-info"),S(eu,"aria-expanded","false"),S(eu,"aria-controls","marital-info"),S(Gh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Gh,"class","svelte-p0yy5r"),S(eh,"class","card card-body svelte-p0yy5r"),S(Zh,"class","collapse svelte-p0yy5r"),S(Zh,"id","marital-info"),S(Ju,"class","div-grey-box svelte-p0yy5r"),S(ef,"class","div-white-box"),S(dp,"class","div-white-box"),S(Dl,"class","grid mt svelte-p0yy5r"),yl(()=>u[42].call(Dl)),S($l,"class","accordion-body"),S(kc,"id","panelsStayOpen-collapseEight"),S(kc,"class","accordion-collapse collapse svelte-p0yy5r"),S(kc,"aria-labelledby","panelsStayOpen-headingEight"),S(Sc,"class","accordion-item"),S(Ac,"class","accordion-button-title"),S(tu,"class","accordion-button collapsed"),S(tu,"type","button"),S(tu,"data-bs-toggle","collapse"),S(tu,"data-bs-target","#panelsStayOpen-collapseNine"),S(tu,"aria-expanded","false"),S(tu,"aria-controls","panelsStayOpen-collapseNine"),S(th,"class","accordion-header svelte-p0yy5r"),S(th,"id","panelsStayOpen-headingNine"),S(mp,"class","accordion-button-title-sub"),re(ih,"color","gray"),re(ih,"font-size","14pt"),S(iu,"class","blocktitle"),re(iu,"margin","0"),re(iu,"width","100%"),S(ru,"class","row"),re(ru,"display","flex"),re(ru,"cursor","pointer"),S(ru,"data-bs-toggle","collapse"),S(ru,"data-bs-target","#sexual-orientation-info"),S(ru,"aria-expanded","false"),S(ru,"aria-controls","sexual-orientation-info"),S(zu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(zu,"class","svelte-p0yy5r"),S(nh,"class","card card-body svelte-p0yy5r"),S(Kh,"class","collapse svelte-p0yy5r"),S(Kh,"id","sexual-orientation-info"),S(Qu,"class","div-grey-box svelte-p0yy5r"),S(oh,"class","div-white-box"),S(gp,"class","div-white-box"),S(Ll,"class","grid mt svelte-p0yy5r"),yl(()=>u[43].call(Ll)),S(Is,"class","accordion-body"),S(ks,"id","panelsStayOpen-collapseNine"),S(ks,"class","accordion-collapse collapse svelte-p0yy5r"),S(ks,"aria-labelledby","panelsStayOpen-headingNine"),S(Ml,"class","accordion-item"),S(_p,"class","accordion-button-title"),S(Rl,"class","accordion-button collapsed"),S(Rl,"type","button"),S(Rl,"data-bs-toggle","collapse"),S(Rl,"data-bs-target","#panelsStayOpen-collapseTen"),S(Rl,"aria-expanded","false"),S(Rl,"aria-controls","panelsStayOpen-collapseTen"),S(Pc,"class","accordion-header svelte-p0yy5r"),S(Pc,"id","panelsStayOpen-headingTen"),S(Hh,"class","accordion-button-title-sub"),re(tc,"color","gray"),re(tc,"font-size","14pt"),S(au,"class","blocktitle"),re(au,"margin","0"),re(au,"width","100%"),S(Bl,"class","row"),re(Bl,"display","flex"),re(Bl,"cursor","pointer"),S(Bl,"data-bs-toggle","collapse"),S(Bl,"data-bs-target","#quals-info"),S(Bl,"aria-expanded","false"),S(Bl,"aria-controls","quals-info"),S(Wh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Wh,"class","svelte-p0yy5r"),S(va,"class","card card-body svelte-p0yy5r"),S(ou,"class","collapse svelte-p0yy5r"),S(ou,"id","quals-info"),S(Pu,"class","div-grey-box svelte-p0yy5r"),re(ph,"color","gray"),re(ph,"font-size","14pt"),S(Cc,"class","blocktitle"),re(Cc,"margin","0"),re(Cc,"width","100%"),S(su,"class","row"),re(su,"display","flex"),re(su,"cursor","pointer"),S(su,"data-bs-toggle","collapse"),S(su,"data-bs-target","#econ-act-info"),S(su,"aria-expanded","false"),S(su,"aria-controls","econ-act-info"),S(Mc,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Mc,"class","svelte-p0yy5r"),S(ic,"class","card card-body svelte-p0yy5r"),S(fh,"class","collapse svelte-p0yy5r"),S(fh,"id","econ-act-info"),S(rc,"class","div-grey-box svelte-p0yy5r"),re(Lc,"color","gray"),re(Lc,"font-size","14pt"),S(ac,"class","blocktitle"),re(ac,"margin","0"),re(ac,"width","100%"),S(Ol,"class","row"),re(Ol,"display","flex"),re(Ol,"cursor","pointer"),S(Ol,"data-bs-toggle","collapse"),S(Ol,"data-bs-target","#hours-info"),S(Ol,"aria-expanded","false"),S(Ol,"aria-controls","hours-info"),S(qs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(qs,"class","svelte-p0yy5r"),S(rn,"class","card card-body svelte-p0yy5r"),S(dh,"class","collapse svelte-p0yy5r"),S(dh,"id","hours-info"),S(Cu,"class","div-grey-box svelte-p0yy5r"),re(hl,"color","gray"),re(hl,"font-size","14pt"),S(Bc,"class","blocktitle"),re(Bc,"margin","0"),re(Bc,"width","100%"),S(Fl,"class","row"),re(Fl,"display","flex"),re(Fl,"cursor","pointer"),S(Fl,"data-bs-toggle","collapse"),S(Fl,"data-bs-target","#industry-info"),S(Fl,"aria-expanded","false"),S(Fl,"aria-controls","industry-info"),S(p,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(p,"class","svelte-p0yy5r"),S(i,"class","card card-body svelte-p0yy5r"),S(t,"class","collapse svelte-p0yy5r"),S(t,"id","industry-info"),S(Mu,"class","div-grey-box svelte-p0yy5r"),re(ae,"color","gray"),re(ae,"font-size","14pt"),S(K,"class","blocktitle"),re(K,"margin","0"),re(K,"width","100%"),S(U,"class","row"),re(U,"display","flex"),re(U,"cursor","pointer"),S(U,"data-bs-toggle","collapse"),S(U,"data-bs-target","#occupation-info"),S(U,"aria-expanded","false"),S(U,"aria-controls","occupation-info"),S(Me,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Me,"class","svelte-p0yy5r"),S(Se,"class","card card-body svelte-p0yy5r"),S(de,"class","collapse svelte-p0yy5r"),S(de,"id","occupation-info"),S(O,"class","div-grey-box svelte-p0yy5r"),S(Qo,"class","grid mt svelte-p0yy5r"),yl(()=>u[44].call(Qo)),S(nu,"class","accordion-body"),S(ec,"id","panelsStayOpen-collapseTen"),S(ec,"class","accordion-collapse collapse svelte-p0yy5r"),S(ec,"aria-labelledby","panelsStayOpen-headingTen"),S($u,"class","accordion-item"),S(Lt,"class","accordion-button-title"),S(Zt,"class","accordion-button collapsed"),S(Zt,"type","button"),S(Zt,"data-bs-toggle","collapse"),S(Zt,"data-bs-target","#panelsStayOpen-collapseEleven"),S(Zt,"aria-expanded","false"),S(Zt,"aria-controls","panelsStayOpen-collapseEleven"),S(st,"class","accordion-header svelte-p0yy5r"),S(st,"id","panelsStayOpen-headingEleven"),S(Ai,"class","accordion-button-title-sub"),re(Oi,"color","gray"),re(Oi,"font-size","14pt"),S(an,"class","blocktitle"),re(an,"margin","0"),re(an,"width","100%"),S(nn,"class","row"),re(nn,"display","flex"),re(nn,"cursor","pointer"),S(nn,"data-bs-toggle","collapse"),S(nn,"data-bs-target","#method-travel-work-info"),S(nn,"aria-expanded","false"),S(nn,"aria-controls","method-travel-work-info"),S(_a,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(_a,"class","svelte-p0yy5r"),S(Mr,"class","card card-body svelte-p0yy5r"),S(Ur,"class","collapse svelte-p0yy5r"),S(Ur,"id","method-travel-work-info"),S(Bi,"class","div-grey-box svelte-p0yy5r"),re(As,"color","gray"),re(As,"font-size","14pt"),S(Lo,"class","blocktitle"),re(Lo,"margin","0"),re(Lo,"width","100%"),S(Jn,"class","row"),re(Jn,"display","flex"),re(Jn,"cursor","pointer"),S(Jn,"data-bs-toggle","collapse"),S(Jn,"data-bs-target","#method-travel-study-info"),S(Jn,"aria-expanded","false"),S(Jn,"aria-controls","method-travel-study-info"),S(cu,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(cu,"class","svelte-p0yy5r"),S(uu,"class","card card-body svelte-p0yy5r"),S(Nl,"class","collapse svelte-p0yy5r"),S(Nl,"id","method-travel-study-info"),S(mo,"class","div-grey-box svelte-p0yy5r"),S(Ul,"class","div-white-box"),re(oc,"color","gray"),re(oc,"font-size","14pt"),S(pl,"class","blocktitle"),re(pl,"margin","0"),re(pl,"width","100%"),S(yo,"class","row"),re(yo,"display","flex"),re(yo,"cursor","pointer"),S(yo,"data-bs-toggle","collapse"),S(yo,"data-bs-target","#distance-travel-work-info"),S(yo,"aria-expanded","false"),S(yo,"aria-controls","distance-travel-work-info"),S(Ou,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ou,"class","svelte-p0yy5r"),S(Bu,"class","card card-body svelte-p0yy5r"),S(sc,"class","collapse svelte-p0yy5r"),S(sc,"id","distance-travel-work-info"),S(js,"class","div-grey-box svelte-p0yy5r"),re(xh,"color","gray"),re(xh,"font-size","14pt"),S(fl,"class","blocktitle"),re(fl,"margin","0"),re(fl,"width","100%"),S(Ps,"class","row"),re(Ps,"display","flex"),re(Ps,"cursor","pointer"),S(Ps,"data-bs-toggle","collapse"),S(Ps,"data-bs-target","#distance-travel-study-info"),S(Ps,"aria-expanded","false"),S(Ps,"aria-controls","distance-travel-study-info"),S(Vi,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Vi,"class","svelte-p0yy5r"),S(np,"class","card card-body svelte-p0yy5r"),S(Oc,"class","collapse svelte-p0yy5r"),S(Oc,"id","distance-travel-study-info"),S(zs,"class","div-grey-box svelte-p0yy5r"),S(jr,"class","grid mt svelte-p0yy5r"),yl(()=>u[45].call(jr)),S(ar,"class","accordion-body"),S(Gt,"id","panelsStayOpen-collapseEleven"),S(Gt,"class","accordion-collapse collapse svelte-p0yy5r"),S(Gt,"aria-labelledby","panelsStayOpen-headingEleven"),S(_t,"class","accordion-item"),S(Vc,"class","accordion-button-title"),S(Gs,"class","accordion-button collapsed"),S(Gs,"type","button"),S(Gs,"data-bs-toggle","collapse"),S(Gs,"data-bs-target","#panelsStayOpen-collapseTwelve"),S(Gs,"aria-expanded","false"),S(Gs,"aria-controls","panelsStayOpen-collapseTwelveTwelve"),S(cc,"class","accordion-header svelte-p0yy5r"),S(cc,"id","panelsStayOpen-headingTwelve"),S(sp,"class","accordion-button-title-sub"),re(pu,"color","gray"),re(pu,"font-size","14pt"),S(hc,"class","blocktitle"),re(hc,"margin","0"),re(hc,"width","100%"),S(hu,"class","row"),re(hu,"display","flex"),re(hu,"cursor","pointer"),S(hu,"data-bs-toggle","collapse"),S(hu,"data-bs-target","#address-1yr-info"),S(hu,"aria-expanded","false"),S(hu,"aria-controls","address-1yr-info"),S(Sh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Sh,"class","svelte-p0yy5r"),S(Eh,"class","card card-body svelte-p0yy5r"),S(fu,"class","collapse svelte-p0yy5r"),S(fu,"id","address-1yr-info"),S(vo,"class","div-grey-box svelte-p0yy5r"),re(kh,"color","gray"),re(kh,"font-size","14pt"),S(pc,"class","blocktitle"),re(pc,"margin","0"),re(pc,"width","100%"),S(ml,"class","row"),re(ml,"display","flex"),re(ml,"cursor","pointer"),S(ml,"data-bs-toggle","collapse"),S(ml,"data-bs-target","#year-arr-info"),S(ml,"aria-expanded","false"),S(ml,"aria-controls","year-arr-info"),S(fc,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(fc,"class","svelte-p0yy5r"),S(Vu,"class","card card-body svelte-p0yy5r"),S(Ih,"class","collapse svelte-p0yy5r"),S(Ih,"id","year-arr-info"),S(du,"class","div-grey-box svelte-p0yy5r"),S(gf,"class","div-white-box"),S(dl,"class","grid mt svelte-p0yy5r"),yl(()=>u[46].call(dl)),S(Ks,"class","accordion-body"),S(Fc,"id","panelsStayOpen-collapseTwelve"),S(Fc,"class","accordion-collapse collapse svelte-p0yy5r"),S(Fc,"aria-labelledby","panelsStayOpen-headingTwelve"),S(Ro,"class","accordion-item")},m(ce,qe){ze(ce,h,qe),E(h,f),E(f,y),E(y,v),E(v,_),E(h,o),E(h,A),E(A,z),E(z,F),E(z,j),E(z,q),E(z,pe),E(pe,he),E(pe,ke),E(ke,Ee),E(Ee,Be),E(Be,Fe),E(Fe,Ft),E(Fe,Ct),Ct.innerHTML=mt,E(Ee,et),E(Ee,vr),E(vr,pr),E(pr,lr),E(pr,bt),E(bt,kt),E(kt,Rr),E(Ee,Nt),Qt(dr,Ee,null),E(ke,it),E(ke,rr),E(rr,wr),E(wr,Vr),E(Vr,zr),E(Vr,ft),ft.innerHTML=nt,E(rr,gr),E(rr,on),E(on,In),E(In,Fi),E(In,Ni),E(Ni,Gr),E(Gr,Ra),E(rr,Er),Qt(Wi,rr,null),E(ke,$a),E(ke,_r),E(_r,wt),E(wt,ti),E(ti,Yi),E(ti,Zr),Zr.innerHTML=rs,E(_r,er),E(_r,ri),E(ri,kr),E(kr,bi),E(kr,Kr),E(Kr,Pr),E(Pr,xi),E(_r,yn),Qt(Cr,_r,null),br=vl(ke,u[36].bind(ke)),ze(ce,Fr,qe),ze(ce,Ji,qe),E(Ji,sn),E(sn,ln),E(ln,Ga),E(Ga,ci),E(Ji,vn),E(Ji,Pi),E(Pi,Tn),E(Tn,wa),E(Tn,_o),E(Tn,Qn),E(Tn,Qi),E(Qi,Ea),E(Tn,sa),E(Tn,wi),E(wi,xr),E(xr,N),E(N,G),E(G,X),E(G,$),$.innerHTML=se,E(xr,ve),E(xr,be),E(be,H),E(H,ne),E(H,Ie),E(Ie,Ue),E(Ue,Ge),E(xr,Le),Qt(Ne,xr,null),E(wi,ct),E(wi,tt),E(tt,Ce),E(Ce,$e),E($e,We),E($e,Je),Je.innerHTML=Kt,E(tt,Ye),E(tt,Ut),E(Ut,ir),E(ir,Rt),E(ir,Ht),E(Ht,Xt),E(Xt,Ui),E(tt,nr),Qt(sr,tt,null),E(wi,mr),E(wi,Ot),E(Ot,jt),E(jt,ii),E(ii,Sa),E(ii,Hr),Hr.innerHTML=An,E(Ot,zn),E(Ot,Ei),E(Ei,ur),E(ur,$n),E(ur,hi),E(hi,qr),E(qr,la),E(Ot,Br),Qt(Ci,Ot,null),Pn=vl(wi,u[37].bind(wi)),ze(ce,Xs,qe),ze(ce,ni,qe),E(ni,ka),E(ka,ai),E(ai,Nr),E(Nr,qi),E(ni,pi),E(ni,ua),E(ua,Nn),E(Nn,yc),E(Nn,is),E(Nn,Vo),E(Nn,Ws),E(Ws,Ys),E(Nn,Fo),E(Nn,un),E(un,Ba),E(Ba,ea),E(ea,bo),E(bo,Cn),E(bo,oi),oi.innerHTML=Ia,E(Ba,Ae),E(Ba,fi),E(fi,$i),E($i,Xr),E($i,Dn),E(Dn,gn),E(gn,ji),E(Ba,Js),Qt(eo,Ba,null),E(un,vu),E(un,No),E(No,Ka),E(Ka,ns),E(ns,gu),E(ns,Ha),Ha.innerHTML=jl,E(No,xo),E(No,as),E(as,Uo),E(Uo,xl),E(Uo,to),E(to,Wr),E(Wr,_u),E(No,wo),Qt(Ta,No,null),E(un,Ls),E(un,Un),E(Un,qn),E(qn,Oa),E(Oa,jn),E(Oa,Si),Si.innerHTML=qo,E(Un,os),E(Un,Ir),E(Ir,jo),E(jo,ju),E(jo,Qs),E(Qs,ss),E(ss,$s),E(Un,Zu),Qt(ta,Un,null),Zo=vl(un,u[38].bind(un)),ze(ce,ls,qe),ze(ce,us,qe),E(us,ro),E(ro,ra),E(ra,Eo),E(Eo,bu),E(us,Go),E(us,Zn),E(Zn,So),E(So,ko),E(So,wl),E(So,vc),E(So,Aa),E(Aa,Gu),E(So,cs),E(So,Di),E(Di,Gn),E(Gn,ca),E(ca,ia),E(ia,Ku),E(ia,Ko),Ko.innerHTML=hs,E(ia,el),E(Gn,tl),E(Gn,_n),E(_n,ps),E(ps,Hu),E(ps,rl),E(rl,za),E(za,Zl),E(Gn,Gl),Qt(Kn,Gn,null),E(Di,Va),E(Di,Mn),E(Mn,Xa),E(Xa,io),E(io,Io),E(io,El),El.innerHTML=xu,E(Mn,no),E(Mn,cn),E(cn,il),E(il,nl),E(il,Pa),E(Pa,fs),E(fs,Yr),E(Mn,Wa),Qt(di,Mn,null),E(Di,mi),E(Di,It),E(It,qt),E(qt,yr),E(yr,Kl),E(yr,ao),ao.innerHTML=oo,E(yr,Lh),E(It,Xc),E(It,ds),E(ds,To),E(To,Hn),E(To,ki),E(ki,ms),E(ms,Ao),E(It,en),Qt(at,It,null),E(Di,Zi),E(Di,Ii),E(Ii,Jr),E(Jr,Xn),E(Xn,bn),E(Xn,al),al.innerHTML=me,E(Ii,gt),E(Ii,ha),E(ha,pa),E(pa,fa),E(pa,tn),E(tn,da),E(da,ys),E(Ii,Mi),Qt(Fa,Ii,null),Wc=vl(Di,u[39].bind(Di)),ze(ce,Ho,qe),ze(ce,vs,qe),E(vs,ol),E(ol,Ln),E(Ln,xn),E(xn,tr),E(vs,Xo),E(vs,yi),E(yi,vi),E(vi,Rs),E(vi,so),E(vi,na),E(vi,Bs),E(Bs,xt),E(vi,dt),E(vi,Qr),E(Qr,Gi),E(Gi,hn),E(hn,Ki),E(Ki,Wo),E(Ki,Os),Os.innerHTML=gc,E(Gi,Dr),E(Gi,Hi),E(Hi,lo),E(lo,sl),E(lo,ll),E(ll,zo),E(zo,Na),E(Gi,Sl),Qt(Rn,Gi,null),E(Qr,kl),E(Qr,Ya),E(Ya,Ua),E(Ua,_s),E(_s,Il),E(_s,ma),ma.innerHTML=Yc,E(Ya,uo),E(Ya,aa),E(aa,Vs),E(Vs,bs),E(Vs,Ca),E(Ca,Hl),E(Hl,Xl),E(Ya,ul),Qt(xs,Ya,null),E(Qr,n),E(Qr,s),E(s,a),E(a,c),E(c,m),E(c,w),w.innerHTML=k,E(s,P),E(s,B),E(B,Z),E(Z,Y),E(Z,J),E(J,Q),E(Q,le),E(s,oe),Qt(ye,s,null),E(Qr,ie),E(Qr,fe),E(fe,_e),E(_e,Te),E(Te,Re),E(Te,De),De.innerHTML=Ve,E(fe,Ze),E(fe,He),E(He,Ke),E(Ke,ut),E(Ke,vt),E(vt,Et),E(Et,Tt),E(fe,hr),Qt(ot,fe,null),E(fe,Mt),E(fe,Wt),E(Qr,Vt),E(Qr,zt),E(zt,Bt),E(Bt,At),E(At,Dt),E(At,Li),Li.innerHTML=Bn,E(zt,qa),E(zt,wn),E(wn,gi),E(gi,En),E(gi,Da),E(Da,Ma),E(Ma,Wl),E(zt,co),Qt(Ja,zt,null),E(Qr,ws),E(Qr,Po),E(Po,ho),E(ho,Co),E(Co,Xu),E(Co,Tl),Tl.innerHTML=Yl,E(Po,_c),E(Po,Do),E(Do,pn),E(pn,Al),E(pn,Es),E(Es,zl),E(zl,Or),E(Po,Yo),Qt(oa,Po,null),E(Po,wu),E(Po,Gp),Rh=vl(Qr,u[40].bind(Qr)),ze(ce,cp,qe),ze(ce,Fs,qe),E(Fs,Wu),E(Wu,Mo),E(Mo,Eu),E(Eu,Kp),E(Fs,bc),E(Fs,ya),E(ya,Su),E(Su,Xf),E(Su,Wf),E(Su,dm),E(Su,hp),E(hp,Xp),E(Su,mm),E(Su,Ss),E(Ss,ku),E(ku,po),E(po,Pl),E(Pl,ym),E(Pl,Bh),Bh.innerHTML=nv,E(ku,vm),E(ku,Oh),E(Oh,Vh),E(Vh,gm),E(Vh,xc),E(xc,Wp),E(Wp,Jc),E(ku,_m),Qt(Xi,ku,null),E(Ss,pp),E(Ss,Iu),E(Iu,Ns),E(Ns,Jl),E(Jl,Fh),E(Jl,Qc),Qc.innerHTML=py,E(Iu,Nh),E(Iu,wc),E(wc,Ec),E(Ec,bm),E(Ec,Tu),E(Tu,Yp),E(Yp,Jp),E(Iu,xm),Qt(Yu,Iu,null),E(Ss,Qp),E(Ss,Us),fy=vl(Ss,u[41].bind(Ss)),ze(ce,Yf,qe),ze(ce,Sc,qe),E(Sc,Uh),E(Uh,Ql),E(Ql,Au),E(Au,wm),E(Sc,Em),E(Sc,kc),E(kc,$l),E($l,Sm),E($l,Ic),E($l,km),E($l,$c),E($c,qh),E($l,Cl),E($l,Dl),E(Dl,Ju),E(Ju,eu),E(eu,cl),E(cl,Jf),E(cl,jh),jh.innerHTML=av,E(Ju,Im),E(Ju,Zh),E(Zh,eh),E(eh,fo),E(eh,Gh),E(Gh,fp),E(fp,Qf),E(Ju,Tm),Qt(Tc,Ju,null),E(Dl,Am),E(Dl,ef),E(Dl,zm),E(Dl,dp),dy=vl(Dl,u[42].bind(Dl)),ze(ce,$f,qe),ze(ce,Ml,qe),E(Ml,th),E(th,tu),E(tu,Ac),E(Ac,_i),E(Ml,ed),E(Ml,ks),E(ks,Is),E(Is,td),E(Is,rd),E(Is,Pm),E(Is,mp),E(mp,Cm),E(Is,Dm),E(Is,Ll),E(Ll,Qu),E(Qu,ru),E(ru,iu),E(iu,rh),E(iu,ih),ih.innerHTML=ov,E(Qu,Mm),E(Qu,Kh),E(Kh,nh),E(nh,yp),E(nh,zu),E(zu,zc),E(zc,Ts),E(Qu,ah),Qt(Wn,Qu,null),E(Ll,vp),E(Ll,oh),E(Ll,Jo),E(Ll,gp),Lm=vl(Ll,u[43].bind(Ll)),ze(ce,id,qe),ze(ce,$u,qe),E($u,Pc),E(Pc,Rl),E(Rl,_p),E(_p,nd),E($u,sh),E($u,ec),E(ec,nu),E(nu,ad),E(nu,nf),E(nu,od),E(nu,Hh),E(Hh,sd),E(nu,Rm),E(nu,Qo),E(Qo,Pu),E(Pu,Bl),E(Bl,au),E(au,ld),E(au,tc),tc.innerHTML=ud,E(Pu,bp),E(Pu,ou),E(ou,va),E(va,Bm),E(va,Om),E(va,lh),E(va,af),E(va,cd),E(va,of),E(va,hd),E(va,pd),E(va,Vm),E(va,Fm),E(va,Nm),E(va,xp),E(va,sf),E(va,Um),E(va,uh),E(va,Xh),E(va,$r),E(va,Wh),E(Wh,Yh),E(Yh,ch),E(Pu,qm),Qt(hh,Pu,null),E(Qo,jm),E(Qo,rc),E(rc,su),E(su,Cc),E(Cc,Zm),E(Cc,ph),ph.innerHTML=my,E(rc,fd),E(rc,fh),E(fh,ic),E(ic,Dc),E(ic,Mc),E(Mc,nc),E(nc,dd),E(rc,Yn),Qt(ei,rc,null),E(Qo,md),E(Qo,Cu),E(Cu,Ol),E(Ol,ac),E(ac,yd),E(ac,Lc),Lc.innerHTML=Jh,E(Cu,Rc),E(Cu,dh),E(dh,rn),E(rn,Qh),E(rn,qs),E(qs,mh),E(mh,wp),E(Cu,lf),Qt(Vl,Cu,null),E(Qo,Du),E(Qo,Mu),E(Mu,Fl),E(Fl,Bc),E(Bc,ga),E(Bc,hl),hl.innerHTML=yy,E(Mu,e),E(Mu,t),E(t,i),E(i,l),E(i,p),E(p,d),E(d,x),E(Mu,I),Qt(C,Mu,null),E(Qo,L),E(Qo,O),E(O,U),E(U,K),E(K,W),E(K,ae),ae.innerHTML=ue,E(O,ge),E(O,de),E(de,Se),E(Se,Pe),E(Se,Me),E(Me,Oe),E(Oe,je),E(O,Xe),Qt(Qe,O,null),St=vl(Qo,u[44].bind(Qo)),ze(ce,lt,qe),ze(ce,_t,qe),E(_t,st),E(st,Zt),E(Zt,Lt),E(Lt,yt),E(_t,cr),E(_t,Gt),E(Gt,ar),E(ar,Pt),E(ar,Ti),E(ar,fn),E(ar,Ai),E(Ai,Ri),E(ar,dn),E(ar,jr),E(jr,Bi),E(Bi,nn),E(nn,an),E(an,Qa),E(an,Oi),Oi.innerHTML=ja,E(Bi,fr),E(Bi,Ur),E(Ur,Mr),E(Mr,Ar),E(Mr,_a),E(_a,ba),E(ba,zi),E(Bi,On),Qt(Vn,Bi,null),E(jr,Lr),E(jr,mo),E(mo,Jn),E(Jn,Lo),E(Lo,Sn),E(Lo,As),As.innerHTML=lu,E(mo,yh),E(mo,Nl),E(Nl,uu),E(uu,Lu),E(uu,cu),E(cu,vh),E(vh,gh),E(mo,$h),Qt(Ru,mo,null),E(jr,Ep),E(jr,Ul),E(jr,ep),E(jr,js),E(js,yo),E(yo,pl),E(pl,Sp),E(pl,oc),oc.innerHTML=uf,E(js,tp),E(js,sc),E(sc,Bu),E(Bu,rp),E(Bu,Ou),E(Ou,_h),E(_h,bh),E(js,kp),Qt(ql,js,null),E(jr,ip),E(jr,zs),E(zs,Ps),E(Ps,fl),E(fl,cf),E(fl,xh),xh.innerHTML=Gm,E(zs,vd),E(zs,Oc),E(Oc,np),E(np,ap),E(np,Vi),E(Vi,Zs),E(Zs,Km),E(zs,lc),Qt(uc,zs,null),Hm=vl(jr,u[45].bind(jr)),ze(ce,op,qe),ze(ce,Ro,qe),E(Ro,cc),E(cc,Gs),E(Gs,Vc),E(Vc,Ip),E(Ro,hf),E(Ro,Fc),E(Fc,Ks),E(Ks,gd),E(Ks,pf),E(Ks,_d),E(Ks,sp),E(sp,Cs),E(Ks,Ap),E(Ks,dl),E(dl,vo),E(vo,hu),E(hu,hc),E(hc,Nc),E(hc,pu),pu.innerHTML=zp,E(vo,wh),E(vo,fu),E(fu,Eh),E(Eh,bd),E(Eh,Sh),E(Sh,Pp),E(Pp,ff),E(vo,df),Qt(Ds,vo,null),E(dl,xd),E(dl,du),E(du,ml),E(ml,pc),E(pc,mf),E(pc,kh),kh.innerHTML=vy,E(du,yf),E(du,Ih),E(Ih,Vu),E(Vu,wd),E(Vu,fc),E(fc,vf),E(vf,Ed),E(du,Xm),Qt(Th,du,null),E(dl,Wm),E(dl,gf),gy=vl(dl,u[46].bind(dl)),Hs=!0},p(ce,qe){(!Hs||qe[0]&2)&&V!==(V=ce[1].name+"")&&pt(j,V);const Ms={};qe[0]&2&&(Ms.data=ce[1]&&ce[14](["cob"])),qe[0]&4096&&(Ms.zKey=ce[12]),qe[0]&8192&&(Ms.label=ce[13]),dr.$set(Ms);const dc={};qe[0]&2&&(dc.data=ce[1]&&ce[14](["passport"])),qe[0]&4096&&(dc.zKey=ce[12]),qe[0]&8192&&(dc.label=ce[13]),Wi.$set(dc);const Ah={};qe[0]&2&&(Ah.data=ce[1]&&ce[14](["natid"])),qe[0]&4096&&(Ah.zKey=ce[12]),qe[0]&8192&&(Ah.label=ce[13]),Cr.$set(Ah),(!Hs||qe[0]&2)&&Bo!==(Bo=ce[1].name+"")&&pt(_o,Bo);const Fu={};qe[0]&2&&(Fu.data=ce[1]&&ce[14](["mainlang"])),qe[0]&4096&&(Fu.zKey=ce[12]),qe[0]&8192&&(Fu.label=ce[13]),Ne.$set(Fu);const Nu={};qe[0]&2&&(Nu.data=ce[1]&&ce[14](["irish"])),qe[0]&4096&&(Nu.zKey=ce[12]),qe[0]&8192&&(Nu.label=ce[13]),sr.$set(Nu);const Cp={};qe[0]&2&&(Cp.data=ce[1]&&ce[14](["ulster"])),qe[0]&4096&&(Cp.zKey=ce[12]),qe[0]&8192&&(Cp.label=ce[13]),Ci.$set(Cp),(!Hs||qe[0]&2)&&Oo!==(Oo=ce[1].name+"")&&pt(is,Oo);const Uc={};qe[0]&2&&(Uc.data=ce[1]&&ce[14](["religion"])),qe[0]&4096&&(Uc.zKey=ce[12]),qe[0]&8192&&(Uc.label=ce[13]),eo.$set(Uc);const qc={};qe[0]&2&&(qc.data=ce[1]&&ce[14](["religion_or_religion_brought_up_in"])),qe[0]&4096&&(qc.zKey=ce[12]),qe[0]&8192&&(qc.label=ce[13]),Ta.$set(qc);const _f={};qe[0]&2&&(_f.data=ce[1]&&ce[14](["ethnic"])),qe[0]&4096&&(_f.zKey=ce[12]),qe[0]&8192&&(_f.label=ce[13]),ta.$set(_f),(!Hs||qe[0]&2)&&Sr!==(Sr=ce[1].name+"")&&pt(wl,Sr);const Dp={};qe[0]&2&&(Dp.data=ce[1]&&ce[14](["general_health"])),qe[0]&4096&&(Dp.zKey=ce[12]),qe[0]&8192&&(Dp.label=ce[13]),Kn.$set(Dp);const Sd={};qe[0]&2&&(Sd.data=ce[1]&&ce[14](["long_term_disability"])),qe[0]&4096&&(Sd.zKey=ce[12]),qe[0]&8192&&(Sd.label=ce[13]),di.$set(Sd);const bf={};qe[0]&2&&(bf.data=ce[1]&&ce[14](["number_of_long_term_health"])),qe[0]&4096&&(bf.zKey=ce[12]),qe[0]&8192&&(bf.label=ce[13]),at.$set(bf);const Mp={};qe[0]&2&&(Mp.data=ce[1]&&ce[14](["provision_care"])),qe[0]&4096&&(Mp.zKey=ce[12]),qe[0]&8192&&(Mp.label=ce[13]),Fa.$set(Mp),(!Hs||qe[0]&2)&&gs!==(gs=ce[1].name+"")&&pt(so,gs);const xf={};qe[0]&2&&(xf.data=ce[1]&&ce[14](["accommodation_type"])),qe[0]&4096&&(xf.zKey=ce[12]),qe[0]&8192&&(xf.label=ce[13]),Rn.$set(xf);const wf={};qe[0]&2&&(wf.data=ce[1]&&ce[14](["number_of_adaptations"])),qe[0]&4096&&(wf.zKey=ce[12]),qe[0]&8192&&(wf.label=ce[13]),xs.$set(wf);const jc={};qe[0]&2&&(jc.data=ce[1]&&ce[14](["central_heating"])),qe[0]&4096&&(jc.zKey=ce[12]),qe[0]&8192&&(jc.label=ce[13]),ye.$set(jc);const Ef={};qe[0]&2&&(Ef.data=ce[1]&&ce[14](["renewable_energy"])),qe[0]&4096&&(Ef.zKey=ce[12]),qe[0]&8192&&(Ef.label=ce[13]),ot.$set(Ef);const Lp={};qe[0]&2&&(Lp.data=ce[1]&&ce[14](["hh_tenure"])),qe[0]&4096&&(Lp.zKey=ce[12]),qe[0]&8192&&(Lp.label=ce[13]),Ja.$set(Lp);const kd={};qe[0]&2&&(kd.data=ce[1]&&ce[14](["car_or_van"])),qe[0]&4096&&(kd.zKey=ce[12]),qe[0]&8192&&(kd.label=ce[13]),oa.$set(kd),(!Hs||qe[0]&2)&&Hp!==(Hp=ce[1].name+"")&&pt(Wf,Hp);const Sf={};qe[0]&2&&(Sf.data=ce[1]&&ce[14](["number_of_dependent_children_households"])),qe[0]&4096&&(Sf.zKey=ce[12]),qe[0]&8192&&(Sf.label=ce[13]),Xi.$set(Sf);const Rp={};qe[0]&2&&(Rp.data=ce[1]&&ce[14](["household_composition_households"])),qe[0]&4096&&(Rp.zKey=ce[12]),qe[0]&8192&&(Rp.label=ce[13]),Yu.$set(Rp),(!Hs||qe[0]&2)&&$p!==($p=ce[1].name+"")&&pt(Ic,$p);const kf={};qe[0]&2&&(kf.data=ce[1]&&ce[14](["marital_and_civil_partnership_status"])),qe[0]&4096&&(kf.zKey=ce[12]),qe[0]&8192&&(kf.label=ce[13]),Tc.$set(kf),(!Hs||qe[0]&2)&&tf!==(tf=ce[1].name+"")&&pt(rd,tf);const If={};qe[0]&2&&(If.data=ce[1]&&ce[14](["sexual_orientation_by_broad_age_band"])),qe[0]&4096&&(If.zKey=ce[12]),qe[0]&8192&&(If.label=ce[13]),Wn.$set(If),(!Hs||qe[0]&2)&&rf!==(rf=ce[1].name+"")&&pt(nf,rf);const Zc={};qe[0]&2&&(Zc.data=ce[1]&&ce[14](["highest_level_of_qualifications"])),qe[0]&4096&&(Zc.zKey=ce[12]),qe[0]&8192&&(Zc.label=ce[13]),hh.$set(Zc);const Tf={};qe[0]&2&&(Tf.data=ce[1]&&ce[14](["economic_activity"])),qe[0]&4096&&(Tf.zKey=ce[12]),qe[0]&8192&&(Tf.label=ce[13]),ei.$set(Tf);const Bp={};qe[0]&2&&(Bp.data=ce[1]&&ce[14](["hours_worked"])),qe[0]&4096&&(Bp.zKey=ce[12]),qe[0]&8192&&(Bp.label=ce[13]),Vl.$set(Bp);const Id={};qe[0]&2&&(Id.data=ce[1]&&ce[14](["industry_of_employment"])),qe[0]&4096&&(Id.zKey=ce[12]),qe[0]&8192&&(Id.label=ce[13]),C.$set(Id);const Af={};qe[0]&2&&(Af.data=ce[1]&&ce[14](["occupation_1_digit"])),qe[0]&4096&&(Af.zKey=ce[12]),qe[0]&8192&&(Af.label=ce[13]),Qe.$set(Af),(!Hs||qe[0]&2)&&Tr!==(Tr=ce[1].name+"")&&pt(Ti,Tr);const Op={};qe[0]&2&&(Op.data=ce[1]&&ce[14](["method_of_travel_to_work"])),qe[0]&4096&&(Op.zKey=ce[12]),qe[0]&8192&&(Op.label=ce[13]),Vn.$set(Op);const zf={};qe[0]&2&&(zf.data=ce[1]&&ce[14](["method_of_travel_to_study"])),qe[0]&4096&&(zf.zKey=ce[12]),qe[0]&8192&&(zf.label=ce[13]),Ru.$set(zf);const Pf={};qe[0]&2&&(Pf.data=ce[1]&&ce[14](["distance_travelled_to_work"])),qe[0]&4096&&(Pf.zKey=ce[12]),qe[0]&8192&&(Pf.label=ce[13]),ql.$set(Pf);const lp={};qe[0]&2&&(lp.data=ce[1]&&ce[14](["distance_travelled_to_study"])),qe[0]&4096&&(lp.zKey=ce[12]),qe[0]&8192&&(lp.label=ce[13]),uc.$set(lp),(!Hs||qe[0]&2)&&Tp!==(Tp=ce[1].name+"")&&pt(pf,Tp);const Cf={};qe[0]&2&&(Cf.data=ce[1]&&ce[14](["address_one_year_ago"])),qe[0]&4096&&(Cf.zKey=ce[12]),qe[0]&8192&&(Cf.label=ce[13]),Ds.$set(Cf);const Df={};qe[0]&2&&(Df.data=ce[1]&&ce[14](["year_of_arrival"])),qe[0]&4096&&(Df.zKey=ce[12]),qe[0]&8192&&(Df.label=ce[13]),Th.$set(Df)},i(ce){Hs||(rt(dr.$$.fragment,ce),rt(Wi.$$.fragment,ce),rt(Cr.$$.fragment,ce),rt(Ne.$$.fragment,ce),rt(sr.$$.fragment,ce),rt(Ci.$$.fragment,ce),rt(eo.$$.fragment,ce),rt(Ta.$$.fragment,ce),rt(ta.$$.fragment,ce),rt(Kn.$$.fragment,ce),rt(di.$$.fragment,ce),rt(at.$$.fragment,ce),rt(Fa.$$.fragment,ce),rt(Rn.$$.fragment,ce),rt(xs.$$.fragment,ce),rt(ye.$$.fragment,ce),rt(ot.$$.fragment,ce),rt(Ja.$$.fragment,ce),rt(oa.$$.fragment,ce),rt(Xi.$$.fragment,ce),rt(Yu.$$.fragment,ce),rt(Tc.$$.fragment,ce),rt(Wn.$$.fragment,ce),rt(hh.$$.fragment,ce),rt(ei.$$.fragment,ce),rt(Vl.$$.fragment,ce),rt(C.$$.fragment,ce),rt(Qe.$$.fragment,ce),rt(Vn.$$.fragment,ce),rt(Ru.$$.fragment,ce),rt(ql.$$.fragment,ce),rt(uc.$$.fragment,ce),rt(Ds.$$.fragment,ce),rt(Th.$$.fragment,ce),Hs=!0)},o(ce){ht(dr.$$.fragment,ce),ht(Wi.$$.fragment,ce),ht(Cr.$$.fragment,ce),ht(Ne.$$.fragment,ce),ht(sr.$$.fragment,ce),ht(Ci.$$.fragment,ce),ht(eo.$$.fragment,ce),ht(Ta.$$.fragment,ce),ht(ta.$$.fragment,ce),ht(Kn.$$.fragment,ce),ht(di.$$.fragment,ce),ht(at.$$.fragment,ce),ht(Fa.$$.fragment,ce),ht(Rn.$$.fragment,ce),ht(xs.$$.fragment,ce),ht(ye.$$.fragment,ce),ht(ot.$$.fragment,ce),ht(Ja.$$.fragment,ce),ht(oa.$$.fragment,ce),ht(Xi.$$.fragment,ce),ht(Yu.$$.fragment,ce),ht(Tc.$$.fragment,ce),ht(Wn.$$.fragment,ce),ht(hh.$$.fragment,ce),ht(ei.$$.fragment,ce),ht(Vl.$$.fragment,ce),ht(C.$$.fragment,ce),ht(Qe.$$.fragment,ce),ht(Vn.$$.fragment,ce),ht(Ru.$$.fragment,ce),ht(ql.$$.fragment,ce),ht(uc.$$.fragment,ce),ht(Ds.$$.fragment,ce),ht(Th.$$.fragment,ce),Hs=!1},d(ce){ce&&T(h),$t(dr),$t(Wi),$t(Cr),br(),ce&&T(Fr),ce&&T(Ji),$t(Ne),$t(sr),$t(Ci),Pn(),ce&&T(Xs),ce&&T(ni),$t(eo),$t(Ta),$t(ta),Zo(),ce&&T(ls),ce&&T(us),$t(Kn),$t(di),$t(at),$t(Fa),Wc(),ce&&T(Ho),ce&&T(vs),$t(Rn),$t(xs),$t(ye),$t(ot),$t(Ja),$t(oa),Rh(),ce&&T(cp),ce&&T(Fs),$t(Xi),$t(Yu),fy(),ce&&T(Yf),ce&&T(Sc),$t(Tc),dy(),ce&&T($f),ce&&T(Ml),$t(Wn),Lm(),ce&&T(id),ce&&T($u),$t(hh),$t(ei),$t(Vl),$t(C),$t(Qe),St(),ce&&T(lt),ce&&T(_t),$t(Vn),$t(Ru),$t(ql),$t(uc),Hm(),ce&&T(op),ce&&T(Ro),$t(Ds),$t(Th),gy()}}}function E5(u){let h,f,y=u[1]&&u[2]&&nx(u);return{c(){y&&y.c(),h=La()},l(v){y&&y.l(v),h=La()},m(v,_){y&&y.m(v,_),ze(v,h,_),f=!0},p(v,_){v[1]&&v[2]?y?(y.p(v,_),_[0]&6&&rt(y,1)):(y=nx(v),y.c(),rt(y,1),y.m(h.parentNode,h)):y&&(Uu(),ht(y,1,1,()=>{y=null}),qu())},i(v){f||(rt(y),f=!0)},o(v){ht(y),f=!1},d(v){y&&y.d(v),v&&T(h)}}}function S5(u){let h,f,y,v,_,o,A,z,F,V,j,q,pe,he,ke,Ee;return document.title=h=u[1].name+" Census Data",pe=new NS({}),ke=new P2({props:{column:"wide",$$slots:{default:[E5]},$$scope:{ctx:u}}}),{c(){f=D("meta"),y=D("meta"),_=D("meta"),o=D("meta"),z=D("meta"),V=D("meta"),q=xe(),Yt(pe.$$.fragment),he=xe(),Yt(ke.$$.fragment),this.h()},l(Be){const Fe=T2('[data-svelte="svelte-14ulspn"]',document.head);f=M(Fe,"META",{name:!0,content:!0}),y=M(Fe,"META",{property:!0,content:!0}),_=M(Fe,"META",{property:!0,content:!0}),o=M(Fe,"META",{property:!0,content:!0}),z=M(Fe,"META",{property:!0,content:!0}),V=M(Fe,"META",{name:!0,content:!0}),Fe.forEach(T),q=we(Be),Jt(pe.$$.fragment,Be),he=we(Be),Jt(ke.$$.fragment,Be),this.h()},h(){S(f,"name","description"),S(f,"content",""),S(y,"property","og:title"),S(y,"content",v=u[1].name+" Census Data"),S(_,"property","og:type"),S(_,"content","website"),S(o,"property","og:url"),S(o,"content",A=Gy.base+"/"+u[1].code+"/"),S(z,"property","og:description"),S(z,"content",F="Explore census data for "+u[1].name+"."),S(V,"name","description"),S(V,"content",j="Explore census data for "+u[1].name+".")},m(Be,Fe){E(document.head,f),E(document.head,y),E(document.head,_),E(document.head,o),E(document.head,z),E(document.head,V),ze(Be,q,Fe),Qt(pe,Be,Fe),ze(Be,he,Fe),Qt(ke,Be,Fe),Ee=!0},p(Be,Fe){(!Ee||Fe[0]&2)&&h!==(h=Be[1].name+" Census Data")&&(document.title=h),(!Ee||Fe[0]&2&&v!==(v=Be[1].name+" Census Data"))&&S(y,"content",v),(!Ee||Fe[0]&2&&A!==(A=Gy.base+"/"+Be[1].code+"/"))&&S(o,"content",A),(!Ee||Fe[0]&2&&F!==(F="Explore census data for "+Be[1].name+"."))&&S(z,"content",F),(!Ee||Fe[0]&2&&j!==(j="Explore census data for "+Be[1].name+"."))&&S(V,"content",j);const Ft={};Fe[0]&16383|Fe[2]&1&&(Ft.$$scope={dirty:Fe,ctx:Be}),ke.$set(Ft)},i(Be){Ee||(rt(pe.$$.fragment,Be),rt(ke.$$.fragment,Be),Ee=!0)},o(Be){ht(pe.$$.fragment,Be),ht(ke.$$.fragment,Be),Ee=!1},d(Be){T(f),T(y),T(_),T(o),T(z),T(V),Be&&T(q),$t(pe,Be),Be&&T(he),$t(ke,Be)}}}const C5=!0;async function _x(u,h){return await(await h(Gy.app_json_data+u+".json")).json()}async function D5({params:u,fetch:h}){let f=u.code,y=await N2(Gy.search_data,h),v={};y.forEach(z=>v[z.code]=z.name),y.forEach(z=>{z.typepl=xa[z.type].pl,z.typenm=xa[z.type].name,z.typestr=v[z.parent]?`${xa[z.type].name} within ${v[z.parent]}`:""});let _=y.sort((z,F)=>z.name.localeCompare(F.name)),o=await _x("N92000002",h),A=await _x(f,h);return{props:{search_data:_,place:A,ni:o}}}function k5(u,h,f){let y,v,_,o,A,{search_data:z,place:F,ni:V}=h,j,q,pe=null,he=!1,ke={selected:null,type:null,childType:null,highlighted:[],hovered:null},Ee={};Object.keys(qp).forEach(er=>f(10,Ee[er]=!1,Ee));function Be(er){const ri=(Fr,Ji)=>Fr+Ji;let kr=er[0],bi="perc",Kr=F.data[kr][bi][2021],Pr=F.data[kr][bi][2011],xi=V.data[kr][bi][2021],yn=Q1[kr].map(Fr=>Fr.category),Cr=Q1[kr].map(Fr=>Fr.label?Fr.label:Fr.category);return yn.map((Fr,Ji)=>Array.isArray(Fr)?{x:Cr[Ji],y:Fr.map(sn=>Kr[sn]).reduce(ri,0),ni:Fr.map(sn=>xi[sn]).reduce(ri,0),prev:Fr.map(sn=>Pr[sn]).reduce(ri,0)}:{x:Cr[Ji],y:Kr[Fr],ni:xi[Fr],prev:Pr[Fr]})}function Fe(er){pe&&pe.fitBounds(er,{padding:20})}function Ft(er){let ri=JSON.parse(JSON.stringify(ke)),kr=er.code,bi=er.type,Kr=er.children[0]?er.children.map(br=>br.code):[],Pr=er.type=="rgn"?"cty":Kr[0]?er.children[0].type:null;f(9,ke.selected=kr,ke),f(9,ke.type=bi,ke),f(9,ke.childType=Pr,ke),f(9,ke.highlighted=Kr,ke);let xi=Object.keys(qp),yn=["fill-color","fill-opacity"],Cr=["line-color","line-width","line-opacity"];pe&&(ke.type!=ri.type||ke.childType!=ri.childType)&&(xi.forEach(br=>{let Fr=br==bi||Pr&&br==Pr?"visible":"none";pe.setLayoutProperty(br+"-fill","visibility",Fr),pe.setLayoutProperty(br+"-bounds","visibility",Fr),er.parents[0]&&pe.setLayoutProperty(br+"-self","visibility",Fr),f(10,Ee[br]=br==Pr,Ee)}),er.parents[0]&&(yn.forEach(br=>pe.setPaintProperty(bi+"-fill",br,go[Kr[0]?"fill-active":"fill-self"][br])),Cr.forEach(br=>{pe.setPaintProperty(bi+"-bounds",br,go["line-active"][br]),pe.setPaintProperty(bi+"-self",br,go["line-self"][br])})),Pr&&(yn.forEach(br=>pe.setPaintProperty(Pr+"-fill",br,go["fill-child"][br])),Cr.forEach(br=>pe.setPaintProperty(Pr+"-bounds",br,go["line-child"][br]))))}function Ct(er){Ft(er),Fe(er.bounds)}function mt(er){rb(`${Mh}/${er.detail.code}/`,{noscroll:!0})}function et(er){rb(`${Mh}/${er.detail.value}/`,{noscroll:!0})}function vr(){f(7,q=j<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const pr=()=>f(5,A=!0),lr=()=>f(4,he=!1),bt=()=>f(11,o=!1),kt=()=>f(5,A=!0),Rr=()=>f(4,he=!1),Nt=()=>f(11,o=!1),dr=()=>f(11,o=!0),it=()=>f(5,A=!1),rr=()=>f(4,he=!1),wr=()=>f(4,he=!0),Vr=()=>f(5,A=!1),zr=()=>f(11,o=!1),ft=()=>f(4,he=!1),nt=()=>f(5,A=!0),gr=()=>f(11,o=!1);function on(er){pe=er,f(8,pe)}function In(){j=this.clientWidth,f(3,j)}function Fi(){j=this.clientWidth,f(3,j)}function Ni(){j=this.clientWidth,f(3,j)}function Gr(){j=this.clientWidth,f(3,j)}function Ra(){j=this.clientWidth,f(3,j)}function Er(){j=this.clientWidth,f(3,j)}function Wi(){j=this.clientWidth,f(3,j)}function $a(){j=this.clientWidth,f(3,j)}function _r(){j=this.clientWidth,f(3,j)}function wt(){j=this.clientWidth,f(3,j)}function ti(){j=this.clientWidth,f(3,j)}function Yi(){j=this.clientWidth,f(3,j)}function Zr(){j=this.clientWidth,f(3,j)}function rs(){j=this.clientWidth,f(3,j)}return u.$$set=er=>{"search_data"in er&&f(0,z=er.search_data),"place"in er&&f(1,F=er.place),"ni"in er&&f(2,V=er.ni)},u.$$.update=()=>{u.$$.dirty[0]&8&&j&&vr(),u.$$.dirty[0]&18&&f(13,y=he?"Same area 2011":F&&F.parents[0]?"NI 2021":null),u.$$.dirty[0]&2&&f(6,v=!(F.type!="ni"&&F.type!="lgd")),u.$$.dirty[0]&114&&f(12,_=A?null:he&&v?"prev":!he&&F.type!="ni"?"ni":null),u.$$.dirty[0]&2&&F&&Ct(F)},f(5,A=!0),f(11,o=!1),[z,F,V,j,he,A,v,q,pe,ke,Ee,o,_,y,Be,mt,et,pr,lr,bt,kt,Rr,Nt,dr,it,rr,wr,Vr,zr,ft,nt,gr,on,In,Fi,Ni,Gr,Ra,Er,Wi,$a,_r,wt,ti,Yi,Zr,rs]}class M5 extends gl{constructor(h){super(),_l(this,h,k5,S5,bl,{search_data:0,place:1,ni:2},null,[-1,-1,-1])}}export{M5 as default,D5 as load,C5 as prerender};
