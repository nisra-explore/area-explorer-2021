import{S as Wo,i as Yo,s as Jo,O as Wv,l as M,m as L,n as R,h as T,p as S,q as ie,J as wi,b as Pe,Q as Yv,R as Jv,T as Qv,f as et,t as pt,a as _e,c as be,I as w,M as Ri,E as ln,G as Xc,U as Rk,V as pS,W as of,r as ee,u as te,v as ft,e as An,X as Wc,Y as Ho,Z as Xo,g as Yu,d as Ju,j as Bk,o as Ok,K as t_,_ as $t,$ as Br,a0 as Da,a1 as Ma,w as Ut,x as qt,y as jt,B as Zt,P as s3,a2 as l3,a3 as Bx,a4 as Ox,a5 as u3,a6 as e0,C as W_,z as Y_,A as J_}from"../../chunks/index-06ab0f50.js";import{g as yn,a as t0,S as c3,m as fd,b as fS,c as h3,d as oa,e as dS}from"../../chunks/Section-80303abd.js";import{b as rp}from"../../chunks/paths-1c47712a.js";import{c as cy,w as Or,d as Bn}from"../../chunks/singletons-e0a6622d.js";/* empty css                                                                 */var mS={},_x={},bx=34,Xg=10,xx=13;function Vk(u){return new Function("d","return {"+u.map(function(h,f){return JSON.stringify(h)+": d["+f+'] || ""'}).join(",")+"}")}function p3(u,h){var f=Vk(u);return function(y,x){return h(f(y),x,u)}}function yS(u){var h=Object.create(null),f=[];return u.forEach(function(y){for(var x in y)x in h||f.push(h[x]=x)}),f}function fl(u,h){var f=u+"",y=f.length;return y<h?new Array(h-y+1).join(0)+f:f}function f3(u){return u<0?"-"+fl(-u,6):u>9999?"+"+fl(u,6):fl(u,4)}function d3(u){var h=u.getUTCHours(),f=u.getUTCMinutes(),y=u.getUTCSeconds(),x=u.getUTCMilliseconds();return isNaN(u)?"Invalid Date":f3(u.getUTCFullYear())+"-"+fl(u.getUTCMonth()+1,2)+"-"+fl(u.getUTCDate(),2)+(x?"T"+fl(h,2)+":"+fl(f,2)+":"+fl(y,2)+"."+fl(x,3)+"Z":y?"T"+fl(h,2)+":"+fl(f,2)+":"+fl(y,2)+"Z":f||h?"T"+fl(h,2)+":"+fl(f,2)+"Z":"")}function m3(u){var h=new RegExp('["'+u+`
\r]`),f=u.charCodeAt(0);function y(j,U){var fe,he,Ie=x(j,function(we,Ve){if(fe)return fe(we,Ve-1);he=we,fe=U?p3(we,U):Vk(we)});return Ie.columns=he||[],Ie}function x(j,U){var fe=[],he=j.length,Ie=0,we=0,Ve,Ue=he<=0,Ot=!1;j.charCodeAt(he-1)===Xg&&--he,j.charCodeAt(he-1)===xx&&--he;function Mt(){if(Ue)return _x;if(Ot)return Ot=!1,mS;var Qe,kr=Ie,xr;if(j.charCodeAt(kr)===bx){for(;Ie++<he&&j.charCodeAt(Ie)!==bx||j.charCodeAt(++Ie)===bx;);return(Qe=Ie)>=he?Ue=!0:(xr=j.charCodeAt(Ie++))===Xg?Ot=!0:xr===xx&&(Ot=!0,j.charCodeAt(Ie)===Xg&&++Ie),j.slice(kr+1,Qe-1).replace(/""/g,'"')}for(;Ie<he;){if((xr=j.charCodeAt(Qe=Ie++))===Xg)Ot=!0;else if(xr===xx)Ot=!0,j.charCodeAt(Ie)===Xg&&++Ie;else if(xr!==f)continue;return j.slice(kr,Qe)}return Ue=!0,j.slice(kr,he)}for(;(Ve=Mt())!==_x;){for(var mt=[];Ve!==mS&&Ve!==_x;)mt.push(Ve),Ve=Mt();U&&(mt=U(mt,we++))==null||fe.push(mt)}return fe}function _(j,U){return j.map(function(fe){return U.map(function(he){return V(fe[he])}).join(u)})}function o(j,U){return U==null&&(U=yS(j)),[U.map(V).join(u)].concat(_(j,U)).join(`
`)}function z(j,U){return U==null&&(U=yS(j)),_(j,U).join(`
`)}function P(j){return j.map(F).join(`
`)}function F(j){return j.map(V).join(u)}function V(j){return j==null?"":j instanceof Date?d3(j):h.test(j+="")?'"'+j.replace(/"/g,'""')+'"':j}return{parse:y,parseRows:x,format:o,formatBody:z,formatRows:P,formatRow:F,formatValue:V}}var y3=m3(","),v3=y3.parse;function g3(u){for(var h in u){var f=u[h].trim(),y,x;if(!f)f=null;else if(f==="true")f=!0;else if(f==="false")f=!1;else if(f==="NaN")f=NaN;else if(!isNaN(y=+f))f=y;else if(x=f.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))_3&&!!x[4]&&!x[7]&&(f=f.replace(/-/g,"/").replace(/T/," ")),f=new Date(f);else continue;u[h]=f}return u}const _3=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function b3(u,h=window.fetch){let y=await(await h(u)).text();return await v3(y,g3)}function dd(u){let h=Math.round(u)%10;return u==11?"th":h==1?"st":h==2?"nd":h==3?"rd":"th"}function r0(u){return u>0?"increase":u<0?"decrease":"nochange"}function md(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"No change"}function i0(u,h="",f=0){return u!=0?Math.abs(u).toFixed(f)+h:h=="pp"?"n/c":"<1%"}cy.disable_scroll_handling;const vS=cy.goto;cy.invalidate;cy.prefetch;cy.prefetch_routes;cy.before_navigate;cy.after_navigate;var x3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},w3={rgb2hsl:r_,rgb2hsv:u0,rgb2hwb:i_,rgb2cmyk:n_,rgb2keyword:a_,rgb2xyz:Vx,rgb2lab:Fx,rgb2lch:E3,hsl2rgb:c0,hsl2hsv:S3,hsl2hwb:k3,hsl2cmyk:I3,hsl2keyword:T3,hsv2rgb:h0,hsv2hsl:A3,hsv2hwb:z3,hsv2cmyk:P3,hsv2keyword:C3,hwb2rgb:o_,hwb2hsl:D3,hwb2hsv:M3,hwb2cmyk:L3,hwb2keyword:R3,cmyk2rgb:s_,cmyk2hsl:B3,cmyk2hsv:O3,cmyk2hwb:V3,cmyk2keyword:F3,keyword2rgb:hy,keyword2hsl:j3,keyword2hsv:Z3,keyword2hwb:G3,keyword2cmyk:K3,keyword2lab:H3,keyword2xyz:X3,xyz2rgb:Fk,xyz2lab:Nk,xyz2lch:N3,lab2xyz:Nx,lab2rgb:Uk,lab2lch:Ux,lch2lab:qx,lch2xyz:U3,lch2rgb:q3};function r_(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,x=Math.min(h,f,y),_=Math.max(h,f,y),o=_-x,z,P,F;return _==x?z=0:h==_?z=(f-y)/o:f==_?z=2+(y-h)/o:y==_&&(z=4+(h-f)/o),z=Math.min(z*60,360),z<0&&(z+=360),F=(x+_)/2,_==x?P=0:F<=.5?P=o/(_+x):P=o/(2-_-x),[z,P*100,F*100]}function u0(u){var h=u[0],f=u[1],y=u[2],x=Math.min(h,f,y),_=Math.max(h,f,y),o=_-x,z,P,F;return _==0?P=0:P=o/_*1e3/10,_==x?z=0:h==_?z=(f-y)/o:f==_?z=2+(y-h)/o:y==_&&(z=4+(h-f)/o),z=Math.min(z*60,360),z<0&&(z+=360),F=_/255*1e3/10,[z,P,F]}function i_(u){var h=u[0],f=u[1],_=u[2],y=r_(u)[0],x=1/255*Math.min(h,Math.min(f,_)),_=1-1/255*Math.max(h,Math.max(f,_));return[y,x*100,_*100]}function n_(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255,x,_,o,z;return z=Math.min(1-h,1-f,1-y),x=(1-h-z)/(1-z)||0,_=(1-f-z)/(1-z)||0,o=(1-y-z)/(1-z)||0,[x*100,_*100,o*100,z*100]}function a_(u){return qk[JSON.stringify(u)]}function Vx(u){var h=u[0]/255,f=u[1]/255,y=u[2]/255;h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var x=h*.4124+f*.3576+y*.1805,_=h*.2126+f*.7152+y*.0722,o=h*.0193+f*.1192+y*.9505;return[x*100,_*100,o*100]}function Fx(u){var h=Vx(u),f=h[0],y=h[1],x=h[2],_,o,z;return f/=95.047,y/=100,x/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,_=116*y-16,o=500*(f-y),z=200*(y-x),[_,o,z]}function E3(u){return Ux(Fx(u))}function c0(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,x,_,o,z,P;if(f==0)return P=y*255,[P,P,P];y<.5?_=y*(1+f):_=y+f-y*f,x=2*y-_,z=[0,0,0];for(var F=0;F<3;F++)o=h+1/3*-(F-1),o<0&&o++,o>1&&o--,6*o<1?P=x+(_-x)*6*o:2*o<1?P=_:3*o<2?P=x+(_-x)*(2/3-o)*6:P=x,z[F]=P*255;return z}function S3(u){var h=u[0],f=u[1]/100,y=u[2]/100,x,_;return y===0?[0,0,0]:(y*=2,f*=y<=1?y:2-y,_=(y+f)/2,x=2*f/(y+f),[h,x*100,_*100])}function k3(u){return i_(c0(u))}function I3(u){return n_(c0(u))}function T3(u){return a_(c0(u))}function h0(u){var h=u[0]/60,f=u[1]/100,P=u[2]/100,y=Math.floor(h)%6,x=h-Math.floor(h),_=255*P*(1-f),o=255*P*(1-f*x),z=255*P*(1-f*(1-x)),P=255*P;switch(y){case 0:return[P,z,_];case 1:return[o,P,_];case 2:return[_,P,z];case 3:return[_,o,P];case 4:return[z,_,P];case 5:return[P,_,o]}}function A3(u){var h=u[0],f=u[1]/100,y=u[2]/100,x,_;return _=(2-f)*y,x=f*y,x/=_<=1?_:2-_,x=x||0,_/=2,[h,x*100,_*100]}function z3(u){return i_(h0(u))}function P3(u){return n_(h0(u))}function C3(u){return a_(h0(u))}function o_(u){var h=u[0]/360,f=u[1]/100,y=u[2]/100,x=f+y,_,o,z,P;switch(x>1&&(f/=x,y/=x),_=Math.floor(6*h),o=1-y,z=6*h-_,(_&1)!=0&&(z=1-z),P=f+z*(o-f),_){default:case 6:case 0:r=o,g=P,b=f;break;case 1:r=P,g=o,b=f;break;case 2:r=f,g=o,b=P;break;case 3:r=f,g=P,b=o;break;case 4:r=P,g=f,b=o;break;case 5:r=o,g=f,b=P;break}return[r*255,g*255,b*255]}function D3(u){return r_(o_(u))}function M3(u){return u0(o_(u))}function L3(u){return n_(o_(u))}function R3(u){return a_(o_(u))}function s_(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,x=u[3]/100,_,o,z;return _=1-Math.min(1,h*(1-x)+x),o=1-Math.min(1,f*(1-x)+x),z=1-Math.min(1,y*(1-x)+x),[_*255,o*255,z*255]}function B3(u){return r_(s_(u))}function O3(u){return u0(s_(u))}function V3(u){return i_(s_(u))}function F3(u){return a_(s_(u))}function Fk(u){var h=u[0]/100,f=u[1]/100,y=u[2]/100,x,_,o;return x=h*3.2406+f*-1.5372+y*-.4986,_=h*-.9689+f*1.8758+y*.0415,o=h*.0557+f*-.204+y*1.057,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x=x*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,x=Math.min(Math.max(0,x),1),_=Math.min(Math.max(0,_),1),o=Math.min(Math.max(0,o),1),[x*255,_*255,o*255]}function Nk(u){var h=u[0],f=u[1],y=u[2],x,_,o;return h/=95.047,f/=100,y/=108.883,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,x=116*f-16,_=500*(h-f),o=200*(f-y),[x,_,o]}function N3(u){return Ux(Nk(u))}function Nx(u){var h=u[0],f=u[1],y=u[2],x,_,o,z;return h<=8?(_=h*100/903.3,z=7.787*(_/100)+16/116):(_=100*Math.pow((h+16)/116,3),z=Math.pow(_/100,1/3)),x=x/95.047<=.008856?x=95.047*(f/500+z-16/116)/7.787:95.047*Math.pow(f/500+z,3),o=o/108.883<=.008859?o=108.883*(z-y/200-16/116)/7.787:108.883*Math.pow(z-y/200,3),[x,_,o]}function Ux(u){var h=u[0],f=u[1],y=u[2],x,_,o;return x=Math.atan2(y,f),_=x*360/2/Math.PI,_<0&&(_+=360),o=Math.sqrt(f*f+y*y),[h,o,_]}function Uk(u){return Fk(Nx(u))}function qx(u){var h=u[0],f=u[1],y=u[2],x,_,o;return o=y/360*2*Math.PI,x=f*Math.cos(o),_=f*Math.sin(o),[h,x,_]}function U3(u){return Nx(qx(u))}function q3(u){return Uk(qx(u))}function hy(u){return zx[u]}function j3(u){return r_(hy(u))}function Z3(u){return u0(hy(u))}function G3(u){return i_(hy(u))}function K3(u){return n_(hy(u))}function H3(u){return Fx(hy(u))}function X3(u){return Vx(hy(u))}var zx={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},qk={};for(var gS in zx)qk[JSON.stringify(zx[gS])]=gS;var wx=w3,sy=function(){return new l_};for(var Wg in wx){sy[Wg+"Raw"]=function(u){return function(h){return typeof h=="number"&&(h=Array.prototype.slice.call(arguments)),wx[u](h)}}(Wg);var _S=/(\w+)2(\w+)/.exec(Wg),Ex=_S[1],W3=_S[2];sy[Ex]=sy[Ex]||{},sy[Ex][W3]=sy[Wg]=function(u){return function(h){typeof h=="number"&&(h=Array.prototype.slice.call(arguments));var f=wx[u](h);if(typeof f=="string"||f===void 0)return f;for(var y=0;y<f.length;y++)f[y]=Math.round(f[y]);return f}}(Wg)}var l_=function(){this.convs={}};l_.prototype.routeSpace=function(u,h){var f=h[0];return f===void 0?this.getValues(u):(typeof f=="number"&&(f=Array.prototype.slice.call(h)),this.setValues(u,f))};l_.prototype.setValues=function(u,h){return this.space=u,this.convs={},this.convs[u]=h,this};l_.prototype.getValues=function(u){var h=this.convs[u];if(!h){var f=this.space,y=this.convs[f];h=sy[f][u](y),this.convs[u]=h}return h};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(u){l_.prototype[u]=function(h){return this.routeSpace(u,arguments)}});var Y3=sy,Sx=Y3,J3=function(u){var h,f,y,x;if(h=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(u)){var _=h[1],o=_.replace(/a$/,""),z=o==="cmyk"?4:3;f=Sx[o],y=h[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(F,V){return/%$/.test(F)&&V===z?parseFloat(F)/100:(/%$/.test(F),parseFloat(F))}),_===o&&y.push(1),x=y[z]===void 0?1:y[z],y=y.slice(0,z),f[o]=function(){return y}}else if(/^#[A-Fa-f0-9]+$/.test(u)){var o=u.replace(/^#/,""),z=o.length;f=Sx.rgb,y=o.split(z===3?/(.)/:/(..)/),y=y.filter(Boolean).map(function(j){return parseInt(z===3?j+j:j,16)}),x=1,f.rgb=function(){return y},y[0]||(y[0]=0),y[1]||(y[1]=0),y[2]||(y[2]=0)}else f=Sx.keyword,f.keyword=function(){return u},y=u,x=1;var P={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{P.rgb=f.rgb(y)}catch{}try{P.hsl=f.hsl(y)}catch{}try{P.hsv=f.hsv(y)}catch{}try{P.cmyk=f.cmyk(y)}catch{}try{P.keyword=f.keyword(y)}catch{}return P.rgb&&(P.hex="#"+P.rgb.map(function(F){var V=F.toString(16);return V.length===1?"0"+V:V}).join("")),P.rgb&&(P.rgba=P.rgb.concat(x)),P.hsl&&(P.hsla=P.hsl.concat(x)),P.hsv&&(P.hsva=P.hsv.concat(x)),P.cmyk&&(P.cmyka=P.cmyk.concat(x)),P};function Q3(u){let h,f;const y=u[5].default,x=Wv(y,u,u[4],null);return{c(){h=M("span"),x&&x.c(),this.h()},l(_){h=L(_,"SPAN",{class:!0,style:!0,role:!0});var o=R(h);x&&x.l(o),o.forEach(T),this.h()},h(){S(h,"class","em svelte-s1t2y4"),ie(h,"background-color",u[0]),ie(h,"color",u[2]),S(h,"role","presentation"),wi(h,"nowrap",u[1])},m(_,o){Pe(_,h,o),x&&x.m(h,null),f=!0},p(_,[o]){x&&x.p&&(!f||o&16)&&Yv(x,y,_,_[4],f?Qv(y,_[4],o,null):Jv(_[4]),null),(!f||o&1)&&ie(h,"background-color",_[0]),(!f||o&4)&&ie(h,"color",_[2]),o&2&&wi(h,"nowrap",_[1])},i(_){f||(et(x,_),f=!0)},o(_){pt(x,_),f=!1},d(_){_&&T(h),x&&x.d(_)}}}function $3(u,h,f){let y,{$$slots:x={},$$scope:_}=h,{color:o="lightgrey"}=h,{nowrap:z=!0}=h;function P(V){return(V[0]*299+V[1]*587+V[2]*114)/1e3>125?"black":"white"}let F="black";return u.$$set=V=>{"color"in V&&f(0,o=V.color),"nowrap"in V&&f(1,z=V.nowrap),"$$scope"in V&&f(4,_=V.$$scope)},u.$$.update=()=>{u.$$.dirty&1&&f(3,y=J3(o).rgb),u.$$.dirty&8&&y&&f(2,F=P(y))},[o,z,F,y,_,x]}class p0 extends Wo{constructor(h){super(),Yo(this,h,$3,Q3,Jo,{color:0,nowrap:1})}}function bS(u,h,f){const y=u.slice();return y[33]=h[f],y[36]=h,y[35]=f,y}function xS(u,h,f){const y=u.slice();return y[33]=h[f],y[34]=h,y[35]=f,y}function eT(u){let h,f,y=(u[0]?u[0]:"Select one")+"",x,_,o,z,P,F;return{c(){h=M("a"),f=M("span"),x=ee(y),_=_e(),o=M("span"),z=ee("\xA0"),this.h()},l(V){h=L(V,"A",{id:!0,class:!0});var j=R(h);f=L(j,"SPAN",{class:!0});var U=R(f);x=te(U,y),U.forEach(T),_=be(j),o=L(j,"SPAN",{class:!0});var fe=R(o);z=te(fe,"\xA0"),fe.forEach(T),j.forEach(T),this.h()},h(){S(f,"class","svelte-13flvue"),S(o,"class","button svelte-13flvue"),wi(o,"search",u[3]),wi(o,"down",!u[3]),S(h,"id","toggle"),S(h,"class","svelte-13flvue")},m(V,j){Pe(V,h,j),w(h,f),w(f,x),w(h,_),w(h,o),w(o,z),P||(F=Ri(h,"click",u[12]),P=!0)},p(V,j){j[0]&1&&y!==(y=(V[0]?V[0]:"Select one")+"")&&ft(x,y),j[0]&8&&wi(o,"search",V[3]),j[0]&8&&wi(o,"down",!V[3])},d(V){V&&T(h),P=!1,F()}}}function tT(u){let h,f,y=u[5][u[1]]+"",x,_,o,z,P,F,V,j=u[2]&&wS(u);return{c(){h=M("a"),f=M("span"),x=ee(y),_=_e(),j&&j.c(),o=_e(),z=M("span"),P=ee("\xA0"),this.h()},l(U){h=L(U,"A",{id:!0,class:!0});var fe=R(h);f=L(fe,"SPAN",{class:!0});var he=R(f);x=te(he,y),_=be(he),j&&j.l(he),he.forEach(T),o=be(fe),z=L(fe,"SPAN",{class:!0});var Ie=R(z);P=te(Ie,"\xA0"),Ie.forEach(T),fe.forEach(T),this.h()},h(){S(f,"class","selection svelte-13flvue"),S(z,"class","button close svelte-13flvue"),S(h,"id","toggle"),S(h,"class","selected svelte-13flvue")},m(U,fe){Pe(U,h,fe),w(h,f),w(f,x),w(f,_),j&&j.m(f,null),w(h,o),w(h,z),w(z,P),F||(V=[Ri(z,"click",u[14]),Ri(h,"click",u[12])],F=!0)},p(U,fe){fe[0]&34&&y!==(y=U[5][U[1]]+"")&&ft(x,y),U[2]?j?j.p(U,fe):(j=wS(U),j.c(),j.m(f,null)):j&&(j.d(1),j=null)},d(U){U&&T(h),j&&j.d(),F=!1,Xc(V)}}}function wS(u){let h,f=u[5][u[2]]+"",y;return{c(){h=M("small"),y=ee(f),this.h()},l(x){h=L(x,"SMALL",{class:!0});var _=R(h);y=te(_,f),_.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(x,_){Pe(x,h,_),w(h,y)},p(x,_){_[0]&36&&f!==(f=x[5][x[2]]+"")&&ft(y,f)},d(x){x&&T(h)}}}function ES(u){let h,f,y,x,_,o;function z(V,j){return V[4].length<3?aT:V[8][0]&&V[2]?nT:V[8][0]?iT:rT}let P=z(u),F=P(u);return{c(){h=M("div"),f=M("input"),y=_e(),x=M("ul"),F.c(),this.h()},l(V){h=L(V,"DIV",{id:!0,style:!0,class:!0});var j=R(h);f=L(j,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,onfocus:!0,class:!0}),y=be(j),x=L(j,"UL",{class:!0});var U=R(x);F.l(U),U.forEach(T),j.forEach(T),this.h()},h(){S(f,"type","text"),S(f,"placeholder",""),S(f,"autocomplete","false"),f.autofocus="autofocus",S(f,"onfocus","this.select()"),S(f,"class","svelte-13flvue"),S(x,"class","svelte-13flvue"),S(h,"id","dropdown"),ie(h,"top","0"),S(h,"class","svelte-13flvue")},m(V,j){Pe(V,h,j),w(h,f),pS(f,u[4]),u[24](f),w(h,y),w(h,x),F.m(x,null),u[31](h),f.focus(),_||(o=[Ri(f,"input",u[23]),Ri(f,"keyup",u[16])],_=!0)},p(V,j){j[0]&16&&f.value!==V[4]&&pS(f,V[4]),P===(P=z(V))&&F?F.p(V,j):(F.d(1),F=P(V),F&&(F.c(),F.m(x,null)))},d(V){V&&T(h),u[24](null),F.d(),u[31](null),_=!1,Xc(o)}}}function rT(u){let h,f;return{c(){h=M("li"),f=ee("No results"),this.h()},l(y){h=L(y,"LI",{class:!0});var x=R(h);f=te(x,"No results"),x.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,x){Pe(y,h,x),w(h,f)},p:ln,d(y){y&&T(h)}}}function iT(u){let h,f=u[8],y=[];for(let x=0;x<f.length;x+=1)y[x]=SS(bS(u,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();h=An()},l(x){for(let _=0;_<y.length;_+=1)y[_].l(x);h=An()},m(x,_){for(let o=0;o<y.length;o+=1)y[o].m(x,_);Pe(x,h,_)},p(x,_){if(_[0]&10626){f=x[8];let o;for(o=0;o<f.length;o+=1){const z=bS(x,f,o);y[o]?y[o].p(z,_):(y[o]=SS(z),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){Wc(y,x),x&&T(h)}}}function nT(u){let h,f=u[8],y=[];for(let x=0;x<f.length;x+=1)y[x]=kS(xS(u,f,x));return{c(){for(let x=0;x<y.length;x+=1)y[x].c();h=An()},l(x){for(let _=0;_<y.length;_+=1)y[_].l(x);h=An()},m(x,_){for(let o=0;o<y.length;o+=1)y[o].m(x,_);Pe(x,h,_)},p(x,_){if(_[0]&10630){f=x[8];let o;for(o=0;o<f.length;o+=1){const z=xS(x,f,o);y[o]?y[o].p(z,_):(y[o]=kS(z),y[o].c(),y[o].m(h.parentNode,h))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){Wc(y,x),x&&T(h)}}}function aT(u){let h,f;return{c(){h=M("li"),f=ee("Type a name..."),this.h()},l(y){h=L(y,"LI",{class:!0});var x=R(h);f=te(x,"Type a name..."),x.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue")},m(y,x){Pe(y,h,x),w(h,f)},p:ln,d(y){y&&T(h)}}}function SS(u){let h,f=u[33][u[1]]+"",y,x,_=u[35],o,z;function P(){return u[28](u[33])}function F(){return u[29](u[35])}const V=()=>u[30](h,_),j=()=>u[30](null,_);return{c(){h=M("li"),y=ee(f),x=_e(),this.h()},l(U){h=L(U,"LI",{class:!0});var fe=R(h);y=te(fe,f),x=be(fe),fe.forEach(T),this.h()},h(){S(h,"class","svelte-13flvue"),wi(h,"highlight",u[7]==u[35])},m(U,fe){Pe(U,h,fe),w(h,y),w(h,x),V(),o||(z=[Ri(h,"click",P),Ri(h,"mouseover",F)],o=!0)},p(U,fe){u=U,fe[0]&258&&f!==(f=u[33][u[1]]+"")&&ft(y,f),_!==u[35]&&(j(),_=u[35],V()),fe[0]&128&&wi(h,"highlight",u[7]==u[35])},d(U){U&&T(h),j(),o=!1,Xc(z)}}}function kS(u){let h,f=u[33][u[1]]+"",y,x,_,o=u[33][u[2]]+"",z,P,F=u[35],V,j;function U(){return u[25](u[33])}function fe(){return u[26](u[35])}const he=()=>u[27](h,F),Ie=()=>u[27](null,F);return{c(){h=M("li"),y=ee(f),x=_e(),_=M("small"),z=ee(o),P=_e(),this.h()},l(we){h=L(we,"LI",{class:!0});var Ve=R(h);y=te(Ve,f),x=be(Ve),_=L(Ve,"SMALL",{class:!0});var Ue=R(_);z=te(Ue,o),Ue.forEach(T),P=be(Ve),Ve.forEach(T),this.h()},h(){S(_,"class","svelte-13flvue"),S(h,"class","svelte-13flvue"),wi(h,"highlight",u[7]==u[35])},m(we,Ve){Pe(we,h,Ve),w(h,y),w(h,x),w(h,_),w(_,z),w(h,P),he(),V||(j=[Ri(h,"click",U),Ri(h,"mouseover",fe)],V=!0)},p(we,Ve){u=we,Ve[0]&258&&f!==(f=u[33][u[1]]+"")&&ft(y,f),Ve[0]&260&&o!==(o=u[33][u[2]]+"")&&ft(z,o),F!==u[35]&&(Ie(),F=u[35],he()),Ve[0]&128&&wi(h,"highlight",u[7]==u[35])},d(we){we&&T(h),Ie(),V=!1,Xc(j)}}}function oT(u){let h,f,y,x;function _(F,V){return F[5]&&!F[3]?tT:eT}let o=_(u),z=o(u),P=u[6]&&ES(u);return{c(){h=M("div"),z.c(),f=_e(),P&&P.c(),this.h()},l(F){h=L(F,"DIV",{id:!0,class:!0});var V=R(h);z.l(V),f=be(V),P&&P.l(V),V.forEach(T),this.h()},h(){S(h,"id","select"),S(h,"class","svelte-13flvue"),wi(h,"active",u[6])},m(F,V){Pe(F,h,V),z.m(h,null),w(h,f),P&&P.m(h,null),y||(x=[Ri(window,"click",u[17]),Ri(h,"keydown",u[15])],y=!0)},p(F,V){o===(o=_(F))&&z?z.p(F,V):(z.d(1),z=o(F),z&&(z.c(),z.m(h,f))),F[6]?P?P.p(F,V):(P=ES(F),P.c(),P.m(h,null)):P&&(P.d(1),P=null),V[0]&64&&wi(h,"active",F[6])},i:ln,o:ln,d(F){F&&T(h),z.d(),P&&P.d(),y=!1,Xc(x)}}}function sT(u){return new Promise(h=>setTimeout(h,u))}function lT(u,h,f){let y;const x=Rk();let{search_data:_}=h,{selected:o=null}=h,{placeholder:z="Enter a town or area name"}=h,{value:P="code"}=h,{label:F="name"}=h,{group:V=null}=h,{search:j=!1}=h,U=o,fe=o?_.find(vt=>{vt[P]==o[P]}):null,he=!1,Ie="",we=null,Ve,Ue,Ot,Mt=[];function mt(vt){vt.stopPropagation(),f(4,Ie=""),f(6,he=!he),sT(10).then(()=>{Ot&&he&&Ot.focus()})}function Qe(vt){f(18,o=vt),f(6,he=!1),x("select",{selected:vt,value:vt[P]})}function kr(vt){vt.stopPropagation(),f(18,o=null),f(21,U=null),f(5,fe=null),x("select",{selected:null,value:null})}function xr(vt){he&&Ve[0]&&Number.isInteger(we)&&(vt.keyCode===38?(f(7,we-=we>0?1:0),Mt[we].scrollIntoView({block:"nearest",inline:"start"})):vt.keyCode===40&&(f(7,we+=we<Ve.length-1?1:0),Mt[we].scrollIntoView({block:"nearest",inline:"end"})))}function ar(vt){Ve[0]&&Number.isInteger(we)&&vt.keyCode===13&&Qe(Ve[we])}function It(vt){vt.target!==Ue&&(f(6,he=!1),f(7,we=0))}function At(){Ie=this.value,f(4,Ie)}function Tr(vt){of[vt?"unshift":"push"](()=>{Ot=vt,f(10,Ot)})}const Vt=vt=>Qe(vt),Ir=vt=>f(7,we=vt);function rt(vt,nt){of[vt?"unshift":"push"](()=>{Mt[nt]=vt,f(11,Mt)})}const lr=vt=>Qe(vt),ri=vt=>f(7,we=vt);function ci(vt,nt){of[vt?"unshift":"push"](()=>{Mt[nt]=vt,f(11,Mt)})}function Er(vt){of[vt?"unshift":"push"](()=>{Ue=vt,f(9,Ue)})}return u.$$set=vt=>{"search_data"in vt&&f(19,_=vt.search_data),"selected"in vt&&f(18,o=vt.selected),"placeholder"in vt&&f(0,z=vt.placeholder),"value"in vt&&f(20,P=vt.value),"label"in vt&&f(1,F=vt.label),"group"in vt&&f(2,V=vt.group),"search"in vt&&f(3,j=vt.search)},u.$$.update=()=>{u.$$.dirty[0]&16&&f(22,y=Ie?new RegExp(Ie,"i"):null),u.$$.dirty[0]&4718594&&(f(8,Ve=y?_.filter(vt=>y.test(vt[F])):_),f(7,we=0)),u.$$.dirty[0]&3932160&&U!=o&&(f(5,fe=_.find(vt=>vt[P]==o[P])),f(21,U=o))},[z,F,V,j,Ie,fe,he,we,Ve,Ue,Ot,Mt,mt,Qe,kr,xr,ar,It,o,_,P,U,y,At,Tr,Vt,Ir,rt,lr,ri,ci,Er]}class uT extends Wo{constructor(h){super(),Yo(this,h,lT,oT,Jo,{search_data:19,selected:18,placeholder:0,value:20,label:1,group:2,search:3},null,[-1,-1])}}var Jg={exports:{}};(function(u,h){(function(f,y){u.exports=y()})(x3,function(){var f,y,x;function _(o,z){if(!f)f=z;else if(!y)y=z;else{var P="var sharedChunk = {}; ("+f+")(sharedChunk); ("+y+")(sharedChunk);",F={};f(F),x=z(F),typeof window<"u"&&(x.workerUrl=window.URL.createObjectURL(new Blob([P],{type:"text/javascript"})))}}return _(["exports"],function(o){function z(e,t){return e(t={exports:{}},t.exports),t.exports}var P=F;function F(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}F.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},F.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},F.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},F.prototype.solveCurveX=function(e,t){var i,l,p,d,v;for(t===void 0&&(t=1e-6),p=e,v=0;v<8;v++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var I=this.sampleCurveDerivativeX(p);if(Math.abs(I)<1e-6)break;p-=d/I}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},F.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var V=j;function j(e,t){this.x=e,this.y=t}j.prototype={clone:function(){return new j(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},j.convert=function(e){return e instanceof j?e:Array.isArray(e)?new j(e[0],e[1]):e};var U=typeof self<"u"?self:{},fe=Math.pow(2,53)-1;function he(e,t,i,l){var p=new P(e,t,i,l);return function(d){return p.solve(d)}}var Ie=he(.25,.1,.25,1);function we(e,t,i){return Math.min(i,Math.max(t,e))}function Ve(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function Ue(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}var Ot=1;function Mt(){return Ot++}function mt(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Qe(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function kr(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function xr(e,t){return e.indexOf(t,e.length-t.length)!==-1}function ar(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function It(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function At(e){return Array.isArray(e)?e.map(At):typeof e=="object"&&e?ar(e,At):e}var Tr={};function Vt(e){Tr[e]||(typeof console<"u"&&console.warn(e),Tr[e]=!0)}function Ir(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function rt(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,v=void 0;i<l;p=i++)t+=((v=e[p]).x-(d=e[i]).x)*(d.y+v.y);return t}function lr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ri(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,v){var I=d||v;return t[p]=!I||I.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var ci=null;function Er(e){if(ci==null){var t=e.navigator?e.navigator.userAgent:null;ci=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return ci}function vt(e){try{var t=U[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var nt,fr,On,sa,Ti=U.performance&&U.performance.now?U.performance.now.bind(U.performance):Date.now.bind(Date),vn=U.requestAnimationFrame||U.mozRequestAnimationFrame||U.webkitRequestAnimationFrame||U.msRequestAnimationFrame,oi=U.cancelAnimationFrame||U.mozCancelAnimationFrame||U.webkitCancelAnimationFrame||U.msCancelAnimationFrame,Sa={now:Ti,frame:function(e){var t=vn(e);return{cancel:function(){return oi(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=U.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return nt||(nt=U.document.createElement("a")),nt.href=e,nt.href},hardwareConcurrency:U.navigator&&U.navigator.hardwareConcurrency||4,get devicePixelRatio(){return U.devicePixelRatio},get prefersReducedMotion(){return!!U.matchMedia&&(fr==null&&(fr=U.matchMedia("(prefers-reduced-motion: reduce)")),fr.matches)}},gr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Vn={supported:!1,testSupport:function(e){!Qa&&sa&&(Vr?Lt(e):On=e)}},Qa=!1,Vr=!1;function Lt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,sa),e.isContextLost())return;Vn.supported=!0}catch{}e.deleteTexture(t),Qa=!0}U.document&&((sa=U.document.createElement("img")).onload=function(){On&&Lt(On),On=null,Vr=!0},sa.onerror=function(){Qa=!0,On=null},sa.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Wi="01",Bi=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function hi(e){return e.indexOf("mapbox:")===0}Bi.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Wi,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Bi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Bi.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Bi.prototype.normalizeStyleURL=function(e,t){if(!hi(e))return e;var i=Mr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Bi.prototype.normalizeGlyphsURL=function(e,t){if(!hi(e))return e;var i=Mr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Bi.prototype.normalizeSourceURL=function(e,t){if(!hi(e))return e;var i=Mr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Bi.prototype.normalizeSpriteURL=function(e,t,i,l){var p=Mr(e);return hi(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,di(p))},Bi.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!hi(e))return e;var i=Mr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Sa.devicePixelRatio>=2||t===512?"@2x":"")+(Vn.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,v=p;d<v.length;d+=1){var I=v[d].match(/^access_token=(.*)$/);if(I)return I[1]}return null}(i.params)||gr.ACCESS_TOKEN;return gr.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Bi.prototype.canonicalizeTileURL=function(e,t){var i=Mr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Bi.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&hi(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var v=d[p];Jt(v)?l.push(this.canonicalizeTileURL(v,i)):l.push(v)}return l},Bi.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=Mr(gr.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!gr.REQUIRE_ACCESS_TOKEN)return di(e);if(!(t=t||gr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),di(e)};var ho=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Jt(e){return ho.test(e)}var Ei=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Mr(e){var t=e.match(Ei);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function di(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function mi(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(U.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ar=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ar.prototype.getStorageKey=function(e){var t,i=mi(gr.ACCESS_TOKEN);return t=i&&i.u?U.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(Number("0x"+p))})):gr.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Ar.prototype.fetchEventData=function(){var e=vt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=U.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=U.localStorage.getItem(i);p&&(this.anonId=p)}catch{Vt("Unable to read from LocalStorage")}},Ar.prototype.saveEventData=function(){var e=vt("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{U.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&U.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Vt("Unable to write to LocalStorage")}},Ar.prototype.processRequests=function(e){},Ar.prototype.postEvent=function(e,t,i,l){var p=this;if(gr.EVENTS_URL){var d=Mr(gr.EVENTS_URL);d.params.push("access_token="+(l||gr.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:Wi,userId:this.anonId},I=t?Ue(v,t):v,C={url:di(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([I])};this.pendingRequest=Nr(C,function(D){p.pendingRequest=null,i(D),p.saveEventData(),p.processRequests(l)})}},Ar.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var yi,un,Kr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p,(gr.EVENTS_URL&&d||gr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(v){return hi(v)||Jt(v)}))&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,v=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),Qe(this.anonId)||(this.anonId=mt()),this.postEvent(v,{skuToken:this.skuToken},function(I){I||d&&(l.success[d]=!0)},i))}},t}(Ar),hr=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){gr.EVENTS_URL&&gr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return hi(p)||Jt(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=mi(gr.ACCESS_TOKEN),d=p?p.u:gr.ACCESS_TOKEN,v=d!==this.eventData.tokenU;Qe(this.anonId)||(this.anonId=mt(),v=!0);var I=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),D=new Date(I),O=(I-this.eventData.lastSuccess)/864e5;v=v||O>=1||O<-1||C.getDate()!==D.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(I,{"enabled.telemetry":!1},function(q){q||(l.eventData.lastSuccess=I,l.eventData.tokenU=d)},i)}},t}(Ar)),Fr=hr.postTurnstileEvent.bind(hr),Yn=new Kr,Fn=Yn.postMapLoadEvent.bind(Yn),La=500,Qo=50;function pi(){U.caches&&!yi&&(yi=U.caches.open("mapbox-tiles"))}function cn(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var gn,po=1/0;function la(){return gn==null&&(gn=U.OffscreenCanvas&&new U.OffscreenCanvas(1,1).getContext("2d")&&typeof U.createImageBitmap=="function"),gn}var ml={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ml);var $o=function(e){function t(i,l,p){l===401&&Jt(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Nn=lr()?function(){return self.worker&&self.worker.referrer}:function(){return(U.location.protocol==="blob:"?U.parent:U).location.href},_n,ua,Jn=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Nn())&&!/^\w+:/.test(i))){if(U.fetch&&U.Request&&U.AbortController&&U.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,v=new U.AbortController,I=new U.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Nn(),signal:v.signal}),C=!1,D=!1,O=(d=I.url).indexOf("sku=")>0&&Jt(d);l.type==="json"&&I.headers.set("Accept","application/json");var q=function(W,se,le){if(!D){if(W&&W.message!=="SecurityError"&&Vt(W),se&&le)return K(se);var ye=Date.now();U.fetch(I).then(function(pe){if(pe.ok){var Ee=O?pe.clone():null;return K(pe,Ee,ye)}return p(new $o(pe.statusText,pe.status,l.url))}).catch(function(pe){pe.code!==20&&p(new Error(pe.message))})}},K=function(W,se,le){(l.type==="arrayBuffer"?W.arrayBuffer():l.type==="json"?W.json():W.text()).then(function(ye){D||(se&&le&&function(pe,Ee,Ae){if(pi(),yi){var De={status:Ee.status,statusText:Ee.statusText,headers:new U.Headers};Ee.headers.forEach(function(Fe,Ke){return De.headers.set(Ke,Fe)});var Me=ri(Ee.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&De.headers.set("Expires",new Date(Ae+1e3*Me["max-age"]).toUTCString()),new Date(De.headers.get("Expires")).getTime()-Ae<42e4||function(Fe,Ke){if(un===void 0)try{new Response(new ReadableStream),un=!0}catch{un=!1}un?Ke(Fe.body):Fe.blob().then(Ke)}(Ee,function(Fe){var Ke=new U.Response(Fe,De);pi(),yi&&yi.then(function(Ye){return Ye.put(cn(pe.url),Ke)}).catch(function(Ye){return Vt(Ye.message)})}))}}(I,se,le),C=!0,p(null,ye,W.headers.get("Cache-Control"),W.headers.get("Expires")))}).catch(function(ye){D||p(new Error(ye.message))})};return O?function(W,se){if(pi(),!yi)return se(null);var le=cn(W.url);yi.then(function(ye){ye.match(le).then(function(pe){var Ee=function(Ae){if(!Ae)return!1;var De=new Date(Ae.headers.get("Expires")||0),Me=ri(Ae.headers.get("Cache-Control")||"");return De>Date.now()&&!Me["no-cache"]}(pe);ye.delete(le),Ee&&ye.put(le,pe.clone()),se(null,pe,Ee)}).catch(se)}).catch(se)}(I,q):q(null,null),{cancel:function(){D=!0,C||v.abort()}}}(e,t);if(lr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new U.XMLHttpRequest;for(var v in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(v,l.headers[v]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var I=d.response;if(l.type==="json")try{I=JSON.parse(d.response)}catch(C){return p(C)}p(null,I,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new $o(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},ca=function(e,t){return Jn(Ue(e,{type:"arrayBuffer"}),t)},Nr=function(e,t){return Jn(Ue(e,{method:"POST"}),t)},N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";_n=[],ua=0;var G=function(e,t){if(Vn.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ua>=gr.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return _n.push(i),i}ua++;var l=!1,p=function(){if(!l)for(l=!0,ua--;_n.length&&ua<gr.MAX_PARALLEL_IMAGE_REQUESTS;){var v=_n.shift();v.cancelled||(v.cancel=G(v.requestParameters,v.callback).cancel)}},d=ca(e,function(v,I,C,D){p(),v?t(v):I&&(la()?function(O,q){var K=new U.Blob([new Uint8Array(O)],{type:"image/png"});U.createImageBitmap(K).then(function(W){q(null,W)}).catch(function(W){q(new Error("Could not load image because of "+W.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(I,t):function(O,q,K,W){var se=new U.Image,le=U.URL;se.onload=function(){q(null,se),le.revokeObjectURL(se.src),se.onload=null,U.requestAnimationFrame(function(){se.src=N})},se.onerror=function(){return q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ye=new U.Blob([new Uint8Array(O)],{type:"image/png"});se.cacheControl=K,se.expires=W,se.src=O.byteLength?le.createObjectURL(ye):N}(I,t,C,D))});return{cancel:function(){d.cancel(),p()}}};function X(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function re(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var ue=function(e,t){t===void 0&&(t={}),Ue(this,t),this.type=e},ve=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",Ue({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ue),xe=function(){};xe.prototype.on=function(e,t){return this._listeners=this._listeners||{},X(e,t,this._listeners),this},xe.prototype.off=function(e,t){return re(e,t,this._listeners),re(e,t,this._oneTimeListeners),this},xe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},X(e,t,this._oneTimeListeners),this},xe.prototype.fire=function(e,t){typeof e=="string"&&(e=new ue(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var I=v[d];re(i,I,this._oneTimeListeners),I.call(this,e)}var C=this._eventedParent;C&&(Ue(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(e))}else e instanceof ve&&console.error(e.error);return this},xe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},xe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var H={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},oe=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function Se(e){var t=e.value;return t?[new oe(e.key,t,"constants have been deprecated as of v8")]:[]}function Ne(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var l=0,p=t;l<p.length;l+=1){var d=p[l];for(var v in d)e[v]=d[v]}return e}function Ge(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Le(e){if(Array.isArray(e))return e.map(Le);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Le(e[i]);return t}return Ge(e)}var qe=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),ht=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};ht.prototype.concat=function(e){return new ht(this,e)},ht.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},ht.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var at={kind:"null"},Re={kind:"number"},tt={kind:"string"},We={kind:"boolean"},$e={kind:"color"},Nt={kind:"object"},Ze={kind:"value"},Gt={kind:"collator"},or={kind:"formatted"},Ct={kind:"resolvedImage"};function tr(e,t){return{kind:"array",itemType:e,N:t}}function er(e){if(e.kind==="array"){var t=er(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var Ai=[at,Re,tt,We,$e,or,Nt,tr(Ze),Ct];function rr(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!rr(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=Ai;i<l.length;i+=1)if(!rr(l[i],t))return null}}return"Expected "+er(e)+" but found "+er(t)+" instead."}function dr(e,t){return t.some(function(i){return i.kind===e.kind})}function pr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Kt=z(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(I){return(I=Math.round(I))<0?0:I>255?255:I}function p(I){return l(I[I.length-1]==="%"?parseFloat(I)/100*255:parseInt(I))}function d(I){return(C=I[I.length-1]==="%"?parseFloat(I)/100:parseFloat(I))<0?0:C>1?1:C;var C}function v(I,C,D){return D<0?D+=1:D>1&&(D-=1),6*D<1?I+(C-I)*D*6:2*D<1?C:3*D<2?I+(C-I)*(2/3-D)*6:I}try{t.parseCSSColor=function(I){var C,D=I.replace(/ /g,"").toLowerCase();if(D in i)return i[D].slice();if(D[0]==="#")return D.length===4?(C=parseInt(D.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:D.length===7&&(C=parseInt(D.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var O=D.indexOf("("),q=D.indexOf(")");if(O!==-1&&q+1===D.length){var K=D.substr(0,O),W=D.substr(O+1,q-(O+1)).split(","),se=1;switch(K){case"rgba":if(W.length!==4)return null;se=d(W.pop());case"rgb":return W.length!==3?null:[p(W[0]),p(W[1]),p(W[2]),se];case"hsla":if(W.length!==4)return null;se=d(W.pop());case"hsl":if(W.length!==3)return null;var le=(parseFloat(W[0])%360+360)%360/360,ye=d(W[1]),pe=d(W[2]),Ee=pe<=.5?pe*(ye+1):pe+ye-pe*ye,Ae=2*pe-Ee;return[l(255*v(Ae,Ee,le+1/3)),l(255*v(Ae,Ee,le)),l(255*v(Ae,Ee,le-1/3)),se];default:return null}}return null}}catch{}}).parseCSSColor,ir=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};ir.parse=function(e){if(e){if(e instanceof ir)return e;if(typeof e=="string"){var t=Kt(e);if(t)return new ir(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},ir.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},ir.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},ir.black=new ir(0,0,0,1),ir.white=new ir(1,1,1,1),ir.transparent=new ir(0,0,0,0),ir.red=new ir(1,0,0,1);var Oi=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Oi.prototype.compare=function(e,t){return this.collator.compare(e,t)},Oi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ha=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},vi=function(e){this.sections=e};vi.fromString=function(e){return new vi([new ha(e,null,null,null,null)])},vi.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},vi.factory=function(e){return e instanceof vi?e:vi.fromString(e)},vi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},vi.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var Yi=function(e){this.name=e.name,this.available=e.available};function bn(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ji(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof ir||e instanceof Oi||e instanceof vi||e instanceof Yi)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!Ji(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!Ji(e[l]))return!1;return!0}return!1}function mr(e){if(e===null)return at;if(typeof e=="string")return tt;if(typeof e=="boolean")return We;if(typeof e=="number")return Re;if(e instanceof ir)return $e;if(e instanceof Oi)return Gt;if(e instanceof vi)return or;if(e instanceof Yi)return Ct;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=mr(p[l]);if(t){if(t===d)continue;t=Ze;break}t=d}return tr(t||Ze,i)}return Nt}function Un(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof ir||e instanceof vi||e instanceof Yi?e.toString():JSON.stringify(e)}Yi.prototype.toString=function(){return this.name},Yi.fromString=function(e){return e?new Yi({name:e,available:!1}):null},Yi.prototype.serialize=function(){return["image",this.name]};var Vi=function(e,t){this.type=e,this.value=t};Vi.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Ji(e[1]))return t.error("invalid value");var i=e[1],l=mr(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new Vi(l,i)},Vi.prototype.evaluate=function(){return this.value},Vi.prototype.eachChild=function(){},Vi.prototype.outputDefined=function(){return!0},Vi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ir?["rgba"].concat(this.value.toArray()):this.value instanceof vi?this.value.serialize():this.value};var Hr=function(e){this.name="ExpressionEvaluationError",this.message=e};Hr.prototype.toJSON=function(){return this.message};var Qn={string:tt,number:Re,boolean:We,object:Nt},zr=function(e,t){this.type=e,this.args=t};zr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,v;if(e.length>2){var I=e[1];if(typeof I!="string"||!(I in Qn)||I==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=Qn[I],l++}else d=Ze;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);v=e[2],l++}i=tr(d,v)}else i=Qn[p];for(var C=[];l<e.length;l++){var D=t.parse(e[l],l,Ze);if(!D)return null;C.push(D)}return new zr(i,C)},zr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!rr(this.type,mr(i)))return i;if(t===this.args.length-1)throw new Hr("Expected value to be of type "+er(this.type)+", but found "+er(mr(i))+" instead.")}return null},zr.prototype.eachChild=function(e){this.args.forEach(e)},zr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},zr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var xn=function(e){this.type=or,this.sections=e};xn.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var v=e[d];if(p&&typeof v=="object"&&!Array.isArray(v)){p=!1;var I=null;if(v["font-scale"]&&!(I=t.parse(v["font-scale"],1,Re)))return null;var C=null;if(v["text-font"]&&!(C=t.parse(v["text-font"],1,tr(tt))))return null;var D=null;if(v["text-color"]&&!(D=t.parse(v["text-color"],1,$e)))return null;var O=l[l.length-1];O.scale=I,O.font=C,O.textColor=D}else{var q=t.parse(e[d],1,Ze);if(!q)return null;var K=q.type.kind;if(K!=="string"&&K!=="value"&&K!=="null"&&K!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:q,scale:null,font:null,textColor:null})}}return new xn(l)},xn.prototype.evaluate=function(e){return new vi(this.sections.map(function(t){var i=t.content.evaluate(e);return mr(i)===Ct?new ha("",i,null,null,null):new ha(Un(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},xn.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},xn.prototype.outputDefined=function(){return!1},xn.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var hn=function(e){this.type=Ct,this.input=e};hn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,tt);return i?new hn(i):t.error("No image name provided.")},hn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=Yi.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},hn.prototype.eachChild=function(e){e(this.input)},hn.prototype.outputDefined=function(){return!1},hn.prototype.serialize=function(){return["image",this.input.serialize()]};var Qu={"to-boolean":We,"to-color":$e,"to-number":Re,"to-string":tt},Fi=function(e,t){this.type=e,this.args=t};Fi.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=Qu[i],p=[],d=1;d<e.length;d++){var v=t.parse(e[d],d,Ze);if(!v)return null;p.push(v)}return new Fi(l,p)},Fi.prototype.evaluate=function(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof ir)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":bn(t[0],t[1],t[2],t[3])))return new ir(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Hr(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var v=null,I=0,C=this.args;I<C.length;I+=1){if((v=C[I].evaluate(e))===null)return 0;var D=Number(v);if(!isNaN(D))return D}throw new Hr("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?vi.fromString(Un(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Yi.fromString(Un(this.args[0].evaluate(e))):Un(this.args[0].evaluate(e))},Fi.prototype.eachChild=function(e){this.args.forEach(e)},Fi.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Fi.prototype.serialize=function(){if(this.type.kind==="formatted")return new xn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var fo=["Unknown","Point","LineString","Polygon"],pn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};pn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},pn.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?fo[this.feature.type]:this.feature.type:null},pn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},pn.prototype.canonicalID=function(){return this.canonical},pn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},pn.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ir.parse(e)),t};var Xr=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};Xr.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Xr.prototype.eachChild=function(e){this.args.forEach(e)},Xr.prototype.outputDefined=function(){return!1},Xr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Xr.parse=function(e,t){var i,l=e[0],p=Xr.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,I=v.filter(function(_t){var lt=_t[0];return!Array.isArray(lt)||lt.length===e.length-1}),C=null,D=0,O=I;D<O.length;D+=1){var q=O[D],K=q[0],W=q[1];C=new Wr(t.registry,t.path,null,t.scope);for(var se=[],le=!1,ye=1;ye<e.length;ye++){var pe=e[ye],Ee=Array.isArray(K)?K[ye-1]:K.type,Ae=C.parse(pe,1+se.length,Ee);if(!Ae){le=!0;break}se.push(Ae)}if(!le)if(Array.isArray(K)&&K.length!==se.length)C.error("Expected "+K.length+" arguments, but found "+se.length+" instead.");else{for(var De=0;De<se.length;De++){var Me=Array.isArray(K)?K[De]:K.type,Fe=se[De];C.concat(De+1).checkSubtype(Me,Fe.type)}if(C.errors.length===0)return new Xr(l,d,W,se)}}if(I.length===1)(i=t.errors).push.apply(i,C.errors);else{for(var Ke=(I.length?I:v).map(function(_t){var lt;return lt=_t[0],Array.isArray(lt)?"("+lt.map(er).join(", ")+")":"("+er(lt.type)+"...)"}).join(" | "),Ye=[],gt=1;gt<e.length;gt++){var st=t.parse(e[gt],1+Ye.length);if(!st)return null;Ye.push(er(st.type))}t.error("Expected arguments of type "+Ke+", but found ("+Ye.join(", ")+") instead.")}return null},Xr.register=function(e,t){for(var i in Xr.definitions=t,t)e[i]=Xr};var zi=function(e,t,i){this.type=Gt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function fi(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function mo(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function es(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function yd(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function yl(e,t){for(var i,l,p,d,v,I,C,D=!1,O=0,q=t.length;O<q;O++)for(var K=t[O],W=0,se=K.length;W<se-1;W++){if((d=(i=e)[0]-(l=K[W])[0])*(C=i[1]-(p=K[W+1])[1])-(I=i[0]-p[0])*(v=i[1]-l[1])==0&&d*I<=0&&v*C<=0)return!1;yd(e,K[W],K[W+1])&&(D=!D)}return D}function vl(e,t){for(var i=0;i<t.length;i++)if(yl(e,t[i]))return!0;return!1}function ts(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],v=(e[0]-i[0])*d-p*(e[1]-i[1]),I=(t[0]-i[0])*d-p*(t[1]-i[1]);return v>0&&I<0||v<0&&I>0}function ip(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],v=0;v<d.length-1;++v)if((q=[(O=d[v+1])[0]-(D=d[v])[0],O[1]-D[1]])[0]*(K=[(C=t)[0]-(I=e)[0],C[1]-I[1]])[1]-q[1]*K[0]!=0&&ts(I,C,D,O)&&ts(D,O,I,C))return!0;var I,C,D,O,q,K;return!1}function au(e,t){for(var i=0;i<e.length;++i)if(!yl(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(ip(e[l],e[l+1],t))return!1;return!0}function rs(e,t){for(var i=0;i<t.length;i++)if(au(e,t[i]))return!0;return!1}function yo(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],v=0;v<e[p].length;v++){var I=es(e[p][v],i);fi(t,I),d.push(I)}l.push(d)}return l}function ou(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=yo(e[p],t,i);l.push(d)}return l}function gl(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}fi(t,e)}function Yc(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],v=[],I=0,C=e;I<C.length;I+=1)for(var D=0,O=C[I];D<O.length;D+=1){var q=O[D],K=[q.x+d[0],q.y+d[1]];gl(K,t,i,p),v.push(K)}return v}function wn(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),v=[8192*l.x,8192*l.y],I=[],C=0,D=e;C<D.length;C+=1){for(var O=[],q=0,K=D[C];q<K.length;q+=1){var W=K[q],se=[W.x+v[0],W.y+v[1]];fi(t,se),O.push(se)}I.push(O)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var le=0,ye=I;le<ye.length;le+=1)for(var pe=0,Ee=ye[le];pe<Ee.length;pe+=1)gl(Ee[pe],t,i,d)}return I}zi.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,We);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,We);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,tt))?null:new zi(l,p,d)},zi.prototype.evaluate=function(e){return new Oi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},zi.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},zi.prototype.outputDefined=function(){return!1},zi.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Si=function(e,t){this.type=We,this.geojson=e,this.geometries=t};function qn(e){if(e instanceof Xr&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Si)return!1;var t=!0;return e.eachChild(function(i){t&&!qn(i)&&(t=!1)}),t}function ke(e){if(e instanceof Xr&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!ke(i)&&(t=!1)}),t}function Ni(e,t){if(e instanceof Xr&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!Ni(l,t)&&(i=!1)}),i}Si.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Ji(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Si(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Si(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Si(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Si.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=yo(i.coordinates,p,d),I=Yc(t.geometry(),l,p,d);if(!mo(l,p))return!1;for(var C=0,D=I;C<D.length;C+=1)if(!yl(D[C],v))return!1}if(i.type==="MultiPolygon"){var O=ou(i.coordinates,p,d),q=Yc(t.geometry(),l,p,d);if(!mo(l,p))return!1;for(var K=0,W=q;K<W.length;K+=1)if(!vl(W[K],O))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var v=yo(i.coordinates,p,d),I=wn(t.geometry(),l,p,d);if(!mo(l,p))return!1;for(var C=0,D=I;C<D.length;C+=1)if(!au(D[C],v))return!1}if(i.type==="MultiPolygon"){var O=ou(i.coordinates,p,d),q=wn(t.geometry(),l,p,d);if(!mo(l,p))return!1;for(var K=0,W=q;K<W.length;K+=1)if(!rs(W[K],O))return!1}return!0}(e,this.geometries)}return!1},Si.prototype.eachChild=function(){},Si.prototype.outputDefined=function(){return!0},Si.prototype.serialize=function(){return["within",this.geojson]};var zn=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};zn.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new zn(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},zn.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},zn.prototype.eachChild=function(){},zn.prototype.outputDefined=function(){return!1},zn.prototype.serialize=function(){return["var",this.name]};var Wr=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new ht),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function pa(e,t){for(var i,l=e.length-1,p=0,d=l,v=0;p<=d;)if((i=e[v=Math.floor((p+d)/2)])<=t){if(v===l||t<e[v+1])return v;p=v+1}else{if(!(i>t))throw new Hr("Input is not a number.");d=v-1}return 0}Wr.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},Wr.prototype._parse=function(e,t){function i(D,O,q){return q==="assert"?new zr(O,[D]):q==="coerce"?new Fi(O,[D]):D}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,I=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||I.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(v,I))return null}else d=i(d,v,t.typeAnnotation||"coerce");else d=i(d,v,t.typeAnnotation||"assert")}if(!(d instanceof Vi)&&d.type.kind!=="resolvedImage"&&function D(O){if(O instanceof zn)return D(O.boundExpression);if(O instanceof Xr&&O.name==="error"||O instanceof zi||O instanceof Si)return!1;var q=O instanceof Fi||O instanceof zr,K=!0;return O.eachChild(function(W){K=q?K&&D(W):K&&W instanceof Vi}),!!K&&qn(O)&&Ni(O,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var C=new pn;try{d=new Vi(d.type,d.evaluate(C))}catch(D){return this.error(D.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Wr.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Wr(this.registry,l,t||null,p,this.errors)},Wr.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var l=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new qe(l,e))},Wr.prototype.checkSubtype=function(e,t){var i=rr(e,t);return i&&this.error(i),i};var Pn=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function Pi(e,t,i){return e*(1-i)+t*i}Pn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Re);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],I=e[d+1],C=d,D=d+1;if(typeof v!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(l.length&&l[l.length-1][0]>=v)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var O=t.parse(I,D,p);if(!O)return null;p=p||O.type,l.push([v,O])}return new Pn(p,i,l)},Pn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[pa(t,l)].evaluate(e)},Pn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Pn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Pn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var su=Object.freeze({__proto__:null,number:Pi,color:function(e,t,i){return new ir(Pi(e.r,t.r,i),Pi(e.g,t.g,i),Pi(e.b,t.b,i),Pi(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return Pi(l,t[p],i)})}}),lu=6/29*3*(6/29),np=Math.PI/180,sf=180/Math.PI;function ap(e){return e>.008856451679035631?Math.pow(e,1/3):e/lu+4/29}function lf(e){return e>6/29?e*e*e:lu*(e-4/29)}function op(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Rs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function uu(e){var t=Rs(e.r),i=Rs(e.g),l=Rs(e.b),p=ap((.4124564*t+.3575761*i+.1804375*l)/.95047),d=ap((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-ap((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function vo(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*lf(t),i=.95047*lf(i),l=1.08883*lf(l),new ir(op(3.2404542*i-1.5371385*t-.4985314*l),op(-.969266*i+1.8760108*t+.041556*l),op(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function Jc(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var $u={forward:uu,reverse:vo,interpolate:function(e,t,i){return{l:Pi(e.l,t.l,i),a:Pi(e.a,t.a,i),b:Pi(e.b,t.b,i),alpha:Pi(e.alpha,t.alpha,i)}}},ec={forward:function(e){var t=uu(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*sf;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*np,i=e.c;return vo({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Jc(e.h,t.h,i),c:Pi(e.c,t.c,i),l:Pi(e.l,t.l,i),alpha:Pi(e.alpha,t.alpha,i)}}},_l=Object.freeze({__proto__:null,lab:$u,hcl:ec}),si=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,v=p;d<v.length;d+=1){var I=v[d],C=I[1];this.labels.push(I[0]),this.outputs.push(C)}};function sp(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}si.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=sp(t,e.base,i,l);else if(e.name==="linear")p=sp(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new P(d[0],d[1],d[2],d[3]).solve(sp(t,1,i,l))}return p},si.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var v=l[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:v}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var I=l.slice(1);if(I.length!==4||I.some(function(ye){return typeof ye!="number"||ye<0||ye>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:I}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Re)))return null;var C=[],D=null;i==="interpolate-hcl"||i==="interpolate-lab"?D=$e:t.expectedType&&t.expectedType.kind!=="value"&&(D=t.expectedType);for(var O=0;O<d.length;O+=2){var q=d[O],K=d[O+1],W=O+3,se=O+4;if(typeof q!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(C.length&&C[C.length-1][0]>=q)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);var le=t.parse(K,se,D);if(!le)return null;D=D||le.type,C.push([q,le])}return D.kind==="number"||D.kind==="color"||D.kind==="array"&&D.itemType.kind==="number"&&typeof D.N=="number"?new si(D,i,l,p,C):t.error("Type "+er(D)+" is not interpolatable.")},si.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=pa(t,l),v=si.interpolationFactor(this.interpolation,l,t[d],t[d+1]),I=i[d].evaluate(e),C=i[d+1].evaluate(e);return this.operator==="interpolate"?su[this.type.kind.toLowerCase()](I,C,v):this.operator==="interpolate-hcl"?ec.reverse(ec.interpolate(ec.forward(I),ec.forward(C),v)):$u.reverse($u.interpolate($u.forward(I),$u.forward(C),v))},si.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},si.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},si.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var go=function(e,t){this.type=e,this.args=t};go.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,v=e.slice(1);d<v.length;d+=1){var I=t.parse(v[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!I)return null;i=i||I.type,p.push(I)}var C=l&&p.some(function(D){return rr(l,D.type)});return new go(C?Ze:i,p)},go.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof Yi&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},go.prototype.eachChild=function(e){this.args.forEach(e)},go.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},go.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var is=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};is.prototype.evaluate=function(e){return this.result.evaluate(e)},is.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},is.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var v=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return v?new is(i,v):null},is.prototype.outputDefined=function(){return this.result.outputDefined()},is.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var bl=function(e,t,i){this.type=e,this.index=t,this.input=i};bl.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Re),l=t.parse(e[2],2,tr(t.expectedType||Ze));return i&&l?new bl(l.type.itemType,i,l):null},bl.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Hr("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new Hr("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new Hr("Array index must be an integer, but found "+t+" instead.");return i[t]},bl.prototype.eachChild=function(e){e(this.index),e(this.input)},bl.prototype.outputDefined=function(){return!1},bl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var _o=function(e,t){this.type=We,this.needle=e,this.haystack=t};_o.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ze),l=t.parse(e[2],2,Ze);return i&&l?dr(i.type,[We,tt,Re,at,Ze])?new _o(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+er(i.type)+" instead"):null},_o.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!pr(t,["boolean","string","number","null"]))throw new Hr("Expected first argument to be of type boolean, string, number or null, but found "+er(mr(t))+" instead.");if(!pr(i,["string","array"]))throw new Hr("Expected second argument to be of type array or string, but found "+er(mr(i))+" instead.");return i.indexOf(t)>=0},_o.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},_o.prototype.outputDefined=function(){return!0},_o.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Bs=function(e,t,i){this.type=Re,this.needle=e,this.haystack=t,this.fromIndex=i};Bs.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ze),l=t.parse(e[2],2,Ze);if(!i||!l)return null;if(!dr(i.type,[We,tt,Re,at,Ze]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+er(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Re);return p?new Bs(i,l,p):null}return new Bs(i,l)},Bs.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!pr(t,["boolean","string","number","null"]))throw new Hr("Expected first argument to be of type boolean, string, number or null, but found "+er(mr(t))+" instead.");if(!pr(i,["string","array"]))throw new Hr("Expected second argument to be of type array or string, but found "+er(mr(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},Bs.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Bs.prototype.outputDefined=function(){return!1},Bs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var xl=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};xl.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],v=2;v<e.length-1;v+=2){var I=e[v],C=e[v+1];Array.isArray(I)||(I=[I]);var D=t.concat(v);if(I.length===0)return D.error("Expected at least one branch label.");for(var O=0,q=I;O<q.length;O+=1){var K=q[O];if(typeof K!="number"&&typeof K!="string")return D.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return D.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof K=="number"&&Math.floor(K)!==K)return D.error("Numeric branch labels must be integer values.");if(i){if(D.checkSubtype(i,mr(K)))return null}else i=mr(K);if(p[String(K)]!==void 0)return D.error("Branch labels must be unique.");p[String(K)]=d.length}var W=t.parse(C,v,l);if(!W)return null;l=l||W.type,d.push(W)}var se=t.parse(e[1],1,Ze);if(!se)return null;var le=t.parse(e[e.length-1],e.length-1,l);return le?se.type.kind!=="value"&&t.concat(1).checkSubtype(i,se.type)?null:new xl(i,l,se,p,d,le):null},xl.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(mr(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},xl.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},xl.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},xl.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var v=d[p];(q=l[this.cases[v]])===void 0?(l[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[q][1].push(v)}for(var I=function(W){return e.inputType.kind==="number"?Number(W):W},C=0,D=i;C<D.length;C+=1){var O=D[C],q=O[0],K=O[1];t.push(K.length===1?I(K[0]):K.map(I)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Cn=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};Cn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,We);if(!d)return null;var v=t.parse(e[p+1],p+1,i);if(!v)return null;l.push([d,v]),i=i||v.type}var I=t.parse(e[e.length-1],e.length-1,i);return I?new Cn(i,l,I):null},Cn.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},Cn.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},Cn.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Cn.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Qi=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function $a(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Os(e,t,i,l){return l.compare(t,i)===0}function Lr(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,v,I){this.type=We,this.lhs=d,this.rhs=v,this.collator=I,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return p.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var I=d[0],C=v.parse(d[1],1,Ze);if(!C)return null;if(!$a(I,C.type))return v.concat(1).error('"'+I+`" comparisons are not supported for type '`+er(C.type)+"'.");var D=v.parse(d[2],2,Ze);if(!D)return null;if(!$a(I,D.type))return v.concat(2).error('"'+I+`" comparisons are not supported for type '`+er(D.type)+"'.");if(C.type.kind!==D.type.kind&&C.type.kind!=="value"&&D.type.kind!=="value")return v.error("Cannot compare types '"+er(C.type)+"' and '"+er(D.type)+"'.");l&&(C.type.kind==="value"&&D.type.kind!=="value"?C=new zr(D.type,[C]):C.type.kind!=="value"&&D.type.kind==="value"&&(D=new zr(C.type,[D])));var O=null;if(d.length===4){if(C.type.kind!=="string"&&D.type.kind!=="string"&&C.type.kind!=="value"&&D.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(O=v.parse(d[3],3,Gt)))return null}return new p(C,D,O)},p.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),I=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var C=mr(v),D=mr(I);if(C.kind!==D.kind||C.kind!=="string"&&C.kind!=="number")throw new Hr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+C.kind+", "+D.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var O=mr(v),q=mr(I);if(O.kind!=="string"||q.kind!=="string")return t(d,v,I)}return this.collator?i(d,v,I,this.collator.evaluate(d)):t(d,v,I)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},p}()}Qi.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ze),l=t.parse(e[2],2,Re);if(!i||!l)return null;if(!dr(i.type,[tr(Ze),tt,Ze]))return t.error("Expected first argument to be of type array or string, but found "+er(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Re);return p?new Qi(i.type,i,l,p):null}return new Qi(i.type,i,l)},Qi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!pr(t,["string","array"]))throw new Hr("Expected first argument to be of type array or string, but found "+er(mr(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},Qi.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Qi.prototype.outputDefined=function(){return!1},Qi.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var tc=Lr("==",function(e,t,i){return t===i},Os),uf=Lr("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!Os(0,t,i,l)}),cf=Lr("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),cu=Lr(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),hu=Lr("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),hf=Lr(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),eo=function(e,t,i,l,p){this.type=tt,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};eo.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Re);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,tt)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,tt)))return null;var v=null;if(l["min-fraction-digits"]&&!(v=t.parse(l["min-fraction-digits"],1,Re)))return null;var I=null;return l["max-fraction-digits"]&&!(I=t.parse(l["max-fraction-digits"],1,Re))?null:new eo(i,p,d,v,I)},eo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},eo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var bo=function(e){this.type=Re,this.input=e};bo.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+er(i.type)+" instead."):new bo(i):null},bo.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new Hr("Expected value to be of type string or array, but found "+er(mr(t))+" instead.")},bo.prototype.eachChild=function(e){e(this.input)},bo.prototype.outputDefined=function(){return!1},bo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var wl={"==":tc,"!=":uf,">":cu,"<":cf,">=":hf,"<=":hu,array:zr,at:bl,boolean:zr,case:Cn,coalesce:go,collator:zi,format:xn,image:hn,in:_o,"index-of":Bs,interpolate:si,"interpolate-hcl":si,"interpolate-lab":si,length:bo,let:is,literal:Vi,match:xl,number:zr,"number-format":eo,object:zr,slice:Qi,step:Pn,string:zr,"to-boolean":Fi,"to-color":Fi,"to-number":Fi,"to-string":Fi,var:zn,within:Si};function pf(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var v=d?d.evaluate(e):1,I=bn(i,l,p,v);if(I)throw new Hr(I);return new ir(i/255*v,l/255*v,p/255*v,v)}function El(e,t){return e in t}function Vs(e,t){var i=t[e];return i===void 0?null:i}function Sl(e){return{type:e}}function lp(e){return{result:"success",value:e}}function ns(e){return{result:"error",value:e}}function Ra(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function ff(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function xo(e){return!!e.expression&&e.expression.interpolated}function Sr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Qc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function vd(e){return e}function to(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function df(e,t,i,l,p){return to(typeof i===p?l[i]:void 0,e.default,t.default)}function Fs(e,t,i){if(Sr(i)!=="number")return to(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=pa(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function ro(e,t,i){var l=e.base!==void 0?e.base:1;if(Sr(i)!=="number")return to(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=pa(e.stops.map(function(q){return q[0]}),i),v=function(q,K,W,se){var le=se-W,ye=q-W;return le===0?0:K===1?ye/le:(Math.pow(K,ye)-1)/(Math.pow(K,le)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),I=e.stops[d][1],C=e.stops[d+1][1],D=su[t.type]||vd;if(e.colorSpace&&e.colorSpace!=="rgb"){var O=_l[e.colorSpace];D=function(q,K){return O.reverse(O.interpolate(O.forward(q),O.forward(K),v))}}return typeof I.evaluate=="function"?{evaluate:function(){for(var q=[],K=arguments.length;K--;)q[K]=arguments[K];var W=I.evaluate.apply(void 0,q),se=C.evaluate.apply(void 0,q);if(W!==void 0&&se!==void 0)return D(W,se,v)}}:D(I,C,v)}function wo(e,t,i){return t.type==="color"?i=ir.parse(i):t.type==="formatted"?i=vi.fromString(i.toString()):t.type==="resolvedImage"?i=Yi.fromString(i.toString()):Sr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),to(i,e.default,t.default)}Xr.register(wl,{error:[{kind:"error"},[tt],function(e,t){throw new Hr(t[0].evaluate(e))}],typeof:[tt,[Ze],function(e,t){return er(mr(t[0].evaluate(e)))}],"to-rgba":[tr(Re,4),[$e],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[$e,[Re,Re,Re],pf],rgba:[$e,[Re,Re,Re,Re],pf],has:{type:We,overloads:[[[tt],function(e,t){return El(t[0].evaluate(e),e.properties())}],[[tt,Nt],function(e,t){var i=t[1];return El(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:Ze,overloads:[[[tt],function(e,t){return Vs(t[0].evaluate(e),e.properties())}],[[tt,Nt],function(e,t){var i=t[1];return Vs(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[Ze,[tt],function(e,t){return Vs(t[0].evaluate(e),e.featureState||{})}],properties:[Nt,[],function(e){return e.properties()}],"geometry-type":[tt,[],function(e){return e.geometryType()}],id:[Ze,[],function(e){return e.id()}],zoom:[Re,[],function(e){return e.globals.zoom}],"heatmap-density":[Re,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Re,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ze,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Re,Sl(Re),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Re,Sl(Re),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Re,overloads:[[[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Re],function(e,t){return-t[0].evaluate(e)}]]},"/":[Re,[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Re,[Re,Re],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Re,[],function(){return Math.LN2}],pi:[Re,[],function(){return Math.PI}],e:[Re,[],function(){return Math.E}],"^":[Re,[Re,Re],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Re,[Re],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Re,[Re],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Re,[Re],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Re,[Re],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Re,[Re],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Re,[Re],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Re,[Re],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Re,[Re],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Re,Sl(Re),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Re,Sl(Re),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Re,[Re],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Re,[Re],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Re,[Re],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Re,[Re],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[We,[Ze],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[We,[tt],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[We,[tt,Ze],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[We,[Ze],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[We,[Ze],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[We,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[We,[tr(tt)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[We,[tr(Ze)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[We,[tt,tr(Ze)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[We,[tt,tr(Ze)],function(e,t){var i=t[0],l=t[1];return function(p,d,v,I){for(;v<=I;){var C=v+I>>1;if(d[C]===p)return!0;d[C]>p?I=C-1:v=C+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:We,overloads:[[[We,We],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[Sl(We),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:We,overloads:[[[We,We],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[Sl(We),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[We,[We],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[We,[tt],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[tt,[tt],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[tt,Sl(Ze),function(e,t){return t.map(function(i){return Un(i.evaluate(e))}).join("")}],"resolved-locale":[tt,[Gt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var pu=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new pn,this._defaultValue=t?function(i){return i.type==="color"&&Qc(i.default)?new ir(0,0,0,0):i.type==="color"?ir.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function as(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in wl}function mf(e,t){var i=new Wr(wl,[],t?function(p){var d={color:$e,string:tt,number:Re,enum:tt,boolean:We,formatted:or,resolvedImage:Ct};return p.type==="array"?tr(d[p.value]||Ze,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?lp(new pu(l,t)):ns(i.errors)}pu.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},pu.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new Hr("Expected value to be one of "+Object.keys(this._enumValues).map(function(I){return JSON.stringify(I)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}};var rc=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!ke(t.expression)};rc.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},rc.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var Eo=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!ke(t.expression),this.interpolationType=l};function fu(e,t){if((e=mf(e,t)).result==="error")return e;var i=e.value.expression,l=qn(i);if(!l&&!Ra(t))return ns([new qe("","data expressions not supported")]);var p=Ni(i,["zoom"]);if(!p&&!ff(t))return ns([new qe("","zoom expressions not supported")]);var d=function v(I){var C=null;if(I instanceof is)C=v(I.result);else if(I instanceof go)for(var D=0,O=I.args;D<O.length&&!(C=v(O[D]));D+=1);else(I instanceof Pn||I instanceof si)&&I.input instanceof Xr&&I.input.name==="zoom"&&(C=I);return C instanceof qe||I.eachChild(function(q){var K=v(q);K instanceof qe?C=K:!C&&K?C=new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&K&&C!==K&&(C=new qe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(i);return d||p?d instanceof qe?ns([d]):d instanceof si&&!xo(t)?ns([new qe("",'"interpolate" expressions cannot be used with this property')]):lp(d?new Eo(l?"camera":"composite",e.value,d.labels,d instanceof si?d.interpolation:void 0):new rc(l?"constant":"source",e.value)):ns([new qe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Eo.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},Eo.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},Eo.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?si.interpolationFactor(this.interpolationType,e,t,i):0};var du=function(e,t){this._parameters=e,this._specification=t,Ne(this,function i(l,p){var d,v,I,C=p.type==="color",D=l.stops&&typeof l.stops[0][0]=="object",O=D||!(D||l.property!==void 0),q=l.type||(xo(p)?"exponential":"interval");if(C&&((l=Ne({},l)).stops&&(l.stops=l.stops.map(function(st){return[st[0],ir.parse(st[1])]})),l.default=ir.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!_l[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(q==="exponential")d=ro;else if(q==="interval")d=Fs;else if(q==="categorical"){d=df,v=Object.create(null);for(var K=0,W=l.stops;K<W.length;K+=1){var se=W[K];v[se[0]]=se[1]}I=typeof l.stops[0][0]}else{if(q!=="identity")throw new Error('Unknown function type "'+q+'"');d=wo}if(D){for(var le={},ye=[],pe=0;pe<l.stops.length;pe++){var Ee=l.stops[pe],Ae=Ee[0].zoom;le[Ae]===void 0&&(le[Ae]={zoom:Ae,type:l.type,property:l.property,default:l.default,stops:[]},ye.push(Ae)),le[Ae].stops.push([Ee[0].value,Ee[1]])}for(var De=[],Me=0,Fe=ye;Me<Fe.length;Me+=1){var Ke=Fe[Me];De.push([le[Ke].zoom,i(le[Ke],p)])}var Ye={name:"linear"};return{kind:"composite",interpolationType:Ye,interpolationFactor:si.interpolationFactor.bind(void 0,Ye),zoomStops:De.map(function(st){return st[0]}),evaluate:function(st,_t){var lt=st.zoom;return ro({stops:De,base:l.base},p,lt).evaluate(lt,_t)}}}if(O){var gt=q==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:gt,interpolationFactor:si.interpolationFactor.bind(void 0,gt),zoomStops:l.stops.map(function(st){return st[0]}),evaluate:function(st){return d(l,p,st.zoom,v,I)}}}return{kind:"source",evaluate:function(st,_t){var lt=_t&&_t.properties?_t.properties[l.property]:void 0;return lt===void 0?to(l.default,p.default):d(l,p,lt,v,I)}}}(this._parameters,this._specification))};function $n(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,v=e.styleSpec,I=[],C=Sr(i);if(C!=="object")return[new oe(t,i,"object expected, "+C+" found")];for(var D in i){var O=D.split(".")[0],q=l[O]||l["*"],K=void 0;if(p[O])K=p[O];else if(l[O])K=Qt;else if(p["*"])K=p["*"];else{if(!l["*"]){I.push(new oe(t,i[D],'unknown property "'+D+'"'));continue}K=Qt}I=I.concat(K({key:(t&&t+".")+D,value:i[D],valueSpec:q,style:d,styleSpec:v,object:i,objectKey:D},i))}for(var W in l)p[W]||l[W].required&&l[W].default===void 0&&i[W]===void 0&&I.push(new oe(t,i,'missing required property "'+W+'"'));return I}function $c(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,v=e.arrayElementValidator||Qt;if(Sr(t)!=="array")return[new oe(d,t,"array expected, "+Sr(t)+" found")];if(i.length&&t.length!==i.length)return[new oe(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new oe(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var I={type:i.value,values:i.values};p.$version<7&&(I.function=i.function),Sr(i.value)==="object"&&(I=i.value);for(var C=[],D=0;D<t.length;D++)C=C.concat(v({array:t,arrayIndex:D,value:t[D],valueSpec:I,style:l,styleSpec:p,key:d+"["+D+"]"}));return C}function yf(e){var t=e.key,i=e.value,l=e.valueSpec,p=Sr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new oe(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new oe(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new oe(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function vf(e){var t,i,l,p=e.valueSpec,d=Ge(e.value.type),v={},I=d!=="categorical"&&e.value.property===void 0,C=!I,D=Sr(e.value.stops)==="array"&&Sr(e.value.stops[0])==="array"&&Sr(e.value.stops[0][0])==="object",O=$n({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(W){if(d==="identity")return[new oe(W.key,W.value,'identity function may not have a "stops" property')];var se=[],le=W.value;return se=se.concat($c({key:W.key,value:le,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:q})),Sr(le)==="array"&&le.length===0&&se.push(new oe(W.key,le,"array must have at least one stop")),se},default:function(W){return Qt({key:W.key,value:W.value,valueSpec:p,style:W.style,styleSpec:W.styleSpec})}}});return d==="identity"&&I&&O.push(new oe(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||O.push(new oe(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!xo(e.valueSpec)&&O.push(new oe(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(C&&!Ra(e.valueSpec)?O.push(new oe(e.key,e.value,"property functions not supported")):I&&!ff(e.valueSpec)&&O.push(new oe(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!D||e.value.property!==void 0||O.push(new oe(e.key,e.value,'"property" property is required')),O;function q(W){var se=[],le=W.value,ye=W.key;if(Sr(le)!=="array")return[new oe(ye,le,"array expected, "+Sr(le)+" found")];if(le.length!==2)return[new oe(ye,le,"array length 2 expected, length "+le.length+" found")];if(D){if(Sr(le[0])!=="object")return[new oe(ye,le,"object expected, "+Sr(le[0])+" found")];if(le[0].zoom===void 0)return[new oe(ye,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new oe(ye,le,"object stop key must have value")];if(l&&l>Ge(le[0].zoom))return[new oe(ye,le[0].zoom,"stop zoom values must appear in ascending order")];Ge(le[0].zoom)!==l&&(l=Ge(le[0].zoom),i=void 0,v={}),se=se.concat($n({key:ye+"[0]",value:le[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:yf,value:K}}))}else se=se.concat(K({key:ye+"[0]",value:le[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},le));return as(Le(le[1]))?se.concat([new oe(ye+"[1]",le[1],"expressions are not allowed in function stops.")]):se.concat(Qt({key:ye+"[1]",value:le[1],valueSpec:p,style:W.style,styleSpec:W.styleSpec}))}function K(W,se){var le=Sr(W.value),ye=Ge(W.value),pe=W.value!==null?W.value:se;if(t){if(le!==t)return[new oe(W.key,pe,le+" stop domain type must match previous stop domain type "+t)]}else t=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new oe(W.key,pe,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&d!=="categorical"){var Ee="number expected, "+le+" found";return Ra(p)&&d===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new oe(W.key,pe,Ee)]}return d!=="categorical"||le!=="number"||isFinite(ye)&&Math.floor(ye)===ye?d!=="categorical"&&le==="number"&&i!==void 0&&ye<i?[new oe(W.key,pe,"stop domain values must appear in ascending order")]:(i=ye,d==="categorical"&&ye in v?[new oe(W.key,pe,"stop domain values must be unique")]:(v[ye]=!0,[])):[new oe(W.key,pe,"integer expected, found "+ye)]}}function Ba(e){var t=(e.expressionContext==="property"?fu:mf)(Le(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new oe(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new oe(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!ke(i))return[new oe(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!ke(i))return[new oe(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Ni(i,["zoom","feature-state"]))return[new oe(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!qn(i))return[new oe(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function eh(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(Ge(i))===-1&&p.push(new oe(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(Ge(i))===-1&&p.push(new oe(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function th(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!th(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}du.deserialize=function(e){return new du(e._parameters,e._specification)},du.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Ns={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Us(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};th(e)||(e=kl(e));var t=mf(e,Ns);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function os(e,t){return e<t?-1:e>t?1:0}function kl(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?up(e[1],e[2],"=="):i==="!="?Oa(up(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?up(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(kl))):i==="all"?["all"].concat(e.slice(1).map(kl)):i==="none"?["all"].concat(e.slice(1).map(kl).map(Oa)):i==="in"?gf(e[1],e.slice(2)):i==="!in"?Oa(gf(e[1],e.slice(2))):i==="has"?Il(e[1]):i==="!has"?Oa(Il(e[1])):i!=="within"||e}function up(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function gf(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(os)]]:["filter-in-small",e,["literal",t]]}}function Il(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Oa(e){return["!",e]}function cp(e){return th(Le(e.value))?Ba(Ne({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(Sr(l)!=="array")return[new oe(p,l,"array expected, "+Sr(l)+" found")];var d,v=i.styleSpec,I=[];if(l.length<1)return[new oe(p,l,"filter array must have at least 1 element")];switch(I=I.concat(eh({key:p+"[0]",value:l[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ge(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ge(l[1])==="$type"&&I.push(new oe(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&I.push(new oe(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=Sr(l[1]))!=="string"&&I.push(new oe(p+"[1]",l[1],"string expected, "+d+" found"));for(var C=2;C<l.length;C++)d=Sr(l[C]),Ge(l[1])==="$type"?I=I.concat(eh({key:p+"["+C+"]",value:l[C],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&I.push(new oe(p+"["+C+"]",l[C],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var D=1;D<l.length;D++)I=I.concat(t({key:p+"["+D+"]",value:l[D],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Sr(l[1]),l.length!==2?I.push(new oe(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&I.push(new oe(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=Sr(l[1]),l.length!==2?I.push(new oe(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&I.push(new oe(p+"[1]",l[1],"object expected, "+d+" found"))}return I}(e)}function ic(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,v=e.objectKey,I=p[t+"_"+e.layerType];if(!I)return[];var C=v.match(/^(.*)-transition$/);if(t==="paint"&&C&&I[C[1]]&&I[C[1]].transition)return Qt({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var D,O=e.valueSpec||I[v];if(!O)return[new oe(i,d,'unknown property "'+v+'"')];if(Sr(d)==="string"&&Ra(O)&&!O.tokens&&(D=/^{([^}]+)}$/.exec(d)))return[new oe(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(D[1])+" }`.")];var q=[];return e.layerType==="symbol"&&(v==="text-field"&&l&&!l.glyphs&&q.push(new oe(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Qc(Le(d))&&Ge(d.type)==="identity"&&q.push(new oe(i,d,'"text-font" does not support identity functions'))),q.concat(Qt({key:e.key,value:d,valueSpec:O,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:v}))}function rh(e){return ic(e,"paint")}function nc(e){return ic(e,"layout")}function ac(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new oe(l,i,'either "type" or "ref" is required'));var v,I=Ge(i.type),C=Ge(i.ref);if(i.id)for(var D=Ge(i.id),O=0;O<e.arrayIndex;O++){var q=p.layers[O];Ge(q.id)===D&&t.push(new oe(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+q.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(se){se in i&&t.push(new oe(l,i[se],'"'+se+'" is prohibited for ref layers'))}),p.layers.forEach(function(se){Ge(se.id)===C&&(v=se)}),v?v.ref?t.push(new oe(l,i.ref,"ref cannot reference another ref layer")):I=Ge(v.type):t.push(new oe(l,i.ref,'ref layer "'+C+'" not found'));else if(I!=="background")if(i.source){var K=p.sources&&p.sources[i.source],W=K&&Ge(K.type);K?W==="vector"&&I==="raster"?t.push(new oe(l,i.source,'layer "'+i.id+'" requires a raster source')):W==="raster"&&I!=="raster"?t.push(new oe(l,i.source,'layer "'+i.id+'" requires a vector source')):W!=="vector"||i["source-layer"]?W==="raster-dem"&&I!=="hillshade"?t.push(new oe(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!i.paint||!i.paint["line-gradient"]||W==="geojson"&&K.lineMetrics||t.push(new oe(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new oe(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new oe(l,i.source,'source "'+i.source+'" not found'))}else t.push(new oe(l,i,'missing required property "source"'));return t=t.concat($n({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Qt({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:cp,layout:function(se){return $n({layer:i,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":function(le){return nc(Ne({layerType:I},le))}}})},paint:function(se){return $n({layer:i,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":function(le){return rh(Ne({layerType:I},le))}}})}}}))}function Tl(e){var t=e.value,i=e.key,l=Sr(t);return l!=="string"?[new oe(i,t,"string expected, "+l+" found")]:[]}var ii={promoteId:function(e){var t=e.key,i=e.value;if(Sr(i)==="string")return Tl({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,Tl({key:t+"."+p,value:i[p]}));return l}};function fa(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new oe(i,t,'"type" is required')];var d,v=Ge(t.type);switch(v){case"vector":case"raster":case"raster-dem":return $n({key:i,value:t,valueSpec:l["source_"+v.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:ii});case"geojson":if(d=$n({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:ii}),t.cluster)for(var I in t.clusterProperties){var C=t.clusterProperties[I],D=C[0],O=typeof D=="string"?[D,["accumulated"],["get",I]]:D;d.push.apply(d,Ba({key:i+"."+I+".map",value:C[1],expressionContext:"cluster-map"})),d.push.apply(d,Ba({key:i+"."+I+".reduce",value:O,expressionContext:"cluster-reduce"}))}return d;case"video":return $n({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return $n({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new oe(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return eh({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function da(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],v=Sr(t);if(t===void 0)return d;if(v!=="object")return d.concat([new oe("light",t,"object expected, "+v+" found")]);for(var I in t){var C=I.match(/^(.*)-transition$/);d=d.concat(C&&l[C[1]]&&l[C[1]].transition?Qt({key:I,value:t[I],valueSpec:i.transition,style:p,styleSpec:i}):l[I]?Qt({key:I,value:t[I],valueSpec:l[I],style:p,styleSpec:i}):[new oe(I,t[I],'unknown property "'+I+'"')])}return d}var Dn={"*":function(){return[]},array:$c,boolean:function(e){var t=e.value,i=e.key,l=Sr(t);return l!=="boolean"?[new oe(i,t,"boolean expected, "+l+" found")]:[]},number:yf,color:function(e){var t=e.key,i=e.value,l=Sr(i);return l!=="string"?[new oe(t,i,"color expected, "+l+" found")]:Kt(i)===null?[new oe(t,i,'color expected, "'+i+'" found')]:[]},constants:Se,enum:eh,filter:cp,function:vf,layer:ac,object:$n,source:fa,light:da,string:Tl,formatted:function(e){return Tl(e).length===0?[]:Ba(e)},resolvedImage:function(e){return Tl(e).length===0?[]:Ba(e)}};function Qt(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&Qc(Ge(t))?vf(e):i.expression&&as(Le(t))?Ba(e):i.type&&Dn[i.type]?Dn[i.type](e):$n(Ne({},e,{valueSpec:i.type?l[i.type]:i}))}function jr(e){var t=e.value,i=e.key,l=Tl(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new oe(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new oe(i,t,'"glyphs" url must include a "{range}" token'))),l}function Mn(e,t){t===void 0&&(t=H);var i=[];return i=i.concat(Qt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:jr,"*":function(){return[]}}})),e.constants&&(i=i.concat(Se({key:"constants",value:e.constants,style:e,styleSpec:t}))),hp(i)}function hp(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function mu(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return hp(e.apply(this,t))}}Mn.source=mu(fa),Mn.light=mu(da),Mn.layer=mu(ac),Mn.filter=mu(cp),Mn.paintProperty=mu(rh),Mn.layoutProperty=mu(nc);var ss=Mn,oc=ss.light,gd=ss.paintProperty,ls=ss.layoutProperty;function Al(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new ve(new Error(p[l].message))),i=!0;return i}var us=Ui;function Ui(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var v=p[3+d],I=p[3+d+1];l.push(v===I?null:p.subarray(v,I))}var C=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],C),this.bboxes=p.subarray(C),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var D=0;D<this.d*this.d;D++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var O=i/t*e;this.min=-O,this.max=e+O}Ui.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},Ui.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ui.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},Ui.prototype.query=function(e,t,i,l,p){var d=this.min,v=this.max;if(e<=d&&t<=d&&v<=i&&v<=l&&!p)return Array.prototype.slice.call(this.keys);var I=[];return this._forEachCell(e,t,i,l,this._queryCell,I,{},p),I},Ui.prototype._queryCell=function(e,t,i,l,p,d,v,I){var C=this.cells[p];if(C!==null)for(var D=this.keys,O=this.bboxes,q=0;q<C.length;q++){var K=C[q];if(v[K]===void 0){var W=4*K;(I?I(O[W+0],O[W+1],O[W+2],O[W+3]):e<=O[W+2]&&t<=O[W+3]&&i>=O[W+0]&&l>=O[W+1])?(v[K]=!0,d.push(D[K])):v[K]=!1}}},Ui.prototype._forEachCell=function(e,t,i,l,p,d,v,I){for(var C=this._convertToCellCoord(e),D=this._convertToCellCoord(t),O=this._convertToCellCoord(i),q=this._convertToCellCoord(l),K=C;K<=O;K++)for(var W=D;W<=q;W++){var se=this.d*W+K;if((!I||I(this._convertFromCellCoord(K),this._convertFromCellCoord(W),this._convertFromCellCoord(K+1),this._convertFromCellCoord(W+1)))&&p.call(this,e,t,i,l,se,d,v,I))return}},Ui.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Ui.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Ui.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,v=0;v<e.length;v++){var I=e[v];p[3+v]=d,p.set(I,d),d+=I.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var So=U.ImageData,_f=U.ImageBitmap,Zr={};function it(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Zr[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var $i in it("Object",Object),us.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},us.deserialize=function(e){return new us(e.buffer)},it("Grid",us),it("Color",ir),it("Error",Error),it("ResolvedImage",Yi),it("StylePropertyFunction",du),it("StyleExpression",pu,{omit:["_evaluator"]}),it("ZoomDependentExpression",Eo),it("ZoomConstantExpression",rc),it("CompoundExpression",Xr,{omit:["_evaluate"]}),wl)wl[$i]._classRegistryKey||it("Expression_"+$i,wl[$i]);function ih(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function ko(e){return _f&&e instanceof _f}function cs(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ih(e)||ko(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof So)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(cs(d[p],t));return l}if(typeof e=="object"){var v=e.constructor,I=v._classRegistryKey;if(!I)throw new Error("can't serialize object of unregistered class");var C=v.serialize?v.serialize(e,t):{};if(!v.serialize){for(var D in e)if(e.hasOwnProperty(D)&&!(Zr[I].omit.indexOf(D)>=0)){var O=e[D];C[D]=Zr[I].shallow.indexOf(D)>=0?O:cs(O,t)}e instanceof Error&&(C.message=e.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return I!=="Object"&&(C.$name=I),C}throw new Error("can't serialize object of type "+typeof e)}function ma(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ih(e)||ko(e)||ArrayBuffer.isView(e)||e instanceof So)return e;if(Array.isArray(e))return e.map(ma);if(typeof e=="object"){var t=e.$name||"Object",i=Zr[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var v=d[p];if(v!=="$name"){var I=e[v];l[v]=Zr[t].shallow.indexOf(v)>=0?I:ma(I)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var zl=function(){this.first=!0};zl.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var Je={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function pp(e){for(var t=0,i=e;t<i.length;t+=1)if(qs(i[t].charCodeAt(0)))return!0;return!1}function qs(e){return!(e!==746&&e!==747&&(e<4352||!(Je["Bopomofo Extended"](e)||Je.Bopomofo(e)||Je["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Je["CJK Compatibility Ideographs"](e)||Je["CJK Compatibility"](e)||Je["CJK Radicals Supplement"](e)||Je["CJK Strokes"](e)||!(!Je["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||Je["CJK Unified Ideographs Extension A"](e)||Je["CJK Unified Ideographs"](e)||Je["Enclosed CJK Letters and Months"](e)||Je["Hangul Compatibility Jamo"](e)||Je["Hangul Jamo Extended-A"](e)||Je["Hangul Jamo Extended-B"](e)||Je["Hangul Jamo"](e)||Je["Hangul Syllables"](e)||Je.Hiragana(e)||Je["Ideographic Description Characters"](e)||Je.Kanbun(e)||Je["Kangxi Radicals"](e)||Je["Katakana Phonetic Extensions"](e)||Je.Katakana(e)&&e!==12540||!(!Je["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!Je["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Je["Unified Canadian Aboriginal Syllabics"](e)||Je["Unified Canadian Aboriginal Syllabics Extended"](e)||Je["Vertical Forms"](e)||Je["Yijing Hexagram Symbols"](e)||Je["Yi Syllables"](e)||Je["Yi Radicals"](e))))}function sc(e){return!(qs(e)||function(t){return!!(Je["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Je["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Je["Letterlike Symbols"](t)||Je["Number Forms"](t)||Je["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Je["Control Pictures"](t)&&t!==9251||Je["Optical Character Recognition"](t)||Je["Enclosed Alphanumerics"](t)||Je["Geometric Shapes"](t)||Je["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Je["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Je["CJK Symbols and Punctuation"](t)||Je.Katakana(t)||Je["Private Use Area"](t)||Je["CJK Compatibility Forms"](t)||Je["Small Form Variants"](t)||Je["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Va(e){return e>=1424&&e<=2303||Je["Arabic Presentation Forms-A"](e)||Je["Arabic Presentation Forms-B"](e)}function ya(e,t){return!(!t&&Va(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Je.Khmer(e))}function hs(e){for(var t=0,i=e;t<i.length;t+=1)if(Va(i[t].charCodeAt(0)))return!0;return!1}var nh=null,qi="unavailable",En=null,ps=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(qi="error"),nh&&nh(e)};function lc(){Pl.fire(new ue("pluginStateChange",{pluginStatus:qi,pluginURL:En}))}var Pl=new xe,_d=function(){return qi},io=function(){if(qi!=="deferred"||!En)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qi="loading",lc(),En&&ca({url:En},function(e){e?ps(e):(qi="loaded",lc())})},Ln={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return qi==="loaded"||Ln.applyArabicShaping!=null},isLoading:function(){return qi==="loading"},setState:function(e){qi=e.pluginStatus,En=e.pluginURL},isParsed:function(){return Ln.applyArabicShaping!=null&&Ln.processBidirectionalText!=null&&Ln.processStyledBidirectionalText!=null},getPluginURL:function(){return En}},Wt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zl,this.transition={})};Wt.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!ya(p[l].charCodeAt(0),i))return!1;return!0}(e,Ln.isLoaded())},Wt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Wt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var Io=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(Qc(i))return new du(i,l);if(as(i)){var p=fu(i,l);if(p.result==="error")throw new Error(p.value.map(function(v){return v.key+": "+v.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=ir.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};Io.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Io.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var jn=function(e){this.property=e,this.value=new Io(e,void 0)};jn.prototype.transitioned=function(e,t){return new Cl(this.property,this.value,t,Ue({},e.transition,this.transition),e.now)},jn.prototype.untransitioned=function(){return new Cl(this.property,this.value,null,{},0)};var en=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};en.prototype.getValue=function(e){return At(this._values[e].value.value)},en.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new jn(this._values[e].property)),this._values[e].value=new Io(this._values[e].property,t===null?void 0:At(t))},en.prototype.getTransition=function(e){return At(this._values[e].transition)},en.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new jn(this._values[e].property)),this._values[e].transition=At(t)||void 0},en.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},en.prototype.transitioned=function(e,t){for(var i=new js(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},en.prototype.untransitioned=function(){for(var e=new js(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var Cl=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};Cl.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var v=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(I){if(I<=0)return 0;if(I>=1)return 1;var C=I*I,D=C*I;return 4*(I<.5?D:3*(I-C)+D-.75)}(v))}return p};var js=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};js.prototype.possiblyEvaluate=function(e,t,i){for(var l=new uc(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l},js.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var Zn=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Zn.prototype.getValue=function(e){return At(this._values[e].value)},Zn.prototype.setValue=function(e,t){this._values[e]=new Io(this._values[e].property,t===null?void 0:At(t))},Zn.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},Zn.prototype.possiblyEvaluate=function(e,t,i){for(var l=new uc(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var v=d[p];l._values[v]=this._values[v].possiblyEvaluate(e,t,i)}return l};var ea=function(e,t,i){this.property=e,this.value=t,this.parameters=i};ea.prototype.isConstant=function(){return this.value.kind==="constant"},ea.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},ea.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var uc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};uc.prototype.get=function(e){return this._values[e]};var yt=function(e){this.specification=e};yt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},yt.prototype.interpolate=function(e,t,i){var l=su[this.specification.type];return l?l(e,t,i):e};var dt=function(e,t){this.specification=e,this.overrides=t};dt.prototype.possiblyEvaluate=function(e,t,i,l){return new ea(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},dt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new ea(this,{kind:"constant",value:void 0},e.parameters);var l=su[this.specification.type];return l?new ea(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},dt.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var Fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new ea(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var v=i.expression.evaluate(l,null,{},p,d),I=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,C=this._calculate(I,I,I,l);return new ea(this,{kind:"constant",value:C},l)}if(i.expression.kind==="camera"){var D=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new ea(this,{kind:"constant",value:D},l)}return new ea(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,v,I){if(i.kind==="source"){var C=i.evaluate(l,p,d,v,I);return this._calculate(C,C,C,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(dt),fn=function(e){this.specification=e};fn.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new Wt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Wt(Math.floor(t.zoom),t)),e.expression.evaluate(new Wt(Math.floor(t.zoom+1),t)),t)}},fn.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},fn.prototype.interpolate=function(e){return e};var no=function(e){this.specification=e};no.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},no.prototype.interpolate=function(){return!1};var Sn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Io(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new jn(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};it("DataDrivenProperty",dt),it("DataConstantProperty",yt),it("CrossFadedDataDrivenProperty",Fa),it("CrossFadedProperty",fn),it("ColorRampProperty",no);var ta=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new Zn(l.layout)),l.paint)){for(var p in this._transitionablePaint=new en(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new uc(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(ls,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return xr(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(gd,"layers."+this.id+".paint."+i,i,l,p))return!1;if(xr(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",I=d.value.isDataDriven(),C=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var D=this._transitionablePaint._values[i].value;return D.isDataDriven()||I||v||this._handleOverridablePaintPropertyUpdate(i,C,D)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),It(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&Al(this,i.call(ss,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:H,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof ea&&Ra(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(xe),ao={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ah=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},_r=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function tn(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=ao[p.type].BYTES_PER_ELEMENT,v=i=bf(i,Math.max(t,d)),I=p.components||1;return l=Math.max(l,d),i+=d*I,{name:p.name,type:p.type,components:I,offset:v}}),size:bf(i,Math.max(l,t)),alignment:t}}function bf(e,t){return Math.ceil(e/t)*t}_r.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},_r.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},_r.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},_r.prototype.clear=function(){this.length=0},_r.prototype.resize=function(e){this.reserve(e),this.length=e},_r.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},_r.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var To=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(_r);To.prototype.bytesPerElement=4,it("StructArrayLayout2i4",To);var fp=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var I=4*i;return this.int16[I+0]=l,this.int16[I+1]=p,this.int16[I+2]=d,this.int16[I+3]=v,i},t}(_r);fp.prototype.bytesPerElement=8,it("StructArrayLayout4i8",fp);var fs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,v,I)},t.prototype.emplace=function(i,l,p,d,v,I,C){var D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=d,this.int16[D+3]=v,this.int16[D+4]=I,this.int16[D+5]=C,i},t}(_r);fs.prototype.bytesPerElement=12,it("StructArrayLayout2i4i12",fs);var gi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,v,I)},t.prototype.emplace=function(i,l,p,d,v,I,C){var D=4*i,O=8*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.uint8[O+4]=d,this.uint8[O+5]=v,this.uint8[O+6]=I,this.uint8[O+7]=C,i},t}(_r);gi.prototype.bytesPerElement=8,it("StructArrayLayout2i4ub8",gi);var ka=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(_r);ka.prototype.bytesPerElement=8,it("StructArrayLayout2f8",ka);var dn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q){var K=this.length;return this.resize(K+1),this.emplace(K,i,l,p,d,v,I,C,D,O,q)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K){var W=10*i;return this.uint16[W+0]=l,this.uint16[W+1]=p,this.uint16[W+2]=d,this.uint16[W+3]=v,this.uint16[W+4]=I,this.uint16[W+5]=C,this.uint16[W+6]=D,this.uint16[W+7]=O,this.uint16[W+8]=q,this.uint16[W+9]=K,i},t}(_r);dn.prototype.bytesPerElement=20,it("StructArrayLayout10ui20",dn);var Ao=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q,K,W){var se=this.length;return this.resize(se+1),this.emplace(se,i,l,p,d,v,I,C,D,O,q,K,W)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K,W,se){var le=12*i;return this.int16[le+0]=l,this.int16[le+1]=p,this.int16[le+2]=d,this.int16[le+3]=v,this.uint16[le+4]=I,this.uint16[le+5]=C,this.uint16[le+6]=D,this.uint16[le+7]=O,this.int16[le+8]=q,this.int16[le+9]=K,this.int16[le+10]=W,this.int16[le+11]=se,i},t}(_r);Ao.prototype.bytesPerElement=24,it("StructArrayLayout4i4ui4i24",Ao);var yu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.float32[v+0]=l,this.float32[v+1]=p,this.float32[v+2]=d,i},t}(_r);yu.prototype.bytesPerElement=12,it("StructArrayLayout3f12",yu);var ds=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(_r);ds.prototype.bytesPerElement=4,it("StructArrayLayout1ul4",ds);var bd=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O){var q=this.length;return this.resize(q+1),this.emplace(q,i,l,p,d,v,I,C,D,O)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q){var K=10*i,W=5*i;return this.int16[K+0]=l,this.int16[K+1]=p,this.int16[K+2]=d,this.int16[K+3]=v,this.int16[K+4]=I,this.int16[K+5]=C,this.uint32[W+3]=D,this.uint16[K+8]=O,this.uint16[K+9]=q,i},t}(_r);bd.prototype.bytesPerElement=20,it("StructArrayLayout6i1ul2ui20",bd);var vu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I){var C=this.length;return this.resize(C+1),this.emplace(C,i,l,p,d,v,I)},t.prototype.emplace=function(i,l,p,d,v,I,C){var D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=d,this.int16[D+3]=v,this.int16[D+4]=I,this.int16[D+5]=C,i},t}(_r);vu.prototype.bytesPerElement=12,it("StructArrayLayout2i2i2i12",vu);var oo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v){var I=this.length;return this.resize(I+1),this.emplace(I,i,l,p,d,v)},t.prototype.emplace=function(i,l,p,d,v,I){var C=4*i,D=8*i;return this.float32[C+0]=l,this.float32[C+1]=p,this.float32[C+2]=d,this.int16[D+6]=v,this.int16[D+7]=I,i},t}(_r);oo.prototype.bytesPerElement=16,it("StructArrayLayout2f1f2i16",oo);var Dl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var I=12*i,C=3*i;return this.uint8[I+0]=l,this.uint8[I+1]=p,this.float32[C+1]=d,this.float32[C+2]=v,i},t}(_r);Dl.prototype.bytesPerElement=12,it("StructArrayLayout2ub2f12",Dl);var Zs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.uint16[v+0]=l,this.uint16[v+1]=p,this.uint16[v+2]=d,i},t}(_r);Zs.prototype.bytesPerElement=6,it("StructArrayLayout3ui6",Zs);var Na=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q,K,W,se,le,ye,pe,Ee){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,i,l,p,d,v,I,C,D,O,q,K,W,se,le,ye,pe,Ee)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K,W,se,le,ye,pe,Ee,Ae){var De=24*i,Me=12*i,Fe=48*i;return this.int16[De+0]=l,this.int16[De+1]=p,this.uint16[De+2]=d,this.uint16[De+3]=v,this.uint32[Me+2]=I,this.uint32[Me+3]=C,this.uint32[Me+4]=D,this.uint16[De+10]=O,this.uint16[De+11]=q,this.uint16[De+12]=K,this.float32[Me+7]=W,this.float32[Me+8]=se,this.uint8[Fe+36]=le,this.uint8[Fe+37]=ye,this.uint8[Fe+38]=pe,this.uint32[Me+10]=Ee,this.int16[De+22]=Ae,i},t}(_r);Na.prototype.bytesPerElement=48,it("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Na);var gu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,v,I,C,D,O,q,K,W,se,le,ye,pe,Ee,Ae,De,Me,Fe,Ke,Ye,gt,st,_t,lt,Yt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,i,l,p,d,v,I,C,D,O,q,K,W,se,le,ye,pe,Ee,Ae,De,Me,Fe,Ke,Ye,gt,st,_t,lt,Yt)},t.prototype.emplace=function(i,l,p,d,v,I,C,D,O,q,K,W,se,le,ye,pe,Ee,Ae,De,Me,Fe,Ke,Ye,gt,st,_t,lt,Yt,wt){var ct=34*i,Ft=17*i;return this.int16[ct+0]=l,this.int16[ct+1]=p,this.int16[ct+2]=d,this.int16[ct+3]=v,this.int16[ct+4]=I,this.int16[ct+5]=C,this.int16[ct+6]=D,this.int16[ct+7]=O,this.uint16[ct+8]=q,this.uint16[ct+9]=K,this.uint16[ct+10]=W,this.uint16[ct+11]=se,this.uint16[ct+12]=le,this.uint16[ct+13]=ye,this.uint16[ct+14]=pe,this.uint16[ct+15]=Ee,this.uint16[ct+16]=Ae,this.uint16[ct+17]=De,this.uint16[ct+18]=Me,this.uint16[ct+19]=Fe,this.uint16[ct+20]=Ke,this.uint16[ct+21]=Ye,this.uint16[ct+22]=gt,this.uint32[Ft+12]=st,this.float32[Ft+13]=_t,this.float32[Ft+14]=lt,this.float32[Ft+15]=Yt,this.float32[Ft+16]=wt,i},t}(_r);gu.prototype.bytesPerElement=68,it("StructArrayLayout8i15ui1ul4f68",gu);var Gs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(_r);Gs.prototype.bytesPerElement=4,it("StructArrayLayout1f4",Gs);var Ua=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=3*i;return this.int16[v+0]=l,this.int16[v+1]=p,this.int16[v+2]=d,i},t}(_r);Ua.prototype.bytesPerElement=6,it("StructArrayLayout3i6",Ua);var Ks=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var v=4*i;return this.uint32[2*i+0]=l,this.uint16[v+2]=p,this.uint16[v+3]=d,i},t}(_r);Ks.prototype.bytesPerElement=8,it("StructArrayLayout1ul2ui8",Ks);var cc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(_r);cc.prototype.bytesPerElement=4,it("StructArrayLayout2ui4",cc);var zo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(_r);zo.prototype.bytesPerElement=2,it("StructArrayLayout1ui2",zo);var Ia=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,v){var I=4*i;return this.float32[I+0]=l,this.float32[I+1]=p,this.float32[I+2]=d,this.float32[I+3]=v,i},t}(_r);Ia.prototype.bytesPerElement=16,it("StructArrayLayout4f16",Ia);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new V(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(ah);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(bd);it("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(ah);a.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new a(this,i)},t}(Na);it("PlacedSymbolArray",c);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(ah);m.prototype.size=68;var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(gu);it("SymbolInstanceArray",E);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Gs);it("GlyphOffsetArray",k);var A=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Ua);it("SymbolLineVertexArray",A);var B=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(ah);B.prototype.size=8;var Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new B(this,i)},t}(Ks);it("FeatureIndexArray",Z);var Y=tn([{name:"a_pos",components:2,type:"Int16"}],4).members,Q=function(e){e===void 0&&(e=[]),this.segments=e};function $(e,t){return 256*(e=we(Math.floor(e),0,255))+we(Math.floor(t),0,255)}Q.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>Q.MAX_VERTEX_ARRAY_LENGTH&&Vt("Max vertices per segment is "+Q.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>Q.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},Q.prototype.get=function(){return this.segments},Q.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},Q.simpleSegment=function(e,t,i,l){return new Q([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},Q.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,it("SegmentVector",Q);var ce=tn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ae=z(function(e){e.exports=function(t,i){var l,p,d,v,I,C,D,O;for(p=t.length-(l=3&t.length),d=i,I=3432918353,C=461845907,O=0;O<p;)D=255&t.charCodeAt(O)|(255&t.charCodeAt(++O))<<8|(255&t.charCodeAt(++O))<<16|(255&t.charCodeAt(++O))<<24,++O,d=27492+(65535&(v=5*(65535&(d=(d^=D=(65535&(D=(D=(65535&D)*I+(((D>>>16)*I&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(D=0,l){case 3:D^=(255&t.charCodeAt(O+2))<<16;case 2:D^=(255&t.charCodeAt(O+1))<<8;case 1:d^=D=(65535&(D=(D=(65535&(D^=255&t.charCodeAt(O)))*I+(((D>>>16)*I&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),de=z(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,v=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(v)|(255&t.charCodeAt(++v))<<8|(255&t.charCodeAt(++v))<<16|(255&t.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++v;switch(p){case 3:d^=(255&t.charCodeAt(v+2))<<16;case 2:d^=(255&t.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),ne=ae,me=de;ne.murmur3=ae,ne.murmur2=me;var ge=function(){this.ids=[],this.positions=[],this.indexed=!1};ge.prototype.add=function(e,t,i,l){this.ids.push(Be(e)),this.positions.push(t,i,l)},ge.prototype.getPositions=function(e){for(var t=Be(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},ge.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,v,I,C){for(;I<C;){for(var D=d[I+C>>1],O=I-1,q=C+1;;){do O++;while(d[O]<D);do q--;while(d[q]>D);if(O>=q)break;Ce(d,O,q),Ce(v,3*O,3*q),Ce(v,3*O+1,3*q+1),Ce(v,3*O+2,3*q+2)}q-I<C-q?(p(d,v,I,q),I=q+1):(p(d,v,q+1,C),C=q)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},ge.deserialize=function(e){var t=new ge;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var Te=Math.pow(2,53)-1;function Be(e){var t=+e;return!isNaN(t)&&t<=Te?t:ne(String(e))}function Ce(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}it("FeaturePositionMap",ge);var Oe=function(e,t){this.gl=e.gl,this.location=t},je=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Oe),He=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Oe),Xe=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Oe),ut=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Oe),St=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Oe),xt=function(e){function t(i,l){e.call(this,i,l),this.current=ir.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Oe),kt=new Float32Array(16),ur=function(e){function t(i,l){e.call(this,i,l),this.current=kt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Oe);function ot(e){return[$(255*e.r,255*e.g),$(255*e.b,255*e.a)]}var zt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};zt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},zt.prototype.getBinding=function(e,t,i){return this.type==="color"?new xt(e,t):new He(e,t)};var Rt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Rt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Rt.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Rt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new St(e,t):new He(e,t)};var Pt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};Pt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,v=this.expression.evaluate(new Wt(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},Pt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},Pt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=ot(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Pt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Pt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Dt=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Dt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new Wt(this.zoom),t,{},l,[],p),v=this.expression.evaluate(new Wt(this.zoom+1),t,{},l,[],p),I=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(I,e,d,v)},Dt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},Dt.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=ot(i),d=ot(l),v=e;v<t;v++)this.paintVertexArray.emplace(v,p[0],p[1],d[0],d[1]);else{for(var I=e;I<t;I++)this.paintVertexArray.emplace(I,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},Dt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Dt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Dt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=we(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},Dt.prototype.getBinding=function(e,t,i){return new He(e,t)};var Ht=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Ht.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Ht.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Ht.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],v=l[i.max];if(p&&d&&v)for(var I=e;I<t;I++)this.zoomInPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(I,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Ht.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ce.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ce.members,this.expression.isStateDependent))},Ht.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Tt=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof ea&&Ra(d.property.specification)){var v=rn(p,e.type),I=d.value,C=d.property.specification.type,D=d.property.useIntegerZoom,O=d.property.specification["property-type"],q=O==="cross-faded"||O==="cross-faded-data-driven";if(I.kind==="constant")this.binders[p]=q?new Rt(I.value,v):new zt(I.value,v,C),l.push("/u_"+p);else if(I.kind==="source"||q){var K=li(p,C,"source");this.binders[p]=q?new Ht(I,C,D,t,K,e.id):new Pt(I,v,C,K),l.push("/a_"+p)}else{var W=li(p,C,"composite");this.binders[p]=new Dt(I,v,C,D,t,W),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};Tt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Pt||t instanceof Dt?t.maxValue:0},Tt.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var v=this.binders[d];(v instanceof Pt||v instanceof Dt||v instanceof Ht)&&v.populatePaintArray(e,t,i,l,p)}},Tt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Rt&&l.setConstantPatternPositions(e,t)}},Tt.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var v in e)for(var I=0,C=t.getPositions(v);I<C.length;I+=1){var D=C[I],O=i.feature(D.index);for(var q in this.binders){var K=this.binders[q];if((K instanceof Pt||K instanceof Dt||K instanceof Ht)&&K.expression.isStateDependent===!0){var W=l.paint.get(q);K.expression=W.value,K.updatePaintArray(D.start,D.end,O,e[v],p),d=!0}}}return d},Tt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof zt||i instanceof Rt)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},Tt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Pt||i instanceof Dt)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Ht)for(var p=0;p<ce.members.length;p++)e.push(ce.members[p].name)}return e},Tt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof zt||i instanceof Rt||i instanceof Dt)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},Tt.prototype.getPaintVertexBuffers=function(){return this._buffers},Tt.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof zt||p instanceof Rt||p instanceof Dt)for(var d=0,v=p.uniformNames;d<v.length;d+=1){var I=v[d];if(t[I]){var C=p.getBinding(e,t[I],I);i.push({name:I,property:l,binding:C})}}}return i},Tt.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var v=d[p],I=v.name,C=v.property;this.binders[C].setUniform(v.binding,l,i.get(C),I)}},Tt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Ht){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof Pt||i instanceof Dt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Tt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Pt||i instanceof Dt||i instanceof Ht)&&i.upload(e)}this.updatePaintBuffers()},Tt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Pt||t instanceof Dt||t instanceof Ht)&&t.destroy()}};var Et=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new Tt(d,t,i)}this.needsUpload=!1,this._featureMap=new ge,this._bufferOffset=0};function rn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function li(e,t,i){var l={color:{source:ka,composite:Ia},number:{source:Gs,composite:ka}},p=function(d){return{"line-pattern":{source:dn,composite:dn},"fill-pattern":{source:dn,composite:dn},"fill-extrusion-pattern":{source:dn,composite:dn}}[d]}(e);return p&&p[i]||l[t][i]}Et.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Et.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var v=d[p];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,t,v,l)||this.needsUpload}},Et.prototype.get=function(e){return this.programConfigurations[e]},Et.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Et.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},it("ConstantBinder",zt),it("CrossFadedConstantBinder",Rt),it("SourceExpressionBinder",Pt),it("CrossFadedCompositeBinder",Ht),it("CompositeExpressionBinder",Dt),it("ProgramConfiguration",Tt,{omit:["_buffers"]}),it("ProgramConfigurationSet",Et);var kn=Math.pow(2,14)-1,mn=-kn-1;function Yr(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var v=p[d],I=Math.round(v.x*t),C=Math.round(v.y*t);v.x=we(I,mn,kn),v.y=we(C,mn,kn),(I<v.x||I>v.x+1||C<v.y||C>v.y+1)&&Vt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function ki(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Yr(e):[]}}function va(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var ui=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new To,this.indexArray=new Zs,this.segments=new Q,this.programConfigurations=new Et(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ra(e,t){for(var i=0;i<e.length;i++)if(Co(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(Co(e,t[l]))return!0;return!!ms(e,t)}function _i(e,t,i){return!!Co(e,t)||!!Hs(t,e,i)}function Rn(e,t){if(e.length===1)return ys(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(Co(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(ys(t,e[d]))return!0;for(var v=0;v<t.length;v++)if(ms(e,t[v]))return!0;return!1}function qa(e,t,i){if(e.length>1){if(ms(e,t))return!0;for(var l=0;l<t.length;l++)if(Hs(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Hs(e[p],t,i))return!0;return!1}function ms(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(oh(l,p,t[d],t[d+1]))return!0;return!1}function oh(e,t,i,l){return Ir(e,i,l)!==Ir(t,i,l)&&Ir(e,t,i)!==Ir(e,t,l)}function Hs(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(Po(e,t[p-1],t[p])<l)return!0;return!1}function Po(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function ys(e,t){for(var i,l,p,d=!1,v=0;v<e.length;v++)for(var I=0,C=(i=e[v]).length-1;I<i.length;C=I++)(l=i[I]).y>t.y!=(p=i[C]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function Co(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],v=e[p];d.y>t.y!=v.y>t.y&&t.x<(v.x-d.x)*(t.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function vs(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=Ir(e,t,i[0]);return d!==Ir(e,t,i[1])||d!==Ir(e,t,i[2])||d!==Ir(e,t,i[3])}function ja(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function nn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function gs(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=V.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var v=[],I=0;I<e.length;I++)v.push(e[I].sub(d));return v}ui.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var v=0,I=e;v<I.length;v+=1){var C=I[v],D=C.feature,O=C.id,q=C.index,K=C.sourceLayerIndex,W=this.layers[0]._featureFilter.needGeometry,se=ki(D,W);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),se,i)){var le=d?d.evaluate(se,{},i):void 0,ye={id:O,properties:D.properties,type:D.type,sourceLayerIndex:K,index:q,geometry:W?se.geometry:Yr(D),patterns:{},sortKey:le};p.push(ye)}}d&&p.sort(function(Ye,gt){return Ye.sortKey-gt.sortKey});for(var pe=0,Ee=p;pe<Ee.length;pe+=1){var Ae=Ee[pe],De=Ae.geometry,Me=Ae.index,Fe=Ae.sourceLayerIndex,Ke=e[Me].feature;this.addFeature(Ae,De,Me,i),t.featureIndex.insert(Ke,De,Me,Fe,this.index)}},ui.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ui.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ui.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ui.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Y),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ui.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ui.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var v=0,I=d[p];v<I.length;v+=1){var C=I[v],D=C.x,O=C.y;if(!(D<0||D>=8192||O<0||O>=8192)){var q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),K=q.vertexLength;va(this.layoutVertexArray,D,O,-1,-1),va(this.layoutVertexArray,D,O,1,-1),va(this.layoutVertexArray,D,O,1,1),va(this.layoutVertexArray,D,O,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+3,K+2),q.vertexLength+=4,q.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},it("CircleBucket",ui,{omit:["layers"]});var Ta=new Sn({"circle-sort-key":new dt(H.layout_circle["circle-sort-key"])}),Ml={paint:new Sn({"circle-radius":new dt(H.paint_circle["circle-radius"]),"circle-color":new dt(H.paint_circle["circle-color"]),"circle-blur":new dt(H.paint_circle["circle-blur"]),"circle-opacity":new dt(H.paint_circle["circle-opacity"]),"circle-translate":new yt(H.paint_circle["circle-translate"]),"circle-translate-anchor":new yt(H.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yt(H.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yt(H.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new dt(H.paint_circle["circle-stroke-width"]),"circle-stroke-color":new dt(H.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new dt(H.paint_circle["circle-stroke-opacity"])}),layout:Ta},nr=typeof Float32Array<"u"?Float32Array:Array;function Ci(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ji(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],I=t[4],C=t[5],D=t[6],O=t[7],q=t[8],K=t[9],W=t[10],se=t[11],le=t[12],ye=t[13],pe=t[14],Ee=t[15],Ae=i[0],De=i[1],Me=i[2],Fe=i[3];return e[0]=Ae*l+De*I+Me*q+Fe*le,e[1]=Ae*p+De*C+Me*K+Fe*ye,e[2]=Ae*d+De*D+Me*W+Fe*pe,e[3]=Ae*v+De*O+Me*se+Fe*Ee,e[4]=(Ae=i[4])*l+(De=i[5])*I+(Me=i[6])*q+(Fe=i[7])*le,e[5]=Ae*p+De*C+Me*K+Fe*ye,e[6]=Ae*d+De*D+Me*W+Fe*pe,e[7]=Ae*v+De*O+Me*se+Fe*Ee,e[8]=(Ae=i[8])*l+(De=i[9])*I+(Me=i[10])*q+(Fe=i[11])*le,e[9]=Ae*p+De*C+Me*K+Fe*ye,e[10]=Ae*d+De*D+Me*W+Fe*pe,e[11]=Ae*v+De*O+Me*se+Fe*Ee,e[12]=(Ae=i[12])*l+(De=i[13])*I+(Me=i[14])*q+(Fe=i[15])*le,e[13]=Ae*p+De*C+Me*K+Fe*ye,e[14]=Ae*d+De*D+Me*W+Fe*pe,e[15]=Ae*v+De*O+Me*se+Fe*Ee,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var Ll,hc=ji;function xf(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*v,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*v,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*v,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*v,e}Ll=new nr(3),nr!=Float32Array&&(Ll[0]=0,Ll[1]=0,Ll[2]=0),function(){var e=new nr(4);nr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var xd=(function(){var e=new nr(2);nr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Ml)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new ui(i)},t.prototype.queryRadius=function(i){var l=i;return ja("circle-radius",this,l)+ja("circle-stroke-width",this,l)+nn(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C,D){for(var O=gs(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),q=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),K=this.paint.get("circle-pitch-alignment")==="map",W=K?O:function(Ke,Ye){return Ke.map(function(gt){return _s(gt,Ye)})}(O,D),se=K?q*C:q,le=0,ye=d;le<ye.length;le+=1)for(var pe=0,Ee=ye[le];pe<Ee.length;pe+=1){var Ae=Ee[pe],De=K?Ae:_s(Ae,D),Me=se,Fe=xf([],[Ae.x,Ae.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Me*=Fe[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Me*=I.cameraToCenterDistance/Fe[3]),_i(W,De,Me))return!0}return!1},t}(ta));function _s(e,t){var i=xf([],[e.x,e.y,0,1],t);return new V(i[0]/i[3],i[1]/i[3])}var _u=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ui);function bu(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function Xs(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=bu({},{width:l,height:p},i);dp(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function dp(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,I=t.data,C=0;C<p.height;C++)for(var D=((i.y+C)*e.width+i.x)*d,O=((l.y+C)*t.width+l.x)*d,q=0;q<p.width*d;q++)I[O+q]=v[D+q];return t}it("HeatmapBucket",_u,{omit:["layers"]});var pc=function(e,t){bu(this,e,1,t)};pc.prototype.resize=function(e){Xs(this,e,1)},pc.prototype.clone=function(){return new pc({width:this.width,height:this.height},new Uint8Array(this.data))},pc.copy=function(e,t,i,l,p){dp(e,t,i,l,p,1)};var ga=function(e,t){bu(this,e,4,t)};ga.prototype.resize=function(e){Xs(this,e,4)},ga.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},ga.prototype.clone=function(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))},ga.copy=function(e,t,i,l,p){dp(e,t,i,l,p,4)},it("AlphaImage",pc),it("RGBAImage",ga);var sh={paint:new Sn({"heatmap-radius":new dt(H.paint_heatmap["heatmap-radius"]),"heatmap-weight":new dt(H.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yt(H.paint_heatmap["heatmap-intensity"]),"heatmap-color":new no(H.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yt(H.paint_heatmap["heatmap-opacity"])})};function py(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new ga({width:i,height:l}),d=function(se,le,ye){t[e.evaluationKey]=ye;var pe=e.expression.evaluate(t);p.data[se+le+0]=Math.floor(255*pe.r/pe.a),p.data[se+le+1]=Math.floor(255*pe.g/pe.a),p.data[se+le+2]=Math.floor(255*pe.b/pe.a),p.data[se+le+3]=Math.floor(255*pe.a)};if(e.clips)for(var v=0,I=0;v<l;++v,I+=4*i)for(var C=0,D=0;C<i;C++,D+=4){var O=C/(i-1),q=e.clips[v];d(I,D,q.start*(1-O)+q.end*O)}else for(var K=0,W=0;K<i;K++,W+=4)d(0,W,K/(i-1));return p}var xu=function(e){function t(i){e.call(this,i,sh),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new _u(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=py({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(ta),Ws={paint:new Sn({"hillshade-illumination-direction":new yt(H.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yt(H.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yt(H.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yt(H.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yt(H.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yt(H.paint_hillshade["hillshade-accent-color"])})},fc=function(e){function t(i){e.call(this,i,Ws)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(ta),eg=tn([{name:"a_pos",components:2,type:"Int16"}],4).members,dc=wf,d0=wf;function wf(e,t,i){i=i||2;var l,p,d,v,I,C,D,O=t&&t.length,q=O?t[0]*i:e.length,K=lh(e,0,q,i,!0),W=[];if(!K||K.next===K.prev)return W;if(O&&(K=function(le,ye,pe,Ee){var Ae,De,Me,Fe=[];for(Ae=0,De=ye.length;Ae<De;Ae++)(Me=lh(le,ye[Ae]*Ee,Ae<De-1?ye[Ae+1]*Ee:le.length,Ee,!1))===Me.next&&(Me.steiner=!0),Fe.push(vp(Me));for(Fe.sort(uh),Ae=0;Ae<Fe.length;Ae++)c_(Fe[Ae],pe),pe=Do(pe,pe.next);return pe}(e,t,K,i)),e.length>80*i){l=d=e[0],p=v=e[1];for(var se=i;se<q;se+=i)(I=e[se])<l&&(l=I),(C=e[se+1])<p&&(p=C),I>d&&(d=I),C>v&&(v=C);D=(D=Math.max(d-l,v-p))!==0?1/D:0}return mp(K,W,i,l,p,D),W}function lh(e,t,i,l,p){var d,v;if(p===kd(e,t,i,l)>0)for(d=t;d<i;d+=l)v=fy(d,e[d],e[d+1],v);else for(d=i-l;d>=t;d-=l)v=fy(d,e[d],e[d+1],v);return v&&Sf(v,v.next)&&(Eu(v),v=v.next),v}function Do(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!Sf(l,l.next)&&Zi(l.prev,l,l.next)!==0)l=l.next;else{if(Eu(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function mp(e,t,i,l,p,d,v){if(e){!v&&d&&function(O,q,K,W){var se=O;do se.z===null&&(se.z=wu(se.x,se.y,q,K,W)),se.prevZ=se.prev,se.nextZ=se.next,se=se.next;while(se!==O);se.prevZ.nextZ=null,se.prevZ=null,function(le){var ye,pe,Ee,Ae,De,Me,Fe,Ke,Ye=1;do{for(pe=le,le=null,De=null,Me=0;pe;){for(Me++,Ee=pe,Fe=0,ye=0;ye<Ye&&(Fe++,Ee=Ee.nextZ);ye++);for(Ke=Ye;Fe>0||Ke>0&&Ee;)Fe!==0&&(Ke===0||!Ee||pe.z<=Ee.z)?(Ae=pe,pe=pe.nextZ,Fe--):(Ae=Ee,Ee=Ee.nextZ,Ke--),De?De.nextZ=Ae:le=Ae,Ae.prevZ=De,De=Ae;pe=Ee}De.nextZ=null,Ye*=2}while(Me>1)}(se)}(e,l,p,d);for(var I,C,D=e;e.prev!==e.next;)if(I=e.prev,C=e.next,d?wd(e,l,p,d):yp(e))t.push(I.i/i),t.push(e.i/i),t.push(C.i/i),Eu(e),e=C.next,D=C.next;else if((e=C)===D){v?v===1?mp(e=tg(Do(e),t,i),t,i,l,p,d,2):v===2&&rg(e,t,i,l,p,d):mp(Do(e),t,i,l,p,d,1);break}}}function yp(e){var t=e.prev,i=e,l=e.next;if(Zi(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(Za(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&Zi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function wd(e,t,i,l){var p=e.prev,d=e,v=e.next;if(Zi(p,d,v)>=0)return!1;for(var I=p.x>d.x?p.x>v.x?p.x:v.x:d.x>v.x?d.x:v.x,C=p.y>d.y?p.y>v.y?p.y:v.y:d.y>v.y?d.y:v.y,D=wu(p.x<d.x?p.x<v.x?p.x:v.x:d.x<v.x?d.x:v.x,p.y<d.y?p.y<v.y?p.y:v.y:d.y<v.y?d.y:v.y,t,i,l),O=wu(I,C,t,i,l),q=e.prevZ,K=e.nextZ;q&&q.z>=D&&K&&K.z<=O;){if(q!==e.prev&&q!==e.next&&Za(p.x,p.y,d.x,d.y,v.x,v.y,q.x,q.y)&&Zi(q.prev,q,q.next)>=0||(q=q.prevZ,K!==e.prev&&K!==e.next&&Za(p.x,p.y,d.x,d.y,v.x,v.y,K.x,K.y)&&Zi(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;q&&q.z>=D;){if(q!==e.prev&&q!==e.next&&Za(p.x,p.y,d.x,d.y,v.x,v.y,q.x,q.y)&&Zi(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;K&&K.z<=O;){if(K!==e.prev&&K!==e.next&&Za(p.x,p.y,d.x,d.y,v.x,v.y,K.x,K.y)&&Zi(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function tg(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!Sf(p,d)&&mc(p,l,l.next,d)&&yc(p,d)&&yc(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),Eu(l),Eu(l.next),l=e=d),l=l.next}while(l!==e);return Do(l)}function rg(e,t,i,l,p,d){var v=e;do{for(var I=v.next.next;I!==v.prev;){if(v.i!==I.i&&Ef(v,I)){var C=Ed(v,I);return v=Do(v,v.next),C=Do(C,C.next),mp(v,t,i,l,p,d),void mp(C,t,i,l,p,d)}I=I.next}v=v.next}while(v!==e)}function uh(e,t){return e.x-t.x}function c_(e,t){if(t=function(l,p){var d,v=p,I=l.x,C=l.y,D=-1/0;do{if(C<=v.y&&C>=v.next.y&&v.next.y!==v.y){var O=v.x+(C-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(O<=I&&O>D){if(D=O,O===I){if(C===v.y)return v;if(C===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==p);if(!d)return null;if(I===D)return d;var q,K=d,W=d.x,se=d.y,le=1/0;v=d;do I>=v.x&&v.x>=W&&I!==v.x&&Za(C<se?I:D,C,W,se,C<se?D:I,C,v.x,v.y)&&(q=Math.abs(C-v.y)/(I-v.x),yc(v,l)&&(q<le||q===le&&(v.x>d.x||v.x===d.x&&ig(d,v)))&&(d=v,le=q)),v=v.next;while(v!==K);return d}(e,t)){var i=Ed(t,e);Do(t,t.next),Do(i,i.next)}}function ig(e,t){return Zi(e.prev,e,t.prev)<0&&Zi(t.next,e,e.next)<0}function wu(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vp(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Za(e,t,i,l,p,d,v,I){return(p-v)*(t-I)-(e-v)*(d-I)>=0&&(e-v)*(l-I)-(i-v)*(t-I)>=0&&(i-v)*(d-I)-(p-v)*(l-I)>=0}function Ef(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&mc(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(yc(e,t)&&yc(t,e)&&function(i,l){var p=i,d=!1,v=(i.x+l.x)/2,I=(i.y+l.y)/2;do p.y>I!=p.next.y>I&&p.next.y!==p.y&&v<(p.next.x-p.x)*(I-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(Zi(e.prev,e,t.prev)||Zi(e,t.prev,t))||Sf(e,t)&&Zi(e.prev,e,e.next)>0&&Zi(t.prev,t,t.next)>0)}function Zi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Sf(e,t){return e.x===t.x&&e.y===t.y}function mc(e,t,i,l){var p=kf(Zi(e,t,i)),d=kf(Zi(e,t,l)),v=kf(Zi(i,l,e)),I=kf(Zi(i,l,t));return p!==d&&v!==I||!(p!==0||!Mo(e,i,t))||!(d!==0||!Mo(e,l,t))||!(v!==0||!Mo(i,e,l))||!(I!==0||!Mo(i,t,l))}function Mo(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function kf(e){return e>0?1:e<0?-1:0}function yc(e,t){return Zi(e.prev,e,e.next)<0?Zi(e,t,e.next)>=0&&Zi(e,e.prev,t)>=0:Zi(e,t,e.prev)<0||Zi(e,e.next,t)<0}function Ed(e,t){var i=new Sd(e.i,e.x,e.y),l=new Sd(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function fy(e,t,i,l){var p=new Sd(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function Eu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Sd(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kd(e,t,i,l){for(var p=0,d=t,v=i-l;d<i;d+=l)p+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return p}function so(e,t,i,l,p){(function d(v,I,C,D,O){for(;D>C;){if(D-C>600){var q=D-C+1,K=I-C+1,W=Math.log(q),se=.5*Math.exp(2*W/3),le=.5*Math.sqrt(W*se*(q-se)/q)*(K-q/2<0?-1:1);d(v,I,Math.max(C,Math.floor(I-K*se/q+le)),Math.min(D,Math.floor(I+(q-K)*se/q+le)),O)}var ye=v[I],pe=C,Ee=D;for(Lo(v,C,I),O(v[D],ye)>0&&Lo(v,C,D);pe<Ee;){for(Lo(v,pe,Ee),pe++,Ee--;O(v[pe],ye)<0;)pe++;for(;O(v[Ee],ye)>0;)Ee--}O(v[C],ye)===0?Lo(v,C,Ee):Lo(v,++Ee,D),Ee<=I&&(C=Ee+1),I<=Ee&&(D=Ee-1)}})(e,t,i||0,l||e.length-1,p||Ys)}function Lo(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function Ys(e,t){return e<t?-1:e>t?1:0}function Js(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],v=0;v<i;v++){var I=rt(e[v]);I!==0&&(e[v].area=Math.abs(I),p===void 0&&(p=I<0),p===I<0?(l&&d.push(l),l=[e[v]]):l.push(e[v]))}if(l&&d.push(l),t>1)for(var C=0;C<d.length;C++)d[C].length<=t||(so(d[C],t,1,d[C].length-1,ng),d[C]=d[C].slice(0,t));return d}function ng(e,t){return t.area-e.area}function vc(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,v=t;d<v.length;d+=1){var I=v[d].paint.get(e+"-pattern");I.isConstant()||(p=!0);var C=I.constantOr(null);C&&(p=!0,l[C.to]=!0,l[C.from]=!0)}return p}function ag(e,t,i,l,p){for(var d=p.patternDependencies,v=0,I=t;v<I.length;v+=1){var C=I[v],D=C.paint.get(e+"-pattern").value;if(D.kind!=="constant"){var O=D.evaluate({zoom:l-1},i,{},p.availableImages),q=D.evaluate({zoom:l},i,{},p.availableImages),K=D.evaluate({zoom:l+1},i,{},p.availableImages);q=q&&q.name?q.name:q,K=K&&K.name?K.name:K,d[O=O&&O.name?O.name:O]=!0,d[q]=!0,d[K]=!0,i.patterns[C.id]={min:O,mid:q,max:K}}}return i}wf.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(kd(e,0,p?t[0]*i:e.length,i));if(p)for(var v=0,I=t.length;v<I;v++)d-=Math.abs(kd(e,t[v]*i,v<I-1?t[v+1]*i:e.length,i));var C=0;for(v=0;v<l.length;v+=3){var D=l[v]*i,O=l[v+1]*i,q=l[v+2]*i;C+=Math.abs((e[D]-e[q])*(e[O+1]-e[D+1])-(e[D]-e[O])*(e[q+1]-e[D+1]))}return d===0&&C===0?0:Math.abs((C-d)/d)},wf.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var v=0;v<t;v++)i.vertices.push(e[p][d][v]);p>0&&i.holes.push(l+=e[p-1].length)}return i},dc.default=d0;var bs=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new To,this.indexArray=new Zs,this.indexArray2=new cc,this.programConfigurations=new Et(e.layers,e.zoom),this.segments=new Q,this.segments2=new Q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};bs.prototype.populate=function(e,t,i){this.hasPattern=vc("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var I=v[d],C=I.feature,D=I.id,O=I.index,q=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=ki(C,K);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),W,i)){var se=l?l.evaluate(W,{},i,t.availableImages):void 0,le={id:D,properties:C.properties,type:C.type,sourceLayerIndex:q,index:O,geometry:K?W.geometry:Yr(C),patterns:{},sortKey:se};p.push(le)}}l&&p.sort(function(Ke,Ye){return Ke.sortKey-Ye.sortKey});for(var ye=0,pe=p;ye<pe.length;ye+=1){var Ee=pe[ye],Ae=Ee.geometry,De=Ee.index,Me=Ee.sourceLayerIndex;if(this.hasPattern){var Fe=ag("fill",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(Ee,Ae,De,i,{});t.featureIndex.insert(e[De].feature,Ae,De,Me,this.index)}},bs.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},bs.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},bs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bs.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,eg),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},bs.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=Js(t,500);d<v.length;d+=1){for(var I=v[d],C=0,D=0,O=I;D<O.length;D+=1)C+=O[D].length;for(var q=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),K=q.vertexLength,W=[],se=[],le=0,ye=I;le<ye.length;le+=1){var pe=ye[le];if(pe.length!==0){pe!==I[0]&&se.push(W.length/2);var Ee=this.segments2.prepareSegment(pe.length,this.layoutVertexArray,this.indexArray2),Ae=Ee.vertexLength;this.layoutVertexArray.emplaceBack(pe[0].x,pe[0].y),this.indexArray2.emplaceBack(Ae+pe.length-1,Ae),W.push(pe[0].x),W.push(pe[0].y);for(var De=1;De<pe.length;De++)this.layoutVertexArray.emplaceBack(pe[De].x,pe[De].y),this.indexArray2.emplaceBack(Ae+De-1,Ae+De),W.push(pe[De].x),W.push(pe[De].y);Ee.vertexLength+=pe.length,Ee.primitiveLength+=pe.length}}for(var Me=dc(W,se),Fe=0;Fe<Me.length;Fe+=3)this.indexArray.emplaceBack(K+Me[Fe],K+Me[Fe+1],K+Me[Fe+2]);q.vertexLength+=C,q.primitiveLength+=Me.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},it("FillBucket",bs,{omit:["layers","patternFeatures"]});var og=new Sn({"fill-sort-key":new dt(H.layout_fill["fill-sort-key"])}),gp={paint:new Sn({"fill-antialias":new yt(H.paint_fill["fill-antialias"]),"fill-opacity":new dt(H.paint_fill["fill-opacity"]),"fill-color":new dt(H.paint_fill["fill-color"]),"fill-outline-color":new dt(H.paint_fill["fill-outline-color"]),"fill-translate":new yt(H.paint_fill["fill-translate"]),"fill-translate-anchor":new yt(H.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fa(H.paint_fill["fill-pattern"])}),layout:og},_p=function(e){function t(i){e.call(this,i,gp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new bs(i)},t.prototype.queryRadius=function(){return nn(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C){return Rn(gs(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),d)},t.prototype.isTileClipped=function(){return!0},t}(ta),sg=tn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ch=Su;function Su(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(lg,this,t)}function lg(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var v=p._keys[l.readVarint()],I=p._values[l.readVarint()];p.properties[v]=I}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function ug(e){for(var t,i,l=0,p=0,d=e.length,v=d-1;p<d;v=p++)l+=((i=e[v]).x-(t=e[p]).x)*(t.y+i.y);return l}Su.types=["Unknown","Point","LineString","Polygon"],Su.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,v=0,I=[];e.pos<i;){if(p<=0){var C=e.readVarint();l=7&C,p=C>>3}if(p--,l===1||l===2)d+=e.readSVarint(),v+=e.readSVarint(),l===1&&(t&&I.push(t),t=[]),t.push(new V(d,v));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&I.push(t),I},Su.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,v=1/0,I=-1/0,C=1/0,D=-1/0;e.pos<t;){if(l<=0){var O=e.readVarint();i=7&O,l=O>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<v&&(v=p),p>I&&(I=p),(d+=e.readSVarint())<C&&(C=d),d>D&&(D=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,C,I,D]},Su.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),v=this.extent*e,I=this.extent*t,C=this.loadGeometry(),D=Su.types[this.type];function O(W){for(var se=0;se<W.length;se++){var le=W[se];W[se]=[360*(le.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+I)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(l=0;l<C.length;l++)q[l]=C[l][0];O(C=q);break;case 2:for(l=0;l<C.length;l++)O(C[l]);break;case 3:for(C=function(W){var se=W.length;if(se<=1)return[W];for(var le,ye,pe=[],Ee=0;Ee<se;Ee++){var Ae=ug(W[Ee]);Ae!==0&&(ye===void 0&&(ye=Ae<0),ye===Ae<0?(le&&pe.push(le),le=[W[Ee]]):le.push(W[Ee]))}return le&&pe.push(le),pe}(C),l=0;l<C.length;l++)for(p=0;p<C[l].length;p++)O(C[l][p])}C.length===1?C=C[0]:D="Multi"+D;var K={type:"Feature",geometry:{type:D,coordinates:C},properties:this.properties};return"id"in this&&(K.id=this.id),K};var gc=dy;function dy(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ku,this,t),this.length=this._features.length}function ku(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var v=l.readVarint()>>3;p=v===1?l.readString():v===2?l.readFloat():v===3?l.readDouble():v===4?l.readVarint64():v===5?l.readVarint():v===6?l.readSVarint():v===7?l.readBoolean():null}return p}(i))}function Qs(e,t,i){if(e===3){var l=new gc(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}dy.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new ch(this._pbf,t,this.extent,this._keys,this._values)};var lo={VectorTile:function(e,t){this.layers=e.readFields(Qs,{},t)},VectorTileFeature:ch,VectorTileLayer:gc},cg=lo.VectorTileFeature.types,_c=Math.pow(2,13);function Id(e,t,i,l,p,d,v,I){e.emplaceBack(t,i,2*Math.floor(l*_c)+v,p*_c*2,d*_c*2,Math.round(I))}var xs=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new fs,this.indexArray=new Zs,this.programConfigurations=new Et(e.layers,e.zoom),this.segments=new Q,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function bp(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}xs.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=vc("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],v=d.feature,I=d.id,C=d.index,D=d.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,q=ki(v,O);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),q,i)){var K={id:I,sourceLayerIndex:D,index:C,geometry:O?q.geometry:Yr(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(ag("fill-extrusion",this.layers,K,this.zoom,t)):this.addFeature(K,K.geometry,C,i,{}),t.featureIndex.insert(v,K.geometry,C,D,this.index,!0)}}},xs.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},xs.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},xs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},xs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xs.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},xs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xs.prototype.addFeature=function(e,t,i,l,p){for(var d=0,v=Js(t,500);d<v.length;d+=1){for(var I=v[d],C=0,D=0,O=I;D<O.length;D+=1)C+=O[D].length;for(var q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),K=0,W=I;K<W.length;K+=1){var se=W[K];if(se.length!==0&&!((Ft=se).every(function(Bt){return Bt.x<0})||Ft.every(function(Bt){return Bt.x>8192})||Ft.every(function(Bt){return Bt.y<0})||Ft.every(function(Bt){return Bt.y>8192})))for(var le=0,ye=0;ye<se.length;ye++){var pe=se[ye];if(ye>=1){var Ee=se[ye-1];if(!bp(pe,Ee)){q.vertexLength+4>Q.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Ae=pe.sub(Ee)._perp()._unit(),De=Ee.dist(pe);le+De>32768&&(le=0),Id(this.layoutVertexArray,pe.x,pe.y,Ae.x,Ae.y,0,0,le),Id(this.layoutVertexArray,pe.x,pe.y,Ae.x,Ae.y,0,1,le),Id(this.layoutVertexArray,Ee.x,Ee.y,Ae.x,Ae.y,0,0,le+=De),Id(this.layoutVertexArray,Ee.x,Ee.y,Ae.x,Ae.y,0,1,le);var Me=q.vertexLength;this.indexArray.emplaceBack(Me,Me+2,Me+1),this.indexArray.emplaceBack(Me+1,Me+2,Me+3),q.vertexLength+=4,q.primitiveLength+=2}}}}if(q.vertexLength+C>Q.MAX_VERTEX_ARRAY_LENGTH&&(q=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),cg[e.type]==="Polygon"){for(var Fe=[],Ke=[],Ye=q.vertexLength,gt=0,st=I;gt<st.length;gt+=1){var _t=st[gt];if(_t.length!==0){_t!==I[0]&&Ke.push(Fe.length/2);for(var lt=0;lt<_t.length;lt++){var Yt=_t[lt];Id(this.layoutVertexArray,Yt.x,Yt.y,0,0,1,1,0),Fe.push(Yt.x),Fe.push(Yt.y)}}}for(var wt=dc(Fe,Ke),ct=0;ct<wt.length;ct+=3)this.indexArray.emplaceBack(Ye+wt[ct],Ye+wt[ct+2],Ye+wt[ct+1]);q.primitiveLength+=wt.length/3,q.vertexLength+=C}}var Ft;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},it("FillExtrusionBucket",xs,{omit:["layers","features"]});var xp={paint:new Sn({"fill-extrusion-opacity":new yt(H["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new dt(H["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yt(H["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yt(H["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fa(H["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new dt(H["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new dt(H["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yt(H["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},hg=function(e){function t(i){e.call(this,i,xp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new xs(i)},t.prototype.queryRadius=function(){return nn(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C,D){var O=gs(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),q=this.paint.get("fill-extrusion-height").evaluate(l,p),K=this.paint.get("fill-extrusion-base").evaluate(l,p),W=function(le,ye,pe,Ee){for(var Ae=[],De=0,Me=le;De<Me.length;De+=1){var Fe=Me[De],Ke=[Fe.x,Fe.y,0,1];xf(Ke,Ke,ye),Ae.push(new V(Ke[0]/Ke[3],Ke[1]/Ke[3]))}return Ae}(O,D),se=function(le,ye,pe,Ee){for(var Ae=[],De=[],Me=Ee[8]*ye,Fe=Ee[9]*ye,Ke=Ee[10]*ye,Ye=Ee[11]*ye,gt=Ee[8]*pe,st=Ee[9]*pe,_t=Ee[10]*pe,lt=Ee[11]*pe,Yt=0,wt=le;Yt<wt.length;Yt+=1){for(var ct=[],Ft=[],Bt=0,sr=wt[Yt];Bt<sr.length;Bt+=1){var bt=sr[Bt],wr=bt.x,ni=bt.y,Qr=Ee[0]*wr+Ee[4]*ni+Ee[12],Gr=Ee[1]*wr+Ee[5]*ni+Ee[13],ai=Ee[2]*wr+Ee[6]*ni+Ee[14],$r=Ee[3]*wr+Ee[7]*ni+Ee[15],Di=ai+Ke,on=$r+Ye,Kn=Qr+gt,xi=Gr+st,Hn=ai+_t,Ur=$r+lt,ei=new V((Qr+Me)/on,(Gr+Fe)/on);ei.z=Di/on,ct.push(ei);var Xt=new V(Kn/Ur,xi/Ur);Xt.z=Hn/Ur,Ft.push(Xt)}Ae.push(ct),De.push(Ft)}return[Ae,De]}(d,K,q,D);return function(le,ye,pe){var Ee=1/0;Rn(pe,ye)&&(Ee=If(pe,ye[0]));for(var Ae=0;Ae<ye.length;Ae++)for(var De=ye[Ae],Me=le[Ae],Fe=0;Fe<De.length-1;Fe++){var Ke=De[Fe],Ye=[Ke,De[Fe+1],Me[Fe+1],Me[Fe],Ke];ra(pe,Ye)&&(Ee=Math.min(Ee,If(pe,Ye)))}return Ee!==1/0&&Ee}(se[0],se[1],W)},t}(ta);function Rl(e,t){return e.x*t.x+e.y*t.y}function If(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],v=e[0],I=i.sub(p),C=d.sub(p),D=v.sub(p),O=Rl(I,I),q=Rl(I,C),K=Rl(C,C),W=Rl(D,I),se=Rl(D,C),le=O*K-q*q,ye=(K*W-q*se)/le,pe=(O*se-q*W)/le,Ee=p.z*(1-ye-pe)+i.z*ye+d.z*pe;if(isFinite(Ee))return Ee}return 1/0}for(var Ae=1/0,De=0,Me=t;De<Me.length;De+=1)Ae=Math.min(Ae,Me[De].z);return Ae}var pg=tn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,fg=tn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,hh=lo.VectorTileFeature.types,dg=Math.cos(Math.PI/180*37.5),Bl=Math.pow(2,14)/.5,bi=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new gi,this.layoutVertexArray2=new ka,this.indexArray=new Zs,this.programConfigurations=new Et(e.layers,e.zoom),this.segments=new Q,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};bi.prototype.populate=function(e,t,i){this.hasPattern=vc("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,v=e;d<v.length;d+=1){var I=v[d],C=I.feature,D=I.id,O=I.index,q=I.sourceLayerIndex,K=this.layers[0]._featureFilter.needGeometry,W=ki(C,K);if(this.layers[0]._featureFilter.filter(new Wt(this.zoom),W,i)){var se=l?l.evaluate(W,{},i):void 0,le={id:D,properties:C.properties,type:C.type,sourceLayerIndex:q,index:O,geometry:K?W.geometry:Yr(C),patterns:{},sortKey:se};p.push(le)}}l&&p.sort(function(Ke,Ye){return Ke.sortKey-Ye.sortKey});for(var ye=0,pe=p;ye<pe.length;ye+=1){var Ee=pe[ye],Ae=Ee.geometry,De=Ee.index,Me=Ee.sourceLayerIndex;if(this.hasPattern){var Fe=ag("line",this.layers,Ee,this.zoom,t);this.patternFeatures.push(Fe)}else this.addFeature(Ee,Ae,De,i,{});t.featureIndex.insert(e[De].feature,Ae,De,Me,this.index)}},bi.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},bi.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},bi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bi.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,fg)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},bi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bi.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},bi.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),I=d.get("line-cap"),C=d.get("line-miter-limit"),D=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var O=0,q=t;O<q.length;O+=1)this.addLine(q[O],e,v,I,C,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},bi.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var I=hh[t.type]==="Polygon",C=e.length;C>=2&&e[C-1].equals(e[C-2]);)C--;for(var D=0;D<C-1&&e[D].equals(e[D+1]);)D++;if(!(C<(I?3:2))){i==="bevel"&&(p=1.05);var O,q=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),W=void 0,se=void 0,le=void 0,ye=void 0;this.e1=this.e2=-1,I&&(ye=e[D].sub(O=e[C-2])._unit()._perp());for(var pe=D;pe<C;pe++)if(!(se=pe===C-1?I?e[D+1]:void 0:e[pe+1])||!e[pe].equals(se)){ye&&(le=ye),O&&(W=O),O=e[pe],ye=se?se.sub(O)._unit()._perp():le;var Ee=(le=le||ye).add(ye);Ee.x===0&&Ee.y===0||Ee._unit();var Ae=le.x*ye.x+le.y*ye.y,De=Ee.x*ye.x+Ee.y*ye.y,Me=De!==0?1/De:1/0,Fe=2*Math.sqrt(2-2*De),Ke=De<dg&&W&&se,Ye=le.x*ye.y-le.y*ye.x>0;if(Ke&&pe>D){var gt=O.dist(W);if(gt>2*q){var st=O.sub(O.sub(W)._mult(q/gt)._round());this.updateDistance(W,st),this.addCurrentVertex(st,le,0,0,K),W=st}}var _t=W&&se,lt=_t?i:I?"butt":l;if(_t&&lt==="round"&&(Me<d?lt="miter":Me<=2&&(lt="fakeround")),lt==="miter"&&Me>p&&(lt="bevel"),lt==="bevel"&&(Me>2&&(lt="flipbevel"),Me<p&&(lt="miter")),W&&this.updateDistance(W,O),lt==="miter")Ee._mult(Me),this.addCurrentVertex(O,Ee,0,0,K);else if(lt==="flipbevel"){if(Me>100)Ee=ye.mult(-1);else{var Yt=Me*le.add(ye).mag()/le.sub(ye).mag();Ee._perp()._mult(Yt*(Ye?-1:1))}this.addCurrentVertex(O,Ee,0,0,K),this.addCurrentVertex(O,Ee.mult(-1),0,0,K)}else if(lt==="bevel"||lt==="fakeround"){var wt=-Math.sqrt(Me*Me-1),ct=Ye?wt:0,Ft=Ye?0:wt;if(W&&this.addCurrentVertex(O,le,ct,Ft,K),lt==="fakeround")for(var Bt=Math.round(180*Fe/Math.PI/20),sr=1;sr<Bt;sr++){var bt=sr/Bt;if(bt!==.5){var wr=bt-.5;bt+=bt*wr*(bt-1)*((1.0904+Ae*(Ae*(3.55645-1.43519*Ae)-3.2452))*wr*wr+(.848013+Ae*(.215638*Ae-1.06021)))}var ni=ye.sub(le)._mult(bt)._add(le)._unit()._mult(Ye?-1:1);this.addHalfVertex(O,ni.x,ni.y,!1,Ye,0,K)}se&&this.addCurrentVertex(O,ye,-ct,-Ft,K)}else if(lt==="butt")this.addCurrentVertex(O,Ee,0,0,K);else if(lt==="square"){var Qr=W?1:-1;this.addCurrentVertex(O,Ee,Qr,Qr,K)}else lt==="round"&&(W&&(this.addCurrentVertex(O,le,0,0,K),this.addCurrentVertex(O,le,1,1,K,!0)),se&&(this.addCurrentVertex(O,ye,-1,-1,K,!0),this.addCurrentVertex(O,ye,0,0,K)));if(Ke&&pe<C-1){var Gr=O.dist(se);if(Gr>2*q){var ai=O.add(se.sub(O)._mult(q/Gr)._round());this.updateDistance(O,ai),this.addCurrentVertex(ai,ye,0,0,K),O=ai}}}}},bi.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var v=t.y*l-t.x,I=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,v,I,d,!0,-l,p),this.distance>Bl/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},bi.prototype.addHalfVertex=function(e,t,i,l,p,d,v){var I=.5*(this.lineClips?this.scaledDistance*(Bl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),v.primitiveLength++),p?this.e2=C:this.e1=C},bi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},bi.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},it("LineBucket",bi,{omit:["layers","patternFeatures"]});var Ol=new Sn({"line-cap":new yt(H.layout_line["line-cap"]),"line-join":new dt(H.layout_line["line-join"]),"line-miter-limit":new yt(H.layout_line["line-miter-limit"]),"line-round-limit":new yt(H.layout_line["line-round-limit"]),"line-sort-key":new dt(H.layout_line["line-sort-key"])}),my={paint:new Sn({"line-opacity":new dt(H.paint_line["line-opacity"]),"line-color":new dt(H.paint_line["line-color"]),"line-translate":new yt(H.paint_line["line-translate"]),"line-translate-anchor":new yt(H.paint_line["line-translate-anchor"]),"line-width":new dt(H.paint_line["line-width"]),"line-gap-width":new dt(H.paint_line["line-gap-width"]),"line-offset":new dt(H.paint_line["line-offset"]),"line-blur":new dt(H.paint_line["line-blur"]),"line-dasharray":new fn(H.paint_line["line-dasharray"]),"line-pattern":new Fa(H.paint_line["line-pattern"]),"line-gradient":new no(H.paint_line["line-gradient"])}),layout:Ol},ph=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new Wt(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=Ue({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(dt))(my.paint.properties["line-width"].specification);ph.useIntegerZoom=!0;var m0=function(e){function t(i){e.call(this,i,my),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Pn,this.gradientVersion=(this.gradientVersion+1)%fe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=ph.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new bi(i)},t.prototype.queryRadius=function(i){var l=i,p=yy(ja("line-width",this,l),ja("line-gap-width",this,l)),d=ja("line-offset",this,l);return p/2+Math.abs(d)+nn(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,v,I,C){var D=gs(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),O=C/2*yy(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),q=this.paint.get("line-offset").evaluate(l,p);return q&&(d=function(K,W){for(var se=[],le=new V(0,0),ye=0;ye<K.length;ye++){for(var pe=K[ye],Ee=[],Ae=0;Ae<pe.length;Ae++){var De=pe[Ae],Me=pe[Ae+1],Fe=Ae===0?le:De.sub(pe[Ae-1])._unit()._perp(),Ke=Ae===pe.length-1?le:Me.sub(De)._unit()._perp(),Ye=Fe._add(Ke)._unit();Ye._mult(1/(Ye.x*Ke.x+Ye.y*Ke.y)),Ee.push(Ye._mult(W)._add(De))}se.push(Ee)}return se}(d,q*C)),function(K,W,se){for(var le=0;le<W.length;le++){var ye=W[le];if(K.length>=3){for(var pe=0;pe<ye.length;pe++)if(Co(K,ye[pe]))return!0}if(qa(K,ye,se))return!0}return!1}(D,d,O)},t.prototype.isTileClipped=function(){return!0},t}(ta);function yy(e,t){return t>0?t+2*e:e}var mg=tn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wp=tn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ep=(tn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),tn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vy=(tn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),tn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Sp=tn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Td(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,v){var I=d.layout.get("text-transform").evaluate(v,{});return I==="uppercase"?p=p.toLocaleUpperCase():I==="lowercase"&&(p=p.toLocaleLowerCase()),Ln.applyArabicShaping&&(p=Ln.applyArabicShaping(p)),p}(l.text,t,i)}),e}tn([{name:"triangle",components:3,type:"Uint16"}]),tn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),tn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),tn([{type:"Float32",name:"offsetX"}]),tn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var kp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},gy=function(e,t,i,l,p){var d,v,I=8*p-l-1,C=(1<<I)-1,D=C>>1,O=-7,q=i?p-1:0,K=i?-1:1,W=e[t+q];for(q+=K,d=W&(1<<-O)-1,W>>=-O,O+=I;O>0;d=256*d+e[t+q],q+=K,O-=8);for(v=d&(1<<-O)-1,d>>=-O,O+=l;O>0;v=256*v+e[t+q],q+=K,O-=8);if(d===0)d=1-D;else{if(d===C)return v?NaN:1/0*(W?-1:1);v+=Math.pow(2,l),d-=D}return(W?-1:1)*v*Math.pow(2,d-l)},bc=function(e,t,i,l,p,d){var v,I,C,D=8*d-p-1,O=(1<<D)-1,q=O>>1,K=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=l?0:d-1,se=l?1:-1,le=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(I=isNaN(t)?1:0,v=O):(v=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-v))<1&&(v--,C*=2),(t+=v+q>=1?K/C:K*Math.pow(2,1-q))*C>=2&&(v++,C/=2),v+q>=O?(I=0,v=O):v+q>=1?(I=(t*C-1)*Math.pow(2,p),v+=q):(I=t*Math.pow(2,q-1)*Math.pow(2,p),v=0));p>=8;e[i+W]=255&I,W+=se,I/=256,p-=8);for(v=v<<p|I,D+=p;D>0;e[i+W]=255&v,W+=se,v/=256,D-=8);e[i+W-se]|=128*le},Tf=br;function br(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}br.Varint=0,br.Fixed64=1,br.Bytes=2,br.Fixed32=5;var ws=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _a(e){return e.type===br.Bytes?e.readVarint()+e.pos:e.pos+1}function fh(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function dh(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function y0(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function yg(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Ip(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function Tp(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function vg(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function Ap(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Ad(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function gg(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function _g(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Vl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function zp(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function _y(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function mh(e,t,i){e===1&&i.readMessage(Pp,t)}function Pp(e,t,i){if(e===3){var l=i.readMessage(Fl,{}),p=l.width,d=l.height,v=l.left,I=l.top,C=l.advance;t.push({id:l.id,bitmap:new pc({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:v,top:I,advance:C}})}}function Fl(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function Cp(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(le,ye){return ye.h-le.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],I=0,C=0,D=0,O=e;D<O.length;D+=1)for(var q=O[D],K=v.length-1;K>=0;K--){var W=v[K];if(!(q.w>W.w||q.h>W.h)){if(q.x=W.x,q.y=W.y,C=Math.max(C,q.y+q.h),I=Math.max(I,q.x+q.w),q.w===W.w&&q.h===W.h){var se=v.pop();K<v.length&&(v[K]=se)}else q.h===W.h?(W.x+=q.w,W.w-=q.w):q.w===W.w?(W.y+=q.h,W.h-=q.h):(v.push({x:W.x+q.w,y:W.y,w:W.w-q.w,h:q.h}),W.y+=q.h,W.h-=q.h);break}}return{w:I,h:C,fill:t/(I*C)||0}}br.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Vl(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=_y(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Vl(this.buf,this.pos)+4294967296*Vl(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Vl(this.buf,this.pos)+4294967296*_y(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=gy(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=gy(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,v){var I,C,D=v.buf;if(I=(112&(C=D[v.pos++]))>>4,C<128||(I|=(127&(C=D[v.pos++]))<<3,C<128)||(I|=(127&(C=D[v.pos++]))<<10,C<128)||(I|=(127&(C=D[v.pos++]))<<17,C<128)||(I|=(127&(C=D[v.pos++]))<<24,C<128)||(I|=(1&(C=D[v.pos++]))<<31,C<128))return fh(p,I,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ws?function(i,l,p){return ws.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",v=l;v<p;){var I,C,D,O=i[v],q=null,K=O>239?4:O>223?3:O>191?2:1;if(v+K>p)break;K===1?O<128&&(q=O):K===2?(192&(I=i[v+1]))==128&&(q=(31&O)<<6|63&I)<=127&&(q=null):K===3?(C=i[v+2],(192&(I=i[v+1]))==128&&(192&C)==128&&((q=(15&O)<<12|(63&I)<<6|63&C)<=2047||q>=55296&&q<=57343)&&(q=null)):K===4&&(C=i[v+2],D=i[v+3],(192&(I=i[v+1]))==128&&(192&C)==128&&(192&D)==128&&((q=(15&O)<<18|(63&I)<<12|(63&C)<<6|63&D)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,K=1):q>65535&&(q-=65536,d+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),d+=String.fromCharCode(q),v+=K}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==br.Bytes)return e.push(this.readVarint(t));var i=_a(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==br.Bytes)return e.push(this.readSVarint());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==br.Bytes)return e.push(this.readBoolean());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==br.Bytes)return e.push(this.readFloat());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==br.Bytes)return e.push(this.readDouble());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==br.Bytes)return e.push(this.readFixed32());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==br.Bytes)return e.push(this.readSFixed32());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==br.Bytes)return e.push(this.readFixed64());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==br.Bytes)return e.push(this.readSFixed64());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===br.Varint)for(;this.buf[this.pos++]>127;);else if(t===br.Bytes)this.pos=this.readVarint()+this.pos;else if(t===br.Fixed32)this.pos+=4;else{if(t!==br.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),zp(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),zp(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),zp(this.buf,-1&e,this.pos),zp(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),zp(this.buf,-1&e,this.pos),zp(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,I){I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,d>>>=7,I.buf[I.pos++]=127&d|128,I.buf[I.pos]=127&(d>>>=7)}(l,0,i),function(d,v){var I=(7&d)<<4;v.buf[v.pos++]|=I|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var v,I,C=0;C<p.length;C++){if((v=p.charCodeAt(C))>55295&&v<57344){if(!I){v>56319||C+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):I=v;continue}if(v<56320){l[d++]=239,l[d++]=191,l[d++]=189,I=v;continue}v=I-55296<<10|v-56320|65536,I=null}else I&&(l[d++]=239,l[d++]=191,l[d++]=189,I=null);v<128?l[d++]=v:(v<2048?l[d++]=v>>6|192:(v<65536?l[d++]=v>>12|224:(l[d++]=v>>18|240,l[d++]=v>>12&63|128),l[d++]=v>>6&63|128),l[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&dh(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),bc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),bc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&dh(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,br.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,y0,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,yg,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,vg,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Ip,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Tp,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Ap,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Ad,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,gg,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,_g,t)},writeBytesField:function(e,t){this.writeTag(e,br.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,br.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,br.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,br.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,br.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,br.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,br.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,br.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,br.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,br.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Af=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,v=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=v,this.version=l},Dp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Dp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Dp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Dp.tlbr.get=function(){return this.tl.concat(this.br)},Dp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Af.prototype,Dp);var $s=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=Cp(p),v=new ga({width:d.w||1,height:d.h||1});for(var I in e){var C=e[I],D=i[I].paddedRect;ga.copy(C.data,v,{x:0,y:0},{x:D.x+1,y:D.y+1},C.data)}for(var O in t){var q=t[O],K=l[O].paddedRect,W=K.x+1,se=K.y+1,le=q.data.width,ye=q.data.height;ga.copy(q.data,v,{x:0,y:0},{x:W,y:se},q.data),ga.copy(q.data,v,{x:0,y:ye-1},{x:W,y:se-1},{width:le,height:1}),ga.copy(q.data,v,{x:0,y:0},{x:W,y:se+ye},{width:le,height:1}),ga.copy(q.data,v,{x:le-1,y:0},{x:W-1,y:se},{width:1,height:ye}),ga.copy(q.data,v,{x:0,y:0},{x:W+le,y:se},{width:1,height:ye})}this.image=v,this.iconPositions=i,this.patternPositions=l};$s.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new Af(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},$s.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},$s.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},it("ImagePosition",Af),it("ImageAtlas",$s);var an={horizontal:1,vertical:2,horizontalOnly:3},yh=function(){this.scale=1,this.fontStack="",this.imageName=null};yh.forText=function(e,t){var i=new yh;return i.scale=e||1,i.fontStack=t,i},yh.forImage=function(e){var t=new yh;return t.imageName=e,t};var In=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Mp(e,t,i,l,p,d,v,I,C,D,O,q,K,W,se,le){var ye,pe=In.fromFeature(e,p);q===an.vertical&&pe.verticalizePunctuation();var Ee=Ln.processBidirectionalText,Ae=Ln.processStyledBidirectionalText;if(Ee&&pe.sections.length===1){ye=[];for(var De=0,Me=Ee(pe.toString(),Ro(pe,D,d,t,l,W,se));De<Me.length;De+=1){var Fe=Me[De],Ke=new In;Ke.text=Fe,Ke.sections=pe.sections;for(var Ye=0;Ye<Fe.length;Ye++)Ke.sectionIndex.push(0);ye.push(Ke)}}else if(Ae){ye=[];for(var gt=0,st=Ae(pe.text,pe.sectionIndex,Ro(pe,D,d,t,l,W,se));gt<st.length;gt+=1){var _t=st[gt],lt=new In;lt.text=_t[0],lt.sectionIndex=_t[1],lt.sections=pe.sections,ye.push(lt)}}else ye=function(ct,Ft){for(var Bt=[],sr=ct.text,bt=0,wr=0,ni=Ft;wr<ni.length;wr+=1){var Qr=ni[wr];Bt.push(ct.substring(bt,Qr)),bt=Qr}return bt<sr.length&&Bt.push(ct.substring(bt,sr.length)),Bt}(pe,Ro(pe,D,d,t,l,W,se));var Yt=[],wt={positionedLines:Yt,text:pe.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(ct,Ft,Bt,sr,bt,wr,ni,Qr,Gr,ai,$r,Di){for(var on=0,Kn=-17,xi=0,Hn=0,Ur=Qr==="right"?1:Qr==="left"?0:.5,ei=0,Xt=0,Rr=bt;Xt<Rr.length;Xt+=1){var yr=Rr[Xt];yr.trim();var vr=yr.getMaxScale(),na=24*(vr-1),Hi={positionedGlyphs:[],lineOffset:0};ct.positionedLines[ei]=Hi;var Dr=Hi.positionedGlyphs,Mi=0;if(yr.length()){for(var Xi=0;Xi<yr.length();Xi++){var cr=yr.getSection(Xi),sl=yr.getSectionIndex(Xi),Ka=yr.getCharCode(Xi),Aa=0,Ii=null,Bo=null,Is=null,Th=24,Oo=!(Gr===an.horizontal||!$r&&!qs(Ka)||$r&&(zf[Ka]||(Ts=Ka,Je.Arabic(Ts)||Je["Arabic Supplement"](Ts)||Je["Arabic Extended-A"](Ts)||Je["Arabic Presentation Forms-A"](Ts)||Je["Arabic Presentation Forms-B"](Ts))));if(cr.imageName){var ll=sr[cr.imageName];if(!ll)continue;Is=cr.imageName,ct.iconsInText=ct.iconsInText||!0,Bo=ll.paddedRect;var aa=ll.displaySize;cr.scale=24*cr.scale/Di,Aa=na+(24-aa[1]*cr.scale),Th=(Ii={width:aa[0],height:aa[1],left:1,top:-3,advance:Oo?aa[1]:aa[0]}).advance;var Wl=Oo?aa[0]*cr.scale-24*vr:aa[1]*cr.scale-24*vr;Wl>0&&Wl>Mi&&(Mi=Wl)}else{var Lf=Bt[cr.fontStack],Ah=Lf&&Lf[Ka];if(Ah&&Ah.rect)Bo=Ah.rect,Ii=Ah.metrics;else{var ul=Ft[cr.fontStack],Vo=ul&&ul[Ka];if(!Vo)continue;Ii=Vo.metrics}Aa=24*(vr-cr.scale)}Oo?(ct.verticalizable=!0,Dr.push({glyph:Ka,imageName:Is,x:on,y:Kn+Aa,vertical:Oo,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:sl,metrics:Ii,rect:Bo}),on+=Th*cr.scale+ai):(Dr.push({glyph:Ka,imageName:Is,x:on,y:Kn+Aa,vertical:Oo,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:sl,metrics:Ii,rect:Bo}),on+=Ii.advance*cr.scale+ai)}Dr.length!==0&&(xi=Math.max(on-ai,xi),bg(Dr,0,Dr.length-1,Ur,Mi)),on=0;var Rf=wr*vr+Mi;Hi.lineOffset=Math.max(Mi,na),Kn+=Rf,Hn=Math.max(Rf,Hn),++ei}else Kn+=wr,++ei}var Ts,zh=Kn- -17,Ph=Ul(ni),As=Ph.horizontalAlign,Ch=Ph.verticalAlign;(function(Bf,Ha,Fo,Xa,zs,Fp,Yl,Cd,Of){var cl,Mu=(Ha-Fo)*zs;cl=Fp!==Yl?-Cd*Xa- -17:(-Xa*Of+.5)*Yl;for(var Dh=0,Jl=Bf;Dh<Jl.length;Dh+=1)for(var Ql=0,Np=Jl[Dh].positionedGlyphs;Ql<Np.length;Ql+=1){var Mh=Np[Ql];Mh.x+=Mu,Mh.y+=cl}})(ct.positionedLines,Ur,As,Ch,xi,Hn,wr,zh,bt.length),ct.top+=-Ch*zh,ct.bottom=ct.top+zh,ct.left+=-As*xi,ct.right=ct.left+xi}(wt,t,i,l,ye,v,I,C,q,D,K,le),!function(ct){for(var Ft=0,Bt=ct;Ft<Bt.length;Ft+=1)if(Bt[Ft].positionedGlyphs.length!==0)return!1;return!0}(Yt)&&wt}In.fromFeature=function(e,t){for(var i=new In,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},In.prototype.length=function(){return this.text.length},In.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},In.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},In.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},In.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&sc(l)&&!kp[e[i+1]]||p&&sc(p)&&!kp[e[i-1]]||!kp[e[i]]?e[i]:kp[e[i]]}return t}(this.text)},In.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&zf[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&zf[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},In.prototype.substring=function(e,t){var i=new In;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},In.prototype.toString=function(){return this.text},In.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},In.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(yh.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},In.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(yh.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Vt("Reached maximum number of images 6401")}else Vt("Can't add FormattedSection with an empty image.")},In.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var zf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gn={};function by(e,t,i,l,p,d){if(t.imageName){var v=l[t.imageName];return v?v.displaySize[0]*t.scale*24/d+p:0}var I=i[t.fontStack],C=I&&I[e];return C?C.metrics.advance*t.scale+p:0}function xy(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function ia(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function Nl(e,t,i,l,p,d){for(var v=null,I=xy(t,i,p,d),C=0,D=l;C<D.length;C+=1){var O=D[C],q=xy(t-O.x,i,p,d)+O.badness;q<=I&&(v=O,I=q)}return{index:e,x:t,priorBreak:v,badness:I}}function Ro(e,t,i,l,p,d,v){if(d!=="point")return[];if(!e)return[];for(var I,C=[],D=function(ye,pe,Ee,Ae,De,Me){for(var Fe=0,Ke=0;Ke<ye.length();Ke++){var Ye=ye.getSection(Ke);Fe+=by(ye.getCharCode(Ke),Ye,Ae,De,pe,Me)}return Fe/Math.max(1,Math.ceil(Fe/Ee))}(e,t,i,l,p,v),O=e.text.indexOf("\u200B")>=0,q=0,K=0;K<e.length();K++){var W=e.getSection(K),se=e.getCharCode(K);if(zf[se]||(q+=by(se,W,l,p,t,v)),K<e.length()-1){var le=!((I=se)<11904||!(Je["Bopomofo Extended"](I)||Je.Bopomofo(I)||Je["CJK Compatibility Forms"](I)||Je["CJK Compatibility Ideographs"](I)||Je["CJK Compatibility"](I)||Je["CJK Radicals Supplement"](I)||Je["CJK Strokes"](I)||Je["CJK Symbols and Punctuation"](I)||Je["CJK Unified Ideographs Extension A"](I)||Je["CJK Unified Ideographs"](I)||Je["Enclosed CJK Letters and Months"](I)||Je["Halfwidth and Fullwidth Forms"](I)||Je.Hiragana(I)||Je["Ideographic Description Characters"](I)||Je["Kangxi Radicals"](I)||Je["Katakana Phonetic Extensions"](I)||Je.Katakana(I)||Je["Vertical Forms"](I)||Je["Yi Radicals"](I)||Je["Yi Syllables"](I)));(Gn[se]||le||W.imageName)&&C.push(Nl(K+1,q,D,C,ia(se,e.getCharCode(K+1),le&&O),!1))}}return function ye(pe){return pe?ye(pe.priorBreak).concat(pe.index):[]}(Nl(e.length(),q,D,C,0,!0))}function Ul(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function bg(e,t,i,l,p){if(l||p)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*l,I=t;I<=i;I++)e[I].x-=v,e[I].y+=p}function vh(e,t,i,l,p,d){var v,I=e.image;if(I.content){var C=I.content,D=I.pixelRatio||1;v=[C[0]/D,C[1]/D,I.displaySize[0]-C[2]/D,I.displaySize[1]-C[3]/D]}var O,q,K,W,se=t.left*d,le=t.right*d;i==="width"||i==="both"?(W=p[0]+se-l[3],q=p[0]+le+l[1]):q=(W=p[0]+(se+le-I.displaySize[0])/2)+I.displaySize[0];var ye=t.top*d,pe=t.bottom*d;return i==="height"||i==="both"?(O=p[1]+ye-l[0],K=p[1]+pe+l[2]):K=(O=p[1]+(ye+pe-I.displaySize[1])/2)+I.displaySize[1],{image:I,top:O,right:q,bottom:K,left:W,collisionPadding:v}}Gn[10]=!0,Gn[32]=!0,Gn[38]=!0,Gn[40]=!0,Gn[41]=!0,Gn[43]=!0,Gn[45]=!0,Gn[47]=!0,Gn[173]=!0,Gn[183]=!0,Gn[8203]=!0,Gn[8208]=!0,Gn[8211]=!0,Gn[8231]=!0;var Pf=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(V);function zd(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Wt(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<l.length&&l[v]<e+1;)v++;v=Math.min(l.length-1,v);var I=l[d],C=l[v];return i.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:C,interpolationType:p}:{kind:"camera",minZoom:I,maxZoom:C,minSize:i.evaluate(new Wt(I)),maxSize:i.evaluate(new Wt(C)),interpolationType:p}}function gh(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?Pi(p/128,i.upperSize/128,t.uSizeT):l}function _h(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?we(si.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=Pi(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}it("Anchor",Pf);var xg=Object.freeze({__proto__:null,getSizeData:zd,evaluateSizeForFeature:gh,evaluateSizeForZoom:_h,SIZE_PACK_FACTOR:128});function bh(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,v=t.segment+1,I=0;I>-i/2;){if(--v<0)return!1;I-=e[v].dist(d),d=e[v]}I+=e[v].dist(e[v+1]),v++;for(var C=[],D=0;I<i/2;){var O=e[v],q=e[v+1];if(!q)return!1;var K=e[v-1].angleTo(O)-O.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:I,angleDelta:K}),D+=K;I-C[0].distance>l;)D-=C.shift().angleDelta;if(D>p)return!1;v++,I+=O.dist(q)}return!0}function Cf(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function wy(e,t,i){return e?.6*t*i:0}function Ey(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function xh(e,t,i,l,p,d){for(var v=wy(i,p,d),I=Ey(i,l)*d,C=0,D=Cf(e)/2,O=0;O<e.length-1;O++){var q=e[O],K=e[O+1],W=q.dist(K);if(C+W>D){var se=(D-C)/W,le=Pi(q.x,K.x,se),ye=Pi(q.y,K.y,se),pe=new Pf(le,ye,K.angleTo(q),O);return pe._round(),!v||bh(e,pe,I,v,t)?pe:void 0}C+=W}}function wg(e,t,i,l,p,d,v,I,C){var D=wy(l,d,v),O=Ey(l,p),q=O*v,K=e[0].x===0||e[0].x===C||e[0].y===0||e[0].y===C;return t-q<t/4&&(t=q+t/4),function W(se,le,ye,pe,Ee,Ae,De,Me,Fe){for(var Ke=Ae/2,Ye=Cf(se),gt=0,st=le-ye,_t=[],lt=0;lt<se.length-1;lt++){for(var Yt=se[lt],wt=se[lt+1],ct=Yt.dist(wt),Ft=wt.angleTo(Yt);st+ye<gt+ct;){var Bt=((st+=ye)-gt)/ct,sr=Pi(Yt.x,wt.x,Bt),bt=Pi(Yt.y,wt.y,Bt);if(sr>=0&&sr<Fe&&bt>=0&&bt<Fe&&st-Ke>=0&&st+Ke<=Ye){var wr=new Pf(sr,bt,Ft,lt);wr._round(),pe&&!bh(se,wr,Ae,pe,Ee)||_t.push(wr)}}gt+=ct}return Me||_t.length||De||(_t=W(se,gt/2,ye,pe,Ee,Ae,De,!0,Fe)),_t}(e,K?t/2*I%t:(O/2+2*d)*v*I%t,t,D,i,q,K,!1,C)}function ql(e,t,i,l,p){for(var d=[],v=0;v<e.length;v++)for(var I=e[v],C=void 0,D=0;D<I.length-1;D++){var O=I[D],q=I[D+1];O.x<t&&q.x<t||(O.x<t?O=new V(t,O.y+(t-O.x)/(q.x-O.x)*(q.y-O.y))._round():q.x<t&&(q=new V(t,O.y+(t-O.x)/(q.x-O.x)*(q.y-O.y))._round()),O.y<i&&q.y<i||(O.y<i?O=new V(O.x+(i-O.y)/(q.y-O.y)*(q.x-O.x),i)._round():q.y<i&&(q=new V(O.x+(i-O.y)/(q.y-O.y)*(q.x-O.x),i)._round()),O.x>=l&&q.x>=l||(O.x>=l?O=new V(l,O.y+(l-O.x)/(q.x-O.x)*(q.y-O.y))._round():q.x>=l&&(q=new V(l,O.y+(l-O.x)/(q.x-O.x)*(q.y-O.y))._round()),O.y>=p&&q.y>=p||(O.y>=p?O=new V(O.x+(p-O.y)/(q.y-O.y)*(q.x-O.x),p)._round():q.y>=p&&(q=new V(O.x+(p-O.y)/(q.y-O.y)*(q.x-O.x),p)._round()),C&&O.equals(C[C.length-1])||d.push(C=[O]),C.push(q)))))}return d}function Es(e,t,i,l){var p=[],d=e.image,v=d.pixelRatio,I=d.paddedRect.w-2,C=d.paddedRect.h-2,D=e.right-e.left,O=e.bottom-e.top,q=d.stretchX||[[0,I]],K=d.stretchY||[[0,C]],W=function(sr,bt){return sr+bt[1]-bt[0]},se=q.reduce(W,0),le=K.reduce(W,0),ye=I-se,pe=C-le,Ee=0,Ae=se,De=0,Me=le,Fe=0,Ke=ye,Ye=0,gt=pe;if(d.content&&l){var st=d.content;Ee=el(q,0,st[0]),De=el(K,0,st[1]),Ae=el(q,st[0],st[2]),Me=el(K,st[1],st[3]),Fe=st[0]-Ee,Ye=st[1]-De,Ke=st[2]-st[0]-Ae,gt=st[3]-st[1]-Me}var _t=function(sr,bt,wr,ni){var Qr=Iu(sr.stretch-Ee,Ae,D,e.left),Gr=ky(sr.fixed-Fe,Ke,sr.stretch,se),ai=Iu(bt.stretch-De,Me,O,e.top),$r=ky(bt.fixed-Ye,gt,bt.stretch,le),Di=Iu(wr.stretch-Ee,Ae,D,e.left),on=ky(wr.fixed-Fe,Ke,wr.stretch,se),Kn=Iu(ni.stretch-De,Me,O,e.top),xi=ky(ni.fixed-Ye,gt,ni.stretch,le),Hn=new V(Qr,ai),Ur=new V(Di,ai),ei=new V(Di,Kn),Xt=new V(Qr,Kn),Rr=new V(Gr/v,$r/v),yr=new V(on/v,xi/v),vr=t*Math.PI/180;if(vr){var na=Math.sin(vr),Hi=Math.cos(vr),Dr=[Hi,-na,na,Hi];Hn._matMult(Dr),Ur._matMult(Dr),Xt._matMult(Dr),ei._matMult(Dr)}var Mi=sr.stretch+sr.fixed,Xi=bt.stretch+bt.fixed;return{tl:Hn,tr:Ur,bl:Xt,br:ei,tex:{x:d.paddedRect.x+1+Mi,y:d.paddedRect.y+1+Xi,w:wr.stretch+wr.fixed-Mi,h:ni.stretch+ni.fixed-Xi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rr,pixelOffsetBR:yr,minFontScaleX:Ke/v/D,minFontScaleY:gt/v/O,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var lt=Sy(q,ye,se),Yt=Sy(K,pe,le),wt=0;wt<lt.length-1;wt++)for(var ct=lt[wt],Ft=lt[wt+1],Bt=0;Bt<Yt.length-1;Bt++)p.push(_t(ct,Yt[Bt],Ft,Yt[Bt+1]));else p.push(_t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:C+1}));return p}function el(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var v=d[p];l+=Math.max(t,Math.min(i,v[1]))-Math.max(t,Math.min(i,v[0]))}return l}function Sy(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var v=d[p],I=v[0],C=v[1],D=l[l.length-1];l.push({fixed:I-D.stretch,stretch:D.stretch}),l.push({fixed:I-D.stretch,stretch:D.stretch+(C-I)})}return l.push({fixed:t+1,stretch:i}),l}function Iu(e,t,i,l){return e/t*i+l}function ky(e,t,i,l){return e-t*i/l}var Df=function(e,t,i,l,p,d,v,I,C,D){if(this.boxStartIndex=e.length,C){var O=d.top,q=d.bottom,K=d.collisionPadding;K&&(O-=K[1],q+=K[3]);var W=q-O;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{var se=d.top*v-I,le=d.bottom*v+I,ye=d.left*v-I,pe=d.right*v+I,Ee=d.collisionPadding;if(Ee&&(ye-=Ee[0]*v,se-=Ee[1]*v,pe+=Ee[2]*v,le+=Ee[3]*v),D){var Ae=new V(ye,se),De=new V(pe,se),Me=new V(ye,le),Fe=new V(pe,le),Ke=D*Math.PI/180;Ae._rotate(Ke),De._rotate(Ke),Me._rotate(Ke),Fe._rotate(Ke),ye=Math.min(Ae.x,De.x,Me.x,Fe.x),pe=Math.max(Ae.x,De.x,Me.x,Fe.x),se=Math.min(Ae.y,De.y,Me.y,Fe.y),le=Math.max(Ae.y,De.y,Me.y,Fe.y)}e.emplaceBack(t.x,t.y,ye,se,pe,le,i,l,p)}this.boxEndIndex=e.length},tl=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Lp),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Lp(e,t){return e<t?-1:e>t?1:0}function Eg(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,v=-1/0,I=e[0],C=0;C<I.length;C++){var D=I[C];(!C||D.x<l)&&(l=D.x),(!C||D.y<p)&&(p=D.y),(!C||D.x>d)&&(d=D.x),(!C||D.y>v)&&(v=D.y)}var O=Math.min(d-l,v-p),q=O/2,K=new tl([],Rp);if(O===0)return new V(l,p);for(var W=l;W<d;W+=O)for(var se=p;se<v;se+=O)K.push(new Tu(W+q,se+q,q,e));for(var le=function(Ee){for(var Ae=0,De=0,Me=0,Fe=Ee[0],Ke=0,Ye=Fe.length,gt=Ye-1;Ke<Ye;gt=Ke++){var st=Fe[Ke],_t=Fe[gt],lt=st.x*_t.y-_t.x*st.y;De+=(st.x+_t.x)*lt,Me+=(st.y+_t.y)*lt,Ae+=3*lt}return new Tu(De/Ae,Me/Ae,0,Ee)}(e),ye=K.length;K.length;){var pe=K.pop();(pe.d>le.d||!le.d)&&(le=pe,i&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,ye)),pe.max-le.d<=t||(K.push(new Tu(pe.p.x-(q=pe.h/2),pe.p.y-q,q,e)),K.push(new Tu(pe.p.x+q,pe.p.y-q,q,e)),K.push(new Tu(pe.p.x-q,pe.p.y+q,q,e)),K.push(new Tu(pe.p.x+q,pe.p.y+q,q,e)),ye+=4)}return i&&(console.log("num probes: "+ye),console.log("best distance: "+le.d)),le.p}function Rp(e,t){return t.max-e.max}function Tu(e,t,i,l){this.p=new V(e,t),this.h=i,this.d=function(p,d){for(var v=!1,I=1/0,C=0;C<d.length;C++)for(var D=d[C],O=0,q=D.length,K=q-1;O<q;K=O++){var W=D[O],se=D[K];W.y>p.y!=se.y>p.y&&p.x<(se.x-W.x)*(p.y-W.y)/(se.y-W.y)+W.x&&(v=!v),I=Math.min(I,Po(p,W,se))}return(v?1:-1)*Math.sqrt(I)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}tl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},tl.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},tl.prototype.peek=function(){return this.data[0]},tl.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},tl.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),v=t[d],I=d+1;if(I<this.length&&i(t[I],v)<0&&(d=I,v=t[I]),i(v,p)>=0)break;t[e]=v,e=d}t[e]=p};var Pd=Number.POSITIVE_INFINITY;function Iy(e,t){return t[1]!==Pd?function(i,l,p){var d=0,v=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":v=p-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,v]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var v=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-v;break;case"top-left":case"bottom-left":p=v;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function Au(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ty(e,t,i,l,p,d,v,I,C,D,O,q,K,W,se){var le=function(De,Me,Fe,Ke,Ye,gt,st,_t){for(var lt=Ke.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Yt=[],wt=0,ct=Me.positionedLines;wt<ct.length;wt+=1)for(var Ft=ct[wt],Bt=0,sr=Ft.positionedGlyphs;Bt<sr.length;Bt+=1){var bt=sr[Bt];if(bt.rect){var wr=bt.rect||{},ni=4,Qr=!0,Gr=1,ai=0,$r=(Ye||_t)&&bt.vertical,Di=bt.metrics.advance*bt.scale/2;if(_t&&Me.verticalizable&&(ai=Ft.lineOffset/2-(bt.imageName?-(24-bt.metrics.width*bt.scale)/2:24*(bt.scale-1))),bt.imageName){var on=st[bt.imageName];Qr=on.sdf,ni=1/(Gr=on.pixelRatio)}var Kn=Ye?[bt.x+Di,bt.y]:[0,0],xi=Ye?[0,0]:[bt.x+Di+Fe[0],bt.y+Fe[1]-ai],Hn=[0,0];$r&&(Hn=xi,xi=[0,0]);var Ur=(bt.metrics.left-ni)*bt.scale-Di+xi[0],ei=(-bt.metrics.top-ni)*bt.scale+xi[1],Xt=Ur+wr.w*bt.scale/Gr,Rr=ei+wr.h*bt.scale/Gr,yr=new V(Ur,ei),vr=new V(Xt,ei),na=new V(Ur,Rr),Hi=new V(Xt,Rr);if($r){var Dr=new V(-Di,Di- -17),Mi=-Math.PI/2,Xi=12-Di,cr=new V(22-Xi,-(bt.imageName?Xi:0)),sl=new(Function.prototype.bind.apply(V,[null].concat(Hn)));yr._rotateAround(Mi,Dr)._add(cr)._add(sl),vr._rotateAround(Mi,Dr)._add(cr)._add(sl),na._rotateAround(Mi,Dr)._add(cr)._add(sl),Hi._rotateAround(Mi,Dr)._add(cr)._add(sl)}if(lt){var Ka=Math.sin(lt),Aa=Math.cos(lt),Ii=[Aa,-Ka,Ka,Aa];yr._matMult(Ii),vr._matMult(Ii),na._matMult(Ii),Hi._matMult(Ii)}var Bo=new V(0,0),Is=new V(0,0);Yt.push({tl:yr,tr:vr,bl:na,br:Hi,tex:wr,writingMode:Me.writingMode,glyphOffset:Kn,sectionIndex:bt.sectionIndex,isSDF:Qr,pixelOffsetTL:Bo,pixelOffsetBR:Is,minFontScaleX:0,minFontScaleY:0})}}return Yt}(0,i,I,p,d,v,l,e.allowVerticalPlacement),ye=e.textSizeData,pe=null;ye.kind==="source"?(pe=[128*p.layout.get("text-size").evaluate(v,{})])[0]>32640&&Vt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ye.kind==="composite"&&((pe=[128*W.compositeTextSizes[0].evaluate(v,{},se),128*W.compositeTextSizes[1].evaluate(v,{},se)])[0]>32640||pe[1]>32640)&&Vt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,le,pe,I,d,v,D,t,C.lineStartIndex,C.lineLength,K,se);for(var Ee=0,Ae=O;Ee<Ae.length;Ee+=1)q[Ae[Ee]]=e.text.placedSymbolArray.length-1;return 4*le.length}function jl(e){for(var t in e)return e[t];return null}function rl(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],v=d.length-1;v>=0;v--)if(l.dist(d[v])<i)return!0}else p[t]=[];return p[t].push(l),!1}var xc=lo.VectorTileFeature.types,Sg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zu(e,t,i,l,p,d,v,I,C,D,O,q,K){var W=I?Math.min(32640,Math.round(I[0])):0,se=I?Math.min(32640,Math.round(I[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,v,(W<<1)+(C?1:0),se,16*D,16*O,256*q,256*K)}function kg(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Ig(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(hs(i[t].text))return!0;return!1}var il=function(e){this.layoutVertexArray=new Ao,this.indexArray=new Zs,this.programConfigurations=e,this.segments=new Q,this.dynamicLayoutVertexArray=new yu,this.opacityVertexArray=new ds,this.placedSymbolArray=new c};il.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},il.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,mg.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,wp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Sg,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},il.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},it("SymbolBuffers",il);var Zl=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new Q,this.collisionVertexArray=new Dl};Zl.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Ep.members,!0)},Zl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},it("CollisionBuffers",Zl);var Pr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ci([]),this.placementViewportMatrix=Ci([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zd(this.zoom,t["text-size"]),this.iconSizeData=zd(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return an[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};Pr.prototype.createArrays=function(){this.text=new il(new Et(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new il(new Et(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new k,this.lineVertexArray=new A,this.symbolInstances=new E},Pr.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var v=kp[e.charAt(d)];v&&(t[v.charCodeAt(0)]=!0)}},Pr.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),v=p.get("text-field"),I=p.get("icon-image"),C=(v.value.kind!=="constant"||v.value.value instanceof vi&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),D=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,O=p.get("symbol-sort-key");if(this.features=[],C||D){for(var q=t.iconDependencies,K=t.glyphDependencies,W=t.availableImages,se=new Wt(this.zoom),le=0,ye=e;le<ye.length;le+=1){var pe=ye[le],Ee=pe.feature,Ae=pe.id,De=pe.index,Me=pe.sourceLayerIndex,Fe=l._featureFilter.needGeometry,Ke=ki(Ee,Fe);if(l._featureFilter.filter(se,Ke,i)){Fe||(Ke.geometry=Yr(Ee));var Ye=void 0;if(C){var gt=l.getValueAndResolveTokens("text-field",Ke,i,W),st=vi.factory(gt);Ig(st)&&(this.hasRTLText=!0),(!this.hasRTLText||_d()==="unavailable"||this.hasRTLText&&Ln.isParsed())&&(Ye=Td(st,l,Ke))}var _t=void 0;if(D){var lt=l.getValueAndResolveTokens("icon-image",Ke,i,W);_t=lt instanceof Yi?lt:Yi.fromString(lt)}if(Ye||_t){var Yt=this.sortFeaturesByKey?O.evaluate(Ke,{},i):void 0;if(this.features.push({id:Ae,text:Ye,icon:_t,index:De,sourceLayerIndex:Me,geometry:Ke.geometry,properties:Ee.properties,type:xc[Ee.type],sortKey:Yt}),_t&&(q[_t.name]=!0),Ye){var wt=d.evaluate(Ke,{},i).join(","),ct=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(an.vertical)>=0;for(var Ft=0,Bt=Ye.sections;Ft<Bt.length;Ft+=1){var sr=Bt[Ft];if(sr.image)q[sr.image.name]=!0;else{var bt=pp(Ye.toString()),wr=sr.fontStack||wt,ni=K[wr]=K[wr]||{};this.calculateGlyphDependencies(sr.text,ni,ct,this.allowVerticalPlacement,bt)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(Qr){var Gr={},ai={},$r=[],Di=0;function on(Dr){$r.push(Qr[Dr]),Di++}function Kn(Dr,Mi,Xi){var cr=ai[Dr];return delete ai[Dr],ai[Mi]=cr,$r[cr].geometry[0].pop(),$r[cr].geometry[0]=$r[cr].geometry[0].concat(Xi[0]),cr}function xi(Dr,Mi,Xi){var cr=Gr[Mi];return delete Gr[Mi],Gr[Dr]=cr,$r[cr].geometry[0].shift(),$r[cr].geometry[0]=Xi[0].concat($r[cr].geometry[0]),cr}function Hn(Dr,Mi,Xi){var cr=Xi?Mi[0][Mi[0].length-1]:Mi[0][0];return Dr+":"+cr.x+":"+cr.y}for(var Ur=0;Ur<Qr.length;Ur++){var ei=Qr[Ur],Xt=ei.geometry,Rr=ei.text?ei.text.toString():null;if(Rr){var yr=Hn(Rr,Xt),vr=Hn(Rr,Xt,!0);if(yr in ai&&vr in Gr&&ai[yr]!==Gr[vr]){var na=xi(yr,vr,Xt),Hi=Kn(yr,vr,$r[na].geometry);delete Gr[yr],delete ai[vr],ai[Hn(Rr,$r[Hi].geometry,!0)]=Hi,$r[na].geometry=null}else yr in ai?Kn(yr,vr,Xt):vr in Gr?xi(yr,vr,Xt):(on(Ur),Gr[yr]=Di-1,ai[vr]=Di-1)}else on(Ur)}return $r.filter(function(Dr){return Dr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Qr,Gr){return Qr.sortKey-Gr.sortKey})}},Pr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Pr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Pr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Pr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Pr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Pr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Pr.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},v=e.segment+1;v<t.length;v++)d[v]={x:t[v].x,y:t[v].y,tileUnitDistanceFromAnchor:l},v<t.length-1&&(l+=t[v+1].dist(t[v]));for(var I=e.segment||0;I>=0;I--)d[I]={x:t[I].x,y:t[I].y,tileUnitDistanceFromAnchor:p},I>0&&(p+=t[I-1].dist(t[I]));for(var C=0;C<t.length;C++){var D=d[C];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Pr.prototype.addSymbols=function(e,t,i,l,p,d,v,I,C,D,O,q){for(var K=e.indexArray,W=e.layoutVertexArray,se=e.segments.prepareSegment(4*t.length,W,K,this.canOverlap?d.sortKey:void 0),le=this.glyphOffsetArray.length,ye=se.vertexLength,pe=this.allowVerticalPlacement&&v===an.vertical?Math.PI/2:0,Ee=d.text&&d.text.sections,Ae=0;Ae<t.length;Ae++){var De=t[Ae],Me=De.tl,Fe=De.tr,Ke=De.bl,Ye=De.br,gt=De.tex,st=De.pixelOffsetTL,_t=De.pixelOffsetBR,lt=De.minFontScaleX,Yt=De.minFontScaleY,wt=De.glyphOffset,ct=De.isSDF,Ft=De.sectionIndex,Bt=se.vertexLength,sr=wt[1];zu(W,I.x,I.y,Me.x,sr+Me.y,gt.x,gt.y,i,ct,st.x,st.y,lt,Yt),zu(W,I.x,I.y,Fe.x,sr+Fe.y,gt.x+gt.w,gt.y,i,ct,_t.x,st.y,lt,Yt),zu(W,I.x,I.y,Ke.x,sr+Ke.y,gt.x,gt.y+gt.h,i,ct,st.x,_t.y,lt,Yt),zu(W,I.x,I.y,Ye.x,sr+Ye.y,gt.x+gt.w,gt.y+gt.h,i,ct,_t.x,_t.y,lt,Yt),kg(e.dynamicLayoutVertexArray,I,pe),K.emplaceBack(Bt,Bt+1,Bt+2),K.emplaceBack(Bt+1,Bt+2,Bt+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),Ae!==t.length-1&&Ft===t[Ae+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,d,d.index,{},q,Ee&&Ee[Ft])}e.placedSymbolArray.emplaceBack(I.x,I.y,le,this.glyphOffsetArray.length-le,ye,C,D,I.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],v,0,!1,0,O)},Pr.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},Pr.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,v){var I=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),C=I.vertexLength,D=p.layoutVertexArray,O=p.collisionVertexArray,q=v.anchorX,K=v.anchorY;this._addCollisionDebugVertex(D,O,d,q,K,new V(e,t)),this._addCollisionDebugVertex(D,O,d,q,K,new V(i,t)),this._addCollisionDebugVertex(D,O,d,q,K,new V(i,l)),this._addCollisionDebugVertex(D,O,d,q,K,new V(e,l)),I.vertexLength+=4;var W=p.indexArray;W.emplaceBack(C,C+1),W.emplaceBack(C+1,C+2),W.emplaceBack(C+2,C+3),W.emplaceBack(C+3,C),I.primitiveLength+=4},Pr.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},Pr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Zl(vu,vy.members,cc),this.iconCollisionBox=new Zl(vu,vy.members,cc);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Pr.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,v,I,C){for(var D={},O=t;O<i;O++){var q=e.get(O);D.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},D.textFeatureIndex=q.featureIndex;break}for(var K=l;K<p;K++){var W=e.get(K);D.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},D.verticalTextFeatureIndex=W.featureIndex;break}for(var se=d;se<v;se++){var le=e.get(se);D.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},D.iconFeatureIndex=le.featureIndex;break}for(var ye=I;ye<C;ye++){var pe=e.get(ye);D.verticalIconBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},D.verticalIconFeatureIndex=pe.featureIndex;break}return D},Pr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Pr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Pr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Pr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Pr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Pr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Pr.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},Pr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var I=this.symbolInstances.get(v);l.push(0|Math.round(t*I.anchorX+i*I.anchorY)),p.push(I.featureIndex)}return d.sort(function(C,D){return l[C]-l[D]||p[D]-p[C]}),d},Pr.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Pr.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,v,I){d>=0&&I.indexOf(d)===v&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},it("SymbolBucket",Pr,{omit:["layers","collisionBoxArray","features","compareText"]}),Pr.MAX_GLYPHS=65535,Pr.addDynamicAttributes=kg;var Bp=new Sn({"symbol-placement":new yt(H.layout_symbol["symbol-placement"]),"symbol-spacing":new yt(H.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yt(H.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new dt(H.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yt(H.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yt(H.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yt(H.layout_symbol["icon-ignore-placement"]),"icon-optional":new yt(H.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yt(H.layout_symbol["icon-rotation-alignment"]),"icon-size":new dt(H.layout_symbol["icon-size"]),"icon-text-fit":new yt(H.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yt(H.layout_symbol["icon-text-fit-padding"]),"icon-image":new dt(H.layout_symbol["icon-image"]),"icon-rotate":new dt(H.layout_symbol["icon-rotate"]),"icon-padding":new yt(H.layout_symbol["icon-padding"]),"icon-keep-upright":new yt(H.layout_symbol["icon-keep-upright"]),"icon-offset":new dt(H.layout_symbol["icon-offset"]),"icon-anchor":new dt(H.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yt(H.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yt(H.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yt(H.layout_symbol["text-rotation-alignment"]),"text-field":new dt(H.layout_symbol["text-field"]),"text-font":new dt(H.layout_symbol["text-font"]),"text-size":new dt(H.layout_symbol["text-size"]),"text-max-width":new dt(H.layout_symbol["text-max-width"]),"text-line-height":new yt(H.layout_symbol["text-line-height"]),"text-letter-spacing":new dt(H.layout_symbol["text-letter-spacing"]),"text-justify":new dt(H.layout_symbol["text-justify"]),"text-radial-offset":new dt(H.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yt(H.layout_symbol["text-variable-anchor"]),"text-anchor":new dt(H.layout_symbol["text-anchor"]),"text-max-angle":new yt(H.layout_symbol["text-max-angle"]),"text-writing-mode":new yt(H.layout_symbol["text-writing-mode"]),"text-rotate":new dt(H.layout_symbol["text-rotate"]),"text-padding":new yt(H.layout_symbol["text-padding"]),"text-keep-upright":new yt(H.layout_symbol["text-keep-upright"]),"text-transform":new dt(H.layout_symbol["text-transform"]),"text-offset":new dt(H.layout_symbol["text-offset"]),"text-allow-overlap":new yt(H.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yt(H.layout_symbol["text-ignore-placement"]),"text-optional":new yt(H.layout_symbol["text-optional"])}),Op={paint:new Sn({"icon-opacity":new dt(H.paint_symbol["icon-opacity"]),"icon-color":new dt(H.paint_symbol["icon-color"]),"icon-halo-color":new dt(H.paint_symbol["icon-halo-color"]),"icon-halo-width":new dt(H.paint_symbol["icon-halo-width"]),"icon-halo-blur":new dt(H.paint_symbol["icon-halo-blur"]),"icon-translate":new yt(H.paint_symbol["icon-translate"]),"icon-translate-anchor":new yt(H.paint_symbol["icon-translate-anchor"]),"text-opacity":new dt(H.paint_symbol["text-opacity"]),"text-color":new dt(H.paint_symbol["text-color"],{runtimeType:$e,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new dt(H.paint_symbol["text-halo-color"]),"text-halo-width":new dt(H.paint_symbol["text-halo-width"]),"text-halo-blur":new dt(H.paint_symbol["text-halo-blur"]),"text-translate":new yt(H.paint_symbol["text-translate"]),"text-translate-anchor":new yt(H.paint_symbol["text-translate-anchor"])}),layout:Bp},wh=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:at,this.defaultValue=e};wh.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},wh.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},wh.prototype.outputDefined=function(){return!1},wh.prototype.serialize=function(){return null},it("FormatSectionOverride",wh,{omit:["defaultValue"]});var Tg=function(e){function t(i){e.call(this,i,Op)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],v=0,I=p;v<I.length;v+=1){var C=I[v];d.indexOf(C)<0&&d.push(C)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var v=this.layout.get(i).evaluate(l,{},p,d),I=this._unevaluatedLayout._values[i];return I.isDataDriven()||as(I.value)||!v?v:function(C,D){return D.replace(/{([^{}]+)}/g,function(O,q){return q in C?String(C[q]):""})}(l.properties,v)},t.prototype.createBucket=function(i){return new Pr(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=Op.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,v=this.paint.get(p),I=new wh(v),C=new pu(I,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new rc("source",C):new Eo("composite",C,v.value.zoomStops,v.value._interpolationType),this.paint._values[p]=new ea(v.property,d,v.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=Op.paint.properties[l],v=!1,I=function(O){for(var q=0,K=O;q<K.length;q+=1)if(d.overrides&&d.overrides.hasOverride(K[q]))return void(v=!0)};if(p.value.kind==="constant"&&p.value.value instanceof vi)I(p.value.value.sections);else if(p.value.kind==="source"){var C=function(O){v||(O instanceof Vi&&mr(O.value)===or?I(O.value.sections):O instanceof xn?I(O.sections):O.eachChild(C))},D=p.value;D._styleExpression&&C(D._styleExpression.expression)}return v},t}(ta),Eh={paint:new Sn({"background-color":new yt(H.paint_background["background-color"]),"background-pattern":new fn(H.paint_background["background-pattern"]),"background-opacity":new yt(H.paint_background["background-opacity"])})},Ag=function(e){function t(i){e.call(this,i,Eh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ta),nl={paint:new Sn({"raster-opacity":new yt(H.paint_raster["raster-opacity"]),"raster-hue-rotate":new yt(H.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yt(H.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yt(H.paint_raster["raster-brightness-max"]),"raster-saturation":new yt(H.paint_raster["raster-saturation"]),"raster-contrast":new yt(H.paint_raster["raster-contrast"]),"raster-resampling":new yt(H.paint_raster["raster-resampling"]),"raster-fade-duration":new yt(H.paint_raster["raster-fade-duration"])})},al=function(e){function t(i){e.call(this,i,nl)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ta),wc=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(ta),zg={circle:xd,heatmap:xu,hillshade:fc,fill:_p,"fill-extrusion":hg,line:m0,symbol:Tg,background:Ag,raster:al},Sh=U.HTMLImageElement,h_=U.HTMLCanvasElement,Ay=U.HTMLVideoElement,kh=U.ImageData,Pu=U.ImageBitmap,Ec=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};Ec.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),v=this.context,I=v.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof Sh||e instanceof h_||e instanceof Ay||e instanceof kh||Pu&&e instanceof Pu?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,e):I.texImage2D(I.TEXTURE_2D,0,this.format,l,p,0,this.format,I.UNSIGNED_BYTE,e.data);else{var C=i||{x:0,y:0},D=C.x,O=C.y;e instanceof Sh||e instanceof h_||e instanceof Ay||e instanceof kh||Pu&&e instanceof Pu?I.texSubImage2D(I.TEXTURE_2D,0,D,O,I.RGBA,I.UNSIGNED_BYTE,e):I.texSubImage2D(I.TEXTURE_2D,0,D,O,l,p,I.RGBA,I.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)},Ec.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},Ec.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ec.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Sc=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Sc.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Sc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Cu=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},kr(["receive","process"],this),this.invoker=new Sc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=lr()?e:U};function zy(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}Cu.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var I=Er(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:cs(t,I)},I),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},Cu.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else lr()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},Cu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Cu.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(ma(t.error)):l(null,ma(t.data)))}else{var p=!1,d=Er(this.globalScope)?void 0:[],v=t.hasCallback?function(O,q){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:O?cs(O):null,data:cs(q,d)},d)}:function(O){p=!0},I=null,C=ma(t.data);if(this.parent[t.type])I=this.parent[t.type](t.sourceMapId,C,v);else if(this.parent.getWorkerSource){var D=t.type.split(".");I=this.parent.getWorkerSource(t.sourceMapId,D[0],C.source)[D[1]](C,v)}else v(new Error("Could not find function "+t.type));!p&&I&&I.cancel&&(this.cancelCallbacks[e]=I.cancel)}},Cu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Gi=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Gi.prototype.setNorthEast=function(e){return this._ne=e instanceof Cr?new Cr(e.lng,e.lat):Cr.convert(e),this},Gi.prototype.setSouthWest=function(e){return this._sw=e instanceof Cr?new Cr(e.lng,e.lat):Cr.convert(e),this},Gi.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof Cr)t=e,i=e;else{if(!(e instanceof Gi))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Gi.convert(e)):this.extend(Cr.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new Cr(t.lng,t.lat),this._ne=new Cr(i.lng,i.lat)),this},Gi.prototype.getCenter=function(){return new Cr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Gi.prototype.getSouthWest=function(){return this._sw},Gi.prototype.getNorthEast=function(){return this._ne},Gi.prototype.getNorthWest=function(){return new Cr(this.getWest(),this.getNorth())},Gi.prototype.getSouthEast=function(){return new Cr(this.getEast(),this.getSouth())},Gi.prototype.getWest=function(){return this._sw.lng},Gi.prototype.getSouth=function(){return this._sw.lat},Gi.prototype.getEast=function(){return this._ne.lng},Gi.prototype.getNorth=function(){return this._ne.lat},Gi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Gi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Gi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Gi.prototype.contains=function(e){var t=Cr.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},Gi.convert=function(e){return!e||e instanceof Gi?e:new Gi(e)};var Cr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Cr.prototype.wrap=function(){return new Cr(Ve(this.lng,-180,180),this.lat)},Cr.prototype.toArray=function(){return[this.lng,this.lat]},Cr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Cr.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},Cr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Gi(new Cr(this.lng-i,this.lat-t),new Cr(this.lng+i,this.lat+t))},Cr.convert=function(e){if(e instanceof Cr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Cr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Cr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Py=2*Math.PI*63710088e-1;function Cy(e){return Py*Math.cos(e*Math.PI/180)}function Dy(e){return(180+e)/360}function Gl(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Ss(e,t){return e/Cy(t)}function Kl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var kc=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};kc.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Cr.convert(e);return new kc(Dy(i.lng),Gl(i.lat),Ss(t,i.lat))},kc.prototype.toLngLat=function(){return new Cr(360*this.x-180,Kl(this.y))},kc.prototype.toAltitude=function(){return this.z*Cy(Kl(this.y))},kc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Py*(e=Kl(this.y),1/Math.cos(e*Math.PI/180));var e};var ks=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Hl(0,e,e,t,i)};ks.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},ks.prototype.url=function(e,t){var i,l,p,d,v,I=(l=this.y,p=this.z,d=zy(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),v=zy(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+v[0]+","+v[1]),C=function(D,O,q){for(var K,W="",se=D;se>0;se--)W+=(O&(K=1<<se-1)?1:0)+(q&K?2:0);return W}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",I)},ks.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new V(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},ks.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var p_=function(e,t){this.wrap=e,this.canonical=t,this.key=Hl(e,t.z,t.z,t.x,t.y)},Ki=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new ks(i,+l,+p),this.key=Hl(t,e,i,l,p)};function Hl(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}Ki.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Ki.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Ki(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ki(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Ki.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?Hl(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Hl(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Ki.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Ki.prototype.children=function(e){if(this.overscaledZ>=e)return[new Ki(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new Ki(t,this.wrap,t,i,l),new Ki(t,this.wrap,t,i+1,l),new Ki(t,this.wrap,t,i,l+1),new Ki(t,this.wrap,t,i+1,l+1)]},Ki.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Ki.prototype.wrapped=function(){return new Ki(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ki.prototype.unwrapTo=function(e){return new Ki(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Ki.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ki.prototype.toUnwrapped=function(){return new p_(this.wrap,this.canonical)},Ki.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ki.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new kc(e.x-this.wrap,e.y))},it("CanonicalTileID",ks),it("OverscaledTileID",Ki,{omit:["posMatrix"]});var uo=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Vt('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};uo.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},uo.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},uo.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},uo.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},uo.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},uo.prototype.getPixels=function(){return new ga({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},uo.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var I=-t*this.dim,C=-i*this.dim,D=d;D<v;D++)for(var O=l;O<p;O++)this.data[this._idx(O,D)]=e.data[this._idx(O+I,D+C)]},it("DEMData",uo);var Mf=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Mf.prototype.encode=function(e){return this._stringToNumber[e]},Mf.prototype.decode=function(e){return this._numberToString[e]};var Du=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Vp={geometry:{configurable:!0}};Vp.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Vp.geometry.set=function(e){this._geometry=e},Du.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Du.prototype,Vp);var Ih=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ih.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},Ue(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][v]===null&&delete this.deletedStates[e][l][v]},Ih.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},Ih.prototype.getState=function(e,t){var i=String(t),l=Ue({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},Ih.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Ih.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),Ue(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var I={};if(this.deletedStates[v]===null)for(var C in this.state[v])I[C]={},this.state[v][C]={};else for(var D in this.deletedStates[v]){if(this.deletedStates[v][D]===null)this.state[v][D]={};else for(var O=0,q=Object.keys(this.deletedStates[v][D]);O<q.length;O+=1)delete this.state[v][D][q[O]];I[D]=this.state[v][D]}i[v]=i[v]||{},Ue(i[v],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var K in e)e[K].setFeatureState(i,t)};var Xl=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new us(8192,16,0),this.grid3D=new us(8192,16,0),this.featureIndexArray=new Z,this.promoteId=t};function Ic(e,t,i,l,p){return ar(e,function(d,v){var I=t instanceof uc?t.get(v):null;return I&&I.evaluate?I.evaluate(i,l,p):I})}function My(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,v=e;d<v.length;d+=1){var I=v[d];t=Math.min(t,I.x),i=Math.min(i,I.y),l=Math.max(l,I.x),p=Math.max(p,I.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function ol(e,t){return t-e}Xl.prototype.insert=function(e,t,i,l,p,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var I=d?this.grid3D:this.grid,C=0;C<t.length;C++){for(var D=t[C],O=[1/0,1/0,-1/0,-1/0],q=0;q<D.length;q++){var K=D[q];O[0]=Math.min(O[0],K.x),O[1]=Math.min(O[1],K.y),O[2]=Math.max(O[2],K.x),O[3]=Math.max(O[3],K.y)}O[0]<8192&&O[1]<8192&&O[2]>=0&&O[3]>=0&&I.insert(v,O[0],O[1],O[2],O[3])}},Xl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new lo.VectorTile(new Tf(this.rawTileData)).layers,this.sourceLayerCoder=new Mf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Xl.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,I=Us(d.filter),C=e.queryGeometry,D=e.queryPadding*v,O=My(C),q=this.grid.query(O.minX-D,O.minY-D,O.maxX+D,O.maxY+D),K=My(e.cameraQueryGeometry),W=this.grid3D.query(K.minX-D,K.minY-D,K.maxX+D,K.maxY+D,function(De,Me,Fe,Ke){return function(Ye,gt,st,_t,lt){for(var Yt=0,wt=Ye;Yt<wt.length;Yt+=1){var ct=wt[Yt];if(gt<=ct.x&&st<=ct.y&&_t>=ct.x&&lt>=ct.y)return!0}var Ft=[new V(gt,st),new V(gt,lt),new V(_t,lt),new V(_t,st)];if(Ye.length>2){for(var Bt=0,sr=Ft;Bt<sr.length;Bt+=1)if(Co(Ye,sr[Bt]))return!0}for(var bt=0;bt<Ye.length-1;bt++)if(vs(Ye[bt],Ye[bt+1],Ft))return!0;return!1}(e.cameraQueryGeometry,De-D,Me-D,Fe+D,Ke+D)}),se=0,le=W;se<le.length;se+=1)q.push(le[se]);q.sort(ol);for(var ye,pe={},Ee=function(De){var Me=q[De];if(Me!==ye){ye=Me;var Fe=p.featureIndexArray.get(Me),Ke=null;p.loadMatchingFeature(pe,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,I,d.layers,d.availableImages,t,i,l,function(Ye,gt,st){return Ke||(Ke=Yr(Ye)),gt.queryIntersectsFeature(C,Ye,st,Ke,p.z,e.transform,v,e.pixelPosMatrix)})}},Ae=0;Ae<q.length;Ae++)Ee(Ae);return pe},Xl.prototype.loadMatchingFeature=function(e,t,i,l,p,d,v,I,C,D,O){var q=this.bucketLayerIDs[t];if(!d||function(Ye,gt){for(var st=0;st<Ye.length;st++)if(gt.indexOf(Ye[st])>=0)return!0;return!1}(d,q)){var K=this.sourceLayerCoder.decode(i),W=this.vtLayers[K].feature(l);if(p.needGeometry){var se=ki(W,!0);if(!p.filter(new Wt(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!p.filter(new Wt(this.tileID.overscaledZ),W))return;for(var le=this.getId(W,K),ye=0;ye<q.length;ye++){var pe=q[ye];if(!(d&&d.indexOf(pe)<0)){var Ee=I[pe];if(Ee){var Ae={};le!==void 0&&D&&(Ae=D.getState(Ee.sourceLayer||"_geojsonTileLayer",le));var De=Ue({},C[pe]);De.paint=Ic(De.paint,Ee.paint,W,Ae,v),De.layout=Ic(De.layout,Ee.layout,W,Ae,v);var Me=!O||O(W,Ee,Ae);if(Me){var Fe=new Du(W,this.z,this.x,this.y,le);Fe.layer=De;var Ke=e[pe];Ke===void 0&&(Ke=e[pe]=[]),Ke.push({featureIndex:l,feature:Fe,intersectionZ:Me})}}}}}},Xl.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,v,I){var C={};this.loadVTLayers();for(var D=Us(p),O=0,q=e;O<q.length;O+=1)this.loadMatchingFeature(C,i,l,q[O],D,d,v,I,t);return C},Xl.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},Xl.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},it("FeatureIndex",Xl,{omit:["rawTileData","sourceLayerCoder"]});var Jr=function(e,t){this.tileID=e,this.uid=Mt(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Jr.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Sa.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Jr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Jr.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(D,O){var q={};if(!O)return q;for(var K=function(){var le=se[W],ye=le.layerIds.map(function(Ae){return O.getLayer(Ae)}).filter(Boolean);if(ye.length!==0){le.layers=ye,le.stateDependentLayerIds&&(le.stateDependentLayers=le.stateDependentLayerIds.map(function(Ae){return ye.filter(function(De){return De.id===Ae})[0]}));for(var pe=0,Ee=ye;pe<Ee.length;pe+=1)q[Ee[pe].id]=le}},W=0,se=D;W<se.length;W+=1)K();return q}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof Pr){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof Pr&&v.hasRTLText){this.hasRTLText=!0,Ln.isLoading()||Ln.isLoaded()||_d()!=="deferred"||io();break}}for(var I in this.queryPadding=0,this.buckets){var C=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(I).queryRadius(C))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Jr.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Jr.prototype.getBucket=function(e){return this.buckets[e.id]},Jr.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ec(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ec(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},Jr.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Jr.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,v,I,C,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:D,transform:I,params:v,queryPadding:this.queryPadding*C},e,t,i):{}},Jr.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var v=Us(t&&t.filter),I=this.tileID.canonical,C=I.z,D=I.x,O=I.y,q={z:C,x:D,y:O},K=0;K<d.length;K++){var W=d.feature(K);if(v.needGeometry){var se=ki(W,!0);if(!v.filter(new Wt(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!v.filter(new Wt(this.tileID.overscaledZ),W))continue;var le=i.getId(W,p),ye=new Du(W,C,D,O,le);ye.tile=q,e.push(ye)}}},Jr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Jr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Jr.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=ri(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Jr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Jr.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],I=e[d];if(v&&I&&Object.keys(I).length!==0){p.update(I,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=t&&t.style&&t.style.getLayer(l);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(p)))}}}},Jr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Jr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Sa.now()},Jr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Jr.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Sa.now()+e},Jr.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},Jr.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,v=t;d<v.length;d+=1)if(p[v[d]])return!0}}return!1};var Ga=U.performance,Ly=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Ga.mark(this._marks.start)};Ly.prototype.finish=function(){Ga.mark(this._marks.end);var e=Ga.getEntriesByName(this._marks.measure);return e.length===0&&(Ga.measure(this._marks.measure,this._marks.start,this._marks.end),e=Ga.getEntriesByName(this._marks.measure),Ga.clearMarks(this._marks.start),Ga.clearMarks(this._marks.end),Ga.clearMeasures(this._marks.measure)),e},o.Actor=Cu,o.AlphaImage=pc,o.CanonicalTileID=ks,o.CollisionBoxArray=s,o.Color=ir,o.DEMData=uo,o.DataConstantProperty=yt,o.DictionaryCoder=Mf,o.EXTENT=8192,o.ErrorEvent=ve,o.EvaluationParameters=Wt,o.Event=ue,o.Evented=xe,o.FeatureIndex=Xl,o.FillBucket=bs,o.FillExtrusionBucket=xs,o.ImageAtlas=$s,o.ImagePosition=Af,o.LineBucket=bi,o.LngLat=Cr,o.LngLatBounds=Gi,o.MercatorCoordinate=kc,o.ONE_EM=24,o.OverscaledTileID=Ki,o.Point=V,o.Point$1=V,o.Properties=Sn,o.Protobuf=Tf,o.RGBAImage=ga,o.RequestManager=Bi,o.RequestPerformance=Ly,o.ResourceType=ml,o.SegmentVector=Q,o.SourceFeatureState=Ih,o.StructArrayLayout1ui2=zo,o.StructArrayLayout2f1f2i16=oo,o.StructArrayLayout2i4=To,o.StructArrayLayout3ui6=Zs,o.StructArrayLayout4i8=fp,o.SymbolBucket=Pr,o.Texture=Ec,o.Tile=Jr,o.Transitionable=en,o.Uniform1f=He,o.Uniform1i=je,o.Uniform2f=Xe,o.Uniform3f=ut,o.Uniform4f=St,o.UniformColor=xt,o.UniformMatrix4f=ur,o.UnwrappedTileID=p_,o.ValidationError=oe,o.WritingMode=an,o.ZoomHistory=zl,o.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},o.addDynamicAttributes=kg,o.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(v,I){t(v,function(C,D){C&&(d=C),p[I]=D,--l==0&&i(d,p)})})},o.bezier=he,o.bindAll=kr,o.browser=Sa,o.cacheEntryPossiblyAdded=function(e){++po>Qo&&(e.getActor().send("enforceCacheSizeLimit",La),po=0)},o.clamp=we,o.clearTileCache=function(e){var t=U.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},o.clipLine=ql,o.clone=function(e){var t=new nr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.clone$1=At,o.clone$2=function(e){var t=new nr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.collisionCircleLayout=Sp,o.config=gr,o.create=function(){var e=new nr(16);return nr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},o.create$1=function(){var e=new nr(9);return nr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},o.create$2=function(){var e=new nr(4);return nr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},o.createCommonjsModule=z,o.createExpression=mf,o.createLayout=tn,o.createStyleLayer=function(e){return e.type==="custom"?new wc(e):new zg[e.type](e)},o.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=i[0],I=i[1],C=i[2];return e[0]=p*C-d*I,e[1]=d*v-l*C,e[2]=l*I-p*v,e},o.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.ease=Ie,o.emitValidationErrors=Al,o.endsWith=xr,o.enforceCacheSizeLimit=function(e){pi(),yi&&yi.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},o.evaluateSizeForFeature=gh,o.evaluateSizeForZoom=_h,o.evaluateVariableOffset=Iy,o.evented=Pl,o.extend=Ue,o.featureFilter=Us,o.filterObject=It,o.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.getAnchorAlignment=Ul,o.getAnchorJustification=Au,o.getArrayBuffer=ca,o.getImage=G,o.getJSON=function(e,t){return Jn(Ue(e,{type:"json"}),t)},o.getRTLTextPluginStatus=_d,o.getReferrer=Nn,o.getVideo=function(e,t){var i,l,p=U.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var v=U.document.createElement("source");i=e[d],l=void 0,(l=U.document.createElement("a")).href=i,(l.protocol!==U.document.location.protocol||l.host!==U.document.location.host)&&(p.crossOrigin="Anonymous"),v.src=e[d],p.appendChild(v)}return{cancel:function(){}}},o.identity=Ci,o.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],v=t[4],I=t[5],C=t[6],D=t[7],O=t[8],q=t[9],K=t[10],W=t[11],se=t[12],le=t[13],ye=t[14],pe=t[15],Ee=i*I-l*v,Ae=i*C-p*v,De=i*D-d*v,Me=l*C-p*I,Fe=l*D-d*I,Ke=p*D-d*C,Ye=O*le-q*se,gt=O*ye-K*se,st=O*pe-W*se,_t=q*ye-K*le,lt=q*pe-W*le,Yt=K*pe-W*ye,wt=Ee*Yt-Ae*lt+De*_t+Me*st-Fe*gt+Ke*Ye;return wt?(e[0]=(I*Yt-C*lt+D*_t)*(wt=1/wt),e[1]=(p*lt-l*Yt-d*_t)*wt,e[2]=(le*Ke-ye*Fe+pe*Me)*wt,e[3]=(K*Fe-q*Ke-W*Me)*wt,e[4]=(C*st-v*Yt-D*gt)*wt,e[5]=(i*Yt-p*st+d*gt)*wt,e[6]=(ye*De-se*Ke-pe*Ae)*wt,e[7]=(O*Ke-K*De+W*Ae)*wt,e[8]=(v*lt-I*st+D*Ye)*wt,e[9]=(l*st-i*lt-d*Ye)*wt,e[10]=(se*Fe-le*De+pe*Ee)*wt,e[11]=(q*De-O*Fe-W*Ee)*wt,e[12]=(I*gt-v*_t-C*Ye)*wt,e[13]=(i*_t-l*gt+p*Ye)*wt,e[14]=(le*Ae-se*Me-ye*Ee)*wt,e[15]=(O*Me-q*Ae+K*Ee)*wt,e):null},o.isChar=Je,o.isMapboxURL=hi,o.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},o.makeRequest=Jn,o.mapObject=ar,o.mercatorXfromLng=Dy,o.mercatorYfromLat=Gl,o.mercatorZfromAltitude=Ss,o.mul=hc,o.multiply=ji,o.mvt=lo,o.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},o.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},o.number=Pi,o.offscreenCanvasSupported=la,o.ortho=function(e,t,i,l,p,d,v){var I=1/(t-i),C=1/(l-p),D=1/(d-v);return e[0]=-2*I,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*C,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*D,e[11]=0,e[12]=(t+i)*I,e[13]=(p+l)*C,e[14]=(v+d)*D,e[15]=1,e},o.parseGlyphPBF=function(e){return new Tf(e).readFields(mh,[])},o.pbf=Tf,o.performSymbolLayout=function(e,t,i,l,p,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var I=e.layers[0].layout,C=e.layers[0]._unevaluatedLayout._values,D={};if(e.textSizeData.kind==="composite"){var O=e.textSizeData,q=O.maxZoom;D.compositeTextSizes=[C["text-size"].possiblyEvaluate(new Wt(O.minZoom),v),C["text-size"].possiblyEvaluate(new Wt(q),v)]}if(e.iconSizeData.kind==="composite"){var K=e.iconSizeData,W=K.maxZoom;D.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new Wt(K.minZoom),v),C["icon-size"].possiblyEvaluate(new Wt(W),v)]}D.layoutTextSize=C["text-size"].possiblyEvaluate(new Wt(e.zoom+1),v),D.layoutIconSize=C["icon-size"].possiblyEvaluate(new Wt(e.zoom+1),v),D.textMaxSize=C["text-size"].possiblyEvaluate(new Wt(18));for(var se=24*I.get("text-line-height"),le=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",ye=I.get("text-keep-upright"),pe=I.get("text-size"),Ee=function(){var Me=De[Ae],Fe=I.get("text-font").evaluate(Me,{},v).join(","),Ke=pe.evaluate(Me,{},v),Ye=D.layoutTextSize.evaluate(Me,{},v),gt=D.layoutIconSize.evaluate(Me,{},v),st={horizontal:{},vertical:void 0},_t=Me.text,lt=[0,0];if(_t){var Yt=_t.toString(),wt=24*I.get("text-letter-spacing").evaluate(Me,{},v),ct=function(Xt){for(var Rr=0,yr=Xt;Rr<yr.length;Rr+=1)if(vr=yr[Rr].charCodeAt(0),Je.Arabic(vr)||Je["Arabic Supplement"](vr)||Je["Arabic Extended-A"](vr)||Je["Arabic Presentation Forms-A"](vr)||Je["Arabic Presentation Forms-B"](vr))return!1;var vr;return!0}(Yt)?wt:0,Ft=I.get("text-anchor").evaluate(Me,{},v),Bt=I.get("text-variable-anchor");if(!Bt){var sr=I.get("text-radial-offset").evaluate(Me,{},v);lt=sr?Iy(Ft,[24*sr,Pd]):I.get("text-offset").evaluate(Me,{},v).map(function(Xt){return 24*Xt})}var bt=le?"center":I.get("text-justify").evaluate(Me,{},v),wr=I.get("symbol-placement"),ni=wr==="point"?24*I.get("text-max-width").evaluate(Me,{},v):0,Qr=function(){e.allowVerticalPlacement&&pp(Yt)&&(st.vertical=Mp(_t,t,i,p,Fe,ni,se,Ft,"left",ct,lt,an.vertical,!0,wr,Ye,Ke))};if(!le&&Bt){for(var Gr=bt==="auto"?Bt.map(function(Xt){return Au(Xt)}):[bt],ai=!1,$r=0;$r<Gr.length;$r++){var Di=Gr[$r];if(!st.horizontal[Di])if(ai)st.horizontal[Di]=st.horizontal[0];else{var on=Mp(_t,t,i,p,Fe,ni,se,"center",Di,ct,lt,an.horizontal,!1,wr,Ye,Ke);on&&(st.horizontal[Di]=on,ai=on.positionedLines.length===1)}}Qr()}else{bt==="auto"&&(bt=Au(Ft));var Kn=Mp(_t,t,i,p,Fe,ni,se,Ft,bt,ct,lt,an.horizontal,!1,wr,Ye,Ke);Kn&&(st.horizontal[bt]=Kn),Qr(),pp(Yt)&&le&&ye&&(st.vertical=Mp(_t,t,i,p,Fe,ni,se,Ft,bt,ct,lt,an.vertical,!1,wr,Ye,Ke))}}var xi=void 0,Hn=!1;if(Me.icon&&Me.icon.name){var Ur=l[Me.icon.name];Ur&&(xi=function(Xt,Rr,yr){var vr=Ul(yr),na=Rr[0]-Xt.displaySize[0]*vr.horizontalAlign,Hi=Rr[1]-Xt.displaySize[1]*vr.verticalAlign;return{image:Xt,top:Hi,bottom:Hi+Xt.displaySize[1],left:na,right:na+Xt.displaySize[0]}}(p[Me.icon.name],I.get("icon-offset").evaluate(Me,{},v),I.get("icon-anchor").evaluate(Me,{},v)),Hn=Ur.sdf,e.sdfIcons===void 0?e.sdfIcons=Ur.sdf:e.sdfIcons!==Ur.sdf&&Vt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ur.pixelRatio!==e.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var ei=jl(st.horizontal)||st.vertical;e.iconsInText=!!ei&&ei.iconsInText,(ei||xi)&&function(Xt,Rr,yr,vr,na,Hi,Dr,Mi,Xi,cr,sl){var Ka=Hi.textMaxSize.evaluate(Rr,{});Ka===void 0&&(Ka=Dr);var Aa,Ii=Xt.layers[0].layout,Bo=Ii.get("icon-offset").evaluate(Rr,{},sl),Is=jl(yr.horizontal),Th=Dr/24,Oo=Xt.tilePixelRatio*Th,ll=Xt.tilePixelRatio*Ka/24,aa=Xt.tilePixelRatio*Mi,Wl=Xt.tilePixelRatio*Ii.get("symbol-spacing"),Lf=Ii.get("text-padding")*Xt.tilePixelRatio,Ah=Ii.get("icon-padding")*Xt.tilePixelRatio,ul=Ii.get("text-max-angle")/180*Math.PI,Vo=Ii.get("text-rotation-alignment")==="map"&&Ii.get("symbol-placement")!=="point",Rf=Ii.get("icon-rotation-alignment")==="map"&&Ii.get("symbol-placement")!=="point",Ts=Ii.get("symbol-placement"),zh=Wl/2,Ph=Ii.get("icon-text-fit");vr&&Ph!=="none"&&(Xt.allowVerticalPlacement&&yr.vertical&&(Aa=vh(vr,yr.vertical,Ph,Ii.get("icon-text-fit-padding"),Bo,Th)),Is&&(vr=vh(vr,Is,Ph,Ii.get("icon-text-fit-padding"),Bo,Th)));var As=function(f_,jp){jp.x<0||jp.x>=8192||jp.y<0||jp.y>=8192||function(ti,za,$l,Ps,Dd,Oy,eu,Xn,Vf,Tc,Zp,Ff,Lh,Vy,Gp,No,tu,Cs,Ru,Fy,Wn,Ny,Uy,Wa,Kp){var qy,Ds,Bu,Rh,Bh,Ms=ti.addToLineVertexArray(za,$l),jy=0,Nf=0,Zy=0,Uf=0,Gy=-1,Md=-1,Ya={},Oh=ne(""),Ls=0,Vh=0;if(Xn._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ls=(qy=Xn.layout.get("text-offset").evaluate(Wn,{},Wa).map(function(Xp){return 24*Xp}))[0],Vh=qy[1]):(Ls=24*Xn.layout.get("text-radial-offset").evaluate(Wn,{},Wa),Vh=Pd),ti.allowVerticalPlacement&&Ps.vertical){var Ky=Xn.layout.get("text-rotate").evaluate(Wn,{},Wa)+90;Rh=new Df(Vf,za,Tc,Zp,Ff,Ps.vertical,Lh,Vy,Gp,Ky),eu&&(Bh=new Df(Vf,za,Tc,Zp,Ff,eu,tu,Cs,Gp,Ky))}if(Dd){var Ld=Xn.layout.get("icon-rotate").evaluate(Wn,{}),Ac=Xn.layout.get("icon-text-fit")!=="none",hl=Es(Dd,Ld,Uy,Ac),Rd=eu?Es(eu,Ld,Uy,Ac):void 0;Bu=new Df(Vf,za,Tc,Zp,Ff,Dd,tu,Cs,!1,Ld),jy=4*hl.length;var qf=ti.iconSizeData,Fh=null;qf.kind==="source"?(Fh=[128*Xn.layout.get("icon-size").evaluate(Wn,{})])[0]>32640&&Vt(ti.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):qf.kind==="composite"&&((Fh=[128*Ny.compositeIconSizes[0].evaluate(Wn,{},Wa),128*Ny.compositeIconSizes[1].evaluate(Wn,{},Wa)])[0]>32640||Fh[1]>32640)&&Vt(ti.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ti.addSymbols(ti.icon,hl,Fh,Fy,Ru,Wn,!1,za,Ms.lineStartIndex,Ms.lineLength,-1,Wa),Gy=ti.icon.placedSymbolArray.length-1,Rd&&(Nf=4*Rd.length,ti.addSymbols(ti.icon,Rd,Fh,Fy,Ru,Wn,an.vertical,za,Ms.lineStartIndex,Ms.lineLength,-1,Wa),Md=ti.icon.placedSymbolArray.length-1)}for(var Hy in Ps.horizontal){var zc=Ps.horizontal[Hy];if(!Ds){Oh=ne(zc.text);var Pg=Xn.layout.get("text-rotate").evaluate(Wn,{},Wa);Ds=new Df(Vf,za,Tc,Zp,Ff,zc,Lh,Vy,Gp,Pg)}var Xy=zc.positionedLines.length===1;if(Zy+=Ty(ti,za,zc,Oy,Xn,Gp,Wn,No,Ms,Ps.vertical?an.horizontal:an.horizontalOnly,Xy?Object.keys(Ps.horizontal):[Hy],Ya,Gy,Ny,Wa),Xy)break}Ps.vertical&&(Uf+=Ty(ti,za,Ps.vertical,Oy,Xn,Gp,Wn,No,Ms,an.vertical,["vertical"],Ya,Md,Ny,Wa));var Pa=Ds?Ds.boxStartIndex:ti.collisionBoxArray.length,Ou=Ds?Ds.boxEndIndex:ti.collisionBoxArray.length,pl=Rh?Rh.boxStartIndex:ti.collisionBoxArray.length,Pc=Rh?Rh.boxEndIndex:ti.collisionBoxArray.length,Cg=Bu?Bu.boxStartIndex:ti.collisionBoxArray.length,Hp=Bu?Bu.boxEndIndex:ti.collisionBoxArray.length,v0=Bh?Bh.boxStartIndex:ti.collisionBoxArray.length,Dg=Bh?Bh.boxEndIndex:ti.collisionBoxArray.length,Ja=-1,Li=function(Xp,Yy){return Xp&&Xp.circleDiameter?Math.max(Xp.circleDiameter,Yy):Yy};Ja=Li(Ds,Ja),Ja=Li(Rh,Ja),Ja=Li(Bu,Ja);var Wy=(Ja=Li(Bh,Ja))>-1?1:0;Wy&&(Ja*=Kp/24),ti.glyphOffsetArray.length>=Pr.MAX_GLYPHS&&Vt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Wn.sortKey!==void 0&&ti.addToSortKeyRanges(ti.symbolInstances.length,Wn.sortKey),ti.symbolInstances.emplaceBack(za.x,za.y,Ya.right>=0?Ya.right:-1,Ya.center>=0?Ya.center:-1,Ya.left>=0?Ya.left:-1,Ya.vertical||-1,Gy,Md,Oh,Pa,Ou,pl,Pc,Cg,Hp,v0,Dg,Tc,Zy,Uf,jy,Nf,Wy,0,Lh,Ls,Vh,Ja)}(Xt,jp,f_,yr,vr,na,Aa,Xt.layers[0],Xt.collisionBoxArray,Rr.index,Rr.sourceLayerIndex,Xt.index,Oo,Lf,Vo,Xi,aa,Ah,Rf,Bo,Rr,Hi,cr,sl,Dr)};if(Ts==="line")for(var Ch=0,Bf=ql(Rr.geometry,0,0,8192,8192);Ch<Bf.length;Ch+=1)for(var Ha=Bf[Ch],Fo=0,Xa=wg(Ha,Wl,ul,yr.vertical||Is,vr,24,ll,Xt.overscaling,8192);Fo<Xa.length;Fo+=1){var zs=Xa[Fo];Is&&rl(Xt,Is.text,zh,zs)||As(Ha,zs)}else if(Ts==="line-center")for(var Fp=0,Yl=Rr.geometry;Fp<Yl.length;Fp+=1){var Cd=Yl[Fp];if(Cd.length>1){var Of=xh(Cd,ul,yr.vertical||Is,vr,24,ll);Of&&As(Cd,Of)}}else if(Rr.type==="Polygon")for(var cl=0,Mu=Js(Rr.geometry,0);cl<Mu.length;cl+=1){var Dh=Mu[cl],Jl=Eg(Dh,16);As(Dh[0],new Pf(Jl.x,Jl.y,0))}else if(Rr.type==="LineString")for(var Ql=0,Np=Rr.geometry;Ql<Np.length;Ql+=1){var Mh=Np[Ql];As(Mh,new Pf(Mh[0].x,Mh[0].y,0))}else if(Rr.type==="Point")for(var Lu=0,Ry=Rr.geometry;Lu<Ry.length;Lu+=1)for(var Up=0,By=Ry[Lu];Up<By.length;Up+=1){var qp=By[Up];As([qp],new Pf(qp.x,qp.y,0))}}(e,Me,st,xi,l,D,Ye,gt,lt,Hn,v)},Ae=0,De=e.features;Ae<De.length;Ae+=1)Ee();d&&e.generateCollisionDebugBuffers()},o.perspective=function(e,t,i,l,p){var d,v=1/Math.tan(t/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},o.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},o.plugin=Ln,o.polygonIntersectsPolygon=ra,o.postMapLoadEvent=Fn,o.postTurnstileEvent=Fr,o.potpack=Cp,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=it,o.registerForPluginStateChange=function(e){return e({pluginStatus:qi,pluginURL:En}),Pl.on("pluginStateChange",e),e},o.renderColorRamp=py,o.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],v=t[3],I=Math.sin(i),C=Math.cos(i);return e[0]=l*C+d*I,e[1]=p*C+v*I,e[2]=l*-I+d*C,e[3]=p*-I+v*C,e},o.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],v=t[5],I=t[6],C=t[7],D=t[8],O=t[9],q=t[10],K=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+D*l,e[5]=v*p+O*l,e[6]=I*p+q*l,e[7]=C*p+K*l,e[8]=D*p-d*l,e[9]=O*p-v*l,e[10]=q*p-I*l,e[11]=K*p-C*l,e},o.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],v=t[1],I=t[2],C=t[3],D=t[4],O=t[5],q=t[6],K=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+D*l,e[1]=v*p+O*l,e[2]=I*p+q*l,e[3]=C*p+K*l,e[4]=D*p-d*l,e[5]=O*p-v*l,e[6]=q*p-I*l,e[7]=K*p-C*l,e},o.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},o.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},o.setCacheLimits=function(e,t){La=e,Qo=t},o.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),qi==="deferred"||qi==="loading"||qi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");En=Sa.resolveURL(e),qi="deferred",nh=t,lc(),i||io()},o.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},o.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},o.styleSpec=H,o.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},o.symbolSize=xg,o.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},o.transformMat4=xf,o.translate=function(e,t,i){var l,p,d,v,I,C,D,O,q,K,W,se,le=i[0],ye=i[1],pe=i[2];return t===e?(e[12]=t[0]*le+t[4]*ye+t[8]*pe+t[12],e[13]=t[1]*le+t[5]*ye+t[9]*pe+t[13],e[14]=t[2]*le+t[6]*ye+t[10]*pe+t[14],e[15]=t[3]*le+t[7]*ye+t[11]*pe+t[15]):(p=t[1],d=t[2],v=t[3],I=t[4],C=t[5],D=t[6],O=t[7],q=t[8],K=t[9],W=t[10],se=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=v,e[4]=I,e[5]=C,e[6]=D,e[7]=O,e[8]=q,e[9]=K,e[10]=W,e[11]=se,e[12]=l*le+I*ye+q*pe+t[12],e[13]=p*le+C*ye+K*pe+t[13],e[14]=d*le+D*ye+W*pe+t[14],e[15]=v*le+O*ye+se*pe+t[15]),e},o.triggerPluginCompletionEvent=ps,o.uniqueId=Mt,o.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},o.validateLight=oc,o.validateStyle=ss,o.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},o.vectorTile=lo,o.version="1.13.2",o.warnOnce=Vt,o.webpSupported=Vn,o.window=U,o.wrap=Ve}),_(["./shared"],function(o){function z(N){var G=typeof N;if(G==="number"||G==="boolean"||G==="string"||N==null)return JSON.stringify(N);if(Array.isArray(N)){for(var X="[",re=0,ue=N;re<ue.length;re+=1)X+=z(ue[re])+",";return X+"]"}for(var ve=Object.keys(N).sort(),xe="{",H=0;H<ve.length;H++)xe+=JSON.stringify(ve[H])+":"+z(N[ve[H]])+",";return xe+"}"}function P(N){for(var G="",X=0,re=o.refProperties;X<re.length;X+=1)G+="/"+z(N[re[X]]);return G}var F=function(N){this.keyCache={},N&&this.replace(N)};F.prototype.replace=function(N){this._layerConfigs={},this._layers={},this.update(N,[])},F.prototype.update=function(N,G){for(var X=this,re=0,ue=N;re<ue.length;re+=1){var ve=ue[re];this._layerConfigs[ve.id]=ve;var xe=this._layers[ve.id]=o.createStyleLayer(ve);xe._featureFilter=o.featureFilter(xe.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(var H=0,oe=G;H<oe.length;H+=1){var Se=oe[H];delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se]}this.familiesBySource={};for(var Ne=0,Ge=function(We,$e){for(var Nt={},Ze=0;Ze<We.length;Ze++){var Gt=$e&&$e[We[Ze].id]||P(We[Ze]);$e&&($e[We[Ze].id]=Gt);var or=Nt[Gt];or||(or=Nt[Gt]=[]),or.push(We[Ze])}var Ct=[];for(var tr in Nt)Ct.push(Nt[tr]);return Ct}(o.values(this._layerConfigs),this.keyCache);Ne<Ge.length;Ne+=1){var Le=Ge[Ne].map(function(We){return X._layers[We.id]}),qe=Le[0];if(qe.visibility!=="none"){var ht=qe.source||"",at=this.familiesBySource[ht];at||(at=this.familiesBySource[ht]={});var Re=qe.sourceLayer||"_geojsonTileLayer",tt=at[Re];tt||(tt=at[Re]=[]),tt.push(Le)}}};var V=function(N){var G={},X=[];for(var re in N){var ue=N[re],ve=G[re]={};for(var xe in ue){var H=ue[+xe];if(H&&H.bitmap.width!==0&&H.bitmap.height!==0){var oe={x:0,y:0,w:H.bitmap.width+2,h:H.bitmap.height+2};X.push(oe),ve[xe]={rect:oe,metrics:H.metrics}}}}var Se=o.potpack(X),Ne=new o.AlphaImage({width:Se.w||1,height:Se.h||1});for(var Ge in N){var Le=N[Ge];for(var qe in Le){var ht=Le[+qe];if(ht&&ht.bitmap.width!==0&&ht.bitmap.height!==0){var at=G[Ge][qe].rect;o.AlphaImage.copy(ht.bitmap,Ne,{x:0,y:0},{x:at.x+1,y:at.y+1},ht.bitmap)}}}this.image=Ne,this.positions=G};o.register("GlyphAtlas",V);var j=function(N){this.tileID=new o.OverscaledTileID(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId};function U(N,G,X){for(var re=new o.EvaluationParameters(G),ue=0,ve=N;ue<ve.length;ue+=1)ve[ue].recalculate(re,X)}function fe(N,G){var X=o.getArrayBuffer(N.request,function(re,ue,ve,xe){re?G(re):ue&&G(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(ue)),rawData:ue,cacheControl:ve,expires:xe})});return function(){X.cancel(),G()}}j.prototype.parse=function(N,G,X,re,ue){var ve=this;this.status="parsing",this.data=N,this.collisionBoxArray=new o.CollisionBoxArray;var xe=new o.DictionaryCoder(Object.keys(N.layers).sort()),H=new o.FeatureIndex(this.tileID,this.promoteId);H.bucketLayerIDs=[];var oe,Se,Ne,Ge,Le={},qe={featureIndex:H,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},ht=G.familiesBySource[this.source];for(var at in ht){var Re=N.layers[at];if(Re){Re.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+at+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var tt=xe.encode(at),We=[],$e=0;$e<Re.length;$e++){var Nt=Re.feature($e),Ze=H.getId(Nt,at);We.push({feature:Nt,id:Ze,index:$e,sourceLayerIndex:tt})}for(var Gt=0,or=ht[at];Gt<or.length;Gt+=1){var Ct=or[Gt],tr=Ct[0];tr.minzoom&&this.zoom<Math.floor(tr.minzoom)||tr.maxzoom&&this.zoom>=tr.maxzoom||tr.visibility!=="none"&&(U(Ct,this.zoom,X),(Le[tr.id]=tr.createBucket({index:H.bucketLayerIDs.length,layers:Ct,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:tt,sourceID:this.source})).populate(We,qe,this.tileID.canonical),H.bucketLayerIDs.push(Ct.map(function(pr){return pr.id})))}}}var er=o.mapObject(qe.glyphDependencies,function(pr){return Object.keys(pr).map(Number)});Object.keys(er).length?re.send("getGlyphs",{uid:this.uid,stacks:er},function(pr,Kt){oe||(oe=pr,Se=Kt,dr.call(ve))}):Se={};var Ai=Object.keys(qe.iconDependencies);Ai.length?re.send("getImages",{icons:Ai,source:this.source,tileID:this.tileID,type:"icons"},function(pr,Kt){oe||(oe=pr,Ne=Kt,dr.call(ve))}):Ne={};var rr=Object.keys(qe.patternDependencies);function dr(){if(oe)return ue(oe);if(Se&&Ne&&Ge){var pr=new V(Se),Kt=new o.ImageAtlas(Ne,Ge);for(var ir in Le){var Oi=Le[ir];Oi instanceof o.SymbolBucket?(U(Oi.layers,this.zoom,X),o.performSymbolLayout(Oi,Se,pr.positions,Ne,Kt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Oi.hasPattern&&(Oi instanceof o.LineBucket||Oi instanceof o.FillBucket||Oi instanceof o.FillExtrusionBucket)&&(U(Oi.layers,this.zoom,X),Oi.addFeatures(qe,this.tileID.canonical,Kt.patternPositions))}this.status="done",ue(null,{buckets:o.values(Le).filter(function(ha){return!ha.isEmpty()}),featureIndex:H,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pr.image,imageAtlas:Kt,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?Ne:null,glyphPositions:this.returnDependencies?pr.positions:null})}}rr.length?re.send("getImages",{icons:rr,source:this.source,tileID:this.tileID,type:"patterns"},function(pr,Kt){oe||(oe=pr,Ge=Kt,dr.call(ve))}):Ge={},dr.call(this)};var he=function(N,G,X,re){this.actor=N,this.layerIndex=G,this.availableImages=X,this.loadVectorData=re||fe,this.loading={},this.loaded={}};he.prototype.loadTile=function(N,G){var X=this,re=N.uid;this.loading||(this.loading={});var ue=!!(N&&N.request&&N.request.collectResourceTiming)&&new o.RequestPerformance(N.request),ve=this.loading[re]=new j(N);ve.abort=this.loadVectorData(N,function(xe,H){if(delete X.loading[re],xe||!H)return ve.status="done",X.loaded[re]=ve,G(xe);var oe=H.rawData,Se={};H.expires&&(Se.expires=H.expires),H.cacheControl&&(Se.cacheControl=H.cacheControl);var Ne={};if(ue){var Ge=ue.finish();Ge&&(Ne.resourceTiming=JSON.parse(JSON.stringify(Ge)))}ve.vectorTile=H.vectorTile,ve.parse(H.vectorTile,X.layerIndex,X.availableImages,X.actor,function(Le,qe){if(Le||!qe)return G(Le);G(null,o.extend({rawTileData:oe.slice(0)},qe,Se,Ne))}),X.loaded=X.loaded||{},X.loaded[re]=ve})},he.prototype.reloadTile=function(N,G){var X=this,re=this.loaded,ue=N.uid,ve=this;if(re&&re[ue]){var xe=re[ue];xe.showCollisionBoxes=N.showCollisionBoxes;var H=function(oe,Se){var Ne=xe.reloadCallback;Ne&&(delete xe.reloadCallback,xe.parse(xe.vectorTile,ve.layerIndex,X.availableImages,ve.actor,Ne)),G(oe,Se)};xe.status==="parsing"?xe.reloadCallback=H:xe.status==="done"&&(xe.vectorTile?xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,H):H())}},he.prototype.abortTile=function(N,G){var X=this.loading,re=N.uid;X&&X[re]&&X[re].abort&&(X[re].abort(),delete X[re]),G()},he.prototype.removeTile=function(N,G){var X=this.loaded,re=N.uid;X&&X[re]&&delete X[re],G()};var Ie=o.window.ImageBitmap,we=function(){this.loaded={}};function Ve(N,G){if(N.length!==0){Ue(N[0],G);for(var X=1;X<N.length;X++)Ue(N[X],!G)}}function Ue(N,G){for(var X=0,re=0,ue=N.length,ve=ue-1;re<ue;ve=re++)X+=(N[re][0]-N[ve][0])*(N[ve][1]+N[re][1]);X>=0!=!!G&&N.reverse()}we.prototype.loadTile=function(N,G){var X=N.uid,re=N.encoding,ue=N.rawImageData,ve=Ie&&ue instanceof Ie?this.getImageData(ue):ue,xe=new o.DEMData(X,ve,re);this.loaded=this.loaded||{},this.loaded[X]=xe,G(null,xe)},we.prototype.getImageData=function(N){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);var G=this.offscreenCanvasContext.getImageData(-1,-1,N.width+2,N.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:G.width,height:G.height},G.data)},we.prototype.removeTile=function(N){var G=this.loaded,X=N.uid;G&&G[X]&&delete G[X]};var Ot=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,Mt=function(N){this._feature=N,this.extent=o.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))};Mt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var N=[],G=0,X=this._feature.geometry;G<X.length;G+=1){var re=X[G];N.push([new o.Point$1(re[0],re[1])])}return N}for(var ue=[],ve=0,xe=this._feature.geometry;ve<xe.length;ve+=1){for(var H=[],oe=0,Se=xe[ve];oe<Se.length;oe+=1){var Ne=Se[oe];H.push(new o.Point$1(Ne[0],Ne[1]))}ue.push(H)}return ue},Mt.prototype.toGeoJSON=function(N,G,X){return Ot.call(this,N,G,X)};var mt=function(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=N.length,this._features=N};mt.prototype.feature=function(N){return new Mt(this._features[N])};var Qe=o.vectorTile.VectorTileFeature,kr=xr;function xr(N,G){this.options=G||{},this.features=N,this.length=N.length}function ar(N,G){this.id=typeof N.id=="number"?N.id:void 0,this.type=N.type,this.rawGeometry=N.type===1?[N.geometry]:N.geometry,this.properties=N.tags,this.extent=G||4096}xr.prototype.feature=function(N){return new ar(this.features[N],this.options.extent)},ar.prototype.loadGeometry=function(){var N=this.rawGeometry;this.geometry=[];for(var G=0;G<N.length;G++){for(var X=N[G],re=[],ue=0;ue<X.length;ue++)re.push(new o.Point$1(X[ue][0],X[ue][1]));this.geometry.push(re)}return this.geometry},ar.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var N=this.geometry,G=1/0,X=-1/0,re=1/0,ue=-1/0,ve=0;ve<N.length;ve++)for(var xe=N[ve],H=0;H<xe.length;H++){var oe=xe[H];G=Math.min(G,oe.x),X=Math.max(X,oe.x),re=Math.min(re,oe.y),ue=Math.max(ue,oe.y)}return[G,re,X,ue]},ar.prototype.toGeoJSON=Qe.prototype.toGeoJSON;var It=Tr,At=kr;function Tr(N){var G=new o.pbf;return function(X,re){for(var ue in X.layers)re.writeMessage(3,Vt,X.layers[ue])}(N,G),G.finish()}function Vt(N,G){var X;G.writeVarintField(15,N.version||1),G.writeStringField(1,N.name||""),G.writeVarintField(5,N.extent||4096);var re={keys:[],values:[],keycache:{},valuecache:{}};for(X=0;X<N.length;X++)re.feature=N.feature(X),G.writeMessage(2,Ir,re);var ue=re.keys;for(X=0;X<ue.length;X++)G.writeStringField(3,ue[X]);var ve=re.values;for(X=0;X<ve.length;X++)G.writeMessage(4,Er,ve[X])}function Ir(N,G){var X=N.feature;X.id!==void 0&&G.writeVarintField(1,X.id),G.writeMessage(2,rt,N),G.writeVarintField(3,X.type),G.writeMessage(4,ci,X)}function rt(N,G){var X=N.feature,re=N.keys,ue=N.values,ve=N.keycache,xe=N.valuecache;for(var H in X.properties){var oe=ve[H];oe===void 0&&(re.push(H),ve[H]=oe=re.length-1),G.writeVarint(oe);var Se=X.properties[H],Ne=typeof Se;Ne!=="string"&&Ne!=="boolean"&&Ne!=="number"&&(Se=JSON.stringify(Se));var Ge=Ne+":"+Se,Le=xe[Ge];Le===void 0&&(ue.push(Se),xe[Ge]=Le=ue.length-1),G.writeVarint(Le)}}function lr(N,G){return(G<<3)+(7&N)}function ri(N){return N<<1^N>>31}function ci(N,G){for(var X=N.loadGeometry(),re=N.type,ue=0,ve=0,xe=X.length,H=0;H<xe;H++){var oe=X[H],Se=1;re===1&&(Se=oe.length),G.writeVarint(lr(1,Se));for(var Ne=re===3?oe.length-1:oe.length,Ge=0;Ge<Ne;Ge++){Ge===1&&re!==1&&G.writeVarint(lr(2,Ne-1));var Le=oe[Ge].x-ue,qe=oe[Ge].y-ve;G.writeVarint(ri(Le)),G.writeVarint(ri(qe)),ue+=Le,ve+=qe}re===3&&G.writeVarint(lr(7,1))}}function Er(N,G){var X=typeof N;X==="string"?G.writeStringField(1,N):X==="boolean"?G.writeBooleanField(7,N):X==="number"&&(N%1!=0?G.writeDoubleField(3,N):N<0?G.writeSVarintField(6,N):G.writeVarintField(5,N))}function vt(N,G,X,re){nt(N,X,re),nt(G,2*X,2*re),nt(G,2*X+1,2*re+1)}function nt(N,G,X){var re=N[G];N[G]=N[X],N[X]=re}function fr(N,G,X,re){var ue=N-X,ve=G-re;return ue*ue+ve*ve}It.fromVectorTileJs=Tr,It.fromGeojsonVt=function(N,G){G=G||{};var X={};for(var re in N)X[re]=new kr(N[re].features,G),X[re].name=re,X[re].version=G.version,X[re].extent=G.extent;return Tr({layers:X})},It.GeoJSONWrapper=At;var On=function(N){return N[0]},sa=function(N){return N[1]},Ti=function(N,G,X,re,ue){G===void 0&&(G=On),X===void 0&&(X=sa),re===void 0&&(re=64),ue===void 0&&(ue=Float64Array),this.nodeSize=re,this.points=N;for(var ve=N.length<65536?Uint16Array:Uint32Array,xe=this.ids=new ve(N.length),H=this.coords=new ue(2*N.length),oe=0;oe<N.length;oe++)xe[oe]=oe,H[2*oe]=G(N[oe]),H[2*oe+1]=X(N[oe]);(function Se(Ne,Ge,Le,qe,ht,at){if(!(ht-qe<=Le)){var Re=qe+ht>>1;(function tt(We,$e,Nt,Ze,Gt,or){for(;Gt>Ze;){if(Gt-Ze>600){var Ct=Gt-Ze+1,tr=Nt-Ze+1,er=Math.log(Ct),Ai=.5*Math.exp(2*er/3),rr=.5*Math.sqrt(er*Ai*(Ct-Ai)/Ct)*(tr-Ct/2<0?-1:1);tt(We,$e,Nt,Math.max(Ze,Math.floor(Nt-tr*Ai/Ct+rr)),Math.min(Gt,Math.floor(Nt+(Ct-tr)*Ai/Ct+rr)),or)}var dr=$e[2*Nt+or],pr=Ze,Kt=Gt;for(vt(We,$e,Ze,Nt),$e[2*Gt+or]>dr&&vt(We,$e,Ze,Gt);pr<Kt;){for(vt(We,$e,pr,Kt),pr++,Kt--;$e[2*pr+or]<dr;)pr++;for(;$e[2*Kt+or]>dr;)Kt--}$e[2*Ze+or]===dr?vt(We,$e,Ze,Kt):vt(We,$e,++Kt,Gt),Kt<=Nt&&(Ze=Kt+1),Nt<=Kt&&(Gt=Kt-1)}})(Ne,Ge,Re,qe,ht,at%2),Se(Ne,Ge,Le,qe,Re-1,at+1),Se(Ne,Ge,Le,Re+1,ht,at+1)}})(xe,H,re,0,xe.length-1,0)};Ti.prototype.range=function(N,G,X,re){return function(ue,ve,xe,H,oe,Se,Ne){for(var Ge,Le,qe=[0,ue.length-1,0],ht=[];qe.length;){var at=qe.pop(),Re=qe.pop(),tt=qe.pop();if(Re-tt<=Ne)for(var We=tt;We<=Re;We++)Le=ve[2*We+1],(Ge=ve[2*We])>=xe&&Ge<=oe&&Le>=H&&Le<=Se&&ht.push(ue[We]);else{var $e=Math.floor((tt+Re)/2);Le=ve[2*$e+1],(Ge=ve[2*$e])>=xe&&Ge<=oe&&Le>=H&&Le<=Se&&ht.push(ue[$e]);var Nt=(at+1)%2;(at===0?xe<=Ge:H<=Le)&&(qe.push(tt),qe.push($e-1),qe.push(Nt)),(at===0?oe>=Ge:Se>=Le)&&(qe.push($e+1),qe.push(Re),qe.push(Nt))}}return ht}(this.ids,this.coords,N,G,X,re,this.nodeSize)},Ti.prototype.within=function(N,G,X){return function(re,ue,ve,xe,H,oe){for(var Se=[0,re.length-1,0],Ne=[],Ge=H*H;Se.length;){var Le=Se.pop(),qe=Se.pop(),ht=Se.pop();if(qe-ht<=oe)for(var at=ht;at<=qe;at++)fr(ue[2*at],ue[2*at+1],ve,xe)<=Ge&&Ne.push(re[at]);else{var Re=Math.floor((ht+qe)/2),tt=ue[2*Re],We=ue[2*Re+1];fr(tt,We,ve,xe)<=Ge&&Ne.push(re[Re]);var $e=(Le+1)%2;(Le===0?ve-H<=tt:xe-H<=We)&&(Se.push(ht),Se.push(Re-1),Se.push($e)),(Le===0?ve+H>=tt:xe+H>=We)&&(Se.push(Re+1),Se.push(qe),Se.push($e))}}return Ne}(this.ids,this.coords,N,G,X,this.nodeSize)};var vn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(N){return N}},oi=function(N){this.options=Wi(Object.create(vn),N),this.trees=new Array(this.options.maxZoom+1)};function Sa(N,G,X,re,ue){return{x:N,y:G,zoom:1/0,id:X,parentId:-1,numPoints:re,properties:ue}}function gr(N,G){var X=N.geometry.coordinates,re=X[1];return{x:Vr(X[0]),y:Lt(re),zoom:1/0,index:G,parentId:-1}}function Vn(N){return{type:"Feature",id:N.id,properties:Qa(N),geometry:{type:"Point",coordinates:[(re=N.x,360*(re-.5)),(G=N.y,X=(180-360*G)*Math.PI/180,360*Math.atan(Math.exp(X))/Math.PI-90)]}};var G,X,re}function Qa(N){var G=N.numPoints,X=G>=1e4?Math.round(G/1e3)+"k":G>=1e3?Math.round(G/100)/10+"k":G;return Wi(Wi({},N.properties),{cluster:!0,cluster_id:N.id,point_count:G,point_count_abbreviated:X})}function Vr(N){return N/360+.5}function Lt(N){var G=Math.sin(N*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function Wi(N,G){for(var X in G)N[X]=G[X];return N}function Bi(N){return N.x}function hi(N){return N.y}function ho(N,G,X,re,ue,ve){var xe=ue-X,H=ve-re;if(xe!==0||H!==0){var oe=((N-X)*xe+(G-re)*H)/(xe*xe+H*H);oe>1?(X=ue,re=ve):oe>0&&(X+=xe*oe,re+=H*oe)}return(xe=N-X)*xe+(H=G-re)*H}function Jt(N,G,X,re){var ue={id:N===void 0?null:N,type:G,geometry:X,tags:re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ve){var xe=ve.geometry,H=ve.type;if(H==="Point"||H==="MultiPoint"||H==="LineString")Ei(ve,xe);else if(H==="Polygon"||H==="MultiLineString")for(var oe=0;oe<xe.length;oe++)Ei(ve,xe[oe]);else if(H==="MultiPolygon")for(oe=0;oe<xe.length;oe++)for(var Se=0;Se<xe[oe].length;Se++)Ei(ve,xe[oe][Se])}(ue),ue}function Ei(N,G){for(var X=0;X<G.length;X+=3)N.minX=Math.min(N.minX,G[X]),N.minY=Math.min(N.minY,G[X+1]),N.maxX=Math.max(N.maxX,G[X]),N.maxY=Math.max(N.maxY,G[X+1])}function Mr(N,G,X,re){if(G.geometry){var ue=G.geometry.coordinates,ve=G.geometry.type,xe=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),H=[],oe=G.id;if(X.promoteId?oe=G.properties[X.promoteId]:X.generateId&&(oe=re||0),ve==="Point")di(ue,H);else if(ve==="MultiPoint")for(var Se=0;Se<ue.length;Se++)di(ue[Se],H);else if(ve==="LineString")mi(ue,H,xe,!1);else if(ve==="MultiLineString"){if(X.lineMetrics){for(Se=0;Se<ue.length;Se++)mi(ue[Se],H=[],xe,!1),N.push(Jt(oe,"LineString",H,G.properties));return}Ar(ue,H,xe,!1)}else if(ve==="Polygon")Ar(ue,H,xe,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(Se=0;Se<G.geometry.geometries.length;Se++)Mr(N,{id:oe,geometry:G.geometry.geometries[Se],properties:G.properties},X,re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Se=0;Se<ue.length;Se++){var Ne=[];Ar(ue[Se],Ne,xe,!0),H.push(Ne)}}N.push(Jt(oe,ve,H,G.properties))}}function di(N,G){G.push(yi(N[0])),G.push(un(N[1])),G.push(0)}function mi(N,G,X,re){for(var ue,ve,xe=0,H=0;H<N.length;H++){var oe=yi(N[H][0]),Se=un(N[H][1]);G.push(oe),G.push(Se),G.push(0),H>0&&(xe+=re?(ue*Se-oe*ve)/2:Math.sqrt(Math.pow(oe-ue,2)+Math.pow(Se-ve,2))),ue=oe,ve=Se}var Ne=G.length-3;G[2]=1,function Ge(Le,qe,ht,at){for(var Re,tt=at,We=ht-qe>>1,$e=ht-qe,Nt=Le[qe],Ze=Le[qe+1],Gt=Le[ht],or=Le[ht+1],Ct=qe+3;Ct<ht;Ct+=3){var tr=ho(Le[Ct],Le[Ct+1],Nt,Ze,Gt,or);if(tr>tt)Re=Ct,tt=tr;else if(tr===tt){var er=Math.abs(Ct-We);er<$e&&(Re=Ct,$e=er)}}tt>at&&(Re-qe>3&&Ge(Le,qe,Re,at),Le[Re+2]=tt,ht-Re>3&&Ge(Le,Re,ht,at))}(G,0,Ne,X),G[Ne+2]=1,G.size=Math.abs(xe),G.start=0,G.end=G.size}function Ar(N,G,X,re){for(var ue=0;ue<N.length;ue++){var ve=[];mi(N[ue],ve,X,re),G.push(ve)}}function yi(N){return N/360+.5}function un(N){var G=Math.sin(N*Math.PI/180),X=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return X<0?0:X>1?1:X}function Kr(N,G,X,re,ue,ve,xe,H){if(re/=G,ve>=(X/=G)&&xe<re)return N;if(xe<X||ve>=re)return null;for(var oe=[],Se=0;Se<N.length;Se++){var Ne=N[Se],Ge=Ne.geometry,Le=Ne.type,qe=ue===0?Ne.minX:Ne.minY,ht=ue===0?Ne.maxX:Ne.maxY;if(qe>=X&&ht<re)oe.push(Ne);else if(!(ht<X||qe>=re)){var at=[];if(Le==="Point"||Le==="MultiPoint")hr(Ge,at,X,re,ue);else if(Le==="LineString")Fr(Ge,at,X,re,ue,!1,H.lineMetrics);else if(Le==="MultiLineString")Fn(Ge,at,X,re,ue,!1);else if(Le==="Polygon")Fn(Ge,at,X,re,ue,!0);else if(Le==="MultiPolygon")for(var Re=0;Re<Ge.length;Re++){var tt=[];Fn(Ge[Re],tt,X,re,ue,!0),tt.length&&at.push(tt)}if(at.length){if(H.lineMetrics&&Le==="LineString"){for(Re=0;Re<at.length;Re++)oe.push(Jt(Ne.id,Le,at[Re],Ne.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(at.length===1?(Le="LineString",at=at[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=at.length===3?"Point":"MultiPoint"),oe.push(Jt(Ne.id,Le,at,Ne.tags))}}}return oe.length?oe:null}function hr(N,G,X,re,ue){for(var ve=0;ve<N.length;ve+=3){var xe=N[ve+ue];xe>=X&&xe<=re&&(G.push(N[ve]),G.push(N[ve+1]),G.push(N[ve+2]))}}function Fr(N,G,X,re,ue,ve,xe){for(var H,oe,Se=Yn(N),Ne=ue===0?Qo:pi,Ge=N.start,Le=0;Le<N.length-3;Le+=3){var qe=N[Le],ht=N[Le+1],at=N[Le+2],Re=N[Le+3],tt=N[Le+4],We=ue===0?qe:ht,$e=ue===0?Re:tt,Nt=!1;xe&&(H=Math.sqrt(Math.pow(qe-Re,2)+Math.pow(ht-tt,2))),We<X?$e>X&&(oe=Ne(Se,qe,ht,Re,tt,X),xe&&(Se.start=Ge+H*oe)):We>re?$e<re&&(oe=Ne(Se,qe,ht,Re,tt,re),xe&&(Se.start=Ge+H*oe)):La(Se,qe,ht,at),$e<X&&We>=X&&(oe=Ne(Se,qe,ht,Re,tt,X),Nt=!0),$e>re&&We<=re&&(oe=Ne(Se,qe,ht,Re,tt,re),Nt=!0),!ve&&Nt&&(xe&&(Se.end=Ge+H*oe),G.push(Se),Se=Yn(N)),xe&&(Ge+=H)}var Ze=N.length-3;qe=N[Ze],ht=N[Ze+1],at=N[Ze+2],(We=ue===0?qe:ht)>=X&&We<=re&&La(Se,qe,ht,at),Ze=Se.length-3,ve&&Ze>=3&&(Se[Ze]!==Se[0]||Se[Ze+1]!==Se[1])&&La(Se,Se[0],Se[1],Se[2]),Se.length&&G.push(Se)}function Yn(N){var G=[];return G.size=N.size,G.start=N.start,G.end=N.end,G}function Fn(N,G,X,re,ue,ve){for(var xe=0;xe<N.length;xe++)Fr(N[xe],G,X,re,ue,ve,!1)}function La(N,G,X,re){N.push(G),N.push(X),N.push(re)}function Qo(N,G,X,re,ue,ve){var xe=(ve-G)/(re-G);return N.push(ve),N.push(X+(ue-X)*xe),N.push(1),xe}function pi(N,G,X,re,ue,ve){var xe=(ve-X)/(ue-X);return N.push(G+(re-G)*xe),N.push(ve),N.push(1),xe}function cn(N,G){for(var X=[],re=0;re<N.length;re++){var ue,ve=N[re],xe=ve.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")ue=gn(ve.geometry,G);else if(xe==="MultiLineString"||xe==="Polygon"){ue=[];for(var H=0;H<ve.geometry.length;H++)ue.push(gn(ve.geometry[H],G))}else if(xe==="MultiPolygon")for(ue=[],H=0;H<ve.geometry.length;H++){for(var oe=[],Se=0;Se<ve.geometry[H].length;Se++)oe.push(gn(ve.geometry[H][Se],G));ue.push(oe)}X.push(Jt(ve.id,xe,ue,ve.tags))}return X}function gn(N,G){var X=[];X.size=N.size,N.start!==void 0&&(X.start=N.start,X.end=N.end);for(var re=0;re<N.length;re+=3)X.push(N[re]+G,N[re+1],N[re+2]);return X}function po(N,G){if(N.transformed)return N;var X,re,ue,ve=1<<N.z,xe=N.x,H=N.y;for(X=0;X<N.features.length;X++){var oe=N.features[X],Se=oe.geometry,Ne=oe.type;if(oe.geometry=[],Ne===1)for(re=0;re<Se.length;re+=2)oe.geometry.push(la(Se[re],Se[re+1],G,ve,xe,H));else for(re=0;re<Se.length;re++){var Ge=[];for(ue=0;ue<Se[re].length;ue+=2)Ge.push(la(Se[re][ue],Se[re][ue+1],G,ve,xe,H));oe.geometry.push(Ge)}}return N.transformed=!0,N}function la(N,G,X,re,ue,ve){return[Math.round(X*(N*re-ue)),Math.round(X*(G*re-ve))]}function ml(N,G,X,re,ue){for(var ve=G===ue.maxZoom?0:ue.tolerance/((1<<G)*ue.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:X,y:re,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},H=0;H<N.length;H++){xe.numFeatures++,$o(xe,N[H],ve,ue);var oe=N[H].minX,Se=N[H].minY,Ne=N[H].maxX,Ge=N[H].maxY;oe<xe.minX&&(xe.minX=oe),Se<xe.minY&&(xe.minY=Se),Ne>xe.maxX&&(xe.maxX=Ne),Ge>xe.maxY&&(xe.maxY=Ge)}return xe}function $o(N,G,X,re){var ue=G.geometry,ve=G.type,xe=[];if(ve==="Point"||ve==="MultiPoint")for(var H=0;H<ue.length;H+=3)xe.push(ue[H]),xe.push(ue[H+1]),N.numPoints++,N.numSimplified++;else if(ve==="LineString")Nn(xe,ue,N,X,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(H=0;H<ue.length;H++)Nn(xe,ue[H],N,X,ve==="Polygon",H===0);else if(ve==="MultiPolygon")for(var oe=0;oe<ue.length;oe++){var Se=ue[oe];for(H=0;H<Se.length;H++)Nn(xe,Se[H],N,X,!0,H===0)}if(xe.length){var Ne=G.tags||null;if(ve==="LineString"&&re.lineMetrics){for(var Ge in Ne={},G.tags)Ne[Ge]=G.tags[Ge];Ne.mapbox_clip_start=ue.start/ue.size,Ne.mapbox_clip_end=ue.end/ue.size}var Le={geometry:xe,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Ne};G.id!==null&&(Le.id=G.id),N.features.push(Le)}}function Nn(N,G,X,re,ue,ve){var xe=re*re;if(re>0&&G.size<(ue?xe:re))X.numPoints+=G.length/3;else{for(var H=[],oe=0;oe<G.length;oe+=3)(re===0||G[oe+2]>xe)&&(X.numSimplified++,H.push(G[oe]),H.push(G[oe+1])),X.numPoints++;ue&&function(Se,Ne){for(var Ge=0,Le=0,qe=Se.length,ht=qe-2;Le<qe;ht=Le,Le+=2)Ge+=(Se[Le]-Se[ht])*(Se[Le+1]+Se[ht+1]);if(Ge>0===Ne)for(Le=0,qe=Se.length;Le<qe/2;Le+=2){var at=Se[Le],Re=Se[Le+1];Se[Le]=Se[qe-2-Le],Se[Le+1]=Se[qe-1-Le],Se[qe-2-Le]=at,Se[qe-1-Le]=Re}}(H,ve),N.push(H)}}function _n(N,G){var X=(G=this.options=function(ue,ve){for(var xe in ve)ue[xe]=ve[xe];return ue}(Object.create(this.options),G)).debug;if(X&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var re=function(ue,ve){var xe=[];if(ue.type==="FeatureCollection")for(var H=0;H<ue.features.length;H++)Mr(xe,ue.features[H],ve,H);else Mr(xe,ue.type==="Feature"?ue:{geometry:ue},ve);return xe}(N,G);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(re=function(ue,ve){var xe=ve.buffer/ve.extent,H=ue,oe=Kr(ue,1,-1-xe,xe,0,-1,2,ve),Se=Kr(ue,1,1-xe,2+xe,0,-1,2,ve);return(oe||Se)&&(H=Kr(ue,1,-xe,1+xe,0,-1,2,ve)||[],oe&&(H=cn(oe,1).concat(H)),Se&&(H=H.concat(cn(Se,-1)))),H}(re,G)).length&&this.splitTile(re,0,0,0),X&&(re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ua(N,G,X){return 32*((1<<N)*X+G)+N}function Jn(N,G){var X=N.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);var re=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!re)return G(null,null);var ue=new mt(re.features),ve=It(ue);ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),G(null,{vectorTile:ue,rawData:ve.buffer})}oi.prototype.load=function(N){var G=this.options,X=G.log,re=G.minZoom,ue=G.maxZoom,ve=G.nodeSize;X&&console.time("total time");var xe="prepare "+N.length+" points";X&&console.time(xe),this.points=N;for(var H=[],oe=0;oe<N.length;oe++)N[oe].geometry&&H.push(gr(N[oe],oe));this.trees[ue+1]=new Ti(H,Bi,hi,ve,Float32Array),X&&console.timeEnd(xe);for(var Se=ue;Se>=re;Se--){var Ne=+Date.now();H=this._cluster(H,Se),this.trees[Se]=new Ti(H,Bi,hi,ve,Float32Array),X&&console.log("z%d: %d clusters in %dms",Se,H.length,+Date.now()-Ne)}return X&&console.timeEnd("total time"),this},oi.prototype.getClusters=function(N,G){var X=((N[0]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,N[1])),ue=N[2]===180?180:((N[2]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)X=-180,ue=180;else if(X>ue){var xe=this.getClusters([X,re,180,ve],G),H=this.getClusters([-180,re,ue,ve],G);return xe.concat(H)}for(var oe=this.trees[this._limitZoom(G)],Se=[],Ne=0,Ge=oe.range(Vr(X),Lt(ve),Vr(ue),Lt(re));Ne<Ge.length;Ne+=1){var Le=oe.points[Ge[Ne]];Se.push(Le.numPoints?Vn(Le):this.points[Le.index])}return Se},oi.prototype.getChildren=function(N){var G=this._getOriginId(N),X=this._getOriginZoom(N),re="No cluster with the specified id.",ue=this.trees[X];if(!ue)throw new Error(re);var ve=ue.points[G];if(!ve)throw new Error(re);for(var xe=this.options.radius/(this.options.extent*Math.pow(2,X-1)),H=[],oe=0,Se=ue.within(ve.x,ve.y,xe);oe<Se.length;oe+=1){var Ne=ue.points[Se[oe]];Ne.parentId===N&&H.push(Ne.numPoints?Vn(Ne):this.points[Ne.index])}if(H.length===0)throw new Error(re);return H},oi.prototype.getLeaves=function(N,G,X){var re=[];return this._appendLeaves(re,N,G=G||10,X=X||0,0),re},oi.prototype.getTile=function(N,G,X){var re=this.trees[this._limitZoom(N)],ue=Math.pow(2,N),ve=this.options,xe=ve.radius/ve.extent,H=(X-xe)/ue,oe=(X+1+xe)/ue,Se={features:[]};return this._addTileFeatures(re.range((G-xe)/ue,H,(G+1+xe)/ue,oe),re.points,G,X,ue,Se),G===0&&this._addTileFeatures(re.range(1-xe/ue,H,1,oe),re.points,ue,X,ue,Se),G===ue-1&&this._addTileFeatures(re.range(0,H,xe/ue,oe),re.points,-1,X,ue,Se),Se.features.length?Se:null},oi.prototype.getClusterExpansionZoom=function(N){for(var G=this._getOriginZoom(N)-1;G<=this.options.maxZoom;){var X=this.getChildren(N);if(G++,X.length!==1)break;N=X[0].properties.cluster_id}return G},oi.prototype._appendLeaves=function(N,G,X,re,ue){for(var ve=0,xe=this.getChildren(G);ve<xe.length;ve+=1){var H=xe[ve],oe=H.properties;if(oe&&oe.cluster?ue+oe.point_count<=re?ue+=oe.point_count:ue=this._appendLeaves(N,oe.cluster_id,X,re,ue):ue<re?ue++:N.push(H),N.length===X)break}return ue},oi.prototype._addTileFeatures=function(N,G,X,re,ue,ve){for(var xe=0,H=N;xe<H.length;xe+=1){var oe=G[H[xe]],Se=oe.numPoints,Ne={type:1,geometry:[[Math.round(this.options.extent*(oe.x*ue-X)),Math.round(this.options.extent*(oe.y*ue-re))]],tags:Se?Qa(oe):this.points[oe.index].properties},Ge=void 0;Se?Ge=oe.id:this.options.generateId?Ge=oe.index:this.points[oe.index].id&&(Ge=this.points[oe.index].id),Ge!==void 0&&(Ne.id=Ge),ve.features.push(Ne)}},oi.prototype._limitZoom=function(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))},oi.prototype._cluster=function(N,G){for(var X=[],re=this.options,ue=re.reduce,ve=re.minPoints,xe=re.radius/(re.extent*Math.pow(2,G)),H=0;H<N.length;H++){var oe=N[H];if(!(oe.zoom<=G)){oe.zoom=G;for(var Se=this.trees[G+1],Ne=Se.within(oe.x,oe.y,xe),Ge=oe.numPoints||1,Le=Ge,qe=0,ht=Ne;qe<ht.length;qe+=1){var at=Se.points[ht[qe]];at.zoom>G&&(Le+=at.numPoints||1)}if(Le>=ve){for(var Re=oe.x*Ge,tt=oe.y*Ge,We=ue&&Ge>1?this._map(oe,!0):null,$e=(H<<5)+(G+1)+this.points.length,Nt=0,Ze=Ne;Nt<Ze.length;Nt+=1){var Gt=Se.points[Ze[Nt]];if(!(Gt.zoom<=G)){Gt.zoom=G;var or=Gt.numPoints||1;Re+=Gt.x*or,tt+=Gt.y*or,Gt.parentId=$e,ue&&(We||(We=this._map(oe,!0)),ue(We,this._map(Gt)))}}oe.parentId=$e,X.push(Sa(Re/Le,tt/Le,$e,Le,We))}else if(X.push(oe),Le>1)for(var Ct=0,tr=Ne;Ct<tr.length;Ct+=1){var er=Se.points[tr[Ct]];er.zoom<=G||(er.zoom=G,X.push(er))}}}return X},oi.prototype._getOriginId=function(N){return N-this.points.length>>5},oi.prototype._getOriginZoom=function(N){return(N-this.points.length)%32},oi.prototype._map=function(N,G){if(N.numPoints)return G?Wi({},N.properties):N.properties;var X=this.points[N.index].properties,re=this.options.map(X);return G&&re===X?Wi({},re):re},_n.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_n.prototype.splitTile=function(N,G,X,re,ue,ve,xe){for(var H=[N,G,X,re],oe=this.options,Se=oe.debug;H.length;){re=H.pop(),X=H.pop(),G=H.pop(),N=H.pop();var Ne=1<<G,Ge=ua(G,X,re),Le=this.tiles[Ge];if(!Le&&(Se>1&&console.time("creation"),Le=this.tiles[Ge]=ml(N,G,X,re,oe),this.tileCoords.push({z:G,x:X,y:re}),Se)){Se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,X,re,Le.numFeatures,Le.numPoints,Le.numSimplified),console.timeEnd("creation"));var qe="z"+G;this.stats[qe]=(this.stats[qe]||0)+1,this.total++}if(Le.source=N,ue){if(G===oe.maxZoom||G===ue)continue;var ht=1<<ue-G;if(X!==Math.floor(ve/ht)||re!==Math.floor(xe/ht))continue}else if(G===oe.indexMaxZoom||Le.numPoints<=oe.indexMaxPoints)continue;if(Le.source=null,N.length!==0){Se>1&&console.time("clipping");var at,Re,tt,We,$e,Nt,Ze=.5*oe.buffer/oe.extent,Gt=.5-Ze,or=.5+Ze,Ct=1+Ze;at=Re=tt=We=null,$e=Kr(N,Ne,X-Ze,X+or,0,Le.minX,Le.maxX,oe),Nt=Kr(N,Ne,X+Gt,X+Ct,0,Le.minX,Le.maxX,oe),N=null,$e&&(at=Kr($e,Ne,re-Ze,re+or,1,Le.minY,Le.maxY,oe),Re=Kr($e,Ne,re+Gt,re+Ct,1,Le.minY,Le.maxY,oe),$e=null),Nt&&(tt=Kr(Nt,Ne,re-Ze,re+or,1,Le.minY,Le.maxY,oe),We=Kr(Nt,Ne,re+Gt,re+Ct,1,Le.minY,Le.maxY,oe),Nt=null),Se>1&&console.timeEnd("clipping"),H.push(at||[],G+1,2*X,2*re),H.push(Re||[],G+1,2*X,2*re+1),H.push(tt||[],G+1,2*X+1,2*re),H.push(We||[],G+1,2*X+1,2*re+1)}}},_n.prototype.getTile=function(N,G,X){var re=this.options,ue=re.extent,ve=re.debug;if(N<0||N>24)return null;var xe=1<<N,H=ua(N,G=(G%xe+xe)%xe,X);if(this.tiles[H])return po(this.tiles[H],ue);ve>1&&console.log("drilling down to z%d-%d-%d",N,G,X);for(var oe,Se=N,Ne=G,Ge=X;!oe&&Se>0;)Se--,Ne=Math.floor(Ne/2),Ge=Math.floor(Ge/2),oe=this.tiles[ua(Se,Ne,Ge)];return oe&&oe.source?(ve>1&&console.log("found parent tile z%d-%d-%d",Se,Ne,Ge),ve>1&&console.time("drilling down"),this.splitTile(oe.source,Se,Ne,Ge,N,G,X),ve>1&&console.timeEnd("drilling down"),this.tiles[H]?po(this.tiles[H],ue):null):null};var ca=function(N){function G(X,re,ue,ve){N.call(this,X,re,ue,Jn),ve&&(this.loadGeoJSON=ve)}return N&&(G.__proto__=N),(G.prototype=Object.create(N&&N.prototype)).constructor=G,G.prototype.loadData=function(X,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=re,this._pendingLoadDataParams=X,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},G.prototype._loadData=function(){var X=this;if(this._pendingCallback&&this._pendingLoadDataParams){var re=this._pendingCallback,ue=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ve=!!(ue&&ue.request&&ue.request.collectResourceTiming)&&new o.RequestPerformance(ue.request);this.loadGeoJSON(ue,function(xe,H){if(xe||!H)return re(xe);if(typeof H!="object")return re(new Error("Input data given to '"+ue.source+"' is not a valid GeoJSON object."));(function Le(qe,ht){var at,Re=qe&&qe.type;if(Re==="FeatureCollection")for(at=0;at<qe.features.length;at++)Le(qe.features[at],ht);else if(Re==="GeometryCollection")for(at=0;at<qe.geometries.length;at++)Le(qe.geometries[at],ht);else if(Re==="Feature")Le(qe.geometry,ht);else if(Re==="Polygon")Ve(qe.coordinates,ht);else if(Re==="MultiPolygon")for(at=0;at<qe.coordinates.length;at++)Ve(qe.coordinates[at],ht);return qe})(H,!0);try{if(ue.filter){var oe=o.createExpression(ue.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(function(Le){return Le.key+": "+Le.message}).join(", "));var Se=H.features.filter(function(Le){return oe.value.evaluate({zoom:0},Le)});H={type:"FeatureCollection",features:Se}}X._geoJSONIndex=ue.cluster?new oi(function(Le){var qe=Le.superclusterOptions,ht=Le.clusterProperties;if(!ht||!qe)return qe;for(var at={},Re={},tt={accumulated:null,zoom:0},We={properties:null},$e=Object.keys(ht),Nt=0,Ze=$e;Nt<Ze.length;Nt+=1){var Gt=Ze[Nt],or=ht[Gt],Ct=or[0],tr=o.createExpression(or[1]),er=o.createExpression(typeof Ct=="string"?[Ct,["accumulated"],["get",Gt]]:Ct);at[Gt]=tr.value,Re[Gt]=er.value}return qe.map=function(Ai){We.properties=Ai;for(var rr={},dr=0,pr=$e;dr<pr.length;dr+=1){var Kt=pr[dr];rr[Kt]=at[Kt].evaluate(tt,We)}return rr},qe.reduce=function(Ai,rr){We.properties=rr;for(var dr=0,pr=$e;dr<pr.length;dr+=1){var Kt=pr[dr];tt.accumulated=Ai[Kt],Ai[Kt]=Re[Kt].evaluate(tt,We)}},qe}(ue)).load(H.features):function(Le,qe){return new _n(Le,qe)}(H,ue.geojsonVtOptions)}catch(Le){return re(Le)}X.loaded={};var Ne={};if(ve){var Ge=ve.finish();Ge&&(Ne.resourceTiming={},Ne.resourceTiming[ue.source]=JSON.parse(JSON.stringify(Ge)))}re(null,Ne)})}},G.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},G.prototype.reloadTile=function(X,re){var ue=this.loaded;return ue&&ue[X.uid]?N.prototype.reloadTile.call(this,X,re):this.loadTile(X,re)},G.prototype.loadGeoJSON=function(X,re){if(X.request)o.getJSON(X.request,re);else{if(typeof X.data!="string")return re(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."));try{return re(null,JSON.parse(X.data))}catch{return re(new Error("Input data given to '"+X.source+"' is not a valid GeoJSON object."))}}},G.prototype.removeSource=function(X,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),re()},G.prototype.getClusterExpansionZoom=function(X,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(ue){re(ue)}},G.prototype.getClusterChildren=function(X,re){try{re(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(ue){re(ue)}},G.prototype.getClusterLeaves=function(X,re){try{re(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(ue){re(ue)}},G}(he),Nr=function(N){var G=this;this.self=N,this.actor=new o.Actor(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:he,geojson:ca},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(X,re){if(G.workerSourceTypes[X])throw new Error('Worker source with name "'+X+'" already registered.');G.workerSourceTypes[X]=re},this.self.registerRTLTextPlugin=function(X){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=X.applyArabicShaping,o.plugin.processBidirectionalText=X.processBidirectionalText,o.plugin.processStyledBidirectionalText=X.processStyledBidirectionalText}};return Nr.prototype.setReferrer=function(N,G){this.referrer=G},Nr.prototype.setImages=function(N,G,X){for(var re in this.availableImages[N]=G,this.workerSources[N]){var ue=this.workerSources[N][re];for(var ve in ue)ue[ve].availableImages=G}X()},Nr.prototype.setLayers=function(N,G,X){this.getLayerIndex(N).replace(G),X()},Nr.prototype.updateLayers=function(N,G,X){this.getLayerIndex(N).update(G.layers,G.removedIds),X()},Nr.prototype.loadTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).loadTile(G,X)},Nr.prototype.loadDEMTile=function(N,G,X){this.getDEMWorkerSource(N,G.source).loadTile(G,X)},Nr.prototype.reloadTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).reloadTile(G,X)},Nr.prototype.abortTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).abortTile(G,X)},Nr.prototype.removeTile=function(N,G,X){this.getWorkerSource(N,G.type,G.source).removeTile(G,X)},Nr.prototype.removeDEMTile=function(N,G){this.getDEMWorkerSource(N,G.source).removeTile(G)},Nr.prototype.removeSource=function(N,G,X){if(this.workerSources[N]&&this.workerSources[N][G.type]&&this.workerSources[N][G.type][G.source]){var re=this.workerSources[N][G.type][G.source];delete this.workerSources[N][G.type][G.source],re.removeSource!==void 0?re.removeSource(G,X):X()}},Nr.prototype.loadWorkerSource=function(N,G,X){try{this.self.importScripts(G.url),X()}catch(re){X(re.toString())}},Nr.prototype.syncRTLPluginState=function(N,G,X){try{o.plugin.setState(G);var re=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&re!=null){this.self.importScripts(re);var ue=o.plugin.isParsed();X(ue?void 0:new Error("RTL Text Plugin failed to import scripts from "+re),ue)}}catch(ve){X(ve.toString())}},Nr.prototype.getAvailableImages=function(N){var G=this.availableImages[N];return G||(G=[]),G},Nr.prototype.getLayerIndex=function(N){var G=this.layerIndexes[N];return G||(G=this.layerIndexes[N]=new F),G},Nr.prototype.getWorkerSource=function(N,G,X){var re=this;return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][G]||(this.workerSources[N][G]={}),this.workerSources[N][G][X]||(this.workerSources[N][G][X]=new this.workerSourceTypes[G]({send:function(ue,ve,xe){re.actor.send(ue,ve,xe,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][G][X]},Nr.prototype.getDEMWorkerSource=function(N,G){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][G]||(this.demWorkerSources[N][G]=new we),this.demWorkerSources[N][G]},Nr.prototype.enforceCacheSizeLimit=function(N,G){o.enforceCacheSizeLimit(G)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Nr(self)),Nr}),_(["./shared"],function(o){var z=o.createCommonjsModule(function(n){function s(m){return!a(m)}function a(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,A,B=new Blob([""],{type:"text/javascript"}),Z=URL.createObjectURL(B);try{A=new Worker(Z),k=!0}catch{k=!1}return A&&A.terminate(),URL.revokeObjectURL(Z),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var A=k.getContext("2d");if(!A)return!1;var B=A.getImageData(0,0,1,1);return B&&B.width===k.width}()?(c[E=m&&m.failIfMajorPerformanceCaveat]===void 0&&(c[E]=function(k){var A=function(Z){var Y=document.createElement("canvas"),Q=Object.create(s.webGLContextAttributes);return Q.failIfMajorPerformanceCaveat=Z,Y.probablySupportsContext?Y.probablySupportsContext("webgl",Q)||Y.probablySupportsContext("experimental-webgl",Q):Y.supportsContext?Y.supportsContext("webgl",Q)||Y.supportsContext("experimental-webgl",Q):Y.getContext("webgl",Q)||Y.getContext("experimental-webgl",Q)}(k);if(!A)return!1;var B=A.createShader(A.VERTEX_SHADER);return!(!B||A.isContextLost())&&(A.shaderSource(B,"void main() {}"),A.compileShader(B),A.getShaderParameter(B,A.COMPILE_STATUS)===!0)}(E)),c[E]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var E}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),P={create:function(n,s,a){var c=o.window.document.createElement(n);return s!==void 0&&(c.className=s),a&&a.appendChild(c),c},createNS:function(n,s){return o.window.document.createElementNS(n,s)}},F=o.window.document&&o.window.document.documentElement.style;function V(n){if(!F)return n[0];for(var s=0;s<n.length;s++)if(n[s]in F)return n[s];return n[0]}var j,U=V(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);P.disableDrag=function(){F&&U&&(j=F[U],F[U]="none")},P.enableDrag=function(){F&&U&&(F[U]=j)};var fe=V(["transform","WebkitTransform"]);P.setTransform=function(n,s){n.style[fe]=s};var he=!1;try{var Ie=Object.defineProperty({},"passive",{get:function(){he=!0}});o.window.addEventListener("test",Ie,Ie),o.window.removeEventListener("test",Ie,Ie)}catch{he=!1}P.addEventListener=function(n,s,a,c){c===void 0&&(c={}),n.addEventListener(s,a,"passive"in c&&he?c:c.capture)},P.removeEventListener=function(n,s,a,c){c===void 0&&(c={}),n.removeEventListener(s,a,"passive"in c&&he?c:c.capture)};var we=function(n){n.preventDefault(),n.stopPropagation(),o.window.removeEventListener("click",we,!0)};function Ve(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}P.suppressClick=function(){o.window.addEventListener("click",we,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",we,!0)},0)},P.mousePos=function(n,s){var a=n.getBoundingClientRect();return new o.Point(s.clientX-a.left-n.clientLeft,s.clientY-a.top-n.clientTop)},P.touchPos=function(n,s){for(var a=n.getBoundingClientRect(),c=[],m=0;m<s.length;m++)c.push(new o.Point(s[m].clientX-a.left-n.clientLeft,s[m].clientY-a.top-n.clientTop));return c},P.mouseButton=function(n){return o.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},P.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Ue=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var c=0,m=this.requestors;c<m.length;c+=1){var E=m[c];this._notify(E.ids,E.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,c){this._validate(a,c)&&(this.images[a]=c)},s.prototype._validate=function(a,c){var m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),m=!1),this._validateContent(c.content,c)||(this.fire(new o.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(a,c){if(!a)return!0;for(var m=0,E=0,k=a;E<k.length;E+=1){var A=k[E];if(A[0]<m||A[1]<A[0]||c<A[1])return!1;m=A[1]}return!0},s.prototype._validateContent=function(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,c){c.version=this.images[a].version+1,this.images[a]=c,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,c){var m=!0;if(!this.isLoaded())for(var E=0,k=a;E<k.length;E+=1)this.images[k[E]]||(m=!1);this.isLoaded()||m?this._notify(a,c):this.requestors.push({ids:a,callback:c})},s.prototype._notify=function(a,c){for(var m={},E=0,k=a;E<k.length;E+=1){var A=k[E];this.images[A]||this.fire(new o.Event("styleimagemissing",{id:A}));var B=this.images[A];B?m[A]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:o.warnOnce('Image "'+A+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,m)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var c=this.patterns[a],m=this.getImage(a);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{var E={w:m.data.width+2,h:m.data.height+2,x:0,y:0},k=new o.ImagePosition(E,m);this.patterns[a]={bin:E,position:k}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var c in this.patterns)a.push(this.patterns[c].bin);var m=o.potpack(a),E=m.w,k=m.h,A=this.atlasImage;for(var B in A.resize({width:E||1,height:k||1}),this.patterns){var Z=this.patterns[B].bin,Y=Z.x+1,Q=Z.y+1,$=this.images[B].data,ce=$.width,ae=$.height;o.RGBAImage.copy($,A,{x:0,y:0},{x:Y,y:Q},{width:ce,height:ae}),o.RGBAImage.copy($,A,{x:0,y:ae-1},{x:Y,y:Q-1},{width:ce,height:1}),o.RGBAImage.copy($,A,{x:0,y:0},{x:Y,y:Q+ae},{width:ce,height:1}),o.RGBAImage.copy($,A,{x:ce-1,y:0},{x:Y-1,y:Q},{width:1,height:ae}),o.RGBAImage.copy($,A,{x:0,y:0},{x:Y+ce,y:Q},{width:1,height:ae})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var c=0,m=a;c<m.length;c+=1){var E=m[c];if(!this.callbackDispatchedThisFrame[E]){this.callbackDispatchedThisFrame[E]=!0;var k=this.images[E];Ve(k)&&this.updateImage(E,k)}}},s}(o.Evented),Ot=Qe,Mt=Qe,mt=1e20;function Qe(n,s,a,c,m,E){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=m||"sans-serif",this.fontWeight=E||"normal",this.radius=a||8;var k=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=k,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.d=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Int16Array(k),this.middle=Math.round(k/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function kr(n,s,a,c,m,E,k){for(var A=0;A<s;A++){for(var B=0;B<a;B++)c[B]=n[B*s+A];for(xr(c,m,E,k,a),B=0;B<a;B++)n[B*s+A]=m[B]}for(B=0;B<a;B++){for(A=0;A<s;A++)c[A]=n[B*s+A];for(xr(c,m,E,k,s),A=0;A<s;A++)n[B*s+A]=Math.sqrt(m[A])}}function xr(n,s,a,c,m){a[0]=0,c[0]=-mt,c[1]=+mt;for(var E=1,k=0;E<m;E++){for(var A=(n[E]+E*E-(n[a[k]]+a[k]*a[k]))/(2*E-2*a[k]);A<=c[k];)k--,A=(n[E]+E*E-(n[a[k]]+a[k]*a[k]))/(2*E-2*a[k]);a[++k]=E,c[k]=A,c[k+1]=+mt}for(E=0,k=0;E<m;E++){for(;c[k+1]<E;)k++;s[E]=(E-a[k])*(E-a[k])+n[a[k]]}}Qe.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var m=s.data[4*c+3]/255;this.gridOuter[c]=m===1?0:m===0?mt:Math.pow(Math.max(0,.5-m),2),this.gridInner[c]=m===1?mt:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(kr(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),kr(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a},Ot.default=Mt;var ar=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};ar.prototype.setURL=function(n){this.url=n},ar.prototype.getGlyphs=function(n,s){var a=this,c=[];for(var m in n)for(var E=0,k=n[m];E<k.length;E+=1)c.push({stack:m,id:k[E]});o.asyncAll(c,function(A,B){var Z=A.stack,Y=A.id,Q=a.entries[Z];Q||(Q=a.entries[Z]={glyphs:{},requests:{},ranges:{}});var $=Q.glyphs[Y];if($===void 0){if($=a._tinySDF(Q,Z,Y))return Q.glyphs[Y]=$,void B(null,{stack:Z,id:Y,glyph:$});var ce=Math.floor(Y/256);if(256*ce>65535)B(new Error("glyphs > 65535 not supported"));else if(Q.ranges[ce])B(null,{stack:Z,id:Y,glyph:$});else{var ae=Q.requests[ce];ae||(ae=Q.requests[ce]=[],ar.loadGlyphRange(Z,ce,a.url,a.requestManager,function(de,ne){if(ne){for(var me in ne)a._doesCharSupportLocalGlyph(+me)||(Q.glyphs[+me]=ne[+me]);Q.ranges[ce]=!0}for(var ge=0,Te=ae;ge<Te.length;ge+=1)(0,Te[ge])(de,ne);delete Q.requests[ce]})),ae.push(function(de,ne){de?B(de):ne&&B(null,{stack:Z,id:Y,glyph:ne[Y]||null})})}}else B(null,{stack:Z,id:Y,glyph:$})},function(A,B){if(A)s(A);else if(B){for(var Z={},Y=0,Q=B;Y<Q.length;Y+=1){var $=Q[Y],ce=$.stack,ae=$.id,de=$.glyph;(Z[ce]||(Z[ce]={}))[ae]=de&&{id:de.id,bitmap:de.bitmap.clone(),metrics:de.metrics}}s(null,Z)}})},ar.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](n)||o.isChar["Hangul Syllables"](n)||o.isChar.Hiragana(n)||o.isChar.Katakana(n))},ar.prototype._tinySDF=function(n,s,a){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(a)){var m=n.tinySDF;if(!m){var E="400";/bold/i.test(s)?E="900":/medium/i.test(s)?E="500":/light/i.test(s)&&(E="200"),m=n.tinySDF=new ar.TinySDF(24,3,8,.25,c,E)}return{id:a,bitmap:new o.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ar.loadGlyphRange=function(n,s,a,c,m){var E=256*s,k=E+255,A=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",n).replace("{range}",E+"-"+k),o.ResourceType.Glyphs);o.getArrayBuffer(A,function(B,Z){if(B)m(B);else if(Z){for(var Y={},Q=0,$=o.parseGlyphPBF(Z);Q<$.length;Q+=1){var ce=$[Q];Y[ce.id]=ce}m(null,Y)}})},ar.TinySDF=Ot;var It=function(){this.specification=o.styleSpec.light.position};It.prototype.possiblyEvaluate=function(n,s){return o.sphericalToCartesian(n.expression.evaluate(s))},It.prototype.interpolate=function(n,s,a){return{x:o.number(n.x,s.x,a),y:o.number(n.y,s.y,a),z:o.number(n.z,s.z,a)}};var At=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new It,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Tr=function(n){function s(a){n.call(this),this._transitionable=new o.Transitionable(At),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,c){if(c===void 0&&(c={}),!this._validate(o.validateLight,a,c))for(var m in a){var E=a[m];o.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),E):this._transitionable.setValue(m,E)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,c,m){return(!m||m.validate!==!1)&&o.emitValidationErrors(this,a.call(o.validateStyle,o.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},s}(o.Evented),Vt=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Vt.prototype.getDash=function(n,s){var a=n.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(n,s)),this.dashEntry[a]},Vt.prototype.getDashRanges=function(n,s,a){var c=[],m=n.length%2==1?-n[n.length-1]*a:0,E=n[0]*a,k=!0;c.push({left:m,right:E,isDash:k,zeroLength:n[0]===0});for(var A=n[0],B=1;B<n.length;B++){var Z=n[B];c.push({left:m=A*a,right:E=(A+=Z)*a,isDash:k=!k,zeroLength:Z===0})}return c},Vt.prototype.addRoundDash=function(n,s,a){for(var c=s/2,m=-a;m<=a;m++)for(var E=this.width*(this.nextRow+a+m),k=0,A=n[k],B=0;B<this.width;B++){B/A.right>1&&(A=n[++k]);var Z=Math.abs(B-A.left),Y=Math.abs(B-A.right),Q=Math.min(Z,Y),$=void 0,ce=m/a*(c+1);if(A.isDash){var ae=c-Math.abs(ce);$=Math.sqrt(Q*Q+ae*ae)}else $=c-Math.sqrt(Q*Q+ce*ce);this.data[E+B]=Math.max(0,Math.min(255,$+128))}},Vt.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var a=n[s],c=n[s+1];a.zeroLength?n.splice(s,1):c&&c.isDash===a.isDash&&(c.left=a.left,n.splice(s,1))}var m=n[0],E=n[n.length-1];m.isDash===E.isDash&&(m.left=E.left-this.width,E.right=m.right+this.width);for(var k=this.width*this.nextRow,A=0,B=n[A],Z=0;Z<this.width;Z++){Z/B.right>1&&(B=n[++A]);var Y=Math.abs(Z-B.left),Q=Math.abs(Z-B.right),$=Math.min(Y,Q);this.data[k+Z]=Math.max(0,Math.min(255,(B.isDash?$:-$)+128))}},Vt.prototype.addDash=function(n,s){var a=s?7:0,c=2*a+1;if(this.nextRow+c>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var m=0,E=0;E<n.length;E++)m+=n[E];if(m!==0){var k=this.width/m,A=this.getDashRanges(n,this.width,k);s?this.addRoundDash(A,k,a):this.addRegularDash(A)}var B={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:m};return this.nextRow+=c,this.dirty=!0,B},Vt.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var Ir=function n(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var c=this.workerPool.acquire(this.id),m=0;m<c.length;m++){var E=new n.Actor(c[m],a,this.id);E.name="Worker "+m,this.actors.push(E)}};function rt(n,s,a){var c=function(m,E){if(m)return a(m);if(E){var k=o.pick(o.extend(E,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(k.vectorLayers=E.vector_layers,k.vectorLayerIds=k.vectorLayers.map(function(A){return A.id})),k.tiles=s.canonicalizeTileset(k,n.url),a(null,k)}};return n.url?o.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),o.ResourceType.Source),c):o.browser.frame(function(){return c(null,n)})}Ir.prototype.broadcast=function(n,s,a){o.asyncAll(this.actors,function(c,m){c.send(n,s,m)},a=a||function(){})},Ir.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ir.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},Ir.Actor=o.Actor;var lr=function(n,s,a){this.bounds=o.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=a||24};lr.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},lr.prototype.contains=function(n){var s=Math.pow(2,n.z),a=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*s),E=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=a&&n.x<m&&n.y>=c&&n.y<E};var ri=function(n){function s(a,c,m,E){if(n.call(this),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(c,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=rt(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new lr(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles,a.map._requestManager._customAccessToken),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var c=this;return this.setSourceProperty(function(){c._options.tiles=a}),this},s.prototype.setUrl=function(a){var c=this;return this.setSourceProperty(function(){c.url=a,c._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(m,o.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function k(A,B){return delete a.request,a.aborted?c(null):A&&A.status!==404?c(A):(B&&B.resourceTiming&&(a.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&a.setExpiryData(B),a.loadVectorData(B,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",E,k.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",E,k.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(o.Evented),ci=function(n){function s(a,c,m,E){n.call(this),this.id=a,this.dispatcher=m,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},c),o.extend(this,o.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=rt(this._options,this.map._requestManager,function(c,m){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new o.ErrorEvent(c)):m&&(o.extend(a,m),m.bounds&&(a.tileBounds=new lr(m.bounds,a.minzoom,a.maxzoom)),o.postTurnstileEvent(m.tiles),o.postMapLoadEvent(m.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return o.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,c){var m=this,E=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=o.getImage(this.map._requestManager.transformRequest(E,o.ResourceType.Tile),function(k,A){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(k)a.state="errored",c(k);else if(A){m.map._refreshExpiredTiles&&a.setExpiryData(A),delete A.cacheControl,delete A.expires;var B=m.map.painter.context,Z=B.gl;a.texture=m.map.painter.getTileTexture(A.width),a.texture?a.texture.update(A,{useMipmap:!0}):(a.texture=new o.Texture(B,A,Z.RGBA,{useMipmap:!0}),a.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),B.extTextureFilterAnisotropic&&Z.texParameterf(Z.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax)),a.state="loaded",o.cacheEntryPossiblyAdded(m.dispatcher),c(null)}})},s.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request),c()},s.prototype.unloadTile=function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture),c()},s.prototype.hasTransition=function(){return!1},s}(o.Evented),Er=function(n){function s(a,c,m,E){n.call(this,a,c,m,E),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,c){var m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function E(k,A){k&&(a.state="errored",c(k)),A&&(a.dem=A,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}a.request=o.getImage(this.map._requestManager.transformRequest(m,o.ResourceType.Tile),function(k,A){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(k)a.state="errored",c(k);else if(A){this.map._refreshExpiredTiles&&a.setExpiryData(A),delete A.cacheControl,delete A.expires;var B=o.window.ImageBitmap&&A instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?A:o.browser.getImageData(A,1),Z={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:B,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",Z,E.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var c=a.canonical,m=Math.pow(2,c.z),E=(c.x-1+m)%m,k=c.x===0?a.wrap-1:a.wrap,A=(c.x+1+m)%m,B=c.x+1===m?a.wrap+1:a.wrap,Z={};return Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,E,c.y).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,E,c.y-1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<m&&(Z[new o.OverscaledTileID(a.overscaledZ,k,c.z,E,c.y+1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},Z[new o.OverscaledTileID(a.overscaledZ,B,c.z,A,c.y+1).key]={backfilled:!1}),Z},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(ci),vt=function(n){function s(a,c,m,E){n.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(E),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var k=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*k,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*k,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius||50)*k,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)a.fire(new o.ErrorEvent(c));else{var m={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(m.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new o.Event("data",m))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)c.fire(new o.ErrorEvent(m));else{var E={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(E.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new o.Event("data",E))}}),this},s.prototype.getClusterExpansionZoom=function(a,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c),this},s.prototype.getClusterChildren=function(a,c){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},c),this},s.prototype.getClusterLeaves=function(a,c,m,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:m},E),this},s.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var m=o.extend({},this.workerOptions),E=this._data;typeof E=="string"?(m.request=this.map._requestManager.transformRequest(o.browser.resolveURL(E),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(E),this.actor.send(this.type+".loadData",m,function(k,A){c._removed||A&&A.abandoned||(c._loaded=!0,A&&A.resourceTiming&&A.resourceTiming[c.id]&&(c._resourceTiming=A.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:m.source},null),a(k))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,c){var m=this,E=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(E,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(k,A){return delete a.request,a.unloadVectorData(),a.aborted?c(null):k?c(k):(a.loadVectorData(A,m.map.painter,E==="reloadTile"),c(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(o.Evented),nt=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),fr=function(n){function s(a,c,m,E){n.call(this),this.id=a,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(a,c){var m=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(E,k){m._loaded=!0,E?m.fire(new o.ErrorEvent(E)):k&&(m.image=k,a&&(m.coordinates=a),c&&c(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;var m=a.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(k){for(var A=1/0,B=1/0,Z=-1/0,Y=-1/0,Q=0,$=k;Q<$.length;Q+=1){var ce=$[Q];A=Math.min(A,ce.x),B=Math.min(B,ce.y),Z=Math.max(Z,ce.x),Y=Math.max(Y,ce.y)}var ae=Math.max(Z-A,Y-B),de=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),ne=Math.pow(2,de);return new o.CanonicalTileID(de,Math.floor((A+Z)/2*ne),Math.floor((B+Y)/2*ne))}(m),this.minzoom=this.maxzoom=this.tileID.z;var E=m.map(function(k){return c.tileID.getTilePoint(k)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(E[0].x,E[0].y,0,0),this._boundsArray.emplaceBack(E[1].x,E[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(E[3].x,E[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(E[2].x,E[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(o.Evented),On=function(n){function s(a,c,m,E){n.call(this,a,c,m,E),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];for(var m=0,E=c.urls;m<E.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(E[m],o.ResourceType.Source).url);o.getVideo(this.urls,function(k,A){a._loaded=!0,k?a.fire(new o.ErrorEvent(k)):A&&(a.video=A,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,c=a.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var E=this.tiles[m];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(fr),sa=function(n){function s(a,c,m,E){n.call(this,a,c,m,E),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(k){return!Array.isArray(k)||k.length!==2||k.some(function(A){return typeof A!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,m=c.gl;for(var E in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,nt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var k=this.tiles[E];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var m=c[a];if(isNaN(m)||m<=0)return!0}return!1},s}(fr),Ti={vector:ri,raster:ci,"raster-dem":Er,geojson:vt,video:On,image:fr,canvas:sa};function vn(n,s){var a=o.identity([]);return o.translate(a,a,[1,1,0]),o.scale(a,a,[.5*n.width,.5*n.height,1]),o.multiply(a,a,n.calculatePosMatrix(s.toUnwrapped()))}function oi(n,s,a,c,m,E){var k=function(de,ne,me){if(de)for(var ge=0,Te=de;ge<Te.length;ge+=1){var Be=ne[Te[ge]];if(Be&&Be.source===me&&Be.type==="fill-extrusion")return!0}else for(var Ce in ne){var Oe=ne[Ce];if(Oe.source===me&&Oe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),A=E.maxPitchScaleFactor(),B=n.tilesIn(c,A,k);B.sort(Sa);for(var Z=[],Y=0,Q=B;Y<Q.length;Y+=1){var $=Q[Y];Z.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(s,a,n._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,m,E,A,vn(n.transform,$.tileID))})}var ce=function(de){for(var ne={},me={},ge=0,Te=de;ge<Te.length;ge+=1){var Be=Te[ge],Ce=Be.queryResults,Oe=Be.wrappedTileID,je=me[Oe]=me[Oe]||{};for(var He in Ce)for(var Xe=Ce[He],ut=je[He]=je[He]||{},St=ne[He]=ne[He]||[],xt=0,kt=Xe;xt<kt.length;xt+=1){var ur=kt[xt];ut[ur.featureIndex]||(ut[ur.featureIndex]=!0,St.push(ur))}}return ne}(Z);for(var ae in ce)ce[ae].forEach(function(de){var ne=de.feature,me=n.getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=me});return ce}function Sa(n,s){var a=n.tileID,c=s.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}var gr=function(n,s){this.max=n,this.onRemove=s,this.reset()};gr.prototype.reset=function(){for(var n in this.data)for(var s=0,a=this.data[n];s<a.length;s+=1){var c=a[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},gr.prototype.add=function(n,s,a){var c=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var E={value:s,timeout:void 0};if(a!==void 0&&(E.timeout=setTimeout(function(){c.remove(n,E)},a)),this.data[m].push(E),this.order.push(m),this.order.length>this.max){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},gr.prototype.has=function(n){return n.wrapped().key in this.data},gr.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},gr.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},gr.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},gr.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},gr.prototype.remove=function(n,s){if(!this.has(n))return this;var a=n.wrapped().key,c=s===void 0?0:this.data[a].indexOf(s),m=this.data[a][c];return this.data[a].splice(c,1),m.timeout&&clearTimeout(m.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this},gr.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},gr.prototype.filter=function(n){var s=[];for(var a in this.data)for(var c=0,m=this.data[a];c<m.length;c+=1){var E=m[c];n(E.value)||s.push(E)}for(var k=0,A=s;k<A.length;k+=1){var B=A[k];this.remove(B.value.tileID,B)}};var Vn=function(n,s,a){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=Boolean(a),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Vn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Vn.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Vn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Qa={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Vr=function(n,s,a,c){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Vr.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Vr.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},Vr.prototype.enableAttributes=function(n,s){for(var a=0;a<this.attributes.length;a++){var c=s.attributes[this.attributes[a].name];c!==void 0&&n.enableVertexAttribArray(c)}},Vr.prototype.setVertexAttribPointers=function(n,s,a){for(var c=0;c<this.attributes.length;c++){var m=this.attributes[c],E=s.attributes[m.name];E!==void 0&&n.vertexAttribPointer(E,m.components,n[Qa[m.type]],!1,this.itemSize,m.offset+this.itemSize*(a||0))}},Vr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Lt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Lt.prototype.get=function(){return this.current},Lt.prototype.set=function(n){},Lt.prototype.getDefault=function(){return this.default},Lt.prototype.setDefault=function(){this.set(this.default)};var Wi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Lt),Bi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(Lt),hi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(Lt),ho=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Lt),Jt=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(Lt),Ei=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(Lt),Mr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(Lt),di=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(Lt),mi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(Lt),Ar=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Lt),yi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(Lt),un=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(Lt),Kr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}},s}(Lt),hr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(Lt),Fr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return o.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(Lt),Yn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(Lt),Fn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}},s}(Lt),La=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(Lt),Qo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(Lt),pi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(Lt),cn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(Lt),gn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(Lt),po=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(Lt),la=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Lt),ml=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(Lt),$o=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(Lt),Nn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(Lt),_n=function(n){function s(a){n.call(this,a),this.vao=a.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(Lt),ua=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(Lt),Jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(Lt),ca=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(Lt),Nr=function(n){function s(a,c){n.call(this,a),this.context=a,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Lt),N=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(Nr),G=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Nr),X=function(n,s,a,c){this.context=n,this.width=s,this.height=a;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new N(n,m),c&&(this.depthAttachment=new G(n,m))};X.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&n.deleteRenderbuffer(a)}n.deleteFramebuffer(this.framebuffer)};var re=function(n,s,a){this.func=n,this.mask=s,this.range=a};re.ReadOnly=!1,re.ReadWrite=!0,re.disabled=new re(519,re.ReadOnly,[0,1]);var ue=function(n,s,a,c,m,E){this.test=n,this.ref=s,this.mask=a,this.fail=c,this.depthFail=m,this.pass=E};ue.disabled=new ue({func:519,mask:0},0,0,7680,7680,7680);var ve=function(n,s,a){this.blendFunction=n,this.blendColor=s,this.mask=a};ve.disabled=new ve(ve.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),ve.unblended=new ve(ve.Replace,o.Color.transparent,[!0,!0,!0,!0]),ve.alphaBlended=new ve([1,771],o.Color.transparent,[!0,!0,!0,!0]);var xe=function(n,s,a){this.enable=n,this.mode=s,this.frontFace=a};xe.disabled=new xe(!1,1029,2305),xe.backCCW=new xe(!0,1029,2305);var H=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Wi(this),this.clearDepth=new Bi(this),this.clearStencil=new hi(this),this.colorMask=new ho(this),this.depthMask=new Jt(this),this.stencilMask=new Ei(this),this.stencilFunc=new Mr(this),this.stencilOp=new di(this),this.stencilTest=new mi(this),this.depthRange=new Ar(this),this.depthTest=new yi(this),this.depthFunc=new un(this),this.blend=new Kr(this),this.blendFunc=new hr(this),this.blendColor=new Fr(this),this.blendEquation=new Yn(this),this.cullFace=new Fn(this),this.cullFaceSide=new La(this),this.frontFace=new Qo(this),this.program=new pi(this),this.activeTexture=new cn(this),this.viewport=new gn(this),this.bindFramebuffer=new po(this),this.bindRenderbuffer=new la(this),this.bindTexture=new ml(this),this.bindVertexBuffer=new $o(this),this.bindElementBuffer=new Nn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new _n(this),this.pixelStoreUnpack=new ua(this),this.pixelStoreUnpackPremultiplyAlpha=new Jn(this),this.pixelStoreUnpackFlipY=new ca(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};H.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},H.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},H.prototype.createIndexBuffer=function(n,s){return new Vn(this,n,s)},H.prototype.createVertexBuffer=function(n,s,a){return new Vr(this,n,s,a)},H.prototype.createRenderbuffer=function(n,s,a){var c=this.gl,m=c.createRenderbuffer();return this.bindRenderbuffer.set(m),c.renderbufferStorage(c.RENDERBUFFER,n,s,a),this.bindRenderbuffer.set(null),m},H.prototype.createFramebuffer=function(n,s,a){return new X(this,n,s,a)},H.prototype.clear=function(n){var s=n.color,a=n.depth,c=this.gl,m=0;s&&(m|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c.clear(m)},H.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},H.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},H.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},H.prototype.setColorMode=function(n){o.deepEqual(n.blendFunction,ve.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},H.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var oe=function(n){function s(a,c,m){var E=this;n.call(this),this.id=a,this.dispatcher=m,this.on("data",function(k){k.dataType==="source"&&k.sourceDataType==="metadata"&&(E._sourceLoaded=!0),E._sourceLoaded&&!E._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(E.reload(),E.transform&&E.update(E.transform))}),this.on("error",function(){E._sourceErrored=!0}),this._source=function(k,A,B,Z){var Y=new Ti[A.type](k,A,B,Z);if(Y.id!==k)throw new Error("Expected Source id to be "+k+" instead of "+Y.id);return o.bindAll(["load","abort","unload","serialize","prepare"],Y),Y}(a,c,m,this),this._tiles={},this._cache=new gr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[c];m.upload(a),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return o.values(this._tiles).map(function(a){return a.tileID}).sort(Se).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var c=this,m=[];for(var E in this._tiles)this._isIdRenderable(E,a)&&m.push(this._tiles[E]);return a?m.sort(function(k,A){var B=k.tileID,Z=A.tileID,Y=new o.Point(B.canonical.x,B.canonical.y)._rotate(c.transform.angle),Q=new o.Point(Z.canonical.x,Z.canonical.y)._rotate(c.transform.angle);return B.overscaledZ-Z.overscaledZ||Q.y-Y.y||Q.x-Y.x}).map(function(k){return k.tileID.key}):m.map(function(k){return k.tileID}).sort(Se).map(function(k){return k.key})},s.prototype.hasRenderableParent=function(a){var c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,c){var m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,a,c)))},s.prototype._tileLoaded=function(a,c,m,E){if(E)return a.state="errored",void(E.status!==404?this._source.fire(new o.ErrorEvent(E,{tile:a})):this.update(this.transform));a.timeAdded=o.browser.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var c=this.getRenderableIds(),m=0;m<c.length;m++){var E=c[m];if(a.neighboringTiles&&a.neighboringTiles[E]){var k=this.getTileByID(E);A(a,k),A(k,a)}}function A(B,Z){B.needsHillshadePrepare=!0;var Y=Z.tileID.canonical.x-B.tileID.canonical.x,Q=Z.tileID.canonical.y-B.tileID.canonical.y,$=Math.pow(2,B.tileID.canonical.z),ce=Z.tileID.key;Y===0&&Q===0||Math.abs(Q)>1||(Math.abs(Y)>1&&(Math.abs(Y+$)===1?Y+=$:Math.abs(Y-$)===1&&(Y-=$)),Z.dem&&B.dem&&(B.dem.backfillBorder(Z.dem,Y,Q),B.neighboringTiles&&B.neighboringTiles[ce]&&(B.neighboringTiles[ce].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,c,m,E){for(var k in this._tiles){var A=this._tiles[k];if(!(E[k]||!A.hasData()||A.tileID.overscaledZ<=c||A.tileID.overscaledZ>m)){for(var B=A.tileID;A&&A.tileID.overscaledZ>c+1;){var Z=A.tileID.scaledTo(A.tileID.overscaledZ-1);(A=this._tiles[Z.key])&&A.hasData()&&(B=Z)}for(var Y=B;Y.overscaledZ>c;)if(a[(Y=Y.scaledTo(Y.overscaledZ-1)).key]){E[B.key]=B;break}}}},s.prototype.findLoadedParent=function(a,c){if(a.key in this._loadedParentTiles){var m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=c?m:null}for(var E=a.overscaledZ-1;E>=c;E--){var k=a.scaledTo(E),A=this._getLoadedTile(k);if(A)return A}},s.prototype._getLoadedTile=function(a){var c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var c=Math.ceil(a.width/this._source.tileSize)+1,m=Math.ceil(a.height/this._source.tileSize)+1,E=Math.floor(c*m*5),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(k)},s.prototype.handleWrapJump=function(a){var c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){var m={};for(var E in this._tiles){var k=this._tiles[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),m[k.tileID.key]=k}for(var A in this._tiles=m,this._timers)clearTimeout(this._timers[A]),delete this._timers[A];for(var B in this._tiles)this._setTileReloadTimer(B,this._tiles[B])}},s.prototype.update=function(a){var c=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(je){return new o.OverscaledTileID(je.canonical.z,je.wrap,je.canonical.z,je.canonical.x,je.canonical.y)}):(m=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(je){return c._source.hasTile(je)}))):m=[];var E=a.coveringZoomLevel(this._source),k=Math.max(E-s.maxOverzooming,this._source.minzoom),A=Math.max(E+s.maxUnderzooming,this._source.minzoom),B=this._updateRetainedTiles(m,E);if(Ne(this._source.type)){for(var Z={},Y={},Q=0,$=Object.keys(B);Q<$.length;Q+=1){var ce=$[Q],ae=B[ce],de=this._tiles[ce];if(de&&!(de.fadeEndTime&&de.fadeEndTime<=o.browser.now())){var ne=this.findLoadedParent(ae,k);ne&&(this._addTile(ne.tileID),Z[ne.tileID.key]=ne.tileID),Y[ce]=ae}}for(var me in this._retainLoadedChildren(Y,E,A,B),Z)B[me]||(this._coveredTiles[me]=!0,B[me]=Z[me])}for(var ge in B)this._tiles[ge].clearFadeHold();for(var Te=0,Be=o.keysDifference(this._tiles,B);Te<Be.length;Te+=1){var Ce=Be[Te],Oe=this._tiles[Ce];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(Ce)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,c){for(var m={},E={},k=Math.max(c-s.maxOverzooming,this._source.minzoom),A=Math.max(c+s.maxUnderzooming,this._source.minzoom),B={},Z=0,Y=a;Z<Y.length;Z+=1){var Q=Y[Z],$=this._addTile(Q);m[Q.key]=Q,$.hasData()||c<this._source.maxzoom&&(B[Q.key]=Q)}this._retainLoadedChildren(B,c,A,m);for(var ce=0,ae=a;ce<ae.length;ce+=1){var de=ae[ce],ne=this._tiles[de.key];if(!ne.hasData()){if(c+1>this._source.maxzoom){var me=de.children(this._source.maxzoom)[0],ge=this.getTile(me);if(ge&&ge.hasData()){m[me.key]=me;continue}}else{var Te=de.children(this._source.maxzoom);if(m[Te[0].key]&&m[Te[1].key]&&m[Te[2].key]&&m[Te[3].key])continue}for(var Be=ne.wasRequested(),Ce=de.overscaledZ-1;Ce>=k;--Ce){var Oe=de.scaledTo(Ce);if(E[Oe.key]||(E[Oe.key]=!0,!(ne=this.getTile(Oe))&&Be&&(ne=this._addTile(Oe)),ne&&(m[Oe.key]=Oe,Be=ne.wasRequested(),ne.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var c=[],m=void 0,E=this._tiles[a].tileID;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){m=this._loadedParentTiles[E.key];break}c.push(E.key);var k=E.scaledTo(E.overscaledZ-1);if(m=this._getLoadedTile(k))break;E=k}for(var A=0,B=c;A<B.length;A+=1)this._loadedParentTiles[B[A]]=m}},s.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var m=Boolean(c);return m||(c=new o.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,m||this._source.fire(new o.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(a,c){var m=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var E=c.getExpiryTimeout();E&&(this._timers[a]=setTimeout(function(){m._reloadTile(a,"expired"),delete m._timers[a]},E))},s.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,c,m){var E=this,k=[],A=this.transform;if(!A)return k;for(var B=m?A.getCameraQueryGeometry(a):a,Z=a.map(function(Ce){return A.pointCoordinate(Ce)}),Y=B.map(function(Ce){return A.pointCoordinate(Ce)}),Q=this.getIds(),$=1/0,ce=1/0,ae=-1/0,de=-1/0,ne=0,me=Y;ne<me.length;ne+=1){var ge=me[ne];$=Math.min($,ge.x),ce=Math.min(ce,ge.y),ae=Math.max(ae,ge.x),de=Math.max(de,ge.y)}for(var Te=function(Ce){var Oe=E._tiles[Q[Ce]];if(!Oe.holdingForFade()){var je=Oe.tileID,He=Math.pow(2,A.zoom-Oe.tileID.overscaledZ),Xe=c*Oe.queryPadding*o.EXTENT/Oe.tileSize/He,ut=[je.getTilePoint(new o.MercatorCoordinate($,ce)),je.getTilePoint(new o.MercatorCoordinate(ae,de))];if(ut[0].x-Xe<o.EXTENT&&ut[0].y-Xe<o.EXTENT&&ut[1].x+Xe>=0&&ut[1].y+Xe>=0){var St=Z.map(function(kt){return je.getTilePoint(kt)}),xt=Y.map(function(kt){return je.getTilePoint(kt)});k.push({tile:Oe,tileID:je,queryGeometry:St,cameraQueryGeometry:xt,scale:He})}}},Be=0;Be<Q.length;Be++)Te(Be);return k},s.prototype.getVisibleCoordinates=function(a){for(var c=this,m=this.getRenderableIds(a).map(function(B){return c._tiles[B].tileID}),E=0,k=m;E<k.length;E+=1){var A=k[E];A.posMatrix=this.transform.calculatePosMatrix(A.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ne(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=o.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,c,m){this._state.updateState(a=a||"_geojsonTileLayer",c,m)},s.prototype.removeFeatureState=function(a,c,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,m)},s.prototype.getFeatureState=function(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(a,c,m){var E=this._tiles[a];E&&E.setDependencies(c,m)},s.prototype.reloadTilesForDependencies=function(a,c){for(var m in this._tiles)this._tiles[m].hasDependency(a,c)&&this._reloadTile(m,"reloading");this._cache.filter(function(E){return!E.hasDependency(a,c)})},s}(o.Evented);function Se(n,s){var a=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-a||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ne(n){return n==="raster"||n==="image"||n==="video"}function Ge(){return new o.window.Worker(Ia.workerUrl)}oe.maxOverzooming=10,oe.maxUnderzooming=3;var Le="mapboxgl_preloaded_worker_pool",qe=function(){this.active={}};qe.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new Ge);return this.active[n]=!0,this.workers.slice()},qe.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},qe.prototype.isPreloaded=function(){return!!this.active[Le]},qe.prototype.numActive=function(){return Object.keys(this.active).length};var ht,at=Math.floor(o.browser.hardwareConcurrency/2);function Re(){return ht||(ht=new qe),ht}function tt(n,s){var a={};for(var c in n)c!=="ref"&&(a[c]=n[c]);return o.refProperties.forEach(function(m){m in s&&(a[m]=s[m])}),a}function We(n){n=n.slice();for(var s=Object.create(null),a=0;a<n.length;a++)s[n[a].id]=n[a];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=tt(n[c],s[n[c].ref]));return n}qe.workerCount=Math.max(Math.min(at,6),1);var $e={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Nt(n,s,a){a.push({command:$e.addSource,args:[n,s[n]]})}function Ze(n,s,a){s.push({command:$e.removeSource,args:[n]}),a[n]=!0}function Gt(n,s,a,c){Ze(n,a,c),Nt(n,s,a)}function or(n,s,a){var c;for(c in n[a])if(n[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;for(c in s[a])if(s[a].hasOwnProperty(c)&&c!=="data"&&!o.deepEqual(n[a][c],s[a][c]))return!1;return!0}function Ct(n,s,a,c,m,E){var k;for(k in s=s||{},n=n||{})n.hasOwnProperty(k)&&(o.deepEqual(n[k],s[k])||a.push({command:E,args:[c,k,s[k],m]}));for(k in s)s.hasOwnProperty(k)&&!n.hasOwnProperty(k)&&(o.deepEqual(n[k],s[k])||a.push({command:E,args:[c,k,s[k],m]}))}function tr(n){return n.id}function er(n,s){return n[s.id]=s,n}var Ai=function(n,s){this.reset(n,s)};Ai.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ai.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=o.clamp(n,0,1);for(var s=1,a=this._distances[s],c=n*this.paddedLength+this.padding;a<c&&s<this._distances.length;)a=this._distances[++s];var m=s-1,E=this._distances[m],k=a-E,A=k>0?(c-E)/k:0;return this.points[m].mult(1-A).add(this.points[s].mult(A))};var rr=function(n,s,a){var c=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/a),this.yCellCount=Math.ceil(s/a);for(var E=0;E<this.xCellCount*this.yCellCount;E++)c.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function dr(n,s,a,c,m){var E=o.create();return s?(o.scale(E,E,[1/m,1/m,1]),a||o.rotateZ(E,E,c.angle)):o.multiply(E,c.labelPlaneMatrix,n),E}function pr(n,s,a,c,m){if(s){var E=o.clone(n);return o.scale(E,E,[m,m,1]),a||o.rotateZ(E,E,-c.angle),E}return c.glCoordMatrix}function Kt(n,s){var a=[n.x,n.y,0,1];Hr(a,a,s);var c=a[3];return{point:new o.Point(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function ir(n,s){return .5+n/s*.5}function Oi(n,s){var a=n[0]/n[3],c=n[1]/n[3];return a>=-s[0]&&a<=s[0]&&c>=-s[1]&&c<=s[1]}function ha(n,s,a,c,m,E,k,A){var B=c?n.textSizeData:n.iconSizeData,Z=o.evaluateSizeForZoom(B,a.transform.zoom),Y=[256/a.width*2+1,256/a.height*2+1],Q=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;Q.clear();for(var $=n.lineVertexArray,ce=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,ae=a.transform.width/a.transform.height,de=!1,ne=0;ne<ce.length;ne++){var me=ce.get(ne);if(me.hidden||me.writingMode===o.WritingMode.vertical&&!de)Vi(me.numGlyphs,Q);else{de=!1;var ge=[me.anchorX,me.anchorY,0,1];if(o.transformMat4(ge,ge,s),Oi(ge,Y)){var Te=ir(a.transform.cameraToCenterDistance,ge[3]),Be=o.evaluateSizeForFeature(B,Z,me),Ce=k?Be/Te:Be*Te,Oe=new o.Point(me.anchorX,me.anchorY),je=Kt(Oe,m).point,He={},Xe=bn(me,Ce,!1,A,s,m,E,n.glyphOffsetArray,$,Q,je,Oe,He,ae);de=Xe.useVertical,(Xe.notEnoughRoom||de||Xe.needsFlipping&&bn(me,Ce,!0,A,s,m,E,n.glyphOffsetArray,$,Q,je,Oe,He,ae).notEnoughRoom)&&Vi(me.numGlyphs,Q)}else Vi(me.numGlyphs,Q)}}c?n.text.dynamicLayoutVertexBuffer.updateData(Q):n.icon.dynamicLayoutVertexBuffer.updateData(Q)}function vi(n,s,a,c,m,E,k,A,B,Z,Y){var Q=A.glyphStartIndex+A.numGlyphs,$=A.lineStartIndex,ce=A.lineStartIndex+A.lineLength,ae=s.getoffsetX(A.glyphStartIndex),de=s.getoffsetX(Q-1),ne=mr(n*ae,a,c,m,E,k,A.segment,$,ce,B,Z,Y);if(!ne)return null;var me=mr(n*de,a,c,m,E,k,A.segment,$,ce,B,Z,Y);return me?{first:ne,last:me}:null}function Yi(n,s,a,c){return n===o.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*c?{useVertical:!0}:(n===o.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function bn(n,s,a,c,m,E,k,A,B,Z,Y,Q,$,ce){var ae,de=s/24,ne=n.lineOffsetX*de,me=n.lineOffsetY*de;if(n.numGlyphs>1){var ge=n.glyphStartIndex+n.numGlyphs,Te=n.lineStartIndex,Be=n.lineStartIndex+n.lineLength,Ce=vi(de,A,ne,me,a,Y,Q,n,B,E,$);if(!Ce)return{notEnoughRoom:!0};var Oe=Kt(Ce.first.point,k).point,je=Kt(Ce.last.point,k).point;if(c&&!a){var He=Yi(n.writingMode,Oe,je,ce);if(He)return He}ae=[Ce.first];for(var Xe=n.glyphStartIndex+1;Xe<ge-1;Xe++)ae.push(mr(de*A.getoffsetX(Xe),ne,me,a,Y,Q,n.segment,Te,Be,B,E,$));ae.push(Ce.last)}else{if(c&&!a){var ut=Kt(Q,m).point,St=n.lineStartIndex+n.segment+1,xt=new o.Point(B.getx(St),B.gety(St)),kt=Kt(xt,m),ur=kt.signedDistanceFromCamera>0?kt.point:Ji(Q,xt,ut,1,m),ot=Yi(n.writingMode,ut,ur,ce);if(ot)return ot}var zt=mr(de*A.getoffsetX(n.glyphStartIndex),ne,me,a,Y,Q,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,B,E,$);if(!zt)return{notEnoughRoom:!0};ae=[zt]}for(var Rt=0,Pt=ae;Rt<Pt.length;Rt+=1){var Dt=Pt[Rt];o.addDynamicAttributes(Z,Dt.point,Dt.angle)}return{}}function Ji(n,s,a,c,m){var E=Kt(n.add(n.sub(s)._unit()),m).point,k=a.sub(E);return a.add(k._mult(c/k.mag()))}function mr(n,s,a,c,m,E,k,A,B,Z,Y,Q){var $=c?n-s:n+s,ce=$>0?1:-1,ae=0;c&&(ce*=-1,ae=Math.PI),ce<0&&(ae+=Math.PI);for(var de=ce>0?A+k:A+k+1,ne=m,me=m,ge=0,Te=0,Be=Math.abs($),Ce=[];ge+Te<=Be;){if((de+=ce)<A||de>=B)return null;if(me=ne,Ce.push(ne),(ne=Q[de])===void 0){var Oe=new o.Point(Z.getx(de),Z.gety(de)),je=Kt(Oe,Y);if(je.signedDistanceFromCamera>0)ne=Q[de]=je.point;else{var He=de-ce;ne=Ji(ge===0?E:new o.Point(Z.getx(He),Z.gety(He)),Oe,me,Be-ge+1,Y)}}ge+=Te,Te=me.dist(ne)}var Xe=(Be-ge)/Te,ut=ne.sub(me),St=ut.mult(Xe)._add(me);St._add(ut._unit()._perp()._mult(a*ce));var xt=ae+Math.atan2(ne.y-me.y,ne.x-me.x);return Ce.push(St),{point:St,angle:xt,path:Ce}}rr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},rr.prototype.insert=function(n,s,a,c,m){this._forEachCell(s,a,c,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(m)},rr.prototype.insertCircle=function(n,s,a,c){this._forEachCell(s-c,a-c,s+c,a+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(a),this.circles.push(c)},rr.prototype._insertBoxCell=function(n,s,a,c,m,E){this.boxCells[m].push(E)},rr.prototype._insertCircleCell=function(n,s,a,c,m,E){this.circleCells[m].push(E)},rr.prototype._query=function(n,s,a,c,m,E){if(a<0||n>this.width||c<0||s>this.height)return!m&&[];var k=[];if(n<=0&&s<=0&&this.width<=a&&this.height<=c){if(m)return!0;for(var A=0;A<this.boxKeys.length;A++)k.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(var B=0;B<this.circleKeys.length;B++){var Z=this.circles[3*B],Y=this.circles[3*B+1],Q=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:Z-Q,y1:Y-Q,x2:Z+Q,y2:Y+Q})}return E?k.filter(E):k}return this._forEachCell(n,s,a,c,this._queryCell,k,{hitTest:m,seenUids:{box:{},circle:{}}},E),m?k.length>0:k},rr.prototype._queryCircle=function(n,s,a,c,m){var E=n-a,k=n+a,A=s-a,B=s+a;if(k<0||E>this.width||B<0||A>this.height)return!c&&[];var Z=[];return this._forEachCell(E,A,k,B,this._queryCellCircle,Z,{hitTest:c,circle:{x:n,y:s,radius:a},seenUids:{box:{},circle:{}}},m),c?Z.length>0:Z},rr.prototype.query=function(n,s,a,c,m){return this._query(n,s,a,c,!1,m)},rr.prototype.hitTest=function(n,s,a,c,m){return this._query(n,s,a,c,!0,m)},rr.prototype.hitTestCircle=function(n,s,a,c){return this._queryCircle(n,s,a,!0,c)},rr.prototype._queryCell=function(n,s,a,c,m,E,k,A){var B=k.seenUids,Z=this.boxCells[m];if(Z!==null)for(var Y=this.bboxes,Q=0,$=Z;Q<$.length;Q+=1){var ce=$[Q];if(!B.box[ce]){B.box[ce]=!0;var ae=4*ce;if(n<=Y[ae+2]&&s<=Y[ae+3]&&a>=Y[ae+0]&&c>=Y[ae+1]&&(!A||A(this.boxKeys[ce]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ce],x1:Y[ae],y1:Y[ae+1],x2:Y[ae+2],y2:Y[ae+3]})}}}var de=this.circleCells[m];if(de!==null)for(var ne=this.circles,me=0,ge=de;me<ge.length;me+=1){var Te=ge[me];if(!B.circle[Te]){B.circle[Te]=!0;var Be=3*Te;if(this._circleAndRectCollide(ne[Be],ne[Be+1],ne[Be+2],n,s,a,c)&&(!A||A(this.circleKeys[Te]))){if(k.hitTest)return E.push(!0),!0;var Ce=ne[Be],Oe=ne[Be+1],je=ne[Be+2];E.push({key:this.circleKeys[Te],x1:Ce-je,y1:Oe-je,x2:Ce+je,y2:Oe+je})}}}},rr.prototype._queryCellCircle=function(n,s,a,c,m,E,k,A){var B=k.circle,Z=k.seenUids,Y=this.boxCells[m];if(Y!==null)for(var Q=this.bboxes,$=0,ce=Y;$<ce.length;$+=1){var ae=ce[$];if(!Z.box[ae]){Z.box[ae]=!0;var de=4*ae;if(this._circleAndRectCollide(B.x,B.y,B.radius,Q[de+0],Q[de+1],Q[de+2],Q[de+3])&&(!A||A(this.boxKeys[ae])))return E.push(!0),!0}}var ne=this.circleCells[m];if(ne!==null)for(var me=this.circles,ge=0,Te=ne;ge<Te.length;ge+=1){var Be=Te[ge];if(!Z.circle[Be]){Z.circle[Be]=!0;var Ce=3*Be;if(this._circlesCollide(me[Ce],me[Ce+1],me[Ce+2],B.x,B.y,B.radius)&&(!A||A(this.circleKeys[Be])))return E.push(!0),!0}}},rr.prototype._forEachCell=function(n,s,a,c,m,E,k,A){for(var B=this._convertToXCellCoord(n),Z=this._convertToYCellCoord(s),Y=this._convertToXCellCoord(a),Q=this._convertToYCellCoord(c),$=B;$<=Y;$++)for(var ce=Z;ce<=Q;ce++)if(m.call(this,n,s,a,c,this.xCellCount*ce+$,E,k,A))return},rr.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},rr.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},rr.prototype._circlesCollide=function(n,s,a,c,m,E){var k=c-n,A=m-s,B=a+E;return B*B>k*k+A*A},rr.prototype._circleAndRectCollide=function(n,s,a,c,m,E,k){var A=(E-c)/2,B=Math.abs(n-(c+A));if(B>A+a)return!1;var Z=(k-m)/2,Y=Math.abs(s-(m+Z));if(Y>Z+a)return!1;if(B<=A||Y<=Z)return!0;var Q=B-A,$=Y-Z;return Q*Q+$*$<=a*a};var Un=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Vi(n,s){for(var a=0;a<n;a++){var c=s.length;s.resize(c+4),s.float32.set(Un,3*c)}}function Hr(n,s,a){var c=s[0],m=s[1];return n[0]=a[0]*c+a[4]*m+a[12],n[1]=a[1]*c+a[5]*m+a[13],n[3]=a[3]*c+a[7]*m+a[15],n}var Qn=function(n,s,a){s===void 0&&(s=new rr(n.width+200,n.height+200,25)),a===void 0&&(a=new rr(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function zr(n,s,a){return s*(o.EXTENT/(n.tileSize*Math.pow(2,a-n.tileID.overscaledZ)))}Qn.prototype.placeCollisionBox=function(n,s,a,c,m){var E=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),k=a*E.perspectiveRatio,A=n.x1*k+E.point.x,B=n.y1*k+E.point.y,Z=n.x2*k+E.point.x,Y=n.y2*k+E.point.y;return!this.isInsideGrid(A,B,Z,Y)||!s&&this.grid.hitTest(A,B,Z,Y,m)?{box:[],offscreen:!1}:{box:[A,B,Z,Y],offscreen:this.isOffscreen(A,B,Z,Y)}},Qn.prototype.placeCollisionCircles=function(n,s,a,c,m,E,k,A,B,Z,Y,Q,$){var ce=[],ae=new o.Point(s.anchorX,s.anchorY),de=Kt(ae,E),ne=ir(this.transform.cameraToCenterDistance,de.signedDistanceFromCamera),me=(Z?m/ne:m*ne)/o.ONE_EM,ge=Kt(ae,k).point,Te=vi(me,c,s.lineOffsetX*me,s.lineOffsetY*me,!1,ge,ae,s,a,k,{}),Be=!1,Ce=!1,Oe=!0;if(Te){for(var je=.5*Q*ne+$,He=new o.Point(-100,-100),Xe=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new Ai,St=Te.first,xt=Te.last,kt=[],ur=St.path.length-1;ur>=1;ur--)kt.push(St.path[ur]);for(var ot=1;ot<xt.path.length;ot++)kt.push(xt.path[ot]);var zt=2.5*je;if(A){var Rt=kt.map(function(qa){return Kt(qa,A)});kt=Rt.some(function(qa){return qa.signedDistanceFromCamera<=0})?[]:Rt.map(function(qa){return qa.point})}var Pt=[];if(kt.length>0){for(var Dt=kt[0].clone(),Ht=kt[0].clone(),Tt=1;Tt<kt.length;Tt++)Dt.x=Math.min(Dt.x,kt[Tt].x),Dt.y=Math.min(Dt.y,kt[Tt].y),Ht.x=Math.max(Ht.x,kt[Tt].x),Ht.y=Math.max(Ht.y,kt[Tt].y);Pt=Dt.x>=He.x&&Ht.x<=Xe.x&&Dt.y>=He.y&&Ht.y<=Xe.y?[kt]:Ht.x<He.x||Dt.x>Xe.x||Ht.y<He.y||Dt.y>Xe.y?[]:o.clipLine([kt],He.x,He.y,Xe.x,Xe.y)}for(var Et=0,rn=Pt;Et<rn.length;Et+=1){var li;ut.reset(rn[Et],.25*je),li=ut.length<=.5*je?1:Math.ceil(ut.paddedLength/zt)+1;for(var kn=0;kn<li;kn++){var mn=kn/Math.max(li-1,1),Yr=ut.lerp(mn),ki=Yr.x+100,va=Yr.y+100;ce.push(ki,va,je,0);var ui=ki-je,ra=va-je,_i=ki+je,Rn=va+je;if(Oe=Oe&&this.isOffscreen(ui,ra,_i,Rn),Ce=Ce||this.isInsideGrid(ui,ra,_i,Rn),!n&&this.grid.hitTestCircle(ki,va,je,Y)&&(Be=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Be}}}}return{circles:!B&&Be||!Ce?[]:ce,offscreen:Oe,collisionDetected:Be}},Qn.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,c=1/0,m=-1/0,E=-1/0,k=0,A=n;k<A.length;k+=1){var B=A[k],Z=new o.Point(B.x+100,B.y+100);a=Math.min(a,Z.x),c=Math.min(c,Z.y),m=Math.max(m,Z.x),E=Math.max(E,Z.y),s.push(Z)}for(var Y={},Q={},$=0,ce=this.grid.query(a,c,m,E).concat(this.ignoredGrid.query(a,c,m,E));$<ce.length;$+=1){var ae=ce[$],de=ae.key;if(Y[de.bucketInstanceId]===void 0&&(Y[de.bucketInstanceId]={}),!Y[de.bucketInstanceId][de.featureIndex]){var ne=[new o.Point(ae.x1,ae.y1),new o.Point(ae.x2,ae.y1),new o.Point(ae.x2,ae.y2),new o.Point(ae.x1,ae.y2)];o.polygonIntersectsPolygon(s,ne)&&(Y[de.bucketInstanceId][de.featureIndex]=!0,Q[de.bucketInstanceId]===void 0&&(Q[de.bucketInstanceId]=[]),Q[de.bucketInstanceId].push(de.featureIndex))}}return Q},Qn.prototype.insertCollisionBox=function(n,s,a,c,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:c,collisionGroupID:m},n[0],n[1],n[2],n[3])},Qn.prototype.insertCollisionCircles=function(n,s,a,c,m){for(var E=s?this.ignoredGrid:this.grid,k={bucketInstanceId:a,featureIndex:c,collisionGroupID:m},A=0;A<n.length;A+=4)E.insertCircle(k,n[A],n[A+1],n[A+2])},Qn.prototype.projectAndGetPerspectiveRatio=function(n,s,a){var c=[s,a,0,1];return Hr(c,c,n),{point:new o.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},Qn.prototype.isOffscreen=function(n,s,a,c){return a<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},Qn.prototype.isInsideGrid=function(n,s,a,c){return a>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},Qn.prototype.getViewportMatrix=function(){var n=o.identity([]);return o.translate(n,n,[-100,-100,0]),n};var xn=function(n,s,a,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&a?1:0,this.placed=a};xn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var hn=function(n,s,a,c,m){this.text=new xn(n?n.text:null,s,a,m),this.icon=new xn(n?n.icon:null,s,c,m)};hn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Qu=function(n,s,a){this.text=n,this.icon=s,this.skipFade=a},Fi=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},fo=function(n,s,a,c,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=c,this.tileID=m},pn=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Xr(n,s,a,c,m){var E=o.getAnchorAlignment(n),k=-(E.horizontalAlign-.5)*s,A=-(E.verticalAlign-.5)*a,B=o.evaluateVariableOffset(n,c);return new o.Point(k+B[0]*m,A+B[1]*m)}function zi(n,s,a,c,m,E){var k=n.x1,A=n.x2,B=n.y1,Z=n.y2,Y=n.anchorPointX,Q=n.anchorPointY,$=new o.Point(s,a);return c&&$._rotate(m?E:-E),{x1:k+$.x,y1:B+$.y,x2:A+$.x,y2:Z+$.y,anchorPointX:Y,anchorPointY:Q}}pn.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[n]};var fi=function(n,s,a,c){this.transform=n.clone(),this.collisionIndex=new Qn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new pn(a),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function mo(n,s,a,c,m){n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0),n.emplaceBack(s?1:0,a?1:0,c||0,m||0)}fi.prototype.getBucketParts=function(n,s,a,c){var m=a.getBucket(s),E=a.latestFeatureIndex;if(m&&E&&s.id===m.layerIds[0]){var k=a.collisionBoxArray,A=m.layers[0].layout,B=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),Z=a.tileSize/o.EXTENT,Y=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),Q=A.get("text-pitch-alignment")==="map",$=A.get("text-rotation-alignment")==="map",ce=zr(a,1,this.transform.zoom),ae=dr(Y,Q,$,this.transform,ce),de=null;if(Q){var ne=pr(Y,Q,$,this.transform,ce);de=o.multiply([],this.transform.labelPlaneMatrix,ne)}this.retainedQueryData[m.bucketInstanceId]=new fo(m.bucketInstanceId,E,m.sourceLayerIndex,m.index,a.tileID);var me={bucket:m,layout:A,posMatrix:Y,textLabelPlaneMatrix:ae,labelToScreenMatrix:de,scale:B,textPixelRatio:Z,holdingForFade:a.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(c)for(var ge=0,Te=m.sortKeyRanges;ge<Te.length;ge+=1){var Be=Te[ge];n.push({sortKey:Be.sortKey,symbolInstanceStart:Be.symbolInstanceStart,symbolInstanceEnd:Be.symbolInstanceEnd,parameters:me})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:me})}},fi.prototype.attemptAnchorPlacement=function(n,s,a,c,m,E,k,A,B,Z,Y,Q,$,ce,ae){var de,ne=[Q.textOffset0,Q.textOffset1],me=Xr(n,a,c,ne,m),ge=this.collisionIndex.placeCollisionBox(zi(s,me.x,me.y,E,k,this.transform.angle),Y,A,B,Z.predicate);if(!ae||this.collisionIndex.placeCollisionBox(zi(ae,me.x,me.y,E,k,this.transform.angle),Y,A,B,Z.predicate).box.length!==0)return ge.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(de=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),this.variableOffsets[Q.crossTileID]={textOffset:ne,width:a,height:c,anchor:n,textBoxScale:m,prevAnchor:de},this.markUsedJustification($,n,Q,ce),$.allowVerticalPlacement&&(this.markUsedOrientation($,ce,Q),this.placedOrientations[Q.crossTileID]=ce),{shift:me,placedGlyphBoxes:ge}):void 0},fi.prototype.placeLayerBucketPart=function(n,s,a){var c=this,m=n.parameters,E=m.bucket,k=m.layout,A=m.posMatrix,B=m.textLabelPlaneMatrix,Z=m.labelToScreenMatrix,Y=m.textPixelRatio,Q=m.holdingForFade,$=m.collisionBoxArray,ce=m.partiallyEvaluatedTextSize,ae=m.collisionGroup,de=k.get("text-optional"),ne=k.get("icon-optional"),me=k.get("text-allow-overlap"),ge=k.get("icon-allow-overlap"),Te=k.get("text-rotation-alignment")==="map",Be=k.get("text-pitch-alignment")==="map",Ce=k.get("icon-text-fit")!=="none",Oe=k.get("symbol-z-order")==="viewport-y",je=me&&(ge||!E.hasIconData()||ne),He=ge&&(me||!E.hasTextData()||de);!E.collisionArrays&&$&&E.deserializeCollisionBoxes($);var Xe=function(ot,zt){if(!s[ot.crossTileID])if(Q)c.placements[ot.crossTileID]=new Qu(!1,!1,!1);else{var Rt,Pt=!1,Dt=!1,Ht=!0,Tt=null,Et={box:null,offscreen:null},rn={box:null,offscreen:null},li=null,kn=null,mn=0,Yr=0,ki=0;zt.textFeatureIndex?mn=zt.textFeatureIndex:ot.useRuntimeCollisionCircles&&(mn=ot.featureIndex),zt.verticalTextFeatureIndex&&(Yr=zt.verticalTextFeatureIndex);var va=zt.textBox;if(va){var ui=function(nr){var Ci=o.WritingMode.horizontal;if(E.allowVerticalPlacement&&!nr&&c.prevPlacement){var ji=c.prevPlacement.placedOrientations[ot.crossTileID];ji&&(c.placedOrientations[ot.crossTileID]=ji,c.markUsedOrientation(E,Ci=ji,ot))}return Ci},ra=function(nr,Ci){if(E.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&zt.verticalTextBox)for(var ji=0,Ll=E.writingModes;ji<Ll.length&&(Ll[ji]===o.WritingMode.vertical?(Et=Ci(),rn=Et):Et=nr(),!(Et&&Et.box&&Et.box.length));ji+=1);else Et=nr()};if(k.get("text-variable-anchor")){var _i=k.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[ot.crossTileID]){var Rn=c.prevPlacement.variableOffsets[ot.crossTileID];_i.indexOf(Rn.anchor)>0&&(_i=_i.filter(function(nr){return nr!==Rn.anchor})).unshift(Rn.anchor)}var qa=function(nr,Ci,ji){for(var Ll=nr.x2-nr.x1,hc=nr.y2-nr.y1,xf=ot.textBoxScale,xd=Ce&&!ge?Ci:null,_s={box:[],offscreen:!1},_u=me?2*_i.length:_i.length,bu=0;bu<_u;++bu){var Xs=c.attemptAnchorPlacement(_i[bu%_i.length],nr,Ll,hc,xf,Te,Be,Y,A,ae,bu>=_i.length,ot,E,ji,xd);if(Xs&&(_s=Xs.placedGlyphBoxes)&&_s.box&&_s.box.length){Pt=!0,Tt=Xs.shift;break}}return _s};ra(function(){return qa(va,zt.iconBox,o.WritingMode.horizontal)},function(){var nr=zt.verticalTextBox;return E.allowVerticalPlacement&&!(Et&&Et.box&&Et.box.length)&&ot.numVerticalGlyphVertices>0&&nr?qa(nr,zt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Et&&(Pt=Et.box,Ht=Et.offscreen);var ms=ui(Et&&Et.box);if(!Pt&&c.prevPlacement){var oh=c.prevPlacement.variableOffsets[ot.crossTileID];oh&&(c.variableOffsets[ot.crossTileID]=oh,c.markUsedJustification(E,oh.anchor,ot,ms))}}else{var Hs=function(nr,Ci){var ji=c.collisionIndex.placeCollisionBox(nr,me,Y,A,ae.predicate);return ji&&ji.box&&ji.box.length&&(c.markUsedOrientation(E,Ci,ot),c.placedOrientations[ot.crossTileID]=Ci),ji};ra(function(){return Hs(va,o.WritingMode.horizontal)},function(){var nr=zt.verticalTextBox;return E.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&nr?Hs(nr,o.WritingMode.vertical):{box:null,offscreen:null}}),ui(Et&&Et.box&&Et.box.length)}}if(Pt=(Rt=Et)&&Rt.box&&Rt.box.length>0,Ht=Rt&&Rt.offscreen,ot.useRuntimeCollisionCircles){var Po=E.text.placedSymbolArray.get(ot.centerJustifiedTextSymbolIndex),ys=o.evaluateSizeForFeature(E.textSizeData,ce,Po),Co=k.get("text-padding");li=c.collisionIndex.placeCollisionCircles(me,Po,E.lineVertexArray,E.glyphOffsetArray,ys,A,B,Z,a,Be,ae.predicate,ot.collisionCircleDiameter,Co),Pt=me||li.circles.length>0&&!li.collisionDetected,Ht=Ht&&li.offscreen}if(zt.iconFeatureIndex&&(ki=zt.iconFeatureIndex),zt.iconBox){var vs=function(nr){var Ci=Ce&&Tt?zi(nr,Tt.x,Tt.y,Te,Be,c.transform.angle):nr;return c.collisionIndex.placeCollisionBox(Ci,ge,Y,A,ae.predicate)};Dt=rn&&rn.box&&rn.box.length&&zt.verticalIconBox?(kn=vs(zt.verticalIconBox)).box.length>0:(kn=vs(zt.iconBox)).box.length>0,Ht=Ht&&kn.offscreen}var ja=de||ot.numHorizontalGlyphVertices===0&&ot.numVerticalGlyphVertices===0,nn=ne||ot.numIconVertices===0;if(ja||nn?nn?ja||(Dt=Dt&&Pt):Pt=Dt&&Pt:Dt=Pt=Dt&&Pt,Pt&&Rt&&Rt.box&&c.collisionIndex.insertCollisionBox(Rt.box,k.get("text-ignore-placement"),E.bucketInstanceId,rn&&rn.box&&Yr?Yr:mn,ae.ID),Dt&&kn&&c.collisionIndex.insertCollisionBox(kn.box,k.get("icon-ignore-placement"),E.bucketInstanceId,ki,ae.ID),li&&(Pt&&c.collisionIndex.insertCollisionCircles(li.circles,k.get("text-ignore-placement"),E.bucketInstanceId,mn,ae.ID),a)){var gs=E.bucketInstanceId,Ta=c.collisionCircleArrays[gs];Ta===void 0&&(Ta=c.collisionCircleArrays[gs]=new Fi);for(var Ml=0;Ml<li.circles.length;Ml+=4)Ta.circles.push(li.circles[Ml+0]),Ta.circles.push(li.circles[Ml+1]),Ta.circles.push(li.circles[Ml+2]),Ta.circles.push(li.collisionDetected?1:0)}c.placements[ot.crossTileID]=new Qu(Pt||je,Dt||He,Ht||E.justReloaded),s[ot.crossTileID]=!0}};if(Oe)for(var ut=E.getSortedSymbolIndexes(this.transform.angle),St=ut.length-1;St>=0;--St){var xt=ut[St];Xe(E.symbolInstances.get(xt),E.collisionArrays[xt])}else for(var kt=n.symbolInstanceStart;kt<n.symbolInstanceEnd;kt++)Xe(E.symbolInstances.get(kt),E.collisionArrays[kt]);if(a&&E.bucketInstanceId in this.collisionCircleArrays){var ur=this.collisionCircleArrays[E.bucketInstanceId];o.invert(ur.invProjMatrix,A),ur.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1},fi.prototype.markUsedJustification=function(n,s,a,c){var m;m=c===o.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(s)];for(var E=0,k=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];E<k.length;E+=1){var A=k[E];A>=0&&(n.text.placedSymbolArray.get(A).crossTileID=m>=0&&A!==m?0:a.crossTileID)}},fi.prototype.markUsedOrientation=function(n,s,a){for(var c=s===o.WritingMode.horizontal||s===o.WritingMode.horizontalOnly?s:0,m=s===o.WritingMode.vertical?s:0,E=0,k=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];E<k.length;E+=1)n.text.placedSymbolArray.get(k[E]).placedOrientation=c;a.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=m)},fi.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},E=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(var A in this.placements){var B=this.placements[A],Z=m[A];Z?(this.opacities[A]=new hn(Z,c,B.text,B.icon),a=a||B.text!==Z.text.placed||B.icon!==Z.icon.placed):(this.opacities[A]=new hn(null,c,B.text,B.icon,B.skipFade),a=a||B.text||B.icon)}for(var Y in m){var Q=m[Y];if(!this.opacities[Y]){var $=new hn(Q,c,!1,!1);$.isHidden()||(this.opacities[Y]=$,a=a||Q.text.placed||Q.icon.placed)}}for(var ce in E)this.variableOffsets[ce]||!this.opacities[ce]||this.opacities[ce].isHidden()||(this.variableOffsets[ce]=E[ce]);for(var ae in k)this.placedOrientations[ae]||!this.opacities[ae]||this.opacities[ae].isHidden()||(this.placedOrientations[ae]=k[ae]);a?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},fi.prototype.updateLayerOpacities=function(n,s){for(var a={},c=0,m=s;c<m.length;c+=1){var E=m[c],k=E.getBucket(n);k&&E.latestFeatureIndex&&n.id===k.layerIds[0]&&this.updateBucketOpacities(k,a,E.collisionBoxArray)}},fi.prototype.updateBucketOpacities=function(n,s,a){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,E=new hn(null,0,!1,!1,!0),k=m.get("text-allow-overlap"),A=m.get("icon-allow-overlap"),B=m.get("text-variable-anchor"),Z=m.get("text-rotation-alignment")==="map",Y=m.get("text-pitch-alignment")==="map",Q=m.get("icon-text-fit")!=="none",$=new hn(null,0,k&&(A||!n.hasIconData()||m.get("icon-optional")),A&&(k||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&a&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(a);for(var ce=function(me,ge,Te){for(var Be=0;Be<ge/4;Be++)me.opacityVertexArray.emplaceBack(Te)},ae=function(me){var ge=n.symbolInstances.get(me),Te=ge.numHorizontalGlyphVertices,Be=ge.numVerticalGlyphVertices,Ce=ge.crossTileID,Oe=c.opacities[Ce];s[Ce]?Oe=E:Oe||(c.opacities[Ce]=Oe=$),s[Ce]=!0;var je=ge.numIconVertices>0,He=c.placedOrientations[ge.crossTileID],Xe=He===o.WritingMode.vertical,ut=He===o.WritingMode.horizontal||He===o.WritingMode.horizontalOnly;if(Te>0||Be>0){var St=rs(Oe.text);ce(n.text,Te,Xe?yo:St),ce(n.text,Be,ut?yo:St);var xt=Oe.text.isHidden();[ge.rightJustifiedTextSymbolIndex,ge.centerJustifiedTextSymbolIndex,ge.leftJustifiedTextSymbolIndex].forEach(function(Et){Et>=0&&(n.text.placedSymbolArray.get(Et).hidden=xt||Xe?1:0)}),ge.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ge.verticalPlacedTextSymbolIndex).hidden=xt||ut?1:0);var kt=c.variableOffsets[ge.crossTileID];kt&&c.markUsedJustification(n,kt.anchor,ge,He);var ur=c.placedOrientations[ge.crossTileID];ur&&(c.markUsedJustification(n,"left",ge,ur),c.markUsedOrientation(n,ur,ge))}if(je){var ot=rs(Oe.icon),zt=!(Q&&ge.verticalPlacedIconSymbolIndex&&Xe);ge.placedIconSymbolIndex>=0&&(ce(n.icon,ge.numIconVertices,zt?ot:yo),n.icon.placedSymbolArray.get(ge.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),ge.verticalPlacedIconSymbolIndex>=0&&(ce(n.icon,ge.numVerticalIconVertices,zt?yo:ot),n.icon.placedSymbolArray.get(ge.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Rt=n.collisionArrays[me];if(Rt){var Pt=new o.Point(0,0);if(Rt.textBox||Rt.verticalTextBox){var Dt=!0;if(B){var Ht=c.variableOffsets[Ce];Ht?(Pt=Xr(Ht.anchor,Ht.width,Ht.height,Ht.textOffset,Ht.textBoxScale),Z&&Pt._rotate(Y?c.transform.angle:-c.transform.angle)):Dt=!1}Rt.textBox&&mo(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Dt||Xe,Pt.x,Pt.y),Rt.verticalTextBox&&mo(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Dt||ut,Pt.x,Pt.y)}var Tt=Boolean(!ut&&Rt.verticalIconBox);Rt.iconBox&&mo(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,Tt,Q?Pt.x:0,Q?Pt.y:0),Rt.verticalIconBox&&mo(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!Tt,Q?Pt.x:0,Q?Pt.y:0)}}},de=0;de<n.symbolInstances.length;de++)ae(de);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var ne=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=ne.invProjMatrix,n.placementViewportMatrix=ne.viewportMatrix,n.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},fi.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},fi.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},fi.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},fi.prototype.stillRecent=function(n,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>n},fi.prototype.setStale=function(){this.stale=!0};var es=Math.pow(2,25),yd=Math.pow(2,24),yl=Math.pow(2,17),vl=Math.pow(2,16),ts=Math.pow(2,9),ip=Math.pow(2,8),au=Math.pow(2,1);function rs(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,a=Math.floor(127*n.opacity);return a*es+s*yd+a*yl+s*vl+a*ts+s*ip+a*au+s}var yo=0,ou=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ou.prototype.continuePlacement=function(n,s,a,c,m){for(var E=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(E,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(function(k,A){return k.sortKey-A.sortKey}));this._currentPartIndex<E.length;)if(s.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,m())return!0;return!1};var gl=function(n,s,a,c,m,E,k){this.placement=new fi(n,m,E,k),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=c,this._done=!1};gl.prototype.isDone=function(){return this._done},gl.prototype.continuePlacement=function(n,s,a){for(var c=this,m=o.browser.now(),E=function(){var B=o.browser.now()-m;return!c._forceFullPlacement&&B>2};this._currentPlacementIndex>=0;){var k=s[n[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=A)&&(!k.maxzoom||k.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new ou(k)),this._inProgressLayer.continuePlacement(a[k.source],this.placement,this._showCollisionBoxes,k,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},gl.prototype.commit=function(n){return this.placement.commit(n),this.placement};var Yc=512/o.EXTENT/2,wn=function(n,s,a){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var c=0;c<s.length;c++){var m=s.get(c),E=m.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};wn.prototype.getScaledCoordinates=function(n,s){var a=Yc/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*o.EXTENT+n.anchorX)*a),y:Math.floor((s.canonical.y*o.EXTENT+n.anchorY)*a)}},wn.prototype.findMatches=function(n,s,a){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var E=n.get(m);if(!E.crossTileID){var k=this.indexedSymbolInstances[E.key];if(k)for(var A=this.getScaledCoordinates(E,s),B=0,Z=k;B<Z.length;B+=1){var Y=Z[B];if(Math.abs(Y.coord.x-A.x)<=c&&Math.abs(Y.coord.y-A.y)<=c&&!a[Y.crossTileID]){a[Y.crossTileID]=!0,E.crossTileID=Y.crossTileID;break}}}}};var Si=function(){this.maxCrossTileID=0};Si.prototype.generate=function(){return++this.maxCrossTileID};var qn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};qn.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var a in this.indexes){var c=this.indexes[a],m={};for(var E in c){var k=c[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),m[k.tileID.key]=k}this.indexes[a]=m}this.lng=n},qn.prototype.addBucket=function(n,s,a){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var E in this.indexes){var k=this.indexes[E];if(Number(E)>n.overscaledZ)for(var A in k){var B=k[A];B.tileID.isChildOf(n)&&B.findMatches(s.symbolInstances,n,m)}else{var Z=k[n.scaledTo(Number(E)).key];Z&&Z.findMatches(s.symbolInstances,n,m)}}for(var Y=0;Y<s.symbolInstances.length;Y++){var Q=s.symbolInstances.get(Y);Q.crossTileID||(Q.crossTileID=a.generate(),m[Q.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new wn(n,s.symbolInstances,s.bucketInstanceId),!0},qn.prototype.removeBucketCrossTileIDs=function(n,s){for(var a in s.indexedSymbolInstances)for(var c=0,m=s.indexedSymbolInstances[a];c<m.length;c+=1)delete this.usedCrossTileIDs[n][m[c].crossTileID]},qn.prototype.removeStaleBuckets=function(n){var s=!1;for(var a in this.indexes){var c=this.indexes[a];for(var m in c)n[c[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,c[m]),delete c[m],s=!0)}return s};var ke=function(){this.layerIndexes={},this.crossTileIDs=new Si,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ke.prototype.addLayer=function(n,s,a){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new qn);var m=!1,E={};c.handleWrapJump(a);for(var k=0,A=s;k<A.length;k+=1){var B=A[k],Z=B.getBucket(n);Z&&n.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(B.tileID,Z,this.crossTileIDs)&&(m=!0),E[Z.bucketInstanceId]=!0)}return c.removeStaleBuckets(E)&&(m=!0),m},ke.prototype.pruneUnusedLayers=function(n){var s={};for(var a in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var Ni=function(n,s){return o.emitValidationErrors(n,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},zn=o.pick($e,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Wr=o.pick($e,["setCenter","setZoom","setBearing","setPitch"]),pa=function(){var n={},s=o.styleSpec.$version;for(var a in o.styleSpec.$root){var c,m=o.styleSpec.$root[a];m.required&&(c=a==="version"?s:m.type==="array"?[]:{})!=null&&(n[a]=c)}return n}(),Pn=function(n){function s(a,c){var m=this;c===void 0&&(c={}),n.call(this),this.map=a,this.dispatcher=new Ir(Re(),this),this.imageManager=new Ue,this.imageManager.setEventedParent(this),this.glyphManager=new ar(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Vt(256,512),this.crossTileSymbolIndex=new ke,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var E=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(k){E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},function(A,B){if(o.triggerPluginCompletionEvent(A),B&&B.every(function(Y){return Y}))for(var Z in E.sourceCaches)E.sourceCaches[Z].reload()})}),this.on("data",function(k){if(k.dataType==="source"&&k.sourceDataType==="metadata"){var A=m.sourceCaches[k.sourceId];if(A){var B=A.getSource();if(B&&B.vectorLayerIds)for(var Z in m._layers){var Y=m._layers[Z];Y.source===B.id&&m._validateLayer(Y)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var E=typeof c.validate=="boolean"?c.validate:!o.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);var k=this.map._requestManager.transformRequest(a,o.ResourceType.Style);this._request=o.getJSON(k,function(A,B){m._request=null,A?m.fire(new o.ErrorEvent(A)):B&&m._load(B,E)})},s.prototype.loadJSON=function(a,c){var m=this;c===void 0&&(c={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){m._request=null,m._load(a,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(pa,!1)},s.prototype._load=function(a,c){if(!c||!Ni(this,o.validateStyle(a))){for(var m in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(m,a.sources[m],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var E=We(this.stylesheet.layers);this._order=E.map(function(Z){return Z.id}),this._layers={},this._serializedLayers={};for(var k=0,A=E;k<A.length;k+=1){var B=A[k];(B=o.createStyleLayer(B)).setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Tr(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},s.prototype._loadSprite=function(a){var c=this;this._spriteRequest=function(m,E,k){var A,B,Z,Y=o.browser.devicePixelRatio>1?"@2x":"",Q=o.getJSON(E.transformRequest(E.normalizeSpriteURL(m,Y,".json"),o.ResourceType.SpriteJSON),function(ae,de){Q=null,Z||(Z=ae,A=de,ce())}),$=o.getImage(E.transformRequest(E.normalizeSpriteURL(m,Y,".png"),o.ResourceType.SpriteImage),function(ae,de){$=null,Z||(Z=ae,B=de,ce())});function ce(){if(Z)k(Z);else if(A&&B){var ae=o.browser.getImageData(B),de={};for(var ne in A){var me=A[ne],ge=me.width,Te=me.height,Be=me.x,Ce=me.y,Oe=me.sdf,je=me.pixelRatio,He=me.stretchX,Xe=me.stretchY,ut=me.content,St=new o.RGBAImage({width:ge,height:Te});o.RGBAImage.copy(ae,St,{x:Be,y:Ce},{x:0,y:0},{width:ge,height:Te}),de[ne]={data:St,pixelRatio:je,sdf:Oe,stretchX:He,stretchY:Xe,content:ut}}k(null,de)}}return{cancel:function(){Q&&(Q.cancel(),Q=null),$&&($.cancel(),$=null)}}}(a,this.map._requestManager,function(m,E){if(c._spriteRequest=null,m)c.fire(new o.ErrorEvent(m));else if(E)for(var k in E)c.imageManager.addImage(k,E[k]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new o.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var m=a.sourceLayer;if(m){var E=c.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+E.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var c=[],m=0,E=a;m<E.length;m+=1){var k=this._layers[E[m]];k.type!=="custom"&&c.push(k.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);for(var k in(m.length||E.length)&&this._updateWorkerLayers(m,E),this._updatedSources){var A=this._updatedSources[k];A==="reload"?this._reloadSource(k):A==="clear"&&this._clearSource(k)}for(var B in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[B].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var Z={};for(var Y in this.sourceCaches){var Q=this.sourceCaches[Y];Z[Y]=Q.used,Q.used=!1}for(var $=0,ce=this._order;$<ce.length;$+=1){var ae=this._layers[ce[$]];ae.recalculate(a,this._availableImages),!ae.isHidden(a.zoom)&&ae.source&&(this.sourceCaches[ae.source].used=!0)}for(var de in Z){var ne=this.sourceCaches[de];Z[de]!==ne.used&&ne.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:de}))}this.light.recalculate(a),this.z=a.zoom,c&&this.fire(new o.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var c=this;if(this._checkLoaded(),Ni(this,o.validateStyle(a)))return!1;(a=o.clone$1(a)).layers=We(a.layers);var m=function(k,A){if(!k)return[{command:$e.setStyle,args:[A]}];var B=[];try{if(!o.deepEqual(k.version,A.version))return[{command:$e.setStyle,args:[A]}];o.deepEqual(k.center,A.center)||B.push({command:$e.setCenter,args:[A.center]}),o.deepEqual(k.zoom,A.zoom)||B.push({command:$e.setZoom,args:[A.zoom]}),o.deepEqual(k.bearing,A.bearing)||B.push({command:$e.setBearing,args:[A.bearing]}),o.deepEqual(k.pitch,A.pitch)||B.push({command:$e.setPitch,args:[A.pitch]}),o.deepEqual(k.sprite,A.sprite)||B.push({command:$e.setSprite,args:[A.sprite]}),o.deepEqual(k.glyphs,A.glyphs)||B.push({command:$e.setGlyphs,args:[A.glyphs]}),o.deepEqual(k.transition,A.transition)||B.push({command:$e.setTransition,args:[A.transition]}),o.deepEqual(k.light,A.light)||B.push({command:$e.setLight,args:[A.light]});var Z={},Y=[];(function($,ce,ae,de){var ne;for(ne in ce=ce||{},$=$||{})$.hasOwnProperty(ne)&&(ce.hasOwnProperty(ne)||Ze(ne,ae,de));for(ne in ce)ce.hasOwnProperty(ne)&&($.hasOwnProperty(ne)?o.deepEqual($[ne],ce[ne])||($[ne].type==="geojson"&&ce[ne].type==="geojson"&&or($,ce,ne)?ae.push({command:$e.setGeoJSONSourceData,args:[ne,ce[ne].data]}):Gt(ne,ce,ae,de)):Nt(ne,ce,ae))})(k.sources,A.sources,Y,Z);var Q=[];k.layers&&k.layers.forEach(function($){Z[$.source]?B.push({command:$e.removeLayer,args:[$.id]}):Q.push($)}),B=B.concat(Y),function($,ce,ae){ce=ce||[];var de,ne,me,ge,Te,Be,Ce,Oe=($=$||[]).map(tr),je=ce.map(tr),He=$.reduce(er,{}),Xe=ce.reduce(er,{}),ut=Oe.slice(),St=Object.create(null);for(de=0,ne=0;de<Oe.length;de++)Xe.hasOwnProperty(me=Oe[de])?ne++:(ae.push({command:$e.removeLayer,args:[me]}),ut.splice(ut.indexOf(me,ne),1));for(de=0,ne=0;de<je.length;de++)ut[ut.length-1-de]!==(me=je[je.length-1-de])&&(He.hasOwnProperty(me)?(ae.push({command:$e.removeLayer,args:[me]}),ut.splice(ut.lastIndexOf(me,ut.length-ne),1)):ne++,ae.push({command:$e.addLayer,args:[Xe[me],Be=ut[ut.length-de]]}),ut.splice(ut.length-de,0,me),St[me]=!0);for(de=0;de<je.length;de++)if(ge=He[me=je[de]],Te=Xe[me],!St[me]&&!o.deepEqual(ge,Te))if(o.deepEqual(ge.source,Te.source)&&o.deepEqual(ge["source-layer"],Te["source-layer"])&&o.deepEqual(ge.type,Te.type)){for(Ce in Ct(ge.layout,Te.layout,ae,me,null,$e.setLayoutProperty),Ct(ge.paint,Te.paint,ae,me,null,$e.setPaintProperty),o.deepEqual(ge.filter,Te.filter)||ae.push({command:$e.setFilter,args:[me,Te.filter]}),o.deepEqual(ge.minzoom,Te.minzoom)&&o.deepEqual(ge.maxzoom,Te.maxzoom)||ae.push({command:$e.setLayerZoomRange,args:[me,Te.minzoom,Te.maxzoom]}),ge)ge.hasOwnProperty(Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?Ct(ge[Ce],Te[Ce],ae,me,Ce.slice(6),$e.setPaintProperty):o.deepEqual(ge[Ce],Te[Ce])||ae.push({command:$e.setLayerProperty,args:[me,Ce,Te[Ce]]}));for(Ce in Te)Te.hasOwnProperty(Ce)&&!ge.hasOwnProperty(Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?Ct(ge[Ce],Te[Ce],ae,me,Ce.slice(6),$e.setPaintProperty):o.deepEqual(ge[Ce],Te[Ce])||ae.push({command:$e.setLayerProperty,args:[me,Ce,Te[Ce]]}))}else ae.push({command:$e.removeLayer,args:[me]}),Be=ut[ut.lastIndexOf(me)+1],ae.push({command:$e.addLayer,args:[Te,Be]})}(Q,A.layers,B)}catch($){console.warn("Unable to compute style diff:",$),B=[{command:$e.setStyle,args:[A]}]}return B}(this.serialize(),a).filter(function(k){return!(k.command in Wr)});if(m.length===0)return!1;var E=m.filter(function(k){return!(k.command in zn)});if(E.length>0)throw new Error("Unimplemented: "+E.map(function(k){return k.command}).join(", ")+".");return m.forEach(function(k){k.command!=="setTransition"&&c[k.command].apply(c,k.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,c),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,c){this.imageManager.updateImage(a,c)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,c,m){var E=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.validateStyle.source,"sources."+a,c,null,m))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var k=this.sourceCaches[a]=new oe(a,c,this.dispatcher);k.style=this,k.setEventedParent(this,function(){return{isSourceLoaded:E.loaded(),source:k.serialize(),sourceId:a}}),k.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new o.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));var m=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],m.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded(),this.sourceCaches[a].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var E=a.id;if(this.getLayer(E))this.fire(new o.ErrorEvent(new Error('Layer with id "'+E+'" already exists on this map')));else{var k;if(a.type==="custom"){if(Ni(this,o.validateCustomStyleLayer(a)))return;k=o.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(E,a.source),a=o.clone$1(a),a=o.extend(a,{source:E})),this._validate(o.validateStyle.layer,"layers."+E,a,{arrayIndex:-1},m))return;k=o.createStyleLayer(a),this._validateLayer(k),k.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[k.id]=k.serialize()}var A=c?this._order.indexOf(c):this._order.length;if(c&&A===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(A,0,E),this._layerOrderChanged=!0,this._layers[E]=k,this._removedLayers[E]&&k.source&&k.type!=="custom"){var B=this._removedLayers[E];delete this._removedLayers[E],B.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}},s.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var m=this._order.indexOf(a);this._order.splice(m,1);var E=c?this._order.indexOf(c):this._order.length;c&&E===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(E,0,a),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var m=this._order.indexOf(a);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,c,m){this._checkLoaded();var E=this.getLayer(a);E?E.minzoom===c&&E.maxzoom===m||(c!=null&&(E.minzoom=c),m!=null&&(E.maxzoom=m),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,c,m){m===void 0&&(m={}),this._checkLoaded();var E=this.getLayer(a);if(E){if(!o.deepEqual(E.filter,c))return c==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(o.validateStyle.filter,"layers."+E.id+".filter",c,null,m)||(E.filter=o.clone$1(c),this._updateLayer(E)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return o.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(a);k?o.deepEqual(k.getLayoutProperty(c),m)||(k.setLayoutProperty(c,m,E),this._updateLayer(k)):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,c){var m=this.getLayer(a);if(m)return m.getLayoutProperty(c);this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,c,m,E){E===void 0&&(E={}),this._checkLoaded();var k=this.getLayer(a);k?o.deepEqual(k.getPaintProperty(c),m)||(k.setPaintProperty(c,m,E)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},s.prototype.setFeatureState=function(a,c){this._checkLoaded();var m=a.source,E=a.sourceLayer,k=this.sourceCaches[m];if(k!==void 0){var A=k.getSource().type;A==="geojson"&&E?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||E?(a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),k.setFeatureState(E,a.id,c)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,c){this._checkLoaded();var m=a.source,E=this.sourceCaches[m];if(E!==void 0){var k=E.getSource().type,A=k==="vector"?a.sourceLayer:void 0;k!=="vector"||A?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(A,a.id,c):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,m=a.sourceLayer,E=this.sourceCaches[c];if(E!==void 0){if(E.getSource().type!=="vector"||m)return a.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.getFeatureState(m,a.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var c=this,m=function(He){return c._layers[He].type==="fill-extrusion"},E={},k=[],A=this._order.length-1;A>=0;A--){var B=this._order[A];if(m(B)){E[B]=A;for(var Z=0,Y=a;Z<Y.length;Z+=1){var Q=Y[Z][B];if(Q)for(var $=0,ce=Q;$<ce.length;$+=1)k.push(ce[$])}}}k.sort(function(He,Xe){return Xe.intersectionZ-He.intersectionZ});for(var ae=[],de=this._order.length-1;de>=0;de--){var ne=this._order[de];if(m(ne))for(var me=k.length-1;me>=0;me--){var ge=k[me].feature;if(E[ge.layer.id]<de)break;ae.push(ge),k.pop()}else for(var Te=0,Be=a;Te<Be.length;Te+=1){var Ce=Be[Te][ne];if(Ce)for(var Oe=0,je=Ce;Oe<je.length;Oe+=1)ae.push(je[Oe].feature)}}return ae},s.prototype.queryRenderedFeatures=function(a,c,m){c&&c.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var E={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var k=0,A=c.layers;k<A.length;k+=1){var B=A[k],Z=this._layers[B];if(!Z)return this.fire(new o.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be queried for features."))),[];E[Z.source]=!0}}var Y=[];for(var Q in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!E[Q]||Y.push(oi(this.sourceCaches[Q],this._layers,this._serializedLayers,a,c,m));return this.placement&&Y.push(function($,ce,ae,de,ne,me,ge){for(var Te={},Be=me.queryRenderedSymbols(de),Ce=[],Oe=0,je=Object.keys(Be).map(Number);Oe<je.length;Oe+=1)Ce.push(ge[je[Oe]]);Ce.sort(Sa);for(var He=function(){var kt=ut[Xe],ur=kt.featureIndex.lookupSymbolFeatures(Be[kt.bucketInstanceId],ce,kt.bucketIndex,kt.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,$);for(var ot in ur){var zt=Te[ot]=Te[ot]||[],Rt=ur[ot];Rt.sort(function(Ht,Tt){var Et=kt.featureSortOrder;if(Et){var rn=Et.indexOf(Ht.featureIndex);return Et.indexOf(Tt.featureIndex)-rn}return Tt.featureIndex-Ht.featureIndex});for(var Pt=0,Dt=Rt;Pt<Dt.length;Pt+=1)zt.push(Dt[Pt])}},Xe=0,ut=Ce;Xe<ut.length;Xe+=1)He();var St=function(kt){Te[kt].forEach(function(ur){var ot=ur.feature,zt=ae[$[kt].source].getFeatureState(ot.layer["source-layer"],ot.id);ot.source=ot.layer.source,ot.layer["source-layer"]&&(ot.sourceLayer=ot.layer["source-layer"]),ot.state=zt})};for(var xt in Te)St(xt);return Te}(this._layers,this._serializedLayers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Y)},s.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var m=this.sourceCaches[a];return m?function(E,k){for(var A=E.getRenderableIds().map(function(ce){return E.getTileByID(ce)}),B=[],Z={},Y=0;Y<A.length;Y++){var Q=A[Y],$=Q.tileID.canonical.key;Z[$]||(Z[$]=!0,Q.querySourceFeatures(B,k))}return B}(m,c):[]},s.prototype.addSourceType=function(a,c,m){return s.getSourceType(a)?m(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,c){c===void 0&&(c={}),this._checkLoaded();var m=this.light.getLight(),E=!1;for(var k in a)if(!o.deepEqual(a[k],m[k])){E=!0;break}if(E){var A={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(A)}},s.prototype._validate=function(a,c,m,E,k){return k===void 0&&(k={}),(!k||k.validate!==!1)&&Ni(this,a.call(o.validateStyle,o.extend({key:c,style:this.serialize(),value:m,styleSpec:o.styleSpec},E)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,c,m,E,k){k===void 0&&(k=!1);for(var A=!1,B=!1,Z={},Y=0,Q=this._order;Y<Q.length;Y+=1){var $=this._layers[Q[Y]];if($.type==="symbol"){if(!Z[$.source]){var ce=this.sourceCaches[$.source];Z[$.source]=ce.getRenderableIds(!0).map(function(ge){return ce.getTileByID(ge)}).sort(function(ge,Te){return Te.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(Te.tileID)?-1:1)})}var ae=this.crossTileSymbolIndex.addLayer($,Z[$.source],a.center.lng);A=A||ae}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),a.zoom))&&(this.pauseablePlacement=new gl(a,this._order,k,c,m,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),B=!0),A&&this.pauseablePlacement.placement.setStale()),B||A)for(var de=0,ne=this._order;de<ne.length;de+=1){var me=this._layers[ne[de]];me.type==="symbol"&&this.placement.updateLayerOpacities(me,Z[me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();var E=this.sourceCaches[c.source];E&&E.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(a,c,m){this.glyphManager.getGlyphs(c.stacks,m)},s.prototype.getResource=function(a,c,m){return o.makeRequest(c,m)},s}(o.Evented);Pn.getSourceType=function(n){return Ti[n]},Pn.setSourceType=function(n,s){Ti[n]=s},Pn.registerForPluginStateChange=o.registerForPluginStateChange;var Pi=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),su=Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),lu=Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),np=Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),sf=Lr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),ap=Lr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),lf=Lr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),op=Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Rs=Lr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),uu=Lr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),vo=Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Jc=Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),$u=Lr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ec=Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),_l=Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),si=Lr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),sp=Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),go=Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),is=Lr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),bl=Lr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),_o=Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Bs=Lr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),xl=Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Cn=Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Qi=Lr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),$a=Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Os=Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Lr(n,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=E?E.concat(m):m,A={};return{fragmentSource:n=n.replace(a,function(B,Z,Y,Q,$){return A[$]=!0,Z==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
varying `+Y+" "+Q+" "+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`}),vertexSource:s=s.replace(a,function(B,Z,Y,Q,$){var ce=Q==="float"?"vec2":"vec4",ae=$.match(/color/)?"color":ce;return A[$]?Z==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+Y+" "+ce+" a_"+$+`;
varying `+Y+" "+Q+" "+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = a_"+$+`;
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = unpack_mix_"+ae+"(a_"+$+", u_"+$+`_t);
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:Z==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+Y+" "+ce+" a_"+$+`;
#else
uniform `+Y+" "+Q+" u_"+$+`;
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = a_"+$+`;
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+Y+" "+Q+" "+$+" = unpack_mix_"+ae+"(a_"+$+", u_"+$+`_t);
#else
    `+Y+" "+Q+" "+$+" = u_"+$+`;
#endif
`}),staticAttributes:c,staticUniforms:k}}var tc=Object.freeze({__proto__:null,prelude:su,background:lu,backgroundPattern:np,circle:sf,clippingMask:ap,heatmap:lf,heatmapTexture:op,collisionBox:Rs,collisionCircle:uu,debug:vo,fill:Jc,fillOutline:$u,fillOutlinePattern:ec,fillPattern:_l,fillExtrusion:si,fillExtrusionPattern:sp,hillshadePrepare:go,hillshade:is,line:bl,lineGradient:_o,linePattern:Bs,lineSDF:xl,raster:Cn,symbolIcon:Qi,symbolSDF:$a,symbolTextAndIcon:Os}),uf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function cf(n){for(var s=[],a=0;a<n.length;a++)if(n[a]!==null){var c=n[a].split(" ");s.push(c.pop())}return s}uf.prototype.bind=function(n,s,a,c,m,E,k,A){this.context=n;for(var B=this.boundPaintVertexBuffers.length!==c.length,Z=0;!B&&Z<c.length;Z++)this.boundPaintVertexBuffers[Z]!==c[Z]&&(B=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!B&&this.boundIndexBuffer===m&&this.boundVertexOffset===E&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===A?(n.bindVertexArrayOES.set(this.vao),k&&k.bind(),m&&m.dynamicDraw&&m.bind(),A&&A.bind()):this.freshBind(s,a,c,m,E,k,A)},uf.prototype.freshBind=function(n,s,a,c,m,E,k){var A,B=n.numAttributes,Z=this.context,Y=Z.gl;if(Z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Z.extVertexArrayObject.createVertexArrayOES(),Z.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=c,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=k;else{A=Z.currentNumAttributes||0;for(var Q=B;Q<A;Q++)Y.disableVertexAttribArray(Q)}s.enableAttributes(Y,n);for(var $=0,ce=a;$<ce.length;$+=1)ce[$].enableAttributes(Y,n);E&&E.enableAttributes(Y,n),k&&k.enableAttributes(Y,n),s.bind(),s.setVertexAttribPointers(Y,n,m);for(var ae=0,de=a;ae<de.length;ae+=1){var ne=de[ae];ne.bind(),ne.setVertexAttribPointers(Y,n,m)}E&&(E.bind(),E.setVertexAttribPointers(Y,n,m)),c&&c.bind(),k&&(k.bind(),k.setVertexAttribPointers(Y,n,m)),Z.currentNumAttributes=B},uf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cu=function(n,s,a,c,m,E){var k=n.gl;this.program=k.createProgram();for(var A=cf(a.staticAttributes),B=c?c.getBinderAttributes():[],Z=A.concat(B),Y=a.staticUniforms?cf(a.staticUniforms):[],Q=c?c.getBinderUniforms():[],$=[],ce=0,ae=Y.concat(Q);ce<ae.length;ce+=1){var de=ae[ce];$.indexOf(de)<0&&$.push(de)}var ne=c?c.defines():[];E&&ne.push("#define OVERDRAW_INSPECTOR;");var me=ne.concat(su.fragmentSource,a.fragmentSource).join(`
`),ge=ne.concat(su.vertexSource,a.vertexSource).join(`
`),Te=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Te,me),k.compileShader(Te),k.attachShader(this.program,Te);var Be=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Be,ge),k.compileShader(Be),k.attachShader(this.program,Be),this.attributes={};var Ce={};this.numAttributes=Z.length;for(var Oe=0;Oe<this.numAttributes;Oe++)Z[Oe]&&(k.bindAttribLocation(this.program,Oe,Z[Oe]),this.attributes[Z[Oe]]=Oe);k.linkProgram(this.program),k.deleteShader(Be),k.deleteShader(Te);for(var je=0;je<$.length;je++){var He=$[je];if(He&&!Ce[He]){var Xe=k.getUniformLocation(this.program,He);Xe&&(Ce[He]=Xe)}}this.fixedUniforms=m(n,Ce),this.binderUniforms=c?c.getUniforms(n,Ce):[]}}};function hu(n,s,a){var c=1/zr(a,1,s.transform.tileZoom),m=Math.pow(2,a.tileID.overscaledZ),E=a.tileSize*Math.pow(2,s.transform.tileZoom)/m,k=E*(a.tileID.canonical.x+a.tileID.wrap*m),A=E*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[k>>16,A>>16],u_pixel_coord_lower:[65535&k,65535&A]}}cu.prototype.draw=function(n,s,a,c,m,E,k,A,B,Z,Y,Q,$,ce,ae,de){var ne,me=n.gl;if(!this.failedToCreate){for(var ge in n.program.set(this.program),n.setDepthMode(a),n.setStencilMode(c),n.setColorMode(m),n.setCullFace(E),this.fixedUniforms)this.fixedUniforms[ge].set(k[ge]);ce&&ce.setUniforms(n,this.binderUniforms,Q,{zoom:$});for(var Te=(ne={},ne[me.LINES]=2,ne[me.TRIANGLES]=3,ne[me.LINE_STRIP]=1,ne)[s],Be=0,Ce=Y.get();Be<Ce.length;Be+=1){var Oe=Ce[Be],je=Oe.vaos||(Oe.vaos={});(je[A]||(je[A]=new uf)).bind(n,this,B,ce?ce.getPaintVertexBuffers():[],Z,Oe.vertexOffset,ae,de),me.drawElements(s,Oe.primitiveLength*Te,me.UNSIGNED_SHORT,Oe.primitiveOffset*Te*2)}}};var hf=function(n,s,a,c){var m=s.style.light,E=m.properties.get("position"),k=[E.x,E.y,E.z],A=o.create$1();m.properties.get("anchor")==="viewport"&&o.fromRotation(A,-s.transform.angle),o.transformMat3(k,k,A);var B=m.properties.get("color");return{u_matrix:n,u_lightpos:k,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+a,u_opacity:c}},eo=function(n,s,a,c,m,E,k){return o.extend(hf(n,s,a,c),hu(E,s,k),{u_height_factor:-Math.pow(2,m.overscaledZ)/k.tileSize/8})},bo=function(n){return{u_matrix:n}},wl=function(n,s,a,c){return o.extend(bo(n),hu(a,s,c))},pf=function(n,s){return{u_matrix:n,u_world:s}},El=function(n,s,a,c,m){return o.extend(wl(n,s,a,c),{u_world:m})},Vs=function(n,s,a,c){var m,E,k=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var A=zr(a,1,k.zoom);m=!0,E=[A,A]}else m=!1,E=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:E}},Sl=function(n,s,a){var c=zr(a,1,s.zoom),m=Math.pow(2,s.zoom-a.tileID.overscaledZ),E=a.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*m),s.pixelsToGLUnits[1]/(c*m)],u_overscale_factor:E}},lp=function(n,s,a){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},ns=function(n,s,a){return a===void 0&&(a=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:a}},Ra=function(n){return{u_matrix:n}},ff=function(n,s,a,c){return{u_matrix:n,u_extrude_scale:zr(s,1,a),u_intensity:c}},xo=function(n,s,a){var c=n.transform;return{u_matrix:df(n,s,a),u_ratio:1/zr(s,1,c.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Sr=function(n,s,a,c){return o.extend(xo(n,s,a),{u_image:0,u_image_height:c})},Qc=function(n,s,a,c){var m=n.transform,E=to(s,m);return{u_matrix:df(n,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/zr(s,1,m.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[E,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},vd=function(n,s,a,c,m){var E=n.lineAtlas,k=to(s,n.transform),A=a.layout.get("line-cap")==="round",B=E.getDash(c.from,A),Z=E.getDash(c.to,A),Y=B.width*m.fromScale,Q=Z.width*m.toScale;return o.extend(xo(n,s,a),{u_patternscale_a:[k/Y,-B.height/2],u_patternscale_b:[k/Q,-Z.height/2],u_sdfgamma:E.width/(256*Math.min(Y,Q)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:Z.y,u_mix:m.t})};function to(n,s){return 1/zr(n,1,s.tileZoom)}function df(n,s,a){return n.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var Fs=function(n,s,a,c,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=m.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:ro(m.paint.get("raster-hue-rotate"))};var E,k};function ro(n){n*=Math.PI/180;var s=Math.sin(n),a=Math.cos(n);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var wo,pu=function(n,s,a,c,m,E,k,A,B,Z){var Y=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:Y.width/Y.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:k,u_coord_matrix:A,u_is_text:+B,u_pitch_with_map:+c,u_texsize:Z,u_texture:0}},as=function(n,s,a,c,m,E,k,A,B,Z,Y){var Q=m.transform;return o.extend(pu(n,s,a,c,m,E,k,A,B,Z),{u_gamma_scale:c?Math.cos(Q._pitch)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+Y})},mf=function(n,s,a,c,m,E,k,A,B,Z){return o.extend(as(n,s,a,c,m,E,k,A,!0,B,!0),{u_texsize_icon:Z,u_texture_icon:1})},rc=function(n,s,a){return{u_matrix:n,u_opacity:s,u_color:a}},Eo=function(n,s,a,c,m,E){return o.extend(function(k,A,B,Z){var Y=B.imageManager.getPattern(k.from.toString()),Q=B.imageManager.getPattern(k.to.toString()),$=B.imageManager.getPixelSize(),ce=$.width,ae=$.height,de=Math.pow(2,Z.tileID.overscaledZ),ne=Z.tileSize*Math.pow(2,B.transform.tileZoom)/de,me=ne*(Z.tileID.canonical.x+Z.tileID.wrap*de),ge=ne*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[ce,ae],u_mix:A.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/zr(Z,1,B.transform.tileZoom),u_pixel_coord_upper:[me>>16,ge>>16],u_pixel_coord_lower:[65535&me,65535&ge]}}(c,E,a,m),{u_matrix:n,u_opacity:s})},fu={fillExtrusion:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_lightpos:new o.Uniform3f(n,s.u_lightpos),u_lightintensity:new o.Uniform1f(n,s.u_lightintensity),u_lightcolor:new o.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new o.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new o.Uniform1f(n,s.u_height_factor),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade),u_opacity:new o.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_texsize:new o.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new o.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new o.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new o.UniformColor(n,s.u_color),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_overlay:new o.Uniform1i(n,s.u_overlay),u_overlay_scale:new o.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new o.Uniform1f(n,s.u_extrude_scale),u_intensity:new o.Uniform1f(n,s.u_intensity),u_matrix:new o.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_world:new o.Uniform2f(n,s.u_world),u_image:new o.Uniform1i(n,s.u_image),u_color_ramp:new o.Uniform1i(n,s.u_color_ramp),u_opacity:new o.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_latrange:new o.Uniform2f(n,s.u_latrange),u_light:new o.Uniform2f(n,s.u_light),u_shadow:new o.UniformColor(n,s.u_shadow),u_highlight:new o.UniformColor(n,s.u_highlight),u_accent:new o.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_image:new o.Uniform1i(n,s.u_image),u_dimension:new o.Uniform2f(n,s.u_dimension),u_zoom:new o.Uniform1f(n,s.u_zoom),u_unpack:new o.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_image:new o.Uniform1i(n,s.u_image),u_image_height:new o.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_texsize:new o.Uniform2f(n,s.u_texsize),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_image:new o.Uniform1i(n,s.u_image),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_scale:new o.Uniform3f(n,s.u_scale),u_fade:new o.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_ratio:new o.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new o.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new o.Uniform1f(n,s.u_sdfgamma),u_image:new o.Uniform1i(n,s.u_image),u_tex_y_a:new o.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new o.Uniform1f(n,s.u_tex_y_b),u_mix:new o.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new o.Uniform2f(n,s.u_tl_parent),u_scale_parent:new o.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new o.Uniform1f(n,s.u_buffer_scale),u_fade_t:new o.Uniform1f(n,s.u_fade_t),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image0:new o.Uniform1i(n,s.u_image0),u_image1:new o.Uniform1i(n,s.u_image1),u_brightness_low:new o.Uniform1f(n,s.u_brightness_low),u_brightness_high:new o.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new o.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new o.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new o.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texture:new o.Uniform1i(n,s.u_texture),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new o.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new o.Uniform1f(n,s.u_size_t),u_size:new o.Uniform1f(n,s.u_size),u_camera_to_center_distance:new o.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new o.Uniform1f(n,s.u_pitch),u_rotate_symbol:new o.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new o.Uniform1f(n,s.u_fade_change),u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new o.Uniform1i(n,s.u_is_text),u_pitch_with_map:new o.Uniform1i(n,s.u_pitch_with_map),u_texsize:new o.Uniform2f(n,s.u_texsize),u_texsize_icon:new o.Uniform2f(n,s.u_texsize_icon),u_texture:new o.Uniform1i(n,s.u_texture),u_texture_icon:new o.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new o.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_color:new o.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new o.UniformMatrix4f(n,s.u_matrix),u_opacity:new o.Uniform1f(n,s.u_opacity),u_image:new o.Uniform1i(n,s.u_image),u_pattern_tl_a:new o.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(n,s.u_pattern_br_b),u_texsize:new o.Uniform2f(n,s.u_texsize),u_mix:new o.Uniform1f(n,s.u_mix),u_pattern_size_a:new o.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new o.Uniform1f(n,s.u_scale_a),u_scale_b:new o.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(n,s.u_tile_units_to_pixels)}}};function du(n,s,a,c,m,E,k){for(var A=n.context,B=A.gl,Z=n.useProgram("collisionBox"),Y=[],Q=0,$=0,ce=0;ce<c.length;ce++){var ae=c[ce],de=s.getTile(ae),ne=de.getBucket(a);if(ne){var me=ae.posMatrix;m[0]===0&&m[1]===0||(me=n.translatePosMatrix(ae.posMatrix,de,m,E));var ge=k?ne.textCollisionBox:ne.iconCollisionBox,Te=ne.collisionCircleArray;if(Te.length>0){var Be=o.create(),Ce=me;o.mul(Be,ne.placementInvProjMatrix,n.transform.glCoordMatrix),o.mul(Be,Be,ne.placementViewportMatrix),Y.push({circleArray:Te,circleOffset:$,transform:Ce,invTransform:Be}),$=Q+=Te.length/4}ge&&Z.draw(A,B.LINES,re.disabled,ue.disabled,n.colorModeForRenderPass(),xe.disabled,Sl(me,n.transform,de),a.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,null,n.transform.zoom,null,null,ge.collisionVertexBuffer)}}if(k&&Y.length){var Oe=n.useProgram("collisionCircle"),je=new o.StructArrayLayout2f1f2i16;je.resize(4*Q),je._trim();for(var He=0,Xe=0,ut=Y;Xe<ut.length;Xe+=1)for(var St=ut[Xe],xt=0;xt<St.circleArray.length/4;xt++){var kt=4*xt,ur=St.circleArray[kt+0],ot=St.circleArray[kt+1],zt=St.circleArray[kt+2],Rt=St.circleArray[kt+3];je.emplace(He++,ur,ot,zt,Rt,0),je.emplace(He++,ur,ot,zt,Rt,1),je.emplace(He++,ur,ot,zt,Rt,2),je.emplace(He++,ur,ot,zt,Rt,3)}(!wo||wo.length<2*Q)&&(wo=function(li){var kn=2*li,mn=new o.StructArrayLayout3ui6;mn.resize(kn),mn._trim();for(var Yr=0;Yr<kn;Yr++){var ki=6*Yr;mn.uint16[ki+0]=4*Yr+0,mn.uint16[ki+1]=4*Yr+1,mn.uint16[ki+2]=4*Yr+2,mn.uint16[ki+3]=4*Yr+2,mn.uint16[ki+4]=4*Yr+3,mn.uint16[ki+5]=4*Yr+0}return mn}(Q));for(var Pt=A.createIndexBuffer(wo,!0),Dt=A.createVertexBuffer(je,o.collisionCircleLayout.members,!0),Ht=0,Tt=Y;Ht<Tt.length;Ht+=1){var Et=Tt[Ht],rn=lp(Et.transform,Et.invTransform,n.transform);Oe.draw(A,B.TRIANGLES,re.disabled,ue.disabled,n.colorModeForRenderPass(),xe.disabled,rn,a.id,Dt,Pt,o.SegmentVector.simpleSegment(0,2*Et.circleOffset,Et.circleArray.length,Et.circleArray.length/2),null,n.transform.zoom,null,null,null)}Dt.destroy(),Pt.destroy()}}var $n=o.identity(new Float32Array(16));function $c(n,s,a,c,m,E){var k=o.getAnchorAlignment(n),A=-(k.horizontalAlign-.5)*s,B=-(k.verticalAlign-.5)*a,Z=o.evaluateVariableOffset(n,c);return new o.Point((A/m+Z[0])*E,(B/m+Z[1])*E)}function yf(n,s,a,c,m,E,k,A,B,Z,Y){var Q=n.text.placedSymbolArray,$=n.text.dynamicLayoutVertexArray,ce=n.icon.dynamicLayoutVertexArray,ae={};$.clear();for(var de=0;de<Q.length;de++){var ne=Q.get(de),me=ne.hidden||!ne.crossTileID||n.allowVerticalPlacement&&!ne.placedOrientation?null:c[ne.crossTileID];if(me){var ge=new o.Point(ne.anchorX,ne.anchorY),Te=Kt(ge,a?A:k),Be=ir(E.cameraToCenterDistance,Te.signedDistanceFromCamera),Ce=m.evaluateSizeForFeature(n.textSizeData,Z,ne)*Be/o.ONE_EM;a&&(Ce*=n.tilePixelRatio/B);for(var Oe=$c(me.anchor,me.width,me.height,me.textOffset,me.textBoxScale,Ce),je=a?Kt(ge.add(Oe),k).point:Te.point.add(s?Oe.rotate(-E.angle):Oe),He=n.allowVerticalPlacement&&ne.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Xe=0;Xe<ne.numGlyphs;Xe++)o.addDynamicAttributes($,je,He);Y&&ne.associatedIconIndex>=0&&(ae[ne.associatedIconIndex]={shiftedAnchor:je,angle:He})}else Vi(ne.numGlyphs,$)}if(Y){ce.clear();for(var ut=n.icon.placedSymbolArray,St=0;St<ut.length;St++){var xt=ut.get(St);if(xt.hidden)Vi(xt.numGlyphs,ce);else{var kt=ae[St];if(kt)for(var ur=0;ur<xt.numGlyphs;ur++)o.addDynamicAttributes(ce,kt.shiftedAnchor,kt.angle);else Vi(xt.numGlyphs,ce)}}n.icon.dynamicLayoutVertexBuffer.updateData(ce)}n.text.dynamicLayoutVertexBuffer.updateData($)}function vf(n,s,a){return a.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Ba(n,s,a,c,m,E,k,A,B,Z,Y,Q){for(var $=n.context,ce=$.gl,ae=n.transform,de=A==="map",ne=B==="map",me=de&&a.layout.get("symbol-placement")!=="point",ge=de&&!ne&&!me,Te=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Be=!1,Ce=n.depthModeForSublayer(0,re.ReadOnly),Oe=a.layout.get("text-variable-anchor"),je=[],He=0,Xe=c;He<Xe.length;He+=1){var ut=Xe[He],St=s.getTile(ut),xt=St.getBucket(a);if(xt){var kt=m?xt.text:xt.icon;if(kt&&kt.segments.get().length){var ur=kt.programConfigurations.get(a.id),ot=m||xt.sdfIcons,zt=m?xt.textSizeData:xt.iconSizeData,Rt=ne||ae.pitch!==0,Pt=n.useProgram(vf(ot,m,xt),ur),Dt=o.evaluateSizeForZoom(zt,ae.zoom),Ht=void 0,Tt=[0,0],Et=void 0,rn=void 0,li=null,kn=void 0;if(m)Et=St.glyphAtlasTexture,rn=ce.LINEAR,Ht=St.glyphAtlasTexture.size,xt.iconsInText&&(Tt=St.imageAtlasTexture.size,li=St.imageAtlasTexture,kn=Rt||n.options.rotating||n.options.zooming||zt.kind==="composite"||zt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{var mn=a.layout.get("icon-size").constantOr(0)!==1||xt.iconsNeedLinear;Et=St.imageAtlasTexture,rn=ot||n.options.rotating||n.options.zooming||mn||Rt?ce.LINEAR:ce.NEAREST,Ht=St.imageAtlasTexture.size}var Yr=zr(St,1,n.transform.zoom),ki=dr(ut.posMatrix,ne,de,n.transform,Yr),va=pr(ut.posMatrix,ne,de,n.transform,Yr),ui=Oe&&xt.hasTextData(),ra=a.layout.get("icon-text-fit")!=="none"&&ui&&xt.hasIconData();me&&ha(xt,ut.posMatrix,n,m,ki,va,ne,Z);var _i=n.translatePosMatrix(ut.posMatrix,St,E,k),Rn=me||m&&Oe||ra?$n:ki,qa=n.translatePosMatrix(va,St,E,k,!0),ms=ot&&a.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,oh={program:Pt,buffers:kt,uniformValues:ot?xt.iconsInText?mf(zt.kind,Dt,ge,ne,n,_i,Rn,qa,Ht,Tt):as(zt.kind,Dt,ge,ne,n,_i,Rn,qa,m,Ht,!0):pu(zt.kind,Dt,ge,ne,n,_i,Rn,qa,m,Ht),atlasTexture:Et,atlasTextureIcon:li,atlasInterpolation:rn,atlasInterpolationIcon:kn,isSDF:ot,hasHalo:ms};if(Te&&xt.canOverlap){Be=!0;for(var Hs=0,Po=kt.segments.get();Hs<Po.length;Hs+=1){var ys=Po[Hs];je.push({segments:new o.SegmentVector([ys]),sortKey:ys.sortKey,state:oh})}}else je.push({segments:kt.segments,sortKey:0,state:oh})}}}Be&&je.sort(function(Ta,Ml){return Ta.sortKey-Ml.sortKey});for(var Co=0,vs=je;Co<vs.length;Co+=1){var ja=vs[Co],nn=ja.state;if($.activeTexture.set(ce.TEXTURE0),nn.atlasTexture.bind(nn.atlasInterpolation,ce.CLAMP_TO_EDGE),nn.atlasTextureIcon&&($.activeTexture.set(ce.TEXTURE1),nn.atlasTextureIcon&&nn.atlasTextureIcon.bind(nn.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),nn.isSDF){var gs=nn.uniformValues;nn.hasHalo&&(gs.u_is_halo=1,eh(nn.buffers,ja.segments,a,n,nn.program,Ce,Y,Q,gs)),gs.u_is_halo=0}eh(nn.buffers,ja.segments,a,n,nn.program,Ce,Y,Q,nn.uniformValues)}}function eh(n,s,a,c,m,E,k,A,B){var Z=c.context;m.draw(Z,Z.gl.TRIANGLES,E,k,A,xe.disabled,B,a.id,n.layoutVertexBuffer,n.indexBuffer,s,a.paint,c.transform.zoom,n.programConfigurations.get(a.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function th(n,s,a,c,m,E,k){var A,B,Z,Y,Q,$=n.context.gl,ce=a.paint.get("fill-pattern"),ae=ce&&ce.constantOr(1),de=a.getCrossfadeParameters();k?(B=ae&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",A=$.LINES):(B=ae?"fillPattern":"fill",A=$.TRIANGLES);for(var ne=0,me=c;ne<me.length;ne+=1){var ge=me[ne],Te=s.getTile(ge);if(!ae||Te.patternsLoaded()){var Be=Te.getBucket(a);if(Be){var Ce=Be.programConfigurations.get(a.id),Oe=n.useProgram(B,Ce);ae&&(n.context.activeTexture.set($.TEXTURE0),Te.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),Ce.updatePaintBuffers(de));var je=ce.constantOr(null);if(je&&Te.imageAtlas){var He=Te.imageAtlas,Xe=He.patternPositions[je.to.toString()],ut=He.patternPositions[je.from.toString()];Xe&&ut&&Ce.setConstantPatternPositions(Xe,ut)}var St=n.translatePosMatrix(ge.posMatrix,Te,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(k){Y=Be.indexBuffer2,Q=Be.segments2;var xt=[$.drawingBufferWidth,$.drawingBufferHeight];Z=B==="fillOutlinePattern"&&ae?El(St,n,de,Te,xt):pf(St,xt)}else Y=Be.indexBuffer,Q=Be.segments,Z=ae?wl(St,n,de,Te):bo(St);Oe.draw(n.context,A,m,n.stencilModeForClipping(ge),E,xe.disabled,Z,a.id,Be.layoutVertexBuffer,Y,Q,a.paint,n.transform.zoom,Ce)}}}}function Ns(n,s,a,c,m,E,k){for(var A=n.context,B=A.gl,Z=a.paint.get("fill-extrusion-pattern"),Y=Z.constantOr(1),Q=a.getCrossfadeParameters(),$=a.paint.get("fill-extrusion-opacity"),ce=0,ae=c;ce<ae.length;ce+=1){var de=ae[ce],ne=s.getTile(de),me=ne.getBucket(a);if(me){var ge=me.programConfigurations.get(a.id),Te=n.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",ge);Y&&(n.context.activeTexture.set(B.TEXTURE0),ne.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),ge.updatePaintBuffers(Q));var Be=Z.constantOr(null);if(Be&&ne.imageAtlas){var Ce=ne.imageAtlas,Oe=Ce.patternPositions[Be.to.toString()],je=Ce.patternPositions[Be.from.toString()];Oe&&je&&ge.setConstantPatternPositions(Oe,je)}var He=n.translatePosMatrix(de.posMatrix,ne,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Xe=a.paint.get("fill-extrusion-vertical-gradient"),ut=Y?eo(He,n,Xe,$,de,Q,ne):hf(He,n,Xe,$);Te.draw(A,A.gl.TRIANGLES,m,E,k,xe.backCCW,ut,a.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,a.paint,n.transform.zoom,ge)}}}function Us(n,s,a,c,m,E){var k=n.context,A=k.gl,B=s.fbo;if(B){var Z=n.useProgram("hillshade");k.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,B.colorAttachment.get());var Y=function(Q,$,ce){var ae=ce.paint.get("hillshade-shadow-color"),de=ce.paint.get("hillshade-highlight-color"),ne=ce.paint.get("hillshade-accent-color"),me=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=Q.transform.angle);var ge,Te,Be,Ce=!Q.options.moving;return{u_matrix:Q.transform.calculatePosMatrix($.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:(ge=$.tileID,Te=Math.pow(2,ge.canonical.z),Be=ge.canonical.y,[new o.MercatorCoordinate(0,Be/Te).toLngLat().lat,new o.MercatorCoordinate(0,(Be+1)/Te).toLngLat().lat]),u_light:[ce.paint.get("hillshade-exaggeration"),me],u_shadow:ae,u_highlight:de,u_accent:ne}}(n,s,a);Z.draw(k,A.TRIANGLES,c,m,E,xe.disabled,Y,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function os(n,s,a,c,m,E){var k=n.context,A=k.gl,B=s.dem;if(B&&B.data){var Z=B.dim,Y=B.stride,Q=B.getPixels();if(k.activeTexture.set(A.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(Y),s.demTexture){var $=s.demTexture;$.update(Q,{premultiply:!1}),$.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else s.demTexture=new o.Texture(k,Q,A.RGBA,{premultiply:!1}),s.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);k.activeTexture.set(A.TEXTURE0);var ce=s.fbo;if(!ce){var ae=new o.Texture(k,{width:Z,height:Z,data:null},A.RGBA);ae.bind(A.LINEAR,A.CLAMP_TO_EDGE),(ce=s.fbo=k.createFramebuffer(Z,Z,!0)).colorAttachment.set(ae.texture)}k.bindFramebuffer.set(ce.framebuffer),k.viewport.set([0,0,Z,Z]),n.useProgram("hillshadePrepare").draw(k,A.TRIANGLES,c,m,E,xe.disabled,function(de,ne){var me=ne.stride,ge=o.create();return o.ortho(ge,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(ge,ge,[0,-o.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[me,me],u_zoom:de.overscaledZ,u_unpack:ne.getUnpackVector()}}(s.tileID,B),a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function kl(n,s,a,c,m){var E=c.paint.get("raster-fade-duration");if(E>0){var k=o.browser.now(),A=(k-n.timeAdded)/E,B=s?(k-s.timeAdded)/E:-1,Z=a.getSource(),Y=m.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),Q=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(n.tileID.overscaledZ-Y),$=Q&&n.refreshedUponExpiration?1:o.clamp(Q?A:1-B,0,1);return n.refreshedUponExpiration&&A>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-$}:{opacity:$,mix:0}}return{opacity:1,mix:0}}var up=new o.Color(1,0,0,1),gf=new o.Color(0,1,0,1),Il=new o.Color(0,0,1,1),Oa=new o.Color(1,0,1,1),cp=new o.Color(0,1,1,1);function ic(n,s,a,c){nc(n,0,s+a/2,n.transform.width,a,c)}function rh(n,s,a,c){nc(n,s-a/2,0,a,n.transform.height,c)}function nc(n,s,a,c,m,E){var k=n.context,A=k.gl;A.enable(A.SCISSOR_TEST),A.scissor(s*o.browser.devicePixelRatio,a*o.browser.devicePixelRatio,c*o.browser.devicePixelRatio,m*o.browser.devicePixelRatio),k.clear({color:E}),A.disable(A.SCISSOR_TEST)}function ac(n,s,a){var c=n.context,m=c.gl,E=a.posMatrix,k=n.useProgram("debug"),A=re.disabled,B=ue.disabled,Z=n.colorModeForRenderPass();c.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),k.draw(c,m.LINE_STRIP,A,B,Z,xe.disabled,ns(E,o.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var Y=s.getTileByID(a.key).latestRawTileData,Q=Math.floor((Y&&Y.byteLength||0)/1024),$=s.getTile(a).tileSize,ce=512/Math.min($,512)*(a.overscaledZ/n.transform.zoom)*.5,ae=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(ae+=" => "+a.overscaledZ),function(de,ne){de.initDebugOverlayCanvas();var me=de.debugOverlayCanvas,ge=de.context.gl,Te=de.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,me.width,me.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(ne,5,5),Te.strokeText(ne,5,5),de.debugOverlayTexture.update(me),de.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}(n,ae+" "+Q+"kb"),k.draw(c,m.TRIANGLES,A,B,ve.alphaBlended,xe.disabled,ns(E,o.Color.transparent,ce),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var Tl={symbol:function(n,s,a,c,m){if(n.renderPass==="translucent"){var E=ue.disabled,k=n.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(A,B,Z,Y,Q,$,ce){for(var ae=B.transform,de=Q==="map",ne=$==="map",me=0,ge=A;me<ge.length;me+=1){var Te=ge[me],Be=Y.getTile(Te),Ce=Be.getBucket(Z);if(Ce&&Ce.text&&Ce.text.segments.get().length){var Oe=o.evaluateSizeForZoom(Ce.textSizeData,ae.zoom),je=zr(Be,1,B.transform.zoom),He=dr(Te.posMatrix,ne,de,B.transform,je),Xe=Z.layout.get("icon-text-fit")!=="none"&&Ce.hasIconData();if(Oe){var ut=Math.pow(2,ae.zoom-Be.tileID.overscaledZ);yf(Ce,de,ne,ce,o.symbolSize,ae,He,Te.posMatrix,ut,Oe,Xe)}}}}(c,n,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),m),a.paint.get("icon-opacity").constantOr(1)!==0&&Ba(n,s,a,c,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),E,k),a.paint.get("text-opacity").constantOr(1)!==0&&Ba(n,s,a,c,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),E,k),s.map.showCollisionBoxes&&(du(n,s,a,c,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),du(n,s,a,c,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("circle-opacity"),E=a.paint.get("circle-stroke-width"),k=a.paint.get("circle-stroke-opacity"),A=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||E.constantOr(1)!==0&&k.constantOr(1)!==0){for(var B=n.context,Z=B.gl,Y=n.depthModeForSublayer(0,re.ReadOnly),Q=ue.disabled,$=n.colorModeForRenderPass(),ce=[],ae=0;ae<c.length;ae++){var de=c[ae],ne=s.getTile(de),me=ne.getBucket(a);if(me){var ge=me.programConfigurations.get(a.id),Te={programConfiguration:ge,program:n.useProgram("circle",ge),layoutVertexBuffer:me.layoutVertexBuffer,indexBuffer:me.indexBuffer,uniformValues:Vs(n,de,ne,a)};if(A)for(var Be=0,Ce=me.segments.get();Be<Ce.length;Be+=1){var Oe=Ce[Be];ce.push({segments:new o.SegmentVector([Oe]),sortKey:Oe.sortKey,state:Te})}else ce.push({segments:me.segments,sortKey:0,state:Te})}}A&&ce.sort(function(St,xt){return St.sortKey-xt.sortKey});for(var je=0,He=ce;je<He.length;je+=1){var Xe=He[je],ut=Xe.state;ut.program.draw(B,Z.TRIANGLES,Y,Q,$,xe.disabled,ut.uniformValues,a.id,ut.layoutVertexBuffer,ut.indexBuffer,Xe.segments,a.paint,n.transform.zoom,ut.programConfiguration)}}}},heatmap:function(n,s,a,c){if(a.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,E=m.gl,k=ue.disabled,A=new ve([E.ONE,E.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ce,ae,de){var ne=ce.gl;ce.activeTexture.set(ne.TEXTURE1),ce.viewport.set([0,0,ae.width/4,ae.height/4]);var me=de.heatmapFbo;if(me)ne.bindTexture(ne.TEXTURE_2D,me.colorAttachment.get()),ce.bindFramebuffer.set(me.framebuffer);else{var ge=ne.createTexture();ne.bindTexture(ne.TEXTURE_2D,ge),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),me=de.heatmapFbo=ce.createFramebuffer(ae.width/4,ae.height/4,!1),function(Te,Be,Ce,Oe){var je=Te.gl;je.texImage2D(je.TEXTURE_2D,0,je.RGBA,Be.width/4,Be.height/4,0,je.RGBA,Te.extRenderToTextureHalfFloat?Te.extTextureHalfFloat.HALF_FLOAT_OES:je.UNSIGNED_BYTE,null),Oe.colorAttachment.set(Ce)}(ce,ae,ge,me)}})(m,n,a),m.clear({color:o.Color.transparent});for(var B=0;B<c.length;B++){var Z=c[B];if(!s.hasRenderableParent(Z)){var Y=s.getTile(Z),Q=Y.getBucket(a);if(Q){var $=Q.programConfigurations.get(a.id);n.useProgram("heatmap",$).draw(m,E.TRIANGLES,re.disabled,k,A,xe.disabled,ff(Z.posMatrix,Y,n.transform.zoom,a.paint.get("heatmap-intensity")),a.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,a.paint,n.transform.zoom,$)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(ce,ae){var de=ce.context,ne=de.gl,me=ae.heatmapFbo;if(me){de.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,me.colorAttachment.get()),de.activeTexture.set(ne.TEXTURE1);var ge=ae.colorRampTexture;ge||(ge=ae.colorRampTexture=new o.Texture(de,ae.colorRamp,ne.RGBA)),ge.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(de,ne.TRIANGLES,re.disabled,ue.disabled,ce.colorModeForRenderPass(),xe.disabled,function(Te,Be,Ce,Oe){var je=o.create();o.ortho(je,0,Te.width,Te.height,0,0,1);var He=Te.context.gl;return{u_matrix:je,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Be.paint.get("heatmap-opacity")}}(ce,ae),ae.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,ae.paint,ce.transform.zoom)}}(n,a))},line:function(n,s,a,c){if(n.renderPass==="translucent"){var m=a.paint.get("line-opacity"),E=a.paint.get("line-width");if(m.constantOr(1)!==0&&E.constantOr(1)!==0)for(var k=n.depthModeForSublayer(0,re.ReadOnly),A=n.colorModeForRenderPass(),B=a.paint.get("line-dasharray"),Z=a.paint.get("line-pattern"),Y=Z.constantOr(1),Q=a.paint.get("line-gradient"),$=a.getCrossfadeParameters(),ce=Y?"linePattern":B?"lineSDF":Q?"lineGradient":"line",ae=n.context,de=ae.gl,ne=!0,me=0,ge=c;me<ge.length;me+=1){var Te=ge[me],Be=s.getTile(Te);if(!Y||Be.patternsLoaded()){var Ce=Be.getBucket(a);if(Ce){var Oe=Ce.programConfigurations.get(a.id),je=n.context.program.get(),He=n.useProgram(ce,Oe),Xe=ne||He.program!==je,ut=Z.constantOr(null);if(ut&&Be.imageAtlas){var St=Be.imageAtlas,xt=St.patternPositions[ut.to.toString()],kt=St.patternPositions[ut.from.toString()];xt&&kt&&Oe.setConstantPatternPositions(xt,kt)}var ur=Y?Qc(n,Be,a,$):B?vd(n,Be,a,B,$):Q?Sr(n,Be,a,Ce.lineClipsArray.length):xo(n,Be,a);if(Y)ae.activeTexture.set(de.TEXTURE0),Be.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Oe.updatePaintBuffers($);else if(B&&(Xe||n.lineAtlas.dirty))ae.activeTexture.set(de.TEXTURE0),n.lineAtlas.bind(ae);else if(Q){var ot=Ce.gradients[a.id],zt=ot.texture;if(a.gradientVersion!==ot.version){var Rt=256;if(a.stepInterpolant){var Pt=s.getSource().maxzoom,Dt=Te.canonical.z===Pt?Math.ceil(1<<n.transform.maxZoom-Te.canonical.z):1;Rt=o.clamp(o.nextPowerOfTwo(Ce.maxLineLength/o.EXTENT*1024*Dt),256,ae.maxTextureSize)}ot.gradient=o.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Rt,image:ot.gradient||void 0,clips:Ce.lineClipsArray}),ot.texture?ot.texture.update(ot.gradient):ot.texture=new o.Texture(ae,ot.gradient,de.RGBA),ot.version=a.gradientVersion,zt=ot.texture}ae.activeTexture.set(de.TEXTURE0),zt.bind(a.stepInterpolant?de.NEAREST:de.LINEAR,de.CLAMP_TO_EDGE)}He.draw(ae,de.TRIANGLES,k,n.stencilModeForClipping(Te),A,xe.disabled,ur,a.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,a.paint,n.transform.zoom,Oe,Ce.layoutVertexBuffer2),ne=!1}}}}},fill:function(n,s,a,c){var m=a.paint.get("fill-color"),E=a.paint.get("fill-opacity");if(E.constantOr(1)!==0){var k=n.colorModeForRenderPass(),A=a.paint.get("fill-pattern"),B=n.opaquePassEnabledForLayer()&&!A.constantOr(1)&&m.constantOr(o.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===B){var Z=n.depthModeForSublayer(1,n.renderPass==="opaque"?re.ReadWrite:re.ReadOnly);th(n,s,a,c,Z,k,!1)}if(n.renderPass==="translucent"&&a.paint.get("fill-antialias")){var Y=n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,re.ReadOnly);th(n,s,a,c,Y,k,!0)}}},"fill-extrusion":function(n,s,a,c){var m=a.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var E=new re(n.context.gl.LEQUAL,re.ReadWrite,n.depthRangeFor3D);if(m!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Ns(n,s,a,c,E,ue.disabled,ve.disabled),Ns(n,s,a,c,E,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var k=n.colorModeForRenderPass();Ns(n,s,a,c,E,ue.disabled,k)}}},hillshade:function(n,s,a,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,E=n.depthModeForSublayer(0,re.ReadOnly),k=n.colorModeForRenderPass(),A=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],B=A[0],Z=0,Y=A[1];Z<Y.length;Z+=1){var Q=Y[Z],$=s.getTile(Q);$.needsHillshadePrepare&&n.renderPass==="offscreen"?os(n,$,a,E,ue.disabled,k):n.renderPass==="translucent"&&Us(n,$,a,E,B[Q.overscaledZ],k)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,a,c){if(n.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&c.length)for(var m=n.context,E=m.gl,k=s.getSource(),A=n.useProgram("raster"),B=n.colorModeForRenderPass(),Z=k instanceof fr?[{},c]:n.stencilConfigForOverlap(c),Y=Z[0],Q=Z[1],$=Q[Q.length-1].overscaledZ,ce=!n.options.moving,ae=0,de=Q;ae<de.length;ae+=1){var ne=de[ae],me=n.depthModeForSublayer(ne.overscaledZ-$,a.paint.get("raster-opacity")===1?re.ReadWrite:re.ReadOnly,E.LESS),ge=s.getTile(ne),Te=n.transform.calculatePosMatrix(ne.toUnwrapped(),ce);ge.registerFadeDuration(a.paint.get("raster-fade-duration"));var Be=s.findLoadedParent(ne,0),Ce=kl(ge,Be,s,a,n.transform),Oe=void 0,je=void 0,He=a.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;m.activeTexture.set(E.TEXTURE0),ge.texture.bind(He,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(E.TEXTURE1),Be?(Be.texture.bind(He,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,Be.tileID.overscaledZ-ge.tileID.overscaledZ),je=[ge.tileID.canonical.x*Oe%1,ge.tileID.canonical.y*Oe%1]):ge.texture.bind(He,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);var Xe=Fs(Te,je||[0,0],Oe||1,Ce,a);k instanceof fr?A.draw(m,E.TRIANGLES,me,ue.disabled,B,xe.disabled,Xe,a.id,k.boundsBuffer,n.quadTriangleIndexBuffer,k.boundsSegments):A.draw(m,E.TRIANGLES,me,Y[ne.overscaledZ],B,xe.disabled,Xe,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,a){var c=a.paint.get("background-color"),m=a.paint.get("background-opacity");if(m!==0){var E=n.context,k=E.gl,A=n.transform,B=A.tileSize,Z=a.paint.get("background-pattern");if(!n.isPatternMissing(Z)){var Y=!Z&&c.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===Y){var Q=ue.disabled,$=n.depthModeForSublayer(0,Y==="opaque"?re.ReadWrite:re.ReadOnly),ce=n.colorModeForRenderPass(),ae=n.useProgram(Z?"backgroundPattern":"background"),de=A.coveringTiles({tileSize:B});Z&&(E.activeTexture.set(k.TEXTURE0),n.imageManager.bind(n.context));for(var ne=a.getCrossfadeParameters(),me=0,ge=de;me<ge.length;me+=1){var Te=ge[me],Be=n.transform.calculatePosMatrix(Te.toUnwrapped()),Ce=Z?Eo(Be,m,n,Z,{tileID:Te,tileSize:B},ne):rc(Be,m,c);ae.draw(E,k.TRIANGLES,$,Q,ce,xe.disabled,Ce,a.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,a){for(var c=0;c<a.length;c++)ac(n,s,a[c])},custom:function(n,s,a){var c=n.context,m=a.implementation;if(n.renderPass==="offscreen"){var E=m.prerender;E&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),E.call(m,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(ue.disabled);var k=m.renderingMode==="3d"?new re(n.context.gl.LEQUAL,re.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,re.ReadOnly);c.setDepthMode(k),m.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},ii=function(n,s){this.context=new H(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=oe.maxUnderzooming+oe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ke,this.gpuTimers={}};ii.prototype.resize=function(n,s){if(this.width=n*o.browser.devicePixelRatio,this.height=s*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize()},ii.prototype.setup=function(){var n=this.context,s=new o.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(o.EXTENT,0),s.emplaceBack(0,o.EXTENT),s.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Pi.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var a=new o.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(o.EXTENT,0),a.emplaceBack(0,o.EXTENT),a.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=n.createVertexBuffer(a,Pi.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var c=new o.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(o.EXTENT,0,o.EXTENT,0),c.emplaceBack(0,o.EXTENT,0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,nt.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var m=new o.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,Pi.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var E=new o.StructArrayLayout1ui2;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(E);var k=new o.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k),this.emptyTexture=new o.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var A=this.context.gl;this.stencilClearMode=new ue({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)},ii.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=o.create();o.ortho(a,0,this.width,this.height,0,0,1),o.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,re.disabled,this.stencilClearMode,ve.disabled,xe.disabled,Ra(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ii.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var a=this.context,c=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(ve.disabled),a.setDepthMode(re.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var E=0,k=s;E<k.length;E+=1){var A=k[E],B=this._tileClippingMaskIDs[A.key]=this.nextStencilID++;m.draw(a,c.TRIANGLES,re.disabled,new ue({func:c.ALWAYS,mask:0},B,255,c.KEEP,c.KEEP,c.REPLACE),ve.disabled,xe.disabled,Ra(A.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ii.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new ue({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},ii.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new ue({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},ii.prototype.stencilConfigForOverlap=function(n){var s,a=this.context.gl,c=n.sort(function(B,Z){return Z.overscaledZ-B.overscaledZ}),m=c[c.length-1].overscaledZ,E=c[0].overscaledZ-m+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();for(var k={},A=0;A<E;A++)k[A+m]=new ue({func:a.GEQUAL,mask:255},A+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=E,[k,c]}return[(s={},s[m]=ue.disabled,s),c]},ii.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ve([n.CONSTANT_COLOR,n.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ve.unblended:ve.alphaBlended},ii.prototype.depthModeForSublayer=function(n,s,a){if(!this.opaquePassEnabledForLayer())return re.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new re(a||this.context.gl.LEQUAL,s,[c,c])},ii.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ii.prototype.render=function(n,s){var a=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var c=this.style._order,m=this.style.sourceCaches;for(var E in m){var k=m[E];k.used&&k.prepare(this.context)}var A,B,Z={},Y={},Q={};for(var $ in m){var ce=m[$];Z[$]=ce.getVisibleCoordinates(),Y[$]=Z[$].slice().reverse(),Q[$]=ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ae=0;ae<c.length;ae++)if(this.style._layers[c[ae]].is3D()){this.opaquePassCutoff=ae;break}this.renderPass="offscreen";for(var de=0,ne=c;de<ne.length;de+=1){var me=this.style._layers[ne[de]];if(me.hasOffscreenPass()&&!me.isHidden(this.transform.zoom)){var ge=Y[me.source];(me.type==="custom"||ge.length)&&this.renderLayer(this,m[me.source],me,ge)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var Te=this.style._layers[c[this.currentLayer]],Be=m[Te.source],Ce=Z[Te.source];this._renderTileClippingMasks(Te,Ce),this.renderLayer(this,Be,Te,Ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Oe=this.style._layers[c[this.currentLayer]],je=m[Oe.source],He=(Oe.type==="symbol"?Q:Y)[Oe.source];this._renderTileClippingMasks(Oe,Z[Oe.source]),this.renderLayer(this,je,Oe,He)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Xe){Xe.source&&!Xe.isHidden(a.transform.zoom)&&(Xe.source!==(B&&B.id)&&(B=a.style.sourceCaches[Xe.source]),(!A||A.getSource().maxzoom<B.getSource().maxzoom)&&(A=B))}),A&&Tl.debug(this,A,A.getVisibleCoordinates())),this.options.showPadding&&function(Xe){var ut=Xe.transform.padding;ic(Xe,Xe.transform.height-(ut.top||0),3,up),ic(Xe,ut.bottom||0,3,gf),rh(Xe,ut.left||0,3,Il),rh(Xe,Xe.transform.width-(ut.right||0),3,Oa);var St=Xe.transform.centerPoint;(function(xt,kt,ur,ot){nc(xt,kt-1,ur-10,2,20,ot),nc(xt,kt-10,ur-1,20,2,ot)})(Xe,St.x,Xe.transform.height-St.y,cp)}(this),this.context.setDefault()},ii.prototype.renderLayer=function(n,s,a,c){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||c.length)&&(this.id=a.id,this.gpuTimingStart(a),Tl[a.type](n,s,a,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},ii.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[n.id];a||(a=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},ii.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},ii.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},ii.prototype.queryGpuTimers=function(n){var s={};for(var a in n){var c=n[a],m=this.context.extTimerQuery,E=m.getQueryObjectEXT(c.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(c.query),s[a]=E}return s},ii.prototype.translatePosMatrix=function(n,s,a,c,m){if(!a[0]&&!a[1])return n;var E=m?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(E){var k=Math.sin(E),A=Math.cos(E);a=[a[0]*A-a[1]*k,a[0]*k+a[1]*A]}var B=[m?a[0]:zr(s,a[0],this.transform.zoom),m?a[1]:zr(s,a[1],this.transform.zoom),0],Z=new Float32Array(16);return o.translate(Z,n,B),Z},ii.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},ii.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},ii.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),a=this.imageManager.getPattern(n.to.toString());return!s||!a},ii.prototype.useProgram=function(n,s){this.cache=this.cache||{};var a=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new cu(this.context,n,tc[n],s,fu[n],this._showOverdrawInspector)),this.cache[a]},ii.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ii.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},ii.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ii.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var fa=function(n,s){this.points=n,this.planes=s};fa.fromInvProjectionMatrix=function(n,s,a){var c=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(k){return o.transformMat4([],k,n)}).map(function(k){return o.scale$1([],k,1/k[3]/s*c)}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(k){var A=o.sub([],m[k[0]],m[k[1]]),B=o.sub([],m[k[2]],m[k[1]]),Z=o.normalize([],o.cross([],A,B)),Y=-o.dot(Z,m[k[1]]);return Z.concat(Y)});return new fa(m,E)};var da=function(n,s){this.min=n,this.max=s,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};da.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],a=o.clone$2(this.min),c=o.clone$2(this.max),m=0;m<s.length;m++)a[m]=s[m]?this.min[m]:this.center[m],c[m]=s[m]?this.center[m]:this.max[m];return c[2]=this.max[2],new da(a,c)},da.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},da.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},da.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,c=0;c<n.planes.length;c++){for(var m=n.planes[c],E=0,k=0;k<s.length;k++)E+=o.dot$1(m,s[k])>=0;if(E===0)return 0;E!==s.length&&(a=!1)}if(a)return 2;for(var A=0;A<3;A++){for(var B=Number.MAX_VALUE,Z=-Number.MAX_VALUE,Y=0;Y<n.points.length;Y++){var Q=n.points[Y][A]-this.min[A];B=Math.min(B,Q),Z=Math.max(Z,Q)}if(Z<0||B>this.max[A]-this.min[A])return 0}return 1};var Dn=function(n,s,a,c){if(n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=a,this.right=c};Dn.prototype.interpolate=function(n,s,a){return s.top!=null&&n.top!=null&&(this.top=o.number(n.top,s.top,a)),s.bottom!=null&&n.bottom!=null&&(this.bottom=o.number(n.bottom,s.bottom,a)),s.left!=null&&n.left!=null&&(this.left=o.number(n.left,s.left,a)),s.right!=null&&n.right!=null&&(this.right=o.number(n.right,s.right,a)),this},Dn.prototype.getCenter=function(n,s){var a=o.clamp((this.left+n-this.right)/2,0,n),c=o.clamp((this.top+s-this.bottom)/2,0,s);return new o.Point(a,c)},Dn.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Dn.prototype.clone=function(){return new Dn(this.top,this.bottom,this.left,this.right)},Dn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Qt=function(n,s,a,c,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=a==null?0:a,this._maxPitch=c==null?60:c,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Dn,this._posMatrixCache={},this._alignedPosMatrixCache={}},jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Qt.prototype.clone=function(){var n=new Qt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},jr.minZoom.get=function(){return this._minZoom},jr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},jr.maxZoom.get=function(){return this._maxZoom},jr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},jr.minPitch.get=function(){return this._minPitch},jr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},jr.maxPitch.get=function(){return this._maxPitch},jr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},jr.renderWorldCopies.get=function(){return this._renderWorldCopies},jr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},jr.worldSize.get=function(){return this.tileSize*this.scale},jr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},jr.size.get=function(){return new o.Point(this.width,this.height)},jr.bearing.get=function(){return-this.angle/Math.PI*180},jr.bearing.set=function(n){var s=-o.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},jr.pitch.get=function(){return this._pitch/Math.PI*180},jr.pitch.set=function(n){var s=o.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},jr.fov.get=function(){return this._fov/Math.PI*180},jr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},jr.zoom.get=function(){return this._zoom},jr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},jr.center.get=function(){return this._center},jr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},jr.padding.get=function(){return this._edgeInsets.toJSON()},jr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},jr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Qt.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},Qt.prototype.interpolatePadding=function(n,s,a){this._unmodified=!1,this._edgeInsets.interpolate(n,s,a),this._constrain(),this._calcMatrices()},Qt.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},Qt.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new o.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new o.Point(0,0)),c=this.pointCoordinate(new o.Point(this.width,0)),m=this.pointCoordinate(new o.Point(this.width,this.height)),E=this.pointCoordinate(new o.Point(0,this.height)),k=Math.floor(Math.min(a.x,c.x,m.x,E.x)),A=Math.floor(Math.max(a.x,c.x,m.x,E.x)),B=k-1;B<=A+1;B++)B!==0&&s.push(new o.UnwrappedTileID(B,n));return s},Qt.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),a=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=o.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),E=[m*c.x,m*c.y,0],k=fa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),A=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(A=s);var B=function(Xe){return{aabb:new da([Xe*m,0,0],[(Xe+1)*m,m,0]),zoom:0,x:0,y:0,wrap:Xe,fullyVisible:!1}},Z=[],Y=[],Q=s,$=n.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var ce=1;ce<=3;ce++)Z.push(B(-ce)),Z.push(B(ce));for(Z.push(B(0));Z.length>0;){var ae=Z.pop(),de=ae.x,ne=ae.y,me=ae.fullyVisible;if(!me){var ge=ae.aabb.intersects(k);if(ge===0)continue;me=ge===2}var Te=ae.aabb.distanceX(E),Be=ae.aabb.distanceY(E),Ce=Math.max(Math.abs(Te),Math.abs(Be));if(ae.zoom===Q||Ce>3+(1<<Q-ae.zoom)-2&&ae.zoom>=A)Y.push({tileID:new o.OverscaledTileID(ae.zoom===Q?$:ae.zoom,ae.wrap,ae.zoom,de,ne),distanceSq:o.sqrLen([E[0]-.5-de,E[1]-.5-ne])});else for(var Oe=0;Oe<4;Oe++){var je=(de<<1)+Oe%2,He=(ne<<1)+(Oe>>1);Z.push({aabb:ae.aabb.quadrant(Oe),zoom:ae.zoom+1,x:je,y:He,wrap:ae.wrap,fullyVisible:me})}}return Y.sort(function(Xe,ut){return Xe.distanceSq-ut.distanceSq}).map(function(Xe){return Xe.tileID})},Qt.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},jr.unmodified.get=function(){return this._unmodified},Qt.prototype.zoomScale=function(n){return Math.pow(2,n)},Qt.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},Qt.prototype.project=function(n){var s=o.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(n.lng)*this.worldSize,o.mercatorYfromLat(s)*this.worldSize)},Qt.prototype.unproject=function(n){return new o.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},jr.point.get=function(){return this.project(this.center)},Qt.prototype.setLocationAtPoint=function(n,s){var a=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),E=new o.MercatorCoordinate(m.x-(a.x-c.x),m.y-(a.y-c.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())},Qt.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},Qt.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},Qt.prototype.locationCoordinate=function(n){return o.MercatorCoordinate.fromLngLat(n)},Qt.prototype.coordinateLocation=function(n){return n.toLngLat()},Qt.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],a=[n.x,n.y,1,1];o.transformMat4(s,s,this.pixelMatrixInverse),o.transformMat4(a,a,this.pixelMatrixInverse);var c=s[3],m=a[3],E=s[1]/c,k=a[1]/m,A=s[2]/c,B=a[2]/m,Z=A===B?0:(0-A)/(B-A);return new o.MercatorCoordinate(o.number(s[0]/c,a[0]/m,Z)/this.worldSize,o.number(E,k,Z)/this.worldSize)},Qt.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix),new o.Point(s[0]/s[3],s[1]/s[3])},Qt.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Qt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Qt.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Qt.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var a=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[a])return c[a];var m=n.canonical,E=this.worldSize/this.zoomScale(m.z),k=m.x+Math.pow(2,m.z)*n.wrap,A=o.identity(new Float64Array(16));return o.translate(A,A,[k*E,m.y*E,0]),o.scale(A,A,[E/o.EXTENT,E/o.EXTENT,1]),o.multiply(A,s?this.alignedProjMatrix:this.projMatrix,A),c[a]=new Float32Array(A),c[a]},Qt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Qt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,a,c,m=-90,E=90,k=-180,A=180,B=this.size,Z=this._unmodified;if(this.latRange){var Y=this.latRange;m=o.mercatorYfromLat(Y[1])*this.worldSize,n=(E=o.mercatorYfromLat(Y[0])*this.worldSize)-m<B.y?B.y/(E-m):0}if(this.lngRange){var Q=this.lngRange;k=o.mercatorXfromLng(Q[0])*this.worldSize,s=(A=o.mercatorXfromLng(Q[1])*this.worldSize)-k<B.x?B.x/(A-k):0}var $=this.point,ce=Math.max(s||0,n||0);if(ce)return this.center=this.unproject(new o.Point(s?(A+k)/2:$.x,n?(E+m)/2:$.y)),this.zoom+=this.scaleZoom(ce),this._unmodified=Z,void(this._constraining=!1);if(this.latRange){var ae=$.y,de=B.y/2;ae-de<m&&(c=m+de),ae+de>E&&(c=E-de)}if(this.lngRange){var ne=$.x,me=B.x/2;ne-me<k&&(a=k+me),ne+me>A&&(a=A-me)}a===void 0&&c===void 0||(this.center=this.unproject(new o.Point(a!==void 0?a:$.x,c!==void 0?c:$.y))),this._unmodified=Z,this._constraining=!1}},Qt.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+n.y/this.height),c=Math.sin(a)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-s-a,.01,Math.PI-.01)),m=this.point,E=m.x,k=m.y,A=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),B=this.height/50,Z=new Float64Array(16);o.perspective(Z,this._fov,this.width/this.height,B,A),Z[8]=2*-n.x/this.width,Z[9]=2*n.y/this.height,o.scale(Z,Z,[1,-1,1]),o.translate(Z,Z,[0,0,-this.cameraToCenterDistance]),o.rotateX(Z,Z,this._pitch),o.rotateZ(Z,Z,this.angle),o.translate(Z,Z,[-E,-k,0]),this.mercatorMatrix=o.scale([],Z,[this.worldSize,this.worldSize,this.worldSize]),o.scale(Z,Z,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Z,this.invProjMatrix=o.invert([],this.projMatrix);var Y=this.width%2/2,Q=this.height%2/2,$=Math.cos(this.angle),ce=Math.sin(this.angle),ae=E-Math.round(E)+$*Y+ce*Q,de=k-Math.round(k)+$*Q+ce*Y,ne=new Float64Array(Z);if(o.translate(ne,ne,[ae>.5?ae-1:ae,de>.5?de-1:de,0]),this.alignedProjMatrix=ne,Z=o.create(),o.scale(Z,Z,[this.width/2,-this.height/2,1]),o.translate(Z,Z,[1,-1,0]),this.labelPlaneMatrix=Z,Z=o.create(),o.scale(Z,Z,[1,-1,1]),o.translate(Z,Z,[-1,-1,0]),o.scale(Z,Z,[2/this.width,2/this.height,1]),this.glCoordMatrix=Z,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Z=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Z,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Qt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new o.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Qt.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,n))},Qt.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var a=s.x,c=s.y,m=s.x,E=s.y,k=0,A=n;k<A.length;k+=1){var B=A[k];a=Math.min(a,B.x),c=Math.min(c,B.y),m=Math.max(m,B.x),E=Math.max(E,B.y)}return[new o.Point(a,c),new o.Point(m,c),new o.Point(m,E),new o.Point(a,E),new o.Point(a,c)]},Object.defineProperties(Qt.prototype,jr);var Mn=function(n){var s,a,c,m;this._hashName=n&&encodeURIComponent(n),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,c=null,m=function(){c=null,a&&(s(),c=setTimeout(m,300),a=!1)},function(){return a=!0,c||m(),c})};Mn.prototype.addTo=function(n){return this._map=n,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Mn.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Mn.prototype.getHashString=function(n){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,c=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,c),E=Math.round(s.lng*m)/m,k=Math.round(s.lat*m)/m,A=this._map.getBearing(),B=this._map.getPitch(),Z="";if(Z+=n?"/"+E+"/"+k+"/"+a:a+"/"+k+"/"+E,(A||B)&&(Z+="/"+Math.round(10*A)/10),B&&(Z+="/"+Math.round(B)),this._hashName){var Y=this._hashName,Q=!1,$=o.window.location.hash.slice(1).split("&").map(function(ce){var ae=ce.split("=")[0];return ae===Y?(Q=!0,ae+"="+Z):ce}).filter(function(ce){return ce});return Q||$.push(Y+"="+Z),"#"+$.join("&")}return"#"+Z},Mn.prototype._getCurrentHash=function(){var n,s=this,a=o.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):a.split("/")},Mn.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},Mn.prototype._updateHashUnthrottled=function(){var n=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,n)}catch{}};var hp={linearity:.3,easing:o.bezier(0,0,.3,1)},mu=o.extend({deceleration:2500,maxSpeed:1400},hp),ss=o.extend({deceleration:20,maxSpeed:1400},hp),oc=o.extend({deceleration:1e3,maxSpeed:360},hp),gd=o.extend({deceleration:1e3,maxSpeed:90},hp),ls=function(n){this._map=n,this.clear()};function Al(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function us(n,s,a){var c=a.maxSpeed,m=a.linearity,E=a.deceleration,k=o.clamp(n*m/(s/1e3),-c,c),A=Math.abs(k)/(E*m);return{easing:a.easing,duration:1e3*A,amount:k*(A/2)}}ls.prototype.clear=function(){this._inertiaBuffer=[]},ls.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:n})},ls.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=o.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},ls.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},a=0,c=this._inertiaBuffer;a<c.length;a+=1){var m=c[a].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(s.pan.mag()){var A=us(s.pan.mag(),E,o.extend({},mu,n||{}));k.offset=s.pan.mult(A.amount/s.pan.mag()),k.center=this._map.transform.center,Al(k,A)}if(s.zoom){var B=us(s.zoom,E,ss);k.zoom=this._map.transform.zoom+B.amount,Al(k,B)}if(s.bearing){var Z=us(s.bearing,E,oc);k.bearing=this._map.transform.bearing+o.clamp(Z.amount,-179,179),Al(k,Z)}if(s.pitch){var Y=us(s.pitch,E,gd);k.pitch=this._map.transform.pitch+Y.amount,Al(k,Y)}if(k.zoom||k.bearing){var Q=s.pinchAround===void 0?s.around:s.pinchAround;k.around=Q?this._map.unproject(Q):this._map.getCenter()}return this.clear(),o.extend(k,{noMoveStart:!0})}};var Ui=function(n){function s(c,m,E,k){k===void 0&&(k={});var A=P.mousePos(m.getCanvasContainer(),E),B=m.unproject(A);n.call(this,c,o.extend({point:A,lngLat:B,originalEvent:E},k)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),So=function(n){function s(c,m,E){var k=c==="touchend"?E.changedTouches:E.touches,A=P.touchPos(m.getCanvasContainer(),k),B=A.map(function(Q){return m.unproject(Q)}),Z=A.reduce(function(Q,$,ce,ae){return Q.add($.div(ae.length))},new o.Point(0,0)),Y=m.unproject(Z);n.call(this,c,{points:A,point:Z,lngLats:B,lngLat:Y,originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),_f=function(n){function s(c,m,E){n.call(this,c,{originalEvent:E}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(o.Event),Zr=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};Zr.prototype.reset=function(){delete this._mousedownPos},Zr.prototype.wheel=function(n){return this._firePreventable(new _f(n.type,this._map,n))},Zr.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new Ui(n.type,this._map,n))},Zr.prototype.mouseup=function(n){this._map.fire(new Ui(n.type,this._map,n))},Zr.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Ui(n.type,this._map,n))},Zr.prototype.dblclick=function(n){return this._firePreventable(new Ui(n.type,this._map,n))},Zr.prototype.mouseover=function(n){this._map.fire(new Ui(n.type,this._map,n))},Zr.prototype.mouseout=function(n){this._map.fire(new Ui(n.type,this._map,n))},Zr.prototype.touchstart=function(n){return this._firePreventable(new So(n.type,this._map,n))},Zr.prototype.touchmove=function(n){this._map.fire(new So(n.type,this._map,n))},Zr.prototype.touchend=function(n){this._map.fire(new So(n.type,this._map,n))},Zr.prototype.touchcancel=function(n){this._map.fire(new So(n.type,this._map,n))},Zr.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},Zr.prototype.isEnabled=function(){return!0},Zr.prototype.isActive=function(){return!1},Zr.prototype.enable=function(){},Zr.prototype.disable=function(){};var it=function(n){this._map=n};it.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},it.prototype.mousemove=function(n){this._map.fire(new Ui(n.type,this._map,n))},it.prototype.mousedown=function(){this._delayContextMenu=!0},it.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},it.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Ui(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},it.prototype.isEnabled=function(){return!0},it.prototype.isActive=function(){return!1},it.prototype.enable=function(){},it.prototype.disable=function(){};var $i=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function ih(n,s){for(var a={},c=0;c<n.length;c++)a[n[c].identifier]=s[c];return a}$i.prototype.isEnabled=function(){return!!this._enabled},$i.prototype.isActive=function(){return!!this._active},$i.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},$i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$i.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(P.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},$i.prototype.mousemoveWindow=function(n,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a,this._box||(this._box=P.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(c.x,a.x),E=Math.max(c.x,a.x),k=Math.min(c.y,a.y),A=Math.max(c.y,a.y);P.setTransform(this._box,"translate("+m+"px,"+k+"px)"),this._box.style.width=E-m+"px",this._box.style.height=A-k+"px"}}},$i.prototype.mouseupWindow=function(n,s){var a=this;if(this._active&&n.button===0){var c=this._startPos,m=s;if(this.reset(),P.suppressClick(),c.x!==m.x||c.y!==m.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(E){return E.fitScreenCoordinates(c,m,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},$i.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},$i.prototype.blur=function(){this.reset()},$i.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos},$i.prototype._fireEvent=function(n,s){return this._map.fire(new o.Event(n,{originalEvent:s}))};var ko=function(n){this.reset(),this.numTouches=n.numTouches};ko.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ko.prototype.touchstart=function(n,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),a.length===this.numTouches&&(this.centroid=function(c){for(var m=new o.Point(0,0),E=0,k=c;E<k.length;E+=1)m._add(k[E]);return m.div(c.length)}(s),this.touches=ih(a,s)))},ko.prototype.touchmove=function(n,s,a){if(!this.aborted&&this.centroid){var c=ih(a,s);for(var m in this.touches){var E=c[m];(!E||E.dist(this.touches[m])>30)&&(this.aborted=!0)}}},ko.prototype.touchend=function(n,s,a){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var cs=function(n){this.singleTap=new ko(n),this.numTaps=n.numTaps,this.reset()};cs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},cs.prototype.touchstart=function(n,s,a){this.singleTap.touchstart(n,s,a)},cs.prototype.touchmove=function(n,s,a){this.singleTap.touchmove(n,s,a)},cs.prototype.touchend=function(n,s,a){var c=this.singleTap.touchend(n,s,a);if(c){var m=n.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(c)<30;if(m&&E||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var ma=function(){this._zoomIn=new cs({numTouches:1,numTaps:2}),this._zoomOut=new cs({numTouches:2,numTaps:1}),this.reset()};ma.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ma.prototype.touchstart=function(n,s,a){this._zoomIn.touchstart(n,s,a),this._zoomOut.touchstart(n,s,a)},ma.prototype.touchmove=function(n,s,a){this._zoomIn.touchmove(n,s,a),this._zoomOut.touchmove(n,s,a)},ma.prototype.touchend=function(n,s,a){var c=this,m=this._zoomIn.touchend(n,s,a),E=this._zoomOut.touchend(n,s,a);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(m)},{originalEvent:n})}}):E?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(E)},{originalEvent:n})}}):void 0},ma.prototype.touchcancel=function(){this.reset()},ma.prototype.enable=function(){this._enabled=!0},ma.prototype.disable=function(){this._enabled=!1,this.reset()},ma.prototype.isEnabled=function(){return this._enabled},ma.prototype.isActive=function(){return this._active};var zl={0:1,2:2},Je=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};Je.prototype.blur=function(){this.reset()},Je.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Je.prototype._correctButton=function(n,s){return!1},Je.prototype._move=function(n,s){return{}},Je.prototype.mousedown=function(n,s){if(!this._lastPoint){var a=P.mouseButton(n);this._correctButton(n,a)&&(this._lastPoint=s,this._eventButton=a)}},Je.prototype.mousemoveWindow=function(n,s){var a=this._lastPoint;if(a){if(n.preventDefault(),function(c,m){var E=zl[m];return c.buttons===void 0||(c.buttons&E)!==E}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},Je.prototype.mouseupWindow=function(n){this._lastPoint&&P.mouseButton(n)===this._eventButton&&(this._moved&&P.suppressClick(),this.reset())},Je.prototype.enable=function(){this._enabled=!0},Je.prototype.disable=function(){this._enabled=!1,this.reset()},Je.prototype.isEnabled=function(){return this._enabled},Je.prototype.isActive=function(){return this._active};var pp=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(a,c){n.prototype.mousedown.call(this,a,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,c){return c===0&&!a.ctrlKey},s.prototype._move=function(a,c){return{around:c,panDelta:c.sub(a)}},s}(Je),qs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=.8*(c.x-a.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(Je),sc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var m=-.5*(c.y-a.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(Je),Va=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};Va.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Va.prototype.touchstart=function(n,s,a){return this._calculateTransform(n,s,a)},Va.prototype.touchmove=function(n,s,a){if(this._active&&!(a.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,a)},Va.prototype.touchend=function(n,s,a){this._calculateTransform(n,s,a),this._active&&a.length<this._minTouches&&this.reset()},Va.prototype.touchcancel=function(){this.reset()},Va.prototype._calculateTransform=function(n,s,a){a.length>0&&(this._active=!0);var c=ih(a,s),m=new o.Point(0,0),E=new o.Point(0,0),k=0;for(var A in c){var B=c[A],Z=this._touches[A];Z&&(m._add(B),E._add(B.sub(Z)),k++,c[A]=B)}if(this._touches=c,!(k<this._minTouches)&&E.mag()){var Y=E.div(k);if(this._sum._add(Y),!(this._sum.mag()<this._clickTolerance))return{around:m.div(k),panDelta:Y}}},Va.prototype.enable=function(){this._enabled=!0},Va.prototype.disable=function(){this._enabled=!1,this.reset()},Va.prototype.isEnabled=function(){return this._enabled},Va.prototype.isActive=function(){return this._active};var ya=function(){this.reset()};function hs(n,s,a){for(var c=0;c<n.length;c++)if(n[c].identifier===a)return s[c]}function nh(n,s){return Math.log(n/s)/Math.LN2}ya.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ya.prototype._start=function(n){},ya.prototype._move=function(n,s,a){return{}},ya.prototype.touchstart=function(n,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},ya.prototype.touchmove=function(n,s,a){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,m=c[1],E=hs(a,s,c[0]),k=hs(a,s,m);if(E&&k){var A=this._aroundCenter?null:E.add(k).div(2);return this._move([E,k],A,n)}}},ya.prototype.touchend=function(n,s,a){if(this._firstTwoTouches){var c=this._firstTwoTouches,m=c[1],E=hs(a,s,c[0]),k=hs(a,s,m);E&&k||(this._active&&P.suppressClick(),this.reset())}},ya.prototype.touchcancel=function(){this.reset()},ya.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},ya.prototype.disable=function(){this._enabled=!1,this.reset()},ya.prototype.isEnabled=function(){return this._enabled},ya.prototype.isActive=function(){return this._active};var qi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(nh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:nh(this._distance,m),pinchAround:c}},s}(ya);function En(n,s){return 180*n.angleWith(s)/Math.PI}var ps=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,c){var m=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:En(this._vector,m),pinchAround:c}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var c=25/(Math.PI*this._minDiameter)*360,m=En(a,this._startVector);return Math.abs(m)<c},s}(ya);function lc(n){return Math.abs(n.y)>Math.abs(n.x)}var Pl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,lc(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,c,m){var E=a[0].sub(this._lastPoints[0]),k=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(E,k,m.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(E.y+k.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,c,m){if(this._valid!==void 0)return this._valid;var E=a.mag()>=2,k=c.mag()>=2;if(E||k){if(!E||!k)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var A=a.y>0==c.y>0;return lc(a)&&lc(c)&&A}},s}(ya),_d={panStep:100,bearingStep:15,pitchStep:10},io=function(){var n=_d;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function Ln(n){return n*(2-n)}io.prototype.blur=function(){this.reset()},io.prototype.reset=function(){this._active=!1},io.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=0,c=0,m=0,E=0,k=0;switch(n.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),E=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),E=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),k=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(c=0,m=0),{cameraAnimation:function(A){var B=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:Ln,zoom:a?Math.round(B)+a*(n.shiftKey?2:1):B,bearing:A.getBearing()+c*s._bearingStep,pitch:A.getPitch()+m*s._pitchStep,offset:[-E*s._panStep,-k*s._panStep],center:A.getCenter()},{originalEvent:n})}}}},io.prototype.enable=function(){this._enabled=!0},io.prototype.disable=function(){this._enabled=!1,this.reset()},io.prototype.isEnabled=function(){return this._enabled},io.prototype.isActive=function(){return this._active},io.prototype.disableRotation=function(){this._rotationDisabled=!0},io.prototype.enableRotation=function(){this._rotationDisabled=!1};var Wt=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};Wt.prototype.setZoomRate=function(n){this._defaultZoomRate=n},Wt.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},Wt.prototype.isEnabled=function(){return!!this._enabled},Wt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Wt.prototype.isZooming=function(){return!!this._zooming},Wt.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},Wt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Wt.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,a=o.browser.now(),c=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},Wt.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},Wt.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=P.mousePos(this._el,n);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Wt.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&c!==0&&(c=1/c);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var E,k=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,A=this._startZoom,B=this._easing,Z=!1;if(this._type==="wheel"&&A&&B){var Y=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Q=B(Y);E=o.number(A,k,Q),Y<1?this._frameId||(this._frameId=!0):Z=!0}else E=k,Z=!0;return this._active=!0,Z&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Z,zoomDelta:E-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Wt.prototype._smoothOutEasing=function(n){var s=o.ease;if(this._prevEase){var a=this._prevEase,c=(o.browser.now()-a.start)/a.duration,m=a.easing(c+.01)-a.easing(c),E=.27/Math.sqrt(m*m+1e-4)*.01,k=Math.sqrt(.0729-E*E);s=o.bezier(E,k,.25,1)}return this._prevEase={start:o.browser.now(),duration:n,easing:s},s},Wt.prototype.blur=function(){this.reset()},Wt.prototype.reset=function(){this._active=!1};var Io=function(n,s){this._clickZoom=n,this._tapZoom=s};Io.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Io.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Io.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Io.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var jn=function(){this.reset()};jn.prototype.reset=function(){this._active=!1},jn.prototype.blur=function(){this.reset()},jn.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(n.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:n})}}},jn.prototype.enable=function(){this._enabled=!0},jn.prototype.disable=function(){this._enabled=!1,this.reset()},jn.prototype.isEnabled=function(){return this._enabled},jn.prototype.isActive=function(){return this._active};var en=function(){this._tap=new cs({numTouches:1,numTaps:1}),this.reset()};en.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},en.prototype.touchstart=function(n,s,a){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(n,s,a))},en.prototype.touchmove=function(n,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var c=s[0],m=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,a)},en.prototype.touchend=function(n,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(n,s,a)&&(this._tapTime=n.timeStamp)},en.prototype.touchcancel=function(){this.reset()},en.prototype.enable=function(){this._enabled=!0},en.prototype.disable=function(){this._enabled=!1,this.reset()},en.prototype.isEnabled=function(){return this._enabled},en.prototype.isActive=function(){return this._active};var Cl=function(n,s,a){this._el=n,this._mousePan=s,this._touchPan=a};Cl.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Cl.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Cl.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Cl.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var js=function(n,s,a){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};js.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},js.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},js.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},js.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Zn=function(n,s,a,c){this._el=n,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};Zn.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Zn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Zn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Zn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Zn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Zn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ea=function(n){return n.zoom||n.drag||n.pitch||n.rotate},uc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(o.Event);function yt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var dt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ls(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),o.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[o.window,"blur",void 0]];for(var c=0,m=this._listeners;c<m.length;c+=1){var E=m[c],k=E[0];P.addEventListener(k,E[1],k===o.window.document?this.handleWindowEvent:this.handleEvent,E[2])}};dt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var a=s[n],c=a[0];P.removeEventListener(c,a[1],c===o.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},dt.prototype._addDefaultHandlers=function(n){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new Zr(s,n));var c=s.boxZoom=new $i(s,n);this._add("boxZoom",c);var m=new ma,E=new jn;s.doubleClickZoom=new Io(E,m),this._add("tapZoom",m),this._add("clickZoom",E);var k=new en;this._add("tapDragZoom",k);var A=s.touchPitch=new Pl;this._add("touchPitch",A);var B=new qs(n),Z=new sc(n);s.dragRotate=new js(n,B,Z),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);var Y=new pp(n),Q=new Va(n);s.dragPan=new Cl(a,Y,Q),this._add("mousePan",Y),this._add("touchPan",Q,["touchZoom","touchRotate"]);var $=new ps,ce=new qi;s.touchZoomRotate=new Zn(a,ce,$,k),this._add("touchRotate",$,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]);var ae=s.scrollZoom=new Wt(s,this);this._add("scrollZoom",ae,["mousePan"]);var de=s.keyboard=new io;this._add("keyboard",de),this._add("blockableMapEvent",new it(s));for(var ne=0,me=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ne<me.length;ne+=1){var ge=me[ne];n.interactive&&n[ge]&&s[ge].enable(n[ge])}},dt.prototype._add=function(n,s,a){this._handlers.push({handlerName:n,handler:s,allowed:a}),this._handlersById[n]=s},dt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},dt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},dt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},dt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},dt.prototype.isMoving=function(){return Boolean(ea(this._eventsInProgress))||this.isZooming()},dt.prototype._blockedByActive=function(n,s,a){for(var c in n)if(c!==a&&(!s||s.indexOf(c)<0))return!0;return!1},dt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},dt.prototype._getMapTouches=function(n){for(var s=[],a=0,c=n;a<c.length;a+=1){var m=c[a];this._el.contains(m.target)&&s.push(m)}return s},dt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var a=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},m={},E={},k=n.touches?this._getMapTouches(n.touches):void 0,A=k?P.touchPos(this._el,k):P.mousePos(this._el,n),B=0,Z=this._handlers;B<Z.length;B+=1){var Y=Z[B],Q=Y.handlerName,$=Y.handler,ce=Y.allowed;if($.isEnabled()){var ae=void 0;this._blockedByActive(E,ce,Q)?$.reset():$[s||n.type]&&(ae=$[s||n.type](n,A,k),this.mergeHandlerResult(c,m,ae,Q,a),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||$.isActive())&&(E[Q]=$)}}var de={};for(var ne in this._previousActiveHandlers)E[ne]||(de[ne]=a);this._previousActiveHandlers=E,(Object.keys(de).length||yt(c))&&(this._changes.push([c,m,de]),this._triggerRenderFrame()),(Object.keys(E).length||yt(c))&&this._map._stop(!0),this._updatingCamera=!1;var me=c.cameraAnimation;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},dt.prototype.mergeHandlerResult=function(n,s,a,c,m){if(a){o.extend(n,a);var E={handlerName:c,originalEvent:a.originalEvent||m};a.zoomDelta!==void 0&&(s.zoom=E),a.panDelta!==void 0&&(s.drag=E),a.pitchDelta!==void 0&&(s.pitch=E),a.bearingDelta!==void 0&&(s.rotate=E)}},dt.prototype._applyChanges=function(){for(var n={},s={},a={},c=0,m=this._changes;c<m.length;c+=1){var E=m[c],k=E[0],A=E[1],B=E[2];k.panDelta&&(n.panDelta=(n.panDelta||new o.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(n.around=k.around),k.pinchAround!==void 0&&(n.pinchAround=k.pinchAround),k.noInertia&&(n.noInertia=k.noInertia),o.extend(s,A),o.extend(a,B)}this._updateMapTransform(n,s,a),this._changes=[]},dt.prototype._updateMapTransform=function(n,s,a){var c=this._map,m=c.transform;if(!yt(n))return this._fireEvents(s,a,!0);var E=n.panDelta,k=n.zoomDelta,A=n.bearingDelta,B=n.pitchDelta,Z=n.around,Y=n.pinchAround;Y!==void 0&&(Z=Y),c._stop(!0),Z=Z||c.transform.centerPoint;var Q=m.pointLocation(E?Z.sub(E):Z);A&&(m.bearing+=A),B&&(m.pitch+=B),k&&(m.zoom+=k),m.setLocationAtPoint(Q,Z),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,a,!0)},dt.prototype._fireEvents=function(n,s,a){var c=this,m=ea(this._eventsInProgress),E=ea(n),k={};for(var A in n)this._eventsInProgress[A]||(k[A+"start"]=n[A].originalEvent),this._eventsInProgress[A]=n[A];for(var B in!m&&E&&this._fireEvent("movestart",E.originalEvent),k)this._fireEvent(B,k[B]);for(var Z in E&&this._fireEvent("move",E.originalEvent),n)this._fireEvent(Z,n[Z].originalEvent);var Y,Q={};for(var $ in this._eventsInProgress){var ce=this._eventsInProgress[$],ae=ce.handlerName,de=ce.originalEvent;this._handlersById[ae].isActive()||(delete this._eventsInProgress[$],Q[$+"end"]=Y=s[ae]||de)}for(var ne in Q)this._fireEvent(ne,Q[ne]);var me=ea(this._eventsInProgress);if(a&&(m||E)&&!me){this._updatingCamera=!0;var ge=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Te=function(Be){return Be!==0&&-c._bearingSnap<Be&&Be<c._bearingSnap};ge?(Te(ge.bearing||this._map.getBearing())&&(ge.bearing=0),this._map.easeTo(ge,{originalEvent:Y})):(this._map.fire(new o.Event("moveend",{originalEvent:Y})),Te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},dt.prototype._fireEvent=function(n,s){this._map.fire(new o.Event(n,s?{originalEvent:s}:{}))},dt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new uc("renderFrame",{timeStamp:s})),n._applyChanges()})},dt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Fa=function(n){function s(a,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},s.prototype.panBy=function(a,c,m){return a=o.Point.convert(a).mult(-1),this.panTo(this.transform.center,o.extend({offset:a},c),m)},s.prototype.panTo=function(a,c,m){return this.easeTo(o.extend({center:a},c),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},s.prototype.zoomTo=function(a,c,m){return this.easeTo(o.extend({zoom:a},c),m)},s.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},s.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,c){return this.jumpTo({padding:a},c),this},s.prototype.rotateTo=function(a,c,m){return this.easeTo(o.extend({bearing:a},c),m)},s.prototype.resetNorth=function(a,c){return this.rotateTo(0,o.extend({duration:1e3},a),c),this},s.prototype.resetNorthPitch=function(a,c){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},a),c),this},s.prototype.snapToNorth=function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},s.prototype.cameraForBounds=function(a,c){a=o.LngLatBounds.convert(a);var m=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),m,c)},s.prototype._cameraForBoxAndBearing=function(a,c,m,E){var k={top:0,bottom:0,right:0,left:0};if(typeof(E=o.extend({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){var A=E.padding;E.padding={top:A,bottom:A,right:A,left:A}}E.padding=o.extend(k,E.padding);var B=this.transform,Z=B.padding,Y=B.project(o.LngLat.convert(a)),Q=B.project(o.LngLat.convert(c)),$=Y.rotate(-m*Math.PI/180),ce=Q.rotate(-m*Math.PI/180),ae=new o.Point(Math.max($.x,ce.x),Math.max($.y,ce.y)),de=new o.Point(Math.min($.x,ce.x),Math.min($.y,ce.y)),ne=ae.sub(de),me=(B.width-(Z.left+Z.right+E.padding.left+E.padding.right))/ne.x,ge=(B.height-(Z.top+Z.bottom+E.padding.top+E.padding.bottom))/ne.y;if(!(ge<0||me<0)){var Te=Math.min(B.scaleZoom(B.scale*Math.min(me,ge)),E.maxZoom),Be=typeof E.offset.x=="number"?new o.Point(E.offset.x,E.offset.y):o.Point.convert(E.offset),Ce=new o.Point((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(m*Math.PI/180),Oe=Be.add(Ce).mult(B.scale/B.zoomScale(Te));return{center:B.unproject(Y.add(Q).div(2).sub(Oe)),zoom:Te,bearing:m}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,c,m){return this._fitInternal(this.cameraForBounds(a,c),c,m)},s.prototype.fitScreenCoordinates=function(a,c,m,E,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(a)),this.transform.pointLocation(o.Point.convert(c)),m,E),E,k)},s.prototype._fitInternal=function(a,c,m){return a?(delete(c=o.extend(a,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this},s.prototype.jumpTo=function(a,c){this.stop();var m=this.transform,E=!1,k=!1,A=!1;return"zoom"in a&&m.zoom!==+a.zoom&&(E=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=o.LngLat.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(k=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(A=!0,m.pitch=+a.pitch),a.padding==null||m.isPaddingEqual(a.padding)||(m.padding=a.padding),this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),E&&this.fire(new o.Event("zoomstart",c)).fire(new o.Event("zoom",c)).fire(new o.Event("zoomend",c)),k&&this.fire(new o.Event("rotatestart",c)).fire(new o.Event("rotate",c)).fire(new o.Event("rotateend",c)),A&&this.fire(new o.Event("pitchstart",c)).fire(new o.Event("pitch",c)).fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))},s.prototype.easeTo=function(a,c){var m=this;this._stop(!1,a.easeId),((a=o.extend({offset:[0,0],duration:500,easing:o.ease},a)).animate===!1||!a.essential&&o.browser.prefersReducedMotion)&&(a.duration=0);var E=this.transform,k=this.getZoom(),A=this.getBearing(),B=this.getPitch(),Z=this.getPadding(),Y="zoom"in a?+a.zoom:k,Q="bearing"in a?this._normalizeBearing(a.bearing,A):A,$="pitch"in a?+a.pitch:B,ce="padding"in a?a.padding:E.padding,ae=o.Point.convert(a.offset),de=E.centerPoint.add(ae),ne=E.pointLocation(de),me=o.LngLat.convert(a.center||ne);this._normalizeCenter(me);var ge,Te,Be=E.project(ne),Ce=E.project(me).sub(Be),Oe=E.zoomScale(Y-k);a.around&&(ge=o.LngLat.convert(a.around),Te=E.locationPoint(ge));var je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Y!==k,this._rotating=this._rotating||A!==Q,this._pitching=this._pitching||$!==B,this._padding=!E.isPaddingEqual(ce),this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,je),this._ease(function(He){if(m._zooming&&(E.zoom=o.number(k,Y,He)),m._rotating&&(E.bearing=o.number(A,Q,He)),m._pitching&&(E.pitch=o.number(B,$,He)),m._padding&&(E.interpolatePadding(Z,ce,He),de=E.centerPoint.add(ae)),ge)E.setLocationAtPoint(ge,Te);else{var Xe=E.zoomScale(E.zoom-k),ut=Y>k?Math.min(2,Oe):Math.max(.5,Oe),St=Math.pow(ut,1-He),xt=E.unproject(Be.add(Ce.mult(He*St)).mult(Xe));E.setLocationAtPoint(E.renderWorldCopies?xt.wrap():xt,de)}m._fireMoveEvents(c)},function(He){m._afterEase(c,He)},a),this},s.prototype._prepareEase=function(a,c,m){m===void 0&&(m={}),this._moving=!0,c||m.moving||this.fire(new o.Event("movestart",a)),this._zooming&&!m.zooming&&this.fire(new o.Event("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new o.Event("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new o.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new o.Event("move",a)),this._zooming&&this.fire(new o.Event("zoom",a)),this._rotating&&this.fire(new o.Event("rotate",a)),this._pitching&&this.fire(new o.Event("pitch",a))},s.prototype._afterEase=function(a,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var m=this._zooming,E=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new o.Event("zoomend",a)),E&&this.fire(new o.Event("rotateend",a)),k&&this.fire(new o.Event("pitchend",a)),this.fire(new o.Event("moveend",a))}},s.prototype.flyTo=function(a,c){var m=this;if(!a.essential&&o.browser.prefersReducedMotion){var E=o.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(E,c)}this.stop(),a=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},a);var k=this.transform,A=this.getZoom(),B=this.getBearing(),Z=this.getPitch(),Y=this.getPadding(),Q="zoom"in a?o.clamp(+a.zoom,k.minZoom,k.maxZoom):A,$="bearing"in a?this._normalizeBearing(a.bearing,B):B,ce="pitch"in a?+a.pitch:Z,ae="padding"in a?a.padding:k.padding,de=k.zoomScale(Q-A),ne=o.Point.convert(a.offset),me=k.centerPoint.add(ne),ge=k.pointLocation(me),Te=o.LngLat.convert(a.center||ge);this._normalizeCenter(Te);var Be=k.project(ge),Ce=k.project(Te).sub(Be),Oe=a.curve,je=Math.max(k.width,k.height),He=je/de,Xe=Ce.mag();if("minZoom"in a){var ut=o.clamp(Math.min(a.minZoom,A,Q),k.minZoom,k.maxZoom),St=je/k.zoomScale(ut-A);Oe=Math.sqrt(St/Xe*2)}var xt=Oe*Oe;function kt(Tt){var Et=(He*He-je*je+(Tt?-1:1)*xt*xt*Xe*Xe)/(2*(Tt?He:je)*xt*Xe);return Math.log(Math.sqrt(Et*Et+1)-Et)}function ur(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function ot(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}var zt=kt(0),Rt=function(Tt){return ot(zt)/ot(zt+Oe*Tt)},Pt=function(Tt){return je*((ot(zt)*(ur(Et=zt+Oe*Tt)/ot(Et))-ur(zt))/xt)/Xe;var Et},Dt=(kt(1)-zt)/Oe;if(Math.abs(Xe)<1e-6||!isFinite(Dt)){if(Math.abs(je-He)<1e-6)return this.easeTo(a,c);var Ht=He<je?-1:1;Dt=Math.abs(Math.log(He/je))/Oe,Pt=function(){return 0},Rt=function(Tt){return Math.exp(Ht*Oe*Tt)}}return a.duration="duration"in a?+a.duration:1e3*Dt/("screenSpeed"in a?+a.screenSpeed/Oe:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=B!==$,this._pitching=ce!==Z,this._padding=!k.isPaddingEqual(ae),this._prepareEase(c,!1),this._ease(function(Tt){var Et=Tt*Dt,rn=1/Rt(Et);k.zoom=Tt===1?Q:A+k.scaleZoom(rn),m._rotating&&(k.bearing=o.number(B,$,Tt)),m._pitching&&(k.pitch=o.number(Z,ce,Tt)),m._padding&&(k.interpolatePadding(Y,ae,Tt),me=k.centerPoint.add(ne));var li=Tt===1?Te:k.unproject(Be.add(Ce.mult(Pt(Et))).mult(rn));k.setLocationAtPoint(k.renderWorldCopies?li.wrap():li,me),m._fireMoveEvents(c)},function(){return m._afterEase(c)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!a){var E=this.handlers;E&&E.stop(!1)}return this},s.prototype._ease=function(a,c,m){m.animate===!1||m.duration===0?(a(1),c()):(this._easeStart=o.browser.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,c){a=o.wrap(a,-180,180);var m=Math.abs(a-c);return Math.abs(a-360-c)<m&&(a-=360),Math.abs(a+360-c)<m&&(a+=360),a},s.prototype._normalizeCenter=function(a){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var m=a.lng-c.center.lng;a.lng+=m>180?-360:m<-180?360:0}},s}(o.Evented),fn=function(n){n===void 0&&(n={}),this.options=n,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};fn.prototype.getDefaultPosition=function(){return"bottom-right"},fn.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},fn.prototype.onRemove=function(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},fn.prototype._setElementTitle=function(n,s){var a=this._map._getUIString("AttributionControl."+s);n.title=a,n.setAttribute("aria-label",a)},fn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},fn.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(n){var a=s.reduce(function(c,m,E){return m.value&&(c+=m.key+"="+m.value+(E<s.length-1?"&":"")),c},"?");n.href=o.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},fn.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},fn.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(A){return typeof A!="string"?"":A})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var c in a){var m=a[c];if(m.used){var E=m.getSource();E.attribution&&n.indexOf(E.attribution)<0&&n.push(E.attribution)}}n.sort(function(A,B){return A.length-B.length});var k=(n=n.filter(function(A,B){for(var Z=B+1;Z<n.length;Z++)if(n[Z].indexOf(A)>=0)return!1;return!0})).join(" | ");k!==this._attribHTML&&(this._attribHTML=k,n.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},fn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var no=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};no.prototype.onAdd=function(n){this._map=n,this._container=P.create("div","mapboxgl-ctrl");var s=P.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},no.prototype.onRemove=function(){P.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},no.prototype.getDefaultPosition=function(){return"bottom-left"},no.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},no.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},no.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Sn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Sn.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},Sn.prototype.remove=function(n){for(var s=this._currentlyRunning,a=0,c=s?this._queue.concat(s):this._queue;a<c.length;a+=1){var m=c[a];if(m.id===n)return void(m.cancelled=!0)}},Sn.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,c=s;a<c.length;a+=1){var m=c[a];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Sn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ta={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ao=o.window.HTMLImageElement,ah=o.window.HTMLElement,_r=o.window.ImageBitmap,tn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},bf=function(n){function s(c){var m=this;if((c=o.extend({},tn,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var E=new Qt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,E,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Sn,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},ta,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new o.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=o.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof ah))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new dt(this,c),this._hash=c.hash&&new Mn(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,o.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new fn({customAttribution:c.customAttribution})),this.addControl(new no,c.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(k){m._update(k.dataType==="style"),m.fire(new o.Event(k.dataType+"data",k))}),this.on("dataloading",function(k){m.fire(new o.Event(k.dataType+"dataloading",k))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,m){if(m===void 0&&(m=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var E=c.onAdd(this);this._controls.push(c);var k=this._controlPositions[m];return m.indexOf("bottom")!==-1?k.insertBefore(E,k.firstChild):k.appendChild(E),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(c);return m>-1&&this._controls.splice(m,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var m=this._containerDimensions(),E=m[0],k=m[1];if(E===this.transform.width&&k===this.transform.height)return this;this._resizeCanvas(E,k),this.transform.resize(E,k),this.painter.resize(E,k);var A=!this._moving;return A&&this.fire(new o.Event("movestart",c)).fire(new o.Event("move",c)),this.fire(new o.Event("resize",c)),A&&this.fire(new o.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(o.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c==null?-2:c)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c==null?22:c)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c==null?0:c)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c==null?60:c)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(o.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(o.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,m,E){var k,A=this;if(c==="mouseenter"||c==="mouseover"){var B=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){var Q=A.getLayer(m)?A.queryRenderedFeatures(Y.point,{layers:[m]}):[];Q.length?B||(B=!0,E.call(A,new Ui(c,A,Y.originalEvent,{features:Q}))):B=!1},mouseout:function(){B=!1}}}}if(c==="mouseleave"||c==="mouseout"){var Z=!1;return{layer:m,listener:E,delegates:{mousemove:function(Y){(A.getLayer(m)?A.queryRenderedFeatures(Y.point,{layers:[m]}):[]).length?Z=!0:Z&&(Z=!1,E.call(A,new Ui(c,A,Y.originalEvent)))},mouseout:function(Y){Z&&(Z=!1,E.call(A,new Ui(c,A,Y.originalEvent)))}}}}return{layer:m,listener:E,delegates:(k={},k[c]=function(Y){var Q=A.getLayer(m)?A.queryRenderedFeatures(Y.point,{layers:[m]}):[];Q.length&&(Y.features=Q,E.call(A,Y),delete Y.features)},k)}},s.prototype.on=function(c,m,E){if(E===void 0)return n.prototype.on.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var A in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(k),k.delegates)this.on(A,k.delegates[A]);return this},s.prototype.once=function(c,m,E){if(E===void 0)return n.prototype.once.call(this,c,m);var k=this._createDelegatedListener(c,m,E);for(var A in k.delegates)this.once(A,k.delegates[A]);return this},s.prototype.off=function(c,m,E){var k=this;return E===void 0?n.prototype.off.call(this,c,m):(this._delegatedListeners&&this._delegatedListeners[c]&&function(A){for(var B=A[c],Z=0;Z<B.length;Z++){var Y=B[Z];if(Y.layer===m&&Y.listener===E){for(var Q in Y.delegates)k.off(Q,Y.delegates[Q]);return B.splice(Z,1),k}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,m){if(!this.style)return[];var E;if(m!==void 0||c===void 0||c instanceof o.Point||Array.isArray(c)||(m=c,c=void 0),m=m||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof c[0]=="number")E=[o.Point.convert(c)];else{var k=o.Point.convert(c[0]),A=o.Point.convert(c[1]);E=[k,new o.Point(A.x,k.y),A,new o.Point(k.x,A.y),k]}return this.style.queryRenderedFeatures(E,m,this.transform)},s.prototype.querySourceFeatures=function(c,m){return this.style.querySourceFeatures(c,m)},s.prototype.setStyle=function(c,m){return(m=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(c,m))},s.prototype._getUIString=function(c){var m=this._locale[c];if(m==null)throw new Error("Missing UI string '"+c+"'");return m},s.prototype._updateStyle=function(c,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Pn(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Pn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,m){var E=this;if(typeof c=="string"){var k=this._requestManager.normalizeStyleURL(c),A=this._requestManager.transformRequest(k,o.ResourceType.Style);o.getJSON(A,function(B,Z){B?E.fire(new o.ErrorEvent(B)):Z&&E._updateDiff(Z,m)})}else typeof c=="object"&&this._updateDiff(c,m)},s.prototype._updateDiff=function(c,m){try{this.style.setState(c)&&this._update(!0)}catch(E){o.warnOnce("Unable to perform style diff: "+(E.message||E.error||E)+".  Rebuilding the style from scratch."),this._updateStyle(c,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,m){return this._lazyInitEmptyStyle(),this.style.addSource(c,m),this._update(!0)},s.prototype.isSourceLoaded=function(c){var m=this.style&&this.style.sourceCaches[c];if(m!==void 0)return m.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var m in c){var E=c[m]._tiles;for(var k in E){var A=E[k];if(A.state!=="loaded"&&A.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,m,E){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,m,E)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,m,E){E===void 0&&(E={});var k=E.pixelRatio;k===void 0&&(k=1);var A=E.sdf;A===void 0&&(A=!1);var B=E.stretchX,Z=E.stretchY,Y=E.content;if(this._lazyInitEmptyStyle(),m instanceof ao||_r&&m instanceof _r){var Q=o.browser.getImageData(m);this.style.addImage(c,{data:new o.RGBAImage({width:Q.width,height:Q.height},Q.data),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:A,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $=m;this.style.addImage(c,{data:new o.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:k,stretchX:B,stretchY:Z,content:Y,sdf:A,version:0,userImage:$}),$.onAdd&&$.onAdd(this,c)}},s.prototype.updateImage=function(c,m){var E=this.style.getImage(c);if(!E)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var k=m instanceof ao||_r&&m instanceof _r?o.browser.getImageData(m):m,A=k.width,B=k.height,Z=k.data;return A===void 0||B===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):A!==E.data.width||B!==E.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(E.data.replace(Z,!(m instanceof ao||_r&&m instanceof _r)),void this.style.updateImage(c,E))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,m){o.getImage(this._requestManager.transformRequest(c,o.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,m){return this._lazyInitEmptyStyle(),this.style.addLayer(c,m),this._update(!0)},s.prototype.moveLayer=function(c,m){return this.style.moveLayer(c,m),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,m,E){return this.style.setLayerZoomRange(c,m,E),this._update(!0)},s.prototype.setFilter=function(c,m,E){return E===void 0&&(E={}),this.style.setFilter(c,m,E),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setPaintProperty(c,m,E,k),this._update(!0)},s.prototype.getPaintProperty=function(c,m){return this.style.getPaintProperty(c,m)},s.prototype.setLayoutProperty=function(c,m,E,k){return k===void 0&&(k={}),this.style.setLayoutProperty(c,m,E,k),this._update(!0)},s.prototype.getLayoutProperty=function(c,m){return this.style.getLayoutProperty(c,m)},s.prototype.setLight=function(c,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(c,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,m){return this.style.setFeatureState(c,m),this._update()},s.prototype.removeFeatureState=function(c,m){return this.style.removeFeatureState(c,m),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,m=0;return this._container&&(c=this._container.clientWidth||400,m=this._container.clientHeight||300),[c,m]},s.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=P.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=P.create("div","mapboxgl-canvas-container",c);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=P.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var E=this._containerDimensions();this._resizeCanvas(E[0],E[1]);var k=this._controlContainer=P.create("div","mapboxgl-control-container",c),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(B){A[B]=P.create("div","mapboxgl-ctrl-"+B,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,m){var E=o.browser.devicePixelRatio||1;this._canvas.width=E*c,this._canvas.height=E*m,this._canvas.style.width=c+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var c=o.extend({},z.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);m?(this.painter=new ii(m,this.transform),o.webpSupported.testSupport(m)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var m,E=this,k=0,A=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=A.createQueryEXT(),A.beginQueryEXT(A.TIME_ELAPSED_EXT,m),k=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Z=this.transform.zoom,Y=o.browser.now();this.style.zoomHistory.update(Z,Y);var Q=new o.EvaluationParameters(Z,{now:Y,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$=Q.crossFadingFactor();$===1&&$===this._crossFadingFactor||(B=!0,this._crossFadingFactor=$),this.style.update(Q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ce=o.browser.now()-k;A.endQueryEXT(A.TIME_ELAPSED_EXT,m),setTimeout(function(){var ne=A.getQueryObjectEXT(m,A.QUERY_RESULT_EXT)/1e6;A.deleteQueryEXT(m),E.fire(new o.Event("gpu-timing-frame",{cpuTime:ce,gpuTime:ne}))},50)}if(this.listens("gpu-timing-layer")){var ae=this.painter.collectGpuTimers();setTimeout(function(){var ne=E.painter.queryGpuTimers(ae);E.fire(new o.Event("gpu-timing-layer",{layerTimes:ne}))},50)}var de=this._sourcesDirty||this._styleDirty||this._placementDirty;return de||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||de||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,m=this._controls;c<m.length;c+=1)m[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),To(this._canvasContainer),To(this._controlContainer),To(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(m){c._frame=null,c._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,m){o.setCacheLimits(c,m)},a.version.get=function(){return o.version},Object.defineProperties(s.prototype,a),s}(Fa);function To(n){n.parentNode&&n.parentNode.removeChild(n)}var fp={showCompass:!0,showZoom:!0,visualizePitch:!1},fs=function(n){var s=this;this.options=o.extend({},fp,n),this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),P.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),P.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=P.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};fs.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),a=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},fs.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},fs.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gi(this._map,this._compass,this.options.visualizePitch)),this._container},fs.prototype.onRemove=function(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},fs.prototype._createButton=function(n,s){var a=P.create("button",n,this._container);return a.type="button",a.addEventListener("click",s),a},fs.prototype._setButtonTitle=function(n,s){var a=this._map._getUIString("NavigationControl."+s);n.title=a,n.setAttribute("aria-label",a)};var gi=function(n,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new qs({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,a&&(this.mousePitch=new sc({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),P.addEventListener(s,"mousedown",this.mousedown),P.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(s,"touchmove",this.touchmove),P.addEventListener(s,"touchend",this.touchend),P.addEventListener(s,"touchcancel",this.reset)};function ka(n,s,a){if(n=new o.LngLat(n.lng,n.lat),s){var c=new o.LngLat(n.lng-360,n.lat),m=new o.LngLat(n.lng+360,n.lat),E=a.locationPoint(n).distSqr(s);a.locationPoint(c).distSqr(s)<E?n=c:a.locationPoint(m).distSqr(s)<E&&(n=m)}for(;Math.abs(n.lng-a.center.lng)>180;){var k=a.locationPoint(n);if(k.x>=0&&k.y>=0&&k.x<=a.width&&k.y<=a.height)break;n.lng>a.center.lng?n.lng-=360:n.lng+=360}return n}gi.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),P.disableDrag()},gi.prototype.move=function(n,s){var a=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&a.setBearing(a.getBearing()+c.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&a.setPitch(a.getPitch()+m.pitchDelta)}},gi.prototype.off=function(){var n=this.element;P.removeEventListener(n,"mousedown",this.mousedown),P.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(n,"touchmove",this.touchmove),P.removeEventListener(n,"touchend",this.touchend),P.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},gi.prototype.offTemp=function(){P.enableDrag(),P.removeEventListener(o.window,"mousemove",this.mousemove),P.removeEventListener(o.window,"mouseup",this.mouseup)},gi.prototype.mousedown=function(n){this.down(o.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),P.mousePos(this.element,n)),P.addEventListener(o.window,"mousemove",this.mousemove),P.addEventListener(o.window,"mouseup",this.mouseup)},gi.prototype.mousemove=function(n){this.move(n,P.mousePos(this.element,n))},gi.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},gi.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},gi.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},gi.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},gi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var dn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ao(n,s,a){var c=n.classList;for(var m in dn)c.remove("mapboxgl-"+a+"-anchor-"+m);c.add("mapboxgl-"+a+"-anchor-"+s)}var yu,ds=function(n){function s(a,c){if(n.call(this),(a instanceof o.window.HTMLElement||c)&&(a=o.extend({element:a},c)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=o.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div"),this._element.setAttribute("aria-label","Map marker");var m=P.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var E=P.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");var k=P.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");var A=P.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");for(var B=0,Z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];B<Z.length;B+=1){var Y=Z[B],Q=P.createNS("http://www.w3.org/2000/svg","ellipse");Q.setAttributeNS(null,"opacity","0.04"),Q.setAttributeNS(null,"cx","10.5"),Q.setAttributeNS(null,"cy","5.80029008"),Q.setAttributeNS(null,"rx",Y.rx),Q.setAttributeNS(null,"ry",Y.ry),A.appendChild(Q)}var $=P.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);var ce=P.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(ce);var ae=P.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"fill","#000000");var de=P.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ae.appendChild(de);var ne=P.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");var me=P.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ge=P.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");var Te=P.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),me.appendChild(ge),me.appendChild(Te),k.appendChild(A),k.appendChild($),k.appendChild(ae),k.appendChild(ne),k.appendChild(me),m.appendChild(k),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=o.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Be){Be.preventDefault()}),this._element.addEventListener("mousedown",function(Be){Be.preventDefault()}),Ao(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var c=a.code,m=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var c=a.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ka(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,dn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=o.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(o.Evented),bd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},vu=0,oo=!1,Dl=function(n){function s(a){n.call(this),this.options=o.extend({},bd,a),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(a){var c;return this._map=a,this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,yu!==void 0?c(yu):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(m){c(yu=m.state!=="denied")}):c(yu=!!o.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,vu=0,oo=!1},s.prototype._isOutOfMapMaxBounds=function(a){var c=this._map.getMaxBounds(),m=a.coords;return c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude),m=a.coords.accuracy,E=this._map.getBearing(),k=o.extend({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(m),k,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var c=new o.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,c=this._map.unproject([0,a]),m=this._map.unproject([1,a]),E=c.distanceTo(m),k=Math.ceil(2*this._accuracy/E);this._circleElement.style.width=k+"px",this._circleElement.style.height=k+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&oo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var c=this;if(this._container.addEventListener("contextmenu",function(k){return k.preventDefault()}),this._geolocateButton=P.create("button","mapboxgl-ctrl-geolocate",this._container),P.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var E=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=E,this._geolocateButton.setAttribute("aria-label",E)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ds(this._dotElement),this._circleElement=P.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ds({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(k){k.geolocateSource||c._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new o.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vu--,oo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++vu>1?(a={maximumAge:6e5,timeout:0},oo=!0):(a=this.options.positionOptions,oo=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(o.Evented),Zs={maxWidth:100,unit:"metric"},Na=function(n){this.options=o.extend({},Zs,n),o.bindAll(["_onMove","setUnit"],this)};function gu(n,s,a){var c=a&&a.maxWidth||100,m=n._container.clientHeight/2,E=n.unproject([0,m]),k=n.unproject([c,m]),A=E.distanceTo(k);if(a&&a.unit==="imperial"){var B=3.2808*A;B>5280?Gs(s,c,B/5280,n._getUIString("ScaleControl.Miles")):Gs(s,c,B,n._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Gs(s,c,A/1852,n._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Gs(s,c,A/1e3,n._getUIString("ScaleControl.Kilometers")):Gs(s,c,A,n._getUIString("ScaleControl.Meters"))}function Gs(n,s,a,c){var m,E,k,A=(m=a,(E=Math.pow(10,(""+Math.floor(m)).length-1))*(k=(k=m/E)>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(B){var Z=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*Z)/Z}(k)));n.style.width=s*(A/a)+"px",n.innerHTML=A+"&nbsp;"+c}Na.prototype.getDefaultPosition=function(){return"bottom-left"},Na.prototype._onMove=function(){gu(this._map,this._container,this.options)},Na.prototype.onAdd=function(n){return this._map=n,this._container=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Na.prototype.onRemove=function(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Na.prototype.setUnit=function(n){this.options.unit=n,gu(this._map,this._container,this.options)};var Ua=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof o.window.HTMLElement?this._container=n.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ua.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ua.prototype.onRemove=function(){P.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ua.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Ua.prototype._setupUI=function(){var n=this._fullscreenButton=P.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);P.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ua.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},Ua.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ua.prototype._isFullscreen=function(){return this._fullscreen},Ua.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ua.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ks={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},cc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),zo=function(n){function s(a){n.call(this),this.options=o.extend(Object.create(Ks),a),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=o.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(o.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var c,m=o.window.document.createDocumentFragment(),E=o.window.document.createElement("body");for(E.innerHTML=a;c=E.firstChild;)m.appendChild(c);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=P.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=P.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=P.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Q){return c._container.classList.add(Q)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ka(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var m=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),E=this.options.anchor,k=function Q($){if($){if(typeof $=="number"){var ce=Math.round(Math.sqrt(.5*Math.pow($,2)));return{center:new o.Point(0,0),top:new o.Point(0,$),"top-left":new o.Point(ce,ce),"top-right":new o.Point(-ce,ce),bottom:new o.Point(0,-$),"bottom-left":new o.Point(ce,-ce),"bottom-right":new o.Point(-ce,-ce),left:new o.Point($,0),right:new o.Point(-$,0)}}if($ instanceof o.Point||Array.isArray($)){var ae=o.Point.convert($);return{center:ae,top:ae,"top-left":ae,"top-right":ae,bottom:ae,"bottom-left":ae,"bottom-right":ae,left:ae,right:ae}}return{center:o.Point.convert($.center||[0,0]),top:o.Point.convert($.top||[0,0]),"top-left":o.Point.convert($["top-left"]||[0,0]),"top-right":o.Point.convert($["top-right"]||[0,0]),bottom:o.Point.convert($.bottom||[0,0]),"bottom-left":o.Point.convert($["bottom-left"]||[0,0]),"bottom-right":o.Point.convert($["bottom-right"]||[0,0]),left:o.Point.convert($.left||[0,0]),right:o.Point.convert($.right||[0,0])}}return Q(new o.Point(0,0))}(this.options.offset);if(!E){var A,B=this._container.offsetWidth,Z=this._container.offsetHeight;A=m.y+k.bottom.y<Z?["top"]:m.y>this._map.transform.height-Z?["bottom"]:[],m.x<B/2?A.push("left"):m.x>this._map.transform.width-B/2&&A.push("right"),E=A.length===0?"bottom":A.join("-")}var Y=m.add(k[E]).round();P.setTransform(this._container,dn[E]+" translate("+Y.x+"px,"+Y.y+"px)"),Ao(this._container,E,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(cc);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(o.Evented),Ia={version:o.version,supported:z,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:bf,NavigationControl:fs,GeolocateControl:Dl,AttributionControl:fn,ScaleControl:Na,FullscreenControl:Ua,Popup:zo,Marker:ds,Style:Pn,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Re().acquire(Le)},clearPrewarmedResources:function(){var n=ht;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Le),ht=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(n){o.config.ACCESS_TOKEN=n},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(n){o.config.API_URL=n},get workerCount(){return qe.workerCount},set workerCount(n){qe.workerCount=n},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){o.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){o.clearTileCache(n)},workerUrl:""};return Ia}),x})})(Jg);const cT=Jg.exports;function IS(u){let h;const f=u[15].default,y=Wv(f,u,u[14],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,_){y&&y.m(x,_),h=!0},p(x,_){y&&y.p&&(!h||_&16384)&&Yv(y,f,x,x[14],h?Qv(f,x[14],_,null):Jv(x[14]),null)},i(x){h||(et(y,x),h=!0)},o(x){pt(y,x),h=!1},d(x){y&&y.d(x)}}}function hT(u){let h,f,y,x=u[0]&&IS(u);return{c(){h=M("div"),x&&x.c(),this.h()},l(_){h=L(_,"DIV",{class:!0,id:!0});var o=R(h);x&&x.l(o),o.forEach(T),this.h()},h(){S(h,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),S(h,"id",u[1]),Ho(()=>u[16].call(h))},m(_,o){Pe(_,h,o),x&&x.m(h,null),f=Xo(h,u[16].bind(h)),u[17](h),y=!0},p(_,[o]){_[0]?x?(x.p(_,o),o&1&&et(x,1)):(x=IS(_),x.c(),et(x,1),x.m(h,null)):x&&(Yu(),pt(x,1,1,()=>{x=null}),Ju()),(!y||o&2)&&S(h,"id",_[1])},i(_){y||(et(x),y=!0)},o(_){pt(x),y=!1},d(_){_&&T(h),x&&x.d(),f(),u[17](null)}}}function pT(u,h,f){let{$$slots:y={},$$scope:x}=h,{map:_}=h,{id:o="map"}=h,{location:z={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=h,{style:P="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=h,{interactive:F=!0}=h,{minzoom:V=0}=h,{maxzoom:j=14}=h,{zoom:U=null}=h,{scrollzoom:fe=!0}=h,{geolocate:he=!0}=h,{zoomcontrol:Ie=!0}=h,{options:we={}}=h,Ve,Ue;Bk("map",{getMap:()=>_}),z.bounds?we={...we,bounds:z.bounds}:z.lon&&z.lat&&(we={...we,center:[z.lon,z.lat]},z.zoom&&(we.zoom=z.zoom)),Ok(()=>{const Qe=document.createElement("link");return Qe.rel="stylesheet",Qe.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",Qe.onload=()=>{f(0,_=new Jg.exports.Map({container:Ve,style:P,minZoom:V,maxZoom:j,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:F,...we})),Ie&&_.addControl(new Jg.exports.NavigationControl({showCompass:!1})),fe||_.scrollZoom.disable(),he&&_.addControl(new Jg.exports.GeolocateControl),_.on("load",()=>{f(4,U=_.getZoom())}),_.on("zoom",()=>{f(4,U=_.getZoom())})},document.head.appendChild(Qe),()=>{_.remove(),Qe.parentNode.removeChild(Qe)}});function Ot(){let Qe=document.getElementsByClassName("mapboxgl-canvas");Qe[0]&&(Qe[0].style.width="100%",_.resize())}function Mt(){Ue=this.clientWidth,f(2,Ue)}function mt(Qe){of[Qe?"unshift":"push"](()=>{Ve=Qe,f(3,Ve)})}return u.$$set=Qe=>{"map"in Qe&&f(0,_=Qe.map),"id"in Qe&&f(1,o=Qe.id),"location"in Qe&&f(6,z=Qe.location),"style"in Qe&&f(7,P=Qe.style),"interactive"in Qe&&f(8,F=Qe.interactive),"minzoom"in Qe&&f(9,V=Qe.minzoom),"maxzoom"in Qe&&f(10,j=Qe.maxzoom),"zoom"in Qe&&f(4,U=Qe.zoom),"scrollzoom"in Qe&&f(11,fe=Qe.scrollzoom),"geolocate"in Qe&&f(12,he=Qe.geolocate),"zoomcontrol"in Qe&&f(13,Ie=Qe.zoomcontrol),"options"in Qe&&f(5,we=Qe.options),"$$scope"in Qe&&f(14,x=Qe.$$scope)},u.$$.update=()=>{u.$$.dirty&4&&Ue&&Ot()},[_,o,Ue,Ve,U,we,z,P,F,V,j,fe,he,Ie,x,y,Mt,mt]}class fT extends Wo{constructor(h){super(),Yo(this,h,pT,hT,Jo,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function TS(u){let h;const f=u[11].default,y=Wv(f,u,u[10],null);return{c(){y&&y.c()},l(x){y&&y.l(x)},m(x,_){y&&y.m(x,_),h=!0},p(x,_){y&&y.p&&(!h||_&1024)&&Yv(y,f,x,x[10],h?Qv(f,x[10],_,null):Jv(x[10]),null)},i(x){h||(et(y,x),h=!0)},o(x){pt(y,x),h=!1},d(x){y&&y.d(x)}}}function dT(u){let h,f,y=u[0]&&TS(u);return{c(){y&&y.c(),h=An()},l(x){y&&y.l(x),h=An()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,[_]){x[0]?y?(y.p(x,_),_&1&&et(y,1)):(y=TS(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Yu(),pt(y,1,1,()=>{y=null}),Ju())},i(x){f||(et(y),f=!0)},o(x){pt(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function mT(u,h,f){let{$$slots:y={},$$scope:x}=h,{id:_}=h,{type:o}=h,{url:z=null}=h,{props:P={}}=h,{data:F=null}=h,{layer:V=null}=h,{promoteId:j=null}=h,{minzoom:U=null}=h,{maxzoom:fe=null}=h,he=!1;const{getMap:Ie}=t_("map"),we=Ie();we.getSource(_)&&we.removeSource(_);function Ve(){we.isSourceLoaded(_)?(f(0,he=!0),console.log(_+" loaded!")):setTimeout(()=>{console.log("..."),Ve()},500)}function Ue(){we.isStyleLoaded(_)?(Ot(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),Ue()},500)}U&&(P.minzoom=U),fe&&(P.maxzoom=fe),V&&j?(P.promoteId={},P.promoteId[V]=j):j&&(P.promoteId=j);function Ot(){console.log(_+" map source loading..."),o=="geojson"?F?(we.addSource(_,{type:o,data:F,...P}),Ve()):z&&(we.addSource(_,{type:o,data:z,...P}),Ve()):o=="vector"&&(we.addSource(_,{type:o,tiles:[z],...P}),Ve())}Ue();function Mt(){we.getSource(_).setData(F)}return u.$$set=mt=>{"id"in mt&&f(2,_=mt.id),"type"in mt&&f(3,o=mt.type),"url"in mt&&f(4,z=mt.url),"props"in mt&&f(1,P=mt.props),"data"in mt&&f(5,F=mt.data),"layer"in mt&&f(6,V=mt.layer),"promoteId"in mt&&f(7,j=mt.promoteId),"minzoom"in mt&&f(8,U=mt.minzoom),"maxzoom"in mt&&f(9,fe=mt.maxzoom),"$$scope"in mt&&f(10,x=mt.$$scope)},u.$$.update=()=>{u.$$.dirty&33&&he&&F&&Mt()},[he,P,_,o,z,F,V,j,U,fe,x,y]}class yT extends Wo{constructor(h){super(),Yo(this,h,mT,dT,Jo,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function vT(u,h,f){const{Popup:y}=cT,x=Rk(),_=new y({closeButton:!1,closeOnClick:!1});let{id:o}=h,{source:z}=h,{sourceLayer:P=null}=h,{type:F}=h,{filter:V=null}=h,{layout:j={}}=h,{paint:U={}}=h,{data:fe=null}=h,{code:he=null}=h,{name:Ie="name"}=h,{colorCode:we=null}=h,{click:Ve=!1}=h,{ignoreClick:Ue=!1}=h,{clickCenter:Ot=!1}=h,{selected:Mt=null}=h,{hover:mt=!1}=h,{hovered:Qe=null}=h,{highlight:kr=!1}=h,{highlightKey:xr="highlighted"}=h,{highlighted:ar=[]}=h,{order:It=null}=h,{maxzoom:At=null}=h,{minzoom:Tr=null}=h,{isChild:Vt=!1}=h;const{getMap:Ir}=t_("map"),rt=Ir();let lr=null,ri=null,ci=[];rt.getLayer(o)&&rt.removeLayer(o);let Er={id:o,type:F,source:z,paint:U,layout:j};V&&(Er.filter=V),P&&(Er["source-layer"]=P),At&&(Er.maxzoom=At),Tr&&(Er.minzoom=Tr),rt.addLayer(Er,It);function vt(){console.log("updating colors..."),fe.forEach(nt=>{rt.setFeatureState({source:z,sourceLayer:P,id:nt[he]},{color:nt[we]})})}return Ve&&rt.on("click",o,nt=>{if(nt.features.length>0&&!Ue){let fr=nt.features[0].id;if(Vt&&ar.includes(fr)||!Vt&&Mt!=fr){if(f(0,Mt=fr),x("select",{code:Mt}),lr&&rt.setFeatureState({source:z,sourceLayer:P,id:lr},{selected:!1}),rt.setFeatureState({source:z,sourceLayer:P,id:Mt},{selected:!0}),Ot){let On=centroid(nt.features[0].toJSON().geometry);rt.flyTo({center:On.geometry.coordinates})}f(24,lr=Mt)}}}),mt&&(rt.on("mousemove",o,nt=>{if(nt.features.length>0){let fr=nt.features[0].id;Qe&&rt.setFeatureState({source:z,sourceLayer:P,id:Qe},{hovered:!1}),Vt&&ar.includes(fr)||!Vt&&Mt!=fr?(f(1,Qe=f(25,ri=fr)),rt.setFeatureState({source:z,sourceLayer:P,id:Qe},{hovered:!0}),rt.getCanvas().style.cursor="pointer",_.setLngLat(nt.lngLat).setHTML(`<strong>${nt.features[0].properties[Ie]?nt.features[0].properties[Ie]:nt.features[0].properties[he]}</strong>`).addTo(rt)):_.remove()}}),rt.on("mouseleave",o,nt=>{Qe&&rt.setFeatureState({source:z,sourceLayer:P,id:Qe},{hovered:!1}),f(1,Qe=f(25,ri=null)),rt.getCanvas().style.cursor="",_.remove()})),u.$$set=nt=>{"id"in nt&&f(2,o=nt.id),"source"in nt&&f(3,z=nt.source),"sourceLayer"in nt&&f(4,P=nt.sourceLayer),"type"in nt&&f(5,F=nt.type),"filter"in nt&&f(6,V=nt.filter),"layout"in nt&&f(7,j=nt.layout),"paint"in nt&&f(8,U=nt.paint),"data"in nt&&f(9,fe=nt.data),"code"in nt&&f(10,he=nt.code),"name"in nt&&f(11,Ie=nt.name),"colorCode"in nt&&f(12,we=nt.colorCode),"click"in nt&&f(13,Ve=nt.click),"ignoreClick"in nt&&f(14,Ue=nt.ignoreClick),"clickCenter"in nt&&f(15,Ot=nt.clickCenter),"selected"in nt&&f(0,Mt=nt.selected),"hover"in nt&&f(16,mt=nt.hover),"hovered"in nt&&f(1,Qe=nt.hovered),"highlight"in nt&&f(17,kr=nt.highlight),"highlightKey"in nt&&f(18,xr=nt.highlightKey),"highlighted"in nt&&f(19,ar=nt.highlighted),"order"in nt&&f(20,It=nt.order),"maxzoom"in nt&&f(21,At=nt.maxzoom),"minzoom"in nt&&f(22,Tr=nt.minzoom),"isChild"in nt&&f(23,Vt=nt.isChild)},u.$$.update=()=>{u.$$.dirty[0]&4096&&we&&vt(),u.$$.dirty[0]&68026392&&kr&&ar!=ci&&(ci[0]&&ci.forEach(nt=>{let fr={};fr[xr]=!1,rt.setFeatureState({source:z,sourceLayer:P,id:nt},fr)}),f(26,ci=ar),ar[0]&&ar.forEach(nt=>{let fr={};fr[xr]=!0,rt.setFeatureState({source:z,sourceLayer:P,id:nt},fr)})),u.$$.dirty[0]&16777241&&Mt!=lr&&(lr&&rt.setFeatureState({source:z,sourceLayer:P,id:lr},{selected:!1}),Mt&&rt.setFeatureState({source:z,sourceLayer:P,id:Mt},{selected:!0}),f(24,lr=Mt)),u.$$.dirty[0]&33619994&&mt&&Qe!=ri&&(ri&&rt.setFeatureState({source:z,sourceLayer:P,id:ri},{hovered:!1}),Qe&&rt.setFeatureState({source:z,sourceLayer:P,id:Qe},{hovered:!0}),f(25,ri=Qe))},[Mt,Qe,o,z,P,F,V,j,U,fe,he,Ie,we,Ve,Ue,Ot,mt,kr,xr,ar,It,At,Tr,Vt,lr,ri,ci]}class kx extends Wo{constructor(h){super(),Yo(this,h,vT,null,Jo,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function gT(u){return u===0?!0:u}function pd(u){return gT(u)?Array.isArray(u)?h=>u.map(f=>typeof f!="function"?h[f]:f(h)):typeof u!="function"?h=>h[u]:u:null}function _T(u){const h={};for(const f of u){if(Object(f)!==f)throw new TypeError("iterable for fromEntries should yield objects");const{"0":y,"1":x}=f;Object.defineProperty(h,y,{configurable:!0,enumerable:!0,writable:!0,value:x})}return h}function Ix(u,h={}){return _T(Object.entries(u).filter(([f,y])=>y!==void 0&&h[f]===void 0))}function bT(u,h){if(!Array.isArray(u))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof u}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(h)||h===void 0||h===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const f={},y=Object.keys(h),x=y.length;let _,o,z,P,F,V,j,U;const fe=u.length;for(_=0;_<x;_+=1){for(P=y[_],j=h[P],F=null,V=null,o=0;o<fe;o+=1)if(U=j(u[o]),Array.isArray(U)){const he=U.length;for(z=0;z<he;z+=1)U[z]!==void 0&&U[z]!==null&&Number.isNaN(U[z])===!1&&((F===null||U[z]<F)&&(F=U[z]),(V===null||U[z]>V)&&(V=U[z]))}else U!=null&&Number.isNaN(U)===!1&&((F===null||U<F)&&(F=U),(V===null||U>V)&&(V=U));f[P]=[F,V]}return f}function jk(u=[],h){return Array.isArray(h)===!0?h.map((f,y)=>f===null?u[y]:f):u}function N_(u){return function([f,y]){return f?jk(f[u],y):y}}function Q_(u,h){return u==null||h==null?NaN:u<h?-1:u>h?1:u>=h?0:NaN}function xT(u,h){return u==null||h==null?NaN:h<u?-1:h>u?1:h>=u?0:NaN}function Zk(u){let h,f,y;u.length!==2?(h=Q_,f=(z,P)=>Q_(u(z),P),y=(z,P)=>u(z)-P):(h=u===Q_||u===xT?u:wT,f=u,y=u);function x(z,P,F=0,V=z.length){if(F<V){if(h(P,P)!==0)return V;do{const j=F+V>>>1;f(z[j],P)<0?F=j+1:V=j}while(F<V)}return F}function _(z,P,F=0,V=z.length){if(F<V){if(h(P,P)!==0)return V;do{const j=F+V>>>1;f(z[j],P)<=0?F=j+1:V=j}while(F<V)}return F}function o(z,P,F=0,V=z.length){const j=x(z,P,F,V-1);return j>F&&y(z[j-1],P)>-y(z[j],P)?j-1:j}return{left:x,center:o,right:_}}function wT(){return 0}function ET(u){return u===null?NaN:+u}const ST=Zk(Q_),kT=ST.right;Zk(ET).center;const IT=kT;class AS extends Map{constructor(h,f=zT){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),h!=null)for(const[y,x]of h)this.set(y,x)}get(h){return super.get(zS(this,h))}has(h){return super.has(zS(this,h))}set(h,f){return super.set(TT(this,h),f)}delete(h){return super.delete(AT(this,h))}}function zS({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):f}function TT({_intern:u,_key:h},f){const y=h(f);return u.has(y)?u.get(y):(u.set(y,f),f)}function AT({_intern:u,_key:h},f){const y=h(f);return u.has(y)&&(f=u.get(y),u.delete(y)),f}function zT(u){return u!==null&&typeof u=="object"?u.valueOf():u}var Px=Math.sqrt(50),Cx=Math.sqrt(10),Dx=Math.sqrt(2);function PT(u,h,f){var y,x=-1,_,o,z;if(h=+h,u=+u,f=+f,u===h&&f>0)return[u];if((y=h<u)&&(_=u,u=h,h=_),(z=Gk(u,h,f))===0||!isFinite(z))return[];if(z>0){let P=Math.round(u/z),F=Math.round(h/z);for(P*z<u&&++P,F*z>h&&--F,o=new Array(_=F-P+1);++x<_;)o[x]=(P+x)*z}else{z=-z;let P=Math.round(u*z),F=Math.round(h*z);for(P/z<u&&++P,F/z>h&&--F,o=new Array(_=F-P+1);++x<_;)o[x]=(P+x)/z}return y&&o.reverse(),o}function Gk(u,h,f){var y=(h-u)/Math.max(0,f),x=Math.floor(Math.log(y)/Math.LN10),_=y/Math.pow(10,x);return x>=0?(_>=Px?10:_>=Cx?5:_>=Dx?2:1)*Math.pow(10,x):-Math.pow(10,-x)/(_>=Px?10:_>=Cx?5:_>=Dx?2:1)}function CT(u,h,f){var y=Math.abs(h-u)/Math.max(0,f),x=Math.pow(10,Math.floor(Math.log(y)/Math.LN10)),_=y/x;return _>=Px?x*=10:_>=Cx?x*=5:_>=Dx&&(x*=2),h<u?-x:x}function DT(u,h,f){u=+u,h=+h,f=(x=arguments.length)<2?(h=u,u=0,1):x<3?1:+f;for(var y=-1,x=Math.max(0,Math.ceil((h-u)/f))|0,_=new Array(x);++y<x;)_[y]=u+y*f;return _}function f0(u,h){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(h).domain(u);break}return this}const PS=Symbol("implicit");function Kk(){var u=new AS,h=[],f=[],y=PS;function x(_){let o=u.get(_);if(o===void 0){if(y!==PS)return y;u.set(_,o=h.push(_)-1)}return f[o%f.length]}return x.domain=function(_){if(!arguments.length)return h.slice();h=[],u=new AS;for(const o of _)u.has(o)||u.set(o,h.push(o)-1);return x},x.range=function(_){return arguments.length?(f=Array.from(_),x):f.slice()},x.unknown=function(_){return arguments.length?(y=_,x):y},x.copy=function(){return Kk(h,f).unknown(y)},f0.apply(x,arguments),x}function Hk(){var u=Kk().unknown(void 0),h=u.domain,f=u.range,y=0,x=1,_,o,z=!1,P=0,F=0,V=.5;delete u.unknown;function j(){var U=h().length,fe=x<y,he=fe?x:y,Ie=fe?y:x;_=(Ie-he)/Math.max(1,U-P+F*2),z&&(_=Math.floor(_)),he+=(Ie-he-_*(U-P))*V,o=_*(1-P),z&&(he=Math.round(he),o=Math.round(o));var we=DT(U).map(function(Ve){return he+_*Ve});return f(fe?we.reverse():we)}return u.domain=function(U){return arguments.length?(h(U),j()):h()},u.range=function(U){return arguments.length?([y,x]=U,y=+y,x=+x,j()):[y,x]},u.rangeRound=function(U){return[y,x]=U,y=+y,x=+x,z=!0,j()},u.bandwidth=function(){return o},u.step=function(){return _},u.round=function(U){return arguments.length?(z=!!U,j()):z},u.padding=function(U){return arguments.length?(P=Math.min(1,F=+U),j()):P},u.paddingInner=function(U){return arguments.length?(P=Math.min(1,U),j()):P},u.paddingOuter=function(U){return arguments.length?(F=+U,j()):F},u.align=function(U){return arguments.length?(V=Math.max(0,Math.min(1,U)),j()):V},u.copy=function(){return Hk(h(),[y,x]).round(z).paddingInner(P).paddingOuter(F).align(V)},f0.apply(j(),arguments)}function jx(u,h,f){u.prototype=h.prototype=f,f.constructor=u}function Xk(u,h){var f=Object.create(u.prototype);for(var y in h)f[y]=h[y];return f}function u_(){}var Qg=.7,n0=1/Qg,Xv="\\s*([+-]?\\d+)\\s*",$g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",MT=/^#([0-9a-f]{3,8})$/,LT=new RegExp(`^rgb\\(${Xv},${Xv},${Xv}\\)$`),RT=new RegExp(`^rgb\\(${tp},${tp},${tp}\\)$`),BT=new RegExp(`^rgba\\(${Xv},${Xv},${Xv},${$g}\\)$`),OT=new RegExp(`^rgba\\(${tp},${tp},${tp},${$g}\\)$`),VT=new RegExp(`^hsl\\(${$g},${tp},${tp}\\)$`),FT=new RegExp(`^hsla\\(${$g},${tp},${tp},${$g}\\)$`),CS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jx(u_,e_,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:DS,formatHex:DS,formatHex8:NT,formatHsl:UT,formatRgb:MS,toString:MS});function DS(){return this.rgb().formatHex()}function NT(){return this.rgb().formatHex8()}function UT(){return Wk(this).formatHsl()}function MS(){return this.rgb().formatRgb()}function e_(u){var h,f;return u=(u+"").trim().toLowerCase(),(h=MT.exec(u))?(f=h[1].length,h=parseInt(h[1],16),f===6?LS(h):f===3?new dl(h>>8&15|h>>4&240,h>>4&15|h&240,(h&15)<<4|h&15,1):f===8?U_(h>>24&255,h>>16&255,h>>8&255,(h&255)/255):f===4?U_(h>>12&15|h>>8&240,h>>8&15|h>>4&240,h>>4&15|h&240,((h&15)<<4|h&15)/255):null):(h=LT.exec(u))?new dl(h[1],h[2],h[3],1):(h=RT.exec(u))?new dl(h[1]*255/100,h[2]*255/100,h[3]*255/100,1):(h=BT.exec(u))?U_(h[1],h[2],h[3],h[4]):(h=OT.exec(u))?U_(h[1]*255/100,h[2]*255/100,h[3]*255/100,h[4]):(h=VT.exec(u))?OS(h[1],h[2]/100,h[3]/100,1):(h=FT.exec(u))?OS(h[1],h[2]/100,h[3]/100,h[4]):CS.hasOwnProperty(u)?LS(CS[u]):u==="transparent"?new dl(NaN,NaN,NaN,0):null}function LS(u){return new dl(u>>16&255,u>>8&255,u&255,1)}function U_(u,h,f,y){return y<=0&&(u=h=f=NaN),new dl(u,h,f,y)}function qT(u){return u instanceof u_||(u=e_(u)),u?(u=u.rgb(),new dl(u.r,u.g,u.b,u.opacity)):new dl}function Mx(u,h,f,y){return arguments.length===1?qT(u):new dl(u,h,f,y==null?1:y)}function dl(u,h,f,y){this.r=+u,this.g=+h,this.b=+f,this.opacity=+y}jx(dl,Mx,Xk(u_,{brighter(u){return u=u==null?n0:Math.pow(n0,u),new dl(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=u==null?Qg:Math.pow(Qg,u),new dl(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new dl(uy(this.r),uy(this.g),uy(this.b),a0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RS,formatHex:RS,formatHex8:jT,formatRgb:BS,toString:BS}));function RS(){return`#${ly(this.r)}${ly(this.g)}${ly(this.b)}`}function jT(){return`#${ly(this.r)}${ly(this.g)}${ly(this.b)}${ly((isNaN(this.opacity)?1:this.opacity)*255)}`}function BS(){const u=a0(this.opacity);return`${u===1?"rgb(":"rgba("}${uy(this.r)}, ${uy(this.g)}, ${uy(this.b)}${u===1?")":`, ${u})`}`}function a0(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function uy(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function ly(u){return u=uy(u),(u<16?"0":"")+u.toString(16)}function OS(u,h,f,y){return y<=0?u=h=f=NaN:f<=0||f>=1?u=h=NaN:h<=0&&(u=NaN),new Hc(u,h,f,y)}function Wk(u){if(u instanceof Hc)return new Hc(u.h,u.s,u.l,u.opacity);if(u instanceof u_||(u=e_(u)),!u)return new Hc;if(u instanceof Hc)return u;u=u.rgb();var h=u.r/255,f=u.g/255,y=u.b/255,x=Math.min(h,f,y),_=Math.max(h,f,y),o=NaN,z=_-x,P=(_+x)/2;return z?(h===_?o=(f-y)/z+(f<y)*6:f===_?o=(y-h)/z+2:o=(h-f)/z+4,z/=P<.5?_+x:2-_-x,o*=60):z=P>0&&P<1?0:o,new Hc(o,z,P,u.opacity)}function ZT(u,h,f,y){return arguments.length===1?Wk(u):new Hc(u,h,f,y==null?1:y)}function Hc(u,h,f,y){this.h=+u,this.s=+h,this.l=+f,this.opacity=+y}jx(Hc,ZT,Xk(u_,{brighter(u){return u=u==null?n0:Math.pow(n0,u),new Hc(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=u==null?Qg:Math.pow(Qg,u),new Hc(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+(this.h<0)*360,h=isNaN(u)||isNaN(this.s)?0:this.s,f=this.l,y=f+(f<.5?f:1-f)*h,x=2*f-y;return new dl(Tx(u>=240?u-240:u+120,x,y),Tx(u,x,y),Tx(u<120?u+240:u-120,x,y),this.opacity)},clamp(){return new Hc(VS(this.h),q_(this.s),q_(this.l),a0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=a0(this.opacity);return`${u===1?"hsl(":"hsla("}${VS(this.h)}, ${q_(this.s)*100}%, ${q_(this.l)*100}%${u===1?")":`, ${u})`}`}}));function VS(u){return u=(u||0)%360,u<0?u+360:u}function q_(u){return Math.max(0,Math.min(1,u||0))}function Tx(u,h,f){return(u<60?h+(f-h)*u/60:u<180?f:u<240?h+(f-h)*(240-u)/60:h)*255}const Zx=u=>()=>u;function GT(u,h){return function(f){return u+f*h}}function KT(u,h,f){return u=Math.pow(u,f),h=Math.pow(h,f)-u,f=1/f,function(y){return Math.pow(u+y*h,f)}}function HT(u){return(u=+u)==1?Yk:function(h,f){return f-h?KT(h,f,u):Zx(isNaN(h)?f:h)}}function Yk(u,h){var f=h-u;return f?GT(u,f):Zx(isNaN(u)?h:u)}const FS=function u(h){var f=HT(h);function y(x,_){var o=f((x=Mx(x)).r,(_=Mx(_)).r),z=f(x.g,_.g),P=f(x.b,_.b),F=Yk(x.opacity,_.opacity);return function(V){return x.r=o(V),x.g=z(V),x.b=P(V),x.opacity=F(V),x+""}}return y.gamma=u,y}(1);function XT(u,h){h||(h=[]);var f=u?Math.min(h.length,u.length):0,y=h.slice(),x;return function(_){for(x=0;x<f;++x)y[x]=u[x]*(1-_)+h[x]*_;return y}}function WT(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function YT(u,h){var f=h?h.length:0,y=u?Math.min(f,u.length):0,x=new Array(y),_=new Array(f),o;for(o=0;o<y;++o)x[o]=Gx(u[o],h[o]);for(;o<f;++o)_[o]=h[o];return function(z){for(o=0;o<y;++o)_[o]=x[o](z);return _}}function JT(u,h){var f=new Date;return u=+u,h=+h,function(y){return f.setTime(u*(1-y)+h*y),f}}function o0(u,h){return u=+u,h=+h,function(f){return u*(1-f)+h*f}}function QT(u,h){var f={},y={},x;(u===null||typeof u!="object")&&(u={}),(h===null||typeof h!="object")&&(h={});for(x in h)x in u?f[x]=Gx(u[x],h[x]):y[x]=h[x];return function(_){for(x in f)y[x]=f[x](_);return y}}var Lx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ax=new RegExp(Lx.source,"g");function $T(u){return function(){return u}}function e4(u){return function(h){return u(h)+""}}function t4(u,h){var f=Lx.lastIndex=Ax.lastIndex=0,y,x,_,o=-1,z=[],P=[];for(u=u+"",h=h+"";(y=Lx.exec(u))&&(x=Ax.exec(h));)(_=x.index)>f&&(_=h.slice(f,_),z[o]?z[o]+=_:z[++o]=_),(y=y[0])===(x=x[0])?z[o]?z[o]+=x:z[++o]=x:(z[++o]=null,P.push({i:o,x:o0(y,x)})),f=Ax.lastIndex;return f<h.length&&(_=h.slice(f),z[o]?z[o]+=_:z[++o]=_),z.length<2?P[0]?e4(P[0].x):$T(h):(h=P.length,function(F){for(var V=0,j;V<h;++V)z[(j=P[V]).i]=j.x(F);return z.join("")})}function Gx(u,h){var f=typeof h,y;return h==null||f==="boolean"?Zx(h):(f==="number"?o0:f==="string"?(y=e_(h))?(h=y,FS):t4:h instanceof e_?FS:h instanceof Date?JT:WT(h)?XT:Array.isArray(h)?YT:typeof h.valueOf!="function"&&typeof h.toString!="function"||isNaN(h)?QT:o0)(u,h)}function r4(u,h){return u=+u,h=+h,function(f){return Math.round(u*(1-f)+h*f)}}function i4(u){return function(){return u}}function n4(u){return+u}var NS=[0,1];function ep(u){return u}function Rx(u,h){return(h-=u=+u)?function(f){return(f-u)/h}:i4(isNaN(h)?NaN:.5)}function a4(u,h){var f;return u>h&&(f=u,u=h,h=f),function(y){return Math.max(u,Math.min(h,y))}}function o4(u,h,f){var y=u[0],x=u[1],_=h[0],o=h[1];return x<y?(y=Rx(x,y),_=f(o,_)):(y=Rx(y,x),_=f(_,o)),function(z){return _(y(z))}}function s4(u,h,f){var y=Math.min(u.length,h.length)-1,x=new Array(y),_=new Array(y),o=-1;for(u[y]<u[0]&&(u=u.slice().reverse(),h=h.slice().reverse());++o<y;)x[o]=Rx(u[o],u[o+1]),_[o]=f(h[o],h[o+1]);return function(z){var P=IT(u,z,1,y)-1;return _[P](x[P](z))}}function Jk(u,h){return h.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function Qk(){var u=NS,h=NS,f=Gx,y,x,_,o=ep,z,P,F;function V(){var U=Math.min(u.length,h.length);return o!==ep&&(o=a4(u[0],u[U-1])),z=U>2?s4:o4,P=F=null,j}function j(U){return U==null||isNaN(U=+U)?_:(P||(P=z(u.map(y),h,f)))(y(o(U)))}return j.invert=function(U){return o(x((F||(F=z(h,u.map(y),o0)))(U)))},j.domain=function(U){return arguments.length?(u=Array.from(U,n4),V()):u.slice()},j.range=function(U){return arguments.length?(h=Array.from(U),V()):h.slice()},j.rangeRound=function(U){return h=Array.from(U),f=r4,V()},j.clamp=function(U){return arguments.length?(o=U?!0:ep,V()):o!==ep},j.interpolate=function(U){return arguments.length?(f=U,V()):f},j.unknown=function(U){return arguments.length?(_=U,j):_},function(U,fe){return y=U,x=fe,V()}}function l4(){return Qk()(ep,ep)}function u4(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)}function s0(u,h){if((f=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var f,y=u.slice(0,f);return[y.length>1?y[0]+y.slice(2):y,+u.slice(f+1)]}function $v(u){return u=s0(Math.abs(u)),u?u[1]:NaN}function c4(u,h){return function(f,y){for(var x=f.length,_=[],o=0,z=u[0],P=0;x>0&&z>0&&(P+z+1>y&&(z=Math.max(1,y-P)),_.push(f.substring(x-=z,x+z)),!((P+=z+1)>y));)z=u[o=(o+1)%u.length];return _.reverse().join(h)}}function h4(u){return function(h){return h.replace(/[0-9]/g,function(f){return u[+f]})}}var p4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function l0(u){if(!(h=p4.exec(u)))throw new Error("invalid format: "+u);var h;return new Kx({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}l0.prototype=Kx.prototype;function Kx(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}Kx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f4(u){e:for(var h=u.length,f=1,y=-1,x;f<h;++f)switch(u[f]){case".":y=x=f;break;case"0":y===0&&(y=f),x=f;break;default:if(!+u[f])break e;y>0&&(y=0);break}return y>0?u.slice(0,y)+u.slice(x+1):u}var $k;function d4(u,h){var f=s0(u,h);if(!f)return u+"";var y=f[0],x=f[1],_=x-($k=Math.max(-8,Math.min(8,Math.floor(x/3)))*3)+1,o=y.length;return _===o?y:_>o?y+new Array(_-o+1).join("0"):_>0?y.slice(0,_)+"."+y.slice(_):"0."+new Array(1-_).join("0")+s0(u,Math.max(0,h+_-1))[0]}function US(u,h){var f=s0(u,h);if(!f)return u+"";var y=f[0],x=f[1];return x<0?"0."+new Array(-x).join("0")+y:y.length>x+1?y.slice(0,x+1)+"."+y.slice(x+1):y+new Array(x-y.length+2).join("0")}const qS={"%":(u,h)=>(u*100).toFixed(h),b:u=>Math.round(u).toString(2),c:u=>u+"",d:u4,e:(u,h)=>u.toExponential(h),f:(u,h)=>u.toFixed(h),g:(u,h)=>u.toPrecision(h),o:u=>Math.round(u).toString(8),p:(u,h)=>US(u*100,h),r:US,s:d4,X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function jS(u){return u}var ZS=Array.prototype.map,GS=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function m4(u){var h=u.grouping===void 0||u.thousands===void 0?jS:c4(ZS.call(u.grouping,Number),u.thousands+""),f=u.currency===void 0?"":u.currency[0]+"",y=u.currency===void 0?"":u.currency[1]+"",x=u.decimal===void 0?".":u.decimal+"",_=u.numerals===void 0?jS:h4(ZS.call(u.numerals,String)),o=u.percent===void 0?"%":u.percent+"",z=u.minus===void 0?"\u2212":u.minus+"",P=u.nan===void 0?"NaN":u.nan+"";function F(j){j=l0(j);var U=j.fill,fe=j.align,he=j.sign,Ie=j.symbol,we=j.zero,Ve=j.width,Ue=j.comma,Ot=j.precision,Mt=j.trim,mt=j.type;mt==="n"?(Ue=!0,mt="g"):qS[mt]||(Ot===void 0&&(Ot=12),Mt=!0,mt="g"),(we||U==="0"&&fe==="=")&&(we=!0,U="0",fe="=");var Qe=Ie==="$"?f:Ie==="#"&&/[boxX]/.test(mt)?"0"+mt.toLowerCase():"",kr=Ie==="$"?y:/[%p]/.test(mt)?o:"",xr=qS[mt],ar=/[defgprs%]/.test(mt);Ot=Ot===void 0?6:/[gprs]/.test(mt)?Math.max(1,Math.min(21,Ot)):Math.max(0,Math.min(20,Ot));function It(At){var Tr=Qe,Vt=kr,Ir,rt,lr;if(mt==="c")Vt=xr(At)+Vt,At="";else{At=+At;var ri=At<0||1/At<0;if(At=isNaN(At)?P:xr(Math.abs(At),Ot),Mt&&(At=f4(At)),ri&&+At==0&&he!=="+"&&(ri=!1),Tr=(ri?he==="("?he:z:he==="-"||he==="("?"":he)+Tr,Vt=(mt==="s"?GS[8+$k/3]:"")+Vt+(ri&&he==="("?")":""),ar){for(Ir=-1,rt=At.length;++Ir<rt;)if(lr=At.charCodeAt(Ir),48>lr||lr>57){Vt=(lr===46?x+At.slice(Ir+1):At.slice(Ir))+Vt,At=At.slice(0,Ir);break}}}Ue&&!we&&(At=h(At,1/0));var ci=Tr.length+At.length+Vt.length,Er=ci<Ve?new Array(Ve-ci+1).join(U):"";switch(Ue&&we&&(At=h(Er+At,Er.length?Ve-Vt.length:1/0),Er=""),fe){case"<":At=Tr+At+Vt+Er;break;case"=":At=Tr+Er+At+Vt;break;case"^":At=Er.slice(0,ci=Er.length>>1)+Tr+At+Vt+Er.slice(ci);break;default:At=Er+Tr+At+Vt;break}return _(At)}return It.toString=function(){return j+""},It}function V(j,U){var fe=F((j=l0(j),j.type="f",j)),he=Math.max(-8,Math.min(8,Math.floor($v(U)/3)))*3,Ie=Math.pow(10,-he),we=GS[8+he/3];return function(Ve){return fe(Ie*Ve)+we}}return{format:F,formatPrefix:V}}var j_,eI,tI;y4({thousands:",",grouping:[3],currency:["$",""]});function y4(u){return j_=m4(u),eI=j_.format,tI=j_.formatPrefix,j_}function v4(u){return Math.max(0,-$v(Math.abs(u)))}function g4(u,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($v(h)/3)))*3-$v(Math.abs(u)))}function _4(u,h){return u=Math.abs(u),h=Math.abs(h)-u,Math.max(0,$v(h)-$v(u))+1}function b4(u,h,f,y){var x=CT(u,h,f),_;switch(y=l0(y==null?",f":y),y.type){case"s":{var o=Math.max(Math.abs(u),Math.abs(h));return y.precision==null&&!isNaN(_=g4(x,o))&&(y.precision=_),tI(y,o)}case"":case"e":case"g":case"p":case"r":{y.precision==null&&!isNaN(_=_4(x,Math.max(Math.abs(u),Math.abs(h))))&&(y.precision=_-(y.type==="e"));break}case"f":case"%":{y.precision==null&&!isNaN(_=v4(x))&&(y.precision=_-(y.type==="%")*2);break}}return eI(y)}function rI(u){var h=u.domain;return u.ticks=function(f){var y=h();return PT(y[0],y[y.length-1],f==null?10:f)},u.tickFormat=function(f,y){var x=h();return b4(x[0],x[x.length-1],f==null?10:f,y)},u.nice=function(f){f==null&&(f=10);var y=h(),x=0,_=y.length-1,o=y[x],z=y[_],P,F,V=10;for(z<o&&(F=o,o=z,z=F,F=x,x=_,_=F);V-- >0;){if(F=Gk(o,z,f),F===P)return y[x]=o,y[_]=z,h(y);if(F>0)o=Math.floor(o/F)*F,z=Math.ceil(z/F)*F;else if(F<0)o=Math.ceil(o*F)/F,z=Math.floor(z*F)/F;else break;P=F}return u},u}function $_(){var u=l4();return u.copy=function(){return Jk(u,$_())},f0.apply(u,arguments),rI(u)}function KS(u){return function(h){return h<0?-Math.pow(-h,u):Math.pow(h,u)}}function x4(u){return u<0?-Math.sqrt(-u):Math.sqrt(u)}function w4(u){return u<0?-u*u:u*u}function E4(u){var h=u(ep,ep),f=1;function y(){return f===1?u(ep,ep):f===.5?u(x4,w4):u(KS(f),KS(1/f))}return h.exponent=function(x){return arguments.length?(f=+x,y()):f},rI(h)}function iI(){var u=E4(Qk());return u.copy=function(){return Jk(u,iI()).exponent(u.exponent())},f0.apply(u,arguments),u}function S4(){return iI.apply(null,arguments).exponent(.5)}const Yg={x:$_,y:$_,z:$_,r:S4};function k4(u){return u.constant?"symlog":u.base?"log":u.exponent?u.exponent()===.5?"sqrt":"pow":"other"}function HS(u){return u}function I4(u){return h=>Math.log(u*h)}function T4(u){return h=>u*Math.exp(h)}function A4(u){return h=>Math.sign(h)*Math.log1p(Math.abs(h/u))}function z4(u){return h=>Math.sign(h)*Math.expm1(Math.abs(h))*u}function Z_(u){return function(f){return f<0?-Math.pow(-f,u):Math.pow(f,u)}}function P4(u){const h=k4(u);if(h==="log"){const f=Math.sign(u.domain()[0]);return{lift:I4(f),ground:T4(f),scaleType:h}}return h==="pow"?{lift:Z_(1),ground:Z_(1/1),scaleType:h}:h==="sqrt"?{lift:Z_(.5),ground:Z_(1/.5),scaleType:h}:h==="symlog"?{lift:A4(1),ground:z4(1),scaleType:h}:{lift:HS,ground:HS,scaleType:h}}function C4(u,h){if(typeof u.range!="function")throw new Error("Scale method `range` must be a function");if(typeof u.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(h))return u.domain();u.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",u.domain()),u.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",u.range());const{lift:f,ground:y}=P4(u),x=u.domain()[0],_=Object.prototype.toString.call(x)==="[object Date]",[o,z]=u.domain().map(fe=>f(_?fe.getTime():fe)),[P,F]=u.range(),V=h[0]||0,j=h[1]||0,U=(z-o)/(Math.abs(F-P)-V-j);return[o-V*U,j*U+z].map(fe=>y(_?new Date(fe):fe))}function D4(u,h,f,y,x){let _,o;return x===!0?(_=0,o=100):(_=u==="r"?1:0,o=u==="y"?f:u==="r"?25:h),y===!0?[o,_]:[_,o]}function M4(u,h,f,y,x,_){return x?typeof x=="function"?x({width:h,height:f}):x:D4(u,h,f,y,_)}function G_(u){return function([f,y,x,_,o,z,P,F,V,j]){if(y===null)return null;const U=M4(u,P,F,z,V,j),fe=f===Yg[u]?f():f.copy();return fe.domain(jk(y[u],x)).range(U),_&&fe.domain(C4(fe,_)),o===!0&&(typeof fe.nice=="function"?fe.nice():console.error(`[Layer Cake] You set \`${u}Nice: true\` but the ${u}Scale does not have a \`.nice\` method. Ignoring...`)),fe}}function K_([u,h]){return f=>{const y=u(f);return Array.isArray(y)?y.map(x=>h(x)):h(y)}}function H_([u]){if(typeof u=="function"){if(typeof u.range=="function")return u.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const X_={x:!1,y:!0,z:!1,r:!1};const L4=u=>({element:u[0]&4,width:u[0]&256,height:u[0]&512,aspectRatio:u[0]&1024,containerWidth:u[0]&128,containerHeight:u[0]&64}),XS=u=>({element:u[2],width:u[8],height:u[9],aspectRatio:u[10],containerWidth:u[7],containerHeight:u[6]});function WS(u){let h,f,y;const x=u[90].default,_=Wv(x,u,u[89],XS);return{c(){h=M("div"),_&&_.c(),this.h()},l(o){h=L(o,"DIV",{class:!0});var z=R(h);_&&_.l(z),z.forEach(T),this.h()},h(){S(h,"class","layercake-container svelte-vhzpsp"),Ho(()=>u[92].call(h)),ie(h,"position",u[5],!1),ie(h,"top",u[5]==="absolute"?"0":null,!1),ie(h,"right",u[5]==="absolute"?"0":null,!1),ie(h,"bottom",u[5]==="absolute"?"0":null,!1),ie(h,"left",u[5]==="absolute"?"0":null,!1),ie(h,"pointer-events",u[4]===!1?"none":null,!1)},m(o,z){Pe(o,h,z),_&&_.m(h,null),u[91](h),f=Xo(h,u[92].bind(h)),y=!0},p(o,z){_&&_.p&&(!y||z[0]&1988|z[2]&134217728)&&Yv(_,x,o,o[89],y?Qv(x,o[89],z,L4):Jv(o[89]),XS),z[0]&32&&ie(h,"position",o[5],!1),z[0]&32&&ie(h,"top",o[5]==="absolute"?"0":null,!1),z[0]&32&&ie(h,"right",o[5]==="absolute"?"0":null,!1),z[0]&32&&ie(h,"bottom",o[5]==="absolute"?"0":null,!1),z[0]&32&&ie(h,"left",o[5]==="absolute"?"0":null,!1),z[0]&16&&ie(h,"pointer-events",o[4]===!1?"none":null,!1)},i(o){y||(et(_,o),y=!0)},o(o){pt(_,o),y=!1},d(o){o&&T(h),_&&_.d(o),u[91](null),f()}}}function R4(u){let h,f,y=(u[3]===!0||typeof window<"u")&&WS(u);return{c(){y&&y.c(),h=An()},l(x){y&&y.l(x),h=An()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,_){x[3]===!0||typeof window<"u"?y?(y.p(x,_),_[0]&8&&et(y,1)):(y=WS(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Yu(),pt(y,1,1,()=>{y=null}),Ju())},i(x){f||(et(y),f=!0)},o(x){pt(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function B4(u,h,f){let y,x,_,o,z,P,F,V,j,U,fe,he,Ie,we,Ve,Ue,Ot,Mt,mt,Qe,kr,xr,ar,It,At,Tr,Vt,Ir,rt,lr,ri,ci,Er,vt,nt,fr,On,sa,Ti,vn,oi,{$$slots:Sa={},$$scope:gr}=h,{ssr:Vn=!1}=h,{pointerEvents:Qa=!0}=h,{position:Vr="relative"}=h,{percentRange:Lt=!1}=h,{width:Wi=void 0}=h,{height:Bi=void 0}=h,{containerWidth:hi=Wi||100}=h,{containerHeight:ho=Bi||100}=h,{element:Jt=void 0}=h,{x:Ei=void 0}=h,{y:Mr=void 0}=h,{z:di=void 0}=h,{r:mi=void 0}=h,{data:Ar=[]}=h,{xDomain:yi=void 0}=h,{yDomain:un=void 0}=h,{zDomain:Kr=void 0}=h,{rDomain:hr=void 0}=h,{xNice:Fr=!1}=h,{yNice:Yn=!1}=h,{zNice:Fn=!1}=h,{rNice:La=!1}=h,{xReverse:Qo=X_.x}=h,{yReverse:pi=X_.y}=h,{zReverse:cn=X_.z}=h,{rReverse:gn=X_.r}=h,{xPadding:po=void 0}=h,{yPadding:la=void 0}=h,{zPadding:ml=void 0}=h,{rPadding:$o=void 0}=h,{xScale:Nn=Yg.x}=h,{yScale:_n=Yg.y}=h,{zScale:ua=Yg.z}=h,{rScale:Jn=Yg.r}=h,{xRange:ca=void 0}=h,{yRange:Nr=void 0}=h,{zRange:N=void 0}=h,{rRange:G=void 0}=h,{padding:X={}}=h,{extents:re={}}=h,{flatData:ue=void 0}=h,{custom:ve={}}=h,xe=!1;Ok(()=>{xe=!0});const H={},oe=Or(Lt);$t(u,oe,ke=>f(128,sa=ke));const Se=Or(hi);$t(u,Se,ke=>f(7,On=ke));const Ne=Or(ho);$t(u,Ne,ke=>f(6,fr=ke));const Ge=Or(Ix(re));$t(u,Ge,ke=>f(127,nt=ke));const Le=Or(Ar);$t(u,Le,ke=>f(126,vt=ke));const qe=Or(ue||Ar);$t(u,qe,ke=>f(125,Er=ke));const ht=Or(X);$t(u,ht,ke=>f(124,ci=ke));const at=Or(pd(Ei));$t(u,at,ke=>f(123,ri=ke));const Re=Or(pd(Mr));$t(u,Re,ke=>f(122,lr=ke));const tt=Or(pd(di));$t(u,tt,ke=>f(121,rt=ke));const We=Or(pd(mi));$t(u,We,ke=>f(120,Ir=ke));const $e=Or(yi);$t(u,$e,ke=>f(119,Vt=ke));const Nt=Or(un);$t(u,Nt,ke=>f(118,Tr=ke));const Ze=Or(Kr);$t(u,Ze,ke=>f(117,At=ke));const Gt=Or(hr);$t(u,Gt,ke=>f(116,It=ke));const or=Or(Fr);$t(u,or,ke=>f(115,ar=ke));const Ct=Or(Yn);$t(u,Ct,ke=>f(114,xr=ke));const tr=Or(Fn);$t(u,tr,ke=>f(113,kr=ke));const er=Or(La);$t(u,er,ke=>f(112,Qe=ke));const Ai=Or(Qo);$t(u,Ai,ke=>f(111,mt=ke));const rr=Or(pi);$t(u,rr,ke=>f(110,Mt=ke));const dr=Or(cn);$t(u,dr,ke=>f(109,Ot=ke));const pr=Or(gn);$t(u,pr,ke=>f(108,Ue=ke));const Kt=Or(po);$t(u,Kt,ke=>f(107,Ve=ke));const ir=Or(la);$t(u,ir,ke=>f(106,we=ke));const Oi=Or(ml);$t(u,Oi,ke=>f(105,Ie=ke));const ha=Or($o);$t(u,ha,ke=>f(104,he=ke));const vi=Or(ca);$t(u,vi,ke=>f(103,fe=ke));const Yi=Or(Nr);$t(u,Yi,ke=>f(102,U=ke));const bn=Or(N);$t(u,bn,ke=>f(101,j=ke));const Ji=Or(G);$t(u,Ji,ke=>f(100,V=ke));const mr=Or(Nn);$t(u,mr,ke=>f(99,F=ke));const Un=Or(_n);$t(u,Un,ke=>f(98,P=ke));const Vi=Or(ua);$t(u,Vi,ke=>f(97,z=ke));const Hr=Or(Jn);$t(u,Hr,ke=>f(96,o=ke));const Qn=Or(H);$t(u,Qn,ke=>f(94,x=ke));const zr=Or(ve);$t(u,zr,ke=>f(95,_=ke));const xn=Bn([at,Re,tt,We],([ke,Ni,zn,Wr])=>{const pa={};return ke&&(pa.x=ke),Ni&&(pa.y=Ni),zn&&(pa.z=zn),Wr&&(pa.r=Wr),pa}),hn=Bn([ht,Se,Ne],([ke])=>Object.assign({top:0,right:0,bottom:0,left:0},ke)),Qu=Bn([Se,Ne,hn],([ke,Ni,zn])=>{const Wr={};return Wr.top=zn.top,Wr.right=ke-zn.right,Wr.bottom=Ni-zn.bottom,Wr.left=zn.left,Wr.width=Wr.right-Wr.left,Wr.height=Wr.bottom-Wr.top,Wr.width<=0&&xe===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Wr.height<=0&&xe===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Wr}),Fi=Bn([Qu],([ke])=>ke.width);$t(u,Fi,ke=>f(8,Ti=ke));const fo=Bn([Qu],([ke])=>ke.height);$t(u,fo,ke=>f(9,vn=ke));const pn=Bn([qe,xn,Ge],([ke,Ni,zn])=>{const Wr=Ix(Ni,zn);return Object.keys(Wr).length>0?{...bT(ke,Wr),...zn}:{}}),Xr=Bn([pn,$e],N_("x")),zi=Bn([pn,Nt],N_("y")),fi=Bn([pn,Ze],N_("z")),mo=Bn([pn,Gt],N_("r")),es=Bn([mr,pn,Xr,Kt,or,Ai,Fi,fo,vi,oe],G_("x")),yd=Bn([at,es],K_),yl=Bn([Un,pn,zi,ir,Ct,rr,Fi,fo,Yi,oe],G_("y")),vl=Bn([Re,yl],K_),ts=Bn([Vi,pn,fi,Oi,tr,dr,Fi,fo,bn,oe],G_("z")),ip=Bn([tt,ts],K_),au=Bn([Hr,pn,mo,ha,er,pr,Fi,fo,Ji,oe],G_("r")),rs=Bn([We,au],K_),yo=Bn([es],H_),ou=Bn([yl],H_),gl=Bn([ts],H_),Yc=Bn([au],H_),wn=Bn([Fi,fo],([ke,Ni])=>ke/Ni);$t(u,wn,ke=>f(10,oi=ke));function Si(ke){of[ke?"unshift":"push"](()=>{Jt=ke,f(2,Jt)})}function qn(){hi=this.clientWidth,ho=this.clientHeight,f(0,hi),f(1,ho)}return u.$$set=ke=>{"ssr"in ke&&f(3,Vn=ke.ssr),"pointerEvents"in ke&&f(4,Qa=ke.pointerEvents),"position"in ke&&f(5,Vr=ke.position),"percentRange"in ke&&f(51,Lt=ke.percentRange),"width"in ke&&f(52,Wi=ke.width),"height"in ke&&f(53,Bi=ke.height),"containerWidth"in ke&&f(0,hi=ke.containerWidth),"containerHeight"in ke&&f(1,ho=ke.containerHeight),"element"in ke&&f(2,Jt=ke.element),"x"in ke&&f(54,Ei=ke.x),"y"in ke&&f(55,Mr=ke.y),"z"in ke&&f(56,di=ke.z),"r"in ke&&f(57,mi=ke.r),"data"in ke&&f(58,Ar=ke.data),"xDomain"in ke&&f(59,yi=ke.xDomain),"yDomain"in ke&&f(60,un=ke.yDomain),"zDomain"in ke&&f(61,Kr=ke.zDomain),"rDomain"in ke&&f(62,hr=ke.rDomain),"xNice"in ke&&f(63,Fr=ke.xNice),"yNice"in ke&&f(64,Yn=ke.yNice),"zNice"in ke&&f(65,Fn=ke.zNice),"rNice"in ke&&f(66,La=ke.rNice),"xReverse"in ke&&f(67,Qo=ke.xReverse),"yReverse"in ke&&f(68,pi=ke.yReverse),"zReverse"in ke&&f(69,cn=ke.zReverse),"rReverse"in ke&&f(70,gn=ke.rReverse),"xPadding"in ke&&f(71,po=ke.xPadding),"yPadding"in ke&&f(72,la=ke.yPadding),"zPadding"in ke&&f(73,ml=ke.zPadding),"rPadding"in ke&&f(74,$o=ke.rPadding),"xScale"in ke&&f(75,Nn=ke.xScale),"yScale"in ke&&f(76,_n=ke.yScale),"zScale"in ke&&f(77,ua=ke.zScale),"rScale"in ke&&f(78,Jn=ke.rScale),"xRange"in ke&&f(79,ca=ke.xRange),"yRange"in ke&&f(80,Nr=ke.yRange),"zRange"in ke&&f(81,N=ke.zRange),"rRange"in ke&&f(82,G=ke.rRange),"padding"in ke&&f(83,X=ke.padding),"extents"in ke&&f(84,re=ke.extents),"flatData"in ke&&f(85,ue=ke.flatData),"custom"in ke&&f(86,ve=ke.custom),"$$scope"in ke&&f(89,gr=ke.$$scope)},u.$$.update=()=>{u.$$.dirty[1]&8388608&&Ei&&f(87,H.x=Ei,H),u.$$.dirty[1]&16777216&&Mr&&f(87,H.y=Mr,H),u.$$.dirty[1]&33554432&&di&&f(87,H.z=di,H),u.$$.dirty[1]&67108864&&mi&&f(87,H.r=mi,H),u.$$.dirty[1]&268435456&&yi&&f(87,H.xDomain=yi,H),u.$$.dirty[1]&536870912&&un&&f(87,H.yDomain=un,H),u.$$.dirty[1]&1073741824&&Kr&&f(87,H.zDomain=Kr,H),u.$$.dirty[2]&1&&hr&&f(87,H.rDomain=hr,H),u.$$.dirty[2]&131072&&ca&&f(87,H.xRange=ca,H),u.$$.dirty[2]&262144&&Nr&&f(87,H.yRange=Nr,H),u.$$.dirty[2]&524288&&N&&f(87,H.zRange=N,H),u.$$.dirty[2]&1048576&&G&&f(87,H.rRange=G,H),u.$$.dirty[1]&1048576&&Br(oe,sa=Lt,sa),u.$$.dirty[0]&1&&Br(Se,On=hi,On),u.$$.dirty[0]&2&&Br(Ne,fr=ho,fr),u.$$.dirty[2]&4194304&&Br(Ge,nt=Ix(re),nt),u.$$.dirty[1]&134217728&&Br(Le,vt=Ar,vt),u.$$.dirty[1]&134217728|u.$$.dirty[2]&8388608&&Br(qe,Er=ue||Ar,Er),u.$$.dirty[2]&2097152&&Br(ht,ci=X,ci),u.$$.dirty[1]&8388608&&Br(at,ri=pd(Ei),ri),u.$$.dirty[1]&16777216&&Br(Re,lr=pd(Mr),lr),u.$$.dirty[1]&33554432&&Br(tt,rt=pd(di),rt),u.$$.dirty[1]&67108864&&Br(We,Ir=pd(mi),Ir),u.$$.dirty[1]&268435456&&Br($e,Vt=yi,Vt),u.$$.dirty[1]&536870912&&Br(Nt,Tr=un,Tr),u.$$.dirty[1]&1073741824&&Br(Ze,At=Kr,At),u.$$.dirty[2]&1&&Br(Gt,It=hr,It),u.$$.dirty[2]&2&&Br(or,ar=Fr,ar),u.$$.dirty[2]&4&&Br(Ct,xr=Yn,xr),u.$$.dirty[2]&8&&Br(tr,kr=Fn,kr),u.$$.dirty[2]&16&&Br(er,Qe=La,Qe),u.$$.dirty[2]&32&&Br(Ai,mt=Qo,mt),u.$$.dirty[2]&64&&Br(rr,Mt=pi,Mt),u.$$.dirty[2]&128&&Br(dr,Ot=cn,Ot),u.$$.dirty[2]&256&&Br(pr,Ue=gn,Ue),u.$$.dirty[2]&512&&Br(Kt,Ve=po,Ve),u.$$.dirty[2]&1024&&Br(ir,we=la,we),u.$$.dirty[2]&2048&&Br(Oi,Ie=ml,Ie),u.$$.dirty[2]&4096&&Br(ha,he=$o,he),u.$$.dirty[2]&131072&&Br(vi,fe=ca,fe),u.$$.dirty[2]&262144&&Br(Yi,U=Nr,U),u.$$.dirty[2]&524288&&Br(bn,j=N,j),u.$$.dirty[2]&1048576&&Br(Ji,V=G,V),u.$$.dirty[2]&8192&&Br(mr,F=Nn,F),u.$$.dirty[2]&16384&&Br(Un,P=_n,P),u.$$.dirty[2]&32768&&Br(Vi,z=ua,z),u.$$.dirty[2]&65536&&Br(Hr,o=Jn,o),u.$$.dirty[2]&16777216&&Br(zr,_=ve,_),u.$$.dirty[2]&33554432&&Br(Qn,x=H,x),u.$$.dirty[2]&67108864&&Bk("LayerCake",y)},f(88,y={activeGetters:xn,width:Fi,height:fo,percentRange:oe,aspectRatio:wn,containerWidth:Se,containerHeight:Ne,x:at,y:Re,z:tt,r:We,custom:zr,data:Le,xNice:or,yNice:Ct,zNice:tr,rNice:er,xReverse:Ai,yReverse:rr,zReverse:dr,rReverse:pr,xPadding:Kt,yPadding:ir,zPadding:Oi,rPadding:ha,padding:hn,flatData:qe,extents:pn,xDomain:Xr,yDomain:zi,zDomain:fi,rDomain:mo,xRange:yo,yRange:ou,zRange:gl,rRange:Yc,config:Qn,xScale:es,xGet:yd,yScale:yl,yGet:vl,zScale:ts,zGet:ip,rScale:au,rGet:rs}),[hi,ho,Jt,Vn,Qa,Vr,fr,On,Ti,vn,oi,oe,Se,Ne,Ge,Le,qe,ht,at,Re,tt,We,$e,Nt,Ze,Gt,or,Ct,tr,er,Ai,rr,dr,pr,Kt,ir,Oi,ha,vi,Yi,bn,Ji,mr,Un,Vi,Hr,Qn,zr,Fi,fo,wn,Lt,Wi,Bi,Ei,Mr,di,mi,Ar,yi,un,Kr,hr,Fr,Yn,Fn,La,Qo,pi,cn,gn,po,la,ml,$o,Nn,_n,ua,Jn,ca,Nr,N,G,X,re,ue,ve,H,y,gr,Sa,Si,qn]}class O4 extends Wo{constructor(h){super(),Yo(this,h,B4,R4,Jo,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const V4=u=>({element:u&1}),YS=u=>({element:u[0]}),F4=u=>({element:u&1}),JS=u=>({element:u[0]});function N4(u){let h,f,y,x,_;const o=u[12].defs,z=Wv(o,u,u[11],JS),P=u[12].default,F=Wv(P,u,u[11],YS);return{c(){h=Da("svg"),f=Da("defs"),z&&z.c(),y=Da("g"),F&&F.c(),this.h()},l(V){h=Ma(V,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var j=R(h);f=Ma(j,"defs",{});var U=R(f);z&&z.l(U),U.forEach(T),y=Ma(j,"g",{class:!0,transform:!0});var fe=R(y);F&&F.l(fe),fe.forEach(T),j.forEach(T),this.h()},h(){S(y,"class","layercake-layout-svg_g"),S(y,"transform",x="translate("+u[7].left+", "+u[7].top+")"),S(h,"class","layercake-layout-svg svelte-u84d8d"),S(h,"viewBox",u[4]),S(h,"width",u[5]),S(h,"height",u[6]),ie(h,"z-index",u[2],!1),ie(h,"pointer-events",u[3]===!1?"none":null,!1)},m(V,j){Pe(V,h,j),w(h,f),z&&z.m(f,null),w(h,y),F&&F.m(y,null),u[13](y),u[14](h),_=!0},p(V,[j]){z&&z.p&&(!_||j&2049)&&Yv(z,o,V,V[11],_?Qv(o,V[11],j,F4):Jv(V[11]),JS),F&&F.p&&(!_||j&2049)&&Yv(F,P,V,V[11],_?Qv(P,V[11],j,V4):Jv(V[11]),YS),(!_||j&128&&x!==(x="translate("+V[7].left+", "+V[7].top+")"))&&S(y,"transform",x),(!_||j&16)&&S(h,"viewBox",V[4]),(!_||j&32)&&S(h,"width",V[5]),(!_||j&64)&&S(h,"height",V[6]),j&4&&ie(h,"z-index",V[2],!1),j&8&&ie(h,"pointer-events",V[3]===!1?"none":null,!1)},i(V){_||(et(z,V),et(F,V),_=!0)},o(V){pt(z,V),pt(F,V),_=!1},d(V){V&&T(h),z&&z.d(V),F&&F.d(V),u[13](null),u[14](null)}}}function U4(u,h,f){let y,x,_,{$$slots:o={},$$scope:z}=h,{element:P=void 0}=h,{innerElement:F=void 0}=h,{zIndex:V=void 0}=h,{pointerEvents:j=void 0}=h,{viewBox:U=void 0}=h;const{containerWidth:fe,containerHeight:he,padding:Ie}=t_("LayerCake");$t(u,fe,Ue=>f(5,y=Ue)),$t(u,he,Ue=>f(6,x=Ue)),$t(u,Ie,Ue=>f(7,_=Ue));function we(Ue){of[Ue?"unshift":"push"](()=>{F=Ue,f(1,F)})}function Ve(Ue){of[Ue?"unshift":"push"](()=>{P=Ue,f(0,P)})}return u.$$set=Ue=>{"element"in Ue&&f(0,P=Ue.element),"innerElement"in Ue&&f(1,F=Ue.innerElement),"zIndex"in Ue&&f(2,V=Ue.zIndex),"pointerEvents"in Ue&&f(3,j=Ue.pointerEvents),"viewBox"in Ue&&f(4,U=Ue.viewBox),"$$scope"in Ue&&f(11,z=Ue.$$scope)},[P,F,V,j,U,y,x,_,fe,he,Ie,z,o,we,Ve]}class q4 extends Wo{constructor(h){super(),Yo(this,h,U4,N4,Jo,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function QS(u,h,f){const y=u.slice();return y[23]=h[f],y[25]=f,y}function $S(u){let h,f,y,x;return{c(){h=Da("rect"),this.h()},l(_){h=Ma(_,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[13](u[12](u[23]))-1),S(h,"width",x=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height","3"),S(h,"fill","#CEDC20"),S(h,"stroke",u[0]),S(h,"stroke-width",u[1])},m(_,o){Pe(_,h,o)},p(_,o){o&3200&&f!==(f=_[11].bandwidth?_[7](_[23]):_[7](_[23])[0])&&S(h,"x",f),o&13312&&y!==(y=_[13](_[12](_[23]))-1)&&S(h,"y",y),o&3584&&x!==(x=_[11].bandwidth?_[11].bandwidth():_[9](_[23]))&&S(h,"width",x),o&1&&S(h,"stroke",_[0]),o&2&&S(h,"stroke-width",_[1])},d(_){_&&T(h)}}}function ek(u){let h,f,y,x,_,o,z,P,F=u[12]&&$S(u);return{c(){h=Da("rect"),F&&F.c(),o=Da("text"),this.h()},l(V){h=Ma(V,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),R(h).forEach(T),F&&F.l(V),o=Ma(V,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),R(o).forEach(T),this.h()},h(){S(h,"class","group-rect"),S(h,"data-id",u[25]),S(h,"x",f=u[11].bandwidth?u[7](u[23]):u[7](u[23])[0]),S(h,"y",y=u[6](u[23])),S(h,"width",x=u[11].bandwidth?u[11].bandwidth():u[9](u[23])),S(h,"height",_=u[8](u[23])),S(h,"fill",u[4]),S(h,"stroke",u[0]),S(h,"stroke-width",u[1]),S(o,"x",z=u[11].bandwidth?u[7](u[23])+u[11].bandwidth()/2:u[7](u[23])[0]),S(o,"y",P=u[6](u[23])-4),S(o,"dx",u[2]),S(o,"dy",u[3]),S(o,"text-anchor",u[5])},m(V,j){Pe(V,h,j),F&&F.m(V,j),Pe(V,o,j)},p(V,j){j&3200&&f!==(f=V[11].bandwidth?V[7](V[23]):V[7](V[23])[0])&&S(h,"x",f),j&1088&&y!==(y=V[6](V[23]))&&S(h,"y",y),j&3584&&x!==(x=V[11].bandwidth?V[11].bandwidth():V[9](V[23]))&&S(h,"width",x),j&1280&&_!==(_=V[8](V[23]))&&S(h,"height",_),j&16&&S(h,"fill",V[4]),j&1&&S(h,"stroke",V[0]),j&2&&S(h,"stroke-width",V[1]),V[12]?F?F.p(V,j):(F=$S(V),F.c(),F.m(o.parentNode,o)):F&&(F.d(1),F=null),j&3200&&z!==(z=V[11].bandwidth?V[7](V[23])+V[11].bandwidth()/2:V[7](V[23])[0])&&S(o,"x",z),j&1088&&P!==(P=V[6](V[23])-4)&&S(o,"y",P),j&4&&S(o,"dx",V[2]),j&8&&S(o,"dy",V[3]),j&32&&S(o,"text-anchor",V[5])},d(V){V&&T(h),F&&F.d(V),V&&T(o)}}}function j4(u){let h,f=u[10],y=[];for(let x=0;x<f.length;x+=1)y[x]=ek(QS(u,f,x));return{c(){h=Da("g");for(let x=0;x<y.length;x+=1)y[x].c();this.h()},l(x){h=Ma(x,"g",{class:!0});var _=R(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(T),this.h()},h(){S(h,"class","column-group svelte-wgzwsk")},m(x,_){Pe(x,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(x,[_]){if(_&16383){f=x[10];let o;for(o=0;o<f.length;o+=1){const z=QS(x,f,o);y[o]?y[o].p(z,_):(y[o]=ek(z),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},i:ln,o:ln,d(x){x&&T(h),Wc(y,x)}}}function Z4(u,h,f){let y,x,_,o,z,P,F,V,j;const{data:U,xGet:fe,yGet:he,yRange:Ie,xScale:we,yScale:Ve,y:Ue,z:Ot}=t_("LayerCake");$t(u,U,It=>f(10,P=It)),$t(u,fe,It=>f(7,z=It)),$t(u,he,It=>f(6,_=It)),$t(u,Ie,It=>f(21,o=It)),$t(u,we,It=>f(11,F=It)),$t(u,Ve,It=>f(13,j=It)),$t(u,Ot,It=>f(12,V=It));let{stroke:Mt=""}=h,{strokeWidth:mt=0}=h,{dxTick:Qe=0}=h,{dyTick:kr=0}=h,{fill:xr="#00205b"}=h,{textAnchor:ar="middle"}=h;return u.$$set=It=>{"stroke"in It&&f(0,Mt=It.stroke),"strokeWidth"in It&&f(1,mt=It.strokeWidth),"dxTick"in It&&f(2,Qe=It.dxTick),"dyTick"in It&&f(3,kr=It.dyTick),"fill"in It&&f(4,xr=It.fill),"textAnchor"in It&&f(5,ar=It.textAnchor)},u.$$.update=()=>{u.$$.dirty&128&&f(9,y=It=>{const At=z(It);return Math.max(0,At[1]-At[0])}),u.$$.dirty&2097216&&f(8,x=It=>o[0]-_(It))},[Mt,mt,Qe,kr,xr,ar,_,z,x,y,P,F,V,j,U,fe,he,Ie,we,Ve,Ot,o]}class G4 extends Wo{constructor(h){super(),Yo(this,h,Z4,j4,Jo,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function tk(u,h,f){const y=u.slice();return y[28]=h[f],y[30]=f,y}function rk(u){let h,f,y,x;return{c(){h=Da("line"),this.h()},l(_){h=Ma(_,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),R(h).forEach(T),this.h()},h(){S(h,"y1",f=u[20]*-1),S(h,"y2",y=u[14]&&u[30]%2==0?u[10]+u[8]+2:u[10]+u[8]-13),S(h,"x1","0"),S(h,"x2","0"),S(h,"stroke",u[11]),S(h,"stroke-width",x=u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)?2:1),S(h,"class","svelte-fwjh80"),wi(h,"baseline",u[13])},m(_,o){Pe(_,h,o)},p(_,o){o&1048576&&f!==(f=_[20]*-1)&&S(h,"y1",f),o&17664&&y!==(y=_[14]&&_[30]%2==0?_[10]+_[8]+2:_[10]+_[8]-13)&&S(h,"y2",y),o&2048&&S(h,"stroke",_[11]),o&32784&&x!==(x=_[15]&&Array.isArray(_[4])&&_[30]==Math.floor(_[4].length/2)?2:1)&&S(h,"stroke-width",x),o&8192&&wi(h,"baseline",_[13])},d(_){_&&T(h)}}}function K4(u){let h=u[1](u[28])+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,x){Pe(y,f,x)},p(y,x){x&262146&&h!==(h=y[1](y[28])+"")&&ft(f,h)},d(y){y&&T(f)}}}function H4(u){let h,f=u[1](u[28])+"",y,x;return{c(){h=ee(u[5]),y=ee(f),x=ee(u[6])},l(_){h=te(_,u[5]),y=te(_,f),x=te(_,u[6])},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o&32&&ft(h,_[5]),o&262146&&f!==(f=_[1](_[28])+"")&&ft(y,f),o&64&&ft(x,_[6])},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function ik(u){let h,f,y,x,_,o,z,P=u[0]!==!1&&rk(u);function F(U,fe){return U[30]==U[18].length-1?H4:K4}let V=F(u),j=V(u);return{c(){h=Da("g"),P&&P.c(),f=Da("text"),j.c(),this.h()},l(U){h=Ma(U,"g",{class:!0,transform:!0});var fe=R(h);P&&P.l(fe),f=Ma(fe,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var he=R(f);j.l(he),he.forEach(T),fe.forEach(T),this.h()},h(){S(f,"x",y=u[7]||u[16]?u[17].bandwidth()/2:0),S(f,"y",x=u[3]?u[20]*-1-6:u[14]&&u[30]%2==0?u[8]+15:u[8]),S(f,"dx",_=u[24](u[30])=="start"?u[9]-2:u[24](u[30])=="end"?u[9]+2:u[9]),S(f,"dy",u[10]),S(f,"text-anchor",u[24](u[30])),S(f,"fill",u[12]),S(f,"class","svelte-fwjh80"),wi(f,"bold",u[15]&&Array.isArray(u[4])&&u[30]==Math.floor(u[4].length/2)),S(h,"class",o="tick tick-"+u[28]+" svelte-fwjh80"),S(h,"transform",z="translate("+u[17](u[28])+","+u[19][0]+")")},m(U,fe){Pe(U,h,fe),P&&P.m(h,null),w(h,f),j.m(f,null)},p(U,fe){U[0]!==!1?P?P.p(U,fe):(P=rk(U),P.c(),P.m(h,f)):P&&(P.d(1),P=null),V===(V=F(U))&&j?j.p(U,fe):(j.d(1),j=V(U),j&&(j.c(),j.m(f,null))),fe&196736&&y!==(y=U[7]||U[16]?U[17].bandwidth()/2:0)&&S(f,"x",y),fe&1065224&&x!==(x=U[3]?U[20]*-1-6:U[14]&&U[30]%2==0?U[8]+15:U[8])&&S(f,"y",x),fe&512&&_!==(_=U[24](U[30])=="start"?U[9]-2:U[24](U[30])=="end"?U[9]+2:U[9])&&S(f,"dx",_),fe&1024&&S(f,"dy",U[10]),fe&4096&&S(f,"fill",U[12]),fe&32784&&wi(f,"bold",U[15]&&Array.isArray(U[4])&&U[30]==Math.floor(U[4].length/2)),fe&262144&&o!==(o="tick tick-"+U[28]+" svelte-fwjh80")&&S(h,"class",o),fe&917504&&z!==(z="translate("+U[17](U[28])+","+U[19][0]+")")&&S(h,"transform",z)},d(U){U&&T(h),P&&P.d(),j.d()}}}function nk(u){let h,f,y;return{c(){h=Da("line"),this.h()},l(x){h=Ma(x,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","baseline svelte-fwjh80"),S(h,"y1",u[20]),S(h,"y2","0"),S(h,"x1",f=u[17](0)),S(h,"x2",y=u[17](0)),S(h,"stroke",u[11])},m(x,_){Pe(x,h,_)},p(x,_){_&1048576&&S(h,"y1",x[20]),_&131072&&f!==(f=x[17](0))&&S(h,"x1",f),_&131072&&y!==(y=x[17](0))&&S(h,"x2",y),_&2048&&S(h,"stroke",x[11])},d(x){x&&T(h)}}}function X4(u){let h,f,y=u[18],x=[];for(let o=0;o<y.length;o+=1)x[o]=ik(tk(u,y,o));let _=u[2]===!0&&nk(u);return{c(){h=Da("g");for(let o=0;o<x.length;o+=1)x[o].c();f=An(),_&&_.c(),this.h()},l(o){h=Ma(o,"g",{class:!0});var z=R(h);for(let P=0;P<x.length;P+=1)x[P].l(z);f=An(),_&&_.l(z),z.forEach(T),this.h()},h(){S(h,"class","axis x-axis")},m(o,z){Pe(o,h,z);for(let P=0;P<x.length;P+=1)x[P].m(h,null);w(h,f),_&&_.m(h,null)},p(o,[z]){if(z&18874363){y=o[18];let P;for(P=0;P<y.length;P+=1){const F=tk(o,y,P);x[P]?x[P].p(F,z):(x[P]=ik(F),x[P].c(),x[P].m(h,f))}for(;P<x.length;P+=1)x[P].d(1);x.length=y.length}o[2]===!0?_?_.p(o,z):(_=nk(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null)},i:ln,o:ln,d(o){o&&T(h),Wc(x,o),_&&_.d()}}}function W4(u,h,f){let y,x,_,o,z;const{width:P,height:F,xScale:V,yScale:j,yRange:U}=t_("LayerCake");$t(u,F,rt=>f(20,z=rt)),$t(u,V,rt=>f(17,_=rt)),$t(u,U,rt=>f(19,o=rt));let{gridlines:fe=!0}=h,{formatTick:he=rt=>rt}=h,{baseline:Ie=!1}=h,{flipped:we=!1}=h,{snapTicks:Ve=!1}=h,{ticks:Ue=void 0}=h,{prefix:Ot=""}=h,{suffix:Mt=""}=h,{xTick:mt=void 0}=h,{yTick:Qe=15}=h,{dxTick:kr=0}=h,{dyTick:xr=0}=h,{lineColor:ar="#999"}=h,{textColor:It="#555"}=h,{solid:At=!1}=h,{stagger:Tr=!1}=h,{median:Vt=!0}=h;function Ir(rt){if(Ve===!0){if(rt===0)return"start";if(rt===x.length-1)return"end"}return"middle"}return u.$$set=rt=>{"gridlines"in rt&&f(0,fe=rt.gridlines),"formatTick"in rt&&f(1,he=rt.formatTick),"baseline"in rt&&f(2,Ie=rt.baseline),"flipped"in rt&&f(3,we=rt.flipped),"snapTicks"in rt&&f(25,Ve=rt.snapTicks),"ticks"in rt&&f(4,Ue=rt.ticks),"prefix"in rt&&f(5,Ot=rt.prefix),"suffix"in rt&&f(6,Mt=rt.suffix),"xTick"in rt&&f(7,mt=rt.xTick),"yTick"in rt&&f(8,Qe=rt.yTick),"dxTick"in rt&&f(9,kr=rt.dxTick),"dyTick"in rt&&f(10,xr=rt.dyTick),"lineColor"in rt&&f(11,ar=rt.lineColor),"textColor"in rt&&f(12,It=rt.textColor),"solid"in rt&&f(13,At=rt.solid),"stagger"in rt&&f(14,Tr=rt.stagger),"median"in rt&&f(15,Vt=rt.median)},u.$$.update=()=>{u.$$.dirty&131072&&f(16,y=typeof _.bandwidth=="function"),u.$$.dirty&196624&&f(18,x=Array.isArray(Ue)?Ue:y?_.domain():_.ticks(Ue))},[fe,he,Ie,we,Ue,Ot,Mt,mt,Qe,kr,xr,ar,It,At,Tr,Vt,y,_,x,o,z,F,V,U,Ir,Ve]}class Y4 extends Wo{constructor(h){super(),Yo(this,h,W4,X4,Jo,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function J4(u){let h,f,y,x;return h=new G4({props:{fill:u[1],formatVal:u[5]}}),y=new Y4({props:{gridlines:!1}}),{c(){Ut(h.$$.fragment),f=_e(),Ut(y.$$.fragment)},l(_){qt(h.$$.fragment,_),f=be(_),qt(y.$$.fragment,_)},m(_,o){jt(h,_,o),Pe(_,f,o),jt(y,_,o),x=!0},p(_,o){const z={};o&2&&(z.fill=_[1]),o&32&&(z.formatVal=_[5]),h.$set(z)},i(_){x||(et(h.$$.fragment,_),et(y.$$.fragment,_),x=!0)},o(_){pt(h.$$.fragment,_),pt(y.$$.fragment,_),x=!1},d(_){Zt(h,_),_&&T(f),Zt(y,_)}}}function Q4(u){let h,f;return h=new q4({props:{$$slots:{default:[J4]},$$scope:{ctx:u}}}),{c(){Ut(h.$$.fragment)},l(y){qt(h.$$.fragment,y)},m(y,x){jt(h,y,x),f=!0},p(y,x){const _={};x&2082&&(_.$$scope={dirty:x,ctx:y}),h.$set(_)},i(y){f||(et(h.$$.fragment,y),f=!0)},o(y){pt(h.$$.fragment,y),f=!1},d(y){Zt(h,y)}}}function $4(u){let h,f,y;return f=new O4({props:{padding:{top:15,right:0,bottom:20,left:0},x:u[2],y:u[3],z:u[4],xScale:Hk().paddingInner([.02]).round(!0),xDomain:u[7],yDomain:u[6],zDomain:u[6],data:u[0],$$slots:{default:[Q4]},$$scope:{ctx:u}}}),{c(){h=M("div"),Ut(f.$$.fragment),this.h()},l(x){h=L(x,"DIV",{class:!0});var _=R(h);qt(f.$$.fragment,_),_.forEach(T),this.h()},h(){S(h,"class","chart-container svelte-1i1qsul")},m(x,_){Pe(x,h,_),jt(f,h,null),y=!0},p(x,[_]){const o={};_&4&&(o.x=x[2]),_&8&&(o.y=x[3]),_&16&&(o.z=x[4]),_&128&&(o.xDomain=x[7]),_&64&&(o.yDomain=x[6]),_&64&&(o.zDomain=x[6]),_&1&&(o.data=x[0]),_&2082&&(o.$$scope={dirty:_,ctx:x}),f.$set(o)},i(x){y||(et(f.$$.fragment,x),y=!0)},o(x){pt(f.$$.fragment,x),y=!1},d(x){x&&T(h),Zt(f)}}}function eA(u,h,f){let y,x,_,{data:o}=h,{suffix:z="%"}=h,{decimals:P=null}=h,{fill:F="#00205B"}=h,{xKey:V="x"}=h,{yKey:j="y"}=h,{zKey:U=null}=h,{colors:fe=["#00205B","#00205B","#00205B","#00205B"]}=h;return u.$$set=he=>{"data"in he&&f(0,o=he.data),"suffix"in he&&f(8,z=he.suffix),"decimals"in he&&f(9,P=he.decimals),"fill"in he&&f(1,F=he.fill),"xKey"in he&&f(2,V=he.xKey),"yKey"in he&&f(3,j=he.yKey),"zKey"in he&&f(4,U=he.zKey),"colors"in he&&f(10,fe=he.colors)},u.$$.update=()=>{u.$$.dirty&5&&f(7,y=o.map(he=>he[V])),u.$$.dirty&9&&f(6,x=[0,Math.max(...o.map(he=>he[j]))]),u.$$.dirty&768&&f(5,_=he=>he.toFixed(P)+z)},[o,F,V,j,U,_,x,y,z,P,fe]}class tA extends Wo{constructor(h){super(),Yo(this,h,eA,$4,Jo,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4,colors:10})}}function ak(u,h,f){const y=u.slice();return y[13]=h[f],y[15]=f,y}function rA(u){let h,f,y=u[5](u[13][u[3]])+"",x,_;return{c(){h=M("span"),f=ee("(NI "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(NI "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=o[5](o[13][o[3]])+"")&&ft(x,y)},d(o){o&&T(h)}}}function iA(u){let h;return{c(){h=M("span"),this.h()},l(f){h=L(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(f,y){Pe(f,h,y)},p:ln,d(f){f&&T(h)}}}function nA(u){let h,f,y=i0(Math.round(u[13][u[3]]),"%")+"",x,_;return{c(){h=M("span"),f=ee("(2011 "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(2011 "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=i0(Math.round(o[13][o[3]]),"%")+"")&&ft(x,y)},d(o){o&&T(h)}}}function ok(u){let h,f,y,x,_=u[13][u[1]]+"",o,z,P,F=u[5](u[13][u[2]])+"",V,j,U;function fe(we,Ve){if(we[3]=="prev"&&we[4])return nA;if(we[3]=="prev"&&!we[4])return iA;if(we[3]=="ni")return rA}let he=fe(u),Ie=he&&he(u);return{c(){h=M("tr"),f=M("td"),y=Da("svg"),x=_e(),o=ee(_),z=_e(),P=M("td"),V=ee(F),j=_e(),Ie&&Ie.c(),U=_e(),this.h()},l(we){h=L(we,"TR",{});var Ve=R(h);f=L(Ve,"TD",{class:!0});var Ue=R(f);y=Ma(Ue,"svg",{width:!0,height:!0,class:!0});var Ot=R(y);Ot.forEach(T),x=be(Ue),o=te(Ue,_),Ue.forEach(T),z=be(Ve),P=L(Ve,"TD",{class:!0,style:!0});var Mt=R(P);V=te(Mt,F),j=be(Mt),Ie&&Ie.l(Mt),Mt.forEach(T),U=be(Ve),Ve.forEach(T),this.h()},h(){S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1mqxdxj"),S(f,"class","svelte-1mqxdxj"),S(P,"class","cell-right svelte-1mqxdxj"),ie(P,"vertical-align","top")},m(we,Ve){Pe(we,h,Ve),w(h,f),w(f,y),w(f,x),w(f,o),w(h,z),w(h,P),w(P,V),w(P,j),Ie&&Ie.m(P,null),w(h,U)},p(we,Ve){Ve&3&&_!==(_=we[13][we[1]]+"")&&ft(o,_),Ve&5&&F!==(F=we[5](we[13][we[2]])+"")&&ft(V,F),he===(he=fe(we))&&Ie?Ie.p(we,Ve):(Ie&&Ie.d(1),Ie=he&&he(we),Ie&&(Ie.c(),Ie.m(P,null)))},d(we){we&&T(h),Ie&&Ie.d()}}}function aA(u){let h,f,y=u[0],x=[];for(let _=0;_<y.length;_+=1)x[_]=ok(ak(u,y,_));return{c(){h=M("table"),f=M("tbody");for(let _=0;_<x.length;_+=1)x[_].c();this.h()},l(_){h=L(_,"TABLE",{class:!0});var o=R(h);f=L(o,"TBODY",{});var z=R(f);for(let P=0;P<x.length;P+=1)x[P].l(z);z.forEach(T),o.forEach(T),this.h()},h(){S(h,"class","legend svelte-1mqxdxj")},m(_,o){Pe(_,h,o),w(h,f);for(let z=0;z<x.length;z+=1)x[z].m(f,null)},p(_,[o]){if(o&63){y=_[0];let z;for(z=0;z<y.length;z+=1){const P=ak(_,y,z);x[z]?x[z].p(P,o):(x[z]=ok(P),x[z].c(),x[z].m(f,null))}for(;z<x.length;z+=1)x[z].d(1);x.length=y.length}},i:ln,o:ln,d(_){_&&T(h),Wc(x,_)}}}function oA(u,h,f){let y,{data:x}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:P=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{textColor:V="#555"}=h,{mutedColor:j="#999"}=h,{decimals:U=null}=h,{round:fe=!1}=h;function he(Ie){let we;return U?we=(Ie/y*100).toFixed(U)+"%":Ie/y*100<1?we="<1%":we=(Ie/y*100).toFixed(0)+"%",we}return u.$$set=Ie=>{"data"in Ie&&f(0,x=Ie.data),"xKey"in Ie&&f(1,_=Ie.xKey),"yKey"in Ie&&f(2,o=Ie.yKey),"zKey"in Ie&&f(3,z=Ie.zKey),"topic_prev_available"in Ie&&f(4,P=Ie.topic_prev_available),"colors"in Ie&&f(6,F=Ie.colors),"textColor"in Ie&&f(7,V=Ie.textColor),"mutedColor"in Ie&&f(8,j=Ie.mutedColor),"decimals"in Ie&&f(9,U=Ie.decimals),"round"in Ie&&f(10,fe=Ie.round)},u.$$.update=()=>{u.$$.dirty&5&&(y=x.map(Ie=>Ie[o]).reduce((Ie,we)=>Ie+we,0)),u.$$.dirty&9&&x.map(Ie=>Ie[z]).reduce((Ie,we)=>Ie+we,0)},[x,_,o,z,P,he,F,V,j,U,fe]}class sA extends Wo{constructor(h){super(),Yo(this,h,oA,aA,Jo,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:6,textColor:7,mutedColor:8,decimals:9,round:10})}}function sk(u,h,f){const y=u.slice();return y[6]=h[f],y[8]=f,y}function lk(u){let h,f=u[0],y=[];for(let x=0;x<f.length;x+=1)y[x]=uk(sk(u,f,x));return{c(){h=Da("svg");for(let x=0;x<y.length;x+=1)y[x].c();this.h()},l(x){h=Ma(x,"svg",{class:!0});var _=R(h);for(let o=0;o<y.length;o+=1)y[o].l(_);_.forEach(T),this.h()},h(){S(h,"class","stack svelte-pzvhwz")},m(x,_){Pe(x,h,_);for(let o=0;o<y.length;o+=1)y[o].m(h,null)},p(x,_){if(_&31){f=x[0];let o;for(o=0;o<f.length;o+=1){const z=sk(x,f,o);y[o]?y[o].p(z,_):(y[o]=uk(z),y[o].c(),y[o].m(h,null))}for(;o<y.length;o+=1)y[o].d(1);y.length=f.length}},d(x){x&&T(h),Wc(y,x)}}}function uk(u){let h,f;return{c(){h=Da("rect"),this.h()},l(y){h=Ma(y,"rect",{class:!0,x:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class","cell svelte-pzvhwz"),S(h,"x",f=u[4][u[8]]/u[3]*100+"%"),ie(h,"width",u[6][u[1]]/u[3]*100+"%"),ie(h,"fill",u[2][u[8]])},m(y,x){Pe(y,h,x)},p(y,x){x&24&&f!==(f=y[4][y[8]]/y[3]*100+"%")&&S(h,"x",f),x&11&&ie(h,"width",y[6][y[1]]/y[3]*100+"%"),x&4&&ie(h,"fill",y[2][y[8]])},d(y){y&&T(h)}}}function lA(u){let h,f=u[3]&&u[4]&&lk(u);return{c(){f&&f.c(),h=An()},l(y){f&&f.l(y),h=An()},m(y,x){f&&f.m(y,x),Pe(y,h,x)},p(y,[x]){y[3]&&y[4]?f?f.p(y,x):(f=lk(y),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null)},i:ln,o:ln,d(y){f&&f.d(y),y&&T(h)}}}function uA(u,h,f){let{data:y}=h,{yKey:x="y"}=h,{colors:_=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,o,z;function P(){f(3,o=y.map(V=>V[x]).reduce((V,j)=>V+j,0));let F=[0];y.forEach(V=>F.push(F[F.length-1]+V[x])),f(4,z=F)}return u.$$set=F=>{"data"in F&&f(0,y=F.data),"yKey"in F&&f(1,x=F.yKey),"colors"in F&&f(2,_=F.colors)},u.$$.update=()=>{u.$$.dirty&3&&(y||x)&&P()},[y,x,_,o,z]}class Hx extends Wo{constructor(h){super(),Yo(this,h,uA,lA,Jo,{data:0,yKey:1,colors:2})}}function ck(u,h,f){const y=u.slice();return y[10]=h[f],y[12]=f,y}function cA(u){let h,f,y=u[6](u[10][u[3]])+"",x,_;return{c(){h=M("span"),f=ee("(NI "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(NI "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=o[6](o[10][o[3]])+"")&&ft(x,y)},d(o){o&&T(h)}}}function hA(u){let h;return{c(){h=M("span"),this.h()},l(f){h=L(f,"SPAN",{class:!0,style:!0}),R(h).forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(f,y){Pe(f,h,y)},p:ln,d(f){f&&T(h)}}}function pA(u){let h,f,y=i0(Math.round(u[10][u[3]]),"%")+"",x,_;return{c(){h=M("span"),f=ee("(2011 "),x=ee(y),_=ee(")"),this.h()},l(o){h=L(o,"SPAN",{class:!0,style:!0});var z=R(h);f=te(z,"(2011 "),x=te(z,y),_=te(z,")"),z.forEach(T),this.h()},h(){S(h,"class",""),ie(h,"color","#1460aa")},m(o,z){Pe(o,h,z),w(h,f),w(h,x),w(h,_)},p(o,z){z&9&&y!==(y=i0(Math.round(o[10][o[3]]),"%")+"")&&ft(x,y)},d(o){o&&T(h)}}}function hk(u){let h,f,y,x,_,o=u[10][u[1]]+"",z,P,F,V=u[6](u[10][u[2]])+"",j,U,fe;function he(Ve,Ue){if(Ve[3]=="prev"&&Ve[4])return pA;if(Ve[3]=="prev"&&!Ve[4])return hA;if(Ve[3]=="ni")return cA}let Ie=he(u),we=Ie&&Ie(u);return{c(){h=M("tr"),f=M("td"),y=Da("svg"),x=Da("rect"),_=_e(),z=ee(o),P=_e(),F=M("td"),j=ee(V),U=_e(),we&&we.c(),fe=_e(),this.h()},l(Ve){h=L(Ve,"TR",{});var Ue=R(h);f=L(Ue,"TD",{class:!0});var Ot=R(f);y=Ma(Ot,"svg",{width:!0,height:!0,class:!0});var Mt=R(y);x=Ma(Mt,"rect",{width:!0,height:!0,style:!0}),R(x).forEach(T),Mt.forEach(T),_=be(Ot),z=te(Ot,o),Ot.forEach(T),P=be(Ue),F=L(Ue,"TD",{class:!0,style:!0});var mt=R(F);j=te(mt,V),U=be(mt),we&&we.l(mt),mt.forEach(T),fe=be(Ue),Ue.forEach(T),this.h()},h(){S(x,"width","20"),S(x,"height","30"),ie(x,"fill",u[5][u[12]]),S(y,"width","20"),S(y,"height","30"),S(y,"class","bullet svelte-1gvovsq"),S(f,"class","svelte-1gvovsq"),S(F,"class","cell-right svelte-1gvovsq"),ie(F,"vertical-align","top")},m(Ve,Ue){Pe(Ve,h,Ue),w(h,f),w(f,y),w(y,x),w(f,_),w(f,z),w(h,P),w(h,F),w(F,j),w(F,U),we&&we.m(F,null),w(h,fe)},p(Ve,Ue){Ue&32&&ie(x,"fill",Ve[5][Ve[12]]),Ue&3&&o!==(o=Ve[10][Ve[1]]+"")&&ft(z,o),Ue&5&&V!==(V=Ve[6](Ve[10][Ve[2]])+"")&&ft(j,V),Ie===(Ie=he(Ve))&&we?we.p(Ve,Ue):(we&&we.d(1),we=Ie&&Ie(Ve),we&&(we.c(),we.m(F,null)))},d(Ve){Ve&&T(h),we&&we.d()}}}function fA(u){let h,f,y=u[0],x=[];for(let _=0;_<y.length;_+=1)x[_]=hk(ck(u,y,_));return{c(){h=M("table"),f=M("tbody");for(let _=0;_<x.length;_+=1)x[_].c();this.h()},l(_){h=L(_,"TABLE",{class:!0});var o=R(h);f=L(o,"TBODY",{});var z=R(f);for(let P=0;P<x.length;P+=1)x[P].l(z);z.forEach(T),o.forEach(T),this.h()},h(){S(h,"class","legend svelte-1gvovsq")},m(_,o){Pe(_,h,o),w(h,f);for(let z=0;z<x.length;z+=1)x[z].m(f,null)},p(_,[o]){if(o&127){y=_[0];let z;for(z=0;z<y.length;z+=1){const P=ck(_,y,z);x[z]?x[z].p(P,o):(x[z]=hk(P),x[z].c(),x[z].m(f,null))}for(;z<x.length;z+=1)x[z].d(1);x.length=y.length}},i:ln,o:ln,d(_){_&&T(h),Wc(x,_)}}}function dA(u,h,f){let y,{data:x}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:P=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","lightgrey"]}=h,{decimals:V=null}=h;function j(U){let fe;return V?fe=(U/y*100).toFixed(V)+"%":U/y*100<1?fe="<1%":fe=(U/y*100).toFixed(0)+"%",fe}return u.$$set=U=>{"data"in U&&f(0,x=U.data),"xKey"in U&&f(1,_=U.xKey),"yKey"in U&&f(2,o=U.yKey),"zKey"in U&&f(3,z=U.zKey),"topic_prev_available"in U&&f(4,P=U.topic_prev_available),"colors"in U&&f(5,F=U.colors),"decimals"in U&&f(7,V=U.decimals)},u.$$.update=()=>{u.$$.dirty&5&&(y=x.map(U=>U[o]).reduce((U,fe)=>U+fe,0)),u.$$.dirty&9&&x.map(U=>U[z]).reduce((U,fe)=>U+fe,0)},[x,_,o,z,P,F,j,V]}class mA extends Wo{constructor(h){super(),Yo(this,h,dA,fA,Jo,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function pk(u){let h,f,y,x;f=new Hx({props:{data:u[0],yKey:u[4],colors:u[6]}});let _=u[8]&&fk(u);return{c(){h=M("div"),Ut(f.$$.fragment),y=_e(),_&&_.c(),this.h()},l(o){h=L(o,"DIV",{class:!0,style:!0});var z=R(h);qt(f.$$.fragment,z),y=be(z),_&&_.l(z),z.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ie(h,"height",u[1]*.28+"px")},m(o,z){Pe(o,h,z),jt(f,h,null),w(h,y),_&&_.m(h,null),x=!0},p(o,z){const P={};z&1&&(P.data=o[0]),z&16&&(P.yKey=o[4]),z&64&&(P.colors=o[6]),f.$set(P),o[8]?_?_.p(o,z):(_=fk(o),_.c(),_.m(h,null)):_&&(_.d(1),_=null),(!x||z&2)&&ie(h,"height",o[1]*.28+"px")},i(o){x||(et(f.$$.fragment,o),x=!0)},o(o){pt(f.$$.fragment,o),x=!1},d(o){o&&T(h),Zt(f),_&&_.d()}}}function fk(u){let h,f;return{c(){h=M("div"),f=ee(u[8]),this.h()},l(y){h=L(y,"DIV",{class:!0});var x=R(h);f=te(x,u[8]),x.forEach(T),this.h()},h(){S(h,"class","label svelte-1tebgpk")},m(y,x){Pe(y,h,x),w(h,f)},p(y,x){x&256&&ft(f,y[8])},d(y){y&&T(h)}}}function dk(u){let h,f,y,x,_,o;return f=new Hx({props:{data:u[0],yKey:u[4],colors:u[6]}}),{c(){h=M("div"),Ut(f.$$.fragment),y=_e(),x=M("div"),_=ee("2011 comparison not available"),this.h()},l(z){h=L(z,"DIV",{class:!0,style:!0});var P=R(h);qt(f.$$.fragment,P),y=be(P),x=L(P,"DIV",{class:!0,style:!0});var F=R(x);_=te(F,"2011 comparison not available"),F.forEach(T),P.forEach(T),this.h()},h(){S(x,"class","label svelte-1tebgpk"),ie(x,"background-color","#d8d8d8 "),ie(x,"color","#000000"),S(h,"class","chart svelte-1tebgpk"),ie(h,"height",u[1]*.28+"px")},m(z,P){Pe(z,h,P),jt(f,h,null),w(h,y),w(h,x),w(x,_),o=!0},p(z,P){const F={};P&1&&(F.data=z[0]),P&16&&(F.yKey=z[4]),P&64&&(F.colors=z[6]),f.$set(F),(!o||P&2)&&ie(h,"height",z[1]*.28+"px")},i(z){o||(et(f.$$.fragment,z),o=!0)},o(z){pt(f.$$.fragment,z),o=!1},d(z){z&&T(h),Zt(f)}}}function yA(u){let h,f,y,x,_,o,z,P;f=new Hx({props:{data:u[0],yKey:u[3],colors:u[6]}});let F=(u[4]&&u[5]||u[4]=="ni")&&pk(u),V=u[4]=="prev"&&!u[5]&&dk(u);return z=new mA({props:{data:u[0],xKey:u[2],yKey:u[3],zKey:u[4],topic_prev_available:u[5],decimals:u[7],colors:u[6]}}),{c(){h=M("div"),Ut(f.$$.fragment),y=_e(),F&&F.c(),x=_e(),V&&V.c(),_=_e(),o=M("div"),Ut(z.$$.fragment),this.h()},l(j){h=L(j,"DIV",{class:!0,style:!0});var U=R(h);qt(f.$$.fragment,U),U.forEach(T),y=be(j),F&&F.l(j),x=be(j),V&&V.l(j),_=be(j),o=L(j,"DIV",{class:!0});var fe=R(o);qt(z.$$.fragment,fe),fe.forEach(T),this.h()},h(){S(h,"class","chart svelte-1tebgpk"),ie(h,"padding-top","3px"),ie(h,"height",(u[4]?u[1]*.72:u[1])+"px"),S(o,"class","legend svelte-1tebgpk")},m(j,U){Pe(j,h,U),jt(f,h,null),Pe(j,y,U),F&&F.m(j,U),Pe(j,x,U),V&&V.m(j,U),Pe(j,_,U),Pe(j,o,U),jt(z,o,null),P=!0},p(j,[U]){const fe={};U&1&&(fe.data=j[0]),U&8&&(fe.yKey=j[3]),U&64&&(fe.colors=j[6]),f.$set(fe),(!P||U&18)&&ie(h,"height",(j[4]?j[1]*.72:j[1])+"px"),j[4]&&j[5]||j[4]=="ni"?F?(F.p(j,U),U&48&&et(F,1)):(F=pk(j),F.c(),et(F,1),F.m(x.parentNode,x)):F&&(Yu(),pt(F,1,1,()=>{F=null}),Ju()),j[4]=="prev"&&!j[5]?V?(V.p(j,U),U&48&&et(V,1)):(V=dk(j),V.c(),et(V,1),V.m(_.parentNode,_)):V&&(Yu(),pt(V,1,1,()=>{V=null}),Ju());const he={};U&1&&(he.data=j[0]),U&4&&(he.xKey=j[2]),U&8&&(he.yKey=j[3]),U&16&&(he.zKey=j[4]),U&32&&(he.topic_prev_available=j[5]),U&128&&(he.decimals=j[7]),U&64&&(he.colors=j[6]),z.$set(he)},i(j){P||(et(f.$$.fragment,j),et(F),et(V),et(z.$$.fragment,j),P=!0)},o(j){pt(f.$$.fragment,j),pt(F),pt(V),pt(z.$$.fragment,j),P=!1},d(j){j&&T(h),Zt(f),j&&T(y),F&&F.d(j),j&&T(x),V&&V.d(j),j&&T(_),j&&T(o),Zt(z)}}}function vA(u,h,f){let{data:y}=h,{height:x=80}=h,{xKey:_="x"}=h,{yKey:o="y"}=h,{zKey:z="ni"}=h,{topic_prev_available:P=!0}=h,{colors:F=["#00205B","#6C63AC","#781C87","#C11B71","#FB7979","#801650","#fbb15f","#F66068","#00695c"]}=h,{decimals:V=null}=h,{label:j=null}=h;return u.$$set=U=>{"data"in U&&f(0,y=U.data),"height"in U&&f(1,x=U.height),"xKey"in U&&f(2,_=U.xKey),"yKey"in U&&f(3,o=U.yKey),"zKey"in U&&f(4,z=U.zKey),"topic_prev_available"in U&&f(5,P=U.topic_prev_available),"colors"in U&&f(6,F=U.colors),"decimals"in U&&f(7,V=U.decimals),"label"in U&&f(8,j=U.label)},[y,x,_,o,z,P,F,V,j]}class qr extends Wo{constructor(h){super(),Yo(this,h,vA,yA,Jo,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function gA(u){let h,f,y,x;return{c(){h=M("div"),f=ee("Back to top"),this.h()},l(_){h=L(_,"DIV",{class:!0});var o=R(h);f=te(o,"Back to top"),o.forEach(T),this.h()},h(){S(h,"class","back_to_start svelte-11zibd5"),wi(h,"hidden",u[0])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Ri(window,"scroll",u[2]),Ri(h,"click",u[1])],y=!0)},p(_,[o]){o&1&&wi(h,"hidden",_[0])},i:ln,o:ln,d(_){_&&T(h),y=!1,Xc(x)}}}function _A(u,h,f){let{buttonVisibleOnPX:y=200}=h,x=!0;const _=()=>{document.body.scrollIntoView()},o=()=>document.documentElement||document.body,z=()=>{o().scrollTop>y?f(0,x=!1):f(0,x=!0)};return u.$$set=P=>{"buttonVisibleOnPX"in P&&f(3,y=P.buttonVisibleOnPX)},[x,_,z,y]}class bA extends Wo{constructor(h){super(),Yo(this,h,_A,gA,Jo,{buttonVisibleOnPX:3})}}function mk(u,h,f){const y=u.slice();return y[53]=h[f],y[55]=f,y}function yk(u,h,f){const y=u.slice();return y[56]=h[f],y[55]=f,y}function vk(u,h,f){const y=u.slice();return y[58]=h[f],y}function gk(u,h,f){const y=u.slice();return y[56]=h[f],y[55]=f,y}function _k(u){let h,f,y,x,_,o,z=" &gt; ",P,F,V,j,U,fe=u[1].name+"",he,Ie,we,Ve,Ue,Ot,Mt,mt,Qe,kr,xr,ar,It,At,Tr,Vt,Ir,rt,lr,ri,ci,Er,vt,nt,fr,On,sa,Ti,vn,oi,Sa,gr,Vn,Qa,Vr,Lt,Wi,Bi,hi,ho=" &#x24D8; ",Jt,Ei,Mr,di,mi,Ar,yi,un,Kr,hr=u[1].data.population.value[2021].all.toLocaleString()+"",Fr,Yn,Fn,La,Qo,pi,cn,gn,po,la,ml=" &#x24D8; ",$o,Nn,_n,ua,Jn,ca,Nr,N,G,X=u[1].data.households.value[2021].all_households.toLocaleString()+"",re,ue,ve,xe,H,oe,Se,Ne,Ge,Le,qe,ht,at,Re,tt,We,$e,Nt,Ze,Gt,or,Ct,tr,er,Ai,rr,dr,pr,Kt=u[1].name+"",ir,Oi,ha,vi,Yi,bn,Ji,mr,Un,Vi,Hr,Qn=" &#x24D8; ",zr,xn,hn,Qu,Fi,fo,pn,Xr,zi,fi,mo,es,yd=" &#x24D8; ",yl,vl,ts,ip,au,rs,yo=(u[1].hectares>=.1?u[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"",ou,gl,Yc,wn,Si,qn,ke,Ni,zn=" &#x24D8; ",Wr,pa,Pn,Pi,su,lu,np=(u[1].data.population.value[2021].all/u[1].hectares>=.1?(u[1].data.population.value[2021].all/u[1].hectares).toFixed(1):"<0.1")+"",sf,ap,lf,op,Rs,uu,vo,Jc,$u,ec,_l,si,sp,go=u[1].name+"",is,bl,_o,Bs,xl,Cn,Qi,$a,Os,Lr,tc,uf=" &#x24D8; ",cf,cu,hu,hf,eo,bo,wl,pf,El,Vs,Sl,lp,ns,Ra,ff,xo,Sr,Qc,vd,to,df,Fs,ro,wo,pu,as,mf=" &#x24D8; ",rc,Eo,fu,du,$n,$c,yf,vf,Ba,eh,th,Ns,Us,os,kl,up,gf,Il,Oa,cp,ic=u[1].name+"",rh,nc,ac,Tl,ii,fa,da,Dn,Qt,jr,Mn,hp=" &#x24D8; ",mu,ss,oc,gd,ls,Al,us,Ui,So,_f,Zr,it,$i,ih,ko,cs=" &#x24D8; ",ma,zl,Je,pp,qs,sc,Va,ya,hs,nh,qi,En,ps,lc,Pl,_d=" &#x24D8; ",io,Ln,Wt,Io,jn,en,Cl,js,Zn,ea,uc,yt,dt,Fa,fn,no,Sn,ta,ao,ah,_r=u[1].name+"",tn,bf,To,fp,fs,gi,ka,dn,Ao,yu,ds,bd=" &#x24D8; ",vu,oo,Dl,Zs,Na,gu,Gs,Ua,Ks,cc,zo,Ia,n,s,a,c=" &#x24D8; ",m,E,k,A,B,Z,Y,Q,$,ce,ae,de,ne,me,ge,Te=" &#x24D8; ",Be,Ce,Oe,je,He,Xe,ut,St,xt,kt,ur,ot,zt,Rt,Pt,Dt,Ht,Tt,Et,rn,li=u[1].name+"",kn,mn,Yr,ki,va,ui,ra,_i,Rn,qa,ms,oh=" &#x24D8; ",Hs,Po,ys,Co,vs,ja,nn,gs,Ta,Ml,nr,Ci,ji,Ll,hc,xf=" &#x24D8; ",xd,_s,_u,bu,Xs,dp,pc,ga,sh,py,xu,Ws,fc,eg,dc,d0=" &#x24D8; ",wf,lh,Do,mp,yp,wd,tg,rg,uh,c_,ig,wu,vp,Za,Ef,Zi,Sf,mc,Mo,kf,yc=u[1].name+"",Ed,fy,Eu,Sd,kd,so,Lo,Ys,Js,ng,vc,ag=" &#x24D8; ",bs,og,gp,_p,sg,ch,Su,lg,ug,gc,dy,ku,Qs,lo,cg,_c,Id=" &#x24D8; ",xs,bp,xp,hg,Rl,If,pg,fg,hh,dg,Bl,bi,Ol,my,ph,m0=" &#x24D8; ",yy,mg,wp,Ep,vy,Sp,Td,kp,gy,bc,Tf,br,ws,_a,fh,dh,y0=" &#x24D8; ",yg,Ip,Tp,vg,Ap,Ad,gg,_g,Vl,zp,_y,mh,Pp,Fl,Cp,Af,Dp,$s,an,yh,In=u[1].name+"",Mp,zf,Gn,by,xy,ia,Nl,Ro,Ul,bg,vh,Pf=" &#x24D8; ",zd,gh,_h,xg,bh,Cf,wy,Ey,xh,wg,ql,Es,el,Sy,Iu,ky=" &#x24D8; ",Df,tl,Lp,Eg,Rp,Tu,Pd,Iy,Au,Ty,jl,rl,xc,Sg,zu,kg=" &#x24D8; ",Ig,il,Zl,Pr,Bp,Op,wh,Tg,Eh,Ag,nl,al,wc,zg,Sh,h_=" &#x24D8; ",Ay,kh,Pu,Ec,Sc,Cu,zy,Gi,Cr,Py,Cy,Dy,Gl,Ss,Kl,kc,ks,p_=" &#x24D8; ",Ki,Hl,uo,Mf,Du,Vp,Ih,Xl,Ic,My,ol,Jr,Ga,Ly,e,t=" &#x24D8; ",i,l,p,d,v,I,C,D,O,q,K,W,se,le,ye,pe,Ee,Ae,De,Me,Fe,Ke,Ye=u[1].name+"",gt,st,_t,lt,Yt,wt,ct,Ft,Bt,sr,bt,wr=" &#x24D8; ",ni,Qr,Gr,ai,$r,Di,on,Kn,xi,Hn,Ur,ei,Xt,Rr,yr,vr=" &#x24D8; ",na,Hi,Dr,Mi,Xi,cr,sl,Ka,Aa,Ii,Bo,Is,Th,Oo,ll,aa,Wl,Lf,Ah,ul,Vo,Rf,Ts=u[1].name+"",zh,Ph,As,Ch,Bf,Ha,Fo,Xa,zs,Fp,Yl,Cd=" &#x24D8; ",Of,cl,Mu,Dh,Jl,Ql,Np,Mh,Lu,Ry,Up,By,qp,f_,jp,ti,za,$l,Ps,Dd,Oy,eu,Xn,Vf,Tc=u[1].name+"",Zp,Ff,Lh,Vy,Gp,No,tu,Cs,Ru,Fy,Wn,Ny=" &#x24D8; ",Uy,Wa,Kp,qy,Ds,Bu,Rh,Bh,Ms,jy,Nf,Zy,Uf,Gy,Md,Ya,Oh,Ls,Vh,Ky,Ld,Ac,hl,Rd,qf=u[1].name+"",Fh,Hy,zc,Pg,Xy,Pa,Ou,pl,Pc,Cg,Hp,v0=" &#x24D8; ",Dg,Ja,Li,Wy,Xp,Yy,g0,_0,b0,x0,w0,E0,S0,k0,I0,T0,A0,z0,P0,C0,Bd,Mg,D0,M0,jf,L0,Nh,Vu,Wp,R0,Od,nI=" &#x24D8; ",B0,Vd,Fd,O0,Nd,Lg,V0,F0,Zf,N0,Uh,Fu,Yp,U0,Ud,aI=" &#x24D8; ",q0,qd,jd,j0,Zd,Rg,Z0,G0,Gf,K0,qh,Nu,Jp,H0,Gd,oI=" &#x24D8; ",X0,Kd,Hd,W0,Xd,Bg,Y0,J0,Kf,Q0,jh,Uu,Qp,$0,Wd,sI=" &#x24D8; ",e1,Yd,Jd,t1,Qd,Og,r1,i1,Hf,Xx,n1,Xf,$d,Cc,Jy,a1,o1,Wf,Dc,s1,Vg=u[1].name+"",d_,l1,Qy,u1,c1,co,Zh,qu,$p,h1,em,lI=" &#x24D8; ",p1,tm,rm,f1,im,Fg,d1,m1,Yf,y1,Gh,ju,ef,v1,nm,uI=" &#x24D8; ",g1,am,om,_1,sm,Ng,b1,x1,Jf,w1,Ug,E1,Kh,Zu,tf,S1,lm,cI=" &#x24D8; ",k1,um,cm,I1,hm,qg,T1,A1,Qf,z1,Hh,Gu,rf,P1,pm,hI=" &#x24D8; ",C1,fm,dm,D1,mm,jg,M1,L1,$f,Wx,R1,ed,ym,Mc,$y,B1,O1,td,Lc,V1,Zg=u[1].name+"",m_,F1,ev,N1,U1,ru,Xh,Ku,nf,q1,vm,pI=" &#x24D8; ",j1,gm,_m,Z1,bm,Gg,G1,K1,rd,H1,Wh,Hu,af,X1,xm,fI=" &#x24D8; ",W1,wm,Em,Y1,Sm,Kg,J1,Q1,id,$1,Hg,Yx,Tn;function Jx(J,ze){return J[1].parents[0]?wA:xA}let y_=Jx(u),Rc=y_(u);function Qx(J,ze){return J[1].type=="ni"?SA:EA}let v_=Qx(u),Bc=v_(u),Uo=u[1].type!="ni"&&xk(u);function $x(J,ze){return J[6]?IA:kA}let g_=$x(u),Oc=g_(u);It=new uT({props:{search_data:u[0],group:"typestr",search:!0}}),It.$on("select",u[16]);function e2(J,ze){return J[1].type=="ni"||J[1].type=="ctry"?AA:TA}let __=e2(u),Vc=__(u),qo=u[6]&&wk(u),ba=u[1].type!="ni"&&Ek(u),xa=u[6]&&u[4]&&Ik(u),wa=u[1].type!="ni"&u[11]&&Tk(u),Ea=u[6]&&u[4]&&Ak(u);function t2(J,ze){return J[1].type!="ni"?GA:ZA}let b_=t2(u),Fc=b_(u);function dI(J){u[32](J)}let r2={location:{bounds:u[1].bounds},options:{fitBoundsOptions:{padding:20}},style:h3,$$slots:{default:[HA]},$$scope:{ctx:u}};u[8]!==void 0&&(r2.map=u[8]),qe=new fT({props:r2}),of.push(()=>l3(qe,"map",dI));function i2(J,ze){return J[1].parents[0]?WA:XA}let x_=i2(u),Nc=x_(u);function n2(J,ze){return J[1].children[0]?JA:YA}let w_=n2(u),Uc=w_(u);function a2(J,ze){return J[1].type!="ni"&J[1].type!="lgd"?ez:J[1].type!="ni"&J[1].type=="lgd"?$A:QA}let E_=a2(u),qc=E_(u),jo=u[1].type!="ni"&&u[11]&&Dk(u);Vs=new tA({props:{data:u[1]&&u[14](["age"]),zKey:u[12]}});let Zo=(u[11]&&u[13]||u[4]&&u[13]&&u[6])&&Mk(u);return Ra=new sA({props:{data:u[1]&&u[14](["age"]),zKey:u[12]}}),to=new qr({props:{data:u[1]&&u[14](["sex"]),zKey:u[12],label:u[13]}}),Ba=new qr({props:{data:u[1]&&u[14](["hh_size"]),zKey:u[12],label:u[13]}}),So=new qr({props:{data:u[1]&&u[14](["cob"]),zKey:u[12],label:u[13]}}),hs=new qr({props:{data:u[1]&&u[14](["passport"]),zKey:u[12],label:u[13]}}),Zn=new qr({props:{data:u[1]&&u[14](["natid"]),zKey:u[12],label:u[13]}}),Ks=new qr({props:{data:u[1]&&u[14](["mainlang"]),zKey:u[12],label:u[13]}}),$=new qr({props:{data:u[1]&&u[14](["irish"]),zKey:u[12],label:u[13]}}),xt=new qr({props:{data:u[1]&&u[14](["ulster"]),zKey:u[12],label:u[13]}}),Ta=new qr({props:{data:u[1]&&u[14](["religion"]),zKey:u[12],label:u[13]}}),sh=new qr({props:{data:u[1]&&u[14](["religion_or_religion_brought_up_in"]),zKey:u[12],label:u[13]}}),uh=new qr({props:{data:u[1]&&u[14](["ethnic"]),zKey:u[12],label:u[13]}}),gc=new qr({props:{data:u[1]&&u[14](["general_health"]),zKey:u[12],label:u[13]}}),hh=new qr({props:{data:u[1]&&u[14](["long_term_disability"]),zKey:u[12],label:u[13]}}),bc=new qr({props:{data:u[1]&&u[14](["number_of_long_term_health"]),zKey:u[12],label:u[13]}}),Vl=new qr({props:{data:u[1]&&u[14](["provision_care"]),zKey:u[12],label:u[13]}}),xh=new qr({props:{data:u[1]&&u[14](["accommodation_type"]),zKey:u[12],label:u[13]}}),Au=new qr({props:{data:u[1]&&u[14](["number_of_adaptations"]),zKey:u[12],label:u[13]}}),Eh=new qr({props:{data:u[1]&&u[14](["central_heating"]),zKey:u[12],label:u[13]}}),Cr=new qr({props:{data:u[1]&&u[14](["renewable_energy"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Ic=new qr({props:{data:u[1]&&u[14](["hh_tenure"]),zKey:u[12],label:u[13]}}),O=new qr({props:{data:u[1]&&u[14](["car_or_van"]),zKey:u[12],label:u[13]}}),xi=new qr({props:{data:u[1]&&u[14](["number_of_dependent_children_households"]),zKey:u[12],label:u[13]}}),Aa=new qr({props:{data:u[1]&&u[14](["household_composition_households"]),zKey:u[12],label:u[13]}}),Lu=new qr({props:{data:u[1]&&u[14](["marital_and_civil_partnership_status"]),zKey:u[12],label:u[13]}}),Ms=new qr({props:{data:u[1]&&u[14](["sexual_orientation_by_broad_age_band"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),jf=new qr({props:{data:u[1]&&u[14](["highest_level_of_qualifications"]),zKey:u[12],label:u[13]}}),Zf=new qr({props:{data:u[1]&&u[14](["economic_activity"]),zKey:u[12],label:u[13]}}),Gf=new qr({props:{data:u[1]&&u[14](["hours_worked"]),zKey:u[12],label:u[13]}}),Kf=new qr({props:{data:u[1]&&u[14](["industry_of_employment"]),zKey:u[12],label:u[13]}}),Hf=new qr({props:{data:u[1]&&u[14](["occupation_1_digit"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Yf=new qr({props:{data:u[1]&&u[14](["method_of_travel_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Jf=new qr({props:{data:u[1]&&u[14](["method_of_travel_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),Qf=new qr({props:{data:u[1]&&u[14](["distance_travelled_to_work"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),$f=new qr({props:{data:u[1]&&u[14](["distance_travelled_to_study"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),rd=new qr({props:{data:u[1]&&u[14](["address_one_year_ago"]),zKey:u[12],label:u[13]}}),id=new qr({props:{data:u[1]&&u[14](["year_of_arrival"]),zKey:u[12],label:u[13],topic_prev_available:!1}}),{c(){h=M("div"),f=M("div"),y=M("span"),x=M("a"),_=ee("Home"),o=new Bx(!1),P=_e(),Rc.c(),F=_e(),V=M("br"),j=_e(),U=M("span"),he=ee(fe),Ie=_e(),we=M("div"),Ve=ee(`Click for: \r
		\r
					`),Bc.c(),Ue=_e(),Uo&&Uo.c(),Ot=_e(),Oc.c(),Mt=_e(),mt=M("div"),Qe=M("div"),kr=M("b"),xr=ee("Search for your area:"),ar=_e(),Ut(It.$$.fragment),At=_e(),Tr=M("script"),Vt=ee(`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Ir=_e(),rt=M("div"),lr=M("button"),ri=ee("Print / PDF"),ci=_e(),Er=M("button"),vt=ee("Menu"),nt=_e(),fr=M("button"),On=ee("Share"),sa=_e(),Ti=M("div"),vn=M("div"),oi=M("h3"),Sa=ee("Overview"),gr=_e(),Vc.c(),Vn=_e(),qo&&qo.c(),Qa=_e(),Vr=M("div"),Lt=M("div"),Wi=M("div"),Bi=ee("Population "),hi=M("span"),Jt=_e(),Ei=M("div"),Mr=M("div"),di=ee(`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),mi=M("a"),Ar=M("strong"),yi=ee("Statistical bulletins"),un=_e(),Kr=M("span"),Fr=ee(hr),Yn=M("br"),Fn=_e(),ba&&ba.c(),La=_e(),xa&&xa.c(),Qo=_e(),pi=M("div"),cn=M("div"),gn=M("div"),po=ee("Households"),la=M("span"),$o=_e(),Nn=M("div"),_n=M("div"),ua=ee(`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),Jn=M("a"),ca=M("strong"),Nr=ee("Statistical bulletins"),N=_e(),G=M("span"),re=ee(X),ue=M("br"),ve=_e(),wa&&wa.c(),xe=_e(),Ea&&Ea.c(),H=_e(),oe=M("div"),Se=M("div"),Ne=M("h3"),Fc.c(),Ge=_e(),Le=M("div"),Ut(qe.$$.fragment),at=_e(),Re=M("div"),Nc.c(),tt=_e(),We=M("div"),Uc.c(),Nt=_e(),Ze=M("div"),Gt=M("div"),or=M("h2"),Ct=M("button"),tr=M("span"),er=ee("Area Information"),Ai=_e(),rr=M("div"),dr=M("div"),pr=ee("Census 2021 - "),ir=ee(Kt),Oi=ee(" - "),ha=M("span"),vi=ee("Location, Area and Population density"),Yi=_e(),bn=M("div"),Ji=M("div"),mr=M("div"),Un=M("div"),Vi=ee("Location"),Hr=M("span"),zr=_e(),xn=M("div"),hn=M("div"),Qu=ee("Information about the area including its geographical hierarchy."),Fi=_e(),fo=M("br"),qc.c(),pn=_e(),Xr=M("div"),zi=M("div"),fi=M("div"),mo=ee("Area "),es=M("span"),yl=_e(),vl=M("div"),ts=M("div"),ip=ee("Area is measured in hectares (ha), it is rounded to the nearest whole number."),au=_e(),rs=M("span"),ou=ee(yo),gl=ee(" ha"),Yc=_e(),wn=M("div"),Si=M("div"),qn=M("div"),ke=ee("Population density"),Ni=M("span"),Wr=_e(),pa=M("div"),Pn=M("div"),Pi=ee("Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),su=_e(),lu=M("span"),sf=ee(np),ap=_e(),jo&&jo.c(),op=_e(),Rs=M("div"),uu=M("h2"),vo=M("button"),Jc=M("span"),$u=ee("Demography"),ec=_e(),_l=M("div"),si=M("div"),sp=ee("Census 2021 - "),is=ee(go),bl=ee(" - "),_o=M("span"),Bs=ee("Broad age bands (years), Sex, Household size"),xl=_e(),Cn=M("div"),Qi=M("div"),$a=M("div"),Os=M("div"),Lr=ee("Broad age bands (years) "),tc=M("span"),cf=_e(),cu=M("div"),hu=M("div"),hf=ee(`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),eo=M("a"),bo=M("strong"),wl=ee("Statistical bulletins"),pf=_e(),El=M("div"),Ut(Vs.$$.fragment),Sl=_e(),Zo&&Zo.c(),lp=_e(),ns=M("div"),Ut(Ra.$$.fragment),ff=_e(),xo=M("div"),Sr=M("div"),Qc=ee("Sex"),vd=_e(),Ut(to.$$.fragment),df=_e(),Fs=M("div"),ro=M("div"),wo=M("div"),pu=ee("Household size"),as=M("span"),rc=_e(),Eo=M("div"),fu=M("div"),du=ee("The number of usual residents in the household.      "),$n=M("a"),$c=M("strong"),yf=ee("Statistical bulletins"),vf=_e(),Ut(Ba.$$.fragment),th=_e(),Ns=M("div"),Us=M("h2"),os=M("button"),kl=M("span"),up=ee("Country of Birth & Nationality"),gf=_e(),Il=M("div"),Oa=M("div"),cp=ee("Census 2021 - "),rh=ee(ic),nc=ee(" - "),ac=M("span"),Tl=ee("Country of birth, Passport(s) held, National identity (person based)"),ii=_e(),fa=M("div"),da=M("div"),Dn=M("div"),Qt=M("div"),jr=ee("Country of birth"),Mn=M("span"),mu=_e(),ss=M("div"),oc=M("div"),gd=ee("The country in which a person was born. "),ls=M("a"),Al=M("strong"),us=ee("Statistical bulletins"),Ui=_e(),Ut(So.$$.fragment),_f=_e(),Zr=M("div"),it=M("div"),$i=M("div"),ih=ee("Passport(s) held"),ko=M("span"),ma=_e(),zl=M("div"),Je=M("div"),pp=ee("Passport or passports that an individual holds. "),qs=M("a"),sc=M("strong"),Va=ee("Statistical bulletins"),ya=_e(),Ut(hs.$$.fragment),nh=_e(),qi=M("div"),En=M("div"),ps=M("div"),lc=ee("National identity (person based)"),Pl=M("span"),io=_e(),Ln=M("div"),Wt=M("div"),Io=ee(`The nationality or nationalities that the person\r
									identifies with. `),jn=M("a"),en=M("strong"),Cl=ee("Statistical bulletins"),js=_e(),Ut(Zn.$$.fragment),uc=_e(),yt=M("div"),dt=M("h2"),Fa=M("button"),fn=M("span"),no=ee("Language"),Sn=_e(),ta=M("div"),ao=M("div"),ah=ee("Census 2021 - "),tn=ee(_r),bf=ee(" - "),To=M("span"),fp=ee("Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),fs=_e(),gi=M("div"),ka=M("div"),dn=M("div"),Ao=M("div"),yu=ee("Main language"),ds=M("span"),vu=_e(),oo=M("div"),Dl=M("div"),Zs=ee(`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Na=M("a"),gu=M("strong"),Gs=ee("Statistical bulletins"),Ua=_e(),Ut(Ks.$$.fragment),cc=_e(),zo=M("div"),Ia=M("div"),n=M("div"),s=ee("Knowledge of Irish"),a=M("span"),m=_e(),E=M("div"),k=M("div"),A=ee(`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),B=M("a"),Z=M("strong"),Y=ee("Statistical bulletins"),Q=_e(),Ut($.$$.fragment),ce=_e(),ae=M("div"),de=M("div"),ne=M("div"),me=ee("Knowledge of Ulster-Scots"),ge=M("span"),Be=_e(),Ce=M("div"),Oe=M("div"),je=ee(`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),He=M("a"),Xe=M("strong"),ut=ee("Statistical bulletins"),St=_e(),Ut(xt.$$.fragment),ur=_e(),ot=M("div"),zt=M("h2"),Rt=M("button"),Pt=M("span"),Dt=ee("Religion & Ethnicity"),Ht=_e(),Tt=M("div"),Et=M("div"),rn=ee("Census 2021 - "),kn=ee(li),mn=ee(" - "),Yr=M("span"),ki=ee("Religion, Religion or religion brought up in, Ethnic group"),va=_e(),ui=M("div"),ra=M("div"),_i=M("div"),Rn=M("div"),qa=ee("Religion"),ms=M("span"),Hs=_e(),Po=M("div"),ys=M("div"),Co=ee(`Religion, religious denomination or body the person\r
									indicated they belong to. `),vs=M("a"),ja=M("strong"),nn=ee("Statistical bulletins"),gs=_e(),Ut(Ta.$$.fragment),Ml=_e(),nr=M("div"),Ci=M("div"),ji=M("div"),Ll=ee("Religion or religion brought up in"),hc=M("span"),xd=_e(),_s=M("div"),_u=M("div"),bu=ee("The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Xs=M("a"),dp=M("strong"),pc=ee("Statistical bulletins"),ga=_e(),Ut(sh.$$.fragment),py=_e(),xu=M("div"),Ws=M("div"),fc=M("div"),eg=ee("Ethnic group"),dc=M("span"),wf=_e(),lh=M("div"),Do=M("div"),mp=ee("Person\u2019s ethnic group as declared in the Census. "),yp=M("a"),wd=M("strong"),tg=ee("Statistical bulletins"),rg=_e(),Ut(uh.$$.fragment),ig=_e(),wu=M("div"),vp=M("h2"),Za=M("button"),Ef=M("span"),Zi=ee("Health & Care"),Sf=_e(),mc=M("div"),Mo=M("div"),kf=ee("Census 2021 - "),Ed=ee(yc),fy=ee(" - "),Eu=M("span"),Sd=ee("General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),kd=_e(),so=M("div"),Lo=M("div"),Ys=M("div"),Js=M("div"),ng=ee("General health"),vc=M("span"),bs=M("br"),og=_e(),gp=M("div"),_p=M("div"),sg=ee(`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),ch=M("a"),Su=M("strong"),lg=ee("Statistical bulletins"),ug=_e(),Ut(gc.$$.fragment),dy=_e(),ku=M("div"),Qs=M("div"),lo=M("div"),cg=ee("Long-term health problem or disability"),_c=M("span"),xs=_e(),bp=M("div"),xp=M("div"),hg=ee("A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Rl=M("a"),If=M("strong"),pg=ee("Statistical bulletins"),fg=_e(),Ut(hh.$$.fragment),dg=_e(),Bl=M("div"),bi=M("div"),Ol=M("div"),my=ee("Long-term health conditions"),ph=M("span"),yy=M("br"),mg=_e(),wp=M("div"),Ep=M("div"),vy=ee(`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),Sp=M("a"),Td=M("strong"),kp=ee("Statistical bulletins"),gy=_e(),Ut(bc.$$.fragment),Tf=_e(),br=M("div"),ws=M("div"),_a=M("div"),fh=ee("Unpaid care"),dh=M("span"),yg=_e(),Ip=M("div"),Tp=M("div"),vg=ee(`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),Ap=M("a"),Ad=M("strong"),gg=ee("Statistical bulletins"),_g=_e(),Ut(Vl.$$.fragment),_y=_e(),mh=M("div"),Pp=M("h2"),Fl=M("button"),Cp=M("span"),Af=ee("Housing & Accommodation"),Dp=_e(),$s=M("div"),an=M("div"),yh=ee("Census 2021 - "),Mp=ee(In),zf=ee(" - "),Gn=M("span"),by=ee("Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),xy=_e(),ia=M("div"),Nl=M("div"),Ro=M("div"),Ul=M("div"),bg=ee("Accommodation type"),vh=M("span"),zd=_e(),gh=M("div"),_h=M("div"),xg=ee("The type of accommodation occupied by a household. "),bh=M("a"),Cf=M("strong"),wy=ee("Statistical bulletins"),Ey=_e(),Ut(xh.$$.fragment),wg=_e(),ql=M("div"),Es=M("div"),el=M("div"),Sy=ee("Household adaptations"),Iu=M("span"),Df=_e(),tl=M("div"),Lp=M("div"),Eg=ee(`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Rp=M("a"),Tu=M("strong"),Pd=ee("Statistical bulletins"),Iy=_e(),Ut(Au.$$.fragment),Ty=_e(),jl=M("div"),rl=M("div"),xc=M("div"),Sg=ee("Central heating"),zu=M("span"),Ig=_e(),il=M("div"),Zl=M("div"),Pr=ee(`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),Bp=M("a"),Op=M("strong"),wh=ee("Statistical bulletins"),Tg=_e(),Ut(Eh.$$.fragment),Ag=_e(),nl=M("div"),al=M("div"),wc=M("div"),zg=ee("Renewable energy systems"),Sh=M("span"),Ay=_e(),kh=M("div"),Pu=M("div"),Ec=ee(`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),Sc=M("a"),Cu=M("strong"),zy=ee("Statistical bulletins"),Gi=_e(),Ut(Cr.$$.fragment),Py=_e(),Cy=M("br"),Dy=_e(),Gl=M("div"),Ss=M("div"),Kl=M("div"),kc=ee("Household tenure"),ks=M("span"),Ki=_e(),Hl=M("div"),uo=M("div"),Mf=ee(`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),Du=M("a"),Vp=M("strong"),Ih=ee("Statistical bulletins"),Xl=_e(),Ut(Ic.$$.fragment),My=_e(),ol=M("div"),Jr=M("div"),Ga=M("div"),Ly=ee("Car or van availability"),e=M("span"),i=_e(),l=M("div"),p=M("div"),d=ee(`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),v=M("a"),I=M("strong"),C=ee("Statistical bulletins"),D=_e(),Ut(O.$$.fragment),q=_e(),K=M("br"),se=_e(),le=M("div"),ye=M("h2"),pe=M("button"),Ee=M("span"),Ae=ee("Household Structure"),De=_e(),Me=M("div"),Fe=M("div"),Ke=ee("Census 2021 - "),gt=ee(Ye),st=ee(" - "),_t=M("span"),lt=ee("Number of dependent children, Household composition"),Yt=_e(),wt=M("div"),ct=M("div"),Ft=M("div"),Bt=M("div"),sr=ee("Number of dependent children"),bt=M("span"),ni=_e(),Qr=M("div"),Gr=M("div"),ai=ee("Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),$r=M("a"),Di=M("strong"),on=ee("Statistical bulletins"),Kn=_e(),Ut(xi.$$.fragment),Hn=_e(),Ur=M("div"),ei=M("div"),Xt=M("div"),Rr=ee("Household composition"),yr=M("span"),na=_e(),Hi=M("div"),Dr=M("div"),Mi=ee(`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),Xi=M("a"),cr=M("strong"),sl=ee("Statistical bulletins"),Ka=_e(),Ut(Aa.$$.fragment),Ii=_e(),Bo=M("div"),Th=_e(),Oo=M("div"),ll=M("h2"),aa=M("button"),Wl=M("span"),Lf=ee("Marital & Civil Partnership Status"),Ah=_e(),ul=M("div"),Vo=M("div"),Rf=ee("Census 2021 - "),zh=ee(Ts),Ph=ee(" - "),As=M("span"),Ch=ee("Marital and civil partnership status"),Bf=_e(),Ha=M("div"),Fo=M("div"),Xa=M("div"),zs=M("div"),Fp=ee("Marital and civil partnership status"),Yl=M("span"),Of=_e(),cl=M("div"),Mu=M("div"),Dh=ee("Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),Jl=M("a"),Ql=M("strong"),Np=ee("Statistical bulletins"),Mh=_e(),Ut(Lu.$$.fragment),Ry=_e(),Up=M("div"),By=_e(),qp=M("div"),jp=_e(),ti=M("div"),za=M("h2"),$l=M("button"),Ps=M("span"),Dd=ee("Sexual Orientation"),Oy=_e(),eu=M("div"),Xn=M("div"),Vf=ee("Census 2021 - "),Zp=ee(Tc),Ff=ee(" - "),Lh=M("span"),Vy=ee("Sexual orientation"),Gp=_e(),No=M("div"),tu=M("div"),Cs=M("div"),Ru=M("div"),Fy=ee("Sexual orientation"),Wn=M("span"),Uy=_e(),Wa=M("div"),Kp=M("div"),qy=ee("Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),Ds=M("a"),Bu=M("strong"),Rh=ee("Statistical bulletins"),Bh=_e(),Ut(Ms.$$.fragment),jy=_e(),Nf=M("div"),Zy=_e(),Uf=M("div"),Md=_e(),Ya=M("div"),Oh=M("h2"),Ls=M("button"),Vh=M("span"),Ky=ee("Labour Market & Qualifications"),Ld=_e(),Ac=M("div"),hl=M("div"),Rd=ee("Census 2021 - "),Fh=ee(qf),Hy=ee(" - "),zc=M("span"),Pg=ee("Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),Xy=_e(),Pa=M("div"),Ou=M("div"),pl=M("div"),Pc=M("div"),Cg=ee("Highest level of qualifications"),Hp=M("span"),Dg=_e(),Ja=M("div"),Li=M("div"),Wy=ee(`The highest level of qualification categories are as follows:\r
										`),Xp=M("br"),Yy=ee(`\r
                                        \u2022 No qualifications;\r
										`),g0=M("br"),_0=ee(`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),b0=M("br"),x0=ee(`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),w0=M("br"),E0=ee(`\r
                                        \u2022 Apprenticeship;\r
										`),S0=M("br"),k0=ee(`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),I0=M("br"),T0=ee(`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),A0=M("br"),z0=ee(`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),P0=M("br"),C0=ee(`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Bd=M("a"),Mg=M("strong"),D0=ee("Statistical bulletins"),M0=_e(),Ut(jf.$$.fragment),L0=_e(),Nh=M("div"),Vu=M("div"),Wp=M("div"),R0=ee("Economic activity"),Od=M("span"),B0=_e(),Vd=M("div"),Fd=M("div"),O0=ee("Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),Nd=M("a"),Lg=M("strong"),V0=ee("Statistical bulletins"),F0=_e(),Ut(Zf.$$.fragment),N0=_e(),Uh=M("div"),Fu=M("div"),Yp=M("div"),U0=ee("Hours worked per week"),Ud=M("span"),q0=_e(),qd=M("div"),jd=M("div"),j0=ee("The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),Zd=M("a"),Rg=M("strong"),Z0=ee("Statistical bulletins"),G0=_e(),Ut(Gf.$$.fragment),K0=_e(),qh=M("div"),Nu=M("div"),Jp=M("div"),H0=ee("Industry of employment"),Gd=M("span"),X0=_e(),Kd=M("div"),Hd=M("div"),W0=ee("The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),Xd=M("a"),Bg=M("strong"),Y0=ee("Statistical bulletins"),J0=_e(),Ut(Kf.$$.fragment),Q0=_e(),jh=M("div"),Uu=M("div"),Qp=M("div"),$0=ee("Occupation"),Wd=M("span"),e1=_e(),Yd=M("div"),Jd=M("div"),t1=ee("The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),Qd=M("a"),Og=M("strong"),r1=ee("Statistical bulletins"),i1=_e(),Ut(Hf.$$.fragment),n1=_e(),Xf=M("div"),$d=M("h2"),Cc=M("button"),Jy=M("span"),a1=ee("Travel to Work or Study"),o1=_e(),Wf=M("div"),Dc=M("div"),s1=ee("Census 2021 - "),d_=ee(Vg),l1=ee(" - "),Qy=M("span"),u1=ee("Method of travel to work or study, Distance to place of work or study"),c1=_e(),co=M("div"),Zh=M("div"),qu=M("div"),$p=M("div"),h1=ee("Method of travel to work"),em=M("span"),p1=_e(),tm=M("div"),rm=M("div"),f1=ee(`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),im=M("a"),Fg=M("strong"),d1=ee("Statistical bulletins"),m1=_e(),Ut(Yf.$$.fragment),y1=_e(),Gh=M("div"),ju=M("div"),ef=M("div"),v1=ee("Method of travel to study"),nm=M("span"),g1=_e(),am=M("div"),om=M("div"),_1=ee(`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),sm=M("a"),Ng=M("strong"),b1=ee("Statistical bulletins"),x1=_e(),Ut(Jf.$$.fragment),w1=_e(),Ug=M("div"),E1=_e(),Kh=M("div"),Zu=M("div"),tf=M("div"),S1=ee("Distance to place of work"),lm=M("span"),k1=_e(),um=M("div"),cm=M("div"),I1=ee("The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),hm=M("a"),qg=M("strong"),T1=ee("Statistical bulletins"),A1=_e(),Ut(Qf.$$.fragment),z1=_e(),Hh=M("div"),Gu=M("div"),rf=M("div"),P1=ee("Distance to place of study"),pm=M("span"),C1=_e(),fm=M("div"),dm=M("div"),D1=ee("The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),mm=M("a"),jg=M("strong"),M1=ee("Statistical bulletins"),L1=_e(),Ut($f.$$.fragment),R1=_e(),ed=M("div"),ym=M("h2"),Mc=M("button"),$y=M("span"),B1=ee("Migration"),O1=_e(),td=M("div"),Lc=M("div"),V1=ee("Census 2021 - "),m_=ee(Zg),F1=ee(" - "),ev=M("span"),N1=ee("Address one year ago, Year of arrival to live in NI"),U1=_e(),ru=M("div"),Xh=M("div"),Ku=M("div"),nf=M("div"),q1=ee("Address one year ago"),vm=M("span"),j1=_e(),gm=M("div"),_m=M("div"),Z1=ee("Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),bm=M("a"),Gg=M("strong"),G1=ee("Statistical bulletins"),K1=_e(),Ut(rd.$$.fragment),H1=_e(),Wh=M("div"),Hu=M("div"),af=M("div"),X1=ee("Year of arrival to live in NI"),xm=M("span"),W1=_e(),wm=M("div"),Em=M("div"),Y1=ee("The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Sm=M("a"),Kg=M("strong"),J1=ee("Statistical bulletins"),Q1=_e(),Ut(id.$$.fragment),$1=_e(),Hg=M("div"),this.h()},l(J){h=L(J,"DIV",{class:!0});var ze=R(h);f=L(ze,"DIV",{});var Yh=R(f);y=L(Yh,"SPAN",{class:!0});var jc=R(y);x=L(jc,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var tv=R(x);_=te(tv,"Home"),tv.forEach(T),o=Ox(jc,!1),P=be(jc),Rc.l(jc),F=be(jc),jc.forEach(T),V=L(Yh,"BR",{}),j=be(Yh),U=L(Yh,"SPAN",{class:!0});var rv=R(U);he=te(rv,fe),rv.forEach(T),Ie=be(Yh),we=L(Yh,"DIV",{class:!0,style:!0});var Xu=R(we);Ve=te(Xu,`Click for: \r
		\r
					`),Bc.l(Xu),Ue=be(Xu),Uo&&Uo.l(Xu),Ot=be(Xu),Oc.l(Xu),Xu.forEach(T),Yh.forEach(T),Mt=be(ze),mt=L(ze,"DIV",{});var km=R(mt);Qe=L(km,"DIV",{style:!0,class:!0});var iu=R(Qe);kr=L(iu,"B",{});var Im=R(kr);xr=te(Im,"Search for your area:"),Im.forEach(T),ar=be(iu),qt(It.$$.fragment,iu),At=be(iu),Tr=L(iu,"SCRIPT",{});var Tm=R(Tr);Vt=te(Tm,`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input")\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]'\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`),Tm.forEach(T),Ir=be(iu),rt=L(iu,"DIV",{width:!0});var Zc=R(rt);lr=L(Zc,"BUTTON",{class:!0,style:!0,title:!0,onclick:!0});var Am=R(lr);ri=te(Am,"Print / PDF"),Am.forEach(T),ci=be(Zc),Er=L(Zc,"BUTTON",{class:!0,style:!0,alt:!0,onclick:!0});var zm=R(Er);vt=te(zm,"Menu"),zm.forEach(T),nt=be(Zc),fr=L(Zc,"BUTTON",{class:!0,style:!0,type:!0,alt:!0});var Pm=R(fr);On=te(Pm,"Share"),Pm.forEach(T),Zc.forEach(T),iu.forEach(T),km.forEach(T),ze.forEach(T),sa=be(J),Ti=L(J,"DIV",{id:!0,class:!0});var Gc=R(Ti);vn=L(Gc,"DIV",{class:!0,style:!0});var Kc=R(vn);oi=L(Kc,"H3",{style:!0,class:!0});var Cm=R(oi);Sa=te(Cm,"Overview"),Cm.forEach(T),gr=be(Kc),Vc.l(Kc),Vn=be(Kc),qo&&qo.l(Kc),Kc.forEach(T),Qa=be(Gc),Vr=L(Gc,"DIV",{class:!0});var Go=R(Vr);Lt=L(Go,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Dm=R(Lt);Wi=L(Dm,"DIV",{class:!0,style:!0});var nd=R(Wi);Bi=te(nd,"Population "),hi=L(nd,"SPAN",{style:!0});var iv=R(hi);iv.forEach(T),nd.forEach(T),Dm.forEach(T),Jt=be(Go),Ei=L(Go,"DIV",{class:!0,id:!0});var Mm=R(Ei);Mr=L(Mm,"DIV",{class:!0});var ad=R(Mr);di=te(ad,`Population is based on the number of usual residents. A\r
						usual resident is anyone who, on 21 March 2021 is in the\r
						UK, and staying in the UK for a period of 3 months or\r
						more; or has a permanent UK address and is outside the\r
						UK and is staying outside the UK for less than 12\r
						months. `),mi=L(ad,"A",{href:!0,class:!0});var Lm=R(mi);Ar=L(Lm,"STRONG",{});var Rm=R(Ar);yi=te(Rm,"Statistical bulletins"),Rm.forEach(T),Lm.forEach(T),ad.forEach(T),Mm.forEach(T),un=be(Go),Kr=L(Go,"SPAN",{class:!0,style:!0});var Bm=R(Kr);Fr=te(Bm,hr),Bm.forEach(T),Yn=L(Go,"BR",{}),Fn=be(Go),ba&&ba.l(Go),La=be(Go),xa&&xa.l(Go),Go.forEach(T),Qo=be(Gc),pi=L(Gc,"DIV",{class:!0});var Ko=R(pi);cn=L(Ko,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Om=R(cn);gn=L(Om,"DIV",{class:!0,style:!0});var od=R(gn);po=te(od,"Households"),la=L(od,"SPAN",{style:!0});var nv=R(la);nv.forEach(T),od.forEach(T),Om.forEach(T),$o=be(Ko),Nn=L(Ko,"DIV",{class:!0,id:!0});var Vm=R(Nn);_n=L(Vm,"DIV",{class:!0});var sd=R(_n);ua=te(sd,`A household is either one person living alone or a group\r
						of people living at the same address who share cooking\r
						facilities and share a living room, sitting room or\r
						dining area. `),Jn=L(sd,"A",{href:!0,class:!0});var Fm=R(Jn);ca=L(Fm,"STRONG",{});var Nm=R(ca);Nr=te(Nm,"Statistical bulletins"),Nm.forEach(T),Fm.forEach(T),sd.forEach(T),Vm.forEach(T),N=be(Ko),G=L(Ko,"SPAN",{class:!0,style:!0});var Um=R(G);re=te(Um,X),Um.forEach(T),ue=L(Ko,"BR",{}),ve=be(Ko),wa&&wa.l(Ko),xe=be(Ko),Ea&&Ea.l(Ko),Ko.forEach(T),Gc.forEach(T),H=be(J),oe=L(J,"DIV",{class:!0});var nu=R(oe);Se=L(nu,"DIV",{style:!0});var qm=R(Se);Ne=L(qm,"H3",{class:!0});var jm=R(Ne);Fc.l(jm),jm.forEach(T),qm.forEach(T),Ge=be(nu),Le=L(nu,"DIV",{id:!0,style:!0,class:!0});var Zm=R(Le);qt(qe.$$.fragment,Zm),Zm.forEach(T),at=be(nu),Re=L(nu,"DIV",{});var Gm=R(Re);Nc.l(Gm),Gm.forEach(T),tt=be(nu),We=L(nu,"DIV",{});var Km=R(We);Uc.l(Km),Km.forEach(T),nu.forEach(T),Nt=be(J),Ze=L(J,"DIV",{class:!0,id:!0});var sn=R(Ze);Gt=L(sn,"DIV",{class:!0});var S_=R(Gt);or=L(S_,"H2",{class:!0,id:!0});var o2=R(or);Ct=L(o2,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var s2=R(Ct);tr=L(s2,"SPAN",{class:!0});var l2=R(tr);er=te(l2,"Area Information"),l2.forEach(T),s2.forEach(T),o2.forEach(T),Ai=be(S_),rr=L(S_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var u2=R(rr);dr=L(u2,"DIV",{class:!0});var Hm=R(dr);pr=te(Hm,"Census 2021 - "),ir=te(Hm,Kt),Oi=te(Hm," - "),ha=L(Hm,"SPAN",{class:!0});var c2=R(ha);vi=te(c2,"Location, Area and Population density"),c2.forEach(T),Yi=be(Hm),bn=L(Hm,"DIV",{class:!0});var av=R(bn);Ji=L(av,"DIV",{class:!0,style:!0});var Xm=R(Ji);mr=L(Xm,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var h2=R(mr);Un=L(h2,"DIV",{class:!0,style:!0});var eb=R(Un);Vi=te(eb,"Location"),Hr=L(eb,"SPAN",{style:!0});var mI=R(Hr);mI.forEach(T),eb.forEach(T),h2.forEach(T),zr=be(Xm),xn=L(Xm,"DIV",{class:!0,id:!0});var p2=R(xn);hn=L(p2,"DIV",{class:!0});var f2=R(hn);Qu=te(f2,"Information about the area including its geographical hierarchy."),f2.forEach(T),p2.forEach(T),Fi=be(Xm),fo=L(Xm,"BR",{}),qc.l(Xm),Xm.forEach(T),pn=be(av),Xr=L(av,"DIV",{class:!0});var ov=R(Xr);zi=L(ov,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var d2=R(zi);fi=L(d2,"DIV",{class:!0,style:!0});var tb=R(fi);mo=te(tb,"Area "),es=L(tb,"SPAN",{style:!0});var yI=R(es);yI.forEach(T),tb.forEach(T),d2.forEach(T),yl=be(ov),vl=L(ov,"DIV",{class:!0,id:!0});var m2=R(vl);ts=L(m2,"DIV",{class:!0});var y2=R(ts);ip=te(y2,"Area is measured in hectares (ha), it is rounded to the nearest whole number."),y2.forEach(T),m2.forEach(T),au=be(ov),rs=L(ov,"SPAN",{class:!0,style:!0});var rb=R(rs);ou=te(rb,yo),gl=te(rb," ha"),rb.forEach(T),ov.forEach(T),Yc=be(av),wn=L(av,"DIV",{class:!0});var ld=R(wn);Si=L(ld,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var v2=R(Si);qn=L(v2,"DIV",{class:!0,style:!0});var ib=R(qn);ke=te(ib,"Population density"),Ni=L(ib,"SPAN",{style:!0});var vI=R(Ni);vI.forEach(T),ib.forEach(T),v2.forEach(T),Wr=be(ld),pa=L(ld,"DIV",{class:!0,id:!0});var g2=R(pa);Pn=L(g2,"DIV",{class:!0});var _2=R(Pn);Pi=te(_2,"Population density is the number of usual residents per hectare. It is rounded to 1 d.p."),_2.forEach(T),g2.forEach(T),su=be(ld),lu=L(ld,"SPAN",{class:!0,style:!0});var b2=R(lu);sf=te(b2,np),b2.forEach(T),ap=be(ld),jo&&jo.l(ld),ld.forEach(T),av.forEach(T),Hm.forEach(T),u2.forEach(T),S_.forEach(T),op=be(sn),Rs=L(sn,"DIV",{class:!0});var k_=R(Rs);uu=L(k_,"H2",{class:!0,id:!0});var x2=R(uu);vo=L(x2,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var w2=R(vo);Jc=L(w2,"SPAN",{class:!0});var E2=R(Jc);$u=te(E2,"Demography"),E2.forEach(T),w2.forEach(T),x2.forEach(T),ec=be(k_),_l=L(k_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var S2=R(_l);si=L(S2,"DIV",{class:!0});var Wm=R(si);sp=te(Wm,"Census 2021 - "),is=te(Wm,go),bl=te(Wm," - "),_o=L(Wm,"SPAN",{class:!0});var k2=R(_o);Bs=te(k2,"Broad age bands (years), Sex, Household size"),k2.forEach(T),xl=be(Wm),Cn=L(Wm,"DIV",{class:!0});var sv=R(Cn);Qi=L(sv,"DIV",{class:!0});var Jh=R(Qi);$a=L(Jh,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var I2=R($a);Os=L(I2,"DIV",{class:!0,style:!0});var nb=R(Os);Lr=te(nb,"Broad age bands (years) "),tc=L(nb,"SPAN",{style:!0});var gI=R(tc);gI.forEach(T),nb.forEach(T),I2.forEach(T),cf=be(Jh),cu=L(Jh,"DIV",{class:!0,id:!0});var T2=R(cu);hu=L(T2,"DIV",{class:!0});var ab=R(hu);hf=te(ab,`A grouping of ages where a person\u2019s age is their age\r
									at their last birthday on or prior to census day. `),eo=L(ab,"A",{href:!0,class:!0});var A2=R(eo);bo=L(A2,"STRONG",{});var z2=R(bo);wl=te(z2,"Statistical bulletins"),z2.forEach(T),A2.forEach(T),ab.forEach(T),T2.forEach(T),pf=be(Jh),El=L(Jh,"DIV",{class:!0,style:!0});var P2=R(El);qt(Vs.$$.fragment,P2),P2.forEach(T),Sl=be(Jh),Zo&&Zo.l(Jh),lp=be(Jh),ns=L(Jh,"DIV",{});var C2=R(ns);qt(Ra.$$.fragment,C2),C2.forEach(T),Jh.forEach(T),ff=be(sv),xo=L(sv,"DIV",{class:!0});var I_=R(xo);Sr=L(I_,"DIV",{class:!0,style:!0});var D2=R(Sr);Qc=te(D2,"Sex"),D2.forEach(T),vd=be(I_),qt(to.$$.fragment,I_),I_.forEach(T),df=be(sv),Fs=L(sv,"DIV",{class:!0});var lv=R(Fs);ro=L(lv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M2=R(ro);wo=L(M2,"DIV",{class:!0,style:!0});var ob=R(wo);pu=te(ob,"Household size"),as=L(ob,"SPAN",{style:!0});var _I=R(as);_I.forEach(T),ob.forEach(T),M2.forEach(T),rc=be(lv),Eo=L(lv,"DIV",{class:!0,id:!0});var L2=R(Eo);fu=L(L2,"DIV",{class:!0});var sb=R(fu);du=te(sb,"The number of usual residents in the household.      "),$n=L(sb,"A",{href:!0,class:!0});var R2=R($n);$c=L(R2,"STRONG",{});var B2=R($c);yf=te(B2,"Statistical bulletins"),B2.forEach(T),R2.forEach(T),sb.forEach(T),L2.forEach(T),vf=be(lv),qt(Ba.$$.fragment,lv),lv.forEach(T),sv.forEach(T),Wm.forEach(T),S2.forEach(T),k_.forEach(T),th=be(sn),Ns=L(sn,"DIV",{class:!0});var T_=R(Ns);Us=L(T_,"H2",{class:!0,id:!0});var O2=R(Us);os=L(O2,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var V2=R(os);kl=L(V2,"SPAN",{class:!0});var F2=R(kl);up=te(F2,"Country of Birth & Nationality"),F2.forEach(T),V2.forEach(T),O2.forEach(T),gf=be(T_),Il=L(T_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var N2=R(Il);Oa=L(N2,"DIV",{class:!0});var Ym=R(Oa);cp=te(Ym,"Census 2021 - "),rh=te(Ym,ic),nc=te(Ym," - "),ac=L(Ym,"SPAN",{class:!0});var U2=R(ac);Tl=te(U2,"Country of birth, Passport(s) held, National identity (person based)"),U2.forEach(T),ii=be(Ym),fa=L(Ym,"DIV",{class:!0});var uv=R(fa);da=L(uv,"DIV",{class:!0});var cv=R(da);Dn=L(cv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var q2=R(Dn);Qt=L(q2,"DIV",{class:!0,style:!0});var lb=R(Qt);jr=te(lb,"Country of birth"),Mn=L(lb,"SPAN",{style:!0});var bI=R(Mn);bI.forEach(T),lb.forEach(T),q2.forEach(T),mu=be(cv),ss=L(cv,"DIV",{class:!0,id:!0});var j2=R(ss);oc=L(j2,"DIV",{class:!0});var ub=R(oc);gd=te(ub,"The country in which a person was born. "),ls=L(ub,"A",{href:!0,class:!0});var Z2=R(ls);Al=L(Z2,"STRONG",{});var G2=R(Al);us=te(G2,"Statistical bulletins"),G2.forEach(T),Z2.forEach(T),ub.forEach(T),j2.forEach(T),Ui=be(cv),qt(So.$$.fragment,cv),cv.forEach(T),_f=be(uv),Zr=L(uv,"DIV",{class:!0});var hv=R(Zr);it=L(hv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var K2=R(it);$i=L(K2,"DIV",{class:!0,style:!0});var cb=R($i);ih=te(cb,"Passport(s) held"),ko=L(cb,"SPAN",{style:!0});var xI=R(ko);xI.forEach(T),cb.forEach(T),K2.forEach(T),ma=be(hv),zl=L(hv,"DIV",{class:!0,id:!0});var H2=R(zl);Je=L(H2,"DIV",{class:!0});var hb=R(Je);pp=te(hb,"Passport or passports that an individual holds. "),qs=L(hb,"A",{href:!0,class:!0});var X2=R(qs);sc=L(X2,"STRONG",{});var W2=R(sc);Va=te(W2,"Statistical bulletins"),W2.forEach(T),X2.forEach(T),hb.forEach(T),H2.forEach(T),ya=be(hv),qt(hs.$$.fragment,hv),hv.forEach(T),nh=be(uv),qi=L(uv,"DIV",{class:!0});var pv=R(qi);En=L(pv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Y2=R(En);ps=L(Y2,"DIV",{class:!0,style:!0});var pb=R(ps);lc=te(pb,"National identity (person based)"),Pl=L(pb,"SPAN",{style:!0});var wI=R(Pl);wI.forEach(T),pb.forEach(T),Y2.forEach(T),io=be(pv),Ln=L(pv,"DIV",{class:!0,id:!0});var J2=R(Ln);Wt=L(J2,"DIV",{class:!0});var fb=R(Wt);Io=te(fb,`The nationality or nationalities that the person\r
									identifies with. `),jn=L(fb,"A",{href:!0,class:!0});var Q2=R(jn);en=L(Q2,"STRONG",{});var $2=R(en);Cl=te($2,"Statistical bulletins"),$2.forEach(T),Q2.forEach(T),fb.forEach(T),J2.forEach(T),js=be(pv),qt(Zn.$$.fragment,pv),pv.forEach(T),uv.forEach(T),Ym.forEach(T),N2.forEach(T),T_.forEach(T),uc=be(sn),yt=L(sn,"DIV",{class:!0});var A_=R(yt);dt=L(A_,"H2",{class:!0,id:!0});var ew=R(dt);Fa=L(ew,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var tw=R(Fa);fn=L(tw,"SPAN",{class:!0});var rw=R(fn);no=te(rw,"Language"),rw.forEach(T),tw.forEach(T),ew.forEach(T),Sn=be(A_),ta=L(A_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var iw=R(ta);ao=L(iw,"DIV",{class:!0});var Jm=R(ao);ah=te(Jm,"Census 2021 - "),tn=te(Jm,_r),bf=te(Jm," - "),To=L(Jm,"SPAN",{class:!0});var nw=R(To);fp=te(nw,"Main language, Knowledge of Irish, Knowledge of Ulster-Scots"),nw.forEach(T),fs=be(Jm),gi=L(Jm,"DIV",{class:!0});var fv=R(gi);ka=L(fv,"DIV",{class:!0});var dv=R(ka);dn=L(dv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var aw=R(dn);Ao=L(aw,"DIV",{class:!0,style:!0});var db=R(Ao);yu=te(db,"Main language"),ds=L(db,"SPAN",{style:!0});var EI=R(ds);EI.forEach(T),db.forEach(T),aw.forEach(T),vu=be(dv),oo=L(dv,"DIV",{class:!0,id:!0});var ow=R(oo);Dl=L(ow,"DIV",{class:!0});var mb=R(Dl);Zs=te(mb,`Person's main language as declared in the Census.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),Na=L(mb,"A",{href:!0,class:!0});var sw=R(Na);gu=L(sw,"STRONG",{});var lw=R(gu);Gs=te(lw,"Statistical bulletins"),lw.forEach(T),sw.forEach(T),mb.forEach(T),ow.forEach(T),Ua=be(dv),qt(Ks.$$.fragment,dv),dv.forEach(T),cc=be(fv),zo=L(fv,"DIV",{class:!0});var mv=R(zo);Ia=L(mv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var uw=R(Ia);n=L(uw,"DIV",{class:!0,style:!0});var yb=R(n);s=te(yb,"Knowledge of Irish"),a=L(yb,"SPAN",{style:!0});var SI=R(a);SI.forEach(T),yb.forEach(T),uw.forEach(T),m=be(mv),E=L(mv,"DIV",{class:!0,id:!0});var cw=R(E);k=L(cw,"DIV",{class:!0});var vb=R(k);A=te(vb,`A person has some ability in Irish if they can\r
									understand, speak, read or write Irish. Statistics\r
									for all language questions are restricted to persons\r
									aged 3 and over. `),B=L(vb,"A",{href:!0,class:!0});var hw=R(B);Z=L(hw,"STRONG",{});var pw=R(Z);Y=te(pw,"Statistical bulletins"),pw.forEach(T),hw.forEach(T),vb.forEach(T),cw.forEach(T),Q=be(mv),qt($.$$.fragment,mv),mv.forEach(T),ce=be(fv),ae=L(fv,"DIV",{class:!0});var yv=R(ae);de=L(yv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var fw=R(de);ne=L(fw,"DIV",{class:!0,style:!0});var gb=R(ne);me=te(gb,"Knowledge of Ulster-Scots"),ge=L(gb,"SPAN",{style:!0});var kI=R(ge);kI.forEach(T),gb.forEach(T),fw.forEach(T),Be=be(yv),Ce=L(yv,"DIV",{class:!0,id:!0});var dw=R(Ce);Oe=L(dw,"DIV",{class:!0});var _b=R(Oe);je=te(_b,`A person has some ability in Ulster-Scots if they\r
									can understand, speak, read or write Ulster-Scots.\r
									Statistics for all language questions are restricted\r
									to persons aged 3 and over. `),He=L(_b,"A",{href:!0,class:!0});var mw=R(He);Xe=L(mw,"STRONG",{});var yw=R(Xe);ut=te(yw,"Statistical bulletins"),yw.forEach(T),mw.forEach(T),_b.forEach(T),dw.forEach(T),St=be(yv),qt(xt.$$.fragment,yv),yv.forEach(T),fv.forEach(T),Jm.forEach(T),iw.forEach(T),A_.forEach(T),ur=be(sn),ot=L(sn,"DIV",{class:!0});var z_=R(ot);zt=L(z_,"H2",{class:!0,id:!0});var vw=R(zt);Rt=L(vw,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var gw=R(Rt);Pt=L(gw,"SPAN",{class:!0});var _w=R(Pt);Dt=te(_w,"Religion & Ethnicity"),_w.forEach(T),gw.forEach(T),vw.forEach(T),Ht=be(z_),Tt=L(z_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var bw=R(Tt);Et=L(bw,"DIV",{class:!0});var Qm=R(Et);rn=te(Qm,"Census 2021 - "),kn=te(Qm,li),mn=te(Qm," - "),Yr=L(Qm,"SPAN",{class:!0});var xw=R(Yr);ki=te(xw,"Religion, Religion or religion brought up in, Ethnic group"),xw.forEach(T),va=be(Qm),ui=L(Qm,"DIV",{class:!0});var vv=R(ui);ra=L(vv,"DIV",{class:!0});var gv=R(ra);_i=L(gv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ww=R(_i);Rn=L(ww,"DIV",{class:!0,style:!0});var bb=R(Rn);qa=te(bb,"Religion"),ms=L(bb,"SPAN",{style:!0});var II=R(ms);II.forEach(T),bb.forEach(T),ww.forEach(T),Hs=be(gv),Po=L(gv,"DIV",{class:!0,id:!0});var Ew=R(Po);ys=L(Ew,"DIV",{class:!0});var xb=R(ys);Co=te(xb,`Religion, religious denomination or body the person\r
									indicated they belong to. `),vs=L(xb,"A",{href:!0,class:!0});var Sw=R(vs);ja=L(Sw,"STRONG",{});var kw=R(ja);nn=te(kw,"Statistical bulletins"),kw.forEach(T),Sw.forEach(T),xb.forEach(T),Ew.forEach(T),gs=be(gv),qt(Ta.$$.fragment,gv),gv.forEach(T),Ml=be(vv),nr=L(vv,"DIV",{class:!0});var _v=R(nr);Ci=L(_v,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Iw=R(Ci);ji=L(Iw,"DIV",{class:!0,style:!0});var wb=R(ji);Ll=te(wb,"Religion or religion brought up in"),hc=L(wb,"SPAN",{style:!0});var TI=R(hc);TI.forEach(T),wb.forEach(T),Iw.forEach(T),xd=be(_v),_s=L(_v,"DIV",{class:!0,id:!0});var Tw=R(_s);_u=L(Tw,"DIV",{class:!0});var Eb=R(_u);bu=te(Eb,"The religious group the person belongs to or for people with no current religion their religious group of upbringing. People with no current religion and no religion of upbringing are labelled 'None'.    "),Xs=L(Eb,"A",{href:!0,class:!0});var Aw=R(Xs);dp=L(Aw,"STRONG",{});var zw=R(dp);pc=te(zw,"Statistical bulletins"),zw.forEach(T),Aw.forEach(T),Eb.forEach(T),Tw.forEach(T),ga=be(_v),qt(sh.$$.fragment,_v),_v.forEach(T),py=be(vv),xu=L(vv,"DIV",{class:!0});var bv=R(xu);Ws=L(bv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Pw=R(Ws);fc=L(Pw,"DIV",{class:!0,style:!0});var Sb=R(fc);eg=te(Sb,"Ethnic group"),dc=L(Sb,"SPAN",{style:!0});var AI=R(dc);AI.forEach(T),Sb.forEach(T),Pw.forEach(T),wf=be(bv),lh=L(bv,"DIV",{class:!0,id:!0});var Cw=R(lh);Do=L(Cw,"DIV",{class:!0});var kb=R(Do);mp=te(kb,"Person\u2019s ethnic group as declared in the Census. "),yp=L(kb,"A",{href:!0,class:!0});var Dw=R(yp);wd=L(Dw,"STRONG",{});var Mw=R(wd);tg=te(Mw,"Statistical bulletins"),Mw.forEach(T),Dw.forEach(T),kb.forEach(T),Cw.forEach(T),rg=be(bv),qt(uh.$$.fragment,bv),bv.forEach(T),vv.forEach(T),Qm.forEach(T),bw.forEach(T),z_.forEach(T),ig=be(sn),wu=L(sn,"DIV",{class:!0});var P_=R(wu);vp=L(P_,"H2",{class:!0,id:!0});var Lw=R(vp);Za=L(Lw,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Rw=R(Za);Ef=L(Rw,"SPAN",{class:!0});var Bw=R(Ef);Zi=te(Bw,"Health & Care"),Bw.forEach(T),Rw.forEach(T),Lw.forEach(T),Sf=be(P_),mc=L(P_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var Ow=R(mc);Mo=L(Ow,"DIV",{class:!0});var $m=R(Mo);kf=te($m,"Census 2021 - "),Ed=te($m,yc),fy=te($m," - "),Eu=L($m,"SPAN",{class:!0});var Vw=R(Eu);Sd=te(Vw,"General health, Long-term health problem or disability, Long-term health conditions, Unpaid care"),Vw.forEach(T),kd=be($m),so=L($m,"DIV",{class:!0});var ud=R(so);Lo=L(ud,"DIV",{class:!0});var xv=R(Lo);Ys=L(xv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Fw=R(Ys);Js=L(Fw,"DIV",{class:!0,style:!0});var C_=R(Js);ng=te(C_,"General health"),vc=L(C_,"SPAN",{style:!0});var zI=R(vc);zI.forEach(T),bs=L(C_,"BR",{}),C_.forEach(T),Fw.forEach(T),og=be(xv),gp=L(xv,"DIV",{class:!0,id:!0});var Nw=R(gp);_p=L(Nw,"DIV",{class:!0});var Ib=R(_p);sg=te(Ib,`General health is a self-assessment of a\r
											person\u2019s general state of health. It is not\r
											based over any specified period of time.\r
											`),ch=L(Ib,"A",{href:!0,class:!0});var Uw=R(ch);Su=L(Uw,"STRONG",{});var qw=R(Su);lg=te(qw,"Statistical bulletins"),qw.forEach(T),Uw.forEach(T),Ib.forEach(T),Nw.forEach(T),ug=be(xv),qt(gc.$$.fragment,xv),xv.forEach(T),dy=be(ud),ku=L(ud,"DIV",{class:!0});var wv=R(ku);Qs=L(wv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var jw=R(Qs);lo=L(jw,"DIV",{class:!0,style:!0});var Tb=R(lo);cg=te(Tb,"Long-term health problem or disability"),_c=L(Tb,"SPAN",{style:!0});var PI=R(_c);PI.forEach(T),Tb.forEach(T),jw.forEach(T),xs=be(wv),bp=L(wv,"DIV",{class:!0,id:!0});var Zw=R(bp);xp=L(Zw,"DIV",{class:!0});var Ab=R(xp);hg=te(Ab,"A self-assessment of whether a person has a long-term health problem or disability that limits daily activities and which has lasted, or is expected to last, at least 12 months. It includes problems that are due to old age. "),Rl=L(Ab,"A",{href:!0,class:!0});var Gw=R(Rl);If=L(Gw,"STRONG",{});var Kw=R(If);pg=te(Kw,"Statistical bulletins"),Kw.forEach(T),Gw.forEach(T),Ab.forEach(T),Zw.forEach(T),fg=be(wv),qt(hh.$$.fragment,wv),wv.forEach(T),dg=be(ud),Bl=L(ud,"DIV",{class:!0});var Ev=R(Bl);bi=L(Ev,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Hw=R(bi);Ol=L(Hw,"DIV",{class:!0,style:!0});var D_=R(Ol);my=te(D_,"Long-term health conditions"),ph=L(D_,"SPAN",{style:!0});var CI=R(ph);CI.forEach(T),yy=L(D_,"BR",{}),D_.forEach(T),Hw.forEach(T),mg=be(Ev),wp=L(Ev,"DIV",{class:!0,id:!0});var Xw=R(wp);Ep=L(Xw,"DIV",{class:!0});var zb=R(Ep);vy=te(zb,`A self-assessment of whether a person has a long-term health condition that has lasted, or is expected to last, at least 12 months. Examples include, but are not limited to, deafness or partial hearing loss, mobility or dexterity difficulty that requires the use of a wheelchair, and intellectual or learning disability.\r
									`),Sp=L(zb,"A",{href:!0,class:!0});var Ww=R(Sp);Td=L(Ww,"STRONG",{});var Yw=R(Td);kp=te(Yw,"Statistical bulletins"),Yw.forEach(T),Ww.forEach(T),zb.forEach(T),Xw.forEach(T),gy=be(Ev),qt(bc.$$.fragment,Ev),Ev.forEach(T),Tf=be(ud),br=L(ud,"DIV",{class:!0});var Sv=R(br);ws=L(Sv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var Jw=R(ws);_a=L(Jw,"DIV",{class:!0,style:!0});var Pb=R(_a);fh=te(Pb,"Unpaid care"),dh=L(Pb,"SPAN",{style:!0});var DI=R(dh);DI.forEach(T),Pb.forEach(T),Jw.forEach(T),yg=be(Sv),Ip=L(Sv,"DIV",{class:!0,id:!0});var Qw=R(Ip);Tp=L(Qw,"DIV",{class:!0});var Cb=R(Tp);vg=te(Cb,`'Unpaid care' covers looking after, giving help\r
											or support to anyone because they have long-term\r
											physical or mental health conditions or\r
											illnesses, or problems related to old age. It\r
											does not include any activities as part of paid\r
											employment. All unpaid care statistics are restricted \r
											to persons aged 5 and over.\r
											`),Ap=L(Cb,"A",{href:!0,class:!0});var $w=R(Ap);Ad=L($w,"STRONG",{});var eE=R(Ad);gg=te(eE,"Statistical bulletins"),eE.forEach(T),$w.forEach(T),Cb.forEach(T),Qw.forEach(T),_g=be(Sv),qt(Vl.$$.fragment,Sv),Sv.forEach(T),ud.forEach(T),$m.forEach(T),Ow.forEach(T),P_.forEach(T),_y=be(sn),mh=L(sn,"DIV",{class:!0});var M_=R(mh);Pp=L(M_,"H2",{class:!0,id:!0});var tE=R(Pp);Fl=L(tE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var rE=R(Fl);Cp=L(rE,"SPAN",{class:!0});var iE=R(Cp);Af=te(iE,"Housing & Accommodation"),iE.forEach(T),rE.forEach(T),tE.forEach(T),Dp=be(M_),$s=L(M_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var nE=R($s);an=L(nE,"DIV",{class:!0});var ey=R(an);yh=te(ey,"Census 2021 - "),Mp=te(ey,In),zf=te(ey," - "),Gn=L(ey,"SPAN",{class:!0});var aE=R(Gn);by=te(aE,"Accommodation type, Household adaptations, Central heating, Renewable energy systems, Household tenure, Car or van availability"),aE.forEach(T),xy=be(ey),ia=L(ey,"DIV",{class:!0});var Wu=R(ia);Nl=L(Wu,"DIV",{class:!0});var kv=R(Nl);Ro=L(kv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var oE=R(Ro);Ul=L(oE,"DIV",{class:!0,style:!0});var Db=R(Ul);bg=te(Db,"Accommodation type"),vh=L(Db,"SPAN",{style:!0});var MI=R(vh);MI.forEach(T),Db.forEach(T),oE.forEach(T),zd=be(kv),gh=L(kv,"DIV",{class:!0,id:!0});var sE=R(gh);_h=L(sE,"DIV",{class:!0});var Mb=R(_h);xg=te(Mb,"The type of accommodation occupied by a household. "),bh=L(Mb,"A",{href:!0,class:!0});var lE=R(bh);Cf=L(lE,"STRONG",{});var uE=R(Cf);wy=te(uE,"Statistical bulletins"),uE.forEach(T),lE.forEach(T),Mb.forEach(T),sE.forEach(T),Ey=be(kv),qt(xh.$$.fragment,kv),kv.forEach(T),wg=be(Wu),ql=L(Wu,"DIV",{class:!0});var Iv=R(ql);Es=L(Iv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var cE=R(Es);el=L(cE,"DIV",{class:!0,style:!0});var Lb=R(el);Sy=te(Lb,"Household adaptations"),Iu=L(Lb,"SPAN",{style:!0});var LI=R(Iu);LI.forEach(T),Lb.forEach(T),cE.forEach(T),Df=be(Iv),tl=L(Iv,"DIV",{class:!0,id:!0});var hE=R(tl);Lp=L(hE,"DIV",{class:!0});var Rb=R(Lp);Eg=te(Rb,`Household accommodation that has been adapted or designed for one or more of the following: internal wheelchair usage; external wheelchair access; other physical or mobility difficulties; visual difficulties; hearing difficulties; or other.\r
									`),Rp=L(Rb,"A",{href:!0,class:!0});var pE=R(Rp);Tu=L(pE,"STRONG",{});var fE=R(Tu);Pd=te(fE,"Statistical bulletins"),fE.forEach(T),pE.forEach(T),Rb.forEach(T),hE.forEach(T),Iy=be(Iv),qt(Au.$$.fragment,Iv),Iv.forEach(T),Ty=be(Wu),jl=L(Wu,"DIV",{class:!0});var Tv=R(jl);rl=L(Tv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var dE=R(rl);xc=L(dE,"DIV",{class:!0,style:!0});var Bb=R(xc);Sg=te(Bb,"Central heating"),zu=L(Bb,"SPAN",{style:!0});var RI=R(zu);RI.forEach(T),Bb.forEach(T),dE.forEach(T),Ig=be(Tv),il=L(Tv,"DIV",{class:!0,id:!0});var mE=R(il);Zl=L(mE,"DIV",{class:!0});var Ob=R(Zl);Pr=te(Ob,`Central heating is a central system that generates heat for multiple rooms. It is classified by fuel type.\r
									`),Bp=L(Ob,"A",{href:!0,class:!0});var yE=R(Bp);Op=L(yE,"STRONG",{});var vE=R(Op);wh=te(vE,"Statistical bulletins"),vE.forEach(T),yE.forEach(T),Ob.forEach(T),mE.forEach(T),Tg=be(Tv),qt(Eh.$$.fragment,Tv),Tv.forEach(T),Ag=be(Wu),nl=L(Wu,"DIV",{class:!0});var cd=R(nl);al=L(cd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var gE=R(al);wc=L(gE,"DIV",{class:!0,style:!0});var Vb=R(wc);zg=te(Vb,"Renewable energy systems"),Sh=L(Vb,"SPAN",{style:!0});var BI=R(Sh);BI.forEach(T),Vb.forEach(T),gE.forEach(T),Ay=be(cd),kh=L(cd,"DIV",{class:!0,id:!0});var _E=R(kh);Pu=L(_E,"DIV",{class:!0});var Fb=R(Pu);Ec=te(Fb,`Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.\r
									`),Sc=L(Fb,"A",{href:!0,class:!0});var bE=R(Sc);Cu=L(bE,"STRONG",{});var xE=R(Cu);zy=te(xE,"Statistical bulletins"),xE.forEach(T),bE.forEach(T),Fb.forEach(T),_E.forEach(T),Gi=be(cd),qt(Cr.$$.fragment,cd),Py=be(cd),Cy=L(cd,"BR",{}),cd.forEach(T),Dy=be(Wu),Gl=L(Wu,"DIV",{class:!0});var Av=R(Gl);Ss=L(Av,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var wE=R(Ss);Kl=L(wE,"DIV",{class:!0,style:!0});var Nb=R(Kl);kc=te(Nb,"Household tenure"),ks=L(Nb,"SPAN",{style:!0});var OI=R(ks);OI.forEach(T),Nb.forEach(T),wE.forEach(T),Ki=be(Av),Hl=L(Av,"DIV",{class:!0,id:!0});var EE=R(Hl);uo=L(EE,"DIV",{class:!0});var Ub=R(uo);Mf=te(Ub,`Whether a household owns or rents its accommodation and, if rented, who the landlord is. \r
									`),Du=L(Ub,"A",{href:!0,class:!0});var SE=R(Du);Vp=L(SE,"STRONG",{});var kE=R(Vp);Ih=te(kE,"Statistical bulletins"),kE.forEach(T),SE.forEach(T),Ub.forEach(T),EE.forEach(T),Xl=be(Av),qt(Ic.$$.fragment,Av),Av.forEach(T),My=be(Wu),ol=L(Wu,"DIV",{class:!0});var hd=R(ol);Jr=L(hd,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var IE=R(Jr);Ga=L(IE,"DIV",{class:!0,style:!0});var qb=R(Ga);Ly=te(qb,"Car or van availability"),e=L(qb,"SPAN",{style:!0});var VI=R(e);VI.forEach(T),qb.forEach(T),IE.forEach(T),i=be(hd),l=L(hd,"DIV",{class:!0,id:!0});var TE=R(l);p=L(TE,"DIV",{class:!0});var jb=R(p);d=te(jb,`The number of cars or vans that are owned, or\r
									available for use, by members of a household. It\r
									includes company cars and vans that are available\r
									for private use.\r
									`),v=L(jb,"A",{href:!0,class:!0});var AE=R(v);I=L(AE,"STRONG",{});var zE=R(I);C=te(zE,"Statistical bulletins"),zE.forEach(T),AE.forEach(T),jb.forEach(T),TE.forEach(T),D=be(hd),qt(O.$$.fragment,hd),q=be(hd),K=L(hd,"BR",{}),hd.forEach(T),Wu.forEach(T),ey.forEach(T),nE.forEach(T),M_.forEach(T),se=be(sn),le=L(sn,"DIV",{class:!0});var L_=R(le);ye=L(L_,"H2",{class:!0,id:!0});var PE=R(ye);pe=L(PE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var CE=R(pe);Ee=L(CE,"SPAN",{class:!0});var DE=R(Ee);Ae=te(DE,"Household Structure"),DE.forEach(T),CE.forEach(T),PE.forEach(T),De=be(L_),Me=L(L_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var ME=R(Me);Fe=L(ME,"DIV",{class:!0});var ty=R(Fe);Ke=te(ty,"Census 2021 - "),gt=te(ty,Ye),st=te(ty," - "),_t=L(ty,"SPAN",{class:!0});var LE=R(_t);lt=te(LE,"Number of dependent children, Household composition"),LE.forEach(T),Yt=be(ty),wt=L(ty,"DIV",{class:!0});var zv=R(wt);ct=L(zv,"DIV",{class:!0});var Pv=R(ct);Ft=L(Pv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var RE=R(Ft);Bt=L(RE,"DIV",{class:!0,style:!0});var Zb=R(Bt);sr=te(Zb,"Number of dependent children"),bt=L(Zb,"SPAN",{style:!0});var FI=R(bt);FI.forEach(T),Zb.forEach(T),RE.forEach(T),ni=be(Pv),Qr=L(Pv,"DIV",{class:!0,id:!0});var BE=R(Qr);Gr=L(BE,"DIV",{class:!0});var Gb=R(Gr);ai=te(Gb,"Count of households by number of dependent children. A dependent child is a person aged 0 to 15 in a household (whether or not in a family) or aged 16 to 18 in full-time education and living in a family with his or her parent(s) or grandparent(s). 'No dependent children' includes households with no children and households where all children are non-dependent. "),$r=L(Gb,"A",{href:!0,class:!0});var OE=R($r);Di=L(OE,"STRONG",{});var VE=R(Di);on=te(VE,"Statistical bulletins"),VE.forEach(T),OE.forEach(T),Gb.forEach(T),BE.forEach(T),Kn=be(Pv),qt(xi.$$.fragment,Pv),Pv.forEach(T),Hn=be(zv),Ur=L(zv,"DIV",{class:!0});var Cv=R(Ur);ei=L(Cv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var FE=R(ei);Xt=L(FE,"DIV",{class:!0,style:!0});var Kb=R(Xt);Rr=te(Kb,"Household composition"),yr=L(Kb,"SPAN",{style:!0});var NI=R(yr);NI.forEach(T),Kb.forEach(T),FE.forEach(T),na=be(Cv),Hi=L(Cv,"DIV",{class:!0,id:!0});var NE=R(Hi);Dr=L(NE,"DIV",{class:!0});var Hb=R(Dr);Mi=te(Hb,`Household composition classifies households according to the relationships between the household members. Pension age was 66 at the time of Census 2021 and 65 at the time of Census 2011. \r
										'Other household types' includes: Single family household: Other family composition; and Other household types: One dependent child/Two or more dependent children/All in full-time education/All aged 66 and over/Other family composition. `),Xi=L(Hb,"A",{href:!0,class:!0});var UE=R(Xi);cr=L(UE,"STRONG",{});var qE=R(cr);sl=te(qE,"Statistical bulletins"),qE.forEach(T),UE.forEach(T),Hb.forEach(T),NE.forEach(T),Ka=be(Cv),qt(Aa.$$.fragment,Cv),Cv.forEach(T),Ii=be(zv),Bo=L(zv,"DIV",{class:!0});var UI=R(Bo);UI.forEach(T),zv.forEach(T),ty.forEach(T),ME.forEach(T),L_.forEach(T),Th=be(sn),Oo=L(sn,"DIV",{class:!0});var R_=R(Oo);ll=L(R_,"H2",{class:!0,id:!0});var jE=R(ll);aa=L(jE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ZE=R(aa);Wl=L(ZE,"SPAN",{class:!0});var GE=R(Wl);Lf=te(GE,"Marital & Civil Partnership Status"),GE.forEach(T),ZE.forEach(T),jE.forEach(T),Ah=be(R_),ul=L(R_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var KE=R(ul);Vo=L(KE,"DIV",{class:!0});var ry=R(Vo);Rf=te(ry,"Census 2021 - "),zh=te(ry,Ts),Ph=te(ry," - "),As=L(ry,"SPAN",{class:!0});var HE=R(As);Ch=te(HE,"Marital and civil partnership status"),HE.forEach(T),Bf=be(ry),Ha=L(ry,"DIV",{class:!0});var Dv=R(Ha);Fo=L(Dv,"DIV",{class:!0});var Mv=R(Fo);Xa=L(Mv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var XE=R(Xa);zs=L(XE,"DIV",{class:!0,style:!0});var Xb=R(zs);Fp=te(Xb,"Marital and civil partnership status"),Yl=L(Xb,"SPAN",{style:!0});var qI=R(Yl);qI.forEach(T),Xb.forEach(T),XE.forEach(T),Of=be(Mv),cl=L(Mv,"DIV",{class:!0,id:!0});var WE=R(cl);Mu=L(WE,"DIV",{class:!0});var Wb=R(Mu);Dh=te(Wb,"Classifies people aged 16 and over according to their legal marital or civil partnership status on Census Day 21 March 2021. In 2011, 'in a civil partnership' was 'in a registered same-sex civil partnership'.  "),Jl=L(Wb,"A",{href:!0,class:!0});var YE=R(Jl);Ql=L(YE,"STRONG",{});var JE=R(Ql);Np=te(JE,"Statistical bulletins"),JE.forEach(T),YE.forEach(T),Wb.forEach(T),WE.forEach(T),Mh=be(Mv),qt(Lu.$$.fragment,Mv),Mv.forEach(T),Ry=be(Dv),Up=L(Dv,"DIV",{class:!0});var jI=R(Up);jI.forEach(T),By=be(Dv),qp=L(Dv,"DIV",{class:!0});var ZI=R(qp);ZI.forEach(T),Dv.forEach(T),ry.forEach(T),KE.forEach(T),R_.forEach(T),jp=be(sn),ti=L(sn,"DIV",{class:!0});var B_=R(ti);za=L(B_,"H2",{class:!0,id:!0});var QE=R(za);$l=L(QE,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var $E=R($l);Ps=L($E,"SPAN",{class:!0});var e5=R(Ps);Dd=te(e5,"Sexual Orientation"),e5.forEach(T),$E.forEach(T),QE.forEach(T),Oy=be(B_),eu=L(B_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var t5=R(eu);Xn=L(t5,"DIV",{class:!0});var iy=R(Xn);Vf=te(iy,"Census 2021 - "),Zp=te(iy,Tc),Ff=te(iy," - "),Lh=L(iy,"SPAN",{class:!0});var r5=R(Lh);Vy=te(r5,"Sexual orientation"),r5.forEach(T),Gp=be(iy),No=L(iy,"DIV",{class:!0});var Lv=R(No);tu=L(Lv,"DIV",{class:!0});var Rv=R(tu);Cs=L(Rv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var i5=R(Cs);Ru=L(i5,"DIV",{class:!0,style:!0});var Yb=R(Ru);Fy=te(Yb,"Sexual orientation"),Wn=L(Yb,"SPAN",{style:!0});var GI=R(Wn);GI.forEach(T),Yb.forEach(T),i5.forEach(T),Uy=be(Rv),Wa=L(Rv,"DIV",{class:!0,id:!0});var n5=R(Wa);Kp=L(n5,"DIV",{class:!0});var Jb=R(Kp);qy=te(Jb,"Classifies a person according to their response to the sexual orientation question on the census questionnaire. The question was only asked of people aged 16 and over. Missing answers for sexual orientation were not imputed, so the output classification includes a not stated category. "),Ds=L(Jb,"A",{href:!0,class:!0});var a5=R(Ds);Bu=L(a5,"STRONG",{});var o5=R(Bu);Rh=te(o5,"Statistical bulletins"),o5.forEach(T),a5.forEach(T),Jb.forEach(T),n5.forEach(T),Bh=be(Rv),qt(Ms.$$.fragment,Rv),Rv.forEach(T),jy=be(Lv),Nf=L(Lv,"DIV",{class:!0});var KI=R(Nf);KI.forEach(T),Zy=be(Lv),Uf=L(Lv,"DIV",{class:!0});var HI=R(Uf);HI.forEach(T),Lv.forEach(T),iy.forEach(T),t5.forEach(T),B_.forEach(T),Md=be(sn),Ya=L(sn,"DIV",{class:!0});var O_=R(Ya);Oh=L(O_,"H2",{class:!0,id:!0});var s5=R(Oh);Ls=L(s5,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var l5=R(Ls);Vh=L(l5,"SPAN",{class:!0});var u5=R(Vh);Ky=te(u5,"Labour Market & Qualifications"),u5.forEach(T),l5.forEach(T),s5.forEach(T),Ld=be(O_),Ac=L(O_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var c5=R(Ac);hl=L(c5,"DIV",{class:!0});var ny=R(hl);Rd=te(ny,"Census 2021 - "),Fh=te(ny,qf),Hy=te(ny," - "),zc=L(ny,"SPAN",{class:!0});var h5=R(zc);Pg=te(h5,"Highest level of qualifications, Economic activity, Hours worked per week, Industry of employment, Occupation"),h5.forEach(T),Xy=be(ny),Pa=L(ny,"DIV",{class:!0});var Qh=R(Pa);Ou=L(Qh,"DIV",{class:!0});var Bv=R(Ou);pl=L(Bv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var p5=R(pl);Pc=L(p5,"DIV",{class:!0,style:!0});var Qb=R(Pc);Cg=te(Qb,"Highest level of qualifications"),Hp=L(Qb,"SPAN",{style:!0});var XI=R(Hp);XI.forEach(T),Qb.forEach(T),p5.forEach(T),Dg=be(Bv),Ja=L(Bv,"DIV",{class:!0,id:!0});var f5=R(Ja);Li=L(f5,"DIV",{class:!0});var Ca=R(Li);Wy=te(Ca,`The highest level of qualification categories are as follows:\r
										`),Xp=L(Ca,"BR",{}),Yy=te(Ca,`\r
                                        \u2022 No qualifications;\r
										`),g0=L(Ca,"BR",{}),_0=te(Ca,`\r
                                        \u2022 Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;\r
										`),b0=L(Ca,"BR",{}),x0=te(Ca,`\r
                                        \u2022 Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;\r
										`),w0=L(Ca,"BR",{}),E0=te(Ca,`\r
                                        \u2022 Apprenticeship;\r
										`),S0=L(Ca,"BR",{}),k0=te(Ca,`\r
                                        \u2022 Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;\r
										`),I0=L(Ca,"BR",{}),T0=te(Ca,`\r
                                        \u2022 Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and\r
										`),A0=L(Ca,"BR",{}),z0=te(Ca,`\r
                                        \u2022 Other: Other qualifications, equivalent unknown.\r
                                        `),P0=L(Ca,"BR",{}),C0=te(Ca,`\r
                                        Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent. `),Bd=L(Ca,"A",{href:!0,class:!0});var d5=R(Bd);Mg=L(d5,"STRONG",{});var m5=R(Mg);D0=te(m5,"Statistical bulletins"),m5.forEach(T),d5.forEach(T),Ca.forEach(T),f5.forEach(T),M0=be(Bv),qt(jf.$$.fragment,Bv),Bv.forEach(T),L0=be(Qh),Nh=L(Qh,"DIV",{class:!0});var Ov=R(Nh);Vu=L(Ov,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var y5=R(Vu);Wp=L(y5,"DIV",{class:!0,style:!0});var $b=R(Wp);R0=te($b,"Economic activity"),Od=L($b,"SPAN",{style:!0});var WI=R(Od);WI.forEach(T),$b.forEach(T),y5.forEach(T),B0=be(Ov),Vd=L(Ov,"DIV",{class:!0,id:!0});var v5=R(Vd);Fd=L(v5,"DIV",{class:!0});var ex=R(Fd);O0=te(ex,"Economic activity provides a measure of whether or not a person was an active participant in the labour market at the time of the census. This topic is applicable to people aged 16 and over. "),Nd=L(ex,"A",{href:!0,class:!0});var g5=R(Nd);Lg=L(g5,"STRONG",{});var _5=R(Lg);V0=te(_5,"Statistical bulletins"),_5.forEach(T),g5.forEach(T),ex.forEach(T),v5.forEach(T),F0=be(Ov),qt(Zf.$$.fragment,Ov),Ov.forEach(T),N0=be(Qh),Uh=L(Qh,"DIV",{class:!0});var Vv=R(Uh);Fu=L(Vv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var b5=R(Fu);Yp=L(b5,"DIV",{class:!0,style:!0});var tx=R(Yp);U0=te(tx,"Hours worked per week"),Ud=L(tx,"SPAN",{style:!0});var YI=R(Ud);YI.forEach(T),tx.forEach(T),b5.forEach(T),q0=be(Vv),qd=L(Vv,"DIV",{class:!0,id:!0});var x5=R(qd);jd=L(x5,"DIV",{class:!0});var rx=R(jd);j0=te(rx,"The number of hours that a person, aged 16 and over in employment in the week before the census, worked in their main job. This includes paid and unpaid overtime. "),Zd=L(rx,"A",{href:!0,class:!0});var w5=R(Zd);Rg=L(w5,"STRONG",{});var E5=R(Rg);Z0=te(E5,"Statistical bulletins"),E5.forEach(T),w5.forEach(T),rx.forEach(T),x5.forEach(T),G0=be(Vv),qt(Gf.$$.fragment,Vv),Vv.forEach(T),K0=be(Qh),qh=L(Qh,"DIV",{class:!0});var Fv=R(qh);Nu=L(Fv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var S5=R(Nu);Jp=L(S5,"DIV",{class:!0,style:!0});var ix=R(Jp);H0=te(ix,"Industry of employment"),Gd=L(ix,"SPAN",{style:!0});var JI=R(Gd);JI.forEach(T),ix.forEach(T),S5.forEach(T),X0=be(Fv),Kd=L(Fv,"DIV",{class:!0,id:!0});var k5=R(Kd);Hd=L(k5,"DIV",{class:!0});var nx=R(Hd);W0=te(nx,"The classification of people aged 16 and over in employment by the industry they work in. This relates to their main job and is determined by the response to the census question asking for a description of the main activity of the business of the person's employer (or own business if self-employed). The responses are coded to a modified version of the UK Standard Industrial Classification of Economic Activities 2007 - UK SIC (2007). "),Xd=L(nx,"A",{href:!0,class:!0});var I5=R(Xd);Bg=L(I5,"STRONG",{});var T5=R(Bg);Y0=te(T5,"Statistical bulletins"),T5.forEach(T),I5.forEach(T),nx.forEach(T),k5.forEach(T),J0=be(Fv),qt(Kf.$$.fragment,Fv),Fv.forEach(T),Q0=be(Qh),jh=L(Qh,"DIV",{class:!0});var Nv=R(jh);Uu=L(Nv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var A5=R(Uu);Qp=L(A5,"DIV",{class:!0,style:!0});var ax=R(Qp);$0=te(ax,"Occupation"),Wd=L(ax,"SPAN",{style:!0});var QI=R(Wd);QI.forEach(T),ax.forEach(T),A5.forEach(T),e1=be(Nv),Yd=L(Nv,"DIV",{class:!0,id:!0});var z5=R(Yd);Jd=L(z5,"DIV",{class:!0});var ox=R(Jd);t1=te(ox,"The classification of people aged 16 and over in employment by the occupation they work in. A person's occupation is coded from the response to the question asking for the full title of the main job and the description of what is done in that job, including any supervisory or management responsibilities. It is coded to the 2020 edition of the Standard Occupational Classification (SOC2020). "),Qd=L(ox,"A",{href:!0,class:!0});var P5=R(Qd);Og=L(P5,"STRONG",{});var C5=R(Og);r1=te(C5,"Statistical bulletins"),C5.forEach(T),P5.forEach(T),ox.forEach(T),z5.forEach(T),i1=be(Nv),qt(Hf.$$.fragment,Nv),Nv.forEach(T),Qh.forEach(T),ny.forEach(T),c5.forEach(T),O_.forEach(T),n1=be(sn),Xf=L(sn,"DIV",{class:!0});var V_=R(Xf);$d=L(V_,"H2",{class:!0,id:!0});var D5=R($d);Cc=L(D5,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var M5=R(Cc);Jy=L(M5,"SPAN",{class:!0});var L5=R(Jy);a1=te(L5,"Travel to Work or Study"),L5.forEach(T),M5.forEach(T),D5.forEach(T),o1=be(V_),Wf=L(V_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var R5=R(Wf);Dc=L(R5,"DIV",{class:!0});var ay=R(Dc);s1=te(ay,"Census 2021 - "),d_=te(ay,Vg),l1=te(ay," - "),Qy=L(ay,"SPAN",{class:!0});var B5=R(Qy);u1=te(B5,"Method of travel to work or study, Distance to place of work or study"),B5.forEach(T),c1=be(ay),co=L(ay,"DIV",{class:!0});var $h=R(co);Zh=L($h,"DIV",{class:!0});var Uv=R(Zh);qu=L(Uv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var O5=R(qu);$p=L(O5,"DIV",{class:!0,style:!0});var sx=R($p);h1=te(sx,"Method of travel to work"),em=L(sx,"SPAN",{style:!0});var $I=R(em);$I.forEach(T),sx.forEach(T),O5.forEach(T),p1=be(Uv),tm=L(Uv,"DIV",{class:!0,id:!0});var V5=R(tm);rm=L(V5,"DIV",{class:!0});var lx=R(rm);f1=te(lx,`The method of travel used for the longest part, by distance, of the usual journey to work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment.\r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),im=L(lx,"A",{href:!0,class:!0});var F5=R(im);Fg=L(F5,"STRONG",{});var N5=R(Fg);d1=te(N5,"Statistical bulletins"),N5.forEach(T),F5.forEach(T),lx.forEach(T),V5.forEach(T),m1=be(Uv),qt(Yf.$$.fragment,Uv),Uv.forEach(T),y1=be($h),Gh=L($h,"DIV",{class:!0});var qv=R(Gh);ju=L(qv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var U5=R(ju);ef=L(U5,"DIV",{class:!0,style:!0});var ux=R(ef);v1=te(ux,"Method of travel to study"),nm=L(ux,"SPAN",{style:!0});var e3=R(nm);e3.forEach(T),ux.forEach(T),U5.forEach(T),g1=be(qv),am=L(qv,"DIV",{class:!0,id:!0});var q5=R(am);om=L(q5,"DIV",{class:!0});var cx=R(om);_1=te(cx,`The method of travel used for the longest part, by distance, of the usual journey to place of study (including school). This topic is applicable to people of primary school age and over in full-time education. \r
                                        'Other' includes car or van pool; taxi; motorcycle, scooter or moped; and other method. `),sm=L(cx,"A",{href:!0,class:!0});var j5=R(sm);Ng=L(j5,"STRONG",{});var Z5=R(Ng);b1=te(Z5,"Statistical bulletins"),Z5.forEach(T),j5.forEach(T),cx.forEach(T),q5.forEach(T),x1=be(qv),qt(Jf.$$.fragment,qv),qv.forEach(T),w1=be($h),Ug=L($h,"DIV",{class:!0});var t3=R(Ug);t3.forEach(T),E1=be($h),Kh=L($h,"DIV",{class:!0});var jv=R(Kh);Zu=L(jv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var G5=R(Zu);tf=L(G5,"DIV",{class:!0,style:!0});var hx=R(tf);S1=te(hx,"Distance to place of work"),lm=L(hx,"SPAN",{style:!0});var r3=R(lm);r3.forEach(T),hx.forEach(T),G5.forEach(T),k1=be(jv),um=L(jv,"DIV",{class:!0,id:!0});var K5=R(um);cm=L(K5,"DIV",{class:!0});var px=R(cm);I1=te(px,"The distance to place of work is calculated as the straight line distance in kilometres between place of residence and place of work. This topic is applicable to people aged 16 and over (excluding full-time students) in employment."),hm=L(px,"A",{href:!0,class:!0});var H5=R(hm);qg=L(H5,"STRONG",{});var X5=R(qg);T1=te(X5,"Statistical bulletins"),X5.forEach(T),H5.forEach(T),px.forEach(T),K5.forEach(T),A1=be(jv),qt(Qf.$$.fragment,jv),jv.forEach(T),z1=be($h),Hh=L($h,"DIV",{class:!0});var Zv=R(Hh);Gu=L(Zv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var W5=R(Gu);rf=L(W5,"DIV",{class:!0,style:!0});var fx=R(rf);P1=te(fx,"Distance to place of study"),pm=L(fx,"SPAN",{style:!0});var i3=R(pm);i3.forEach(T),fx.forEach(T),W5.forEach(T),C1=be(Zv),fm=L(Zv,"DIV",{class:!0,id:!0});var Y5=R(fm);dm=L(Y5,"DIV",{class:!0});var dx=R(dm);D1=te(dx,"The distance to place of study (including school) is calculated as the straight line distance in kilometres between place of residence and place of study. This topic is applicable to people of primary school age and over in full-time education. "),mm=L(dx,"A",{href:!0,class:!0});var J5=R(mm);jg=L(J5,"STRONG",{});var Q5=R(jg);M1=te(Q5,"Statistical bulletins"),Q5.forEach(T),J5.forEach(T),dx.forEach(T),Y5.forEach(T),L1=be(Zv),qt($f.$$.fragment,Zv),Zv.forEach(T),$h.forEach(T),ay.forEach(T),R5.forEach(T),V_.forEach(T),R1=be(sn),ed=L(sn,"DIV",{class:!0});var F_=R(ed);ym=L(F_,"H2",{class:!0,id:!0});var $5=R(ym);Mc=L($5,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var eS=R(Mc);$y=L(eS,"SPAN",{class:!0});var tS=R($y);B1=te(tS,"Migration"),tS.forEach(T),eS.forEach(T),$5.forEach(T),O1=be(F_),td=L(F_,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var rS=R(td);Lc=L(rS,"DIV",{class:!0});var oy=R(Lc);V1=te(oy,"Census 2021 - "),m_=te(oy,Zg),F1=te(oy," - "),ev=L(oy,"SPAN",{class:!0});var iS=R(ev);N1=te(iS,"Address one year ago, Year of arrival to live in NI"),iS.forEach(T),U1=be(oy),ru=L(oy,"DIV",{class:!0});var Gv=R(ru);Xh=L(Gv,"DIV",{class:!0});var Kv=R(Xh);Ku=L(Kv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var nS=R(Ku);nf=L(nS,"DIV",{class:!0,style:!0});var mx=R(nf);q1=te(mx,"Address one year ago"),vm=L(mx,"SPAN",{style:!0});var n3=R(vm);n3.forEach(T),mx.forEach(T),nS.forEach(T),j1=be(Kv),gm=L(Kv,"DIV",{class:!0,id:!0});var aS=R(gm);_m=L(aS,"DIV",{class:!0});var yx=R(_m);Z1=te(yx,"Address one year ago refers to the place of usual residence for a person 12 months before 21 March 2021. This topic is applicable to people aged 1 and over. "),bm=L(yx,"A",{href:!0,class:!0});var oS=R(bm);Gg=L(oS,"STRONG",{});var sS=R(Gg);G1=te(sS,"Statistical bulletins"),sS.forEach(T),oS.forEach(T),yx.forEach(T),aS.forEach(T),K1=be(Kv),qt(rd.$$.fragment,Kv),Kv.forEach(T),H1=be(Gv),Wh=L(Gv,"DIV",{class:!0});var Hv=R(Wh);Hu=L(Hv,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var lS=R(Hu);af=L(lS,"DIV",{class:!0,style:!0});var vx=R(af);X1=te(vx,"Year of arrival to live in NI"),xm=L(vx,"SPAN",{style:!0});var a3=R(xm);a3.forEach(T),vx.forEach(T),lS.forEach(T),W1=be(Hv),wm=L(Hv,"DIV",{class:!0,id:!0});var uS=R(wm);Em=L(uS,"DIV",{class:!0});var gx=R(Em);Y1=te(gx,"The year that people who were born outside Northern Ireland arrived to live in Northern Ireland. "),Sm=L(gx,"A",{href:!0,class:!0});var cS=R(Sm);Kg=L(cS,"STRONG",{});var hS=R(Kg);J1=te(hS,"Statistical bulletins"),hS.forEach(T),cS.forEach(T),gx.forEach(T),uS.forEach(T),Q1=be(Hv),qt(id.$$.fragment,Hv),Hv.forEach(T),$1=be(Gv),Hg=L(Gv,"DIV",{class:!0});var o3=R(Hg);o3.forEach(T),Gv.forEach(T),oy.forEach(T),rS.forEach(T),F_.forEach(T),sn.forEach(T),this.h()},h(){S(x,"href",rp+"/"),S(x,"sveltekit:noscroll",""),S(x,"class","svelte-p0yy5r"),o.a=P,S(y,"class","text-small"),S(U,"class","text-big title svelte-p0yy5r"),S(we,"class","text-bold"),ie(we,"font-size","0.85em"),S(lr,"class","btn svelte-p0yy5r"),ie(lr,"width","33%"),S(lr,"title","Click to print this page to pdf or printer"),S(lr,"onclick","window.print();return false;"),S(Er,"class","btn svelte-p0yy5r"),ie(Er,"width","33%"),S(Er,"alt","Return to the landing page"),S(Er,"onclick","window.location.href='"+rp+"';"),S(fr,"class","btn svelte-p0yy5r"),ie(fr,"width","30%"),S(fr,"type","share"),S(fr,"alt","Share this page"),S(rt,"width","100%"),ie(Qe,"width","350px"),ie(Qe,"padding-top","5px"),S(Qe,"class","svelte-p0yy5r"),wi(Qe,"float-right",u[7]>1),S(h,"class","grid mtl svelte-p0yy5r"),ie(oi,"margin","0 0 10px 0"),ie(oi,"line-height","1.78"),S(oi,"class","svelte-p0yy5r"),S(vn,"class","div-grey-box svelte-p0yy5r"),ie(vn,"line-height","1.3"),ie(hi,"color","gray"),ie(hi,"font-size","14pt"),S(Wi,"class","blocktitle"),ie(Wi,"margin","0"),ie(Wi,"width","100%"),S(Lt,"class","row"),ie(Lt,"display","flex"),ie(Lt,"cursor","pointer"),S(Lt,"data-bs-toggle","collapse"),S(Lt,"data-bs-target","#pop-info"),S(Lt,"aria-expanded","false"),S(Lt,"aria-controls","pop-info"),S(mi,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(mi,"class","svelte-p0yy5r"),S(Mr,"class","card card-body svelte-p0yy5r"),S(Ei,"class","collapse svelte-p0yy5r"),S(Ei,"id","pop-info"),S(Kr,"class","text-big"),ie(Kr,"font-size","2.8em"),S(Vr,"class","div-grey-box svelte-p0yy5r"),ie(la,"color","gray"),ie(la,"font-size","14pt"),S(gn,"class","blocktitle"),ie(gn,"margin","0"),ie(gn,"width","100%"),S(cn,"class","row"),ie(cn,"display","flex"),ie(cn,"cursor","pointer"),S(cn,"data-bs-toggle","collapse"),S(cn,"data-bs-target","#households-info"),S(cn,"aria-expanded","false"),S(cn,"aria-controls","households-info"),S(Jn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Jn,"class","svelte-p0yy5r"),S(_n,"class","card card-body svelte-p0yy5r"),S(Nn,"class","collapse svelte-p0yy5r"),S(Nn,"id","households-info"),S(G,"class","text-big"),ie(G,"font-size","2.8em"),S(pi,"class","div-grey-box svelte-p0yy5r"),S(Ti,"id","grid"),S(Ti,"class","grid mt svelte-p0yy5r"),S(Ne,"class","svelte-p0yy5r"),ie(Se,"grid-column","span "+u[7]),S(Le,"id","map"),ie(Le,"padding-right","45px"),ie(Le,"grid-column","span "+(u[7]==2?2:u[7]&&u[7]>2?u[7]-1:1)),S(Le,"class","svelte-p0yy5r"),S(oe,"class","grid mt svelte-p0yy5r"),Ho(()=>u[33].call(oe)),S(tr,"class","accordion-button-title"),S(Ct,"class","accordion-button collapsed"),S(Ct,"type","button"),S(Ct,"data-bs-toggle","collapse"),S(Ct,"data-bs-target","#panelsStayOpen-collapseZero"),S(Ct,"aria-expanded","false"),S(Ct,"aria-controls","panelsStayOpen-collapseZero"),S(or,"class","accordion-header svelte-p0yy5r"),S(or,"id","panelsStayOpen-headingZero"),S(ha,"class","accordion-button-title-sub"),ie(Hr,"color","gray"),ie(Hr,"font-size","14pt"),S(Un,"class","blocktitle"),ie(Un,"margin","0"),ie(Un,"width","100%"),S(mr,"class","row"),ie(mr,"display","flex"),ie(mr,"cursor","pointer"),S(mr,"data-bs-toggle","collapse"),S(mr,"data-bs-target","#location-info"),S(mr,"aria-expanded","false"),S(mr,"aria-controls","location-info"),S(hn,"class","card card-body svelte-p0yy5r"),S(xn,"class","collapse svelte-p0yy5r"),S(xn,"id","location-info"),S(Ji,"class","div-grey-box svelte-p0yy5r"),ie(Ji,"line-height","1.3"),ie(es,"color","gray"),ie(es,"font-size","14pt"),S(fi,"class","blocktitle"),ie(fi,"margin","0"),ie(fi,"width","100%"),S(zi,"class","row"),ie(zi,"display","flex"),ie(zi,"cursor","pointer"),S(zi,"data-bs-toggle","collapse"),S(zi,"data-bs-target","#Area-info"),S(zi,"aria-expanded","false"),S(zi,"aria-controls","Area-info"),S(ts,"class","card card-body svelte-p0yy5r"),S(vl,"class","collapse svelte-p0yy5r"),S(vl,"id","Area-info"),S(rs,"class","text-big"),ie(rs,"font-size","2.8em"),S(Xr,"class","div-grey-box svelte-p0yy5r"),ie(Ni,"color","gray"),ie(Ni,"font-size","14pt"),S(qn,"class","blocktitle"),ie(qn,"margin","0"),ie(qn,"width","100%"),S(Si,"class","row"),ie(Si,"display","flex"),ie(Si,"cursor","pointer"),S(Si,"data-bs-toggle","collapse"),S(Si,"data-bs-target","#popden-info"),S(Si,"aria-expanded","false"),S(Si,"aria-controls","popden-info"),S(Pn,"class","card card-body svelte-p0yy5r"),S(pa,"class","collapse svelte-p0yy5r"),S(pa,"id","popden-info"),S(lu,"class","text-big"),ie(lu,"font-size","2.8em"),S(wn,"class","div-grey-box svelte-p0yy5r"),S(bn,"class","grid mt svelte-p0yy5r"),Ho(()=>u[34].call(bn)),S(dr,"class","accordion-body"),S(rr,"id","panelsStayOpen-collapseZero"),S(rr,"class","accordion-collapse collapse svelte-p0yy5r"),S(rr,"aria-labelledby","panelsStayOpen-headingZero"),S(Gt,"class","accordion-item"),S(Jc,"class","accordion-button-title"),S(vo,"class","accordion-button collapsed"),S(vo,"type","button"),S(vo,"data-bs-toggle","collapse"),S(vo,"data-bs-target","#panelsStayOpen-collapseOne"),S(vo,"aria-expanded","false"),S(vo,"aria-controls","panelsStayOpen-collapseOne"),S(uu,"class","accordion-header svelte-p0yy5r"),S(uu,"id","panelsStayOpen-headingOne"),S(_o,"class","accordion-button-title-sub"),ie(tc,"color","gray"),ie(tc,"font-size","14pt"),S(Os,"class","blocktitle"),ie(Os,"margin","0"),ie(Os,"width","100%"),S($a,"class","row"),ie($a,"display","flex"),ie($a,"cursor","pointer"),S($a,"data-bs-toggle","collapse"),S($a,"data-bs-target","#broadagebands-info"),S($a,"aria-expanded","false"),S($a,"aria-controls","broadagebands-info"),S(eo,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(eo,"class","svelte-p0yy5r"),S(hu,"class","card card-body svelte-p0yy5r"),S(cu,"class","collapse svelte-p0yy5r"),S(cu,"id","broadagebands-info"),S(El,"class","chart svelte-p0yy5r"),ie(El,"height","100px"),ie(El,"padding-bottom","5px"),S(Qi,"class","div-grey-box svelte-p0yy5r"),S(Sr,"class","blocktitle"),ie(Sr,"margin","0"),ie(Sr,"width","100%"),S(xo,"class","div-grey-box svelte-p0yy5r"),ie(as,"color","gray"),ie(as,"font-size","14pt"),S(wo,"class","blocktitle"),ie(wo,"margin","0"),ie(wo,"width","100%"),S(ro,"class","row"),ie(ro,"display","flex"),ie(ro,"cursor","pointer"),S(ro,"data-bs-toggle","collapse"),S(ro,"data-bs-target","#hhsize-info"),S(ro,"aria-expanded","false"),S(ro,"aria-controls","hhsize-info"),S($n,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S($n,"class","svelte-p0yy5r"),S(fu,"class","card card-body svelte-p0yy5r"),S(Eo,"class","collapse svelte-p0yy5r"),S(Eo,"id","hhsize-info"),S(Fs,"class","div-grey-box svelte-p0yy5r"),S(Cn,"class","grid mt svelte-p0yy5r"),Ho(()=>u[35].call(Cn)),S(si,"class","accordion-body"),S(_l,"id","panelsStayOpen-collapseOne"),S(_l,"class","accordion-collapse collapse svelte-p0yy5r"),S(_l,"aria-labelledby","panelsStayOpen-headingOne"),S(Rs,"class","accordion-item"),S(kl,"class","accordion-button-title"),S(os,"class","accordion-button collapsed"),S(os,"type","button"),S(os,"data-bs-toggle","collapse"),S(os,"data-bs-target","#panelsStayOpen-collapseTwo"),S(os,"aria-expanded","false"),S(os,"aria-controls","panelsStayOpen-collapseTwo"),S(Us,"class","accordion-header svelte-p0yy5r"),S(Us,"id","panelsStayOpen-headingTwo"),S(ac,"class","accordion-button-title-sub"),ie(Mn,"color","gray"),ie(Mn,"font-size","14pt"),S(Qt,"class","blocktitle"),ie(Qt,"margin","0"),ie(Qt,"width","100%"),S(Dn,"class","row"),ie(Dn,"display","flex"),ie(Dn,"cursor","pointer"),S(Dn,"data-bs-toggle","collapse"),S(Dn,"data-bs-target","#cob-info"),S(Dn,"aria-expanded","false"),S(Dn,"aria-controls","cob-info"),S(ls,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ls,"class","svelte-p0yy5r"),S(oc,"class","card card-body svelte-p0yy5r"),S(ss,"class","collapse svelte-p0yy5r"),S(ss,"id","cob-info"),S(da,"class","div-grey-box svelte-p0yy5r"),ie(ko,"color","gray"),ie(ko,"font-size","14pt"),S($i,"class","blocktitle"),ie($i,"margin","0"),ie($i,"width","100%"),S(it,"class","row"),ie(it,"display","flex"),ie(it,"cursor","pointer"),S(it,"data-bs-toggle","collapse"),S(it,"data-bs-target","#passport-info"),S(it,"aria-expanded","false"),S(it,"aria-controls","passport-info"),S(qs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(qs,"class","svelte-p0yy5r"),S(Je,"class","card card-body svelte-p0yy5r"),S(zl,"class","collapse svelte-p0yy5r"),S(zl,"id","passport-info"),S(Zr,"class","div-grey-box svelte-p0yy5r"),ie(Pl,"color","gray"),ie(Pl,"font-size","14pt"),S(ps,"class","blocktitle"),ie(ps,"font-size","1.02em"),ie(ps,"margin","0"),ie(ps,"width","100%"),S(En,"class","row"),ie(En,"display","flex"),ie(En,"cursor","pointer"),S(En,"data-bs-toggle","collapse"),S(En,"data-bs-target","#natid-info"),S(En,"aria-expanded","false"),S(En,"aria-controls","natid-info"),S(jn,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(jn,"class","svelte-p0yy5r"),S(Wt,"class","card card-body svelte-p0yy5r"),S(Ln,"class","collapse svelte-p0yy5r"),S(Ln,"id","natid-info"),S(qi,"class","div-grey-box svelte-p0yy5r"),S(fa,"class","grid mt svelte-p0yy5r"),Ho(()=>u[36].call(fa)),S(Oa,"class","accordion-body"),S(Il,"id","panelsStayOpen-collapseTwo"),S(Il,"class","accordion-collapse collapse svelte-p0yy5r"),S(Il,"aria-labelledby","panelsStayOpen-headingTwo"),S(Ns,"class","accordion-item"),S(fn,"class","accordion-button-title"),S(Fa,"class","accordion-button collapsed"),S(Fa,"type","button"),S(Fa,"data-bs-toggle","collapse"),S(Fa,"data-bs-target","#panelsStayOpen-collapseThree"),S(Fa,"aria-expanded","false"),S(Fa,"aria-controls","panelsStayOpen-collapseThree"),S(dt,"class","accordion-header svelte-p0yy5r"),S(dt,"id","panelsStayOpen-headingThree"),S(To,"class","accordion-button-title-sub"),ie(ds,"color","gray"),ie(ds,"font-size","14pt"),S(Ao,"class","blocktitle"),ie(Ao,"margin","0"),ie(Ao,"width","100%"),S(dn,"class","row"),ie(dn,"display","flex"),ie(dn,"cursor","pointer"),S(dn,"data-bs-toggle","collapse"),S(dn,"data-bs-target","#mainlang-info"),S(dn,"aria-expanded","false"),S(dn,"aria-controls","mainlang-info"),S(Na,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Na,"class","svelte-p0yy5r"),S(Dl,"class","card card-body svelte-p0yy5r"),S(oo,"class","collapse svelte-p0yy5r"),S(oo,"id","mainlang-info"),S(ka,"class","div-grey-box svelte-p0yy5r"),ie(a,"color","gray"),ie(a,"font-size","14pt"),S(n,"class","blocktitle"),ie(n,"margin","0"),ie(n,"width","100%"),S(Ia,"class","row"),ie(Ia,"display","flex"),ie(Ia,"cursor","pointer"),S(Ia,"data-bs-toggle","collapse"),S(Ia,"data-bs-target","#irish-info"),S(Ia,"aria-expanded","false"),S(Ia,"aria-controls","irish-info"),S(B,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(B,"class","svelte-p0yy5r"),S(k,"class","card card-body svelte-p0yy5r"),S(E,"class","collapse svelte-p0yy5r"),S(E,"id","irish-info"),S(zo,"class","div-grey-box svelte-p0yy5r"),ie(ge,"color","gray"),ie(ge,"font-size","14pt"),S(ne,"class","blocktitle"),ie(ne,"margin","0"),ie(ne,"width","100%"),S(de,"class","row"),ie(de,"display","flex"),ie(de,"cursor","pointer"),S(de,"data-bs-toggle","collapse"),S(de,"data-bs-target","#ulster-info"),S(de,"aria-expanded","false"),S(de,"aria-controls","ulster-info"),S(He,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(He,"class","svelte-p0yy5r"),S(Oe,"class","card card-body svelte-p0yy5r"),S(Ce,"class","collapse svelte-p0yy5r"),S(Ce,"id","ulster-info"),S(ae,"class","div-grey-box svelte-p0yy5r"),S(gi,"class","grid mt svelte-p0yy5r"),Ho(()=>u[37].call(gi)),S(ao,"class","accordion-body"),S(ta,"id","panelsStayOpen-collapseThree"),S(ta,"class","accordion-collapse collapse svelte-p0yy5r"),S(ta,"aria-labelledby","panelsStayOpen-headingThree"),S(yt,"class","accordion-item"),S(Pt,"class","accordion-button-title"),S(Rt,"class","accordion-button collapsed"),S(Rt,"type","button"),S(Rt,"data-bs-toggle","collapse"),S(Rt,"data-bs-target","#panelsStayOpen-collapseFour"),S(Rt,"aria-expanded","false"),S(Rt,"aria-controls","panelsStayOpen-collapseFour"),S(zt,"class","accordion-header svelte-p0yy5r"),S(zt,"id","panelsStayOpen-headingFour"),S(Yr,"class","accordion-button-title-sub"),ie(ms,"color","gray"),ie(ms,"font-size","14pt"),S(Rn,"class","blocktitle"),ie(Rn,"margin","0"),ie(Rn,"width","100%"),S(_i,"class","row"),ie(_i,"display","flex"),ie(_i,"cursor","pointer"),S(_i,"data-bs-toggle","collapse"),S(_i,"data-bs-target","#rel-info"),S(_i,"aria-expanded","false"),S(_i,"aria-controls","rel-info"),S(vs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(vs,"class","svelte-p0yy5r"),S(ys,"class","card card-body svelte-p0yy5r"),S(Po,"class","collapse svelte-p0yy5r"),S(Po,"id","rel-info"),S(ra,"class","div-grey-box svelte-p0yy5r"),ie(hc,"color","gray"),ie(hc,"font-size","14pt"),S(ji,"class","blocktitle"),ie(ji,"margin","0"),ie(ji,"width","100%"),S(Ci,"class","row"),ie(Ci,"display","flex"),ie(Ci,"cursor","pointer"),S(Ci,"data-bs-toggle","collapse"),S(Ci,"data-bs-target","#relbup-info"),S(Ci,"aria-expanded","false"),S(Ci,"aria-controls","relbup-info"),S(Xs,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Xs,"class","svelte-p0yy5r"),S(_u,"class","card card-body svelte-p0yy5r"),S(_s,"class","collapse svelte-p0yy5r"),S(_s,"id","relbup-info"),S(nr,"class","div-grey-box svelte-p0yy5r"),ie(dc,"color","gray"),ie(dc,"font-size","14pt"),S(fc,"class","blocktitle"),ie(fc,"margin","0"),ie(fc,"width","100%"),S(Ws,"class","row"),ie(Ws,"display","flex"),ie(Ws,"cursor","pointer"),S(Ws,"data-bs-toggle","collapse"),S(Ws,"data-bs-target","#ethnic-info"),S(Ws,"aria-expanded","false"),S(Ws,"aria-controls","ethnic-info"),S(yp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(yp,"class","svelte-p0yy5r"),S(Do,"class","card card-body svelte-p0yy5r"),S(lh,"class","collapse svelte-p0yy5r"),S(lh,"id","ethnic-info"),S(xu,"class","div-grey-box svelte-p0yy5r"),S(ui,"class","grid mt svelte-p0yy5r"),Ho(()=>u[38].call(ui)),S(Et,"class","accordion-body"),S(Tt,"id","panelsStayOpen-collapseFour"),S(Tt,"class","accordion-collapse collapse svelte-p0yy5r"),S(Tt,"aria-labelledby","panelsStayOpen-headingFour"),S(ot,"class","accordion-item"),S(Ef,"class","accordion-button-title"),S(Za,"class","accordion-button collapsed"),S(Za,"type","button"),S(Za,"data-bs-toggle","collapse"),S(Za,"data-bs-target","#panelsStayOpen-collapseFive"),S(Za,"aria-expanded","false"),S(Za,"aria-controls","panelsStayOpen-collapseFive"),S(vp,"class","accordion-header svelte-p0yy5r"),S(vp,"id","panelsStayOpen-headingFive"),S(Eu,"class","accordion-button-title-sub"),ie(vc,"color","gray"),ie(vc,"font-size","14pt"),S(Js,"class","blocktitle"),ie(Js,"margin","0"),ie(Js,"width","100%"),S(Ys,"class","row"),ie(Ys,"display","flex"),ie(Ys,"cursor","pointer"),S(Ys,"data-bs-toggle","collapse"),S(Ys,"data-bs-target","#gen-health-info"),S(Ys,"aria-expanded","false"),S(Ys,"aria-controls","gen-health"),S(ch,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(ch,"class","svelte-p0yy5r"),S(_p,"class","card card-body svelte-p0yy5r"),S(gp,"class","collapse svelte-p0yy5r"),S(gp,"id","gen-health-info"),S(Lo,"class","div-grey-box svelte-p0yy5r"),ie(_c,"color","gray"),ie(_c,"font-size","14pt"),S(lo,"class","blocktitle"),ie(lo,"font-size","0.87em"),ie(lo,"margin","0"),ie(lo,"width","100%"),S(Qs,"class","row"),ie(Qs,"display","flex"),ie(Qs,"cursor","pointer"),S(Qs,"data-bs-toggle","collapse"),S(Qs,"data-bs-target","#lti-info"),S(Qs,"aria-expanded","false"),S(Qs,"aria-controls","lti-info"),S(Rl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Rl,"class","svelte-p0yy5r"),S(xp,"class","card card-body svelte-p0yy5r"),S(bp,"class","collapse svelte-p0yy5r"),S(bp,"id","lti-info"),S(ku,"class","div-grey-box svelte-p0yy5r"),ie(ph,"color","gray"),ie(ph,"font-size","14pt"),S(Ol,"class","blocktitle"),ie(Ol,"font-size","1.02em"),ie(Ol,"margin","0"),ie(Ol,"width","100%"),S(bi,"class","row"),ie(bi,"display","flex"),ie(bi,"cursor","pointer"),S(bi,"data-bs-toggle","collapse"),S(bi,"data-bs-target","#lt-cond-info"),S(bi,"aria-expanded","false"),S(bi,"aria-controls","lt-cond-info"),S(Sp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Sp,"class","svelte-p0yy5r"),S(Ep,"class","card card-body svelte-p0yy5r"),S(wp,"class","collapse svelte-p0yy5r"),S(wp,"id","lt-cond-info"),S(Bl,"class","div-grey-box svelte-p0yy5r"),ie(dh,"color","gray"),ie(dh,"font-size","14pt"),S(_a,"class","blocktitle"),ie(_a,"font-size","1.02em"),ie(_a,"margin","0"),ie(_a,"width","100%"),S(ws,"class","row"),ie(ws,"display","flex"),ie(ws,"cursor","pointer"),S(ws,"data-bs-toggle","collapse"),S(ws,"data-bs-target","#unpaid-info"),S(ws,"aria-expanded","false"),S(ws,"aria-controls","unpaid-info"),S(Ap,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ap,"class","svelte-p0yy5r"),S(Tp,"class","card card-body svelte-p0yy5r"),S(Ip,"class","collapse svelte-p0yy5r"),S(Ip,"id","unpaid-info"),S(br,"class","div-grey-box svelte-p0yy5r"),S(so,"class","grid mt svelte-p0yy5r"),Ho(()=>u[39].call(so)),S(Mo,"class","accordion-body"),S(mc,"id","panelsStayOpen-collapseFive"),S(mc,"class","accordion-collapse collapse svelte-p0yy5r"),S(mc,"aria-labelledby","panelsStayOpen-headingFive"),S(wu,"class","accordion-item"),S(Cp,"class","accordion-button-title"),S(Fl,"class","accordion-button collapsed"),S(Fl,"type","button"),S(Fl,"data-bs-toggle","collapse"),S(Fl,"data-bs-target","#panelsStayOpen-collapseSix"),S(Fl,"aria-expanded","false"),S(Fl,"aria-controls","panelsStayOpen-collapseSix"),S(Pp,"class","accordion-header svelte-p0yy5r"),S(Pp,"id","panelsStayOpen-headingSix"),S(Gn,"class","accordion-button-title-sub"),ie(vh,"color","gray"),ie(vh,"font-size","14pt"),S(Ul,"class","blocktitle"),ie(Ul,"margin","0"),ie(Ul,"width","100%"),S(Ro,"class","row"),ie(Ro,"display","flex"),ie(Ro,"cursor","pointer"),S(Ro,"data-bs-toggle","collapse"),S(Ro,"data-bs-target","#acc-type-info"),S(Ro,"aria-expanded","false"),S(Ro,"aria-controls","acc-type-info"),S(bh,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(bh,"class","svelte-p0yy5r"),S(_h,"class","card card-body svelte-p0yy5r"),S(gh,"class","collapse svelte-p0yy5r"),S(gh,"id","acc-type-info"),S(Nl,"class","div-grey-box svelte-p0yy5r"),ie(Iu,"color","gray"),ie(Iu,"font-size","14pt"),S(el,"class","blocktitle"),ie(el,"margin","0"),ie(el,"width","100%"),S(Es,"class","row"),ie(Es,"display","flex"),ie(Es,"cursor","pointer"),S(Es,"data-bs-toggle","collapse"),S(Es,"data-bs-target","#adapt-info"),S(Es,"aria-expanded","false"),S(Es,"aria-controls","adapt-info"),S(Rp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Rp,"class","svelte-p0yy5r"),S(Lp,"class","card card-body svelte-p0yy5r"),S(tl,"class","collapse svelte-p0yy5r"),S(tl,"id","adapt-info"),S(ql,"class","div-grey-box svelte-p0yy5r"),ie(zu,"color","gray"),ie(zu,"font-size","14pt"),S(xc,"class","blocktitle"),ie(xc,"margin","0"),ie(xc,"width","100%"),S(rl,"class","row"),ie(rl,"display","flex"),ie(rl,"cursor","pointer"),S(rl,"data-bs-toggle","collapse"),S(rl,"data-bs-target","#heat-info"),S(rl,"aria-expanded","false"),S(rl,"aria-controls","heat-info"),S(Bp,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Bp,"class","svelte-p0yy5r"),S(Zl,"class","card card-body svelte-p0yy5r"),S(il,"class","collapse svelte-p0yy5r"),S(il,"id","heat-info"),S(jl,"class","div-grey-box svelte-p0yy5r"),ie(Sh,"color","gray"),ie(Sh,"font-size","14pt"),S(wc,"class","blocktitle"),ie(wc,"margin","0"),ie(wc,"width","100%"),S(al,"class","row"),ie(al,"display","flex"),ie(al,"cursor","pointer"),S(al,"data-bs-toggle","collapse"),S(al,"data-bs-target","#renew-info"),S(al,"aria-expanded","false"),S(al,"aria-controls","renew-info"),S(Sc,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Sc,"class","svelte-p0yy5r"),S(Pu,"class","card card-body svelte-p0yy5r"),S(kh,"class","collapse svelte-p0yy5r"),S(kh,"id","renew-info"),S(nl,"class","div-grey-box svelte-p0yy5r"),ie(ks,"color","gray"),ie(ks,"font-size","14pt"),S(Kl,"class","blocktitle"),ie(Kl,"margin","0"),ie(Kl,"width","100%"),S(Ss,"class","row"),ie(Ss,"display","flex"),ie(Ss,"cursor","pointer"),S(Ss,"data-bs-toggle","collapse"),S(Ss,"data-bs-target","#tenure-info"),S(Ss,"aria-expanded","false"),S(Ss,"aria-controls","tenure-info"),S(Du,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Du,"class","svelte-p0yy5r"),S(uo,"class","card card-body svelte-p0yy5r"),S(Hl,"class","collapse svelte-p0yy5r"),S(Hl,"id","tenure-info"),S(Gl,"class","div-grey-box svelte-p0yy5r"),ie(e,"color","gray"),ie(e,"font-size","14pt"),S(Ga,"class","blocktitle"),ie(Ga,"margin","0"),ie(Ga,"width","100%"),S(Jr,"class","row"),ie(Jr,"display","flex"),ie(Jr,"cursor","pointer"),S(Jr,"data-bs-toggle","collapse"),S(Jr,"data-bs-target","#car-info"),S(Jr,"aria-expanded","false"),S(Jr,"aria-controls","car-info"),S(v,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(v,"class","svelte-p0yy5r"),S(p,"class","card card-body svelte-p0yy5r"),S(l,"class","collapse svelte-p0yy5r"),S(l,"id","car-info"),S(ol,"class","div-grey-box svelte-p0yy5r"),S(ia,"class","grid mt svelte-p0yy5r"),Ho(()=>u[40].call(ia)),S(an,"class","accordion-body"),S($s,"id","panelsStayOpen-collapseSix"),S($s,"class","accordion-collapse collapse svelte-p0yy5r"),S($s,"aria-labelledby","panelsStayOpen-headingSix"),S(mh,"class","accordion-item"),S(Ee,"class","accordion-button-title"),S(pe,"class","accordion-button collapsed"),S(pe,"type","button"),S(pe,"data-bs-toggle","collapse"),S(pe,"data-bs-target","#panelsStayOpen-collapseSeven"),S(pe,"aria-expanded","false"),S(pe,"aria-controls","panelsStayOpen-collapseSeven"),S(ye,"class","accordion-header svelte-p0yy5r"),S(ye,"id","panelsStayOpen-headingSeven"),S(_t,"class","accordion-button-title-sub"),ie(bt,"color","gray"),ie(bt,"font-size","14pt"),S(Bt,"class","blocktitle"),ie(Bt,"margin","0"),ie(Bt,"width","100%"),S(Ft,"class","row"),ie(Ft,"display","flex"),ie(Ft,"cursor","pointer"),S(Ft,"data-bs-toggle","collapse"),S(Ft,"data-bs-target","#dep-child-info"),S(Ft,"aria-expanded","false"),S(Ft,"aria-controls","dep-child-info"),S($r,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S($r,"class","svelte-p0yy5r"),S(Gr,"class","card card-body svelte-p0yy5r"),S(Qr,"class","collapse svelte-p0yy5r"),S(Qr,"id","dep-child-info"),S(ct,"class","div-grey-box svelte-p0yy5r"),ie(yr,"color","gray"),ie(yr,"font-size","14pt"),S(Xt,"class","blocktitle"),ie(Xt,"margin","0"),ie(Xt,"width","100%"),S(ei,"class","row"),ie(ei,"display","flex"),ie(ei,"cursor","pointer"),S(ei,"data-bs-toggle","collapse"),S(ei,"data-bs-target","#hh-comp-info"),S(ei,"aria-expanded","false"),S(ei,"aria-controls","hh-comp-info"),S(Xi,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Xi,"class","svelte-p0yy5r"),S(Dr,"class","card card-body svelte-p0yy5r"),S(Hi,"class","collapse svelte-p0yy5r"),S(Hi,"id","hh-comp-info"),S(Ur,"class","div-grey-box svelte-p0yy5r"),S(Bo,"class","div-white-box"),S(wt,"class","grid mt svelte-p0yy5r"),Ho(()=>u[41].call(wt)),S(Fe,"class","accordion-body"),S(Me,"id","panelsStayOpen-collapseSeven"),S(Me,"class","accordion-collapse collapse svelte-p0yy5r"),S(Me,"aria-labelledby","panelsStayOpen-headingSeven"),S(le,"class","accordion-item"),S(Wl,"class","accordion-button-title"),S(aa,"class","accordion-button collapsed"),S(aa,"type","button"),S(aa,"data-bs-toggle","collapse"),S(aa,"data-bs-target","#panelsStayOpen-collapseEight"),S(aa,"aria-expanded","false"),S(aa,"aria-controls","panelsStayOpen-collapseEight"),S(ll,"class","accordion-header svelte-p0yy5r"),S(ll,"id","panelsStayOpen-headingEight"),S(As,"class","accordion-button-title-sub"),ie(Yl,"color","gray"),ie(Yl,"font-size","14pt"),S(zs,"class","blocktitle"),ie(zs,"font-size","0.95em"),ie(zs,"margin","0"),ie(zs,"width","100%"),S(Xa,"class","row"),ie(Xa,"display","flex"),ie(Xa,"cursor","pointer"),S(Xa,"data-bs-toggle","collapse"),S(Xa,"data-bs-target","#marital-info"),S(Xa,"aria-expanded","false"),S(Xa,"aria-controls","marital-info"),S(Jl,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Jl,"class","svelte-p0yy5r"),S(Mu,"class","card card-body svelte-p0yy5r"),S(cl,"class","collapse svelte-p0yy5r"),S(cl,"id","marital-info"),S(Fo,"class","div-grey-box svelte-p0yy5r"),S(Up,"class","div-white-box"),S(qp,"class","div-white-box"),S(Ha,"class","grid mt svelte-p0yy5r"),Ho(()=>u[42].call(Ha)),S(Vo,"class","accordion-body"),S(ul,"id","panelsStayOpen-collapseEight"),S(ul,"class","accordion-collapse collapse svelte-p0yy5r"),S(ul,"aria-labelledby","panelsStayOpen-headingEight"),S(Oo,"class","accordion-item"),S(Ps,"class","accordion-button-title"),S($l,"class","accordion-button collapsed"),S($l,"type","button"),S($l,"data-bs-toggle","collapse"),S($l,"data-bs-target","#panelsStayOpen-collapseNine"),S($l,"aria-expanded","false"),S($l,"aria-controls","panelsStayOpen-collapseNine"),S(za,"class","accordion-header svelte-p0yy5r"),S(za,"id","panelsStayOpen-headingNine"),S(Lh,"class","accordion-button-title-sub"),ie(Wn,"color","gray"),ie(Wn,"font-size","14pt"),S(Ru,"class","blocktitle"),ie(Ru,"margin","0"),ie(Ru,"width","100%"),S(Cs,"class","row"),ie(Cs,"display","flex"),ie(Cs,"cursor","pointer"),S(Cs,"data-bs-toggle","collapse"),S(Cs,"data-bs-target","#sexual-orientation-info"),S(Cs,"aria-expanded","false"),S(Cs,"aria-controls","sexual-orientation-info"),S(Ds,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Ds,"class","svelte-p0yy5r"),S(Kp,"class","card card-body svelte-p0yy5r"),S(Wa,"class","collapse svelte-p0yy5r"),S(Wa,"id","sexual-orientation-info"),S(tu,"class","div-grey-box svelte-p0yy5r"),S(Nf,"class","div-white-box"),S(Uf,"class","div-white-box"),S(No,"class","grid mt svelte-p0yy5r"),Ho(()=>u[43].call(No)),S(Xn,"class","accordion-body"),S(eu,"id","panelsStayOpen-collapseNine"),S(eu,"class","accordion-collapse collapse svelte-p0yy5r"),S(eu,"aria-labelledby","panelsStayOpen-headingNine"),S(ti,"class","accordion-item"),S(Vh,"class","accordion-button-title"),S(Ls,"class","accordion-button collapsed"),S(Ls,"type","button"),S(Ls,"data-bs-toggle","collapse"),S(Ls,"data-bs-target","#panelsStayOpen-collapseTen"),S(Ls,"aria-expanded","false"),S(Ls,"aria-controls","panelsStayOpen-collapseTen"),S(Oh,"class","accordion-header svelte-p0yy5r"),S(Oh,"id","panelsStayOpen-headingTen"),S(zc,"class","accordion-button-title-sub"),ie(Hp,"color","gray"),ie(Hp,"font-size","14pt"),S(Pc,"class","blocktitle"),ie(Pc,"margin","0"),ie(Pc,"width","100%"),S(pl,"class","row"),ie(pl,"display","flex"),ie(pl,"cursor","pointer"),S(pl,"data-bs-toggle","collapse"),S(pl,"data-bs-target","#quals-info"),S(pl,"aria-expanded","false"),S(pl,"aria-controls","quals-info"),S(Bd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Bd,"class","svelte-p0yy5r"),S(Li,"class","card card-body svelte-p0yy5r"),S(Ja,"class","collapse svelte-p0yy5r"),S(Ja,"id","quals-info"),S(Ou,"class","div-grey-box svelte-p0yy5r"),ie(Od,"color","gray"),ie(Od,"font-size","14pt"),S(Wp,"class","blocktitle"),ie(Wp,"margin","0"),ie(Wp,"width","100%"),S(Vu,"class","row"),ie(Vu,"display","flex"),ie(Vu,"cursor","pointer"),S(Vu,"data-bs-toggle","collapse"),S(Vu,"data-bs-target","#econ-act-info"),S(Vu,"aria-expanded","false"),S(Vu,"aria-controls","econ-act-info"),S(Nd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Nd,"class","svelte-p0yy5r"),S(Fd,"class","card card-body svelte-p0yy5r"),S(Vd,"class","collapse svelte-p0yy5r"),S(Vd,"id","econ-act-info"),S(Nh,"class","div-grey-box svelte-p0yy5r"),ie(Ud,"color","gray"),ie(Ud,"font-size","14pt"),S(Yp,"class","blocktitle"),ie(Yp,"margin","0"),ie(Yp,"width","100%"),S(Fu,"class","row"),ie(Fu,"display","flex"),ie(Fu,"cursor","pointer"),S(Fu,"data-bs-toggle","collapse"),S(Fu,"data-bs-target","#hours-info"),S(Fu,"aria-expanded","false"),S(Fu,"aria-controls","hours-info"),S(Zd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Zd,"class","svelte-p0yy5r"),S(jd,"class","card card-body svelte-p0yy5r"),S(qd,"class","collapse svelte-p0yy5r"),S(qd,"id","hours-info"),S(Uh,"class","div-grey-box svelte-p0yy5r"),ie(Gd,"color","gray"),ie(Gd,"font-size","14pt"),S(Jp,"class","blocktitle"),ie(Jp,"margin","0"),ie(Jp,"width","100%"),S(Nu,"class","row"),ie(Nu,"display","flex"),ie(Nu,"cursor","pointer"),S(Nu,"data-bs-toggle","collapse"),S(Nu,"data-bs-target","#industry-info"),S(Nu,"aria-expanded","false"),S(Nu,"aria-controls","industry-info"),S(Xd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Xd,"class","svelte-p0yy5r"),S(Hd,"class","card card-body svelte-p0yy5r"),S(Kd,"class","collapse svelte-p0yy5r"),S(Kd,"id","industry-info"),S(qh,"class","div-grey-box svelte-p0yy5r"),ie(Wd,"color","gray"),ie(Wd,"font-size","14pt"),S(Qp,"class","blocktitle"),ie(Qp,"margin","0"),ie(Qp,"width","100%"),S(Uu,"class","row"),ie(Uu,"display","flex"),ie(Uu,"cursor","pointer"),S(Uu,"data-bs-toggle","collapse"),S(Uu,"data-bs-target","#occupation-info"),S(Uu,"aria-expanded","false"),S(Uu,"aria-controls","occupation-info"),S(Qd,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Qd,"class","svelte-p0yy5r"),S(Jd,"class","card card-body svelte-p0yy5r"),S(Yd,"class","collapse svelte-p0yy5r"),S(Yd,"id","occupation-info"),S(jh,"class","div-grey-box svelte-p0yy5r"),S(Pa,"class","grid mt svelte-p0yy5r"),Ho(()=>u[44].call(Pa)),S(hl,"class","accordion-body"),S(Ac,"id","panelsStayOpen-collapseTen"),S(Ac,"class","accordion-collapse collapse svelte-p0yy5r"),S(Ac,"aria-labelledby","panelsStayOpen-headingTen"),S(Ya,"class","accordion-item"),S(Jy,"class","accordion-button-title"),S(Cc,"class","accordion-button collapsed"),S(Cc,"type","button"),S(Cc,"data-bs-toggle","collapse"),S(Cc,"data-bs-target","#panelsStayOpen-collapseEleven"),S(Cc,"aria-expanded","false"),S(Cc,"aria-controls","panelsStayOpen-collapseEleven"),S($d,"class","accordion-header svelte-p0yy5r"),S($d,"id","panelsStayOpen-headingEleven"),S(Qy,"class","accordion-button-title-sub"),ie(em,"color","gray"),ie(em,"font-size","14pt"),S($p,"class","blocktitle"),ie($p,"margin","0"),ie($p,"width","100%"),S(qu,"class","row"),ie(qu,"display","flex"),ie(qu,"cursor","pointer"),S(qu,"data-bs-toggle","collapse"),S(qu,"data-bs-target","#method-travel-work-info"),S(qu,"aria-expanded","false"),S(qu,"aria-controls","method-travel-work-info"),S(im,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(im,"class","svelte-p0yy5r"),S(rm,"class","card card-body svelte-p0yy5r"),S(tm,"class","collapse svelte-p0yy5r"),S(tm,"id","method-travel-work-info"),S(Zh,"class","div-grey-box svelte-p0yy5r"),ie(nm,"color","gray"),ie(nm,"font-size","14pt"),S(ef,"class","blocktitle"),ie(ef,"margin","0"),ie(ef,"width","100%"),S(ju,"class","row"),ie(ju,"display","flex"),ie(ju,"cursor","pointer"),S(ju,"data-bs-toggle","collapse"),S(ju,"data-bs-target","#method-travel-study-info"),S(ju,"aria-expanded","false"),S(ju,"aria-controls","method-travel-study-info"),S(sm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(sm,"class","svelte-p0yy5r"),S(om,"class","card card-body svelte-p0yy5r"),S(am,"class","collapse svelte-p0yy5r"),S(am,"id","method-travel-study-info"),S(Gh,"class","div-grey-box svelte-p0yy5r"),S(Ug,"class","div-white-box"),ie(lm,"color","gray"),ie(lm,"font-size","14pt"),S(tf,"class","blocktitle"),ie(tf,"margin","0"),ie(tf,"width","100%"),S(Zu,"class","row"),ie(Zu,"display","flex"),ie(Zu,"cursor","pointer"),S(Zu,"data-bs-toggle","collapse"),S(Zu,"data-bs-target","#distance-travel-work-info"),S(Zu,"aria-expanded","false"),S(Zu,"aria-controls","distance-travel-work-info"),S(hm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(hm,"class","svelte-p0yy5r"),S(cm,"class","card card-body svelte-p0yy5r"),S(um,"class","collapse svelte-p0yy5r"),S(um,"id","distance-travel-work-info"),S(Kh,"class","div-grey-box svelte-p0yy5r"),ie(pm,"color","gray"),ie(pm,"font-size","14pt"),S(rf,"class","blocktitle"),ie(rf,"margin","0"),ie(rf,"width","100%"),S(Gu,"class","row"),ie(Gu,"display","flex"),ie(Gu,"cursor","pointer"),S(Gu,"data-bs-toggle","collapse"),S(Gu,"data-bs-target","#distance-travel-study-info"),S(Gu,"aria-expanded","false"),S(Gu,"aria-controls","distance-travel-study-info"),S(mm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(mm,"class","svelte-p0yy5r"),S(dm,"class","card card-body svelte-p0yy5r"),S(fm,"class","collapse svelte-p0yy5r"),S(fm,"id","distance-travel-study-info"),S(Hh,"class","div-grey-box svelte-p0yy5r"),S(co,"class","grid mt svelte-p0yy5r"),Ho(()=>u[45].call(co)),S(Dc,"class","accordion-body"),S(Wf,"id","panelsStayOpen-collapseEleven"),S(Wf,"class","accordion-collapse collapse svelte-p0yy5r"),S(Wf,"aria-labelledby","panelsStayOpen-headingEleven"),S(Xf,"class","accordion-item"),S($y,"class","accordion-button-title"),S(Mc,"class","accordion-button collapsed"),S(Mc,"type","button"),S(Mc,"data-bs-toggle","collapse"),S(Mc,"data-bs-target","#panelsStayOpen-collapseTwelve"),S(Mc,"aria-expanded","false"),S(Mc,"aria-controls","panelsStayOpen-collapseTwelveTwelve"),S(ym,"class","accordion-header svelte-p0yy5r"),S(ym,"id","panelsStayOpen-headingTwelve"),S(ev,"class","accordion-button-title-sub"),ie(vm,"color","gray"),ie(vm,"font-size","14pt"),S(nf,"class","blocktitle"),ie(nf,"margin","0"),ie(nf,"width","100%"),S(Ku,"class","row"),ie(Ku,"display","flex"),ie(Ku,"cursor","pointer"),S(Ku,"data-bs-toggle","collapse"),S(Ku,"data-bs-target","#address-1yr-info"),S(Ku,"aria-expanded","false"),S(Ku,"aria-controls","address-1yr-info"),S(bm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(bm,"class","svelte-p0yy5r"),S(_m,"class","card card-body svelte-p0yy5r"),S(gm,"class","collapse svelte-p0yy5r"),S(gm,"id","address-1yr-info"),S(Xh,"class","div-grey-box svelte-p0yy5r"),ie(xm,"color","gray"),ie(xm,"font-size","14pt"),S(af,"class","blocktitle"),ie(af,"margin","0"),ie(af,"width","100%"),S(Hu,"class","row"),ie(Hu,"display","flex"),ie(Hu,"cursor","pointer"),S(Hu,"data-bs-toggle","collapse"),S(Hu,"data-bs-target","#year-arr-info"),S(Hu,"aria-expanded","false"),S(Hu,"aria-controls","year-arr-info"),S(Sm,"href","https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins"),S(Sm,"class","svelte-p0yy5r"),S(Em,"class","card card-body svelte-p0yy5r"),S(wm,"class","collapse svelte-p0yy5r"),S(wm,"id","year-arr-info"),S(Wh,"class","div-grey-box svelte-p0yy5r"),S(Hg,"class","div-white-box"),S(ru,"class","grid mt svelte-p0yy5r"),Ho(()=>u[46].call(ru)),S(Lc,"class","accordion-body"),S(td,"id","panelsStayOpen-collapseTwelve"),S(td,"class","accordion-collapse collapse svelte-p0yy5r"),S(td,"aria-labelledby","panelsStayOpen-headingTwelve"),S(ed,"class","accordion-item"),S(Ze,"class","accordion"),S(Ze,"id","accordionPanelsStayOpenExample")},m(J,ze){Pe(J,h,ze),w(h,f),w(f,y),w(y,x),w(x,_),o.m(z,y),w(y,P),Rc.m(y,null),w(y,F),w(f,V),w(f,j),w(f,U),w(U,he),w(f,Ie),w(f,we),w(we,Ve),Bc.m(we,null),w(we,Ue),Uo&&Uo.m(we,null),w(we,Ot),Oc.m(we,null),w(h,Mt),w(h,mt),w(mt,Qe),w(Qe,kr),w(kr,xr),w(Qe,ar),jt(It,Qe,null),w(Qe,At),w(Qe,Tr),w(Tr,Vt),w(Qe,Ir),w(Qe,rt),w(rt,lr),w(lr,ri),w(rt,ci),w(rt,Er),w(Er,vt),w(rt,nt),w(rt,fr),w(fr,On),Pe(J,sa,ze),Pe(J,Ti,ze),w(Ti,vn),w(vn,oi),w(oi,Sa),w(vn,gr),Vc.m(vn,null),w(vn,Vn),qo&&qo.m(vn,null),w(Ti,Qa),w(Ti,Vr),w(Vr,Lt),w(Lt,Wi),w(Wi,Bi),w(Wi,hi),hi.innerHTML=ho,w(Vr,Jt),w(Vr,Ei),w(Ei,Mr),w(Mr,di),w(Mr,mi),w(mi,Ar),w(Ar,yi),w(Vr,un),w(Vr,Kr),w(Kr,Fr),w(Vr,Yn),w(Vr,Fn),ba&&ba.m(Vr,null),w(Vr,La),xa&&xa.m(Vr,null),w(Ti,Qo),w(Ti,pi),w(pi,cn),w(cn,gn),w(gn,po),w(gn,la),la.innerHTML=ml,w(pi,$o),w(pi,Nn),w(Nn,_n),w(_n,ua),w(_n,Jn),w(Jn,ca),w(ca,Nr),w(pi,N),w(pi,G),w(G,re),w(pi,ue),w(pi,ve),wa&&wa.m(pi,null),w(pi,xe),Ea&&Ea.m(pi,null),Pe(J,H,ze),Pe(J,oe,ze),w(oe,Se),w(Se,Ne),Fc.m(Ne,null),w(oe,Ge),w(oe,Le),jt(qe,Le,null),w(oe,at),w(oe,Re),Nc.m(Re,null),w(oe,tt),w(oe,We),Uc.m(We,null),$e=Xo(oe,u[33].bind(oe)),Pe(J,Nt,ze),Pe(J,Ze,ze),w(Ze,Gt),w(Gt,or),w(or,Ct),w(Ct,tr),w(tr,er),w(Gt,Ai),w(Gt,rr),w(rr,dr),w(dr,pr),w(dr,ir),w(dr,Oi),w(dr,ha),w(ha,vi),w(dr,Yi),w(dr,bn),w(bn,Ji),w(Ji,mr),w(mr,Un),w(Un,Vi),w(Un,Hr),Hr.innerHTML=Qn,w(Ji,zr),w(Ji,xn),w(xn,hn),w(hn,Qu),w(Ji,Fi),w(Ji,fo),qc.m(Ji,null),w(bn,pn),w(bn,Xr),w(Xr,zi),w(zi,fi),w(fi,mo),w(fi,es),es.innerHTML=yd,w(Xr,yl),w(Xr,vl),w(vl,ts),w(ts,ip),w(Xr,au),w(Xr,rs),w(rs,ou),w(rs,gl),w(bn,Yc),w(bn,wn),w(wn,Si),w(Si,qn),w(qn,ke),w(qn,Ni),Ni.innerHTML=zn,w(wn,Wr),w(wn,pa),w(pa,Pn),w(Pn,Pi),w(wn,su),w(wn,lu),w(lu,sf),w(wn,ap),jo&&jo.m(wn,null),lf=Xo(bn,u[34].bind(bn)),w(Ze,op),w(Ze,Rs),w(Rs,uu),w(uu,vo),w(vo,Jc),w(Jc,$u),w(Rs,ec),w(Rs,_l),w(_l,si),w(si,sp),w(si,is),w(si,bl),w(si,_o),w(_o,Bs),w(si,xl),w(si,Cn),w(Cn,Qi),w(Qi,$a),w($a,Os),w(Os,Lr),w(Os,tc),tc.innerHTML=uf,w(Qi,cf),w(Qi,cu),w(cu,hu),w(hu,hf),w(hu,eo),w(eo,bo),w(bo,wl),w(Qi,pf),w(Qi,El),jt(Vs,El,null),w(Qi,Sl),Zo&&Zo.m(Qi,null),w(Qi,lp),w(Qi,ns),jt(Ra,ns,null),w(Cn,ff),w(Cn,xo),w(xo,Sr),w(Sr,Qc),w(xo,vd),jt(to,xo,null),w(Cn,df),w(Cn,Fs),w(Fs,ro),w(ro,wo),w(wo,pu),w(wo,as),as.innerHTML=mf,w(Fs,rc),w(Fs,Eo),w(Eo,fu),w(fu,du),w(fu,$n),w($n,$c),w($c,yf),w(Fs,vf),jt(Ba,Fs,null),eh=Xo(Cn,u[35].bind(Cn)),w(Ze,th),w(Ze,Ns),w(Ns,Us),w(Us,os),w(os,kl),w(kl,up),w(Ns,gf),w(Ns,Il),w(Il,Oa),w(Oa,cp),w(Oa,rh),w(Oa,nc),w(Oa,ac),w(ac,Tl),w(Oa,ii),w(Oa,fa),w(fa,da),w(da,Dn),w(Dn,Qt),w(Qt,jr),w(Qt,Mn),Mn.innerHTML=hp,w(da,mu),w(da,ss),w(ss,oc),w(oc,gd),w(oc,ls),w(ls,Al),w(Al,us),w(da,Ui),jt(So,da,null),w(fa,_f),w(fa,Zr),w(Zr,it),w(it,$i),w($i,ih),w($i,ko),ko.innerHTML=cs,w(Zr,ma),w(Zr,zl),w(zl,Je),w(Je,pp),w(Je,qs),w(qs,sc),w(sc,Va),w(Zr,ya),jt(hs,Zr,null),w(fa,nh),w(fa,qi),w(qi,En),w(En,ps),w(ps,lc),w(ps,Pl),Pl.innerHTML=_d,w(qi,io),w(qi,Ln),w(Ln,Wt),w(Wt,Io),w(Wt,jn),w(jn,en),w(en,Cl),w(qi,js),jt(Zn,qi,null),ea=Xo(fa,u[36].bind(fa)),w(Ze,uc),w(Ze,yt),w(yt,dt),w(dt,Fa),w(Fa,fn),w(fn,no),w(yt,Sn),w(yt,ta),w(ta,ao),w(ao,ah),w(ao,tn),w(ao,bf),w(ao,To),w(To,fp),w(ao,fs),w(ao,gi),w(gi,ka),w(ka,dn),w(dn,Ao),w(Ao,yu),w(Ao,ds),ds.innerHTML=bd,w(ka,vu),w(ka,oo),w(oo,Dl),w(Dl,Zs),w(Dl,Na),w(Na,gu),w(gu,Gs),w(ka,Ua),jt(Ks,ka,null),w(gi,cc),w(gi,zo),w(zo,Ia),w(Ia,n),w(n,s),w(n,a),a.innerHTML=c,w(zo,m),w(zo,E),w(E,k),w(k,A),w(k,B),w(B,Z),w(Z,Y),w(zo,Q),jt($,zo,null),w(gi,ce),w(gi,ae),w(ae,de),w(de,ne),w(ne,me),w(ne,ge),ge.innerHTML=Te,w(ae,Be),w(ae,Ce),w(Ce,Oe),w(Oe,je),w(Oe,He),w(He,Xe),w(Xe,ut),w(ae,St),jt(xt,ae,null),kt=Xo(gi,u[37].bind(gi)),w(Ze,ur),w(Ze,ot),w(ot,zt),w(zt,Rt),w(Rt,Pt),w(Pt,Dt),w(ot,Ht),w(ot,Tt),w(Tt,Et),w(Et,rn),w(Et,kn),w(Et,mn),w(Et,Yr),w(Yr,ki),w(Et,va),w(Et,ui),w(ui,ra),w(ra,_i),w(_i,Rn),w(Rn,qa),w(Rn,ms),ms.innerHTML=oh,w(ra,Hs),w(ra,Po),w(Po,ys),w(ys,Co),w(ys,vs),w(vs,ja),w(ja,nn),w(ra,gs),jt(Ta,ra,null),w(ui,Ml),w(ui,nr),w(nr,Ci),w(Ci,ji),w(ji,Ll),w(ji,hc),hc.innerHTML=xf,w(nr,xd),w(nr,_s),w(_s,_u),w(_u,bu),w(_u,Xs),w(Xs,dp),w(dp,pc),w(nr,ga),jt(sh,nr,null),w(ui,py),w(ui,xu),w(xu,Ws),w(Ws,fc),w(fc,eg),w(fc,dc),dc.innerHTML=d0,w(xu,wf),w(xu,lh),w(lh,Do),w(Do,mp),w(Do,yp),w(yp,wd),w(wd,tg),w(xu,rg),jt(uh,xu,null),c_=Xo(ui,u[38].bind(ui)),w(Ze,ig),w(Ze,wu),w(wu,vp),w(vp,Za),w(Za,Ef),w(Ef,Zi),w(wu,Sf),w(wu,mc),w(mc,Mo),w(Mo,kf),w(Mo,Ed),w(Mo,fy),w(Mo,Eu),w(Eu,Sd),w(Mo,kd),w(Mo,so),w(so,Lo),w(Lo,Ys),w(Ys,Js),w(Js,ng),w(Js,vc),vc.innerHTML=ag,w(Js,bs),w(Lo,og),w(Lo,gp),w(gp,_p),w(_p,sg),w(_p,ch),w(ch,Su),w(Su,lg),w(Lo,ug),jt(gc,Lo,null),w(so,dy),w(so,ku),w(ku,Qs),w(Qs,lo),w(lo,cg),w(lo,_c),_c.innerHTML=Id,w(ku,xs),w(ku,bp),w(bp,xp),w(xp,hg),w(xp,Rl),w(Rl,If),w(If,pg),w(ku,fg),jt(hh,ku,null),w(so,dg),w(so,Bl),w(Bl,bi),w(bi,Ol),w(Ol,my),w(Ol,ph),ph.innerHTML=m0,w(Ol,yy),w(Bl,mg),w(Bl,wp),w(wp,Ep),w(Ep,vy),w(Ep,Sp),w(Sp,Td),w(Td,kp),w(Bl,gy),jt(bc,Bl,null),w(so,Tf),w(so,br),w(br,ws),w(ws,_a),w(_a,fh),w(_a,dh),dh.innerHTML=y0,w(br,yg),w(br,Ip),w(Ip,Tp),w(Tp,vg),w(Tp,Ap),w(Ap,Ad),w(Ad,gg),w(br,_g),jt(Vl,br,null),zp=Xo(so,u[39].bind(so)),w(Ze,_y),w(Ze,mh),w(mh,Pp),w(Pp,Fl),w(Fl,Cp),w(Cp,Af),w(mh,Dp),w(mh,$s),w($s,an),w(an,yh),w(an,Mp),w(an,zf),w(an,Gn),w(Gn,by),w(an,xy),w(an,ia),w(ia,Nl),w(Nl,Ro),w(Ro,Ul),w(Ul,bg),w(Ul,vh),vh.innerHTML=Pf,w(Nl,zd),w(Nl,gh),w(gh,_h),w(_h,xg),w(_h,bh),w(bh,Cf),w(Cf,wy),w(Nl,Ey),jt(xh,Nl,null),w(ia,wg),w(ia,ql),w(ql,Es),w(Es,el),w(el,Sy),w(el,Iu),Iu.innerHTML=ky,w(ql,Df),w(ql,tl),w(tl,Lp),w(Lp,Eg),w(Lp,Rp),w(Rp,Tu),w(Tu,Pd),w(ql,Iy),jt(Au,ql,null),w(ia,Ty),w(ia,jl),w(jl,rl),w(rl,xc),w(xc,Sg),w(xc,zu),zu.innerHTML=kg,w(jl,Ig),w(jl,il),w(il,Zl),w(Zl,Pr),w(Zl,Bp),w(Bp,Op),w(Op,wh),w(jl,Tg),jt(Eh,jl,null),w(ia,Ag),w(ia,nl),w(nl,al),w(al,wc),w(wc,zg),w(wc,Sh),Sh.innerHTML=h_,w(nl,Ay),w(nl,kh),w(kh,Pu),w(Pu,Ec),w(Pu,Sc),w(Sc,Cu),w(Cu,zy),w(nl,Gi),jt(Cr,nl,null),w(nl,Py),w(nl,Cy),w(ia,Dy),w(ia,Gl),w(Gl,Ss),w(Ss,Kl),w(Kl,kc),w(Kl,ks),ks.innerHTML=p_,w(Gl,Ki),w(Gl,Hl),w(Hl,uo),w(uo,Mf),w(uo,Du),w(Du,Vp),w(Vp,Ih),w(Gl,Xl),jt(Ic,Gl,null),w(ia,My),w(ia,ol),w(ol,Jr),w(Jr,Ga),w(Ga,Ly),w(Ga,e),e.innerHTML=t,w(ol,i),w(ol,l),w(l,p),w(p,d),w(p,v),w(v,I),w(I,C),w(ol,D),jt(O,ol,null),w(ol,q),w(ol,K),W=Xo(ia,u[40].bind(ia)),w(Ze,se),w(Ze,le),w(le,ye),w(ye,pe),w(pe,Ee),w(Ee,Ae),w(le,De),w(le,Me),w(Me,Fe),w(Fe,Ke),w(Fe,gt),w(Fe,st),w(Fe,_t),w(_t,lt),w(Fe,Yt),w(Fe,wt),w(wt,ct),w(ct,Ft),w(Ft,Bt),w(Bt,sr),w(Bt,bt),bt.innerHTML=wr,w(ct,ni),w(ct,Qr),w(Qr,Gr),w(Gr,ai),w(Gr,$r),w($r,Di),w(Di,on),w(ct,Kn),jt(xi,ct,null),w(wt,Hn),w(wt,Ur),w(Ur,ei),w(ei,Xt),w(Xt,Rr),w(Xt,yr),yr.innerHTML=vr,w(Ur,na),w(Ur,Hi),w(Hi,Dr),w(Dr,Mi),w(Dr,Xi),w(Xi,cr),w(cr,sl),w(Ur,Ka),jt(Aa,Ur,null),w(wt,Ii),w(wt,Bo),Is=Xo(wt,u[41].bind(wt)),w(Ze,Th),w(Ze,Oo),w(Oo,ll),w(ll,aa),w(aa,Wl),w(Wl,Lf),w(Oo,Ah),w(Oo,ul),w(ul,Vo),w(Vo,Rf),w(Vo,zh),w(Vo,Ph),w(Vo,As),w(As,Ch),w(Vo,Bf),w(Vo,Ha),w(Ha,Fo),w(Fo,Xa),w(Xa,zs),w(zs,Fp),w(zs,Yl),Yl.innerHTML=Cd,w(Fo,Of),w(Fo,cl),w(cl,Mu),w(Mu,Dh),w(Mu,Jl),w(Jl,Ql),w(Ql,Np),w(Fo,Mh),jt(Lu,Fo,null),w(Ha,Ry),w(Ha,Up),w(Ha,By),w(Ha,qp),f_=Xo(Ha,u[42].bind(Ha)),w(Ze,jp),w(Ze,ti),w(ti,za),w(za,$l),w($l,Ps),w(Ps,Dd),w(ti,Oy),w(ti,eu),w(eu,Xn),w(Xn,Vf),w(Xn,Zp),w(Xn,Ff),w(Xn,Lh),w(Lh,Vy),w(Xn,Gp),w(Xn,No),w(No,tu),w(tu,Cs),w(Cs,Ru),w(Ru,Fy),w(Ru,Wn),Wn.innerHTML=Ny,w(tu,Uy),w(tu,Wa),w(Wa,Kp),w(Kp,qy),w(Kp,Ds),w(Ds,Bu),w(Bu,Rh),w(tu,Bh),jt(Ms,tu,null),w(No,jy),w(No,Nf),w(No,Zy),w(No,Uf),Gy=Xo(No,u[43].bind(No)),w(Ze,Md),w(Ze,Ya),w(Ya,Oh),w(Oh,Ls),w(Ls,Vh),w(Vh,Ky),w(Ya,Ld),w(Ya,Ac),w(Ac,hl),w(hl,Rd),w(hl,Fh),w(hl,Hy),w(hl,zc),w(zc,Pg),w(hl,Xy),w(hl,Pa),w(Pa,Ou),w(Ou,pl),w(pl,Pc),w(Pc,Cg),w(Pc,Hp),Hp.innerHTML=v0,w(Ou,Dg),w(Ou,Ja),w(Ja,Li),w(Li,Wy),w(Li,Xp),w(Li,Yy),w(Li,g0),w(Li,_0),w(Li,b0),w(Li,x0),w(Li,w0),w(Li,E0),w(Li,S0),w(Li,k0),w(Li,I0),w(Li,T0),w(Li,A0),w(Li,z0),w(Li,P0),w(Li,C0),w(Li,Bd),w(Bd,Mg),w(Mg,D0),w(Ou,M0),jt(jf,Ou,null),w(Pa,L0),w(Pa,Nh),w(Nh,Vu),w(Vu,Wp),w(Wp,R0),w(Wp,Od),Od.innerHTML=nI,w(Nh,B0),w(Nh,Vd),w(Vd,Fd),w(Fd,O0),w(Fd,Nd),w(Nd,Lg),w(Lg,V0),w(Nh,F0),jt(Zf,Nh,null),w(Pa,N0),w(Pa,Uh),w(Uh,Fu),w(Fu,Yp),w(Yp,U0),w(Yp,Ud),Ud.innerHTML=aI,w(Uh,q0),w(Uh,qd),w(qd,jd),w(jd,j0),w(jd,Zd),w(Zd,Rg),w(Rg,Z0),w(Uh,G0),jt(Gf,Uh,null),w(Pa,K0),w(Pa,qh),w(qh,Nu),w(Nu,Jp),w(Jp,H0),w(Jp,Gd),Gd.innerHTML=oI,w(qh,X0),w(qh,Kd),w(Kd,Hd),w(Hd,W0),w(Hd,Xd),w(Xd,Bg),w(Bg,Y0),w(qh,J0),jt(Kf,qh,null),w(Pa,Q0),w(Pa,jh),w(jh,Uu),w(Uu,Qp),w(Qp,$0),w(Qp,Wd),Wd.innerHTML=sI,w(jh,e1),w(jh,Yd),w(Yd,Jd),w(Jd,t1),w(Jd,Qd),w(Qd,Og),w(Og,r1),w(jh,i1),jt(Hf,jh,null),Xx=Xo(Pa,u[44].bind(Pa)),w(Ze,n1),w(Ze,Xf),w(Xf,$d),w($d,Cc),w(Cc,Jy),w(Jy,a1),w(Xf,o1),w(Xf,Wf),w(Wf,Dc),w(Dc,s1),w(Dc,d_),w(Dc,l1),w(Dc,Qy),w(Qy,u1),w(Dc,c1),w(Dc,co),w(co,Zh),w(Zh,qu),w(qu,$p),w($p,h1),w($p,em),em.innerHTML=lI,w(Zh,p1),w(Zh,tm),w(tm,rm),w(rm,f1),w(rm,im),w(im,Fg),w(Fg,d1),w(Zh,m1),jt(Yf,Zh,null),w(co,y1),w(co,Gh),w(Gh,ju),w(ju,ef),w(ef,v1),w(ef,nm),nm.innerHTML=uI,w(Gh,g1),w(Gh,am),w(am,om),w(om,_1),w(om,sm),w(sm,Ng),w(Ng,b1),w(Gh,x1),jt(Jf,Gh,null),w(co,w1),w(co,Ug),w(co,E1),w(co,Kh),w(Kh,Zu),w(Zu,tf),w(tf,S1),w(tf,lm),lm.innerHTML=cI,w(Kh,k1),w(Kh,um),w(um,cm),w(cm,I1),w(cm,hm),w(hm,qg),w(qg,T1),w(Kh,A1),jt(Qf,Kh,null),w(co,z1),w(co,Hh),w(Hh,Gu),w(Gu,rf),w(rf,P1),w(rf,pm),pm.innerHTML=hI,w(Hh,C1),w(Hh,fm),w(fm,dm),w(dm,D1),w(dm,mm),w(mm,jg),w(jg,M1),w(Hh,L1),jt($f,Hh,null),Wx=Xo(co,u[45].bind(co)),w(Ze,R1),w(Ze,ed),w(ed,ym),w(ym,Mc),w(Mc,$y),w($y,B1),w(ed,O1),w(ed,td),w(td,Lc),w(Lc,V1),w(Lc,m_),w(Lc,F1),w(Lc,ev),w(ev,N1),w(Lc,U1),w(Lc,ru),w(ru,Xh),w(Xh,Ku),w(Ku,nf),w(nf,q1),w(nf,vm),vm.innerHTML=pI,w(Xh,j1),w(Xh,gm),w(gm,_m),w(_m,Z1),w(_m,bm),w(bm,Gg),w(Gg,G1),w(Xh,K1),jt(rd,Xh,null),w(ru,H1),w(ru,Wh),w(Wh,Hu),w(Hu,af),w(af,X1),w(af,xm),xm.innerHTML=fI,w(Wh,W1),w(Wh,wm),w(wm,Em),w(Em,Y1),w(Em,Sm),w(Sm,Kg),w(Kg,J1),w(Wh,Q1),jt(id,Wh,null),w(ru,$1),w(ru,Hg),Yx=Xo(ru,u[46].bind(ru)),Tn=!0},p(J,ze){y_===(y_=Jx(J))&&Rc?Rc.p(J,ze):(Rc.d(1),Rc=y_(J),Rc&&(Rc.c(),Rc.m(y,F))),(!Tn||ze[0]&2)&&fe!==(fe=J[1].name+"")&&ft(he,fe),v_===(v_=Qx(J))&&Bc?Bc.p(J,ze):(Bc.d(1),Bc=v_(J),Bc&&(Bc.c(),Bc.m(we,Ue))),J[1].type!="ni"?Uo?Uo.p(J,ze):(Uo=xk(J),Uo.c(),Uo.m(we,Ot)):Uo&&(Uo.d(1),Uo=null),g_===(g_=$x(J))&&Oc?Oc.p(J,ze):(Oc.d(1),Oc=g_(J),Oc&&(Oc.c(),Oc.m(we,null)));const Yh={};ze[0]&1&&(Yh.search_data=J[0]),It.$set(Yh),ze[0]&128&&wi(Qe,"float-right",J[7]>1),__===(__=e2(J))&&Vc?Vc.p(J,ze):(Vc.d(1),Vc=__(J),Vc&&(Vc.c(),Vc.m(vn,Vn))),J[6]?qo?qo.p(J,ze):(qo=wk(J),qo.c(),qo.m(vn,null)):qo&&(qo.d(1),qo=null),(!Tn||ze[0]&2)&&hr!==(hr=J[1].data.population.value[2021].all.toLocaleString()+"")&&ft(Fr,hr),J[1].type!="ni"?ba?(ba.p(J,ze),ze[0]&2&&et(ba,1)):(ba=Ek(J),ba.c(),et(ba,1),ba.m(Vr,La)):ba&&(Yu(),pt(ba,1,1,()=>{ba=null}),Ju()),J[6]&&J[4]?xa?(xa.p(J,ze),ze[0]&80&&et(xa,1)):(xa=Ik(J),xa.c(),et(xa,1),xa.m(Vr,null)):xa&&(Yu(),pt(xa,1,1,()=>{xa=null}),Ju()),(!Tn||ze[0]&2)&&X!==(X=J[1].data.households.value[2021].all_households.toLocaleString()+"")&&ft(re,X),J[1].type!="ni"&J[11]?wa?(wa.p(J,ze),ze[0]&2050&&et(wa,1)):(wa=Tk(J),wa.c(),et(wa,1),wa.m(pi,xe)):wa&&(Yu(),pt(wa,1,1,()=>{wa=null}),Ju()),J[6]&&J[4]?Ea?(Ea.p(J,ze),ze[0]&80&&et(Ea,1)):(Ea=Ak(J),Ea.c(),et(Ea,1),Ea.m(pi,null)):Ea&&(Yu(),pt(Ea,1,1,()=>{Ea=null}),Ju()),b_===(b_=t2(J))&&Fc?Fc.p(J,ze):(Fc.d(1),Fc=b_(J),Fc&&(Fc.c(),Fc.m(Ne,null))),(!Tn||ze[0]&128)&&ie(Se,"grid-column","span "+J[7]);const jc={};ze[0]&2&&(jc.location={bounds:J[1].bounds}),ze[0]&1536|ze[2]&1&&(jc.$$scope={dirty:ze,ctx:J}),!ht&&ze[0]&256&&(ht=!0,jc.map=J[8],u3(()=>ht=!1)),qe.$set(jc),(!Tn||ze[0]&128)&&ie(Le,"grid-column","span "+(J[7]==2?2:J[7]&&J[7]>2?J[7]-1:1)),x_===(x_=i2(J))&&Nc?Nc.p(J,ze):(Nc.d(1),Nc=x_(J),Nc&&(Nc.c(),Nc.m(Re,null))),w_===(w_=n2(J))&&Uc?Uc.p(J,ze):(Uc.d(1),Uc=w_(J),Uc&&(Uc.c(),Uc.m(We,null))),(!Tn||ze[0]&2)&&Kt!==(Kt=J[1].name+"")&&ft(ir,Kt),E_===(E_=a2(J))&&qc?qc.p(J,ze):(qc.d(1),qc=E_(J),qc&&(qc.c(),qc.m(Ji,null))),(!Tn||ze[0]&2)&&yo!==(yo=(J[1].hectares>=.1?J[1].hectares.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):"<0.1")+"")&&ft(ou,yo),(!Tn||ze[0]&2)&&np!==(np=(J[1].data.population.value[2021].all/J[1].hectares>=.1?(J[1].data.population.value[2021].all/J[1].hectares).toFixed(1):"<0.1")+"")&&ft(sf,np),J[1].type!="ni"&&J[11]?jo?jo.p(J,ze):(jo=Dk(J),jo.c(),jo.m(wn,null)):jo&&(jo.d(1),jo=null),(!Tn||ze[0]&2)&&go!==(go=J[1].name+"")&&ft(is,go);const tv={};ze[0]&2&&(tv.data=J[1]&&J[14](["age"])),ze[0]&4096&&(tv.zKey=J[12]),Vs.$set(tv),J[11]&&J[13]||J[4]&&J[13]&&J[6]?Zo?Zo.p(J,ze):(Zo=Mk(J),Zo.c(),Zo.m(Qi,lp)):Zo&&(Zo.d(1),Zo=null);const rv={};ze[0]&2&&(rv.data=J[1]&&J[14](["age"])),ze[0]&4096&&(rv.zKey=J[12]),Ra.$set(rv);const Xu={};ze[0]&2&&(Xu.data=J[1]&&J[14](["sex"])),ze[0]&4096&&(Xu.zKey=J[12]),ze[0]&8192&&(Xu.label=J[13]),to.$set(Xu);const km={};ze[0]&2&&(km.data=J[1]&&J[14](["hh_size"])),ze[0]&4096&&(km.zKey=J[12]),ze[0]&8192&&(km.label=J[13]),Ba.$set(km),(!Tn||ze[0]&2)&&ic!==(ic=J[1].name+"")&&ft(rh,ic);const iu={};ze[0]&2&&(iu.data=J[1]&&J[14](["cob"])),ze[0]&4096&&(iu.zKey=J[12]),ze[0]&8192&&(iu.label=J[13]),So.$set(iu);const Im={};ze[0]&2&&(Im.data=J[1]&&J[14](["passport"])),ze[0]&4096&&(Im.zKey=J[12]),ze[0]&8192&&(Im.label=J[13]),hs.$set(Im);const Tm={};ze[0]&2&&(Tm.data=J[1]&&J[14](["natid"])),ze[0]&4096&&(Tm.zKey=J[12]),ze[0]&8192&&(Tm.label=J[13]),Zn.$set(Tm),(!Tn||ze[0]&2)&&_r!==(_r=J[1].name+"")&&ft(tn,_r);const Zc={};ze[0]&2&&(Zc.data=J[1]&&J[14](["mainlang"])),ze[0]&4096&&(Zc.zKey=J[12]),ze[0]&8192&&(Zc.label=J[13]),Ks.$set(Zc);const Am={};ze[0]&2&&(Am.data=J[1]&&J[14](["irish"])),ze[0]&4096&&(Am.zKey=J[12]),ze[0]&8192&&(Am.label=J[13]),$.$set(Am);const zm={};ze[0]&2&&(zm.data=J[1]&&J[14](["ulster"])),ze[0]&4096&&(zm.zKey=J[12]),ze[0]&8192&&(zm.label=J[13]),xt.$set(zm),(!Tn||ze[0]&2)&&li!==(li=J[1].name+"")&&ft(kn,li);const Pm={};ze[0]&2&&(Pm.data=J[1]&&J[14](["religion"])),ze[0]&4096&&(Pm.zKey=J[12]),ze[0]&8192&&(Pm.label=J[13]),Ta.$set(Pm);const Gc={};ze[0]&2&&(Gc.data=J[1]&&J[14](["religion_or_religion_brought_up_in"])),ze[0]&4096&&(Gc.zKey=J[12]),ze[0]&8192&&(Gc.label=J[13]),sh.$set(Gc);const Kc={};ze[0]&2&&(Kc.data=J[1]&&J[14](["ethnic"])),ze[0]&4096&&(Kc.zKey=J[12]),ze[0]&8192&&(Kc.label=J[13]),uh.$set(Kc),(!Tn||ze[0]&2)&&yc!==(yc=J[1].name+"")&&ft(Ed,yc);const Cm={};ze[0]&2&&(Cm.data=J[1]&&J[14](["general_health"])),ze[0]&4096&&(Cm.zKey=J[12]),ze[0]&8192&&(Cm.label=J[13]),gc.$set(Cm);const Go={};ze[0]&2&&(Go.data=J[1]&&J[14](["long_term_disability"])),ze[0]&4096&&(Go.zKey=J[12]),ze[0]&8192&&(Go.label=J[13]),hh.$set(Go);const Dm={};ze[0]&2&&(Dm.data=J[1]&&J[14](["number_of_long_term_health"])),ze[0]&4096&&(Dm.zKey=J[12]),ze[0]&8192&&(Dm.label=J[13]),bc.$set(Dm);const nd={};ze[0]&2&&(nd.data=J[1]&&J[14](["provision_care"])),ze[0]&4096&&(nd.zKey=J[12]),ze[0]&8192&&(nd.label=J[13]),Vl.$set(nd),(!Tn||ze[0]&2)&&In!==(In=J[1].name+"")&&ft(Mp,In);const iv={};ze[0]&2&&(iv.data=J[1]&&J[14](["accommodation_type"])),ze[0]&4096&&(iv.zKey=J[12]),ze[0]&8192&&(iv.label=J[13]),xh.$set(iv);const Mm={};ze[0]&2&&(Mm.data=J[1]&&J[14](["number_of_adaptations"])),ze[0]&4096&&(Mm.zKey=J[12]),ze[0]&8192&&(Mm.label=J[13]),Au.$set(Mm);const ad={};ze[0]&2&&(ad.data=J[1]&&J[14](["central_heating"])),ze[0]&4096&&(ad.zKey=J[12]),ze[0]&8192&&(ad.label=J[13]),Eh.$set(ad);const Lm={};ze[0]&2&&(Lm.data=J[1]&&J[14](["renewable_energy"])),ze[0]&4096&&(Lm.zKey=J[12]),ze[0]&8192&&(Lm.label=J[13]),Cr.$set(Lm);const Rm={};ze[0]&2&&(Rm.data=J[1]&&J[14](["hh_tenure"])),ze[0]&4096&&(Rm.zKey=J[12]),ze[0]&8192&&(Rm.label=J[13]),Ic.$set(Rm);const Bm={};ze[0]&2&&(Bm.data=J[1]&&J[14](["car_or_van"])),ze[0]&4096&&(Bm.zKey=J[12]),ze[0]&8192&&(Bm.label=J[13]),O.$set(Bm),(!Tn||ze[0]&2)&&Ye!==(Ye=J[1].name+"")&&ft(gt,Ye);const Ko={};ze[0]&2&&(Ko.data=J[1]&&J[14](["number_of_dependent_children_households"])),ze[0]&4096&&(Ko.zKey=J[12]),ze[0]&8192&&(Ko.label=J[13]),xi.$set(Ko);const Om={};ze[0]&2&&(Om.data=J[1]&&J[14](["household_composition_households"])),ze[0]&4096&&(Om.zKey=J[12]),ze[0]&8192&&(Om.label=J[13]),Aa.$set(Om),(!Tn||ze[0]&2)&&Ts!==(Ts=J[1].name+"")&&ft(zh,Ts);const od={};ze[0]&2&&(od.data=J[1]&&J[14](["marital_and_civil_partnership_status"])),ze[0]&4096&&(od.zKey=J[12]),ze[0]&8192&&(od.label=J[13]),Lu.$set(od),(!Tn||ze[0]&2)&&Tc!==(Tc=J[1].name+"")&&ft(Zp,Tc);const nv={};ze[0]&2&&(nv.data=J[1]&&J[14](["sexual_orientation_by_broad_age_band"])),ze[0]&4096&&(nv.zKey=J[12]),ze[0]&8192&&(nv.label=J[13]),Ms.$set(nv),(!Tn||ze[0]&2)&&qf!==(qf=J[1].name+"")&&ft(Fh,qf);const Vm={};ze[0]&2&&(Vm.data=J[1]&&J[14](["highest_level_of_qualifications"])),ze[0]&4096&&(Vm.zKey=J[12]),ze[0]&8192&&(Vm.label=J[13]),jf.$set(Vm);const sd={};ze[0]&2&&(sd.data=J[1]&&J[14](["economic_activity"])),ze[0]&4096&&(sd.zKey=J[12]),ze[0]&8192&&(sd.label=J[13]),Zf.$set(sd);const Fm={};ze[0]&2&&(Fm.data=J[1]&&J[14](["hours_worked"])),ze[0]&4096&&(Fm.zKey=J[12]),ze[0]&8192&&(Fm.label=J[13]),Gf.$set(Fm);const Nm={};ze[0]&2&&(Nm.data=J[1]&&J[14](["industry_of_employment"])),ze[0]&4096&&(Nm.zKey=J[12]),ze[0]&8192&&(Nm.label=J[13]),Kf.$set(Nm);const Um={};ze[0]&2&&(Um.data=J[1]&&J[14](["occupation_1_digit"])),ze[0]&4096&&(Um.zKey=J[12]),ze[0]&8192&&(Um.label=J[13]),Hf.$set(Um),(!Tn||ze[0]&2)&&Vg!==(Vg=J[1].name+"")&&ft(d_,Vg);const nu={};ze[0]&2&&(nu.data=J[1]&&J[14](["method_of_travel_to_work"])),ze[0]&4096&&(nu.zKey=J[12]),ze[0]&8192&&(nu.label=J[13]),Yf.$set(nu);const qm={};ze[0]&2&&(qm.data=J[1]&&J[14](["method_of_travel_to_study"])),ze[0]&4096&&(qm.zKey=J[12]),ze[0]&8192&&(qm.label=J[13]),Jf.$set(qm);const jm={};ze[0]&2&&(jm.data=J[1]&&J[14](["distance_travelled_to_work"])),ze[0]&4096&&(jm.zKey=J[12]),ze[0]&8192&&(jm.label=J[13]),Qf.$set(jm);const Zm={};ze[0]&2&&(Zm.data=J[1]&&J[14](["distance_travelled_to_study"])),ze[0]&4096&&(Zm.zKey=J[12]),ze[0]&8192&&(Zm.label=J[13]),$f.$set(Zm),(!Tn||ze[0]&2)&&Zg!==(Zg=J[1].name+"")&&ft(m_,Zg);const Gm={};ze[0]&2&&(Gm.data=J[1]&&J[14](["address_one_year_ago"])),ze[0]&4096&&(Gm.zKey=J[12]),ze[0]&8192&&(Gm.label=J[13]),rd.$set(Gm);const Km={};ze[0]&2&&(Km.data=J[1]&&J[14](["year_of_arrival"])),ze[0]&4096&&(Km.zKey=J[12]),ze[0]&8192&&(Km.label=J[13]),id.$set(Km)},i(J){Tn||(et(It.$$.fragment,J),et(ba),et(xa),et(wa),et(Ea),et(qe.$$.fragment,J),et(Vs.$$.fragment,J),et(Ra.$$.fragment,J),et(to.$$.fragment,J),et(Ba.$$.fragment,J),et(So.$$.fragment,J),et(hs.$$.fragment,J),et(Zn.$$.fragment,J),et(Ks.$$.fragment,J),et($.$$.fragment,J),et(xt.$$.fragment,J),et(Ta.$$.fragment,J),et(sh.$$.fragment,J),et(uh.$$.fragment,J),et(gc.$$.fragment,J),et(hh.$$.fragment,J),et(bc.$$.fragment,J),et(Vl.$$.fragment,J),et(xh.$$.fragment,J),et(Au.$$.fragment,J),et(Eh.$$.fragment,J),et(Cr.$$.fragment,J),et(Ic.$$.fragment,J),et(O.$$.fragment,J),et(xi.$$.fragment,J),et(Aa.$$.fragment,J),et(Lu.$$.fragment,J),et(Ms.$$.fragment,J),et(jf.$$.fragment,J),et(Zf.$$.fragment,J),et(Gf.$$.fragment,J),et(Kf.$$.fragment,J),et(Hf.$$.fragment,J),et(Yf.$$.fragment,J),et(Jf.$$.fragment,J),et(Qf.$$.fragment,J),et($f.$$.fragment,J),et(rd.$$.fragment,J),et(id.$$.fragment,J),Tn=!0)},o(J){pt(It.$$.fragment,J),pt(ba),pt(xa),pt(wa),pt(Ea),pt(qe.$$.fragment,J),pt(Vs.$$.fragment,J),pt(Ra.$$.fragment,J),pt(to.$$.fragment,J),pt(Ba.$$.fragment,J),pt(So.$$.fragment,J),pt(hs.$$.fragment,J),pt(Zn.$$.fragment,J),pt(Ks.$$.fragment,J),pt($.$$.fragment,J),pt(xt.$$.fragment,J),pt(Ta.$$.fragment,J),pt(sh.$$.fragment,J),pt(uh.$$.fragment,J),pt(gc.$$.fragment,J),pt(hh.$$.fragment,J),pt(bc.$$.fragment,J),pt(Vl.$$.fragment,J),pt(xh.$$.fragment,J),pt(Au.$$.fragment,J),pt(Eh.$$.fragment,J),pt(Cr.$$.fragment,J),pt(Ic.$$.fragment,J),pt(O.$$.fragment,J),pt(xi.$$.fragment,J),pt(Aa.$$.fragment,J),pt(Lu.$$.fragment,J),pt(Ms.$$.fragment,J),pt(jf.$$.fragment,J),pt(Zf.$$.fragment,J),pt(Gf.$$.fragment,J),pt(Kf.$$.fragment,J),pt(Hf.$$.fragment,J),pt(Yf.$$.fragment,J),pt(Jf.$$.fragment,J),pt(Qf.$$.fragment,J),pt($f.$$.fragment,J),pt(rd.$$.fragment,J),pt(id.$$.fragment,J),Tn=!1},d(J){J&&T(h),Rc.d(),Bc.d(),Uo&&Uo.d(),Oc.d(),Zt(It),J&&T(sa),J&&T(Ti),Vc.d(),qo&&qo.d(),ba&&ba.d(),xa&&xa.d(),wa&&wa.d(),Ea&&Ea.d(),J&&T(H),J&&T(oe),Fc.d(),Zt(qe),Nc.d(),Uc.d(),$e(),J&&T(Nt),J&&T(Ze),qc.d(),jo&&jo.d(),lf(),Zt(Vs),Zo&&Zo.d(),Zt(Ra),Zt(to),Zt(Ba),eh(),Zt(So),Zt(hs),Zt(Zn),ea(),Zt(Ks),Zt($),Zt(xt),kt(),Zt(Ta),Zt(sh),Zt(uh),c_(),Zt(gc),Zt(hh),Zt(bc),Zt(Vl),zp(),Zt(xh),Zt(Au),Zt(Eh),Zt(Cr),Zt(Ic),Zt(O),W(),Zt(xi),Zt(Aa),Is(),Zt(Lu),f_(),Zt(Ms),Gy(),Zt(jf),Zt(Zf),Zt(Gf),Zt(Kf),Zt(Hf),Xx(),Zt(Yf),Zt(Jf),Zt(Qf),Zt($f),Wx(),Zt(rd),Zt(id),Yx()}}}function xA(u){let h=u[1].name+"",f;return{c(){f=ee(h)},l(y){f=te(y,h)},m(y,x){Pe(y,f,x)},p(y,x){x[0]&2&&h!==(h=y[1].name+"")&&ft(f,h)},d(y){y&&T(f)}}}function wA(u){let h,f=u[1].name+"",y,x=[...u[1].parents].reverse(),_=[];for(let o=0;o<x.length;o+=1)_[o]=bk(gk(u,x,o));return{c(){for(let o=0;o<_.length;o+=1)_[o].c();h=_e(),y=ee(f)},l(o){for(let z=0;z<_.length;z+=1)_[z].l(o);h=be(o),y=te(o,f)},m(o,z){for(let P=0;P<_.length;P+=1)_[P].m(o,z);Pe(o,h,z),Pe(o,y,z)},p(o,z){if(z[0]&2){x=[...o[1].parents].reverse();let P;for(P=0;P<x.length;P+=1){const F=gk(o,x,P);_[P]?_[P].p(F,z):(_[P]=bk(F),_[P].c(),_[P].m(h.parentNode,h))}for(;P<_.length;P+=1)_[P].d(1);_.length=x.length}z[0]&2&&f!==(f=o[1].name+"")&&ft(y,f)},d(o){Wc(_,o),o&&T(h),o&&T(y)}}}function bk(u){let h,f=u[56].name+"",y,x,_,o=" &gt; ",z;return{c(){h=M("a"),y=ee(f),_=new Bx(!1),z=An(),this.h()},l(P){h=L(P,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var F=R(h);y=te(F,f),F.forEach(T),_=Ox(P,!1),z=An(),this.h()},h(){S(h,"href",x=rp+"/"+u[56].code+"/"),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r"),_.a=z},m(P,F){Pe(P,h,F),w(h,y),_.m(o,P,F),Pe(P,z,F)},p(P,F){F[0]&2&&f!==(f=P[56].name+"")&&ft(y,f),F[0]&2&&x!==(x=rp+"/"+P[56].code+"/")&&S(h,"href",x)},d(P){P&&T(h),P&&T(z),P&&_.d()}}}function EA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("No comparison"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"No comparison"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),wi(h,"btn-active",u[5])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Ri(h,"click",u[20]),Ri(h,"click",u[21]),Ri(h,"click",u[22])],y=!0)},p(_,o){o[0]&32&&wi(h,"btn-active",_[5])},d(_){_&&T(h),y=!1,Xc(x)}}}function SA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("No comparison"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"No comparison"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),wi(h,"btn-active",!u[4])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Ri(h,"click",u[17]),Ri(h,"click",u[18]),Ri(h,"click",u[19])],y=!0)},p(_,o){o[0]&16&&wi(h,"btn-active",!_[4])},d(_){_&&T(h),y=!1,Xc(x)}}}function xk(u){let h,f,y,x;return{c(){h=M("button"),f=ee("NI 2021"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"NI 2021"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),wi(h,"btn-active",u[11]&!u[5]&!u[4])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Ri(h,"click",u[23]),Ri(h,"click",u[24]),Ri(h,"click",u[25])],y=!0)},p(_,o){o[0]&2096&&wi(h,"btn-active",_[11]&!_[5]&!_[4])},d(_){_&&T(h),y=!1,Xc(x)}}}function kA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("2011 data not available"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"2011 data not available"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),wi(h,"btn-active",u[4]&!u[5]&!u[11])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Ri(h,"click",u[29]),Ri(h,"click",u[30]),Ri(h,"click",u[31])],y=!0)},p(_,o){o[0]&2096&&wi(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&T(h),y=!1,Xc(x)}}}function IA(u){let h,f,y,x;return{c(){h=M("button"),f=ee("Same area 2011"),this.h()},l(_){h=L(_,"BUTTON",{class:!0});var o=R(h);f=te(o,"Same area 2011"),o.forEach(T),this.h()},h(){S(h,"class","btn svelte-p0yy5r"),wi(h,"btn-active",u[4]&!u[5]&!u[11])},m(_,o){Pe(_,h,o),w(h,f),y||(x=[Ri(h,"click",u[26]),Ri(h,"click",u[27]),Ri(h,"click",u[28])],y=!0)},p(_,o){o[0]&2096&&wi(h,"btn-active",_[4]&!_[5]&!_[11])},d(_){_&&T(h),y=!1,Xc(x)}}}function TA(u){let h,f=u[1].name+"",y,x,_=u[1].data.population.value[2021].all.toLocaleString()+"",o,z,P;function F(U,fe){return U[1].data.population.value_rank[2021].all==1?DA:U[1].data.population.value_rank[2021].all==U[1].count?CA:U[1].data.population.value_rank[2021].all<=(U[1].count+1)/2&&U[1].data.population.value_rank[2021].all!=1?PA:zA}let V=F(u),j=V(u);return{c(){h=ee("The population of "),y=ee(f),x=ee(" was "),o=ee(_),z=ee(` at the time of the 2021 Census, which\r
					made it the\r
					`),j.c(),P=An()},l(U){h=te(U,"The population of "),y=te(U,f),x=te(U," was "),o=te(U,_),z=te(U,` at the time of the 2021 Census, which\r
					made it the\r
					`),j.l(U),P=An()},m(U,fe){Pe(U,h,fe),Pe(U,y,fe),Pe(U,x,fe),Pe(U,o,fe),Pe(U,z,fe),j.m(U,fe),Pe(U,P,fe)},p(U,fe){fe[0]&2&&f!==(f=U[1].name+"")&&ft(y,f),fe[0]&2&&_!==(_=U[1].data.population.value[2021].all.toLocaleString()+"")&&ft(o,_),V===(V=F(U))&&j?j.p(U,fe):(j.d(1),j=V(U),j&&(j.c(),j.m(P.parentNode,P)))},d(U){U&&T(h),U&&T(y),U&&T(x),U&&T(o),U&&T(z),j.d(U),U&&T(P)}}}function AA(u){let h,f=u[1].name+"",y,x,_=u[1].data.population.value[2021].all.toLocaleString()+"",o,z;return{c(){h=ee("The population of "),y=ee(f),x=ee(" was "),o=ee(_),z=ee(" at the time of the 2021 Census.")},l(P){h=te(P,"The population of "),y=te(P,f),x=te(P," was "),o=te(P,_),z=te(P," at the time of the 2021 Census.")},m(P,F){Pe(P,h,F),Pe(P,y,F),Pe(P,x,F),Pe(P,o,F),Pe(P,z,F)},p(P,F){F[0]&2&&f!==(f=P[1].name+"")&&ft(y,f),F[0]&2&&_!==(_=P[1].data.population.value[2021].all.toLocaleString()+"")&&ft(o,_)},d(P){P&&T(h),P&&T(y),P&&T(x),P&&T(o),P&&T(z)}}}function zA(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=dd(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",x,_,o=yn[u[1].type].name+"",z,P;return{c(){f=ee(h),x=ee(y),_=ee(" smallest "),z=ee(o),P=ee(".")},l(F){f=te(F,h),x=te(F,y),_=te(F," smallest "),z=te(F,o),P=te(F,".")},m(F,V){Pe(F,f,V),Pe(F,x,V),Pe(F,_,V),Pe(F,z,V),Pe(F,P,V)},p(F,V){V[0]&2&&h!==(h=(F[1].count+1-F[1].data.population.value_rank[2021].all).toLocaleString()+"")&&ft(f,h),V[0]&2&&y!==(y=dd(F[1].count+1-F[1].data.population.value_rank[2021].all)+"")&&ft(x,y),V[0]&2&&o!==(o=yn[F[1].type].name+"")&&ft(z,o)},d(F){F&&T(f),F&&T(x),F&&T(_),F&&T(z),F&&T(P)}}}function PA(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=dd(u[1].data.population.value_rank[2021].all)+"",x,_,o=yn[u[1].type].name+"",z,P;return{c(){f=ee(h),x=ee(y),_=ee(" largest "),z=ee(o),P=ee(".")},l(F){f=te(F,h),x=te(F,y),_=te(F," largest "),z=te(F,o),P=te(F,".")},m(F,V){Pe(F,f,V),Pe(F,x,V),Pe(F,_,V),Pe(F,z,V),Pe(F,P,V)},p(F,V){V[0]&2&&h!==(h=F[1].data.population.value_rank[2021].all.toLocaleString()+"")&&ft(f,h),V[0]&2&&y!==(y=dd(F[1].data.population.value_rank[2021].all)+"")&&ft(x,y),V[0]&2&&o!==(o=yn[F[1].type].name+"")&&ft(z,o)},d(F){F&&T(f),F&&T(x),F&&T(_),F&&T(z),F&&T(P)}}}function CA(u){let h,f=yn[u[1].type].name+"",y,x;return{c(){h=ee("smallest "),y=ee(f),x=ee(".")},l(_){h=te(_,"smallest "),y=te(_,f),x=te(_,".")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=yn[_[1].type].name+"")&&ft(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function DA(u){let h,f=yn[u[1].type].name+"",y,x;return{c(){h=ee("largest "),y=ee(f),x=ee(".")},l(_){h=te(_,"largest "),y=te(_,f),x=te(_,".")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=yn[_[1].type].name+"")&&ft(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function wk(u){let h;function f(_,o){return _[1].data.population.value.change.all==0?RA:_[1].data.population.value.change.all>0?LA:MA}let y=f(u),x=y(u);return{c(){x.c(),h=An()},l(_){x.l(_),h=An()},m(_,o){x.m(_,o),Pe(_,h,o)},p(_,o){y===(y=f(_))&&x?x.p(_,o):(x.d(1),x=y(_),x&&(x.c(),x.m(h.parentNode,h)))},d(_){x.d(_),_&&T(h)}}}function MA(u){let h,f=md(u[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=ee("A decrease of "),y=ee(f),x=ee(" since the 2011 Census.")},l(_){h=te(_,"A decrease of "),y=te(_,f),x=te(_," since the 2011 Census.")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=md(_[1].data.population.value.change.all,"%",1)+"")&&ft(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function LA(u){let h,f=md(u[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=ee("An increase of "),y=ee(f),x=ee(" since the 2011 Census.")},l(_){h=te(_,"An increase of "),y=te(_,f),x=te(_," since the 2011 Census.")},m(_,o){Pe(_,h,o),Pe(_,y,o),Pe(_,x,o)},p(_,o){o[0]&2&&f!==(f=md(_[1].data.population.value.change.all,"%",1)+"")&&ft(y,f)},d(_){_&&T(h),_&&T(y),_&&T(x)}}}function RA(u){let h;return{c(){h=ee("No change in population since the 2011 Census.")},l(f){h=te(f,"No change in population since the 2011 Census.")},m(f,y){Pe(f,h,y)},p:ln,d(f){f&&T(h)}}}function Ek(u){let h,f,y=u[1].type!="ctry"&u[11]&!u[4]&&Sk(u);return{c(){y&&y.c(),h=An()},l(x){y&&y.l(x),h=An()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,_){x[1].type!="ctry"&x[11]&!x[4]?y?(y.p(x,_),_[0]&2066&&et(y,1)):(y=Sk(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Yu(),pt(y,1,1,()=>{y=null}),Ju())},i(x){f||(et(y),f=!0)},o(x){pt(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function Sk(u){let h,f,y,x,_,o;f=new p0({props:{$$slots:{default:[BA]},$$scope:{ctx:u}}});let z=u[1].type=="lgd"&&kk(u);return{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" of Northern Ireland population"),x=_e(),_=M("div"),z&&z.c(),this.h()},l(P){h=L(P,"SPAN",{class:!0});var F=R(h);qt(f.$$.fragment,F),y=te(F," of Northern Ireland population"),F.forEach(T),x=be(P),_=L(P,"DIV",{class:!0});var V=R(_);z&&z.l(V),V.forEach(T),this.h()},h(){S(h,"class","text-small "),S(_,"class","text-small ")},m(P,F){Pe(P,h,F),jt(f,h,null),w(h,y),Pe(P,x,F),Pe(P,_,F),z&&z.m(_,null),o=!0},p(P,F){const V={};F[0]&6|F[2]&1&&(V.$$scope={dirty:F,ctx:P}),f.$set(V),P[1].type=="lgd"?z?z.p(P,F):(z=kk(P),z.c(),z.m(_,null)):z&&(z.d(1),z=null)},i(P){o||(et(f.$$.fragment,P),o=!0)},o(P){pt(f.$$.fragment,P),o=!1},d(P){P&&T(h),Zt(f),P&&T(x),P&&T(_),z&&z.d()}}}function BA(u){let h=(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all>=.001?(u[1].data.population.value[2021].all/u[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(x){f=te(x,h),y=te(x,"%")},m(x,_){Pe(x,f,_),Pe(x,y,_)},p(x,_){_[0]&6&&h!==(h=(x[1].data.population.value[2021].all/x[2].data.population.value[2021].all>=.001?(x[1].data.population.value[2021].all/x[2].data.population.value[2021].all*100).toFixed(1):"<0.1")+"")&&ft(f,h)},d(x){x&&T(f),x&&T(y)}}}function kk(u){let h,f=u[1].count.toLocaleString()+"",y,x,_=yn[u[1].type].pl+"",o;function z(V,j){return V[1].data.population.value_rank[2021].all==1?NA:V[1].data.population.value_rank[2021].all==V[1].count?FA:V[1].data.population.value_rank[2021].all<=(V[1].count+1)/2&&V[1].data.population.value_rank[2021].all!=1?VA:OA}let P=z(u),F=P(u);return{c(){F.c(),h=ee(`\r
							population of `),y=ee(f),x=_e(),o=ee(_)},l(V){F.l(V),h=te(V,`\r
							population of `),y=te(V,f),x=be(V),o=te(V,_)},m(V,j){F.m(V,j),Pe(V,h,j),Pe(V,y,j),Pe(V,x,j),Pe(V,o,j)},p(V,j){P===(P=z(V))&&F?F.p(V,j):(F.d(1),F=P(V),F&&(F.c(),F.m(h.parentNode,h))),j[0]&2&&f!==(f=V[1].count.toLocaleString()+"")&&ft(y,f),j[0]&2&&_!==(_=yn[V[1].type].pl+"")&&ft(o,_)},d(V){F.d(V),V&&T(h),V&&T(y),V&&T(x),V&&T(o)}}}function OA(u){let h=(u[1].count+1-u[1].data.population.value_rank[2021].all).toLocaleString()+"",f,y=dd(u[1].count+1-u[1].data.population.value_rank[2021].all)+"",x,_;return{c(){f=ee(h),x=ee(y),_=ee(" smallest")},l(o){f=te(o,h),x=te(o,y),_=te(o," smallest")},m(o,z){Pe(o,f,z),Pe(o,x,z),Pe(o,_,z)},p(o,z){z[0]&2&&h!==(h=(o[1].count+1-o[1].data.population.value_rank[2021].all).toLocaleString()+"")&&ft(f,h),z[0]&2&&y!==(y=dd(o[1].count+1-o[1].data.population.value_rank[2021].all)+"")&&ft(x,y)},d(o){o&&T(f),o&&T(x),o&&T(_)}}}function VA(u){let h=u[1].data.population.value_rank[2021].all.toLocaleString()+"",f,y=dd(u[1].data.population.value_rank[2021].all)+"",x,_;return{c(){f=ee(h),x=ee(y),_=ee(" largest")},l(o){f=te(o,h),x=te(o,y),_=te(o," largest")},m(o,z){Pe(o,f,z),Pe(o,x,z),Pe(o,_,z)},p(o,z){z[0]&2&&h!==(h=o[1].data.population.value_rank[2021].all.toLocaleString()+"")&&ft(f,h),z[0]&2&&y!==(y=dd(o[1].data.population.value_rank[2021].all)+"")&&ft(x,y)},d(o){o&&T(f),o&&T(x),o&&T(_)}}}function FA(u){let h;return{c(){h=ee("The smallest")},l(f){h=te(f,"The smallest")},m(f,y){Pe(f,h,y)},p:ln,d(f){f&&T(h)}}}function NA(u){let h;return{c(){h=ee("The largest")},l(f){h=te(f,"The largest")},m(f,y){Pe(f,h,y)},p:ln,d(f){f&&T(h)}}}function Ik(u){let h,f,y,x;return f=new p0({props:{$$slots:{default:[UA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);qt(f.$$.fragment,o),y=te(o," since 2011 Census"),o.forEach(T),this.h()},h(){S(h,"class","text-small ")},m(_,o){Pe(_,h,o),jt(f,h,null),w(h,y),x=!0},p(_,o){const z={};o[0]&2|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),f.$set(z)},i(_){x||(et(f.$$.fragment,_),x=!0)},o(_){pt(f.$$.fragment,_),x=!1},d(_){_&&T(h),Zt(f)}}}function UA(u){let h,f=md(u[1].data.population.value.change.all,"%",1)+"",y,x;return{c(){h=M("span"),y=ee(f),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);y=te(o,f),o.forEach(T),this.h()},h(){S(h,"class",x=e0(r0(u[1].data.population.value.change.all))+" svelte-p0yy5r")},m(_,o){Pe(_,h,o),w(h,y)},p(_,o){o[0]&2&&f!==(f=md(_[1].data.population.value.change.all,"%",1)+"")&&ft(y,f),o[0]&2&&x!==(x=e0(r0(_[1].data.population.value.change.all))+" svelte-p0yy5r")&&S(h,"class",x)},d(_){_&&T(h)}}}function Tk(u){let h,f,y,x;return f=new p0({props:{$$slots:{default:[qA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" of Northern Ireland households"),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);qt(f.$$.fragment,o),y=te(o," of Northern Ireland households"),o.forEach(T),this.h()},h(){S(h,"class","text-small")},m(_,o){Pe(_,h,o),jt(f,h,null),w(h,y),x=!0},p(_,o){const z={};o[0]&6|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),f.$set(z)},i(_){x||(et(f.$$.fragment,_),x=!0)},o(_){pt(f.$$.fragment,_),x=!1},d(_){_&&T(h),Zt(f)}}}function qA(u){let h=(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households>=.001?(u[1].data.households.value[2021].all_households/u[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"",f,y;return{c(){f=ee(h),y=ee("%")},l(x){f=te(x,h),y=te(x,"%")},m(x,_){Pe(x,f,_),Pe(x,y,_)},p(x,_){_[0]&6&&h!==(h=(x[1].data.households.value[2021].all_households/x[2].data.households.value[2021].all_households>=.001?(x[1].data.households.value[2021].all_households/x[2].data.households.value[2021].all_households*100).toFixed(1):"<0.1")+"")&&ft(f,h)},d(x){x&&T(f),x&&T(y)}}}function Ak(u){let h,f,y,x;return f=new p0({props:{$$slots:{default:[jA]},$$scope:{ctx:u}}}),{c(){h=M("span"),Ut(f.$$.fragment),y=ee(" since 2011 Census"),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);qt(f.$$.fragment,o),y=te(o," since 2011 Census"),o.forEach(T),this.h()},h(){S(h,"class","text-small")},m(_,o){Pe(_,h,o),jt(f,h,null),w(h,y),x=!0},p(_,o){const z={};o[0]&2|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),f.$set(z)},i(_){x||(et(f.$$.fragment,_),x=!0)},o(_){pt(f.$$.fragment,_),x=!1},d(_){_&&T(h),Zt(f)}}}function jA(u){let h,f=md(u[1].data.households.value.change.all_households,"%",1)+"",y,x;return{c(){h=M("span"),y=ee(f),this.h()},l(_){h=L(_,"SPAN",{class:!0});var o=R(h);y=te(o,f),o.forEach(T),this.h()},h(){S(h,"class",x=e0(r0(u[1].data.households.value.change.all_households))+" svelte-p0yy5r")},m(_,o){Pe(_,h,o),w(h,y)},p(_,o){o[0]&2&&f!==(f=md(_[1].data.households.value.change.all_households,"%",1)+"")&&ft(y,f),o[0]&2&&x!==(x=e0(r0(_[1].data.households.value.change.all_households))+" svelte-p0yy5r")&&S(h,"class",x)},d(_){_&&T(h)}}}function ZA(u){let h,f,y=u[1].name+"",x;return{c(){h=ee("Explore "),f=M("span"),x=ee(y),this.h()},l(_){h=te(_,"Explore "),f=L(_,"SPAN",{style:!0});var o=R(f);x=te(o,y),o.forEach(T),this.h()},h(){ie(f,"color","#93328E")},m(_,o){Pe(_,h,o),Pe(_,f,o),w(f,x)},p(_,o){o[0]&2&&y!==(y=_[1].name+"")&&ft(x,y)},d(_){_&&T(h),_&&T(f)}}}function GA(u){let h,f,y=u[1].name+"",x,_,o,z,P=yn[u[1].type].name+"",F;return{c(){h=ee("Explore "),f=M("span"),x=ee(y),_=_e(),o=M("span"),z=ee("- "),F=ee(P),this.h()},l(V){h=te(V,"Explore "),f=L(V,"SPAN",{style:!0});var j=R(f);x=te(j,y),j.forEach(T),_=be(V),o=L(V,"SPAN",{style:!0});var U=R(o);z=te(U,"- "),F=te(U,P),U.forEach(T),this.h()},h(){ie(f,"color","#93328E"),ie(o,"color","#a19e9e")},m(V,j){Pe(V,h,j),Pe(V,f,j),w(f,x),Pe(V,_,j),Pe(V,o,j),w(o,z),w(o,F)},p(V,j){j[0]&2&&y!==(y=V[1].name+"")&&ft(x,y),j[0]&2&&P!==(P=yn[V[1].type].name+"")&&ft(F,P)},d(V){V&&T(h),V&&T(f),V&&T(_),V&&T(o)}}}function KA(u){let h,f,y,x,_,o,z;const P=[fd[u[58]],{id:u[58]+"-fill"},{type:"fill"},{isChild:u[10][u[58]]},{click:!0},{selected:u[9].selected},{highlight:!0},{highlighted:u[9].highlighted},{hover:!0},{hovered:u[9].hovered},{layout:{visibility:u[9].type==u[58]||u[9].childType==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?oa["fill-self"]:u[9].childType==u[58]?oa["fill-child"]:oa.fill}];let F={};for(let he=0;he<P.length;he+=1)F=W_(F,P[he]);h=new kx({props:F}),h.$on("select",u[15]);const V=[fd[u[58]],{id:u[58]+"-bounds"},{type:"line"},{selected:u[9].selected},{highlight:!0},{highlighted:u[9].highlighted},{layout:{visibility:u[9].type==u[58]||u[9].childType==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?oa["line-active"]:u[9].childType==u[58]?oa["line-child"]:oa.line}];let j={};for(let he=0;he<V.length;he+=1)j=W_(j,V[he]);y=new kx({props:j});const U=[fd[u[58]],{id:u[58]+"-self"},{type:"line"},{selected:u[9].selected},{layout:{visibility:u[9].type==u[58]?"visible":"none"}},{paint:u[9].type==u[58]?oa["line-self"]:oa.line}];let fe={};for(let he=0;he<U.length;he+=1)fe=W_(fe,U[he]);return _=new kx({props:fe}),{c(){Ut(h.$$.fragment),f=_e(),Ut(y.$$.fragment),x=_e(),Ut(_.$$.fragment),o=_e()},l(he){qt(h.$$.fragment,he),f=be(he),qt(y.$$.fragment,he),x=be(he),qt(_.$$.fragment,he),o=be(he)},m(he,Ie){jt(h,he,Ie),Pe(he,f,Ie),jt(y,he,Ie),Pe(he,x,Ie),jt(_,he,Ie),Pe(he,o,Ie),z=!0},p(he,Ie){const we=Ie[0]&1536?Y_(P,[Ie&0&&J_(fd[he[58]]),P[1],P[2],Ie[0]&1024&&{isChild:he[10][he[58]]},P[4],Ie[0]&512&&{selected:he[9].selected},P[6],Ie[0]&512&&{highlighted:he[9].highlighted},P[8],Ie[0]&512&&{hovered:he[9].hovered},Ie[0]&512&&{layout:{visibility:he[9].type==he[58]||he[9].childType==he[58]?"visible":"none"}},Ie[0]&512&&{paint:he[9].type==he[58]?oa["fill-self"]:he[9].childType==he[58]?oa["fill-child"]:oa.fill}]):{};h.$set(we);const Ve=Ie[0]&512?Y_(V,[Ie&0&&J_(fd[he[58]]),V[1],V[2],Ie[0]&512&&{selected:he[9].selected},V[4],Ie[0]&512&&{highlighted:he[9].highlighted},Ie[0]&512&&{layout:{visibility:he[9].type==he[58]||he[9].childType==he[58]?"visible":"none"}},Ie[0]&512&&{paint:he[9].type==he[58]?oa["line-active"]:he[9].childType==he[58]?oa["line-child"]:oa.line}]):{};y.$set(Ve);const Ue=Ie[0]&512?Y_(U,[Ie&0&&J_(fd[he[58]]),U[1],U[2],Ie[0]&512&&{selected:he[9].selected},Ie[0]&512&&{layout:{visibility:he[9].type==he[58]?"visible":"none"}},Ie[0]&512&&{paint:he[9].type==he[58]?oa["line-self"]:oa.line}]):{};_.$set(Ue)},i(he){z||(et(h.$$.fragment,he),et(y.$$.fragment,he),et(_.$$.fragment,he),z=!0)},o(he){pt(h.$$.fragment,he),pt(y.$$.fragment,he),pt(_.$$.fragment,he),z=!1},d(he){Zt(h,he),he&&T(f),Zt(y,he),he&&T(x),Zt(_,he),he&&T(o)}}}function zk(u){let h,f;const y=[dS[u[58]]];let x={$$slots:{default:[KA]},$$scope:{ctx:u}};for(let _=0;_<y.length;_+=1)x=W_(x,y[_]);return h=new yT({props:x}),{c(){Ut(h.$$.fragment)},l(_){qt(h.$$.fragment,_)},m(_,o){jt(h,_,o),f=!0},p(_,o){const z=o&0?Y_(y,[J_(dS[_[58]])]):{};o[0]&1536|o[2]&1&&(z.$$scope={dirty:o,ctx:_}),h.$set(z)},i(_){f||(et(h.$$.fragment,_),f=!0)},o(_){pt(h.$$.fragment,_),f=!1},d(_){Zt(h,_)}}}function HA(u){let h,f,y=["dz","sdz","ward","dea","lgd"],x=[];for(let o=0;o<5;o+=1)x[o]=zk(vk(u,y,o));const _=o=>pt(x[o],1,1,()=>{x[o]=null});return{c(){for(let o=0;o<5;o+=1)x[o].c();h=An()},l(o){for(let z=0;z<5;z+=1)x[z].l(o);h=An()},m(o,z){for(let P=0;P<5;P+=1)x[P].m(o,z);Pe(o,h,z),f=!0},p(o,z){if(z[0]&34304){y=["dz","sdz","ward","dea","lgd"];let P;for(P=0;P<5;P+=1){const F=vk(o,y,P);x[P]?(x[P].p(F,z),et(x[P],1)):(x[P]=zk(F),x[P].c(),et(x[P],1),x[P].m(h.parentNode,h))}for(Yu(),P=5;P<5;P+=1)_(P);Ju()}},i(o){if(!f){for(let z=0;z<5;z+=1)et(x[z]);f=!0}},o(o){x=x.filter(Boolean);for(let z=0;z<5;z+=1)pt(x[z]);f=!1},d(o){Wc(x,o),o&&T(h)}}}function XA(u){return{c:ln,l:ln,m:ln,p:ln,d:ln}}function WA(u){let h,f,y=u[1].name+"",x,_,o,z,P,F=[...u[1].parents].reverse(),V=[];for(let j=0;j<F.length;j+=1)V[j]=Pk(yk(u,F,j));return{c(){h=M("span"),f=ee("Parents of "),x=ee(y),_=_e(),o=M("br"),z=_e(),P=M("span");for(let j=0;j<V.length;j+=1)V[j].c();this.h()},l(j){h=L(j,"SPAN",{class:!0});var U=R(h);f=te(U,"Parents of "),x=te(U,y),_=be(U),U.forEach(T),o=L(j,"BR",{}),z=be(j),P=L(j,"SPAN",{class:!0});var fe=R(P);for(let he=0;he<V.length;he+=1)V[he].l(fe);fe.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(P,"class","text-small")},m(j,U){Pe(j,h,U),w(h,f),w(h,x),w(h,_),Pe(j,o,U),Pe(j,z,U),Pe(j,P,U);for(let fe=0;fe<V.length;fe+=1)V[fe].m(P,null)},p(j,U){if(U[0]&2&&y!==(y=j[1].name+"")&&ft(x,y),U[0]&2){F=[...j[1].parents].reverse();let fe;for(fe=0;fe<F.length;fe+=1){const he=yk(j,F,fe);V[fe]?V[fe].p(he,U):(V[fe]=Pk(he),V[fe].c(),V[fe].m(P,null))}for(;fe<V.length;fe+=1)V[fe].d(1);V.length=F.length}},d(j){j&&T(h),j&&T(o),j&&T(z),j&&T(P),Wc(V,j)}}}function Pk(u){let h,f,y=u[55]>0?"\u21B3 ":"",x,_=u[56].name+"",o,z;return{c(){h=M("span"),f=new Bx(!1),x=M("a"),o=ee(_),this.h()},l(P){h=L(P,"SPAN",{style:!0});var F=R(h);f=Ox(F,!1),x=L(F,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var V=R(x);o=te(V,_),V.forEach(T),F.forEach(T),this.h()},h(){f.a=x,S(x,"href",z=rp+"/"+u[56].code),S(x,"sveltekit:noscroll",""),S(x,"class","svelte-p0yy5r"),ie(h,"display","block"),ie(h,"margin-left",(u[55]>0?(u[55]-1)*15:0)+"px")},m(P,F){Pe(P,h,F),f.m(y,h),w(h,x),w(x,o)},p(P,F){F[0]&2&&_!==(_=P[56].name+"")&&ft(o,_),F[0]&2&&z!==(z=rp+"/"+P[56].code)&&S(x,"href",z)},d(P){P&&T(h)}}}function YA(u){let h,f,y=u[1].name+"",x,_,o=yn[u[1].type].name+"",z;return{c(){h=M("span"),f=ee("No areas below "),x=ee(y),_=_e(),z=ee(o),this.h()},l(P){h=L(P,"SPAN",{class:!0});var F=R(h);f=te(F,"No areas below "),x=te(F,y),_=be(F),z=te(F,o),F.forEach(T),this.h()},h(){S(h,"class","muted")},m(P,F){Pe(P,h,F),w(h,f),w(h,x),w(h,_),w(h,z)},p(P,F){F[0]&2&&y!==(y=P[1].name+"")&&ft(x,y),F[0]&2&&o!==(o=yn[P[1].type].name+"")&&ft(z,o)},d(P){P&&T(h)}}}function JA(u){let h,f=(u[1].children[0]?yn[u[1].children[0].type].pl:"Areas")+"",y,x,_=u[1].name+"",o,z,P,F,V=u[1].children,j=[];for(let U=0;U<V.length;U+=1)j[U]=Ck(mk(u,V,U));return{c(){h=M("span"),y=ee(f),x=ee(" within "),o=ee(_),z=M("br"),P=_e(),F=M("span");for(let U=0;U<j.length;U+=1)j[U].c();this.h()},l(U){h=L(U,"SPAN",{class:!0});var fe=R(h);y=te(fe,f),x=te(fe," within "),o=te(fe,_),fe.forEach(T),z=L(U,"BR",{}),P=be(U),F=L(U,"SPAN",{class:!0});var he=R(F);for(let Ie=0;Ie<j.length;Ie+=1)j[Ie].l(he);he.forEach(T),this.h()},h(){S(h,"class","text-bold"),S(F,"class","text-small")},m(U,fe){Pe(U,h,fe),w(h,y),w(h,x),w(h,o),Pe(U,z,fe),Pe(U,P,fe),Pe(U,F,fe);for(let he=0;he<j.length;he+=1)j[he].m(F,null)},p(U,fe){if(fe[0]&2&&f!==(f=(U[1].children[0]?yn[U[1].children[0].type].pl:"Areas")+"")&&ft(y,f),fe[0]&2&&_!==(_=U[1].name+"")&&ft(o,_),fe[0]&2){V=U[1].children;let he;for(he=0;he<V.length;he+=1){const Ie=mk(U,V,he);j[he]?j[he].p(Ie,fe):(j[he]=Ck(Ie),j[he].c(),j[he].m(F,null))}for(;he<j.length;he+=1)j[he].d(1);j.length=V.length}},d(U){U&&T(h),U&&T(z),U&&T(P),U&&T(F),Wc(j,U)}}}function Ck(u){let h,f=u[53].name+"",y,x,_=u[55]<u[1].children.length-1?", ":"",o;return{c(){h=M("a"),y=ee(f),o=ee(_),this.h()},l(z){h=L(z,"A",{href:!0,"sveltekit:noscroll":!0,class:!0});var P=R(h);y=te(P,f),P.forEach(T),o=te(z,_),this.h()},h(){S(h,"href",x=rp+"/"+u[53].code),S(h,"sveltekit:noscroll",""),S(h,"class","svelte-p0yy5r")},m(z,P){Pe(z,h,P),w(h,y),Pe(z,o,P)},p(z,P){P[0]&2&&f!==(f=z[53].name+"")&&ft(y,f),P[0]&2&&x!==(x=rp+"/"+z[53].code)&&S(h,"href",x),P[0]&2&&_!==(_=z[55]<z[1].children.length-1?", ":"")&&ft(o,_)},d(z){z&&T(h),z&&T(o)}}}function QA(u){let h=u[1].name+"",f,y;return{c(){f=ee(h),y=ee(" contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},l(x){f=te(x,h),y=te(x," contains 11 Local Goverment Districts, 80 District Electoral Areas, 850 Super Data Zones and 3780 Data Zones.")},m(x,_){Pe(x,f,_),Pe(x,y,_)},p(x,_){_[0]&2&&h!==(h=x[1].name+"")&&ft(f,h)},d(x){x&&T(f),x&&T(y)}}}function $A(u){let h=u[1].name+"",f,y,x=u[1].count.toLocaleString()+"",_,o,z=yn[u[1].type].pl+"",P,F,V=u[1].parents[0].name+"",j,U;return{c(){f=ee(h),y=ee(" is one of "),_=ee(x),o=_e(),P=ee(z),F=ee(`.\r
								 It is located within `),j=ee(V),U=ee(".")},l(fe){f=te(fe,h),y=te(fe," is one of "),_=te(fe,x),o=be(fe),P=te(fe,z),F=te(fe,`.\r
								 It is located within `),j=te(fe,V),U=te(fe,".")},m(fe,he){Pe(fe,f,he),Pe(fe,y,he),Pe(fe,_,he),Pe(fe,o,he),Pe(fe,P,he),Pe(fe,F,he),Pe(fe,j,he),Pe(fe,U,he)},p(fe,he){he[0]&2&&h!==(h=fe[1].name+"")&&ft(f,h),he[0]&2&&x!==(x=fe[1].count.toLocaleString()+"")&&ft(_,x),he[0]&2&&z!==(z=yn[fe[1].type].pl+"")&&ft(P,z),he[0]&2&&V!==(V=fe[1].parents[0].name+"")&&ft(j,V)},d(fe){fe&&T(f),fe&&T(y),fe&&T(_),fe&&T(o),fe&&T(P),fe&&T(F),fe&&T(j),fe&&T(U)}}}function ez(u){let h=u[1].name+"",f,y,x=u[1].count.toLocaleString()+"",_,o,z=yn[u[1].type].pl+"",P,F,V=u[1].parents[0].name+"",j,U,fe=yn[u[1].parents[0].type].name+"",he,Ie;return{c(){f=ee(h),y=ee(" is one of "),_=ee(x),o=_e(),P=ee(z),F=ee(`.  \r
									It is located within `),j=ee(V),U=_e(),he=ee(fe),Ie=ee(".")},l(we){f=te(we,h),y=te(we," is one of "),_=te(we,x),o=be(we),P=te(we,z),F=te(we,`.  \r
									It is located within `),j=te(we,V),U=be(we),he=te(we,fe),Ie=te(we,".")},m(we,Ve){Pe(we,f,Ve),Pe(we,y,Ve),Pe(we,_,Ve),Pe(we,o,Ve),Pe(we,P,Ve),Pe(we,F,Ve),Pe(we,j,Ve),Pe(we,U,Ve),Pe(we,he,Ve),Pe(we,Ie,Ve)},p(we,Ve){Ve[0]&2&&h!==(h=we[1].name+"")&&ft(f,h),Ve[0]&2&&x!==(x=we[1].count.toLocaleString()+"")&&ft(_,x),Ve[0]&2&&z!==(z=yn[we[1].type].pl+"")&&ft(P,z),Ve[0]&2&&V!==(V=we[1].parents[0].name+"")&&ft(j,V),Ve[0]&2&&fe!==(fe=yn[we[1].parents[0].type].name+"")&&ft(he,fe)},d(we){we&&T(f),we&&T(y),we&&T(_),we&&T(o),we&&T(P),we&&T(F),we&&T(j),we&&T(U),we&&T(he),we&&T(Ie)}}}function Dk(u){let h,f,y,x=u[1].data.population.value[2021].all/u[1].hectares>u[2].data.population.value[2021].all/u[2].hectares*1.1?"Higher than Northern Ireland value of ":u[1].data.population.value[2021].all/u[1].hectares<u[2].data.population.value[2021].all/u[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ",_,o,z=(u[2].data.population.value[2021].all/u[2].hectares).toFixed(1)+"",P,F;return{c(){h=M("br"),f=_e(),y=M("span"),_=ee(x),o=_e(),P=ee(z),F=ee(" persons per hectare"),this.h()},l(V){h=L(V,"BR",{}),f=be(V),y=L(V,"SPAN",{class:!0});var j=R(y);_=te(j,x),o=be(j),P=te(j,z),F=te(j," persons per hectare"),j.forEach(T),this.h()},h(){S(y,"class","text-small")},m(V,j){Pe(V,h,j),Pe(V,f,j),Pe(V,y,j),w(y,_),w(y,o),w(y,P),w(y,F)},p(V,j){j[0]&6&&x!==(x=V[1].data.population.value[2021].all/V[1].hectares>V[2].data.population.value[2021].all/V[2].hectares*1.1?"Higher than Northern Ireland value of ":V[1].data.population.value[2021].all/V[1].hectares<V[2].data.population.value[2021].all/V[2].hectares*.9?"Lower than Northern Ireland value of ":"Similar to the Northern Ireland value of ")&&ft(_,x),j[0]&4&&z!==(z=(V[2].data.population.value[2021].all/V[2].hectares).toFixed(1)+"")&&ft(P,z)},d(V){V&&T(h),V&&T(f),V&&T(y)}}}function Mk(u){let h,f,y,x,_;return{c(){h=M("div"),f=Da("svg"),y=Da("rect"),x=_e(),_=ee(u[13]),this.h()},l(o){h=L(o,"DIV",{class:!0});var z=R(h);f=Ma(z,"svg",{width:!0,height:!0,style:!0});var P=R(f);y=Ma(P,"rect",{width:!0,height:!0,style:!0}),R(y).forEach(T),P.forEach(T),x=be(z),_=te(z,u[13]),z.forEach(T),this.h()},h(){S(y,"width","25"),S(y,"height","4"),ie(y,"fill","#CEDC20"),S(f,"width","25"),S(f,"height","4"),ie(f,"display","inline-block"),ie(f,"margin-bottom","3px"),S(h,"class","text-small muted; ")},m(o,z){Pe(o,h,z),w(h,f),w(f,y),w(h,x),w(h,_)},p(o,z){z[0]&8192&&ft(_,o[13])},d(o){o&&T(h)}}}function tz(u){let h,f,y=u[1]&&u[2]&&_k(u);return{c(){y&&y.c(),h=An()},l(x){y&&y.l(x),h=An()},m(x,_){y&&y.m(x,_),Pe(x,h,_),f=!0},p(x,_){x[1]&&x[2]?y?(y.p(x,_),_[0]&6&&et(y,1)):(y=_k(x),y.c(),et(y,1),y.m(h.parentNode,h)):y&&(Yu(),pt(y,1,1,()=>{y=null}),Ju())},i(x){f||(et(y),f=!0)},o(x){pt(y),f=!1},d(x){y&&y.d(x),x&&T(h)}}}function rz(u){let h,f,y,x,_,o,z,P,F,V,j,U,fe,he,Ie,we;return document.title=h=u[1].name+" Census Data",fe=new bA({}),Ie=new c3({props:{column:"wide",$$slots:{default:[tz]},$$scope:{ctx:u}}}),{c(){f=M("meta"),y=M("meta"),_=M("meta"),o=M("meta"),P=M("meta"),V=M("meta"),U=_e(),Ut(fe.$$.fragment),he=_e(),Ut(Ie.$$.fragment),this.h()},l(Ve){const Ue=s3('[data-svelte="svelte-14ulspn"]',document.head);f=L(Ue,"META",{name:!0,content:!0}),y=L(Ue,"META",{property:!0,content:!0}),_=L(Ue,"META",{property:!0,content:!0}),o=L(Ue,"META",{property:!0,content:!0}),P=L(Ue,"META",{property:!0,content:!0}),V=L(Ue,"META",{name:!0,content:!0}),Ue.forEach(T),U=be(Ve),qt(fe.$$.fragment,Ve),he=be(Ve),qt(Ie.$$.fragment,Ve),this.h()},h(){S(f,"name","description"),S(f,"content",""),S(y,"property","og:title"),S(y,"content",x=u[1].name+" Census Data"),S(_,"property","og:type"),S(_,"content","website"),S(o,"property","og:url"),S(o,"content",z=t0.base+"/"+u[1].code+"/"),S(P,"property","og:description"),S(P,"content",F="Explore census data for "+u[1].name+"."),S(V,"name","description"),S(V,"content",j="Explore census data for "+u[1].name+".")},m(Ve,Ue){w(document.head,f),w(document.head,y),w(document.head,_),w(document.head,o),w(document.head,P),w(document.head,V),Pe(Ve,U,Ue),jt(fe,Ve,Ue),Pe(Ve,he,Ue),jt(Ie,Ve,Ue),we=!0},p(Ve,Ue){(!we||Ue[0]&2)&&h!==(h=Ve[1].name+" Census Data")&&(document.title=h),(!we||Ue[0]&2&&x!==(x=Ve[1].name+" Census Data"))&&S(y,"content",x),(!we||Ue[0]&2&&z!==(z=t0.base+"/"+Ve[1].code+"/"))&&S(o,"content",z),(!we||Ue[0]&2&&F!==(F="Explore census data for "+Ve[1].name+"."))&&S(P,"content",F),(!we||Ue[0]&2&&j!==(j="Explore census data for "+Ve[1].name+"."))&&S(V,"content",j);const Ot={};Ue[0]&16383|Ue[2]&1&&(Ot.$$scope={dirty:Ue,ctx:Ve}),Ie.$set(Ot)},i(Ve){we||(et(fe.$$.fragment,Ve),et(Ie.$$.fragment,Ve),we=!0)},o(Ve){pt(fe.$$.fragment,Ve),pt(Ie.$$.fragment,Ve),we=!1},d(Ve){T(f),T(y),T(_),T(o),T(P),T(V),Ve&&T(U),Zt(fe,Ve),Ve&&T(he),Zt(Ie,Ve)}}}const uz=!0;async function Lk(u,h){return await(await h(t0.app_json_data+u+".json")).json()}async function cz({params:u,fetch:h}){let f=u.code,y=await b3(t0.search_data,h),x={};y.forEach(P=>x[P.code]=P.name),y.forEach(P=>{P.typepl=yn[P.type].pl,P.typenm=yn[P.type].name,P.typestr=x[P.parent]?`${yn[P.type].name} within ${x[P.parent]}`:""});let _=y.sort((P,F)=>P.name.localeCompare(F.name)),o=await Lk("N92000002",h),z=await Lk(f,h);return{props:{search_data:_,place:z,ni:o}}}function iz(u,h,f){let y,x,_,o,z,{search_data:P,place:F,ni:V}=h,j,U,fe=null,he=!1,Ie={selected:null,type:null,childType:null,highlighted:[],hovered:null},we={};Object.keys(fd).forEach(Jt=>f(10,we[Jt]=!1,we));function Ve(Jt){const Ei=(Fr,Yn)=>Fr+Yn;let Mr=Jt[0],di="perc",mi=F.data[Mr][di][2021],Ar=F.data[Mr][di][2011],yi=V.data[Mr][di][2021],un=fS[Mr].map(Fr=>Fr.category),Kr=fS[Mr].map(Fr=>Fr.label?Fr.label:Fr.category);return un.map((Fr,Yn)=>Array.isArray(Fr)?{x:Kr[Yn],y:Fr.map(Fn=>mi[Fn]).reduce(Ei,0),ni:Fr.map(Fn=>yi[Fn]).reduce(Ei,0),prev:Fr.map(Fn=>Ar[Fn]).reduce(Ei,0)}:{x:Kr[Yn],y:mi[Fr],ni:yi[Fr],prev:Ar[Fr]})}function Ue(Jt){fe&&fe.fitBounds(Jt,{padding:20})}function Ot(Jt){let Ei=JSON.parse(JSON.stringify(Ie)),Mr=Jt.code,di=Jt.type,mi=Jt.children[0]?Jt.children.map(hr=>hr.code):[],Ar=Jt.type=="rgn"?"cty":mi[0]?Jt.children[0].type:null;f(9,Ie.selected=Mr,Ie),f(9,Ie.type=di,Ie),f(9,Ie.childType=Ar,Ie),f(9,Ie.highlighted=mi,Ie);let yi=Object.keys(fd),un=["fill-color","fill-opacity"],Kr=["line-color","line-width","line-opacity"];fe&&(Ie.type!=Ei.type||Ie.childType!=Ei.childType)&&(yi.forEach(hr=>{let Fr=hr==di||Ar&&hr==Ar?"visible":"none";fe.setLayoutProperty(hr+"-fill","visibility",Fr),fe.setLayoutProperty(hr+"-bounds","visibility",Fr),Jt.parents[0]&&fe.setLayoutProperty(hr+"-self","visibility",Fr),f(10,we[hr]=hr==Ar,we)}),Jt.parents[0]&&(un.forEach(hr=>fe.setPaintProperty(di+"-fill",hr,oa[mi[0]?"fill-active":"fill-self"][hr])),Kr.forEach(hr=>{fe.setPaintProperty(di+"-bounds",hr,oa["line-active"][hr]),fe.setPaintProperty(di+"-self",hr,oa["line-self"][hr])})),Ar&&(un.forEach(hr=>fe.setPaintProperty(Ar+"-fill",hr,oa["fill-child"][hr])),Kr.forEach(hr=>fe.setPaintProperty(Ar+"-bounds",hr,oa["line-child"][hr]))))}function Mt(Jt){Ot(Jt),Ue(Jt.bounds)}function mt(Jt){vS(`${rp}/${Jt.detail.code}/`,{noscroll:!0})}function Qe(Jt){vS(`${rp}/${Jt.detail.value}/`,{noscroll:!0})}function kr(){f(7,U=j<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}const xr=()=>f(5,z=!0),ar=()=>f(4,he=!1),It=()=>f(11,o=!1),At=()=>f(5,z=!0),Tr=()=>f(4,he=!1),Vt=()=>f(11,o=!1),Ir=()=>f(11,o=!0),rt=()=>f(5,z=!1),lr=()=>f(4,he=!1),ri=()=>f(4,he=!0),ci=()=>f(5,z=!1),Er=()=>f(11,o=!1),vt=()=>f(4,he=!1),nt=()=>f(5,z=!0),fr=()=>f(11,o=!1);function On(Jt){fe=Jt,f(8,fe)}function sa(){j=this.clientWidth,f(3,j)}function Ti(){j=this.clientWidth,f(3,j)}function vn(){j=this.clientWidth,f(3,j)}function oi(){j=this.clientWidth,f(3,j)}function Sa(){j=this.clientWidth,f(3,j)}function gr(){j=this.clientWidth,f(3,j)}function Vn(){j=this.clientWidth,f(3,j)}function Qa(){j=this.clientWidth,f(3,j)}function Vr(){j=this.clientWidth,f(3,j)}function Lt(){j=this.clientWidth,f(3,j)}function Wi(){j=this.clientWidth,f(3,j)}function Bi(){j=this.clientWidth,f(3,j)}function hi(){j=this.clientWidth,f(3,j)}function ho(){j=this.clientWidth,f(3,j)}return u.$$set=Jt=>{"search_data"in Jt&&f(0,P=Jt.search_data),"place"in Jt&&f(1,F=Jt.place),"ni"in Jt&&f(2,V=Jt.ni)},u.$$.update=()=>{u.$$.dirty[0]&8&&j&&kr(),u.$$.dirty[0]&18&&f(13,y=he?"Same area 2011":F&&F.parents[0]?"NI 2021":null),u.$$.dirty[0]&2&&f(6,x=!(F.type!="ni"&&F.type!="lgd")),u.$$.dirty[0]&114&&f(12,_=z?null:he&&x?"prev":!he&&F.type!="ni"?"ni":null),u.$$.dirty[0]&2&&F&&Mt(F)},f(5,z=!0),f(11,o=!1),[P,F,V,j,he,z,x,U,fe,Ie,we,o,_,y,Ve,mt,Qe,xr,ar,It,At,Tr,Vt,Ir,rt,lr,ri,ci,Er,vt,nt,fr,On,sa,Ti,vn,oi,Sa,gr,Vn,Qa,Vr,Lt,Wi,Bi,hi,ho]}class hz extends Wo{constructor(h){super(),Yo(this,h,iz,rz,Jo,{search_data:0,place:1,ni:2},null,[-1,-1,-1])}}export{hz as default,cz as load,uz as prerender};
